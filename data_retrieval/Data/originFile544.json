{"items":[{"tags":["java","objectmapper","mapstruct"],"comments":[{"owner":{"account_id":19793538,"reputation":300,"user_id":14496012,"display_name":"centrumek"},"score":0,"creation_date":1612570214,"post_id":66020979,"comment_id":116817250,"body_markdown":"If all of these mappings have the same `TargetClass` and different `SourceClass` I think that there is no way to achieve that. You can experiment with some abstract class of `SourceClass` and maps all similar fields in one mapping method, but I didn&#39;t test yet if mapsturct allows you to have abstract class in argument method or it needs only concrete class. You can try and let know if it helps :)","body":"If all of these mappings have the same <code>TargetClass</code> and different <code>SourceClass</code> I think that there is no way to achieve that. You can experiment with some abstract class of <code>SourceClass</code> and maps all similar fields in one mapping method, but I didn&#39;t test yet if mapsturct allows you to have abstract class in argument method or it needs only concrete class. You can try and let know if it helps :)"}],"answers":[{"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1679927404,"creation_date":1612700671,"answer_id":66087884,"question_id":66020979,"body_markdown":"You can use [Mapping Composition](https://mapstruct.org/documentation/stable/reference/html/#mapping-composition) in order to avoid the duplication.\r\n\r\ne.g.\r\n\r\n```\r\n@Retention(RetentionPolicy.CLASS)\r\n@Mapping(target = &quot;tenantTitleId&quot;, expression = &quot;productID&quot;)\r\n@Mapping(target = &quot;tenantId&quot;, constant = &quot;MGM&quot;)\r\n@Mapping(target = &quot;titleName&quot;, expression = &quot;productDesc&quot;)\r\npublic @interface CommonMappings { }\r\n```\r\n\r\nAnd then your mapper will look like:\r\n\r\n```\r\n  ///Mapper 1\r\n  @CommonMappings\r\n  @Mapping(target = &quot;orders&quot;, source = &quot;order&quot;, qualifiedBy = ComplexMapper.class)\r\n  @BeanMapping(ignoreByDefault = true)\r\n  public abstract TargetClass toTargetClass(SourceClass sourceClass) throws Exception;\r\n\r\n  ///Mapper 2\r\n  @CommonMappings\r\n  @Mapping(target = &quot;orders&quot;, source = &quot;order&quot;, qualifiedBy = AnotherComplexMapper.class)\r\n  @BeanMapping(ignoreByDefault = true)\r\n  public abstract TargetClass toTargetClass(SourceClass sourceClass) throws Exception;\r\n```","title":"Avoid duplicate mapping in MapStruct","body":"<p>You can use <a href=\"https://mapstruct.org/documentation/stable/reference/html/#mapping-composition\" rel=\"nofollow noreferrer\">Mapping Composition</a> in order to avoid the duplication.</p>\n<p>e.g.</p>\n<pre><code>@Retention(RetentionPolicy.CLASS)\n@Mapping(target = &quot;tenantTitleId&quot;, expression = &quot;productID&quot;)\n@Mapping(target = &quot;tenantId&quot;, constant = &quot;MGM&quot;)\n@Mapping(target = &quot;titleName&quot;, expression = &quot;productDesc&quot;)\npublic @interface CommonMappings { }\n</code></pre>\n<p>And then your mapper will look like:</p>\n<pre><code>  ///Mapper 1\n  @CommonMappings\n  @Mapping(target = &quot;orders&quot;, source = &quot;order&quot;, qualifiedBy = ComplexMapper.class)\n  @BeanMapping(ignoreByDefault = true)\n  public abstract TargetClass toTargetClass(SourceClass sourceClass) throws Exception;\n\n  ///Mapper 2\n  @CommonMappings\n  @Mapping(target = &quot;orders&quot;, source = &quot;order&quot;, qualifiedBy = AnotherComplexMapper.class)\n  @BeanMapping(ignoreByDefault = true)\n  public abstract TargetClass toTargetClass(SourceClass sourceClass) throws Exception;\n</code></pre>\n"}],"owner":{"account_id":17176912,"reputation":647,"user_id":12432925,"display_name":"Carlos Gonzalez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2932,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679927404,"creation_date":1612324061,"question_id":66020979,"body_markdown":"I have two MapStruct mapper classes where some of the target/source classes and some of the fields are exactly the same:\r\n\r\n```\r\n  ///Mapper 1\r\n  @Mappings({\r\n          @Mapping(target = &quot;tenantTitleId&quot;, expression = &quot;java(order.getProductID())&quot;),\r\n          @Mapping(target = &quot;tenantId&quot;, constant = &quot;MGM&quot;),\r\n          @Mapping(target = &quot;titleName&quot;, expression = &quot;java(order.getProductDesc())&quot;),\r\n          @Mapping(target = &quot;orders&quot;, source = &quot;order&quot;, qualifiedBy = ComplexMapper.class),\r\n  })\r\n  @BeanMapping(ignoreByDefault = true)\r\n  public abstract TargetClass toTargetClass(SourceClass sourceClass) throws Exception;\r\n\r\n  ///Mapper 2\r\n  @Mappings({\r\n          @Mapping(target = &quot;tenantTitleId&quot;, expression = &quot;java(order.getProductID())&quot;),\r\n          @Mapping(target = &quot;tenantId&quot;, constant = &quot;MGM&quot;),\r\n          @Mapping(target = &quot;titleName&quot;, expression = &quot;java(order.getProductDesc())&quot;),\r\n          @Mapping(target = &quot;orders&quot;, source = &quot;order&quot;, qualifiedBy = AnotherComplexMapper.class),\r\n  })\r\n  @BeanMapping(ignoreByDefault = true)\r\n  public abstract TargetClass toTargetClass(SourceClass sourceClass) throws Exception;\r\n```\r\nThe first 3 mappings are exactly the same. Is there a way to not repeat this mapping the MapStruct way?","title":"Avoid duplicate mapping in MapStruct","body":"<p>I have two MapStruct mapper classes where some of the target/source classes and some of the fields are exactly the same:</p>\n<pre><code>  ///Mapper 1\n  @Mappings({\n          @Mapping(target = &quot;tenantTitleId&quot;, expression = &quot;java(order.getProductID())&quot;),\n          @Mapping(target = &quot;tenantId&quot;, constant = &quot;MGM&quot;),\n          @Mapping(target = &quot;titleName&quot;, expression = &quot;java(order.getProductDesc())&quot;),\n          @Mapping(target = &quot;orders&quot;, source = &quot;order&quot;, qualifiedBy = ComplexMapper.class),\n  })\n  @BeanMapping(ignoreByDefault = true)\n  public abstract TargetClass toTargetClass(SourceClass sourceClass) throws Exception;\n\n  ///Mapper 2\n  @Mappings({\n          @Mapping(target = &quot;tenantTitleId&quot;, expression = &quot;java(order.getProductID())&quot;),\n          @Mapping(target = &quot;tenantId&quot;, constant = &quot;MGM&quot;),\n          @Mapping(target = &quot;titleName&quot;, expression = &quot;java(order.getProductDesc())&quot;),\n          @Mapping(target = &quot;orders&quot;, source = &quot;order&quot;, qualifiedBy = AnotherComplexMapper.class),\n  })\n  @BeanMapping(ignoreByDefault = true)\n  public abstract TargetClass toTargetClass(SourceClass sourceClass) throws Exception;\n</code></pre>\n<p>The first 3 mappings are exactly the same. Is there a way to not repeat this mapping the MapStruct way?</p>\n"},{"tags":["java","android","classnotfoundexception","android-asset-studio"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1667674498,"post_id":74330586,"comment_id":131224634,"body_markdown":"&quot;All the other command line tools (sdkmanager, avdmanager, adb, etc) are all working seamlessly thus far&quot; -- the Image Asset wizard is not a command-line tool. It is part of Android Studio. &quot;I&#39;m loathe to install Android Studio IDE just for this&quot; -- have you considered using online equivalents? `android icon builder` in search engines turns up lots of options, such as https://appicon.co/.","body":"&quot;All the other command line tools (sdkmanager, avdmanager, adb, etc) are all working seamlessly thus far&quot; -- the Image Asset wizard is not a command-line tool. It is part of Android Studio. &quot;I&#39;m loathe to install Android Studio IDE just for this&quot; -- have you considered using online equivalents? <code>android icon builder</code> in search engines turns up lots of options, such as <a href=\"https://appicon.co/\" rel=\"nofollow noreferrer\">appicon.co</a>."},{"owner":{"account_id":14856125,"reputation":417,"user_id":10728583,"display_name":"Noscere"},"score":0,"creation_date":1667674589,"post_id":74330586,"comment_id":131224651,"body_markdown":"Thanks for this. It&#39;s amazing how many things you&#39;ve never noticed before no matter how (in)experienced one may be. Thanks for the quick reply. I shall try more searches with some different terms. I don&#39;t like relying on online tools when the functionality should work offline... but if it saves banging my head on the monitor, so be it :)","body":"Thanks for this. It&#39;s amazing how many things you&#39;ve never noticed before no matter how (in)experienced one may be. Thanks for the quick reply. I shall try more searches with some different terms. I don&#39;t like relying on online tools when the functionality should work offline... but if it saves banging my head on the monitor, so be it :)"}],"answers":[{"tags":[],"owner":{"account_id":3767479,"reputation":194,"user_id":3130610,"accept_rate":83,"display_name":"Fernando Jascovich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679927170,"creation_date":1679927170,"answer_id":75856945,"question_id":74330586,"body_markdown":"You can use [IconKitchen](https://icon.kitchen) which is online and works great.","title":"How can I launch Image Asset Studio (Android SDK commandline tools) from the command line?","body":"<p>You can use <a href=\"https://icon.kitchen\" rel=\"nofollow noreferrer\">IconKitchen</a> which is online and works great.</p>\n"}],"owner":{"account_id":14856125,"reputation":417,"user_id":10728583,"display_name":"Noscere"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679927170,"creation_date":1667674139,"question_id":74330586,"body_markdown":"I am trying to run [Image Asset Studio][1] from the Android SDK and am encountering an error I cannot solve.\r\n\r\nTo give a little bit of background, I am presently limited by an ageing laptop (AMD A4-5000, 8&amp;nbsp;GB RAM, 1&amp;nbsp;TB hybrid disk [256&amp;nbsp;MB? SSD]) and, whilst I don&#39;t really have any major issue with Android Studio IDE, I find it very bloated and eats up my CPU time and memory. Visual Studio Code on the other hand, suits my cross-platform developing needs almost perfectly, is lightweight and with a plethora of extensions covering all I have needed thus far.\r\n\r\nI am attempting to simply execute the Image Asset Studio *.jar* file from the command line and am encountering a *Class Not Found* error that suggests my paths might not be configured correctly, but as far as I can tell, all is well... all the other tools I have used have all worked as expected, but this is the first time I have tried to use one of the JAR applets from the /lib/ directory.\r\n\r\nI have the latest (AFAIK) Android SDK command-line tools installed in my home directory, and I am trying to launch the Image Asset Studio from the command line. Two examples I have tried are:\r\n\r\n&gt; ~/android/tools/lib$  **java asset-studio-26.0.0-dev.jar**\r\n&gt;\r\n&gt; ~/$  **java ./android/tools/lib/asset-studio-26.0.0-dev.jar**\r\n\r\nThese give me the following error, or variations thereof:\r\n\r\n&gt; Error: Could not find or load main class android.tools.lib.asset-studio-26.0.0-dev.jar\r\n&gt;\r\n&gt; Error: Could not find or load main class asset-studio-26.0.0-dev.jar\r\n\r\nAlso, I have tried with the *-jar* flag:\r\n\r\n&gt; ~$  **java -jar ~/android/tools/lib/asset-studio-26.0.0-dev.jar**\r\n&gt;\r\n&gt; no main manifest attribute, in /home/noscere/android/tools/lib/asset-studio-26.0.0-dev.jar\r\n\r\nDifferent error, same effect :-)\r\n\r\nI was previously getting a different error, which related to the wrong Java [JRE][2] being executed (I have 11 installed as well as the required 8 - solved with a quick `sudo update-alternatives --config java`). Here is my current Java version:\r\n\r\n&gt; ~/android$ **java -version**\r\n&gt;\r\n&gt; **openjdk version &quot;1.8.0_342&quot;**\r\n&gt; **OpenJDK Runtime Environment (build 1.8.0_342-8u342-b07-0ubuntu1~20.04-b07)**\r\n&gt;\r\n&gt; **OpenJDK 64-Bit Server VM (build 25.342-b07, mixed mode)**\r\n\r\nFor reference, **sdkmanager --version** gives an output of **7.0** - if that helps identify my SDK version.\r\n\r\nIs it possible to be successful in running any of the SDK Java apps from outside of the Studio IDE? All the other command line tools (sdkmanager, avdmanager, adb, etc.) are all working seamlessly thus far. In fact, I&#39;ve not encountered any issue with my Visual Studio Code + SDK command-line tools development environment (well, that hasn&#39;t quick-fixable), until now...\r\n\r\nMy environment variables relating to the Android SDK are as follows (and all correct):\r\n\r\n&gt; **export ANDROID_HOME=$HOME/android**\r\n&gt;\r\n&gt; **export PATH=$ANDROID_HOME/cmdline-tools/tools/bin:$PATH**\r\n&gt;\r\n&gt; **export PATH=$ANDROID_HOME/emulator:$PATH**\r\n&gt;\r\n&gt; **export PATH=$ANDROID_HOME/platform-tools:$PATH**\r\n&gt;\r\n&gt; **export REPO_OS_OVERRIDE=&quot;Linux&quot;**\r\n\r\nI&#39;m stumped. Google-searching has thus far been fruitless. I&#39;m loathe to install Android Studio IDE just for this, when I have successfully developed several apps over the years without needing it. I&#39;m loathe to admit defeat.\r\n\r\n  [1]: https://developer.android.com/studio/write/image-asset-studio\r\n  [2]: https://en.wikipedia.org/wiki/Java_virtual_machine#Java_Runtime_Environment\r\n\r\n\r\n","title":"How can I launch Image Asset Studio (Android SDK commandline tools) from the command line?","body":"<p>I am trying to run <a href=\"https://developer.android.com/studio/write/image-asset-studio\" rel=\"nofollow noreferrer\">Image Asset Studio</a> from the Android SDK and am encountering an error I cannot solve.</p>\n<p>To give a little bit of background, I am presently limited by an ageing laptop (AMD A4-5000, 8 GB RAM, 1 TB hybrid disk [256 MB? SSD]) and, whilst I don't really have any major issue with Android Studio IDE, I find it very bloated and eats up my CPU time and memory. Visual Studio Code on the other hand, suits my cross-platform developing needs almost perfectly, is lightweight and with a plethora of extensions covering all I have needed thus far.</p>\n<p>I am attempting to simply execute the Image Asset Studio <em>.jar</em> file from the command line and am encountering a <em>Class Not Found</em> error that suggests my paths might not be configured correctly, but as far as I can tell, all is well... all the other tools I have used have all worked as expected, but this is the first time I have tried to use one of the JAR applets from the /lib/ directory.</p>\n<p>I have the latest (AFAIK) Android SDK command-line tools installed in my home directory, and I am trying to launch the Image Asset Studio from the command line. Two examples I have tried are:</p>\n<blockquote>\n<p>~/android/tools/lib$  <strong>java asset-studio-26.0.0-dev.jar</strong></p>\n<p>~/$  <strong>java ./android/tools/lib/asset-studio-26.0.0-dev.jar</strong></p>\n</blockquote>\n<p>These give me the following error, or variations thereof:</p>\n<blockquote>\n<p>Error: Could not find or load main class android.tools.lib.asset-studio-26.0.0-dev.jar</p>\n<p>Error: Could not find or load main class asset-studio-26.0.0-dev.jar</p>\n</blockquote>\n<p>Also, I have tried with the <em>-jar</em> flag:</p>\n<blockquote>\n<p>~$  <strong>java -jar ~/android/tools/lib/asset-studio-26.0.0-dev.jar</strong></p>\n<p>no main manifest attribute, in /home/noscere/android/tools/lib/asset-studio-26.0.0-dev.jar</p>\n</blockquote>\n<p>Different error, same effect :-)</p>\n<p>I was previously getting a different error, which related to the wrong Java <a href=\"https://en.wikipedia.org/wiki/Java_virtual_machine#Java_Runtime_Environment\" rel=\"nofollow noreferrer\">JRE</a> being executed (I have 11 installed as well as the required 8 - solved with a quick <code>sudo update-alternatives --config java</code>). Here is my current Java version:</p>\n<blockquote>\n<p>~/android$ <strong>java -version</strong></p>\n<p><strong>openjdk version &quot;1.8.0_342&quot;</strong>\n<strong>OpenJDK Runtime Environment (build 1.8.0_342-8u342-b07-0ubuntu1~20.04-b07)</strong></p>\n<p><strong>OpenJDK 64-Bit Server VM (build 25.342-b07, mixed mode)</strong></p>\n</blockquote>\n<p>For reference, <strong>sdkmanager --version</strong> gives an output of <strong>7.0</strong> - if that helps identify my SDK version.</p>\n<p>Is it possible to be successful in running any of the SDK Java apps from outside of the Studio IDE? All the other command line tools (sdkmanager, avdmanager, adb, etc.) are all working seamlessly thus far. In fact, I've not encountered any issue with my Visual Studio Code + SDK command-line tools development environment (well, that hasn't quick-fixable), until now...</p>\n<p>My environment variables relating to the Android SDK are as follows (and all correct):</p>\n<blockquote>\n<p><strong>export ANDROID_HOME=$HOME/android</strong></p>\n<p><strong>export PATH=$ANDROID_HOME/cmdline-tools/tools/bin:$PATH</strong></p>\n<p><strong>export PATH=$ANDROID_HOME/emulator:$PATH</strong></p>\n<p><strong>export PATH=$ANDROID_HOME/platform-tools:$PATH</strong></p>\n<p><strong>export REPO_OS_OVERRIDE=&quot;Linux&quot;</strong></p>\n</blockquote>\n<p>I'm stumped. Google-searching has thus far been fruitless. I'm loathe to install Android Studio IDE just for this, when I have successfully developed several apps over the years without needing it. I'm loathe to admit defeat.</p>\n"},{"tags":["java","parallel-processing","java-stream","scalability"],"comments":[{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":0,"creation_date":1679927425,"post_id":75856828,"comment_id":133804087,"body_markdown":"Does the mapper need to change the structure of the json-object? Otherwise, you&#39;d be sending the same thing if you just send the json as a string.","body":"Does the mapper need to change the structure of the json-object? Otherwise, you&#39;d be sending the same thing if you just send the json as a string."},{"owner":{"account_id":51881,"reputation":38016,"user_id":155020,"accept_rate":80,"display_name":"chubbsondubs"},"score":0,"creation_date":1679930068,"post_id":75856828,"comment_id":133804977,"body_markdown":"I think it would be best to describe your objects a little more.  If the underlying data structures are different then you may have to go down the polymorphism route, but if they are slightly different you could have a single object that has optional fields, but it&#39;s the same object.  So this decision really depends upon your specific situation which wasn&#39;t included. Also WHO has this large quantity of data?  It is on the client?  Is it in a storage tier (ie DB)?","body":"I think it would be best to describe your objects a little more.  If the underlying data structures are different then you may have to go down the polymorphism route, but if they are slightly different you could have a single object that has optional fields, but it&#39;s the same object.  So this decision really depends upon your specific situation which wasn&#39;t included. Also WHO has this large quantity of data?  It is on the client?  Is it in a storage tier (ie DB)?"},{"owner":{"account_id":7454270,"reputation":67,"user_id":5667980,"display_name":"Joy"},"score":0,"creation_date":1679931343,"post_id":75856828,"comment_id":133805341,"body_markdown":"I am getting this data via a POST request in my db from where I fetch it. The reuqest body structure is like { id, description, tariffid, state, channelType, timeStamp}, but the api needs some processing to be done on the desciption, timeStamp and state, can&#39;t be directly mapped. Let&#39;s say I am able to do it somehow, is there any way to increase throughput?","body":"I am getting this data via a POST request in my db from where I fetch it. The reuqest body structure is like { id, description, tariffid, state, channelType, timeStamp}, but the api needs some processing to be done on the desciption, timeStamp and state, can&#39;t be directly mapped. Let&#39;s say I am able to do it somehow, is there any way to increase throughput?"}],"owner":{"account_id":7454270,"reputation":67,"user_id":5667980,"display_name":"Joy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679926559,"creation_date":1679926559,"question_id":75856828,"body_markdown":"Let&#39;s say I have a json data of multiple vendors in a large number of categories. I need to make post api calls for top 10 vendors of these hundreds of categories.\r\nHow can I do that in a scalable manner?\r\n\r\nEach category&#39;s post api call has a specific request body. How to map the specific json to each api call&#39;s expected request body? \r\n\r\nI was thinking something like :\r\n```\r\njson.stream\r\n    .parallel()\r\n    .map((x) -&gt; {\r\n        reqBody = jackson mapper for the request body;\r\n        return reqBody;\r\n    })\r\n    .forEach((body)-&gt; make post call);\r\n```\r\nI thought of polymorphism, but with large number of categories, it&#39;s difficult to have a common interface/parent class.\r\nHow to make it generic as a reusable library or a utility method?","title":"Scalability : Convert large list of objects into pojo and make api call","body":"<p>Let's say I have a json data of multiple vendors in a large number of categories. I need to make post api calls for top 10 vendors of these hundreds of categories.\nHow can I do that in a scalable manner?</p>\n<p>Each category's post api call has a specific request body. How to map the specific json to each api call's expected request body?</p>\n<p>I was thinking something like :</p>\n<pre><code>json.stream\n    .parallel()\n    .map((x) -&gt; {\n        reqBody = jackson mapper for the request body;\n        return reqBody;\n    })\n    .forEach((body)-&gt; make post call);\n</code></pre>\n<p>I thought of polymorphism, but with large number of categories, it's difficult to have a common interface/parent class.\nHow to make it generic as a reusable library or a utility method?</p>\n"},{"tags":["java","web-services","spring-mvc","spring-boot"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":1,"creation_date":1482449757,"post_id":41293106,"comment_id":69789118,"body_markdown":"Unrelated, but *why* are you using `DataOutputStream`?","body":"Unrelated, but <i>why</i> are you using <code>DataOutputStream</code>?"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":2,"creation_date":1482449760,"post_id":41293106,"comment_id":69789119,"body_markdown":"Where are you seeing &quot;Say+Hi=&quot;? Can you provide a [MCVE](http://stackoverflow.com/help/mcve)?","body":"Where are you seeing &quot;Say+Hi=&quot;? Can you provide a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>?"},{"owner":{"account_id":1142124,"reputation":119,"user_id":1125706,"display_name":"Monsif Mabrouk"},"score":0,"creation_date":1482450105,"post_id":41293106,"comment_id":69789211,"body_markdown":"i am logging the received messages from client in a spingBoot application&#39;s log file. after step by step debug issue is from  wr.writeBytes(message);","body":"i am logging the received messages from client in a spingBoot application&#39;s log file. after step by step debug issue is from  wr.writeBytes(message);"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1482450209,"post_id":41293106,"comment_id":69789242,"body_markdown":"`DataOutputStream.writeBytes()` definitely does not do this, as you could have easily established for yourself by writing to something else with it, or reading the Javadoc. The problem could be with `HttpURLConnection`, although unlikely, but most likely it is at the receiving end. You need to debug further.","body":"<code>DataOutputStream.writeBytes()</code> definitely does not do this, as you could have easily established for yourself by writing to something else with it, or reading the Javadoc. The problem could be with <code>HttpURLConnection</code>, although unlikely, but most likely it is at the receiving end. You need to debug further."},{"owner":{"account_id":1142124,"reputation":119,"user_id":1125706,"display_name":"Monsif Mabrouk"},"score":0,"creation_date":1482450579,"post_id":41293106,"comment_id":69789346,"body_markdown":"Here is the the receiving end, all what is does is logging :\n\n`code`@RequestMapping(value = &quot;/subscribe&quot;, method = RequestMethod.POST)\n    public @ResponseBody String createNewUser(@RequestBody String message) {\n        log.info(message);}","body":"Here is the the receiving end, all what is does is logging :  <code>code</code>@RequestMapping(value = &quot;/subscribe&quot;, method = RequestMethod.POST)     public @ResponseBody String createNewUser(@RequestBody String message) {         log.info(message);}"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1482455539,"post_id":41293106,"comment_id":69790576,"body_markdown":"`HttpURLConnection` doesn&#39;t do it either. I checked. You could and should have done that yourself before posting.","body":"<code>HttpURLConnection</code> doesn&#39;t do it either. I checked. You could and should have done that yourself before posting."}],"answers":[{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1482468970,"creation_date":1482451295,"answer_id":41293419,"question_id":41293106,"body_markdown":"When you don&#39;t set the `Content-Type` request header (using `setRequestProperty()`), it defaults to `application/x-www-form-urlencoded`.\r\n\r\nWhen a POST request has content type `application/x-www-form-urlencoded`, the `ServletRequest.getParameter` methods can be used to extract the parameters from the request body. This *consumes* the request body, so any subsequent call to `getInputStream()` or `getReader()` will return null.\r\n\r\nWhen your Spring handler method asks for the request body with the `@RequestBody` annotation, and the body has already been consumed, Spring will rebuild the body from the parameters, in order to supply the method parameter (it is basically faking it). When Spring rebuilds the request body from the parsed parameters, it will URL encode them as required by the `application/x-www-form-urlencoded` content type. This encoding converts spaces to `+`.\r\n\r\nThe original request body with `Say Hi` was parsed as parameter `&quot;Say Hi&quot;` with value `&quot;&quot;` (parameter without `=` has empty value). When that is rebuilt in compliance with `application/x-www-form-urlencoded`, the parameter is encoded as `Say+Hi=`, which is what you&#39;re seeing.\r\n\r\nThis only happens if one of the `ServletRequest.getParameter` methods has been called, so you likely have a `Filter` that does that. If that filter was removed, the request body wouldn&#39;t have been consumed, and the `@RequestBody` parameter would have received the original request body.\r\n\r\nAnother way to prevent the problem is to send the request body as a `text/plain` content type, since that seems to be how you want it anyway, i.e. the request body is not actually `x-www-form-urlencoded`:\r\n\r\n    con.setRequestProperty(&quot;Content-Type&quot;, &quot;text/plain; charset=ISO-8859-1&quot;);\r\n\r\nOf course, if the request body truly *is* `x-www-form-urlencoded` content, like your commented code would suggest, then there shouldn&#39;t *be* any spaces, and there was no problem to begin with.\r\n\r\n**To recap:** Your problem is that you&#39;re sending arbitrary text in the POST body, but you didn&#39;t set the content type, so it defaulted to `application/x-www-form-urlencoded`, and your content doesn&#39;t conform to the specifications of that content type, i.e. your request is malformed and behaved unpredictably.","title":"Java writeBytes white space replaced by &#39;+&#39;","body":"<p>When you don't set the <code>Content-Type</code> request header (using <code>setRequestProperty()</code>), it defaults to <code>application/x-www-form-urlencoded</code>.</p>\n\n<p>When a POST request has content type <code>application/x-www-form-urlencoded</code>, the <code>ServletRequest.getParameter</code> methods can be used to extract the parameters from the request body. This <em>consumes</em> the request body, so any subsequent call to <code>getInputStream()</code> or <code>getReader()</code> will return null.</p>\n\n<p>When your Spring handler method asks for the request body with the <code>@RequestBody</code> annotation, and the body has already been consumed, Spring will rebuild the body from the parameters, in order to supply the method parameter (it is basically faking it). When Spring rebuilds the request body from the parsed parameters, it will URL encode them as required by the <code>application/x-www-form-urlencoded</code> content type. This encoding converts spaces to <code>+</code>.</p>\n\n<p>The original request body with <code>Say Hi</code> was parsed as parameter <code>\"Say Hi\"</code> with value <code>\"\"</code> (parameter without <code>=</code> has empty value). When that is rebuilt in compliance with <code>application/x-www-form-urlencoded</code>, the parameter is encoded as <code>Say+Hi=</code>, which is what you're seeing.</p>\n\n<p>This only happens if one of the <code>ServletRequest.getParameter</code> methods has been called, so you likely have a <code>Filter</code> that does that. If that filter was removed, the request body wouldn't have been consumed, and the <code>@RequestBody</code> parameter would have received the original request body.</p>\n\n<p>Another way to prevent the problem is to send the request body as a <code>text/plain</code> content type, since that seems to be how you want it anyway, i.e. the request body is not actually <code>x-www-form-urlencoded</code>:</p>\n\n<pre><code>con.setRequestProperty(\"Content-Type\", \"text/plain; charset=ISO-8859-1\");\n</code></pre>\n\n<p>Of course, if the request body truly <em>is</em> <code>x-www-form-urlencoded</code> content, like your commented code would suggest, then there shouldn't <em>be</em> any spaces, and there was no problem to begin with.</p>\n\n<p><strong>To recap:</strong> Your problem is that you're sending arbitrary text in the POST body, but you didn't set the content type, so it defaulted to <code>application/x-www-form-urlencoded</code>, and your content doesn't conform to the specifications of that content type, i.e. your request is malformed and behaved unpredictably.</p>\n"},{"tags":[],"owner":{"account_id":13922050,"reputation":1,"user_id":10052214,"display_name":"Ekin Ilman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679926246,"creation_date":1679926189,"answer_id":75856765,"question_id":41293106,"body_markdown":"I am facing with the same situation. I have this little code block in backend and I am trying to send a string like &#39;Ekin Frontend&#39; and it converts is &#39;Ekin+Frontend=&#39; at the backend.\r\n\r\nHere is my code block;\r\n\r\n    @PostMapping(&quot;/error&quot;)\r\n    public boolean addError( @RequestBody String errorMsg) {\r\n        ...\r\n    }","title":"Java writeBytes white space replaced by &#39;+&#39;","body":"<p>I am facing with the same situation. I have this little code block in backend and I am trying to send a string like 'Ekin Frontend' and it converts is 'Ekin+Frontend=' at the backend.</p>\n<p>Here is my code block;</p>\n<pre><code>@PostMapping(&quot;/error&quot;)\npublic boolean addError( @RequestBody String errorMsg) {\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":1142124,"reputation":119,"user_id":1125706,"display_name":"Monsif Mabrouk"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":988,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":41293419,"answer_count":2,"score":0,"last_activity_date":1679926246,"creation_date":1482449055,"question_id":41293106,"body_markdown":"when trying to do a post request using HttpURLConnection, white spaces in the message got replaced by &#39;+&#39; and &#39;=&#39; is added at the end of the String.\r\nI am using JDK 1.8.0_91, here is my code :\r\n\r\n \r\n\r\n    public void sendPost(String message) throws Exception {\r\n    String url = &quot;http://localhost:8081/subscribe&quot;;\r\n    \r\n            URL obj = new URL(url);\r\n            HttpURLConnection con = (HttpURLConnection) obj.openConnection();\r\n    \r\n            //add reuqest header\r\n            con.setRequestMethod(&quot;POST&quot;);\r\n            /*String urlParameters = &quot;sn=C02G8416DRJM&amp;cn=&amp;locale=&amp;caller=&amp;num=12345&quot;;*/\r\n    \r\n            // Send post request\r\n            con.setDoOutput(true);\r\n            DataOutputStream wr = new DataOutputStream(con.getOutputStream());\r\n            wr.writeBytes(message);\r\n            wr.flush();\r\n            wr.close();\r\n    }\r\n\r\nsendPost(&quot;Say Hi&quot;) would give on server side : Say+Hi=\r\n","title":"Java writeBytes white space replaced by &#39;+&#39;","body":"<p>when trying to do a post request using HttpURLConnection, white spaces in the message got replaced by '+' and '=' is added at the end of the String.\nI am using JDK 1.8.0_91, here is my code :</p>\n\n<pre><code>public void sendPost(String message) throws Exception {\nString url = \"http://localhost:8081/subscribe\";\n\n        URL obj = new URL(url);\n        HttpURLConnection con = (HttpURLConnection) obj.openConnection();\n\n        //add reuqest header\n        con.setRequestMethod(\"POST\");\n        /*String urlParameters = \"sn=C02G8416DRJM&amp;cn=&amp;locale=&amp;caller=&amp;num=12345\";*/\n\n        // Send post request\n        con.setDoOutput(true);\n        DataOutputStream wr = new DataOutputStream(con.getOutputStream());\n        wr.writeBytes(message);\n        wr.flush();\n        wr.close();\n}\n</code></pre>\n\n<p>sendPost(\"Say Hi\") would give on server side : Say+Hi=</p>\n"},{"tags":["java","kotlin","visual-studio-code","apache-poi","build.gradle"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":4,"creation_date":1679924877,"post_id":75856463,"comment_id":133803293,"body_markdown":"Using Kotlin with any IDE besides IntelliJ or Android Studio is just masochism. You&#39;ll have a hard time finding anyone that can help with that, because so few people are inflicting that on themselves.","body":"Using Kotlin with any IDE besides IntelliJ or Android Studio is just masochism. You&#39;ll have a hard time finding anyone that can help with that, because so few people are inflicting that on themselves."},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1679925747,"post_id":75856463,"comment_id":133803540,"body_markdown":"Usually, source files go in a `src\\main\\kotlin` or `src\\main\\java` directory, which are the defaults expected by the Kotlin Gradle plugin. If you haven&#39;t configured in your Gradle files to point at the top level directory, you should move your code into one of those directories. But, I&#39;m not sure how this plays out in VS... If you&#39;re determined to use VS, expect to spend many hours debugging build issues like this instead of getting to write your actual code.","body":"Usually, source files go in a <code>src\\main\\kotlin</code> or <code>src\\main\\java</code> directory, which are the defaults expected by the Kotlin Gradle plugin. If you haven&#39;t configured in your Gradle files to point at the top level directory, you should move your code into one of those directories. But, I&#39;m not sure how this plays out in VS... If you&#39;re determined to use VS, expect to spend many hours debugging build issues like this instead of getting to write your actual code."},{"owner":{"account_id":26582014,"reputation":11,"user_id":20206528,"display_name":"GbreH"},"score":0,"creation_date":1679929530,"post_id":75856463,"comment_id":133804800,"body_markdown":"Thanks. So, I downloaded and installed IntelliJ IDEA. I added the following lines to my build.gradle.kts file: implementation &quot;org.apache.poi:poi-ooxml:5.2.0&quot; and implementation &quot;org.apache.poi:poi:5.2.0&quot;. However, I don&#39;t understand where I should add the poi-5.2.0.jar and poi-ooxml-5.2.0.jar files.","body":"Thanks. So, I downloaded and installed IntelliJ IDEA. I added the following lines to my build.gradle.kts file: implementation &quot;org.apache.poi:poi-ooxml:5.2.0&quot; and implementation &quot;org.apache.poi:poi:5.2.0&quot;. However, I don&#39;t understand where I should add the poi-5.2.0.jar and poi-ooxml-5.2.0.jar files."},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":1,"creation_date":1679929969,"post_id":75856463,"comment_id":133804944,"body_markdown":"You don’t need to add any jar files. Gradle uses Maven to download and include them in your compile path.","body":"You don’t need to add any jar files. Gradle uses Maven to download and include them in your compile path."},{"owner":{"account_id":26582014,"reputation":11,"user_id":20206528,"display_name":"GbreH"},"score":0,"creation_date":1679931254,"post_id":75856463,"comment_id":133805327,"body_markdown":"Cool - everything worked. How do I add a library from GitHub to the project (for example, https://github.com/VorTECHsa/refinery)?","body":"Cool - everything worked. How do I add a library from GitHub to the project (for example, <a href=\"https://github.com/VorTECHsa/refinery\" rel=\"nofollow noreferrer\">github.com/VorTECHsa/refinery</a>)?"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1679935095,"post_id":75856463,"comment_id":133806406,"body_markdown":"You need the Maven group ID, artifact ID, and version. String these together with colons after the word `implementation`, like in your code block above in your `dependencies` section of your `build.gradle` file. In the case of the project you linked, I see it listed under the Packages link. In this case, you need to add to the dependencies block `implementation &quot;com.vortexa.refinery:refinery:master.161&quot;` and then click the button to resync Gradle.","body":"You need the Maven group ID, artifact ID, and version. String these together with colons after the word <code>implementation</code>, like in your code block above in your <code>dependencies</code> section of your <code>build.gradle</code> file. In the case of the project you linked, I see it listed under the Packages link. In this case, you need to add to the dependencies block <code>implementation &quot;com.vortexa.refinery:refinery:master.161&quot;</code> and then click the button to resync Gradle."},{"owner":{"account_id":26582014,"reputation":11,"user_id":20206528,"display_name":"GbreH"},"score":0,"creation_date":1679935882,"post_id":75856463,"comment_id":133806609,"body_markdown":"I get an error: `untitled:main: Could not find com.vortexa.refinery:refinery:master.161`. Maybe I can clone the repository and connect it somehow?","body":"I get an error: <code>untitled:main: Could not find com.vortexa.refinery:refinery:master.161</code>. Maybe I can clone the repository and connect it somehow?"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1679936127,"post_id":75856463,"comment_id":133806686,"body_markdown":"Can you post your whole `build.gradle` file? Maybe start a new question about not being able to find the dependency since this is straying away from the question above. There are different ways to set up gradle, your project may differ depending on which wizard or tutorial you followed to create the new project. If there&#39;s a `settings.gradle` file, include that in your question, too.","body":"Can you post your whole <code>build.gradle</code> file? Maybe start a new question about not being able to find the dependency since this is straying away from the question above. There are different ways to set up gradle, your project may differ depending on which wizard or tutorial you followed to create the new project. If there&#39;s a <code>settings.gradle</code> file, include that in your question, too."},{"owner":{"account_id":26582014,"reputation":11,"user_id":20206528,"display_name":"GbreH"},"score":0,"creation_date":1679936869,"post_id":75856463,"comment_id":133806888,"body_markdown":"Ok. Thanks for the help with the necessary IDE. I am creating a new question.","body":"Ok. Thanks for the help with the necessary IDE. I am creating a new question."},{"owner":{"account_id":26582014,"reputation":11,"user_id":20206528,"display_name":"GbreH"},"score":0,"creation_date":1679938936,"post_id":75856463,"comment_id":133807443,"body_markdown":"https://stackoverflow.com/questions/75858676/how-to-configure-gradle-to-connect-to-the-repository-with-the-source-code-of-the","body":"<a href=\"https://stackoverflow.com/questions/75858676/how-to-configure-gradle-to-connect-to-the-repository-with-the-source-code-of-the\" title=\"how to configure gradle to connect to the repository with the source code of the\">stackoverflow.com/questions/75858676/&hellip;</a>"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1679990341,"post_id":75856463,"comment_id":133815466,"body_markdown":"try `gradle clean` clean project then rebuild `gradle build`.","body":"try <code>gradle clean</code> clean project then rebuild <code>gradle build</code>."}],"owner":{"account_id":26582014,"reputation":11,"user_id":20206528,"display_name":"GbreH"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":589,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679925622,"creation_date":1679924373,"question_id":75856463,"body_markdown":"I have added the following dependencies to my build.gradle file:\r\n```\r\ndependencies {\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8&quot;\r\n    implementation &quot;org.apache.poi:poi:5.2.0&quot;\r\n    implementation &quot;org.apache.poi:poi-ooxml:5.2.0&quot;\r\n}\r\n```\r\nThe output of the gradle --version command shows that I am using Gradle version 7.6.1. Additionally, the Kotlin version being used is 1.7.10 and the Groovy version is 3.0.13. The Apache Ant version being used is 1.10.11 and the JVM being used is version 17.0.6\r\nI receive a &quot;BUILD SUCCESSFUL&quot; message after running the command gradle build –stacktrace.\r\n\r\nThe structure of my project is this:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/jP9ao.png)](https://i.stack.imgur.com/jP9ao.png)\r\n\r\nAnd have code:\r\n```\r\nimport org.apache.poi.ss.usermodel.*\r\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook\r\n\r\nimport java.io.FileOutputStream\r\n\r\nfun main(args: Array&lt;String&gt;) {\r\n    val workbook = XSSFWorkbook()\r\n    val sheet = workbook.createSheet(&quot;Sheet1&quot;)\r\n    val row = sheet.createRow(0)\r\n    val cell = row.createCell(0)\r\n    cell.setCellValue(&quot;Hello, World!&quot;)\r\n\r\n    val outputStream = FileOutputStream(&quot;example.xlsx&quot;)\r\n    workbook.write(outputStream)\r\n    workbook.close()\r\n}\r\n```\r\nAfter running I a get errors: \r\n\r\nhello.kt:1:12: error: unresolved reference: apache\r\nimport org.apache.poi.ss.usermodel.*\r\n           ^\r\nhello.kt:2:12: error: unresolved reference: apache\r\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook\r\n           ^\r\nhello.kt:7:20: error: unresolved reference: XSSFWorkbook\r\n    val workbook = XSSFWorkbook()\r\n                   ^\r\nI expect to make an excel file with the cell &quot;&quot;Hello, World!&quot;&quot;\r\n\r\nP.S. I work in VSCode and would not like to try anything else\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jP9ao.png","title":"What is the correct way to import and use Apache POI in a Kotlin project?","body":"<p>I have added the following dependencies to my build.gradle file:</p>\n<pre><code>dependencies {\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8&quot;\n    implementation &quot;org.apache.poi:poi:5.2.0&quot;\n    implementation &quot;org.apache.poi:poi-ooxml:5.2.0&quot;\n}\n</code></pre>\n<p>The output of the gradle --version command shows that I am using Gradle version 7.6.1. Additionally, the Kotlin version being used is 1.7.10 and the Groovy version is 3.0.13. The Apache Ant version being used is 1.10.11 and the JVM being used is version 17.0.6\nI receive a &quot;BUILD SUCCESSFUL&quot; message after running the command gradle build –stacktrace.</p>\n<p>The structure of my project is this:</p>\n<p><a href=\"https://i.stack.imgur.com/jP9ao.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jP9ao.png\" alt=\"enter image description here\" /></a></p>\n<p>And have code:</p>\n<pre><code>import org.apache.poi.ss.usermodel.*\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook\n\nimport java.io.FileOutputStream\n\nfun main(args: Array&lt;String&gt;) {\n    val workbook = XSSFWorkbook()\n    val sheet = workbook.createSheet(&quot;Sheet1&quot;)\n    val row = sheet.createRow(0)\n    val cell = row.createCell(0)\n    cell.setCellValue(&quot;Hello, World!&quot;)\n\n    val outputStream = FileOutputStream(&quot;example.xlsx&quot;)\n    workbook.write(outputStream)\n    workbook.close()\n}\n</code></pre>\n<p>After running I a get errors:</p>\n<p>hello.kt:1:12: error: unresolved reference: apache\nimport org.apache.poi.ss.usermodel.*\n^\nhello.kt:2:12: error: unresolved reference: apache\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook\n^\nhello.kt:7:20: error: unresolved reference: XSSFWorkbook\nval workbook = XSSFWorkbook()\n^\nI expect to make an excel file with the cell &quot;&quot;Hello, World!&quot;&quot;</p>\n<p>P.S. I work in VSCode and would not like to try anything else</p>\n"},{"tags":["java","spring","serialization","jackson","java-time"],"comments":[{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":1,"creation_date":1679926963,"post_id":75855289,"comment_id":133803944,"body_markdown":"What exactly is &quot;long&quot; format?\nDoes something like `{createdAt=2023-03-27T22:19:31.920571}` works for you?","body":"What exactly is &quot;long&quot; format? Does something like <code>{createdAt=2023-03-27T22:19:31.920571}</code> works for you?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1679932525,"post_id":75855289,"comment_id":133805716,"body_markdown":"`LocalDateTime` is the wrong class to use for tracking “when created”. That class cannot represent a moment, a specific point on the timeline, as it lacks the context of a time zone or offset from UTC. You should be using `Instant` class, `Instant.now()`.","body":"<code>LocalDateTime</code> is the wrong class to use for tracking “when created”. That class cannot represent a moment, a specific point on the timeline, as it lacks the context of a time zone or offset from UTC. You should be using <code>Instant</code> class, <code>Instant.now()</code>."},{"owner":{"account_id":3210091,"reputation":5835,"user_id":2710256,"accept_rate":46,"display_name":"breakline"},"score":0,"creation_date":1679937767,"post_id":75855289,"comment_id":133807124,"body_markdown":"We use UTC everywhere, its not a problem.","body":"We use UTC everywhere, its not a problem."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1679961630,"post_id":75855289,"comment_id":133811612,"body_markdown":"When you use UTC, the correct classes to use are `Instant` and `OffsetDateTime` with an offset of zero. The exact choice depends, so I leave it to you.","body":"When you use UTC, the correct classes to use are <code>Instant</code> and <code>OffsetDateTime</code> with an offset of zero. The exact choice depends, so I leave it to you."}],"answers":[{"tags":[],"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1679919715,"creation_date":1679918333,"answer_id":75855489,"question_id":75855289,"body_markdown":"The question is what really goes into setCreatedAt......    Noticed also, some things use toEpochMilli() \r\n\r\n    long andthen = (LocalDateTime.now()).toInstant().getEpochSecond();\r\n    item.setCreatedAt(andthen);\r\n\r\n","title":"JavaTimeModule serialization force LocalDateTime to convert to Long/timestamp?","body":"<p>The question is what really goes into setCreatedAt......    Noticed also, some things use toEpochMilli()</p>\n<pre><code>long andthen = (LocalDateTime.now()).toInstant().getEpochSecond();\nitem.setCreatedAt(andthen);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679925226,"creation_date":1679925226,"answer_id":75856614,"question_id":75855289,"body_markdown":"&gt; Preferably something without annotating the class which is in another package.\r\n\r\nYou can use mix-ins for that. For instance:\r\n\r\n```\r\npublic interface MyItemMinIn {\r\n    @JsonSerialize(using = MyCustomSerializer.class)\r\n    LocalDateTime getCreatedAt();\r\n}\r\n```\r\n```\r\nobjectMapper.addMixIn(MyItem.class, MyItemMixIn.class);\r\n```\r\nThe `ObjectMapper` will now merge the mix-in interface with your own class for its mapping configuration.","title":"JavaTimeModule serialization force LocalDateTime to convert to Long/timestamp?","body":"<blockquote>\n<p>Preferably something without annotating the class which is in another package.</p>\n</blockquote>\n<p>You can use mix-ins for that. For instance:</p>\n<pre><code>public interface MyItemMinIn {\n    @JsonSerialize(using = MyCustomSerializer.class)\n    LocalDateTime getCreatedAt();\n}\n</code></pre>\n<pre><code>objectMapper.addMixIn(MyItem.class, MyItemMixIn.class);\n</code></pre>\n<p>The <code>ObjectMapper</code> will now merge the mix-in interface with your own class for its mapping configuration.</p>\n"}],"owner":{"account_id":3210091,"reputation":5835,"user_id":2710256,"accept_rate":46,"display_name":"breakline"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1679925226,"creation_date":1679917092,"question_id":75855289,"body_markdown":"I have this code:\r\n\r\n    MyItem item = new MyItem();\r\n    item.setCreatedAt(LocalDateTime.now());\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    objectMapper.registerModule(new JavaTimeModule());\r\n    Map&lt;String, Object&gt; fieldsToSetOnInsert = objectMapper.convertValue(item, Map.class);\r\n\r\nProblem is this converts the &quot;createdAt&quot; field into an array, but I need it to be a timestamp (i.e. long) format. Is there a way to force this? \r\n\r\nI tried using this, but did not work:\r\n\r\n    objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, true);\r\n\r\nPreferably something without annotating the class which is in another package. Thanks","title":"JavaTimeModule serialization force LocalDateTime to convert to Long/timestamp?","body":"<p>I have this code:</p>\n<pre><code>MyItem item = new MyItem();\nitem.setCreatedAt(LocalDateTime.now());\nObjectMapper objectMapper = new ObjectMapper();\nobjectMapper.registerModule(new JavaTimeModule());\nMap&lt;String, Object&gt; fieldsToSetOnInsert = objectMapper.convertValue(item, Map.class);\n</code></pre>\n<p>Problem is this converts the &quot;createdAt&quot; field into an array, but I need it to be a timestamp (i.e. long) format. Is there a way to force this?</p>\n<p>I tried using this, but did not work:</p>\n<pre><code>objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, true);\n</code></pre>\n<p>Preferably something without annotating the class which is in another package. Thanks</p>\n"},{"tags":["java","amazon-s3","aws-sdk"],"comments":[{"owner":{"account_id":303420,"reputation":10129,"user_id":2378643,"display_name":"Anon Coward"},"score":1,"creation_date":1679855641,"post_id":75849607,"comment_id":133791581,"body_markdown":"The [underlying S3 APIs](https://docs.aws.amazon.com/AmazonS3/latest/API/API_Operations_Amazon_Simple_Storage_Service.html) have no concept of a transaction or a way to upload multiple objects at once.  It&#39;s an oft requested feature for the SDKs to add one, but anything they add would look much like your code, and operate as a convivence just uploading multiple objects separately as a.","body":"The <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/API/API_Operations_Amazon_Simple_Storage_Service.html\" rel=\"nofollow noreferrer\">underlying S3 APIs</a> have no concept of a transaction or a way to upload multiple objects at once.  It&#39;s an oft requested feature for the SDKs to add one, but anything they add would look much like your code, and operate as a convivence just uploading multiple objects separately as a."}],"answers":[{"tags":[],"owner":{"account_id":26281505,"reputation":427,"user_id":19949926,"display_name":"rlhagerm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679925180,"creation_date":1679925180,"answer_id":75856607,"question_id":75849607,"body_markdown":"Are you able to use the S3 Transfer Manager? It has some methods for working with multiple files, such as [UploadDirectory][1].  There is an example of working with it in the [Example Code Library here][2].\r\n\r\n    public Integer uploadDirectory(S3TransferManager transferManager,\r\n                                       String sourceDirectory, String bucketName){\r\n            DirectoryUpload directoryUpload =\r\n                transferManager.uploadDirectory(UploadDirectoryRequest.builder()\r\n                    .source(Paths.get(sourceDirectory))\r\n                    .bucket(bucketName)\r\n                    .build());\r\n\r\n\r\n\r\n  [1]: https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/transfer/s3/S3TransferManager.html\r\n  [2]: https://docs.aws.amazon.com/code-library/latest/ug/s3_example_s3_UploadDirectoryToBucket_section.html","title":"How to upload multiple files to AWS S3 in Java using aws-java-sdk version 2?","body":"<p>Are you able to use the S3 Transfer Manager? It has some methods for working with multiple files, such as <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/transfer/s3/S3TransferManager.html\" rel=\"nofollow noreferrer\">UploadDirectory</a>.  There is an example of working with it in the <a href=\"https://docs.aws.amazon.com/code-library/latest/ug/s3_example_s3_UploadDirectoryToBucket_section.html\" rel=\"nofollow noreferrer\">Example Code Library here</a>.</p>\n<pre><code>public Integer uploadDirectory(S3TransferManager transferManager,\n                                   String sourceDirectory, String bucketName){\n        DirectoryUpload directoryUpload =\n            transferManager.uploadDirectory(UploadDirectoryRequest.builder()\n                .source(Paths.get(sourceDirectory))\n                .bucket(bucketName)\n                .build());\n</code></pre>\n"}],"owner":{"account_id":21012673,"reputation":79,"user_id":15440928,"display_name":"Mykyta Manuilenko"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":712,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679925180,"creation_date":1679853868,"question_id":75849607,"body_markdown":"How to upload multiple files to AWS S3 using `aws-java-sdk` version 2? \r\n\r\nI can use a for-each loop and `s3Client.putObject(requestConfig, requestBody);`, but is it possible to achieve this without using a loop, I mean just call one method and pass a list of files there (something like `s3Client.putObjects(/* some args */);`)? \r\n\r\nAnd another question, if it is possible to upload multiple files to AWS S3 without using a loop, can it be done in a transactional way so that all files or none of them are uploaded?\r\n\r\nThis is how I&#39;m doing it right now, but is this the right approach?\r\n\r\n```Java\r\n    public void upload(String key, String mimetype, byte[] content) {\r\n        var bucket = this.configurationManager.getAwsConfig().getBucketName();\r\n\r\n        var requestConfig = this.preparePutObjectRequest(key, mimetype, bucket);\r\n        var requestBody = RequestBody.fromBytes(content);\r\n\r\n        this.s3Client.putObject(requestConfig, requestBody);\r\n    }\r\n\r\n    public void batchUpload(List&lt;UploadFileBO&gt; files) {\r\n        for (UploadFileBO file : files) {\r\n                this.upload(file.getKey(), file.getMimetype(), file.getContent());\r\n            }\r\n        }\r\n    }\r\n\r\n    private PutObjectRequest preparePutObjectRequest(String key, String mimetype, String bucket) {\r\n        return PutObjectRequest.builder()\r\n                .bucket(bucket)\r\n                .key(key)\r\n                .contentType(mimetype)\r\n                .build();\r\n    }\r\n```\r\n","title":"How to upload multiple files to AWS S3 in Java using aws-java-sdk version 2?","body":"<p>How to upload multiple files to AWS S3 using <code>aws-java-sdk</code> version 2?</p>\n<p>I can use a for-each loop and <code>s3Client.putObject(requestConfig, requestBody);</code>, but is it possible to achieve this without using a loop, I mean just call one method and pass a list of files there (something like <code>s3Client.putObjects(/* some args */);</code>)?</p>\n<p>And another question, if it is possible to upload multiple files to AWS S3 without using a loop, can it be done in a transactional way so that all files or none of them are uploaded?</p>\n<p>This is how I'm doing it right now, but is this the right approach?</p>\n<pre><code>    public void upload(String key, String mimetype, byte[] content) {\n        var bucket = this.configurationManager.getAwsConfig().getBucketName();\n\n        var requestConfig = this.preparePutObjectRequest(key, mimetype, bucket);\n        var requestBody = RequestBody.fromBytes(content);\n\n        this.s3Client.putObject(requestConfig, requestBody);\n    }\n\n    public void batchUpload(List&lt;UploadFileBO&gt; files) {\n        for (UploadFileBO file : files) {\n                this.upload(file.getKey(), file.getMimetype(), file.getContent());\n            }\n        }\n    }\n\n    private PutObjectRequest preparePutObjectRequest(String key, String mimetype, String bucket) {\n        return PutObjectRequest.builder()\n                .bucket(bucket)\n                .key(key)\n                .contentType(mimetype)\n                .build();\n    }\n</code></pre>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"owner":{"account_id":16643925,"reputation":133,"user_id":12028677,"display_name":"Kampaii"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679924818,"creation_date":1679924818,"question_id":75856542,"body_markdown":"I&#39;m struggling with suppress of events. I want to publish only latest record taken by window to fin topic.\r\n\r\n```java\r\nstream.groupByKey()\r\n            .windowedBy(TimeWindows.ofSizeWithNoGrace(Duration.ofSeconds(2)))\r\n            .reduce((party, newValue) -&gt; newValue)\r\n            .suppress(Suppressed.untilTimeLimit(Duration.ofSeconds(2), Suppressed.BufferConfig.unbounded()))\r\n            .to(finTopicName);\r\n```\r\n\r\nI pass sth like this(in tests, using TopologyTestDriver)\r\n\r\n    {1, {name: test}} // timeout 0s\r\n    {1, {name: test}} // timeout 0s\r\n    {1, {name: test}} // timeout 10s\r\n    {1, {name: test2}} // timeout 25s\r\n\r\nI expect that i would see test, test, test2 names as they should occur in separate windows but get only test, test, test. \r\n\r\nPlease explain why i don&#39;t get test2 as an output.\r\nAlso it would be great to understand of how to take latest event of the window, not the first","title":"Kafka streams suppress - take latest of window","body":"<p>I'm struggling with suppress of events. I want to publish only latest record taken by window to fin topic.</p>\n<pre class=\"lang-java prettyprint-override\"><code>stream.groupByKey()\n            .windowedBy(TimeWindows.ofSizeWithNoGrace(Duration.ofSeconds(2)))\n            .reduce((party, newValue) -&gt; newValue)\n            .suppress(Suppressed.untilTimeLimit(Duration.ofSeconds(2), Suppressed.BufferConfig.unbounded()))\n            .to(finTopicName);\n</code></pre>\n<p>I pass sth like this(in tests, using TopologyTestDriver)</p>\n<pre><code>{1, {name: test}} // timeout 0s\n{1, {name: test}} // timeout 0s\n{1, {name: test}} // timeout 10s\n{1, {name: test2}} // timeout 25s\n</code></pre>\n<p>I expect that i would see test, test, test2 names as they should occur in separate windows but get only test, test, test.</p>\n<p>Please explain why i don't get test2 as an output.\nAlso it would be great to understand of how to take latest event of the window, not the first</p>\n"},{"tags":["java","arrays","multithreading","threadpool"],"answers":[{"tags":[],"owner":{"account_id":27893346,"reputation":94,"user_id":21299216,"display_name":"Idk"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1679837733,"creation_date":1679837733,"answer_id":75848085,"question_id":75848070,"body_markdown":"```\r\nclass Solution {\r\n    \r\n    public int[] productExceptSelf(int[] nums) {\r\n        int[] answer = new int[nums.length];\r\n        Thread[] threads = new Thread[nums.length];    \r\n        ThreadGroup threadgrp = new ThreadGroup(&quot;&quot;);\r\n\r\n        IntStream.range(0, nums.length).forEach(i -&gt; {\r\n            threads[i] = new Thread(new Threaded(nums, answer, i), &quot;Thread &quot; + i);\r\n            threads[i].start();\r\n        });\r\n        \r\n        while(threadgrp.activeCount() &gt; 0){\r\n        \r\n        }\r\n        \r\n        return answer;\r\n    }\r\n}\r\n    \r\n \r\nclass Threaded implements Runnable {\r\n    \r\n    private int[] nums;\r\n    private int[] answer;\r\n    private int i;\r\n    \r\n    Threaded(int[] nums, int[] answer, int i) {\r\n        this.nums = nums;\r\n        this.answer = answer;\r\n        this.i = i;\r\n    }\r\n    \r\n    public void run() {\r\n        answer[i] = getProduct(nums, i);\r\n    }\r\n    \r\n    private int getProduct(int[] nums, int i) {\r\n        int x = 1;  \r\n        for (int j = 0; j &lt; nums.length; j++) {    \r\n            if (i != j) x = x * nums[j];      \r\n        }        \r\n        return x;\r\n    }\r\n}\r\n```\r\nTry this senpai","title":"Thread class not updating a shared array which belongs to calling class","body":"<pre><code>class Solution {\n    \n    public int[] productExceptSelf(int[] nums) {\n        int[] answer = new int[nums.length];\n        Thread[] threads = new Thread[nums.length];    \n        ThreadGroup threadgrp = new ThreadGroup(&quot;&quot;);\n\n        IntStream.range(0, nums.length).forEach(i -&gt; {\n            threads[i] = new Thread(new Threaded(nums, answer, i), &quot;Thread &quot; + i);\n            threads[i].start();\n        });\n        \n        while(threadgrp.activeCount() &gt; 0){\n        \n        }\n        \n        return answer;\n    }\n}\n    \n \nclass Threaded implements Runnable {\n    \n    private int[] nums;\n    private int[] answer;\n    private int i;\n    \n    Threaded(int[] nums, int[] answer, int i) {\n        this.nums = nums;\n        this.answer = answer;\n        this.i = i;\n    }\n    \n    public void run() {\n        answer[i] = getProduct(nums, i);\n    }\n    \n    private int getProduct(int[] nums, int i) {\n        int x = 1;  \n        for (int j = 0; j &lt; nums.length; j++) {    \n            if (i != j) x = x * nums[j];      \n        }        \n        return x;\n    }\n}\n</code></pre>\n<p>Try this senpai</p>\n"}],"owner":{"account_id":18912023,"reputation":31,"user_id":13797899,"display_name":"Ashish Vashisht"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75848085,"answer_count":1,"score":-1,"last_activity_date":1679924726,"creation_date":1679837566,"question_id":75848070,"body_markdown":"I tried to solve this problem on leetcode and was getting stuck at 19th test-case - Timeout so I tried to solve it with multi-threading.\r\n\r\nPlease find the code below:\r\n\r\n```java\r\nclass Solution {\r\n\r\n    public static int[] nums;\r\n    public static int[] answer;\r\n    public static Thread[] threads;\r\n\r\n    public int[] productExceptSelf(int[] nums) {\r\n\r\n        answer = new int[nums.length];\r\n        threads = new Thread[nums.length];    \r\n        ThreadGroup threadgrp = new ThreadGroup(&quot;&quot;);\r\n        \r\n        IntStream.range(0, nums.length).forEach(i -&gt; {\r\n        \r\n            threads[i] = new Threaded(threadgrp, i);\r\n            threads[i].start();\r\n        });\r\n        \r\n        while(threadgrp.activeCount() &gt; 0) {\r\n        }\r\n\r\n        return answer;\r\n\r\n    }\r\n}\r\n```    \r\n```java \r\nclass Threaded extends Thread {\r\n\r\n    int i;\r\n\r\n    Threaded(ThreadGroup obj, int i) {\r\n        this.i = i;\r\n    }\r\n\r\n    public void run() {\r\n        answer[i] = getProduct(nums, i);\r\n    }\r\n\r\n    public int getProduct(int[] nums, int i) {\r\n\r\n        int x = 1;\r\n\r\n        for(int j = 0; j &lt; nums.length; j++ ) {\r\n\r\n            if(i != j) x = x*nums[j];\r\n\r\n        }\r\n\r\n\r\n        return x;\r\n    }\r\n\r\n}\r\n```\r\nI wrote the code okay I think but it appears that output I&#39;m getting is 0,0,0,0 in the initial test case which is the just the value of answer[] array initialization.\r\nInput for test case is {1,2,3,4}\r\nSomehow, the threads are not able to update the answer[] array and get values from nums array. I even tried static. Earlier I was using a singleton instance of Solution.\r\n\r\nKindly assist.\r\n\r\nI tried without threading and it worked fine but wasn&#39;t fast enough. Then I created a subclass and also tried with inner class for thread. ","title":"Thread class not updating a shared array which belongs to calling class","body":"<p>I tried to solve this problem on leetcode and was getting stuck at 19th test-case - Timeout so I tried to solve it with multi-threading.</p>\n<p>Please find the code below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Solution {\n\n    public static int[] nums;\n    public static int[] answer;\n    public static Thread[] threads;\n\n    public int[] productExceptSelf(int[] nums) {\n\n        answer = new int[nums.length];\n        threads = new Thread[nums.length];    \n        ThreadGroup threadgrp = new ThreadGroup(&quot;&quot;);\n        \n        IntStream.range(0, nums.length).forEach(i -&gt; {\n        \n            threads[i] = new Threaded(threadgrp, i);\n            threads[i].start();\n        });\n        \n        while(threadgrp.activeCount() &gt; 0) {\n        }\n\n        return answer;\n\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class Threaded extends Thread {\n\n    int i;\n\n    Threaded(ThreadGroup obj, int i) {\n        this.i = i;\n    }\n\n    public void run() {\n        answer[i] = getProduct(nums, i);\n    }\n\n    public int getProduct(int[] nums, int i) {\n\n        int x = 1;\n\n        for(int j = 0; j &lt; nums.length; j++ ) {\n\n            if(i != j) x = x*nums[j];\n\n        }\n\n\n        return x;\n    }\n\n}\n</code></pre>\n<p>I wrote the code okay I think but it appears that output I'm getting is 0,0,0,0 in the initial test case which is the just the value of answer[] array initialization.\nInput for test case is {1,2,3,4}\nSomehow, the threads are not able to update the answer[] array and get values from nums array. I even tried static. Earlier I was using a singleton instance of Solution.</p>\n<p>Kindly assist.</p>\n<p>I tried without threading and it worked fine but wasn't fast enough. Then I created a subclass and also tried with inner class for thread.</p>\n"},{"tags":["java","spring","avro"],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679921467,"creation_date":1679921467,"answer_id":75855966,"question_id":75855876,"body_markdown":"You can iterate the map and put each key-value pair in a new map, while `toString()`-ing them.\r\n```\r\nMap&lt;CharSequence, CharSequence&gt; map = ...;\r\nMap&lt;String, String&gt; resultMap = new HashMap&lt;&gt;();\r\nfor (Map.Entry&lt;CharSequence, CharSequence&gt; entry : map.entrySet()) {\r\n  resultMap.put(entry.getKey().toString(), entry.getValue().toString());\r\n}\r\n```\r\nOr you can do the same using [Stream][1].\r\n```\r\nMap&lt;CharSequence, CharSequence&gt; map = ...;\r\nMap&lt;String, String&gt; resultMap = map.entrySet()\r\n      .stream()\r\n      .collect(Collectors.toMap(e -&gt; e.getKey().toString(), e -&gt; e.getValue().toString()));\r\n```\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html","title":"How to convert avro generated Map&lt;CharSequence, CharSequence&gt; to Map&lt;String, String&gt;","body":"<p>You can iterate the map and put each key-value pair in a new map, while <code>toString()</code>-ing them.</p>\n<pre><code>Map&lt;CharSequence, CharSequence&gt; map = ...;\nMap&lt;String, String&gt; resultMap = new HashMap&lt;&gt;();\nfor (Map.Entry&lt;CharSequence, CharSequence&gt; entry : map.entrySet()) {\n  resultMap.put(entry.getKey().toString(), entry.getValue().toString());\n}\n</code></pre>\n<p>Or you can do the same using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"nofollow noreferrer\">Stream</a>.</p>\n<pre><code>Map&lt;CharSequence, CharSequence&gt; map = ...;\nMap&lt;String, String&gt; resultMap = map.entrySet()\n      .stream()\n      .collect(Collectors.toMap(e -&gt; e.getKey().toString(), e -&gt; e.getValue().toString()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679923872,"creation_date":1679923872,"answer_id":75856376,"question_id":75855876,"body_markdown":"It is possible to cause the Avro schema generator to use `String` instead of `CharSequence` as the mapping for an Avro string; see https://stackoverflow.com/questions/25118727.\r\n\r\nApparently, you can also change the type that Avro uses to represent a string in Java on a per-type basis; see https://stackoverflow.com/questions/49974241 and https://stackoverflow.com/a/35727432/139985.  However, this can be [a source of problems][1].  So beware.\r\n\r\nIf neither of these approaches are going to work for you, then you will need to do a conversion as per @ChaosFire&#39;s [answer][2].\r\n\r\n\r\n  [1]: https://issues.apache.org/jira/browse/AVRO-2838\r\n  [2]: https://stackoverflow.com/q/75855876/139985","title":"How to convert avro generated Map&lt;CharSequence, CharSequence&gt; to Map&lt;String, String&gt;","body":"<p>It is possible to cause the Avro schema generator to use <code>String</code> instead of <code>CharSequence</code> as the mapping for an Avro string; see <a href=\"https://stackoverflow.com/questions/25118727\">How to generate fields of type String instead of CharSequence using Avro?</a>.</p>\n<p>Apparently, you can also change the type that Avro uses to represent a string in Java on a per-type basis; see <a href=\"https://stackoverflow.com/questions/49974241\">Avro Schema - what is &quot;avro.java.string&quot;: &quot;String&quot;</a> and <a href=\"https://stackoverflow.com/a/35727432/139985\">https://stackoverflow.com/a/35727432/139985</a>.  However, this can be <a href=\"https://issues.apache.org/jira/browse/AVRO-2838\" rel=\"nofollow noreferrer\">a source of problems</a>.  So beware.</p>\n<p>If neither of these approaches are going to work for you, then you will need to do a conversion as per @ChaosFire's <a href=\"https://stackoverflow.com/q/75855876/139985\">answer</a>.</p>\n"}],"owner":{"account_id":5449054,"reputation":1020,"user_id":4334502,"accept_rate":30,"display_name":"ever alian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1679923872,"creation_date":1679920885,"question_id":75855876,"body_markdown":"I have Avro generated Map that is with Map&lt;CharSequence, CharSequence&gt; type. But my existing method requires Map&lt;String, String&gt; parameter. How can I change Map&lt;CharSequence, CharSequence&gt; to Map&lt;String, String&gt; parameter?\r\n\r\n\r\n    public void someMethod(AvroType avroGenObj){\r\n      myMapMethod(avroGenObj.getInput()) // compile error as getInput returns Map&lt;CharSequence, CharSequence&gt;\r\n    }\r\n\r\n\r\n    private void myMapMethod(Map&lt;String, String&gt; map){\r\n\r\n    // to something\r\n\r\n    }\r\n\r\n","title":"How to convert avro generated Map&lt;CharSequence, CharSequence&gt; to Map&lt;String, String&gt;","body":"<p>I have Avro generated Map that is with Map&lt;CharSequence, CharSequence&gt; type. But my existing method requires Map&lt;String, String&gt; parameter. How can I change Map&lt;CharSequence, CharSequence&gt; to Map&lt;String, String&gt; parameter?</p>\n<pre><code>public void someMethod(AvroType avroGenObj){\n  myMapMethod(avroGenObj.getInput()) // compile error as getInput returns Map&lt;CharSequence, CharSequence&gt;\n}\n\n\nprivate void myMapMethod(Map&lt;String, String&gt; map){\n\n// to something\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-kafka","completable-future"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679923645,"creation_date":1679579785,"answer_id":75823956,"question_id":75823718,"body_markdown":"`completedFuture`\r\n\r\nYou are returning an already completed future, regardless of whether the callback has run yet; so the caller will always see a completed future.\r\n\r\nYou should return `future` from the execute method, then return `future.completable()` from the `asyncSend`.\r\n\r\nNote that, starting with version 3.0, the template returns a `CompletableFuture` instead of a `ListenableFuture`.\r\n\r\n__EDIT__\r\n\r\nI just tested it and it works as expected...\r\n\r\n```java\r\n@SpringBootApplication\r\n@EnableAsync\r\npublic class So75823718Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(So75823718Application.class, args);\r\n\t}\r\n\r\n\t@Bean\r\n\tNewTopic topic() {\r\n\t\treturn TopicBuilder.name(&quot;so75823718&quot;).partitions(1).replicas(1).build();\r\n\t}\r\n\r\n\t@Bean\r\n\tApplicationRunner runner(Foo foo) {\r\n\t\treturn args -&gt; {\r\n\t\t\tCompletableFuture&lt;SendResult&lt;String, String&gt;&gt; future = foo.asyncSend(&quot;foo&quot;);\r\n\t\t\tfuture.whenComplete((sr, ex) -&gt; System.out.println(future + &quot;: &quot; + sr.getRecordMetadata()));\r\n\t\t};\r\n\t}\r\n\r\n\t@Bean\r\n\tTaskExecutor exec() {\r\n\t\treturn new SimpleAsyncTaskExecutor();\r\n\t}\r\n\r\n}\r\n\r\n@Component\r\nclass Foo {\r\n\r\n\tRetryTemplate template = new RetryTemplate();\r\n\r\n\t@Autowired\r\n\tKafkaTemplate&lt;String, String&gt; kafkaTemplate;\r\n\r\n\t@Async(&quot;exec&quot;)\r\n\tpublic CompletableFuture&lt;SendResult&lt;String, String&gt;&gt; asyncSend(final String message) throws Exception {\r\n\r\n\t\treturn this.template.execute(ctx -&gt; {\r\n\t\t\tfinal ListenableFuture&lt;SendResult&lt;String, String&gt;&gt; future = kafkaTemplate.send(&quot;so75823718&quot;, &quot;foo&quot;);\r\n\r\n\t\t\treturn future;\r\n\t\t}).completable();\r\n\t}\r\n\r\n}\r\n```\r\n```\r\njava.util.concurrent.CompletableFuture@7ebce1f7[Completed normally]: so75823718-0@12\r\n```\r\n\r\n__EDIT2__\r\n\r\n...and to catch direct exceptions on the `send()`...\r\n\r\n```java\r\npublic CompletableFuture&lt;SendResult&lt;String, String&gt;&gt; asyncSend(final String message) throws Exception {\r\n\r\n\tCompletableFuture&lt;SendResult&lt;String, String&gt;&gt; future = new CompletableFuture&lt;&gt;();\r\n\ttry {\r\n\t\tCompletableFuture&lt;SendResult&lt;String, String&gt;&gt; fut = this.template.execute(ctx -&gt; {\r\n\t\t\treturn kafkaTemplate.send(&quot;so75823718&quot;, &quot;foo&quot;);\r\n\t\t}).completable();\r\n\t\tfut.whenComplete((sr, ex) -&gt; {\r\n\t\t\tif (ex != null) {\r\n\t\t\t\tfuture.completeExceptionally(ex);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tfuture.complete(sr);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tcatch (Exception ex) {\r\n\t\tfuture.completeExceptionally(ex);\r\n\t}\r\n\treturn future;\r\n}\r\n```\r\n","title":"CompletableFuture with Kafka&#39;s callback methods?","body":"<p><code>completedFuture</code></p>\n<p>You are returning an already completed future, regardless of whether the callback has run yet; so the caller will always see a completed future.</p>\n<p>You should return <code>future</code> from the execute method, then return <code>future.completable()</code> from the <code>asyncSend</code>.</p>\n<p>Note that, starting with version 3.0, the template returns a <code>CompletableFuture</code> instead of a <code>ListenableFuture</code>.</p>\n<p><strong>EDIT</strong></p>\n<p>I just tested it and it works as expected...</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableAsync\npublic class So75823718Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(So75823718Application.class, args);\n    }\n\n    @Bean\n    NewTopic topic() {\n        return TopicBuilder.name(&quot;so75823718&quot;).partitions(1).replicas(1).build();\n    }\n\n    @Bean\n    ApplicationRunner runner(Foo foo) {\n        return args -&gt; {\n            CompletableFuture&lt;SendResult&lt;String, String&gt;&gt; future = foo.asyncSend(&quot;foo&quot;);\n            future.whenComplete((sr, ex) -&gt; System.out.println(future + &quot;: &quot; + sr.getRecordMetadata()));\n        };\n    }\n\n    @Bean\n    TaskExecutor exec() {\n        return new SimpleAsyncTaskExecutor();\n    }\n\n}\n\n@Component\nclass Foo {\n\n    RetryTemplate template = new RetryTemplate();\n\n    @Autowired\n    KafkaTemplate&lt;String, String&gt; kafkaTemplate;\n\n    @Async(&quot;exec&quot;)\n    public CompletableFuture&lt;SendResult&lt;String, String&gt;&gt; asyncSend(final String message) throws Exception {\n\n        return this.template.execute(ctx -&gt; {\n            final ListenableFuture&lt;SendResult&lt;String, String&gt;&gt; future = kafkaTemplate.send(&quot;so75823718&quot;, &quot;foo&quot;);\n\n            return future;\n        }).completable();\n    }\n\n}\n</code></pre>\n<pre><code>java.util.concurrent.CompletableFuture@7ebce1f7[Completed normally]: so75823718-0@12\n</code></pre>\n<p><strong>EDIT2</strong></p>\n<p>...and to catch direct exceptions on the <code>send()</code>...</p>\n<pre class=\"lang-java prettyprint-override\"><code>public CompletableFuture&lt;SendResult&lt;String, String&gt;&gt; asyncSend(final String message) throws Exception {\n\n    CompletableFuture&lt;SendResult&lt;String, String&gt;&gt; future = new CompletableFuture&lt;&gt;();\n    try {\n        CompletableFuture&lt;SendResult&lt;String, String&gt;&gt; fut = this.template.execute(ctx -&gt; {\n            return kafkaTemplate.send(&quot;so75823718&quot;, &quot;foo&quot;);\n        }).completable();\n        fut.whenComplete((sr, ex) -&gt; {\n            if (ex != null) {\n                future.completeExceptionally(ex);\n            }\n            else {\n                future.complete(sr);\n            }\n        });\n    }\n    catch (Exception ex) {\n        future.completeExceptionally(ex);\n    }\n    return future;\n}\n</code></pre>\n"}],"owner":{"account_id":8210886,"reputation":814,"user_id":20390023,"display_name":"Wrapper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6525,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75823956,"answer_count":1,"score":0,"last_activity_date":1679923645,"creation_date":1679578552,"question_id":75823718,"body_markdown":"We&#39;re building a small wrapper library around Kafka. We&#39;re using older version where there is no `.whenComplete((response, throwable) -&gt; {...});` when calling `kafkaTemplate.send(...);`.\r\n\r\nInstead our library is doing following:\r\n\r\n1 Defining a `RetryTemplate` bean:\r\n\r\n    @Bean\r\n    public RetryTemplate prodRetryTemplate() {    \r\n       final RetryTemplate template = RetryTemplate.builder().maxAttempts(3)\r\n             .retryOn(TopicAuthorizationException.class).exponentialBackoff(1000, 2, 2000).build();\r\n       return template;\r\n    }\r\n\r\n2 Defining a asynchronous CompletableFuture method:\r\n\r\n\r\n    @Override\r\n    @Async(EXECUTOR_SERVICE) //we had defined Executor bean, it is ommited here\r\n    public CompletableFuture&lt;DtoResponse&gt; asyncSend(final Integer key, final String topic, final String message)\r\n          throws Exception {\r\n\r\n       final ProducerRecord&lt;K, V&gt; producerRecord = buildRecord(key, topic, message);\r\n\r\n       DtoRespons[] responseHolder = new DtoRespons[1];\r\n       template.execute(ctx -&gt;{\r\n    \r\n                final ListenableFuture&lt;SendResult&lt;Integer, String&gt;&gt; future = kafkaTemplate.send(producerRecord);\r\n                future.addCallback(new ListenableFutureCallback&lt;SendResult&lt;Integer, String&gt;&gt;() {\r\n    \r\n                   @Override\r\n                   public void onSuccess(final SendResult&lt;Integer, String&gt; result) {\r\n                      log.info(&quot;success...&quot;);\r\n                      responseHolder[0] = DtoResponse.builder()\r\n                            .error(null)\r\n                            .success(true)\r\n                            .msg(&quot;PUBLISHED&quot;)\r\n                            .build();\r\n                   }\r\n    \r\n                   @SneakyThrows\r\n                   @Override\r\n                   public void onFailure(final Throwable ex) {\r\n                      log.error(&quot;error...)\r\n                      throwError(producerRecord, eventName, ex); //do additional logging\r\n                   }\r\n                });\r\n    \r\n          return null; //to satisfy execute method from RetryTemplate\r\n       });\r\n    \r\n       return CompletableFuture.completedFuture(responseHolder[0]);\r\n    }\r\n\r\n\r\nMy question is straightforward, is it possible that once `asyncSend` is called that it returns `null` i.e. will line `return CompletableFuture.completedFuture(null);` be executed before `onSuccess` or `onFailure` are invoked?\r\n\r\nThat is, from client side:\r\n\r\n    public void myService(){  \r\n      MyLib lib = new MyLib();\r\n      CompletableFuture&lt;DtoResponse&gt; future = lib.sendAsync(key, topic, message);\r\n      future.whenComplete((result, throwable) -&gt; { \r\n         //is it possible that result and throwable both be null ??\r\n    \r\n        });\r\n    }\r\n\r\nUpdate 1:\r\n\r\nBased on professor&#39;s Gary comment. I am not sure if this is what you meant:\r\n\r\n    @Override\r\n    @Async(EXECUTOR_SERVICE)\r\n    public CompletableFuture&lt;SendResult&lt;Integer, String&gt;&gt; asyncSend(final Integer key, final String topic, final String message)\r\n          throws Exception {\r\n       final ProducerRecord&lt;Integer, String&gt; producerRecord = buildRecord(key, topic, message); //this can throw ex\r\n    \r\n       ListenableFuture&lt;SendResult&lt;Integer, String&gt;&gt; x = template.execute(ctx -&gt; {\r\n          final ListenableFuture&lt;SendResult&lt;Integer, String&gt;&gt; future = kafkaTemplate.send(producerRecord);\r\n    \r\n          return future;\r\n       });\r\n       CompletableFuture&lt;SendResult&lt;Integer, String&gt;&gt; completable = x.completable();\r\n    \r\n       return completable;\r\n    }\r\nThen the client code would have to check for `throwable` and for `SendResult&lt;Integer, String&gt;` within `.whenComplete()`. But this is not what I need. With  `SendResult&lt;Integer, String&gt;` client code still cannot tell whether messages is sent or not. How to circumvent this? Please let me know if I&#39;ve explained this in understandable way. Also, our library needs to do important logging in `onFailure` and `onSuccess`\r\n\r\nUpdate 2:\r\n\r\nAfter Gary&#39;s EDIT. \r\n\r\nThanks Gary for helping. However, at first this works, but problem occurs when exception as thrown. In that case `whenComplete` is not invoked, neither is `exceptionally` channel invoked. Let me explain.\r\n\r\nSo since we use secure Kafka in our `.yaml` file there are these properties:\r\n\r\n     properties:\r\n      security.protocol: &quot;SASL_SSL&quot;\r\n      sasl.mechanism: &quot;OAUTHBEARER&quot;\r\n      sasl.login.callback.handler.class: &quot;path.to.LoginCallBack&quot;\r\n      sasl.jaas.config: &gt;-\r\n        org.apache.kafka.common.security.oauthbearer.OAuthBearerLoginModule\r\n          required\r\n          oauth.token.endpoint.uri=&quot;sso-uri&quot;\r\n          oauth.ssl.endpoint.identification.algorithm=&quot;&quot;\r\n          oauth.ssl.truststore.type=&quot;JKS&quot;\r\n          oauth.client.id=&quot;kafka-client-id&quot;\r\n          oauth.client.secret=&quot;someSecret&quot;\r\n          oauth.username=&quot;username&quot;\r\n          oauth.password=&quot;password&quot;;\r\n\r\nI had changed value `oauth.client.id` to `dummy` in order to provoke `org.apache.kafka.common.KafkaException: Failed to construct kafka producer` and to see where the flow will end up.\r\n\r\nWhen line `kafkaTemplate.send(&quot;so75823718&quot;, &quot;foo&quot;);` is reached, it throws exception and that exception is not `ex` in `whenComplete`\r\n\r\n        @Bean\r\n    ApplicationRunner runner(Foo foo) {\r\n      return args -&gt; {\r\n            try {\r\n                CompletableFuture&lt;SendResult&lt;String, String&gt;&gt; future \r\n                 = foo.asyncSend(&quot;foo&quot;);\r\n                future.whenComplete((sr, ex) -&gt; {\r\n                    if (sr != null){\r\n                        System.out.println(&quot;success&quot;);\r\n                    } else if (ex != null){\r\n                        System.out.println(&quot;fail&quot;);\r\n                    }\r\n                });\r\n            } catch (Exception e){\r\n                System.out.println(&quot;not expected nor desired behavior \r\n                to have exception here&quot;);\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\nI&#39;ve tried couple of things, but not worth of showing since they don&#39;t even compile. So my question is now, is it somehow possible to not force users of `asyncSend` to use try/catch instead just to use `whenComplete()` or `acceptThen/exceptionally` and that all error handling is done in `asyncSend`? \r\n\r\n UPDATE 3:\r\n\r\nReally hopping that is a final edit.\r\n\r\nSo I think I managed it like so:\r\n\r\nFirst, template\r\n\r\n    @Value(&quot;${kafkaExceptions:}&quot;)\r\n    private List&lt;String&gt; exceptions = new ArrayList&lt;&gt;();\r\n    \r\n        @Bean\r\n        public RetryTemplate template() throws ClassNotFoundException {\r\n           exceptions.add(TopicAuthorizationException.class.getName());\r\n           RetryTemplateBuilder retryTemplateBuilder = RetryTemplate.builder().maxAttempts(retries).retryOn(TopicAuthorizationException.class);\r\n           for (String exceptionClassName : exceptions){\r\n              retryTemplateBuilder.retryOn((Class&lt;? extends Throwable&gt;) Class.forName(exceptionClassName));\r\n           }\r\n           return retryTemplateBuilder.exponentialBackoff(1000, 2, 2000).build();\r\n        }\r\n\r\nThen,\r\n\r\n    @Async(&quot;exec&quot;)\r\n    public CompletableFuture&lt;SendResult&lt;K, V&gt;&gt; asyncSend(K key, String topic, V message, S) throws Exception {\r\n    \r\n       return template.execute(ctx -&gt; {\r\n    \r\n          try {\r\n             ProducerRecord&lt;K, V&gt; producerRecord = buildHeader(key, topic, msg); //can throw custom exception\r\n    \r\n             return kafkaTemplate.send(producerRecord).completable();\r\n          } catch (Exception e){\r\n             \r\n             if (reThrow(e)) throw e;\r\n    \r\n             return CompletableFuture.failedFuture(new CustomException(Enum.KAFKA_EX_PROD_PUBLISH_ERROR.findErrorMessage(),e));\r\n    \r\n          }\r\n       });\r\n    \r\n    }\r\n    \r\n    \r\n    private boolean reThrow(Exception e){\r\n       String retriableException = e.getClass().getName();\r\n       return retriableExceptions.contains(retriableException);\r\n    }\r\n\r\nIn this way I control `execute` invocations. I just need two confirmations.\r\n\r\n1. Can I be sure that if in `.whenComplete`, `sr` is non-null, that means that is equivalent of `onSuccess` (from ListenableFutureCallback) callback was called? There will be some business logic if `sr` is non-null.\r\n\r\n2. I can be sure that if in `.whenComplete`, `th` is non-null, that happened either because `onFailure` (from ListenableFutureCallback) happened or I completed future with failure? ","title":"CompletableFuture with Kafka&#39;s callback methods?","body":"<p>We're building a small wrapper library around Kafka. We're using older version where there is no <code>.whenComplete((response, throwable) -&gt; {...});</code> when calling <code>kafkaTemplate.send(...);</code>.</p>\n<p>Instead our library is doing following:</p>\n<p>1 Defining a <code>RetryTemplate</code> bean:</p>\n<pre><code>@Bean\npublic RetryTemplate prodRetryTemplate() {    \n   final RetryTemplate template = RetryTemplate.builder().maxAttempts(3)\n         .retryOn(TopicAuthorizationException.class).exponentialBackoff(1000, 2, 2000).build();\n   return template;\n}\n</code></pre>\n<p>2 Defining a asynchronous CompletableFuture method:</p>\n<pre><code>@Override\n@Async(EXECUTOR_SERVICE) //we had defined Executor bean, it is ommited here\npublic CompletableFuture&lt;DtoResponse&gt; asyncSend(final Integer key, final String topic, final String message)\n      throws Exception {\n\n   final ProducerRecord&lt;K, V&gt; producerRecord = buildRecord(key, topic, message);\n\n   DtoRespons[] responseHolder = new DtoRespons[1];\n   template.execute(ctx -&gt;{\n\n            final ListenableFuture&lt;SendResult&lt;Integer, String&gt;&gt; future = kafkaTemplate.send(producerRecord);\n            future.addCallback(new ListenableFutureCallback&lt;SendResult&lt;Integer, String&gt;&gt;() {\n\n               @Override\n               public void onSuccess(final SendResult&lt;Integer, String&gt; result) {\n                  log.info(&quot;success...&quot;);\n                  responseHolder[0] = DtoResponse.builder()\n                        .error(null)\n                        .success(true)\n                        .msg(&quot;PUBLISHED&quot;)\n                        .build();\n               }\n\n               @SneakyThrows\n               @Override\n               public void onFailure(final Throwable ex) {\n                  log.error(&quot;error...)\n                  throwError(producerRecord, eventName, ex); //do additional logging\n               }\n            });\n\n      return null; //to satisfy execute method from RetryTemplate\n   });\n\n   return CompletableFuture.completedFuture(responseHolder[0]);\n}\n</code></pre>\n<p>My question is straightforward, is it possible that once <code>asyncSend</code> is called that it returns <code>null</code> i.e. will line <code>return CompletableFuture.completedFuture(null);</code> be executed before <code>onSuccess</code> or <code>onFailure</code> are invoked?</p>\n<p>That is, from client side:</p>\n<pre><code>public void myService(){  \n  MyLib lib = new MyLib();\n  CompletableFuture&lt;DtoResponse&gt; future = lib.sendAsync(key, topic, message);\n  future.whenComplete((result, throwable) -&gt; { \n     //is it possible that result and throwable both be null ??\n\n    });\n}\n</code></pre>\n<p>Update 1:</p>\n<p>Based on professor's Gary comment. I am not sure if this is what you meant:</p>\n<pre><code>@Override\n@Async(EXECUTOR_SERVICE)\npublic CompletableFuture&lt;SendResult&lt;Integer, String&gt;&gt; asyncSend(final Integer key, final String topic, final String message)\n      throws Exception {\n   final ProducerRecord&lt;Integer, String&gt; producerRecord = buildRecord(key, topic, message); //this can throw ex\n\n   ListenableFuture&lt;SendResult&lt;Integer, String&gt;&gt; x = template.execute(ctx -&gt; {\n      final ListenableFuture&lt;SendResult&lt;Integer, String&gt;&gt; future = kafkaTemplate.send(producerRecord);\n\n      return future;\n   });\n   CompletableFuture&lt;SendResult&lt;Integer, String&gt;&gt; completable = x.completable();\n\n   return completable;\n}\n</code></pre>\n<p>Then the client code would have to check for <code>throwable</code> and for <code>SendResult&lt;Integer, String&gt;</code> within <code>.whenComplete()</code>. But this is not what I need. With  <code>SendResult&lt;Integer, String&gt;</code> client code still cannot tell whether messages is sent or not. How to circumvent this? Please let me know if I've explained this in understandable way. Also, our library needs to do important logging in <code>onFailure</code> and <code>onSuccess</code></p>\n<p>Update 2:</p>\n<p>After Gary's EDIT.</p>\n<p>Thanks Gary for helping. However, at first this works, but problem occurs when exception as thrown. In that case <code>whenComplete</code> is not invoked, neither is <code>exceptionally</code> channel invoked. Let me explain.</p>\n<p>So since we use secure Kafka in our <code>.yaml</code> file there are these properties:</p>\n<pre><code> properties:\n  security.protocol: &quot;SASL_SSL&quot;\n  sasl.mechanism: &quot;OAUTHBEARER&quot;\n  sasl.login.callback.handler.class: &quot;path.to.LoginCallBack&quot;\n  sasl.jaas.config: &gt;-\n    org.apache.kafka.common.security.oauthbearer.OAuthBearerLoginModule\n      required\n      oauth.token.endpoint.uri=&quot;sso-uri&quot;\n      oauth.ssl.endpoint.identification.algorithm=&quot;&quot;\n      oauth.ssl.truststore.type=&quot;JKS&quot;\n      oauth.client.id=&quot;kafka-client-id&quot;\n      oauth.client.secret=&quot;someSecret&quot;\n      oauth.username=&quot;username&quot;\n      oauth.password=&quot;password&quot;;\n</code></pre>\n<p>I had changed value <code>oauth.client.id</code> to <code>dummy</code> in order to provoke <code>org.apache.kafka.common.KafkaException: Failed to construct kafka producer</code> and to see where the flow will end up.</p>\n<p>When line <code>kafkaTemplate.send(&quot;so75823718&quot;, &quot;foo&quot;);</code> is reached, it throws exception and that exception is not <code>ex</code> in <code>whenComplete</code></p>\n<pre><code>    @Bean\nApplicationRunner runner(Foo foo) {\n  return args -&gt; {\n        try {\n            CompletableFuture&lt;SendResult&lt;String, String&gt;&gt; future \n             = foo.asyncSend(&quot;foo&quot;);\n            future.whenComplete((sr, ex) -&gt; {\n                if (sr != null){\n                    System.out.println(&quot;success&quot;);\n                } else if (ex != null){\n                    System.out.println(&quot;fail&quot;);\n                }\n            });\n        } catch (Exception e){\n            System.out.println(&quot;not expected nor desired behavior \n            to have exception here&quot;);\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>I've tried couple of things, but not worth of showing since they don't even compile. So my question is now, is it somehow possible to not force users of <code>asyncSend</code> to use try/catch instead just to use <code>whenComplete()</code> or <code>acceptThen/exceptionally</code> and that all error handling is done in <code>asyncSend</code>?</p>\n<p>UPDATE 3:</p>\n<p>Really hopping that is a final edit.</p>\n<p>So I think I managed it like so:</p>\n<p>First, template</p>\n<pre><code>@Value(&quot;${kafkaExceptions:}&quot;)\nprivate List&lt;String&gt; exceptions = new ArrayList&lt;&gt;();\n\n    @Bean\n    public RetryTemplate template() throws ClassNotFoundException {\n       exceptions.add(TopicAuthorizationException.class.getName());\n       RetryTemplateBuilder retryTemplateBuilder = RetryTemplate.builder().maxAttempts(retries).retryOn(TopicAuthorizationException.class);\n       for (String exceptionClassName : exceptions){\n          retryTemplateBuilder.retryOn((Class&lt;? extends Throwable&gt;) Class.forName(exceptionClassName));\n       }\n       return retryTemplateBuilder.exponentialBackoff(1000, 2, 2000).build();\n    }\n</code></pre>\n<p>Then,</p>\n<pre><code>@Async(&quot;exec&quot;)\npublic CompletableFuture&lt;SendResult&lt;K, V&gt;&gt; asyncSend(K key, String topic, V message, S) throws Exception {\n\n   return template.execute(ctx -&gt; {\n\n      try {\n         ProducerRecord&lt;K, V&gt; producerRecord = buildHeader(key, topic, msg); //can throw custom exception\n\n         return kafkaTemplate.send(producerRecord).completable();\n      } catch (Exception e){\n         \n         if (reThrow(e)) throw e;\n\n         return CompletableFuture.failedFuture(new CustomException(Enum.KAFKA_EX_PROD_PUBLISH_ERROR.findErrorMessage(),e));\n\n      }\n   });\n\n}\n\n\nprivate boolean reThrow(Exception e){\n   String retriableException = e.getClass().getName();\n   return retriableExceptions.contains(retriableException);\n}\n</code></pre>\n<p>In this way I control <code>execute</code> invocations. I just need two confirmations.</p>\n<ol>\n<li><p>Can I be sure that if in <code>.whenComplete</code>, <code>sr</code> is non-null, that means that is equivalent of <code>onSuccess</code> (from ListenableFutureCallback) callback was called? There will be some business logic if <code>sr</code> is non-null.</p>\n</li>\n<li><p>I can be sure that if in <code>.whenComplete</code>, <code>th</code> is non-null, that happened either because <code>onFailure</code> (from ListenableFutureCallback) happened or I completed future with failure?</p>\n</li>\n</ol>\n"},{"tags":["java","yaml","snakeyaml"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1679923480,"post_id":75856293,"comment_id":133802842,"body_markdown":"Do you have getters and setters for your fields? Or is everything literally as posted?","body":"Do you have getters and setters for your fields? Or is everything literally as posted?"},{"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"score":0,"creation_date":1679926572,"post_id":75856293,"comment_id":133803824,"body_markdown":"`tables` must be either public or have a setter. Same for other fields.","body":"<code>tables</code> must be either public or have a setter. Same for other fields."}],"owner":{"account_id":5583416,"reputation":125,"user_id":4424628,"display_name":"Idan Cohen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679923350,"creation_date":1679923350,"question_id":75856293,"body_markdown":"I&#39;m trying to load YAML file content into custom objects I&#39;ve defined in Java, but no matter which modification I&#39;m doing, I still gets parsing error.\r\n\r\nThe project configure with Maven.\r\n\r\nThis is the YAML file content:\r\n```YAML\r\ntables:\r\n- cid: 10\r\n  sopClass: default\r\n  codeMeanings:\r\n    - codeMeaning: Alpha-adrenergic blocking agent\r\n      configurations:\r\n      - type: 0\r\n        Code Meaning: Alpha-adrenergic blocking agent\r\n        Code Value: C-80131\r\n        Coding Scheme Designator: SRT\r\n      - type: 1\r\n        Code Meaning: Alpha-adrenergic blocking agent\r\n        Code Value: &#39;67440007&#39;\r\n        Coding Scheme Designator: SCT\r\n```\r\n\r\nThe followings are the classes:\r\n\r\nCidTable.java:\r\n```Java\r\nimport java.util.List;\r\npublic class CidTable {\r\n    private List&lt;CodingSchemeTable&gt; tables;\r\n}\r\n```\r\n\r\nCodingSchemeTable.java:\r\n```Java\r\nimport java.util.List;\r\n\r\npublic class CodingSchemeTable {\r\n    private String cid;\r\n    private String sopClass;\r\n    private List&lt;CodeMeanings&gt; codeMeaning;\r\n}\r\n```\r\n\r\nCodeMeanings.java:\r\n```Java\r\nimport java.util.List;\r\n\r\npublic class CodeMeanings {\r\n    private String codeMeanings;\r\n    private List&lt;Configurations&gt; configurations;\r\n}\r\n```\r\n\r\nConfigurations.java:\r\n```Java\r\nimport java.util.List;\r\n\r\npublic class Configurations {\r\n    private List&lt;BasicCodeSequenceMacro&gt; codeSequenceMacros;\r\n}\r\n```\r\n\r\nBasicCodeSequenceMacro.java:\r\n```Java\r\npublic class BasicCodeSequenceMacro {\r\n    private int type;\r\n    private final String codeValue;\r\n    private final String codingSchemeDesignator;\r\n    private final String codeMeaning;\r\n}\r\n```\r\n\r\nI&#39;m getting the following error:\r\n```\r\nCannot create property=tables for JavaBean=com.test.common.CidTable@7d3d101b\r\n in &#39;reader&#39;, line 1, column 1:\r\n    tables:\r\n    ^\r\nUnable to find property &#39;tables&#39; on class: com.test.common.CidTable\r\n in &#39;reader&#39;, line 2, column 1:\r\n    - cid: 10\r\n    ^\r\n```\r\n\r\nWhat am I doing wrong?\r\nAlso, if there is another way to parse YAML in Java, please tall. I know that there is a library in cpp, which called `yaml-cpp` and it is great!\r\n\r\nThanks!\r\n\r\n\r\n\r\n","title":"Parse YAML file with SnakeYaml using custom classes","body":"<p>I'm trying to load YAML file content into custom objects I've defined in Java, but no matter which modification I'm doing, I still gets parsing error.</p>\n<p>The project configure with Maven.</p>\n<p>This is the YAML file content:</p>\n<pre><code>tables:\n- cid: 10\n  sopClass: default\n  codeMeanings:\n    - codeMeaning: Alpha-adrenergic blocking agent\n      configurations:\n      - type: 0\n        Code Meaning: Alpha-adrenergic blocking agent\n        Code Value: C-80131\n        Coding Scheme Designator: SRT\n      - type: 1\n        Code Meaning: Alpha-adrenergic blocking agent\n        Code Value: '67440007'\n        Coding Scheme Designator: SCT\n</code></pre>\n<p>The followings are the classes:</p>\n<p>CidTable.java:</p>\n<pre><code>import java.util.List;\npublic class CidTable {\n    private List&lt;CodingSchemeTable&gt; tables;\n}\n</code></pre>\n<p>CodingSchemeTable.java:</p>\n<pre><code>import java.util.List;\n\npublic class CodingSchemeTable {\n    private String cid;\n    private String sopClass;\n    private List&lt;CodeMeanings&gt; codeMeaning;\n}\n</code></pre>\n<p>CodeMeanings.java:</p>\n<pre><code>import java.util.List;\n\npublic class CodeMeanings {\n    private String codeMeanings;\n    private List&lt;Configurations&gt; configurations;\n}\n</code></pre>\n<p>Configurations.java:</p>\n<pre><code>import java.util.List;\n\npublic class Configurations {\n    private List&lt;BasicCodeSequenceMacro&gt; codeSequenceMacros;\n}\n</code></pre>\n<p>BasicCodeSequenceMacro.java:</p>\n<pre><code>public class BasicCodeSequenceMacro {\n    private int type;\n    private final String codeValue;\n    private final String codingSchemeDesignator;\n    private final String codeMeaning;\n}\n</code></pre>\n<p>I'm getting the following error:</p>\n<pre><code>Cannot create property=tables for JavaBean=com.test.common.CidTable@7d3d101b\n in 'reader', line 1, column 1:\n    tables:\n    ^\nUnable to find property 'tables' on class: com.test.common.CidTable\n in 'reader', line 2, column 1:\n    - cid: 10\n    ^\n</code></pre>\n<p>What am I doing wrong?\nAlso, if there is another way to parse YAML in Java, please tall. I know that there is a library in cpp, which called <code>yaml-cpp</code> and it is great!</p>\n<p>Thanks!</p>\n"},{"tags":["java","eclipse","jvm"],"comments":[{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":2,"creation_date":1679922866,"post_id":75856176,"comment_id":133802629,"body_markdown":"Class file version 63 is Java 19, change the project Java compliance settings in Eclipse to be Java 17.","body":"Class file version 63 is Java 19, change the project Java compliance settings in Eclipse to be Java 17."},{"owner":{"account_id":457033,"reputation":5338,"user_id":856090,"accept_rate":55,"display_name":"porton"},"score":0,"creation_date":1679923150,"post_id":75856176,"comment_id":133802727,"body_markdown":"@greg-449 How to change the project Java compliance settings in Eclipse to be Java 17?","body":"@greg-449 How to change the project Java compliance settings in Eclipse to be Java 17?"},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1679923255,"post_id":75856176,"comment_id":133802759,"body_markdown":"Project Properties &gt; Java Compiler","body":"Project Properties &gt; Java Compiler"}],"owner":{"account_id":457033,"reputation":5338,"user_id":856090,"accept_rate":55,"display_name":"porton"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":375,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679922664,"creation_date":1679922664,"question_id":75856176,"body_markdown":"I have a JDK-17 Eclipse project.\r\n\r\nI compile it using Eclipse and try to run using Eclipse. When I try to run:\r\n\r\n&gt; Error: LinkageError occurred while loading main class XXX.blockchainUI.MainWindow\r\n\tjava.lang.UnsupportedClassVersionError: XXX/blockchainUI/MainWindow has been compiled by a more recent version of the Java Runtime (class file version 63.0), this version of the Java Runtime only recognizes class file versions up to 61.0\r\n\r\nI have `java` symlinked to JDK-17 `java`:\r\n\r\n```\r\n$ ls -l /etc/alternatives/java*\r\nlrwxrwxrwx 1 root root 43 Mar 27 15:51 /etc/alternatives/java -&gt; /usr/lib/jvm/java-17-openjdk-amd64/bin/java\r\nlrwxrwxrwx 1 root root 53 Mar 27 15:51 /etc/alternatives/java.1.gz -&gt; /usr/lib/jvm/java-17-openjdk-amd64/man/man1/java.1.gz\r\nlrwxrwxrwx 1 root root 44 Mar 27 15:56 /etc/alternatives/javac -&gt; /usr/lib/jvm/java-17-openjdk-amd64/bin/javac\r\nlrwxrwxrwx 1 root root 54 Mar 27 15:56 /etc/alternatives/javac.1.gz -&gt; /usr/lib/jvm/java-17-openjdk-amd64/man/man1/javac.1.gz\r\nlrwxrwxrwx 1 root root 46 Mar 27 15:57 /etc/alternatives/javadoc -&gt; /usr/lib/jvm/java-17-openjdk-amd64/bin/javadoc\r\nlrwxrwxrwx 1 root root 56 Mar 27 15:57 /etc/alternatives/javadoc.1.gz -&gt; /usr/lib/jvm/java-17-openjdk-amd64/man/man1/javadoc.1.gz\r\nlrwxrwxrwx 1 root root 43 Jan 20 11:12 /etc/alternatives/javah -&gt; /usr/lib/jvm/java-8-openjdk-amd64/bin/javah\r\nlrwxrwxrwx 1 root root 53 Jan 20 11:12 /etc/alternatives/javah.1.gz -&gt; /usr/lib/jvm/java-8-openjdk-amd64/man/man1/javah.1.gz\r\nlrwxrwxrwx 1 root root 44 Mar 27 15:58 /etc/alternatives/javap -&gt; /usr/lib/jvm/java-17-openjdk-amd64/bin/javap\r\nlrwxrwxrwx 1 root root 54 Mar 27 15:58 /etc/alternatives/javap.1.gz -&gt; /usr/lib/jvm/java-17-openjdk-amd64/man/man1/javap.1.gz\r\n```\r\n\r\nNote that to be sure I cleaned all files under `bin/` directory, this does not help.","title":"Linkage error when I try to run my Java program in Eclipse","body":"<p>I have a JDK-17 Eclipse project.</p>\n<p>I compile it using Eclipse and try to run using Eclipse. When I try to run:</p>\n<blockquote>\n<p>Error: LinkageError occurred while loading main class XXX.blockchainUI.MainWindow\njava.lang.UnsupportedClassVersionError: XXX/blockchainUI/MainWindow has been compiled by a more recent version of the Java Runtime (class file version 63.0), this version of the Java Runtime only recognizes class file versions up to 61.0</p>\n</blockquote>\n<p>I have <code>java</code> symlinked to JDK-17 <code>java</code>:</p>\n<pre><code>$ ls -l /etc/alternatives/java*\nlrwxrwxrwx 1 root root 43 Mar 27 15:51 /etc/alternatives/java -&gt; /usr/lib/jvm/java-17-openjdk-amd64/bin/java\nlrwxrwxrwx 1 root root 53 Mar 27 15:51 /etc/alternatives/java.1.gz -&gt; /usr/lib/jvm/java-17-openjdk-amd64/man/man1/java.1.gz\nlrwxrwxrwx 1 root root 44 Mar 27 15:56 /etc/alternatives/javac -&gt; /usr/lib/jvm/java-17-openjdk-amd64/bin/javac\nlrwxrwxrwx 1 root root 54 Mar 27 15:56 /etc/alternatives/javac.1.gz -&gt; /usr/lib/jvm/java-17-openjdk-amd64/man/man1/javac.1.gz\nlrwxrwxrwx 1 root root 46 Mar 27 15:57 /etc/alternatives/javadoc -&gt; /usr/lib/jvm/java-17-openjdk-amd64/bin/javadoc\nlrwxrwxrwx 1 root root 56 Mar 27 15:57 /etc/alternatives/javadoc.1.gz -&gt; /usr/lib/jvm/java-17-openjdk-amd64/man/man1/javadoc.1.gz\nlrwxrwxrwx 1 root root 43 Jan 20 11:12 /etc/alternatives/javah -&gt; /usr/lib/jvm/java-8-openjdk-amd64/bin/javah\nlrwxrwxrwx 1 root root 53 Jan 20 11:12 /etc/alternatives/javah.1.gz -&gt; /usr/lib/jvm/java-8-openjdk-amd64/man/man1/javah.1.gz\nlrwxrwxrwx 1 root root 44 Mar 27 15:58 /etc/alternatives/javap -&gt; /usr/lib/jvm/java-17-openjdk-amd64/bin/javap\nlrwxrwxrwx 1 root root 54 Mar 27 15:58 /etc/alternatives/javap.1.gz -&gt; /usr/lib/jvm/java-17-openjdk-amd64/man/man1/javap.1.gz\n</code></pre>\n<p>Note that to be sure I cleaned all files under <code>bin/</code> directory, this does not help.</p>\n"},{"tags":["java","eclipse","jwt"],"comments":[{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":1,"creation_date":1679918230,"post_id":75855346,"comment_id":133801317,"body_markdown":"AWT is part of the java.desktop module: https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/module-summary.html","body":"AWT is part of the java.desktop module: <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/module-summary.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/17/docs/api/java.desktop/&hellip;</a>"},{"owner":{"account_id":457033,"reputation":5338,"user_id":856090,"accept_rate":55,"display_name":"porton"},"score":0,"creation_date":1679918647,"post_id":75855346,"comment_id":133801411,"body_markdown":"@Puce How to install java.desktop on Ubuntu?","body":"@Puce How to install java.desktop on Ubuntu?"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":1,"creation_date":1679920276,"post_id":75855346,"comment_id":133801824,"body_markdown":"just click `java.desktop`, expand the node, then you can find `java.awt`. (Default existing in JDK 9+ ~ JDK 17). You do not need to change anything.","body":"just click <code>java.desktop</code>, expand the node, then you can find <code>java.awt</code>. (Default existing in JDK 9+ ~ JDK 17). You do not need to change anything."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1679920568,"post_id":75855346,"comment_id":133801894,"body_markdown":"@porton, if you use JDK 9+ ~ JDK 17, it will show java module name, not package. you must select one module like `java.desktop` then expand it, then it will show packages under the module.","body":"@porton, if you use JDK 9+ ~ JDK 17, it will show java module name, not package. you must select one module like <code>java.desktop</code> then expand it, then it will show packages under the module."},{"owner":{"account_id":457033,"reputation":5338,"user_id":856090,"accept_rate":55,"display_name":"porton"},"score":0,"creation_date":1679922412,"post_id":75855346,"comment_id":133802481,"body_markdown":"It worked after switching to JDK 17. Why doesn&#39;t it work with JDK 19 and JDK 20?","body":"It worked after switching to JDK 17. Why doesn&#39;t it work with JDK 19 and JDK 20?"},{"owner":{"account_id":401843,"reputation":89778,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1679922804,"post_id":75855346,"comment_id":133802608,"body_markdown":"@FedericoklezCulloca Your comment is misleading. headless JDK installs exist, but they _still_ have `javax.swing` and `java.awt` packages. These classes do not disappear in headless environments or installations. They are &#39;headless&#39; in the sense that attempting to do anything UI related with them results in a swift `HeadlessException`. Point is, &quot;I cannot find the java.awt package&quot; is not answered by &quot;.. perhaps you have a headless install&quot;. &quot;.. perhaps you have a headless install&quot; is the correct answer to: &quot;I got a `HeadlessException` - how come?&quot;.","body":"@FedericoklezCulloca Your comment is misleading. headless JDK installs exist, but they <i>still</i> have <code>javax.swing</code> and <code>java.awt</code> packages. These classes do not disappear in headless environments or installations. They are &#39;headless&#39; in the sense that attempting to do anything UI related with them results in a swift <code>HeadlessException</code>. Point is, &quot;I cannot find the java.awt package&quot; is not answered by &quot;.. perhaps you have a headless install&quot;. &quot;.. perhaps you have a headless install&quot; is the correct answer to: &quot;I got a <code>HeadlessException</code> - how come?&quot;."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1679923533,"post_id":75855346,"comment_id":133802859,"body_markdown":"@rzwitserloot noted, thanks. I&#39;ll delete my misleading comment.","body":"@rzwitserloot noted, thanks. I&#39;ll delete my misleading comment."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89778,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679922577,"creation_date":1679922577,"answer_id":75856158,"question_id":75855346,"body_markdown":"&gt; (On Ubuntu Linux) as you see from the screenshot, java.awt is missing in the list of Eclipse:\r\n\r\nYou&#39;re confused. __You already have `java.awt` - there is NOTHING you need to do!!__ - but read on, I think I know what you&#39;re confused about.\r\n\r\nThat list you pasted into your question is _a list of modules_. `java.awt` is not a module name and never has been. You&#39;re thinking of the `java.awt` in e.g. `java.awt.Button`, which is _a package name_. Not a module name.\r\n\r\nThe `java.awt` package lives in the `java.desktop` module which _you already have_ (it&#39;s in your pasted list. Regardless, __all__ JDKs have this module unless it is treeshaking which is highly unlikely. Even headless JDKs have this package; it&#39;s simply that interacting with most of the code in `java.awt` would cause a `HeadlessException` if you tried to use AWT on a headless environment / with a &#39;headless&#39; JDK installation).\r\n\r\nThus, __there is nothing you have to do - you already have it__.\r\n\r\nLet me take a guess as to what you are confused about:\r\n\r\nBy default, eclipse _ignores_ AWT. As in, the auto-complete dialog and &#39;find type&#39; dialog _do not show AWT classes even though they are available_.\r\n\r\nTry it: Type `class Test { java.awt.Button b = null; }` and note how _this code compiles fine without error - no need to install anything_.\r\n\r\nTo &#39;fix&#39; that, you open the preferences window of eclipse, type &#39;`type filter`&#39; in the filterbox (you&#39;re looking for `Java` &gt; `Appearance` &gt; `Type filters`), and _uncheck_ `java.awt` which you&#39;ll find in the filterlist and checked if you have a standard eclipse installation.\r\n\r\nEclipse disables it by default for good reason:\r\n\r\n* `java.awt` is mostly obsolete; java has 3 local-desktop GUI frameworks (AWT, Swing, and JavaFX), and AWT is by far the least used (and oldest) one.\r\n* The type names in the package clash with common names in other packages. For example, `java.awt.List` is a thing. The java ecosystem at large means, literally, `java.util.List` instead of `java.awt.List` in 99.999% of all cases someone types `List` in eclipse anywhere on the planet. Nevertheless, if you try to fix imports on `List`, eclipse is forced to ask you if you wanted `java.awt.List` or `java.util.List`, which is annoying for everybody, hence, eclipse, by default, acts like `java.awt` does not exist for such type searches.\r\n\r\nNB: Starting a new desktop client in AWT in 2023 seems.. unlikely to be what you really want to do here. A further guess is that you are following a literally 20 year old tutorial. It&#39;s rather likely the true answer you are looking for is &#39;use something else&#39;. At the very least, swing (`javax.swing` package, also in `java.desktop` module, also already installed). Possibly JavaFX (that does require a separate dep/install). Probably: Nevermind local desktop, build a webapp.\r\n","title":"java.awt is missing in Eclipse","body":"<blockquote>\n<p>(On Ubuntu Linux) as you see from the screenshot, java.awt is missing in the list of Eclipse:</p>\n</blockquote>\n<p>You're confused. <strong>You already have <code>java.awt</code> - there is NOTHING you need to do!!</strong> - but read on, I think I know what you're confused about.</p>\n<p>That list you pasted into your question is <em>a list of modules</em>. <code>java.awt</code> is not a module name and never has been. You're thinking of the <code>java.awt</code> in e.g. <code>java.awt.Button</code>, which is <em>a package name</em>. Not a module name.</p>\n<p>The <code>java.awt</code> package lives in the <code>java.desktop</code> module which <em>you already have</em> (it's in your pasted list. Regardless, <strong>all</strong> JDKs have this module unless it is treeshaking which is highly unlikely. Even headless JDKs have this package; it's simply that interacting with most of the code in <code>java.awt</code> would cause a <code>HeadlessException</code> if you tried to use AWT on a headless environment / with a 'headless' JDK installation).</p>\n<p>Thus, <strong>there is nothing you have to do - you already have it</strong>.</p>\n<p>Let me take a guess as to what you are confused about:</p>\n<p>By default, eclipse <em>ignores</em> AWT. As in, the auto-complete dialog and 'find type' dialog <em>do not show AWT classes even though they are available</em>.</p>\n<p>Try it: Type <code>class Test { java.awt.Button b = null; }</code> and note how <em>this code compiles fine without error - no need to install anything</em>.</p>\n<p>To 'fix' that, you open the preferences window of eclipse, type '<code>type filter</code>' in the filterbox (you're looking for <code>Java</code> &gt; <code>Appearance</code> &gt; <code>Type filters</code>), and <em>uncheck</em> <code>java.awt</code> which you'll find in the filterlist and checked if you have a standard eclipse installation.</p>\n<p>Eclipse disables it by default for good reason:</p>\n<ul>\n<li><code>java.awt</code> is mostly obsolete; java has 3 local-desktop GUI frameworks (AWT, Swing, and JavaFX), and AWT is by far the least used (and oldest) one.</li>\n<li>The type names in the package clash with common names in other packages. For example, <code>java.awt.List</code> is a thing. The java ecosystem at large means, literally, <code>java.util.List</code> instead of <code>java.awt.List</code> in 99.999% of all cases someone types <code>List</code> in eclipse anywhere on the planet. Nevertheless, if you try to fix imports on <code>List</code>, eclipse is forced to ask you if you wanted <code>java.awt.List</code> or <code>java.util.List</code>, which is annoying for everybody, hence, eclipse, by default, acts like <code>java.awt</code> does not exist for such type searches.</li>\n</ul>\n<p>NB: Starting a new desktop client in AWT in 2023 seems.. unlikely to be what you really want to do here. A further guess is that you are following a literally 20 year old tutorial. It's rather likely the true answer you are looking for is 'use something else'. At the very least, swing (<code>javax.swing</code> package, also in <code>java.desktop</code> module, also already installed). Possibly JavaFX (that does require a separate dep/install). Probably: Nevermind local desktop, build a webapp.</p>\n"}],"owner":{"account_id":457033,"reputation":5338,"user_id":856090,"accept_rate":55,"display_name":"porton"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":531,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679922577,"creation_date":1679917404,"question_id":75855346,"body_markdown":"(On Ubuntu Linux) as you see from the screenshot, `java.awt` is missing in the list of Eclipse:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI tried different versions of JDK, including 17. See also my configuration dialog where I try to add `awt`:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nHow to make Eclipse see `java.awt`? (Now it produces errors when I try to use `java.awt`.)\r\n\r\n  [1]: https://i.stack.imgur.com/WXLwl.png\r\n  [2]: https://i.stack.imgur.com/DYknG.png","title":"java.awt is missing in Eclipse","body":"<p>(On Ubuntu Linux) as you see from the screenshot, <code>java.awt</code> is missing in the list of Eclipse:</p>\n<p><a href=\"https://i.stack.imgur.com/WXLwl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WXLwl.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried different versions of JDK, including 17. See also my configuration dialog where I try to add <code>awt</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/DYknG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DYknG.png\" alt=\"enter image description here\" /></a></p>\n<p>How to make Eclipse see <code>java.awt</code>? (Now it produces errors when I try to use <code>java.awt</code>.)</p>\n"},{"tags":["java","postgresql","spring-boot","spring-data-jpa","many-to-many"],"comments":[{"owner":{"account_id":26462151,"reputation":132,"user_id":20160920,"display_name":"Portal"},"score":0,"creation_date":1679921976,"post_id":75855945,"comment_id":133802335,"body_markdown":"are you setting the delete cascade property on these keys in the table when it was defined? I don&#39;t think delete cascade is the default in postgresql","body":"are you setting the delete cascade property on these keys in the table when it was defined? I don&#39;t think delete cascade is the default in postgresql"},{"owner":{"account_id":24094543,"reputation":29,"user_id":18067284,"display_name":"user"},"score":0,"creation_date":1679922361,"post_id":75855945,"comment_id":133802461,"body_markdown":"No i mean setting CascadeType properties in @ManyToMany","body":"No i mean setting CascadeType properties in @ManyToMany"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1679922842,"post_id":75855945,"comment_id":133802623,"body_markdown":"`@ManyToMany(cascade = CascadeType.ALL, ...)` would be the culprit or at least part of the problem. If you delete an `Attachment` JPA would cascade the delete down to `types`. Since I assume `Types` is independent from `Attachments` (i.e. those entries can exist even if there is no attachment at all) I&#39;d remove this cascading. You probably never need to create, delete or update types at the same time as attachments (create might be somewhat different though).","body":"<code>@ManyToMany(cascade = CascadeType.ALL, ...)</code> would be the culprit or at least part of the problem. If you delete an <code>Attachment</code> JPA would cascade the delete down to <code>types</code>. Since I assume <code>Types</code> is independent from <code>Attachments</code> (i.e. those entries can exist even if there is no attachment at all) I&#39;d remove this cascading. You probably never need to create, delete or update types at the same time as attachments (create might be somewhat different though)."},{"owner":{"account_id":24094543,"reputation":29,"user_id":18067284,"display_name":"user"},"score":0,"creation_date":1679922926,"post_id":75855945,"comment_id":133802648,"body_markdown":"So just removing properties from @ManyToMany will fix this?","body":"So just removing properties from @ManyToMany will fix this?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1679923050,"post_id":75855945,"comment_id":133802687,"body_markdown":"There may be more to this in the code you didn&#39;t share but removing the `cascade` or replacing it with an array of only the relevant values should help. You might want to read up on what cascading means in JPA to gain a better understanding on when to use it.","body":"There may be more to this in the code you didn&#39;t share but removing the <code>cascade</code> or replacing it with an array of only the relevant values should help. You might want to read up on what cascading means in JPA to gain a better understanding on when to use it."}],"owner":{"account_id":24094543,"reputation":29,"user_id":18067284,"display_name":"user"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679922522,"creation_date":1679921317,"question_id":75855945,"body_markdown":"I have spring boot application , and one part of it is storing files and their types .\r\nSo i have Attachment table for files, Type table for types and attachments_types for storing relation between them.\r\nFor example i have file that have id 123456 and type with id 1.\r\nso i have situation like this in my database.\r\n\r\nAttachments: \r\n\r\n | id     |   filename  |   fileType|\r\n |--------|-------------|-----------|\r\n | 123456 |   test.docx |   docx    |\r\n\r\n\r\n\r\n\r\nType\r\n\r\n| type_id     |   type_name|\r\n|--------|-------------|\r\n| 1|   &quot;TYPE_DOCX&quot;|\r\n\r\nattachments_types\r\nattachment_id     type_id\r\n123456            1\r\n\r\n\r\nand when i want to delete attachments from Attachments table it also deletes &quot;TYPE_DOCX&quot; from Type table. \r\nHow can i fix this\r\n\r\nthis is my Attachment entity\r\n        \r\n```\r\n@Entity\r\n@SuperBuilder\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Table(name = &quot;attachments&quot;)\r\npublic class Attachment  {\r\n\r\n    @Id\r\n    @GeneratedValue(generator = &quot;uuid&quot;)\r\n    @GenericGenerator(name = &quot;uuid&quot;, strategy = &quot;uuid2&quot;)\r\n    private UUID id;\r\n\r\n    private String fileName;\r\n\r\n    private String fileType;\r\n\r\n    @Lob\r\n    private byte[] data;\r\n\r\n    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    @JoinTable(\r\n            name = &quot;attachments_types&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;attachment_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;type_id&quot;))\r\n    private Set&lt;Type&gt; types;\r\n\r\n```\r\n\r\nType entity\r\n\r\n```\r\n@Entity\r\n@SuperBuilder\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Table(name = &quot;type&quot;)\r\npublic class Type {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long typeId;\r\n\r\n    @Column(name = &quot;type_name&quot;)\r\n    private String typeName;\r\n\r\n}\r\n\r\n```\r\nAttachment repository \r\n\r\n\r\n\r\n```\r\n    @Transactional\r\n    void deleteByFileName(String fileName);\r\n\r\n    @Modifying\r\n    @Transactional\r\n    @Query(value = &quot;DELETE FROM attachments_types WHERE attachment_id = :attachment_id &quot;, nativeQuery = true)\r\n    void deleteFromAttachmentsTypes(@Param(&quot;attachment_id&quot;) UUID attachment_id);\r\n\r\n```\r\n\r\nand Attachment service\r\n\r\n\r\n```\r\n @Override\r\n    public void deleteFile(String fileName) {\r\n        var attachment = attachmentRepository.findByFileName(fileName).get();\r\n        \r\n        attachmentRepository.deleteFromAttachmentsTypes(attachment.getId());\r\n\r\n        attachmentRepository.deleteByFileName(fileName);\r\n    }\r\n\r\n```\r\n\r\n\r\n\r\n\r\nI know that this can be maybe fix by changing CascadeType in @ManyToMany  properties but i dont know how\r\n","title":"Deleting objects from Database many to many","body":"<p>I have spring boot application , and one part of it is storing files and their types .\nSo i have Attachment table for files, Type table for types and attachments_types for storing relation between them.\nFor example i have file that have id 123456 and type with id 1.\nso i have situation like this in my database.</p>\n<p>Attachments:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>id</th>\n<th>filename</th>\n<th>fileType</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>123456</td>\n<td>test.docx</td>\n<td>docx</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Type</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>type_id</th>\n<th>type_name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>&quot;TYPE_DOCX&quot;</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>attachments_types\nattachment_id     type_id\n123456            1</p>\n<p>and when i want to delete attachments from Attachments table it also deletes &quot;TYPE_DOCX&quot; from Type table.\nHow can i fix this</p>\n<p>this is my Attachment entity</p>\n<pre><code>@Entity\n@SuperBuilder\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(name = &quot;attachments&quot;)\npublic class Attachment  {\n\n    @Id\n    @GeneratedValue(generator = &quot;uuid&quot;)\n    @GenericGenerator(name = &quot;uuid&quot;, strategy = &quot;uuid2&quot;)\n    private UUID id;\n\n    private String fileName;\n\n    private String fileType;\n\n    @Lob\n    private byte[] data;\n\n    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    @JoinTable(\n            name = &quot;attachments_types&quot;,\n            joinColumns = @JoinColumn(name = &quot;attachment_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;type_id&quot;))\n    private Set&lt;Type&gt; types;\n\n</code></pre>\n<p>Type entity</p>\n<pre><code>@Entity\n@SuperBuilder\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(name = &quot;type&quot;)\npublic class Type {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long typeId;\n\n    @Column(name = &quot;type_name&quot;)\n    private String typeName;\n\n}\n\n</code></pre>\n<p>Attachment repository</p>\n<pre><code>    @Transactional\n    void deleteByFileName(String fileName);\n\n    @Modifying\n    @Transactional\n    @Query(value = &quot;DELETE FROM attachments_types WHERE attachment_id = :attachment_id &quot;, nativeQuery = true)\n    void deleteFromAttachmentsTypes(@Param(&quot;attachment_id&quot;) UUID attachment_id);\n\n</code></pre>\n<p>and Attachment service</p>\n<pre><code> @Override\n    public void deleteFile(String fileName) {\n        var attachment = attachmentRepository.findByFileName(fileName).get();\n        \n        attachmentRepository.deleteFromAttachmentsTypes(attachment.getId());\n\n        attachmentRepository.deleteByFileName(fileName);\n    }\n\n</code></pre>\n<p>I know that this can be maybe fix by changing CascadeType in @ManyToMany  properties but i dont know how</p>\n"},{"tags":["java","regex","replace"],"answers":[{"tags":[],"owner":{"account_id":5523754,"reputation":19812,"user_id":4385913,"accept_rate":93,"display_name":"Skizo-ozᴉʞS ツ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1425255637,"creation_date":1425255637,"answer_id":28800950,"question_id":28800913,"body_markdown":"You can use `str.replace`, for example : \r\n\r\n    String str = &quot;http://www.google.com&quot;;\r\n    str.replace(&quot;http://&quot;,&quot;&quot;).replace(&quot;http:// www.&quot;,&quot;&quot;).replace(&quot;www.&quot;,&quot;&quot;);\r\n\r\nFor more information about [str.replace](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)\r\n","title":"Java regex URL prefix removal","body":"<p>You can use <code>str.replace</code>, for example : </p>\n\n<pre><code>String str = \"http://www.google.com\";\nstr.replace(\"http://\",\"\").replace(\"http:// www.\",\"\").replace(\"www.\",\"\");\n</code></pre>\n\n<p>For more information about <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html\" rel=\"nofollow\">str.replace</a></p>\n"},{"tags":[],"owner":{"account_id":121787,"reputation":11660,"user_id":315129,"accept_rate":93,"display_name":"vbezhenar"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1425256234,"creation_date":1425256234,"answer_id":28801041,"question_id":28800913,"body_markdown":"    newStr = str.replaceFirst(&quot;^(http://)?(www\\\\.)?&quot;, &quot;&quot;);\r\n\r\nplease note that `.` in regex means anything so you need to escape it, or you will strip first 4 symbols from `wwwiscool.com` and you probably don&#39;t want that. And you probably want to replace only the first matching prefix.\r\n","title":"Java regex URL prefix removal","body":"<pre><code>newStr = str.replaceFirst(\"^(http://)?(www\\\\.)?\", \"\");\n</code></pre>\n\n<p>please note that <code>.</code> in regex means anything so you need to escape it, or you will strip first 4 symbols from <code>wwwiscool.com</code> and you probably don't want that. And you probably want to replace only the first matching prefix.</p>\n"},{"tags":[],"owner":{"account_id":11010140,"reputation":1058,"user_id":8087820,"display_name":"Bholendra Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679922466,"creation_date":1679922466,"answer_id":75856133,"question_id":28800913,"body_markdown":"   // removing http\r\n            val withOutHttp=contentUrl!!.split(&quot;//&quot;)[1]\r\n\r\n            // removing www.domain.com\r\n            val splitUrl: MutableList&lt;String&gt; = withOutHttp.split(&quot;/&quot;).toMutableList()\r\n            splitUrl.removeAt(0)    // removing the host\r\n\r\n            // adding array to string\r\n            contentUrl=splitUrl.joinToString(&quot;/&quot;)","title":"Java regex URL prefix removal","body":"<p>// removing http\nval withOutHttp=contentUrl!!.split(&quot;//&quot;)[1]</p>\n<pre><code>        // removing www.domain.com\n        val splitUrl: MutableList&lt;String&gt; = withOutHttp.split(&quot;/&quot;).toMutableList()\n        splitUrl.removeAt(0)    // removing the host\n\n        // adding array to string\n        contentUrl=splitUrl.joinToString(&quot;/&quot;)\n</code></pre>\n"}],"owner":{"account_id":5029352,"reputation":3015,"user_id":4040102,"accept_rate":82,"display_name":"VeLKerr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2465,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":28801041,"answer_count":3,"score":0,"last_activity_date":1679922466,"creation_date":1425255362,"question_id":28800913,"body_markdown":"I have a set of URLs. Some of them have a string `www` as substring and some of them haven&#39;t. I need to remove prefixes in each URL. \r\nI tried remove this prefixes using many variants of regexp:\r\n\r\n    newStr = str.replaceAll(&quot;http://|http://www.&quot;, &quot;&quot;);\r\n    newStr = str.replaceAll(&quot;^http://|http://www.$&quot;, &quot;&quot;);\r\n    newStr = str.replaceAll(&quot;http://|http://www.&quot;, &quot;&quot;);\r\nwhere `str` - is an inputted URL string, and `newStr` is the URL after replacement.\r\nEach of these variants replaces only `http://` prefix, but `www.` remains in result. How I can change my regexp to remove `http://` string as well as `http://www.` string?\r\n\r\nI know that I can use `replaceAll()` twice:\r\n\r\n    newStr = str.replaceAll(&quot;http://&quot;, &quot;&quot;).replaceAll(&quot;www.&quot;, &quot;&quot;);\r\n\r\nBut what should I do to remain **one** `replaceAll()` and edit **only** the regular expression?","title":"Java regex URL prefix removal","body":"<p>I have a set of URLs. Some of them have a string <code>www</code> as substring and some of them haven't. I need to remove prefixes in each URL. \nI tried remove this prefixes using many variants of regexp:</p>\n\n<pre><code>newStr = str.replaceAll(\"http://|http://www.\", \"\");\nnewStr = str.replaceAll(\"^http://|http://www.$\", \"\");\nnewStr = str.replaceAll(\"http://|http://www.\", \"\");\n</code></pre>\n\n<p>where <code>str</code> - is an inputted URL string, and <code>newStr</code> is the URL after replacement.\nEach of these variants replaces only <code>http://</code> prefix, but <code>www.</code> remains in result. How I can change my regexp to remove <code>http://</code> string as well as <code>http://www.</code> string?</p>\n\n<p>I know that I can use <code>replaceAll()</code> twice:</p>\n\n<pre><code>newStr = str.replaceAll(\"http://\", \"\").replaceAll(\"www.\", \"\");\n</code></pre>\n\n<p>But what should I do to remain <strong>one</strong> <code>replaceAll()</code> and edit <strong>only</strong> the regular expression?</p>\n"},{"tags":["java","android","multithreading"],"comments":[{"owner":{"account_id":16044057,"reputation":175,"user_id":11579733,"display_name":"Ashish Datley"},"score":0,"creation_date":1679432231,"post_id":75804968,"comment_id":133720875,"body_markdown":"i want achieving textview color should be change of all textview parallelly/uniformly  at same time please help me","body":"i want achieving textview color should be change of all textview parallelly/uniformly  at same time please help me"},{"owner":{"account_id":21896421,"reputation":187,"user_id":17846979,"display_name":"RandomLonelyDev"},"score":0,"creation_date":1679573901,"post_id":75804968,"comment_id":133747669,"body_markdown":"Where in the program are you retrieving data? if that is also on the main thread, try moving it to a background thread.","body":"Where in the program are you retrieving data? if that is also on the main thread, try moving it to a background thread."},{"owner":{"account_id":16044057,"reputation":175,"user_id":11579733,"display_name":"Ashish Datley"},"score":0,"creation_date":1679579647,"post_id":75804968,"comment_id":133749341,"body_markdown":"i have update code with comments please see once again mention where i am retrieving data from firebase and where i am trying to set background color for instant basically trying to achieve change background color  of all text view whenever it update or change values  at same time but its changing only any one text view color randomly","body":"i have update code with comments please see once again mention where i am retrieving data from firebase and where i am trying to set background color for instant basically trying to achieve change background color  of all text view whenever it update or change values  at same time but its changing only any one text view color randomly"},{"owner":{"account_id":21896421,"reputation":187,"user_id":17846979,"display_name":"RandomLonelyDev"},"score":0,"creation_date":1679580095,"post_id":75804968,"comment_id":133749499,"body_markdown":"Have you checked to make sure you are receiving all the data?  If you are, then might I suggest looking into kotlin coroutines?","body":"Have you checked to make sure you are receiving all the data?  If you are, then might I suggest looking into kotlin coroutines?"},{"owner":{"account_id":16044057,"reputation":175,"user_id":11579733,"display_name":"Ashish Datley"},"score":0,"creation_date":1679601265,"post_id":75804968,"comment_id":133755329,"body_markdown":"yes am receiving all data application working fine but all doing on main thread i think and  i want to change background color according vale decease or increase at that time only rest of time should be default color value","body":"yes am receiving all data application working fine but all doing on main thread i think and  i want to change background color according vale decease or increase at that time only rest of time should be default color value"}],"owner":{"account_id":16044057,"reputation":175,"user_id":11579733,"display_name":"Ashish Datley"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679921955,"creation_date":1679422448,"question_id":75804968,"body_markdown":"I am trying to change background color Whenever Text view update but due to updating multiple text view background application stuck and not working due to main thread doing so much working can you help me here is my code how i can execute parallel without stuck application in android? \r\nNote; getting live data from Realtime database when OnStar(); method calls\r\n```\r\n \r\n                  @Override\r\n        public void onStart () {\r\n        super.onStart();\r\n\r\n//retriving data from firebase from here to \r\n\r\n        myRef.addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n            try {\r\n\r\n\r\n\r\n                             gold9999rate = dataSnapshot.child(&quot;gold9999&quot;).getValue().toString();\r\n                            //tempgold9999=gold9999rate;\r\n                             gold9950rate = dataSnapshot.child(&quot;gold9950&quot;).getValue().toString();\r\n\r\n                             silver9999rate = dataSnapshot.child(&quot;silver9999&quot;).getValue().toString();\r\n                             silver9950rate = dataSnapshot.child(&quot;silver99&quot;).getValue().toString();\r\n\r\n                             goldcomexbuyrate = dataSnapshot.child(&quot;goldcomexbuy&quot;).getValue().toString();\r\n                             goldcomexsellrate = dataSnapshot.child(&quot;goldcomexsell&quot;).getValue().toString();\r\n                             goldcomexhighrate = dataSnapshot.child(&quot;goldcomexhigh&quot;).getValue().toString();\r\n                             goldcomexlowrate = dataSnapshot.child(&quot;goldcomexlow&quot;).getValue().toString();\r\n\r\n                            silvercomexbuyrate = dataSnapshot.child(&quot;silvercomexbuy&quot;).getValue().toString();\r\n                            silvercomexsellrate = dataSnapshot.child(&quot;silvercomexsell&quot;).getValue().toString();\r\n                            silvercomexhighrate = dataSnapshot.child(&quot;silvercomexhigh&quot;).getValue().toString();\r\n                            silvercomexlowrate = dataSnapshot.child(&quot;silvercomexlow&quot;).getValue().toString();\r\n\r\n                            inrcomexbuyrate = dataSnapshot.child(&quot;inrcomexbuy&quot;).getValue().toString();\r\n                            inrcomexsellrate = dataSnapshot.child(&quot;inrcomexsell&quot;).getValue().toString();\r\n                            inrcomexhighrate = dataSnapshot.child(&quot;inrcomexhigh&quot;).getValue().toString();\r\n                            inrcomexlowrate = dataSnapshot.child(&quot;inrcomexlow&quot;).getValue().toString();\r\n\r\n                            goldmcxbuyrate = dataSnapshot.child(&quot;goldmcxbuy&quot;).getValue().toString();\r\n                            goldmcxsellrate = dataSnapshot.child(&quot;goldmcxsell&quot;).getValue().toString();\r\n                            goldmcxhighrate = dataSnapshot.child(&quot;goldmcxhigh&quot;).getValue().toString();\r\n                            goldmcxlowrate = dataSnapshot.child(&quot;goldmcxlow&quot;).getValue().toString();\r\n\r\n                            silvermcxbuyrate = dataSnapshot.child(&quot;silvermcxbuy&quot;).getValue().toString();\r\n                            silvermcxsellrate = dataSnapshot.child(&quot;silvermcxsell&quot;).getValue().toString();\r\n                            silvermcxhighrate = dataSnapshot.child(&quot;silvermcxhigh&quot;).getValue().toString();\r\n                            silvermcxlowrate = dataSnapshot.child(&quot;silvermcxlow&quot;).getValue().toString();\r\n\r\n//till here then after \r\n//from here i am setting on textview  \r\n                            gold9999.setText(gold9999rate);\r\n\r\n\r\n                            gold9950.setText(gold9950rate);\r\n\r\n                            silver9999.setText(silver9999rate);\r\n                            silver9950.setText(silver9950rate);\r\n                            goldcomexbuy.setText(goldcomexbuyrate);\r\n\r\n\r\n                            goldcomexsell.setText(goldcomexsellrate);\r\n\r\n\r\n                            goldcomexhighlow.setText(goldcomexhighrate + &quot;/&quot; + goldcomexlowrate);\r\n\r\n                            silvercomexbuy.setText(silvercomexbuyrate);\r\n                            silvercomexsell.setText(silvercomexsellrate);\r\n                            silvercomexhighlow.setText(silvercomexhighrate + &quot;/&quot; + silvercomexlowrate);\r\n\r\n                            inrcomexbuy.setText(inrcomexbuyrate);\r\n                            inrcomexsell.setText(inrcomexsellrate);\r\n                            inrcomexhighlow.setText(inrcomexhighrate + &quot;/&quot; + inrcomexlowrate);\r\n\r\n                            mcxgoldbuy.setText(goldmcxbuyrate);\r\n                            mcxgoldsell.setText(goldmcxsellrate);\r\n                            mcxgoldhighlow.setText(goldmcxhighrate + &quot;/&quot; + goldmcxlowrate);\r\n\r\n                            mcxsilverbuy.setText(silvermcxbuyrate);\r\n                            mcxsilversell.setText(silvermcxsellrate);\r\n                            mcxsilverhighlow.setText(silvermcxhighrate + &quot;/&quot; + silvermcxlowrate);\r\n\r\n//till here now after i am trying to convert string value into integer &amp; float after store value in static previous vales compare with next coming values \r\n//here i am trying to using thread for run and  update background with colors \r\n//here i want to achieve change background color without lagg or stuck applcation while changing background color  \r\n  Thread t = new Thread(new Runnable() {\r\n                    public void run() {\r\n\r\n                            prevgold9999 = Integer.parseInt(gold9999rate);\r\n                            prevgold9950 = Integer.parseInt(gold9950rate);\r\n                            prevsilver9999 = Integer.parseInt(silver9999rate);\r\n                            prevsilver9950 = Integer.parseInt(silver9950rate);\r\n                            prevmcxgoldbuy = Integer.parseInt(goldmcxbuyrate);\r\n                            prevmcxgoldsell = Integer.parseInt(goldmcxsellrate);\r\n                            prevmcxsilverbuy = Integer.parseInt(silvermcxbuyrate);\r\n                            prevmcxsilversell = Integer.parseInt(silvermcxsellrate);\r\n                            prevgoldcomexbuy = Float.parseFloat(goldcomexbuyrate);\r\n                            prevgoldcomexsell = Float.parseFloat(goldcomexsellrate);\r\n                            prevsilvercomexbuy = Float.parseFloat(silvercomexbuyrate);\r\n                            prevsilvercomexsell = Float.parseFloat(silvercomexsellrate);\r\n                            previnrcomexbuy = Float.parseFloat(inrcomexbuyrate);\r\n                            previnrcomexsell = Float.parseFloat(inrcomexsellrate);\r\n\r\n                            \r\n\r\n                int nextgold9999=Integer.parseInt(gold9999rate);\r\n                int nextgold9950=Integer.parseInt(gold9950rate);\r\n                int nextsilver9999=Integer.parseInt(silver9999rate);\r\n                int nextsilver9950=Integer.parseInt(silver9950rate);\r\n                int nextmcxgoldbuy=Integer.parseInt(goldmcxbuyrate);\r\n                int nextmcxgoldsell=Integer.parseInt(goldmcxsellrate);\r\n                int nextmcxsilverbuy=Integer.parseInt(silvermcxbuyrate);\r\n                int nextmcxsilversell=Integer.parseInt(silvermcxsellrate);\r\n                float nextgoldcomexbuy= Float.parseFloat(goldcomexbuyrate);\r\n                float nextgoldcomexsell=Float.parseFloat(goldcomexsellrate);\r\n                float nextsilvercomexbuy=Float.parseFloat(silvercomexbuyrate);\r\n                float nextsilvercomexsell=Float.parseFloat(silvercomexsellrate);\r\n                float nextinrcomexbuy=Float.parseFloat(inrcomexbuyrate);\r\n                float  nextinrcomexsell=Float.parseFloat(inrcomexsellrate);\r\n\r\n\r\n                  \r\n requireActivity().runOnUiThread(new Runnable() {\r\n                            public void run() {\r\n\r\n                     \r\n                        gold9999.addTextChangedListener(new TextWatcher() {\r\n                            @Override\r\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                                if (nextgold9999 &gt; prevgold9999) {\r\n                                 \r\n                                    gold9999.setBackgroundColor(getResources().getColor(R.color.rate_green));\r\n                                } else if (nextgold9999 &lt; prevgold9999) {\r\n                                    gold9999.setBackgroundColor(getResources().getColor(R.color.red));\r\n\r\n                                } else if (nextgold9999 == prevgold9999) {\r\n                                    gold9999.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\r\n                                    // \r\n                                }\r\n                                prevgold9999 = nextgold9999;\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void afterTextChanged(Editable editable) {\r\n\r\n                            }\r\n                        });\r\n\r\n                        gold9950.addTextChangedListener(new TextWatcher() {\r\n                            @Override\r\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                                if (nextgold9950 &gt; prevgold9950) {\r\n                                    gold9950.setBackgroundColor(getResources().getColor(R.color.rate_green));\r\n          \r\n                                } else if (nextgold9950 &lt; prevgold9950) {\r\n                                    gold9950.setBackgroundColor(getResources().getColor(R.color.red));\r\n                                    \r\n                                } else if (nextgold9950 == prevgold9950) {\r\n                                    gold9950.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\r\n                                    \r\n                                }\r\n                                prevgold9950 = nextgold9950;\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void afterTextChanged(Editable editable) {\r\n\r\n                            }\r\n                        });\r\n\r\n                        silver9999.addTextChangedListener(new TextWatcher() {\r\n                            @Override\r\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                                if (nextsilver9999 &gt; prevsilver9999) {\r\n                                    silver9999.setBackgroundColor(getResources().getColor(R.color.rate_green));\r\n                                    // \r\n                                } else if (nextsilver9999 &lt; prevsilver9999) {\r\n                                    silver9999.setBackgroundColor(getResources().getColor(R.color.red));\r\n                                    \r\n                                } else if (nextsilver9999 == prevsilver9999) {\r\n                                    silver9999.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\r\n                                   \r\n                                }\r\n                                prevsilver9999 = nextsilver9999;\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void afterTextChanged(Editable editable) {\r\n\r\n                            }\r\n                        });\r\n\r\n                        silver9950.addTextChangedListener(new TextWatcher() {\r\n                            @Override\r\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                                if (nextsilver9950 &gt; prevsilver9950) {\r\n                                    silver9950.setBackgroundColor(getResources().getColor(R.color.rate_green));\r\n                                   \r\n                                } else if (nextsilver9950 &lt; prevsilver9950) {\r\n                                    silver9950.setBackgroundColor(getResources().getColor(R.color.red));\r\n                                    \r\n                                } else if (nextsilver9950 == prevsilver9950) {\r\n                                    silver9950.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\r\n                                    \r\n                                }\r\n                                prevsilver9950 = nextsilver9950;\r\n                            }\r\n\r\n                            @Override\r\n                            public void afterTextChanged(Editable editable) {\r\n\r\n                            }\r\n                        });\r\n\r\n                        mcxgoldbuy.addTextChangedListener(new TextWatcher() {\r\n                            @Override\r\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                                if (nextmcxgoldbuy &gt; prevmcxgoldbuy) {\r\n                                    mcxgoldbuy.setBackgroundColor(getResources().getColor(R.color.rate_green));\r\n                                    \r\n                                } else if (nextmcxgoldbuy &lt; prevmcxgoldbuy) {\r\n                                    mcxgoldbuy.setBackgroundColor(getResources().getColor(R.color.red));\r\n                                    \r\n                                } else if (nextmcxgoldbuy == prevmcxgoldbuy) {\r\n                                    mcxgoldbuy.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\r\n                                    \r\n                                }\r\n                                prevmcxgoldbuy = nextmcxgoldbuy;\r\n                            }\r\n\r\n                            @Override\r\n                            public void afterTextChanged(Editable editable) {\r\n\r\n                            }\r\n                        });\r\n\r\n                        mcxgoldsell.addTextChangedListener(new TextWatcher() {\r\n                            @Override\r\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                                if (nextmcxgoldsell &gt; prevmcxgoldsell) {\r\n                                    mcxgoldsell.setBackgroundColor(getResources().getColor(R.color.rate_green));\r\n                                    \r\n                                } else if (nextmcxgoldsell &lt; prevmcxgoldsell) {\r\n                                    mcxgoldsell.setBackgroundColor(getResources().getColor(R.color.red));\r\n                                    \r\n                                } else if (nextmcxgoldsell == prevmcxgoldsell) {\r\n                                    mcxgoldsell.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\r\n                                    \r\n                                }\r\n                                prevmcxgoldsell = nextmcxgoldsell;\r\n                            }\r\n\r\n                            @Override\r\n                            public void afterTextChanged(Editable editable) {\r\n\r\n                            }\r\n                        });\r\n\r\n\r\n                        mcxsilverbuy.addTextChangedListener(new TextWatcher() {\r\n                            @Override\r\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                                if (nextmcxsilverbuy &gt; prevmcxsilverbuy) {\r\n                                    mcxsilverbuy.setBackgroundColor(getResources().getColor(R.color.rate_green));\r\n                                    \r\n                                } else if (nextmcxsilverbuy &lt; prevmcxsilverbuy) {\r\n                                    mcxsilverbuy.setBackgroundColor(getResources().getColor(R.color.red));\r\n                                    \r\n                                } else if (nextmcxsilverbuy == prevmcxsilverbuy) {\r\n                                    mcxsilverbuy.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\r\n                                    \r\n                                }\r\n                                prevmcxsilverbuy = nextmcxsilverbuy;\r\n                            }\r\n\r\n                            @Override\r\n                            public void afterTextChanged(Editable editable) {\r\n\r\n                            }\r\n                        });\r\n\r\n                        mcxsilversell.addTextChangedListener(new TextWatcher() {\r\n                            @Override\r\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                                if (nextmcxsilversell &gt; prevmcxsilversell) {\r\n                                    mcxsilversell.setBackgroundColor(getResources().getColor(R.color.rate_green));\r\n                                    \r\n                                } else if (nextmcxsilversell &lt; prevmcxsilversell) {\r\n                                    mcxsilversell.setBackgroundColor(getResources().getColor(R.color.red));\r\n                                    \r\n                                } else if (nextmcxsilversell == prevmcxsilversell) {\r\n                                    mcxsilversell.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\r\n                                    \r\n                                }\r\n                                prevmcxsilversell = nextmcxsilversell;\r\n                            }\r\n\r\n                            @Override\r\n                            public void afterTextChanged(Editable editable) {\r\n\r\n                            }\r\n                        });\r\n\r\n                        goldcomexbuy.addTextChangedListener(new TextWatcher() {\r\n                            @Override\r\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                                if (nextgoldcomexbuy &gt; prevgoldcomexbuy) {\r\n                                    goldcomexbuy.setBackgroundColor(getResources().getColor(R.color.rate_green));\r\n                                    \r\n                                } else if (nextgoldcomexbuy &lt; prevgoldcomexbuy) {\r\n                                    goldcomexbuy.setBackgroundColor(getResources().getColor(R.color.red));\r\n                                  \r\n                                } else if (nextgoldcomexbuy == prevgoldcomexbuy) {\r\n                                    goldcomexbuy.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\r\n                                    \r\n                                }\r\n                                prevgoldcomexbuy = nextgoldcomexbuy;\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void afterTextChanged(Editable editable) {\r\n\r\n                            }\r\n                        });\r\n\r\n\r\n                        goldcomexsell.addTextChangedListener(new TextWatcher() {\r\n                            @Override\r\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                                if (nextgoldcomexsell &gt; prevgoldcomexsell) {\r\n                                    goldcomexsell.setBackgroundColor(getResources().getColor(R.color.rate_green));\r\n                                    \r\n                                } else if (nextgoldcomexsell &lt; prevgoldcomexsell) {\r\n                                    goldcomexsell.setBackgroundColor(getResources().getColor(R.color.red));\r\n                                    \r\n                                } else if (nextgoldcomexsell == prevgoldcomexsell) {\r\n                                    goldcomexsell.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\r\n                                    \r\n                                }\r\n                                prevgoldcomexsell = nextgoldcomexsell;\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void afterTextChanged(Editable editable) {\r\n\r\n                            }\r\n                        });\r\n\r\n                        silvercomexbuy.addTextChangedListener(new TextWatcher() {\r\n                            @Override\r\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                                if (nextsilvercomexbuy &gt; prevsilvercomexbuy) {\r\n                                    silvercomexbuy.setBackgroundColor(getResources().getColor(R.color.rate_green));\r\n                                    \r\n                                } else if (nextsilvercomexbuy &lt; prevsilvercomexbuy) {\r\n                                    silvercomexbuy.setBackgroundColor(getResources().getColor(R.color.red));\r\n                                    \r\n                                } else if (nextsilvercomexbuy == prevsilvercomexbuy) {\r\n                                    silvercomexbuy.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\r\n                                    \r\n                                }\r\n                                prevsilvercomexbuy = nextsilvercomexbuy;\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void afterTextChanged(Editable editable) {\r\n\r\n                            }\r\n                        });\r\n\r\n                        silvercomexsell.addTextChangedListener(new TextWatcher() {\r\n                            @Override\r\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                                if (nextsilvercomexsell &gt; prevsilvercomexsell) {\r\n                                    silvercomexsell.setBackgroundColor(getResources().getColor(R.color.rate_green));\r\n                                    \r\n                                } else if (nextsilvercomexsell &lt; prevsilvercomexsell) {\r\n                                    silvercomexsell.setBackgroundColor(getResources().getColor(R.color.red));\r\n\r\n 1. `List item`\r\n\r\n                                    \r\n                                } else if (nextsilvercomexsell == prevsilvercomexsell) {\r\n                                    silvercomexsell.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\r\n                                    \r\n                                }\r\n                                prevsilvercomexsell = nextsilvercomexsell;\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void afterTextChanged(Editable editable) {\r\n\r\n                            }\r\n                        });\r\n\r\n                        inrcomexbuy.addTextChangedListener(new TextWatcher() {\r\n                            @Override\r\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                                if (nextinrcomexbuy &gt; previnrcomexbuy) {\r\n                                    inrcomexbuy.setBackgroundColor(getResources().getColor(R.color.rate_green));\r\n                                    \r\n                                } else if (nextinrcomexbuy &lt; previnrcomexbuy) {\r\n                                    inrcomexbuy.setBackgroundColor(getResources().getColor(R.color.red));\r\n                                    \r\n                                } else if (nextinrcomexbuy == previnrcomexbuy) {\r\n                                    inrcomexbuy.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\r\n                                                                    }\r\n                                previnrcomexbuy = nextinrcomexbuy;\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void afterTextChanged(Editable editable) {\r\n\r\n                            }\r\n                        });\r\n\r\n                        inrcomexsell.addTextChangedListener(new TextWatcher() {\r\n                            @Override\r\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n                                if (nextinrcomexsell &gt; previnrcomexsell) {\r\n                                    inrcomexsell.setBackgroundColor(getResources().getColor(R.color.rate_green));\r\n                                    \r\n                                } else if (nextinrcomexsell &lt; previnrcomexsell) {\r\n                                    inrcomexsell.setBackgroundColor(getResources().getColor(R.color.red));\r\n                                    \r\n                                } else if (nextinrcomexsell == previnrcomexsell) {\r\n                                    inrcomexsell.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\r\n                                    \r\n                                }\r\n                                previnrcomexsell = nextinrcomexsell;\r\n\r\n                            }\r\n\r\n                            @Override\r\n                            public void afterTextChanged(Editable editable) {\r\n\r\n                            }\r\n                        });\r\n              }\r\n                        \r\n                });\r\n\r\n                    }\r\n                     });\r\n                        t.start();\r\n\r\n\r\n\r\n            }catch (Exception e){\r\n\r\n                e.printStackTrace();\r\n\r\n\r\n            }\r\n\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError databaseError) {\r\n                    Log.i(&quot;TAP&quot;,&quot;something wrong&quot;);\r\n                    String err=databaseError.toString();\r\n                    Toast toast=Toast.makeText(getContext(), err, Toast.LENGTH_SHORT);\r\n                    toast.setMargin(50,50);\r\n                    toast.show();\r\n\r\n                }\r\n            });\r\n\r\n        }       \r\n```","title":"How to change or trigger back ground color whenever multiple text view change/update Asynchronies?","body":"<p>I am trying to change background color Whenever Text view update but due to updating multiple text view background application stuck and not working due to main thread doing so much working can you help me here is my code how i can execute parallel without stuck application in android?\nNote; getting live data from Realtime database when OnStar(); method calls</p>\n<pre><code> \n                  @Override\n        public void onStart () {\n        super.onStart();\n\n//retriving data from firebase from here to \n\n        myRef.addValueEventListener(new ValueEventListener() {\n                @Override\n                public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n            try {\n\n\n\n                             gold9999rate = dataSnapshot.child(&quot;gold9999&quot;).getValue().toString();\n                            //tempgold9999=gold9999rate;\n                             gold9950rate = dataSnapshot.child(&quot;gold9950&quot;).getValue().toString();\n\n                             silver9999rate = dataSnapshot.child(&quot;silver9999&quot;).getValue().toString();\n                             silver9950rate = dataSnapshot.child(&quot;silver99&quot;).getValue().toString();\n\n                             goldcomexbuyrate = dataSnapshot.child(&quot;goldcomexbuy&quot;).getValue().toString();\n                             goldcomexsellrate = dataSnapshot.child(&quot;goldcomexsell&quot;).getValue().toString();\n                             goldcomexhighrate = dataSnapshot.child(&quot;goldcomexhigh&quot;).getValue().toString();\n                             goldcomexlowrate = dataSnapshot.child(&quot;goldcomexlow&quot;).getValue().toString();\n\n                            silvercomexbuyrate = dataSnapshot.child(&quot;silvercomexbuy&quot;).getValue().toString();\n                            silvercomexsellrate = dataSnapshot.child(&quot;silvercomexsell&quot;).getValue().toString();\n                            silvercomexhighrate = dataSnapshot.child(&quot;silvercomexhigh&quot;).getValue().toString();\n                            silvercomexlowrate = dataSnapshot.child(&quot;silvercomexlow&quot;).getValue().toString();\n\n                            inrcomexbuyrate = dataSnapshot.child(&quot;inrcomexbuy&quot;).getValue().toString();\n                            inrcomexsellrate = dataSnapshot.child(&quot;inrcomexsell&quot;).getValue().toString();\n                            inrcomexhighrate = dataSnapshot.child(&quot;inrcomexhigh&quot;).getValue().toString();\n                            inrcomexlowrate = dataSnapshot.child(&quot;inrcomexlow&quot;).getValue().toString();\n\n                            goldmcxbuyrate = dataSnapshot.child(&quot;goldmcxbuy&quot;).getValue().toString();\n                            goldmcxsellrate = dataSnapshot.child(&quot;goldmcxsell&quot;).getValue().toString();\n                            goldmcxhighrate = dataSnapshot.child(&quot;goldmcxhigh&quot;).getValue().toString();\n                            goldmcxlowrate = dataSnapshot.child(&quot;goldmcxlow&quot;).getValue().toString();\n\n                            silvermcxbuyrate = dataSnapshot.child(&quot;silvermcxbuy&quot;).getValue().toString();\n                            silvermcxsellrate = dataSnapshot.child(&quot;silvermcxsell&quot;).getValue().toString();\n                            silvermcxhighrate = dataSnapshot.child(&quot;silvermcxhigh&quot;).getValue().toString();\n                            silvermcxlowrate = dataSnapshot.child(&quot;silvermcxlow&quot;).getValue().toString();\n\n//till here then after \n//from here i am setting on textview  \n                            gold9999.setText(gold9999rate);\n\n\n                            gold9950.setText(gold9950rate);\n\n                            silver9999.setText(silver9999rate);\n                            silver9950.setText(silver9950rate);\n                            goldcomexbuy.setText(goldcomexbuyrate);\n\n\n                            goldcomexsell.setText(goldcomexsellrate);\n\n\n                            goldcomexhighlow.setText(goldcomexhighrate + &quot;/&quot; + goldcomexlowrate);\n\n                            silvercomexbuy.setText(silvercomexbuyrate);\n                            silvercomexsell.setText(silvercomexsellrate);\n                            silvercomexhighlow.setText(silvercomexhighrate + &quot;/&quot; + silvercomexlowrate);\n\n                            inrcomexbuy.setText(inrcomexbuyrate);\n                            inrcomexsell.setText(inrcomexsellrate);\n                            inrcomexhighlow.setText(inrcomexhighrate + &quot;/&quot; + inrcomexlowrate);\n\n                            mcxgoldbuy.setText(goldmcxbuyrate);\n                            mcxgoldsell.setText(goldmcxsellrate);\n                            mcxgoldhighlow.setText(goldmcxhighrate + &quot;/&quot; + goldmcxlowrate);\n\n                            mcxsilverbuy.setText(silvermcxbuyrate);\n                            mcxsilversell.setText(silvermcxsellrate);\n                            mcxsilverhighlow.setText(silvermcxhighrate + &quot;/&quot; + silvermcxlowrate);\n\n//till here now after i am trying to convert string value into integer &amp; float after store value in static previous vales compare with next coming values \n//here i am trying to using thread for run and  update background with colors \n//here i want to achieve change background color without lagg or stuck applcation while changing background color  \n  Thread t = new Thread(new Runnable() {\n                    public void run() {\n\n                            prevgold9999 = Integer.parseInt(gold9999rate);\n                            prevgold9950 = Integer.parseInt(gold9950rate);\n                            prevsilver9999 = Integer.parseInt(silver9999rate);\n                            prevsilver9950 = Integer.parseInt(silver9950rate);\n                            prevmcxgoldbuy = Integer.parseInt(goldmcxbuyrate);\n                            prevmcxgoldsell = Integer.parseInt(goldmcxsellrate);\n                            prevmcxsilverbuy = Integer.parseInt(silvermcxbuyrate);\n                            prevmcxsilversell = Integer.parseInt(silvermcxsellrate);\n                            prevgoldcomexbuy = Float.parseFloat(goldcomexbuyrate);\n                            prevgoldcomexsell = Float.parseFloat(goldcomexsellrate);\n                            prevsilvercomexbuy = Float.parseFloat(silvercomexbuyrate);\n                            prevsilvercomexsell = Float.parseFloat(silvercomexsellrate);\n                            previnrcomexbuy = Float.parseFloat(inrcomexbuyrate);\n                            previnrcomexsell = Float.parseFloat(inrcomexsellrate);\n\n                            \n\n                int nextgold9999=Integer.parseInt(gold9999rate);\n                int nextgold9950=Integer.parseInt(gold9950rate);\n                int nextsilver9999=Integer.parseInt(silver9999rate);\n                int nextsilver9950=Integer.parseInt(silver9950rate);\n                int nextmcxgoldbuy=Integer.parseInt(goldmcxbuyrate);\n                int nextmcxgoldsell=Integer.parseInt(goldmcxsellrate);\n                int nextmcxsilverbuy=Integer.parseInt(silvermcxbuyrate);\n                int nextmcxsilversell=Integer.parseInt(silvermcxsellrate);\n                float nextgoldcomexbuy= Float.parseFloat(goldcomexbuyrate);\n                float nextgoldcomexsell=Float.parseFloat(goldcomexsellrate);\n                float nextsilvercomexbuy=Float.parseFloat(silvercomexbuyrate);\n                float nextsilvercomexsell=Float.parseFloat(silvercomexsellrate);\n                float nextinrcomexbuy=Float.parseFloat(inrcomexbuyrate);\n                float  nextinrcomexsell=Float.parseFloat(inrcomexsellrate);\n\n\n                  \n requireActivity().runOnUiThread(new Runnable() {\n                            public void run() {\n\n                     \n                        gold9999.addTextChangedListener(new TextWatcher() {\n                            @Override\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                            }\n\n                            @Override\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                                if (nextgold9999 &gt; prevgold9999) {\n                                 \n                                    gold9999.setBackgroundColor(getResources().getColor(R.color.rate_green));\n                                } else if (nextgold9999 &lt; prevgold9999) {\n                                    gold9999.setBackgroundColor(getResources().getColor(R.color.red));\n\n                                } else if (nextgold9999 == prevgold9999) {\n                                    gold9999.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\n                                    // \n                                }\n                                prevgold9999 = nextgold9999;\n\n                            }\n\n                            @Override\n                            public void afterTextChanged(Editable editable) {\n\n                            }\n                        });\n\n                        gold9950.addTextChangedListener(new TextWatcher() {\n                            @Override\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                            }\n\n                            @Override\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                                if (nextgold9950 &gt; prevgold9950) {\n                                    gold9950.setBackgroundColor(getResources().getColor(R.color.rate_green));\n          \n                                } else if (nextgold9950 &lt; prevgold9950) {\n                                    gold9950.setBackgroundColor(getResources().getColor(R.color.red));\n                                    \n                                } else if (nextgold9950 == prevgold9950) {\n                                    gold9950.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\n                                    \n                                }\n                                prevgold9950 = nextgold9950;\n\n                            }\n\n                            @Override\n                            public void afterTextChanged(Editable editable) {\n\n                            }\n                        });\n\n                        silver9999.addTextChangedListener(new TextWatcher() {\n                            @Override\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                            }\n\n                            @Override\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                                if (nextsilver9999 &gt; prevsilver9999) {\n                                    silver9999.setBackgroundColor(getResources().getColor(R.color.rate_green));\n                                    // \n                                } else if (nextsilver9999 &lt; prevsilver9999) {\n                                    silver9999.setBackgroundColor(getResources().getColor(R.color.red));\n                                    \n                                } else if (nextsilver9999 == prevsilver9999) {\n                                    silver9999.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\n                                   \n                                }\n                                prevsilver9999 = nextsilver9999;\n\n                            }\n\n                            @Override\n                            public void afterTextChanged(Editable editable) {\n\n                            }\n                        });\n\n                        silver9950.addTextChangedListener(new TextWatcher() {\n                            @Override\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                            }\n\n                            @Override\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                                if (nextsilver9950 &gt; prevsilver9950) {\n                                    silver9950.setBackgroundColor(getResources().getColor(R.color.rate_green));\n                                   \n                                } else if (nextsilver9950 &lt; prevsilver9950) {\n                                    silver9950.setBackgroundColor(getResources().getColor(R.color.red));\n                                    \n                                } else if (nextsilver9950 == prevsilver9950) {\n                                    silver9950.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\n                                    \n                                }\n                                prevsilver9950 = nextsilver9950;\n                            }\n\n                            @Override\n                            public void afterTextChanged(Editable editable) {\n\n                            }\n                        });\n\n                        mcxgoldbuy.addTextChangedListener(new TextWatcher() {\n                            @Override\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                            }\n\n                            @Override\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                                if (nextmcxgoldbuy &gt; prevmcxgoldbuy) {\n                                    mcxgoldbuy.setBackgroundColor(getResources().getColor(R.color.rate_green));\n                                    \n                                } else if (nextmcxgoldbuy &lt; prevmcxgoldbuy) {\n                                    mcxgoldbuy.setBackgroundColor(getResources().getColor(R.color.red));\n                                    \n                                } else if (nextmcxgoldbuy == prevmcxgoldbuy) {\n                                    mcxgoldbuy.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\n                                    \n                                }\n                                prevmcxgoldbuy = nextmcxgoldbuy;\n                            }\n\n                            @Override\n                            public void afterTextChanged(Editable editable) {\n\n                            }\n                        });\n\n                        mcxgoldsell.addTextChangedListener(new TextWatcher() {\n                            @Override\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                            }\n\n                            @Override\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                                if (nextmcxgoldsell &gt; prevmcxgoldsell) {\n                                    mcxgoldsell.setBackgroundColor(getResources().getColor(R.color.rate_green));\n                                    \n                                } else if (nextmcxgoldsell &lt; prevmcxgoldsell) {\n                                    mcxgoldsell.setBackgroundColor(getResources().getColor(R.color.red));\n                                    \n                                } else if (nextmcxgoldsell == prevmcxgoldsell) {\n                                    mcxgoldsell.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\n                                    \n                                }\n                                prevmcxgoldsell = nextmcxgoldsell;\n                            }\n\n                            @Override\n                            public void afterTextChanged(Editable editable) {\n\n                            }\n                        });\n\n\n                        mcxsilverbuy.addTextChangedListener(new TextWatcher() {\n                            @Override\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                            }\n\n                            @Override\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                                if (nextmcxsilverbuy &gt; prevmcxsilverbuy) {\n                                    mcxsilverbuy.setBackgroundColor(getResources().getColor(R.color.rate_green));\n                                    \n                                } else if (nextmcxsilverbuy &lt; prevmcxsilverbuy) {\n                                    mcxsilverbuy.setBackgroundColor(getResources().getColor(R.color.red));\n                                    \n                                } else if (nextmcxsilverbuy == prevmcxsilverbuy) {\n                                    mcxsilverbuy.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\n                                    \n                                }\n                                prevmcxsilverbuy = nextmcxsilverbuy;\n                            }\n\n                            @Override\n                            public void afterTextChanged(Editable editable) {\n\n                            }\n                        });\n\n                        mcxsilversell.addTextChangedListener(new TextWatcher() {\n                            @Override\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                            }\n\n                            @Override\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                                if (nextmcxsilversell &gt; prevmcxsilversell) {\n                                    mcxsilversell.setBackgroundColor(getResources().getColor(R.color.rate_green));\n                                    \n                                } else if (nextmcxsilversell &lt; prevmcxsilversell) {\n                                    mcxsilversell.setBackgroundColor(getResources().getColor(R.color.red));\n                                    \n                                } else if (nextmcxsilversell == prevmcxsilversell) {\n                                    mcxsilversell.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\n                                    \n                                }\n                                prevmcxsilversell = nextmcxsilversell;\n                            }\n\n                            @Override\n                            public void afterTextChanged(Editable editable) {\n\n                            }\n                        });\n\n                        goldcomexbuy.addTextChangedListener(new TextWatcher() {\n                            @Override\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                            }\n\n                            @Override\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                                if (nextgoldcomexbuy &gt; prevgoldcomexbuy) {\n                                    goldcomexbuy.setBackgroundColor(getResources().getColor(R.color.rate_green));\n                                    \n                                } else if (nextgoldcomexbuy &lt; prevgoldcomexbuy) {\n                                    goldcomexbuy.setBackgroundColor(getResources().getColor(R.color.red));\n                                  \n                                } else if (nextgoldcomexbuy == prevgoldcomexbuy) {\n                                    goldcomexbuy.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\n                                    \n                                }\n                                prevgoldcomexbuy = nextgoldcomexbuy;\n\n                            }\n\n                            @Override\n                            public void afterTextChanged(Editable editable) {\n\n                            }\n                        });\n\n\n                        goldcomexsell.addTextChangedListener(new TextWatcher() {\n                            @Override\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                            }\n\n                            @Override\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                                if (nextgoldcomexsell &gt; prevgoldcomexsell) {\n                                    goldcomexsell.setBackgroundColor(getResources().getColor(R.color.rate_green));\n                                    \n                                } else if (nextgoldcomexsell &lt; prevgoldcomexsell) {\n                                    goldcomexsell.setBackgroundColor(getResources().getColor(R.color.red));\n                                    \n                                } else if (nextgoldcomexsell == prevgoldcomexsell) {\n                                    goldcomexsell.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\n                                    \n                                }\n                                prevgoldcomexsell = nextgoldcomexsell;\n\n                            }\n\n                            @Override\n                            public void afterTextChanged(Editable editable) {\n\n                            }\n                        });\n\n                        silvercomexbuy.addTextChangedListener(new TextWatcher() {\n                            @Override\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                            }\n\n                            @Override\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                                if (nextsilvercomexbuy &gt; prevsilvercomexbuy) {\n                                    silvercomexbuy.setBackgroundColor(getResources().getColor(R.color.rate_green));\n                                    \n                                } else if (nextsilvercomexbuy &lt; prevsilvercomexbuy) {\n                                    silvercomexbuy.setBackgroundColor(getResources().getColor(R.color.red));\n                                    \n                                } else if (nextsilvercomexbuy == prevsilvercomexbuy) {\n                                    silvercomexbuy.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\n                                    \n                                }\n                                prevsilvercomexbuy = nextsilvercomexbuy;\n\n                            }\n\n                            @Override\n                            public void afterTextChanged(Editable editable) {\n\n                            }\n                        });\n\n                        silvercomexsell.addTextChangedListener(new TextWatcher() {\n                            @Override\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                            }\n\n                            @Override\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                                if (nextsilvercomexsell &gt; prevsilvercomexsell) {\n                                    silvercomexsell.setBackgroundColor(getResources().getColor(R.color.rate_green));\n                                    \n                                } else if (nextsilvercomexsell &lt; prevsilvercomexsell) {\n                                    silvercomexsell.setBackgroundColor(getResources().getColor(R.color.red));\n\n 1. `List item`\n\n                                    \n                                } else if (nextsilvercomexsell == prevsilvercomexsell) {\n                                    silvercomexsell.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\n                                    \n                                }\n                                prevsilvercomexsell = nextsilvercomexsell;\n\n                            }\n\n                            @Override\n                            public void afterTextChanged(Editable editable) {\n\n                            }\n                        });\n\n                        inrcomexbuy.addTextChangedListener(new TextWatcher() {\n                            @Override\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                            }\n\n                            @Override\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                                if (nextinrcomexbuy &gt; previnrcomexbuy) {\n                                    inrcomexbuy.setBackgroundColor(getResources().getColor(R.color.rate_green));\n                                    \n                                } else if (nextinrcomexbuy &lt; previnrcomexbuy) {\n                                    inrcomexbuy.setBackgroundColor(getResources().getColor(R.color.red));\n                                    \n                                } else if (nextinrcomexbuy == previnrcomexbuy) {\n                                    inrcomexbuy.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\n                                                                    }\n                                previnrcomexbuy = nextinrcomexbuy;\n\n                            }\n\n                            @Override\n                            public void afterTextChanged(Editable editable) {\n\n                            }\n                        });\n\n                        inrcomexsell.addTextChangedListener(new TextWatcher() {\n                            @Override\n                            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                            }\n\n                            @Override\n                            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n\n                                if (nextinrcomexsell &gt; previnrcomexsell) {\n                                    inrcomexsell.setBackgroundColor(getResources().getColor(R.color.rate_green));\n                                    \n                                } else if (nextinrcomexsell &lt; previnrcomexsell) {\n                                    inrcomexsell.setBackgroundColor(getResources().getColor(R.color.red));\n                                    \n                                } else if (nextinrcomexsell == previnrcomexsell) {\n                                    inrcomexsell.setBackgroundColor(getResources().getColor(R.color.bg_navigation_gray));\n                                    \n                                }\n                                previnrcomexsell = nextinrcomexsell;\n\n                            }\n\n                            @Override\n                            public void afterTextChanged(Editable editable) {\n\n                            }\n                        });\n              }\n                        \n                });\n\n                    }\n                     });\n                        t.start();\n\n\n\n            }catch (Exception e){\n\n                e.printStackTrace();\n\n\n            }\n\n\n                }\n\n                @Override\n                public void onCancelled(@NonNull DatabaseError databaseError) {\n                    Log.i(&quot;TAP&quot;,&quot;something wrong&quot;);\n                    String err=databaseError.toString();\n                    Toast toast=Toast.makeText(getContext(), err, Toast.LENGTH_SHORT);\n                    toast.setMargin(50,50);\n                    toast.show();\n\n                }\n            });\n\n        }       \n</code></pre>\n"},{"tags":["java","bufferedreader","lines"],"answers":[{"tags":[],"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1412589422,"creation_date":1412589422,"answer_id":26213845,"question_id":26213837,"body_markdown":"You are reading the line twice..\r\n\r\n    while ((read = in.readLine()) != null) { // here\r\n                read = in.readLine();      // and here\r\n\r\n","title":"BufferedReader is skipping every other line when reading my file in java","body":"<p>You are reading the line twice..</p>\n\n<pre><code>while ((read = in.readLine()) != null) { // here\n            read = in.readLine();      // and here\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5133345,"reputation":450,"user_id":4112836,"display_name":"Tal.Bary"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1412589711,"creation_date":1412589711,"answer_id":26213919,"question_id":26213837,"body_markdown":"You have error here: \r\n\r\n    while ((read = in.readLine()) != null) \r\n     read = in.readLine();\r\n\r\nyou should keep the read = in.readLine() in the while. and remove the other line.\r\n\r\n\r\n","title":"BufferedReader is skipping every other line when reading my file in java","body":"<p>You have error here: </p>\n\n<pre><code>while ((read = in.readLine()) != null) \n read = in.readLine();\n</code></pre>\n\n<p>you should keep the read = in.readLine() in the while. and remove the other line.</p>\n"},{"tags":[],"owner":{"account_id":4669829,"reputation":55,"user_id":3781876,"display_name":"user3781876"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1412591472,"creation_date":1412590225,"answer_id":26214058,"question_id":26213837,"body_markdown":"pl try this  \r\n\r\nyou r using &quot;read = in.readLine())&quot; two times in while loop that why it is skiping the lomes\r\n\r\n  \r\n\r\n    public ArrayList&lt;String&gt; read(int checkDay, int checkMonth, int checkYear) {\r\n            ArrayList&lt;String&gt; events = new ArrayList&lt;String&gt;();\r\n            BufferedReader in = null;\r\n            String read;\r\n            try {\r\n                in = new BufferedReader(new FileReader(&quot;calendar.txt&quot;));\r\n                while ((read = in.readLine()) != null) {\r\n                        \r\n                    String[] split = read.split(&quot;,&quot;);\r\n                    System.out.println(read);\r\n        \r\n                    if (split[0].equals(Integer.toString(checkDay)) &amp;&amp; split[1].equals(Integer.toString(checkMonth)) &amp;&amp; split[2].equals(Integer.toString(checkYear))) {\r\n                        events.add(split[0] + &quot; : &quot; + split[1] + &quot;/&quot; + split[2] + &quot;/&quot; + split[3]);\r\n                    }\r\n        \r\n                }\r\n            } catch (IOException e) {\r\n                System.out.println(&quot;There was a problem: &quot; + e);\r\n                e.printStackTrace();\r\n        \r\n            } finally {\r\n                try {\r\n                    in.close();\r\n                } catch (Exception e) {\r\n                }\r\n        \r\n            }\r\n            return events;\r\n\r\n","title":"BufferedReader is skipping every other line when reading my file in java","body":"<p>pl try this  </p>\n\n<p>you r using \"read = in.readLine())\" two times in while loop that why it is skiping the lomes</p>\n\n<pre><code>public ArrayList&lt;String&gt; read(int checkDay, int checkMonth, int checkYear) {\n        ArrayList&lt;String&gt; events = new ArrayList&lt;String&gt;();\n        BufferedReader in = null;\n        String read;\n        try {\n            in = new BufferedReader(new FileReader(\"calendar.txt\"));\n            while ((read = in.readLine()) != null) {\n\n                String[] split = read.split(\",\");\n                System.out.println(read);\n\n                if (split[0].equals(Integer.toString(checkDay)) &amp;&amp; split[1].equals(Integer.toString(checkMonth)) &amp;&amp; split[2].equals(Integer.toString(checkYear))) {\n                    events.add(split[0] + \" : \" + split[1] + \"/\" + split[2] + \"/\" + split[3]);\n                }\n\n            }\n        } catch (IOException e) {\n            System.out.println(\"There was a problem: \" + e);\n            e.printStackTrace();\n\n        } finally {\n            try {\n                in.close();\n            } catch (Exception e) {\n            }\n\n        }\n        return events;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14064729,"reputation":111,"user_id":10159895,"display_name":"Jayant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679921665,"creation_date":1679921665,"answer_id":75856000,"question_id":26213837,"body_markdown":"may be usage of &quot;next()&quot; over &quot;nextLine()&quot; should resolve the issue:\r\n\r\n    System.out.println(&quot;Enter Emp ID: &quot;);\r\n\t\t\teid = scanner.nextInt();\r\n\r\n\t\t\tSystem.out.println(&quot;Enter Emp Name:&quot;);\r\n\t\t\tename = scanner.next();\r\n\r\n\t\t\tSystem.out.println(&quot;Enter Emp Salary:&quot;);\r\n\t\t\tesal = scanner.nextFloat();\r\n\r\n\t\t\tSystem.out.println(&quot;Enter Emp Address:&quot;);\r\n\t\t\teaddr = scanner.next();","title":"BufferedReader is skipping every other line when reading my file in java","body":"<p>may be usage of &quot;next()&quot; over &quot;nextLine()&quot; should resolve the issue:</p>\n<pre><code>System.out.println(&quot;Enter Emp ID: &quot;);\n        eid = scanner.nextInt();\n\n        System.out.println(&quot;Enter Emp Name:&quot;);\n        ename = scanner.next();\n\n        System.out.println(&quot;Enter Emp Salary:&quot;);\n        esal = scanner.nextFloat();\n\n        System.out.println(&quot;Enter Emp Address:&quot;);\n        eaddr = scanner.next();\n</code></pre>\n"}],"owner":{"account_id":5133318,"reputation":41,"user_id":4112812,"display_name":"Danny Radziewicz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9117,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":4,"score":4,"last_activity_date":1679921665,"creation_date":1412589379,"question_id":26213837,"body_markdown":"So Im working of reading a file containing appointments that I wrote to earlier in my code. I want to sift through the text file and find appointments on a certain date and add them to an ArrayList but when the BufferedReader goes through it, it skips ever other line... Heres my code\r\n\r\n    public ArrayList&lt;String&gt; read(int checkDay, int checkMonth, int checkYear) {\r\n\t\tArrayList&lt;String&gt; events = new ArrayList&lt;String&gt;();\r\n\t\tBufferedReader in = null;\r\n\t\tString read;\r\n\t\ttry {\r\n\t\t    in = new BufferedReader(new FileReader(&quot;calendar.txt&quot;));\r\n\t\t    while ((read = in.readLine()) != null) {\r\n\t\t        read = in.readLine();\r\n\t\t        \r\n\t\t        String[] split = read.split(&quot;,&quot;);\r\n\t\t        System.out.println(read);\r\n\t\t        \r\n\t\t        if (split[1].equals(Integer.toString(checkDay)) &amp;&amp; split[2].equals(Integer.toString(checkMonth)) &amp;&amp; split[3].equals(Integer.toString(checkYear))) {\r\n\t\t        \tevents.add(split[0] + &quot; : &quot; + split[1] + &quot;/&quot; + split[2] + &quot;/&quot; + split[3]);\r\n\t\t        }\r\n\t\t        \r\n\t\t    }\r\n\t\t} catch (IOException e) {\r\n\t\t    System.out.println(&quot;There was a problem: &quot; + e);\r\n\t\t    e.printStackTrace();\r\n\t\t    \r\n\t\t} finally {\r\n\t\t    try {\r\n\t\t        in.close();\r\n\t\t    } catch (Exception e) {\r\n\t\t    }\r\n\t\t    \r\n\t\t}\r\n\t\treturn events;\r\n\t}","title":"BufferedReader is skipping every other line when reading my file in java","body":"<p>So Im working of reading a file containing appointments that I wrote to earlier in my code. I want to sift through the text file and find appointments on a certain date and add them to an ArrayList but when the BufferedReader goes through it, it skips ever other line... Heres my code</p>\n\n<pre><code>public ArrayList&lt;String&gt; read(int checkDay, int checkMonth, int checkYear) {\n    ArrayList&lt;String&gt; events = new ArrayList&lt;String&gt;();\n    BufferedReader in = null;\n    String read;\n    try {\n        in = new BufferedReader(new FileReader(\"calendar.txt\"));\n        while ((read = in.readLine()) != null) {\n            read = in.readLine();\n\n            String[] split = read.split(\",\");\n            System.out.println(read);\n\n            if (split[1].equals(Integer.toString(checkDay)) &amp;&amp; split[2].equals(Integer.toString(checkMonth)) &amp;&amp; split[3].equals(Integer.toString(checkYear))) {\n                events.add(split[0] + \" : \" + split[1] + \"/\" + split[2] + \"/\" + split[3]);\n            }\n\n        }\n    } catch (IOException e) {\n        System.out.println(\"There was a problem: \" + e);\n        e.printStackTrace();\n\n    } finally {\n        try {\n            in.close();\n        } catch (Exception e) {\n        }\n\n    }\n    return events;\n}\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":3,"creation_date":1679920921,"post_id":75855842,"comment_id":133801997,"body_markdown":"It is not *hilarious* to have your code in a new line (I&#39;m sure most will agree). To make it readable, I&#39;ve edited your question, making it multi-line.","body":"It is not <i>hilarious</i> to have your code in a new line (I&#39;m sure most will agree). To make it readable, I&#39;ve edited your question, making it multi-line."},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":1,"creation_date":1679921085,"post_id":75855842,"comment_id":133802051,"body_markdown":"&quot;My plan was to make a new array that just contains the &#39;^&#39; char and then get the length of that array&quot; - why, if you can just count?","body":"&quot;My plan was to make a new array that just contains the &#39;^&#39; char and then get the length of that array&quot; - why, if you can just count?"},{"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"score":4,"creation_date":1679921093,"post_id":75855842,"comment_id":133802055,"body_markdown":"An _hilarious_ way to do it: [java 8 stream using filter and count](https://stackoverflow.com/questions/69401251/java-8-stream-using-filter-and-count)","body":"An <i>hilarious</i> way to do it: <a href=\"https://stackoverflow.com/questions/69401251/java-8-stream-using-filter-and-count\">java 8 stream using filter and count</a>"}],"answers":[{"tags":[],"owner":{"account_id":14543078,"reputation":396,"user_id":10504150,"display_name":"Dimon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679921435,"creation_date":1679921435,"answer_id":75855959,"question_id":75855842,"body_markdown":"If all you need is the number of &#39;^&#39; characters why not use `.count`?\r\n\r\n    long numberOfChars = IntStream.range(0, arr.length)\r\n        .mapToObj(i -&gt; arr[i])\r\n        .filter(n -&gt; n == &#39;^&#39;)\r\n        .count();","title":"how do I create a new char array with only certain elements from another char array using streams in java?","body":"<p>If all you need is the number of '^' characters why not use <code>.count</code>?</p>\n<pre><code>long numberOfChars = IntStream.range(0, arr.length)\n    .mapToObj(i -&gt; arr[i])\n    .filter(n -&gt; n == '^')\n    .count();\n</code></pre>\n"}],"owner":{"account_id":28137757,"reputation":1,"user_id":21501256,"display_name":"awc"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1679921561,"answer_count":1,"score":0,"last_activity_date":1679921435,"creation_date":1679920652,"question_id":75855842,"body_markdown":"I have an char array, and I want to get the number of the &#39;^&#39; char in that array. so if the array was `&#39;.&#39;, &#39;.&#39;, &#39;^&#39;, &#39;-&#39;, &#39;^&#39;` it would return 2. My plan was to make a new array that just contains the &#39;^&#39; char and then get the length of that array. I know this could be easily done with a for loop that loops over the array, but I think it would be cool to use streams as I&#39;ve just started learning about them and want more practice, and I think it would be hilarious to have a single massive line instead of a few lines for a for loop and if statement. (this code does not need to be readable)\r\n\r\nI have tried \r\n\r\n    char[] tentsInRow = IntStream.range(0, arr.length)\r\n        .filter(n -&gt; n == &#39;^&#39;)\r\n        .mapToObj(m -&gt; arr[m]).toArray();\r\nand\r\n\r\n    char[] tentsInRow = new String(getRow(i))\r\n        .chars()\r\n        .mapToObj(n -&gt; (char)n)\r\n        .filter(n -&gt; n.equals(&#39;^&#39;))\r\n        .toArray();\r\n\r\n`getRow(i)` returns a char array, and arr from the first line is the same thing\r\n\r\nboth of which give me the error: `Required type: char[] Provided: Object[]`\r\n\r\nI saw there was a toArray(`IntFunction&lt;a[]&gt; generator`) function I could use that I thought could work, but I wasn&#39;t sure how to use it.\r\n\r\nDoes anyone know how I can convert from an Object array to a char array in this line, or know any other way to do this with streams/lambdas? I can also just do it the boring way with a for loop, just thought this would be cool lol. First post here so go easy","title":"how do I create a new char array with only certain elements from another char array using streams in java?","body":"<p>I have an char array, and I want to get the number of the '^' char in that array. so if the array was <code>'.', '.', '^', '-', '^'</code> it would return 2. My plan was to make a new array that just contains the '^' char and then get the length of that array. I know this could be easily done with a for loop that loops over the array, but I think it would be cool to use streams as I've just started learning about them and want more practice, and I think it would be hilarious to have a single massive line instead of a few lines for a for loop and if statement. (this code does not need to be readable)</p>\n<p>I have tried</p>\n<pre><code>char[] tentsInRow = IntStream.range(0, arr.length)\n    .filter(n -&gt; n == '^')\n    .mapToObj(m -&gt; arr[m]).toArray();\n</code></pre>\n<p>and</p>\n<pre><code>char[] tentsInRow = new String(getRow(i))\n    .chars()\n    .mapToObj(n -&gt; (char)n)\n    .filter(n -&gt; n.equals('^'))\n    .toArray();\n</code></pre>\n<p><code>getRow(i)</code> returns a char array, and arr from the first line is the same thing</p>\n<p>both of which give me the error: <code>Required type: char[] Provided: Object[]</code></p>\n<p>I saw there was a toArray(<code>IntFunction&lt;a[]&gt; generator</code>) function I could use that I thought could work, but I wasn't sure how to use it.</p>\n<p>Does anyone know how I can convert from an Object array to a char array in this line, or know any other way to do this with streams/lambdas? I can also just do it the boring way with a for loop, just thought this would be cool lol. First post here so go easy</p>\n"},{"tags":["java","android","firebase","google-cloud-firestore","nosql"],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1679921344,"creation_date":1562153086,"answer_id":56869041,"question_id":56865294,"body_markdown":"**Edit:** 2023-03-27\r\n\r\nFirestore supports now [logical OR queries][1]. So now, you can perform OR queries on multiple fields. The option is available starting with Cloud Firestore version **24.4.5**.\r\n\r\nIn code, it will be as simple as:\r\n\r\n```\r\nval db = Firebase.firestore\r\nval citiesRef = db.collection(&quot;cities&quot;)\r\nval query = citiesRef.where(Filter.or(\r\n        Filter.equalTo(&quot;capital&quot;, true),\r\n        Filter.greaterThanOrEqualTo(&quot;population&quot;, 1000000)    \r\n))\r\n```\r\n\r\nWhich will return documents where the `capital` is set to `true` OR, documents where the population is greater than or equal to `1_000_000`.\r\n\r\n---\r\n\r\n&gt; I need to query the Games collection and find all games where selected team is either home team or away team.\r\n\r\nCloud Firestore official documentation is quite explicit regarding this kind of query. Unfortunately, there are some [query limitations](https://firebase.google.com/docs/firestore/query-data/queries), when it comes to Firestore:\r\n\r\n&gt; Cloud Firestore does not support the following types of queries:\r\n&gt;\r\n&gt;* Logical OR queries. In this case, you should create a separate query for each OR condition and merge the query results in your app.\r\n\r\nSo you cannot query a collection to find all games where selected team is **either** home team or away team in single go.\r\n\r\nA workaroung would be to query your database twice and combine the results of those queries client side. It&#39;s not perfect, since you need to query twice but I think it will do the trick.\r\n\r\nFor Android, this is how you can merge two queries locally:\r\n\r\n* https://stackoverflow.com/questions/50118345/firestore-merging-two-queries-locally\r\n\r\nBut, according to Frank van Puffelen&#39;s [answer](https://stackoverflow.com/a/56859552/5246885) regarding the same topic:\r\n\r\n&gt; OR queries, since those would require skipping through the index, which would make it impossible to guarantee the performance. Note that work is under way to support a subset of possible IN queries, so that you could query for something like &quot;give me all restaurants that serve either Thai or Italian food&quot;.\r\n\r\nYou can wait till this feature will be available or you can use my solution above.\r\n\r\n&gt; Should i have references to the teams by there firestore generated id or should i go for team names? \r\n\r\nIn most of the cases, we asually use user ids and not names, the reason being that names can change while ids not. But it&#39;s up to you to decide if it&#39;s better to search by names rather than by ids.\r\n\r\nP.S. If you&#39;re looking instead of `&quot;OR&quot;` query an `&quot;AND&quot;` query, please note that chaining multiple `whereTo()` calls is permitted.\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/firestore/query-data/queries#or_queries","title":"Nosql model structure","body":"<p><strong>Edit:</strong> 2023-03-27</p>\n<p>Firestore supports now <a href=\"https://firebase.google.com/docs/firestore/query-data/queries#or_queries\" rel=\"nofollow noreferrer\">logical OR queries</a>. So now, you can perform OR queries on multiple fields. The option is available starting with Cloud Firestore version <strong>24.4.5</strong>.</p>\n<p>In code, it will be as simple as:</p>\n<pre><code>val db = Firebase.firestore\nval citiesRef = db.collection(&quot;cities&quot;)\nval query = citiesRef.where(Filter.or(\n        Filter.equalTo(&quot;capital&quot;, true),\n        Filter.greaterThanOrEqualTo(&quot;population&quot;, 1000000)    \n))\n</code></pre>\n<p>Which will return documents where the <code>capital</code> is set to <code>true</code> OR, documents where the population is greater than or equal to <code>1_000_000</code>.</p>\n<hr />\n<blockquote>\n<p>I need to query the Games collection and find all games where selected team is either home team or away team.</p>\n</blockquote>\n<p>Cloud Firestore official documentation is quite explicit regarding this kind of query. Unfortunately, there are some <a href=\"https://firebase.google.com/docs/firestore/query-data/queries\" rel=\"nofollow noreferrer\">query limitations</a>, when it comes to Firestore:</p>\n<blockquote>\n<p>Cloud Firestore does not support the following types of queries:</p>\n<ul>\n<li>Logical OR queries. In this case, you should create a separate query for each OR condition and merge the query results in your app.</li>\n</ul>\n</blockquote>\n<p>So you cannot query a collection to find all games where selected team is <strong>either</strong> home team or away team in single go.</p>\n<p>A workaroung would be to query your database twice and combine the results of those queries client side. It's not perfect, since you need to query twice but I think it will do the trick.</p>\n<p>For Android, this is how you can merge two queries locally:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/50118345/firestore-merging-two-queries-locally\">Firestore - Merging two queries locally</a></li>\n</ul>\n<p>But, according to Frank van Puffelen's <a href=\"https://stackoverflow.com/a/56859552/5246885\">answer</a> regarding the same topic:</p>\n<blockquote>\n<p>OR queries, since those would require skipping through the index, which would make it impossible to guarantee the performance. Note that work is under way to support a subset of possible IN queries, so that you could query for something like &quot;give me all restaurants that serve either Thai or Italian food&quot;.</p>\n</blockquote>\n<p>You can wait till this feature will be available or you can use my solution above.</p>\n<blockquote>\n<p>Should i have references to the teams by there firestore generated id or should i go for team names?</p>\n</blockquote>\n<p>In most of the cases, we asually use user ids and not names, the reason being that names can change while ids not. But it's up to you to decide if it's better to search by names rather than by ids.</p>\n<p>P.S. If you're looking instead of <code>&quot;OR&quot;</code> query an <code>&quot;AND&quot;</code> query, please note that chaining multiple <code>whereTo()</code> calls is permitted.</p>\n"}],"owner":{"account_id":140016,"reputation":6473,"user_id":346012,"accept_rate":85,"display_name":"Marthin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":56869041,"answer_count":1,"score":0,"last_activity_date":1679921344,"creation_date":1562139951,"question_id":56865294,"body_markdown":"How would you structure your Cloud Firestore db.\r\n\r\nI have collections of Teams, Arenas and Games:\r\n\r\n    public class Team {\r\n        public String name;\r\n        public String homeCourtId;\r\n    }\r\n    \r\n    public class Game{\r\n    \r\n        public String matchId;\r\n        public String date;\r\n        public Arena arena;\r\n        public Team homeTeam;\r\n        public Team awayTeam;\r\n    }\r\n    \r\n    \r\n    public class Arena {\r\n    \r\n        public String name;\r\n        public String phone;\r\n        public String email;\r\n        public String address;\r\n        public String postalCode;\r\n        public String city;\r\n        public String district;\r\n        public String cordLat;\r\n        public String cordLong;\r\n    \r\n    }\r\n\r\nA team can be a home team or away team in Games and a Game always has an Arena.\r\n\r\nSo currently my thought is to structure this as all games go into the Games collection and when i want to find out all games for a Team i need to query the Games collection and find all games where selected team is either home team or away team.\r\n\r\nShould I have references to the teams by there Firestore generated id or should I go for team names? Any pointers where i can read more about this?\r\n\r\nIs their a better way to structure my data in Firestore? (or any nosql db) ","title":"Nosql model structure","body":"<p>How would you structure your Cloud Firestore db.</p>\n\n<p>I have collections of Teams, Arenas and Games:</p>\n\n<pre><code>public class Team {\n    public String name;\n    public String homeCourtId;\n}\n\npublic class Game{\n\n    public String matchId;\n    public String date;\n    public Arena arena;\n    public Team homeTeam;\n    public Team awayTeam;\n}\n\n\npublic class Arena {\n\n    public String name;\n    public String phone;\n    public String email;\n    public String address;\n    public String postalCode;\n    public String city;\n    public String district;\n    public String cordLat;\n    public String cordLong;\n\n}\n</code></pre>\n\n<p>A team can be a home team or away team in Games and a Game always has an Arena.</p>\n\n<p>So currently my thought is to structure this as all games go into the Games collection and when i want to find out all games for a Team i need to query the Games collection and find all games where selected team is either home team or away team.</p>\n\n<p>Should I have references to the teams by there Firestore generated id or should I go for team names? Any pointers where i can read more about this?</p>\n\n<p>Is their a better way to structure my data in Firestore? (or any nosql db) </p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":7089168,"reputation":157118,"user_id":5424988,"display_name":"The fourth bird"},"score":0,"creation_date":1623740027,"post_id":67981340,"comment_id":120156858,"body_markdown":"See https://stackoverflow.com/questions/36267354/java-string-replaceall-with-back-reference/36268323","body":"See <a href=\"https://stackoverflow.com/questions/36267354/java-string-replaceall-with-back-reference/36268323\" title=\"java string replaceall with back reference\">stackoverflow.com/questions/36267354/&hellip;</a>"},{"owner":{"account_id":6001966,"reputation":19298,"user_id":8967612,"display_name":"41686d6564"},"score":2,"creation_date":1623740720,"post_id":67981340,"comment_id":120157100,"body_markdown":"Does this answer your question? [Java String.replaceAll() with back reference](https://stackoverflow.com/questions/36267354/java-string-replaceall-with-back-reference)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/36267354/java-string-replaceall-with-back-reference\">Java String.replaceAll() with back reference</a>"}],"answers":[{"tags":[],"owner":{"display_name":"user15793316"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679920477,"creation_date":1623749945,"answer_id":67983773,"question_id":67981340,"body_markdown":"Easy way, using `replaceAll` and `$1` for first group\r\n\r\n```\r\ntext.replaceAll(&quot;aaa(.*)bbb&quot;, &quot;$1&quot;); \r\n// or\r\ntext.replaceAll(&quot;^aaa(.*)bbb$&quot;, &quot;$1&quot;);  // match whole input string below\r\n```\r\n\r\n`replaceAll` searches all matches of first argument as regular expression and replaces it with second argument. Dollar in second argument are used to captures sequences (groups). To just replace once&lt;sup&gt;**1**&lt;/sup&gt;, use `replaceFirst()`.\r\n\r\nSimilar can be done with a `Matcher`:\r\n```\r\nMatcher matcher = Pattern.compile(&quot;aaa(.*)bbb&quot;).matcher(text);\r\nmatcher.replaceAll(&quot;$1&quot;);\r\n```\r\n\r\n----\r\n\r\nNote **1**: since using `(.*)`, the pattern will be found at most once - `.*` tries to match as much as possible. Example: if `text = &quot;aaa first bbb and aaa second bbb&quot;` the group in `aaa(.*)bbb` will match `&quot; first bbb and aaa second &quot;` - the largest sub-sequence between `aaa` and `bbb`. This can be *prevented* using `(.*?)` (reluctant quantifier) that tries to match the smallest sub-sequence possible.\r\n","title":"replacing regex pattern in java similar to notepad++","body":"<p>Easy way, using <code>replaceAll</code> and <code>$1</code> for first group</p>\n<pre><code>text.replaceAll(&quot;aaa(.*)bbb&quot;, &quot;$1&quot;); \n// or\ntext.replaceAll(&quot;^aaa(.*)bbb$&quot;, &quot;$1&quot;);  // match whole input string below\n</code></pre>\n<p><code>replaceAll</code> searches all matches of first argument as regular expression and replaces it with second argument. Dollar in second argument are used to captures sequences (groups). To just replace once<sup><strong>1</strong></sup>, use <code>replaceFirst()</code>.</p>\n<p>Similar can be done with a <code>Matcher</code>:</p>\n<pre><code>Matcher matcher = Pattern.compile(&quot;aaa(.*)bbb&quot;).matcher(text);\nmatcher.replaceAll(&quot;$1&quot;);\n</code></pre>\n<hr />\n<p>Note <strong>1</strong>: since using <code>(.*)</code>, the pattern will be found at most once - <code>.*</code> tries to match as much as possible. Example: if <code>text = &quot;aaa first bbb and aaa second bbb&quot;</code> the group in <code>aaa(.*)bbb</code> will match <code>&quot; first bbb and aaa second &quot;</code> - the largest sub-sequence between <code>aaa</code> and <code>bbb</code>. This can be <em>prevented</em> using <code>(.*?)</code> (reluctant quantifier) that tries to match the smallest sub-sequence possible.</p>\n"}],"owner":{"account_id":8566824,"reputation":507,"user_id":6419060,"accept_rate":0,"display_name":"G.ONE"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679920477,"creation_date":1623739883,"question_id":67981340,"body_markdown":"I can replace \r\n(.*)  with \\1 in notepad++\r\nfor e.g. string\r\n\r\n**aaa hello how are u bbb**\r\n\r\nif i do below in notepad ++ it works\r\n\r\n    find : aaa(.*)bbb\r\n    replace: ccc \\1\r\n    \r\n    output: ccc hello how are u \r\n\r\nHow to do similar in JAVA , i can match pattern using str.matches but how to replace it as above\r\n","title":"replacing regex pattern in java similar to notepad++","body":"<p>I can replace\n(.*)  with \\1 in notepad++\nfor e.g. string</p>\n<p><strong>aaa hello how are u bbb</strong></p>\n<p>if i do below in notepad ++ it works</p>\n<pre><code>find : aaa(.*)bbb\nreplace: ccc \\1\n\noutput: ccc hello how are u \n</code></pre>\n<p>How to do similar in JAVA , i can match pattern using str.matches but how to replace it as above</p>\n"},{"tags":["java","security","path-traversal"],"comments":[{"owner":{"account_id":63815,"reputation":18827,"user_id":188704,"display_name":"Heath Hunnicutt"},"score":2,"creation_date":1267659993,"post_id":2375903,"comment_id":2352273,"body_markdown":"Don&#39;t forget to disallow access to the Windows special devices (NUL, COM1, etc.) which are present everywhere in the file system.","body":"Don&#39;t forget to disallow access to the Windows special devices (NUL, COM1, etc.) which are present everywhere in the file system."},{"owner":{"account_id":1396,"reputation":2865,"user_id":1867,"accept_rate":29,"display_name":"Rob Oxspring"},"score":0,"creation_date":1267661588,"post_id":2375903,"comment_id":2352381,"body_markdown":"Good thought Heath.  The following link appears to have a definitive list of Windows&#39; reserved file names: http://msdn.microsoft.com/en-us/library/aa365247(VS.85).aspx","body":"Good thought Heath.  The following link appears to have a definitive list of Windows&#39; reserved file names: <a href=\"http://msdn.microsoft.com/en-us/library/aa365247(VS.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/aa365247(VS.85).aspx</a>"},{"owner":{"account_id":120262,"reputation":51984,"user_id":312586,"accept_rate":99,"display_name":"kikito"},"score":0,"creation_date":1267696814,"post_id":2375903,"comment_id":2354830,"body_markdown":"Why can&#39;t you configure this on your Apache/IIS server instead?","body":"Why can&#39;t you configure this on your Apache/IIS server instead?"},{"owner":{"account_id":21815,"reputation":19742,"user_id":53328,"accept_rate":78,"display_name":"Martin Wickman"},"score":1,"creation_date":1267701545,"post_id":2375903,"comment_id":2355306,"body_markdown":"I really suggest that you write some unit tests for your method and test it with various  dangerous input until it returns what you expect it. That&#39;s the easiest way to achive piece of mind.","body":"I really suggest that you write some unit tests for your method and test it with various  dangerous input until it returns what you expect it. That&#39;s the easiest way to achive piece of mind."},{"owner":{"account_id":1814811,"reputation":633,"user_id":1650137,"display_name":"Zero3"},"score":1,"creation_date":1450199229,"post_id":2375903,"comment_id":56331962,"body_markdown":"There is a nice answer (using the new Java file IO API) here: http://stackoverflow.com/a/33084369/1650137","body":"There is a nice answer (using the new Java file IO API) here: <a href=\"http://stackoverflow.com/a/33084369/1650137\">stackoverflow.com/a/33084369/1650137</a>"}],"answers":[{"tags":[],"owner":{"account_id":14903,"reputation":11622,"user_id":30997,"accept_rate":60,"display_name":"Sniggerfardimungus"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1267660081,"creation_date":1267660081,"answer_id":2375935,"question_id":2375903,"body_markdown":"If you&#39;re running this on a unix machine (I&#39;m not sure if windows has something similar, but it might) you&#39;ll want to look at chroot.  Even if you think you hit all the ways for someone to refer up a few directories, it&#39;s nice to have the operating system there enforcing the fact.\r\n\r\n(chroot causes &#39;/&#39; to refer to some other directory, so &quot;/&quot; might be &quot;/home/me/project&quot; and &quot;/../../..&quot; is still &quot;/home/me/project&quot;.)\r\n\r\nEDIT:\r\n\r\nThere&#39;s a chroot system call as well as a chroot command-line tool.  I don&#39;t know if Java has a native method, but nothing would prevent you from running your server with the command-line tool.  This should, of course, be in addition to doing your best to prevent other path manipulations.","title":"What&#39;s the best way to defend against a path traversal attack?","body":"<p>If you're running this on a unix machine (I'm not sure if windows has something similar, but it might) you'll want to look at chroot.  Even if you think you hit all the ways for someone to refer up a few directories, it's nice to have the operating system there enforcing the fact.</p>\n\n<p>(chroot causes '/' to refer to some other directory, so \"/\" might be \"/home/me/project\" and \"/../../..\" is still \"/home/me/project\".)</p>\n\n<p>EDIT:</p>\n\n<p>There's a chroot system call as well as a chroot command-line tool.  I don't know if Java has a native method, but nothing would prevent you from running your server with the command-line tool.  This should, of course, be in addition to doing your best to prevent other path manipulations.</p>\n"},{"tags":[],"owner":{"account_id":106222,"reputation":99789,"user_id":283055,"accept_rate":91,"display_name":"Tower"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1451402721,"creation_date":1267696523,"answer_id":2378225,"question_id":2375903,"body_markdown":"You could check out the allowed characters in filenames (http://en.wikipedia.org/wiki/Filename) and filter out all non-allowed characters (white listing) and then you could be sure you&#39;ve got a filename there.","title":"What&#39;s the best way to defend against a path traversal attack?","body":"<p>You could check out the allowed characters in filenames (<a href=\"http://en.wikipedia.org/wiki/Filename\" rel=\"nofollow noreferrer\">http://en.wikipedia.org/wiki/Filename</a>) and filter out all non-allowed characters (white listing) and then you could be sure you've got a filename there.</p>\n"},{"tags":[],"owner":{"account_id":13259,"reputation":67754,"user_id":26510,"accept_rate":99,"display_name":"Brad Parks"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1679920121,"creation_date":1452178817,"answer_id":34658355,"question_id":2375903,"body_markdown":"NOTE: [This answer](https://stackoverflow.com/a/33084369/26510) to another similar question on StackOverflow may be the best approach.\r\n\r\nOtherwise, the following may help. It compares the canonical and absolute paths, and if they differ, then it&#39;ll fail. Only tested on a mac/linux system (ie no windows). \r\n\r\nThis is for the case where you want to allow the user to supply a relative path, not an absolute path, and you don&#39;t allow any parent directory references.\t\r\n\r\n    public void failIfDirectoryTraversal(String relativePath)\r\n\t{\r\n\t\tFile file = new File(relativePath);\r\n\r\n\t\tif (file.isAbsolute())\r\n\t\t{\r\n\t\t\tthrow new RuntimeException(&quot;Directory traversal attempt - absolute path not allowed&quot;);\r\n\t\t}\r\n\r\n\t\tString pathUsingCanonical;\r\n\t\tString pathUsingAbsolute;\r\n\t\ttry\r\n\t\t{\r\n\t\t\tpathUsingCanonical = file.getCanonicalPath();\r\n\t\t\tpathUsingAbsolute = file.getAbsolutePath();\r\n\t\t}\r\n\t\tcatch (IOException e)\r\n\t\t{\r\n\t\t\tthrow new RuntimeException(&quot;Directory traversal attempt?&quot;, e);\r\n\t\t}\r\n\r\n\r\n\t\t// Require the absolute path and canonicalized path match.\r\n\t\t// This is done to avoid directory traversal \r\n\t\t// attacks, e.g. &quot;1/../2/&quot; \r\n\t\tif (! pathUsingCanonical.equals(pathUsingAbsolute))\r\n\t\t{\r\n\t\t\tthrow new RuntimeException(&quot;Directory traversal attempt?&quot;);\r\n\t\t}\r\n\t}","title":"What&#39;s the best way to defend against a path traversal attack?","body":"<p>NOTE: <a href=\"https://stackoverflow.com/a/33084369/26510\">This answer</a> to another similar question on StackOverflow may be the best approach.</p>\n<p>Otherwise, the following may help. It compares the canonical and absolute paths, and if they differ, then it'll fail. Only tested on a mac/linux system (ie no windows).</p>\n<p>This is for the case where you want to allow the user to supply a relative path, not an absolute path, and you don't allow any parent directory references.</p>\n<pre><code>public void failIfDirectoryTraversal(String relativePath)\n{\n    File file = new File(relativePath);\n\n    if (file.isAbsolute())\n    {\n        throw new RuntimeException(&quot;Directory traversal attempt - absolute path not allowed&quot;);\n    }\n\n    String pathUsingCanonical;\n    String pathUsingAbsolute;\n    try\n    {\n        pathUsingCanonical = file.getCanonicalPath();\n        pathUsingAbsolute = file.getAbsolutePath();\n    }\n    catch (IOException e)\n    {\n        throw new RuntimeException(&quot;Directory traversal attempt?&quot;, e);\n    }\n\n\n    // Require the absolute path and canonicalized path match.\n    // This is done to avoid directory traversal \n    // attacks, e.g. &quot;1/../2/&quot; \n    if (! pathUsingCanonical.equals(pathUsingAbsolute))\n    {\n        throw new RuntimeException(&quot;Directory traversal attempt?&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1396,"reputation":2865,"user_id":1867,"accept_rate":29,"display_name":"Rob Oxspring"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46652,"favorite_count":0,"down_vote_count":1,"up_vote_count":49,"answer_count":3,"score":48,"last_activity_date":1679920121,"creation_date":1267659640,"question_id":2375903,"body_markdown":"I have a Java server implementation (TFTP if it matters to you) and I&#39;d like to ensure that it&#39;s not susceptible to path traversal attacks allowing access to files and locations that shouldn&#39;t be available.  \r\n\r\nMy best attempt at defending so far is to reject any entries that match `File.isAbsolute()` and then rely on `File.getCanonicalPath()` to resolve any `../` and `./` components out of the path.  Finally I ensure that the resulting path is still within the required root directory of my server:\r\n\r\n\tpublic String sanitize(final File dir, final String entry) throws IOException {\r\n\t\tif (entry.length() == 0) {\r\n\t\t\tthrow new PathTraversalException(entry);\r\n\t\t}\r\n\r\n\t\tif (new File(entry).isAbsolute()) {\r\n\t\t\tthrow new PathTraversalException(entry);\r\n\t\t}\r\n\r\n\t\tfinal String canonicalDirPath = dir.getCanonicalPath() + File.separator;\r\n\t\tfinal String canonicalEntryPath = new File(dir, entry).getCanonicalPath();\r\n\r\n\t\tif (!canonicalEntryPath.startsWith(canonicalDirPath)) {\r\n\t\t\tthrow new PathTraversalException(entry);\r\n\t\t}\r\n\r\n\t\treturn canonicalEntryPath.substring(canonicalDirPath.length());\r\n\t}\r\n\r\nAre there security issues that this misses? Are there better / faster to achieve the same result reliably?\r\n\r\nThe code needs to work consistently across Windows and Linux.","title":"What&#39;s the best way to defend against a path traversal attack?","body":"<p>I have a Java server implementation (TFTP if it matters to you) and I'd like to ensure that it's not susceptible to path traversal attacks allowing access to files and locations that shouldn't be available.  </p>\n\n<p>My best attempt at defending so far is to reject any entries that match <code>File.isAbsolute()</code> and then rely on <code>File.getCanonicalPath()</code> to resolve any <code>../</code> and <code>./</code> components out of the path.  Finally I ensure that the resulting path is still within the required root directory of my server:</p>\n\n<pre><code>public String sanitize(final File dir, final String entry) throws IOException {\n    if (entry.length() == 0) {\n        throw new PathTraversalException(entry);\n    }\n\n    if (new File(entry).isAbsolute()) {\n        throw new PathTraversalException(entry);\n    }\n\n    final String canonicalDirPath = dir.getCanonicalPath() + File.separator;\n    final String canonicalEntryPath = new File(dir, entry).getCanonicalPath();\n\n    if (!canonicalEntryPath.startsWith(canonicalDirPath)) {\n        throw new PathTraversalException(entry);\n    }\n\n    return canonicalEntryPath.substring(canonicalDirPath.length());\n}\n</code></pre>\n\n<p>Are there security issues that this misses? Are there better / faster to achieve the same result reliably?</p>\n\n<p>The code needs to work consistently across Windows and Linux.</p>\n"},{"tags":["java","velocity","libreoffice","xdocreport"],"owner":{"account_id":26806523,"reputation":1,"user_id":20397762,"display_name":"wims"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679919593,"creation_date":1679919593,"question_id":75855664,"body_markdown":"I have a service that generates pdf files from the output of our java backend. The pdf is generated from an .odt template using xdocreport, the template itself is scripted with velocity. The pdf view displays the backend data in a dynamic table that is generated once for each object we want to represent in the pdf. \r\n\r\nMy problem is that when rendering these tables at the bottom of a pdf page, the table might span across two different pages. I would prefer to not have these tables span two pages, but rather have them rendered entirely on a new page. \r\n\r\n\r\nDoes xdocreport have functionality for not splitting a table across two pages, but rather start rendering it at the top of a new page?\r\n\r\n\r\n\r\nI tried to uncheck the &quot;Allow table to split across pages and columns&quot; option in table properties in Libre Office. I also tried to disable both &quot;Allow row to break across pages and columns&quot; and &quot;Keep with next paragraph&quot;, but they seemed to not have an effect on the generated pdf","title":"How to render table to a new page if the table would span two pages with xdocreport, velocity and libreoffice","body":"<p>I have a service that generates pdf files from the output of our java backend. The pdf is generated from an .odt template using xdocreport, the template itself is scripted with velocity. The pdf view displays the backend data in a dynamic table that is generated once for each object we want to represent in the pdf.</p>\n<p>My problem is that when rendering these tables at the bottom of a pdf page, the table might span across two different pages. I would prefer to not have these tables span two pages, but rather have them rendered entirely on a new page.</p>\n<p>Does xdocreport have functionality for not splitting a table across two pages, but rather start rendering it at the top of a new page?</p>\n<p>I tried to uncheck the &quot;Allow table to split across pages and columns&quot; option in table properties in Libre Office. I also tried to disable both &quot;Allow row to break across pages and columns&quot; and &quot;Keep with next paragraph&quot;, but they seemed to not have an effect on the generated pdf</p>\n"},{"tags":["java","android","kotlin","android-permissions","android-13"],"comments":[{"owner":{"account_id":22331062,"reputation":51,"user_id":16552338,"display_name":"Mirek H&#253;bler"},"score":0,"creation_date":1674737896,"post_id":75246330,"comment_id":132780218,"body_markdown":"Hi, do you have notification permission declared in your AndroidManifest.xml?","body":"Hi, do you have notification permission declared in your AndroidManifest.xml?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1674738556,"post_id":75246330,"comment_id":132780426,"body_markdown":"Once the permission is granted requestPermissions() will not popup a dialog but trigger the onRequestPermissionsResult directly. Well not using ActivityCompat but registerForActivityResult(). new RequestPermission().","body":"Once the permission is granted requestPermissions() will not popup a dialog but trigger the onRequestPermissionsResult directly. Well not using ActivityCompat but registerForActivityResult(). new RequestPermission()."},{"owner":{"account_id":27626178,"reputation":21,"user_id":21086143,"display_name":"Shahzore Ahmed"},"score":0,"creation_date":1674742722,"post_id":75246330,"comment_id":132781837,"body_markdown":"Yes notification permission is declared in AndroidManifest.xml\n`&lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot;/&gt;`","body":"Yes notification permission is declared in AndroidManifest.xml <code>&lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot;&#47;&gt;</code>"},{"owner":{"account_id":27626178,"reputation":21,"user_id":21086143,"display_name":"Shahzore Ahmed"},"score":0,"creation_date":1674742819,"post_id":75246330,"comment_id":132781873,"body_markdown":"Yes I have also tried\n`registerForActivityResult(ActivityResultContracts.RequestPermission())`","body":"Yes I have also tried <code>registerForActivityResult(ActivityResultContracts.RequestPer&zwnj;&#8203;mission())</code>"},{"owner":{"account_id":5595387,"reputation":11077,"user_id":4433326,"accept_rate":67,"display_name":"Louis CAD"},"score":0,"creation_date":1677640148,"post_id":75246330,"comment_id":133376555,"body_markdown":"This might help you handle the edge cases of requesting permissions: https://github.com/LouisCAD/Splitties/tree/main/modules/permissions","body":"This might help you handle the edge cases of requesting permissions: <a href=\"https://github.com/LouisCAD/Splitties/tree/main/modules/permissions\" rel=\"nofollow noreferrer\">github.com/LouisCAD/Splitties/tree/main/modules/permissions</a>"}],"owner":{"account_id":27626178,"reputation":21,"user_id":21086143,"display_name":"Shahzore Ahmed"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":415,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1679922640,"answer_count":0,"score":2,"last_activity_date":1679919153,"creation_date":1674737172,"question_id":75246330,"body_markdown":"There are many questions on this topic already, I know. However, none of the answers I have found so far resolves the issue for me.\r\n\r\nThe problem is ActivityCompat.requestPermissions does not trigger a popup, asking the user to give permission for notifications.\r\n\r\nSetup:\r\n\r\n- Testing on physical device (Android 13, Samsung Galaxy S22 and Samsung Galaxy A51)\r\n- targetSdkVersion = 33\r\n- compileSdkVersion = 33\r\n- minSdkVersion = 23\r\n- AndroidManifest has permission: `&lt;uses-permission` `android:name=&quot;android.permission.POST_NOTIFICATIONS&quot;/&gt;`\r\n\r\n\r\nActivity declared in AndroidManifest\r\n\r\n```\r\n        &lt;activity android:name=&quot;.PostNotificationActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:screenOrientation=&quot;portrait&quot;/&gt;\r\n```\r\n\r\n\r\nClick on Enable Notification button:\r\n\r\n```\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.POST_NOTIFICATIONS) != PackageManager.PERMISSION_GRANTED) {\r\n            if (ActivityCompat.shouldShowRequestPermissionRationale(this, Manifest.permission.POST_NOTIFICATIONS)) {\r\n                ActivityCompat.requestPermissions(this, arrayOf(Manifest.permission.POST_NOTIFICATIONS),\r\n                    POST_NOTIFICATION_PERMISSION_CODE)\r\n\r\n            } else {\r\n                ActivityCompat.requestPermissions(this, arrayOf(Manifest.permission.POST_NOTIFICATIONS),\r\n                    POST_NOTIFICATION_PERMISSION_CODE)\r\n            }\r\n        }\r\n```\r\n\r\nand the callback is like so:\r\n\r\n```\r\n    override fun onRequestPermissionsResult(\r\n        requestCode: Int,\r\n        permissions: Array&lt;out String&gt;,\r\n        grantResults: IntArray\r\n    ) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults)\r\n\r\n        when(requestCode) {\r\n            POST_NOTIFICATION_PERMISSION_CODE -&gt; {\r\n                if (grantResults.size &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                    Toast.makeText(applicationContext, &quot;Permission Granted&quot;, Toast.LENGTH_LONG).show()\r\n\r\n                } else {\r\n                    Toast.makeText(applicationContext, &quot;Permission Denied&quot;, Toast.LENGTH_LONG).show()\r\n                }\r\n\r\n                return\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nI have stepped through the code via the debugger, and can confirm that on first button click **requestPermissions** is called but no popup on device and **onRequestPermissionsResult** is also not trigger as well.\r\nAnd when again clicked the button **requestPermissions** is called with no popup on device but **onRequestPermissionsResult** is triggered now with **Permission Denied** and when press back previous activity is freezed.\r\n\r\nI have also tried using the new ActivityResultLauncher, but the behaviour is same no popup on device.\r\n","title":"POST_NOTIFICATIONS permission dialog not showing (Android 13, targetSdkVersion=33)","body":"<p>There are many questions on this topic already, I know. However, none of the answers I have found so far resolves the issue for me.</p>\n<p>The problem is ActivityCompat.requestPermissions does not trigger a popup, asking the user to give permission for notifications.</p>\n<p>Setup:</p>\n<ul>\n<li>Testing on physical device (Android 13, Samsung Galaxy S22 and Samsung Galaxy A51)</li>\n<li>targetSdkVersion = 33</li>\n<li>compileSdkVersion = 33</li>\n<li>minSdkVersion = 23</li>\n<li>AndroidManifest has permission: <code>&lt;uses-permission</code> <code>android:name=&quot;android.permission.POST_NOTIFICATIONS&quot;/&gt;</code></li>\n</ul>\n<p>Activity declared in AndroidManifest</p>\n<pre><code>        &lt;activity android:name=&quot;.PostNotificationActivity&quot;\n            android:exported=&quot;true&quot;\n            android:screenOrientation=&quot;portrait&quot;/&gt;\n</code></pre>\n<p>Click on Enable Notification button:</p>\n<pre><code>        if (ContextCompat.checkSelfPermission(this, Manifest.permission.POST_NOTIFICATIONS) != PackageManager.PERMISSION_GRANTED) {\n            if (ActivityCompat.shouldShowRequestPermissionRationale(this, Manifest.permission.POST_NOTIFICATIONS)) {\n                ActivityCompat.requestPermissions(this, arrayOf(Manifest.permission.POST_NOTIFICATIONS),\n                    POST_NOTIFICATION_PERMISSION_CODE)\n\n            } else {\n                ActivityCompat.requestPermissions(this, arrayOf(Manifest.permission.POST_NOTIFICATIONS),\n                    POST_NOTIFICATION_PERMISSION_CODE)\n            }\n        }\n</code></pre>\n<p>and the callback is like so:</p>\n<pre><code>    override fun onRequestPermissionsResult(\n        requestCode: Int,\n        permissions: Array&lt;out String&gt;,\n        grantResults: IntArray\n    ) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults)\n\n        when(requestCode) {\n            POST_NOTIFICATION_PERMISSION_CODE -&gt; {\n                if (grantResults.size &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                    Toast.makeText(applicationContext, &quot;Permission Granted&quot;, Toast.LENGTH_LONG).show()\n\n                } else {\n                    Toast.makeText(applicationContext, &quot;Permission Denied&quot;, Toast.LENGTH_LONG).show()\n                }\n\n                return\n            }\n        }\n    }\n</code></pre>\n<p>I have stepped through the code via the debugger, and can confirm that on first button click <strong>requestPermissions</strong> is called but no popup on device and <strong>onRequestPermissionsResult</strong> is also not trigger as well.\nAnd when again clicked the button <strong>requestPermissions</strong> is called with no popup on device but <strong>onRequestPermissionsResult</strong> is triggered now with <strong>Permission Denied</strong> and when press back previous activity is freezed.</p>\n<p>I have also tried using the new ActivityResultLauncher, but the behaviour is same no popup on device.</p>\n"},{"tags":["java","concurrency","volatile","java.util.concurrent"],"answers":[{"tags":[],"owner":{"account_id":313546,"reputation":7820,"user_id":628242,"accept_rate":55,"display_name":"Lokesh"},"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1366459874,"creation_date":1366459335,"answer_id":16120114,"question_id":16119871,"body_markdown":"Immutability implies thread safety because once created no thread can modify it, so value will remain consistent across threads.\r\n\r\nIn the above example &quot;private volatile OneValueCache immutableValue&quot; can hold only one value at a time , so if thread 1 updated first and then thread 2 updated reference value then the last value will represented by &quot;onevaluecache&quot; and update of Thread 1 will be lost as you are storing only one reference value.\r\n\r\nAt no point in steps mentioned by you state of OneValueCache is inconsistent, so it is thread safe.\r\n\r\nEDIT: Some of Cases where state will not be consistent are:\r\n\r\n1. If immutableValue variable was not volatile then each thread will store its own copy, which means cache will not work properly.\r\n\r\n2. If OneValueCache  class was mutable then mutiple threads will look to change its value simultaneously which means state will not be consistent hence not thread safe.","title":"Does using volatile to publish immutable objects are safe?","body":"<p>Immutability implies thread safety because once created no thread can modify it, so value will remain consistent across threads.</p>\n\n<p>In the above example \"private volatile OneValueCache immutableValue\" can hold only one value at a time , so if thread 1 updated first and then thread 2 updated reference value then the last value will represented by \"onevaluecache\" and update of Thread 1 will be lost as you are storing only one reference value.</p>\n\n<p>At no point in steps mentioned by you state of OneValueCache is inconsistent, so it is thread safe.</p>\n\n<p>EDIT: Some of Cases where state will not be consistent are:</p>\n\n<ol>\n<li><p>If immutableValue variable was not volatile then each thread will store its own copy, which means cache will not work properly.</p></li>\n<li><p>If OneValueCache  class was mutable then mutiple threads will look to change its value simultaneously which means state will not be consistent hence not thread safe.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":28137630,"reputation":21,"user_id":21501147,"display_name":"Tommy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679918919,"creation_date":1679918639,"answer_id":75855544,"question_id":16119871,"body_markdown":"volatile keyword ensures that threads pull latest version of immutable object from shared memory rather than from a local cache (ex: cpu register, stack, etc.). However, if two threads read, modify and publish the object simultaneously to the same volatile variable, changes from one thread can get lost. To support such use cases, it is better to use mutex like synchronized keyword or a read-write lock.\r\n\r\nTypically, you would use volatile when only one thread publishes updated immutable objects to that volatile variable, but multiple threads read from it. In such cases, you do not worry about thread interference.\r\n\r\nIn Java, threads can cache (partial/full) copies of non-volatile variables into their own &quot;reserved&quot; memory space (ex: cpu register, stack, etc.). volatile keyword can be seen as a way to bypass these caches and ensure that thread gets fresh copy of object when you access and only when you access the volatile variable. \r\n","title":"Does using volatile to publish immutable objects are safe?","body":"<p>volatile keyword ensures that threads pull latest version of immutable object from shared memory rather than from a local cache (ex: cpu register, stack, etc.). However, if two threads read, modify and publish the object simultaneously to the same volatile variable, changes from one thread can get lost. To support such use cases, it is better to use mutex like synchronized keyword or a read-write lock.</p>\n<p>Typically, you would use volatile when only one thread publishes updated immutable objects to that volatile variable, but multiple threads read from it. In such cases, you do not worry about thread interference.</p>\n<p>In Java, threads can cache (partial/full) copies of non-volatile variables into their own &quot;reserved&quot; memory space (ex: cpu register, stack, etc.). volatile keyword can be seen as a way to bypass these caches and ensure that thread gets fresh copy of object when you access and only when you access the volatile variable.</p>\n"}],"owner":{"account_id":1523181,"reputation":2433,"user_id":1422297,"accept_rate":100,"display_name":"Morteza Adi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2402,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":16120114,"answer_count":2,"score":2,"last_activity_date":1679918919,"creation_date":1366457725,"question_id":16119871,"body_markdown":"Recently I read &quot;Java concurrency in practice&quot;\r\n\tSection --&gt; &quot;3.4.2 Example: Using volatile to publish immutable objects&quot;. \r\n\r\nHowever; I can&#39;t quietly understand it.\r\nHere is the situation!\r\n\r\nImmutable object is:\r\n\r\n\t@Immutable\r\n\tclass OneValueCache {\r\n\t\tprivate final BigInteger lastNumber;\r\n\t\tprivate final BigInteger[] lastFactors;\r\n\t\tpublic OneValueCache(BigInteger i, BigInteger[] factors) {\r\n\t\t\tlastNumber = i;\r\n\t\t\tlastFactors = Arrays.copyOf(factors, factors.length);\r\n\t\t}\r\n\t\tpublic BigInteger[] getFactors(BigInteger i) {\r\n\t\t\tif (lastNumber == null || !lastNumber.equals(i))\r\n\t\t\t\treturn null;\r\n\t\t\telse\r\n\t\t\t\treturn Arrays.copyOf(lastFactors, lastFactors.length);\r\n\t\t}\r\n\t}\r\n\r\nSuppose we have a servlet like this\r\n\r\n    public class MyServlet {\r\n\tprivate volatile OneValueCache immutableValue;\r\n\t.\r\n\t.\r\n \t\r\n\tpublic void service(){\r\n                .\r\n                // what this function do : gets value from immutable object increments its\r\n                // value and creates new Immutable object and put it back.\r\n                // \r\n                .\r\n\t\timmutableValue = new OneValueCache( lastNumber, lastFactor[]);\r\n\t\t.\r\n\t\t.\r\n\t\t.\r\n\t}\r\n\t.\r\n\t.\r\n\t.\r\n    }\r\n\r\n\r\nAccording the book MyServlet is Thread Safe because it publishes Immutable Object with volatile keyword!\r\n\r\nHowever I think there is a problem here!\r\n\r\nSuppose:\r\n\r\n Thread 1 in time 0 read the values from immutableValue to its stack var;\r\n\r\n Thread 2 in time 0 read the values from immutableValue to its stack var;\r\n\r\n Thread 1 in time 1 increment the values in stack variable and create new OneValueCache \r\n          object -which is immutable - and put it in immutableValue field variable;\r\n\r\n Thread 2 in time 2 increment the values in stack variable and create new OneValueCache\r\n          object -which is immutable - and put it in immutableValue field variable;\r\n\r\n\r\nThis way we lost Thread1 update so there is no ThreadSafty here!\r\n\r\nOn the contrary the book says:\r\n\r\n**&quot;\r\nThis combination of an immutable holder object for\r\nmultiple state variables related by an invariant, and a volatile reference used to\r\nensure its timely visibility, allows VolatileCachedFactorizer to be thread-safe\r\neven though it does no explicit locking.\r\n&quot;**\r\n\r\nCan anyone help me what am I missing here?\r\n\r\np.s: to more clarify, I know data consistency is held here. we can not have invalid OneValueCache state. but there is a chance for lost update here as my thread sequence shows. so the class is not thread safe!","title":"Does using volatile to publish immutable objects are safe?","body":"<p>Recently I read \"Java concurrency in practice\"\n    Section --> \"3.4.2 Example: Using volatile to publish immutable objects\". </p>\n\n<p>However; I can't quietly understand it.\nHere is the situation!</p>\n\n<p>Immutable object is:</p>\n\n<pre><code>@Immutable\nclass OneValueCache {\n    private final BigInteger lastNumber;\n    private final BigInteger[] lastFactors;\n    public OneValueCache(BigInteger i, BigInteger[] factors) {\n        lastNumber = i;\n        lastFactors = Arrays.copyOf(factors, factors.length);\n    }\n    public BigInteger[] getFactors(BigInteger i) {\n        if (lastNumber == null || !lastNumber.equals(i))\n            return null;\n        else\n            return Arrays.copyOf(lastFactors, lastFactors.length);\n    }\n}\n</code></pre>\n\n<p>Suppose we have a servlet like this</p>\n\n<pre><code>public class MyServlet {\nprivate volatile OneValueCache immutableValue;\n.\n.\n\npublic void service(){\n            .\n            // what this function do : gets value from immutable object increments its\n            // value and creates new Immutable object and put it back.\n            // \n            .\n    immutableValue = new OneValueCache( lastNumber, lastFactor[]);\n    .\n    .\n    .\n}\n.\n.\n.\n}\n</code></pre>\n\n<p>According the book MyServlet is Thread Safe because it publishes Immutable Object with volatile keyword!</p>\n\n<p>However I think there is a problem here!</p>\n\n<p>Suppose:</p>\n\n<p>Thread 1 in time 0 read the values from immutableValue to its stack var;</p>\n\n<p>Thread 2 in time 0 read the values from immutableValue to its stack var;</p>\n\n<p>Thread 1 in time 1 increment the values in stack variable and create new OneValueCache \n          object -which is immutable - and put it in immutableValue field variable;</p>\n\n<p>Thread 2 in time 2 increment the values in stack variable and create new OneValueCache\n          object -which is immutable - and put it in immutableValue field variable;</p>\n\n<p>This way we lost Thread1 update so there is no ThreadSafty here!</p>\n\n<p>On the contrary the book says:</p>\n\n<p><strong>\"\nThis combination of an immutable holder object for\nmultiple state variables related by an invariant, and a volatile reference used to\nensure its timely visibility, allows VolatileCachedFactorizer to be thread-safe\neven though it does no explicit locking.\n\"</strong></p>\n\n<p>Can anyone help me what am I missing here?</p>\n\n<p>p.s: to more clarify, I know data consistency is held here. we can not have invalid OneValueCache state. but there is a chance for lost update here as my thread sequence shows. so the class is not thread safe!</p>\n"},{"tags":["java","pdf","itext","documentation"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1679920655,"post_id":75855574,"comment_id":133801925,"body_markdown":"This sounds like you have a different iText version on your server (or multiple ones, and a different one is used here). The method in question has been in iText since version 2.1.2 - before that the argument was a `char` instead of an `int` - so you should look for an iText 2.1.1 or older.","body":"This sounds like you have a different iText version on your server (or multiple ones, and a different one is used here). The method in question has been in iText since version 2.1.2 - before that the argument was a <code>char</code> instead of an <code>int</code> - so you should look for an iText 2.1.1 or older."}],"owner":{"account_id":11175490,"reputation":31,"user_id":9562845,"display_name":"Vignesh Ramamoorthy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679918903,"creation_date":1679918903,"question_id":75855574,"body_markdown":"Am using com.lowagie.text-2.1.7 jar to convert my input docx file to PDF output. I had compiled my code and deployed it in the server.\r\nBut when I run my pdf convertor I am getting the following sets of error in the console\r\n\r\n&#160;\r\n\r\n```\r\n Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: com.lowagie.text.pdf.BaseFont.charExists(I)Z\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.xdocreport.itext.extension.font.FontGroup.getUnicodeGroup(FontGroup.java:37)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.pdf.internal.PdfMapper.createAndAddChunks(PdfMapper.java:654)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.pdf.internal.PdfMapper.visitText(PdfMapper.java:600)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.pdf.internal.PdfMapper.visitText(PdfMapper.java:100)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitRun(XWPFDocumentVisitor.java:805)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.pdf.internal.PdfMapper.visitRun(PdfMapper.java:526)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.pdf.internal.PdfMapper.visitRun(PdfMapper.java:100)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitRuns(XWPFDocumentVisitor.java:647)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitParagraphBody(XWPFDocumentVisitor.java:467)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitParagraph(XWPFDocumentVisitor.java:358)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitBodyElements(XWPFDocumentVisitor.java:231)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitTableCellBody(XWPFDocumentVisitor.java:1141)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitCell(XWPFDocumentVisitor.java:1076)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitTableRow(XWPFDocumentVisitor.java:1024)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitTableBody(XWPFDocumentVisitor.java:918)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitTable(XWPFDocumentVisitor.java:900)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitBodyElements(XWPFDocumentVisitor.java:235)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.pdf.internal.PdfMapper.visitFooter(PdfMapper.java:204)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.pdf.internal.PdfMapper.visitFooter(PdfMapper.java:100)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitFooterRef(XWPFDocumentVisitor.java:1187)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.MasterPageManager.visitHeadersFooters(MasterPageManager.java:225)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.MasterPageManager.addSection(MasterPageManager.java:181)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.MasterPageManager.compute(MasterPageManager.java:128)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.MasterPageManager.initialize(MasterPageManager.java:91)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitBodyElements(XWPFDocumentVisitor.java:216)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.start(XWPFDocumentVisitor.java:183)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.pdf.PdfConverter.doConvert(PdfConverter.java:57)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.pdf.PdfConverter.doConvert(PdfConverter.java:39)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at fr.opensagres.poi.xwpf.converter.core.AbstractXWPFConverter.convert(AbstractXWPFConverter.java:46)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at DocGenCode.DocGenCode.PDFConverter(DocGenCode.java:80)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at DocGenCode.DocGenCode.createPDF1(DocGenCode.java:847)\r\n&#160;&#160;&#160;&#160;&#160;&#160;&#160; at DocumentGeneration.DocumentGeneration.main(DocumentGeneration.java:1261)\r\n ```\r\n\r\n\r\nI have already imported com.lowagie.text-2.1.7.jar along with fr.opensagres.xdocreport.itext.extension-2.0.1.jar,&#160;\r\nfr.opensagres.poi.xwpf.converter.pdf-2.0.1.jar, fr.opensagres.poi.xwpf.converter.core-2.0.1.jar. I had also placed these jars in the lib folder in the utility location of my server. Using my netbeans I just checked the jars and com.lowagie.text.pdf.BaseFont does have public boolean charExists(int i) {} function. But still am at a loss on why am getting such errors. Does anyone have an idea on what the issue is or provide me with any resources available to resolve this ?\r\n\r\n","title":"NoSuchMethodError error in java while converting docx file to pdf","body":"<p>Am using com.lowagie.text-2.1.7 jar to convert my input docx file to PDF output. I had compiled my code and deployed it in the server.\nBut when I run my pdf convertor I am getting the following sets of error in the console</p>\n<p> </p>\n<pre><code> Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: com.lowagie.text.pdf.BaseFont.charExists(I)Z\n        at fr.opensagres.xdocreport.itext.extension.font.FontGroup.getUnicodeGroup(FontGroup.java:37)\n        at fr.opensagres.poi.xwpf.converter.pdf.internal.PdfMapper.createAndAddChunks(PdfMapper.java:654)\n        at fr.opensagres.poi.xwpf.converter.pdf.internal.PdfMapper.visitText(PdfMapper.java:600)\n        at fr.opensagres.poi.xwpf.converter.pdf.internal.PdfMapper.visitText(PdfMapper.java:100)\n        at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitRun(XWPFDocumentVisitor.java:805)\n        at fr.opensagres.poi.xwpf.converter.pdf.internal.PdfMapper.visitRun(PdfMapper.java:526)\n        at fr.opensagres.poi.xwpf.converter.pdf.internal.PdfMapper.visitRun(PdfMapper.java:100)\n        at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitRuns(XWPFDocumentVisitor.java:647)\n        at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitParagraphBody(XWPFDocumentVisitor.java:467)\n        at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitParagraph(XWPFDocumentVisitor.java:358)\n        at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitBodyElements(XWPFDocumentVisitor.java:231)\n        at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitTableCellBody(XWPFDocumentVisitor.java:1141)\n        at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitCell(XWPFDocumentVisitor.java:1076)\n        at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitTableRow(XWPFDocumentVisitor.java:1024)\n        at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitTableBody(XWPFDocumentVisitor.java:918)\n        at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitTable(XWPFDocumentVisitor.java:900)\n        at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitBodyElements(XWPFDocumentVisitor.java:235)\n        at fr.opensagres.poi.xwpf.converter.pdf.internal.PdfMapper.visitFooter(PdfMapper.java:204)\n        at fr.opensagres.poi.xwpf.converter.pdf.internal.PdfMapper.visitFooter(PdfMapper.java:100)\n        at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitFooterRef(XWPFDocumentVisitor.java:1187)\n        at fr.opensagres.poi.xwpf.converter.core.MasterPageManager.visitHeadersFooters(MasterPageManager.java:225)\n        at fr.opensagres.poi.xwpf.converter.core.MasterPageManager.addSection(MasterPageManager.java:181)\n        at fr.opensagres.poi.xwpf.converter.core.MasterPageManager.compute(MasterPageManager.java:128)\n        at fr.opensagres.poi.xwpf.converter.core.MasterPageManager.initialize(MasterPageManager.java:91)\n        at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.visitBodyElements(XWPFDocumentVisitor.java:216)\n        at fr.opensagres.poi.xwpf.converter.core.XWPFDocumentVisitor.start(XWPFDocumentVisitor.java:183)\n        at fr.opensagres.poi.xwpf.converter.pdf.PdfConverter.doConvert(PdfConverter.java:57)\n        at fr.opensagres.poi.xwpf.converter.pdf.PdfConverter.doConvert(PdfConverter.java:39)\n        at fr.opensagres.poi.xwpf.converter.core.AbstractXWPFConverter.convert(AbstractXWPFConverter.java:46)\n        at DocGenCode.DocGenCode.PDFConverter(DocGenCode.java:80)\n        at DocGenCode.DocGenCode.createPDF1(DocGenCode.java:847)\n        at DocumentGeneration.DocumentGeneration.main(DocumentGeneration.java:1261)\n</code></pre>\n<p>I have already imported com.lowagie.text-2.1.7.jar along with fr.opensagres.xdocreport.itext.extension-2.0.1.jar, \nfr.opensagres.poi.xwpf.converter.pdf-2.0.1.jar, fr.opensagres.poi.xwpf.converter.core-2.0.1.jar. I had also placed these jars in the lib folder in the utility location of my server. Using my netbeans I just checked the jars and com.lowagie.text.pdf.BaseFont does have public boolean charExists(int i) {} function. But still am at a loss on why am getting such errors. Does anyone have an idea on what the issue is or provide me with any resources available to resolve this ?</p>\n"},{"tags":["java","tomcat","web-applications"],"comments":[{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1679905789,"post_id":75853461,"comment_id":133798169,"body_markdown":"Note: Making a new URL connection and `crossContext` have nothing to do with each other. More important: As you ask for &quot;the best way&quot;: That&#39;s quite an opinionated question and depends on a lot of criteria that is not contained in your question. That&#39;s why opinionated questions are a reason for closing a question on stackoverflow. You might want to edit it to be less opinionated and more specific.","body":"Note: Making a new URL connection and <code>crossContext</code> have nothing to do with each other. More important: As you ask for &quot;the best way&quot;: That&#39;s quite an opinionated question and depends on a lot of criteria that is not contained in your question. That&#39;s why opinionated questions are a reason for closing a question on stackoverflow. You might want to edit it to be less opinionated and more specific."},{"owner":{"account_id":4133056,"reputation":532,"user_id":5967354,"display_name":"user27772"},"score":0,"creation_date":1679919004,"post_id":75853461,"comment_id":133801495,"body_markdown":"@OlafKock: Thank you for your valuable hints. I edited my question.","body":"@OlafKock: Thank you for your valuable hints. I edited my question."}],"owner":{"account_id":4133056,"reputation":532,"user_id":5967354,"display_name":"user27772"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679918856,"creation_date":1679904665,"question_id":75853461,"body_markdown":"In a running servlet request I need to request data from an other servlet of a different webapp running in the same Tomcat instance. Using new URL connections to the same Tomcat connector/port would work in general but it may run into deadlocks when max connection/threads ist reached.\r\n\r\nI&#39;m aware of the both methods *RequestDispatcher.forward()* and *RequestDispatcher.include()* in combination with Tomcat&#39;s *crossContext=true* option, but as far as I know, both methods are designed to work directly on the current *ServletResponse* instance which I don&#39;t want.\r\n\r\nAre there alternatives to those two approaches? I thought of creating and passing new *ServletRequest* and *ServletResponse* instances to one of the both *RequestDispatcher* methods above, but I could not find examples on this so far.\r\n\r\nAny ideas are appreciated.","title":"How to incoperate responses from other webapps running in same Tomcat instance?","body":"<p>In a running servlet request I need to request data from an other servlet of a different webapp running in the same Tomcat instance. Using new URL connections to the same Tomcat connector/port would work in general but it may run into deadlocks when max connection/threads ist reached.</p>\n<p>I'm aware of the both methods <em>RequestDispatcher.forward()</em> and <em>RequestDispatcher.include()</em> in combination with Tomcat's <em>crossContext=true</em> option, but as far as I know, both methods are designed to work directly on the current <em>ServletResponse</em> instance which I don't want.</p>\n<p>Are there alternatives to those two approaches? I thought of creating and passing new <em>ServletRequest</em> and <em>ServletResponse</em> instances to one of the both <em>RequestDispatcher</em> methods above, but I could not find examples on this so far.</p>\n<p>Any ideas are appreciated.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":315165,"reputation":697,"user_id":630779,"accept_rate":50,"display_name":"Matt Moran"},"score":0,"creation_date":1679786720,"post_id":75845073,"comment_id":133783703,"body_markdown":"Note that if I do specify a profile on the non-profiled service, the problem goes away, but, should we have to do that? Potentially that&#39;s a lot of classes to annotate if we&#39;re talking about a big system one is maintaining.","body":"Note that if I do specify a profile on the non-profiled service, the problem goes away, but, should we have to do that? Potentially that&#39;s a lot of classes to annotate if we&#39;re talking about a big system one is maintaining."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1679819155,"post_id":75845073,"comment_id":133786126,"body_markdown":"Beans without an `@Profile` (or whatever condition) are **always created** also the `@ActiveProfile` annotation is an testing annotation and is for use in tests **not** for use in main code. YOu can mark your non profile limited implementation with `@Primary` which means if no dedicated candidate can be found use this one.","body":"Beans without an <code>@Profile</code> (or whatever condition) are <b>always created</b> also the <code>@ActiveProfile</code> annotation is an testing annotation and is for use in tests <b>not</b> for use in main code. YOu can mark your non profile limited implementation with <code>@Primary</code> which means if no dedicated candidate can be found use this one."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1679821020,"post_id":75845073,"comment_id":133786340,"body_markdown":"&quot;If no profile is active, a default profile is enabled. The name of the default profile is `default` and it can be tuned using the `spring.profiles.default` Environment property..&quot; ..from [doc](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.profiles)","body":"&quot;If no profile is active, a default profile is enabled. The name of the default profile is <code>default</code> and it can be tuned using the <code>spring.profiles.default</code> Environment property..&quot; ..from <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.profiles\" rel=\"nofollow noreferrer\">doc</a>"},{"owner":{"account_id":315165,"reputation":697,"user_id":630779,"accept_rate":50,"display_name":"Matt Moran"},"score":0,"creation_date":1679916783,"post_id":75845073,"comment_id":133800936,"body_markdown":"@M.Deinum - can you redo that as an answer rather than as a comment? I think that&#39;s worked, &amp; deserves proper credit for answering the question. Thanks!","body":"@M.Deinum - can you redo that as an answer rather than as a comment? I think that&#39;s worked, &amp; deserves proper credit for answering the question. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679799870,"creation_date":1679799870,"answer_id":75845652,"question_id":75845073,"body_markdown":"The `@Profile` annotation restricts the bean&#39;s creation, in the absence of `@Profile`, and with the presence of `@Service`, Spring will create the bean and add it to the application context.  Now, it&#39;s available for auto wiring just like any other bean of the same type.\r\n\r\nLooking at your use-case, it looks like you&#39;re creating support for i18n.  I don&#39;t think you want to use Profiles to drive this behavior.  For one reason, with each new language that you want to support, you&#39;ll have to create an entirely new instance of your GreetingService.  Spring has built-in support for i18n; simply create `message` files for each language you want to support, e.g.  Read up on their documentation for [MessageSource](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/MessageSource.html) and [Spring Internationalization](https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/boot-features-internationalization.html).","title":"Spring Boot picks up non-profiled implementations of an interface along with profiled ones when an active profile is set","body":"<p>The <code>@Profile</code> annotation restricts the bean's creation, in the absence of <code>@Profile</code>, and with the presence of <code>@Service</code>, Spring will create the bean and add it to the application context.  Now, it's available for auto wiring just like any other bean of the same type.</p>\n<p>Looking at your use-case, it looks like you're creating support for i18n.  I don't think you want to use Profiles to drive this behavior.  For one reason, with each new language that you want to support, you'll have to create an entirely new instance of your GreetingService.  Spring has built-in support for i18n; simply create <code>message</code> files for each language you want to support, e.g.  Read up on their documentation for <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/MessageSource.html\" rel=\"nofollow noreferrer\">MessageSource</a> and <a href=\"https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/boot-features-internationalization.html\" rel=\"nofollow noreferrer\">Spring Internationalization</a>.</p>\n"},{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679918772,"creation_date":1679918772,"answer_id":75855562,"question_id":75845073,"body_markdown":"Beans without an `@Profile` (or whatever condition for that matter) are always created. \r\n\r\nYou can mark your non-profile limited implementation with `@Primary` which means if no dedicated candidate (through name or qualifier) can be found use this one.","title":"Spring Boot picks up non-profiled implementations of an interface along with profiled ones when an active profile is set","body":"<p>Beans without an <code>@Profile</code> (or whatever condition for that matter) are always created.</p>\n<p>You can mark your non-profile limited implementation with <code>@Primary</code> which means if no dedicated candidate (through name or qualifier) can be found use this one.</p>\n"}],"owner":{"account_id":315165,"reputation":697,"user_id":630779,"accept_rate":50,"display_name":"Matt Moran"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1679918772,"creation_date":1679786541,"question_id":75845073,"body_markdown":"I&#39;ve been doing some illustrative programming for a course I&#39;m doing on Udemy, intended to show principles of Spring Boot dependency injection using Profiles and Qualifiers. \r\n\r\nThere&#39;s a Test that has an `@Autowired` controller. In the Controller it specifies `@ActiveProfiles(&quot;EN&quot;)` for the English `GreetingService`, and in the constructor it has a qualifier `@Qualifier(&quot;i18nService&quot;)` on the `GreetingService` parameter so that the constructor for the Controller wires in an i18nService English GreetingService. \r\n\r\nTrouble is there&#39;s also a `GreetingService` that has no `@Profile` set, and unless I specify a `@Profile` on it then Boot will attempt to wire both the English i18nService *and* the default, non-profiled version, that has no Qualifier or Profile set.\r\n\r\nWhy is this happening? Is there a good reason for it? Is there a convenient way to specify &quot;If there&#39;s a specified component you&#39;ve been told explicitly to wire in, and another more generic one that you haven&#39;t, wire in the one you&#39;ve been told to wire in &amp; leave the other well alone&quot;?\r\n\r\nCode is at https://github.com/Skiamakhos/Spring6DI/tree/main if folks want a look.","title":"Spring Boot picks up non-profiled implementations of an interface along with profiled ones when an active profile is set","body":"<p>I've been doing some illustrative programming for a course I'm doing on Udemy, intended to show principles of Spring Boot dependency injection using Profiles and Qualifiers.</p>\n<p>There's a Test that has an <code>@Autowired</code> controller. In the Controller it specifies <code>@ActiveProfiles(&quot;EN&quot;)</code> for the English <code>GreetingService</code>, and in the constructor it has a qualifier <code>@Qualifier(&quot;i18nService&quot;)</code> on the <code>GreetingService</code> parameter so that the constructor for the Controller wires in an i18nService English GreetingService.</p>\n<p>Trouble is there's also a <code>GreetingService</code> that has no <code>@Profile</code> set, and unless I specify a <code>@Profile</code> on it then Boot will attempt to wire both the English i18nService <em>and</em> the default, non-profiled version, that has no Qualifier or Profile set.</p>\n<p>Why is this happening? Is there a good reason for it? Is there a convenient way to specify &quot;If there's a specified component you've been told explicitly to wire in, and another more generic one that you haven't, wire in the one you've been told to wire in &amp; leave the other well alone&quot;?</p>\n<p>Code is at <a href=\"https://github.com/Skiamakhos/Spring6DI/tree/main\" rel=\"nofollow noreferrer\">https://github.com/Skiamakhos/Spring6DI/tree/main</a> if folks want a look.</p>\n"},{"tags":["java","database","spring-boot","docker","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679918756,"creation_date":1679918756,"answer_id":75855559,"question_id":75849655,"body_markdown":"After I deleted all images, volumes and container which I created before, I ran this command `docker-compose up --build`. Next, I tested the app to send any request and the issue disappeared.","title":"Spring Boot with docker-compose database connection issue through Apache Kafka for mongodb and mysql","body":"<p>After I deleted all images, volumes and container which I created before, I ran this command <code>docker-compose up --build</code>. Next, I tested the app to send any request and the issue disappeared.</p>\n"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75855559,"answer_count":1,"score":-1,"last_activity_date":1679918756,"creation_date":1679854345,"question_id":75849655,"body_markdown":"I have a problem in my Spring Boot CQRS example running on docker. \r\nWhen I try to send any request from postman collection through postman, I get the successful message and I can see any data stored in MongoDB for account-cmd. Except for that, I get 204 No Content message for the account-query part as I cannot see any data stored in Mysql .\r\n\r\n\r\nHere is my docker-compose.yml shown below\r\n\r\n    version: &#39;3.9&#39;\r\n    \r\n    services:\r\n      account-cmd:\r\n        image: &#39;account-cmd:latest&#39;\r\n        build:\r\n          context: ./account.cmd\r\n        ports:\r\n          - &quot;5000:5000&quot;\r\n        depends_on:\r\n          - zookeeper\r\n          - kafka\r\n          - mongodb\r\n        environment:\r\n          - kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\r\n          - kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer\r\n          - spring.data.mongodb.host=mongodb\r\n          - spring.data.mongodb.port=27017\r\n          - spring.data.mongodb.database=bankAccount\r\n          - server.port=5000\r\n          - spring.kafka.producer.bootstrap-servers=kafka:9092\r\n        networks:\r\n          - bankAccount\r\n    \r\n      account-query:\r\n        image: &#39;account-query:latest&#39;\r\n        build:\r\n          context: ./account.query\r\n        ports:\r\n          - &quot;5001:5001&quot;\r\n        depends_on:\r\n          - zookeeper\r\n          - kafka\r\n          - database\r\n        environment:\r\n          - spring.datasource.url=jdbc:mysql://database:3306/bankAccount?createDatabaseIfNotExist=true&amp;useSSL=false&amp;allowPublicKeyRetrieval=true\r\n          - server.port=5001\r\n          - spring.datasource.username=root\r\n          - spring.datasource.password=ippavlova_1990\r\n          - spring.kafka.consumer.group-id=bankaccConsumer\r\n          - spring.kafka.consumer.auto-offset-reset=earliest\r\n          - spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer\r\n          - spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer\r\n          - spring.kafka.consumer.properties.spring.json.trusted.packages=*\r\n          - spring.kafka.consumer.bootstrap-servers=kafka:9092\r\n        networks:\r\n          - bankAccount\r\n    \r\n      database:\r\n        container_name: mysql-database\r\n        image: &#39;mysql:latest&#39;\r\n        ports:\r\n          - &quot;3306:3306&quot;\r\n        restart: always\r\n        environment:\r\n          MYSQL_PASSWORD: ippavlova_1990\r\n          MYSQL_ROOT_PASSWORD: ippavlova_1990\r\n        volumes:\r\n          - db-data:/var/lib/mysql\r\n        networks:\r\n          - bankAccount\r\n        healthcheck:\r\n          test: [ &quot;CMD&quot;, &quot;mysqladmin&quot; ,&quot;ping&quot;, &quot;-h&quot;, &quot;localhost&quot; ]\r\n          timeout: 20s\r\n          retries: 10\r\n    \r\n    \r\n      mongodb:\r\n        image: &quot;mongo:latest&quot;\r\n        container_name: mongo-container\r\n        restart: always\r\n        ports:\r\n          - &quot;27017:27017&quot;\r\n        volumes:\r\n          - mongodb_data_container:/data/db\r\n        networks:\r\n          - bankAccount\r\n    \r\n      zookeeper:\r\n        image: &#39;bitnami/zookeeper:latest&#39;\r\n        restart: always\r\n        ports:\r\n          - &quot;2181:2181&quot;\r\n        volumes:\r\n          - &quot;zookeeper_data:/bitnami&quot;\r\n        environment:\r\n          - ALLOW_ANONYMOUS_LOGIN=yes\r\n        networks:\r\n          - bankAccount\r\n    \r\n      kafka:\r\n        image: &#39;bitnami/kafka:latest&#39;\r\n        ports:\r\n          - &#39;9092:9092&#39;\r\n          - &#39;9093:9093&#39;\r\n        environment:\r\n          - KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper:2181\r\n          - ALLOW_PLAINTEXT_LISTENER=yes\r\n          - KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP=CLIENT:PLAINTEXT,EXTERNAL:PLAINTEXT\r\n          - KAFKA_CFG_LISTENERS=CLIENT://:9092,EXTERNAL://:9093\r\n          - KAFKA_CFG_ADVERTISED_LISTENERS=CLIENT://kafka:9092,EXTERNAL://localhost:9093\r\n          - KAFKA_CFG_INTER_BROKER_LISTENER_NAME=CLIENT\r\n        depends_on:\r\n          - zookeeper\r\n        networks:\r\n          - bankAccount\r\n    \r\n    \r\n    volumes:\r\n      mongodb_data_container:\r\n      db-data:\r\n      zookeeper_data:\r\n        driver: local\r\n      kafka_data:\r\n        driver: local\r\n    \r\n    networks:\r\n      bankAccount:\r\n\r\nHow can I fix it?\r\n\r\n[![Link][1]][1]\r\n[![Link][2]][2]\r\n[![Link][3]][3]\r\n\r\nHere is the MongoDB commands to show the result\r\n\r\n    -&gt; docker exec -it mongo-container bash\r\n    -&gt; mongosh\r\n    -&gt; show dbs\r\n    -&gt; use eventStore\r\n    -&gt; db.eventStore.find({})\r\n\r\nHere is the Mysql commands to show the result\r\n\r\n    -&gt; docker exec -it mysql_container_name mysql -uroot -p\r\n    -&gt; Enter password: password\r\n    -&gt; USE bankAccount\r\n    -&gt; show tables;\r\n    -&gt; SELECT * FROM bank_account;\r\n\r\nHere is my repo : [Link][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EDxEI.png\r\n  [2]: https://i.stack.imgur.com/kaQEx.png\r\n  [3]: https://i.stack.imgur.com/BwYxk.png\r\n  [4]: https://github.com/Rapter1990/cqrs-example","title":"Spring Boot with docker-compose database connection issue through Apache Kafka for mongodb and mysql","body":"<p>I have a problem in my Spring Boot CQRS example running on docker.\nWhen I try to send any request from postman collection through postman, I get the successful message and I can see any data stored in MongoDB for account-cmd. Except for that, I get 204 No Content message for the account-query part as I cannot see any data stored in Mysql .</p>\n<p>Here is my docker-compose.yml shown below</p>\n<pre><code>version: '3.9'\n\nservices:\n  account-cmd:\n    image: 'account-cmd:latest'\n    build:\n      context: ./account.cmd\n    ports:\n      - &quot;5000:5000&quot;\n    depends_on:\n      - zookeeper\n      - kafka\n      - mongodb\n    environment:\n      - kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\n      - kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer\n      - spring.data.mongodb.host=mongodb\n      - spring.data.mongodb.port=27017\n      - spring.data.mongodb.database=bankAccount\n      - server.port=5000\n      - spring.kafka.producer.bootstrap-servers=kafka:9092\n    networks:\n      - bankAccount\n\n  account-query:\n    image: 'account-query:latest'\n    build:\n      context: ./account.query\n    ports:\n      - &quot;5001:5001&quot;\n    depends_on:\n      - zookeeper\n      - kafka\n      - database\n    environment:\n      - spring.datasource.url=jdbc:mysql://database:3306/bankAccount?createDatabaseIfNotExist=true&amp;useSSL=false&amp;allowPublicKeyRetrieval=true\n      - server.port=5001\n      - spring.datasource.username=root\n      - spring.datasource.password=ippavlova_1990\n      - spring.kafka.consumer.group-id=bankaccConsumer\n      - spring.kafka.consumer.auto-offset-reset=earliest\n      - spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer\n      - spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer\n      - spring.kafka.consumer.properties.spring.json.trusted.packages=*\n      - spring.kafka.consumer.bootstrap-servers=kafka:9092\n    networks:\n      - bankAccount\n\n  database:\n    container_name: mysql-database\n    image: 'mysql:latest'\n    ports:\n      - &quot;3306:3306&quot;\n    restart: always\n    environment:\n      MYSQL_PASSWORD: ippavlova_1990\n      MYSQL_ROOT_PASSWORD: ippavlova_1990\n    volumes:\n      - db-data:/var/lib/mysql\n    networks:\n      - bankAccount\n    healthcheck:\n      test: [ &quot;CMD&quot;, &quot;mysqladmin&quot; ,&quot;ping&quot;, &quot;-h&quot;, &quot;localhost&quot; ]\n      timeout: 20s\n      retries: 10\n\n\n  mongodb:\n    image: &quot;mongo:latest&quot;\n    container_name: mongo-container\n    restart: always\n    ports:\n      - &quot;27017:27017&quot;\n    volumes:\n      - mongodb_data_container:/data/db\n    networks:\n      - bankAccount\n\n  zookeeper:\n    image: 'bitnami/zookeeper:latest'\n    restart: always\n    ports:\n      - &quot;2181:2181&quot;\n    volumes:\n      - &quot;zookeeper_data:/bitnami&quot;\n    environment:\n      - ALLOW_ANONYMOUS_LOGIN=yes\n    networks:\n      - bankAccount\n\n  kafka:\n    image: 'bitnami/kafka:latest'\n    ports:\n      - '9092:9092'\n      - '9093:9093'\n    environment:\n      - KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper:2181\n      - ALLOW_PLAINTEXT_LISTENER=yes\n      - KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP=CLIENT:PLAINTEXT,EXTERNAL:PLAINTEXT\n      - KAFKA_CFG_LISTENERS=CLIENT://:9092,EXTERNAL://:9093\n      - KAFKA_CFG_ADVERTISED_LISTENERS=CLIENT://kafka:9092,EXTERNAL://localhost:9093\n      - KAFKA_CFG_INTER_BROKER_LISTENER_NAME=CLIENT\n    depends_on:\n      - zookeeper\n    networks:\n      - bankAccount\n\n\nvolumes:\n  mongodb_data_container:\n  db-data:\n  zookeeper_data:\n    driver: local\n  kafka_data:\n    driver: local\n\nnetworks:\n  bankAccount:\n</code></pre>\n<p>How can I fix it?</p>\n<p><a href=\"https://i.stack.imgur.com/EDxEI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EDxEI.png\" alt=\"Link\" /></a>\n<a href=\"https://i.stack.imgur.com/kaQEx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kaQEx.png\" alt=\"Link\" /></a>\n<a href=\"https://i.stack.imgur.com/BwYxk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BwYxk.png\" alt=\"Link\" /></a></p>\n<p>Here is the MongoDB commands to show the result</p>\n<pre><code>-&gt; docker exec -it mongo-container bash\n-&gt; mongosh\n-&gt; show dbs\n-&gt; use eventStore\n-&gt; db.eventStore.find({})\n</code></pre>\n<p>Here is the Mysql commands to show the result</p>\n<pre><code>-&gt; docker exec -it mysql_container_name mysql -uroot -p\n-&gt; Enter password: password\n-&gt; USE bankAccount\n-&gt; show tables;\n-&gt; SELECT * FROM bank_account;\n</code></pre>\n<p>Here is my repo : <a href=\"https://github.com/Rapter1990/cqrs-example\" rel=\"nofollow noreferrer\">Link</a></p>\n"},{"tags":["java","selenium-webdriver"],"owner":{"account_id":22682239,"reputation":21,"user_id":16852452,"display_name":"Mani Maran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679918726,"creation_date":1679918726,"question_id":75855556,"body_markdown":"I have two classes. Class A and Class B. I have created a number of tests and grouped them in Class A.\r\n\r\nIn Class B,I have another set of tests. Those tests on class B (which is my runner class) are dependent on group created in Class A.\r\n\r\nSo now,in my TestNG.xml,inside the class tag i have class B(runner class).When i run as TESTNG suite,the groups are not running since those are in another class.\r\n\r\nMy requirement is to run Class B along with groups in Class A.\r\n\r\nI can&#39;t be able to share the code due to company policy,Apologies in advance.","title":"Groups of one class should get run with another class in testng.xml","body":"<p>I have two classes. Class A and Class B. I have created a number of tests and grouped them in Class A.</p>\n<p>In Class B,I have another set of tests. Those tests on class B (which is my runner class) are dependent on group created in Class A.</p>\n<p>So now,in my TestNG.xml,inside the class tag i have class B(runner class).When i run as TESTNG suite,the groups are not running since those are in another class.</p>\n<p>My requirement is to run Class B along with groups in Class A.</p>\n<p>I can't be able to share the code due to company policy,Apologies in advance.</p>\n"},{"tags":["java","spring-boot","jackson","akka","microservices"],"comments":[{"owner":{"account_id":2510424,"reputation":540,"user_id":2183049,"display_name":"Habil"},"score":0,"creation_date":1595235301,"post_id":62991628,"comment_id":111393278,"body_markdown":"Check your jackson-databind dependency version. &quot;Caused by: java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/ser/std/ToStringSerializerBase&quot;","body":"Check your jackson-databind dependency version. &quot;Caused by: java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/ser/std/ToStringSerializerBas&zwnj;&#8203;e&quot;"},{"owner":{"account_id":36224,"reputation":895,"user_id":103190,"display_name":"ignasi35"},"score":1,"creation_date":1595236052,"post_id":62991628,"comment_id":111393656,"body_markdown":"To add to @Habil&#39;s comment. Make sure you are not mixing up jackson artifacts from different versions. You have an explicit dependency to `jackson-databind:2.9.8` but Akka artifacts probably have a transitive dependency (potentially a newer, non-compatible version fo Jackson).","body":"To add to @Habil&#39;s comment. Make sure you are not mixing up jackson artifacts from different versions. You have an explicit dependency to <code>jackson-databind:2.9.8</code> but Akka artifacts probably have a transitive dependency (potentially a newer, non-compatible version fo Jackson)."},{"owner":{"account_id":36224,"reputation":895,"user_id":103190,"display_name":"ignasi35"},"score":1,"creation_date":1595236103,"post_id":62991628,"comment_id":111393683,"body_markdown":"Unrelated: consider bumping your Akka version to a non-milestone. So, instead of using `2.6.0-M3` prefer the latest (as of this writing) `2.6.8`.","body":"Unrelated: consider bumping your Akka version to a non-milestone. So, instead of using <code>2.6.0-M3</code> prefer the latest (as of this writing) <code>2.6.8</code>."},{"owner":{"account_id":16607139,"reputation":197,"user_id":12001283,"display_name":"Ashen Jayawardena"},"score":0,"creation_date":1595267278,"post_id":62991628,"comment_id":111409618,"body_markdown":"thanks for your suggestions, actually upgrading my jackson core(not downgrading ) to the version fixed  2.11.0 the problem, i thought it was unstable though","body":"thanks for your suggestions, actually upgrading my jackson core(not downgrading ) to the version fixed  2.11.0 the problem, i thought it was unstable though"}],"answers":[{"tags":[],"owner":{"account_id":17474918,"reputation":11,"user_id":12863696,"display_name":"Raider bat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679918512,"creation_date":1679918512,"answer_id":75855524,"question_id":62991628,"body_markdown":"Upd **jackson-databind** version to **2.14.2**\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n      &lt;version&gt;2.14.2&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"How to fix org.springframework.beans.BeanInstantiationException: Failed to instantiate","body":"<p>Upd <strong>jackson-databind</strong> version to <strong>2.14.2</strong></p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n  &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n  &lt;version&gt;2.14.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":16607139,"reputation":197,"user_id":12001283,"display_name":"Ashen Jayawardena"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4075,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1679918512,"creation_date":1595234401,"question_id":62991628,"body_markdown":"I&#39;m building a project from akka and spring, this is my POM.xml\r\n\r\n    &lt;project&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.3.1.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n    &lt;groupId&gt;WolfPack&lt;/groupId&gt;\r\n    &lt;artifactId&gt;Worker-Service&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;akka.version&gt;2.6.0-M3&lt;/akka.version&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n        &lt;java.version&gt;11&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n        &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\r\n        &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\r\n        &lt;version&gt;3.10.0&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n       \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;\r\n            &lt;artifactId&gt;akka-actor_2.12&lt;/artifactId&gt;\r\n            &lt;version&gt;${akka.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;akka-http_2.12&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;10.1.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;akka-stream_2.12&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${akka.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;akka-http-jackson_2.12&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;10.1.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\t\t\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.9.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.9.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.9.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.6.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;WorkerService&lt;/mainClass&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\nand i keep getting this error when i run \r\n\r\n    org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.fasterxml.jackson.datatype.jsr310.JavaTimeModule]: Unresolvable class definition; nested exception is java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/ser/std/ToStringSerializerBase\r\n    at org.springframework.beans.BeanUtils.instantiateClass (BeanUtils.java:149)\r\n    at org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.registerWellKnownModulesIfAvailable (Jackson2ObjectMapperBuilder.java:805)\r\n    at org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.configure (Jackson2ObjectMapperBuilder.java:669)\r\n    at org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.build (Jackson2ObjectMapperBuilder.java:652)\r\n    at org.springframework.http.converter.json.MappingJackson2HttpMessageConverter.&lt;init&gt; (MappingJackson2HttpMessageConverter.java:59)\r\n    at org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter.&lt;init&gt; (AllEncompassingFormHttpMessageConverter.java:76)\r\n    at org.springframework.web.client.RestTemplate.&lt;init&gt; (RestTemplate.java:147)\r\n    at WorkerService.&lt;init&gt; (WorkerService.java:39)\r\n    at WorkerService.main (WorkerService.java:77)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:566)\r\n    at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:282)\r\n    at java.lang.Thread.run (Thread.java:834)\r\n     Caused by: java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/ser/std/ToStringSerializerBase\r\n    at java.lang.ClassLoader.defineClass1 (Native Method)\r\n    at java.lang.ClassLoader.defineClass (ClassLoader.java:1016)\r\n    at java.security.SecureClassLoader.defineClass (SecureClassLoader.java:174)\r\n    at java.net.URLClassLoader.defineClass (URLClassLoader.java:550)\r\n    at java.net.URLClassLoader$1.run (URLClassLoader.java:458)\r\n    at java.net.URLClassLoader$1.run (URLClassLoader.java:452)\r\n    at java.security.AccessController.doPrivileged (Native Method)\r\n    at java.net.URLClassLoader.findClass (URLClassLoader.java:451)\r\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:588)\r\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:521)\r\n    at java.lang.Class.getDeclaredConstructors0 (Native Method)\r\n    at java.lang.Class.privateGetDeclaredConstructors (Class.java:3137)\r\n    at java.lang.Class.getConstructor0 (Class.java:3342)\r\n    at java.lang.Class.getDeclaredConstructor (Class.java:2553)\r\n    at org.springframework.beans.BeanUtils.instantiateClass (BeanUtils.java:139)\r\n    at org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.registerWellKnownModulesIfAvailable (Jackson2ObjectMapperBuilder.java:805)\r\n    at org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.configure (Jackson2ObjectMapperBuilder.java:669)\r\n    at org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.build (Jackson2ObjectMapperBuilder.java:652)\r\n    at org.springframework.http.converter.json.MappingJackson2HttpMessageConverter.&lt;init&gt; (MappingJackson2HttpMessageConverter.java:59)\r\n    at org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter.&lt;init&gt; (AllEncompassingFormHttpMessageConverter.java:76)\r\n    at org.springframework.web.client.RestTemplate.&lt;init&gt; (RestTemplate.java:147)\r\n    at WorkerService.&lt;init&gt; (WorkerService.java:39)\r\n    at WorkerService.main (WorkerService.java:77)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:566)\r\n    at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:282)\r\n    at java.lang.Thread.run (Thread.java:834)\r\n    Caused by: java.lang.ClassNotFoundException: com.fasterxml.jackson.databind.ser.std.ToStringSerializerBase\r\n    at java.net.URLClassLoader.findClass (URLClassLoader.java:471)\r\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:588)\r\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:521)\r\n    at java.lang.ClassLoader.defineClass1 (Native Method)\r\n    at java.lang.ClassLoader.defineClass (ClassLoader.java:1016)\r\n    at java.security.SecureClassLoader.defineClass (SecureClassLoader.java:174)\r\n    at java.net.URLClassLoader.defineClass (URLClassLoader.java:550)\r\n    at java.net.URLClassLoader$1.run (URLClassLoader.java:458)\r\n    at java.net.URLClassLoader$1.run (URLClassLoader.java:452)\r\n    at java.security.AccessController.doPrivileged (Native Method)\r\n    at java.net.URLClassLoader.findClass (URLClassLoader.java:451)\r\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:588)\r\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:521)\r\n    at java.lang.Class.getDeclaredConstructors0 (Native Method)\r\n    at java.lang.Class.privateGetDeclaredConstructors (Class.java:3137)\r\n    at java.lang.Class.getConstructor0 (Class.java:3342)\r\n    at java.lang.Class.getDeclaredConstructor (Class.java:2553)\r\n    at org.springframework.beans.BeanUtils.instantiateClass (BeanUtils.java:139)\r\n    at org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.registerWellKnownModulesIfAvailable (Jackson2ObjectMapperBuilder.java:805)\r\n    at org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.configure (Jackson2ObjectMapperBuilder.java:669)\r\n    at org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.build (Jackson2ObjectMapperBuilder.java:652)\r\n    at org.springframework.http.converter.json.MappingJackson2HttpMessageConverter.&lt;init&gt; (MappingJackson2HttpMessageConverter.java:59)\r\n    at org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter.&lt;init&gt; (AllEncompassingFormHttpMessageConverter.java:76)\r\n    at org.springframework.web.client.RestTemplate.&lt;init&gt; (RestTemplate.java:147)\r\n    at WorkerService.&lt;init&gt; (WorkerService.java:39)\r\n    at WorkerService.main (WorkerService.java:77)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:566)\r\n    at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:282)\r\n    at java.lang.Thread.run (Thread.java:834)\r\n\r\nI researched this problem and non of the solutions worked and i think most of them are outdated,  i tried  downgrading the jackson dependencies to various depths but nothing seemed to work,then i tried removing the jackson Core dependency that didn&#39;t work as well, there&#39;s no jackson dependency mismatch as well as you can see in the POM.xml.\r\n\r\nthe error log shows two java lines in my method java:39 and java:77, java:77 is just the instance the java:39 is called, and my java:39 is\r\n \r\n\r\n    private String[] workers  = restTemplate.getForObject(&quot;http://localhost:8082/workers&quot;, String[].class); \r\n\r\nthe json representation of the value return from posting a GET to`http://localhost:8082/workers` is\r\n\r\n    [\r\n    &quot;tim&quot;,\r\n    &quot;ashen&quot;\r\n    ]\r\n\r\n    \r\n\r\n\r\n","title":"How to fix org.springframework.beans.BeanInstantiationException: Failed to instantiate","body":"<p>I'm building a project from akka and spring, this is my POM.xml</p>\n<pre><code>&lt;project&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.3.1.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;WolfPack&lt;/groupId&gt;\n&lt;artifactId&gt;Worker-Service&lt;/artifactId&gt;\n&lt;version&gt;0.0.1&lt;/version&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;properties&gt;\n    &lt;akka.version&gt;2.6.0-M3&lt;/akka.version&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n    &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\n    &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\n    &lt;version&gt;3.10.0&lt;/version&gt;\n   &lt;/dependency&gt;\n   \n    &lt;dependency&gt;\n        &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;\n        &lt;artifactId&gt;akka-actor_2.12&lt;/artifactId&gt;\n        &lt;version&gt;${akka.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;\n        &lt;artifactId&gt;akka-http_2.12&lt;/artifactId&gt;\n        &lt;version&gt;10.1.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;\n        &lt;artifactId&gt;akka-stream_2.12&lt;/artifactId&gt;\n        &lt;version&gt;${akka.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;\n        &lt;artifactId&gt;akka-http-jackson_2.12&lt;/artifactId&gt;\n        &lt;version&gt;10.1.8&lt;/version&gt;\n    &lt;/dependency&gt;       \n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n        &lt;version&gt;2.9.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n        &lt;version&gt;2.9.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.9.8&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.6.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;mainClass&gt;WorkerService&lt;/mainClass&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>and i keep getting this error when i run</p>\n<pre><code>org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.fasterxml.jackson.datatype.jsr310.JavaTimeModule]: Unresolvable class definition; nested exception is java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/ser/std/ToStringSerializerBase\nat org.springframework.beans.BeanUtils.instantiateClass (BeanUtils.java:149)\nat org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.registerWellKnownModulesIfAvailable (Jackson2ObjectMapperBuilder.java:805)\nat org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.configure (Jackson2ObjectMapperBuilder.java:669)\nat org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.build (Jackson2ObjectMapperBuilder.java:652)\nat org.springframework.http.converter.json.MappingJackson2HttpMessageConverter.&lt;init&gt; (MappingJackson2HttpMessageConverter.java:59)\nat org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter.&lt;init&gt; (AllEncompassingFormHttpMessageConverter.java:76)\nat org.springframework.web.client.RestTemplate.&lt;init&gt; (RestTemplate.java:147)\nat WorkerService.&lt;init&gt; (WorkerService.java:39)\nat WorkerService.main (WorkerService.java:77)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke (Method.java:566)\nat org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:282)\nat java.lang.Thread.run (Thread.java:834)\n Caused by: java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/ser/std/ToStringSerializerBase\nat java.lang.ClassLoader.defineClass1 (Native Method)\nat java.lang.ClassLoader.defineClass (ClassLoader.java:1016)\nat java.security.SecureClassLoader.defineClass (SecureClassLoader.java:174)\nat java.net.URLClassLoader.defineClass (URLClassLoader.java:550)\nat java.net.URLClassLoader$1.run (URLClassLoader.java:458)\nat java.net.URLClassLoader$1.run (URLClassLoader.java:452)\nat java.security.AccessController.doPrivileged (Native Method)\nat java.net.URLClassLoader.findClass (URLClassLoader.java:451)\nat java.lang.ClassLoader.loadClass (ClassLoader.java:588)\nat java.lang.ClassLoader.loadClass (ClassLoader.java:521)\nat java.lang.Class.getDeclaredConstructors0 (Native Method)\nat java.lang.Class.privateGetDeclaredConstructors (Class.java:3137)\nat java.lang.Class.getConstructor0 (Class.java:3342)\nat java.lang.Class.getDeclaredConstructor (Class.java:2553)\nat org.springframework.beans.BeanUtils.instantiateClass (BeanUtils.java:139)\nat org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.registerWellKnownModulesIfAvailable (Jackson2ObjectMapperBuilder.java:805)\nat org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.configure (Jackson2ObjectMapperBuilder.java:669)\nat org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.build (Jackson2ObjectMapperBuilder.java:652)\nat org.springframework.http.converter.json.MappingJackson2HttpMessageConverter.&lt;init&gt; (MappingJackson2HttpMessageConverter.java:59)\nat org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter.&lt;init&gt; (AllEncompassingFormHttpMessageConverter.java:76)\nat org.springframework.web.client.RestTemplate.&lt;init&gt; (RestTemplate.java:147)\nat WorkerService.&lt;init&gt; (WorkerService.java:39)\nat WorkerService.main (WorkerService.java:77)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke (Method.java:566)\nat org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:282)\nat java.lang.Thread.run (Thread.java:834)\nCaused by: java.lang.ClassNotFoundException: com.fasterxml.jackson.databind.ser.std.ToStringSerializerBase\nat java.net.URLClassLoader.findClass (URLClassLoader.java:471)\nat java.lang.ClassLoader.loadClass (ClassLoader.java:588)\nat java.lang.ClassLoader.loadClass (ClassLoader.java:521)\nat java.lang.ClassLoader.defineClass1 (Native Method)\nat java.lang.ClassLoader.defineClass (ClassLoader.java:1016)\nat java.security.SecureClassLoader.defineClass (SecureClassLoader.java:174)\nat java.net.URLClassLoader.defineClass (URLClassLoader.java:550)\nat java.net.URLClassLoader$1.run (URLClassLoader.java:458)\nat java.net.URLClassLoader$1.run (URLClassLoader.java:452)\nat java.security.AccessController.doPrivileged (Native Method)\nat java.net.URLClassLoader.findClass (URLClassLoader.java:451)\nat java.lang.ClassLoader.loadClass (ClassLoader.java:588)\nat java.lang.ClassLoader.loadClass (ClassLoader.java:521)\nat java.lang.Class.getDeclaredConstructors0 (Native Method)\nat java.lang.Class.privateGetDeclaredConstructors (Class.java:3137)\nat java.lang.Class.getConstructor0 (Class.java:3342)\nat java.lang.Class.getDeclaredConstructor (Class.java:2553)\nat org.springframework.beans.BeanUtils.instantiateClass (BeanUtils.java:139)\nat org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.registerWellKnownModulesIfAvailable (Jackson2ObjectMapperBuilder.java:805)\nat org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.configure (Jackson2ObjectMapperBuilder.java:669)\nat org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.build (Jackson2ObjectMapperBuilder.java:652)\nat org.springframework.http.converter.json.MappingJackson2HttpMessageConverter.&lt;init&gt; (MappingJackson2HttpMessageConverter.java:59)\nat org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter.&lt;init&gt; (AllEncompassingFormHttpMessageConverter.java:76)\nat org.springframework.web.client.RestTemplate.&lt;init&gt; (RestTemplate.java:147)\nat WorkerService.&lt;init&gt; (WorkerService.java:39)\nat WorkerService.main (WorkerService.java:77)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke (Method.java:566)\nat org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:282)\nat java.lang.Thread.run (Thread.java:834)\n</code></pre>\n<p>I researched this problem and non of the solutions worked and i think most of them are outdated,  i tried  downgrading the jackson dependencies to various depths but nothing seemed to work,then i tried removing the jackson Core dependency that didn't work as well, there's no jackson dependency mismatch as well as you can see in the POM.xml.</p>\n<p>the error log shows two java lines in my method java:39 and java:77, java:77 is just the instance the java:39 is called, and my java:39 is</p>\n<pre><code>private String[] workers  = restTemplate.getForObject(&quot;http://localhost:8082/workers&quot;, String[].class); \n</code></pre>\n<p>the json representation of the value return from posting a GET to<code>http://localhost:8082/workers</code> is</p>\n<pre><code>[\n&quot;tim&quot;,\n&quot;ashen&quot;\n]\n</code></pre>\n"},{"tags":["java","yaml","snakeyaml"],"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679918292,"creation_date":1679918292,"question_id":75855483,"body_markdown":"Quickly linked with https://stackoverflow.com/questions/75739023/infinite-loop-while-reading-yaml-file-because-of-pointers, I have an issue while saving the yaml content.\r\n\r\nI have this yaml file:\r\n```yml\r\n&amp;id085\r\nminerate: &amp;id086\r\n  diamond: *id085\r\n  gold: *id085\r\n  iron: *id085\r\n  coal: *id086\r\n  ancient debris: *id085\r\n```\r\nI&#39;m doing like that:\r\n```java\r\npublic void save() {\r\n   Configuration config = YamlConfiguration.load(file);\r\n   config.set(&quot;minerate-full-mined&quot;, getFullMined());\r\n   serializeMinerate(minerate, config.createSection(&quot;minerate&quot;));\r\n   try {\r\n\t  YamlConfiguration.save(config, file);\r\n   } catch (IOException e) {\r\n      e.printStackTrace();\r\n   }\r\n}\r\n\r\nprivate int getFullMined() {\r\n   return fullMined;\r\n}\r\n\r\nprivate void serializeMinerate(Minerate minerate, Configuration minerateSection) {\r\n\tfor (Minerate.MinerateType minerateType : Minerate.MinerateType.values()) {\r\n\t\tString key = minerateType.getName().toLowerCase(Locale.ROOT);\r\n\t\tminerateSection.set(key, minerate.getMinerateType(minerateType));\r\n\t}\r\n}\r\n```\r\nIf you need it, you can find the object [`Minerate` here](https://github.com/Elikill58/Negativity/blob/v2/common/src/com/elikill58/negativity/universal/Minerate.java)\r\n\r\nThe error:\r\n```txt\r\nCaused by: java.lang.StackOverflowError\r\n\tat java.lang.String.valueOf(String.java:4215) ~[?:?]\r\n\tat java.lang.StringBuilder.append(StringBuilder.java:173) ~[?:?]\r\n\tat java.util.AbstractMap.toString(AbstractMap.java:555) ~[?:?]\r\n\tat java.lang.String.valueOf(String.java:4215) ~[?:?]\r\n\tat java.lang.StringBuilder.append(StringBuilder.java:173) ~[?:?]\r\n\tat java.util.AbstractMap.toString(AbstractMap.java:555) ~[?:?]\r\n\tat java.lang.String.valueOf(String.java:4215) ~[?:?]\r\n\tat java.lang.StringBuilder.append(StringBuilder.java:173) ~[?:?]\r\n\tat java.util.AbstractMap.toString(AbstractMap.java:555) ~[?:?]\r\n\tat java.lang.String.valueOf(String.java:4215) ~[?:?]\r\n\tat java.lang.StringBuilder.append(StringBuilder.java:173) ~[?:?]\r\n\tat java.util.AbstractMap.toString(AbstractMap.java:555) ~[?:?]\r\n\tat java.lang.String.valueOf(String.java:4215) ~[?:?]\r\n\tat java.lang.StringBuilder.append(StringBuilder.java:173) ~[?:?]\r\n\tat java.util.AbstractMap.toString(AbstractMap.java:555) ~[?:?]\r\n\tat java.lang.String.valueOf(String.java:4215) ~[?:?]\r\n```\r\nIn the error, I can&#39;t find the exact line as there is too many lines.\r\n\r\nHow can I fix it?","title":"How to prevent snakeyaml from using pointers?","body":"<p>Quickly linked with <a href=\"https://stackoverflow.com/questions/75739023/infinite-loop-while-reading-yaml-file-because-of-pointers\">Infinite loop while reading yaml file because of pointers</a>, I have an issue while saving the yaml content.</p>\n<p>I have this yaml file:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>&amp;id085\nminerate: &amp;id086\n  diamond: *id085\n  gold: *id085\n  iron: *id085\n  coal: *id086\n  ancient debris: *id085\n</code></pre>\n<p>I'm doing like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void save() {\n   Configuration config = YamlConfiguration.load(file);\n   config.set(&quot;minerate-full-mined&quot;, getFullMined());\n   serializeMinerate(minerate, config.createSection(&quot;minerate&quot;));\n   try {\n      YamlConfiguration.save(config, file);\n   } catch (IOException e) {\n      e.printStackTrace();\n   }\n}\n\nprivate int getFullMined() {\n   return fullMined;\n}\n\nprivate void serializeMinerate(Minerate minerate, Configuration minerateSection) {\n    for (Minerate.MinerateType minerateType : Minerate.MinerateType.values()) {\n        String key = minerateType.getName().toLowerCase(Locale.ROOT);\n        minerateSection.set(key, minerate.getMinerateType(minerateType));\n    }\n}\n</code></pre>\n<p>If you need it, you can find the object <a href=\"https://github.com/Elikill58/Negativity/blob/v2/common/src/com/elikill58/negativity/universal/Minerate.java\" rel=\"nofollow noreferrer\"><code>Minerate</code> here</a></p>\n<p>The error:</p>\n<pre><code>Caused by: java.lang.StackOverflowError\n    at java.lang.String.valueOf(String.java:4215) ~[?:?]\n    at java.lang.StringBuilder.append(StringBuilder.java:173) ~[?:?]\n    at java.util.AbstractMap.toString(AbstractMap.java:555) ~[?:?]\n    at java.lang.String.valueOf(String.java:4215) ~[?:?]\n    at java.lang.StringBuilder.append(StringBuilder.java:173) ~[?:?]\n    at java.util.AbstractMap.toString(AbstractMap.java:555) ~[?:?]\n    at java.lang.String.valueOf(String.java:4215) ~[?:?]\n    at java.lang.StringBuilder.append(StringBuilder.java:173) ~[?:?]\n    at java.util.AbstractMap.toString(AbstractMap.java:555) ~[?:?]\n    at java.lang.String.valueOf(String.java:4215) ~[?:?]\n    at java.lang.StringBuilder.append(StringBuilder.java:173) ~[?:?]\n    at java.util.AbstractMap.toString(AbstractMap.java:555) ~[?:?]\n    at java.lang.String.valueOf(String.java:4215) ~[?:?]\n    at java.lang.StringBuilder.append(StringBuilder.java:173) ~[?:?]\n    at java.util.AbstractMap.toString(AbstractMap.java:555) ~[?:?]\n    at java.lang.String.valueOf(String.java:4215) ~[?:?]\n</code></pre>\n<p>In the error, I can't find the exact line as there is too many lines.</p>\n<p>How can I fix it?</p>\n"},{"tags":["python","java","sql","redis","tags"],"answers":[{"tags":[],"owner":{"account_id":4160855,"reputation":3938,"user_id":5338708,"display_name":"Simon Prickett"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679918088,"creation_date":1679915839,"answer_id":75855102,"question_id":75848424,"body_markdown":"Here&#39;s the Redis commands for your scenario - to run these from a programming language you&#39;ll need to map them to a Redis Client, such as redis-py (https://github.com/redis/redis-py) for Python.  This is pretty straightforward as these map Redis commands to functions of the same name and the order of arguments is generally the same.\r\n\r\nStoring a string:\r\n\r\n```\r\n127.0.0.1:6379&gt; set mystring &quot;This is Database Systems.&quot;\r\nOK\r\n```\r\n\r\nGet length of a string:\r\n\r\n```\r\n127.0.0.1:6379&gt; strlen mystring\r\n(integer) 25\r\n```\r\n\r\nAppend sentence to the end of the string:\r\n\r\n```\r\n127.0.0.1:6379&gt; append mystring &quot; The course code is NDBS742.&quot;\r\n(integer) 53\r\n127.0.0.1:6379&gt; get mystring\r\n&quot;This is Database Systems. The course code is NDBS742.&quot;\r\n```\r\n\r\nExpire the key after 60 seconds:\r\n\r\n```\r\n127.0.0.1:6379&gt; expire mystring 60\r\n(integer) 1\r\n```\r\n\r\nAll commands documented at https://redis.io/commands/\r\n\r\nWith `redis-py` (`pip install redis`) your code looks like this:\r\n\r\n```python\r\nimport redis\r\n\r\n# Connect to Redis...\r\nr = redis.Redis(host=&quot;localhost&quot;, port=6379, decode_responses=True)\r\n\r\n# Store a string.\r\nr.set(&quot;mystring&quot;, &quot;This is Database Systems.&quot;)\r\n\r\n# Get the length of the string.\r\nprint(f&quot;Length: {r.strlen(&#39;mystring&#39;)}&quot;)\r\n\r\n# Append sentence to the end of the string.\r\nr.append(&quot;mystring&quot;, &quot; The course code is NDBS742.&quot;)\r\n\r\n# Get the value of the string back.\r\nprint(f&quot;mystring: {r.get(&#39;mystring&#39;)}&quot;)\r\n\r\n# Expire the key after 60 seconds.\r\nr.expire(&quot;mystring&quot;, 60)\r\n```\r\n\r\nLet&#39;s run that:\r\n\r\n```\r\n$ python main.py\r\nLength: 25\r\nmystring: This is Database Systems. The course code is NDBS742.\r\n```\r\n\r\nTested with Python 3.10.7, redis-py 4.5.3","title":"Can I get assistance with Redis commands that do the following?","body":"<p>Here's the Redis commands for your scenario - to run these from a programming language you'll need to map them to a Redis Client, such as redis-py (<a href=\"https://github.com/redis/redis-py\" rel=\"nofollow noreferrer\">https://github.com/redis/redis-py</a>) for Python.  This is pretty straightforward as these map Redis commands to functions of the same name and the order of arguments is generally the same.</p>\n<p>Storing a string:</p>\n<pre><code>127.0.0.1:6379&gt; set mystring &quot;This is Database Systems.&quot;\nOK\n</code></pre>\n<p>Get length of a string:</p>\n<pre><code>127.0.0.1:6379&gt; strlen mystring\n(integer) 25\n</code></pre>\n<p>Append sentence to the end of the string:</p>\n<pre><code>127.0.0.1:6379&gt; append mystring &quot; The course code is NDBS742.&quot;\n(integer) 53\n127.0.0.1:6379&gt; get mystring\n&quot;This is Database Systems. The course code is NDBS742.&quot;\n</code></pre>\n<p>Expire the key after 60 seconds:</p>\n<pre><code>127.0.0.1:6379&gt; expire mystring 60\n(integer) 1\n</code></pre>\n<p>All commands documented at <a href=\"https://redis.io/commands/\" rel=\"nofollow noreferrer\">https://redis.io/commands/</a></p>\n<p>With <code>redis-py</code> (<code>pip install redis</code>) your code looks like this:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import redis\n\n# Connect to Redis...\nr = redis.Redis(host=&quot;localhost&quot;, port=6379, decode_responses=True)\n\n# Store a string.\nr.set(&quot;mystring&quot;, &quot;This is Database Systems.&quot;)\n\n# Get the length of the string.\nprint(f&quot;Length: {r.strlen('mystring')}&quot;)\n\n# Append sentence to the end of the string.\nr.append(&quot;mystring&quot;, &quot; The course code is NDBS742.&quot;)\n\n# Get the value of the string back.\nprint(f&quot;mystring: {r.get('mystring')}&quot;)\n\n# Expire the key after 60 seconds.\nr.expire(&quot;mystring&quot;, 60)\n</code></pre>\n<p>Let's run that:</p>\n<pre><code>$ python main.py\nLength: 25\nmystring: This is Database Systems. The course code is NDBS742.\n</code></pre>\n<p>Tested with Python 3.10.7, redis-py 4.5.3</p>\n"}],"owner":{"account_id":28129934,"reputation":1,"user_id":21494706,"display_name":"Tshepang Chou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679918088,"creation_date":1679842204,"question_id":75848424,"body_markdown":"commands of Redis to do the following: \r\n\r\n1. Store this sentence in a string: “This is Database Systems.”\r\n2. Display the length of the string\r\n3. Add the sentence “The course code is NDBS742” to the end of the string so it reads as “This is Database Systems. The course code is NDBS742.”\r\n4. Automatically delete the string from the database in 60 seconds.\r\n\r\n","title":"Can I get assistance with Redis commands that do the following?","body":"<p>commands of Redis to do the following:</p>\n<ol>\n<li>Store this sentence in a string: “This is Database Systems.”</li>\n<li>Display the length of the string</li>\n<li>Add the sentence “The course code is NDBS742” to the end of the string so it reads as “This is Database Systems. The course code is NDBS742.”</li>\n<li>Automatically delete the string from the database in 60 seconds.</li>\n</ol>\n"},{"tags":["java","spring","unit-testing","mockito"],"comments":[{"owner":{"account_id":1041463,"reputation":3845,"user_id":1047418,"display_name":"Torben"},"score":0,"creation_date":1679917889,"post_id":75855358,"comment_id":133801227,"body_markdown":"You mock the `sendEmail(...)`-method to throw an exception and `verify(...)` afterwards that it was called and that the correct result was returned from `sendSuccessEmail(...)`. Code coverage then will ensure that the catch block gets counted.","body":"You mock the <code>sendEmail(...)</code>-method to throw an exception and <code>verify(...)</code> afterwards that it was called and that the correct result was returned from <code>sendSuccessEmail(...)</code>. Code coverage then will ensure that the catch block gets counted."},{"owner":{"account_id":987434,"reputation":10946,"user_id":1005607,"accept_rate":64,"display_name":"gene b."},"score":0,"creation_date":1679918259,"post_id":75855358,"comment_id":133801323,"body_markdown":"I did, but the caller methods are still flagged as untested in Jacoco. I have a line coveage requirements, code to unit tests: 0.91 vs 0.95","body":"I did, but the caller methods are still flagged as untested in Jacoco. I have a line coveage requirements, code to unit tests: 0.91 vs 0.95"},{"owner":{"account_id":1041463,"reputation":3845,"user_id":1047418,"display_name":"Torben"},"score":0,"creation_date":1679918399,"post_id":75855358,"comment_id":133801354,"body_markdown":"Please specify what &quot;flagged as untested&quot; means.","body":"Please specify what &quot;flagged as untested&quot; means."},{"owner":{"account_id":987434,"reputation":10946,"user_id":1005607,"accept_rate":64,"display_name":"gene b."},"score":0,"creation_date":1679918412,"post_id":75855358,"comment_id":133801357,"body_markdown":"Coverage ratio, code to unit tests.","body":"Coverage ratio, code to unit tests."},{"owner":{"account_id":1041463,"reputation":3845,"user_id":1047418,"display_name":"Torben"},"score":0,"creation_date":1679918510,"post_id":75855358,"comment_id":133801377,"body_markdown":"And did you verify that the method that was mocked to throw an exception was called?","body":"And did you verify that the method that was mocked to throw an exception was called?"}],"answers":[{"tags":[],"owner":{"account_id":7254391,"reputation":835,"user_id":5533591,"accept_rate":100,"display_name":"ChristophE"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679917808,"creation_date":1679917808,"answer_id":75855415,"question_id":75855358,"body_markdown":"You need to check if the log.error was correctly called.\r\n\r\nYou maybe need to mock your logger and then you can do something like this:\r\n\r\n    Mockito.verify(logger, Mockito.times(1)).error(&quot;AR11 Application: Could not send success email due to error:&quot;)","title":"How to unit-test with Mockito a method that tries and catches an Exception (&quot;when exception caught&quot;)?","body":"<p>You need to check if the log.error was correctly called.</p>\n<p>You maybe need to mock your logger and then you can do something like this:</p>\n<pre><code>Mockito.verify(logger, Mockito.times(1)).error(&quot;AR11 Application: Could not send success email due to error:&quot;)\n</code></pre>\n"}],"owner":{"account_id":987434,"reputation":10946,"user_id":1005607,"accept_rate":64,"display_name":"gene b."},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":346,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679917808,"creation_date":1679917501,"question_id":75855358,"body_markdown":"I&#39;ve already tested a method that `throws Exception` which is easy to check in Mockito. Suppose I have a method called `sendEmail` that  `throws Exception`:\r\n\r\n\r\n        Integer emailSmtpPortInvalid = 68;\r\n\r\n\t\torg.junit.jupiter.api.Assertions.assertThrows(jakarta.mail.MessagingException.class, \r\n\t\t\t      ()-&gt; \r\n\t\t\t      {\r\n\t\t\t    \t  emailServiceImpl.sendEmail(emailSmtpHost, emailSmtpPortInvalid, emailSmtpAddressFrom, emailSmtpAddressTo, &quot;Test Subject&quot;, &quot;Test Body&quot;);\r\n\t\t\t      }\r\n\t\t\t      );\r\n\r\nBut now I need to somehow provide test coverage for another method, `sendSuccessEmail`, which tries **and catches** any Exceptions. I need to do this to satisfy Jacoco&#39;s coverage requirements. What would be possible here? How do I **when an Exception** to re-throw it? I don&#39;t need to mock an Exception, I need to &quot;when&quot; it, e.g. when(Exception..).then(..) to be able to provide a unit test.\r\n\r\n\tpublic void sendSuccessEmail(Ar11ResultBean ar11ResultBean, String emailSmtpHost, Integer emailSmtpPort, String emailAddressFrom, String emailAddressTo) {\r\n\t\ttry {\r\n\t\t\tString emailBody = MessageFormat.format(Constants.EMAIL_BODY_SUCCESS, ar11ResultBean == null ? &quot;&quot; : ar11ResultBean.getRowsProcessed());\r\n\t\t\tsendEmail(emailSmtpHost, emailSmtpPort, emailAddressFrom, emailAddressTo, Constants.EMAIL_SUBJECT_SUCCESS, emailBody);\r\n\t\t} catch (Exception e) {\r\n\t\t\t// Log email error silently\r\n\t\t\tlog.error(&quot;AR11 Application: Could not send success email due to error: &quot;, e);\r\n\t\t}\r\n\t}\r\n\r\nI need something like **when exception caught**.","title":"How to unit-test with Mockito a method that tries and catches an Exception (&quot;when exception caught&quot;)?","body":"<p>I've already tested a method that <code>throws Exception</code> which is easy to check in Mockito. Suppose I have a method called <code>sendEmail</code> that  <code>throws Exception</code>:</p>\n<pre><code>    Integer emailSmtpPortInvalid = 68;\n\n    org.junit.jupiter.api.Assertions.assertThrows(jakarta.mail.MessagingException.class, \n              ()-&gt; \n              {\n                  emailServiceImpl.sendEmail(emailSmtpHost, emailSmtpPortInvalid, emailSmtpAddressFrom, emailSmtpAddressTo, &quot;Test Subject&quot;, &quot;Test Body&quot;);\n              }\n              );\n</code></pre>\n<p>But now I need to somehow provide test coverage for another method, <code>sendSuccessEmail</code>, which tries <strong>and catches</strong> any Exceptions. I need to do this to satisfy Jacoco's coverage requirements. What would be possible here? How do I <strong>when an Exception</strong> to re-throw it? I don't need to mock an Exception, I need to &quot;when&quot; it, e.g. when(Exception..).then(..) to be able to provide a unit test.</p>\n<pre><code>public void sendSuccessEmail(Ar11ResultBean ar11ResultBean, String emailSmtpHost, Integer emailSmtpPort, String emailAddressFrom, String emailAddressTo) {\n    try {\n        String emailBody = MessageFormat.format(Constants.EMAIL_BODY_SUCCESS, ar11ResultBean == null ? &quot;&quot; : ar11ResultBean.getRowsProcessed());\n        sendEmail(emailSmtpHost, emailSmtpPort, emailAddressFrom, emailAddressTo, Constants.EMAIL_SUBJECT_SUCCESS, emailBody);\n    } catch (Exception e) {\n        // Log email error silently\n        log.error(&quot;AR11 Application: Could not send success email due to error: &quot;, e);\n    }\n}\n</code></pre>\n<p>I need something like <strong>when exception caught</strong>.</p>\n"},{"tags":["java","docker","maven","pom.xml"],"comments":[{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1679925050,"post_id":75855368,"comment_id":133803348,"body_markdown":"Why do you want to run the build in a docker container? Why not use a build server like Jenkins, Gitlab CI, GitHub actions?","body":"Why do you want to run the build in a docker container? Why not use a build server like Jenkins, Gitlab CI, GitHub actions?"},{"owner":{"account_id":21853807,"reputation":11,"user_id":16489257,"display_name":"Deonisiy"},"score":0,"creation_date":1679934553,"post_id":75855368,"comment_id":133806284,"body_markdown":"@JFabianMeier To be honest, I forgot about this tools. Anyway, I didn&#39;t use them unlike docker, so it will take some time to learn them","body":"@JFabianMeier To be honest, I forgot about this tools. Anyway, I didn&#39;t use them unlike docker, so it will take some time to learn them"}],"owner":{"account_id":21853807,"reputation":11,"user_id":16489257,"display_name":"Deonisiy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679917523,"creation_date":1679917523,"question_id":75855368,"body_markdown":"I&#39;m making microservice project, so parent project, named *obshaga* contains only pom.xml and modules (microservices). So I wanted to make this easy to deploy by using docker-compose, so first of all I made dockerfile in every project. For example, for example in microservice &quot;tg-dispatcher&quot; I wrote this Dockerfile:\r\n\r\n```\r\nFROM openjdk:11 as build\r\n\r\nWORKDIR /app\r\n\r\nCOPY .mvn/ .mvn\r\nCOPY mvnw pom.xml ./\r\nCOPY src ./src\r\n\r\nRUN [&quot;./mvnw&quot;, &quot;install&quot;]\r\n\r\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;./target/tg-dispatcher.jar&quot;]\r\n```\r\n\r\n`pom.xml` for parent project *obshaga*:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project ...&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.dompurrr&lt;/groupId&gt;\r\n    &lt;artifactId&gt;obshaga&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    &lt;modules&gt;\r\n        &lt;module&gt;tg-dispatcher&lt;/module&gt;\r\n        &lt;module&gt;node&lt;/module&gt;\r\n    &lt;/modules&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;telegrambot.starter.version&gt;6.1.0&lt;/telegrambot.starter.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.5.2&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.17&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.24&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.sonarsource.scanner.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;sonar-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.9.1.2184&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.8.4&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;report&lt;/id&gt;\r\n                        &lt;phase&gt;test&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;report&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.22.2&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;reportFormat&gt;plain&lt;/reportFormat&gt;\r\n                    &lt;includes&gt;\r\n                        &lt;include&gt;**/*Test*.java&lt;/include&gt;\r\n                        &lt;include&gt;**/*IT*.java&lt;/include&gt;\r\n                    &lt;/includes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n`pom.xml` for child project *tg-dispatcher*:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project ...&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.dompurrr&lt;/groupId&gt;\r\n        &lt;artifactId&gt;obshaga&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;artifactId&gt;tg-dispatcher&lt;/artifactId&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.telegram&lt;/groupId&gt;\r\n            &lt;artifactId&gt;telegrambots-spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;${telegrambot.starter.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;finalName&gt;tg-dispatcher&lt;/finalName&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;repackage&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nSo when I try to build docker image for *tg-dispatcher*, I occure error:\r\n\r\n```\r\n[FATAL] Non-resolvable parent POM for org.dompurrr:tg-dispatcher:1.0-SNAPSHOT: Could not find artifact org.dompurrr:obshaga:pom:1.0-SNAPSHOT and &#39;parent.relativePath&#39; points at wrong local POM @ line 6, column 13\r\n @ \r\n[ERROR] The build could not read 1 project -&gt; [Help 1]\r\n[ERROR]   \r\n[ERROR]   The project org.dompurrr:tg-dispatcher:1.0-SNAPSHOT (/app/pom.xml) has 1 error\r\n[ERROR]     Non-resolvable parent POM for org.dompurrr:tg-dispatcher:1.0-SNAPSHOT: Could not find artifact org.dompurrr:obshaga:pom:1.0-SNAPSHOT and &#39;parent.relativePath&#39; points at wrong local POM @ line 6, column 13 -&gt; [Help 2]\r\n```\r\n\r\nI can easily `maven package` or `maven install` this outside of docker and do other things, so problem for me is to put all of this and orginise it inside docker.\r\n\r\nI found out that I might try to deploy parent project artifact to maven central, but it seems to be strange solution.\r\nIs there way to deploy it locally or inside docker container maybe?\r\nOr maybe there&#39;s other ways to solve this problem? Maybe i can re-organise project, so every microservice wouldn&#39;t be connected to parent project?","title":"Maven with docker, &quot;Non-resolvable parent POM&quot; for parent-child project","body":"<p>I'm making microservice project, so parent project, named <em>obshaga</em> contains only pom.xml and modules (microservices). So I wanted to make this easy to deploy by using docker-compose, so first of all I made dockerfile in every project. For example, for example in microservice &quot;tg-dispatcher&quot; I wrote this Dockerfile:</p>\n<pre><code>FROM openjdk:11 as build\n\nWORKDIR /app\n\nCOPY .mvn/ .mvn\nCOPY mvnw pom.xml ./\nCOPY src ./src\n\nRUN [&quot;./mvnw&quot;, &quot;install&quot;]\n\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;./target/tg-dispatcher.jar&quot;]\n</code></pre>\n<p><code>pom.xml</code> for parent project <em>obshaga</em>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project ...&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.dompurrr&lt;/groupId&gt;\n    &lt;artifactId&gt;obshaga&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;modules&gt;\n        &lt;module&gt;tg-dispatcher&lt;/module&gt;\n        &lt;module&gt;node&lt;/module&gt;\n    &lt;/modules&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;telegrambot.starter.version&gt;6.1.0&lt;/telegrambot.starter.version&gt;\n    &lt;/properties&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.5.2&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.17&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.24&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.sonarsource.scanner.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;sonar-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.9.1.2184&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.8.4&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;report&lt;/id&gt;\n                        &lt;phase&gt;test&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;report&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.22.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;reportFormat&gt;plain&lt;/reportFormat&gt;\n                    &lt;includes&gt;\n                        &lt;include&gt;**/*Test*.java&lt;/include&gt;\n                        &lt;include&gt;**/*IT*.java&lt;/include&gt;\n                    &lt;/includes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><code>pom.xml</code> for child project <em>tg-dispatcher</em>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project ...&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.dompurrr&lt;/groupId&gt;\n        &lt;artifactId&gt;obshaga&lt;/artifactId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;artifactId&gt;tg-dispatcher&lt;/artifactId&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.telegram&lt;/groupId&gt;\n            &lt;artifactId&gt;telegrambots-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;${telegrambot.starter.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;finalName&gt;tg-dispatcher&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>So when I try to build docker image for <em>tg-dispatcher</em>, I occure error:</p>\n<pre><code>[FATAL] Non-resolvable parent POM for org.dompurrr:tg-dispatcher:1.0-SNAPSHOT: Could not find artifact org.dompurrr:obshaga:pom:1.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 6, column 13\n @ \n[ERROR] The build could not read 1 project -&gt; [Help 1]\n[ERROR]   \n[ERROR]   The project org.dompurrr:tg-dispatcher:1.0-SNAPSHOT (/app/pom.xml) has 1 error\n[ERROR]     Non-resolvable parent POM for org.dompurrr:tg-dispatcher:1.0-SNAPSHOT: Could not find artifact org.dompurrr:obshaga:pom:1.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 6, column 13 -&gt; [Help 2]\n</code></pre>\n<p>I can easily <code>maven package</code> or <code>maven install</code> this outside of docker and do other things, so problem for me is to put all of this and orginise it inside docker.</p>\n<p>I found out that I might try to deploy parent project artifact to maven central, but it seems to be strange solution.\nIs there way to deploy it locally or inside docker container maybe?\nOr maybe there's other ways to solve this problem? Maybe i can re-organise project, so every microservice wouldn't be connected to parent project?</p>\n"},{"tags":["java","intellij-idea","configuration"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1679798883,"post_id":75845605,"comment_id":133784585,"body_markdown":"Does any of the answers [here](https://stackoverflow.com/q/61034359/5133585) answer your question?","body":"Does any of the answers <a href=\"https://stackoverflow.com/q/61034359/5133585\">here</a> answer your question?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1679800698,"post_id":75845605,"comment_id":133784712,"body_markdown":"There&#39;s a green run button in the margin.","body":"There&#39;s a green run button in the margin."},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1679816260,"post_id":75845605,"comment_id":133785806,"body_markdown":"Does this answer your question? [Run button is greyed out - intellij](https://stackoverflow.com/questions/61034359/run-button-is-greyed-out-intellij)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/61034359/run-button-is-greyed-out-intellij\">Run button is greyed out - intellij</a>"}],"answers":[{"tags":[],"owner":{"account_id":16581218,"reputation":1,"user_id":13612863,"display_name":"Itay Sasson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679816578,"creation_date":1679816578,"answer_id":75846480,"question_id":75845605,"body_markdown":"Click on the pom.xml file and set it as maven project.\r\nIf it is not working, go to: file --&gt;invalidate caches and clear the data.\r\n\r\nIf you still have an  issue it seems like something related with the index&#39;s of your project.\r\n\r\nI had a similar issue so I right click on the project folder, and selected:\r\nrepair idea\r\n\r\nlet me know if it worked.","title":"how to setup intelli J configuration correctly?","body":"<p>Click on the pom.xml file and set it as maven project.\nIf it is not working, go to: file --&gt;invalidate caches and clear the data.</p>\n<p>If you still have an  issue it seems like something related with the index's of your project.</p>\n<p>I had a similar issue so I right click on the project folder, and selected:\nrepair idea</p>\n<p>let me know if it worked.</p>\n"},{"tags":[],"owner":{"account_id":11179248,"reputation":11890,"user_id":8203759,"display_name":"Konstantin Annikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679917518,"creation_date":1679917518,"answer_id":75855365,"question_id":75845605,"body_markdown":"Mark your src folder as sources in the folder&#39;s context menu. \r\n","title":"how to setup intelli J configuration correctly?","body":"<p>Mark your src folder as sources in the folder's context menu.</p>\n"}],"owner":{"account_id":16598358,"reputation":1,"user_id":11994708,"display_name":"James Huang"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1679917518,"creation_date":1679798550,"question_id":75845605,"body_markdown":"I was trying to a test file, but run button keeps gray. chatgpt told me to check configuration is correct, but I dont know what is correct.\r\n\r\n![run button remains gray](https://i.stack.imgur.com/sP93v.jpg)\r\n\r\n![dont know how to setup configuration](https://i.stack.imgur.com/jijdj.jpg)\r\n\r\nCould anyone please tell me what configuration is and how to set it up correctly?","title":"how to setup intelli J configuration correctly?","body":"<p>I was trying to a test file, but run button keeps gray. chatgpt told me to check configuration is correct, but I dont know what is correct.</p>\n<p><img src=\"https://i.stack.imgur.com/sP93v.jpg\" alt=\"run button remains gray\" /></p>\n<p><img src=\"https://i.stack.imgur.com/jijdj.jpg\" alt=\"dont know how to setup configuration\" /></p>\n<p>Could anyone please tell me what configuration is and how to set it up correctly?</p>\n"},{"tags":["java","hashmap"],"answers":[{"tags":[],"owner":{"account_id":19616408,"reputation":1,"user_id":14357777,"display_name":"alex miranda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679917467,"creation_date":1679433423,"answer_id":75806424,"question_id":75806389,"body_markdown":"I figured out what was wrong. Because I was looping through it and trying to remove something from it simultaneously, it caused a conflict. so instead I will create a new hashmap that contains the one I want to remove and then go through the new one and remove the ones from the main wordbank","title":"Error when trying to iterate through a hashmap in java with a for each loop","body":"<p>I figured out what was wrong. Because I was looping through it and trying to remove something from it simultaneously, it caused a conflict. so instead I will create a new hashmap that contains the one I want to remove and then go through the new one and remove the ones from the main wordbank</p>\n"},{"tags":[],"owner":{"account_id":9235242,"reputation":1488,"user_id":6860078,"display_name":"tbatch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679435044,"creation_date":1679435044,"answer_id":75806591,"question_id":75806389,"body_markdown":"I know you said you figured it out, but since you are using a `HashMap`, there is a much easier way to do it using the built-in `removeAll` method.\r\n\r\nTry this\r\n```java\r\nvoid wordsContainingLetter(char c){\r\n  wordbank.keySet().removeAll(wordbank.entrySet().stream().filter(entry -&gt; entry.getKey().contains(String.valueOf(c))).map(Map.Entry::getKey).collect(\r\n        Collectors.toList()));\r\n}\r\n```","title":"Error when trying to iterate through a hashmap in java with a for each loop","body":"<p>I know you said you figured it out, but since you are using a <code>HashMap</code>, there is a much easier way to do it using the built-in <code>removeAll</code> method.</p>\n<p>Try this</p>\n<pre class=\"lang-java prettyprint-override\"><code>void wordsContainingLetter(char c){\n  wordbank.keySet().removeAll(wordbank.entrySet().stream().filter(entry -&gt; entry.getKey().contains(String.valueOf(c))).map(Map.Entry::getKey).collect(\n        Collectors.toList()));\n}\n</code></pre>\n"}],"owner":{"account_id":19616408,"reputation":1,"user_id":14357777,"display_name":"alex miranda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1679917467,"creation_date":1679433067,"question_id":75806389,"body_markdown":"when i try to run this code \r\n```\r\nvoid wordsContainingLetter(char c){\r\n        for(String s:wordbank.keySet()){\r\n            char[] chars = s.toCharArray();\r\n            boolean contains=false;\r\n            for (char ch:chars) {\r\n                if(ch==c){\r\n                    contains=true;\r\n                    break;\r\n                }\r\n            }\r\n            if(!contains){\r\n                wordbank.remove(s);\r\n            }\r\n        }\r\n    }\r\n```\r\nit gives me this error on the for each loop`Exception in thread &quot;main&quot; java.util.ConcurrentModificationException`\r\nthis is the definition of the hashmap `HashMap&lt;String,Integer&gt; wordbank = new HashMap&lt;String,Integer&gt;();`\r\nit is not blank when the code is run\r\n\r\nim expecting the for each loop to iterate through the hashmap","title":"Error when trying to iterate through a hashmap in java with a for each loop","body":"<p>when i try to run this code</p>\n<pre><code>void wordsContainingLetter(char c){\n        for(String s:wordbank.keySet()){\n            char[] chars = s.toCharArray();\n            boolean contains=false;\n            for (char ch:chars) {\n                if(ch==c){\n                    contains=true;\n                    break;\n                }\n            }\n            if(!contains){\n                wordbank.remove(s);\n            }\n        }\n    }\n</code></pre>\n<p>it gives me this error on the for each loop<code>Exception in thread &quot;main&quot; java.util.ConcurrentModificationException</code>\nthis is the definition of the hashmap <code>HashMap&lt;String,Integer&gt; wordbank = new HashMap&lt;String,Integer&gt;();</code>\nit is not blank when the code is run</p>\n<p>im expecting the for each loop to iterate through the hashmap</p>\n"},{"tags":["java","yaml","snakeyaml"],"comments":[{"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"score":0,"creation_date":1678867998,"post_id":75739023,"comment_id":133614475,"body_markdown":"You can print the value because `toString()` contains a special check for the object itself, as described [here](https://bugs.openjdk.org/browse/JDK-4421469). However this only checks for direct self-references; if you were to have a cycle between two different maps this wouldn&#39;t work anymore, as described [here](https://bugs.openjdk.org/browse/JDK-6579224). Now for SnakeYAML, this is an *expected* feature because YAML caters to this problem. Thus I&#39;d open an issue with SnakeYAML if this doesn&#39;t work.","body":"You can print the value because <code>toString()</code> contains a special check for the object itself, as described <a href=\"https://bugs.openjdk.org/browse/JDK-4421469\" rel=\"nofollow noreferrer\">here</a>. However this only checks for direct self-references; if you were to have a cycle between two different maps this wouldn&#39;t work anymore, as described <a href=\"https://bugs.openjdk.org/browse/JDK-6579224\" rel=\"nofollow noreferrer\">here</a>. Now for SnakeYAML, this is an <i>expected</i> feature because YAML caters to this problem. Thus I&#39;d open an issue with SnakeYAML if this doesn&#39;t work."},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1678869973,"post_id":75739023,"comment_id":133615011,"body_markdown":"Thanks @flyx . Should I simply use like `contains(&quot;(This map)&quot;` or is there a way to check myself ? Also, is there a way to disable this feature from SnakeYAML ?","body":"Thanks @flyx . Should I simply use like <code>contains(&quot;(This map)&quot;</code> or is there a way to check myself ? Also, is there a way to disable this feature from SnakeYAML ?"},{"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"score":0,"creation_date":1678875465,"post_id":75739023,"comment_id":133616463,"body_markdown":"The feature is „properly serialize self-referential structures“. This feature is *expected* to be there in SnakeYAML, but apparently isn&#39;t implemented. From what I know of SnakeYAML&#39;s API, there isn&#39;t an option to enable it. You can check for self-references with recursive descent while storing the objects you have already visited in a map, though that doesn&#39;t help you writing the YAML, it only lets you recognize when you *would* run into an endless loop.","body":"The feature is „properly serialize self-referential structures“. This feature is <i>expected</i> to be there in SnakeYAML, but apparently isn&#39;t implemented. From what I know of SnakeYAML&#39;s API, there isn&#39;t an option to enable it. You can check for self-references with recursive descent while storing the objects you have already visited in a map, though that doesn&#39;t help you writing the YAML, it only lets you recognize when you <i>would</i> run into an endless loop."},{"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"score":0,"creation_date":1678875623,"post_id":75739023,"comment_id":133616499,"body_markdown":"You can try to use SnakeYAML&#39;s `Composer` API to deserialize the YAML file to `Node`s which *might* be serializable again, though I don&#39;t know for sure. However then you can&#39;t access your data via your `Configuration` object so I&#39;m unsure whether that&#39;s viable.","body":"You can try to use SnakeYAML&#39;s <code>Composer</code> API to deserialize the YAML file to <code>Node</code>s which <i>might</i> be serializable again, though I don&#39;t know for sure. However then you can&#39;t access your data via your <code>Configuration</code> object so I&#39;m unsure whether that&#39;s viable."}],"answers":[{"tags":[],"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679917435,"creation_date":1679917435,"answer_id":75855350,"question_id":75739023,"body_markdown":"I made a trick to skip it and prevent this type of issue, like that:\r\n\r\n\tConfiguration(File file, Map&lt;?, ?&gt; map, Configuration defaults) {\r\n\t\tthis.file = file;\r\n\t\tthis.self = new LinkedHashMap&lt;String, Object&gt;();\r\n\t\tthis.defaults = defaults;\r\n\t\tfor (Map.Entry&lt;?, ?&gt; entry : map.entrySet()) {\r\n\t\t\tString key = (entry.getKey() == null) ? &quot;null&quot; : entry.getKey().toString();\r\n\t\t\tif (entry.getValue() instanceof Map) {\r\n\t\t\t\tConfiguration nextDef = defaults == null ? null : defaults.getSection(key);\r\n\t\t\t\tString checkingStr = entry.getValue().toString();\r\n\t\t\t\tif (checkingStr.contains(key + &quot;=(this Map)&quot;) || checkingStr.contains(key + &quot;=(this Collection)&quot;))\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tthis.self.put(key, new Configuration(file, (Map&lt;?, ?&gt;) entry.getValue(), nextDef == this ? null : nextDef)); // prevent infinite loop\r\n\t\t\t} else {\r\n\t\t\t\tthis.self.put(key, entry.getValue());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nWith `checkingStr.contains(key + &quot;=(this Map)&quot;) || checkingStr.contains(key + &quot;=(this Collection)&quot;)` I can skip all map to be added into themself.","title":"Infinite loop while reading yaml file because of pointers","body":"<p>I made a trick to skip it and prevent this type of issue, like that:</p>\n<pre><code>Configuration(File file, Map&lt;?, ?&gt; map, Configuration defaults) {\n    this.file = file;\n    this.self = new LinkedHashMap&lt;String, Object&gt;();\n    this.defaults = defaults;\n    for (Map.Entry&lt;?, ?&gt; entry : map.entrySet()) {\n        String key = (entry.getKey() == null) ? &quot;null&quot; : entry.getKey().toString();\n        if (entry.getValue() instanceof Map) {\n            Configuration nextDef = defaults == null ? null : defaults.getSection(key);\n            String checkingStr = entry.getValue().toString();\n            if (checkingStr.contains(key + &quot;=(this Map)&quot;) || checkingStr.contains(key + &quot;=(this Collection)&quot;))\n                continue;\n            this.self.put(key, new Configuration(file, (Map&lt;?, ?&gt;) entry.getValue(), nextDef == this ? null : nextDef)); // prevent infinite loop\n        } else {\n            this.self.put(key, entry.getValue());\n        }\n    }\n}\n</code></pre>\n<p>With <code>checkingStr.contains(key + &quot;=(this Map)&quot;) || checkingStr.contains(key + &quot;=(this Collection)&quot;)</code> I can skip all map to be added into themself.</p>\n"}],"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75855350,"answer_count":1,"score":0,"last_activity_date":1679917435,"creation_date":1678833687,"question_id":75739023,"body_markdown":"I&#39;m reading and writing YML content into files. Some files are like that:\r\n```yml\r\n&amp;id001\r\nplayername: SomeName\r\nlang: fr_FR\r\nminerate-full-mined: *id001\r\n```\r\nThe issue is that the `minerate-full-mined` key refer to the first line of file, so it make an infinite loop.\r\n\r\nMy code:\r\n```java\r\nDumperOptions options = new DumperOptions();\r\noptions.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\r\nYaml yaml = new Yaml(new Representer(options) {\r\n\t{\r\n\t\tthis.representers.put(Configuration.class, (data) -&gt; represent(((Configuration) data).self));\r\n\t}\r\n}, options);\r\n```\r\n\r\n```java\r\nprotected Map&lt;String, Object&gt; self;\r\nprotected Configuration defaults;\r\nprotected File file;\r\n\r\npublic Configuration() {\r\n    this(null);\r\n}\r\n\r\npublic Configuration(Configuration defaults) {\r\n    this(null, new LinkedHashMap&lt;String, Object&gt;(), defaults);\r\n}\r\n\r\npublic Configuration(File file, Map&lt;?, ?&gt; map, Configuration defaults) {\r\n\tthis.file = file;\r\n    this.self = new LinkedHashMap&lt;String, Object&gt;();\r\n    this.defaults = defaults;\r\n    for (Map.Entry&lt;?, ?&gt; entry : map.entrySet()) {\r\n        String key = (entry.getKey() == null) ? &quot;null&quot; : entry.getKey().toString();\r\n        if (entry.getValue() instanceof Map) {\r\n        \tthis.self.put(key, new Configuration(file, (Map&lt;?, ?&gt;) entry.getValue(), defaults == null ? null : defaults.getSection(key)));\r\n        } else {\r\n            this.self.put(key, entry.getValue());\r\n        }\r\n    }\r\n}\r\n```\r\nThe infinite loop is made at the line `this.self.put(key, new Configuration[...]);`.\r\n\r\nI tried to print `entry.getValue()`, and it&#39;s printed as `{playername: SomeName, lang: fr_FR, minerate-full-mined=(This Map)}`. So it can be detected, but I don&#39;t know that we can put a map on itself.\r\n\r\nHow can I prevent snakeyaml to take this in count ?","title":"Infinite loop while reading yaml file because of pointers","body":"<p>I'm reading and writing YML content into files. Some files are like that:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>&amp;id001\nplayername: SomeName\nlang: fr_FR\nminerate-full-mined: *id001\n</code></pre>\n<p>The issue is that the <code>minerate-full-mined</code> key refer to the first line of file, so it make an infinite loop.</p>\n<p>My code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DumperOptions options = new DumperOptions();\noptions.setDefaultFlowStyle(DumperOptions.FlowStyle.BLOCK);\nYaml yaml = new Yaml(new Representer(options) {\n    {\n        this.representers.put(Configuration.class, (data) -&gt; represent(((Configuration) data).self));\n    }\n}, options);\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>protected Map&lt;String, Object&gt; self;\nprotected Configuration defaults;\nprotected File file;\n\npublic Configuration() {\n    this(null);\n}\n\npublic Configuration(Configuration defaults) {\n    this(null, new LinkedHashMap&lt;String, Object&gt;(), defaults);\n}\n\npublic Configuration(File file, Map&lt;?, ?&gt; map, Configuration defaults) {\n    this.file = file;\n    this.self = new LinkedHashMap&lt;String, Object&gt;();\n    this.defaults = defaults;\n    for (Map.Entry&lt;?, ?&gt; entry : map.entrySet()) {\n        String key = (entry.getKey() == null) ? &quot;null&quot; : entry.getKey().toString();\n        if (entry.getValue() instanceof Map) {\n            this.self.put(key, new Configuration(file, (Map&lt;?, ?&gt;) entry.getValue(), defaults == null ? null : defaults.getSection(key)));\n        } else {\n            this.self.put(key, entry.getValue());\n        }\n    }\n}\n</code></pre>\n<p>The infinite loop is made at the line <code>this.self.put(key, new Configuration[...]);</code>.</p>\n<p>I tried to print <code>entry.getValue()</code>, and it's printed as <code>{playername: SomeName, lang: fr_FR, minerate-full-mined=(This Map)}</code>. So it can be detected, but I don't know that we can put a map on itself.</p>\n<p>How can I prevent snakeyaml to take this in count ?</p>\n"},{"tags":["java","eclipse","spring","maven"],"answers":[{"tags":[],"owner":{"account_id":3454996,"reputation":5649,"user_id":2893693,"accept_rate":83,"display_name":"J-J"},"down_vote_count":1,"up_vote_count":21,"is_accepted":true,"score":20,"last_activity_date":1528837287,"creation_date":1479900998,"answer_id":40763458,"question_id":40763263,"body_markdown":"Do a `mvn clean install`. &lt;br&gt;\r\nThis will clean whatever created from the previous build, then build your project and add the jars to your local maven repository (.m2\\repository)","title":"Maven: Could Not find Artifact when trying to include a project in another one using dependencies","body":"<p>Do a <code>mvn clean install</code>. <br>\nThis will clean whatever created from the previous build, then build your project and add the jars to your local maven repository (.m2\\repository)</p>\n"},{"tags":[],"owner":{"account_id":11368887,"reputation":129,"user_id":8334977,"display_name":"Krithika "},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1509559689,"creation_date":1509559689,"answer_id":47061116,"question_id":40763263,"body_markdown":"I also faced the same problem...................Issue got resolved  \r\nDo a maven clean and install of the child project and then try\r\n\r\nmaven clean  and install of parent project.\r\n\r\nFor reference watch these  videos\r\nhttps://www.youtube.com/watch?v=2aNC1EAnpqo\r\nhttps://www.youtube.com/watch?v=EMfd2FwKKHY\r\n","title":"Maven: Could Not find Artifact when trying to include a project in another one using dependencies","body":"<p>I also faced the same problem...................Issue got resolved<br>\nDo a maven clean and install of the child project and then try</p>\n\n<p>maven clean  and install of parent project.</p>\n\n<p>For reference watch these  videos\n<a href=\"https://www.youtube.com/watch?v=2aNC1EAnpqo\" rel=\"noreferrer\">https://www.youtube.com/watch?v=2aNC1EAnpqo</a>\n<a href=\"https://www.youtube.com/watch?v=EMfd2FwKKHY\" rel=\"noreferrer\">https://www.youtube.com/watch?v=EMfd2FwKKHY</a></p>\n"},{"tags":[],"owner":{"account_id":14942598,"reputation":243,"user_id":10788795,"display_name":"J.Leupp"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1554231922,"creation_date":1554231922,"answer_id":55481891,"question_id":40763263,"body_markdown":"I was facing the same issue, I had a parent project that would fail on the Clean Install of a dependent project.\r\n\r\nI tried all of the above solutions to no avail, running clean install both in eclipse and from command line.\r\n\r\nI was able to solve by navigating to the Child Project and Running the following\r\n\r\n 1. Cleaning the project `mvn clean`\r\n 2. Setting as eclipse project `mvn eclipse:eclipse` (this forced download of missing jars)\r\n 3. Follow by clean install of Child project `mvn clean install -U`\r\n 4. Finally clean install on parent project `mvn clean install -DskipTests -P(if necessary a profile here) -U`\r\n\r\nThis helped when maven was not downloading jar&#39;s properly listed in the pom.xml, I was not able to find why clean install with Update Snapshots/etc. did not download the missing jars.\r\n ","title":"Maven: Could Not find Artifact when trying to include a project in another one using dependencies","body":"<p>I was facing the same issue, I had a parent project that would fail on the Clean Install of a dependent project.</p>\n\n<p>I tried all of the above solutions to no avail, running clean install both in eclipse and from command line.</p>\n\n<p>I was able to solve by navigating to the Child Project and Running the following</p>\n\n<ol>\n<li>Cleaning the project <code>mvn clean</code></li>\n<li>Setting as eclipse project <code>mvn eclipse:eclipse</code> (this forced download of missing jars)</li>\n<li>Follow by clean install of Child project <code>mvn clean install -U</code></li>\n<li>Finally clean install on parent project <code>mvn clean install -DskipTests -P(if necessary a profile here) -U</code></li>\n</ol>\n\n<p>This helped when maven was not downloading jar's properly listed in the pom.xml, I was not able to find why clean install with Update Snapshots/etc. did not download the missing jars.</p>\n"},{"tags":[],"owner":{"account_id":20434143,"reputation":29,"user_id":14992425,"display_name":"Niki Mozzon"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1679917293,"creation_date":1679917293,"answer_id":75855326,"question_id":40763263,"body_markdown":"I faced the same issue, I ran:\r\n\r\n        mvn compile dependency:tree\r\n\r\nand after that it compiled without any problem.","title":"Maven: Could Not find Artifact when trying to include a project in another one using dependencies","body":"<p>I faced the same issue, I ran:</p>\n<pre><code>    mvn compile dependency:tree\n</code></pre>\n<p>and after that it compiled without any problem.</p>\n"}],"owner":{"account_id":271745,"reputation":2411,"user_id":562436,"accept_rate":97,"display_name":"Hani Goc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":139320,"favorite_count":0,"down_vote_count":1,"up_vote_count":18,"accepted_answer_id":40763458,"answer_count":4,"score":17,"last_activity_date":1679917293,"creation_date":1479900448,"question_id":40763263,"body_markdown":"## Problem description ##\r\n\r\nI have a project called `reservationVol` which I want to include in an mvc spring project called `reservationVolMvc`. I compiled and tested `reservationVol` on eclipse. I also use the maven commands: `mvn compile` and `mvn package`. All tests ran successfully.\r\n\r\nWhen I tried to compile `reservationVolMvc` using the `mvn compile` command I get the following error:\r\n\r\n    [INFO] Scanning for projects...\r\n    [INFO]                                                                         \r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Building reservationVolSpring 1.0-SNAPSHOT\r\n    [INFO] ------------------------------------------------------------------------\r\n    [WARNING] The POM for hani.reservationVol:reservationVol:jar:1.0-SNAPSHOT is missing, no dependency information available\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time: 0.688 s\r\n    [INFO] Finished at: 2016-11-23T12:25:21+01:00\r\n    [INFO] Final Memory: 6M/77M\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal on project reservationVolSpring: Could not resolve dependencies for project formation.addstones:reservationVolSpring:war:1.0-SNAPSHOT: Could not find artifact hani.reservationVol:reservationVol:jar:1.0-SNAPSHOT -&gt; [Help 1]\r\n    [ERROR] \r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR] \r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException\r\n\r\n\r\nThe following **pom.xml**  files represent the dependencies for respectively `reservationVol` and `reservationVolMvc`. I included the project `ReservationVol` in `reservationVolMvc` by using the following: \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;hani.reservationVol&lt;/groupId&gt;\r\n        &lt;artifactId&gt;reservationVol&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n----------\r\n# ReservationVol #\r\n\r\n\r\n      &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n            xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n            &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n            &lt;groupId&gt;hani.reservationVol&lt;/groupId&gt;\r\n            &lt;artifactId&gt;reservationVol&lt;/artifactId&gt;\r\n            &lt;packaging&gt;jar&lt;/packaging&gt;\r\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n            &lt;name&gt;reservationVol&lt;/name&gt;\r\n            &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n                    &lt;version&gt;5.1.39&lt;/version&gt;\r\n                    &lt;scope&gt;compile&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n                \r\n                 &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n                    &lt;version&gt;5.1.0.Final&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                \r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n                    &lt;version&gt;5.1.0.Final&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n                    &lt;version&gt;4.2.6.RELEASE&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n                    &lt;version&gt;4.2.6.RELEASE&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;commons-dbcp2&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.1.1&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                \r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;junit&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n                    &lt;version&gt;4.12&lt;/version&gt;\r\n                    &lt;scope&gt;test&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n               \r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n                    &lt;version&gt;4.2.5.RELEASE&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n        \r\n            &lt;build&gt;\r\n              &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                  &lt;version&gt;3.3&lt;/version&gt;\r\n                  &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                  &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n              &lt;/plugins&gt;\r\n            &lt;/build&gt;\r\n            \r\n        &lt;/project&gt;\r\n\r\n\r\n----------\r\n# reservationVolMvc #\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;formation.addstones&lt;/groupId&gt;\r\n        &lt;artifactId&gt;reservationVolSpring&lt;/artifactId&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;reservationVolSpring&lt;/name&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                    &lt;groupId&gt;hani.reservationVol&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;reservationVol&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n                &lt;version&gt;2.7.5&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;jstl&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n                &lt;version&gt;1.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n                &lt;version&gt;4.2.6.RELEASE&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n                &lt;version&gt;4.2.6.RELEASE&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n                &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n                &lt;version&gt;1.0.0.GA&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n                &lt;version&gt;4.3.2.Final&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.5.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.8&lt;/source&gt;\r\n                        &lt;target&gt;1.8&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n","title":"Maven: Could Not find Artifact when trying to include a project in another one using dependencies","body":"<h2>Problem description</h2>\n<p>I have a project called <code>reservationVol</code> which I want to include in an mvc spring project called <code>reservationVolMvc</code>. I compiled and tested <code>reservationVol</code> on eclipse. I also use the maven commands: <code>mvn compile</code> and <code>mvn package</code>. All tests ran successfully.</p>\n<p>When I tried to compile <code>reservationVolMvc</code> using the <code>mvn compile</code> command I get the following error:</p>\n<pre><code>[INFO] Scanning for projects...\n[INFO]                                                                         \n[INFO] ------------------------------------------------------------------------\n[INFO] Building reservationVolSpring 1.0-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\n[WARNING] The POM for hani.reservationVol:reservationVol:jar:1.0-SNAPSHOT is missing, no dependency information available\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 0.688 s\n[INFO] Finished at: 2016-11-23T12:25:21+01:00\n[INFO] Final Memory: 6M/77M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal on project reservationVolSpring: Could not resolve dependencies for project formation.addstones:reservationVolSpring:war:1.0-SNAPSHOT: Could not find artifact hani.reservationVol:reservationVol:jar:1.0-SNAPSHOT -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException\n</code></pre>\n<p>The following <strong>pom.xml</strong>  files represent the dependencies for respectively <code>reservationVol</code> and <code>reservationVolMvc</code>. I included the project <code>ReservationVol</code> in <code>reservationVolMvc</code> by using the following:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;hani.reservationVol&lt;/groupId&gt;\n    &lt;artifactId&gt;reservationVol&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<hr />\n<h1>ReservationVol</h1>\n<pre><code>  &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n        &lt;groupId&gt;hani.reservationVol&lt;/groupId&gt;\n        &lt;artifactId&gt;reservationVol&lt;/artifactId&gt;\n        &lt;packaging&gt;jar&lt;/packaging&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n        &lt;name&gt;reservationVol&lt;/name&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;mysql&lt;/groupId&gt;\n                &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n                &lt;version&gt;5.1.39&lt;/version&gt;\n                &lt;scope&gt;compile&lt;/scope&gt;\n            &lt;/dependency&gt;\n            \n             &lt;dependency&gt;\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n                &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n                &lt;version&gt;5.1.0.Final&lt;/version&gt;\n            &lt;/dependency&gt;\n            \n            &lt;dependency&gt;\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n                &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n                &lt;version&gt;5.1.0.Final&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n                &lt;version&gt;4.2.6.RELEASE&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n                &lt;version&gt;4.2.6.RELEASE&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-dbcp2&lt;/artifactId&gt;\n                &lt;version&gt;2.1.1&lt;/version&gt;\n            &lt;/dependency&gt;\n            \n            &lt;dependency&gt;\n                &lt;groupId&gt;junit&lt;/groupId&gt;\n                &lt;artifactId&gt;junit&lt;/artifactId&gt;\n                &lt;version&gt;4.12&lt;/version&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n           \n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n                &lt;version&gt;4.2.5.RELEASE&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    \n        &lt;build&gt;\n          &lt;plugins&gt;\n            &lt;plugin&gt;\n              &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n              &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n              &lt;version&gt;3.3&lt;/version&gt;\n              &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n              &lt;/configuration&gt;\n            &lt;/plugin&gt;\n          &lt;/plugins&gt;\n        &lt;/build&gt;\n        \n    &lt;/project&gt;\n</code></pre>\n<hr />\n<h1>reservationVolMvc</h1>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;formation.addstones&lt;/groupId&gt;\n    &lt;artifactId&gt;reservationVolSpring&lt;/artifactId&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;reservationVolSpring&lt;/name&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n                &lt;groupId&gt;hani.reservationVol&lt;/groupId&gt;\n                &lt;artifactId&gt;reservationVol&lt;/artifactId&gt;\n                &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.7.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jstl&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n            &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;4.2.6.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;4.2.6.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0.GA&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;4.3.2.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.5.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","algorithm","negative-number","mathematical-expressions","shunting-yard"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1679884567,"post_id":75851675,"comment_id":133795262,"body_markdown":"Step through your program in the debugger with the expression `-(1)`. Does that work?","body":"Step through your program in the debugger with the expression <code>-(1)</code>. Does that work?"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1679890900,"post_id":75851675,"comment_id":133795917,"body_markdown":"Try making the grouping bracket operator constructs completely explicit. The first example appears horribly superfluous parasitic and deserving of erroneous behaviour because of the repeated levels on one value only, for accuracy of such an occurrence dynamically in code that &quot;single operated value&quot; should been clarified it&#39;s pole first before inserting to an equation.","body":"Try making the grouping bracket operator constructs completely explicit. The first example appears horribly superfluous parasitic and deserving of erroneous behaviour because of the repeated levels on one value only, for accuracy of such an occurrence dynamically in code that &quot;single operated value&quot; should been clarified it&#39;s pole first before inserting to an equation."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1679891630,"post_id":75851675,"comment_id":133795981,"body_markdown":"All it seems to say is you have not committed a reliable assessment of the syntax rules required for consistent result to apply to the equation.. it&#39;s more like , get back to work.","body":"All it seems to say is you have not committed a reliable assessment of the syntax rules required for consistent result to apply to the equation.. it&#39;s more like , get back to work."}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679917129,"creation_date":1679917129,"answer_id":75855299,"question_id":75851675,"body_markdown":"A minus symbol can be just the first character of a signed number (which your code processes that way), or a binary subtraction operator (which your code deals with), but also a unary operator, which your code does not deal with. Instead (as the comment in your code says) such occurrence of a minus symbol is ignored by it.\r\n\r\nYou would need to add logic to identify when a minus symbol represents a unary minus operator. Once you have that, you can also interpret a minus in front of an unsigned number as a unary minus operator so that the parsing of numbers can be limited to unsigned numbers only.\r\n\r\nAs the `postfixEval` function will need to distinguish between a binary minus operator and a unary minus operator, you could introduce a different character for one of the two. For instance, you could stack a tilde (`~`) in case a *unary* minus is intended. In that case `postfixEval` should only pop *one* value from its stack and negate it.\r\n\r\nSome other remarks:\r\n\r\n* Instead of comparing a character with `*`, `/`, `+` and `-`, inside the `calculate ` function, you could reuse the logic already implemented in `getPrecedence`. When that function returns a non-zero value, you know that the character was such an operator.\r\n* Instead of `postfixEval` converting calculated results back to string so they can be pushed back on the stack, have your stack store doubles, and convert in the other direction. This will involve fewer conversions.\r\n\r\nHere is the relevant part of your code updated with the above remarks. Comments indicate where changes occured:\r\n\r\n```\r\npublic class Main {\r\n    public static int getPrecedence(Character op) {\r\n        switch (op) {\r\n            case &#39;~&#39;: // Unary minus\r\n                return 101; // Greater than 100 means &quot;unary&quot;\r\n            case &#39;*&#39;:\r\n                return 2;\r\n            case &#39;/&#39;:\r\n                return 2;\r\n            case &#39;+&#39;:\r\n                return 1;\r\n            case &#39;-&#39;:\r\n                return 1;\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n\r\n    public static double evalSimpleExpr(String operator, double a, double b) {\r\n        switch (operator) {\r\n            case &quot;*&quot;:\r\n                return b * a;\r\n            case &quot;/&quot;:\r\n                if (a == 0)\r\n                    return 0;\r\n                return b / a;\r\n            case &quot;+&quot;:\r\n                return b + a;\r\n            case &quot;-&quot;:\r\n                return b - a;\r\n            case &quot;~&quot;: // For unary minus (b is ignored)\r\n                return -a;\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n\r\n    public static double calculate(String expression) {\r\n        char[] characters = expression.replaceAll(&quot;\\\\s+&quot;, &quot;&quot;).toCharArray();\r\n        List&lt;String&gt; output = new ArrayList&lt;String&gt;();\r\n        Stack&lt;Character&gt; ops = new Stack&lt;Character&gt;();\r\n\r\n        for (int i = 0; i &lt; characters.length; i++) {\r\n            char token = characters[i]; // Let&#39;s use a variable for this\r\n            // If element represents an unsigned number, then push it into the stack &quot;output&quot;\r\n            if (Character.isDigit(token) || token == &#39;.&#39;) {\r\n                // Don&#39;t deal with negative sign -- deal with it elsewhere as a unary operator\r\n                String digits = &quot;&quot;;\r\n                // Collect all digits (and optional decimal point)\r\n                for (; i &lt; characters.length &amp;&amp; (Character.isDigit(characters[i]) || characters[i] == &#39;.&#39;); i++) {\r\n                    digits += characters[i];\r\n                }\r\n                i--;\r\n                output.add(digits);\r\n            } else if (token == &#39;(&#39;) {\r\n                ops.push(token);\r\n            } else if (token == &#39;)&#39;) {\r\n                while (!ops.empty() &amp;&amp; ops.peek() != &#39;(&#39;) {\r\n                    output.add(Character.toString(ops.pop()));\r\n                }\r\n                ops.pop();\r\n            } else if (getPrecedence(token) &gt; 0) {\r\n                // Determine whether operator is unary\r\n                if (i == 0 || getPrecedence(characters[i - 1]) &gt; 0 || characters[i - 1] == &#39;(&#39;) {\r\n                    if (token != &#39;-&#39;) continue; // Ignore unary + (it has no effect)\r\n                    ops.push(&#39;~&#39;); // Use a distinctive character for unary minus.\r\n                } else {\r\n                    while (!ops.empty() &amp;&amp; getPrecedence(ops.peek()) &gt;= getPrecedence(token)) {\r\n                        output.add(Character.toString(ops.pop()));\r\n                    }\r\n                    ops.push(token);\r\n                }\r\n            }\r\n        }\r\n\r\n        while (!ops.empty()) {\r\n            output.add(Character.toString(ops.pop()));\r\n        }\r\n        return postfixEval(output);\r\n    }\r\n\r\n    public static double postfixEval(List&lt;String&gt; postfix) {\r\n        Stack&lt;Double&gt; stack = new Stack&lt;Double&gt;(); // Use Double instead of String\r\n\r\n        for (String element : postfix) {\r\n            int prec = getPrecedence(element.charAt(0));\r\n            if (prec &gt;= 100) { // Unary \r\n                stack.push(evalSimpleExpr(element, stack.pop(), 0));\r\n            } else if (prec &gt; 0) { // Binary\r\n                stack.push(evalSimpleExpr(element, stack.pop(), stack.pop()));\r\n            } else {\r\n                stack.push(Double.parseDouble(element));\r\n            }\r\n        }\r\n\r\n        return stack.pop();\r\n    }\r\n```\r\n","title":"Java - multiple levels of negative signs in a mathematical expression evaluator program","body":"<p>A minus symbol can be just the first character of a signed number (which your code processes that way), or a binary subtraction operator (which your code deals with), but also a unary operator, which your code does not deal with. Instead (as the comment in your code says) such occurrence of a minus symbol is ignored by it.</p>\n<p>You would need to add logic to identify when a minus symbol represents a unary minus operator. Once you have that, you can also interpret a minus in front of an unsigned number as a unary minus operator so that the parsing of numbers can be limited to unsigned numbers only.</p>\n<p>As the <code>postfixEval</code> function will need to distinguish between a binary minus operator and a unary minus operator, you could introduce a different character for one of the two. For instance, you could stack a tilde (<code>~</code>) in case a <em>unary</em> minus is intended. In that case <code>postfixEval</code> should only pop <em>one</em> value from its stack and negate it.</p>\n<p>Some other remarks:</p>\n<ul>\n<li>Instead of comparing a character with <code>*</code>, <code>/</code>, <code>+</code> and <code>-</code>, inside the <code>calculate </code> function, you could reuse the logic already implemented in <code>getPrecedence</code>. When that function returns a non-zero value, you know that the character was such an operator.</li>\n<li>Instead of <code>postfixEval</code> converting calculated results back to string so they can be pushed back on the stack, have your stack store doubles, and convert in the other direction. This will involve fewer conversions.</li>\n</ul>\n<p>Here is the relevant part of your code updated with the above remarks. Comments indicate where changes occured:</p>\n<pre><code>public class Main {\n    public static int getPrecedence(Character op) {\n        switch (op) {\n            case '~': // Unary minus\n                return 101; // Greater than 100 means &quot;unary&quot;\n            case '*':\n                return 2;\n            case '/':\n                return 2;\n            case '+':\n                return 1;\n            case '-':\n                return 1;\n            default:\n                return 0;\n        }\n    }\n\n    public static double evalSimpleExpr(String operator, double a, double b) {\n        switch (operator) {\n            case &quot;*&quot;:\n                return b * a;\n            case &quot;/&quot;:\n                if (a == 0)\n                    return 0;\n                return b / a;\n            case &quot;+&quot;:\n                return b + a;\n            case &quot;-&quot;:\n                return b - a;\n            case &quot;~&quot;: // For unary minus (b is ignored)\n                return -a;\n            default:\n                return 0;\n        }\n    }\n\n    public static double calculate(String expression) {\n        char[] characters = expression.replaceAll(&quot;\\\\s+&quot;, &quot;&quot;).toCharArray();\n        List&lt;String&gt; output = new ArrayList&lt;String&gt;();\n        Stack&lt;Character&gt; ops = new Stack&lt;Character&gt;();\n\n        for (int i = 0; i &lt; characters.length; i++) {\n            char token = characters[i]; // Let's use a variable for this\n            // If element represents an unsigned number, then push it into the stack &quot;output&quot;\n            if (Character.isDigit(token) || token == '.') {\n                // Don't deal with negative sign -- deal with it elsewhere as a unary operator\n                String digits = &quot;&quot;;\n                // Collect all digits (and optional decimal point)\n                for (; i &lt; characters.length &amp;&amp; (Character.isDigit(characters[i]) || characters[i] == '.'); i++) {\n                    digits += characters[i];\n                }\n                i--;\n                output.add(digits);\n            } else if (token == '(') {\n                ops.push(token);\n            } else if (token == ')') {\n                while (!ops.empty() &amp;&amp; ops.peek() != '(') {\n                    output.add(Character.toString(ops.pop()));\n                }\n                ops.pop();\n            } else if (getPrecedence(token) &gt; 0) {\n                // Determine whether operator is unary\n                if (i == 0 || getPrecedence(characters[i - 1]) &gt; 0 || characters[i - 1] == '(') {\n                    if (token != '-') continue; // Ignore unary + (it has no effect)\n                    ops.push('~'); // Use a distinctive character for unary minus.\n                } else {\n                    while (!ops.empty() &amp;&amp; getPrecedence(ops.peek()) &gt;= getPrecedence(token)) {\n                        output.add(Character.toString(ops.pop()));\n                    }\n                    ops.push(token);\n                }\n            }\n        }\n\n        while (!ops.empty()) {\n            output.add(Character.toString(ops.pop()));\n        }\n        return postfixEval(output);\n    }\n\n    public static double postfixEval(List&lt;String&gt; postfix) {\n        Stack&lt;Double&gt; stack = new Stack&lt;Double&gt;(); // Use Double instead of String\n\n        for (String element : postfix) {\n            int prec = getPrecedence(element.charAt(0));\n            if (prec &gt;= 100) { // Unary \n                stack.push(evalSimpleExpr(element, stack.pop(), 0));\n            } else if (prec &gt; 0) { // Binary\n                stack.push(evalSimpleExpr(element, stack.pop(), stack.pop()));\n            } else {\n                stack.push(Double.parseDouble(element));\n            }\n        }\n\n        return stack.pop();\n    }\n</code></pre>\n"}],"owner":{"account_id":23435158,"reputation":43,"user_id":17493356,"display_name":"TommyYOyoyo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75855299,"answer_count":1,"score":0,"last_activity_date":1679917129,"creation_date":1679883556,"question_id":75851675,"body_markdown":"I&#39;ve been trying to make a mathematical expression evaluator program (calculator) in java and I&#39;m stuck with a problem: I can&#39;t find a way to make the program support mathematical expressions with multi-levels of negative signs. \r\n\r\n\r\nThe expression\r\n```1 - -(-(-(-4)))```\r\n&#39;s result should be -3.0, but I&#39;m unable to make my program determine whether the number &quot;4&quot; is a negative number or not. My program returns 5 instead since it cannot determine correctly.\r\n\r\n\r\nAnother example is the expression \r\n```12*123/-(-5+2)```\r\nIt should return an answer of 492, but my program incorrectly returns -492.\r\n\r\n\r\nHere&#39;s the code I&#39;ve been working on: \r\n```\r\nimport java.util.*;\r\n\r\npublic class MathEvaluator {\r\n\r\n    // get the precedence order of an operator\r\n    public static int getPrecedence(Character op) {\r\n        switch (op) {\r\n            case &#39;*&#39;:\r\n                return 2;\r\n            case &#39;/&#39;:\r\n                return 2;\r\n            case &#39;+&#39;:\r\n                return 1;\r\n            case &#39;-&#39;:\r\n                return 1;\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n\r\n    // evaluating simple math expressions between two floating point numbers\r\n    // order is reversed due to the stack sturcture (LIFO), b comes first while a\r\n    // comes after\r\n    public static double evalSimpleExpr(String operator, double a, double b) {\r\n        switch (operator) {\r\n            case &quot;*&quot;:\r\n                return b * a;\r\n            case &quot;/&quot;:\r\n                if (a == 0)\r\n                    return 0;\r\n                return b / a;\r\n            case &quot;+&quot;:\r\n                return b + a;\r\n            case &quot;-&quot;:\r\n                return b - a;\r\n            default:\r\n                return 0;\r\n        }\r\n    }\r\n\r\n    public static double calculate(String expression) {\r\n        System.out.println(&quot;[DEBUG]: &quot; + expression);\r\n        // make a new array of characters while removing all the whitespaces\r\n        char[] characters = expression.replaceAll(&quot;\\\\s+&quot;, &quot;&quot;).toCharArray();\r\n\r\n        List&lt;String&gt; output = new ArrayList&lt;String&gt;();\r\n        Stack&lt;Character&gt; ops = new Stack&lt;Character&gt;();\r\n\r\n        mainLoop: for (int i = 0; i &lt; characters.length; i++) {\r\n\r\n            // if element is an integer / floating-point number / decimal point, then\r\n            // push it into the stack &quot;numbers&quot;\r\n            if (Character.isDigit(characters[i]) || characters[i] == &#39;.&#39;) {\r\n                // if the character before the current element is still a digit/decimal point,\r\n                // then ignore and continue scanning the next element\r\n                if (i &gt; 0 &amp;&amp; (Character.isDigit(characters[i - 1]) || characters[i - 1] == &#39;.&#39;))\r\n                    continue mainLoop;\r\n                String digits = &quot;&quot;;\r\n                // get the negative sign (if it exists for the number) and add it to the\r\n                // number\r\n                if (i &gt; 1 &amp;&amp; characters[i - 1] == &#39;-&#39;\r\n                        &amp;&amp; (characters[i - 2] == &#39;+&#39; || characters[i - 2] == &#39;-&#39; || characters[i - 2] == &#39;*&#39;\r\n                                || characters[i - 2] == &#39;/&#39; || characters[i - 2] == &#39;(&#39; || characters[i - 2] == &#39;)&#39;)) {\r\n                    digits += &quot;-&quot;;\r\n                } else if (i == 1 &amp;&amp; characters[0] == &#39;-&#39;) {\r\n                    digits += &quot;-&quot;;\r\n                }\r\n                // a loop to the right to get all digits in a number\r\n                digits += characters[i];\r\n                int j = i + 1;\r\n                while (!(j &gt;= characters.length) &amp;&amp; (Character.isDigit(characters[j]) || characters[j] == &#39;.&#39;)) {\r\n                    digits += characters[j];\r\n                    j += 1;\r\n                }\r\n\r\n                System.out.println(&quot;[NUMBER]: &quot; + digits);\r\n                output.add(digits);\r\n\r\n                // check if element is brace\r\n                // if its an opening brace, push it into the operator stack\r\n            } else if (characters[i] == &#39;(&#39;) {\r\n                ops.push(characters[i]);\r\n\r\n            // if its a closing brace, pop all the elements between the braces into the\r\n            // output queue one by one\r\n            } else if (characters[i] == &#39;)&#39;) {\r\n                while (!ops.empty() &amp;&amp; ops.peek() != &#39;(&#39;) {\r\n                    output.add(Character.toString(ops.pop()));\r\n                }\r\n                ops.pop();\r\n\r\n            // check if element is an operator\r\n            } else if (characters[i] == &#39;+&#39; || characters[i] == &#39;-&#39; || characters[i] == &#39;*&#39; || characters[i] == &#39;/&#39;) {\r\n                // ignoring negative signs\r\n                if (i &gt; 0 &amp;&amp; characters[i] == &#39;-&#39; &amp;&amp; (characters[i - 1] == &#39;+&#39; ||\r\n                        characters[i - 1] == &#39;-&#39;\r\n                        || characters[i - 1] == &#39;*&#39; || characters[i - 1] == &#39;/&#39; || characters[i - 1] == &#39;(&#39;)) {\r\n                    continue mainLoop;\r\n                } else if (i == 0 &amp;&amp; characters[i] == &#39;-&#39;) {\r\n                    continue mainLoop;\r\n                }\r\n                /* \r\n                 * check if the previous operator has priority over the current operator or if\r\n                 * the previous operator has the same priority as the current operator (if they\r\n                 * have the same priority,\r\n                 * then the previous operator should be applied before the current operator)\r\n                 * and pop the elements from the stack until the current operator takes the\r\n                 * priority\r\n                */\r\n                while (!ops.empty() &amp;&amp; getPrecedence(ops.peek()) &gt;= getPrecedence(characters[i])) {\r\n                    output.add(Character.toString(ops.pop()));\r\n                }\r\n                ops.push(characters[i]);\r\n            }\r\n        }\r\n\r\n        // push the rest of the operators from the stack to the output queue\r\n        while (!ops.empty()) {\r\n            output.add(Character.toString(ops.pop()));\r\n        }\r\n\r\n        System.out.println(output);\r\n\r\n        return postfixEval(output);\r\n    }\r\n\r\n    // evaluating the postfix expression\r\n    public static double postfixEval(List&lt;String&gt; postfix) {\r\n\r\n        Stack&lt;String&gt; stack = new Stack&lt;String&gt;();\r\n\r\n        for (String element : postfix) {\r\n            // if the element is an operator and the stack has more than two elements, apply\r\n            // the operator to the two last numbers from the stack\r\n            if (stack.size() &gt;= 2\r\n                    &amp;&amp; (element.equals(&quot;+&quot;) || element.equals(&quot;-&quot;) || element.equals(&quot;*&quot;) || element.equals(&quot;/&quot;))) {\r\n                stack.push(Double.toString(\r\n                        evalSimpleExpr(element, Double.parseDouble(stack.pop()), Double.parseDouble(stack.pop()))));\r\n            } else {\r\n                stack.push(element);\r\n            }\r\n        }\r\n\r\n        System.out.println(stack);\r\n        return Double.parseDouble(stack.pop());\r\n    }\r\n\r\n    // test\r\n    public static void main(String[] args) {\r\n        calculate(&quot;15+2*-12-(0.5+0.8*(8-1))/-0.1+0.5+0.5&quot;);\r\n        calculate(&quot;12* 123/-(-5 + 2)&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nThanks!\r\n","title":"Java - multiple levels of negative signs in a mathematical expression evaluator program","body":"<p>I've been trying to make a mathematical expression evaluator program (calculator) in java and I'm stuck with a problem: I can't find a way to make the program support mathematical expressions with multi-levels of negative signs.</p>\n<p>The expression\n<code>1 - -(-(-(-4)))</code>\n's result should be -3.0, but I'm unable to make my program determine whether the number &quot;4&quot; is a negative number or not. My program returns 5 instead since it cannot determine correctly.</p>\n<p>Another example is the expression\n<code>12*123/-(-5+2)</code>\nIt should return an answer of 492, but my program incorrectly returns -492.</p>\n<p>Here's the code I've been working on:</p>\n<pre><code>import java.util.*;\n\npublic class MathEvaluator {\n\n    // get the precedence order of an operator\n    public static int getPrecedence(Character op) {\n        switch (op) {\n            case '*':\n                return 2;\n            case '/':\n                return 2;\n            case '+':\n                return 1;\n            case '-':\n                return 1;\n            default:\n                return 0;\n        }\n    }\n\n    // evaluating simple math expressions between two floating point numbers\n    // order is reversed due to the stack sturcture (LIFO), b comes first while a\n    // comes after\n    public static double evalSimpleExpr(String operator, double a, double b) {\n        switch (operator) {\n            case &quot;*&quot;:\n                return b * a;\n            case &quot;/&quot;:\n                if (a == 0)\n                    return 0;\n                return b / a;\n            case &quot;+&quot;:\n                return b + a;\n            case &quot;-&quot;:\n                return b - a;\n            default:\n                return 0;\n        }\n    }\n\n    public static double calculate(String expression) {\n        System.out.println(&quot;[DEBUG]: &quot; + expression);\n        // make a new array of characters while removing all the whitespaces\n        char[] characters = expression.replaceAll(&quot;\\\\s+&quot;, &quot;&quot;).toCharArray();\n\n        List&lt;String&gt; output = new ArrayList&lt;String&gt;();\n        Stack&lt;Character&gt; ops = new Stack&lt;Character&gt;();\n\n        mainLoop: for (int i = 0; i &lt; characters.length; i++) {\n\n            // if element is an integer / floating-point number / decimal point, then\n            // push it into the stack &quot;numbers&quot;\n            if (Character.isDigit(characters[i]) || characters[i] == '.') {\n                // if the character before the current element is still a digit/decimal point,\n                // then ignore and continue scanning the next element\n                if (i &gt; 0 &amp;&amp; (Character.isDigit(characters[i - 1]) || characters[i - 1] == '.'))\n                    continue mainLoop;\n                String digits = &quot;&quot;;\n                // get the negative sign (if it exists for the number) and add it to the\n                // number\n                if (i &gt; 1 &amp;&amp; characters[i - 1] == '-'\n                        &amp;&amp; (characters[i - 2] == '+' || characters[i - 2] == '-' || characters[i - 2] == '*'\n                                || characters[i - 2] == '/' || characters[i - 2] == '(' || characters[i - 2] == ')')) {\n                    digits += &quot;-&quot;;\n                } else if (i == 1 &amp;&amp; characters[0] == '-') {\n                    digits += &quot;-&quot;;\n                }\n                // a loop to the right to get all digits in a number\n                digits += characters[i];\n                int j = i + 1;\n                while (!(j &gt;= characters.length) &amp;&amp; (Character.isDigit(characters[j]) || characters[j] == '.')) {\n                    digits += characters[j];\n                    j += 1;\n                }\n\n                System.out.println(&quot;[NUMBER]: &quot; + digits);\n                output.add(digits);\n\n                // check if element is brace\n                // if its an opening brace, push it into the operator stack\n            } else if (characters[i] == '(') {\n                ops.push(characters[i]);\n\n            // if its a closing brace, pop all the elements between the braces into the\n            // output queue one by one\n            } else if (characters[i] == ')') {\n                while (!ops.empty() &amp;&amp; ops.peek() != '(') {\n                    output.add(Character.toString(ops.pop()));\n                }\n                ops.pop();\n\n            // check if element is an operator\n            } else if (characters[i] == '+' || characters[i] == '-' || characters[i] == '*' || characters[i] == '/') {\n                // ignoring negative signs\n                if (i &gt; 0 &amp;&amp; characters[i] == '-' &amp;&amp; (characters[i - 1] == '+' ||\n                        characters[i - 1] == '-'\n                        || characters[i - 1] == '*' || characters[i - 1] == '/' || characters[i - 1] == '(')) {\n                    continue mainLoop;\n                } else if (i == 0 &amp;&amp; characters[i] == '-') {\n                    continue mainLoop;\n                }\n                /* \n                 * check if the previous operator has priority over the current operator or if\n                 * the previous operator has the same priority as the current operator (if they\n                 * have the same priority,\n                 * then the previous operator should be applied before the current operator)\n                 * and pop the elements from the stack until the current operator takes the\n                 * priority\n                */\n                while (!ops.empty() &amp;&amp; getPrecedence(ops.peek()) &gt;= getPrecedence(characters[i])) {\n                    output.add(Character.toString(ops.pop()));\n                }\n                ops.push(characters[i]);\n            }\n        }\n\n        // push the rest of the operators from the stack to the output queue\n        while (!ops.empty()) {\n            output.add(Character.toString(ops.pop()));\n        }\n\n        System.out.println(output);\n\n        return postfixEval(output);\n    }\n\n    // evaluating the postfix expression\n    public static double postfixEval(List&lt;String&gt; postfix) {\n\n        Stack&lt;String&gt; stack = new Stack&lt;String&gt;();\n\n        for (String element : postfix) {\n            // if the element is an operator and the stack has more than two elements, apply\n            // the operator to the two last numbers from the stack\n            if (stack.size() &gt;= 2\n                    &amp;&amp; (element.equals(&quot;+&quot;) || element.equals(&quot;-&quot;) || element.equals(&quot;*&quot;) || element.equals(&quot;/&quot;))) {\n                stack.push(Double.toString(\n                        evalSimpleExpr(element, Double.parseDouble(stack.pop()), Double.parseDouble(stack.pop()))));\n            } else {\n                stack.push(element);\n            }\n        }\n\n        System.out.println(stack);\n        return Double.parseDouble(stack.pop());\n    }\n\n    // test\n    public static void main(String[] args) {\n        calculate(&quot;15+2*-12-(0.5+0.8*(8-1))/-0.1+0.5+0.5&quot;);\n        calculate(&quot;12* 123/-(-5 + 2)&quot;);\n    }\n\n}\n</code></pre>\n<p>Thanks!</p>\n"},{"tags":["java","spring-boot","swagger","swagger-ui","springfox"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":2,"creation_date":1679842438,"post_id":75848260,"comment_id":133789292,"body_markdown":"springfox is dead([2020](https://github.com/springfox/springfox)) &#128575;... Long live [springdoc](https://springdoc.org/)!&#129310;&#129310;","body":"springfox is dead(<a href=\"https://github.com/springfox/springfox\" rel=\"nofollow noreferrer\">2020</a>) 😿... Long live <a href=\"https://springdoc.org/\" rel=\"nofollow noreferrer\">springdoc</a>!🤞🤞"}],"answers":[{"tags":[],"owner":{"account_id":22585429,"reputation":286,"user_id":16769477,"display_name":"Jay Yadav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679906682,"creation_date":1679901931,"answer_id":75853083,"question_id":75848260,"body_markdown":"With `SpringBoot3` its recommended to use &lt;b&gt;org.springdoc&lt;/b&gt;. As suggested in comments \r\n\r\nAdd below dependency in your pom.xml, Update project do &lt;b&gt;mvn clean install&lt;/b&gt; &amp; if using spring-security whiltelist swagger-endpoint to not use authentication, Refer [this][1] answer for the same. \r\n\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n\t&lt;version&gt;2.0.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\n\r\n  [1]: https://stackoverflow.com/a/75752381/16769477","title":"Spring Boot + Swagger 2 not working (404)","body":"<p>With <code>SpringBoot3</code> its recommended to use <b>org.springdoc</b>. As suggested in comments</p>\n<p>Add below dependency in your pom.xml, Update project do <b>mvn clean install</b> &amp; if using spring-security whiltelist swagger-endpoint to not use authentication, Refer <a href=\"https://stackoverflow.com/a/75752381/16769477\">this</a> answer for the same.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n    &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n    &lt;version&gt;2.0.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n"}],"owner":{"account_id":2481267,"reputation":709,"user_id":2160696,"accept_rate":69,"display_name":"user2160696"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":495,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679917089,"creation_date":1679839596,"question_id":75848260,"body_markdown":"I`m  trying to add some API documentation to my web project (swagger-ui). However it gives me 404 on \r\nhttp://localhost:8080/swagger-ui/index.html \r\nand \r\nhttp://localhost:8080/swagger-ui.html\r\n\r\nHere is my Maven config:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;ru.racoonsoft&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mm-gate&lt;/artifactId&gt;\r\n    &lt;name&gt;MMGate&lt;/name&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;19&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.4&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;racoonsoft-repository&lt;/id&gt;\r\n            &lt;url&gt;http://racoonsoft.ru:8081/artifactory/racoonsoft/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n        &lt;!-- Starter --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- Retrofit --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.squareup.retrofit2&lt;/groupId&gt;\r\n            &lt;artifactId&gt;retrofit&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.squareup.retrofit2/adapter-rxjava3 --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.squareup.retrofit2&lt;/groupId&gt;\r\n            &lt;artifactId&gt;adapter-rxjava3&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/io.reactivex.rxjava3/rxjava --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.reactivex.rxjava3&lt;/groupId&gt;\r\n            &lt;artifactId&gt;rxjava&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.squareup.retrofit2/adapter-rxjava2 --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.squareup.retrofit2&lt;/groupId&gt;\r\n            &lt;artifactId&gt;adapter-rxjava3&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.squareup.retrofit2&lt;/groupId&gt;\r\n            &lt;artifactId&gt;converter-gson&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.squareup.okhttp3/logging-interceptor --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\r\n            &lt;artifactId&gt;logging-interceptor&lt;/artifactId&gt;\r\n            &lt;version&gt;4.10.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n\r\n        &lt;!-- Utils --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ru.racoonsoft&lt;/groupId&gt;\r\n            &lt;artifactId&gt;racoon-utils&lt;/artifactId&gt;\r\n            &lt;version&gt;5.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- Database --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;version&gt;42.2.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\r\n            &lt;version&gt;5.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n            &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\r\n            &lt;version&gt;4.20.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ru.racoonsoft&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jdbc-template&lt;/artifactId&gt;\r\n            &lt;version&gt;3.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n\r\n    &lt;build&gt;\r\n        &lt;finalName&gt;spring-boot-crud&lt;/finalName&gt;\r\n        &lt;resources&gt;\r\n            &lt;resource&gt;\r\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n                &lt;filtering&gt;false&lt;/filtering&gt;\r\n            &lt;/resource&gt;\r\n        &lt;/resources&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;classifier&gt;exec&lt;/classifier&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.3.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;descriptorRefs&gt;\r\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n                    &lt;/descriptorRefs&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;make-assembly&lt;/id&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;single&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nSwagger settings:\r\n```java\r\n@Configuration\r\npublic class SwaggerSettings {\r\n\r\n    @Bean\r\n    public Docket configApi() {\r\n        return new Docket(DocumentationType.SWAGGER_2)\r\n                .select()\r\n                .apis(RequestHandlerSelectors.any())\r\n                .paths(PathSelectors.any())\r\n                .build();\r\n    }\r\n}\r\n```\r\nOther configurations:\r\n```java\r\n@Configuration\r\npublic class WebConfiguration extends WebMvcConfigurationSupport {\r\n\r\n    @Autowired\r\n    protected AuthService authService;\r\n    @Autowired\r\n    protected AdminInterceptor adminInterceptor;\r\n\r\n    @Override\r\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\r\n        registry.addResourceHandler(&quot;/**&quot;)\r\n                .addResourceLocations(&quot;classpath:/assets&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void addInterceptors(InterceptorRegistry registry) {\r\n        registry.addInterceptor(new GateAuthInterceptor(authService)).addPathPatterns(&quot;/gate/**&quot;);\r\n        registry.addInterceptor(adminInterceptor).addPathPatterns(&quot;/admin/**&quot;);\r\n    }\r\n}\r\n\r\n```\r\n\r\nI use OpenJDK 19 (Oracle).\r\n\r\nAny idea what the problem is?","title":"Spring Boot + Swagger 2 not working (404)","body":"<p>I`m  trying to add some API documentation to my web project (swagger-ui). However it gives me 404 on\nhttp://localhost:8080/swagger-ui/index.html\nand\nhttp://localhost:8080/swagger-ui.html</p>\n<p>Here is my Maven config:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;ru.racoonsoft&lt;/groupId&gt;\n    &lt;artifactId&gt;mm-gate&lt;/artifactId&gt;\n    &lt;name&gt;MMGate&lt;/name&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;19&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.4&lt;/version&gt;\n    &lt;/parent&gt;\n\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;racoonsoft-repository&lt;/id&gt;\n            &lt;url&gt;http://racoonsoft.ru:8081/artifactory/racoonsoft/&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;dependencies&gt;\n\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;!-- Starter --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Retrofit --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.squareup.retrofit2&lt;/groupId&gt;\n            &lt;artifactId&gt;retrofit&lt;/artifactId&gt;\n            &lt;version&gt;2.9.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.squareup.retrofit2/adapter-rxjava3 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.squareup.retrofit2&lt;/groupId&gt;\n            &lt;artifactId&gt;adapter-rxjava3&lt;/artifactId&gt;\n            &lt;version&gt;2.9.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/io.reactivex.rxjava3/rxjava --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.reactivex.rxjava3&lt;/groupId&gt;\n            &lt;artifactId&gt;rxjava&lt;/artifactId&gt;\n            &lt;version&gt;3.1.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.squareup.retrofit2/adapter-rxjava2 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.squareup.retrofit2&lt;/groupId&gt;\n            &lt;artifactId&gt;adapter-rxjava3&lt;/artifactId&gt;\n            &lt;version&gt;2.9.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.squareup.retrofit2&lt;/groupId&gt;\n            &lt;artifactId&gt;converter-gson&lt;/artifactId&gt;\n            &lt;version&gt;2.9.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.squareup.okhttp3/logging-interceptor --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\n            &lt;artifactId&gt;logging-interceptor&lt;/artifactId&gt;\n            &lt;version&gt;4.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n\n        &lt;!-- Utils --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ru.racoonsoft&lt;/groupId&gt;\n            &lt;artifactId&gt;racoon-utils&lt;/artifactId&gt;\n            &lt;version&gt;5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Database --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;42.2.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\n            &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\n            &lt;version&gt;5.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n            &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\n            &lt;version&gt;4.20.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ru.racoonsoft&lt;/groupId&gt;\n            &lt;artifactId&gt;jdbc-template&lt;/artifactId&gt;\n            &lt;version&gt;3.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n\n    &lt;/dependencies&gt;\n\n\n    &lt;build&gt;\n        &lt;finalName&gt;spring-boot-crud&lt;/finalName&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\n                &lt;filtering&gt;false&lt;/filtering&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;classifier&gt;exec&lt;/classifier&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;descriptorRefs&gt;\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                    &lt;/descriptorRefs&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;make-assembly&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>Swagger settings:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class SwaggerSettings {\n\n    @Bean\n    public Docket configApi() {\n        return new Docket(DocumentationType.SWAGGER_2)\n                .select()\n                .apis(RequestHandlerSelectors.any())\n                .paths(PathSelectors.any())\n                .build();\n    }\n}\n</code></pre>\n<p>Other configurations:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class WebConfiguration extends WebMvcConfigurationSupport {\n\n    @Autowired\n    protected AuthService authService;\n    @Autowired\n    protected AdminInterceptor adminInterceptor;\n\n    @Override\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\n        registry.addResourceHandler(&quot;/**&quot;)\n                .addResourceLocations(&quot;classpath:/assets&quot;);\n    }\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(new GateAuthInterceptor(authService)).addPathPatterns(&quot;/gate/**&quot;);\n        registry.addInterceptor(adminInterceptor).addPathPatterns(&quot;/admin/**&quot;);\n    }\n}\n\n</code></pre>\n<p>I use OpenJDK 19 (Oracle).</p>\n<p>Any idea what the problem is?</p>\n"},{"tags":["java","liferay"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1495617098,"post_id":44153872,"comment_id":75324562,"body_markdown":"It&#39;s very unclear what you&#39;re actually trying to do. Are you trying to get the *current* date/time in a particular time zone? It sounds like you need to read https://codeblog.jonskeet.uk/2017/04/23/all-about-java-util-date/ - a `java.util.Date` doesn&#39;t *have* a time zone (or format).","body":"It&#39;s very unclear what you&#39;re actually trying to do. Are you trying to get the <i>current</i> date/time in a particular time zone? It sounds like you need to read <a href=\"https://codeblog.jonskeet.uk/2017/04/23/all-about-java-util-date/\" rel=\"nofollow noreferrer\">codeblog.jonskeet.uk/2017/04/23/all-about-java-util-date</a> - a <code>java.util.Date</code> doesn&#39;t <i>have</i> a time zone (or format)."},{"owner":{"account_id":4106439,"reputation":816,"user_id":3454205,"accept_rate":62,"display_name":"Akash"},"score":0,"creation_date":1495706949,"post_id":44153872,"comment_id":75369896,"body_markdown":"@JonSkeet , I am converting GMT time into different US timeZones. The same time is in sync with [CST](https://time.is/CST) &amp; [PST](https://time.is/PST) but giving different time for [EST](https://time.is/EST) &amp; [MST](https://time.is/MST)","body":"@JonSkeet , I am converting GMT time into different US timeZones. The same time is in sync with <a href=\"https://time.is/CST\" rel=\"nofollow noreferrer\">CST</a> &amp; <a href=\"https://time.is/PST\" rel=\"nofollow noreferrer\">PST</a> but giving different time for <a href=\"https://time.is/EST\" rel=\"nofollow noreferrer\">EST</a> &amp; <a href=\"https://time.is/MST\" rel=\"nofollow noreferrer\">MST</a>"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1495708292,"post_id":44153872,"comment_id":75370672,"body_markdown":"If you were &quot;converting&quot; that would require input in GMT. You don&#39;t have any such input. Furthermore, your method returns a `Date` - and a `Date` doesn&#39;t have a time zone. Please read the blog post I referred to.","body":"If you were &quot;converting&quot; that would require input in GMT. You don&#39;t have any such input. Furthermore, your method returns a <code>Date</code> - and a <code>Date</code> doesn&#39;t have a time zone. Please read the blog post I referred to."}],"answers":[{"tags":[],"owner":{"account_id":6280390,"reputation":3711,"user_id":4881608,"display_name":"Pallavi Sonal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1495619663,"creation_date":1495619663,"answer_id":44154949,"question_id":44153872,"body_markdown":"This can be done in a much simpler way using java.time APIs. Use Instant to represent the time in UTC. It can be converted to time at any zone, and formatted to a particular pattern.\r\n    \r\n    DateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n\tInstant now = Instant.now();\r\n\tZonedDateTime dt = now.atZone(ZoneId.of(&quot;UTC-05:00&quot;));\r\n\tSystem.out.println(dt.format(format)); //2017-05-24 04:51:03\r\n\tZonedDateTime pstDate = now.atZone(ZoneId.of(&quot;UTC-07:00&quot;));\r\n\tSystem.out.println(pstDate.format(format)); //2017-05-24 02:51:03","title":"converting time from BST to American timeZones CST MST EST PST","body":"<p>This can be done in a much simpler way using java.time APIs. Use Instant to represent the time in UTC. It can be converted to time at any zone, and formatted to a particular pattern.</p>\n\n<pre><code>DateTimeFormatter format = DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss\");\nInstant now = Instant.now();\nZonedDateTime dt = now.atZone(ZoneId.of(\"UTC-05:00\"));\nSystem.out.println(dt.format(format)); //2017-05-24 04:51:03\nZonedDateTime pstDate = now.atZone(ZoneId.of(\"UTC-07:00\"));\nSystem.out.println(pstDate.format(format)); //2017-05-24 02:51:03\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4106439,"reputation":816,"user_id":3454205,"accept_rate":62,"display_name":"Akash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1495714224,"creation_date":1495714224,"answer_id":44180261,"question_id":44153872,"body_markdown":"After so much of digging i have found that TimeZone won&#39;t give correct result on basis of time-zone \r\n&gt; (EST, CST, MST, PST)\r\n\r\nso in my method the param which i have passed as timeZone was coming as a\r\n &gt; (EST, CST, MST, PST)\r\n\r\nInstead of `EST, CST, MST, PST` i have passed `US/Eastern` `US/Pacific` `US/Mountain` `US/Central`, and it worked fine for me","title":"converting time from BST to American timeZones CST MST EST PST","body":"<p>After so much of digging i have found that TimeZone won't give correct result on basis of time-zone </p>\n\n<blockquote>\n  <p>(EST, CST, MST, PST)</p>\n</blockquote>\n\n<p>so in my method the param which i have passed as timeZone was coming as a</p>\n\n<blockquote>\n  <p>(EST, CST, MST, PST)</p>\n</blockquote>\n\n<p>Instead of <code>EST, CST, MST, PST</code> i have passed <code>US/Eastern</code> <code>US/Pacific</code> <code>US/Mountain</code> <code>US/Central</code>, and it worked fine for me</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679894587,"creation_date":1679891058,"answer_id":75852125,"question_id":44153872,"body_markdown":"# *java.time*\r\n\r\nUse modern *java.time* classes, not the terribly flawed legacy classes.\r\n\r\n&gt;new Date()));\r\n\r\nNo, capture the current moment using `Instant` class. This class represents a moment as seen with an offset of zero hours-minutes-seconds from UTC.\r\n\r\n    Instant instant = Instant.now() ;\r\n\r\n&gt; from GMT \r\n\r\nIn the realm of most business apps, GMT is equivalent to UTC. \r\n\r\nFor science and engineering, there is a difference. Irrelevant to most of us.\r\n\r\n&gt;to different USA time-zones\r\n\r\nThere are many time zones across the US and its territories. \r\n\r\nReal time zones have a name in format of `Continent/Region` such as `America/Chicago`, `America/Juneau`, `America/Kentucky/Louisville`, `America/Los_Angeles`, `Pacific/Guam`.\r\n\r\nSo you will need to be more specific.\r\n\r\n    List &lt; ZoneId &gt; zoneIds =\r\n        List.of(\r\n            ZoneId.of( &quot;America/Juneau&quot; ) ,\r\n            ZoneId.of( &quot;America/Los_Angeles&quot; ) ,\r\n            ZoneId.of( &quot;America/Chicago&quot; ) ,\r\n            ZoneId.of( &quot;America/New_York&quot; ) \r\n        )\r\n    ;\r\n    for ( ZoneId zoneId : zoneIds ) \r\n    {\r\n        ZonedDateTime zdt = instant.atZone( zoneId ) ;\r\n        String output = zdt.toString() ;  // Standard ISO 8601 format, wisely extended by appending the name of the time zone in square brackets.\r\n        System.out.println( output ) ;\r\n    }\r\n\r\nSee this code [run at Ideone.com][1].\r\n\r\n```none\r\n2023-03-27T04:23:55.441822Z\r\n2023-03-26T20:23:55.441822-08:00[America/Juneau]\r\n2023-03-26T21:23:55.441822-07:00[America/Los_Angeles]\r\n2023-03-26T23:23:55.441822-05:00[America/Chicago]\r\n2023-03-27T00:23:55.441822-04:00[America/New_York]\r\n```\r\n\r\nYou commented:\r\n\r\n&gt;CST &amp; PST but giving different time for EST &amp; MST \r\n\r\nSuch 2-4 character pseudo-zones are not real time zone names. They are not standardized. They are not unique. Use real time zone names as seen above.\r\n\r\n\r\n\r\n  [1]: https://ideone.com/ItNg11","title":"converting time from BST to American timeZones CST MST EST PST","body":"<h1><em>java.time</em></h1>\n<p>Use modern <em>java.time</em> classes, not the terribly flawed legacy classes.</p>\n<blockquote>\n<p>new Date()));</p>\n</blockquote>\n<p>No, capture the current moment using <code>Instant</code> class. This class represents a moment as seen with an offset of zero hours-minutes-seconds from UTC.</p>\n<pre><code>Instant instant = Instant.now() ;\n</code></pre>\n<blockquote>\n<p>from GMT</p>\n</blockquote>\n<p>In the realm of most business apps, GMT is equivalent to UTC.</p>\n<p>For science and engineering, there is a difference. Irrelevant to most of us.</p>\n<blockquote>\n<p>to different USA time-zones</p>\n</blockquote>\n<p>There are many time zones across the US and its territories.</p>\n<p>Real time zones have a name in format of <code>Continent/Region</code> such as <code>America/Chicago</code>, <code>America/Juneau</code>, <code>America/Kentucky/Louisville</code>, <code>America/Los_Angeles</code>, <code>Pacific/Guam</code>.</p>\n<p>So you will need to be more specific.</p>\n<pre><code>List &lt; ZoneId &gt; zoneIds =\n    List.of(\n        ZoneId.of( &quot;America/Juneau&quot; ) ,\n        ZoneId.of( &quot;America/Los_Angeles&quot; ) ,\n        ZoneId.of( &quot;America/Chicago&quot; ) ,\n        ZoneId.of( &quot;America/New_York&quot; ) \n    )\n;\nfor ( ZoneId zoneId : zoneIds ) \n{\n    ZonedDateTime zdt = instant.atZone( zoneId ) ;\n    String output = zdt.toString() ;  // Standard ISO 8601 format, wisely extended by appending the name of the time zone in square brackets.\n    System.out.println( output ) ;\n}\n</code></pre>\n<p>See this code <a href=\"https://ideone.com/ItNg11\" rel=\"nofollow noreferrer\">run at Ideone.com</a>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>2023-03-27T04:23:55.441822Z\n2023-03-26T20:23:55.441822-08:00[America/Juneau]\n2023-03-26T21:23:55.441822-07:00[America/Los_Angeles]\n2023-03-26T23:23:55.441822-05:00[America/Chicago]\n2023-03-27T00:23:55.441822-04:00[America/New_York]\n</code></pre>\n<p>You commented:</p>\n<blockquote>\n<p>CST &amp; PST but giving different time for EST &amp; MST</p>\n</blockquote>\n<p>Such 2-4 character pseudo-zones are not real time zone names. They are not standardized. They are not unique. Use real time zone names as seen above.</p>\n"}],"owner":{"account_id":4106439,"reputation":816,"user_id":3454205,"accept_rate":62,"display_name":"Akash"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":394,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":44180261,"answer_count":3,"score":1,"last_activity_date":1679916862,"creation_date":1495616916,"question_id":44153872,"body_markdown":"I am converting time from GMT to different USA time-zones. For that, I have written a method which is returning the 1-hour prior time. if the time is 2:00 clock it&#39;s returning 1:00 clock\r\n\r\n    private static Date timeFormat(String timeZone) throws ParseException {\r\n        SimpleDateFormat sdfDate = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n        DateFormat gmtFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n        gmtFormat.setTimeZone(TimeZone.getTimeZone(TimeZone.getDefault().getID()));\r\n        Date date = null;\r\n        try {\r\n            date = gmtFormat.parse(sdfDate.format(new Date()));\r\n            LOG.info(&quot;GMT format time and date ==&gt;&gt; &quot;+date);\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n        }\r\n        DateFormat pstFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n        pstFormat.setTimeZone(TimeZone.getTimeZone(timeZone));\r\n        String timedd = pstFormat.format(date);\r\n        LOG.info(&quot;Return the new time based on timezone : &quot;+pstFormat.format(date));\r\n        return gmtFormat.parse(timedd);\r\n    }\r\n\r\nCan anybody help me out what exactly is the issue, because a few months back the same method was working fine? Is it happening because of daylight saving time?\r\n","title":"converting time from BST to American timeZones CST MST EST PST","body":"<p>I am converting time from GMT to different USA time-zones. For that, I have written a method which is returning the 1-hour prior time. if the time is 2:00 clock it's returning 1:00 clock</p>\n\n<pre><code>private static Date timeFormat(String timeZone) throws ParseException {\n    SimpleDateFormat sdfDate = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n    DateFormat gmtFormat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n    gmtFormat.setTimeZone(TimeZone.getTimeZone(TimeZone.getDefault().getID()));\n    Date date = null;\n    try {\n        date = gmtFormat.parse(sdfDate.format(new Date()));\n        LOG.info(\"GMT format time and date ==&gt;&gt; \"+date);\n    } catch (ParseException e) {\n        e.printStackTrace();\n    }\n    DateFormat pstFormat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n    pstFormat.setTimeZone(TimeZone.getTimeZone(timeZone));\n    String timedd = pstFormat.format(date);\n    LOG.info(\"Return the new time based on timezone : \"+pstFormat.format(date));\n    return gmtFormat.parse(timedd);\n}\n</code></pre>\n\n<p>Can anybody help me out what exactly is the issue, because a few months back the same method was working fine? Is it happening because of daylight saving time?</p>\n"},{"tags":["java","log4j2","archunit"],"answers":[{"tags":[],"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679916318,"creation_date":1679916318,"answer_id":75855177,"question_id":75854889,"body_markdown":"You&#39;re testing the types of the parameters, not the type of the arguments.\r\n\r\n[`Logger.error(String, Throwable)`](https://www.slf4j.org/api/org/slf4j/Logger.html#error-java.lang.String-java.lang.Throwable-) exists as a method, but for more args than that, you&#39;re using plain Objects.\r\n\r\ne.g. [`Logger.error(String, Object, Object)`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/Logger.html#error-java.lang.String-java.lang.Object-java.lang.Object-). Beyond 10 parameters, there&#39;s a varargs [`Logger.error(String, Object...)`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/Logger.html#error-java.lang.String-java.lang.Object...-) too.\r\n\r\nThe use of `rawParameterTypes` is wrong, but I&#39;m not familiar enough with ArchUnit&#39;s API to say what to replace it with.","title":"How to detect that one of the parameters in log.error is Throwable","body":"<p>You're testing the types of the parameters, not the type of the arguments.</p>\n<p><a href=\"https://www.slf4j.org/api/org/slf4j/Logger.html#error-java.lang.String-java.lang.Throwable-\" rel=\"nofollow noreferrer\"><code>Logger.error(String, Throwable)</code></a> exists as a method, but for more args than that, you're using plain Objects.</p>\n<p>e.g. <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/Logger.html#error-java.lang.String-java.lang.Object-java.lang.Object-\" rel=\"nofollow noreferrer\"><code>Logger.error(String, Object, Object)</code></a>. Beyond 10 parameters, there's a varargs <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/Logger.html#error-java.lang.String-java.lang.Object...-\" rel=\"nofollow noreferrer\"><code>Logger.error(String, Object...)</code></a> too.</p>\n<p>The use of <code>rawParameterTypes</code> is wrong, but I'm not familiar enough with ArchUnit's API to say what to replace it with.</p>\n"}],"owner":{"account_id":148117,"reputation":3294,"user_id":359666,"accept_rate":74,"display_name":"Uros K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75855177,"answer_count":1,"score":1,"last_activity_date":1679916318,"creation_date":1679914374,"question_id":75854889,"body_markdown":"I am using log4j2 and logging the error as such:\r\n\r\n```java\r\nString param1 = &quot;param1&quot;;\r\ntry {\r\n  ...\r\n} catch (Exception e) {\r\n  log.error(&quot;This is an error: {}&quot;, param1, e);\r\n}\r\n```\r\nThis is my ArchUnit test, which tests that all the log.error calls contain throwable parameter:\r\n\r\n```java\r\nvoid errors_should_be_logged_with_context() {\r\n    ArchRule rule =\r\n        noClasses()\r\n            .should(\r\n                callMethodWhere(\r\n                        target(name(&quot;error&quot;))\r\n                            .and(target(owner(assignableTo(Logger.class))))\r\n                            .and(\r\n                                target(\r\n                                    rawParameterTypes(\r\n                                        new DescribedPredicate&lt;&gt;(\r\n                                            &quot;logger.error without exception context&quot;) {\r\n                                          @Override\r\n                                          public boolean test(List&lt;JavaClass&gt; methodParameters) {\r\n                                            boolean hasNoContext = methodParameters.size() &lt;= 1;\r\n                                            boolean hasNoExceptionInContext =\r\n                                                methodParameters.stream()\r\n                                                    .noneMatch(\r\n                                                        j -&gt; j.isAssignableTo(Throwable.class));\r\n                                            return hasNoContext || hasNoExceptionInContext;\r\n                                          }\r\n                                        }))))\r\n                    .as(&quot;use logger.error without context&quot;));\r\n    rule.check(ALL_CLASSES);\r\n  }\r\n```\r\nThe problem is that `j.isAssignableTo(Throwable.class))` is returning false for the parameter at index 2.\r\n\r\nTest works as expected if there are only 2 parameters in log.error call (string, throwable).\r\n\r\nHow should the test be modified to cover both scenarios?","title":"How to detect that one of the parameters in log.error is Throwable","body":"<p>I am using log4j2 and logging the error as such:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String param1 = &quot;param1&quot;;\ntry {\n  ...\n} catch (Exception e) {\n  log.error(&quot;This is an error: {}&quot;, param1, e);\n}\n</code></pre>\n<p>This is my ArchUnit test, which tests that all the log.error calls contain throwable parameter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>void errors_should_be_logged_with_context() {\n    ArchRule rule =\n        noClasses()\n            .should(\n                callMethodWhere(\n                        target(name(&quot;error&quot;))\n                            .and(target(owner(assignableTo(Logger.class))))\n                            .and(\n                                target(\n                                    rawParameterTypes(\n                                        new DescribedPredicate&lt;&gt;(\n                                            &quot;logger.error without exception context&quot;) {\n                                          @Override\n                                          public boolean test(List&lt;JavaClass&gt; methodParameters) {\n                                            boolean hasNoContext = methodParameters.size() &lt;= 1;\n                                            boolean hasNoExceptionInContext =\n                                                methodParameters.stream()\n                                                    .noneMatch(\n                                                        j -&gt; j.isAssignableTo(Throwable.class));\n                                            return hasNoContext || hasNoExceptionInContext;\n                                          }\n                                        }))))\n                    .as(&quot;use logger.error without context&quot;));\n    rule.check(ALL_CLASSES);\n  }\n</code></pre>\n<p>The problem is that <code>j.isAssignableTo(Throwable.class))</code> is returning false for the parameter at index 2.</p>\n<p>Test works as expected if there are only 2 parameters in log.error call (string, throwable).</p>\n<p>How should the test be modified to cover both scenarios?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":80364,"reputation":90939,"user_id":227299,"accept_rate":72,"display_name":"Ruan Mendes"},"score":1,"creation_date":1679916083,"post_id":75855117,"comment_id":133800768,"body_markdown":"`this.catSpaceNumber = int catSpaceNo;` should be `this.catSpaceNumber = catSpaceNo;`","body":"<code>this.catSpaceNumber = int catSpaceNo;</code> should be <code>this.catSpaceNumber = catSpaceNo;</code>"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1679916084,"post_id":75855117,"comment_id":133800769,"body_markdown":"`this.name = _name;` as an aside, your `Pet` class doesn&#39;t have a `name` member.","body":"<code>this.name = _name;</code> as an aside, your <code>Pet</code> class doesn&#39;t have a <code>name</code> member."},{"owner":{"display_name":"user6073886"},"score":3,"creation_date":1679916433,"post_id":75855117,"comment_id":133800859,"body_markdown":"In general I would recommend that when beginning to learn java to start small. Create a single small class with 1 or 2 attributes, then run and test that code and if it works keep adding more and more stuff. And work your way up like that, always adding and testing small parts of your code. Simply writing a few classes worth of code without testing and then only trying to compile it all at the end is a recipe for disaster for beginners as your errors will keep piling up.","body":"In general I would recommend that when beginning to learn java to start small. Create a single small class with 1 or 2 attributes, then run and test that code and if it works keep adding more and more stuff. And work your way up like that, always adding and testing small parts of your code. Simply writing a few classes worth of code without testing and then only trying to compile it all at the end is a recipe for disaster for beginners as your errors will keep piling up."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1679916917,"post_id":75855117,"comment_id":133800973,"body_markdown":"As @OHGODSPIDERS says, start with much smaller, simpler tasks until you have a basic level of comfort with the language.","body":"As @OHGODSPIDERS says, start with much smaller, simpler tasks until you have a basic level of comfort with the language."},{"owner":{"account_id":27908723,"reputation":1,"user_id":21311360,"display_name":"Eddard Greybeard"},"score":0,"creation_date":1679930210,"post_id":75855117,"comment_id":133805020,"body_markdown":"petName wouldn&#39;t be the name member?","body":"petName wouldn&#39;t be the name member?"}],"owner":{"account_id":27908723,"reputation":1,"user_id":21311360,"display_name":"Eddard Greybeard"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1679916138,"answer_count":0,"score":0,"last_activity_date":1679916188,"creation_date":1679915930,"question_id":75855117,"body_markdown":"Learning Java, so my code is probably a mess.\r\n\r\nPretty sure I&#39;m declaring the latter variables wrong, and learning to declare them properly will un-knot this mess.\r\n\r\nIt shows up whenever I get into the methods after the class declarations, and I start to define the &quot;get/set&quot; methods\r\n\r\nIt&#39;s a lab for a pet stay check-in/out system.  We have the pet superclass, and the cat/dog classes.  There&#39;s variables for the name, weight, grooming, space number, and so on for dogs whereas the cat just has the space number.  For the dog, the days stay is taken into consideration because if they&#39;re staying for 3 or more days, they have the option for grooming.  So, when we check in the dog, all these variables are part of the process, and the amount due is totaled:\r\n\r\n```\r\n//Pet Superclass\r\n\r\npublic class Pet {\r\n\t\r\n\t// Instance Variables\r\n\t\r\n\tprivate String petType;\r\n\tprivate String petName;\r\n\tprivate int petAge;\r\n\tprivate int dogSpaces;\r\n\tprivate int catSpaces;\r\n\tprivate int daysStay;\r\n\tprivate int amountDue;\r\n\t\r\n\tpublic Pet(String petType, String petName, int petAge, int dogSpaces, int catSpaces, int daysStay, double amountDue) {\r\n\t\tthis.petType = String type;\r\n\t\tthis.petName = String name;\r\n\t\tthis.petAge = int age;\r\n\t\tthis.dogSpaces = int _dogSpaces;\r\n\t\tthis.catSpaces = int _catSpaces;\r\n\t\tthis.daysStay = int _daysStay;\r\n\t\tthis.amountDue = double amtDue;\r\n\t}\r\n\t\t\t\r\n\t// get/set PetType\r\n\tpublic String getPetType() {return type;}\r\n\tpublic void setPetType(String _type) {\r\n\t\tthis.type = _type;\r\n\t}\r\n\t\r\n\t// get/set PetName\r\n\tpublic String getPetName() {return name;}\r\n\tpublic void setPetName(String _name) {\r\n\t\tthis.name = _name;\r\n\t}\r\n\t\r\n\t// get/set PetAge\r\n\tpublic int getPetAge() {return age;}\r\n\tpublic void setPetAge(int _age) {\r\n\t\tthis.age = _age;\r\n\t}\r\n\t\r\n\t// get/set DogSpaces\r\n\tpublic int getDogSpaces() {return _dogSpaces;}\r\n\tpublic void setDogSpaces (int dog_Spaces) {\r\n\t\tthis._dogspaces = dog_Spaces;\r\n\t}\r\n\t\r\n\t// get/set CatSpaces\r\n\tpublic int getCatSpaces() {return _catSpaces;}\r\n\tpublic void setCatSpaces(int cat_Spaces) {\r\n\t\tthis._catSpaces = cat_Spaces;\r\n\t}\r\n\t\r\n\t// get/set DaysStay\r\n\tpublic int getDaysStay() {return _daysStay;}\r\n\tpublic void setDaysStay(int days_stay) {\r\n\t\tthis._daysStay = days_stay;\r\n\t}\r\n\t\r\n\t// get/set AmountDue\r\n\tpublic double getAmountDue() {return amtDue;}\r\n\tpublic void setAmountDue(double _amtDue) {\r\n\t\tthis.amtDue = _amtDue;\r\n\t}\r\n\t\r\n// Constructor Declaration Dog Class\r\n\r\n\tclass Dog extends Pet {\r\n\t\tprivate int dogSpaceNumber;\r\n\t\tprivate double dogWeight;\r\n\t\tprivate String grooming;\r\n\t\r\n\t\tpublic Dog(int dogSpaceNumber, double dogWeight, String grooming) {\r\n\t\t\tthis.dogSpaceNumber = int dogSpaceNo;\r\n\t\t\tthis.dogWeight = double _dogWeight;\r\n\t\t\tthis.grooming = String _grooming;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t// get/set DogSpaceNumber\r\n\t\tpublic int getDogSpaceNumber() {return dogSpaceNo;}\r\n\t\tpublic void setDogSpaceNumber(int _dogSpaceNo) {\r\n\t\t\tthis.dogSpaceNo = _dogSpaceNo;\r\n\t\t}\r\n\t\t\r\n\t\t// get/set DogWeight\r\n\t\tpublic int getDogWeight() {return _dogWeight;}\r\n\t\tpublic void setDogWeight(double dog_Weight) {\r\n\t\t\tthis._dogWeight = dog_Weight;\r\n\t\t}\r\n\t\t\r\n\t\t// get/set Grooming\r\n\t\tpublic string getGrooming() {return _grooming;}\r\n\t\tpublic void setGrooming(String _Grooming) {\r\n\t\t\tthis._grooming = _Grooming;\r\n\t\t}\r\n\t\t\t\r\n\t}\r\n\r\n// Constructor Declaration Cat Class\r\n\r\n\tclass Cat extends Pet {\r\n\t\tprivate int catSpaceNumber;\r\n\t\r\n\t    public Cat(int catSpaceNumber) {\r\n\t\t    this.catSpaceNumber = int catSpaceNo;\r\n\t    }\r\n\t\r\n\t\r\n\t// get/set CatSpaceNumber\r\n\t    public int getCatSpaceNumber() {return catSpaceNo;}\r\n\t    public void setCatSpaceNumber(int _catSpaceNo) {\r\n\t\t    this.catSpaceNo = _catSpaceNo;\r\n\t    }\r\n    }\r\n }\r\n```\r\n\r\nI had a few errors before, an extra curly bracket that was out of place as well as a couple more that were messing up the encapsulation that java likes, as well as some typographical errors that were screwing with variable recognition, but this seems to be the last one, and I think it&#39;s because I&#39;m not declaring them properly, but googling the problem hasn&#39;t exactly given me an &quot;a-ha&quot; realization.\r\n\r\nWhat am I missing?\r\n\r\nI am getting `error: .class expected.` whereever I am trying to assign `String`s (`this.variable = `) and a ` ; expected/not statement` error whenever assigning ints.","title":"How do I fix the &quot;.class expected&quot; error in my code here?","body":"<p>Learning Java, so my code is probably a mess.</p>\n<p>Pretty sure I'm declaring the latter variables wrong, and learning to declare them properly will un-knot this mess.</p>\n<p>It shows up whenever I get into the methods after the class declarations, and I start to define the &quot;get/set&quot; methods</p>\n<p>It's a lab for a pet stay check-in/out system.  We have the pet superclass, and the cat/dog classes.  There's variables for the name, weight, grooming, space number, and so on for dogs whereas the cat just has the space number.  For the dog, the days stay is taken into consideration because if they're staying for 3 or more days, they have the option for grooming.  So, when we check in the dog, all these variables are part of the process, and the amount due is totaled:</p>\n<pre><code>//Pet Superclass\n\npublic class Pet {\n    \n    // Instance Variables\n    \n    private String petType;\n    private String petName;\n    private int petAge;\n    private int dogSpaces;\n    private int catSpaces;\n    private int daysStay;\n    private int amountDue;\n    \n    public Pet(String petType, String petName, int petAge, int dogSpaces, int catSpaces, int daysStay, double amountDue) {\n        this.petType = String type;\n        this.petName = String name;\n        this.petAge = int age;\n        this.dogSpaces = int _dogSpaces;\n        this.catSpaces = int _catSpaces;\n        this.daysStay = int _daysStay;\n        this.amountDue = double amtDue;\n    }\n            \n    // get/set PetType\n    public String getPetType() {return type;}\n    public void setPetType(String _type) {\n        this.type = _type;\n    }\n    \n    // get/set PetName\n    public String getPetName() {return name;}\n    public void setPetName(String _name) {\n        this.name = _name;\n    }\n    \n    // get/set PetAge\n    public int getPetAge() {return age;}\n    public void setPetAge(int _age) {\n        this.age = _age;\n    }\n    \n    // get/set DogSpaces\n    public int getDogSpaces() {return _dogSpaces;}\n    public void setDogSpaces (int dog_Spaces) {\n        this._dogspaces = dog_Spaces;\n    }\n    \n    // get/set CatSpaces\n    public int getCatSpaces() {return _catSpaces;}\n    public void setCatSpaces(int cat_Spaces) {\n        this._catSpaces = cat_Spaces;\n    }\n    \n    // get/set DaysStay\n    public int getDaysStay() {return _daysStay;}\n    public void setDaysStay(int days_stay) {\n        this._daysStay = days_stay;\n    }\n    \n    // get/set AmountDue\n    public double getAmountDue() {return amtDue;}\n    public void setAmountDue(double _amtDue) {\n        this.amtDue = _amtDue;\n    }\n    \n// Constructor Declaration Dog Class\n\n    class Dog extends Pet {\n        private int dogSpaceNumber;\n        private double dogWeight;\n        private String grooming;\n    \n        public Dog(int dogSpaceNumber, double dogWeight, String grooming) {\n            this.dogSpaceNumber = int dogSpaceNo;\n            this.dogWeight = double _dogWeight;\n            this.grooming = String _grooming;\n            \n        }\n        \n        // get/set DogSpaceNumber\n        public int getDogSpaceNumber() {return dogSpaceNo;}\n        public void setDogSpaceNumber(int _dogSpaceNo) {\n            this.dogSpaceNo = _dogSpaceNo;\n        }\n        \n        // get/set DogWeight\n        public int getDogWeight() {return _dogWeight;}\n        public void setDogWeight(double dog_Weight) {\n            this._dogWeight = dog_Weight;\n        }\n        \n        // get/set Grooming\n        public string getGrooming() {return _grooming;}\n        public void setGrooming(String _Grooming) {\n            this._grooming = _Grooming;\n        }\n            \n    }\n\n// Constructor Declaration Cat Class\n\n    class Cat extends Pet {\n        private int catSpaceNumber;\n    \n        public Cat(int catSpaceNumber) {\n            this.catSpaceNumber = int catSpaceNo;\n        }\n    \n    \n    // get/set CatSpaceNumber\n        public int getCatSpaceNumber() {return catSpaceNo;}\n        public void setCatSpaceNumber(int _catSpaceNo) {\n            this.catSpaceNo = _catSpaceNo;\n        }\n    }\n }\n</code></pre>\n<p>I had a few errors before, an extra curly bracket that was out of place as well as a couple more that were messing up the encapsulation that java likes, as well as some typographical errors that were screwing with variable recognition, but this seems to be the last one, and I think it's because I'm not declaring them properly, but googling the problem hasn't exactly given me an &quot;a-ha&quot; realization.</p>\n<p>What am I missing?</p>\n<p>I am getting <code>error: .class expected.</code> whereever I am trying to assign <code>String</code>s (<code>this.variable = </code>) and a <code> ; expected/not statement</code> error whenever assigning ints.</p>\n"},{"tags":["java","visibility","project-panama"],"answers":[{"tags":[],"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679712950,"creation_date":1679712950,"answer_id":75839430,"question_id":75836178,"body_markdown":"If you look at the [Specification for `BlockingQueue`][jd], you can find the following paragraph:\r\n\r\n&gt; Memory consistency effects: As with other concurrent collections, actions in a thread prior to placing an object into a `BlockingQueue` [*happen-before*](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/package-summary.html#MemoryVisibility) actions subsequent to the access or removal of that element from the `BlockingQueue` in another thread. \r\n\r\nAs `BlockingQueue` establishes a happen-before relationship, no additional synchronization is needed.\r\n\r\n[jd]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/BlockingQueue.html","title":"Can BlockingQueue make MemorySegment visible for multiple threads?","body":"<p>If you look at the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/BlockingQueue.html\" rel=\"nofollow noreferrer\">Specification for <code>BlockingQueue</code></a>, you can find the following paragraph:</p>\n<blockquote>\n<p>Memory consistency effects: As with other concurrent collections, actions in a thread prior to placing an object into a <code>BlockingQueue</code> <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/package-summary.html#MemoryVisibility\" rel=\"nofollow noreferrer\"><em>happen-before</em></a> actions subsequent to the access or removal of that element from the <code>BlockingQueue</code> in another thread.</p>\n</blockquote>\n<p>As <code>BlockingQueue</code> establishes a happen-before relationship, no additional synchronization is needed.</p>\n"}],"owner":{"account_id":13798877,"reputation":45,"user_id":21010464,"display_name":"benrush"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1679915871,"creation_date":1679675632,"question_id":75836178,"body_markdown":"I am using JDK20&#39;s FFI, and I need to pass a Object to a BlockingQueue to shared it from one thread to another. The Object contains several MemorySegment field, which belongs to `Arena.openShared()`. Before passing, I write some bytes into the MemorySegment using `MemorySegment.set(JAVA_BYTE, ..., ...)`. I don&#39;t know if the other thread would read exactly what I write, since I am not using `VarHandle.setVolatile()` to ensure its thread visibility. But as Java Objects, there should be locks in BlockingQueue to ensure it, I wonder if it&#39;s also appliable to the `MemorySegment`, that each byte would be flushed to the memory for other threads to see them.","title":"Can BlockingQueue make MemorySegment visible for multiple threads?","body":"<p>I am using JDK20's FFI, and I need to pass a Object to a BlockingQueue to shared it from one thread to another. The Object contains several MemorySegment field, which belongs to <code>Arena.openShared()</code>. Before passing, I write some bytes into the MemorySegment using <code>MemorySegment.set(JAVA_BYTE, ..., ...)</code>. I don't know if the other thread would read exactly what I write, since I am not using <code>VarHandle.setVolatile()</code> to ensure its thread visibility. But as Java Objects, there should be locks in BlockingQueue to ensure it, I wonder if it's also appliable to the <code>MemorySegment</code>, that each byte would be flushed to the memory for other threads to see them.</p>\n"},{"tags":["java","spring","spring-boot","spring-annotations","hibernate-validator"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1679911043,"post_id":75854099,"comment_id":133799491,"body_markdown":"Although it&#39;s a workaround (dirty one tbh), when i need to add custom error codes for an error, i tend to throw exceptions in the `ConstraintValidator` and gather data from the exception in the handler. The downside is that you can get information only for one error like this, it does not work if you need to know about all errors for example.","body":"Although it&#39;s a workaround (dirty one tbh), when i need to add custom error codes for an error, i tend to throw exceptions in the <code>ConstraintValidator</code> and gather data from the exception in the handler. The downside is that you can get information only for one error like this, it does not work if you need to know about all errors for example."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1679911881,"post_id":75854099,"comment_id":133799730,"body_markdown":"There is too much code missing (like the serialize/deserialize methods) to be able to answer this. Why not just specify the error message as json with interpolation for the error code (the same as for instance the Min/Max or Range annotation do, although with regular text)? I don&#39;t see why you would need to deserialize all the stuff.","body":"There is too much code missing (like the serialize/deserialize methods) to be able to answer this. Why not just specify the error message as json with interpolation for the error code (the same as for instance the Min/Max or Range annotation do, although with regular text)? I don&#39;t see why you would need to deserialize all the stuff."},{"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"score":0,"creation_date":1679915097,"post_id":75854099,"comment_id":133800531,"body_markdown":"Hi @M.Deinum, I have updated and added the missing utility class. &quot;Why not just specify the error message as JSON&quot; =&gt; Having JSON payloads on the top of annotation is not something advisable, it&#39;ll reduce readability and increase cognitive load.\n\n&quot;I don&#39;t see why you would need to deserialize all the stuff&quot; =&gt; There seems no way of throwing the custom exception in the &quot;MethodArgumentNotValidException&quot;","body":"Hi @M.Deinum, I have updated and added the missing utility class. &quot;Why not just specify the error message as JSON&quot; =&gt; Having JSON payloads on the top of annotation is not something advisable, it&#39;ll reduce readability and increase cognitive load.  &quot;I don&#39;t see why you would need to deserialize all the stuff&quot; =&gt; There seems no way of throwing the custom exception in the &quot;MethodArgumentNotValidException&quot;"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1679918851,"post_id":75854099,"comment_id":133801459,"body_markdown":"Not sure if just adding a simple json reduces the readability. It is just a small line, wrapping your current message in curly braces and appending a field. Unless you are shoehorning a complete complex JSON in there that would be different. You shouldn&#39;t be throwing exceptions from the validator in the first place. Adding to that if you know it is going to be json you know the structure, just add that as a string, and place the `message` and `erorrcode` in that string instead of using marshalling. The method you use is for applying templates.","body":"Not sure if just adding a simple json reduces the readability. It is just a small line, wrapping your current message in curly braces and appending a field. Unless you are shoehorning a complete complex JSON in there that would be different. You shouldn&#39;t be throwing exceptions from the validator in the first place. Adding to that if you know it is going to be json you know the structure, just add that as a string, and place the <code>message</code> and <code>erorrcode</code> in that string instead of using marshalling. The method you use is for applying templates."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1679919443,"post_id":75854099,"comment_id":133801607,"body_markdown":"Finally the original `ConstraintViolation` contains all the information you need. As it contains all the attributes from the annotation with their values in the, through accessing the `ConstraintDescriptor` (which is basically the interpretation of the annotation on the field/class whatever you annotated). So you should convert the `COnstraintViolationException` yourself instead of letting Spring convert it to a `MethodARgumentNotValidException` (although I believe it transfers, some of, the information as well).","body":"Finally the original <code>ConstraintViolation</code> contains all the information you need. As it contains all the attributes from the annotation with their values in the, through accessing the <code>ConstraintDescriptor</code> (which is basically the interpretation of the annotation on the field/class whatever you annotated). So you should convert the <code>COnstraintViolationException</code> yourself instead of letting Spring convert it to a <code>MethodARgumentNotValidException</code> (although I believe it transfers, some of, the information as well)."}],"answers":[{"tags":[],"owner":{"account_id":6366204,"reputation":2197,"user_id":4940126,"display_name":"mark_o"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679915803,"creation_date":1679915803,"answer_id":75855099,"question_id":75854099,"body_markdown":"I&#39;d suggest taking a look at the [dynamic payload as part of ConstraintViolation][1]\r\n\r\nIf you want to provide some additional context in your violation, that could be one way to do it. This payload can be added through the context of `isValid(...)` as follows:\r\n\r\n    @Override\r\n    public boolean isValid(String value, ConstraintValidatorContext context) {\r\n        // First check that the context is of correct type and no exceptions will be thrown\r\n        if (context instanceof HibernateConstraintValidatorContext ) {\r\n            // unwrap the context and add a payload. It can be as simple as just the error code. \r\n            // It can be an object, or a map if multiple values are expected to be passed over:\r\n            context.unwrap( HibernateConstraintValidatorContext.class )\r\n                    .withDynamicPayload( errorCode );\r\n        }\r\n        // perform the actual validation:\r\n        return value != null &amp;&amp; !value.trim().isEmpty();\r\n    }\r\n\r\nNow on the handling side of things, you&#39;d need to access this payload. That can be done through unwrapping the `FieldError` that you&#39;ve been already working with. Something along the lines:\r\n\r\n    @ExceptionHandler\r\n    ResponseEntity&lt;Map&lt;String, Object&gt;&gt; handleMethodArgumentException(MethodArgumentNotValidException exception) {\r\n        Map&lt;String, Object&gt; body = new LinkedHashMap&lt;&gt;(1, 1);\r\n    \r\n        final List&lt;ErrorStructure&gt; errorStructures =\r\n                exception.getBindingResult().getFieldErrors().stream()\r\n                        .map(error -&gt; {\r\n                            // Since we passed a simple Long in the validator side we pass Long to get it back here:\r\n                            Long code = error.unwrap( HibernateConstraintViolation.class ).getDynamicPayload( Long.class );\r\n                            // do other stuff ...\r\n                            // ...\r\n                        })\r\n                        .toList();\r\n        body.put(&quot;messages&quot;, errorStructures);\r\n        return ResponseEntity.status(BAD_REQUEST).contentType(APPLICATION_JSON).body(body);\r\n    }\r\n\r\nThat should eliminate the need for marshalling JSON.\r\n\r\n  [1]: https://docs.jboss.org/hibernate/validator/6.2/reference/en-US/html_single/#section-dynamic-payload","title":"How to Throw a Custom Exception on Validation Failure Using a Custom Annotation in Spring Boot 3?","body":"<p>I'd suggest taking a look at the <a href=\"https://docs.jboss.org/hibernate/validator/6.2/reference/en-US/html_single/#section-dynamic-payload\" rel=\"nofollow noreferrer\">dynamic payload as part of ConstraintViolation</a></p>\n<p>If you want to provide some additional context in your violation, that could be one way to do it. This payload can be added through the context of <code>isValid(...)</code> as follows:</p>\n<pre><code>@Override\npublic boolean isValid(String value, ConstraintValidatorContext context) {\n    // First check that the context is of correct type and no exceptions will be thrown\n    if (context instanceof HibernateConstraintValidatorContext ) {\n        // unwrap the context and add a payload. It can be as simple as just the error code. \n        // It can be an object, or a map if multiple values are expected to be passed over:\n        context.unwrap( HibernateConstraintValidatorContext.class )\n                .withDynamicPayload( errorCode );\n    }\n    // perform the actual validation:\n    return value != null &amp;&amp; !value.trim().isEmpty();\n}\n</code></pre>\n<p>Now on the handling side of things, you'd need to access this payload. That can be done through unwrapping the <code>FieldError</code> that you've been already working with. Something along the lines:</p>\n<pre><code>@ExceptionHandler\nResponseEntity&lt;Map&lt;String, Object&gt;&gt; handleMethodArgumentException(MethodArgumentNotValidException exception) {\n    Map&lt;String, Object&gt; body = new LinkedHashMap&lt;&gt;(1, 1);\n\n    final List&lt;ErrorStructure&gt; errorStructures =\n            exception.getBindingResult().getFieldErrors().stream()\n                    .map(error -&gt; {\n                        // Since we passed a simple Long in the validator side we pass Long to get it back here:\n                        Long code = error.unwrap( HibernateConstraintViolation.class ).getDynamicPayload( Long.class );\n                        // do other stuff ...\n                        // ...\n                    })\n                    .toList();\n    body.put(&quot;messages&quot;, errorStructures);\n    return ResponseEntity.status(BAD_REQUEST).contentType(APPLICATION_JSON).body(body);\n}\n</code></pre>\n<p>That should eliminate the need for marshalling JSON.</p>\n"}],"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2083,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1679915803,"creation_date":1679909332,"question_id":75854099,"body_markdown":"## 1. What I’m Trying to Achieve?\r\nI wanted to have a custom annotation that supports the `errorCode` along with the `errorMessage` parameter.\r\n\r\n    @NotBlank(message = &quot;Field X can&#39;t be Blank.&quot;, errorCode = 23442)\r\n\r\nSo, I create `NotBlank` annotation with the below schema.\r\n```\r\n@Documented\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target({FIELD, PARAMETER})\r\n@Constraint(validatedBy = {NotBlankAnnotationProcessor.class})\r\npublic @interface NotBlank {\r\n  String message() default &quot;{commons.validation.constraints.NotBlank.message}&quot;;\r\n\r\n  @SuppressWarnings(&quot;unused&quot;)\r\n  Class&lt;?&gt;[] groups() default {};\r\n\r\n  @SuppressWarnings(&quot;unused&quot;)\r\n  Class&lt;? extends Payload&gt;[] payload() default {};\r\n\r\n  long errorCode() default 400;\r\n}\r\n```\r\nand it has an annotation processor for validation `NotBlankAnnotationProcessor`\r\n\r\n```\r\n@Getter\r\npublic class NotBlankAnnotationProcessor implements ConstraintValidator&lt;NotBlank, String&gt; {\r\n  private String message;\r\n  private long errorCode;\r\n\r\n  @Override\r\n  public void initialize(NotBlank annotation) {\r\n    message = annotation.message();\r\n    errorCode = annotation.errorCode();\r\n  }\r\n\r\n  @Override\r\n  public boolean isValid(String value, ConstraintValidatorContext context) {\r\n    boolean isValid = !Strings.isBlank(value);\r\n\r\n    if (isValid) {\r\n      return true;\r\n    }\r\n    context.disableDefaultConstraintViolation();\r\n    var serializedJSON = getSerializedObject(getMessage(), getErrorCode()); //marshaling \r\n    context.buildConstraintViolationWithTemplate(serializedJSON).addConstraintViolation();\r\n    return false;\r\n  }\r\n}\r\n```\r\n\r\nIn the line, `var serializedJSON = getSerializedObject(getMessage(), getErrorCode());` \r\n\r\nI&#39;m marshaling the message into a JSON payload with the `message` and `errorCode` as there seems no way of throwing the custom exception with the custom body. In the `exceptionHandler` I&#39;m able to unmarshal the JSON string so that&#39;s why I&#39;m marshaling and unmarshalling.\r\n\r\n\r\n```\r\n@ExceptionHandler\r\nResponseEntity&lt;Map&lt;String, Object&gt;&gt; handleMethodArgumentException(\r\n    MethodArgumentNotValidException exception) {\r\n  Map&lt;String, Object&gt; body = new LinkedHashMap&lt;&gt;(1, 1);\r\n\r\n  final List&lt;ErrorStructure&gt; errorStructures =\r\n      exception.getBindingResult().getFieldErrors().stream()\r\n          .map(error -&gt; deserialize(error.getDefaultMessage()))\r\n          .toList();\r\n  body.put(&quot;messages&quot;, errorStructures);\r\n  return ResponseEntity.status(BAD_REQUEST).contentType(APPLICATION_JSON).body(body);\r\n}\r\n```\r\n\r\nUtility class that I&#39;m using for marshaling and unmarshalling.\r\n\r\n```\r\npublic final class AnnotationProcessorToExceptionHandlerAdapter {\r\n\r\n  private static final ObjectMapper OBJECT_MAPPER = new ObjectMapper();\r\n\r\n  //NON-INSTANTIABLE UTILITY CLASS.\r\n  private AnnotationProcessorToExceptionHandlerAdapter() {\r\n    throw new AssertionError(&quot;No instance for you!&quot;);\r\n  }\r\n\r\n  @SneakyThrows\r\n  public static String getSerializedObject(final String errorMessage, final long errorCode) {\r\n    ErrorStructure errorStructure = new ErrorStructure(errorMessage, errorCode);\r\n    return OBJECT_MAPPER.writeValueAsString(errorStructure);\r\n  }\r\n\r\n  @SneakyThrows\r\n  public static ErrorStructure deserialize(final String serializedValue) {\r\n    return OBJECT_MAPPER.readValue(serializedValue, ErrorStructure.class);\r\n  }\r\n}\r\n```\r\n\r\n## 2. What Is the Problem?\r\n\r\nWhile the solution works perfectly fine. However, I&#39;m certain on the higher TPS (transaction per second) will cause performance issues as I am doing unnecessary marshaling and unmarshalling to work around.\r\n\r\n## 3. Alternatively, How I Don’t Want to Do?\r\n\r\nI don&#39;t want to include the `BindingResults` in hundreds of function parameters in the current codebase something like the below and check errors everywhere. \r\n```\r\nvoid onSomething(@RequestBody @Validated WithdrawMoney withdrawal, BindingResult errors) {\r\n  if (errors.hasErrors()) {\r\n           throw new ValidationException(errors);\r\n  }\r\n}\r\n```\r\n\r\n\r\n## 4. Recently Read Articles.\r\n\r\nI&#39;ve read the below answers:\r\n\r\nhttps://stackoverflow.com/questions/67440383/a-custom-annotation-can-throw-a-custom-exception-rather-than-methodargumentnotv\r\n\r\nhttps://stackoverflow.com/questions/72133950/how-to-make-custom-annotation-throw-an-error-instead-of-default-message\r\n\r\nhttps://stackoverflow.com/questions/62896233/how-to-throw-custom-exception-in-proper-way-when-using-javax-validation-valid\r\n\r\nhttps://stackoverflow.com/questions/51331679/spring-boot-how-to-return-my-own-validation-constraint-error-messages\r\n\r\nhttps://stackoverflow.com/questions/75568330/custom-validation-message-in-spring-boot-with-internationalization\r\n\r\n---\r\n\r\nAny help would be really appreciated!\r\n\r\nThanks.","title":"How to Throw a Custom Exception on Validation Failure Using a Custom Annotation in Spring Boot 3?","body":"<h2>1. What I’m Trying to Achieve?</h2>\n<p>I wanted to have a custom annotation that supports the <code>errorCode</code> along with the <code>errorMessage</code> parameter.</p>\n<pre><code>@NotBlank(message = &quot;Field X can't be Blank.&quot;, errorCode = 23442)\n</code></pre>\n<p>So, I create <code>NotBlank</code> annotation with the below schema.</p>\n<pre><code>@Documented\n@Retention(RetentionPolicy.RUNTIME)\n@Target({FIELD, PARAMETER})\n@Constraint(validatedBy = {NotBlankAnnotationProcessor.class})\npublic @interface NotBlank {\n  String message() default &quot;{commons.validation.constraints.NotBlank.message}&quot;;\n\n  @SuppressWarnings(&quot;unused&quot;)\n  Class&lt;?&gt;[] groups() default {};\n\n  @SuppressWarnings(&quot;unused&quot;)\n  Class&lt;? extends Payload&gt;[] payload() default {};\n\n  long errorCode() default 400;\n}\n</code></pre>\n<p>and it has an annotation processor for validation <code>NotBlankAnnotationProcessor</code></p>\n<pre><code>@Getter\npublic class NotBlankAnnotationProcessor implements ConstraintValidator&lt;NotBlank, String&gt; {\n  private String message;\n  private long errorCode;\n\n  @Override\n  public void initialize(NotBlank annotation) {\n    message = annotation.message();\n    errorCode = annotation.errorCode();\n  }\n\n  @Override\n  public boolean isValid(String value, ConstraintValidatorContext context) {\n    boolean isValid = !Strings.isBlank(value);\n\n    if (isValid) {\n      return true;\n    }\n    context.disableDefaultConstraintViolation();\n    var serializedJSON = getSerializedObject(getMessage(), getErrorCode()); //marshaling \n    context.buildConstraintViolationWithTemplate(serializedJSON).addConstraintViolation();\n    return false;\n  }\n}\n</code></pre>\n<p>In the line, <code>var serializedJSON = getSerializedObject(getMessage(), getErrorCode());</code></p>\n<p>I'm marshaling the message into a JSON payload with the <code>message</code> and <code>errorCode</code> as there seems no way of throwing the custom exception with the custom body. In the <code>exceptionHandler</code> I'm able to unmarshal the JSON string so that's why I'm marshaling and unmarshalling.</p>\n<pre><code>@ExceptionHandler\nResponseEntity&lt;Map&lt;String, Object&gt;&gt; handleMethodArgumentException(\n    MethodArgumentNotValidException exception) {\n  Map&lt;String, Object&gt; body = new LinkedHashMap&lt;&gt;(1, 1);\n\n  final List&lt;ErrorStructure&gt; errorStructures =\n      exception.getBindingResult().getFieldErrors().stream()\n          .map(error -&gt; deserialize(error.getDefaultMessage()))\n          .toList();\n  body.put(&quot;messages&quot;, errorStructures);\n  return ResponseEntity.status(BAD_REQUEST).contentType(APPLICATION_JSON).body(body);\n}\n</code></pre>\n<p>Utility class that I'm using for marshaling and unmarshalling.</p>\n<pre><code>public final class AnnotationProcessorToExceptionHandlerAdapter {\n\n  private static final ObjectMapper OBJECT_MAPPER = new ObjectMapper();\n\n  //NON-INSTANTIABLE UTILITY CLASS.\n  private AnnotationProcessorToExceptionHandlerAdapter() {\n    throw new AssertionError(&quot;No instance for you!&quot;);\n  }\n\n  @SneakyThrows\n  public static String getSerializedObject(final String errorMessage, final long errorCode) {\n    ErrorStructure errorStructure = new ErrorStructure(errorMessage, errorCode);\n    return OBJECT_MAPPER.writeValueAsString(errorStructure);\n  }\n\n  @SneakyThrows\n  public static ErrorStructure deserialize(final String serializedValue) {\n    return OBJECT_MAPPER.readValue(serializedValue, ErrorStructure.class);\n  }\n}\n</code></pre>\n<h2>2. What Is the Problem?</h2>\n<p>While the solution works perfectly fine. However, I'm certain on the higher TPS (transaction per second) will cause performance issues as I am doing unnecessary marshaling and unmarshalling to work around.</p>\n<h2>3. Alternatively, How I Don’t Want to Do?</h2>\n<p>I don't want to include the <code>BindingResults</code> in hundreds of function parameters in the current codebase something like the below and check errors everywhere.</p>\n<pre><code>void onSomething(@RequestBody @Validated WithdrawMoney withdrawal, BindingResult errors) {\n  if (errors.hasErrors()) {\n           throw new ValidationException(errors);\n  }\n}\n</code></pre>\n<h2>4. Recently Read Articles.</h2>\n<p>I've read the below answers:</p>\n<p><a href=\"https://stackoverflow.com/questions/67440383/a-custom-annotation-can-throw-a-custom-exception-rather-than-methodargumentnotv\">A custom annotation can throw a custom exception, rather than MethodArgumentNotValidException?</a></p>\n<p><a href=\"https://stackoverflow.com/questions/72133950/how-to-make-custom-annotation-throw-an-error-instead-of-default-message\">How to make custom annotation throw an error instead of default message</a></p>\n<p><a href=\"https://stackoverflow.com/questions/62896233/how-to-throw-custom-exception-in-proper-way-when-using-javax-validation-valid\">How to throw custom exception in proper way when using @javax.validation.Valid?</a></p>\n<p><a href=\"https://stackoverflow.com/questions/51331679/spring-boot-how-to-return-my-own-validation-constraint-error-messages\">Spring Boot how to return my own validation constraint error messages</a></p>\n<p><a href=\"https://stackoverflow.com/questions/75568330/custom-validation-message-in-spring-boot-with-internationalization\">Custom Validation Message in Spring Boot with internationalization?</a></p>\n<hr />\n<p>Any help would be really appreciated!</p>\n<p>Thanks.</p>\n"},{"tags":["java","aws-lambda","java-native-interface","alexa-skills-kit","quarkus"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1577710899,"post_id":59531126,"comment_id":105232078,"body_markdown":"I am not sure that this is a quarkus-problem. I would assume that it is a graalvm-problem. [The `LIMITATIONS`-page](https://github.com/oracle/graal/blob/master/substratevm/LIMITATIONS.md#java-native-interface--jni) of graalvm lists JNI as &quot;*mostly supported*&quot; and also references the [configuration page for JNI on `substrateVM`](https://github.com/oracle/graal/blob/master/substratevm/JNI.md). Maybe you want to take a look.","body":"I am not sure that this is a quarkus-problem. I would assume that it is a graalvm-problem. <a href=\"https://github.com/oracle/graal/blob/master/substratevm/LIMITATIONS.md#java-native-interface--jni\" rel=\"nofollow noreferrer\">The <code>LIMITATIONS</code>-page</a> of graalvm lists JNI as &quot;<i>mostly supported</i>&quot; and also references the <a href=\"https://github.com/oracle/graal/blob/master/substratevm/JNI.md\" rel=\"nofollow noreferrer\">configuration page for JNI on <code>substrateVM</code></a>. Maybe you want to take a look."},{"owner":{"account_id":4053051,"reputation":1158,"user_id":3331931,"accept_rate":43,"display_name":"fcracker79"},"score":0,"creation_date":1577715900,"post_id":59531126,"comment_id":105234276,"body_markdown":"Thanks @Turing85, I will have a look at it.\nP.S. Having given a look, it seems that threads are fully supported, but: `We have nearly full support for java.lang.Thread. Only deprecated methods, such as Thread.stop(), are not supported.`. So now I have to understand what references deprecated thread methods. I moved further somehow. Thanks!","body":"Thanks @Turing85, I will have a look at it. P.S. Having given a look, it seems that threads are fully supported, but: <code>We have nearly full support for java.lang.Thread. Only deprecated methods, such as Thread.stop(), are not supported.</code>. So now I have to understand what references deprecated thread methods. I moved further somehow. Thanks!"},{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1577954288,"post_id":59531126,"comment_id":105288648,"body_markdown":"Are you using the Quarkus lambda extension?","body":"Are you using the Quarkus lambda extension?"},{"owner":{"account_id":4053051,"reputation":1158,"user_id":3331931,"accept_rate":43,"display_name":"fcracker79"},"score":0,"creation_date":1578036673,"post_id":59531126,"comment_id":105316371,"body_markdown":"@geoand thanks, yes I am using that. It does not happen with a blank project. Also, if I add the same dependencies on a blank project, it does not happen. Now I am proceeding by gradually removing parts of my code to see what causes the issue.\nThat is very time consuming, so any advice would greatly help.","body":"@geoand thanks, yes I am using that. It does not happen with a blank project. Also, if I add the same dependencies on a blank project, it does not happen. Now I am proceeding by gradually removing parts of my code to see what causes the issue. That is very time consuming, so any advice would greatly help."}],"answers":[{"tags":[],"owner":{"account_id":4053051,"reputation":1158,"user_id":3331931,"accept_rate":43,"display_name":"fcracker79"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1578130680,"creation_date":1578044991,"answer_id":59576326,"question_id":59531126,"body_markdown":"Finally I have found the cause of my issue.\r\n\r\nIn the non-working version of my code, I use a factory of `com.amazon.ask.AlexaSkill` that is somehow injected in the entry point, as follows:\r\n\r\n```\r\npackage io.mirko.lambda;\r\n\r\nimport com.amazon.ask.AlexaSkill;\r\nimport com.amazon.ask.Skills;\r\nimport com.amazon.ask.dispatcher.request.handler.HandlerInput;\r\nimport com.amazon.ask.dispatcher.request.handler.RequestHandler;\r\nimport com.amazon.ask.model.RequestEnvelope;\r\nimport com.amazon.ask.model.ResponseEnvelope;\r\nimport com.amazon.ask.request.interceptor.GenericRequestInterceptor;\r\nimport io.mirko.lambda.handlers.*;\r\n\r\nimport javax.enterprise.context.ApplicationScoped;\r\nimport javax.enterprise.inject.Instance;\r\nimport javax.enterprise.inject.Produces;\r\nimport javax.inject.Inject;\r\nimport javax.inject.Named;\r\nimport java.util.*;\r\nimport java.util.stream.StreamSupport;\r\n\r\n\r\npublic class SkillFactory {\r\n    @Inject\r\n    Instance&lt;RequestHandler&gt; handlers;\r\n\r\n    @Produces\r\n    @ApplicationScoped\r\n    @Named\r\n    public AlexaSkill&lt;RequestEnvelope, ResponseEnvelope&gt; createSkill() {\r\n        return Skills.standard()\r\n                .addRequestHandlers(handlers.stream().toArray(RequestHandler[]::new))\r\n                .addRequestInterceptor(new GenericRequestInterceptor&lt;HandlerInput&gt;() {\r\n                    @Override\r\n                    public void process(HandlerInput handlerInput) {\r\n                        System.out.format(&quot;Processing %s\\n&quot;, handlerInput.getRequest());\r\n                    }\r\n                })\r\n                // Add your skill id below\r\n                //.withSkillId(&quot;&quot;)\r\n                .build();\r\n    }\r\n}\r\n\r\n...\r\n\r\npublic class SwearStreamLambda extends SkillStreamHandler {\r\n    @Named(&quot;swearStream&quot;)\r\n        public SwearStreamLambda() {\r\n            //noinspection unchecked\r\n            super((AlexaSkill&lt;RequestEnvelope, ResponseEnvelope&gt;)\r\n                getBean(new ParameterizedTypeImpl(AlexaSkill.class, RequestEnvelope.class, ResponseEnvelope.class)));\r\n\r\n```\r\n\r\nBy removing the `SkillFactory` class and moving its logic inside `SwearStreamLambda` class the compilation went well.\r\n\r\nSome notes:\r\n\r\n1. The issue is not related to CDI, as it is heavily used throughout the project\r\n2. The issue is not related to `@Produces` annotation, which is present in other parts of the project\r\n3. The issue is not related to `javax.enterprise.inject.Instance`, as its removal does not solve the issue\r\n\r\nAll in all, I could not find the root cause of the problem, but I consider my issue *solved*.\r\n\r\nP.S. The original problem is eradicated by building with the following:\r\n\r\n`mvn clean install -Pnative -Dnative-image.docker-build=true -Dquarkus.native.enable-jni=true`\r\n\r\nPlease see `https://github.com/quarkusio/quarkus/issues/6395#issuecomment-570755587`.\r\n\r\nThis does not solve all the problems, as Quarkus reflection has to be configured, but it solves the specific issue.","title":"Native Quarkus with AWS lambda does not build","body":"<p>Finally I have found the cause of my issue.</p>\n\n<p>In the non-working version of my code, I use a factory of <code>com.amazon.ask.AlexaSkill</code> that is somehow injected in the entry point, as follows:</p>\n\n<pre><code>package io.mirko.lambda;\n\nimport com.amazon.ask.AlexaSkill;\nimport com.amazon.ask.Skills;\nimport com.amazon.ask.dispatcher.request.handler.HandlerInput;\nimport com.amazon.ask.dispatcher.request.handler.RequestHandler;\nimport com.amazon.ask.model.RequestEnvelope;\nimport com.amazon.ask.model.ResponseEnvelope;\nimport com.amazon.ask.request.interceptor.GenericRequestInterceptor;\nimport io.mirko.lambda.handlers.*;\n\nimport javax.enterprise.context.ApplicationScoped;\nimport javax.enterprise.inject.Instance;\nimport javax.enterprise.inject.Produces;\nimport javax.inject.Inject;\nimport javax.inject.Named;\nimport java.util.*;\nimport java.util.stream.StreamSupport;\n\n\npublic class SkillFactory {\n    @Inject\n    Instance&lt;RequestHandler&gt; handlers;\n\n    @Produces\n    @ApplicationScoped\n    @Named\n    public AlexaSkill&lt;RequestEnvelope, ResponseEnvelope&gt; createSkill() {\n        return Skills.standard()\n                .addRequestHandlers(handlers.stream().toArray(RequestHandler[]::new))\n                .addRequestInterceptor(new GenericRequestInterceptor&lt;HandlerInput&gt;() {\n                    @Override\n                    public void process(HandlerInput handlerInput) {\n                        System.out.format(\"Processing %s\\n\", handlerInput.getRequest());\n                    }\n                })\n                // Add your skill id below\n                //.withSkillId(\"\")\n                .build();\n    }\n}\n\n...\n\npublic class SwearStreamLambda extends SkillStreamHandler {\n    @Named(\"swearStream\")\n        public SwearStreamLambda() {\n            //noinspection unchecked\n            super((AlexaSkill&lt;RequestEnvelope, ResponseEnvelope&gt;)\n                getBean(new ParameterizedTypeImpl(AlexaSkill.class, RequestEnvelope.class, ResponseEnvelope.class)));\n\n</code></pre>\n\n<p>By removing the <code>SkillFactory</code> class and moving its logic inside <code>SwearStreamLambda</code> class the compilation went well.</p>\n\n<p>Some notes:</p>\n\n<ol>\n<li>The issue is not related to CDI, as it is heavily used throughout the project</li>\n<li>The issue is not related to <code>@Produces</code> annotation, which is present in other parts of the project</li>\n<li>The issue is not related to <code>javax.enterprise.inject.Instance</code>, as its removal does not solve the issue</li>\n</ol>\n\n<p>All in all, I could not find the root cause of the problem, but I consider my issue <em>solved</em>.</p>\n\n<p>P.S. The original problem is eradicated by building with the following:</p>\n\n<p><code>mvn clean install -Pnative -Dnative-image.docker-build=true -Dquarkus.native.enable-jni=true</code></p>\n\n<p>Please see <code>https://github.com/quarkusio/quarkus/issues/6395#issuecomment-570755587</code>.</p>\n\n<p>This does not solve all the problems, as Quarkus reflection has to be configured, but it solves the specific issue.</p>\n"},{"tags":[],"owner":{"account_id":3904164,"reputation":2111,"user_id":3276902,"accept_rate":83,"display_name":"timguy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679915695,"creation_date":1663689341,"answer_id":73789500,"question_id":59531126,"body_markdown":"Just some update **for 2022**\r\n - There is an extension in quarkus which do some configuration already for transitive dependencies: https://github.com/quarkiverse/quarkus-amazon-alexa\r\n - You need GraalVM and docker installed\r\n - I just went to:\r\nhttps://code.quarkus.io/?b=GRADLE&amp;e=io.quarkiverse.amazonalexa%3Aquarkus-amazon-alexa&amp;extension-search=origin:platform%20alexa\r\n - download the zip\r\n - overwrite all of my existing project/skill.\r\n - small further adaptions to my existing skill as described here: https://quarkus.io/guides/writing-native-applications-tips\r\n - `gradlew build -x test -Dquarkus.package.type=native \r\n-Dquarkus.native.container-build=true`\r\n - upload functions.zip to AWS Lambda\r\n\r\n**Update 2023**\r\n\r\nI used quarkus to get simplified GraalVM and native build support to speed up start lambda start times.\r\nNowadays I would first try [SnapStart][1] which is jsut a configuration in your lambda.\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/lambda/latest/dg/snapstart.html","title":"Native Quarkus with AWS lambda does not build","body":"<p>Just some update <strong>for 2022</strong></p>\n<ul>\n<li>There is an extension in quarkus which do some configuration already for transitive dependencies: <a href=\"https://github.com/quarkiverse/quarkus-amazon-alexa\" rel=\"nofollow noreferrer\">https://github.com/quarkiverse/quarkus-amazon-alexa</a></li>\n<li>You need GraalVM and docker installed</li>\n<li>I just went to:\n<a href=\"https://code.quarkus.io/?b=GRADLE&amp;e=io.quarkiverse.amazonalexa%3Aquarkus-amazon-alexa&amp;extension-search=origin:platform%20alexa\" rel=\"nofollow noreferrer\">https://code.quarkus.io/?b=GRADLE&amp;e=io.quarkiverse.amazonalexa%3Aquarkus-amazon-alexa&amp;extension-search=origin:platform%20alexa</a></li>\n<li>download the zip</li>\n<li>overwrite all of my existing project/skill.</li>\n<li>small further adaptions to my existing skill as described here: <a href=\"https://quarkus.io/guides/writing-native-applications-tips\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/writing-native-applications-tips</a></li>\n<li><code>gradlew build -x test -Dquarkus.package.type=native  -Dquarkus.native.container-build=true</code></li>\n<li>upload functions.zip to AWS Lambda</li>\n</ul>\n<p><strong>Update 2023</strong></p>\n<p>I used quarkus to get simplified GraalVM and native build support to speed up start lambda start times.\nNowadays I would first try <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/snapstart.html\" rel=\"nofollow noreferrer\">SnapStart</a> which is jsut a configuration in your lambda.</p>\n"}],"owner":{"account_id":4053051,"reputation":1158,"user_id":3331931,"accept_rate":43,"display_name":"fcracker79"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":955,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":59576326,"answer_count":2,"score":2,"last_activity_date":1679915695,"creation_date":1577710134,"question_id":59531126,"body_markdown":"I am trying to use Quarkus native to build my AWS Lambda.\r\n\r\nMy setup is:\r\n\r\n* GraalVM 19.3.0\r\n* Java 11\r\n* Ubuntu \r\n\r\nWhen I run \r\n\r\n```bash\r\ndocker run -v /home/mypc/dev/java/quarkus/alexa_swear/target/&lt;my project&gt;-1.0-SNAPSHOT-native-image-source-jar:/project:z --user 1000:1000 --rm quay.io/quarkus/ubi-quarkus-native-image:19.2.1 -J-Djava.util.logging.manager=org.jboss.logmanager.LogManager --initialize-at-build-time= -H:InitialCollectionPolicy=com.oracle.svm.core.genscavenge.CollectionPolicy\\$BySpaceAndTime -jar &lt;my project&gt;-1.0-SNAPSHOT-runner.jar -J-Djava.util.concurrent.ForkJoinPool.common.parallelism=1 -H:FallbackThreshold=0 -H:+ReportExceptionStackTraces -H:+AddAllCharsets -H:EnableURLProtocols=http -H:-JNI --no-server -H:-UseServiceLoaderFeature -H:+StackTrace &lt;my project&gt;-1.0-SNAPSHOT-runner\r\n```\r\nI get the following error:\r\n```\r\n[alexa_swear-1.0-SNAPSHOT-runner:23]   (typeflow):  52,070.99 ms\r\n[alexa_swear-1.0-SNAPSHOT-runner:23]    (objects):  25,961.57 ms\r\n[alexa_swear-1.0-SNAPSHOT-runner:23]   (features):     803.41 ms\r\n[alexa_swear-1.0-SNAPSHOT-runner:23]     analysis:  81,015.48 ms\r\n[alexa_swear-1.0-SNAPSHOT-runner:23]     (clinit):   1,277.52 ms\r\n[alexa_swear-1.0-SNAPSHOT-runner:23]     universe:   4,416.32 ms\r\nError: Unsupported features in 5 methods\r\nDetailed message:\r\nCall path from entry point to java.lang.Runtime.traceInstructions(boolean): \r\n\tat java.lang.Runtime.traceInstructions(Runtime.java)\r\n\tat com.oracle.svm.reflect.Runtime_traceInstructions_91eaacf084b9d7e2af6dcc0028ee87fea9223b51_77.invoke(Unknown Source)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat sun.net.www.protocol.http.NTLMAuthenticationProxy.isTrustedSite(NTLMAuthenticationProxy.java:102)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getServerAuthentication(HttpURLConnection.java:2481)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1743)\r\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1498)\r\n\tat io.quarkus.amazon.lambda.runtime.AmazonLambdaRecorder$2.run(AmazonLambdaRecorder.java:171)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\tat com.oracle.svm.core.thread.JavaThreads.threadStartRoutine(JavaThreads.java:460)\r\n\tat com.oracle.svm.core.posix.thread.PosixJavaThreads.pthreadStartRoutine(PosixJavaThreads.java:193)\r\n\tat com.oracle.svm.core.code.IsolateEnterStub.PosixJavaThreads_pthreadStartRoutine_e1f4a8c0039f8337338252cd8734f63a79b5e3df(generated:0)\t... 6 more\r\nError: Image build request failed with exit status 1\r\n```\r\nThe above error is truncated: the same call stack points to different unsupported methods, such as `java.lang.Thread.stop`.\r\n\r\nMy basic understanding is that`io.quarkus.amazon.lambda.runtime.AmazonLambdaRecorder$2.run(AmazonLambdaRecorder.java` is referencing to some unsupported methods, such as `java.lang.Thread.resume()`. \r\nI have also tried with Quarkus 19.2.1 unsuccessfully.\r\n\r\nThe above command was executed by `mvn clean install -Pnative -Dnative-image.docker-build=true -e`.\r\n\r\n\r\n  [1]: https://github.com/oracle/graal/blob/b30f73aa905c63fb81c13e3c8fac7deeb5b523fe/substratevm/src/com.oracle.svm.core/src/com/oracle/svm/core/amd64/AMD64CPUFeatureAccess.java#L179","title":"Native Quarkus with AWS lambda does not build","body":"<p>I am trying to use Quarkus native to build my AWS Lambda.</p>\n\n<p>My setup is:</p>\n\n<ul>\n<li>GraalVM 19.3.0</li>\n<li>Java 11</li>\n<li>Ubuntu </li>\n</ul>\n\n<p>When I run </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>docker run -v /home/mypc/dev/java/quarkus/alexa_swear/target/&lt;my project&gt;-1.0-SNAPSHOT-native-image-source-jar:/project:z --user 1000:1000 --rm quay.io/quarkus/ubi-quarkus-native-image:19.2.1 -J-Djava.util.logging.manager=org.jboss.logmanager.LogManager --initialize-at-build-time= -H:InitialCollectionPolicy=com.oracle.svm.core.genscavenge.CollectionPolicy\\$BySpaceAndTime -jar &lt;my project&gt;-1.0-SNAPSHOT-runner.jar -J-Djava.util.concurrent.ForkJoinPool.common.parallelism=1 -H:FallbackThreshold=0 -H:+ReportExceptionStackTraces -H:+AddAllCharsets -H:EnableURLProtocols=http -H:-JNI --no-server -H:-UseServiceLoaderFeature -H:+StackTrace &lt;my project&gt;-1.0-SNAPSHOT-runner\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>[alexa_swear-1.0-SNAPSHOT-runner:23]   (typeflow):  52,070.99 ms\n[alexa_swear-1.0-SNAPSHOT-runner:23]    (objects):  25,961.57 ms\n[alexa_swear-1.0-SNAPSHOT-runner:23]   (features):     803.41 ms\n[alexa_swear-1.0-SNAPSHOT-runner:23]     analysis:  81,015.48 ms\n[alexa_swear-1.0-SNAPSHOT-runner:23]     (clinit):   1,277.52 ms\n[alexa_swear-1.0-SNAPSHOT-runner:23]     universe:   4,416.32 ms\nError: Unsupported features in 5 methods\nDetailed message:\nCall path from entry point to java.lang.Runtime.traceInstructions(boolean): \n    at java.lang.Runtime.traceInstructions(Runtime.java)\n    at com.oracle.svm.reflect.Runtime_traceInstructions_91eaacf084b9d7e2af6dcc0028ee87fea9223b51_77.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at sun.net.www.protocol.http.NTLMAuthenticationProxy.isTrustedSite(NTLMAuthenticationProxy.java:102)\n    at sun.net.www.protocol.http.HttpURLConnection.getServerAuthentication(HttpURLConnection.java:2481)\n    at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1743)\n    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1498)\n    at io.quarkus.amazon.lambda.runtime.AmazonLambdaRecorder$2.run(AmazonLambdaRecorder.java:171)\n    at java.lang.Thread.run(Thread.java:748)\n    at com.oracle.svm.core.thread.JavaThreads.threadStartRoutine(JavaThreads.java:460)\n    at com.oracle.svm.core.posix.thread.PosixJavaThreads.pthreadStartRoutine(PosixJavaThreads.java:193)\n    at com.oracle.svm.core.code.IsolateEnterStub.PosixJavaThreads_pthreadStartRoutine_e1f4a8c0039f8337338252cd8734f63a79b5e3df(generated:0) ... 6 more\nError: Image build request failed with exit status 1\n</code></pre>\n\n<p>The above error is truncated: the same call stack points to different unsupported methods, such as <code>java.lang.Thread.stop</code>.</p>\n\n<p>My basic understanding is that<code>io.quarkus.amazon.lambda.runtime.AmazonLambdaRecorder$2.run(AmazonLambdaRecorder.java</code> is referencing to some unsupported methods, such as <code>java.lang.Thread.resume()</code>. \nI have also tried with Quarkus 19.2.1 unsuccessfully.</p>\n\n<p>The above command was executed by <code>mvn clean install -Pnative -Dnative-image.docker-build=true -e</code>.</p>\n"},{"tags":["java","azure","docker","nginx","proguard"],"comments":[{"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"score":0,"creation_date":1679652772,"post_id":75831391,"comment_id":133763233,"body_markdown":"looks like network problem, check for network configuration of docker and azure side.","body":"looks like network problem, check for network configuration of docker and azure side."}],"answers":[{"tags":[],"owner":{"account_id":26331226,"reputation":3286,"user_id":19991670,"display_name":"Pravallika KV"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679915544,"creation_date":1679915544,"answer_id":75855064,"question_id":75831391,"body_markdown":"&gt;I&#39;m having an issue where my obfuscated JAR file works fine on my local machine, but when I deploy it using Azure Pipeline, it fails to run, getting 502 bad gateway\r\n\r\nCheck if the below troubleshooting steps help you to fix the error 502 bad gateway:\r\n\r\n1.  Make sure your application is up and running.\r\n2.  Make sure that the port in which your application is running is exposed so that you can access your application.\r\n3.  Also, make sure to include obfuscated JAR while creating docker image.\r\n\r\nIf you are running your application on any other port, you can configure the port as shown below:\r\n\r\n![enter image description here](https://i.stack.imgur.com/fV7Og.png)\r\n\r\n*I have reproduced your requirement in my environment, and I could access the endpoints of my application as shown below:*  \r\n\r\n![enter image description here](https://i.stack.imgur.com/8Gqf4.png)\r\n","title":"Spring boot proguard obfuscated JAR works locally but not on Azure Pipeline","body":"<blockquote>\n<p>I'm having an issue where my obfuscated JAR file works fine on my local machine, but when I deploy it using Azure Pipeline, it fails to run, getting 502 bad gateway</p>\n</blockquote>\n<p>Check if the below troubleshooting steps help you to fix the error 502 bad gateway:</p>\n<ol>\n<li>Make sure your application is up and running.</li>\n<li>Make sure that the port in which your application is running is exposed so that you can access your application.</li>\n<li>Also, make sure to include obfuscated JAR while creating docker image.</li>\n</ol>\n<p>If you are running your application on any other port, you can configure the port as shown below:</p>\n<p><img src=\"https://i.stack.imgur.com/fV7Og.png\" alt=\"enter image description here\" /></p>\n<p><em>I have reproduced your requirement in my environment, and I could access the endpoints of my application as shown below:</em></p>\n<p><img src=\"https://i.stack.imgur.com/8Gqf4.png\" alt=\"enter image description here\" /></p>\n"}],"owner":{"account_id":21430481,"reputation":1,"user_id":15786996,"display_name":"Shahzeb Iqbal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679915544,"creation_date":1679646296,"question_id":75831391,"body_markdown":"I&#39;m having an issue where my obfuscated JAR file works fine on my local machine, but when I deploy it using Azure Pipeline, it fails to run, getting 502 bad gateway. I&#39;m using Maven to build and package my project, and then pushing it to a Docker registry.\r\n\r\nhere is my pipeline details: \r\n```\r\n- task: Maven@3\r\n            inputs:\r\n              mavenPomFile: &#39;entity/pom.xml&#39;\r\n              mavenOptions: &#39;-Xmx3072m&#39;\r\n              javaHomeOption: &#39;JDKVersion&#39;\r\n              jdkVersionOption: &#39;1.11&#39;\r\n              jdkArchitectureOption: &#39;x64&#39;\r\n              publishJUnitResults: true\r\n              testResultsFiles: &#39;**/surefire-reports/TEST-*.xml&#39;\r\n              goals: &#39;install&#39;\r\n\r\n          - task: Maven@3\r\n            inputs:\r\n              mavenPomFile: &#39;common/pom.xml&#39;\r\n              mavenOptions: &#39;-Xmx3072m&#39;\r\n              javaHomeOption: &#39;JDKVersion&#39;\r\n              jdkVersionOption: &#39;1.11&#39;\r\n              jdkArchitectureOption: &#39;x64&#39;\r\n              publishJUnitResults: true\r\n              testResultsFiles: &#39;**/surefire-reports/TEST-*.xml&#39;\r\n              goals: &#39;install&#39;\r\n\r\n          - task: Maven@3\r\n            inputs:\r\n              mavenPomFile: &#39;security/pom.xml&#39;\r\n              mavenOptions: &#39;-Xmx3072m&#39;\r\n              javaHomeOption: &#39;JDKVersion&#39;\r\n              jdkVersionOption: &#39;1.11&#39;\r\n              jdkArchitectureOption: &#39;x64&#39;\r\n              publishJUnitResults: true\r\n              testResultsFiles: &#39;**/surefire-reports/TEST-*.xml&#39;\r\n              goals: &#39;install&#39;\r\n\r\n          - task: Maven@3\r\n            inputs:\r\n              mavenPomFile: &#39;search/pom.xml&#39;\r\n              mavenOptions: &#39;-Xmx3072m&#39;\r\n              javaHomeOption: &#39;JDKVersion&#39;\r\n              jdkVersionOption: &#39;1.11&#39;\r\n              jdkArchitectureOption: &#39;x64&#39;\r\n              publishJUnitResults: true\r\n              testResultsFiles: &#39;**/surefire-reports/TEST-*.xml&#39;\r\n              goals: &#39;install&#39;\r\n\r\n\r\n          - task: Maven@3\r\n            inputs:\r\n              mavenPomFile: &#39;backend/pom.xml&#39;\r\n              mavenOptions: &#39;-Xmx3072m&#39;\r\n              javaHomeOption: &#39;JDKVersion&#39;\r\n              jdkVersionOption: &#39;1.11&#39;\r\n              jdkArchitectureOption: &#39;x64&#39;\r\n              publishJUnitResults: true\r\n              testResultsFiles: &#39;**/surefire-reports/TEST-*.xml&#39;\r\n              goals: &#39;package&#39;\r\n\r\n          - task: Docker@2\r\n            inputs:\r\n              containerRegistry: &#39;registry&#39;\r\n              repository: &#39;my_repo&#39;\r\n              command: &#39;buildAndPush&#39;\r\n              Dockerfile: &#39;**/Dockerfile&#39;\r\n              tags: &#39;$(Build.BuildId).development&#39;\r\n\r\n          - task: PublishBuildArtifacts@1\r\n            inputs:\r\n              PathtoPublish: &#39;$(Build.ArtifactStagingDirectory)&#39;\r\n              ArtifactName: &#39;drop&#39;\r\n              publishLocation: &#39;Container&#39;\r\n```\r\n\r\nhere is my pom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.5.2&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.timestreamgroup.reconstream&lt;/groupId&gt;\r\n    &lt;artifactId&gt;recon-ui-service&lt;/artifactId&gt;\r\n    &lt;name&gt;recon-ui-service&lt;/name&gt;\r\n    &lt;version&gt;0.0.1&lt;/version&gt;\r\n    &lt;description&gt;recon ui service&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;version.infinispan&gt;12.1.7.Final&lt;/version.infinispan&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.timestreamgroup.reconstream&lt;/groupId&gt;\r\n            &lt;artifactId&gt;recon-common&lt;/artifactId&gt;\r\n            &lt;version&gt;0.0.1&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-cloud-stream&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n               &lt;!-- &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;--&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.cronutils&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cron-utils&lt;/artifactId&gt;\r\n            &lt;version&gt;9.1.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.timestreamgroup.reconstream&lt;/groupId&gt;\r\n            &lt;artifactId&gt;recon-security&lt;/artifactId&gt;\r\n            &lt;version&gt;${project.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.timestreamgroup.reconstream&lt;/groupId&gt;\r\n            &lt;artifactId&gt;recon-api-search&lt;/artifactId&gt;\r\n            &lt;version&gt;0.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n            &lt;version&gt;1.6.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;no.api.freemarker&lt;/groupId&gt;\r\n            &lt;artifactId&gt;freemarker-java8&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.everit.json&lt;/groupId&gt;\r\n            &lt;artifactId&gt;org.everit.json.schema&lt;/artifactId&gt;\r\n            &lt;version&gt;1.5.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n            &lt;version&gt;8.4.1.jre8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.infinispan&lt;/groupId&gt;\r\n            &lt;artifactId&gt;infinispan-spring-boot-starter-embedded&lt;/artifactId&gt;\r\n            &lt;version&gt;${version.infinispan}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springfox-oas&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.hateoas&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-hateoas&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--     &lt;dependency&gt;\r\n                     &lt;groupId&gt;com.timestreamgroup.reconstream&lt;/groupId&gt;\r\n                     &lt;artifactId&gt;recon-parent&lt;/artifactId&gt;\r\n                     &lt;version&gt;0.0.1&lt;/version&gt;\r\n                     &lt;exclusions&gt;\r\n                         &lt;exclusion&gt;\r\n                             &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                             &lt;artifactId&gt;spring-cloud-stream&lt;/artifactId&gt;\r\n                         &lt;/exclusion&gt;\r\n                         &lt;exclusion&gt;\r\n                             &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\r\n                             &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\r\n                         &lt;/exclusion&gt;\r\n                     &lt;/exclusions&gt;\r\n                 &lt;/dependency&gt;\r\n                 --&gt;\r\n\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;forceJavacCompilerUse&gt;true&lt;/forceJavacCompilerUse&gt;\r\n                    &lt;annotationProcessorPaths&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n                            &lt;version&gt;1.4.1.Final&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                            &lt;version&gt;1.18.20&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\r\n                            &lt;version&gt;0.2.0&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                    &lt;/annotationProcessorPaths&gt;\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;compilerArg&gt;\r\n                            -Amapstruct.defaultComponentModel=spring\r\n                        &lt;/compilerArg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                    &lt;!--&lt;source&gt;11&lt;/source&gt;\r\n                    &lt;target&gt;11&lt;/target&gt;--&gt;\r\n                &lt;/configuration&gt;\r\n\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n                &lt;artifactId&gt;springdoc-openapi-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.2&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;integration-test&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;generate&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;com.github.wvengen&lt;/groupId&gt;\r\n                &lt;artifactId&gt;proguard-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.6.0&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;proguard&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;proguardVersion&gt;7.0.0&lt;/proguardVersion&gt;\r\n                    &lt;injar&gt;${project.build.finalName}.jar&lt;/injar&gt;\r\n                    &lt;outjar&gt;${project.build.finalName}.jar&lt;/outjar&gt;\r\n                    &lt;proguardInclude&gt;${project.basedir}/proguard.cfg&lt;/proguardInclude&gt;\r\n                    &lt;libs&gt;\r\n                        &lt;lib&gt;${java.home}&lt;/lib&gt;\r\n                    &lt;/libs&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;com.guardsquare&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;proguard-base&lt;/artifactId&gt;\r\n                        &lt;version&gt;7.0.0&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;repackage&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;mainClass&gt;com.timestreamgroup.reconstream.ui.service.ReconUiServiceApplication&lt;/mainClass&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;pre-integration-test&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;start&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;post-integration-test&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;stop&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.8&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;run&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;target&gt;\r\n                                &lt;delete file=&quot;${project.build.directory}/${project.build.finalName}_proguard_base.jar&quot;/&gt;\r\n                            &lt;/target&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n**App was started but endpoints are not accessible**\r\n\r\nHere&#39;s what I&#39;ve tried so far:\r\n\r\n- Checked the output of the Maven &#39;package&#39; goal to make sure that the obfuscated JAR file is being built correctly.\r\n- Made sure that the obfuscated JAR file is being included in the Docker image.\r\n- Checked if the Docker image is being deployed correctly to the target environment.\r\n- Checked the logs of the deployed application for any error messages or warnings.\r\n\r\nNone of these steps have helped me to solve the issue.\r\n\r\nAny ideas on what could be causing this issue or what other troubleshooting steps I could try?\r\n\r\nThanks in advance for your help!","title":"Spring boot proguard obfuscated JAR works locally but not on Azure Pipeline","body":"<p>I'm having an issue where my obfuscated JAR file works fine on my local machine, but when I deploy it using Azure Pipeline, it fails to run, getting 502 bad gateway. I'm using Maven to build and package my project, and then pushing it to a Docker registry.</p>\n<p>here is my pipeline details:</p>\n<pre><code>- task: Maven@3\n            inputs:\n              mavenPomFile: 'entity/pom.xml'\n              mavenOptions: '-Xmx3072m'\n              javaHomeOption: 'JDKVersion'\n              jdkVersionOption: '1.11'\n              jdkArchitectureOption: 'x64'\n              publishJUnitResults: true\n              testResultsFiles: '**/surefire-reports/TEST-*.xml'\n              goals: 'install'\n\n          - task: Maven@3\n            inputs:\n              mavenPomFile: 'common/pom.xml'\n              mavenOptions: '-Xmx3072m'\n              javaHomeOption: 'JDKVersion'\n              jdkVersionOption: '1.11'\n              jdkArchitectureOption: 'x64'\n              publishJUnitResults: true\n              testResultsFiles: '**/surefire-reports/TEST-*.xml'\n              goals: 'install'\n\n          - task: Maven@3\n            inputs:\n              mavenPomFile: 'security/pom.xml'\n              mavenOptions: '-Xmx3072m'\n              javaHomeOption: 'JDKVersion'\n              jdkVersionOption: '1.11'\n              jdkArchitectureOption: 'x64'\n              publishJUnitResults: true\n              testResultsFiles: '**/surefire-reports/TEST-*.xml'\n              goals: 'install'\n\n          - task: Maven@3\n            inputs:\n              mavenPomFile: 'search/pom.xml'\n              mavenOptions: '-Xmx3072m'\n              javaHomeOption: 'JDKVersion'\n              jdkVersionOption: '1.11'\n              jdkArchitectureOption: 'x64'\n              publishJUnitResults: true\n              testResultsFiles: '**/surefire-reports/TEST-*.xml'\n              goals: 'install'\n\n\n          - task: Maven@3\n            inputs:\n              mavenPomFile: 'backend/pom.xml'\n              mavenOptions: '-Xmx3072m'\n              javaHomeOption: 'JDKVersion'\n              jdkVersionOption: '1.11'\n              jdkArchitectureOption: 'x64'\n              publishJUnitResults: true\n              testResultsFiles: '**/surefire-reports/TEST-*.xml'\n              goals: 'package'\n\n          - task: Docker@2\n            inputs:\n              containerRegistry: 'registry'\n              repository: 'my_repo'\n              command: 'buildAndPush'\n              Dockerfile: '**/Dockerfile'\n              tags: '$(Build.BuildId).development'\n\n          - task: PublishBuildArtifacts@1\n            inputs:\n              PathtoPublish: '$(Build.ArtifactStagingDirectory)'\n              ArtifactName: 'drop'\n              publishLocation: 'Container'\n</code></pre>\n<p>here is my pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.timestreamgroup.reconstream&lt;/groupId&gt;\n    &lt;artifactId&gt;recon-ui-service&lt;/artifactId&gt;\n    &lt;name&gt;recon-ui-service&lt;/name&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n    &lt;description&gt;recon ui service&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;version.infinispan&gt;12.1.7.Final&lt;/version.infinispan&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.timestreamgroup.reconstream&lt;/groupId&gt;\n            &lt;artifactId&gt;recon-common&lt;/artifactId&gt;\n            &lt;version&gt;0.0.1&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-cloud-stream&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n               &lt;!-- &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\n                &lt;/exclusion&gt;--&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.cronutils&lt;/groupId&gt;\n            &lt;artifactId&gt;cron-utils&lt;/artifactId&gt;\n            &lt;version&gt;9.1.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.timestreamgroup.reconstream&lt;/groupId&gt;\n            &lt;artifactId&gt;recon-security&lt;/artifactId&gt;\n            &lt;version&gt;${project.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.timestreamgroup.reconstream&lt;/groupId&gt;\n            &lt;artifactId&gt;recon-api-search&lt;/artifactId&gt;\n            &lt;version&gt;0.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n            &lt;version&gt;1.6.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n            &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;no.api.freemarker&lt;/groupId&gt;\n            &lt;artifactId&gt;freemarker-java8&lt;/artifactId&gt;\n            &lt;version&gt;1.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.everit.json&lt;/groupId&gt;\n            &lt;artifactId&gt;org.everit.json.schema&lt;/artifactId&gt;\n            &lt;version&gt;1.5.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n            &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;8.4.1.jre8&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.infinispan&lt;/groupId&gt;\n            &lt;artifactId&gt;infinispan-spring-boot-starter-embedded&lt;/artifactId&gt;\n            &lt;version&gt;${version.infinispan}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-oas&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.hateoas&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-hateoas&lt;/artifactId&gt;\n            &lt;version&gt;1.3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;!--     &lt;dependency&gt;\n                     &lt;groupId&gt;com.timestreamgroup.reconstream&lt;/groupId&gt;\n                     &lt;artifactId&gt;recon-parent&lt;/artifactId&gt;\n                     &lt;version&gt;0.0.1&lt;/version&gt;\n                     &lt;exclusions&gt;\n                         &lt;exclusion&gt;\n                             &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                             &lt;artifactId&gt;spring-cloud-stream&lt;/artifactId&gt;\n                         &lt;/exclusion&gt;\n                         &lt;exclusion&gt;\n                             &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n                             &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\n                         &lt;/exclusion&gt;\n                     &lt;/exclusions&gt;\n                 &lt;/dependency&gt;\n                 --&gt;\n\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;forceJavacCompilerUse&gt;true&lt;/forceJavacCompilerUse&gt;\n                    &lt;annotationProcessorPaths&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                            &lt;version&gt;1.4.1.Final&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                            &lt;version&gt;1.18.20&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;dependency&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n                            &lt;version&gt;0.2.0&lt;/version&gt;\n                        &lt;/dependency&gt;\n                    &lt;/annotationProcessorPaths&gt;\n                    &lt;compilerArgs&gt;\n                        &lt;compilerArg&gt;\n                            -Amapstruct.defaultComponentModel=spring\n                        &lt;/compilerArg&gt;\n                    &lt;/compilerArgs&gt;\n                    &lt;!--&lt;source&gt;11&lt;/source&gt;\n                    &lt;target&gt;11&lt;/target&gt;--&gt;\n                &lt;/configuration&gt;\n\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n                &lt;artifactId&gt;springdoc-openapi-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.2&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;integration-test&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.github.wvengen&lt;/groupId&gt;\n                &lt;artifactId&gt;proguard-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;proguard&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;proguardVersion&gt;7.0.0&lt;/proguardVersion&gt;\n                    &lt;injar&gt;${project.build.finalName}.jar&lt;/injar&gt;\n                    &lt;outjar&gt;${project.build.finalName}.jar&lt;/outjar&gt;\n                    &lt;proguardInclude&gt;${project.basedir}/proguard.cfg&lt;/proguardInclude&gt;\n                    &lt;libs&gt;\n                        &lt;lib&gt;${java.home}&lt;/lib&gt;\n                    &lt;/libs&gt;\n                &lt;/configuration&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;com.guardsquare&lt;/groupId&gt;\n                        &lt;artifactId&gt;proguard-base&lt;/artifactId&gt;\n                        &lt;version&gt;7.0.0&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;com.timestreamgroup.reconstream.ui.service.ReconUiServiceApplication&lt;/mainClass&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;pre-integration-test&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;start&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;post-integration-test&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;stop&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;run&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;target&gt;\n                                &lt;delete file=&quot;${project.build.directory}/${project.build.finalName}_proguard_base.jar&quot;/&gt;\n                            &lt;/target&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong>App was started but endpoints are not accessible</strong></p>\n<p>Here's what I've tried so far:</p>\n<ul>\n<li>Checked the output of the Maven 'package' goal to make sure that the obfuscated JAR file is being built correctly.</li>\n<li>Made sure that the obfuscated JAR file is being included in the Docker image.</li>\n<li>Checked if the Docker image is being deployed correctly to the target environment.</li>\n<li>Checked the logs of the deployed application for any error messages or warnings.</li>\n</ul>\n<p>None of these steps have helped me to solve the issue.</p>\n<p>Any ideas on what could be causing this issue or what other troubleshooting steps I could try?</p>\n<p>Thanks in advance for your help!</p>\n"},{"tags":["java","rest","redirect"],"answers":[{"tags":[],"owner":{"account_id":123247,"reputation":1606,"user_id":317605,"accept_rate":20,"display_name":"sergiofbsilva"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1340185256,"creation_date":1340185256,"answer_id":11116782,"question_id":11116687,"body_markdown":"Create a URI using `javax.ws.rs.core.UriBuilder` that maps the parameters and other data you want to preserve. Then use `Response.temporaryRedirect` to return a redirect to the client and pass it the URI you’ve built.","title":"Redirecting to a page using restful methods?","body":"<p>Create a URI using <code>javax.ws.rs.core.UriBuilder</code> that maps the parameters and other data you want to preserve. Then use <code>Response.temporaryRedirect</code> to return a redirect to the client and pass it the URI you’ve built.</p>\n"},{"tags":[],"owner":{"account_id":228918,"reputation":5202,"user_id":491527,"accept_rate":69,"display_name":"Matin Kh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1340862963,"creation_date":1340862963,"answer_id":11238789,"question_id":11116687,"body_markdown":"Finally I come to this conclusion that there are no other way than what I did:&lt;br&gt;\r\nSo here is my solution:\r\n        \r\n    try {\r\n\t\t\tjava.net.URI location = new java.net.URI(&quot;../index.jsp?msg=A_User_Added&quot;);\r\n\t\t\tthrow new WebApplicationException(Response.temporaryRedirect(location).build());\r\n\t\t} catch (URISyntaxException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n&lt;br&gt;\r\nBy adding this block to my code, I got what I needed. Hope it helps you as well.","title":"Redirecting to a page using restful methods?","body":"<p>Finally I come to this conclusion that there are no other way than what I did:<br>\nSo here is my solution:</p>\n\n<pre><code>try {\n        java.net.URI location = new java.net.URI(\"../index.jsp?msg=A_User_Added\");\n        throw new WebApplicationException(Response.temporaryRedirect(location).build());\n    } catch (URISyntaxException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p><br>\nBy adding this block to my code, I got what I needed. Hope it helps you as well.</p>\n"},{"tags":[],"owner":{"account_id":1965614,"reputation":1415,"user_id":1765981,"accept_rate":33,"display_name":"Shen liang"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679915331,"creation_date":1385724062,"answer_id":20284575,"question_id":11116687,"body_markdown":"It is not good idea to use the &quot;WebApplicationException&quot; in order to redirect the request. in Jersey (2.4.1) you should be able to redirect the request via the normal servlet way, (request.getServletContext().getRequestDispatcher().forward() or just response.sendRedirect())\r\n\r\nThe following is how Jersey process the request\r\n\r\n    org.glassfish.jersey.servlet.ServletContainer.service(HttpServletRequest request, HttpServletResponse response)\r\n          requestScope.runInScope\r\n               final ContainerResponse response = endpoint.apply(data)\r\n                      methodHandler.invoke(resource, method, args);\r\n               Responder.process(ContainerResponse);\r\n                     \r\n\r\nThat **methodHandler** is your REST service class, **method** is the function in that service class. \r\n\r\nThe step to redirect page become straightforward\r\n\r\n 1. Get the (request, response) through Jersey injection (@Context HttpServletRequest request, @Context HttpServletResponse response) in class field or function parameter\r\n\r\n 2. Call request.getServletContext().getRequestDispatcher() to get the dispatcher for &quot;forward&quot;\r\nor use Response.sendRedirect(url)\r\n\r\nOnce you application is returned (just null), Jersey will try to process the result in the &quot;Responder.process(ContainerResponse)&quot;. In this step, it will use response to set status (204 no contents for your null return). \r\n\r\nSo the key point here is you must finalize/close response object before return from your service function. Otherwise, Jersey may overwrite your output. \r\n\r\nSmall tips on why &quot;WebApplicationException&quot; can overwrite Jersey repsponse. It is because org.glassfish.jersey.server.ServerRuntime.mapException() will use the &quot;webApplicationException.getResponse()&quot; as the return response result. \r\n","title":"Redirecting to a page using restful methods?","body":"<p>It is not good idea to use the &quot;WebApplicationException&quot; in order to redirect the request. in Jersey (2.4.1) you should be able to redirect the request via the normal servlet way, (request.getServletContext().getRequestDispatcher().forward() or just response.sendRedirect())</p>\n<p>The following is how Jersey process the request</p>\n<pre><code>org.glassfish.jersey.servlet.ServletContainer.service(HttpServletRequest request, HttpServletResponse response)\n      requestScope.runInScope\n           final ContainerResponse response = endpoint.apply(data)\n                  methodHandler.invoke(resource, method, args);\n           Responder.process(ContainerResponse);\n                 \n</code></pre>\n<p>That <strong>methodHandler</strong> is your REST service class, <strong>method</strong> is the function in that service class.</p>\n<p>The step to redirect page become straightforward</p>\n<ol>\n<li><p>Get the (request, response) through Jersey injection (@Context HttpServletRequest request, @Context HttpServletResponse response) in class field or function parameter</p>\n</li>\n<li><p>Call request.getServletContext().getRequestDispatcher() to get the dispatcher for &quot;forward&quot;\nor use Response.sendRedirect(url)</p>\n</li>\n</ol>\n<p>Once you application is returned (just null), Jersey will try to process the result in the &quot;Responder.process(ContainerResponse)&quot;. In this step, it will use response to set status (204 no contents for your null return).</p>\n<p>So the key point here is you must finalize/close response object before return from your service function. Otherwise, Jersey may overwrite your output.</p>\n<p>Small tips on why &quot;WebApplicationException&quot; can overwrite Jersey repsponse. It is because org.glassfish.jersey.server.ServerRuntime.mapException() will use the &quot;webApplicationException.getResponse()&quot; as the return response result.</p>\n"},{"tags":[],"owner":{"account_id":4435870,"reputation":141,"user_id":3611742,"display_name":"Joey"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1399458340,"creation_date":1399458340,"answer_id":23515209,"question_id":11116687,"body_markdown":"change your code like this, the addUser() should return a Response Object\r\n\r\n    public Response addUser(@FormParam(&quot;username&quot;) String username,\r\n            @FormParam(&quot;password&quot;) String password,\r\n            @FormParam(&quot;id&quot;) String id,\r\n            @FormParam(&quot;group_name&quot;) String groupName,\r\n            @FormParam(&quot;authority_name&quot;) String authorityName,\r\n            @FormParam(&quot;authority_id&quot;) String authorityId\r\n            )\r\n    {\r\n        //Something will be done here\r\n    \r\n        java.net.URI location = new java.net.URI(&quot;../index.jsp?msg=A_User_Added&quot;);\r\n        return Response.temporaryRedirect(location).build()\r\n    \r\n    }\r\n\r\n ","title":"Redirecting to a page using restful methods?","body":"<p>change your code like this, the addUser() should return a Response Object</p>\n\n<pre><code>public Response addUser(@FormParam(\"username\") String username,\n        @FormParam(\"password\") String password,\n        @FormParam(\"id\") String id,\n        @FormParam(\"group_name\") String groupName,\n        @FormParam(\"authority_name\") String authorityName,\n        @FormParam(\"authority_id\") String authorityId\n        )\n{\n    //Something will be done here\n\n    java.net.URI location = new java.net.URI(\"../index.jsp?msg=A_User_Added\");\n    return Response.temporaryRedirect(location).build()\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7319500,"reputation":21,"user_id":5575949,"display_name":"Divya Jaiswal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1447841871,"creation_date":1447840814,"answer_id":33776906,"question_id":11116687,"body_markdown":"See below the usage of redirecting in web services:\r\n\r\n    public class LoginWebService {\r\n\t\t \r\n\t\t@POST\r\n\t\t@Path(&quot;/check&quot;)\r\n\t\tpublic Response checkDetails(@FormParam(&quot;name&quot;) String name,@FormParam(&quot;pass&quot;) String pass ) throws URISyntaxException  {\r\n\t\t\t\r\n\t\t\tURI uri = new URI(&quot;/login/success&quot;);\r\n\t\t\tURI uri2= new URI(&quot;http://localhost:9090/NewWebServiceproject/new/login/failure&quot;);\r\n\t\t\t\r\n\t\t\tif(name.equals(&quot;admin&quot;) &amp;&amp; pass.equals(&quot;pass&quot;))\r\n\t\t//@Path(&quot;http://localhost:8010/NewWebServiceproject/new/login/success&quot;);\r\n\t\t\t\t{\r\n\t\t\t\treturn Response.temporaryRedirect(uri).build();\r\n\t\t\t\t//Response.seeOther(uri);\r\n\t\t\t\t//return Response.status(200).entity(&quot;user successfully login&quot;).build();\r\n\t\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\treturn Response.temporaryRedirect(uri2).build();\r\n\t\t\t\t//Response.seeOther(uri2);\r\n\t\t\t\t//return Response.status(200).entity(&quot;user logon failed&quot;).build();\r\n\t\t\t\t}\r\n\t\t}\r\n\t\t@POST\r\n\t\t@Path(&quot;/success&quot;)\r\n\t\tpublic Response successpage()\r\n\t\t{\r\n\t\treturn Response.status(200).entity(&quot;user successfully login&quot;).build();\r\n\t\t}\r\n\t\t@POST\r\n\t\t@Path(&quot;/failure&quot;)\r\n\t\tpublic Response failurepage()\r\n\t\t{\r\n\t\treturn Response.status(200).entity(&quot;user logon failed&quot;).build();\r\n\t\t}\r\n\t}","title":"Redirecting to a page using restful methods?","body":"<p>See below the usage of redirecting in web services:</p>\n\n<pre><code>public class LoginWebService {\n\n    @POST\n    @Path(\"/check\")\n    public Response checkDetails(@FormParam(\"name\") String name,@FormParam(\"pass\") String pass ) throws URISyntaxException  {\n\n        URI uri = new URI(\"/login/success\");\n        URI uri2= new URI(\"http://localhost:9090/NewWebServiceproject/new/login/failure\");\n\n        if(name.equals(\"admin\") &amp;&amp; pass.equals(\"pass\"))\n    //@Path(\"http://localhost:8010/NewWebServiceproject/new/login/success\");\n            {\n            return Response.temporaryRedirect(uri).build();\n            //Response.seeOther(uri);\n            //return Response.status(200).entity(\"user successfully login\").build();\n            }\n        else\n        {\n            return Response.temporaryRedirect(uri2).build();\n            //Response.seeOther(uri2);\n            //return Response.status(200).entity(\"user logon failed\").build();\n            }\n    }\n    @POST\n    @Path(\"/success\")\n    public Response successpage()\n    {\n    return Response.status(200).entity(\"user successfully login\").build();\n    }\n    @POST\n    @Path(\"/failure\")\n    public Response failurepage()\n    {\n    return Response.status(200).entity(\"user logon failed\").build();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":228918,"reputation":5202,"user_id":491527,"accept_rate":69,"display_name":"Matin Kh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58639,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":11116782,"answer_count":5,"score":10,"last_activity_date":1679915331,"creation_date":1340184953,"question_id":11116687,"body_markdown":"I&#39;ve created a page which asks user to fill some form fields and when he submits, the form is sent to a Restful method which you can see below:&lt;br&gt;\r\n        \r\n    @POST\r\n\t@Path(&quot;addUser&quot;)\r\n\t@Consumes(MediaType.APPLICATION_FORM_URLENCODED)\r\n\tpublic void addUser(@FormParam(&quot;username&quot;) String username,\r\n\t\t\t@FormParam(&quot;password&quot;) String password,\r\n\t\t\t@FormParam(&quot;id&quot;) String id,\r\n\t\t\t@FormParam(&quot;group_name&quot;) String groupName,\r\n\t\t\t@FormParam(&quot;authority_name&quot;) String authorityName,\r\n\t\t\t@FormParam(&quot;authority_id&quot;) String authorityId\r\n\t\t\t)\r\n    {\r\n        //Something will be done here\r\n    }\r\n&lt;br&gt;\r\nHow can I redirect the user at the end of this function to (let&#39;s say) index.jsp?","title":"Redirecting to a page using restful methods?","body":"<p>I've created a page which asks user to fill some form fields and when he submits, the form is sent to a Restful method which you can see below:<br></p>\n\n<pre><code>@POST\n@Path(\"addUser\")\n@Consumes(MediaType.APPLICATION_FORM_URLENCODED)\npublic void addUser(@FormParam(\"username\") String username,\n        @FormParam(\"password\") String password,\n        @FormParam(\"id\") String id,\n        @FormParam(\"group_name\") String groupName,\n        @FormParam(\"authority_name\") String authorityName,\n        @FormParam(\"authority_id\") String authorityId\n        )\n{\n    //Something will be done here\n}\n</code></pre>\n\n<p><br>\nHow can I redirect the user at the end of this function to (let's say) index.jsp?</p>\n"},{"tags":["java","jmeter","load-testing","throughput"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679915218,"creation_date":1679915218,"answer_id":75855009,"question_id":75854641,"body_markdown":"I don&#39;t think you will be able to &quot;put load&quot; using [JMeterUtils][1], it&#39;s just a helper class which allows you to set and get [JMeter Properties][2] \r\n\r\nThe &quot;load&quot; is generated by the [Thread Group][3] where you can set the desired number of threads (virtual users), ramp-up period, number of iterations, duration, etc. \r\n\r\nOnce started each thread begins executing [Samplers][4] as fast as it can. \r\n\r\nSo if you need to execute 72000 requests in 2 hours with 25 users you need the following setup:\r\n\r\n 1. Thread Group with 25 users, unlimited iteratinos and 2 hours duration:\r\n\r\n    [![enter image description here][5]][5]\r\n 2. A Sampler which will be executing the real work, i.e. sending a request to the system under test. A very minimal one which sends simple single GET request to http://example.com is below\r\n\r\n    [![enter image description here][6]][6]\r\n 3. A [Constant Throughput Timer][7] to limit JMeter to send requests at 10 requests per second rate\r\n\r\n    [![enter image description here][8]][8]\r\n\r\nIf you need to start the test from your Java application you can either run an existing [.jmx script][9] like outlined above using [StandardJMeterEngine][10] class or create the test from scratch using relevant JMeter API classes ([ThreadGroup][11], [TestPlan][12], [HTTPSamplerProxy][13], etc.)\r\n\r\n    \r\nIf you want to use properties which are set by your JMeterUtils class you can use [__P() function][14] like `${__P(load.thread-count-in-group,)}` \r\n\r\n[![enter image description here][15]][15]\r\n\r\n\r\n  [1]: https://jmeter.apache.org/api/org/apache/jmeter/util/JMeterUtils.html\r\n  [2]: https://jmeter.apache.org/usermanual/properties_reference.html\r\n  [3]: https://jmeter.apache.org/usermanual/component_reference.html#Thread_Group\r\n  [4]: https://jmeter.apache.org/usermanual/component_reference.html#samplers\r\n  [5]: https://i.stack.imgur.com/LbUNA.png\r\n  [6]: https://i.stack.imgur.com/5wueF.png\r\n  [7]: https://www.blazemeter.com/blog/jmeter-throughput\r\n  [8]: https://i.stack.imgur.com/MwFVF.png\r\n  [9]: https://cwiki.apache.org/confluence/display/JMETER/JmxTestPlan\r\n  [10]: https://jmeter.apache.org/api/org/apache/jmeter/engine/StandardJMeterEngine.html\r\n  [11]: https://jmeter.apache.org/api/org/apache/jmeter/threads/ThreadGroup.html\r\n  [12]: https://jmeter.apache.org/api/org/apache/jmeter/testelement/TestPlan.html\r\n  [13]: https://jmeter.apache.org/api/org/apache/jmeter/protocol/http/sampler/HTTPSamplerProxy.html\r\n  [14]: https://jmeter.apache.org/usermanual/functions.html#__P\r\n  [15]: https://i.stack.imgur.com/lmwTe.png","title":"Unable to understand JmeterUtils properties","body":"<p>I don't think you will be able to &quot;put load&quot; using <a href=\"https://jmeter.apache.org/api/org/apache/jmeter/util/JMeterUtils.html\" rel=\"nofollow noreferrer\">JMeterUtils</a>, it's just a helper class which allows you to set and get <a href=\"https://jmeter.apache.org/usermanual/properties_reference.html\" rel=\"nofollow noreferrer\">JMeter Properties</a></p>\n<p>The &quot;load&quot; is generated by the <a href=\"https://jmeter.apache.org/usermanual/component_reference.html#Thread_Group\" rel=\"nofollow noreferrer\">Thread Group</a> where you can set the desired number of threads (virtual users), ramp-up period, number of iterations, duration, etc.</p>\n<p>Once started each thread begins executing <a href=\"https://jmeter.apache.org/usermanual/component_reference.html#samplers\" rel=\"nofollow noreferrer\">Samplers</a> as fast as it can.</p>\n<p>So if you need to execute 72000 requests in 2 hours with 25 users you need the following setup:</p>\n<ol>\n<li><p>Thread Group with 25 users, unlimited iteratinos and 2 hours duration:</p>\n<p><a href=\"https://i.stack.imgur.com/LbUNA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LbUNA.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>A Sampler which will be executing the real work, i.e. sending a request to the system under test. A very minimal one which sends simple single GET request to <a href=\"http://example.com\" rel=\"nofollow noreferrer\">http://example.com</a> is below</p>\n<p><a href=\"https://i.stack.imgur.com/5wueF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5wueF.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>A <a href=\"https://www.blazemeter.com/blog/jmeter-throughput\" rel=\"nofollow noreferrer\">Constant Throughput Timer</a> to limit JMeter to send requests at 10 requests per second rate</p>\n<p><a href=\"https://i.stack.imgur.com/MwFVF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MwFVF.png\" alt=\"enter image description here\" /></a></p>\n</li>\n</ol>\n<p>If you need to start the test from your Java application you can either run an existing <a href=\"https://cwiki.apache.org/confluence/display/JMETER/JmxTestPlan\" rel=\"nofollow noreferrer\">.jmx script</a> like outlined above using <a href=\"https://jmeter.apache.org/api/org/apache/jmeter/engine/StandardJMeterEngine.html\" rel=\"nofollow noreferrer\">StandardJMeterEngine</a> class or create the test from scratch using relevant JMeter API classes (<a href=\"https://jmeter.apache.org/api/org/apache/jmeter/threads/ThreadGroup.html\" rel=\"nofollow noreferrer\">ThreadGroup</a>, <a href=\"https://jmeter.apache.org/api/org/apache/jmeter/testelement/TestPlan.html\" rel=\"nofollow noreferrer\">TestPlan</a>, <a href=\"https://jmeter.apache.org/api/org/apache/jmeter/protocol/http/sampler/HTTPSamplerProxy.html\" rel=\"nofollow noreferrer\">HTTPSamplerProxy</a>, etc.)</p>\n<p>If you want to use properties which are set by your JMeterUtils class you can use <a href=\"https://jmeter.apache.org/usermanual/functions.html#__P\" rel=\"nofollow noreferrer\">__P() function</a> like <code>${__P(load.thread-count-in-group,)}</code></p>\n<p><a href=\"https://i.stack.imgur.com/lmwTe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lmwTe.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":5137581,"reputation":340,"user_id":4115835,"accept_rate":15,"display_name":"Loren"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679915218,"creation_date":1679912782,"question_id":75854641,"body_markdown":"I am trying to put load from my java application using Apache&#39;s JMeterUtils. I am new to Jmeter , I am a bit confused about the values I should put in to acheive 72k load in 2hours. \r\n\r\n    load.throughput.max=100 (load put per sec ?)\r\n    load.thread-count-in-group=25 (total number of threads runnings)\r\n    load.duration.seconds=7200 (load will run for 2hours)\r\n    load.ramp-up.duration.seconds=20 (time to bring all threads up)\r\n\r\nIs my understanding correct about these properties ? I was referring to below documentation  [JMeterUtils][1] but was not able to find any thing about these properties. Can somebody please correct me if I am wrong in my understanding. \r\n\r\n\r\n  [1]: http://svn.apache.org/repos/asf/jmeter/branches/rel-2-2/docs/api/org/apache/jmeter/util/JMeterUtils.html#loadProperties(java.lang.String)","title":"Unable to understand JmeterUtils properties","body":"<p>I am trying to put load from my java application using Apache's JMeterUtils. I am new to Jmeter , I am a bit confused about the values I should put in to acheive 72k load in 2hours.</p>\n<pre><code>load.throughput.max=100 (load put per sec ?)\nload.thread-count-in-group=25 (total number of threads runnings)\nload.duration.seconds=7200 (load will run for 2hours)\nload.ramp-up.duration.seconds=20 (time to bring all threads up)\n</code></pre>\n<p>Is my understanding correct about these properties ? I was referring to below documentation  <a href=\"http://svn.apache.org/repos/asf/jmeter/branches/rel-2-2/docs/api/org/apache/jmeter/util/JMeterUtils.html#loadProperties(java.lang.String)\" rel=\"nofollow noreferrer\">JMeterUtils</a> but was not able to find any thing about these properties. Can somebody please correct me if I am wrong in my understanding.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1679915072,"post_id":75854985,"comment_id":133800523,"body_markdown":"&quot;AccessDenied&quot; sounds pretty understandable. You aren&#39;t allowed to access whatever it is you are trying to access. Sounds like less of a programming error and more of a problem with the permissions of the filesystem","body":"&quot;AccessDenied&quot; sounds pretty understandable. You aren&#39;t allowed to access whatever it is you are trying to access. Sounds like less of a programming error and more of a problem with the permissions of the filesystem"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1679915501,"post_id":75854985,"comment_id":133800618,"body_markdown":"You need to include the *full* stack trace in your question.","body":"You need to include the <i>full</i> stack trace in your question."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1679920839,"post_id":75854985,"comment_id":133801976,"body_markdown":"I guess You run spring boot as a jar. then your code `FileSystemResource(&quot;./&quot;)` will access your jar file. not the working directory (I guess).  check your jar is include the zip file ?","body":"I guess You run spring boot as a jar. then your code <code>FileSystemResource(&quot;.&#47;&quot;)</code> will access your jar file. not the working directory (I guess).  check your jar is include the zip file ?"},{"owner":{"account_id":21884076,"reputation":107,"user_id":16171930,"display_name":"Aniket Thorat"},"score":0,"creation_date":1679926564,"post_id":75854985,"comment_id":133803821,"body_markdown":"no i am running it as spring boot app","body":"no i am running it as spring boot app"}],"owner":{"account_id":21884076,"reputation":107,"user_id":16171930,"display_name":"Aniket Thorat"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679915008,"creation_date":1679915008,"question_id":75854985,"body_markdown":"I am trying to download zip from spring boot rest api but getting error.\r\n\r\n    java.nio.file.AccessDeniedException: .\r\n    \tat sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:83) ~[na:1.8.0_92]\r\n    \tat sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97) ~[na:1.8.0_92] \r\n\r\nDownload file location.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PfQkw.png\r\n\r\nCode for downloading.\r\n\t\r\n\r\n    @PostMapping(&quot;/downlode&quot;)\r\n    \tpublic ResponseEntity&lt;FileSystemResource&gt; generator(@RequestBody Input input)\r\n    \t\t\tthrows IOException, JSONException, InterruptedException {\r\n    \t\t\r\n    \t\tFileSystemResource fileResource = new FileSystemResource(&quot;./&quot;);\r\n    \t\tHttpHeaders headers = new HttpHeaders();\r\n    \t\theaders.setContentType(MediaType.APPLICATION_OCTET_STREAM);\r\n    \t\tString filename = &quot;myarchive.zip&quot;;\r\n    \t\theaders.setContentDisposition(ContentDisposition.attachment().filename(filename).build());\r\n    \t\theaders.setContentLength(((FileSystemResource) fileResource).contentLength());\r\n    \t\treturn ResponseEntity.ok().headers(headers).body(fileResource);\r\n    \t} ","title":"Download Zip using Spring Boot","body":"<p>I am trying to download zip from spring boot rest api but getting error.</p>\n<pre><code>java.nio.file.AccessDeniedException: .\n    at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:83) ~[na:1.8.0_92]\n    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97) ~[na:1.8.0_92] \n</code></pre>\n<p>Download file location.</p>\n<p><a href=\"https://i.stack.imgur.com/PfQkw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PfQkw.png\" alt=\"enter image description here\" /></a></p>\n<p>Code for downloading.</p>\n<pre><code>@PostMapping(&quot;/downlode&quot;)\n    public ResponseEntity&lt;FileSystemResource&gt; generator(@RequestBody Input input)\n            throws IOException, JSONException, InterruptedException {\n        \n        FileSystemResource fileResource = new FileSystemResource(&quot;./&quot;);\n        HttpHeaders headers = new HttpHeaders();\n        headers.setContentType(MediaType.APPLICATION_OCTET_STREAM);\n        String filename = &quot;myarchive.zip&quot;;\n        headers.setContentDisposition(ContentDisposition.attachment().filename(filename).build());\n        headers.setContentLength(((FileSystemResource) fileResource).contentLength());\n        return ResponseEntity.ok().headers(headers).body(fileResource);\n    } \n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":402018,"reputation":16610,"user_id":768935,"accept_rate":93,"display_name":"allprog"},"score":0,"creation_date":1381937431,"post_id":19407187,"comment_id":28767490,"body_markdown":"possible duplicate of [What is the order of the Constructors in this Java Code?](http://stackoverflow.com/questions/9904918/what-is-the-order-of-the-constructors-in-this-java-code)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/9904918/what-is-the-order-of-the-constructors-in-this-java-code\">What is the order of the Constructors in this Java Code?</a>"},{"owner":{"account_id":9439654,"reputation":470,"user_id":7266331,"display_name":"sarthakgupta072"},"score":0,"creation_date":1505886127,"post_id":19407187,"comment_id":79589685,"body_markdown":"See this Answer: [This](https://stackoverflow.com/questions/9586367/constructor-of-subclass-in-java)\nwill make your concepts more clearer.","body":"See this Answer: <a href=\"https://stackoverflow.com/questions/9586367/constructor-of-subclass-in-java\">This</a> will make your concepts more clearer."}],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1381936684,"creation_date":1381936684,"answer_id":19407275,"question_id":19407187,"body_markdown":"These are instance fields\r\n\r\n    private Bread b = new Bread();\r\n    private Cheese c = new Cheese();\r\n    private Lettuce l = new Lettuce();\r\n\r\nThey only exist (execute) if an instance is created.\r\n\r\nThe first thing that runs in your program is \r\n\r\n    public static void main(String[] args) {\r\n         new Sandwich();\r\n    }\r\n\r\nSuper constructors are called implicitly as the first thing in each constructor, ie. before `System.out.println`\r\n\r\n    class Meal {\r\n        Meal() { System.out.println(&quot;Meal()&quot;); }\r\n    }\r\n     \r\n    class Lunch extends Meal {\r\n        Lunch() { System.out.println(&quot;Lunch()&quot;); }\r\n    }\r\n    \r\n    class PortableLunch extends Lunch {\r\n        PortableLunch() { System.out.println(&quot;PortableLunch()&quot;);}\r\n    }\r\n\r\nAfter the `super()` calls, instance fields are instantiated again before the constructor code.\r\n\r\nThe order, reversed\r\n\r\n    new Sandwich(); // prints last\r\n    // the instance fields\r\n    super(); // new PortableLunch() prints third\r\n    super(); // new Lunch() prints second\r\n    super(); // new Meal(); prints first","title":"Java Constructors - Order of execution in an inheritance hierarchy","body":"<p>These are instance fields</p>\n\n<pre><code>private Bread b = new Bread();\nprivate Cheese c = new Cheese();\nprivate Lettuce l = new Lettuce();\n</code></pre>\n\n<p>They only exist (execute) if an instance is created.</p>\n\n<p>The first thing that runs in your program is </p>\n\n<pre><code>public static void main(String[] args) {\n     new Sandwich();\n}\n</code></pre>\n\n<p>Super constructors are called implicitly as the first thing in each constructor, ie. before <code>System.out.println</code></p>\n\n<pre><code>class Meal {\n    Meal() { System.out.println(\"Meal()\"); }\n}\n\nclass Lunch extends Meal {\n    Lunch() { System.out.println(\"Lunch()\"); }\n}\n\nclass PortableLunch extends Lunch {\n    PortableLunch() { System.out.println(\"PortableLunch()\");}\n}\n</code></pre>\n\n<p>After the <code>super()</code> calls, instance fields are instantiated again before the constructor code.</p>\n\n<p>The order, reversed</p>\n\n<pre><code>new Sandwich(); // prints last\n// the instance fields\nsuper(); // new PortableLunch() prints third\nsuper(); // new Lunch() prints second\nsuper(); // new Meal(); prints first\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1381937082,"creation_date":1381936715,"answer_id":19407290,"question_id":19407187,"body_markdown":"    private Bread b = new Bread();\r\n    private Cheese c = new Cheese();\r\n    private Lettuce l = new Lettuce();\r\n\r\nThese initializers are put into the Sandwich constructor by the compiler after the super call to it&#39;s parent class. \r\n\r\nIf these were static, then they would happen first, because static initializers happen on class load.\r\n\r\n","title":"Java Constructors - Order of execution in an inheritance hierarchy","body":"<pre><code>private Bread b = new Bread();\nprivate Cheese c = new Cheese();\nprivate Lettuce l = new Lettuce();\n</code></pre>\n\n<p>These initializers are put into the Sandwich constructor by the compiler after the super call to it's parent class. </p>\n\n<p>If these were static, then they would happen first, because static initializers happen on class load.</p>\n"},{"tags":[],"owner":{"account_id":1018642,"reputation":1775,"user_id":1029621,"accept_rate":60,"display_name":"Eugen Halca"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1381936879,"creation_date":1381936879,"answer_id":19407344,"question_id":19407187,"body_markdown":"&gt;  even though their constructors where called after.\r\n\r\nNot after, here how construstor method looks like to compiler :\r\n\r\n    public Sandwich(){\r\n        super();// note this calls super constructor, which will call it&#39;s super and so on till Object&#39;s constructor\r\n        //initiate member variables\r\n        System.out.println(&quot;Sandwich()&quot;);\r\n    }","title":"Java Constructors - Order of execution in an inheritance hierarchy","body":"<blockquote>\n  <p>even though their constructors where called after.</p>\n</blockquote>\n\n<p>Not after, here how construstor method looks like to compiler :</p>\n\n<pre><code>public Sandwich(){\n    super();// note this calls super constructor, which will call it's super and so on till Object's constructor\n    //initiate member variables\n    System.out.println(\"Sandwich()\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":402018,"reputation":16610,"user_id":768935,"accept_rate":93,"display_name":"allprog"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1381937217,"creation_date":1381937217,"answer_id":19407486,"question_id":19407187,"body_markdown":"The first call in a constructor is always the `super(...)`. This call is automatically inserted by the compiler if you don&#39;t write it down explicitly. No calls on the constructed object can happen before the call to `super()` returned. After `super()` finished, the fields are initialized in the order of appearance and then the rest of the constructor is executed. ","title":"Java Constructors - Order of execution in an inheritance hierarchy","body":"<p>The first call in a constructor is always the <code>super(...)</code>. This call is automatically inserted by the compiler if you don't write it down explicitly. No calls on the constructed object can happen before the call to <code>super()</code> returned. After <code>super()</code> finished, the fields are initialized in the order of appearance and then the rest of the constructor is executed. </p>\n"},{"tags":[],"owner":{"account_id":2205705,"reputation":3873,"user_id":1948990,"accept_rate":20,"display_name":"matt forsythe"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1381937446,"creation_date":1381937446,"answer_id":19407587,"question_id":19407187,"body_markdown":"I think there are two things going on here that are throwing you off.  The first is that `main` is a static method, where as the member variables b, c, and l are non-static instance variables.  That means that they belong to the objects of the class, not the class itself.  So when the class is initialized to run the main method, the contructors of Bread, Cheese, and Lettuce are not called, since no instances of Sandwich have been created.\r\n\r\nNot until main actually run, and calls `new Sandwich()` are any objects actually constructed.  At that point, the order of operations is:\r\n&gt; 1. initialize member fields of the base class(es)\r\n&gt; 2. run the base class(es) constructor(s)\r\n&gt; 3. initialize member fields of this class\r\n&gt; 4. run the constructor of this class\r\n\r\nThis is done recursively, so in this case, the order would be\r\n&gt; 1. init fields of Meal (none)\r\n&gt; 2. run constructor of Meal (prints &quot;Meal&quot;)\r\n&gt; 3. init fields of Lunch (none)\r\n&gt; 4. run constructor of Lunch (prints &quot;Lunch&quot;)\r\n&gt; 5. init fields of PortableLunch (none)\r\n&gt; 6. run constructor of PortableLunch (prints &quot;PortableLunch&quot;)\r\n&gt; 7. init fields of Sandwich (prints &quot;Bread&quot;, &quot;Cheese&quot;, and &quot;Lettuce&quot;)\r\n&gt; 8. run constructor of Sandwich (prints &quot;Sandwich&quot;)\r\n\r\nThe purpose of this order is to ensure that the base class is fully initialized before any code in the subclass is run.  This is needed because the within the constructor of the sub-class, it may call a method on the base class.  Bad things would happen if that base class did not initialize its members first.","title":"Java Constructors - Order of execution in an inheritance hierarchy","body":"<p>I think there are two things going on here that are throwing you off.  The first is that <code>main</code> is a static method, where as the member variables b, c, and l are non-static instance variables.  That means that they belong to the objects of the class, not the class itself.  So when the class is initialized to run the main method, the contructors of Bread, Cheese, and Lettuce are not called, since no instances of Sandwich have been created.</p>\n\n<p>Not until main actually run, and calls <code>new Sandwich()</code> are any objects actually constructed.  At that point, the order of operations is:</p>\n\n<blockquote>\n  <ol>\n  <li>initialize member fields of the base class(es)</li>\n  <li>run the base class(es) constructor(s)</li>\n  <li>initialize member fields of this class</li>\n  <li>run the constructor of this class</li>\n  </ol>\n</blockquote>\n\n<p>This is done recursively, so in this case, the order would be</p>\n\n<blockquote>\n  <ol>\n  <li>init fields of Meal (none)</li>\n  <li>run constructor of Meal (prints \"Meal\")</li>\n  <li>init fields of Lunch (none)</li>\n  <li>run constructor of Lunch (prints \"Lunch\")</li>\n  <li>init fields of PortableLunch (none)</li>\n  <li>run constructor of PortableLunch (prints \"PortableLunch\")</li>\n  <li>init fields of Sandwich (prints \"Bread\", \"Cheese\", and \"Lettuce\")</li>\n  <li>run constructor of Sandwich (prints \"Sandwich\")</li>\n  </ol>\n</blockquote>\n\n<p>The purpose of this order is to ensure that the base class is fully initialized before any code in the subclass is run.  This is needed because the within the constructor of the sub-class, it may call a method on the base class.  Bad things would happen if that base class did not initialize its members first.</p>\n"}],"owner":{"account_id":222592,"reputation":1160,"user_id":481293,"accept_rate":66,"display_name":"ade19"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12445,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":19407275,"answer_count":5,"score":22,"last_activity_date":1679914906,"creation_date":1381936481,"question_id":19407187,"body_markdown":"Consider the code below:\r\n\r\n\t  class Meal {\r\n\t\tMeal() { System.out.println(&quot;Meal()&quot;); }\r\n\t  }\r\n\r\n\t  class Bread {\r\n\t\tBread() { System.out.println(&quot;Bread()&quot;); }\r\n\t  }\r\n\r\n\t  class Cheese {\r\n\t\tCheese() { System.out.println(&quot;Cheese()&quot;); }\r\n\t  }\r\n    public static void sdadsdt(){\r\n    \r\n    }\r\n\t  class Lettuce {\r\n\t\tLettuce() { System.out.println(&quot;Lettuce()&quot;); }\r\n\t  }\r\n\r\n\t  class Lunch extends Meal {\r\n\t\tLunch() { System.out.println(&quot;Lunch()&quot;); }\r\n\t  }\r\n\r\n\t  class PortableLunch extends Lunch {\r\n\t\tPortableLunch() { System.out.println(&quot;PortableLunch()&quot;);}\r\n\t  }\r\n\r\n\t  class Sandwich extends PortableLunch {\r\n\t\tprivate Bread b = new Bread();\r\n\t\tprivate Cheese c = new Cheese();\r\n\t\tprivate Lettuce l = new Lettuce();\r\n\t\tpublic Sandwich() {\r\n\t\t  System.out.println(&quot;Sandwich()&quot;);\r\n\t\t}\r\n\t\tpublic static void main(String[] args) {\r\n\t\t  new Sandwich();\r\n\t\t}\r\n\t  } \r\n\r\nBased on my understanding of class member initialization and the order of constructor execution, I expected the output to be:\r\n\r\n    Bread()\r\n    Cheese()\r\n    Lettuce()\r\n    Meal()\r\n    Lunch()\r\n    PortableLunch()    \r\n    Sandwich()\r\n\r\nI believed that the class members were initialized even before the main method was called. However, when I ran the program, I received the following output:\r\n\r\n    Meal()\r\n    Lunch()\r\n    PortableLunch()\r\n    Bread()\r\n    Cheese()\r\n    Lettuce()\r\n    Sandwich()\r\n\r\nI am confused as to why Meal(), Lunch(), and PortableLunch() are executed before Bread(), Cheese(), and Lettuce(), even though their constructors were called after.","title":"Java Constructors - Order of execution in an inheritance hierarchy","body":"<p>Consider the code below:</p>\n<pre><code>  class Meal {\n    Meal() { System.out.println(&quot;Meal()&quot;); }\n  }\n\n  class Bread {\n    Bread() { System.out.println(&quot;Bread()&quot;); }\n  }\n\n  class Cheese {\n    Cheese() { System.out.println(&quot;Cheese()&quot;); }\n  }\npublic static void sdadsdt(){\n\n}\n  class Lettuce {\n    Lettuce() { System.out.println(&quot;Lettuce()&quot;); }\n  }\n\n  class Lunch extends Meal {\n    Lunch() { System.out.println(&quot;Lunch()&quot;); }\n  }\n\n  class PortableLunch extends Lunch {\n    PortableLunch() { System.out.println(&quot;PortableLunch()&quot;);}\n  }\n\n  class Sandwich extends PortableLunch {\n    private Bread b = new Bread();\n    private Cheese c = new Cheese();\n    private Lettuce l = new Lettuce();\n    public Sandwich() {\n      System.out.println(&quot;Sandwich()&quot;);\n    }\n    public static void main(String[] args) {\n      new Sandwich();\n    }\n  } \n</code></pre>\n<p>Based on my understanding of class member initialization and the order of constructor execution, I expected the output to be:</p>\n<pre><code>Bread()\nCheese()\nLettuce()\nMeal()\nLunch()\nPortableLunch()    \nSandwich()\n</code></pre>\n<p>I believed that the class members were initialized even before the main method was called. However, when I ran the program, I received the following output:</p>\n<pre><code>Meal()\nLunch()\nPortableLunch()\nBread()\nCheese()\nLettuce()\nSandwich()\n</code></pre>\n<p>I am confused as to why Meal(), Lunch(), and PortableLunch() are executed before Bread(), Cheese(), and Lettuce(), even though their constructors were called after.</p>\n"},{"tags":["java","spring-boot","annotations"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1679822237,"post_id":75846365,"comment_id":133786489,"body_markdown":"I think you need to read some annotation processor tutorials.","body":"I think you need to read some annotation processor tutorials."}],"owner":{"account_id":11324157,"reputation":41,"user_id":12067644,"display_name":"dan k"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679914637,"creation_date":1679814837,"question_id":75846365,"body_markdown":"I&#39;d like to create simple custom annotation which would be able to switch class string fields to upper case.\r\nI&#39;ve created annotation interface itself:\r\n\r\n```\r\n@Documented\r\n@Target(ElementType.FIELD)\r\n@Inherited\r\n@Retention(RetentionPolicy.SOURCE)\r\npublic @interface ToUpperCaseAnn {\r\n    String info() default &quot;No String value&quot;;\r\n}\r\n```\r\n\r\nand processor class:\r\n```\r\n@SupportedAnnotationTypes(&quot;org.example.ToUpperCaseAnn&quot;)\r\n@SupportedSourceVersion(SourceVersion.RELEASE_11)\r\n@AutoService(Processor.class)\r\npublic class ToUpperCaseAnnProcessor extends AbstractProcessor{\r\n\r\n    @Override\r\n    public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {\r\n        for (TypeElement annotation : annotations) {\r\n            Set&lt;? extends Element&gt; annotatedElements = roundEnv.getElementsAnnotatedWith(annotation);\r\n            for (Element annotatedElement : annotatedElements) {\r\n                annotatedElement.toString().toUpperCase();\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\nAnd also i&#39;ve modify pom.xml file:\r\n```\r\n&lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.5.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;compilerArgument&gt;\r\n                        -proc:none\r\n                    &lt;/compilerArgument&gt;\r\n                    &lt;source&gt;11&lt;/source&gt;\r\n                    &lt;target&gt;11&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n```\r\n\r\nAfter I&#39;ve tried to test this annotation by adding it to field in Main class:\r\n\r\n```\r\npublic class Main {\r\n    @ToUpperCaseAnn()\r\n    static String ts = &quot;abs&quot;;\r\n    public static void main(String[] args) {\r\n        System.out.println(ts);\r\n    }\r\n}\r\n```\r\nBut output was in lower case - &quot;abc&quot;\r\n\r\nSo, it seems like my processor class hadn&#39;t been used by compiler at all.\r\n\r\nMy questions are:\r\n1) How can i add processor class to &quot;compiler scope&quot;? I thought @SupportedAnnotationTypes would be enough :)\r\n\r\n2) Will it work even if compiler will use processor class? Like i modify elements but i don&#39;t understand where and how they are modifying :(\r\n```\r\nfor (Element annotatedElement : annotatedElements) {\r\n                annotatedElement.toString().toUpperCase();\r\n            }\r\n```\r\n\r\n\r\n","title":"Simple custom annotation Java","body":"<p>I'd like to create simple custom annotation which would be able to switch class string fields to upper case.\nI've created annotation interface itself:</p>\n<pre><code>@Documented\n@Target(ElementType.FIELD)\n@Inherited\n@Retention(RetentionPolicy.SOURCE)\npublic @interface ToUpperCaseAnn {\n    String info() default &quot;No String value&quot;;\n}\n</code></pre>\n<p>and processor class:</p>\n<pre><code>@SupportedAnnotationTypes(&quot;org.example.ToUpperCaseAnn&quot;)\n@SupportedSourceVersion(SourceVersion.RELEASE_11)\n@AutoService(Processor.class)\npublic class ToUpperCaseAnnProcessor extends AbstractProcessor{\n\n    @Override\n    public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {\n        for (TypeElement annotation : annotations) {\n            Set&lt;? extends Element&gt; annotatedElements = roundEnv.getElementsAnnotatedWith(annotation);\n            for (Element annotatedElement : annotatedElements) {\n                annotatedElement.toString().toUpperCase();\n            }\n        }\n\n        return true;\n    }\n}\n</code></pre>\n<p>And also i've modify pom.xml file:</p>\n<pre><code>&lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.5.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;compilerArgument&gt;\n                        -proc:none\n                    &lt;/compilerArgument&gt;\n                    &lt;source&gt;11&lt;/source&gt;\n                    &lt;target&gt;11&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>After I've tried to test this annotation by adding it to field in Main class:</p>\n<pre><code>public class Main {\n    @ToUpperCaseAnn()\n    static String ts = &quot;abs&quot;;\n    public static void main(String[] args) {\n        System.out.println(ts);\n    }\n}\n</code></pre>\n<p>But output was in lower case - &quot;abc&quot;</p>\n<p>So, it seems like my processor class hadn't been used by compiler at all.</p>\n<p>My questions are:</p>\n<ol>\n<li><p>How can i add processor class to &quot;compiler scope&quot;? I thought @SupportedAnnotationTypes would be enough :)</p>\n</li>\n<li><p>Will it work even if compiler will use processor class? Like i modify elements but i don't understand where and how they are modifying :(</p>\n</li>\n</ol>\n<pre><code>for (Element annotatedElement : annotatedElements) {\n                annotatedElement.toString().toUpperCase();\n            }\n</code></pre>\n"},{"tags":["java","android","eclipse","methods","payment"],"comments":[{"owner":{"account_id":2032926,"reputation":24901,"user_id":1816093,"accept_rate":57,"display_name":"Drew"},"score":0,"creation_date":1450845049,"post_id":18024103,"comment_id":56598254,"body_markdown":"Does anyone think this isn&#39;t spam, see embedded content: http://i.imgur.com/srtvEAN.jpg","body":"Does anyone think this isn&#39;t spam, see embedded content: <a href=\"http://i.imgur.com/srtvEAN.jpg\" rel=\"nofollow noreferrer\">i.imgur.com/srtvEAN.jpg</a>"},{"owner":{"account_id":2032926,"reputation":24901,"user_id":1816093,"accept_rate":57,"display_name":"Drew"},"score":0,"creation_date":1450845134,"post_id":18024103,"comment_id":56598286,"body_markdown":"OP asks question then vanishes","body":"OP asks question then vanishes"}],"answers":[{"tags":[],"owner":{"account_id":1116875,"reputation":434,"user_id":1106024,"display_name":"Ronen Morecki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375635440,"creation_date":1375635440,"answer_id":18045298,"question_id":18024103,"body_markdown":"You are almost there\r\n\r\nWhat you are missing is the call that starts Zooz checkout:\r\n\r\nOn onCheckoutClick, you need to create the intent that contains all the data you would like to pass to Zooz activity (like you did), and then you need to start it.\r\n\r\nYou do it by calling to (after putting all extras on the intent) :\r\nstartActivityForResult(intent, ZooZ_Activity_ID);\r\n\r\nAlso, in the zip file you downloaded, you can find a sample app – ZooZSample – which contains the SDK and the code for how to start it.\r\n","title":"Why won&#39;t the Zooz payment code show up in my Android App?","body":"<p>You are almost there</p>\n\n<p>What you are missing is the call that starts Zooz checkout:</p>\n\n<p>On onCheckoutClick, you need to create the intent that contains all the data you would like to pass to Zooz activity (like you did), and then you need to start it.</p>\n\n<p>You do it by calling to (after putting all extras on the intent) :\nstartActivityForResult(intent, ZooZ_Activity_ID);</p>\n\n<p>Also, in the zip file you downloaded, you can find a sample app – ZooZSample – which contains the SDK and the code for how to start it.</p>\n"}],"owner":{"account_id":1449730,"reputation":7,"user_id":1367020,"display_name":"user1367020"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":537,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1679914529,"creation_date":1375469357,"question_id":18024103,"body_markdown":"I want to integrate Zooz&#39;s payment application with my Android App, however, Zooz will not show up. There are no errors given or stated, but when I run the app on the emulator or my phone it will not show up. The app runs as if the code is not there. I know my question is broad, but with no errors about Zooz given in the log cat and no red x&#39;s, I can&#39;t identify the specific problem. The app does not crash, it just operates as normal. Can someone please help me identify the cause of this, or why Zooz will not show up? I am attempting to use Zooz so items from my menu can be purchased.\r\n\r\nHere is the reference I used to integrate the code. I am very new to Java in general. I placed the SDK libraries and followed the steps and nothing comes up.\r\n\r\nhttps://app.zooz.com/portal/PortalController?cmd=resources\r\n\r\n\r\nThings I have tried:\r\n\r\nI have tried taking out the libraries and deleting all references to Zooz and then placing it back in from the start. I have tried hand writing the code instead of copy pasting from PDF step by step guide. I have checked the log cat for any references to Zooz to no avail, and the app runs on both my emulator and device. I have checked my references library, which when I click on a.class for example it says: The JAR file zooz_iap_1.4.4.6.jar has no source attachment. But it does not come up as an error. Should I try to attach a source? (I haven&#39;t yet.) Again, I am new to Android and I&#39;m unsure of what it means exactly, I don&#39;t want to ruin things indefinitely. I have tried to run the code with the invoice step and without the invoice integration step. I am unsure if it is optional or not, as it does not specify. I have also tried calling Zooz customer service but no one answer&#39;s the office phone nor the mobile phone. Can someone help me to identify the problem?\r\n\r\nHere is the code I am currently using, just in case it is needed for reference.\r\n\r\n    package com.carouseldemo.main;\r\n    \r\n    import android.app.Activity;\r\n    import android.content.Intent;\r\n    \r\n    import android.net.Uri;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.view.ContextMenu;\r\n    import android.view.ContextMenu.ContextMenuInfo;\r\n    import android.view.Menu;\r\n    import android.view.MenuItem;\r\n    import android.view.View.OnClickListener;\r\n    \r\n    import android.view.MenuInflater;\r\n    import android.view.View;\r\n    import android.webkit.WebView;\r\n    import android.widget.ImageView;\r\n    import android.widget.TextView;\r\n    import android.widget.Toast;\r\n    import android.widget.FrameLayout;\r\n    import com.carouseldemo.controls.Carousel;\r\n    import com.carouseldemo.controls.CarouselAdapter;\r\n    import com.carouseldemo.controls.CarouselAdapter.AdapterContextMenuInfo;\r\n    import com.carouseldemo.controls.CarouselAdapter.OnItemClickListener;\r\n    import com.carouseldemo.controls.CarouselAdapter.OnItemSelectedListener;\r\n    import com.carouseldemo.controls.CarouselItem;\r\n    import com.powersourceinternational.main.R;\r\n    import com.zooz.android.lib.CheckoutActivity;\r\n    \r\n    public class MainActivity extends Activity {\r\n    \r\n    \tprivate static final String TAG = null;\r\n    \tprivate static final int ZooZ_Activity_ID = 0;\r\n    \r\n    \t@Override\r\n    \tpublic boolean onContextItemSelected(MenuItem item) {\r\n    \t\tint id = item.getItemId(); // you know which menu is clicked\r\n    \t\tint imageId = -1;\r\n    \t\tswitch (id) {\r\n    \t\tcase 1:\r\n    \t\t\timageId = R.drawable.productone;\r\n    \t\t\tbreak;\r\n    \t\tcase 2:\r\n    \t\t\timageId = R.drawable.product2;\r\n    \t\t\tbreak;\r\n    \t\tcase 3:\r\n    \t\t\timageId = R.drawable.product1;\r\n    \t\t\tbreak;\r\n    \t\tcase 4:\r\n    \t\t\timageId = R.drawable.product3;\r\n    \t\t\tbreak;\r\n    \t\tcase 5:\r\n    \t\t\timageId = R.drawable.product4;\r\n    \t\t\tbreak;\r\n    \t\tcase 6:\r\n    \t\t\timageId = R.drawable.product5;\r\n    \t\t\tbreak;\r\n    \t\tcase 7:\r\n    \t\t\timageId = R.drawable.product6;\r\n    \t\t\tbreak;\r\n    \t\tcase 8:\r\n    \t\t\timageId = R.drawable.product7;\r\n    \t\t\tbreak;\r\n    \t\tcase 9:\r\n    \t\t\timageId = R.drawable.product8;\r\n    \t\t\tbreak;\r\n    \t\tcase 90:\r\n    \t\t\timageId = R.drawable.product9andhalf;\r\n    \t\t\tbreak;\r\n    \t\tcase 91:\r\n    \t\t\timageId = R.drawable.product10;\r\n    \t\t\tbreak;\r\n    \t\tcase 10:\r\n    \t\t\timageId = R.drawable.chevy1;\r\n    \t\t\tbreak;\r\n    \t\tcase 11:\r\n    \t\t\timageId = R.drawable.nissanleaf;\r\n    \t\t\tbreak;\r\n    \t\tcase 12:\r\n    \t\t\timageId = R.drawable.honda;\r\n    \t\t\tbreak;\r\n    \t\tcase 13:\r\n    \t\t\timageId = R.drawable.prius;\r\n    \t\t\tbreak;\r\n    \t\tcase 14:\r\n    \t\t\timageId = R.drawable.tesla;\r\n    \t\t\tbreak;\r\n    \t\tcase 15:\r\n    \t\t\timageId = R.drawable.porsche;\r\n    \t\t\tbreak;\r\n    \t\tcase 16:\r\n    \t\t\timageId = R.drawable.fordfocus;\r\n    \t\t\tbreak;\r\n    \t\tcase 166:\r\n    \t\t\timageId = R.drawable.bmw;\r\n    \t\t\tbreak;\r\n    \t\tcase 167:\r\n    \t\t\timageId = R.drawable.fordc;\r\n    \t\t\tbreak;\r\n    \t\tcase 168:\r\n    \t\t\timageId = R.drawable.fisker;\r\n    \t\t\tbreak;\r\n    \r\n    \t\t// ...the same for the other ids\r\n    \t\t}\r\n    \t\tImageView popup = new ImageView(this);\r\n    \t\tpopup.setOnClickListener(new OnClickListener() {\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void onClick(View v) {\r\n    \t\t\t\t((FrameLayout) findViewById(android.R.id.content))\r\n    \t\t\t\t\t\t.removeView(v);\r\n    \t\t\t}\r\n    \t\t});\r\n    \t\t// set the image\r\n    \t\tpopup.setImageResource(imageId);\r\n    \t\t((FrameLayout) findViewById(android.R.id.content)).addView(popup);\r\n    \t\treturn super.onContextItemSelected(item);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean onCreateOptionsMenu(Menu menu) {\r\n    \t\tsuper.onCreateOptionsMenu(menu);\r\n    \t\tMenuInflater inflater = getMenuInflater();\r\n    \t\tinflater.inflate(R.menu.testmenu2, menu);\r\n    \t\t// your code...\r\n    \t\treturn true;\r\n    \r\n    \t}\r\n    \t\r\n    \tpublic void onCheckoutClick(View v) {\r\n    \t\t// create new intent CheckoutActivity\r\n    \t\tIntent intent = new Intent(this, CheckoutActivity.class);\r\n    \t\t// supply app-key on the intent\r\n    \t\tintent.putExtra(CheckoutActivity.\r\n    \t\tZOOZ_APP_KEY, &quot;b8d0ff11-c60b-400d-82a0-0ed694e238b0&quot;);\r\n    \t\t// supply transaction details (amount, currency)\r\n    \t\tintent.putExtra(CheckoutActivity.\r\n    \t\tZOOZ_AMOUNT, 33.5);\r\n    \t\tintent.putExtra(CheckoutActivity.\r\n    \t\tZOOZ_CURRENCY_CODE, &quot;USD&quot;);\r\n    \t\t// supply environment mode (sandbox or production)\r\n    \t\tintent.putExtra(CheckoutActivity.\r\n    \t\tZOOZ_IS_SANDBOX, true);\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tprotected void onActivityResult(int requestCode, int resultCode, Intent\r\n    \tdata) {\r\n    \tif (requestCode == ZooZ_Activity_ID) {\r\n    \tswitch (resultCode) {\r\n    \tcase Activity.RESULT_OK:\r\n    \tLog.i(TAG, &quot;Succefuly paid. Your transaction id is: &quot; +\r\n    \tdata.getStringExtra(CheckoutActivity.\r\n    \tZOOZ_TRANSACTION_ID));\r\n    \tbreak;\r\n    \tcase Activity.RESULT_CANCELED:\r\n    \tif (data != null)\r\n    \tLog.e(TAG, &quot;Error, cannot complete payment with ZooZ.&quot;  + &quot;Error code: &quot; +\r\n    \tdata.getIntExtra(CheckoutActivity.ZOOZ_ERROR_CODE\r\n    \t, 0) + &quot;; Error Message: &quot; +\r\n    \tdata.getStringExtra(CheckoutActivity.ZOOZ_ERROR_MSG));\r\n    \tbreak; \r\n    \t}\r\n    \t}\r\n    \t}\r\n    \t\r\n    \t\r\n    \t\r\n    \t@Override\r\n    \tpublic boolean onOptionsItemSelected(MenuItem item) {\r\n    \t\tWebView webView;\r\n    \t\t// int id = item.getItemId();\r\n    \t\t// int imageId = -1;\r\n    \t\tswitch (item.getItemId()) {\r\n    \r\n    \t\tcase R.id.item1:\r\n    \r\n    \t\t\tIntent browserIntent = new Intent(Intent.ACTION_VIEW,\r\n    \t\t\t\t\tUri.parse(&quot;http://www.powersourceinternational.com/&quot;));\r\n    \t\t\tstartActivity(browserIntent);\r\n    \r\n    \t\t\treturn true;\r\n    \r\n    \t\tcase R.id.item2:\r\n    \t\t\twebView = (WebView) findViewById(R.id.webview);\r\n    \t\t\twebView.getSettings().setJavaScriptEnabled(true);\r\n    \t\t\twebView.loadUrl(&quot;https://www.facebook.com/PowerSourceInternational&quot;);\r\n    \r\n    \t\t\t// imageId = R.drawable.hippo;\r\n    \t\t\t// WebView wv2 = (WebView) findViewById(R.id.webview);\r\n    \t\t\t// wv2.loadUrl(&quot;file:///android_asset/resume_page2.html&quot;);\r\n    \t\t\treturn true;\r\n    \r\n    \t\tcase R.id.item3:\r\n    \t\t\twebView = (WebView) findViewById(R.id.webview);\r\n    \t\t\twebView.getSettings().setJavaScriptEnabled(true);\r\n    \t\t\twebView.loadUrl(&quot;https://twitter.com/EnergyPSI&quot;);\r\n    \r\n    \t\t\treturn true;\r\n    \r\n    \t\tcase R.id.item4:\r\n    \t\t\twebView = (WebView) findViewById(R.id.webview);\r\n    \t\t\twebView.getSettings().setJavaScriptEnabled(true);\r\n    \t\t\twebView.loadUrl(&quot;http://pinterest.com/energypsi/&quot;);\r\n    \r\n    \t\t\treturn true;\r\n    \r\n    \t\t}\r\n    \r\n    \t\treturn false;\r\n    \t}\r\n    \r\n    \t// true if you want the menu to be displayed; false otherwise\r\n    \r\n    \t@Override\r\n    \tpublic void onCreateContextMenu(ContextMenu menu, View v,\r\n    \t\t\tContextMenuInfo menuInfo) {\r\n    \t\t// Just prepare ourself for unexpected arguments...\r\n    \r\n    \t\tif (menuInfo == null) {\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\tif (!(menuInfo instanceof AdapterContextMenuInfo)) {\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \r\n    \t\tAdapterContextMenuInfo mi = (AdapterContextMenuInfo) menuInfo;\r\n    \t\t// to identify the view according to this case values you could assing\r\n    \t\t// ids like this:\r\n    \t\t// case 0:\r\n    \t\t// menu.add(Menu.NONE, 1, Menu.NONE, &quot;menu title&quot;);\r\n    \t\t// menu.add(Menu.NONE, 2, Menu.NONE, &quot;menu title&quot;);\r\n    \t\t// menu.add(Menu.NONE, 3, Menu.NONE, &quot;menu title&quot;);\r\n    \t\t// menu.add(Menu.NONE, 4, Menu.NONE, &quot;menu title&quot;);\r\n    \t\t// etc\r\n    \t\t// case 1:\r\n    \t\t// menu.add(Menu.NONE, 1001, Menu.NONE, &quot;menu title&quot;);\r\n    \t\t// menu.add(Menu.NONE, 1002, Menu.NONE, &quot;menu title&quot;);\r\n    \t\t// menu.add(Menu.NONE, 1003, Menu.NONE, &quot;menu title&quot;);\r\n    \t\t// menu.add(Menu.NONE, 1004, Menu.NONE, &quot;menu title&quot;);\r\n    \t\t// etc\r\n    \t\t// case 2:\r\n    \t\t// menu.add(Menu.NONE, 2001, Menu.NONE, &quot;menu title&quot;);\r\n    \t\t// menu.add(Menu.NONE, 2002, Menu.NONE, &quot;menu title&quot;);\r\n    \t\t// etc\r\n    \t\t// this way the ids will be unique and in the onContextItemSelected\r\n    \t\t// method you&#39;ll be able to\r\n    \t\t// identify the current case(0, 1, 2, 3, 4, 5) and the id clicked\r\n    \t\tswitch (mi.position) {\r\n    \t\tcase 0:\r\n    \t\t\tmenu.add(Menu.NONE, 0, Menu.NONE, &quot;Products&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 1, Menu.NONE, &quot;EV2430WS Wall   $1200.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 2, Menu.NONE, &quot;EV230WSR 3R Wall $1800.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 3, Menu.NONE, &quot;EV Parking Sign $65.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 4, Menu.NONE, &quot;Pedestal 1 Outdoor $3000.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 5, Menu.NONE, &quot;Pedestal 2 Outdoor $4600.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 6, Menu.NONE, &quot;CT500 Wall Mount $2665.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 7, Menu.NONE, &quot;CT2020 Family $6500.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 8, Menu.NONE,\r\n    \t\t\t\t\t&quot;DC Fast Charge CHAdeMO $35000.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 9, Menu.NONE,\r\n    \t\t\t\t\t&quot;The Power Share: Call for pricing&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 90, Menu.NONE, &quot;Solar Canopy one-car $13500.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 91, Menu.NONE, &quot;Solar Canopy Two car $18500.00&quot;);\r\n    \t\t\tbreak;\r\n    \t\tcase 1:\r\n    \t\t\tmenu.add(Menu.NONE, 900, Menu.NONE, &quot;Top Ten Fuel Efficient Cars&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 10, Menu.NONE, &quot;Chevrolet Volt&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 11, Menu.NONE, &quot;Nissan Leaf&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 12, Menu.NONE, &quot;Honda&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 13, Menu.NONE, &quot;Toyota Prius&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 14, Menu.NONE, &quot;Tesla&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 15, Menu.NONE, &quot;Porsche&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 16, Menu.NONE, &quot;Ford Focus&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 166, Menu.NONE, &quot;BMW&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 167, Menu.NONE, &quot;Ford C&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 168, Menu.NONE, &quot;Fisker&quot;);\r\n    \t\t\tbreak;\r\n    \t\tcase 2:\r\n    \t\t\tmenu.add(Menu.NONE, 17, Menu.NONE, &quot;About Us&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 18, Menu.NONE, &quot;Our solution includes the following:&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 19, Menu.NONE, &quot;Comprehensive Energy Assessment&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 20, Menu.NONE, &quot;Energy Sustainability Strategy&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 21, Menu.NONE, &quot;Energy Solutions Design&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 22, Menu.NONE, &quot;Solutions Implementation&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 23, Menu.NONE, &quot;Savings Verification Process&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 24, Menu.NONE, &quot;Engery Solutions Development&quot;);\r\n    \t\t\tbreak;\r\n    \t\tcase 3:\r\n    \t\t\tmenu.add(Menu.NONE, 25, Menu.NONE, &quot;Consulting&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 26, Menu.NONE, &quot;Residential Site Survey: $250&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 27, Menu.NONE, &quot;Residential Energy Consulting: $250&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 28, Menu.NONE, &quot;Commercial Consulting: $1000&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 29, Menu.NONE, &quot;Energy Efficiency Site Audit: $500&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 30, Menu.NONE, &quot;Electric Vehicle Consulting: $250&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 31, Menu.NONE, &quot;Commercial Vehicle Consulting $500&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 32, Menu.NONE, &quot;Industrial Battery Bank: $500&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 321, Menu.NONE, &quot;EVSE Inspection $75.00/hr. $150 Fee&quot;);\r\n    \t\t\tbreak;\r\n    \t\tcase 4:\r\n    \t\t\tmenu.add(Menu.NONE, 33, Menu.NONE, &quot;Leasing&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 34, Menu.NONE, &quot;Single Wall Mounted Unit&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 35, Menu.NONE, &quot;Unit ID: EV230WSR&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 36, Menu.NONE, &quot;2 Year Plan: $148.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 37, Menu.NONE, &quot;3 Year Plan: $103.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 38, Menu.NONE, &quot;5 Year Plan: $78.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 39, Menu.NONE, &quot;Single Bollard Mounted Unit&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 40, Menu.NONE, &quot;Unit ID: EV230PSR&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 401, Menu.NONE, &quot;2 Year Plan: $242.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 403, Menu.NONE, &quot;3 Year Plan: $168.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 404, Menu.NONE, &quot;5 Year Plan: $115.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 405, Menu.NONE, &quot;Double Bollard Mounted Unit&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 406, Menu.NONE, &quot;Unit ID: EV230PDR&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 407, Menu.NONE, &quot;2 Year Plan: $315.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 408, Menu.NONE, &quot;3 Year Plan: $243.00&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 409, Menu.NONE, &quot;5 Year Plan: $166.00&quot;);\r\n    \t\t\tbreak;\r\n    \t\tcase 5:\r\n    \t\t\tmenu.add(Menu.NONE, 41, Menu.NONE, &quot;Contact Us&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 42, Menu.NONE, &quot;Phone: 678-951-0715&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 43, Menu.NONE,\r\n    \t\t\t\t\t&quot;Address: 6065 Roswell Road, Suite 500, Atlanta, Georgia 30328 &quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 44, Menu.NONE,\r\n    \t\t\t\t\t&quot;Website: Powersourceinternational.com&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 45, Menu.NONE,\r\n    \t\t\t\t\t&quot;Email: powersourcevids@gmail.com &quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 46, Menu.NONE, &quot;Fax: 678-951-8993&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 47, Menu.NONE,\r\n    \t\t\t\t\t&quot;Facebook: https://www.facebook.com/PowerSourceInternational&quot;);\r\n    \t\t\tmenu.add(Menu.NONE, 48, Menu.NONE,\r\n    \t\t\t\t\t&quot;Linkedin: http://www.linkedin.com/company/power-source-international&quot;);\r\n    \t\t\tbreak;\r\n    \t\tdefault:\r\n    \t\t\tbreak;\r\n    \t\t}\r\n    \t\tsuper.onCreateContextMenu(menu, v, menuInfo);\r\n    \t}\r\n    \r\n    \t/** Called when the activity is first created. */\r\n    \t@Override\r\n    \tpublic void onCreate(Bundle savedInstanceState) {\r\n    \t\tsuper.onCreate(savedInstanceState);\r\n    \t\tsetContentView(R.layout.main);\r\n    \r\n    \t\tfinal Carousel carousel = (Carousel) findViewById(R.id.carousel);\r\n    \t\tcarousel.setOnItemClickListener(new OnItemClickListener() {\r\n    \r\n    \t\t\tpublic void onItemClick(CarouselAdapter&lt;?&gt; parent, View view,\r\n    \t\t\t\t\tint position, long id) {\r\n    \t\t\t\tCarouselItem item = (CarouselItem) parent.getChildAt(position);\r\n    \r\n    \t\t\t\t// HERE: Force context menu\r\n    \t\t\t\tcarousel.showContextMenuForChild(item);\r\n    \t\t\t\tToast.makeText(\r\n    \t\t\t\t\t\tMainActivity.this,\r\n    \t\t\t\t\t\tString.format(&quot;%s has been clicked&quot;,\r\n    \t\t\t\t\t\t\t\t((CarouselItem) parent.getChildAt(position))\r\n    \t\t\t\t\t\t\t\t\t\t.getName()), Toast.LENGTH_SHORT).show();\r\n    \r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void onCreateContextMenu(ContextMenu menu, View v,\r\n    \t\t\t\t\tContextMenuInfo menuInfo) {\r\n    \r\n    \t\t\t\t// TODO Auto-generated method stub\r\n    \r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic boolean onCreateOptionsMenu(Menu menu) {\r\n    \t\t\t\tMenuInflater inflater = getMenuInflater();\r\n    \t\t\t\tinflater.inflate(R.menu.testmenu2, menu);\r\n    \r\n    \t\t\t\t// TODO Auto-generated method stub\r\n    \t\t\t\treturn true;\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic boolean onContextItemSelected(MenuItem item) {\r\n    \t\t\t\t// TODO Auto-generated method stub\r\n    \t\t\t\treturn false;\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic boolean onOptionsItemSelected(MenuItem item) {\r\n    \t\t\t\t// TODO Auto-generated method stub\r\n    \t\t\t\treturn false;\r\n    \t\t\t}\r\n    \r\n    \t\t});\r\n    \r\n    \t\tcarousel.setOnItemSelectedListener(new OnItemSelectedListener() {\r\n    \r\n    \t\t\tpublic void onItemSelected(CarouselAdapter&lt;?&gt; parent, View view,\r\n    \t\t\t\t\tint position, long id) {\r\n    \r\n    \t\t\t\tfinal TextView txt = (TextView) (findViewById(R.id.selected_item));\r\n    \r\n    \t\t\t\tswitch (position) {\r\n    \t\t\t\tcase 0:\r\n    \t\t\t\t\ttxt.setText(&quot;The PSI Process was developed as a result of consulting methodologies and infrastructure training with companies like General Electric, MCI and IBM. The executives at PSI have over 80 years of combined experience in working with fortune 50 companies to deliver on time solutions that reduce cost. Our staff now has the ability to utilize more than two dozen proven approaches and technologies to provide long-term savings of up to 30% or more with fast project paybacks. That’s a promise we back up with an insurance policy underwritten by one of the world’s oldest A+ rated insurance companies to remove all financial risk from your decision to invest with our company.&quot;);\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tcase 1:\r\n    \t\t\t\t\ttxt.setText(&quot;In an age when Energy-based Buzz-words abound, PSI works to make it simple as well as profitable for you our customer. All throughout our customer&#39;s environments, PSI efforts have produced positive results often beyond expectations. Whether you&#39;re looking at Materials environment, Public Installations, the Lodging Industry or Office Complex installations, PSI can effect cost saving benefits that will truly enhance your bottom line! Because each business is different and unique, let us come and show you how we can make our solutions work for you!&quot;);\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tcase 2:\r\n    \t\t\t\t\ttxt.setText(&quot;Power Source International (PSI) is setting the pace for engineering and environmental companies for you, our customer. PSI evaluates each and every facet of your site, focused on providing energy sustainability solutions. By looking at all of the different areas, we are not trying for a “Home Run” but several smaller hits that provides you with an integrated winning vehicle to increase your bottom line &amp; your long-term competitive edge.&quot;);\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tcase 3:\r\n    \t\t\t\t\ttxt.setText(&quot;PSI’s Executive Team has a broad based set of skills and experiences around consulting and implementation for industries in numerous sectors, including manufacturing, processing, transportation, healthcare, food and beverage,  hospitality, retail and government agencies. The Company has also teamed with leading companies in the solar, wind and energy management arena. The team is further supported by an internal Board of Advisors formed by professionals from research, universities and the private sector.&quot;);\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tcase 4:\r\n    \t\t\t\t\ttxt.setText(&quot;Want to install an EV charging solution but don’t want to pay for it all at once? No problem! We have leasing options to fit almost every budget.&quot;);\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tcase 5:\r\n    \t\t\t\t\ttxt.setText(&quot;If you would like more information from PSI, please fill in the form. For immediate assistance, please contact us at 678-951-0715.&quot;);\r\n    \r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t}\r\n    \r\n    \t\t\tpublic void onNothingSelected(CarouselAdapter&lt;?&gt; parent) {\r\n    \t\t\t}\r\n    \r\n    \t\t});\r\n    \r\n    \t\tregisterForContextMenu(carousel);\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Why won&#39;t the Zooz payment code show up in my Android App?","body":"<p>I want to integrate Zooz's payment application with my Android App, however, Zooz will not show up. There are no errors given or stated, but when I run the app on the emulator or my phone it will not show up. The app runs as if the code is not there. I know my question is broad, but with no errors about Zooz given in the log cat and no red x's, I can't identify the specific problem. The app does not crash, it just operates as normal. Can someone please help me identify the cause of this, or why Zooz will not show up? I am attempting to use Zooz so items from my menu can be purchased.</p>\n\n<p>Here is the reference I used to integrate the code. I am very new to Java in general. I placed the SDK libraries and followed the steps and nothing comes up.</p>\n\n<p><a href=\"https://app.zooz.com/portal/PortalController?cmd=resources\" rel=\"nofollow\">https://app.zooz.com/portal/PortalController?cmd=resources</a></p>\n\n<p>Things I have tried:</p>\n\n<p>I have tried taking out the libraries and deleting all references to Zooz and then placing it back in from the start. I have tried hand writing the code instead of copy pasting from PDF step by step guide. I have checked the log cat for any references to Zooz to no avail, and the app runs on both my emulator and device. I have checked my references library, which when I click on a.class for example it says: The JAR file zooz_iap_1.4.4.6.jar has no source attachment. But it does not come up as an error. Should I try to attach a source? (I haven't yet.) Again, I am new to Android and I'm unsure of what it means exactly, I don't want to ruin things indefinitely. I have tried to run the code with the invoice step and without the invoice integration step. I am unsure if it is optional or not, as it does not specify. I have also tried calling Zooz customer service but no one answer's the office phone nor the mobile phone. Can someone help me to identify the problem?</p>\n\n<p>Here is the code I am currently using, just in case it is needed for reference.</p>\n\n<pre><code>package com.carouseldemo.main;\n\nimport android.app.Activity;\nimport android.content.Intent;\n\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.ContextMenu;\nimport android.view.ContextMenu.ContextMenuInfo;\nimport android.view.Menu;\nimport android.view.MenuItem;\nimport android.view.View.OnClickListener;\n\nimport android.view.MenuInflater;\nimport android.view.View;\nimport android.webkit.WebView;\nimport android.widget.ImageView;\nimport android.widget.TextView;\nimport android.widget.Toast;\nimport android.widget.FrameLayout;\nimport com.carouseldemo.controls.Carousel;\nimport com.carouseldemo.controls.CarouselAdapter;\nimport com.carouseldemo.controls.CarouselAdapter.AdapterContextMenuInfo;\nimport com.carouseldemo.controls.CarouselAdapter.OnItemClickListener;\nimport com.carouseldemo.controls.CarouselAdapter.OnItemSelectedListener;\nimport com.carouseldemo.controls.CarouselItem;\nimport com.powersourceinternational.main.R;\nimport com.zooz.android.lib.CheckoutActivity;\n\npublic class MainActivity extends Activity {\n\n    private static final String TAG = null;\n    private static final int ZooZ_Activity_ID = 0;\n\n    @Override\n    public boolean onContextItemSelected(MenuItem item) {\n        int id = item.getItemId(); // you know which menu is clicked\n        int imageId = -1;\n        switch (id) {\n        case 1:\n            imageId = R.drawable.productone;\n            break;\n        case 2:\n            imageId = R.drawable.product2;\n            break;\n        case 3:\n            imageId = R.drawable.product1;\n            break;\n        case 4:\n            imageId = R.drawable.product3;\n            break;\n        case 5:\n            imageId = R.drawable.product4;\n            break;\n        case 6:\n            imageId = R.drawable.product5;\n            break;\n        case 7:\n            imageId = R.drawable.product6;\n            break;\n        case 8:\n            imageId = R.drawable.product7;\n            break;\n        case 9:\n            imageId = R.drawable.product8;\n            break;\n        case 90:\n            imageId = R.drawable.product9andhalf;\n            break;\n        case 91:\n            imageId = R.drawable.product10;\n            break;\n        case 10:\n            imageId = R.drawable.chevy1;\n            break;\n        case 11:\n            imageId = R.drawable.nissanleaf;\n            break;\n        case 12:\n            imageId = R.drawable.honda;\n            break;\n        case 13:\n            imageId = R.drawable.prius;\n            break;\n        case 14:\n            imageId = R.drawable.tesla;\n            break;\n        case 15:\n            imageId = R.drawable.porsche;\n            break;\n        case 16:\n            imageId = R.drawable.fordfocus;\n            break;\n        case 166:\n            imageId = R.drawable.bmw;\n            break;\n        case 167:\n            imageId = R.drawable.fordc;\n            break;\n        case 168:\n            imageId = R.drawable.fisker;\n            break;\n\n        // ...the same for the other ids\n        }\n        ImageView popup = new ImageView(this);\n        popup.setOnClickListener(new OnClickListener() {\n\n            @Override\n            public void onClick(View v) {\n                ((FrameLayout) findViewById(android.R.id.content))\n                        .removeView(v);\n            }\n        });\n        // set the image\n        popup.setImageResource(imageId);\n        ((FrameLayout) findViewById(android.R.id.content)).addView(popup);\n        return super.onContextItemSelected(item);\n    }\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        super.onCreateOptionsMenu(menu);\n        MenuInflater inflater = getMenuInflater();\n        inflater.inflate(R.menu.testmenu2, menu);\n        // your code...\n        return true;\n\n    }\n\n    public void onCheckoutClick(View v) {\n        // create new intent CheckoutActivity\n        Intent intent = new Intent(this, CheckoutActivity.class);\n        // supply app-key on the intent\n        intent.putExtra(CheckoutActivity.\n        ZOOZ_APP_KEY, \"b8d0ff11-c60b-400d-82a0-0ed694e238b0\");\n        // supply transaction details (amount, currency)\n        intent.putExtra(CheckoutActivity.\n        ZOOZ_AMOUNT, 33.5);\n        intent.putExtra(CheckoutActivity.\n        ZOOZ_CURRENCY_CODE, \"USD\");\n        // supply environment mode (sandbox or production)\n        intent.putExtra(CheckoutActivity.\n        ZOOZ_IS_SANDBOX, true);\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent\n    data) {\n    if (requestCode == ZooZ_Activity_ID) {\n    switch (resultCode) {\n    case Activity.RESULT_OK:\n    Log.i(TAG, \"Succefuly paid. Your transaction id is: \" +\n    data.getStringExtra(CheckoutActivity.\n    ZOOZ_TRANSACTION_ID));\n    break;\n    case Activity.RESULT_CANCELED:\n    if (data != null)\n    Log.e(TAG, \"Error, cannot complete payment with ZooZ.\"  + \"Error code: \" +\n    data.getIntExtra(CheckoutActivity.ZOOZ_ERROR_CODE\n    , 0) + \"; Error Message: \" +\n    data.getStringExtra(CheckoutActivity.ZOOZ_ERROR_MSG));\n    break; \n    }\n    }\n    }\n\n\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        WebView webView;\n        // int id = item.getItemId();\n        // int imageId = -1;\n        switch (item.getItemId()) {\n\n        case R.id.item1:\n\n            Intent browserIntent = new Intent(Intent.ACTION_VIEW,\n                    Uri.parse(\"http://www.powersourceinternational.com/\"));\n            startActivity(browserIntent);\n\n            return true;\n\n        case R.id.item2:\n            webView = (WebView) findViewById(R.id.webview);\n            webView.getSettings().setJavaScriptEnabled(true);\n            webView.loadUrl(\"https://www.facebook.com/PowerSourceInternational\");\n\n            // imageId = R.drawable.hippo;\n            // WebView wv2 = (WebView) findViewById(R.id.webview);\n            // wv2.loadUrl(\"file:///android_asset/resume_page2.html\");\n            return true;\n\n        case R.id.item3:\n            webView = (WebView) findViewById(R.id.webview);\n            webView.getSettings().setJavaScriptEnabled(true);\n            webView.loadUrl(\"https://twitter.com/EnergyPSI\");\n\n            return true;\n\n        case R.id.item4:\n            webView = (WebView) findViewById(R.id.webview);\n            webView.getSettings().setJavaScriptEnabled(true);\n            webView.loadUrl(\"http://pinterest.com/energypsi/\");\n\n            return true;\n\n        }\n\n        return false;\n    }\n\n    // true if you want the menu to be displayed; false otherwise\n\n    @Override\n    public void onCreateContextMenu(ContextMenu menu, View v,\n            ContextMenuInfo menuInfo) {\n        // Just prepare ourself for unexpected arguments...\n\n        if (menuInfo == null) {\n            return;\n        }\n        if (!(menuInfo instanceof AdapterContextMenuInfo)) {\n            return;\n        }\n\n        AdapterContextMenuInfo mi = (AdapterContextMenuInfo) menuInfo;\n        // to identify the view according to this case values you could assing\n        // ids like this:\n        // case 0:\n        // menu.add(Menu.NONE, 1, Menu.NONE, \"menu title\");\n        // menu.add(Menu.NONE, 2, Menu.NONE, \"menu title\");\n        // menu.add(Menu.NONE, 3, Menu.NONE, \"menu title\");\n        // menu.add(Menu.NONE, 4, Menu.NONE, \"menu title\");\n        // etc\n        // case 1:\n        // menu.add(Menu.NONE, 1001, Menu.NONE, \"menu title\");\n        // menu.add(Menu.NONE, 1002, Menu.NONE, \"menu title\");\n        // menu.add(Menu.NONE, 1003, Menu.NONE, \"menu title\");\n        // menu.add(Menu.NONE, 1004, Menu.NONE, \"menu title\");\n        // etc\n        // case 2:\n        // menu.add(Menu.NONE, 2001, Menu.NONE, \"menu title\");\n        // menu.add(Menu.NONE, 2002, Menu.NONE, \"menu title\");\n        // etc\n        // this way the ids will be unique and in the onContextItemSelected\n        // method you'll be able to\n        // identify the current case(0, 1, 2, 3, 4, 5) and the id clicked\n        switch (mi.position) {\n        case 0:\n            menu.add(Menu.NONE, 0, Menu.NONE, \"Products\");\n            menu.add(Menu.NONE, 1, Menu.NONE, \"EV2430WS Wall   $1200.00\");\n            menu.add(Menu.NONE, 2, Menu.NONE, \"EV230WSR 3R Wall $1800.00\");\n            menu.add(Menu.NONE, 3, Menu.NONE, \"EV Parking Sign $65.00\");\n            menu.add(Menu.NONE, 4, Menu.NONE, \"Pedestal 1 Outdoor $3000.00\");\n            menu.add(Menu.NONE, 5, Menu.NONE, \"Pedestal 2 Outdoor $4600.00\");\n            menu.add(Menu.NONE, 6, Menu.NONE, \"CT500 Wall Mount $2665.00\");\n            menu.add(Menu.NONE, 7, Menu.NONE, \"CT2020 Family $6500.00\");\n            menu.add(Menu.NONE, 8, Menu.NONE,\n                    \"DC Fast Charge CHAdeMO $35000.00\");\n            menu.add(Menu.NONE, 9, Menu.NONE,\n                    \"The Power Share: Call for pricing\");\n            menu.add(Menu.NONE, 90, Menu.NONE, \"Solar Canopy one-car $13500.00\");\n            menu.add(Menu.NONE, 91, Menu.NONE, \"Solar Canopy Two car $18500.00\");\n            break;\n        case 1:\n            menu.add(Menu.NONE, 900, Menu.NONE, \"Top Ten Fuel Efficient Cars\");\n            menu.add(Menu.NONE, 10, Menu.NONE, \"Chevrolet Volt\");\n            menu.add(Menu.NONE, 11, Menu.NONE, \"Nissan Leaf\");\n            menu.add(Menu.NONE, 12, Menu.NONE, \"Honda\");\n            menu.add(Menu.NONE, 13, Menu.NONE, \"Toyota Prius\");\n            menu.add(Menu.NONE, 14, Menu.NONE, \"Tesla\");\n            menu.add(Menu.NONE, 15, Menu.NONE, \"Porsche\");\n            menu.add(Menu.NONE, 16, Menu.NONE, \"Ford Focus\");\n            menu.add(Menu.NONE, 166, Menu.NONE, \"BMW\");\n            menu.add(Menu.NONE, 167, Menu.NONE, \"Ford C\");\n            menu.add(Menu.NONE, 168, Menu.NONE, \"Fisker\");\n            break;\n        case 2:\n            menu.add(Menu.NONE, 17, Menu.NONE, \"About Us\");\n            menu.add(Menu.NONE, 18, Menu.NONE, \"Our solution includes the following:\");\n            menu.add(Menu.NONE, 19, Menu.NONE, \"Comprehensive Energy Assessment\");\n            menu.add(Menu.NONE, 20, Menu.NONE, \"Energy Sustainability Strategy\");\n            menu.add(Menu.NONE, 21, Menu.NONE, \"Energy Solutions Design\");\n            menu.add(Menu.NONE, 22, Menu.NONE, \"Solutions Implementation\");\n            menu.add(Menu.NONE, 23, Menu.NONE, \"Savings Verification Process\");\n            menu.add(Menu.NONE, 24, Menu.NONE, \"Engery Solutions Development\");\n            break;\n        case 3:\n            menu.add(Menu.NONE, 25, Menu.NONE, \"Consulting\");\n            menu.add(Menu.NONE, 26, Menu.NONE, \"Residential Site Survey: $250\");\n            menu.add(Menu.NONE, 27, Menu.NONE, \"Residential Energy Consulting: $250\");\n            menu.add(Menu.NONE, 28, Menu.NONE, \"Commercial Consulting: $1000\");\n            menu.add(Menu.NONE, 29, Menu.NONE, \"Energy Efficiency Site Audit: $500\");\n            menu.add(Menu.NONE, 30, Menu.NONE, \"Electric Vehicle Consulting: $250\");\n            menu.add(Menu.NONE, 31, Menu.NONE, \"Commercial Vehicle Consulting $500\");\n            menu.add(Menu.NONE, 32, Menu.NONE, \"Industrial Battery Bank: $500\");\n            menu.add(Menu.NONE, 321, Menu.NONE, \"EVSE Inspection $75.00/hr. $150 Fee\");\n            break;\n        case 4:\n            menu.add(Menu.NONE, 33, Menu.NONE, \"Leasing\");\n            menu.add(Menu.NONE, 34, Menu.NONE, \"Single Wall Mounted Unit\");\n            menu.add(Menu.NONE, 35, Menu.NONE, \"Unit ID: EV230WSR\");\n            menu.add(Menu.NONE, 36, Menu.NONE, \"2 Year Plan: $148.00\");\n            menu.add(Menu.NONE, 37, Menu.NONE, \"3 Year Plan: $103.00\");\n            menu.add(Menu.NONE, 38, Menu.NONE, \"5 Year Plan: $78.00\");\n            menu.add(Menu.NONE, 39, Menu.NONE, \"Single Bollard Mounted Unit\");\n            menu.add(Menu.NONE, 40, Menu.NONE, \"Unit ID: EV230PSR\");\n            menu.add(Menu.NONE, 401, Menu.NONE, \"2 Year Plan: $242.00\");\n            menu.add(Menu.NONE, 403, Menu.NONE, \"3 Year Plan: $168.00\");\n            menu.add(Menu.NONE, 404, Menu.NONE, \"5 Year Plan: $115.00\");\n            menu.add(Menu.NONE, 405, Menu.NONE, \"Double Bollard Mounted Unit\");\n            menu.add(Menu.NONE, 406, Menu.NONE, \"Unit ID: EV230PDR\");\n            menu.add(Menu.NONE, 407, Menu.NONE, \"2 Year Plan: $315.00\");\n            menu.add(Menu.NONE, 408, Menu.NONE, \"3 Year Plan: $243.00\");\n            menu.add(Menu.NONE, 409, Menu.NONE, \"5 Year Plan: $166.00\");\n            break;\n        case 5:\n            menu.add(Menu.NONE, 41, Menu.NONE, \"Contact Us\");\n            menu.add(Menu.NONE, 42, Menu.NONE, \"Phone: 678-951-0715\");\n            menu.add(Menu.NONE, 43, Menu.NONE,\n                    \"Address: 6065 Roswell Road, Suite 500, Atlanta, Georgia 30328 \");\n            menu.add(Menu.NONE, 44, Menu.NONE,\n                    \"Website: Powersourceinternational.com\");\n            menu.add(Menu.NONE, 45, Menu.NONE,\n                    \"Email: powersourcevids@gmail.com \");\n            menu.add(Menu.NONE, 46, Menu.NONE, \"Fax: 678-951-8993\");\n            menu.add(Menu.NONE, 47, Menu.NONE,\n                    \"Facebook: https://www.facebook.com/PowerSourceInternational\");\n            menu.add(Menu.NONE, 48, Menu.NONE,\n                    \"Linkedin: http://www.linkedin.com/company/power-source-international\");\n            break;\n        default:\n            break;\n        }\n        super.onCreateContextMenu(menu, v, menuInfo);\n    }\n\n    /** Called when the activity is first created. */\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.main);\n\n        final Carousel carousel = (Carousel) findViewById(R.id.carousel);\n        carousel.setOnItemClickListener(new OnItemClickListener() {\n\n            public void onItemClick(CarouselAdapter&lt;?&gt; parent, View view,\n                    int position, long id) {\n                CarouselItem item = (CarouselItem) parent.getChildAt(position);\n\n                // HERE: Force context menu\n                carousel.showContextMenuForChild(item);\n                Toast.makeText(\n                        MainActivity.this,\n                        String.format(\"%s has been clicked\",\n                                ((CarouselItem) parent.getChildAt(position))\n                                        .getName()), Toast.LENGTH_SHORT).show();\n\n            }\n\n            @Override\n            public void onCreateContextMenu(ContextMenu menu, View v,\n                    ContextMenuInfo menuInfo) {\n\n                // TODO Auto-generated method stub\n\n            }\n\n            @Override\n            public boolean onCreateOptionsMenu(Menu menu) {\n                MenuInflater inflater = getMenuInflater();\n                inflater.inflate(R.menu.testmenu2, menu);\n\n                // TODO Auto-generated method stub\n                return true;\n            }\n\n            @Override\n            public boolean onContextItemSelected(MenuItem item) {\n                // TODO Auto-generated method stub\n                return false;\n            }\n\n            @Override\n            public boolean onOptionsItemSelected(MenuItem item) {\n                // TODO Auto-generated method stub\n                return false;\n            }\n\n        });\n\n        carousel.setOnItemSelectedListener(new OnItemSelectedListener() {\n\n            public void onItemSelected(CarouselAdapter&lt;?&gt; parent, View view,\n                    int position, long id) {\n\n                final TextView txt = (TextView) (findViewById(R.id.selected_item));\n\n                switch (position) {\n                case 0:\n                    txt.setText(\"The PSI Process was developed as a result of consulting methodologies and infrastructure training with companies like General Electric, MCI and IBM. The executives at PSI have over 80 years of combined experience in working with fortune 50 companies to deliver on time solutions that reduce cost. Our staff now has the ability to utilize more than two dozen proven approaches and technologies to provide long-term savings of up to 30% or more with fast project paybacks. That’s a promise we back up with an insurance policy underwritten by one of the world’s oldest A+ rated insurance companies to remove all financial risk from your decision to invest with our company.\");\n                    break;\n                case 1:\n                    txt.setText(\"In an age when Energy-based Buzz-words abound, PSI works to make it simple as well as profitable for you our customer. All throughout our customer's environments, PSI efforts have produced positive results often beyond expectations. Whether you're looking at Materials environment, Public Installations, the Lodging Industry or Office Complex installations, PSI can effect cost saving benefits that will truly enhance your bottom line! Because each business is different and unique, let us come and show you how we can make our solutions work for you!\");\n                    break;\n                case 2:\n                    txt.setText(\"Power Source International (PSI) is setting the pace for engineering and environmental companies for you, our customer. PSI evaluates each and every facet of your site, focused on providing energy sustainability solutions. By looking at all of the different areas, we are not trying for a “Home Run” but several smaller hits that provides you with an integrated winning vehicle to increase your bottom line &amp; your long-term competitive edge.\");\n                    break;\n                case 3:\n                    txt.setText(\"PSI’s Executive Team has a broad based set of skills and experiences around consulting and implementation for industries in numerous sectors, including manufacturing, processing, transportation, healthcare, food and beverage,  hospitality, retail and government agencies. The Company has also teamed with leading companies in the solar, wind and energy management arena. The team is further supported by an internal Board of Advisors formed by professionals from research, universities and the private sector.\");\n                    break;\n                case 4:\n                    txt.setText(\"Want to install an EV charging solution but don’t want to pay for it all at once? No problem! We have leasing options to fit almost every budget.\");\n                    break;\n                case 5:\n                    txt.setText(\"If you would like more information from PSI, please fill in the form. For immediate assistance, please contact us at 678-951-0715.\");\n\n                    break;\n                }\n\n            }\n\n            public void onNothingSelected(CarouselAdapter&lt;?&gt; parent) {\n            }\n\n        });\n\n        registerForContextMenu(carousel);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","c#","android","unity-game-engine","avrdude"],"comments":[{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":0,"creation_date":1679887011,"post_id":75851684,"comment_id":133795484,"body_markdown":"1) Please don&#39;t use [images](https://meta.stackoverflow.com/q/285551/295004). 2) Have you been able to get it to work without Unity. The Unity wrapper will complicate testing. 3) The error looks similar to [Android cannot talk to Arduino using AVRDUDE](https://stackoverflow.com/q/15596376/295004) and [this one](https://stackoverflow.com/q/16910064/295004). Modern Android is quite locked down so the Unix/Linux way of accessing USB probably won&#39;t work. Feel free to look through [all existing tagged android/avrdude](https://stackoverflow.com/questions/tagged/android+avrdude) posts for leads.","body":"1) Please don&#39;t use <a href=\"https://meta.stackoverflow.com/q/285551/295004\">images</a>. 2) Have you been able to get it to work without Unity. The Unity wrapper will complicate testing. 3) The error looks similar to <a href=\"https://stackoverflow.com/q/15596376/295004\">Android cannot talk to Arduino using AVRDUDE</a> and <a href=\"https://stackoverflow.com/q/16910064/295004\">this one</a>. Modern Android is quite locked down so the Unix/Linux way of accessing USB probably won&#39;t work. Feel free to look through <a href=\"https://stackoverflow.com/questions/tagged/android+avrdude\">all existing tagged android/avrdude</a> posts for leads."},{"owner":{"account_id":27798794,"reputation":1,"user_id":21223622,"display_name":"Pig SimPle"},"score":0,"creation_date":1679891145,"post_id":75851684,"comment_id":133795945,"body_markdown":"The first time I posted, I was lacking. I&#39;ll fix it. Thank you for your comments.","body":"The first time I posted, I was lacking. I&#39;ll fix it. Thank you for your comments."}],"owner":{"account_id":27798794,"reputation":1,"user_id":21223622,"display_name":"Pig SimPle"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679914512,"creation_date":1679883696,"question_id":75851684,"body_markdown":"I am trying to create an Avrdude plugin that can run on the Android platform in Unity. The Unity version I am using is 2021.3.9f1. \r\n\r\nI plan to run Avrdude with the .so file and utilize the https://github.com/mik3y/usb-serial-for-android library to open permissions and ports for USB devices connected to Android.\r\n\r\nBelow is the code I have written.\r\n\r\n##### Unity Avrdude\r\n\r\n```\r\npublic class PluginManager : MonoBehaviour\r\n{\r\n    string path;\r\n    string avrdudeconfPath;\r\n    string hexFilePath;\r\n    string avrduderunPath;\r\n\r\n\r\n    public AARManager aarManager;\r\n\r\n    private AndroidJavaObject usbManager;\r\n    private AndroidJavaObject usbInterface;\r\n    private AndroidJavaObject usbEndpoint;\r\n    private int VID;\r\n    private int PID;\r\n\r\n    string fromConfPath;\r\n    string toConfPath;\r\n    string fromHexPath;\r\n    string toHexPath;\r\n    string fromExePath;\r\n    string toExePath;\r\n\r\n    public Text soTestTxt;\r\n    public Text aarTestTxt;\r\n    public Button testBtn;\r\n    public Button testBtn2;\r\n\r\n    string teststring;\r\n    string testrunstring;\r\n    string testcomma;\r\n\r\n  \r\n    [DllImport(&quot;AvrdudeJNILib&quot;)]\r\n    private static extern void avrdude_main(\r\n    int argc, [MarshalAs(UnmanagedType.LPArray, ArraySubType = UnmanagedType.LPTStr)]\r\n    string[] argv, [MarshalAs(UnmanagedType.FunctionPtr)] MsgCallback cb,\r\n    [MarshalAs(UnmanagedType.FunctionPtr)] ExitCallback ec);\r\n\r\n    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n    private delegate void MsgCallback(string message);\r\n    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n    private delegate void ExitCallback(int exitCode);\r\n\r\n    private void Awake()\r\n    {\r\n    }\r\n    private void Start()\r\n    {\r\n    }\r\n    void OnDestroy()\r\n    {\r\n        \r\n    }\r\n    \r\n\r\n    [MonoPInvokeCallback(typeof(MsgCallback))]\r\n    public static void LogMessage(string message)\r\n    {\r\n        Debug.Log(message);\r\n    }\r\n\r\n    [MonoPInvokeCallback(typeof(ExitCallback))]\r\n    static void OnExit(int exitCode)\r\n    {\r\n        Debug.Log(&quot;Exited with code: &quot; + exitCode);\r\n    }\r\n\r\n    public void OnClickRunAvrdude()\r\n     {\r\n        StartCoroutine((new[] {\r\n             CopyFileAvrdudeConf(),\r\n             CopyFileHex()\r\n         }).GetEnumerator());\r\n        CheckUSBDevices();\r\n    }\r\n\r\n     public void OnClickRunAvrdude2()\r\n     {\r\n     }\r\n\r\n    IEnumerator CopyFileAvrdudeConf()\r\n    {\r\n        fromConfPath = Application.streamingAssetsPath + &quot;/&quot;;\r\n        toConfPath = Application.persistentDataPath + &quot;/&quot;;\r\n        string[] fileNamesToCopy = new string[] { &quot;avrdude.conf&quot; };\r\n\r\n        foreach (string fileName in fileNamesToCopy)\r\n        {\r\n            string fromFilePath = Path.Combine(fromConfPath, fileName);\r\n            string toFilePath = Path.Combine(toConfPath, fileName);\r\n\r\n            Debug.Log(&quot;Copying &quot; + fromFilePath + &quot; to &quot; + toFilePath);\r\n\r\n            if (Application.platform == RuntimePlatform.Android)\r\n            {\r\n                UnityWebRequest www = UnityWebRequest.Get(fromFilePath);\r\n                yield return www.SendWebRequest();\r\n\r\n                if (www.result == UnityWebRequest.Result.Success)\r\n                {\r\n                    File.WriteAllBytes(toFilePath, www.downloadHandler.data);\r\n                }\r\n                else\r\n                {\r\n                    Debug.Log(www.error);\r\n                }\r\n            }\r\n            else\r\n            {\r\n                File.Copy(fromFilePath, toFilePath, true);\r\n            }\r\n        }\r\n\r\n\r\n        string filePath = Path.Combine(Application.persistentDataPath, &quot;avrdude.conf&quot;);\r\n\r\n        if (File.Exists(filePath))\r\n        {\r\n            string contents = File.ReadAllText(filePath);\r\n            soTestTxt.text = Application.persistentDataPath;\r\n            Debug.Log(&quot;CONF File exists at path: &quot; + filePath);\r\n        }\r\n        else\r\n        {\r\n            Debug.LogError(&quot;CONF File does not exist at path: &quot; + filePath);\r\n        }\r\n    }\r\n\r\n    IEnumerator CopyFileHex()\r\n     {\r\n        fromHexPath = Application.streamingAssetsPath + &quot;/&quot;;\r\n        toHexPath = Application.persistentDataPath + &quot;/&quot;;\r\n        string[] fileNamesToCopy = new string[] { &quot;main.hex&quot; };\r\n\r\n        foreach (string fileName in fileNamesToCopy)\r\n        {\r\n            string fromFilePath = Path.Combine(fromHexPath, fileName);\r\n            string toFilePath = Path.Combine(toHexPath, fileName);\r\n\r\n            Debug.Log(&quot;Copying &quot; + fromFilePath + &quot; to &quot; + toFilePath);\r\n\r\n            if (Application.platform == RuntimePlatform.Android)\r\n            {\r\n                UnityWebRequest www = UnityWebRequest.Get(fromFilePath);\r\n                yield return www.SendWebRequest();\r\n\r\n                if (www.result == UnityWebRequest.Result.Success)\r\n                {\r\n                    File.WriteAllBytes(toFilePath, www.downloadHandler.data);\r\n                }\r\n                else\r\n                {\r\n                    Debug.LogError(www.error);\r\n                }\r\n            }\r\n            else\r\n            {\r\n                File.Copy(fromFilePath, toFilePath, true);\r\n            }\r\n        }\r\n\r\n\r\n        string filePath = Path.Combine(Application.persistentDataPath, &quot;main.hex&quot;);\r\n\r\n        if (File.Exists(filePath))\r\n        {\r\n            string contents = File.ReadAllText(filePath);\r\n            //soTestTxt.text = contents;\r\n            Debug.Log(&quot;HEX File exists at path: &quot; + filePath);\r\n        }\r\n        else\r\n        {\r\n            Debug.Log(&quot;HEX File does not exist at path: &quot; + filePath);\r\n        }\r\n    }\r\n     IEnumerator Runavrdudestart()\r\n     {\r\n        string[] argv = new string[] {\r\n            &quot;avrdude&quot;,\r\n            &quot;-C&quot;,\r\n            Application.persistentDataPath+&quot;/avrdude.conf&quot;,\r\n            &quot;-c&quot;,\r\n            &quot;stk500v2&quot;,\r\n            &quot;-p&quot;,\r\n            &quot;m8&quot;,\r\n            &quot;-P&quot;,\r\n            aarManager.getport,\r\n            &quot;-D&quot;,\r\n            &quot;-F&quot;,\r\n            &quot;-U&quot;,\r\n            &quot;flash:w:&quot;+ Application.persistentDataPath+&quot;/main.hex&quot;,\r\n            };\r\n\r\n        try\r\n        {\r\n            //avrdude_main(argv.Length, argv, logg, null);\r\n            avrdude_main(argv.Length, argv, LogMessage, OnExit);\r\n        }\r\n\r\n        catch (Exception e)\r\n        {\r\n            Debug.Log(&quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&quot; + e);\r\n        }\r\n\r\n        yield break;\r\n    }\r\n}\r\n```\r\n\r\n##### Android Java serial library\r\n\r\n```\r\nimport android.app.Activity;\r\nimport android.app.PendingIntent;\r\nimport android.content.BroadcastReceiver;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.hardware.usb.UsbDevice;\r\nimport android.hardware.usb.UsbDeviceConnection;\r\nimport android.hardware.usb.UsbManager;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class GetPermission  extends Activity {\r\n    private static final String ACTION_USB_PERMISSION = &quot;com.android.example.USB_PERMISSION&quot;;\r\n    private static PendingIntent mPermissionIntent;\r\n    private static UsbDevice device;\r\n    static UsbSerialPort port;\r\n    static UsbManager manager;\r\n    private static final int READ_WAIT_MILLIS = 2000;\r\n\r\n    public static String GetPortPermission(Context unityContext){\r\n\r\n        manager = (UsbManager) unityContext.getSystemService(Context.USB_SERVICE);\r\n        mPermissionIntent = PendingIntent.getBroadcast(unityContext, 0, new Intent(ACTION_USB_PERMISSION), 0);\r\n        IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);\r\n        unityContext.registerReceiver(mUsbReceiver, filter);\r\n\r\n        device = null;\r\n        for(UsbDevice usbDevice : manager.getDeviceList().values())\r\n        {\r\n            if(usbDevice.getVendorId()==0x1a86&amp;&amp;usbDevice.getProductId()==0x7523)\r\n            {\r\n                device=usbDevice;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(device!=null)\r\n        {\r\n            manager.requestPermission(device,mPermissionIntent);\r\n            UsbSerialDriver driver = UsbSerialProber.getDefaultProber().probeDevice(device);\r\n            port = driver.getPorts().get(0);\r\n\r\n            if(manager.hasPermission(device)){\r\n                UsbDeviceConnection connection = manager.openDevice(device);\r\n                try {\r\n                    port.open(connection);\r\n                    port.setParameters(115200, 8, UsbSerialPort.STOPBITS_1, UsbSerialPort.PARITY_NONE);\r\n                    System.out.println(port);\r\n                    System.out.println(&quot;@@@@@@@@@@@@@@@@@@&quot;+connection.releaseInterface(device.getInterface(0)));\r\n                    int fileDescriptor = connection.getFileDescriptor();\r\n                    if(fileDescriptor==-1)\r\n                    {\r\n                        System.out.println(&quot;!!!!!NotOpen!!!!!&quot;);\r\n                    }\r\n                    else\r\n                    {\r\n                        System.out.println(&quot;!!!!!Open!!!!!&quot;);\r\n                    }\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                return device.getDeviceName();\r\n            } else {\r\n                return &quot;PermissionDenied&quot;;\r\n            }\r\n        } else {\r\n            return &quot;DeviceNotFound&quot;;\r\n        }\r\n\r\n\r\n        /*UsbDeviceConnection connection = manager.openDevice(device);\r\n\r\n        if (connection != null) {\r\n            System.out.println(&quot;UsbDeviceConnectOK!!!&quot;);\r\n\r\n            int fileDescriptor = connection.getFileDescriptor();\r\n\r\n            boolean isOpen = fileDescriptor &gt;= 0;\r\n\r\n            if (isOpen) {\r\n                System.out.println(&quot;USBPortOpen!!!&quot;);\r\n            } else {\r\n                System.out.println(&quot;USBPortClose!!!&quot;);\r\n            }\r\n\r\n        } else {\r\n            System.out.println(&quot;UsbDeviceConnectFail&quot;);\r\n        }\r\n\r\n        if(device!=null)\r\n        {\r\n            manager.requestPermission(device,mPermissionIntent);\r\n            UsbSerialDriver driver = UsbSerialProber.getDefaultProber().probeDevice(device);\r\n            UsbSerialPort port = driver.getPorts().get(0);\r\n\r\n            try {\r\n                port.open(connection);\r\n                port.setParameters(115200, 8, UsbSerialPort.STOPBITS_1, UsbSerialPort.PARITY_NONE);\r\n                System.out.println(port);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            return device.getDeviceName();\r\n        }\r\n        else {\r\n            return &quot;DeviceNotFound&quot;;\r\n        }*/\r\n    }\r\n\r\n\r\n    public static String ReadPort() throws IOException{\r\n        if(port==null||!port.isOpen())\r\n        {\r\n            return &quot;port is Null&quot;;\r\n        }\r\n        byte[] buffer = new byte[8192];\r\n        int len = port.read(buffer,READ_WAIT_MILLIS);\r\n        new String(buffer, 0, len);\r\n        return port.toString();\r\n    }\r\n\r\n\r\n    private static final BroadcastReceiver mUsbReceiver = new BroadcastReceiver() {\r\n        public void onReceive(Context context, Intent intent) {\r\n            String action = intent.getAction();\r\n            if (ACTION_USB_PERMISSION.equals(action)) {\r\n                synchronized (this) {\r\n                    UsbDevice device = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);\r\n\r\n                    if (intent.getBooleanExtra(UsbManager.EXTRA_PERMISSION_GRANTED, false)) {\r\n                        if(device != null){\r\n                            System.out.println(&quot;Permission OK!!!&quot;);\r\n                            System.out.println(device.getDeviceId());\r\n                            System.out.println(device.getInterfaceCount());\r\n                            System.out.println(device.getInterface(0));\r\n                            System.out.println(device.getVendorId());\r\n                            System.out.println(device.getProductId());\r\n\r\n                        }\r\n                    }\r\n                    else {\r\n                        System.out.println(&quot;Permission denied&quot;);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n```\r\n\r\n##### Unity C# serial library\r\n\r\n```\r\npublic class AARManager : MonoBehaviour\r\n{\r\n    string response;\r\n    public string getport;\r\n    public string read;\r\n    void Start()\r\n    {\r\n    }\r\n    public void OnclickCheckPermission()\r\n    {   \r\n        AndroidJavaClass unityPlayer = new AndroidJavaClass(&quot;com.unity3d.player.UnityPlayer&quot;);\r\n        AndroidJavaObject activity = unityPlayer.GetStatic&lt;AndroidJavaObject&gt;(&quot;currentActivity&quot;);\r\n        AndroidJavaObject context = activity.Call&lt;AndroidJavaObject&gt;(&quot;getApplicationContext&quot;);\r\n        AndroidJavaClass pluginClass = new AndroidJavaClass(&quot;com.hoho.android.usbserial.driver.GetPermission&quot;);\r\n        getport = pluginClass.CallStatic&lt;string&gt;(&quot;GetPortPermission&quot;, context);\r\n        Debug.Log(getport);\r\n        if(getport.Contains(&quot;dev&quot;))\r\n        {\r\n            read = pluginClass.CallStatic&lt;string&gt;(&quot;ReadPort&quot;);\r\n            Debug.Log(&quot;Readport@@@@@@@@@@&quot;+read);\r\n        }\r\n        else\r\n        {\r\n            Debug.Log(&quot;Init Failed!!!!!&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nHowever, I get the following:\r\n\r\n```\r\n2023-03-27 11:59:20.551 10182 10202 Info Unity STEP:1 \r\n2023-03-27 11:59:20.552 10182 10202 Info Unity update_progress: no_tty \r\n2023-03-27 11:59:20.552 10182 10202 Info Unity STEP:2 \r\n2023-03-27 11:59:20.552 10182 10202 Info Unity System wide configuration file is &quot;/storage/emulated/0/Android/data/com.probo.newproed/files/avrdude.conf&quot;\r\n2023-03-27 11:59:20.552 10182 10202 Info Unity read_config: /storage/emulated/0/Android/data/com.probo.newproed/files/avrdude.conf\r\n2023-03-27 11:59:20.597 10182 10202 Info Unity STEP:3 \r\n2023-03-27 11:59:20.597 10182 10202 Info Unity avrdude: ser_open(): can&#39;t open device &quot;DeviceNotFound&quot;: No such file or directory\r\n2023-03-27 11:59:20.597 10182 10202 Info Unity exit(1)\r\n2023-03-27 11:59:20.599 10182 10202 Info Unity Exited with code: 0\r\n2023-03-27 11:59:20.599 10182 10202 Info Unity avrdude: ser_open(): can&#39;t set attributes for device &quot;DeviceNotFound&quot;: Not a typewriter\r\n2023-03-27 11:59:20.599 10182 10202 Info Unity exit(1)\r\n2023-03-27 11:59:20.599 10182 10202 Info Unity Exited with code: 0\r\n0001-01-01 00:00:00.000 -1 -1 Info  --------- beginning of crash\r\n2023-03-27 11:59:20.600 10182 10202 Fatal libc FORTIFY: FD_SET: file descriptor &lt; 0\r\n2023-03-27 11:59:20.600 10182 10202 Info Unity exit(ABNORMAL TERMINATION)\r\n2023-03-27 11:59:20.602 10182 10202 Info Unity Exited with code: -6\r\n```\r\n\r\nCan anyone give me some advice? I have been struggling for several months now. I am aware that it is possible to communicate with USB devices through TCP socket communication, but I have no knowledge or experience with TCP sockets.","title":"Avrdude Android plugin development in Unity","body":"<p>I am trying to create an Avrdude plugin that can run on the Android platform in Unity. The Unity version I am using is 2021.3.9f1.</p>\n<p>I plan to run Avrdude with the .so file and utilize the <a href=\"https://github.com/mik3y/usb-serial-for-android\" rel=\"nofollow noreferrer\">https://github.com/mik3y/usb-serial-for-android</a> library to open permissions and ports for USB devices connected to Android.</p>\n<p>Below is the code I have written.</p>\n<h5>Unity Avrdude</h5>\n<pre><code>public class PluginManager : MonoBehaviour\n{\n    string path;\n    string avrdudeconfPath;\n    string hexFilePath;\n    string avrduderunPath;\n\n\n    public AARManager aarManager;\n\n    private AndroidJavaObject usbManager;\n    private AndroidJavaObject usbInterface;\n    private AndroidJavaObject usbEndpoint;\n    private int VID;\n    private int PID;\n\n    string fromConfPath;\n    string toConfPath;\n    string fromHexPath;\n    string toHexPath;\n    string fromExePath;\n    string toExePath;\n\n    public Text soTestTxt;\n    public Text aarTestTxt;\n    public Button testBtn;\n    public Button testBtn2;\n\n    string teststring;\n    string testrunstring;\n    string testcomma;\n\n  \n    [DllImport(&quot;AvrdudeJNILib&quot;)]\n    private static extern void avrdude_main(\n    int argc, [MarshalAs(UnmanagedType.LPArray, ArraySubType = UnmanagedType.LPTStr)]\n    string[] argv, [MarshalAs(UnmanagedType.FunctionPtr)] MsgCallback cb,\n    [MarshalAs(UnmanagedType.FunctionPtr)] ExitCallback ec);\n\n    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n    private delegate void MsgCallback(string message);\n    [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n    private delegate void ExitCallback(int exitCode);\n\n    private void Awake()\n    {\n    }\n    private void Start()\n    {\n    }\n    void OnDestroy()\n    {\n        \n    }\n    \n\n    [MonoPInvokeCallback(typeof(MsgCallback))]\n    public static void LogMessage(string message)\n    {\n        Debug.Log(message);\n    }\n\n    [MonoPInvokeCallback(typeof(ExitCallback))]\n    static void OnExit(int exitCode)\n    {\n        Debug.Log(&quot;Exited with code: &quot; + exitCode);\n    }\n\n    public void OnClickRunAvrdude()\n     {\n        StartCoroutine((new[] {\n             CopyFileAvrdudeConf(),\n             CopyFileHex()\n         }).GetEnumerator());\n        CheckUSBDevices();\n    }\n\n     public void OnClickRunAvrdude2()\n     {\n     }\n\n    IEnumerator CopyFileAvrdudeConf()\n    {\n        fromConfPath = Application.streamingAssetsPath + &quot;/&quot;;\n        toConfPath = Application.persistentDataPath + &quot;/&quot;;\n        string[] fileNamesToCopy = new string[] { &quot;avrdude.conf&quot; };\n\n        foreach (string fileName in fileNamesToCopy)\n        {\n            string fromFilePath = Path.Combine(fromConfPath, fileName);\n            string toFilePath = Path.Combine(toConfPath, fileName);\n\n            Debug.Log(&quot;Copying &quot; + fromFilePath + &quot; to &quot; + toFilePath);\n\n            if (Application.platform == RuntimePlatform.Android)\n            {\n                UnityWebRequest www = UnityWebRequest.Get(fromFilePath);\n                yield return www.SendWebRequest();\n\n                if (www.result == UnityWebRequest.Result.Success)\n                {\n                    File.WriteAllBytes(toFilePath, www.downloadHandler.data);\n                }\n                else\n                {\n                    Debug.Log(www.error);\n                }\n            }\n            else\n            {\n                File.Copy(fromFilePath, toFilePath, true);\n            }\n        }\n\n\n        string filePath = Path.Combine(Application.persistentDataPath, &quot;avrdude.conf&quot;);\n\n        if (File.Exists(filePath))\n        {\n            string contents = File.ReadAllText(filePath);\n            soTestTxt.text = Application.persistentDataPath;\n            Debug.Log(&quot;CONF File exists at path: &quot; + filePath);\n        }\n        else\n        {\n            Debug.LogError(&quot;CONF File does not exist at path: &quot; + filePath);\n        }\n    }\n\n    IEnumerator CopyFileHex()\n     {\n        fromHexPath = Application.streamingAssetsPath + &quot;/&quot;;\n        toHexPath = Application.persistentDataPath + &quot;/&quot;;\n        string[] fileNamesToCopy = new string[] { &quot;main.hex&quot; };\n\n        foreach (string fileName in fileNamesToCopy)\n        {\n            string fromFilePath = Path.Combine(fromHexPath, fileName);\n            string toFilePath = Path.Combine(toHexPath, fileName);\n\n            Debug.Log(&quot;Copying &quot; + fromFilePath + &quot; to &quot; + toFilePath);\n\n            if (Application.platform == RuntimePlatform.Android)\n            {\n                UnityWebRequest www = UnityWebRequest.Get(fromFilePath);\n                yield return www.SendWebRequest();\n\n                if (www.result == UnityWebRequest.Result.Success)\n                {\n                    File.WriteAllBytes(toFilePath, www.downloadHandler.data);\n                }\n                else\n                {\n                    Debug.LogError(www.error);\n                }\n            }\n            else\n            {\n                File.Copy(fromFilePath, toFilePath, true);\n            }\n        }\n\n\n        string filePath = Path.Combine(Application.persistentDataPath, &quot;main.hex&quot;);\n\n        if (File.Exists(filePath))\n        {\n            string contents = File.ReadAllText(filePath);\n            //soTestTxt.text = contents;\n            Debug.Log(&quot;HEX File exists at path: &quot; + filePath);\n        }\n        else\n        {\n            Debug.Log(&quot;HEX File does not exist at path: &quot; + filePath);\n        }\n    }\n     IEnumerator Runavrdudestart()\n     {\n        string[] argv = new string[] {\n            &quot;avrdude&quot;,\n            &quot;-C&quot;,\n            Application.persistentDataPath+&quot;/avrdude.conf&quot;,\n            &quot;-c&quot;,\n            &quot;stk500v2&quot;,\n            &quot;-p&quot;,\n            &quot;m8&quot;,\n            &quot;-P&quot;,\n            aarManager.getport,\n            &quot;-D&quot;,\n            &quot;-F&quot;,\n            &quot;-U&quot;,\n            &quot;flash:w:&quot;+ Application.persistentDataPath+&quot;/main.hex&quot;,\n            };\n\n        try\n        {\n            //avrdude_main(argv.Length, argv, logg, null);\n            avrdude_main(argv.Length, argv, LogMessage, OnExit);\n        }\n\n        catch (Exception e)\n        {\n            Debug.Log(&quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&quot; + e);\n        }\n\n        yield break;\n    }\n}\n</code></pre>\n<h5>Android Java serial library</h5>\n<pre><code>import android.app.Activity;\nimport android.app.PendingIntent;\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport android.hardware.usb.UsbDevice;\nimport android.hardware.usb.UsbDeviceConnection;\nimport android.hardware.usb.UsbManager;\n\nimport java.io.IOException;\n\npublic class GetPermission  extends Activity {\n    private static final String ACTION_USB_PERMISSION = &quot;com.android.example.USB_PERMISSION&quot;;\n    private static PendingIntent mPermissionIntent;\n    private static UsbDevice device;\n    static UsbSerialPort port;\n    static UsbManager manager;\n    private static final int READ_WAIT_MILLIS = 2000;\n\n    public static String GetPortPermission(Context unityContext){\n\n        manager = (UsbManager) unityContext.getSystemService(Context.USB_SERVICE);\n        mPermissionIntent = PendingIntent.getBroadcast(unityContext, 0, new Intent(ACTION_USB_PERMISSION), 0);\n        IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);\n        unityContext.registerReceiver(mUsbReceiver, filter);\n\n        device = null;\n        for(UsbDevice usbDevice : manager.getDeviceList().values())\n        {\n            if(usbDevice.getVendorId()==0x1a86&amp;&amp;usbDevice.getProductId()==0x7523)\n            {\n                device=usbDevice;\n                break;\n            }\n        }\n\n        if(device!=null)\n        {\n            manager.requestPermission(device,mPermissionIntent);\n            UsbSerialDriver driver = UsbSerialProber.getDefaultProber().probeDevice(device);\n            port = driver.getPorts().get(0);\n\n            if(manager.hasPermission(device)){\n                UsbDeviceConnection connection = manager.openDevice(device);\n                try {\n                    port.open(connection);\n                    port.setParameters(115200, 8, UsbSerialPort.STOPBITS_1, UsbSerialPort.PARITY_NONE);\n                    System.out.println(port);\n                    System.out.println(&quot;@@@@@@@@@@@@@@@@@@&quot;+connection.releaseInterface(device.getInterface(0)));\n                    int fileDescriptor = connection.getFileDescriptor();\n                    if(fileDescriptor==-1)\n                    {\n                        System.out.println(&quot;!!!!!NotOpen!!!!!&quot;);\n                    }\n                    else\n                    {\n                        System.out.println(&quot;!!!!!Open!!!!!&quot;);\n                    }\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                return device.getDeviceName();\n            } else {\n                return &quot;PermissionDenied&quot;;\n            }\n        } else {\n            return &quot;DeviceNotFound&quot;;\n        }\n\n\n        /*UsbDeviceConnection connection = manager.openDevice(device);\n\n        if (connection != null) {\n            System.out.println(&quot;UsbDeviceConnectOK!!!&quot;);\n\n            int fileDescriptor = connection.getFileDescriptor();\n\n            boolean isOpen = fileDescriptor &gt;= 0;\n\n            if (isOpen) {\n                System.out.println(&quot;USBPortOpen!!!&quot;);\n            } else {\n                System.out.println(&quot;USBPortClose!!!&quot;);\n            }\n\n        } else {\n            System.out.println(&quot;UsbDeviceConnectFail&quot;);\n        }\n\n        if(device!=null)\n        {\n            manager.requestPermission(device,mPermissionIntent);\n            UsbSerialDriver driver = UsbSerialProber.getDefaultProber().probeDevice(device);\n            UsbSerialPort port = driver.getPorts().get(0);\n\n            try {\n                port.open(connection);\n                port.setParameters(115200, 8, UsbSerialPort.STOPBITS_1, UsbSerialPort.PARITY_NONE);\n                System.out.println(port);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n\n            return device.getDeviceName();\n        }\n        else {\n            return &quot;DeviceNotFound&quot;;\n        }*/\n    }\n\n\n    public static String ReadPort() throws IOException{\n        if(port==null||!port.isOpen())\n        {\n            return &quot;port is Null&quot;;\n        }\n        byte[] buffer = new byte[8192];\n        int len = port.read(buffer,READ_WAIT_MILLIS);\n        new String(buffer, 0, len);\n        return port.toString();\n    }\n\n\n    private static final BroadcastReceiver mUsbReceiver = new BroadcastReceiver() {\n        public void onReceive(Context context, Intent intent) {\n            String action = intent.getAction();\n            if (ACTION_USB_PERMISSION.equals(action)) {\n                synchronized (this) {\n                    UsbDevice device = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);\n\n                    if (intent.getBooleanExtra(UsbManager.EXTRA_PERMISSION_GRANTED, false)) {\n                        if(device != null){\n                            System.out.println(&quot;Permission OK!!!&quot;);\n                            System.out.println(device.getDeviceId());\n                            System.out.println(device.getInterfaceCount());\n                            System.out.println(device.getInterface(0));\n                            System.out.println(device.getVendorId());\n                            System.out.println(device.getProductId());\n\n                        }\n                    }\n                    else {\n                        System.out.println(&quot;Permission denied&quot;);\n                    }\n                }\n            }\n        }\n    };\n}\n</code></pre>\n<h5>Unity C# serial library</h5>\n<pre><code>public class AARManager : MonoBehaviour\n{\n    string response;\n    public string getport;\n    public string read;\n    void Start()\n    {\n    }\n    public void OnclickCheckPermission()\n    {   \n        AndroidJavaClass unityPlayer = new AndroidJavaClass(&quot;com.unity3d.player.UnityPlayer&quot;);\n        AndroidJavaObject activity = unityPlayer.GetStatic&lt;AndroidJavaObject&gt;(&quot;currentActivity&quot;);\n        AndroidJavaObject context = activity.Call&lt;AndroidJavaObject&gt;(&quot;getApplicationContext&quot;);\n        AndroidJavaClass pluginClass = new AndroidJavaClass(&quot;com.hoho.android.usbserial.driver.GetPermission&quot;);\n        getport = pluginClass.CallStatic&lt;string&gt;(&quot;GetPortPermission&quot;, context);\n        Debug.Log(getport);\n        if(getport.Contains(&quot;dev&quot;))\n        {\n            read = pluginClass.CallStatic&lt;string&gt;(&quot;ReadPort&quot;);\n            Debug.Log(&quot;Readport@@@@@@@@@@&quot;+read);\n        }\n        else\n        {\n            Debug.Log(&quot;Init Failed!!!!!&quot;);\n        }\n    }\n}\n</code></pre>\n<p>However, I get the following:</p>\n<pre><code>2023-03-27 11:59:20.551 10182 10202 Info Unity STEP:1 \n2023-03-27 11:59:20.552 10182 10202 Info Unity update_progress: no_tty \n2023-03-27 11:59:20.552 10182 10202 Info Unity STEP:2 \n2023-03-27 11:59:20.552 10182 10202 Info Unity System wide configuration file is &quot;/storage/emulated/0/Android/data/com.probo.newproed/files/avrdude.conf&quot;\n2023-03-27 11:59:20.552 10182 10202 Info Unity read_config: /storage/emulated/0/Android/data/com.probo.newproed/files/avrdude.conf\n2023-03-27 11:59:20.597 10182 10202 Info Unity STEP:3 \n2023-03-27 11:59:20.597 10182 10202 Info Unity avrdude: ser_open(): can't open device &quot;DeviceNotFound&quot;: No such file or directory\n2023-03-27 11:59:20.597 10182 10202 Info Unity exit(1)\n2023-03-27 11:59:20.599 10182 10202 Info Unity Exited with code: 0\n2023-03-27 11:59:20.599 10182 10202 Info Unity avrdude: ser_open(): can't set attributes for device &quot;DeviceNotFound&quot;: Not a typewriter\n2023-03-27 11:59:20.599 10182 10202 Info Unity exit(1)\n2023-03-27 11:59:20.599 10182 10202 Info Unity Exited with code: 0\n0001-01-01 00:00:00.000 -1 -1 Info  --------- beginning of crash\n2023-03-27 11:59:20.600 10182 10202 Fatal libc FORTIFY: FD_SET: file descriptor &lt; 0\n2023-03-27 11:59:20.600 10182 10202 Info Unity exit(ABNORMAL TERMINATION)\n2023-03-27 11:59:20.602 10182 10202 Info Unity Exited with code: -6\n</code></pre>\n<p>Can anyone give me some advice? I have been struggling for several months now. I am aware that it is possible to communicate with USB devices through TCP socket communication, but I have no knowledge or experience with TCP sockets.</p>\n"},{"tags":["java","android","android-intent","broadcastreceiver"],"answers":[{"tags":[],"owner":{"account_id":21069868,"reputation":1,"user_id":15486335,"display_name":"sheffik mohmad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679914387,"creation_date":1679914387,"answer_id":75854892,"question_id":64113237,"body_markdown":"We can not do unit test for android components without a device. However using Robolectric can make it work. Here is how i have implemented unit test for BroadcastReceiver.\r\n\r\n    @RunWith(RobolectricTestRunner.class)\r\n    @Config(sdk = 29)\r\n    @DoNotInstrument\r\n    public class BroadCastReceiverTest extends TestCase {\r\n      private Context context;\r\n      private YourReceiver yourReceiver;\r\n      private int expectedResponseCode = 500;\r\n      @Before\r\n      public void setup(){\r\n        yourReceiver = new YourReceiver();\r\n        context = RuntimeEnvironment.application.getApplicationContext();\r\n        intent = new Intent(Constants.ACTION_YOUR_ACTION);\r\n      }\r\n\r\n      @Test\r\n      public void testResponse(){\r\n        intent.putExtra(Constants.ERROR_CODE,500);\r\n        yourReceiver.onReceive(context,intent);\r\n        assertEquals(expectedResponseCode,yourReceiver.getResponseCode());\r\n\r\n      }\r\n    }","title":"Android Broadcast receiver unit test","body":"<p>We can not do unit test for android components without a device. However using Robolectric can make it work. Here is how i have implemented unit test for BroadcastReceiver.</p>\n<pre><code>@RunWith(RobolectricTestRunner.class)\n@Config(sdk = 29)\n@DoNotInstrument\npublic class BroadCastReceiverTest extends TestCase {\n  private Context context;\n  private YourReceiver yourReceiver;\n  private int expectedResponseCode = 500;\n  @Before\n  public void setup(){\n    yourReceiver = new YourReceiver();\n    context = RuntimeEnvironment.application.getApplicationContext();\n    intent = new Intent(Constants.ACTION_YOUR_ACTION);\n  }\n\n  @Test\n  public void testResponse(){\n    intent.putExtra(Constants.ERROR_CODE,500);\n    yourReceiver.onReceive(context,intent);\n    assertEquals(expectedResponseCode,yourReceiver.getResponseCode());\n\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":18790175,"reputation":11,"user_id":13702818,"display_name":"Joe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":327,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679914387,"creation_date":1601356114,"question_id":64113237,"body_markdown":"I am new to Android and learning `BroadcastReceiver`. I am trying to `sendBroadcast` Receiver from Android unit test, and trying to check if the intent action received by the receiver is valid. If I want to send intent data from receiver to unit test, what is the way.\r\n\r\n    public class ExampleUnitTest {\r\n        private Context mContext;\r\n        private AsyncTableProcess sgTable;\r\n        private final static String WHOLE_HOME_ASYNC = &quot;com.atv.intent.action.WHOLE_HOME_AE&quot;;\r\n    \r\n        // Executes each task synchronously using Architecture Components.\r\n        @Rule\r\n        public InstantTaskExecutorRule instantExecutorRule = new InstantTaskExecutorRule();\r\n    \r\n        @Before\r\n        public void setUp() throws Exception {\r\n            mContext = mock(Context.class);\r\n            sgTable = new AsyncTableProcess();\r\n        }\r\n        @Test\r\n        public void addition_isCorrect() {\r\n            IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);\r\n            filter.addAction(WHOLE_HOME_ASYNC);\r\n            mContext.registerReceiver(sgTable, filter);\r\n    \r\n            Intent intent = new Intent();\r\n            intent.setAction(WHOLE_HOME_ASYNC);\r\n            intent.putExtras(setWholeHomeBundleExtras());\r\n            mContext.sendBroadcast(intent);\r\n       }\r\n    }\r\n\r\n    public class AsyncTableProcess extends BroadcastReceiver {\r\n        private static final String sgsLiteWholeHomeAE = &quot;com.atv.intent.action.WHOLE_HOME_AE&quot;;\r\n    \r\n    \r\n        @Override\r\n        public void onReceive(final Context context, Intent intent) {\r\n            final String message = intent.getAction();\r\n    \r\n            //Response back to unitTest.\r\n            switch (message) {\r\n                case sgsLiteWholeHomeAE:\r\n                    Bundle extras = intent.getExtras();\r\n                    //updating hash table..\r\n                    break;\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\n","title":"Android Broadcast receiver unit test","body":"<p>I am new to Android and learning <code>BroadcastReceiver</code>. I am trying to <code>sendBroadcast</code> Receiver from Android unit test, and trying to check if the intent action received by the receiver is valid. If I want to send intent data from receiver to unit test, what is the way.</p>\n<pre><code>public class ExampleUnitTest {\n    private Context mContext;\n    private AsyncTableProcess sgTable;\n    private final static String WHOLE_HOME_ASYNC = &quot;com.atv.intent.action.WHOLE_HOME_AE&quot;;\n\n    // Executes each task synchronously using Architecture Components.\n    @Rule\n    public InstantTaskExecutorRule instantExecutorRule = new InstantTaskExecutorRule();\n\n    @Before\n    public void setUp() throws Exception {\n        mContext = mock(Context.class);\n        sgTable = new AsyncTableProcess();\n    }\n    @Test\n    public void addition_isCorrect() {\n        IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);\n        filter.addAction(WHOLE_HOME_ASYNC);\n        mContext.registerReceiver(sgTable, filter);\n\n        Intent intent = new Intent();\n        intent.setAction(WHOLE_HOME_ASYNC);\n        intent.putExtras(setWholeHomeBundleExtras());\n        mContext.sendBroadcast(intent);\n   }\n}\n\npublic class AsyncTableProcess extends BroadcastReceiver {\n    private static final String sgsLiteWholeHomeAE = &quot;com.atv.intent.action.WHOLE_HOME_AE&quot;;\n\n\n    @Override\n    public void onReceive(final Context context, Intent intent) {\n        final String message = intent.getAction();\n\n        //Response back to unitTest.\n        switch (message) {\n            case sgsLiteWholeHomeAE:\n                Bundle extras = intent.getExtras();\n                //updating hash table..\n                break;\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","fileoutputstream","objectinputstream","objectoutputstream"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1679914295,"post_id":75854791,"comment_id":133800357,"body_markdown":"Using the extension `.txt` for data used in combination with `ObjectInputStream` and `ObjectOutputStream` is suspicious, because `.txt` implies textual data, while `ObjectInputStream`/`ObjectOutputStream` use a **binary** serialization format.","body":"Using the extension <code>.txt</code> for data used in combination with <code>ObjectInputStream</code> and <code>ObjectOutputStream</code> is suspicious, because <code>.txt</code> implies textual data, while <code>ObjectInputStream</code>/<code>ObjectOutputStream</code> use a <b>binary</b> serialization format."},{"owner":{"account_id":19734231,"reputation":39,"user_id":14449082,"display_name":"Samuel W"},"score":0,"creation_date":1679915424,"post_id":75854791,"comment_id":133800599,"body_markdown":"@MarkRotteveel done some more reading so should it be a `.ser` file?","body":"@MarkRotteveel done some more reading so should it be a <code>.ser</code> file?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1679919796,"post_id":75854791,"comment_id":133801708,"body_markdown":"*if (handle==accounts.getHandle())* that, btw, is wrong. `String.equals` is used to compare strings in Java","body":"<i>if (handle==accounts.getHandle())</i> that, btw, is wrong. <code>String.equals</code> is used to compare strings in Java"},{"owner":{"account_id":19734231,"reputation":39,"user_id":14449082,"display_name":"Samuel W"},"score":0,"creation_date":1679920645,"post_id":75854791,"comment_id":133801920,"body_markdown":"@g00se so ```if (handle.equals(accounts.getHandle()))``` ?","body":"@g00se so <code>if (handle.equals(accounts.getHandle()))</code> ?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1679922082,"post_id":75854791,"comment_id":133802360,"body_markdown":"Not sure what your question is there (or even if there *is* one), but if the (corrected) statement you&#39;ve just written equals true, in your previous code, it could easily equal false for the same value","body":"Not sure what your question is there (or even if there <i>is</i> one), but if the (corrected) statement you&#39;ve just written equals true, in your previous code, it could easily equal false for the same value"},{"owner":{"account_id":19734231,"reputation":39,"user_id":14449082,"display_name":"Samuel W"},"score":0,"creation_date":1679923141,"post_id":75854791,"comment_id":133802722,"body_markdown":"@g00se original question was what needs to replace the comment above the for loop, i.e. how do I go from the file to having a list that can be looped through","body":"@g00se original question was what needs to replace the comment above the for loop, i.e. how do I go from the file to having a list that can be looped through"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1679924538,"post_id":75854791,"comment_id":133803190,"body_markdown":"I was just making a side comment really, but since your main question seems to be unanswered for you, you should write `List&lt;Account&gt;` with your oos and read that with your ois, making it simple to then search for `Account`s to remove, or whatever","body":"I was just making a side comment really, but since your main question seems to be unanswered for you, you should write <code>List&lt;Account&gt;</code> with your oos and read that with your ois, making it simple to then search for <code>Account</code>s to remove, or whatever"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1679932037,"post_id":75854791,"comment_id":133805556,"body_markdown":"There is not an &quot;official&quot; extension for serialized objects. Some use .ser, some use .dat, others use .bin, etc, etc.","body":"There is not an &quot;official&quot; extension for serialized objects. Some use .ser, some use .dat, others use .bin, etc, etc."}],"owner":{"account_id":19734231,"reputation":39,"user_id":14449082,"display_name":"Samuel W"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679914230,"creation_date":1679913817,"question_id":75854791,"body_markdown":"I am trying to create an instance of the class ```Account``` and it cannot have the same ```handle``` as other accounts, which is checked using a for loop which compares the ```handle``` passed a parameter to the handles of the existing accounts, if it already exists then the exception ```IllegalHandleException``` is thrown\r\n\r\nHow do you go from having the read file to the list of the accounts, i.e. what needs to replace ```//listOfaccounts=list of each account``` before the for loop\r\n\r\n```java\r\npublic int createAccount(String handle) throws IllegalHandleException{\r\n    //checks if handle is already taken\r\n\tFileInputStream accountsFile=new FileInputStream(&quot;listOfAccounts.txt&quot;);\r\n\tObjectInputStream in=new ObjectInputStream(accountsFile);\r\n\r\n\t//listOfAccounts=list of each account \r\n\r\n\tfor (Account accounts : listOfAccounts){\r\n\t\tif (handle==accounts.getHandle()){\r\n\t\t\tthrow new IllegalHandleException(&quot;Handle Is Already Taken&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\t//create account\r\n\tAccount newAccount;\r\n\tnewAccount=new Account(handle);\r\n\r\n\t//add account to the stream\r\n\tFileOutputStream updatedAccountsFile=new FileOutputStream(&quot;listOfAccounts.txt&quot;);\r\n\tupdatedAccountsFile.write(newAccount.getUserID());\r\n\tObjectOutputStream out=new ObjectOutputStream(updatedAccountsFile);\r\n\r\n\t//return ID \r\n\treturn newAccount.getUserID();\r\n}\r\n```\r\n","title":"How to use ObjectInputStream to find a class instance in a list of instances","body":"<p>I am trying to create an instance of the class <code>Account</code> and it cannot have the same <code>handle</code> as other accounts, which is checked using a for loop which compares the <code>handle</code> passed a parameter to the handles of the existing accounts, if it already exists then the exception <code>IllegalHandleException</code> is thrown</p>\n<p>How do you go from having the read file to the list of the accounts, i.e. what needs to replace <code>//listOfaccounts=list of each account</code> before the for loop</p>\n<pre class=\"lang-java prettyprint-override\"><code>public int createAccount(String handle) throws IllegalHandleException{\n    //checks if handle is already taken\n    FileInputStream accountsFile=new FileInputStream(&quot;listOfAccounts.txt&quot;);\n    ObjectInputStream in=new ObjectInputStream(accountsFile);\n\n    //listOfAccounts=list of each account \n\n    for (Account accounts : listOfAccounts){\n        if (handle==accounts.getHandle()){\n            throw new IllegalHandleException(&quot;Handle Is Already Taken&quot;);\n        }\n    }\n\n    //create account\n    Account newAccount;\n    newAccount=new Account(handle);\n\n    //add account to the stream\n    FileOutputStream updatedAccountsFile=new FileOutputStream(&quot;listOfAccounts.txt&quot;);\n    updatedAccountsFile.write(newAccount.getUserID());\n    ObjectOutputStream out=new ObjectOutputStream(updatedAccountsFile);\n\n    //return ID \n    return newAccount.getUserID();\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1533639776,"post_id":51724378,"comment_id":90410593,"body_markdown":"Oh boy, there&#39;s a lot going on here. Neither `Employee` nor `Address` should be a Spring bean (they&#39;re data objects, not service objects), using `context:annotation-driven` was the correct thing to do in the first place, and more broadly, XML-based hand-configuration is generally the old way of doing things. Your tutorial is obsolete (by casting `getBean`, for example), and I recommend starting with the Spring Boot Getting Started guides.","body":"Oh boy, there&#39;s a lot going on here. Neither <code>Employee</code> nor <code>Address</code> should be a Spring bean (they&#39;re data objects, not service objects), using <code>context:annotation-driven</code> was the correct thing to do in the first place, and more broadly, XML-based hand-configuration is generally the old way of doing things. Your tutorial is obsolete (by casting <code>getBean</code>, for example), and I recommend starting with the Spring Boot Getting Started guides."}],"answers":[{"tags":[],"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1533641669,"creation_date":1533641669,"answer_id":51725796,"question_id":51724378,"body_markdown":"When you use `&lt;context:annotation-config /&gt;`, your **ApplicationContext.xml** should be like below.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n        xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n        http://www.springframework.org/schema/beans/spring-beans-4.3.xsd \r\n        http://www.springframework.org/schema/context\r\n     \thttp://www.springframework.org/schema/context/spring-context-4.3.xsd&quot;&gt;\r\n    &lt;context:annotation-config /&gt;\r\n    &lt;bean id =&quot;empbean&quot; class=&quot;com.stp.beans.Employee&quot;&gt;&lt;/bean&gt;\r\n    &lt;bean id =&quot;adrbean&quot; class=&quot;com.stp.beans.Address&quot;&gt;&lt;/bean&gt;\r\n    &lt;/beans&gt;\r\n\r\nYou had just missed the `context` related definitions.","title":"Autowired Annotation not working when using&lt;context:annotation-config /&gt; in ApplicationContext.xml","body":"<p>When you use <code>&lt;context:annotation-config /&gt;</code>, your <strong>ApplicationContext.xml</strong> should be like below.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans-4.3.xsd \n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context-4.3.xsd\"&gt;\n&lt;context:annotation-config /&gt;\n&lt;bean id =\"empbean\" class=\"com.stp.beans.Employee\"&gt;&lt;/bean&gt;\n&lt;bean id =\"adrbean\" class=\"com.stp.beans.Address\"&gt;&lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>You had just missed the <code>context</code> related definitions.</p>\n"}],"owner":{"account_id":11435705,"reputation":756,"user_id":8383177,"accept_rate":43,"display_name":"Sai Teja Pakalapati"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1854,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":51725796,"answer_count":1,"score":0,"last_activity_date":1679914023,"creation_date":1533637210,"question_id":51724378,"body_markdown":"      &lt;context:annotation-config /&gt;\r\nwhen above line is added in ApplicationContext.xml file the Test.java is not running but when i add this it works but in the [tutorial][1]  i was going through it says both the methods work can someone help whats the problem with \r\nabove line of code.\r\n\r\n\t\t&lt;bean class=&quot;org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor&quot;/&gt;\r\n&gt; Employee.java\r\n\r\n\t\tpackage com.stp.beans;\r\n\r\n\t\timport org.springframework.beans.factory.annotation.Autowired;\r\n\r\n\t\tpublic class Employee {\r\n\t\t\tprivate Address empaddress;\r\n\r\n\t\t\tpublic Address getEmpaddress() {\r\n\t\t\t\treturn empaddress;\r\n\t\t\t}\r\n\t\t\t@Autowired\r\n\t\t\tpublic void setEmpaddress(Address empaddress) {\r\n\t\t\t\tthis.empaddress = empaddress;\r\n\t\t\t}\r\n\t\t}\r\n\r\n&gt; Address.java\r\n\r\n\r\n\t\tpackage com.stp.beans;\r\n\r\n\t\tpublic class Address {\r\n\t\t\tprivate String address;\r\n\r\n\t\t\tpublic String getAddress() {\r\n\t\t\t\treturn address;\r\n\t\t\t}\r\n\r\n\t\t\tpublic void setAddress(String address) {\r\n\t\t\t\tthis.address = address;\r\n\t\t\t}\r\n\t\t}\r\n\r\n&gt; ApplicationContext.xml\r\n\r\n\t\t&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t\t&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n\t\t\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t\txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd&quot;&gt;\r\n        &lt;bean class=&quot;org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor&quot;/&gt;\r\n\t\t&lt;bean id =&quot;empbean&quot; class=&quot;com.stp.beans.Employee&quot;&gt;&lt;/bean&gt;\r\n\t\t&lt;bean id =&quot;adrbean&quot; class=&quot;com.stp.beans.Address&quot;&gt;&lt;/bean&gt;\r\n\t\t&lt;/beans&gt;\r\n&gt;Test.java\r\n\t\t\r\n        package com.stp.test;\r\n\r\n\t\timport org.springframework.context.ApplicationContext;\r\n\t\timport org.springframework.context.support.ClassPathXmlApplicationContext;\r\n\r\n\t\timport com.stp.beans.Employee;\r\n\r\n\t\tpublic class Test {\r\n\t\t\tpublic static void main(String[] args) {\r\n\t\t\t\tApplicationContext context = new ClassPathXmlApplicationContext(&quot;/com/stp/cfgs/ApplicationContext.xml&quot;);\r\n\t\t\t\tEmployee emp = (Employee) context.getBean(&quot;empbean&quot;);\r\n\t\t\t\tSystem.out.println(emp.getEmpaddress());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n  [1]: https://www.mkyong.com/spring/spring-auto-wiring-beans-with-autowired-annotation/","title":"Autowired Annotation not working when using&lt;context:annotation-config /&gt; in ApplicationContext.xml","body":"<pre><code>  &lt;context:annotation-config /&gt;\n</code></pre>\n\n<p>when above line is added in ApplicationContext.xml file the Test.java is not running but when i add this it works but in the <a href=\"https://www.mkyong.com/spring/spring-auto-wiring-beans-with-autowired-annotation/\" rel=\"nofollow noreferrer\">tutorial</a>  i was going through it says both the methods work can someone help whats the problem with \nabove line of code.</p>\n\n<pre><code>    &lt;bean class=\"org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor\"/&gt;\n</code></pre>\n\n<blockquote>\n  <p>Employee.java</p>\n</blockquote>\n\n<pre><code>    package com.stp.beans;\n\n    import org.springframework.beans.factory.annotation.Autowired;\n\n    public class Employee {\n        private Address empaddress;\n\n        public Address getEmpaddress() {\n            return empaddress;\n        }\n        @Autowired\n        public void setEmpaddress(Address empaddress) {\n            this.empaddress = empaddress;\n        }\n    }\n</code></pre>\n\n<blockquote>\n  <p>Address.java</p>\n</blockquote>\n\n<pre><code>    package com.stp.beans;\n\n    public class Address {\n        private String address;\n\n        public String getAddress() {\n            return address;\n        }\n\n        public void setAddress(String address) {\n            this.address = address;\n        }\n    }\n</code></pre>\n\n<blockquote>\n  <p>ApplicationContext.xml</p>\n</blockquote>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n    &lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n        xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd\"&gt;\n    &lt;bean class=\"org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor\"/&gt;\n    &lt;bean id =\"empbean\" class=\"com.stp.beans.Employee\"&gt;&lt;/bean&gt;\n    &lt;bean id =\"adrbean\" class=\"com.stp.beans.Address\"&gt;&lt;/bean&gt;\n    &lt;/beans&gt;\n</code></pre>\n\n<blockquote>\n  <p>Test.java</p>\n</blockquote>\n\n<pre><code>    package com.stp.test;\n\n    import org.springframework.context.ApplicationContext;\n    import org.springframework.context.support.ClassPathXmlApplicationContext;\n\n    import com.stp.beans.Employee;\n\n    public class Test {\n        public static void main(String[] args) {\n            ApplicationContext context = new ClassPathXmlApplicationContext(\"/com/stp/cfgs/ApplicationContext.xml\");\n            Employee emp = (Employee) context.getBean(\"empbean\");\n            System.out.println(emp.getEmpaddress());\n        }\n    }\n</code></pre>\n"},{"tags":["java","mysql","testing","junit"],"owner":{"account_id":8723226,"reputation":47,"user_id":6525680,"accept_rate":71,"display_name":"Tezen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679913360,"creation_date":1679913360,"question_id":75854729,"body_markdown":"I have a service test class where I want to test if updates to objects are being saved to my database. When I try to check this with an assertThat(countRowsInTableWhere...) My tests fail but when I actually run it, it works just fine. Why are the updated values not passed to the database in my tests?\r\n\r\nMy service class is the following:\r\n```\r\n@Service\r\n@Transactional(readOnly = true)\r\npublic class StorageContainerTransportService {\r\n    private final StorageContainerTransportRepository storageContainerTransportRepository;\r\n    private final StorageLocationService storageLocationService;\r\n    private final StorageContainerService storageContainerService;\r\n\r\n\r\n    public StorageContainerTransportService(StorageContainerTransportRepository storageContainerTransportRepository, StorageLocationService storageLocationService, StorageContainerService storageContainerService) {\r\n        this.storageContainerTransportRepository = storageContainerTransportRepository;\r\n        this.storageLocationService = storageLocationService;\r\n        this.storageContainerService = storageContainerService;\r\n    }\r\n\r\n    public StorageContainerTransport findById(long id) {\r\n        return storageContainerTransportRepository.findById(id).orElseThrow(() -&gt; new StorageContainerTransportNotFound(id));\r\n    }\r\n\r\n    @Transactional\r\n    public long createIncomingStorageContainerTransport(StorageContainer storageContainer) {\r\n        var mainStockAreaId = 100;\r\n        var emptyStorageLocation = storageLocationService.getOneEmptyStorageLocationFromStorageArea(mainStockAreaId);\r\n        if (emptyStorageLocation.isPresent()) {\r\n            storageContainer.setAssigned(true);\r\n            storageContainerService.updateStorageContainer(storageContainer);\r\n            emptyStorageLocation.get().setAssigned(true);\r\n            storageLocationService.updateStorageLocation(emptyStorageLocation.get());\r\n            var storageContainerTransport = new StorageContainerTransport(storageContainer, null, emptyStorageLocation.get());\r\n            storageContainerTransportRepository.save(storageContainerTransport);\r\n            return storageContainerTransport.getId();\r\n        } else {\r\n            return -1;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nAnd my test class is, where my final 2 `assertThat` statements give an error:\r\n```\r\n@SpringBootTest\r\n@Sql({&quot;/parts.sql&quot;,&quot;/storageArea.sql&quot;, &quot;/storageLocations.sql&quot; , &quot;/storageContainers.sql&quot; })\r\nclass StorageContainerTransportServiceTest extends AbstractTransactionalJUnit4SpringContextTests {\r\n    public static final String STORAGE_CONTAINER_TRANSPORTS = &quot;StorageContainerTransport&quot;;\r\n    public static final String STORAGE_CONTAINERS = &quot;StorageContainer&quot;;\r\n    public static final String STORAGE_LOCATIONS = &quot;StorageLocation&quot;;\r\n\r\n    private final StorageContainerTransportService storageContainerTransportService;\r\n    private final StorageContainerRepository storageContainerRepository;\r\n\r\n    public StorageContainerTransportServiceTest(StorageContainerTransportService storageContainerTransportService, StorageContainerRepository storageContainerRepository) {\r\n        this.storageContainerTransportService = storageContainerTransportService;\r\n        this.storageContainerRepository = storageContainerRepository;\r\n    }\r\n\r\n    private final long idOfTestContainer1 = 100;\r\n\r\n    @Test\r\n    void createIncomingStorageContainerTransport() throws Exception {\r\n        var storageContainer = storageContainerRepository.findById(idOfTestContainer1)\r\n                .orElseThrow(() -&gt; new StorageContainerNotFoundException(idOfTestContainer1));\r\n        var id = storageContainerTransportService.createIncomingStorageContainerTransport(storageContainer);\r\n        var storageContainerTransport = storageContainerTransportService.findById(id);\r\n        assertThat(countRowsInTableWhere(STORAGE_CONTAINER_TRANSPORTS, &quot;id = &quot; + id + &quot; and storageContainer_id = &quot; + idOfTestContainer1 + &quot; and origin_id is null&quot;)).isOne();\r\n        assertThat(countRowsInTableWhere(STORAGE_CONTAINERS, &quot;id = &quot; + storageContainer.getId() + &quot; and assigned is true&quot;)).isOne();\r\n        assertThat(countRowsInTableWhere(STORAGE_LOCATIONS, &quot;id = &quot; + storageContainerTransport.getDestination().getId()  + &quot; and assigned is true&quot;)).isOne();\r\n    }\r\n}\r\n```\r\n","title":"countRowsInTableWhere does not read updated values","body":"<p>I have a service test class where I want to test if updates to objects are being saved to my database. When I try to check this with an assertThat(countRowsInTableWhere...) My tests fail but when I actually run it, it works just fine. Why are the updated values not passed to the database in my tests?</p>\n<p>My service class is the following:</p>\n<pre><code>@Service\n@Transactional(readOnly = true)\npublic class StorageContainerTransportService {\n    private final StorageContainerTransportRepository storageContainerTransportRepository;\n    private final StorageLocationService storageLocationService;\n    private final StorageContainerService storageContainerService;\n\n\n    public StorageContainerTransportService(StorageContainerTransportRepository storageContainerTransportRepository, StorageLocationService storageLocationService, StorageContainerService storageContainerService) {\n        this.storageContainerTransportRepository = storageContainerTransportRepository;\n        this.storageLocationService = storageLocationService;\n        this.storageContainerService = storageContainerService;\n    }\n\n    public StorageContainerTransport findById(long id) {\n        return storageContainerTransportRepository.findById(id).orElseThrow(() -&gt; new StorageContainerTransportNotFound(id));\n    }\n\n    @Transactional\n    public long createIncomingStorageContainerTransport(StorageContainer storageContainer) {\n        var mainStockAreaId = 100;\n        var emptyStorageLocation = storageLocationService.getOneEmptyStorageLocationFromStorageArea(mainStockAreaId);\n        if (emptyStorageLocation.isPresent()) {\n            storageContainer.setAssigned(true);\n            storageContainerService.updateStorageContainer(storageContainer);\n            emptyStorageLocation.get().setAssigned(true);\n            storageLocationService.updateStorageLocation(emptyStorageLocation.get());\n            var storageContainerTransport = new StorageContainerTransport(storageContainer, null, emptyStorageLocation.get());\n            storageContainerTransportRepository.save(storageContainerTransport);\n            return storageContainerTransport.getId();\n        } else {\n            return -1;\n        }\n    }\n\n}\n\n</code></pre>\n<p>And my test class is, where my final 2 <code>assertThat</code> statements give an error:</p>\n<pre><code>@SpringBootTest\n@Sql({&quot;/parts.sql&quot;,&quot;/storageArea.sql&quot;, &quot;/storageLocations.sql&quot; , &quot;/storageContainers.sql&quot; })\nclass StorageContainerTransportServiceTest extends AbstractTransactionalJUnit4SpringContextTests {\n    public static final String STORAGE_CONTAINER_TRANSPORTS = &quot;StorageContainerTransport&quot;;\n    public static final String STORAGE_CONTAINERS = &quot;StorageContainer&quot;;\n    public static final String STORAGE_LOCATIONS = &quot;StorageLocation&quot;;\n\n    private final StorageContainerTransportService storageContainerTransportService;\n    private final StorageContainerRepository storageContainerRepository;\n\n    public StorageContainerTransportServiceTest(StorageContainerTransportService storageContainerTransportService, StorageContainerRepository storageContainerRepository) {\n        this.storageContainerTransportService = storageContainerTransportService;\n        this.storageContainerRepository = storageContainerRepository;\n    }\n\n    private final long idOfTestContainer1 = 100;\n\n    @Test\n    void createIncomingStorageContainerTransport() throws Exception {\n        var storageContainer = storageContainerRepository.findById(idOfTestContainer1)\n                .orElseThrow(() -&gt; new StorageContainerNotFoundException(idOfTestContainer1));\n        var id = storageContainerTransportService.createIncomingStorageContainerTransport(storageContainer);\n        var storageContainerTransport = storageContainerTransportService.findById(id);\n        assertThat(countRowsInTableWhere(STORAGE_CONTAINER_TRANSPORTS, &quot;id = &quot; + id + &quot; and storageContainer_id = &quot; + idOfTestContainer1 + &quot; and origin_id is null&quot;)).isOne();\n        assertThat(countRowsInTableWhere(STORAGE_CONTAINERS, &quot;id = &quot; + storageContainer.getId() + &quot; and assigned is true&quot;)).isOne();\n        assertThat(countRowsInTableWhere(STORAGE_LOCATIONS, &quot;id = &quot; + storageContainerTransport.getDestination().getId()  + &quot; and assigned is true&quot;)).isOne();\n    }\n}\n</code></pre>\n"},{"tags":["java","rest"],"comments":[{"owner":{"account_id":185700,"reputation":91879,"user_id":422597,"display_name":"Colin Hebert"},"score":0,"creation_date":1286878243,"post_id":3913502,"comment_id":4172406,"body_markdown":"It depends how you do rest calls in your application. Do you use a JaxRS implementation ? A particular one ? Are you doing requests manually ?","body":"It depends how you do rest calls in your application. Do you use a JaxRS implementation ? A particular one ? Are you doing requests manually ?"},{"owner":{"account_id":164508,"reputation":20225,"user_id":387298,"accept_rate":91,"display_name":"Questions"},"score":0,"creation_date":1286935203,"post_id":3913502,"comment_id":4180930,"body_markdown":"@Colin Hebert, thank you for your reply. But I have no ideas of the RESTful call. could you give me more information about different parts of the RESTful call.","body":"@Colin Hebert, thank you for your reply. But I have no ideas of the RESTful call. could you give me more information about different parts of the RESTful call."},{"owner":{"account_id":8696596,"reputation":76,"user_id":6507756,"display_name":"Gaurav J"},"score":0,"creation_date":1513764065,"post_id":3913502,"comment_id":82773243,"body_markdown":"checkout http restful client [click here](https://github.com/gsssoftwaresolution/easyrestfulclient)","body":"checkout http restful client <a href=\"https://github.com/gsssoftwaresolution/easyrestfulclient\" rel=\"nofollow noreferrer\">click here</a>"}],"answers":[{"tags":[],"owner":{"account_id":198697,"reputation":18245,"user_id":443515,"accept_rate":56,"display_name":"Qwerky"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1429868655,"creation_date":1286878480,"answer_id":3913557,"question_id":3913502,"body_markdown":"There are several RESTful APIs around. I would recommend Jersey;\r\n\r\nhttps://jersey.java.net/\r\n\r\nClient API documentation is here;\r\n\r\nhttps://jersey.java.net/documentation/latest/index.html\r\n\r\n**Update**  \r\nLocation for the OAuth docs in the comment below is a dead link and has moved to  https://jersey.java.net/nonav/documentation/latest/security.html#d0e12334","title":"RESTful call in Java","body":"<p>There are several RESTful APIs around. I would recommend Jersey;</p>\n\n<p><a href=\"https://jersey.java.net/\" rel=\"nofollow noreferrer\">https://jersey.java.net/</a></p>\n\n<p>Client API documentation is here;</p>\n\n<p><a href=\"https://jersey.java.net/documentation/latest/index.html\" rel=\"nofollow noreferrer\">https://jersey.java.net/documentation/latest/index.html</a></p>\n\n<p><strong>Update</strong><br>\nLocation for the OAuth docs in the comment below is a dead link and has moved to  <a href=\"https://jersey.java.net/nonav/documentation/latest/security.html#d0e12334\" rel=\"nofollow noreferrer\">https://jersey.java.net/nonav/documentation/latest/security.html#d0e12334</a></p>\n"},{"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"down_vote_count":3,"up_vote_count":36,"is_accepted":false,"score":33,"last_activity_date":1286878553,"creation_date":1286878553,"answer_id":3913568,"question_id":3913502,"body_markdown":"This is very complicated in java, which is why I would suggest using Spring&#39;s [`RestTemplate`][1] abstraction:\r\n\r\n    String result = \r\n    restTemplate.getForObject(\r\n        &quot;http://example.com/hotels/{hotel}/bookings/{booking}&quot;,\r\n        String.class,&quot;42&quot;, &quot;21&quot;\r\n    );\r\n\r\n**Reference:**\r\n\r\n - Spring Blog: [Rest in Spring 3\r\n   (RestTemplate)][2]\r\n - Spring Reference: [Accessing RESTful\r\n   services on the Client][3]\r\n - JavaDoc: [`RestTemplate`][4]\r\n\r\n  [1]: http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html\r\n  [2]: http://blog.springsource.com/2009/03/27/rest-in-spring-3-resttemplate/\r\n  [3]: http://static.springsource.org/spring/docs/3.0.4.RELEASE/spring-framework-reference/html/remoting.html#rest-client-access\r\n  [4]: http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html\r\n","title":"RESTful call in Java","body":"<p>This is very complicated in java, which is why I would suggest using Spring's <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html\" rel=\"noreferrer\"><code>RestTemplate</code></a> abstraction:</p>\n\n<pre><code>String result = \nrestTemplate.getForObject(\n    \"http://example.com/hotels/{hotel}/bookings/{booking}\",\n    String.class,\"42\", \"21\"\n);\n</code></pre>\n\n<p><strong>Reference:</strong></p>\n\n<ul>\n<li>Spring Blog: <a href=\"http://blog.springsource.com/2009/03/27/rest-in-spring-3-resttemplate/\" rel=\"noreferrer\">Rest in Spring 3\n(RestTemplate)</a></li>\n<li>Spring Reference: <a href=\"http://static.springsource.org/spring/docs/3.0.4.RELEASE/spring-framework-reference/html/remoting.html#rest-client-access\" rel=\"noreferrer\">Accessing RESTful\nservices on the Client</a></li>\n<li>JavaDoc: <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html\" rel=\"noreferrer\"><code>RestTemplate</code></a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":42065,"reputation":53627,"user_id":122428,"display_name":"jitter"},"down_vote_count":1,"up_vote_count":30,"is_accepted":false,"score":29,"last_activity_date":1286878611,"creation_date":1286878611,"answer_id":3913576,"question_id":3913502,"body_markdown":"If you just need to make a simple call to a REST service from java you use something along these line\r\n\r\n    /*\r\n     * Stolen from http://xml.nig.ac.jp/tutorial/rest/index.html\r\n     * and http://www.dr-chuck.com/csev-blog/2007/09/calling-rest-web-services-from-java/\r\n    */\r\n    import java.io.*;\r\n    import java.net.*;\r\n    \r\n    public class Rest {\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            URL url = new URL(INSERT_HERE_YOUR_URL);\r\n            String query = INSERT_HERE_YOUR_URL_PARAMETERS;\r\n    \r\n            //make connection\r\n            URLConnection urlc = url.openConnection();\r\n    \r\n            //use post mode\r\n            urlc.setDoOutput(true);\r\n            urlc.setAllowUserInteraction(false);\r\n    \r\n            //send query\r\n            PrintStream ps = new PrintStream(urlc.getOutputStream());\r\n            ps.print(query);\r\n            ps.close();\r\n    \r\n            //get result\r\n            BufferedReader br = new BufferedReader(new InputStreamReader(urlc\r\n                .getInputStream()));\r\n            String l = null;\r\n            while ((l=br.readLine())!=null) {\r\n                System.out.println(l);\r\n            }\r\n            br.close();\r\n    \t}\r\n    }","title":"RESTful call in Java","body":"<p>If you just need to make a simple call to a REST service from java you use something along these line</p>\n\n<pre><code>/*\n * Stolen from http://xml.nig.ac.jp/tutorial/rest/index.html\n * and http://www.dr-chuck.com/csev-blog/2007/09/calling-rest-web-services-from-java/\n*/\nimport java.io.*;\nimport java.net.*;\n\npublic class Rest {\n\n    public static void main(String[] args) throws IOException {\n        URL url = new URL(INSERT_HERE_YOUR_URL);\n        String query = INSERT_HERE_YOUR_URL_PARAMETERS;\n\n        //make connection\n        URLConnection urlc = url.openConnection();\n\n        //use post mode\n        urlc.setDoOutput(true);\n        urlc.setAllowUserInteraction(false);\n\n        //send query\n        PrintStream ps = new PrintStream(urlc.getOutputStream());\n        ps.print(query);\n        ps.close();\n\n        //get result\n        BufferedReader br = new BufferedReader(new InputStreamReader(urlc\n            .getInputStream()));\n        String l = null;\n        while ((l=br.readLine())!=null) {\n            System.out.println(l);\n        }\n        br.close();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":91502,"reputation":88301,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"down_vote_count":3,"up_vote_count":105,"is_accepted":true,"score":102,"last_activity_date":1397252056,"creation_date":1286878933,"answer_id":3913610,"question_id":3913502,"body_markdown":"If you are calling a RESTful service from a Service Provider (e.g Facebook, Twitter), you can do it with any *flavour* of your choice:\r\n\r\nIf you don&#39;t want to use external libraries, you can use `java.net.HttpURLConnection` or ` javax.net.ssl.HttpsURLConnection` (for SSL), but that is call encapsulated in a Factory type pattern in `java.net.URLConnection`.\r\nTo receive the result, you will have to `connection.getInputStream()` which returns you an `InputStream`. You will then have to convert your input stream to string and parse the string into it&#39;s representative object (e.g. XML, JSON, etc).\r\n\r\nAlternatively, [Apache HttpClient][1] (version 4 is the latest). It&#39;s more stable and robust than java&#39;s default `URLConnection` and it supports most (if not all) HTTP protocol (as well as it can be set to Strict mode). Your response will still be in `InputStream` and you can use it as mentioned above.\r\n\r\n\r\n----------\r\nDocumentation on HttpClient: http://hc.apache.org/httpcomponents-client-ga/tutorial/html/index.html\r\n\r\n  [1]: http://hc.apache.org/downloads.cgi","title":"RESTful call in Java","body":"<p>If you are calling a RESTful service from a Service Provider (e.g Facebook, Twitter), you can do it with any <em>flavour</em> of your choice:</p>\n\n<p>If you don't want to use external libraries, you can use <code>java.net.HttpURLConnection</code> or <code>javax.net.ssl.HttpsURLConnection</code> (for SSL), but that is call encapsulated in a Factory type pattern in <code>java.net.URLConnection</code>.\nTo receive the result, you will have to <code>connection.getInputStream()</code> which returns you an <code>InputStream</code>. You will then have to convert your input stream to string and parse the string into it's representative object (e.g. XML, JSON, etc).</p>\n\n<p>Alternatively, <a href=\"http://hc.apache.org/downloads.cgi\" rel=\"noreferrer\">Apache HttpClient</a> (version 4 is the latest). It's more stable and robust than java's default <code>URLConnection</code> and it supports most (if not all) HTTP protocol (as well as it can be set to Strict mode). Your response will still be in <code>InputStream</code> and you can use it as mentioned above.</p>\n\n<hr>\n\n<p>Documentation on HttpClient: <a href=\"http://hc.apache.org/httpcomponents-client-ga/tutorial/html/index.html\" rel=\"noreferrer\">http://hc.apache.org/httpcomponents-client-ga/tutorial/html/index.html</a></p>\n"},{"tags":[],"owner":{"account_id":167428,"reputation":525,"user_id":392222,"accept_rate":89,"display_name":"Joopiter"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1286879963,"creation_date":1286879963,"answer_id":3913747,"question_id":3913502,"body_markdown":"You can check out the [CXF][1]. You can visit the JAX-RS Article [here][2]\r\n\r\nCalling is as simple as this (quote):\r\n\r\n    BookStore store = JAXRSClientFactory.create(&quot;http://bookstore.com&quot;, BookStore.class);\r\n    // (1) remote GET call to http://bookstore.com/bookstore\r\n    Books books = store.getAllBooks();\r\n    // (2) no remote call\r\n    BookResource subresource = store.getBookSubresource(1);\r\n    // {3} remote GET call to http://bookstore.com/bookstore/1\r\n    Book b = subresource.getDescription();\r\n\r\n  [1]: http://cxf.apache.org/docs/jax-rs.html#JAX-RS-ClientAPI\r\n  [2]: http://cxf.apache.org/docs/jax-rs.html#JAX-RS-ClientAPI","title":"RESTful call in Java","body":"<p>You can check out the <a href=\"http://cxf.apache.org/docs/jax-rs.html#JAX-RS-ClientAPI\" rel=\"noreferrer\">CXF</a>. You can visit the JAX-RS Article <a href=\"http://cxf.apache.org/docs/jax-rs.html#JAX-RS-ClientAPI\" rel=\"noreferrer\">here</a></p>\n\n<p>Calling is as simple as this (quote):</p>\n\n<pre><code>BookStore store = JAXRSClientFactory.create(\"http://bookstore.com\", BookStore.class);\n// (1) remote GET call to http://bookstore.com/bookstore\nBooks books = store.getAllBooks();\n// (2) no remote call\nBookResource subresource = store.getBookSubresource(1);\n// {3} remote GET call to http://bookstore.com/bookstore/1\nBook b = subresource.getDescription();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4615,"reputation":51078,"user_id":7012,"accept_rate":83,"display_name":"Avi Flax"},"down_vote_count":0,"up_vote_count":171,"is_accepted":false,"score":171,"last_activity_date":1441029114,"creation_date":1286897650,"answer_id":3916369,"question_id":3913502,"body_markdown":"**Update:** It’s been almost 5 years since I wrote the answer below; today I have a different perspective.\r\n\r\n99% of the time when people use the term REST, they really mean HTTP; they could care less about “resources”, “representations”, “state transfers”, “uniform interfaces”, “hypermedia”, or any other [constraints or aspects of the REST architecture style identified by Fielding](https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm). The abstractions provided by various REST frameworks are therefore confusing and unhelpful.\r\n\r\nSo: you want to send HTTP requests using Java in 2015. You want an API that is clear, expressive, intuitive, idiomatic, simple. What to use? I no longer use Java, but for the past few years the Java HTTP client library that has seemed the most promising and interesting is [OkHttp](http://square.github.io/okhttp/). Check it out.\r\n\r\n----\r\n\r\nYou can definitely interact with RESTful web services by using `URLConnection` or [HTTPClient][1] to code HTTP requests.\r\n\r\nHowever, it&#39;s generally more desirable to use a library or framework which provides a simpler and more semantic API specifically designed for this purpose. This makes the code easier to write, read, and debug, and reduces duplication of effort. These frameworks generally implement some great features which aren&#39;t necessarily present or easy to use in lower-level libraries, such as content negotiation, caching, and authentication.\r\n\r\nSome of the most mature options are [Jersey][2], [RESTEasy][3], and [Restlet][4]. \r\n\r\nI&#39;m most familiar with Restlet, and Jersey, let&#39;s look at how we&#39;d make a `POST` request with both APIs.\r\n\r\n## Jersey Example ##\r\n\r\n    Form form = new Form();\r\n    form.add(&quot;x&quot;, &quot;foo&quot;);\r\n    form.add(&quot;y&quot;, &quot;bar&quot;);\r\n    \r\n    Client client = ClientBuilder.newClient();\r\n        \r\n    WebTarget resource = client.target(&quot;http://localhost:8080/someresource&quot;);\r\n\r\n    Builder request = resource.request();\r\n    request.accept(MediaType.APPLICATION_JSON);\r\n\r\n    Response response = request.get();\r\n\r\n    if (response.getStatusInfo().getFamily() == Family.SUCCESSFUL) {\r\n        System.out.println(&quot;Success! &quot; + response.getStatus());\r\n        System.out.println(response.getEntity());\r\n    } else {\r\n        System.out.println(&quot;ERROR! &quot; + response.getStatus());    \r\n        System.out.println(response.getEntity());\r\n    }\r\n\r\n\r\n## Restlet Example ##\r\n\r\n    Form form = new Form();\r\n    form.add(&quot;x&quot;, &quot;foo&quot;);\r\n    form.add(&quot;y&quot;, &quot;bar&quot;);\r\n\r\n    ClientResource resource = new ClientResource(&quot;http://localhost:8080/someresource&quot;);\r\n\r\n    Response response = resource.post(form.getWebRepresentation());\r\n\r\n    if (response.getStatus().isSuccess()) {\r\n        System.out.println(&quot;Success! &quot; + response.getStatus());\r\n        System.out.println(response.getEntity().getText());\r\n    } else {\r\n        System.out.println(&quot;ERROR! &quot; + response.getStatus());\r\n        System.out.println(response.getEntity().getText());\r\n    }\r\n\r\n\r\nOf course, GET requests are even simpler, and you can also specify things like entity tags and `Accept` headers, but hopefully these examples are usefully non-trivial but not too complex.\r\n\r\nAs you can see, Restlet and Jersey have similar client APIs. I believe they were developed around the same time, and therefore influenced each other.\r\n\r\nI find the Restlet API to be a little more semantic, and therefore a little clearer, but YMMV.\r\n\r\nAs I said, I&#39;m most familiar with Restlet, I&#39;ve used it in many apps for years, and I&#39;m very happy with it. It&#39;s a very mature, robust, simple, effective, active, and well-supported framework. I can&#39;t speak to Jersey or RESTEasy, but my impression is that they&#39;re both also solid choices.\r\n\r\n\r\n  [1]: http://hc.apache.org/httpcomponents-client-ga/index.html\r\n  [2]: http://jersey.java.net/nonav/documentation/latest/user-guide.html#client-api\r\n  [3]: http://jboss.org/resteasy\r\n  [4]: http://wiki.restlet.org/docs_2.0/13-restlet/21-restlet/318-restlet/320-restlet.html","title":"RESTful call in Java","body":"<p><strong>Update:</strong> It’s been almost 5 years since I wrote the answer below; today I have a different perspective.</p>\n\n<p>99% of the time when people use the term REST, they really mean HTTP; they could care less about “resources”, “representations”, “state transfers”, “uniform interfaces”, “hypermedia”, or any other <a href=\"https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm\" rel=\"noreferrer\">constraints or aspects of the REST architecture style identified by Fielding</a>. The abstractions provided by various REST frameworks are therefore confusing and unhelpful.</p>\n\n<p>So: you want to send HTTP requests using Java in 2015. You want an API that is clear, expressive, intuitive, idiomatic, simple. What to use? I no longer use Java, but for the past few years the Java HTTP client library that has seemed the most promising and interesting is <a href=\"http://square.github.io/okhttp/\" rel=\"noreferrer\">OkHttp</a>. Check it out.</p>\n\n<hr>\n\n<p>You can definitely interact with RESTful web services by using <code>URLConnection</code> or <a href=\"http://hc.apache.org/httpcomponents-client-ga/index.html\" rel=\"noreferrer\">HTTPClient</a> to code HTTP requests.</p>\n\n<p>However, it's generally more desirable to use a library or framework which provides a simpler and more semantic API specifically designed for this purpose. This makes the code easier to write, read, and debug, and reduces duplication of effort. These frameworks generally implement some great features which aren't necessarily present or easy to use in lower-level libraries, such as content negotiation, caching, and authentication.</p>\n\n<p>Some of the most mature options are <a href=\"http://jersey.java.net/nonav/documentation/latest/user-guide.html#client-api\" rel=\"noreferrer\">Jersey</a>, <a href=\"http://jboss.org/resteasy\" rel=\"noreferrer\">RESTEasy</a>, and <a href=\"http://wiki.restlet.org/docs_2.0/13-restlet/21-restlet/318-restlet/320-restlet.html\" rel=\"noreferrer\">Restlet</a>. </p>\n\n<p>I'm most familiar with Restlet, and Jersey, let's look at how we'd make a <code>POST</code> request with both APIs.</p>\n\n<h2>Jersey Example</h2>\n\n<pre><code>Form form = new Form();\nform.add(\"x\", \"foo\");\nform.add(\"y\", \"bar\");\n\nClient client = ClientBuilder.newClient();\n\nWebTarget resource = client.target(\"http://localhost:8080/someresource\");\n\nBuilder request = resource.request();\nrequest.accept(MediaType.APPLICATION_JSON);\n\nResponse response = request.get();\n\nif (response.getStatusInfo().getFamily() == Family.SUCCESSFUL) {\n    System.out.println(\"Success! \" + response.getStatus());\n    System.out.println(response.getEntity());\n} else {\n    System.out.println(\"ERROR! \" + response.getStatus());    \n    System.out.println(response.getEntity());\n}\n</code></pre>\n\n<h2>Restlet Example</h2>\n\n<pre><code>Form form = new Form();\nform.add(\"x\", \"foo\");\nform.add(\"y\", \"bar\");\n\nClientResource resource = new ClientResource(\"http://localhost:8080/someresource\");\n\nResponse response = resource.post(form.getWebRepresentation());\n\nif (response.getStatus().isSuccess()) {\n    System.out.println(\"Success! \" + response.getStatus());\n    System.out.println(response.getEntity().getText());\n} else {\n    System.out.println(\"ERROR! \" + response.getStatus());\n    System.out.println(response.getEntity().getText());\n}\n</code></pre>\n\n<p>Of course, GET requests are even simpler, and you can also specify things like entity tags and <code>Accept</code> headers, but hopefully these examples are usefully non-trivial but not too complex.</p>\n\n<p>As you can see, Restlet and Jersey have similar client APIs. I believe they were developed around the same time, and therefore influenced each other.</p>\n\n<p>I find the Restlet API to be a little more semantic, and therefore a little clearer, but YMMV.</p>\n\n<p>As I said, I'm most familiar with Restlet, I've used it in many apps for years, and I'm very happy with it. It's a very mature, robust, simple, effective, active, and well-supported framework. I can't speak to Jersey or RESTEasy, but my impression is that they're both also solid choices.</p>\n"},{"tags":[],"owner":{"account_id":2866125,"reputation":99,"user_id":2460423,"display_name":"Lisandro"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1611384454,"creation_date":1370534139,"answer_id":16966723,"question_id":3913502,"body_markdown":"I want to share my personal experience, calling a REST WS with Post JSON call:\r\n\r\n    \r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.io.PrintStream;\r\n    import java.net.URL;\r\n    import java.net.URLConnection;\r\n    \r\n    public class HWS {\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            URL url = new URL(&quot;INSERT YOUR SERVER REQUEST&quot;);\r\n            //Insert your JSON query request\r\n            String query = &quot;{&#39;PARAM1&#39;: &#39;VALUE&#39;,&#39;PARAM2&#39;: &#39;VALUE&#39;,&#39;PARAM3&#39;: &#39;VALUE&#39;,&#39;PARAM4&#39;: &#39;VALUE&#39;}&quot;;\r\n            //It change the apostrophe char to double quote char, to form a correct JSON string\r\n            query=query.replace(&quot;&#39;&quot;, &quot;\\&quot;&quot;);\r\n    \r\n            try{\r\n    \t        //make connection\r\n    \t        URLConnection urlc = url.openConnection();\r\n    \t        //It Content Type is so important to support JSON call\r\n    \t        urlc.setRequestProperty(&quot;Content-Type&quot;, &quot;application/xml&quot;);\r\n    \t        Msj(&quot;Conectando: &quot; + url.toString());\r\n    \t        //use post mode\r\n    \t        urlc.setDoOutput(true);\r\n    \t        urlc.setAllowUserInteraction(false);\r\n    \t\r\n    \t        //send query\r\n    \t        PrintStream ps = new PrintStream(urlc.getOutputStream());\r\n    \t        ps.print(query);\r\n    \t        Msj(&quot;Consulta: &quot; + query);\r\n    \t        ps.close();\r\n    \t\r\n    \t        //get result\r\n    \t        BufferedReader br = new BufferedReader(new InputStreamReader(urlc.getInputStream()));\r\n    \t        String l = null;\r\n    \t        while ((l=br.readLine())!=null) {\r\n    \t            Msj(l);\r\n    \t        }\r\n    \t        br.close();\r\n            } catch (Exception e){\r\n            \tMsj(&quot;Error ocurrido&quot;);\r\n            \tMsj(e.toString());\r\n            }\r\n        }\r\n    \t\r\n    \tprivate static void Msj(String texto){\r\n        \tSystem.out.println(texto);\r\n        }\r\n    }","title":"RESTful call in Java","body":"<p>I want to share my personal experience, calling a REST WS with Post JSON call:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintStream;\nimport java.net.URL;\nimport java.net.URLConnection;\n\npublic class HWS {\n\n    public static void main(String[] args) throws IOException {\n        URL url = new URL(&quot;INSERT YOUR SERVER REQUEST&quot;);\n        //Insert your JSON query request\n        String query = &quot;{'PARAM1': 'VALUE','PARAM2': 'VALUE','PARAM3': 'VALUE','PARAM4': 'VALUE'}&quot;;\n        //It change the apostrophe char to double quote char, to form a correct JSON string\n        query=query.replace(&quot;'&quot;, &quot;\\&quot;&quot;);\n\n        try{\n            //make connection\n            URLConnection urlc = url.openConnection();\n            //It Content Type is so important to support JSON call\n            urlc.setRequestProperty(&quot;Content-Type&quot;, &quot;application/xml&quot;);\n            Msj(&quot;Conectando: &quot; + url.toString());\n            //use post mode\n            urlc.setDoOutput(true);\n            urlc.setAllowUserInteraction(false);\n    \n            //send query\n            PrintStream ps = new PrintStream(urlc.getOutputStream());\n            ps.print(query);\n            Msj(&quot;Consulta: &quot; + query);\n            ps.close();\n    \n            //get result\n            BufferedReader br = new BufferedReader(new InputStreamReader(urlc.getInputStream()));\n            String l = null;\n            while ((l=br.readLine())!=null) {\n                Msj(l);\n            }\n            br.close();\n        } catch (Exception e){\n            Msj(&quot;Error ocurrido&quot;);\n            Msj(e.toString());\n        }\n    }\n    \n    private static void Msj(String texto){\n        System.out.println(texto);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1712951,"reputation":3348,"user_id":1570601,"accept_rate":50,"display_name":"JRun"},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1479996361,"creation_date":1415695209,"answer_id":26860736,"question_id":3913502,"body_markdown":"Indeed, this is &quot;very complicated in Java&quot;:\r\n\r\nFrom: https://jersey.java.net/documentation/latest/client.html\r\n\r\n\tClient client = ClientBuilder.newClient();\r\n\tWebTarget target = client.target(&quot;http://foo&quot;).path(&quot;bar&quot;);\r\n    Invocation.Builder invocationBuilder = target.request(MediaType.TEXT_PLAIN_TYPE);\r\n   \tResponse response = invocationBuilder.get();","title":"RESTful call in Java","body":"<p>Indeed, this is \"very complicated in Java\":</p>\n\n<p>From: <a href=\"https://jersey.java.net/documentation/latest/client.html\" rel=\"nofollow noreferrer\">https://jersey.java.net/documentation/latest/client.html</a></p>\n\n<pre><code>Client client = ClientBuilder.newClient();\nWebTarget target = client.target(\"http://foo\").path(\"bar\");\nInvocation.Builder invocationBuilder = target.request(MediaType.TEXT_PLAIN_TYPE);\nResponse response = invocationBuilder.get();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1144833,"reputation":7270,"user_id":1127843,"accept_rate":86,"display_name":"kayz1"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1421930310,"creation_date":1421921211,"answer_id":28085986,"question_id":3913502,"body_markdown":"You can use [Async Http Client][1] (The library also supports the **WebSocket** Protocol) like that:\r\n\r\n    \tString clientChannel = UriBuilder.fromPath(&quot;http://localhost:8080/api/{id}&quot;).build(id).toString();\r\n\r\n\t\ttry (AsyncHttpClient asyncHttpClient = new AsyncHttpClient())\r\n\t\t{\r\n\t\t\tBoundRequestBuilder postRequest = asyncHttpClient.preparePost(clientChannel);\r\n\t\t\tpostRequest.setHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON);\r\n\t\t\tpostRequest.setBody(message.toString()); // returns JSON\r\n\t\t\tpostRequest.execute().get();\r\n\t\t}\r\n\r\n\r\n  [1]: https://github.com/AsyncHttpClient/async-http-client","title":"RESTful call in Java","body":"<p>You can use <a href=\"https://github.com/AsyncHttpClient/async-http-client\" rel=\"nofollow\">Async Http Client</a> (The library also supports the <strong>WebSocket</strong> Protocol) like that:</p>\n\n<pre><code>    String clientChannel = UriBuilder.fromPath(\"http://localhost:8080/api/{id}\").build(id).toString();\n\n    try (AsyncHttpClient asyncHttpClient = new AsyncHttpClient())\n    {\n        BoundRequestBuilder postRequest = asyncHttpClient.preparePost(clientChannel);\n        postRequest.setHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON);\n        postRequest.setBody(message.toString()); // returns JSON\n        postRequest.execute().get();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7803174,"reputation":712,"user_id":5901831,"accept_rate":100,"display_name":"Hemin"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1494397733,"creation_date":1487746951,"answer_id":42384741,"question_id":3913502,"body_markdown":"Most Easy Solution will be using Apache http client library. refer following sample code..\r\nthis code uses basic security for authenticating.\r\n\r\nAdd following Dependency.\r\n\r\n&gt;     &lt;dependency&gt;\r\n&gt;     &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n&gt;     &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n&gt;     &lt;version&gt;4.4&lt;/version&gt;\r\n&gt;     &lt;/dependency&gt;\r\n\r\n    CredentialsProvider credentialsProvider = new BasicCredentialsProvider();\r\n    Credentials credentials = new UsernamePasswordCredentials(&quot;username&quot;, &quot;password&quot;);\r\n    credentialsProvider.setCredentials(AuthScope.ANY, credentials);\r\n    HttpClient client = HttpClientBuilder.create().setDefaultCredentialsProvider(credentialsProvider).build();\r\n    HttpPost request = new HttpPost(&quot;https://api.plivo.com/v1/Account/MAYNJ3OT/Message/&quot;);HttpResponse response = client.execute(request);\r\n        // Get the response\r\n        BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));\r\n        String line = &quot;&quot;;\r\n        while ((line = rd.readLine()) != null) {    \r\n        textView = textView + line;\r\n        }\r\n        System.out.println(textView);\r\n            \t\t","title":"RESTful call in Java","body":"<p>Most Easy Solution will be using Apache http client library. refer following sample code..\nthis code uses basic security for authenticating.</p>\n\n<p>Add following Dependency.</p>\n\n<blockquote>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n&lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n&lt;version&gt;4.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n</blockquote>\n\n<pre><code>CredentialsProvider credentialsProvider = new BasicCredentialsProvider();\nCredentials credentials = new UsernamePasswordCredentials(\"username\", \"password\");\ncredentialsProvider.setCredentials(AuthScope.ANY, credentials);\nHttpClient client = HttpClientBuilder.create().setDefaultCredentialsProvider(credentialsProvider).build();\nHttpPost request = new HttpPost(\"https://api.plivo.com/v1/Account/MAYNJ3OT/Message/\");HttpResponse response = client.execute(request);\n    // Get the response\n    BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));\n    String line = \"\";\n    while ((line = rd.readLine()) != null) {    \n    textView = textView + line;\n    }\n    System.out.println(textView);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9471530,"reputation":107,"user_id":7042240,"accept_rate":100,"display_name":"Francis Raj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1580442286,"creation_date":1580442286,"answer_id":59997594,"question_id":3913502,"body_markdown":"I see many answers, here&#39;s what we are using in 2020 [WebClient][1], and BTW [RestTemplate][2] is going to get deprecated. (can check this) [RestTemplate going to be deprecated][3]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/reactive/function/client/WebClient.html\r\n  [2]: http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html\r\n  [3]: https://github.com/spring-guides/gs-consuming-rest/issues/28","title":"RESTful call in Java","body":"<p>I see many answers, here's what we are using in 2020 <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/reactive/function/client/WebClient.html\" rel=\"nofollow noreferrer\">WebClient</a>, and BTW <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html\" rel=\"nofollow noreferrer\">RestTemplate</a> is going to get deprecated. (can check this) <a href=\"https://github.com/spring-guides/gs-consuming-rest/issues/28\" rel=\"nofollow noreferrer\">RestTemplate going to be deprecated</a></p>\n"},{"tags":[],"owner":{"account_id":13447169,"reputation":1234,"user_id":9702804,"display_name":"G. Ciardini"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1634937576,"creation_date":1634937576,"answer_id":69683174,"question_id":3913502,"body_markdown":"The following is an example of a GET request that prints the response body as a\r\nString with [HttpRequest][1]: \r\n\r\n``` Java\r\n   HttpClient client = HttpClient.newHttpClient();\r\n   HttpRequest request = HttpRequest.newBuilder()\r\n         .uri(URI.create(&quot;http://example.org/&quot;))\r\n         .build();\r\n   client.sendAsync(request, BodyHandlers.ofString())\r\n         .thenApply(HttpResponse::body)\r\n         .thenAccept(System.out::println)\r\n         .join(); \r\n```\r\nIf you need to set the header you could use the following method inside the `HttpRequest.Builder`:\r\n\r\n``` Java\r\n.setHeader(&quot;api-key&quot;, &quot;value&quot;)\r\n```\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpRequest.html","title":"RESTful call in Java","body":"<p>The following is an example of a GET request that prints the response body as a\nString with <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpRequest.html\" rel=\"nofollow noreferrer\">HttpRequest</a>:</p>\n<pre><code>   HttpClient client = HttpClient.newHttpClient();\n   HttpRequest request = HttpRequest.newBuilder()\n         .uri(URI.create(&quot;http://example.org/&quot;))\n         .build();\n   client.sendAsync(request, BodyHandlers.ofString())\n         .thenApply(HttpResponse::body)\n         .thenAccept(System.out::println)\n         .join(); \n</code></pre>\n<p>If you need to set the header you could use the following method inside the <code>HttpRequest.Builder</code>:</p>\n<pre><code>.setHeader(&quot;api-key&quot;, &quot;value&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3672748,"reputation":3884,"user_id":3059517,"accept_rate":85,"display_name":"Mark Giaconia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662115290,"creation_date":1662115290,"answer_id":73581365,"question_id":3913502,"body_markdown":"Here is a utility class I use for calling some internal APIs (Sept 2022). All core java except for Gson for the Json de/serialization.\r\nPOST and GET.\r\n\r\n\r\n    package com.somepackagename.utils;\r\n    \r\n    import com.google.gson.Gson;\r\n    import com.google.gson.GsonBuilder;\r\n    import java.io.IOException;\r\n    import java.net.URI;\r\n    import java.net.URISyntaxException;\r\n    import java.net.http.HttpClient;\r\n    import java.net.http.HttpRequest;\r\n    import java.net.http.HttpResponse;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    \r\n    public class HTTPCaller {\r\n    \r\n      private final String BEARER_TOKEN;\r\n      private static Gson gson = new GsonBuilder().setPrettyPrinting().serializeSpecialFloatingPointValues().create();\r\n    \r\n      public HTTPCaller(String bearerToken) {\r\n        this.BEARER_TOKEN = bearerToken;\r\n      }\r\n    \r\n      public Map&lt;String, Object&gt; post(String endpoint, String jsonPayload, Map&lt;String, String&gt; headers)\r\n              throws IOException, URISyntaxException, InterruptedException {\r\n    \r\n        HttpRequest.Builder reqBuilder = HttpRequest.newBuilder();\r\n        if (headers != null) {\r\n          for (Map.Entry&lt;String, String&gt; header : headers.entrySet()) {\r\n            reqBuilder.header(header.getKey(), header.getValue());\r\n          }\r\n        }\r\n    //always add these anyway, or not\r\n        reqBuilder.header(&quot;content-type&quot;, &quot;application/json&quot;)\r\n                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + BEARER_TOKEN);\r\n    \r\n        HttpRequest request = reqBuilder\r\n                .uri(new URI(endpoint))\r\n                .POST(HttpRequest.BodyPublishers.ofByteArray(jsonPayload.getBytes()))\r\n                .build();\r\n    \r\n        HttpResponse&lt;String&gt; response = HttpClient.newBuilder()\r\n                .build()\r\n                .send(request, java.net.http.HttpResponse.BodyHandlers.ofString());\r\n        String responseBody = response.body();\r\n        Map&lt;String, Object&gt; output = (Map&lt;String, Object&gt;) gson.fromJson(responseBody, HashMap.class);\r\n    \r\n        return output;\r\n    \r\n      }\r\n    \r\n      public Map&lt;String, Object&gt; get(String endpoint) throws Exception {\r\n    \r\n        HttpRequest.Builder reqBuilder = HttpRequest.newBuilder();\r\n    \r\n    //always add these anyway\r\n        reqBuilder.header(&quot;content-type&quot;, &quot;application/json&quot;)\r\n                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + BEARER_TOKEN);\r\n    \r\n        HttpRequest request = reqBuilder\r\n                .uri(new URI(endpoint))\r\n                .GET()\r\n                .build();\r\n    \r\n        HttpResponse&lt;String&gt; response = HttpClient.newBuilder()\r\n                .build()\r\n                .send(request, java.net.http.HttpResponse.BodyHandlers.ofString());\r\n        String responseBody = response.body();\r\n        Map&lt;String, Object&gt; output = (Map&lt;String, Object&gt;) gson.fromJson(responseBody, HashMap.class);\r\n    \r\n        return output;\r\n    \r\n      }\r\n    }\r\n\r\n","title":"RESTful call in Java","body":"<p>Here is a utility class I use for calling some internal APIs (Sept 2022). All core java except for Gson for the Json de/serialization.\nPOST and GET.</p>\n<pre><code>package com.somepackagename.utils;\n\nimport com.google.gson.Gson;\nimport com.google.gson.GsonBuilder;\nimport java.io.IOException;\nimport java.net.URI;\nimport java.net.URISyntaxException;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\nimport java.util.HashMap;\nimport java.util.Map;\n\n\npublic class HTTPCaller {\n\n  private final String BEARER_TOKEN;\n  private static Gson gson = new GsonBuilder().setPrettyPrinting().serializeSpecialFloatingPointValues().create();\n\n  public HTTPCaller(String bearerToken) {\n    this.BEARER_TOKEN = bearerToken;\n  }\n\n  public Map&lt;String, Object&gt; post(String endpoint, String jsonPayload, Map&lt;String, String&gt; headers)\n          throws IOException, URISyntaxException, InterruptedException {\n\n    HttpRequest.Builder reqBuilder = HttpRequest.newBuilder();\n    if (headers != null) {\n      for (Map.Entry&lt;String, String&gt; header : headers.entrySet()) {\n        reqBuilder.header(header.getKey(), header.getValue());\n      }\n    }\n//always add these anyway, or not\n    reqBuilder.header(&quot;content-type&quot;, &quot;application/json&quot;)\n            .header(&quot;Authorization&quot;, &quot;Bearer &quot; + BEARER_TOKEN);\n\n    HttpRequest request = reqBuilder\n            .uri(new URI(endpoint))\n            .POST(HttpRequest.BodyPublishers.ofByteArray(jsonPayload.getBytes()))\n            .build();\n\n    HttpResponse&lt;String&gt; response = HttpClient.newBuilder()\n            .build()\n            .send(request, java.net.http.HttpResponse.BodyHandlers.ofString());\n    String responseBody = response.body();\n    Map&lt;String, Object&gt; output = (Map&lt;String, Object&gt;) gson.fromJson(responseBody, HashMap.class);\n\n    return output;\n\n  }\n\n  public Map&lt;String, Object&gt; get(String endpoint) throws Exception {\n\n    HttpRequest.Builder reqBuilder = HttpRequest.newBuilder();\n\n//always add these anyway\n    reqBuilder.header(&quot;content-type&quot;, &quot;application/json&quot;)\n            .header(&quot;Authorization&quot;, &quot;Bearer &quot; + BEARER_TOKEN);\n\n    HttpRequest request = reqBuilder\n            .uri(new URI(endpoint))\n            .GET()\n            .build();\n\n    HttpResponse&lt;String&gt; response = HttpClient.newBuilder()\n            .build()\n            .send(request, java.net.http.HttpResponse.BodyHandlers.ofString());\n    String responseBody = response.body();\n    Map&lt;String, Object&gt; output = (Map&lt;String, Object&gt;) gson.fromJson(responseBody, HashMap.class);\n\n    return output;\n\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":309142,"reputation":3795,"user_id":621438,"accept_rate":79,"display_name":"LukeSolar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679913346,"creation_date":1679913346,"answer_id":75854727,"question_id":3913502,"body_markdown":"Simple and synchronous version of G. Ciardini with modern Java:\r\n\r\n```\r\nHttpClient client = HttpClient.newHttpClient();\r\nHttpRequest request = HttpRequest.newBuilder()\r\n                .uri(create(&quot;https://some-rest-url/path&quot;))\r\n                //.headers(...)\r\n                .build();\r\nHttpResponse&lt;String&gt; httpResponse = client.send(request, HttpResponse.BodyHandlers.ofString());\r\nSystem.out.println(httpResponse.body());\r\n```","title":"RESTful call in Java","body":"<p>Simple and synchronous version of G. Ciardini with modern Java:</p>\n<pre><code>HttpClient client = HttpClient.newHttpClient();\nHttpRequest request = HttpRequest.newBuilder()\n                .uri(create(&quot;https://some-rest-url/path&quot;))\n                //.headers(...)\n                .build();\nHttpResponse&lt;String&gt; httpResponse = client.send(request, HttpResponse.BodyHandlers.ofString());\nSystem.out.println(httpResponse.body());\n</code></pre>\n"}],"owner":{"account_id":164508,"reputation":20225,"user_id":387298,"accept_rate":91,"display_name":"Questions"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":619979,"favorite_count":0,"down_vote_count":3,"up_vote_count":177,"accepted_answer_id":3913610,"answer_count":14,"score":174,"last_activity_date":1679913346,"creation_date":1286878085,"question_id":3913502,"body_markdown":"I am going to make a RESTful call in Java. However, I don&#39;t know how to make the call. Do I need to use the `URLConnection` or others?","title":"RESTful call in Java","body":"<p>I am going to make a RESTful call in Java. However, I don't know how to make the call. Do I need to use the <code>URLConnection</code> or others?</p>\n"},{"tags":["java","arrays","arraylist","linked-list"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1679913233,"post_id":75854597,"comment_id":133800087,"body_markdown":"`students.remove(id-1);` *should* work (zero-indexed), but of course, only *once* if you think about it ;)","body":"<code>students.remove(id-1);</code> <i>should</i> work (zero-indexed), but of course, only <i>once</i> if you think about it ;)"},{"owner":{"account_id":28136636,"reputation":1,"user_id":21500306,"display_name":"NeedHelp"},"score":0,"creation_date":1679914555,"post_id":75854597,"comment_id":133800418,"body_markdown":"That only works if the ID never misses a number yea? \n\n(hence the only works once line right?)","body":"That only works if the ID never misses a number yea?   (hence the only works once line right?)"}],"owner":{"account_id":28136636,"reputation":1,"user_id":21500306,"display_name":"NeedHelp"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1679915184,"answer_count":0,"score":0,"last_activity_date":1679912622,"creation_date":1679912449,"question_id":75854597,"body_markdown":"I am really struggling with something that should seem super simple but I can&#39;t get it to work.\r\n\r\nI have a linkedlist looking something like this:\r\n\r\n - ID \tFirstName \tLastName    Score \r\n - 1\tDave\t\tDavison     5   \r\n - 2\tJeff\t\tJeffison    1 \r\n - 3\tBrian\t\tBrianson    3\r\n\r\nI am trying to get a user to input a value for the ID field, and then delete the whole object.\r\n\r\nWhen I do this it deletes the object based on the array ID (so if they input 1 it removes the second object)\r\n\r\n`System.out.println(&quot;Please enter an ID number to remove&quot;); \r\nint id = scanner.nextInt();\r\nstudents.remove(id);`\r\n\r\nI have tried everything Mr Google would help me with but it varied from not working at all, to throwing errors.  This has to be something simple I am missing yea?","title":"Trying to remove an entire object from a linkedlist based on a specific bit of data in the lisy","body":"<p>I am really struggling with something that should seem super simple but I can't get it to work.</p>\n<p>I have a linkedlist looking something like this:</p>\n<ul>\n<li>ID   FirstName   LastName    Score</li>\n<li>1    Dave        Davison     5</li>\n<li>2    Jeff        Jeffison    1</li>\n<li>3    Brian       Brianson    3</li>\n</ul>\n<p>I am trying to get a user to input a value for the ID field, and then delete the whole object.</p>\n<p>When I do this it deletes the object based on the array ID (so if they input 1 it removes the second object)</p>\n<p><code>System.out.println(&quot;Please enter an ID number to remove&quot;);  int id = scanner.nextInt(); students.remove(id);</code></p>\n<p>I have tried everything Mr Google would help me with but it varied from not working at all, to throwing errors.  This has to be something simple I am missing yea?</p>\n"},{"tags":["java","classloader","memory-leaks","application-server"],"comments":[{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1295481114,"post_id":4742050,"comment_id":5242423,"body_markdown":"btw, unrelated but leaks and java.util.Logger was one of the worst decisions coming in java 6.0.18.. that made &#39;em held by WeakReferences totally breaking a lot of existing code.","body":"btw, unrelated but leaks and java.util.Logger was one of the worst decisions coming in java 6.0.18.. that made &#39;em held by WeakReferences totally breaking a lot of existing code."},{"owner":{"account_id":31685,"reputation":3185,"user_id":87206,"display_name":"CurtainDog"},"score":0,"creation_date":1295482401,"post_id":4742050,"comment_id":5242557,"body_markdown":"Interesting question... it appears to me though that a class loader leak is always the result of different leak somewhere else in the system (e.g. an unwanted instance is hanging around therefore its class loader can&#39;t be collected, etc, etc...) Is this a fair conclusion?","body":"Interesting question... it appears to me though that a class loader leak is always the result of different leak somewhere else in the system (e.g. an unwanted instance is hanging around therefore its class loader can&#39;t be collected, etc, etc...) Is this a fair conclusion?"},{"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"score":0,"creation_date":1295482785,"post_id":4742050,"comment_id":5242601,"body_markdown":"@CurtainDog Yes.  The classloader will only leak if a class it loads is restricting it from being garbage collected.  As the articles goes over, a servlet class that creates an anonymous inner class of one of bootstrap classes will cause the classloader to not get garbage collected","body":"@CurtainDog Yes.  The classloader will only leak if a class it loads is restricting it from being garbage collected.  As the articles goes over, a servlet class that creates an anonymous inner class of one of bootstrap classes will cause the classloader to not get garbage collected"},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1295482921,"post_id":4742050,"comment_id":5242617,"body_markdown":"no, it&#39;s not... absolutely innocently looking threads can leak classloaders as well, if you are not careful.","body":"no, it&#39;s not... absolutely innocently looking threads can leak classloaders as well, if you are not careful."},{"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"score":0,"creation_date":1295483157,"post_id":4742050,"comment_id":5242641,"body_markdown":"@bestsss - thats a good point I was a bit too empirical there.","body":"@bestsss - thats a good point I was a bit too empirical there."}],"answers":[{"tags":[],"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1295483023,"creation_date":1295480959,"answer_id":4742104,"question_id":4742050,"body_markdown":"Those are one of the worst leaks... but any leak is evil. So, I, personally, resolve them. Profiling helps as well.\r\nThere are no easy ways per se but:\r\n\r\n* Threads go into threadGroups +starter thread for each module to ensure new Threads() have that group.\r\n* Special care of the Thread.inheritedAccessControlContext (which holds a reference to the classloader)\r\n* WeakReferences when you need to keep classes, actually use WeakReferences for listeners, so no one can skip de-registers (and use only annon. clasess). Having the framework for WeakListeners does help.\r\n* Extra care for DB drives, java.security.Provider\r\n* few more tricks (incl. dynamic enhance of class files but that&#39;s overkill usually)\r\n\r\nbottom line:\r\n____\r\nleaks are evil.","title":"ClassLoader Leak - Are they worth solving?","body":"<p>Those are one of the worst leaks... but any leak is evil. So, I, personally, resolve them. Profiling helps as well.\nThere are no easy ways per se but:</p>\n\n<ul>\n<li>Threads go into threadGroups +starter thread for each module to ensure new Threads() have that group.</li>\n<li>Special care of the Thread.inheritedAccessControlContext (which holds a reference to the classloader)</li>\n<li>WeakReferences when you need to keep classes, actually use WeakReferences for listeners, so no one can skip de-registers (and use only annon. clasess). Having the framework for WeakListeners does help.</li>\n<li>Extra care for DB drives, java.security.Provider</li>\n<li>few more tricks (incl. dynamic enhance of class files but that's overkill usually)</li>\n</ul>\n\n<p>bottom line:</p>\n\n<hr>\n\n<p>leaks are evil.</p>\n"},{"tags":[],"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1295481062,"creation_date":1295481062,"answer_id":4742114,"question_id":4742050,"body_markdown":"I&#39;d approach the problem pragmatically:\r\n\r\n1. Is it causing problems in production environments?\r\n2. Have you got enough time and resources to track it down? \r\n\r\nIf the answer to both these questions is yes, then by all means go for it. If it&#39;s one yes, one no, it&#39;s probably up to the management to decide, if both are nos, don&#39;t bother.","title":"ClassLoader Leak - Are they worth solving?","body":"<p>I'd approach the problem pragmatically:</p>\n\n<ol>\n<li>Is it causing problems in production environments?</li>\n<li>Have you got enough time and resources to track it down? </li>\n</ol>\n\n<p>If the answer to both these questions is yes, then by all means go for it. If it's one yes, one no, it's probably up to the management to decide, if both are nos, don't bother.</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1295535259,"creation_date":1295481579,"answer_id":4742156,"question_id":4742050,"body_markdown":"It really depends on the application, or rather, the deployment process being used. Many applications are only ever redeplyoed during development, new releases happen once every few months, and the application server is restarted for other reasons far more often than the app is deployed. In those circumstances, chasing Classloader leaks is a waste of time.\r\n\r\nOf course, if you plan on implementing a [continuous deployment process][1], especially in a high-availability environment, then Classloader leaks are something you really need to tackle. But there are a lot of other things you need to do better than most projects before that becomes an issue.\r\n\r\n\r\n  [1]: http://continuousdelivery.com/","title":"ClassLoader Leak - Are they worth solving?","body":"<p>It really depends on the application, or rather, the deployment process being used. Many applications are only ever redeplyoed during development, new releases happen once every few months, and the application server is restarted for other reasons far more often than the app is deployed. In those circumstances, chasing Classloader leaks is a waste of time.</p>\n\n<p>Of course, if you plan on implementing a <a href=\"http://continuousdelivery.com/\" rel=\"noreferrer\">continuous deployment process</a>, especially in a high-availability environment, then Classloader leaks are something you really need to tackle. But there are a lot of other things you need to do better than most projects before that becomes an issue.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1679912148,"creation_date":1295481802,"answer_id":4742174,"question_id":4742050,"body_markdown":"@biziclop is right.  You need to be pragmatic about this.\r\n\r\nIf the problem is only in test servers, you can probably dismiss this as not worth the effort to solve.\r\n\r\nIf the problem is in production servers then you need a solution or a workaround.  The solution is hard work, but the workarounds may be less work:\r\n\r\n  - Workaround #1 - don&#39;t do hot deploys to production servers; only do full redeployments and restarts.  \r\n\r\n  - Workaround #2 - periodically do a full restart of the production servers to avoid running out of permgen space&lt;sup&gt;1&lt;/sup&gt;.  Combine this with increasing the permgen space.\r\n\r\nIn a well resourced / well run environment you should be doing all of your testing on separate servers. If the downtime of a full deployment is a concern, you should be minimizing redeployment disruptions using server replication and progressive redeployment.  Hot deployments to production should be unnecessary.  \r\n\r\nIf you are in the position where you have no test environment and are doing frequent hot deploys to a production machine to minimize downtime, you are skating thin ice.  The chances are that you will eventually make a mistake that results in damage which takes a *long time* to recover from ... \r\n\r\n\r\n-------------\r\n\r\n&lt;sup&gt;1 - In Java 8 and later, permgen is gone.  But the flipside is that a classloader leak will now leak memory in the regular heap.&lt;/sup&gt;","title":"ClassLoader Leak - Are they worth solving?","body":"<p>@biziclop is right.  You need to be pragmatic about this.</p>\n<p>If the problem is only in test servers, you can probably dismiss this as not worth the effort to solve.</p>\n<p>If the problem is in production servers then you need a solution or a workaround.  The solution is hard work, but the workarounds may be less work:</p>\n<ul>\n<li><p>Workaround #1 - don't do hot deploys to production servers; only do full redeployments and restarts.</p>\n</li>\n<li><p>Workaround #2 - periodically do a full restart of the production servers to avoid running out of permgen space<sup>1</sup>.  Combine this with increasing the permgen space.</p>\n</li>\n</ul>\n<p>In a well resourced / well run environment you should be doing all of your testing on separate servers. If the downtime of a full deployment is a concern, you should be minimizing redeployment disruptions using server replication and progressive redeployment.  Hot deployments to production should be unnecessary.</p>\n<p>If you are in the position where you have no test environment and are doing frequent hot deploys to a production machine to minimize downtime, you are skating thin ice.  The chances are that you will eventually make a mistake that results in damage which takes a <em>long time</em> to recover from ...</p>\n<hr />\n<p><sup>1 - In Java 8 and later, permgen is gone.  But the flipside is that a classloader leak will now leak memory in the regular heap.</sup></p>\n"},{"tags":[],"owner":{"account_id":1312512,"reputation":2053,"user_id":1260222,"display_name":"Mattias Jiderhamn"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1387621490,"creation_date":1387621490,"answer_id":20717951,"question_id":4742050,"body_markdown":"Yes, there are easier - and more proper - ways to resolve the leaks. Add the [ClassLoader Leak Prevention library][1] to your project, and it should take care of the problem for you!\r\n\r\nIn case you want to track down the leaks yourself, [this blog series][2] will be of help.\r\n\r\n\r\n  [1]: https://github.com/mjiderhamn/classloader-leak-prevention\r\n  [2]: http://java.jiderhamn.se/2011/12/11/classloader-leaks-i-how-to-find-classloader-leaks-with-eclipse-memory-analyser-mat/","title":"ClassLoader Leak - Are they worth solving?","body":"<p>Yes, there are easier - and more proper - ways to resolve the leaks. Add the <a href=\"https://github.com/mjiderhamn/classloader-leak-prevention\" rel=\"nofollow\">ClassLoader Leak Prevention library</a> to your project, and it should take care of the problem for you!</p>\n\n<p>In case you want to track down the leaks yourself, <a href=\"http://java.jiderhamn.se/2011/12/11/classloader-leaks-i-how-to-find-classloader-leaks-with-eclipse-memory-analyser-mat/\" rel=\"nofollow\">this blog series</a> will be of help.</p>\n"}],"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5372,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":4742156,"answer_count":5,"score":13,"last_activity_date":1679912148,"creation_date":1295480421,"question_id":4742050,"body_markdown":"`ClassLoader` leaks usually result in *java.lang.OutOfMemoryError: PermGen*.  In the instance of working on application servers you may see this as a result of many redeploys of a common application.  The explanation and possible resolutions to this problem can be seen on these two links. (among others)\r\n\r\n[http://blogs.oracle.com/fkieviet/entry/classloader_leaks_the_dreaded_java][1]\r\n[http://dev.eclipse.org/blogs/memoryanalyzer/2008/05/17/the-unknown-generation-perm/][2]\r\n\r\nNow for the most part they are easy to get around.  Simply increase the -XX:MaxPermSize and when the inevitable happens, restart the JVM completely.  The problem with trying to solve this is that in large applications many classes can cause the classloader to leak and thus the classes to stay within the permgen. \r\n\r\nTwo questions arise from this:\r\n\r\nIs it reasonable to say that an issue like this is better to just increase the max perm size and restart where necessary or should finding a resolution be a higher priority?  \r\n\r\nAre there easier ways to resolve a classloader leak?\r\n\r\n  [1]: http://frankkieviet.blogspot.com/2006/10/classloader-leaks-dreaded-permgen-space.html\r\n  [2]: http://web.archive.org/web/20100223084225/http://dev.eclipse.org/blogs/memoryanalyzer/2008/05/17/the-unknown-generation-perm/","title":"ClassLoader Leak - Are they worth solving?","body":"<p><code>ClassLoader</code> leaks usually result in <em>java.lang.OutOfMemoryError: PermGen</em>.  In the instance of working on application servers you may see this as a result of many redeploys of a common application.  The explanation and possible resolutions to this problem can be seen on these two links. (among others)</p>\n<p><a href=\"http://frankkieviet.blogspot.com/2006/10/classloader-leaks-dreaded-permgen-space.html\" rel=\"nofollow noreferrer\">http://blogs.oracle.com/fkieviet/entry/classloader_leaks_the_dreaded_java</a>\n<a href=\"http://web.archive.org/web/20100223084225/http://dev.eclipse.org/blogs/memoryanalyzer/2008/05/17/the-unknown-generation-perm/\" rel=\"nofollow noreferrer\">http://dev.eclipse.org/blogs/memoryanalyzer/2008/05/17/the-unknown-generation-perm/</a></p>\n<p>Now for the most part they are easy to get around.  Simply increase the -XX:MaxPermSize and when the inevitable happens, restart the JVM completely.  The problem with trying to solve this is that in large applications many classes can cause the classloader to leak and thus the classes to stay within the permgen.</p>\n<p>Two questions arise from this:</p>\n<p>Is it reasonable to say that an issue like this is better to just increase the max perm size and restart where necessary or should finding a resolution be a higher priority?</p>\n<p>Are there easier ways to resolve a classloader leak?</p>\n"},{"tags":["java"],"owner":{"account_id":28136662,"reputation":1,"user_id":21500327,"display_name":"Bijoy Pandey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1679912356,"answer_count":0,"score":0,"last_activity_date":1679912127,"creation_date":1679912127,"question_id":75854555,"body_markdown":"import java.util.Scanner;\r\n\r\npublic class Solution {\r\n\r\n    public static void main(String[] args) {\r\n        Scanner scan = new Scanner(System.in);\r\n        \r\n        int i = scan.nextInt();\r\n        double d=scan.nextDouble();\r\n        String s=scan.nextLine();\r\n       \r\n\r\n        // Write your code here.\r\n\r\n        System.out.println(&quot;String: &quot; + s);\r\n        System.out.println(&quot;Double: &quot; + d);\r\n        System.out.println(&quot;Int: &quot; + i);\r\n    }\r\n}\r\n\r\n//output is not showing string data","title":"How can I print the value of String data?","body":"<p>import java.util.Scanner;</p>\n<p>public class Solution {</p>\n<pre><code>public static void main(String[] args) {\n    Scanner scan = new Scanner(System.in);\n    \n    int i = scan.nextInt();\n    double d=scan.nextDouble();\n    String s=scan.nextLine();\n   \n\n    // Write your code here.\n\n    System.out.println(&quot;String: &quot; + s);\n    System.out.println(&quot;Double: &quot; + d);\n    System.out.println(&quot;Int: &quot; + i);\n}\n</code></pre>\n<p>}</p>\n<p>//output is not showing string data</p>\n"},{"tags":["java","android","webview"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1679928729,"post_id":75854483,"comment_id":133804535,"body_markdown":"Yes do not use Uri.fromFile() but use FileProvider.getUriForFile().","body":"Yes do not use Uri.fromFile() but use FileProvider.getUriForFile()."}],"owner":{"account_id":13011822,"reputation":1330,"user_id":9404560,"display_name":"SunAwtCanvas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":389,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679911608,"creation_date":1679911608,"question_id":75854483,"body_markdown":"Hi I have an android app that uses a web view to load my website. \r\nInside my website, I have an `&lt;input type=&quot;file&quot;&gt;` element to upload images.\r\n\r\nI have implemented the code to handle this file input, It works when I&#39;m uploading photos from my gallery, however when I select Camera to take a new photo, after taking the photo, it doesn&#39;t upload. Nothing happens.\r\n\r\nIn my testing I found that:\r\n\r\n - Both Upload and Taking photo with the Camera works on `Android Emulator`\r\n - Upload works but taking photo with camera doesn&#39;t work on `Physical Devices`\r\n\r\nSo far I&#39;ve tested this out on 3 different android physical devices which produced the same result.\r\n\r\nThis is my `ActivityResultLauncher`\r\n-----------------------------------\r\n\r\n\r\n\r\n    ValueCallback&lt;Uri[]&gt; f_string;\r\n        String cam_path;\r\n        ActivityResultLauncher&lt;Intent&gt; myARL = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(), new ActivityResultCallback&lt;ActivityResult&gt;() {\r\n            @Override\r\n            public void onActivityResult(ActivityResult result) {\r\n                Uri[] results = null;\r\n                if (result.getResultCode() == Activity.RESULT_CANCELED){\r\n                    f_string.onReceiveValue(null);\r\n                    return;\r\n                }\r\n                if(result.getResultCode() == Activity.RESULT_OK){\r\n    \r\n                    if (null == f_string){\r\n                        return;\r\n                    }\r\n                    ClipData clipData;\r\n                    String stringData;\r\n    \r\n                    try{\r\n                        clipData = result.getData().getClipData();\r\n                        stringData = result.getData().getDataString();\r\n                    } catch(Exception e){\r\n                        clipData = null;\r\n                        stringData = null;\r\n                    }\r\n    \r\n                    if(clipData == null &amp;&amp; stringData == null &amp;&amp; cam_path != null){\r\n                        results = new Uri[]{Uri.parse(cam_path)};\r\n                    } else{\r\n                        if (null != clipData){\r\n                            Log.d(TAG, &quot;clipData: &quot; + clipData);\r\n                            final int nulSelectedFiles = clipData.getItemCount();\r\n                            results = new Uri[nulSelectedFiles];\r\n                            for(int i = 0; i &lt; clipData.getItemCount(); i++){\r\n                                results[i] = clipData.getItemAt(i).getUri();\r\n                            }\r\n                        } else{\r\n                            try{\r\n                                assert result.getData() != null;\r\n                                Bitmap cam_photo = (Bitmap) result.getData().getExtras().get(&quot;data&quot;);\r\n    \r\n                                ByteArrayOutputStream bytes = new ByteArrayOutputStream();\r\n                                cam_photo.compress(Bitmap.CompressFormat.JPEG, 100, bytes);\r\n                                stringData = MediaStore.Images.Media.insertImage(getContentResolver(), cam_photo, null, null);\r\n                            } catch (Exception ignored){}\r\n    \r\n                            results = new Uri[]{Uri.parse(stringData)};\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                f_string.onReceiveValue(results);\r\n                f_string = null;\r\n    \r\n            }\r\n        });\r\n\r\nThis is the code to handle the file chooser:\r\n--------------------------------------------\r\n\r\n    mywebView.setWebChromeClient(new WebChromeClient() {\r\n                public boolean onShowFileChooser(WebView webview, ValueCallback&lt;Uri[]&gt; filePathCallback, FileChooserParams fileChooserParams){\r\n                    f_string = filePathCallback;\r\n                    Intent takePictureIntent = null;\r\n                    takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n                    if(takePictureIntent.resolveActivity(MainActivity.this.getPackageManager()) != null){\r\n                        File photoFile = null;\r\n                        try{\r\n                            photoFile = create_image();\r\n                            takePictureIntent.putExtra(&quot;PhotoPath&quot;, cam_path);\r\n                        }catch(IOException ex){\r\n                            Log.e(TAG, &quot;Image file creation failed&quot;, ex);\r\n                        }\r\n                        if (photoFile != null){\r\n                            cam_path = &quot;file:&quot; + photoFile.getAbsolutePath();\r\n                            takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photoFile));\r\n                        } else{\r\n                            takePictureIntent = null;\r\n                        }\r\n                    }\r\n                    Intent contentSelectionIntent = new Intent(Intent.ACTION_GET_CONTENT);\r\n                    contentSelectionIntent.addCategory(Intent.CATEGORY_OPENABLE);\r\n                    contentSelectionIntent.setType(&quot;*/*&quot;);\r\n                    Intent[] intentArray;\r\n                    intentArray = new Intent[]{takePictureIntent};\r\n                    Intent chooserIntent = new Intent(Intent.ACTION_CHOOSER);\r\n                    chooserIntent.putExtra(Intent.EXTRA_INTENT, contentSelectionIntent);\r\n                    chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, intentArray);\r\n                    myARL.launch(chooserIntent);\r\n    \r\n                    return true;\r\n                }\r\n    \r\n            });\r\n\r\n    private File create_image() throws IOException{\r\n            @SuppressLint(&quot;SimpleDateFormat&quot;)\r\n            String file_name = new SimpleDateFormat(&quot;yyyy_mm_ss&quot;).format(new Date());\r\n            String new_name = &quot;file_&quot; + file_name + &quot;_&quot;;\r\n            File sd_directory = getExternalFilesDir(Environment.DIRECTORY_PICTURES);\r\n            return File.createTempFile(new_name, &quot;.jpg&quot;, sd_directory);\r\n        }\r\n\r\n## Suspicions ##\r\n\r\nI assume It has something to do with `Uri.fromFile()` as I read somewhere that Android Versions &gt; 7.0 will produce a `FileUriExposedException`.\r\n","title":"Android Studio - Webview Camera Take Photo not working","body":"<p>Hi I have an android app that uses a web view to load my website.\nInside my website, I have an <code>&lt;input type=&quot;file&quot;&gt;</code> element to upload images.</p>\n<p>I have implemented the code to handle this file input, It works when I'm uploading photos from my gallery, however when I select Camera to take a new photo, after taking the photo, it doesn't upload. Nothing happens.</p>\n<p>In my testing I found that:</p>\n<ul>\n<li>Both Upload and Taking photo with the Camera works on <code>Android Emulator</code></li>\n<li>Upload works but taking photo with camera doesn't work on <code>Physical Devices</code></li>\n</ul>\n<p>So far I've tested this out on 3 different android physical devices which produced the same result.</p>\n<h2>This is my <code>ActivityResultLauncher</code></h2>\n<pre><code>ValueCallback&lt;Uri[]&gt; f_string;\n    String cam_path;\n    ActivityResultLauncher&lt;Intent&gt; myARL = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(), new ActivityResultCallback&lt;ActivityResult&gt;() {\n        @Override\n        public void onActivityResult(ActivityResult result) {\n            Uri[] results = null;\n            if (result.getResultCode() == Activity.RESULT_CANCELED){\n                f_string.onReceiveValue(null);\n                return;\n            }\n            if(result.getResultCode() == Activity.RESULT_OK){\n\n                if (null == f_string){\n                    return;\n                }\n                ClipData clipData;\n                String stringData;\n\n                try{\n                    clipData = result.getData().getClipData();\n                    stringData = result.getData().getDataString();\n                } catch(Exception e){\n                    clipData = null;\n                    stringData = null;\n                }\n\n                if(clipData == null &amp;&amp; stringData == null &amp;&amp; cam_path != null){\n                    results = new Uri[]{Uri.parse(cam_path)};\n                } else{\n                    if (null != clipData){\n                        Log.d(TAG, &quot;clipData: &quot; + clipData);\n                        final int nulSelectedFiles = clipData.getItemCount();\n                        results = new Uri[nulSelectedFiles];\n                        for(int i = 0; i &lt; clipData.getItemCount(); i++){\n                            results[i] = clipData.getItemAt(i).getUri();\n                        }\n                    } else{\n                        try{\n                            assert result.getData() != null;\n                            Bitmap cam_photo = (Bitmap) result.getData().getExtras().get(&quot;data&quot;);\n\n                            ByteArrayOutputStream bytes = new ByteArrayOutputStream();\n                            cam_photo.compress(Bitmap.CompressFormat.JPEG, 100, bytes);\n                            stringData = MediaStore.Images.Media.insertImage(getContentResolver(), cam_photo, null, null);\n                        } catch (Exception ignored){}\n\n                        results = new Uri[]{Uri.parse(stringData)};\n                    }\n                }\n            }\n\n            f_string.onReceiveValue(results);\n            f_string = null;\n\n        }\n    });\n</code></pre>\n<h2>This is the code to handle the file chooser:</h2>\n<pre><code>mywebView.setWebChromeClient(new WebChromeClient() {\n            public boolean onShowFileChooser(WebView webview, ValueCallback&lt;Uri[]&gt; filePathCallback, FileChooserParams fileChooserParams){\n                f_string = filePathCallback;\n                Intent takePictureIntent = null;\n                takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n                if(takePictureIntent.resolveActivity(MainActivity.this.getPackageManager()) != null){\n                    File photoFile = null;\n                    try{\n                        photoFile = create_image();\n                        takePictureIntent.putExtra(&quot;PhotoPath&quot;, cam_path);\n                    }catch(IOException ex){\n                        Log.e(TAG, &quot;Image file creation failed&quot;, ex);\n                    }\n                    if (photoFile != null){\n                        cam_path = &quot;file:&quot; + photoFile.getAbsolutePath();\n                        takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photoFile));\n                    } else{\n                        takePictureIntent = null;\n                    }\n                }\n                Intent contentSelectionIntent = new Intent(Intent.ACTION_GET_CONTENT);\n                contentSelectionIntent.addCategory(Intent.CATEGORY_OPENABLE);\n                contentSelectionIntent.setType(&quot;*/*&quot;);\n                Intent[] intentArray;\n                intentArray = new Intent[]{takePictureIntent};\n                Intent chooserIntent = new Intent(Intent.ACTION_CHOOSER);\n                chooserIntent.putExtra(Intent.EXTRA_INTENT, contentSelectionIntent);\n                chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, intentArray);\n                myARL.launch(chooserIntent);\n\n                return true;\n            }\n\n        });\n\nprivate File create_image() throws IOException{\n        @SuppressLint(&quot;SimpleDateFormat&quot;)\n        String file_name = new SimpleDateFormat(&quot;yyyy_mm_ss&quot;).format(new Date());\n        String new_name = &quot;file_&quot; + file_name + &quot;_&quot;;\n        File sd_directory = getExternalFilesDir(Environment.DIRECTORY_PICTURES);\n        return File.createTempFile(new_name, &quot;.jpg&quot;, sd_directory);\n    }\n</code></pre>\n<h2>Suspicions</h2>\n<p>I assume It has something to do with <code>Uri.fromFile()</code> as I read somewhere that Android Versions &gt; 7.0 will produce a <code>FileUriExposedException</code>.</p>\n"},{"tags":["java","xml","apache-commons","apache-commons-lang3","stringescapeutils"],"comments":[{"owner":{"account_id":5273740,"reputation":698,"user_id":4211252,"display_name":"Thilo Schwarz"},"score":0,"creation_date":1679908494,"post_id":75853722,"comment_id":133798807,"body_markdown":"If  you expect ```&amp;&lt;errors&amp;&gt;```Your error string is malformned, ```lt;``` and ```gt;``` aren&#39;t html entities.","body":"If  you expect <code>&amp;&lt;errors&amp;&gt;</code>Your error string is malformned, <code>lt;</code> and <code>gt;</code> aren&#39;t html entities."},{"owner":{"account_id":3195224,"reputation":9,"user_id":2698539,"display_name":"ompratap"},"score":0,"creation_date":1679908851,"post_id":75853722,"comment_id":133798905,"body_markdown":"My expectation is &lt;errors&gt; as output.","body":"My expectation is &lt;errors&gt; as output."},{"owner":{"account_id":5273740,"reputation":698,"user_id":4211252,"display_name":"Thilo Schwarz"},"score":0,"creation_date":1679909552,"post_id":75853722,"comment_id":133799092,"body_markdown":"correct encode string: ```&amp;lt;errors&amp;gt;```. ```&amp;amp;``` doesn&#39;t matter in this context.","body":"correct encode string: <code>&amp;lt;errors&amp;gt;</code>. <code>&amp;amp;</code> doesn&#39;t matter in this context."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1679911004,"post_id":75853722,"comment_id":133799472,"body_markdown":"`&amp;amp;` is escape for `&amp;`, so ..you expect &quot;double unescape&quot;: `&amp;amp;lt;errors&amp;amp;gt;` -&gt; `&amp;lt;errors&amp;gt;` -&gt; `&lt;errors&gt;`","body":"<code>&amp;amp;</code> is escape for <code>&amp;</code>, so ..you expect &quot;double unescape&quot;: <code>&amp;amp;lt;errors&amp;amp;gt;</code> -&gt; <code>&amp;lt;errors&amp;gt;</code> -&gt; <code>&lt;errors&gt;</code>"},{"owner":{"account_id":3195224,"reputation":9,"user_id":2698539,"display_name":"ompratap"},"score":0,"creation_date":1679914759,"post_id":75853722,"comment_id":133800459,"body_markdown":"Agree to run many times. But I Suprised was in one of my environments this is working. There ran on JDK1.8. However, it&#39;s not working as a standalone application JDk (1.8 and JDK11) as well. something is weared. Though JDK upgrade issue but isn&#39;t.","body":"Agree to run many times. But I Suprised was in one of my environments this is working. There ran on JDK1.8. However, it&#39;s not working as a standalone application JDk (1.8 and JDK11) as well. something is weared. Though JDK upgrade issue but isn&#39;t."}],"answers":[{"tags":[],"owner":{"account_id":18835,"reputation":82183,"user_id":43582,"accept_rate":83,"display_name":"Bombe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679911180,"creation_date":1679911180,"answer_id":75854412,"question_id":75853722,"body_markdown":"You need to unescape the String as many times as the input String has been escaped.\r\n\r\n    var input = &quot;&amp;amp;lt;errors&amp;amp;gt;&quot;;\r\n    var output = StringEscapeUtils.unescapeXml(input);\r\n    output = StringEscapeUtils.unescapeXml(output);\r\n    System.out.println(output);","title":"Unable to unesape consecutive escape char in org.apache.commons.lang3.StringEscapeUtils.unescapeXml()","body":"<p>You need to unescape the String as many times as the input String has been escaped.</p>\n<pre><code>var input = &quot;&amp;amp;lt;errors&amp;amp;gt;&quot;;\nvar output = StringEscapeUtils.unescapeXml(input);\noutput = StringEscapeUtils.unescapeXml(output);\nSystem.out.println(output);\n</code></pre>\n"}],"owner":{"account_id":3195224,"reputation":9,"user_id":2698539,"display_name":"ompratap"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679911180,"creation_date":1679906595,"question_id":75853722,"body_markdown":"Unable to unescape consecutive escape char like **&amp;amp;lt;errors&amp;amp;gt;**.\r\nBelow is the sample code:\r\n \r\n\t\tString error = &quot;&amp;amp;lt;errors&amp;amp;gt;&quot;;\r\n\t\tString out = org.apache.commons.lang3.StringEscapeUtils.unescapeXml(error);\r\n\t\tSystem.out.println(out);\r\n\r\nCurrent Output: `&amp;lt;errors&amp;gt;`\r\n\r\nExpected output: `&lt;errors&gt;`\r\n\r\nThis code ran on JDK 11.0.16 version\r\nand commons-lang3-3.4.jar version.","title":"Unable to unesape consecutive escape char in org.apache.commons.lang3.StringEscapeUtils.unescapeXml()","body":"<p>Unable to unescape consecutive escape char like <strong>&amp;lt;errors&amp;gt;</strong>.\nBelow is the sample code:</p>\n<pre><code>    String error = &quot;&amp;amp;lt;errors&amp;amp;gt;&quot;;\n    String out = org.apache.commons.lang3.StringEscapeUtils.unescapeXml(error);\n    System.out.println(out);\n</code></pre>\n<p>Current Output: <code>&amp;lt;errors&amp;gt;</code></p>\n<p>Expected output: <code>&lt;errors&gt;</code></p>\n<p>This code ran on JDK 11.0.16 version\nand commons-lang3-3.4.jar version.</p>\n"},{"tags":["java","postgresql","jdbc","jdbi","jdbi3"],"answers":[{"tags":[],"owner":{"account_id":26811902,"reputation":103,"user_id":20402396,"display_name":"Stephen Flavin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679911170,"creation_date":1679497969,"answer_id":75814077,"question_id":75789179,"body_markdown":"I achieved this using `bindBeanList` and reading the `Map#entrySet`\r\n\r\n```java\r\nvar values = Map.of(&quot;a&quot;, 1,\r\n                    &quot;b&quot;, 2);\r\n\r\njdbi.withHandle(h -&gt; h.createUpdate(&quot;&quot;&quot;\r\n    update table\r\n    set zoo = true\r\n    where (foo, bar) in (&lt;entries&gt;)\r\n    &quot;&quot;&quot;)\r\n    .bindBeanList(&quot;entries&quot;,\r\n        List.copyOf(values.entrySet()),\r\n        List.of(&quot;key&quot;, &quot;value&quot;))\r\n    .execute());","title":"How to use Jdbi to create multi argument IN clause","body":"<p>I achieved this using <code>bindBeanList</code> and reading the <code>Map#entrySet</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>var values = Map.of(&quot;a&quot;, 1,\n                    &quot;b&quot;, 2);\n\njdbi.withHandle(h -&gt; h.createUpdate(&quot;&quot;&quot;\n    update table\n    set zoo = true\n    where (foo, bar) in (&lt;entries&gt;)\n    &quot;&quot;&quot;)\n    .bindBeanList(&quot;entries&quot;,\n        List.copyOf(values.entrySet()),\n        List.of(&quot;key&quot;, &quot;value&quot;))\n    .execute());\n</code></pre>\n"}],"owner":{"account_id":26811902,"reputation":103,"user_id":20402396,"display_name":"Stephen Flavin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679911170,"creation_date":1679308238,"question_id":75789179,"body_markdown":"I have a batch of values in a map and need to update a boolean column in my database with for rows matching both values in the map e.g.\r\n\r\n```java\r\nMap.of(&quot;a&quot;, 1,\r\n       &quot;b&quot;, 2)\r\n```\r\n\r\nthe update I want to run is\r\n\r\n```sql\r\nupdate table set zoo = true where (foo, bar) in (:values)\r\n```\r\n\r\nwhere the map entries each get turned into\r\n\r\n```sql\r\n... in ((&#39;a&#39;, 1), (&#39;b&#39;, 2))\r\n```\r\n\r\nin `spring-data` this happens when you pass a list of objects as a parameter but I can&#39;t find a way of making it work with JDBI.\r\nI&#39;m specifically using the non annotation driven JDBI.\r\n\r\nI&#39;ve tried passing lists, maps and map entries as arguments but it doesn&#39;t look like they&#39;re handled this way by default.","title":"How to use Jdbi to create multi argument IN clause","body":"<p>I have a batch of values in a map and need to update a boolean column in my database with for rows matching both values in the map e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map.of(&quot;a&quot;, 1,\n       &quot;b&quot;, 2)\n</code></pre>\n<p>the update I want to run is</p>\n<pre class=\"lang-sql prettyprint-override\"><code>update table set zoo = true where (foo, bar) in (:values)\n</code></pre>\n<p>where the map entries each get turned into</p>\n<pre class=\"lang-sql prettyprint-override\"><code>... in (('a', 1), ('b', 2))\n</code></pre>\n<p>in <code>spring-data</code> this happens when you pass a list of objects as a parameter but I can't find a way of making it work with JDBI.\nI'm specifically using the non annotation driven JDBI.</p>\n<p>I've tried passing lists, maps and map entries as arguments but it doesn't look like they're handled this way by default.</p>\n"},{"tags":["java","list"],"comments":[{"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"score":1,"creation_date":1679778320,"post_id":75840830,"comment_id":133782748,"body_markdown":"Is this what you want? https://ideone.com/ZYjLzb","body":"Is this what you want? <a href=\"https://ideone.com/ZYjLzb\" rel=\"nofollow noreferrer\">ideone.com/ZYjLzb</a>"}],"answers":[{"tags":[],"owner":{"account_id":11426762,"reputation":89,"user_id":8376709,"display_name":"Yury"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679739924,"creation_date":1679739924,"answer_id":75841034,"question_id":75840830,"body_markdown":"Since you dont provide the code, its hard to say where you stuck. \r\n\r\nBut generally, you can iterate over the list and sum each attribute separately and then construct the resulting object with collected sums.\r\n\r\nhere the link for inspiration how you could sum the numbers\r\nhttps://www.baeldung.com/java-stream-sum","title":"Summation for each number entity in a java list","body":"<p>Since you dont provide the code, its hard to say where you stuck.</p>\n<p>But generally, you can iterate over the list and sum each attribute separately and then construct the resulting object with collected sums.</p>\n<p>here the link for inspiration how you could sum the numbers\n<a href=\"https://www.baeldung.com/java-stream-sum\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-stream-sum</a></p>\n"},{"tags":[],"owner":{"account_id":9491822,"reputation":394,"user_id":7208364,"accept_rate":33,"display_name":"nightfury"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679829685,"creation_date":1679829685,"answer_id":75847401,"question_id":75840830,"body_markdown":"    System.out.println(&quot;Summation of InputForD3 profit: &quot;+List.stream().mapToInt(o-&gt;o.getProfit()).sum());\r\n    System.out.println(&quot;Summation of InputForD3 cash: &quot;+List.stream().mapToInt(o-&gt;o.getCash()).sum());\r\n    System.out.println(&quot;Summation of InputForD3 cashInflow: &quot;+List.stream().mapToInt(o-&gt;o.getCashInflow()).sum());\r\n\r\n\r\nThis is what I was looking for, Cheers everyone.","title":"Summation for each number entity in a java list","body":"<pre><code>System.out.println(&quot;Summation of InputForD3 profit: &quot;+List.stream().mapToInt(o-&gt;o.getProfit()).sum());\nSystem.out.println(&quot;Summation of InputForD3 cash: &quot;+List.stream().mapToInt(o-&gt;o.getCash()).sum());\nSystem.out.println(&quot;Summation of InputForD3 cashInflow: &quot;+List.stream().mapToInt(o-&gt;o.getCashInflow()).sum());\n</code></pre>\n<p>This is what I was looking for, Cheers everyone.</p>\n"},{"tags":[],"owner":{"account_id":27868102,"reputation":34,"user_id":21279235,"display_name":"LQF-developer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679909988,"creation_date":1679909988,"answer_id":75854198,"question_id":75840830,"body_markdown":"Also you can use `reduce()` function：\r\n\r\n    public class TripleInt {\r\n        int one;\r\n        int two;\r\n        int three;\r\n    }\r\n\r\n        TripleInt tripleInt1 = new TripleInt(100,100,100);\r\n        TripleInt tripleInt2 = new TripleInt(200,200,200);\r\n        TripleInt tripleInt3 = new TripleInt(300,300,300);\r\n\r\n       TripleInt reduce = list.stream().reduce(new TripleInt(0, 0, 0), (curr, temp) -&gt; {\r\n            return new TripleInt(curr.getOne() + temp.getOne(), curr.getTwo() + temp.getTwo(), curr.getThree() + temp.getThree());\r\n        });\r\n\r\n        System.out.println(reduce); //TripleInt(one=600, two=600, three=600)","title":"Summation for each number entity in a java list","body":"<p>Also you can use <code>reduce()</code> function：</p>\n<pre><code>public class TripleInt {\n    int one;\n    int two;\n    int three;\n}\n\n    TripleInt tripleInt1 = new TripleInt(100,100,100);\n    TripleInt tripleInt2 = new TripleInt(200,200,200);\n    TripleInt tripleInt3 = new TripleInt(300,300,300);\n\n   TripleInt reduce = list.stream().reduce(new TripleInt(0, 0, 0), (curr, temp) -&gt; {\n        return new TripleInt(curr.getOne() + temp.getOne(), curr.getTwo() + temp.getTwo(), curr.getThree() + temp.getThree());\n    });\n\n    System.out.println(reduce); //TripleInt(one=600, two=600, three=600)\n</code></pre>\n"}],"owner":{"account_id":9491822,"reputation":394,"user_id":7208364,"accept_rate":33,"display_name":"nightfury"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":3,"score":0,"last_activity_date":1679909988,"creation_date":1679737442,"question_id":75840830,"body_markdown":"I have a list in java, it contains 3 rows. It looks like below:\r\n\r\n    &quot;InputForD3&quot; :[\r\n    {&quot;cashvalue&quot;:100,&quot;cashInput&quot;:500,&quot;profit&quot;:400},\r\n    {&quot;cashvalue&quot;:100,&quot;cashInput&quot;:500,&quot;profit&quot;:400},\r\n    {&quot;cashvalue&quot;:100,&quot;cashInput&quot;:500,&quot;profit&quot;:400}\r\n    ]\r\n\r\n\r\nnow I want to have a sum-up at each entity level and maintain it as an object, something like below\r\n \r\n\r\n    &quot;InputForD3&quot; :[\r\n        {&quot;cashvalue&quot;:300,&quot;cashInput&quot;:1500,&quot;profit&quot;:1200}\r\n    ]\r\n\r\nI am stuck at this, cant think for a solution - how to approach ?","title":"Summation for each number entity in a java list","body":"<p>I have a list in java, it contains 3 rows. It looks like below:</p>\n<pre><code>&quot;InputForD3&quot; :[\n{&quot;cashvalue&quot;:100,&quot;cashInput&quot;:500,&quot;profit&quot;:400},\n{&quot;cashvalue&quot;:100,&quot;cashInput&quot;:500,&quot;profit&quot;:400},\n{&quot;cashvalue&quot;:100,&quot;cashInput&quot;:500,&quot;profit&quot;:400}\n]\n</code></pre>\n<p>now I want to have a sum-up at each entity level and maintain it as an object, something like below</p>\n<pre><code>&quot;InputForD3&quot; :[\n    {&quot;cashvalue&quot;:300,&quot;cashInput&quot;:1500,&quot;profit&quot;:1200}\n]\n</code></pre>\n<p>I am stuck at this, cant think for a solution - how to approach ?</p>\n"},{"tags":["java","android","layout","view","scroll"],"answers":[{"tags":[],"owner":{"account_id":23969355,"reputation":27,"user_id":17958294,"display_name":"king cannibal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679909636,"creation_date":1679227951,"answer_id":75781892,"question_id":75777921,"body_markdown":"I&#39;ve found the problem that I faced seemed like the set translation and didn&#39;t really effect how far the scroll view when down. This wasn&#39;t on any website that I saw, must&#39;ve been the environment of views I used. But for future reference, for people coming later and encountering the same problem. How I fixed it was adding a text view at the bottom of the scroll view. which had a high text size that for some reason effected the scroll view more than the set translation.","title":"ScrollView&#39;s scrollbar isn&#39;t showing or when it doesn&#39;t go all the way","body":"<p>I've found the problem that I faced seemed like the set translation and didn't really effect how far the scroll view when down. This wasn't on any website that I saw, must've been the environment of views I used. But for future reference, for people coming later and encountering the same problem. How I fixed it was adding a text view at the bottom of the scroll view. which had a high text size that for some reason effected the scroll view more than the set translation.</p>\n"}],"owner":{"account_id":23969355,"reputation":27,"user_id":17958294,"display_name":"king cannibal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679909636,"creation_date":1679164680,"question_id":75777921,"body_markdown":"recently when developing a android app I&#39;ve had to use a scroll view for the settings of the app. The problem with my scroll view is that its not scrolling when i set the layout params to match parent but when i set it to &#39;1000&#39; for example, the scroll bar does appear but only scrolls half the way of the child. Aswell when i try to raise the value of &#39;1000&#39; the scroll view&#39;s scroll bar disappears and doesnt scroll anymore. I&#39;ve put the scroll view inside or a linear layout since for what i&#39;ve googled was meant to fix it. i put a linear layout to be the child of the scroll view and a class is called to add children to the linear layout of the scroll view. a linear layout (called set1, I&#39;m bad at naming values) is a parent of a scroll view (called &quot;scrollView&quot;) and that scroll view is a parent of a linear layout (called set, set for settings). inside of the class that adds children to the linear layout of the scroll view holds: text view, edit texts and views which each have their own translation y. how can i get the scroll view to scroll and show all the contents of its children?\r\n\r\ni dont think you would need the contents of the class which adds children to the linear layout (child of scroll view)\r\n\r\n\r\ndeclaration:\r\n````\r\nsettings sett = new settings();\r\n// some of the given values given to the class dont need to be mentioned but they are buttons and image views \r\n//passes &#39;set&#39; which is the child of the scroll view\r\n            sett.setup(con, set , activity, lo, image, upload, images);\r\n            set.setOrientation(LinearLayout.VERTICAL);\r\n         \r\n            set.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT));\r\n            scrollView.addView(set);\r\nset1.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ((height -  (int) (height/7.5)) - (int) (height -(height/1.1)) )));\r\n            scrollView.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.MATCH_PARENT));\r\n            scrollView.setSmoothScrollingEnabled(true);\r\nset1.setTranslationY((int) (height/7.5));\r\nscrollView.setScrollbarFadingEnabled(false);\r\n            scrollView.setFillViewport(true);\r\n            scrollView.setVerticalScrollBarEnabled(true);\r\n            scrollView.setScrollContainer(true);\r\n\r\n\r\n\r\n\r\n            scrollView.setTranslationZ(4);\r\n            scrollView.setScrollbarFadingEnabled(false);\r\n\r\n            scrollView.setVerticalScrollBarEnabled(true);\r\n            scrollView.setScrollbarFadingEnabled(false);\r\n            scrollView.setFillViewport(true);\r\n            scrollView.setNestedScrollingEnabled(true);\r\n         scrollView.requestLayout();\r\n         scrollView.invalidate();\r\nset.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);\r\n            set1.addView(scrollView);\r\n            layout.addView(set1);\r\n// prints the height of scroll view \r\n            Log.d(&quot;PrintResult&quot;, String.valueOf(((height -  (int) (height/7.5)) - (int) (height -(height/1.1)) )) + &quot; &quot; + set.getHeight()); ","title":"ScrollView&#39;s scrollbar isn&#39;t showing or when it doesn&#39;t go all the way","body":"<p>recently when developing a android app I've had to use a scroll view for the settings of the app. The problem with my scroll view is that its not scrolling when i set the layout params to match parent but when i set it to '1000' for example, the scroll bar does appear but only scrolls half the way of the child. Aswell when i try to raise the value of '1000' the scroll view's scroll bar disappears and doesnt scroll anymore. I've put the scroll view inside or a linear layout since for what i've googled was meant to fix it. i put a linear layout to be the child of the scroll view and a class is called to add children to the linear layout of the scroll view. a linear layout (called set1, I'm bad at naming values) is a parent of a scroll view (called &quot;scrollView&quot;) and that scroll view is a parent of a linear layout (called set, set for settings). inside of the class that adds children to the linear layout of the scroll view holds: text view, edit texts and views which each have their own translation y. how can i get the scroll view to scroll and show all the contents of its children?</p>\n<p>i dont think you would need the contents of the class which adds children to the linear layout (child of scroll view)</p>\n<p>declaration:</p>\n<pre><code>settings sett = new settings();\n// some of the given values given to the class dont need to be mentioned but they are buttons and image views \n//passes 'set' which is the child of the scroll view\n            sett.setup(con, set , activity, lo, image, upload, images);\n            set.setOrientation(LinearLayout.VERTICAL);\n         \n            set.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT));\n            scrollView.addView(set);\nset1.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ((height -  (int) (height/7.5)) - (int) (height -(height/1.1)) )));\n            scrollView.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.MATCH_PARENT));\n            scrollView.setSmoothScrollingEnabled(true);\nset1.setTranslationY((int) (height/7.5));\nscrollView.setScrollbarFadingEnabled(false);\n            scrollView.setFillViewport(true);\n            scrollView.setVerticalScrollBarEnabled(true);\n            scrollView.setScrollContainer(true);\n\n\n\n\n            scrollView.setTranslationZ(4);\n            scrollView.setScrollbarFadingEnabled(false);\n\n            scrollView.setVerticalScrollBarEnabled(true);\n            scrollView.setScrollbarFadingEnabled(false);\n            scrollView.setFillViewport(true);\n            scrollView.setNestedScrollingEnabled(true);\n         scrollView.requestLayout();\n         scrollView.invalidate();\nset.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);\n            set1.addView(scrollView);\n            layout.addView(set1);\n// prints the height of scroll view \n            Log.d(&quot;PrintResult&quot;, String.valueOf(((height -  (int) (height/7.5)) - (int) (height -(height/1.1)) )) + &quot; &quot; + set.getHeight()); \n</code></pre>\n"},{"tags":["java","spring","spring-boot","yaml"],"comments":[{"owner":{"account_id":1980276,"reputation":8081,"user_id":1777072,"accept_rate":60,"display_name":"David Lavender"},"score":1,"creation_date":1531822567,"post_id":51378768,"comment_id":89729157,"body_markdown":"could try `public static class MyPojo`, and put `set` methods on it.  And same with `list`: make that non final, don&#39;t inialise it, and have a setter for it","body":"could try <code>public static class MyPojo</code>, and put <code>set</code> methods on it.  And same with <code>list</code>: make that non final, don&#39;t inialise it, and have a setter for it"},{"owner":{"account_id":8645376,"reputation":588,"user_id":6472723,"accept_rate":0,"display_name":"swaroop pallapothu"},"score":0,"creation_date":1531823049,"post_id":51378768,"comment_id":89729458,"body_markdown":"@MrSpoon, No success","body":"@MrSpoon, No success"},{"owner":{"account_id":157801,"reputation":733,"user_id":375995,"accept_rate":100,"display_name":"Alexandros"},"score":0,"creation_date":1531823556,"post_id":51378768,"comment_id":89729796,"body_markdown":"I tried your code with setter and getter at a spring boot application and it worked... so i doupt it is in these classes the problem.\nYou do not create and AcmeProperties bean manually or via new, right?\nspring boot version?\none extra info. i ommited @PropertySource(&quot;classpath:configuration/yml/application.yml&quot;) i have put it in my application.yml in resources folder. Can you try that for debuging reasons? just in case..","body":"I tried your code with setter and getter at a spring boot application and it worked... so i doupt it is in these classes the problem. You do not create and AcmeProperties bean manually or via new, right? spring boot version? one extra info. i ommited @PropertySource(&quot;classpath:configuration/yml/application.yml&zwnj;&#8203;&quot;) i have put it in my application.yml in resources folder. Can you try that for debuging reasons? just in case.."},{"owner":{"account_id":8645376,"reputation":588,"user_id":6472723,"accept_rate":0,"display_name":"swaroop pallapothu"},"score":0,"creation_date":1531823817,"post_id":51378768,"comment_id":89729946,"body_markdown":"@Alexandros, I am not creating AcmeProperties bean manually. I autowired that in my controller. I updated my question with usage please check.","body":"@Alexandros, I am not creating AcmeProperties bean manually. I autowired that in my controller. I updated my question with usage please check."},{"owner":{"account_id":8645376,"reputation":588,"user_id":6472723,"accept_rate":0,"display_name":"swaroop pallapothu"},"score":0,"creation_date":1531823972,"post_id":51378768,"comment_id":89730058,"body_markdown":"@Alexandros, I am using spring-boot 2.0.3. Can you post your changes in answer. or update question with your changes?","body":"@Alexandros, I am using spring-boot 2.0.3. Can you post your changes in answer. or update question with your changes?"},{"owner":{"account_id":157801,"reputation":733,"user_id":375995,"accept_rate":100,"display_name":"Alexandros"},"score":0,"creation_date":1531824746,"post_id":51378768,"comment_id":89730530,"body_markdown":"The think is i made no changes.. you place this yml file under resources/configuration/yml/ directory?","body":"The think is i made no changes.. you place this yml file under resources/configuration/yml/ directory?"},{"owner":{"account_id":157801,"reputation":733,"user_id":375995,"accept_rate":100,"display_name":"Alexandros"},"score":0,"creation_date":1531825430,"post_id":51378768,"comment_id":89730976,"body_markdown":"I think Liping Huang is correct...","body":"I think Liping Huang is correct..."}],"answers":[{"tags":[],"owner":{"account_id":6659854,"reputation":63,"user_id":5139296,"accept_rate":75,"display_name":"James Parson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531822622,"creation_date":1531822622,"answer_id":51378854,"question_id":51378768,"body_markdown":"Try with\r\n    `@ConfigurationProperties(prefix = &quot;acme&quot;)`\r\n\r\nBased on:\r\nhttps://aykutakin.wordpress.com/2016/02/26/injecting-list-with-spring-from-yaml/","title":"Spring @ConfigurationProperties not mapping list of objects","body":"<p>Try with\n    <code>@ConfigurationProperties(prefix = \"acme\")</code></p>\n\n<p>Based on:\n<a href=\"https://aykutakin.wordpress.com/2016/02/26/injecting-list-with-spring-from-yaml/\" rel=\"nofollow noreferrer\">https://aykutakin.wordpress.com/2016/02/26/injecting-list-with-spring-from-yaml/</a></p>\n"},{"tags":[],"owner":{"account_id":1146287,"reputation":4408,"user_id":1128953,"accept_rate":75,"display_name":"Liping Huang"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1679909594,"creation_date":1531824292,"answer_id":51379434,"question_id":51378768,"body_markdown":"The problem is `PropertySource` only support the properties file, you cannot read the value from `yml` file. you can update it like:\r\n\r\n\r\n    @Component\r\n    @ConfigurationProperties(&quot;acme&quot;)\r\n    @PropertySource(&quot;classpath:/configuration/yml/test.properties&quot;)\r\n    class AcmeProperties {\r\n\r\n**configuration/yml/test.properties**\r\n\r\n\r\n    acme.list[0].name=my name\r\n    acme.list[0].description=my description\r\n    acme.list[1].name=another name\r\n    acme.list[1].description=another description\r\n\r\n\r\nand the code should work.","title":"Spring @ConfigurationProperties not mapping list of objects","body":"<p>The problem is <code>PropertySource</code> only support the properties file, you cannot read the value from <code>yml</code> file. you can update it like:</p>\n<pre><code>@Component\n@ConfigurationProperties(&quot;acme&quot;)\n@PropertySource(&quot;classpath:/configuration/yml/test.properties&quot;)\nclass AcmeProperties {\n</code></pre>\n<p><strong>configuration/yml/test.properties</strong></p>\n<pre><code>acme.list[0].name=my name\nacme.list[0].description=my description\nacme.list[1].name=another name\nacme.list[1].description=another description\n</code></pre>\n<p>and the code should work.</p>\n"},{"tags":[],"owner":{"account_id":157801,"reputation":733,"user_id":375995,"accept_rate":100,"display_name":"Alexandros"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531824473,"creation_date":1531824473,"answer_id":51379489,"question_id":51378768,"body_markdown":"I think problem is that resource is not found as specified at @PropertySource(&quot;classpath:configuration/yml/application.yml&quot;). -made the same mistake when tried to debug your code..-\r\nCould you please put a break point in \r\norg.springframework.context.annotation.ConfigurationClassParser#processPropertySource\r\nwith watch check path returned from \r\nthis.resourceLoader.getResource(resolvedLocation).getFile().\r\n\r\nIn my case i have: C:\\Users\\user12\\Desktop\\hibernate\\out\\production\\classes\\configuration\\application.yml\r\n\r\nthere there is not application.yml...\r\n\r\nI think you do not see exception because spring has \r\nif (ignoreResourceNotFound) {..} else {throw ex} in this method\r\n\r\n","title":"Spring @ConfigurationProperties not mapping list of objects","body":"<p>I think problem is that resource is not found as specified at @PropertySource(\"classpath:configuration/yml/application.yml\"). -made the same mistake when tried to debug your code..-\nCould you please put a break point in \norg.springframework.context.annotation.ConfigurationClassParser#processPropertySource\nwith watch check path returned from \nthis.resourceLoader.getResource(resolvedLocation).getFile().</p>\n\n<p>In my case i have: C:\\Users\\user12\\Desktop\\hibernate\\out\\production\\classes\\configuration\\application.yml</p>\n\n<p>there there is not application.yml...</p>\n\n<p>I think you do not see exception because spring has \nif (ignoreResourceNotFound) {..} else {throw ex} in this method</p>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1531825434,"creation_date":1531825434,"answer_id":51379809,"question_id":51378768,"body_markdown":"According to the [Spring Boot documentation][1] (emphasis is mine) :\r\n\r\n&gt; **24.6.4 YAML Shortcomings**\r\n&gt; \r\n&gt; **YAML files cannot be loaded by using the @PropertySource annotation**.\r\n&gt; So, in the case that you need to load values that way, you need to use\r\n&gt; a properties file.\r\n\r\nBut you provided a yml file to `@PropertySource` :\r\n\r\n    @Component\r\n    @ConfigurationProperties(prefix = &quot;acme&quot;)\r\n    @PropertySource(&quot;classpath:configuration/yml/application.yml&quot;)\r\n    public class AcmeProperties { ...}  \r\n\r\nSo you have two possibilities :\r\n\r\n- this yml file is a Spring Boot profile properties file : enable this profile before executing the application and so remove `@PropertySource`\r\n- this yml file is not a Spring Boot profile properties file : use a properties file instead of a yml file.\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html","title":"Spring @ConfigurationProperties not mapping list of objects","body":"<p>According to the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html\" rel=\"nofollow noreferrer\">Spring Boot documentation</a> (emphasis is mine) :</p>\n\n<blockquote>\n  <p><strong>24.6.4 YAML Shortcomings</strong></p>\n  \n  <p><strong>YAML files cannot be loaded by using the @PropertySource annotation</strong>.\n  So, in the case that you need to load values that way, you need to use\n  a properties file.</p>\n</blockquote>\n\n<p>But you provided a yml file to <code>@PropertySource</code> :</p>\n\n<pre><code>@Component\n@ConfigurationProperties(prefix = \"acme\")\n@PropertySource(\"classpath:configuration/yml/application.yml\")\npublic class AcmeProperties { ...}  \n</code></pre>\n\n<p>So you have two possibilities :</p>\n\n<ul>\n<li>this yml file is a Spring Boot profile properties file : enable this profile before executing the application and so remove <code>@PropertySource</code></li>\n<li>this yml file is not a Spring Boot profile properties file : use a properties file instead of a yml file.</li>\n</ul>\n"}],"owner":{"account_id":8645376,"reputation":588,"user_id":6472723,"accept_rate":0,"display_name":"swaroop pallapothu"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17562,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":51379434,"answer_count":4,"score":8,"last_activity_date":1679909594,"creation_date":1531822375,"question_id":51378768,"body_markdown":"I am facing strange issue with spring property mapper. I have yml contains list of values. I want convert that to list of object why building application. So, i used @ConfigurationProperties. With this i am able to map simple types. when i use this to complex type(list of objects) it failed. No exception, but values list is zero when i debug. please find below yml and java files. I tried with spring 2.0.0,2.0.1,2.0.2,2.0.3 No success. Can any one have idea to fix it?\r\n\r\n\r\napplication.yml\r\n\r\n    acme:\r\n      list:\r\n        - name: my name\r\n          description: my description\r\n        - name: another name\r\n          description: another description\r\n\r\nAcmeProperties.java\r\n\r\n    import org.springframework.boot.context.properties.ConfigurationProperties;\r\n    import org.springframework.context.annotation.PropertySource;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    @Component\r\n    @ConfigurationProperties(&quot;acme&quot;)\r\n    @PropertySource(&quot;classpath:configuration/yml/application.yml&quot;)\r\n    public class AcmeProperties {\r\n    \r\n        private final List&lt;MyPojo&gt; list = new ArrayList&lt;&gt;();\r\n    \r\n        public List&lt;MyPojo&gt; getList() {\r\n            return this.list;\r\n        }\r\n    \r\n        static class MyPojo {\r\n            private String name;\r\n            private String description;\r\n    \r\n            public String getName() {\r\n                return name;\r\n            }\r\n    \r\n            public String getDescription() {\r\n                return description;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nWith setter and getter methods:\r\n\r\n\r\n    import org.springframework.boot.context.properties.ConfigurationProperties;\r\n    import org.springframework.context.annotation.PropertySource;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    import java.util.List;\r\n    \r\n    @Component\r\n    @ConfigurationProperties(prefix = &quot;acme&quot;)\r\n    @PropertySource(&quot;classpath:configuration/yml/application.yml&quot;)\r\n    public class AcmeProperties {\r\n    \r\n        private List&lt;MyPojo&gt; list;\r\n    \r\n        public List&lt;MyPojo&gt; getList() {\r\n            return list;\r\n        }\r\n    \r\n        public void setList(List&lt;MyPojo&gt; list) {\r\n            this.list = list;\r\n        }\r\n    \r\n        public static class MyPojo {\r\n            private String name;\r\n            private String description;\r\n    \r\n            public String getName() {\r\n                return name;\r\n            }\r\n    \r\n            public void setName(String name) {\r\n                this.name = name;\r\n            }\r\n    \r\n            public String getDescription() {\r\n                return description;\r\n            }\r\n    \r\n            public void setDescription(String description) {\r\n                this.description = description;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nUsage of this class:\r\n\r\n    @Autowired\r\n    public HomeController(AppProperties appProperties, AcmeProperties acmeProperties) {\r\n        this.appProperties = appProperties;\r\n        this.acmeProperties = acmeProperties;\r\n    }\r\n\r\n","title":"Spring @ConfigurationProperties not mapping list of objects","body":"<p>I am facing strange issue with spring property mapper. I have yml contains list of values. I want convert that to list of object why building application. So, i used @ConfigurationProperties. With this i am able to map simple types. when i use this to complex type(list of objects) it failed. No exception, but values list is zero when i debug. please find below yml and java files. I tried with spring 2.0.0,2.0.1,2.0.2,2.0.3 No success. Can any one have idea to fix it?</p>\n\n<p>application.yml</p>\n\n<pre><code>acme:\n  list:\n    - name: my name\n      description: my description\n    - name: another name\n      description: another description\n</code></pre>\n\n<p>AcmeProperties.java</p>\n\n<pre><code>import org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.annotation.PropertySource;\nimport org.springframework.stereotype.Component;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Component\n@ConfigurationProperties(\"acme\")\n@PropertySource(\"classpath:configuration/yml/application.yml\")\npublic class AcmeProperties {\n\n    private final List&lt;MyPojo&gt; list = new ArrayList&lt;&gt;();\n\n    public List&lt;MyPojo&gt; getList() {\n        return this.list;\n    }\n\n    static class MyPojo {\n        private String name;\n        private String description;\n\n        public String getName() {\n            return name;\n        }\n\n        public String getDescription() {\n            return description;\n        }\n    }\n}\n</code></pre>\n\n<p>With setter and getter methods:</p>\n\n<pre><code>import org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.annotation.PropertySource;\nimport org.springframework.stereotype.Component;\n\nimport java.util.List;\n\n@Component\n@ConfigurationProperties(prefix = \"acme\")\n@PropertySource(\"classpath:configuration/yml/application.yml\")\npublic class AcmeProperties {\n\n    private List&lt;MyPojo&gt; list;\n\n    public List&lt;MyPojo&gt; getList() {\n        return list;\n    }\n\n    public void setList(List&lt;MyPojo&gt; list) {\n        this.list = list;\n    }\n\n    public static class MyPojo {\n        private String name;\n        private String description;\n\n        public String getName() {\n            return name;\n        }\n\n        public void setName(String name) {\n            this.name = name;\n        }\n\n        public String getDescription() {\n            return description;\n        }\n\n        public void setDescription(String description) {\n            this.description = description;\n        }\n    }\n}\n</code></pre>\n\n<p>Usage of this class:</p>\n\n<pre><code>@Autowired\npublic HomeController(AppProperties appProperties, AcmeProperties acmeProperties) {\n    this.appProperties = appProperties;\n    this.acmeProperties = acmeProperties;\n}\n</code></pre>\n"},{"tags":["java","saucelabs","selenium-remotedriver"],"answers":[{"tags":[],"owner":{"account_id":18131971,"reputation":31,"user_id":13186962,"display_name":"mdpb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679909422,"creation_date":1679909422,"answer_id":75854116,"question_id":75837269,"body_markdown":"SauceREST had breaking changes, see the README https://github.com/saucelabs/saucerest-java#saucerest-2x.  What exactly is your error? \r\n\r\nFYI Storage API docs are located here: https://docs.saucelabs.com/dev/api/storage/","title":"Unable to execute exe file in saucelab","body":"<p>SauceREST had breaking changes, see the README <a href=\"https://github.com/saucelabs/saucerest-java#saucerest-2x\" rel=\"nofollow noreferrer\">https://github.com/saucelabs/saucerest-java#saucerest-2x</a>.  What exactly is your error?</p>\n<p>FYI Storage API docs are located here: <a href=\"https://docs.saucelabs.com/dev/api/storage/\" rel=\"nofollow noreferrer\">https://docs.saucelabs.com/dev/api/storage/</a></p>\n"}],"owner":{"account_id":1687705,"reputation":1106,"user_id":1550643,"accept_rate":51,"display_name":"Little bird"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1679909422,"creation_date":1679684020,"question_id":75837269,"body_markdown":"      I want to run .exe file on Saucelabs . I was  using maven dependency \r\n            &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.saucelabs&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;saucerest&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0.35&lt;/version&gt;\r\n\t\t &lt;/dependency&gt;\r\n      Code :-\r\n                EdgeOptions options = new EdgeOptions();\t\r\n\t\t\t\toptions.setCapability(&quot;platform&quot;, &quot;Windows 10&quot;);\r\n\t\t\t\toptions.setCapability(&quot;version&quot;, &quot;81&quot;);\r\n\t\t\t\toptions.setCapability(&quot;parent-tunnel&quot;, &quot;companytest&quot;);\r\n\t\t\t\toptions.setCapability(&quot;tunnelIdentifier&quot;, &quot;Company-Stage&quot;);\r\n\t\t\t\tSauceREST api = new SauceREST(SAUCE_USERNAME, SAUCE_ACCESS_KEY);\r\n\t\t\t\tFile prerunFile = new File(&quot;Drivers//test.exe&quot;);\r\n\t\t\t\tapi.uploadFile(prerunFile);\r\n\t\t\t\tHashMap&lt;String, String&gt; prerunParams = new HashMap&lt;String, String&gt;();\r\n\t\t\t\tprerunParams.put(&quot;executable&quot;, &quot;sauce-storage:test.exe&quot;);\r\n\t\t\t\tprerunParams.put(&quot;background&quot;, &quot;true&quot;);\r\n\t\t\t\toptions.setCapability(&quot;prerun&quot;, prerunParams);\r\n           and Storage center was :-\r\n               https://saucelabs.com/rest/v1/storage\r\n            But as per the company now saucelab has different storage center which is \r\n    https://api.us-west-1.saucelabs.com/v1/storage and maven dependency has been changed with new api.\r\n          New Maven dependency :-\r\n            &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.saucelabs&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;saucerest&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n    so new api has been introduced i.e\r\n    SauceREST api = new SauceREST(SAUCE_USERNAME, SAUCE_ACCESS_KEY,DATACENTER.US_WEST);\r\n    here i&#39;m not getting any api to upload the file in saucelab storage.","title":"Unable to execute exe file in saucelab","body":"<pre><code>  I want to run .exe file on Saucelabs . I was  using maven dependency \n        &lt;dependency&gt;\n        &lt;groupId&gt;com.saucelabs&lt;/groupId&gt;\n        &lt;artifactId&gt;saucerest&lt;/artifactId&gt;\n        &lt;version&gt;1.0.35&lt;/version&gt;\n     &lt;/dependency&gt;\n  Code :-\n            EdgeOptions options = new EdgeOptions();    \n            options.setCapability(&quot;platform&quot;, &quot;Windows 10&quot;);\n            options.setCapability(&quot;version&quot;, &quot;81&quot;);\n            options.setCapability(&quot;parent-tunnel&quot;, &quot;companytest&quot;);\n            options.setCapability(&quot;tunnelIdentifier&quot;, &quot;Company-Stage&quot;);\n            SauceREST api = new SauceREST(SAUCE_USERNAME, SAUCE_ACCESS_KEY);\n            File prerunFile = new File(&quot;Drivers//test.exe&quot;);\n            api.uploadFile(prerunFile);\n            HashMap&lt;String, String&gt; prerunParams = new HashMap&lt;String, String&gt;();\n            prerunParams.put(&quot;executable&quot;, &quot;sauce-storage:test.exe&quot;);\n            prerunParams.put(&quot;background&quot;, &quot;true&quot;);\n            options.setCapability(&quot;prerun&quot;, prerunParams);\n       and Storage center was :-\n           https://saucelabs.com/rest/v1/storage\n        But as per the company now saucelab has different storage center which is \nhttps://api.us-west-1.saucelabs.com/v1/storage and maven dependency has been changed with new api.\n      New Maven dependency :-\n        &lt;dependency&gt;\n        &lt;groupId&gt;com.saucelabs&lt;/groupId&gt;\n        &lt;artifactId&gt;saucerest&lt;/artifactId&gt;\n        &lt;version&gt;2.0.4&lt;/version&gt;\n    &lt;/dependency&gt;\nso new api has been introduced i.e\nSauceREST api = new SauceREST(SAUCE_USERNAME, SAUCE_ACCESS_KEY,DATACENTER.US_WEST);\nhere i'm not getting any api to upload the file in saucelab storage.\n</code></pre>\n"},{"tags":["java","bluej"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":4,"creation_date":1679845904,"post_id":75848792,"comment_id":133789929,"body_markdown":"You have not declared anything called IO.  Possibly it&#39;s supposed to be imported, but there are no import statements.  Where do you suppose &#39;IO&#39; is defined?  It is not part of the Java language.  Is it supposed to be provided by the coursework envrironment?","body":"You have not declared anything called IO.  Possibly it&#39;s supposed to be imported, but there are no import statements.  Where do you suppose &#39;IO&#39; is defined?  It is not part of the Java language.  Is it supposed to be provided by the coursework envrironment?"}],"answers":[{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679858917,"creation_date":1679858917,"answer_id":75850066,"question_id":75848792,"body_markdown":"You would need the **IO** class which contains several methods to run your code. The **IO** class might look something like this:\r\n\r\n```\r\npublic class IO {\r\n    \r\n    private static java.util.Scanner userIN = new java.util.Scanner(System.in);\r\n    \r\n    public static void output(Object input) {\r\n        System.out.print(input);\r\n    }\r\n\r\n    public static void outputln(Object input) {\r\n        System.out.println(input);\r\n    }\r\n    \r\n    public static void outputf(String input, Object[] varArgs) {\r\n        System.out.printf(input, varArgs);\r\n    }\r\n    \r\n    public static String inputLine() {\r\n        return userIN.nextLine();\r\n    }\r\n    \r\n    public static String inputToken() {\r\n        return userIN.next();\r\n    }\r\n    \r\n    public static int inputInt() {\r\n        int i = userIN.nextInt();\r\n        userIN.nextLine(); // Consume ENTER key.\r\n        return i;\r\n    }\r\n    \r\n    public static long inputLong() {\r\n        long i = userIN.nextLong();\r\n        userIN.nextLine(); // Consume ENTER key.\r\n        return i;\r\n    }\r\n    \r\n    public static double inputDouble() {\r\n        double i = userIN.nextDouble();\r\n        userIN.nextLine(); // Consume ENTER key.\r\n        return i;\r\n    }\r\n    \r\n    public static float inputFloat() {\r\n        float i = userIN.nextFloat();\r\n        userIN.nextLine(); // Consume ENTER key.\r\n        return i;\r\n    }\r\n    \r\n    public static void inputClose() {\r\n        userIN.close();\r\n    }\r\n\r\n    // Add more methods as required....\r\n}\r\n```\r\n\r\nToo use with **your** code:\r\n\r\n    public static void main(String[] args) {                                          \r\n        int examWeight = 70;\r\n        int labWeight = 20;\r\n        int hwWeight = 10;\r\n        double examScore;\r\n        double labScore;\r\n        double hwScore;\r\n        double finalScore;\r\n\r\n        //ask Student to input scores for exam, lab, hw\r\n        IO.output(&quot;Enter your exam scores: &quot;);\r\n        examScore = IO.inputDouble();\r\n        IO.output(&quot;Enter your lab scores: &quot;);\r\n        labScore = IO.inputDouble();\r\n        IO.output(&quot;Enter your homework scores: &quot;);\r\n        hwScore = IO.inputDouble();\r\n\r\n        //compute final score as the weighted sum of exam, lab, hw score\r\n        examScore = examScore * (examWeight / 100d);\r\n        labScore = labScore * (labWeight / 100d);\r\n        hwScore = hwScore * (hwWeight / 100d);\r\n\r\n        finalScore = examScore + labScore + hwScore;\r\n\r\n        // output the final score\r\n        IO.outputln(&quot;Your final score is: &quot; + finalScore);\r\n    }  ","title":"i was getting the error: undeclared variable: IO in the following java program, but the code is right according to my knowledge","body":"<p>You would need the <strong>IO</strong> class which contains several methods to run your code. The <strong>IO</strong> class might look something like this:</p>\n<pre><code>public class IO {\n    \n    private static java.util.Scanner userIN = new java.util.Scanner(System.in);\n    \n    public static void output(Object input) {\n        System.out.print(input);\n    }\n\n    public static void outputln(Object input) {\n        System.out.println(input);\n    }\n    \n    public static void outputf(String input, Object[] varArgs) {\n        System.out.printf(input, varArgs);\n    }\n    \n    public static String inputLine() {\n        return userIN.nextLine();\n    }\n    \n    public static String inputToken() {\n        return userIN.next();\n    }\n    \n    public static int inputInt() {\n        int i = userIN.nextInt();\n        userIN.nextLine(); // Consume ENTER key.\n        return i;\n    }\n    \n    public static long inputLong() {\n        long i = userIN.nextLong();\n        userIN.nextLine(); // Consume ENTER key.\n        return i;\n    }\n    \n    public static double inputDouble() {\n        double i = userIN.nextDouble();\n        userIN.nextLine(); // Consume ENTER key.\n        return i;\n    }\n    \n    public static float inputFloat() {\n        float i = userIN.nextFloat();\n        userIN.nextLine(); // Consume ENTER key.\n        return i;\n    }\n    \n    public static void inputClose() {\n        userIN.close();\n    }\n\n    // Add more methods as required....\n}\n</code></pre>\n<p>Too use with <strong>your</strong> code:</p>\n<pre><code>public static void main(String[] args) {                                          \n    int examWeight = 70;\n    int labWeight = 20;\n    int hwWeight = 10;\n    double examScore;\n    double labScore;\n    double hwScore;\n    double finalScore;\n\n    //ask Student to input scores for exam, lab, hw\n    IO.output(&quot;Enter your exam scores: &quot;);\n    examScore = IO.inputDouble();\n    IO.output(&quot;Enter your lab scores: &quot;);\n    labScore = IO.inputDouble();\n    IO.output(&quot;Enter your homework scores: &quot;);\n    hwScore = IO.inputDouble();\n\n    //compute final score as the weighted sum of exam, lab, hw score\n    examScore = examScore * (examWeight / 100d);\n    labScore = labScore * (labWeight / 100d);\n    hwScore = hwScore * (hwWeight / 100d);\n\n    finalScore = examScore + labScore + hwScore;\n\n    // output the final score\n    IO.outputln(&quot;Your final score is: &quot; + finalScore);\n}  \n</code></pre>\n"}],"owner":{"account_id":25884740,"reputation":1,"user_id":19613096,"display_name":"Nitish "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1679908804,"creation_date":1679845365,"question_id":75848792,"body_markdown":"```java\r\n  public class CourseGrade {\r\n    public static void main(String[] args) {\r\n        int examWeight = 70;\r\n        int labWeight = 20;\r\n        int hwWeight = 10;\r\n        double examScore;\r\n        double labScore;\r\n        double hwScore;\r\n        double finalScore;\r\n\r\n        //ask Student to input scores for exam, lab, hw\r\n        IO.output(&quot;Enter your exam scores: &quot;);\r\n        examScore = IO.inputDouble();\r\n        IO.output(&quot;Enter your lab scores: &quot;);\r\n        labScore = IO.inputDouble();\r\n        IO.output(&quot;Enter your homework scores: &quot;);\r\n        hwScore = IO.inputDouble();\r\n\r\n        //compute final score as the weighted sum of exam, lab, hw score\r\n        examScore = examScore * (examWeight / 100);\r\n        labScore = labScore * (labWeight / 100);\r\n        hwScore = hwScore * (hwWeight / 100);\r\n\r\n        finalScore = examScore + labScore + hwScore;\r\n\r\n        // output the final score\r\n        IO.outputln(&quot;Your final score is: &quot; + finalScore);\r\n    }\r\n}\r\n```\r\nI was getting this error: \r\n`undeclared variable:IO` again and again, and this solution problem is not available on the web\r\n\r\nI am running this code in bluej editor for java\r\nin my opinion `io` part is just related to the syntax","title":"i was getting the error: undeclared variable: IO in the following java program, but the code is right according to my knowledge","body":"<pre class=\"lang-java prettyprint-override\"><code>  public class CourseGrade {\n    public static void main(String[] args) {\n        int examWeight = 70;\n        int labWeight = 20;\n        int hwWeight = 10;\n        double examScore;\n        double labScore;\n        double hwScore;\n        double finalScore;\n\n        //ask Student to input scores for exam, lab, hw\n        IO.output(&quot;Enter your exam scores: &quot;);\n        examScore = IO.inputDouble();\n        IO.output(&quot;Enter your lab scores: &quot;);\n        labScore = IO.inputDouble();\n        IO.output(&quot;Enter your homework scores: &quot;);\n        hwScore = IO.inputDouble();\n\n        //compute final score as the weighted sum of exam, lab, hw score\n        examScore = examScore * (examWeight / 100);\n        labScore = labScore * (labWeight / 100);\n        hwScore = hwScore * (hwWeight / 100);\n\n        finalScore = examScore + labScore + hwScore;\n\n        // output the final score\n        IO.outputln(&quot;Your final score is: &quot; + finalScore);\n    }\n}\n</code></pre>\n<p>I was getting this error:\n<code>undeclared variable:IO</code> again and again, and this solution problem is not available on the web</p>\n<p>I am running this code in bluej editor for java\nin my opinion <code>io</code> part is just related to the syntax</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1679650936,"post_id":75831938,"comment_id":133762806,"body_markdown":"take a look at the method call of .replace(). it does not accept a regex","body":"take a look at the method call of .replace(). it does not accept a regex"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":1,"creation_date":1679651078,"post_id":75831938,"comment_id":133762838,"body_markdown":"`s.replaceAll(&quot;\\\\S+(?=\\\\.)&quot;, &quot;ANP_TRACKING_VIEW&quot;)`","body":"<code>s.replaceAll(&quot;\\\\S+(?=\\\\.)&quot;, &quot;ANP_TRACKING_VIEW&quot;)</code>"}],"answers":[{"tags":[],"owner":{"account_id":27566119,"reputation":863,"user_id":21038281,"display_name":"SIMULATAN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679652118,"creation_date":1679652118,"answer_id":75832243,"question_id":75831938,"body_markdown":"Java&#39;s [String#replace](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#replace-java.lang.CharSequence-java.lang.CharSequence-) only does plaintext replacements.\r\n\r\nIf you want to use a regex pattern to replace characters, use either [String#replaceAll](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#replaceAll-java.lang.String-java.lang.String-) or [String#replaceFirst](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#replaceFirst-java.lang.String-java.lang.String-).","title":"Java: replace substring using Regex","body":"<p>Java's <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#replace-java.lang.CharSequence-java.lang.CharSequence-\" rel=\"nofollow noreferrer\">String#replace</a> only does plaintext replacements.</p>\n<p>If you want to use a regex pattern to replace characters, use either <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#replaceAll-java.lang.String-java.lang.String-\" rel=\"nofollow noreferrer\">String#replaceAll</a> or <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#replaceFirst-java.lang.String-java.lang.String-\" rel=\"nofollow noreferrer\">String#replaceFirst</a>.</p>\n"}],"owner":{"account_id":18043744,"reputation":11,"user_id":13115257,"display_name":"Muliph"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1679908109,"creation_date":1679650078,"question_id":75831938,"body_markdown":"I have a list of strings that need the first section up to the full stop replaced with a new string\r\n\r\ne.g `anp_packlistepos.warenausgang` replaced with `anp_tracking_view.warenausgang`\r\n\r\n\r\nI&#39;m currently using Vaadin 14 and java version corretto 17\r\n\r\n```\r\nList&lt;String&gt; newconfigdto = new ArrayList&lt;&gt;();\r\nfor (String s : configdto) {\r\n    newconfigdto.add(s.replace(&quot;\\\\S+(?=\\\\.)&quot;, &quot;ANP_TRACKING_VIEW&quot;));\r\n}\r\n```\r\n\r\nAfter a bit of research I found that I was able to replace the string using this regex formel in regex101, but it does not work in my Java program.","title":"Java: replace substring using Regex","body":"<p>I have a list of strings that need the first section up to the full stop replaced with a new string</p>\n<p>e.g <code>anp_packlistepos.warenausgang</code> replaced with <code>anp_tracking_view.warenausgang</code></p>\n<p>I'm currently using Vaadin 14 and java version corretto 17</p>\n<pre><code>List&lt;String&gt; newconfigdto = new ArrayList&lt;&gt;();\nfor (String s : configdto) {\n    newconfigdto.add(s.replace(&quot;\\\\S+(?=\\\\.)&quot;, &quot;ANP_TRACKING_VIEW&quot;));\n}\n</code></pre>\n<p>After a bit of research I found that I was able to replace the string using this regex formel in regex101, but it does not work in my Java program.</p>\n"},{"tags":["java","visual-studio-code"],"comments":[{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":1,"creation_date":1663137196,"post_id":73705108,"comment_id":130165237,"body_markdown":"After searching, the parameters related to this function switch were not found. So if you want to turn it off, I guess you&#39;ll have to disable the *[Language Support for Java(TM) by Red Hat](https://imgur.com/C7KiqIn)* extension, but that would result in losing a lot of smart suggestions.","body":"After searching, the parameters related to this function switch were not found. So if you want to turn it off, I guess you&#39;ll have to disable the <i><a href=\"https://imgur.com/C7KiqIn\" rel=\"nofollow noreferrer\">Language Support for Java(TM) by Red Hat</a></i> extension, but that would result in losing a lot of smart suggestions."}],"answers":[{"tags":[],"owner":{"account_id":26314722,"reputation":29,"user_id":19977684,"display_name":"cloudspawn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663164930,"creation_date":1663164930,"answer_id":73718420,"question_id":73705108,"body_markdown":"You can try playing with the different auto suggestions mode using the setttings: -&gt;Text-Editor-&gt;Suggestions. Maybe one setup could be a good workaround.","title":"How do I stop Visual Studio Code from autofilling in the parameter names when I write a function?","body":"<p>You can try playing with the different auto suggestions mode using the setttings: -&gt;Text-Editor-&gt;Suggestions. Maybe one setup could be a good workaround.</p>\n"},{"tags":[],"owner":{"account_id":28080763,"reputation":41,"user_id":21451899,"display_name":"dylan88"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1679907561,"creation_date":1679441092,"answer_id":75807206,"question_id":73705108,"body_markdown":"You can disable this with `java.completion.guessMethodArguments` in the VS code settings.\r\n\r\n![The setting in VS Code][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Yv0tF.png","title":"How do I stop Visual Studio Code from autofilling in the parameter names when I write a function?","body":"<p>You can disable this with <code>java.completion.guessMethodArguments</code> in the VS code settings.</p>\n<p><img src=\"https://i.stack.imgur.com/Yv0tF.png\" alt=\"The setting in VS Code\" /></p>\n"}],"owner":{"account_id":23907823,"reputation":35,"user_id":17905171,"display_name":"Mercatorior3"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":615,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1679907561,"creation_date":1663080840,"question_id":73705108,"body_markdown":"[![This is what I am talking about. In this example I have a object of the class Politician who has a function. When I type in the function it autofills the parameters][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/y8dxq.png\r\n\r\nHow do I stop Visual Studio code from doing this? I have inlay parameter names disabled in the settings but it still will auto populate the parameter names. \r\n\r\nThis is VS code 1.71.0 with Java 8 Update 341","title":"How do I stop Visual Studio Code from autofilling in the parameter names when I write a function?","body":"<p><a href=\"https://i.stack.imgur.com/y8dxq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y8dxq.png\" alt=\"This is what I am talking about. In this example I have a object of the class Politician who has a function. When I type in the function it autofills the parameters\" /></a></p>\n<p>How do I stop Visual Studio code from doing this? I have inlay parameter names disabled in the settings but it still will auto populate the parameter names.</p>\n<p>This is VS code 1.71.0 with Java 8 Update 341</p>\n"},{"tags":["java","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":3099597,"reputation":9011,"user_id":2624089,"display_name":"Richard"},"score":1,"creation_date":1393571266,"post_id":22087952,"comment_id":33501510,"body_markdown":"If you add the HTML, we can better help you find the element, and the text.","body":"If you add the HTML, we can better help you find the element, and the text."},{"owner":{"account_id":24885,"reputation":30822,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1606031768,"post_id":22087952,"comment_id":114831426,"body_markdown":"Another question asks why (to the solution), but there isn&#39;t a proper answer (yet): *[Why is getText() in Selenium not working for &lt;textarea&gt; elements, but getAttribute(“value”) is?](https://stackoverflow.com/questions/32379622/selenium-why-is-gettext-not-working-for-textarea-elements-but-getattribute)*","body":"Another question asks why (to the solution), but there isn&#39;t a proper answer (yet): <i><a href=\"https://stackoverflow.com/questions/32379622/selenium-why-is-gettext-not-working-for-textarea-elements-but-getattribute\">Why is getText() in Selenium not working for &lt;textarea&gt; elements, but getAttribute(“value”) is?</a></i>"}],"answers":[{"tags":[],"owner":{"account_id":3099597,"reputation":9011,"user_id":2624089,"display_name":"Richard"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1606030116,"creation_date":1393569872,"answer_id":22088131,"question_id":22087952,"body_markdown":"You need to print the result of the `getText()`. You&#39;re currently printing the object `TxtBoxContent`.\r\n\r\n`getText()` will only get the inner text of an element.  To get the value, you need to use `getAttribute()`.\r\n\r\n    WebElement TxtBoxContent = driver.findElement(By.id(WebelementID));\r\n    System.out.println(&quot;Printing &quot; + TxtBoxContent.getAttribute(&quot;value&quot;));\r\n","title":"How to gettext() of an element in Selenium Webdriver","body":"<p>You need to print the result of the <code>getText()</code>. You're currently printing the object <code>TxtBoxContent</code>.</p>\n<p><code>getText()</code> will only get the inner text of an element.  To get the value, you need to use <code>getAttribute()</code>.</p>\n<pre><code>WebElement TxtBoxContent = driver.findElement(By.id(WebelementID));\nSystem.out.println(&quot;Printing &quot; + TxtBoxContent.getAttribute(&quot;value&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7640142,"reputation":41,"user_id":5792501,"display_name":"Dipti Bhushetty"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1584361430,"creation_date":1452818868,"answer_id":34802528,"question_id":22087952,"body_markdown":"    text = driver.findElement(By.id(&#39;p_id&#39;)).getAttribute(&quot;innerHTML&quot;);","title":"How to gettext() of an element in Selenium Webdriver","body":"<pre><code>text = driver.findElement(By.id('p_id')).getAttribute(\"innerHTML\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8871984,"reputation":41,"user_id":6625435,"display_name":"Sags"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1606245190,"creation_date":1469192328,"answer_id":38527098,"question_id":22087952,"body_markdown":"You need to store it in a `String` variable first before displaying it like so:\r\n\r\n    String Txt = TxtBoxContent.getText();\r\n    System.out.println(Txt);\r\n","title":"How to gettext() of an element in Selenium Webdriver","body":"<p>You need to store it in a <code>String</code> variable first before displaying it like so:</p>\n<pre><code>String Txt = TxtBoxContent.getText();\nSystem.out.println(Txt);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3849926,"reputation":16794,"user_id":3190347,"accept_rate":68,"display_name":"Shubham Jain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679907490,"creation_date":1679907490,"answer_id":75853840,"question_id":22087952,"body_markdown":"**Python**\r\n\r\n    element.text\r\n\r\n**Java** \r\n\r\n    element.getText()\r\n\r\n**C#** \r\n\r\n    element.Text\r\n\r\n**Ruby**\r\n\r\n    element.text","title":"How to gettext() of an element in Selenium Webdriver","body":"<p><strong>Python</strong></p>\n<pre><code>element.text\n</code></pre>\n<p><strong>Java</strong></p>\n<pre><code>element.getText()\n</code></pre>\n<p><strong>C#</strong></p>\n<pre><code>element.Text\n</code></pre>\n<p><strong>Ruby</strong></p>\n<pre><code>element.text\n</code></pre>\n"}],"owner":{"account_id":4073397,"reputation":708,"user_id":3345664,"accept_rate":68,"display_name":"Santhosh Siddappa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135650,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"accepted_answer_id":22088131,"answer_count":4,"score":11,"last_activity_date":1679907490,"creation_date":1393569322,"question_id":22087952,"body_markdown":"I am finding a textbox by its ID. I need to get the content which is already there inside the text box. For that I am using the `gettext()` method, but it is returning the ID value.\r\n\r\nThe content in the text box is: *Santhosh*\r\n\r\nThe output I am getting is = `[[FirefoxDriver: firefox on XP (c0079327-7063-4908-b20a-a606b95830cb)] -&gt; id: ctl00_ContentPlaceHolder1_txtName]`\r\n\r\nThe code is below\r\n\r\n### Code\r\n\r\n    WebElement TxtBoxContent = driver.findElement(By.id(WebelementID));\r\n    TxtBoxContent.getText();\r\n    System.out.println(&quot;Printing &quot; + TxtBoxContent);\r\n\r\n### Result\r\n\r\n    Printing [[FirefoxDriver: firefox on XP (c0079327-7063-4908-b20a-a606b95830cb)] -&gt; id: ctl00_ContentPlaceHolder1_txtName]\r\n\r\n\r\n","title":"How to gettext() of an element in Selenium Webdriver","body":"<p>I am finding a textbox by its ID. I need to get the content which is already there inside the text box. For that I am using the <code>gettext()</code> method, but it is returning the ID value.</p>\n<p>The content in the text box is: <em>Santhosh</em></p>\n<p>The output I am getting is = <code>[[FirefoxDriver: firefox on XP (c0079327-7063-4908-b20a-a606b95830cb)] -&gt; id: ctl00_ContentPlaceHolder1_txtName]</code></p>\n<p>The code is below</p>\n<h3>Code</h3>\n<pre><code>WebElement TxtBoxContent = driver.findElement(By.id(WebelementID));\nTxtBoxContent.getText();\nSystem.out.println(&quot;Printing &quot; + TxtBoxContent);\n</code></pre>\n<h3>Result</h3>\n<pre><code>Printing [[FirefoxDriver: firefox on XP (c0079327-7063-4908-b20a-a606b95830cb)] -&gt; id: ctl00_ContentPlaceHolder1_txtName]\n</code></pre>\n"},{"tags":["java","kotlin"],"comments":[{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":1,"creation_date":1679908476,"post_id":75853829,"comment_id":133798802,"body_markdown":"Looks like a missing feature in the Kotlin compiler. Please note these annotations are not standardized. Multiple companies provide their own for performing some kind of static code analysis. JetBrains&#39; annotations were created mostly for the code analysis in IntelliJ. Still, I think it would be a nice addition to respect them in the Kotlin compiler.","body":"Looks like a missing feature in the Kotlin compiler. Please note these annotations are not standardized. Multiple companies provide their own for performing some kind of static code analysis. JetBrains&#39; annotations were created mostly for the code analysis in IntelliJ. Still, I think it would be a nice addition to respect them in the Kotlin compiler."},{"owner":{"account_id":1675086,"reputation":33855,"user_id":1540818,"accept_rate":82,"display_name":"Joffrey"},"score":0,"creation_date":1679908539,"post_id":75853829,"comment_id":133798817,"body_markdown":"Since you can update the code manually, is your question about the generation of the snippet in the IDE? Or is it about forbidding returning `MutableList` when `@Unmodifiable List` is expected as return type in the Java interface?","body":"Since you can update the code manually, is your question about the generation of the snippet in the IDE? Or is it about forbidding returning <code>MutableList</code> when <code>@Unmodifiable List</code> is expected as return type in the Java interface?"},{"owner":{"account_id":1817574,"reputation":256,"user_id":1652377,"display_name":"Chris Rankin"},"score":0,"creation_date":1679912576,"post_id":75853829,"comment_id":133799929,"body_markdown":"To be fair, the `@Unmodifiable` and `@UnmodifiableView` annotations are both defined as having\n`@Target(TYPE_USE)`\nwhich doesn&#39;t sound like what you want anyway.\n\nBy contrast, `@NotNull` and `@Nullable` are defined to have\n`@Target({METHOD, FIELD, PARAMETER, LOCAL_VARIABLE, TYPE_USE})`.","body":"To be fair, the <code>@Unmodifiable</code> and <code>@UnmodifiableView</code> annotations are both defined as having <code>@Target(TYPE_USE)</code> which doesn&#39;t sound like what you want anyway.  By contrast, <code>@NotNull</code> and <code>@Nullable</code> are defined to have <code>@Target({METHOD, FIELD, PARAMETER, LOCAL_VARIABLE, TYPE_USE})</code>."},{"owner":{"account_id":1023984,"reputation":40599,"user_id":1033686,"accept_rate":97,"display_name":"Matthew Layton"},"score":0,"creation_date":1679923849,"post_id":75853829,"comment_id":133802941,"body_markdown":"@Joffrey I guess the former (generation of the snippet in the IDE), since forbidding `MutableList&lt;T&gt;` isn&#39;t actually possible?","body":"@Joffrey I guess the former (generation of the snippet in the IDE), since forbidding <code>MutableList&lt;T&gt;</code> isn&#39;t actually possible?"},{"owner":{"account_id":1675086,"reputation":33855,"user_id":1540818,"accept_rate":82,"display_name":"Joffrey"},"score":0,"creation_date":1679926954,"post_id":75853829,"comment_id":133803939,"body_markdown":"I might be wrong, but IIRC with strict JSR 305 mode (`-Xjsr305=strict` compiler argument), you get compile errors on misuses of nullable/non-nullable types in Kotlin for things declared in java with the proper JSR-305 annotations, including method overrides like this. So I guess it would be possible in general, it just hasn&#39;t been done for `@Unmodifiable`","body":"I might be wrong, but IIRC with strict JSR 305 mode (<code>-Xjsr305=strict</code> compiler argument), you get compile errors on misuses of nullable/non-nullable types in Kotlin for things declared in java with the proper JSR-305 annotations, including method overrides like this. So I guess it would be possible in general, it just hasn&#39;t been done for <code>@Unmodifiable</code>"}],"owner":{"account_id":1023984,"reputation":40599,"user_id":1033686,"accept_rate":97,"display_name":"Matthew Layton"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1679907408,"creation_date":1679907408,"question_id":75853829,"body_markdown":"Consider the following Java API:\r\n\r\n```java\r\npublic interface Recipe {\r\n\r\n    @NotNull\r\n    List&lt;Ingredient&gt; getIngredients();\r\n\r\n    void AddOptionalIngredient(@Nullable Ingredient ingredient);\r\n}\r\n```\r\n\r\nWhen you implement this from Kotlin, IntelliJ will insert the correct nullable modifiers because of the `@NotNull` and `@Nullable` annotations:\r\n\r\n```kotlin\r\nclass CakeRecipe : Recipe {\r\n\r\n    // Return type is non-nullable...\r\n    fun getIngredients(): MutableList&lt;Ingredient&gt; { ... }\r\n\r\n    // Parameter type is nullable...\r\n    fun addOptionalIngredient(ingredient: Ingredient?) { ... }\r\n}\r\n```\r\n\r\nThere is still a problem with the implementation; notably, that Java&#39;s `List&lt;T&gt;` maps to `MutabeList&lt;T&gt;` in Kotlin, although, I can make this change manually:\r\n\r\n```kotlin\r\nclass CakeRecipe : Recipe {\r\n\r\n    // Return type is read-only (or, unmodifiable)\r\n    fun getIngredients(): List&lt;Ingredient&gt; { ... }\r\n\r\n    ...\r\n}\r\n```\r\n\r\nI recently found out about the `@Unmodifiable` annotation, and assumed that JetBrains would respect this annotation in the same way that it respects `@NotNull` and `@Nullable`, therefore my Java API looks like this:\r\n\r\n```java\r\npublic interface Recipe {\r\n\r\n    @NotNull\r\n    @Unmodifiable List&lt;Ingredient&gt; getIngredients();\r\n\r\n    void AddOptionalIngredient(@Nullable Ingredient ingredient);\r\n}\r\n```\r\n\r\nBut, the Kotlin implementation still implements `MutableList&lt;T&gt;`:\r\n```kotlin\r\nclass CakeRecipe : Recipe {\r\n\r\n    // @Unmodifiable not respected by IDE\r\n    fun getIngredients(): MutableList&lt;Ingredient&gt; { ... }\r\n\r\n    ...\r\n}\r\n```\r\n\r\nWhat is the purpose of `@Unmodifiable`, and is it possible (with, or without an annotation) to get Kotlin to implement `List&lt;T&gt;` where the corresponding Java API is `List&lt;T&gt;`?","title":"Consuming Java APIs that use JetBrains annotations in Kotlin","body":"<p>Consider the following Java API:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Recipe {\n\n    @NotNull\n    List&lt;Ingredient&gt; getIngredients();\n\n    void AddOptionalIngredient(@Nullable Ingredient ingredient);\n}\n</code></pre>\n<p>When you implement this from Kotlin, IntelliJ will insert the correct nullable modifiers because of the <code>@NotNull</code> and <code>@Nullable</code> annotations:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class CakeRecipe : Recipe {\n\n    // Return type is non-nullable...\n    fun getIngredients(): MutableList&lt;Ingredient&gt; { ... }\n\n    // Parameter type is nullable...\n    fun addOptionalIngredient(ingredient: Ingredient?) { ... }\n}\n</code></pre>\n<p>There is still a problem with the implementation; notably, that Java's <code>List&lt;T&gt;</code> maps to <code>MutabeList&lt;T&gt;</code> in Kotlin, although, I can make this change manually:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class CakeRecipe : Recipe {\n\n    // Return type is read-only (or, unmodifiable)\n    fun getIngredients(): List&lt;Ingredient&gt; { ... }\n\n    ...\n}\n</code></pre>\n<p>I recently found out about the <code>@Unmodifiable</code> annotation, and assumed that JetBrains would respect this annotation in the same way that it respects <code>@NotNull</code> and <code>@Nullable</code>, therefore my Java API looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Recipe {\n\n    @NotNull\n    @Unmodifiable List&lt;Ingredient&gt; getIngredients();\n\n    void AddOptionalIngredient(@Nullable Ingredient ingredient);\n}\n</code></pre>\n<p>But, the Kotlin implementation still implements <code>MutableList&lt;T&gt;</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class CakeRecipe : Recipe {\n\n    // @Unmodifiable not respected by IDE\n    fun getIngredients(): MutableList&lt;Ingredient&gt; { ... }\n\n    ...\n}\n</code></pre>\n<p>What is the purpose of <code>@Unmodifiable</code>, and is it possible (with, or without an annotation) to get Kotlin to implement <code>List&lt;T&gt;</code> where the corresponding Java API is <code>List&lt;T&gt;</code>?</p>\n"},{"tags":["java","algorithm","dijkstra"],"comments":[{"owner":{"account_id":134312,"reputation":11572,"user_id":336355,"display_name":"Ishtar"},"score":1,"creation_date":1307460301,"post_id":6267172,"comment_id":7312950,"body_markdown":"You really should use `q` to get the node with smallest dist, or there is no point in doing `decrease-key v in Q;` anyway.","body":"You really should use <code>q</code> to get the node with smallest dist, or there is no point in doing <code>decrease-key v in Q;</code> anyway."}],"answers":[{"tags":[],"owner":{"account_id":107007,"reputation":31656,"user_id":284731,"display_name":"zellio"},"down_vote_count":5,"up_vote_count":6,"is_accepted":false,"score":1,"last_activity_date":1307458784,"creation_date":1307458784,"answer_id":6267213,"question_id":6267172,"body_markdown":"[Priority Queue][1] as per the wiki article. Which suggests that the classic implementation now is to use a &quot;min-priority queue implemented by a Fibonacci heap.&quot;\r\n\r\n\r\n\r\n[1]:http://download.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html","title":"Which datatype to use as queue in Dijkstra&#39;s algorithm?","body":"<p><a href=\"http://download.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html\" rel=\"nofollow\">Priority Queue</a> as per the wiki article. Which suggests that the classic implementation now is to use a \"min-priority queue implemented by a Fibonacci heap.\"</p>\n"},{"tags":[],"owner":{"account_id":34703,"reputation":138862,"user_id":98117,"accept_rate":80,"display_name":"hammar"},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1307459760,"creation_date":1307459280,"answer_id":6267328,"question_id":6267172,"body_markdown":"The suggested `PriorityQueue` does not provide a decrease-key operation. However, it can be emulated by removing the element and then reinserting it with the new key. &lt;del&gt;This should not increase the asymptotic run time of the algorithm, although it could be made slightly faster with built-in support.&lt;/del&gt; \r\n\r\n**EDIT**: This does increase the asymptotic run time, as decrease-key is expected to be `O(log n)` for a heap but `remove(Object)` is `O(n)`. **It appears there isn&#39;t any built-in priority queue in Java with support for an efficient decrease-key.**","title":"Which datatype to use as queue in Dijkstra&#39;s algorithm?","body":"<p>The suggested <code>PriorityQueue</code> does not provide a decrease-key operation. However, it can be emulated by removing the element and then reinserting it with the new key. <del>This should not increase the asymptotic run time of the algorithm, although it could be made slightly faster with built-in support.</del> </p>\n\n<p><strong>EDIT</strong>: This does increase the asymptotic run time, as decrease-key is expected to be <code>O(log n)</code> for a heap but <code>remove(Object)</code> is <code>O(n)</code>. <strong>It appears there isn't any built-in priority queue in Java with support for an efficient decrease-key.</strong></p>\n"},{"tags":[],"owner":{"account_id":336349,"reputation":10438,"user_id":663957,"accept_rate":91,"display_name":"LiKao"},"down_vote_count":0,"up_vote_count":40,"is_accepted":true,"score":40,"last_activity_date":1541420466,"creation_date":1307460488,"answer_id":6267630,"question_id":6267172,"body_markdown":"The simplest way is to use a priority queue and not to care about the previously added key in the priority queue. This means you will have each node multiple times in the queue, but this does not hurt the algorithm at all. If you have a look at it, all versions of the node which have been replaced will be picked up later and by then the closest distance will already have been determined.\r\n\r\nThe check `if alt &lt; dist[v]:` from the wikipedia is what makes this work. The runtime will only degrade a little from this, but if you need the very fast version you have to optimize further.\r\n\r\n\r\n**NOTE:**\r\n\r\nLike any optimization, this one should be handled with care and may lead to curious and hard to find bugs (see e.g. [here][1]). For most cases, just using remove and re-insert should be fine, but the trick I mentioned here, can speed up your code a little if your Dijkstra implementation is the bottleneck.\r\n\r\nMost importantly: Before trying this, make sure how your priority queue handles the priority. The actual priority in the queue should never change, or you may mess up invariants of the queue, which means items stored in the queue may not be retrievable any more. E.g. in Java, priorities are stored together with the object, so you do need an additional wrapper:\r\n\r\nThis will not work:\r\n\r\n    import java.util.PriorityQueue;\r\n\r\n    // Store node information and priority together\r\n    class Node implements Comparable&lt;Node&gt; {\r\n      public int prio;\r\n      public Node(int prio) { this.prio = prio; }\r\n  \r\n      public int compareTo(Node n) {\r\n         return Integer.compare(this.prio, n.prio);\r\n      }\r\n    }\r\n\r\n    ...\r\n    ...\r\n    PriorityQueue&lt;Node&gt; q = new PriorityQueue&lt;Node&gt;();\r\n    n = new Node(10);\r\n    q.add(n)\r\n    ...\r\n    // let&#39;s update the priority\r\n    n.prio = 0;\r\n    // re-add\r\n    q.add(n);\r\n    // q may be broken now\r\n \r\n\r\nBecause at `n.prio=0` you are also changing the priority of the object within the queue. However, this will work fine:\r\n\r\n    import java.util.PriorityQueue;\r\n\r\n    // Only node information\r\n    class Node {\r\n      // Whatever you need for your graph\r\n      public Node() {}\r\n    }\r\n\r\n    class PrioNode {\r\n       public Node n;\r\n       public int prio;\r\n       public PrioNode(Node n, int prio) {\r\n         this.n = n;\r\n         this.prio = prio;\r\n       }\r\n\r\n       public int compareTo(PrioNode p) {\r\n          return Integer.compare(this.prio, p.prio);\r\n       }\r\n    }\r\n\r\n    ...\r\n    ...\r\n    PriorityQueue&lt;PrioNode&gt; q = new PriorityQueue&lt;PrioNode&gt;();\r\n    n = new Node();\r\n    q.add(new PrioNode(n,10));\r\n    ...\r\n    // let&#39;s update the priority and re-add\r\n    q.add(new PrioNode(n,0));\r\n    // Everything is fine, because we have not changed the value\r\n    // in the queue.\r\n\r\n\r\n  [1]: https://ksvi.mff.cuni.cz/~dingle/2018/java/cant_reinsert.html","title":"Which datatype to use as queue in Dijkstra&#39;s algorithm?","body":"<p>The simplest way is to use a priority queue and not to care about the previously added key in the priority queue. This means you will have each node multiple times in the queue, but this does not hurt the algorithm at all. If you have a look at it, all versions of the node which have been replaced will be picked up later and by then the closest distance will already have been determined.</p>\n\n<p>The check <code>if alt &lt; dist[v]:</code> from the wikipedia is what makes this work. The runtime will only degrade a little from this, but if you need the very fast version you have to optimize further.</p>\n\n<p><strong>NOTE:</strong></p>\n\n<p>Like any optimization, this one should be handled with care and may lead to curious and hard to find bugs (see e.g. <a href=\"https://ksvi.mff.cuni.cz/~dingle/2018/java/cant_reinsert.html\" rel=\"noreferrer\">here</a>). For most cases, just using remove and re-insert should be fine, but the trick I mentioned here, can speed up your code a little if your Dijkstra implementation is the bottleneck.</p>\n\n<p>Most importantly: Before trying this, make sure how your priority queue handles the priority. The actual priority in the queue should never change, or you may mess up invariants of the queue, which means items stored in the queue may not be retrievable any more. E.g. in Java, priorities are stored together with the object, so you do need an additional wrapper:</p>\n\n<p>This will not work:</p>\n\n<pre><code>import java.util.PriorityQueue;\n\n// Store node information and priority together\nclass Node implements Comparable&lt;Node&gt; {\n  public int prio;\n  public Node(int prio) { this.prio = prio; }\n\n  public int compareTo(Node n) {\n     return Integer.compare(this.prio, n.prio);\n  }\n}\n\n...\n...\nPriorityQueue&lt;Node&gt; q = new PriorityQueue&lt;Node&gt;();\nn = new Node(10);\nq.add(n)\n...\n// let's update the priority\nn.prio = 0;\n// re-add\nq.add(n);\n// q may be broken now\n</code></pre>\n\n<p>Because at <code>n.prio=0</code> you are also changing the priority of the object within the queue. However, this will work fine:</p>\n\n<pre><code>import java.util.PriorityQueue;\n\n// Only node information\nclass Node {\n  // Whatever you need for your graph\n  public Node() {}\n}\n\nclass PrioNode {\n   public Node n;\n   public int prio;\n   public PrioNode(Node n, int prio) {\n     this.n = n;\n     this.prio = prio;\n   }\n\n   public int compareTo(PrioNode p) {\n      return Integer.compare(this.prio, p.prio);\n   }\n}\n\n...\n...\nPriorityQueue&lt;PrioNode&gt; q = new PriorityQueue&lt;PrioNode&gt;();\nn = new Node();\nq.add(new PrioNode(n,10));\n...\n// let's update the priority and re-add\nq.add(new PrioNode(n,0));\n// Everything is fine, because we have not changed the value\n// in the queue.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4486922,"reputation":8250,"user_id":3649209,"display_name":"James Lawson"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1679907115,"creation_date":1487952615,"answer_id":42443252,"question_id":6267172,"body_markdown":"You can use a **[`TreeSet`](http://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html)**, (in C++ you can use a [`std::set`](http://www.cplusplus.com/reference/set/set/)) to implement your priority queue for Dijkstra. A `TreeSet` represents a set, but we also *allowed to describe order of the items in the set*. You need to store the nodes in the set and use the distances of the nodes to order the nodes. The node with smallest distance will be at the beginning of the set.   \r\n\r\n    class Node {\r\n        public int id;   // store unique id to distinguish elements in the set\r\n        public int dist; // store distance estimates in the Node itself\r\n        public int compareTo(Node other) {\r\n            // TreeSet implements the Comparable interface.\r\n            // We need tell Java how to compare two Nodes in the TreeSet.\r\n            // For Dijstra, we want the node with the _smallest_ distance\r\n            // to be at the front of the set.\r\n            // If two nodes have same distance, choose node with smaller id\r\n            if (this.dist == other.dist) {\r\n                return Integer.compare(this.id, other.id);\r\n            } else {\r\n                return Integer.compare(this.dist, other.dist);\r\n            }\r\n        }\r\n    }\r\n    // ...\r\n    TreeSet&lt;Node&gt; nodes = new TreeSet&lt;Node&gt;();\r\n\r\n\r\nThe **extract-min** operation is implemented via the following and takes O(lgn) worst case time:\r\n     \r\n    Node u = nodes.pollFirst();\r\n\r\nWith the **decrease-key** operation, we remove the node with the old key (the old distance estimate) and add a new node with the smaller key (the new, better distance estimate). Both operations take O(lgn) worst case time.\r\n    \r\n    nodes.remove(v);\r\n    v.dist = /* some smaller key */\r\n    nodes.add(v);\r\n\r\n--- \r\n\r\nSome extra notes:\r\n\r\n- The above is very simple to implement and, because both of these operations are logarithmic in n, overall, the running time will be O((n + e)lgn). This is considered efficient for a basic implemtation of Dijkstra. See the [CLRS book](https://en.wikipedia.org/wiki/Introduction_to_Algorithms) (*ISBN: 978-0-262-03384-8*) Chapter 19 for a proof of this complexity. \r\n- Although most textbooks will use a priority queue for Dijkstra, Prim, A*, etc., unfortunately neither Java nor C++ actually has a implementation of priority queue with the same O(lgn) decrease key operation!\r\n\r\n- `PriorityQueue` does exist in Java, but the `remove(Object o)` method is *not* logarithmic and so your decrease-key operation would be O(n) instead of O(lgn) and (asymptotically) you&#39;d get a slower Dikjstra!\r\n\r\n- To build up the TreeSet from nothing (using a for loop), it takes time O(nlgn) which is a bit slower compared to the O(n) worst case time to initialise a heap / priority queue from n items. However the main loop of Dijkstra takes time O(nlgn + elgn) which dominates this initialisation time. So for Dijkstra, initialising a TreeSet won&#39;t cause any significant slowdown.\r\n\r\n- We can&#39;t use a `HashSet` because we care about the *order of the keys* - we want to be able to pull out the smallest first. This gives us the node with the best distance estimate!\r\n\r\n- `TreeSet` in Java is implemented using a Red-Black tree - a self-balancing binary search tree. That&#39;s why these operations have *logarithmic* worst case time.\r\n\r\n\r\n- You&#39;re using `int`s to represent you graph nodes which is good but when you introduce a `Node` class you&#39;ll need a way to relate the two entities.  I&#39;d recommending building a `HashMap&lt;Integer, Node&gt;` when you build you graph - it&#39;ll help keep track of which `int` corresponds to what `Node`.\r\n`\r\n","title":"Which datatype to use as queue in Dijkstra&#39;s algorithm?","body":"<p>You can use a <strong><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html\" rel=\"nofollow noreferrer\"><code>TreeSet</code></a></strong>, (in C++ you can use a <a href=\"http://www.cplusplus.com/reference/set/set/\" rel=\"nofollow noreferrer\"><code>std::set</code></a>) to implement your priority queue for Dijkstra. A <code>TreeSet</code> represents a set, but we also <em>allowed to describe order of the items in the set</em>. You need to store the nodes in the set and use the distances of the nodes to order the nodes. The node with smallest distance will be at the beginning of the set.</p>\n<pre><code>class Node {\n    public int id;   // store unique id to distinguish elements in the set\n    public int dist; // store distance estimates in the Node itself\n    public int compareTo(Node other) {\n        // TreeSet implements the Comparable interface.\n        // We need tell Java how to compare two Nodes in the TreeSet.\n        // For Dijstra, we want the node with the _smallest_ distance\n        // to be at the front of the set.\n        // If two nodes have same distance, choose node with smaller id\n        if (this.dist == other.dist) {\n            return Integer.compare(this.id, other.id);\n        } else {\n            return Integer.compare(this.dist, other.dist);\n        }\n    }\n}\n// ...\nTreeSet&lt;Node&gt; nodes = new TreeSet&lt;Node&gt;();\n</code></pre>\n<p>The <strong>extract-min</strong> operation is implemented via the following and takes O(lgn) worst case time:</p>\n<pre><code>Node u = nodes.pollFirst();\n</code></pre>\n<p>With the <strong>decrease-key</strong> operation, we remove the node with the old key (the old distance estimate) and add a new node with the smaller key (the new, better distance estimate). Both operations take O(lgn) worst case time.</p>\n<pre><code>nodes.remove(v);\nv.dist = /* some smaller key */\nnodes.add(v);\n</code></pre>\n<hr />\n<p>Some extra notes:</p>\n<ul>\n<li><p>The above is very simple to implement and, because both of these operations are logarithmic in n, overall, the running time will be O((n + e)lgn). This is considered efficient for a basic implemtation of Dijkstra. See the <a href=\"https://en.wikipedia.org/wiki/Introduction_to_Algorithms\" rel=\"nofollow noreferrer\">CLRS book</a> (<em>ISBN: 978-0-262-03384-8</em>) Chapter 19 for a proof of this complexity.</p>\n</li>\n<li><p>Although most textbooks will use a priority queue for Dijkstra, Prim, A*, etc., unfortunately neither Java nor C++ actually has a implementation of priority queue with the same O(lgn) decrease key operation!</p>\n</li>\n<li><p><code>PriorityQueue</code> does exist in Java, but the <code>remove(Object o)</code> method is <em>not</em> logarithmic and so your decrease-key operation would be O(n) instead of O(lgn) and (asymptotically) you'd get a slower Dikjstra!</p>\n</li>\n<li><p>To build up the TreeSet from nothing (using a for loop), it takes time O(nlgn) which is a bit slower compared to the O(n) worst case time to initialise a heap / priority queue from n items. However the main loop of Dijkstra takes time O(nlgn + elgn) which dominates this initialisation time. So for Dijkstra, initialising a TreeSet won't cause any significant slowdown.</p>\n</li>\n<li><p>We can't use a <code>HashSet</code> because we care about the <em>order of the keys</em> - we want to be able to pull out the smallest first. This gives us the node with the best distance estimate!</p>\n</li>\n<li><p><code>TreeSet</code> in Java is implemented using a Red-Black tree - a self-balancing binary search tree. That's why these operations have <em>logarithmic</em> worst case time.</p>\n</li>\n<li><p>You're using <code>int</code>s to represent you graph nodes which is good but when you introduce a <code>Node</code> class you'll need a way to relate the two entities.  I'd recommending building a <code>HashMap&lt;Integer, Node&gt;</code> when you build you graph - it'll help keep track of which <code>int</code> corresponds to what <code>Node</code>.\n`</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5027817,"reputation":11,"user_id":4039073,"display_name":"Nalin Sharma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622130716,"creation_date":1622037710,"answer_id":67706545,"question_id":6267172,"body_markdown":"Yes, Java doesn&#39;t provide the decrease key for Min Heap via PriorityQueue, so the operation of removal would be O(N) which can be optimised to logN.\r\n\r\nI have implemented Min Heap with decreaseKey(actually both decreaseKey and increaseKey but here only decreaseKey will suffice). Actual Data Structure is Min Heap Map ( HashMap stores the indices of all Nodes and helps in updating current vertex&#39;s neighbour&#39;s min path value via current vertex ) \r\n\r\nI implemented the optimised solution with generics, It took me about 3-4 hours of time to code(my first time), The time complexity is O(logV.E)\r\n\r\nHope this will help!\r\n\r\n\r\n\r\n\r\n     package algo;\r\n\r\n     import java.util.*;\r\n\r\n     public class Dijkstra {\r\n\r\n    /*\r\n     *\r\n     * @author nalin.sharma\r\n     *\r\n     */\r\n\r\n    /**\r\n     *\r\n     * Heap Map Data Structure\r\n     * Heap stores the Nodes with their weight based on comparison on Node&#39;s weight\r\n     * HashMap stores the Node and its index for O(1) look up of node in heap\r\n     *\r\n     *\r\n     *\r\n     *\r\n     * Example -:\r\n     *\r\n     *                                   7\r\n     *                         [2]-----------------&gt;[4]\r\n     *                       ^  |                   ^ \\\r\n     *                     /   |                   |   \\ 1\r\n     *                 2 /    |                   |     v\r\n     *                 /     |                   |       [6]\r\n     *               /      | 1               2 |       ^\r\n     *             /       |                   |      /\r\n     *          [1]       |                   |     /\r\n     *             \\     |                   |    / 5\r\n     *            4 \\   |                   |   /\r\n     *               v v                   |  /\r\n     *                [3]----------------&gt;[5]\r\n     *                         3\r\n     *\r\n     *        Minimum distance from source 1\r\n     *         v  | d[v] | path\r\n     *         --- ------  ---------\r\n     *         2 |  2  |  1,2\r\n     *         3 |  3  |  1,2,3\r\n     *         4 |  8  |  1,2,3,5,4\r\n     *         5 |  6  |  1,2,3,5\r\n     *         6 |  9  |  1,2,3,4,6\r\n     *\r\n     *\r\n     *\r\n     *     Below is the Implementation -:\r\n     *\r\n     */\r\n\r\n    static class HeapMap&lt;T&gt; {\r\n        int size, ind = 0;\r\n        NodeWeight&lt;T&gt; arr [];\r\n        Map&lt;T,Integer&gt; map;\r\n\r\n        /**\r\n         *\r\n         * @param t is the Node(1,2,3..or A,B,C.. )\r\n         * @return the index of element in min heap\r\n         */\r\n        int index(T t) {\r\n            return map.get(t);\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @param index is the Node(1,2,3..or A,B,C.. )\r\n         * @return Node and its Weight\r\n         */\r\n        NodeWeight&lt;T&gt; node(int index) {\r\n            return arr[index];\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @param &lt;T&gt; Node of type &lt;T&gt; and its weight\r\n         */\r\n        static class NodeWeight&lt;T&gt; {\r\n            NodeWeight(T v, int w) {\r\n                nodeVal = v;\r\n                weight = w;\r\n            }\r\n            T nodeVal;\r\n            int weight;\r\n            List&lt;T&gt; path = new ArrayList&lt;&gt;();\r\n        }\r\n\r\n        public HeapMap(int s) {\r\n            size = s;\r\n            arr = new NodeWeight[size + 1];\r\n            map = new HashMap&lt;&gt;();\r\n        }\r\n\r\n        private void updateIndex(T key, int newInd) {\r\n            map.put(key, newInd);\r\n        }\r\n\r\n        private void shiftUp(int i) {\r\n            while(i &gt; 1) {\r\n                int par = i / 2;\r\n                NodeWeight&lt;T&gt; currNodeWeight = arr[i];\r\n                NodeWeight&lt;T&gt; parentNodeWeight = arr[par];\r\n                if(parentNodeWeight.weight &gt; currNodeWeight.weight) {\r\n                    updateIndex(parentNodeWeight.nodeVal, i);\r\n                    updateIndex(currNodeWeight.nodeVal, par);\r\n                    swap(par,i);\r\n                    i = i/2;\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @param nodeVal\r\n         * @param newWeight\r\n         * Based on if the value introduced is higher or lower shift down or shift up operations are performed\r\n         *\r\n         */\r\n        public void update(T nodeVal, int newWeight) {\r\n            int i = ind;\r\n            NodeWeight&lt;T&gt; nodeWeight = arr[map.get(nodeVal)];\r\n            int oldWt = nodeWeight.weight;\r\n            nodeWeight.weight = newWeight;\r\n            if(oldWt &lt; newWeight) {\r\n                shiftDown(map.get(nodeVal));\r\n            }\r\n            else if(oldWt &gt; newWeight) {\r\n                shiftUp(map.get(nodeVal));\r\n            }\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @param nodeVal\r\n         * @param wt\r\n         *\r\n         * Typical insertion in Min Heap and storing its element&#39;s indices in HashMap for fast lookup\r\n         */\r\n        public void insert(T nodeVal, int wt) {\r\n            NodeWeight&lt;T&gt; nodeWt = new NodeWeight&lt;&gt;(nodeVal, wt);\r\n            arr[++ind] = nodeWt;\r\n            updateIndex(nodeVal, ind);\r\n            shiftUp(ind);\r\n        }\r\n\r\n        private void swap(int i, int j) {\r\n            NodeWeight&lt;T&gt; tmp = arr[i];\r\n            arr[i] = arr[j];\r\n            arr[j] = tmp;\r\n        }\r\n\r\n        private void shiftDown(int i) {\r\n            while(i &lt;= ind) {\r\n                int current = i;\r\n                int lChild = i * 2;\r\n                int rChild = i * 2 + 1;\r\n                if(rChild &lt;= ind) {\r\n                    int childInd = (arr[lChild].weight &lt; arr[rChild].weight) ? lChild : rChild;\r\n                    if(arr[childInd].weight &lt; arr[i].weight) {\r\n                        updateIndex(arr[childInd].nodeVal, i);\r\n                        updateIndex(arr[i].nodeVal, childInd);\r\n                        swap(childInd, i);\r\n                        i = childInd;\r\n                    }\r\n                }\r\n                else if(lChild &lt;= ind &amp;&amp; arr[lChild].weight &lt; arr[i].weight) {\r\n                    updateIndex(arr[lChild].nodeVal, i);\r\n                    updateIndex(arr[i].nodeVal, lChild);\r\n                    swap(lChild, i);\r\n                    i = lChild;\r\n                }\r\n                if(current == i) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @return\r\n         *\r\n         * Typical deletion in Min Heap and removing its element&#39;s indices in HashMap\r\n         *\r\n         */\r\n        public NodeWeight&lt;T&gt; remove() {\r\n            if(ind == 0) {\r\n                return null;\r\n            }\r\n            map.remove(arr[1].nodeVal);\r\n            NodeWeight&lt;T&gt; out = arr[1];\r\n            out.path.add(arr[1].nodeVal);\r\n            arr[1] = arr[ind];\r\n            arr[ind--] = null;\r\n            if(ind &gt; 0) {\r\n                updateIndex(arr[1].nodeVal, 1);\r\n                shiftDown(1);\r\n            }\r\n            return out;\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     *  Graph representation -: It is an Map(T,Node&lt;T&gt;) of Map(T(neighbour), Integer(Edge&#39;s weight))\r\n     *\r\n     */\r\n    static class Graph&lt;T&gt; {\r\n\r\n        void init(T... t) {\r\n            for(T z: t) {\r\n                nodes.put(z, new Node&lt;&gt;(z));\r\n            }\r\n        }\r\n\r\n        public Graph(int s, T... t) {\r\n            size = s;\r\n            nodes = new LinkedHashMap&lt;&gt;(size);\r\n            init(t);\r\n        }\r\n\r\n        /**\r\n         *\r\n         * Node class\r\n         *\r\n         */\r\n        static class Node&lt;T&gt; {\r\n            Node(T v) {\r\n                val = v;\r\n            }\r\n            T val;\r\n            //Set&lt;Edge&gt; edges = new HashSet&lt;&gt;();\r\n            Map&lt;T, Integer&gt; edges = new HashMap&lt;&gt;();\r\n        }\r\n\r\n        /*static class Edge {\r\n            Edge(int to, int w) {\r\n                target = to;\r\n                wt = w;\r\n            }\r\n            int target;\r\n            int wt;\r\n            }\r\n        }*/\r\n\r\n        int size;\r\n\r\n        Map&lt;T, Node&lt;T&gt;&gt; nodes;\r\n\r\n        void addEdge(T from, T to, int wt) {\r\n            nodes.get(from).edges.put(to, wt);\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param graph\r\n     * @param from\r\n     * @param heapMap\r\n     * @param &lt;T&gt;\r\n     *\r\n     * Performs initialisation of all the nodes from the start vertex\r\n     *\r\n     */\r\n        private static &lt;T&gt; void init(Graph&lt;T&gt; graph, T from, HeapMap&lt;T&gt; heapMap) {\r\n        Graph.Node&lt;T&gt; fromNode = graph.nodes.get(from);\r\n        graph.nodes.forEach((k,v)-&gt; {\r\n                if(from != k) {\r\n                    heapMap.insert(k, fromNode.edges.getOrDefault(k, Integer.MAX_VALUE));\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n    static class NodePathMinWeight&lt;T&gt; {\r\n        NodePathMinWeight(T n, List&lt;T&gt; p, int c) {\r\n            node = n;\r\n            path = p;\r\n            minCost= c;\r\n        }\r\n        T node;\r\n        List&lt;T&gt; path;\r\n        int minCost;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param graph\r\n     * @param from\r\n     * @param &lt;T&gt;\r\n     * @return\r\n     *\r\n     * Repeat the below process for all the vertices-:\r\n     * Greedy way of picking the current shortest distance and updating its neighbors distance via this vertex\r\n     *\r\n     * Since Each Vertex V has E edges, the time Complexity is\r\n     *\r\n     * O(V.logV.E)\r\n     * 1. selecting vertex with shortest distance from source in logV time -&gt; O(logV) via Heap Map Data structure\r\n     * 2. Visiting all E edges of this vertex and updating the path of its neighbors if found less via this this vertex. -&gt; O(E)\r\n     * 3. Doing operation step 1 and step 2 for all the vertices -&gt; O(V)\r\n     *\r\n     */\r\n\r\n        static &lt;T&gt; Map&lt;T,NodePathMinWeight&lt;T&gt;&gt; dijkstra(Graph&lt;T&gt; graph, T from) {\r\n        Map&lt;T,NodePathMinWeight&lt;T&gt;&gt; output = new HashMap&lt;&gt;();\r\n        HeapMap&lt;T&gt; heapMap = new HeapMap&lt;&gt;(graph.nodes.size());\r\n        init(graph, from, heapMap);\r\n        Set&lt;T&gt; isNotVisited = new HashSet&lt;&gt;();\r\n        graph.nodes.forEach((k,v) -&gt; isNotVisited.add(k));\r\n        isNotVisited.remove(from);\r\n        while(!isNotVisited.isEmpty()) {\r\n            HeapMap.NodeWeight&lt;T&gt; currNodeWeight = heapMap.remove();\r\n            output.put(currNodeWeight.nodeVal, new NodePathMinWeight&lt;&gt;(currNodeWeight.nodeVal, currNodeWeight.path, currNodeWeight.weight));\r\n            //mark visited\r\n            isNotVisited.remove(currNodeWeight.nodeVal);\r\n            //neighbors\r\n            Map&lt;T, Integer&gt; neighbors = graph.nodes.get(currNodeWeight.nodeVal).edges;\r\n            neighbors.forEach((k,v) -&gt; {\r\n                int ind = heapMap.index(k);\r\n                HeapMap.NodeWeight&lt;T&gt; neighbor = heapMap.node(ind);\r\n                int neighborDist = neighbor.weight;\r\n                int currentDistance = currNodeWeight.weight;\r\n                if(currentDistance + v &lt; neighborDist) {\r\n                    //update\r\n                    neighbor.path = new ArrayList&lt;&gt;(currNodeWeight.path);\r\n                    heapMap.update(neighbor.nodeVal, currentDistance + v);\r\n                }\r\n            });\r\n        }\r\n        return output;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Graph&lt;Integer&gt; graph = new Graph&lt;&gt;(6,1,2,3,4,5,6);\r\n        graph.addEdge(1,2,2);\r\n        graph.addEdge(1,3,4);\r\n        graph.addEdge(2,3,1);\r\n        graph.addEdge(2,4,7);\r\n        graph.addEdge(3,5,3);\r\n        graph.addEdge(5,6,5);\r\n        graph.addEdge(4,6,1);\r\n        graph.addEdge(5,4,2);\r\n\r\n        Integer source = 1;\r\n        Map&lt;Integer,NodePathMinWeight&lt;Integer&gt;&gt; map = dijkstra(graph,source);\r\n        map.forEach((k,v) -&gt; {\r\n            v.path.add(0,source);\r\n            System.out.println(&quot;source vertex :[&quot;+source+&quot;] to vertex :[&quot;+k+&quot;] cost:&quot;+v.minCost+&quot; shortest path :&quot;+v.path);\r\n        });\r\n    }\r\n}\r\n\r\n\r\n\r\nOutput-:\r\n\r\nsource vertex :[1] to vertex :[2] cost:2 shortest path :[1, 2]\r\n\r\nsource vertex :[1] to vertex :[3] cost:3 shortest path :[1, 2, 3]\r\n\r\nsource vertex :[1] to vertex :[4] cost:8 shortest path :[1, 2, 3, 5, 4]\r\n\r\nsource vertex :[1] to vertex :[5] cost:6 shortest path :[1, 2, 3, 5]\r\n\r\nsource vertex :[1] to vertex :[6] cost:9 shortest path :[1, 2, 3, 5, 4, 6]","title":"Which datatype to use as queue in Dijkstra&#39;s algorithm?","body":"<p>Yes, Java doesn't provide the decrease key for Min Heap via PriorityQueue, so the operation of removal would be O(N) which can be optimised to logN.</p>\n<p>I have implemented Min Heap with decreaseKey(actually both decreaseKey and increaseKey but here only decreaseKey will suffice). Actual Data Structure is Min Heap Map ( HashMap stores the indices of all Nodes and helps in updating current vertex's neighbour's min path value via current vertex )</p>\n<p>I implemented the optimised solution with generics, It took me about 3-4 hours of time to code(my first time), The time complexity is O(logV.E)</p>\n<p>Hope this will help!</p>\n<pre><code> package algo;\n\n import java.util.*;\n\n public class Dijkstra {\n\n/*\n *\n * @author nalin.sharma\n *\n */\n\n/**\n *\n * Heap Map Data Structure\n * Heap stores the Nodes with their weight based on comparison on Node's weight\n * HashMap stores the Node and its index for O(1) look up of node in heap\n *\n *\n *\n *\n * Example -:\n *\n *                                   7\n *                         [2]-----------------&gt;[4]\n *                       ^  |                   ^ \\\n *                     /   |                   |   \\ 1\n *                 2 /    |                   |     v\n *                 /     |                   |       [6]\n *               /      | 1               2 |       ^\n *             /       |                   |      /\n *          [1]       |                   |     /\n *             \\     |                   |    / 5\n *            4 \\   |                   |   /\n *               v v                   |  /\n *                [3]----------------&gt;[5]\n *                         3\n *\n *        Minimum distance from source 1\n *         v  | d[v] | path\n *         --- ------  ---------\n *         2 |  2  |  1,2\n *         3 |  3  |  1,2,3\n *         4 |  8  |  1,2,3,5,4\n *         5 |  6  |  1,2,3,5\n *         6 |  9  |  1,2,3,4,6\n *\n *\n *\n *     Below is the Implementation -:\n *\n */\n\nstatic class HeapMap&lt;T&gt; {\n    int size, ind = 0;\n    NodeWeight&lt;T&gt; arr [];\n    Map&lt;T,Integer&gt; map;\n\n    /**\n     *\n     * @param t is the Node(1,2,3..or A,B,C.. )\n     * @return the index of element in min heap\n     */\n    int index(T t) {\n        return map.get(t);\n    }\n\n    /**\n     *\n     * @param index is the Node(1,2,3..or A,B,C.. )\n     * @return Node and its Weight\n     */\n    NodeWeight&lt;T&gt; node(int index) {\n        return arr[index];\n    }\n\n    /**\n     *\n     * @param &lt;T&gt; Node of type &lt;T&gt; and its weight\n     */\n    static class NodeWeight&lt;T&gt; {\n        NodeWeight(T v, int w) {\n            nodeVal = v;\n            weight = w;\n        }\n        T nodeVal;\n        int weight;\n        List&lt;T&gt; path = new ArrayList&lt;&gt;();\n    }\n\n    public HeapMap(int s) {\n        size = s;\n        arr = new NodeWeight[size + 1];\n        map = new HashMap&lt;&gt;();\n    }\n\n    private void updateIndex(T key, int newInd) {\n        map.put(key, newInd);\n    }\n\n    private void shiftUp(int i) {\n        while(i &gt; 1) {\n            int par = i / 2;\n            NodeWeight&lt;T&gt; currNodeWeight = arr[i];\n            NodeWeight&lt;T&gt; parentNodeWeight = arr[par];\n            if(parentNodeWeight.weight &gt; currNodeWeight.weight) {\n                updateIndex(parentNodeWeight.nodeVal, i);\n                updateIndex(currNodeWeight.nodeVal, par);\n                swap(par,i);\n                i = i/2;\n            }\n            else {\n                break;\n            }\n        }\n    }\n\n    /**\n     *\n     * @param nodeVal\n     * @param newWeight\n     * Based on if the value introduced is higher or lower shift down or shift up operations are performed\n     *\n     */\n    public void update(T nodeVal, int newWeight) {\n        int i = ind;\n        NodeWeight&lt;T&gt; nodeWeight = arr[map.get(nodeVal)];\n        int oldWt = nodeWeight.weight;\n        nodeWeight.weight = newWeight;\n        if(oldWt &lt; newWeight) {\n            shiftDown(map.get(nodeVal));\n        }\n        else if(oldWt &gt; newWeight) {\n            shiftUp(map.get(nodeVal));\n        }\n    }\n\n    /**\n     *\n     * @param nodeVal\n     * @param wt\n     *\n     * Typical insertion in Min Heap and storing its element's indices in HashMap for fast lookup\n     */\n    public void insert(T nodeVal, int wt) {\n        NodeWeight&lt;T&gt; nodeWt = new NodeWeight&lt;&gt;(nodeVal, wt);\n        arr[++ind] = nodeWt;\n        updateIndex(nodeVal, ind);\n        shiftUp(ind);\n    }\n\n    private void swap(int i, int j) {\n        NodeWeight&lt;T&gt; tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n\n    private void shiftDown(int i) {\n        while(i &lt;= ind) {\n            int current = i;\n            int lChild = i * 2;\n            int rChild = i * 2 + 1;\n            if(rChild &lt;= ind) {\n                int childInd = (arr[lChild].weight &lt; arr[rChild].weight) ? lChild : rChild;\n                if(arr[childInd].weight &lt; arr[i].weight) {\n                    updateIndex(arr[childInd].nodeVal, i);\n                    updateIndex(arr[i].nodeVal, childInd);\n                    swap(childInd, i);\n                    i = childInd;\n                }\n            }\n            else if(lChild &lt;= ind &amp;&amp; arr[lChild].weight &lt; arr[i].weight) {\n                updateIndex(arr[lChild].nodeVal, i);\n                updateIndex(arr[i].nodeVal, lChild);\n                swap(lChild, i);\n                i = lChild;\n            }\n            if(current == i) {\n                break;\n            }\n        }\n    }\n\n    /**\n     *\n     * @return\n     *\n     * Typical deletion in Min Heap and removing its element's indices in HashMap\n     *\n     */\n    public NodeWeight&lt;T&gt; remove() {\n        if(ind == 0) {\n            return null;\n        }\n        map.remove(arr[1].nodeVal);\n        NodeWeight&lt;T&gt; out = arr[1];\n        out.path.add(arr[1].nodeVal);\n        arr[1] = arr[ind];\n        arr[ind--] = null;\n        if(ind &gt; 0) {\n            updateIndex(arr[1].nodeVal, 1);\n            shiftDown(1);\n        }\n        return out;\n    }\n}\n\n/**\n *\n *  Graph representation -: It is an Map(T,Node&lt;T&gt;) of Map(T(neighbour), Integer(Edge's weight))\n *\n */\nstatic class Graph&lt;T&gt; {\n\n    void init(T... t) {\n        for(T z: t) {\n            nodes.put(z, new Node&lt;&gt;(z));\n        }\n    }\n\n    public Graph(int s, T... t) {\n        size = s;\n        nodes = new LinkedHashMap&lt;&gt;(size);\n        init(t);\n    }\n\n    /**\n     *\n     * Node class\n     *\n     */\n    static class Node&lt;T&gt; {\n        Node(T v) {\n            val = v;\n        }\n        T val;\n        //Set&lt;Edge&gt; edges = new HashSet&lt;&gt;();\n        Map&lt;T, Integer&gt; edges = new HashMap&lt;&gt;();\n    }\n\n    /*static class Edge {\n        Edge(int to, int w) {\n            target = to;\n            wt = w;\n        }\n        int target;\n        int wt;\n        }\n    }*/\n\n    int size;\n\n    Map&lt;T, Node&lt;T&gt;&gt; nodes;\n\n    void addEdge(T from, T to, int wt) {\n        nodes.get(from).edges.put(to, wt);\n    }\n}\n\n/**\n *\n * @param graph\n * @param from\n * @param heapMap\n * @param &lt;T&gt;\n *\n * Performs initialisation of all the nodes from the start vertex\n *\n */\n    private static &lt;T&gt; void init(Graph&lt;T&gt; graph, T from, HeapMap&lt;T&gt; heapMap) {\n    Graph.Node&lt;T&gt; fromNode = graph.nodes.get(from);\n    graph.nodes.forEach((k,v)-&gt; {\n            if(from != k) {\n                heapMap.insert(k, fromNode.edges.getOrDefault(k, Integer.MAX_VALUE));\n            }\n        });\n    }\n\n\nstatic class NodePathMinWeight&lt;T&gt; {\n    NodePathMinWeight(T n, List&lt;T&gt; p, int c) {\n        node = n;\n        path = p;\n        minCost= c;\n    }\n    T node;\n    List&lt;T&gt; path;\n    int minCost;\n}\n\n/**\n *\n * @param graph\n * @param from\n * @param &lt;T&gt;\n * @return\n *\n * Repeat the below process for all the vertices-:\n * Greedy way of picking the current shortest distance and updating its neighbors distance via this vertex\n *\n * Since Each Vertex V has E edges, the time Complexity is\n *\n * O(V.logV.E)\n * 1. selecting vertex with shortest distance from source in logV time -&gt; O(logV) via Heap Map Data structure\n * 2. Visiting all E edges of this vertex and updating the path of its neighbors if found less via this this vertex. -&gt; O(E)\n * 3. Doing operation step 1 and step 2 for all the vertices -&gt; O(V)\n *\n */\n\n    static &lt;T&gt; Map&lt;T,NodePathMinWeight&lt;T&gt;&gt; dijkstra(Graph&lt;T&gt; graph, T from) {\n    Map&lt;T,NodePathMinWeight&lt;T&gt;&gt; output = new HashMap&lt;&gt;();\n    HeapMap&lt;T&gt; heapMap = new HeapMap&lt;&gt;(graph.nodes.size());\n    init(graph, from, heapMap);\n    Set&lt;T&gt; isNotVisited = new HashSet&lt;&gt;();\n    graph.nodes.forEach((k,v) -&gt; isNotVisited.add(k));\n    isNotVisited.remove(from);\n    while(!isNotVisited.isEmpty()) {\n        HeapMap.NodeWeight&lt;T&gt; currNodeWeight = heapMap.remove();\n        output.put(currNodeWeight.nodeVal, new NodePathMinWeight&lt;&gt;(currNodeWeight.nodeVal, currNodeWeight.path, currNodeWeight.weight));\n        //mark visited\n        isNotVisited.remove(currNodeWeight.nodeVal);\n        //neighbors\n        Map&lt;T, Integer&gt; neighbors = graph.nodes.get(currNodeWeight.nodeVal).edges;\n        neighbors.forEach((k,v) -&gt; {\n            int ind = heapMap.index(k);\n            HeapMap.NodeWeight&lt;T&gt; neighbor = heapMap.node(ind);\n            int neighborDist = neighbor.weight;\n            int currentDistance = currNodeWeight.weight;\n            if(currentDistance + v &lt; neighborDist) {\n                //update\n                neighbor.path = new ArrayList&lt;&gt;(currNodeWeight.path);\n                heapMap.update(neighbor.nodeVal, currentDistance + v);\n            }\n        });\n    }\n    return output;\n}\n\npublic static void main(String[] args) {\n    Graph&lt;Integer&gt; graph = new Graph&lt;&gt;(6,1,2,3,4,5,6);\n    graph.addEdge(1,2,2);\n    graph.addEdge(1,3,4);\n    graph.addEdge(2,3,1);\n    graph.addEdge(2,4,7);\n    graph.addEdge(3,5,3);\n    graph.addEdge(5,6,5);\n    graph.addEdge(4,6,1);\n    graph.addEdge(5,4,2);\n\n    Integer source = 1;\n    Map&lt;Integer,NodePathMinWeight&lt;Integer&gt;&gt; map = dijkstra(graph,source);\n    map.forEach((k,v) -&gt; {\n        v.path.add(0,source);\n        System.out.println(&quot;source vertex :[&quot;+source+&quot;] to vertex :[&quot;+k+&quot;] cost:&quot;+v.minCost+&quot; shortest path :&quot;+v.path);\n    });\n}\n</code></pre>\n<p>}</p>\n<p>Output-:</p>\n<p>source vertex :[1] to vertex :[2] cost:2 shortest path :[1, 2]</p>\n<p>source vertex :[1] to vertex :[3] cost:3 shortest path :[1, 2, 3]</p>\n<p>source vertex :[1] to vertex :[4] cost:8 shortest path :[1, 2, 3, 5, 4]</p>\n<p>source vertex :[1] to vertex :[5] cost:6 shortest path :[1, 2, 3, 5]</p>\n<p>source vertex :[1] to vertex :[6] cost:9 shortest path :[1, 2, 3, 5, 4, 6]</p>\n"}],"owner":{"account_id":91786,"reputation":5829,"user_id":251861,"accept_rate":85,"display_name":"D&#228;nu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15873,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":6267630,"answer_count":5,"score":25,"last_activity_date":1679907115,"creation_date":1307458583,"question_id":6267172,"body_markdown":"I&#39;m trying to implement Dijkstra&#39;s algorithm in Java (self-study). I use the pseudo-code provided by Wikipedia ([link][1]). Now near the end of the algorithm, I should `decrease-key v in Q;`. I guess i should have implemented Q with a BinaryHeap or something like that? What would be the right (built-in) datatype to use here?\r\n\r\n    private void dijkstra(int source) {\r\n    \t\tint[] dist = new int[this.adjacencyMatrix.length];\r\n    \t\tint[] previous = new int[this.adjacencyMatrix.length];\r\n    \t\tQueue&lt;Integer&gt; q = new LinkedList&lt;Integer&gt;();\r\n    \t\t\r\n    \t\tfor (int i = 0; i &lt; this.adjacencyMatrix.length; i++) {\r\n    \t\t\tdist[i] = this.INFINITY;\r\n    \t\t\tprevious[i] = this.UNDEFINED;\r\n    \t\t\tq.add(i);\r\n    \t\t}\r\n    \t\t\r\n    \t\tdist[source] = 0;\r\n    \t\t\r\n    \t\twhile(!q.isEmpty()) {\r\n    \t\t\t// get node with smallest dist;\r\n    \t\t\tint u = 0;\r\n    \t\t\tfor(int i = 0; i &lt; this.adjacencyMatrix.length; i++) {\r\n    \t\t\t\tif(dist[i] &lt; dist[u])\r\n    \t\t\t\t\tu = i;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\t// break if dist == INFINITY\r\n    \t\t\tif(dist[u] == this.INFINITY) break;\r\n    \t\t\t\r\n    \t\t\t// remove u from q\r\n    \t\t\tq.remove(u);\r\n    \t\t\t\r\n    \t\t\tfor(int i = 0; i &lt; this.adjacencyMatrix.length; i++) {\r\n    \t\t\t\tif(this.adjacencyMatrix[u][i] == 1) {\r\n    \t\t\t\t\t// in a unweighted graph, this.adjacencyMatrix[u][i] always == 1;\r\n    \t\t\t\t\tint alt = dist[u] + this.adjacencyMatrix[u][i]; \r\n    \t\t\t\t\tif(alt &lt; dist[i]) {\r\n    \t\t\t\t\t\tdist[i] = alt;\r\n    \t\t\t\t\t\tprevious[i] = u;\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t\t// here&#39;s where I should &quot;decrease the key&quot;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm#Pseudocode","title":"Which datatype to use as queue in Dijkstra&#39;s algorithm?","body":"<p>I'm trying to implement Dijkstra's algorithm in Java (self-study). I use the pseudo-code provided by Wikipedia (<a href=\"http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm#Pseudocode\">link</a>). Now near the end of the algorithm, I should <code>decrease-key v in Q;</code>. I guess i should have implemented Q with a BinaryHeap or something like that? What would be the right (built-in) datatype to use here?</p>\n\n<pre><code>private void dijkstra(int source) {\n        int[] dist = new int[this.adjacencyMatrix.length];\n        int[] previous = new int[this.adjacencyMatrix.length];\n        Queue&lt;Integer&gt; q = new LinkedList&lt;Integer&gt;();\n\n        for (int i = 0; i &lt; this.adjacencyMatrix.length; i++) {\n            dist[i] = this.INFINITY;\n            previous[i] = this.UNDEFINED;\n            q.add(i);\n        }\n\n        dist[source] = 0;\n\n        while(!q.isEmpty()) {\n            // get node with smallest dist;\n            int u = 0;\n            for(int i = 0; i &lt; this.adjacencyMatrix.length; i++) {\n                if(dist[i] &lt; dist[u])\n                    u = i;\n            }\n\n            // break if dist == INFINITY\n            if(dist[u] == this.INFINITY) break;\n\n            // remove u from q\n            q.remove(u);\n\n            for(int i = 0; i &lt; this.adjacencyMatrix.length; i++) {\n                if(this.adjacencyMatrix[u][i] == 1) {\n                    // in a unweighted graph, this.adjacencyMatrix[u][i] always == 1;\n                    int alt = dist[u] + this.adjacencyMatrix[u][i]; \n                    if(alt &lt; dist[i]) {\n                        dist[i] = alt;\n                        previous[i] = u;\n\n                        // here's where I should \"decrease the key\"\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-jpa","criteria","specifications"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1679904962,"post_id":75853457,"comment_id":133797986,"body_markdown":"Why? What would it add?","body":"Why? What would it add?"},{"owner":{"account_id":11520495,"reputation":1,"user_id":8442428,"display_name":"Hitler Caliwag"},"score":0,"creation_date":1679905343,"post_id":75853457,"comment_id":133798066,"body_markdown":"I want to change or set an alias on the Id from the user table to &quot;userId&quot; instead of &quot;id&quot;, I don&#39;t know if it&#39;s possible. @M.Deinum","body":"I want to change or set an alias on the Id from the user table to &quot;userId&quot; instead of &quot;id&quot;, I don&#39;t know if it&#39;s possible. @M.Deinum"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1679908076,"post_id":75853457,"comment_id":133798700,"body_markdown":"What do you mean with alias here? It is totally unclear to me what you want to achieve? What do you think an alias is? Also the name of the field and the name of the column can be differnt and what you use here is the name of the field **not** the name of the column.","body":"What do you mean with alias here? It is totally unclear to me what you want to achieve? What do you think an alias is? Also the name of the field and the name of the column can be differnt and what you use here is the name of the field <b>not</b> the name of the column."},{"owner":{"account_id":11520495,"reputation":1,"user_id":8442428,"display_name":"Hitler Caliwag"},"score":0,"creation_date":1679908605,"post_id":75853457,"comment_id":133798840,"body_markdown":"This is I want to achieve &quot;SELECT id AS userId FROM user&quot; I want to apply this as the temporary name on the predicate.","body":"This is I want to achieve &quot;SELECT id AS userId FROM user&quot; I want to apply this as the temporary name on the predicate."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1679910719,"post_id":75853457,"comment_id":133799380,"body_markdown":"But why? What do you gain from specifying the alias. But you can use `alias` for that, something like `root.get(&quot;id&quot;).alias(&quot;userId&quot;)`.","body":"But why? What do you gain from specifying the alias. But you can use <code>alias</code> for that, something like <code>root.get(&quot;id&quot;).alias(&quot;userId&quot;)</code>."},{"owner":{"account_id":11520495,"reputation":1,"user_id":8442428,"display_name":"Hitler Caliwag"},"score":0,"creation_date":1679911040,"post_id":75853457,"comment_id":133799490,"body_markdown":"I try that syntax `criteriaBuilder.like(joinUser.get(&quot;id&quot;).alias(&quot;userId&quot;), &quot;%&quot; + value + &quot;%&quot;));` but it gives me an error `The method like(Expression&lt;String&gt;, String) in the type CriteriaBuilder is not applicable for the arguments (Selection&lt;Object&gt;, String)` also I add `.as(String.class)`","body":"I try that syntax <code>criteriaBuilder.like(joinUser.get(&quot;id&quot;).alias(&quot;userId&quot;), &quot;%&quot; + value + &quot;%&quot;));</code> but it gives me an error <code>The method like(Expression&lt;String&gt;, String) in the type CriteriaBuilder is not applicable for the arguments (Selection&lt;Object&gt;, String)</code> also I add <code>.as(String.class)</code>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1679911453,"post_id":75853457,"comment_id":133799605,"body_markdown":"You can cast it back again to an expression. But still I don&#39;t see the added benefit of using an alias here. It only adds complexity without any gain or at least the gain isn&#39;t really clear from this.","body":"You can cast it back again to an expression. But still I don&#39;t see the added benefit of using an alias here. It only adds complexity without any gain or at least the gain isn&#39;t really clear from this."}],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679906951,"creation_date":1679906951,"answer_id":75853769,"question_id":75853457,"body_markdown":"Surely this is easier: (I am assuming that a user can have many subjects and a subject can have many users)\r\n\r\n    @Id\r\n    @Column(name=”userId”)\r\n    Long id;\r\n\r\n    @ManyToMany\r\n    @JoinTable(\r\n      name = &quot;user_subject&quot;, \r\n      joinColumns = @JoinColumn(name = &quot;userId&quot;), \r\n      inverseJoinColumns = @JoinColumn(name = &quot;subjectId&quot;))\r\n    Set&lt;Subject&gt; subjects;\r\n\r\n","title":"Set Alias on jpa specification on spring boot","body":"<p>Surely this is easier: (I am assuming that a user can have many subjects and a subject can have many users)</p>\n<pre><code>@Id\n@Column(name=”userId”)\nLong id;\n\n@ManyToMany\n@JoinTable(\n  name = &quot;user_subject&quot;, \n  joinColumns = @JoinColumn(name = &quot;userId&quot;), \n  inverseJoinColumns = @JoinColumn(name = &quot;subjectId&quot;))\nSet&lt;Subject&gt; subjects;\n</code></pre>\n"}],"owner":{"account_id":11520495,"reputation":1,"user_id":8442428,"display_name":"Hitler Caliwag"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":390,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679906951,"creation_date":1679904646,"question_id":75853457,"body_markdown":"How can set an alias on the id from the user and change it to &quot;userId&quot;?\r\n\r\n\r\n\r\nSpecification.java\r\n```\r\n\r\n\tpublic static Specification&lt;Subject&gt; byColumnNameAndValueSubject(String value) {\r\n        return new Specification&lt;Subject&gt;() {\r\n            @Override\r\n            public Predicate toPredicate(Root&lt;Subject&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criteriaBuilder) {\r\n\r\n\t\t\t\tJoin&lt;Subject, UsersSubjects&gt; joinUsersSubjects = root.join(&quot;usersSubjects&quot;, JoinType.INNER);\r\n\t\t\t\tJoin&lt;UsersSubjects, User&gt; joinUser = joinUsersSubjects.join(&quot;user&quot;, JoinType.INNER);\r\n\r\n\t\t\t\tPredicate predicateForData = criteriaBuilder.or(\r\n\t\t\t\t\tcriteriaBuilder.like(root.get(&quot;id&quot;).as(String.class), &quot;%&quot; +  value + &quot;%&quot;),\r\n\t\t\t\t\tcriteriaBuilder.like(joinUser.get(&quot;id&quot;).as(String.class), &quot;%&quot; + value + &quot;%&quot;));\r\n\r\n\t\t\t\treturn criteriaBuilder.and(predicateForData);\r\n            }\r\n        };\r\n    }\r\n```\r\n\r\nI want to searchable the id from user, Please help.","title":"Set Alias on jpa specification on spring boot","body":"<p>How can set an alias on the id from the user and change it to &quot;userId&quot;?</p>\n<p>Specification.java</p>\n<pre><code>\n    public static Specification&lt;Subject&gt; byColumnNameAndValueSubject(String value) {\n        return new Specification&lt;Subject&gt;() {\n            @Override\n            public Predicate toPredicate(Root&lt;Subject&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criteriaBuilder) {\n\n                Join&lt;Subject, UsersSubjects&gt; joinUsersSubjects = root.join(&quot;usersSubjects&quot;, JoinType.INNER);\n                Join&lt;UsersSubjects, User&gt; joinUser = joinUsersSubjects.join(&quot;user&quot;, JoinType.INNER);\n\n                Predicate predicateForData = criteriaBuilder.or(\n                    criteriaBuilder.like(root.get(&quot;id&quot;).as(String.class), &quot;%&quot; +  value + &quot;%&quot;),\n                    criteriaBuilder.like(joinUser.get(&quot;id&quot;).as(String.class), &quot;%&quot; + value + &quot;%&quot;));\n\n                return criteriaBuilder.and(predicateForData);\n            }\n        };\n    }\n</code></pre>\n<p>I want to searchable the id from user, Please help.</p>\n"},{"tags":["java","spring","postgresql","docker","docker-compose"],"comments":[{"owner":{"account_id":11293739,"reputation":3639,"user_id":8281848,"display_name":"MSpiller"},"score":0,"creation_date":1679392493,"post_id":75777666,"comment_id":133709414,"body_markdown":"Do you really need to run the unit tests while the docker container is built? Wouldn&#39;t it make more sense to run the unit tests separate and only build your application&#39;s container when they pass?","body":"Do you really need to run the unit tests while the docker container is built? Wouldn&#39;t it make more sense to run the unit tests separate and only build your application&#39;s container when they pass?"}],"answers":[{"tags":[],"owner":{"account_id":1502429,"reputation":761,"user_id":1406656,"display_name":"PaPu"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1679392705,"creation_date":1679392705,"answer_id":75799696,"question_id":75777666,"body_markdown":"As I understand you need insert endpoint of postgres where `db` in `jdbc:postgresql://db:5432`\r\nOr if you have docker-compose.yml, service name of postgresql should be `db`","title":"Docker and mvn build - cant pass unit tests as DB needs another container running?","body":"<p>As I understand you need insert endpoint of postgres where <code>db</code> in <code>jdbc:postgresql://db:5432</code>\nOr if you have docker-compose.yml, service name of postgresql should be <code>db</code></p>\n"},{"tags":[],"owner":{"account_id":16224543,"reputation":3169,"user_id":11715259,"display_name":"N1ngu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679501174,"creation_date":1679501174,"answer_id":75814666,"question_id":75777666,"body_markdown":"Skip tests while building the image, see https://stackoverflow.com/q/7456006/11715259\r\n\r\nOnce the image is built, you can run the tests by starting a container in an environment where a DB endpoint is available.","title":"Docker and mvn build - cant pass unit tests as DB needs another container running?","body":"<p>Skip tests while building the image, see <a href=\"https://stackoverflow.com/q/7456006/11715259\">Maven package/install without test (skip tests)</a></p>\n<p>Once the image is built, you can run the tests by starting a container in an environment where a DB endpoint is available.</p>\n"},{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1679525982,"creation_date":1679525982,"answer_id":75817961,"question_id":75777666,"body_markdown":"Roughly speaking, when you build your image under the hood docker creates a series of intermediate containers, one for every line in your Dockerfile.\r\n\r\nYou are trying to connect from one of this intermediate containers, the one which is packaging your application, to another container running Postgres in your host.\r\n\r\nI am not sure if it will work - the subject had been broadly covered here in [SO](https://stackoverflow.com/questions/24319662/from-inside-of-a-docker-container-how-do-i-connect-to-the-localhost-of-the-mach) - but, if you are using MacOS or Windows, and your Postgres container exposes the port to the host, you could try modifying the connection string in your Spring properties and use the network address `host.docker.internal` to try reaching the database:\r\n\r\n```\r\n# datasource\r\nspring.datasource.url=jdbc:postgresql://host.docker.internal:5432/myApp?currentSchema=gpclinic&amp;createDatabaseIfNotExist=true\r\nspring.datasource.username=uname\r\nspring.datasource.password=pword\r\n```\r\n\r\nYou mentioned compose as well, but again I am not sure whether it is possible. Please, see [this related SO question](https://stackoverflow.com/questions/71553245/connect-to-another-dockerized-app-from-intermediate-containers-which-would-be-cr).\r\n\r\nHaving said that, please, be aware that the solution has different drawbacks, among others:\r\n\r\n - It makes your docker build not portable, think about building it in Linux or in a CI/CD system.\r\n - Probably you will need to set some kind of Spring profile or similar stuff for dealing with the properties value change.\r\n\r\nI think that, as suggested in other answers, it is preferable to skip the unit tests execution while building your image. You can achieve this in several ways, for example (`clean` is not necessary, but I usually clean before packaging the application):\r\n\r\n```\r\n# Compile and package the application to an executable JAR\r\nRUN mvn clean package -skipTests\r\n```\r\n\r\nOr:\r\n\r\n```\r\n# Compile and package the application to an executable JAR\r\nRUN mvn clean package -Dmaven.test.skip=true\r\n```\r\n\r\nThe same approach is addressed in [this SO related question](https://stackoverflow.com/questions/55226062/maven-fail-in-spring-project-build-trying-to-establish-connection-with-database), for instance.\r\n\r\nFollowing this approach, if you really need to run your tests, it is preferable to use a devoted step in a CI/CD system pipeline, for example, instead of running it in the docker build. \r\n\r\nFinally, please, consider why you are accessing a database in a unit test: in my opinion, and please, forgive me, because SO answer shouldn&#39;t be opinion based, it is something that you can find in an integration test, for example, but I think it is not commonly used in unit tests.\r\n\r\nEven in the case that using a database is a must, for simplicity, predictability, in order to improve portability and build isolation, please, consider use an in-memory one like [H2](https://www.h2database.com/html/main.html) with the necessary information, and run your tests against it instead.","title":"Docker and mvn build - cant pass unit tests as DB needs another container running?","body":"<p>Roughly speaking, when you build your image under the hood docker creates a series of intermediate containers, one for every line in your Dockerfile.</p>\n<p>You are trying to connect from one of this intermediate containers, the one which is packaging your application, to another container running Postgres in your host.</p>\n<p>I am not sure if it will work - the subject had been broadly covered here in <a href=\"https://stackoverflow.com/questions/24319662/from-inside-of-a-docker-container-how-do-i-connect-to-the-localhost-of-the-mach\">SO</a> - but, if you are using MacOS or Windows, and your Postgres container exposes the port to the host, you could try modifying the connection string in your Spring properties and use the network address <code>host.docker.internal</code> to try reaching the database:</p>\n<pre><code># datasource\nspring.datasource.url=jdbc:postgresql://host.docker.internal:5432/myApp?currentSchema=gpclinic&amp;createDatabaseIfNotExist=true\nspring.datasource.username=uname\nspring.datasource.password=pword\n</code></pre>\n<p>You mentioned compose as well, but again I am not sure whether it is possible. Please, see <a href=\"https://stackoverflow.com/questions/71553245/connect-to-another-dockerized-app-from-intermediate-containers-which-would-be-cr\">this related SO question</a>.</p>\n<p>Having said that, please, be aware that the solution has different drawbacks, among others:</p>\n<ul>\n<li>It makes your docker build not portable, think about building it in Linux or in a CI/CD system.</li>\n<li>Probably you will need to set some kind of Spring profile or similar stuff for dealing with the properties value change.</li>\n</ul>\n<p>I think that, as suggested in other answers, it is preferable to skip the unit tests execution while building your image. You can achieve this in several ways, for example (<code>clean</code> is not necessary, but I usually clean before packaging the application):</p>\n<pre><code># Compile and package the application to an executable JAR\nRUN mvn clean package -skipTests\n</code></pre>\n<p>Or:</p>\n<pre><code># Compile and package the application to an executable JAR\nRUN mvn clean package -Dmaven.test.skip=true\n</code></pre>\n<p>The same approach is addressed in <a href=\"https://stackoverflow.com/questions/55226062/maven-fail-in-spring-project-build-trying-to-establish-connection-with-database\">this SO related question</a>, for instance.</p>\n<p>Following this approach, if you really need to run your tests, it is preferable to use a devoted step in a CI/CD system pipeline, for example, instead of running it in the docker build.</p>\n<p>Finally, please, consider why you are accessing a database in a unit test: in my opinion, and please, forgive me, because SO answer shouldn't be opinion based, it is something that you can find in an integration test, for example, but I think it is not commonly used in unit tests.</p>\n<p>Even in the case that using a database is a must, for simplicity, predictability, in order to improve portability and build isolation, please, consider use an in-memory one like <a href=\"https://www.h2database.com/html/main.html\" rel=\"nofollow noreferrer\">H2</a> with the necessary information, and run your tests against it instead.</p>\n"},{"tags":[],"owner":{"account_id":19983270,"reputation":51,"user_id":14645910,"display_name":"chatla harishwar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679906927,"creation_date":1679906927,"answer_id":75853767,"question_id":75777666,"body_markdown":"I think the Below Answer might Help you\r\n\r\nMay be You can Add h2 database properites in a seperate properties file \r\n\r\napplication-test.properties.\r\n\r\n    spring.datasource.url=jdbc:h2:mem:testdb\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.datasource.username=user\r\n    spring.datasource.password=password\r\n    spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\n\r\nAnd may be Change the Scope in original application.properties\r\n\r\n    spring.profiles.active=test\r\n\r\nAnd you can Third Dependency for h2 Database as it will not be dependent on any other Database ..h2 Database runs in your JVM\r\n\r\n\t&lt;!-- https://mvnrepository.com/artifact/com.h2database/h2 --&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\r\nSo in this Case you Dont need any container to Run the Tests...Once the Tests Passes your package will be built.","title":"Docker and mvn build - cant pass unit tests as DB needs another container running?","body":"<p>I think the Below Answer might Help you</p>\n<p>May be You can Add h2 database properites in a seperate properties file</p>\n<p>application-test.properties.</p>\n<pre><code>spring.datasource.url=jdbc:h2:mem:testdb\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=user\nspring.datasource.password=password\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\n</code></pre>\n<p>And may be Change the Scope in original application.properties</p>\n<pre><code>spring.profiles.active=test\n</code></pre>\n<p>And you can Third Dependency for h2 Database as it will not be dependent on any other Database ..h2 Database runs in your JVM</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/com.h2database/h2 --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n    &lt;artifactId&gt;h2&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>So in this Case you Dont need any container to Run the Tests...Once the Tests Passes your package will be built.</p>\n"}],"owner":{"account_id":16962007,"reputation":1665,"user_id":12268910,"display_name":"java12399900"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":854,"favorite_count":0,"down_vote_count":2,"up_vote_count":7,"accepted_answer_id":75817961,"answer_count":4,"score":5,"last_activity_date":1679906927,"creation_date":1679161915,"question_id":75777666,"body_markdown":"I have a standard spring boot application with this docker file:\r\n\r\n\r\n    FROM maven:latest AS maven\r\n    \r\n    WORKDIR /usr/src/app\r\n    COPY . /usr/src/app\r\n    # Compile and package the application to an executable JAR\r\n    RUN mvn package\r\n    \r\n    FROM amazoncorretto:17-alpine-jdk\r\n    \r\n    ARG JAR_FILE=app.jar\r\n    \r\n    WORKDIR /opt/app\r\n    \r\n    # Copy the jar from the maven stage to the /opt/app directory of the current stage.\r\n    COPY --from=maven /usr/src/app/target/${JAR_FILE} /opt/app/\r\n    \r\n    EXPOSE 8080\r\n    \r\n    ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\r\n\r\nMy `application.properties` file has the connection spring to my postgres db running in a docker container:\r\n\r\n    # datasource\r\n    spring.datasource.url=jdbc:postgresql://db:5432/myApp?currentSchema=gpclinic&amp;createDatabaseIfNotExist=true\r\n    spring.datasource.username=uname\r\n    spring.datasource.password=pword\r\n\r\nWhen I run:\r\n\r\n    docker build -t myApp .\r\n\r\nI get a failure as the unit tests fail because the DB container is not running.\r\n\r\nWill I need a Postgres container running to pass my tests? Or what is the best way to get around this?","title":"Docker and mvn build - cant pass unit tests as DB needs another container running?","body":"<p>I have a standard spring boot application with this docker file:</p>\n<pre><code>FROM maven:latest AS maven\n\nWORKDIR /usr/src/app\nCOPY . /usr/src/app\n# Compile and package the application to an executable JAR\nRUN mvn package\n\nFROM amazoncorretto:17-alpine-jdk\n\nARG JAR_FILE=app.jar\n\nWORKDIR /opt/app\n\n# Copy the jar from the maven stage to the /opt/app directory of the current stage.\nCOPY --from=maven /usr/src/app/target/${JAR_FILE} /opt/app/\n\nEXPOSE 8080\n\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\n</code></pre>\n<p>My <code>application.properties</code> file has the connection spring to my postgres db running in a docker container:</p>\n<pre><code># datasource\nspring.datasource.url=jdbc:postgresql://db:5432/myApp?currentSchema=gpclinic&amp;createDatabaseIfNotExist=true\nspring.datasource.username=uname\nspring.datasource.password=pword\n</code></pre>\n<p>When I run:</p>\n<pre><code>docker build -t myApp .\n</code></pre>\n<p>I get a failure as the unit tests fail because the DB container is not running.</p>\n<p>Will I need a Postgres container running to pass my tests? Or what is the best way to get around this?</p>\n"},{"tags":["java","android","codeql"],"comments":[{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1680286327,"post_id":75853580,"comment_id":133878466,"body_markdown":"It would probably be more interesting here who is calling `getObjAsFile`, respectively the call path CodeQL reported from the user input (or at least what it considered user input) to the `getObjAsFile` method.","body":"It would probably be more interesting here who is calling <code>getObjAsFile</code>, respectively the call path CodeQL reported from the user input (or at least what it considered user input) to the <code>getObjAsFile</code> method."}],"owner":{"account_id":15849662,"reputation":55,"user_id":11439964,"display_name":"keroth"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":563,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679906701,"creation_date":1679905551,"question_id":75853580,"body_markdown":"I am getting a uncontrolled data used in path expression error in codeql for the following code block:\r\n\r\n    public static File getObjAsFile(LibraryObject object, LibraryObjectType objectType, boolean encrypt, File tempFile) { // Step 1\r\n\t...\r\n    try {\r\n\r\n\t    if (encrypt) {\r\n\t        ...\r\n\t    } else {\r\n\t        try (FileOutputStream outputStream = new FileOutputStream(tempFile)) {\t// Step 2\r\n\t            byte[] outputBytes = serializedJson.getBytes(StandardCharsets.UTF_8);\r\n\t            outputStream.write(outputBytes);\r\n\t        }\r\n\t    }\r\n    return tempFile;\r\n\t} catch (Exception e) {\r\n      LOG.e(&quot;Unable to create the library object export file {}&quot;, e);\r\n\t}}\r\n\r\nI am getting &quot;This path depends on user provided value&quot; at steps 1 and 2. Not sure how to fix this issue.","title":"Uncontrolled data used in path expression","body":"<p>I am getting a uncontrolled data used in path expression error in codeql for the following code block:</p>\n<pre><code>public static File getObjAsFile(LibraryObject object, LibraryObjectType objectType, boolean encrypt, File tempFile) { // Step 1\n...\ntry {\n\n    if (encrypt) {\n        ...\n    } else {\n        try (FileOutputStream outputStream = new FileOutputStream(tempFile)) {  // Step 2\n            byte[] outputBytes = serializedJson.getBytes(StandardCharsets.UTF_8);\n            outputStream.write(outputBytes);\n        }\n    }\nreturn tempFile;\n} catch (Exception e) {\n  LOG.e(&quot;Unable to create the library object export file {}&quot;, e);\n}}\n</code></pre>\n<p>I am getting &quot;This path depends on user provided value&quot; at steps 1 and 2. Not sure how to fix this issue.</p>\n"},{"tags":["java","hibernate","rollback"],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679906640,"creation_date":1679906640,"answer_id":75853732,"question_id":75853490,"body_markdown":"If you started a transaction, you must end that transaction, either with a commit or a rollback. Even if you executed a single statement, and even if that single statement failed. In fact, if you start a transaction and don&#39;t do anything in that transaction, you need to commit or roll back.\r\n\r\nFailure to end a transactions could lead to resource leaks and other concurrency issues (though exact effects depend on the underlying database system and driver).","title":"Should a &quot;catch&quot; block and rollback() inside it be always included for all transactions?","body":"<p>If you started a transaction, you must end that transaction, either with a commit or a rollback. Even if you executed a single statement, and even if that single statement failed. In fact, if you start a transaction and don't do anything in that transaction, you need to commit or roll back.</p>\n<p>Failure to end a transactions could lead to resource leaks and other concurrency issues (though exact effects depend on the underlying database system and driver).</p>\n"}],"owner":{"account_id":28135175,"reputation":1,"user_id":21499054,"display_name":"Serji0"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679906640,"creation_date":1679904953,"question_id":75853490,"body_markdown":"Well, I saw the the following code on jboss.org\r\nhttps://docs.jboss.org/hibernate/orm/5.0/javadocs/org/hibernate/Session.html\r\n\r\nA typical transaction should use the following idiom:\r\n\r\n```\r\nSession sess = factory.openSession();\r\n Transaction tx;\r\n try {\r\n     tx = sess.beginTransaction();\r\n     //do some work\r\n     ...\r\n     tx.commit();\r\n }\r\n catch (Exception e) {\r\n     if (tx!=null) tx.rollback();\r\n     throw e;\r\n }\r\n finally {\r\n     sess.close();\r\n }\r\n```\r\nShould the rollback statement be included if &quot;my work&quot; was just reading from the db (e.g. something like users = session.createQuery(&quot;from User&quot;).getResultList();) or can I just omit the &quot;catch&quot; code?\r\nThe same question if I&#39;m changing something in the db, like &quot;session.delete(session.get(User.class, id))&quot;?\r\n\r\nIn my opinion, if there is an exception during the operation, the update will not be done. And since it&#39;s only one operation, there will be nothing to rollback. Should rollback() be included in the code in this case? What sense of it if it was just one operation?\r\n\r\nI tried to find some explanations on when rollback() is really needed on the web and docs but unfortunately didn&#39;t succeed. I personally suppose it&#39;s required only when a transaction includes two or more update statements inside and they all need to done or all need to be rolled back.","title":"Should a &quot;catch&quot; block and rollback() inside it be always included for all transactions?","body":"<p>Well, I saw the the following code on jboss.org\n<a href=\"https://docs.jboss.org/hibernate/orm/5.0/javadocs/org/hibernate/Session.html\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/5.0/javadocs/org/hibernate/Session.html</a></p>\n<p>A typical transaction should use the following idiom:</p>\n<pre><code>Session sess = factory.openSession();\n Transaction tx;\n try {\n     tx = sess.beginTransaction();\n     //do some work\n     ...\n     tx.commit();\n }\n catch (Exception e) {\n     if (tx!=null) tx.rollback();\n     throw e;\n }\n finally {\n     sess.close();\n }\n</code></pre>\n<p>Should the rollback statement be included if &quot;my work&quot; was just reading from the db (e.g. something like users = session.createQuery(&quot;from User&quot;).getResultList();) or can I just omit the &quot;catch&quot; code?\nThe same question if I'm changing something in the db, like &quot;session.delete(session.get(User.class, id))&quot;?</p>\n<p>In my opinion, if there is an exception during the operation, the update will not be done. And since it's only one operation, there will be nothing to rollback. Should rollback() be included in the code in this case? What sense of it if it was just one operation?</p>\n<p>I tried to find some explanations on when rollback() is really needed on the web and docs but unfortunately didn't succeed. I personally suppose it's required only when a transaction includes two or more update statements inside and they all need to done or all need to be rolled back.</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1679741426,"post_id":75841110,"comment_id":133777515,"body_markdown":"There seems to be something wrong with your project settings, with the configuration of the installed JREs, or your Java installation: the system library or a part of it seems to be added as dependency twice. Please show what you have in _Project &gt; Properties: Java Build Path_, tab _Libraries_ (search for nodes with names containing `jrt`) and what you have in the preferences _Java &gt; Installed JREs_. An uncropped screenshot of the _Package Explorer_ showing the project structure and the dependencies might be helpful as well.","body":"There seems to be something wrong with your project settings, with the configuration of the installed JREs, or your Java installation: the system library or a part of it seems to be added as dependency twice. Please show what you have in <i>Project &gt; Properties: Java Build Path</i>, tab <i>Libraries</i> (search for nodes with names containing <code>jrt</code>) and what you have in the preferences <i>Java &gt; Installed JREs</i>. An uncropped screenshot of the <i>Package Explorer</i> showing the project structure and the dependencies might be helpful as well."},{"owner":{"account_id":19481778,"reputation":1,"user_id":14251920,"display_name":"user14251920"},"score":0,"creation_date":1679977445,"post_id":75841110,"comment_id":133813399,"body_markdown":"Thank you for the comment.\nCould you check if this screenshot below is the thing that you were mentioning?\nhttp://imepic.jp/20230328/481340","body":"Thank you for the comment. Could you check if this screenshot below is the thing that you were mentioning? <a href=\"http://imepic.jp/20230328/481340\" rel=\"nofollow noreferrer\">imepic.jp/20230328/481340</a>"}],"owner":{"account_id":19481778,"reputation":1,"user_id":14251920,"display_name":"user14251920"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":186,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679906616,"creation_date":1679740647,"question_id":75841110,"body_markdown":"I made the code below, but when I tried to run &quot;ClassSample&quot;, error written below appeared.\r\nHow can I solve this error?\r\n\r\n&gt; Error occurred during initialization of boot layer\r\njava.lang.LayerInstantiationException: Package jdk.internal.jimage.decompressor in both module jrt.fs and module java.base\r\n\r\nAlso, this is the image of my package explorer.\r\n\r\n![enter image description here](https://i.stack.imgur.com/Fg6HB.png)\r\n\r\n``` Java\r\npackage Java_Practice.chapter3;\r\n\r\npublic class ClassSample {\r\n\t\r\n    public static void main(String[] args) {\r\n    \t\r\n        Cat taro = new Cat(&quot;太郎&quot;, 3);\r\n        Cat mike = new Cat(&quot;ミケ&quot;, 5);\r\n        Cat tama = new Cat(&quot;タマ&quot;, 4);\r\n \r\n        Cat[] cats = {taro, mike, tama};\r\n \r\n        for(Cat cat : cats) {\r\n            cat.shout();\r\n            cat.introduce();\r\n        }\r\n\r\n        System.out.println(&quot;今までに作成したCatインスタンスの数: &quot; + Cat.count);\r\n \r\n    }\r\n    \r\n}\r\n\r\n```\r\n\r\n``` Java\r\npackage Java_Practice.chapter3;\r\n\r\npublic class Cat {\r\n\r\n    public static int count = 0;\r\n \r\n    public String name;\r\n    public int age;\r\n \r\n    public Cat(String name, int age){ \r\n        this.name = name;\r\n        this.age = age;\r\n        Cat.count++;   \r\n    }\r\n \r\n    public void shout() {\r\n        System.out.println(&quot;にゃー!&quot;);\r\n    }\r\n \r\n    public void introduce() {\r\n        System.out.println(&quot;名前は&quot; + this.name + &quot;、&quot; + this.age + &quot;才です。&quot;);\r\n        this.shout();\r\n    }\r\n\r\n}\r\n\r\n\r\n```\r\n\r\nWhat I&#39;m expecting : \r\n\r\nrun the code without error.","title":"How to solve the error &quot;Error occurred during initialization of boot layer&quot;","body":"<p>I made the code below, but when I tried to run &quot;ClassSample&quot;, error written below appeared.\nHow can I solve this error?</p>\n<blockquote>\n<p>Error occurred during initialization of boot layer\njava.lang.LayerInstantiationException: Package jdk.internal.jimage.decompressor in both module jrt.fs and module java.base</p>\n</blockquote>\n<p>Also, this is the image of my package explorer.</p>\n<p><img src=\"https://i.stack.imgur.com/Fg6HB.png\" alt=\"enter image description here\" /></p>\n<pre><code>package Java_Practice.chapter3;\n\npublic class ClassSample {\n    \n    public static void main(String[] args) {\n        \n        Cat taro = new Cat(&quot;太郎&quot;, 3);\n        Cat mike = new Cat(&quot;ミケ&quot;, 5);\n        Cat tama = new Cat(&quot;タマ&quot;, 4);\n \n        Cat[] cats = {taro, mike, tama};\n \n        for(Cat cat : cats) {\n            cat.shout();\n            cat.introduce();\n        }\n\n        System.out.println(&quot;今までに作成したCatインスタンスの数: &quot; + Cat.count);\n \n    }\n    \n}\n\n</code></pre>\n<pre><code>package Java_Practice.chapter3;\n\npublic class Cat {\n\n    public static int count = 0;\n \n    public String name;\n    public int age;\n \n    public Cat(String name, int age){ \n        this.name = name;\n        this.age = age;\n        Cat.count++;   \n    }\n \n    public void shout() {\n        System.out.println(&quot;にゃー!&quot;);\n    }\n \n    public void introduce() {\n        System.out.println(&quot;名前は&quot; + this.name + &quot;、&quot; + this.age + &quot;才です。&quot;);\n        this.shout();\n    }\n\n}\n\n\n</code></pre>\n<p>What I'm expecting :</p>\n<p>run the code without error.</p>\n"},{"tags":["java","floating-point","double"],"comments":[{"owner":{"account_id":26825504,"reputation":3,"user_id":20414189,"display_name":"Prerak Jain"},"score":0,"creation_date":1679797703,"post_id":75845544,"comment_id":133784521,"body_markdown":"I played around with the code and found out that the the numbers before the decimal only get formatted if im not crossing the limit on the other side of the decimal.","body":"I played around with the code and found out that the the numbers before the decimal only get formatted if im not crossing the limit on the other side of the decimal."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1679798551,"post_id":75845544,"comment_id":133784571,"body_markdown":"The first number refers to the entire size of the number, not the number of digits before the decimal place","body":"The first number refers to the entire size of the number, not the number of digits before the decimal place"},{"owner":{"account_id":3710720,"reputation":25419,"user_id":3088138,"display_name":"Lutz Lehmann"},"score":0,"creation_date":1679826145,"post_id":75845544,"comment_id":133786946,"body_markdown":"The first entry is the minimum length of the string produced for the given object. The second number is format specific, it can be the digits after the dot or the total number of valid digits. // You might want to try to change the format specifier to `lf`, it looks like the double is converted first to single to conform to the given specifier `f`.","body":"The first entry is the minimum length of the string produced for the given object. The second number is format specific, it can be the digits after the dot or the total number of valid digits. // You might want to try to change the format specifier to <code>lf</code>, it looks like the double is converted first to single to conform to the given specifier <code>f</code>."}],"owner":{"account_id":26825504,"reputation":3,"user_id":20414189,"display_name":"Prerak Jain"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679906590,"creation_date":1679796913,"question_id":75845544,"body_markdown":"this is what my textbook says\r\n\r\n![1](https://i.stack.imgur.com/I2gBA.png)\r\n\r\n[this is my code]\r\n```\r\npackage streams;\r\n\r\npublic class streams {\r\n    public static void main(String[] args) {\r\n        Double myDouble = 12345.12345;\r\n        System.out.printf(&quot;%10.10f ok %n&quot;, myDouble);\r\n        System.out.printf(&quot;%-10.10f ok %n&quot;, myDouble);\r\n        System.out.printf(&quot;%010.10f ok %n&quot;, myDouble);\r\n    }\r\n}\r\n```\r\n[this is my output]\r\n\r\n```\r\n12345.1230468750 ok \r\n12345.1230468750 ok \r\n12345.1230468750 ok \r\n\r\n\r\n```\r\n\r\n\r\nMy question is, why are the numbers before the decimal point not formatted?\r\n\r\n\r\nI expected that the first print would output:\r\n\r\n\r\n     12345.1234500000 ok\r\n\r\nsecond print:\r\n\r\n\r\n12345.1234500000      ok\r\n\r\nthird one:\r\n\r\n\r\n0000012345.1234500000 ok\r\n","title":"My java zybook&#39;s code isnt working for floating point formatting","body":"<p>this is what my textbook says</p>\n<p><img src=\"https://i.stack.imgur.com/I2gBA.png\" alt=\"1\" /></p>\n<p>[this is my code]</p>\n<pre><code>package streams;\n\npublic class streams {\n    public static void main(String[] args) {\n        Double myDouble = 12345.12345;\n        System.out.printf(&quot;%10.10f ok %n&quot;, myDouble);\n        System.out.printf(&quot;%-10.10f ok %n&quot;, myDouble);\n        System.out.printf(&quot;%010.10f ok %n&quot;, myDouble);\n    }\n}\n</code></pre>\n<p>[this is my output]</p>\n<pre><code>12345.1230468750 ok \n12345.1230468750 ok \n12345.1230468750 ok \n\n\n</code></pre>\n<p>My question is, why are the numbers before the decimal point not formatted?</p>\n<p>I expected that the first print would output:</p>\n<pre><code> 12345.1234500000 ok\n</code></pre>\n<p>second print:</p>\n<p>12345.1234500000      ok</p>\n<p>third one:</p>\n<p>0000012345.1234500000 ok</p>\n"},{"tags":["java","shell","batch-file","informatica","informatica-powercenter"],"answers":[{"tags":[],"owner":{"account_id":1890039,"reputation":3445,"user_id":2626813,"display_name":"Samik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475569580,"creation_date":1475569580,"answer_id":39847541,"question_id":39845003,"body_markdown":"You have to login to the informatica server using ssh and run the export. After the export file is created, you can do FTP to download the file to your local machine.","title":"Exporting Mappings from Informatica server","body":"<p>You have to login to the informatica server using ssh and run the export. After the export file is created, you can do FTP to download the file to your local machine.</p>\n"},{"tags":[],"owner":{"account_id":3375940,"reputation":3165,"user_id":2834065,"accept_rate":50,"display_name":"Maciejg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475628157,"creation_date":1475628157,"answer_id":39863798,"question_id":39845003,"body_markdown":"All you need is a properly configured client machine. Try installing the client, run pmrep and get back with the details if you&#39;d be getting any errors and would need some help.","title":"Exporting Mappings from Informatica server","body":"<p>All you need is a properly configured client machine. Try installing the client, run pmrep and get back with the details if you'd be getting any errors and would need some help.</p>\n"},{"tags":[],"owner":{"account_id":5653877,"reputation":4810,"user_id":4473615,"accept_rate":20,"display_name":"Jim Macaulay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679906465,"creation_date":1475669830,"answer_id":39873732,"question_id":39845003,"body_markdown":"You can have a script once the mapping is imported in the server, move or copy the mapping in to your local path. The script should include the URL and password of the local machine.\r\n","title":"Exporting Mappings from Informatica server","body":"<p>You can have a script once the mapping is imported in the server, move or copy the mapping in to your local path. The script should include the URL and password of the local machine.</p>\n"}],"owner":{"account_id":9122522,"reputation":21,"user_id":6787490,"accept_rate":29,"display_name":"Kamal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1679906465,"creation_date":1475560222,"question_id":39845003,"body_markdown":"My Requirement is to export mappings from informatica Server.i am using pmrep command for the same .Currently  i am running pmrep command on the machine on which informatica server is Installed and its exporting successfully on the same machine after running command.But My req is to run the command remotely from some other machine and want to store mappings on my local system not on the machine on which Informatica server is installed.Is there any possible way to do that. or some other command which do the needfull. Hope my Requirement is clear to all.Can anybody help me out  with some solution..\r\n\r\nThanks.","title":"Exporting Mappings from Informatica server","body":"<p>My Requirement is to export mappings from informatica Server.i am using pmrep command for the same .Currently  i am running pmrep command on the machine on which informatica server is Installed and its exporting successfully on the same machine after running command.But My req is to run the command remotely from some other machine and want to store mappings on my local system not on the machine on which Informatica server is installed.Is there any possible way to do that. or some other command which do the needfull. Hope my Requirement is clear to all.Can anybody help me out  with some solution..</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","javafx-2","java-7","java-8","javafx-8"],"comments":[{"owner":{"account_id":927305,"reputation":34168,"user_id":1054140,"accept_rate":100,"display_name":"Sergey Grinev"},"score":0,"creation_date":1397644850,"post_id":23105433,"comment_id":35320652,"body_markdown":"can you provide code sample?","body":"can you provide code sample?"},{"owner":{"account_id":4033068,"reputation":273,"user_id":3318481,"display_name":"Christopher_Daniel"},"score":0,"creation_date":1397731274,"post_id":23105433,"comment_id":35363888,"body_markdown":"Please refer this link. This is working in JDK 7 but not in jdk 8                                                     http://stackoverflow.com/questions/8434787/how-to-create-custom-components-in-javafx-2-0-using-fxml....Could you please help?","body":"Please refer this link. This is working in JDK 7 but not in jdk 8                                                     <a href=\"http://stackoverflow.com/questions/8434787/how-to-create-custom-components-in-javafx-2-0-using-fxml....Could\" title=\"how to create custom components in javafx 2 0 using fxml....Could\">stackoverflow.com/questions/8434787/&hellip;</a> you please help?"}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":40,"is_accepted":true,"score":40,"last_activity_date":1679906427,"creation_date":1397650316,"answer_id":23109125,"question_id":23105433,"body_markdown":"It sounds like you are trying to inject a `TextField` into a static field. Something like\r\n\r\n    @FXML\r\n    private static TextField myTextField ;\r\n\r\nThis apparently worked in JavaFX 2.2. It doesn&#39;t work in JavaFX 8. Since no official documentation ever supported this use, it&#39;s doesn&#39;t really violate backward compatibility, though in fairness the documentation on exactly what the `FXMLLoader` does is pretty woeful.\r\n\r\nIt doesn&#39;t really make much sense to make `@FXML`-injected fields static. When you load an FXML file, it creates new objects for each of the elements in the FXML file. A new controller instance is associated with each call to `FXMLLoader.load(...)` and the fields in that controller *instance* are injected with the corresponding objects created for the FXML elements. So the injected fields are necessarily specific to the controller instance. If you had a static injected fields in the controller, and you loaded the same FXML file twice and displayed it twice in the UI, then you would have no way of referencing both sets of controls.\r\n\r\n----\r\n\r\n`@FXML` marked static methods referenced from FXML also will not work.\r\n\r\nFor instance, with:\r\n\r\n    @FXML\r\n    private static void changeUser(ActionEvent e) {\r\n        // System.out.println(&quot;test&quot;);\r\n    }\r\n\r\nAnd:\r\n\r\n    &lt;Button text=&quot;Change User&quot; onAction=&quot;#changeUser&quot;/&gt;\r\n\r\nThis will fail with:\r\n\r\n    javafx.fxml.LoadException: Error resolving onAction=&#39;#changeUser&#39;, either the event handler is not in the Namespace or there is an error in the script.\r\n\r\nTo fix this, just remove the static modifier from the method specifcation.\r\n\r\n----\r\n\r\n**Update**: Response to question in comments\r\n\r\nIn particular, don&#39;t use static fields just to enable them to be accessible from outside the class. A static field has a single value belonging to the class, instead of a value for each instance of the class, and the decision to make fields static should only be made if that makes sense. In other words, `static` defines *scope*, not *accessibility*. To allow access to instance data, you just have to have a reference to the instance. The `FXMLLoader` has a `getController()` method that allows you to retrieve a reference to the controller. \r\n\r\nA related point: it&#39;s also not a good idea to expose the UI controls from the controller. You should instead expose the data. For example, instead of defining a `getTextField()` method in the controller, instead define a `textProperty()` method that returns a `StringProperty` representing the contents of the `TextField`. The reason for this is that when your boss comes to the office and tells you he wants the `TextField` to be replaced by a `TextArea`, or a `ComboBox&lt;String&gt;`, or some other control, then it&#39;s going to be a lot harder if classes outside of the controller are using your `TextField`. The structure of the data represented by your controller is much less likely to change than the implementation of how that data is presented to the user.\r\n\r\nFor some examples \r\n\r\n - https://stackoverflow.com/questions/32342864/applying-mvc-with-javafx\r\n - https://stackoverflow.com/questions/14187963/passing-parameters-javafx-fxml\r\n - https://stackoverflow.com/questions/23118330/javafx-data-mangement/ \r\n - https://stackoverflow.com/questions/23048500/access-fields-from-another-controller-in-javafx/\r\n - https://github.com/james-d/LeastCommonMultipleCalculator\r\n - https://github.com/james-d/Nested-Controller-Example\r\n - https://github.com/james-d/Dialog-FXML-Example\r\n - https://github.com/james-d/Shared-Data-Controller","title":"javafx 8 compatibility issues - FXML static fields or methods","body":"<p>It sounds like you are trying to inject a <code>TextField</code> into a static field. Something like</p>\n<pre><code>@FXML\nprivate static TextField myTextField ;\n</code></pre>\n<p>This apparently worked in JavaFX 2.2. It doesn't work in JavaFX 8. Since no official documentation ever supported this use, it's doesn't really violate backward compatibility, though in fairness the documentation on exactly what the <code>FXMLLoader</code> does is pretty woeful.</p>\n<p>It doesn't really make much sense to make <code>@FXML</code>-injected fields static. When you load an FXML file, it creates new objects for each of the elements in the FXML file. A new controller instance is associated with each call to <code>FXMLLoader.load(...)</code> and the fields in that controller <em>instance</em> are injected with the corresponding objects created for the FXML elements. So the injected fields are necessarily specific to the controller instance. If you had a static injected fields in the controller, and you loaded the same FXML file twice and displayed it twice in the UI, then you would have no way of referencing both sets of controls.</p>\n<hr />\n<p><code>@FXML</code> marked static methods referenced from FXML also will not work.</p>\n<p>For instance, with:</p>\n<pre><code>@FXML\nprivate static void changeUser(ActionEvent e) {\n    // System.out.println(&quot;test&quot;);\n}\n</code></pre>\n<p>And:</p>\n<pre><code>&lt;Button text=&quot;Change User&quot; onAction=&quot;#changeUser&quot;/&gt;\n</code></pre>\n<p>This will fail with:</p>\n<pre><code>javafx.fxml.LoadException: Error resolving onAction='#changeUser', either the event handler is not in the Namespace or there is an error in the script.\n</code></pre>\n<p>To fix this, just remove the static modifier from the method specifcation.</p>\n<hr />\n<p><strong>Update</strong>: Response to question in comments</p>\n<p>In particular, don't use static fields just to enable them to be accessible from outside the class. A static field has a single value belonging to the class, instead of a value for each instance of the class, and the decision to make fields static should only be made if that makes sense. In other words, <code>static</code> defines <em>scope</em>, not <em>accessibility</em>. To allow access to instance data, you just have to have a reference to the instance. The <code>FXMLLoader</code> has a <code>getController()</code> method that allows you to retrieve a reference to the controller.</p>\n<p>A related point: it's also not a good idea to expose the UI controls from the controller. You should instead expose the data. For example, instead of defining a <code>getTextField()</code> method in the controller, instead define a <code>textProperty()</code> method that returns a <code>StringProperty</code> representing the contents of the <code>TextField</code>. The reason for this is that when your boss comes to the office and tells you he wants the <code>TextField</code> to be replaced by a <code>TextArea</code>, or a <code>ComboBox&lt;String&gt;</code>, or some other control, then it's going to be a lot harder if classes outside of the controller are using your <code>TextField</code>. The structure of the data represented by your controller is much less likely to change than the implementation of how that data is presented to the user.</p>\n<p>For some examples</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/32342864/applying-mvc-with-javafx\">Applying MVC With JavaFx</a></li>\n<li><a href=\"https://stackoverflow.com/questions/14187963/passing-parameters-javafx-fxml\">Passing Parameters JavaFX FXML</a></li>\n<li><a href=\"https://stackoverflow.com/questions/23118330/javafx-data-mangement/\">JavaFX Data Mangement</a></li>\n<li><a href=\"https://stackoverflow.com/questions/23048500/access-fields-from-another-controller-in-javafx/\">Access fields from another Controller in JavaFX</a></li>\n<li><a href=\"https://github.com/james-d/LeastCommonMultipleCalculator\" rel=\"nofollow noreferrer\">https://github.com/james-d/LeastCommonMultipleCalculator</a></li>\n<li><a href=\"https://github.com/james-d/Nested-Controller-Example\" rel=\"nofollow noreferrer\">https://github.com/james-d/Nested-Controller-Example</a></li>\n<li><a href=\"https://github.com/james-d/Dialog-FXML-Example\" rel=\"nofollow noreferrer\">https://github.com/james-d/Dialog-FXML-Example</a></li>\n<li><a href=\"https://github.com/james-d/Shared-Data-Controller\" rel=\"nofollow noreferrer\">https://github.com/james-d/Shared-Data-Controller</a></li>\n</ul>\n"}],"owner":{"account_id":4033068,"reputation":273,"user_id":3318481,"display_name":"Christopher_Daniel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11714,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":23109125,"answer_count":1,"score":21,"last_activity_date":1679906445,"creation_date":1397640881,"question_id":23105433,"body_markdown":"I have designed a javafx application which works fine in jdk 7. When I try to run it in java 8 I am getting the below exceptions:\r\n\r\n    javafx.fxml.LoadException: \r\n    at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2617)\r\n    \tat javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2595)\r\n    \tat javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441)\r\n    \tat javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3230)\r\n    \tat javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3191)\r\n    \tat javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3164)\r\n    \tat javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3140)\r\n    \tat javafx.fxml.FXMLLoader.load(FXMLLoader.java:3132)\r\n    \r\n    \r\n    Exception in thread &quot;JavaFX Application Thread&quot; java.lang.NullPointerException: Root cannot be null\r\n    \tat javafx.scene.Scene.&lt;init&gt;(Scene.java:364)\r\n    \tat javafx.scene.Scene.&lt;init&gt;(Scene.java:232)\r\n            at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\r\n    \tat com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)\r\n    \tat com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\r\n    \tat com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\r\n    \tat com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\r\n    \tat com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\r\n    \tat javafx.event.Event.fireEvent(Event.java:204)\r\n    \tat javafx.concurrent.EventHelper.fireEvent(EventHelper.java:219)\r\n    \tat javafx.concurrent.Task.fireEvent(Task.java:1357)\r\n    \tat javafx.concurrent.Task.setState(Task.java:720)\r\n    \tat javafx.concurrent.Task$TaskCallable$2.run(Task.java:1438)\r\n    \tat com.sun.javafx.application.PlatformImpl$6$1.run(PlatformImpl.java:301)\r\n    \tat com.sun.javafx.application.PlatformImpl$6$1.run(PlatformImpl.java:298)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat com.sun.javafx.application.PlatformImpl$6.run(PlatformImpl.java:298)\r\n    \tat com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\r\n    \tat com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n    \tat com.sun.glass.ui.win.WinApplication.access$300(WinApplication.java:39)\r\n    \tat com.sun.glass.ui.win.WinApplication$4$1.run(WinApplication.java:112)\r\n    \tat java.lang.Thread.run(Thread.java:744)\r\n\r\nI found out the reason for this is in the initialize method of the controller class I am not able to use the inbuilt methods in any static component. (For example: staticMyTextField.setText() is causing the problem in java 8 but not in java 7). I am not able to find out anything documented regarding this in the javafx guides. Can someone please provide some ideas on why this is causing an issue in Java 8? And also share documents related to this if any.","title":"javafx 8 compatibility issues - FXML static fields or methods","body":"<p>I have designed a javafx application which works fine in jdk 7. When I try to run it in java 8 I am getting the below exceptions:</p>\n\n<pre><code>javafx.fxml.LoadException: \nat javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2617)\n    at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2595)\n    at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441)\n    at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3230)\n    at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3191)\n    at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3164)\n    at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3140)\n    at javafx.fxml.FXMLLoader.load(FXMLLoader.java:3132)\n\n\nException in thread \"JavaFX Application Thread\" java.lang.NullPointerException: Root cannot be null\n    at javafx.scene.Scene.&lt;init&gt;(Scene.java:364)\n    at javafx.scene.Scene.&lt;init&gt;(Scene.java:232)\n        at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\n    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)\n    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\n    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\n    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\n    at javafx.event.Event.fireEvent(Event.java:204)\n    at javafx.concurrent.EventHelper.fireEvent(EventHelper.java:219)\n    at javafx.concurrent.Task.fireEvent(Task.java:1357)\n    at javafx.concurrent.Task.setState(Task.java:720)\n    at javafx.concurrent.Task$TaskCallable$2.run(Task.java:1438)\n    at com.sun.javafx.application.PlatformImpl$6$1.run(PlatformImpl.java:301)\n    at com.sun.javafx.application.PlatformImpl$6$1.run(PlatformImpl.java:298)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at com.sun.javafx.application.PlatformImpl$6.run(PlatformImpl.java:298)\n    at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\n    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at com.sun.glass.ui.win.WinApplication.access$300(WinApplication.java:39)\n    at com.sun.glass.ui.win.WinApplication$4$1.run(WinApplication.java:112)\n    at java.lang.Thread.run(Thread.java:744)\n</code></pre>\n\n<p>I found out the reason for this is in the initialize method of the controller class I am not able to use the inbuilt methods in any static component. (For example: staticMyTextField.setText() is causing the problem in java 8 but not in java 7). I am not able to find out anything documented regarding this in the javafx guides. Can someone please provide some ideas on why this is causing an issue in Java 8? And also share documents related to this if any.</p>\n"},{"tags":["java","postgresql","hibernate","jpa"],"owner":{"account_id":28135698,"reputation":1,"user_id":21499505,"display_name":"szy bka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679906079,"creation_date":1679906033,"question_id":75853641,"body_markdown":"I&#39;m using Hibernate&#39;s JPQL statement with both DISTINCT and ORDER BY expressions on different columns. Before executing the statement I&#39;m setting HINT_PASS_DISTINCT_THROUGH to false, which shouldn&#39;t pass the first DISTINCT into SQL generated from JPQL. \r\n\r\nAnd it works properly, but only on the development environment. On the production environment I&#39;m getting a SQLGrammarException. It seems as if HINT_PASS_DISTINCT_THROUGH isn&#39;t handled by Hibernate and it passes through the first DISTINCT into SQL.\r\n\r\nAny idea what may cause this exception?\r\n\r\nI don&#39;t have an access to the production environment Hibernate logs, so I can&#39;t confirm that theory, but I&#39;ve tried to reproduce the situation locally - I&#39;ve commented out passing the hint statement, in the logs I saw that generated SQL has this DISTINCT expression and the database returned the same SQLGrammarException.\r\n\r\nThe only difference that I can see is that on dev env we are using Postgres 13.4, on prod env 13.7, but I don&#39;t think the reason behind this exception lies in the version itself.","title":"HINT_PASS_DISTINCT_THROUGH = false with DISTINCT and ORDER BY returns SQLGrammarException in Postgresql","body":"<p>I'm using Hibernate's JPQL statement with both DISTINCT and ORDER BY expressions on different columns. Before executing the statement I'm setting HINT_PASS_DISTINCT_THROUGH to false, which shouldn't pass the first DISTINCT into SQL generated from JPQL.</p>\n<p>And it works properly, but only on the development environment. On the production environment I'm getting a SQLGrammarException. It seems as if HINT_PASS_DISTINCT_THROUGH isn't handled by Hibernate and it passes through the first DISTINCT into SQL.</p>\n<p>Any idea what may cause this exception?</p>\n<p>I don't have an access to the production environment Hibernate logs, so I can't confirm that theory, but I've tried to reproduce the situation locally - I've commented out passing the hint statement, in the logs I saw that generated SQL has this DISTINCT expression and the database returned the same SQLGrammarException.</p>\n<p>The only difference that I can see is that on dev env we are using Postgres 13.4, on prod env 13.7, but I don't think the reason behind this exception lies in the version itself.</p>\n"},{"tags":["java","mongodb","spring-boot","minio"],"owner":{"account_id":4146531,"reputation":451,"user_id":3400076,"display_name":"xxestter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679906006,"creation_date":1679308558,"question_id":75789237,"body_markdown":"I have a Java Spring Boot application and have an endpoint which will POST file and json data, the Java code as below. I would like to do Load Testing on the Java code, so I wrote another application, which will repeatedly call the Java endpoint for 20 times or more. \r\n\r\nWhen call 20 times, the MongoDB will throw error of \r\nCommand failed with error 112 (WriteConflict): &#39;WriteConflict error: this operation conflicted with another operation. Please retry your operation or multi-document transaction.&#39;\r\n\r\nCan someone help?\r\n\r\nUPDATE: If I remove the mongoTransactionManager() in MongoConfig, it works fine. or if I remove the @JaversSpringDataAuditable in the TestRepo\r\n\r\n\r\n    @Configuration\r\n    public class MongoConfig{\r\n    \t@Bean\r\n    \tpublic MongoTransactionManager mongoTransactionManager(MongoDatabaseFactory factory){\r\n    \t\treturn new MongoTransactionManager(factory);\r\n    \t}\r\n    }\r\n\r\n    @JaversSpringDataAuditable\r\n    @Repository\r\n    public interface TestRepo extends MongoRepository&lt;TestClass, String&gt;{\r\n    }\r\n    \r\n    @Service\r\n    public class TestService{\r\n    \tpublic MinioRepo minioRepo;\r\n    \tpublic TestRepo testRepo; \r\n    \t\r\n    \t@Transactional\r\n    \tpublic void addTestClass(TestClass testClass, MultipartFile file){\r\n    \t\tminioRepo.putObject(bucket, file.getInputStream); //method to insert/upload file to MinIO\r\n    \t\t//after insert into MinIO, there is a listener that can delete the object in MinIO if there is any error/exception in this method. \r\n    \t\t\r\n    \t\ttestRepo.save(testClass);\r\n    \t}\r\n    }\r\n    \r\n    \r\n    @Controller\r\n    public class TestController{\r\n    \tpublic TestService testService;\r\n    \t\r\n    \t@PostMapping \r\n    \tpublic void test(@RequestBody String data, MultipartFile file){\r\n    \t\tTestClass testClass = ....convert data json into TestClass object...;\r\n    \t\ttestService.addTestClass(testClass, file);\r\n    \t}\r\n    }\r\n\r\n\r\n\r\n\r\nError message in Spring boot\r\n\r\n&gt; com.mongodb.MongoCommandException: Command failed with error 112\r\n&gt; (WriteConflict): &#39;WriteConflict error: this operation conflicted with\r\n&gt; another operation. Please retry your operation or multi-document\r\n&gt; transaction.&#39; on server localhost:27017. The full response is\r\n&gt; {&quot;errorLabels&quot;: [&quot;TransientTransactionError&quot;], &quot;operationTime&quot;:\r\n&gt; {&quot;$timestamp&quot;: {&quot;t&quot;: 1679905729, &quot;i&quot;: 6}}, &quot;ok&quot;: 0.0, &quot;errmsg&quot;:\r\n&gt; &quot;WriteConflict error: this operation conflicted with another\r\n&gt; operation. Please retry your operation or multi-document\r\n&gt; transaction.&quot;, &quot;code&quot;: 112, &quot;codeName&quot;: &quot;WriteConflict&quot;,\r\n&gt; &quot;$clusterTime&quot;: {&quot;clusterTime&quot;: {&quot;$timestamp&quot;: {&quot;t&quot;: 1679905730, &quot;i&quot;:\r\n&gt; 4}}, &quot;signature&quot;: {&quot;hash&quot;: {&quot;$binary&quot;: {&quot;base64&quot;:\r\n&gt; &quot;AAAAAAAAAAAAAAAAAAAAAAAAAAA=&quot;, &quot;subType&quot;: &quot;00&quot;}}, &quot;keyId&quot;: 0}}} \tat\r\n&gt; com.mongodb.internal.connection.ProtocolHelper.getCommandFailureException(ProtocolHelper.java:198)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:418)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:342)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.connection.UsageTrackingInternalConnection.sendAndReceive(UsageTrackingInternalConnection.java:116)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.connection.DefaultConnectionPool$PooledConnection.sendAndReceive(DefaultConnectionPool.java:647)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.connection.CommandProtocolImpl.execute(CommandProtocolImpl.java:71)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.connection.DefaultServer$DefaultServerProtocolExecutor.execute(DefaultServer.java:244)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.connection.DefaultServerConnection.executeProtocol(DefaultServerConnection.java:227)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.connection.DefaultServerConnection.command(DefaultServerConnection.java:127)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.connection.DefaultServerConnection.command(DefaultServerConnection.java:117)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.connection.DefaultServer$OperationCountTrackingConnection.command(DefaultServer.java:348)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.operation.CommandOperationHelper.lambda$executeRetryableWrite$15(CommandOperationHelper.java:411)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.operation.OperationHelper.lambda$withSourceAndConnection$2(OperationHelper.java:564)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:589)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.operation.OperationHelper.lambda$withSourceAndConnection$3(OperationHelper.java:563)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:589)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.operation.OperationHelper.withSourceAndConnection(OperationHelper.java:562)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.operation.CommandOperationHelper.lambda$executeRetryableWrite$16(CommandOperationHelper.java:395)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.async.function.RetryingSyncSupplier.get(RetryingSyncSupplier.java:65)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.operation.CommandOperationHelper.executeRetryableWrite(CommandOperationHelper.java:423)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.operation.TransactionOperation.execute(TransactionOperation.java:70)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.operation.CommitTransactionOperation.execute(CommitTransactionOperation.java:133)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.internal.operation.CommitTransactionOperation.execute(CommitTransactionOperation.java:54)\r\n&gt; ~[mongodb-driver-core-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.execute(MongoClientDelegate.java:212)\r\n&gt; ~[mongodb-driver-sync-4.4.2.jar:na] \tat\r\n&gt; com.mongodb.client.internal.ClientSessionImpl.commitTransaction(ClientSessionImpl.java:147)\r\n&gt; ~[mongodb-driver-sync-4.4.2.jar:na] \tat\r\n&gt; org.springframework.data.mongodb.MongoTransactionManager$MongoTransactionObject.commitTransaction(MongoTransactionManager.java:469)\r\n&gt; ~[spring-data-mongodb-3.3.2.jar:3.3.2] \tat\r\n&gt; org.springframework.data.mongodb.MongoTransactionManager.doCommit(MongoTransactionManager.java:236)\r\n&gt; ~[spring-data-mongodb-3.3.2.jar:3.3.2] \tat\r\n&gt; org.springframework.data.mongodb.MongoTransactionManager.doCommit(MongoTransactionManager.java:200)\r\n&gt; ~[spring-data-mongodb-3.3.2.jar:3.3.2] \tat\r\n&gt; org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n&gt; ~[spring-tx-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n&gt; ~[spring-tx-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n&gt; ~[spring-tx-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n&gt; ~[spring-tx-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n&gt; ~[spring-tx-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n&gt; ~[spring-aop-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\r\n&gt; ~[spring-aop-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\r\n&gt; ~[spring-aop-5.3.16.jar:5.3.16] \tat\r\n&gt; com.example.service.TestService$$EnhancerBySpringCGLIB$$32b03c26.testMultipleCallsToMongoDB(&lt;generated&gt;)\r\n&gt; ~[classes/:na] \tat\r\n&gt; com.example.controller.TestController.test(TestController.java:21)\r\n&gt; ~[classes/:na] \tat\r\n&gt; java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\r\n&gt; Method) ~[na:na] \tat\r\n&gt; java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; ~[na:na] \tat\r\n&gt; java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; ~[na:na] \tat\r\n&gt; java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n&gt; \tat\r\n&gt; org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n&gt; ~[spring-web-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\r\n&gt; ~[spring-web-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n&gt; ~[spring-webmvc-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n&gt; ~[spring-webmvc-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n&gt; ~[spring-webmvc-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n&gt; ~[spring-webmvc-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\r\n&gt; ~[spring-webmvc-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n&gt; ~[spring-webmvc-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n&gt; ~[spring-webmvc-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\r\n&gt; ~[spring-webmvc-5.3.16.jar:5.3.16] \tat\r\n&gt; javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:4.0.FR] \tat\r\n&gt; org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n&gt; ~[spring-webmvc-5.3.16.jar:5.3.16] \tat\r\n&gt; javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:4.0.FR] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n&gt; ~[tomcat-embed-websocket-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n&gt; ~[spring-web-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n&gt; ~[spring-web-5.3.16.jar:5.3.16] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n&gt; ~[spring-web-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n&gt; ~[spring-web-5.3.16.jar:5.3.16] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n&gt; ~[spring-web-5.3.16.jar:5.3.16] \tat\r\n&gt; org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n&gt; ~[spring-web-5.3.16.jar:5.3.16] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n&gt; ~[tomcat-embed-core-9.0.58.jar:9.0.58] \tat\r\n&gt; java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\r\n\r\n","title":"WriteConflict issue at MongoDB when called multi time","body":"<p>I have a Java Spring Boot application and have an endpoint which will POST file and json data, the Java code as below. I would like to do Load Testing on the Java code, so I wrote another application, which will repeatedly call the Java endpoint for 20 times or more.</p>\n<p>When call 20 times, the MongoDB will throw error of\nCommand failed with error 112 (WriteConflict): 'WriteConflict error: this operation conflicted with another operation. Please retry your operation or multi-document transaction.'</p>\n<p>Can someone help?</p>\n<p>UPDATE: If I remove the mongoTransactionManager() in MongoConfig, it works fine. or if I remove the @JaversSpringDataAuditable in the TestRepo</p>\n<pre><code>@Configuration\npublic class MongoConfig{\n    @Bean\n    public MongoTransactionManager mongoTransactionManager(MongoDatabaseFactory factory){\n        return new MongoTransactionManager(factory);\n    }\n}\n\n@JaversSpringDataAuditable\n@Repository\npublic interface TestRepo extends MongoRepository&lt;TestClass, String&gt;{\n}\n\n@Service\npublic class TestService{\n    public MinioRepo minioRepo;\n    public TestRepo testRepo; \n    \n    @Transactional\n    public void addTestClass(TestClass testClass, MultipartFile file){\n        minioRepo.putObject(bucket, file.getInputStream); //method to insert/upload file to MinIO\n        //after insert into MinIO, there is a listener that can delete the object in MinIO if there is any error/exception in this method. \n        \n        testRepo.save(testClass);\n    }\n}\n\n\n@Controller\npublic class TestController{\n    public TestService testService;\n    \n    @PostMapping \n    public void test(@RequestBody String data, MultipartFile file){\n        TestClass testClass = ....convert data json into TestClass object...;\n        testService.addTestClass(testClass, file);\n    }\n}\n</code></pre>\n<p>Error message in Spring boot</p>\n<blockquote>\n<p>com.mongodb.MongoCommandException: Command failed with error 112\n(WriteConflict): 'WriteConflict error: this operation conflicted with\nanother operation. Please retry your operation or multi-document\ntransaction.' on server localhost:27017. The full response is\n{&quot;errorLabels&quot;: [&quot;TransientTransactionError&quot;], &quot;operationTime&quot;:\n{&quot;$timestamp&quot;: {&quot;t&quot;: 1679905729, &quot;i&quot;: 6}}, &quot;ok&quot;: 0.0, &quot;errmsg&quot;:\n&quot;WriteConflict error: this operation conflicted with another\noperation. Please retry your operation or multi-document\ntransaction.&quot;, &quot;code&quot;: 112, &quot;codeName&quot;: &quot;WriteConflict&quot;,\n&quot;$clusterTime&quot;: {&quot;clusterTime&quot;: {&quot;$timestamp&quot;: {&quot;t&quot;: 1679905730, &quot;i&quot;:\n4}}, &quot;signature&quot;: {&quot;hash&quot;: {&quot;$binary&quot;: {&quot;base64&quot;:\n&quot;AAAAAAAAAAAAAAAAAAAAAAAAAAA=&quot;, &quot;subType&quot;: &quot;00&quot;}}, &quot;keyId&quot;: 0}}}  at\ncom.mongodb.internal.connection.ProtocolHelper.getCommandFailureException(ProtocolHelper.java:198)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:418)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:342)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.connection.UsageTrackingInternalConnection.sendAndReceive(UsageTrackingInternalConnection.java:116)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.connection.DefaultConnectionPool$PooledConnection.sendAndReceive(DefaultConnectionPool.java:647)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.connection.CommandProtocolImpl.execute(CommandProtocolImpl.java:71)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.connection.DefaultServer$DefaultServerProtocolExecutor.execute(DefaultServer.java:244)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.connection.DefaultServerConnection.executeProtocol(DefaultServerConnection.java:227)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.connection.DefaultServerConnection.command(DefaultServerConnection.java:127)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.connection.DefaultServerConnection.command(DefaultServerConnection.java:117)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.connection.DefaultServer$OperationCountTrackingConnection.command(DefaultServer.java:348)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.operation.CommandOperationHelper.lambda$executeRetryableWrite$15(CommandOperationHelper.java:411)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.operation.OperationHelper.lambda$withSourceAndConnection$2(OperationHelper.java:564)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:589)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.operation.OperationHelper.lambda$withSourceAndConnection$3(OperationHelper.java:563)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:589)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.operation.OperationHelper.withSourceAndConnection(OperationHelper.java:562)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.operation.CommandOperationHelper.lambda$executeRetryableWrite$16(CommandOperationHelper.java:395)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.async.function.RetryingSyncSupplier.get(RetryingSyncSupplier.java:65)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.operation.CommandOperationHelper.executeRetryableWrite(CommandOperationHelper.java:423)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.operation.TransactionOperation.execute(TransactionOperation.java:70)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.operation.CommitTransactionOperation.execute(CommitTransactionOperation.java:133)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.internal.operation.CommitTransactionOperation.execute(CommitTransactionOperation.java:54)\n~[mongodb-driver-core-4.4.2.jar:na]   at\ncom.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.execute(MongoClientDelegate.java:212)\n~[mongodb-driver-sync-4.4.2.jar:na]   at\ncom.mongodb.client.internal.ClientSessionImpl.commitTransaction(ClientSessionImpl.java:147)\n~[mongodb-driver-sync-4.4.2.jar:na]   at\norg.springframework.data.mongodb.MongoTransactionManager$MongoTransactionObject.commitTransaction(MongoTransactionManager.java:469)\n~[spring-data-mongodb-3.3.2.jar:3.3.2]    at\norg.springframework.data.mongodb.MongoTransactionManager.doCommit(MongoTransactionManager.java:236)\n~[spring-data-mongodb-3.3.2.jar:3.3.2]    at\norg.springframework.data.mongodb.MongoTransactionManager.doCommit(MongoTransactionManager.java:200)\n~[spring-data-mongodb-3.3.2.jar:3.3.2]    at\norg.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\n~[spring-tx-5.3.16.jar:5.3.16]    at\norg.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\n~[spring-tx-5.3.16.jar:5.3.16]    at\norg.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\n~[spring-tx-5.3.16.jar:5.3.16]    at\norg.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\n~[spring-tx-5.3.16.jar:5.3.16]    at\norg.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n~[spring-tx-5.3.16.jar:5.3.16]    at\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n~[spring-aop-5.3.16.jar:5.3.16]   at\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\n~[spring-aop-5.3.16.jar:5.3.16]   at\norg.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\n~[spring-aop-5.3.16.jar:5.3.16]   at\ncom.example.service.TestService$$EnhancerBySpringCGLIB$$32b03c26.testMultipleCallsToMongoDB()\n~[classes/:na]    at\ncom.example.controller.TestController.test(TestController.java:21)\n~[classes/:na]    at\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\nMethod) ~[na:na]  at\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n~[na:na]  at\njava.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n~[na:na]  at\njava.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\nat\norg.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n~[spring-web-5.3.16.jar:5.3.16]   at\norg.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\n~[spring-web-5.3.16.jar:5.3.16]   at\norg.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\n~[spring-webmvc-5.3.16.jar:5.3.16]    at\norg.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n~[spring-webmvc-5.3.16.jar:5.3.16]    at\norg.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n~[spring-webmvc-5.3.16.jar:5.3.16]    at\norg.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n~[spring-webmvc-5.3.16.jar:5.3.16]    at\norg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\n~[spring-webmvc-5.3.16.jar:5.3.16]    at\norg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n~[spring-webmvc-5.3.16.jar:5.3.16]    at\norg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n~[spring-webmvc-5.3.16.jar:5.3.16]    at\norg.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\n~[spring-webmvc-5.3.16.jar:5.3.16]    at\njavax.servlet.http.HttpServlet.service(HttpServlet.java:681)\n~[tomcat-embed-core-9.0.58.jar:4.0.FR]    at\norg.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n~[spring-webmvc-5.3.16.jar:5.3.16]    at\njavax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n~[tomcat-embed-core-9.0.58.jar:4.0.FR]    at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n~[tomcat-embed-websocket-9.0.58.jar:9.0.58]   at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n~[spring-web-5.3.16.jar:5.3.16]   at\norg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n~[spring-web-5.3.16.jar:5.3.16]   at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n~[spring-web-5.3.16.jar:5.3.16]   at\norg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n~[spring-web-5.3.16.jar:5.3.16]   at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n~[spring-web-5.3.16.jar:5.3.16]   at\norg.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n~[spring-web-5.3.16.jar:5.3.16]   at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\norg.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n~[tomcat-embed-core-9.0.58.jar:9.0.58]    at\njava.base/java.lang.Thread.run(Thread.java:834) ~[na:na]</p>\n</blockquote>\n"},{"tags":["java","spring-mvc","wildfly","apache-commons","windows-server-2012"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1679953789,"post_id":75853502,"comment_id":133810540,"body_markdown":"Are you using an exploded WAR?","body":"Are you using an exploded WAR?"},{"owner":{"account_id":8747220,"reputation":738,"user_id":6542013,"accept_rate":75,"display_name":"SuhasD"},"score":0,"creation_date":1679983347,"post_id":75853502,"comment_id":133814063,"body_markdown":"I performed normal steps to deploy the war.","body":"I performed normal steps to deploy the war."},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1680013113,"post_id":75853502,"comment_id":133821813,"body_markdown":"There are several ways to deploy a WAR. Which steps did you use? Is the WAR a file or a directory?","body":"There are several ways to deploy a WAR. Which steps did you use? Is the WAR a file or a directory?"},{"owner":{"account_id":8747220,"reputation":738,"user_id":6542013,"accept_rate":75,"display_name":"SuhasD"},"score":0,"creation_date":1680015988,"post_id":75853502,"comment_id":133822665,"body_markdown":"exacting the war to standalone/deployment and starting it in standalone mode similar to step mentioned in https://stackoverflow.com/questions/56566970/how-can-i-deploy-a-war-file-to-wildfly","body":"exacting the war to standalone/deployment and starting it in standalone mode similar to step mentioned in <a href=\"https://stackoverflow.com/questions/56566970/how-can-i-deploy-a-war-file-to-wildfly\" title=\"how can i deploy a war file to wildfly\">stackoverflow.com/questions/56566970/&hellip;</a>"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1680027534,"post_id":75853502,"comment_id":133825930,"body_markdown":"Have you tried storing it in a different directory? It could be that VFS is taking over which could result in strange things like this. You should try storing it outside of your deployment to a known path.","body":"Have you tried storing it in a different directory? It could be that VFS is taking over which could result in strange things like this. You should try storing it outside of your deployment to a known path."},{"owner":{"account_id":8747220,"reputation":738,"user_id":6542013,"accept_rate":75,"display_name":"SuhasD"},"score":0,"creation_date":1680067025,"post_id":75853502,"comment_id":133831892,"body_markdown":"I do not have control over this. Also, not sure how VFS will play the role.","body":"I do not have control over this. Also, not sure how VFS will play the role."},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1680141328,"post_id":75853502,"comment_id":133849011,"body_markdown":"WildFly uses VFS for deployments. I&#39;m somewhat guessing it could be at play here as I don&#39;t know how you resolve the path.","body":"WildFly uses VFS for deployments. I&#39;m somewhat guessing it could be at play here as I don&#39;t know how you resolve the path."}],"owner":{"account_id":8747220,"reputation":738,"user_id":6542013,"accept_rate":75,"display_name":"SuhasD"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":531,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679905028,"creation_date":1679905028,"question_id":75853502,"body_markdown":"I have deployed my code on **Wildfly** app server. I am using **MultipartFile&#39;s transferTo()** to transfer the uploaded zip file to destination location.\r\n\r\n    MultipartFile.transferTo(File);\r\n\r\nI am getting following exception :\r\n\r\n    File element in parameter &#39;null&#39; already exists: &#39;E:\\\\\\\\JBoss\\\\wildfly-16.0.0_9090_9191\\\\\\\\standalone\\\\\\\\deployments\\\\\\\\MyWar.war\\\\\\\\My_Export.zip&#39;\r\n    at org.apache.commons.io.FileUtils.requireAbsent(FileUtils.java:2587)\r\n    at deployment.MyWar.war//org.apache.commons.io.FileUtils.moveFile(FileUtils.java:2305)\r\n    at deployment.MyWar.war//org.apache.commons.io.FileUtils.moveFile(FileUtils.java:2283)\r\n    at deployment.MyWar.war//org.apache.commons.fileupload.disk.DiskFileItem.write(DiskFileItem.java:405)\r\n    at deployment.MyWar.war//org.springframework.web.multipart.commons.CommonsMultipartFile.transferTo(CommonsMultipartFile.java:168)\r\n\r\nAs per the javadoc, if file already exists transferTo() will delete it. When I debug the code, *file.delete()* is returning &#39;true&#39; and *file.exists()* is also returning &#39;true&#39;.\r\n\r\n**Note :** Above code is properly working on tomcat 8.5.\r\n\r\nspring-web : 5.3.23\r\n\r\ncommons-io : 2.11\r\n\r\ncommons-fileupload : 1.4","title":"File element in parameter &#39;null&#39; already exists: in Wildfly deployment","body":"<p>I have deployed my code on <strong>Wildfly</strong> app server. I am using <strong>MultipartFile's transferTo()</strong> to transfer the uploaded zip file to destination location.</p>\n<pre><code>MultipartFile.transferTo(File);\n</code></pre>\n<p>I am getting following exception :</p>\n<pre><code>File element in parameter 'null' already exists: 'E:\\\\\\\\JBoss\\\\wildfly-16.0.0_9090_9191\\\\\\\\standalone\\\\\\\\deployments\\\\\\\\MyWar.war\\\\\\\\My_Export.zip'\nat org.apache.commons.io.FileUtils.requireAbsent(FileUtils.java:2587)\nat deployment.MyWar.war//org.apache.commons.io.FileUtils.moveFile(FileUtils.java:2305)\nat deployment.MyWar.war//org.apache.commons.io.FileUtils.moveFile(FileUtils.java:2283)\nat deployment.MyWar.war//org.apache.commons.fileupload.disk.DiskFileItem.write(DiskFileItem.java:405)\nat deployment.MyWar.war//org.springframework.web.multipart.commons.CommonsMultipartFile.transferTo(CommonsMultipartFile.java:168)\n</code></pre>\n<p>As per the javadoc, if file already exists transferTo() will delete it. When I debug the code, <em>file.delete()</em> is returning 'true' and <em>file.exists()</em> is also returning 'true'.</p>\n<p><strong>Note :</strong> Above code is properly working on tomcat 8.5.</p>\n<p>spring-web : 5.3.23</p>\n<p>commons-io : 2.11</p>\n<p>commons-fileupload : 1.4</p>\n"},{"tags":["java","spring-boot","unit-testing","mockito","junit5"],"comments":[{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1679905793,"post_id":75853458,"comment_id":133798171,"body_markdown":"have you tried programmatically creating the mocks? Something like this:\n`someMap = Mokito.mock(AlertService.class);\ndatabaseService = Mokito.mock(DatabaseService.class);`\nAlso, for data is better to use a real object and not a mock, therefore ` Map&lt;SomeEnum, Double&gt; someMap` can be an actual map with some data for testing,","body":"have you tried programmatically creating the mocks? Something like this: <code>someMap = Mokito.mock(AlertService.class); databaseService = Mokito.mock(DatabaseService.class);</code> Also, for data is better to use a real object and not a mock, therefore ` Map&lt;SomeEnum, Double&gt; someMap` can be an actual map with some data for testing,"},{"owner":{"account_id":8327519,"reputation":1743,"user_id":6257144,"display_name":"CodeTalker"},"score":0,"creation_date":1679907448,"post_id":75853458,"comment_id":133798559,"body_markdown":"Yes, for data like `someMap` I am making the actual Map. This map is configured as a bean and autowired by spring during actual run hence it is a dependency in the helper class. I need to inject this as dependency hence I am using @Spy on `someMap`. I didn&#39;t try making mocks proogramatically, let me try that as well and update here on the results.","body":"Yes, for data like <code>someMap</code> I am making the actual Map. This map is configured as a bean and autowired by spring during actual run hence it is a dependency in the helper class. I need to inject this as dependency hence I am using @Spy on <code>someMap</code>. I didn&#39;t try making mocks proogramatically, let me try that as well and update here on the results."},{"owner":{"account_id":8327519,"reputation":1743,"user_id":6257144,"display_name":"CodeTalker"},"score":0,"creation_date":1679908085,"post_id":75853458,"comment_id":133798703,"body_markdown":"@EmanuelTrandafir Thanks, it magically worked! I wonder why Exactly the same code didn&#39;t work with Annotations while it worked programattically. However, one weird thing I observed here, while running the tests with coverage, none of the Lines of MyTargetHelper were shown as covered while during runtime, those lines were actually executed. Any pointers on this?","body":"@EmanuelTrandafir Thanks, it magically worked! I wonder why Exactly the same code didn&#39;t work with Annotations while it worked programattically. However, one weird thing I observed here, while running the tests with coverage, none of the Lines of MyTargetHelper were shown as covered while during runtime, those lines were actually executed. Any pointers on this?"},{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1679909805,"post_id":75853458,"comment_id":133799156,"body_markdown":"i am not sure, maybe it is not clear to mockito where to inject the mock or maybe you cannot inject mocks into a spy (just an assumption).\nby the way, have you considered trying to use the real `MyTargetHelper` and only mock his dependencies? basically to remove the `@Spy` annotation? To inject it you can just pass it as a constructor argument, the same as you did when creating the `inputHelper `","body":"i am not sure, maybe it is not clear to mockito where to inject the mock or maybe you cannot inject mocks into a spy (just an assumption). by the way, have you considered trying to use the real <code>MyTargetHelper</code> and only mock his dependencies? basically to remove the <code>@Spy</code> annotation? To inject it you can just pass it as a constructor argument, the same as you did when creating the <code>inputHelper </code>"}],"owner":{"account_id":8327519,"reputation":1743,"user_id":6257144,"display_name":"CodeTalker"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":234,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679904651,"creation_date":1679904651,"question_id":75853458,"body_markdown":"I am trying to mock dependencies inside my Spy object but mockito is not able to inject the mock objects as I am getting NullPointerException inside the Spy object.\r\n\r\nMy code is as follows:\r\n```\r\n@Component()\r\n@RequiredArgsConstructor(onConstructor = @__(@Autowired))\r\npublic class Target implements Target&lt;InputPojo&gt; {\r\n\r\n    private final TargetHelper&lt;InputPojo&gt; inputHelper;\r\n\r\n    @Override\r\n    public List&lt;ProcessedPojo&gt; testMethod(List&lt;InputPojo&gt; inputs) throws someException {\r\n        inputHelper.process(inputs);\r\n         // ...further processing ...\r\n        return processedList;\r\n    }\r\n}\r\n\r\n@Component()\r\n@RequiredArgsConstructor(onConstructor = @__(@Autowired))\r\npublic class MyTargetHelper implements TargetHelper&lt;InputPojo&gt; {\r\n\r\n    private final Map&lt;SomeEnum, Double&gt; someMap;\r\n\r\n    private final AlertService alertService;\r\n\r\n    private final DatabaseService databaseService;\r\n\r\n    @Override\r\n    public void process(List&lt;InputPojo&gt; inputs) throws SomeException {\r\n        try {\r\n            for (InputPojo i : inputs) {\r\n                furtherProcess(databaseService.fetchForId(i.getId())); // Null pointer exception\r\n            }\r\n        } catch (SomeOtherException e) {\r\n            alertService.raiseAlert(&quot;database error&quot;);\r\n            throw(new SomeException());\r\n        }\r\n    }\r\n}\r\n\r\n@ExtendWith(MockitoExtension.class)\r\nclass TargetTest {\r\n\r\n    @InjectMocks\r\n    Target target;\r\n\r\n    @Mock\r\n    DatabaseService databaseService;\r\n\r\n    @Mock\r\n    AlertService alertService;\r\n\r\n    @Spy\r\n    Map&lt;SomeEnum, Double&gt; someMap = new EnumMap&lt;&gt;(SomeEnum.class);\r\n\r\n    @Spy\r\n    @InjectMocks\r\n    MyTargetHelper inputHelper = new MyTargetHelper(someMap, alertService, databaseService);\r\n\r\n    static final List&lt;InputPojo&gt; inputs;\r\n\r\n    static {\r\n        // add values to inputs and someMap\r\n    }\r\n\r\n    @Test\r\n    @SneakyThrows\r\n    void testTarget() {\r\n        when(databaseService.fetchForId(anyString())).thenReturn(&quot;fetch success&quot;);\r\n\r\n        target.testMethod(inputs);\r\n    }\r\n}\r\n```\r\n\r\nI have tried every other related question but none of them could solve my issue.\r\nI also tried changing \r\n```\r\n   private final TargetHelper&lt;InputPojo&gt; inputHelper;\r\n```\r\nto \r\n```\r\n   private final MyTargetHelper inputHelper;\r\n```\r\nbut it didn&#39;t help. I have tried\r\n* https://stackoverflow.com/questions/43926636/mockito-inject-mock-into-spy-object\r\n(except the Accepted Answer as I am already Autowiring dependencies instead of @Inject)\r\n\r\nI need to run Helper as part of my unit test in order to properly verify results of the TargetMethod, hence I want to Spy the method, however, I will need to mock the database service and alert service in order to make HelperMethod work properly.","title":"How to @InjectMock an dependency inside an @Spy in JUnit 5, Mockito and SprintBoot","body":"<p>I am trying to mock dependencies inside my Spy object but mockito is not able to inject the mock objects as I am getting NullPointerException inside the Spy object.</p>\n<p>My code is as follows:</p>\n<pre><code>@Component()\n@RequiredArgsConstructor(onConstructor = @__(@Autowired))\npublic class Target implements Target&lt;InputPojo&gt; {\n\n    private final TargetHelper&lt;InputPojo&gt; inputHelper;\n\n    @Override\n    public List&lt;ProcessedPojo&gt; testMethod(List&lt;InputPojo&gt; inputs) throws someException {\n        inputHelper.process(inputs);\n         // ...further processing ...\n        return processedList;\n    }\n}\n\n@Component()\n@RequiredArgsConstructor(onConstructor = @__(@Autowired))\npublic class MyTargetHelper implements TargetHelper&lt;InputPojo&gt; {\n\n    private final Map&lt;SomeEnum, Double&gt; someMap;\n\n    private final AlertService alertService;\n\n    private final DatabaseService databaseService;\n\n    @Override\n    public void process(List&lt;InputPojo&gt; inputs) throws SomeException {\n        try {\n            for (InputPojo i : inputs) {\n                furtherProcess(databaseService.fetchForId(i.getId())); // Null pointer exception\n            }\n        } catch (SomeOtherException e) {\n            alertService.raiseAlert(&quot;database error&quot;);\n            throw(new SomeException());\n        }\n    }\n}\n\n@ExtendWith(MockitoExtension.class)\nclass TargetTest {\n\n    @InjectMocks\n    Target target;\n\n    @Mock\n    DatabaseService databaseService;\n\n    @Mock\n    AlertService alertService;\n\n    @Spy\n    Map&lt;SomeEnum, Double&gt; someMap = new EnumMap&lt;&gt;(SomeEnum.class);\n\n    @Spy\n    @InjectMocks\n    MyTargetHelper inputHelper = new MyTargetHelper(someMap, alertService, databaseService);\n\n    static final List&lt;InputPojo&gt; inputs;\n\n    static {\n        // add values to inputs and someMap\n    }\n\n    @Test\n    @SneakyThrows\n    void testTarget() {\n        when(databaseService.fetchForId(anyString())).thenReturn(&quot;fetch success&quot;);\n\n        target.testMethod(inputs);\n    }\n}\n</code></pre>\n<p>I have tried every other related question but none of them could solve my issue.\nI also tried changing</p>\n<pre><code>   private final TargetHelper&lt;InputPojo&gt; inputHelper;\n</code></pre>\n<p>to</p>\n<pre><code>   private final MyTargetHelper inputHelper;\n</code></pre>\n<p>but it didn't help. I have tried</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/43926636/mockito-inject-mock-into-spy-object\">Mockito Inject mock into Spy object</a>\n(except the Accepted Answer as I am already Autowiring dependencies instead of @Inject)</li>\n</ul>\n<p>I need to run Helper as part of my unit test in order to properly verify results of the TargetMethod, hence I want to Spy the method, however, I will need to mock the database service and alert service in order to make HelperMethod work properly.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":31473,"reputation":14021,"user_id":86421,"accept_rate":79,"display_name":"Jeff"},"score":0,"creation_date":1305298750,"post_id":5993779,"comment_id":6921710,"body_markdown":"Based on what you said, it looks like it is working fine. What is your desired output?","body":"Based on what you said, it looks like it is working fine. What is your desired output?"},{"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":4,"creation_date":1305298954,"post_id":5993779,"comment_id":6921773,"body_markdown":"@Jeff: He showed his desired output (`AA` / `BB` / `CC` ...)","body":"@Jeff: He showed his desired output (<code>AA</code> / <code>BB</code> / <code>CC</code> ...)"},{"owner":{"account_id":31473,"reputation":14021,"user_id":86421,"accept_rate":79,"display_name":"Jeff"},"score":2,"creation_date":1305299080,"post_id":5993779,"comment_id":6921823,"body_markdown":"Are you sure? I interpreted that as his current output, not his desired output. Maybe its time to stand up and walk around a little bit.","body":"Are you sure? I interpreted that as his current output, not his desired output. Maybe its time to stand up and walk around a little bit."},{"owner":{"account_id":86417,"reputation":38255,"user_id":240337,"accept_rate":78,"display_name":"Thang Pham"},"score":1,"creation_date":1305299140,"post_id":5993779,"comment_id":6921852,"body_markdown":"@Jeff: Sorry for the confusion, I updated my post to clear your misunderstand.","body":"@Jeff: Sorry for the confusion, I updated my post to clear your misunderstand."},{"owner":{"account_id":1230698,"reputation":368,"user_id":1195371,"display_name":"Princesh"},"score":0,"creation_date":1361037322,"post_id":5993779,"comment_id":25269519,"body_markdown":"Regex will degrade your performance. I would recommend write a method which will go character by character and split string if need. You can optimize this futher to get log(n) performance.","body":"Regex will degrade your performance. I would recommend write a method which will go character by character and split string if need. You can optimize this futher to get log(n) performance."}],"answers":[{"tags":[],"owner":{"account_id":61630,"reputation":38237,"user_id":183579,"accept_rate":68,"display_name":"Richard H"},"down_vote_count":0,"up_vote_count":362,"is_accepted":true,"score":362,"last_activity_date":1554927945,"creation_date":1305298790,"answer_id":5993823,"question_id":5993779,"body_markdown":"I think you need to include the regex **OR operator**:\r\n\r\n    String[]tokens = pdfName.split(&quot;-|\\\\.&quot;);\r\n\r\nWhat you have will match:  \r\n[DASH followed by DOT together] `-.`  \r\nnot  \r\n[DASH or DOT any of them]  `-` or `.`","title":"Use String.split() with multiple delimiters","body":"<p>I think you need to include the regex <strong>OR operator</strong>:</p>\n\n<pre><code>String[]tokens = pdfName.split(\"-|\\\\.\");\n</code></pre>\n\n<p>What you have will match:<br>\n[DASH followed by DOT together] <code>-.</code><br>\nnot<br>\n[DASH or DOT any of them]  <code>-</code> or <code>.</code></p>\n"},{"tags":[],"owner":{"account_id":90221,"reputation":80129,"user_id":248432,"accept_rate":85,"display_name":"Peter Knego"},"down_vote_count":1,"up_vote_count":72,"is_accepted":false,"score":71,"last_activity_date":1305298846,"creation_date":1305298846,"answer_id":5993837,"question_id":5993779,"body_markdown":"Try this regex `&quot;[-.]+&quot;`. The + after treats consecutive delimiter chars as one. Remove plus if you do not want this.","title":"Use String.split() with multiple delimiters","body":"<p>Try this regex <code>\"[-.]+\"</code>. The + after treats consecutive delimiter chars as one. Remove plus if you do not want this.</p>\n"},{"tags":[],"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1679904593,"creation_date":1305298855,"answer_id":5993841,"question_id":5993779,"body_markdown":"The string you give `split` is the string form of a regular expression, so:\r\n\r\n    private void getId(String pdfName){\r\n        String[] tokens = pdfName.split(&quot;[-.]&quot;);\r\n        // ...\r\n    }\r\n\r\nThat means &quot;split on any character within the `[]`&quot; (so, split on `-` and `.`). A couple of notes on that:\r\n\r\n1. Normally, you have to escape the dot (`.`) by putting a backslash in front of it because in a regular expression `.` means &quot;any character.&quot; But you don&#39;t have to do that within a character class (`[]`).\r\n2. Normally, within a character class (`[]`), you have to escape the dash (`-`) because in that context it has special meaning (it indicates a range, like `[0-9A-Fa-f]` to match all hex digits). But when it&#39;s the **first** character after the `[`, we don&#39;t have to escape it.\r\n\r\nIf you **did** need to escape either of those, the way you&#39;d do it is by having a backslash in front of it in the string. Since we&#39;re writing this as a string *literal*, to actually put a backslash in the string requires that we escape it, since otherwise it&#39;s an escape character (for instance, `\\n` means newline, `\\t` means tab, etc.). So we&#39;d have to write `\\\\` to put an actual backslash in the string for the regular expression engine to see it and use it to escape the next character (`-` or `.`). For instance, `&quot;[\\\\-.]&quot;` if we wanted to escape the `-` even though we don&#39;t need to.\r\n\r\nLive example: https://ideone.com/PMA8d3","title":"Use String.split() with multiple delimiters","body":"<p>The string you give <code>split</code> is the string form of a regular expression, so:</p>\n<pre><code>private void getId(String pdfName){\n    String[] tokens = pdfName.split(&quot;[-.]&quot;);\n    // ...\n}\n</code></pre>\n<p>That means &quot;split on any character within the <code>[]</code>&quot; (so, split on <code>-</code> and <code>.</code>). A couple of notes on that:</p>\n<ol>\n<li>Normally, you have to escape the dot (<code>.</code>) by putting a backslash in front of it because in a regular expression <code>.</code> means &quot;any character.&quot; But you don't have to do that within a character class (<code>[]</code>).</li>\n<li>Normally, within a character class (<code>[]</code>), you have to escape the dash (<code>-</code>) because in that context it has special meaning (it indicates a range, like <code>[0-9A-Fa-f]</code> to match all hex digits). But when it's the <strong>first</strong> character after the <code>[</code>, we don't have to escape it.</li>\n</ol>\n<p>If you <strong>did</strong> need to escape either of those, the way you'd do it is by having a backslash in front of it in the string. Since we're writing this as a string <em>literal</em>, to actually put a backslash in the string requires that we escape it, since otherwise it's an escape character (for instance, <code>\\n</code> means newline, <code>\\t</code> means tab, etc.). So we'd have to write <code>\\\\</code> to put an actual backslash in the string for the regular expression engine to see it and use it to escape the next character (<code>-</code> or <code>.</code>). For instance, <code>&quot;[\\\\-.]&quot;</code> if we wanted to escape the <code>-</code> even though we don't need to.</p>\n<p>Live example: <a href=\"https://ideone.com/PMA8d3\" rel=\"nofollow noreferrer\">https://ideone.com/PMA8d3</a></p>\n"},{"tags":[],"owner":{"account_id":149876,"reputation":409,"user_id":362685,"accept_rate":31,"display_name":"isometrik"},"down_vote_count":4,"up_vote_count":3,"is_accepted":false,"score":-1,"last_activity_date":1462083724,"creation_date":1305298952,"answer_id":5993863,"question_id":5993779,"body_markdown":"If you know the sting will always be in the same format, first split the string based on `.` and store the string at the first index in a variable. Then split the string in the second index based on `-` and store indexes 0, 1 and 2. Finally, split index 2 of the previous array based on `.` and you should have obtained all of the relevant fields.  \r\n\r\nRefer to the following snippet:\r\n\r\n    String[] tmp = pdfName.split(&quot;.&quot;);\r\n    String val1 = tmp[0];\r\n    tmp = tmp[1].split(&quot;-&quot;);\r\n    String val2 = tmp[0];\r\n    ...\r\n","title":"Use String.split() with multiple delimiters","body":"<p>If you know the sting will always be in the same format, first split the string based on <code>.</code> and store the string at the first index in a variable. Then split the string in the second index based on <code>-</code> and store indexes 0, 1 and 2. Finally, split index 2 of the previous array based on <code>.</code> and you should have obtained all of the relevant fields.  </p>\n\n<p>Refer to the following snippet:</p>\n\n<pre><code>String[] tmp = pdfName.split(\".\");\nString val1 = tmp[0];\ntmp = tmp[1].split(\"-\");\nString val2 = tmp[0];\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1305300048,"creation_date":1305300048,"answer_id":5994115,"question_id":5993779,"body_markdown":"Using [Guava][1] you could do this:\r\n\r\n    Iterable&lt;String&gt; tokens = Splitter.on(CharMatcher.anyOf(&quot;-.&quot;)).split(pdfName);\r\n\r\n\r\n  [1]: http://guava-libraries.googlecode.com","title":"Use String.split() with multiple delimiters","body":"<p>Using <a href=\"http://guava-libraries.googlecode.com\">Guava</a> you could do this:</p>\n\n<pre><code>Iterable&lt;String&gt; tokens = Splitter.on(CharMatcher.anyOf(\"-.\")).split(pdfName);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2114790,"reputation":429,"user_id":1879332,"display_name":"Varun Gangal"},"down_vote_count":1,"up_vote_count":33,"is_accepted":false,"score":32,"last_activity_date":1355814866,"creation_date":1355814866,"answer_id":13928086,"question_id":5993779,"body_markdown":"You can use the regex &quot;\\W&quot;.This matches any non-word character.The required line would be:\r\n\r\n    String[] tokens=pdfName.split(&quot;\\\\W&quot;);","title":"Use String.split() with multiple delimiters","body":"<p>You can use the regex \"\\W\".This matches any non-word character.The required line would be:</p>\n\n<pre><code>String[] tokens=pdfName.split(\"\\\\W\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":339900,"reputation":8440,"user_id":669645,"accept_rate":91,"display_name":"Edd"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1461066254,"creation_date":1461066254,"answer_id":36717398,"question_id":5993779,"body_markdown":"I&#39;d use Apache Commons:\r\n\r\nimport `org.apache.commons.lang3.StringUtils;`\r\n\r\n    private void getId(String pdfName){\r\n        String[] tokens = StringUtils.split(pdfName, &quot;-.&quot;);\r\n    }\r\n\r\nIt&#39;ll split on any of the specified separators, as opposed to `StringUtils.splitByWholeSeparator(str, separator)` which uses the complete string as a separator","title":"Use String.split() with multiple delimiters","body":"<p>I'd use Apache Commons:</p>\n\n<p>import <code>org.apache.commons.lang3.StringUtils;</code></p>\n\n<pre><code>private void getId(String pdfName){\n    String[] tokens = StringUtils.split(pdfName, \"-.\");\n}\n</code></pre>\n\n<p>It'll split on any of the specified separators, as opposed to <code>StringUtils.splitByWholeSeparator(str, separator)</code> which uses the complete string as a separator</p>\n"},{"tags":[],"owner":{"account_id":6806838,"reputation":33,"user_id":5238312,"display_name":"Avdhesh Yadav"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1480164014,"creation_date":1477032383,"answer_id":40170034,"question_id":5993779,"body_markdown":"You may also specified regular expression as argument in split() method ..see below example....\r\n\r\n    private void getId(String pdfName){\r\n    String[]tokens = pdfName.split(&quot;-|\\\\.&quot;);\r\n    }\r\n\r\n","title":"Use String.split() with multiple delimiters","body":"<p>You may also specified regular expression as argument in split() method ..see below example....</p>\n\n<pre><code>private void getId(String pdfName){\nString[]tokens = pdfName.split(\"-|\\\\.\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1592127,"reputation":18171,"user_id":1475228,"accept_rate":84,"display_name":"Pritam Banerjee"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1500022784,"creation_date":1500022784,"answer_id":45098830,"question_id":5993779,"body_markdown":"It&#39;s better to use something like this:\r\n\r\n    s.split(&quot;[\\\\s\\\\-\\\\.\\\\&#39;\\\\?\\\\,\\\\_\\\\@]+&quot;);\r\n\r\nHave added a few other characters as sample. This is the safest way to use, because the way `.` and `&#39;` is treated.","title":"Use String.split() with multiple delimiters","body":"<p>It's better to use something like this:</p>\n\n<pre><code>s.split(\"[\\\\s\\\\-\\\\.\\\\'\\\\?\\\\,\\\\_\\\\@]+\");\n</code></pre>\n\n<p>Have added a few other characters as sample. This is the safest way to use, because the way <code>.</code> and <code>'</code> is treated.</p>\n"},{"tags":[],"owner":{"account_id":10724715,"reputation":11,"user_id":7892614,"display_name":"sss"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1507789859,"creation_date":1507761950,"answer_id":46698678,"question_id":5993779,"body_markdown":"    \r\n    s.trim().split(&quot;[\\\\W]+&quot;) \r\nshould work.\r\n    ","title":"Use String.split() with multiple delimiters","body":"<pre><code>s.trim().split(\"[\\\\W]+\") \n</code></pre>\n\n<p>should work.</p>\n"},{"tags":[],"owner":{"account_id":3732221,"reputation":566,"user_id":4361933,"accept_rate":0,"display_name":"&#214;MER TAŞCI"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1528789584,"creation_date":1528789584,"answer_id":50811866,"question_id":5993779,"body_markdown":"For two char sequence as delimeters &quot;AND&quot; and &quot;OR&quot; this should be worked. Don&#39;t forget to trim while using.\r\n                \r\n     String text =&quot;ISTANBUL AND NEW YORK AND PARIS OR TOKYO AND MOSCOW&quot;;\r\n     String[] cities = text.split(&quot;AND|OR&quot;); \r\nResult : cities = {&quot;ISTANBUL &quot;, &quot; NEW YORK &quot;, &quot; PARIS &quot;, &quot; TOKYO &quot;, &quot; MOSCOW&quot;}","title":"Use String.split() with multiple delimiters","body":"<p>For two char sequence as delimeters \"AND\" and \"OR\" this should be worked. Don't forget to trim while using.</p>\n\n<pre><code> String text =\"ISTANBUL AND NEW YORK AND PARIS OR TOKYO AND MOSCOW\";\n String[] cities = text.split(\"AND|OR\"); \n</code></pre>\n\n<p>Result : cities = {\"ISTANBUL \", \" NEW YORK \", \" PARIS \", \" TOKYO \", \" MOSCOW\"}</p>\n"},{"tags":[],"owner":{"account_id":14520245,"reputation":402,"user_id":10488111,"display_name":"Reaper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1552467279,"creation_date":1552465534,"answer_id":55137281,"question_id":5993779,"body_markdown":"Try this code:\r\n\r\n    var string = &#39;AA.BB-CC-DD.zip&#39;;\r\n    array = string.split(/[,.]/);","title":"Use String.split() with multiple delimiters","body":"<p>Try this code:</p>\n\n<pre><code>var string = 'AA.BB-CC-DD.zip';\narray = string.split(/[,.]/);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5271898,"reputation":39,"user_id":4209918,"display_name":"Nitish"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1561484683,"creation_date":1561484620,"answer_id":56759438,"question_id":5993779,"body_markdown":"    String[] token=s.split(&quot;[.-]&quot;);","title":"Use String.split() with multiple delimiters","body":"<pre><code>String[] token=s.split(\"[.-]\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2414779,"reputation":14072,"user_id":2109070,"accept_rate":62,"display_name":"Trying"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1606642940,"creation_date":1606642940,"answer_id":65058772,"question_id":5993779,"body_markdown":"`pdfName.split(&quot;[.-]+&quot;);`\r\n\r\n - `[.-]` -&gt; any one of the `.` or `-` can be used as delimiter \r\n\r\n\r\n - `+` sign signifies that if the aforementioned delimiters occur consecutively we should treat it as one. ","title":"Use String.split() with multiple delimiters","body":"<p><code>pdfName.split(&quot;[.-]+&quot;);</code></p>\n<ul>\n<li><p><code>[.-]</code> -&gt; any one of the <code>.</code> or <code>-</code> can be used as delimiter</p>\n</li>\n<li><p><code>+</code> sign signifies that if the aforementioned delimiters occur consecutively we should treat it as one.</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5093364,"reputation":568,"user_id":4085647,"accept_rate":83,"display_name":"Rajesh Koshti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662018199,"creation_date":1662018199,"answer_id":73565800,"question_id":5993779,"body_markdown":"you can try this way as split accepts varargs so we can pass multiple parameters as delimeters\r\n\r\n     String[]tokens = pdfName.split(&quot;-&quot;,&quot;.&quot;);\r\n\r\nyou can pass as many parameters that you want.","title":"Use String.split() with multiple delimiters","body":"<p>you can try this way as split accepts varargs so we can pass multiple parameters as delimeters</p>\n<pre><code> String[]tokens = pdfName.split(&quot;-&quot;,&quot;.&quot;);\n</code></pre>\n<p>you can pass as many parameters that you want.</p>\n"}],"owner":{"account_id":86417,"reputation":38255,"user_id":240337,"accept_rate":78,"display_name":"Thang Pham"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":521271,"favorite_count":0,"down_vote_count":1,"up_vote_count":252,"accepted_answer_id":5993823,"answer_count":15,"score":251,"last_activity_date":1679904593,"creation_date":1305298596,"question_id":5993779,"body_markdown":"I need to split a string base on delimiter `-` and `.`. Below are my desired output. \r\n\r\n`AA.BB-CC-DD.zip` -&gt; \r\n\r\n    AA\r\n    BB\r\n    CC\r\n    DD\r\n    zip \r\n\r\nbut my following code does not work.\r\n\r\n    private void getId(String pdfName){\r\n        String[]tokens = pdfName.split(&quot;-\\\\.&quot;);\r\n    }","title":"Use String.split() with multiple delimiters","body":"<p>I need to split a string base on delimiter <code>-</code> and <code>.</code>. Below are my desired output. </p>\n\n<p><code>AA.BB-CC-DD.zip</code> -> </p>\n\n<pre><code>AA\nBB\nCC\nDD\nzip \n</code></pre>\n\n<p>but my following code does not work.</p>\n\n<pre><code>private void getId(String pdfName){\n    String[]tokens = pdfName.split(\"-\\\\.\");\n}\n</code></pre>\n"},{"tags":["java","javafx","event-handling","initialization"],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1679904489,"creation_date":1679904035,"answer_id":75853370,"question_id":75853093,"body_markdown":"While it&#39;s possible to use the `userData` property of the `Stage`, I recommend a different approach. Create a method in the FXML&#39;s controller class that you can call. This method would be responsible for performing any additional initialization needed by the controller which can only be done once it has access to an `Account`.\r\n\r\n```lang-java\r\n// create an FXMLLoader *instance*\r\nFXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;/de/hannes/account/AccountGUI.fxml&quot;));\r\n\r\nTabPane root = loader.load(); // uses the INSTANCE &#39;load()&#39; method\r\nYourControllerClass controller = loader.getController(); // called AFTER &#39;load()&#39;\r\n\r\nAccount account = accModel.getAccount(database.getConnection(), database.getStatement(), user);\r\ncontroller.initAccount(account); // call the method you added to the controller\r\n\r\nfinal Node source = (Node) event.getSource();\r\n\r\nstage = (Stage) source.getScene().getWindow();\r\n\r\nScene scene = new Scene(root);\r\nstage.setResizable(false);\r\nstage.setTitle(&quot;Dashboard&quot;);\r\nstage.setScene(scene);\r\nstage.show();\r\n```\r\n\r\nThough note a more appropriate MVC or other architecture would be better here. I see you do have some model classes, which is good, but which account is currently logged in should really be tracked in the model. Then the &quot;account view&quot; can simply query the model for that information rather than being given an `Account` directly. That said, you would likely still need to do something similar to the above in order to pass the needed model instance between controllers. \r\n\r\nAlso, it&#39;s strange that `acc.getModel(...)` needs to be given (what I assume is) a JDBC `Connection` and `Statement` as arguments. Similar strangeness with the `loginModel` object. The fact a SQL database is being used is an implementation detail. The method signatures should not expose such details. At most, the constructor of the model class should accept a `Connection` (though having another class that manages the `Connection` might be warranted). Then the methods make use of that `Connection` internally.\r\n\r\n\r\nI should also point out that you&#39;re performing database access operations on the _JavaFX Application Thread_. Or, if not, then you&#39;re blocking the FX thread while the database operations complete on a background thread. Either is bad. All database operations and other I/O operations should be performed on a background thread, and the FX thread must remain free to do its job. See [Concurrency in JavaFX][1] for more information.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/javafx/interoperability-tutorial/concurrency.htm#JFXIP546","title":"How to use getUserData() without an eventHandler","body":"<p>While it's possible to use the <code>userData</code> property of the <code>Stage</code>, I recommend a different approach. Create a method in the FXML's controller class that you can call. This method would be responsible for performing any additional initialization needed by the controller which can only be done once it has access to an <code>Account</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// create an FXMLLoader *instance*\nFXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;/de/hannes/account/AccountGUI.fxml&quot;));\n\nTabPane root = loader.load(); // uses the INSTANCE 'load()' method\nYourControllerClass controller = loader.getController(); // called AFTER 'load()'\n\nAccount account = accModel.getAccount(database.getConnection(), database.getStatement(), user);\ncontroller.initAccount(account); // call the method you added to the controller\n\nfinal Node source = (Node) event.getSource();\n\nstage = (Stage) source.getScene().getWindow();\n\nScene scene = new Scene(root);\nstage.setResizable(false);\nstage.setTitle(&quot;Dashboard&quot;);\nstage.setScene(scene);\nstage.show();\n</code></pre>\n<p>Though note a more appropriate MVC or other architecture would be better here. I see you do have some model classes, which is good, but which account is currently logged in should really be tracked in the model. Then the &quot;account view&quot; can simply query the model for that information rather than being given an <code>Account</code> directly. That said, you would likely still need to do something similar to the above in order to pass the needed model instance between controllers.</p>\n<p>Also, it's strange that <code>acc.getModel(...)</code> needs to be given (what I assume is) a JDBC <code>Connection</code> and <code>Statement</code> as arguments. Similar strangeness with the <code>loginModel</code> object. The fact a SQL database is being used is an implementation detail. The method signatures should not expose such details. At most, the constructor of the model class should accept a <code>Connection</code> (though having another class that manages the <code>Connection</code> might be warranted). Then the methods make use of that <code>Connection</code> internally.</p>\n<p>I should also point out that you're performing database access operations on the <em>JavaFX Application Thread</em>. Or, if not, then you're blocking the FX thread while the database operations complete on a background thread. Either is bad. All database operations and other I/O operations should be performed on a background thread, and the FX thread must remain free to do its job. See <a href=\"https://docs.oracle.com/javase/8/javafx/interoperability-tutorial/concurrency.htm#JFXIP546\" rel=\"nofollow noreferrer\">Concurrency in JavaFX</a> for more information.</p>\n"}],"owner":{"account_id":26218746,"reputation":46,"user_id":19896523,"display_name":"Thriest"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75853370,"answer_count":1,"score":0,"last_activity_date":1679904489,"creation_date":1679901995,"question_id":75853093,"body_markdown":"Ive created an Login-System which is connected to a SQLite database. After the User entered his correct account informations, a the dashboard should be loaded with his name and balance which should also be retrieved from the database.\r\nI created an Account-Objekt from the informations passed into the Login-Form and saved them using the &quot;stage.setUserData()&quot; - Method to use them in the Dashboard-Controller Class.\r\n```\r\n @FXML\r\n    void loginButtonClicked(ActionEvent event) {\r\n    \tString user = usernameTextField.getText();\r\n    \tString pw = passwordTextField.getText();\r\n    \tdatabase.openConnection();\r\n    \ttry {\r\n\r\n        \tif(loginModel.isLogin(database.getConnection(), user, pw)) {\r\n        \t\tTabPane root = FXMLLoader.load(getClass().getClassLoader().getResource(&quot;de/hannes/account/AccountGUI.fxml&quot;));\r\n        \t\tfinal Node source = (Node) event.getSource();\r\n        \t\tAccount account = accModel.getAccount(database.getConnection(), database.getStatement(), user);\r\n        \t\tstage = (Stage) source.getScene().getWindow();\r\n        \t\tstage.setUserData(account);\r\n        \t\tScene scene = new Scene(root);\r\n        \t\tstage.setResizable(false);\r\n        \t\tstage.setTitle(&quot;Dashboard&quot;);\r\n        \t\tstage.setScene(scene);\r\n        \t\tstage.show();\r\n        \t\t\r\n        \t}\r\n        \t\r\n        \telse {\r\n        \t\tusernameTextField.clear();\r\n        \t\tpasswordTextField.clear();\r\n        \t\tloginButton.setDisable(true);\r\n        \t}\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n \r\n    \t\r\n    }\r\n```\r\nWell, so far it works but only if the user clicks on a Button in the Dashboard and then using the stage.getUserData()&quot; - Method.\r\n```\r\n@FXML\r\n    void test(ActionEvent event) {\r\n    \tNode node = (Node) event.getSource();\r\n    \tStage stage = (Stage) node.getScene().getWindow();\r\n    \tAccount account = (Account) stage.getUserData();\r\n    \tbalanceLabel.setText(account.getGuthabenAsString());\r\n    }\r\n    \r\n```\r\nBut that solution is very cumbersome and not user friendly at all. I want to display the users Account-Details without the need to call an Eventhandler on a Button before. I considered using the initialize-Method but I&#180;m not sure how to access the userData without an eventHandler.","title":"How to use getUserData() without an eventHandler","body":"<p>Ive created an Login-System which is connected to a SQLite database. After the User entered his correct account informations, a the dashboard should be loaded with his name and balance which should also be retrieved from the database.\nI created an Account-Objekt from the informations passed into the Login-Form and saved them using the &quot;stage.setUserData()&quot; - Method to use them in the Dashboard-Controller Class.</p>\n<pre><code> @FXML\n    void loginButtonClicked(ActionEvent event) {\n        String user = usernameTextField.getText();\n        String pw = passwordTextField.getText();\n        database.openConnection();\n        try {\n\n            if(loginModel.isLogin(database.getConnection(), user, pw)) {\n                TabPane root = FXMLLoader.load(getClass().getClassLoader().getResource(&quot;de/hannes/account/AccountGUI.fxml&quot;));\n                final Node source = (Node) event.getSource();\n                Account account = accModel.getAccount(database.getConnection(), database.getStatement(), user);\n                stage = (Stage) source.getScene().getWindow();\n                stage.setUserData(account);\n                Scene scene = new Scene(root);\n                stage.setResizable(false);\n                stage.setTitle(&quot;Dashboard&quot;);\n                stage.setScene(scene);\n                stage.show();\n                \n            }\n            \n            else {\n                usernameTextField.clear();\n                passwordTextField.clear();\n                loginButton.setDisable(true);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n \n        \n    }\n</code></pre>\n<p>Well, so far it works but only if the user clicks on a Button in the Dashboard and then using the stage.getUserData()&quot; - Method.</p>\n<pre><code>@FXML\n    void test(ActionEvent event) {\n        Node node = (Node) event.getSource();\n        Stage stage = (Stage) node.getScene().getWindow();\n        Account account = (Account) stage.getUserData();\n        balanceLabel.setText(account.getGuthabenAsString());\n    }\n    \n</code></pre>\n<p>But that solution is very cumbersome and not user friendly at all. I want to display the users Account-Details without the need to call an Eventhandler on a Button before. I considered using the initialize-Method but I´m not sure how to access the userData without an eventHandler.</p>\n"},{"tags":["java","android","jena","ontology"],"owner":{"account_id":22090400,"reputation":11,"user_id":16348536,"display_name":"Ксения Манжула"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679904473,"creation_date":1679904473,"question_id":75853440,"body_markdown":"I work with ontology through Android Studio (adrojena). I have a task - to update by condition the field &quot;TECHNICAL_umovi_DSTU_TU&quot; of the individual &quot;inst&quot;. The condition itself is checked correctly, and the updated value is correct, but there is a problem with the update. Field &quot;TECHNICAL_umovi_DSTU_TU&quot; - in the context of this problem - data property (DataType property) with a string value. The problem is that I don&#39;t know how exactly I should update the value of this property.\r\n\r\nDefinition of an Individual:\r\n`Individual inst = (Individual) i.next();`\r\n\r\nDefinition of the data property &quot;TECHNICAL_umovi_DSTU_TU&quot;:\r\n`DatatypeProperty DSTU_prop = model.getDatatypeProperty(&quot;http://www.semanticweb.org/dell/ontologies/2023/1/untitled-ontology-20#Технічні_умови_ДСТУ_ТУ&quot;);`\r\n\r\nI know that there is a setPropertyValue method. Here is my attempt to implement a property data update for a specific individual:\r\n\r\n```\r\nind_analyze_res = dstu_tu_value + &quot;:  ДІЄ&quot;;\r\nIterator&lt;DatatypeProperty&gt; it = model.listDatatypeProperties();\r\nwhile(it.hasNext())\r\n{\r\n    RDFNode next = it.next();\r\n    String name = next.toString().split(&quot;#&quot;)[1];\r\n    if(name.equals(&quot;Технічні_умови_ДСТУ_ТУ&quot;))\r\n    {\r\n        //inst.getModel().remove(inst, DSTU_prop, next);\r\n        inst.setPropertyValue(DSTU_prop, next);\r\n        //inst.removeProperty(DSTU_prop, next);\r\n        break;\r\n    }\r\n}\r\nWriteOntologyToFile(model);\r\n//DatatypeProperty DSTU_prop2 = //model.getDatatypeProperty(&quot;http://www.semanticweb.org/dell/ontologies/2023/1/untitled-ontology-20#Технічні_умови_ДСТУ_ТУ&quot;);\r\n//inst.addProperty(DSTU_prop2, ind_analyze_res);\r\n//WriteOntologyToFile(model);\r\n\r\nSystem.out.println(inst.getPropertyValue(DSTU_prop));\r\n\r\n```\r\n\r\nAs you can see from this snippet, the update happens, but far from what I need: instead of a value like &quot;DSTU....: ACT&quot;, I get the full property name, &quot;http://www.semanticweb.org/dell/ontologies/2023/1/untitled ontology-20#Технічні_умови_ДСТУ_ТУ&quot;.\r\n\r\nMy next attempt is to remove the property from the individual, update the table, and add the same property, but with the updated value.\r\n\r\n```\r\nind_analyze_res = dstu_tu_value + &quot;:  ДІЄ&quot;;\r\nIterator&lt;DatatypeProperty&gt; it = model.listDatatypeProperties();\r\nwhile(it.hasNext())\r\n{\r\n    RDFNode next = it.next();\r\n    String name = next.toString().split(&quot;#&quot;)[1];\r\n    if(name.equals(&quot;Технічні_умови_ДСТУ_ТУ&quot;))\r\n    {\r\n        //inst.getModel().remove(inst, DSTU_prop, next);\r\n        //inst.setPropertyValue(DSTU_prop, next);\r\n        inst.removeProperty(DSTU_prop, next);\r\n        break;\r\n    }\r\n}\r\nWriteOntologyToFile(model);\r\nDatatypeProperty DSTU_prop2 = model.getDatatypeProperty(&quot;http://www.semanticweb.org/dell/ontologies/2023/1/untitled-ontology-20#Технічні_умови_ДСТУ_ТУ&quot;);\r\ninst.addProperty(DSTU_prop2, ind_analyze_res);\r\nWriteOntologyToFile(model);\r\n\r\nSystem.out.println(inst.getPropertyValue(DSTU_prop));\r\n```\r\n\r\nBut, this option also did not work - the console displays the old value of the type &quot;DSTU......&quot; (in the code, it is designated as &quot;dstu_tu_value&quot;), but not the value of the variable &quot;ind_analyze_res&quot;.\r\nI get the same result if I delete via the getModel method (the very first commented line in the &quot;if&quot;).\r\n\r\nPlease advise what to do.","title":"How to update datatype property of individual?","body":"<p>I work with ontology through Android Studio (adrojena). I have a task - to update by condition the field &quot;TECHNICAL_umovi_DSTU_TU&quot; of the individual &quot;inst&quot;. The condition itself is checked correctly, and the updated value is correct, but there is a problem with the update. Field &quot;TECHNICAL_umovi_DSTU_TU&quot; - in the context of this problem - data property (DataType property) with a string value. The problem is that I don't know how exactly I should update the value of this property.</p>\n<p>Definition of an Individual:\n<code>Individual inst = (Individual) i.next();</code></p>\n<p>Definition of the data property &quot;TECHNICAL_umovi_DSTU_TU&quot;:\n<code>DatatypeProperty DSTU_prop = model.getDatatypeProperty(&quot;http://www.semanticweb.org/dell/ontologies/2023/1/untitled-ontology-20#Технічні_умови_ДСТУ_ТУ&quot;);</code></p>\n<p>I know that there is a setPropertyValue method. Here is my attempt to implement a property data update for a specific individual:</p>\n<pre><code>ind_analyze_res = dstu_tu_value + &quot;:  ДІЄ&quot;;\nIterator&lt;DatatypeProperty&gt; it = model.listDatatypeProperties();\nwhile(it.hasNext())\n{\n    RDFNode next = it.next();\n    String name = next.toString().split(&quot;#&quot;)[1];\n    if(name.equals(&quot;Технічні_умови_ДСТУ_ТУ&quot;))\n    {\n        //inst.getModel().remove(inst, DSTU_prop, next);\n        inst.setPropertyValue(DSTU_prop, next);\n        //inst.removeProperty(DSTU_prop, next);\n        break;\n    }\n}\nWriteOntologyToFile(model);\n//DatatypeProperty DSTU_prop2 = //model.getDatatypeProperty(&quot;http://www.semanticweb.org/dell/ontologies/2023/1/untitled-ontology-20#Технічні_умови_ДСТУ_ТУ&quot;);\n//inst.addProperty(DSTU_prop2, ind_analyze_res);\n//WriteOntologyToFile(model);\n\nSystem.out.println(inst.getPropertyValue(DSTU_prop));\n\n</code></pre>\n<p>As you can see from this snippet, the update happens, but far from what I need: instead of a value like &quot;DSTU....: ACT&quot;, I get the full property name, &quot;http://www.semanticweb.org/dell/ontologies/2023/1/untitled ontology-20#Технічні_умови_ДСТУ_ТУ&quot;.</p>\n<p>My next attempt is to remove the property from the individual, update the table, and add the same property, but with the updated value.</p>\n<pre><code>ind_analyze_res = dstu_tu_value + &quot;:  ДІЄ&quot;;\nIterator&lt;DatatypeProperty&gt; it = model.listDatatypeProperties();\nwhile(it.hasNext())\n{\n    RDFNode next = it.next();\n    String name = next.toString().split(&quot;#&quot;)[1];\n    if(name.equals(&quot;Технічні_умови_ДСТУ_ТУ&quot;))\n    {\n        //inst.getModel().remove(inst, DSTU_prop, next);\n        //inst.setPropertyValue(DSTU_prop, next);\n        inst.removeProperty(DSTU_prop, next);\n        break;\n    }\n}\nWriteOntologyToFile(model);\nDatatypeProperty DSTU_prop2 = model.getDatatypeProperty(&quot;http://www.semanticweb.org/dell/ontologies/2023/1/untitled-ontology-20#Технічні_умови_ДСТУ_ТУ&quot;);\ninst.addProperty(DSTU_prop2, ind_analyze_res);\nWriteOntologyToFile(model);\n\nSystem.out.println(inst.getPropertyValue(DSTU_prop));\n</code></pre>\n<p>But, this option also did not work - the console displays the old value of the type &quot;DSTU......&quot; (in the code, it is designated as &quot;dstu_tu_value&quot;), but not the value of the variable &quot;ind_analyze_res&quot;.\nI get the same result if I delete via the getModel method (the very first commented line in the &quot;if&quot;).</p>\n<p>Please advise what to do.</p>\n"},{"tags":["java","syntax-error","bukkit","discord-jda"],"answers":[{"tags":[],"owner":{"account_id":11195892,"reputation":16,"user_id":8214531,"display_name":"Wave"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679903703,"creation_date":1679903703,"answer_id":75853323,"question_id":75774042,"body_markdown":"I think that the cause of the exception may be the wrong return of `getDays(String)` and `getDsId(String)`, but it is strange that the compiler didn&#39;t tell you about these invalid return assignation.\r\nFuthermore, you probably want getDays method to use BotUserdays instead of BotUser.","title":"I can&#39;t get data from my database using BotUser class + i don&#39;t know how to Iterate thru database rows","body":"<p>I think that the cause of the exception may be the wrong return of <code>getDays(String)</code> and <code>getDsId(String)</code>, but it is strange that the compiler didn't tell you about these invalid return assignation.\nFuthermore, you probably want getDays method to use BotUserdays instead of BotUser.</p>\n"}],"owner":{"account_id":28047938,"reputation":33,"user_id":21424354,"display_name":"Timas_bro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75853323,"answer_count":1,"score":0,"last_activity_date":1679903703,"creation_date":1679117696,"question_id":75774042,"body_markdown":"I am trying to retrieve days from database using my methods, but it shows me an error like this:\r\n   Incompatible types. Found: &#39;org.timuzkas.litbot2.Database.BotUser&#39;, required: &#39;java.lang.Integer&#39;\r\n\r\nDatabase.java\r\n\r\n```\r\npackage org.timuzkas.litbot2;\r\n\r\nimport java.sql.*;\r\n\r\npublic class Database {\r\n    public static final Database instatance = new Database();\r\n\r\n\r\n    private Statement statement;\r\n\r\n    private Database() {\r\n        try {\r\n            Connection connection = DriverManager.getConnection(&quot;jdbc:sqlite:bot_db.sqlite&quot;);\r\n            statement = connection.createStatement();\r\n\r\n            statement.execute(&quot;CREATE TABLE IF NOT EXISTS days(nick TEXT PRIMARY KEY, day INT)&quot;    );\r\n            statement.execute(&quot;CREATE TABLE IF NOT EXISTS discordid(nick TEXT PRIMARY KEY, discord_id TEXT)&quot;    );\r\n\r\n        } catch (SQLException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public void writeUser(String nick, String discordid) {\r\n        try {\r\n            statement.execute(&quot;DELETE FROM discordid WHERE discord_id=&quot; + discordid);\r\n            statement.execute(&quot;DELETE FROM discordid WHERE nick=&quot; + nick);\r\n            statement.execute(&quot;DELETE FROM days WHERE nick=&quot; + nick);\r\n            statement.execute(&quot;REPLACE INTO discordid VALUES(&#39;&quot; + nick + &quot;&#39;, &#39;&quot; + discordid + &quot;&#39;)&quot;);\r\n            statement.execute(&quot;REPLACE INTO days VALUES(&#39;&quot; + nick + &quot;&#39;, &#39;&quot; + 0 + &quot;&#39;)&quot;);\r\n        } catch (SQLException e) { e.printStackTrace();}\r\n\r\n    }\r\n    public BotUser getDays(String nick) {\r\n        try {\r\n            ResultSet resultSet = statement.executeQuery(\r\n                    &quot;SELECT * FROM days WHERE nick = &#39;&quot; + nick + &quot;&#39;;&quot;\r\n            );\r\n            if (resultSet.next()) {\r\n                return new BotUser(resultSet.getString(1),resultSet.getString(2));\r\n            } else {\r\n                return null;\r\n            }\r\n        } catch (SQLException e) {e.printStackTrace();}\r\n\r\n        return null;\r\n    }\r\n\r\n    public BotUser getDsId(String nick)  {\r\n        try {\r\n            ResultSet resultSet = statement.executeQuery(\r\n                    &quot;SELECT * FROM discordid WHERE nick = &#39;&quot; + nick + &quot;&#39;;&quot;\r\n            );\r\n            if (resultSet.next()) {\r\n                return new BotUser(resultSet.getString(1),resultSet.getString(2));\r\n            } else {\r\n                return null;\r\n            }\r\n        } catch (SQLException e) {e.printStackTrace();}\r\n\r\n        return null;\r\n\r\n    }\r\n    public BotUser addDay(String nick) {\r\n        try {\r\n            ResultSet resultSet = statement.executeQuery(\r\n                    &quot;SELECT * FROM discordid WHERE nick = &#39;&quot; + nick + &quot;&#39;;&quot;\r\n            );\r\n            Integer days = resultSet.getInt(2);\r\n            statement.execute(&quot;DELETE FROM days WHERE nick=&quot; + nick);\r\n            statement.execute(&quot;REPLACE INTO days VALUES(&#39;&quot; + nick + &quot;&#39;, &#39;&quot; + days + &quot;&#39;)&quot;);\r\n        } catch (SQLException e) { e.printStackTrace();}\r\n\r\n        return null;\r\n    }\r\n\r\n    public void removeUser(String nick) {\r\n        try {\r\n            statement.execute(&quot;DELETE FROM discordid WHERE nick=&quot; + nick);\r\n            statement.execute(&quot;DELETE FROM days WHERE nick=&quot; + nick);\r\n        } catch (SQLException e) { e.printStackTrace();}\r\n\r\n    }\r\n\r\n    public static class BotUser {\r\n\r\n\r\n        private final String nick;\r\n\r\n        private final String discordId;\r\n\r\n\r\n        public BotUser(String nick, String discordId) {\r\n            this.nick = nick;\r\n            this.discordId = discordId;\r\n        }\r\n        public String getNick() {\r\n            return nick;\r\n        }\r\n        public String getDiscordId() {\r\n            return discordId;\r\n        }\r\n    }\r\n\r\n    public static class BotUserdays {\r\n\r\n\r\n        private final String nick;\r\n\r\n        private final Integer days;\r\n\r\n\r\n        public BotUserdays(String nick, int days) {\r\n            this.nick = nick;\r\n            this.days = days;\r\n        }\r\n        public String getNick() {\r\n            return nick;\r\n        }\r\n        public Integer getDays() {\r\n            return days;\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nTimerHandler.java\r\n\r\n```\r\npackage org.timuzkas.litbot2;\r\n\r\nimport net.dv8tion.jda.api.EmbedBuilder;\r\nimport net.dv8tion.jda.api.entities.Message;\r\nimport net.dv8tion.jda.api.entities.User;\r\nimport net.dv8tion.jda.api.events.Event;\r\nimport net.dv8tion.jda.api.events.interaction.command.SlashCommandInteractionEvent;\r\nimport net.dv8tion.jda.api.events.message.MessageReceivedEvent;\r\nimport net.dv8tion.jda.api.hooks.ListenerAdapter;\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.OfflinePlayer;\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.event.EventHandler;\r\nimport org.bukkit.event.Listener;\r\nimport org.bukkit.event.player.PlayerJoinEvent;\r\nimport org.jetbrains.annotations.NotNull;\r\n\r\nimport java.awt.*;\r\nimport java.io.*;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport org.timuzkas.litbot2.Database;\r\n\r\nimport javax.xml.crypto.Data;\r\n\r\npublic class TimerHandler extends ListenerAdapter implements Listener {\r\n    Map&lt;String, Integer&gt; timerbase = new HashMap&lt;String, Integer&gt;();\r\n    Map&lt;String, Long&gt; timerds = new HashMap&lt;String, Long&gt;();\r\n    Map&lt;String, Integer&gt; btimerbase = new HashMap&lt;String, Integer&gt;();\r\n    Map&lt;String, Long&gt; btimerds = new HashMap&lt;String, Long&gt;();\r\n\r\n    @Override\r\n    public void onSlashCommandInteraction(@NotNull SlashCommandInteractionEvent event) {\r\n        String command = event.getName();\r\n        if (command.equals(&quot;afkc&quot;)) {\r\n            EmbedBuilder eb = new EmbedBuilder();\r\n            Integer nine = 0;\r\n            event.reply(&quot;Начинаю процесс поиска афк игроков... Это может занять до 5 минут!. Value: &quot; + btimerbase.get(&quot;timuzkas&quot;) + &quot;. Size: &quot; + timerbase.size()).setEphemeral(true).queue();\r\n            Integer end = 0;\r\n            for (Map.Entry&lt;String, Integer&gt; set :\r\n                    timerbase.entrySet()) {\r\n                try {\r\n                    Integer days = Database.instatance.getDays(set.getKey()).;\r\n                } catch (Exception e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n                Integer id = Database.instatance.getDsId(set.getKey());\r\n                Database.instatance.addDay(set.getKey());\r\n                if (Days == 9) {\r\n\r\n                }\r\n            }\r\n            eb.setTitle(&quot;AFK-SORTER REPORT | Litbot&quot;);\r\n            eb.setDescription(&quot;Капитан! Мы провели поиск и поняли что:\\n  Столько людей будут кикнуты завтра: &quot; + nine + &quot;.\\n  Столько людей было кикнуто сегодня: &quot; + end + &quot;.\\n Все они были оповещены об этом!&quot;);\r\n            eb.setColor(new Color(11, 252, 3));\r\n            eb.setFooter(&quot;litbot logger v0.7&quot;);\r\n            event.getChannel().sendMessageEmbeds(eb.build()).queue();\r\n        }\r\n    }\r\n\r\n    public String add(String user, Integer days, Long discorduserid) {\r\n        Database.instatance.writeUser(user, String.valueOf(discorduserid));\r\n        timerbase.put(user, 0);\r\n        timerds.put(user, discorduserid);\r\n        return null;\r\n    }\r\n    public Integer gett() {\r\n        return timerbase.get(&quot;timuzkas&quot;);\r\n    }\r\n\r\n    @EventHandler\r\n    public void onPlayerJoin(PlayerJoinEvent evt) {\r\n\r\n    }\r\n}\r\n```\r\nWhat I do wrong?\r\n\r\n\r\nI am trying to get days value from database,  but i can&#39;t. I also using HashMap because i don&#39;t know how to use for cycle with database rows. I am using Sqlite JDBC.\r\n\r\nAlso JDA and PaperSpigot API","title":"I can&#39;t get data from my database using BotUser class + i don&#39;t know how to Iterate thru database rows","body":"<p>I am trying to retrieve days from database using my methods, but it shows me an error like this:\nIncompatible types. Found: 'org.timuzkas.litbot2.Database.BotUser', required: 'java.lang.Integer'</p>\n<p>Database.java</p>\n<pre><code>package org.timuzkas.litbot2;\n\nimport java.sql.*;\n\npublic class Database {\n    public static final Database instatance = new Database();\n\n\n    private Statement statement;\n\n    private Database() {\n        try {\n            Connection connection = DriverManager.getConnection(&quot;jdbc:sqlite:bot_db.sqlite&quot;);\n            statement = connection.createStatement();\n\n            statement.execute(&quot;CREATE TABLE IF NOT EXISTS days(nick TEXT PRIMARY KEY, day INT)&quot;    );\n            statement.execute(&quot;CREATE TABLE IF NOT EXISTS discordid(nick TEXT PRIMARY KEY, discord_id TEXT)&quot;    );\n\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public void writeUser(String nick, String discordid) {\n        try {\n            statement.execute(&quot;DELETE FROM discordid WHERE discord_id=&quot; + discordid);\n            statement.execute(&quot;DELETE FROM discordid WHERE nick=&quot; + nick);\n            statement.execute(&quot;DELETE FROM days WHERE nick=&quot; + nick);\n            statement.execute(&quot;REPLACE INTO discordid VALUES('&quot; + nick + &quot;', '&quot; + discordid + &quot;')&quot;);\n            statement.execute(&quot;REPLACE INTO days VALUES('&quot; + nick + &quot;', '&quot; + 0 + &quot;')&quot;);\n        } catch (SQLException e) { e.printStackTrace();}\n\n    }\n    public BotUser getDays(String nick) {\n        try {\n            ResultSet resultSet = statement.executeQuery(\n                    &quot;SELECT * FROM days WHERE nick = '&quot; + nick + &quot;';&quot;\n            );\n            if (resultSet.next()) {\n                return new BotUser(resultSet.getString(1),resultSet.getString(2));\n            } else {\n                return null;\n            }\n        } catch (SQLException e) {e.printStackTrace();}\n\n        return null;\n    }\n\n    public BotUser getDsId(String nick)  {\n        try {\n            ResultSet resultSet = statement.executeQuery(\n                    &quot;SELECT * FROM discordid WHERE nick = '&quot; + nick + &quot;';&quot;\n            );\n            if (resultSet.next()) {\n                return new BotUser(resultSet.getString(1),resultSet.getString(2));\n            } else {\n                return null;\n            }\n        } catch (SQLException e) {e.printStackTrace();}\n\n        return null;\n\n    }\n    public BotUser addDay(String nick) {\n        try {\n            ResultSet resultSet = statement.executeQuery(\n                    &quot;SELECT * FROM discordid WHERE nick = '&quot; + nick + &quot;';&quot;\n            );\n            Integer days = resultSet.getInt(2);\n            statement.execute(&quot;DELETE FROM days WHERE nick=&quot; + nick);\n            statement.execute(&quot;REPLACE INTO days VALUES('&quot; + nick + &quot;', '&quot; + days + &quot;')&quot;);\n        } catch (SQLException e) { e.printStackTrace();}\n\n        return null;\n    }\n\n    public void removeUser(String nick) {\n        try {\n            statement.execute(&quot;DELETE FROM discordid WHERE nick=&quot; + nick);\n            statement.execute(&quot;DELETE FROM days WHERE nick=&quot; + nick);\n        } catch (SQLException e) { e.printStackTrace();}\n\n    }\n\n    public static class BotUser {\n\n\n        private final String nick;\n\n        private final String discordId;\n\n\n        public BotUser(String nick, String discordId) {\n            this.nick = nick;\n            this.discordId = discordId;\n        }\n        public String getNick() {\n            return nick;\n        }\n        public String getDiscordId() {\n            return discordId;\n        }\n    }\n\n    public static class BotUserdays {\n\n\n        private final String nick;\n\n        private final Integer days;\n\n\n        public BotUserdays(String nick, int days) {\n            this.nick = nick;\n            this.days = days;\n        }\n        public String getNick() {\n            return nick;\n        }\n        public Integer getDays() {\n            return days;\n        }\n    }\n}\n\n</code></pre>\n<p>TimerHandler.java</p>\n<pre><code>package org.timuzkas.litbot2;\n\nimport net.dv8tion.jda.api.EmbedBuilder;\nimport net.dv8tion.jda.api.entities.Message;\nimport net.dv8tion.jda.api.entities.User;\nimport net.dv8tion.jda.api.events.Event;\nimport net.dv8tion.jda.api.events.interaction.command.SlashCommandInteractionEvent;\nimport net.dv8tion.jda.api.events.message.MessageReceivedEvent;\nimport net.dv8tion.jda.api.hooks.ListenerAdapter;\nimport org.bukkit.Bukkit;\nimport org.bukkit.OfflinePlayer;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.player.PlayerJoinEvent;\nimport org.jetbrains.annotations.NotNull;\n\nimport java.awt.*;\nimport java.io.*;\nimport java.util.HashMap;\nimport java.util.Map;\nimport org.timuzkas.litbot2.Database;\n\nimport javax.xml.crypto.Data;\n\npublic class TimerHandler extends ListenerAdapter implements Listener {\n    Map&lt;String, Integer&gt; timerbase = new HashMap&lt;String, Integer&gt;();\n    Map&lt;String, Long&gt; timerds = new HashMap&lt;String, Long&gt;();\n    Map&lt;String, Integer&gt; btimerbase = new HashMap&lt;String, Integer&gt;();\n    Map&lt;String, Long&gt; btimerds = new HashMap&lt;String, Long&gt;();\n\n    @Override\n    public void onSlashCommandInteraction(@NotNull SlashCommandInteractionEvent event) {\n        String command = event.getName();\n        if (command.equals(&quot;afkc&quot;)) {\n            EmbedBuilder eb = new EmbedBuilder();\n            Integer nine = 0;\n            event.reply(&quot;Начинаю процесс поиска афк игроков... Это может занять до 5 минут!. Value: &quot; + btimerbase.get(&quot;timuzkas&quot;) + &quot;. Size: &quot; + timerbase.size()).setEphemeral(true).queue();\n            Integer end = 0;\n            for (Map.Entry&lt;String, Integer&gt; set :\n                    timerbase.entrySet()) {\n                try {\n                    Integer days = Database.instatance.getDays(set.getKey()).;\n                } catch (Exception e) {\n                    throw new RuntimeException(e);\n                }\n                Integer id = Database.instatance.getDsId(set.getKey());\n                Database.instatance.addDay(set.getKey());\n                if (Days == 9) {\n\n                }\n            }\n            eb.setTitle(&quot;AFK-SORTER REPORT | Litbot&quot;);\n            eb.setDescription(&quot;Капитан! Мы провели поиск и поняли что:\\n  Столько людей будут кикнуты завтра: &quot; + nine + &quot;.\\n  Столько людей было кикнуто сегодня: &quot; + end + &quot;.\\n Все они были оповещены об этом!&quot;);\n            eb.setColor(new Color(11, 252, 3));\n            eb.setFooter(&quot;litbot logger v0.7&quot;);\n            event.getChannel().sendMessageEmbeds(eb.build()).queue();\n        }\n    }\n\n    public String add(String user, Integer days, Long discorduserid) {\n        Database.instatance.writeUser(user, String.valueOf(discorduserid));\n        timerbase.put(user, 0);\n        timerds.put(user, discorduserid);\n        return null;\n    }\n    public Integer gett() {\n        return timerbase.get(&quot;timuzkas&quot;);\n    }\n\n    @EventHandler\n    public void onPlayerJoin(PlayerJoinEvent evt) {\n\n    }\n}\n</code></pre>\n<p>What I do wrong?</p>\n<p>I am trying to get days value from database,  but i can't. I also using HashMap because i don't know how to use for cycle with database rows. I am using Sqlite JDBC.</p>\n<p>Also JDA and PaperSpigot API</p>\n"},{"tags":["java","itext"],"comments":[{"owner":{"account_id":1707578,"reputation":868,"user_id":1566339,"display_name":"Andr&#233; Lemos"},"score":1,"creation_date":1679905309,"post_id":75853306,"comment_id":133798062,"body_markdown":"have you tried this [similar question/answer](https://stackoverflow.com/questions/28753918/digital-signatures-using-itext-5-5-5)?","body":"have you tried this <a href=\"https://stackoverflow.com/questions/28753918/digital-signatures-using-itext-5-5-5\">similar question/answer</a>?"}],"owner":{"account_id":11887997,"reputation":27,"user_id":8699776,"accept_rate":60,"display_name":"hieulnm157"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679903560,"creation_date":1679903560,"question_id":75853306,"body_markdown":"I was update itextpdf from 5.2.1 to 5.5.13.3 to fix the vulnerabilities but function setCrypto not found. What function is it replaced by?\r\n\r\n    PdfSignatureAppearance sap = stamper.getSignatureAppearance();\r\n    sap.setCrypto(privateKey, certificateChain, null, PdfSignatureAppearance.SELF_SIGNED); // this function remove on itextpdf 5.5.13.3\r\n\r\n//docs on 5.2.1\r\n\r\n    /**\r\n     * Sets the cryptographic parameters.\r\n     * @param privKey the private key\r\n     * @param certChain the certificate chain\r\n     * @param crlList the certificate revocation list. It may be &lt;CODE&gt;null&lt;/CODE&gt;\r\n     * @param filter the cryptographic filter type. It can be SELF_SIGNED, VERISIGN_SIGNED or WINCER_SIGNED\r\n     */\r\n    public void setCrypto(PrivateKey privKey, Certificate[] certChain, CRL[] crlList, PdfName filter) {\r\n        this.privKey = privKey;\r\n        this.certChain = certChain;\r\n        this.crlList = crlList;\r\n        this.filter = filter;\r\n    }\r\n","title":"setCrypto not found on itextpdf 5.5.13.3","body":"<p>I was update itextpdf from 5.2.1 to 5.5.13.3 to fix the vulnerabilities but function setCrypto not found. What function is it replaced by?</p>\n<pre><code>PdfSignatureAppearance sap = stamper.getSignatureAppearance();\nsap.setCrypto(privateKey, certificateChain, null, PdfSignatureAppearance.SELF_SIGNED); // this function remove on itextpdf 5.5.13.3\n</code></pre>\n<p>//docs on 5.2.1</p>\n<pre><code>/**\n * Sets the cryptographic parameters.\n * @param privKey the private key\n * @param certChain the certificate chain\n * @param crlList the certificate revocation list. It may be &lt;CODE&gt;null&lt;/CODE&gt;\n * @param filter the cryptographic filter type. It can be SELF_SIGNED, VERISIGN_SIGNED or WINCER_SIGNED\n */\npublic void setCrypto(PrivateKey privKey, Certificate[] certChain, CRL[] crlList, PdfName filter) {\n    this.privKey = privKey;\n    this.certChain = certChain;\n    this.crlList = crlList;\n    this.filter = filter;\n}\n</code></pre>\n"},{"tags":["java","stream","java-stream"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":2,"creation_date":1679849908,"post_id":75849214,"comment_id":133790627,"body_markdown":"What values shall the key in the map have? Did you try anything yourself? What approach would you take if you would use &quot;traditional&quot; loops?","body":"What values shall the key in the map have? Did you try anything yourself? What approach would you take if you would use &quot;traditional&quot; loops?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1679851269,"post_id":75849214,"comment_id":133790873,"body_markdown":"https://mkyong.com/java8/java-8-collectors-groupingby-and-mapping-example/","body":"<a href=\"https://mkyong.com/java8/java-8-collectors-groupingby-and-mapping-example/\" rel=\"nofollow noreferrer\">mkyong.com/java8/&hellip;</a>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1679854581,"post_id":75849214,"comment_id":133791399,"body_markdown":"What exactly is `@Embeddable`?","body":"What exactly is <code>@Embeddable</code>?"},{"owner":{"account_id":5776444,"reputation":55,"user_id":4558381,"display_name":"Dev Dev"},"score":0,"creation_date":1679860543,"post_id":75849214,"comment_id":133792371,"body_markdown":"@cyberbrain Updated question for key, it is id of embeddable class","body":"@cyberbrain Updated question for key, it is id of embeddable class"},{"owner":{"account_id":5776444,"reputation":55,"user_id":4558381,"display_name":"Dev Dev"},"score":0,"creation_date":1679860636,"post_id":75849214,"comment_id":133792388,"body_markdown":"@BasilBourque definition of emeddable https://stackoverflow.com/questions/21143707/what-is-difference-between-entity-and-embeddable","body":"@BasilBourque definition of emeddable <a href=\"https://stackoverflow.com/questions/21143707/what-is-difference-between-entity-and-embeddable\" title=\"what is difference between entity and embeddable\">stackoverflow.com/questions/21143707/&hellip;</a>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1679861725,"post_id":75849214,"comment_id":133792554,"body_markdown":"Add tags for the frameworks in question.","body":"Add tags for the frameworks in question."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":2,"creation_date":1679866871,"post_id":75849214,"comment_id":133793294,"body_markdown":"The annotations are really superfluous to the question. I would take them out of the example.","body":"The annotations are really superfluous to the question. I would take them out of the example."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1679905788,"post_id":75849214,"comment_id":133798168,"body_markdown":"I think that you want to process data in memory that should rather be processed by the database. Try to write a query that provides you with that data, especially when you have to process multiple events this will probably lead to better performance and save you some Java heap space.","body":"I think that you want to process data in memory that should rather be processed by the database. Try to write a query that provides you with that data, especially when you have to process multiple events this will probably lead to better performance and save you some Java heap space."}],"answers":[{"tags":[],"owner":{"account_id":27868102,"reputation":34,"user_id":21279235,"display_name":"LQF-developer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679903556,"creation_date":1679903556,"answer_id":75853305,"question_id":75849214,"body_markdown":"       \r\nI guess your purpose is to sort  `List&lt;Event&gt; events` by EventId.id so you can use  `Collectors.groupingBy` like this：\r\n\r\n \r\n    Map&lt;Long, List&lt;Event&gt;&gt; collect = events.stream().collect(Collectors.groupingBy(Event -&gt; Event.getId().getId()));\r\n","title":"Stream over embeddable java class","body":"<p>I guess your purpose is to sort  <code>List&lt;Event&gt; events</code> by EventId.id so you can use  <code>Collectors.groupingBy</code> like this：</p>\n<pre><code>Map&lt;Long, List&lt;Event&gt;&gt; collect = events.stream().collect(Collectors.groupingBy(Event -&gt; Event.getId().getId()));\n</code></pre>\n"}],"owner":{"account_id":5776444,"reputation":55,"user_id":4558381,"display_name":"Dev Dev"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":75853305,"answer_count":1,"score":-2,"last_activity_date":1679903556,"creation_date":1679849559,"question_id":75849214,"body_markdown":"I have an embeddable class with entity\r\n```\r\n@Embeddable\r\npublic class EventId implements Serializable {\r\n    private Long id;\r\n    private Date updateDateTime;\r\n}\r\n\r\n@Entity\r\npublic class Event {\r\n    @EmbeddedId\r\n    private EventId id;\r\n    private String name;\r\n\r\n}\r\n```\r\n\r\nHow to get below map of EventId.id(Long),Event from steam for given event list\r\n```\r\nList&lt;Event&gt; events;\r\nMap&lt;Long, Event&gt; eventMap = events.stream... ?\r\n```","title":"Stream over embeddable java class","body":"<p>I have an embeddable class with entity</p>\n<pre><code>@Embeddable\npublic class EventId implements Serializable {\n    private Long id;\n    private Date updateDateTime;\n}\n\n@Entity\npublic class Event {\n    @EmbeddedId\n    private EventId id;\n    private String name;\n\n}\n</code></pre>\n<p>How to get below map of EventId.id(Long),Event from steam for given event list</p>\n<pre><code>List&lt;Event&gt; events;\nMap&lt;Long, Event&gt; eventMap = events.stream... ?\n</code></pre>\n"},{"tags":["java","spring","postgresql","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":27896125,"reputation":138,"user_id":21301377,"display_name":"Anonymus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679903215,"creation_date":1679903215,"answer_id":75853252,"question_id":75852783,"body_markdown":"I solved similar problems and here is my solution\r\nI used **Scheduling Tasks** \r\n\r\nAfter it automatically runs the function of you","title":"Update a field in PostgreSQL and generate an event from that to be caught in a Java Application","body":"<p>I solved similar problems and here is my solution\nI used <strong>Scheduling Tasks</strong></p>\n<p>After it automatically runs the function of you</p>\n"}],"owner":{"account_id":20519214,"reputation":69,"user_id":15059204,"display_name":"Eduardo Lopes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679903215,"creation_date":1679899430,"question_id":75852783,"body_markdown":"I&#39;m developing an app about a vote section and need your help.\r\nThis voting system has a table called Section to control the vote sections (obviously).\r\nThe table has some fields but 3 are important for this case: Start_date, duration, and status.\r\nThe start_date is defined when creating the section as long as its duration.\r\nThe status is setted based on the start_date and duration: Here&#39;s the list of possible status:\r\n1: WAITING_TO_START: When the actual date is before the start_date\r\n2: IN_PROGRESS: When the actual date is AFTER the start_date and BEFORE (start_date + duration).\r\n3: FINISHED: When the actual date is AFTER the start_date and AFTER (start_date + duration).\r\n\r\nAll said, here&#39;s the problem:\r\nI have no idea how to automatically update the status on postgresSQL for when the now date gets after the start_date and shot an event to my Spring app that would notify the clients.\r\n\r\nAny help would be awesome.\r\n\r\nHere&#39;s my table section and column definitions:\r\n[![enter image description here][1]][1]\r\n\r\nHere&#39;s my section MODEL and REPOSITORY, respectively\r\n\r\n```\r\npackage com.testdbserver.desafiovotacao.data.models;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonBackReference;\r\nimport com.testdbserver.desafiovotacao.data.enums.SectionStatusEnum;\r\nimport jakarta.persistence.*;\r\nimport jakarta.validation.constraints.FutureOrPresent;\r\nimport lombok.*;\r\nimport java.util.Date;\r\nimport java.util.UUID;\r\n\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter\r\n@Builder\r\n@Entity\r\n@Table(name=&quot;section&quot;)\r\npublic class Section {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.UUID)\r\n    private UUID id;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name=&quot;pauta_id&quot;)\r\n    private Pauta pauta;\r\n\r\n    @Column(name=&quot;status&quot;, nullable = false)\r\n    @Enumerated(EnumType.STRING)\r\n    private SectionStatusEnum status;\r\n\r\n    @Column(name=&quot;created_at&quot;, nullable = false)\r\n    @Temporal(TemporalType.TIMESTAMP)\r\n    private Date createdAt;\r\n\r\n    @FutureOrPresent\r\n    @Column(name=&quot;dt_start&quot;, nullable = false)\r\n    @Temporal(TemporalType.TIMESTAMP)\r\n    private Date dtStart;\r\n\r\n    @Column(name=&quot;duration&quot;, nullable = false)\r\n    private int duration;\r\n\r\n    @JsonBackReference\r\n    public Pauta getPauta() {\r\n        return pauta;\r\n    }\r\n}\r\n\r\n```\r\n\r\n```\r\npackage com.testdbserver.desafiovotacao.data.repositories;\r\n\r\nimport com.testdbserver.desafiovotacao.data.models.Section;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.data.jpa.repository.Query;\r\n\r\nimport java.util.Date;\r\nimport java.util.List;\r\nimport java.util.UUID;\r\n\r\npublic interface SectionRepository extends JpaRepository&lt;Section, UUID&gt; {\r\n    @Query(value = &quot; SELECT s FROM Section s &quot; +\r\n            &quot;         WHERE (:allowFinishedSections=false and s.status &lt;&gt; &#39;FINISHED&#39;) &quot; +\r\n            &quot;           AND s.dt_start &lt; :maxDate &quot; +\r\n            &quot;         ORDER BY s.dt_start asc&quot;, nativeQuery = true)\r\n    public List&lt;Section&gt; getAllSections(boolean allowFinishedSections, Date maxDate);\r\n}\r\n\r\n```\r\n\r\nHere&#39;s my POM.XML\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.4&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.testdbserver&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;desafio-votacao&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;desafio-votacao&lt;/name&gt;\r\n\t&lt;description&gt;Challenge project to create a vote system to a credit cooperative&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.6.15&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.11.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.11.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.11.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.0.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nAppreciate any help :)\r\n\r\n  [1]: https://i.stack.imgur.com/VxIRK.png","title":"Update a field in PostgreSQL and generate an event from that to be caught in a Java Application","body":"<p>I'm developing an app about a vote section and need your help.\nThis voting system has a table called Section to control the vote sections (obviously).\nThe table has some fields but 3 are important for this case: Start_date, duration, and status.\nThe start_date is defined when creating the section as long as its duration.\nThe status is setted based on the start_date and duration: Here's the list of possible status:\n1: WAITING_TO_START: When the actual date is before the start_date\n2: IN_PROGRESS: When the actual date is AFTER the start_date and BEFORE (start_date + duration).\n3: FINISHED: When the actual date is AFTER the start_date and AFTER (start_date + duration).</p>\n<p>All said, here's the problem:\nI have no idea how to automatically update the status on postgresSQL for when the now date gets after the start_date and shot an event to my Spring app that would notify the clients.</p>\n<p>Any help would be awesome.</p>\n<p>Here's my table section and column definitions:\n<a href=\"https://i.stack.imgur.com/VxIRK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VxIRK.png\" alt=\"enter image description here\" /></a></p>\n<p>Here's my section MODEL and REPOSITORY, respectively</p>\n<pre><code>package com.testdbserver.desafiovotacao.data.models;\n\nimport com.fasterxml.jackson.annotation.JsonBackReference;\nimport com.testdbserver.desafiovotacao.data.enums.SectionStatusEnum;\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.FutureOrPresent;\nimport lombok.*;\nimport java.util.Date;\nimport java.util.UUID;\n\n@NoArgsConstructor\n@AllArgsConstructor\n@Getter\n@Setter\n@Builder\n@Entity\n@Table(name=&quot;section&quot;)\npublic class Section {\n    @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n    private UUID id;\n\n    @ManyToOne\n    @JoinColumn(name=&quot;pauta_id&quot;)\n    private Pauta pauta;\n\n    @Column(name=&quot;status&quot;, nullable = false)\n    @Enumerated(EnumType.STRING)\n    private SectionStatusEnum status;\n\n    @Column(name=&quot;created_at&quot;, nullable = false)\n    @Temporal(TemporalType.TIMESTAMP)\n    private Date createdAt;\n\n    @FutureOrPresent\n    @Column(name=&quot;dt_start&quot;, nullable = false)\n    @Temporal(TemporalType.TIMESTAMP)\n    private Date dtStart;\n\n    @Column(name=&quot;duration&quot;, nullable = false)\n    private int duration;\n\n    @JsonBackReference\n    public Pauta getPauta() {\n        return pauta;\n    }\n}\n\n</code></pre>\n<pre><code>package com.testdbserver.desafiovotacao.data.repositories;\n\nimport com.testdbserver.desafiovotacao.data.models.Section;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\n\nimport java.util.Date;\nimport java.util.List;\nimport java.util.UUID;\n\npublic interface SectionRepository extends JpaRepository&lt;Section, UUID&gt; {\n    @Query(value = &quot; SELECT s FROM Section s &quot; +\n            &quot;         WHERE (:allowFinishedSections=false and s.status &lt;&gt; 'FINISHED') &quot; +\n            &quot;           AND s.dt_start &lt; :maxDate &quot; +\n            &quot;         ORDER BY s.dt_start asc&quot;, nativeQuery = true)\n    public List&lt;Section&gt; getAllSections(boolean allowFinishedSections, Date maxDate);\n}\n\n</code></pre>\n<p>Here's my POM.XML</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.testdbserver&lt;/groupId&gt;\n    &lt;artifactId&gt;desafio-votacao&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;desafio-votacao&lt;/name&gt;\n    &lt;description&gt;Challenge project to create a vote system to a credit cooperative&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n            &lt;version&gt;1.6.15&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;\n            &lt;version&gt;0.11.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;\n            &lt;version&gt;0.11.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;\n            &lt;version&gt;0.11.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;8.0.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>Appreciate any help :)</p>\n"},{"tags":["java","android","selinux"],"comments":[{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":1,"creation_date":1679902802,"post_id":75841621,"comment_id":133797500,"body_markdown":"That clearly shows it is trying to read from /proc/cgroups. At a guess it is trying to see if it is running inside a cgroup (the base technology for containers). You will need to disable that bit of code from the JRE or otherwise disable it through some flag.","body":"That clearly shows it is trying to read from /proc/cgroups. At a guess it is trying to see if it is running inside a cgroup (the base technology for containers). You will need to disable that bit of code from the JRE or otherwise disable it through some flag."},{"owner":{"account_id":11193816,"reputation":21,"user_id":8213233,"display_name":"benfah"},"score":0,"creation_date":1680210818,"post_id":75841621,"comment_id":133864499,"body_markdown":"Thanks, this helped a lot. I&#39;m currently looking into a project called PojavLauncher which is doing similar things, so I&#39;ll look into that.","body":"Thanks, this helped a lot. I&#39;m currently looking into a project called PojavLauncher which is doing similar things, so I&#39;ll look into that."}],"owner":{"account_id":11193816,"reputation":21,"user_id":8213233,"display_name":"benfah"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679903048,"creation_date":1679746572,"question_id":75841621,"body_markdown":"I&#39;m currently trying to get OpenJDK 17 JRE to work in my Android App. I&#39;ve used some of the code by PojavLauncher to get a better understanding of how to get Java 17 to run on Android.\r\n\r\nJava itself is able to output the version by running &quot;java -version&quot;, but when I try to read a file, say a simple Main.class where it just outputs a System.out.println, SELinux blocks a certain read action. Now my guess is that this is the read action which is supposed to read Main.class.\r\n\r\nIt could be that the answer is really obvious but I don&#39;t have any clue if the folder from where I&#39;m trying to execute the Main.class from doesn&#39;t have sufficient permissions or something.\r\n\r\nThe jre-runtime currently lies in &quot;/data/user/0/com.example.myapplication/jre-runtime&quot;, and it seems to execute just fine. &quot;Main.class&quot; lies in &quot;/data/user/0/com.example.myapplication&quot; just for testing purposes.\r\n\r\nHere is my C code (sorry that it&#39;s messy):\r\n\r\n```\r\n#include &lt;jni.h&gt;\r\n#include &lt;dlfcn.h&gt;\r\n#include &lt;stdio.h&gt;\r\n#include &lt;android/log.h&gt;\r\n#include &lt;unistd.h&gt;\r\n#include &lt;pthread.h&gt;\r\n#include &lt;stdlib.h&gt;\r\n#include &lt;string.h&gt;\r\n\r\n#include &quot;jre.h&quot;\r\n#include &quot;log.h&quot;\r\n\r\n#define FULL_VERSION &quot;1.8.0-internal&quot;\r\n#define DOT_VERSION &quot;1.8&quot;\r\n\r\nstatic const char** const_jargs = NULL;\r\nstatic const char** const_appclasspath = NULL;\r\nstatic const jboolean const_javaw = JNI_FALSE;\r\nstatic const jboolean const_cpwildcard = JNI_TRUE;\r\nstatic const jint const_ergo_class = 0; // DEFAULT_POLICY\r\n\r\nstatic int pfd[2];\r\nstatic pthread_t thr;\r\nstatic const char* tag = &quot;javaexec&quot;;\r\n\r\ntypedef jint JLI_Launch_func(int argc, char ** argv, /* main argc, argc */\r\n        int jargc, const char** jargv,          /* java args */\r\n        int appclassc, const char** appclassv,  /* app classpath */\r\n        const char* fullversion,                /* full version defined */\r\n        const char* dotversion,                 /* dot version defined */\r\n        const char* pname,                      /* program name */\r\n        const char* lname,                      /* launcher name */\r\n        jboolean javaargs,                      /* JAVA_ARGS */\r\n        jboolean cpwildcard,                    /* classpath wildcard*/\r\n        jboolean javaw,                         /* windows-only javaw */\r\n        jint ergo                               /* ergonomics class policy */\r\n);\r\ntypedef void (*android_update_LD_LIBRARY_PATH_t)(char*);\r\n\r\nJNIEXPORT void JNICALL Java_com_example_myapplication_util_JREUtils_setLdLibraryPath(JNIEnv *env, jclass clazz, jstring ldLibraryPath) {\r\n\t// jclass exception_cls = (*env)-&gt;FindClass(env, &quot;java/lang/UnsatisfiedLinkError&quot;);\r\n\r\n\tandroid_update_LD_LIBRARY_PATH_t android_update_LD_LIBRARY_PATH;\r\n\r\n\tvoid *libdl_handle = dlopen(&quot;libdl.so&quot;, RTLD_LAZY);\r\n\tvoid *updateLdLibPath = dlsym(libdl_handle, &quot;android_update_LD_LIBRARY_PATH&quot;);\r\n\tif (updateLdLibPath == NULL) {\r\n\t\tupdateLdLibPath = dlsym(libdl_handle, &quot;__loader_android_update_LD_LIBRARY_PATH&quot;);\r\n\t\tif (updateLdLibPath == NULL) {\r\n\t\t\tchar *dl_error_c = dlerror();\r\n\t\t\tLOGE(&quot;Error getting symbol android_update_LD_LIBRARY_PATH: %s&quot;, dl_error_c);\r\n\t\t\t// (*env)-&gt;ThrowNew(env, exception_cls, dl_error_c);\r\n\t\t}\r\n\t}\r\n\r\n\tandroid_update_LD_LIBRARY_PATH = (android_update_LD_LIBRARY_PATH_t) updateLdLibPath;\r\n\tconst char* ldLibPathUtf = (*env)-&gt;GetStringUTFChars(env, ldLibraryPath, 0);\r\n\tandroid_update_LD_LIBRARY_PATH(ldLibPathUtf);\r\n\t(*env)-&gt;ReleaseStringUTFChars(env, ldLibraryPath, ldLibPathUtf);\r\n}\r\n\r\nint (*JVM_handle_linux_signal)(int signo, siginfo_t* siginfo, void* ucontext, int abort_if_unrecognized);\r\n\r\nvoid free_char_array(JNIEnv *env, jobjectArray jstringArray, const char **charArray) {\r\n\tint num_rows = (*env)-&gt;GetArrayLength(env, jstringArray);\r\n\tjstring row;\r\n\r\n\tfor (int i = 0; i &lt; num_rows; i++) {\r\n\t\trow = (jstring) (*env)-&gt;GetObjectArrayElement(env, jstringArray, i);\r\n\t\t(*env)-&gt;ReleaseStringUTFChars(env, row, charArray[i]);\r\n\t}\r\n}\r\n\r\nint start_logger()\r\n{\r\n\r\n    /* make stdout line-buffered and stderr unbuffered */\r\n    setvbuf(stdout, 0, _IOLBF, 0);\r\n    setvbuf(stderr, 0, _IONBF, 0);\r\n\r\n    /* create the pipe and redirect stdout and stderr */\r\n    pipe(pfd);\r\n    dup2(pfd[1], 1);\r\n    dup2(pfd[1], 2);\r\n\r\n    /* spawn the logging thread */\r\n    if(pthread_create(&amp;thr, 0, thread_func, 0) == -1)\r\n        return -1;\r\n    pthread_detach(thr);\r\n    return 0;\r\n}\r\n\r\nstatic void *thread_func(void* t)\r\n{\r\n    ssize_t rdsz;\r\n    char buf[128];\r\n    while((rdsz = read(pfd[0], buf, sizeof buf - 1)) &gt; 0) {\r\n        if(buf[rdsz - 1] == &#39;\\n&#39;) --rdsz;\r\n        buf[rdsz] = 0;  /* add null-terminator */\r\n        __android_log_write(ANDROID_LOG_INFO, tag, buf);\r\n    }\r\n    return 0;\r\n}\r\n\r\nchar** convert_to_char_array(JNIEnv *env, jobjectArray jstringArray) {\r\n\tint num_rows = (*env)-&gt;GetArrayLength(env, jstringArray);\r\n\tchar **cArray = (char **) malloc(num_rows * sizeof(char*));\r\n\tjstring row;\r\n\r\n\tfor (int i = 0; i &lt; num_rows; i++) {\r\n\t\trow = (jstring) (*env)-&gt;GetObjectArrayElement(env, jstringArray, i);\r\n\t\tcArray[i] = (char*)(*env)-&gt;GetStringUTFChars(env, row, 0);\r\n    }\r\n\r\n    return cArray;\r\n}\r\n\r\njint JNI_OnLoad(JavaVM *vm, void *reserved) {\r\n    __android_log_write(ANDROID_LOG_INFO, tag, &quot;OnLoad!&quot;);\r\n\r\n    start_logger();\r\n    return JNI_VERSION_1_4;\r\n}\r\n\r\nstatic jint launchJVM(int margc, char** margv) {\r\n   void* libjli = dlopen(&quot;libjli.so&quot;, RTLD_LAZY | RTLD_GLOBAL);\r\n\r\n   // Boardwalk: silence\r\n   // LOGD(&quot;JLI lib = %x&quot;, (int)libjli);\r\n   if (NULL == libjli) {\r\n       LOGE(&quot;JLI lib = NULL: %s&quot;, dlerror());\r\n       return -1;\r\n   }\r\n   LOGD(&quot;Found JLI lib&quot;);\r\n\r\n   JLI_Launch_func *pJLI_Launch =\r\n          (JLI_Launch_func *)dlsym(libjli, &quot;JLI_Launch&quot;);\r\n    // Boardwalk: silence\r\n    // LOGD(&quot;JLI_Launch = 0x%x&quot;, *(int*)&amp;pJLI_Launch);\r\n\r\n   if (NULL == pJLI_Launch) {\r\n       LOGE(&quot;JLI_Launch = NULL&quot;);\r\n       return -1;\r\n   }\r\n\r\n   LOGD(&quot;Calling JLI_Launch&quot;);\r\n\r\n   return pJLI_Launch(margc, margv,\r\n                   0, NULL, // sizeof(const_jargs) / sizeof(char *), const_jargs,\r\n                   0, NULL, // sizeof(const_appclasspath) / sizeof(char *), const_appclasspath,\r\n                   FULL_VERSION,\r\n                   DOT_VERSION,\r\n                   *margv, // (const_progname != NULL) ? const_progname : *margv,\r\n                   *margv, // (const_launcher != NULL) ? const_launcher : *margv,\r\n                   (const_jargs != NULL) ? JNI_TRUE : JNI_FALSE,\r\n                   const_cpwildcard, const_javaw, const_ergo_class);\r\n/*\r\n   return pJLI_Launch(argc, argv,\r\n       0, NULL, 0, NULL, FULL_VERSION,\r\n       DOT_VERSION, *margv, *margv, // &quot;java&quot;, &quot;openjdk&quot;,\r\n       JNI_FALSE, JNI_TRUE, JNI_FALSE, 0);\r\n*/\r\n}\r\n\r\nJNIEXPORT jint JNICALL Java_com_example_myapplication_util_JREUtils_loadJVM(JNIEnv *env, jclass clazz, jobjectArray argsArray) {\r\n    /*#ifdef TRY_SIG2JVM\r\n    void* libjvm = dlopen(&quot;libjvm.so&quot;, RTLD_LAZY | RTLD_GLOBAL);\r\n    if (NULL == libjvm) {\r\n      LOGE(&quot;JVM lib = NULL: %s&quot;, dlerror());\r\n      return -1;\r\n    }\r\n    JVM_handle_linux_signal = dlsym(libjvm, &quot;JVM_handle_linux_signal&quot;);\r\n    #endif\r\n\r\n    jint res = 0;\r\n    // int i;\r\n    //Prepare the signal trapper\r\n    struct sigaction catcher;\r\n    memset(&amp;catcher,0,sizeof(sigaction));\r\n    catcher.sa_sigaction = android_sigaction;\r\n    catcher.sa_flags = SA_SIGINFO|SA_RESTART;\r\n    // SA_RESETHAND;\r\n    #define CATCHSIG(X) sigaction(X, &amp;catcher, &amp;old_sa[X])\r\n    CATCHSIG(SIGILL);\r\n    //CATCHSIG(SIGABRT);\r\n    CATCHSIG(SIGBUS);\r\n    CATCHSIG(SIGFPE);\r\n    #ifdef TRY_SIG2JVM\r\n    CATCHSIG(SIGSEGV);\r\n    #endif\r\n    CATCHSIG(SIGSTKFLT);\r\n    CATCHSIG(SIGPIPE);\r\n    CATCHSIG(SIGXFSZ);\r\n    //Signal trapper ready*/\r\n\r\n    // Save dalvik JNIEnv pointer for JVM launch thread\r\n    //pojav_environ-&gt;dalvikJNIEnvPtr_ANDROID = env;\r\n    jint res = 0;\r\n\r\n    if (argsArray == NULL) {\r\n        LOGE(&quot;Args array null, returning&quot;);\r\n        //handle error\r\n        return 0;\r\n    }\r\n\r\n    int argc = (*env)-&gt;GetArrayLength(env, argsArray);\r\n    char **argv = convert_to_char_array(env, argsArray);\r\n\r\n    LOGD(&quot;Done processing args&quot;);\r\n\r\n    res = launchJVM(argc, argv);\r\n\r\n    LOGD(&quot;Going to free args&quot;);\r\n    free_char_array(env, argsArray, argv);\r\n\r\n    LOGD(&quot;Free done&quot;);\r\n\r\n    return res;\r\n}\r\n\r\nJNIEXPORT jboolean JNICALL Java_com_example_myapplication_util_JREUtils_dlopen(JNIEnv *env, jclass clazz, jstring name) {\r\n\tconst char *nameUtf = (*env)-&gt;GetStringUTFChars(env, name, 0);\r\n\tvoid* handle = dlopen(nameUtf, RTLD_GLOBAL | RTLD_LAZY);\r\n\tif (!handle) {\r\n\t\tLOGE(&quot;dlopen %s failed: %s&quot;, nameUtf, dlerror());\r\n\t} else {\r\n\t\tLOGD(&quot;dlopen %s success&quot;, nameUtf);\r\n\t}\r\n\t(*env)-&gt;ReleaseStringUTFChars(env, name, nameUtf);\r\n\treturn handle != NULL;\r\n}\r\n```\r\n\r\nBasically, the app loads the needed libraries for java with the JNI dlopen method in initJVM(). Then it&#39;ll call the JNI loadJVM method.\r\n\r\n\r\n```\r\npublic static void initJVM() {\r\n\r\n        String mainPath = &quot;/data/user/0/com.example.myapplication/jre-runtime/lib/&quot;;\r\n\r\n        dlopen(mainPath + &quot;libjli.so&quot;);\r\n        if(!dlopen(&quot;libjvm.so&quot;)){\r\n            Log.w(&quot;DynamicLoader&quot;,&quot;Failed to load with no path, trying with full path&quot;);\r\n            dlopen(mainPath + &quot;server/libjvm.so&quot;);\r\n        }\r\n        dlopen(mainPath + &quot;libverify.so&quot;);\r\n        dlopen(mainPath + &quot;libjava.so&quot;);\r\n        dlopen(mainPath + &quot;libnet.so&quot;);\r\n        dlopen(mainPath + &quot;libnio.so&quot;);\r\n        dlopen(mainPath + &quot;libawt.so&quot;);\r\n        //setLdLibraryPath(mainPath);\r\n    }\r\n```\r\n\r\nLastly, here is the call to loadJVM from inside Java:\r\n`JREUtils.loadJVM(&quot;java&quot;, &quot;-Xmx512M&quot;, &quot;-Xms512M&quot;, &quot;/data/user/0/com.example.myapplication/cache/Main.class&quot;);`\r\n\r\n\r\nWhen I try to execute it with the setup above, I get a &quot;avc: denied&quot; error.\r\n\r\nThe specific error:\r\n`W/e.myapplication: type=1400 audit(0.0:10408): avc: denied { read } for name=&quot;cgroups&quot; dev=&quot;proc&quot; ino=4026531857 scontext=u:r:untrusted_app:s0:c162,c256,c512,c768 tcontext=u:object_r:proc:s0 tclass=file permissive=0 app=com.example.myapplication\r\n`","title":"Android App Development: SELinux blocks permission to read file","body":"<p>I'm currently trying to get OpenJDK 17 JRE to work in my Android App. I've used some of the code by PojavLauncher to get a better understanding of how to get Java 17 to run on Android.</p>\n<p>Java itself is able to output the version by running &quot;java -version&quot;, but when I try to read a file, say a simple Main.class where it just outputs a System.out.println, SELinux blocks a certain read action. Now my guess is that this is the read action which is supposed to read Main.class.</p>\n<p>It could be that the answer is really obvious but I don't have any clue if the folder from where I'm trying to execute the Main.class from doesn't have sufficient permissions or something.</p>\n<p>The jre-runtime currently lies in &quot;/data/user/0/com.example.myapplication/jre-runtime&quot;, and it seems to execute just fine. &quot;Main.class&quot; lies in &quot;/data/user/0/com.example.myapplication&quot; just for testing purposes.</p>\n<p>Here is my C code (sorry that it's messy):</p>\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;dlfcn.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;android/log.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#include &quot;jre.h&quot;\n#include &quot;log.h&quot;\n\n#define FULL_VERSION &quot;1.8.0-internal&quot;\n#define DOT_VERSION &quot;1.8&quot;\n\nstatic const char** const_jargs = NULL;\nstatic const char** const_appclasspath = NULL;\nstatic const jboolean const_javaw = JNI_FALSE;\nstatic const jboolean const_cpwildcard = JNI_TRUE;\nstatic const jint const_ergo_class = 0; // DEFAULT_POLICY\n\nstatic int pfd[2];\nstatic pthread_t thr;\nstatic const char* tag = &quot;javaexec&quot;;\n\ntypedef jint JLI_Launch_func(int argc, char ** argv, /* main argc, argc */\n        int jargc, const char** jargv,          /* java args */\n        int appclassc, const char** appclassv,  /* app classpath */\n        const char* fullversion,                /* full version defined */\n        const char* dotversion,                 /* dot version defined */\n        const char* pname,                      /* program name */\n        const char* lname,                      /* launcher name */\n        jboolean javaargs,                      /* JAVA_ARGS */\n        jboolean cpwildcard,                    /* classpath wildcard*/\n        jboolean javaw,                         /* windows-only javaw */\n        jint ergo                               /* ergonomics class policy */\n);\ntypedef void (*android_update_LD_LIBRARY_PATH_t)(char*);\n\nJNIEXPORT void JNICALL Java_com_example_myapplication_util_JREUtils_setLdLibraryPath(JNIEnv *env, jclass clazz, jstring ldLibraryPath) {\n    // jclass exception_cls = (*env)-&gt;FindClass(env, &quot;java/lang/UnsatisfiedLinkError&quot;);\n\n    android_update_LD_LIBRARY_PATH_t android_update_LD_LIBRARY_PATH;\n\n    void *libdl_handle = dlopen(&quot;libdl.so&quot;, RTLD_LAZY);\n    void *updateLdLibPath = dlsym(libdl_handle, &quot;android_update_LD_LIBRARY_PATH&quot;);\n    if (updateLdLibPath == NULL) {\n        updateLdLibPath = dlsym(libdl_handle, &quot;__loader_android_update_LD_LIBRARY_PATH&quot;);\n        if (updateLdLibPath == NULL) {\n            char *dl_error_c = dlerror();\n            LOGE(&quot;Error getting symbol android_update_LD_LIBRARY_PATH: %s&quot;, dl_error_c);\n            // (*env)-&gt;ThrowNew(env, exception_cls, dl_error_c);\n        }\n    }\n\n    android_update_LD_LIBRARY_PATH = (android_update_LD_LIBRARY_PATH_t) updateLdLibPath;\n    const char* ldLibPathUtf = (*env)-&gt;GetStringUTFChars(env, ldLibraryPath, 0);\n    android_update_LD_LIBRARY_PATH(ldLibPathUtf);\n    (*env)-&gt;ReleaseStringUTFChars(env, ldLibraryPath, ldLibPathUtf);\n}\n\nint (*JVM_handle_linux_signal)(int signo, siginfo_t* siginfo, void* ucontext, int abort_if_unrecognized);\n\nvoid free_char_array(JNIEnv *env, jobjectArray jstringArray, const char **charArray) {\n    int num_rows = (*env)-&gt;GetArrayLength(env, jstringArray);\n    jstring row;\n\n    for (int i = 0; i &lt; num_rows; i++) {\n        row = (jstring) (*env)-&gt;GetObjectArrayElement(env, jstringArray, i);\n        (*env)-&gt;ReleaseStringUTFChars(env, row, charArray[i]);\n    }\n}\n\nint start_logger()\n{\n\n    /* make stdout line-buffered and stderr unbuffered */\n    setvbuf(stdout, 0, _IOLBF, 0);\n    setvbuf(stderr, 0, _IONBF, 0);\n\n    /* create the pipe and redirect stdout and stderr */\n    pipe(pfd);\n    dup2(pfd[1], 1);\n    dup2(pfd[1], 2);\n\n    /* spawn the logging thread */\n    if(pthread_create(&amp;thr, 0, thread_func, 0) == -1)\n        return -1;\n    pthread_detach(thr);\n    return 0;\n}\n\nstatic void *thread_func(void* t)\n{\n    ssize_t rdsz;\n    char buf[128];\n    while((rdsz = read(pfd[0], buf, sizeof buf - 1)) &gt; 0) {\n        if(buf[rdsz - 1] == '\\n') --rdsz;\n        buf[rdsz] = 0;  /* add null-terminator */\n        __android_log_write(ANDROID_LOG_INFO, tag, buf);\n    }\n    return 0;\n}\n\nchar** convert_to_char_array(JNIEnv *env, jobjectArray jstringArray) {\n    int num_rows = (*env)-&gt;GetArrayLength(env, jstringArray);\n    char **cArray = (char **) malloc(num_rows * sizeof(char*));\n    jstring row;\n\n    for (int i = 0; i &lt; num_rows; i++) {\n        row = (jstring) (*env)-&gt;GetObjectArrayElement(env, jstringArray, i);\n        cArray[i] = (char*)(*env)-&gt;GetStringUTFChars(env, row, 0);\n    }\n\n    return cArray;\n}\n\njint JNI_OnLoad(JavaVM *vm, void *reserved) {\n    __android_log_write(ANDROID_LOG_INFO, tag, &quot;OnLoad!&quot;);\n\n    start_logger();\n    return JNI_VERSION_1_4;\n}\n\nstatic jint launchJVM(int margc, char** margv) {\n   void* libjli = dlopen(&quot;libjli.so&quot;, RTLD_LAZY | RTLD_GLOBAL);\n\n   // Boardwalk: silence\n   // LOGD(&quot;JLI lib = %x&quot;, (int)libjli);\n   if (NULL == libjli) {\n       LOGE(&quot;JLI lib = NULL: %s&quot;, dlerror());\n       return -1;\n   }\n   LOGD(&quot;Found JLI lib&quot;);\n\n   JLI_Launch_func *pJLI_Launch =\n          (JLI_Launch_func *)dlsym(libjli, &quot;JLI_Launch&quot;);\n    // Boardwalk: silence\n    // LOGD(&quot;JLI_Launch = 0x%x&quot;, *(int*)&amp;pJLI_Launch);\n\n   if (NULL == pJLI_Launch) {\n       LOGE(&quot;JLI_Launch = NULL&quot;);\n       return -1;\n   }\n\n   LOGD(&quot;Calling JLI_Launch&quot;);\n\n   return pJLI_Launch(margc, margv,\n                   0, NULL, // sizeof(const_jargs) / sizeof(char *), const_jargs,\n                   0, NULL, // sizeof(const_appclasspath) / sizeof(char *), const_appclasspath,\n                   FULL_VERSION,\n                   DOT_VERSION,\n                   *margv, // (const_progname != NULL) ? const_progname : *margv,\n                   *margv, // (const_launcher != NULL) ? const_launcher : *margv,\n                   (const_jargs != NULL) ? JNI_TRUE : JNI_FALSE,\n                   const_cpwildcard, const_javaw, const_ergo_class);\n/*\n   return pJLI_Launch(argc, argv,\n       0, NULL, 0, NULL, FULL_VERSION,\n       DOT_VERSION, *margv, *margv, // &quot;java&quot;, &quot;openjdk&quot;,\n       JNI_FALSE, JNI_TRUE, JNI_FALSE, 0);\n*/\n}\n\nJNIEXPORT jint JNICALL Java_com_example_myapplication_util_JREUtils_loadJVM(JNIEnv *env, jclass clazz, jobjectArray argsArray) {\n    /*#ifdef TRY_SIG2JVM\n    void* libjvm = dlopen(&quot;libjvm.so&quot;, RTLD_LAZY | RTLD_GLOBAL);\n    if (NULL == libjvm) {\n      LOGE(&quot;JVM lib = NULL: %s&quot;, dlerror());\n      return -1;\n    }\n    JVM_handle_linux_signal = dlsym(libjvm, &quot;JVM_handle_linux_signal&quot;);\n    #endif\n\n    jint res = 0;\n    // int i;\n    //Prepare the signal trapper\n    struct sigaction catcher;\n    memset(&amp;catcher,0,sizeof(sigaction));\n    catcher.sa_sigaction = android_sigaction;\n    catcher.sa_flags = SA_SIGINFO|SA_RESTART;\n    // SA_RESETHAND;\n    #define CATCHSIG(X) sigaction(X, &amp;catcher, &amp;old_sa[X])\n    CATCHSIG(SIGILL);\n    //CATCHSIG(SIGABRT);\n    CATCHSIG(SIGBUS);\n    CATCHSIG(SIGFPE);\n    #ifdef TRY_SIG2JVM\n    CATCHSIG(SIGSEGV);\n    #endif\n    CATCHSIG(SIGSTKFLT);\n    CATCHSIG(SIGPIPE);\n    CATCHSIG(SIGXFSZ);\n    //Signal trapper ready*/\n\n    // Save dalvik JNIEnv pointer for JVM launch thread\n    //pojav_environ-&gt;dalvikJNIEnvPtr_ANDROID = env;\n    jint res = 0;\n\n    if (argsArray == NULL) {\n        LOGE(&quot;Args array null, returning&quot;);\n        //handle error\n        return 0;\n    }\n\n    int argc = (*env)-&gt;GetArrayLength(env, argsArray);\n    char **argv = convert_to_char_array(env, argsArray);\n\n    LOGD(&quot;Done processing args&quot;);\n\n    res = launchJVM(argc, argv);\n\n    LOGD(&quot;Going to free args&quot;);\n    free_char_array(env, argsArray, argv);\n\n    LOGD(&quot;Free done&quot;);\n\n    return res;\n}\n\nJNIEXPORT jboolean JNICALL Java_com_example_myapplication_util_JREUtils_dlopen(JNIEnv *env, jclass clazz, jstring name) {\n    const char *nameUtf = (*env)-&gt;GetStringUTFChars(env, name, 0);\n    void* handle = dlopen(nameUtf, RTLD_GLOBAL | RTLD_LAZY);\n    if (!handle) {\n        LOGE(&quot;dlopen %s failed: %s&quot;, nameUtf, dlerror());\n    } else {\n        LOGD(&quot;dlopen %s success&quot;, nameUtf);\n    }\n    (*env)-&gt;ReleaseStringUTFChars(env, name, nameUtf);\n    return handle != NULL;\n}\n</code></pre>\n<p>Basically, the app loads the needed libraries for java with the JNI dlopen method in initJVM(). Then it'll call the JNI loadJVM method.</p>\n<pre><code>public static void initJVM() {\n\n        String mainPath = &quot;/data/user/0/com.example.myapplication/jre-runtime/lib/&quot;;\n\n        dlopen(mainPath + &quot;libjli.so&quot;);\n        if(!dlopen(&quot;libjvm.so&quot;)){\n            Log.w(&quot;DynamicLoader&quot;,&quot;Failed to load with no path, trying with full path&quot;);\n            dlopen(mainPath + &quot;server/libjvm.so&quot;);\n        }\n        dlopen(mainPath + &quot;libverify.so&quot;);\n        dlopen(mainPath + &quot;libjava.so&quot;);\n        dlopen(mainPath + &quot;libnet.so&quot;);\n        dlopen(mainPath + &quot;libnio.so&quot;);\n        dlopen(mainPath + &quot;libawt.so&quot;);\n        //setLdLibraryPath(mainPath);\n    }\n</code></pre>\n<p>Lastly, here is the call to loadJVM from inside Java:\n<code>JREUtils.loadJVM(&quot;java&quot;, &quot;-Xmx512M&quot;, &quot;-Xms512M&quot;, &quot;/data/user/0/com.example.myapplication/cache/Main.class&quot;);</code></p>\n<p>When I try to execute it with the setup above, I get a &quot;avc: denied&quot; error.</p>\n<p>The specific error:\n<code>W/e.myapplication: type=1400 audit(0.0:10408): avc: denied { read } for name=&quot;cgroups&quot; dev=&quot;proc&quot; ino=4026531857 scontext=u:r:untrusted_app:s0:c162,c256,c512,c768 tcontext=u:object_r:proc:s0 tclass=file permissive=0 app=com.example.myapplication </code></p>\n"},{"tags":["java","google-chrome","selenium","selenium-chromedriver","headless-browser"],"answers":[{"tags":[],"owner":{"account_id":7013987,"reputation":129,"user_id":9564542,"display_name":"Vaibhav Sharma"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1522248963,"creation_date":1522246436,"answer_id":49536888,"question_id":48049359,"body_markdown":"In Java use like this :    \r\n\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/usr/local/bin/chromedriver&quot;);\r\n             ChromeOptions options = new ChromeOptions();\r\n                    options.addArguments(&quot;--test-type&quot;);\r\n                    options.addArguments(&quot;--headless&quot;);\r\n                    options.addArguments(&quot;--disable-extensions&quot;); //to disable browser extension popup\r\n    \r\n                    ChromeDriverService driverService = ChromeDriverService.createDefaultService();\r\n                    ChromeDriver driver = new ChromeDriver(driverService, options);\r\n    \r\n                    Map&lt;String, Object&gt; commandParams = new HashMap&lt;&gt;();\r\n                    commandParams.put(&quot;cmd&quot;, &quot;Page.setDownloadBehavior&quot;);\r\n                    Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n                    params.put(&quot;behavior&quot;, &quot;allow&quot;);\r\n                    params.put(&quot;downloadPath&quot;, &quot;//home//vaibhav//Desktop&quot;);\r\n                    commandParams.put(&quot;params&quot;, params);\r\n                    ObjectMapper objectMapper = new ObjectMapper();\r\n                    HttpClient httpClient = HttpClientBuilder.create().build();\r\n                    String command = objectMapper.writeValueAsString(commandParams);\r\n                    String u = driverService.getUrl().toString() + &quot;/session/&quot; + driver.getSessionId() + &quot;/chromium/send_command&quot;;\r\n                    HttpPost request = new HttpPost(u);\r\n                    request.addHeader(&quot;content-type&quot;, &quot;application/json&quot;);\r\n                    request.setEntity(new StringEntity(command));\r\n                    httpClient.execute(request);\r\n            driver.get(&quot;http://www.seleniumhq.org/download/&quot;);\r\n            driver.findElement(By.linkText(&quot;32 bit Windows IE&quot;)).click();","title":"Download files in Java, Selenium using ChromeDriver and headless mode","body":"<p>In Java use like this :    </p>\n\n<pre><code>System.setProperty(\"webdriver.chrome.driver\", \"/usr/local/bin/chromedriver\");\n         ChromeOptions options = new ChromeOptions();\n                options.addArguments(\"--test-type\");\n                options.addArguments(\"--headless\");\n                options.addArguments(\"--disable-extensions\"); //to disable browser extension popup\n\n                ChromeDriverService driverService = ChromeDriverService.createDefaultService();\n                ChromeDriver driver = new ChromeDriver(driverService, options);\n\n                Map&lt;String, Object&gt; commandParams = new HashMap&lt;&gt;();\n                commandParams.put(\"cmd\", \"Page.setDownloadBehavior\");\n                Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\n                params.put(\"behavior\", \"allow\");\n                params.put(\"downloadPath\", \"//home//vaibhav//Desktop\");\n                commandParams.put(\"params\", params);\n                ObjectMapper objectMapper = new ObjectMapper();\n                HttpClient httpClient = HttpClientBuilder.create().build();\n                String command = objectMapper.writeValueAsString(commandParams);\n                String u = driverService.getUrl().toString() + \"/session/\" + driver.getSessionId() + \"/chromium/send_command\";\n                HttpPost request = new HttpPost(u);\n                request.addHeader(\"content-type\", \"application/json\");\n                request.setEntity(new StringEntity(command));\n                httpClient.execute(request);\n        driver.get(\"http://www.seleniumhq.org/download/\");\n        driver.findElement(By.linkText(\"32 bit Windows IE\")).click();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7842592,"reputation":21,"user_id":5928588,"display_name":"Mr Automation"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594886642,"creation_date":1594878357,"answer_id":62928245,"question_id":48049359,"body_markdown":"As per official release page of chrome driver, a fix has been introduced for this issue. Any chrome driver version greater than 77 will be able to download the file in headless mode.\r\n\r\n```\r\noptions.addArguments(&quot;--headless&quot;);\r\n```","title":"Download files in Java, Selenium using ChromeDriver and headless mode","body":"<p>As per official release page of chrome driver, a fix has been introduced for this issue. Any chrome driver version greater than 77 will be able to download the file in headless mode.</p>\n<pre><code>options.addArguments(&quot;--headless&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28135383,"reputation":1,"user_id":21499226,"display_name":"Prashant Srivastav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679902506,"creation_date":1679902506,"answer_id":75853155,"question_id":48049359,"body_markdown":"This worked for me.\r\n\r\n        ChromeOptions options = new ChromeOptions();\r\n        Map&lt;String, Object&gt; prefs = new HashMap&lt;&gt;();\r\n        prefs.put(&quot;credentials_enable_service&quot;, false);\r\n        prefs.put(&quot;profile.password_manager_enabled&quot;, false);\r\n        prefs.put(&quot;download.prompt_for_download&quot;, false);\r\n        prefs.put(&quot;download.default_directory&quot;, downloadFilepath);\r\n        prefs.put(&quot;browser.set_download_behavior&quot;, &quot;{behavior : &#39;allow&#39; , downloadPath: &#39;&quot;+downloadFilepath+&quot;&#39;}&quot;);\r\n        options.addArguments(&quot;--headless=new&quot;);\r\n        options.addArguments(&quot;--window-size=1920,1080&quot;);\r\n        options.addArguments(&quot;--disable-extensions&quot;);\r\n        options.addArguments(&quot;--proxy-server=&#39;direct://&#39;&quot;);\r\n        options.addArguments(&quot;--proxy-bypass-list=*&quot;);\r\n        options.addArguments(&quot;--start-maximized&quot;);\r\n        options.addArguments(&quot;--disable-gpu&quot;);\r\n        options.addArguments(&quot;--disable-dev-shm-usage&quot;);\r\n        options.addArguments(&quot;--no-sandbox&quot;);\r\n        options.addArguments(&quot;--ignore-certificate-errors&quot;);\r\n        options.setExperimentalOption(&quot;prefs&quot;, prefs);\r\n        ","title":"Download files in Java, Selenium using ChromeDriver and headless mode","body":"<p>This worked for me.</p>\n<pre><code>    ChromeOptions options = new ChromeOptions();\n    Map&lt;String, Object&gt; prefs = new HashMap&lt;&gt;();\n    prefs.put(&quot;credentials_enable_service&quot;, false);\n    prefs.put(&quot;profile.password_manager_enabled&quot;, false);\n    prefs.put(&quot;download.prompt_for_download&quot;, false);\n    prefs.put(&quot;download.default_directory&quot;, downloadFilepath);\n    prefs.put(&quot;browser.set_download_behavior&quot;, &quot;{behavior : 'allow' , downloadPath: '&quot;+downloadFilepath+&quot;'}&quot;);\n    options.addArguments(&quot;--headless=new&quot;);\n    options.addArguments(&quot;--window-size=1920,1080&quot;);\n    options.addArguments(&quot;--disable-extensions&quot;);\n    options.addArguments(&quot;--proxy-server='direct://'&quot;);\n    options.addArguments(&quot;--proxy-bypass-list=*&quot;);\n    options.addArguments(&quot;--start-maximized&quot;);\n    options.addArguments(&quot;--disable-gpu&quot;);\n    options.addArguments(&quot;--disable-dev-shm-usage&quot;);\n    options.addArguments(&quot;--no-sandbox&quot;);\n    options.addArguments(&quot;--ignore-certificate-errors&quot;);\n    options.setExperimentalOption(&quot;prefs&quot;, prefs);\n    \n</code></pre>\n"}],"owner":{"account_id":3592582,"reputation":333,"user_id":2998253,"accept_rate":0,"display_name":"Bartek Szczypien"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9485,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1679902506,"creation_date":1514806990,"question_id":48049359,"body_markdown":"As it is still not clear for me how to download files using --headless mode in ChromeDriver - selenium [Java], add here please the example of how to do so, I try to do it like that (the file downloading works properly without --headless option):\r\n\r\n    ChromeOptions lChromeOptions = new ChromeOptions();\r\n    HashMap&lt;String, Object&gt; lChromePrefs = new HashMap&lt;String, Object&gt;();\r\n    lChromePrefs.put(&quot;profile.default_content_settings.popups&quot;, 0);\r\n    lChromePrefs.put(&quot;download.default_directory&quot;, _PATH_TO_DOWNLOAD_DIR);\r\n    lChromePrefs.put(&quot;browser.set_download_behavior&quot;, &quot;{ behavior: &#39;allow&#39; , downloadPath: &#39;&quot;+_PATH_TO_DOWNLOAD_DIR+&quot;&#39;}&quot;);\r\n                    \r\n    lChromeOptions.addArguments(&quot;--headless&quot;);\r\n    lChromeOptions.addArguments(&quot;--disable-gpu&quot;);\r\n    lChromeOptions.setExperimentalOption(&quot;prefs&quot;, lChromePrefs);\r\n    WebDriver lWebDriver = new ChromeDriver(lChromeOptions);\r\n\r\n\r\nFrom what I know, downloading files in headless mode should be possible since Chrome v60+ by setting `Browser.setDownloadBehaviour(true, _DIRECTORY)` but I cant find the information whether ChromeDriver already supports it or it is just me using wrong chrome preferences as arguments\r\n\r\nChromeDriver version: 2.34 \r\nSelenium + WebDriver version: 3.8.1","title":"Download files in Java, Selenium using ChromeDriver and headless mode","body":"<p>As it is still not clear for me how to download files using --headless mode in ChromeDriver - selenium [Java], add here please the example of how to do so, I try to do it like that (the file downloading works properly without --headless option):</p>\n\n<pre><code>ChromeOptions lChromeOptions = new ChromeOptions();\nHashMap&lt;String, Object&gt; lChromePrefs = new HashMap&lt;String, Object&gt;();\nlChromePrefs.put(\"profile.default_content_settings.popups\", 0);\nlChromePrefs.put(\"download.default_directory\", _PATH_TO_DOWNLOAD_DIR);\nlChromePrefs.put(\"browser.set_download_behavior\", \"{ behavior: 'allow' , downloadPath: '\"+_PATH_TO_DOWNLOAD_DIR+\"'}\");\n\nlChromeOptions.addArguments(\"--headless\");\nlChromeOptions.addArguments(\"--disable-gpu\");\nlChromeOptions.setExperimentalOption(\"prefs\", lChromePrefs);\nWebDriver lWebDriver = new ChromeDriver(lChromeOptions);\n</code></pre>\n\n<p>From what I know, downloading files in headless mode should be possible since Chrome v60+ by setting <code>Browser.setDownloadBehaviour(true, _DIRECTORY)</code> but I cant find the information whether ChromeDriver already supports it or it is just me using wrong chrome preferences as arguments</p>\n\n<p>ChromeDriver version: 2.34 \nSelenium + WebDriver version: 3.8.1</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":3,"creation_date":1679901768,"post_id":75853049,"comment_id":133797262,"body_markdown":"Why wouldn&#39;t it be? The state isn&#39;t shared with threads (unless you are doing really ugly things).","body":"Why wouldn&#39;t it be? The state isn&#39;t shared with threads (unless you are doing really ugly things)."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1679902641,"post_id":75853049,"comment_id":133797462,"body_markdown":"I was having problems trying to phrase out what I wanted to say earlier, but I found this post that conveys what I was trying to say: https://softwareengineering.stackexchange.com/a/347376/426931","body":"I was having problems trying to phrase out what I wanted to say earlier, but I found this post that conveys what I was trying to say: <a href=\"https://softwareengineering.stackexchange.com/a/347376/426931\">softwareengineering.stackexchange.com/a/347376/426931</a>"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1679922992,"post_id":75853049,"comment_id":133802672,"body_markdown":"Nothing in your example shows the `list` being given to another thread. There is no thread-safety issue if only one thread ever uses it.","body":"Nothing in your example shows the <code>list</code> being given to another thread. There is no thread-safety issue if only one thread ever uses it."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679902108,"creation_date":1679902108,"answer_id":75853105,"question_id":75853049,"body_markdown":"As a general sketch, this seems fine: you create an object locally, only ever refer to it via the local variable and it doesn&#39;t escape to any other thread. Therefore no threading-complications should happen.\r\n\r\n**But** the &quot;...&quot; does a lot of work, and depending on what exactly you do there, you *could* introduce issues.\r\n\r\nThe most obvious problem would be something like\r\n\r\n```\r\nnew Thread(() -&gt; { ...; list.add(...); ... }).start();\r\n```\r\n\r\nSimilarly, but perhaps more subtle would be something like [`Collection.parallelStream()`][1]:\r\n\r\n```\r\nsomeOtherCollection.parallelStream().forEach(o -&gt; { ...; list.add(...); ... });\r\n```\r\n\r\nIn both of those cases your `list` would escape to other thread and the whole thing could potentially get problems.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Collection.html#parallelStream()","title":"Thread safety on local ArrayList object","body":"<p>As a general sketch, this seems fine: you create an object locally, only ever refer to it via the local variable and it doesn't escape to any other thread. Therefore no threading-complications should happen.</p>\n<p><strong>But</strong> the &quot;...&quot; does a lot of work, and depending on what exactly you do there, you <em>could</em> introduce issues.</p>\n<p>The most obvious problem would be something like</p>\n<pre><code>new Thread(() -&gt; { ...; list.add(...); ... }).start();\n</code></pre>\n<p>Similarly, but perhaps more subtle would be something like <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Collection.html#parallelStream()\" rel=\"nofollow noreferrer\"><code>Collection.parallelStream()</code></a>:</p>\n<pre><code>someOtherCollection.parallelStream().forEach(o -&gt; { ...; list.add(...); ... });\n</code></pre>\n<p>In both of those cases your <code>list</code> would escape to other thread and the whole thing could potentially get problems.</p>\n"}],"owner":{"account_id":12000414,"reputation":27,"user_id":8780539,"display_name":"ASHOK KUMAR"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1679902108,"creation_date":1679901697,"question_id":75853049,"body_markdown":"Needed one clarification in understanding :\r\n\r\n```\r\npublic class Dummy {\r\n\r\n    public void function1() {\r\n       final List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n       function2(list)\r\n       .\r\n       .\r\n       .\r\n       list.addAll(…);\r\n       .\r\n       .\r\n    }\r\n\r\n    private void function2(List&lt;String&gt; list) {\r\n        .\r\n        .\r\n        list.add(…);\r\n        .\r\n        .\r\n    }\r\n}\r\n```\r\n\r\nSince the add method on ArrayList is not thread safe but here we are dealing with ArrayList as local variables only --- so can it still cause thread safety related issues ?\r\n\r\nWanted to know if above one is thread safe or not ? If not , why is it so ?","title":"Thread safety on local ArrayList object","body":"<p>Needed one clarification in understanding :</p>\n<pre><code>public class Dummy {\n\n    public void function1() {\n       final List&lt;String&gt; list = new ArrayList&lt;&gt;();\n       function2(list)\n       .\n       .\n       .\n       list.addAll(…);\n       .\n       .\n    }\n\n    private void function2(List&lt;String&gt; list) {\n        .\n        .\n        list.add(…);\n        .\n        .\n    }\n}\n</code></pre>\n<p>Since the add method on ArrayList is not thread safe but here we are dealing with ArrayList as local variables only --- so can it still cause thread safety related issues ?</p>\n<p>Wanted to know if above one is thread safe or not ? If not , why is it so ?</p>\n"},{"tags":["java","switch-statement"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1679868245,"post_id":75850803,"comment_id":133793479,"body_markdown":"You never update `input` inside the loop, yet you `switch` over it in each iteration, that won&#39;t do what you want.","body":"You never update <code>input</code> inside the loop, yet you <code>switch</code> over it in each iteration, that won&#39;t do what you want."},{"owner":{"account_id":26262923,"reputation":447,"user_id":19933941,"display_name":"llesha"},"score":2,"creation_date":1679868257,"post_id":75850803,"comment_id":133793483,"body_markdown":"change first `case` in input to `case &quot; &quot;`","body":"change first <code>case</code> in input to <code>case &quot; &quot;</code>"},{"owner":{"account_id":401843,"reputation":89778,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1679868311,"post_id":75850803,"comment_id":133793491,"body_markdown":"`this._input.substring(this._cursor);` - the substring method doesn&#39;t do what you think it does. That form of it gives you the string from `this._cursor` _until the very end of it_. You seem to want `.charAt()`, or possibly `this.substring(this._cursor, this._cursor + 1)`.","body":"<code>this._input.substring(this._cursor);</code> - the substring method doesn&#39;t do what you think it does. That form of it gives you the string from <code>this._cursor</code> <i>until the very end of it</i>. You seem to want <code>.charAt()</code>, or possibly <code>this.substring(this._cursor, this._cursor + 1)</code>."},{"owner":{"account_id":401843,"reputation":89778,"user_id":768644,"display_name":"rzwitserloot"},"score":3,"creation_date":1679868365,"post_id":75850803,"comment_id":133793495,"body_markdown":"Given the problem is that simple, the underlying problem you&#39;re having is that you don&#39;t know how to debug. Fortunately, it&#39;s easy! Simply figure out what you think the code should be doing, and compare that to what it actually does. There where these 2 disagree - you found a bug! Keep going. Debuggers make this process easy, and you should learn how to use one. If you can&#39;t be bothered - there&#39;s always sprinking loads of `System.out` statements throughout the code.","body":"Given the problem is that simple, the underlying problem you&#39;re having is that you don&#39;t know how to debug. Fortunately, it&#39;s easy! Simply figure out what you think the code should be doing, and compare that to what it actually does. There where these 2 disagree - you found a bug! Keep going. Debuggers make this process easy, and you should learn how to use one. If you can&#39;t be bothered - there&#39;s always sprinking loads of <code>System.out</code> statements throughout the code."},{"owner":{"account_id":24597803,"reputation":95,"user_id":18500988,"display_name":"Cezar P"},"score":0,"creation_date":1679869703,"post_id":75850803,"comment_id":133793666,"body_markdown":"@JoachimSauer Indeed updating the Input inside the loop works. The cursor is now at 2 and the substring (Input) is now &quot;  + 15 * (10 + 3 * 3 - 2)&quot; instead of &quot;10 + 15 * (10 + 3 * 3 - 2)&quot;. However, the cursor is on position 2 like we know now , and thats the blank space. Unfortunately the blank space is still not recognized and the program will imediately skip too the &#39;else&#39; statement wich gives an error : &quot;Expected a valid token at position: 2&quot;","body":"@JoachimSauer Indeed updating the Input inside the loop works. The cursor is now at 2 and the substring (Input) is now &quot;  + 15 * (10 + 3 * 3 - 2)&quot; instead of &quot;10 + 15 * (10 + 3 * 3 - 2)&quot;. However, the cursor is on position 2 like we know now , and thats the blank space. Unfortunately the blank space is still not recognized and the program will imediately skip too the &#39;else&#39; statement wich gives an error : &quot;Expected a valid token at position: 2&quot;"},{"owner":{"account_id":24597803,"reputation":95,"user_id":18500988,"display_name":"Cezar P"},"score":0,"creation_date":1679869906,"post_id":75850803,"comment_id":133793680,"body_markdown":"@rzwitserloot Thank you for the reply! I have tried to debug using breakpoints wich helped me alot understanding what the program is actually doing vs what i am trying to do! Like i have replied to JoachimSauer, updating the &quot;Input&quot; substring inside of the while loop helped. But unfortunately the white space is still not recognized. Its unfortunate becouse i really think its something verry small wich i cannot comprehend right now.","body":"@rzwitserloot Thank you for the reply! I have tried to debug using breakpoints wich helped me alot understanding what the program is actually doing vs what i am trying to do! Like i have replied to JoachimSauer, updating the &quot;Input&quot; substring inside of the while loop helped. But unfortunately the white space is still not recognized. Its unfortunate becouse i really think its something verry small wich i cannot comprehend right now."},{"owner":{"account_id":24597803,"reputation":95,"user_id":18500988,"display_name":"Cezar P"},"score":0,"creation_date":1679870436,"post_id":75850803,"comment_id":133793741,"body_markdown":"@rzwitserloot Hey your reply is what solved my problem ! Wow i did not expect that to be honest but i decided to give it a try. Seems that using charAt() in this context is correct ! I will still need to do my research on why the substring did not work here. So i am eager to find out! Thanks alot.","body":"@rzwitserloot Hey your reply is what solved my problem ! Wow i did not expect that to be honest but i decided to give it a try. Seems that using charAt() in this context is correct ! I will still need to do my research on why the substring did not work here. So i am eager to find out! Thanks alot."}],"answers":[{"tags":[],"owner":{"account_id":24597803,"reputation":95,"user_id":18500988,"display_name":"Cezar P"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679901760,"creation_date":1679901760,"answer_id":75853060,"question_id":75850803,"body_markdown":"So these are the changes which fixed the problem.\r\nWe are looking at the getTokens() method:\r\n~~~\r\n public List&lt;Token&gt; getTokens() throws Exception {\r\n        List&lt;Token&gt; tokens = new ArrayList&lt;&gt;();\r\n        if (this._cursor &lt; this._input.length() != true) {\r\n            return null;\r\n        }\r\n        while (this._cursor &lt; this._input.length()) {\r\n            char input = this._input.charAt(this._cursor);\r\n            switch (input) {\r\n                case &#39; &#39;:\r\n                case &#39;\\n&#39;:\r\n                case &#39;\\t&#39;:\r\n                    break;\r\n                case &#39;+&#39;:\r\n//                    token = new Token(TokenType.PLUS, input);\r\n                    tokens.add(new Token(TokenType.PLUS, &quot;+&quot;));\r\n                    break;\r\n                case &#39;-&#39;:\r\n                    tokens.add(new Token(TokenType.MINUS, &quot;-&quot;));\r\n                    break;\r\n                case &#39;*&#39;:\r\n                    tokens.add(new Token(TokenType.MULTIPLY, &quot;*&quot;));\r\n                    break;\r\n                case &#39;/&#39;:\r\n                    tokens.add(new Token(TokenType.DIVIDE, &quot;/&quot;));\r\n                    break;\r\n                case &#39;(&#39;:\r\n                    tokens.add(new Token(TokenType.HAAKJEOPEN, &quot;(&quot;));\r\n                    break;\r\n                case &#39;)&#39;:\r\n                    tokens.add(new Token(TokenType.HAAKJESLUIT, &quot;)&quot;));\r\n                    break;\r\n                default:\r\n                    if (Character.isDigit(this._input.charAt(this._cursor))) {\r\n                        StringBuilder number = new StringBuilder();\r\n                        while (this._cursor &lt; this._input.length() &amp;&amp; Character.isDigit(this._input.charAt(this._cursor))) {\r\n                            number.append(this._input.charAt(this._cursor));\r\n                            this._cursor++;\r\n                        }\r\n                        tokens.add(new Token(TokenType.NUMERICAL, number.toString()));\r\n                        this._cursor--;\r\n                    }\r\n                    else {\r\n                        throw new Exception(&quot;Expected a valid token at position:&quot; + &quot; &quot; + this._cursor);\r\n                    }\r\n                    break;\r\n            }\r\n            this._cursor++;\r\n        }\r\n        tokens.add(new Token(TokenType.EOF, &quot;EOF&quot;));\r\n        return tokens;\r\n    }\r\n}\r\n~~~\r\n\r\nI placed the\r\n~~~\r\nString input = this._input.substring(this._cursor);\r\n~~~\r\nInside of the first while() loop, and changed it to:\r\n~~~\r\nchar input = this._input.charAt(this._cursor);\r\n~~~","title":"Switch Statement in JAVA does not recognize blank spaces","body":"<p>So these are the changes which fixed the problem.\nWe are looking at the getTokens() method:</p>\n<pre><code> public List&lt;Token&gt; getTokens() throws Exception {\n        List&lt;Token&gt; tokens = new ArrayList&lt;&gt;();\n        if (this._cursor &lt; this._input.length() != true) {\n            return null;\n        }\n        while (this._cursor &lt; this._input.length()) {\n            char input = this._input.charAt(this._cursor);\n            switch (input) {\n                case ' ':\n                case '\\n':\n                case '\\t':\n                    break;\n                case '+':\n//                    token = new Token(TokenType.PLUS, input);\n                    tokens.add(new Token(TokenType.PLUS, &quot;+&quot;));\n                    break;\n                case '-':\n                    tokens.add(new Token(TokenType.MINUS, &quot;-&quot;));\n                    break;\n                case '*':\n                    tokens.add(new Token(TokenType.MULTIPLY, &quot;*&quot;));\n                    break;\n                case '/':\n                    tokens.add(new Token(TokenType.DIVIDE, &quot;/&quot;));\n                    break;\n                case '(':\n                    tokens.add(new Token(TokenType.HAAKJEOPEN, &quot;(&quot;));\n                    break;\n                case ')':\n                    tokens.add(new Token(TokenType.HAAKJESLUIT, &quot;)&quot;));\n                    break;\n                default:\n                    if (Character.isDigit(this._input.charAt(this._cursor))) {\n                        StringBuilder number = new StringBuilder();\n                        while (this._cursor &lt; this._input.length() &amp;&amp; Character.isDigit(this._input.charAt(this._cursor))) {\n                            number.append(this._input.charAt(this._cursor));\n                            this._cursor++;\n                        }\n                        tokens.add(new Token(TokenType.NUMERICAL, number.toString()));\n                        this._cursor--;\n                    }\n                    else {\n                        throw new Exception(&quot;Expected a valid token at position:&quot; + &quot; &quot; + this._cursor);\n                    }\n                    break;\n            }\n            this._cursor++;\n        }\n        tokens.add(new Token(TokenType.EOF, &quot;EOF&quot;));\n        return tokens;\n    }\n}\n</code></pre>\n<p>I placed the</p>\n<pre><code>String input = this._input.substring(this._cursor);\n</code></pre>\n<p>Inside of the first while() loop, and changed it to:</p>\n<pre><code>char input = this._input.charAt(this._cursor);\n</code></pre>\n"}],"owner":{"account_id":24597803,"reputation":95,"user_id":18500988,"display_name":"Cezar P"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679901760,"creation_date":1679867855,"question_id":75850803,"body_markdown":"I am trying to figure out why my switch statement does not recognize either a blank space or a &quot;+&quot; operator. \r\n\r\nI am trying to go through a string/stream input.\r\n\r\nI have a cursor which keeps track of where we are in the string/stream input. In the code below, the program will work as expected (going through numbers) until the cursor reaches a value of &quot;2&quot; which means the cursor is on a blank space inside of the string/stream input. \r\n\r\nI have made a substring of the original string so I can use that for the switch to work with just one character.\r\n\r\nAs I said when the cursor hits 2, and the number &quot;10&quot; has been gone trough (the input is : &quot;10 + 15 * (10 + 3 * 3 - 2)&quot;), it gives me an error on the white space. So the cursor will not recognize the white space and will not advance to the &quot;+&quot; operator. It even tells me in the error that &quot;Expected a valid token at position : 2&quot;. \r\n\r\nThe main:\r\n```\r\nimport Class.Parser;\r\nimport Class.Lexer;\r\nimport Model.Token;\r\n\r\nimport java.util.List;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) throws Exception {\r\n\r\n          Lexer lexer = new Lexer(&quot;10 + 15 * (10 + 3 * 3 - 2)&quot;);\r\n          List &lt;Token&gt; tokens = lexer.getTokens();\r\n    }\r\n}\r\n```\r\n\r\nThe Lexer class:\r\n```\r\npackage Class;\r\nimport Model.Spec;\r\nimport Model.Token;\r\nimport Model.TokenType;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Objects;\r\nimport java.util.function.ToIntFunction;\r\nimport java.util.regex.Matcher;\r\nimport java.util.regex.Pattern;\r\n\r\npublic class Lexer {\r\n    private String _input;\r\n    private int _cursor;\r\n\r\n    public Lexer() {\r\n        this._cursor = 0;\r\n    }\r\n\r\n    public Lexer(String _Input) {\r\n        this._input = _Input;\r\n        this._cursor = 0;\r\n    }\r\n\r\n    public List&lt;Token&gt; getTokens() throws Exception {\r\n        List&lt;Token&gt; tokens = new ArrayList&lt;&gt;();\r\n        if (this._cursor &lt; this._input.length() != true) {\r\n            return null;\r\n        }\r\n        String input = this._input.substring(this._cursor);\r\n        while (this._cursor &lt; this._input.length()) {\r\n            switch (input) {\r\n                case &quot;&quot;:\r\n                case &quot;\\n&quot;:\r\n                case &quot;\\t&quot;:\r\n                case &quot;\\s&quot;:\r\n                    break;\r\n                case &quot;+&quot;:\r\n                    tokens.add(new Token(TokenType.PLUS, &quot;+&quot;));\r\n                    break;\r\n                case &quot;-&quot;:\r\n                    tokens.add(new Token(TokenType.MINUS, &quot;-&quot;));\r\n                    break;\r\n                case &quot;*&quot;:\r\n                    tokens.add(new Token(TokenType.MULTIPLY, &quot;*&quot;));\r\n                    break;\r\n                case &quot;/&quot;:\r\n                    tokens.add(new Token(TokenType.DIVIDE, &quot;/&quot;));\r\n                    break;\r\n                case &quot;(&quot;:\r\n                    tokens.add(new Token(TokenType.HAAKJEOPEN, &quot;(&quot;));\r\n                    break;\r\n                case &quot;)&quot;:\r\n                    tokens.add(new Token(TokenType.HAAKJESLUIT, &quot;)&quot;));\r\n                    break;\r\n                default:\r\n                    if (Character.isDigit(this._input.charAt(this._cursor))) {\r\n                        StringBuilder number = new StringBuilder();\r\n                        while (this._cursor &lt; this._input.length() &amp;&amp; Character.isDigit(this._input.charAt(this._cursor))) {\r\n                            number.append(this._input.charAt(this._cursor));\r\n                            this._cursor++;\r\n                        }\r\n                        tokens.add(new Token(TokenType.NUMERICAL, number.toString()));\r\n                        this._cursor--;\r\n                    }\r\n                    else {\r\n                        throw new Exception(&quot;Expected a valid token at position:&quot; + &quot; &quot; + this._cursor);\r\n                    }\r\n            }\r\n            this._cursor++;\r\n        }\r\n        tokens.add(new Token(TokenType.EOF, &quot;EOF&quot;));\r\n        return tokens;\r\n    }\r\n}\r\n```\r\n\r\nThanks in advance!\r\nIf information is missing, let me know!","title":"Switch Statement in JAVA does not recognize blank spaces","body":"<p>I am trying to figure out why my switch statement does not recognize either a blank space or a &quot;+&quot; operator.</p>\n<p>I am trying to go through a string/stream input.</p>\n<p>I have a cursor which keeps track of where we are in the string/stream input. In the code below, the program will work as expected (going through numbers) until the cursor reaches a value of &quot;2&quot; which means the cursor is on a blank space inside of the string/stream input.</p>\n<p>I have made a substring of the original string so I can use that for the switch to work with just one character.</p>\n<p>As I said when the cursor hits 2, and the number &quot;10&quot; has been gone trough (the input is : &quot;10 + 15 * (10 + 3 * 3 - 2)&quot;), it gives me an error on the white space. So the cursor will not recognize the white space and will not advance to the &quot;+&quot; operator. It even tells me in the error that &quot;Expected a valid token at position : 2&quot;.</p>\n<p>The main:</p>\n<pre><code>import Class.Parser;\nimport Class.Lexer;\nimport Model.Token;\n\nimport java.util.List;\n\npublic class Main {\n    public static void main(String[] args) throws Exception {\n\n          Lexer lexer = new Lexer(&quot;10 + 15 * (10 + 3 * 3 - 2)&quot;);\n          List &lt;Token&gt; tokens = lexer.getTokens();\n    }\n}\n</code></pre>\n<p>The Lexer class:</p>\n<pre><code>package Class;\nimport Model.Spec;\nimport Model.Token;\nimport Model.TokenType;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.function.ToIntFunction;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class Lexer {\n    private String _input;\n    private int _cursor;\n\n    public Lexer() {\n        this._cursor = 0;\n    }\n\n    public Lexer(String _Input) {\n        this._input = _Input;\n        this._cursor = 0;\n    }\n\n    public List&lt;Token&gt; getTokens() throws Exception {\n        List&lt;Token&gt; tokens = new ArrayList&lt;&gt;();\n        if (this._cursor &lt; this._input.length() != true) {\n            return null;\n        }\n        String input = this._input.substring(this._cursor);\n        while (this._cursor &lt; this._input.length()) {\n            switch (input) {\n                case &quot;&quot;:\n                case &quot;\\n&quot;:\n                case &quot;\\t&quot;:\n                case &quot;\\s&quot;:\n                    break;\n                case &quot;+&quot;:\n                    tokens.add(new Token(TokenType.PLUS, &quot;+&quot;));\n                    break;\n                case &quot;-&quot;:\n                    tokens.add(new Token(TokenType.MINUS, &quot;-&quot;));\n                    break;\n                case &quot;*&quot;:\n                    tokens.add(new Token(TokenType.MULTIPLY, &quot;*&quot;));\n                    break;\n                case &quot;/&quot;:\n                    tokens.add(new Token(TokenType.DIVIDE, &quot;/&quot;));\n                    break;\n                case &quot;(&quot;:\n                    tokens.add(new Token(TokenType.HAAKJEOPEN, &quot;(&quot;));\n                    break;\n                case &quot;)&quot;:\n                    tokens.add(new Token(TokenType.HAAKJESLUIT, &quot;)&quot;));\n                    break;\n                default:\n                    if (Character.isDigit(this._input.charAt(this._cursor))) {\n                        StringBuilder number = new StringBuilder();\n                        while (this._cursor &lt; this._input.length() &amp;&amp; Character.isDigit(this._input.charAt(this._cursor))) {\n                            number.append(this._input.charAt(this._cursor));\n                            this._cursor++;\n                        }\n                        tokens.add(new Token(TokenType.NUMERICAL, number.toString()));\n                        this._cursor--;\n                    }\n                    else {\n                        throw new Exception(&quot;Expected a valid token at position:&quot; + &quot; &quot; + this._cursor);\n                    }\n            }\n            this._cursor++;\n        }\n        tokens.add(new Token(TokenType.EOF, &quot;EOF&quot;));\n        return tokens;\n    }\n}\n</code></pre>\n<p>Thanks in advance!\nIf information is missing, let me know!</p>\n"},{"tags":["java","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679901749,"creation_date":1679901749,"answer_id":75853057,"question_id":75836924,"body_markdown":"Your links are still relevant, although, there are new options now instead of using a `VisitListener`, you can transform the query also with the new experimental [`Replacer` API][1].\r\n\r\nIt&#39;s likely that a future jOOQ (not yet as of jOOQ 3.18) will support more row level security and multi tenancy use-cases out of the box, see [#2682][2].\r\n\r\n\r\n  [1]: https://www.jooq.org/doc/latest/manual/sql-building/model-api/model-api-replacement/\r\n  [2]: https://github.com/jOOQ/jOOQ/issues/2682","title":"How can I implement row-level security with jOOQ?","body":"<p>Your links are still relevant, although, there are new options now instead of using a <code>VisitListener</code>, you can transform the query also with the new experimental <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/model-api/model-api-replacement/\" rel=\"nofollow noreferrer\"><code>Replacer</code> API</a>.</p>\n<p>It's likely that a future jOOQ (not yet as of jOOQ 3.18) will support more row level security and multi tenancy use-cases out of the box, see <a href=\"https://github.com/jOOQ/jOOQ/issues/2682\" rel=\"nofollow noreferrer\">#2682</a>.</p>\n"}],"owner":{"account_id":3658110,"reputation":197,"user_id":3048582,"display_name":"Disheart"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679901749,"creation_date":1679681231,"question_id":75836924,"body_markdown":"I found [this](https://stackoverflow.com/questions/17324524/row-level-security-implementation-in-jooq) question, and [this](https://blog.jooq.org/implementing-client-side-row-level-security-with-jooq/) blog post. I&#39;m not sure if this is relevant anymore (some deprecated code) and there might be a new and better way to do this.\r\n\r\nIs there a way to add a condition to every query?\r\n\r\nOur current solution is to add the following to every table with a Generator, and the developer has to apply these methods manually. Preferably this organization filter should be applied automatically to (almost) every query.\r\n\r\n```java\r\npublic org.jooq.Condition filterNotDeleted() {\r\n    return this.DELETED.eq(false);\r\n}\r\n\r\npublic org.jooq.Condition filterOrganizationId(Long organizationId) {\r\n    return this.ORGANIZATION_ID.eq(organizationId);\r\n}\r\n\r\npublic org.jooq.Condition filterOrganizationIdAndNotDeleted(Long organizationId) {\r\n    return this.DELETED.eq(false).and(this.ORGANIZATION_ID.eq(organizationId));\r\n}\r\n```\r\n","title":"How can I implement row-level security with jOOQ?","body":"<p>I found <a href=\"https://stackoverflow.com/questions/17324524/row-level-security-implementation-in-jooq\">this</a> question, and <a href=\"https://blog.jooq.org/implementing-client-side-row-level-security-with-jooq/\" rel=\"nofollow noreferrer\">this</a> blog post. I'm not sure if this is relevant anymore (some deprecated code) and there might be a new and better way to do this.</p>\n<p>Is there a way to add a condition to every query?</p>\n<p>Our current solution is to add the following to every table with a Generator, and the developer has to apply these methods manually. Preferably this organization filter should be applied automatically to (almost) every query.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public org.jooq.Condition filterNotDeleted() {\n    return this.DELETED.eq(false);\n}\n\npublic org.jooq.Condition filterOrganizationId(Long organizationId) {\n    return this.ORGANIZATION_ID.eq(organizationId);\n}\n\npublic org.jooq.Condition filterOrganizationIdAndNotDeleted(Long organizationId) {\n    return this.DELETED.eq(false).and(this.ORGANIZATION_ID.eq(organizationId));\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9448,"page":544,"page_size":100}
