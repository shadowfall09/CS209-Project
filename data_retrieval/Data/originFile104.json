{"items":[{"tags":["java","json","jsonpath","json-path-expression","jayway"],"comments":[{"owner":{"account_id":7887635,"reputation":175,"user_id":5959064,"display_name":"Mohammed Abdullah"},"score":0,"creation_date":1606661482,"post_id":63318501,"comment_id":115022079,"body_markdown":"It is working fine for Example 1...whereas for Example 2...it is retrieving value of innerBook1 category also...but ideally it should not.","body":"It is working fine for Example 1...whereas for Example 2...it is retrieving value of innerBook1 category also...but ideally it should not."},{"owner":{"account_id":7887635,"reputation":175,"user_id":5959064,"display_name":"Mohammed Abdullah"},"score":0,"creation_date":1606663921,"post_id":63318501,"comment_id":115022776,"body_markdown":"Yes...from Example 1...InnerBook1.category is ignoring but for Example 2 InnerBook1.category is including in response.","body":"Yes...from Example 1...InnerBook1.category is ignoring but for Example 2 InnerBook1.category is including in response."},{"owner":{"account_id":7887635,"reputation":175,"user_id":5959064,"display_name":"Mohammed Abdullah"},"score":0,"creation_date":1606664605,"post_id":63318501,"comment_id":115022939,"body_markdown":"Requirement is for both Examples ..need to retrieve only InnerBook category alone, because in Jpath Expression InnerBook1 not defined, because of Deep copy currently it is pulling value of innerBook1 category value also, Ideally it should not. I added Expected Results for Both Examples. Please look into it and if you find any solution, it will be really helpful","body":"Requirement is for both Examples ..need to retrieve only InnerBook category alone, because in Jpath Expression InnerBook1 not defined, because of Deep copy currently it is pulling value of innerBook1 category value also, Ideally it should not. I added Expected Results for Both Examples. Please look into it and if you find any solution, it will be really helpful"}],"answers":[{"tags":[],"owner":{"account_id":11301259,"reputation":18357,"user_id":8291949,"accept_rate":100,"display_name":"wp78de"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606663762,"creation_date":1605118640,"answer_id":64791953,"question_id":63318501,"body_markdown":"A little late, however, we do not need to use recursive descent `..` after `innerBook` to walk the items in the array; with Jayway&#39;s we can use `innerBook[*].category` to retrieve the desired result for example 1:\r\n\r\n    $.store..book..innerBook[*].category\r\n\r\nExample 2 requires to remove the array accessor:\r\n\r\n    $.store..book..innerBook.category \r\n\r\nYou cannot have `innerBook` as array and object in one JSON since it wouldn&#39;t be valid. \r\n\r\nIf you have an API (or so) that serves JSON with an `innerbook` property of  array or object type (which would be a badly designed API since the whole point of an API is to have expected responses) you could either query both paths or make the access of categories depending on the existence of `innerBook1`:\r\n\r\n    $.store.book..innerBook[?(@.innerBook1)]..category\r\n\r\nWhich only returns for both examples\r\n\r\n    [\r\n       &quot;innerReference1&quot;,\r\n       &quot;innerBook1Ref1&quot;\r\n    ]\r\n\r\nTry it online [here][1].\r\n\r\n\r\n  [1]: https://jsonpath.herokuapp.com/","title":"Jayway JSONPath Expession for Both Object and Array","body":"<p>A little late, however, we do not need to use recursive descent <code>..</code> after <code>innerBook</code> to walk the items in the array; with Jayway's we can use <code>innerBook[*].category</code> to retrieve the desired result for example 1:</p>\n<pre><code>$.store..book..innerBook[*].category\n</code></pre>\n<p>Example 2 requires to remove the array accessor:</p>\n<pre><code>$.store..book..innerBook.category \n</code></pre>\n<p>You cannot have <code>innerBook</code> as array and object in one JSON since it wouldn't be valid.</p>\n<p>If you have an API (or so) that serves JSON with an <code>innerbook</code> property of  array or object type (which would be a badly designed API since the whole point of an API is to have expected responses) you could either query both paths or make the access of categories depending on the existence of <code>innerBook1</code>:</p>\n<pre><code>$.store.book..innerBook[?(@.innerBook1)]..category\n</code></pre>\n<p>Which only returns for both examples</p>\n<pre><code>[\n   &quot;innerReference1&quot;,\n   &quot;innerBook1Ref1&quot;\n]\n</code></pre>\n<p>Try it online <a href=\"https://jsonpath.herokuapp.com/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":21103482,"reputation":317,"user_id":15512947,"display_name":"thalhamm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698171317,"creation_date":1698094801,"answer_id":77348299,"question_id":63318501,"body_markdown":"Maybe a simpler example would be the following. \r\n```\r\n[\r\n  {\r\n    &quot;title&quot;: &quot;The Doe&quot;,\r\n    &quot;author&quot;: {\r\n      &quot;name&quot;: &quot;John Doe&quot;\r\n    }\r\n  },\r\n  {\r\n    &quot;title&quot;: &quot;The Does&quot;,\r\n    &quot;author&quot;: [\r\n      {\r\n        &quot;name&quot;: &quot;John Doe&quot;\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;Jane Doe&quot;\r\n      }\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\nI believe the JSON path we are looking for can return the names of all authors without a deep scan for name (i.e., `..name`)\r\n","title":"Jayway JSONPath Expession for Both Object and Array","body":"<p>Maybe a simpler example would be the following.</p>\n<pre><code>[\n  {\n    &quot;title&quot;: &quot;The Doe&quot;,\n    &quot;author&quot;: {\n      &quot;name&quot;: &quot;John Doe&quot;\n    }\n  },\n  {\n    &quot;title&quot;: &quot;The Does&quot;,\n    &quot;author&quot;: [\n      {\n        &quot;name&quot;: &quot;John Doe&quot;\n      },\n      {\n        &quot;name&quot;: &quot;Jane Doe&quot;\n      }\n    ]\n  }\n]\n</code></pre>\n<p>I believe the JSON path we are looking for can return the names of all authors without a deep scan for name (i.e., <code>..name</code>)</p>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698131615,"creation_date":1698131615,"answer_id":77350148,"question_id":63318501,"body_markdown":"It seems that JSONPath can&#39;t return your expected result using the same expression on both object and array.  You may try another JSON library _Josson_ because it handles both object and array with the same expression.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n__Example 1__\r\n\r\n    Josson ex1 = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;    \\&quot;store\\&quot;: {&quot; +\r\n        &quot;        \\&quot;book\\&quot;: [&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;                \\&quot;innerBook\\&quot;: [&quot; +\r\n        &quot;                    {&quot; +\r\n        &quot;                        \\&quot;category\\&quot;: \\&quot;innerReference1\\&quot;,&quot; +\r\n        &quot;                        \\&quot;author\\&quot;: \\&quot;Nigel Rees\\&quot;,&quot; +\r\n        &quot;                        \\&quot;innerBook1\\&quot;: [&quot; +\r\n        &quot;                            {&quot; +\r\n        &quot;                                \\&quot;category\\&quot;: \\&quot;innerBook1Ref1\\&quot;&quot; +\r\n        &quot;                            }&quot; +\r\n        &quot;                        ]&quot; +\r\n        &quot;                    },&quot; +\r\n        &quot;                    {&quot; +\r\n        &quot;                        \\&quot;category\\&quot;: \\&quot;innerReference2\\&quot;,&quot; +\r\n        &quot;                        \\&quot;author\\&quot;: \\&quot;Nigel Rees\\&quot;&quot; +\r\n        &quot;                    }&quot; +\r\n        &quot;                ]&quot; +\r\n        &quot;            }&quot; +\r\n        &quot;        ],&quot; +\r\n        &quot;        \\&quot;bicycle\\&quot;: {&quot; +\r\n        &quot;            \\&quot;color\\&quot;: \\&quot;red\\&quot;,&quot; +\r\n        &quot;            \\&quot;price\\&quot;: 19.95&quot; +\r\n        &quot;        }&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    \\&quot;expensive\\&quot;: 10&quot; +\r\n        &quot;}&quot;);\r\n\r\n_Query_\r\n\r\n    JsonNode node = ex1.getNode(&quot;store.book.innerBook.category&quot;);\r\n    System.out.println(node.toPrettyString());\r\n    //Output: [ &quot;innerReference1&quot;, &quot;innerReference2&quot; ]\r\n\r\n__Example 2__\r\n\r\n    Josson ex2 = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;    \\&quot;store\\&quot;: {&quot; +\r\n        &quot;        \\&quot;book\\&quot;: [&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;                \\&quot;innerBook\\&quot;: &quot; +\r\n        &quot;                    {&quot; +\r\n        &quot;                        \\&quot;category\\&quot;: \\&quot;innerReference1\\&quot;,&quot; +\r\n        &quot;                        \\&quot;author\\&quot;: \\&quot;Nigel Rees\\&quot;,&quot; +\r\n        &quot;                        \\&quot;innerBook1\\&quot;: [&quot; +\r\n        &quot;                            {&quot; +\r\n        &quot;                                \\&quot;category\\&quot;: \\&quot;innerBook1Ref1\\&quot;&quot; +\r\n        &quot;                            }&quot; +\r\n        &quot;                        ]&quot; +\r\n        &quot;                    }&quot; +\r\n        &quot;                &quot; +\r\n        &quot;            }&quot; +\r\n        &quot;        ],&quot; +\r\n        &quot;        \\&quot;bicycle\\&quot;: {&quot; +\r\n        &quot;            \\&quot;color\\&quot;: \\&quot;red\\&quot;,&quot; +\r\n        &quot;            \\&quot;price\\&quot;: 19.95&quot; +\r\n        &quot;        }&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    \\&quot;expensive\\&quot;: 10&quot; +\r\n        &quot;}&quot;);\r\n\r\n_Query_\r\n\r\n    JsonNode node = ex2.getNode(&quot;store.book.innerBook.category&quot;);\r\n    System.out.println(node.toPrettyString());\r\n    //Output: [ &quot;innerReference1&quot; ]\r\n\r\n__Example 3__\r\n\r\nSuggested by @thalhamm\r\n\r\n    Josson ex3 = Josson.fromJsonString(\r\n        &quot;[&quot; +\r\n        &quot;  {&quot; +\r\n        &quot;    \\&quot;title\\&quot;: \\&quot;The Doe\\&quot;,&quot; +\r\n        &quot;    \\&quot;author\\&quot;: {&quot; +\r\n        &quot;      \\&quot;name\\&quot;: \\&quot;John Doe\\&quot;&quot; +\r\n        &quot;    }&quot; +\r\n        &quot;  },&quot; +\r\n        &quot;  {&quot; +\r\n        &quot;    \\&quot;title\\&quot;: \\&quot;The Does\\&quot;,&quot; +\r\n        &quot;    \\&quot;author\\&quot;: [&quot; +\r\n        &quot;      {&quot; +\r\n        &quot;        \\&quot;name\\&quot;: \\&quot;John Doe\\&quot;&quot; +\r\n        &quot;      },&quot; +\r\n        &quot;      {&quot; +\r\n        &quot;        \\&quot;name\\&quot;: \\&quot;Jane Doe\\&quot;&quot; +\r\n        &quot;      }&quot; +\r\n        &quot;    ]&quot; +\r\n        &quot;  }&quot; +\r\n        &quot;]&quot;);\r\n\r\n_Query_\r\n\r\n    JsonNode node = ex3.getNode(&quot;author.name&quot;);\r\n    System.out.println(node.toPrettyString());\r\n    //Output: [ &quot;John Doe&quot;, &quot;John Doe&quot;, &quot;Jane Doe&quot; ]","title":"Jayway JSONPath Expession for Both Object and Array","body":"<p>It seems that JSONPath can't return your expected result using the same expression on both object and array.  You may try another JSON library <em>Josson</em> because it handles both object and array with the same expression.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<p><strong>Example 1</strong></p>\n<pre><code>Josson ex1 = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;    \\&quot;store\\&quot;: {&quot; +\n    &quot;        \\&quot;book\\&quot;: [&quot; +\n    &quot;        {&quot; +\n    &quot;                \\&quot;innerBook\\&quot;: [&quot; +\n    &quot;                    {&quot; +\n    &quot;                        \\&quot;category\\&quot;: \\&quot;innerReference1\\&quot;,&quot; +\n    &quot;                        \\&quot;author\\&quot;: \\&quot;Nigel Rees\\&quot;,&quot; +\n    &quot;                        \\&quot;innerBook1\\&quot;: [&quot; +\n    &quot;                            {&quot; +\n    &quot;                                \\&quot;category\\&quot;: \\&quot;innerBook1Ref1\\&quot;&quot; +\n    &quot;                            }&quot; +\n    &quot;                        ]&quot; +\n    &quot;                    },&quot; +\n    &quot;                    {&quot; +\n    &quot;                        \\&quot;category\\&quot;: \\&quot;innerReference2\\&quot;,&quot; +\n    &quot;                        \\&quot;author\\&quot;: \\&quot;Nigel Rees\\&quot;&quot; +\n    &quot;                    }&quot; +\n    &quot;                ]&quot; +\n    &quot;            }&quot; +\n    &quot;        ],&quot; +\n    &quot;        \\&quot;bicycle\\&quot;: {&quot; +\n    &quot;            \\&quot;color\\&quot;: \\&quot;red\\&quot;,&quot; +\n    &quot;            \\&quot;price\\&quot;: 19.95&quot; +\n    &quot;        }&quot; +\n    &quot;    },&quot; +\n    &quot;    \\&quot;expensive\\&quot;: 10&quot; +\n    &quot;}&quot;);\n</code></pre>\n<p><em>Query</em></p>\n<pre><code>JsonNode node = ex1.getNode(&quot;store.book.innerBook.category&quot;);\nSystem.out.println(node.toPrettyString());\n//Output: [ &quot;innerReference1&quot;, &quot;innerReference2&quot; ]\n</code></pre>\n<p><strong>Example 2</strong></p>\n<pre><code>Josson ex2 = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;    \\&quot;store\\&quot;: {&quot; +\n    &quot;        \\&quot;book\\&quot;: [&quot; +\n    &quot;        {&quot; +\n    &quot;                \\&quot;innerBook\\&quot;: &quot; +\n    &quot;                    {&quot; +\n    &quot;                        \\&quot;category\\&quot;: \\&quot;innerReference1\\&quot;,&quot; +\n    &quot;                        \\&quot;author\\&quot;: \\&quot;Nigel Rees\\&quot;,&quot; +\n    &quot;                        \\&quot;innerBook1\\&quot;: [&quot; +\n    &quot;                            {&quot; +\n    &quot;                                \\&quot;category\\&quot;: \\&quot;innerBook1Ref1\\&quot;&quot; +\n    &quot;                            }&quot; +\n    &quot;                        ]&quot; +\n    &quot;                    }&quot; +\n    &quot;                &quot; +\n    &quot;            }&quot; +\n    &quot;        ],&quot; +\n    &quot;        \\&quot;bicycle\\&quot;: {&quot; +\n    &quot;            \\&quot;color\\&quot;: \\&quot;red\\&quot;,&quot; +\n    &quot;            \\&quot;price\\&quot;: 19.95&quot; +\n    &quot;        }&quot; +\n    &quot;    },&quot; +\n    &quot;    \\&quot;expensive\\&quot;: 10&quot; +\n    &quot;}&quot;);\n</code></pre>\n<p><em>Query</em></p>\n<pre><code>JsonNode node = ex2.getNode(&quot;store.book.innerBook.category&quot;);\nSystem.out.println(node.toPrettyString());\n//Output: [ &quot;innerReference1&quot; ]\n</code></pre>\n<p><strong>Example 3</strong></p>\n<p>Suggested by @thalhamm</p>\n<pre><code>Josson ex3 = Josson.fromJsonString(\n    &quot;[&quot; +\n    &quot;  {&quot; +\n    &quot;    \\&quot;title\\&quot;: \\&quot;The Doe\\&quot;,&quot; +\n    &quot;    \\&quot;author\\&quot;: {&quot; +\n    &quot;      \\&quot;name\\&quot;: \\&quot;John Doe\\&quot;&quot; +\n    &quot;    }&quot; +\n    &quot;  },&quot; +\n    &quot;  {&quot; +\n    &quot;    \\&quot;title\\&quot;: \\&quot;The Does\\&quot;,&quot; +\n    &quot;    \\&quot;author\\&quot;: [&quot; +\n    &quot;      {&quot; +\n    &quot;        \\&quot;name\\&quot;: \\&quot;John Doe\\&quot;&quot; +\n    &quot;      },&quot; +\n    &quot;      {&quot; +\n    &quot;        \\&quot;name\\&quot;: \\&quot;Jane Doe\\&quot;&quot; +\n    &quot;      }&quot; +\n    &quot;    ]&quot; +\n    &quot;  }&quot; +\n    &quot;]&quot;);\n</code></pre>\n<p><em>Query</em></p>\n<pre><code>JsonNode node = ex3.getNode(&quot;author.name&quot;);\nSystem.out.println(node.toPrettyString());\n//Output: [ &quot;John Doe&quot;, &quot;John Doe&quot;, &quot;Jane Doe&quot; ]\n</code></pre>\n"}],"owner":{"account_id":7887635,"reputation":175,"user_id":5959064,"display_name":"Mohammed Abdullah"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1101,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1698171317,"creation_date":1596908740,"question_id":63318501,"body_markdown":"I am having to trouble to retrieve value if parent element can be JSONArray as well as JSONObject. For that I used Deepcopy syntax to retrieve it. Now Problem is am getting additional values if child attribute exists in Inner Array also.\r\n\r\nEg: \r\nJpathExpression:\r\n\r\n    $.store..book..innerBook..category\r\n\r\nResult is :\r\n\r\n    [\r\n       &quot;innerReference1&quot;,\r\n       &quot;innerBook1Ref1&quot;,\r\n       &quot;innerReference2&quot;\r\n    ]\r\n\r\nExample 1 Expected Result is :\r\n\r\n    [\r\n       &quot;innerReference1&quot;,\r\n       &quot;innerReference2&quot;\r\n    ]\r\n\r\nExample 1: \r\n\r\n    {\r\n    \t&quot;store&quot;: {\r\n    \t\t&quot;book&quot;: [\r\n    \t\t{\r\n    \t\t\t\t&quot;innerBook&quot;: [\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\t&quot;category&quot;: &quot;innerReference1&quot;,\r\n    \t\t\t\t\t\t&quot;author&quot;: &quot;Nigel Rees&quot;,\r\n    \t\t\t\t\t\t&quot;innerBook1&quot;: [\r\n    \t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\t&quot;category&quot;: &quot;innerBook1Ref1&quot;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t]\r\n    \t\t\t\t\t},\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\t&quot;category&quot;: &quot;innerReference2&quot;,\r\n    \t\t\t\t\t\t&quot;author&quot;: &quot;Nigel Rees&quot;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t]\r\n    \t\t\t}\r\n    \t\t],\r\n    \t\t&quot;bicycle&quot;: {\r\n    \t\t\t&quot;color&quot;: &quot;red&quot;,\r\n    \t\t\t&quot;price&quot;: 19.95\r\n    \t\t}\r\n    \t},\r\n    \t&quot;expensive&quot;: 10\r\n    }\r\n\r\nExample 2:\r\n\r\n    {\r\n        &quot;store&quot;: {\r\n            &quot;book&quot;: [\r\n            {\r\n                    &quot;innerBook&quot;: \r\n                        {\r\n                            &quot;category&quot;: &quot;innerReference1&quot;,\r\n                            &quot;author&quot;: &quot;Nigel Rees&quot;,\r\n                            &quot;innerBook1&quot;: [\r\n                                {\r\n                                    &quot;category&quot;: &quot;innerBook1Ref1&quot;\r\n                                }\r\n                            ]\r\n                        }\r\n                    \r\n                }\r\n            ],\r\n            &quot;bicycle&quot;: {\r\n                &quot;color&quot;: &quot;red&quot;,\r\n                &quot;price&quot;: 19.95\r\n            }\r\n        },\r\n        &quot;expensive&quot;: 10\r\n    }\r\n\r\nExample 2 Expected Result is :\r\n\r\n    [\r\n       &quot;innerReference1&quot;\r\n    ]","title":"Jayway JSONPath Expession for Both Object and Array","body":"<p>I am having to trouble to retrieve value if parent element can be JSONArray as well as JSONObject. For that I used Deepcopy syntax to retrieve it. Now Problem is am getting additional values if child attribute exists in Inner Array also.</p>\n<p>Eg:\nJpathExpression:</p>\n<pre><code>$.store..book..innerBook..category\n</code></pre>\n<p>Result is :</p>\n<pre><code>[\n   &quot;innerReference1&quot;,\n   &quot;innerBook1Ref1&quot;,\n   &quot;innerReference2&quot;\n]\n</code></pre>\n<p>Example 1 Expected Result is :</p>\n<pre><code>[\n   &quot;innerReference1&quot;,\n   &quot;innerReference2&quot;\n]\n</code></pre>\n<p>Example 1:</p>\n<pre><code>{\n    &quot;store&quot;: {\n        &quot;book&quot;: [\n        {\n                &quot;innerBook&quot;: [\n                    {\n                        &quot;category&quot;: &quot;innerReference1&quot;,\n                        &quot;author&quot;: &quot;Nigel Rees&quot;,\n                        &quot;innerBook1&quot;: [\n                            {\n                                &quot;category&quot;: &quot;innerBook1Ref1&quot;\n                            }\n                        ]\n                    },\n                    {\n                        &quot;category&quot;: &quot;innerReference2&quot;,\n                        &quot;author&quot;: &quot;Nigel Rees&quot;\n                    }\n                ]\n            }\n        ],\n        &quot;bicycle&quot;: {\n            &quot;color&quot;: &quot;red&quot;,\n            &quot;price&quot;: 19.95\n        }\n    },\n    &quot;expensive&quot;: 10\n}\n</code></pre>\n<p>Example 2:</p>\n<pre><code>{\n    &quot;store&quot;: {\n        &quot;book&quot;: [\n        {\n                &quot;innerBook&quot;: \n                    {\n                        &quot;category&quot;: &quot;innerReference1&quot;,\n                        &quot;author&quot;: &quot;Nigel Rees&quot;,\n                        &quot;innerBook1&quot;: [\n                            {\n                                &quot;category&quot;: &quot;innerBook1Ref1&quot;\n                            }\n                        ]\n                    }\n                \n            }\n        ],\n        &quot;bicycle&quot;: {\n            &quot;color&quot;: &quot;red&quot;,\n            &quot;price&quot;: 19.95\n        }\n    },\n    &quot;expensive&quot;: 10\n}\n</code></pre>\n<p>Example 2 Expected Result is :</p>\n<pre><code>[\n   &quot;innerReference1&quot;\n]\n</code></pre>\n"},{"tags":["java","oracle","connection","recover"],"answers":[{"tags":[],"owner":{"account_id":1181272,"reputation":11208,"user_id":1544250,"accept_rate":82,"display_name":"Korhan Ozturk"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1332146787,"creation_date":1332146787,"answer_id":9767173,"question_id":9766168,"body_markdown":"Followings could be the possibilities which could be causing the exception:\r\n\r\n 1. Network problem: That is the network between the database and application server causing  the physical connection to be dropped after a period of time. It&#39;s probably due to a firewall running behind the network which is configured to kill db connections after a specified period of time. You may consider a workaround to maintain the connection alive all the time simply by re-configuring your application server. For Tomcat, you may try adding `validationQuery=&quot;select &#39;validationQuery&#39; from dua`l in the Tomcat datasource conf file (context.xml)\r\n\r\n 2. The connections to the database server are being reset and the client is not notified by the database driver. The problem in this case is that the Oracle driver is discovering that it&#39;s socket to the DBMS somehow (firewall again, maybe?) has been closed by the other end. You may consider setting your connection timeout (in the pool) shorter than the network/DB server timeout as a solution. ","title":"java.sql.SQLException: Io exception: Broken pipe how to recover without restart?","body":"<p>Followings could be the possibilities which could be causing the exception:</p>\n\n<ol>\n<li><p>Network problem: That is the network between the database and application server causing  the physical connection to be dropped after a period of time. It's probably due to a firewall running behind the network which is configured to kill db connections after a specified period of time. You may consider a workaround to maintain the connection alive all the time simply by re-configuring your application server. For Tomcat, you may try adding <code>validationQuery=\"select 'validationQuery' from dua</code>l in the Tomcat datasource conf file (context.xml)</p></li>\n<li><p>The connections to the database server are being reset and the client is not notified by the database driver. The problem in this case is that the Oracle driver is discovering that it's socket to the DBMS somehow (firewall again, maybe?) has been closed by the other end. You may consider setting your connection timeout (in the pool) shorter than the network/DB server timeout as a solution. </p></li>\n</ol>\n"}],"owner":{"account_id":365724,"reputation":23428,"user_id":710818,"accept_rate":82,"display_name":"user710818"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44339,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":9767173,"answer_count":1,"score":10,"last_activity_date":1698171212,"creation_date":1332140336,"question_id":9766168,"body_markdown":"In my application I use connection to Oracle, when connection lost and I try to re-connect I receive exception:\r\n\r\n    java.sql.SQLException: Io exception: Broken pipe\r\n        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:124)\r\n        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:161)\r\n        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:273)\r\n        at oracle.jdbc.driver.T4CStatement.fetch(T4CStatement.java:540)\r\n        at oracle.jdbc.driver.OracleResultSetImpl.close_or_fetch_from_next(OracleResultSetImpl.java:264)\r\n        at oracle.jdbc.driver.OracleResultSetImpl.next(OracleResultSetImpl.java:196)\r\n\r\nFor recover I need to restart application, does it possible recover without restart?\r\nThanks.","title":"java.sql.SQLException: Io exception: Broken pipe how to recover without restart?","body":"<p>In my application I use connection to Oracle, when connection lost and I try to re-connect I receive exception:</p>\n\n<pre><code>java.sql.SQLException: Io exception: Broken pipe\n    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:124)\n    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:161)\n    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:273)\n    at oracle.jdbc.driver.T4CStatement.fetch(T4CStatement.java:540)\n    at oracle.jdbc.driver.OracleResultSetImpl.close_or_fetch_from_next(OracleResultSetImpl.java:264)\n    at oracle.jdbc.driver.OracleResultSetImpl.next(OracleResultSetImpl.java:196)\n</code></pre>\n\n<p>For recover I need to restart application, does it possible recover without restart?\nThanks.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1509986392,"post_id":47140754,"comment_id":81233222,"body_markdown":"What is `root` here? Can you create a [MCVE]?","body":"What is <code>root</code> here? Can you create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":11132960,"reputation":51,"user_id":8172372,"display_name":"sp8n-4k"},"score":0,"creation_date":1509988566,"post_id":47140754,"comment_id":81234614,"body_markdown":"@James_D Sorry, the root is a stackpane, I changed the example to reflect that.","body":"@James_D Sorry, the root is a stackpane, I changed the example to reflect that."}],"answers":[{"tags":[],"owner":{"account_id":11132960,"reputation":51,"user_id":8172372,"display_name":"sp8n-4k"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1510329426,"creation_date":1510329426,"answer_id":47226681,"question_id":47140754,"body_markdown":"Mystery solved! Playing with the SplitPane&#39;s divider bindings seemed to be the solution. It isn&#39;t perfect, as sometimes the image is not flush with either top/bottom nor left/right edges depending on the width/height of the Stage, but it gets the job done.\r\n\r\n    Platform.runLater(() -&gt; {\r\n        image.fitWidthProperty().bind(splitPane.getDividers().get(0).positionProperty().multiply(splitPane.widthProperty()));\r\n        image.fitHeightProperty().bind(splitPane.getDividers().get(0).positionProperty().multiply(splitPane.heightProperty()));\r\n        imgWebCamCapturedImage.setPreserveRatio(true);\r\n    });","title":"Resize ImageView within SplitPane","body":"<p>Mystery solved! Playing with the SplitPane's divider bindings seemed to be the solution. It isn't perfect, as sometimes the image is not flush with either top/bottom nor left/right edges depending on the width/height of the Stage, but it gets the job done.</p>\n\n<pre><code>Platform.runLater(() -&gt; {\n    image.fitWidthProperty().bind(splitPane.getDividers().get(0).positionProperty().multiply(splitPane.widthProperty()));\n    image.fitHeightProperty().bind(splitPane.getDividers().get(0).positionProperty().multiply(splitPane.heightProperty()));\n    imgWebCamCapturedImage.setPreserveRatio(true);\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11829169,"reputation":476,"user_id":9943190,"display_name":"maroc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698171140,"creation_date":1698171140,"answer_id":77354491,"question_id":47140754,"body_markdown":"For anyone else looking for a way to resize an ImageView in a SplitPane, you can use a StackPane.\r\n\r\n        val iv = ImageView()\r\n        val vbox = VBox()\r\n        VBox.setVgrow(vbox, Priority.ALWAYS)\r\n        vbox.widthProperty().addListener { observable, oldValue, newValue -&gt;\r\n            iv.fitWidth = newValue.toDouble()\r\n        }\r\n        vbox.heightProperty().addListener { observable, oldValue, newValue -&gt;\r\n            iv.fitHeight = newValue.toDouble()\r\n        }\r\n        iv.isManaged = false\r\n        val stack = StackPane(vbox, iv)\r\n        val sp = SplitPane(VBox(), stack)\r\n\r\nThis creates a stack pane containing an empty VBox and an ImageView.  When the VBox is resized, the ImageView fit properties are changed to match the new size.  Since the image view &quot;isManaged&quot; is set to false, its size is ignored for deciding the layout allowing the split pane to be dragged to change the size of the VBox in the bottom of the stack.\r\n    ","title":"Resize ImageView within SplitPane","body":"<p>For anyone else looking for a way to resize an ImageView in a SplitPane, you can use a StackPane.</p>\n<pre><code>    val iv = ImageView()\n    val vbox = VBox()\n    VBox.setVgrow(vbox, Priority.ALWAYS)\n    vbox.widthProperty().addListener { observable, oldValue, newValue -&gt;\n        iv.fitWidth = newValue.toDouble()\n    }\n    vbox.heightProperty().addListener { observable, oldValue, newValue -&gt;\n        iv.fitHeight = newValue.toDouble()\n    }\n    iv.isManaged = false\n    val stack = StackPane(vbox, iv)\n    val sp = SplitPane(VBox(), stack)\n</code></pre>\n<p>This creates a stack pane containing an empty VBox and an ImageView.  When the VBox is resized, the ImageView fit properties are changed to match the new size.  Since the image view &quot;isManaged&quot; is set to false, its size is ignored for deciding the layout allowing the split pane to be dragged to change the size of the VBox in the bottom of the stack.</p>\n"}],"owner":{"account_id":11132960,"reputation":51,"user_id":8172372,"display_name":"sp8n-4k"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":389,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":47226681,"answer_count":2,"score":1,"last_activity_date":1698171140,"creation_date":1509983308,"question_id":47140754,"body_markdown":"I have an ImageView wrapped in a StackPane that is added to the top section of a SplitPane. When I move the SplitPane&#39;s divider, I want the ImageView to resize to fit the allotted space, while also preserving the ImageView&#39;s size ratio. I have attempted to achieve this with the following code snippet:\r\n\r\n    Platform.runLater(() -&gt; {\r\n            image.fitHeightProperty().bind(stackpane.heightProperty());\r\n            image.fitWidthProperty().bind(stackpane.widthProperty());\r\n            image.setPreserveRatio(true);\r\n        });\r\n\r\nThe problem with this however is that the ImageView will only grow, but not shrink. How can I fix this?","title":"Resize ImageView within SplitPane","body":"<p>I have an ImageView wrapped in a StackPane that is added to the top section of a SplitPane. When I move the SplitPane's divider, I want the ImageView to resize to fit the allotted space, while also preserving the ImageView's size ratio. I have attempted to achieve this with the following code snippet:</p>\n\n<pre><code>Platform.runLater(() -&gt; {\n        image.fitHeightProperty().bind(stackpane.heightProperty());\n        image.fitWidthProperty().bind(stackpane.widthProperty());\n        image.setPreserveRatio(true);\n    });\n</code></pre>\n\n<p>The problem with this however is that the ImageView will only grow, but not shrink. How can I fix this?</p>\n"},{"tags":["java","algorithm","graph","subgraph"],"comments":[{"owner":{"account_id":53648,"reputation":19555,"user_id":160406,"accept_rate":51,"display_name":"Ollie Glass"},"score":1,"creation_date":1251563392,"post_id":1348783,"comment_id":1188011,"body_markdown":"Thank you all, especially MAK and Agor. I&#39;m going to start with a flood fill and breadth first search then take it from there.","body":"Thank you all, especially MAK and Agor. I&#39;m going to start with a flood fill and breadth first search then take it from there."}],"answers":[{"tags":[],"owner":{"account_id":45632,"reputation":3511,"user_id":134596,"accept_rate":83,"display_name":"oggy"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1251486741,"creation_date":1251486741,"answer_id":1348814,"question_id":1348783,"body_markdown":"I&#39;m assuming you want to find all the (strongly) connected components? For that you can use [Tarjan&#39;s algorithm][1] (a variant of DFS)\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Tarjan&#39;s_strongly_connected_components_algorithm\r\n","title":"Finding all disconnected subgraphs in a graph","body":"<p>I'm assuming you want to find all the (strongly) connected components? For that you can use <a href=\"http://en.wikipedia.org/wiki/Tarjan&#39;s_strongly_connected_components_algorithm\" rel=\"nofollow noreferrer\">Tarjan's algorithm</a> (a variant of DFS)</p>\n"},{"tags":[],"owner":{"account_id":24553,"reputation":15108,"user_id":62539,"accept_rate":88,"display_name":"MedicineMan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1251487354,"creation_date":1251487354,"answer_id":1348864,"question_id":1348783,"body_markdown":"What about a breadth first search to find all connected nodes?  Once you have the list of connected nodes, you subtract this list from the list of all nodes.  You end up with a list of disconnected nodes","title":"Finding all disconnected subgraphs in a graph","body":"<p>What about a breadth first search to find all connected nodes?  Once you have the list of connected nodes, you subtract this list from the list of all nodes.  You end up with a list of disconnected nodes</p>\n"},{"tags":[],"owner":{"account_id":48454,"reputation":12964,"user_id":143969,"accept_rate":91,"display_name":"aperkins"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1251488966,"creation_date":1251488966,"answer_id":1348993,"question_id":1348783,"body_markdown":"&lt;a href=&quot;http://jgrapht.sourceforge.net/&quot;&gt;JGraphT&lt;/a&gt; is a nice open source graphing library licensed under the LGPL license.  I have used it in the past to deal with graphs and detecting cycles within the graphs.  It is also fairly easy to use, and you can use &lt;a href=&quot;http://www.jgraph.com/&quot;&gt;JGraph&lt;/a&gt; to visualize the graphs.","title":"Finding all disconnected subgraphs in a graph","body":"<p><a href=\"http://jgrapht.sourceforge.net/\" rel=\"nofollow noreferrer\">JGraphT</a> is a nice open source graphing library licensed under the LGPL license.  I have used it in the past to deal with graphs and detecting cycles within the graphs.  It is also fairly easy to use, and you can use <a href=\"http://www.jgraph.com/\" rel=\"nofollow noreferrer\">JGraph</a> to visualize the graphs.</p>\n"},{"tags":[],"owner":{"account_id":42964,"reputation":26240,"user_id":125382,"accept_rate":91,"display_name":"MAK"},"down_vote_count":0,"up_vote_count":75,"is_accepted":true,"score":75,"last_activity_date":1251499272,"creation_date":1251489015,"answer_id":1348995,"question_id":1348783,"body_markdown":"I think what you are looking for is generally called a [Flood Fill][1]. It is up to you whether you traverse the graph through a BFS or a DFS. \r\n\r\nBasically you take an unlabeled (AKA uncoloured) node and assign a new label to it. You assign the same label to all nodes adjacent to that one, and so on to all nodes that are reachable from that node. \r\n\r\nWhen no more reachable nodes can be labeled, you start over by picking another unlabeled node. Notice that the fact that this new node is unlabeled implies that it is not reachable from our earlier node and is thus in a different disconnected component. \r\n\r\nWhen there are no more unlabeled nodes, the number of distinct labels you had to use is the number of components of the graph. The label for each node tells you which node is part of which component.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Flood_fill","title":"Finding all disconnected subgraphs in a graph","body":"<p>I think what you are looking for is generally called a <a href=\"http://en.wikipedia.org/wiki/Flood_fill\" rel=\"noreferrer\">Flood Fill</a>. It is up to you whether you traverse the graph through a BFS or a DFS. </p>\n\n<p>Basically you take an unlabeled (AKA uncoloured) node and assign a new label to it. You assign the same label to all nodes adjacent to that one, and so on to all nodes that are reachable from that node. </p>\n\n<p>When no more reachable nodes can be labeled, you start over by picking another unlabeled node. Notice that the fact that this new node is unlabeled implies that it is not reachable from our earlier node and is thus in a different disconnected component. </p>\n\n<p>When there are no more unlabeled nodes, the number of distinct labels you had to use is the number of components of the graph. The label for each node tells you which node is part of which component.</p>\n"},{"tags":[],"owner":{"account_id":46320,"reputation":2425,"user_id":136774,"display_name":"agorenst"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1251489298,"creation_date":1251489298,"answer_id":1349017,"question_id":1348783,"body_markdown":"There are many facets of this question that are not fully explained, so I&#39;m going to give a somewhat exhaustive answer. My tendency to post walls-of-text notwithstanding. :/ Note also that I&#39;m assuming this is a homework question or self-education question, so I&#39;m not going to give a straight-up answer.\r\n\r\nThe two basic algorithms for detecting connectivity of a graph is [Depth First Search](http://en.wikipedia.org/wiki/Depth-first_search) and [Breadth First Search](http://en.wikipedia.org/wiki/Breadth-first_search). Those are really the 2 starting points you want to look at. Both will get you to the solution, but in different ways, and its hard to argue which is &quot;better&quot; without considering some pretty in-depth aspects of the problem. But let&#39;s move on.\r\n\r\nAs I mentioned before, you left out some important details, and I&#39;ll touch upon some possibilities here.\r\n\r\nIs your graph directed or undirected? and do you consider connectivity in the &quot;strong&quot; sense (in which case, see oggy&#39;s answer), or connectivity in the &quot;weak&quot; sense? Depending on your answer, you will have to approach your algorithm in a subtly different way. Note that, for an undirected graph, weak and strong connectivity are equivalent, so that&#39;s nice. But you&#39;ll have to keep the structure of the graph in mind regardless, while implementing or finding an algorithm.\r\n\r\nFurthermore, there is the question of what you mean by &quot;finding the subgraphs&quot; (paraphrase). Usually graph connectivity is a decision problem -- simply &quot;there is one connected graph&quot; or &quot;there are two or more sub-graphs (aka, it&#39;s disconnected)&quot;. Having an algorithm for that requires the least amount of bookwork, which is nice. :) The next step up would be the *count* of graphs, literally the number of them, and that bookwork is also not so bad. Penultimately, you may want a list of nodes in each sub-graph. Lastly, you may want to literally copy out the sub-graphs, edges and all (so the return type would be a list of graphs, I suppose, with an implied invariant that each graph is connected). None of these different result-types would require a different algorithm, but *will certainly* require a different approach to the bookwork.\r\n\r\nAll of this may seem like a ridiculous amount of overkill for what is a pretty basic question, but I thought I&#39;d just highlight all of the aspects involved in even such a simple graph question. As a sort of cliffhanger, note how none of this even yet touches upon runtime or memory usage! :)\r\n- Agor","title":"Finding all disconnected subgraphs in a graph","body":"<p>There are many facets of this question that are not fully explained, so I'm going to give a somewhat exhaustive answer. My tendency to post walls-of-text notwithstanding. :/ Note also that I'm assuming this is a homework question or self-education question, so I'm not going to give a straight-up answer.</p>\n\n<p>The two basic algorithms for detecting connectivity of a graph is <a href=\"http://en.wikipedia.org/wiki/Depth-first_search\" rel=\"noreferrer\">Depth First Search</a> and <a href=\"http://en.wikipedia.org/wiki/Breadth-first_search\" rel=\"noreferrer\">Breadth First Search</a>. Those are really the 2 starting points you want to look at. Both will get you to the solution, but in different ways, and its hard to argue which is \"better\" without considering some pretty in-depth aspects of the problem. But let's move on.</p>\n\n<p>As I mentioned before, you left out some important details, and I'll touch upon some possibilities here.</p>\n\n<p>Is your graph directed or undirected? and do you consider connectivity in the \"strong\" sense (in which case, see oggy's answer), or connectivity in the \"weak\" sense? Depending on your answer, you will have to approach your algorithm in a subtly different way. Note that, for an undirected graph, weak and strong connectivity are equivalent, so that's nice. But you'll have to keep the structure of the graph in mind regardless, while implementing or finding an algorithm.</p>\n\n<p>Furthermore, there is the question of what you mean by \"finding the subgraphs\" (paraphrase). Usually graph connectivity is a decision problem -- simply \"there is one connected graph\" or \"there are two or more sub-graphs (aka, it's disconnected)\". Having an algorithm for that requires the least amount of bookwork, which is nice. :) The next step up would be the <em>count</em> of graphs, literally the number of them, and that bookwork is also not so bad. Penultimately, you may want a list of nodes in each sub-graph. Lastly, you may want to literally copy out the sub-graphs, edges and all (so the return type would be a list of graphs, I suppose, with an implied invariant that each graph is connected). None of these different result-types would require a different algorithm, but <em>will certainly</em> require a different approach to the bookwork.</p>\n\n<p>All of this may seem like a ridiculous amount of overkill for what is a pretty basic question, but I thought I'd just highlight all of the aspects involved in even such a simple graph question. As a sort of cliffhanger, note how none of this even yet touches upon runtime or memory usage! :)\n- Agor</p>\n"},{"tags":[],"owner":{"account_id":51681,"reputation":13106,"user_id":154461,"accept_rate":90,"display_name":"harschware"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1268068980,"creation_date":1268068980,"answer_id":2403216,"question_id":1348783,"body_markdown":"I ran into a similar problem where I wanted all the weakly connected subgraphs of a directed graph.  I blogged about it [here][1].  I used the [JUNG][2] API and compare two approaches.  My first approach could be used as a template to solve your problem.\r\n\r\n[1]: http://harschware.blogspot.com/2010/02/converting-disconnected-graphs-to.html\r\n[2]: http://jung.sourceforge.net/","title":"Finding all disconnected subgraphs in a graph","body":"<p>I ran into a similar problem where I wanted all the weakly connected subgraphs of a directed graph.  I blogged about it <a href=\"http://harschware.blogspot.com/2010/02/converting-disconnected-graphs-to.html\" rel=\"nofollow noreferrer\">here</a>.  I used the <a href=\"http://jung.sourceforge.net/\" rel=\"nofollow noreferrer\">JUNG</a> API and compare two approaches.  My first approach could be used as a template to solve your problem.</p>\n"},{"tags":[],"owner":{"account_id":130027,"reputation":26113,"user_id":328989,"accept_rate":79,"display_name":"Datageek"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1626089054,"creation_date":1341779003,"answer_id":11386404,"question_id":1348783,"body_markdown":"Not a Java implementation but perhaps it will be useful for someone, here is how to do it in Python:\r\n```python\r\nimport networkx as nx\r\ng = nx.Graph()\r\n# add nodes/edges to graph\r\n\r\nd = list(nx.connected_components(g)) \r\n# d contains disconnected subgraphs\r\n# d[0] contains the biggest subgraph\r\n```\r\nMore information [here][1].\r\n\r\n\r\n  [1]: https://networkx.org/documentation/stable/reference/algorithms/generated/networkx.algorithms.components.connected_components.html#networkx.algorithms.components.connected_components","title":"Finding all disconnected subgraphs in a graph","body":"<p>Not a Java implementation but perhaps it will be useful for someone, here is how to do it in Python:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import networkx as nx\ng = nx.Graph()\n# add nodes/edges to graph\n\nd = list(nx.connected_components(g)) \n# d contains disconnected subgraphs\n# d[0] contains the biggest subgraph\n</code></pre>\n<p>More information <a href=\"https://networkx.org/documentation/stable/reference/algorithms/generated/networkx.algorithms.components.connected_components.html#networkx.algorithms.components.connected_components\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":236301,"reputation":8390,"user_id":503688,"display_name":"yoyo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1644711031,"creation_date":1644636812,"answer_id":71088779,"question_id":1348783,"body_markdown":"I probably should have found a standard algorithm ([Wikipedia](https://en.wikipedia.org/wiki/Component_(graph_theory)) has some suggestions), but I came up with this on my own and it worked well for my purposes. My C# implementation takes a couple seconds to process a graph with 40,000 nodes and 44,000 edges to find 160 subgraphs and 20,000 unconnected nodes. I used a HashSet to store each subgraph group, so testing group membership is approximately O(1), and the overall algorithm becomes O(E*C) where E is the number of edges and C is the number of connected components in the graph. Wikipedia mentions an O(N) algorithm, linear in the number of nodes, so I&#39;m sure mine is not maximally efficient, but it was plenty fast for my application. (Edit: I&#39;m also glossing over the cost of merging groups, so don&#39;t put too much weight on my complexity analysis.)\r\n\r\nLogic:\r\n\r\n```\r\nFor each edge A-&gt;B\r\n  If A is in a group and B is not, add B to group A\r\n  If A is not in a group and B is, add A to group B\r\n  If A and B are in different groups, merge the groups\r\n  If neither A or B is in a group, create new group containing A and B\r\n```\r\n\r\nPseudocode:\r\n\r\n```\r\ngraph = {nodes, edges}\r\ngroups = {}\r\nforeach edge A-&gt;B in graph.edges:\r\n\tgroupA = findgroup(A)\r\n\tgroupB = findgroup(B)\r\n\tif (groupA &amp;&amp; !groupB)\r\n\t\tgroupA.add(B)\r\n\telif (!groupA &amp;&amp; groupB)\r\n\t\tgroupB.add(A)\r\n\telif (groupA &amp;&amp; groupB)\r\n\t\tif (groupA != groupB)\r\n\t\t\tgroupA.union(groupB)\r\n\t\t\tgroups.delete(groupB)\r\n\telse\r\n\t\tgroups.add({A,B})\r\n```\r\n\r\n```\r\nfindgroup(node):\r\n\tfor group in groups:\r\n\t\tif group.contains(node):\r\n\t\t\treturn group\r\n\treturn null\r\n```\r\n\r\nNote that this won&#39;t capture any nodes that aren&#39;t involved in edges. For my particular purposes this was fine. If you want to get all the single-node groups you can do a final pass:\r\n\r\n```\r\nforeach node in graph.nodes:\r\n    group = findgroup(node)\r\n    if !group:\r\n        groups.add({node})\r\n```","title":"Finding all disconnected subgraphs in a graph","body":"<p>I probably should have found a standard algorithm (<a href=\"https://en.wikipedia.org/wiki/Component_(graph_theory)\" rel=\"nofollow noreferrer\">Wikipedia</a> has some suggestions), but I came up with this on my own and it worked well for my purposes. My C# implementation takes a couple seconds to process a graph with 40,000 nodes and 44,000 edges to find 160 subgraphs and 20,000 unconnected nodes. I used a HashSet to store each subgraph group, so testing group membership is approximately O(1), and the overall algorithm becomes O(E*C) where E is the number of edges and C is the number of connected components in the graph. Wikipedia mentions an O(N) algorithm, linear in the number of nodes, so I'm sure mine is not maximally efficient, but it was plenty fast for my application. (Edit: I'm also glossing over the cost of merging groups, so don't put too much weight on my complexity analysis.)</p>\n<p>Logic:</p>\n<pre><code>For each edge A-&gt;B\n  If A is in a group and B is not, add B to group A\n  If A is not in a group and B is, add A to group B\n  If A and B are in different groups, merge the groups\n  If neither A or B is in a group, create new group containing A and B\n</code></pre>\n<p>Pseudocode:</p>\n<pre><code>graph = {nodes, edges}\ngroups = {}\nforeach edge A-&gt;B in graph.edges:\n    groupA = findgroup(A)\n    groupB = findgroup(B)\n    if (groupA &amp;&amp; !groupB)\n        groupA.add(B)\n    elif (!groupA &amp;&amp; groupB)\n        groupB.add(A)\n    elif (groupA &amp;&amp; groupB)\n        if (groupA != groupB)\n            groupA.union(groupB)\n            groups.delete(groupB)\n    else\n        groups.add({A,B})\n</code></pre>\n<pre><code>findgroup(node):\n    for group in groups:\n        if group.contains(node):\n            return group\n    return null\n</code></pre>\n<p>Note that this won't capture any nodes that aren't involved in edges. For my particular purposes this was fine. If you want to get all the single-node groups you can do a final pass:</p>\n<pre><code>foreach node in graph.nodes:\n    group = findgroup(node)\n    if !group:\n        groups.add({node})\n</code></pre>\n"}],"owner":{"account_id":53648,"reputation":19555,"user_id":160406,"accept_rate":51,"display_name":"Ollie Glass"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41563,"favorite_count":0,"down_vote_count":0,"up_vote_count":60,"accepted_answer_id":1348995,"answer_count":8,"score":60,"last_activity_date":1698171138,"creation_date":1251486419,"question_id":1348783,"body_markdown":"I have a graph which contains an unknown number of disconnected subgraphs. What&#39;s a good algorithm (or Java library) to find them all?","title":"Finding all disconnected subgraphs in a graph","body":"<p>I have a graph which contains an unknown number of disconnected subgraphs. What's a good algorithm (or Java library) to find them all?</p>\n"},{"tags":["java","spring","spring-boot","elasticsearch"],"comments":[{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1563611830,"post_id":57123020,"comment_id":100763788,"body_markdown":"i think this is because of some version conflicts","body":"i think this is because of some version conflicts"}],"answers":[{"tags":[],"owner":{"account_id":1642693,"reputation":1020,"user_id":1514845,"display_name":"Denis.Kipchakbaev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563790487,"creation_date":1563790487,"answer_id":57143770,"question_id":57123020,"body_markdown":"Elasticsearch 7.x still not supported by spring-data-elasticsearch.\r\nLast stable release is for Elasticsearch 6.2.2 as of July 2019\r\n\r\nSee compatibility matrix: https://github.com/spring-projects/spring-data-elasticsearch#maven-configuration","title":"spring data elasticsearch 7 class not found exception","body":"<p>Elasticsearch 7.x still not supported by spring-data-elasticsearch.\nLast stable release is for Elasticsearch 6.2.2 as of July 2019</p>\n\n<p>See compatibility matrix: <a href=\"https://github.com/spring-projects/spring-data-elasticsearch#maven-configuration\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-data-elasticsearch#maven-configuration</a></p>\n"},{"tags":[],"owner":{"account_id":302841,"reputation":390,"user_id":2521176,"display_name":"M&#225;rio de S&#225; Vera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641574219,"creation_date":1641574219,"answer_id":70624569,"question_id":57123020,"body_markdown":"The conflict I was having was related to Actuator : \r\n&lt;artifactId&gt;spring-boot-actuatorautoconfigure&lt;/artifactId&gt;\r\n\r\nAs soon as I removed that dependency ... all went fine ! FWIW","title":"spring data elasticsearch 7 class not found exception","body":"<p>The conflict I was having was related to Actuator :\nspring-boot-actuatorautoconfigure</p>\n<p>As soon as I removed that dependency ... all went fine ! FWIW</p>\n"}],"owner":{"account_id":11760910,"reputation":448,"user_id":8606979,"display_name":"sadeghpro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8301,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1698170740,"creation_date":1563611298,"question_id":57123020,"body_markdown":"I want to use spring data elasticsearch with elastic docker 7.2\r\n```\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-elasticsearch&#39;\r\n```\r\nbut when spring boot app runs this error appears:\r\n```\r\n2019-07-20 12:35:38.564 ERROR 21804 --- [           main] .d.e.r.s.AbstractElasticsearchRepository : failed to load elasticsearch nodes : org.elasticsearch.client.transport.NoNodeAvailableException: None of the configured nodes are available: [{#transport#-1}{aD43cDv-QnG1e16fnU0dsQ}{localhost}{127.0.0.1:9300}]\r\n```\r\nand in elasticsearch log\r\n```\r\nReceived message from unsupported version: [6.4.3] minimal compatible version is: [6.8.0]\r\n```\r\nI use gradle then I add `ext[&#39;elasticsearch.version&#39;] = &#39;7.2.0&#39;` now error changes \r\n```\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method &#39;mvcConversionService&#39; threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;instagramUserRepo&#39;: Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\t... 46 common frames omitted\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;instagramUserRepo&#39;: Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1778) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1111) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.data.repository.support.Repositories.cacheRepositoryFactory(Repositories.java:97) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.repository.support.Repositories.populateRepositoryFactoryInformation(Repositories.java:90) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.repository.support.Repositories.&lt;init&gt;(Repositories.java:83) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.repository.support.DomainClassConverter.setApplicationContext(DomainClassConverter.java:109) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.web.config.SpringDataWebConfiguration.addFormatters(SpringDataWebConfiguration.java:131) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.web.servlet.config.annotation.WebMvcConfigurerComposite.addFormatters(WebMvcConfigurerComposite.java:81) ~[spring-webmvc-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration.addFormatters(DelegatingWebMvcConfiguration.java:78) ~[spring-webmvc-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration.mvcConversionService(WebMvcAutoConfiguration.java:476) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration$$EnhancerBySpringCGLIB$$1f0f7b64.CGLIB$mvcConversionService$1(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration$$EnhancerBySpringCGLIB$$1f0f7b64$$FastClassBySpringCGLIB$$60445fb2.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration$$EnhancerBySpringCGLIB$$1f0f7b64.mvcConversionService(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_212]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_212]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\t... 47 common frames omitted\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\r\n\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:184) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport.lambda$getTargetRepositoryViaReflection$3(RepositoryFactorySupport.java:513) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat java.util.Optional.map(Optional.java:215) ~[na:1.8.0_212]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport.getTargetRepositoryViaReflection(RepositoryFactorySupport.java:513) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport.getTargetRepositoryViaReflection(RepositoryFactorySupport.java:498) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.elasticsearch.repository.support.ElasticsearchRepositoryFactory.getTargetRepository(ElasticsearchRepositoryFactory.java:74) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:305) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:297) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.util.Lazy.getNullable(Lazy.java:211) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.util.Lazy.get(Lazy.java:94) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:300) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\r\n\tat org.springframework.data.elasticsearch.repository.support.ElasticsearchRepositoryFactoryBean.afterPropertiesSet(ElasticsearchRepositoryFactoryBean.java:67) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1837) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1774) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\t... 72 common frames omitted\r\nCaused by: java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\r\n\tat org.springframework.data.elasticsearch.core.ElasticsearchTemplate.putMapping(ElasticsearchTemplate.java:249) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat org.springframework.data.elasticsearch.core.ElasticsearchTemplate.putMapping(ElasticsearchTemplate.java:233) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat org.springframework.data.elasticsearch.core.ElasticsearchTemplate.putMapping(ElasticsearchTemplate.java:228) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat org.springframework.data.elasticsearch.repository.support.AbstractElasticsearchRepository.putMapping(AbstractElasticsearchRepository.java:100) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat org.springframework.data.elasticsearch.repository.support.AbstractElasticsearchRepository.&lt;init&gt;(AbstractElasticsearchRepository.java:88) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository.&lt;init&gt;(SimpleElasticsearchRepository.java:36) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.8.0_212]\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:1.8.0_212]\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:1.8.0_212]\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423) ~[na:1.8.0_212]\r\n\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\t... 85 common frames omitted\r\nCaused by: java.lang.ClassNotFoundException: org.elasticsearch.action.admin.indices.mapping.put.PutMappingResponse\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:382) ~[na:1.8.0_212]\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_212]\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349) ~[na:1.8.0_212]\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_212]\r\n\t... 96 common frames omitted\r\n```\r\nI test elasticsearch.version=6.8.1 too but nothing change.\r\nIs there any possible way to use spring-boot-starter-data-elasticsearch with elasticsearch 7.2.0","title":"spring data elasticsearch 7 class not found exception","body":"<p>I want to use spring data elasticsearch with elastic docker 7.2</p>\n\n<pre><code>    implementation 'org.springframework.boot:spring-boot-starter-data-elasticsearch'\n</code></pre>\n\n<p>but when spring boot app runs this error appears:</p>\n\n<pre><code>2019-07-20 12:35:38.564 ERROR 21804 --- [           main] .d.e.r.s.AbstractElasticsearchRepository : failed to load elasticsearch nodes : org.elasticsearch.client.transport.NoNodeAvailableException: None of the configured nodes are available: [{#transport#-1}{aD43cDv-QnG1e16fnU0dsQ}{localhost}{127.0.0.1:9300}]\n</code></pre>\n\n<p>and in elasticsearch log</p>\n\n<pre><code>Received message from unsupported version: [6.4.3] minimal compatible version is: [6.8.0]\n</code></pre>\n\n<p>I use gradle then I add <code>ext['elasticsearch.version'] = '7.2.0'</code> now error changes </p>\n\n<pre><code>Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.format.support.FormattingConversionService]: Factory method 'mvcConversionService' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'instagramUserRepo': Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    ... 46 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'instagramUserRepo': Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1778) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1111) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.data.repository.support.Repositories.cacheRepositoryFactory(Repositories.java:97) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.repository.support.Repositories.populateRepositoryFactoryInformation(Repositories.java:90) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.repository.support.Repositories.&lt;init&gt;(Repositories.java:83) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.repository.support.DomainClassConverter.setApplicationContext(DomainClassConverter.java:109) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.web.config.SpringDataWebConfiguration.addFormatters(SpringDataWebConfiguration.java:131) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.web.servlet.config.annotation.WebMvcConfigurerComposite.addFormatters(WebMvcConfigurerComposite.java:81) ~[spring-webmvc-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration.addFormatters(DelegatingWebMvcConfiguration.java:78) ~[spring-webmvc-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration.mvcConversionService(WebMvcAutoConfiguration.java:476) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration$$EnhancerBySpringCGLIB$$1f0f7b64.CGLIB$mvcConversionService$1(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration$$EnhancerBySpringCGLIB$$1f0f7b64$$FastClassBySpringCGLIB$$60445fb2.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration$EnableWebMvcConfiguration$$EnhancerBySpringCGLIB$$1f0f7b64.mvcConversionService(&lt;generated&gt;) ~[spring-boot-autoconfigure-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_212]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_212]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    ... 47 common frames omitted\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:184) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.lambda$getTargetRepositoryViaReflection$3(RepositoryFactorySupport.java:513) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at java.util.Optional.map(Optional.java:215) ~[na:1.8.0_212]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getTargetRepositoryViaReflection(RepositoryFactorySupport.java:513) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getTargetRepositoryViaReflection(RepositoryFactorySupport.java:498) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.elasticsearch.repository.support.ElasticsearchRepositoryFactory.getTargetRepository(ElasticsearchRepositoryFactory.java:74) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:305) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:297) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.util.Lazy.getNullable(Lazy.java:211) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.util.Lazy.get(Lazy.java:94) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:300) ~[spring-data-commons-2.1.9.RELEASE.jar:2.1.9.RELEASE]\n    at org.springframework.data.elasticsearch.repository.support.ElasticsearchRepositoryFactoryBean.afterPropertiesSet(ElasticsearchRepositoryFactoryBean.java:67) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1837) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1774) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    ... 72 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse\n    at org.springframework.data.elasticsearch.core.ElasticsearchTemplate.putMapping(ElasticsearchTemplate.java:249) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at org.springframework.data.elasticsearch.core.ElasticsearchTemplate.putMapping(ElasticsearchTemplate.java:233) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at org.springframework.data.elasticsearch.core.ElasticsearchTemplate.putMapping(ElasticsearchTemplate.java:228) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at org.springframework.data.elasticsearch.repository.support.AbstractElasticsearchRepository.putMapping(AbstractElasticsearchRepository.java:100) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at org.springframework.data.elasticsearch.repository.support.AbstractElasticsearchRepository.&lt;init&gt;(AbstractElasticsearchRepository.java:88) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository.&lt;init&gt;(SimpleElasticsearchRepository.java:36) ~[spring-data-elasticsearch-3.1.9.RELEASE.jar:3.1.9.RELEASE]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.8.0_212]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:1.8.0_212]\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:1.8.0_212]\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423) ~[na:1.8.0_212]\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:172) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    ... 85 common frames omitted\nCaused by: java.lang.ClassNotFoundException: org.elasticsearch.action.admin.indices.mapping.put.PutMappingResponse\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:382) ~[na:1.8.0_212]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_212]\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349) ~[na:1.8.0_212]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_212]\n    ... 96 common frames omitted\n</code></pre>\n\n<p>I test elasticsearch.version=6.8.1 too but nothing change.\nIs there any possible way to use spring-boot-starter-data-elasticsearch with elasticsearch 7.2.0</p>\n"},{"tags":["java","json","json-query"],"comments":[{"owner":{"account_id":6482565,"reputation":67,"user_id":5019132,"accept_rate":14,"display_name":"Ashutosh Dalai"},"score":0,"creation_date":1526293923,"post_id":50328144,"comment_id":87672211,"body_markdown":"Please add comma after  &quot;@type&quot;: &quot;Segment&quot; .","body":"Please add comma after  &quot;@type&quot;: &quot;Segment&quot; ."},{"owner":{"account_id":6077505,"reputation":8407,"user_id":4744359,"display_name":"UninformedUser"},"score":0,"creation_date":1526294133,"post_id":50328144,"comment_id":87672341,"body_markdown":"Where is your current query? What did you try? Do you hope somebody will do your home work?","body":"Where is your current query? What did you try? Do you hope somebody will do your home work?"},{"owner":{"account_id":436264,"reputation":3362,"user_id":823321,"display_name":"sunqp"},"score":1,"creation_date":1526294276,"post_id":50328144,"comment_id":87672425,"body_markdown":"@AshutoshDalai: You can edit your own question and add it by yourself. I would also recommend adding a better description of your issue.","body":"@AshutoshDalai: You can edit your own question and add it by yourself. I would also recommend adding a better description of your issue."},{"owner":{"account_id":6482565,"reputation":67,"user_id":5019132,"accept_rate":14,"display_name":"Ashutosh Dalai"},"score":0,"creation_date":1526295138,"post_id":50328144,"comment_id":87672882,"body_markdown":"@AKSW, Below is my expression\n\n$..vehicleCode[?($..vehicleLease==&quot;AS PER LAW OF ENFORCMENT&quot;)]","body":"@AKSW, Below is my expression  $..vehicleCode[?($..vehicleLease==&quot;AS PER LAW OF ENFORCMENT&quot;)]"},{"owner":{"account_id":8633322,"reputation":218343,"user_id":6464308,"display_name":"Laurenz Albe"},"score":0,"creation_date":1526327909,"post_id":50328144,"comment_id":87692374,"body_markdown":"Clarify the question, incorporate the comment","body":"Clarify the question, incorporate the comment"}],"answers":[{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698170569,"creation_date":1698170569,"answer_id":77354434,"question_id":50328144,"body_markdown":"JSON library _Josson_ is able to solve this question with its query language expression.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n__Deserialization__\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;  \\&quot;StateOffers\\&quot; : [ [ {&quot; +\r\n        &quot;    \\&quot;vehicleCode\\&quot; : 242214214,&quot; +\r\n        &quot;    \\&quot;vehiclePart\\&quot; : [ {&quot; +\r\n        &quot;      \\&quot;@type\\&quot; : \\&quot;vehiclePart\\&quot;,&quot; +\r\n        &quot;      \\&quot;segments\\&quot; : [ {&quot; +\r\n        &quot;        \\&quot;@type\\&quot; : \\&quot;Segment\\&quot;,&quot; +\r\n        &quot;        \\&quot;segmentOfferInformation\\&quot; : {&quot; +\r\n        &quot;          \\&quot;vehicleMiles\\&quot; : 771,&quot; +\r\n        &quot;          \\&quot;awardFare\\&quot; : false&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        \\&quot;vehicleLease\\&quot; : \\&quot;AS PER LAW OF ENFORCMENT\\&quot;&quot; +\r\n        &quot;      } ],&quot; +\r\n        &quot;      \\&quot;stops\\&quot; : 0&quot; +\r\n        &quot;    } ]&quot; +\r\n        &quot;  }, {&quot; +\r\n        &quot;    \\&quot;vehicleCode\\&quot; : 242214215,&quot; +\r\n        &quot;    \\&quot;vehiclePart\\&quot; : [ {&quot; +\r\n        &quot;      \\&quot;@type\\&quot; : \\&quot;vehiclePart\\&quot;,&quot; +\r\n        &quot;      \\&quot;segments\\&quot; : [ {&quot; +\r\n        &quot;        \\&quot;@type\\&quot; : \\&quot;Segment\\&quot;,&quot; +\r\n        &quot;        \\&quot;segmentOfferInformation\\&quot; : {&quot; +\r\n        &quot;          \\&quot;vehicleMiles\\&quot; : 771,&quot; +\r\n        &quot;          \\&quot;awardFare\\&quot; : false&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        \\&quot;vehicleLease\\&quot; : \\&quot;MY RULE MY WORLD\\&quot;&quot; +\r\n        &quot;      } ],&quot; +\r\n        &quot;      \\&quot;stops\\&quot; : 0&quot; +\r\n        &quot;    } ]&quot; +\r\n        &quot;  } ] ]&quot; +\r\n        &quot;}&quot;);\r\n\r\n__Query__\r\n\r\n    Integer vehicleCode= josson.getInteger(\r\n            &quot;StateOffers.flatten()&quot; +\r\n            &quot;.[vehiclePart.segments[vehicleLease = &#39;AS PER LAW OF ENFORCMENT&#39;]]&quot; +\r\n            &quot;.vehicleCode&quot;);\r\n    System.out.println(vehicleCode);\r\n    //Output: 242214214","title":"Json query String for getting value with Condition","body":"<p>JSON library <em>Josson</em> is able to solve this question with its query language expression.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<p><strong>Deserialization</strong></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;  \\&quot;StateOffers\\&quot; : [ [ {&quot; +\n    &quot;    \\&quot;vehicleCode\\&quot; : 242214214,&quot; +\n    &quot;    \\&quot;vehiclePart\\&quot; : [ {&quot; +\n    &quot;      \\&quot;@type\\&quot; : \\&quot;vehiclePart\\&quot;,&quot; +\n    &quot;      \\&quot;segments\\&quot; : [ {&quot; +\n    &quot;        \\&quot;@type\\&quot; : \\&quot;Segment\\&quot;,&quot; +\n    &quot;        \\&quot;segmentOfferInformation\\&quot; : {&quot; +\n    &quot;          \\&quot;vehicleMiles\\&quot; : 771,&quot; +\n    &quot;          \\&quot;awardFare\\&quot; : false&quot; +\n    &quot;        },&quot; +\n    &quot;        \\&quot;vehicleLease\\&quot; : \\&quot;AS PER LAW OF ENFORCMENT\\&quot;&quot; +\n    &quot;      } ],&quot; +\n    &quot;      \\&quot;stops\\&quot; : 0&quot; +\n    &quot;    } ]&quot; +\n    &quot;  }, {&quot; +\n    &quot;    \\&quot;vehicleCode\\&quot; : 242214215,&quot; +\n    &quot;    \\&quot;vehiclePart\\&quot; : [ {&quot; +\n    &quot;      \\&quot;@type\\&quot; : \\&quot;vehiclePart\\&quot;,&quot; +\n    &quot;      \\&quot;segments\\&quot; : [ {&quot; +\n    &quot;        \\&quot;@type\\&quot; : \\&quot;Segment\\&quot;,&quot; +\n    &quot;        \\&quot;segmentOfferInformation\\&quot; : {&quot; +\n    &quot;          \\&quot;vehicleMiles\\&quot; : 771,&quot; +\n    &quot;          \\&quot;awardFare\\&quot; : false&quot; +\n    &quot;        },&quot; +\n    &quot;        \\&quot;vehicleLease\\&quot; : \\&quot;MY RULE MY WORLD\\&quot;&quot; +\n    &quot;      } ],&quot; +\n    &quot;      \\&quot;stops\\&quot; : 0&quot; +\n    &quot;    } ]&quot; +\n    &quot;  } ] ]&quot; +\n    &quot;}&quot;);\n</code></pre>\n<p><strong>Query</strong></p>\n<pre><code>Integer vehicleCode= josson.getInteger(\n        &quot;StateOffers.flatten()&quot; +\n        &quot;.[vehiclePart.segments[vehicleLease = 'AS PER LAW OF ENFORCMENT']]&quot; +\n        &quot;.vehicleCode&quot;);\nSystem.out.println(vehicleCode);\n//Output: 242214214\n</code></pre>\n"}],"owner":{"account_id":6482565,"reputation":67,"user_id":5019132,"accept_rate":14,"display_name":"Ashutosh Dalai"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1698170569,"creation_date":1526293733,"question_id":50328144,"body_markdown":"I want to get the value of `vehicleCode`element where `vehicleLease` is `AS PER LAW OF ENFORCMENT`.\r\n\r\nCould someone please help me with JSON query ?\r\n\r\nPlease find JSON data below.\r\n\r\n        {\r\n     \t&quot;StateOffers&quot;: [\r\n     \t\t[{\r\n     \t\t\t\t&quot;vehicleCode&quot;: 242214214,\r\n     \t\t\t\t&quot;vehiclePart&quot;: [{\r\n     \t\t\t\t\t\t&quot;@type&quot;: &quot;vehiclePart&quot;,\r\n     \t\t\t\t\t\t&quot;segments&quot;: [{\r\n     \t\t\t\t\t\t\t\t&quot;@type&quot;: &quot;Segment&quot;\r\n     \t\t\t\t\t\t\t\t&quot;segmentOfferInformation&quot;: {\r\n     \t\t\t\t\t\t\t\t\t&quot;vehicleMiles&quot;: 771,\r\n     \t\t\t\t\t\t\t\t\t&quot;awardFare&quot;: false\r\n     \t\t\t\t\t\t\t\t},\r\n     \t\t\t\t\t\t\t\t&quot;vehicleLease&quot;: &quot;AS PER LAW OF ENFORCMENT&quot;\r\n     \t\t\t\t\t\t\t}\r\n     \t\t\t\t\t\t],\r\n     \t\t\t\t\t\t&quot;stops&quot;: 0\r\n     \t\t\t\t\t}\r\n     \t\t\t\t]\r\n     \t\t\t}, {\r\n     \t\t\t\t&quot;vehicleCode&quot;: 242214214,\r\n     \t\t\t\t&quot;vehiclePart&quot;: [{\r\n     \t\t\t\t\t\t&quot;@type&quot;: &quot;vehiclePart&quot;,\r\n     \t\t\t\t\t\t&quot;segments&quot;: [{\r\n     \t\t\t\t\t\t\t\t&quot;@type&quot;: &quot;Segment&quot;\r\n     \t\t\t\t\t\t\t\t&quot;segmentOfferInformation&quot;: {\r\n     \t\t\t\t\t\t\t\t\t&quot;vehicleMiles&quot;: 771,\r\n     \t\t\t\t\t\t\t\t\t&quot;awardFare&quot;: false\r\n     \t\t\t\t\t\t\t\t},\r\n     \t\t\t\t\t\t\t\t&quot;vehicleLease&quot;: &quot;MY RULE MY WORLD&quot;\r\n     \t\t\t\t\t\t\t}\r\n     \t\t\t\t\t\t],\r\n     \t\t\t\t\t\t&quot;stops&quot;: 0\r\n     \t\t\t\t\t}\r\n     \t\t\t\t]\r\n     \t\t\t}\r\n     \t\t]\r\n     \t]\r\n     }\r\n\r\nThis is the expression I have tried:\r\n\r\n    $..vehicleCode[?($..vehicleLease==&quot;AS PER LAW OF ENFORCMENT&quot;)","title":"Json query String for getting value with Condition","body":"<p>I want to get the value of <code>vehicleCode</code>element where <code>vehicleLease</code> is <code>AS PER LAW OF ENFORCMENT</code>.</p>\n\n<p>Could someone please help me with JSON query ?</p>\n\n<p>Please find JSON data below.</p>\n\n<pre><code>    {\n    \"StateOffers\": [\n        [{\n                \"vehicleCode\": 242214214,\n                \"vehiclePart\": [{\n                        \"@type\": \"vehiclePart\",\n                        \"segments\": [{\n                                \"@type\": \"Segment\"\n                                \"segmentOfferInformation\": {\n                                    \"vehicleMiles\": 771,\n                                    \"awardFare\": false\n                                },\n                                \"vehicleLease\": \"AS PER LAW OF ENFORCMENT\"\n                            }\n                        ],\n                        \"stops\": 0\n                    }\n                ]\n            }, {\n                \"vehicleCode\": 242214214,\n                \"vehiclePart\": [{\n                        \"@type\": \"vehiclePart\",\n                        \"segments\": [{\n                                \"@type\": \"Segment\"\n                                \"segmentOfferInformation\": {\n                                    \"vehicleMiles\": 771,\n                                    \"awardFare\": false\n                                },\n                                \"vehicleLease\": \"MY RULE MY WORLD\"\n                            }\n                        ],\n                        \"stops\": 0\n                    }\n                ]\n            }\n        ]\n    ]\n }\n</code></pre>\n\n<p>This is the expression I have tried:</p>\n\n<pre><code>$..vehicleCode[?($..vehicleLease==\"AS PER LAW OF ENFORCMENT\")\n</code></pre>\n"},{"tags":["java","hibernate","caching","ehcache"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1673776625,"post_id":75124069,"comment_id":132569793,"body_markdown":"have you tried calling `entityManagerFactory.getCache().evict(MyEntity.class)`?","body":"have you tried calling <code>entityManagerFactory.getCache().evict(MyEntity.class)</code>?"},{"owner":{"account_id":26434968,"reputation":45,"user_id":20080481,"display_name":"User01"},"score":0,"creation_date":1673778455,"post_id":75124069,"comment_id":132570042,"body_markdown":"I&#39;m afraid this will work on the service&#39; local cache only, the other services (on other servers) will not be affected! I&#39;ll try it though just to be certain.","body":"I&#39;m afraid this will work on the service&#39; local cache only, the other services (on other servers) will not be affected! I&#39;ll try it though just to be certain."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1673778920,"post_id":75124069,"comment_id":132570104,"body_markdown":"it internally calls `net.sf.ehcache.event.RegisteredEventListeners#notifyRemoveAll`, so, if it does not affect remote caches that means your cache setup is broken.","body":"it internally calls <code>net.sf.ehcache.event.RegisteredEventListeners#notifyRemoveAl&zwnj;&#8203;l</code>, so, if it does not affect remote caches that means your cache setup is broken."}],"owner":{"account_id":26434968,"reputation":45,"user_id":20080481,"display_name":"User01"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698170516,"creation_date":1673774596,"question_id":75124069,"body_markdown":"I&#39;m working on a Java Spring project where we have micro services architecture, each service has an internal cache of type hibernate second level cache implemented by Ehcache region factory, to insure data consistency between the different caches we use the Ehcache integration with JMS.\r\nThis is working so far, but how can I send manually a signal to the topic the caches queues are superscribed to, this signal should evict a specific cache region?\r\nwhat is the nature and structure of such message in Java?","title":"Hibernate 2nd level cache eviction","body":"<p>I'm working on a Java Spring project where we have micro services architecture, each service has an internal cache of type hibernate second level cache implemented by Ehcache region factory, to insure data consistency between the different caches we use the Ehcache integration with JMS.\nThis is working so far, but how can I send manually a signal to the topic the caches queues are superscribed to, this signal should evict a specific cache region?\nwhat is the nature and structure of such message in Java?</p>\n"},{"tags":["java","kotlin","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":3775103,"reputation":128,"user_id":3136143,"display_name":"attila-fazekas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698170471,"creation_date":1698170471,"answer_id":77354419,"question_id":77347132,"body_markdown":"This is because you are mixing up different Selenium library versions. In fact, you do not need `devtools` and `selenium-chrome-driver` dependencies. Just use the `selenium-java` one and that will pull all the dependencies. \r\nFurthermore, version 4.6.0 introduced [Selenium Manager][1], so you can skip pointing to the driver executable&#39;s location, the manager will download the right one based on your browser version. \r\nAlso, if you can use Java 11, with the latest version of Selenium (4.14), I believe, due to [this change][2] you can skip adding the `--remote-allow-origins=*` argument.\r\n\r\nSo you can simplify your code to:\r\n\r\n    val driver = ChromeDriver()\r\n    driver[&quot;https://www.garfieldtech.com/ip.php&quot;]\r\n\r\n  [1]: https://www.selenium.dev/blog/2022/introducing-selenium-manager/\r\n  [2]: https://github.com/SeleniumHQ/selenium/commit/9b35af2814ffe92c62f323ffe1d344fe19a296b1\r\n","title":"Selenium HTTP client calls CdpEndpointFinder with missing method?","body":"<p>This is because you are mixing up different Selenium library versions. In fact, you do not need <code>devtools</code> and <code>selenium-chrome-driver</code> dependencies. Just use the <code>selenium-java</code> one and that will pull all the dependencies.\nFurthermore, version 4.6.0 introduced <a href=\"https://www.selenium.dev/blog/2022/introducing-selenium-manager/\" rel=\"nofollow noreferrer\">Selenium Manager</a>, so you can skip pointing to the driver executable's location, the manager will download the right one based on your browser version.\nAlso, if you can use Java 11, with the latest version of Selenium (4.14), I believe, due to <a href=\"https://github.com/SeleniumHQ/selenium/commit/9b35af2814ffe92c62f323ffe1d344fe19a296b1\" rel=\"nofollow noreferrer\">this change</a> you can skip adding the <code>--remote-allow-origins=*</code> argument.</p>\n<p>So you can simplify your code to:</p>\n<pre><code>val driver = ChromeDriver()\ndriver[&quot;https://www.garfieldtech.com/ip.php&quot;]\n</code></pre>\n"}],"owner":{"account_id":300011,"reputation":504,"user_id":606925,"display_name":"Crell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698170471,"creation_date":1698081016,"question_id":77347132,"body_markdown":"I am trying to use Selenium with Kotlin.  (I&#39;m still new to both.)  I am getting the above error when I try to connect to a site.  (It&#39;s a trivial page for testing.)\r\n\r\nMy `settings.gradle.kts` file (relevant portions):\r\n\r\n```\r\nplugins {\r\n    kotlin(&quot;jvm&quot;) version &quot;1.9.0&quot;\r\n    application\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    testImplementation(kotlin(&quot;test&quot;))\r\n    implementation(&quot;org.seleniumhq.selenium:selenium-java:4.8.1&quot;)\r\n    implementation(&quot;org.seleniumhq.selenium:selenium-devtools:4.0.0-rc-1&quot;)\r\n\r\n    implementation(&quot;org.seleniumhq.selenium:selenium-chrome-driver:4.14.1&quot;)\r\n\r\n    // Some library required log4j, but wasn&#39;t installing it as a dependency. So, manual.\r\n    implementation(&quot;org.apache.logging.log4j:log4j-core:2.21.0&quot;)\r\n    implementation(&quot;org.apache.logging.log4j:log4j-api:2.21.0&quot;)\r\n    testImplementation(&quot;org.apache.logging.log4j:log4j-slf4j2-impl:2.21.0&quot;)\r\n\r\n}\r\n```\r\n\r\nMy code (simplified example):\r\n\r\n```\r\nval driverLocation = &quot;/path/to/chromedriver&quot;\r\n\r\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;, driverLocation);\r\n\r\nval options = ChromeOptions()\r\noptions.addArguments(&quot;--remote-allow-origins=*&quot;)\r\nval driver = ChromeDriver(options)\r\n\r\n// It dies on this line.\r\ndriver.get(&quot;https://www.garfieldtech.com/ip.php&quot;)\r\n```\r\n\r\nThe full error message:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.NoSuchMethodError: &#39;org.openqa.selenium.remote.http.HttpClient org.openqa.selenium.devtools.CdpEndpointFinder.getHttpClient(org.openqa.selenium.remote.http.HttpClient$Factory, java.net.URI)&#39;\r\n```\r\n\r\nSure enough, if I click through in my IDE to `ChromeDriver`, the IDE calls out the `getHttpClient` method on this line is not defined:\r\n\r\n```\r\nreportedUri.map(uri -&gt; CdpEndpointFinder.getHttpClient(factory, uri));\r\n```\r\n\r\nIt feels like some kind of version mismatch, but I would expect the build system to catch that and warn me of an incompatibility.  What am I doing wrong here?","title":"Selenium HTTP client calls CdpEndpointFinder with missing method?","body":"<p>I am trying to use Selenium with Kotlin.  (I'm still new to both.)  I am getting the above error when I try to connect to a site.  (It's a trivial page for testing.)</p>\n<p>My <code>settings.gradle.kts</code> file (relevant portions):</p>\n<pre><code>plugins {\n    kotlin(&quot;jvm&quot;) version &quot;1.9.0&quot;\n    application\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    testImplementation(kotlin(&quot;test&quot;))\n    implementation(&quot;org.seleniumhq.selenium:selenium-java:4.8.1&quot;)\n    implementation(&quot;org.seleniumhq.selenium:selenium-devtools:4.0.0-rc-1&quot;)\n\n    implementation(&quot;org.seleniumhq.selenium:selenium-chrome-driver:4.14.1&quot;)\n\n    // Some library required log4j, but wasn't installing it as a dependency. So, manual.\n    implementation(&quot;org.apache.logging.log4j:log4j-core:2.21.0&quot;)\n    implementation(&quot;org.apache.logging.log4j:log4j-api:2.21.0&quot;)\n    testImplementation(&quot;org.apache.logging.log4j:log4j-slf4j2-impl:2.21.0&quot;)\n\n}\n</code></pre>\n<p>My code (simplified example):</p>\n<pre><code>val driverLocation = &quot;/path/to/chromedriver&quot;\n\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;, driverLocation);\n\nval options = ChromeOptions()\noptions.addArguments(&quot;--remote-allow-origins=*&quot;)\nval driver = ChromeDriver(options)\n\n// It dies on this line.\ndriver.get(&quot;https://www.garfieldtech.com/ip.php&quot;)\n</code></pre>\n<p>The full error message:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: 'org.openqa.selenium.remote.http.HttpClient org.openqa.selenium.devtools.CdpEndpointFinder.getHttpClient(org.openqa.selenium.remote.http.HttpClient$Factory, java.net.URI)'\n</code></pre>\n<p>Sure enough, if I click through in my IDE to <code>ChromeDriver</code>, the IDE calls out the <code>getHttpClient</code> method on this line is not defined:</p>\n<pre><code>reportedUri.map(uri -&gt; CdpEndpointFinder.getHttpClient(factory, uri));\n</code></pre>\n<p>It feels like some kind of version mismatch, but I would expect the build system to catch that and warn me of an incompatibility.  What am I doing wrong here?</p>\n"},{"tags":["java","casting","integer","double"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":2,"creation_date":1698169786,"post_id":77354067,"comment_id":136370271,"body_markdown":"Why do you print `cast` so many times? Do you expect it to change?","body":"Why do you print <code>cast</code> so many times? Do you expect it to change?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1698175616,"post_id":77354067,"comment_id":136371279,"body_markdown":"Use the _[BigDecimal](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html)_ class.","body":"Use the <i><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a></i> class."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1698183816,"post_id":77354067,"comment_id":136372529,"body_markdown":"None of these values is exact in the first place.","body":"None of these values is exact in the first place."},{"owner":{"account_id":16935133,"reputation":21,"user_id":14560808,"display_name":"Evloution78"},"score":0,"creation_date":1698196760,"post_id":77354067,"comment_id":136373648,"body_markdown":"@AndyTurner I mean, no, but Then I thought maybe it was a weird compile error so I better print it lots of times to make sure I get consistent results.","body":"@AndyTurner I mean, no, but Then I thought maybe it was a weird compile error so I better print it lots of times to make sure I get consistent results."},{"owner":{"account_id":16935133,"reputation":21,"user_id":14560808,"display_name":"Evloution78"},"score":0,"creation_date":1698197162,"post_id":77354067,"comment_id":136373667,"body_markdown":"@user207421 I understand that, was just giving examples of casting and ran into that and have never run into that before","body":"@user207421 I understand that, was just giving examples of casting and ran into that and have never run into that before"}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698169677,"creation_date":1698169677,"answer_id":77354331,"question_id":77354067,"body_markdown":"This has nothing to do with casting to `int`.\r\n\r\nIf you print the value of `a`:\r\n\r\n```\r\ndouble a = 5.9999999999999999;\r\nSystem.out.println(a);\r\n```\r\n\r\nIt prints `6.0`.\r\n\r\nThis is because double has finite precision, and cannot represent the literal value exactly.","title":"What are the rounding rules of Java Explicit Cast from Double to Int","body":"<p>This has nothing to do with casting to <code>int</code>.</p>\n<p>If you print the value of <code>a</code>:</p>\n<pre><code>double a = 5.9999999999999999;\nSystem.out.println(a);\n</code></pre>\n<p>It prints <code>6.0</code>.</p>\n<p>This is because double has finite precision, and cannot represent the literal value exactly.</p>\n"},{"tags":[],"owner":{"account_id":1888343,"reputation":176597,"user_id":1707091,"display_name":"rgettman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698169964,"creation_date":1698169964,"answer_id":77354362,"question_id":77354067,"body_markdown":"Casting conversions that involve a narrowing primitive conversion from a floating point type to an integral type will round to zero, according to the [JLS Section 5.1.3][1]:\r\n\r\n&gt; A narrowing conversion of a floating-point number to an integral type T takes two steps:\r\n&gt; 1. In the first step, the floating-point number is converted either to a long, if T is long, or to an int, if T is byte, short, char, or int, as follows:\r\n&gt; - If the floating-point number is NaN (&#167;4.2.3), the result of the first step of the conversion is an int or long 0.\r\n&gt; - Otherwise, if the floating-point number is not an infinity, the floating-point value is rounded to an integer value V using the round toward zero rounding policy (&#167;4.2.4).\r\n\r\nSo why does `double a = 5.9999999999999999;` seemingly round up?  The `double` literal has to be converted to a `double` value first.  This is covered by the Floating-Point Literals section of the [JLS (3.10.2)][2]:\r\n\r\n&gt; _The details of proper input conversion from a Unicode string representation of a floating-point number to the internal IEEE 754 binary floating-point representation are described for the methods valueOf of class Float and class Double of the package java.lang._\r\n\r\nOk, let&#39;s go to [`valueOf` for `Double`][3]:\r\n\r\n&gt; [The string value] is regarded as representing an exact decimal value in the usual &quot;computerized scientific notation&quot; or as an exact hexadecimal value; this exact numerical value is then conceptually converted to an &quot;infinitely precise&quot; binary value that is then rounded to type `double` by the usual **round-to-nearest rule** of IEEE 754 floating-point arithmetic, which includes preserving the sign of a zero value.\r\n\r\n&lt;sub&gt;(bold emphasis mine)&lt;/sub&gt;\r\n\r\nAt 16 digits of precision beyond the decimal point (you have 17 include `5`), you are pushing the limits of precision for a `double` literal.  At this point, `5.9999999999999999` is closer to `6` than the next lower `double` value.\r\n\r\nSo, 6 is displayed because your floating point literal gets rounded _up_ to `6.0` as a `double` _before_ it gets cast to an `int`, and `6.0` cast to an `int` is the 6 you see printed.\r\n\r\nOther values you have don&#39;t get rounded all the way up to `6.0` as `double` literals, so the cast to `int` brings it all the way down to 5.\r\n\r\n[1]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.1.3\r\n[2]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-3.html#jls-3.10.2\r\n[3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Double.html#valueOf(java.lang.String)","title":"What are the rounding rules of Java Explicit Cast from Double to Int","body":"<p>Casting conversions that involve a narrowing primitive conversion from a floating point type to an integral type will round to zero, according to the <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.1.3\" rel=\"nofollow noreferrer\">JLS Section 5.1.3</a>:</p>\n<blockquote>\n<p>A narrowing conversion of a floating-point number to an integral type T takes two steps:</p>\n<ol>\n<li>In the first step, the floating-point number is converted either to a long, if T is long, or to an int, if T is byte, short, char, or int, as follows:</li>\n</ol>\n<ul>\n<li>If the floating-point number is NaN (4.2.3), the result of the first step of the conversion is an int or long 0.</li>\n<li>Otherwise, if the floating-point number is not an infinity, the floating-point value is rounded to an integer value V using the round toward zero rounding policy (4.2.4).</li>\n</ul>\n</blockquote>\n<p>So why does <code>double a = 5.9999999999999999;</code> seemingly round up?  The <code>double</code> literal has to be converted to a <code>double</code> value first.  This is covered by the Floating-Point Literals section of the <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-3.html#jls-3.10.2\" rel=\"nofollow noreferrer\">JLS (3.10.2)</a>:</p>\n<blockquote>\n<p><em>The details of proper input conversion from a Unicode string representation of a floating-point number to the internal IEEE 754 binary floating-point representation are described for the methods valueOf of class Float and class Double of the package java.lang.</em></p>\n</blockquote>\n<p>Ok, let's go to <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Double.html#valueOf(java.lang.String)\" rel=\"nofollow noreferrer\"><code>valueOf</code> for <code>Double</code></a>:</p>\n<blockquote>\n<p>[The string value] is regarded as representing an exact decimal value in the usual &quot;computerized scientific notation&quot; or as an exact hexadecimal value; this exact numerical value is then conceptually converted to an &quot;infinitely precise&quot; binary value that is then rounded to type <code>double</code> by the usual <strong>round-to-nearest rule</strong> of IEEE 754 floating-point arithmetic, which includes preserving the sign of a zero value.</p>\n</blockquote>\n<p><sub>(bold emphasis mine)</sub></p>\n<p>At 16 digits of precision beyond the decimal point (you have 17 include <code>5</code>), you are pushing the limits of precision for a <code>double</code> literal.  At this point, <code>5.9999999999999999</code> is closer to <code>6</code> than the next lower <code>double</code> value.</p>\n<p>So, 6 is displayed because your floating point literal gets rounded <em>up</em> to <code>6.0</code> as a <code>double</code> <em>before</em> it gets cast to an <code>int</code>, and <code>6.0</code> cast to an <code>int</code> is the 6 you see printed.</p>\n<p>Other values you have don't get rounded all the way up to <code>6.0</code> as <code>double</code> literals, so the cast to <code>int</code> brings it all the way down to 5.</p>\n"}],"owner":{"account_id":16935133,"reputation":21,"user_id":14560808,"display_name":"Evloution78"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1698169964,"creation_date":1698167141,"question_id":77354067,"body_markdown":"Ran into a weird quirk when demonistrating Java explicit type casting today and was wondering why this happens.\r\n\r\nIf I convert a double into an int, and my number is .9 up to 16 precision, it will round up. (See comments in code) If I make it 15 precision it rounds down. \r\n\r\nSimilarly, if I make my number .8... it will still round down.\r\n\r\n```\r\n        double a = 5.9999999999999999;// 16 precision rounds to 6\r\n        double a1 = 5.8888888888888888; // 16 precision rounds to 5\r\n        double b = 5.999999999999999;// 15 precision rounds to 5\r\n        double c = 5.111111111111111111111111111111111111111; //rounds to 5\r\n        int cast = (int)a;\r\n        for (int i = 0 ; i &lt; 1000000 ; i++){\r\n            System.out.print(cast);\r\n        }\r\n```\r\n\r\n\r\n\r\nInitially thought I was overflowing the int, but it doesn&#39;t appear that is the case. \r\n\r\nAny thoughts? ","title":"What are the rounding rules of Java Explicit Cast from Double to Int","body":"<p>Ran into a weird quirk when demonistrating Java explicit type casting today and was wondering why this happens.</p>\n<p>If I convert a double into an int, and my number is .9 up to 16 precision, it will round up. (See comments in code) If I make it 15 precision it rounds down.</p>\n<p>Similarly, if I make my number .8... it will still round down.</p>\n<pre><code>        double a = 5.9999999999999999;// 16 precision rounds to 6\n        double a1 = 5.8888888888888888; // 16 precision rounds to 5\n        double b = 5.999999999999999;// 15 precision rounds to 5\n        double c = 5.111111111111111111111111111111111111111; //rounds to 5\n        int cast = (int)a;\n        for (int i = 0 ; i &lt; 1000000 ; i++){\n            System.out.print(cast);\n        }\n</code></pre>\n<p>Initially thought I was overflowing the int, but it doesn't appear that is the case.</p>\n<p>Any thoughts?</p>\n"},{"tags":["java","cassandra","micrometer","spring-micrometer"],"comments":[{"owner":{"account_id":944144,"reputation":5331,"user_id":971735,"display_name":"Jonatan Ivanov"},"score":0,"creation_date":1698275777,"post_id":77353073,"comment_id":136386224,"body_markdown":"Have you tried not using the global but injecting an instance?","body":"Have you tried not using the global but injecting an instance?"},{"owner":{"account_id":12908744,"reputation":3232,"user_id":9335205,"accept_rate":50,"display_name":"JGleason"},"score":0,"creation_date":1699545045,"post_id":77353073,"comment_id":136548158,"body_markdown":"@JonatanIvanov any chance you can provide a gist of what you mean?","body":"@JonatanIvanov any chance you can provide a gist of what you mean?"},{"owner":{"account_id":944144,"reputation":5331,"user_id":971735,"display_name":"Jonatan Ivanov"},"score":0,"creation_date":1699899341,"post_id":77353073,"comment_id":136586181,"body_markdown":"Please look into the Micrometer docs. Instead of using `Metrics.globalRegistry`, you should use `private final MeterRegistry registry` and inject it from the ctor.","body":"Please look into the Micrometer docs. Instead of using <code>Metrics.globalRegistry</code>, you should use <code>private final MeterRegistry registry</code> and inject it from the ctor."}],"owner":{"account_id":12908744,"reputation":3232,"user_id":9335205,"accept_rate":50,"display_name":"JGleason"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698169697,"creation_date":1698158434,"question_id":77353073,"body_markdown":"I am trying to follow the directions [here][1] and I have the following \r\n\r\n```java\r\n@Configuration\r\n@EnableConfigurationProperties(CassandraProperties.class)\r\npublic class CassandraMetricsConfig {\r\n    @Bean\r\n    public DriverConfigLoaderBuilderCustomizer configLoaderBuilderCustomizer(CassandraProperties cassandraProperties) {\r\n        return builder -&gt; {\r\n            System.out.println(&quot;Builder is getting called &quot;+cassandraProperties.getSessionMetrics()+&quot; &quot;+cassandraProperties.getNodeMetrics()+&quot;\\n&quot;);\r\n            builder.withStringList(METRICS_SESSION_ENABLED, cassandraProperties.getSessionMetrics());\r\n            builder.withStringList(METRICS_NODE_ENABLED, cassandraProperties.getNodeMetrics());\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    @ConditionalOnClass(MeterRegistry.class)\r\n    public CqlSessionBuilderCustomizer meterRegistryBuilderCustomizer(final ObjectProvider&lt;MeterRegistry&gt; meterRegistry) {\r\n        System.out.println(&quot;Yeah we got there&quot;);\r\n        return sessionBuilder -&gt;\r\n                sessionBuilder.withMetricRegistry(\r\n                        meterRegistry.getIfAvailable(\r\n                                () -&gt; Metrics.globalRegistry\r\n                        )\r\n                );\r\n    }\r\n\r\n    @Bean\r\n    @Primary\r\n    public CqlSession session() {\r\n        return CqlSession.builder()\r\n                .withMetricRegistry(Metrics.globalRegistry)\r\n                .withKeyspace(&quot;test&quot;).build();\r\n    }\r\n}\r\n@ConfigurationProperties(&quot;cassandra&quot;)\r\npublic class CassandraProperties {\r\n    public CassandraProperties(List&lt;String&gt; sessionMetrics, List&lt;String&gt; nodeMetrics) {\r\n        this.sessionMetrics = sessionMetrics;\r\n        this.nodeMetrics = nodeMetrics;\r\n    }\r\n    private List&lt;String&gt; sessionMetrics;\r\n\r\n    private List&lt;String&gt; nodeMetrics;\r\n\r\n    protected List&lt;String&gt; getSessionMetrics() {\r\n        return sessionMetrics;\r\n    }\r\n\r\n    protected List&lt;String&gt; getNodeMetrics() {\r\n        return nodeMetrics;\r\n    }\r\n}\r\n```\r\n```yaml\r\ncassandra:\r\n  session-metrics:\r\n    - cql-requests\r\n    - connected-nodes\r\n  node-metrics:\r\n    - pool.open-connections\r\n    - pool.in-flight\r\n\r\n```\r\n\r\nThen I have the following scala controller\r\n\r\n```scala\r\n  @RequestMapping(Array(&quot;/&quot;))\r\n  def index(): String = {\r\n    session.execute(&quot;DESC keyspaces;&quot;)\r\n      .forEach(\r\n        (row) =&gt; println(\r\n          row.getString(&quot;keyspace_name&quot;)\r\n        )\r\n      )\r\n    val sb: StringBuilder = new StringBuilder()\r\n    val registry = session.getMetrics\r\n      .orElseThrow(() =&gt; new IllegalStateException(&quot;Metrics are disabled&quot;))\r\n      .getRegistry\r\n\r\n    registry\r\n      .getMeters\r\n      .forEach(\r\n        (key, meter) =&gt; {\r\n          sb.append(key)\r\n        }\r\n      )\r\n    sb.toString()\r\n  }\r\n}\r\n```\r\n\r\nBut when I run and hit the endpoint I get...\r\n\r\n&gt; 2023-10-24T10:31:24.124-04:00 ERROR 1172 --- [nio-8080-exec-1]\r\n&gt; o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for\r\n&gt; servlet [dispatcherServlet] in context with path [] threw exception\r\n&gt; [Request processing failed: java.lang.IllegalStateException: Metrics\r\n&gt; are disabled] with root cause\r\n&gt; \r\n&gt; java.lang.IllegalStateException: Metrics are disabled\r\n\r\nI also tried just using the global registry but that returns empty\r\n\r\n```scala\r\n    Metrics.globalRegistry.getMeters.forEach(\r\n        meter =&gt; {\r\n          System.out.println(&quot;Meter is &quot; + meter.getId.toString)\r\n          sb.append(meter.getId.toString)\r\n          sb.append(&quot;\\n&quot;)\r\n        }\r\n      )\r\n```\r\n\r\n\r\n  [1]: https://docs.datastax.com/en/developer/java-driver/4.13/manual/core/metrics/","title":"Why are micrometer metrics not showing up after the registry is added to the Cassandra driver","body":"<p>I am trying to follow the directions <a href=\"https://docs.datastax.com/en/developer/java-driver/4.13/manual/core/metrics/\" rel=\"nofollow noreferrer\">here</a> and I have the following</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableConfigurationProperties(CassandraProperties.class)\npublic class CassandraMetricsConfig {\n    @Bean\n    public DriverConfigLoaderBuilderCustomizer configLoaderBuilderCustomizer(CassandraProperties cassandraProperties) {\n        return builder -&gt; {\n            System.out.println(&quot;Builder is getting called &quot;+cassandraProperties.getSessionMetrics()+&quot; &quot;+cassandraProperties.getNodeMetrics()+&quot;\\n&quot;);\n            builder.withStringList(METRICS_SESSION_ENABLED, cassandraProperties.getSessionMetrics());\n            builder.withStringList(METRICS_NODE_ENABLED, cassandraProperties.getNodeMetrics());\n        };\n    }\n\n    @Bean\n    @ConditionalOnClass(MeterRegistry.class)\n    public CqlSessionBuilderCustomizer meterRegistryBuilderCustomizer(final ObjectProvider&lt;MeterRegistry&gt; meterRegistry) {\n        System.out.println(&quot;Yeah we got there&quot;);\n        return sessionBuilder -&gt;\n                sessionBuilder.withMetricRegistry(\n                        meterRegistry.getIfAvailable(\n                                () -&gt; Metrics.globalRegistry\n                        )\n                );\n    }\n\n    @Bean\n    @Primary\n    public CqlSession session() {\n        return CqlSession.builder()\n                .withMetricRegistry(Metrics.globalRegistry)\n                .withKeyspace(&quot;test&quot;).build();\n    }\n}\n@ConfigurationProperties(&quot;cassandra&quot;)\npublic class CassandraProperties {\n    public CassandraProperties(List&lt;String&gt; sessionMetrics, List&lt;String&gt; nodeMetrics) {\n        this.sessionMetrics = sessionMetrics;\n        this.nodeMetrics = nodeMetrics;\n    }\n    private List&lt;String&gt; sessionMetrics;\n\n    private List&lt;String&gt; nodeMetrics;\n\n    protected List&lt;String&gt; getSessionMetrics() {\n        return sessionMetrics;\n    }\n\n    protected List&lt;String&gt; getNodeMetrics() {\n        return nodeMetrics;\n    }\n}\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>cassandra:\n  session-metrics:\n    - cql-requests\n    - connected-nodes\n  node-metrics:\n    - pool.open-connections\n    - pool.in-flight\n\n</code></pre>\n<p>Then I have the following scala controller</p>\n<pre class=\"lang-scala prettyprint-override\"><code>  @RequestMapping(Array(&quot;/&quot;))\n  def index(): String = {\n    session.execute(&quot;DESC keyspaces;&quot;)\n      .forEach(\n        (row) =&gt; println(\n          row.getString(&quot;keyspace_name&quot;)\n        )\n      )\n    val sb: StringBuilder = new StringBuilder()\n    val registry = session.getMetrics\n      .orElseThrow(() =&gt; new IllegalStateException(&quot;Metrics are disabled&quot;))\n      .getRegistry\n\n    registry\n      .getMeters\n      .forEach(\n        (key, meter) =&gt; {\n          sb.append(key)\n        }\n      )\n    sb.toString()\n  }\n}\n</code></pre>\n<p>But when I run and hit the endpoint I get...</p>\n<blockquote>\n<p>2023-10-24T10:31:24.124-04:00 ERROR 1172 --- [nio-8080-exec-1]\no.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for\nservlet [dispatcherServlet] in context with path [] threw exception\n[Request processing failed: java.lang.IllegalStateException: Metrics\nare disabled] with root cause</p>\n<p>java.lang.IllegalStateException: Metrics are disabled</p>\n</blockquote>\n<p>I also tried just using the global registry but that returns empty</p>\n<pre class=\"lang-scala prettyprint-override\"><code>    Metrics.globalRegistry.getMeters.forEach(\n        meter =&gt; {\n          System.out.println(&quot;Meter is &quot; + meter.getId.toString)\n          sb.append(meter.getId.toString)\n          sb.append(&quot;\\n&quot;)\n        }\n      )\n</code></pre>\n"},{"tags":["java","methods"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":3,"creation_date":1636038707,"post_id":69841442,"comment_id":123455992,"body_markdown":"`char` primitives are written inside single-quotes, like `&#39;a&#39;`. Also, you compare with `==` , not just `=` which is for assigning a value.","body":"<code>char</code> primitives are written inside single-quotes, like <code>&#39;a&#39;</code>. Also, you compare with <code>==</code> , not just <code>=</code> which is for assigning a value."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1636038778,"post_id":69841442,"comment_id":123456019,"body_markdown":"You need to use &#39;==&#39; for comparison &#39;=&#39; is an assignment. Also, string.charAt(v) = &quot;u&quot; ? Should v be i?","body":"You need to use &#39;==&#39; for comparison &#39;=&#39; is an assignment. Also, string.charAt(v) = &quot;u&quot; ? Should v be i?"},{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":1,"creation_date":1636038853,"post_id":69841442,"comment_id":123456054,"body_markdown":"You cannot reference local variables of one function (`vowels` in `main`) in another function (`countVowels`)","body":"You cannot reference local variables of one function (<code>vowels</code> in <code>main</code>) in another function (<code>countVowels</code>)"},{"owner":{"account_id":21825332,"reputation":1219,"user_id":16120911,"display_name":"sittsering"},"score":2,"creation_date":1636038941,"post_id":69841442,"comment_id":123456094,"body_markdown":"you are not even calling your function `countVowels()`","body":"you are not even calling your function <code>countVowels()</code>"},{"owner":{"display_name":"user17329175"},"score":0,"creation_date":1636039786,"post_id":69841442,"comment_id":123456473,"body_markdown":"@sittsering yah, that is the only problem, callong the method class","body":"@sittsering yah, that is the only problem, callong the method class"},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1636039923,"post_id":69841442,"comment_id":123456535,"body_markdown":"You should have tried to compile your code.","body":"You should have tried to compile your code."}],"answers":[{"tags":[],"owner":{"account_id":6338626,"reputation":2513,"user_id":4921317,"accept_rate":91,"display_name":"Gatusko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636039141,"creation_date":1636039141,"answer_id":69841583,"question_id":69841442,"body_markdown":"A lot of wrong things in your code. \r\n\r\nIn Java you represent a char with single quotes example &#39;a&#39; &#39;b&#39;, etc.\r\n\r\nString is double quotes and is an Object &quot;a&quot;, &quot;b&quot;. \r\n\r\n\r\nYou can&#39;t compare a Char with a String. \r\n\r\nYou need to comapre char with char. \r\n\r\n    string.charAt(i) == &#39;a&#39;\r\n\r\nand missing the double equals. ","title":"Count all Vowels in a String","body":"<p>A lot of wrong things in your code.</p>\n<p>In Java you represent a char with single quotes example 'a' 'b', etc.</p>\n<p>String is double quotes and is an Object &quot;a&quot;, &quot;b&quot;.</p>\n<p>You can't compare a Char with a String.</p>\n<p>You need to comapre char with char.</p>\n<pre><code>string.charAt(i) == 'a'\n</code></pre>\n<p>and missing the double equals.</p>\n"},{"tags":[],"owner":{"account_id":21825332,"reputation":1219,"user_id":16120911,"display_name":"sittsering"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636040758,"creation_date":1636040282,"answer_id":69841858,"question_id":69841442,"body_markdown":"Most of the issues have been answered by others, remaining few left. \r\n&lt;br&gt;Which are, you are not calling your function `countVowels()` and you have declare your variable `vowels` in `main` method, not in your function `countVowels()` .&lt;br&gt;\r\nMethods with return value:\r\n````\r\nimport java.util.Scanner;\r\npublic class Main\r\n{\r\n    public static void main(String[] args) {\r\n        Scanner input = new Scanner(System.in);\r\n        System.out.println(&quot;Enter String: &quot;);\r\n        String string = input.nextLine(); \r\n        string=string.toLowerCase();\r\n        int vowels = countVowels(string); // calling function which returns a value.\r\n        System.out.println(&quot;Vowels: &quot;+ vowels);\r\n    }\r\n    public static int countVowels(String string)\r\n    {\r\n        int i,vowels=0;\r\n        for (i=0;i&lt;string.length();i++)\r\n        {\r\n            if (string.charAt(i) == &#39;a&#39; || string.charAt(i) == &#39;e&#39; || string.charAt(i) == &#39;i&#39; || string.charAt(i) == &#39;o&#39; || string.charAt(i) == &#39;u&#39;)\r\n            {\r\n                vowels++; \r\n            }\r\n        }\r\n        return vowels;\r\n    }\r\n}\r\n````\r\nMethods without return value:\r\n````\r\nimport java.util.Scanner;\r\npublic class Main\r\n{\r\n    public static void main(String[] args) {\r\n        .... // same code as above\r\n        countVowels(string);  // calling funtion, this doesnt return value      \r\n    }\r\n    public static void countVowels(String string)\r\n    {\r\n        int i,vowels=0;\r\n        for (i=0;i&lt;string.length();i++)\r\n        {\r\n            .... // same code as above\r\n        }\r\n        System.out.println(&quot;Vowels: &quot;+ vowels);\r\n    }\r\n}\r\n````\r\n","title":"Count all Vowels in a String","body":"<p>Most of the issues have been answered by others, remaining few left.\n<br>Which are, you are not calling your function <code>countVowels()</code> and you have declare your variable <code>vowels</code> in <code>main</code> method, not in your function <code>countVowels()</code> .<br>\nMethods with return value:</p>\n<pre><code>import java.util.Scanner;\npublic class Main\n{\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        System.out.println(&quot;Enter String: &quot;);\n        String string = input.nextLine(); \n        string=string.toLowerCase();\n        int vowels = countVowels(string); // calling function which returns a value.\n        System.out.println(&quot;Vowels: &quot;+ vowels);\n    }\n    public static int countVowels(String string)\n    {\n        int i,vowels=0;\n        for (i=0;i&lt;string.length();i++)\n        {\n            if (string.charAt(i) == 'a' || string.charAt(i) == 'e' || string.charAt(i) == 'i' || string.charAt(i) == 'o' || string.charAt(i) == 'u')\n            {\n                vowels++; \n            }\n        }\n        return vowels;\n    }\n}\n</code></pre>\n<p>Methods without return value:</p>\n<pre><code>import java.util.Scanner;\npublic class Main\n{\n    public static void main(String[] args) {\n        .... // same code as above\n        countVowels(string);  // calling funtion, this doesnt return value      \n    }\n    public static void countVowels(String string)\n    {\n        int i,vowels=0;\n        for (i=0;i&lt;string.length();i++)\n        {\n            .... // same code as above\n        }\n        System.out.println(&quot;Vowels: &quot;+ vowels);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16145881,"reputation":441,"user_id":11655642,"display_name":"shockwave"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636040571,"creation_date":1636040571,"answer_id":69841932,"question_id":69841442,"body_markdown":"You need to fix following issues,\r\n1. The scope of variable `vowels` is set to method level so it is not available outside `main` method\r\n2. The method `countVowels` is never invoked\r\n3. Assignment operator `=` is used in place of comparison `==`\r\n4. String literal is used `&quot; &quot;` in place of char `&#39; &#39;`\r\n","title":"Count all Vowels in a String","body":"<p>You need to fix following issues,</p>\n<ol>\n<li>The scope of variable <code>vowels</code> is set to method level so it is not available outside <code>main</code> method</li>\n<li>The method <code>countVowels</code> is never invoked</li>\n<li>Assignment operator <code>=</code> is used in place of comparison <code>==</code></li>\n<li>String literal is used <code>&quot; &quot;</code> in place of char <code>' '</code></li>\n</ol>\n"},{"tags":[],"owner":{"display_name":"user17329175"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636040677,"creation_date":1636040677,"answer_id":69841965,"question_id":69841442,"body_markdown":"My code above has many problems. \r\n\r\nFirst, the main class not even calling the method class `(countVowels)`\r\n\r\nSecond, I used double quote `&quot; &quot;` and calling it `char`. String uses `&quot; &quot;` and char uses `&#39; &#39;`\r\n\r\nThird, I used single `=` instead of `==`\r\n\r\nBelow is the refined code\r\n\r\n    import java.util.Scanner;\r\n    public class Main\r\n    {\r\n    \tpublic static void main(String[] args) {\r\n    \t \r\n    \t\tScanner input = new Scanner(System.in);\r\n            System.out.println(&quot;Enter String: &quot;);\r\n            String string = input.nextLine(); \r\n    \r\n            string=string.toLowerCase();\r\n            countVowels(string);\r\n            \r\n    \t}\r\n        public static void countVowels(String string) //method class, dito yung parang procedure nung pagbibilang ng vowels\r\n        {\r\n            int v;\r\n            int vowels = 0;\r\n            for (v=0;v&lt;string.length();v++)\r\n            {\r\n                if (string.charAt(v) == &#39;a&#39; || string.charAt(v) == &#39;e&#39; || string.charAt(v) == &#39;i&#39; || string.charAt(v) == &#39;o&#39; || string.charAt(v) == &#39;u&#39;)\r\n                {\r\n                    vowels++; \r\n                }\r\n                \r\n            }\r\n            System.out.println(&quot;Vowels: &quot;+ vowels);\r\n            \r\n            \r\n    \t}\r\n    }","title":"Count all Vowels in a String","body":"<p>My code above has many problems.</p>\n<p>First, the main class not even calling the method class <code>(countVowels)</code></p>\n<p>Second, I used double quote <code>&quot; &quot;</code> and calling it <code>char</code>. String uses <code>&quot; &quot;</code> and char uses <code>' '</code></p>\n<p>Third, I used single <code>=</code> instead of <code>==</code></p>\n<p>Below is the refined code</p>\n<pre><code>import java.util.Scanner;\npublic class Main\n{\n    public static void main(String[] args) {\n     \n        Scanner input = new Scanner(System.in);\n        System.out.println(&quot;Enter String: &quot;);\n        String string = input.nextLine(); \n\n        string=string.toLowerCase();\n        countVowels(string);\n        \n    }\n    public static void countVowels(String string) //method class, dito yung parang procedure nung pagbibilang ng vowels\n    {\n        int v;\n        int vowels = 0;\n        for (v=0;v&lt;string.length();v++)\n        {\n            if (string.charAt(v) == 'a' || string.charAt(v) == 'e' || string.charAt(v) == 'i' || string.charAt(v) == 'o' || string.charAt(v) == 'u')\n            {\n                vowels++; \n            }\n            \n        }\n        System.out.println(&quot;Vowels: &quot;+ vowels);\n        \n        \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636044909,"creation_date":1636044909,"answer_id":69843030,"question_id":69841442,"body_markdown":"If you&#39;re interested in an alternative method, try this.\r\n- stream the characters to be processed one at a time.\r\n- filter those that are contained in the string of vowels.\r\n- and count those that are passed through.\r\n```\r\nString str = &quot;To be or not to be, that is the question.&quot;;\r\nlong count = str.chars().filter(ch-&gt;&quot;aeiou&quot;.contains((char)ch+&quot;&quot;)).count();\t\r\nSystem.out.println(count);\r\n```\r\nPrints\r\n```\r\n13","title":"Count all Vowels in a String","body":"<p>If you're interested in an alternative method, try this.</p>\n<ul>\n<li>stream the characters to be processed one at a time.</li>\n<li>filter those that are contained in the string of vowels.</li>\n<li>and count those that are passed through.</li>\n</ul>\n<pre><code>String str = &quot;To be or not to be, that is the question.&quot;;\nlong count = str.chars().filter(ch-&gt;&quot;aeiou&quot;.contains((char)ch+&quot;&quot;)).count(); \nSystem.out.println(count);\n</code></pre>\n<p>Prints</p>\n<pre><code>13\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16285373,"reputation":1,"user_id":11760276,"display_name":"Arijit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698169162,"creation_date":1698168567,"answer_id":77354211,"question_id":69841442,"body_markdown":"   I have tried a different approach ( it is definitely not the most starightforward solution one like using switch statements etc )\r\n\r\nI have used linkedHasMap and then, stored the key and values ( based on each key as per the input string, we will store the count . If the key appears only once, their count will remain 1 else it will get incremented).\r\n\r\nOnce the linked has map is populated, I have iterated over the linkedhashmap and summed up the getValue for any vowel keys . \r\n\r\nHope, this gives a different food of thought on these kind of problems\r\n\r\n     import java.util.*;\r\n     class Main {\r\n     public static int  countVowelConsonants(String inpStr) {\r\n        Map&lt;Character,Integer&gt; inpCount = new LinkedHashMap&lt;&gt;();\r\n        int totalVowel =0;\r\n        for ( char c : inpStr.toCharArray())\r\n        {\r\n            inpCount.put(c,inpCount.containsKey(c)?inpCount.get(c)+1:1);\r\n        }\r\n\r\n        for (Map.Entry&lt;Character,Integer&gt; iterator : inpCount.entrySet())\r\n        {\r\n            if (iterator.getKey()==&#39;a&#39;||iterator.getKey()==&#39;e&#39;||iterator.getKey()==&#39;i&#39;||iterator.getKey()==&#39;o&#39;||iterator.getKey()==&#39;u&#39;)\r\n            {\r\n                totalVowel = totalVowel + iterator.getValue();\r\n\r\n        }\r\n        }\r\n        return totalVowel;\r\n    }\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        \r\n        String inpstr = &quot;StackOverFlow&quot;;              \r\n        System.out.println(countVowelConsonants(inpstr.toLowerCase()));\r\n\r\n    }\r\n    }","title":"Count all Vowels in a String","body":"<p>I have tried a different approach ( it is definitely not the most starightforward solution one like using switch statements etc )</p>\n<p>I have used linkedHasMap and then, stored the key and values ( based on each key as per the input string, we will store the count . If the key appears only once, their count will remain 1 else it will get incremented).</p>\n<p>Once the linked has map is populated, I have iterated over the linkedhashmap and summed up the getValue for any vowel keys .</p>\n<p>Hope, this gives a different food of thought on these kind of problems</p>\n<pre><code> import java.util.*;\n class Main {\n public static int  countVowelConsonants(String inpStr) {\n    Map&lt;Character,Integer&gt; inpCount = new LinkedHashMap&lt;&gt;();\n    int totalVowel =0;\n    for ( char c : inpStr.toCharArray())\n    {\n        inpCount.put(c,inpCount.containsKey(c)?inpCount.get(c)+1:1);\n    }\n\n    for (Map.Entry&lt;Character,Integer&gt; iterator : inpCount.entrySet())\n    {\n        if (iterator.getKey()=='a'||iterator.getKey()=='e'||iterator.getKey()=='i'||iterator.getKey()=='o'||iterator.getKey()=='u')\n        {\n            totalVowel = totalVowel + iterator.getValue();\n\n    }\n    }\n    return totalVowel;\n}\n\npublic static void main(String[] args)\n{\n    \n    String inpstr = &quot;StackOverFlow&quot;;              \n    System.out.println(countVowelConsonants(inpstr.toLowerCase()));\n\n}\n}\n</code></pre>\n"}],"owner":{"display_name":"user17329175"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":939,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":6,"score":1,"last_activity_date":1698169162,"creation_date":1636038633,"question_id":69841442,"body_markdown":"I am working on a program that counts the number of vowels in a string but I am getting an error:\r\n\r\n    import java.util.Scanner;\r\n    public class Main\r\n    {\r\n    \tpublic static void main(String[] args) {\r\n    \t    int vowels = 0;\r\n    \t    \r\n    \t    \r\n    \t\tScanner input = new Scanner(System.in);\r\n            System.out.println(&quot;Enter String: &quot;);\r\n            String string = input.nextLine(); \r\n    \r\n            string=string.toLowerCase();\r\n            System.out.println(&quot;Vowels: &quot;+ vowels);\r\n    \t}\r\n        public static void countVowels(String string)\r\n        {\r\n            int i;\r\n            for (i=0;i&lt;string.length();i++)\r\n            {\r\n                if (string.charAt(i) = &quot;a&quot; || string.charAt(i) = &quot;e&quot; || string.charAt(i) = &quot;i&quot; || string.charAt(i) = &quot;o&quot; || string.charAt(v) = &quot;u&quot;)\r\n                {\r\n                    vowels++; \r\n                }\r\n            }\r\n    \t}\r\n    }\r\n    \r\n     \r\nOh and I want to ask what it means to have methods without return value/with return value. Not sure if the code above has return value.","title":"Count all Vowels in a String","body":"<p>I am working on a program that counts the number of vowels in a string but I am getting an error:</p>\n<pre><code>import java.util.Scanner;\npublic class Main\n{\n    public static void main(String[] args) {\n        int vowels = 0;\n        \n        \n        Scanner input = new Scanner(System.in);\n        System.out.println(&quot;Enter String: &quot;);\n        String string = input.nextLine(); \n\n        string=string.toLowerCase();\n        System.out.println(&quot;Vowels: &quot;+ vowels);\n    }\n    public static void countVowels(String string)\n    {\n        int i;\n        for (i=0;i&lt;string.length();i++)\n        {\n            if (string.charAt(i) = &quot;a&quot; || string.charAt(i) = &quot;e&quot; || string.charAt(i) = &quot;i&quot; || string.charAt(i) = &quot;o&quot; || string.charAt(v) = &quot;u&quot;)\n            {\n                vowels++; \n            }\n        }\n    }\n}\n\n \n</code></pre>\n<p>Oh and I want to ask what it means to have methods without return value/with return value. Not sure if the code above has return value.</p>\n"},{"tags":["java","spring-boot","spring-data-redis","redis-cache"],"owner":{"account_id":29718864,"reputation":3,"user_id":22776692,"display_name":"let_there_be_peace"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698168719,"creation_date":1698142193,"question_id":77351201,"body_markdown":"While working on `spring boot` application I added `@Cacheable` annotation in service layer. I was trying to store `org.json.simple.JSONObject` to `java.util.List&lt;&gt;` object. Without the `@Cacheable` annotation process is working fine. But not with it.\r\n\r\n\r\n\r\n**Code** *(service)*:\r\n\r\n```\r\n@Cacheable(value = &quot;EmployeeDetail&quot;)\r\n\t@Override\r\n\tpublic List&lt;JSONObject&gt; getAllRecords() {\r\n\r\n\t\r\n\t\tList&lt;EmployeeDetail&gt; list =  empService.fetchAll();\r\n\t\tList&lt;JSONObject&gt; arr=null;\r\n\t\tJSONObject obj = null;\r\n\t\tif(list!=null &amp;&amp; list.size()&gt;0) {\r\n\t\t\tarr = new ArrayList&lt;JSONObject&gt;();\r\n\t\t\tfor(EmployeeDetail emp:list) {\r\n\t\t\t\tobj = new JSONObject();\r\n\t\t\t\tString ID = emp.getId()+&quot;&quot;;\r\n\t\t\t\tString firstName = emp.getFirstName();\r\n\t\t\t\tString maidenName = emp.getMaidenName()==null?&quot;&quot;:emp.getMaidenName();\r\n\t\t\t\tString lastName = emp.getLastName()==null?&quot;&quot;:emp.getLastName();\r\n\t\t\t\tString FullName = firstName+&quot; &quot;+maidenName+&quot; &quot;+lastName;\r\n\t\t\t\tString Salary = emp.getSalary();\r\n\t\t\t\tString Address = emp.getAddress();\r\n\t\t\t\tString Gender = emp.getGender();\r\n\t\t\t\tobj.put(&quot;ID&quot;, ID);\r\n\t\t\t\tobj.put(&quot;Full Name&quot;, FullName);\r\n\t\t\t\tobj.put(&quot;Salary&quot;, Salary);\r\n\t\t\t\tobj.put(&quot;Address&quot;, Address);\r\n\t\t\t\tobj.put(&quot;Gender&quot;, Gender);\r\n\t\t\t\t\r\n\t\t\t\tarr.add(obj);\r\n\t\t\t}\r\n\t\t\r\n\t\t}\r\n\t\treturn arr;\r\n}\r\n```\r\n\t\r\n\r\n\r\n\r\n**code** *(controller)*\r\n\r\n```\r\n@GetMapping(value=&quot;getAll&quot;)\r\n\tpublic \tList&lt;JSONObject&gt; fetch(){\r\n\t\tList&lt;JSONObject&gt; obj =  service.getAllRecords();\r\n\t\treturn obj;\r\n\r\n}\r\n```\r\n\r\n\r\n**application.properties**\r\n\r\n```\r\nserver.port = 1122\r\nspring.datasource.url=jdbc:mysql://localhost:3306/kitchoemployee?createDatabaseIfNotExist=true\r\nspring.datasource.username=root\r\nspring.datasource.password=root\r\n\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\nspring.jpa.generate-ddl=true\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\nspring.jpa.show-sql=true\r\nspring.jpa.hibernate.naming.implicit-strategy = org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl\r\nspring.jpa.hibernate.naming.physical-strategy = org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\r\n\r\n\r\nspring.cache.type=redis\r\nspring.redis.host=localhost\r\nspring.redis.port=6379\r\n\r\nspring.cache.redis.key-prefix=emp-\r\n#spring.cache.redis.time-to-live=60000\r\nspring.cache.redis.use-key-prefix=true\r\n```\r\n\r\nI am getting below error in response:\r\n\r\n`java.lang.ClassCastException: org.json.simple.JSONObject cannot be cast to java.util.List\r\n        at com.kitcho.service.KitchoServiceImpl$$EnhancerBySpringCGLIB$$c9dae2fe.getAllRecords(&lt;generated&gt;) ~[classes!/:0.0.1-SNAPSHOT]\r\n        at com.kitcho.controller.MyController.fetch(MyController.java:139) ~[classes!/:0.0.1-SNAPSHOT]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212]\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]`\r\n\r\nhowever when I comment the `@Cacheable` annotation code runs fine.I am using `JsonObject` because for some reasons, UI developers want this format with &quot;Full Name&quot; with space in between.\r\n\r\nWhat is the issue. How can I resolve it. I want to keep using Caching.","title":"getting class cast exception when using redis cache","body":"<p>While working on <code>spring boot</code> application I added <code>@Cacheable</code> annotation in service layer. I was trying to store <code>org.json.simple.JSONObject</code> to <code>java.util.List&lt;&gt;</code> object. Without the <code>@Cacheable</code> annotation process is working fine. But not with it.</p>\n<p><strong>Code</strong> <em>(service)</em>:</p>\n<pre><code>@Cacheable(value = &quot;EmployeeDetail&quot;)\n    @Override\n    public List&lt;JSONObject&gt; getAllRecords() {\n\n    \n        List&lt;EmployeeDetail&gt; list =  empService.fetchAll();\n        List&lt;JSONObject&gt; arr=null;\n        JSONObject obj = null;\n        if(list!=null &amp;&amp; list.size()&gt;0) {\n            arr = new ArrayList&lt;JSONObject&gt;();\n            for(EmployeeDetail emp:list) {\n                obj = new JSONObject();\n                String ID = emp.getId()+&quot;&quot;;\n                String firstName = emp.getFirstName();\n                String maidenName = emp.getMaidenName()==null?&quot;&quot;:emp.getMaidenName();\n                String lastName = emp.getLastName()==null?&quot;&quot;:emp.getLastName();\n                String FullName = firstName+&quot; &quot;+maidenName+&quot; &quot;+lastName;\n                String Salary = emp.getSalary();\n                String Address = emp.getAddress();\n                String Gender = emp.getGender();\n                obj.put(&quot;ID&quot;, ID);\n                obj.put(&quot;Full Name&quot;, FullName);\n                obj.put(&quot;Salary&quot;, Salary);\n                obj.put(&quot;Address&quot;, Address);\n                obj.put(&quot;Gender&quot;, Gender);\n                \n                arr.add(obj);\n            }\n        \n        }\n        return arr;\n}\n</code></pre>\n<p><strong>code</strong> <em>(controller)</em></p>\n<pre><code>@GetMapping(value=&quot;getAll&quot;)\n    public  List&lt;JSONObject&gt; fetch(){\n        List&lt;JSONObject&gt; obj =  service.getAllRecords();\n        return obj;\n\n}\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>server.port = 1122\nspring.datasource.url=jdbc:mysql://localhost:3306/kitchoemployee?createDatabaseIfNotExist=true\nspring.datasource.username=root\nspring.datasource.password=root\n\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.jpa.generate-ddl=true\nspring.jpa.hibernate.ddl-auto=update\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\nspring.jpa.show-sql=true\nspring.jpa.hibernate.naming.implicit-strategy = org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl\nspring.jpa.hibernate.naming.physical-strategy = org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\n\n\nspring.cache.type=redis\nspring.redis.host=localhost\nspring.redis.port=6379\n\nspring.cache.redis.key-prefix=emp-\n#spring.cache.redis.time-to-live=60000\nspring.cache.redis.use-key-prefix=true\n</code></pre>\n<p>I am getting below error in response:</p>\n<p><code>java.lang.ClassCastException: org.json.simple.JSONObject cannot be cast to java.util.List at com.kitcho.service.KitchoServiceImpl$$EnhancerBySpringCGLIB$$c9dae2fe.getAllRecords(&lt;generated&gt;) ~[classes!/:0.0.1-SNAPSHOT] at com.kitcho.controller.MyController.fetch(MyController.java:139) ~[classes!/:0.0.1-SNAPSHOT] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]</code></p>\n<p>however when I comment the <code>@Cacheable</code> annotation code runs fine.I am using <code>JsonObject</code> because for some reasons, UI developers want this format with &quot;Full Name&quot; with space in between.</p>\n<p>What is the issue. How can I resolve it. I want to keep using Caching.</p>\n"},{"tags":["java","mockito","spy"],"answers":[{"tags":[],"owner":{"account_id":204659,"reputation":37539,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698168273,"creation_date":1698168273,"answer_id":77354180,"question_id":77354050,"body_markdown":"Your test is wrong;\r\nyou are attempting to use the Mock object (named list) as a Spy object (which is named spyList).\r\n\r\nTry this:\r\n```Java\r\nspyList.add(&quot;test&quot;);\r\nMockito.verify(spyList).add(&quot;test&quot;);\r\n```\r\n","title":"Mockito verify works on mock but not on spy","body":"<p>Your test is wrong;\nyou are attempting to use the Mock object (named list) as a Spy object (which is named spyList).</p>\n<p>Try this:</p>\n<pre><code>spyList.add(&quot;test&quot;);\nMockito.verify(spyList).add(&quot;test&quot;);\n</code></pre>\n"}],"owner":{"account_id":10511728,"reputation":13,"user_id":7747208,"display_name":"Toralf Schneider"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77354180,"answer_count":1,"score":0,"last_activity_date":1698168273,"creation_date":1698166922,"question_id":77354050,"body_markdown":"I have a problem with mockito#spy it does not work.\r\nI have boiled down the problem to this:\r\n\r\n    var list = (ArrayList&lt;String&gt;) Mockito.mock(ArrayList.class);\r\n    var spyList = Mockito.spy(list);\r\n\r\n    list.add(&quot;test&quot;);\r\n    Mockito.verify(spyList).add(&quot;test&quot;);\r\n\r\nHowerver, if I verify on the Mock itself, it does work:\r\n\r\n    var list = (ArrayList&lt;String&gt;) Mockito.mock(ArrayList.class);\r\n    //var spyList = Mockito.spy(list);\r\n\r\n    list.add(&quot;test&quot;);\r\n    Mockito.verify(list).add(&quot;test&quot;);\r\n\r\nI want to use spy on a real object of course, but for the sake of finding my problem, I am using a mock for now.\r\n\r\nI am using Junit 5.7.1 and Mockito 3.3.3. Those are pretty much set in stone I&#39;m afraid.\r\n\r\nAny suggestion what could be the problem?","title":"Mockito verify works on mock but not on spy","body":"<p>I have a problem with mockito#spy it does not work.\nI have boiled down the problem to this:</p>\n<pre><code>var list = (ArrayList&lt;String&gt;) Mockito.mock(ArrayList.class);\nvar spyList = Mockito.spy(list);\n\nlist.add(&quot;test&quot;);\nMockito.verify(spyList).add(&quot;test&quot;);\n</code></pre>\n<p>Howerver, if I verify on the Mock itself, it does work:</p>\n<pre><code>var list = (ArrayList&lt;String&gt;) Mockito.mock(ArrayList.class);\n//var spyList = Mockito.spy(list);\n\nlist.add(&quot;test&quot;);\nMockito.verify(list).add(&quot;test&quot;);\n</code></pre>\n<p>I want to use spy on a real object of course, but for the sake of finding my problem, I am using a mock for now.</p>\n<p>I am using Junit 5.7.1 and Mockito 3.3.3. Those are pretty much set in stone I'm afraid.</p>\n<p>Any suggestion what could be the problem?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":10235034,"reputation":10879,"user_id":7554328,"display_name":"Darren Forsythe"},"score":0,"creation_date":1530985409,"post_id":51225325,"comment_id":89431384,"body_markdown":"Possible duplicate of [How to display auto-configuration report when running a Spring Boot application](https://stackoverflow.com/questions/47101743/how-to-display-auto-configuration-report-when-running-a-spring-boot-application)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/47101743/how-to-display-auto-configuration-report-when-running-a-spring-boot-application\">How to display auto-configuration report when running a Spring Boot application</a>"},{"owner":{"account_id":2557734,"reputation":1911,"user_id":2219361,"accept_rate":88,"display_name":"Taoufik Mohdit"},"score":0,"creation_date":1658923762,"post_id":51225325,"comment_id":129171716,"body_markdown":"One of these 2 command line arguments can be used for this purpose: `--debug` or `--trace`","body":"One of these 2 command line arguments can be used for this purpose: <code>--debug</code> or <code>--trace</code>"}],"answers":[{"tags":[],"owner":{"account_id":9589141,"reputation":929,"user_id":7120711,"display_name":"Joe Doe"},"down_vote_count":1,"up_vote_count":57,"is_accepted":true,"score":56,"last_activity_date":1698167754,"creation_date":1530984919,"answer_id":51225501,"question_id":51225325,"body_markdown":"Adding `debug=true` to the `application.properties` or \r\n`debug: true` in the `application.yml`, file should help. You&#39;ll get more detailed logging. \r\n\r\nGenerally, if you want to see more fine-grained log messages from all members of a given package, you can set that by adding a line such as:\r\n\r\n`logging.level.&lt;package_name&gt;=&lt;LOGGING_LEVEL&gt;`\r\n\r\nfor example:\r\n\r\n`logging.level.org.springframework.context=DEBUG`\r\n\r\nThese log messages may be helpful in finding the core of the problem (in this case why a given exception was thrown).","title":"Spring Boot requests: to &quot;re-run your application with &#39;debug&#39; enabled&quot; - how do I?","body":"<p>Adding <code>debug=true</code> to the <code>application.properties</code> or\n<code>debug: true</code> in the <code>application.yml</code>, file should help. You'll get more detailed logging.</p>\n<p>Generally, if you want to see more fine-grained log messages from all members of a given package, you can set that by adding a line such as:</p>\n<p><code>logging.level.&lt;package_name&gt;=&lt;LOGGING_LEVEL&gt;</code></p>\n<p>for example:</p>\n<p><code>logging.level.org.springframework.context=DEBUG</code></p>\n<p>These log messages may be helpful in finding the core of the problem (in this case why a given exception was thrown).</p>\n"},{"tags":[],"owner":{"account_id":466219,"reputation":1230,"user_id":870834,"accept_rate":90,"display_name":"ADJ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647405613,"creation_date":1647405613,"answer_id":71491879,"question_id":51225325,"body_markdown":"@Joe Doe&#39;s answer gives much more details, but in brief:\r\n\r\nAdd below in your application.yml:\r\n\r\n    debug: true","title":"Spring Boot requests: to &quot;re-run your application with &#39;debug&#39; enabled&quot; - how do I?","body":"<p>@Joe Doe's answer gives much more details, but in brief:</p>\n<p>Add below in your application.yml:</p>\n<pre><code>debug: true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25470420,"reputation":1,"user_id":19268712,"display_name":"Sujit Kate"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1654339214,"creation_date":1654323642,"answer_id":72497572,"question_id":51225325,"body_markdown":"For me its solved my changing port number in `application.properties` in `src/main`\r\n\r\n```\r\nserver.port=9090\r\n```","title":"Spring Boot requests: to &quot;re-run your application with &#39;debug&#39; enabled&quot; - how do I?","body":"<p>For me its solved my changing port number in <code>application.properties</code> in <code>src/main</code></p>\n<pre><code>server.port=9090\n</code></pre>\n"}],"owner":{"account_id":5004368,"reputation":1213,"user_id":5113941,"accept_rate":25,"display_name":"Oren Bochman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70044,"favorite_count":0,"down_vote_count":1,"up_vote_count":41,"accepted_answer_id":51225501,"answer_count":3,"score":40,"last_activity_date":1698167754,"creation_date":1530983587,"question_id":51225325,"body_markdown":"I am getting a myriad of exceptions trying to run my spring boot project in Eclipse. What they have in common is a &quot;re-run your application with &#39;debug&#39; enabled&quot; How exactly is this done?\r\n\r\n* A maven setting ?\r\n* Use the debugger ?\r\n* A command line argument ?\r\n* A vm argument ?\r\n* A spring application settings ?\r\n\r\nI tried a few to no avail. Your assistance much appreciated! ","title":"Spring Boot requests: to &quot;re-run your application with &#39;debug&#39; enabled&quot; - how do I?","body":"<p>I am getting a myriad of exceptions trying to run my spring boot project in Eclipse. What they have in common is a \"re-run your application with 'debug' enabled\" How exactly is this done?</p>\n\n<ul>\n<li>A maven setting ?</li>\n<li>Use the debugger ?</li>\n<li>A command line argument ?</li>\n<li>A vm argument ?</li>\n<li>A spring application settings ?</li>\n</ul>\n\n<p>I tried a few to no avail. Your assistance much appreciated! </p>\n"},{"tags":["java","spring-data-jpa"],"owner":{"account_id":27562228,"reputation":13,"user_id":21035083,"display_name":"Tyali Nexi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698167350,"creation_date":1698167350,"question_id":77354082,"body_markdown":"The idea is to have the same Repository to query all the types of the contracts that come from different tables. Here, I used 3 tables to explain the problem :\r\n\r\nI have this JPA entity\r\n\r\n```java\r\n@Entity\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class ContractEntity {\r\n\r\n  @Id\r\n  @Column(name = &quot;c_reference&quot;)\r\n  private String cReference;\r\n\r\n  @Column(name = &quot;c_number&quot;)\r\n  private String cNumber;\r\n\r\n  @Column(name = &quot;c_index&quot;)\r\n  private Integer cIndex;\r\n}\r\n\r\n```\r\n\r\nAnd the Spring Boot Repository class is\r\n\r\n```java\r\n@Repository\r\npublic interface ContractClientRepository\r\n    extends CrudRepository&lt;ContractEntity, String&gt; {\r\n  // mssql native query\r\n  @Query(\r\n      value =\r\n          &quot;&quot;&quot;\r\n              SELECT co_reference AS c_reference, null AS c_number, 1 AS c_index\r\n              FROM contract10, client ...\r\n              WHERE ...\r\n                AND email = :email\r\n\r\n              UNION\r\n\r\n              SELECT contract_reference AS c_reference, null AS c_number, 2 AS c_index\r\n              FROM contract20, client ...\r\n              WHERE ...\r\n                AND email = :email\r\n\r\n              UNION\r\n\r\n              SELECT ref AS c_reference, null AS c_number, role AS c_index\r\n              FROM contract30, client ...\r\n              WHERE ...\r\n                AND email = :email\r\n                 &quot;&quot;&quot;,\r\n      nativeQuery = true)\r\n  List&lt;ContractEntity&gt; findByEmail(@Param(&quot;email&quot;) String email);\r\n}\r\n```\r\n\r\nThe code works well, but I have strange behavior due to a problem in data:\r\n\r\n```\r\ncontract10\r\nc_reference|c_number|c_index\r\n00AAAABBBBB|null    |null   \r\n```\r\n\r\n```\r\ncontract30\r\nc_reference|c_number|c_index\r\n00AAAABBBBB|123456  |4\r\n```\r\n\r\nWhen the same reference is found twice on the tables contract10 and contract30, the repository returns a list of 2 objects with the same objet. For my case it was `[{00AAAABBBBB, null, null}, {00AAAABBBBB, null, null}]` instead of `[{00AAAABBBBB, null, null}, {00AAAABBBBB, 123456, 4}]`!\r\n\r\nHow can I do to fix this ?\r\n","title":"Strange Behaviour Spring Jpa with native query and union select","body":"<p>The idea is to have the same Repository to query all the types of the contracts that come from different tables. Here, I used 3 tables to explain the problem :</p>\n<p>I have this JPA entity</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class ContractEntity {\n\n  @Id\n  @Column(name = &quot;c_reference&quot;)\n  private String cReference;\n\n  @Column(name = &quot;c_number&quot;)\n  private String cNumber;\n\n  @Column(name = &quot;c_index&quot;)\n  private Integer cIndex;\n}\n\n</code></pre>\n<p>And the Spring Boot Repository class is</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface ContractClientRepository\n    extends CrudRepository&lt;ContractEntity, String&gt; {\n  // mssql native query\n  @Query(\n      value =\n          &quot;&quot;&quot;\n              SELECT co_reference AS c_reference, null AS c_number, 1 AS c_index\n              FROM contract10, client ...\n              WHERE ...\n                AND email = :email\n\n              UNION\n\n              SELECT contract_reference AS c_reference, null AS c_number, 2 AS c_index\n              FROM contract20, client ...\n              WHERE ...\n                AND email = :email\n\n              UNION\n\n              SELECT ref AS c_reference, null AS c_number, role AS c_index\n              FROM contract30, client ...\n              WHERE ...\n                AND email = :email\n                 &quot;&quot;&quot;,\n      nativeQuery = true)\n  List&lt;ContractEntity&gt; findByEmail(@Param(&quot;email&quot;) String email);\n}\n</code></pre>\n<p>The code works well, but I have strange behavior due to a problem in data:</p>\n<pre><code>contract10\nc_reference|c_number|c_index\n00AAAABBBBB|null    |null   \n</code></pre>\n<pre><code>contract30\nc_reference|c_number|c_index\n00AAAABBBBB|123456  |4\n</code></pre>\n<p>When the same reference is found twice on the tables contract10 and contract30, the repository returns a list of 2 objects with the same objet. For my case it was <code>[{00AAAABBBBB, null, null}, {00AAAABBBBB, null, null}]</code> instead of <code>[{00AAAABBBBB, null, null}, {00AAAABBBBB, 123456, 4}]</code>!</p>\n<p>How can I do to fix this ?</p>\n"},{"tags":["java","spring-boot","asynchronous","completable-future"],"comments":[{"owner":{"account_id":14576370,"reputation":335,"user_id":10528125,"display_name":"janardhan sharma"},"score":0,"creation_date":1602502284,"post_id":64316073,"comment_id":113731518,"body_markdown":"Can you elaborate what you were expecting and what you got ?","body":"Can you elaborate what you were expecting and what you got ?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1602503511,"post_id":64316073,"comment_id":113732116,"body_markdown":"Dont manipulate a list from actions that may be executed by different threads. Collect a list of result values after the jobs have been completed. Like in [this answer](https://stackoverflow.com/a/59111717/2711488).","body":"Dont manipulate a list from actions that may be executed by different threads. Collect a list of result values after the jobs have been completed. Like in <a href=\"https://stackoverflow.com/a/59111717/2711488\">this answer</a>."},{"owner":{"account_id":1244574,"reputation":13277,"user_id":1206301,"accept_rate":10,"display_name":"Alexei Kaigorodov"},"score":0,"creation_date":1602515784,"post_id":64316073,"comment_id":113738315,"body_markdown":"it is because you do.not wait when listAll is completed","body":"it is because you do.not wait when listAll is completed"},{"owner":{"account_id":3658432,"reputation":21,"user_id":3048852,"display_name":"Aoon"},"score":0,"creation_date":1602517834,"post_id":64316073,"comment_id":113739351,"body_markdown":"@janardhansharma I expect to get `listAll` contains 10 lists but I randomly get it.","body":"@janardhansharma I expect to get <code>listAll</code> contains 10 lists but I randomly get it."},{"owner":{"account_id":3658432,"reputation":21,"user_id":3048852,"display_name":"Aoon"},"score":0,"creation_date":1602517893,"post_id":64316073,"comment_id":113739374,"body_markdown":"@Holger seems right but let me try, thanks for sharing this","body":"@Holger seems right but let me try, thanks for sharing this"},{"owner":{"account_id":3658432,"reputation":21,"user_id":3048852,"display_name":"Aoon"},"score":0,"creation_date":1602517920,"post_id":64316073,"comment_id":113739386,"body_markdown":"@AlexeiKaigorodov what do you mean?","body":"@AlexeiKaigorodov what do you mean?"},{"owner":{"account_id":1244574,"reputation":13277,"user_id":1206301,"accept_rate":10,"display_name":"Alexei Kaigorodov"},"score":0,"creation_date":1602523503,"post_id":64316073,"comment_id":113741705,"body_markdown":"add the line where you get the size of listAll","body":"add the line where you get the size of listAll"}],"answers":[{"tags":[],"owner":{"account_id":8199180,"reputation":890,"user_id":6171025,"display_name":"divilipir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602499497,"creation_date":1602499497,"answer_id":64316302,"question_id":64316073,"body_markdown":"Use `synchronizedList` instead of `ArrayList`,because `ArrayList` not thread-safe\r\n\r\n\r\n    List&lt;Bclass&gt; listAll = Collections.synchronizedList( new ArrayList() );","title":"Lost some request from CompletableFuture.allOf","body":"<p>Use <code>synchronizedList</code> instead of <code>ArrayList</code>,because <code>ArrayList</code> not thread-safe</p>\n<pre><code>List&lt;Bclass&gt; listAll = Collections.synchronizedList( new ArrayList() );\n</code></pre>\n"}],"owner":{"account_id":3658432,"reputation":21,"user_id":3048852,"display_name":"Aoon"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":387,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698167310,"creation_date":1602498639,"question_id":64316073,"body_markdown":"The problem is I have to call an API one by one, so I use CompleableFunction as below\r\n\r\n```\r\nList&lt;CompletableFuture&lt;Void&gt;&gt; completableFutures = new ArrayList&lt;&gt;();\r\nList&lt;Bclass&gt; listAll = new ArrayList&lt;&gt;();\r\n\r\nfor (SthClass e : result) {\r\n  CompletableFuture&lt;Void&gt; future = CompletableFuture.supplyAsync(() -&gt; fundInService.doRetryTransaction(retryTransactionRequestDto), threadConfiguration.getAsyncExecutor())\r\n                            .thenAccept((result) -&gt; {\r\n                                Aclass a = new Aclass();\r\n\r\n                                listAll.add(a);\r\n                            });\r\n  completableFutures.add(future);\r\n}\r\n\r\nCompletableFuture&lt;Void&gt; allFutures = CompletableFuture.allOf(completableFutures.toArray(new CompletableFuture[0]));\r\nallFutures.get();\r\n```\r\n\r\nI got a random size of listAll from allFutures\r\n\r\nI don&#39;t know what happened to this code, new to Java\r\n","title":"Lost some request from CompletableFuture.allOf","body":"<p>The problem is I have to call an API one by one, so I use CompleableFunction as below</p>\n<pre><code>List&lt;CompletableFuture&lt;Void&gt;&gt; completableFutures = new ArrayList&lt;&gt;();\nList&lt;Bclass&gt; listAll = new ArrayList&lt;&gt;();\n\nfor (SthClass e : result) {\n  CompletableFuture&lt;Void&gt; future = CompletableFuture.supplyAsync(() -&gt; fundInService.doRetryTransaction(retryTransactionRequestDto), threadConfiguration.getAsyncExecutor())\n                            .thenAccept((result) -&gt; {\n                                Aclass a = new Aclass();\n\n                                listAll.add(a);\n                            });\n  completableFutures.add(future);\n}\n\nCompletableFuture&lt;Void&gt; allFutures = CompletableFuture.allOf(completableFutures.toArray(new CompletableFuture[0]));\nallFutures.get();\n</code></pre>\n<p>I got a random size of listAll from allFutures</p>\n<p>I don't know what happened to this code, new to Java</p>\n"},{"tags":["java","spring-boot","bucket4j"],"owner":{"account_id":9195436,"reputation":1,"user_id":6834317,"display_name":"deepti arora"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698166880,"creation_date":1698166880,"question_id":77354043,"body_markdown":"We are writing APIs in microservice based architecture. Since one perticular API does lot of computation and consume a lot of resources, we want to rate limit this API. We have used bucket4j to rate limit the API with token bucket algorithm. But we want to implement leaky bucket algorithm. \r\n\r\nDoes bucket4j support leaky bucket algorithm ? If yes can someone please provide me an example showing that. If no then what will be other possible solution? Should I simply try using blocking queue of Java ? Any implementation example will be of great help\r\n","title":"Implementing leaky bucket using bucket4j to rate limit an API","body":"<p>We are writing APIs in microservice based architecture. Since one perticular API does lot of computation and consume a lot of resources, we want to rate limit this API. We have used bucket4j to rate limit the API with token bucket algorithm. But we want to implement leaky bucket algorithm.</p>\n<p>Does bucket4j support leaky bucket algorithm ? If yes can someone please provide me an example showing that. If no then what will be other possible solution? Should I simply try using blocking queue of Java ? Any implementation example will be of great help</p>\n"},{"tags":["java","jasper-reports","dynamic-reports"],"owner":{"account_id":2190938,"reputation":147,"user_id":1938018,"accept_rate":12,"display_name":"Eyvind Almqvist"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698166409,"creation_date":1698145904,"question_id":77351573,"body_markdown":"The problem is that the subreport gets the margins of the parent report. The sub report contains an ImageBuilder, which builds an image of a static PDF-file. This image is placed between the header and footer from the parent report. I first set these margins in the parent report:\r\n\r\n    final MarginBuilder PAGE_MARGIN = margin(20).setLeft(50).setRight(90).setBottom(15).setTop(40);\r\n    reportBuilder.setPageMargin(PAGE_MARGIN);\r\n\r\nI then try to set small margins in the sub report with MarginBuilder, but it does not work.  How can I make this work, so the subreport does not get the same margins as the parent report? Here is my code for the sub report:\r\n\r\n   \r\n\r\n    private void createImage(final JasperReportBuilder parentReportBuilder, byte[] contentOfStaticPDF) {\r\n\t\tJasperReportBuilder reportBuilderForSubreport = report();\r\n\t\tfinal int PAGE_WIDTH = 450;\r\n\t\tImageBuilder imageBuilder = cmp.image(getContentAsInputStream(contentOfStaticPDF));\r\n\t\timageBuilder.setFixedWidth(PAGE_WIDTH);\r\n\t\timageBuilder.setStretchType(StretchType.CONTAINER_HEIGHT);\r\n\t\tMarginBuilder marginBuilder= margin();\r\n\t\tint margin=1;\r\n\t\tmarginBuilder.setLeft(margin);\r\n\t\tmarginBuilder.setRight(margin);\r\n\t\treportBuilderForSubreport.setPageMargin(marginBuilder);\r\n\t\treportBuilderForSubreport.detail(imageBuilder);\r\n\t\treportBuilderForSubreport.detail(cmp.pageBreak());\r\n\t\tSubreportBuilder subreport = cmp.subreport(reportBuilderForSubreport).setDataSource(createFakeDataSource());\r\n\t\tparentReportBuilder.detail(subreport);\r\n    }","title":"How to set margins in a subreport using DynamicReports?","body":"<p>The problem is that the subreport gets the margins of the parent report. The sub report contains an ImageBuilder, which builds an image of a static PDF-file. This image is placed between the header and footer from the parent report. I first set these margins in the parent report:</p>\n<pre><code>final MarginBuilder PAGE_MARGIN = margin(20).setLeft(50).setRight(90).setBottom(15).setTop(40);\nreportBuilder.setPageMargin(PAGE_MARGIN);\n</code></pre>\n<p>I then try to set small margins in the sub report with MarginBuilder, but it does not work.  How can I make this work, so the subreport does not get the same margins as the parent report? Here is my code for the sub report:</p>\n<pre><code>private void createImage(final JasperReportBuilder parentReportBuilder, byte[] contentOfStaticPDF) {\n    JasperReportBuilder reportBuilderForSubreport = report();\n    final int PAGE_WIDTH = 450;\n    ImageBuilder imageBuilder = cmp.image(getContentAsInputStream(contentOfStaticPDF));\n    imageBuilder.setFixedWidth(PAGE_WIDTH);\n    imageBuilder.setStretchType(StretchType.CONTAINER_HEIGHT);\n    MarginBuilder marginBuilder= margin();\n    int margin=1;\n    marginBuilder.setLeft(margin);\n    marginBuilder.setRight(margin);\n    reportBuilderForSubreport.setPageMargin(marginBuilder);\n    reportBuilderForSubreport.detail(imageBuilder);\n    reportBuilderForSubreport.detail(cmp.pageBreak());\n    SubreportBuilder subreport = cmp.subreport(reportBuilderForSubreport).setDataSource(createFakeDataSource());\n    parentReportBuilder.detail(subreport);\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","garbage-collection","amazon-cloudwatch","aws-fargate"],"comments":[{"owner":{"account_id":22397,"reputation":417270,"user_id":55159,"accept_rate":79,"display_name":"Quassnoi"},"score":0,"creation_date":1697693148,"post_id":77318646,"comment_id":136312357,"body_markdown":"What metric exactly are you referring to when talking about &quot;memory increase&quot;? VMZ? RSS? Some kind of internal Java metric?","body":"What metric exactly are you referring to when talking about &quot;memory increase&quot;? VMZ? RSS? Some kind of internal Java metric?"},{"owner":{"account_id":9983364,"reputation":96,"user_id":7385500,"display_name":"stackhouse"},"score":0,"creation_date":1697809008,"post_id":77318646,"comment_id":136329986,"body_markdown":"in our task definition, we simply set the &#39;memory&#39; property (https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html). Also in the task definition, we set the Java jvm parameter -XX:MaxRAMPercentage=75.0 which sets the maximum Java heap size to be equal to 75% of the available memory.  The task runs a Linux container but we&#39;re not specifying anything about RSS or VSZ.","body":"in our task definition, we simply set the &#39;memory&#39; property (<a href=\"https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/AmazonECS/latest/developerguide/&hellip;</a>). Also in the task definition, we set the Java jvm parameter -XX:MaxRAMPercentage=75.0 which sets the maximum Java heap size to be equal to 75% of the available memory.  The task runs a Linux container but we&#39;re not specifying anything about RSS or VSZ."},{"owner":{"account_id":22397,"reputation":417270,"user_id":55159,"accept_rate":79,"display_name":"Quassnoi"},"score":0,"creation_date":1697809130,"post_id":77318646,"comment_id":136330012,"body_markdown":"&quot;When the memory usage gets to about 90%&quot;: how do you know it happens? where exactly are you looking?","body":"&quot;When the memory usage gets to about 90%&quot;: how do you know it happens? where exactly are you looking?"}],"answers":[{"tags":[],"owner":{"account_id":4304270,"reputation":4868,"user_id":3517132,"display_name":"nathanpeck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698165432,"creation_date":1698165432,"answer_id":77353920,"question_id":77318646,"body_markdown":"If you send an HTTP request to `${ECS_CONTAINER_METADATA_URI_V4}/task/stats` it will give you the current live stats for your containers. See: https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-metadata-endpoint-v4-fargate.html\r\n\r\nRun a tiny sidecar container in your task that is marked as `essential: true` so that if it stops then the task is stopped and replaced. Inside of that sidecar run a little bash script that runs forever and checks the task stats to see if memory utilization has exceeded your threshold. If it has then the script exits. When the script exits the sidecar container will exit and the task will be marked as unhealthy in ECS and replaced.","title":"Relaunch Fargate Task Before Stop the World Garbage Collection","body":"<p>If you send an HTTP request to <code>${ECS_CONTAINER_METADATA_URI_V4}/task/stats</code> it will give you the current live stats for your containers. See: <a href=\"https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-metadata-endpoint-v4-fargate.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-metadata-endpoint-v4-fargate.html</a></p>\n<p>Run a tiny sidecar container in your task that is marked as <code>essential: true</code> so that if it stops then the task is stopped and replaced. Inside of that sidecar run a little bash script that runs forever and checks the task stats to see if memory utilization has exceeded your threshold. If it has then the script exits. When the script exits the sidecar container will exit and the task will be marked as unhealthy in ECS and replaced.</p>\n"}],"owner":{"account_id":9983364,"reputation":96,"user_id":7385500,"display_name":"stackhouse"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698165432,"creation_date":1697652260,"question_id":77318646,"body_markdown":"I have an ECS service with multiple tasks running a Java web application.  We have a memory leak which causes the memory on each task to increase over time. When the memory usage gets to about 90%, Java runs a full / stop the world garbage collection that can pause the task for upwards of 10 seconds. Our long term solution is to fix the leak.  In the meantime, I&#39;d like to relaunch the task when it&#39;s memory usage surpasses 75%. How can I trigger a healthy Fargate TASK to relaunch when the task&#39;s memory exceeds 75%?  ","title":"Relaunch Fargate Task Before Stop the World Garbage Collection","body":"<p>I have an ECS service with multiple tasks running a Java web application.  We have a memory leak which causes the memory on each task to increase over time. When the memory usage gets to about 90%, Java runs a full / stop the world garbage collection that can pause the task for upwards of 10 seconds. Our long term solution is to fix the leak.  In the meantime, I'd like to relaunch the task when it's memory usage surpasses 75%. How can I trigger a healthy Fargate TASK to relaunch when the task's memory exceeds 75%?</p>\n"},{"tags":["java","unit-testing","testing"],"answers":[{"tags":[],"owner":{"account_id":1686851,"reputation":7640,"user_id":1549950,"accept_rate":69,"display_name":"Michael Lihs"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1487179610,"creation_date":1487179610,"answer_id":42256244,"question_id":42255972,"body_markdown":"I guess what the author means is that instead of\r\n\r\n    package my.package;\r\n\r\n    class TestableClass {\r\n         private String property;\r\n    }\r\n\r\nYou can change the visibility to\r\n\r\n    package my.package;\r\n\r\n    class TestableClass {\r\n        String property;\r\n    }\r\n\r\nWith the second implementation you can access the property from a test in the package `my.package` like\r\n\r\n    package my.package;\r\n\r\n    class TestableClassTest {\r\n        // ...\r\n    }\r\n\r\nAt the same time, a subclass cannot access the property - that&#39;s the benefit comapred to `protected`.","title":"How can we test package-private class?","body":"<p>I guess what the author means is that instead of</p>\n\n<pre><code>package my.package;\n\nclass TestableClass {\n     private String property;\n}\n</code></pre>\n\n<p>You can change the visibility to</p>\n\n<pre><code>package my.package;\n\nclass TestableClass {\n    String property;\n}\n</code></pre>\n\n<p>With the second implementation you can access the property from a test in the package <code>my.package</code> like</p>\n\n<pre><code>package my.package;\n\nclass TestableClassTest {\n    // ...\n}\n</code></pre>\n\n<p>At the same time, a subclass cannot access the property - that's the benefit comapred to <code>protected</code>.</p>\n"},{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":1,"up_vote_count":26,"is_accepted":false,"score":25,"last_activity_date":1576472306,"creation_date":1487180509,"answer_id":42256510,"question_id":42255972,"body_markdown":"Basically it means that your tester class should reside in the same package as your tested class. That would make your tested class and all package protected members and methods accessible to your testing class. The classes may be located under different roots: your tested class may be under `src/main/java/myrootpackage/first/second/MyClass.java` and your testing class may be located under `src/test/java/myrootpackage/first/second/MyClassTester.java`.","title":"How can we test package-private class?","body":"<p>Basically it means that your tester class should reside in the same package as your tested class. That would make your tested class and all package protected members and methods accessible to your testing class. The classes may be located under different roots: your tested class may be under <code>src/main/java/myrootpackage/first/second/MyClass.java</code> and your testing class may be located under <code>src/test/java/myrootpackage/first/second/MyClassTester.java</code>.</p>\n"},{"tags":[],"owner":{"account_id":1024963,"reputation":1197,"user_id":1034484,"display_name":"martin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698165111,"creation_date":1698165111,"answer_id":77353884,"question_id":42255972,"body_markdown":"If you want to hide details (that are required for your tests) of your class, you could use [lombok][1] to easily generate an appropriate getter-Method with package-level access, which would allow reading (from test classes in same package) but prevent mutation (everywhere) of a certain field.\r\n\r\n    public class SimpleRetryStrategy implements RetryStrategy {\r\n        @Getter(AccessLevel.PACKAGE)\r\n        private final int maxRetries;\r\n\r\n\r\n  [1]: https://projectlombok.org/features/GetterSetter","title":"How can we test package-private class?","body":"<p>If you want to hide details (that are required for your tests) of your class, you could use <a href=\"https://projectlombok.org/features/GetterSetter\" rel=\"nofollow noreferrer\">lombok</a> to easily generate an appropriate getter-Method with package-level access, which would allow reading (from test classes in same package) but prevent mutation (everywhere) of a certain field.</p>\n<pre><code>public class SimpleRetryStrategy implements RetryStrategy {\n    @Getter(AccessLevel.PACKAGE)\n    private final int maxRetries;\n</code></pre>\n"}],"owner":{"account_id":1925103,"reputation":30437,"user_id":1735756,"accept_rate":65,"display_name":"Haifeng Zhang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12863,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"answer_count":3,"score":27,"last_activity_date":1698165111,"creation_date":1487178796,"question_id":42255972,"body_markdown":"I am reading book `Effective Java`, in `Item 13: Minimize the accessibility of classes and members`, it mentioned that:\r\n&gt; To facilitate testing, you may be tempted to make a class, interface, or member more accessible. This is fine up to a point. it is acceptable to make a private member of a public class package-private in order to test it, but it is not acceptable to raise the accessibility any higher than that. In other words, it is not acceptable to make a class, interface, or member a part of packages&#39;s exported API to facilitate testing.\r\n\r\nI know we should encapsulate members, hiding information from clients, we can test them by accessing the class with setters and getters, but\r\nHow should I understand make class package-private accessible, if so How to test it?","title":"How can we test package-private class?","body":"<p>I am reading book <code>Effective Java</code>, in <code>Item 13: Minimize the accessibility of classes and members</code>, it mentioned that:</p>\n\n<blockquote>\n  <p>To facilitate testing, you may be tempted to make a class, interface, or member more accessible. This is fine up to a point. it is acceptable to make a private member of a public class package-private in order to test it, but it is not acceptable to raise the accessibility any higher than that. In other words, it is not acceptable to make a class, interface, or member a part of packages's exported API to facilitate testing.</p>\n</blockquote>\n\n<p>I know we should encapsulate members, hiding information from clients, we can test them by accessing the class with setters and getters, but\nHow should I understand make class package-private accessible, if so How to test it?</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1668775563,"post_id":74483362,"comment_id":131494188,"body_markdown":"Whats wrong with `.filter(animal -&gt; animal.getColor().equals(Colors.GREEN))`? Is it really about the ten characters you save with the hypothetical `.filter(Colors.GREEN::equals, Animal::getColor)`? Then just use `.filter(a -&gt; a.getColor().equals(Colors.GREEN))`, case closed.","body":"Whats wrong with <code>.filter(animal -&gt; animal.getColor().equals(Colors.GREEN))</code>? Is it really about the ten characters you save with the hypothetical <code>.filter(Colors.GREEN::equals, Animal::getColor)</code>? Then just use <code>.filter(a -&gt; a.getColor().equals(Colors.GREEN))</code>, case closed."},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1668791956,"post_id":74483362,"comment_id":131500139,"body_markdown":"Reminds me of a question of my own  [Is there a convenience method to create a Predicate that tests if a field equals a given value?](https://stackoverflow.com/questions/33300011/is-there-a-convenience-method-to-create-a-predicate-that-tests-if-a-field-equals).","body":"Reminds me of a question of my own  <a href=\"https://stackoverflow.com/questions/33300011/is-there-a-convenience-method-to-create-a-predicate-that-tests-if-a-field-equals\">Is there a convenience method to create a Predicate that tests if a field equals a given value?</a>."}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668728587,"creation_date":1668728257,"answer_id":74483384,"question_id":74483362,"body_markdown":"`filter` accepts a Predicate, whose function can only return a boolean. [There&#39;s no other method signature.](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html)\r\n\r\nIf you want to filter by all green animals, you&#39;d use \r\n\r\n```\r\nanimalStream\r\n    .filter(a -&gt; Colors.GREEN.equals(a.getColor()))\r\n```\r\n\r\nor \r\n\r\n```\r\nPredicate&lt;Animal&gt; isGreen = (a) -&gt; Colors.GREEN.equals(a.getColor());\r\nStream&lt;Animal&gt; greenAnimals = animalStream.filter(isGreen);\r\n```\r\n\r\nDon&#39;t use `map` unless you want a `Stream&lt;COLOR&gt;`\r\n\r\n&gt; join multiple mapping functions\r\n\r\nYou can chain them, rather than join - `.stream().map().map()`, but as you discovered, this does not preserve the original type. ","title":"Stream map on filter","body":"<p><code>filter</code> accepts a Predicate, whose function can only return a boolean. <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html\" rel=\"nofollow noreferrer\">There's no other method signature.</a></p>\n<p>If you want to filter by all green animals, you'd use</p>\n<pre><code>animalStream\n    .filter(a -&gt; Colors.GREEN.equals(a.getColor()))\n</code></pre>\n<p>or</p>\n<pre><code>Predicate&lt;Animal&gt; isGreen = (a) -&gt; Colors.GREEN.equals(a.getColor());\nStream&lt;Animal&gt; greenAnimals = animalStream.filter(isGreen);\n</code></pre>\n<p>Don't use <code>map</code> unless you want a <code>Stream&lt;COLOR&gt;</code></p>\n<blockquote>\n<p>join multiple mapping functions</p>\n</blockquote>\n<p>You can chain them, rather than join - <code>.stream().map().map()</code>, but as you discovered, this does not preserve the original type.</p>\n"},{"tags":[],"owner":{"account_id":26377,"reputation":352187,"user_id":68587,"accept_rate":95,"display_name":"John Kugelman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668728566,"creation_date":1668728566,"answer_id":74483419,"question_id":74483362,"body_markdown":"[StreamEx](https://github.com/amaembo/streamex), a library that provides extended stream methods and classes, has [`filterBy`](http://amaembo.github.io/streamex/javadoc/one/util/streamex/StreamEx.html#filterBy(java.util.function.Function,K)):\r\n\r\n&gt; ```\r\n&gt; public &lt;K&gt; StreamEx&lt;T&gt; filterBy(Function&lt;? super T,? extends K&gt; mapper, K value)\r\n&gt; ```\r\n&gt; Returns a stream consisting of the elements of this stream for which the supplied mapper function returns the given value.\r\n&gt;\r\n&gt; This method behaves like `filter(t -&gt; Objects.equals(value, mapper.apply(t)))`.","title":"Stream map on filter","body":"<p><a href=\"https://github.com/amaembo/streamex\" rel=\"nofollow noreferrer\">StreamEx</a>, a library that provides extended stream methods and classes, has <a href=\"http://amaembo.github.io/streamex/javadoc/one/util/streamex/StreamEx.html#filterBy(java.util.function.Function,K)\" rel=\"nofollow noreferrer\"><code>filterBy</code></a>:</p>\n<blockquote>\n<pre><code>public &lt;K&gt; StreamEx&lt;T&gt; filterBy(Function&lt;? super T,? extends K&gt; mapper, K value)\n</code></pre>\n<p>Returns a stream consisting of the elements of this stream for which the supplied mapper function returns the given value.</p>\n<p>This method behaves like <code>filter(t -&gt; Objects.equals(value, mapper.apply(t)))</code>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1668749273,"creation_date":1668748761,"answer_id":74485224,"question_id":74483362,"body_markdown":"&lt;h3&gt;Java 16&lt;/h3&gt;\r\n\r\nYes, there is a solution using [`Stream#mapMulti`][1] as of Java 16.\r\n\r\n```java\r\nanimalStream\r\n    .mapMulti((animal, consumer) -&gt; {\r\n\t    if (Colors.GREEN.equals(animal.getColor())) {  // condition\r\n\t    \tconsumer.accept(animal);                   // qualify the instance\r\n\t    }\r\n    })\r\n    ...                                                // further operations\r\n```\r\n\r\nThe provided `Consumer&lt;R&gt;` accepts the instance that is qualified based on your criteria. \r\n\r\n**Pros**: The performance-wise advantage of this imperative approach is that you don&#39;t necessarily invoke the two `Stream` operations but just one, for example, a combination of `Stream#map` and `Stream#filter` can be substituted. Though the biggest advantage is that `Consumer#accept` can be invoked as many times as you want, so you can effectively increase a number of entries in a `Stream`.\r\n\r\n**Cons**: However, you lost a bit of the declarative approach and if used only as on the snippet without further processing, it&#39;s worth using rather a simple for-loop or sticking with the `filter` operation (see below):\r\n\r\n&lt;h3&gt;Older Java versions&lt;/h3&gt;\r\n\r\nSimply write the condition down to `Stream#filter`, it&#39;s a correct Stream usage:\r\n\r\n```java\r\nanimalStream\r\n\t .filter(animal -&gt; Colors.GREEN.equals(animal.getColor()))\r\n     ...\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/stream/Stream.html#mapMulti(java.util.function.BiConsumer)","title":"Stream map on filter","body":"<h3>Java 16</h3>\n<p>Yes, there is a solution using <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/stream/Stream.html#mapMulti(java.util.function.BiConsumer)\" rel=\"nofollow noreferrer\"><code>Stream#mapMulti</code></a> as of Java 16.</p>\n<pre class=\"lang-java prettyprint-override\"><code>animalStream\n    .mapMulti((animal, consumer) -&gt; {\n        if (Colors.GREEN.equals(animal.getColor())) {  // condition\n            consumer.accept(animal);                   // qualify the instance\n        }\n    })\n    ...                                                // further operations\n</code></pre>\n<p>The provided <code>Consumer&lt;R&gt;</code> accepts the instance that is qualified based on your criteria.</p>\n<p><strong>Pros</strong>: The performance-wise advantage of this imperative approach is that you don't necessarily invoke the two <code>Stream</code> operations but just one, for example, a combination of <code>Stream#map</code> and <code>Stream#filter</code> can be substituted. Though the biggest advantage is that <code>Consumer#accept</code> can be invoked as many times as you want, so you can effectively increase a number of entries in a <code>Stream</code>.</p>\n<p><strong>Cons</strong>: However, you lost a bit of the declarative approach and if used only as on the snippet without further processing, it's worth using rather a simple for-loop or sticking with the <code>filter</code> operation (see below):</p>\n<h3>Older Java versions</h3>\n<p>Simply write the condition down to <code>Stream#filter</code>, it's a correct Stream usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>animalStream\n     .filter(animal -&gt; Colors.GREEN.equals(animal.getColor()))\n     ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1668752777,"creation_date":1668751887,"answer_id":74485550,"question_id":74483362,"body_markdown":"You can use Guava&#39;s [`Predicates.compose()`][1], or create your own:\r\n\r\n    public static &lt;A, B&gt; Predicate&lt;A&gt; compose(\r\n            Predicate&lt;B&gt; predicate, Function&lt;A, ? extends B&gt; function) {\r\n        return a -&gt; predicate.test(function.apply(a));\r\n    }\r\n\r\nNow just pass that into your filter:\r\n\r\n    animalStream.filter(compose(Colors.GREEN::equals, Animal::getColor))\r\n\r\nAs for the varargs concept, I doubt that&#39;s possible under Java&#39;s generics, unless they&#39;re all of the same type, in which case you&#39;d just `apply()` each in a loop or reduce them with `Function.andThen()`.\r\n\r\n  [1]: https://www.javadoc.io/doc/com.google.guava/guava/latest/com/google/common/base/Predicates.html#compose(com.google.common.base.Predicate,com.google.common.base.Function)","title":"Stream map on filter","body":"<p>You can use Guava's <a href=\"https://www.javadoc.io/doc/com.google.guava/guava/latest/com/google/common/base/Predicates.html#compose(com.google.common.base.Predicate,com.google.common.base.Function)\" rel=\"nofollow noreferrer\"><code>Predicates.compose()</code></a>, or create your own:</p>\n<pre><code>public static &lt;A, B&gt; Predicate&lt;A&gt; compose(\n        Predicate&lt;B&gt; predicate, Function&lt;A, ? extends B&gt; function) {\n    return a -&gt; predicate.test(function.apply(a));\n}\n</code></pre>\n<p>Now just pass that into your filter:</p>\n<pre><code>animalStream.filter(compose(Colors.GREEN::equals, Animal::getColor))\n</code></pre>\n<p>As for the varargs concept, I doubt that's possible under Java's generics, unless they're all of the same type, in which case you'd just <code>apply()</code> each in a loop or reduce them with <code>Function.andThen()</code>.</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668784772,"creation_date":1668775529,"answer_id":74489897,"question_id":74483362,"body_markdown":"Operation `Stream.filter()` expects a `Predicate` which is a *function* producing a `boolean` result. This definition of the `filter` is very intuitive and self-contained, and there are no other flavors of filter (*and I doubt if they will appear in the future*).\r\n\r\nHowever, you can create your implementation of `Predicate` and give it all the behavior you need. And as a Predicate, it would be eligible to be used in the `filter`.\r\n\r\nBefore introducing the implementation, I&#39;ll show some of the capabilities that can be given to such custom `Predicate`.\r\n\r\n```\r\nStream&lt;Animal&gt; greenAnimals = animalStream\r\n    .filter(\r\n        MultiPred.ofOr(Animal::getColor, Color.WHITE::equals, Color.GREEN::equals)\r\n            .or(\r\n                MultiPred.of(Animal::getType, AnimalType.CARNIVORE::equals)\r\n                .and(Animal::canFly) // we can chain custom Predicates with regular ones\r\n            )\r\n            .or(\r\n                MultiPred.of(Animal::getType, AnimalType.HERBIVORE::equals)\r\n                .and(MultiPred.of(Animal::getColor, Color.PURPLE::equals)\r\n                    .or(Animal::canSwim)\r\n                )\r\n            )\r\n    );\r\n```\r\n\r\nHere&#39;s a dummy class `Animal` and enums used in the example above:\r\n\r\n    public class Animal {\r\n        private AnimalType type;\r\n        private boolean canSwim;\r\n        private boolean canFly;\r\n        private Color color;\r\n        \r\n        // getters\r\n    }\r\n    \r\n    public enum AnimalType {\r\n        CARNIVORE, HERBIVORE\r\n    }\r\n    \r\n    public enum Color {\r\n        GREEN, WHITE, PURPLE\r\n    }\r\n\r\n# Implementation\r\n\r\nYou can provide a custom `Predicate` with any capabilities you require.\r\n\r\nThe following predicate expects exposes methods expecting a *keyExtractor* function and a predicate, or a group of predicates that has to be chained with either logical OR `||`, or logical AND `&amp;&amp;`.\r\n\r\n    public class MultiPred&lt;T, K&gt; implements Predicate&lt;T&gt; {\r\n\r\n        private final BiFunction&lt;Function&lt;T, K&gt;, Predicate&lt;K&gt;, Predicate&lt;T&gt;&gt;\r\n            predicateProducer = (f, p) -&gt; t -&gt; p.test(f.apply(t));\r\n        \r\n        private final Predicate&lt;T&gt; p;\r\n        \r\n        private MultiPred(Function&lt;T, K&gt; keyExtractor,\r\n                          Predicate&lt;K&gt; predicate) {\r\n            \r\n            this.p = predicateProducer.apply(keyExtractor, predicate);\r\n        }\r\n        \r\n        @SafeVarargs\r\n        public static &lt;T, K&gt; MultiPred&lt;T, K&gt; ofAnd(Function&lt;T, K&gt; keyExtractor,\r\n                                                   Predicate&lt;K&gt;... predicates) {\r\n            \r\n            return of(keyExtractor, k -&gt; true, Predicate::and, predicates);\r\n        }\r\n        \r\n        @SafeVarargs\r\n        public static &lt;T, K&gt; MultiPred&lt;T, K&gt; ofOr(Function&lt;T, K&gt; keyExtractor,\r\n                                                  Predicate&lt;K&gt;... predicates) {\r\n            \r\n            return of(keyExtractor, k -&gt; false, Predicate::or, predicates);\r\n        }\r\n        \r\n        @SafeVarargs\r\n        public static &lt;T, K&gt; MultiPred&lt;T, K&gt; of(Function&lt;T, K&gt; keyExtractor,\r\n                                                Predicate&lt;K&gt; identity,\r\n                                                BinaryOperator&lt;Predicate&lt;K&gt;&gt; op,\r\n                                                Predicate&lt;K&gt;... predicates) {\r\n            \r\n            Objects.requireNonNull(predicates);\r\n            \r\n            Predicate&lt;K&gt; predicate = Arrays.stream(predicates).reduce(identity, op);\r\n            \r\n            return new MultiPred&lt;&gt;(keyExtractor, predicate);\r\n        }\r\n        \r\n        public static &lt;T, K&gt; MultiPred&lt;T, K&gt; of(Function&lt;T, K&gt; keyExtractor,\r\n                                                Predicate&lt;K&gt; predicate) {\r\n            \r\n            Objects.requireNonNull(keyExtractor);\r\n            Objects.requireNonNull(predicate);\r\n        \r\n            return new MultiPred&lt;&gt;(keyExtractor, predicate);\r\n        }\r\n        \r\n        @Override\r\n        public boolean test(T t) {\r\n            Objects.requireNonNull(t);\r\n            return p.test(t);\r\n        }\r\n        \r\n        @Override\r\n        public Predicate&lt;T&gt; and(Predicate&lt;? super T&gt; other) {\r\n            Objects.requireNonNull(other);\r\n            return p.and(other);\r\n        }\r\n        \r\n        @Override\r\n        public Predicate&lt;T&gt; negate() {\r\n            return p.negate();\r\n        }\r\n        \r\n        @Override\r\n        public Predicate&lt;T&gt; or(Predicate&lt;? super T&gt; other) {\r\n            Objects.requireNonNull(other);\r\n            return p.or(other);\r\n        }\r\n    }\r\n\r\n# Utility Class for constructing Predicates\r\n\r\nThe logic from the class above can materialized as a utility class exposing a bunch `static` method for generating `Predicate`s. It would preserve all the capacities shown in usage example at the beginning.\r\n\r\n*(Credits for this idea belong to @Holger and @shmosel, since he [posted](https://stackoverflow.com/a/74485550/17949945) the static method producing a predicate earlier, hence the code shown below should be considered as built on the answer by @shmosel)*\r\n\r\n    public static class MultiPred {\r\n    \r\n        private MultiPred() {}\r\n    \r\n        @SafeVarargs\r\n        public static &lt;T, K&gt; Predicate&lt;T&gt; ofAnd(Function&lt;T, K&gt; keyExtractor,\r\n                                                Predicate&lt;K&gt;... predicates) {\r\n            \r\n            return of(keyExtractor, k -&gt; true, Predicate::and, predicates);\r\n        }\r\n        \r\n        @SafeVarargs\r\n        public static &lt;T, K&gt; Predicate&lt;T&gt; ofOr(Function&lt;T, K&gt; keyExtractor,\r\n                                               Predicate&lt;K&gt;... predicates) {\r\n            \r\n            return of(keyExtractor, k -&gt; false, Predicate::or, predicates);\r\n        }\r\n        \r\n        @SafeVarargs\r\n        public static &lt;T, K&gt; Predicate&lt;T&gt; of(Function&lt;T, K&gt; keyExtractor,\r\n                                             Predicate&lt;K&gt; identity,\r\n                                             BinaryOperator&lt;Predicate&lt;K&gt;&gt; op,\r\n                                             Predicate&lt;K&gt;... predicates) {\r\n            \r\n            Objects.requireNonNull(predicates);\r\n            \r\n            Predicate&lt;K&gt; predicate = Arrays.stream(predicates).reduce(identity, op);\r\n            \r\n            return getPredicateProducer(keyExtractor, predicate);\r\n        }\r\n        \r\n        public static &lt;T, K&gt; Predicate&lt;T&gt; of(Function&lt;T, K&gt; keyExtractor,\r\n                                             Predicate&lt;K&gt; predicate) {\r\n            \r\n            Objects.requireNonNull(keyExtractor);\r\n            Objects.requireNonNull(predicate);\r\n            \r\n            return getPredicateProducer(keyExtractor, predicate);\r\n        }\r\n        \r\n        private static &lt;T, K&gt; Predicate&lt;T&gt; getPredicateProducer(Function&lt;T, K&gt; keyExtractor,\r\n                                                                Predicate&lt;K&gt; predicate) {\r\n            return t -&gt; predicate.test(keyExtractor.apply(t));\r\n        }\r\n    }","title":"Stream map on filter","body":"<p>Operation <code>Stream.filter()</code> expects a <code>Predicate</code> which is a <em>function</em> producing a <code>boolean</code> result. This definition of the <code>filter</code> is very intuitive and self-contained, and there are no other flavors of filter (<em>and I doubt if they will appear in the future</em>).</p>\n<p>However, you can create your implementation of <code>Predicate</code> and give it all the behavior you need. And as a Predicate, it would be eligible to be used in the <code>filter</code>.</p>\n<p>Before introducing the implementation, I'll show some of the capabilities that can be given to such custom <code>Predicate</code>.</p>\n<pre><code>Stream&lt;Animal&gt; greenAnimals = animalStream\n    .filter(\n        MultiPred.ofOr(Animal::getColor, Color.WHITE::equals, Color.GREEN::equals)\n            .or(\n                MultiPred.of(Animal::getType, AnimalType.CARNIVORE::equals)\n                .and(Animal::canFly) // we can chain custom Predicates with regular ones\n            )\n            .or(\n                MultiPred.of(Animal::getType, AnimalType.HERBIVORE::equals)\n                .and(MultiPred.of(Animal::getColor, Color.PURPLE::equals)\n                    .or(Animal::canSwim)\n                )\n            )\n    );\n</code></pre>\n<p>Here's a dummy class <code>Animal</code> and enums used in the example above:</p>\n<pre><code>public class Animal {\n    private AnimalType type;\n    private boolean canSwim;\n    private boolean canFly;\n    private Color color;\n    \n    // getters\n}\n\npublic enum AnimalType {\n    CARNIVORE, HERBIVORE\n}\n\npublic enum Color {\n    GREEN, WHITE, PURPLE\n}\n</code></pre>\n<h1>Implementation</h1>\n<p>You can provide a custom <code>Predicate</code> with any capabilities you require.</p>\n<p>The following predicate expects exposes methods expecting a <em>keyExtractor</em> function and a predicate, or a group of predicates that has to be chained with either logical OR <code>||</code>, or logical AND <code>&amp;&amp;</code>.</p>\n<pre><code>public class MultiPred&lt;T, K&gt; implements Predicate&lt;T&gt; {\n\n    private final BiFunction&lt;Function&lt;T, K&gt;, Predicate&lt;K&gt;, Predicate&lt;T&gt;&gt;\n        predicateProducer = (f, p) -&gt; t -&gt; p.test(f.apply(t));\n    \n    private final Predicate&lt;T&gt; p;\n    \n    private MultiPred(Function&lt;T, K&gt; keyExtractor,\n                      Predicate&lt;K&gt; predicate) {\n        \n        this.p = predicateProducer.apply(keyExtractor, predicate);\n    }\n    \n    @SafeVarargs\n    public static &lt;T, K&gt; MultiPred&lt;T, K&gt; ofAnd(Function&lt;T, K&gt; keyExtractor,\n                                               Predicate&lt;K&gt;... predicates) {\n        \n        return of(keyExtractor, k -&gt; true, Predicate::and, predicates);\n    }\n    \n    @SafeVarargs\n    public static &lt;T, K&gt; MultiPred&lt;T, K&gt; ofOr(Function&lt;T, K&gt; keyExtractor,\n                                              Predicate&lt;K&gt;... predicates) {\n        \n        return of(keyExtractor, k -&gt; false, Predicate::or, predicates);\n    }\n    \n    @SafeVarargs\n    public static &lt;T, K&gt; MultiPred&lt;T, K&gt; of(Function&lt;T, K&gt; keyExtractor,\n                                            Predicate&lt;K&gt; identity,\n                                            BinaryOperator&lt;Predicate&lt;K&gt;&gt; op,\n                                            Predicate&lt;K&gt;... predicates) {\n        \n        Objects.requireNonNull(predicates);\n        \n        Predicate&lt;K&gt; predicate = Arrays.stream(predicates).reduce(identity, op);\n        \n        return new MultiPred&lt;&gt;(keyExtractor, predicate);\n    }\n    \n    public static &lt;T, K&gt; MultiPred&lt;T, K&gt; of(Function&lt;T, K&gt; keyExtractor,\n                                            Predicate&lt;K&gt; predicate) {\n        \n        Objects.requireNonNull(keyExtractor);\n        Objects.requireNonNull(predicate);\n    \n        return new MultiPred&lt;&gt;(keyExtractor, predicate);\n    }\n    \n    @Override\n    public boolean test(T t) {\n        Objects.requireNonNull(t);\n        return p.test(t);\n    }\n    \n    @Override\n    public Predicate&lt;T&gt; and(Predicate&lt;? super T&gt; other) {\n        Objects.requireNonNull(other);\n        return p.and(other);\n    }\n    \n    @Override\n    public Predicate&lt;T&gt; negate() {\n        return p.negate();\n    }\n    \n    @Override\n    public Predicate&lt;T&gt; or(Predicate&lt;? super T&gt; other) {\n        Objects.requireNonNull(other);\n        return p.or(other);\n    }\n}\n</code></pre>\n<h1>Utility Class for constructing Predicates</h1>\n<p>The logic from the class above can materialized as a utility class exposing a bunch <code>static</code> method for generating <code>Predicate</code>s. It would preserve all the capacities shown in usage example at the beginning.</p>\n<p><em>(Credits for this idea belong to @Holger and @shmosel, since he <a href=\"https://stackoverflow.com/a/74485550/17949945\">posted</a> the static method producing a predicate earlier, hence the code shown below should be considered as built on the answer by @shmosel)</em></p>\n<pre><code>public static class MultiPred {\n\n    private MultiPred() {}\n\n    @SafeVarargs\n    public static &lt;T, K&gt; Predicate&lt;T&gt; ofAnd(Function&lt;T, K&gt; keyExtractor,\n                                            Predicate&lt;K&gt;... predicates) {\n        \n        return of(keyExtractor, k -&gt; true, Predicate::and, predicates);\n    }\n    \n    @SafeVarargs\n    public static &lt;T, K&gt; Predicate&lt;T&gt; ofOr(Function&lt;T, K&gt; keyExtractor,\n                                           Predicate&lt;K&gt;... predicates) {\n        \n        return of(keyExtractor, k -&gt; false, Predicate::or, predicates);\n    }\n    \n    @SafeVarargs\n    public static &lt;T, K&gt; Predicate&lt;T&gt; of(Function&lt;T, K&gt; keyExtractor,\n                                         Predicate&lt;K&gt; identity,\n                                         BinaryOperator&lt;Predicate&lt;K&gt;&gt; op,\n                                         Predicate&lt;K&gt;... predicates) {\n        \n        Objects.requireNonNull(predicates);\n        \n        Predicate&lt;K&gt; predicate = Arrays.stream(predicates).reduce(identity, op);\n        \n        return getPredicateProducer(keyExtractor, predicate);\n    }\n    \n    public static &lt;T, K&gt; Predicate&lt;T&gt; of(Function&lt;T, K&gt; keyExtractor,\n                                         Predicate&lt;K&gt; predicate) {\n        \n        Objects.requireNonNull(keyExtractor);\n        Objects.requireNonNull(predicate);\n        \n        return getPredicateProducer(keyExtractor, predicate);\n    }\n    \n    private static &lt;T, K&gt; Predicate&lt;T&gt; getPredicateProducer(Function&lt;T, K&gt; keyExtractor,\n                                                            Predicate&lt;K&gt; predicate) {\n        return t -&gt; predicate.test(keyExtractor.apply(t));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":934481,"reputation":7402,"user_id":2911357,"accept_rate":84,"display_name":"Michele Mariotti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698164369,"creation_date":1698164369,"answer_id":77353816,"question_id":74483362,"body_markdown":"I&#39;m a little late, but this has not been proposed yet.\r\n\r\nStreamEx has been already mentioned, but its usage may vary ;)\r\n\r\n    greenAnimals = StreamEx.of(animalStream)\r\n        .mapToEntry(Animal::getColor)\r\n        .filterValues(Colors.GREEN::equals)\r\n        .keys();\r\n\r\n    animalWithMotherStream = StreamEx.of(animalStream)\r\n        .mapToEntry(Animal::getMother)\r\n        .removeValues(Optional::isEmpty)\r\n        .keys();\r\n\r\nThe general approach is to map an implicit &#39;Entry&#39; from the streamed objects themselves (as keys) AND a property of those objects (as values).\r\nThen you can use whatever you want on the values and finally return the keys.","title":"Stream map on filter","body":"<p>I'm a little late, but this has not been proposed yet.</p>\n<p>StreamEx has been already mentioned, but its usage may vary ;)</p>\n<pre><code>greenAnimals = StreamEx.of(animalStream)\n    .mapToEntry(Animal::getColor)\n    .filterValues(Colors.GREEN::equals)\n    .keys();\n\nanimalWithMotherStream = StreamEx.of(animalStream)\n    .mapToEntry(Animal::getMother)\n    .removeValues(Optional::isEmpty)\n    .keys();\n</code></pre>\n<p>The general approach is to map an implicit 'Entry' from the streamed objects themselves (as keys) AND a property of those objects (as values).\nThen you can use whatever you want on the values and finally return the keys.</p>\n"}],"owner":{"account_id":23010429,"reputation":215,"user_id":17133024,"display_name":"Dario Viva"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":242,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":74485550,"answer_count":6,"score":5,"last_activity_date":1698164369,"creation_date":1668728071,"question_id":74483362,"body_markdown":"When you have a Stream of Objects you can filter on them pretty elegantly.\r\n```java\r\nswimmingAnimalStream = animalStream\r\n    .filter(Animal::canSwim);\r\n```\r\nWhen you have slightly more complex filters instead of using Method references you have to use Lambdas.\r\n```java\r\ngreenAnimals = animalStream\r\n    .filter(animal -&gt; animal.getColor().equals(Colors.GREEN));\r\n```\r\nIs there a way to map the value before filtering on it, but still have the complete object after the filter?\r\nSo the fallowing is not what I want:\r\n```java\r\nanimalStream\r\n    .map(Animal::getColor)\r\n    .filter(Colors.GREEN::equals)\r\n```\r\nWith this I would be left with color information only.\r\nWhat I also would like to avoid is extracting the method. I am looking for a more streamlined way of doing this. Something like this for example:\r\n```java\r\nanimalStream\r\n    .filter(Colors.GREEN::equals, Animal::getColor);\r\n```\r\nThe method signature of this filter method would look like this.\r\n```java\r\n&lt;MAPPED&gt; Stream&lt;T&gt; filter(Predicate&lt;MAPPED&gt; filter, Function&lt;? super T, MAPPED&gt; mappingFunction);\r\n```\r\nEven better would be a version where you could join multiple mapping functions. On the fly one could maybe use a varargs for the mappingFunction. But I honestly dont know how that would be possible with Generics. But thats a different story.\r\n\r\nThe solution should also be able to use whatever Predicate that one could imagine. Equals is just an Example. Another example would be to check if a field from the object is present.\r\n\r\n```java\r\nanimalWithMotherStream = animalStream\r\n    .filter(Optional::isPresent, Animal::getMother);\r\n```\r\nDoes anyone now a cleaner Solution, or a library that does this already?","title":"Stream map on filter","body":"<p>When you have a Stream of Objects you can filter on them pretty elegantly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>swimmingAnimalStream = animalStream\n    .filter(Animal::canSwim);\n</code></pre>\n<p>When you have slightly more complex filters instead of using Method references you have to use Lambdas.</p>\n<pre class=\"lang-java prettyprint-override\"><code>greenAnimals = animalStream\n    .filter(animal -&gt; animal.getColor().equals(Colors.GREEN));\n</code></pre>\n<p>Is there a way to map the value before filtering on it, but still have the complete object after the filter?\nSo the fallowing is not what I want:</p>\n<pre class=\"lang-java prettyprint-override\"><code>animalStream\n    .map(Animal::getColor)\n    .filter(Colors.GREEN::equals)\n</code></pre>\n<p>With this I would be left with color information only.\nWhat I also would like to avoid is extracting the method. I am looking for a more streamlined way of doing this. Something like this for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>animalStream\n    .filter(Colors.GREEN::equals, Animal::getColor);\n</code></pre>\n<p>The method signature of this filter method would look like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;MAPPED&gt; Stream&lt;T&gt; filter(Predicate&lt;MAPPED&gt; filter, Function&lt;? super T, MAPPED&gt; mappingFunction);\n</code></pre>\n<p>Even better would be a version where you could join multiple mapping functions. On the fly one could maybe use a varargs for the mappingFunction. But I honestly dont know how that would be possible with Generics. But thats a different story.</p>\n<p>The solution should also be able to use whatever Predicate that one could imagine. Equals is just an Example. Another example would be to check if a field from the object is present.</p>\n<pre class=\"lang-java prettyprint-override\"><code>animalWithMotherStream = animalStream\n    .filter(Optional::isPresent, Animal::getMother);\n</code></pre>\n<p>Does anyone now a cleaner Solution, or a library that does this already?</p>\n"},{"tags":["java","multithreading","thread-synchronization"],"comments":[{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1698151712,"post_id":77352091,"comment_id":136366440,"body_markdown":"I&#39;m afraid you need a little more than an `Object` to do what you want to do","body":"I&#39;m afraid you need a little more than an <code>Object</code> to do what you want to do"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1698152289,"post_id":77352091,"comment_id":136366543,"body_markdown":"`can I make the gama thread wait until beta finishes` One way to do that is just use a single thread.  If you want sequential semantics like this, a single thread of execution does that naturally.","body":"<code>can I make the gama thread wait until beta finishes</code> One way to do that is just use a single thread.  If you want sequential semantics like this, a single thread of execution does that naturally."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1698152442,"post_id":77352091,"comment_id":136366583,"body_markdown":"P.S. I don&#39;t like your one space indentation.  Please use at least two spaces.  I prefer three myself.","body":"P.S. I don&#39;t like your one space indentation.  Please use at least two spaces.  I prefer three myself."},{"owner":{"account_id":4643732,"reputation":425,"user_id":5146920,"accept_rate":40,"display_name":"ot954"},"score":0,"creation_date":1698154474,"post_id":77352091,"comment_id":136367055,"body_markdown":"The reason for using multiple thread is time interval of execution of test() will be different.","body":"The reason for using multiple thread is time interval of execution of test() will be different."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1698156950,"post_id":77352091,"comment_id":136367709,"body_markdown":"Are you saying that each of the two threads is `synchronized` on the same `sharedLock` object at the same time? That seems unlikely. What makes you think they both are synchronized on the same object at the same time? Can you expand your example to something that other people can try out for themselves? http://sscce.org/","body":"Are you saying that each of the two threads is <code>synchronized</code> on the same <code>sharedLock</code> object at the same time? That seems unlikely. What makes you think they both are synchronized on the same object at the same time? Can you expand your example to something that other people can try out for themselves? <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">sscce.org</a>"},{"owner":{"account_id":4643732,"reputation":425,"user_id":5146920,"accept_rate":40,"display_name":"ot954"},"score":0,"creation_date":1698158171,"post_id":77352091,"comment_id":136367969,"body_markdown":"I am not sure about that. What I know for sure is that if both thread were operating on the same shared space then this would work. But I have two different instances and that is my question- how can I share lock between threads started by different instances","body":"I am not sure about that. What I know for sure is that if both thread were operating on the same shared space then this would work. But I have two different instances and that is my question- how can I share lock between threads started by different instances"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1698158240,"post_id":77352091,"comment_id":136367980,"body_markdown":"P.S., You said, &quot;how can I make the gama thread wait until...?&quot; IMO, saying, &quot;wait&quot; to talk about `synchronized` blocks is a red flag. If one thread has to wait for to enter a synchronized block, that&#39;s a necessary evil, not desirable behavior. You should always try to minimize that wait. When `synchronized` (or `ReentrantLock`) appears in your code, it sends a message to other programmers: It says, &quot;This protects shared data from corruption.&quot; If you want to tell other programmers, &quot;This thread must wait until...&quot; then you should use something else (probably from `java.util.concurrent`.)","body":"P.S., You said, &quot;how can I make the gama thread wait until...?&quot; IMO, saying, &quot;wait&quot; to talk about <code>synchronized</code> blocks is a red flag. If one thread has to wait for to enter a synchronized block, that&#39;s a necessary evil, not desirable behavior. You should always try to minimize that wait. When <code>synchronized</code> (or <code>ReentrantLock</code>) appears in your code, it sends a message to other programmers: It says, &quot;This protects shared data from corruption.&quot; If you want to tell other programmers, &quot;This thread must wait until...&quot; then you should use something else (probably from <code>java.util.concurrent</code>.)"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1698158498,"post_id":77352091,"comment_id":136368036,"body_markdown":"Re, &quot;how can I share lock between threads started by different instances?&quot; Your code already _appears_ (from what we can see of it) to do that. Your `run` method clearly passes the same argument to `beta.start` and `gama.start`. If both of those `start` methods look like the one that you showed, then they&#39;re both `synchronized` on the same shared lock. Like I said above, if you could amend your question with an example that other people here could run and demonstrate the problem for themselves, then you would be more likely to get a helpful answer.","body":"Re, &quot;how can I share lock between threads started by different instances?&quot; Your code already <i>appears</i> (from what we can see of it) to do that. Your <code>run</code> method clearly passes the same argument to <code>beta.start</code> and <code>gama.start</code>. If both of those <code>start</code> methods look like the one that you showed, then they&#39;re both <code>synchronized</code> on the same shared lock. Like I said above, if you could amend your question with an example that other people here could run and demonstrate the problem for themselves, then you would be more likely to get a helpful answer."},{"owner":{"account_id":4643732,"reputation":425,"user_id":5146920,"accept_rate":40,"display_name":"ot954"},"score":0,"creation_date":1698159787,"post_id":77352091,"comment_id":136368330,"body_markdown":"Sorry but if they both are synchronized on the same shared lock, should not only one thread execute start() at a time? I have added the implementation of the start() method for both classes.","body":"Sorry but if they both are synchronized on the same shared lock, should not only one thread execute start() at a time? I have added the implementation of the start() method for both classes."}],"answers":[{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698152352,"creation_date":1698152352,"answer_id":77352269,"question_id":77352091,"body_markdown":"Try a semaphore:\r\n\r\n\r\n    public static void start(Semaphore sharedLock) {\r\n        Thread t = new Thread(() -&gt; {\r\n            while (true) {\r\n                try {\r\n                    sharedLock.acquire();\r\n                    test();\r\n                    sharedLock.release();\r\n                    TimeUnit.SECONDS.sleep(3);\r\n                } catch (InterruptedException e) {\r\n                    Thread.currentThread().interrupt();\r\n                }\r\n            }\r\n        });\r\n        t.start();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Semaphore semaphore = new Semaphore(1);\r\n        start(semaphore);\r\n        start(semaphore);\r\n    }\r\n","title":"How to share lock between threads started by instances of different classes in Java?","body":"<p>Try a semaphore:</p>\n<pre><code>public static void start(Semaphore sharedLock) {\n    Thread t = new Thread(() -&gt; {\n        while (true) {\n            try {\n                sharedLock.acquire();\n                test();\n                sharedLock.release();\n                TimeUnit.SECONDS.sleep(3);\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n            }\n        }\n    });\n    t.start();\n}\n\npublic static void main(String[] args) {\n    Semaphore semaphore = new Semaphore(1);\n    start(semaphore);\n    start(semaphore);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698163881,"creation_date":1698163881,"answer_id":77353759,"question_id":77352091,"body_markdown":"&gt; I have added the implementation of the `start()` method for both classes.&quot;\r\n \r\nActually, no. You added the `test` methods. But no matter because...\r\n\r\n&gt; Only one thread should be able to execute test() at a time. So if beta thread calls start() first then it should print 1 to 20 and then gama thread execute start()\r\n\r\nYour `beta.test()` method doesn&#39;t print anything. It creates a new `ScheduledExecutorService`, and it submits a task to it. The scheduled executor performs that task in a completely different thread, and the task makes no reference whatever to the `sharedLock` object.\r\n","title":"How to share lock between threads started by instances of different classes in Java?","body":"<blockquote>\n<p>I have added the implementation of the <code>start()</code> method for both classes.&quot;</p>\n</blockquote>\n<p>Actually, no. You added the <code>test</code> methods. But no matter because...</p>\n<blockquote>\n<p>Only one thread should be able to execute test() at a time. So if beta thread calls start() first then it should print 1 to 20 and then gama thread execute start()</p>\n</blockquote>\n<p>Your <code>beta.test()</code> method doesn't print anything. It creates a new <code>ScheduledExecutorService</code>, and it submits a task to it. The scheduled executor performs that task in a completely different thread, and the task makes no reference whatever to the <code>sharedLock</code> object.</p>\n"}],"owner":{"account_id":4643732,"reputation":425,"user_id":5146920,"accept_rate":40,"display_name":"ot954"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698163881,"creation_date":1698150902,"question_id":77352091,"body_markdown":"I tried creating a shared lock in the Application class and passing it to the method parameter that creates a thread and uses this lock. I want a thread created by an instance of a class to synchronize with a thread created by an instance of another class.\r\n\r\nClass Alpha has a start(Object sharedLock) which creates a new thread.\r\n````\r\n\r\npublic abstract class Alpha {\r\n   public abstract void test();\r\n\r\n   public void start(Object sharedLock) {\r\n      Thread t = new Thread(() -&gt; {\r\n         while(true) {\r\n            synchronized(sharedLock) {\r\n               test();\r\n            }\r\n            try {\r\n               TimeUnit.SECONDS.sleep(db.timeInterval)\r\n            } catch(InterruptedException e) {\r\n                 Thread.currentThread().interrupt();\r\n            }\r\n        }\r\n      })\r\n   }\r\n}\r\n\r\n````\r\nClass Alpha has two base classes Beta and Gama, which invokes start() method from Application class. Below is the code snippet\r\n````\r\n@Override\r\npublic void run(String... args) {\r\n    beta.start(sharedLock);\r\n    gama.start(sharedLock)\r\n}\r\n````\r\ntest() is overridden in child classes - beta and gama.\r\n\r\nAnd here is the implementation of test()\r\n````\r\npublic class Beta extends Aplha {\r\n   @Override\r\n   public void test() {\r\n      ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);\r\n      final int[] count = {1};\r\n   \r\n      Runnable task = new Runnable() {\r\n         @Override\r\n         public void run() {\r\n            System.out.println(count[0]);\r\n            count[0]++;\r\n\r\n            if (count[0] &gt; 20) {\r\n               executor.shutdown();\r\n            }\r\n         }\r\n      }\r\n      executor.scheduledAtFixedRate(task, 0, 1, TimeUnit.SECONDS);\r\n   }\r\n}\r\n\r\npublic class Gama extends Alpha {\r\n   @Override\r\n   public void test() {\r\n      System.out.println(&quot;Gama thread&quot;)\r\n   }\r\n}\r\n````\r\nOnly one thread should be able to execute test() at a time. So if beta thread calls start() first then it should print 1 to 20 and then gama thread execute start()\r\n\r\nAlso, when a thread is seeping, the other thread can execute by having access to lock\r\n\r\nHow can I achieve this behaviour?","title":"How to share lock between threads started by instances of different classes in Java?","body":"<p>I tried creating a shared lock in the Application class and passing it to the method parameter that creates a thread and uses this lock. I want a thread created by an instance of a class to synchronize with a thread created by an instance of another class.</p>\n<p>Class Alpha has a start(Object sharedLock) which creates a new thread.</p>\n<pre><code>\npublic abstract class Alpha {\n   public abstract void test();\n\n   public void start(Object sharedLock) {\n      Thread t = new Thread(() -&gt; {\n         while(true) {\n            synchronized(sharedLock) {\n               test();\n            }\n            try {\n               TimeUnit.SECONDS.sleep(db.timeInterval)\n            } catch(InterruptedException e) {\n                 Thread.currentThread().interrupt();\n            }\n        }\n      })\n   }\n}\n\n</code></pre>\n<p>Class Alpha has two base classes Beta and Gama, which invokes start() method from Application class. Below is the code snippet</p>\n<pre><code>@Override\npublic void run(String... args) {\n    beta.start(sharedLock);\n    gama.start(sharedLock)\n}\n</code></pre>\n<p>test() is overridden in child classes - beta and gama.</p>\n<p>And here is the implementation of test()</p>\n<pre><code>public class Beta extends Aplha {\n   @Override\n   public void test() {\n      ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);\n      final int[] count = {1};\n   \n      Runnable task = new Runnable() {\n         @Override\n         public void run() {\n            System.out.println(count[0]);\n            count[0]++;\n\n            if (count[0] &gt; 20) {\n               executor.shutdown();\n            }\n         }\n      }\n      executor.scheduledAtFixedRate(task, 0, 1, TimeUnit.SECONDS);\n   }\n}\n\npublic class Gama extends Alpha {\n   @Override\n   public void test() {\n      System.out.println(&quot;Gama thread&quot;)\n   }\n}\n</code></pre>\n<p>Only one thread should be able to execute test() at a time. So if beta thread calls start() first then it should print 1 to 20 and then gama thread execute start()</p>\n<p>Also, when a thread is seeping, the other thread can execute by having access to lock</p>\n<p>How can I achieve this behaviour?</p>\n"},{"tags":["java","micronaut","testcontainers","testcontainers-junit5"],"comments":[{"owner":{"account_id":19255478,"reputation":8414,"user_id":14072498,"display_name":"Roar S."},"score":0,"creation_date":1698164968,"post_id":77352776,"comment_id":136369459,"body_markdown":"When having `init.sql` in folder `src/test/resources/`,the file will end up in folder target/test-classes after build, and you&#39;ll use `classpath:init.sql` . Normally, you would create a folder called e.g. scripts inside folder `resources`, then use `classpath:scripts/init.sql` BR","body":"When having <code>init.sql</code> in folder <code>src&#47;test&#47;resources&#47;</code>,the file will end up in folder target/test-classes after build, and you&#39;ll use <code>classpath:init.sql</code> . Normally, you would create a folder called e.g. scripts inside folder <code>resources</code>, then use <code>classpath:scripts&#47;init.sql</code> BR"},{"owner":{"account_id":4906768,"reputation":3,"user_id":3953299,"display_name":"Heavyrage"},"score":0,"creation_date":1698166324,"post_id":77352776,"comment_id":136369697,"body_markdown":"Thanks for the hint, but no success doing this. As already said in the thread, I tried every form of declaration I thought of, same result each time.","body":"Thanks for the hint, but no success doing this. As already said in the thread, I tried every form of declaration I thought of, same result each time."},{"owner":{"account_id":19255478,"reputation":8414,"user_id":14072498,"display_name":"Roar S."},"score":0,"creation_date":1698166552,"post_id":77352776,"comment_id":136369733,"body_markdown":"Can you verify that the file is copied to target/test-classes after build ? BR","body":"Can you verify that the file is copied to target/test-classes after build ? BR"},{"owner":{"account_id":4906768,"reputation":3,"user_id":3953299,"display_name":"Heavyrage"},"score":0,"creation_date":1698167140,"post_id":77352776,"comment_id":136369836,"body_markdown":"Indeed it is (target/test-classes/scripts/init.sql) ! I can&#39;t really understand why it is not found by the ScriptUtils class. I took a look at the sources of the Testcontainers dependency and it uses &quot;Thread.currentThread().getContextClassLoader().getResource(initScriptPath)&quot; to find for the resource. Any idea why it is not resolved as supposed?","body":"Indeed it is (target/test-classes/scripts/init.sql) ! I can&#39;t really understand why it is not found by the ScriptUtils class. I took a look at the sources of the Testcontainers dependency and it uses &quot;Thread.currentThread().getContextClassLoader().getResource(&zwnj;&#8203;initScriptPath)&quot; to find for the resource. Any idea why it is not resolved as supposed?"}],"owner":{"account_id":4906768,"reputation":3,"user_id":3953299,"display_name":"Heavyrage"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698163786,"creation_date":1698156016,"question_id":77352776,"body_markdown":"I am stuck on this since two days, while I am trying to implement the Test-resources capability of Micronaut framework.\r\n\r\nHere is the content of my application-test.properties : \r\n\r\n```\r\ndatasources.default.dialect=MYSQL\r\ndatasources.default.driverClassName=com.mysql.cj.jdbc.Driver\r\ndatasources.default.schema-generate=CREATE_DROP\r\n\r\ntest-resources.containers.mysql.image-name=mysql:8.1.0\r\ntest-resources.containers.mysql.db-name=testDB\r\ntest-resources.containers.mysql.username=dbuser\r\ntest-resources.containers.mysql.password=&quot;mypassword&quot;\r\ntest-resources.containers.mysql.init-script-path=&quot;src/test/resources/init.sql&quot;\r\n```\r\n\r\nMy `pom.xml` is declaring the common micronaut dependencies (generated from the Micronaut Launch app).\r\n\r\nAnyway, I always have the following error when trying the `mvn clean test` command.\r\n\r\n\r\n```\r\n[test-resources-service] 15:33:37.784 [default-nioEventLoopGroup-1-3] INFO  tc.mysql:8.1.0 - Container is started (JDBC URL: jdbc:mysql://localhost:53931/testDB)\r\n[test-resources-service] 15:33:37.785 [default-nioEventLoopGroup-1-3] WARN  org.testcontainers.ext.ScriptUtils - Could not load classpath init script: &quot;src/test/resources/init.sql&quot;\r\n[test-resources-service] 15:33:37.785 [default-nioEventLoopGroup-1-3] ERROR tc.mysql:8.1.0 - Could not start container\r\norg.testcontainers.ext.ScriptUtils$ScriptLoadException: Could not load classpath init script: &quot;src/test/resources/init.sql&quot;. Resource not found.\r\n        at org.testcontainers.ext.ScriptUtils.runInitScript(ScriptUtils.java:347)\r\n        at org.testcontainers.containers.JdbcDatabaseContainer.runInitScriptIfRequired(JdbcDatabaseContainer.java:332)\r\n        at org.testcontainers.containers.JdbcDatabaseContainer.containerIsStarted(JdbcDatabaseContainer.java:187)\r\n        at org.testcontainers.containers.GenericContainer.containerIsStarted(GenericContainer.java:712)\r\n        at org.testcontainers.containers.GenericContainer.tryStart(GenericContainer.java:532)\r\n        at org.testcontainers.containers.GenericContainer.lambda$doStart$0(GenericContainer.java:344)\r\n        at org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:81)\r\n        at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:334)\r\n        at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:322)\r\n        at io.micronaut.testresources.testcontainers.TestContainers.getOrCreate(TestContainers.java:80)\r\n        at io.micronaut.testresources.testcontainers.AbstractTestContainersProvider.resolve(AbstractTestContainersProvider.java:100)\r\n        at io.micronaut.testresources.server.TestResourcesController.resolve(TestResourcesController.java:90)\r\n```\r\n\r\nIn the Micronaut documentation it is mentioned that it has to be a file in the `classpath`.\r\n[Micronaut Test-Resources doc](https://micronaut-projects.github.io/micronaut-test-resources/snapshot/guide/#modules-databases)\r\n\r\nMy guess here is that the classpth does not use the same root as my java project.\r\n\r\nI tried different values for `test-resources.containers.mysql.init-script-path`. \r\n- Relative path using the project root as reference\r\n- Absolute path (not sure it is the best solution, but at least it confirmed that even an absolute path couldn&#39;t be resolved)\r\n- using the `classpath:` prefix for the relative path of the init script (ex : classpath:src/test/resources/init.sql&quot;)\r\n- using the declaration from the Testcontainers documentation ([init script in Classpath](https://java.testcontainers.org/modules/databases/jdbc/#using-a-classpath-init-script) &amp; [init script from a file](https://java.testcontainers.org/modules/databases/jdbc/#using-an-init-script-from-a-file)\r\n\r\nNone of them even worked.\r\n\r\nAnyway I am sure the other part of the Test-Resources module are working well because when I don&#39;t declare an init script, the database is used but none of the expected tables are present.\r\n\r\nAm I doing something wrong or missing something in the configuration?\r\n\r\nEdit : I am using the standard controller and CrudRepository from Micronaut. I just found appealing to use the Test-Resource for integration purpose.","title":"org.testcontainers.ext.ScriptUtils$ScriptLoadException: Could not load classpath init script with Micronaut project using Test-Resources","body":"<p>I am stuck on this since two days, while I am trying to implement the Test-resources capability of Micronaut framework.</p>\n<p>Here is the content of my application-test.properties :</p>\n<pre><code>datasources.default.dialect=MYSQL\ndatasources.default.driverClassName=com.mysql.cj.jdbc.Driver\ndatasources.default.schema-generate=CREATE_DROP\n\ntest-resources.containers.mysql.image-name=mysql:8.1.0\ntest-resources.containers.mysql.db-name=testDB\ntest-resources.containers.mysql.username=dbuser\ntest-resources.containers.mysql.password=&quot;mypassword&quot;\ntest-resources.containers.mysql.init-script-path=&quot;src/test/resources/init.sql&quot;\n</code></pre>\n<p>My <code>pom.xml</code> is declaring the common micronaut dependencies (generated from the Micronaut Launch app).</p>\n<p>Anyway, I always have the following error when trying the <code>mvn clean test</code> command.</p>\n<pre><code>[test-resources-service] 15:33:37.784 [default-nioEventLoopGroup-1-3] INFO  tc.mysql:8.1.0 - Container is started (JDBC URL: jdbc:mysql://localhost:53931/testDB)\n[test-resources-service] 15:33:37.785 [default-nioEventLoopGroup-1-3] WARN  org.testcontainers.ext.ScriptUtils - Could not load classpath init script: &quot;src/test/resources/init.sql&quot;\n[test-resources-service] 15:33:37.785 [default-nioEventLoopGroup-1-3] ERROR tc.mysql:8.1.0 - Could not start container\norg.testcontainers.ext.ScriptUtils$ScriptLoadException: Could not load classpath init script: &quot;src/test/resources/init.sql&quot;. Resource not found.\n        at org.testcontainers.ext.ScriptUtils.runInitScript(ScriptUtils.java:347)\n        at org.testcontainers.containers.JdbcDatabaseContainer.runInitScriptIfRequired(JdbcDatabaseContainer.java:332)\n        at org.testcontainers.containers.JdbcDatabaseContainer.containerIsStarted(JdbcDatabaseContainer.java:187)\n        at org.testcontainers.containers.GenericContainer.containerIsStarted(GenericContainer.java:712)\n        at org.testcontainers.containers.GenericContainer.tryStart(GenericContainer.java:532)\n        at org.testcontainers.containers.GenericContainer.lambda$doStart$0(GenericContainer.java:344)\n        at org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:81)\n        at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:334)\n        at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:322)\n        at io.micronaut.testresources.testcontainers.TestContainers.getOrCreate(TestContainers.java:80)\n        at io.micronaut.testresources.testcontainers.AbstractTestContainersProvider.resolve(AbstractTestContainersProvider.java:100)\n        at io.micronaut.testresources.server.TestResourcesController.resolve(TestResourcesController.java:90)\n</code></pre>\n<p>In the Micronaut documentation it is mentioned that it has to be a file in the <code>classpath</code>.\n<a href=\"https://micronaut-projects.github.io/micronaut-test-resources/snapshot/guide/#modules-databases\" rel=\"nofollow noreferrer\">Micronaut Test-Resources doc</a></p>\n<p>My guess here is that the classpth does not use the same root as my java project.</p>\n<p>I tried different values for <code>test-resources.containers.mysql.init-script-path</code>.</p>\n<ul>\n<li>Relative path using the project root as reference</li>\n<li>Absolute path (not sure it is the best solution, but at least it confirmed that even an absolute path couldn't be resolved)</li>\n<li>using the <code>classpath:</code> prefix for the relative path of the init script (ex : classpath:src/test/resources/init.sql&quot;)</li>\n<li>using the declaration from the Testcontainers documentation (<a href=\"https://java.testcontainers.org/modules/databases/jdbc/#using-a-classpath-init-script\" rel=\"nofollow noreferrer\">init script in Classpath</a> &amp; <a href=\"https://java.testcontainers.org/modules/databases/jdbc/#using-an-init-script-from-a-file\" rel=\"nofollow noreferrer\">init script from a file</a></li>\n</ul>\n<p>None of them even worked.</p>\n<p>Anyway I am sure the other part of the Test-Resources module are working well because when I don't declare an init script, the database is used but none of the expected tables are present.</p>\n<p>Am I doing something wrong or missing something in the configuration?</p>\n<p>Edit : I am using the standard controller and CrudRepository from Micronaut. I just found appealing to use the Test-Resource for integration purpose.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":1,"creation_date":1698162430,"post_id":77353516,"comment_id":136368949,"body_markdown":"You just have to remove all references to the object in the stack and the heap and the object will be unreachable and eligible for collection. The other way you can do this is use native resources / JNI (See Java.awt.Window.dispose for an example)","body":"You just have to remove all references to the object in the stack and the heap and the object will be unreachable and eligible for collection. The other way you can do this is use native resources / JNI (See Java.awt.Window.dispose for an example)"}],"answers":[{"tags":[],"owner":{"account_id":7421543,"reputation":2880,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698161967,"creation_date":1698161967,"answer_id":77353524,"question_id":77353516,"body_markdown":"The JVM automatically frees memory. Read about [Java&#39;s garbage collector][1].\r\n\r\n\r\n  [1]: https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html","title":"Is there any way in Java to delete an element from the memory?","body":"<p>The JVM automatically frees memory. Read about <a href=\"https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html\" rel=\"nofollow noreferrer\">Java's garbage collector</a>.</p>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1698162359,"creation_date":1698162359,"answer_id":77353580,"question_id":77353516,"body_markdown":"&gt; and the user presses cancel\r\n\r\nThat shouldn&#39;t be happening in an object&#39;s constructor anyway. A constructor is for constructing an object **only**.\r\n\r\nGet the input from the user first, and only invoke the constructor if they choose to proceed. If they press cancel, don&#39;t invoke the constructor.","title":"Is there any way in Java to delete an element from the memory?","body":"<blockquote>\n<p>and the user presses cancel</p>\n</blockquote>\n<p>That shouldn't be happening in an object's constructor anyway. A constructor is for constructing an object <strong>only</strong>.</p>\n<p>Get the input from the user first, and only invoke the constructor if they choose to proceed. If they press cancel, don't invoke the constructor.</p>\n"}],"owner":{"account_id":29723109,"reputation":1,"user_id":22779881,"display_name":"FireGoose&#39;s Empire"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1698163182,"creation_date":1698161904,"question_id":77353516,"body_markdown":"Say that I want to create a class object with a *JOptionPane* dialog. In the constructor I assign the variables and other stuff, and the user presses cancel. Of course I want to delete that thing, because it is half made and could be buggy. Is there **any way** to do this in **java**?","title":"Is there any way in Java to delete an element from the memory?","body":"<p>Say that I want to create a class object with a <em>JOptionPane</em> dialog. In the constructor I assign the variables and other stuff, and the user presses cancel. Of course I want to delete that thing, because it is half made and could be buggy. Is there <strong>any way</strong> to do this in <strong>java</strong>?</p>\n"},{"tags":["java","kotlin","collator"],"comments":[{"owner":{"account_id":10259286,"reputation":3326,"user_id":19090048,"display_name":"mandy8055"},"score":0,"creation_date":1698161304,"post_id":77353337,"comment_id":136368671,"body_markdown":"what is the issue you&#39;re facing when using `Collator`?","body":"what is the issue you&#39;re facing when using <code>Collator</code>?"},{"owner":{"account_id":19513118,"reputation":431,"user_id":14276644,"display_name":" "},"score":0,"creation_date":1698162439,"post_id":77353337,"comment_id":136368954,"body_markdown":"@mandy8055 The problem is that there are countries that can speak another language (not their native one), such as Brazil speaks Portuguese, but there are differences from pure Portuguese. In connection with such an emphasis, it is precisely necessary to substitute language and country.","body":"@mandy8055 The problem is that there are countries that can speak another language (not their native one), such as Brazil speaks Portuguese, but there are differences from pure Portuguese. In connection with such an emphasis, it is precisely necessary to substitute language and country."},{"owner":{"account_id":10259286,"reputation":3326,"user_id":19090048,"display_name":"mandy8055"},"score":0,"creation_date":1698163539,"post_id":77353337,"comment_id":136369183,"body_markdown":"@, one way which I can think of is you can use some collection(a `map` perhaps) to store the official language for each country. After that once you get the user&#39;s locale, you can check in the collection to see if the user&#39;s country has a different official language or not.","body":"@, one way which I can think of is you can use some collection(a <code>map</code> perhaps) to store the official language for each country. After that once you get the user&#39;s locale, you can check in the collection to see if the user&#39;s country has a different official language or not."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1698163688,"post_id":77353337,"comment_id":136369217,"body_markdown":"If you want to distinguish from pure Portuguese, study the [`Locale` Javadoc](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Locale.html) to learn about variants and extensions. Recent versions of Java use by default the Unicode [*Common Locale Data Repository (CLDR)*](https://en.m.wikipedia.org/wiki/Common_Locale_Data_Repository) which is rich with data about sub-cultures and variations.","body":"If you want to distinguish from pure Portuguese, study the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Locale.html\" rel=\"nofollow noreferrer\"><code>Locale</code> Javadoc</a> to learn about variants and extensions. Recent versions of Java use by default the Unicode <a href=\"https://en.m.wikipedia.org/wiki/Common_Locale_Data_Repository\" rel=\"nofollow noreferrer\"><i>Common Locale Data Repository (CLDR)</i></a> which is rich with data about sub-cultures and variations."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1698163861,"post_id":77353337,"comment_id":136369255,"body_markdown":"What is the problem with the code you&#39;ve already written, which already uses a locale with values taken from the user?","body":"What is the problem with the code you&#39;ve already written, which already uses a locale with values taken from the user?"}],"answers":[{"tags":[],"owner":{"account_id":10259286,"reputation":3326,"user_id":19090048,"display_name":"mandy8055"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1698162312,"creation_date":1698161970,"answer_id":77353525,"question_id":77353337,"body_markdown":"As far as I understand your problem, you just need a way to pass the locale to your `Collator`.You&#39;ll need a `Locale` instance to get the job done. Something like:\r\n\r\n```kotlin\r\nimport java.text.Collator\r\nimport java.util.*\r\n\r\nfun main() {\r\n    val list = ArrayList&lt;String&gt;()\r\n    list.add(&quot;&#225;rbol&quot;)\r\n    list.add(&quot;&#250;nico&quot;)\r\n    list.add(&quot;cosas&quot;)\r\n    list.add(&quot;f&#250;tbol&quot;)\r\n\r\n    val spanishLocale = Locale(&quot;es&quot;, &quot;ES&quot;)\r\n    val collator = Collator.getInstance(spanishLocale)\r\n\r\n    // Sort the list using the Collator instance\r\n    Collections.sort(list, collator)\r\n\r\n    println(list)\r\n}\r\n\r\n```\r\n***[CODE DEMO](https://pl.kotl.in/Fky47CxzI)***\r\n\r\nYou can read more around this in ***[this blog post.](https://www.baeldung.com/java-sort-list-alphabetically#sorting-list-with-accented-characters)***","title":"Passing locale to sort strings alphabetically","body":"<p>As far as I understand your problem, you just need a way to pass the locale to your <code>Collator</code>.You'll need a <code>Locale</code> instance to get the job done. Something like:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import java.text.Collator\nimport java.util.*\n\nfun main() {\n    val list = ArrayList&lt;String&gt;()\n    list.add(&quot;rbol&quot;)\n    list.add(&quot;nico&quot;)\n    list.add(&quot;cosas&quot;)\n    list.add(&quot;ftbol&quot;)\n\n    val spanishLocale = Locale(&quot;es&quot;, &quot;ES&quot;)\n    val collator = Collator.getInstance(spanishLocale)\n\n    // Sort the list using the Collator instance\n    Collections.sort(list, collator)\n\n    println(list)\n}\n\n</code></pre>\n<p><em><strong><a href=\"https://pl.kotl.in/Fky47CxzI\" rel=\"nofollow noreferrer\">CODE DEMO</a></strong></em></p>\n<p>You can read more around this in <em><strong><a href=\"https://www.baeldung.com/java-sort-list-alphabetically#sorting-list-with-accented-characters\" rel=\"nofollow noreferrer\">this blog post.</a></strong></em></p>\n"}],"owner":{"account_id":19513118,"reputation":431,"user_id":14276644,"display_name":" "},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77353525,"answer_count":1,"score":0,"last_activity_date":1698163032,"creation_date":1698160665,"question_id":77353337,"body_markdown":"I have a list of strings that I would like to sort alphabetically, depending on the user&#39;s locale. To do this I use Collator:\r\n\r\n    val collator = Collator.getInstance()\r\n    return collator.compare(stringOne, stringTwo)\r\n\r\nBy default, Locale.getDefault() is passed to the collator, but I would like to use sorting by locale, which we will receive from the user, with the transfer of language and country. For example:\r\n\r\n    val col2 = Collator.getInstance(Locale(&quot;en&quot;, &quot;US&quot;))\r\n\r\nor\r\n\r\n    val col2 = Collator.getInstance(Locale(&quot;en&quot;, &quot;EN&quot;))\r\n\r\n","title":"Passing locale to sort strings alphabetically","body":"<p>I have a list of strings that I would like to sort alphabetically, depending on the user's locale. To do this I use Collator:</p>\n<pre><code>val collator = Collator.getInstance()\nreturn collator.compare(stringOne, stringTwo)\n</code></pre>\n<p>By default, Locale.getDefault() is passed to the collator, but I would like to use sorting by locale, which we will receive from the user, with the transfer of language and country. For example:</p>\n<pre><code>val col2 = Collator.getInstance(Locale(&quot;en&quot;, &quot;US&quot;))\n</code></pre>\n<p>or</p>\n<pre><code>val col2 = Collator.getInstance(Locale(&quot;en&quot;, &quot;EN&quot;))\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":2,"creation_date":1698163034,"post_id":77353547,"comment_id":136369085,"body_markdown":"`String decodedResponse=new String(Base64.getDecoder().decode(response));` - the internal structure of pdf is not text, so you are corrupting it by decoding it to a string. Depending on the exact response from the other application, most probably you just need to send the exact response as your own response, no decoding, no nothing.","body":"<code>String decodedResponse=new String(Base64.getDecoder().decode(response));</code> - the internal structure of pdf is not text, so you are corrupting it by decoding it to a string. Depending on the exact response from the other application, most probably you just need to send the exact response as your own response, no decoding, no nothing."},{"owner":{"account_id":29104131,"reputation":25,"user_id":22295330,"display_name":"Iswarya Elango"},"score":0,"creation_date":1698167795,"post_id":77353547,"comment_id":136369937,"body_markdown":"@Chaosfire Wow Great. You are right. It is worked on after decoding the response and directly returning the byte[] as a response.","body":"@Chaosfire Wow Great. You are right. It is worked on after decoding the response and directly returning the byte[] as a response."}],"owner":{"account_id":29104131,"reputation":25,"user_id":22295330,"display_name":"Iswarya Elango"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1698162632,"creation_date":1698162149,"question_id":77353547,"body_markdown":"I should be able to download any type of file that I receive from the downstream application. Below is the code I tried. It is working for text and csv files, but the remaining types of files, like pdf, docx, png, etc., are not even opening.\r\n\r\nCan you please correct the code if something is wrong with it? I will get the extension dynamically. Here in this code, just to try for pdf extension, I have hard-coded it.\r\n\r\nThanks in advance.\r\n```java\r\npublic class downloadController {\r\n\r\n    @Autowired\r\n    DownloadService downloadService;\r\n\r\n    @GetMapping(&quot;/download&quot;)\r\n    public ResponseEntity&lt;Resource&gt; download() {\r\n        return downloadService.download();\r\n    }\r\n}\r\n\r\npublic class DownloadService {\r\n\r\n    @Autowired\r\n    RestTemplate restTemplate;\r\n\r\n    public ResponseEntity&lt;Resource&gt; download() {\r\n        String response = restTemplate.exchange(......);\r\n        String decodedResponse = new String(Base64.getDecoder().decode(response));\r\n        Resource resource = new ByteArrayResource(decodedResponse.getBytes());\r\n        return ResponseEntity.ok()\r\n                             .header(HttpHeader.CONTENT_DISPOSITION, &quot;attachment;filename=\\&quot;report.pdf\\&quot;&quot;)\r\n                             .contentType(MediaType.parseMediaType(MediaType.APPLICATION_PDF_VALUE))\r\n                             .body(resource);\r\n    }\r\n}\r\n```\r\n","title":"Unable to open the downloaded File in Java","body":"<p>I should be able to download any type of file that I receive from the downstream application. Below is the code I tried. It is working for text and csv files, but the remaining types of files, like pdf, docx, png, etc., are not even opening.</p>\n<p>Can you please correct the code if something is wrong with it? I will get the extension dynamically. Here in this code, just to try for pdf extension, I have hard-coded it.</p>\n<p>Thanks in advance.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class downloadController {\n\n    @Autowired\n    DownloadService downloadService;\n\n    @GetMapping(&quot;/download&quot;)\n    public ResponseEntity&lt;Resource&gt; download() {\n        return downloadService.download();\n    }\n}\n\npublic class DownloadService {\n\n    @Autowired\n    RestTemplate restTemplate;\n\n    public ResponseEntity&lt;Resource&gt; download() {\n        String response = restTemplate.exchange(......);\n        String decodedResponse = new String(Base64.getDecoder().decode(response));\n        Resource resource = new ByteArrayResource(decodedResponse.getBytes());\n        return ResponseEntity.ok()\n                             .header(HttpHeader.CONTENT_DISPOSITION, &quot;attachment;filename=\\&quot;report.pdf\\&quot;&quot;)\n                             .contentType(MediaType.parseMediaType(MediaType.APPLICATION_PDF_VALUE))\n                             .body(resource);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","azure","azure-app-configuration"],"answers":[{"tags":[],"owner":{"account_id":1219806,"reputation":449,"user_id":1186656,"accept_rate":60,"display_name":"mrm9084"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698162346,"creation_date":1698162346,"answer_id":77353577,"question_id":77351665,"body_markdown":"You you set the label filter but don&#39;t give it a value it will load all configuration settings without a label. For more info see https://learn.microsoft.com/en-us/azure/developer/java/spring-framework/app-configuration-support?tabs=azure-ad#selecting-configurations","title":"Force stop Azure App Config use spring active profiles as label","body":"<p>You you set the label filter but don't give it a value it will load all configuration settings without a label. For more info see <a href=\"https://learn.microsoft.com/en-us/azure/developer/java/spring-framework/app-configuration-support?tabs=azure-ad#selecting-configurations\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/developer/java/spring-framework/app-configuration-support?tabs=azure-ad#selecting-configurations</a></p>\n"}],"owner":{"account_id":19019146,"reputation":41,"user_id":15558195,"display_name":"aws_acc_quest"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698162346,"creation_date":1698146754,"question_id":77351665,"body_markdown":"I have a working spring boot application that loads properties from Azure AppConfig service\r\n\r\nHere is a bootstrap.yml:\r\n```\r\nspring:\r\n  cloud:\r\n    azure:\r\n      appconfiguration:\r\n        stores[0]:\r\n          feature-flags:\r\n            enabled: true\r\n          selects[0]:\r\n            key-filter: ${key-filter}\r\n          connection-string: ${connection-string}\r\n```\r\n\r\nIt&#39;s all working just fine\r\nBUT\r\nIf any spring profile is active, Azure AppConfig uses it as a label filter, it&#39;s event says in their doc: https://learn.microsoft.com/en-us/java/api/overview/azure/spring-cloud-starter-appconfiguration-config-readme?view=azure-java-stable\r\n\r\nAnd also the profile being added to the BootstrapPropertySource\r\nyou could find in logs when you run the app:\r\n\r\nwithout profile: BootstrapPropertySource {name=&#39;bootstrapProperties-${key-filter}/${your_link}/ &#39;}\r\n\r\nwith profile: BootstrapPropertySource {name=&#39;bootstrapProperties-${key-filter}/${your_link}/profile&#39;}\r\n\r\nand in case with profile enabled, properties are not being loaded\r\nI tried option with adding &#39;label-filter: ,&#39; but it does not work\r\n\r\nMaybe there is any way to force AppConfig NOT use the spring profile at all?","title":"Force stop Azure App Config use spring active profiles as label","body":"<p>I have a working spring boot application that loads properties from Azure AppConfig service</p>\n<p>Here is a bootstrap.yml:</p>\n<pre><code>spring:\n  cloud:\n    azure:\n      appconfiguration:\n        stores[0]:\n          feature-flags:\n            enabled: true\n          selects[0]:\n            key-filter: ${key-filter}\n          connection-string: ${connection-string}\n</code></pre>\n<p>It's all working just fine\nBUT\nIf any spring profile is active, Azure AppConfig uses it as a label filter, it's event says in their doc: <a href=\"https://learn.microsoft.com/en-us/java/api/overview/azure/spring-cloud-starter-appconfiguration-config-readme?view=azure-java-stable\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/java/api/overview/azure/spring-cloud-starter-appconfiguration-config-readme?view=azure-java-stable</a></p>\n<p>And also the profile being added to the BootstrapPropertySource\nyou could find in logs when you run the app:</p>\n<p>without profile: BootstrapPropertySource {name='bootstrapProperties-${key-filter}/${your_link}/ '}</p>\n<p>with profile: BootstrapPropertySource {name='bootstrapProperties-${key-filter}/${your_link}/profile'}</p>\n<p>and in case with profile enabled, properties are not being loaded\nI tried option with adding 'label-filter: ,' but it does not work</p>\n<p>Maybe there is any way to force AppConfig NOT use the spring profile at all?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1698094507,"post_id":77348231,"comment_id":136359444,"body_markdown":"Hello, welcome to Stack Overflow! Please, provide a [mre].","body":"Hello, welcome to Stack Overflow! Please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":39208,"reputation":251220,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1698096818,"post_id":77348231,"comment_id":136359742,"body_markdown":"Where is your JSON? You need to include it in your question","body":"Where is your JSON? You need to include it in your question"},{"owner":{"account_id":26555431,"reputation":558,"user_id":20184128,"display_name":"berse2212"},"score":0,"creation_date":1698128729,"post_id":77348231,"comment_id":136362430,"body_markdown":"Your JSON does not match your Object. The Id is an Object in your JSON while being just a String in your Java-Class. Without your JSON all I can say is you need to create a fitting ID-Class and use that as the type for id.","body":"Your JSON does not match your Object. The Id is an Object in your JSON while being just a String in your Java-Class. Without your JSON all I can say is you need to create a fitting ID-Class and use that as the type for id."}],"answers":[{"tags":[],"owner":{"account_id":15332547,"reputation":1,"user_id":12869301,"display_name":"E Oliveira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698162307,"creation_date":1698162307,"answer_id":77353570,"question_id":77348231,"body_markdown":"My solution  was removed @JsonFormat(shape = JsonFormat.Shape.ARRAY) and  @JsonProperty and  after  modified this method.\r\n\r\n  @Autowired\r\n    //private ModelMapper modelMapper;\r\n    public  UsuarioDTO consultausuario(String id) throws JsonProcessingException {\r\n\r\n\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        String  url = &quot;http://localhost:3000/usuario&quot; + id  ;\r\n\r\n        // return  new mo().getForObject(&quot;http://localhost:3000/usuario&quot;,UsuarioDTO.class);\r\n\r\n        return restTemplate.getForObject(url,UsuarioDTO.class);\r\n    }\r\n\r\nThanks!","title":"Problem populating object with JSON data?","body":"<p>My solution  was removed @JsonFormat(shape = JsonFormat.Shape.ARRAY) and  @JsonProperty and  after  modified this method.</p>\n<p>@Autowired\n//private ModelMapper modelMapper;\npublic  UsuarioDTO consultausuario(String id) throws JsonProcessingException {</p>\n<pre><code>    RestTemplate restTemplate = new RestTemplate();\n    String  url = &quot;http://localhost:3000/usuario&quot; + id  ;\n\n    // return  new mo().getForObject(&quot;http://localhost:3000/usuario&quot;,UsuarioDTO.class);\n\n    return restTemplate.getForObject(url,UsuarioDTO.class);\n}\n</code></pre>\n<p>Thanks!</p>\n"}],"owner":{"account_id":15332547,"reputation":1,"user_id":12869301,"display_name":"E Oliveira"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1698162307,"creation_date":1698093955,"question_id":77348231,"body_markdown":"Code:\r\n\r\n```java\r\n@Getter\r\n@Setter\r\n@JsonFormat(shape = JsonFormat.Shape.ARRAY)\r\n// @JsonPropertyOrder({ &quot;id&quot;,&quot;matricula&quot; ,&quot;dv&quot;, &quot;nome&quot; })\r\npublic class UsuarioDTO implements Serializable {\r\n\tprivate static final long serialVersionUID = 1L;\r\n\t@JsonProperty(&quot;id&quot;)\r\n\tprivate String id;\r\n\t@JsonProperty(&quot;matricula&quot;)\r\n\tprivate String matricula;\r\n\t@JsonProperty(&quot;dv&quot;)\r\n\tprivate String dv;\r\n\t@JsonProperty(&quot;nome&quot;)\r\n\tprivate String nome;\r\n\r\n\t@Service\r\n\tpublic class UsuarioService {\r\n\t\tpublic UsuarioDTO consultausuario() {\r\n\t\t\treturn new RestTemplate().getForEntity(&quot;http://localhost:3000/usuario/&quot;, UsuarioDTO.class).getBody();\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nError:\r\n```console\r\ncom.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.lang.String` from Object value (token `JsonToken.START_OBJECT`)\r\n at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream); line: 2, column: 3] (through reference chain: com.pdv.api.dto.UsuarioDTO[&quot;id&quot;])\r\n```","title":"Problem populating object with JSON data?","body":"<p>Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@JsonFormat(shape = JsonFormat.Shape.ARRAY)\n// @JsonPropertyOrder({ &quot;id&quot;,&quot;matricula&quot; ,&quot;dv&quot;, &quot;nome&quot; })\npublic class UsuarioDTO implements Serializable {\n    private static final long serialVersionUID = 1L;\n    @JsonProperty(&quot;id&quot;)\n    private String id;\n    @JsonProperty(&quot;matricula&quot;)\n    private String matricula;\n    @JsonProperty(&quot;dv&quot;)\n    private String dv;\n    @JsonProperty(&quot;nome&quot;)\n    private String nome;\n\n    @Service\n    public class UsuarioService {\n        public UsuarioDTO consultausuario() {\n            return new RestTemplate().getForEntity(&quot;http://localhost:3000/usuario/&quot;, UsuarioDTO.class).getBody();\n        }\n    }\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.lang.String` from Object value (token `JsonToken.START_OBJECT`)\n at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream); line: 2, column: 3] (through reference chain: com.pdv.api.dto.UsuarioDTO[&quot;id&quot;])\n</code></pre>\n"},{"tags":["java","aix","heap-dump"],"comments":[{"owner":{"account_id":7421543,"reputation":2880,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1698162513,"post_id":77353419,"comment_id":136368967,"body_markdown":"@ControlAltDel the problems lies in heap vs. stack. The OP needs to analyze the *heap* memory, not the *stack* memory.","body":"@ControlAltDel the problems lies in heap vs. stack. The OP needs to analyze the <i>heap</i> memory, not the <i>stack</i> memory."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1698162621,"post_id":77353419,"comment_id":136368998,"body_markdown":"@CardinalSystem Thanks for clarifying. That&#39;s a whole different kettle of fish.","body":"@CardinalSystem Thanks for clarifying. That&#39;s a whole different kettle of fish."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1698163543,"post_id":77353419,"comment_id":136369184,"body_markdown":"Which condition?","body":"Which condition?"},{"owner":{"account_id":1185519,"reputation":357,"user_id":1159587,"accept_rate":57,"display_name":"Michael"},"score":0,"creation_date":1698166710,"post_id":77353419,"comment_id":136369761,"body_markdown":"@aled, the memory leak eventually leads to frequent garbage collection which in turn leads to some timeouts. I can detect the timeouts and that&#39;s when I need to generate the heap dump.","body":"@aled, the memory leak eventually leads to frequent garbage collection which in turn leads to some timeouts. I can detect the timeouts and that&#39;s when I need to generate the heap dump."},{"owner":{"account_id":1185519,"reputation":357,"user_id":1159587,"accept_rate":57,"display_name":"Michael"},"score":0,"creation_date":1698181660,"post_id":77353419,"comment_id":136372238,"body_markdown":"@aled, thank you! The accepted answer on the question solves this problem. com.ibm.jvm.Dump.HeapDump() does the trick.","body":"@aled, thank you! The accepted answer on the question solves this problem. com.ibm.jvm.Dump.HeapDump() does the trick."}],"owner":{"account_id":1185519,"reputation":357,"user_id":1159587,"accept_rate":57,"display_name":"Michael"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1698181510,"answer_count":0,"score":1,"last_activity_date":1698161266,"creation_date":1698161266,"question_id":77353419,"body_markdown":"I&#39;m trying to find the source of a memory leak in a Java application running in Java 8 on AIX. I want to programmatically generate a heap dump from within the Java app, when a certain condition occurs.\r\n\r\nMultiple SO answers suggest this approach, which works great on my Windows laptop:\r\n\r\n```\r\nMBeanServer server = ManagementFactory.getPlatformMBeanServer();\r\nHotSpotDiagnosticMXBean mxBean = ManagementFactory.newPlatformMXBeanProxy(\r\n\t\tserver, &quot;com.sun.management:type=HotSpotDiagnostic&quot;, HotSpotDiagnosticMXBean.class);\r\nmxBean.dumpHeap(&quot;heap_&quot; + System.currentTimeMillis + &quot;.hprof&quot;, false);\r\n```\r\n\r\nHowever, this does not work in an AIX environment as com.sun.management is not available there. So I think I need to find the AIX equivalent to the Sun arguments to the ManagementFactory.newPlatformMXBeanProxy method: `&quot;com.sun.management:type=HotSpotDiagnostic&quot;` and `HotSpotDiagnosticMXBean.class`. I&#39;ve not been able to find the mxBeanName and MXBean interface for this environment. Does anyone know what is needed here?\r\n\r\n[The memory leak accumulates over several days and my customer reports that it leads to slow processing and various timeouts. The timing of it is unpredictable and the customer is unaware of the leak until it&#39;s a serious problem. They have asked for the heap dump to be generated programmatically. Requesting it from the console is not practical for them.]\r\n","title":"Generate Java heap dump programmatically on AIX","body":"<p>I'm trying to find the source of a memory leak in a Java application running in Java 8 on AIX. I want to programmatically generate a heap dump from within the Java app, when a certain condition occurs.</p>\n<p>Multiple SO answers suggest this approach, which works great on my Windows laptop:</p>\n<pre><code>MBeanServer server = ManagementFactory.getPlatformMBeanServer();\nHotSpotDiagnosticMXBean mxBean = ManagementFactory.newPlatformMXBeanProxy(\n        server, &quot;com.sun.management:type=HotSpotDiagnostic&quot;, HotSpotDiagnosticMXBean.class);\nmxBean.dumpHeap(&quot;heap_&quot; + System.currentTimeMillis + &quot;.hprof&quot;, false);\n</code></pre>\n<p>However, this does not work in an AIX environment as com.sun.management is not available there. So I think I need to find the AIX equivalent to the Sun arguments to the ManagementFactory.newPlatformMXBeanProxy method: <code>&quot;com.sun.management:type=HotSpotDiagnostic&quot;</code> and <code>HotSpotDiagnosticMXBean.class</code>. I've not been able to find the mxBeanName and MXBean interface for this environment. Does anyone know what is needed here?</p>\n<p>[The memory leak accumulates over several days and my customer reports that it leads to slow processing and various timeouts. The timing of it is unpredictable and the customer is unaware of the leak until it's a serious problem. They have asked for the heap dump to be generated programmatically. Requesting it from the console is not practical for them.]</p>\n"},{"tags":["java","spring-boot","docker","testcontainers"],"answers":[{"tags":[],"owner":{"account_id":2537085,"reputation":6205,"user_id":2203890,"display_name":"Edd&#250; Mel&#233;ndez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698160804,"creation_date":1698105647,"answer_id":77348859,"question_id":77348413,"body_markdown":"When containers are connected through the container network. Those should use the network alias to communicate each other. In your case, `weather_data_host` and `location_data_host` should point to `http://mockServer:8080` instead of\r\n\r\n```java\r\n.withEnv(&quot;weather_data_host&quot;, wiremockServer.getBaseUrl()) \r\n.withEnv(&quot;location_data_host&quot;, wiremockServer.getBaseUrl())\r\n```\r\n\r\nWhen to use `wiremockServer.getBaseUrl()`?\r\n\r\nWhen you are connecting from outside of the docker network. For example, the java process in your host using the restTemplate\r\n\r\nDocs: https://java.testcontainers.org/features/networking/#advanced-networking","title":"establish communication between 2 test containers [ spring boot and mock server ]","body":"<p>When containers are connected through the container network. Those should use the network alias to communicate each other. In your case, <code>weather_data_host</code> and <code>location_data_host</code> should point to <code>http://mockServer:8080</code> instead of</p>\n<pre class=\"lang-java prettyprint-override\"><code>.withEnv(&quot;weather_data_host&quot;, wiremockServer.getBaseUrl()) \n.withEnv(&quot;location_data_host&quot;, wiremockServer.getBaseUrl())\n</code></pre>\n<p>When to use <code>wiremockServer.getBaseUrl()</code>?</p>\n<p>When you are connecting from outside of the docker network. For example, the java process in your host using the restTemplate</p>\n<p>Docs: <a href=\"https://java.testcontainers.org/features/networking/#advanced-networking\" rel=\"nofollow noreferrer\">https://java.testcontainers.org/features/networking/#advanced-networking</a></p>\n"}],"owner":{"account_id":4415722,"reputation":658,"user_id":3597404,"accept_rate":38,"display_name":"Venkata"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77348859,"answer_count":1,"score":0,"last_activity_date":1698160804,"creation_date":1698096344,"question_id":77348413,"body_markdown":"I am running a spring-boot image using GenericContainer option. I want the spring boot container to consume data returned by mockServer. I have created the following class to test the communication:\r\n\r\n``` \r\n@Slf4j\r\npublic class TestContainer {\r\n\r\n\r\n    private static final Network network = Network.newNetwork();\r\n\r\n    private static final WireMockContainer wiremockServer = new WireMockContainer(&quot;wiremock/wiremock:2.35.0&quot;)\r\n            .withNetwork(network)\r\n            .withNetworkAliases(&quot;mockServer&quot;)\r\n            .withMappingFromResource(&quot;weatherMock&quot;, &quot;MockData/weatherMock.json&quot;)\r\n            .withMappingFromResource(&quot;locationMock&quot;, &quot;MockData/locationMock.json&quot;);\r\n\r\n    private static final GenericContainer springBootContainer = new GenericContainer(DockerImageName.parse(&quot;data-retriever&quot;))\r\n            .withNetwork(network);\r\n\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;defaultRestTemplate&quot;)\r\n    RestTemplate restTemplate;\r\n\r\n    @Before\r\n    public void setUpMockServers() {\r\n        wiremockServer.start();\r\n\r\n        springBootContainer.dependsOn(wiremockServer)\r\n                .withImagePullPolicy(PullPolicy.defaultPolicy())\r\n                .withExposedPorts(20100)\r\n                /* update the spring properties using environment variables and make the spring talk to mock server*/\r\n                .withEnv(&quot;weather_data_host&quot;, wiremockServer.getBaseUrl()) \r\n                .withEnv(&quot;location_data_host&quot;, wiremockServer.getBaseUrl())\r\n                .withStartupTimeout(Duration.of(5, ChronoUnit.MINUTES));\r\n\r\n        springBootContainer.start();\r\n\r\n    }\r\n\r\n    @After(&quot;@testContainer&quot;)\r\n    public void stopContainer() {\r\n        wiremockServer.stop();\r\n        springBootContainer.stop();\r\n    }\r\n\r\n    @Given(&quot;I am mock dependency using wiremock testcontainers&quot;)\r\n    public void iAmMockDependencyUsingWiremockTestcontainers() {\r\n\r\n        log.info(&quot;dataIngestion server host: {}&quot;, springBootContainer.getHost());\r\n        log.info(&quot;dataIngestion server port: {}&quot;, springBootContainer.getFirstMappedPort());\r\n        String url = String.format(&quot;https://%s:%s/retrieveData&quot;, springBootContainer.getHost(), springBootContainer.getFirstMappedPort());\r\n        var response = restTemplate.getForEntity(url, Object.class);\r\n        Assert.assertTrue(response.getStatusCode().is2xxSuccessful());\r\n       \r\n    }\r\n}\r\n```\r\n\r\n - When I run the test, I am not receiving a success response because the data-retriever container is not able to communicate to mock server container !!\r\n - I ran the test in debug mode and added a debug point at starting of test where we have the log statement ``` log.info(&quot;dataIngestion server host: {}&quot;, springBootContainer.getHost());``` and tried to hit the mock server from the postman and I got a success response along with mocked data.\r\n - I used ``` wiremockServer.getBaseUrl()``` to get the host and port of mock server \r\n\r\n**Question:**\r\n\r\n - why the data-retriever container is not able to communicate with the mock-server container even when they both are on same network ?\r\n - Do I need to make any additional config ?","title":"establish communication between 2 test containers [ spring boot and mock server ]","body":"<p>I am running a spring-boot image using GenericContainer option. I want the spring boot container to consume data returned by mockServer. I have created the following class to test the communication:</p>\n<pre><code>@Slf4j\npublic class TestContainer {\n\n\n    private static final Network network = Network.newNetwork();\n\n    private static final WireMockContainer wiremockServer = new WireMockContainer(&quot;wiremock/wiremock:2.35.0&quot;)\n            .withNetwork(network)\n            .withNetworkAliases(&quot;mockServer&quot;)\n            .withMappingFromResource(&quot;weatherMock&quot;, &quot;MockData/weatherMock.json&quot;)\n            .withMappingFromResource(&quot;locationMock&quot;, &quot;MockData/locationMock.json&quot;);\n\n    private static final GenericContainer springBootContainer = new GenericContainer(DockerImageName.parse(&quot;data-retriever&quot;))\n            .withNetwork(network);\n\n\n    @Autowired\n    @Qualifier(&quot;defaultRestTemplate&quot;)\n    RestTemplate restTemplate;\n\n    @Before\n    public void setUpMockServers() {\n        wiremockServer.start();\n\n        springBootContainer.dependsOn(wiremockServer)\n                .withImagePullPolicy(PullPolicy.defaultPolicy())\n                .withExposedPorts(20100)\n                /* update the spring properties using environment variables and make the spring talk to mock server*/\n                .withEnv(&quot;weather_data_host&quot;, wiremockServer.getBaseUrl()) \n                .withEnv(&quot;location_data_host&quot;, wiremockServer.getBaseUrl())\n                .withStartupTimeout(Duration.of(5, ChronoUnit.MINUTES));\n\n        springBootContainer.start();\n\n    }\n\n    @After(&quot;@testContainer&quot;)\n    public void stopContainer() {\n        wiremockServer.stop();\n        springBootContainer.stop();\n    }\n\n    @Given(&quot;I am mock dependency using wiremock testcontainers&quot;)\n    public void iAmMockDependencyUsingWiremockTestcontainers() {\n\n        log.info(&quot;dataIngestion server host: {}&quot;, springBootContainer.getHost());\n        log.info(&quot;dataIngestion server port: {}&quot;, springBootContainer.getFirstMappedPort());\n        String url = String.format(&quot;https://%s:%s/retrieveData&quot;, springBootContainer.getHost(), springBootContainer.getFirstMappedPort());\n        var response = restTemplate.getForEntity(url, Object.class);\n        Assert.assertTrue(response.getStatusCode().is2xxSuccessful());\n       \n    }\n}\n</code></pre>\n<ul>\n<li>When I run the test, I am not receiving a success response because the data-retriever container is not able to communicate to mock server container !!</li>\n<li>I ran the test in debug mode and added a debug point at starting of test where we have the log statement <code> log.info(&quot;dataIngestion server host: {}&quot;, springBootContainer.getHost());</code> and tried to hit the mock server from the postman and I got a success response along with mocked data.</li>\n<li>I used <code> wiremockServer.getBaseUrl()</code> to get the host and port of mock server</li>\n</ul>\n<p><strong>Question:</strong></p>\n<ul>\n<li>why the data-retriever container is not able to communicate with the mock-server container even when they both are on same network ?</li>\n<li>Do I need to make any additional config ?</li>\n</ul>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":18868,"reputation":82004,"user_id":43681,"accept_rate":70,"display_name":"sleske"},"score":0,"creation_date":1426715943,"post_id":29132056,"comment_id":46492684,"body_markdown":"Downloading stuff to  src/main/resources sounds like a bad idea - the files there should be source code and come from your source code repo. Could you give some background, and explain why you think you need this?","body":"Downloading stuff to  src/main/resources sounds like a bad idea - the files there should be source code and come from your source code repo. Could you give some background, and explain why you think you need this?"},{"owner":{"account_id":3762653,"reputation":5106,"user_id":3127111,"accept_rate":61,"display_name":"watery"},"score":0,"creation_date":1426716694,"post_id":29132056,"comment_id":46493005,"body_markdown":"What kind of file is it? Is that file needed when building? Otherwise, it could be wise to only get it when packaging your module.","body":"What kind of file is it? Is that file needed when building? Otherwise, it could be wise to only get it when packaging your module."},{"owner":{"account_id":1125557,"reputation":1175,"user_id":1112919,"accept_rate":42,"display_name":"serverfaces"},"score":0,"creation_date":1426718786,"post_id":29132056,"comment_id":46493778,"body_markdown":"@sleske This is one old project that looks into the file from classpath.","body":"@sleske This is one old project that looks into the file from classpath."},{"owner":{"account_id":1125557,"reputation":1175,"user_id":1112919,"accept_rate":42,"display_name":"serverfaces"},"score":0,"creation_date":1426718793,"post_id":29132056,"comment_id":46493781,"body_markdown":"@watery This is just a file used at run time and not at compile time.","body":"@watery This is just a file used at run time and not at compile time."},{"owner":{"account_id":3762653,"reputation":5106,"user_id":3127111,"accept_rate":61,"display_name":"watery"},"score":0,"creation_date":1426748616,"post_id":29132056,"comment_id":46501661,"body_markdown":"Good, you can try one of the suggested plugins. I just wanted to suggest you to configure it for the right phase, so that you don&#39;t end up with Maven downloading it too many times.","body":"Good, you can try one of the suggested plugins. I just wanted to suggest you to configure it for the right phase, so that you don&#39;t end up with Maven downloading it too many times."}],"answers":[{"tags":[],"owner":{"account_id":5636066,"reputation":6620,"user_id":4461537,"accept_rate":89,"display_name":"Ren&#233; Winkler"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1426711766,"creation_date":1426711766,"answer_id":29132368,"question_id":29132056,"body_markdown":"There exists a `maven-download-plugin` which enables downloads in part of a maven build.\r\n\r\ncheck this out: https://github.com/maven-download-plugin/maven-download-plugin","title":"Maven plugin to download file","body":"<p>There exists a <code>maven-download-plugin</code> which enables downloads in part of a maven build.</p>\n\n<p>check this out: <a href=\"https://github.com/maven-download-plugin/maven-download-plugin\" rel=\"nofollow\">https://github.com/maven-download-plugin/maven-download-plugin</a></p>\n"},{"tags":[],"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698160789,"creation_date":1426715020,"answer_id":29133286,"question_id":29132056,"body_markdown":"There exists a `wagon-maven-plugin` for a long time.\r\n\r\nhttps://www.mojohaus.org/wagon-maven-plugin/\r\n\r\nI would suggest to put this file which should be downloaded into a repository manager and use it as a dependency makes life easier.","title":"Maven plugin to download file","body":"<p>There exists a <code>wagon-maven-plugin</code> for a long time.</p>\n<p><a href=\"https://www.mojohaus.org/wagon-maven-plugin/\" rel=\"nofollow noreferrer\">https://www.mojohaus.org/wagon-maven-plugin/</a></p>\n<p>I would suggest to put this file which should be downloaded into a repository manager and use it as a dependency makes life easier.</p>\n"}],"owner":{"account_id":1125557,"reputation":1175,"user_id":1112919,"accept_rate":42,"display_name":"serverfaces"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1830,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1698160789,"creation_date":1426710634,"question_id":29132056,"body_markdown":"I need to download a file from a 3rd party web server and copy it to src/main/resources whenever Maven builds something. Is there a plugin or something that does it?\r\nIt is not that file is too large.\r\n\r\nOr is there a way to invoke a Java class that does this?","title":"Maven plugin to download file","body":"<p>I need to download a file from a 3rd party web server and copy it to src/main/resources whenever Maven builds something. Is there a plugin or something that does it?\nIt is not that file is too large.</p>\n\n<p>Or is there a way to invoke a Java class that does this?</p>\n"},{"tags":["java","sql","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1603482560,"creation_date":1481454586,"answer_id":41085482,"question_id":41062735,"body_markdown":"What you&#39;re trying won&#39;t work:\r\n\r\n```java\r\nif (record.field(MY_TABLE.SOME_BOOLEAN) != null) {  }\r\n```\r\n\r\n`Record.field()` will return a `Field` reference. The idea is that your record may not have been created from `MY_TABLE`, but it might still contain a `SOME_BOOLEAN` column, `Record.field()` will return that `SOME_BOOLEAN` column from the record.\r\n\r\nWhat you&#39;re looking for is simply:\r\n\r\n```java\r\nif (record.get(MY_TABLE.SOME_BOOLEAN) != null) {  }\r\n```\r\n\r\nDo note that jOOQ has no way of distinguishing whether the `SOME_BOOLEAN` column was actually `NULL` in your database, or if `LEFT JOIN` did not return any row. This is just how SQL works. If you want to check whether your `LEFT JOIN` actually found a child row, you could check for the `null` value in a `NOT NULL` column, such as a primary key:\r\n\r\n```java\r\nif (record.get(MY_TABLE.ID) != null) {  }\r\n```\r\n\r\n","title":"JOOQ checking for null fields in a Record object after LEFT JOIN?","body":"<p>What you're trying won't work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (record.field(MY_TABLE.SOME_BOOLEAN) != null) {  }\n</code></pre>\n<p><code>Record.field()</code> will return a <code>Field</code> reference. The idea is that your record may not have been created from <code>MY_TABLE</code>, but it might still contain a <code>SOME_BOOLEAN</code> column, <code>Record.field()</code> will return that <code>SOME_BOOLEAN</code> column from the record.</p>\n<p>What you're looking for is simply:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (record.get(MY_TABLE.SOME_BOOLEAN) != null) {  }\n</code></pre>\n<p>Do note that jOOQ has no way of distinguishing whether the <code>SOME_BOOLEAN</code> column was actually <code>NULL</code> in your database, or if <code>LEFT JOIN</code> did not return any row. This is just how SQL works. If you want to check whether your <code>LEFT JOIN</code> actually found a child row, you could check for the <code>null</code> value in a <code>NOT NULL</code> column, such as a primary key:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (record.get(MY_TABLE.ID) != null) {  }\n</code></pre>\n"}],"owner":{"account_id":2573162,"reputation":751,"user_id":3833159,"accept_rate":90,"display_name":"Tom&#225; M."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6188,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":41085482,"answer_count":1,"score":5,"last_activity_date":1698160597,"creation_date":1481294081,"question_id":41062735,"body_markdown":"I have a query in JOOQ, which contains a LEFT OUTER JOIN with another table. This is intentional, as there is no guarantee a corresponding record will exist, in which case I still want to retrieve the value from the former table, and supply the missing fields with defaults.\r\n\r\nHowever, since the `getValue()` function with a default parameter is getting deprecated, how can I check whether the field contains a NULL value?\r\n\r\nIt&#39;s easy enough with strings, but a boolean value simply returns as `false`, meaning I can&#39;t check whether it really was set to false, or it&#39;s just what JOOQ decided to return.\r\n\r\nI&#39;ve tried:\r\n\r\n    if (record.field(MY_TABLE.SOME_BOOLEAN) != null) {\r\n        ...\r\n    }\r\n\r\nbut that doesn&#39;t work, as the return value of the `field()` function isn&#39;t null, even if the value of the field is. I&#39;ve also tried\r\n\r\n    if (record.field(MY_TABLE.SOME_BOOLEAN).isNull()){\r\n       ...\r\n    }\r\n\r\nbut that isn&#39;t a valid Java conditional.\r\n\r\nThanks in advance!","title":"JOOQ checking for null fields in a Record object after LEFT JOIN?","body":"<p>I have a query in JOOQ, which contains a LEFT OUTER JOIN with another table. This is intentional, as there is no guarantee a corresponding record will exist, in which case I still want to retrieve the value from the former table, and supply the missing fields with defaults.</p>\n\n<p>However, since the <code>getValue()</code> function with a default parameter is getting deprecated, how can I check whether the field contains a NULL value?</p>\n\n<p>It's easy enough with strings, but a boolean value simply returns as <code>false</code>, meaning I can't check whether it really was set to false, or it's just what JOOQ decided to return.</p>\n\n<p>I've tried:</p>\n\n<pre><code>if (record.field(MY_TABLE.SOME_BOOLEAN) != null) {\n    ...\n}\n</code></pre>\n\n<p>but that doesn't work, as the return value of the <code>field()</code> function isn't null, even if the value of the field is. I've also tried</p>\n\n<pre><code>if (record.field(MY_TABLE.SOME_BOOLEAN).isNull()){\n   ...\n}\n</code></pre>\n\n<p>but that isn't a valid Java conditional.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["java","spring-boot","model-view-controller"],"owner":{"account_id":20116505,"reputation":1,"user_id":14751825,"display_name":"Noihirsch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698160465,"creation_date":1698160465,"question_id":77353308,"body_markdown":"I&#39;m very new to Springboot and I just wish I knew if there was a way to correct the flow between a class, the interface that implements it and the controller. I&#39;m currently using Thymeleaf so I would like to send the result method into a Model type and print it somewhere on the HTML. This is my current setup:\r\n\r\n\r\n```\r\npublic class CalculosServiceImpl implements CalculosService{\r\n\r\n    @Override\r\n        public String esPrimo(int number) {\r\n        String respuesta=&quot;No es primo&quot;;\r\n        respuesta = &quot;No es primo&quot;;\r\n        for (int x = 2; x &lt;= Math.sqrt(number); x++) {\r\n            if (number % x == 0) {\r\n                respuesta = &quot;Es primo&quot;;\r\n            }\r\n        }\r\n        return &quot;respuesta&quot;;\r\n        \r\n    }\r\n```\r\n```\r\n\r\npublic interface CalculosService {\r\n    \r\n    String esPrimo(int number);\r\n}\r\n\r\n```\r\n```\r\n\r\n\r\n    @GetMapping(&quot;/calculos/primo&quot;)\r\n    public String esPrimo(@RequestParam(&quot;number&quot;) int number, Model model){\r\n        calculosService.esPrimo(number);\r\n        model.addAttribute(&quot;number&quot;, number);\r\n        return &quot;index&quot;; \r\n    }\r\n```\r\n\r\n\r\nI tried to locate the return Model on multiple parts of my code. I tried to turn the result of &quot;number&quot; into a Model type and I also tried to locate it on multiple parts of my code without success. What would be the correct flow for it?","title":"I don&#39;t know how to add models onto the method I&#39;m using","body":"<p>I'm very new to Springboot and I just wish I knew if there was a way to correct the flow between a class, the interface that implements it and the controller. I'm currently using Thymeleaf so I would like to send the result method into a Model type and print it somewhere on the HTML. This is my current setup:</p>\n<pre><code>public class CalculosServiceImpl implements CalculosService{\n\n    @Override\n        public String esPrimo(int number) {\n        String respuesta=&quot;No es primo&quot;;\n        respuesta = &quot;No es primo&quot;;\n        for (int x = 2; x &lt;= Math.sqrt(number); x++) {\n            if (number % x == 0) {\n                respuesta = &quot;Es primo&quot;;\n            }\n        }\n        return &quot;respuesta&quot;;\n        \n    }\n</code></pre>\n<pre><code>\npublic interface CalculosService {\n    \n    String esPrimo(int number);\n}\n\n</code></pre>\n<pre><code>\n\n    @GetMapping(&quot;/calculos/primo&quot;)\n    public String esPrimo(@RequestParam(&quot;number&quot;) int number, Model model){\n        calculosService.esPrimo(number);\n        model.addAttribute(&quot;number&quot;, number);\n        return &quot;index&quot;; \n    }\n</code></pre>\n<p>I tried to locate the return Model on multiple parts of my code. I tried to turn the result of &quot;number&quot; into a Model type and I also tried to locate it on multiple parts of my code without success. What would be the correct flow for it?</p>\n"},{"tags":["java","unit-testing","http","servlets","spring-test"],"comments":[{"owner":{"account_id":195331,"reputation":275388,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1395768476,"post_id":22642012,"comment_id":34484052,"body_markdown":"Please post the full stacktrace.","body":"Please post the full stacktrace."},{"owner":{"account_id":195331,"reputation":275388,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1395769450,"post_id":22642012,"comment_id":34484671,"body_markdown":"Also, read the javadoc of `setParameter`.","body":"Also, read the javadoc of <code>setParameter</code>."},{"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"score":1,"creation_date":1395836123,"post_id":22642012,"comment_id":34516575,"body_markdown":"Also, we&#39;ll need to know what `MyServletTest#doPost()` actually does with the request.","body":"Also, we&#39;ll need to know what <code>MyServletTest#doPost()</code> actually does with the request."}],"answers":[{"tags":[],"owner":{"account_id":3281611,"reputation":1149,"user_id":2762092,"display_name":"Samuel"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1520257055,"creation_date":1432953486,"answer_id":30541653,"question_id":22642012,"body_markdown":"You need to set the boundary.\r\n\r\nHere there is a good explanations about what is the boundary [https://stackoverflow.com/a/10932533/2762092][1]\r\n\r\nTo solve your problem try this code.\r\n\r\n        import java.io.IOException;\r\n        import java.nio.file.Files;\r\n        import java.nio.file.Path;\r\n        import java.nio.file.Paths;\r\n        \r\n        import org.apache.commons.lang.ArrayUtils;\r\n        import org.springframework.mock.web.MockHttpServletResponse;\r\n        import org.springframework.mock.web.MockMultipartFile;\r\n        import org.springframework.mock.web.MockMultipartHttpServletRequest;\r\n    \r\n    \r\n    public class FileUploadTest {\r\n    \r\n        public void testDoPost() throws IOException {\r\n        \t\tPath path = Paths.get(&quot;c:\\\\temp\\\\test.zip&quot;);\r\n        \t\tbyte[] data = Files.readAllBytes(path);\r\n        \t\tMockMultipartFile file = new MockMultipartFile(&quot;test.zip&quot;, &quot;test.zip&quot;,\r\n        \t\t\t\t&quot;application/zip&quot;, data);\r\n        \t\tMockMultipartHttpServletRequest mockRequest = new MockMultipartHttpServletRequest();\r\n        \t\tString boundary = &quot;q1w2e3r4t5y6u7i8o9&quot;;\r\n        \t\tmockRequest.setContentType(&quot;multipart/form-data; boundary=&quot;+boundary);\r\n        \t\tmockRequest.setContent(createFileContent(data,boundary,&quot;application/zip&quot;,&quot;test.zip&quot;));\r\n        \t\tmockRequest.addFile(file);\r\n        \t\tmockRequest.setMethod(&quot;POST&quot;);\r\n        \t\tmockRequest.setParameter(&quot;variant&quot;, &quot;php&quot;);\r\n        \t\tmockRequest.setParameter(&quot;os&quot;, &quot;mac&quot;);\r\n        \t\tmockRequest.setParameter(&quot;version&quot;, &quot;3.4&quot;);\r\n        \t\tMockHttpServletResponse response = new MockHttpServletResponse();\r\n        \t\tnew FileUpload().doPost(mockRequest, response);\r\n        \t}\r\n        \t\r\n        \tpublic byte[] createFileContent(byte[] data, String boundary, String contentType, String fileName){\r\n        \t\tString start = &quot;--&quot; + boundary + &quot;\\r\\n Content-Disposition: form-data; name=\\&quot;file\\&quot;; filename=\\&quot;&quot;+fileName+&quot;\\&quot;\\r\\n&quot;\r\n        \t             + &quot;Content-type: &quot;+contentType+&quot;\\r\\n\\r\\n&quot;;;\r\n        \t\t\r\n                String end = &quot;\\r\\n--&quot; + boundary + &quot;--&quot;; // correction suggested @butfly \r\n        \t\treturn ArrayUtils.addAll(start.getBytes(),ArrayUtils.addAll(data,end.getBytes()));\r\n        \t}\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/a/10932533/2762092","title":"How to use spring&#39;s MockMultipartHttpServletRequest? Getting &quot;no multipart boundary was found&quot;","body":"<p>You need to set the boundary.</p>\n\n<p>Here there is a good explanations about what is the boundary <a href=\"https://stackoverflow.com/a/10932533/2762092\">https://stackoverflow.com/a/10932533/2762092</a></p>\n\n<p>To solve your problem try this code.</p>\n\n<pre><code>    import java.io.IOException;\n    import java.nio.file.Files;\n    import java.nio.file.Path;\n    import java.nio.file.Paths;\n\n    import org.apache.commons.lang.ArrayUtils;\n    import org.springframework.mock.web.MockHttpServletResponse;\n    import org.springframework.mock.web.MockMultipartFile;\n    import org.springframework.mock.web.MockMultipartHttpServletRequest;\n\n\npublic class FileUploadTest {\n\n    public void testDoPost() throws IOException {\n            Path path = Paths.get(\"c:\\\\temp\\\\test.zip\");\n            byte[] data = Files.readAllBytes(path);\n            MockMultipartFile file = new MockMultipartFile(\"test.zip\", \"test.zip\",\n                    \"application/zip\", data);\n            MockMultipartHttpServletRequest mockRequest = new MockMultipartHttpServletRequest();\n            String boundary = \"q1w2e3r4t5y6u7i8o9\";\n            mockRequest.setContentType(\"multipart/form-data; boundary=\"+boundary);\n            mockRequest.setContent(createFileContent(data,boundary,\"application/zip\",\"test.zip\"));\n            mockRequest.addFile(file);\n            mockRequest.setMethod(\"POST\");\n            mockRequest.setParameter(\"variant\", \"php\");\n            mockRequest.setParameter(\"os\", \"mac\");\n            mockRequest.setParameter(\"version\", \"3.4\");\n            MockHttpServletResponse response = new MockHttpServletResponse();\n            new FileUpload().doPost(mockRequest, response);\n        }\n\n        public byte[] createFileContent(byte[] data, String boundary, String contentType, String fileName){\n            String start = \"--\" + boundary + \"\\r\\n Content-Disposition: form-data; name=\\\"file\\\"; filename=\\\"\"+fileName+\"\\\"\\r\\n\"\n                     + \"Content-type: \"+contentType+\"\\r\\n\\r\\n\";;\n\n            String end = \"\\r\\n--\" + boundary + \"--\"; // correction suggested @butfly \n            return ArrayUtils.addAll(start.getBytes(),ArrayUtils.addAll(data,end.getBytes()));\n        }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4109029,"reputation":105,"user_id":3372106,"display_name":"butfly"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1435197177,"creation_date":1434998181,"answer_id":30987345,"question_id":22642012,"body_markdown":"Great answer for Samuel, but a bug:\r\n\r\n            String end = &quot;\\r\\n&quot;+ boundary + &quot;--&quot;;\r\n\r\nshould be:\r\n\r\n            String end = &quot;--&quot;+ boundary + &quot;--&quot;;\r\n\r\nThanks for his work very much.","title":"How to use spring&#39;s MockMultipartHttpServletRequest? Getting &quot;no multipart boundary was found&quot;","body":"<p>Great answer for Samuel, but a bug:</p>\n\n<pre><code>        String end = \"\\r\\n\"+ boundary + \"--\";\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>        String end = \"--\"+ boundary + \"--\";\n</code></pre>\n\n<p>Thanks for his work very much.</p>\n"},{"tags":[],"owner":{"account_id":8760223,"reputation":223,"user_id":6550350,"display_name":"Anton Kushch"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1486546963,"creation_date":1486546963,"answer_id":42109541,"question_id":22642012,"body_markdown":"Vote up for Samuel. Though spent one day trying to make it working. The problem was in:\r\n\r\n    String end = &quot;--&quot; + boundary + &quot;--&quot;;\r\n\r\nShould be:\r\n\r\n    String end = &quot;\\r\\n--&quot; + boundary + &quot;--&quot;;","title":"How to use spring&#39;s MockMultipartHttpServletRequest? Getting &quot;no multipart boundary was found&quot;","body":"<p>Vote up for Samuel. Though spent one day trying to make it working. The problem was in:</p>\n\n<pre><code>String end = \"--\" + boundary + \"--\";\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>String end = \"\\r\\n--\" + boundary + \"--\";\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2125618,"reputation":181,"user_id":1887878,"accept_rate":0,"display_name":"Rajaneesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534496670,"creation_date":1534496670,"answer_id":51891916,"question_id":22642012,"body_markdown":"Able to add multiple fields ,\r\n\r\n       private byte[] createFileContents(String requestId, String date, String image, String invoiceNumber,String imageFile) {\r\n\r\n        String requestIdField = &quot;--&quot; + BOUNDARY + &quot;\\r\\n Content-Disposition: form-data; name=\\&quot;&quot; + REQUEST_ID_KEY\r\n                + &quot;\\&quot;;&quot; + &quot;Content-type: &quot; + CONTENT_TYPE + &quot;\\r\\n value=\\&quot;12345\\&quot;&quot; + &quot;\\r\\n\\r\\n&quot;;\r\n        String requestIdValue = requestId + &quot;\\r\\n&quot;;\r\n        String numberFiledField = &quot;--&quot; + BOUNDARY + &quot;\\r\\n Content-Disposition: form-data; name=\\&quot;&quot; + NUMBER_KEY + &quot;\\&quot;;&quot;\r\n                + &quot;Content-type: &quot; + CONTENT_TYPE + &quot;\\r\\n value=\\&quot;12345\\&quot;&quot; + &quot;\\r\\n\\r\\n&quot;;\r\n        String invoiceValue = invoiceNumber + &quot;\\r\\n&quot;;\r\n        String dateField = &quot;--&quot; + BOUNDARY + &quot;\\r\\n Content-Disposition: form-data; name=\\&quot;&quot; + DATE_KEY + &quot;\\&quot;;&quot;\r\n                + &quot;Content-type: &quot; + CONTENT_TYPE + &quot;\\r\\n value=\\&quot;12345\\&quot;&quot; + &quot;\\r\\n\\r\\n&quot;;\r\n        String dateValue = date + &quot;\\r\\n&quot;;\r\n        String imageField = &quot;--&quot; + BOUNDARY + &quot;\\r\\n Content-Disposition: form-data; name=\\&quot;&quot; + IMAGE_KEY\r\n                + &quot;\\&quot;; filename=\\&quot;&quot; + imageFile + &quot;\\&quot;\\r\\n&quot; + &quot;Content-type: &quot; + CONTENT_TYPE + &quot;\\r\\n\\r\\n&quot;;\r\n        String imageValue = image + &quot;\\r\\n&quot;;\r\n        String end = &quot;\\r\\n--&quot; + BOUNDARY + &quot;--&quot;;\r\n        return ArrayUtils.addAll((requestIdField + requestIdValue + numberFiledField + invoiceValue + dateField\r\n                + dateValue + imageField + imageValue).getBytes(), ArrayUtils.addAll(data, end.getBytes()));\r\n    }","title":"How to use spring&#39;s MockMultipartHttpServletRequest? Getting &quot;no multipart boundary was found&quot;","body":"<p>Able to add multiple fields ,</p>\n\n<pre><code>   private byte[] createFileContents(String requestId, String date, String image, String invoiceNumber,String imageFile) {\n\n    String requestIdField = \"--\" + BOUNDARY + \"\\r\\n Content-Disposition: form-data; name=\\\"\" + REQUEST_ID_KEY\n            + \"\\\";\" + \"Content-type: \" + CONTENT_TYPE + \"\\r\\n value=\\\"12345\\\"\" + \"\\r\\n\\r\\n\";\n    String requestIdValue = requestId + \"\\r\\n\";\n    String numberFiledField = \"--\" + BOUNDARY + \"\\r\\n Content-Disposition: form-data; name=\\\"\" + NUMBER_KEY + \"\\\";\"\n            + \"Content-type: \" + CONTENT_TYPE + \"\\r\\n value=\\\"12345\\\"\" + \"\\r\\n\\r\\n\";\n    String invoiceValue = invoiceNumber + \"\\r\\n\";\n    String dateField = \"--\" + BOUNDARY + \"\\r\\n Content-Disposition: form-data; name=\\\"\" + DATE_KEY + \"\\\";\"\n            + \"Content-type: \" + CONTENT_TYPE + \"\\r\\n value=\\\"12345\\\"\" + \"\\r\\n\\r\\n\";\n    String dateValue = date + \"\\r\\n\";\n    String imageField = \"--\" + BOUNDARY + \"\\r\\n Content-Disposition: form-data; name=\\\"\" + IMAGE_KEY\n            + \"\\\"; filename=\\\"\" + imageFile + \"\\\"\\r\\n\" + \"Content-type: \" + CONTENT_TYPE + \"\\r\\n\\r\\n\";\n    String imageValue = image + \"\\r\\n\";\n    String end = \"\\r\\n--\" + BOUNDARY + \"--\";\n    return ArrayUtils.addAll((requestIdField + requestIdValue + numberFiledField + invoiceValue + dateField\n            + dateValue + imageField + imageValue).getBytes(), ArrayUtils.addAll(data, end.getBytes()));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":344662,"reputation":862,"user_id":677096,"display_name":"silver_mx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593071386,"creation_date":1593071386,"answer_id":62570411,"question_id":22642012,"body_markdown":"My way to test **multipart/form-data** via mock MVC sending params and files is the following:\r\n\r\n\r\n        @Test\r\n    void testSendFeedback() throws Exception {\r\n        var builder = MockMvcRequestBuilders.multipart(URL_PATH);\r\n\r\n        Path path = Files.createTempFile(&quot;test-file&quot;, &quot;tmp&quot;);\r\n        builder = builder.part(new MockPart(&quot;image&quot;, path.toFile().getName(), Files.readAllBytes(path)));\r\n\r\n        builder.param(&quot;field1&quot;, &quot;value1&quot;)\r\n            .param(&quot;fields2&quot;, &quot;value2&quot;);\r\n\r\n        mockMvc.perform(builder.header(HttpHeaders.AUTHORIZATION, YOUR_AUTH_VALUE).contentType(MediaType.MULTIPART_FORM_DATA_VALUE))\r\n            .andDo(print())\r\n            .andExpect(status().isNoContent());\r\n    }\r\n","title":"How to use spring&#39;s MockMultipartHttpServletRequest? Getting &quot;no multipart boundary was found&quot;","body":"<p>My way to test <strong>multipart/form-data</strong> via mock MVC sending params and files is the following:</p>\n<pre><code>    @Test\nvoid testSendFeedback() throws Exception {\n    var builder = MockMvcRequestBuilders.multipart(URL_PATH);\n\n    Path path = Files.createTempFile(&quot;test-file&quot;, &quot;tmp&quot;);\n    builder = builder.part(new MockPart(&quot;image&quot;, path.toFile().getName(), Files.readAllBytes(path)));\n\n    builder.param(&quot;field1&quot;, &quot;value1&quot;)\n        .param(&quot;fields2&quot;, &quot;value2&quot;);\n\n    mockMvc.perform(builder.header(HttpHeaders.AUTHORIZATION, YOUR_AUTH_VALUE).contentType(MediaType.MULTIPART_FORM_DATA_VALUE))\n        .andDo(print())\n        .andExpect(status().isNoContent());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5444810,"reputation":3671,"user_id":4331750,"accept_rate":83,"display_name":"whistling_marmot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698160431,"creation_date":1698160431,"answer_id":77353300,"question_id":22642012,"body_markdown":"You can create an HttpEntity using [`MultipartEntityBuilder`](https://javadoc.io/doc/org.apache.httpcomponents/httpmime/latest/org/apache/http/entity/mime/MultipartEntityBuilder.html), something like this:\r\n\r\n    HttpEntity httpEntity = MultipartEntityBuilder.create()\r\n            .addTextBody(&quot;text-form-field&quot;, &quot;Just a line of text.&quot;)\r\n            .addTextBody(&quot;object-form-field&quot;, objectMapper.writeValueAsString(workerMetrics), ContentType.APPLICATION_JSON)\r\n            .addBinaryBody(&quot;binary-format&quot;, &quot;This would not really be text&quot;.getBytes())\r\n            .build();\r\n\r\nThe post-process Spring&#39;s `MockMultipartHttpServletRequestBuilder`, adding the entity as the content. Copying over the entity&#39;s content type will set the boundaries for you.\r\n\r\n    mvc.perform(multipart(&quot;/upload&quot;)\r\n            .with(request -&gt; {\r\n                try {\r\n                    request.setContent(httpEntity.getContent().readAllBytes());\r\n                    request.setContentType(httpEntity.getContentType().getValue());\r\n                    return request;\r\n                } catch (IOException e) {\r\n                    throw new UncheckedIOException(e);\r\n                }\r\n            })\r\n    ).andExpect(status().isAccepted());","title":"How to use spring&#39;s MockMultipartHttpServletRequest? Getting &quot;no multipart boundary was found&quot;","body":"<p>You can create an HttpEntity using <a href=\"https://javadoc.io/doc/org.apache.httpcomponents/httpmime/latest/org/apache/http/entity/mime/MultipartEntityBuilder.html\" rel=\"nofollow noreferrer\"><code>MultipartEntityBuilder</code></a>, something like this:</p>\n<pre><code>HttpEntity httpEntity = MultipartEntityBuilder.create()\n        .addTextBody(&quot;text-form-field&quot;, &quot;Just a line of text.&quot;)\n        .addTextBody(&quot;object-form-field&quot;, objectMapper.writeValueAsString(workerMetrics), ContentType.APPLICATION_JSON)\n        .addBinaryBody(&quot;binary-format&quot;, &quot;This would not really be text&quot;.getBytes())\n        .build();\n</code></pre>\n<p>The post-process Spring's <code>MockMultipartHttpServletRequestBuilder</code>, adding the entity as the content. Copying over the entity's content type will set the boundaries for you.</p>\n<pre><code>mvc.perform(multipart(&quot;/upload&quot;)\n        .with(request -&gt; {\n            try {\n                request.setContent(httpEntity.getContent().readAllBytes());\n                request.setContentType(httpEntity.getContentType().getValue());\n                return request;\n            } catch (IOException e) {\n                throw new UncheckedIOException(e);\n            }\n        })\n).andExpect(status().isAccepted());\n</code></pre>\n"}],"owner":{"account_id":145899,"reputation":8031,"user_id":356011,"accept_rate":95,"display_name":"marathon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7738,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":30541653,"answer_count":6,"score":10,"last_activity_date":1698160431,"creation_date":1395768371,"question_id":22642012,"body_markdown":"Clearly I&#39;m not using this test fixture right.  My servlet works just fine in tomcat, but when I try to use this mock, the multi-part boundary is not found.  &quot;the request was rejected because no multipart boundary was found&quot;.\r\n\r\nThere is an answer [here][1] that shows how to use this using a text file, but that answer sets the boundary string explicitly and embeds the file as test.  I would think I would not need to do with by hand with methods like **mockrequest.addFile**(...)\r\n\r\nWhat am I not setting here or how I am doing this wrong?\r\n\r\n    @org.testng.annotations.Test\r\n    public void testDoPost() throws Exception\r\n    {\r\n        MockMultipartFile file = new MockMultipartFile(&quot;test.zip&quot;, &quot;test.zip&quot;, &quot;application/zip&quot;, MyServletTest.class.getResourceAsStream(&quot;/test.zip&quot;));\r\n        MockMultipartHttpServletRequest mockRequest = new MockMultipartHttpServletRequest();\r\n        mockRequest.addFile(file);\r\n        mockRequest.set\r\n        mockRequest.setMethod(&quot;POST&quot;);\r\n        mockRequest.setParameter(&quot;variant&quot;, &quot;php&quot;);\r\n        mockRequest.setParameter(&quot;os&quot;, &quot;mac&quot;);\r\n        mockRequest.setParameter(&quot;version&quot;, &quot;3.4&quot;);\r\n        MockHttpServletResponse response = new MockHttpServletResponse();\r\n        new MyServletTest().doPost(mockRequest, response);\r\n        //  BOOM !\r\n    }\r\n\r\n\r\nHere is the exception\r\n\r\n    Caused by: blablah:   the request was rejected because no multipart boundary was found\r\n\t\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/9474813/unit-testing-using-mockmultiparthttpservletrequest-throws-nullpointerexception","title":"How to use spring&#39;s MockMultipartHttpServletRequest? Getting &quot;no multipart boundary was found&quot;","body":"<p>Clearly I'm not using this test fixture right.  My servlet works just fine in tomcat, but when I try to use this mock, the multi-part boundary is not found.  \"the request was rejected because no multipart boundary was found\".</p>\n\n<p>There is an answer <a href=\"https://stackoverflow.com/questions/9474813/unit-testing-using-mockmultiparthttpservletrequest-throws-nullpointerexception\">here</a> that shows how to use this using a text file, but that answer sets the boundary string explicitly and embeds the file as test.  I would think I would not need to do with by hand with methods like <strong>mockrequest.addFile</strong>(...)</p>\n\n<p>What am I not setting here or how I am doing this wrong?</p>\n\n<pre><code>@org.testng.annotations.Test\npublic void testDoPost() throws Exception\n{\n    MockMultipartFile file = new MockMultipartFile(\"test.zip\", \"test.zip\", \"application/zip\", MyServletTest.class.getResourceAsStream(\"/test.zip\"));\n    MockMultipartHttpServletRequest mockRequest = new MockMultipartHttpServletRequest();\n    mockRequest.addFile(file);\n    mockRequest.set\n    mockRequest.setMethod(\"POST\");\n    mockRequest.setParameter(\"variant\", \"php\");\n    mockRequest.setParameter(\"os\", \"mac\");\n    mockRequest.setParameter(\"version\", \"3.4\");\n    MockHttpServletResponse response = new MockHttpServletResponse();\n    new MyServletTest().doPost(mockRequest, response);\n    //  BOOM !\n}\n</code></pre>\n\n<p>Here is the exception</p>\n\n<pre><code>Caused by: blablah:   the request was rejected because no multipart boundary was found\n</code></pre>\n"},{"tags":["java","maven","vagrant","maven-3"],"comments":[{"owner":{"account_id":1042328,"reputation":7972,"user_id":1048093,"accept_rate":75,"display_name":"wemu"},"score":0,"creation_date":1424180378,"post_id":28562684,"comment_id":45436108,"body_markdown":"it seems maven cannot download any artifact. The repositories look fine to me. are you behind a proxy?","body":"it seems maven cannot download any artifact. The repositories look fine to me. are you behind a proxy?"}],"answers":[{"tags":[],"owner":{"account_id":248570,"reputation":2517,"user_id":524010,"display_name":"Sezin Karli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424180059,"creation_date":1424180059,"answer_id":28562771,"question_id":28562684,"body_markdown":"You have a `settings.xm`l under your `.m2` folder. You must add a repository here like below:\r\n\r\n    &lt;/repository&gt;\r\n    \t\t\t\t  &lt;repository&gt;\r\n    \t\t\t\t      &lt;id&gt;central&lt;/id&gt;\r\n    \t\t\t\t      &lt;name&gt;Maven Repository Switchboard&lt;/name&gt;\r\n    \t\t\t\t      &lt;url&gt;http://repo1.maven.org/maven2&lt;/url&gt;\r\n    \t\t\t\t      &lt;snapshots&gt;\r\n    \t\t\t\t        &lt;enabled&gt;false&lt;/enabled&gt;\r\n    \t\t\t\t      &lt;/snapshots&gt;\r\n    \t\t\t\t    &lt;/repository&gt;","title":"How to set URL for Maven dependency","body":"<p>You have a <code>settings.xm</code>l under your <code>.m2</code> folder. You must add a repository here like below:</p>\n\n<pre><code>&lt;/repository&gt;\n                  &lt;repository&gt;\n                      &lt;id&gt;central&lt;/id&gt;\n                      &lt;name&gt;Maven Repository Switchboard&lt;/name&gt;\n                      &lt;url&gt;http://repo1.maven.org/maven2&lt;/url&gt;\n                      &lt;snapshots&gt;\n                        &lt;enabled&gt;false&lt;/enabled&gt;\n                      &lt;/snapshots&gt;\n                    &lt;/repository&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5488637,"reputation":2572,"user_id":4362675,"accept_rate":58,"display_name":"The Coder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424180379,"creation_date":1424180379,"answer_id":28562838,"question_id":28562684,"body_markdown":"You need to add this code in pom.xml\r\n\r\n    \r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;appfuse-snapshots&lt;/id&gt;\r\n            &lt;url&gt;http://oss.sonatype.org/content/repositories/appfuse-snapshots&lt;/url&gt;    // Replace it with your respective repository\r\n            &lt;releases&gt;\r\n                &lt;enabled&gt;false&lt;/enabled&gt;\r\n            &lt;/releases&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;","title":"How to set URL for Maven dependency","body":"<p>You need to add this code in pom.xml</p>\n\n<pre><code>&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;appfuse-snapshots&lt;/id&gt;\n        &lt;url&gt;http://oss.sonatype.org/content/repositories/appfuse-snapshots&lt;/url&gt;    // Replace it with your respective repository\n        &lt;releases&gt;\n            &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;/releases&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n        &lt;/snapshots&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1970768,"reputation":1203,"user_id":1769790,"accept_rate":65,"display_name":"user1769790"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559169108,"creation_date":1559169108,"answer_id":56369364,"question_id":28562684,"body_markdown":"I had this problem where my lookup for dependencies were failing. As it was kind of replacing org.xxx as org/xxx and none of the dependencies were pulled.\r\n\r\nThe url for default Central Maven repository is http://repo.maven.apache.org/maven2/.\r\nUnless you want to fetch artifacts from different location (like local artifactory etc.,)  Remove &lt;repositories&gt; section or you can still have \r\n\r\n           &lt;repository&gt; \r\n               &lt;id&gt;central&lt;/id&gt;\r\n               &lt;url&gt;http://repo.maven.apache.org/maven2/&lt;/url&gt;\r\n           &lt;/repository&gt;\r\nmvn clean install\r\nit should download all repositories that you are looking for.","title":"How to set URL for Maven dependency","body":"<p>I had this problem where my lookup for dependencies were failing. As it was kind of replacing org.xxx as org/xxx and none of the dependencies were pulled.</p>\n\n<p>The url for default Central Maven repository is <a href=\"http://repo.maven.apache.org/maven2/\" rel=\"nofollow noreferrer\">http://repo.maven.apache.org/maven2/</a>.\nUnless you want to fetch artifacts from different location (like local artifactory etc.,)  Remove  section or you can still have </p>\n\n<pre><code>       &lt;repository&gt; \n           &lt;id&gt;central&lt;/id&gt;\n           &lt;url&gt;http://repo.maven.apache.org/maven2/&lt;/url&gt;\n       &lt;/repository&gt;\n</code></pre>\n\n<p>mvn clean install\nit should download all repositories that you are looking for.</p>\n"}],"owner":{"account_id":542552,"reputation":393,"user_id":911420,"accept_rate":35,"display_name":"Pablo D"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31389,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1698159845,"creation_date":1424179721,"question_id":28562684,"body_markdown":"I have the following error after launch `mvn clean install vagrant:up`:\r\n\r\n    Downloading: https://oss.sonatype.org/content/repositories/snapshots/org/apache/avalon/framework/avalon-framework-api/4.2.0/avalon-framework-api-4.2.0.pom\r\n    [INFO] Unable to find resource &#39;org.apache.avalon.framework:avalon-framework-api:pom:4.2.0&#39; in repository snapshot-repository (https://oss.sonatype.org/content/repositories/snapshots)\r\n    Downloading: http://central.maven.org/maven2/org/apache/avalon/framework/avalon-framework-api/4.2.0/avalon-framework-api-4.2.0.pom\r\n    [INFO] Unable to find resource &#39;org.apache.avalon.framework:avalon-framework-api:pom:4.2.0&#39; in repository Avalon-repo (http://central.maven.org/maven2)\r\n    Downloading: http://repo1.maven.org/maven2/org/apache/avalon/framework/avalon-framework-api/4.2.0/avalon-framework-api-4.2.0.pom\r\n    [INFO] Unable to find resource &#39;org.apache.avalon.framework:avalon-framework-api:pom:4.2.0&#39; in repository central (http://repo1.maven.org/maven2)\r\n    Downloading: https://oss.sonatype.org/content/repositories/snapshots/org/apache/avalon/framework/avalon-framework-impl/4.2.0/avalon-framework-impl-4.2.0.pom\r\n    [INFO] Unable to find resource &#39;org.apache.avalon.framework:avalon-framework-impl:pom:4.2.0&#39; in repository snapshot-repository (https://oss.sonatype.org/content/repositories/snapshots)\r\n    Downloading: http://central.maven.org/maven2/org/apache/avalon/framework/avalon-framework-impl/4.2.0/avalon-framework-impl-4.2.0.pom\r\n    [INFO] Unable to find resource &#39;org.apache.avalon.framework:avalon-framework-impl:pom:4.2.0&#39; in repository Avalon-repo (http://central.maven.org/maven2)\r\n    Downloading: http://repo1.maven.org/maven2/org/apache/avalon/framework/avalon-framework-impl/4.2.0/avalon-framework-impl-4.2.0.pom\r\n    [INFO] Unable to find resource &#39;org.apache.avalon.framework:avalon-framework-impl:pom:4.2.0&#39; in repository central (http://repo1.maven.org/maven2)\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] BUILD ERROR\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Failed to resolve artifact.\r\n    \r\n    Unable to get dependency information: Error in metadata for artifact &#39;rubygems:vagrant:gem&#39;: Unable to parse version &#39;[0.5.2,0.5.2.0.0.0.0.1)&#39; for dependency &#39;rubygems:archive-tar-minitar:gem&#39;: Range defies version ordering: [0.5.2,0.5.2.0.0.0.0.1)\r\n      rubygems:vagrant:gem:1.0.7\r\n    \r\n    from the specified remote repositories:\r\n      central (http://repo1.maven.org/maven2),\r\n      rubygems (http://rubygems-proxy.torquebox.org/releases),\r\n      snapshot-repository (https://oss.sonatype.org/content/repositories/snapshots),\r\n      Avalon-repo (http://central.maven.org/maven2)\r\n    \r\n    Path to dependency: \r\n    \t1) downloader:downloader:jar:0.0.1-SNAPSHOT\r\n    \t2) net.ju-n.maven.plugins:vagrant-maven-plugin:maven-plugin:1.0.1\r\n\r\nI have searched this dependency and I found it in another URL, but I don&#39;t know how to set it. I don&#39;t want to download the jar manually, because we are using Jenkins and I don&#39;t have access to that repository.\r\n\r\nAnyone knows how to solve it?\r\n\r\nThanks!!\r\n\r\nP.S. My `pom.xml` is (partial):\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;net.ju-n.maven.plugins&lt;/groupId&gt;\r\n      &lt;artifactId&gt;vagrant-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0.1&lt;/version&gt;\r\n      &lt;type&gt;maven-plugin&lt;/type&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;de.saumya.mojo&lt;/groupId&gt;\r\n      &lt;artifactId&gt;gem-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0.7&lt;/version&gt;\r\n    &lt;/dependency&gt;\t\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;avalon-framework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;avalon-framework-impl&lt;/artifactId&gt;\r\n      &lt;version&gt;4.2.0&lt;/version&gt;\r\n      &lt;optional&gt;true&lt;/optional&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**Update1:** I have the following repositories in my pom.xml:\r\n  \r\n\r\n    &lt;repositories&gt;  \t\r\n      \t&lt;repository&gt;\r\n        \t&lt;id&gt;snapshot-repository&lt;/id&gt;\r\n            &lt;name&gt;Maven2 Snapshot Repository&lt;/name&gt;\r\n            &lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots&lt;/url&gt;\r\n            &lt;snapshots&gt;\r\n            \t&lt;enabled&gt;true&lt;/enabled&gt;\r\n                &lt;updatePolicy&gt;daily&lt;/updatePolicy&gt;\r\n            &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n        \r\n        &lt;repository&gt;\r\n          &lt;id&gt;Avalon-repo&lt;/id&gt;\r\n          &lt;url&gt;http://central.maven.org/maven2&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n      &lt;/repositories&gt;\r\n\r\n**Update2:** The problem that Maven is looking for the dependency in http://repo1.maven.org/maven2/org/apache/avalon/framework/avalon-framework-impl/4.2.0/avalon-framework-impl-4.2.0.pom, but the correct URL is: https://repo1.maven.org/maven2/avalon-framework/avalon-framework-api/4.2.0/avalon-framework-api-4.2.0.pom","title":"How to set URL for Maven dependency","body":"<p>I have the following error after launch <code>mvn clean install vagrant:up</code>:</p>\n\n<pre><code>Downloading: https://oss.sonatype.org/content/repositories/snapshots/org/apache/avalon/framework/avalon-framework-api/4.2.0/avalon-framework-api-4.2.0.pom\n[INFO] Unable to find resource 'org.apache.avalon.framework:avalon-framework-api:pom:4.2.0' in repository snapshot-repository (https://oss.sonatype.org/content/repositories/snapshots)\nDownloading: http://central.maven.org/maven2/org/apache/avalon/framework/avalon-framework-api/4.2.0/avalon-framework-api-4.2.0.pom\n[INFO] Unable to find resource 'org.apache.avalon.framework:avalon-framework-api:pom:4.2.0' in repository Avalon-repo (http://central.maven.org/maven2)\nDownloading: http://repo1.maven.org/maven2/org/apache/avalon/framework/avalon-framework-api/4.2.0/avalon-framework-api-4.2.0.pom\n[INFO] Unable to find resource 'org.apache.avalon.framework:avalon-framework-api:pom:4.2.0' in repository central (http://repo1.maven.org/maven2)\nDownloading: https://oss.sonatype.org/content/repositories/snapshots/org/apache/avalon/framework/avalon-framework-impl/4.2.0/avalon-framework-impl-4.2.0.pom\n[INFO] Unable to find resource 'org.apache.avalon.framework:avalon-framework-impl:pom:4.2.0' in repository snapshot-repository (https://oss.sonatype.org/content/repositories/snapshots)\nDownloading: http://central.maven.org/maven2/org/apache/avalon/framework/avalon-framework-impl/4.2.0/avalon-framework-impl-4.2.0.pom\n[INFO] Unable to find resource 'org.apache.avalon.framework:avalon-framework-impl:pom:4.2.0' in repository Avalon-repo (http://central.maven.org/maven2)\nDownloading: http://repo1.maven.org/maven2/org/apache/avalon/framework/avalon-framework-impl/4.2.0/avalon-framework-impl-4.2.0.pom\n[INFO] Unable to find resource 'org.apache.avalon.framework:avalon-framework-impl:pom:4.2.0' in repository central (http://repo1.maven.org/maven2)\n[INFO] ------------------------------------------------------------------------\n[ERROR] BUILD ERROR\n[INFO] ------------------------------------------------------------------------\n[INFO] Failed to resolve artifact.\n\nUnable to get dependency information: Error in metadata for artifact 'rubygems:vagrant:gem': Unable to parse version '[0.5.2,0.5.2.0.0.0.0.1)' for dependency 'rubygems:archive-tar-minitar:gem': Range defies version ordering: [0.5.2,0.5.2.0.0.0.0.1)\n  rubygems:vagrant:gem:1.0.7\n\nfrom the specified remote repositories:\n  central (http://repo1.maven.org/maven2),\n  rubygems (http://rubygems-proxy.torquebox.org/releases),\n  snapshot-repository (https://oss.sonatype.org/content/repositories/snapshots),\n  Avalon-repo (http://central.maven.org/maven2)\n\nPath to dependency: \n    1) downloader:downloader:jar:0.0.1-SNAPSHOT\n    2) net.ju-n.maven.plugins:vagrant-maven-plugin:maven-plugin:1.0.1\n</code></pre>\n\n<p>I have searched this dependency and I found it in another URL, but I don't know how to set it. I don't want to download the jar manually, because we are using Jenkins and I don't have access to that repository.</p>\n\n<p>Anyone knows how to solve it?</p>\n\n<p>Thanks!!</p>\n\n<p>P.S. My <code>pom.xml</code> is (partial):</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;net.ju-n.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;vagrant-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;1.0.1&lt;/version&gt;\n  &lt;type&gt;maven-plugin&lt;/type&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;de.saumya.mojo&lt;/groupId&gt;\n  &lt;artifactId&gt;gem-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;1.0.7&lt;/version&gt;\n&lt;/dependency&gt;   \n&lt;dependency&gt;\n  &lt;groupId&gt;avalon-framework&lt;/groupId&gt;\n  &lt;artifactId&gt;avalon-framework-impl&lt;/artifactId&gt;\n  &lt;version&gt;4.2.0&lt;/version&gt;\n  &lt;optional&gt;true&lt;/optional&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p><strong>Update1:</strong> I have the following repositories in my pom.xml:</p>\n\n<pre><code>&lt;repositories&gt;      \n    &lt;repository&gt;\n        &lt;id&gt;snapshot-repository&lt;/id&gt;\n        &lt;name&gt;Maven2 Snapshot Repository&lt;/name&gt;\n        &lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots&lt;/url&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;updatePolicy&gt;daily&lt;/updatePolicy&gt;\n        &lt;/snapshots&gt;\n    &lt;/repository&gt;\n\n    &lt;repository&gt;\n      &lt;id&gt;Avalon-repo&lt;/id&gt;\n      &lt;url&gt;http://central.maven.org/maven2&lt;/url&gt;\n    &lt;/repository&gt;\n  &lt;/repositories&gt;\n</code></pre>\n\n<p><strong>Update2:</strong> The problem that Maven is looking for the dependency in <a href=\"http://repo1.maven.org/maven2/org/apache/avalon/framework/avalon-framework-impl/4.2.0/avalon-framework-impl-4.2.0.pom\" rel=\"nofollow\">http://repo1.maven.org/maven2/org/apache/avalon/framework/avalon-framework-impl/4.2.0/avalon-framework-impl-4.2.0.pom</a>, but the correct URL is: <a href=\"https://repo1.maven.org/maven2/avalon-framework/avalon-framework-api/4.2.0/avalon-framework-api-4.2.0.pom\" rel=\"nofollow\">https://repo1.maven.org/maven2/avalon-framework/avalon-framework-api/4.2.0/avalon-framework-api-4.2.0.pom</a></p>\n"},{"tags":["java","spring","spring-boot","spring-security","authorization"],"answers":[{"tags":[],"owner":{"account_id":25804254,"reputation":774,"user_id":19546048,"display_name":"DingHao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697506817,"creation_date":1697467324,"answer_id":77302928,"question_id":77302026,"body_markdown":"Forced verification requires bearer token,in your defaultSecurityFilterChain config\r\n\r\n       http.oauth2ResourceServer((resourceServer) -&gt; resourceServer\r\n                    .jwt(Customizer.withDefaults()).bearerTokenResolver(new CustomBearerTokenResolver() ));\r\n\r\n    \r\n    public class CustomBearerTokenResolver implements BearerTokenResolver {\r\n    \r\n        private final BearerTokenResolver defaultBearerTokenResolver = new DefaultBearerTokenResolver();\r\n        \r\n        @Override\r\n        public String resolve(HttpServletRequest request) {\r\n            String resolveToken = defaultBearerTokenResolver.resolve(request);\r\n            if(resolveToken == null){\r\n                throw new RuntimeException(&quot;missing jwt token&quot;);\r\n            }\r\n            return resolveToken;\r\n        }\r\n    \r\n    }","title":"How can I configure a Spring OAuth2 Auth Server to act both as an Auth and Resource Server, securing endpoints independently of session context?","body":"<p>Forced verification requires bearer token,in your defaultSecurityFilterChain config</p>\n<pre><code>   http.oauth2ResourceServer((resourceServer) -&gt; resourceServer\n                .jwt(Customizer.withDefaults()).bearerTokenResolver(new CustomBearerTokenResolver() ));\n\n\npublic class CustomBearerTokenResolver implements BearerTokenResolver {\n\n    private final BearerTokenResolver defaultBearerTokenResolver = new DefaultBearerTokenResolver();\n    \n    @Override\n    public String resolve(HttpServletRequest request) {\n        String resolveToken = defaultBearerTokenResolver.resolve(request);\n        if(resolveToken == null){\n            throw new RuntimeException(&quot;missing jwt token&quot;);\n        }\n        return resolveToken;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8189,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1697477888,"creation_date":1697471516,"answer_id":77303365,"question_id":77302026,"body_markdown":"Your resource server filter-chain should not contain anything about login and logout.\r\n\r\nA resource server filter chain can be configured as &quot;stateless&quot; (without session) because the security context is built out of the access token (not from the session). \r\n\r\nLogin is an OAuth2 client concern, not a resource server one: this is the client sending requests to the resource server which acquires and stores tokens (resource server business is only token validation and access control).\r\n\r\nSessions (and protection against CSRF) are required on clients with `oauth2Login` (it is used during the authorization_code flow, to store tokens and to authorize incoming requests).\r\n\r\nIf your application was also hosting the client for your admin dashboard (Spring MVC controller with a template engine like Tymeleaf), then you could have defined a third filterchain for it (with sessions, CSRF protection and `oauth2Login`).\r\n\r\nBut as your dashboard UI seems to be a SPA (Vue application) it can&#39;t be a confidential client and login should be handled by a middleware: \r\n- on your servers\r\n- maintaining sessions for the frontend\r\n- configured as OAuth2 confidential client with login\r\n- storing tokens (Spring does it in session by default, which is just fine)\r\n- protected against CSRF (with a cookie having http-only flag set to false in the case of a SPA)\r\n- replacing session cookie with an Authorization header containing the access token in session before forwarding a request from the frontend to resource server(s)\r\n\r\nThis is frequently referred to as **B**ackend **F**or **F**rontend pattern (BFF), and I wrote [a tutorial for that][1].\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff","title":"How can I configure a Spring OAuth2 Auth Server to act both as an Auth and Resource Server, securing endpoints independently of session context?","body":"<p>Your resource server filter-chain should not contain anything about login and logout.</p>\n<p>A resource server filter chain can be configured as &quot;stateless&quot; (without session) because the security context is built out of the access token (not from the session).</p>\n<p>Login is an OAuth2 client concern, not a resource server one: this is the client sending requests to the resource server which acquires and stores tokens (resource server business is only token validation and access control).</p>\n<p>Sessions (and protection against CSRF) are required on clients with <code>oauth2Login</code> (it is used during the authorization_code flow, to store tokens and to authorize incoming requests).</p>\n<p>If your application was also hosting the client for your admin dashboard (Spring MVC controller with a template engine like Tymeleaf), then you could have defined a third filterchain for it (with sessions, CSRF protection and <code>oauth2Login</code>).</p>\n<p>But as your dashboard UI seems to be a SPA (Vue application) it can't be a confidential client and login should be handled by a middleware:</p>\n<ul>\n<li>on your servers</li>\n<li>maintaining sessions for the frontend</li>\n<li>configured as OAuth2 confidential client with login</li>\n<li>storing tokens (Spring does it in session by default, which is just fine)</li>\n<li>protected against CSRF (with a cookie having http-only flag set to false in the case of a SPA)</li>\n<li>replacing session cookie with an Authorization header containing the access token in session before forwarding a request from the frontend to resource server(s)</li>\n</ul>\n<p>This is frequently referred to as <strong>B</strong>ackend <strong>F</strong>or <strong>F</strong>rontend pattern (BFF), and I wrote <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff\" rel=\"nofollow noreferrer\">a tutorial for that</a>.</p>\n"},{"tags":[],"owner":{"account_id":21488921,"reputation":4715,"user_id":15835039,"display_name":"Steve Riesenberg"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1698159594,"creation_date":1697915174,"answer_id":77337412,"question_id":77302026,"body_markdown":"The following configuration sets up an extra filter chain for a set of admin endpoints, ordered to be between the auth server endpoints and the rest of the application (user authentication endpoints).\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n\r\n\t@Bean\r\n\t@Order(1)\r\n\tpublic SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http)\r\n\t\t\tthrows Exception {\r\n\t\tOAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\r\n\t\thttp.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\r\n\t\t\t.oidc(Customizer.withDefaults());\r\n\t\thttp\r\n\t\t\t.exceptionHandling((exceptions) -&gt; exceptions\r\n\t\t\t\t.defaultAuthenticationEntryPointFor(\r\n\t\t\t\t\tnew LoginUrlAuthenticationEntryPoint(&quot;/login&quot;),\r\n\t\t\t\t\tnew MediaTypeRequestMatcher(MediaType.TEXT_HTML)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\t.oauth2ResourceServer((oauth2) -&gt; oauth2\r\n\t\t\t\t.jwt(Customizer.withDefaults())\r\n\t\t\t);\r\n\r\n\t\treturn http.build();\r\n\t}\r\n\r\n\t@Bean\r\n\t@Order(2)\r\n\tpublic SecurityFilterChain adminSecurityFilterChain(HttpSecurity http)\r\n\t\t\tthrows Exception {\r\n\t\thttp\r\n\t\t\t.securityMatcher(&quot;/admin/**&quot;)\r\n\t\t\t.authorizeHttpRequests((authorize) -&gt; authorize\r\n\t\t\t\t.requestMatchers(HttpMethod.GET).hasAuthority(&quot;SCOPE_admin:read&quot;)\r\n\t\t\t\t.anyRequest().hasAuthority(&quot;SCOPE_admin:write&quot;)\r\n\t\t\t)\r\n\t\t\t.oauth2ResourceServer((oauth2) -&gt; oauth2.jwt(Customizer.withDefaults()));\r\n\r\n\t\treturn http.build();\r\n\t}\r\n\r\n\t@Bean\r\n\t@Order(3)\r\n\tpublic SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http)\r\n\t\t\tthrows Exception {\r\n\t\thttp\r\n\t\t\t.authorizeHttpRequests((authorize) -&gt; authorize\r\n\t\t\t\t.anyRequest().authenticated()\r\n\t\t\t)\r\n\t\t\t.formLogin(Customizer.withDefaults);\r\n\r\n\t\treturn http.build();\r\n\t}\r\n\r\n}\r\n```\r\n\r\nYou can simply create a `RegisteredClient` that provides `admin:read` and/or `admin:write` scopes. You should use a normal OAuth2 flow (such as `authorization_code` or `client_credentials`) to obtain access tokens with that scope. You don&#39;t want to attempt to customize the `adminSecurityFilterChain` to handle authenticating a user, that is already handled by the `defaultSecurityFilterChain`.\r\n\r\nIf you have a SPA (e.g. Vue.js), it becomes an OAuth2 Client to initiate a redirect for the authorization request (`GET /oauth2/authorize`), or better still should interact with a BFF using sessions and not worry about access tokens at all. Either way, the admin API is accessible via bearer tokens, though this pattern should used rarely. If building an authorization server product (i.e. keycloak-like) it might make sense, but in a microservices architecture I would suggest moving the admin endpoints to a separate microservice, which just keeps things simpler.","title":"How can I configure a Spring OAuth2 Auth Server to act both as an Auth and Resource Server, securing endpoints independently of session context?","body":"<p>The following configuration sets up an extra filter chain for a set of admin endpoints, ordered to be between the auth server endpoints and the rest of the application (user authentication endpoints).</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    @Bean\n    @Order(1)\n    public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http)\n            throws Exception {\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n        http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\n            .oidc(Customizer.withDefaults());\n        http\n            .exceptionHandling((exceptions) -&gt; exceptions\n                .defaultAuthenticationEntryPointFor(\n                    new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;),\n                    new MediaTypeRequestMatcher(MediaType.TEXT_HTML)\n                )\n            )\n            .oauth2ResourceServer((oauth2) -&gt; oauth2\n                .jwt(Customizer.withDefaults())\n            );\n\n        return http.build();\n    }\n\n    @Bean\n    @Order(2)\n    public SecurityFilterChain adminSecurityFilterChain(HttpSecurity http)\n            throws Exception {\n        http\n            .securityMatcher(&quot;/admin/**&quot;)\n            .authorizeHttpRequests((authorize) -&gt; authorize\n                .requestMatchers(HttpMethod.GET).hasAuthority(&quot;SCOPE_admin:read&quot;)\n                .anyRequest().hasAuthority(&quot;SCOPE_admin:write&quot;)\n            )\n            .oauth2ResourceServer((oauth2) -&gt; oauth2.jwt(Customizer.withDefaults()));\n\n        return http.build();\n    }\n\n    @Bean\n    @Order(3)\n    public SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http)\n            throws Exception {\n        http\n            .authorizeHttpRequests((authorize) -&gt; authorize\n                .anyRequest().authenticated()\n            )\n            .formLogin(Customizer.withDefaults);\n\n        return http.build();\n    }\n\n}\n</code></pre>\n<p>You can simply create a <code>RegisteredClient</code> that provides <code>admin:read</code> and/or <code>admin:write</code> scopes. You should use a normal OAuth2 flow (such as <code>authorization_code</code> or <code>client_credentials</code>) to obtain access tokens with that scope. You don't want to attempt to customize the <code>adminSecurityFilterChain</code> to handle authenticating a user, that is already handled by the <code>defaultSecurityFilterChain</code>.</p>\n<p>If you have a SPA (e.g. Vue.js), it becomes an OAuth2 Client to initiate a redirect for the authorization request (<code>GET /oauth2/authorize</code>), or better still should interact with a BFF using sessions and not worry about access tokens at all. Either way, the admin API is accessible via bearer tokens, though this pattern should used rarely. If building an authorization server product (i.e. keycloak-like) it might make sense, but in a microservices architecture I would suggest moving the admin endpoints to a separate microservice, which just keeps things simpler.</p>\n"}],"owner":{"account_id":20251935,"reputation":6409,"user_id":14852784,"display_name":"J. M. Arnold"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":77337412,"answer_count":3,"score":5,"last_activity_date":1698159594,"creation_date":1697459873,"question_id":77302026,"body_markdown":"I am currently working on an OAuth 2.0 login / user management system using [Spring Security][1]. Since I&#39;m writing my own authorization server (based upon docs like [here][2]) using the [`spring-security-oauth2-authorization-server`][3] module, I am also implementing a user management / admin dashboard.\r\n\r\nNaturally, the endpoints for the user management are on the auth server. So the auth server acts as authorization server and *(somewhat like a)* resource server. To authorize a user to use the admin dashboard, they will need to log-in of course, so first they are redirected to the auth servers `/authorize` endpoint which then redirects them to the login menu. The authorization code grant flow is then followed normally. But every step is being done on the same server *(i.e. authentication and accessing of the protected admin endpoints)*! \r\n\r\nI am struggeling to configure our auth server to act as an auth server **AND** resource server because of the following issues:\r\n\r\nThe authorization server saves the `securityContext` to the session. The session ID ([`JSESSIONID`][4]) is then left in the users browser as a cookie. The problem is that when the user tries to access a secured endpoint on the auth server such as the `{...}/admin/users` endpoint, the cookie alone is enough to authorize them to make a request to that endpoint. This means that the entire authorization flow can be circumvented, when a bearer token should be requested first to access the protected endpoint. We would like the secured endpoints to be accessible **ONLY** with a bearer token and just a bearer token, not a session *(or a combination of both)*.\r\n\r\nHere is a shortened version of the current security config:\r\n```java\r\n@Bean\r\n@Order(1)\r\npublic CorsFilter corsFilter(CorsConfigurationSource corsConfigurationSource) {\r\n    logger.info(&quot;Creating corsFilter bean&quot;);\r\n    return new CorsFilter(corsConfigurationSource);\r\n}\r\n\r\n\r\n/**\r\n * Configures the authorization server endpoints.\r\n */\r\n@Bean\r\n@Order(2)\r\npublic SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http, RegisteredClientRepository clientRepository) throws Exception {\r\n\r\n    OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\r\n\r\n    http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\r\n            .registeredClientRepository(clientRepository) // autowired from ClientConfig.java\r\n            .oidc(Customizer.withDefaults());\r\n\r\n    http.exceptionHandling((exceptions) -&gt; exceptions\r\n            .defaultAuthenticationEntryPointFor(\r\n                    new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;),\r\n                    new MediaTypeRequestMatcher(MediaType.TEXT_HTML)\r\n            )\r\n    );\r\n\r\n    http.oauth2ResourceServer((resourceServer) -&gt; resourceServer\r\n            .jwt(Customizer.withDefaults()));\r\n\r\n    http.csrf(AbstractHttpConfigurer::disable);\r\n\r\n    return http.build();\r\n}\r\n\r\n@Bean\r\n@Order(3)\r\npublic SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http) throws Exception {\r\n    http.securityMatcher(new NegatedRequestMatcher(new AntPathRequestMatcher(&quot;/admin/**&quot;)));\r\n\r\n    http.authorizeHttpRequests((authorize) -&gt;\r\n            authorize\r\n                    .requestMatchers(new AntPathRequestMatcher(&quot;/register&quot;)).permitAll()\r\n                    .requestMatchers(new AntPathRequestMatcher(&quot;/recover&quot;)).permitAll()\r\n                    .requestMatchers(new AntPathRequestMatcher(&quot;/error/**&quot;)).permitAll()\r\n                    .requestMatchers(new AntPathRequestMatcher(&quot;/css/**&quot;)).permitAll()\r\n                    .requestMatchers(new AntPathRequestMatcher(&quot;/js/**&quot;)).permitAll()\r\n                    .requestMatchers(new AntPathRequestMatcher(&quot;/favicon.ico&quot;)).permitAll()\r\n                    .anyRequest().authenticated());\r\n\r\n    http.oauth2ResourceServer((resourceServer) -&gt; resourceServer\r\n            .jwt(Customizer.withDefaults()));\r\n\r\n    // set custom login form\r\n    http.formLogin(form -&gt; {\r\n        form.loginPage(&quot;/login&quot;);\r\n        form.permitAll();\r\n    });\r\n\r\n    http.logout(conf -&gt; {\r\n        // default logout url\r\n        conf.logoutSuccessHandler(logoutSuccessHandler());\r\n    });\r\n\r\n    http.csrf(AbstractHttpConfigurer::disable);\r\n    http.cors(AbstractHttpConfigurer::disable);\r\n\r\n    return http.build();\r\n}\r\n\r\n@Bean\r\n@Order(4)\r\npublic SecurityFilterChain adminResourceFilterChain(HttpSecurity http) throws Exception {\r\n\r\n    // handle out custom endpoints in this filter chain\r\n    http.authorizeHttpRequests((authorize) -&gt;\r\n            authorize\r\n                    .requestMatchers(new AntPathRequestMatcher(&quot;/admin/**&quot;)).hasRole(&quot;ADMIN&quot;)\r\n                    .anyRequest().authenticated());\r\n\r\n    http.sessionManagement(conf -&gt; conf.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\r\n\r\n    http.oauth2ResourceServer((resourceServer) -&gt; resourceServer\r\n            .jwt(Customizer.withDefaults()));\r\n\r\n    http.csrf(AbstractHttpConfigurer::disable);\r\n    http.cors(AbstractHttpConfigurer::disable);\r\n\r\n    return http.build();\r\n}\r\n```\r\n\r\n**How to configure the authorization server so the admin endpoints are secured independently from the security context from the session?**\r\n\r\nFor disclosure purposes, I was debugging *a lot* and tried basically the whole [basics][2]! I also tried a few other things: \r\n\r\nAccording to [Spring Security Documentation][5], it&#39;s possible to set the `.sessionManagement` to STATELESS in the security config. I had hoped that this would fix the issue, but setting this in the resource server filter chain showed to cause another issue: With the session management flag set to STATELESS, the  login isnt processed properly. After the POST request from the login form, instead of redirecting to the redirect_url from the `/authorize` request, the auth server redirects to /? *I think this is because the auth server module relies on the security context saved to the session for some of its filters.*\r\n\r\nI also had some issues with CORS and thought this might cause this.Considering that the [docs][6] say:\r\n\r\n&gt; CORS must be processed before Spring Security because the pre-flight request will not contain any cookies (i.e. the JSESSIONID). If the request does not contain any cookies and Spring Security is first, the request will determine the user is not authenticated (since there are no cookies in the request) and reject it.\r\n\r\nThis would explain that thefront-end Vue.js application doesn&#39;t work properly, but not the debugging calls via Postman. Now I deactivated CORS to not deal with those issues.\r\n\r\n\r\n  [1]: https://spring.io/projects/spring-security\r\n  [2]: https://docs.spring.io/spring-authorization-server/docs/current/reference/html/getting-started.html\r\n  [3]: https://mvnrepository.com/artifact/org.springframework.security/spring-security-oauth2-authorization-server/1.1.2\r\n  [4]: https://docs.spring.io/spring-session/docs/2.2.0.RELEASE/reference/html5/guides/java-custom-cookie.html\r\n  [5]: https://docs.spring.io/spring-security/reference/servlet/authentication/session-management.html\r\n  [6]: https://docs.spring.io/spring-security/reference/reactive/integrations/cors.html","title":"How can I configure a Spring OAuth2 Auth Server to act both as an Auth and Resource Server, securing endpoints independently of session context?","body":"<p>I am currently working on an OAuth 2.0 login / user management system using <a href=\"https://spring.io/projects/spring-security\" rel=\"nofollow noreferrer\">Spring Security</a>. Since I'm writing my own authorization server (based upon docs like <a href=\"https://docs.spring.io/spring-authorization-server/docs/current/reference/html/getting-started.html\" rel=\"nofollow noreferrer\">here</a>) using the <a href=\"https://mvnrepository.com/artifact/org.springframework.security/spring-security-oauth2-authorization-server/1.1.2\" rel=\"nofollow noreferrer\"><code>spring-security-oauth2-authorization-server</code></a> module, I am also implementing a user management / admin dashboard.</p>\n<p>Naturally, the endpoints for the user management are on the auth server. So the auth server acts as authorization server and <em>(somewhat like a)</em> resource server. To authorize a user to use the admin dashboard, they will need to log-in of course, so first they are redirected to the auth servers <code>/authorize</code> endpoint which then redirects them to the login menu. The authorization code grant flow is then followed normally. But every step is being done on the same server <em>(i.e. authentication and accessing of the protected admin endpoints)</em>!</p>\n<p>I am struggeling to configure our auth server to act as an auth server <strong>AND</strong> resource server because of the following issues:</p>\n<p>The authorization server saves the <code>securityContext</code> to the session. The session ID (<a href=\"https://docs.spring.io/spring-session/docs/2.2.0.RELEASE/reference/html5/guides/java-custom-cookie.html\" rel=\"nofollow noreferrer\"><code>JSESSIONID</code></a>) is then left in the users browser as a cookie. The problem is that when the user tries to access a secured endpoint on the auth server such as the <code>{...}/admin/users</code> endpoint, the cookie alone is enough to authorize them to make a request to that endpoint. This means that the entire authorization flow can be circumvented, when a bearer token should be requested first to access the protected endpoint. We would like the secured endpoints to be accessible <strong>ONLY</strong> with a bearer token and just a bearer token, not a session <em>(or a combination of both)</em>.</p>\n<p>Here is a shortened version of the current security config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\n@Order(1)\npublic CorsFilter corsFilter(CorsConfigurationSource corsConfigurationSource) {\n    logger.info(&quot;Creating corsFilter bean&quot;);\n    return new CorsFilter(corsConfigurationSource);\n}\n\n\n/**\n * Configures the authorization server endpoints.\n */\n@Bean\n@Order(2)\npublic SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http, RegisteredClientRepository clientRepository) throws Exception {\n\n    OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n\n    http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\n            .registeredClientRepository(clientRepository) // autowired from ClientConfig.java\n            .oidc(Customizer.withDefaults());\n\n    http.exceptionHandling((exceptions) -&gt; exceptions\n            .defaultAuthenticationEntryPointFor(\n                    new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;),\n                    new MediaTypeRequestMatcher(MediaType.TEXT_HTML)\n            )\n    );\n\n    http.oauth2ResourceServer((resourceServer) -&gt; resourceServer\n            .jwt(Customizer.withDefaults()));\n\n    http.csrf(AbstractHttpConfigurer::disable);\n\n    return http.build();\n}\n\n@Bean\n@Order(3)\npublic SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http) throws Exception {\n    http.securityMatcher(new NegatedRequestMatcher(new AntPathRequestMatcher(&quot;/admin/**&quot;)));\n\n    http.authorizeHttpRequests((authorize) -&gt;\n            authorize\n                    .requestMatchers(new AntPathRequestMatcher(&quot;/register&quot;)).permitAll()\n                    .requestMatchers(new AntPathRequestMatcher(&quot;/recover&quot;)).permitAll()\n                    .requestMatchers(new AntPathRequestMatcher(&quot;/error/**&quot;)).permitAll()\n                    .requestMatchers(new AntPathRequestMatcher(&quot;/css/**&quot;)).permitAll()\n                    .requestMatchers(new AntPathRequestMatcher(&quot;/js/**&quot;)).permitAll()\n                    .requestMatchers(new AntPathRequestMatcher(&quot;/favicon.ico&quot;)).permitAll()\n                    .anyRequest().authenticated());\n\n    http.oauth2ResourceServer((resourceServer) -&gt; resourceServer\n            .jwt(Customizer.withDefaults()));\n\n    // set custom login form\n    http.formLogin(form -&gt; {\n        form.loginPage(&quot;/login&quot;);\n        form.permitAll();\n    });\n\n    http.logout(conf -&gt; {\n        // default logout url\n        conf.logoutSuccessHandler(logoutSuccessHandler());\n    });\n\n    http.csrf(AbstractHttpConfigurer::disable);\n    http.cors(AbstractHttpConfigurer::disable);\n\n    return http.build();\n}\n\n@Bean\n@Order(4)\npublic SecurityFilterChain adminResourceFilterChain(HttpSecurity http) throws Exception {\n\n    // handle out custom endpoints in this filter chain\n    http.authorizeHttpRequests((authorize) -&gt;\n            authorize\n                    .requestMatchers(new AntPathRequestMatcher(&quot;/admin/**&quot;)).hasRole(&quot;ADMIN&quot;)\n                    .anyRequest().authenticated());\n\n    http.sessionManagement(conf -&gt; conf.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\n\n    http.oauth2ResourceServer((resourceServer) -&gt; resourceServer\n            .jwt(Customizer.withDefaults()));\n\n    http.csrf(AbstractHttpConfigurer::disable);\n    http.cors(AbstractHttpConfigurer::disable);\n\n    return http.build();\n}\n</code></pre>\n<p><strong>How to configure the authorization server so the admin endpoints are secured independently from the security context from the session?</strong></p>\n<p>For disclosure purposes, I was debugging <em>a lot</em> and tried basically the whole <a href=\"https://docs.spring.io/spring-authorization-server/docs/current/reference/html/getting-started.html\" rel=\"nofollow noreferrer\">basics</a>! I also tried a few other things:</p>\n<p>According to <a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/session-management.html\" rel=\"nofollow noreferrer\">Spring Security Documentation</a>, it's possible to set the <code>.sessionManagement</code> to STATELESS in the security config. I had hoped that this would fix the issue, but setting this in the resource server filter chain showed to cause another issue: With the session management flag set to STATELESS, the  login isnt processed properly. After the POST request from the login form, instead of redirecting to the redirect_url from the <code>/authorize</code> request, the auth server redirects to /? <em>I think this is because the auth server module relies on the security context saved to the session for some of its filters.</em></p>\n<p>I also had some issues with CORS and thought this might cause this.Considering that the <a href=\"https://docs.spring.io/spring-security/reference/reactive/integrations/cors.html\" rel=\"nofollow noreferrer\">docs</a> say:</p>\n<blockquote>\n<p>CORS must be processed before Spring Security because the pre-flight request will not contain any cookies (i.e. the JSESSIONID). If the request does not contain any cookies and Spring Security is first, the request will determine the user is not authenticated (since there are no cookies in the request) and reject it.</p>\n</blockquote>\n<p>This would explain that thefront-end Vue.js application doesn't work properly, but not the debugging calls via Postman. Now I deactivated CORS to not deal with those issues.</p>\n"},{"tags":["java","spring","maven","import","jar"],"comments":[{"owner":{"account_id":9293440,"reputation":1727,"user_id":6901184,"display_name":"Mart&#237;n Zaragoza"},"score":0,"creation_date":1534169567,"post_id":51823522,"comment_id":90602803,"body_markdown":"From your image I can infer that either you&#39;re refering to the classes using the wrong package declaration... or the Jar file is wrongly packaged. You cannot import classes from the BOOT-INF folder within a Jar file... \nCould you show the JAR structure? (you can open the jar using any zip or rar tool)","body":"From your image I can infer that either you&#39;re refering to the classes using the wrong package declaration... or the Jar file is wrongly packaged. You cannot import classes from the BOOT-INF folder within a Jar file...  Could you show the JAR structure? (you can open the jar using any zip or rar tool)"}],"answers":[{"tags":[],"owner":{"account_id":9293440,"reputation":1727,"user_id":6901184,"display_name":"Mart&#237;n Zaragoza"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1534183915,"creation_date":1534167089,"answer_id":51823581,"question_id":51823522,"body_markdown":"Create a lib/ dir in the root of your project folder. Put your Jar there. Add this to your pom.xml:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;uk.co.pervasive_intelligence.simulator&lt;/groupId&gt;\r\n      &lt;artifactId&gt;protocol&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0&lt;/version&gt;\r\n      &lt;scope&gt;system&lt;/scope&gt;\r\n      &lt;systemPath&gt;${basedir}/lib/simulator-1.2.2.jar&lt;/systemPath&gt;\r\n    &lt;/dependency&gt;\r\n\r\nDo not use \\ as path separator (even though you&#39;re using windows)\r\n\r\nRun `mvn clean package` from the command line \r\n\r\nYou could also try installing the dependecy manually in your local repo:\r\n\r\n`mvn install:install-file -Dfile=simulator-1.2.2.jar -DgroupId=uk.co.pervasive_intelligence.simulator -DartifactId=protocol -Dversion=1.0 -Dpackaging=jar`\r\n\r\nThen add this to your pom:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;uk.co.pervasive_intelligence.simulator&lt;/groupId&gt;\r\n      &lt;artifactId&gt;protocol&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n\r\n__EDIT:__\r\n\r\nThe jar file does not have the structure of a standard java library. In order to use that jar as a library, the packages of your classes should exist as folders in the base (or root directory) of your jar file. For example:\r\n\r\n    /META-INF\r\n        /MANIFEST.MF\r\n    /uk\r\n        /co\r\n            /pervasive_intelligence\r\n                /simulator\r\n                    /BaseComponent.class\r\n                    /SimulatorApplication.class\r\n                    /SimulatorException.class\r\n    ....\r\n\r\nBeing a library jar file then the contents of the MANIFEST.MF can be as simple as \r\n\r\n    Manifest-Version: 1.0\r\n\r\nHope this helps","title":"Can&#39;t import classes from jar","body":"<p>Create a lib/ dir in the root of your project folder. Put your Jar there. Add this to your pom.xml:</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;uk.co.pervasive_intelligence.simulator&lt;/groupId&gt;\n  &lt;artifactId&gt;protocol&lt;/artifactId&gt;\n  &lt;version&gt;1.0&lt;/version&gt;\n  &lt;scope&gt;system&lt;/scope&gt;\n  &lt;systemPath&gt;${basedir}/lib/simulator-1.2.2.jar&lt;/systemPath&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Do not use \\ as path separator (even though you're using windows)</p>\n\n<p>Run <code>mvn clean package</code> from the command line </p>\n\n<p>You could also try installing the dependecy manually in your local repo:</p>\n\n<p><code>mvn install:install-file -Dfile=simulator-1.2.2.jar -DgroupId=uk.co.pervasive_intelligence.simulator -DartifactId=protocol -Dversion=1.0 -Dpackaging=jar</code></p>\n\n<p>Then add this to your pom:</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;uk.co.pervasive_intelligence.simulator&lt;/groupId&gt;\n  &lt;artifactId&gt;protocol&lt;/artifactId&gt;\n  &lt;version&gt;1.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>The jar file does not have the structure of a standard java library. In order to use that jar as a library, the packages of your classes should exist as folders in the base (or root directory) of your jar file. For example:</p>\n\n<pre><code>/META-INF\n    /MANIFEST.MF\n/uk\n    /co\n        /pervasive_intelligence\n            /simulator\n                /BaseComponent.class\n                /SimulatorApplication.class\n                /SimulatorException.class\n....\n</code></pre>\n\n<p>Being a library jar file then the contents of the MANIFEST.MF can be as simple as </p>\n\n<pre><code>Manifest-Version: 1.0\n</code></pre>\n\n<p>Hope this helps</p>\n"},{"tags":[],"owner":{"account_id":7625737,"reputation":940,"user_id":5782262,"display_name":"Noman Khan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1534171717,"creation_date":1534171133,"answer_id":51824888,"question_id":51823522,"body_markdown":"Class files in **co.uk...** package is inside **BOOT-INF/classes** packed inside **simulator** jar, and cannot be accessed directly because it not part of jar&#39;s default classpath (&quot;.&quot;).\r\n\r\nTo understand better about jar classpath please check https://stackoverflow.com/questions/8227682/whats-the-default-classpath-when-not-specifying-classpath\r\n\r\n  \r\n**simulator** jar need to be packaged with classpath entry to add BOOT-INF/classes/...  in classpath to allow access to classes under BOOT-INF/classes.  \r\n\r\nFor example to allow access to classes from package **uk.co.pervasive_intelligence.simulator.Component** with maven this can be done as\r\n\r\n\r\n    \t&lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n            &lt;archive&gt;\r\n                \r\n                &lt;manifestEntries&gt;\r\n                    &lt;Class-Path&gt;BOOT-NF/classes/uk/co/pervasive_intelligence/simulator/Component&lt;/Class-Path&gt;\r\n                &lt;/manifestEntries&gt;\r\n            &lt;/archive&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt; \r\n\r\n\r\n\r\n\r\n\r\n","title":"Can&#39;t import classes from jar","body":"<p>Class files in <strong>co.uk...</strong> package is inside <strong>BOOT-INF/classes</strong> packed inside <strong>simulator</strong> jar, and cannot be accessed directly because it not part of jar's default classpath (\".\").</p>\n\n<p>To understand better about jar classpath please check <a href=\"https://stackoverflow.com/questions/8227682/whats-the-default-classpath-when-not-specifying-classpath\">What&#39;s the default classpath when not specifying classpath?</a></p>\n\n<p><strong>simulator</strong> jar need to be packaged with classpath entry to add BOOT-INF/classes/...  in classpath to allow access to classes under BOOT-INF/classes.  </p>\n\n<p>For example to allow access to classes from package <strong>uk.co.pervasive_intelligence.simulator.Component</strong> with maven this can be done as</p>\n\n<pre><code>    &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;archive&gt;\n\n            &lt;manifestEntries&gt;\n                &lt;Class-Path&gt;BOOT-NF/classes/uk/co/pervasive_intelligence/simulator/Component&lt;/Class-Path&gt;\n            &lt;/manifestEntries&gt;\n        &lt;/archive&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":15874227,"reputation":11,"user_id":11453951,"display_name":"shizhengle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594966661,"creation_date":1594966093,"answer_id":62948092,"question_id":51823522,"body_markdown":"If You Use SpringBoot and InteliJ Idea when you have excute mvn clean package command, you should use packagename.jar.original in maven pom for The jar file  have the structure of a standard java library.\r\n\r\n```\r\n/META-INF\r\n    /MANIFEST.MF\r\n/uk\r\n    /co\r\n        /pervasive_intelligence\r\n            /simulator\r\n                /BaseComponent.class\r\n                /SimulatorApplication.class\r\n                /SimulatorException.class\r\n....\r\n```","title":"Can&#39;t import classes from jar","body":"<p>If You Use SpringBoot and InteliJ Idea when you have excute mvn clean package command, you should use packagename.jar.original in maven pom for The jar file  have the structure of a standard java library.</p>\n<pre><code>/META-INF\n    /MANIFEST.MF\n/uk\n    /co\n        /pervasive_intelligence\n            /simulator\n                /BaseComponent.class\n                /SimulatorApplication.class\n                /SimulatorException.class\n....\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5959682,"reputation":251,"user_id":4685215,"display_name":"Luca Motta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698159545,"creation_date":1698159545,"answer_id":77353201,"question_id":51823522,"body_markdown":"I have faced with a similar issue and analyzing the inner jar structure of other working libraries I have noticed that my custom library that I&#39;m trying to import had the incorrect structure descripted by [@Martin Zaragoza][1] in [his answer][2]:\r\n\r\n&gt; The jar file does not have the structure of a standard java library.\r\n&gt; In order to use that jar as a library, the packages of your classes\r\n&gt; should exist as folders in the base (or root directory) of your jar\r\n&gt; file.\r\n\r\nTo fix the issue I have replaced the `build` pom section of my custom library imported with the following:\r\n\r\n    &lt;build&gt;\r\n        &lt;pluginManagement&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.1.0&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.0.2&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.8.0&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.22.1&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.0.2&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.5.2&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.8.2&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.7.1&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.0.0&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/pluginManagement&gt;\r\n    &lt;/build&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/6901184/mart%C3%ADn-zaragoza\r\n  [2]: https://stackoverflow.com/a/51823581/4685215","title":"Can&#39;t import classes from jar","body":"<p>I have faced with a similar issue and analyzing the inner jar structure of other working libraries I have noticed that my custom library that I'm trying to import had the incorrect structure descripted by <a href=\"https://stackoverflow.com/users/6901184/mart%C3%ADn-zaragoza\">@Martin Zaragoza</a> in <a href=\"https://stackoverflow.com/a/51823581/4685215\">his answer</a>:</p>\n<blockquote>\n<p>The jar file does not have the structure of a standard java library.\nIn order to use that jar as a library, the packages of your classes\nshould exist as folders in the base (or root directory) of your jar\nfile.</p>\n</blockquote>\n<p>To fix the issue I have replaced the <code>build</code> pom section of my custom library imported with the following:</p>\n<pre><code>&lt;build&gt;\n    &lt;pluginManagement&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.0&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.2&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.0&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.22.1&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.2&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5.2&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.8.2&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.7.1&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n&lt;/build&gt;\n</code></pre>\n"}],"owner":{"account_id":3929075,"reputation":5785,"user_id":3248412,"accept_rate":89,"display_name":"vs97"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13136,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":51823581,"answer_count":4,"score":5,"last_activity_date":1698159545,"creation_date":1534166913,"question_id":51823522,"body_markdown":"I am having problems importing classes from a JAR library into my project. Please see the screenshot.\r\n\r\nI have tried several things both in Eclipse and IntelliJ, both adding directly and adding through Maven. None of this helps, I still get a red underline.\r\n\r\nIn IntelliJ I tried:\r\n\r\n1. Project Structure - Modules - Dependencies - Add jar.\r\n2. Tried creating a lib folder, add it as a library and place the jar inside and then setup as dependency.\r\n3. Adding through maven pom.xml with direct path to the jar.\r\n\r\nIn Eclipse I tried:\r\n\r\n1. Java Build Path and adding it to my build path.\r\n2. Maven - Update Project.\r\n\r\nHere is my pom.xml to get the local jar.\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;uk.co.pervasive_intelligence.simulator&lt;/groupId&gt;\r\n      &lt;artifactId&gt;protocol&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0&lt;/version&gt;\r\n      &lt;scope&gt;system&lt;/scope&gt;\r\n      &lt;systemPath&gt;C:\\Users\\Vas-DELL\\Desktop\\simulator-1.2.2.jar&lt;/systemPath&gt;\r\n    &lt;/dependency&gt;\r\n\r\nStrangely, I am able to see the jar and the classes inside the jar (screenshot). But still can not import them. Let me know please if there is anything else I can provide.\r\n\r\n[![Screenshot][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rMBtz.png","title":"Can&#39;t import classes from jar","body":"<p>I am having problems importing classes from a JAR library into my project. Please see the screenshot.</p>\n\n<p>I have tried several things both in Eclipse and IntelliJ, both adding directly and adding through Maven. None of this helps, I still get a red underline.</p>\n\n<p>In IntelliJ I tried:</p>\n\n<ol>\n<li>Project Structure - Modules - Dependencies - Add jar.</li>\n<li>Tried creating a lib folder, add it as a library and place the jar inside and then setup as dependency.</li>\n<li>Adding through maven pom.xml with direct path to the jar.</li>\n</ol>\n\n<p>In Eclipse I tried:</p>\n\n<ol>\n<li>Java Build Path and adding it to my build path.</li>\n<li>Maven - Update Project.</li>\n</ol>\n\n<p>Here is my pom.xml to get the local jar.</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;uk.co.pervasive_intelligence.simulator&lt;/groupId&gt;\n  &lt;artifactId&gt;protocol&lt;/artifactId&gt;\n  &lt;version&gt;1.0&lt;/version&gt;\n  &lt;scope&gt;system&lt;/scope&gt;\n  &lt;systemPath&gt;C:\\Users\\Vas-DELL\\Desktop\\simulator-1.2.2.jar&lt;/systemPath&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Strangely, I am able to see the jar and the classes inside the jar (screenshot). But still can not import them. Let me know please if there is anything else I can provide.</p>\n\n<p><a href=\"https://i.stack.imgur.com/rMBtz.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/rMBtz.png\" alt=\"Screenshot\"></a></p>\n"},{"tags":["java","jboss","wildfly","mysql-connector","wildfly-27"],"answers":[{"tags":[],"owner":{"account_id":29656148,"reputation":1,"user_id":22728866,"display_name":"Cezar Apulchro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698096063,"creation_date":1698096063,"answer_id":77348387,"question_id":77345775,"body_markdown":"After change persistence.xml:\r\n\r\nfrom: &lt;jta-data-source&gt;java:MySqlDS&lt;/jta-data-source&gt;\r\nto: &lt;jta-data-source&gt;java:jboss/MySqlDS&lt;/jta-data-source&gt;\r\n\r\nthe problem was solved.\r\n\r\nMy IDE Eclipse carried me to error, when I write in my persistence correct way the eclipse underlines the word jboss in red and when I point to word eclipse show that &quot;The word &#39;jboss&#39; is not correctly spelled&quot;. Now I doing the deploy of my application.\r\nThanks guys.","title":"WFLYCTL0412: Required services that are not installed","body":"<p>After change persistence.xml:</p>\n<p>from: java:MySqlDS\nto: java:jboss/MySqlDS</p>\n<p>the problem was solved.</p>\n<p>My IDE Eclipse carried me to error, when I write in my persistence correct way the eclipse underlines the word jboss in red and when I point to word eclipse show that &quot;The word 'jboss' is not correctly spelled&quot;. Now I doing the deploy of my application.\nThanks guys.</p>\n"}],"owner":{"account_id":29656148,"reputation":1,"user_id":22728866,"display_name":"Cezar Apulchro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698158447,"creation_date":1698068847,"question_id":77345775,"body_markdown":"I am trying to deploy my application after change my persistence.xml but I am receiving errors relative to my persistence.\r\n\r\nI do the test connection to my MySQL DB in HAL Management Console and the test is made as success.\r\n\r\npersistence:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;persistence version=&quot;2.1&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot; \r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence\r\n                                 http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\r\n  &lt;persistence-unit name=&quot;itcmedbr_PU&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n    &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n    &lt;jta-data-source&gt;java:MySqlDS&lt;/jta-data-source&gt;\r\n    &lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;\r\n    &lt;properties&gt;\r\n    \t&lt;property name=&quot;jakarta.persistence.jdbc.driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;\r\n    \t&lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://localhost:3306/db_medical?zeroDateTimeBehavior=CONVERT_TO_NULL&quot;/&gt;\r\n    \t&lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;root&quot;/&gt;\r\n    \t&lt;property name=&quot;jakarta.persistence.jdbc..password&quot; value=&quot;root&quot;/&gt;\r\n      &lt;!-- Configura&#231;&#245;es espec&#237;ficas do Hibernate --&gt;\r\n      \t&lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQLDialect&quot;/&gt;\r\n      \t&lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot;/&gt;\r\n      \t&lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\r\n      \t&lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot;/&gt;\r\n    &lt;/properties&gt;\r\n  &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n```\r\ndefinition of datasource and driver in standalone:\r\n\r\n```\r\n&lt;datasource jndi-name=&quot;java:jboss/MySqlDS&quot; pool-name=&quot;MySqlDS&quot;&gt;\r\n                    &lt;connection-url&gt;jdbc:mysql://localhost:3306/db_medical&lt;/connection-url&gt;\r\n                    &lt;driver-class&gt;com.mysql.cj.jdbc.Driver&lt;/driver-class&gt;\r\n                    &lt;driver&gt;mysql&lt;/driver&gt;\r\n                    &lt;security&gt;\r\n                        &lt;user-name&gt;root&lt;/user-name&gt;\r\n                        &lt;password&gt;root&lt;/password&gt;\r\n                    &lt;/security&gt;\r\n                    &lt;validation&gt;\r\n                        &lt;valid-connection-checker class-name=&quot;org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker&quot;/&gt;\r\n                        &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;\r\n                        &lt;background-validation&gt;false&lt;/background-validation&gt;\r\n                        &lt;exception-sorter class-name=&quot;org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter&quot;/&gt;\r\n                    &lt;/validation&gt;\r\n                &lt;/datasource&gt; \r\n\r\n&lt;driver name=&quot;mysql&quot; module=&quot;com.mysql&quot;&gt;\r\n                        &lt;driver-class&gt;com.mysql.cj.jdbc.Driver&lt;/driver-class&gt;\r\n                        &lt;xa-datasource-class&gt;com.mysql.cj.jdbc.MysqlXADataSource&lt;/xa-datasource-class&gt;\r\n                    &lt;/driver&gt;\r\n```\r\nerror log:\r\n\r\n```\r\n08:48:34,097 INFO  [org.jboss.as.repository] (External Management Request Threads -- 1) WFLYDR0001: Content added at location C:\\Users\\Ilo Gabriel\\eclipse-workspace\\wildfly-27.0.1.Final\\standalone\\data\\content\\ac\\a7e4b6ad429643a5813552677f49ab30f6fdb9\\content\r\n08:48:34,188 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 100) WFLYUT0022: Unregistered web context: &#39;/itcmedbr&#39; from server &#39;default-server&#39;\r\n08:48:34,370 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 218) WFLYJPA0011: Stopping Persistence Unit (phase 2 of 2) Service &#39;itcmedbr.war#itcmedbr_PU&#39;\r\n08:48:34,393 INFO  [org.hibernate.orm.beans] (ServerService Thread Pool -- 218) HHH10005004: Stopping BeanContainer : org.hibernate.resource.beans.container.internal.CdiBeanContainerExtendedAccessImpl@5a4ec8bd\r\n08:48:34,408 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 218) WFLYJPA0011: Stopping Persistence Unit (phase 1 of 2) Service &#39;itcmedbr.war#itcmedbr_PU&#39;\r\n08:48:35,232 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) WFLYSRV0028: Stopped deployment itcmedbr.war (runtime-name: itcmedbr.war) in 1116ms\r\n08:48:35,254 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0027: Starting deployment of &quot;itcmedbr.war&quot; (runtime-name: &quot;itcmedbr.war&quot;)\r\n08:48:48,146 INFO  [org.jboss.as.jpa] (MSC service thread 1-7) WFLYJPA0002: Read persistence.xml for itcmedbr_PU\r\n08:48:48,840 INFO  [org.jipijapa] (MSC service thread 1-6) JIPIORMV6020260: Second level cache enabled for itcmedbr.war#itcmedbr_PU\r\n08:48:48,880 INFO  [org.infinispan.CONTAINER] (ServerService Thread Pool -- 218) ISPN000556: Starting user marshaller &#39;org.wildfly.clustering.infinispan.marshalling.jboss.JBossMarshaller&#39;\r\n08:48:49,127 INFO  [org.jboss.weld.deployer] (MSC service thread 1-6) WFLYWELD0003: Processing weld deployment itcmedbr.war\r\n08:48:49,502 WARN  [org.wildfly.extension.microprofile.opentracing] (MSC service thread 1-6) WFLYTRACEXT0012: No Jaeger endpoint or sender-binding configured. Installing a no-op sender\r\n08:48:49,507 INFO  [io.jaegertracing.internal.JaegerTracer] (MSC service thread 1-6) No shutdown hook registered: Please call close() manually on application shutdown.\r\n08:48:49,509 INFO  [org.wildfly.microprofile.opentracing.smallrye] (MSC service thread 1-6) WFLYTRAC0001: Tracer initialized: JaegerTracer(version=Java-1.6.0, serviceName=itcmedbr.war, reporter=RemoteReporter(sender=NoopSender(), closeEnqueueTimeout=1000), sampler=ConstSampler(decision=true, tags={sampler.type=const, sampler.param=true}), tags={hostname=DESKTOP-MOJECP9, jaeger.version=Java-1.6.0, ip=192.168.100.185}, zipkinSharedRpcSpan=false, expandExceptionLogs=false, useTraceId128Bit=false)\r\n08:48:49,723 INFO  [org.jipijapa] (MSC service thread 1-5) JIPIORMV6020260: Second level cache enabled for itcmedbr.war#itcmedbr_PU\r\n08:48:49,949 ERROR [org.jboss.as.controller.management-operation] (External Management Request Threads -- 1) WFLYCTL0013: Operation (&quot;full-replace-deployment&quot;) failed - address: ([]) - failure description: {\r\n    &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.naming.context.java.jboss.java:MySqlDS&quot;],\r\n    &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; [\r\n        &quot;jboss.persistenceunit.\\&quot;itcmedbr.war#itcmedbr_PU\\&quot;.__FIRST_PHASE__ is missing [jboss.naming.context.java.jboss.java:MySqlDS]&quot;,\r\n        &quot;jboss.persistenceunit.\\&quot;itcmedbr.war#itcmedbr_PU\\&quot; is missing [jboss.naming.context.java.jboss.java:MySqlDS]&quot;\r\n    ]\r\n}\r\n08:48:49,951 ERROR [org.jboss.as.controller.management-operation] (External Management Request Threads -- 1) WFLYCTL0013: Operation (&quot;full-replace-deployment&quot;) failed - address: ([]) - failure description: {\r\n    &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.naming.context.java.jboss.java:MySqlDS&quot;],\r\n    &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; [\r\n        &quot;jboss.persistenceunit.\\&quot;itcmedbr.war#itcmedbr_PU\\&quot;.__FIRST_PHASE__ is missing [jboss.naming.context.java.jboss.java:MySqlDS]&quot;,\r\n        &quot;jboss.persistenceunit.\\&quot;itcmedbr.war#itcmedbr_PU\\&quot; is missing [jboss.naming.context.java.jboss.java:MySqlDS]&quot;\r\n    ]\r\n}\r\n08:48:50,598 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) WFLYSRV0028: Stopped deployment itcmedbr.war (runtime-name: itcmedbr.war) in 645ms\r\n08:48:50,600 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) WFLYSRV0027: Starting deployment of &quot;itcmedbr.war&quot; (runtime-name: &quot;itcmedbr.war&quot;)\r\n08:48:50,600 ERROR [org.jboss.as.server] (External Management Request Threads -- 1) WFLYSRV0014: Replacement of deployment &quot;itcmedbr.war&quot; by deployment &quot;itcmedbr.war&quot; was rolled back with the following failure message: \r\n{\r\n    &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.naming.context.java.jboss.java:MySqlDS&quot;],\r\n    &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; [\r\n        &quot;jboss.persistenceunit.\\&quot;itcmedbr.war#itcmedbr_PU\\&quot;.__FIRST_PHASE__ is missing [jboss.naming.context.java.jboss.java:MySqlDS]&quot;,\r\n        &quot;jboss.persistenceunit.\\&quot;itcmedbr.war#itcmedbr_PU\\&quot; is missing [jboss.naming.context.java.jboss.java:MySqlDS]&quot;\r\n    ]\r\n}\r\n08:49:04,360 INFO  [org.jboss.as.jpa] (MSC service thread 1-1) WFLYJPA0002: Read persistence.xml for itcmedbr_PU\r\n08:49:05,174 INFO  [org.jipijapa] (MSC service thread 1-6) JIPIORMV6020260: Second level cache enabled for itcmedbr.war#itcmedbr_PU\r\n08:49:05,210 INFO  [org.infinispan.CONTAINER] (ServerService Thread Pool -- 218) ISPN000556: Starting user marshaller &#39;org.wildfly.clustering.infinispan.marshalling.jboss.JBossMarshaller&#39;\r\n08:49:05,266 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 245) WFLYJPA0010: Starting Persistence Unit (phase 1 of 2) Service &#39;itcmedbr.war#itcmedbr_PU&#39;\r\n08:49:05,268 INFO  [org.hibernate.jpa.internal.util.LogHelper] (ServerService Thread Pool -- 245) HHH000204: Processing PersistenceUnitInfo [name: itcmedbr_PU]\r\n08:49:05,295 WARN  [org.hibernate.orm.deprecation] (ServerService Thread Pool -- 245) HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead\r\n08:49:07,622 INFO  [org.jboss.weld.deployer] (MSC service thread 1-8) WFLYWELD0003: Processing weld deployment itcmedbr.war\r\n08:49:07,922 WARN  [org.wildfly.extension.microprofile.opentracing] (MSC service thread 1-8) WFLYTRACEXT0012: No Jaeger endpoint or sender-binding configured. Installing a no-op sender\r\n08:49:07,931 INFO  [io.jaegertracing.internal.JaegerTracer] (MSC service thread 1-8) No shutdown hook registered: Please call close() manually on application shutdown.\r\n08:49:07,932 INFO  [org.wildfly.microprofile.opentracing.smallrye] (MSC service thread 1-8) WFLYTRAC0001: Tracer initialized: JaegerTracer(version=Java-1.6.0, serviceName=itcmedbr.war, reporter=RemoteReporter(sender=NoopSender(), closeEnqueueTimeout=1000), sampler=ConstSampler(decision=true, tags={sampler.type=const, sampler.param=true}), tags={hostname=DESKTOP-MOJECP9, jaeger.version=Java-1.6.0, ip=192.168.100.185}, zipkinSharedRpcSpan=false, expandExceptionLogs=false, useTraceId128Bit=false)\r\n08:49:08,081 INFO  [org.jipijapa] (MSC service thread 1-4) JIPIORMV6020260: Second level cache enabled for itcmedbr.war#itcmedbr_PU\r\n08:49:08,251 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 245) WFLYJPA0010: Starting Persistence Unit (phase 2 of 2) Service &#39;itcmedbr.war#itcmedbr_PU&#39;\r\n08:49:08,266 INFO  [SQL dialect] (ServerService Thread Pool -- 245) HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\r\n08:49:08,278 INFO  [org.hibernate.envers.boot.internal.EnversServiceImpl] (ServerService Thread Pool -- 245) Envers integration enabled? : true\r\n08:49:10,084 INFO  [jakarta.enterprise.resource.webcontainer.faces.config] (ServerService Thread Pool -- 286) Inicializando Mojarra 4.0.0.SP01 para o contexto &#39;/itcmedbr&#39;\r\n08:49:11,832 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 286) WFLYUT0021: Registered web context: &#39;/itcmedbr&#39; for server &#39;default-server&#39;\r\n08:49:11,974 INFO  [org.jboss.as.repository] (External Management Request Threads -- 1) WFLYDR0002: Content removed from location C:\\Users\\Ilo Gabriel\\eclipse-workspace\\wildfly-27.0.1.Final\\standalone\\data\\content\\ac\\a7e4b6ad429643a5813552677f49ab30f6fdb9\\content\r\n\r\n```\r\nI appreciate any assistance.\r\nThanks and best regards.","title":"WFLYCTL0412: Required services that are not installed","body":"<p>I am trying to deploy my application after change my persistence.xml but I am receiving errors relative to my persistence.</p>\n<p>I do the test connection to my MySQL DB in HAL Management Console and the test is made as success.</p>\n<p>persistence:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;2.1&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot; \n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence\n                                 http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\n  &lt;persistence-unit name=&quot;itcmedbr_PU&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n    &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n    &lt;jta-data-source&gt;java:MySqlDS&lt;/jta-data-source&gt;\n    &lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;\n    &lt;properties&gt;\n        &lt;property name=&quot;jakarta.persistence.jdbc.driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;\n        &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://localhost:3306/db_medical?zeroDateTimeBehavior=CONVERT_TO_NULL&quot;/&gt;\n        &lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;root&quot;/&gt;\n        &lt;property name=&quot;jakarta.persistence.jdbc..password&quot; value=&quot;root&quot;/&gt;\n      &lt;!-- Configuraes especficas do Hibernate --&gt;\n        &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQLDialect&quot;/&gt;\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot;/&gt;\n        &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot;/&gt;\n    &lt;/properties&gt;\n  &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>definition of datasource and driver in standalone:</p>\n<pre><code>&lt;datasource jndi-name=&quot;java:jboss/MySqlDS&quot; pool-name=&quot;MySqlDS&quot;&gt;\n                    &lt;connection-url&gt;jdbc:mysql://localhost:3306/db_medical&lt;/connection-url&gt;\n                    &lt;driver-class&gt;com.mysql.cj.jdbc.Driver&lt;/driver-class&gt;\n                    &lt;driver&gt;mysql&lt;/driver&gt;\n                    &lt;security&gt;\n                        &lt;user-name&gt;root&lt;/user-name&gt;\n                        &lt;password&gt;root&lt;/password&gt;\n                    &lt;/security&gt;\n                    &lt;validation&gt;\n                        &lt;valid-connection-checker class-name=&quot;org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLValidConnectionChecker&quot;/&gt;\n                        &lt;validate-on-match&gt;true&lt;/validate-on-match&gt;\n                        &lt;background-validation&gt;false&lt;/background-validation&gt;\n                        &lt;exception-sorter class-name=&quot;org.jboss.jca.adapters.jdbc.extensions.mysql.MySQLExceptionSorter&quot;/&gt;\n                    &lt;/validation&gt;\n                &lt;/datasource&gt; \n\n&lt;driver name=&quot;mysql&quot; module=&quot;com.mysql&quot;&gt;\n                        &lt;driver-class&gt;com.mysql.cj.jdbc.Driver&lt;/driver-class&gt;\n                        &lt;xa-datasource-class&gt;com.mysql.cj.jdbc.MysqlXADataSource&lt;/xa-datasource-class&gt;\n                    &lt;/driver&gt;\n</code></pre>\n<p>error log:</p>\n<pre><code>08:48:34,097 INFO  [org.jboss.as.repository] (External Management Request Threads -- 1) WFLYDR0001: Content added at location C:\\Users\\Ilo Gabriel\\eclipse-workspace\\wildfly-27.0.1.Final\\standalone\\data\\content\\ac\\a7e4b6ad429643a5813552677f49ab30f6fdb9\\content\n08:48:34,188 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 100) WFLYUT0022: Unregistered web context: '/itcmedbr' from server 'default-server'\n08:48:34,370 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 218) WFLYJPA0011: Stopping Persistence Unit (phase 2 of 2) Service 'itcmedbr.war#itcmedbr_PU'\n08:48:34,393 INFO  [org.hibernate.orm.beans] (ServerService Thread Pool -- 218) HHH10005004: Stopping BeanContainer : org.hibernate.resource.beans.container.internal.CdiBeanContainerExtendedAccessImpl@5a4ec8bd\n08:48:34,408 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 218) WFLYJPA0011: Stopping Persistence Unit (phase 1 of 2) Service 'itcmedbr.war#itcmedbr_PU'\n08:48:35,232 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-7) WFLYSRV0028: Stopped deployment itcmedbr.war (runtime-name: itcmedbr.war) in 1116ms\n08:48:35,254 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) WFLYSRV0027: Starting deployment of &quot;itcmedbr.war&quot; (runtime-name: &quot;itcmedbr.war&quot;)\n08:48:48,146 INFO  [org.jboss.as.jpa] (MSC service thread 1-7) WFLYJPA0002: Read persistence.xml for itcmedbr_PU\n08:48:48,840 INFO  [org.jipijapa] (MSC service thread 1-6) JIPIORMV6020260: Second level cache enabled for itcmedbr.war#itcmedbr_PU\n08:48:48,880 INFO  [org.infinispan.CONTAINER] (ServerService Thread Pool -- 218) ISPN000556: Starting user marshaller 'org.wildfly.clustering.infinispan.marshalling.jboss.JBossMarshaller'\n08:48:49,127 INFO  [org.jboss.weld.deployer] (MSC service thread 1-6) WFLYWELD0003: Processing weld deployment itcmedbr.war\n08:48:49,502 WARN  [org.wildfly.extension.microprofile.opentracing] (MSC service thread 1-6) WFLYTRACEXT0012: No Jaeger endpoint or sender-binding configured. Installing a no-op sender\n08:48:49,507 INFO  [io.jaegertracing.internal.JaegerTracer] (MSC service thread 1-6) No shutdown hook registered: Please call close() manually on application shutdown.\n08:48:49,509 INFO  [org.wildfly.microprofile.opentracing.smallrye] (MSC service thread 1-6) WFLYTRAC0001: Tracer initialized: JaegerTracer(version=Java-1.6.0, serviceName=itcmedbr.war, reporter=RemoteReporter(sender=NoopSender(), closeEnqueueTimeout=1000), sampler=ConstSampler(decision=true, tags={sampler.type=const, sampler.param=true}), tags={hostname=DESKTOP-MOJECP9, jaeger.version=Java-1.6.0, ip=192.168.100.185}, zipkinSharedRpcSpan=false, expandExceptionLogs=false, useTraceId128Bit=false)\n08:48:49,723 INFO  [org.jipijapa] (MSC service thread 1-5) JIPIORMV6020260: Second level cache enabled for itcmedbr.war#itcmedbr_PU\n08:48:49,949 ERROR [org.jboss.as.controller.management-operation] (External Management Request Threads -- 1) WFLYCTL0013: Operation (&quot;full-replace-deployment&quot;) failed - address: ([]) - failure description: {\n    &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.naming.context.java.jboss.java:MySqlDS&quot;],\n    &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; [\n        &quot;jboss.persistenceunit.\\&quot;itcmedbr.war#itcmedbr_PU\\&quot;.__FIRST_PHASE__ is missing [jboss.naming.context.java.jboss.java:MySqlDS]&quot;,\n        &quot;jboss.persistenceunit.\\&quot;itcmedbr.war#itcmedbr_PU\\&quot; is missing [jboss.naming.context.java.jboss.java:MySqlDS]&quot;\n    ]\n}\n08:48:49,951 ERROR [org.jboss.as.controller.management-operation] (External Management Request Threads -- 1) WFLYCTL0013: Operation (&quot;full-replace-deployment&quot;) failed - address: ([]) - failure description: {\n    &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.naming.context.java.jboss.java:MySqlDS&quot;],\n    &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; [\n        &quot;jboss.persistenceunit.\\&quot;itcmedbr.war#itcmedbr_PU\\&quot;.__FIRST_PHASE__ is missing [jboss.naming.context.java.jboss.java:MySqlDS]&quot;,\n        &quot;jboss.persistenceunit.\\&quot;itcmedbr.war#itcmedbr_PU\\&quot; is missing [jboss.naming.context.java.jboss.java:MySqlDS]&quot;\n    ]\n}\n08:48:50,598 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) WFLYSRV0028: Stopped deployment itcmedbr.war (runtime-name: itcmedbr.war) in 645ms\n08:48:50,600 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) WFLYSRV0027: Starting deployment of &quot;itcmedbr.war&quot; (runtime-name: &quot;itcmedbr.war&quot;)\n08:48:50,600 ERROR [org.jboss.as.server] (External Management Request Threads -- 1) WFLYSRV0014: Replacement of deployment &quot;itcmedbr.war&quot; by deployment &quot;itcmedbr.war&quot; was rolled back with the following failure message: \n{\n    &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.naming.context.java.jboss.java:MySqlDS&quot;],\n    &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; [\n        &quot;jboss.persistenceunit.\\&quot;itcmedbr.war#itcmedbr_PU\\&quot;.__FIRST_PHASE__ is missing [jboss.naming.context.java.jboss.java:MySqlDS]&quot;,\n        &quot;jboss.persistenceunit.\\&quot;itcmedbr.war#itcmedbr_PU\\&quot; is missing [jboss.naming.context.java.jboss.java:MySqlDS]&quot;\n    ]\n}\n08:49:04,360 INFO  [org.jboss.as.jpa] (MSC service thread 1-1) WFLYJPA0002: Read persistence.xml for itcmedbr_PU\n08:49:05,174 INFO  [org.jipijapa] (MSC service thread 1-6) JIPIORMV6020260: Second level cache enabled for itcmedbr.war#itcmedbr_PU\n08:49:05,210 INFO  [org.infinispan.CONTAINER] (ServerService Thread Pool -- 218) ISPN000556: Starting user marshaller 'org.wildfly.clustering.infinispan.marshalling.jboss.JBossMarshaller'\n08:49:05,266 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 245) WFLYJPA0010: Starting Persistence Unit (phase 1 of 2) Service 'itcmedbr.war#itcmedbr_PU'\n08:49:05,268 INFO  [org.hibernate.jpa.internal.util.LogHelper] (ServerService Thread Pool -- 245) HHH000204: Processing PersistenceUnitInfo [name: itcmedbr_PU]\n08:49:05,295 WARN  [org.hibernate.orm.deprecation] (ServerService Thread Pool -- 245) HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead\n08:49:07,622 INFO  [org.jboss.weld.deployer] (MSC service thread 1-8) WFLYWELD0003: Processing weld deployment itcmedbr.war\n08:49:07,922 WARN  [org.wildfly.extension.microprofile.opentracing] (MSC service thread 1-8) WFLYTRACEXT0012: No Jaeger endpoint or sender-binding configured. Installing a no-op sender\n08:49:07,931 INFO  [io.jaegertracing.internal.JaegerTracer] (MSC service thread 1-8) No shutdown hook registered: Please call close() manually on application shutdown.\n08:49:07,932 INFO  [org.wildfly.microprofile.opentracing.smallrye] (MSC service thread 1-8) WFLYTRAC0001: Tracer initialized: JaegerTracer(version=Java-1.6.0, serviceName=itcmedbr.war, reporter=RemoteReporter(sender=NoopSender(), closeEnqueueTimeout=1000), sampler=ConstSampler(decision=true, tags={sampler.type=const, sampler.param=true}), tags={hostname=DESKTOP-MOJECP9, jaeger.version=Java-1.6.0, ip=192.168.100.185}, zipkinSharedRpcSpan=false, expandExceptionLogs=false, useTraceId128Bit=false)\n08:49:08,081 INFO  [org.jipijapa] (MSC service thread 1-4) JIPIORMV6020260: Second level cache enabled for itcmedbr.war#itcmedbr_PU\n08:49:08,251 INFO  [org.jboss.as.jpa] (ServerService Thread Pool -- 245) WFLYJPA0010: Starting Persistence Unit (phase 2 of 2) Service 'itcmedbr.war#itcmedbr_PU'\n08:49:08,266 INFO  [SQL dialect] (ServerService Thread Pool -- 245) HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\n08:49:08,278 INFO  [org.hibernate.envers.boot.internal.EnversServiceImpl] (ServerService Thread Pool -- 245) Envers integration enabled? : true\n08:49:10,084 INFO  [jakarta.enterprise.resource.webcontainer.faces.config] (ServerService Thread Pool -- 286) Inicializando Mojarra 4.0.0.SP01 para o contexto '/itcmedbr'\n08:49:11,832 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 286) WFLYUT0021: Registered web context: '/itcmedbr' for server 'default-server'\n08:49:11,974 INFO  [org.jboss.as.repository] (External Management Request Threads -- 1) WFLYDR0002: Content removed from location C:\\Users\\Ilo Gabriel\\eclipse-workspace\\wildfly-27.0.1.Final\\standalone\\data\\content\\ac\\a7e4b6ad429643a5813552677f49ab30f6fdb9\\content\n\n</code></pre>\n<p>I appreciate any assistance.\nThanks and best regards.</p>\n"},{"tags":["java","tensorflow","opencv","deep-learning","caffe"],"comments":[{"owner":{"account_id":3072614,"reputation":12296,"user_id":2602877,"display_name":"Christoph Rackwitz"},"score":0,"creation_date":1677019183,"post_id":75525013,"comment_id":133254095,"body_markdown":"related: https://forum.opencv.org/t/vector-subscript-out-of-range-error-in-java/12033 yes I realize this could be a tough issue to track down. -- note that &quot;dnn&quot; stands for &quot;dotnetnuke&quot;, a comparatively lesser known framework that has nothing to do with deep neural networks. it&#39;s a common mistake to apply that tag by simply typing &quot;dnn&quot;","body":"related: <a href=\"https://forum.opencv.org/t/vector-subscript-out-of-range-error-in-java/12033\" rel=\"nofollow noreferrer\">forum.opencv.org/t/vector-subscript-out-of-range-error-in-ja&zwnj;&#8203;va/&hellip;</a> yes I realize this could be a tough issue to track down. -- note that &quot;dnn&quot; stands for &quot;dotnetnuke&quot;, a comparatively lesser known framework that has nothing to do with deep neural networks. it&#39;s a common mistake to apply that tag by simply typing &quot;dnn&quot;"},{"owner":{"account_id":11668735,"reputation":23,"user_id":8544589,"display_name":"Tom C"},"score":0,"creation_date":1677267930,"post_id":75525013,"comment_id":133310938,"body_markdown":"Any sugestions?","body":"Any sugestions?"},{"owner":{"account_id":3072614,"reputation":12296,"user_id":2602877,"display_name":"Christoph Rackwitz"},"score":0,"creation_date":1677275035,"post_id":75525013,"comment_id":133312521,"body_markdown":"yes. try removing all the java from the problem. reproduce this with plain C++. then more people could be willing to debug this. or repro it from the python bindings. they&#39;re generally beyond suspicion. generally, [ask] and [mre]. debugging = &quot;clearing rooms&quot; until you have cornered the problem.","body":"yes. try removing all the java from the problem. reproduce this with plain C++. then more people could be willing to debug this. or repro it from the python bindings. they&#39;re generally beyond suspicion. generally, <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. debugging = &quot;clearing rooms&quot; until you have cornered the problem."},{"owner":{"account_id":11668735,"reputation":23,"user_id":8544589,"display_name":"Tom C"},"score":0,"creation_date":1677425824,"post_id":75525013,"comment_id":133331226,"body_markdown":"This might been a wierd one.\n\nI ran the same models in python and they worked. There appears to be a problem with the faceNet TensorFlow model in opencv 4.7.0 in java jdk 18.\n\nI then replaced the model with another 8bit onnx one and it ran, but Im having a diffrent problem with my code, that Im now debugging.","body":"This might been a wierd one.  I ran the same models in python and they worked. There appears to be a problem with the faceNet TensorFlow model in opencv 4.7.0 in java jdk 18.  I then replaced the model with another 8bit onnx one and it ran, but Im having a diffrent problem with my code, that Im now debugging."}],"answers":[{"tags":[],"owner":{"account_id":28941387,"reputation":11,"user_id":22167873,"display_name":"Mliebig"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698158331,"creation_date":1698158331,"answer_id":77353059,"question_id":75525013,"body_markdown":"For what its worth: I ran into this with version 4.7.0-0. Going back to 4.5.5.-1 fixed it for me.","title":"OpenCV Vector Subscript out of range error in java","body":"<p>For what its worth: I ran into this with version 4.7.0-0. Going back to 4.5.5.-1 fixed it for me.</p>\n"}],"owner":{"account_id":11668735,"reputation":23,"user_id":8544589,"display_name":"Tom C"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698158331,"creation_date":1677007424,"question_id":75525013,"body_markdown":"I&#39;m trying to write a AgeGender Guessing program in Java with OpenCV.\r\nI&#39;m having problems with the DNN running to recognise faces.\r\nI have started adding code to debug my program.\r\n\r\n```\r\npackage AgeGenderCV;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport org.opencv.core.Core;\r\nimport org.opencv.core.Point;\r\nimport org.opencv.core.Mat;\r\nimport org.opencv.core.Rect;\r\nimport org.opencv.core.Scalar;\r\nimport org.opencv.core.Size;\r\nimport org.opencv.dnn.Dnn;\r\nimport org.opencv.dnn.Net;\r\nimport org.opencv.imgcodecs.Imgcodecs;\r\nimport org.opencv.imgproc.Imgproc;\r\nimport org.opencv.videoio.VideoCapture;\r\n\r\npublic class AgeGenderCV {\r\n    private static final String[] GENDER_LIST = {&quot;Male&quot;, &quot;Female&quot;};\r\n    private static final String[] AGE_LIST = {&quot;(0-2)&quot;, &quot;(4-6)&quot;, &quot;(8-12)&quot;, &quot;(15-20)&quot;, &quot;(25-32)&quot;, &quot;(38-43)&quot;, &quot;(48-53)&quot;, &quot;(60-100)&quot;};\r\n    private static final double[] MODEL_MEAN_VALUES = {78.4263377603, 87.7689143744, 114.895847746};\r\n    private static final double CONFIDENCE_THRESHOLD = 0.7;\r\n\r\n    public void ProcessImage(){\r\n        // Load networks\r\n        Net faceNet = Dnn.readNetFromTensorflow(&quot;opencv_face_detector_uint8.pb&quot;, &quot;opencv_face_detector.pbtxt&quot;);\r\n        Net ageNet = Dnn.readNetFromCaffe(&quot;age_deploy.prototxt&quot;, &quot;age_net.caffemodel&quot;);\r\n        Net genderNet = Dnn.readNetFromCaffe(&quot;gender_deploy.prototxt&quot;, &quot;gender_net.caffemodel&quot;);\r\n        \r\n        \r\n        // Open a video file or an image file or a camera stream\r\n        VideoCapture cap;\r\n        //if (args.length &gt; 0) {\r\n        //    cap = new VideoCapture(args[0]);\r\n        //} else {\r\n            cap = new VideoCapture(0);\r\n        //}\r\n\r\n        while (true) {\r\n            // Read frame\r\n            Mat frame = new Mat();\r\n            cap.read(frame);\r\n            \r\n            // Get face bounding boxes\r\n            Mat frameFace = frame.clone();\r\n            //Imgcodecs.imwrite(&quot;frame.jpg&quot;, frameFace);\r\n            \r\n            List&lt;Rect&gt; bboxes = new ArrayList&lt;&gt;();\r\n            Size size = new Size(300,300);\r\n            System.out.println(&quot;Size : &quot;+size);\r\n            \r\n            Scalar scalar = new Scalar(104, 117, 123);\r\n            System.out.println(&quot;Scalar : &quot;+scalar);\r\n            \r\n            Mat blob = Dnn.blobFromImage(frameFace, 1.0, size, scalar, false, false);\r\n            System.out.println(&quot;blob : &quot;+blob);\r\n            \r\n            faceNet.setInput(blob);\r\n            System.out.println(&quot;FaceNet : &quot;+faceNet);\r\n            \r\n            Mat detections = faceNet.forward();\r\n            System.out.println(&quot;detections : &quot;+detections);\r\n            \r\n            for (int i = 0; i &lt; detections.size().height; i++) {\r\n                System.out.println(&quot;i : &quot;+i);\r\n                //double confidence = detections.get(0, 0, i, 2)[0];\r\n                double confidence;\r\n                confidence = detections.get(i, 2)[0];\r\n                if (confidence &gt; CONFIDENCE_THRESHOLD) {\r\n                    int x1 = (int) (detections.get(i, 3)[0] * frame.cols());\r\n                    int y1 = (int) (detections.get(i, 4)[0] * frame.rows());\r\n                    int x2 = (int) (detections.get(i, 5)[0] * frame.cols());\r\n                    int y2 = (int) (detections.get(i, 6)[0] * frame.rows());\r\n                    bboxes.add(new Rect(x1, y1, x2 - x1, y2 - y1));\r\n                    Imgproc.rectangle(frameFace, new org.opencv.core.Point(x1, y1), new org.opencv.core.Point(x2, y2), new org.opencv.core.Scalar(0, 255, 0), (int) Math.round(frame.rows() / 150), 8, 0);\r\n                }\r\n            }\r\n\r\n\r\n        if (bboxes.isEmpty()) {\r\n            System.out.println(&quot;No face Detected, Checking next frame&quot;);\r\n            continue;\r\n        }\r\n\r\n        for (Rect bbox : bboxes) {\r\n            Mat face = new Mat(frame, bbox);\r\n            Size sizeb = new Size(227,227);\r\n            Scalar scalarb = new Scalar(MODEL_MEAN_VALUES);\r\n            blob = Dnn.blobFromImage(face, 1.0, sizeb, scalarb, false);\r\n            genderNet.setInput(blob);\r\n            Mat genderPreds = genderNet.forward();\r\n            String gender = GENDER_LIST[(int) genderPreds.get(0, 0)[0]];\r\n            //System.out.println(&quot;Gender Output : &quot; + genderPreds);\r\n            System.out.println(&quot;Gender : &quot; + gender + &quot;, conf = &quot; + genderPreds.get(0, 0)[0]);\r\n\r\n            ageNet.setInput(blob);\r\n            Mat agePreds = ageNet.forward();\r\n            agePreds = agePreds.reshape(1, 1); // reshape to 2D matrix with one row\r\n            //Point maxLoc = new Point(); // !!! not assiged !!!\r\n            //Core.minMaxLoc(agePreds);\r\n            //int ageIdx = (int) maxLoc.x; // !!! uninitialized !!!\r\n             Core.MinMaxLocResult mm = Core.minMaxLoc(agePreds);\r\n             int ageIdx = (int) mm.maxLoc.x;  \r\n\r\n            //Imgcodecs.imwrite(&quot;age-gender-out-&quot;+args[0]+&quot;.jpg&quot;, frameFace);\r\n            //Imgcodecs.imwrite(&quot;age-gender-out-.jpg&quot;, frameFace);\r\n            System.out.println(&quot;Age : &quot; + AGE_LIST[ageIdx] + &quot;, conf = &quot; + agePreds.get(0, ageIdx)[0]);\r\n        }\r\n        cap.release();\r\n        }\r\n    }\r\n    \r\n    public static void main(String args[])\r\n    {\r\n        System.loadLibrary(Core.NATIVE_LIBRARY_NAME);\r\n        System.loadLibrary(&quot;opencv_java470&quot;);\r\n        \r\n        AgeGenderCV example = new AgeGenderCV();\r\n        example.ProcessImage();\r\n    }\r\n}\r\n```\r\n\r\nOutput - AgeGenderCV (run)\r\nrun:\r\n[ INFO:0@0.193] global tf_importer.cpp:3014 cv::dnn::dnn4_v20221220::`anonymous-namespace&#39;::TFImporter::populateNet DNN/TF: parsing model (N/A version info). Number of nodes = 570\r\n[ INFO:0@0.193] global tf_importer.cpp:3021 cv::dnn::dnn4_v20221220::`anonymous-namespace&#39;::TFImporter::populateNet DNN/TF: parsing config (N/A version info). Number of nodes = 145\r\nAttempting to upgrade input file specified using deprecated V1LayerParameter: age_deploy.prototxt\r\nSuccessfully upgraded file specified using deprecated V1LayerParameter\r\nAttempting to upgrade input file specified using deprecated V1LayerParameter: age_net.caffemodel\r\nSuccessfully upgraded file specified using deprecated V1LayerParameter\r\nAttempting to upgrade input file specified using deprecated V1LayerParameter: gender_deploy.prototxt\r\nSuccessfully upgraded file specified using deprecated V1LayerParameter\r\nAttempting to upgrade input file specified using deprecated V1LayerParameter: gender_net.caffemodel\r\nSuccessfully upgraded file specified using deprecated V1LayerParameter\r\nSize : 300x300\r\nScalar : [104.0, 117.0, 123.0, 0.0]\r\nblob : Mat [ 1*3*300*300*CV_32FC1, isCont=true, isSubmat=false, nativeObj=0x1ef8ecf6270, dataAddr=0x1ef9a76c080 ]\r\nFaceNet : org.opencv.dnn.Net@b81eda8\r\nC:\\Users\\cam30\\AppData\\Local\\NetBeans\\Cache\\16\\executor-snippets\\run.xml:111: The following error occurred while executing this line:\r\nC:\\Users\\cam30\\AppData\\Local\\NetBeans\\Cache\\16\\executor-snippets\\run.xml:68: Java returned: -2147483645\r\nBUILD FAILED (total time: 7 seconds)\r\n\r\n[![Vector subscript out of range Error Message][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DXEh9.png","title":"OpenCV Vector Subscript out of range error in java","body":"<p>I'm trying to write a AgeGender Guessing program in Java with OpenCV.\nI'm having problems with the DNN running to recognise faces.\nI have started adding code to debug my program.</p>\n<pre><code>package AgeGenderCV;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.opencv.core.Core;\nimport org.opencv.core.Point;\nimport org.opencv.core.Mat;\nimport org.opencv.core.Rect;\nimport org.opencv.core.Scalar;\nimport org.opencv.core.Size;\nimport org.opencv.dnn.Dnn;\nimport org.opencv.dnn.Net;\nimport org.opencv.imgcodecs.Imgcodecs;\nimport org.opencv.imgproc.Imgproc;\nimport org.opencv.videoio.VideoCapture;\n\npublic class AgeGenderCV {\n    private static final String[] GENDER_LIST = {&quot;Male&quot;, &quot;Female&quot;};\n    private static final String[] AGE_LIST = {&quot;(0-2)&quot;, &quot;(4-6)&quot;, &quot;(8-12)&quot;, &quot;(15-20)&quot;, &quot;(25-32)&quot;, &quot;(38-43)&quot;, &quot;(48-53)&quot;, &quot;(60-100)&quot;};\n    private static final double[] MODEL_MEAN_VALUES = {78.4263377603, 87.7689143744, 114.895847746};\n    private static final double CONFIDENCE_THRESHOLD = 0.7;\n\n    public void ProcessImage(){\n        // Load networks\n        Net faceNet = Dnn.readNetFromTensorflow(&quot;opencv_face_detector_uint8.pb&quot;, &quot;opencv_face_detector.pbtxt&quot;);\n        Net ageNet = Dnn.readNetFromCaffe(&quot;age_deploy.prototxt&quot;, &quot;age_net.caffemodel&quot;);\n        Net genderNet = Dnn.readNetFromCaffe(&quot;gender_deploy.prototxt&quot;, &quot;gender_net.caffemodel&quot;);\n        \n        \n        // Open a video file or an image file or a camera stream\n        VideoCapture cap;\n        //if (args.length &gt; 0) {\n        //    cap = new VideoCapture(args[0]);\n        //} else {\n            cap = new VideoCapture(0);\n        //}\n\n        while (true) {\n            // Read frame\n            Mat frame = new Mat();\n            cap.read(frame);\n            \n            // Get face bounding boxes\n            Mat frameFace = frame.clone();\n            //Imgcodecs.imwrite(&quot;frame.jpg&quot;, frameFace);\n            \n            List&lt;Rect&gt; bboxes = new ArrayList&lt;&gt;();\n            Size size = new Size(300,300);\n            System.out.println(&quot;Size : &quot;+size);\n            \n            Scalar scalar = new Scalar(104, 117, 123);\n            System.out.println(&quot;Scalar : &quot;+scalar);\n            \n            Mat blob = Dnn.blobFromImage(frameFace, 1.0, size, scalar, false, false);\n            System.out.println(&quot;blob : &quot;+blob);\n            \n            faceNet.setInput(blob);\n            System.out.println(&quot;FaceNet : &quot;+faceNet);\n            \n            Mat detections = faceNet.forward();\n            System.out.println(&quot;detections : &quot;+detections);\n            \n            for (int i = 0; i &lt; detections.size().height; i++) {\n                System.out.println(&quot;i : &quot;+i);\n                //double confidence = detections.get(0, 0, i, 2)[0];\n                double confidence;\n                confidence = detections.get(i, 2)[0];\n                if (confidence &gt; CONFIDENCE_THRESHOLD) {\n                    int x1 = (int) (detections.get(i, 3)[0] * frame.cols());\n                    int y1 = (int) (detections.get(i, 4)[0] * frame.rows());\n                    int x2 = (int) (detections.get(i, 5)[0] * frame.cols());\n                    int y2 = (int) (detections.get(i, 6)[0] * frame.rows());\n                    bboxes.add(new Rect(x1, y1, x2 - x1, y2 - y1));\n                    Imgproc.rectangle(frameFace, new org.opencv.core.Point(x1, y1), new org.opencv.core.Point(x2, y2), new org.opencv.core.Scalar(0, 255, 0), (int) Math.round(frame.rows() / 150), 8, 0);\n                }\n            }\n\n\n        if (bboxes.isEmpty()) {\n            System.out.println(&quot;No face Detected, Checking next frame&quot;);\n            continue;\n        }\n\n        for (Rect bbox : bboxes) {\n            Mat face = new Mat(frame, bbox);\n            Size sizeb = new Size(227,227);\n            Scalar scalarb = new Scalar(MODEL_MEAN_VALUES);\n            blob = Dnn.blobFromImage(face, 1.0, sizeb, scalarb, false);\n            genderNet.setInput(blob);\n            Mat genderPreds = genderNet.forward();\n            String gender = GENDER_LIST[(int) genderPreds.get(0, 0)[0]];\n            //System.out.println(&quot;Gender Output : &quot; + genderPreds);\n            System.out.println(&quot;Gender : &quot; + gender + &quot;, conf = &quot; + genderPreds.get(0, 0)[0]);\n\n            ageNet.setInput(blob);\n            Mat agePreds = ageNet.forward();\n            agePreds = agePreds.reshape(1, 1); // reshape to 2D matrix with one row\n            //Point maxLoc = new Point(); // !!! not assiged !!!\n            //Core.minMaxLoc(agePreds);\n            //int ageIdx = (int) maxLoc.x; // !!! uninitialized !!!\n             Core.MinMaxLocResult mm = Core.minMaxLoc(agePreds);\n             int ageIdx = (int) mm.maxLoc.x;  \n\n            //Imgcodecs.imwrite(&quot;age-gender-out-&quot;+args[0]+&quot;.jpg&quot;, frameFace);\n            //Imgcodecs.imwrite(&quot;age-gender-out-.jpg&quot;, frameFace);\n            System.out.println(&quot;Age : &quot; + AGE_LIST[ageIdx] + &quot;, conf = &quot; + agePreds.get(0, ageIdx)[0]);\n        }\n        cap.release();\n        }\n    }\n    \n    public static void main(String args[])\n    {\n        System.loadLibrary(Core.NATIVE_LIBRARY_NAME);\n        System.loadLibrary(&quot;opencv_java470&quot;);\n        \n        AgeGenderCV example = new AgeGenderCV();\n        example.ProcessImage();\n    }\n}\n</code></pre>\n<p>Output - AgeGenderCV (run)\nrun:\n[ INFO:0@0.193] global tf_importer.cpp:3014 cv::dnn::dnn4_v20221220::<code>anonymous-namespace'::TFImporter::populateNet DNN/TF: parsing model (N/A version info). Number of nodes = 570 [ INFO:0@0.193] global tf_importer.cpp:3021 cv::dnn::dnn4_v20221220::</code>anonymous-namespace'::TFImporter::populateNet DNN/TF: parsing config (N/A version info). Number of nodes = 145\nAttempting to upgrade input file specified using deprecated V1LayerParameter: age_deploy.prototxt\nSuccessfully upgraded file specified using deprecated V1LayerParameter\nAttempting to upgrade input file specified using deprecated V1LayerParameter: age_net.caffemodel\nSuccessfully upgraded file specified using deprecated V1LayerParameter\nAttempting to upgrade input file specified using deprecated V1LayerParameter: gender_deploy.prototxt\nSuccessfully upgraded file specified using deprecated V1LayerParameter\nAttempting to upgrade input file specified using deprecated V1LayerParameter: gender_net.caffemodel\nSuccessfully upgraded file specified using deprecated V1LayerParameter\nSize : 300x300\nScalar : [104.0, 117.0, 123.0, 0.0]\nblob : Mat [ 1<em>3</em>300<em>300</em>CV_32FC1, isCont=true, isSubmat=false, nativeObj=0x1ef8ecf6270, dataAddr=0x1ef9a76c080 ]\nFaceNet : org.opencv.dnn.Net@b81eda8\nC:\\Users\\cam30\\AppData\\Local\\NetBeans\\Cache\\16\\executor-snippets\\run.xml:111: The following error occurred while executing this line:\nC:\\Users\\cam30\\AppData\\Local\\NetBeans\\Cache\\16\\executor-snippets\\run.xml:68: Java returned: -2147483645\nBUILD FAILED (total time: 7 seconds)</p>\n<p><a href=\"https://i.stack.imgur.com/DXEh9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DXEh9.png\" alt=\"Vector subscript out of range Error Message\" /></a></p>\n"},{"tags":["java","spring","unit-testing","spring-security","spring-ws"],"answers":[{"tags":[],"owner":{"account_id":14158809,"reputation":1,"user_id":10228687,"display_name":"paffeu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698158264,"creation_date":1698158264,"answer_id":77353051,"question_id":45908069,"body_markdown":"You can use Java Reflection API and change reference of WebServiceTemplate in WebServiceGatewaySupport manually (and mock it using Mockito):\r\n\r\n    WebServiceTemplate webServiceTemplateMock = mock(WebServiceTemplate.class);\r\n\r\n    Field webServiceTemplateRef = client.getClass().getSuperclass().getDeclaredField(&quot;webServiceTemplate&quot;);\r\n    webServiceTemplateRef.setAccessible(true);\r\n    webServiceTemplateRef.set(client, webServiceTemplate);\r\n\r\nNow you are able to mock behavior of the template:\r\n\r\n    Mockito.when(webServiceTemplateMock.marshalSendAndReceive(request, soapActionCallBack)).thenReturn(response);","title":"Unit test for spring ws-client - check if marshalSendAndReceive is being invoked","body":"<p>You can use Java Reflection API and change reference of WebServiceTemplate in WebServiceGatewaySupport manually (and mock it using Mockito):</p>\n<pre><code>WebServiceTemplate webServiceTemplateMock = mock(WebServiceTemplate.class);\n\nField webServiceTemplateRef = client.getClass().getSuperclass().getDeclaredField(&quot;webServiceTemplate&quot;);\nwebServiceTemplateRef.setAccessible(true);\nwebServiceTemplateRef.set(client, webServiceTemplate);\n</code></pre>\n<p>Now you are able to mock behavior of the template:</p>\n<pre><code>Mockito.when(webServiceTemplateMock.marshalSendAndReceive(request, soapActionCallBack)).thenReturn(response);\n</code></pre>\n"}],"owner":{"account_id":2989859,"reputation":101,"user_id":2537643,"accept_rate":33,"display_name":"ray9898"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2255,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1698158264,"creation_date":1503858548,"question_id":45908069,"body_markdown":"my goal is writing a unit test for my `WebServiceClientImpl` class and I want to add a test that checks if `marshalSendAndReceive` is being invoked. I use `Mockito` and `powermockito` framework. I need to use `powermockito` because `WebServiceGatewaySupport.getWebServiceTemplate` is a final method, which `mockito` cant do. \r\n\r\nThis is the class that I want to test.\r\n    \r\n    public class WebServiceClientImpl extends WebServiceGatewaySupport implements\r\n    WebServiceClient {\r\n\r\n    @Override\r\n    public &lt;T&gt; T execute(final Object requestPayload,\r\n                       final Class&lt;T&gt; responseType,\r\n                       final String soapActionCallBack) {\r\n    return (T) getWebServiceTemplate()\r\n                 .marshalSendAndReceive(requestPayload, new \r\n                                        SoapActionCallback(soapActionCallBack));\r\n    }\r\n\r\nThis is my unit test so far.\r\n\r\n    RunWith( PowerMockRunner.class )\r\n    @PowerMockRunnerDelegate( HierarchicalContextRunner.class )\r\n    @PrepareForTest( WebServiceClientImpl.class )\r\n    public class WebServiceClientImplTest {\r\n\r\n    private WebServiceClientImpl webServiceClientImpl = PowerMockito.mock(WebServiceClientImpl.class);\r\n    \r\n    @Mock\r\n    private WebServiceTemplate webServiceTemplate;\r\n\r\n    @Before\r\n    public void before() {\r\n      MockitoAnnotations.initMocks( this );\r\n    }\r\n\r\n    public class Execute {\r\n      Object response = &quot;response&quot;;\r\n      Object request = &quot;request&quot;;\r\n      SoapActionCallback soapActionCallBack = new SoapActionCallback(&quot;soap&quot;);\r\n\r\n      @Before\r\n      public void before() {\r\n\r\n      when( webServiceClientImpl.getWebServiceTemplate() ).thenReturn( webServiceTemplate );\r\n      when( webServiceTemplate.marshalSendAndReceive ( request, soapActionCallBack) ).thenReturn(response);\r\n      response = webServiceClientImpl.execute( request, Object.class, &quot;soapActionCallBack&quot; );\r\n      System.out.println (&quot;RESPONSE &quot; + response );\r\n    }\r\n\r\n\r\n    @Test\r\n    public void marshalSendAndReceiveInvoked() {\r\n      verify( webServiceTemplate ).marshalSendAndReceive( request, soapActionCallBack );\r\n    }\r\n\r\n    @Test\r\n    public void webServiceClientReturnValue() {\r\n      assertEquals( &quot;response&quot;, response );\r\n    }}}\r\n\r\n However the response is still null, even though I have put this in the unit test. \r\n\r\n`when( webServiceTemplate.marshalSendAndReceive ( request, soapActionCallBack) ).thenReturn(response)`\r\n\r\nCan anyone helps with the unit test? Any help will be appreciated - Thank you!","title":"Unit test for spring ws-client - check if marshalSendAndReceive is being invoked","body":"<p>my goal is writing a unit test for my <code>WebServiceClientImpl</code> class and I want to add a test that checks if <code>marshalSendAndReceive</code> is being invoked. I use <code>Mockito</code> and <code>powermockito</code> framework. I need to use <code>powermockito</code> because <code>WebServiceGatewaySupport.getWebServiceTemplate</code> is a final method, which <code>mockito</code> cant do. </p>\n\n<p>This is the class that I want to test.</p>\n\n<pre><code>public class WebServiceClientImpl extends WebServiceGatewaySupport implements\nWebServiceClient {\n\n@Override\npublic &lt;T&gt; T execute(final Object requestPayload,\n                   final Class&lt;T&gt; responseType,\n                   final String soapActionCallBack) {\nreturn (T) getWebServiceTemplate()\n             .marshalSendAndReceive(requestPayload, new \n                                    SoapActionCallback(soapActionCallBack));\n}\n</code></pre>\n\n<p>This is my unit test so far.</p>\n\n<pre><code>RunWith( PowerMockRunner.class )\n@PowerMockRunnerDelegate( HierarchicalContextRunner.class )\n@PrepareForTest( WebServiceClientImpl.class )\npublic class WebServiceClientImplTest {\n\nprivate WebServiceClientImpl webServiceClientImpl = PowerMockito.mock(WebServiceClientImpl.class);\n\n@Mock\nprivate WebServiceTemplate webServiceTemplate;\n\n@Before\npublic void before() {\n  MockitoAnnotations.initMocks( this );\n}\n\npublic class Execute {\n  Object response = \"response\";\n  Object request = \"request\";\n  SoapActionCallback soapActionCallBack = new SoapActionCallback(\"soap\");\n\n  @Before\n  public void before() {\n\n  when( webServiceClientImpl.getWebServiceTemplate() ).thenReturn( webServiceTemplate );\n  when( webServiceTemplate.marshalSendAndReceive ( request, soapActionCallBack) ).thenReturn(response);\n  response = webServiceClientImpl.execute( request, Object.class, \"soapActionCallBack\" );\n  System.out.println (\"RESPONSE \" + response );\n}\n\n\n@Test\npublic void marshalSendAndReceiveInvoked() {\n  verify( webServiceTemplate ).marshalSendAndReceive( request, soapActionCallBack );\n}\n\n@Test\npublic void webServiceClientReturnValue() {\n  assertEquals( \"response\", response );\n}}}\n</code></pre>\n\n<p>However the response is still null, even though I have put this in the unit test. </p>\n\n<p><code>when( webServiceTemplate.marshalSendAndReceive ( request, soapActionCallBack) ).thenReturn(response)</code></p>\n\n<p>Can anyone helps with the unit test? Any help will be appreciated - Thank you!</p>\n"},{"tags":["java","postgresql","spring-boot","datasource"],"comments":[{"owner":{"account_id":10298429,"reputation":307,"user_id":9311987,"display_name":"user699848"},"score":0,"creation_date":1698155555,"post_id":77352678,"comment_id":136367356,"body_markdown":"You need to include database driver jar in your dependencies. If you have included share your dependencies included","body":"You need to include database driver jar in your dependencies. If you have included share your dependencies included"},{"owner":{"account_id":10558786,"reputation":3,"user_id":7779168,"display_name":"Davey"},"score":0,"creation_date":1698155980,"post_id":77352678,"comment_id":136367476,"body_markdown":"You&#39;re right, I should have done that. I&#39;ve edited the post to include that.","body":"You&#39;re right, I should have done that. I&#39;ve edited the post to include that."},{"owner":{"account_id":5569623,"reputation":2403,"user_id":4415502,"accept_rate":76,"display_name":"Mox"},"score":0,"creation_date":1698156504,"post_id":77352678,"comment_id":136367606,"body_markdown":"Instead of embedding links to screenshots, Please paste the code in the question. this will allow others to copy and paste your code to reproduce the issue.","body":"Instead of embedding links to screenshots, Please paste the code in the question. this will allow others to copy and paste your code to reproduce the issue."},{"owner":{"account_id":10558786,"reputation":3,"user_id":7779168,"display_name":"Davey"},"score":0,"creation_date":1698157560,"post_id":77352678,"comment_id":136367838,"body_markdown":"Hey Mox, I&#39;ve done as you suggested","body":"Hey Mox, I&#39;ve done as you suggested"}],"answers":[{"tags":[],"owner":{"account_id":10298429,"reputation":307,"user_id":9311987,"display_name":"user699848"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698156722,"creation_date":1698156722,"answer_id":77352854,"question_id":77352678,"body_markdown":"Include the following property in your properties file \r\n\r\n    spring.datasource.driver-class-name=org.postgresql.Driver\r\n\r\nThis should mostly resolve.\r\n\r\n\r\n","title":"Springboot 3 Factory method &#39;dataSource&#39; threw exception with message: Failed to determine a suitable driver class","body":"<p>Include the following property in your properties file</p>\n<pre><code>spring.datasource.driver-class-name=org.postgresql.Driver\n</code></pre>\n<p>This should mostly resolve.</p>\n"},{"tags":[],"owner":{"account_id":10558786,"reputation":3,"user_id":7779168,"display_name":"Davey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698158133,"creation_date":1698158133,"answer_id":77353041,"question_id":77352678,"body_markdown":"As part of my refactoring, I had added to the pom.xml\r\n\r\n```\r\n&lt;packaging&gt;pom&lt;/packaging&gt;\r\n```\r\n\r\nWhich I had forgotten to remove.\r\n\r\nAfter removing this, it works.","title":"Springboot 3 Factory method &#39;dataSource&#39; threw exception with message: Failed to determine a suitable driver class","body":"<p>As part of my refactoring, I had added to the pom.xml</p>\n<pre><code>&lt;packaging&gt;pom&lt;/packaging&gt;\n</code></pre>\n<p>Which I had forgotten to remove.</p>\n<p>After removing this, it works.</p>\n"}],"owner":{"account_id":10558786,"reputation":3,"user_id":7779168,"display_name":"Davey"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698158133,"creation_date":1698155300,"question_id":77352678,"body_markdown":"I have a springboot 3 application, pretty standard, which has a Controller, a service that is called by the controller and a repository that the service uses to fetch and save data.\r\n\r\nI had configured my application to work with a postgresql DB, and it was actually working quite well. Then I decided to do some refactoring (originally, all logic was in the controller, I introduced the service mentioned above and moved it there). I didn&#39;t change anything to the Application launcher, the application.properties or anything else.\r\n\r\nNow when I try to start I get the following error: \r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nFailed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured.\r\n\r\nReason: Failed to determine a suitable driver class\r\n\r\n\r\nAction:\r\n\r\nConsider the following:\r\n\tIf you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\r\n\tIf you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).\r\n\r\nWhile the actual runtimeException where my debug point occurs says:\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method &#39;dataSourceScriptDatabaseInitializer&#39; parameter 0: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception with message: Failed to determine a suitable driver class\r\n\r\nI found some threads saying to (exclude = DataSourceAutoConfiguration.class) to my SpringBootApplication annotation, but this just results in another error saying UnsatisfiedDependencyException where my Repository is not available for injection into my controller.\r\n\r\nI&#39;ve tried undoing all of my refactoring but still it&#39;s not working, and I&#39;m quite stuck on this.\r\n\r\nApplication: \r\n[Application](https://i.stack.imgur.com/uKXSo.png)\r\n\r\nRepository:\r\n[Repository](https://i.stack.imgur.com/4inSW.png)\r\n\r\nController:\r\n[Controller](https://i.stack.imgur.com/rCNRr.png)\r\n\r\nService:\r\n[Service](https://i.stack.imgur.com/1XIWG.png)\r\n\r\nApplication.properties:\r\n[Properties](https://i.stack.imgur.com/MSQId.png)\r\n\r\npom.xml:\r\n[Pom][1]\r\n\r\nTried excluding DataSourceAutoConfiguration from the SpringBootApplication annotation, but this resulted in the TranslationRepository not being available in my TranslationService.\r\nTried reverting my changes but that didn&#39;t help.\r\nTried adding explicit postgres driver property to application.properties, also didn&#39;t help.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/n5U9o.png\r\n\r\nAs suggested by Mox:\r\n\r\nTranslationApplication:\r\n```\r\npackage com.projectbluegames.tbd;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class TranslationApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(TranslationApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nproperties:\r\n```\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/TBD\r\nspring.datasource.username=postgres\r\nspring.datasource.password=password\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\nspring.datasource.driver-class-name=org.postgresql.Driver\r\n```\r\n\r\nRepository:\r\n```\r\npackage com.projectbluegames.tbd.repository;\r\n\r\nimport org.springframework.data.repository.CrudRepository;\r\n\r\nimport com.projectbluegames.tbd.entities.Translation;\r\n\r\npublic interface TranslationRepository extends CrudRepository&lt;Translation, Integer&gt; {}\r\n\t\r\n```\r\n\r\nController:\r\n```\r\n@RestController\r\npublic class TranslationController {\r\n\r\n\tprivate final ITranslationService translationService;\r\n\t\r\n\tpublic TranslationController(ITranslationService translationService) {\r\n\t\tthis.translationService = translationService;\r\n\t}\r\n\r\n    @PostMapping(&quot;/refresh&quot;)\r\n\tprivate ResponseEntity&lt;String&gt; refreshTranslationCache() {\r\n\t\ttranslationService.refreshTranslationCache();\r\n\t\treturn ResponseEntity.ok(&quot;Translation cache reloaded successfully&quot;);\r\n\t}\r\n}\r\n```\r\n\r\nIService:\r\n```\r\npackage com.projectbluegames.tbd.services;\r\n\r\nimport java.util.List;\r\n\r\nimport com.projectbluegames.tbd.dtos.TranslationDto;\r\n\r\npublic interface ITranslationService {\r\n\t\r\n\tpublic void refreshTranslationCache();\r\n\t\r\n}\r\n```\r\n\r\nService:\r\n```\r\npackage com.projectbluegames.tbd.services;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.stream.Collectors;\r\n\r\nimport com.projectbluegames.tbd.entities.Translation;\r\nimport com.projectbluegames.tbd.repository.TranslationRepository;\r\n\r\npublic class TranslationService implements ITranslationService {\r\n\t\r\n\tprivate final TranslationRepository translationRepository;\r\n\t\r\n\tprivate Map&lt;String, Translation&gt; translationCache = new HashMap&lt;String, Translation&gt;();\r\n\r\n\tpublic TranslationService(TranslationRepository translationRepository) {\r\n\t\tthis.translationRepository = translationRepository;\r\n\t\trefreshTranslationCache();\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void refreshTranslationCache() {\r\n\t\ttranslationCache.clear();\r\n\t\tIterable&lt;Translation&gt; translations = translationRepository.findAll();\r\n\t\ttranslations.forEach(t -&gt; translationCache.put(t.getLanguage() + &quot;_&quot; + t.getKey(), t));\r\n\t}\r\n}\r\n```\r\n\r\nTranslation Entity:\r\n```\r\npackage com.projectbluegames.tbd.entities;\r\n\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\n\r\n@Entity\r\n@Table(name=&quot;translations&quot;)\r\npublic class Translation {\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\tprivate Integer id;\r\n\t\r\n\tprivate String key;\r\n\t\r\n\tprivate String language;\r\n\tprivate String value;\r\n\t\r\n\tprivate Translation() {\t}\r\n\t\r\n\tpublic Translation(String key, String language, String value) {\r\n\t\tthis.key = key;\r\n\t\tthis.language = language;\r\n\t\tthis.value = value;\r\n\t}\r\n\t\r\n\tpublic String getKey() {\r\n\t\treturn key;\r\n\t}\r\n\t\r\n\tpublic String getLanguage() {\r\n\t\treturn language;\r\n\t}\r\n\t\r\n\tpublic String getValue() {\r\n\t\treturn value;\r\n\t}\r\n\t\r\n\tpublic void setValue(String value) {\r\n\t\tthis.value = value;\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\npom:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.4&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.pb&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;core&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;pom&lt;/packaging&gt;\r\n\t&lt;name&gt;tbd&lt;/name&gt;\r\n\t&lt;description&gt;Core&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t  \r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\t\r\n&lt;/project&gt;\r\n```","title":"Springboot 3 Factory method &#39;dataSource&#39; threw exception with message: Failed to determine a suitable driver class","body":"<p>I have a springboot 3 application, pretty standard, which has a Controller, a service that is called by the controller and a repository that the service uses to fetch and save data.</p>\n<p>I had configured my application to work with a postgresql DB, and it was actually working quite well. Then I decided to do some refactoring (originally, all logic was in the controller, I introduced the service mentioned above and moved it there). I didn't change anything to the Application launcher, the application.properties or anything else.</p>\n<p>Now when I try to start I get the following error:</p>\n<hr />\n<p>APPLICATION FAILED TO START</p>\n<hr />\n<p>Description:</p>\n<p>Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.</p>\n<p>Reason: Failed to determine a suitable driver class</p>\n<p>Action:</p>\n<p>Consider the following:\nIf you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\nIf you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).</p>\n<p>While the actual runtimeException where my debug point occurs says:\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class</p>\n<p>I found some threads saying to (exclude = DataSourceAutoConfiguration.class) to my SpringBootApplication annotation, but this just results in another error saying UnsatisfiedDependencyException where my Repository is not available for injection into my controller.</p>\n<p>I've tried undoing all of my refactoring but still it's not working, and I'm quite stuck on this.</p>\n<p>Application:\n<a href=\"https://i.stack.imgur.com/uKXSo.png\" rel=\"nofollow noreferrer\">Application</a></p>\n<p>Repository:\n<a href=\"https://i.stack.imgur.com/4inSW.png\" rel=\"nofollow noreferrer\">Repository</a></p>\n<p>Controller:\n<a href=\"https://i.stack.imgur.com/rCNRr.png\" rel=\"nofollow noreferrer\">Controller</a></p>\n<p>Service:\n<a href=\"https://i.stack.imgur.com/1XIWG.png\" rel=\"nofollow noreferrer\">Service</a></p>\n<p>Application.properties:\n<a href=\"https://i.stack.imgur.com/MSQId.png\" rel=\"nofollow noreferrer\">Properties</a></p>\n<p>pom.xml:\n<a href=\"https://i.stack.imgur.com/n5U9o.png\" rel=\"nofollow noreferrer\">Pom</a></p>\n<p>Tried excluding DataSourceAutoConfiguration from the SpringBootApplication annotation, but this resulted in the TranslationRepository not being available in my TranslationService.\nTried reverting my changes but that didn't help.\nTried adding explicit postgres driver property to application.properties, also didn't help.</p>\n<p>As suggested by Mox:</p>\n<p>TranslationApplication:</p>\n<pre><code>package com.projectbluegames.tbd;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class TranslationApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(TranslationApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>properties:</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://localhost:5432/TBD\nspring.datasource.username=postgres\nspring.datasource.password=password\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\nspring.datasource.driver-class-name=org.postgresql.Driver\n</code></pre>\n<p>Repository:</p>\n<pre><code>package com.projectbluegames.tbd.repository;\n\nimport org.springframework.data.repository.CrudRepository;\n\nimport com.projectbluegames.tbd.entities.Translation;\n\npublic interface TranslationRepository extends CrudRepository&lt;Translation, Integer&gt; {}\n    \n</code></pre>\n<p>Controller:</p>\n<pre><code>@RestController\npublic class TranslationController {\n\n    private final ITranslationService translationService;\n    \n    public TranslationController(ITranslationService translationService) {\n        this.translationService = translationService;\n    }\n\n    @PostMapping(&quot;/refresh&quot;)\n    private ResponseEntity&lt;String&gt; refreshTranslationCache() {\n        translationService.refreshTranslationCache();\n        return ResponseEntity.ok(&quot;Translation cache reloaded successfully&quot;);\n    }\n}\n</code></pre>\n<p>IService:</p>\n<pre><code>package com.projectbluegames.tbd.services;\n\nimport java.util.List;\n\nimport com.projectbluegames.tbd.dtos.TranslationDto;\n\npublic interface ITranslationService {\n    \n    public void refreshTranslationCache();\n    \n}\n</code></pre>\n<p>Service:</p>\n<pre><code>package com.projectbluegames.tbd.services;\n\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\nimport com.projectbluegames.tbd.entities.Translation;\nimport com.projectbluegames.tbd.repository.TranslationRepository;\n\npublic class TranslationService implements ITranslationService {\n    \n    private final TranslationRepository translationRepository;\n    \n    private Map&lt;String, Translation&gt; translationCache = new HashMap&lt;String, Translation&gt;();\n\n    public TranslationService(TranslationRepository translationRepository) {\n        this.translationRepository = translationRepository;\n        refreshTranslationCache();\n    }\n    \n    @Override\n    public void refreshTranslationCache() {\n        translationCache.clear();\n        Iterable&lt;Translation&gt; translations = translationRepository.findAll();\n        translations.forEach(t -&gt; translationCache.put(t.getLanguage() + &quot;_&quot; + t.getKey(), t));\n    }\n}\n</code></pre>\n<p>Translation Entity:</p>\n<pre><code>package com.projectbluegames.tbd.entities;\n\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\n\n@Entity\n@Table(name=&quot;translations&quot;)\npublic class Translation {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Integer id;\n    \n    private String key;\n    \n    private String language;\n    private String value;\n    \n    private Translation() { }\n    \n    public Translation(String key, String language, String value) {\n        this.key = key;\n        this.language = language;\n        this.value = value;\n    }\n    \n    public String getKey() {\n        return key;\n    }\n    \n    public String getLanguage() {\n        return language;\n    }\n    \n    public String getValue() {\n        return value;\n    }\n    \n    public void setValue(String value) {\n        this.value = value;\n    }\n    \n}\n</code></pre>\n<p>pom:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.pb&lt;/groupId&gt;\n    &lt;artifactId&gt;core&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;name&gt;tbd&lt;/name&gt;\n    &lt;description&gt;Core&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n          \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    \n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","websocket","tomcat8"],"answers":[{"tags":[],"owner":{"account_id":475171,"reputation":2001,"user_id":885338,"accept_rate":97,"display_name":"Arikael"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698158096,"creation_date":1698158096,"answer_id":77353034,"question_id":77351981,"body_markdown":"Ok, after some further searching and investigating I found the solution :)\r\n\r\nI don&#39;t need to the two `javax.websocket...` dependencies\r\n\r\nThere are basically two possibilites to add the endpoint\r\n\r\n**With annotations**\r\n1. Create the context like that (in `main`)   \r\n   ```\r\n   var ctx = tomcat.addWebapp(&quot;&quot;, new File(&quot;.&quot;).getAbsolutePath());\r\n   ```\r\n   This will also add support for jsp (but needs additional dependencies, e.g. jasper)\r\n\r\n2. add the ServletContainerInitializer provided by `org.apache.tomcat.embed:tomcat-embed-websocket` (in `main`)\r\n    ```\r\n    ctx.addServletContainerInitializer(new WsSci(), null);\r\n    ```  \r\n\r\n3. annotate the endpoint with `@ServerEndpoint(&quot;/path&quot;)`\r\n\r\nor you can explicitly add the endpoint to the initializer\r\n```\r\nctx.addServletContainerInitializer(new WsSci(), new HashSet&lt;&gt;(List.of(GuacamoleWebSocketTunnelEndpoint.class)));\r\n```\r\n\r\nthen you dont need the annotation\r\n\r\n**without annotations**\r\n1. Create the context like that (in main)\r\n   ```\r\n   var ctx = tomcat.addContext(&quot;&quot;, new File(&quot;.&quot;).getAbsolutePath());\r\n\r\n   Wrapper defaultServlet = ctx.createWrapper();\r\n   defaultServlet.setName(&quot;default&quot;);\r\n   defaultServlet.setServletClass(&quot;org.apache.catalina.servlets.DefaultServlet&quot;);\r\n   defaultServlet.setLoadOnStartup(1);\r\n   ctx.addChild(defaultServlet);\r\n   ctx.addServletMappingDecoded(&quot;/&quot;, &quot;default&quot;);\r\n     ```\r\n   you have to add the default servlet as described [here][1]   \r\n   you won&#39;t get JSP support.\r\n2. add the ServletContainerInitializer provided by `org.apache.tomcat.embed:tomcat-embed-websocket` (in `main`)\r\n    ```\r\n    ctx.addServletContainerInitializer(new WsSci(), null);\r\n    ```  \r\n3. add a listener\r\n   \r\n    ```\r\n    public class Listener implements ServletContextListener {\r\n\r\n       @Override\r\n       public void contextInitialized(ServletContextEvent event) {\r\n         String serverContainerClass = ServerContainer.class.getName();\r\n         ServerContainer container = (ServerContainer)event.getServletContext().getAttribute(serverContainerClass);\r\n         ServerEndpointConfig config =\r\n                ServerEndpointConfig.Builder.create(DummyGuacamoleWebsocketEndpoint.class, &quot;/websocket-tunnel&quot;)\r\n                        .build();\r\n\r\n          try {\r\n            container.addEndpoint(config);\r\n          } catch (DeploymentException e) {\r\n            throw new RuntimeException(e);\r\n          }\r\n       }\r\n\r\n       @Override\r\n       public void contextDestroyed(ServletContextEvent event) {\r\n        // Do stuff during server shutdown.\r\n       }\r\n   }\r\n   ```\r\n\r\n4. register the listener in `main`\r\n\r\n   `ctx.addApplicationListener(&quot;full.name.to.ListenerClass&quot;);`\r\n\r\n  [1]: https://stackoverflow.com/a/6349935/885338","title":"unable to use websocket in embeded tomcat because ServerContainer is null","body":"<p>Ok, after some further searching and investigating I found the solution :)</p>\n<p>I don't need to the two <code>javax.websocket...</code> dependencies</p>\n<p>There are basically two possibilites to add the endpoint</p>\n<p><strong>With annotations</strong></p>\n<ol>\n<li><p>Create the context like that (in <code>main</code>)</p>\n<pre><code>var ctx = tomcat.addWebapp(&quot;&quot;, new File(&quot;.&quot;).getAbsolutePath());\n</code></pre>\n<p>This will also add support for jsp (but needs additional dependencies, e.g. jasper)</p>\n</li>\n<li><p>add the ServletContainerInitializer provided by <code>org.apache.tomcat.embed:tomcat-embed-websocket</code> (in <code>main</code>)</p>\n<pre><code>ctx.addServletContainerInitializer(new WsSci(), null);\n</code></pre>\n</li>\n<li><p>annotate the endpoint with <code>@ServerEndpoint(&quot;/path&quot;)</code></p>\n</li>\n</ol>\n<p>or you can explicitly add the endpoint to the initializer</p>\n<pre><code>ctx.addServletContainerInitializer(new WsSci(), new HashSet&lt;&gt;(List.of(GuacamoleWebSocketTunnelEndpoint.class)));\n</code></pre>\n<p>then you dont need the annotation</p>\n<p><strong>without annotations</strong></p>\n<ol>\n<li><p>Create the context like that (in main)</p>\n<pre><code>var ctx = tomcat.addContext(&quot;&quot;, new File(&quot;.&quot;).getAbsolutePath());\n\nWrapper defaultServlet = ctx.createWrapper();\ndefaultServlet.setName(&quot;default&quot;);\ndefaultServlet.setServletClass(&quot;org.apache.catalina.servlets.DefaultServlet&quot;);\ndefaultServlet.setLoadOnStartup(1);\nctx.addChild(defaultServlet);\nctx.addServletMappingDecoded(&quot;/&quot;, &quot;default&quot;);\n</code></pre>\n<p>you have to add the default servlet as described <a href=\"https://stackoverflow.com/a/6349935/885338\">here</a><br />\nyou won't get JSP support.</p>\n</li>\n<li><p>add the ServletContainerInitializer provided by <code>org.apache.tomcat.embed:tomcat-embed-websocket</code> (in <code>main</code>)</p>\n<pre><code>ctx.addServletContainerInitializer(new WsSci(), null);\n</code></pre>\n</li>\n<li><p>add a listener</p>\n<pre><code>public class Listener implements ServletContextListener {\n\n   @Override\n   public void contextInitialized(ServletContextEvent event) {\n     String serverContainerClass = ServerContainer.class.getName();\n     ServerContainer container = (ServerContainer)event.getServletContext().getAttribute(serverContainerClass);\n     ServerEndpointConfig config =\n            ServerEndpointConfig.Builder.create(DummyGuacamoleWebsocketEndpoint.class, &quot;/websocket-tunnel&quot;)\n                    .build();\n\n      try {\n        container.addEndpoint(config);\n      } catch (DeploymentException e) {\n        throw new RuntimeException(e);\n      }\n   }\n\n   @Override\n   public void contextDestroyed(ServletContextEvent event) {\n    // Do stuff during server shutdown.\n   }\n}\n</code></pre>\n</li>\n<li><p>register the listener in <code>main</code></p>\n<p><code>ctx.addApplicationListener(&quot;full.name.to.ListenerClass&quot;);</code></p>\n</li>\n</ol>\n"}],"owner":{"account_id":475171,"reputation":2001,"user_id":885338,"accept_rate":97,"display_name":"Arikael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77353034,"answer_count":1,"score":0,"last_activity_date":1698158096,"creation_date":1698149862,"question_id":77351981,"body_markdown":"I haven&#39;t used Java for over a decade and know I&#39;m trying to use the embedded tomcat 8.5.95 (stuck with this version because of guacamole-common) together with websocket support.\r\n\r\nTried various ways to get it work, but I&#39;m stuck and I have no idea what it is causing the issues.   \r\nThe problem is that `(ServerContainer)ctx.getAttribute(&quot;javax.websocket.server.ServerContainer&quot;)` is always `null`.   \r\nI know there are a lot of questions here on SO with the same issue, but I tried a lot of them and none seems to work.  \r\nIt doesn&#39;t matter if a call the code above in my `main` or in a `ServletContainerInitializer`\r\n\r\n**main**\r\n```\r\npublic static void main(String[] args) throws Exception {\r\n\r\n        Tomcat tomcat = new Tomcat();\r\n    \r\n        tomcat.setPort(8080);\r\n\t\t// tried tomcat.addWebapp and tomcat.addContext\r\n        var ctx = tomcat.addWebapp(&quot;&quot;, new File(&quot;.&quot;).getAbsolutePath());\r\n        ctx.addServletContainerInitializer(new Init(), null);\r\n        \r\n       // normal http implementation for guacamole\r\n\t\tTomcat.addServlet(ctx, &quot;tunnel&quot;, new DummyGuacamoleTunnelServlet()); \r\n        ctx.addServletMappingDecoded(&quot;/tunnel&quot;, &quot;tunnel&quot;);\r\n        \r\n\t\t// tried this first, but according the internet ;) this should go in a \r\n\r\n//\t\tString serverContainerClass = ServerContainer.class.getName();\r\n//        ServerEndpointConfig config =\r\n//                ServerEndpointConfig.Builder.create(DummyGuacamoleWebsocketEndpoint.class, &quot;/websocket-tunnel&quot;)\r\n//                       .subprotocols(Arrays.asList(new String[]{&quot;guacamole&quot;}))\r\n//                       .build();\r\n//\t\tString serverContainerClass = ServerContainer.class.getName();\r\n//        ServerEndpointConfig config =\r\n//                ServerEndpointConfig.Builder.create(DummyGuacamoleWebsocketEndpoint.class, &quot;/websocket-tunnel&quot;)\r\n//                        .subprotocols(Arrays.asList(new String[]{&quot;guacamole&quot;}))\r\n//                        .build();\r\n//\r\n//        ServerContainer container = (ServerContainer)ctx.getServletContext().getAttribute(serverContainerClass);\r\n//        if (container == null) {\r\n//            return;\r\n//        }\r\n//\r\n//        try {\r\n//\r\n//            // Add configuration to container\r\n//            container.addEndpoint(config);\r\n//\r\n//        }\r\n//        catch (DeploymentException e) {\r\n//            System.out.println(&quot;Unable to deploy WebSocket tunnel. &quot; + e);\r\n//        }\r\n        tomcat.start();\r\n        tomcat.getServer().await();\r\n    }\r\n```\r\n\r\n**Init (ServletContainerInitializer)**\r\n```\r\npublic class Init implements ServletContainerInitializer {\r\n\r\n    @Override\r\n    public void onStartup(Set&lt;Class&lt;?&gt;&gt; c, ServletContext ctx) throws ServletException {\r\n        String serverContainerClass = ServerContainer.class.getName();\r\n                ServerContainer container = (ServerContainer)ctx.getAttribute(serverContainerClass);\r\n        if (container == null) {\r\n            return;\r\n        }\r\n        ServerEndpointConfig config =\r\n                ServerEndpointConfig.Builder.create(DummyGuacamoleWebsocketEndpoint.class, &quot;/websocket-tunnel&quot;)\r\n                        .subprotocols(Arrays.asList(new String[]{&quot;guacamole&quot;}))\r\n                        .build();\r\n\r\n\r\n        try {\r\n\r\n            // Add configuration to container\r\n            container.addEndpoint(config);\r\n\r\n        }\r\n        catch (DeploymentException e) {\r\n            System.out.println(&quot;Unable to deploy WebSocket tunnel. &quot; + e);\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n\r\n**Endpoint**\r\n```\r\n// GuacamoleWebSocketTunnelEndpoint is from guacamole-common, which I can&#39;t change\r\npublic class DummyGuacamoleWebsocketEndpoint extends GuacamoleWebSocketTunnelEndpoint {\r\n    @Override\r\n    protected GuacamoleTunnel createTunnel(javax.websocket.Session session, javax.websocket.EndpointConfig config) throws GuacamoleException {\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\n**gradle dependencies**\r\n```\r\ndependencies {\r\n    implementation(&quot;org.apache.guacamole:guacamole-common:1.5.3&quot;)\r\n    implementation(&quot;org.apache.tomcat.embed:tomcat-embed-core:8.5.95&quot;)\r\n    implementation(&quot;org.apache.tomcat.embed:tomcat-embed-websocket:8.5.95&quot;)\r\n    compileOnly(&quot;javax.websocket:javax.websocket-api:1.1&quot;)\r\n    compileOnly(&quot;javax.websocket:javax.websocket-all:1.1&quot;)\r\n}\r\n```\r\n\r\n**EDIT**\r\nI also tried to implement a `ServletContextListener` in which I tried to get the `ServerContainer`, to no avail.\r\n\r\nHow do I get the correct `ServerContainer`?","title":"unable to use websocket in embeded tomcat because ServerContainer is null","body":"<p>I haven't used Java for over a decade and know I'm trying to use the embedded tomcat 8.5.95 (stuck with this version because of guacamole-common) together with websocket support.</p>\n<p>Tried various ways to get it work, but I'm stuck and I have no idea what it is causing the issues.<br />\nThe problem is that <code>(ServerContainer)ctx.getAttribute(&quot;javax.websocket.server.ServerContainer&quot;)</code> is always <code>null</code>.<br />\nI know there are a lot of questions here on SO with the same issue, but I tried a lot of them and none seems to work.<br />\nIt doesn't matter if a call the code above in my <code>main</code> or in a <code>ServletContainerInitializer</code></p>\n<p><strong>main</strong></p>\n<pre><code>public static void main(String[] args) throws Exception {\n\n        Tomcat tomcat = new Tomcat();\n    \n        tomcat.setPort(8080);\n        // tried tomcat.addWebapp and tomcat.addContext\n        var ctx = tomcat.addWebapp(&quot;&quot;, new File(&quot;.&quot;).getAbsolutePath());\n        ctx.addServletContainerInitializer(new Init(), null);\n        \n       // normal http implementation for guacamole\n        Tomcat.addServlet(ctx, &quot;tunnel&quot;, new DummyGuacamoleTunnelServlet()); \n        ctx.addServletMappingDecoded(&quot;/tunnel&quot;, &quot;tunnel&quot;);\n        \n        // tried this first, but according the internet ;) this should go in a \n\n//      String serverContainerClass = ServerContainer.class.getName();\n//        ServerEndpointConfig config =\n//                ServerEndpointConfig.Builder.create(DummyGuacamoleWebsocketEndpoint.class, &quot;/websocket-tunnel&quot;)\n//                       .subprotocols(Arrays.asList(new String[]{&quot;guacamole&quot;}))\n//                       .build();\n//      String serverContainerClass = ServerContainer.class.getName();\n//        ServerEndpointConfig config =\n//                ServerEndpointConfig.Builder.create(DummyGuacamoleWebsocketEndpoint.class, &quot;/websocket-tunnel&quot;)\n//                        .subprotocols(Arrays.asList(new String[]{&quot;guacamole&quot;}))\n//                        .build();\n//\n//        ServerContainer container = (ServerContainer)ctx.getServletContext().getAttribute(serverContainerClass);\n//        if (container == null) {\n//            return;\n//        }\n//\n//        try {\n//\n//            // Add configuration to container\n//            container.addEndpoint(config);\n//\n//        }\n//        catch (DeploymentException e) {\n//            System.out.println(&quot;Unable to deploy WebSocket tunnel. &quot; + e);\n//        }\n        tomcat.start();\n        tomcat.getServer().await();\n    }\n</code></pre>\n<p><strong>Init (ServletContainerInitializer)</strong></p>\n<pre><code>public class Init implements ServletContainerInitializer {\n\n    @Override\n    public void onStartup(Set&lt;Class&lt;?&gt;&gt; c, ServletContext ctx) throws ServletException {\n        String serverContainerClass = ServerContainer.class.getName();\n                ServerContainer container = (ServerContainer)ctx.getAttribute(serverContainerClass);\n        if (container == null) {\n            return;\n        }\n        ServerEndpointConfig config =\n                ServerEndpointConfig.Builder.create(DummyGuacamoleWebsocketEndpoint.class, &quot;/websocket-tunnel&quot;)\n                        .subprotocols(Arrays.asList(new String[]{&quot;guacamole&quot;}))\n                        .build();\n\n\n        try {\n\n            // Add configuration to container\n            container.addEndpoint(config);\n\n        }\n        catch (DeploymentException e) {\n            System.out.println(&quot;Unable to deploy WebSocket tunnel. &quot; + e);\n        }\n\n    }\n}\n</code></pre>\n<p><strong>Endpoint</strong></p>\n<pre><code>// GuacamoleWebSocketTunnelEndpoint is from guacamole-common, which I can't change\npublic class DummyGuacamoleWebsocketEndpoint extends GuacamoleWebSocketTunnelEndpoint {\n    @Override\n    protected GuacamoleTunnel createTunnel(javax.websocket.Session session, javax.websocket.EndpointConfig config) throws GuacamoleException {\n        return null;\n    }\n}\n</code></pre>\n<p><strong>gradle dependencies</strong></p>\n<pre><code>dependencies {\n    implementation(&quot;org.apache.guacamole:guacamole-common:1.5.3&quot;)\n    implementation(&quot;org.apache.tomcat.embed:tomcat-embed-core:8.5.95&quot;)\n    implementation(&quot;org.apache.tomcat.embed:tomcat-embed-websocket:8.5.95&quot;)\n    compileOnly(&quot;javax.websocket:javax.websocket-api:1.1&quot;)\n    compileOnly(&quot;javax.websocket:javax.websocket-all:1.1&quot;)\n}\n</code></pre>\n<p><strong>EDIT</strong>\nI also tried to implement a <code>ServletContextListener</code> in which I tried to get the <code>ServerContainer</code>, to no avail.</p>\n<p>How do I get the correct <code>ServerContainer</code>?</p>\n"},{"tags":["java","math","javafx"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1698040143,"post_id":77340960,"comment_id":136349777,"body_markdown":"You can calculate the [centroid using commons geometry](https://commons.apache.org/proper/commons-geometry/commons-geometry-euclidean/apidocs/org/apache/commons/geometry/euclidean/twod/Vector2D.html#centroid-org.apache.commons.geometry.euclidean.twod.Vector2D-org.apache.commons.geometry.euclidean.twod.Vector2D...-).  Once you have that you can calculate the midpoint of a side and interpolate a point along a line between the centroid and side midpoint.","body":"You can calculate the <a href=\"https://commons.apache.org/proper/commons-geometry/commons-geometry-euclidean/apidocs/org/apache/commons/geometry/euclidean/twod/Vector2D.html#centroid-org.apache.commons.geometry.euclidean.twod.Vector2D-org.apache.commons.geometry.euclidean.twod.Vector2D...-\" rel=\"nofollow noreferrer\">centroid using commons geometry</a>.  Once you have that you can calculate the midpoint of a side and interpolate a point along a line between the centroid and side midpoint."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1698169571,"post_id":77340960,"comment_id":136370230,"body_markdown":"The correct solution (IMO) would be to create a Scalable Vector Graphic (SVG)","body":"The correct solution (IMO) would be to create a Scalable Vector Graphic (SVG)"}],"answers":[{"tags":[],"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697996161,"creation_date":1697996161,"answer_id":77341027,"question_id":77340960,"body_markdown":"This might be better on Mathmatics on StackExchange.\r\n\r\nBut I think this is how to do it (will only work for eqilateral triangle)\r\n\r\n1. Calculate the midpoint of your polygon: You can calculate the midpoint as the average of all the vertexes\r\n\r\n2. Calculate the point at which the text should be drawn: This is tricky, as where the line should start depends on the FontMetrics height. And fitting the text into the space depends on the FontMetrics.charWidth. Thus, I think the calculation for this is a differential equation (or you could just go with test and adjust iteratively)\r\n\r\nHonestly this is a very tricky problem that will only work with this unique shape. Is this worth it to you?\r\n\r\nAgain, I recommend you try Mathematics to see if they have a better answer.","title":"Javafx: Bringing two points closer to each other with angle","body":"<p>This might be better on Mathmatics on StackExchange.</p>\n<p>But I think this is how to do it (will only work for eqilateral triangle)</p>\n<ol>\n<li><p>Calculate the midpoint of your polygon: You can calculate the midpoint as the average of all the vertexes</p>\n</li>\n<li><p>Calculate the point at which the text should be drawn: This is tricky, as where the line should start depends on the FontMetrics height. And fitting the text into the space depends on the FontMetrics.charWidth. Thus, I think the calculation for this is a differential equation (or you could just go with test and adjust iteratively)</p>\n</li>\n</ol>\n<p>Honestly this is a very tricky problem that will only work with this unique shape. Is this worth it to you?</p>\n<p>Again, I recommend you try Mathematics to see if they have a better answer.</p>\n"},{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1698157584,"creation_date":1698157584,"answer_id":77352982,"question_id":77340960,"body_markdown":"The [`Point2D`](https://openjfx.io/javadoc/19/javafx.graphics/javafx/geometry/Point2D.html) class implements a lot of basic vector algebra operations. \r\n\r\nMathematically, if `a` and `b` are points, then `b-a` represents the vector from `a` to `b`. For a scalar `t`, \r\n\r\n```\r\na + t(b-a) = (1-t)a + tb\r\n```\r\n\r\nrepresents a point on the line passing through `a` and `b` (intuitively, start at `a` and move some multiple of the vector from `a` to `b`). When `t=0`, `(1-t)a +tb = a` and when `t=1`, `(1-t)a + tb = b`. \r\n\r\nIn your case, `a` is the center point of the line, `b` is the center of the shape, and `t` is the value you called `coeff` in your code.\r\n\r\nSo in Java code this just looks like:\r\n\r\n```\r\nPoint2D centerLine = new Point2D(...) ;\r\nPoint2D centerShape = new Point2D(...) ;\r\nPoint2D requiredPoint = centerLine.multiply(1-coeff).add(centerShape.multiply(coeff));\r\n```\r\n\r\nAs noted, you can get the center of the line simply as the average of the endpoints and the center of the shape as the average of the vertexes.\r\n\r\nHere is a demo:\r\n\r\n```\r\npackage com.example.vectors;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.geometry.Point2D;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Slider;\r\nimport javafx.scene.control.Spinner;\r\nimport javafx.scene.layout.BorderPane;\r\nimport javafx.scene.layout.Pane;\r\nimport javafx.scene.layout.VBox;\r\nimport javafx.scene.shape.Circle;\r\nimport javafx.scene.shape.Polyline;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class HelloApplication extends Application {\r\n\r\n    private Point2D centerLine ;\r\n    private Point2D centerShape;\r\n\r\n    private Circle point = new Circle(5);\r\n\r\n    @Override\r\n    public void start(Stage stage) throws IOException {\r\n        Spinner&lt;Integer&gt; numVertexesSpinner = new Spinner&lt;&gt;(3, 10, 5);\r\n        Slider pointSlider = new Slider(0, 1, 0.5);\r\n        VBox controls = new VBox(5, numVertexesSpinner, pointSlider);\r\n        Pane drawingPane = new Pane();\r\n        drawingPane.setPrefSize(420, 420);\r\n        drawShapes(numVertexesSpinner.getValue(), pointSlider.getValue(), drawingPane);\r\n\r\n        BorderPane root = new BorderPane();\r\n        root.setTop(controls);\r\n        root.setCenter(drawingPane);\r\n\r\n        numVertexesSpinner.valueProperty().addListener((obs, oldValue, newValue) -&gt;\r\n                drawShapes(newValue, pointSlider.getValue(), drawingPane)\r\n        );\r\n\r\n        pointSlider.valueProperty().addListener((obs, oldValues, newValue)  -&gt; updatePoint(newValue.doubleValue()));\r\n\r\n        Scene scene = new Scene(root);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n\r\n    private void drawShapes(int numVertexes, double pointPos, Pane pane) {\r\n        pane.getChildren().clear();\r\n        final double radius = 200 ;\r\n        Point2D[] vertexes =  new Point2D[numVertexes];\r\n        double[] coords = new double[numVertexes * 2 + 2];\r\n        for (int i = 0 ; i&lt;vertexes.length; i++) {\r\n            double angle = 2 * Math.PI * i / numVertexes;\r\n            double x = radius + radius * Math.cos(angle);\r\n            double y = radius + radius * Math.sin(angle);\r\n            vertexes[i] = new Point2D(x, y);\r\n            coords[2*i] = x ;\r\n            coords[2*i+1] = y ;\r\n        }\r\n        coords[numVertexes * 2] = coords[0];\r\n        coords[numVertexes * 2 + 1] = coords[1];\r\n        Polyline poly = new Polyline(coords);\r\n        pane.getChildren().add(poly);\r\n        centerLine = vertexes[0].add((vertexes[1])).multiply(0.5);\r\n        centerShape = new Point2D(0,0);\r\n        for (Point2D vertex : vertexes) {\r\n            centerShape = centerShape.add(vertex);\r\n        }\r\n        centerShape = centerShape.multiply(1.0 / numVertexes);\r\n        pane.getChildren().addAll(new Circle(centerLine.getX(), centerLine.getY(), 5));\r\n        pane.getChildren().addAll(new Circle(centerShape.getX(), centerShape.getY(), 5));\r\n        pane.getChildren().add(point);\r\n        updatePoint(pointPos);\r\n    }\r\n\r\n    private void updatePoint(double pointPos) {\r\n        Point2D pos = centerLine.multiply(1-pointPos).add(centerShape.multiply(pointPos));\r\n        point.setCenterX(pos.getX());\r\n        point.setCenterY(pos.getY());\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch();\r\n    }\r\n}\r\n```\r\n\r\n","title":"Javafx: Bringing two points closer to each other with angle","body":"<p>The <a href=\"https://openjfx.io/javadoc/19/javafx.graphics/javafx/geometry/Point2D.html\" rel=\"nofollow noreferrer\"><code>Point2D</code></a> class implements a lot of basic vector algebra operations.</p>\n<p>Mathematically, if <code>a</code> and <code>b</code> are points, then <code>b-a</code> represents the vector from <code>a</code> to <code>b</code>. For a scalar <code>t</code>,</p>\n<pre><code>a + t(b-a) = (1-t)a + tb\n</code></pre>\n<p>represents a point on the line passing through <code>a</code> and <code>b</code> (intuitively, start at <code>a</code> and move some multiple of the vector from <code>a</code> to <code>b</code>). When <code>t=0</code>, <code>(1-t)a +tb = a</code> and when <code>t=1</code>, <code>(1-t)a + tb = b</code>.</p>\n<p>In your case, <code>a</code> is the center point of the line, <code>b</code> is the center of the shape, and <code>t</code> is the value you called <code>coeff</code> in your code.</p>\n<p>So in Java code this just looks like:</p>\n<pre><code>Point2D centerLine = new Point2D(...) ;\nPoint2D centerShape = new Point2D(...) ;\nPoint2D requiredPoint = centerLine.multiply(1-coeff).add(centerShape.multiply(coeff));\n</code></pre>\n<p>As noted, you can get the center of the line simply as the average of the endpoints and the center of the shape as the average of the vertexes.</p>\n<p>Here is a demo:</p>\n<pre><code>package com.example.vectors;\n\nimport javafx.application.Application;\nimport javafx.geometry.Point2D;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Slider;\nimport javafx.scene.control.Spinner;\nimport javafx.scene.layout.BorderPane;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.layout.VBox;\nimport javafx.scene.shape.Circle;\nimport javafx.scene.shape.Polyline;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\n\npublic class HelloApplication extends Application {\n\n    private Point2D centerLine ;\n    private Point2D centerShape;\n\n    private Circle point = new Circle(5);\n\n    @Override\n    public void start(Stage stage) throws IOException {\n        Spinner&lt;Integer&gt; numVertexesSpinner = new Spinner&lt;&gt;(3, 10, 5);\n        Slider pointSlider = new Slider(0, 1, 0.5);\n        VBox controls = new VBox(5, numVertexesSpinner, pointSlider);\n        Pane drawingPane = new Pane();\n        drawingPane.setPrefSize(420, 420);\n        drawShapes(numVertexesSpinner.getValue(), pointSlider.getValue(), drawingPane);\n\n        BorderPane root = new BorderPane();\n        root.setTop(controls);\n        root.setCenter(drawingPane);\n\n        numVertexesSpinner.valueProperty().addListener((obs, oldValue, newValue) -&gt;\n                drawShapes(newValue, pointSlider.getValue(), drawingPane)\n        );\n\n        pointSlider.valueProperty().addListener((obs, oldValues, newValue)  -&gt; updatePoint(newValue.doubleValue()));\n\n        Scene scene = new Scene(root);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    private void drawShapes(int numVertexes, double pointPos, Pane pane) {\n        pane.getChildren().clear();\n        final double radius = 200 ;\n        Point2D[] vertexes =  new Point2D[numVertexes];\n        double[] coords = new double[numVertexes * 2 + 2];\n        for (int i = 0 ; i&lt;vertexes.length; i++) {\n            double angle = 2 * Math.PI * i / numVertexes;\n            double x = radius + radius * Math.cos(angle);\n            double y = radius + radius * Math.sin(angle);\n            vertexes[i] = new Point2D(x, y);\n            coords[2*i] = x ;\n            coords[2*i+1] = y ;\n        }\n        coords[numVertexes * 2] = coords[0];\n        coords[numVertexes * 2 + 1] = coords[1];\n        Polyline poly = new Polyline(coords);\n        pane.getChildren().add(poly);\n        centerLine = vertexes[0].add((vertexes[1])).multiply(0.5);\n        centerShape = new Point2D(0,0);\n        for (Point2D vertex : vertexes) {\n            centerShape = centerShape.add(vertex);\n        }\n        centerShape = centerShape.multiply(1.0 / numVertexes);\n        pane.getChildren().addAll(new Circle(centerLine.getX(), centerLine.getY(), 5));\n        pane.getChildren().addAll(new Circle(centerShape.getX(), centerShape.getY(), 5));\n        pane.getChildren().add(point);\n        updatePoint(pointPos);\n    }\n\n    private void updatePoint(double pointPos) {\n        Point2D pos = centerLine.multiply(1-pointPos).add(centerShape.multiply(pointPos));\n        point.setCenterX(pos.getX());\n        point.setCenterY(pos.getY());\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6211203,"reputation":87,"user_id":13660973,"display_name":"FarHooD"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77352982,"answer_count":2,"score":-1,"last_activity_date":1698157584,"creation_date":1697994832,"question_id":77340960,"body_markdown":"Hello to all Stackoverflow users, I have Polygon shape (or triangle shapes) that I need added some Label into it center of side , Imagine I have Frame That if clip the shape remove other area from it, the problem is if clip the label of my GraphicContext will removed from shape that I created, In order to said about the problem I had I want labels goes to near center of shape with some gap I added to it(like 24px 72px etc...) but I found it if I want to do that need culc the angle and add ratio into gap to closed into center , but I don&#39;t know How can do this? my mathematic is poor :)) can anyone give me a tip?\r\n\r\nThe shape that I added is just example of what I need , and the code that I show you just some dirty work.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n```\r\n         private int[] pointLocateForExportLabel(Point2D a1, Point2D a2, Point2D centerPoint, int fontMetric) {\r\n        int gapIntoShape = (int) (fontMetric) * 9;\r\n        App.logger.debug(&quot;The Center point : &quot; + centerPoint);\r\n        App.logger.debug(&quot;The A1 of point : &quot; + a1);\r\n        App.logger.debug(&quot;The A2 of point : &quot; + a2);\r\n        App.logger.debug(&quot;==============================&quot;);\r\n        int poX = (int) (((a1.getX() + a2.getX()) / 2));\r\n        int poY = (int) (((a1.getY() + a2.getY()) / 2));\r\n        Point c1 = new Point(poX, poY);\r\n        double deltaX = centerPoint.getX() - c1.getX();\r\n        double deltaY = centerPoint.getY() - c1.getY();\r\n        double coeff = 0.05;\r\n        Point2D c = null;\r\n        if (centerPoint.getX() &gt; c1.getX()) {\r\n            c = new Point2D(c1.getX() + coeff * deltaX, c1.getY() + coeff * deltaY);\r\n        } else {\r\n            c = new Point2D((c1.getX() + coeff * deltaX) - gapIntoShape, c1.getY() + coeff * deltaY);\r\n        }\r\n        return new int[]{(int) c.getX(), (int) c.getY()};\r\n    }\r\n```\r\n\r\nUpdate :\r\nFor better understanding , I need bring close point into near the other point! but not for one direction (just x or y) in two direction(x and y), it&#39;s simple problem that IDK how too fixed.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jx10a.png\r\n  [2]: https://i.stack.imgur.com/xVlFG.png\r\n  [3]: https://i.stack.imgur.com/PlxnE.png","title":"Javafx: Bringing two points closer to each other with angle","body":"<p>Hello to all Stackoverflow users, I have Polygon shape (or triangle shapes) that I need added some Label into it center of side , Imagine I have Frame That if clip the shape remove other area from it, the problem is if clip the label of my GraphicContext will removed from shape that I created, In order to said about the problem I had I want labels goes to near center of shape with some gap I added to it(like 24px 72px etc...) but I found it if I want to do that need culc the angle and add ratio into gap to closed into center , but I don't know How can do this? my mathematic is poor :)) can anyone give me a tip?</p>\n<p>The shape that I added is just example of what I need , and the code that I show you just some dirty work.</p>\n<p><a href=\"https://i.stack.imgur.com/jx10a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jx10a.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/xVlFG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xVlFG.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>         private int[] pointLocateForExportLabel(Point2D a1, Point2D a2, Point2D centerPoint, int fontMetric) {\n        int gapIntoShape = (int) (fontMetric) * 9;\n        App.logger.debug(&quot;The Center point : &quot; + centerPoint);\n        App.logger.debug(&quot;The A1 of point : &quot; + a1);\n        App.logger.debug(&quot;The A2 of point : &quot; + a2);\n        App.logger.debug(&quot;==============================&quot;);\n        int poX = (int) (((a1.getX() + a2.getX()) / 2));\n        int poY = (int) (((a1.getY() + a2.getY()) / 2));\n        Point c1 = new Point(poX, poY);\n        double deltaX = centerPoint.getX() - c1.getX();\n        double deltaY = centerPoint.getY() - c1.getY();\n        double coeff = 0.05;\n        Point2D c = null;\n        if (centerPoint.getX() &gt; c1.getX()) {\n            c = new Point2D(c1.getX() + coeff * deltaX, c1.getY() + coeff * deltaY);\n        } else {\n            c = new Point2D((c1.getX() + coeff * deltaX) - gapIntoShape, c1.getY() + coeff * deltaY);\n        }\n        return new int[]{(int) c.getX(), (int) c.getY()};\n    }\n</code></pre>\n<p>Update :\nFor better understanding , I need bring close point into near the other point! but not for one direction (just x or y) in two direction(x and y), it's simple problem that IDK how too fixed.</p>\n<p><a href=\"https://i.stack.imgur.com/PlxnE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PlxnE.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa","spring-boot-2"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1698135531,"post_id":77349121,"comment_id":136363566,"body_markdown":"You are using a DTO and have the JSON ignore on your entity, that is pretty much pointless. The `@JsonIgnore` / `@JsonBackRefernce` needs to be on the object that is being serialized. Finally don&#39;t use `@Data` for entities as that is a bad idea, why see https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/","body":"You are using a DTO and have the JSON ignore on your entity, that is pretty much pointless. The <code>@JsonIgnore</code> / <code>@JsonBackRefernce</code> needs to be on the object that is being serialized. Finally don&#39;t use <code>@Data</code> for entities as that is a bad idea, why see <a href=\"https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/\" rel=\"nofollow noreferrer\">deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities</a>"},{"owner":{"account_id":17322819,"reputation":1,"user_id":12547794,"display_name":"JulianAndr3s"},"score":0,"creation_date":1698156877,"post_id":77349121,"comment_id":136367688,"body_markdown":"I tried to put the @Json to the models and not to the entities and it worked, the problem I would have is that in the architecture I am using, the models should not have spring annotations to decouple them from everything","body":"I tried to put the @Json to the models and not to the entities and it worked, the problem I would have is that in the architecture I am using, the models should not have spring annotations to decouple them from everything"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1698170253,"post_id":77349121,"comment_id":136370361,"body_markdown":"`@JsonIgnore` isn&#39;t a spring annotation but a jackson one. Also those rules/guidelines only make things complicated it basically is the same as we want to use JPA but not use any of the annotations (altrhough strictly speaking you could do all mapping in XML but that is also true for Spring configuration).","body":"<code>@JsonIgnore</code> isn&#39;t a spring annotation but a jackson one. Also those rules/guidelines only make things complicated it basically is the same as we want to use JPA but not use any of the annotations (altrhough strictly speaking you could do all mapping in XML but that is also true for Spring configuration)."}],"answers":[{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698115741,"creation_date":1698115741,"answer_id":77349255,"question_id":77349121,"body_markdown":"I believe this issue is because you have a circular reference in your mappings that are not being excluded.\r\n\r\nThat would be, ProductCategoryEntity has a list of ProductEntity, which has a ProductCategoryEntity which has a list of ProductEntity.....\r\n\r\nThe best way to handle these is to use @JsonBackReference and @JsonManagedReference.\r\n\r\nOn your `ProductCategoryEntity`\r\n\r\n    @JsonManagedReference\r\n    @OneToMany(mappedBy = &quot;category&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;ProductEntity&gt; products;\r\n\r\nOn your `ProductEntity`\r\n\r\n    @JsonBackReference\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;category_id&quot;)\r\n    private ProductCategoryEntity category;\r\n\r\n\r\nSee the documentation for these annotations [here](https://javadoc.io/doc/com.fasterxml.jackson.core/jackson-annotations/latest/index.html)","title":"Error getting information from related entities - JAVA, SPRINGBOOT, JPA","body":"<p>I believe this issue is because you have a circular reference in your mappings that are not being excluded.</p>\n<p>That would be, ProductCategoryEntity has a list of ProductEntity, which has a ProductCategoryEntity which has a list of ProductEntity.....</p>\n<p>The best way to handle these is to use @JsonBackReference and @JsonManagedReference.</p>\n<p>On your <code>ProductCategoryEntity</code></p>\n<pre><code>@JsonManagedReference\n@OneToMany(mappedBy = &quot;category&quot;, cascade = CascadeType.ALL)\nprivate List&lt;ProductEntity&gt; products;\n</code></pre>\n<p>On your <code>ProductEntity</code></p>\n<pre><code>@JsonBackReference\n@ManyToOne(fetch = FetchType.LAZY)\n@JoinColumn(name = &quot;category_id&quot;)\nprivate ProductCategoryEntity category;\n</code></pre>\n<p>See the documentation for these annotations <a href=\"https://javadoc.io/doc/com.fasterxml.jackson.core/jackson-annotations/latest/index.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":17322819,"reputation":1,"user_id":12547794,"display_name":"JulianAndr3s"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698156937,"creation_date":1698112746,"question_id":77349121,"body_markdown":"I hope you are well and can help me with a problem.  \r\nI leave my initial code parts here:\r\n\r\n**Product Entity:**\r\n\r\n    @Entity\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Table(name = &quot;products&quot;)\r\n    \r\n    public class ProductEntity {\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    private String name;\r\n    private String brand;\r\n    private String description;\r\n    private String price;\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;category_id&quot;)\r\n    private ProductCategoryEntity category;\r\n    private String stock;\r\n    @OneToMany(mappedBy = &quot;product&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;ProductCommentsEntity&gt; productComments;\r\n\r\n    }\r\n\r\n**Category Product Entity:**\r\n\r\n    @Entity\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Table(name = &quot;categories&quot;)\r\n    public class ProductCategoryEntity {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    private String name;\r\n    @OneToMany(mappedBy = &quot;category&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;ProductEntity&gt; products;\r\n\r\n    public ProductCategoryEntity(Long id, String name) {\r\n        this.id = id;\r\n        this.name = name;\r\n        }\r\n    }\r\n\r\n**Comments Product Entity:**\r\n\r\n    @Entity\r\n    @Data\r\n    @Table(name = &quot;comments&quot;)\r\n    public class ProductCommentsEntity {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    private String tittle;\r\n    private String comment;\r\n    private Integer rating;\r\n    private Date date;\r\n    @ManyToOne\r\n    private UserEntity user;\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;product_id&quot;)\r\n    @JsonIgnore\r\n    private ProductEntity product;\r\n\r\n    }\r\n\r\nSo using JPA, Java and Spring Boot Repositories, I want to implement this **method**:\r\n\r\n    @Override\r\n    public List&lt;Product&gt; getAllProducts() {\r\n        List&lt;ProductEntity&gt; productsEntity = this.productRepositoryJpa.findAll();\r\n        return this.objectConverter.converterToTypeList(productsEntity, Product.class);\r\n    }\r\n\r\nBut then I get the following **error**:\r\n\r\nIn Postman this appears: `Error: Transferred a partial file`\r\n\r\nand in the Intellij console the following appears:\r\n\r\n    2023-10-23 17:50:02.975  INFO 10556 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms\r\n    Hibernate: select productent0_.id as id1_5_, productent0_.brand as brand2_5_, productent0_.category_id as category7_5_, productent0_.description as descript3_5_, productent0_.name as name4_5_, productent0_.price as price5_5_, productent0_.stock as stock6_5_ from products productent0_\r\n    Hibernate: select productcat0_.id as id1_2_0_, productcat0_.name as name2_2_0_ from categories productcat0_ where productcat0_.id=?\r\n    Hibernate: select products0_.category_id as category7_5_0_, products0_.id as id1_5_0_, products0_.id as id1_5_1_, products0_.brand as brand2_5_1_, products0_.category_id as category7_5_1_, products0_.description as descript3_5_1_, products0_.name as name4_5_1_, products0_.price as price5_5_1_, products0_.stock as stock6_5_1_ from products products0_ where products0_.category_id=?\r\n    Hibernate: select productcom0_.product_id as product_6_3_0_, productcom0_.id as id1_3_0_, productcom0_.id as id1_3_1_, productcom0_.comment as comment2_3_1_, productcom0_.date as date3_3_1_, productcom0_.product_id as product_6_3_1_, productcom0_.rating as rating4_3_1_, productcom0_.tittle as tittle5_3_1_, productcom0_.user_id as user_id7_3_1_, userentity1_.id as id1_7_2_, userentity1_.city as city2_7_2_, userentity1_.country as country3_7_2_, userentity1_.extra_information as extra_in4_7_2_, userentity1_.number as number5_7_2_, userentity1_.postal_code as postal_c6_7_2_, userentity1_.street as street7_7_2_, userentity1_.creation_date as creation8_7_2_, userentity1_.email as email9_7_2_, userentity1_.identification_card as identif10_7_2_, userentity1_.last_name as last_na11_7_2_, userentity1_.name as name12_7_2_, userentity1_.password as passwor13_7_2_, userentity1_.phone as phone14_7_2_, userentity1_.role_id as role_id16_7_2_, userentity1_.state as state15_7_2_, roleentity2_.id as id1_6_3_, roleentity2_.name as name2_6_3_ from comments productcom0_ left outer join users userentity1_ on productcom0_.user_id=userentity1_.id left outer join roles roleentity2_ on userentity1_.role_id=roleentity2_.id where productcom0_.product_id=?\r\n    2023-10-23 17:50:03.212  WARN 10556 --- [nio-8080-exec-1] .w.s.m.s.DefaultHandlerExceptionResolver : Failure while trying to resolve exception [org.springframework.http.converter.HttpMessageNotWritableException]\r\n\r\n    java.lang.IllegalStateException: Cannot call sendError() after the response has been committed\r\n\tat org.apache.catalina.connector.ResponseFacade.checkCommitted(ResponseFacade.java:529) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.catalina.connector.ResponseFacade.sendError(ResponseFacade.java:362) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver.sendServerError(DefaultHandlerExceptionResolver.java:552) ~[spring-webmvc-5.3.30.jar:5.3.30]\r\n\tat org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver.handleHttpMessageNotWritable(DefaultHandlerExceptionResolver.java:442) ~[spring-webmvc-5.3.30.jar:5.3.30]\r\n\tat org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver.doResolveException(DefaultHandlerExceptionResolver.java:209) ~[spring-webmvc-5.3.30.jar:5.3.30]\r\n\tat org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:142) ~[spring-webmvc-5.3.30.jar:5.3.30]\r\n\tat org.springframework.web.servlet.handler.HandlerExceptionResolverComposite.resolveException(HandlerExceptionResolverComposite.java:80) ~[spring-webmvc-5.3.30.jar:5.3.30]\r\n\tat org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1332) ~[spring-webmvc-5.3.30.jar:5.3.30]\r\n\tat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1143) ~[spring-webmvc-5.3.30.jar:5.3.30]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-5.3.30.jar:5.3.30]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.30.jar:5.3.30]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.30.jar:5.3.30]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.30.jar:5.3.30]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:529) ~[tomcat-embed-core-9.0.80.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.30.jar:5.3.30]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.80.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-9.0.80.jar:9.0.80]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.30.jar:5.3.30]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.30.jar:5.3.30]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.30.jar:5.3.30]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.30.jar:5.3.30]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.30.jar:5.3.30]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.30.jar:5.3.30]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\r\n\tat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\r\n\r\n    2023-10-23 17:50:03.220 ERROR 10556 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Infinite recursion (StackOverflowError); nested exception is com.fasterxml.jackson.databind.JsonMappingException: Infinite recursion (StackOverflowError) (through reference chain: com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;])] with root cause\r\n\r\n    java.lang.StackOverflowError: null\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:789) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\r\n**NOTE:** I tried to solve it with several solutions that I saw on the internet, I already used the one from `@JsonIgnore` and the other `@Json` annotations that they put on the identities.\r\n\r\nI also leave some possibly _relevant information here_.\r\n\r\n    plugins {\r\n\tid &#39;java&#39;\r\n\tid &#39;org.springframework.boot&#39; version &#39;2.7.16&#39;\r\n\tid &#39;io.spring.dependency-management&#39; version &#39;1.0.15.RELEASE&#39;\r\n    }\r\n\r\n    group = &#39;com.co&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n\r\n    java {\r\n\tsourceCompatibility = &#39;1.8&#39;\r\n    }\r\n\r\n    configurations {\r\n\tcompileOnly {\r\n\t\textendsFrom annotationProcessor\r\n\t}\r\n    }\r\n\r\n    repositories {\r\n\tmavenCentral()\r\n    }\r\n\r\n    dependencies {\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\timplementation &#39;org.modelmapper:modelmapper:3.2.0&#39;\r\n\tcompileOnly &#39;org.projectlombok:lombok&#39;\r\n\tdevelopmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n\truntimeOnly &#39;org.postgresql:postgresql&#39;\r\n\tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n\ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    }\r\n\r\n    tasks.named(&#39;test&#39;) {\r\n\tuseJUnitPlatform()\r\n    }\r\n\r\nI already tried solutions with Spring annotations, such as `@JsonIgnore` or the others suggested by @Json....  \r\nI implemented DTOS, but it was not good enough to solve the problem.\r\n\r\nI&#39;m hoping to find a way to fix this bidirectionally related entities issue.","title":"Error getting information from related entities - JAVA, SPRINGBOOT, JPA","body":"<p>I hope you are well and can help me with a problem.<br />\nI leave my initial code parts here:</p>\n<p><strong>Product Entity:</strong></p>\n<pre><code>@Entity\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(name = &quot;products&quot;)\n\npublic class ProductEntity {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\nprivate String name;\nprivate String brand;\nprivate String description;\nprivate String price;\n@ManyToOne(fetch = FetchType.LAZY)\n@JoinColumn(name = &quot;category_id&quot;)\nprivate ProductCategoryEntity category;\nprivate String stock;\n@OneToMany(mappedBy = &quot;product&quot;, cascade = CascadeType.ALL)\nprivate List&lt;ProductCommentsEntity&gt; productComments;\n\n}\n</code></pre>\n<p><strong>Category Product Entity:</strong></p>\n<pre><code>@Entity\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(name = &quot;categories&quot;)\npublic class ProductCategoryEntity {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\nprivate String name;\n@OneToMany(mappedBy = &quot;category&quot;, cascade = CascadeType.ALL)\nprivate List&lt;ProductEntity&gt; products;\n\npublic ProductCategoryEntity(Long id, String name) {\n    this.id = id;\n    this.name = name;\n    }\n}\n</code></pre>\n<p><strong>Comments Product Entity:</strong></p>\n<pre><code>@Entity\n@Data\n@Table(name = &quot;comments&quot;)\npublic class ProductCommentsEntity {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\nprivate String tittle;\nprivate String comment;\nprivate Integer rating;\nprivate Date date;\n@ManyToOne\nprivate UserEntity user;\n@ManyToOne\n@JoinColumn(name = &quot;product_id&quot;)\n@JsonIgnore\nprivate ProductEntity product;\n\n}\n</code></pre>\n<p>So using JPA, Java and Spring Boot Repositories, I want to implement this <strong>method</strong>:</p>\n<pre><code>@Override\npublic List&lt;Product&gt; getAllProducts() {\n    List&lt;ProductEntity&gt; productsEntity = this.productRepositoryJpa.findAll();\n    return this.objectConverter.converterToTypeList(productsEntity, Product.class);\n}\n</code></pre>\n<p>But then I get the following <strong>error</strong>:</p>\n<p>In Postman this appears: <code>Error: Transferred a partial file</code></p>\n<p>and in the Intellij console the following appears:</p>\n<pre><code>2023-10-23 17:50:02.975  INFO 10556 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms\nHibernate: select productent0_.id as id1_5_, productent0_.brand as brand2_5_, productent0_.category_id as category7_5_, productent0_.description as descript3_5_, productent0_.name as name4_5_, productent0_.price as price5_5_, productent0_.stock as stock6_5_ from products productent0_\nHibernate: select productcat0_.id as id1_2_0_, productcat0_.name as name2_2_0_ from categories productcat0_ where productcat0_.id=?\nHibernate: select products0_.category_id as category7_5_0_, products0_.id as id1_5_0_, products0_.id as id1_5_1_, products0_.brand as brand2_5_1_, products0_.category_id as category7_5_1_, products0_.description as descript3_5_1_, products0_.name as name4_5_1_, products0_.price as price5_5_1_, products0_.stock as stock6_5_1_ from products products0_ where products0_.category_id=?\nHibernate: select productcom0_.product_id as product_6_3_0_, productcom0_.id as id1_3_0_, productcom0_.id as id1_3_1_, productcom0_.comment as comment2_3_1_, productcom0_.date as date3_3_1_, productcom0_.product_id as product_6_3_1_, productcom0_.rating as rating4_3_1_, productcom0_.tittle as tittle5_3_1_, productcom0_.user_id as user_id7_3_1_, userentity1_.id as id1_7_2_, userentity1_.city as city2_7_2_, userentity1_.country as country3_7_2_, userentity1_.extra_information as extra_in4_7_2_, userentity1_.number as number5_7_2_, userentity1_.postal_code as postal_c6_7_2_, userentity1_.street as street7_7_2_, userentity1_.creation_date as creation8_7_2_, userentity1_.email as email9_7_2_, userentity1_.identification_card as identif10_7_2_, userentity1_.last_name as last_na11_7_2_, userentity1_.name as name12_7_2_, userentity1_.password as passwor13_7_2_, userentity1_.phone as phone14_7_2_, userentity1_.role_id as role_id16_7_2_, userentity1_.state as state15_7_2_, roleentity2_.id as id1_6_3_, roleentity2_.name as name2_6_3_ from comments productcom0_ left outer join users userentity1_ on productcom0_.user_id=userentity1_.id left outer join roles roleentity2_ on userentity1_.role_id=roleentity2_.id where productcom0_.product_id=?\n2023-10-23 17:50:03.212  WARN 10556 --- [nio-8080-exec-1] .w.s.m.s.DefaultHandlerExceptionResolver : Failure while trying to resolve exception [org.springframework.http.converter.HttpMessageNotWritableException]\n\njava.lang.IllegalStateException: Cannot call sendError() after the response has been committed\nat org.apache.catalina.connector.ResponseFacade.checkCommitted(ResponseFacade.java:529) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.catalina.connector.ResponseFacade.sendError(ResponseFacade.java:362) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver.sendServerError(DefaultHandlerExceptionResolver.java:552) ~[spring-webmvc-5.3.30.jar:5.3.30]\nat org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver.handleHttpMessageNotWritable(DefaultHandlerExceptionResolver.java:442) ~[spring-webmvc-5.3.30.jar:5.3.30]\nat org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver.doResolveException(DefaultHandlerExceptionResolver.java:209) ~[spring-webmvc-5.3.30.jar:5.3.30]\nat org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:142) ~[spring-webmvc-5.3.30.jar:5.3.30]\nat org.springframework.web.servlet.handler.HandlerExceptionResolverComposite.resolveException(HandlerExceptionResolverComposite.java:80) ~[spring-webmvc-5.3.30.jar:5.3.30]\nat org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1332) ~[spring-webmvc-5.3.30.jar:5.3.30]\nat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1143) ~[spring-webmvc-5.3.30.jar:5.3.30]\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-5.3.30.jar:5.3.30]\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.30.jar:5.3.30]\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.30.jar:5.3.30]\nat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.30.jar:5.3.30]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:529) ~[tomcat-embed-core-9.0.80.jar:4.0.FR]\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.30.jar:5.3.30]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.80.jar:4.0.FR]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-9.0.80.jar:9.0.80]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.30.jar:5.3.30]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.30.jar:5.3.30]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.30.jar:5.3.30]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.30.jar:5.3.30]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.30.jar:5.3.30]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.30.jar:5.3.30]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1790) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.80.jar:9.0.80]\nat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\n\n2023-10-23 17:50:03.220 ERROR 10556 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: Infinite recursion (StackOverflowError); nested exception is com.fasterxml.jackson.databind.JsonMappingException: Infinite recursion (StackOverflowError) (through reference chain: com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.ProductCategory[&quot;products&quot;]-&gt;java.util.ArrayList[0]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;]-&gt;com.co.latienda.domain.model.Product[&quot;productCategory&quot;])] with root cause\n\njava.lang.StackOverflowError: null\nat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:789) ~[jackson-databind-2.13.5.jar:2.13.5]\nat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.5.jar:2.13.5]\nat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.5.jar:2.13.5]\nat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.5.jar:2.13.5]\nat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.5.jar:2.13.5]\n</code></pre>\n<p><strong>NOTE:</strong> I tried to solve it with several solutions that I saw on the internet, I already used the one from <code>@JsonIgnore</code> and the other <code>@Json</code> annotations that they put on the identities.</p>\n<p>I also leave some possibly <em>relevant information here</em>.</p>\n<pre><code>plugins {\nid 'java'\nid 'org.springframework.boot' version '2.7.16'\nid 'io.spring.dependency-management' version '1.0.15.RELEASE'\n}\n\ngroup = 'com.co'\nversion = '0.0.1-SNAPSHOT'\n\njava {\nsourceCompatibility = '1.8'\n}\n\nconfigurations {\ncompileOnly {\n    extendsFrom annotationProcessor\n}\n}\n\nrepositories {\nmavenCentral()\n}\n\ndependencies {\nimplementation 'org.springframework.boot:spring-boot-starter-data-jpa'\nimplementation 'org.springframework.boot:spring-boot-starter-web'\nimplementation 'org.modelmapper:modelmapper:3.2.0'\ncompileOnly 'org.projectlombok:lombok'\ndevelopmentOnly 'org.springframework.boot:spring-boot-devtools'\nruntimeOnly 'org.postgresql:postgresql'\nannotationProcessor 'org.projectlombok:lombok'\ntestImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n\ntasks.named('test') {\nuseJUnitPlatform()\n}\n</code></pre>\n<p>I already tried solutions with Spring annotations, such as <code>@JsonIgnore</code> or the others suggested by @Json....<br />\nI implemented DTOS, but it was not good enough to solve the problem.</p>\n<p>I'm hoping to find a way to fix this bidirectionally related entities issue.</p>\n"},{"tags":["java","groovy","jmeter"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1692191147,"creation_date":1692191147,"answer_id":76913858,"question_id":76913623,"body_markdown":"This looks like valid and correct way of running Groovy code using JMeter Java DSL\r\n\r\nAt least if you do something like:\r\n\r\n    testPlan(\r\n            threadGroup(1,\r\n                    1,\r\n                    new DslJsr223Sampler(&quot;UI performance test&quot;, &quot;println(&#39;Hello from JSR223&#39;)&quot;)))\r\n            .run();\r\n\r\nYou should see `Hello from JSR223` message in [stdout][1]:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nMost probably if you need to run your custom class you need to add it to [JMeter Classpath][3] (along with any [dependencies][4]) like [here][5]\r\n\r\nYou can check out [Groovy code debug][6] ticket for some hints. \r\n\r\nMore information: [JMeter DSL: Bringing Performance Testing Closer to Developers][7]\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Standard_streams#Standard_output_(stdout)\r\n  [2]: https://i.stack.imgur.com/ziMEN.png\r\n  [3]: https://jmeter.apache.org/usermanual/get-started.html#classpath\r\n  [4]: https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html\r\n  [5]: https://github.com/abstracta/jmeter-java-dsl/blob/master/jmeter-java-dsl/src/main/java/us/abstracta/jmeter/javadsl/core/engines/JmeterEnvironment.java#L45\r\n  [6]: https://github.com/abstracta/jmeter-java-dsl/issues/41#issuecomment-966715062\r\n  [7]: https://www.blazemeter.com/blog/jmeter-dsl","title":"Java JMeter DSL. How to execute custom logic in threadGroup() method?","body":"<p>This looks like valid and correct way of running Groovy code using JMeter Java DSL</p>\n<p>At least if you do something like:</p>\n<pre><code>testPlan(\n        threadGroup(1,\n                1,\n                new DslJsr223Sampler(&quot;UI performance test&quot;, &quot;println('Hello from JSR223')&quot;)))\n        .run();\n</code></pre>\n<p>You should see <code>Hello from JSR223</code> message in <a href=\"https://en.wikipedia.org/wiki/Standard_streams#Standard_output_(stdout)\" rel=\"nofollow noreferrer\">stdout</a>:</p>\n<p><a href=\"https://i.stack.imgur.com/ziMEN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ziMEN.png\" alt=\"enter image description here\" /></a></p>\n<p>Most probably if you need to run your custom class you need to add it to <a href=\"https://jmeter.apache.org/usermanual/get-started.html#classpath\" rel=\"nofollow noreferrer\">JMeter Classpath</a> (along with any <a href=\"https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html\" rel=\"nofollow noreferrer\">dependencies</a>) like <a href=\"https://github.com/abstracta/jmeter-java-dsl/blob/master/jmeter-java-dsl/src/main/java/us/abstracta/jmeter/javadsl/core/engines/JmeterEnvironment.java#L45\" rel=\"nofollow noreferrer\">here</a></p>\n<p>You can check out <a href=\"https://github.com/abstracta/jmeter-java-dsl/issues/41#issuecomment-966715062\" rel=\"nofollow noreferrer\">Groovy code debug</a> ticket for some hints.</p>\n<p>More information: <a href=\"https://www.blazemeter.com/blog/jmeter-dsl\" rel=\"nofollow noreferrer\">JMeter DSL: Bringing Performance Testing Closer to Developers</a></p>\n"},{"tags":[],"owner":{"account_id":398350,"reputation":126,"user_id":3853437,"display_name":"rabelenda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698156858,"creation_date":1698156858,"answer_id":77352879,"question_id":76913623,"body_markdown":"As Dimitri mentioned, the general approach looks ok. \r\n\r\nI only want to point out that if you want to use a ramp up and then hold for duration, you should use something like this:\r\n\r\n```groovy\r\nthreadGroup()\r\n  .rampToAndHold(testParams.getThreads(), Duration.ofMinutes(testParams.getRumpUpTime()), Duration.ofMinutes(testParams.getLoadTime())),\r\n  .children(dslJsr223Sampler)\r\n```","title":"Java JMeter DSL. How to execute custom logic in threadGroup() method?","body":"<p>As Dimitri mentioned, the general approach looks ok.</p>\n<p>I only want to point out that if you want to use a ramp up and then hold for duration, you should use something like this:</p>\n<pre><code>threadGroup()\n  .rampToAndHold(testParams.getThreads(), Duration.ofMinutes(testParams.getRumpUpTime()), Duration.ofMinutes(testParams.getLoadTime())),\n  .children(dslJsr223Sampler)\n</code></pre>\n"}],"owner":{"account_id":15813290,"reputation":85,"user_id":11508174,"display_name":"Ker Laeda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1698156858,"creation_date":1692189507,"question_id":76913623,"body_markdown":"The problem: I need to execute UI autotests in the performance tests. Need to look at how many users can open the Web page and do some requests exactly from this page (performance test on the API is not enough). \r\n\r\nSo I use Java JMeter DSL for the performance testing.\r\nI have the next code:\r\n\r\n    TestPlanStats stats = testPlan(\r\n                threadGroup(\r\n                        testParams.getThreads(), Duration.ofMinutes(testParams.getLoadTime()),\r\n                        myCustomLogic\r\n                ).rampTo(testParams.getThreads(), Duration.ofMinutes(testParams.getRumpUpTime())),\r\n                influxDbListener(envSetting.getInfluxDbUrl())\r\n                        .measurement(&quot;ui-performance&quot;)\r\n        ).run();\r\n\r\n**The question is**: how to implement **myCustomLogic** in the threadGroup for execution of UI tests for each thread in the performance test?\r\n\r\nFor example, I already tried to put jsr223Sampler() with the script on Groovy.\r\n\r\nI have an implementation of UI autotest with the needed logic (open web page and other actions)\r\n\r\n    public class ApiSteps {\r\n\r\n    public void doSomeLogic() {\r\n        //do some actions\r\n    }\r\n\r\n}\r\n\r\nand put this script like this:\r\n\r\n            String script = &quot;Object apiStepsInstance = new ApiSteps();&quot; +\r\n                &quot;vars.putObject(\\&quot;apiSteps\\&quot;, apiStepsInstance)&quot; +\r\n                &quot;def apiSteps = vars.getObject(\\&quot;apiSteps\\&quot;)\\n&quot; +\r\n                &quot;apiSteps.doSomeLogic()&quot;;\r\n        DslJsr223Sampler dslJsr223Sampler = new DslJsr223Sampler(&quot;UI performance test&quot;, script);\r\n        dslJsr223Sampler.language(&quot;Groovy&quot;);\r\n        TestPlanStats stats = testPlan(\r\n                threadGroup(\r\n                        testParams.getThreads(), Duration.ofMinutes(testParams.getLoadTime()),\r\n                        dslJsr223Sampler\r\n                ).rampTo(testParams.getThreads(), Duration.ofMinutes(testParams.getRumpUpTime())),\r\n                influxDbListener(envSetting.getInfluxDbUrl())\r\n                        .measurement(&quot;ui-performance&quot;)\r\n        ).run();\r\n\r\nIn the script, I tried to call the **apiSteps.doSomeLogic()** java method.\r\n\r\nTell me please if this is a successful way to put Groovy script with calling java method please correct my script.\r\n\r\nIf the way of putting this Groovy script is wrong, please provide the way how can I do UI autotests during performance testing.\r\n\r\nThanks a lot for the answers.","title":"Java JMeter DSL. How to execute custom logic in threadGroup() method?","body":"<p>The problem: I need to execute UI autotests in the performance tests. Need to look at how many users can open the Web page and do some requests exactly from this page (performance test on the API is not enough).</p>\n<p>So I use Java JMeter DSL for the performance testing.\nI have the next code:</p>\n<pre><code>TestPlanStats stats = testPlan(\n            threadGroup(\n                    testParams.getThreads(), Duration.ofMinutes(testParams.getLoadTime()),\n                    myCustomLogic\n            ).rampTo(testParams.getThreads(), Duration.ofMinutes(testParams.getRumpUpTime())),\n            influxDbListener(envSetting.getInfluxDbUrl())\n                    .measurement(&quot;ui-performance&quot;)\n    ).run();\n</code></pre>\n<p><strong>The question is</strong>: how to implement <strong>myCustomLogic</strong> in the threadGroup for execution of UI tests for each thread in the performance test?</p>\n<p>For example, I already tried to put jsr223Sampler() with the script on Groovy.</p>\n<p>I have an implementation of UI autotest with the needed logic (open web page and other actions)</p>\n<pre><code>public class ApiSteps {\n\npublic void doSomeLogic() {\n    //do some actions\n}\n</code></pre>\n<p>}</p>\n<p>and put this script like this:</p>\n<pre><code>        String script = &quot;Object apiStepsInstance = new ApiSteps();&quot; +\n            &quot;vars.putObject(\\&quot;apiSteps\\&quot;, apiStepsInstance)&quot; +\n            &quot;def apiSteps = vars.getObject(\\&quot;apiSteps\\&quot;)\\n&quot; +\n            &quot;apiSteps.doSomeLogic()&quot;;\n    DslJsr223Sampler dslJsr223Sampler = new DslJsr223Sampler(&quot;UI performance test&quot;, script);\n    dslJsr223Sampler.language(&quot;Groovy&quot;);\n    TestPlanStats stats = testPlan(\n            threadGroup(\n                    testParams.getThreads(), Duration.ofMinutes(testParams.getLoadTime()),\n                    dslJsr223Sampler\n            ).rampTo(testParams.getThreads(), Duration.ofMinutes(testParams.getRumpUpTime())),\n            influxDbListener(envSetting.getInfluxDbUrl())\n                    .measurement(&quot;ui-performance&quot;)\n    ).run();\n</code></pre>\n<p>In the script, I tried to call the <strong>apiSteps.doSomeLogic()</strong> java method.</p>\n<p>Tell me please if this is a successful way to put Groovy script with calling java method please correct my script.</p>\n<p>If the way of putting this Groovy script is wrong, please provide the way how can I do UI autotests during performance testing.</p>\n<p>Thanks a lot for the answers.</p>\n"},{"tags":["java","amazon-web-services","amazon-dynamodb-dax"],"answers":[{"tags":[],"owner":{"account_id":6675420,"reputation":831,"user_id":5150230,"display_name":"Abdelrahman Elhaddad"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1508436814,"creation_date":1508436814,"answer_id":46836354,"question_id":46823189,"body_markdown":"DAX doesn&#39;t recognize DynamoDB operations for managing tables, in your case &quot;describeTable&quot;. Read and write operations are supported. See [documentation](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DAX.concepts.html) for detailed APIs.","title":"Not able to access dynamodb tables via DAX cluster","body":"<p>DAX doesn't recognize DynamoDB operations for managing tables, in your case \"describeTable\". Read and write operations are supported. See <a href=\"http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DAX.concepts.html\" rel=\"nofollow noreferrer\">documentation</a> for detailed APIs.</p>\n"},{"tags":[],"owner":{"account_id":9625381,"reputation":4042,"user_id":7145177,"display_name":"Pransh Tiwari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698156856,"creation_date":1698156856,"answer_id":77352878,"question_id":46823189,"body_markdown":"* DAX doesn&#39;t supports manage table operations, like `DescribeTable`.\r\n\r\n* This is quite weird because when we define the DAX access control through IAM, [Refer AWS Doc](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DAX.access-control.html); no matter the specific operation we need support for (eg: Only Read, Both Read and Write, etc); adding the action: dynamodb:DescribeTable is mandatory. \r\n\r\n* Because: the `dynamodb:DescribeTable` action is required for DAX to maintain metadata about the table.\r\n\r\n* But we cannot call the DescribeTable API through DAX client, as it it not supported. We still need to define it in IAM Policy (and in turn IAC) because it uses it beneath the hood as explained above.","title":"Not able to access dynamodb tables via DAX cluster","body":"<ul>\n<li><p>DAX doesn't supports manage table operations, like <code>DescribeTable</code>.</p>\n</li>\n<li><p>This is quite weird because when we define the DAX access control through IAM, <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DAX.access-control.html\" rel=\"nofollow noreferrer\">Refer AWS Doc</a>; no matter the specific operation we need support for (eg: Only Read, Both Read and Write, etc); adding the action: dynamodb:DescribeTable is mandatory.</p>\n</li>\n<li><p>Because: the <code>dynamodb:DescribeTable</code> action is required for DAX to maintain metadata about the table.</p>\n</li>\n<li><p>But we cannot call the DescribeTable API through DAX client, as it it not supported. We still need to define it in IAM Policy (and in turn IAC) because it uses it beneath the hood as explained above.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":11988894,"reputation":33,"user_id":8772657,"display_name":"Utharaa M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1331,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":46836354,"answer_count":2,"score":3,"last_activity_date":1698156856,"creation_date":1508389948,"question_id":46823189,"body_markdown":"Created a cluster `[cluster name : staging-dax-cluster.ckbrjt.clustercfg.dax.use1.cache.amazonaws.com]` in us-east-1 region . When i try to use the cluster getting the below exceptions.\r\n\r\nThe common lib logging backed is deprecated. Switch to the slf4j backend.\r\nCloud Watch appender is no longer supported. Use the stdOut appender or SLF4J backed.\r\n\r\n    Exception in thread &quot;main&quot; com.amazon.dax.client.exceptions.DaxServiceException: NotImplementedException\r\n    \tat com.amazon.dax.client.dynamodbv2.ExceptionTranslator.createValidationException(ExceptionTranslator.java:91)\r\n    \tat com.amazon.dax.client.dynamodbv2.ExceptionTranslator.translateException(ExceptionTranslator.java:80)\r\n    \tat com.amazon.dax.client.dynamodbv2.DaxClient.handleException(DaxClient.java:1898)\r\n    \tat com.amazon.dax.client.dynamodbv2.DaxClient.describeTable(DaxClient.java:610)\r\n    \tat com.amazon.dax.client.dynamodbv2.ClusterDaxClient$21.call(ClusterDaxClient.java:328)\r\n    \tat com.amazon.dax.client.dynamodbv2.ClusterDaxClient$21.call(ClusterDaxClient.java:325)\r\n    \tat com.amazon.dax.client.dynamodbv2.ClusterDaxClient$RetryHandler.makeRequestWithRetries(ClusterDaxClient.java:635)\r\n    \tat com.amazon.dax.client.dynamodbv2.ClusterDaxClient.makeReadRequestWithRetries(ClusterDaxClient.java:604)\r\n    \tat com.amazon.dax.client.dynamodbv2.ClusterDaxClient.describeTable(ClusterDaxClient.java:325)\r\n    \tat com.amazonaws.services.dynamodbv2.util.TableHelper.verifyTableExists(TableHelper.java:51)\r\n    \tat com.amazonaws.services.dynamodbv2.util.TableHelper.verifyOrCreateTable(TableHelper.java:117)\r\n    \tat com.amazonaws.services.dynamodbv2.transactions.TransactionManager.verifyOrCreateTransactionTable(TransactionManager.java:180)\r\n    \tat com.usermind.integrations.api.dao.DynamoDbPersistenceContext.verifyOrCreateTransactionTables(DynamoDbPersistenceContext.java:151)\r\n    \tat com.usermind.integrations.api.dao.DynamoDbPersistenceContext.&lt;init&gt;(DynamoDbPersistenceContext.java:138)\r\n    \tat com.usermind.integrations.api.App.initPersistenceContext(App.java:143)\r\n    \tat com.usermind.integrations.api.AbstractSparkApp.run(AbstractSparkApp.java:17)\r\n    \tat com.usermind.integrations.api.App.main(App.java:93)","title":"Not able to access dynamodb tables via DAX cluster","body":"<p>Created a cluster <code>[cluster name : staging-dax-cluster.ckbrjt.clustercfg.dax.use1.cache.amazonaws.com]</code> in us-east-1 region . When i try to use the cluster getting the below exceptions.</p>\n\n<p>The common lib logging backed is deprecated. Switch to the slf4j backend.\nCloud Watch appender is no longer supported. Use the stdOut appender or SLF4J backed.</p>\n\n<pre><code>Exception in thread \"main\" com.amazon.dax.client.exceptions.DaxServiceException: NotImplementedException\n    at com.amazon.dax.client.dynamodbv2.ExceptionTranslator.createValidationException(ExceptionTranslator.java:91)\n    at com.amazon.dax.client.dynamodbv2.ExceptionTranslator.translateException(ExceptionTranslator.java:80)\n    at com.amazon.dax.client.dynamodbv2.DaxClient.handleException(DaxClient.java:1898)\n    at com.amazon.dax.client.dynamodbv2.DaxClient.describeTable(DaxClient.java:610)\n    at com.amazon.dax.client.dynamodbv2.ClusterDaxClient$21.call(ClusterDaxClient.java:328)\n    at com.amazon.dax.client.dynamodbv2.ClusterDaxClient$21.call(ClusterDaxClient.java:325)\n    at com.amazon.dax.client.dynamodbv2.ClusterDaxClient$RetryHandler.makeRequestWithRetries(ClusterDaxClient.java:635)\n    at com.amazon.dax.client.dynamodbv2.ClusterDaxClient.makeReadRequestWithRetries(ClusterDaxClient.java:604)\n    at com.amazon.dax.client.dynamodbv2.ClusterDaxClient.describeTable(ClusterDaxClient.java:325)\n    at com.amazonaws.services.dynamodbv2.util.TableHelper.verifyTableExists(TableHelper.java:51)\n    at com.amazonaws.services.dynamodbv2.util.TableHelper.verifyOrCreateTable(TableHelper.java:117)\n    at com.amazonaws.services.dynamodbv2.transactions.TransactionManager.verifyOrCreateTransactionTable(TransactionManager.java:180)\n    at com.usermind.integrations.api.dao.DynamoDbPersistenceContext.verifyOrCreateTransactionTables(DynamoDbPersistenceContext.java:151)\n    at com.usermind.integrations.api.dao.DynamoDbPersistenceContext.&lt;init&gt;(DynamoDbPersistenceContext.java:138)\n    at com.usermind.integrations.api.App.initPersistenceContext(App.java:143)\n    at com.usermind.integrations.api.AbstractSparkApp.run(AbstractSparkApp.java:17)\n    at com.usermind.integrations.api.App.main(App.java:93)\n</code></pre>\n"},{"tags":["java","jface","graalvm"],"owner":{"account_id":15152676,"reputation":390,"user_id":10934555,"display_name":"Tony"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698156267,"creation_date":1698155645,"question_id":77352722,"body_markdown":"I am using the ImageRegistry in our project to manage image resources. \r\n\r\nAOT-Compilation with GraalVM packs all resources in the native-image with the directive &lt;br&gt;\r\n`-H:ResourceConfigurationFiles` That works fine.\r\n\r\n**BUT**: Is there a way to iterate over all resources during runtime, cause I have to put them all into the ImageRegistry. Just want to avoid a manually add-add-add...\r\n\r\nPreviously it was done by iterating over the jars in the classpath during runtime and filtering the desired resources and add them to the ImageRegistry.\r\n\r\n**BUT**: Since we have now a native-image this mechanism won&#39;t work anymore.\r\n\r\nAny hints?","title":"GraalVM and Resources in combination with ImageRegistry (JFace)","body":"<p>I am using the ImageRegistry in our project to manage image resources.</p>\n<p>AOT-Compilation with GraalVM packs all resources in the native-image with the directive <br>\n<code>-H:ResourceConfigurationFiles</code> That works fine.</p>\n<p><strong>BUT</strong>: Is there a way to iterate over all resources during runtime, cause I have to put them all into the ImageRegistry. Just want to avoid a manually add-add-add...</p>\n<p>Previously it was done by iterating over the jars in the classpath during runtime and filtering the desired resources and add them to the ImageRegistry.</p>\n<p><strong>BUT</strong>: Since we have now a native-image this mechanism won't work anymore.</p>\n<p>Any hints?</p>\n"},{"tags":["java","rest","jersey","jax-rs"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1425890494,"post_id":28937166,"comment_id":46130821,"body_markdown":"Also add the logging filter and see if any useful information comes up. `client.addFilter(new LoggingFilter());`","body":"Also add the logging filter and see if any useful information comes up. <code>client.addFilter(new LoggingFilter());</code>"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1425890514,"post_id":28937166,"comment_id":46130830,"body_markdown":"Also can you show your dependencies","body":"Also can you show your dependencies"},{"owner":{"account_id":1416134,"reputation":706,"user_id":1341775,"accept_rate":44,"display_name":"imprezzeb"},"score":0,"creation_date":1425945591,"post_id":28937166,"comment_id":46161412,"body_markdown":"@peeskillet, please check above logging filter and tomcat server log output and the included JARS on my project.","body":"@peeskillet, please check above logging filter and tomcat server log output and the included JARS on my project."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1425949920,"post_id":28937166,"comment_id":46162738,"body_markdown":"The error in the message body says &quot;The request sent by the client was syntactically incorrect&quot;, but I really don&#39;t see anything wrong. I&#39;ve tested this (with the Person param method) and it works fine for me.","body":"The error in the message body says &quot;The request sent by the client was syntactically incorrect&quot;, but I really don&#39;t see anything wrong. I&#39;ve tested this (with the Person param method) and it works fine for me."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1425950140,"post_id":28937166,"comment_id":46162789,"body_markdown":"If you have a running project that you can post to github or something, I can test it out, but I cannot currently reproduce the problem with what you&#39;ve posted. Check that it&#39;s not a problem with Tomcat. Maybe try it on another container. I don&#39;t know what that exception in Tomcat means. Doesn&#39;t really make any sense. But it doesn&#39;t look like it even has anything to do with Jersey, and it looks to be happening on start up, so I don&#39;t think it&#39;s request related.","body":"If you have a running project that you can post to github or something, I can test it out, but I cannot currently reproduce the problem with what you&#39;ve posted. Check that it&#39;s not a problem with Tomcat. Maybe try it on another container. I don&#39;t know what that exception in Tomcat means. Doesn&#39;t really make any sense. But it doesn&#39;t look like it even has anything to do with Jersey, and it looks to be happening on start up, so I don&#39;t think it&#39;s request related."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1425953228,"post_id":28937166,"comment_id":46163528,"body_markdown":"Another thing, `jersey-json` is dependent on other jars, which you don&#39;t have, Jackson, being the most important of those. `jackson-core-asl-1.7.1`, `jackson-mapper-asl-1.7.1`, `jackson-xc-1.7.1`, `jaxb-api-2.2.2`, `jaxb-impl-2.2.3-1`, `jettison-1.1`, `stax-api-1.0.1`, `stax-api-1.0.2`. There are others, but you already have them. This is one of the many reasons you should use a build tool like Maven. Just adding `jersey-json` as a dependency, would have pulled all those in. if you don&#39;t know Maven, I strongly urge you to learn it.","body":"Another thing, <code>jersey-json</code> is dependent on other jars, which you don&#39;t have, Jackson, being the most important of those. <code>jackson-core-asl-1.7.1</code>, <code>jackson-mapper-asl-1.7.1</code>, <code>jackson-xc-1.7.1</code>, <code>jaxb-api-2.2.2</code>, <code>jaxb-impl-2.2.3-1</code>, <code>jettison-1.1</code>, <code>stax-api-1.0.1</code>, <code>stax-api-1.0.2</code>. There are others, but you already have them. This is one of the many reasons you should use a build tool like Maven. Just adding <code>jersey-json</code> as a dependency, would have pulled all those in. if you don&#39;t know Maven, I strongly urge you to learn it."},{"owner":{"account_id":1416134,"reputation":706,"user_id":1341775,"accept_rate":44,"display_name":"imprezzeb"},"score":0,"creation_date":1425956515,"post_id":28937166,"comment_id":46164239,"body_markdown":"@peeskillet, yes I&#39;ve used Maven and Gradle in my projects, but this one is still using ant. I tried to create a very simple project with the above JARS I&#39;ve listed and it worked, I just relocated my jaxb.properties to the upper level package. But when I tried it also in the real project it doesn&#39;t. I really think it is a conflict in some of the JARS which i have o find out first. I&#39;ll let you know once I figure it out.","body":"@peeskillet, yes I&#39;ve used Maven and Gradle in my projects, but this one is still using ant. I tried to create a very simple project with the above JARS I&#39;ve listed and it worked, I just relocated my jaxb.properties to the upper level package. But when I tried it also in the real project it doesn&#39;t. I really think it is a conflict in some of the JARS which i have o find out first. I&#39;ll let you know once I figure it out."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1425957486,"post_id":28937166,"comment_id":46164444,"body_markdown":"If you think it&#39;s a conflict with dependencies, try this, create a new Maven project, and just add these dependencies `jersey-server`, `jersey-json`, `jersey-client`. [Configure the app](https://jersey.java.net/documentation/1.18/user-guide.html#d4e188). [Configure the JSON support](https://jersey.java.net/documentation/1.18/user-guide.html#json.pojo.approach.section). Create a simple resource using JSON/POJO. Test it out. If it works (which is should as I&#39;ve tested), then compare the dependencies with your project, and take out what you don&#39;t need or add what you need.","body":"If you think it&#39;s a conflict with dependencies, try this, create a new Maven project, and just add these dependencies <code>jersey-server</code>, <code>jersey-json</code>, <code>jersey-client</code>. <a href=\"https://jersey.java.net/documentation/1.18/user-guide.html#d4e188\" rel=\"nofollow noreferrer\">Configure the app</a>. <a href=\"https://jersey.java.net/documentation/1.18/user-guide.html#json.pojo.approach.section\" rel=\"nofollow noreferrer\">Configure the JSON support</a>. Create a simple resource using JSON/POJO. Test it out. If it works (which is should as I&#39;ve tested), then compare the dependencies with your project, and take out what you don&#39;t need or add what you need."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1425957771,"post_id":28937166,"comment_id":46164506,"body_markdown":"All the groupId&#39;s are `com.sun.jersey` and version `1.8`","body":"All the groupId&#39;s are <code>com.sun.jersey</code> and version <code>1.8</code>"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1425957906,"post_id":28937166,"comment_id":46164532,"body_markdown":"Alternatively, you can use a Maven archetype, with coordinates `com.sun.jersey.archetypes : jersey-quickstart-webapp : 1.8`. This should get a webapp up and running the quickest, with the above mentioned dependencies and web.xml configuration","body":"Alternatively, you can use a Maven archetype, with coordinates <code>com.sun.jersey.archetypes : jersey-quickstart-webapp : 1.8</code>. This should get a webapp up and running the quickest, with the above mentioned dependencies and web.xml configuration"},{"owner":{"account_id":1416134,"reputation":706,"user_id":1341775,"accept_rate":44,"display_name":"imprezzeb"},"score":0,"creation_date":1426201562,"post_id":28937166,"comment_id":46287066,"body_markdown":"My problem is the same with this post http://stackoverflow.com/questions/15435899/getting-400-bad-request-from-same-application-on-weblogic-on-red-hat, I tried to change it from using JAXBElement to String and it works.","body":"My problem is the same with this post <a href=\"http://stackoverflow.com/questions/15435899/getting-400-bad-request-from-same-application-on-weblogic-on-red-hat\" title=\"getting 400 bad request from same application on weblogic on red hat\">stackoverflow.com/questions/15435899/&hellip;</a>, I tried to change it from using JAXBElement to String and it works."},{"owner":{"account_id":1416134,"reputation":706,"user_id":1341775,"accept_rate":44,"display_name":"imprezzeb"},"score":0,"creation_date":1426201974,"post_id":28937166,"comment_id":46287227,"body_markdown":"Tried to create new maven project and used JAXBElement and all is well.","body":"Tried to create new maven project and used JAXBElement and all is well."},{"owner":{"account_id":1416134,"reputation":706,"user_id":1341775,"accept_rate":44,"display_name":"imprezzeb"},"score":0,"creation_date":1426202905,"post_id":28937166,"comment_id":46287517,"body_markdown":"Aha, using @Consumes({MediaType.APPLICATION_JSON}), JAXBElement will not work. But if you use @Consumes({MediaType.APPLICATION_XML}), then it will. I think JAXB has problem marshalling JSON to JAXBElement?","body":"Aha, using @Consumes({MediaType.APPLICATION_JSON}), JAXBElement will not work. But if you use @Consumes({MediaType.APPLICATION_XML}), then it will. I think JAXB has problem marshalling JSON to JAXBElement?"}],"answers":[{"tags":[],"owner":{"account_id":2111435,"reputation":4511,"user_id":1876644,"accept_rate":71,"display_name":"Charu Khurana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1425919634,"creation_date":1425919634,"answer_id":28947426,"question_id":28937166,"body_markdown":"Your `createPerson()` method is not annotated with `@Path(&quot;/person&quot;)` annotation, where Path is of type `javax.ws.rs.Path` and your service interface also needs to be annotated with `@Path(&quot;/api&quot;)`","title":"Always getting 400 - Bad request when posting data in a REST/JAX-RS","body":"<p>Your <code>createPerson()</code> method is not annotated with <code>@Path(\"/person\")</code> annotation, where Path is of type <code>javax.ws.rs.Path</code> and your service interface also needs to be annotated with <code>@Path(\"/api\")</code></p>\n"}],"owner":{"account_id":1416134,"reputation":706,"user_id":1341775,"accept_rate":44,"display_name":"imprezzeb"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10927,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698156205,"creation_date":1425886946,"question_id":28937166,"body_markdown":"Person.java\r\n\r\n    @XmlRootElement\r\n    public class Person {\r\n        \r\n        private int id;\r\n        private String fname;\r\n        private String lname;\r\n    \r\n        // getter and setter\r\n    }\r\n\r\nREST POST service\r\n\r\n    @POST    \r\n    @Consumes({MediaType.APPLICATION_JSON}) \r\n    public void createPerson(JAXBElement&lt;Person&gt; person) {\r\n          Person p = person.getValue();\r\n          System.out.println(&quot;========= Person ===========&quot;);\r\n          System.out.println(p.getFname() + &quot; &quot; + p.getLname());\r\n          System.out.println(&quot;========= Person ===========&quot;);\r\n    }\r\n\r\nOR this one\r\n\r\n    @POST    \r\n    @Consumes({MediaType.APPLICATION_JSON}) \r\n    public void createPerson(Person person) {          \r\n          System.out.println(&quot;========= Person ===========&quot;);\r\n          System.out.println(person.getFname() + &quot; &quot; + person.getLname());\r\n          System.out.println(&quot;========= Person ===========&quot;);\r\n    }\r\n\r\n\r\nTest Client: Always return 400 - Bad request.\r\n\r\n \r\n\r\n    ClientConfig config = new DefaultClientConfig();\r\n     Client client = Client.create(config);\r\n     WebResource service = client.resource(&quot;http://localhost:8084/rest/api/person&quot;);\r\n                                  \r\n     Person person = new Person();\r\n     person.setId(1);\r\n     person.setFname(&quot;John&quot;);\r\n     person.setLname(&quot;Doe&quot;);                \r\n     ClientResponse resp = service.type(MediaType.APPLICATION_JSON).post(ClientResponse.class, person);\r\n        \r\n     System.out.println(resp.getStatus()); //Always return 400 - Bad request\r\n\r\n\r\nAny help is much appreciated. By the way I am using jersey 1.8. I can make it work in latest Jersey version, but I need to make it work also in previous version of Jersey. \r\n\r\nLoggingFilter output:\r\n\r\n    Mar 10, 2015 7:47:24 AM com.sun.jersey.api.client.filter.LoggingFilter log\r\n    INFO: 1 * Client out-bound request\r\n    1 &gt; POST http://localhost:8084/rest/api/person\r\n    1 &gt; Content-Type: application/json\r\n    {&quot;fname&quot;:&quot;d&quot;,&quot;id&quot;:&quot;0&quot;,&quot;lname&quot;:&quot;d&quot;}\r\n    \r\n    Mar 10, 2015 7:47:24 AM com.sun.jersey.api.client.filter.LoggingFilter log\r\n    INFO: 1 * Client in-bound response\r\n    1 &lt; 400\r\n    1 &lt; Date: Mon, 09 Mar 2015 23:47:24 GMT\r\n    1 &lt; Content-Length: 1004\r\n    1 &lt; Connection: close\r\n    1 &lt; Content-Type: text/html;charset=utf-8\r\n    1 &lt; Server: Apache-Coyote/1.1\r\n    1 &lt; \r\n    &lt;html&gt;&lt;head&gt;&lt;title&gt;Apache Tomcat/7.0.27 - Error report&lt;/title&gt;&lt;style&gt;&lt;!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--&gt;&lt;/style&gt; &lt;/head&gt;&lt;body&gt;&lt;h1&gt;HTTP Status 400 - Bad Request&lt;/h1&gt;&lt;HR size=&quot;1&quot; noshade=&quot;noshade&quot;&gt;&lt;p&gt;&lt;b&gt;type&lt;/b&gt; Status report&lt;/p&gt;&lt;p&gt;&lt;b&gt;message&lt;/b&gt; &lt;u&gt;Bad Request&lt;/u&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;description&lt;/b&gt; &lt;u&gt;The request sent by the client was syntactically incorrect (Bad Request).&lt;/u&gt;&lt;/p&gt;&lt;HR size=&quot;1&quot; noshade=&quot;noshade&quot;&gt;&lt;h3&gt;Apache Tomcat/7.0.27&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;\r\n\r\n\r\nApache Tomcat Server Log output: (But I don&#39;t think it has implication in the 400 - Bad Request?)\r\n\r\n    Mar 10, 2015 7:29:20 AM org.apache.catalina.core.StandardContext loadOnStartup\r\n    SEVERE: Servlet /billing threw load() exception\r\n    javax.servlet.ServletException: missing jspFile\r\n    \tat org.apache.jasper.servlet.JspServlet.init(JspServlet.java:123)\r\n    \tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)\r\n    \tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)\r\n    \tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)\r\n    \tat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)\r\n    \tat org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)\r\n    \tat org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\r\n    \tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:166)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n    \tat java.lang.Thread.run(Thread.java:722)\r\n\r\nDependencies (JARS):\r\n\r\n* activation.jar\r\n* asm-3.1.jar\r\n* commonj.sdo-2.1.1\r\n* eclipselink-2.6.0-RC1\r\n* jackson-jaxrs-1.7.1\r\n* javax.json-1.0.4\r\n* javax.persistence-2.1.0\r\n* jaxb-api\r\n* jersey-apache-client-1.8\r\n* jersey-bundle-1.8\r\n* jersey-client-1.8\r\n* jersey-core-1.8\r\n* jersey-json-1.8\r\n* jersey-server-1.8\r\n* jsr173_1.0_api\r\n* jstl-1.2\r\n* org.eclipse.persistence.moxy-2.6.0-RC1\r\n* servlet-api-2.5\r\n* validation-api-1.1.0.Final","title":"Always getting 400 - Bad request when posting data in a REST/JAX-RS","body":"<p>Person.java</p>\n<pre><code>@XmlRootElement\npublic class Person {\n    \n    private int id;\n    private String fname;\n    private String lname;\n\n    // getter and setter\n}\n</code></pre>\n<p>REST POST service</p>\n<pre><code>@POST    \n@Consumes({MediaType.APPLICATION_JSON}) \npublic void createPerson(JAXBElement&lt;Person&gt; person) {\n      Person p = person.getValue();\n      System.out.println(&quot;========= Person ===========&quot;);\n      System.out.println(p.getFname() + &quot; &quot; + p.getLname());\n      System.out.println(&quot;========= Person ===========&quot;);\n}\n</code></pre>\n<p>OR this one</p>\n<pre><code>@POST    \n@Consumes({MediaType.APPLICATION_JSON}) \npublic void createPerson(Person person) {          \n      System.out.println(&quot;========= Person ===========&quot;);\n      System.out.println(person.getFname() + &quot; &quot; + person.getLname());\n      System.out.println(&quot;========= Person ===========&quot;);\n}\n</code></pre>\n<p>Test Client: Always return 400 - Bad request.</p>\n<pre><code>ClientConfig config = new DefaultClientConfig();\n Client client = Client.create(config);\n WebResource service = client.resource(&quot;http://localhost:8084/rest/api/person&quot;);\n                              \n Person person = new Person();\n person.setId(1);\n person.setFname(&quot;John&quot;);\n person.setLname(&quot;Doe&quot;);                \n ClientResponse resp = service.type(MediaType.APPLICATION_JSON).post(ClientResponse.class, person);\n    \n System.out.println(resp.getStatus()); //Always return 400 - Bad request\n</code></pre>\n<p>Any help is much appreciated. By the way I am using jersey 1.8. I can make it work in latest Jersey version, but I need to make it work also in previous version of Jersey.</p>\n<p>LoggingFilter output:</p>\n<pre><code>Mar 10, 2015 7:47:24 AM com.sun.jersey.api.client.filter.LoggingFilter log\nINFO: 1 * Client out-bound request\n1 &gt; POST http://localhost:8084/rest/api/person\n1 &gt; Content-Type: application/json\n{&quot;fname&quot;:&quot;d&quot;,&quot;id&quot;:&quot;0&quot;,&quot;lname&quot;:&quot;d&quot;}\n\nMar 10, 2015 7:47:24 AM com.sun.jersey.api.client.filter.LoggingFilter log\nINFO: 1 * Client in-bound response\n1 &lt; 400\n1 &lt; Date: Mon, 09 Mar 2015 23:47:24 GMT\n1 &lt; Content-Length: 1004\n1 &lt; Connection: close\n1 &lt; Content-Type: text/html;charset=utf-8\n1 &lt; Server: Apache-Coyote/1.1\n1 &lt; \n&lt;html&gt;&lt;head&gt;&lt;title&gt;Apache Tomcat/7.0.27 - Error report&lt;/title&gt;&lt;style&gt;&lt;!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--&gt;&lt;/style&gt; &lt;/head&gt;&lt;body&gt;&lt;h1&gt;HTTP Status 400 - Bad Request&lt;/h1&gt;&lt;HR size=&quot;1&quot; noshade=&quot;noshade&quot;&gt;&lt;p&gt;&lt;b&gt;type&lt;/b&gt; Status report&lt;/p&gt;&lt;p&gt;&lt;b&gt;message&lt;/b&gt; &lt;u&gt;Bad Request&lt;/u&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;description&lt;/b&gt; &lt;u&gt;The request sent by the client was syntactically incorrect (Bad Request).&lt;/u&gt;&lt;/p&gt;&lt;HR size=&quot;1&quot; noshade=&quot;noshade&quot;&gt;&lt;h3&gt;Apache Tomcat/7.0.27&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n<p>Apache Tomcat Server Log output: (But I don't think it has implication in the 400 - Bad Request?)</p>\n<pre><code>Mar 10, 2015 7:29:20 AM org.apache.catalina.core.StandardContext loadOnStartup\nSEVERE: Servlet /billing threw load() exception\njavax.servlet.ServletException: missing jspFile\n    at org.apache.jasper.servlet.JspServlet.init(JspServlet.java:123)\n    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)\n    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)\n    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)\n    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)\n    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)\n    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:166)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n    at java.lang.Thread.run(Thread.java:722)\n</code></pre>\n<p>Dependencies (JARS):</p>\n<ul>\n<li>activation.jar</li>\n<li>asm-3.1.jar</li>\n<li>commonj.sdo-2.1.1</li>\n<li>eclipselink-2.6.0-RC1</li>\n<li>jackson-jaxrs-1.7.1</li>\n<li>javax.json-1.0.4</li>\n<li>javax.persistence-2.1.0</li>\n<li>jaxb-api</li>\n<li>jersey-apache-client-1.8</li>\n<li>jersey-bundle-1.8</li>\n<li>jersey-client-1.8</li>\n<li>jersey-core-1.8</li>\n<li>jersey-json-1.8</li>\n<li>jersey-server-1.8</li>\n<li>jsr173_1.0_api</li>\n<li>jstl-1.2</li>\n<li>org.eclipse.persistence.moxy-2.6.0-RC1</li>\n<li>servlet-api-2.5</li>\n<li>validation-api-1.1.0.Final</li>\n</ul>\n"},{"tags":["java","lambda","kotlin"],"comments":[{"owner":{"account_id":2938544,"reputation":1521,"user_id":3362350,"display_name":"Jacob Zimmerman"},"score":3,"creation_date":1454449813,"post_id":35161913,"comment_id":58047377,"body_markdown":"First off, the function you defined does not have the same name as the one you&#39;re calling (First vs FirstOrDefault).","body":"First off, the function you defined does not have the same name as the one you&#39;re calling (First vs FirstOrDefault)."},{"owner":{"account_id":49385,"reputation":93759,"user_id":147024,"display_name":"yole"},"score":0,"creation_date":1454452279,"post_id":35161913,"comment_id":58048597,"body_markdown":"How are you compiling your Java project?","body":"How are you compiling your Java project?"},{"owner":{"account_id":1661572,"reputation":1575,"user_id":1529758,"accept_rate":100,"display_name":"06needhamt"},"score":0,"creation_date":1454496249,"post_id":35161913,"comment_id":58066754,"body_markdown":"Using gradle and IntelliJ 15 and I fixed the typo","body":"Using gradle and IntelliJ 15 and I fixed the typo"},{"owner":{"account_id":49385,"reputation":93759,"user_id":147024,"display_name":"yole"},"score":2,"creation_date":1454501223,"post_id":35161913,"comment_id":58070177,"body_markdown":"Does your Java module include the Kotlin runtime in its dependencies? It needs to.","body":"Does your Java module include the Kotlin runtime in its dependencies? It needs to."},{"owner":{"account_id":1661572,"reputation":1575,"user_id":1529758,"accept_rate":100,"display_name":"06needhamt"},"score":0,"creation_date":1454509073,"post_id":35161913,"comment_id":58075867,"body_markdown":"Yes it does all three jars","body":"Yes it does all three jars"}],"answers":[{"tags":[],"owner":{"account_id":7689484,"reputation":149,"user_id":5826224,"accept_rate":80,"display_name":"Adhish Lal"},"down_vote_count":8,"up_vote_count":0,"is_accepted":false,"score":-8,"last_activity_date":1454500579,"creation_date":1454500579,"answer_id":35176389,"question_id":35161913,"body_markdown":"Method 1) Search for Function1 in your project file and rename it to First.\r\n\r\nMethod 2) Search for Function1 in your project file and remove all its occurrences.","title":"Kotlin cannot access kotlin.jvm.functions.Function1 when calling kotlin function with java lambda","body":"<p>Method 1) Search for Function1 in your project file and rename it to First.</p>\n\n<p>Method 2) Search for Function1 in your project file and remove all its occurrences.</p>\n"},{"tags":[],"owner":{"account_id":5544002,"reputation":5430,"user_id":4399414,"display_name":"Sdghasemi"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1555579353,"creation_date":1555579353,"answer_id":55742956,"question_id":35161913,"body_markdown":"My problem got fixed when I configured Kotlin compiler and runtime for my Java module with the latest stable version (currently 1.3.30)\r\n\r\nJust go to **Tools &gt; Kotlin &gt; Configure Kotlin in Project &gt; Android with Gradle** and choose your Java module with **Single module** radio button selected then select your version and **OK**.","title":"Kotlin cannot access kotlin.jvm.functions.Function1 when calling kotlin function with java lambda","body":"<p>My problem got fixed when I configured Kotlin compiler and runtime for my Java module with the latest stable version (currently 1.3.30)</p>\n\n<p>Just go to <strong>Tools > Kotlin > Configure Kotlin in Project > Android with Gradle</strong> and choose your Java module with <strong>Single module</strong> radio button selected then select your version and <strong>OK</strong>.</p>\n"},{"tags":[],"owner":{"account_id":15211392,"reputation":1754,"user_id":10976088,"display_name":"Ghasem Sadeghi"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1575098787,"creation_date":1575098787,"answer_id":59114147,"question_id":35161913,"body_markdown":"**Another Solution:**&lt;br&gt;\r\n\r\nIf you have several modules in your android project, please make sure you have added the below config to every module that uses the kotlin:&lt;br&gt;\r\n\r\n**Step(1)- Project build.gradle:&lt;br&gt;**\r\n```\r\n// Project build.gradle file.\r\nbuildscript {\r\n    ext.kotlin_version = &#39;1.3.30&#39;\r\n    ...\r\n    dependencies {\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n    }\r\n}\r\n\r\n```\r\n**Step(2)- Inside each module using kotlin:&lt;br&gt;**\r\n```\r\napply plugin: &#39;kotlin-android-extensions&#39;\r\napply plugin: &#39;kotlin-android&#39;\r\n\r\n...\r\n\r\ndependencies {\r\n   implementation &quot;androidx.core:core-ktx:1.0.1&quot;\r\n   implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\r\n}\r\n\r\n```\r\nReference:\r\n&lt;a href=&quot;https://developer.android.com/kotlin/add-kotlin&quot;&gt;Add Kotlin to an existing app&lt;/a&gt;\r\n","title":"Kotlin cannot access kotlin.jvm.functions.Function1 when calling kotlin function with java lambda","body":"<p><strong>Another Solution:</strong><br></p>\n\n<p>If you have several modules in your android project, please make sure you have added the below config to every module that uses the kotlin:<br></p>\n\n<p><strong>Step(1)- Project build.gradle:<br></strong></p>\n\n<pre><code>// Project build.gradle file.\nbuildscript {\n    ext.kotlin_version = '1.3.30'\n    ...\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\n</code></pre>\n\n<p><strong>Step(2)- Inside each module using kotlin:<br></strong></p>\n\n<pre><code>apply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-android'\n\n...\n\ndependencies {\n   implementation \"androidx.core:core-ktx:1.0.1\"\n   implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n}\n\n</code></pre>\n\n<p>Reference:\n<a href=\"https://developer.android.com/kotlin/add-kotlin\" rel=\"noreferrer\">Add Kotlin to an existing app</a></p>\n"},{"tags":[],"owner":{"account_id":11259570,"reputation":916,"user_id":8258305,"accept_rate":60,"display_name":"Mohd Qasim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668590601,"creation_date":1668590601,"answer_id":74457969,"question_id":35161913,"body_markdown":"**Android Studio:**\r\n\r\nin my case, I have change the signature of the inner function which is making the cause of this exception. try to `clean` your project and run the app, exception will disappear  ","title":"Kotlin cannot access kotlin.jvm.functions.Function1 when calling kotlin function with java lambda","body":"<p><strong>Android Studio:</strong></p>\n<p>in my case, I have change the signature of the inner function which is making the cause of this exception. try to <code>clean</code> your project and run the app, exception will disappear</p>\n"}],"owner":{"account_id":1661572,"reputation":1575,"user_id":1529758,"accept_rate":100,"display_name":"06needhamt"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17572,"favorite_count":0,"down_vote_count":1,"up_vote_count":16,"accepted_answer_id":55742956,"answer_count":4,"score":15,"last_activity_date":1698156084,"creation_date":1454440323,"question_id":35161913,"body_markdown":"I am trying to call the following Kotlin function from Java \r\n\r\n    override fun First(list: LinqList&lt;ElementType&gt;, condition: (ElementType) -&gt; Boolean) : ElementType\r\n\r\nlike this\r\n\r\n    int first = list.First(list,(x) -&gt; x == 5);\r\n\r\nbut i get the following error \r\n\r\n    Error java: cannot access kotlin.jvm.functions.Function1\r\n      class file for kotlin.jvm.functions.Function1 not found\r\n\r\nI have tried googling it but i can not find the answer anywhere \r\n\r\nThanks in advance","title":"Kotlin cannot access kotlin.jvm.functions.Function1 when calling kotlin function with java lambda","body":"<p>I am trying to call the following Kotlin function from Java </p>\n\n<pre><code>override fun First(list: LinqList&lt;ElementType&gt;, condition: (ElementType) -&gt; Boolean) : ElementType\n</code></pre>\n\n<p>like this</p>\n\n<pre><code>int first = list.First(list,(x) -&gt; x == 5);\n</code></pre>\n\n<p>but i get the following error </p>\n\n<pre><code>Error java: cannot access kotlin.jvm.functions.Function1\n  class file for kotlin.jvm.functions.Function1 not found\n</code></pre>\n\n<p>I have tried googling it but i can not find the answer anywhere </p>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","graalvm","graalvm-native-image"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1697833399,"post_id":77323544,"comment_id":136333969,"body_markdown":"can you create a reproducer ? it will be easier to investigate with proper build gradle and code and all. also do not forget to put which commands do you use for creating the native binary","body":"can you create a reproducer ? it will be easier to investigate with proper build gradle and code and all. also do not forget to put which commands do you use for creating the native binary"}],"answers":[{"tags":[],"owner":{"account_id":15152676,"reputation":390,"user_id":10934555,"display_name":"Tony"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698156066,"creation_date":1698156066,"answer_id":77352784,"question_id":77323544,"body_markdown":"Got it, it worked with the following combination:\r\n\r\n - I used the Graal-Agent to generate metadata-files ([Tracing Agent][1]) \r\n - Added all of them to the gradle definition like this\r\n\r\n        buildArgs.add(&quot;-H:JNIConfigurationFiles=${projectDir}/src/main/resources/conf/jni-config.json&quot;)\r\n        buildArgs.add(&quot;-H:DynamicProxyConfigurationFiles=${projectDir}/src/main/resources/conf/proxy-config.json&quot;)\r\n        buildArgs.add(&quot;-H:ReflectionConfigurationFiles=${projectDir}/src/main/resources/conf/reflect-config.json&quot;)\r\n        buildArgs.add(&quot;-H:ResourceConfigurationFiles=${projectDir}/src/main/resources/conf/resource-config.json&quot;)\r\n\r\n- added `buildArgs.add(&#39;-H:+JNI&#39;)`\r\n\r\n- removed `buildArgs.add(&#39;--initialize-at-build-time&#39;)` (Don&#39;t know why this is required)\r\n\r\n  [1]: https://www.graalvm.org/latest/reference-manual/native-image/metadata/AutomaticMetadataCollection/\r\n\r\n","title":"GraalVM and JNA dependency","body":"<p>Got it, it worked with the following combination:</p>\n<ul>\n<li><p>I used the Graal-Agent to generate metadata-files (<a href=\"https://www.graalvm.org/latest/reference-manual/native-image/metadata/AutomaticMetadataCollection/\" rel=\"nofollow noreferrer\">Tracing Agent</a>)</p>\n</li>\n<li><p>Added all of them to the gradle definition like this</p>\n<pre><code> buildArgs.add(&quot;-H:JNIConfigurationFiles=${projectDir}/src/main/resources/conf/jni-config.json&quot;)\n buildArgs.add(&quot;-H:DynamicProxyConfigurationFiles=${projectDir}/src/main/resources/conf/proxy-config.json&quot;)\n buildArgs.add(&quot;-H:ReflectionConfigurationFiles=${projectDir}/src/main/resources/conf/reflect-config.json&quot;)\n buildArgs.add(&quot;-H:ResourceConfigurationFiles=${projectDir}/src/main/resources/conf/resource-config.json&quot;)\n</code></pre>\n</li>\n<li><p>added <code>buildArgs.add('-H:+JNI')</code></p>\n</li>\n<li><p>removed <code>buildArgs.add('--initialize-at-build-time')</code> (Don't know why this is required)</p>\n</li>\n</ul>\n"}],"owner":{"account_id":15152676,"reputation":390,"user_id":10934555,"display_name":"Tony"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698156066,"creation_date":1697716569,"question_id":77323544,"body_markdown":"I can not start my application with JNA dependencies. Compilation of the app was ok, but on starting/runtime \r\nthe JNA library can not be found. From the IDE - no problem but not from the native-compiled version.\r\nDid I forget something for loading resources? How can I configure graalvm to make them find the dependency? I am using the gradle-plugin: `org.graalvm.buildtools.native`\r\n\r\n    Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: Native library (com/sun/jna/win32-x86-64/jnidispatch.dll) not found in resource path ()\r\n        at com.sun.jna.Native.loadNativeDispatchLibraryFromClasspath(Native.java:1059)\r\n        at com.sun.jna.Native.loadNativeDispatchLibrary(Native.java:1015)\r\n        at com.sun.jna.Native.&lt;clinit&gt;(Native.java:221)\r\n        at com.sun.jna.NativeLong.&lt;clinit&gt;(NativeLong.java:35)\r\n        at java.base@17.0.8/java.lang.Class.ensureInitialized(DynamicHub.java:579)\r\n\r\n","title":"GraalVM and JNA dependency","body":"<p>I can not start my application with JNA dependencies. Compilation of the app was ok, but on starting/runtime\nthe JNA library can not be found. From the IDE - no problem but not from the native-compiled version.\nDid I forget something for loading resources? How can I configure graalvm to make them find the dependency? I am using the gradle-plugin: <code>org.graalvm.buildtools.native</code></p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: Native library (com/sun/jna/win32-x86-64/jnidispatch.dll) not found in resource path ()\n    at com.sun.jna.Native.loadNativeDispatchLibraryFromClasspath(Native.java:1059)\n    at com.sun.jna.Native.loadNativeDispatchLibrary(Native.java:1015)\n    at com.sun.jna.Native.&lt;clinit&gt;(Native.java:221)\n    at com.sun.jna.NativeLong.&lt;clinit&gt;(NativeLong.java:35)\n    at java.base@17.0.8/java.lang.Class.ensureInitialized(DynamicHub.java:579)\n</code></pre>\n"},{"tags":["java","spring-boot","wait","sleep"],"answers":[{"tags":[],"owner":{"account_id":8305547,"reputation":140,"user_id":6242707,"accept_rate":50,"display_name":"higz555"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698096753,"creation_date":1698096753,"answer_id":77348437,"question_id":77348068,"body_markdown":"It is never a good idea to implement a manual wait in a REST API. If it&#39;s a resource you&#39;re waiting for you should poll instead.\r\n\r\nBut anyways, `System.currentTimeMillis()` will return quite a large number. \r\nExample: 1426349294842\r\n\r\nThe request is timing out as the `while` is being iterated over 200 million times given the above logic.\r\n\r\nIf you really require a wait use `TaskScheduler`\r\n\r\n    taskScheduler.schedule(\r\n        () -&gt; {\r\n          // logic to implement after time elapses\r\n        }, \r\n        new Date(OffsetDateTime.now().plusSeconds(5).toInstant().toEpochMilli())\r\n    );\r\n\r\n","title":"Spring boot connection timed out","body":"<p>It is never a good idea to implement a manual wait in a REST API. If it's a resource you're waiting for you should poll instead.</p>\n<p>But anyways, <code>System.currentTimeMillis()</code> will return quite a large number.\nExample: 1426349294842</p>\n<p>The request is timing out as the <code>while</code> is being iterated over 200 million times given the above logic.</p>\n<p>If you really require a wait use <code>TaskScheduler</code></p>\n<pre><code>taskScheduler.schedule(\n    () -&gt; {\n      // logic to implement after time elapses\n    }, \n    new Date(OffsetDateTime.now().plusSeconds(5).toInstant().toEpochMilli())\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4773395,"reputation":11,"user_id":3857331,"display_name":"user3857331"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698155896,"creation_date":1698155810,"answer_id":77352742,"question_id":77348068,"body_markdown":"The issue was that i created a file in target directory using file.createNewFile() and intellij auto reload restarts the application because of the new file in the classpath which cuts the connection when there&#39;s enough time which is provided by the Thread.sleep(5000).","title":"Spring boot connection timed out","body":"<p>The issue was that i created a file in target directory using file.createNewFile() and intellij auto reload restarts the application because of the new file in the classpath which cuts the connection when there's enough time which is provided by the Thread.sleep(5000).</p>\n"}],"owner":{"account_id":4773395,"reputation":11,"user_id":3857331,"display_name":"user3857331"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77352742,"answer_count":2,"score":1,"last_activity_date":1698155896,"creation_date":1698092040,"question_id":77348068,"body_markdown":"I do a wait for 5 seconds in a spring boot method and i&#39;m getting a connection timed out exception.\r\n\r\n   \r\n```\r\n   @PostMapping(value=&quot;/api/stt&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n   public ResponseEntity endPoint(@RequestBody String payload) throws Exception {\r\n   ...\r\n   int delay = 5000; \r\n   long start = System.currentTimeMillis();\r\n   while(start &gt;= System.currentTimeMillis() - delay);\r\n   ...\r\n   }\r\n```\r\n\r\n\r\n```\r\njava.net.ConnectException: Connection timed out: connect\r\n   at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]\r\n   at java.base/sun.nio.ch.Net.connect(Net.java:579) ~[na:na]\r\n   at java.base/sun.nio.ch.Net.connect(Net.java:568) ~[na:na]\r\n   at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588) ~[na:na]\r\n   at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\r\n   at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\r\n   at net.schmizz.sshj.SocketClient.connect(SocketClient.java:126) ~[sshj-0.27.0.jar:0.27.0]`\r\n```\r\n\r\n\r\n\r\n   \r\nI already tried wait and Thread.sleep as well as TimeUnit.SECONDS.sleep(5); and when i do a post with postman i get &quot;Error: socket hang up&quot; without any exception in Intellij.\r\n\r\nAny help would be appreciated\r\n[Postman screenshot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/77WzB.png","title":"Spring boot connection timed out","body":"<p>I do a wait for 5 seconds in a spring boot method and i'm getting a connection timed out exception.</p>\n<pre><code>   @PostMapping(value=&quot;/api/stt&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\n   public ResponseEntity endPoint(@RequestBody String payload) throws Exception {\n   ...\n   int delay = 5000; \n   long start = System.currentTimeMillis();\n   while(start &gt;= System.currentTimeMillis() - delay);\n   ...\n   }\n</code></pre>\n<pre><code>java.net.ConnectException: Connection timed out: connect\n   at java.base/sun.nio.ch.Net.connect0(Native Method) ~[na:na]\n   at java.base/sun.nio.ch.Net.connect(Net.java:579) ~[na:na]\n   at java.base/sun.nio.ch.Net.connect(Net.java:568) ~[na:na]\n   at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588) ~[na:na]\n   at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\n   at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\n   at net.schmizz.sshj.SocketClient.connect(SocketClient.java:126) ~[sshj-0.27.0.jar:0.27.0]`\n</code></pre>\n<p>I already tried wait and Thread.sleep as well as TimeUnit.SECONDS.sleep(5); and when i do a post with postman i get &quot;Error: socket hang up&quot; without any exception in Intellij.</p>\n<p>Any help would be appreciated\n<a href=\"https://i.stack.imgur.com/77WzB.png\" rel=\"nofollow noreferrer\">Postman screenshot</a></p>\n"},{"tags":["java","jar","exe","launch4j"],"comments":[{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":0,"creation_date":1674621260,"post_id":75229594,"comment_id":132751468,"body_markdown":"`error=2, No such file or directory` means the file/program `/usr/local/Cellar/launch4j/3.50/libexec/bin/windres` does not exists in the machine.","body":"<code>error=2, No such file or directory</code> means the file/program <code>&#47;usr&#47;local&#47;Cellar&#47;launch4j&#47;3.50&#47;libexec&#47;bin&#47;windres</code> does not exists in the machine."},{"owner":{"account_id":22986082,"reputation":1,"user_id":17112291,"display_name":"ygritte723"},"score":0,"creation_date":1674621802,"post_id":75229594,"comment_id":132751526,"body_markdown":"reply to@Karthikeyan: I add the file `windres` in `/usr/local/Cellar/launch4j/3.50/libexec/bin/windres`, but it says `net.sf.launch4j.ExecException: java.io.IOException: Cannot run program &quot;/usr/local/Cellar/launch4j/3.50/libexec/bin/windres&quot;: error=13, Permission denied`","body":"reply to@Karthikeyan: I add the file <code>windres</code> in <code>&#47;usr&#47;local&#47;Cellar&#47;launch4j&#47;3.50&#47;libexec&#47;bin&#47;windres</code>, but it says <code>net.sf.launch4j.ExecException: java.io.IOException: Cannot run program &quot;&#47;usr&#47;local&#47;Cellar&#47;launch4j&#47;3.50&#47;libexec&#47;bin&#47;windres&quot;: error=13, Permission denied</code>"},{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":0,"creation_date":1674625201,"post_id":75229594,"comment_id":132751998,"body_markdown":"`error=13, Permission denied` means the user do not have permission to execute the file `/usr/local/Cellar/launch4j/3.50/libexec/bin/windres`. How did you add the file? are using homebrew?","body":"<code>error=13, Permission denied</code> means the user do not have permission to execute the file <code>&#47;usr&#47;local&#47;Cellar&#47;launch4j&#47;3.50&#47;libexec&#47;bin&#47;windres</code>. How did you add the file? are using homebrew?"}],"answers":[{"tags":[],"owner":{"account_id":21316246,"reputation":11,"user_id":15690046,"display_name":"rojae"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698155307,"creation_date":1679384847,"answer_id":75798473,"question_id":75229594,"body_markdown":"1. Run *launch4j.jar:*\r\n\r\n```sh\r\nsudo java -jar launch4j.jar\r\n```\r\n\r\n2. If you face some error like *permission denied* or *not allowed developer&#39;s app*\r\n\r\n**Check this side: You may need to allow every time you see a launch4j error message.**\r\n\r\n1. [System Config][1]\r\n2. [Private ~~ Secure][2] \r\n3. [Allow Button][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/raSCz.png\r\n  [2]: https://i.stack.imgur.com/0Sk0B.png\r\n  [3]: https://i.stack.imgur.com/6SDvQ.png","title":"run launch4j on macos","body":"<ol>\n<li>Run <em>launch4j.jar:</em></li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>sudo java -jar launch4j.jar\n</code></pre>\n<ol start=\"2\">\n<li>If you face some error like <em>permission denied</em> or <em>not allowed developer's app</em></li>\n</ol>\n<p><strong>Check this side: You may need to allow every time you see a launch4j error message.</strong></p>\n<ol>\n<li><a href=\"https://i.stack.imgur.com/raSCz.png\" rel=\"nofollow noreferrer\">System Config</a></li>\n<li><a href=\"https://i.stack.imgur.com/0Sk0B.png\" rel=\"nofollow noreferrer\">Private ~~ Secure</a></li>\n<li><a href=\"https://i.stack.imgur.com/6SDvQ.png\" rel=\"nofollow noreferrer\">Allow Button</a></li>\n</ol>\n"}],"owner":{"account_id":22986082,"reputation":1,"user_id":17112291,"display_name":"ygritte723"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":278,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698155307,"creation_date":1674619591,"question_id":75229594,"body_markdown":"I want to turn my .jar file into an .exe file on my macOS. I use launch4j, but the &#39;JRE paths&#39; configuration is always wrong, and it always says\r\n`103 RCDATA BEGIN &quot;This application requires a Java Runtime Environment\\0&quot; END`\r\n`104 RCDATA BEGIN &quot;The registry refers to a nonexistent Java Runtime Environment installation or the runtime is corrupted.\\0&quot; END`\r\n`net.sf.launch4j.ExecException: java.io.IOException: Cannot run program &quot;/usr/local/Cellar/launch4j/3.50/libexec/bin/windres&quot;: error=2, No such file or directory`\r\n\r\nI&#39;ve tried`%JAVA_HOME%` `$JAVA_HOME` `/Library/Java/JavaVirtualMachines/temurin-11.jdk/Contents/Home` `/Library/Java/JavaVirtualMachines/temurin-11.jdk/Contents/Home/` `/Library/Java/JavaVirtualMachines/temurin-11.jdk`.etc, none of these work.\r\nCould you tell me what&#39;s wrong? \r\n\r\nThe launch4j is version 3.5.\r\n\r\nadded:\r\nI add the file `windres` in `/usr/local/Cellar/launch4j/3.50/libexec/bin/windres`, but it says `net.sf.launch4j.ExecException: java.io.IOException: Cannot run program &quot;/usr/local/Cellar/launch4j/3.50/libexec/bin/windres&quot;: error=13, Permission denied`","title":"run launch4j on macos","body":"<p>I want to turn my .jar file into an .exe file on my macOS. I use launch4j, but the 'JRE paths' configuration is always wrong, and it always says\n<code>103 RCDATA BEGIN &quot;This application requires a Java Runtime Environment\\0&quot; END</code>\n<code>104 RCDATA BEGIN &quot;The registry refers to a nonexistent Java Runtime Environment installation or the runtime is corrupted.\\0&quot; END</code>\n<code>net.sf.launch4j.ExecException: java.io.IOException: Cannot run program &quot;/usr/local/Cellar/launch4j/3.50/libexec/bin/windres&quot;: error=2, No such file or directory</code></p>\n<p>I've tried<code>%JAVA_HOME%</code> <code>$JAVA_HOME</code> <code>/Library/Java/JavaVirtualMachines/temurin-11.jdk/Contents/Home</code> <code>/Library/Java/JavaVirtualMachines/temurin-11.jdk/Contents/Home/</code> <code>/Library/Java/JavaVirtualMachines/temurin-11.jdk</code>.etc, none of these work.\nCould you tell me what's wrong?</p>\n<p>The launch4j is version 3.5.</p>\n<p>added:\nI add the file <code>windres</code> in <code>/usr/local/Cellar/launch4j/3.50/libexec/bin/windres</code>, but it says <code>net.sf.launch4j.ExecException: java.io.IOException: Cannot run program &quot;/usr/local/Cellar/launch4j/3.50/libexec/bin/windres&quot;: error=13, Permission denied</code></p>\n"},{"tags":["java","maven","junit","maven-3"],"answers":[{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1345813941,"creation_date":1345813941,"answer_id":12110093,"question_id":12110032,"body_markdown":"use this\r\n&gt;  mvn clean install -DskipTests ","title":"Exclude Tests from Maven build","body":"<p>use this</p>\n\n<blockquote>\n  <p>mvn clean install -DskipTests </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":41183,"reputation":7098,"user_id":119636,"display_name":"Buhb"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1345813975,"creation_date":1345813975,"answer_id":12110105,"question_id":12110032,"body_markdown":"From http://maven.apache.org/plugins/maven-surefire-plugin/examples/skipping-test.html:\r\n\r\n    &lt;project&gt;\r\n      [...]\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.12.2&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;skipTests&gt;true&lt;/skipTests&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n      [...]\r\n    &lt;/project&gt;","title":"Exclude Tests from Maven build","body":"<p>From <a href=\"http://maven.apache.org/plugins/maven-surefire-plugin/examples/skipping-test.html\" rel=\"noreferrer\">http://maven.apache.org/plugins/maven-surefire-plugin/examples/skipping-test.html</a>:</p>\n\n<pre><code>&lt;project&gt;\n  [...]\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.12.2&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;skipTests&gt;true&lt;/skipTests&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  [...]\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":413624,"reputation":9150,"user_id":787375,"accept_rate":100,"display_name":"jelies"},"down_vote_count":0,"up_vote_count":57,"is_accepted":true,"score":57,"last_activity_date":1698154833,"creation_date":1345814005,"answer_id":12110115,"question_id":12110032,"body_markdown":"Try with:\r\n\r\n    mvn clean install -DskipTests\r\n\r\nSource [ Maven Surefire Plugin - Skipping Tests][1].\r\n\r\n\r\n  [1]: https://maven.apache.org/surefire/maven-surefire-plugin/examples/skipping-tests.html","title":"Exclude Tests from Maven build","body":"<p>Try with:</p>\n<pre><code>mvn clean install -DskipTests\n</code></pre>\n<p>Source <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/skipping-tests.html\" rel=\"nofollow noreferrer\"> Maven Surefire Plugin - Skipping Tests</a>.</p>\n"},{"tags":[],"owner":{"account_id":1427644,"reputation":47311,"user_id":1350762,"display_name":"maba"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1345814386,"creation_date":1345814386,"answer_id":12110194,"question_id":12110032,"body_markdown":"You can also choose to use\r\n\r\n    mvn install -Dmaven.test.skip\r\n\r\nFrom [Maven ][1] website:\r\n\r\n&gt; If you absolutely must, you can also use the maven.test.skip property to skip compiling the tests. maven.test.skip is honored by Surefire, Failsafe and the Compiler Plugin.\r\n\r\nAs is says you will not even compile the test sources.\r\n\r\n[1]: http://maven.apache.org/plugins/maven-surefire-plugin/examples/skipping-test.html","title":"Exclude Tests from Maven build","body":"<p>You can also choose to use</p>\n\n<pre><code>mvn install -Dmaven.test.skip\n</code></pre>\n\n<p>From <a href=\"http://maven.apache.org/plugins/maven-surefire-plugin/examples/skipping-test.html\" rel=\"noreferrer\">Maven </a> website:</p>\n\n<blockquote>\n  <p>If you absolutely must, you can also use the maven.test.skip property to skip compiling the tests. maven.test.skip is honored by Surefire, Failsafe and the Compiler Plugin.</p>\n</blockquote>\n\n<p>As is says you will not even compile the test sources.</p>\n"},{"tags":[],"owner":{"account_id":230255,"reputation":22438,"user_id":493749,"accept_rate":95,"display_name":"Chris Cashwell"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1345814395,"creation_date":1345814395,"answer_id":12110198,"question_id":12110032,"body_markdown":"My favorite way to manage when my tests run is to create a Maven variable called `skip-tests` and default it to `true`. Then you can use that variable like so:\r\n\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.12.2&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;skipTests&gt;${skip-tests}&lt;/skipTests&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n\r\nThis way, you can just pass in the variable at build time, `-Dskip-tests=false`, when you don&#39;t want them to run. This is most useful when you have integration *and* unit tests, and would like to run or disable both sets of tests with just one variable.","title":"Exclude Tests from Maven build","body":"<p>My favorite way to manage when my tests run is to create a Maven variable called <code>skip-tests</code> and default it to <code>true</code>. Then you can use that variable like so:</p>\n\n<pre><code>  &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.12.2&lt;/version&gt;\n    &lt;configuration&gt;\n      &lt;skipTests&gt;${skip-tests}&lt;/skipTests&gt;\n    &lt;/configuration&gt;\n  &lt;/plugin&gt;\n</code></pre>\n\n<p>This way, you can just pass in the variable at build time, <code>-Dskip-tests=false</code>, when you don't want them to run. This is most useful when you have integration <em>and</em> unit tests, and would like to run or disable both sets of tests with just one variable.</p>\n"},{"tags":[],"owner":{"account_id":417609,"reputation":520,"user_id":793701,"accept_rate":84,"display_name":"Dhruvenkumar Shah"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1368815400,"creation_date":1345815727,"answer_id":12110612,"question_id":12110032,"body_markdown":"I think simplest would be this : `mvn clean package -Dmaven.skip.tests=true`\r\n\r\nI think this the approach to use as it does not make you change your pom, so does not have to make changes to the project. ","title":"Exclude Tests from Maven build","body":"<p>I think simplest would be this : <code>mvn clean package -Dmaven.skip.tests=true</code></p>\n\n<p>I think this the approach to use as it does not make you change your pom, so does not have to make changes to the project. </p>\n"},{"tags":[],"owner":{"account_id":241880,"reputation":6756,"user_id":512994,"accept_rate":96,"display_name":"wulfgarpro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1347706356,"creation_date":1347705710,"answer_id":12436682,"question_id":12110032,"body_markdown":"We use Surefire for Unit tests, and [Failsafe](http://maven.apache.org/plugins/maven-failsafe-plugin/) for Integration tests. \r\n\r\nTo skip all tests:\r\n\r\n    mvn clean package -DskipTests\r\n\r\nTo skip just Failsafe tests:\r\n\r\n    mvn clean package -DskipIT\r\n\r\nTo skip just Surefire, you need to explicitly call the integration-test goal of the Failsafe plugin, after compiling the test classes of course:\r\n\r\n    mvn clean test-compile failsafe:integration-test","title":"Exclude Tests from Maven build","body":"<p>We use Surefire for Unit tests, and <a href=\"http://maven.apache.org/plugins/maven-failsafe-plugin/\" rel=\"nofollow\">Failsafe</a> for Integration tests. </p>\n\n<p>To skip all tests:</p>\n\n<pre><code>mvn clean package -DskipTests\n</code></pre>\n\n<p>To skip just Failsafe tests:</p>\n\n<pre><code>mvn clean package -DskipIT\n</code></pre>\n\n<p>To skip just Surefire, you need to explicitly call the integration-test goal of the Failsafe plugin, after compiling the test classes of course:</p>\n\n<pre><code>mvn clean test-compile failsafe:integration-test\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9951088,"reputation":413,"user_id":7363699,"display_name":"Krishna"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1641469473,"creation_date":1641469473,"answer_id":70606614,"question_id":12110032,"body_markdown":"All the answers here are correct. To be precise,\r\n\r\n**-DskipTests** - compiles the test classes, but skips running them,  \r\n**-Dmaven.test.skip=true**  - skips compiling the test files and also does not run them","title":"Exclude Tests from Maven build","body":"<p>All the answers here are correct. To be precise,</p>\n<p><strong>-DskipTests</strong> - compiles the test classes, but skips running them,<br />\n<strong>-Dmaven.test.skip=true</strong>  - skips compiling the test files and also does not run them</p>\n"}],"owner":{"account_id":1170165,"reputation":23155,"user_id":1147529,"accept_rate":95,"display_name":"Paulius Matulionis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56396,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"accepted_answer_id":12110115,"answer_count":8,"score":31,"last_activity_date":1698154833,"creation_date":1345813724,"question_id":12110032,"body_markdown":"When I am running `maven clean install` it always executes all tests in `src/test/java` is there a way to skip all the tests, just to run simple build without any tests.\r\n\r\nI want my tests to be in `src/test/java` but I want to tell maven to do not execute them. I&#39;ve been looking for something like that on the internet but I did not manage to find the answer.\r\n\r\nIs there a way to do this?","title":"Exclude Tests from Maven build","body":"<p>When I am running <code>maven clean install</code> it always executes all tests in <code>src/test/java</code> is there a way to skip all the tests, just to run simple build without any tests.</p>\n\n<p>I want my tests to be in <code>src/test/java</code> but I want to tell maven to do not execute them. I've been looking for something like that on the internet but I did not manage to find the answer.</p>\n\n<p>Is there a way to do this?</p>\n"},{"tags":["java","docker","apache-poi"],"comments":[{"owner":{"account_id":4604899,"reputation":5097,"user_id":3734640,"accept_rate":83,"display_name":"Govinda Sakhare"},"score":1,"creation_date":1621156222,"post_id":67554737,"comment_id":119405210,"body_markdown":"How are you spinning up a docker container?","body":"How are you spinning up a docker container?"},{"owner":{"account_id":2607482,"reputation":125,"user_id":2258338,"accept_rate":50,"display_name":"Dainius Java"},"score":0,"creation_date":1621156646,"post_id":67554737,"comment_id":119405317,"body_markdown":"I use this command: docker run --name my-app -p 8080:8080 --link my-app-mariadb:mysql -d docker_user/my-app:version_number   I run it on Ubuntu 18.04","body":"I use this command: docker run --name my-app -p 8080:8080 --link my-app-mariadb:mysql -d docker_user/my-app:version_number   I run it on Ubuntu 18.04"},{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":0,"creation_date":1621207433,"post_id":67554737,"comment_id":119418677,"body_markdown":"application/vnd.ms-excel is not the correct mime type for xlsx - it is for the legacy xls format - application/vnd.openxmlformats-officedocument.spreadsheetml.sheet is correct","body":"application/vnd.ms-excel is not the correct mime type for xlsx - it is for the legacy xls format - application/vnd.openxmlformats-officedocument.spreadsheetml.&zwnj;&#8203;sheet is correct"},{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":0,"creation_date":1621207476,"post_id":67554737,"comment_id":119418686,"body_markdown":"could you provide the full stacktrace?","body":"could you provide the full stacktrace?"},{"owner":{"account_id":2607482,"reputation":125,"user_id":2258338,"accept_rate":50,"display_name":"Dainius Java"},"score":0,"creation_date":1621235831,"post_id":67554737,"comment_id":119424029,"body_markdown":"Full stacktrace added to question. Thanks for format type.","body":"Full stacktrace added to question. Thanks for format type."},{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":0,"creation_date":1621245008,"post_id":67554737,"comment_id":119427789,"body_markdown":"can you use `throw new IOException(e.getMessage(), e)`? -- adding the cause exception means you will get the stacktraces of the cause exception","body":"can you use <code>throw new IOException(e.getMessage(), e)</code>? -- adding the cause exception means you will get the stacktraces of the cause exception"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1621254119,"post_id":67554737,"comment_id":119431572,"body_markdown":"Why aren&#39;t you writing directly to the outputstream which would save memory. Also the error tells you what is wrong `Caused by: java.lang.NoSuchMethodError: org.openxmlformats.schemas.spreadsheetml.x2006.main.CTFont.addNewFamily()Lorg/openxmlformats/schemas/spreadsheetml/x2006/main/CTIntProperty;` looks like you are mixing jars from different versions op Apache POI. Finally don&#39;t call `close` on the outputstream it will be closed by the servlet container. You closing it will lead to other issues.","body":"Why aren&#39;t you writing directly to the outputstream which would save memory. Also the error tells you what is wrong <code>Caused by: java.lang.NoSuchMethodError: org.openxmlformats.schemas.spreadsheetml.x2006.main.CTFont.a&zwnj;&#8203;ddNewFamily()Lorg&#47;op&zwnj;&#8203;enxmlformats&#47;schemas&zwnj;&#8203;&#47;spreadsheetml&#47;x2006&zwnj;&#8203;&#47;main&#47;CTIntProperty;</code> looks like you are mixing jars from different versions op Apache POI. Finally don&#39;t call <code>close</code> on the outputstream it will be closed by the servlet container. You closing it will lead to other issues."},{"owner":{"account_id":2607482,"reputation":125,"user_id":2258338,"accept_rate":50,"display_name":"Dainius Java"},"score":0,"creation_date":1621254194,"post_id":67554737,"comment_id":119431602,"body_markdown":"I have updated my exception with logger.error","body":"I have updated my exception with logger.error"},{"owner":{"account_id":2607482,"reputation":125,"user_id":2258338,"accept_rate":50,"display_name":"Dainius Java"},"score":0,"creation_date":1621254393,"post_id":67554737,"comment_id":119431699,"body_markdown":"I have checked other answers on &#39;Caused by: java.lang.NoSuchMethodError: org.openxmlformats.schemas.spreadsheetml.x2006.main.CTFont.addNewFamily()Lorg/openxmlformats/schemas/spreadsheetml/x2006/main/CTIntProperty;&#39; and many answers says that I have to add poi-ooxml-schemas. It&#39;s strange to me, that if I run app from IDE, thn it&#39;s working just fine. If I run from Docker (I didn&#39;t tried to run jar), then it doesn&#39;t works. Apapche POI versions are the same - 5.0","body":"I have checked other answers on &#39;Caused by: java.lang.NoSuchMethodError: org.openxmlformats.schemas.spreadsheetml.x2006.main.CTFont.a&zwnj;&#8203;ddNewFamily()Lorg/op&zwnj;&#8203;enxmlformats/schemas&zwnj;&#8203;/spreadsheetml/x2006&zwnj;&#8203;/main/CTIntProperty;&zwnj;&#8203;&#39; and many answers says that I have to add poi-ooxml-schemas. It&#39;s strange to me, that if I run app from IDE, thn it&#39;s working just fine. If I run from Docker (I didn&#39;t tried to run jar), then it doesn&#39;t works. Apapche POI versions are the same - 5.0"},{"owner":{"account_id":2607482,"reputation":125,"user_id":2258338,"accept_rate":50,"display_name":"Dainius Java"},"score":0,"creation_date":1621269495,"post_id":67554737,"comment_id":119439166,"body_markdown":"Problem solved. The solution was to reduce apache poi versions to 3.17 version and reduce xmlbeans version to 2.6.0.  Next step is to try make work with apache poi latest version.","body":"Problem solved. The solution was to reduce apache poi versions to 3.17 version and reduce xmlbeans version to 2.6.0.  Next step is to try make work with apache poi latest version."}],"answers":[{"tags":[],"owner":{"account_id":2607482,"reputation":125,"user_id":2258338,"accept_rate":50,"display_name":"Dainius Java"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1628761095,"creation_date":1628761095,"answer_id":68754967,"question_id":67554737,"body_markdown":"The solution was to reduce apache poi versions to 3.17 version and reduce xmlbeans version to 2.6.0","title":"Generating Apache POI xlsx file with Spring Boot Java in Docker","body":"<p>The solution was to reduce apache poi versions to 3.17 version and reduce xmlbeans version to 2.6.0</p>\n"},{"tags":[],"owner":{"account_id":26948663,"reputation":1,"user_id":20518233,"display_name":"Yoga Hilmi Tasanah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698154571,"creation_date":1669022537,"answer_id":74516653,"question_id":67554737,"body_markdown":"I faced the same problem as you, the Apache POI version I&#39;m using is 5.2.3. Then I found a solution by adding a command like this to the Dockerfile\r\n\r\n    RUN apk update &amp;&amp; apk add --no-cache fontconfig ttf-dejavu","title":"Generating Apache POI xlsx file with Spring Boot Java in Docker","body":"<p>I faced the same problem as you, the Apache POI version I'm using is 5.2.3. Then I found a solution by adding a command like this to the Dockerfile</p>\n<pre><code>RUN apk update &amp;&amp; apk add --no-cache fontconfig ttf-dejavu\n</code></pre>\n"}],"owner":{"account_id":2607482,"reputation":125,"user_id":2258338,"accept_rate":50,"display_name":"Dainius Java"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1549,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":68754967,"answer_count":2,"score":0,"last_activity_date":1698154571,"creation_date":1621155458,"question_id":67554737,"body_markdown":"I have app that generates PDF with iTextPdf and now I have added Apache POI to generate Excel file on the same data. Front is JS with jQuery and backend is Java 11 (openJDK) with Spring Boot, Apache POI 5.0.\r\nThe problem is that everything works fine while running in IDE. File is generated and downloads with no problems. The problem occurs when I run apps docker container. If I try to generate Excel file I get error: `java.io.IOException: org.apache.poi.ooxml.POIXMLException: java.lang.reflect.InvocationTargetException`with no &quot;Caused by&quot;.\r\nI use ByteArrayOutputStream and OutputStream to generate xlsx file and download it in browser. I don&#39;t try to store file in some folder and I don&#39;t use Docker volumes. Maybe Apache POI uses some temp folder while generating file? And it can&#39;t do this while runs from Docker?\r\n\r\nThanks in advance.\r\n\r\nController:\r\n\r\n    try {\r\n        Workbook workbook = excelGenerators.getExcelWorkbook(filteredList);\r\n\r\n        ByteArrayOutputStream boas = new ByteArrayOutputStream();\r\n\r\n        try {\r\n            workbook.write(boas);\r\n        } finally {\r\n            boas.close();\r\n        }\r\n\r\n        response.setHeader(&quot;Expires&quot;, &quot;0&quot;);\r\n        response.setHeader(&quot;Cache-Control&quot;, &quot;must-revalidate, post-check=0, pre-check=0&quot;);\r\n        response.setHeader(&quot;Pragma&quot;, &quot;public&quot;);\r\n        response.setContentType(&quot;application/vnd.ms-excel&quot;);\r\n        response.setHeader(&quot;Content-disposition&quot;,&quot;attachment; filename=report.xlsx&quot;);\r\n        response.setContentLength(boas.size());\r\n\t\t\r\n        OutputStream os = response.getOutputStream();\r\n        boas.writeTo(os);\r\n        os.flush();\r\n        os.close();\r\n    } catch (Exception e) {\r\n        throw new IOException(e.getMessage());\r\n    }\r\n\r\nExcelGenerator:\r\n\r\n    public Workbook getExcelWorkbook(List&lt;FullOrder&gt; orderList) {\r\n            XSSFWorkbook workbook = new XSSFWorkbook();\r\n    \r\n            Sheet sheet = workbook.createSheet(&quot;SHEET ONE&quot;);\r\n            sheet.createFreezePane(0, 1);\r\n            sheet.setColumnWidth(0, 16000);\r\n    \t\t...\r\n    \r\n            CellStyle headerStyle = sheet.getWorkbook().createCellStyle();\r\n            headerStyle.setFillForegroundColor(IndexedColors.AQUA.index);\r\n            headerStyle.setFillPattern(FillPatternType.SOLID_FOREGROUND);\r\n            headerStyle.setAlignment(HorizontalAlignment.CENTER);\r\n    \r\n            XSSFFont font = workbook.createFont();\r\n            font.setFontName(&quot;Arial&quot;);\r\n            font.setFontHeightInPoints((short) 12);\r\n            font.setBold(true);\r\n            headerStyle.setFont(font);\r\n    \r\n            Row header = sheet.createRow(0);\r\n    \r\n            Cell headerCell = header.createCell(0);\r\n            headerCell.setCellValue(&quot;Klientas&quot;);\r\n            headerCell.setCellStyle(headerStyle);\r\n    \r\n    \t\t...\t\r\n    \r\n            CellStyle singleOrderCellStyle = workbook.createCellStyle();\r\n            singleOrderCellStyle.setWrapText(true);\r\n            singleOrderCellStyle.setAlignment(HorizontalAlignment.LEFT);\r\n    \r\n            AtomicInteger rowCount = new AtomicInteger(1);\r\n    \r\n            orderList.forEach(order -&gt; {\r\n                Row row = sheet.createRow(rowCount.get());\r\n    \r\n                Cell cell = row.createCell(0);\r\n                cell.setCellValue(order.getClient().getLabel());\r\n                cell.setCellStyle(singleOrderCellStyle);\r\n    \r\n    \t\t\t...\r\n    \r\n                rowCount.getAndIncrement();\r\n            });\r\n    \r\n            CellStyle totalStyle = sheet.getWorkbook().createCellStyle();\r\n            totalStyle.setFillForegroundColor(IndexedColors.LIGHT_ORANGE.index);\r\n            totalStyle.setFillPattern(FillPatternType.SOLID_FOREGROUND);\r\n            totalStyle.setAlignment(HorizontalAlignment.CENTER);\r\n    \r\n            XSSFFont fontTotal = workbook.createFont();\r\n            fontTotal.setFontName(&quot;Arial&quot;);\r\n            fontTotal.setFontHeightInPoints((short) 12);\r\n            fontTotal.setBold(true);\r\n            totalStyle.setFont(fontTotal);\r\n    \r\n            Row totalRow = sheet.createRow(rowCount.get());\r\n    \r\n            Cell cell = totalRow.createCell(0);\r\n            cell = totalRow.createCell(1);\r\n            cell = totalRow.createCell(2);\r\n    \r\n    \r\n            cell = totalRow.createCell(3);\r\n            cell.setCellValue(totalCount[0]);\r\n            cell.setCellStyle(totalStyle);\r\n    \r\n            cell = totalRow.createCell(4);\r\n            cell = totalRow.createCell(5);\r\n    \r\n            cell.setCellValue(Double.parseDouble(decimalFormat.format(totalSum[0]).replace(&#39;,&#39;, &#39;.&#39;)));\r\n            cell.setCellStyle(totalStyle);\r\n    \r\n            return workbook;\r\n        }\r\n\r\n\r\nI have changed catch with `logger.error(e.getClass() + &quot;: &quot; +  e.getMessage() + &quot;: &quot; + e.getCause(), e);` and now stack trace looks like this:\r\n\r\n    2021-05-17 12:09:34.060 ERROR 1 --- [io-8080-exec-10] c.s.l.controller.ManagementController    : class org.apache.poi.ooxml.POIXMLException: org.apache.poi.ooxml.POIXMLException: java.lang.reflect.InvocationTargetException: org.apache.poi.ooxml.POIXMLException: java.lang.reflect.InvocationTargetException\r\n    ...\r\n    Caused by: org.apache.poi.ooxml.POIXMLException: java.lang.reflect.InvocationTargetException\r\n    \tat org.apache.poi.ooxml.POIXMLFactory.newDocumentPart(POIXMLFactory.java:111) ~[poi-ooxml-4.0.1.jar:4.0.1]\r\n    \tat org.apache.poi.ooxml.POIXMLDocumentPart.createRelationship(POIXMLDocumentPart.java:588) ~[poi-ooxml-4.0.1.jar:4.0.1]\r\n    \t... 95 common frames omitted\r\n    Caused by: java.lang.reflect.InvocationTargetException: null\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490) ~[na:na]\r\n    \tat org.apache.poi.xssf.usermodel.XSSFFactory.createDocumentPart(XSSFFactory.java:56) ~[poi-ooxml-4.0.1.jar:4.0.1]\r\n    \tat org.apache.poi.ooxml.POIXMLFactory.newDocumentPart(POIXMLFactory.java:109) ~[poi-ooxml-4.0.1.jar:4.0.1]\r\n    \t... 96 common frames omitted\r\n    Caused by: java.lang.NoSuchMethodError: org.openxmlformats.schemas.spreadsheetml.x2006.main.CTFont.addNewFamily()Lorg/openxmlformats/schemas/spreadsheetml/x2006/main/CTIntProperty;\r\n    \tat org.apache.poi.xssf.usermodel.XSSFFont.setFamily(XSSFFont.java:602) ~[poi-ooxml-4.0.1.jar:4.0.1]\r\n    \tat org.apache.poi.xssf.usermodel.XSSFFont.setFamily(XSSFFont.java:614) ~[poi-ooxml-4.0.1.jar:4.0.1]\r\n    \tat org.apache.poi.xssf.model.StylesTable.createDefaultFont(StylesTable.java:765) ~[poi-ooxml-4.0.1.jar:4.0.1]\r\n    \tat org.apache.poi.xssf.model.StylesTable.initialize(StylesTable.java:716) ~[poi-ooxml-4.0.1.jar:4.0.1]\r\n    \tat org.apache.poi.xssf.model.StylesTable.&lt;init&gt;(StylesTable.java:130) ~[poi-ooxml-4.0.1.jar:4.0.1]\r\n    \t... 102 common frames omitted\r\n\r\n\r\nAfter adding or changing jars related to apache poi to version 3.17 I get another error:\r\n\r\n    java.lang.NoClassDefFoundError: Could not initialize class org.apache.poi.xssf.model.SharedStringsTable","title":"Generating Apache POI xlsx file with Spring Boot Java in Docker","body":"<p>I have app that generates PDF with iTextPdf and now I have added Apache POI to generate Excel file on the same data. Front is JS with jQuery and backend is Java 11 (openJDK) with Spring Boot, Apache POI 5.0.\nThe problem is that everything works fine while running in IDE. File is generated and downloads with no problems. The problem occurs when I run apps docker container. If I try to generate Excel file I get error: <code>java.io.IOException: org.apache.poi.ooxml.POIXMLException: java.lang.reflect.InvocationTargetException</code>with no &quot;Caused by&quot;.\nI use ByteArrayOutputStream and OutputStream to generate xlsx file and download it in browser. I don't try to store file in some folder and I don't use Docker volumes. Maybe Apache POI uses some temp folder while generating file? And it can't do this while runs from Docker?</p>\n<p>Thanks in advance.</p>\n<p>Controller:</p>\n<pre><code>try {\n    Workbook workbook = excelGenerators.getExcelWorkbook(filteredList);\n\n    ByteArrayOutputStream boas = new ByteArrayOutputStream();\n\n    try {\n        workbook.write(boas);\n    } finally {\n        boas.close();\n    }\n\n    response.setHeader(&quot;Expires&quot;, &quot;0&quot;);\n    response.setHeader(&quot;Cache-Control&quot;, &quot;must-revalidate, post-check=0, pre-check=0&quot;);\n    response.setHeader(&quot;Pragma&quot;, &quot;public&quot;);\n    response.setContentType(&quot;application/vnd.ms-excel&quot;);\n    response.setHeader(&quot;Content-disposition&quot;,&quot;attachment; filename=report.xlsx&quot;);\n    response.setContentLength(boas.size());\n    \n    OutputStream os = response.getOutputStream();\n    boas.writeTo(os);\n    os.flush();\n    os.close();\n} catch (Exception e) {\n    throw new IOException(e.getMessage());\n}\n</code></pre>\n<p>ExcelGenerator:</p>\n<pre><code>public Workbook getExcelWorkbook(List&lt;FullOrder&gt; orderList) {\n        XSSFWorkbook workbook = new XSSFWorkbook();\n\n        Sheet sheet = workbook.createSheet(&quot;SHEET ONE&quot;);\n        sheet.createFreezePane(0, 1);\n        sheet.setColumnWidth(0, 16000);\n        ...\n\n        CellStyle headerStyle = sheet.getWorkbook().createCellStyle();\n        headerStyle.setFillForegroundColor(IndexedColors.AQUA.index);\n        headerStyle.setFillPattern(FillPatternType.SOLID_FOREGROUND);\n        headerStyle.setAlignment(HorizontalAlignment.CENTER);\n\n        XSSFFont font = workbook.createFont();\n        font.setFontName(&quot;Arial&quot;);\n        font.setFontHeightInPoints((short) 12);\n        font.setBold(true);\n        headerStyle.setFont(font);\n\n        Row header = sheet.createRow(0);\n\n        Cell headerCell = header.createCell(0);\n        headerCell.setCellValue(&quot;Klientas&quot;);\n        headerCell.setCellStyle(headerStyle);\n\n        ... \n\n        CellStyle singleOrderCellStyle = workbook.createCellStyle();\n        singleOrderCellStyle.setWrapText(true);\n        singleOrderCellStyle.setAlignment(HorizontalAlignment.LEFT);\n\n        AtomicInteger rowCount = new AtomicInteger(1);\n\n        orderList.forEach(order -&gt; {\n            Row row = sheet.createRow(rowCount.get());\n\n            Cell cell = row.createCell(0);\n            cell.setCellValue(order.getClient().getLabel());\n            cell.setCellStyle(singleOrderCellStyle);\n\n            ...\n\n            rowCount.getAndIncrement();\n        });\n\n        CellStyle totalStyle = sheet.getWorkbook().createCellStyle();\n        totalStyle.setFillForegroundColor(IndexedColors.LIGHT_ORANGE.index);\n        totalStyle.setFillPattern(FillPatternType.SOLID_FOREGROUND);\n        totalStyle.setAlignment(HorizontalAlignment.CENTER);\n\n        XSSFFont fontTotal = workbook.createFont();\n        fontTotal.setFontName(&quot;Arial&quot;);\n        fontTotal.setFontHeightInPoints((short) 12);\n        fontTotal.setBold(true);\n        totalStyle.setFont(fontTotal);\n\n        Row totalRow = sheet.createRow(rowCount.get());\n\n        Cell cell = totalRow.createCell(0);\n        cell = totalRow.createCell(1);\n        cell = totalRow.createCell(2);\n\n\n        cell = totalRow.createCell(3);\n        cell.setCellValue(totalCount[0]);\n        cell.setCellStyle(totalStyle);\n\n        cell = totalRow.createCell(4);\n        cell = totalRow.createCell(5);\n\n        cell.setCellValue(Double.parseDouble(decimalFormat.format(totalSum[0]).replace(',', '.')));\n        cell.setCellStyle(totalStyle);\n\n        return workbook;\n    }\n</code></pre>\n<p>I have changed catch with <code>logger.error(e.getClass() + &quot;: &quot; +  e.getMessage() + &quot;: &quot; + e.getCause(), e);</code> and now stack trace looks like this:</p>\n<pre><code>2021-05-17 12:09:34.060 ERROR 1 --- [io-8080-exec-10] c.s.l.controller.ManagementController    : class org.apache.poi.ooxml.POIXMLException: org.apache.poi.ooxml.POIXMLException: java.lang.reflect.InvocationTargetException: org.apache.poi.ooxml.POIXMLException: java.lang.reflect.InvocationTargetException\n...\nCaused by: org.apache.poi.ooxml.POIXMLException: java.lang.reflect.InvocationTargetException\n    at org.apache.poi.ooxml.POIXMLFactory.newDocumentPart(POIXMLFactory.java:111) ~[poi-ooxml-4.0.1.jar:4.0.1]\n    at org.apache.poi.ooxml.POIXMLDocumentPart.createRelationship(POIXMLDocumentPart.java:588) ~[poi-ooxml-4.0.1.jar:4.0.1]\n    ... 95 common frames omitted\nCaused by: java.lang.reflect.InvocationTargetException: null\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490) ~[na:na]\n    at org.apache.poi.xssf.usermodel.XSSFFactory.createDocumentPart(XSSFFactory.java:56) ~[poi-ooxml-4.0.1.jar:4.0.1]\n    at org.apache.poi.ooxml.POIXMLFactory.newDocumentPart(POIXMLFactory.java:109) ~[poi-ooxml-4.0.1.jar:4.0.1]\n    ... 96 common frames omitted\nCaused by: java.lang.NoSuchMethodError: org.openxmlformats.schemas.spreadsheetml.x2006.main.CTFont.addNewFamily()Lorg/openxmlformats/schemas/spreadsheetml/x2006/main/CTIntProperty;\n    at org.apache.poi.xssf.usermodel.XSSFFont.setFamily(XSSFFont.java:602) ~[poi-ooxml-4.0.1.jar:4.0.1]\n    at org.apache.poi.xssf.usermodel.XSSFFont.setFamily(XSSFFont.java:614) ~[poi-ooxml-4.0.1.jar:4.0.1]\n    at org.apache.poi.xssf.model.StylesTable.createDefaultFont(StylesTable.java:765) ~[poi-ooxml-4.0.1.jar:4.0.1]\n    at org.apache.poi.xssf.model.StylesTable.initialize(StylesTable.java:716) ~[poi-ooxml-4.0.1.jar:4.0.1]\n    at org.apache.poi.xssf.model.StylesTable.&lt;init&gt;(StylesTable.java:130) ~[poi-ooxml-4.0.1.jar:4.0.1]\n    ... 102 common frames omitted\n</code></pre>\n<p>After adding or changing jars related to apache poi to version 3.17 I get another error:</p>\n<pre><code>java.lang.NoClassDefFoundError: Could not initialize class org.apache.poi.xssf.model.SharedStringsTable\n</code></pre>\n"},{"tags":["java","spring","postgresql","arraylist","batch-updates"],"answers":[{"tags":[],"owner":{"account_id":1453691,"reputation":9,"user_id":1369900,"display_name":"Nitish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1404674323,"creation_date":1404674323,"answer_id":24599449,"question_id":24553536,"body_markdown":"I think the data type for PGSQL is incorrect, refer\r\n[this][1]\r\n\r\n&gt; character varying(n)\tvarchar(n)\tvariable-length character string\r\n\r\n\r\nWhat you are probably looking for is \r\n[PGSQL Arrays][2]\r\n\r\n\r\n  [1]: http://www.postgresql.org/docs/7.4/static/datatype.html#DATATYPE-TABLE\r\n  [2]: http://www.postgresql.org/docs/7.4/static/arrays.html","title":"How to store java.util.ArrayList in Postgresql using Spring","body":"<p>I think the data type for PGSQL is incorrect, refer\n<a href=\"http://www.postgresql.org/docs/7.4/static/datatype.html#DATATYPE-TABLE\" rel=\"nofollow\">this</a></p>\n\n<blockquote>\n  <p>character varying(n)  varchar(n)  variable-length character string</p>\n</blockquote>\n\n<p>What you are probably looking for is \n<a href=\"http://www.postgresql.org/docs/7.4/static/arrays.html\" rel=\"nofollow\">PGSQL Arrays</a></p>\n"},{"tags":[],"owner":{"account_id":1730914,"reputation":21,"user_id":1584549,"display_name":"aidarko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1433667461,"creation_date":1433667461,"answer_id":30691735,"question_id":24553536,"body_markdown":"I was facing the same problem.\r\n[Here][1] people discussed about that.\r\nLooks like it&#39;s the fault of the JDBC driver or PostgeSQL itself, so you can&#39;t just pass an array to the DB. As a workaround I had to manually create SQL (I had integer values, so didn&#39;t care about sql injections; you may want to prepare dynamically `SELECT * FROM MYTABLE WHERE ID IN (?,?,?)` first and then process the statement). \r\n\r\n    private static final String SQL_FIND_GOAL = &quot;SELECT * FROM MYTABLE WHERE ID IN (:ids)&quot;;\r\n\r\n    public List&lt;MyGoal&gt; getAllMyGoals(Set&lt;Integer&gt; ids) {\r\n    // Work around of issue.\r\n    int i=0;\r\n    String mockInStatement = &quot;&quot;;\r\n    for (int type: ids){\r\n      if (i &lt; ids.size()-1){\r\n        mockInStatement = mockInStatement + type + &quot;,&quot;;\r\n      }\r\n      else {\r\n        mockInStatement = mockInStatement + type;\r\n      }\r\n      i++;\r\n    }\r\n    String refinedSQL = SQL_FIND_GOAL.replace(&quot;:ids&quot;,mockInStatement);\r\n\r\n    List&lt;MyGoal&gt; result = jdbcTemplate.query(\r\n        refinedSQL, \r\n        new RowMapper&lt;MyGoal&gt;() {\r\n          @Override\r\n          public MyGoal mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n            MyGoal myGoal = new MyGoal();\r\n            myGoal.setCode(rowNum);\r\n            myGoal.setName(rs.getString(&quot;name&quot;));\r\n            return myGoal;\r\n          }\r\n        });\r\n    return result;  }\r\n\r\n\r\n  [1]: http://www.postgresql.org/message-id/50344D58.9010401@ringerc.id.au","title":"How to store java.util.ArrayList in Postgresql using Spring","body":"<p>I was facing the same problem.\n<a href=\"http://www.postgresql.org/message-id/50344D58.9010401@ringerc.id.au\" rel=\"nofollow\">Here</a> people discussed about that.\nLooks like it's the fault of the JDBC driver or PostgeSQL itself, so you can't just pass an array to the DB. As a workaround I had to manually create SQL (I had integer values, so didn't care about sql injections; you may want to prepare dynamically <code>SELECT * FROM MYTABLE WHERE ID IN (?,?,?)</code> first and then process the statement). </p>\n\n<pre><code>private static final String SQL_FIND_GOAL = \"SELECT * FROM MYTABLE WHERE ID IN (:ids)\";\n\npublic List&lt;MyGoal&gt; getAllMyGoals(Set&lt;Integer&gt; ids) {\n// Work around of issue.\nint i=0;\nString mockInStatement = \"\";\nfor (int type: ids){\n  if (i &lt; ids.size()-1){\n    mockInStatement = mockInStatement + type + \",\";\n  }\n  else {\n    mockInStatement = mockInStatement + type;\n  }\n  i++;\n}\nString refinedSQL = SQL_FIND_GOAL.replace(\":ids\",mockInStatement);\n\nList&lt;MyGoal&gt; result = jdbcTemplate.query(\n    refinedSQL, \n    new RowMapper&lt;MyGoal&gt;() {\n      @Override\n      public MyGoal mapRow(ResultSet rs, int rowNum) throws SQLException {\n        MyGoal myGoal = new MyGoal();\n        myGoal.setCode(rowNum);\n        myGoal.setName(rs.getString(\"name\"));\n        return myGoal;\n      }\n    });\nreturn result;  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1273978,"reputation":5819,"user_id":1229612,"accept_rate":74,"display_name":"Chicowitz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552316424,"creation_date":1552316424,"answer_id":55104746,"question_id":24553536,"body_markdown":"Not the OP&#39;s issue, but I ran into this error when accidentally using `jdbcTemplate.update` instead of `jdbcTemplate.batchUpdate`","title":"How to store java.util.ArrayList in Postgresql using Spring","body":"<p>Not the OP's issue, but I ran into this error when accidentally using <code>jdbcTemplate.update</code> instead of <code>jdbcTemplate.batchUpdate</code></p>\n"},{"tags":[],"owner":{"account_id":1855940,"reputation":2151,"user_id":1681523,"accept_rate":100,"display_name":"Ricardo Mayerhofer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606839694,"creation_date":1606839694,"answer_id":65094395,"question_id":24553536,"body_markdown":"Convert it to a typed Java array and it should work:\r\n\r\n```java\r\nString insertSql = &quot;INSERT INTO my_table(my_array) VALUES(?)&quot;;\r\njdbcTemplate.update(insertSql,myArrayList.toArray(new String[myArrayList.size()]));\r\n```","title":"How to store java.util.ArrayList in Postgresql using Spring","body":"<p>Convert it to a typed Java array and it should work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String insertSql = &quot;INSERT INTO my_table(my_array) VALUES(?)&quot;;\njdbcTemplate.update(insertSql,myArrayList.toArray(new String[myArrayList.size()]));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23725072,"reputation":9,"user_id":17745066,"display_name":"redx1t"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698154173,"creation_date":1698154173,"answer_id":77352504,"question_id":24553536,"body_markdown":"Consider also converting the ArrayList to Array. \r\n\r\n    arrayList.toArray();","title":"How to store java.util.ArrayList in Postgresql using Spring","body":"<p>Consider also converting the ArrayList to Array.</p>\n<pre><code>arrayList.toArray();\n</code></pre>\n"}],"owner":{"account_id":1417986,"reputation":4487,"user_id":1580892,"accept_rate":75,"display_name":"Mono Jamoon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17495,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":5,"score":8,"last_activity_date":1698154173,"creation_date":1404390000,"question_id":24553536,"body_markdown":"I am trying to do a batch-insert of a collection of beans. One of the properties of the bean is an ArrayList. The batch update fails with the exception:\r\n\r\n     Can&#39;t infer the SQL type to use for an instance of java.util.ArrayList. Use setObject() with an explicit Types value to specify the type to use.\r\n\r\nI don&#39;t know which Postgresql data type to use for the ArrayList to be compatible. Is there a way I can do the batch update of the beans without changing the data type of its properties?\r\n\r\n----------------------\r\n\r\nThe Bean:\r\n\r\n        import java.util.List;\r\n    \r\n        public class SomeBean {\r\n        \tprivate int id;\r\n        \tprivate List&lt;String&gt; names;\r\n            \r\n            @Override\r\n        \tpublic String toString() {\r\n        \t\treturn &quot;SomeBean [id=&quot; + id + &quot;, names=&quot; + names + &quot;]&quot;;\r\n        \t}\r\n            //Setters and getters\r\n\r\n\r\nTable schema:\r\n\r\n    CREATE TABLE arraylistexample\r\n    (\r\n      id serial NOT NULL,\r\n      names character varying[]\r\n    )\r\n\r\nMethod to insert the data:\r\n\r\n        public void insert(List&lt;SomeBean&gt; beans){\r\n    \t\tString sql = &quot;INSERT INTO ARRAYLISTEXAMPLE (NAMES) VALUES (:names)&quot;;\r\n    \t\t\r\n    \t\tSqlParameterSource[] data = SqlParameterSourceUtils.createBatch(beans.toArray());\r\n    \t\tpgTemplate.batchUpdate(sql, data);\r\n    \t}\r\n\r\nThe exception:\r\n\r\n    Exception in thread &quot;main&quot; org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [INSERT INTO ARRAYLISTEXAMPLE (NAMES) VALUES (?, ?)]; nested exception is org.postgresql.util.PSQLException: Can&#39;t infer the SQL type to use for an instance of java.util.ArrayList. Use setObject() with an explicit Types value to specify the type to use.\r\n    \tat org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate(SQLStateSQLExceptionTranslator.java:98)\r\n    \tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)\r\n    \tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)\r\n    \tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)\r\n    \tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:603)\r\n    \tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:615)\r\n    \tat org.springframework.jdbc.core.JdbcTemplate.batchUpdate(JdbcTemplate.java:884)\r\n    \tat org.springframework.jdbc.core.namedparam.NamedParameterBatchUpdateUtils.executeBatchUpdateWithNamedParameters(NamedParameterBatchUpdateUtils.java:40)\r\n    \tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.batchUpdate(NamedParameterJdbcTemplate.java:303)\r\n    \tat some.package.dao.GenericDao.insert(GenericDao.java:45)\r\n    \tat some.package.runner.FileLogicTester.storingArrayListInDb(FileLogicTester.java:220)\r\n    \tat some.package.runner.FileLogicTester.main(FileLogicTester.java:86)\r\n    Caused by: org.postgresql.util.PSQLException: Can&#39;t infer the SQL type to use for an instance of java.util.ArrayList. Use setObject() with an explicit Types value to specify the type to use.\r\n    \tat org.postgresql.jdbc2.AbstractJdbc2Statement.setObject(AbstractJdbc2Statement.java:1801)\r\n    \tat org.postgresql.jdbc3g.AbstractJdbc3gStatement.setObject(AbstractJdbc3gStatement.java:37)\r\n    \tat org.postgresql.jdbc4.AbstractJdbc4Statement.setObject(AbstractJdbc4Statement.java:46)\r\n    \tat org.apache.commons.dbcp.DelegatingPreparedStatement.setObject(DelegatingPreparedStatement.java:255)\r\n    \tat org.springframework.jdbc.core.StatementCreatorUtils.setValue(StatementCreatorUtils.java:351)\r\n    \tat org.springframework.jdbc.core.StatementCreatorUtils.setParameterValueInternal(StatementCreatorUtils.java:216)\r\n    \tat org.springframework.jdbc.core.StatementCreatorUtils.setParameterValue(StatementCreatorUtils.java:144)\r\n    \tat org.springframework.jdbc.core.BatchUpdateUtils.setStatementParameters(BatchUpdateUtils.java:63)\r\n    \tat org.springframework.jdbc.core.namedparam.NamedParameterBatchUpdateUtils.access$000(NamedParameterBatchUpdateUtils.java:32)\r\n    \tat org.springframework.jdbc.core.namedparam.NamedParameterBatchUpdateUtils$1.setValues(NamedParameterBatchUpdateUtils.java:47)\r\n    \tat org.springframework.jdbc.core.JdbcTemplate$4.doInPreparedStatement(JdbcTemplate.java:893)\r\n    \tat org.springframework.jdbc.core.JdbcTemplate$4.doInPreparedStatement(JdbcTemplate.java:884)\r\n    \tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:587)\r\n    \t... 7 more\r\n\r\n\r\nAny suggestions?","title":"How to store java.util.ArrayList in Postgresql using Spring","body":"<p>I am trying to do a batch-insert of a collection of beans. One of the properties of the bean is an ArrayList. The batch update fails with the exception:</p>\n\n<pre><code> Can't infer the SQL type to use for an instance of java.util.ArrayList. Use setObject() with an explicit Types value to specify the type to use.\n</code></pre>\n\n<p>I don't know which Postgresql data type to use for the ArrayList to be compatible. Is there a way I can do the batch update of the beans without changing the data type of its properties?</p>\n\n<hr>\n\n<p>The Bean:</p>\n\n<pre><code>    import java.util.List;\n\n    public class SomeBean {\n        private int id;\n        private List&lt;String&gt; names;\n\n        @Override\n        public String toString() {\n            return \"SomeBean [id=\" + id + \", names=\" + names + \"]\";\n        }\n        //Setters and getters\n</code></pre>\n\n<p>Table schema:</p>\n\n<pre><code>CREATE TABLE arraylistexample\n(\n  id serial NOT NULL,\n  names character varying[]\n)\n</code></pre>\n\n<p>Method to insert the data:</p>\n\n<pre><code>    public void insert(List&lt;SomeBean&gt; beans){\n        String sql = \"INSERT INTO ARRAYLISTEXAMPLE (NAMES) VALUES (:names)\";\n\n        SqlParameterSource[] data = SqlParameterSourceUtils.createBatch(beans.toArray());\n        pgTemplate.batchUpdate(sql, data);\n    }\n</code></pre>\n\n<p>The exception:</p>\n\n<pre><code>Exception in thread \"main\" org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [INSERT INTO ARRAYLISTEXAMPLE (NAMES) VALUES (?, ?)]; nested exception is org.postgresql.util.PSQLException: Can't infer the SQL type to use for an instance of java.util.ArrayList. Use setObject() with an explicit Types value to specify the type to use.\n    at org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate(SQLStateSQLExceptionTranslator.java:98)\n    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)\n    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)\n    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:603)\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:615)\n    at org.springframework.jdbc.core.JdbcTemplate.batchUpdate(JdbcTemplate.java:884)\n    at org.springframework.jdbc.core.namedparam.NamedParameterBatchUpdateUtils.executeBatchUpdateWithNamedParameters(NamedParameterBatchUpdateUtils.java:40)\n    at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.batchUpdate(NamedParameterJdbcTemplate.java:303)\n    at some.package.dao.GenericDao.insert(GenericDao.java:45)\n    at some.package.runner.FileLogicTester.storingArrayListInDb(FileLogicTester.java:220)\n    at some.package.runner.FileLogicTester.main(FileLogicTester.java:86)\nCaused by: org.postgresql.util.PSQLException: Can't infer the SQL type to use for an instance of java.util.ArrayList. Use setObject() with an explicit Types value to specify the type to use.\n    at org.postgresql.jdbc2.AbstractJdbc2Statement.setObject(AbstractJdbc2Statement.java:1801)\n    at org.postgresql.jdbc3g.AbstractJdbc3gStatement.setObject(AbstractJdbc3gStatement.java:37)\n    at org.postgresql.jdbc4.AbstractJdbc4Statement.setObject(AbstractJdbc4Statement.java:46)\n    at org.apache.commons.dbcp.DelegatingPreparedStatement.setObject(DelegatingPreparedStatement.java:255)\n    at org.springframework.jdbc.core.StatementCreatorUtils.setValue(StatementCreatorUtils.java:351)\n    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValueInternal(StatementCreatorUtils.java:216)\n    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValue(StatementCreatorUtils.java:144)\n    at org.springframework.jdbc.core.BatchUpdateUtils.setStatementParameters(BatchUpdateUtils.java:63)\n    at org.springframework.jdbc.core.namedparam.NamedParameterBatchUpdateUtils.access$000(NamedParameterBatchUpdateUtils.java:32)\n    at org.springframework.jdbc.core.namedparam.NamedParameterBatchUpdateUtils$1.setValues(NamedParameterBatchUpdateUtils.java:47)\n    at org.springframework.jdbc.core.JdbcTemplate$4.doInPreparedStatement(JdbcTemplate.java:893)\n    at org.springframework.jdbc.core.JdbcTemplate$4.doInPreparedStatement(JdbcTemplate.java:884)\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:587)\n    ... 7 more\n</code></pre>\n\n<p>Any suggestions?</p>\n"},{"tags":["java","memory-leaks","java-threads"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1698157212,"post_id":77352466,"comment_id":136367758,"body_markdown":"Is this happening when Tomcat is stopping?","body":"Is this happening when Tomcat is stopping?"},{"owner":{"account_id":29229311,"reputation":11,"user_id":22393358,"display_name":"Mouad Harhar"},"score":0,"creation_date":1698159250,"post_id":77352466,"comment_id":136368202,"body_markdown":"@aled yes only when the /bin/ . shutdown.sh is called","body":"@aled yes only when the /bin/ . shutdown.sh is called"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1698160264,"post_id":77352466,"comment_id":136368429,"body_markdown":"Then any potential memory leak is moot, since the process will end and release all memory.","body":"Then any potential memory leak is moot, since the process will end and release all memory."}],"owner":{"account_id":29229311,"reputation":11,"user_id":22393358,"display_name":"Mouad Harhar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1698153869,"creation_date":1698153869,"question_id":77352466,"body_markdown":"After shut downing my application I get a memory leak error message : \r\n\r\n```\r\n&lt;&lt;Stopping Ebus Manager...\r\n24-Oct-2023 14:36:22.840 WARNING [main] org.apache.catalina.loader.WebappClassLoaderBase.clearReferencesThreads The web application [gboxc_ccy] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\r\n java.base@11.0.11/java.lang.Object.wait(Native Method)\r\n java.base@11.0.11/java.lang.Object.wait(Object.java:328)\r\n java.base@11.0.11/java.util.TimerThread.mainLoop(Timer.java:527)\r\n java.base@11.0.11/java.util.TimerThread.run(Timer.java:506)\r\n24-Oct-2023 14:36:22.855 INFO [main] org.apache.coyote.AbstractProtocol.stop Stopping ProtocolHandler [&quot;http-nio-8110&quot;]\r\n24-Oct-2023 14:36:22.868 INFO [main] org.apache.coyote.AbstractProtocol.destroy Destroying ProtocolHandler [&quot;http-nio-8110&quot;]\r\n2023-10-24 14:36:27\r\nFull thread dump OpenJDK 64-Bit Server VM (11.0.11+9 mixed mode):\r\n\r\nThreads class SMR info:\r\n_java_thread_list=0x00007f8d98001380, length=14, elements={\r\n0x00007f8e34230000, 0x00007f8e34234000, 0x00007f8e3424d000, 0x00007f8e3424f000\r\n}\r\n\r\n&quot;Reference Handler&quot; #2 daemon prio=10 os_prio=0 cpu=1.08ms elapsed=84.79s tid=0x00007f8e34230000 nid=0xdad1b waiting on condition  [0x00007f8e14ffe000]\r\n   java.lang.Thread.State: RUNNABLE\r\n        at java.lang.ref.Reference.waitForReferencePendingList(java.base@11.0.11/Native Method)\r\n        at java.lang.ref.Reference.processPendingReferences(java.base@11.0.11/Reference.java:241)\r\n        at java.lang.ref.Reference$ReferenceHandler.run(java.base@11.0.11/Reference.java:213)\r\n\r\n```\r\n\r\n\r\nI would like to analyze that problem ? From where do I start ?","title":"Memory Leak in JAVA/FLEX application","body":"<p>After shut downing my application I get a memory leak error message :</p>\n<pre><code>&lt;&lt;Stopping Ebus Manager...\n24-Oct-2023 14:36:22.840 WARNING [main] org.apache.catalina.loader.WebappClassLoaderBase.clearReferencesThreads The web application [gboxc_ccy] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\n java.base@11.0.11/java.lang.Object.wait(Native Method)\n java.base@11.0.11/java.lang.Object.wait(Object.java:328)\n java.base@11.0.11/java.util.TimerThread.mainLoop(Timer.java:527)\n java.base@11.0.11/java.util.TimerThread.run(Timer.java:506)\n24-Oct-2023 14:36:22.855 INFO [main] org.apache.coyote.AbstractProtocol.stop Stopping ProtocolHandler [&quot;http-nio-8110&quot;]\n24-Oct-2023 14:36:22.868 INFO [main] org.apache.coyote.AbstractProtocol.destroy Destroying ProtocolHandler [&quot;http-nio-8110&quot;]\n2023-10-24 14:36:27\nFull thread dump OpenJDK 64-Bit Server VM (11.0.11+9 mixed mode):\n\nThreads class SMR info:\n_java_thread_list=0x00007f8d98001380, length=14, elements={\n0x00007f8e34230000, 0x00007f8e34234000, 0x00007f8e3424d000, 0x00007f8e3424f000\n}\n\n&quot;Reference Handler&quot; #2 daemon prio=10 os_prio=0 cpu=1.08ms elapsed=84.79s tid=0x00007f8e34230000 nid=0xdad1b waiting on condition  [0x00007f8e14ffe000]\n   java.lang.Thread.State: RUNNABLE\n        at java.lang.ref.Reference.waitForReferencePendingList(java.base@11.0.11/Native Method)\n        at java.lang.ref.Reference.processPendingReferences(java.base@11.0.11/Reference.java:241)\n        at java.lang.ref.Reference$ReferenceHandler.run(java.base@11.0.11/Reference.java:213)\n\n</code></pre>\n<p>I would like to analyze that problem ? From where do I start ?</p>\n"},{"tags":["java","spring-boot","greenmail"],"answers":[{"tags":[],"owner":{"account_id":907471,"reputation":266,"user_id":942054,"display_name":"Marcel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645364760,"creation_date":1645364760,"answer_id":71195015,"question_id":69639014,"body_markdown":"Could it be that you start your test classes A+B at the same time, meaning you have two GreenMail instances running and therefore have port collisions? There should be a socket BindException before in your logs then (when the 2nd test attempts to start GreenMail).\r\n\r\nI recommend to either run GreenMail on different port offsets or use dynamic port detection. Or somehow make both tests not run at the same time.\r\n","title":"GreenMail server works in single integration test class but not when all integration classes will be started","body":"<p>Could it be that you start your test classes A+B at the same time, meaning you have two GreenMail instances running and therefore have port collisions? There should be a socket BindException before in your logs then (when the 2nd test attempts to start GreenMail).</p>\n<p>I recommend to either run GreenMail on different port offsets or use dynamic port detection. Or somehow make both tests not run at the same time.</p>\n"}],"owner":{"account_id":1426774,"reputation":6585,"user_id":1350066,"accept_rate":47,"display_name":"Al Phaba"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1028,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698153311,"creation_date":1634690109,"question_id":69639014,"body_markdown":"I have several integration test classes, when I am executing a single one, the greenmail server will be started and works as expected. But when I am starting all integrations tests it fails, and its random which of the integration test cases fails.\r\nAccording to the execption it should work by setting a startup timeout, which I tried and could not resolve.\r\n\r\nIn my intergration test-classes A and B I am using a BaseIntegration class which has the following @RegisterExtension defined\r\n\r\n\t@RegisterExtension\r\n\tprotected static GreenMailExtension greenMail = new GreenMailExtension(getServerStartup())\r\n\t\t.withConfiguration(GreenMailConfiguration.aConfig().withUser(&quot;duke&quot;, &quot;springboot&quot;))\r\n\t\t.withPerMethodLifecycle(false);\r\n\r\nI tried already to set the ServerStartup like this\r\n\r\n    protected static ServerSetup getServerStartup() {\r\n        //return ServerSetupTest.SMTP;\r\n\r\n        final ServerSetup serverSetup = new ServerSetup(3025, null, ServerSetup.PROTOCOL_SMTP);\r\n        serverSetup.setServerStartupTimeout(5000L);\r\n        serverSetup.setVerbose(true);\r\n        return serverSetup;\r\n    }\r\n\r\nIn the resources area I have defined some application-test.properties like this\r\n\r\n    spring.mail.host=127.0.0.1\r\n    spring.mail.port=3025\r\n    spring.mail.username=duke\r\n    spring.mail.password=springboot\r\n    spring.mail.protocol=smtp\r\n\r\nIn the documentation I saw that its possible to choose a random port for the greenmail server by setting the port to 0, tried this but also did not work. \r\n\r\nThe exeception which will be thrown, when calling all the integration tests is this\r\n\r\n    Could not start mail server Thread-5, try to set server startup timeout &gt; 1000 via \r\n    ServerSetup.setServerStartupTimeout(timeoutInMs) or -Dgreenmail.startup.timeout\r\n    java.lang.IllegalStateException: Could not start mail server Thread-5, try to set server \r\n    startup timeout &gt; 1000 via ServerSetup.setServerStartupTimeout(timeoutInMs) or - \r\n    Dgreenmail.startup.timeout\r\n\tat com.icegreen.greenmail.util.GreenMail.start(GreenMail.java:104)\r\n\tat com.icegreen.greenmail.util.GreenMailProxy.start(GreenMailProxy.java:95)\r\n\tat com.icegreen.greenmail.junit5.GreenMailExtension.beforeAll(GreenMailExtension.java:72)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeBeforeAllCallbacks$8(ClassBasedTestDescriptor.java:368)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeBeforeAllCallbacks(ClassBasedTestDescriptor.java:368)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:192)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:78)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:136)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1259)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n\tat com.sun.proxy.$Proxy2.stop(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.stop(TestWorker.java:133)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:414)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n\tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\n\t","title":"GreenMail server works in single integration test class but not when all integration classes will be started","body":"<p>I have several integration test classes, when I am executing a single one, the greenmail server will be started and works as expected. But when I am starting all integrations tests it fails, and its random which of the integration test cases fails.\nAccording to the execption it should work by setting a startup timeout, which I tried and could not resolve.</p>\n<p>In my intergration test-classes A and B I am using a BaseIntegration class which has the following @RegisterExtension defined</p>\n<pre><code>@RegisterExtension\nprotected static GreenMailExtension greenMail = new GreenMailExtension(getServerStartup())\n    .withConfiguration(GreenMailConfiguration.aConfig().withUser(&quot;duke&quot;, &quot;springboot&quot;))\n    .withPerMethodLifecycle(false);\n</code></pre>\n<p>I tried already to set the ServerStartup like this</p>\n<pre><code>protected static ServerSetup getServerStartup() {\n    //return ServerSetupTest.SMTP;\n\n    final ServerSetup serverSetup = new ServerSetup(3025, null, ServerSetup.PROTOCOL_SMTP);\n    serverSetup.setServerStartupTimeout(5000L);\n    serverSetup.setVerbose(true);\n    return serverSetup;\n}\n</code></pre>\n<p>In the resources area I have defined some application-test.properties like this</p>\n<pre><code>spring.mail.host=127.0.0.1\nspring.mail.port=3025\nspring.mail.username=duke\nspring.mail.password=springboot\nspring.mail.protocol=smtp\n</code></pre>\n<p>In the documentation I saw that its possible to choose a random port for the greenmail server by setting the port to 0, tried this but also did not work.</p>\n<p>The exeception which will be thrown, when calling all the integration tests is this</p>\n<pre><code>Could not start mail server Thread-5, try to set server startup timeout &gt; 1000 via \nServerSetup.setServerStartupTimeout(timeoutInMs) or -Dgreenmail.startup.timeout\njava.lang.IllegalStateException: Could not start mail server Thread-5, try to set server \nstartup timeout &gt; 1000 via ServerSetup.setServerStartupTimeout(timeoutInMs) or - \nDgreenmail.startup.timeout\nat com.icegreen.greenmail.util.GreenMail.start(GreenMail.java:104)\nat com.icegreen.greenmail.util.GreenMailProxy.start(GreenMailProxy.java:95)\nat com.icegreen.greenmail.junit5.GreenMailExtension.beforeAll(GreenMailExtension.java:72)\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeBeforeAllCallbacks$8(ClassBasedTestDescriptor.java:368)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeBeforeAllCallbacks(ClassBasedTestDescriptor.java:368)\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:192)\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:78)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:136)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat java.util.ArrayList.forEach(ArrayList.java:1259)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\nat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)\nat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)\nat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)\nat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\nat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\nat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\nat com.sun.proxy.$Proxy2.stop(Unknown Source)\nat org.gradle.api.internal.tasks.testing.worker.TestWorker.stop(TestWorker.java:133)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\nat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182)\nat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164)\nat org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:414)\nat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\nat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\nat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\nat java.lang.Thread.run(Thread.java:748)\n</code></pre>\n"},{"tags":["java","spring-tool-suite"],"answers":[{"tags":[],"owner":{"account_id":2082386,"reputation":6063,"user_id":1854124,"display_name":"Martin Lippert"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698153149,"creation_date":1698153149,"answer_id":77352364,"question_id":77343965,"body_markdown":"This looks a lot like the a conflict/incompatibility between the features you have already installed (or that come with the Spring Tools distribution in case you have used that) and the features you are trying to install. Most likely, you are trying to install versions of those features that are not compatible with the base Eclipse version that you have running inside your Spring Tools installation.\r\n\r\nThe easiest way to solve this is to start with a fresh installation of the latest Spring Tools 4 for Eclipse distribution and then install those additional features using the pre-configured main Eclipse update site (in the `Install New Software` dialog).\r\n\r\nIf you can&#39;t do that (for whatever reason) and you have to use a specific version of the Spring Tools for Eclipse (not the latest one), you should mention the exact version that you have installed and the repository you try to install the additional features from, that might reveal additional options to get those features installed. But it could be difficult, especially if you have updated (parts of) the IDE previously.","title":"Neither able to see Dynamic Web Project option nor able to download the update on STS","body":"<p>This looks a lot like the a conflict/incompatibility between the features you have already installed (or that come with the Spring Tools distribution in case you have used that) and the features you are trying to install. Most likely, you are trying to install versions of those features that are not compatible with the base Eclipse version that you have running inside your Spring Tools installation.</p>\n<p>The easiest way to solve this is to start with a fresh installation of the latest Spring Tools 4 for Eclipse distribution and then install those additional features using the pre-configured main Eclipse update site (in the <code>Install New Software</code> dialog).</p>\n<p>If you can't do that (for whatever reason) and you have to use a specific version of the Spring Tools for Eclipse (not the latest one), you should mention the exact version that you have installed and the repository you try to install the additional features from, that might reveal additional options to get those features installed. But it could be difficult, especially if you have updated (parts of) the IDE previously.</p>\n"}],"owner":{"account_id":5100770,"reputation":1381,"user_id":4090458,"accept_rate":38,"display_name":"Varun Jain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698153149,"creation_date":1698052246,"question_id":77343965,"body_markdown":"In the start, I was not able to see Dynamic Web Project option in my Spring Tool Suite (STS) 4. Then I tried to follow this StackOverFlow [link][1] to install that option in my STS but it is not working and giving below error.\r\n\r\n&gt;     Cannot complete the install because of a conflicting dependency.\r\n&gt;       Software being installed: Eclipse Java EE Developer Tools 3.31.0.v202308110616 (org.eclipse.jst.enterprise_ui.feature.feature.group 3.31.0.v202308110616)\r\n&gt;       Software currently installed: m2e-wtp - JSF configurator for WTP (Optional) 1.4.4.20201128-1705 (org.eclipse.m2e.wtp.jsf.feature.feature.group 1.4.4.20201128-1705)\r\n&gt;       Software currently installed: Eclipse Web Developer Tools 3.28.0.v202211200019 (org.eclipse.wst.web_ui.feature.feature.group 3.28.0.v202211200019)\r\n&gt;       Software currently installed: Eclipse XML Editors and Tools 3.28.0.v202211200019 (org.eclipse.wst.xml_ui.feature.feature.group 3.28.0.v202211200019)\r\n&gt;       Software currently installed: Spring Tool Suite 4 4.17.2.202301310704 (org.springframework.boot.ide.branding.sts4 4.17.2.202301310704)\r\n&gt;       Only one of the following can be installed at once: \r\n&gt;         Web Plug-in 1.2.100.v202205260542 (org.eclipse.jst.j2ee.web 1.2.100.v202205260542)\r\n&gt;         Web Plug-in 1.1.911.v201903222025 (org.eclipse.jst.j2ee.web 1.1.911.v201903222025)\r\n&gt;         Web Plug-in 1.1.910.v201711032019 (org.eclipse.jst.j2ee.web 1.1.910.v201711032019)\r\n&gt;         Web Plug-in 1.1.900.v201701262104 (org.eclipse.jst.j2ee.web 1.1.900.v201701262104)\r\n&gt;         Web Plug-in 1.3.0.v202307260438 (org.eclipse.jst.j2ee.web 1.3.0.v202307260438)\r\n&gt;       Only one of the following can be installed at once: \r\n&gt;         Eclipse IDE UI 3.20.0.v20221027-2208 (org.eclipse.ui.ide 3.20.0.v20221027-2208)\r\n&gt;         Eclipse IDE UI 3.21.100.v20230825-1346 (org.eclipse.ui.ide 3.21.100.v20230825-1346)\r\n&gt;         Eclipse IDE UI 3.17.0.v20200217-1511 (org.eclipse.ui.ide 3.17.0.v20200217-1511)\r\n&gt;         Eclipse IDE UI 3.13.0.v20170516-1223 (org.eclipse.ui.ide 3.13.0.v20170516-1223)\r\n&gt;         Eclipse IDE UI 3.13.1.v20170822-1526 (org.eclipse.ui.ide 3.13.1.v20170822-1526)\r\n&gt;       Only one of the following can be installed at once: \r\n&gt;         SSE CSS Source Editor 1.1.300.v201911262315 (org.eclipse.wst.css.ui 1.1.300.v201911262315)\r\n&gt;         SSE CSS Source Editor 1.2.200.v202211200019 (org.eclipse.wst.css.ui 1.2.200.v202211200019)\r\n&gt;         SSE CSS Source Editor 1.0.1100.v201704250105 (org.eclipse.wst.css.ui 1.0.1100.v201704250105)\r\n&gt;         SSE CSS Source Editor 1.2.200.v202308160453 (org.eclipse.wst.css.ui 1.2.200.v202308160453)\r\n&gt;       Only one of the following can be installed at once: \r\n&gt;         Structured Source Editor 1.7.800.v202308200343 (org.eclipse.wst.sse.ui 1.7.800.v202308200343)\r\n&gt;         Structured Source Editor 1.3.600.v201704250123 (org.eclipse.wst.sse.ui 1.3.600.v201704250123)\r\n&gt;         Structured Source Editor 1.6.300.v202001091420 (org.eclipse.wst.sse.ui 1.6.300.v202001091420)\r\n&gt;         Structured Source Editor 1.7.600.v202211200019 (org.eclipse.wst.sse.ui 1.7.600.v202211200019)\r\n&gt;         Structured Source Editor 1.3.600.v201707042340 (org.eclipse.wst.sse.ui 1.3.600.v201707042340)\r\n&gt;       Only one of the following can be installed at once: \r\n&gt;         Eclipse Web Developer Tools 1.1.601.v201602221748 (org.eclipse.wst.web.ui 1.1.601.v201602221748)\r\n&gt;         Eclipse Web Developer Tools 1.2.100.v201902281912 (org.eclipse.wst.web.ui 1.2.100.v201902281912)\r\n&gt;         Eclipse Web Developer Tools 1.2.300.v202206160209 (org.eclipse.wst.web.ui 1.2.300.v202206160209)\r\n&gt;         Eclipse Web Developer Tools 1.2.500.v202308160453 (org.eclipse.wst.web.ui 1.2.500.v202308160453)\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: JSF Tools 3.10.0.v201704192341 (org.eclipse.jsf.feature.feature.group 3.10.0.v201704192341)\r\n&gt;         To: org.eclipse.equinox.p2.iu; org.eclipse.jst.jsf.common [1.5.101.v201504022146,1.5.101.v201504022146]\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: JSF Tools 3.10.0.v201803271721 (org.eclipse.jsf.feature.feature.group 3.10.0.v201803271721)\r\n&gt;         To: org.eclipse.equinox.p2.iu; org.eclipse.jst.jsf.ui [1.6.102.v201803271721,1.6.102.v201803271721]\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: JSF Tools 3.10.0.v201902121810 (org.eclipse.jsf.feature.feature.group 3.10.0.v201902121810)\r\n&gt;         To: org.eclipse.equinox.p2.iu; org.eclipse.jst.jsf.ui [1.6.102.v201902121810,1.6.102.v201902121810]\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: JSF Tools 3.10.200.v202204070252 (org.eclipse.jsf.feature.feature.group 3.10.200.v202204070252)\r\n&gt;         To: org.eclipse.equinox.p2.iu; org.eclipse.jst.jsf.core [1.8.300.v202204070252,1.8.300.v202204070252]\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: JSF Tools 3.13.0.v202308300413 (org.eclipse.jsf.feature.feature.group 3.13.0.v202308300413)\r\n&gt;         To: org.eclipse.equinox.p2.iu; org.eclipse.jst.jsf.core [1.9.1.v202308300413,1.9.1.v202308300413]\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: Eclipse Java EE Developer Tools 3.31.0.v202308110616 (org.eclipse.jst.enterprise_ui.feature.feature.group 3.31.0.v202308110616)\r\n&gt;         To: org.eclipse.equinox.p2.iu; org.eclipse.jst.servlet.ui 0.0.0\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: Eclipse Java EE Developer Tools 1.1.0.v202307261744 (org.eclipse.jst.jee.ui 1.1.0.v202307261744)\r\n&gt;         To: osgi.bundle; org.eclipse.ui.ide [3.21.0,4.0.0)\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: JSF Tools - Common 1.5.101.v201504022146 (org.eclipse.jst.jsf.common 1.5.101.v201504022146)\r\n&gt;         To: osgi.bundle; org.eclipse.wst.sse.ui [1.0.101,1.4.0)\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: JSF Tools - Core 1.8.300.v202204070252 (org.eclipse.jst.jsf.core 1.8.300.v202204070252)\r\n&gt;         To: osgi.bundle; org.eclipse.jst.j2ee.web [1.2.0,2.0.0)\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: JSF Tools - Core 1.9.1.v202308300413 (org.eclipse.jst.jsf.core 1.9.1.v202308300413)\r\n&gt;         To: osgi.bundle; org.eclipse.jst.j2ee.web [1.2.0,2.0.0)\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: JSF Tools - UI 1.6.102.v201803271721 (org.eclipse.jst.jsf.ui 1.6.102.v201803271721)\r\n&gt;         To: osgi.bundle; org.eclipse.jst.jsp.ui [1.1.0,1.3.0)\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: JSF Tools - UI 1.6.102.v201902121810 (org.eclipse.jst.jsf.ui 1.6.102.v201902121810)\r\n&gt;         To: osgi.bundle; org.eclipse.jst.jsp.ui [1.1.0,1.3.0)\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: SSE JSP Source Editor 1.1.1200.v201702270522 (org.eclipse.jst.jsp.ui 1.1.1200.v201702270522)\r\n&gt;         To: osgi.bundle; org.eclipse.wst.sse.ui [1.3.500,1.4.0)\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: SSE JSP Source Editor 1.1.1201.v201710051737 (org.eclipse.jst.jsp.ui 1.1.1201.v201710051737)\r\n&gt;         To: osgi.bundle; org.eclipse.wst.sse.ui [1.3.500,1.4.0)\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: SSE JSP Source Editor 1.2.200.v201904272124 (org.eclipse.jst.jsp.ui 1.2.200.v201904272124)\r\n&gt;         To: osgi.bundle; org.eclipse.wst.css.ui [1.1.0,1.2.0)\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: WTP Servlet UI Plug-in 1.1.910.v201701262104 (org.eclipse.jst.servlet.ui 1.1.910.v201701262104)\r\n&gt;         To: osgi.bundle; org.eclipse.wst.web.ui [1.1.0,1.2.0)\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: WTP Servlet UI Plug-in 1.1.920.v201711302141 (org.eclipse.jst.servlet.ui 1.1.920.v201711302141)\r\n&gt;         To: osgi.bundle; org.eclipse.wst.web.ui [1.1.0,1.2.0)\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: WTP Servlet UI Plug-in 1.1.921.v201903222025 (org.eclipse.jst.servlet.ui 1.1.921.v201903222025)\r\n&gt;         To: osgi.bundle; org.eclipse.jst.j2ee.web [1.1.0,1.2.0)\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: WTP Servlet UI Plug-in 1.2.0.v202307261744 (org.eclipse.jst.servlet.ui 1.2.0.v202307261744)\r\n&gt;         To: osgi.bundle; org.eclipse.jst.jee.ui [1.1.0,2.0.0)\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: m2e-wtp - JSF configurator for WTP (Optional) 1.4.4.20201128-1705 (org.eclipse.m2e.wtp.jsf.feature.feature.group 1.4.4.20201128-1705)\r\n&gt;         To: org.eclipse.equinox.p2.iu; org.eclipse.jsf.feature.feature.group 3.0.0\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: Eclipse Platform 4.26.0.v20221123-2302 (org.eclipse.platform.feature.group 4.26.0.v20221123-2302)\r\n&gt;         To: org.eclipse.equinox.p2.iu; org.eclipse.ui.ide [3.20.0.v20221027-2208,3.20.0.v20221027-2208]\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: Eclipse Web Developer Tools 3.28.0.v202211200019 (org.eclipse.wst.web_ui.feature.feature.group 3.28.0.v202211200019)\r\n&gt;         To: org.eclipse.equinox.p2.iu; org.eclipse.wst.css.ui [1.2.200.v202211200019,1.2.200.v202211200019]\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: Eclipse Web Developer Tools 3.28.0.v202211200019 (org.eclipse.wst.web_ui.feature.feature.group 3.28.0.v202211200019)\r\n&gt;         To: org.eclipse.equinox.p2.iu; org.eclipse.wst.web.ui [1.2.300.v202206160209,1.2.300.v202206160209]\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: Eclipse XML Editors and Tools 3.28.0.v202211200019 (org.eclipse.wst.xml_ui.feature.feature.group 3.28.0.v202211200019)\r\n&gt;         To: org.eclipse.equinox.p2.iu; org.eclipse.wst.sse.ui [1.7.600.v202211200019,1.7.600.v202211200019]\r\n&gt;       Cannot satisfy dependency:\r\n&gt;         From: Spring Tool Suite 4 4.17.2.202301310704 (org.springframework.boot.ide.branding.sts4 4.17.2.202301310704)\r\n&gt;         To: org.eclipse.equinox.p2.iu; org.eclipse.platform.feature.group [4.26.0.v20221123-2302,4.26.0.v20221123-2302]\r\n\r\nSo far, I have tried to install all the option from below image one-by-one but no luck. And moreover, all these options are giving almost same sort of error. Let me know if you need error from all the options.\r\n\r\n[![Java EE Options][2]][2]\r\n\r\nCan someone help me resolve the error?\r\n\r\n\r\n  [1]: https://Dynamic%20web%20project%20missing%20in%20STS\r\n  [2]: https://i.stack.imgur.com/4REsb.png","title":"Neither able to see Dynamic Web Project option nor able to download the update on STS","body":"<p>In the start, I was not able to see Dynamic Web Project option in my Spring Tool Suite (STS) 4. Then I tried to follow this StackOverFlow <a href=\"https://Dynamic%20web%20project%20missing%20in%20STS\" rel=\"nofollow noreferrer\">link</a> to install that option in my STS but it is not working and giving below error.</p>\n<blockquote>\n<pre><code>Cannot complete the install because of a conflicting dependency.\n  Software being installed: Eclipse Java EE Developer Tools 3.31.0.v202308110616 (org.eclipse.jst.enterprise_ui.feature.feature.group 3.31.0.v202308110616)\n  Software currently installed: m2e-wtp - JSF configurator for WTP (Optional) 1.4.4.20201128-1705 (org.eclipse.m2e.wtp.jsf.feature.feature.group 1.4.4.20201128-1705)\n  Software currently installed: Eclipse Web Developer Tools 3.28.0.v202211200019 (org.eclipse.wst.web_ui.feature.feature.group 3.28.0.v202211200019)\n  Software currently installed: Eclipse XML Editors and Tools 3.28.0.v202211200019 (org.eclipse.wst.xml_ui.feature.feature.group 3.28.0.v202211200019)\n  Software currently installed: Spring Tool Suite 4 4.17.2.202301310704 (org.springframework.boot.ide.branding.sts4 4.17.2.202301310704)\n  Only one of the following can be installed at once: \n    Web Plug-in 1.2.100.v202205260542 (org.eclipse.jst.j2ee.web 1.2.100.v202205260542)\n    Web Plug-in 1.1.911.v201903222025 (org.eclipse.jst.j2ee.web 1.1.911.v201903222025)\n    Web Plug-in 1.1.910.v201711032019 (org.eclipse.jst.j2ee.web 1.1.910.v201711032019)\n    Web Plug-in 1.1.900.v201701262104 (org.eclipse.jst.j2ee.web 1.1.900.v201701262104)\n    Web Plug-in 1.3.0.v202307260438 (org.eclipse.jst.j2ee.web 1.3.0.v202307260438)\n  Only one of the following can be installed at once: \n    Eclipse IDE UI 3.20.0.v20221027-2208 (org.eclipse.ui.ide 3.20.0.v20221027-2208)\n    Eclipse IDE UI 3.21.100.v20230825-1346 (org.eclipse.ui.ide 3.21.100.v20230825-1346)\n    Eclipse IDE UI 3.17.0.v20200217-1511 (org.eclipse.ui.ide 3.17.0.v20200217-1511)\n    Eclipse IDE UI 3.13.0.v20170516-1223 (org.eclipse.ui.ide 3.13.0.v20170516-1223)\n    Eclipse IDE UI 3.13.1.v20170822-1526 (org.eclipse.ui.ide 3.13.1.v20170822-1526)\n  Only one of the following can be installed at once: \n    SSE CSS Source Editor 1.1.300.v201911262315 (org.eclipse.wst.css.ui 1.1.300.v201911262315)\n    SSE CSS Source Editor 1.2.200.v202211200019 (org.eclipse.wst.css.ui 1.2.200.v202211200019)\n    SSE CSS Source Editor 1.0.1100.v201704250105 (org.eclipse.wst.css.ui 1.0.1100.v201704250105)\n    SSE CSS Source Editor 1.2.200.v202308160453 (org.eclipse.wst.css.ui 1.2.200.v202308160453)\n  Only one of the following can be installed at once: \n    Structured Source Editor 1.7.800.v202308200343 (org.eclipse.wst.sse.ui 1.7.800.v202308200343)\n    Structured Source Editor 1.3.600.v201704250123 (org.eclipse.wst.sse.ui 1.3.600.v201704250123)\n    Structured Source Editor 1.6.300.v202001091420 (org.eclipse.wst.sse.ui 1.6.300.v202001091420)\n    Structured Source Editor 1.7.600.v202211200019 (org.eclipse.wst.sse.ui 1.7.600.v202211200019)\n    Structured Source Editor 1.3.600.v201707042340 (org.eclipse.wst.sse.ui 1.3.600.v201707042340)\n  Only one of the following can be installed at once: \n    Eclipse Web Developer Tools 1.1.601.v201602221748 (org.eclipse.wst.web.ui 1.1.601.v201602221748)\n    Eclipse Web Developer Tools 1.2.100.v201902281912 (org.eclipse.wst.web.ui 1.2.100.v201902281912)\n    Eclipse Web Developer Tools 1.2.300.v202206160209 (org.eclipse.wst.web.ui 1.2.300.v202206160209)\n    Eclipse Web Developer Tools 1.2.500.v202308160453 (org.eclipse.wst.web.ui 1.2.500.v202308160453)\n  Cannot satisfy dependency:\n    From: JSF Tools 3.10.0.v201704192341 (org.eclipse.jsf.feature.feature.group 3.10.0.v201704192341)\n    To: org.eclipse.equinox.p2.iu; org.eclipse.jst.jsf.common [1.5.101.v201504022146,1.5.101.v201504022146]\n  Cannot satisfy dependency:\n    From: JSF Tools 3.10.0.v201803271721 (org.eclipse.jsf.feature.feature.group 3.10.0.v201803271721)\n    To: org.eclipse.equinox.p2.iu; org.eclipse.jst.jsf.ui [1.6.102.v201803271721,1.6.102.v201803271721]\n  Cannot satisfy dependency:\n    From: JSF Tools 3.10.0.v201902121810 (org.eclipse.jsf.feature.feature.group 3.10.0.v201902121810)\n    To: org.eclipse.equinox.p2.iu; org.eclipse.jst.jsf.ui [1.6.102.v201902121810,1.6.102.v201902121810]\n  Cannot satisfy dependency:\n    From: JSF Tools 3.10.200.v202204070252 (org.eclipse.jsf.feature.feature.group 3.10.200.v202204070252)\n    To: org.eclipse.equinox.p2.iu; org.eclipse.jst.jsf.core [1.8.300.v202204070252,1.8.300.v202204070252]\n  Cannot satisfy dependency:\n    From: JSF Tools 3.13.0.v202308300413 (org.eclipse.jsf.feature.feature.group 3.13.0.v202308300413)\n    To: org.eclipse.equinox.p2.iu; org.eclipse.jst.jsf.core [1.9.1.v202308300413,1.9.1.v202308300413]\n  Cannot satisfy dependency:\n    From: Eclipse Java EE Developer Tools 3.31.0.v202308110616 (org.eclipse.jst.enterprise_ui.feature.feature.group 3.31.0.v202308110616)\n    To: org.eclipse.equinox.p2.iu; org.eclipse.jst.servlet.ui 0.0.0\n  Cannot satisfy dependency:\n    From: Eclipse Java EE Developer Tools 1.1.0.v202307261744 (org.eclipse.jst.jee.ui 1.1.0.v202307261744)\n    To: osgi.bundle; org.eclipse.ui.ide [3.21.0,4.0.0)\n  Cannot satisfy dependency:\n    From: JSF Tools - Common 1.5.101.v201504022146 (org.eclipse.jst.jsf.common 1.5.101.v201504022146)\n    To: osgi.bundle; org.eclipse.wst.sse.ui [1.0.101,1.4.0)\n  Cannot satisfy dependency:\n    From: JSF Tools - Core 1.8.300.v202204070252 (org.eclipse.jst.jsf.core 1.8.300.v202204070252)\n    To: osgi.bundle; org.eclipse.jst.j2ee.web [1.2.0,2.0.0)\n  Cannot satisfy dependency:\n    From: JSF Tools - Core 1.9.1.v202308300413 (org.eclipse.jst.jsf.core 1.9.1.v202308300413)\n    To: osgi.bundle; org.eclipse.jst.j2ee.web [1.2.0,2.0.0)\n  Cannot satisfy dependency:\n    From: JSF Tools - UI 1.6.102.v201803271721 (org.eclipse.jst.jsf.ui 1.6.102.v201803271721)\n    To: osgi.bundle; org.eclipse.jst.jsp.ui [1.1.0,1.3.0)\n  Cannot satisfy dependency:\n    From: JSF Tools - UI 1.6.102.v201902121810 (org.eclipse.jst.jsf.ui 1.6.102.v201902121810)\n    To: osgi.bundle; org.eclipse.jst.jsp.ui [1.1.0,1.3.0)\n  Cannot satisfy dependency:\n    From: SSE JSP Source Editor 1.1.1200.v201702270522 (org.eclipse.jst.jsp.ui 1.1.1200.v201702270522)\n    To: osgi.bundle; org.eclipse.wst.sse.ui [1.3.500,1.4.0)\n  Cannot satisfy dependency:\n    From: SSE JSP Source Editor 1.1.1201.v201710051737 (org.eclipse.jst.jsp.ui 1.1.1201.v201710051737)\n    To: osgi.bundle; org.eclipse.wst.sse.ui [1.3.500,1.4.0)\n  Cannot satisfy dependency:\n    From: SSE JSP Source Editor 1.2.200.v201904272124 (org.eclipse.jst.jsp.ui 1.2.200.v201904272124)\n    To: osgi.bundle; org.eclipse.wst.css.ui [1.1.0,1.2.0)\n  Cannot satisfy dependency:\n    From: WTP Servlet UI Plug-in 1.1.910.v201701262104 (org.eclipse.jst.servlet.ui 1.1.910.v201701262104)\n    To: osgi.bundle; org.eclipse.wst.web.ui [1.1.0,1.2.0)\n  Cannot satisfy dependency:\n    From: WTP Servlet UI Plug-in 1.1.920.v201711302141 (org.eclipse.jst.servlet.ui 1.1.920.v201711302141)\n    To: osgi.bundle; org.eclipse.wst.web.ui [1.1.0,1.2.0)\n  Cannot satisfy dependency:\n    From: WTP Servlet UI Plug-in 1.1.921.v201903222025 (org.eclipse.jst.servlet.ui 1.1.921.v201903222025)\n    To: osgi.bundle; org.eclipse.jst.j2ee.web [1.1.0,1.2.0)\n  Cannot satisfy dependency:\n    From: WTP Servlet UI Plug-in 1.2.0.v202307261744 (org.eclipse.jst.servlet.ui 1.2.0.v202307261744)\n    To: osgi.bundle; org.eclipse.jst.jee.ui [1.1.0,2.0.0)\n  Cannot satisfy dependency:\n    From: m2e-wtp - JSF configurator for WTP (Optional) 1.4.4.20201128-1705 (org.eclipse.m2e.wtp.jsf.feature.feature.group 1.4.4.20201128-1705)\n    To: org.eclipse.equinox.p2.iu; org.eclipse.jsf.feature.feature.group 3.0.0\n  Cannot satisfy dependency:\n    From: Eclipse Platform 4.26.0.v20221123-2302 (org.eclipse.platform.feature.group 4.26.0.v20221123-2302)\n    To: org.eclipse.equinox.p2.iu; org.eclipse.ui.ide [3.20.0.v20221027-2208,3.20.0.v20221027-2208]\n  Cannot satisfy dependency:\n    From: Eclipse Web Developer Tools 3.28.0.v202211200019 (org.eclipse.wst.web_ui.feature.feature.group 3.28.0.v202211200019)\n    To: org.eclipse.equinox.p2.iu; org.eclipse.wst.css.ui [1.2.200.v202211200019,1.2.200.v202211200019]\n  Cannot satisfy dependency:\n    From: Eclipse Web Developer Tools 3.28.0.v202211200019 (org.eclipse.wst.web_ui.feature.feature.group 3.28.0.v202211200019)\n    To: org.eclipse.equinox.p2.iu; org.eclipse.wst.web.ui [1.2.300.v202206160209,1.2.300.v202206160209]\n  Cannot satisfy dependency:\n    From: Eclipse XML Editors and Tools 3.28.0.v202211200019 (org.eclipse.wst.xml_ui.feature.feature.group 3.28.0.v202211200019)\n    To: org.eclipse.equinox.p2.iu; org.eclipse.wst.sse.ui [1.7.600.v202211200019,1.7.600.v202211200019]\n  Cannot satisfy dependency:\n    From: Spring Tool Suite 4 4.17.2.202301310704 (org.springframework.boot.ide.branding.sts4 4.17.2.202301310704)\n    To: org.eclipse.equinox.p2.iu; org.eclipse.platform.feature.group [4.26.0.v20221123-2302,4.26.0.v20221123-2302]\n</code></pre>\n</blockquote>\n<p>So far, I have tried to install all the option from below image one-by-one but no luck. And moreover, all these options are giving almost same sort of error. Let me know if you need error from all the options.</p>\n<p><a href=\"https://i.stack.imgur.com/4REsb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4REsb.png\" alt=\"Java EE Options\" /></a></p>\n<p>Can someone help me resolve the error?</p>\n"},{"tags":["java","security","jsp","servlets","xss"],"comments":[{"owner":{"account_id":1571544,"reputation":4459,"user_id":1459144,"accept_rate":82,"display_name":"user1459144"},"score":1,"creation_date":1384303791,"post_id":2658922,"comment_id":29706493,"body_markdown":"The great post how to prevent XSS attacks in different situations is posted there: http://stackoverflow.com/questions/19824338/avoid-xss-and-allow-some-html-tags-with-javascript/19943011#19943011","body":"The great post how to prevent XSS attacks in different situations is posted there: <a href=\"http://stackoverflow.com/questions/19824338/avoid-xss-and-allow-some-html-tags-with-javascript/19943011#19943011\" title=\"avoid xss and allow some html tags with javascript\">stackoverflow.com/questions/19824338/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":87656,"reputation":31128,"user_id":242940,"display_name":"Sripathi Krishnan"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1271518714,"creation_date":1271518714,"answer_id":2658933,"question_id":2658922,"body_markdown":"The how-to-prevent-xss has been asked several times. You will find a lot of information in StackOverflow. Also, [OWASP website has an XSS prevention cheat sheet][1] that you should go through.\r\n\r\nOn the libraries to use, [OWASP&#39;s ESAPI library][2] has a java flavour. You should try that out. Besides that, every framework that you use has some protection against XSS. Again, OWASP website has information on most popular frameworks, so I would recommend going through their site.\r\n\r\n\r\n  [1]: http://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet\r\n  [2]: http://www.owasp.org/index.php/Category:OWASP_Enterprise_Security_API#tab=Java_EE","title":"XSS prevention in JSP/Servlet web application","body":"<p>The how-to-prevent-xss has been asked several times. You will find a lot of information in StackOverflow. Also, <a href=\"http://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet\" rel=\"noreferrer\">OWASP website has an XSS prevention cheat sheet</a> that you should go through.</p>\n\n<p>On the libraries to use, <a href=\"http://www.owasp.org/index.php/Category:OWASP_Enterprise_Security_API#tab=Java_EE\" rel=\"noreferrer\">OWASP's ESAPI library</a> has a java flavour. You should try that out. Besides that, every framework that you use has some protection against XSS. Again, OWASP website has information on most popular frameworks, so I would recommend going through their site.</p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":120,"is_accepted":true,"score":120,"last_activity_date":1698152926,"creation_date":1271518851,"answer_id":2658941,"question_id":2658922,"body_markdown":"XSS can be prevented in JSP by using [JSTL][1] [`&lt;c:out&gt;`][2] tag or [`fn:escapeXml()`][3] EL function when (re)displaying **user-controlled input**. This includes request parameters, headers, cookies, URL, body, etc. Anything which you extract from the request object. Also the user-controlled input from previous requests which is stored in a database needs to be escaped during redisplaying.\r\n\r\nFor example:\r\n\r\n&lt;!-- language: xhtml --&gt;\r\n\r\n    &lt;p&gt;&lt;c:out value=&quot;${bean.userControlledValue}&quot;&gt;&lt;/p&gt;\r\n    &lt;p&gt;&lt;input name=&quot;foo&quot; value=&quot;${fn:escapeXml(param.foo)}&quot;&gt;&lt;/p&gt;\r\n\r\nThis will escape characters which may malform the rendered HTML such as `&lt;`, `&gt;`, `&quot;`, `&#39;` and `&amp;` into [HTML/XML entities][4] such as `&amp;lt;`, `&amp;gt;`, `&amp;quot;`, `&amp;apos;` and `&amp;amp;`.\r\n\r\nNote that you don&#39;t need to escape them in the Java (Servlet) code, since they are harmless over there. Some may opt to escape them during *request* processing (as you do in Servlet or Filter) instead of *response* processing (as you do in JSP), but this way you may risk that the data unnecessarily get double-escaped (e.g. `&amp;` becomes `&amp;amp;amp;` instead of `&amp;amp;` and ultimately the enduser would see `&amp;amp;` being presented), or that the DB-stored data becomes unportable (e.g. when exporting data to JSON, CSV, XLS, PDF, etc which doesn&#39;t require HTML-escaping at all). You&#39;ll also lose social control because you don&#39;t know anymore what the user has actually filled in. You&#39;d as being a site admin really like to know which users/IPs are trying to perform XSS, so that you can easily track them and take actions accordingly. Escaping during request processing should only and only be used as latest resort when you really need to fix a train wreck of a badly developed legacy web application in the shortest time as possible. Still, you should ultimately rewrite your JSP files to become XSS-safe.\r\n\r\nIf you&#39;d like to redisplay user-controlled input as HTML wherein you would like to allow only a specific subset of HTML tags like `&lt;b&gt;`, `&lt;i&gt;`, `&lt;u&gt;`, etc, then you need to sanitize the input by a whitelist. You can use a HTML parser like [Jsoup][6] for this. But, much better is to introduce a human friendly markup language such as Markdown (also used here on Stack Overflow). Then you can use a Markdown parser like [CommonMark][5] for this. It has also builtin HTML sanitizing capabilities. See also https://stackoverflow.com/questions/3354669/markdown-or-html.\r\n\r\nPlease note that the term &quot;sanitizing&quot; such as Jsoup/Markdown/Owasp does concerns a very different thing than the term &quot;escaping&quot; such as `&lt;c:out&gt;` does. HTML sanitizers basically clean up a string containing possibly malicious HTML so that it can be used as safe HTML *without* the need to escape. I.e. when you actually intend to interpret user-controlled input literally as HTML, including tags like `&lt;div&gt;`, `&lt;p&gt;`, `&lt;img&gt;`, etc. HTML escapers basically prevent them to be interpreted at all, so that they show as plain text. In other words, you don&#39;t at all need to beforehand sanitize any HTML which you already are going to escape nonetheless.\r\n\r\nThe only concern in the server side with regard to databases is [SQL injection][7] prevention. You need to make sure that you never string-concatenate user-controlled input straight in the SQL or JPQL query and that you&#39;re using parameterized queries all the way. In JDBC terms, this means that you should use [`PreparedStatement`][8] instead of `Statement`. In JPA terms, use [`Query`][9].\r\n\r\n---\r\n\r\nAn alternative would be to migrate from JSP/Servlet to Java EE&#39;s MVC framework [JSF][10]. It has built-in XSS (and CSRF!) prevention all over place so that you don&#39;t need to manually fiddle with `&lt;c:out&gt;` and friends. See also https://stackoverflow.com/questions/7722159/csrf-xss-and-sql-injection-attack-prevention-in-jsf.\r\n\r\n\r\n  [1]: https://jakarta.ee/specifications/tags/1.2/tagdocs/\r\n  [2]: https://jakarta.ee/specifications/tags/1.2/tagdocs/c/out.html\r\n  [3]: https://jakarta.ee/specifications/tags/1.2/tagdocs/fn/escapeXml.fn.html\r\n  [4]: https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references\r\n  [5]: https://github.com/atlassian/commonmark-java\r\n  [6]: https://jsoup.org/\r\n  [7]: https://en.wikipedia.org/wiki/SQL_injection\r\n  [8]: https://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html\r\n  [9]: https://jakarta.ee/specifications/platform/8/apidocs/javax/persistence/Query.html#setParameter-int-java.lang.Object-\r\n  [10]: https://stackoverflow.com/tags/jsf/info","title":"XSS prevention in JSP/Servlet web application","body":"<p>XSS can be prevented in JSP by using <a href=\"https://jakarta.ee/specifications/tags/1.2/tagdocs/\" rel=\"nofollow noreferrer\">JSTL</a> <a href=\"https://jakarta.ee/specifications/tags/1.2/tagdocs/c/out.html\" rel=\"nofollow noreferrer\"><code>&lt;c:out&gt;</code></a> tag or <a href=\"https://jakarta.ee/specifications/tags/1.2/tagdocs/fn/escapeXml.fn.html\" rel=\"nofollow noreferrer\"><code>fn:escapeXml()</code></a> EL function when (re)displaying <strong>user-controlled input</strong>. This includes request parameters, headers, cookies, URL, body, etc. Anything which you extract from the request object. Also the user-controlled input from previous requests which is stored in a database needs to be escaped during redisplaying.</p>\n<p>For example:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;p&gt;&lt;c:out value=&quot;${bean.userControlledValue}&quot;&gt;&lt;/p&gt;\n&lt;p&gt;&lt;input name=&quot;foo&quot; value=&quot;${fn:escapeXml(param.foo)}&quot;&gt;&lt;/p&gt;\n</code></pre>\n<p>This will escape characters which may malform the rendered HTML such as <code>&lt;</code>, <code>&gt;</code>, <code>&quot;</code>, <code>'</code> and <code>&amp;</code> into <a href=\"https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references\" rel=\"nofollow noreferrer\">HTML/XML entities</a> such as <code>&amp;lt;</code>, <code>&amp;gt;</code>, <code>&amp;quot;</code>, <code>&amp;apos;</code> and <code>&amp;amp;</code>.</p>\n<p>Note that you don't need to escape them in the Java (Servlet) code, since they are harmless over there. Some may opt to escape them during <em>request</em> processing (as you do in Servlet or Filter) instead of <em>response</em> processing (as you do in JSP), but this way you may risk that the data unnecessarily get double-escaped (e.g. <code>&amp;</code> becomes <code>&amp;amp;amp;</code> instead of <code>&amp;amp;</code> and ultimately the enduser would see <code>&amp;amp;</code> being presented), or that the DB-stored data becomes unportable (e.g. when exporting data to JSON, CSV, XLS, PDF, etc which doesn't require HTML-escaping at all). You'll also lose social control because you don't know anymore what the user has actually filled in. You'd as being a site admin really like to know which users/IPs are trying to perform XSS, so that you can easily track them and take actions accordingly. Escaping during request processing should only and only be used as latest resort when you really need to fix a train wreck of a badly developed legacy web application in the shortest time as possible. Still, you should ultimately rewrite your JSP files to become XSS-safe.</p>\n<p>If you'd like to redisplay user-controlled input as HTML wherein you would like to allow only a specific subset of HTML tags like <code>&lt;b&gt;</code>, <code>&lt;i&gt;</code>, <code>&lt;u&gt;</code>, etc, then you need to sanitize the input by a whitelist. You can use a HTML parser like <a href=\"https://jsoup.org/\" rel=\"nofollow noreferrer\">Jsoup</a> for this. But, much better is to introduce a human friendly markup language such as Markdown (also used here on Stack Overflow). Then you can use a Markdown parser like <a href=\"https://github.com/atlassian/commonmark-java\" rel=\"nofollow noreferrer\">CommonMark</a> for this. It has also builtin HTML sanitizing capabilities. See also <a href=\"https://stackoverflow.com/questions/3354669/markdown-or-html\">Markdown or HTML</a>.</p>\n<p>Please note that the term &quot;sanitizing&quot; such as Jsoup/Markdown/Owasp does concerns a very different thing than the term &quot;escaping&quot; such as <code>&lt;c:out&gt;</code> does. HTML sanitizers basically clean up a string containing possibly malicious HTML so that it can be used as safe HTML <em>without</em> the need to escape. I.e. when you actually intend to interpret user-controlled input literally as HTML, including tags like <code>&lt;div&gt;</code>, <code>&lt;p&gt;</code>, <code>&lt;img&gt;</code>, etc. HTML escapers basically prevent them to be interpreted at all, so that they show as plain text. In other words, you don't at all need to beforehand sanitize any HTML which you already are going to escape nonetheless.</p>\n<p>The only concern in the server side with regard to databases is <a href=\"https://en.wikipedia.org/wiki/SQL_injection\" rel=\"nofollow noreferrer\">SQL injection</a> prevention. You need to make sure that you never string-concatenate user-controlled input straight in the SQL or JPQL query and that you're using parameterized queries all the way. In JDBC terms, this means that you should use <a href=\"https://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html\" rel=\"nofollow noreferrer\"><code>PreparedStatement</code></a> instead of <code>Statement</code>. In JPA terms, use <a href=\"https://jakarta.ee/specifications/platform/8/apidocs/javax/persistence/Query.html#setParameter-int-java.lang.Object-\" rel=\"nofollow noreferrer\"><code>Query</code></a>.</p>\n<hr />\n<p>An alternative would be to migrate from JSP/Servlet to Java EE's MVC framework <a href=\"https://stackoverflow.com/tags/jsf/info\">JSF</a>. It has built-in XSS (and CSRF!) prevention all over place so that you don't need to manually fiddle with <code>&lt;c:out&gt;</code> and friends. See also <a href=\"https://stackoverflow.com/questions/7722159/csrf-xss-and-sql-injection-attack-prevention-in-jsf\">CSRF, XSS and SQL Injection attack prevention in JSF</a>.</p>\n"},{"tags":[],"owner":{"account_id":5226,"reputation":21596,"user_id":8313,"display_name":"Sean Reilly"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1271520226,"creation_date":1271520226,"answer_id":2659021,"question_id":2658922,"body_markdown":"I would suggest regularly testing for vulnerabilities using an automated tool, and fixing whatever it finds. It&#39;s a lot easier to suggest a library to help with a specific vulnerability then for all XSS attacks in general.\r\n\r\n[Skipfish][1] is an open source tool from Google that I&#39;ve been investigating: it finds quite a lot of stuff, and seems worth using.\r\n\r\n\r\n  [1]: http://code.google.com/p/skipfish/","title":"XSS prevention in JSP/Servlet web application","body":"<p>I would suggest regularly testing for vulnerabilities using an automated tool, and fixing whatever it finds. It's a lot easier to suggest a library to help with a specific vulnerability then for all XSS attacks in general.</p>\n\n<p><a href=\"http://code.google.com/p/skipfish/\" rel=\"nofollow noreferrer\">Skipfish</a> is an open source tool from Google that I've been investigating: it finds quite a lot of stuff, and seems worth using.</p>\n"},{"tags":[],"owner":{"account_id":3282,"reputation":146286,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1271683266,"creation_date":1271683266,"answer_id":2667672,"question_id":2658922,"body_markdown":"My personal opinion is that you should avoid using JSP/ASP/PHP/etc pages. Instead output to an API similar to SAX (only designed for calling rather than handling). That way there is a single layer that has to create well formed output.","title":"XSS prevention in JSP/Servlet web application","body":"<p>My personal opinion is that you should avoid using JSP/ASP/PHP/etc pages. Instead output to an API similar to SAX (only designed for calling rather than handling). That way there is a single layer that has to create well formed output.</p>\n"},{"tags":[],"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1296447638,"creation_date":1296447638,"answer_id":4847599,"question_id":2658922,"body_markdown":"I had great luck with OWASP Anti-Samy and an AspectJ advisor on all my Spring Controllers that blocks XSS from getting in.\r\n\r\n    public class UserInputSanitizer {\r\n    \t\r\n    \tprivate static Policy policy;\r\n    \tprivate static AntiSamy antiSamy;\r\n    \t\r\n    \tprivate static AntiSamy getAntiSamy() throws PolicyException  {\r\n    \t\tif (antiSamy == null) {\r\n    \t\t\tpolicy = getPolicy(&quot;evocatus-default&quot;);\r\n    \t\t\tantiSamy = new AntiSamy();\r\n    \t\t}\r\n    \t\treturn antiSamy;\r\n    \r\n    \t}\r\n    \t\r\n    \tpublic static String sanitize(String input) {\r\n    \t\tCleanResults cr;\r\n    \t\ttry {\r\n    \t\t\tcr = getAntiSamy().scan(input, policy);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tthrow new RuntimeException(e);\r\n    \t\t}\r\n    \t\treturn cr.getCleanHTML();\r\n    \t}\r\n    \r\n    \tprivate static Policy getPolicy(String name) throws PolicyException {\r\n    \t\tPolicy policy = \r\n    \t\t\tPolicy.getInstance(Policy.class.getResourceAsStream(&quot;/META-INF/antisamy/&quot; + name + &quot;.xml&quot;));\r\n    \t\treturn policy;\r\n    \t}\r\n    \r\n    }\r\n\r\nYou can get the AspectJ advisor from the [this stackoverflow post][1]\r\n\r\nI think this is a better approach then c:out particular if you do a lot of javascript.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4843886/what-is-the-aspectj-declaritive-syntax-for-overwritting-an-argument","title":"XSS prevention in JSP/Servlet web application","body":"<p>I had great luck with OWASP Anti-Samy and an AspectJ advisor on all my Spring Controllers that blocks XSS from getting in.</p>\n\n<pre><code>public class UserInputSanitizer {\n\n    private static Policy policy;\n    private static AntiSamy antiSamy;\n\n    private static AntiSamy getAntiSamy() throws PolicyException  {\n        if (antiSamy == null) {\n            policy = getPolicy(\"evocatus-default\");\n            antiSamy = new AntiSamy();\n        }\n        return antiSamy;\n\n    }\n\n    public static String sanitize(String input) {\n        CleanResults cr;\n        try {\n            cr = getAntiSamy().scan(input, policy);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n        return cr.getCleanHTML();\n    }\n\n    private static Policy getPolicy(String name) throws PolicyException {\n        Policy policy = \n            Policy.getInstance(Policy.class.getResourceAsStream(\"/META-INF/antisamy/\" + name + \".xml\"));\n        return policy;\n    }\n\n}\n</code></pre>\n\n<p>You can get the AspectJ advisor from the <a href=\"https://stackoverflow.com/questions/4843886/what-is-the-aspectj-declaritive-syntax-for-overwritting-an-argument\">this stackoverflow post</a></p>\n\n<p>I think this is a better approach then c:out particular if you do a lot of javascript.</p>\n"},{"tags":[],"owner":{"account_id":391164,"reputation":169,"user_id":751672,"display_name":"brett.carr"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1305254326,"creation_date":1305254326,"answer_id":5986715,"question_id":2658922,"body_markdown":"There is no easy, out of the box solution against XSS. The OWASP ESAPI API has some support for the escaping that is very usefull, and they have tag libraries.\r\n\r\nMy approach was to basically to extend the stuts 2 tags in following ways.\r\n\r\n1. Modify s:property tag so it can take extra attributes stating what sort of escaping is required (escapeHtmlAttribute=&quot;true&quot; etc.). This involves creating a new Property and PropertyTag classes. The Property class uses OWASP ESAPI api for the escaping.\r\n2. Change freemarker templates to use the new version of s:property and set the escaping.\r\n\r\nIf you didn&#39;t want to modify the classes in step 1, another approach would be to import the ESAPI tags into the freemarker templates and escape as needed. Then if you need to use a s:property tag in your JSP, wrap it with and ESAPI tag.\r\n\r\nI have written a more detailed explanation here.\r\n\r\n&lt;http://www.nutshellsoftware.org/software/securing-struts-2-using-esapi-part-1-securing-outputs/&gt;\r\n\r\nI agree escaping inputs is not ideal. ","title":"XSS prevention in JSP/Servlet web application","body":"<p>There is no easy, out of the box solution against XSS. The OWASP ESAPI API has some support for the escaping that is very usefull, and they have tag libraries.</p>\n\n<p>My approach was to basically to extend the stuts 2 tags in following ways.</p>\n\n<ol>\n<li>Modify s:property tag so it can take extra attributes stating what sort of escaping is required (escapeHtmlAttribute=\"true\" etc.). This involves creating a new Property and PropertyTag classes. The Property class uses OWASP ESAPI api for the escaping.</li>\n<li>Change freemarker templates to use the new version of s:property and set the escaping.</li>\n</ol>\n\n<p>If you didn't want to modify the classes in step 1, another approach would be to import the ESAPI tags into the freemarker templates and escape as needed. Then if you need to use a s:property tag in your JSP, wrap it with and ESAPI tag.</p>\n\n<p>I have written a more detailed explanation here.</p>\n\n<p><a href=\"http://www.nutshellsoftware.org/software/securing-struts-2-using-esapi-part-1-securing-outputs/\" rel=\"nofollow\">http://www.nutshellsoftware.org/software/securing-struts-2-using-esapi-part-1-securing-outputs/</a></p>\n\n<p>I agree escaping inputs is not ideal. </p>\n"},{"tags":[],"owner":{"account_id":13259,"reputation":67754,"user_id":26510,"accept_rate":99,"display_name":"Brad Parks"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1342530814,"creation_date":1342032214,"answer_id":11439311,"question_id":2658922,"body_markdown":"If you want to automatically escape **all** JSP variables without having to explicitly wrap each variable, you can use an EL resolver [as detailed here with full source and an example (JSP 2.0 or newer)][1], and discussed in more detail [here][2]:\r\n\r\nFor example, by using the above mentioned EL resolver, your JSP code will remain like so, but each variable will be automatically escaped by the resolver\r\n\r\n    ...\r\n    &lt;c:forEach items=&quot;${orders}&quot; var=&quot;item&quot;&gt;\r\n      &lt;p&gt;${item.name}&lt;/p&gt;\r\n      &lt;p&gt;${item.price}&lt;/p&gt;\r\n      &lt;p&gt;${item.description}&lt;/p&gt;\r\n    &lt;/c:forEach&gt;\r\n    ...\r\n\r\n\r\n\r\n\r\nIf you want to force escaping by default in Spring, you could consider this as well, but it doesn&#39;t escape EL expressions, just tag output, I think:\r\n\r\nhttp://forum.springsource.org/showthread.php?61418-Spring-cross-site-scripting&amp;p=205646#post205646\r\n\r\nNote: Another approach to EL escaping that uses XSL transformations to preprocess JSP files can be found here:\r\n\r\nhttp://therning.org/niklas/2007/09/preprocessing-jsp-files-to-automatically-escape-el-expressions/\r\n\r\n\r\n  [1]: http://pukkaone.github.com/2011/01/03/jsp-cross-site-scripting-elresolver.html\r\n  [2]: http://raibledesigns.com/rd/entry/fixing_xss_in_jsp_2","title":"XSS prevention in JSP/Servlet web application","body":"<p>If you want to automatically escape <strong>all</strong> JSP variables without having to explicitly wrap each variable, you can use an EL resolver <a href=\"http://pukkaone.github.com/2011/01/03/jsp-cross-site-scripting-elresolver.html\" rel=\"nofollow\">as detailed here with full source and an example (JSP 2.0 or newer)</a>, and discussed in more detail <a href=\"http://raibledesigns.com/rd/entry/fixing_xss_in_jsp_2\" rel=\"nofollow\">here</a>:</p>\n\n<p>For example, by using the above mentioned EL resolver, your JSP code will remain like so, but each variable will be automatically escaped by the resolver</p>\n\n<pre><code>...\n&lt;c:forEach items=\"${orders}\" var=\"item\"&gt;\n  &lt;p&gt;${item.name}&lt;/p&gt;\n  &lt;p&gt;${item.price}&lt;/p&gt;\n  &lt;p&gt;${item.description}&lt;/p&gt;\n&lt;/c:forEach&gt;\n...\n</code></pre>\n\n<p>If you want to force escaping by default in Spring, you could consider this as well, but it doesn't escape EL expressions, just tag output, I think:</p>\n\n<p><a href=\"http://forum.springsource.org/showthread.php?61418-Spring-cross-site-scripting&amp;p=205646#post205646\" rel=\"nofollow\">http://forum.springsource.org/showthread.php?61418-Spring-cross-site-scripting&amp;p=205646#post205646</a></p>\n\n<p>Note: Another approach to EL escaping that uses XSL transformations to preprocess JSP files can be found here:</p>\n\n<p><a href=\"http://therning.org/niklas/2007/09/preprocessing-jsp-files-to-automatically-escape-el-expressions/\" rel=\"nofollow\">http://therning.org/niklas/2007/09/preprocessing-jsp-files-to-automatically-escape-el-expressions/</a></p>\n"},{"tags":[],"owner":{"account_id":1981490,"reputation":1172,"user_id":1777979,"accept_rate":60,"display_name":"MasterV"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1351556309,"creation_date":1351555823,"answer_id":13131469,"question_id":2658922,"body_markdown":"Managing XSS requires multiple validations, data from the client side. \r\n\r\n 1. **Input Validations** (form validation) on the Server side. There are multiple ways of going about it. You can try JSR 303 bean validation([hibernate validator][1]), or [ESAPI Input Validation framework][2]. Though I&#39;ve not tried it myself (yet), there is an annotation that checks for safe html **(@SafeHtml)**. You could in fact use Hibernate validator with Spring MVC for bean validations -&gt; [Ref][3]\r\n 2. **Escaping URL requests** - For all your HTTP requests, use some sort of XSS filter. I&#39;ve used the following for our web app and it takes care of cleaning up the HTTP URL request - http://www.servletsuite.com/servlets/xssflt.htm\r\n 3. **Escaping data/html** returned to the client (look above at @BalusC explanation).\r\n\r\n\r\n  [1]: http://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html_single/\r\n  [2]: http://owasp-esapi-java.googlecode.com/svn/trunk_doc/latest/org/owasp/esapi/reference/DefaultValidator.html\r\n  [3]: http://blog.springsource.org/2012/08/29/integrating-spring-mvc-with-jquery-for-validation-rules/","title":"XSS prevention in JSP/Servlet web application","body":"<p>Managing XSS requires multiple validations, data from the client side. </p>\n\n<ol>\n<li><strong>Input Validations</strong> (form validation) on the Server side. There are multiple ways of going about it. You can try JSR 303 bean validation(<a href=\"http://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html_single/\" rel=\"noreferrer\">hibernate validator</a>), or <a href=\"http://owasp-esapi-java.googlecode.com/svn/trunk_doc/latest/org/owasp/esapi/reference/DefaultValidator.html\" rel=\"noreferrer\">ESAPI Input Validation framework</a>. Though I've not tried it myself (yet), there is an annotation that checks for safe html <strong>(@SafeHtml)</strong>. You could in fact use Hibernate validator with Spring MVC for bean validations -> <a href=\"http://blog.springsource.org/2012/08/29/integrating-spring-mvc-with-jquery-for-validation-rules/\" rel=\"noreferrer\">Ref</a></li>\n<li><strong>Escaping URL requests</strong> - For all your HTTP requests, use some sort of XSS filter. I've used the following for our web app and it takes care of cleaning up the HTTP URL request - <a href=\"http://www.servletsuite.com/servlets/xssflt.htm\" rel=\"noreferrer\">http://www.servletsuite.com/servlets/xssflt.htm</a></li>\n<li><strong>Escaping data/html</strong> returned to the client (look above at @BalusC explanation).</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3130088,"reputation":43207,"user_id":2648077,"accept_rate":80,"display_name":"Alireza Fattahi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574486282,"creation_date":1574486282,"answer_id":59004752,"question_id":2658922,"body_markdown":"If you want to make sure that your `$` operator does not suffer from XSS hack you can implement `ServletContextListener` and do some checks there. \r\n\r\nThe complete solution at: http://pukkaone.github.io/2011/01/03/jsp-cross-site-scripting-elresolver.html\r\n\r\n    @WebListener\r\n    public class EscapeXmlELResolverListener implements ServletContextListener {\r\n        private static final Logger LOG = LoggerFactory.getLogger(EscapeXmlELResolverListener.class);\r\n    \r\n    \r\n        @Override\r\n        public void contextInitialized(ServletContextEvent event) {\r\n            LOG.info(&quot;EscapeXmlELResolverListener initialized ...&quot;);        \r\n            JspFactory.getDefaultFactory()\r\n                    .getJspApplicationContext(event.getServletContext())\r\n                    .addELResolver(new EscapeXmlELResolver());\r\n            \r\n        }\r\n    \r\n        @Override\r\n        public void contextDestroyed(ServletContextEvent event) {\r\n            LOG.info(&quot;EscapeXmlELResolverListener destroyed&quot;);\r\n        }\r\n        \r\n        \r\n        /**\r\n         * {@link ELResolver} which escapes XML in String values.\r\n         */\r\n        public class EscapeXmlELResolver extends ELResolver {\r\n    \r\n            private ThreadLocal&lt;Boolean&gt; excludeMe = new ThreadLocal&lt;Boolean&gt;() {\r\n                @Override\r\n                protected Boolean initialValue() {\r\n                    return Boolean.FALSE;\r\n                }\r\n            };\r\n            \r\n            @Override\r\n            public Object getValue(ELContext context, Object base, Object property) {\r\n    \r\n                try {\r\n                        if (excludeMe.get()) {\r\n                            return null;\r\n                        }\r\n    \r\n                        // This resolver is in the original resolver chain. To prevent\r\n                        // infinite recursion, set a flag to prevent this resolver from\r\n                        // invoking the original resolver chain again when its turn in the\r\n                        // chain comes around.\r\n                        excludeMe.set(Boolean.TRUE);\r\n                        Object value = context.getELResolver().getValue(\r\n                                context, base, property);\r\n                            \r\n                        if (value instanceof String) {\r\n                            value = StringEscapeUtils.escapeHtml4((String) value);\r\n                        }\r\n                        return value;\r\n                } finally {\r\n                    excludeMe.remove();\r\n                }\r\n            }\r\n    \r\n            @Override\r\n            public Class&lt;?&gt; getCommonPropertyType(ELContext context, Object base) {\r\n                return null;\r\n            }\r\n    \r\n            @Override\r\n            public Iterator&lt;FeatureDescriptor&gt; getFeatureDescriptors(ELContext context, Object base){\r\n                return null;\r\n            }\r\n    \r\n            @Override\r\n            public Class&lt;?&gt; getType(ELContext context, Object base, Object property) {\r\n                return null;\r\n            }\r\n    \r\n            @Override\r\n            public boolean isReadOnly(ELContext context, Object base, Object property) {\r\n                return true;\r\n            }\r\n    \r\n            @Override\r\n            public void setValue(ELContext context, Object base, Object property, Object value){\r\n                throw new UnsupportedOperationException();\r\n            }\r\n    \r\n        }\r\n        \r\n    }\r\n\r\n\r\nAgain: This only guards the `$`. Please also see other answers.","title":"XSS prevention in JSP/Servlet web application","body":"<p>If you want to make sure that your <code>$</code> operator does not suffer from XSS hack you can implement <code>ServletContextListener</code> and do some checks there. </p>\n\n<p>The complete solution at: <a href=\"http://pukkaone.github.io/2011/01/03/jsp-cross-site-scripting-elresolver.html\" rel=\"nofollow noreferrer\">http://pukkaone.github.io/2011/01/03/jsp-cross-site-scripting-elresolver.html</a></p>\n\n<pre><code>@WebListener\npublic class EscapeXmlELResolverListener implements ServletContextListener {\n    private static final Logger LOG = LoggerFactory.getLogger(EscapeXmlELResolverListener.class);\n\n\n    @Override\n    public void contextInitialized(ServletContextEvent event) {\n        LOG.info(\"EscapeXmlELResolverListener initialized ...\");        \n        JspFactory.getDefaultFactory()\n                .getJspApplicationContext(event.getServletContext())\n                .addELResolver(new EscapeXmlELResolver());\n\n    }\n\n    @Override\n    public void contextDestroyed(ServletContextEvent event) {\n        LOG.info(\"EscapeXmlELResolverListener destroyed\");\n    }\n\n\n    /**\n     * {@link ELResolver} which escapes XML in String values.\n     */\n    public class EscapeXmlELResolver extends ELResolver {\n\n        private ThreadLocal&lt;Boolean&gt; excludeMe = new ThreadLocal&lt;Boolean&gt;() {\n            @Override\n            protected Boolean initialValue() {\n                return Boolean.FALSE;\n            }\n        };\n\n        @Override\n        public Object getValue(ELContext context, Object base, Object property) {\n\n            try {\n                    if (excludeMe.get()) {\n                        return null;\n                    }\n\n                    // This resolver is in the original resolver chain. To prevent\n                    // infinite recursion, set a flag to prevent this resolver from\n                    // invoking the original resolver chain again when its turn in the\n                    // chain comes around.\n                    excludeMe.set(Boolean.TRUE);\n                    Object value = context.getELResolver().getValue(\n                            context, base, property);\n\n                    if (value instanceof String) {\n                        value = StringEscapeUtils.escapeHtml4((String) value);\n                    }\n                    return value;\n            } finally {\n                excludeMe.remove();\n            }\n        }\n\n        @Override\n        public Class&lt;?&gt; getCommonPropertyType(ELContext context, Object base) {\n            return null;\n        }\n\n        @Override\n        public Iterator&lt;FeatureDescriptor&gt; getFeatureDescriptors(ELContext context, Object base){\n            return null;\n        }\n\n        @Override\n        public Class&lt;?&gt; getType(ELContext context, Object base, Object property) {\n            return null;\n        }\n\n        @Override\n        public boolean isReadOnly(ELContext context, Object base, Object property) {\n            return true;\n        }\n\n        @Override\n        public void setValue(ELContext context, Object base, Object property, Object value){\n            throw new UnsupportedOperationException();\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>Again: This only guards the <code>$</code>. Please also see other answers.</p>\n"},{"tags":[],"owner":{"account_id":8964761,"reputation":2289,"user_id":6685903,"display_name":"Ritu Gupta"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1665482635,"creation_date":1665482635,"answer_id":74026334,"question_id":2658922,"body_markdown":"    &lt;%@ page import=&quot;org.apache.commons.lang.StringEscapeUtils&quot; %&gt;\r\n    String str=request.getParameter(&quot;urlParam&quot;);\r\n    String safeOuput = StringEscapeUtils.escapeXml(str);","title":"XSS prevention in JSP/Servlet web application","body":"<pre><code>&lt;%@ page import=&quot;org.apache.commons.lang.StringEscapeUtils&quot; %&gt;\nString str=request.getParameter(&quot;urlParam&quot;);\nString safeOuput = StringEscapeUtils.escapeXml(str);\n</code></pre>\n"}],"owner":{"account_id":53454,"reputation":24386,"user_id":159793,"accept_rate":91,"display_name":"newbie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":165992,"favorite_count":0,"down_vote_count":0,"up_vote_count":83,"accepted_answer_id":2658941,"answer_count":10,"score":83,"last_activity_date":1698152926,"creation_date":1271518527,"question_id":2658922,"body_markdown":"How can I prevent XSS attacks in a JSP/Servlet web application?","title":"XSS prevention in JSP/Servlet web application","body":"<p>How can I prevent XSS attacks in a JSP/Servlet web application?</p>\n"},{"tags":["java","sql","postgresql","spring-boot","sql-injection"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1626157236,"post_id":68357243,"comment_id":120810515,"body_markdown":"Not sure, but it could be worth passing the literal string, perhaps Sonarqube is worried that you&#39;re building `qstr` dynamically.","body":"Not sure, but it could be worth passing the literal string, perhaps Sonarqube is worried that you&#39;re building <code>qstr</code> dynamically."}],"answers":[{"tags":[],"owner":{"account_id":17503521,"reputation":1,"user_id":12693247,"display_name":"J.wxh"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1626157584,"creation_date":1626157584,"answer_id":68357464,"question_id":68357243,"body_markdown":"when assign your type is &quot;1 and 1 = 1&quot; cause sql injection","title":"sql injection in createNativequery","body":"<p>when assign your type is &quot;1 and 1 = 1&quot; cause sql injection</p>\n"}],"owner":{"account_id":22146992,"reputation":33,"user_id":16396072,"display_name":"ki2"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":845,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1698152756,"creation_date":1626156343,"question_id":68357243,"body_markdown":"    String qstr = &quot;select * from users where user_type=?1 offset ?2 limit ?3&quot;\r\n    Query query = entityManager.createNativeQuery(qstr, User.class);\r\n    query.setParameter(1, type);\r\n    query.setParameter(2, offset);\r\n    query.setParameter(3, limit);\r\n\r\nHere type, offset and limit are user inputs.\r\n\r\nSonarcube is showing sql injection at createNativeQuery.\r\nCan anyone say what is the solution to prevent sql injection?","title":"sql injection in createNativequery","body":"<pre><code>String qstr = &quot;select * from users where user_type=?1 offset ?2 limit ?3&quot;\nQuery query = entityManager.createNativeQuery(qstr, User.class);\nquery.setParameter(1, type);\nquery.setParameter(2, offset);\nquery.setParameter(3, limit);\n</code></pre>\n<p>Here type, offset and limit are user inputs.</p>\n<p>Sonarcube is showing sql injection at createNativeQuery.\nCan anyone say what is the solution to prevent sql injection?</p>\n"},{"tags":["java"],"comments":[{"owner":{"display_name":"user1849298"},"score":0,"creation_date":1436575523,"post_id":31352273,"comment_id":50687267,"body_markdown":"I think java casts the second term in the * operation to match the first. Try `int x = (int) (d * a);` or `int x = (int) (a * (float) (d))`","body":"I think java casts the second term in the * operation to match the first. Try <code>int x = (int) (d * a);</code> or <code>int x = (int) (a * (float) (d))</code>"},{"owner":{"account_id":5968065,"reputation":14213,"user_id":4691279,"accept_rate":58,"display_name":"hagrawal7777"},"score":1,"creation_date":1436575912,"post_id":31352273,"comment_id":50687342,"body_markdown":"Are you serious? This is not possible. Did you even try running? It will give 50!!!","body":"Are you serious? This is not possible. Did you even try running? It will give 50!!!"},{"owner":{"account_id":5902823,"reputation":141,"user_id":4645700,"accept_rate":75,"display_name":"alwaysboots"},"score":0,"creation_date":1436576760,"post_id":31352273,"comment_id":50687474,"body_markdown":"I changed the code to get straight to the point of the problem. I have updated the code to reflect the problem more accurately.","body":"I changed the code to get straight to the point of the problem. I have updated the code to reflect the problem more accurately."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1436577187,"post_id":31352273,"comment_id":50687559,"body_markdown":"@ioanD No. The order is immaterial. It widens the result to the wider of the two types.","body":"@ioanD No. The order is immaterial. It widens the result to the wider of the two types."},{"owner":{"account_id":5902823,"reputation":141,"user_id":4645700,"accept_rate":75,"display_name":"alwaysboots"},"score":0,"creation_date":1436577376,"post_id":31352273,"comment_id":50687594,"body_markdown":"Sorry guys, there is no problem. Moderator, can you delete?","body":"Sorry guys, there is no problem. Moderator, can you delete?"},{"owner":{"account_id":12253040,"reputation":7939,"user_id":8942811,"accept_rate":80,"display_name":"Bek"},"score":1,"creation_date":1520412869,"post_id":31352273,"comment_id":85299895,"body_markdown":"Delete the question by yourself.","body":"Delete the question by yourself."}],"answers":[{"tags":[],"owner":{"account_id":5968065,"reputation":14213,"user_id":4691279,"accept_rate":58,"display_name":"hagrawal7777"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1436576717,"creation_date":1436576265,"answer_id":31352374,"question_id":31352273,"body_markdown":"[JLS &#167;4.2.4. Floating-Point Operations][1] tell rules governing floating point operation, so as per that if any of the operand is a floating point number than other operand will be widened to a floating point (if not already) and final result will be a floating point number.   \r\n\r\nSo, your `int` `100` will be widened to `100.0` before arithmetic operation, and your result of operation will be `50.0`.\r\n\r\nNow, since you are casting your result to in `int`, so [JSL &#167;5.1.3. Narrowing Primitive Conversion][2] will be applicable, and double `50.0` will be narrowed to int `50`. \r\n\r\n100 is an impossible result, given the code you have provided.\r\n\r\nMy guess is that when you got 100, you would have done something else.\r\n\r\n![enter image description here][3]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.2.4\r\n  [2]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-5.html#jls-5.1.3\r\n  [3]: http://i.stack.imgur.com/J4uSq.png","title":"Multiplying by an Integer by a Float/Double in Java","body":"<p><a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.2.4\" rel=\"noreferrer\">JLS 4.2.4. Floating-Point Operations</a> tell rules governing floating point operation, so as per that if any of the operand is a floating point number than other operand will be widened to a floating point (if not already) and final result will be a floating point number.   </p>\n\n<p>So, your <code>int</code> <code>100</code> will be widened to <code>100.0</code> before arithmetic operation, and your result of operation will be <code>50.0</code>.</p>\n\n<p>Now, since you are casting your result to in <code>int</code>, so <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-5.html#jls-5.1.3\" rel=\"noreferrer\">JSL 5.1.3. Narrowing Primitive Conversion</a> will be applicable, and double <code>50.0</code> will be narrowed to int <code>50</code>. </p>\n\n<p>100 is an impossible result, given the code you have provided.</p>\n\n<p>My guess is that when you got 100, you would have done something else.</p>\n\n<p><img src=\"https://i.stack.imgur.com/J4uSq.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":17922058,"reputation":268,"user_id":13021605,"display_name":"xpz"},"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1585443193,"creation_date":1585443193,"answer_id":60908926,"question_id":31352273,"body_markdown":"````\r\nint x =  (int) 0.5 * 100; \r\n````\r\nit first casts 0.5 to an int ---&gt; 0 then multiplies.","title":"Multiplying by an Integer by a Float/Double in Java","body":"<pre><code>int x =  (int) 0.5 * 100; \n</code></pre>\n\n<p>it first casts 0.5 to an int ---> 0 then multiplies.</p>\n"},{"tags":[],"owner":{"account_id":281803,"reputation":13299,"user_id":578318,"accept_rate":59,"display_name":"sparkyspider"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658850409,"creation_date":1658850409,"answer_id":73126340,"question_id":31352273,"body_markdown":"You need to convert the operands to the same types first.\r\n\r\n```java\r\nfloat f = 0.5 * 100f;\r\n``` \r\nor \r\n```java\r\nfloat f = 0.5 * (float)100;\r\n```\r\n\r\nYou can&#39;t really &quot;convert&quot; a float to an integer without potentially losing some precision, so you&#39;ll meed to decide how you want to deal with the loss of precision. The java Math object can help:\r\n\r\n```java\r\nint rounded = Math.round(0.5 * 100f);\r\n```","title":"Multiplying by an Integer by a Float/Double in Java","body":"<p>You need to convert the operands to the same types first.</p>\n<pre class=\"lang-java prettyprint-override\"><code>float f = 0.5 * 100f;\n</code></pre>\n<p>or</p>\n<pre class=\"lang-java prettyprint-override\"><code>float f = 0.5 * (float)100;\n</code></pre>\n<p>You can't really &quot;convert&quot; a float to an integer without potentially losing some precision, so you'll meed to decide how you want to deal with the loss of precision. The java Math object can help:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int rounded = Math.round(0.5 * 100f);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4010076,"reputation":88,"user_id":3303738,"display_name":"danyluis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698152490,"creation_date":1698152490,"answer_id":77352285,"question_id":31352273,"body_markdown":"The problem is that you&#39;re casting `0.5f` to `int` before doing the mutiplication. So, you&#39;re effectively doing:\r\n\r\n```java\r\nint x = ((int) 0.5) * 100;\r\n\r\nint x = 0 * 100; // &lt;-- which is basically the same as this\r\n```\r\n\r\nThis happens because the cast operator `(int)` has a [higher precedence](https://introcs.cs.princeton.edu/java/11precedence/) than the multiplication `*` operator.\r\n\r\nIf you want the integer result of the float operation, then you&#39;d have to do:\r\n\r\n```java\r\nint x = (int)(0.5 * 100);\r\n```\r\n\r\nThis would automatically cast `100` to a float (`100f`), then multiply both floats `0.5 * 100.0 = 50.0`, and then finally cast the result to `int`.\r\n\r\nThen, you&#39;d have: `x = 50`","title":"Multiplying by an Integer by a Float/Double in Java","body":"<p>The problem is that you're casting <code>0.5f</code> to <code>int</code> before doing the mutiplication. So, you're effectively doing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int x = ((int) 0.5) * 100;\n\nint x = 0 * 100; // &lt;-- which is basically the same as this\n</code></pre>\n<p>This happens because the cast operator <code>(int)</code> has a <a href=\"https://introcs.cs.princeton.edu/java/11precedence/\" rel=\"nofollow noreferrer\">higher precedence</a> than the multiplication <code>*</code> operator.</p>\n<p>If you want the integer result of the float operation, then you'd have to do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int x = (int)(0.5 * 100);\n</code></pre>\n<p>This would automatically cast <code>100</code> to a float (<code>100f</code>), then multiply both floats <code>0.5 * 100.0 = 50.0</code>, and then finally cast the result to <code>int</code>.</p>\n<p>Then, you'd have: <code>x = 50</code></p>\n"}],"owner":{"account_id":5902823,"reputation":141,"user_id":4645700,"accept_rate":75,"display_name":"alwaysboots"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77999,"favorite_count":0,"down_vote_count":7,"up_vote_count":6,"answer_count":4,"score":-1,"last_activity_date":1698152490,"creation_date":1436575200,"question_id":31352273,"body_markdown":"I&#39;m trying to do something so simple: multiply an integer by a float/double:\r\n\r\n    public class A {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tint x =  (int) 0.5 * 100;\t\t\r\n    \t\tSystem.out.println(x);\r\n    \t}\r\n    }\r\n\r\nHowever, although you&#39;d expect this to return `x = 50`, instead `x = 0`! The same thing happens when I use `float d = 0.5f`. Does anyone know what is going on and why this isn&#39;t working?\r\n","title":"Multiplying by an Integer by a Float/Double in Java","body":"<p>I'm trying to do something so simple: multiply an integer by a float/double:</p>\n\n<pre><code>public class A {\n    public static void main(String[] args) {\n        int x =  (int) 0.5 * 100;       \n        System.out.println(x);\n    }\n}\n</code></pre>\n\n<p>However, although you'd expect this to return <code>x = 50</code>, instead <code>x = 0</code>! The same thing happens when I use <code>float d = 0.5f</code>. Does anyone know what is going on and why this isn't working?</p>\n"},{"tags":["java","spring","configuration","spring-annotations"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1553078138,"post_id":55258649,"comment_id":97248702,"body_markdown":"Why.  `@Import` is only relevant in the context/scope of a Spring `ApplicationContext` you are just running a `main` method.","body":"Why.  <code>@Import</code> is only relevant in the context/scope of a Spring <code>ApplicationContext</code> you are just running a <code>main</code> method."},{"owner":{"account_id":243931,"reputation":588,"user_id":516418,"display_name":"stuchl4n3k"},"score":2,"creation_date":1553078468,"post_id":55258649,"comment_id":97248932,"body_markdown":"Your `main` method has nothing to do with Spring container. Therefore you cannot expect it to bootstrap Spring Context and Configuration classes.","body":"Your <code>main</code> method has nothing to do with Spring container. Therefore you cannot expect it to bootstrap Spring Context and Configuration classes."}],"answers":[{"tags":[],"owner":{"account_id":5244590,"reputation":56,"user_id":4190731,"display_name":"Shadowheim"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1553085333,"creation_date":1553085333,"answer_id":55260924,"question_id":55258649,"body_markdown":"Your best bet is to make the config class return config object that contains your values. Generally I don&#39;t tend to add an all-encompassing config object, but have a config file for each component (database, controllers, etc...).\r\n\r\nYou can then return the configured object as a bean and let spring inject it. If I were to make a config file for a RestTemplate (as a simple example):\r\n\r\n    @Service\r\n    public class RestClientConfig {\r\n\r\n        @Value(&quot;${your.config.value}&quot;)\r\n        private String yourValue;\r\n\r\n\r\n        private final RestTemplate restTemplate = new RestTemplate();\r\n\r\n        @Bean\r\n        public RestTemplate restTemplate() {\r\n          // Configure it, using your imported values\r\n          // ...\r\n\r\n          return restTemplate;\r\n       }\r\n    }\r\n\r\nHowever, the `main` method is outside of the spring container and you won&#39;t be able to bootstrap it that way, but with the above method you can call the configured component directly where you need to use it.","title":"Spring Annotations Import Config not called","body":"<p>Your best bet is to make the config class return config object that contains your values. Generally I don't tend to add an all-encompassing config object, but have a config file for each component (database, controllers, etc...).</p>\n\n<p>You can then return the configured object as a bean and let spring inject it. If I were to make a config file for a RestTemplate (as a simple example):</p>\n\n<pre><code>@Service\npublic class RestClientConfig {\n\n    @Value(\"${your.config.value}\")\n    private String yourValue;\n\n\n    private final RestTemplate restTemplate = new RestTemplate();\n\n    @Bean\n    public RestTemplate restTemplate() {\n      // Configure it, using your imported values\n      // ...\n\n      return restTemplate;\n   }\n}\n</code></pre>\n\n<p>However, the <code>main</code> method is outside of the spring container and you won't be able to bootstrap it that way, but with the above method you can call the configured component directly where you need to use it.</p>\n"},{"tags":[],"owner":{"account_id":4353759,"reputation":543,"user_id":3666206,"accept_rate":40,"display_name":"BAMF4bacon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698152486,"creation_date":1698152486,"answer_id":77352283,"question_id":55258649,"body_markdown":"You are missing @Bean\r\n\r\n&gt; @Bean\r\n&gt; public ConfigSettings() {","title":"Spring Annotations Import Config not called","body":"<p>You are missing @Bean</p>\n<blockquote>\n<p>@Bean\npublic ConfigSettings() {</p>\n</blockquote>\n"}],"owner":{"account_id":11695142,"reputation":83,"user_id":8562037,"display_name":"Michael"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1006,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":55260924,"answer_count":2,"score":1,"last_activity_date":1698152486,"creation_date":1553077969,"question_id":55258649,"body_markdown":"I am trying to make an application that uses Spring annotations to import the configurations. For this question i narrowed it down to two files. The Startup class:\r\n\r\n    package core;\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.Import;\r\n\r\n    @Slf4j\r\n    @Configuration\r\n    @Import(ConfigSettings.class)\r\n    public class Startup {\r\n        public static void main (String args[]) {\r\n        log.info(&quot;main class&quot;);\r\n        }\r\n    }\r\nand the ConfigSettings\r\npackage core;\r\n    \r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.PropertySource;\r\n    \r\n    @Slf4j\r\n    @Configuration\r\n    @ComponentScan({&quot;connections&quot;, &quot;filter&quot;})\r\n    @PropertySource({&quot;classpath:config/${env.config:dev}.application.properties&quot;})\r\n    public class ConfigSettings {\r\n    \r\n        public ConfigSettings() {\r\n        log.info(&quot;Constructor ConfigSettings&quot;);\r\n        }\r\n    }\r\n\r\nI expected the outcome to be:\r\n\r\n    [INFO]Constructor ConfigSettings\r\n    [INFO]main class\r\n\r\nBut it only shows mainclass. It looks like the constructor of the config settings is not called at all. I expect it to call it because of the import annotation.\r\n\r\nCan anyone explain what is going wrong? Thank you in advance!","title":"Spring Annotations Import Config not called","body":"<p>I am trying to make an application that uses Spring annotations to import the configurations. For this question i narrowed it down to two files. The Startup class:</p>\n\n<pre><code>package core;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Import;\n\n@Slf4j\n@Configuration\n@Import(ConfigSettings.class)\npublic class Startup {\n    public static void main (String args[]) {\n    log.info(\"main class\");\n    }\n}\n</code></pre>\n\n<p>and the ConfigSettings\npackage core;</p>\n\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.PropertySource;\n\n@Slf4j\n@Configuration\n@ComponentScan({\"connections\", \"filter\"})\n@PropertySource({\"classpath:config/${env.config:dev}.application.properties\"})\npublic class ConfigSettings {\n\n    public ConfigSettings() {\n    log.info(\"Constructor ConfigSettings\");\n    }\n}\n</code></pre>\n\n<p>I expected the outcome to be:</p>\n\n<pre><code>[INFO]Constructor ConfigSettings\n[INFO]main class\n</code></pre>\n\n<p>But it only shows mainclass. It looks like the constructor of the config settings is not called at all. I expect it to call it because of the import annotation.</p>\n\n<p>Can anyone explain what is going wrong? Thank you in advance!</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","projection"],"owner":{"account_id":1455702,"reputation":15662,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698152460,"creation_date":1698152460,"question_id":77352281,"body_markdown":"[Interface-based Projections](https://docs.spring.io/spring-data/jpa/reference/repositories/projections.html#projections.interfaces) are a handy feature in Spring JPA, allowing a Repository to return different interfaces. For a simple example, this entity...\r\n\r\n    @Entity\r\n    @Table(name = &quot;entity&quot;)\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    public class MyEntity {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private int id;\r\n    \r\n        private String foo;\r\n        private String bar;\r\n    }\r\n\r\n...can omit a field and result from a native query.\r\n\r\n    public interface EntityDTO {\r\n        String getFoo();\r\n        String getBar();\r\n    }\r\n\r\n    @Repository\r\n    public interface EntityRepository extends CrudRepository&lt;MyEntity, Integer&gt; {\r\n        @Query(nativeQuery = true, value = &quot;select * from entity where id = :id&quot;)\r\n        EntityDTO findDtoById(int id);\r\n    }\r\n\r\nThe above works... unless I want the entity itself to implement the projection interface.\r\n\r\n    public class MyEntity implements EntityDTO\r\n\r\nThis relationship seems natural, since the entity does in fact implement the interface, and service methods shouldn&#39;t care whether they&#39;re reading from an entity or some other projection; but implementing the projection results in an exception from the query.\r\n\r\n    org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.Object[]] to type [EntityDTO]\r\n\r\nIs there a way to make JPA proxy the `EntityDTO` as an unrelated interface, even when it is implemented by `MyEntity`?","title":"Can a Spring JPA Entity implement a Projection interface?","body":"<p><a href=\"https://docs.spring.io/spring-data/jpa/reference/repositories/projections.html#projections.interfaces\" rel=\"nofollow noreferrer\">Interface-based Projections</a> are a handy feature in Spring JPA, allowing a Repository to return different interfaces. For a simple example, this entity...</p>\n<pre><code>@Entity\n@Table(name = &quot;entity&quot;)\n@Getter\n@Setter\n@ToString\npublic class MyEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n\n    private String foo;\n    private String bar;\n}\n</code></pre>\n<p>...can omit a field and result from a native query.</p>\n<pre><code>public interface EntityDTO {\n    String getFoo();\n    String getBar();\n}\n\n@Repository\npublic interface EntityRepository extends CrudRepository&lt;MyEntity, Integer&gt; {\n    @Query(nativeQuery = true, value = &quot;select * from entity where id = :id&quot;)\n    EntityDTO findDtoById(int id);\n}\n</code></pre>\n<p>The above works... unless I want the entity itself to implement the projection interface.</p>\n<pre><code>public class MyEntity implements EntityDTO\n</code></pre>\n<p>This relationship seems natural, since the entity does in fact implement the interface, and service methods shouldn't care whether they're reading from an entity or some other projection; but implementing the projection results in an exception from the query.</p>\n<pre><code>org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.Object[]] to type [EntityDTO]\n</code></pre>\n<p>Is there a way to make JPA proxy the <code>EntityDTO</code> as an unrelated interface, even when it is implemented by <code>MyEntity</code>?</p>\n"},{"tags":["javascript","java","http","xmlhttprequest","openai-api"],"owner":{"account_id":1187948,"reputation":1076,"user_id":1161518,"accept_rate":51,"display_name":"WasimSafdar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698152305,"creation_date":1698152305,"question_id":77352262,"body_markdown":"I am getting above mentioned error. I think error is due the fact that I am sending ImageData. Even in the documenation, it is written that you can send ImageData but that example is specifically for node.js and is using a openai library openai.createImageVariation(). Whereas I am using JavaScript and directly sending http request using endpoint. You can look of &quot;Using in-memory image data\r\n&quot; an example here. \r\n\r\n[https://platform.openai.com/docs/guides/images/language-specific-tips?context=node&amp;lang=node.js][1]\r\n\r\n\r\n  [1]: https://platform.openai.com/docs/guides/images/language-specific-tips?context=node&amp;lang=node.js\r\n\r\nI think the issue can be solved if I can convert ImageData into a .png file and then send it. However, I do not know how to do it. Somebody mentioned that you can convert image into b64 or blob, however that is for the &#39;img&#39; and I have ImageData as I am preprocessing the image. \r\n\r\nThis is my code. \r\n\r\n    //Function for sending http request\r\n    async function generateVariation(formData) {\r\n      try {\r\n        const response = await fetch(&quot;https://api.openai.com/v1/images/variations&quot;, {\r\n          method: &quot;POST&quot;,\r\n          body: formData,\r\n          headers: {&quot;Authorization&quot;: &quot;Bearer&quot; + &quot; &quot; + api_key}\r\n        });\r\n        const result = await response.json();\r\n        console.log(&quot;Success:&quot;, result);\r\n      } catch (error) {\r\n        console.error(&quot;Error:&quot;, error);\r\n      }\r\n    }\r\n      \r\n      // Calling it. Here I am using image data. I am sending the image but still it says \r\n      //that image is required\r\n    \r\n      const form_data = new FormData();\r\n      form_data.append(&quot;image&quot;,imageData);\r\n      form_data.append(&quot;n&quot;,1);\r\n      form_data.append(&quot;size&quot;,&#39;1024x1024&#39;);\r\n    \r\n      generateVariation(form_data);\r\n\r\nAny help? Thanks","title":"Getting an error &quot;Missing image file in request. (Perhaps ...)&quot; while generating image variations using openai and JavaScript","body":"<p>I am getting above mentioned error. I think error is due the fact that I am sending ImageData. Even in the documenation, it is written that you can send ImageData but that example is specifically for node.js and is using a openai library openai.createImageVariation(). Whereas I am using JavaScript and directly sending http request using endpoint. You can look of &quot;Using in-memory image data\n&quot; an example here.</p>\n<p><a href=\"https://platform.openai.com/docs/guides/images/language-specific-tips?context=node&amp;lang=node.js\" rel=\"nofollow noreferrer\">https://platform.openai.com/docs/guides/images/language-specific-tips?context=node&amp;lang=node.js</a></p>\n<p>I think the issue can be solved if I can convert ImageData into a .png file and then send it. However, I do not know how to do it. Somebody mentioned that you can convert image into b64 or blob, however that is for the 'img' and I have ImageData as I am preprocessing the image.</p>\n<p>This is my code.</p>\n<pre><code>//Function for sending http request\nasync function generateVariation(formData) {\n  try {\n    const response = await fetch(&quot;https://api.openai.com/v1/images/variations&quot;, {\n      method: &quot;POST&quot;,\n      body: formData,\n      headers: {&quot;Authorization&quot;: &quot;Bearer&quot; + &quot; &quot; + api_key}\n    });\n    const result = await response.json();\n    console.log(&quot;Success:&quot;, result);\n  } catch (error) {\n    console.error(&quot;Error:&quot;, error);\n  }\n}\n  \n  // Calling it. Here I am using image data. I am sending the image but still it says \n  //that image is required\n\n  const form_data = new FormData();\n  form_data.append(&quot;image&quot;,imageData);\n  form_data.append(&quot;n&quot;,1);\n  form_data.append(&quot;size&quot;,'1024x1024');\n\n  generateVariation(form_data);\n</code></pre>\n<p>Any help? Thanks</p>\n"},{"tags":["java","android","identifier"],"comments":[{"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"score":0,"creation_date":1410204917,"post_id":25731767,"comment_id":40230061,"body_markdown":"typo: remove the `=` before `action_settings`. Also that variable seems to be a duplicate...","body":"typo: remove the <code>=</code> before <code>action_settings</code>. Also that variable seems to be a duplicate..."},{"owner":{"account_id":4044774,"reputation":3998,"user_id":3326331,"accept_rate":73,"display_name":"Sagar Pilkhwal"},"score":0,"creation_date":1410205251,"post_id":25731767,"comment_id":40230268,"body_markdown":"remove `public static final int =action_settings=0x7f050018;` it should be `public static final int action_settings=0x7f050018;`","body":"remove <code>public static final int =action_settings=0x7f050018;</code> it should be <code>public static final int action_settings=0x7f050018;</code>"}],"answers":[{"tags":[],"owner":{"account_id":1304625,"reputation":66682,"user_id":1253844,"accept_rate":70,"display_name":"Bryan Herbst"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1410205002,"creation_date":1410205002,"answer_id":25731829,"question_id":25731767,"body_markdown":"It sounds like you have accidentally defined a menu item in your XML with an id of `=action_setting`.\r\n\r\nFor example: \r\n\r\n    &lt;menu&gt;\r\n        &lt;item \r\n            android:id=&quot;@+id/=action_settings&quot; /&gt;\r\n    &lt;/menu&gt;\r\n\r\nRemove the `=` from your menu XML and you should be good to go.","title":"Android: R.java: error &lt;identifier&gt; expected","body":"<p>It sounds like you have accidentally defined a menu item in your XML with an id of <code>=action_setting</code>.</p>\n\n<p>For example: </p>\n\n<pre><code>&lt;menu&gt;\n    &lt;item \n        android:id=\"@+id/=action_settings\" /&gt;\n&lt;/menu&gt;\n</code></pre>\n\n<p>Remove the <code>=</code> from your menu XML and you should be good to go.</p>\n"},{"tags":[],"owner":{"account_id":2432425,"reputation":2022,"user_id":2123055,"accept_rate":69,"display_name":"Shayan_Aryan"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1432469863,"creation_date":1432469863,"answer_id":30423405,"question_id":25731767,"body_markdown":"I had the same problem, because I defined a string without name in my resources. \r\nlike:\r\n\r\n    \r\n    &lt;string name=&quot;&quot;&gt;some text&lt;/string&gt;","title":"Android: R.java: error &lt;identifier&gt; expected","body":"<p>I had the same problem, because I defined a string without name in my resources. \nlike:</p>\n\n<pre><code>&lt;string name=\"\"&gt;some text&lt;/string&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7258406,"reputation":1,"user_id":5536141,"display_name":"CEOIndonesia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1446882461,"creation_date":1446882461,"answer_id":33580489,"question_id":25731767,"body_markdown":"I had similar problem. \r\nStep 1. Delete/edit files which caused error, in your case: &quot;public static final int =action_settings=0x7f050018;&quot;\r\n\r\nStep 2. Build-&gt;Clear. Since R.java cant be modified and automatically generated, dont edit anything in R.java. \r\nGood luck! :)","title":"Android: R.java: error &lt;identifier&gt; expected","body":"<p>I had similar problem. \nStep 1. Delete/edit files which caused error, in your case: \"public static final int =action_settings=0x7f050018;\"</p>\n\n<p>Step 2. Build->Clear. Since R.java cant be modified and automatically generated, dont edit anything in R.java. \nGood luck! :)</p>\n"},{"tags":[],"owner":{"account_id":1879936,"reputation":2131,"user_id":1700368,"accept_rate":60,"display_name":"Premkumar Manipillai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1454408400,"creation_date":1454408400,"answer_id":35150685,"question_id":25731767,"body_markdown":"check your resource file name should be following file naming rule.\r\nExample:\r\n\r\nInvalid file name: 50x60.png\r\nValid file name: my_pic.png","title":"Android: R.java: error &lt;identifier&gt; expected","body":"<p>check your resource file name should be following file naming rule.\nExample:</p>\n\n<p>Invalid file name: 50x60.png\nValid file name: my_pic.png</p>\n"},{"tags":[],"owner":{"account_id":6269338,"reputation":61,"user_id":4874012,"display_name":"dbr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1565077224,"creation_date":1565077224,"answer_id":57371147,"question_id":25731767,"body_markdown":"I encountered the same error message. In my case it seemed to be caused by the inclusion of &#39;.int&#39; in the package name.\r\n\r\nReplacing &#39;.int&#39; in the package name:\r\n\r\n    com.xxxx.int.yyyy\r\n\r\nWith &#39;.intg&#39; resolved the error for me:\r\n\r\n    com.xxxx.intg.yyyy","title":"Android: R.java: error &lt;identifier&gt; expected","body":"<p>I encountered the same error message. In my case it seemed to be caused by the inclusion of '.int' in the package name.</p>\n\n<p>Replacing '.int' in the package name:</p>\n\n<pre><code>com.xxxx.int.yyyy\n</code></pre>\n\n<p>With '.intg' resolved the error for me:</p>\n\n<pre><code>com.xxxx.intg.yyyy\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7604420,"reputation":427,"user_id":5767791,"accept_rate":43,"display_name":"Anti Atlas Dev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698152236,"creation_date":1698152236,"answer_id":77352252,"question_id":25731767,"body_markdown":"Android: `R.java: error &lt;identifier&gt; expected`\r\n\r\nCan be caused by a corrupted file or invalide name for example:adding numbers only to file name : 1.mp3 in source can be read as int ..\r\nThe solution:\r\n\r\n1.remove uploaded file.  \r\n\r\n2.delete build folder or clean/build . \r\n\r\n3.build . \r\n\r\n4.upload valid file with valid name .\r\n\r\nGood luck &#129310;","title":"Android: R.java: error &lt;identifier&gt; expected","body":"<p>Android: <code>R.java: error &lt;identifier&gt; expected</code></p>\n<p>Can be caused by a corrupted file or invalide name for example:adding numbers only to file name : 1.mp3 in source can be read as int ..\nThe solution:</p>\n<p>1.remove uploaded file.</p>\n<p>2.delete build folder or clean/build .</p>\n<p>3.build .</p>\n<p>4.upload valid file with valid name .</p>\n<p>Good luck </p>\n"}],"owner":{"account_id":3465654,"reputation":93,"user_id":2901278,"accept_rate":25,"display_name":"user2901278"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17284,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":25731829,"answer_count":6,"score":7,"last_activity_date":1698152236,"creation_date":1410204799,"question_id":25731767,"body_markdown":"I am a beginner to android development, and was following the training guide at developer.android.com (Better tutorials would be greatly appreciated as well). I was adding the action bar when I started getting this error.\r\n\r\n\r\n    Executing tasks: [:app:assembleDebug]\r\n\r\n    Configuration on demand is an incubating feature.\r\n    Relying on packaging to define the extension of the main artifact has been deprecated and is scheduled to be removed in Gradle 2.0\r\n    :app:preBuild\r\n    :app:compileDebugNdk UP-TO-DATE\r\n    :app:preDebugBuild\r\n    :app:checkDebugManifest\r\n    :app:preReleaseBuild\r\n    :app:prepareComAndroidSupportSupportV132000Library UP-TO-DATE\r\n    :app:prepareComAndroidSupportSupportV42000Library UP-TO-DATE\r\n    :app:prepareComGoogleAndroidGmsPlayServicesWearable5077Library UP-TO-DATE\r\n    :app:prepareComGoogleAndroidSupportWearable100Library UP-TO-DATE\r\n    :app:prepareDebugDependencies\r\n    :app:compileDebugAidl UP-TO-DATE\r\n    :app:compileDebugRenderscript UP-TO-DATE\r\n    :app:generateDebugBuildConfig UP-TO-DATE\r\n    :app:generateDebugAssets UP-TO-DATE\r\n    :app:mergeDebugAssets UP-TO-DATE\r\n    :app:generateDebugResValues UP-TO-DATE\r\n    :app:generateDebugResources UP-TO-DATE\r\n    :app:mergeDebugResources UP-TO-DATE\r\n    :app:processDebugManifest\r\n    :app:processDebugResources\r\n    :app:generateDebugSources\r\n    :app:compileDebugJava\r\n    C:\\Users\\Brian\\AndroidStudioProjects\\MyAndroidWear\\app\\build\\generated\\source\\r\\debug\\com\\example\\brian\\myandroidwear\\R.java:400: error: &lt;identifier&gt; expected\r\n        public static final int =action_settings=0x7f050018;\r\n                               ^\r\n    1 error\r\n\r\n     FAILED\r\n\r\n    FAILURE: Build failed with an exception.\r\n\r\n    * What went wrong:\r\n    Execution failed for task &#39;:app:compileDebugJava&#39;.\r\n    &gt; Compilation failed; see the compiler error output for details.\r\n\r\n    * Try:\r\n    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\r\n\r\n    BUILD FAILED\r\n\r\n    Total time: 12.271 secs\r\n\r\n\r\n\r\nIt also says\r\n\r\n\r\n\r\n    error:  &lt;identifier&gt; expected\r\n\r\nThe main problem I am having is that R.java is generated by android studio and I have never touched it so I am very confused.\r\n\r\nThe actual R.java code is here.\r\n\r\n\r\n     public static final class id {\r\n        public static final int =action_settings=0x7f050018;\r\n        public static final int action_error=0x7f05000b;\r\n        public static final int action_search=0x7f050017;\r\n        public static final int action_settings=0x7f050016;\r\n        public static final int action_success=0x7f05000d;\r\n        public static final int all=0x7f050004;\r\n        public static final int animation=0x7f05000e;\r\n        public static final int bottom=0x7f050003;\r\n        public static final int button_send=0x7f050014;\r\n        public static final int dismiss_overlay_button=0x7f050011;\r\n        public static final int dismiss_overlay_explain=0x7f050010;\r\n        public static final int edit_message=0x7f050013;\r\n        public static final int error_message=0x7f05000c;\r\n        public static final int hybrid=0x7f050009;\r\n        public static final int left=0x7f050000;\r\n        public static final int message=0x7f05000f;\r\n        public static final int none=0x7f050005;\r\n        public static final int normal=0x7f050006;\r\n        public static final int right=0x7f050002;\r\n        public static final int satellite=0x7f050007;\r\n        public static final int terrain=0x7f050008;\r\n        public static final int text=0x7f050012;\r\n        public static final int title=0x7f050015;\r\n        public static final int top=0x7f050001;\r\n        public static final int watch_view_stub=0x7f05000a;\r\n    }\r\n\r\n\r\nThe error is thrown on the first line of the function at the =action_settings part.\r\n\r\nAny help at all would be greatly appreciated. Also if there is anything else you need to see please let me know. I&#39;m still getting used to android and android studio so I am still not sure where everything is to help debug.\r\n","title":"Android: R.java: error &lt;identifier&gt; expected","body":"<p>I am a beginner to android development, and was following the training guide at developer.android.com (Better tutorials would be greatly appreciated as well). I was adding the action bar when I started getting this error.</p>\n\n<pre><code>Executing tasks: [:app:assembleDebug]\n\nConfiguration on demand is an incubating feature.\nRelying on packaging to define the extension of the main artifact has been deprecated and is scheduled to be removed in Gradle 2.0\n:app:preBuild\n:app:compileDebugNdk UP-TO-DATE\n:app:preDebugBuild\n:app:checkDebugManifest\n:app:preReleaseBuild\n:app:prepareComAndroidSupportSupportV132000Library UP-TO-DATE\n:app:prepareComAndroidSupportSupportV42000Library UP-TO-DATE\n:app:prepareComGoogleAndroidGmsPlayServicesWearable5077Library UP-TO-DATE\n:app:prepareComGoogleAndroidSupportWearable100Library UP-TO-DATE\n:app:prepareDebugDependencies\n:app:compileDebugAidl UP-TO-DATE\n:app:compileDebugRenderscript UP-TO-DATE\n:app:generateDebugBuildConfig UP-TO-DATE\n:app:generateDebugAssets UP-TO-DATE\n:app:mergeDebugAssets UP-TO-DATE\n:app:generateDebugResValues UP-TO-DATE\n:app:generateDebugResources UP-TO-DATE\n:app:mergeDebugResources UP-TO-DATE\n:app:processDebugManifest\n:app:processDebugResources\n:app:generateDebugSources\n:app:compileDebugJava\nC:\\Users\\Brian\\AndroidStudioProjects\\MyAndroidWear\\app\\build\\generated\\source\\r\\debug\\com\\example\\brian\\myandroidwear\\R.java:400: error: &lt;identifier&gt; expected\n    public static final int =action_settings=0x7f050018;\n                           ^\n1 error\n\n FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:compileDebugJava'.\n&gt; Compilation failed; see the compiler error output for details.\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n\nTotal time: 12.271 secs\n</code></pre>\n\n<p>It also says</p>\n\n<pre><code>error:  &lt;identifier&gt; expected\n</code></pre>\n\n<p>The main problem I am having is that R.java is generated by android studio and I have never touched it so I am very confused.</p>\n\n<p>The actual R.java code is here.</p>\n\n<pre><code> public static final class id {\n    public static final int =action_settings=0x7f050018;\n    public static final int action_error=0x7f05000b;\n    public static final int action_search=0x7f050017;\n    public static final int action_settings=0x7f050016;\n    public static final int action_success=0x7f05000d;\n    public static final int all=0x7f050004;\n    public static final int animation=0x7f05000e;\n    public static final int bottom=0x7f050003;\n    public static final int button_send=0x7f050014;\n    public static final int dismiss_overlay_button=0x7f050011;\n    public static final int dismiss_overlay_explain=0x7f050010;\n    public static final int edit_message=0x7f050013;\n    public static final int error_message=0x7f05000c;\n    public static final int hybrid=0x7f050009;\n    public static final int left=0x7f050000;\n    public static final int message=0x7f05000f;\n    public static final int none=0x7f050005;\n    public static final int normal=0x7f050006;\n    public static final int right=0x7f050002;\n    public static final int satellite=0x7f050007;\n    public static final int terrain=0x7f050008;\n    public static final int text=0x7f050012;\n    public static final int title=0x7f050015;\n    public static final int top=0x7f050001;\n    public static final int watch_view_stub=0x7f05000a;\n}\n</code></pre>\n\n<p>The error is thrown on the first line of the function at the =action_settings part.</p>\n\n<p>Any help at all would be greatly appreciated. Also if there is anything else you need to see please let me know. I'm still getting used to android and android studio so I am still not sure where everything is to help debug.</p>\n"},{"tags":["java","android","kotlin","android-edittext","keylistener"],"comments":[{"owner":{"account_id":170500,"reputation":6031,"user_id":397244,"accept_rate":67,"display_name":"kaneda"},"score":3,"creation_date":1355252129,"post_id":6217378,"comment_id":19027296,"body_markdown":"I came across the same issue. But what I asked myself better is why this is happening, so that I could resolve the issue before instead of having to move the caret myself.","body":"I came across the same issue. But what I asked myself better is why this is happening, so that I could resolve the issue before instead of having to move the caret myself."},{"owner":{"account_id":1033733,"reputation":4315,"user_id":1041533,"accept_rate":100,"display_name":"AgentKnopf"},"score":5,"creation_date":1357199278,"post_id":6217378,"comment_id":19571071,"body_markdown":"@kaneda I totally agree, however it would have been helpful if you had added the actual solution.","body":"@kaneda I totally agree, however it would have been helpful if you had added the actual solution."},{"owner":{"account_id":170500,"reputation":6031,"user_id":397244,"accept_rate":67,"display_name":"kaneda"},"score":1,"creation_date":1357214113,"post_id":6217378,"comment_id":19577278,"body_markdown":"@Zainodis It was just a thought. Like I said I came across the same issue, which does not necessarily means that I&#39;ve found the solution. In my case I had the issue with the `EditText`s as items of a `ListView`. As for experimentation, I made some changes on the `ListView` source code itself, which is a rather complex beast, and tested on the emulator. It was related to focus control management made by the component. So of course it&#39;s not a solution I could give to help our friend. :)","body":"@Zainodis It was just a thought. Like I said I came across the same issue, which does not necessarily means that I&#39;ve found the solution. In my case I had the issue with the <code>EditText</code>s as items of a <code>ListView</code>. As for experimentation, I made some changes on the <code>ListView</code> source code itself, which is a rather complex beast, and tested on the emulator. It was related to focus control management made by the component. So of course it&#39;s not a solution I could give to help our friend. :)"},{"owner":{"account_id":62229,"reputation":21708,"user_id":185022,"accept_rate":81,"display_name":"AZ_"},"score":2,"creation_date":1429776501,"post_id":6217378,"comment_id":47761643,"body_markdown":"possible duplicate of [Android edittext - settextmethod cursor issue](http://stackoverflow.com/questions/5141776/android-edittext-settextmethod-cursor-issue)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/5141776/android-edittext-settextmethod-cursor-issue\">Android edittext - settextmethod cursor issue</a>"},{"owner":{"account_id":5713777,"reputation":5302,"user_id":4514796,"display_name":"Ali Nem"},"score":0,"creation_date":1588761281,"post_id":6217378,"comment_id":109020668,"body_markdown":"This does not work inside `OnFocusChanged` callback. The solution there is to put setSelection inside a runnable and run it on main thread. Check here https://stackoverflow.com/a/32156989/4514796","body":"This does not work inside <code>OnFocusChanged</code> callback. The solution there is to put setSelection inside a runnable and run it on main thread. Check here <a href=\"https://stackoverflow.com/a/32156989/4514796\">stackoverflow.com/a/32156989/4514796</a>"}],"answers":[{"tags":[],"owner":{"account_id":143010,"reputation":8371,"user_id":351060,"accept_rate":96,"display_name":"Maximus"},"down_vote_count":3,"up_vote_count":17,"is_accepted":false,"score":14,"last_activity_date":1585470527,"creation_date":1307034273,"answer_id":6217707,"question_id":6217378,"body_markdown":"You should be able to achieve that with the help of `EditText&#39;s` method `setSelection()`, see [here][1]\r\n\r\n\r\n  [1]: http://developer.android.com/reference/android/widget/EditText.html#setSelection%28int%29","title":"Place cursor at the end of text in EditText","body":"<p>You should be able to achieve that with the help of <code>EditText's</code> method <code>setSelection()</code>, see <a href=\"http://developer.android.com/reference/android/widget/EditText.html#setSelection%28int%29\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":172454,"reputation":17860,"user_id":400493,"accept_rate":83,"display_name":"Marqs"},"down_vote_count":4,"up_vote_count":1542,"is_accepted":false,"score":1538,"last_activity_date":1630420620,"creation_date":1310126868,"answer_id":6624186,"question_id":6217378,"body_markdown":"Try this:\r\n\r\n**UPDATE:**\r\n\r\n**Kotlin:**\r\n\r\n    editText.setSelection(editText.length())//placing cursor at the end of the text\r\n\r\n**Java:**\r\n\r\n    editText.setSelection(editText.getText().length());","title":"Place cursor at the end of text in EditText","body":"<p>Try this:</p>\n<p><strong>UPDATE:</strong></p>\n<p><strong>Kotlin:</strong></p>\n<pre><code>editText.setSelection(editText.length())//placing cursor at the end of the text\n</code></pre>\n<p><strong>Java:</strong></p>\n<pre><code>editText.setSelection(editText.getText().length());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":331248,"reputation":13921,"user_id":655814,"accept_rate":46,"display_name":"James"},"down_vote_count":0,"up_vote_count":243,"is_accepted":false,"score":243,"last_activity_date":1324004037,"creation_date":1324004037,"answer_id":8529250,"question_id":6217378,"body_markdown":"There is a function called append for ediitext which appends the string value to current edittext value and places the cursor at the end of the value.\r\nYou can have the string value as the current ediitext value itself and call append();\r\n\r\n    myedittext.append(&quot;current_this_edittext_string&quot;); \r\n\r\n","title":"Place cursor at the end of text in EditText","body":"<p>There is a function called append for ediitext which appends the string value to current edittext value and places the cursor at the end of the value.\nYou can have the string value as the current ediitext value itself and call append();</p>\n\n<pre><code>myedittext.append(\"current_this_edittext_string\"); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1812122,"reputation":737,"user_id":1647949,"accept_rate":51,"display_name":"Li Che"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1353984222,"creation_date":1353984222,"answer_id":13576627,"question_id":6217378,"body_markdown":" i think this can achieve what you want.\r\n  \r\n\r\n     Editable etext = mSubjectTextEditor.getText();\r\n     Selection.setSelection(etext, etext.length());\r\n\r\n","title":"Place cursor at the end of text in EditText","body":"<p>i think this can achieve what you want.</p>\n\n<pre><code> Editable etext = mSubjectTextEditor.getText();\n Selection.setSelection(etext, etext.length());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":235684,"reputation":6837,"user_id":502671,"accept_rate":71,"display_name":"Etienne Lawlor"},"down_vote_count":1,"up_vote_count":45,"is_accepted":false,"score":44,"last_activity_date":1375808116,"creation_date":1362073757,"answer_id":15142240,"question_id":6217378,"body_markdown":"You could also place the cursor at the end of the text in the `EditText` view like this:\r\n\r\n    EditText et = (EditText)findViewById(R.id.textview);\r\n    int textLength = et.getText().length();\r\n    et.setSelection(textLength, textLength);\r\n","title":"Place cursor at the end of text in EditText","body":"<p>You could also place the cursor at the end of the text in the <code>EditText</code> view like this:</p>\n\n<pre><code>EditText et = (EditText)findViewById(R.id.textview);\nint textLength = et.getText().length();\net.setSelection(textLength, textLength);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":214026,"reputation":3415,"user_id":467750,"accept_rate":67,"display_name":"Anton Derevyanko"},"down_vote_count":0,"up_vote_count":138,"is_accepted":false,"score":138,"last_activity_date":1577851750,"creation_date":1366119027,"answer_id":16038451,"question_id":6217378,"body_markdown":"If you called `setText` before and the new text didn&#39;t get layout phase call `setSelection` in a separate runnable fired by `View.post(Runnable)` (repost from [this][1] topic).\r\n\r\nSo, for me this code works:\r\n\r\n\r\n    editText.setText(&quot;text&quot;);\r\n    editText.post(new Runnable() {\r\n             @Override\r\n             public void run() {\r\n                 editText.setSelection(editText.getText().length());\r\n             }\r\n    });\r\n\r\n  [1]: https://groups.google.com/forum/?fromgroups=#!topic/android-developers/0cZPTCOzyDs\r\n\r\nEdit 05/16/2019: Right now I&#39;m using Kotlin extension for that:\r\n\r\n    fun EditText.placeCursorToEnd() {\r\n        this.setSelection(this.text.length)\r\n    }\r\nand then - editText.placeCursorToEnd().","title":"Place cursor at the end of text in EditText","body":"<p>If you called <code>setText</code> before and the new text didn't get layout phase call <code>setSelection</code> in a separate runnable fired by <code>View.post(Runnable)</code> (repost from <a href=\"https://groups.google.com/forum/?fromgroups=#!topic/android-developers/0cZPTCOzyDs\" rel=\"noreferrer\">this</a> topic).</p>\n\n<p>So, for me this code works:</p>\n\n<pre><code>editText.setText(\"text\");\neditText.post(new Runnable() {\n         @Override\n         public void run() {\n             editText.setSelection(editText.getText().length());\n         }\n});\n</code></pre>\n\n<p>Edit 05/16/2019: Right now I'm using Kotlin extension for that:</p>\n\n<pre><code>fun EditText.placeCursorToEnd() {\n    this.setSelection(this.text.length)\n}\n</code></pre>\n\n<p>and then - editText.placeCursorToEnd().</p>\n"},{"tags":[],"owner":{"account_id":1685126,"reputation":2671,"user_id":1548596,"accept_rate":62,"display_name":"Kreshnik"},"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1487545809,"creation_date":1396736850,"answer_id":22887661,"question_id":6217378,"body_markdown":"This is another possible solution: \r\n\r\n    et.append(&quot;&quot;);\r\n\r\nJust try this solution if it doesn&#39;t work for any reason:\r\n\r\n    et.setSelection(et.getText().length());","title":"Place cursor at the end of text in EditText","body":"<p>This is another possible solution: </p>\n\n<pre><code>et.append(\"\");\n</code></pre>\n\n<p>Just try this solution if it doesn't work for any reason:</p>\n\n<pre><code>et.setSelection(et.getText().length());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3886333,"reputation":496,"user_id":3221190,"display_name":"Mario"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1453326497,"creation_date":1413482401,"answer_id":26410938,"question_id":6217378,"body_markdown":"    editText.setOnKeyListener(new View.OnKeyListener() {\r\n        @Override\r\n        public boolean onKey(View v, int keyCode, KeyEvent event) {\r\n            editText.setSelection(editText.getText().length());\r\n            return false;\r\n        }\r\n    });","title":"Place cursor at the end of text in EditText","body":"<pre><code>editText.setOnKeyListener(new View.OnKeyListener() {\n    @Override\n    public boolean onKey(View v, int keyCode, KeyEvent event) {\n        editText.setSelection(editText.getText().length());\n        return false;\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2994330,"reputation":1144,"user_id":2541156,"display_name":"Anh Duy"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1445607941,"creation_date":1439801654,"answer_id":32046283,"question_id":6217378,"body_markdown":"    /**\r\n     * Set cursor to end of text in edittext when user clicks Next on Keyboard.\r\n     */\r\n    View.OnFocusChangeListener onFocusChangeListener = new View.OnFocusChangeListener() {\r\n        @Override\r\n        public void onFocusChange(View view, boolean b) {\r\n            if (b) {\r\n                ((EditText) view).setSelection(((EditText) view).getText().length());\r\n            }\r\n        }\r\n    };\r\n\r\n    mEditFirstName.setOnFocusChangeListener(onFocusChangeListener); \r\n    mEditLastName.setOnFocusChangeListener(onFocusChangeListener);\r\n\r\nIt work good for me!\r\n","title":"Place cursor at the end of text in EditText","body":"<pre><code>/**\n * Set cursor to end of text in edittext when user clicks Next on Keyboard.\n */\nView.OnFocusChangeListener onFocusChangeListener = new View.OnFocusChangeListener() {\n    @Override\n    public void onFocusChange(View view, boolean b) {\n        if (b) {\n            ((EditText) view).setSelection(((EditText) view).getText().length());\n        }\n    }\n};\n\nmEditFirstName.setOnFocusChangeListener(onFocusChangeListener); \nmEditLastName.setOnFocusChangeListener(onFocusChangeListener);\n</code></pre>\n\n<p>It work good for me!</p>\n"},{"tags":[],"owner":{"account_id":1261920,"reputation":11497,"user_id":1219956,"accept_rate":65,"display_name":"Fonix"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1453324210,"creation_date":1443678502,"answer_id":32880262,"question_id":6217378,"body_markdown":"similar to @Anh Duy&#39;s answer, but it didnt work for me. i also needed the cursor to move to the end only when the user taps the edit text and still be able to select the position of the cursor afterwards, this is the only code that has worked for me\r\n\r\n    boolean textFocus = false; //define somewhere globally in the class\r\n\r\n    //in onFinishInflate() or somewhere\r\n    editText.setOnTouchListener(new OnTouchListener() {\r\n        @Override\r\n        public boolean onTouch(View v, MotionEvent event) {\r\n\r\n            editText.onTouchEvent(event);\r\n\r\n            if(!textFocus) {\r\n                editText.setSelection(editText.getText().length());\r\n                textFocus = true;\r\n            }\r\n\r\n            return true;\r\n        }\r\n    });\r\n\r\n    editText.setOnFocusChangeListener(new OnFocusChangeListener() {\r\n        @Override\r\n        public void onFocusChange(View v, boolean hasFocus) {\r\n            textFocus = false;\r\n        }\r\n    });","title":"Place cursor at the end of text in EditText","body":"<p>similar to @Anh Duy's answer, but it didnt work for me. i also needed the cursor to move to the end only when the user taps the edit text and still be able to select the position of the cursor afterwards, this is the only code that has worked for me</p>\n\n<pre><code>boolean textFocus = false; //define somewhere globally in the class\n\n//in onFinishInflate() or somewhere\neditText.setOnTouchListener(new OnTouchListener() {\n    @Override\n    public boolean onTouch(View v, MotionEvent event) {\n\n        editText.onTouchEvent(event);\n\n        if(!textFocus) {\n            editText.setSelection(editText.getText().length());\n            textFocus = true;\n        }\n\n        return true;\n    }\n});\n\neditText.setOnFocusChangeListener(new OnFocusChangeListener() {\n    @Override\n    public void onFocusChange(View v, boolean hasFocus) {\n        textFocus = false;\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":349346,"reputation":13527,"user_id":684582,"accept_rate":75,"display_name":"Al&#233;cio Carvalho"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1464101807,"creation_date":1464101807,"answer_id":37417170,"question_id":6217378,"body_markdown":"This does the trick **safely**:        \r\n\r\n        editText.setText(&quot;&quot;);\r\n        if (!TextUtils.isEmpty(text)) {\r\n            editText.append(text);\r\n        }","title":"Place cursor at the end of text in EditText","body":"<p>This does the trick <strong>safely</strong>:        </p>\n\n<pre><code>    editText.setText(\"\");\n    if (!TextUtils.isEmpty(text)) {\n        editText.append(text);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5984797,"reputation":14686,"user_id":5730321,"accept_rate":69,"display_name":"Leo DroidCoder"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1572077838,"creation_date":1464454497,"answer_id":37501612,"question_id":6217378,"body_markdown":"If your EditText is not clear:\r\n\r\n    editText.setText(&quot;&quot;);\r\n    editText.append(&quot;New text&quot;);\r\n\r\nor \r\n  \r\n\r\n    editText.setText(null);\r\n    editText.append(&quot;New text&quot;);","title":"Place cursor at the end of text in EditText","body":"<p>If your EditText is not clear:</p>\n\n<pre><code>editText.setText(\"\");\neditText.append(\"New text\");\n</code></pre>\n\n<p>or </p>\n\n<pre><code>editText.setText(null);\neditText.append(\"New text\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2043296,"reputation":3447,"user_id":1823992,"accept_rate":76,"display_name":"ar-g"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1466777376,"creation_date":1466777376,"answer_id":38015439,"question_id":6217378,"body_markdown":"If you want to select all text and just entering new text instead of old one, you can use\r\n\r\n        android:selectAllOnFocus=&quot;true&quot;\r\n","title":"Place cursor at the end of text in EditText","body":"<p>If you want to select all text and just entering new text instead of old one, you can use</p>\n\n<pre><code>    android:selectAllOnFocus=\"true\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1036721,"reputation":342,"user_id":1043783,"display_name":"Daniel Almeida"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1671035901,"creation_date":1480784851,"answer_id":40950292,"question_id":6217378,"body_markdown":"All the other codes I&#39;ve tested didn&#39;t work good due to the fact that the user could still place the caret/cursor wherever in the middle of the string (ex.: 12|3.00 - where | is the cursor). My solution always puts the cursor in the end of the string whenever the touch occurs on the EditText.\r\n\r\nThe ultimate solution is:\r\n\r\n\r\n    // For a EditText like:\r\n    &lt;EditText\r\n        android:id=&quot;@+id/EditTextAmount&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_width=&quot;fill_parent&quot;\r\n        android:hint=&quot;@string/amount&quot;\r\n        android:layout_weight=&quot;1&quot;\r\n        android:text=&quot;@string/zero_value&quot;\r\n        android:inputType=&quot;text|numberDecimal&quot;\r\n        android:maxLength=&quot;13&quot; /&gt;\r\n\r\nStrings values:\r\n\r\n    @string/amount=&quot;0.00&quot;\r\n    @string/zero_value=&quot;0.00&quot;\r\n\r\nIn code:\r\n\r\n    // Create a Static boolean flag\r\n    private static boolean returnNext; \r\n\r\n\r\n    // Set caret/cursor to the end on focus change\r\n    EditTextAmount.setOnFocusChangeListener(new View.OnFocusChangeListener() {\r\n        @Override\r\n        public void onFocusChange(View editText, boolean hasFocus) {\r\n            if(hasFocus) {\r\n                ((EditText) editText).setSelection(((EditText) editText).getText().length());\r\n            }\r\n        }\r\n    });\r\n\r\n    // Create a touch listener and put caret to the end (no matter where the user touched in the middle of the string)\r\n    EditTextAmount.setOnTouchListener(new View.OnTouchListener() {\r\n        @Override\r\n        public boolean onTouch(View editText, MotionEvent event) {\r\n            ((EditText) editText).onTouchEvent(event);\r\n            ((EditText) editText).setSelection(((EditText) editText).getText().length());\r\n            return true;\r\n        }\r\n    });\r\n\r\n\r\n    // Implement a Currency Mask with addTextChangedListener\r\n    EditTextAmount.addTextChangedListener(new TextWatcher() {\r\n        @Override\r\n        public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n            String input = s.toString();\r\n            String output = new String();\r\n            String buffer = new String();\r\n            String decimals = new String();\r\n            String numbers = Integer.toString(Integer.parseInt(input.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;)));\r\n    \r\n            if(returnNext) {\r\n                returnNext = false;\r\n                return;\r\n            }\r\n    \r\n            returnNext = true;\r\n    \r\n            if (numbers.equals(&quot;0&quot;)) {\r\n                output += &quot;0.00&quot;;\r\n            } else if (numbers.length() &lt;= 2) {\r\n                output += &quot;0.&quot; + String.format(&quot;%02d&quot;, Integer.parseInt(numbers));\r\n            } else if(numbers.length() &gt;= 3) {\r\n                decimals = numbers.substring(numbers.length() - 2);\r\n                int commaCounter = 0;\r\n                for(int i = numbers.length() - 3; i &gt;= 0; i--) {\r\n                    if(commaCounter == 3) {\r\n                        buffer += &quot;,&quot;;\r\n                        commaCounter = 0;\r\n                    }\r\n                    buffer += numbers.charAt(i);\r\n                    commaCounter++;\r\n                }\r\n                output = new StringBuilder(buffer).reverse().toString() + &quot;.&quot; + decimals;\r\n            }\r\n\r\n            EditTextAmount.setText(output);\r\n            EditTextAmount.setSelection(EditTextAmount.getText().length());\r\n        }\r\n    \r\n        @Override\r\n        public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n            /*String input = s.toString();\r\n            if(input.equals(&quot;0.0&quot;)) {\r\n                EditTextAmount.setText(&quot;0.00&quot;);\r\n                EditTextAmount.setSelection(EditTextAmount.getText().length());\r\n                return;\r\n            }*/\r\n        }\r\n    \r\n        @Override\r\n        public void afterTextChanged(Editable s) {\r\n    \r\n        }\r\n    });\r\n\r\nHope it helps!","title":"Place cursor at the end of text in EditText","body":"<p>All the other codes I've tested didn't work good due to the fact that the user could still place the caret/cursor wherever in the middle of the string (ex.: 12|3.00 - where | is the cursor). My solution always puts the cursor in the end of the string whenever the touch occurs on the EditText.</p>\n<p>The ultimate solution is:</p>\n<pre><code>// For a EditText like:\n&lt;EditText\n    android:id=&quot;@+id/EditTextAmount&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_width=&quot;fill_parent&quot;\n    android:hint=&quot;@string/amount&quot;\n    android:layout_weight=&quot;1&quot;\n    android:text=&quot;@string/zero_value&quot;\n    android:inputType=&quot;text|numberDecimal&quot;\n    android:maxLength=&quot;13&quot; /&gt;\n</code></pre>\n<p>Strings values:</p>\n<pre><code>@string/amount=&quot;0.00&quot;\n@string/zero_value=&quot;0.00&quot;\n</code></pre>\n<p>In code:</p>\n<pre><code>// Create a Static boolean flag\nprivate static boolean returnNext; \n\n\n// Set caret/cursor to the end on focus change\nEditTextAmount.setOnFocusChangeListener(new View.OnFocusChangeListener() {\n    @Override\n    public void onFocusChange(View editText, boolean hasFocus) {\n        if(hasFocus) {\n            ((EditText) editText).setSelection(((EditText) editText).getText().length());\n        }\n    }\n});\n\n// Create a touch listener and put caret to the end (no matter where the user touched in the middle of the string)\nEditTextAmount.setOnTouchListener(new View.OnTouchListener() {\n    @Override\n    public boolean onTouch(View editText, MotionEvent event) {\n        ((EditText) editText).onTouchEvent(event);\n        ((EditText) editText).setSelection(((EditText) editText).getText().length());\n        return true;\n    }\n});\n\n\n// Implement a Currency Mask with addTextChangedListener\nEditTextAmount.addTextChangedListener(new TextWatcher() {\n    @Override\n    public void onTextChanged(CharSequence s, int start, int before, int count) {\n        String input = s.toString();\n        String output = new String();\n        String buffer = new String();\n        String decimals = new String();\n        String numbers = Integer.toString(Integer.parseInt(input.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;)));\n\n        if(returnNext) {\n            returnNext = false;\n            return;\n        }\n\n        returnNext = true;\n\n        if (numbers.equals(&quot;0&quot;)) {\n            output += &quot;0.00&quot;;\n        } else if (numbers.length() &lt;= 2) {\n            output += &quot;0.&quot; + String.format(&quot;%02d&quot;, Integer.parseInt(numbers));\n        } else if(numbers.length() &gt;= 3) {\n            decimals = numbers.substring(numbers.length() - 2);\n            int commaCounter = 0;\n            for(int i = numbers.length() - 3; i &gt;= 0; i--) {\n                if(commaCounter == 3) {\n                    buffer += &quot;,&quot;;\n                    commaCounter = 0;\n                }\n                buffer += numbers.charAt(i);\n                commaCounter++;\n            }\n            output = new StringBuilder(buffer).reverse().toString() + &quot;.&quot; + decimals;\n        }\n\n        EditTextAmount.setText(output);\n        EditTextAmount.setSelection(EditTextAmount.getText().length());\n    }\n\n    @Override\n    public void beforeTextChanged(CharSequence s, int start, int count, int after) {\n        /*String input = s.toString();\n        if(input.equals(&quot;0.0&quot;)) {\n            EditTextAmount.setText(&quot;0.00&quot;);\n            EditTextAmount.setSelection(EditTextAmount.getText().length());\n            return;\n        }*/\n    }\n\n    @Override\n    public void afterTextChanged(Editable s) {\n\n    }\n});\n</code></pre>\n<p>Hope it helps!</p>\n"},{"tags":[],"owner":{"account_id":3324057,"reputation":876,"user_id":2794507,"display_name":"Hardik Vasani"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1493797844,"creation_date":1493796682,"answer_id":43753840,"question_id":6217378,"body_markdown":"   This works\r\n\r\n    \r\n    Editable etext = edittext.getText();\r\n    Selection.setSelection(etext,edittext.getText().toString().length());","title":"Place cursor at the end of text in EditText","body":"<p>This works</p>\n\n<pre><code>Editable etext = edittext.getText();\nSelection.setSelection(etext,edittext.getText().toString().length());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8285841,"reputation":1839,"user_id":6228959,"display_name":"Mr.vicky patel"},"down_vote_count":0,"up_vote_count":166,"is_accepted":false,"score":166,"last_activity_date":1573556168,"creation_date":1496905941,"answer_id":44428987,"question_id":6217378,"body_markdown":"**Kotlin**:\r\n\r\nset the cursor to the **starting position**:\r\n\r\n    val editText = findViewById(R.id.edittext_id) as EditText\r\n    editText.setSelection(0)\r\n\r\nset the cursor to the **end of the EditText**:\r\n\r\n    val editText = findViewById(R.id.edittext_id) as EditText\r\n    editText.setSelection(editText.text.length)\r\n\r\nBelow Code is to place the cursor **after the second character:**\r\n\r\n    val editText = findViewById(R.id.edittext_id) as EditText\r\n    editText.setSelection(2)\r\n\r\n\r\n**JAVA**:\r\n\r\nset the cursor to the **starting position**:\r\n\r\n     EditText editText = (EditText)findViewById(R.id.edittext_id);\r\n     editText.setSelection(0);\r\n\r\nset the cursor to the **end of the EditText**:\r\n\r\n    EditText editText = (EditText)findViewById(R.id.edittext_id);\r\n    editText.setSelection(editText.getText().length());\r\n\r\nBelow Code is to place the cursor **after the second character:**\r\n\r\n    EditText editText = (EditText)findViewById(R.id.edittext_id);\r\n    editText.setSelection(2);\r\n\r\n ","title":"Place cursor at the end of text in EditText","body":"<p><strong>Kotlin</strong>:</p>\n\n<p>set the cursor to the <strong>starting position</strong>:</p>\n\n<pre><code>val editText = findViewById(R.id.edittext_id) as EditText\neditText.setSelection(0)\n</code></pre>\n\n<p>set the cursor to the <strong>end of the EditText</strong>:</p>\n\n<pre><code>val editText = findViewById(R.id.edittext_id) as EditText\neditText.setSelection(editText.text.length)\n</code></pre>\n\n<p>Below Code is to place the cursor <strong>after the second character:</strong></p>\n\n<pre><code>val editText = findViewById(R.id.edittext_id) as EditText\neditText.setSelection(2)\n</code></pre>\n\n<p><strong>JAVA</strong>:</p>\n\n<p>set the cursor to the <strong>starting position</strong>:</p>\n\n<pre><code> EditText editText = (EditText)findViewById(R.id.edittext_id);\n editText.setSelection(0);\n</code></pre>\n\n<p>set the cursor to the <strong>end of the EditText</strong>:</p>\n\n<pre><code>EditText editText = (EditText)findViewById(R.id.edittext_id);\neditText.setSelection(editText.getText().length());\n</code></pre>\n\n<p>Below Code is to place the cursor <strong>after the second character:</strong></p>\n\n<pre><code>EditText editText = (EditText)findViewById(R.id.edittext_id);\neditText.setSelection(2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4073026,"reputation":167,"user_id":3345389,"display_name":"kishna.147"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1524209351,"creation_date":1524209351,"answer_id":49936331,"question_id":6217378,"body_markdown":"    public class CustomEditText extends EditText {\r\n        public CustomEditText(Context context, AttributeSet attrs) {\r\n            super(context, attrs);\r\n        }\r\n    \r\n        public CustomEditText(Context context) {\r\n            super(context);\r\n        }\r\n    \r\n        public CustomEditText(Context context, AttributeSet attrs, int defStyle) {\r\n            super(context, attrs, defStyle);\r\n        }\r\n    \r\n    \r\n        @Override\r\n        protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {\r\n            super.onFocusChanged(focused, direction, previouslyFocusedRect);\r\n            this.setSelection(this.getText().length());\r\n        }\r\n    \r\n        @Override\r\n        protected void onSelectionChanged(int selStart, int selEnd) {\r\n    \r\n        }\r\n    }\r\n\r\nUser this CustomEditText in your XML file, this will work. I have tested this and it is working for me.","title":"Place cursor at the end of text in EditText","body":"<pre><code>public class CustomEditText extends EditText {\n    public CustomEditText(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public CustomEditText(Context context) {\n        super(context);\n    }\n\n    public CustomEditText(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n    }\n\n\n    @Override\n    protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {\n        super.onFocusChanged(focused, direction, previouslyFocusedRect);\n        this.setSelection(this.getText().length());\n    }\n\n    @Override\n    protected void onSelectionChanged(int selStart, int selEnd) {\n\n    }\n}\n</code></pre>\n\n<p>User this CustomEditText in your XML file, this will work. I have tested this and it is working for me.</p>\n"},{"tags":[],"owner":{"account_id":9280154,"reputation":57862,"user_id":6891563,"accept_rate":75,"display_name":"Khemraj Sharma"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1526402629,"creation_date":1526235501,"answer_id":50319219,"question_id":6217378,"body_markdown":"`editText.setSelection` is the magic here. Basically selection gives you place cursor at any position you want.\r\n\r\n    EditText editText = findViewById(R.id.editText);\r\n    editText.setSelection(editText.getText().length());\r\n\r\nThis places cursor to end of EditText. Basically `editText.getText().length()` gives you text length. Then you use `setSelection` with length.\r\n\r\n`editText.setSelection(0);` \r\n\r\nIt is for setting cursor at start position (0). ","title":"Place cursor at the end of text in EditText","body":"<p><code>editText.setSelection</code> is the magic here. Basically selection gives you place cursor at any position you want.</p>\n\n<pre><code>EditText editText = findViewById(R.id.editText);\neditText.setSelection(editText.getText().length());\n</code></pre>\n\n<p>This places cursor to end of EditText. Basically <code>editText.getText().length()</code> gives you text length. Then you use <code>setSelection</code> with length.</p>\n\n<p><code>editText.setSelection(0);</code> </p>\n\n<p>It is for setting cursor at start position (0). </p>\n"},{"tags":[],"owner":{"account_id":9268871,"reputation":129,"user_id":6883539,"display_name":"Rahul Patil"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1670846970,"creation_date":1526374356,"answer_id":50346009,"question_id":6217378,"body_markdown":"Try This:\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/edt_text&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;Hello World!&quot;\r\n        android:cursorVisible=&quot;true&quot;/&gt;\r\n    \r\nIn your code:\r\n\r\n    EditText editText = findViewById(R.id.editText);\r\n    editText.setSelection(editText.getText().length()); // Set cursor end point\r\n\r\n[![enter image description here][1]][1]    \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hXSS6l.png","title":"Place cursor at the end of text in EditText","body":"<p>Try This:</p>\n<pre><code>&lt;EditText\n    android:id=&quot;@+id/edt_text&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:text=&quot;Hello World!&quot;\n    android:cursorVisible=&quot;true&quot;/&gt;\n</code></pre>\n<p>In your code:</p>\n<pre><code>EditText editText = findViewById(R.id.editText);\neditText.setSelection(editText.getText().length()); // Set cursor end point\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/hXSS6l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hXSS6l.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":1095816,"reputation":697,"user_id":1089435,"display_name":"djleop"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1533915338,"creation_date":1533915338,"answer_id":51789842,"question_id":6217378,"body_markdown":"The question is old and answered, but I think it may be useful to have this answer if you want to use the newly released DataBinding tools for Android, just set this in your XML : \r\n\r\n    &lt;data&gt;\r\n        &lt;variable name=&quot;stringValue&quot; type=&quot;String&quot;/&gt;\r\n    &lt;/data&gt;\r\n    ...\r\n    &lt;EditText\r\n            ...\r\n            android:text=&quot;@={stringValue}&quot;\r\n            android:selection=&quot;@{stringValue.length()}&quot;\r\n            ...\r\n    /&gt;","title":"Place cursor at the end of text in EditText","body":"<p>The question is old and answered, but I think it may be useful to have this answer if you want to use the newly released DataBinding tools for Android, just set this in your XML : </p>\n\n<pre><code>&lt;data&gt;\n    &lt;variable name=\"stringValue\" type=\"String\"/&gt;\n&lt;/data&gt;\n...\n&lt;EditText\n        ...\n        android:text=\"@={stringValue}\"\n        android:selection=\"@{stringValue.length()}\"\n        ...\n/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9116862,"reputation":397,"user_id":6783719,"display_name":"Igor Siqueira"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1670931234,"creation_date":1536867182,"answer_id":52320601,"question_id":6217378,"body_markdown":"In my case I created the following **Kotlin ext. function**, may be useful to someone:\r\n\r\n    private fun EditText.focus(){\r\n        requestFocus()\r\n        setSelection(length())\r\n    }\r\n\r\nThen use as follows:\r\n\r\n    mEditText.focus()","title":"Place cursor at the end of text in EditText","body":"<p>In my case I created the following <strong>Kotlin ext. function</strong>, may be useful to someone:</p>\n<pre><code>private fun EditText.focus(){\n    requestFocus()\n    setSelection(length())\n}\n</code></pre>\n<p>Then use as follows:</p>\n<pre><code>mEditText.focus()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9611465,"reputation":1742,"user_id":7135685,"display_name":"Mujahid Khan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1543576868,"creation_date":1543576868,"answer_id":53556535,"question_id":6217378,"body_markdown":"If you want to Place cursor at the end of text in EditText view\r\n\r\n     EditText rename;\r\n     String title = &quot;title_goes_here&quot;;\r\n     int counts = (int) title.length();\r\n     rename.setSelection(counts);\r\n     rename.setText(title);","title":"Place cursor at the end of text in EditText","body":"<p>If you want to Place cursor at the end of text in EditText view</p>\n\n<pre><code> EditText rename;\n String title = \"title_goes_here\";\n int counts = (int) title.length();\n rename.setSelection(counts);\n rename.setText(title);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10907401,"reputation":61,"user_id":8017736,"display_name":"siby varghese"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1561546325,"creation_date":1561546180,"answer_id":56771081,"question_id":6217378,"body_markdown":"    etSSID.setSelection(etSSID.getText().length());\r\n","title":"Place cursor at the end of text in EditText","body":"<pre><code>etSSID.setSelection(etSSID.getText().length());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7837986,"reputation":42767,"user_id":5925259,"accept_rate":100,"display_name":"Yogesh Umesh Vaity"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1569251803,"creation_date":1569225079,"answer_id":58057850,"question_id":6217378,"body_markdown":"For ViewModel, LiveData and Data binding\r\n-----------------------------\r\nI needed this functionality for `EditText` with multiline support in my notes app. I wanted the cursor at the end of the text when the user navigates to the fragment that has note text.\r\n\r\nThe solution suggested by the [djleop][1] comes close. But the problem with this is that, if the user puts the cursor somewhere in the middle of the text for editing and starts typing, the cursor would jump to the end of text again. This happened because the `LiveData` would emit the new value and cursor would jump to the end of the text again resulting in user not able to edit the text somewhere in the middle.\r\n\r\nTo solve this, I use `MediatorLiveData` and assign it the length of `String` only once using a flag. This will cause the LiveData to read the value only once, that is, when the user navigates to the fragment. After that the user can place the cursor anywhere they want to edit the text there.\r\n\r\n**ViewModel**\r\n\r\n    private var accessedPosition: Boolean = false\r\n\r\n    val cursorPosition = MediatorLiveData&lt;Event&lt;Int&gt;&gt;().apply {\r\n        addSource(yourObject) { value -&gt;\r\n            if(!accessedPosition) {\r\n                setValue(Event(yourObject.note.length))\r\n                accessedPosition = true\r\n            }\r\n        }\r\n    }\r\n\r\nHere, `yourObject` is another LiveData retrieved from the database that holds the String text that you are displaying in the `EditText`.\r\n\r\nThen bind this `MediatorLiveData` to your EditText using binding adapter.\r\n\r\n**XML**\r\n\r\nUses two-way data binding for displaying text as well as accepting the text input.\r\n\r\n    &lt;!-- android:text must be placed before cursorPosition otherwise we&#39;ll get IndexOutOfBounds exception--&gt;\r\n    &lt;EditText\r\n        android:text=&quot;@={viewModel.noteText}&quot;\r\n        cursorPosition=&quot;@{viewModel.cursorPosition}&quot; /&gt;\r\n\r\n**Binding Adapter**\r\n\r\n    @BindingAdapter(&quot;cursorPosition&quot;)\r\n    fun bindCursorPosition(editText: EditText, event: Event&lt;Int&gt;?) {\r\n        event?.getContentIfNotHandled()?.let { editText.setSelection(it) }\r\n    }\r\n\r\n**`Event` class**\r\n\r\nThe `Event` class here is like a [SingleLiveEvent][2] written by Jose Alc&#233;rreca from Google. I use it here to take care of screen rotation. Using the single `Event` will make sure that the cursor won&#39;t jump to the end of text when the user is editing the text somewhere in the middle and the screen rotates. It will maintain the same position when the screen rotates.\r\n\r\nHere&#39;s the `Event` class:\r\n\r\n    open class Event&lt;out T&gt;(private val content: T) {\r\n    \r\n        var hasBeenHandled = false\r\n            private set // Allow external read but not write\r\n    \r\n        /**\r\n         * Returns the content and prevents its use again.\r\n         */\r\n        fun getContentIfNotHandled(): T? {\r\n            return if (hasBeenHandled) {\r\n                null\r\n            } else {\r\n                hasBeenHandled = true\r\n                content\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Returns the content, even if it&#39;s already been handled.\r\n         */\r\n        fun peekContent(): T = content\r\n    }\r\n\r\nThis is the solution that works for me and provides good user experience. Hope it helps in your projects too.\r\n\r\n  [1]: https://stackoverflow.com/a/51789842/5925259\r\n  [2]: https://medium.com/androiddevelopers/livedata-with-snackbar-navigation-and-other-events-the-singleliveevent-case-ac2622673150","title":"Place cursor at the end of text in EditText","body":"<h2>For ViewModel, LiveData and Data binding</h2>\n\n<p>I needed this functionality for <code>EditText</code> with multiline support in my notes app. I wanted the cursor at the end of the text when the user navigates to the fragment that has note text.</p>\n\n<p>The solution suggested by the <a href=\"https://stackoverflow.com/a/51789842/5925259\">djleop</a> comes close. But the problem with this is that, if the user puts the cursor somewhere in the middle of the text for editing and starts typing, the cursor would jump to the end of text again. This happened because the <code>LiveData</code> would emit the new value and cursor would jump to the end of the text again resulting in user not able to edit the text somewhere in the middle.</p>\n\n<p>To solve this, I use <code>MediatorLiveData</code> and assign it the length of <code>String</code> only once using a flag. This will cause the LiveData to read the value only once, that is, when the user navigates to the fragment. After that the user can place the cursor anywhere they want to edit the text there.</p>\n\n<p><strong>ViewModel</strong></p>\n\n<pre><code>private var accessedPosition: Boolean = false\n\nval cursorPosition = MediatorLiveData&lt;Event&lt;Int&gt;&gt;().apply {\n    addSource(yourObject) { value -&gt;\n        if(!accessedPosition) {\n            setValue(Event(yourObject.note.length))\n            accessedPosition = true\n        }\n    }\n}\n</code></pre>\n\n<p>Here, <code>yourObject</code> is another LiveData retrieved from the database that holds the String text that you are displaying in the <code>EditText</code>.</p>\n\n<p>Then bind this <code>MediatorLiveData</code> to your EditText using binding adapter.</p>\n\n<p><strong>XML</strong></p>\n\n<p>Uses two-way data binding for displaying text as well as accepting the text input.</p>\n\n<pre><code>&lt;!-- android:text must be placed before cursorPosition otherwise we'll get IndexOutOfBounds exception--&gt;\n&lt;EditText\n    android:text=\"@={viewModel.noteText}\"\n    cursorPosition=\"@{viewModel.cursorPosition}\" /&gt;\n</code></pre>\n\n<p><strong>Binding Adapter</strong></p>\n\n<pre><code>@BindingAdapter(\"cursorPosition\")\nfun bindCursorPosition(editText: EditText, event: Event&lt;Int&gt;?) {\n    event?.getContentIfNotHandled()?.let { editText.setSelection(it) }\n}\n</code></pre>\n\n<p><strong><code>Event</code> class</strong></p>\n\n<p>The <code>Event</code> class here is like a <a href=\"https://medium.com/androiddevelopers/livedata-with-snackbar-navigation-and-other-events-the-singleliveevent-case-ac2622673150\" rel=\"noreferrer\">SingleLiveEvent</a> written by Jose Alcrreca from Google. I use it here to take care of screen rotation. Using the single <code>Event</code> will make sure that the cursor won't jump to the end of text when the user is editing the text somewhere in the middle and the screen rotates. It will maintain the same position when the screen rotates.</p>\n\n<p>Here's the <code>Event</code> class:</p>\n\n<pre><code>open class Event&lt;out T&gt;(private val content: T) {\n\n    var hasBeenHandled = false\n        private set // Allow external read but not write\n\n    /**\n     * Returns the content and prevents its use again.\n     */\n    fun getContentIfNotHandled(): T? {\n        return if (hasBeenHandled) {\n            null\n        } else {\n            hasBeenHandled = true\n            content\n        }\n    }\n\n    /**\n     * Returns the content, even if it's already been handled.\n     */\n    fun peekContent(): T = content\n}\n</code></pre>\n\n<p>This is the solution that works for me and provides good user experience. Hope it helps in your projects too.</p>\n"},{"tags":[],"owner":{"account_id":12605951,"reputation":2564,"user_id":9166855,"display_name":"Prajwal Waingankar"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1577682569,"creation_date":1577653881,"answer_id":59523332,"question_id":6217378,"body_markdown":"The above answers didnt worked for me. So i found out a new solution. This maybe helpful to someone. I have been using the latest version of Android Studio i.e 3.5 as per the present date. Maybe that might be the reason y the above answers didnt showed any effect.\r\n\r\nCODE:\r\n\r\n    EditText available_seats = findViewById(R.id.available_seats);\r\n    Selection.setSelection(available_seats.getText(),available_seats.getText().length());\r\n\r\nHere, the 1st argument is the Spannable text value that you want to playwith whereas the 2nd argument is the index value. Since, we want the cursor at the end of the text, we took getText().length() which returns the length of the text\r\n","title":"Place cursor at the end of text in EditText","body":"<p>The above answers didnt worked for me. So i found out a new solution. This maybe helpful to someone. I have been using the latest version of Android Studio i.e 3.5 as per the present date. Maybe that might be the reason y the above answers didnt showed any effect.</p>\n\n<p>CODE:</p>\n\n<pre><code>EditText available_seats = findViewById(R.id.available_seats);\nSelection.setSelection(available_seats.getText(),available_seats.getText().length());\n</code></pre>\n\n<p>Here, the 1st argument is the Spannable text value that you want to playwith whereas the 2nd argument is the index value. Since, we want the cursor at the end of the text, we took getText().length() which returns the length of the text</p>\n"},{"tags":[],"owner":{"account_id":12655492,"reputation":376,"user_id":9198161,"display_name":"DavidUps"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639496459,"creation_date":1639496459,"answer_id":70351585,"question_id":6217378,"body_markdown":"    editText.accessibilityDelegate = object : View.AccessibilityDelegate() {\r\n        override fun sendAccessibilityEvent(host: View?, eventType: Int) {\r\n            super.sendAccessibilityEvent(host, eventType)\r\n            if (eventType == TYPE_VIEW_TEXT_SELECTION_CHANGED) {\r\n                editText.setSelection(editText.length())\r\n            }\r\n        }\r\n    }","title":"Place cursor at the end of text in EditText","body":"<pre><code>editText.accessibilityDelegate = object : View.AccessibilityDelegate() {\n    override fun sendAccessibilityEvent(host: View?, eventType: Int) {\n        super.sendAccessibilityEvent(host, eventType)\n        if (eventType == TYPE_VIEW_TEXT_SELECTION_CHANGED) {\n            editText.setSelection(editText.length())\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":260688,"reputation":101,"user_id":544393,"display_name":"Jayesh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1669915260,"creation_date":1669915260,"answer_id":74645806,"question_id":6217378,"body_markdown":"FULLY WORKING SOLUTION!!! \r\n\r\nkotlin, You need to use `post`\r\n\r\n```\r\nfun EditText.placeCursorToEnd() {\r\n    this.setOnFocusChangeListener { v, hasFocus -&gt;\r\n        if (hasFocus) {\r\n            v.post { this.setSelection(text.length) }\r\n        }\r\n    }\r\n    this.setOnClickListener {\r\n        it.post { this.setSelection(text.length) }\r\n    }\r\n}\r\n```","title":"Place cursor at the end of text in EditText","body":"<p>FULLY WORKING SOLUTION!!!</p>\n<p>kotlin, You need to use <code>post</code></p>\n<pre><code>fun EditText.placeCursorToEnd() {\n    this.setOnFocusChangeListener { v, hasFocus -&gt;\n        if (hasFocus) {\n            v.post { this.setSelection(text.length) }\n        }\n    }\n    this.setOnClickListener {\n        it.post { this.setSelection(text.length) }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15249328,"reputation":335,"user_id":11003253,"display_name":"Yunis Rasulzade"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698152153,"creation_date":1698152153,"answer_id":77352242,"question_id":6217378,"body_markdown":"Below solution works even when there is default text is set and it does **NOT** blink cursor\r\n\r\n     fun EditText.setCursorToEnd() {\r\n        setOnFocusChangeListener { v, hasFocus -&gt;\r\n            if (hasFocus) {\r\n                showKeyboard(this) // call your show keyboard function\r\n\r\n                val text = this.text.toString()\r\n                this.setText(text)\r\n                this.setSelection(text.length) // Move the cursor to the end\r\n            }\r\n        }\r\n    }","title":"Place cursor at the end of text in EditText","body":"<p>Below solution works even when there is default text is set and it does <strong>NOT</strong> blink cursor</p>\n<pre><code> fun EditText.setCursorToEnd() {\n    setOnFocusChangeListener { v, hasFocus -&gt;\n        if (hasFocus) {\n            showKeyboard(this) // call your show keyboard function\n\n            val text = this.text.toString()\n            this.setText(text)\n            this.setSelection(text.length) // Move the cursor to the end\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":760767,"reputation":10619,"user_id":781501,"display_name":"Manu"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":365457,"favorite_count":0,"down_vote_count":1,"up_vote_count":1062,"answer_count":28,"score":1061,"last_activity_date":1698152153,"creation_date":1307032362,"question_id":6217378,"body_markdown":"I am changing the value of an `EditText` on `keyListener`.\r\n\r\nBut when I change the text the cursor is moving to the beginning of the `EditText`.\r\nI need the cursor to be at the end of the text.\r\n\r\nHow to move the cursor to the end of the text in a `EditText`.","title":"Place cursor at the end of text in EditText","body":"<p>I am changing the value of an <code>EditText</code> on <code>keyListener</code>.</p>\n\n<p>But when I change the text the cursor is moving to the beginning of the <code>EditText</code>.\nI need the cursor to be at the end of the text.</p>\n\n<p>How to move the cursor to the end of the text in a <code>EditText</code>.</p>\n"},{"tags":["java","spring-boot","kubernetes","spring-cloud","spring-cloud-kubernetes"],"answers":[{"tags":[],"owner":{"account_id":745399,"reputation":872,"user_id":731938,"display_name":"Igor Kanshyn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674006874,"creation_date":1674006874,"answer_id":75153992,"question_id":75153698,"body_markdown":"You are trying to configure your discovery client with the Kubernetes API server URL, which is incorrect.\r\nYour client application needs to be connected to **Spring Cloud Kubernetes Discovery Server**. \r\nIt&#39;s an independent application that will work like a **proxy** between your client SpringBoot apps and Kubernetes. \r\nYou can find its images here: https://hub.docker.com/r/springcloud/spring-cloud-kubernetes-discoveryserver/tags\r\nAnd it should be deployed to Kubernetes via yaml file.\r\n\r\nThen you can configure \r\n``` spring.cloud.kubernetes.discovery.discovery-server-url ```\r\n with this discovery server URL. That URL will most likely come from a Kubernetes service that you will create for the discovery server application.\r\n\r\nPlease, find the full deployment YAML and the related documentation here:\r\nhttps://spring.io/blog/2021/10/26/new-features-for-spring-cloud-kubernetes-in-spring-cloud-2021-0-0-m3\r\n\r\nPlease, let us know how that goes \r\n\r\n","title":"spring.cloud.kubernetes.discovery.discovery-server-url - what is the correct url?","body":"<p>You are trying to configure your discovery client with the Kubernetes API server URL, which is incorrect.\nYour client application needs to be connected to <strong>Spring Cloud Kubernetes Discovery Server</strong>.\nIt's an independent application that will work like a <strong>proxy</strong> between your client SpringBoot apps and Kubernetes.\nYou can find its images here: <a href=\"https://hub.docker.com/r/springcloud/spring-cloud-kubernetes-discoveryserver/tags\" rel=\"nofollow noreferrer\">https://hub.docker.com/r/springcloud/spring-cloud-kubernetes-discoveryserver/tags</a>\nAnd it should be deployed to Kubernetes via yaml file.</p>\n<p>Then you can configure\n<code>spring.cloud.kubernetes.discovery.discovery-server-url</code>\nwith this discovery server URL. That URL will most likely come from a Kubernetes service that you will create for the discovery server application.</p>\n<p>Please, find the full deployment YAML and the related documentation here:\n<a href=\"https://spring.io/blog/2021/10/26/new-features-for-spring-cloud-kubernetes-in-spring-cloud-2021-0-0-m3\" rel=\"nofollow noreferrer\">https://spring.io/blog/2021/10/26/new-features-for-spring-cloud-kubernetes-in-spring-cloud-2021-0-0-m3</a></p>\n<p>Please, let us know how that goes</p>\n"}],"owner":{"account_id":3007829,"reputation":177,"user_id":4315219,"display_name":"duckdivesurvive"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":636,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75153992,"answer_count":1,"score":1,"last_activity_date":1698151496,"creation_date":1674003039,"question_id":75153698,"body_markdown":"I am just setting two simple services on Mac using minikube \r\n\r\nI have the service set up and I can access it via ingress / minikube tunnel . So i know the service works\r\n\r\nI am using Spring Boot 3, with the  so i need to specify the ```spring-cloud-starter-kubernetes-all``` package. This means I need to specify a url for ```spring.cloud.kubernetes.discovery.discovery-server-url ```\r\n\r\nWhen i try to do the simple call to \r\n\r\n```discoveryClient.getServices()```\r\n\r\nI get the error &quot;Connection refused https://kubernetes.docker.internal:6443/apps&quot;\r\n\r\n&quot;apps&quot; is my second service\r\n\r\nIt is refusing connection to the value of ```spring.cloud.kubernetes.discovery.discovery-server-url```\r\n\r\nAt the moment i have this set to ```spring.cloud.kubernetes.discovery.discovery-server-url=https://kubernetes.docker.internal:6443```\r\n\r\nI am assuming this is incorrect and I need some help as to what is the correct url to set this to / or the correct place to find this. I thought this would be the internal url.\r\n\r\n","title":"spring.cloud.kubernetes.discovery.discovery-server-url - what is the correct url?","body":"<p>I am just setting two simple services on Mac using minikube</p>\n<p>I have the service set up and I can access it via ingress / minikube tunnel . So i know the service works</p>\n<p>I am using Spring Boot 3, with the  so i need to specify the <code>spring-cloud-starter-kubernetes-all</code> package. This means I need to specify a url for <code>spring.cloud.kubernetes.discovery.discovery-server-url </code></p>\n<p>When i try to do the simple call to</p>\n<p><code>discoveryClient.getServices()</code></p>\n<p>I get the error &quot;Connection refused <a href=\"https://kubernetes.docker.internal:6443/apps%22\" rel=\"nofollow noreferrer\">https://kubernetes.docker.internal:6443/apps&quot;</a></p>\n<p>&quot;apps&quot; is my second service</p>\n<p>It is refusing connection to the value of <code>spring.cloud.kubernetes.discovery.discovery-server-url</code></p>\n<p>At the moment i have this set to <code>spring.cloud.kubernetes.discovery.discovery-server-url=https://kubernetes.docker.internal:6443</code></p>\n<p>I am assuming this is incorrect and I need some help as to what is the correct url to set this to / or the correct place to find this. I thought this would be the internal url.</p>\n"},{"tags":["java","recursion","methods","binary-tree","non-static"],"comments":[{"owner":{"account_id":11683,"reputation":1438161,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1698151640,"post_id":77352156,"comment_id":136366427,"body_markdown":"I&#39;d expect the recursive calls within `inorder` to use the value you&#39;re checking against, e.g. `leftSon.inorder()` and `rightson.inorder()` - like you do for `contains`. (I&#39;d also strongly suggest you adopt a more conventional formatting style, and rename `inorder` to `inOrder` or even `printInOrder`...)","body":"I&#39;d expect the recursive calls within <code>inorder</code> to use the value you&#39;re checking against, e.g. <code>leftSon.inorder()</code> and <code>rightson.inorder()</code> - like you do for <code>contains</code>. (I&#39;d also strongly suggest you adopt a more conventional formatting style, and rename <code>inorder</code> to <code>inOrder</code> or even <code>printInOrder</code>...)"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1698151987,"post_id":77352156,"comment_id":136366488,"body_markdown":"Please describe what &quot;does not work.&quot;  What values do you get, and what did you expect to get?  Can you provide code that calls this code with sample input that shows us the error?  (In `inorder()`, you print the `value` twice.  That can&#39;t be what you want.  Print once.)","body":"Please describe what &quot;does not work.&quot;  What values do you get, and what did you expect to get?  Can you provide code that calls this code with sample input that shows us the error?  (In <code>inorder()</code>, you print the <code>value</code> twice.  That can&#39;t be what you want.  Print once.)"}],"owner":{"account_id":29646693,"reputation":21,"user_id":22721548,"display_name":"viv070788"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":0,"score":0,"last_activity_date":1698151392,"creation_date":1698151392,"question_id":77352156,"body_markdown":"I want to go through a binary tree recursive in the method public void inorder(). Afterwards I want to give out all the values which are in the binary tree. But in my case the recursive process does not work.Can somebody help?\r\n\r\nI tried to do the recursive process with a static method but of course it is not working. I do not know how can I write the recursive process different from a static method recursive method. That is may problem. Can somebody help?\r\n\r\n```\r\nclass BinaryNode {\r\n    private BinaryNode leftSon, rightSon;\r\n    private int value;\r\n\r\n    public BinaryNode(int v) {\r\n        value = v;\r\n    }\r\n\r\n    public boolean contains(int v) { \r\n        if ( ( leftSon != null) &amp; ( rightSon != null) )\r\n        if ( v == value ) return true;\r\n        else\r\n            if ( v &lt; value ) leftSon.contains( v ) ;\r\n            else rightSon.contains( v );\r\n        return false;\r\n    }\r\n\r\n    public void insert(int v) { \r\n        if ( v != value ) {\r\n            if ( v &lt; value ) {\r\n                BinaryNode links = new BinaryNode( v );\r\n            }  \r\n        } else {\r\n            BinaryNode rechts = new BinaryNode( v );\r\n        }  \r\n    }\r\n\r\n    public void inorder() { \r\n        if ( leftSon != null ) { inorder( ) ; }\r\n        System.out.println( value );\r\n        if ( rightSon != null ) { inorder( ) ; }\r\n        System.out.println( value );\r\n    }\r\n}\r\n```","title":"how to describe a recursion in an non static method. Now the recursion is not working","body":"<p>I want to go through a binary tree recursive in the method public void inorder(). Afterwards I want to give out all the values which are in the binary tree. But in my case the recursive process does not work.Can somebody help?</p>\n<p>I tried to do the recursive process with a static method but of course it is not working. I do not know how can I write the recursive process different from a static method recursive method. That is may problem. Can somebody help?</p>\n<pre><code>class BinaryNode {\n    private BinaryNode leftSon, rightSon;\n    private int value;\n\n    public BinaryNode(int v) {\n        value = v;\n    }\n\n    public boolean contains(int v) { \n        if ( ( leftSon != null) &amp; ( rightSon != null) )\n        if ( v == value ) return true;\n        else\n            if ( v &lt; value ) leftSon.contains( v ) ;\n            else rightSon.contains( v );\n        return false;\n    }\n\n    public void insert(int v) { \n        if ( v != value ) {\n            if ( v &lt; value ) {\n                BinaryNode links = new BinaryNode( v );\n            }  \n        } else {\n            BinaryNode rechts = new BinaryNode( v );\n        }  \n    }\n\n    public void inorder() { \n        if ( leftSon != null ) { inorder( ) ; }\n        System.out.println( value );\n        if ( rightSon != null ) { inorder( ) ; }\n        System.out.println( value );\n    }\n}\n</code></pre>\n"},{"tags":["java","android","react-native"],"answers":[{"tags":[],"owner":{"account_id":402229,"reputation":93994,"user_id":769265,"display_name":"David Wasser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698147219,"creation_date":1698147219,"answer_id":77351704,"question_id":77351620,"body_markdown":"Well, the manifest is definitely wrong:\r\n\r\n    &lt;activity\r\n       android:name=&quot;.MainApplication&quot;\r\n       android:label=&quot;@string/app_name&quot;\r\n       ...\r\n\r\nIt should look like this:\r\n\r\n    &lt;activity\r\n       android:name=&quot;.MainActivity&quot;\r\n       android:label=&quot;@string/app_name&quot;\r\n       ...","title":"Android app run error - Activity class .MainActivity does not exist","body":"<p>Well, the manifest is definitely wrong:</p>\n<pre><code>&lt;activity\n   android:name=&quot;.MainApplication&quot;\n   android:label=&quot;@string/app_name&quot;\n   ...\n</code></pre>\n<p>It should look like this:</p>\n<pre><code>&lt;activity\n   android:name=&quot;.MainActivity&quot;\n   android:label=&quot;@string/app_name&quot;\n   ...\n</code></pre>\n"}],"owner":{"account_id":3674701,"reputation":5784,"user_id":3061047,"accept_rate":64,"display_name":"physicsboy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698151259,"creation_date":1698146398,"question_id":77351620,"body_markdown":"I&#39;ve been building a React-Native app and all seems good when running the iOS simulator, however I am struggling to get the Android simulator to start the whole thing getting the old familiar:\r\n```\r\nStarting: Intent { cmp=com.companyname.companynameapp/.MainActivity }\r\nError type 3\r\nError: Activity class {com.companyname.companynameapp/com.companyname.companynameapp.MainActivity} \r\ndoes not exist.\r\n```\r\n\r\nI have been through all of the internet&#39;s instructions and debugging to try and get this fixed, but nothing seems to help.\r\n\r\nI believe that the app name was changed somewhat a long while ago, but this is the first proper time of trying to start it up in the Android simulator.\r\n\r\nSome of the files I have seen people ask to check are:\r\n- android/settings.gradle\r\n```\r\nrootProject.name = &#39;companyname&#39;\r\ninclude &#39;:app&#39;\r\n```\r\n- android/src/main/AndroidManifest.xml\r\n\r\nIt may be here that something has gone amiss as I noticed the `&lt;data...` entry is a different app name than what I&#39;ve seen in other places... For context, say the company name is `Proctor and Gamble`, this shortened name will be like `PG`.\r\n```\r\n&lt;application\r\n    android:name=&quot;.MainApplication&quot;\r\n    android:label=&quot;@string/app_name&quot;\r\n    ...\r\n    &lt;activity\r\n       android:name=&quot;.MainActivity&quot;\r\n       android:label=&quot;@string/app_name&quot;\r\n       ...\r\n       &lt;intent-filter&gt;\r\n           &lt;action android:name=&quot;android.intent.action.MAIN&quot;\r\n           ...\r\n           &lt;data android:scheme=&quot;shortedcompanyname-app&quot; /&gt;\r\n```\r\n- android/app/build.gradle\r\n```\r\n...\r\nandroid {\r\n    ...\r\n\r\n    namespace &quot;com.companyname.companynameapp&quot;\r\n    defaultConfig {\r\n        applicationId &quot;com.companyname.companynameapp&quot;\r\n        ...\r\n        manifestPlaceholders = [&#39;appAuthRedirectScheme&#39; : &#39;shortenedcompanyname-app&#39;]\r\n```\r\n- android/app/src/main/res/values/strings.xml\r\n```\r\n&lt;resources&gt;\r\n    &lt;string name=&quot;app_name&quot;&gt;companyname&lt;/string&gt;\r\n&lt;/resources&gt;\r\n```\r\n- android/src/main/java/com/companyname/MainActivity.java\r\n```\r\npackage com.companyname.companynameapp;\r\n...\r\npublic class MainActivity extends ReactActivity {\r\n    ...\r\n    @Override\r\n    protected String getMainComponentName() {\r\n        return &quot;companyname&quot;;\r\n    }\r\n```","title":"Android app run error - Activity class .MainActivity does not exist","body":"<p>I've been building a React-Native app and all seems good when running the iOS simulator, however I am struggling to get the Android simulator to start the whole thing getting the old familiar:</p>\n<pre><code>Starting: Intent { cmp=com.companyname.companynameapp/.MainActivity }\nError type 3\nError: Activity class {com.companyname.companynameapp/com.companyname.companynameapp.MainActivity} \ndoes not exist.\n</code></pre>\n<p>I have been through all of the internet's instructions and debugging to try and get this fixed, but nothing seems to help.</p>\n<p>I believe that the app name was changed somewhat a long while ago, but this is the first proper time of trying to start it up in the Android simulator.</p>\n<p>Some of the files I have seen people ask to check are:</p>\n<ul>\n<li>android/settings.gradle</li>\n</ul>\n<pre><code>rootProject.name = 'companyname'\ninclude ':app'\n</code></pre>\n<ul>\n<li>android/src/main/AndroidManifest.xml</li>\n</ul>\n<p>It may be here that something has gone amiss as I noticed the <code>&lt;data...</code> entry is a different app name than what I've seen in other places... For context, say the company name is <code>Proctor and Gamble</code>, this shortened name will be like <code>PG</code>.</p>\n<pre><code>&lt;application\n    android:name=&quot;.MainApplication&quot;\n    android:label=&quot;@string/app_name&quot;\n    ...\n    &lt;activity\n       android:name=&quot;.MainActivity&quot;\n       android:label=&quot;@string/app_name&quot;\n       ...\n       &lt;intent-filter&gt;\n           &lt;action android:name=&quot;android.intent.action.MAIN&quot;\n           ...\n           &lt;data android:scheme=&quot;shortedcompanyname-app&quot; /&gt;\n</code></pre>\n<ul>\n<li>android/app/build.gradle</li>\n</ul>\n<pre><code>...\nandroid {\n    ...\n\n    namespace &quot;com.companyname.companynameapp&quot;\n    defaultConfig {\n        applicationId &quot;com.companyname.companynameapp&quot;\n        ...\n        manifestPlaceholders = ['appAuthRedirectScheme' : 'shortenedcompanyname-app']\n</code></pre>\n<ul>\n<li>android/app/src/main/res/values/strings.xml</li>\n</ul>\n<pre><code>&lt;resources&gt;\n    &lt;string name=&quot;app_name&quot;&gt;companyname&lt;/string&gt;\n&lt;/resources&gt;\n</code></pre>\n<ul>\n<li>android/src/main/java/com/companyname/MainActivity.java</li>\n</ul>\n<pre><code>package com.companyname.companynameapp;\n...\npublic class MainActivity extends ReactActivity {\n    ...\n    @Override\n    protected String getMainComponentName() {\n        return &quot;companyname&quot;;\n    }\n</code></pre>\n"},{"tags":["java","spring","rabbitmq","microservices","spring-rabbit"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698151169,"creation_date":1698151169,"answer_id":77352128,"question_id":77351611,"body_markdown":"You can&#39;t consume from an exchange; you have to consume from a queue; declare  a queue and bind it to the exchange with a routing key.\r\n\r\nA `DirectExchange` will need a binding for each `restaurantId`. With a `TopicExchange`, you can bind with a single routing key `#` which is a wildcard for &quot;all&quot;.\r\n\r\nSee https://docs.spring.io/spring-amqp/docs/current/reference/html/#binding\r\n\r\n```java\r\nBinding b = BindingBuilder.bind(someQueue).to(someTopicExchange).with(&quot;#&quot;);\r\n```\r\nSee the RabbitMQ tutorials to understand different exchange types.\r\n\r\nhttps://www.rabbitmq.com/getstarted.html\r\n\r\nThere are Spring AMQP versions of the tutorials there.","title":"How to correctly send and receive messages with RabbitMQ (message gets sent but not handled ?)","body":"<p>You can't consume from an exchange; you have to consume from a queue; declare  a queue and bind it to the exchange with a routing key.</p>\n<p>A <code>DirectExchange</code> will need a binding for each <code>restaurantId</code>. With a <code>TopicExchange</code>, you can bind with a single routing key <code>#</code> which is a wildcard for &quot;all&quot;.</p>\n<p>See <a href=\"https://docs.spring.io/spring-amqp/docs/current/reference/html/#binding\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-amqp/docs/current/reference/html/#binding</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>Binding b = BindingBuilder.bind(someQueue).to(someTopicExchange).with(&quot;#&quot;);\n</code></pre>\n<p>See the RabbitMQ tutorials to understand different exchange types.</p>\n<p><a href=\"https://www.rabbitmq.com/getstarted.html\" rel=\"nofollow noreferrer\">https://www.rabbitmq.com/getstarted.html</a></p>\n<p>There are Spring AMQP versions of the tutorials there.</p>\n"}],"owner":{"account_id":16475285,"reputation":65,"user_id":11903423,"display_name":"spozzi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698151169,"creation_date":1698146282,"question_id":77351611,"body_markdown":"I set up RabitMQ in a microservices environment. I have a config file as follows:\r\n\r\n    @Configuration\r\n    public class RabbitMQConfig {\r\n    \r\n        @Bean\r\n        public DirectExchange restaurantScoreExchange() {\r\n            return new DirectExchange(&quot;restaurant-score-exchange&quot;);\r\n        }\r\n    }\r\n\r\nThe Producer is set up like this:\r\n\r\n    @Component\r\n    @Import(RabbitMQConfig.class)\r\n    public class RabbitMQMessageProducer {\r\n    \r\n        private final AmqpTemplate rabbitTemplate;\r\n    \r\n        @Autowired\r\n        public RabbitMQMessageProducer(AmqpTemplate rabbitTemplate) {\r\n            this.rabbitTemplate = rabbitTemplate;\r\n        }\r\n    \r\n        public void sendUpdateMessage(Long restaurantId, String message) {\r\n            // Send the message with a routing key indicating the restaurant ID\r\n            rabbitTemplate.convertAndSend(&quot;restaurant-score-exchange&quot;, restaurantId.toString(), message);\r\n        }\r\n    }\r\n\r\nThe controller that calls on the producer looks like this:\r\n\r\n    @Autowired\r\n    private final RabbitMQMessageProducer rabbitMQMessageProducer;\r\n\r\n    void randomMethod() {\r\n        ...\r\n        rabbitMQMessageProducer.sendUpdateMessage(newUser.getFavoriteRestaurantId(), &quot;newUser&quot;);\r\n        ...\r\n    }\r\n\r\nThe receiver (which is in another microservice) has the same config class and looks like this:\r\n\r\n    @Component\r\n    @Import(RabbitMQConfig.class)\r\n    public class RabbitMQMessageReceiver {\r\n    \r\n        private final ObjectMapper objectMapper;\r\n    \r\n        public RabbitMQMessageReceiver(ObjectMapper objectMapper) {\r\n            this.objectMapper = objectMapper;\r\n        }\r\n    \r\n        @RabbitListener(queues = &quot;restaurant-score-exchange&quot;)\r\n        public void handleMessage(String message) {\r\n            try {\r\n                JsonNode messageJson = objectMapper.readTree(message);\r\n    \r\n                Long restaurantId = messageJson.get(&quot;restaurantId&quot;).asLong();\r\n    \r\n                // Implement the logic to update the score for the respective restaurant\r\n            } catch (Exception e) {\r\n                System.err.println(&quot;Error handling message: &quot; + e.getMessage());\r\n            }\r\n        }\r\n    }\r\n\r\nThis is my first time playing around with message producers. The message is sent but it does not seem to get handled as I put a breakpoint in it and that does not get triggered. \r\n\r\nI&#39;ve been reading and trying to fix the issue but to no success. Thanks for your time\r\n\r\n","title":"How to correctly send and receive messages with RabbitMQ (message gets sent but not handled ?)","body":"<p>I set up RabitMQ in a microservices environment. I have a config file as follows:</p>\n<pre><code>@Configuration\npublic class RabbitMQConfig {\n\n    @Bean\n    public DirectExchange restaurantScoreExchange() {\n        return new DirectExchange(&quot;restaurant-score-exchange&quot;);\n    }\n}\n</code></pre>\n<p>The Producer is set up like this:</p>\n<pre><code>@Component\n@Import(RabbitMQConfig.class)\npublic class RabbitMQMessageProducer {\n\n    private final AmqpTemplate rabbitTemplate;\n\n    @Autowired\n    public RabbitMQMessageProducer(AmqpTemplate rabbitTemplate) {\n        this.rabbitTemplate = rabbitTemplate;\n    }\n\n    public void sendUpdateMessage(Long restaurantId, String message) {\n        // Send the message with a routing key indicating the restaurant ID\n        rabbitTemplate.convertAndSend(&quot;restaurant-score-exchange&quot;, restaurantId.toString(), message);\n    }\n}\n</code></pre>\n<p>The controller that calls on the producer looks like this:</p>\n<pre><code>@Autowired\nprivate final RabbitMQMessageProducer rabbitMQMessageProducer;\n\nvoid randomMethod() {\n    ...\n    rabbitMQMessageProducer.sendUpdateMessage(newUser.getFavoriteRestaurantId(), &quot;newUser&quot;);\n    ...\n}\n</code></pre>\n<p>The receiver (which is in another microservice) has the same config class and looks like this:</p>\n<pre><code>@Component\n@Import(RabbitMQConfig.class)\npublic class RabbitMQMessageReceiver {\n\n    private final ObjectMapper objectMapper;\n\n    public RabbitMQMessageReceiver(ObjectMapper objectMapper) {\n        this.objectMapper = objectMapper;\n    }\n\n    @RabbitListener(queues = &quot;restaurant-score-exchange&quot;)\n    public void handleMessage(String message) {\n        try {\n            JsonNode messageJson = objectMapper.readTree(message);\n\n            Long restaurantId = messageJson.get(&quot;restaurantId&quot;).asLong();\n\n            // Implement the logic to update the score for the respective restaurant\n        } catch (Exception e) {\n            System.err.println(&quot;Error handling message: &quot; + e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>This is my first time playing around with message producers. The message is sent but it does not seem to get handled as I put a breakpoint in it and that does not get triggered.</p>\n<p>I've been reading and trying to fix the issue but to no success. Thanks for your time</p>\n"},{"tags":["java","algorithm","data-structures"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1698128318,"post_id":77349798,"comment_id":136362363,"body_markdown":"You might need to use the `||` (&quot;or&quot;) operator.","body":"You might need to use the <code>||</code> (&quot;or&quot;) operator."}],"answers":[{"tags":[],"owner":{"account_id":10259286,"reputation":3326,"user_id":19090048,"display_name":"mandy8055"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698138591,"creation_date":1698130820,"answer_id":77350073,"question_id":77349798,"body_markdown":"As mentioned by *[@dawood-ibn-kareem](https://stackoverflow.com/users/1081110/dawood-ibn-kareem)* to use `||`; you can use it something like:\r\n\r\n```java\r\nimport java.util.*;\r\n\r\npublic class Hello {\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        long n = sc.nextInt();\r\n        \r\n        if (n % 8 == 1) {\r\n            System.out.print(&quot;thumb&quot;);\r\n        } else if (n % 8 == 5) {\r\n            System.out.print(&quot;little&quot;);\r\n        } else if (n % 4 == 3) {\r\n            System.out.print(&quot;middle&quot;);\r\n        } else if (n % 8 == 2 || n % 8 == 0) {\r\n            System.out.print(&quot;index&quot;);\r\n        } else if (n % 8 == 4 || n % 8 == 6) {\r\n            System.out.print(&quot;ring&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"Finger Counting Problem to find the name of the finger based on the given number","body":"<p>As mentioned by <em><a href=\"https://stackoverflow.com/users/1081110/dawood-ibn-kareem\">@dawood-ibn-kareem</a></em> to use <code>||</code>; you can use it something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class Hello {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        long n = sc.nextInt();\n        \n        if (n % 8 == 1) {\n            System.out.print(&quot;thumb&quot;);\n        } else if (n % 8 == 5) {\n            System.out.print(&quot;little&quot;);\n        } else if (n % 4 == 3) {\n            System.out.print(&quot;middle&quot;);\n        } else if (n % 8 == 2 || n % 8 == 0) {\n            System.out.print(&quot;index&quot;);\n        } else if (n % 8 == 4 || n % 8 == 6) {\n            System.out.print(&quot;ring&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":94036,"reputation":107726,"user_id":256970,"accept_rate":86,"display_name":"Cary Swoveland"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698138291,"creation_date":1698138291,"answer_id":77350773,"question_id":77349798,"body_markdown":"I don&#39;t see @dawood-ibn-kareem&#39;s comment, but here&#39;s way of thinking about it. Suppose the hand has 9 fingers, denoted:\r\n\r\n- T for thumb\r\n- L for little finger\r\n- IF for index finger when counting from T to L\r\n- IB for index finger when counting from L to T\r\n- MF for middle finger when counting from T to L\r\n- MB for middle finger when counting from L to T\r\n- RF for ring finger when counting from T to L\r\n- RB for ring finger when counting from L to T\r\n\r\nThen the counts landing on each finger are as follows.\r\n\r\n- T:  1,  9, 17, 25,... or n when n % 8 = 1\r\n- IF: 2, 10, 18, 26,... or n when n % 8 = 2\r\n- MF: 3, 11, 19, 27,... or n when n % 8 = 3\r\n- RF: 4, 12, 20, 28,... or n when n % 8 = 4\r\n- L:  5, 13, 21, 29,... or n when n % 8 = 5\r\n- RB: 6, 14, 22, 30,... or n when n % 8 = 6\r\n- MB: 7, 15, 23, 31,... or n when n % 8 = 7\r\n- IB: 8, 16, 24, 32,... or n when n % 8 = 0\r\n\r\nWe could then construct a hashmap (sorry, I don&#39;t know Java) to map `n % 8` to the finger landed upon:\r\n\r\n    { 0 = I, 1 = T, 2 = I, 3 = M, 4 = R, 5 = L, 6 = R, 7 = M }\r\n\r\nIf this hashmap were `hash_map`, one could identify the finger when, for example, `n = 322`:\r\n\r\n    hash_map.get(322 % 8) #=&gt; hash_map.get(2) #=&gt; &#39;I&#39;","title":"Finger Counting Problem to find the name of the finger based on the given number","body":"<p>I don't see @dawood-ibn-kareem's comment, but here's way of thinking about it. Suppose the hand has 9 fingers, denoted:</p>\n<ul>\n<li>T for thumb</li>\n<li>L for little finger</li>\n<li>IF for index finger when counting from T to L</li>\n<li>IB for index finger when counting from L to T</li>\n<li>MF for middle finger when counting from T to L</li>\n<li>MB for middle finger when counting from L to T</li>\n<li>RF for ring finger when counting from T to L</li>\n<li>RB for ring finger when counting from L to T</li>\n</ul>\n<p>Then the counts landing on each finger are as follows.</p>\n<ul>\n<li>T:  1,  9, 17, 25,... or n when n % 8 = 1</li>\n<li>IF: 2, 10, 18, 26,... or n when n % 8 = 2</li>\n<li>MF: 3, 11, 19, 27,... or n when n % 8 = 3</li>\n<li>RF: 4, 12, 20, 28,... or n when n % 8 = 4</li>\n<li>L:  5, 13, 21, 29,... or n when n % 8 = 5</li>\n<li>RB: 6, 14, 22, 30,... or n when n % 8 = 6</li>\n<li>MB: 7, 15, 23, 31,... or n when n % 8 = 7</li>\n<li>IB: 8, 16, 24, 32,... or n when n % 8 = 0</li>\n</ul>\n<p>We could then construct a hashmap (sorry, I don't know Java) to map <code>n % 8</code> to the finger landed upon:</p>\n<pre><code>{ 0 = I, 1 = T, 2 = I, 3 = M, 4 = R, 5 = L, 6 = R, 7 = M }\n</code></pre>\n<p>If this hashmap were <code>hash_map</code>, one could identify the finger when, for example, <code>n = 322</code>:</p>\n<pre><code>hash_map.get(322 % 8) #=&gt; hash_map.get(2) #=&gt; 'I'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17386577,"reputation":3141,"user_id":12597781,"display_name":"Christopher Miller"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698151102,"creation_date":1698151102,"answer_id":77352118,"question_id":77349798,"body_markdown":"This should just be some `if-else` logic with the `||` operator. You can use an array of strings to make the code even more concise.","title":"Finger Counting Problem to find the name of the finger based on the given number","body":"<p>This should just be some <code>if-else</code> logic with the <code>||</code> operator. You can use an array of strings to make the code even more concise.</p>\n"}],"owner":{"account_id":24461141,"reputation":3,"user_id":18382139,"display_name":"Tagore E"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77350073,"answer_count":3,"score":0,"last_activity_date":1698151102,"creation_date":1698127027,"question_id":77349798,"body_markdown":"A boy starts counting using her left hands fingers. The counting sequence is like 1-thumb, 2-index finger, 3-middle finger, 4-ring finger, 5-little finger then in the reverse order like 6-ring finger, 7-middle  finger, 8-index  finger, 9 thumb. Then again 10-index finger and so on. The program must print the last finger used for counting for a given value of N. The fingers names are thumb, index, middle, ring and little.\r\n\r\nI found the answer for thumb finger, index finger and the little finger. But I couldnt find the patter for the index and the ring finger. below is the code that i have tried. \r\n\r\n```\r\nimport java.util.*;\r\npublic class Hello {\r\n\r\n    public static void main(String[] args) {\r\n\t\t//Your Code Here\r\n\t\tScanner sc=new Scanner(System.in);\r\n\t\tlong n=sc.nextInt();\r\n\t\t\r\n\t\tif(n%8 == 1) System.out.print(&quot;thumb&quot;);\r\n\t\telse if(n%8 == 5) System.out.print(&quot;little&quot;);\r\n\t\telse if(n%4 == 3) System.out.print(&quot;middle&quot;);\r\n\t\telse {\r\n\t\t  // logic for index and ring finger.\r\n\t\t}\r\n\r\n\t}\r\n}\r\n```\r\n\r\nsomeone please help me to finish the logic.\r\n\r\n","title":"Finger Counting Problem to find the name of the finger based on the given number","body":"<p>A boy starts counting using her left hands fingers. The counting sequence is like 1-thumb, 2-index finger, 3-middle finger, 4-ring finger, 5-little finger then in the reverse order like 6-ring finger, 7-middle  finger, 8-index  finger, 9 thumb. Then again 10-index finger and so on. The program must print the last finger used for counting for a given value of N. The fingers names are thumb, index, middle, ring and little.</p>\n<p>I found the answer for thumb finger, index finger and the little finger. But I couldnt find the patter for the index and the ring finger. below is the code that i have tried.</p>\n<pre><code>import java.util.*;\npublic class Hello {\n\n    public static void main(String[] args) {\n        //Your Code Here\n        Scanner sc=new Scanner(System.in);\n        long n=sc.nextInt();\n        \n        if(n%8 == 1) System.out.print(&quot;thumb&quot;);\n        else if(n%8 == 5) System.out.print(&quot;little&quot;);\n        else if(n%4 == 3) System.out.print(&quot;middle&quot;);\n        else {\n          // logic for index and ring finger.\n        }\n\n    }\n}\n</code></pre>\n<p>someone please help me to finish the logic.</p>\n"},{"tags":["java","hibernate","entitymanager"],"owner":{"account_id":29742484,"reputation":11,"user_id":22794449,"display_name":"BackflipMorris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1698151012,"creation_date":1698149392,"question_id":77351927,"body_markdown":"I am working with Hibernate in Java and have come across an issue related to the entityManager.merge() operation. I have the following entity class:\r\n\r\n```\r\n@Entity\r\n@Table(name=&quot;manufacturingitem&quot;)\r\npublic class ManufacturingItem extends AbstractDocumentItem {\r\n\r\n    private long parentId;\r\n\r\n    @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    @JoinColumn(name = &quot;parentId&quot;)\r\n    private List&lt;ManufacturingItem&gt; subItems = new ArrayList&lt;&gt;();\r\n}\r\n```\r\n\r\nThe main use-case for the parentId is to establish a recursive bill of materials for manufacturing items in my inventory management system.\r\n\r\nWhen I try to add a ManufacturingItem using entityManager.persist(), it works as expected and the item gets saved to the database. However, when I attempt to use entityManager.merge(), I am encountering the following error:\r\n\r\nan assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: null identifier for collection of role (document.disposal.manufacturing.model.ManufacturingItem.subItems)\r\norg.hibernate.AssertionFailure: null identifier for collection of role (document.disposal.manufacturing.model.ManufacturingItem.subItems)\r\n        at org.hibernate.engine.spi.CollectionKey.&lt;init&gt;(CollectionKey.java:47)\r\n        at org.hibernate.engine.spi.CollectionKey.&lt;init&gt;(CollectionKey.java:32)\r\n        at org.hibernate.event.internal.WrapVisitor.processArrayOrNewCollection(WrapVisitor.java:126)\r\n        at org.hibernate.event.internal.WrapVisitor.processCollection(WrapVisitor.java:74)\r\n        at org.hibernate.event.internal.AbstractVisitor.processValue(AbstractVisitor.java:92)\r\n        at org.hibernate.event.internal.WrapVisitor.processValue(WrapVisitor.java:161)\r\n        at org.hibernate.event.internal.AbstractVisitor.processEntityPropertyValues(AbstractVisitor.java:53)\r\n        at org.hibernate.event.internal.AbstractSaveEventListener.visitCollectionsBeforeSave(AbstractSaveEventListener.java:404)\r\n        at org.hibernate.event.internal.AbstractSaveEventListener.cloneAndSubstituteValues(AbstractSaveEventListener.java:329)\r\n        at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:278)\r\n        at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:180)\r\n        at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:140)\r\n        at org.hibernate.event.internal.DefaultMergeEventListener.saveTransientEntity(DefaultMergeEventListener.java:314)\r\n        at org.hibernate.event.internal.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:233)\r\n        at org.hibernate.event.internal.DefaultMergeEventListener.merge(DefaultMergeEventListener.java:152)\r\n        at org.hibernate.event.internal.DefaultMergeEventListener.doMerge(DefaultMergeEventListener.java:142)\r\n        at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:122)\r\n        at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)\r\n        at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:869)\r\n        at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:840)\r\n        at org.hibernate.engine.spi.CascadingActions$6.cascade(CascadingActions.java:253)\r\n        at org.hibernate.engine.spi.CascadingActions$6.cascade(CascadingActions.java:243)\r\n        at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:513)\r\n        at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:434)\r\n        at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:220)\r\n        at org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:547)\r\n        at org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:477)\r\n        at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:437)\r\n        at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:220)\r\n        at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:153)\r\n        at org.hibernate.event.internal.DefaultMergeEventListener.cascadeOnMerge(DefaultMergeEventListener.java:571)\r\n        at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:354)\r\n        at org.hibernate.event.internal.DefaultMergeEventListener.merge(DefaultMergeEventListener.java:149)\r\n        at org.hibernate.event.internal.DefaultMergeEventListener.doMerge(DefaultMergeEventListener.java:142)\r\n        at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:122)\r\n        at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:80)\r\n        at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n        at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:848)\r\n        at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:834)\r\n\r\nFrom the error message, it seems like there&#39;s an issue related to the subItems collection having a null identifier. However, I am unsure of how to approach this problem.\r\n\r\nI tried to change the FetchType and cascadeType.\r\n\r\nHas anyone faced a similar issue or have any insights into what might be causing this error and how to resolve it?\r\n","title":"Hibernate: AssertionFailure on entityManager.merge() due to null identifier for collection","body":"<p>I am working with Hibernate in Java and have come across an issue related to the entityManager.merge() operation. I have the following entity class:</p>\n<pre><code>@Entity\n@Table(name=&quot;manufacturingitem&quot;)\npublic class ManufacturingItem extends AbstractDocumentItem {\n\n    private long parentId;\n\n    @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL, orphanRemoval = true)\n    @JoinColumn(name = &quot;parentId&quot;)\n    private List&lt;ManufacturingItem&gt; subItems = new ArrayList&lt;&gt;();\n}\n</code></pre>\n<p>The main use-case for the parentId is to establish a recursive bill of materials for manufacturing items in my inventory management system.</p>\n<p>When I try to add a ManufacturingItem using entityManager.persist(), it works as expected and the item gets saved to the database. However, when I attempt to use entityManager.merge(), I am encountering the following error:</p>\n<p>an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: null identifier for collection of role (document.disposal.manufacturing.model.ManufacturingItem.subItems)\norg.hibernate.AssertionFailure: null identifier for collection of role (document.disposal.manufacturing.model.ManufacturingItem.subItems)\nat org.hibernate.engine.spi.CollectionKey.(CollectionKey.java:47)\nat org.hibernate.engine.spi.CollectionKey.(CollectionKey.java:32)\nat org.hibernate.event.internal.WrapVisitor.processArrayOrNewCollection(WrapVisitor.java:126)\nat org.hibernate.event.internal.WrapVisitor.processCollection(WrapVisitor.java:74)\nat org.hibernate.event.internal.AbstractVisitor.processValue(AbstractVisitor.java:92)\nat org.hibernate.event.internal.WrapVisitor.processValue(WrapVisitor.java:161)\nat org.hibernate.event.internal.AbstractVisitor.processEntityPropertyValues(AbstractVisitor.java:53)\nat org.hibernate.event.internal.AbstractSaveEventListener.visitCollectionsBeforeSave(AbstractSaveEventListener.java:404)\nat org.hibernate.event.internal.AbstractSaveEventListener.cloneAndSubstituteValues(AbstractSaveEventListener.java:329)\nat org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:278)\nat org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:180)\nat org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:140)\nat org.hibernate.event.internal.DefaultMergeEventListener.saveTransientEntity(DefaultMergeEventListener.java:314)\nat org.hibernate.event.internal.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:233)\nat org.hibernate.event.internal.DefaultMergeEventListener.merge(DefaultMergeEventListener.java:152)\nat org.hibernate.event.internal.DefaultMergeEventListener.doMerge(DefaultMergeEventListener.java:142)\nat org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:122)\nat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138)\nat org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:869)\nat org.hibernate.internal.SessionImpl.merge(SessionImpl.java:840)\nat org.hibernate.engine.spi.CascadingActions$6.cascade(CascadingActions.java:253)\nat org.hibernate.engine.spi.CascadingActions$6.cascade(CascadingActions.java:243)\nat org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:513)\nat org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:434)\nat org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:220)\nat org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:547)\nat org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:477)\nat org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:437)\nat org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:220)\nat org.hibernate.engine.internal.Cascade.cascade(Cascade.java:153)\nat org.hibernate.event.internal.DefaultMergeEventListener.cascadeOnMerge(DefaultMergeEventListener.java:571)\nat org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:354)\nat org.hibernate.event.internal.DefaultMergeEventListener.merge(DefaultMergeEventListener.java:149)\nat org.hibernate.event.internal.DefaultMergeEventListener.doMerge(DefaultMergeEventListener.java:142)\nat org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:122)\nat org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:80)\nat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\nat org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:848)\nat org.hibernate.internal.SessionImpl.merge(SessionImpl.java:834)</p>\n<p>From the error message, it seems like there's an issue related to the subItems collection having a null identifier. However, I am unsure of how to approach this problem.</p>\n<p>I tried to change the FetchType and cascadeType.</p>\n<p>Has anyone faced a similar issue or have any insights into what might be causing this error and how to resolve it?</p>\n"},{"tags":["java","intellij-idea","checkstyle"],"comments":[{"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"score":0,"creation_date":1698144628,"post_id":77350293,"comment_id":136365174,"body_markdown":"Could you please share xml with code style that you importing?","body":"Could you please share xml with code style that you importing?"}],"owner":{"account_id":10799486,"reputation":141,"user_id":7943991,"display_name":"Sabi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698150750,"creation_date":1698133474,"question_id":77350293,"body_markdown":"I try to recreate the default code style from IntelliJ to a checkstyle.xml file. As mentioned here https://stackoverflow.com/questions/32371967/use-intellij-code-style-in-checkstyle there is no quick option so I try to rebuild it step by step. I&#39;m quite close but I struggle with the settings for line wrapping. As there is the option `NoLineWrap` from checkstyle the lines got cut nevertheless. Also, a look in the settings proves that the statements were ignored. As you can see in the screenshot there is still &#39;wrap if long&#39; for many options although I added the following to the XML file:  \r\n\r\n     &lt;module name=&quot;NoLineWrap&quot;&gt;\r\n                &lt;property name=&quot;tokens&quot;\r\n                          value=&quot;PACKAGE_DEF, IMPORT, STATIC_IMPORT, ENUM_DEF, CLASS_DEF , METHOD_DEF , INTERFACE_DEF, COMPACT_CTOR_DEF&quot;/&gt;\r\n     &lt;/module&gt;\r\n\r\n[![Settings IntelliJ own style sheet][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/B6Xj9.png\r\n\r\n\r\n\r\n\r\nCan somebody help me with my problem? \r\n\r\n\r\n\r\n\r\n--------------\r\n*Edit:* My complete checkstyle.xml:\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;!DOCTYPE module PUBLIC\r\n        &quot;-//Checkstyle//DTD Checkstyle Configuration 1.3//EN&quot;\r\n        &quot;https://checkstyle.org/dtds/configuration_1_3.dtd&quot;&gt;\r\n    &lt;module name=&quot;Checker&quot;&gt;\r\n    &lt;module name=&quot;SuppressWarningsFilter&quot;/&gt;\r\n\r\n    &lt;property name=&quot;charset&quot; value=&quot;UTF-8&quot;/&gt;\r\n\r\n    &lt;property name=&quot;severity&quot; value=&quot;warning&quot;/&gt;\r\n\r\n    &lt;property name=&quot;fileExtensions&quot; value=&quot;java, properties, xml&quot;/&gt;\r\n    &lt;!-- Excludes all &#39;module-info.java&#39; files              --&gt;\r\n    &lt;!-- See https://checkstyle.org/filefilters/index.html --&gt;\r\n    &lt;module name=&quot;BeforeExecutionExclusionFileFilter&quot;&gt;\r\n        &lt;property name=&quot;fileNamePattern&quot; value=&quot;module\\-info\\.java$&quot;/&gt;\r\n    &lt;/module&gt;\r\n    &lt;!-- https://checkstyle.org/filters/suppressionfilter.html --&gt;\r\n    &lt;module name=&quot;SuppressionFilter&quot;&gt;\r\n        &lt;property name=&quot;file&quot; value=&quot;${org.checkstyle.google.suppressionfilter.config}&quot;\r\n                  default=&quot;checkstyle-suppressions.xml&quot;/&gt;\r\n        &lt;property name=&quot;optional&quot; value=&quot;true&quot;/&gt;\r\n    &lt;/module&gt;\r\n\r\n    &lt;!-- Checks for whitespace                               --&gt;\r\n    &lt;!-- See http://checkstyle.org/checks/whitespace/index.html --&gt;\r\n    &lt;module name=&quot;FileTabCharacter&quot;&gt;\r\n        &lt;property name=&quot;eachLine&quot; value=&quot;true&quot;/&gt;\r\n    &lt;/module&gt;\r\n\r\n    &lt;module name=&quot;LineLength&quot;&gt;\r\n        &lt;property name=&quot;fileExtensions&quot; value=&quot;java&quot;/&gt;\r\n        &lt;property name=&quot;max&quot; value=&quot;120&quot;/&gt;\r\n        &lt;property name=&quot;ignorePattern&quot; value=&quot;^package.*|^import.*|a href|href|http://|https://|ftp://&quot;/&gt;\r\n    &lt;/module&gt;\r\n\r\n    &lt;module name=&quot;TreeWalker&quot;&gt;\r\n        &lt;module name=&quot;OuterTypeFilename&quot;/&gt;\r\n        &lt;module name=&quot;IllegalTokenText&quot;&gt;\r\n            &lt;property name=&quot;tokens&quot; value=&quot;STRING_LITERAL, CHAR_LITERAL&quot;/&gt;\r\n            &lt;property name=&quot;format&quot;\r\n                      value=&quot;\\\\u00(09|0(a|A)|0(c|C)|0(d|D)|22|27|5(C|c))|\\\\(0(10|11|12|14|15|42|47)|134)&quot;/&gt;\r\n            &lt;property name=&quot;message&quot;\r\n                      value=&quot;Consider using special escape sequence instead of octal value or Unicode escaped value.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;AvoidEscapedUnicodeCharacters&quot;&gt;\r\n            &lt;property name=&quot;allowEscapesForControlCharacters&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;allowByTailComment&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;allowNonPrintableEscapes&quot; value=&quot;true&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;AvoidStarImport&quot;/&gt;\r\n        &lt;module name=&quot;OneTopLevelClass&quot;/&gt;\r\n\r\n        &lt;module name=&quot;EmptyBlock&quot;&gt;\r\n            &lt;property name=&quot;option&quot; value=&quot;TEXT&quot;/&gt;\r\n            &lt;property name=&quot;tokens&quot;\r\n                      value=&quot;LITERAL_TRY, LITERAL_FINALLY, LITERAL_IF, LITERAL_ELSE, LITERAL_SWITCH&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;NeedBraces&quot;&gt;\r\n            &lt;property name=&quot;tokens&quot;\r\n                      value=&quot;LITERAL_DO, LITERAL_ELSE, LITERAL_FOR, LITERAL_IF, LITERAL_WHILE&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;LeftCurly&quot;&gt;\r\n            &lt;property name=&quot;tokens&quot;\r\n                      value=&quot;ANNOTATION_DEF, CLASS_DEF, CTOR_DEF, ENUM_CONSTANT_DEF, ENUM_DEF,\r\n                    INTERFACE_DEF, LAMBDA, LITERAL_CASE, LITERAL_CATCH, LITERAL_DEFAULT,\r\n                    LITERAL_DO, LITERAL_ELSE, LITERAL_FINALLY, LITERAL_FOR, LITERAL_IF,\r\n                    LITERAL_SWITCH, LITERAL_SYNCHRONIZED, LITERAL_TRY, LITERAL_WHILE, METHOD_DEF,\r\n                    OBJBLOCK, STATIC_INIT, RECORD_DEF, COMPACT_CTOR_DEF&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;RightCurly&quot;&gt;\r\n            &lt;property name=&quot;id&quot; value=&quot;RightCurlySame&quot;/&gt;\r\n            &lt;property name=&quot;tokens&quot;\r\n                      value=&quot;LITERAL_TRY, LITERAL_CATCH, LITERAL_FINALLY, LITERAL_IF, LITERAL_ELSE,\r\n                    LITERAL_DO&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;RightCurly&quot;&gt;\r\n            &lt;property name=&quot;id&quot; value=&quot;RightCurlyAlone&quot;/&gt;\r\n            &lt;property name=&quot;option&quot; value=&quot;alone&quot;/&gt;\r\n            &lt;property name=&quot;tokens&quot;\r\n                      value=&quot;CLASS_DEF, METHOD_DEF, CTOR_DEF, LITERAL_FOR, LITERAL_WHILE, STATIC_INIT,\r\n                    INSTANCE_INIT, ANNOTATION_DEF, ENUM_DEF, INTERFACE_DEF, RECORD_DEF,\r\n                    COMPACT_CTOR_DEF, LITERAL_SWITCH&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;SuppressionXpathSingleFilter&quot;&gt;\r\n            &lt;!-- suppresion is required till https://github.com/checkstyle/checkstyle/issues/7541 --&gt;\r\n            &lt;property name=&quot;id&quot; value=&quot;RightCurlyAlone&quot;/&gt;\r\n            &lt;property name=&quot;query&quot; value=&quot;//RCURLY[parent::SLIST[count(./*)=1]\r\n                                     or preceding-sibling::*[last()][self::LCURLY]]&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;WhitespaceAfter&quot;&gt;\r\n            &lt;property name=&quot;tokens&quot;\r\n                      value=&quot;COMMA, SEMI, TYPECAST, LITERAL_IF, LITERAL_ELSE, LITERAL_RETURN,\r\n                    LITERAL_WHILE, LITERAL_DO, LITERAL_FOR, LITERAL_FINALLY, DO_WHILE, ELLIPSIS,\r\n                    LITERAL_SWITCH, LITERAL_SYNCHRONIZED, LITERAL_TRY, LITERAL_CATCH, LAMBDA,\r\n                    LITERAL_YIELD, LITERAL_CASE&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;WhitespaceAround&quot;&gt;\r\n            &lt;property name=&quot;allowEmptyConstructors&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;allowEmptyLambdas&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;allowEmptyMethods&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;allowEmptyTypes&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;allowEmptyLoops&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;ignoreEnhancedForColon&quot; value=&quot;false&quot;/&gt;\r\n            &lt;property name=&quot;tokens&quot;\r\n                      value=&quot;ASSIGN, BAND, BAND_ASSIGN, BOR, BOR_ASSIGN, BSR, BSR_ASSIGN, BXOR,\r\n                    BXOR_ASSIGN, COLON, DIV, DIV_ASSIGN, DO_WHILE, EQUAL, GE, GT, LAMBDA, LAND,\r\n                    LCURLY, LE, LITERAL_CATCH, LITERAL_DO, LITERAL_ELSE, LITERAL_FINALLY,\r\n                    LITERAL_FOR, LITERAL_IF, LITERAL_RETURN, LITERAL_SWITCH, LITERAL_SYNCHRONIZED,\r\n                    LITERAL_TRY, LITERAL_WHILE, LOR, LT, MINUS, MINUS_ASSIGN, MOD, MOD_ASSIGN,\r\n                    NOT_EQUAL, PLUS, PLUS_ASSIGN, QUESTION, RCURLY, SL, SLIST, SL_ASSIGN, SR,\r\n                    SR_ASSIGN, STAR, STAR_ASSIGN, LITERAL_ASSERT, TYPE_EXTENSION_AND&quot;/&gt;\r\n            &lt;message key=&quot;ws.notFollowed&quot;\r\n                     value=&quot;WhitespaceAround: &#39;&#39;{0}&#39;&#39; is not followed by whitespace. Empty blocks\r\n               may only be represented as &#39;{}&#39; when not part of a multi-block statement (4.1.3)&quot;/&gt;\r\n            &lt;message key=&quot;ws.notPreceded&quot;\r\n                     value=&quot;WhitespaceAround: &#39;&#39;{0}&#39;&#39; is not preceded with whitespace.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;OneStatementPerLine&quot;/&gt;\r\n        &lt;module name=&quot;MultipleVariableDeclarations&quot;/&gt;\r\n        &lt;module name=&quot;ArrayTypeStyle&quot;/&gt;\r\n        &lt;module name=&quot;MissingSwitchDefault&quot;/&gt;\r\n        &lt;module name=&quot;FallThrough&quot;/&gt;\r\n        &lt;module name=&quot;UpperEll&quot;/&gt;\r\n        &lt;module name=&quot;ModifierOrder&quot;/&gt;\r\n        &lt;module name=&quot;EmptyLineSeparator&quot;&gt;\r\n            &lt;property name=&quot;tokens&quot;\r\n                      value=&quot;PACKAGE_DEF, IMPORT, STATIC_IMPORT, CLASS_DEF, INTERFACE_DEF, ENUM_DEF,\r\n                    STATIC_INIT, INSTANCE_INIT, METHOD_DEF, CTOR_DEF, VARIABLE_DEF, RECORD_DEF,\r\n                    COMPACT_CTOR_DEF&quot;/&gt;\r\n            &lt;property name=&quot;allowNoEmptyLineBetweenFields&quot; value=&quot;true&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;SeparatorWrap&quot;&gt;\r\n            &lt;property name=&quot;id&quot; value=&quot;SeparatorWrapDot&quot;/&gt;\r\n            &lt;property name=&quot;tokens&quot; value=&quot;DOT&quot;/&gt;\r\n            &lt;property name=&quot;option&quot; value=&quot;nl&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;SeparatorWrap&quot;&gt;\r\n            &lt;property name=&quot;id&quot; value=&quot;SeparatorWrapComma&quot;/&gt;\r\n            &lt;property name=&quot;tokens&quot; value=&quot;COMMA&quot;/&gt;\r\n            &lt;property name=&quot;option&quot; value=&quot;EOL&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;SeparatorWrap&quot;&gt;\r\n            &lt;!-- ELLIPSIS is EOL until https://github.com/google/styleguide/issues/259 --&gt;\r\n            &lt;property name=&quot;id&quot; value=&quot;SeparatorWrapEllipsis&quot;/&gt;\r\n            &lt;property name=&quot;tokens&quot; value=&quot;ELLIPSIS&quot;/&gt;\r\n            &lt;property name=&quot;option&quot; value=&quot;EOL&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;SeparatorWrap&quot;&gt;\r\n            &lt;!-- ARRAY_DECLARATOR is EOL until https://github.com/google/styleguide/issues/258 --&gt;\r\n            &lt;property name=&quot;id&quot; value=&quot;SeparatorWrapArrayDeclarator&quot;/&gt;\r\n            &lt;property name=&quot;tokens&quot; value=&quot;ARRAY_DECLARATOR&quot;/&gt;\r\n            &lt;property name=&quot;option&quot; value=&quot;EOL&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;SeparatorWrap&quot;&gt;\r\n            &lt;property name=&quot;id&quot; value=&quot;SeparatorWrapMethodRef&quot;/&gt;\r\n            &lt;property name=&quot;tokens&quot; value=&quot;METHOD_REF&quot;/&gt;\r\n            &lt;property name=&quot;option&quot; value=&quot;nl&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;PackageName&quot;&gt;\r\n            &lt;property name=&quot;format&quot; value=&quot;^[a-z]+(\\.[a-z][a-z0-9]*)*$&quot;/&gt;\r\n            &lt;message key=&quot;name.invalidPattern&quot;\r\n                     value=&quot;Package name &#39;&#39;{0}&#39;&#39; must match pattern &#39;&#39;{1}&#39;&#39;.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;TypeName&quot;&gt;\r\n            &lt;property name=&quot;tokens&quot; value=&quot;CLASS_DEF, INTERFACE_DEF, ENUM_DEF,\r\n                    ANNOTATION_DEF, RECORD_DEF&quot;/&gt;\r\n            &lt;message key=&quot;name.invalidPattern&quot;\r\n                     value=&quot;Type name &#39;&#39;{0}&#39;&#39; must match pattern &#39;&#39;{1}&#39;&#39;.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;MemberName&quot;&gt;\r\n            &lt;property name=&quot;format&quot; value=&quot;^[a-z][a-z0-9][a-zA-Z0-9]*$&quot;/&gt;\r\n            &lt;message key=&quot;name.invalidPattern&quot;\r\n                     value=&quot;Member name &#39;&#39;{0}&#39;&#39; must match pattern &#39;&#39;{1}&#39;&#39;.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;ParameterName&quot;&gt;\r\n            &lt;property name=&quot;format&quot; value=&quot;^[a-z]([a-z0-9][a-zA-Z0-9]*)?$&quot;/&gt;\r\n            &lt;message key=&quot;name.invalidPattern&quot;\r\n                     value=&quot;Parameter name &#39;&#39;{0}&#39;&#39; must match pattern &#39;&#39;{1}&#39;&#39;.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;LambdaParameterName&quot;&gt;\r\n            &lt;property name=&quot;format&quot; value=&quot;^[a-z]([a-z0-9][a-zA-Z0-9]*)?$&quot;/&gt;\r\n            &lt;message key=&quot;name.invalidPattern&quot;\r\n                     value=&quot;Lambda parameter name &#39;&#39;{0}&#39;&#39; must match pattern &#39;&#39;{1}&#39;&#39;.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;CatchParameterName&quot;&gt;\r\n            &lt;property name=&quot;format&quot; value=&quot;^[a-z]([a-z0-9][a-zA-Z0-9]*)?$&quot;/&gt;\r\n            &lt;message key=&quot;name.invalidPattern&quot;\r\n                     value=&quot;Catch parameter name &#39;&#39;{0}&#39;&#39; must match pattern &#39;&#39;{1}&#39;&#39;.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;LocalVariableName&quot;&gt;\r\n            &lt;property name=&quot;format&quot; value=&quot;^[a-z]([a-z0-9][a-zA-Z0-9]*)?$&quot;/&gt;\r\n            &lt;message key=&quot;name.invalidPattern&quot;\r\n                     value=&quot;Local variable name &#39;&#39;{0}&#39;&#39; must match pattern &#39;&#39;{1}&#39;&#39;.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;PatternVariableName&quot;&gt;\r\n            &lt;property name=&quot;format&quot; value=&quot;^[a-z]([a-z0-9][a-zA-Z0-9]*)?$&quot;/&gt;\r\n            &lt;message key=&quot;name.invalidPattern&quot;\r\n                     value=&quot;Pattern variable name &#39;&#39;{0}&#39;&#39; must match pattern &#39;&#39;{1}&#39;&#39;.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;ClassTypeParameterName&quot;&gt;\r\n            &lt;property name=&quot;format&quot; value=&quot;(^[A-Z][0-9]?)$|([A-Z][a-zA-Z0-9]*[T]$)&quot;/&gt;\r\n            &lt;message key=&quot;name.invalidPattern&quot;\r\n                     value=&quot;Class type name &#39;&#39;{0}&#39;&#39; must match pattern &#39;&#39;{1}&#39;&#39;.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;RecordComponentName&quot;&gt;\r\n            &lt;property name=&quot;format&quot; value=&quot;^[a-z]([a-z0-9][a-zA-Z0-9]*)?$&quot;/&gt;\r\n            &lt;message key=&quot;name.invalidPattern&quot;\r\n                     value=&quot;Record component name &#39;&#39;{0}&#39;&#39; must match pattern &#39;&#39;{1}&#39;&#39;.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;RecordTypeParameterName&quot;&gt;\r\n            &lt;property name=&quot;format&quot; value=&quot;(^[A-Z][0-9]?)$|([A-Z][a-zA-Z0-9]*[T]$)&quot;/&gt;\r\n            &lt;message key=&quot;name.invalidPattern&quot;\r\n                     value=&quot;Record type name &#39;&#39;{0}&#39;&#39; must match pattern &#39;&#39;{1}&#39;&#39;.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;MethodTypeParameterName&quot;&gt;\r\n            &lt;property name=&quot;format&quot; value=&quot;(^[A-Z][0-9]?)$|([A-Z][a-zA-Z0-9]*[T]$)&quot;/&gt;\r\n            &lt;message key=&quot;name.invalidPattern&quot;\r\n                     value=&quot;Method type name &#39;&#39;{0}&#39;&#39; must match pattern &#39;&#39;{1}&#39;&#39;.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;InterfaceTypeParameterName&quot;&gt;\r\n            &lt;property name=&quot;format&quot; value=&quot;(^[A-Z][0-9]?)$|([A-Z][a-zA-Z0-9]*[T]$)&quot;/&gt;\r\n            &lt;message key=&quot;name.invalidPattern&quot;\r\n                     value=&quot;Interface type name &#39;&#39;{0}&#39;&#39; must match pattern &#39;&#39;{1}&#39;&#39;.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;NoFinalizer&quot;/&gt;\r\n        &lt;module name=&quot;GenericWhitespace&quot;&gt;\r\n            &lt;message key=&quot;ws.followed&quot;\r\n                     value=&quot;GenericWhitespace &#39;&#39;{0}&#39;&#39; is followed by whitespace.&quot;/&gt;\r\n            &lt;message key=&quot;ws.preceded&quot;\r\n                     value=&quot;GenericWhitespace &#39;&#39;{0}&#39;&#39; is preceded with whitespace.&quot;/&gt;\r\n            &lt;message key=&quot;ws.illegalFollow&quot;\r\n                     value=&quot;GenericWhitespace &#39;&#39;{0}&#39;&#39; should followed by whitespace.&quot;/&gt;\r\n            &lt;message key=&quot;ws.notPreceded&quot;\r\n                     value=&quot;GenericWhitespace &#39;&#39;{0}&#39;&#39; is not preceded with whitespace.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;Indentation&quot;&gt;\r\n            &lt;property name=&quot;tabWidth&quot; value=&quot;4&quot;/&gt;\r\n            &lt;property name=&quot;basicOffset&quot; value=&quot;4&quot;/&gt;\r\n            &lt;property name=&quot;braceAdjustment&quot; value=&quot;4&quot;/&gt;\r\n            &lt;property name=&quot;caseIndent&quot; value=&quot;8&quot;/&gt;\r\n            &lt;property name=&quot;throwsIndent&quot; value=&quot;0&quot;/&gt;\r\n            &lt;property name=&quot;lineWrappingIndentation&quot; value=&quot;8&quot;/&gt;\r\n            &lt;property name=&quot;arrayInitIndent&quot; value=&quot;4&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;AbbreviationAsWordInName&quot;&gt;\r\n            &lt;property name=&quot;ignoreFinal&quot; value=&quot;false&quot;/&gt;\r\n            &lt;property name=&quot;allowedAbbreviationLength&quot; value=&quot;0&quot;/&gt;\r\n            &lt;property name=&quot;tokens&quot;\r\n                      value=&quot;CLASS_DEF, INTERFACE_DEF, ENUM_DEF, ANNOTATION_DEF, ANNOTATION_FIELD_DEF,\r\n                    PARAMETER_DEF, VARIABLE_DEF, METHOD_DEF, PATTERN_VARIABLE_DEF, RECORD_DEF,\r\n                    RECORD_COMPONENT_DEF&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;NoWhitespaceBeforeCaseDefaultColon&quot;/&gt;\r\n        &lt;module name=&quot;OverloadMethodsDeclarationOrder&quot;/&gt;\r\n        &lt;module name=&quot;VariableDeclarationUsageDistance&quot;/&gt;\r\n        &lt;module name=&quot;CustomImportOrder&quot;&gt;\r\n            &lt;property name=&quot;sortImportsInGroupAlphabetically&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;separateLineBetweenGroups&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;customImportOrderRules&quot; value=&quot;STATIC###THIRD_PARTY_PACKAGE&quot;/&gt;\r\n            &lt;property name=&quot;tokens&quot; value=&quot;IMPORT, STATIC_IMPORT, PACKAGE_DEF&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;MethodParamPad&quot;&gt;\r\n            &lt;property name=&quot;tokens&quot;\r\n                      value=&quot;CTOR_DEF, LITERAL_NEW, METHOD_CALL, METHOD_DEF,\r\n                    SUPER_CTOR_CALL, ENUM_CONSTANT_DEF, RECORD_DEF&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;NoWhitespaceBefore&quot;&gt;\r\n            &lt;property name=&quot;tokens&quot;\r\n                      value=&quot;COMMA, SEMI, POST_INC, POST_DEC, DOT,\r\n                    LABELED_STAT, METHOD_REF&quot;/&gt;\r\n            &lt;property name=&quot;allowLineBreaks&quot; value=&quot;true&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;ParenPad&quot;&gt;\r\n            &lt;property name=&quot;tokens&quot;\r\n                      value=&quot;ANNOTATION, ANNOTATION_FIELD_DEF, CTOR_CALL, CTOR_DEF, DOT, ENUM_CONSTANT_DEF,\r\n                    EXPR, LITERAL_CATCH, LITERAL_DO, LITERAL_FOR, LITERAL_IF, LITERAL_NEW,\r\n                    LITERAL_SWITCH, LITERAL_SYNCHRONIZED, LITERAL_WHILE, METHOD_CALL,\r\n                    METHOD_DEF, QUESTION, RESOURCE_SPECIFICATION, SUPER_CTOR_CALL, LAMBDA,\r\n                    RECORD_DEF&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;OperatorWrap&quot;&gt;\r\n            &lt;property name=&quot;option&quot; value=&quot;NL&quot;/&gt;\r\n            &lt;property name=&quot;tokens&quot;\r\n                      value=&quot;BAND, BOR, BSR, BXOR, DIV, EQUAL, GE, GT, LAND, LE, LITERAL_INSTANCEOF, LOR,\r\n                    LT, MINUS, MOD, NOT_EQUAL, PLUS, QUESTION, SL, SR, STAR, METHOD_REF,\r\n                    TYPE_EXTENSION_AND &quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;AnnotationLocation&quot;&gt;\r\n            &lt;property name=&quot;id&quot; value=&quot;AnnotationLocationMostCases&quot;/&gt;\r\n            &lt;property name=&quot;tokens&quot;\r\n                      value=&quot;CLASS_DEF, INTERFACE_DEF, ENUM_DEF, METHOD_DEF, CTOR_DEF,\r\n                      RECORD_DEF, COMPACT_CTOR_DEF&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;AnnotationLocation&quot;&gt;\r\n            &lt;property name=&quot;id&quot; value=&quot;AnnotationLocationVariables&quot;/&gt;\r\n            &lt;property name=&quot;tokens&quot; value=&quot;VARIABLE_DEF&quot;/&gt;\r\n            &lt;property name=&quot;allowSamelineMultipleAnnotations&quot; value=&quot;true&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;NonEmptyAtclauseDescription&quot;/&gt;\r\n        &lt;module name=&quot;InvalidJavadocPosition&quot;/&gt;\r\n        &lt;module name=&quot;JavadocTagContinuationIndentation&quot;/&gt;\r\n        &lt;module name=&quot;SummaryJavadoc&quot;&gt;\r\n            &lt;property name=&quot;forbiddenSummaryFragments&quot;\r\n                      value=&quot;^@return the *|^This method returns |^A [{]@code [a-zA-Z0-9]+[}]( is a )&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;JavadocParagraph&quot;/&gt;\r\n        &lt;module name=&quot;RequireEmptyLineBeforeBlockTagGroup&quot;/&gt;\r\n        &lt;module name=&quot;AtclauseOrder&quot;&gt;\r\n            &lt;property name=&quot;tagOrder&quot; value=&quot;@param, @return, @throws, @deprecated&quot;/&gt;\r\n            &lt;property name=&quot;target&quot;\r\n                      value=&quot;CLASS_DEF, INTERFACE_DEF, ENUM_DEF, METHOD_DEF, CTOR_DEF, VARIABLE_DEF&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;JavadocMethod&quot;&gt;\r\n            &lt;property name=&quot;accessModifiers&quot; value=&quot;public&quot;/&gt;\r\n            &lt;property name=&quot;allowMissingParamTags&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;allowMissingReturnTag&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;allowedAnnotations&quot; value=&quot;Override, Test&quot;/&gt;\r\n            &lt;property name=&quot;tokens&quot; value=&quot;METHOD_DEF, CTOR_DEF, ANNOTATION_FIELD_DEF, COMPACT_CTOR_DEF&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;MethodName&quot;&gt;\r\n            &lt;property name=&quot;format&quot; value=&quot;^[a-z][a-z0-9]\\w*$&quot;/&gt;\r\n            &lt;message key=&quot;name.invalidPattern&quot;\r\n                     value=&quot;Method name &#39;&#39;{0}&#39;&#39; must match pattern &#39;&#39;{1}&#39;&#39;.&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;SingleLineJavadoc&quot;/&gt;\r\n        &lt;module name=&quot;EmptyCatchBlock&quot;&gt;\r\n            &lt;property name=&quot;exceptionVariableName&quot; value=&quot;expected&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;CommentsIndentation&quot;&gt;\r\n            &lt;property name=&quot;tokens&quot; value=&quot;SINGLE_LINE_COMMENT, BLOCK_COMMENT_BEGIN&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;!-- https://checkstyle.org/filters/suppressionxpathfilter.html --&gt;\r\n        &lt;module name=&quot;SuppressionXpathFilter&quot;&gt;\r\n            &lt;property name=&quot;file&quot; value=&quot;${org.checkstyle.google.suppressionxpathfilter.config}&quot;\r\n                      default=&quot;checkstyle-xpath-suppressions.xml&quot;/&gt;\r\n            &lt;property name=&quot;optional&quot; value=&quot;true&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;SuppressWarningsHolder&quot;/&gt;\r\n        &lt;module name=&quot;SuppressionCommentFilter&quot;&gt;\r\n            &lt;property name=&quot;offCommentFormat&quot; value=&quot;CHECKSTYLE.OFF\\: ([\\w\\|]+)&quot;/&gt;\r\n            &lt;property name=&quot;onCommentFormat&quot; value=&quot;CHECKSTYLE.ON\\: ([\\w\\|]+)&quot;/&gt;\r\n            &lt;property name=&quot;checkFormat&quot; value=&quot;$1&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;SuppressWithNearbyCommentFilter&quot;&gt;\r\n            &lt;property name=&quot;commentFormat&quot; value=&quot;CHECKSTYLE.SUPPRESS\\: ([\\w\\|]+)&quot;/&gt;\r\n            &lt;!-- $1 refers to the first match group in the regex defined in commentFormat --&gt;\r\n            &lt;property name=&quot;checkFormat&quot; value=&quot;$1&quot;/&gt;\r\n            &lt;!-- The check is suppressed in the next line of code after the comment --&gt;\r\n            &lt;property name=&quot;influenceFormat&quot; value=&quot;1&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;NoLineWrap&quot;&gt;\r\n            &lt;property name=&quot;tokens&quot;\r\n                      value=&quot;PACKAGE_DEF, IMPORT, STATIC_IMPORT, ENUM_DEF, CLASS_DEF , METHOD_DEF , INTERFACE_DEF, COMPACT_CTOR_DEF&quot;/&gt;\r\n        &lt;/module&gt;\r\n    &lt;/module&gt;\r\n&lt;/module&gt;","title":"NoLineWrap in checkstyle.xml in IntelliJ for Java does not work as expected","body":"<p>I try to recreate the default code style from IntelliJ to a checkstyle.xml file. As mentioned here <a href=\"https://stackoverflow.com/questions/32371967/use-intellij-code-style-in-checkstyle\">Use IntelliJ code style in Checkstyle</a> there is no quick option so I try to rebuild it step by step. I'm quite close but I struggle with the settings for line wrapping. As there is the option <code>NoLineWrap</code> from checkstyle the lines got cut nevertheless. Also, a look in the settings proves that the statements were ignored. As you can see in the screenshot there is still 'wrap if long' for many options although I added the following to the XML file:</p>\n<pre><code> &lt;module name=&quot;NoLineWrap&quot;&gt;\n            &lt;property name=&quot;tokens&quot;\n                      value=&quot;PACKAGE_DEF, IMPORT, STATIC_IMPORT, ENUM_DEF, CLASS_DEF , METHOD_DEF , INTERFACE_DEF, COMPACT_CTOR_DEF&quot;/&gt;\n &lt;/module&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/B6Xj9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B6Xj9.png\" alt=\"Settings IntelliJ own style sheet\" /></a></p>\n<p>Can somebody help me with my problem?</p>\n<hr />\n<p><em>Edit:</em> My complete checkstyle.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;!DOCTYPE module PUBLIC\n    &quot;-//Checkstyle//DTD Checkstyle Configuration 1.3//EN&quot;\n    &quot;https://checkstyle.org/dtds/configuration_1_3.dtd&quot;&gt;\n&lt;module name=&quot;Checker&quot;&gt;\n&lt;module name=&quot;SuppressWarningsFilter&quot;/&gt;\n\n&lt;property name=&quot;charset&quot; value=&quot;UTF-8&quot;/&gt;\n\n&lt;property name=&quot;severity&quot; value=&quot;warning&quot;/&gt;\n\n&lt;property name=&quot;fileExtensions&quot; value=&quot;java, properties, xml&quot;/&gt;\n&lt;!-- Excludes all 'module-info.java' files              --&gt;\n&lt;!-- See https://checkstyle.org/filefilters/index.html --&gt;\n&lt;module name=&quot;BeforeExecutionExclusionFileFilter&quot;&gt;\n    &lt;property name=&quot;fileNamePattern&quot; value=&quot;module\\-info\\.java$&quot;/&gt;\n&lt;/module&gt;\n&lt;!-- https://checkstyle.org/filters/suppressionfilter.html --&gt;\n&lt;module name=&quot;SuppressionFilter&quot;&gt;\n    &lt;property name=&quot;file&quot; value=&quot;${org.checkstyle.google.suppressionfilter.config}&quot;\n              default=&quot;checkstyle-suppressions.xml&quot;/&gt;\n    &lt;property name=&quot;optional&quot; value=&quot;true&quot;/&gt;\n&lt;/module&gt;\n\n&lt;!-- Checks for whitespace                               --&gt;\n&lt;!-- See http://checkstyle.org/checks/whitespace/index.html --&gt;\n&lt;module name=&quot;FileTabCharacter&quot;&gt;\n    &lt;property name=&quot;eachLine&quot; value=&quot;true&quot;/&gt;\n&lt;/module&gt;\n\n&lt;module name=&quot;LineLength&quot;&gt;\n    &lt;property name=&quot;fileExtensions&quot; value=&quot;java&quot;/&gt;\n    &lt;property name=&quot;max&quot; value=&quot;120&quot;/&gt;\n    &lt;property name=&quot;ignorePattern&quot; value=&quot;^package.*|^import.*|a href|href|http://|https://|ftp://&quot;/&gt;\n&lt;/module&gt;\n\n&lt;module name=&quot;TreeWalker&quot;&gt;\n    &lt;module name=&quot;OuterTypeFilename&quot;/&gt;\n    &lt;module name=&quot;IllegalTokenText&quot;&gt;\n        &lt;property name=&quot;tokens&quot; value=&quot;STRING_LITERAL, CHAR_LITERAL&quot;/&gt;\n        &lt;property name=&quot;format&quot;\n                  value=&quot;\\\\u00(09|0(a|A)|0(c|C)|0(d|D)|22|27|5(C|c))|\\\\(0(10|11|12|14|15|42|47)|134)&quot;/&gt;\n        &lt;property name=&quot;message&quot;\n                  value=&quot;Consider using special escape sequence instead of octal value or Unicode escaped value.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;AvoidEscapedUnicodeCharacters&quot;&gt;\n        &lt;property name=&quot;allowEscapesForControlCharacters&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;allowByTailComment&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;allowNonPrintableEscapes&quot; value=&quot;true&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;AvoidStarImport&quot;/&gt;\n    &lt;module name=&quot;OneTopLevelClass&quot;/&gt;\n\n    &lt;module name=&quot;EmptyBlock&quot;&gt;\n        &lt;property name=&quot;option&quot; value=&quot;TEXT&quot;/&gt;\n        &lt;property name=&quot;tokens&quot;\n                  value=&quot;LITERAL_TRY, LITERAL_FINALLY, LITERAL_IF, LITERAL_ELSE, LITERAL_SWITCH&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;NeedBraces&quot;&gt;\n        &lt;property name=&quot;tokens&quot;\n                  value=&quot;LITERAL_DO, LITERAL_ELSE, LITERAL_FOR, LITERAL_IF, LITERAL_WHILE&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;LeftCurly&quot;&gt;\n        &lt;property name=&quot;tokens&quot;\n                  value=&quot;ANNOTATION_DEF, CLASS_DEF, CTOR_DEF, ENUM_CONSTANT_DEF, ENUM_DEF,\n                INTERFACE_DEF, LAMBDA, LITERAL_CASE, LITERAL_CATCH, LITERAL_DEFAULT,\n                LITERAL_DO, LITERAL_ELSE, LITERAL_FINALLY, LITERAL_FOR, LITERAL_IF,\n                LITERAL_SWITCH, LITERAL_SYNCHRONIZED, LITERAL_TRY, LITERAL_WHILE, METHOD_DEF,\n                OBJBLOCK, STATIC_INIT, RECORD_DEF, COMPACT_CTOR_DEF&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;RightCurly&quot;&gt;\n        &lt;property name=&quot;id&quot; value=&quot;RightCurlySame&quot;/&gt;\n        &lt;property name=&quot;tokens&quot;\n                  value=&quot;LITERAL_TRY, LITERAL_CATCH, LITERAL_FINALLY, LITERAL_IF, LITERAL_ELSE,\n                LITERAL_DO&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;RightCurly&quot;&gt;\n        &lt;property name=&quot;id&quot; value=&quot;RightCurlyAlone&quot;/&gt;\n        &lt;property name=&quot;option&quot; value=&quot;alone&quot;/&gt;\n        &lt;property name=&quot;tokens&quot;\n                  value=&quot;CLASS_DEF, METHOD_DEF, CTOR_DEF, LITERAL_FOR, LITERAL_WHILE, STATIC_INIT,\n                INSTANCE_INIT, ANNOTATION_DEF, ENUM_DEF, INTERFACE_DEF, RECORD_DEF,\n                COMPACT_CTOR_DEF, LITERAL_SWITCH&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;SuppressionXpathSingleFilter&quot;&gt;\n        &lt;!-- suppresion is required till https://github.com/checkstyle/checkstyle/issues/7541 --&gt;\n        &lt;property name=&quot;id&quot; value=&quot;RightCurlyAlone&quot;/&gt;\n        &lt;property name=&quot;query&quot; value=&quot;//RCURLY[parent::SLIST[count(./*)=1]\n                                 or preceding-sibling::*[last()][self::LCURLY]]&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;WhitespaceAfter&quot;&gt;\n        &lt;property name=&quot;tokens&quot;\n                  value=&quot;COMMA, SEMI, TYPECAST, LITERAL_IF, LITERAL_ELSE, LITERAL_RETURN,\n                LITERAL_WHILE, LITERAL_DO, LITERAL_FOR, LITERAL_FINALLY, DO_WHILE, ELLIPSIS,\n                LITERAL_SWITCH, LITERAL_SYNCHRONIZED, LITERAL_TRY, LITERAL_CATCH, LAMBDA,\n                LITERAL_YIELD, LITERAL_CASE&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;WhitespaceAround&quot;&gt;\n        &lt;property name=&quot;allowEmptyConstructors&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;allowEmptyLambdas&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;allowEmptyMethods&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;allowEmptyTypes&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;allowEmptyLoops&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;ignoreEnhancedForColon&quot; value=&quot;false&quot;/&gt;\n        &lt;property name=&quot;tokens&quot;\n                  value=&quot;ASSIGN, BAND, BAND_ASSIGN, BOR, BOR_ASSIGN, BSR, BSR_ASSIGN, BXOR,\n                BXOR_ASSIGN, COLON, DIV, DIV_ASSIGN, DO_WHILE, EQUAL, GE, GT, LAMBDA, LAND,\n                LCURLY, LE, LITERAL_CATCH, LITERAL_DO, LITERAL_ELSE, LITERAL_FINALLY,\n                LITERAL_FOR, LITERAL_IF, LITERAL_RETURN, LITERAL_SWITCH, LITERAL_SYNCHRONIZED,\n                LITERAL_TRY, LITERAL_WHILE, LOR, LT, MINUS, MINUS_ASSIGN, MOD, MOD_ASSIGN,\n                NOT_EQUAL, PLUS, PLUS_ASSIGN, QUESTION, RCURLY, SL, SLIST, SL_ASSIGN, SR,\n                SR_ASSIGN, STAR, STAR_ASSIGN, LITERAL_ASSERT, TYPE_EXTENSION_AND&quot;/&gt;\n        &lt;message key=&quot;ws.notFollowed&quot;\n                 value=&quot;WhitespaceAround: ''{0}'' is not followed by whitespace. Empty blocks\n           may only be represented as '{}' when not part of a multi-block statement (4.1.3)&quot;/&gt;\n        &lt;message key=&quot;ws.notPreceded&quot;\n                 value=&quot;WhitespaceAround: ''{0}'' is not preceded with whitespace.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;OneStatementPerLine&quot;/&gt;\n    &lt;module name=&quot;MultipleVariableDeclarations&quot;/&gt;\n    &lt;module name=&quot;ArrayTypeStyle&quot;/&gt;\n    &lt;module name=&quot;MissingSwitchDefault&quot;/&gt;\n    &lt;module name=&quot;FallThrough&quot;/&gt;\n    &lt;module name=&quot;UpperEll&quot;/&gt;\n    &lt;module name=&quot;ModifierOrder&quot;/&gt;\n    &lt;module name=&quot;EmptyLineSeparator&quot;&gt;\n        &lt;property name=&quot;tokens&quot;\n                  value=&quot;PACKAGE_DEF, IMPORT, STATIC_IMPORT, CLASS_DEF, INTERFACE_DEF, ENUM_DEF,\n                STATIC_INIT, INSTANCE_INIT, METHOD_DEF, CTOR_DEF, VARIABLE_DEF, RECORD_DEF,\n                COMPACT_CTOR_DEF&quot;/&gt;\n        &lt;property name=&quot;allowNoEmptyLineBetweenFields&quot; value=&quot;true&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;SeparatorWrap&quot;&gt;\n        &lt;property name=&quot;id&quot; value=&quot;SeparatorWrapDot&quot;/&gt;\n        &lt;property name=&quot;tokens&quot; value=&quot;DOT&quot;/&gt;\n        &lt;property name=&quot;option&quot; value=&quot;nl&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;SeparatorWrap&quot;&gt;\n        &lt;property name=&quot;id&quot; value=&quot;SeparatorWrapComma&quot;/&gt;\n        &lt;property name=&quot;tokens&quot; value=&quot;COMMA&quot;/&gt;\n        &lt;property name=&quot;option&quot; value=&quot;EOL&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;SeparatorWrap&quot;&gt;\n        &lt;!-- ELLIPSIS is EOL until https://github.com/google/styleguide/issues/259 --&gt;\n        &lt;property name=&quot;id&quot; value=&quot;SeparatorWrapEllipsis&quot;/&gt;\n        &lt;property name=&quot;tokens&quot; value=&quot;ELLIPSIS&quot;/&gt;\n        &lt;property name=&quot;option&quot; value=&quot;EOL&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;SeparatorWrap&quot;&gt;\n        &lt;!-- ARRAY_DECLARATOR is EOL until https://github.com/google/styleguide/issues/258 --&gt;\n        &lt;property name=&quot;id&quot; value=&quot;SeparatorWrapArrayDeclarator&quot;/&gt;\n        &lt;property name=&quot;tokens&quot; value=&quot;ARRAY_DECLARATOR&quot;/&gt;\n        &lt;property name=&quot;option&quot; value=&quot;EOL&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;SeparatorWrap&quot;&gt;\n        &lt;property name=&quot;id&quot; value=&quot;SeparatorWrapMethodRef&quot;/&gt;\n        &lt;property name=&quot;tokens&quot; value=&quot;METHOD_REF&quot;/&gt;\n        &lt;property name=&quot;option&quot; value=&quot;nl&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;PackageName&quot;&gt;\n        &lt;property name=&quot;format&quot; value=&quot;^[a-z]+(\\.[a-z][a-z0-9]*)*$&quot;/&gt;\n        &lt;message key=&quot;name.invalidPattern&quot;\n                 value=&quot;Package name ''{0}'' must match pattern ''{1}''.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;TypeName&quot;&gt;\n        &lt;property name=&quot;tokens&quot; value=&quot;CLASS_DEF, INTERFACE_DEF, ENUM_DEF,\n                ANNOTATION_DEF, RECORD_DEF&quot;/&gt;\n        &lt;message key=&quot;name.invalidPattern&quot;\n                 value=&quot;Type name ''{0}'' must match pattern ''{1}''.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;MemberName&quot;&gt;\n        &lt;property name=&quot;format&quot; value=&quot;^[a-z][a-z0-9][a-zA-Z0-9]*$&quot;/&gt;\n        &lt;message key=&quot;name.invalidPattern&quot;\n                 value=&quot;Member name ''{0}'' must match pattern ''{1}''.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;ParameterName&quot;&gt;\n        &lt;property name=&quot;format&quot; value=&quot;^[a-z]([a-z0-9][a-zA-Z0-9]*)?$&quot;/&gt;\n        &lt;message key=&quot;name.invalidPattern&quot;\n                 value=&quot;Parameter name ''{0}'' must match pattern ''{1}''.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;LambdaParameterName&quot;&gt;\n        &lt;property name=&quot;format&quot; value=&quot;^[a-z]([a-z0-9][a-zA-Z0-9]*)?$&quot;/&gt;\n        &lt;message key=&quot;name.invalidPattern&quot;\n                 value=&quot;Lambda parameter name ''{0}'' must match pattern ''{1}''.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;CatchParameterName&quot;&gt;\n        &lt;property name=&quot;format&quot; value=&quot;^[a-z]([a-z0-9][a-zA-Z0-9]*)?$&quot;/&gt;\n        &lt;message key=&quot;name.invalidPattern&quot;\n                 value=&quot;Catch parameter name ''{0}'' must match pattern ''{1}''.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;LocalVariableName&quot;&gt;\n        &lt;property name=&quot;format&quot; value=&quot;^[a-z]([a-z0-9][a-zA-Z0-9]*)?$&quot;/&gt;\n        &lt;message key=&quot;name.invalidPattern&quot;\n                 value=&quot;Local variable name ''{0}'' must match pattern ''{1}''.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;PatternVariableName&quot;&gt;\n        &lt;property name=&quot;format&quot; value=&quot;^[a-z]([a-z0-9][a-zA-Z0-9]*)?$&quot;/&gt;\n        &lt;message key=&quot;name.invalidPattern&quot;\n                 value=&quot;Pattern variable name ''{0}'' must match pattern ''{1}''.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;ClassTypeParameterName&quot;&gt;\n        &lt;property name=&quot;format&quot; value=&quot;(^[A-Z][0-9]?)$|([A-Z][a-zA-Z0-9]*[T]$)&quot;/&gt;\n        &lt;message key=&quot;name.invalidPattern&quot;\n                 value=&quot;Class type name ''{0}'' must match pattern ''{1}''.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;RecordComponentName&quot;&gt;\n        &lt;property name=&quot;format&quot; value=&quot;^[a-z]([a-z0-9][a-zA-Z0-9]*)?$&quot;/&gt;\n        &lt;message key=&quot;name.invalidPattern&quot;\n                 value=&quot;Record component name ''{0}'' must match pattern ''{1}''.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;RecordTypeParameterName&quot;&gt;\n        &lt;property name=&quot;format&quot; value=&quot;(^[A-Z][0-9]?)$|([A-Z][a-zA-Z0-9]*[T]$)&quot;/&gt;\n        &lt;message key=&quot;name.invalidPattern&quot;\n                 value=&quot;Record type name ''{0}'' must match pattern ''{1}''.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;MethodTypeParameterName&quot;&gt;\n        &lt;property name=&quot;format&quot; value=&quot;(^[A-Z][0-9]?)$|([A-Z][a-zA-Z0-9]*[T]$)&quot;/&gt;\n        &lt;message key=&quot;name.invalidPattern&quot;\n                 value=&quot;Method type name ''{0}'' must match pattern ''{1}''.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;InterfaceTypeParameterName&quot;&gt;\n        &lt;property name=&quot;format&quot; value=&quot;(^[A-Z][0-9]?)$|([A-Z][a-zA-Z0-9]*[T]$)&quot;/&gt;\n        &lt;message key=&quot;name.invalidPattern&quot;\n                 value=&quot;Interface type name ''{0}'' must match pattern ''{1}''.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;NoFinalizer&quot;/&gt;\n    &lt;module name=&quot;GenericWhitespace&quot;&gt;\n        &lt;message key=&quot;ws.followed&quot;\n                 value=&quot;GenericWhitespace ''{0}'' is followed by whitespace.&quot;/&gt;\n        &lt;message key=&quot;ws.preceded&quot;\n                 value=&quot;GenericWhitespace ''{0}'' is preceded with whitespace.&quot;/&gt;\n        &lt;message key=&quot;ws.illegalFollow&quot;\n                 value=&quot;GenericWhitespace ''{0}'' should followed by whitespace.&quot;/&gt;\n        &lt;message key=&quot;ws.notPreceded&quot;\n                 value=&quot;GenericWhitespace ''{0}'' is not preceded with whitespace.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;Indentation&quot;&gt;\n        &lt;property name=&quot;tabWidth&quot; value=&quot;4&quot;/&gt;\n        &lt;property name=&quot;basicOffset&quot; value=&quot;4&quot;/&gt;\n        &lt;property name=&quot;braceAdjustment&quot; value=&quot;4&quot;/&gt;\n        &lt;property name=&quot;caseIndent&quot; value=&quot;8&quot;/&gt;\n        &lt;property name=&quot;throwsIndent&quot; value=&quot;0&quot;/&gt;\n        &lt;property name=&quot;lineWrappingIndentation&quot; value=&quot;8&quot;/&gt;\n        &lt;property name=&quot;arrayInitIndent&quot; value=&quot;4&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;AbbreviationAsWordInName&quot;&gt;\n        &lt;property name=&quot;ignoreFinal&quot; value=&quot;false&quot;/&gt;\n        &lt;property name=&quot;allowedAbbreviationLength&quot; value=&quot;0&quot;/&gt;\n        &lt;property name=&quot;tokens&quot;\n                  value=&quot;CLASS_DEF, INTERFACE_DEF, ENUM_DEF, ANNOTATION_DEF, ANNOTATION_FIELD_DEF,\n                PARAMETER_DEF, VARIABLE_DEF, METHOD_DEF, PATTERN_VARIABLE_DEF, RECORD_DEF,\n                RECORD_COMPONENT_DEF&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;NoWhitespaceBeforeCaseDefaultColon&quot;/&gt;\n    &lt;module name=&quot;OverloadMethodsDeclarationOrder&quot;/&gt;\n    &lt;module name=&quot;VariableDeclarationUsageDistance&quot;/&gt;\n    &lt;module name=&quot;CustomImportOrder&quot;&gt;\n        &lt;property name=&quot;sortImportsInGroupAlphabetically&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;separateLineBetweenGroups&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;customImportOrderRules&quot; value=&quot;STATIC###THIRD_PARTY_PACKAGE&quot;/&gt;\n        &lt;property name=&quot;tokens&quot; value=&quot;IMPORT, STATIC_IMPORT, PACKAGE_DEF&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;MethodParamPad&quot;&gt;\n        &lt;property name=&quot;tokens&quot;\n                  value=&quot;CTOR_DEF, LITERAL_NEW, METHOD_CALL, METHOD_DEF,\n                SUPER_CTOR_CALL, ENUM_CONSTANT_DEF, RECORD_DEF&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;NoWhitespaceBefore&quot;&gt;\n        &lt;property name=&quot;tokens&quot;\n                  value=&quot;COMMA, SEMI, POST_INC, POST_DEC, DOT,\n                LABELED_STAT, METHOD_REF&quot;/&gt;\n        &lt;property name=&quot;allowLineBreaks&quot; value=&quot;true&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;ParenPad&quot;&gt;\n        &lt;property name=&quot;tokens&quot;\n                  value=&quot;ANNOTATION, ANNOTATION_FIELD_DEF, CTOR_CALL, CTOR_DEF, DOT, ENUM_CONSTANT_DEF,\n                EXPR, LITERAL_CATCH, LITERAL_DO, LITERAL_FOR, LITERAL_IF, LITERAL_NEW,\n                LITERAL_SWITCH, LITERAL_SYNCHRONIZED, LITERAL_WHILE, METHOD_CALL,\n                METHOD_DEF, QUESTION, RESOURCE_SPECIFICATION, SUPER_CTOR_CALL, LAMBDA,\n                RECORD_DEF&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;OperatorWrap&quot;&gt;\n        &lt;property name=&quot;option&quot; value=&quot;NL&quot;/&gt;\n        &lt;property name=&quot;tokens&quot;\n                  value=&quot;BAND, BOR, BSR, BXOR, DIV, EQUAL, GE, GT, LAND, LE, LITERAL_INSTANCEOF, LOR,\n                LT, MINUS, MOD, NOT_EQUAL, PLUS, QUESTION, SL, SR, STAR, METHOD_REF,\n                TYPE_EXTENSION_AND &quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;AnnotationLocation&quot;&gt;\n        &lt;property name=&quot;id&quot; value=&quot;AnnotationLocationMostCases&quot;/&gt;\n        &lt;property name=&quot;tokens&quot;\n                  value=&quot;CLASS_DEF, INTERFACE_DEF, ENUM_DEF, METHOD_DEF, CTOR_DEF,\n                  RECORD_DEF, COMPACT_CTOR_DEF&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;AnnotationLocation&quot;&gt;\n        &lt;property name=&quot;id&quot; value=&quot;AnnotationLocationVariables&quot;/&gt;\n        &lt;property name=&quot;tokens&quot; value=&quot;VARIABLE_DEF&quot;/&gt;\n        &lt;property name=&quot;allowSamelineMultipleAnnotations&quot; value=&quot;true&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;NonEmptyAtclauseDescription&quot;/&gt;\n    &lt;module name=&quot;InvalidJavadocPosition&quot;/&gt;\n    &lt;module name=&quot;JavadocTagContinuationIndentation&quot;/&gt;\n    &lt;module name=&quot;SummaryJavadoc&quot;&gt;\n        &lt;property name=&quot;forbiddenSummaryFragments&quot;\n                  value=&quot;^@return the *|^This method returns |^A [{]@code [a-zA-Z0-9]+[}]( is a )&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;JavadocParagraph&quot;/&gt;\n    &lt;module name=&quot;RequireEmptyLineBeforeBlockTagGroup&quot;/&gt;\n    &lt;module name=&quot;AtclauseOrder&quot;&gt;\n        &lt;property name=&quot;tagOrder&quot; value=&quot;@param, @return, @throws, @deprecated&quot;/&gt;\n        &lt;property name=&quot;target&quot;\n                  value=&quot;CLASS_DEF, INTERFACE_DEF, ENUM_DEF, METHOD_DEF, CTOR_DEF, VARIABLE_DEF&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;JavadocMethod&quot;&gt;\n        &lt;property name=&quot;accessModifiers&quot; value=&quot;public&quot;/&gt;\n        &lt;property name=&quot;allowMissingParamTags&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;allowMissingReturnTag&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;allowedAnnotations&quot; value=&quot;Override, Test&quot;/&gt;\n        &lt;property name=&quot;tokens&quot; value=&quot;METHOD_DEF, CTOR_DEF, ANNOTATION_FIELD_DEF, COMPACT_CTOR_DEF&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;MethodName&quot;&gt;\n        &lt;property name=&quot;format&quot; value=&quot;^[a-z][a-z0-9]\\w*$&quot;/&gt;\n        &lt;message key=&quot;name.invalidPattern&quot;\n                 value=&quot;Method name ''{0}'' must match pattern ''{1}''.&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;SingleLineJavadoc&quot;/&gt;\n    &lt;module name=&quot;EmptyCatchBlock&quot;&gt;\n        &lt;property name=&quot;exceptionVariableName&quot; value=&quot;expected&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;CommentsIndentation&quot;&gt;\n        &lt;property name=&quot;tokens&quot; value=&quot;SINGLE_LINE_COMMENT, BLOCK_COMMENT_BEGIN&quot;/&gt;\n    &lt;/module&gt;\n    &lt;!-- https://checkstyle.org/filters/suppressionxpathfilter.html --&gt;\n    &lt;module name=&quot;SuppressionXpathFilter&quot;&gt;\n        &lt;property name=&quot;file&quot; value=&quot;${org.checkstyle.google.suppressionxpathfilter.config}&quot;\n                  default=&quot;checkstyle-xpath-suppressions.xml&quot;/&gt;\n        &lt;property name=&quot;optional&quot; value=&quot;true&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;SuppressWarningsHolder&quot;/&gt;\n    &lt;module name=&quot;SuppressionCommentFilter&quot;&gt;\n        &lt;property name=&quot;offCommentFormat&quot; value=&quot;CHECKSTYLE.OFF\\: ([\\w\\|]+)&quot;/&gt;\n        &lt;property name=&quot;onCommentFormat&quot; value=&quot;CHECKSTYLE.ON\\: ([\\w\\|]+)&quot;/&gt;\n        &lt;property name=&quot;checkFormat&quot; value=&quot;$1&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;SuppressWithNearbyCommentFilter&quot;&gt;\n        &lt;property name=&quot;commentFormat&quot; value=&quot;CHECKSTYLE.SUPPRESS\\: ([\\w\\|]+)&quot;/&gt;\n        &lt;!-- $1 refers to the first match group in the regex defined in commentFormat --&gt;\n        &lt;property name=&quot;checkFormat&quot; value=&quot;$1&quot;/&gt;\n        &lt;!-- The check is suppressed in the next line of code after the comment --&gt;\n        &lt;property name=&quot;influenceFormat&quot; value=&quot;1&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;NoLineWrap&quot;&gt;\n        &lt;property name=&quot;tokens&quot;\n                  value=&quot;PACKAGE_DEF, IMPORT, STATIC_IMPORT, ENUM_DEF, CLASS_DEF , METHOD_DEF , INTERFACE_DEF, COMPACT_CTOR_DEF&quot;/&gt;\n    &lt;/module&gt;\n&lt;/module&gt;\n</code></pre>\n\n"},{"tags":["java","migration","wsdl","pom.xml","jax-ws"],"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698150547,"creation_date":1698150547,"question_id":77352061,"body_markdown":"I am using this configuration in Java 7\r\n\r\n    &lt;plugin&gt;\r\n           &lt;groupId&gt;org.jvnet.jax-ws-commons&lt;/groupId&gt;\r\n           &lt;artifactId&gt;jaxws-maven-plugin&lt;/artifactId&gt;\r\n           &lt;version&gt;2.3&lt;/version&gt;\r\n           &lt;executions&gt;\r\n           &lt;execution&gt;\r\n                &lt;id&gt;1&lt;/id&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;wsimport&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n                     &lt;xadditionalHeaders&gt;true&lt;/xadditionalHeaders&gt;\r\n                     &lt;executable&gt;${tool.wsimport}&lt;/executable&gt; \r\n                 &lt;wsdlDirectory&gt;src/main/resources/wsdl&lt;/wsdlDirectory&gt;\r\n                &lt;target&gt;2.1&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n\r\nI must migrate it to Java 17, changing version I receive these error\r\n\r\n    [WARNING] Failed to build parent project for com.sun.xml.ws:project:pom:2.2.8\r\n    Failed to build parent project for com.sun.xml.ws:project:pom:2.2.8\r\n    Failed to build parent project for com.sun.xml.ws:bundles:pom:2.2.8\r\n    Failed to build parent project for com.sun.xml.ws:jaxws-tools:pom:2.2.8\r\n    Invalid POM for com.sun.xml.ws:jaxws-tools:jar:2.2.8, transitive dependencies (if any) will not be available, enable debug logging for more details\r\n\r\nI&#39;ve tried to migrate using the solutions for Java 11 migrations. But they doesn&#39;t work. I&#39;ve also tried to add dependencies manually, download jars... but without results. I can&#39;t find migration guide to Java 17. Any help?\r\n\r\n","title":"Migrate jaxws-maven-plugin from Java 7 to Java 17","body":"<p>I am using this configuration in Java 7</p>\n<pre><code>&lt;plugin&gt;\n       &lt;groupId&gt;org.jvnet.jax-ws-commons&lt;/groupId&gt;\n       &lt;artifactId&gt;jaxws-maven-plugin&lt;/artifactId&gt;\n       &lt;version&gt;2.3&lt;/version&gt;\n       &lt;executions&gt;\n       &lt;execution&gt;\n            &lt;id&gt;1&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;wsimport&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                 &lt;xadditionalHeaders&gt;true&lt;/xadditionalHeaders&gt;\n                 &lt;executable&gt;${tool.wsimport}&lt;/executable&gt; \n             &lt;wsdlDirectory&gt;src/main/resources/wsdl&lt;/wsdlDirectory&gt;\n            &lt;target&gt;2.1&lt;/target&gt;\n            &lt;/configuration&gt;\n            &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>I must migrate it to Java 17, changing version I receive these error</p>\n<pre><code>[WARNING] Failed to build parent project for com.sun.xml.ws:project:pom:2.2.8\nFailed to build parent project for com.sun.xml.ws:project:pom:2.2.8\nFailed to build parent project for com.sun.xml.ws:bundles:pom:2.2.8\nFailed to build parent project for com.sun.xml.ws:jaxws-tools:pom:2.2.8\nInvalid POM for com.sun.xml.ws:jaxws-tools:jar:2.2.8, transitive dependencies (if any) will not be available, enable debug logging for more details\n</code></pre>\n<p>I've tried to migrate using the solutions for Java 11 migrations. But they doesn't work. I've also tried to add dependencies manually, download jars... but without results. I can't find migration guide to Java 17. Any help?</p>\n"},{"tags":["java","android","react-native","build.gradle","react-native-camera"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1698184317,"post_id":77352036,"comment_id":136372594,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":29742669,"reputation":1,"user_id":22794605,"display_name":"Mohammad Rawashdeh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":306,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698150402,"creation_date":1698150402,"question_id":77352036,"body_markdown":"I have updated the dependencies in build.gradle file\r\n\r\nBut this keeps appearing and I don&#39;t know what the problem is?\r\n\r\nhere is **android\\\\build.gradle** file:\r\n\r\n```\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nbuildscript {\r\n    ext {\r\n        buildToolsVersion = &quot;33.0.0&quot;\r\n        minSdkVersion = 26\r\n        compileSdkVersion = 33\r\n        targetSdkVersion = 33\r\n\r\n        // We use NDK 23 which has both M1 support and is the side-by-side NDK version from AGP.\r\n        ndkVersion = &quot;23.1.7779620&quot;\r\n    }\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath(&quot;com.android.tools.build:gradle:2.3.0&quot;)\r\n        classpath(&quot;com.facebook.react:react-native-gradle-plugin&quot;)\r\n    }\r\n}\r\n```\r\n\r\n \r\n\r\nand here is **android\\\\app\\\\build.gradle** file contents:\r\n\r\n```\r\napply plugin: &quot;com.android.application&quot;\r\napply plugin: &quot;com.facebook.react&quot;\r\n\r\n\r\n/**\r\n * This is the configuration block to customize your React Native Android app.\r\n * By default you don&#39;t need to apply any configuration, just uncomment the lines you need.\r\n */\r\nreact {\r\n    /* Folders */\r\n    //   The root of your project, i.e. where &quot;package.json&quot; lives. Default is &#39;..&#39;\r\n    // root = file(&quot;../&quot;)\r\n    //   The folder where the react-native NPM package is. Default is ../node_modules/react-native\r\n    // reactNativeDir = file(&quot;../node_modules/react-native&quot;)\r\n    //   The folder where the react-native Codegen package is. Default is ../node_modules/@react-native/codegen\r\n    // codegenDir = file(&quot;../node_modules/@react-native/codegen&quot;)\r\n    //   The cli.js file which is the React Native CLI entrypoint. Default is ../node_modules/react-native/cli.js\r\n    // cliFile = file(&quot;../node_modules/react-native/cli.js&quot;)\r\n\r\n    /* Variants */\r\n    //   The list of variants to that are debuggable. For those we&#39;re going to\r\n    //   skip the bundling of the JS bundle and the assets. By default is just &#39;debug&#39;.\r\n    //   If you add flavors like lite, prod, etc. you&#39;ll have to list your debuggableVariants.\r\n    // debuggableVariants = [&quot;liteDebug&quot;, &quot;prodDebug&quot;]\r\n\r\n    /* Bundling */\r\n    //   A list containing the node command and its flags. Default is just &#39;node&#39;.\r\n    // nodeExecutableAndArgs = [&quot;node&quot;]\r\n    //\r\n    //   The command to run when bundling. By default is &#39;bundle&#39;\r\n    // bundleCommand = &quot;ram-bundle&quot;\r\n    //\r\n    //   The path to the CLI configuration file. Default is empty.\r\n    // bundleConfig = file(../rn-cli.config.js)\r\n    //\r\n    //   The name of the generated asset file containing your JS bundle\r\n    // bundleAssetName = &quot;MyApplication.android.bundle&quot;\r\n    //\r\n    //   The entry file for bundle generation. Default is &#39;index.android.js&#39; or &#39;index.js&#39;\r\n    // entryFile = file(&quot;../js/MyApplication.android.js&quot;)\r\n    //\r\n    //   A list of extra flags to pass to the &#39;bundle&#39; commands.\r\n    //   See https://github.com/react-native-community/cli/blob/main/docs/commands.md#bundle\r\n    // extraPackagerArgs = []\r\n\r\n    /* Hermes Commands */\r\n    //   The hermes compiler command to run. By default it is &#39;hermesc&#39;\r\n    // hermesCommand = &quot;$rootDir/my-custom-hermesc/bin/hermesc&quot;\r\n    //\r\n    //   The list of flags to pass to the Hermes compiler. By default is &quot;-O&quot;, &quot;-output-source-map&quot;\r\n    // hermesFlags = [&quot;-O&quot;, &quot;-output-source-map&quot;]\r\n}\r\n\r\n/**\r\n * Set this to true to Run Proguard on Release builds to minify the Java bytecode.\r\n */\r\ndef enableProguardInReleaseBuilds = false\r\n\r\n/**\r\n * The preferred build flavor of JavaScriptCore (JSC)\r\n *\r\n * For example, to use the international variant, you can use:\r\n * `def jscFlavor = &#39;org.webkit:android-jsc-intl:+&#39;`\r\n *\r\n * The international variant includes ICU i18n library and necessary data\r\n * allowing to use e.g. `Date.toLocaleString` and `String.localeCompare` that\r\n * give correct results when using with locales other than en-US. Note that\r\n * this variant is about 6MiB larger per architecture than default.\r\n */\r\ndef jscFlavor = &#39;org.webkit:android-jsc:+&#39;\r\n//def jscFlavor = &#39;org.webkit:android-jsc-intl:+&#39;\r\n\r\nandroid {\r\n    ndkVersion rootProject.ext.ndkVersion\r\n\r\n    compileSdkVersion rootProject.ext.compileSdkVersion\r\n\r\n    namespace &quot;com.awesomeproject&quot;\r\n    defaultConfig {\r\n        applicationId &quot;com.awesomeproject&quot;\r\n        minSdkVersion rootProject.ext.minSdkVersion\r\n        targetSdkVersion rootProject.ext.targetSdkVersion\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n        // react-native-iap: we only use the Google Play flavor\r\n        missingDimensionStrategy &#39;store&#39;, &#39;play&#39;\r\n    }\r\n    signingConfigs {\r\n        debug {\r\n            storeFile file(&#39;debug.keystore&#39;)\r\n            storePassword &#39;android&#39;\r\n            keyAlias &#39;androiddebugkey&#39;\r\n            keyPassword &#39;android&#39;\r\n        }\r\n    }\r\n    buildTypes {\r\n        debug {\r\n            signingConfig signingConfigs.debug\r\n        }\r\n        release {\r\n            // Caution! In production, you need to generate your own keystore file.\r\n            // see https://reactnative.dev/docs/signed-apk-android.\r\n            signingConfig signingConfigs.debug\r\n            minifyEnabled enableProguardInReleaseBuilds\r\n            proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n    // The version of react-native is set by the React Native Gradle Plugin\r\n    implementation(&quot;com.facebook.react:react-android&quot;)\r\n    //implementation project(&#39;:react-native-camera&#39;)\r\n\r\n    debugImplementation(&quot;com.facebook.flipper:flipper:0.231.0&quot;)\r\n    debugImplementation(&quot;com.facebook.flipper:flipper-network-plugin:0.231.0&quot;) {\r\n        exclude group:&#39;com.squareup.okhttp3&#39;, module:&#39;okhttp&#39;\r\n    }\r\n\r\n    debugImplementation(&quot;com.facebook.flipper:flipper-fresco-plugin:0.182.0&quot;)\r\n    if (hermesEnabled.toBoolean()) {\r\n        implementation(&quot;com.facebook.react:hermes-android&quot;)\r\n    } else {\r\n        implementation jscFlavor\r\n    }\r\n}\r\n\r\napply from: file(&quot;../../node_modules/@react-native-community/cli-platform-android/native_modules.gradle&quot;); applyNativeModulesAppBuildGradle(project)\r\n```\r\n\r\nand here is **package.json** file contents:\r\n\r\n```\r\n{\r\n  &quot;name&quot;: &quot;AwesomeProject&quot;,\r\n  &quot;version&quot;: &quot;0.0.1&quot;,\r\n  &quot;private&quot;: true,\r\n  &quot;scripts&quot;: {\r\n    &quot;android&quot;: &quot;react-native run-android&quot;,\r\n    &quot;ios&quot;: &quot;react-native run-ios&quot;,\r\n    &quot;lint&quot;: &quot;eslint .&quot;,\r\n    &quot;start&quot;: &quot;react-native start&quot;,\r\n    &quot;test&quot;: &quot;jest&quot;\r\n  },\r\n  &quot;dependencies&quot;: {\r\n    &quot;react&quot;: &quot;18.2.0&quot;,\r\n    &quot;react-native&quot;: &quot;0.72.6&quot;,\r\n    &quot;react-native-camera&quot;: &quot;^4.2.1&quot;,\r\n    &quot;react-native-fs&quot;: &quot;^2.20.0&quot;,\r\n    &quot;react-native-image-picker&quot;: &quot;^7.0.1&quot;,\r\n    &quot;react-native-keyboard-aware-scroll-view&quot;: &quot;^0.9.5&quot;,\r\n    &quot;react-native-permissions&quot;: &quot;^3.10.0&quot;,\r\n    &quot;react-native-vision-camera&quot;: &quot;^3.5.1&quot;,\r\n    &quot;react-native-worklets-core&quot;: &quot;^0.2.2&quot;,\r\n    &quot;@react-native-async-storage/async-storage&quot;: &quot;^1.17.5&quot;\r\n  },\r\n  &quot;devDependencies&quot;: {\r\n    &quot;@babel/core&quot;: &quot;^7.20.0&quot;,\r\n    &quot;@babel/preset-env&quot;: &quot;^7.20.0&quot;,\r\n    &quot;@babel/runtime&quot;: &quot;^7.20.0&quot;,\r\n    &quot;@react-native/eslint-config&quot;: &quot;^0.72.2&quot;,\r\n    &quot;@react-native/metro-config&quot;: &quot;^0.72.11&quot;,\r\n    &quot;@tsconfig/react-native&quot;: &quot;^3.0.0&quot;,\r\n    &quot;@types/react&quot;: &quot;^18.0.24&quot;,\r\n    &quot;@types/react-test-renderer&quot;: &quot;^18.0.0&quot;,\r\n    &quot;babel-jest&quot;: &quot;^29.2.1&quot;,\r\n    &quot;eslint&quot;: &quot;^8.19.0&quot;,\r\n    &quot;jest&quot;: &quot;^29.2.1&quot;,\r\n    &quot;metro-react-native-babel-preset&quot;: &quot;0.76.8&quot;,\r\n    &quot;prettier&quot;: &quot;^2.4.1&quot;,\r\n    &quot;react-test-renderer&quot;: &quot;18.2.0&quot;,\r\n    &quot;typescript&quot;: &quot;4.8.4&quot;\r\n  },\r\n  &quot;engines&quot;: {\r\n    &quot;node&quot;: &quot;&gt;=16&quot;\r\n  }\r\n}\r\n```\r\n\r\ninfo Starting JS server...\r\ninfo Installing the app...\r\n\r\n&gt; Configure project :react-native-vision-camera\r\n[VisionCamera] react-native-worklets-core found, Frame Processors enabled!\r\n\r\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 9.0.\r\n\r\nYou can use &#39;--warning-mode all&#39; to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\r\n\r\nSee https://docs.gradle.org/8.0.1/userguide/command_line_interface.html#sec:command_line_warnings\r\n5 actionable tasks: 5 up-to-date\r\n\r\ninfo &#128161; Tip: Make sure that you have set up your development environment correctly, by running react-native doctor. To read more about doctor command visit: https://github.com/react-native-community/cli/blob/main/packages/cli-doctor/README.md#doctor\r\n\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nCould not determine the dependencies of task &#39;:app:compileDebugJavaWithJavac&#39;.\r\n&gt; Could not resolve all task dependencies for configuration &#39;:app:debugCompileClasspath&#39;.\r\n   &gt; Could not resolve project :react-native-camera.\r\n     Required by:\r\n         project :app\r\n      &gt; The consumer was configured to find a component for use during compile-time, preferably optimized for Android, as well as attribute &#39;com.android.build.api.attributes.BuildTypeAttr&#39; with value &#39;debug&#39;, attribute &#39;com.android.build.api.attributes.ProductFlavor:store&#39; with value &#39;play&#39;, attribute &#39;com.android.build.api.attributes.AgpVersionAttr&#39; with value &#39;7.4.2&#39;. However we cannot choose between the following variants of project :react-native-camera:\r\n          - generalDebugApiElements\r\n          - mlkitDebugApiElements\r\n        All of them match the consumer attributes:\r\n          - Variant &#39;generalDebugApiElements&#39; capability AwesomeProject:react-native-camera:unspecified declares a component for use during compile-time, as well as attribute &#39;com.android.build.api.attributes.AgpVersionAttr&#39; with value &#39;7.4.2&#39;, attribute &#39;com.android.build.api.attributes.BuildTypeAttr&#39; with value &#39;debug&#39;:\r\n              - Unmatched attributes:\r\n                  - Provides attribute &#39;com.android.build.api.attributes.ProductFlavor:react-native-camera&#39; with value &#39;general&#39; but the consumer didn&#39;t ask for it   \r\n                  - Doesn&#39;t say anything about com.android.build.api.attributes.ProductFlavor:store (required &#39;play&#39;)\r\n                  - Provides attribute &#39;com.android.build.gradle.internal.attributes.VariantAttr&#39; with value &#39;generalDebug&#39; but the consumer didn&#39;t ask for it        \r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for Android)\r\n                  - Provides attribute &#39;react-native-camera&#39; with value &#39;general&#39; but the consumer didn&#39;t ask for it\r\n          - Variant &#39;mlkitDebugApiElements&#39; capability AwesomeProject:react-native-camera:unspecified declares a component for use during compile-time, as well as attribute &#39;com.android.build.api.attributes.AgpVersionAttr&#39; with value &#39;7.4.2&#39;, attribute &#39;com.android.build.api.attributes.BuildTypeAttr&#39; with value &#39;debug&#39;:\r\n              - Unmatched attributes:\r\n                  - Provides attribute &#39;com.android.build.api.attributes.ProductFlavor:react-native-camera&#39; with value &#39;mlkit&#39; but the consumer didn&#39;t ask for it     \r\n                  - Doesn&#39;t say anything about com.android.build.api.attributes.ProductFlavor:store (required &#39;play&#39;)\r\n                  - Provides attribute &#39;com.android.build.gradle.internal.attributes.VariantAttr&#39; with value &#39;mlkitDebug&#39; but the consumer didn&#39;t ask for it\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for Android)\r\n                  - Provides attribute &#39;react-native-camera&#39; with value &#39;mlkit&#39; but the consumer didn&#39;t ask for it\r\n        The following variants were also considered but didn&#39;t match the requested attributes:\r\n          - Variant &#39;generalReleaseApiElements&#39; capability AwesomeProject:react-native-camera:unspecified declares a component for use during compile-time, as well as attribute &#39;com.android.build.api.attributes.AgpVersionAttr&#39; with value &#39;7.4.2&#39;:\r\n              - Incompatible because this component declares a component, as well as attribute &#39;com.android.build.api.attributes.BuildTypeAttr&#39; with value &#39;release&#39; and the consumer needed a component, as well as attribute &#39;com.android.build.api.attributes.BuildTypeAttr&#39; with value &#39;debug&#39;\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about com.android.build.api.attributes.ProductFlavor:store (required &#39;play&#39;)\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for Android)\r\n          - Variant &#39;generalReleaseRuntimeElements&#39; capability AwesomeProject:react-native-camera:unspecified declares a component for use during runtime, as well as \r\nattribute &#39;com.android.build.api.attributes.AgpVersionAttr&#39; with value &#39;7.4.2&#39;:\r\n              - Incompatible because this component declares a component, as well as attribute &#39;com.android.build.api.attributes.BuildTypeAttr&#39; with value &#39;release&#39; and the consumer needed a component, as well as attribute &#39;com.android.build.api.attributes.BuildTypeAttr&#39; with value &#39;debug&#39;\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about com.android.build.api.attributes.ProductFlavor:store (required &#39;play&#39;)\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for Android)\r\n          - Variant &#39;mlkitReleaseApiElements&#39; capability AwesomeProject:react-native-camera:unspecified declares a component for use during compile-time, as well as attribute &#39;com.android.build.api.attributes.AgpVersionAttr&#39; with value &#39;7.4.2&#39;:\r\n              - Incompatible because this component declares a component, as well as attribute &#39;com.android.build.api.attributes.BuildTypeAttr&#39; with value &#39;release&#39; and the consumer needed a component, as well as attribute &#39;com.android.build.api.attributes.BuildTypeAttr&#39; with value &#39;debug&#39;\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about com.android.build.api.attributes.ProductFlavor:store (required &#39;play&#39;)\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for Android)\r\n          - Variant &#39;mlkitReleaseRuntimeElements&#39; capability AwesomeProject:react-native-camera:unspecified declares a component for use during runtime, as well as attribute &#39;com.android.build.api.attributes.AgpVersionAttr&#39; with value &#39;7.4.2&#39;:\r\n              - Incompatible because this component declares a component, as well as attribute &#39;com.android.build.api.attributes.BuildTypeAttr&#39; with value &#39;release&#39; and the consumer needed a component, as well as attribute &#39;com.android.build.api.attributes.BuildTypeAttr&#39; with value &#39;debug&#39;\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about com.android.build.api.attributes.ProductFlavor:store (required &#39;play&#39;)\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for Android)\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 45s\r\nerror Failed to install the app.\r\ninfo Run CLI with --verbose flag for more details.","title":"What&#39;s wrong here with downloading react native vision camera?","body":"<p>I have updated the dependencies in build.gradle file</p>\n<p>But this keeps appearing and I don't know what the problem is?</p>\n<p>here is <strong>android\\build.gradle</strong> file:</p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    ext {\n        buildToolsVersion = &quot;33.0.0&quot;\n        minSdkVersion = 26\n        compileSdkVersion = 33\n        targetSdkVersion = 33\n\n        // We use NDK 23 which has both M1 support and is the side-by-side NDK version from AGP.\n        ndkVersion = &quot;23.1.7779620&quot;\n    }\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath(&quot;com.android.tools.build:gradle:2.3.0&quot;)\n        classpath(&quot;com.facebook.react:react-native-gradle-plugin&quot;)\n    }\n}\n</code></pre>\n<p>and here is <strong>android\\app\\build.gradle</strong> file contents:</p>\n<pre><code>apply plugin: &quot;com.android.application&quot;\napply plugin: &quot;com.facebook.react&quot;\n\n\n/**\n * This is the configuration block to customize your React Native Android app.\n * By default you don't need to apply any configuration, just uncomment the lines you need.\n */\nreact {\n    /* Folders */\n    //   The root of your project, i.e. where &quot;package.json&quot; lives. Default is '..'\n    // root = file(&quot;../&quot;)\n    //   The folder where the react-native NPM package is. Default is ../node_modules/react-native\n    // reactNativeDir = file(&quot;../node_modules/react-native&quot;)\n    //   The folder where the react-native Codegen package is. Default is ../node_modules/@react-native/codegen\n    // codegenDir = file(&quot;../node_modules/@react-native/codegen&quot;)\n    //   The cli.js file which is the React Native CLI entrypoint. Default is ../node_modules/react-native/cli.js\n    // cliFile = file(&quot;../node_modules/react-native/cli.js&quot;)\n\n    /* Variants */\n    //   The list of variants to that are debuggable. For those we're going to\n    //   skip the bundling of the JS bundle and the assets. By default is just 'debug'.\n    //   If you add flavors like lite, prod, etc. you'll have to list your debuggableVariants.\n    // debuggableVariants = [&quot;liteDebug&quot;, &quot;prodDebug&quot;]\n\n    /* Bundling */\n    //   A list containing the node command and its flags. Default is just 'node'.\n    // nodeExecutableAndArgs = [&quot;node&quot;]\n    //\n    //   The command to run when bundling. By default is 'bundle'\n    // bundleCommand = &quot;ram-bundle&quot;\n    //\n    //   The path to the CLI configuration file. Default is empty.\n    // bundleConfig = file(../rn-cli.config.js)\n    //\n    //   The name of the generated asset file containing your JS bundle\n    // bundleAssetName = &quot;MyApplication.android.bundle&quot;\n    //\n    //   The entry file for bundle generation. Default is 'index.android.js' or 'index.js'\n    // entryFile = file(&quot;../js/MyApplication.android.js&quot;)\n    //\n    //   A list of extra flags to pass to the 'bundle' commands.\n    //   See https://github.com/react-native-community/cli/blob/main/docs/commands.md#bundle\n    // extraPackagerArgs = []\n\n    /* Hermes Commands */\n    //   The hermes compiler command to run. By default it is 'hermesc'\n    // hermesCommand = &quot;$rootDir/my-custom-hermesc/bin/hermesc&quot;\n    //\n    //   The list of flags to pass to the Hermes compiler. By default is &quot;-O&quot;, &quot;-output-source-map&quot;\n    // hermesFlags = [&quot;-O&quot;, &quot;-output-source-map&quot;]\n}\n\n/**\n * Set this to true to Run Proguard on Release builds to minify the Java bytecode.\n */\ndef enableProguardInReleaseBuilds = false\n\n/**\n * The preferred build flavor of JavaScriptCore (JSC)\n *\n * For example, to use the international variant, you can use:\n * `def jscFlavor = 'org.webkit:android-jsc-intl:+'`\n *\n * The international variant includes ICU i18n library and necessary data\n * allowing to use e.g. `Date.toLocaleString` and `String.localeCompare` that\n * give correct results when using with locales other than en-US. Note that\n * this variant is about 6MiB larger per architecture than default.\n */\ndef jscFlavor = 'org.webkit:android-jsc:+'\n//def jscFlavor = 'org.webkit:android-jsc-intl:+'\n\nandroid {\n    ndkVersion rootProject.ext.ndkVersion\n\n    compileSdkVersion rootProject.ext.compileSdkVersion\n\n    namespace &quot;com.awesomeproject&quot;\n    defaultConfig {\n        applicationId &quot;com.awesomeproject&quot;\n        minSdkVersion rootProject.ext.minSdkVersion\n        targetSdkVersion rootProject.ext.targetSdkVersion\n        versionCode 1\n        versionName &quot;1.0&quot;\n        // react-native-iap: we only use the Google Play flavor\n        missingDimensionStrategy 'store', 'play'\n    }\n    signingConfigs {\n        debug {\n            storeFile file('debug.keystore')\n            storePassword 'android'\n            keyAlias 'androiddebugkey'\n            keyPassword 'android'\n        }\n    }\n    buildTypes {\n        debug {\n            signingConfig signingConfigs.debug\n        }\n        release {\n            // Caution! In production, you need to generate your own keystore file.\n            // see https://reactnative.dev/docs/signed-apk-android.\n            signingConfig signingConfigs.debug\n            minifyEnabled enableProguardInReleaseBuilds\n            proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;\n        }\n    }\n}\n\ndependencies {\n    // The version of react-native is set by the React Native Gradle Plugin\n    implementation(&quot;com.facebook.react:react-android&quot;)\n    //implementation project(':react-native-camera')\n\n    debugImplementation(&quot;com.facebook.flipper:flipper:0.231.0&quot;)\n    debugImplementation(&quot;com.facebook.flipper:flipper-network-plugin:0.231.0&quot;) {\n        exclude group:'com.squareup.okhttp3', module:'okhttp'\n    }\n\n    debugImplementation(&quot;com.facebook.flipper:flipper-fresco-plugin:0.182.0&quot;)\n    if (hermesEnabled.toBoolean()) {\n        implementation(&quot;com.facebook.react:hermes-android&quot;)\n    } else {\n        implementation jscFlavor\n    }\n}\n\napply from: file(&quot;../../node_modules/@react-native-community/cli-platform-android/native_modules.gradle&quot;); applyNativeModulesAppBuildGradle(project)\n</code></pre>\n<p>and here is <strong>package.json</strong> file contents:</p>\n<pre><code>{\n  &quot;name&quot;: &quot;AwesomeProject&quot;,\n  &quot;version&quot;: &quot;0.0.1&quot;,\n  &quot;private&quot;: true,\n  &quot;scripts&quot;: {\n    &quot;android&quot;: &quot;react-native run-android&quot;,\n    &quot;ios&quot;: &quot;react-native run-ios&quot;,\n    &quot;lint&quot;: &quot;eslint .&quot;,\n    &quot;start&quot;: &quot;react-native start&quot;,\n    &quot;test&quot;: &quot;jest&quot;\n  },\n  &quot;dependencies&quot;: {\n    &quot;react&quot;: &quot;18.2.0&quot;,\n    &quot;react-native&quot;: &quot;0.72.6&quot;,\n    &quot;react-native-camera&quot;: &quot;^4.2.1&quot;,\n    &quot;react-native-fs&quot;: &quot;^2.20.0&quot;,\n    &quot;react-native-image-picker&quot;: &quot;^7.0.1&quot;,\n    &quot;react-native-keyboard-aware-scroll-view&quot;: &quot;^0.9.5&quot;,\n    &quot;react-native-permissions&quot;: &quot;^3.10.0&quot;,\n    &quot;react-native-vision-camera&quot;: &quot;^3.5.1&quot;,\n    &quot;react-native-worklets-core&quot;: &quot;^0.2.2&quot;,\n    &quot;@react-native-async-storage/async-storage&quot;: &quot;^1.17.5&quot;\n  },\n  &quot;devDependencies&quot;: {\n    &quot;@babel/core&quot;: &quot;^7.20.0&quot;,\n    &quot;@babel/preset-env&quot;: &quot;^7.20.0&quot;,\n    &quot;@babel/runtime&quot;: &quot;^7.20.0&quot;,\n    &quot;@react-native/eslint-config&quot;: &quot;^0.72.2&quot;,\n    &quot;@react-native/metro-config&quot;: &quot;^0.72.11&quot;,\n    &quot;@tsconfig/react-native&quot;: &quot;^3.0.0&quot;,\n    &quot;@types/react&quot;: &quot;^18.0.24&quot;,\n    &quot;@types/react-test-renderer&quot;: &quot;^18.0.0&quot;,\n    &quot;babel-jest&quot;: &quot;^29.2.1&quot;,\n    &quot;eslint&quot;: &quot;^8.19.0&quot;,\n    &quot;jest&quot;: &quot;^29.2.1&quot;,\n    &quot;metro-react-native-babel-preset&quot;: &quot;0.76.8&quot;,\n    &quot;prettier&quot;: &quot;^2.4.1&quot;,\n    &quot;react-test-renderer&quot;: &quot;18.2.0&quot;,\n    &quot;typescript&quot;: &quot;4.8.4&quot;\n  },\n  &quot;engines&quot;: {\n    &quot;node&quot;: &quot;&gt;=16&quot;\n  }\n}\n</code></pre>\n<p>info Starting JS server...\ninfo Installing the app...</p>\n<blockquote>\n<p>Configure project :react-native-vision-camera\n[VisionCamera] react-native-worklets-core found, Frame Processors enabled!</p>\n</blockquote>\n<p>Deprecated Gradle features were used in this build, making it incompatible with Gradle 9.0.</p>\n<p>You can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.</p>\n<p>See <a href=\"https://docs.gradle.org/8.0.1/userguide/command_line_interface.html#sec:command_line_warnings\" rel=\"nofollow noreferrer\">https://docs.gradle.org/8.0.1/userguide/command_line_interface.html#sec:command_line_warnings</a>\n5 actionable tasks: 5 up-to-date</p>\n<p>info  Tip: Make sure that you have set up your development environment correctly, by running react-native doctor. To read more about doctor command visit: <a href=\"https://github.com/react-native-community/cli/blob/main/packages/cli-doctor/README.md#doctor\" rel=\"nofollow noreferrer\">https://github.com/react-native-community/cli/blob/main/packages/cli-doctor/README.md#doctor</a></p>\n<p>FAILURE: Build failed with an exception.</p>\n<ul>\n<li>What went wrong:\nCould not determine the dependencies of task ':app:compileDebugJavaWithJavac'.</li>\n</ul>\n<blockquote>\n<p>Could not resolve all task dependencies for configuration ':app:debugCompileClasspath'.\nCould not resolve project :react-native-camera.\nRequired by:\nproject :app\n&gt; The consumer was configured to find a component for use during compile-time, preferably optimized for Android, as well as attribute 'com.android.build.api.attributes.BuildTypeAttr' with value 'debug', attribute 'com.android.build.api.attributes.ProductFlavor:store' with value 'play', attribute 'com.android.build.api.attributes.AgpVersionAttr' with value '7.4.2'. However we cannot choose between the following variants of project :react-native-camera:\n- generalDebugApiElements\n- mlkitDebugApiElements\nAll of them match the consumer attributes:\n- Variant 'generalDebugApiElements' capability AwesomeProject:react-native-camera:unspecified declares a component for use during compile-time, as well as attribute 'com.android.build.api.attributes.AgpVersionAttr' with value '7.4.2', attribute 'com.android.build.api.attributes.BuildTypeAttr' with value 'debug':\n- Unmatched attributes:\n- Provides attribute 'com.android.build.api.attributes.ProductFlavor:react-native-camera' with value 'general' but the consumer didn't ask for it<br />\n- Doesn't say anything about com.android.build.api.attributes.ProductFlavor:store (required 'play')\n- Provides attribute 'com.android.build.gradle.internal.attributes.VariantAttr' with value 'generalDebug' but the consumer didn't ask for it<br />\n- Doesn't say anything about its target Java environment (preferred optimized for Android)\n- Provides attribute 'react-native-camera' with value 'general' but the consumer didn't ask for it\n- Variant 'mlkitDebugApiElements' capability AwesomeProject:react-native-camera:unspecified declares a component for use during compile-time, as well as attribute 'com.android.build.api.attributes.AgpVersionAttr' with value '7.4.2', attribute 'com.android.build.api.attributes.BuildTypeAttr' with value 'debug':\n- Unmatched attributes:\n- Provides attribute 'com.android.build.api.attributes.ProductFlavor:react-native-camera' with value 'mlkit' but the consumer didn't ask for it<br />\n- Doesn't say anything about com.android.build.api.attributes.ProductFlavor:store (required 'play')\n- Provides attribute 'com.android.build.gradle.internal.attributes.VariantAttr' with value 'mlkitDebug' but the consumer didn't ask for it\n- Doesn't say anything about its target Java environment (preferred optimized for Android)\n- Provides attribute 'react-native-camera' with value 'mlkit' but the consumer didn't ask for it\nThe following variants were also considered but didn't match the requested attributes:\n- Variant 'generalReleaseApiElements' capability AwesomeProject:react-native-camera:unspecified declares a component for use during compile-time, as well as attribute 'com.android.build.api.attributes.AgpVersionAttr' with value '7.4.2':\n- Incompatible because this component declares a component, as well as attribute 'com.android.build.api.attributes.BuildTypeAttr' with value 'release' and the consumer needed a component, as well as attribute 'com.android.build.api.attributes.BuildTypeAttr' with value 'debug'\n- Other compatible attributes:\n- Doesn't say anything about com.android.build.api.attributes.ProductFlavor:store (required 'play')\n- Doesn't say anything about its target Java environment (preferred optimized for Android)\n- Variant 'generalReleaseRuntimeElements' capability AwesomeProject:react-native-camera:unspecified declares a component for use during runtime, as well as\nattribute 'com.android.build.api.attributes.AgpVersionAttr' with value '7.4.2':\n- Incompatible because this component declares a component, as well as attribute 'com.android.build.api.attributes.BuildTypeAttr' with value 'release' and the consumer needed a component, as well as attribute 'com.android.build.api.attributes.BuildTypeAttr' with value 'debug'\n- Other compatible attributes:\n- Doesn't say anything about com.android.build.api.attributes.ProductFlavor:store (required 'play')\n- Doesn't say anything about its target Java environment (preferred optimized for Android)\n- Variant 'mlkitReleaseApiElements' capability AwesomeProject:react-native-camera:unspecified declares a component for use during compile-time, as well as attribute 'com.android.build.api.attributes.AgpVersionAttr' with value '7.4.2':\n- Incompatible because this component declares a component, as well as attribute 'com.android.build.api.attributes.BuildTypeAttr' with value 'release' and the consumer needed a component, as well as attribute 'com.android.build.api.attributes.BuildTypeAttr' with value 'debug'\n- Other compatible attributes:\n- Doesn't say anything about com.android.build.api.attributes.ProductFlavor:store (required 'play')\n- Doesn't say anything about its target Java environment (preferred optimized for Android)\n- Variant 'mlkitReleaseRuntimeElements' capability AwesomeProject:react-native-camera:unspecified declares a component for use during runtime, as well as attribute 'com.android.build.api.attributes.AgpVersionAttr' with value '7.4.2':\n- Incompatible because this component declares a component, as well as attribute 'com.android.build.api.attributes.BuildTypeAttr' with value 'release' and the consumer needed a component, as well as attribute 'com.android.build.api.attributes.BuildTypeAttr' with value 'debug'\n- Other compatible attributes:\n- Doesn't say anything about com.android.build.api.attributes.ProductFlavor:store (required 'play')\n- Doesn't say anything about its target Java environment (preferred optimized for Android)</p>\n</blockquote>\n<ul>\n<li>Try:</li>\n</ul>\n<blockquote>\n<p>Run with --stacktrace option to get the stack trace.\nRun with --info or --debug option to get more log output.\nRun with --scan to get full insights.</p>\n</blockquote>\n<ul>\n<li>Get more help at <a href=\"https://help.gradle.org\" rel=\"nofollow noreferrer\">https://help.gradle.org</a></li>\n</ul>\n<p>BUILD FAILED in 45s\nerror Failed to install the app.\ninfo Run CLI with --verbose flag for more details.</p>\n"},{"tags":["java","sql","spring","spring-boot","jpa"],"comments":[{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1697786404,"post_id":77328840,"comment_id":136325902,"body_markdown":"Your title doesn&#39;t seem really related to your actual question. Please make sure your title summarizes your question.","body":"Your title doesn&#39;t seem really related to your actual question. Please make sure your title summarizes your question."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1697791925,"post_id":77328840,"comment_id":136326847,"body_markdown":"Does this answer your question? [StackoverflowError JPA in OneToMany relationship](https://stackoverflow.com/questions/44482449/stackoverflowerror-jpa-in-onetomany-relationship)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/44482449/stackoverflowerror-jpa-in-onetomany-relationship\">StackoverflowError JPA in OneToMany relationship</a>"},{"owner":{"account_id":11168499,"reputation":87,"user_id":8196323,"display_name":"TasteMyBomb"},"score":0,"creation_date":1697802727,"post_id":77328840,"comment_id":136328825,"body_markdown":"@RobSpoor It did not worked","body":"@RobSpoor It did not worked"},{"owner":{"account_id":120605,"reputation":24173,"user_id":313137,"display_name":"Romain Hippeau"},"score":0,"creation_date":1697803808,"post_id":77328840,"comment_id":136329016,"body_markdown":"have you looked at: https://www.baeldung.com/jpa-many-to-many","body":"have you looked at: <a href=\"https://www.baeldung.com/jpa-many-to-many\" rel=\"nofollow noreferrer\">baeldung.com/jpa-many-to-many</a>"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1697811706,"post_id":77328840,"comment_id":136330580,"body_markdown":"@TasteMyBomb then convert your entities into DTOs (records can make this easy) that do not have the bidirectional relation. Because it&#39;s this relation that&#39;s causing your issue - if a user is serialized, all of its courses are serialized, and for each course all of its users. This continues until the error is thrown because Jackson keeps encountering the same objects.","body":"@TasteMyBomb then convert your entities into DTOs (records can make this easy) that do not have the bidirectional relation. Because it&#39;s this relation that&#39;s causing your issue - if a user is serialized, all of its courses are serialized, and for each course all of its users. This continues until the error is thrown because Jackson keeps encountering the same objects."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1697813965,"post_id":77328840,"comment_id":136331030,"body_markdown":"This has nothing to do with JPA - check the stack trace. It shows Course.hashCode calling User.hashCode calling Role.hashCode. You have your own endless recursive loop because you have put in relationships in your hashcode calculations. Since you don&#39;t even know you&#39;ve done it, I&#39;d bet you are using Lombok and let it generate the hashcode, equals and likely toString causing useless code. Remove them and your issue will go away. PS your question states &quot;I have defined everything ok&quot;; assumptions like that cause you to leave out aspects from investigation or look clearly at what you have","body":"This has nothing to do with JPA - check the stack trace. It shows Course.hashCode calling User.hashCode calling Role.hashCode. You have your own endless recursive loop because you have put in relationships in your hashcode calculations. Since you don&#39;t even know you&#39;ve done it, I&#39;d bet you are using Lombok and let it generate the hashcode, equals and likely toString causing useless code. Remove them and your issue will go away. PS your question states &quot;I have defined everything ok&quot;; assumptions like that cause you to leave out aspects from investigation or look clearly at what you have"}],"answers":[{"tags":[],"owner":{"account_id":17498155,"reputation":21,"user_id":12689021,"display_name":"xtreme"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698150385,"creation_date":1698150385,"answer_id":77352033,"question_id":77328840,"body_markdown":"As I understand you want implement api which binds courses to given users. \r\nSo I suggest to use many-to-many relationship with extra entity between User and Course entities, then you can bind course with user by creating new row in extra table. \r\nI suggest use of DTOs in data transfer. \r\nIn your case, this API would probably be implemented as follows:\r\n\r\nUser entity:\r\n\r\n    @Entity\r\n    @Table(name = &quot;users&quot;)\r\n    public class User {\r\n      @Id\r\n      private Long id;\r\n      //other fiels\r\n    }\r\n\r\nCourse entity:\r\n\r\n    @Entity\r\n    @Table(name = &quot;course&quot;)\r\n    public class Course{\r\n      @Id\r\n      private Long id;\r\n      //other fields\r\n    }\r\n\r\nExtra Table between entities UserCourse:\r\n\r\n    @Entity\r\n    @Table(name = &quot;users_courses&quot;)\r\n    public class UserCourse {\r\n      @Id\r\n      private Long id;\r\n      @ManyToOne\r\n      @JoinColumn(name = &quot;user_id&quot;)\r\n      private User user;\r\n      @ManyToOne\r\n      @JoinColumn(name = &quot;course_id&quot;)\r\n      private Course course;\r\n    }\r\n\r\nYou can create instance of UserCourse by given ids.\r\n* In this case you can use binding fields like &#39;enrolled_date&#39;\r\n* And you can use Embadded Id istead of Long id for UserCourse, it uses combination of user and course ids as primary key in users_courses table.","title":"Endless recursion when trying to save an entity in a many-to-many relation In spring","body":"<p>As I understand you want implement api which binds courses to given users.\nSo I suggest to use many-to-many relationship with extra entity between User and Course entities, then you can bind course with user by creating new row in extra table.\nI suggest use of DTOs in data transfer.\nIn your case, this API would probably be implemented as follows:</p>\n<p>User entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;users&quot;)\npublic class User {\n  @Id\n  private Long id;\n  //other fiels\n}\n</code></pre>\n<p>Course entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;course&quot;)\npublic class Course{\n  @Id\n  private Long id;\n  //other fields\n}\n</code></pre>\n<p>Extra Table between entities UserCourse:</p>\n<pre><code>@Entity\n@Table(name = &quot;users_courses&quot;)\npublic class UserCourse {\n  @Id\n  private Long id;\n  @ManyToOne\n  @JoinColumn(name = &quot;user_id&quot;)\n  private User user;\n  @ManyToOne\n  @JoinColumn(name = &quot;course_id&quot;)\n  private Course course;\n}\n</code></pre>\n<p>You can create instance of UserCourse by given ids.</p>\n<ul>\n<li>In this case you can use binding fields like 'enrolled_date'</li>\n<li>And you can use Embadded Id istead of Long id for UserCourse, it uses combination of user and course ids as primary key in users_courses table.</li>\n</ul>\n"}],"owner":{"account_id":11168499,"reputation":87,"user_id":8196323,"display_name":"TasteMyBomb"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1698150385,"creation_date":1697784773,"question_id":77328840,"body_markdown":"I am trying to build an application which handles courses and students. The relation between them is many-to-many. My intention is if I have a list of students and a list of courses, I want to add those students to every course.\r\n\r\nI do not understand why this is not happening, as I have defined everything ok.\r\n\r\n```\r\npublic class User {\r\n...\r\n@JsonIgnore\r\n    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.PERSIST)\r\n    @JoinTable(\r\n            name = &quot;user_course&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;user_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;course_id&quot;)\r\n    )\r\n    private Set&lt;Course&gt; courses;@JsonIgnore\r\n    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.PERSIST)\r\n    @JoinTable(\r\n            name = &quot;user_course&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;user_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;course_id&quot;)\r\n    )\r\n    private Set&lt;Course&gt; courses;\r\n...\r\n}\r\n```\r\n\r\n\r\n```\r\npublic class Course {\r\n...\r\n    @ManyToMany(mappedBy = &quot;courses&quot;, fetch = FetchType.LAZY, cascade = {\r\n            CascadeType.PERSIST,\r\n            CascadeType.MERGE\r\n    })\r\n    private Set&lt;User&gt; students;\r\n...\r\n}\r\n```\r\n\r\nNow, this is the function which is causing my issues. Its mechanism is simple: for each course, check if the user exists and if yes and is a student, add it to the course student list:\r\n\r\n```\r\n@Override\r\n    @Transactional\r\n    public ResponseEntity&lt;String&gt; allocateCoursesToStudents(AllocateCoursesToStudents allocateCoursesToStudents) {\r\n        for (int i = 0; i &lt; allocateCoursesToStudents.getCourseSlugs().size(); i++) {\r\n            Optional&lt;Course&gt; course = coursesRepository.findBySlug(allocateCoursesToStudents.getCourseSlugs().get(i));\r\n            if (course.isEmpty())\r\n                return ResponseEntity.badRequest().body(null);\r\n\r\n            for (int j = 0; j &lt; allocateCoursesToStudents.getUserSlugs().size(); j++) {\r\n                Optional&lt;User&gt; user = userRepository.findBySlug(allocateCoursesToStudents.getUserSlugs().get(j));\r\n                if(user.isEmpty())\r\n                    continue;\r\n\r\n                if(user.get().getRole().getName() != UserRolesEnum.ROLE_STUDENT)\r\n                    continue;\r\n\r\n                course.get().getStudents().add(user.get());\r\n            }\r\n\r\n        }\r\n\r\n        return ResponseEntity.ok().body(null);\r\n    }\r\n```\r\n\r\nWhat am I doing wrong? If i put only ```course.get().getStudents().add(user.get());```, then it produces no modifications in the DB, but if I put ```user.get().getCourses().add(course.get());```, then it produces a stackoverflow error:\r\n\r\n```\r\n\r\njava.lang.StackOverflowError: null\r\n\tat org.hibernate.proxy.pojo.bytebuddy.ByteBuddyInterceptor.intercept(ByteBuddyInterceptor.java:43) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.proxy.ProxyConfiguration$InterceptorDispatcher.intercept(ProxyConfiguration.java:95) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat ro.adfaber.codeschoolsclubs.models.Role$HibernateProxy$Q1UVJJnB.hashCode(Unknown Source) ~[classes/:na]\r\n\tat ro.adfaber.codeschoolsclubs.models.User.hashCode(User.java:17) ~[classes/:na]\r\n\tat ro.adfaber.codeschoolsclubs.models.Course.hashCode(Course.java:17) ~[classes/:na]\r\n\tat java.base/java.util.AbstractSet.hashCode(AbstractSet.java:124) ~[na:na]\r\n\tat org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:459) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat ro.adfaber.codeschoolsclubs.models.User.hashCode(User.java:17) ~[classes/:na]\r\n```\r\n\r\nIn general how to handle JPA Persistance? Why is this happening here? ","title":"Endless recursion when trying to save an entity in a many-to-many relation In spring","body":"<p>I am trying to build an application which handles courses and students. The relation between them is many-to-many. My intention is if I have a list of students and a list of courses, I want to add those students to every course.</p>\n<p>I do not understand why this is not happening, as I have defined everything ok.</p>\n<pre><code>public class User {\n...\n@JsonIgnore\n    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.PERSIST)\n    @JoinTable(\n            name = &quot;user_course&quot;,\n            joinColumns = @JoinColumn(name = &quot;user_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;course_id&quot;)\n    )\n    private Set&lt;Course&gt; courses;@JsonIgnore\n    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.PERSIST)\n    @JoinTable(\n            name = &quot;user_course&quot;,\n            joinColumns = @JoinColumn(name = &quot;user_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;course_id&quot;)\n    )\n    private Set&lt;Course&gt; courses;\n...\n}\n</code></pre>\n<pre><code>public class Course {\n...\n    @ManyToMany(mappedBy = &quot;courses&quot;, fetch = FetchType.LAZY, cascade = {\n            CascadeType.PERSIST,\n            CascadeType.MERGE\n    })\n    private Set&lt;User&gt; students;\n...\n}\n</code></pre>\n<p>Now, this is the function which is causing my issues. Its mechanism is simple: for each course, check if the user exists and if yes and is a student, add it to the course student list:</p>\n<pre><code>@Override\n    @Transactional\n    public ResponseEntity&lt;String&gt; allocateCoursesToStudents(AllocateCoursesToStudents allocateCoursesToStudents) {\n        for (int i = 0; i &lt; allocateCoursesToStudents.getCourseSlugs().size(); i++) {\n            Optional&lt;Course&gt; course = coursesRepository.findBySlug(allocateCoursesToStudents.getCourseSlugs().get(i));\n            if (course.isEmpty())\n                return ResponseEntity.badRequest().body(null);\n\n            for (int j = 0; j &lt; allocateCoursesToStudents.getUserSlugs().size(); j++) {\n                Optional&lt;User&gt; user = userRepository.findBySlug(allocateCoursesToStudents.getUserSlugs().get(j));\n                if(user.isEmpty())\n                    continue;\n\n                if(user.get().getRole().getName() != UserRolesEnum.ROLE_STUDENT)\n                    continue;\n\n                course.get().getStudents().add(user.get());\n            }\n\n        }\n\n        return ResponseEntity.ok().body(null);\n    }\n</code></pre>\n<p>What am I doing wrong? If i put only <code>course.get().getStudents().add(user.get());</code>, then it produces no modifications in the DB, but if I put <code>user.get().getCourses().add(course.get());</code>, then it produces a stackoverflow error:</p>\n<pre><code>\njava.lang.StackOverflowError: null\n    at org.hibernate.proxy.pojo.bytebuddy.ByteBuddyInterceptor.intercept(ByteBuddyInterceptor.java:43) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.proxy.ProxyConfiguration$InterceptorDispatcher.intercept(ProxyConfiguration.java:95) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at ro.adfaber.codeschoolsclubs.models.Role$HibernateProxy$Q1UVJJnB.hashCode(Unknown Source) ~[classes/:na]\n    at ro.adfaber.codeschoolsclubs.models.User.hashCode(User.java:17) ~[classes/:na]\n    at ro.adfaber.codeschoolsclubs.models.Course.hashCode(Course.java:17) ~[classes/:na]\n    at java.base/java.util.AbstractSet.hashCode(AbstractSet.java:124) ~[na:na]\n    at org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:459) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at ro.adfaber.codeschoolsclubs.models.User.hashCode(User.java:17) ~[classes/:na]\n</code></pre>\n<p>In general how to handle JPA Persistance? Why is this happening here?</p>\n"},{"tags":["java","spring-boot","azure-aks","request-headers"],"comments":[{"owner":{"account_id":1646676,"reputation":4100,"user_id":1518100,"accept_rate":96,"display_name":"Lei Yang"},"score":0,"creation_date":1646718032,"post_id":71390460,"comment_id":126186944,"body_markdown":"what is the failing terminal? there maybe some know issue if you use such curl syntax in windows powershell, for example.","body":"what is the failing terminal? there maybe some know issue if you use such curl syntax in windows powershell, for example."}],"owner":{"account_id":13648348,"reputation":21,"user_id":9846891,"display_name":"Rajesh Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2596,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698150149,"creation_date":1646717634,"question_id":71390460,"body_markdown":"While doing a post request to the Spring Boot Rest API it is throwing Servlet Request Binding Exception with error message &quot;Missing request header &#39;client_id&#39; for method parameter of type String&quot;. Even after passing the client_id field in header.\r\n\r\nIt is happening in only one of our testing env. **where request header is containing &quot;_&quot; underscore in its name.** Same code is working in local.  What could be the issue here. Is it something related to deployment file or code related issue.\r\n\r\n\r\n\r\n    curl --location --request POST &#39;http://localhost:7087/test&#39; \\\r\n    --header &#39;accept: application/json&#39; \\\r\n    --header &#39;client_id: test&#39; \\\r\n    --header &#39;Content-Type: application/json&#39; \\\r\n    --data-raw &#39;{\r\n    \t&quot;data&quot;: &quot;test&quot;\r\n    }&#39;\r\n\r\n\r\n\r\n\r\n     @PostMapping(path = &quot;/test&quot;, consumes = MediaType.APPLICATION_JSON_VALUE, produces = MediaType.APPLICATION_JSON_VALUE)\r\n    \tpublic Object pushMsg(@Valid @RequestBody String data, \r\n    \t\t\t@RequestHeader(&quot;client_id&quot;) String clientId) {\r\n                return null;\r\n    \t}","title":"Missing request header &#39;client_id&#39; for method parameter of type String","body":"<p>While doing a post request to the Spring Boot Rest API it is throwing Servlet Request Binding Exception with error message &quot;Missing request header 'client_id' for method parameter of type String&quot;. Even after passing the client_id field in header.</p>\n<p>It is happening in only one of our testing env. <strong>where request header is containing &quot;_&quot; underscore in its name.</strong> Same code is working in local.  What could be the issue here. Is it something related to deployment file or code related issue.</p>\n<pre><code>curl --location --request POST 'http://localhost:7087/test' \\\n--header 'accept: application/json' \\\n--header 'client_id: test' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n    &quot;data&quot;: &quot;test&quot;\n}'\n\n\n\n\n @PostMapping(path = &quot;/test&quot;, consumes = MediaType.APPLICATION_JSON_VALUE, produces = MediaType.APPLICATION_JSON_VALUE)\n    public Object pushMsg(@Valid @RequestBody String data, \n            @RequestHeader(&quot;client_id&quot;) String clientId) {\n            return null;\n    }\n</code></pre>\n"},{"tags":["java","xml","jaxb","spring-ws"],"owner":{"account_id":4787866,"reputation":823,"user_id":3867820,"accept_rate":22,"display_name":"Daniel Pomrehn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698150000,"creation_date":1698150000,"question_id":77351994,"body_markdown":"I am developing a Spring-ws SOAP Webservice. Based on a WSDL I have generated the Java Classes. \r\n\r\nThat is a small piece of my Input XML which makes me some trouble: \r\n````\r\n    &lt;tar:Verkaufsprodukt&gt;\r\n        &lt;pm:Produkt xsi:type=&quot;pm-kf:CT_KfzVersicherung&quot;&gt;\r\n        &lt;/pm:Produkt&gt;\r\n    &lt;/tar:Verkaufsprodukt&gt;\r\n````\r\n\r\nWhen I try to access the Product object in Java I expect that it has the type CT_KfzVersicherung. But it is of type Produkt. \r\n\r\nThe Java classes which are generated through jaxws-maven-plugin looks as the following (shortened to the relevant part): \r\n````\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\n@XmlType(name = &quot;CT_Produkt&quot;, namespace = &quot;http://www.bipro.net/namespace/produktmodell&quot;, propOrder = {\r\n    &quot;sparte&quot;\r\n})\r\n@XmlSeeAlso({\r\n    CTProdukt2 .class\r\n})\r\npublic class CTProdukt\r\n    extends CTProduktbaustein\r\n{\r\n}\r\n````\r\n\r\nCTProdukt2 is like that: \r\n````\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\n@XmlType(name = &quot;CT_Produkt&quot;, namespace = &quot;http://www.bipro.net/namespace/versicherung/produktmodell&quot;, propOrder = {\r\n    &quot;leistungsausschluss&quot;,\r\n    &quot;selbstbeteiligung&quot;,\r\n    &quot;klausel&quot;,\r\n    &quot;bezugsrecht&quot;,\r\n    &quot;wechselVN&quot;\r\n})\r\n@XmlSeeAlso({\r\n    CTKfzVersicherung.class\r\n})\r\npublic class CTProdukt2\r\n    extends CTProdukt\r\n{\r\n}\r\n````\r\n\r\nAnd CTKfzVersicherung is like that: \r\n````\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\n@XmlType(name = &quot;CT_KfzVersicherung&quot;, namespace = &quot;http://www.bipro.net/namespace/versicherung/produktmodell/kraftfahrt&quot;, propOrder = {\r\n    &quot;versichertesFahrzeug&quot;,\r\n    &quot;versicherteFahrzeuggruppe&quot;,\r\n    &quot;flottenVersicherungsnehmer&quot;,\r\n    &quot;vorversicherung&quot;,\r\n    &quot;summeLeistungWert&quot;\r\n})\r\npublic class CTKfzVersicherung\r\n    extends CTProdukt2\r\n{\r\n}\r\n````\r\n\r\nDo I need to modify anything in my Java Generation process out from the WSDL?","title":"Unmarshallig XML Objects to Java","body":"<p>I am developing a Spring-ws SOAP Webservice. Based on a WSDL I have generated the Java Classes.</p>\n<p>That is a small piece of my Input XML which makes me some trouble:</p>\n<pre><code>    &lt;tar:Verkaufsprodukt&gt;\n        &lt;pm:Produkt xsi:type=&quot;pm-kf:CT_KfzVersicherung&quot;&gt;\n        &lt;/pm:Produkt&gt;\n    &lt;/tar:Verkaufsprodukt&gt;\n</code></pre>\n<p>When I try to access the Product object in Java I expect that it has the type CT_KfzVersicherung. But it is of type Produkt.</p>\n<p>The Java classes which are generated through jaxws-maven-plugin looks as the following (shortened to the relevant part):</p>\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;CT_Produkt&quot;, namespace = &quot;http://www.bipro.net/namespace/produktmodell&quot;, propOrder = {\n    &quot;sparte&quot;\n})\n@XmlSeeAlso({\n    CTProdukt2 .class\n})\npublic class CTProdukt\n    extends CTProduktbaustein\n{\n}\n</code></pre>\n<p>CTProdukt2 is like that:</p>\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;CT_Produkt&quot;, namespace = &quot;http://www.bipro.net/namespace/versicherung/produktmodell&quot;, propOrder = {\n    &quot;leistungsausschluss&quot;,\n    &quot;selbstbeteiligung&quot;,\n    &quot;klausel&quot;,\n    &quot;bezugsrecht&quot;,\n    &quot;wechselVN&quot;\n})\n@XmlSeeAlso({\n    CTKfzVersicherung.class\n})\npublic class CTProdukt2\n    extends CTProdukt\n{\n}\n</code></pre>\n<p>And CTKfzVersicherung is like that:</p>\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;CT_KfzVersicherung&quot;, namespace = &quot;http://www.bipro.net/namespace/versicherung/produktmodell/kraftfahrt&quot;, propOrder = {\n    &quot;versichertesFahrzeug&quot;,\n    &quot;versicherteFahrzeuggruppe&quot;,\n    &quot;flottenVersicherungsnehmer&quot;,\n    &quot;vorversicherung&quot;,\n    &quot;summeLeistungWert&quot;\n})\npublic class CTKfzVersicherung\n    extends CTProdukt2\n{\n}\n</code></pre>\n<p>Do I need to modify anything in my Java Generation process out from the WSDL?</p>\n"},{"tags":["java","android","flutter","gradle"],"comments":[{"owner":{"account_id":5811308,"reputation":480,"user_id":4582261,"accept_rate":56,"display_name":"fajar ainul"},"score":1,"creation_date":1595914204,"post_id":62728362,"comment_id":111630487,"body_markdown":"Did you found any solution? I face this problem too..  @Radi Cho","body":"Did you found any solution? I face this problem too..  @Radi Cho"},{"owner":{"account_id":18002723,"reputation":481,"user_id":13084288,"display_name":"John"},"score":0,"creation_date":1595944220,"post_id":62728362,"comment_id":111644665,"body_markdown":"@fajarainul Check out my comment on GitHub with possible workaround: https://github.com/flutter/flutter/issues/60831#issuecomment-654070155","body":"@fajarainul Check out my comment on GitHub with possible workaround: <a href=\"https://github.com/flutter/flutter/issues/60831#issuecomment-654070155\" rel=\"nofollow noreferrer\">github.com/flutter/flutter/issues/60831#issuecomment-6540701&zwnj;&#8203;55</a>"},{"owner":{"account_id":5811308,"reputation":480,"user_id":4582261,"accept_rate":56,"display_name":"fajar ainul"},"score":0,"creation_date":1595988957,"post_id":62728362,"comment_id":111662020,"body_markdown":"your solution is not working for me. Do you have any other solution?","body":"your solution is not working for me. Do you have any other solution?"},{"owner":{"account_id":5811308,"reputation":480,"user_id":4582261,"accept_rate":56,"display_name":"fajar ainul"},"score":0,"creation_date":1595989256,"post_id":62728362,"comment_id":111662071,"body_markdown":"My project use firebase cloud messaging https://pub.dev/packages/firebase_messaging/versions/5.1.8 (I use v.5.1.8 and cant update for several reasons) and want to handle background messages. When I add Application.java to AndroidManifest.xml an error occurred. This is the log \n\nDidn&#39;t find class &quot;id.kasku.kasku_mobile_flutter.Application&quot; on path: DexPathList[[zip file &quot;/data/app/id.kasku.kasku_mobile_flutter-2/base.apk&quot;].","body":"My project use firebase cloud messaging <a href=\"https://pub.dev/packages/firebase_messaging/versions/5.1.8\" rel=\"nofollow noreferrer\">pub.dev/packages/firebase_messaging/versions/5.1.8</a> (I use v.5.1.8 and cant update for several reasons) and want to handle background messages. When I add Application.java to AndroidManifest.xml an error occurred. This is the log   Didn&#39;t find class &quot;id.kasku.kasku_mobile_flutter.Application&quot; on path: DexPathList[[zip file &quot;/data/app/id.kasku.kasku_mobile_flutter-2/base.apk&quot;]."}],"answers":[{"tags":[],"owner":{"account_id":18002723,"reputation":481,"user_id":13084288,"display_name":"John"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1604846465,"creation_date":1604846465,"answer_id":64739360,"question_id":62728362,"body_markdown":"My findings suggest this is not an issue with Flutter itself, but occurs after particular Flutter package installations.\r\nAfter upgrading Gradle and the AndroidX libraries, the crash disappeared and then re-appeared after another Flutter package addition. Then I cleaned _(`build-&gt;clean` in the IDE)_ the android project again and it was fixed once again. So it may be due to some Gradle confusions in my environment and probably it just doesn&#39;t compile some classes the right way from time to time.","title":"Flutter crashes on startup: Didn&#39;t find class .MainActivity on path DexPathList","body":"<p>My findings suggest this is not an issue with Flutter itself, but occurs after particular Flutter package installations.\nAfter upgrading Gradle and the AndroidX libraries, the crash disappeared and then re-appeared after another Flutter package addition. Then I cleaned <em>(<code>build-&gt;clean</code> in the IDE)</em> the android project again and it was fixed once again. So it may be due to some Gradle confusions in my environment and probably it just doesn't compile some classes the right way from time to time.</p>\n"},{"tags":[],"owner":{"account_id":1168077,"reputation":6543,"user_id":1145905,"accept_rate":47,"display_name":"kip2"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1632493430,"creation_date":1623962860,"answer_id":68026370,"question_id":62728362,"body_markdown":"This happened to me when I [partially] renamed the package name (app ID) from com.example.myappone to com.myapp.one. I thought it&#39;d be sufficient to change just the values in `android/app/src/mainAndroidManifest.xml` and `ios/Runner.xcodeproj/project.pbxproj`.  \r\n\r\nTurns out the actual package names also need to be changed so that the source files are located by the compiler","title":"Flutter crashes on startup: Didn&#39;t find class .MainActivity on path DexPathList","body":"<p>This happened to me when I [partially] renamed the package name (app ID) from com.example.myappone to com.myapp.one. I thought it'd be sufficient to change just the values in <code>android/app/src/mainAndroidManifest.xml</code> and <code>ios/Runner.xcodeproj/project.pbxproj</code>.</p>\n<p>Turns out the actual package names also need to be changed so that the source files are located by the compiler</p>\n"},{"tags":[],"owner":{"account_id":20173000,"reputation":621,"user_id":14795385,"display_name":"ehcp"},"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1626128967,"creation_date":1626128967,"answer_id":68354487,"question_id":62728362,"body_markdown":"I had similar error, after a &quot;package name&quot; change.\r\nMy solution was:\r\nUpdate package name also in MainActivity.kt.\r\n\r\n\r\nIn short, all package names should be fixed accordingly.\r\n\r\nafter that, it is fixed.","title":"Flutter crashes on startup: Didn&#39;t find class .MainActivity on path DexPathList","body":"<p>I had similar error, after a &quot;package name&quot; change.\nMy solution was:\nUpdate package name also in MainActivity.kt.</p>\n<p>In short, all package names should be fixed accordingly.</p>\n<p>after that, it is fixed.</p>\n"},{"tags":[],"owner":{"account_id":8138636,"reputation":2544,"user_id":6129553,"accept_rate":29,"display_name":"RileyManda"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1636373519,"creation_date":1636373519,"answer_id":69883259,"question_id":62728362,"body_markdown":"The simplest way to solve this if using Android Studio/Flutter is to:\r\n\r\n1:Stop the app,then Open MainActivity.kt:\r\n\r\n    path : &quot;**android/src/main/kotlin/MainActivity.kt**&quot;\r\n\r\nIf your package name in MainActivity does not match your app,update it in your MainActivity.kt. \r\n[![Android Studio][1]][1]\r\n\r\n\r\n2:Then go to ***Edit&gt;Find &gt; Replace in Files*** and replace the previous package name with the new one across the entire app and all files.Restart Android Studio before proceeding to the next step.(Invalidate Caches and Restart)\r\n\r\n3:After the restart...Open app/src/build.gradle and enable multidex:\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.your.apppackage&quot;\r\n        minSdkVersion 28\r\n        targetSdkVersion 30\r\n        versionCode flutterVersionCode.toInteger()\r\n        versionName flutterVersionName\r\n        multiDexEnabled true //add multidex enabled\r\n    }\r\n\r\n...and dont forget to add the multidex dependency in the same gradle file:\r\n\r\n\r\n    **dependencies {**\r\n        implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\r\n        implementation &#39;com.google.android.material:material:1.4.0&#39;\r\n        implementation &#39;androidx.multidex:multidex:2.0.1&#39; // add it as a dependency here\r\n    }\r\n\r\nand finally invalidate caches and restart. \r\n(**`File&gt;Invalidate Caches/Restart`**).\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Mz8af.png","title":"Flutter crashes on startup: Didn&#39;t find class .MainActivity on path DexPathList","body":"<p>The simplest way to solve this if using Android Studio/Flutter is to:</p>\n<p>1:Stop the app,then Open MainActivity.kt:</p>\n<pre><code>path : &quot;**android/src/main/kotlin/MainActivity.kt**&quot;\n</code></pre>\n<p>If your package name in MainActivity does not match your app,update it in your MainActivity.kt.\n<a href=\"https://i.stack.imgur.com/Mz8af.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Mz8af.png\" alt=\"Android Studio\" /></a></p>\n<p>2:Then go to <em><strong>Edit&gt;Find &gt; Replace in Files</strong></em> and replace the previous package name with the new one across the entire app and all files.Restart Android Studio before proceeding to the next step.(Invalidate Caches and Restart)</p>\n<p>3:After the restart...Open app/src/build.gradle and enable multidex:</p>\n<pre><code>defaultConfig {\n    applicationId &quot;com.your.apppackage&quot;\n    minSdkVersion 28\n    targetSdkVersion 30\n    versionCode flutterVersionCode.toInteger()\n    versionName flutterVersionName\n    multiDexEnabled true //add multidex enabled\n}\n</code></pre>\n<p>...and dont forget to add the multidex dependency in the same gradle file:</p>\n<pre><code>**dependencies {**\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\n    implementation 'com.google.android.material:material:1.4.0'\n    implementation 'androidx.multidex:multidex:2.0.1' // add it as a dependency here\n}\n</code></pre>\n<p>and finally invalidate caches and restart.\n(<strong><code>File&gt;Invalidate Caches/Restart</code></strong>).</p>\n"},{"tags":[],"owner":{"account_id":6599104,"reputation":472,"user_id":5097957,"display_name":"Shamshun"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1637248015,"creation_date":1637248015,"answer_id":70022193,"question_id":62728362,"body_markdown":"In my case, this happened when I accidentally commented out (removed) the line:\r\n\r\n    package com.mypackagename\r\n\r\nfrom &quot;MainActivity.kt&quot; file while I was editing it! Simply adding it back solved the problem.","title":"Flutter crashes on startup: Didn&#39;t find class .MainActivity on path DexPathList","body":"<p>In my case, this happened when I accidentally commented out (removed) the line:</p>\n<pre><code>package com.mypackagename\n</code></pre>\n<p>from &quot;MainActivity.kt&quot; file while I was editing it! Simply adding it back solved the problem.</p>\n"},{"tags":[],"owner":{"account_id":2184734,"reputation":41,"user_id":1933391,"display_name":"Gabriel Josu&#233; Casta&#241;aza Molina"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1638428924,"creation_date":1638382584,"answer_id":70189324,"question_id":62728362,"body_markdown":"This is not a beautiful solution but it works.\r\nFor some reason the dex files doesn&#39;t have a MainActivity compiled\r\n\r\nSo we added to the manifest the `FlutterActivity` directly and that fixed the problem to us\r\n\r\n    &lt;application\r\n            android:label=&quot;morari&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;&gt;\r\n            &lt;activity\r\n                android:name=&quot;io.flutter.embedding.android.FlutterActivity&quot;\r\n                ...&gt;\r\n                ...\r\n     &lt;/application&gt;\r\n\r\nDex files:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KrIIz.png","title":"Flutter crashes on startup: Didn&#39;t find class .MainActivity on path DexPathList","body":"<p>This is not a beautiful solution but it works.\nFor some reason the dex files doesn't have a MainActivity compiled</p>\n<p>So we added to the manifest the <code>FlutterActivity</code> directly and that fixed the problem to us</p>\n<pre><code>&lt;application\n        android:label=&quot;morari&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;&gt;\n        &lt;activity\n            android:name=&quot;io.flutter.embedding.android.FlutterActivity&quot;\n            ...&gt;\n            ...\n &lt;/application&gt;\n</code></pre>\n<p>Dex files:</p>\n<p><a href=\"https://i.stack.imgur.com/KrIIz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KrIIz.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":13425521,"reputation":71,"user_id":9687020,"display_name":"Imtiaz"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1643049421,"creation_date":1643040659,"answer_id":70836902,"question_id":62728362,"body_markdown":"**Solution:** \r\nIts simple solution is to go to MainActivity.kt and match the Package-name with AndroidManifest.xml.\r\n\r\n\r\n\r\n[][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/utw1x.png","title":"Flutter crashes on startup: Didn&#39;t find class .MainActivity on path DexPathList","body":"<p><strong>Solution:</strong>\nIts simple solution is to go to MainActivity.kt and match the Package-name with AndroidManifest.xml.</p>\n<p><a href=\"https://i.stack.imgur.com/utw1x.png\" rel=\"noreferrer\"></a></p>\n"},{"tags":[],"owner":{"account_id":20574667,"reputation":283,"user_id":15102173,"display_name":"Faizan Ahmad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659393576,"creation_date":1659393576,"answer_id":73200264,"question_id":62728362,"body_markdown":"I don&#39;t know but for some reason my MainActivity.java was missing so i created one and woola the app is working.","title":"Flutter crashes on startup: Didn&#39;t find class .MainActivity on path DexPathList","body":"<p>I don't know but for some reason my MainActivity.java was missing so i created one and woola the app is working.</p>\n"},{"tags":[],"owner":{"account_id":25357260,"reputation":81,"user_id":19173185,"display_name":"Farial Mahmod"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666869765,"creation_date":1666869765,"answer_id":74221286,"question_id":62728362,"body_markdown":"Possible Reason: Tags not placed properly in Manifest file is one of this error&#39;s causes .\r\n\r\n**Solution**: Ensure all the tags are properly placed in /src/main&#39;s  AndroidManifest.xml file .\r\n","title":"Flutter crashes on startup: Didn&#39;t find class .MainActivity on path DexPathList","body":"<p>Possible Reason: Tags not placed properly in Manifest file is one of this error's causes .</p>\n<p><strong>Solution</strong>: Ensure all the tags are properly placed in /src/main's  AndroidManifest.xml file .</p>\n"},{"tags":[],"owner":{"account_id":20763470,"reputation":21,"user_id":15248039,"display_name":"Bishop Possible"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1667863837,"creation_date":1667863837,"answer_id":74354145,"question_id":62728362,"body_markdown":"In my case, I changed the package name of my Flutter project from the default and did not update the package name on the MainActivity.kt file.  \r\n\r\nHope this helps. ","title":"Flutter crashes on startup: Didn&#39;t find class .MainActivity on path DexPathList","body":"<p>In my case, I changed the package name of my Flutter project from the default and did not update the package name on the MainActivity.kt file.</p>\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":18641809,"reputation":219,"user_id":13587389,"display_name":"RITTIK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677943798,"creation_date":1677943798,"answer_id":75636669,"question_id":62728362,"body_markdown":"in my case, it was because of the package name, so I just renamed the package name and it worked for me\r\n\r\n```\r\nGo to build.gradle in the app module and rename applicationId &quot;com.company.name&quot;\r\n\r\nGo to Manifest.xml in app/src/main and rename package=&quot;com.company.name&quot; and android:label=&quot;App Name&quot;\r\n\r\nGo to Manifest.xml in app/src/debug and rename package=&quot;com.company.name&quot;\r\n\r\nGo to Manifest.xml in app/src/profile and rename package=&quot;com.company.name&quot;\r\n\r\nGo to app/src/main/kotlin/com/something/something/MainActivity.kt and rename package=&quot;com.company.name&quot;\r\n\r\n\r\nGo to app/src/main/kotlin/ and rename each directory so that the structure looks like app/src/main/kotlin/com/company/name/\r\n\r\nGo to pubspec.yaml in your project and change name: something to name: name, example :- if package name is com.abc.xyz the name: xyz\r\n\r\nGo to each dart file in lib folder and rename the imports to the modified name.\r\n```\r\n\r\nso, in short, it&#39;s just that your app has a **different package name in one of the above dir**, so make sure your **package name is the same everywhere**. \r\n\r\n","title":"Flutter crashes on startup: Didn&#39;t find class .MainActivity on path DexPathList","body":"<p>in my case, it was because of the package name, so I just renamed the package name and it worked for me</p>\n<pre><code>Go to build.gradle in the app module and rename applicationId &quot;com.company.name&quot;\n\nGo to Manifest.xml in app/src/main and rename package=&quot;com.company.name&quot; and android:label=&quot;App Name&quot;\n\nGo to Manifest.xml in app/src/debug and rename package=&quot;com.company.name&quot;\n\nGo to Manifest.xml in app/src/profile and rename package=&quot;com.company.name&quot;\n\nGo to app/src/main/kotlin/com/something/something/MainActivity.kt and rename package=&quot;com.company.name&quot;\n\n\nGo to app/src/main/kotlin/ and rename each directory so that the structure looks like app/src/main/kotlin/com/company/name/\n\nGo to pubspec.yaml in your project and change name: something to name: name, example :- if package name is com.abc.xyz the name: xyz\n\nGo to each dart file in lib folder and rename the imports to the modified name.\n</code></pre>\n<p>so, in short, it's just that your app has a <strong>different package name in one of the above dir</strong>, so make sure your <strong>package name is the same everywhere</strong>.</p>\n"},{"tags":[],"owner":{"account_id":13012907,"reputation":3760,"user_id":9405238,"display_name":"Doan Bui"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688526200,"creation_date":1688526200,"answer_id":76616874,"question_id":62728362,"body_markdown":"New solution in 2023, Go to `AndroidManifest.xml` change \r\n\r\n    &lt;application\r\n       android:name=&quot;com.steam.mobile.Application&quot;\r\n\r\nto \r\n\r\n    &lt;application\r\n       android:name=&quot;${applicationName}&quot;","title":"Flutter crashes on startup: Didn&#39;t find class .MainActivity on path DexPathList","body":"<p>New solution in 2023, Go to <code>AndroidManifest.xml</code> change</p>\n<pre><code>&lt;application\n   android:name=&quot;com.steam.mobile.Application&quot;\n</code></pre>\n<p>to</p>\n<pre><code>&lt;application\n   android:name=&quot;${applicationName}&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4604172,"reputation":10840,"user_id":3734116,"accept_rate":88,"display_name":"luckyhandler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698149720,"creation_date":1698149720,"answer_id":77351961,"question_id":62728362,"body_markdown":"In my case I used the `APG Upgrade assistant` of Android Studio and also checked that the package definition should be moved from Manifest to `build.gradle`.\r\n\r\nAfter the bundle identifier was not there in `AndroidManifest` any more this error was thrown.","title":"Flutter crashes on startup: Didn&#39;t find class .MainActivity on path DexPathList","body":"<p>In my case I used the <code>APG Upgrade assistant</code> of Android Studio and also checked that the package definition should be moved from Manifest to <code>build.gradle</code>.</p>\n<p>After the bundle identifier was not there in <code>AndroidManifest</code> any more this error was thrown.</p>\n"}],"owner":{"account_id":18002723,"reputation":481,"user_id":13084288,"display_name":"John"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17194,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":64739360,"answer_count":13,"score":18,"last_activity_date":1698149720,"creation_date":1593860907,"question_id":62728362,"body_markdown":"I&#39;m using Flutter with the MultiDex builder enabled for Android and encountered a pretty tricky issue. My app was running without any exceptions but when the `video_player` package was added it just crashed on startup:\r\n\r\n    FATAL EXCEPTION: main\r\n    Process: com.rsg.anygoal, PID: 5883\r\n    java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.rsg.anygoal/com.rsg.anygoal.MainActivity}: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;com.rsg.anygoal.MainActivity&quot; on path: DexPathList[[zip file &quot;/data/app/com.rsg.anygoal-tCKWlQXJD-iwdHtVRl0qqA==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.rsg.anygoal-tCKWlQXJD-iwdHtVRl0qqA==/lib/x86, /data/app/com.rsg.anygoal-tCKWlQXJD-iwdHtVRl0qqA==/base.apk!/lib/x86, /system/lib, /vendor/lib]]\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2679)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)\r\n        at android.app.ActivityThread.-wrap11(Unknown Source:0)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loop(Looper.java:164)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6494)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\r\n     Caused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;com.rsg.anygoal.MainActivity&quot; on path: DexPathList[[zip file &quot;/data/app/com.rsg.anygoal-tCKWlQXJD-iwdHtVRl0qqA==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.rsg.anygoal-tCKWlQXJD-iwdHtVRl0qqA==/lib/x86, /data/app/com.rsg.anygoal-tCKWlQXJD-iwdHtVRl0qqA==/base.apk!/lib/x86, /system/lib, /vendor/lib]]\r\n        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:125)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\r\n        at android.app.Instrumentation.newActivity(Instrumentation.java:1174)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2669)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)&#160;\r\n        at android.app.ActivityThread.-wrap11(Unknown Source:0)&#160;\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589)&#160;\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)&#160;\r\n        at android.os.Looper.loop(Looper.java:164)&#160;\r\n        at android.app.ActivityThread.main(ActivityThread.java:6494)&#160;\r\n        at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)&#160;\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)&#160;\r\n\r\nLater while investigating the issue I tried to disable MultiDex and that seemingly fixed it, but then adding additional flutter package broke the app again, so I decided it&#39;s not strictly caused by multiDex and re-enabled it.\r\n\r\nAnother fix attempt I found in forums was to rename `&quot;.MainActivity&quot;` to the exact class path `&quot;com.*...*.MainActivity&quot;` but that did not help either.\r\n\r\nHopefully someone will suggest a possible fix to this! Leaving a few more logs and code snippets I collected during my investigation, which may include clues helpful to you.\r\n\r\n***Full Android logcat logs: https://pastebin.com/vPs614jj***\r\n\r\n***Flutter pubspec (name and description intentionally omitted):***\r\n\r\n```yaml\r\nversion: 1.0.6+16\r\nenvironment:\r\n  sdk: &quot;&gt;=2.1.0 &lt;3.0.0&quot;\r\n\r\ndependencies:\r\n  flutter:\r\n    sdk: flutter\r\n  cupertino_icons: ^0.1.2\r\n  intl: ^0.15.8\r\n  firebase_core: ^0.4.3+1\r\n  firebase_admob: ^0.9.0+10\r\n  firebase_analytics: ^5.0.9\r\n  firebase_auth: ^0.15.3\r\n  firebase_crashlytics: ^0.1.2+4\r\n  firebase_performance: ^0.3.1+5\r\n  firebase_remote_config: ^0.3.0+1\r\n  firebase_messaging: ^6.0.9\r\n  firebase_dynamic_links: ^0.5.0+9\r\n  cloud_firestore: ^0.13.0+1\r\n  cloud_functions: ^0.4.1+6\r\n  google_sign_in: ^4.1.1\r\n  provider: ^4.0.1\r\n  data_connection_checker: ^0.3.4\r\n  shared_preferences: ^0.5.6\r\n  flutter_markdown: ^0.3.2\r\n  url_launcher: ^5.4.1\r\n  barcode_scan: ^1.0.0\r\n  qr_flutter: ^3.2.0\r\n  share: ^0.6.3+5\r\n  video_player: ^0.10.11+2\r\n\r\ndev_dependencies:\r\n  flutter_test:\r\n    sdk: flutter\r\n\r\nflutter:\r\n  fonts:\r\n    - family: Raleway\r\n      fonts:\r\n        - asset: fonts/Raleway-Regular.ttf\r\n  uses-material-design: true\r\n```\r\n\r\n***Android Manifest:***\r\n```xml\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; package=&quot;$APP_DOMAIN&quot;&gt;\r\n    &lt;application android:name=&quot;io.flutter.app.FlutterApplication&quot; android:label=&quot;$APP_NAME&quot; android:icon=&quot;@mipmap/ic_launcher&quot;&gt;\r\n        &lt;activity android:name=&quot;.MainActivity&quot; android:launchMode=&quot;singleTop&quot; android:theme=&quot;@style/LaunchTheme&quot; android:configChanges=&quot;orientation|keyboardHidden|keyboard|screenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode&quot; android:hardwareAccelerated=&quot;true&quot; android:windowSoftInputMode=&quot;adjustResize&quot;&gt;\r\n            &lt;meta-data android:name=&quot;io.flutter.app.android.SplashScreenUntilFirstFrame&quot; android:value=&quot;true&quot; /&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;FLUTTER_NOTIFICATION_CLICK&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;meta-data android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot; android:value=&quot;$APP_ADS_ID&quot;/&gt;\r\n        &lt;meta-data\r\n            android:name=&quot;com.google.firebase.messaging.default_notification_icon&quot;\r\n            android:resource=&quot;@drawable/notification_icon&quot; /&gt;\r\n    &lt;/application&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n&lt;/manifest&gt;\r\n```\r\n\r\n***MainActivity.java:***\r\n```java\r\nimport android.os.Bundle;\r\nimport io.flutter.app.FlutterActivity;\r\nimport io.flutter.plugins.GeneratedPluginRegistrant;\r\n\r\npublic class MainActivity extends FlutterActivity {\r\n  @Override\r\n  protected void onCreate(Bundle savedInstanceState) {\r\n    super.onCreate(savedInstanceState);\r\n    GeneratedPluginRegistrant.registerWith(this);\r\n  }\r\n}\r\n```\r\n\r\n***Flutter doctor output (XCode shouldn&#39;t matter):***\r\n```\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[] Flutter (Channel stable, v1.17.5, on Mac OS X 10.15.4 19E287, locale en-BG)\r\n \r\n[] Android toolchain - develop for Android devices (Android SDK version 29.0.3)\r\n[!] Xcode - develop for iOS and macOS\r\n     Xcode installation is incomplete; a full installation is necessary for iOS development.\r\n      Download at: https://developer.apple.com/xcode/download/\r\n      Or install Xcode via the App Store.\r\n      Once installed, run:\r\n        sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer\r\n        sudo xcodebuild -runFirstLaunch\r\n[] Android Studio (version 3.5)\r\n[] VS Code (version 1.46.1)\r\n[] Connected device (1 available)\r\n```","title":"Flutter crashes on startup: Didn&#39;t find class .MainActivity on path DexPathList","body":"<p>I'm using Flutter with the MultiDex builder enabled for Android and encountered a pretty tricky issue. My app was running without any exceptions but when the <code>video_player</code> package was added it just crashed on startup:</p>\n<pre><code>FATAL EXCEPTION: main\nProcess: com.rsg.anygoal, PID: 5883\njava.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.rsg.anygoal/com.rsg.anygoal.MainActivity}: java.lang.ClassNotFoundException: Didn't find class &quot;com.rsg.anygoal.MainActivity&quot; on path: DexPathList[[zip file &quot;/data/app/com.rsg.anygoal-tCKWlQXJD-iwdHtVRl0qqA==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.rsg.anygoal-tCKWlQXJD-iwdHtVRl0qqA==/lib/x86, /data/app/com.rsg.anygoal-tCKWlQXJD-iwdHtVRl0qqA==/base.apk!/lib/x86, /system/lib, /vendor/lib]]\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2679)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)\n    at android.app.ActivityThread.-wrap11(Unknown Source:0)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loop(Looper.java:164)\n    at android.app.ActivityThread.main(ActivityThread.java:6494)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\n Caused by: java.lang.ClassNotFoundException: Didn't find class &quot;com.rsg.anygoal.MainActivity&quot; on path: DexPathList[[zip file &quot;/data/app/com.rsg.anygoal-tCKWlQXJD-iwdHtVRl0qqA==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.rsg.anygoal-tCKWlQXJD-iwdHtVRl0qqA==/lib/x86, /data/app/com.rsg.anygoal-tCKWlQXJD-iwdHtVRl0qqA==/base.apk!/lib/x86, /system/lib, /vendor/lib]]\n    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:125)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n    at android.app.Instrumentation.newActivity(Instrumentation.java:1174)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2669)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)\n    at android.app.ActivityThread.-wrap11(Unknown Source:0)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loop(Looper.java:164)\n    at android.app.ActivityThread.main(ActivityThread.java:6494)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\n</code></pre>\n<p>Later while investigating the issue I tried to disable MultiDex and that seemingly fixed it, but then adding additional flutter package broke the app again, so I decided it's not strictly caused by multiDex and re-enabled it.</p>\n<p>Another fix attempt I found in forums was to rename <code>&quot;.MainActivity&quot;</code> to the exact class path <code>&quot;com.*...*.MainActivity&quot;</code> but that did not help either.</p>\n<p>Hopefully someone will suggest a possible fix to this! Leaving a few more logs and code snippets I collected during my investigation, which may include clues helpful to you.</p>\n<p><em><strong>Full Android logcat logs: <a href=\"https://pastebin.com/vPs614jj\" rel=\"noreferrer\">https://pastebin.com/vPs614jj</a></strong></em></p>\n<p><em><strong>Flutter pubspec (name and description intentionally omitted):</strong></em></p>\n<pre class=\"lang-yaml prettyprint-override\"><code>version: 1.0.6+16\nenvironment:\n  sdk: &quot;&gt;=2.1.0 &lt;3.0.0&quot;\n\ndependencies:\n  flutter:\n    sdk: flutter\n  cupertino_icons: ^0.1.2\n  intl: ^0.15.8\n  firebase_core: ^0.4.3+1\n  firebase_admob: ^0.9.0+10\n  firebase_analytics: ^5.0.9\n  firebase_auth: ^0.15.3\n  firebase_crashlytics: ^0.1.2+4\n  firebase_performance: ^0.3.1+5\n  firebase_remote_config: ^0.3.0+1\n  firebase_messaging: ^6.0.9\n  firebase_dynamic_links: ^0.5.0+9\n  cloud_firestore: ^0.13.0+1\n  cloud_functions: ^0.4.1+6\n  google_sign_in: ^4.1.1\n  provider: ^4.0.1\n  data_connection_checker: ^0.3.4\n  shared_preferences: ^0.5.6\n  flutter_markdown: ^0.3.2\n  url_launcher: ^5.4.1\n  barcode_scan: ^1.0.0\n  qr_flutter: ^3.2.0\n  share: ^0.6.3+5\n  video_player: ^0.10.11+2\n\ndev_dependencies:\n  flutter_test:\n    sdk: flutter\n\nflutter:\n  fonts:\n    - family: Raleway\n      fonts:\n        - asset: fonts/Raleway-Regular.ttf\n  uses-material-design: true\n</code></pre>\n<p><em><strong>Android Manifest:</strong></em></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; package=&quot;$APP_DOMAIN&quot;&gt;\n    &lt;application android:name=&quot;io.flutter.app.FlutterApplication&quot; android:label=&quot;$APP_NAME&quot; android:icon=&quot;@mipmap/ic_launcher&quot;&gt;\n        &lt;activity android:name=&quot;.MainActivity&quot; android:launchMode=&quot;singleTop&quot; android:theme=&quot;@style/LaunchTheme&quot; android:configChanges=&quot;orientation|keyboardHidden|keyboard|screenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode&quot; android:hardwareAccelerated=&quot;true&quot; android:windowSoftInputMode=&quot;adjustResize&quot;&gt;\n            &lt;meta-data android:name=&quot;io.flutter.app.android.SplashScreenUntilFirstFrame&quot; android:value=&quot;true&quot; /&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;\n            &lt;/intent-filter&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;FLUTTER_NOTIFICATION_CLICK&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;meta-data android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot; android:value=&quot;$APP_ADS_ID&quot;/&gt;\n        &lt;meta-data\n            android:name=&quot;com.google.firebase.messaging.default_notification_icon&quot;\n            android:resource=&quot;@drawable/notification_icon&quot; /&gt;\n    &lt;/application&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p><em><strong>MainActivity.java:</strong></em></p>\n<pre class=\"lang-java prettyprint-override\"><code>import android.os.Bundle;\nimport io.flutter.app.FlutterActivity;\nimport io.flutter.plugins.GeneratedPluginRegistrant;\n\npublic class MainActivity extends FlutterActivity {\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    GeneratedPluginRegistrant.registerWith(this);\n  }\n}\n</code></pre>\n<p><em><strong>Flutter doctor output (XCode shouldn't matter):</strong></em></p>\n<pre><code>Doctor summary (to see all details, run flutter doctor -v):\n[] Flutter (Channel stable, v1.17.5, on Mac OS X 10.15.4 19E287, locale en-BG)\n \n[] Android toolchain - develop for Android devices (Android SDK version 29.0.3)\n[!] Xcode - develop for iOS and macOS\n     Xcode installation is incomplete; a full installation is necessary for iOS development.\n      Download at: https://developer.apple.com/xcode/download/\n      Or install Xcode via the App Store.\n      Once installed, run:\n        sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer\n        sudo xcodebuild -runFirstLaunch\n[] Android Studio (version 3.5)\n[] VS Code (version 1.46.1)\n[] Connected device (1 available)\n</code></pre>\n"},{"tags":["java","collections","set","addition","hashset"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":2,"creation_date":1653654712,"post_id":72405452,"comment_id":127909222,"body_markdown":"where is the value of that &quot;id&quot; coming from? You create three instances, all of them with 0 as id, so when you try to add the others, it registers as &quot;already there&quot;.\nre-write your equals method. Don&#39;t compare the id&#39;s, compare the actual state of the objects","body":"where is the value of that &quot;id&quot; coming from? You create three instances, all of them with 0 as id, so when you try to add the others, it registers as &quot;already there&quot;. re-write your equals method. Don&#39;t compare the id&#39;s, compare the actual state of the objects"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":6,"creation_date":1653655190,"post_id":72405452,"comment_id":127909406,"body_markdown":"`HashSet`s use the `hashCode` method to identify and distinguish objects from another. Your `hashCode` only uses the `id` field. You never set the `id` field, meaning it stays `0` and the `HashSet` treats all 3 `Pizza`s as the same thing. Give each pizza a unique id (which is what the database would do) and this will work.","body":"<code>HashSet</code>s use the <code>hashCode</code> method to identify and distinguish objects from another. Your <code>hashCode</code> only uses the <code>id</code> field. You never set the <code>id</code> field, meaning it stays <code>0</code> and the <code>HashSet</code> treats all 3 <code>Pizza</code>s as the same thing. Give each pizza a unique id (which is what the database would do) and this will work."},{"owner":{"account_id":4654770,"reputation":339,"user_id":7445342,"accept_rate":80,"display_name":"SiGe"},"score":1,"creation_date":1653664076,"post_id":72405452,"comment_id":127913044,"body_markdown":"Additional info about hash code overwriting: https://stackoverflow.com/a/2741898/7445342","body":"Additional info about hash code overwriting: <a href=\"https://stackoverflow.com/a/2741898/7445342\">stackoverflow.com/a/2741898/7445342</a>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1653895953,"post_id":72405452,"comment_id":127954180,"body_markdown":"Despite of all the obsession with the `hashCode` method shown here, the **`equals`** method is responsible for determining equality. Your equals method says that two objects are equal when they have the same id, so all your three objects are equal. Just check `p1.equals(p2)`, `p2.equals(p3)`, etc. The `hashCode` method has to be compatible to the `equals` method and it is in your code, which is a good thing. Since your objects are mutable, you might stay with this equality and just ensure your objects get unique IDs, as f1sh suggested.","body":"Despite of all the obsession with the <code>hashCode</code> method shown here, the <b><code>equals</code></b> method is responsible for determining equality. Your equals method says that two objects are equal when they have the same id, so all your three objects are equal. Just check <code>p1.equals(p2)</code>, <code>p2.equals(p3)</code>, etc. The <code>hashCode</code> method has to be compatible to the <code>equals</code> method and it is in your code, which is a good thing. Since your objects are mutable, you might stay with this equality and just ensure your objects get unique IDs, as f1sh suggested."}],"answers":[{"tags":[],"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698149080,"creation_date":1653656907,"answer_id":72405947,"question_id":72405452,"body_markdown":"HashSets use the `hashCode` (when equal it also uses the `equals` as well) to compute identity. Your pizzas seem to have the same ID. Hence you don&#39;t provide one in the constructor nor sets one, it stay null, for all three pizzas. You could persist all those and have the database provide ids, or set them yourself.\r\n\r\nWhen you use at least Java 9, you could use the utility method:\r\n\r\n```java\r\n\r\nSet&lt;Pizza&gt; pizzas = java.util.Set.of(p1, p2, p3);\r\n```\r\n\r\nFor older versions you can use:\r\n\r\n```java\r\n\r\nSet&lt;Pizza&gt; pizzas = new HashSet&lt;&gt;;\r\npizzas.add(p1);\r\npizzas.add(p2);\r\npizzas.add(p3);\r\n```","title":"Can&#39;t add an object to a Set","body":"<p>HashSets use the <code>hashCode</code> (when equal it also uses the <code>equals</code> as well) to compute identity. Your pizzas seem to have the same ID. Hence you don't provide one in the constructor nor sets one, it stay null, for all three pizzas. You could persist all those and have the database provide ids, or set them yourself.</p>\n<p>When you use at least Java 9, you could use the utility method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nSet&lt;Pizza&gt; pizzas = java.util.Set.of(p1, p2, p3);\n</code></pre>\n<p>For older versions you can use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nSet&lt;Pizza&gt; pizzas = new HashSet&lt;&gt;;\npizzas.add(p1);\npizzas.add(p2);\npizzas.add(p3);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1653663800,"creation_date":1653663800,"answer_id":72407409,"question_id":72405452,"body_markdown":"Even if your class is annotated with `Entity`, it won&#39;t work similar way when you are instantiating object manually; i.e.  while persisting `Pizza` into db, you might have seen new `id` got assigned to every `insert / save` call because of `@SequenceGenerator`.\r\n\r\nBut when you do manual instantiation of `Pizza` &amp; trying to insert it to `HashSet`, it will check if there is any pre-existing `Pizza` available based on `hashCode`. Manual instantiation will assign default value `0` to `id` &amp; hence only first insertion to `HashSet` succeed. \r\n\r\nChange `hashCode`  so that it will generate some unique value &amp; that way `Collections.addAll` will work. ","title":"Can&#39;t add an object to a Set","body":"<p>Even if your class is annotated with <code>Entity</code>, it won't work similar way when you are instantiating object manually; i.e.  while persisting <code>Pizza</code> into db, you might have seen new <code>id</code> got assigned to every <code>insert / save</code> call because of <code>@SequenceGenerator</code>.</p>\n<p>But when you do manual instantiation of <code>Pizza</code> &amp; trying to insert it to <code>HashSet</code>, it will check if there is any pre-existing <code>Pizza</code> available based on <code>hashCode</code>. Manual instantiation will assign default value <code>0</code> to <code>id</code> &amp; hence only first insertion to <code>HashSet</code> succeed.</p>\n<p>Change <code>hashCode</code>  so that it will generate some unique value &amp; that way <code>Collections.addAll</code> will work.</p>\n"}],"owner":{"account_id":25405323,"reputation":21,"user_id":19214135,"display_name":"Steewzz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":898,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1698149080,"creation_date":1653654439,"question_id":72405452,"body_markdown":"Hi I have a little problem in java, I do not have an error but I do not get what I want. Here I create 3 Pizza with and I want to put them in a set, the problem is that when I print my set I only have One Pizza which is the first one p1.\r\n\r\nHere&#39;s the code :\r\n\r\n    Pizza p1 = new Pizza(cannibale, Taille.Large, TypePate.Classique);\r\n    Pizza p2 = new Pizza(forestiere, Taille.XL, TypePate.Fine);\r\n    Pizza p3 = new Pizza(hypnotika, Taille.Medium, TypePate.MozzaCrust);\r\n\r\n    Set&lt;Pizza&gt; pizzas = new HashSet&lt;Pizza&gt;();\r\n\r\n    Collections.addAll(pizzas, p1,p2,p3);   \r\n\r\n\r\nPizza\r\n```\r\n    @Entity\r\n    @Table(name = &quot;pizza&quot;)\r\n    @SequenceGenerator(name = &quot;seqPizza&quot;, sequenceName = &quot;seq_pizza&quot;, initialValue = 1, allocationSize = 1)\r\n\r\n    public class Pizza {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;seqPizza&quot;)\r\n    @Column(name = &quot;id&quot;)\r\nprivate Long id;\r\n\r\n@ManyToOne\r\n@JoinColumn(name = &quot;recette&quot;, foreignKey = @ForeignKey(name = &quot;PIZZA_RECETTE_ID_FK&quot;))\r\nprivate Recette recette;\r\n\r\n@ManyToOne\r\n@JoinColumn(name = &quot;numticket_id&quot;, foreignKey = @ForeignKey(name = &quot;PIZZA_NUMTICKET_ID_FK&quot;))\r\nprivate Commande commandePizza;\r\n\r\n@Column(name = &quot;prix&quot;)\r\nprivate double prix;\r\n\r\n@Enumerated(EnumType.STRING)\r\n@Column(name = &quot;taille_pizza&quot;)\r\nprivate Taille taille;\r\n\r\n@Enumerated(EnumType.STRING)\r\n@Column(name = &quot;type_pate&quot;)\r\nprivate TypePate pate;\r\n\r\npublic Pizza() {\r\n}\r\n\r\npublic Pizza(Recette recette, Taille taille, TypePate pate) {\r\n\r\n    this.recette = recette;\r\n    this.taille = taille;\r\n    this.pate = pate;\r\n\r\n    if (taille == Taille.Medium) {\r\n        this.prix = recette.getPrixM();\r\n    } else if (taille == Taille.Large) {\r\n        this.prix = recette.getPrixL();\r\n    } else {\r\n        this.prix = recette.getPrixXL();\r\n    }\r\n\r\n    if (pate == TypePate.MozzaCrust) {\r\n        this.prix = this.prix + pate.getPrix();\r\n    } else if (pate == TypePate.Pan) {\r\n        this.prix = this.prix + pate.getPrix();\r\n    } else {\r\n        this.prix = this.prix + pate.getPrix();\r\n    }\r\n\r\n}\r\n\r\npublic Long getId() {\r\n    return id;\r\n}\r\n\r\npublic void setId(Long id) {\r\n    this.id = id;\r\n}\r\n\r\npublic Commande getCommandePizza() {\r\n    return commandePizza;\r\n}\r\n\r\npublic void setCommandePizza(Commande commandePizza) {\r\n    this.commandePizza = commandePizza;\r\n}\r\n\r\npublic double getPrix() {\r\n    return prix;\r\n}\r\n\r\npublic void setPrix(double prix) {\r\n    this.prix = prix;\r\n}\r\n\r\npublic Recette getRecette() {\r\n    return recette;\r\n}\r\n\r\npublic void setRecette(Recette recette) {\r\n    this.recette = recette;\r\n}\r\n\r\npublic Taille getTaille() {\r\n    return taille;\r\n}\r\n\r\npublic void setTaille(Taille taille) {\r\n    this.taille = taille;\r\n}\r\n\r\npublic TypePate getPate() {\r\n    return pate;\r\n}\r\n\r\npublic void setPate(TypePate pate) {\r\n    this.pate = pate;\r\n}\r\n\r\n@Override\r\npublic int hashCode() {\r\n    return Objects.hash(id);\r\n}\r\n\r\n@Override\r\npublic boolean equals(Object obj) {\r\n    if (this == obj)\r\n        return true;\r\n    if (obj == null)\r\n        return false;\r\n    if (getClass() != obj.getClass())\r\n        return false;\r\n    Pizza other = (Pizza) obj;\r\n    return Objects.equals(id, other.id);\r\n}\r\n\r\n```\r\n\r\n\r\nYou can find all the code here : https://github.com/HamzaMerini/help/tree/main/pizzayolo\r\n\r\nThank you !!","title":"Can&#39;t add an object to a Set","body":"<p>Hi I have a little problem in java, I do not have an error but I do not get what I want. Here I create 3 Pizza with and I want to put them in a set, the problem is that when I print my set I only have One Pizza which is the first one p1.</p>\n<p>Here's the code :</p>\n<pre><code>Pizza p1 = new Pizza(cannibale, Taille.Large, TypePate.Classique);\nPizza p2 = new Pizza(forestiere, Taille.XL, TypePate.Fine);\nPizza p3 = new Pizza(hypnotika, Taille.Medium, TypePate.MozzaCrust);\n\nSet&lt;Pizza&gt; pizzas = new HashSet&lt;Pizza&gt;();\n\nCollections.addAll(pizzas, p1,p2,p3);   \n</code></pre>\n<p>Pizza</p>\n<pre><code>    @Entity\n    @Table(name = &quot;pizza&quot;)\n    @SequenceGenerator(name = &quot;seqPizza&quot;, sequenceName = &quot;seq_pizza&quot;, initialValue = 1, allocationSize = 1)\n\n    public class Pizza {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;seqPizza&quot;)\n    @Column(name = &quot;id&quot;)\nprivate Long id;\n\n@ManyToOne\n@JoinColumn(name = &quot;recette&quot;, foreignKey = @ForeignKey(name = &quot;PIZZA_RECETTE_ID_FK&quot;))\nprivate Recette recette;\n\n@ManyToOne\n@JoinColumn(name = &quot;numticket_id&quot;, foreignKey = @ForeignKey(name = &quot;PIZZA_NUMTICKET_ID_FK&quot;))\nprivate Commande commandePizza;\n\n@Column(name = &quot;prix&quot;)\nprivate double prix;\n\n@Enumerated(EnumType.STRING)\n@Column(name = &quot;taille_pizza&quot;)\nprivate Taille taille;\n\n@Enumerated(EnumType.STRING)\n@Column(name = &quot;type_pate&quot;)\nprivate TypePate pate;\n\npublic Pizza() {\n}\n\npublic Pizza(Recette recette, Taille taille, TypePate pate) {\n\n    this.recette = recette;\n    this.taille = taille;\n    this.pate = pate;\n\n    if (taille == Taille.Medium) {\n        this.prix = recette.getPrixM();\n    } else if (taille == Taille.Large) {\n        this.prix = recette.getPrixL();\n    } else {\n        this.prix = recette.getPrixXL();\n    }\n\n    if (pate == TypePate.MozzaCrust) {\n        this.prix = this.prix + pate.getPrix();\n    } else if (pate == TypePate.Pan) {\n        this.prix = this.prix + pate.getPrix();\n    } else {\n        this.prix = this.prix + pate.getPrix();\n    }\n\n}\n\npublic Long getId() {\n    return id;\n}\n\npublic void setId(Long id) {\n    this.id = id;\n}\n\npublic Commande getCommandePizza() {\n    return commandePizza;\n}\n\npublic void setCommandePizza(Commande commandePizza) {\n    this.commandePizza = commandePizza;\n}\n\npublic double getPrix() {\n    return prix;\n}\n\npublic void setPrix(double prix) {\n    this.prix = prix;\n}\n\npublic Recette getRecette() {\n    return recette;\n}\n\npublic void setRecette(Recette recette) {\n    this.recette = recette;\n}\n\npublic Taille getTaille() {\n    return taille;\n}\n\npublic void setTaille(Taille taille) {\n    this.taille = taille;\n}\n\npublic TypePate getPate() {\n    return pate;\n}\n\npublic void setPate(TypePate pate) {\n    this.pate = pate;\n}\n\n@Override\npublic int hashCode() {\n    return Objects.hash(id);\n}\n\n@Override\npublic boolean equals(Object obj) {\n    if (this == obj)\n        return true;\n    if (obj == null)\n        return false;\n    if (getClass() != obj.getClass())\n        return false;\n    Pizza other = (Pizza) obj;\n    return Objects.equals(id, other.id);\n}\n\n</code></pre>\n<p>You can find all the code here : <a href=\"https://github.com/HamzaMerini/help/tree/main/pizzayolo\" rel=\"nofollow noreferrer\">https://github.com/HamzaMerini/help/tree/main/pizzayolo</a></p>\n<p>Thank you !!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":4,"creation_date":1698148797,"post_id":77351863,"comment_id":136365948,"body_markdown":"If the calculated hash happens to be 0, then it will be recalculated each time. Alternatively the primary cause for such behaviour would be if you used different `String` instances with the same content (which obviously wouldn&#39;t share the `hash` field). Edit: I just checked [in Java 17](https://github.com/openjdk/jdk17/blob/master/src/java.base/share/classes/java/lang/String.java#L2328) and apparently they have added a `hashIsZero` field now to avoid this case).","body":"If the calculated hash happens to be 0, then it will be recalculated each time. Alternatively the primary cause for such behaviour would be if you used different <code>String</code> instances with the same content (which obviously wouldn&#39;t share the <code>hash</code> field). Edit: I just checked <a href=\"https://github.com/openjdk/jdk17/blob/master/src/java.base/share/classes/java/lang/String.java#L2328\" rel=\"nofollow noreferrer\">in Java 17</a> and apparently they have added a <code>hashIsZero</code> field now to avoid this case)."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1698149299,"post_id":77351863,"comment_id":136366023,"body_markdown":"I think the OP is alluding to a race condition, which is present and may result in a recalculation, but does not cause any correctness issues.  That said, I&#39;m shocked about the hashIsZero...","body":"I think the OP is alluding to a race condition, which is present and may result in a recalculation, but does not cause any correctness issues.  That said, I&#39;m shocked about the hashIsZero..."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1698152596,"post_id":77351863,"comment_id":136366614,"body_markdown":"@LouisWasserman: yes, I was surprised as well. There&#39;s a [length discussion on this topic](https://mail.openjdk.org/pipermail/core-libs-dev/2019-April/059441.html) which shows that the motivation was not (as I would have suspected) some kind of avoidance of a DoS with having to re-calculate the hash of a long attacker-controlled string over and over again, but rather with being able to store 0-hash strings in read-only memory areas. Another interesting detail is that according to one message the storage is &quot;free&quot; due to alignment gaps in `String` objects.","body":"@LouisWasserman: yes, I was surprised as well. There&#39;s a <a href=\"https://mail.openjdk.org/pipermail/core-libs-dev/2019-April/059441.html\" rel=\"nofollow noreferrer\">length discussion on this topic</a> which shows that the motivation was not (as I would have suspected) some kind of avoidance of a DoS with having to re-calculate the hash of a long attacker-controlled string over and over again, but rather with being able to store 0-hash strings in read-only memory areas. Another interesting detail is that according to one message the storage is &quot;free&quot; due to alignment gaps in <code>String</code> objects."},{"owner":{"account_id":319988,"reputation":10970,"user_id":638028,"accept_rate":91,"display_name":"Klitos Kyriacou"},"score":0,"creation_date":1698152729,"post_id":77351863,"comment_id":136366645,"body_markdown":"In your question, you mention &quot;query&quot;. Is this a database query? When you say &quot;one String instance&quot;, is this string instance in a DB? If so, you&#39;ve got a separate Java String instance every time you get it from the query.","body":"In your question, you mention &quot;query&quot;. Is this a database query? When you say &quot;one String instance&quot;, is this string instance in a DB? If so, you&#39;ve got a separate Java String instance every time you get it from the query."},{"owner":{"account_id":5557924,"reputation":11,"user_id":4408616,"display_name":"taka8"},"score":1,"creation_date":1698158178,"post_id":77351863,"comment_id":136367971,"body_markdown":"It means database query, but the application I&#39;m profiling is the database(apache/druid).\nThe String instance should not have been copied...\nI&#39;ve also opened a issue.\nhttps://github.com/apache/druid/issues/15242","body":"It means database query, but the application I&#39;m profiling is the database(apache/druid). The String instance should not have been copied... I&#39;ve also opened a issue. <a href=\"https://github.com/apache/druid/issues/15242\" rel=\"nofollow noreferrer\">github.com/apache/druid/issues/15242</a>"}],"owner":{"account_id":5557924,"reputation":11,"user_id":4408616,"display_name":"taka8"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1698148632,"creation_date":1698148632,"question_id":77351863,"body_markdown":"In Java, when calling hashCode() on the one String instance multiple times in a single thread, is there a situation where the hash cache is not utilized and the hash is recalculated?\r\n\r\n\r\nI&#39;m profiling my application query with JFR&#39;s stackframe, it seems String.hash cache is not used weirdly and causes performance overhead.(OpenJDK 17)\r\n\r\n\r\n\r\nIt occurs only on production environment, and even I debugged Remote Process with jdwp,  I couldn&#39;t catch such case. (I set breakpoint at String.hashCode with condition to catch the weird case.)","title":"Is there a case that Java String.hashCode() cache is invalidated?","body":"<p>In Java, when calling hashCode() on the one String instance multiple times in a single thread, is there a situation where the hash cache is not utilized and the hash is recalculated?</p>\n<p>I'm profiling my application query with JFR's stackframe, it seems String.hash cache is not used weirdly and causes performance overhead.(OpenJDK 17)</p>\n<p>It occurs only on production environment, and even I debugged Remote Process with jdwp,  I couldn't catch such case. (I set breakpoint at String.hashCode with condition to catch the weird case.)</p>\n"},{"tags":["java","spring-boot","microservices","optaplanner","timefold"],"answers":[{"tags":[],"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225; Petrovick&#253;"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698148529,"creation_date":1698148529,"answer_id":77351852,"question_id":77351656,"body_markdown":"This looks to me like a Windows-specific problem, not caused by Timefold Solver. Consider the command:\r\n\r\n`mvn org.openrewrite.maven:rewrite-maven-plugin:4.46.0:run -Drewrite.recipeArtifactCoordinates=ai.timefold.solver:timefold-solver-migration:0.8.41 -Drewrite.activeRecipes=ai.timefold.solver.migration.ToLatest`\r\n\r\nThe error message complains of `.recipeArtifactCoordinates` not being a valid Maven plugin. This tells me that the command line was parsed incorrectly and that there is some specific syntax one needs to use to make this work on Windows, and specifically in PowerShell.\r\n\r\n[This question][1] very likely has your answer.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/6347985/cannot-run-maven-using-mvn-d-argument-within-microsoft-powershell-but-works","title":"Timefold migration command is not working could it be that the command is wrong?","body":"<p>This looks to me like a Windows-specific problem, not caused by Timefold Solver. Consider the command:</p>\n<p><code>mvn org.openrewrite.maven:rewrite-maven-plugin:4.46.0:run -Drewrite.recipeArtifactCoordinates=ai.timefold.solver:timefold-solver-migration:0.8.41 -Drewrite.activeRecipes=ai.timefold.solver.migration.ToLatest</code></p>\n<p>The error message complains of <code>.recipeArtifactCoordinates</code> not being a valid Maven plugin. This tells me that the command line was parsed incorrectly and that there is some specific syntax one needs to use to make this work on Windows, and specifically in PowerShell.</p>\n<p><a href=\"https://stackoverflow.com/questions/6347985/cannot-run-maven-using-mvn-d-argument-within-microsoft-powershell-but-works\">This question</a> very likely has your answer.</p>\n"}],"owner":{"account_id":20701772,"reputation":43,"user_id":15200651,"display_name":"Bodea Tudor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77351852,"answer_count":1,"score":0,"last_activity_date":1698148529,"creation_date":1698146674,"question_id":77351656,"body_markdown":"Recently I&#39;ve tried to migrate my OptaPlanner project with the help of the maven command found on the official Timefold website but no matter what I do it doesn&#39;t seem to work. I&#39;ve tried ChatGPT(obviously no help), I tried deleting the repository folder found under ${username}/.m2/repository, still no help.\r\n\r\n\r\n```\r\nPS C:\\Users\\username\\Documents\\New folder\\project-name&gt; mvn org.openrewrite.maven:rewrite-maven-plugin:4.46.0:run -Drewrite.recipeArtifactCoordinates=ai.timefold.solver:timefold-solver-migration:0.8.41 -Drewrite.activeRecipes=ai.timefold.solver.migration.ToLatest\r\n[INFO] Scanning for projects...\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Reactor Build Order:\r\n[INFO] \r\n[INFO] Project Backend Application                                        [pom]\r\n[INFO] MyProjectBackend                                                   [jar]\r\n[INFO] OptaPlanner                                                        [jar]\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Reactor Summary for Project Backend Application 1.0.0-DEV:\r\n[INFO] \r\n[INFO] Project Backend Application ................... SKIPPED\r\n[INFO] MyProjectBackend  ................................ SKIPPED\r\n[INFO] OptaPlanner ........................................ SKIPPED\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.224 s\r\n[INFO] Finished at: 2023-10-24T14:09:44+03:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Error resolving version for plugin &#39;.recipeArtifactCoordinates=ai.timefold.solver:timefold-solver-migration&#39; from the repositories [local (C:\\Users\\username\\.m2\\repository), central (https://repo.maven.apache.org/maven2)]: Plugin not found in any plugin repository -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginVersionResolutionException\r\n\r\n```\r\n\r\nAs you can see I&#39;ve separated my project and optaplanner to speed up the process of generating a schedule in other words.. microservices. But that shouldn&#39;t matter it should just migrate some dependencies.\r\n\r\nAnyways, any help is welcomed! The project is written in SpringBoot Java","title":"Timefold migration command is not working could it be that the command is wrong?","body":"<p>Recently I've tried to migrate my OptaPlanner project with the help of the maven command found on the official Timefold website but no matter what I do it doesn't seem to work. I've tried ChatGPT(obviously no help), I tried deleting the repository folder found under ${username}/.m2/repository, still no help.</p>\n<pre><code>PS C:\\Users\\username\\Documents\\New folder\\project-name&gt; mvn org.openrewrite.maven:rewrite-maven-plugin:4.46.0:run -Drewrite.recipeArtifactCoordinates=ai.timefold.solver:timefold-solver-migration:0.8.41 -Drewrite.activeRecipes=ai.timefold.solver.migration.ToLatest\n[INFO] Scanning for projects...\n[INFO] ------------------------------------------------------------------------\n[INFO] Reactor Build Order:\n[INFO] \n[INFO] Project Backend Application                                        [pom]\n[INFO] MyProjectBackend                                                   [jar]\n[INFO] OptaPlanner                                                        [jar]\n[INFO] ------------------------------------------------------------------------\n[INFO] Reactor Summary for Project Backend Application 1.0.0-DEV:\n[INFO] \n[INFO] Project Backend Application ................... SKIPPED\n[INFO] MyProjectBackend  ................................ SKIPPED\n[INFO] OptaPlanner ........................................ SKIPPED\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.224 s\n[INFO] Finished at: 2023-10-24T14:09:44+03:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Error resolving version for plugin '.recipeArtifactCoordinates=ai.timefold.solver:timefold-solver-migration' from the repositories [local (C:\\Users\\username\\.m2\\repository), central (https://repo.maven.apache.org/maven2)]: Plugin not found in any plugin repository -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginVersionResolutionException\n\n</code></pre>\n<p>As you can see I've separated my project and optaplanner to speed up the process of generating a schedule in other words.. microservices. But that shouldn't matter it should just migrate some dependencies.</p>\n<p>Anyways, any help is welcomed! The project is written in SpringBoot Java</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":16878,"reputation":306133,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":2,"creation_date":1299335409,"post_id":5204385,"comment_id":5851300,"body_markdown":"Always true, for core and enterprise Java and every other kind as well.","body":"Always true, for core and enterprise Java and every other kind as well."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":3,"creation_date":1299337644,"post_id":5204385,"comment_id":5851602,"body_markdown":"You need Object and String to load before you can load an empty mian(String[]) method, that makes three ;)","body":"You need Object and String to load before you can load an empty mian(String[]) method, that makes three ;)"},{"owner":{"account_id":66010,"reputation":22927,"user_id":193906,"display_name":"Sanjay T. Sharma"},"score":1,"creation_date":1299338450,"post_id":5204385,"comment_id":5851695,"body_markdown":"@Peter: It&#39;s somewhere around 200 classes from the `java.*` package; see my updated answer.","body":"@Peter: It&#39;s somewhere around 200 classes from the <code>java.*</code> package; see my updated answer."}],"answers":[{"tags":[],"owner":{"account_id":129174,"reputation":39378,"user_id":327563,"accept_rate":90,"display_name":"Konerak"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1299335312,"creation_date":1299335312,"answer_id":5204389,"question_id":5204385,"body_markdown":"Yes. In Java you always need one class with the function main to have the JRE run it.","title":"Does every program in Java require a class?","body":"<p>Yes. In Java you always need one class with the function main to have the JRE run it.</p>\n"},{"tags":[],"owner":{"account_id":80348,"reputation":63958,"user_id":227267,"accept_rate":80,"display_name":"Matti Virkkunen"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1299335391,"creation_date":1299335391,"answer_id":5204400,"question_id":5204385,"body_markdown":"A program requires an entry point. An entry point has to be a method. In Java, every method must be contained in a class.\r\n\r\nThat would imply that every program must have a at least one class.","title":"Does every program in Java require a class?","body":"<p>A program requires an entry point. An entry point has to be a method. In Java, every method must be contained in a class.</p>\n\n<p>That would imply that every program must have a at least one class.</p>\n"},{"tags":[],"owner":{"account_id":66010,"reputation":22927,"user_id":193906,"display_name":"Sanjay T. Sharma"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1299338413,"creation_date":1299335736,"answer_id":5204433,"question_id":5204385,"body_markdown":"From the JVM&#39;s point of view; yes. From a programmers view point, it can be a Class or an Enum.\r\n\r\n    public enum AAA {\r\n\r\n        AAA;\r\n\r\n        public static void main(final String[] args) {\r\n            System.out.println(&quot;H&quot;);\r\n        }\r\n    \r\n    }\r\n\r\nEDIT: Even if you have a class with empty main method, there are a lot of core classes which work behind the scene to just run the &quot;empty&quot; class of yours. A list of those classes (around 200 from the `java.*` package) can be viewed by setting the `-verbose:class` JVM parameter.\r\n\r\n","title":"Does every program in Java require a class?","body":"<p>From the JVM's point of view; yes. From a programmers view point, it can be a Class or an Enum.</p>\n\n<pre><code>public enum AAA {\n\n    AAA;\n\n    public static void main(final String[] args) {\n        System.out.println(\"H\");\n    }\n\n}\n</code></pre>\n\n<p>EDIT: Even if you have a class with empty main method, there are a lot of core classes which work behind the scene to just run the \"empty\" class of yours. A list of those classes (around 200 from the <code>java.*</code> package) can be viewed by setting the <code>-verbose:class</code> JVM parameter.</p>\n"},{"tags":[],"owner":{"account_id":294983,"reputation":5941,"user_id":599152,"display_name":"rlibby"},"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1456229743,"creation_date":1299336088,"answer_id":5204469,"question_id":5204385,"body_markdown":"Yes, you need at least one class to have a program, but *no*, you do not need any methods (contrary to some other answers).\r\n\r\nThe reason you need a class is because in Java, all code is inside classes.  So to have any code, you need a class.  However, code doesn&#39;t necessarily need to be in a method.  It can also be in initializers.  So, here is a complete Java program with no methods:\r\n\r\n    class LookMaNoMethods {\r\n        static {\r\n            System.out.println(&quot;Hello, world!&quot;);\r\n            System.exit(0);\r\n        }\r\n    }\r\n\r\nAnd that gives...\r\n\r\n    $ javac LookMaNoMethods.java \r\n    $ java LookMaNoMethods \r\n    Hello, world!\r\n    $ \r\nEDIT : From Java 7 the above code with just static block and no main method does not produce any output. Main method is now compulsory. The code with no main method compiles successfully though.","title":"Does every program in Java require a class?","body":"<p>Yes, you need at least one class to have a program, but <em>no</em>, you do not need any methods (contrary to some other answers).</p>\n\n<p>The reason you need a class is because in Java, all code is inside classes.  So to have any code, you need a class.  However, code doesn't necessarily need to be in a method.  It can also be in initializers.  So, here is a complete Java program with no methods:</p>\n\n<pre><code>class LookMaNoMethods {\n    static {\n        System.out.println(\"Hello, world!\");\n        System.exit(0);\n    }\n}\n</code></pre>\n\n<p>And that gives...</p>\n\n<pre><code>$ javac LookMaNoMethods.java \n$ java LookMaNoMethods \nHello, world!\n$ \n</code></pre>\n\n<p>EDIT : From Java 7 the above code with just static block and no main method does not produce any output. Main method is now compulsory. The code with no main method compiles successfully though.</p>\n"},{"tags":[],"owner":{"account_id":297962,"reputation":54236,"user_id":603742,"accept_rate":33,"display_name":"stinepike"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1344957828,"creation_date":1299389619,"answer_id":5208921,"question_id":5204385,"body_markdown":"yes , you need minimum one class.","title":"Does every program in Java require a class?","body":"<p>yes , you need minimum one class.</p>\n"},{"tags":[],"owner":{"account_id":15263377,"reputation":1,"user_id":11012765,"display_name":"JATIN BEHUNE"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1553447935,"creation_date":1553446800,"answer_id":55326254,"question_id":5204385,"body_markdown":"JAVA required at least one class in a program because at the time of execution of Java programs we needed to provide the name of a class which contains the main () method.   \r\nso, it is compulsory to provide at least one class name to Java programs.\r\n ex---&gt;`\r\n           \r\n    class Test \r\n    { \r\n    public static void main(String [] args)\r\n    { \r\n    System.out.println(&quot;Hello World&quot;);\r\n    }\r\n    }\r\n\r\n so, javac _____ (&quot;Here we have to give the name of java program in which we save&quot;)  \r\n\r\n\r\n java ______ (&quot;Provide the name of a class which contain the main() method&quot;)\r\n\r\n\r\n-----&gt;\r\naccording to our program \r\n\r\njavac Hello (here I save the program name by Hello.java) \r\n\r\njava Test (because Test class contains main() method)\r\n\r\n\r\nThank You\r\n\r\n","title":"Does every program in Java require a class?","body":"<p>JAVA required at least one class in a program because at the time of execution of Java programs we needed to provide the name of a class which contains the main () method.<br>\nso, it is compulsory to provide at least one class name to Java programs.\n ex--->`</p>\n\n<pre><code>class Test \n{ \npublic static void main(String [] args)\n{ \nSystem.out.println(\"Hello World\");\n}\n}\n</code></pre>\n\n<p>so, javac _____ (\"Here we have to give the name of java program in which we save\")  </p>\n\n<p>java ______ (\"Provide the name of a class which contain the main() method\")</p>\n\n<p>----->\naccording to our program </p>\n\n<p>javac Hello (here I save the program name by Hello.java) </p>\n\n<p>java Test (because Test class contains main() method)</p>\n\n<p>Thank You</p>\n"},{"tags":[],"owner":{"account_id":24599697,"reputation":1,"user_id":18502731,"display_name":"Hrk Manbattulwar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647598384,"creation_date":1647598384,"answer_id":71525440,"question_id":5204385,"body_markdown":"No, classes aren&#39;t mandatory always we can write/define methods without using classes \r\nIt is simple,\r\nUse ***INTERFACES*** , \r\nhere is the code \r\n\r\n    public interface MainWithoutClass {\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.out.println(&quot;Main method without Class&quot;);\r\n\t}\r\n\t\r\n\tpublic static void m1() {\r\n\t\tSystem.out.println(&quot;M1 method &quot;);\r\n\t\t\r\n\t}\r\n}\r\n\r\n\r\n\r\nBecause Java 8 and after versions allows the interface to have a static methods .","title":"Does every program in Java require a class?","body":"<p>No, classes aren't mandatory always we can write/define methods without using classes\nIt is simple,\nUse <em><strong>INTERFACES</strong></em> ,\nhere is the code</p>\n<pre><code>public interface MainWithoutClass {\npublic static void main(String[] args) {\n    System.out.println(&quot;Main method without Class&quot;);\n}\n\npublic static void m1() {\n    System.out.println(&quot;M1 method &quot;);\n    \n}\n</code></pre>\n<p>}</p>\n<p>Because Java 8 and after versions allows the interface to have a static methods .</p>\n"},{"tags":[],"owner":{"account_id":7564113,"reputation":22471,"user_id":5740428,"accept_rate":64,"display_name":"Jan Schultke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698148431,"creation_date":1698148431,"answer_id":77351842,"question_id":5204385,"body_markdown":"Since Java 21, you can write a program without the presence of a `class`, `interface`, or `enum`:\r\n```java\r\nvoid main() {\r\n    System.out.println(&quot;Hello, World!&quot;);\r\n}\r\n```\r\nThis is possible thanks to [JEP 445: Unnamed classes](https://openjdk.org/jeps/445).\r\n\r\nHowever, from the JVM&#39;s perspective, there is always a class. `enum` or `interface` are considered classes by the JVM, and this Java 21 code simply puts `main` into an *unnamed class*. Therefore, it may look like you&#39;re not using a class, but under the hood, every program contains at least one class.\r\n\r\nBesides your own classes, every program at least needs to load the `Object` class.","title":"Does every program in Java require a class?","body":"<p>Since Java 21, you can write a program without the presence of a <code>class</code>, <code>interface</code>, or <code>enum</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>void main() {\n    System.out.println(&quot;Hello, World!&quot;);\n}\n</code></pre>\n<p>This is possible thanks to <a href=\"https://openjdk.org/jeps/445\" rel=\"nofollow noreferrer\">JEP 445: Unnamed classes</a>.</p>\n<p>However, from the JVM's perspective, there is always a class. <code>enum</code> or <code>interface</code> are considered classes by the JVM, and this Java 21 code simply puts <code>main</code> into an <em>unnamed class</em>. Therefore, it may look like you're not using a class, but under the hood, every program contains at least one class.</p>\n<p>Besides your own classes, every program at least needs to load the <code>Object</code> class.</p>\n"}],"owner":{"account_id":181203,"reputation":1197,"user_id":415041,"accept_rate":81,"display_name":"Tony"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22584,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":5204469,"answer_count":8,"score":13,"last_activity_date":1698148431,"creation_date":1299335255,"question_id":5204385,"body_markdown":"&gt; Every Java program requires the\r\n&gt; presence of at least one class.\r\n\r\nIs the above statement always true ?","title":"Does every program in Java require a class?","body":"<blockquote>\n  <p>Every Java program requires the\n  presence of at least one class.</p>\n</blockquote>\n\n<p>Is the above statement always true ?</p>\n"},{"tags":["java","kotlin","inline","value-class"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1698148652,"post_id":77351831,"comment_id":136365925,"body_markdown":"That conversion is a *Kotlin compiler* feature. You cannot expect it to work from Java code.","body":"That conversion is a <i>Kotlin compiler</i> feature. You cannot expect it to work from Java code."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":2,"creation_date":1698149435,"post_id":77351831,"comment_id":136366049,"body_markdown":"When I run javap on the resultant classfile, the only constructors are `public foo.Item(java.lang.String, int, kotlin.jvm.internal.DefaultConstructorMarker);` and `public foo.Item(java.lang.String, kotlin.jvm.internal.DefaultConstructorMarker);`. The `getId` gets some gibberish appended: `public final java.lang.String getId-yVWcZVQ();`. I guess Jorn is right. This is just incompatible with Java.","body":"When I run javap on the resultant classfile, the only constructors are <code>public foo.Item(java.lang.String, int, kotlin.jvm.internal.DefaultConstructorMarker);</code> and <code>public foo.Item(java.lang.String, kotlin.jvm.internal.DefaultConstructorMarker);</code>. The <code>getId</code> gets some gibberish appended: <code>public final java.lang.String getId-yVWcZVQ();</code>. I guess Jorn is right. This is just incompatible with Java."},{"owner":{"account_id":6646841,"reputation":608,"user_id":5130640,"accept_rate":0,"display_name":"martijn p"},"score":0,"creation_date":1698150305,"post_id":77351831,"comment_id":136366178,"body_markdown":"@Jorn but during the kotlin compilation it gets converted into standard JVM and that can be used by the java compiler right? We have data classes and those work just fine, the documentation even says that it should convert into a standard string type during kotlin compilation and that that can be called through java (read the documentation I linked in the question)","body":"@Jorn but during the kotlin compilation it gets converted into standard JVM and that can be used by the java compiler right? We have data classes and those work just fine, the documentation even says that it should convert into a standard string type during kotlin compilation and that that can be called through java (read the documentation I linked in the question)"},{"owner":{"account_id":6646841,"reputation":608,"user_id":5130640,"accept_rate":0,"display_name":"martijn p"},"score":0,"creation_date":1698150434,"post_id":77351831,"comment_id":136366199,"body_markdown":"@Michael what&#39;s strange to me is that the documentation I linked specifically mentions calling a method with an inline class in java, a nearly exactly identical case","body":"@Michael what&#39;s strange to me is that the documentation I linked specifically mentions calling a method with an inline class in java, a nearly exactly identical case"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1698153276,"post_id":77351831,"comment_id":136366771,"body_markdown":"The documentation you linked has a section on [mangling](https://kotlinlang.org/docs/inline-classes.html#mangling) which describes exactly what you&#39;re experiencing. Your `getId` method is mangled exactly as documented. That&#39;s why you can&#39;t use it from Java.","body":"The documentation you linked has a section on <a href=\"https://kotlinlang.org/docs/inline-classes.html#mangling\" rel=\"nofollow noreferrer\">mangling</a> which describes exactly what you&#39;re experiencing. Your <code>getId</code> method is mangled exactly as documented. That&#39;s why you can&#39;t use it from Java."},{"owner":{"account_id":6646841,"reputation":608,"user_id":5130640,"accept_rate":0,"display_name":"martijn p"},"score":0,"creation_date":1698173280,"post_id":77351831,"comment_id":136370865,"body_markdown":"@k314159 but in that example there are two methods where the generated method would result in the same output right? In the example below under the &quot;calling from java&quot; they are making a direct call. I don&#39;t see how there is a signature clash in this case, as well as others","body":"@k314159 but in that example there are two methods where the generated method would result in the same output right? In the example below under the &quot;calling from java&quot; they are making a direct call. I don&#39;t see how there is a signature clash in this case, as well as others"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1698224002,"post_id":77351831,"comment_id":136376719,"body_markdown":"If you want to call it from Java, you need to add `@JvmName` as that section says.","body":"If you want to call it from Java, you need to add <code>@JvmName</code> as that section says."},{"owner":{"account_id":6646841,"reputation":608,"user_id":5130640,"accept_rate":0,"display_name":"martijn p"},"score":1,"creation_date":1698237627,"post_id":77351831,"comment_id":136379402,"body_markdown":"@k314159 looking at it again it does indeed look like I misunderstood what the section was referring to. I got confused by the docs combining both a clash and jvmname within the same example made me think that mangling was only necessary when there was a clash, while that&#39;s not the case","body":"@k314159 looking at it again it does indeed look like I misunderstood what the section was referring to. I got confused by the docs combining both a clash and jvmname within the same example made me think that mangling was only necessary when there was a clash, while that&#39;s not the case"}],"owner":{"account_id":6646841,"reputation":608,"user_id":5130640,"accept_rate":0,"display_name":"martijn p"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698148331,"creation_date":1698148331,"question_id":77351831,"body_markdown":"I have the following class in kotlin:\r\n\r\n```\r\n@JvmInline\r\nvalue class ItemId(val value: String)\r\n\r\ndata class Item(\r\n     var id: ItemId? = null\r\n)\r\n```\r\n\r\nHowever if I ever call `Item.getId()` from a java class it will give me a `cannot find symbol` error while compiling.\r\n\r\nFrom my understanding during compilation ([according to this docs page][1]), the value class should be converted into a String during compilation, so I don&#39;t understand why or how getId() does not exist according to the java side.\r\n\r\nWhenever the Item constructor is called, a similar error occurs: `Item(...) has private access in ...`\r\n\r\nIs there a way to solve this problem?\r\n\r\n\r\n  [1]: https://kotlinlang.org/docs/inline-classes.html#mangling","title":"Kotlin inline value class creates &quot;cannot find symbol&quot; when called in java","body":"<p>I have the following class in kotlin:</p>\n<pre><code>@JvmInline\nvalue class ItemId(val value: String)\n\ndata class Item(\n     var id: ItemId? = null\n)\n</code></pre>\n<p>However if I ever call <code>Item.getId()</code> from a java class it will give me a <code>cannot find symbol</code> error while compiling.</p>\n<p>From my understanding during compilation (<a href=\"https://kotlinlang.org/docs/inline-classes.html#mangling\" rel=\"nofollow noreferrer\">according to this docs page</a>), the value class should be converted into a String during compilation, so I don't understand why or how getId() does not exist according to the java side.</p>\n<p>Whenever the Item constructor is called, a similar error occurs: <code>Item(...) has private access in ...</code></p>\n<p>Is there a way to solve this problem?</p>\n"},{"tags":["java","casting"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":4,"creation_date":1698148404,"post_id":77351823,"comment_id":136365876,"body_markdown":"Because both arms of a conditional statements must return the same type.","body":"Because both arms of a conditional statements must return the same type."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":3,"creation_date":1698148537,"post_id":77351823,"comment_id":136365904,"body_markdown":"Can&#39;t find the duplicate right now, but as mentioned the second arm is currently an `int` (not a nullable type). `Integer key = (resultLine[index] == null) ? null : Integer.valueOf((byte) resultLine[index]);` (avoid casting to a `Byte` like that).","body":"Can&#39;t find the duplicate right now, but as mentioned the second arm is currently an <code>int</code> (not a nullable type). <code>Integer key = (resultLine[index] == null) ? null : Integer.valueOf((byte) resultLine[index]);</code> (avoid casting to a <code>Byte</code> like that)."},{"owner":{"account_id":799499,"reputation":59,"user_id":878355,"accept_rate":45,"display_name":"Batty"},"score":0,"creation_date":1698148748,"post_id":77351823,"comment_id":136365939,"body_markdown":"Thank you very much! I didn&#39;t know it before.","body":"Thank you very much! I didn&#39;t know it before."},{"owner":{"account_id":221272,"reputation":6281,"user_id":479156,"accept_rate":92,"display_name":"Ivar"},"score":0,"creation_date":1698154746,"post_id":77351823,"comment_id":136367123,"body_markdown":"@Batty Is that the _exact_ error you are getting? [I&#39;m having a hard time reproducing that error](https://ideone.com/AbmzD5). (And [the only match I can find on Google](https://www.google.com/search?q=%22Cannot+cast+numeric+value+to+%27null%27%22) is this very question.)","body":"@Batty Is that the <i>exact</i> error you are getting? <a href=\"https://ideone.com/AbmzD5\" rel=\"nofollow noreferrer\">I&#39;m having a hard time reproducing that error</a>. (And <a href=\"https://www.google.com/search?q=%22Cannot+cast+numeric+value+to+%27null%27%22\" rel=\"nofollow noreferrer\">the only match I can find on Google</a> is this very question.)"}],"owner":{"account_id":799499,"reputation":59,"user_id":878355,"accept_rate":45,"display_name":"Batty"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698148278,"creation_date":1698148278,"question_id":77351823,"body_markdown":"I try to initial Integer variable with short if syntax\r\nBut get an exception in run time.\r\n\r\n    &quot;Cannot cast numeric value to &#39;null&#39;&quot;\r\n\r\nThis is my code:\r\n\r\n      Integer key= (resultLine[index] == null) ? null : ((Byte)resultLine[index]).intValue();\r\n\r\nand if I change it to:\r\n\r\n      Integer key= (resultLine[index] == null) ? 1 : ((Byte)resultLine[index]).intValue();\r\n\r\nIt works correctly.\r\n\r\nAny Idea?\r\n\r\nThanks\r\n\r\n","title":"Why does set null to integer variable throw Exception","body":"<p>I try to initial Integer variable with short if syntax\nBut get an exception in run time.</p>\n<pre><code>&quot;Cannot cast numeric value to 'null'&quot;\n</code></pre>\n<p>This is my code:</p>\n<pre><code>  Integer key= (resultLine[index] == null) ? null : ((Byte)resultLine[index]).intValue();\n</code></pre>\n<p>and if I change it to:</p>\n<pre><code>  Integer key= (resultLine[index] == null) ? 1 : ((Byte)resultLine[index]).intValue();\n</code></pre>\n<p>It works correctly.</p>\n<p>Any Idea?</p>\n<p>Thanks</p>\n"},{"tags":["java","mongodb"],"owner":{"account_id":13887759,"reputation":1,"user_id":22176575,"display_name":"ifog"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698148127,"creation_date":1698148127,"question_id":77351806,"body_markdown":"So i&#39;m trying convert bson document to objectNode using custom mongo converet, and getting error:\r\n`org.bson.codecs.configuration.CodecConfigurationException: The uuidRepresentation has not been specified, so the UUID cannot be encoded`\r\n\r\nMy converter:\r\n\r\n```\r\n@ReadingConverter\r\npublic enum DocumentToObjectNodeConverter implements Converter&lt;Document, ObjectNode&gt; {\r\n    INSTANCE;\r\n\r\n    public ObjectNode convert(Document source) {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n\r\n        try {\r\n            return mapper.readValue(source.toJson(), ObjectNode.class);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(&quot;Unable to parse DbObject to ObjectNode&quot;, e);\r\n        }\r\n    }\r\n}\r\n```\r\nExceptions throws in source.toJson() method.\r\n\r\nMy bson doc: \r\n\r\n```\r\n&#39;Document{{_id=0c79696c-f699-43fa-b126-d3efd47cdb42, code=weather-demo, createdAt=Fri May 28 10:48:33 ALMT 2021, updatedAt=Fri May 28 10:48:33 ALMT 2021}}&#39;\r\n```\r\nWhat&#39;s wrong ?\r\n\r\n\r\nI tried to add uuidRepresentation in my mongoTemplate and application.yml file:\r\n\r\n\r\nMy mongo config:\r\n\r\n```\r\n    @Bean\r\n    MongoTemplate mongoTemplate() {\r\n        MongoClient mongoClient = MongoClients.create(MongoClientSettings\r\n                .builder()\r\n                .applyConnectionString(new ConnectionString(mongoUri))\r\n                .uuidRepresentation(UuidRepresentation.STANDARD)\r\n                .build());\r\n        MongoTemplate mongoTemplate = new MongoTemplate(mongoClient, &quot;test&quot;);\r\n        MappingMongoConverter mmc = (MappingMongoConverter) mongoTemplate.getConverter();\r\n        mmc.setCustomConversions(mainLib.mongoCustomConversions());\r\n        mmc.afterPropertiesSet();\r\n        return mongoTemplate;\r\n    }\r\n```\r\n\r\nMy application.yml:\r\n`spring.data.monogdb.uuid-representation: standard`","title":"bson document to jackson object node coversion","body":"<p>So i'm trying convert bson document to objectNode using custom mongo converet, and getting error:\n<code>org.bson.codecs.configuration.CodecConfigurationException: The uuidRepresentation has not been specified, so the UUID cannot be encoded</code></p>\n<p>My converter:</p>\n<pre><code>@ReadingConverter\npublic enum DocumentToObjectNodeConverter implements Converter&lt;Document, ObjectNode&gt; {\n    INSTANCE;\n\n    public ObjectNode convert(Document source) {\n        ObjectMapper mapper = new ObjectMapper();\n\n        try {\n            return mapper.readValue(source.toJson(), ObjectNode.class);\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;Unable to parse DbObject to ObjectNode&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>Exceptions throws in source.toJson() method.</p>\n<p>My bson doc:</p>\n<pre><code>'Document{{_id=0c79696c-f699-43fa-b126-d3efd47cdb42, code=weather-demo, createdAt=Fri May 28 10:48:33 ALMT 2021, updatedAt=Fri May 28 10:48:33 ALMT 2021}}'\n</code></pre>\n<p>What's wrong ?</p>\n<p>I tried to add uuidRepresentation in my mongoTemplate and application.yml file:</p>\n<p>My mongo config:</p>\n<pre><code>    @Bean\n    MongoTemplate mongoTemplate() {\n        MongoClient mongoClient = MongoClients.create(MongoClientSettings\n                .builder()\n                .applyConnectionString(new ConnectionString(mongoUri))\n                .uuidRepresentation(UuidRepresentation.STANDARD)\n                .build());\n        MongoTemplate mongoTemplate = new MongoTemplate(mongoClient, &quot;test&quot;);\n        MappingMongoConverter mmc = (MappingMongoConverter) mongoTemplate.getConverter();\n        mmc.setCustomConversions(mainLib.mongoCustomConversions());\n        mmc.afterPropertiesSet();\n        return mongoTemplate;\n    }\n</code></pre>\n<p>My application.yml:\n<code>spring.data.monogdb.uuid-representation: standard</code></p>\n"},{"tags":["java","android","listview","searchview"],"answers":[{"tags":[],"owner":{"account_id":1021265,"reputation":15894,"user_id":1031556,"accept_rate":93,"display_name":"Stephan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698147996,"creation_date":1698128296,"answer_id":77349889,"question_id":77349726,"body_markdown":"You delete the item from the original list, but not the list in your `ArrayAdapter`. Therefore the item is still in the list, even after you call `notifyDataSetChanged`. Do:\r\n\r\n    ...\r\n    String itemToRemove = itemList.remove(position);\r\n    arrayAdapter.remove(itemToRemove);    \r\n    arrayAdapter.notifyDataSetChanged();\r\n    ...\r\n\r\nin your positive button callback.","title":"Android - The listview is not updating when I use searchview","body":"<p>You delete the item from the original list, but not the list in your <code>ArrayAdapter</code>. Therefore the item is still in the list, even after you call <code>notifyDataSetChanged</code>. Do:</p>\n<pre><code>...\nString itemToRemove = itemList.remove(position);\narrayAdapter.remove(itemToRemove);    \narrayAdapter.notifyDataSetChanged();\n...\n</code></pre>\n<p>in your positive button callback.</p>\n"},{"tags":[],"owner":{"account_id":29559123,"reputation":41,"user_id":22654090,"display_name":"ShayFox"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698129014,"creation_date":1698129014,"answer_id":77349928,"question_id":77349726,"body_markdown":"**Hi** even if i can&#39;t explain why that didn&#39;t work, we can fix that with differents way.\r\n\r\n- ArraysAdapters can be capricious, you can just reset it but that isn&#39;t best way.\r\n- You can create you on adapter with new class extends BaseAdapter\r\n\r\nThat exemple how you can make that:\r\n\r\n```\r\npublic class CustomAdapter extends BaseAdapter {\r\n\r\n    ArrayList&lt;String&gt; itemList = new ArrayList&lt;&gt;();\r\n\r\n    @Override\r\n    public int getCount() {\r\n        return itemList.size();\r\n    }\r\n\r\n    @Override\r\n    public Object getItem(int i) {\r\n        return itemList.get(i)\r\n    }\r\n\r\n    @Override\r\n    public long getItemId(int i) {\r\n        return i;\r\n    }\r\n\r\n    @Override\r\n    public View getView(int i, View view, ViewGroup viewGroup) {\r\n        view = inflater.inflate(android.R.layout.simple_list_item_1, null);\r\n        String item = itemList.get(i);\r\n        TextView textview = view.findViewById(android.R.id.text1);\r\n        textview.setText(item);\r\n\r\n        return view;\r\n    }\r\n```\r\n\r\nHoping to have helped you,\r\nShayfox.","title":"Android - The listview is not updating when I use searchview","body":"<p><strong>Hi</strong> even if i can't explain why that didn't work, we can fix that with differents way.</p>\n<ul>\n<li>ArraysAdapters can be capricious, you can just reset it but that isn't best way.</li>\n<li>You can create you on adapter with new class extends BaseAdapter</li>\n</ul>\n<p>That exemple how you can make that:</p>\n<pre><code>public class CustomAdapter extends BaseAdapter {\n\n    ArrayList&lt;String&gt; itemList = new ArrayList&lt;&gt;();\n\n    @Override\n    public int getCount() {\n        return itemList.size();\n    }\n\n    @Override\n    public Object getItem(int i) {\n        return itemList.get(i)\n    }\n\n    @Override\n    public long getItemId(int i) {\n        return i;\n    }\n\n    @Override\n    public View getView(int i, View view, ViewGroup viewGroup) {\n        view = inflater.inflate(android.R.layout.simple_list_item_1, null);\n        String item = itemList.get(i);\n        TextView textview = view.findViewById(android.R.id.text1);\n        textview.setText(item);\n\n        return view;\n    }\n</code></pre>\n<p>Hoping to have helped you,\nShayfox.</p>\n"}],"owner":{"account_id":29740144,"reputation":1,"user_id":22792585,"display_name":"cyla1234"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698147996,"creation_date":1698125722,"question_id":77349726,"body_markdown":"I am novice in Android Studio, can someone help me with my problem. After I use searchview, when I delete a item in the listview it is not updating. \r\n\r\n\r\n\r\nLet me give you the screenshot to better visualize the problem\r\n\r\n[This is the look of the application](https://i.stack.imgur.com/tf1Us.png)\r\n\r\n[The filter works and it shows the Lemon](https://i.stack.imgur.com/ZSVxm.png)\r\n\r\n[After using the searchview, I try to delete the Lemon with the toast message but it is still in the listview](https://i.stack.imgur.com/6wmcX.png)\r\n\r\n\r\n1. Here&#39;s what I been working on so far\r\n\r\n**Main activity.java**\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity\r\n{\r\n    EditText item, price;\r\n\r\n    Button add;\r\n\r\n    ListView listView;\r\n    SearchView searchBox;\r\n    ArrayList&lt;String&gt; itemList = new ArrayList&lt;&gt;();\r\n    ArrayList&lt;String&gt; searchList = new ArrayList&lt;&gt;();\r\n    ArrayAdapter&lt;String&gt; arrayAdapter;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        item = findViewById(R.id.edtProdName);\r\n        price = findViewById(R.id.edtPrice);\r\n        add = findViewById(R.id.btnAdd);\r\n        listView = findViewById(R.id.list);\r\n        searchBox = findViewById(R.id.searchView);\r\n\r\n        itemList = FileHelper.readData(this);\r\n        arrayAdapter = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1, android.R.id.text1, itemList);\r\n\r\n        listView.setAdapter(arrayAdapter);\r\n        add.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                String prodName = item.getText().toString();\r\n                String prodPrice = price.getText().toString();\r\n                String product = prodName.toUpperCase() +  &quot; &quot; + &quot;P&quot; +  prodPrice.toUpperCase();\r\n                itemList.add(product);\r\n                item.setText(&quot;&quot;);\r\n                price.setText(&quot;&quot;);\r\n                FileHelper.writeData(itemList,getApplicationContext());\r\n                arrayAdapter.notifyDataSetChanged();\r\n                Collections.sort(itemList);\r\n            }\r\n        });\r\n\r\n        listView.setOnItemClickListener(new AdapterView.OnItemClickListener()\r\n        {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id)\r\n            {\r\n                AlertDialog.Builder alert = new AlertDialog.Builder(MainActivity.this);\r\n                alert.setTitle(&quot;Delete&quot;);\r\n                alert.setMessage(&quot;Do you want to delete this product from the list?&quot;);\r\n                alert.setCancelable(false);\r\n                alert.setNegativeButton(&quot;No&quot;, new DialogInterface.OnClickListener()\r\n                {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which)\r\n                    {\r\n                        dialog.cancel();\r\n                    }\r\n                });\r\n\r\n                alert.setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener()\r\n                {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which)\r\n                    {\r\n                        itemList.remove(position);\r\n                        FileHelper.writeData(itemList, getApplicationContext());\r\n                        arrayAdapter.notifyDataSetChanged();\r\n                        Toast.makeText(MainActivity.this, &quot;Deleted successfully&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n                AlertDialog alertDialog = alert.create();\r\n                alertDialog.show();\r\n            }\r\n        });\r\n\r\n        searchBox.setOnQueryTextListener(new SearchView.OnQueryTextListener() {\r\n            @Override\r\n            public boolean onQueryTextSubmit(String query) {\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public boolean onQueryTextChange(String newText)\r\n            {\r\n                arrayAdapter.getFilter().filter(newText);\r\n                return false;\r\n            }\r\n\r\n        });\r\n    }\r\n}\r\n```\r\n\r\n**FileHelper.Java (which let me save the data in here in my device memory)**\r\n\r\n\r\n```\r\npublic class FileHelper\r\n{\r\n    public static final String FILENAME = &quot;listinfo.dat&quot;;\r\n\r\n    public static void writeData(ArrayList&lt;String&gt; item, Context context)\r\n    {\r\n        try\r\n        {\r\n            FileOutputStream fos = context.openFileOutput(FILENAME, Context.MODE_PRIVATE);\r\n            ObjectOutputStream oas = new ObjectOutputStream(fos);\r\n            oas.writeObject(item);\r\n            oas.close();\r\n        }\r\n        catch (FileNotFoundException e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n        catch (IOException e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    public static ArrayList&lt;String&gt; readData(Context context)\r\n    {\r\n        ArrayList&lt;String&gt; itemList = null;\r\n        try\r\n        {\r\n            FileInputStream fis = context.openFileInput(FILENAME);\r\n            ObjectInputStream ois = new ObjectInputStream(fis);\r\n            itemList = (ArrayList&lt;String&gt;) ois.readObject();\r\n        }\r\n        catch (FileNotFoundException e)\r\n        {\r\n            itemList = new ArrayList&lt;&gt;();\r\n            e.printStackTrace();\r\n        }\r\n        catch (IOException e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n        catch (ClassNotFoundException e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n        return itemList;\r\n    }\r\n}\r\n```\r\n","title":"Android - The listview is not updating when I use searchview","body":"<p>I am novice in Android Studio, can someone help me with my problem. After I use searchview, when I delete a item in the listview it is not updating.</p>\n<p>Let me give you the screenshot to better visualize the problem</p>\n<p><a href=\"https://i.stack.imgur.com/tf1Us.png\" rel=\"nofollow noreferrer\">This is the look of the application</a></p>\n<p><a href=\"https://i.stack.imgur.com/ZSVxm.png\" rel=\"nofollow noreferrer\">The filter works and it shows the Lemon</a></p>\n<p><a href=\"https://i.stack.imgur.com/6wmcX.png\" rel=\"nofollow noreferrer\">After using the searchview, I try to delete the Lemon with the toast message but it is still in the listview</a></p>\n<ol>\n<li>Here's what I been working on so far</li>\n</ol>\n<p><strong>Main activity.java</strong></p>\n<pre><code>public class MainActivity extends AppCompatActivity\n{\n    EditText item, price;\n\n    Button add;\n\n    ListView listView;\n    SearchView searchBox;\n    ArrayList&lt;String&gt; itemList = new ArrayList&lt;&gt;();\n    ArrayList&lt;String&gt; searchList = new ArrayList&lt;&gt;();\n    ArrayAdapter&lt;String&gt; arrayAdapter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        item = findViewById(R.id.edtProdName);\n        price = findViewById(R.id.edtPrice);\n        add = findViewById(R.id.btnAdd);\n        listView = findViewById(R.id.list);\n        searchBox = findViewById(R.id.searchView);\n\n        itemList = FileHelper.readData(this);\n        arrayAdapter = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1, android.R.id.text1, itemList);\n\n        listView.setAdapter(arrayAdapter);\n        add.setOnClickListener(new View.OnClickListener()\n        {\n            @Override\n            public void onClick(View v)\n            {\n                String prodName = item.getText().toString();\n                String prodPrice = price.getText().toString();\n                String product = prodName.toUpperCase() +  &quot; &quot; + &quot;P&quot; +  prodPrice.toUpperCase();\n                itemList.add(product);\n                item.setText(&quot;&quot;);\n                price.setText(&quot;&quot;);\n                FileHelper.writeData(itemList,getApplicationContext());\n                arrayAdapter.notifyDataSetChanged();\n                Collections.sort(itemList);\n            }\n        });\n\n        listView.setOnItemClickListener(new AdapterView.OnItemClickListener()\n        {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id)\n            {\n                AlertDialog.Builder alert = new AlertDialog.Builder(MainActivity.this);\n                alert.setTitle(&quot;Delete&quot;);\n                alert.setMessage(&quot;Do you want to delete this product from the list?&quot;);\n                alert.setCancelable(false);\n                alert.setNegativeButton(&quot;No&quot;, new DialogInterface.OnClickListener()\n                {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which)\n                    {\n                        dialog.cancel();\n                    }\n                });\n\n                alert.setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener()\n                {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which)\n                    {\n                        itemList.remove(position);\n                        FileHelper.writeData(itemList, getApplicationContext());\n                        arrayAdapter.notifyDataSetChanged();\n                        Toast.makeText(MainActivity.this, &quot;Deleted successfully&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                });\n\n                AlertDialog alertDialog = alert.create();\n                alertDialog.show();\n            }\n        });\n\n        searchBox.setOnQueryTextListener(new SearchView.OnQueryTextListener() {\n            @Override\n            public boolean onQueryTextSubmit(String query) {\n                return false;\n            }\n\n            @Override\n            public boolean onQueryTextChange(String newText)\n            {\n                arrayAdapter.getFilter().filter(newText);\n                return false;\n            }\n\n        });\n    }\n}\n</code></pre>\n<p><strong>FileHelper.Java (which let me save the data in here in my device memory)</strong></p>\n<pre><code>public class FileHelper\n{\n    public static final String FILENAME = &quot;listinfo.dat&quot;;\n\n    public static void writeData(ArrayList&lt;String&gt; item, Context context)\n    {\n        try\n        {\n            FileOutputStream fos = context.openFileOutput(FILENAME, Context.MODE_PRIVATE);\n            ObjectOutputStream oas = new ObjectOutputStream(fos);\n            oas.writeObject(item);\n            oas.close();\n        }\n        catch (FileNotFoundException e)\n        {\n            e.printStackTrace();\n        }\n        catch (IOException e)\n        {\n            e.printStackTrace();\n        }\n\n    }\n\n    public static ArrayList&lt;String&gt; readData(Context context)\n    {\n        ArrayList&lt;String&gt; itemList = null;\n        try\n        {\n            FileInputStream fis = context.openFileInput(FILENAME);\n            ObjectInputStream ois = new ObjectInputStream(fis);\n            itemList = (ArrayList&lt;String&gt;) ois.readObject();\n        }\n        catch (FileNotFoundException e)\n        {\n            itemList = new ArrayList&lt;&gt;();\n            e.printStackTrace();\n        }\n        catch (IOException e)\n        {\n            e.printStackTrace();\n        }\n        catch (ClassNotFoundException e)\n        {\n            e.printStackTrace();\n        }\n        return itemList;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","solr","solr9"],"comments":[{"owner":{"account_id":46578,"reputation":50301,"user_id":137650,"display_name":"MatsLindh"},"score":0,"creation_date":1698054463,"post_id":77344079,"comment_id":136352028,"body_markdown":"How the query is performed depends on what the analysis chain for the field is. Common filters will remove `%` or split by it - so what is the analysis chain for the field, and what does the `Analysis` page under the admin console show as the tokens when you input `250%`? - the `%25` part is just how it&#39;s escaped in the URL, and means that Solr will actually see `250%`, not `250%25` (`%25` =&gt; `%`). However, the analysis chain will probably remove that special character, again, depending on which filters are present in the analysis chain for that field.","body":"How the query is performed depends on what the analysis chain for the field is. Common filters will remove <code>%</code> or split by it - so what is the analysis chain for the field, and what does the <code>Analysis</code> page under the admin console show as the tokens when you input <code>250%</code>? - the <code>%25</code> part is just how it&#39;s escaped in the URL, and means that Solr will actually see <code>250%</code>, not <code>250%25</code> (<code>%25</code> =&gt; <code>%</code>). However, the analysis chain will probably remove that special character, again, depending on which filters are present in the analysis chain for that field."},{"owner":{"account_id":10631702,"reputation":347,"user_id":7829642,"display_name":"Taras Danylchenko"},"score":0,"creation_date":1698056363,"post_id":77344079,"comment_id":136352366,"body_markdown":"@MatsLindh query have like an standart analyzers \n        `&lt;tokenizer class=&quot;solr.StandardTokenizerFactory&quot;/&gt;\n        &lt;filter class=&quot;solr.LowerCaseFilterFactory&quot;/&gt;\n        &lt;filter class=&quot;solr.EnglishPossessiveFilterFactory&quot;/&gt;\n        &lt;filter class=&quot;solr.EnglishMinimalStemFilterFactory&quot;/&gt;\n        &lt;filter class=&quot;solr.PorterStemFilterFactory&quot;/&gt;`","body":"@MatsLindh query have like an standart analyzers          <code>&lt;tokenizer class=&quot;solr.StandardTokenizerFactory&quot;&#47;&gt;         &lt;filter class=&quot;solr.LowerCaseFilterFactory&quot;&#47;&gt;         &lt;filter class=&quot;solr.EnglishPossessiveFilterFactory&quot;&#47;&gt;         &lt;filter class=&quot;solr.EnglishMinimalStemFilterFactory&quot;&#47;&gt;         &lt;filter class=&quot;solr.PorterStemFilterFactory&quot;&#47;&gt;</code>"},{"owner":{"account_id":10631702,"reputation":347,"user_id":7829642,"display_name":"Taras Danylchenko"},"score":0,"creation_date":1698067227,"post_id":77344079,"comment_id":136354401,"body_markdown":"@MatsLindh analysing query returns only 250, so % is trimmed from query","body":"@MatsLindh analysing query returns only 250, so % is trimmed from query"},{"owner":{"account_id":46578,"reputation":50301,"user_id":137650,"display_name":"MatsLindh"},"score":0,"creation_date":1698078930,"post_id":77344079,"comment_id":136356892,"body_markdown":"The StandardTokenizer will split on `%` as well, so if you want those to be kept, define a different field type with a whitespace tokenizer (or something else that matches how you want to tokenize text).","body":"The StandardTokenizer will split on <code>%</code> as well, so if you want those to be kept, define a different field type with a whitespace tokenizer (or something else that matches how you want to tokenize text)."}],"owner":{"account_id":10631702,"reputation":347,"user_id":7829642,"display_name":"Taras Danylchenko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698147817,"creation_date":1698053299,"question_id":77344079,"body_markdown":"I wanna make query into solr by searching values like &#39;75%&#39; or &#39;14%&#39; and etc. Generated query is `http://localhost:8983/solr/#/testEngine/query?q=250%25&amp;q.op=OR&amp;indent=true&amp;start=0&amp;rows=20`&lt;br&gt;\r\nThe problem is that returned result rows contains text `250%` and `25/250` which is wrong and unexpected &lt;br&gt;\r\nI see that its generate and additional 25 number but in other side %25 corresponds to the % character. Chrome also turns % or %25. Can it means that or Solr chokes on just a % because it expects a URL escape sequence or how it should be modified to return only text which contains like `250%`? ","title":"Solr searching text with percentage sign &#39;%&#39;","body":"<p>I wanna make query into solr by searching values like '75%' or '14%' and etc. Generated query is <code>http://localhost:8983/solr/#/testEngine/query?q=250%25&amp;q.op=OR&amp;indent=true&amp;start=0&amp;rows=20</code><br>\nThe problem is that returned result rows contains text <code>250%</code> and <code>25/250</code> which is wrong and unexpected <br>\nI see that its generate and additional 25 number but in other side %25 corresponds to the % character. Chrome also turns % or %25. Can it means that or Solr chokes on just a % because it expects a URL escape sequence or how it should be modified to return only text which contains like <code>250%</code>?</p>\n"},{"tags":["java","html","selenium-webdriver","automation","dropdown"],"owner":{"account_id":21676414,"reputation":11,"user_id":15993310,"display_name":"Sarp Vula"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1698147574,"creation_date":1698131252,"question_id":77350112,"body_markdown":"I am automating a task with Selenium where I enter different letter combinations into the Gmail input field. As I type, a dropdown appears with email suggestions based on the input. I want to capture these email suggestions for each letter combination.\r\n\r\n\r\n\r\nCurrently, I&#39;m using the following code to loop through and capture the email suggestions:\r\n\r\n\r\n\r\n    List&lt;WebElement&gt; emailElements = driver.findElements(By.cssSelector(&quot;div.aXS&quot;));\r\n    for (WebElement emailElement : emailElements) {\r\n        String email = emailElement.getText();\r\n        System.out.println(email);\r\n    }\r\n\r\n\r\nIt takes approximately 20 seconds for each letter combination which is a lot. \r\n\r\nHow can I efficiently loop through and capture all email suggestions without such delays?\r\n\r\nIs there a way to set a maximum wait time for findElements to avoid long waits when no suggestions are present?\r\n","title":"How can I implement a faster loop through email suggestions in a dropdown (UL) using Java Selenium?","body":"<p>I am automating a task with Selenium where I enter different letter combinations into the Gmail input field. As I type, a dropdown appears with email suggestions based on the input. I want to capture these email suggestions for each letter combination.</p>\n<p>Currently, I'm using the following code to loop through and capture the email suggestions:</p>\n<pre><code>List&lt;WebElement&gt; emailElements = driver.findElements(By.cssSelector(&quot;div.aXS&quot;));\nfor (WebElement emailElement : emailElements) {\n    String email = emailElement.getText();\n    System.out.println(email);\n}\n</code></pre>\n<p>It takes approximately 20 seconds for each letter combination which is a lot.</p>\n<p>How can I efficiently loop through and capture all email suggestions without such delays?</p>\n<p>Is there a way to set a maximum wait time for findElements to avoid long waits when no suggestions are present?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1698141596,"post_id":77350948,"comment_id":136364625,"body_markdown":"It is static, so if you aren&#39;t using Spring or calling this before Spring has finished ther is no garantuee this has been set. Also when using such a class this generally means you are doing things wrong in the first place.","body":"It is static, so if you aren&#39;t using Spring or calling this before Spring has finished ther is no garantuee this has been set. Also when using such a class this generally means you are doing things wrong in the first place."},{"owner":{"account_id":8792043,"reputation":460,"user_id":6571471,"accept_rate":38,"display_name":"manjosh"},"score":0,"creation_date":1698146226,"post_id":77350948,"comment_id":136365473,"body_markdown":"oh ok, is there a way to know if context is set? I need this class as it is used in some static methods.","body":"oh ok, is there a way to know if context is set? I need this class as it is used in some static methods."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1698146326,"post_id":77350948,"comment_id":136365499,"body_markdown":"But why are you using this in the first place? You should be injecting dependencies not using this hack to look them up.","body":"But why are you using this in the first place? You should be injecting dependencies not using this hack to look them up."}],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698147508,"creation_date":1698147508,"answer_id":77351737,"question_id":77350948,"body_markdown":"Due to the `getBean` methods being static, Spring has no way of knowing that  `ApplicationContextProvider` is being used. When lazy initialization is enabled, beans are only initialized when they&#39;re used. As Spring can&#39;t tell that you&#39;re using `ApplicationContextProvier`, it&#39;s never initialized and `setApplicationContext` is never called.\r\n\r\nYou could define a `LazyInitializationExcludeFilter` bean that excludes `ApplicationContextProvider` from lazy initialization. However, as has been said in the comments, a better solution would be remove the need for `ApplicationContextProvider` by using dependency injection instead.","title":"ApplicationContext is null in an ApplicationAware class when lazy-initialization: true in springboot 3","body":"<p>Due to the <code>getBean</code> methods being static, Spring has no way of knowing that  <code>ApplicationContextProvider</code> is being used. When lazy initialization is enabled, beans are only initialized when they're used. As Spring can't tell that you're using <code>ApplicationContextProvier</code>, it's never initialized and <code>setApplicationContext</code> is never called.</p>\n<p>You could define a <code>LazyInitializationExcludeFilter</code> bean that excludes <code>ApplicationContextProvider</code> from lazy initialization. However, as has been said in the comments, a better solution would be remove the need for <code>ApplicationContextProvider</code> by using dependency injection instead.</p>\n"}],"owner":{"account_id":8792043,"reputation":460,"user_id":6571471,"accept_rate":38,"display_name":"manjosh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77351737,"answer_count":1,"score":0,"last_activity_date":1698147508,"creation_date":1698140030,"question_id":77350948,"body_markdown":"I want to initialize my beans lazily and hence enabled `spring.main.lazy-initialization=true` in application.properties.\r\n\r\nI have a class called ApplicationContextProvider as below:\r\n\r\n    @Component\r\n    public class ApplicationContextProvider implements ApplicationContextAware {\r\n    private static ApplicationContext context;\r\n\r\n    public static &lt;T&gt; T getBean(String name, Class&lt;T&gt; aClass) {\r\n        return context.getBean(name, aClass);\r\n    }\r\n\r\n    public static &lt;T&gt; T getBean(Class&lt;T&gt; aClass) {\r\n        return context.getBean(aClass);\r\n    }\r\n\r\n    @Override\r\n    public void setApplicationContext(ApplicationContext ctx) throws BeansException {\r\n        context = ctx;\r\n    }\r\n    }\r\n\r\nwhen i call `ApplicationContextProvider.getBean(Environment.Class)` or any other class, the `ApplicationContext` is always null. So i get a null pointer exception.\r\n\r\nAm I missing some configuration?\r\n\r\nPlease advise.","title":"ApplicationContext is null in an ApplicationAware class when lazy-initialization: true in springboot 3","body":"<p>I want to initialize my beans lazily and hence enabled <code>spring.main.lazy-initialization=true</code> in application.properties.</p>\n<p>I have a class called ApplicationContextProvider as below:</p>\n<pre><code>@Component\npublic class ApplicationContextProvider implements ApplicationContextAware {\nprivate static ApplicationContext context;\n\npublic static &lt;T&gt; T getBean(String name, Class&lt;T&gt; aClass) {\n    return context.getBean(name, aClass);\n}\n\npublic static &lt;T&gt; T getBean(Class&lt;T&gt; aClass) {\n    return context.getBean(aClass);\n}\n\n@Override\npublic void setApplicationContext(ApplicationContext ctx) throws BeansException {\n    context = ctx;\n}\n}\n</code></pre>\n<p>when i call <code>ApplicationContextProvider.getBean(Environment.Class)</code> or any other class, the <code>ApplicationContext</code> is always null. So i get a null pointer exception.</p>\n<p>Am I missing some configuration?</p>\n<p>Please advise.</p>\n"},{"tags":["java","spring-boot"],"owner":{"account_id":22606221,"reputation":135,"user_id":16787102,"display_name":"d3ridi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698147401,"creation_date":1698002732,"question_id":77341404,"body_markdown":"when using **RepositoryRestResource** insted of create crud controller the validation are not working,\r\n\r\n``` \r\npublic class Category {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @NotNull\r\n    @NotBlank\r\n\r\n    private String name;\r\n}\r\n```\r\n\r\n\r\n``` \r\n@RepositoryRestResource\r\npublic interface CategoryRepository extends JpaRepository&lt;Category, Long&gt; {\r\n\r\n}\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIf i create a crud controller and add \r\n\r\n``` \r\npublic Catrgory create(@Valid Category category){\r\n    ....\r\n}\r\n ```\r\n\r\nthe validation will work but i don&#39;t want this , i want to use **RepositoryRestResource**\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jPJrn.png","title":"Spring boot RepositoryRestResource validation are not working","body":"<p>when using <strong>RepositoryRestResource</strong> insted of create crud controller the validation are not working,</p>\n<pre><code>public class Category {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @NotNull\n    @NotBlank\n\n    private String name;\n}\n</code></pre>\n<pre><code>@RepositoryRestResource\npublic interface CategoryRepository extends JpaRepository&lt;Category, Long&gt; {\n\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/jPJrn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jPJrn.png\" alt=\"enter image description here\" /></a></p>\n<p>If i create a crud controller and add</p>\n<pre><code>public Catrgory create(@Valid Category category){\n    ....\n}\n</code></pre>\n<p>the validation will work but i don't want this , i want to use <strong>RepositoryRestResource</strong></p>\n"},{"tags":["java","maven","selenium-webdriver","testng","junit5"],"answers":[{"tags":[],"owner":{"account_id":3793708,"reputation":7679,"user_id":3149528,"accept_rate":50,"display_name":"Slawomir Jaranowski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698147377,"creation_date":1698147377,"answer_id":77351721,"question_id":77350961,"body_markdown":"You can try configurations like:\r\n\r\n```xml\r\n  &lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.2.1&lt;/version&gt;\r\n    &lt;configurations&gt;\r\n    &lt;!-- ... your configurations ... --&gt;\r\n    &lt;/configurations&gt; \r\n    &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\r\n        &lt;artifactId&gt;surefire-junit-platform&lt;/artifactId&gt;\r\n        &lt;version&gt;3.2.1&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\r\n        &lt;artifactId&gt;surefire-testng&lt;/artifactId&gt;\r\n        &lt;version&gt;3.2.1&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n  &lt;/plugin&gt;\r\n```\r\n\r\nWhich enable Junit 5 and TestNg executors / providers in one build.\r\n\r\nSource: https://maven.apache.org/surefire/maven-surefire-plugin/examples/providers.html\r\n","title":"Configuring Maven to run TestNG and JUnit5 tests in one project","body":"<p>You can try configurations like:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.2.1&lt;/version&gt;\n    &lt;configurations&gt;\n    &lt;!-- ... your configurations ... --&gt;\n    &lt;/configurations&gt; \n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\n        &lt;artifactId&gt;surefire-junit-platform&lt;/artifactId&gt;\n        &lt;version&gt;3.2.1&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\n        &lt;artifactId&gt;surefire-testng&lt;/artifactId&gt;\n        &lt;version&gt;3.2.1&lt;/version&gt;\n      &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n  &lt;/plugin&gt;\n</code></pre>\n<p>Which enable Junit 5 and TestNg executors / providers in one build.</p>\n<p>Source: <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/providers.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/surefire/maven-surefire-plugin/examples/providers.html</a></p>\n"}],"owner":{"account_id":27523642,"reputation":27,"user_id":21003348,"display_name":"Serhii"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77351721,"answer_count":1,"score":0,"last_activity_date":1698147377,"creation_date":1698140134,"question_id":77350961,"body_markdown":"I need to be able to run TestNG and JUnit5 test classes in my project separately and run them together as well using testng.xml file. \r\nPreviously I used JUnit4 but needed to swap to the newer JUnit version to use `@ParameterizedTest` with `@CsvSourse`. And now, the JUnit test class executed successfully, but when I ran TestNG test class - it tried to be executed using org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.\r\n\r\nTo run test class I used this command:\r\n\r\n    mvn clean test -Dtest=&#39;src/test/java/tests/FiltersTest&#39;\r\n\r\n**How I can fix the problem and make both runners work as expected?**\r\n\r\nP.S. I know that it&#39;s not the best approach to use two different runners inside the same project, but I need to do this according to the task from the Automation course I am taking part in.\r\n\r\nPOM.xml:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;report-portal&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n                &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n                &lt;version&gt;4.14.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                &lt;version&gt;1.18.30&lt;/version&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n                &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n                &lt;version&gt;7.8.0&lt;/version&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\r\n                &lt;artifactId&gt;allure-testng&lt;/artifactId&gt;\r\n                &lt;version&gt;2.24.0&lt;/version&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n                &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n                &lt;version&gt;5.5.3&lt;/version&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n                &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n                &lt;version&gt;1.2.6&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n                &lt;version&gt;1.7.32&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n                &lt;version&gt;2.14.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.yaml&lt;/groupId&gt;\r\n                &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\r\n                &lt;version&gt;2.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n                &lt;version&gt;5.10.0&lt;/version&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\r\n                &lt;version&gt;5.10.0&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.typesafe&lt;/groupId&gt;\r\n                &lt;artifactId&gt;config&lt;/artifactId&gt;\r\n                &lt;version&gt;1.4.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.1.2&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\r\n    \r\n                        &lt;suiteXmlFiles&gt;\r\n                            &lt;suiteXmlFile&gt;src/test/resources/testng-report_portal.xml&lt;/suiteXmlFile&gt;\r\n                        &lt;/suiteXmlFiles&gt;\r\n    \r\n                        &lt;systemPropertyVariables&gt;\r\n                            &lt;browser&gt;chrome&lt;/browser&gt;\r\n                        &lt;/systemPropertyVariables&gt;\r\n    \r\n                        &lt;systemProperties&gt;\r\n                            &lt;property&gt;\r\n                                &lt;name&gt;allure.results.directory&lt;/name&gt;\r\n                                &lt;value&gt;target/allure-results&lt;/value&gt;\r\n                            &lt;/property&gt;\r\n                            &lt;property&gt;\r\n                                &lt;name&gt;allure.report.directory&lt;/name&gt;\r\n                                &lt;value&gt;target/allure-report&lt;/value&gt;\r\n                            &lt;/property&gt;\r\n                        &lt;/systemProperties&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;allure-maven&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.10.0&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.11.0&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;allure.testng.version&gt;2.22.2&lt;/allure.testng.version&gt;\r\n        &lt;/properties&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\ntestng.xml suite:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n    &lt;suite name=&quot;Report Portal Tests&quot; verbose=&quot;1&quot;&gt;\r\n        &lt;test name=&quot;ReportPortalTest&quot;&gt;\r\n            &lt;classes&gt;\r\n                &lt;class name=&quot;tests.FiltersTest&quot;/&gt;\r\n                &lt;class name=&quot;tests.LaunchViewTest&quot;/&gt;\r\n            &lt;/classes&gt;\r\n        &lt;/test&gt;\r\n        &lt;test name=&quot;JunitTest&quot;&gt;\r\n            &lt;classes&gt;\r\n                &lt;class name=&quot;tests.JunitTest&quot;/&gt;\r\n            &lt;/classes&gt;\r\n        &lt;/test&gt;\r\n        &lt;listeners&gt;\r\n            &lt;listener class-name=&quot;io.qameta.allure.testng.AllureTestNg&quot;/&gt;\r\n        &lt;/listeners&gt;\r\n    &lt;/suite&gt;\r\n\r\nTestNG test class example:\r\n\r\n    package tests;\r\n    \r\n    import core.TestDataProvider;\r\n    import jdk.jfr.Description;\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.testng.annotations.Test;\r\n    import java.util.List;\r\n    import static org.testng.AssertJUnit.*;\r\n    \r\n    public class FiltersTest extends CommonConditions {\r\n    \r\n        @Test(priority = 1)\r\n        @Description(&quot;Login testing&quot;)\r\n        public void loginTest() {\r\n            loginAction.doLogin();\r\n            assertTrue(loginAction.isLoginSuccessful());\r\n        }\r\n    \r\n        @Test(priority = 2, dataProvider = &quot;Launch name + Launch Number&quot;, dataProviderClass = TestDataProvider.class)\r\n        @Description(&quot;Add filter: Launch name + Launch number&quot;)\r\n        public void setLaunchNameAndLaunchNumber(String launchName, String filterInput, int expectedResult) throws InterruptedException {\r\n            loginAction.doLogin();\r\n            sidebarAction.openLaunchesPage();\r\n            filtersAction.activateFiltering();\r\n            filtersAction.addLaunchNameFilter(launchName);\r\n            filtersAction.addFilterFromDrpDwn(&quot;Launch Number&quot;, filterInput);\r\n            filtersAction.switchLaunchNumberToEqual();\r\n            Thread.sleep(3000);\r\n            List&lt;WebElement&gt; objectList = driver.findElements(By.xpath(&quot;//td[2]//a//span[contains(., &#39;&quot;+launchName+&quot;&#39;)]&quot;));\r\n            assertEquals(expectedResult, objectList.size());\r\n        }\r\n    \r\n        @Test(priority = 3, dataProvider = &quot;Launch name + Passed&quot;, dataProviderClass = TestDataProvider.class)\r\n        @Description(&quot;Add filter: Launch name + Passed&quot;)\r\n        public void setLaunchNameAndPassed(String launchName, String filterInput, int expectedResult) throws InterruptedException {\r\n            loginAction.doLogin();\r\n            sidebarAction.openLaunchesPage();\r\n            filtersAction.activateFiltering();\r\n            filtersAction.addLaunchNameFilter(launchName);\r\n            filtersAction.addFilterFromDrpDwn(&quot;Passed&quot;, filterInput);\r\n            Thread.sleep(3000);\r\n            List&lt;WebElement&gt; objectList = driver.findElements(By.xpath(&quot;//td[2]//a//span[contains(., &#39;&quot;+launchName+&quot;&#39;)]&quot;));\r\n            assertEquals(expectedResult, objectList.size());\r\n        }\r\n    }\r\n\r\nPlease let me know if you need additional info.","title":"Configuring Maven to run TestNG and JUnit5 tests in one project","body":"<p>I need to be able to run TestNG and JUnit5 test classes in my project separately and run them together as well using testng.xml file.\nPreviously I used JUnit4 but needed to swap to the newer JUnit version to use <code>@ParameterizedTest</code> with <code>@CsvSourse</code>. And now, the JUnit test class executed successfully, but when I ran TestNG test class - it tried to be executed using org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.</p>\n<p>To run test class I used this command:</p>\n<pre><code>mvn clean test -Dtest='src/test/java/tests/FiltersTest'\n</code></pre>\n<p><strong>How I can fix the problem and make both runners work as expected?</strong></p>\n<p>P.S. I know that it's not the best approach to use two different runners inside the same project, but I need to do this according to the task from the Automation course I am taking part in.</p>\n<p>POM.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;report-portal&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;4.14.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.30&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;version&gt;7.8.0&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\n            &lt;artifactId&gt;allure-testng&lt;/artifactId&gt;\n            &lt;version&gt;2.24.0&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n            &lt;version&gt;5.5.3&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n            &lt;version&gt;1.2.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;1.7.32&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.14.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.yaml&lt;/groupId&gt;\n            &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;5.10.0&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\n            &lt;version&gt;5.10.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.typesafe&lt;/groupId&gt;\n            &lt;artifactId&gt;config&lt;/artifactId&gt;\n            &lt;version&gt;1.4.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\n\n                    &lt;suiteXmlFiles&gt;\n                        &lt;suiteXmlFile&gt;src/test/resources/testng-report_portal.xml&lt;/suiteXmlFile&gt;\n                    &lt;/suiteXmlFiles&gt;\n\n                    &lt;systemPropertyVariables&gt;\n                        &lt;browser&gt;chrome&lt;/browser&gt;\n                    &lt;/systemPropertyVariables&gt;\n\n                    &lt;systemProperties&gt;\n                        &lt;property&gt;\n                            &lt;name&gt;allure.results.directory&lt;/name&gt;\n                            &lt;value&gt;target/allure-results&lt;/value&gt;\n                        &lt;/property&gt;\n                        &lt;property&gt;\n                            &lt;name&gt;allure.report.directory&lt;/name&gt;\n                            &lt;value&gt;target/allure-report&lt;/value&gt;\n                        &lt;/property&gt;\n                    &lt;/systemProperties&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\n                &lt;artifactId&gt;allure-maven&lt;/artifactId&gt;\n                &lt;version&gt;2.10.0&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.11.0&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;allure.testng.version&gt;2.22.2&lt;/allure.testng.version&gt;\n    &lt;/properties&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>testng.xml suite:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\n&lt;suite name=&quot;Report Portal Tests&quot; verbose=&quot;1&quot;&gt;\n    &lt;test name=&quot;ReportPortalTest&quot;&gt;\n        &lt;classes&gt;\n            &lt;class name=&quot;tests.FiltersTest&quot;/&gt;\n            &lt;class name=&quot;tests.LaunchViewTest&quot;/&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n    &lt;test name=&quot;JunitTest&quot;&gt;\n        &lt;classes&gt;\n            &lt;class name=&quot;tests.JunitTest&quot;/&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n    &lt;listeners&gt;\n        &lt;listener class-name=&quot;io.qameta.allure.testng.AllureTestNg&quot;/&gt;\n    &lt;/listeners&gt;\n&lt;/suite&gt;\n</code></pre>\n<p>TestNG test class example:</p>\n<pre><code>package tests;\n\nimport core.TestDataProvider;\nimport jdk.jfr.Description;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebElement;\nimport org.testng.annotations.Test;\nimport java.util.List;\nimport static org.testng.AssertJUnit.*;\n\npublic class FiltersTest extends CommonConditions {\n\n    @Test(priority = 1)\n    @Description(&quot;Login testing&quot;)\n    public void loginTest() {\n        loginAction.doLogin();\n        assertTrue(loginAction.isLoginSuccessful());\n    }\n\n    @Test(priority = 2, dataProvider = &quot;Launch name + Launch Number&quot;, dataProviderClass = TestDataProvider.class)\n    @Description(&quot;Add filter: Launch name + Launch number&quot;)\n    public void setLaunchNameAndLaunchNumber(String launchName, String filterInput, int expectedResult) throws InterruptedException {\n        loginAction.doLogin();\n        sidebarAction.openLaunchesPage();\n        filtersAction.activateFiltering();\n        filtersAction.addLaunchNameFilter(launchName);\n        filtersAction.addFilterFromDrpDwn(&quot;Launch Number&quot;, filterInput);\n        filtersAction.switchLaunchNumberToEqual();\n        Thread.sleep(3000);\n        List&lt;WebElement&gt; objectList = driver.findElements(By.xpath(&quot;//td[2]//a//span[contains(., '&quot;+launchName+&quot;')]&quot;));\n        assertEquals(expectedResult, objectList.size());\n    }\n\n    @Test(priority = 3, dataProvider = &quot;Launch name + Passed&quot;, dataProviderClass = TestDataProvider.class)\n    @Description(&quot;Add filter: Launch name + Passed&quot;)\n    public void setLaunchNameAndPassed(String launchName, String filterInput, int expectedResult) throws InterruptedException {\n        loginAction.doLogin();\n        sidebarAction.openLaunchesPage();\n        filtersAction.activateFiltering();\n        filtersAction.addLaunchNameFilter(launchName);\n        filtersAction.addFilterFromDrpDwn(&quot;Passed&quot;, filterInput);\n        Thread.sleep(3000);\n        List&lt;WebElement&gt; objectList = driver.findElements(By.xpath(&quot;//td[2]//a//span[contains(., '&quot;+launchName+&quot;')]&quot;));\n        assertEquals(expectedResult, objectList.size());\n    }\n}\n</code></pre>\n<p>Please let me know if you need additional info.</p>\n"},{"tags":["java","spring-security"],"answers":[{"tags":[],"owner":{"account_id":29733100,"reputation":36,"user_id":22787232,"display_name":"Mozenrat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698147220,"creation_date":1698048224,"answer_id":77343552,"question_id":77343257,"body_markdown":"I can suggest a possible solution, but I&#39;m not sure about it: remove the ProviderManager parameter from your controller&#39;s method in MyApiController:\r\n\r\n\r\n\r\n    @PostMapping(&quot;verifyUser&quot;)\r\n    public ResponseEntity verifyUser(@RequestBody @Valid UserKeyDto userKeyDto, HttpServletRequest httpRequest) {\r\n        if (myApiRestService.myApiLoginValidate(userKeyDto, httpRequest)) {\r\n            return new ResponseEntity(HttpStatus.OK);\r\n        } else {\r\n            return new ResponseEntity&lt;&gt;(&quot;The username is incorrect!&quot;, HttpStatus.UNAUTHORIZED);\r\n        }\r\n    }\r\n\r\nConfigure ProviderManager in your SecurityConfig class:\r\n\r\n    @Bean\r\n    public ProviderManager providerManager(List&lt;AuthenticationProvider&gt; providers) {\r\n        return new ProviderManager(providers);\r\n    }","title":"Java Spring Web Security","body":"<p>I can suggest a possible solution, but I'm not sure about it: remove the ProviderManager parameter from your controller's method in MyApiController:</p>\n<pre><code>@PostMapping(&quot;verifyUser&quot;)\npublic ResponseEntity verifyUser(@RequestBody @Valid UserKeyDto userKeyDto, HttpServletRequest httpRequest) {\n    if (myApiRestService.myApiLoginValidate(userKeyDto, httpRequest)) {\n        return new ResponseEntity(HttpStatus.OK);\n    } else {\n        return new ResponseEntity&lt;&gt;(&quot;The username is incorrect!&quot;, HttpStatus.UNAUTHORIZED);\n    }\n}\n</code></pre>\n<p>Configure ProviderManager in your SecurityConfig class:</p>\n<pre><code>@Bean\npublic ProviderManager providerManager(List&lt;AuthenticationProvider&gt; providers) {\n    return new ProviderManager(providers);\n}\n</code></pre>\n"}],"owner":{"account_id":27849029,"reputation":3,"user_id":21263896,"display_name":"AlanT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698147220,"creation_date":1698045148,"question_id":77343257,"body_markdown":"I am trying to write a API interface where an incoming HTTP request must be authenticated against the username and password in the db. It is a case where 2 servers need to authenticate the request with a 3rd party server to see if it is valid. The scenario is this:\r\n\r\n1. A requesting server sends an user session ID via HTTP POST.\r\n2. My application sends the session ID the another 3rd party server which returns the username.\r\n3. My application checks the username against my db and sets the session token manually.\r\n4. Subsequent requests to my API will need the username and password in the POST header using Basic Authentication.\r\n\r\nI have SecurityConfig:\r\n\r\n\r\n```\r\n@EnableWebSecurity\r\nclass SecurityConfig {\r\n   @Bean\r\n   public PasswordEncoder passwordEncoder() {\r\n\treturn new BCryptPasswordEncoder();\r\n   }\r\n   @Configuration\r\n   @Order(1)\r\n   public class MyAPISecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n\t\t@Bean\r\n\t\tpublic MyUserDetailsService myUserDetailsService() {\r\n\t\t\treturn new MyUserDetailsService();\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n\t\t\tauth.eraseCredentials(false)\r\n\t\t\t\t\t.userDetailsService(myUserDetailsService())\r\n\t\t\t\t\t.passwordEncoder(passwordEncoder());\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t\t\tList&lt;String&gt; PATHS_WEB_PERMIT_ALL = new ArrayList&lt;String&gt;();\r\n\t\t\tPATHS_WEB_PERMIT_ALL.add(&quot;/rest/myApi/verifyUser&quot;);\r\n\t\t\thttp.authorizeRequests()\r\n\t\t\t\t.antMatchers(StringUtils.toStringArray(PATHS_WEB_PERMIT_ALL)).permitAll()\r\n\t\t\t\t.antMatchers(&quot;/rest/myApi/**&quot;).authenticated()\r\n\t\t\t\t.and()\r\n\t\t\t\t.httpBasic();\r\n\t\t\thttp.sessionManagement().maximumSessions(1);\r\n\t\t\thttp.csrf().disable();\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nand my userDetailsService:\r\n\r\n```\r\npublic class MyUserDetailsService implements UserDetailsService {\r\n\tprivate static final Logger LOGGER = LoggerFactory.getLogger(MyUserDetailsService.class);\r\n\r\n\tpublic UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n\t\tLOGGER.info(&quot;Finding user: {}&quot;, username);\r\n\t\tCommUser commUser = commUserService.findByUsernameWithRoles(username);\r\n\t\tif (commUser == null) {\r\n\t\t\tLOGGER.error(&quot;Unable to find user by username!&quot; + username);\r\n\t\t\tthrow new UsernameNotFoundException(&quot;User not found!&quot;);\r\n\t\t} else {\r\n\t\t\tcommUser.setAuthorities(createAuthorities(commUser));\r\n\t\t\treturn commUser;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate Set&lt;GrantedAuthority&gt; createAuthorities(CommUser commUser) {\r\n\t\tSet&lt;GrantedAuthority&gt; authorities = new LinkedHashSet&lt;&gt;();\r\n\t\tList&lt;CommRoleFunctionMode&gt; commRoleFunctionModes = roleFunctionModeRepository.findByCommRoleIn(commUser.getCommRoles());\r\n\t\tfor (CommRoleFunctionMode commRoleFunctionMode : commRoleFunctionModes) {\r\n\t\t\tauthorities.add(new SimpleGrantedAuthority(commRoleFunctionMode.getCommFunction().getFunctionName()));\r\n\t\t\tauthorities.add(new SimpleGrantedAuthority(commRoleFunctionMode.getCommFunction().getFunctionName() + commRoleFunctionMode.getCommMode().getModeName()));\r\n\t\t}\r\n\t\treturn authorities;\r\n\t}\r\n\r\n\t@Autowired\r\n\tprivate CommUserService commUserService;\r\n\r\n\t@Autowired\r\n\tprivate CommRoleFunctionModeRepository roleFunctionModeRepository;\r\n```\r\n\r\nand my RestController:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/rest/myApi/&quot;)\r\npublic class MyApiController {\r\n\tprivate static final Logger LOGGER = LoggerFactory.getLogger(MyApiController.class);\r\n\r\n\t@PostMapping(&quot;verifyUser&quot;)\r\n    public ResponseEntity verifyUser(@RequestBody @Valid UserKeyDto userKeyDto, HttpServletRequest httpRequest, ProviderManager  providerManager) {\r\n        if (myApiRestService.myApiLoginValidate(userKeyDto, httpRequest, providerManager)) {\r\n            return new ResponseEntity(HttpStatus.OK);\r\n        } else {\r\n            return new ResponseEntity&lt;&gt;(&quot;The username is incorrect!&quot;, HttpStatus.UNAUTHORIZED);\r\n        }\r\n    }\r\n\r\n\t@Autowired\r\n\tprivate MyApiRestService myApiRestService;\r\n}\r\n```\r\n\r\nand my MyApiRestService (This is where the bulk of the verifying takes place):\r\n\r\n```\r\n@Service\r\n@CacheConfig(cacheNames = {&quot;myApiRestService&quot;})\r\npublic class MyApiRestService {\r\n\tprivate static final Logger LOGGER = LoggerFactory.getLogger(MyApiRestService.class);\r\n\t\r\n\t@Transactional\r\n    public boolean myApiLoginValidate(UserKeyDto userKeyDto, HttpServletRequest httpRequest, ProviderManager providerManager) {\r\n\t\tString verifyUserUrl = environment.getProperty(&quot;api.url&quot;) + &quot;/verifyUser&quot;;\r\n\t\t\r\n\t\tRestTemplate restTemplate = new RestTemplate();\r\n\t\tHttpHeaders headers = new HttpHeaders();\r\n\t    headers.setContentType(MediaType.APPLICATION_JSON);\r\n\t\tHttpEntity&lt;String&gt; request = new HttpEntity&lt;String&gt;(userKeyDto.getSessionId(), headers);\r\n\t\t\r\n\t\tUserKeyDto returnedUserKeyDto = restTemplate.postForObject(verifyUserUrl, request, UserKeyDto.class);\r\n\t\t\r\n\t\tUserDetails userDetails = myUserDetailsService.loadUserByUsername(returnedUserKeyDto.getUsername());\r\n\t\t  \r\n   \t\tif(userDetails==null) {\r\n\t   \t\treturn Boolean.FALSE;\r\n   \t\t}\r\n   \t\t\r\n   \t\tHttpSession session = httpRequest.getSession(false);\r\n   \t\tif (session == null) {\r\n       \t\tsession = httpRequest.getSession();   \r\n   \t\t}\r\n   \t\tUsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(userDetails.getUsername(),\r\n   \t\t\t\tuserDetails.getPassword(), userDetails.getAuthorities());\r\n\r\n   \t    token.setDetails(new WebAuthenticationDetails(httpRequest));\r\n   \t    Authentication authenticatedUser = providerManager.authenticate(token);\r\n\r\n   \t    SecurityContextHolder.getContext().setAuthentication(authenticatedUser);\r\n   \t    // setting role to the session\r\n   \t    session.setAttribute(HttpSessionSecurityContextRepository.SPRING_SECURITY_CONTEXT_KEY,\r\n   \t            SecurityContextHolder.getContext());\t\r\n\t\t\r\n\t\treturn Boolean.TRUE;\r\n    }\r\n\r\n\t@Autowired\r\n\tEnvironment environment;\r\n\t@Autowired\r\n\tMyUserDetailsService myUserDetailsService;\r\n```\r\n\r\nUserKeyDto:\r\n```\r\npublic class UserKeyDto  {\r\n\tprivate static final long serialVersionUID = -2440534315863428792L;\r\n\t\r\n\t@NotEmpty(message = &quot;SessionId is required!&quot;)\r\n\tprivate String sessionId;\r\n\t\r\n\tprivate String username;\r\n}\r\n```\r\n\r\nBut I am getting error upon HTTP request: \r\n\r\n&gt; org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.authentication.ProviderManager]: No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.security.authentication.ProviderManager.&lt;init&gt;()\r\n\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:105)\r\n\r\nIt seems the Controller cannot instantiate the ProviderManager.\r\nPlease help. Thanks.","title":"Java Spring Web Security","body":"<p>I am trying to write a API interface where an incoming HTTP request must be authenticated against the username and password in the db. It is a case where 2 servers need to authenticate the request with a 3rd party server to see if it is valid. The scenario is this:</p>\n<ol>\n<li>A requesting server sends an user session ID via HTTP POST.</li>\n<li>My application sends the session ID the another 3rd party server which returns the username.</li>\n<li>My application checks the username against my db and sets the session token manually.</li>\n<li>Subsequent requests to my API will need the username and password in the POST header using Basic Authentication.</li>\n</ol>\n<p>I have SecurityConfig:</p>\n<pre><code>@EnableWebSecurity\nclass SecurityConfig {\n   @Bean\n   public PasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n   }\n   @Configuration\n   @Order(1)\n   public class MyAPISecurityConfig extends WebSecurityConfigurerAdapter {\n\n        @Bean\n        public MyUserDetailsService myUserDetailsService() {\n            return new MyUserDetailsService();\n        }\n\n        @Override\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n            auth.eraseCredentials(false)\n                    .userDetailsService(myUserDetailsService())\n                    .passwordEncoder(passwordEncoder());\n        }\n\n        @Override\n        protected void configure(HttpSecurity http) throws Exception {\n            List&lt;String&gt; PATHS_WEB_PERMIT_ALL = new ArrayList&lt;String&gt;();\n            PATHS_WEB_PERMIT_ALL.add(&quot;/rest/myApi/verifyUser&quot;);\n            http.authorizeRequests()\n                .antMatchers(StringUtils.toStringArray(PATHS_WEB_PERMIT_ALL)).permitAll()\n                .antMatchers(&quot;/rest/myApi/**&quot;).authenticated()\n                .and()\n                .httpBasic();\n            http.sessionManagement().maximumSessions(1);\n            http.csrf().disable();\n        }\n    }\n}\n</code></pre>\n<p>and my userDetailsService:</p>\n<pre><code>public class MyUserDetailsService implements UserDetailsService {\n    private static final Logger LOGGER = LoggerFactory.getLogger(MyUserDetailsService.class);\n\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        LOGGER.info(&quot;Finding user: {}&quot;, username);\n        CommUser commUser = commUserService.findByUsernameWithRoles(username);\n        if (commUser == null) {\n            LOGGER.error(&quot;Unable to find user by username!&quot; + username);\n            throw new UsernameNotFoundException(&quot;User not found!&quot;);\n        } else {\n            commUser.setAuthorities(createAuthorities(commUser));\n            return commUser;\n        }\n    }\n\n    private Set&lt;GrantedAuthority&gt; createAuthorities(CommUser commUser) {\n        Set&lt;GrantedAuthority&gt; authorities = new LinkedHashSet&lt;&gt;();\n        List&lt;CommRoleFunctionMode&gt; commRoleFunctionModes = roleFunctionModeRepository.findByCommRoleIn(commUser.getCommRoles());\n        for (CommRoleFunctionMode commRoleFunctionMode : commRoleFunctionModes) {\n            authorities.add(new SimpleGrantedAuthority(commRoleFunctionMode.getCommFunction().getFunctionName()));\n            authorities.add(new SimpleGrantedAuthority(commRoleFunctionMode.getCommFunction().getFunctionName() + commRoleFunctionMode.getCommMode().getModeName()));\n        }\n        return authorities;\n    }\n\n    @Autowired\n    private CommUserService commUserService;\n\n    @Autowired\n    private CommRoleFunctionModeRepository roleFunctionModeRepository;\n</code></pre>\n<p>and my RestController:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/rest/myApi/&quot;)\npublic class MyApiController {\n    private static final Logger LOGGER = LoggerFactory.getLogger(MyApiController.class);\n\n    @PostMapping(&quot;verifyUser&quot;)\n    public ResponseEntity verifyUser(@RequestBody @Valid UserKeyDto userKeyDto, HttpServletRequest httpRequest, ProviderManager  providerManager) {\n        if (myApiRestService.myApiLoginValidate(userKeyDto, httpRequest, providerManager)) {\n            return new ResponseEntity(HttpStatus.OK);\n        } else {\n            return new ResponseEntity&lt;&gt;(&quot;The username is incorrect!&quot;, HttpStatus.UNAUTHORIZED);\n        }\n    }\n\n    @Autowired\n    private MyApiRestService myApiRestService;\n}\n</code></pre>\n<p>and my MyApiRestService (This is where the bulk of the verifying takes place):</p>\n<pre><code>@Service\n@CacheConfig(cacheNames = {&quot;myApiRestService&quot;})\npublic class MyApiRestService {\n    private static final Logger LOGGER = LoggerFactory.getLogger(MyApiRestService.class);\n    \n    @Transactional\n    public boolean myApiLoginValidate(UserKeyDto userKeyDto, HttpServletRequest httpRequest, ProviderManager providerManager) {\n        String verifyUserUrl = environment.getProperty(&quot;api.url&quot;) + &quot;/verifyUser&quot;;\n        \n        RestTemplate restTemplate = new RestTemplate();\n        HttpHeaders headers = new HttpHeaders();\n        headers.setContentType(MediaType.APPLICATION_JSON);\n        HttpEntity&lt;String&gt; request = new HttpEntity&lt;String&gt;(userKeyDto.getSessionId(), headers);\n        \n        UserKeyDto returnedUserKeyDto = restTemplate.postForObject(verifyUserUrl, request, UserKeyDto.class);\n        \n        UserDetails userDetails = myUserDetailsService.loadUserByUsername(returnedUserKeyDto.getUsername());\n          \n        if(userDetails==null) {\n            return Boolean.FALSE;\n        }\n        \n        HttpSession session = httpRequest.getSession(false);\n        if (session == null) {\n            session = httpRequest.getSession();   \n        }\n        UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(userDetails.getUsername(),\n                userDetails.getPassword(), userDetails.getAuthorities());\n\n        token.setDetails(new WebAuthenticationDetails(httpRequest));\n        Authentication authenticatedUser = providerManager.authenticate(token);\n\n        SecurityContextHolder.getContext().setAuthentication(authenticatedUser);\n        // setting role to the session\n        session.setAttribute(HttpSessionSecurityContextRepository.SPRING_SECURITY_CONTEXT_KEY,\n                SecurityContextHolder.getContext());    \n        \n        return Boolean.TRUE;\n    }\n\n    @Autowired\n    Environment environment;\n    @Autowired\n    MyUserDetailsService myUserDetailsService;\n</code></pre>\n<p>UserKeyDto:</p>\n<pre><code>public class UserKeyDto  {\n    private static final long serialVersionUID = -2440534315863428792L;\n    \n    @NotEmpty(message = &quot;SessionId is required!&quot;)\n    private String sessionId;\n    \n    private String username;\n}\n</code></pre>\n<p>But I am getting error upon HTTP request:</p>\n<blockquote>\n<p>org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.authentication.ProviderManager]: No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.security.authentication.ProviderManager.()\nat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:105)</p>\n</blockquote>\n<p>It seems the Controller cannot instantiate the ProviderManager.\nPlease help. Thanks.</p>\n"},{"tags":["java","react-native","asyncstorage"],"owner":{"account_id":5015568,"reputation":2600,"user_id":4030518,"accept_rate":57,"display_name":"Danzeeeee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698146727,"creation_date":1698146727,"question_id":77351663,"body_markdown":"```import com.facebook.react.modules.storage.ReactDatabaseSupplier;```\r\n\r\nI&#39;m trying to access AsyncStorage natively on Android by accessing to the **ReactDatabaseSupplier** but no luck getting the com.facebook.react.module.storage imported. I&#39;ve tried a few ways like gradle clean, removed node_modules but it&#39;s still the same.\r\n\r\n```error: package com.facebook.react.modules.storage does not exist import com.facebook.react.modules.storage.ReactDatabaseSupplier;```\r\n","title":"package com.facebook.react.modules.storage does not exist for AsyncStorage","body":"<p><code>import com.facebook.react.modules.storage.ReactDatabaseSupplier;</code></p>\n<p>I'm trying to access AsyncStorage natively on Android by accessing to the <strong>ReactDatabaseSupplier</strong> but no luck getting the com.facebook.react.module.storage imported. I've tried a few ways like gradle clean, removed node_modules but it's still the same.</p>\n<p><code>error: package com.facebook.react.modules.storage does not exist import com.facebook.react.modules.storage.ReactDatabaseSupplier;</code></p>\n"},{"tags":["java","spring","spring-boot","environment-variables"],"comments":[{"owner":{"account_id":29715097,"reputation":1,"user_id":22773792,"display_name":"Hugo Fraix"},"score":0,"creation_date":1697808562,"post_id":77330927,"comment_id":136329892,"body_markdown":"Just need to reboot my laptop... I don&#39;t think about it because I create DB_HOST, DB_PORT, DB_USERNAME_DEV and DB_PASSWORD_DEV  environment variables at the same time and I was able to retrieve DB_HOST and DB_PORT. I just create a new environment variable DB_NAME_DEV and I have to reboot again to retrieve it from application.properties. Hope this post can help someone later...","body":"Just need to reboot my laptop... I don&#39;t think about it because I create DB_HOST, DB_PORT, DB_USERNAME_DEV and DB_PASSWORD_DEV  environment variables at the same time and I was able to retrieve DB_HOST and DB_PORT. I just create a new environment variable DB_NAME_DEV and I have to reboot again to retrieve it from application.properties. Hope this post can help someone later..."}],"answers":[{"tags":[],"owner":{"account_id":17498155,"reputation":21,"user_id":12689021,"display_name":"xtreme"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698146440,"creation_date":1698146440,"answer_id":77351626,"question_id":77330927,"body_markdown":"I suggest using .env file for project environment variables during development, there is a separate plugin for intellij [here][1]\r\n\r\n\r\n  [1]: https://plugins.jetbrains.com/plugin/7861-envfile","title":"How to retrieve spring datasource properties from environment variable","body":"<p>I suggest using .env file for project environment variables during development, there is a separate plugin for intellij <a href=\"https://plugins.jetbrains.com/plugin/7861-envfile\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":29715097,"reputation":1,"user_id":22773792,"display_name":"Hugo Fraix"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698146440,"creation_date":1697804921,"question_id":77330927,"body_markdown":"I&#39;m building a spring boot application (spring boot 3.1.4, java 17). In my application.properties file I&#39;m trying to retrieve properties value from environment variables.\r\n\r\n```\r\nspring.datasource.url=jdbc:mysql://${DB_HOST}:${DB_PORT}/my_database\r\nspring.datasource.username=${DB_USER_DEV}\r\nspring.datasource.password=${DB_PASSWORD_DEV}\r\n```\r\nAt running, I got this error: `java.sql.SQLException: Access denied for user &#39;${DB_USER_DEV}&#39;@&#39;localhost&#39; (using password: YES)`.\r\n\r\nWhen I hard code username and password or set default value for environment variable it work fine:\r\n\r\n```\r\nspring.datasource.url=jdbc:mysql://${DB_HOST}:${DB_PORT}/sponsorship_dev\r\nspring.datasource.username=my_username # or ${DB_USER_DEV:my_username}\r\nspring.datasource.password=my_password # or ${DB_PASSWORD_DEV:my_password}\r\n```\r\nFrom windows command line or powershell, `echo %DB_PASSWORD_DEV%` (cmd) or `$env:DB_PASSWORD_DEV` (powershell) return the good value.\r\nI&#39;m able to connect from MySQL CLI with the same credentials: `mysql -u my_username -p my_password my_database`.\r\nI have excluded special characters: The characters &lt;, &gt;, |, &amp;, and ^ are special command shell characters (this is from microsoft documentation).\r\n\r\nPS: ${DB_HOST} and ${DB_PORT} are correctly retrieve.\r\n\r\nSomeone can help me please ?\r\n\r\n\r\nHard code credentials in properties is working.\r\nPrint environement variable is working.\r\nConnection from mySQL CLI is working.","title":"How to retrieve spring datasource properties from environment variable","body":"<p>I'm building a spring boot application (spring boot 3.1.4, java 17). In my application.properties file I'm trying to retrieve properties value from environment variables.</p>\n<pre><code>spring.datasource.url=jdbc:mysql://${DB_HOST}:${DB_PORT}/my_database\nspring.datasource.username=${DB_USER_DEV}\nspring.datasource.password=${DB_PASSWORD_DEV}\n</code></pre>\n<p>At running, I got this error: <code>java.sql.SQLException: Access denied for user '${DB_USER_DEV}'@'localhost' (using password: YES)</code>.</p>\n<p>When I hard code username and password or set default value for environment variable it work fine:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://${DB_HOST}:${DB_PORT}/sponsorship_dev\nspring.datasource.username=my_username # or ${DB_USER_DEV:my_username}\nspring.datasource.password=my_password # or ${DB_PASSWORD_DEV:my_password}\n</code></pre>\n<p>From windows command line or powershell, <code>echo %DB_PASSWORD_DEV%</code> (cmd) or <code>$env:DB_PASSWORD_DEV</code> (powershell) return the good value.\nI'm able to connect from MySQL CLI with the same credentials: <code>mysql -u my_username -p my_password my_database</code>.\nI have excluded special characters: The characters &lt;, &gt;, |, &amp;, and ^ are special command shell characters (this is from microsoft documentation).</p>\n<p>PS: ${DB_HOST} and ${DB_PORT} are correctly retrieve.</p>\n<p>Someone can help me please ?</p>\n<p>Hard code credentials in properties is working.\nPrint environement variable is working.\nConnection from mySQL CLI is working.</p>\n"},{"tags":["java","tomcat","servlets"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1698145069,"post_id":77351404,"comment_id":136365252,"body_markdown":"My guess is that there are multiple versions of the servlet-API JAR (or similar) on the effective classpath.  And one of them has an older `ServletContext` class that doesn&#39;t define that method.  (The method was introduced in the Servlet 3.1 spec.)","body":"My guess is that there are multiple versions of the servlet-API JAR (or similar) on the effective classpath.  And one of them has an older <code>ServletContext</code> class that doesn&#39;t define that method.  (The method was introduced in the Servlet 3.1 spec.)"},{"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1698145740,"post_id":77351404,"comment_id":136365372,"body_markdown":"Indeed. Your runtime classpath is corrupted. The #1 starters mistake is providing duplicate different versioned server-specific libraries via webapp&#39;s WEB-INF/lib. You&#39;re not the first one stumbling upon this problem. See the abovelinked duplicate for several clues and solutions. I found it by just copy pasting your question title into a search engine (Google in my case). Excellent title thus, but try to do a bit more research in the future. Do not assume that you&#39;re the only one in the world making a starter&#39;s mistake.","body":"Indeed. Your runtime classpath is corrupted. The #1 starters mistake is providing duplicate different versioned server-specific libraries via webapp&#39;s WEB-INF/lib. You&#39;re not the first one stumbling upon this problem. See the abovelinked duplicate for several clues and solutions. I found it by just copy pasting your question title into a search engine (Google in my case). Excellent title thus, but try to do a bit more research in the future. Do not assume that you&#39;re the only one in the world making a starter&#39;s mistake."},{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1698146150,"post_id":77351404,"comment_id":136365456,"body_markdown":"FYI, &quot;core Java&quot; is not a thing, and if it were, servlets wouldn&#39;t be part of it, because it isn&#39;t provide by Java out-of-the-box (i.e. &quot;the core of Java&quot;), but requires additional libraries and runtimes (like Tomcat).","body":"FYI, &quot;core Java&quot; is not a thing, and if it were, servlets wouldn&#39;t be part of it, because it isn&#39;t provide by Java out-of-the-box (i.e. &quot;the core of Java&quot;), but requires additional libraries and runtimes (like Tomcat)."},{"owner":{"account_id":11311436,"reputation":133,"user_id":8294431,"display_name":"Shivam Sharma"},"score":0,"creation_date":1698147544,"post_id":77351404,"comment_id":136365703,"body_markdown":"@BalusC : I&#39;ve removed all the jars inside WEB-INF/lib and still getting the same error. Could you please help","body":"@BalusC : I&#39;ve removed all the jars inside WEB-INF/lib and still getting the same error. Could you please help"},{"owner":{"account_id":11311436,"reputation":133,"user_id":8294431,"display_name":"Shivam Sharma"},"score":0,"creation_date":1698147771,"post_id":77351404,"comment_id":136365745,"body_markdown":"Also, same setup is working fine on Linux environment","body":"Also, same setup is working fine on Linux environment"},{"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":1,"creation_date":1698148304,"post_id":77351404,"comment_id":136365856,"body_markdown":"Then either Tomcat/lib or JDK/lib or JRE/lib is corrupted. Still boils down to the same problem. Remove conflicting files which were manually placed/edited in these folders. In case you have no clue simply remove/reinstall and then don&#39;t touch these.","body":"Then either Tomcat/lib or JDK/lib or JRE/lib is corrupted. Still boils down to the same problem. Remove conflicting files which were manually placed/edited in these folders. In case you have no clue simply remove/reinstall and then don&#39;t touch these."},{"owner":{"account_id":11311436,"reputation":133,"user_id":8294431,"display_name":"Shivam Sharma"},"score":0,"creation_date":1698148999,"post_id":77351404,"comment_id":136365973,"body_markdown":"Okay Thanks, I changed the JAVA_HOME to fresh JDK installation and it&#39;s working now","body":"Okay Thanks, I changed the JAVA_HOME to fresh JDK installation and it&#39;s working now"}],"owner":{"account_id":11311436,"reputation":133,"user_id":8294431,"display_name":"Shivam Sharma"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1698145744,"answer_count":0,"score":0,"last_activity_date":1698145965,"creation_date":1698144182,"question_id":77351404,"body_markdown":"I am deploying my Java application (servlets) on Tomcat 9 on Windows. While deploying. I get the below error from Tomcat. The build file is of type WAR.\r\n\r\n[![ERROR][1]][1]\r\n\r\n```none\r\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [NonLoginAuthenticator[StandardEngine[Catalina].StandardHost[localhost].StandardContext[/mbas6]]]\r\n  at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\r\n  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n  at org.apache.catalina.core.StandardPipeline.startInternal(StandardPipeline.java:176)\r\n  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n  at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5094)\r\n  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n  at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:717)\r\n  ... 37 more\r\nCaused by: java.lang.NoSuchMethodError: javax.servlet.ServletContext.getVirtualServerName()Ljava/lang/String;\r\n  at org.apache.catalina.authenticator.AuthenticatorBase.startInternal(AuthenticatorBase.java:1355)\r\n  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n  ... 42 more                                                                                                                                             \r\n```\r\n\r\nI&#39;ve decompiled the servlet-api.jar in Tomcat lib folder and verified getVirtualServerName() method is already there inside that class. \r\n\r\nPlease help anyone in rectifying this, what else need to check?\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BvFzp.png","title":"java.lang.NoSuchMethodError javax.servlet.ServletContext.getVirtualServerName() Error from Tomcat 9 | method is present is servlet-api.jar","body":"<p>I am deploying my Java application (servlets) on Tomcat 9 on Windows. While deploying. I get the below error from Tomcat. The build file is of type WAR.</p>\n<p><a href=\"https://i.stack.imgur.com/BvFzp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BvFzp.png\" alt=\"ERROR\" /></a></p>\n<pre class=\"lang-none prettyprint-override\"><code>Caused by: org.apache.catalina.LifecycleException: Failed to start component [NonLoginAuthenticator[StandardEngine[Catalina].StandardHost[localhost].StandardContext[/mbas6]]]\n  at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\n  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\n  at org.apache.catalina.core.StandardPipeline.startInternal(StandardPipeline.java:176)\n  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n  at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5094)\n  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n  at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:717)\n  ... 37 more\nCaused by: java.lang.NoSuchMethodError: javax.servlet.ServletContext.getVirtualServerName()Ljava/lang/String;\n  at org.apache.catalina.authenticator.AuthenticatorBase.startInternal(AuthenticatorBase.java:1355)\n  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n  ... 42 more                                                                                                                                             \n</code></pre>\n<p>I've decompiled the servlet-api.jar in Tomcat lib folder and verified getVirtualServerName() method is already there inside that class.</p>\n<p>Please help anyone in rectifying this, what else need to check?</p>\n"},{"tags":["java","http","ssl","protocols","tls1.2"],"owner":{"account_id":28907016,"reputation":1,"user_id":22140860,"display_name":"Bruno Colares"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698145265,"creation_date":1698145265,"question_id":77351515,"body_markdown":"My code that aims to return reports in PDFs is generating some errors, initially talking about the SSL and TLS protocols. I haven&#39;t found a solution yet, can anyone help me?\r\n\r\nPDF generation is linked to crystal.\r\n\r\n\r\n```\r\n 000000cc SystemErr     R javax.net.ssl.SSLException: Received fatal alert: protocol_version\r\n 000000cc SystemErr     R \tat com.ibm.jsse2.o.a(o.java:6)\r\n 000000cc SystemErr     R \tat com.ibm.jsse2.o.a(o.java:43)\r\n 000000cc SystemErr     R \tat com.ibm.jsse2.SSLSocketImpl.b(SSLSocketImpl.java:32)\r\n 000000cc SystemErr     R \tat com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:626)\r\n 000000cc SystemErr     R \tat com.ibm.jsse2.SSLSocketImpl.h(SSLSocketImpl.java:39)\r\n 000000cc SystemErr     R \tat com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:656)\r\n 000000cc SystemErr     R \tat com.ibm.jsse2.SSLSocketImpl.startHandshake(SSLSocketImpl.java:533)\r\n 000000cc SystemErr     R \tat com.ibm.net.ssl.www2.protocol.https.c.afterConnect(c.java:49)\r\n 000000cc SystemErr     R \tat com.ibm.net.ssl.www2.protocol.https.d.connect(d.java:24)\r\n 000000cc SystemErr     R \tat sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1207)\r\n 000000cc SystemErr     R \tat com.ibm.net.ssl.www2.protocol.https.b.getInputStream(b.java:63)\r\n 000000cc SystemErr     R \tat com.usiminas.nqppap00.negocio.ElaboracaoPPAPRN.retornarRelatorioComoPDF(ElaboracaoPPAPRN.java:432)\r\n 000000cc SystemErr     R \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n 000000cc SystemErr     R \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\r\n 000000cc SystemErr     R \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n 000000cc SystemErr     R \tat java.lang.reflect.Method.invoke(Method.java:611)\r\n 000000cc SystemErr     R \tat com.ibm.ejs.container.EJSContainer.invokeProceed(EJSContainer.java:5730)\r\n000000cc SystemErr     R \tat com.ibm.ejs.container.interceptors.InvocationContextImpl.proceed(InvocationContextImpl.java:568)\r\n 000000cc SystemErr     R \tat org.apache.webbeans.ejb.common.interceptor.OpenWebBeansEjbInterceptor.callInterceptorsAndDecorators(OpenWebBeansEjbInterceptor.java:526)\r\n 000000cc SystemErr     R \tat org.apache.webbeans.ejb.common.interceptor.OpenWebBeansEjbInterceptor.callToOwbInterceptors(OpenWebBeansEjbInterceptor.java:200)\r\n 000000cc SystemErr     R \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n 000000cc SystemErr     R \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\r\n 000000cc SystemErr     R \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n\r\n```\r\n\r\n\r\nI&#39;ve already tried disabling the line\r\n#jdk.tls.disabledAlgorithms=SSLv3, RC4, MD5withRSA, DH keySize &lt; 768 in java.security but it didn&#39;t work.","title":"Problem with Received fatal alert: protocol_version","body":"<p>My code that aims to return reports in PDFs is generating some errors, initially talking about the SSL and TLS protocols. I haven't found a solution yet, can anyone help me?</p>\n<p>PDF generation is linked to crystal.</p>\n<pre><code> 000000cc SystemErr     R javax.net.ssl.SSLException: Received fatal alert: protocol_version\n 000000cc SystemErr     R   at com.ibm.jsse2.o.a(o.java:6)\n 000000cc SystemErr     R   at com.ibm.jsse2.o.a(o.java:43)\n 000000cc SystemErr     R   at com.ibm.jsse2.SSLSocketImpl.b(SSLSocketImpl.java:32)\n 000000cc SystemErr     R   at com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:626)\n 000000cc SystemErr     R   at com.ibm.jsse2.SSLSocketImpl.h(SSLSocketImpl.java:39)\n 000000cc SystemErr     R   at com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:656)\n 000000cc SystemErr     R   at com.ibm.jsse2.SSLSocketImpl.startHandshake(SSLSocketImpl.java:533)\n 000000cc SystemErr     R   at com.ibm.net.ssl.www2.protocol.https.c.afterConnect(c.java:49)\n 000000cc SystemErr     R   at com.ibm.net.ssl.www2.protocol.https.d.connect(d.java:24)\n 000000cc SystemErr     R   at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1207)\n 000000cc SystemErr     R   at com.ibm.net.ssl.www2.protocol.https.b.getInputStream(b.java:63)\n 000000cc SystemErr     R   at com.usiminas.nqppap00.negocio.ElaboracaoPPAPRN.retornarRelatorioComoPDF(ElaboracaoPPAPRN.java:432)\n 000000cc SystemErr     R   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n 000000cc SystemErr     R   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\n 000000cc SystemErr     R   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\n 000000cc SystemErr     R   at java.lang.reflect.Method.invoke(Method.java:611)\n 000000cc SystemErr     R   at com.ibm.ejs.container.EJSContainer.invokeProceed(EJSContainer.java:5730)\n000000cc SystemErr     R    at com.ibm.ejs.container.interceptors.InvocationContextImpl.proceed(InvocationContextImpl.java:568)\n 000000cc SystemErr     R   at org.apache.webbeans.ejb.common.interceptor.OpenWebBeansEjbInterceptor.callInterceptorsAndDecorators(OpenWebBeansEjbInterceptor.java:526)\n 000000cc SystemErr     R   at org.apache.webbeans.ejb.common.interceptor.OpenWebBeansEjbInterceptor.callToOwbInterceptors(OpenWebBeansEjbInterceptor.java:200)\n 000000cc SystemErr     R   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n 000000cc SystemErr     R   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\n 000000cc SystemErr     R   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\n\n</code></pre>\n<p>I've already tried disabling the line\n#jdk.tls.disabledAlgorithms=SSLv3, RC4, MD5withRSA, DH keySize &lt; 768 in java.security but it didn't work.</p>\n"},{"tags":["java","spring-boot","rocketmq"],"answers":[{"tags":[],"owner":{"account_id":1934432,"reputation":1,"user_id":1743058,"display_name":"Francis Lee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698030775,"creation_date":1698030775,"answer_id":77342461,"question_id":76785960,"body_markdown":"there are something you can check it\r\n1. check consumer online or not. go to controller panel\r\n[enter image description here][1]\r\n   \r\n2. if online , check topic, consumer group, nameserver address right or not.\r\n\r\n3. check ~/logs/rocketmqlogs/rocketmq_client.log to see consumer&#39;s log\r\n\r\nafter thos checks still fail, message me","title":"rocketMQ producer can send messages, but the consumer cannot consume messages","body":"<p>there are something you can check it</p>\n<ol>\n<li><p>check consumer online or not. go to controller panel\n[enter image description here][1]</p>\n</li>\n<li><p>if online , check topic, consumer group, nameserver address right or not.</p>\n</li>\n<li><p>check ~/logs/rocketmqlogs/rocketmq_client.log to see consumer's log</p>\n</li>\n</ol>\n<p>after thos checks still fail, message me</p>\n"},{"tags":[],"owner":{"account_id":19769854,"reputation":15,"user_id":14990784,"display_name":"wang heng"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698144930,"creation_date":1698144930,"answer_id":77351487,"question_id":76785960,"body_markdown":"I have the same issue like this, the message status is NOT_COMSUME_YET or NOT_ONLINE\r\n\r\nI resolve this issue by change producer group same with consumer group.\r\n\r\nhope it will help you.","title":"rocketMQ producer can send messages, but the consumer cannot consume messages","body":"<p>I have the same issue like this, the message status is NOT_COMSUME_YET or NOT_ONLINE</p>\n<p>I resolve this issue by change producer group same with consumer group.</p>\n<p>hope it will help you.</p>\n"}],"owner":{"account_id":29109276,"reputation":1,"user_id":22299389,"display_name":"JessieJ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698144930,"creation_date":1690532109,"question_id":76785960,"body_markdown":"- My rocketMQ producer can send messages to the queue, but the consumer cannot consume messages in a timely manner. Sometimes it will be delayed for about 10 seconds, and most of the time it will not consume messages at all.\r\n- I checked the rocketMQ control panel, and the unconsumed messages look like this:\r\n[messages look like](https://i.stack.imgur.com/6KnE6.png)\r\n- My application.yml is:\r\n\r\n```\r\nrocketmq:\r\n  name-server: 127.0.0.1:9876\r\n  producer:\r\n    group: ProducerGroup\r\n  consumer:\r\n    group: ConsumerGroup\r\n    topic: MyTopic\r\n```\r\n\r\n- My maven dependencies are as follows\r\n\r\n```\r\n&lt;properties&gt;\r\n    &lt;java.version&gt;11&lt;/java.version&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n&lt;/properties&gt;\r\n\r\n&lt;parent&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;2.5.12&lt;/version&gt;\r\n&lt;/parent&gt;\r\n....\r\n&lt;dependency&gt;\r\n     &lt;groupId&gt;org.apache.rocketmq&lt;/groupId&gt;\r\n     &lt;artifactId&gt;rocketmq-spring-boot-starter&lt;/artifactId&gt;\r\n     &lt;version&gt;2.2.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n- My producer side code is as follows:\r\n\r\n```\r\nimport org.apache.rocketmq.client.exception.MQClientException;\r\nimport org.apache.rocketmq.client.producer.DefaultMQProducer;\r\nimport org.apache.rocketmq.common.message.Message;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class RocketMQProducer {\r\n\r\n    private DefaultMQProducer producer;\r\n\r\n    @Autowired\r\n    public RocketMQProducer(@Value(&quot;${rocketmq.producer.group}&quot;) String producerGroup,\r\n                            @Value(&quot;${rocketmq.name-server}&quot;) String nameServerAddress) {\r\n        producer = new DefaultMQProducer(producerGroup);\r\n        producer.setNamesrvAddr(nameServerAddress);\r\n        try {\r\n            producer.start(); \r\n        } catch (MQClientException e) {\r\n            System.out.println(&quot;RocketMQProducer is wrong &quot;);\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void sendMessages(String topic, String tags, String message) {\r\n        try {\r\n            Message mqMessage = new Message(topic, tags, message.getBytes());\r\n            producer.send(mqMessage);\r\n            System.out.println(&quot;Message sent to queue: &quot; + message);\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;RocketMQProducer sendMessages() is wrong &quot;);\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    public void shutdown() {\r\n        producer.shutdown();\r\n    }\r\n}\r\n\r\n```\r\n- Next, I called the sendMessages method of the producer in the NettyClientHandler coderedundant code omitted\r\n\r\n```\r\n@Component\r\npublic class NettyClientHandler extends ChannelInboundHandlerAdapter {\r\n\r\n\r\n    @Autowired\r\n    private RocketMQProducer rocketMQProducer;\r\n\r\n    @Value(&quot;${rocketmq.consumer.topic}&quot;)\r\n    private String topic;\r\n\r\n\r\n    @Override\r\n    public void channelActive(ChannelHandlerContext ctx) throws Exception {\r\n        LogUtil.log(&quot;Client,channelActive&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {\r\n        LogUtil.log(&quot;Client,Received a message from the server&quot;);\r\n\r\n        if (msg instanceof ByteBuf) { \r\n            ByteBuf byteBuf = (ByteBuf) msg;\r\n\r\n            String message = byteBuf.toString(StandardCharsets.UTF_8);\r\n\r\n            rocketMQProducer.sendMessages(topic, &quot;&quot;, message);\r\n\r\n            System.out.println(&quot;Received message: &quot; + message);\r\n        }\r\n    }\r\n\r\n    \r\n}\r\n```\r\n- My consumer side code is as follows:\r\n\r\n```\r\n@Service\r\npublic class RocketMQCommonConsumerListener implements CommandLineRunner {\r\n\r\n    @Autowired\r\n    private subway.service.Service service;\r\n\r\n    @Value(&quot;${rocketmq.consumer.group}&quot;)\r\n    private String consumerGroup;\r\n\r\n    @Value(&quot;${rocketmq.name-server}&quot;)\r\n    private String nameServerAddress;\r\n\r\n    @Value(&quot;${rocketmq.consumer.topic}&quot;)\r\n    private String topic;\r\n\r\n\r\n    public void consumeMessages() {\r\n        DefaultMQPushConsumer consumer = new DefaultMQPushConsumer(consumerGroup);\r\n        consumer.setNamesrvAddr(nameServerAddress);\r\n        consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET);\r\n\r\n        System.out.println(&quot;consume_step1&quot;);\r\n        try {\r\n            consumer.subscribe(topic, &quot;*&quot;);\r\n            System.out.println(&quot;consume_step2&quot;);\r\n            consumer.registerMessageListener(new MessageListenerOrderly() {\r\n                @Override\r\n                public ConsumeOrderlyStatus consumeMessage(List&lt;MessageExt&gt; messages, ConsumeOrderlyContext context) {\r\n                    StringBuilder sb = new StringBuilder();\r\n                    boolean needMerge = true;\r\n                    System.out.print(&quot;consume_step3, &quot;);\r\n                    long threadId = Thread.currentThread().getId();\r\n                    System.out.println(&quot;Current Thread ID: &quot; + threadId);\r\n                    for (MessageExt message : messages) {\r\n                        String str = new String(message.getBody());\r\n                        System.out.println(&quot;RocketMQ received message&quot; + str);\r\n\r\n                     }\r\n\r\n                    return ConsumeOrderlyStatus.SUCCESS;\r\n                }\r\n            });\r\n            consumer.start();\r\n        } catch (MQClientException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n    private void handleJson(String json) {\r\n       \r\n        System.out.println(&quot;json data is :&quot;);\r\n        System.out.println(json);\r\n        System.out.println(&quot;\\t\\t\\t============\\t\\t\\t\\n&quot;);\r\n    }\r\n\r\n    @Async(&quot;taskExecutor&quot;)\r\n    @Override\r\n    public void run(String... args){\r\n        consumeMessages();\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI have modified it according to chatGPT3.5, and searched for answers on the Internet, but none of them can be solved. This question has troubled me for a long time, I am looking forward to the answer.","title":"rocketMQ producer can send messages, but the consumer cannot consume messages","body":"<ul>\n<li>My rocketMQ producer can send messages to the queue, but the consumer cannot consume messages in a timely manner. Sometimes it will be delayed for about 10 seconds, and most of the time it will not consume messages at all.</li>\n<li>I checked the rocketMQ control panel, and the unconsumed messages look like this:\n<a href=\"https://i.stack.imgur.com/6KnE6.png\" rel=\"nofollow noreferrer\">messages look like</a></li>\n<li>My application.yml is:</li>\n</ul>\n<pre><code>rocketmq:\n  name-server: 127.0.0.1:9876\n  producer:\n    group: ProducerGroup\n  consumer:\n    group: ConsumerGroup\n    topic: MyTopic\n</code></pre>\n<ul>\n<li>My maven dependencies are as follows</li>\n</ul>\n<pre><code>&lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n&lt;/properties&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.5.12&lt;/version&gt;\n&lt;/parent&gt;\n....\n&lt;dependency&gt;\n     &lt;groupId&gt;org.apache.rocketmq&lt;/groupId&gt;\n     &lt;artifactId&gt;rocketmq-spring-boot-starter&lt;/artifactId&gt;\n     &lt;version&gt;2.2.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<ul>\n<li>My producer side code is as follows:</li>\n</ul>\n<pre><code>import org.apache.rocketmq.client.exception.MQClientException;\nimport org.apache.rocketmq.client.producer.DefaultMQProducer;\nimport org.apache.rocketmq.common.message.Message;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class RocketMQProducer {\n\n    private DefaultMQProducer producer;\n\n    @Autowired\n    public RocketMQProducer(@Value(&quot;${rocketmq.producer.group}&quot;) String producerGroup,\n                            @Value(&quot;${rocketmq.name-server}&quot;) String nameServerAddress) {\n        producer = new DefaultMQProducer(producerGroup);\n        producer.setNamesrvAddr(nameServerAddress);\n        try {\n            producer.start(); \n        } catch (MQClientException e) {\n            System.out.println(&quot;RocketMQProducer is wrong &quot;);\n            e.printStackTrace();\n        }\n    }\n\n    public void sendMessages(String topic, String tags, String message) {\n        try {\n            Message mqMessage = new Message(topic, tags, message.getBytes());\n            producer.send(mqMessage);\n            System.out.println(&quot;Message sent to queue: &quot; + message);\n        } catch (Exception e) {\n            System.out.println(&quot;RocketMQProducer sendMessages() is wrong &quot;);\n            e.printStackTrace();\n        }\n    }\n    public void shutdown() {\n        producer.shutdown();\n    }\n}\n\n</code></pre>\n<ul>\n<li>Next, I called the sendMessages method of the producer in the NettyClientHandler coderedundant code omitted</li>\n</ul>\n<pre><code>@Component\npublic class NettyClientHandler extends ChannelInboundHandlerAdapter {\n\n\n    @Autowired\n    private RocketMQProducer rocketMQProducer;\n\n    @Value(&quot;${rocketmq.consumer.topic}&quot;)\n    private String topic;\n\n\n    @Override\n    public void channelActive(ChannelHandlerContext ctx) throws Exception {\n        LogUtil.log(&quot;Client,channelActive&quot;);\n    }\n\n    @Override\n    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {\n        LogUtil.log(&quot;Client,Received a message from the server&quot;);\n\n        if (msg instanceof ByteBuf) { \n            ByteBuf byteBuf = (ByteBuf) msg;\n\n            String message = byteBuf.toString(StandardCharsets.UTF_8);\n\n            rocketMQProducer.sendMessages(topic, &quot;&quot;, message);\n\n            System.out.println(&quot;Received message: &quot; + message);\n        }\n    }\n\n    \n}\n</code></pre>\n<ul>\n<li>My consumer side code is as follows:</li>\n</ul>\n<pre><code>@Service\npublic class RocketMQCommonConsumerListener implements CommandLineRunner {\n\n    @Autowired\n    private subway.service.Service service;\n\n    @Value(&quot;${rocketmq.consumer.group}&quot;)\n    private String consumerGroup;\n\n    @Value(&quot;${rocketmq.name-server}&quot;)\n    private String nameServerAddress;\n\n    @Value(&quot;${rocketmq.consumer.topic}&quot;)\n    private String topic;\n\n\n    public void consumeMessages() {\n        DefaultMQPushConsumer consumer = new DefaultMQPushConsumer(consumerGroup);\n        consumer.setNamesrvAddr(nameServerAddress);\n        consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET);\n\n        System.out.println(&quot;consume_step1&quot;);\n        try {\n            consumer.subscribe(topic, &quot;*&quot;);\n            System.out.println(&quot;consume_step2&quot;);\n            consumer.registerMessageListener(new MessageListenerOrderly() {\n                @Override\n                public ConsumeOrderlyStatus consumeMessage(List&lt;MessageExt&gt; messages, ConsumeOrderlyContext context) {\n                    StringBuilder sb = new StringBuilder();\n                    boolean needMerge = true;\n                    System.out.print(&quot;consume_step3, &quot;);\n                    long threadId = Thread.currentThread().getId();\n                    System.out.println(&quot;Current Thread ID: &quot; + threadId);\n                    for (MessageExt message : messages) {\n                        String str = new String(message.getBody());\n                        System.out.println(&quot;RocketMQ received message&quot; + str);\n\n                     }\n\n                    return ConsumeOrderlyStatus.SUCCESS;\n                }\n            });\n            consumer.start();\n        } catch (MQClientException e) {\n            e.printStackTrace();\n        }\n    }\n\n\n    private void handleJson(String json) {\n       \n        System.out.println(&quot;json data is :&quot;);\n        System.out.println(json);\n        System.out.println(&quot;\\t\\t\\t============\\t\\t\\t\\n&quot;);\n    }\n\n    @Async(&quot;taskExecutor&quot;)\n    @Override\n    public void run(String... args){\n        consumeMessages();\n    }\n}\n</code></pre>\n<p>I have modified it according to chatGPT3.5, and searched for answers on the Internet, but none of them can be solved. This question has troubled me for a long time, I am looking forward to the answer.</p>\n"},{"tags":["java","sql-server","nativequery","hibernate-native-query"],"comments":[{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1698147034,"post_id":77351306,"comment_id":136365612,"body_markdown":"That depends entirely on what queries are generated in java hibernate vs. view. But usually native queries allows to extract maximum performance if you know how to write good sql","body":"That depends entirely on what queries are generated in java hibernate vs. view. But usually native queries allows to extract maximum performance if you know how to write good sql"}],"owner":{"account_id":3168101,"reputation":247,"user_id":2677653,"accept_rate":21,"display_name":"Thomas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1698143846,"answer_count":0,"score":0,"last_activity_date":1698143188,"creation_date":1698143188,"question_id":77351306,"body_markdown":"i&#39;m using some native query (in java hibernate) which selects data from some tables.\r\n\r\nmy idea is to use views (MS SQL) instead of native query. \r\n\r\nCan someone explain to me which is more performant ... are there any big differents?\r\n\r\nthanks &amp; best regards\r\n\r\n\r\n","title":"nativ query (java) vs view in DB - performance","body":"<p>i'm using some native query (in java hibernate) which selects data from some tables.</p>\n<p>my idea is to use views (MS SQL) instead of native query.</p>\n<p>Can someone explain to me which is more performant ... are there any big differents?</p>\n<p>thanks &amp; best regards</p>\n"},{"tags":["java","spring","spring-webflux","reactive-programming","spring-webclient"],"owner":{"account_id":18570348,"reputation":89,"user_id":13532297,"display_name":"pwflamy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698142981,"creation_date":1698142981,"question_id":77351287,"body_markdown":"I have a Spring WebClient which built by method:\r\n\r\n```\r\npublic static WebClient build(ReactorResourceFactory factory) {\r\n        final ConnectionProvider fixedPool = ConnectionProvider\r\n            .builder(&quot;CustomClient&quot;)\r\n            .maxConnections(1000)\r\n            .pendingAcquireMaxCount(-1) // keep the backwards compatibility\r\n            .pendingAcquireTimeout(Duration.ofMillis(1000))\r\n            .maxIdleTime(Duration.ofSeconds(5))\r\n            .maxLifeTime(Duration.ofHours(1))\r\n            .build();\r\n        final LoopResources loop = LoopResources.create(&quot;CustomClient&quot;, 1, 4, true);\r\n        factory.setUseGlobalResources(false);\r\n        factory.setConnectionProvider(fixedPool);\r\n        factory.setLoopResources(loop);\r\n        Function&lt;? super TcpClient, ? extends TcpClient&gt; finalMapper = tcp -&gt; tcp\r\n            .doOnConnected(conn -&gt; conn\r\n                .addHandlerLast(new ReadTimeoutHandler(500, TimeUnit.MILLISECONDS))\r\n                .addHandlerLast(new WriteTimeoutHandler(500, TimeUnit.MILLISECONDS)\r\n                ))\r\n            .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 1500));\r\n        Function&lt;HttpClient, HttpClient&gt; mapper = c -&gt; c.tcpConfiguration(finalMapper)\r\n            .compress(true)\r\n            .keepAlive(true)\r\n            .disableRetry(true);\r\n        ClientHttpConnector connector = new ReactorClientHttpConnector(factory, mapper);\r\n        return WebClient.builder().clientConnector(connector).build();\r\n    }\r\n```\r\nSometimes this client produce ReadTimeoutException even if other side send successful response. This most often occurs when the serviceA makes a large number of calls simultaneously (30-50 requests within 10-50ms). As a result, in the logs I observe the following situation (ServiceA do request to ServiceB):\r\n\r\nServiceA\r\n```\r\nOct 24, 2023 @ 12:16:08.946 INFO request in 0.585 secs\r\nOct 24, 2023 @ 12:16:08.939 [CustomClient-epoll-3] WARN reactor.netty.http.client.HttpClientConnect ||  &gt;&gt; [0eac89ee-1, L:/&lt;ip&gt;:56790 - R:&lt;host&gt;/&lt;ip&gt;:443] The connection observed an error\r\nOct 24, 2023 @ 12:16:08.939 io.netty.handler.timeout.ReadTimeoutException: null\r\n```\r\nServiceB\r\n```\r\nOct 24, 2023 @ 12:16:08.568 INFO Last successful response to ServiceA \r\n```\r\nAs I understand ServiceB sucessfully handled all requests, but WebClient in ServiceA for some reason didn&#39;t process the responses and throw ReadTimeoutException.\r\n\r\nQuestions:\r\n\r\n 1. How Spring WebClient works under the hood? What happens when we call ```retrive()``` and at what point in time does the countdown for ReadTimeoutException begin?\r\n 2. How to fix this problem? Did timeout throw due to lack of threads in LoopResources or what?\r\n\r\n ","title":"How Spring WebClient work inside and reason of ReadTimeoutException","body":"<p>I have a Spring WebClient which built by method:</p>\n<pre><code>public static WebClient build(ReactorResourceFactory factory) {\n        final ConnectionProvider fixedPool = ConnectionProvider\n            .builder(&quot;CustomClient&quot;)\n            .maxConnections(1000)\n            .pendingAcquireMaxCount(-1) // keep the backwards compatibility\n            .pendingAcquireTimeout(Duration.ofMillis(1000))\n            .maxIdleTime(Duration.ofSeconds(5))\n            .maxLifeTime(Duration.ofHours(1))\n            .build();\n        final LoopResources loop = LoopResources.create(&quot;CustomClient&quot;, 1, 4, true);\n        factory.setUseGlobalResources(false);\n        factory.setConnectionProvider(fixedPool);\n        factory.setLoopResources(loop);\n        Function&lt;? super TcpClient, ? extends TcpClient&gt; finalMapper = tcp -&gt; tcp\n            .doOnConnected(conn -&gt; conn\n                .addHandlerLast(new ReadTimeoutHandler(500, TimeUnit.MILLISECONDS))\n                .addHandlerLast(new WriteTimeoutHandler(500, TimeUnit.MILLISECONDS)\n                ))\n            .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 1500));\n        Function&lt;HttpClient, HttpClient&gt; mapper = c -&gt; c.tcpConfiguration(finalMapper)\n            .compress(true)\n            .keepAlive(true)\n            .disableRetry(true);\n        ClientHttpConnector connector = new ReactorClientHttpConnector(factory, mapper);\n        return WebClient.builder().clientConnector(connector).build();\n    }\n</code></pre>\n<p>Sometimes this client produce ReadTimeoutException even if other side send successful response. This most often occurs when the serviceA makes a large number of calls simultaneously (30-50 requests within 10-50ms). As a result, in the logs I observe the following situation (ServiceA do request to ServiceB):</p>\n<p>ServiceA</p>\n<pre><code>Oct 24, 2023 @ 12:16:08.946 INFO request in 0.585 secs\nOct 24, 2023 @ 12:16:08.939 [CustomClient-epoll-3] WARN reactor.netty.http.client.HttpClientConnect ||  &gt;&gt; [0eac89ee-1, L:/&lt;ip&gt;:56790 - R:&lt;host&gt;/&lt;ip&gt;:443] The connection observed an error\nOct 24, 2023 @ 12:16:08.939 io.netty.handler.timeout.ReadTimeoutException: null\n</code></pre>\n<p>ServiceB</p>\n<pre><code>Oct 24, 2023 @ 12:16:08.568 INFO Last successful response to ServiceA \n</code></pre>\n<p>As I understand ServiceB sucessfully handled all requests, but WebClient in ServiceA for some reason didn't process the responses and throw ReadTimeoutException.</p>\n<p>Questions:</p>\n<ol>\n<li>How Spring WebClient works under the hood? What happens when we call <code>retrive()</code> and at what point in time does the countdown for ReadTimeoutException begin?</li>\n<li>How to fix this problem? Did timeout throw due to lack of threads in LoopResources or what?</li>\n</ol>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9928,"page":104,"page_size":100}
