{"items":[{"tags":["java"],"comments":[{"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"score":0,"creation_date":1569441470,"post_id":58105040,"comment_id":102602275,"body_markdown":"The status can be cleared by using `Thread.interrupted()` method. `Thread.currentThread().interrupt();` sets the flag - it does not clear it. However I would advise to rethink the design and make your ThreadPool injectable and further seperate the task from the executor of this task.","body":"The status can be cleared by using <code>Thread.interrupted()</code> method. <code>Thread.currentThread().interrupt();</code> sets the flag - it does not clear it. However I would advise to rethink the design and make your ThreadPool injectable and further seperate the task from the executor of this task."},{"owner":{"account_id":10759610,"reputation":12628,"user_id":7916438,"display_name":"tevemadar"},"score":0,"creation_date":1569442369,"post_id":58105040,"comment_id":102602640,"body_markdown":"Being interrupted means almost nothing until someone actually checks if the thread is interrupted - and as a rule of thumb, those are the ones throwing `InterruptedException`. So you should show the other test, which are affected.","body":"Being interrupted means almost nothing until someone actually checks if the thread is interrupted - and as a rule of thumb, those are the ones throwing <code>InterruptedException</code>. So you should show the other test, which are affected."},{"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1675451112,"post_id":58105040,"comment_id":132939370,"body_markdown":"Something doesn&#39;t add up about this. The interrupted status is visible only to the the current thread. Even if tests run in parallel, the interrupted status of one thread wouldn&#39;t impact tests running in other threads. As written (with the second `interrupt()` commented out), the interrupted status is clear when this test exits. I suspect the problem would only occur when that second `interrupt()` call (after the subject is tested) is uncommented.","body":"Something doesn&#39;t add up about this. The interrupted status is visible only to the the current thread. Even if tests run in parallel, the interrupted status of one thread wouldn&#39;t impact tests running in other threads. As written (with the second <code>interrupt()</code> commented out), the interrupted status is clear when this test exits. I suspect the problem would only occur when that second <code>interrupt()</code> call (after the subject is tested) is uncommented."}],"answers":[{"tags":[],"owner":{"account_id":5941531,"reputation":7,"user_id":4672563,"display_name":"Денис Тисов"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1569440912,"creation_date":1569440912,"answer_id":58105613,"question_id":58105040,"body_markdown":"You should simulate that your `Future` returns `InterruptedException`\r\n\r\nTry this \r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class ATest {\r\n\r\n    @Test(expected = CustomException1.class)\r\n    public void testMethod() throws ExecutionException, InterruptedException {\r\n        Future future = mock(Future.class);\r\n        when(future.get()).thenThrow(new InterruptedException());\r\n        A a = new A(future);\r\n\r\n        a.getNumber();\r\n    }\r\n\r\n    // another few tests .....\r\n}","title":"How to test InterruptedException","body":"<p>You should simulate that your <code>Future</code> returns <code>InterruptedException</code></p>\n\n<p>Try this </p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class ATest {\n\n@Test(expected = CustomException1.class)\npublic void testMethod() throws ExecutionException, InterruptedException {\n    Future future = mock(Future.class);\n    when(future.get()).thenThrow(new InterruptedException());\n    A a = new A(future);\n\n    a.getNumber();\n}\n\n// another few tests .....\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":4326367,"reputation":445,"user_id":3533079,"display_name":"Cλstor"},"down_vote_count":2,"up_vote_count":3,"is_accepted":true,"score":1,"last_activity_date":1569441314,"creation_date":1569441116,"answer_id":58105668,"question_id":58105040,"body_markdown":"I think the best way to do that is to Mock the interrupted exception\r\n\r\n    when(helper.method())).thenThrow(InterruptedException.class);\r\n\r\nBut you can also just clear the interruption flag by calling the method: \r\n\r\n    Thread.interrupted()","title":"How to test InterruptedException","body":"<p>I think the best way to do that is to Mock the interrupted exception</p>\n\n<pre><code>when(helper.method())).thenThrow(InterruptedException.class);\n</code></pre>\n\n<p>But you can also just clear the interruption flag by calling the method: </p>\n\n<pre><code>Thread.interrupted()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1848482,"reputation":111,"user_id":2565680,"display_name":"Andrei Constantinescu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675450831,"creation_date":1675450397,"answer_id":75339922,"question_id":58105040,"body_markdown":"Given that the accepted answer throws an Exception when used, as Radioactive pointed it out, I thought I&#39;d share a workaround to test this using Mockito, which makes use of the `willAnswer()` method. It would look something like this:\r\n    \r\n    import static org.mockito.BDDMockito.given;\r\n    \r\n    import org.junit.jupiter.api.Test;\r\n    import org.junit.jupiter.api.extension.ExtendWith;\r\n    import org.mockito.junit.jupiter.MockitoExtension;\r\n    \r\n    @ExtendWith(MockitoExtension.class)\r\n    class Test {\r\n        @Test\r\n        void test() {    \r\n            given(helper.method()).willAnswer(invocation -&gt; {\r\n                throw new InterruptedException();\r\n            });\r\n            ...\r\n        }\r\n    }","title":"How to test InterruptedException","body":"<p>Given that the accepted answer throws an Exception when used, as Radioactive pointed it out, I thought I'd share a workaround to test this using Mockito, which makes use of the <code>willAnswer()</code> method. It would look something like this:</p>\n<pre><code>import static org.mockito.BDDMockito.given;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\n@ExtendWith(MockitoExtension.class)\nclass Test {\n    @Test\n    void test() {    \n        given(helper.method()).willAnswer(invocation -&gt; {\n            throw new InterruptedException();\n        });\n        ...\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":13006738,"reputation":2531,"user_id":9401029,"display_name":"karvai"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8588,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":58105668,"answer_count":3,"score":6,"last_activity_date":1675450831,"creation_date":1569438279,"question_id":58105040,"body_markdown":"I have the following method which works fine. I am trying to test the scenario where an InterruptedException is thrown. This is how I am testing currently which works if I only run this single test. But if I were to run all remaining 5 tests in my test class, some starts failing. All tests passes when I run them individually thus clearly my Thread interrupt in the test is affecting other tests. How can I write my test in a way it won&#39;t affect other tests? \r\n\r\n\r\n\r\n    @Component\r\n    class A{\r\n        @Autowired\r\n        private Helper helper;\r\n\r\n        private static ExecutorService executor = Executors.newFixedThreadPool(10);\r\n    \r\n        // static variable in class\r\n        private final Future&lt;String&gt; number = executor.submit(() -&gt; helper.method());\r\n    \r\n        //method to be tested \r\n        public String getNumber() {\r\n            try {\r\n                return this.number.get();\r\n            } catch (InterruptedException e) {\r\n                Thread.currentThread().interrupt();\r\n                throw new CustomException1();\r\n            } catch (ExecutionException e) {\r\n                throw new CustomException2();\r\n            }\r\n        }\r\n    }\r\n    \r\n    @RunWith(MockitoJUnitRunner.class)\r\n    clas ATest{\r\n    \r\n        @InjectMocks\r\n        private A a;\r\n    \r\n        @Mock\r\n        private Helper helper;\r\n    \r\n        // this is my test method which passes when ran individually. But will affect other tests if everything is ran same time. \r\n        @Test\r\n        public void testMethod() {\r\n    \r\n            when(helper.method()).thenReturn(&quot;222&quot;);\r\n            String num = a.getNumber();\r\n    \r\n            // doing this on purpose so I would land inside the catch. This line is causing issues.\r\n            Thread.currentThread().interrupt();\r\n    \r\n            try {\r\n                assertEquals(&quot;222&quot;, num);\r\n            }catch (CustomException1 e){\r\n                // I will land here for this test as expected\r\n                // do some assertions\r\n            }\r\n    \r\n            // Thread.currentThread().interrupt(); // Tried calling it again here to clear the flag but doesn&#39;t work. \r\n        }\r\n    \r\n        // another few tests ..... \r\n    }","title":"How to test InterruptedException","body":"<p>I have the following method which works fine. I am trying to test the scenario where an InterruptedException is thrown. This is how I am testing currently which works if I only run this single test. But if I were to run all remaining 5 tests in my test class, some starts failing. All tests passes when I run them individually thus clearly my Thread interrupt in the test is affecting other tests. How can I write my test in a way it won't affect other tests? </p>\n\n<pre><code>@Component\nclass A{\n    @Autowired\n    private Helper helper;\n\n    private static ExecutorService executor = Executors.newFixedThreadPool(10);\n\n    // static variable in class\n    private final Future&lt;String&gt; number = executor.submit(() -&gt; helper.method());\n\n    //method to be tested \n    public String getNumber() {\n        try {\n            return this.number.get();\n        } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n            throw new CustomException1();\n        } catch (ExecutionException e) {\n            throw new CustomException2();\n        }\n    }\n}\n\n@RunWith(MockitoJUnitRunner.class)\nclas ATest{\n\n    @InjectMocks\n    private A a;\n\n    @Mock\n    private Helper helper;\n\n    // this is my test method which passes when ran individually. But will affect other tests if everything is ran same time. \n    @Test\n    public void testMethod() {\n\n        when(helper.method()).thenReturn(\"222\");\n        String num = a.getNumber();\n\n        // doing this on purpose so I would land inside the catch. This line is causing issues.\n        Thread.currentThread().interrupt();\n\n        try {\n            assertEquals(\"222\", num);\n        }catch (CustomException1 e){\n            // I will land here for this test as expected\n            // do some assertions\n        }\n\n        // Thread.currentThread().interrupt(); // Tried calling it again here to clear the flag but doesn't work. \n    }\n\n    // another few tests ..... \n}\n</code></pre>\n"},{"tags":["java","option-type"],"comments":[{"owner":{"account_id":2829929,"reputation":5163,"user_id":2431702,"display_name":"DanielBarbarian"},"score":2,"creation_date":1675435103,"post_id":75337175,"comment_id":132934248,"body_markdown":"Does this help? https://stackoverflow.com/questions/37004579/convenient-way-of-checking-equality-for-optionals","body":"Does this help? <a href=\"https://stackoverflow.com/questions/37004579/convenient-way-of-checking-equality-for-optionals\" title=\"convenient way of checking equality for optionals\">stackoverflow.com/questions/37004579/&hellip;</a>"},{"owner":{"account_id":5860066,"reputation":13475,"user_id":4616087,"display_name":"Marvin"},"score":2,"creation_date":1675435134,"post_id":75337175,"comment_id":132934267,"body_markdown":"Would you see `if (INTERNAL_CUSTOMER.equals(order.getCustomer().orElse(null))) { ... }` as &quot;more concise&quot; (I wouldn&#39;t say it necessarily _is_)?","body":"Would you see <code>if (INTERNAL_CUSTOMER.equals(order.getCustomer().orElse(null))) { ... }</code> as &quot;more concise&quot; (I wouldn&#39;t say it necessarily <i>is</i>)?"},{"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"score":0,"creation_date":1675435402,"post_id":75337175,"comment_id":132934362,"body_markdown":"if order.isEmpty() then order.getCustomer() will fail","body":"if order.isEmpty() then order.getCustomer() will fail"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1675435888,"post_id":75337175,"comment_id":132934507,"body_markdown":"`order.getCustomer()` won&#39;t even compile. You probably want `if (INTERNAL_CUSTOMER.equals(order.map(Order::getCustomer).orElse(null))) { ... }`","body":"<code>order.getCustomer()</code> won&#39;t even compile. You probably want <code>if (INTERNAL_CUSTOMER.equals(order.map(Order::getCustomer).orEl&zwnj;&#8203;se(null))) { ... }</code>"}],"answers":[{"tags":[],"owner":{"account_id":5306592,"reputation":810,"user_id":4234254,"display_name":"anqit"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675450007,"creation_date":1675440211,"answer_id":75338237,"question_id":75337175,"body_markdown":"You can use the lambda expression using `map` and `filter`.\r\n`map` is used to `pull/manipulae` actual data coming from stream and `filter` will be used for `predicating` the value if it&#39;s true or false, `isPresent` will return true if `stream` returned any result after `filter`\r\n\r\n`if (order.map(Order::getCustomer).filter(INTERNAL_CUSTOMER::equals).isPresent()) { ... }`","title":"How to check if an optional value is present and equal to another value","body":"<p>You can use the lambda expression using <code>map</code> and <code>filter</code>.\n<code>map</code> is used to <code>pull/manipulae</code> actual data coming from stream and <code>filter</code> will be used for <code>predicating</code> the value if it's true or false, <code>isPresent</code> will return true if <code>stream</code> returned any result after <code>filter</code></p>\n<p><code>if (order.map(Order::getCustomer).filter(INTERNAL_CUSTOMER::equals).isPresent()) { ... }</code></p>\n"}],"owner":{"account_id":1035149,"reputation":16298,"user_id":1042646,"accept_rate":78,"display_name":"Punter Vicky"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":793,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":75338237,"answer_count":1,"score":-2,"last_activity_date":1675450007,"creation_date":1675434864,"question_id":75337175,"body_markdown":"Is there a way to express the below conditional in a more concise fashion?\r\n```java\r\n    Optional&lt;Order&gt; order = getOrder(); // API Call\r\n    if (\r\n      order.getCustomer().isPresent() &amp;&amp;\r\n      order.getCustomer().get().equals(INTERNAL_CUSTOMER)\r\n    ) {\r\n      return;\r\n    }\r\n```","title":"How to check if an optional value is present and equal to another value","body":"<p>Is there a way to express the below conditional in a more concise fashion?</p>\n<pre class=\"lang-java prettyprint-override\"><code>    Optional&lt;Order&gt; order = getOrder(); // API Call\n    if (\n      order.getCustomer().isPresent() &amp;&amp;\n      order.getCustomer().get().equals(INTERNAL_CUSTOMER)\n    ) {\n      return;\n    }\n</code></pre>\n"},{"tags":["java","agent-based-modeling","repast-simphony"],"comments":[{"owner":{"account_id":26696174,"reputation":21,"user_id":20303989,"display_name":"Bastien Boucherat"},"score":0,"creation_date":1675449612,"post_id":75176564,"comment_id":132939013,"body_markdown":"Is repast.score.impl.SGeographyImpl a legacy module? I cannot find it in the Repast documentation. Or could it be some homemade module ?","body":"Is repast.score.impl.SGeographyImpl a legacy module? I cannot find it in the Repast documentation. Or could it be some homemade module ?"},{"owner":{"account_id":26696174,"reputation":21,"user_id":20303989,"display_name":"Bastien Boucherat"},"score":0,"creation_date":1675451702,"post_id":75176564,"comment_id":132939525,"body_markdown":"I found that DefaultProjectionDescriptor precisely used in the model I was given is DEPRECATED in Repast documentation. \nDoes the fact that it is deprecated means that it can cause an error or is it only advised not to use it but it&#39;s still there for backward compatibility (and then the error is coming from somewhere else) ?","body":"I found that DefaultProjectionDescriptor precisely used in the model I was given is DEPRECATED in Repast documentation.  Does the fact that it is deprecated means that it can cause an error or is it only advised not to use it but it&#39;s still there for backward compatibility (and then the error is coming from somewhere else) ?"}],"owner":{"account_id":26696174,"reputation":21,"user_id":20303989,"display_name":"Bastien Boucherat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675449702,"creation_date":1674151823,"question_id":75176564,"body_markdown":"I am launching a model that was created with an old version of repast (RepastSimphony 1.2.0) and I am trying to run it an the latest version of Repast.\r\n\r\nI have imported manually the scenarios files to the best of my abilities (I am a beginner with Repast).\r\n\r\nNow, when I launch the model in Repast, it has en error because it cannot find a certain file/library/module (I am unsure).\r\n\r\nNow, I am not sure whether this is a Repast internal library or some piece of code that I should have been given and that is missing...\r\n\r\nAny insight about this error will be welcome !\r\n\r\nThe error is this one:\r\n\r\n```\r\nWARN  [AWT-EventQueue-0] 13:20:38,158 ObjectActionLoader - Error loading information from data. Continuing with model loading.\r\ncom.thoughtworks.xstream.converters.ConversionException: repast.score.impl.SGeographyImpl : repast.score.impl.SGeographyImpl\r\n---- Debugging information ----\r\nmessage             : repast.score.impl.SGeographyImpl\r\ncause-exception     : com.thoughtworks.xstream.mapper.CannotResolveClassException\r\ncause-message       : repast.score.impl.SGeographyImpl\r\nclass               : java.util.ArrayList\r\nrequired-type       : java.util.ArrayList\r\nconverter-type      : com.thoughtworks.xstream.converters.collections.CollectionConverter\r\npath                : /repast.simphony.visualization.engine.DefaultDisplayDescriptor/projections/repast.score.impl.SGeographyImpl\r\nline number         : 61\r\nclass[1]            : repast.simphony.visualization.engine.DefaultDisplayDescriptor\r\nconverter-type[1]   : com.thoughtworks.xstream.converters.reflection.ReflectionConverter\r\nversion             : \r\n```\r\nI traced that the attempt to load something from the scenario description:\r\n\r\n```  &lt;projections&gt;\r\n    &lt;repast.score.impl.SGeographyImpl&gt;\r\n      &lt;name&gt;PeopleGeography&lt;/name&gt;\r\n    &lt;/repast.score.impl.SGeographyImpl&gt;\r\n  &lt;/projections&gt;\r\n  &lt;valueLayers/&gt;\r\n  &lt;projectionDescriptors&gt;\r\n    &lt;entry&gt;\r\n      &lt;string&gt;PeopleGeography&lt;/string&gt;\r\n      &lt;repast.simphony.visualization.engine.DefaultProjectionDescriptor&gt;\r\n        &lt;proj class=&quot;repast.score.impl.SGeographyImpl&quot; reference=&quot;../../../../projections/repast.score.impl.SGeographyImpl&quot;/&gt;\r\n        &lt;props/&gt;\r\n      &lt;/repast.simphony.visualization.engine.DefaultProjectionDescriptor&gt;\r\n    &lt;/entry&gt;\r\n  &lt;/projectionDescriptors&gt;\r\n```\r\n\r\nIncidentally, I tried to run a model from the model library (zombies) and it launches and works properly.","title":"Unknown error in Repast: does not find some module?","body":"<p>I am launching a model that was created with an old version of repast (RepastSimphony 1.2.0) and I am trying to run it an the latest version of Repast.</p>\n<p>I have imported manually the scenarios files to the best of my abilities (I am a beginner with Repast).</p>\n<p>Now, when I launch the model in Repast, it has en error because it cannot find a certain file/library/module (I am unsure).</p>\n<p>Now, I am not sure whether this is a Repast internal library or some piece of code that I should have been given and that is missing...</p>\n<p>Any insight about this error will be welcome !</p>\n<p>The error is this one:</p>\n<pre><code>WARN  [AWT-EventQueue-0] 13:20:38,158 ObjectActionLoader - Error loading information from data. Continuing with model loading.\ncom.thoughtworks.xstream.converters.ConversionException: repast.score.impl.SGeographyImpl : repast.score.impl.SGeographyImpl\n---- Debugging information ----\nmessage             : repast.score.impl.SGeographyImpl\ncause-exception     : com.thoughtworks.xstream.mapper.CannotResolveClassException\ncause-message       : repast.score.impl.SGeographyImpl\nclass               : java.util.ArrayList\nrequired-type       : java.util.ArrayList\nconverter-type      : com.thoughtworks.xstream.converters.collections.CollectionConverter\npath                : /repast.simphony.visualization.engine.DefaultDisplayDescriptor/projections/repast.score.impl.SGeographyImpl\nline number         : 61\nclass[1]            : repast.simphony.visualization.engine.DefaultDisplayDescriptor\nconverter-type[1]   : com.thoughtworks.xstream.converters.reflection.ReflectionConverter\nversion             : \n</code></pre>\n<p>I traced that the attempt to load something from the scenario description:</p>\n<pre><code>    &lt;repast.score.impl.SGeographyImpl&gt;\n      &lt;name&gt;PeopleGeography&lt;/name&gt;\n    &lt;/repast.score.impl.SGeographyImpl&gt;\n  &lt;/projections&gt;\n  &lt;valueLayers/&gt;\n  &lt;projectionDescriptors&gt;\n    &lt;entry&gt;\n      &lt;string&gt;PeopleGeography&lt;/string&gt;\n      &lt;repast.simphony.visualization.engine.DefaultProjectionDescriptor&gt;\n        &lt;proj class=&quot;repast.score.impl.SGeographyImpl&quot; reference=&quot;../../../../projections/repast.score.impl.SGeographyImpl&quot;/&gt;\n        &lt;props/&gt;\n      &lt;/repast.simphony.visualization.engine.DefaultProjectionDescriptor&gt;\n    &lt;/entry&gt;\n  &lt;/projectionDescriptors&gt;\n</code></pre>\n<p>Incidentally, I tried to run a model from the model library (zombies) and it launches and works properly.</p>\n"},{"tags":["java","bufferedreader","readline","processbuilder"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1667917019,"post_id":74362226,"comment_id":131278522,"body_markdown":"*Which* shell command?","body":"<i>Which</i> shell command?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1667917072,"post_id":74362226,"comment_id":131278543,"body_markdown":"@g00se **cURL** to get the response of a webpage.","body":"@g00se <b>cURL</b> to get the response of a webpage."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1667917305,"post_id":74362226,"comment_id":131278641,"body_markdown":"Why not read it directly into a string in Java? (Oversimplification): `String data = new String(new URL(site).openStream().readAllBytes());`","body":"Why not read it directly into a string in Java? (Oversimplification): <code>String data = new String(new URL(site).openStream().readAllBytes());</code>"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1667917332,"post_id":74362226,"comment_id":131278651,"body_markdown":"I am making a curl call with *ProcessBuilder*. Once i have the webpage response as an *InputStream*, I am trying to convert the response into a String using *BufferedReader*. This process is CPU intensive [I have commented the code snippet that is CPU intensive above].","body":"I am making a curl call with <i>ProcessBuilder</i>. Once i have the webpage response as an <i>InputStream</i>, I am trying to convert the response into a String using <i>BufferedReader</i>. This process is CPU intensive [I have commented the code snippet that is CPU intensive above]."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1667917471,"post_id":74362226,"comment_id":131278719,"body_markdown":"See above for (simplified) code","body":"See above for (simplified) code"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1667917525,"post_id":74362226,"comment_id":131278754,"body_markdown":"@g00se reading the url directly is not possible. My requirement is to get the webpage response using cURL.","body":"@g00se reading the url directly is not possible. My requirement is to get the webpage response using cURL."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1667917719,"post_id":74362226,"comment_id":131278841,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/249427/discussion-between-g00se-and-mang4521).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/249427/discussion-between-g00se-and-mang4521\">continue this discussion in chat</a>."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1667918817,"post_id":74362226,"comment_id":131279306,"body_markdown":"But what do you expect? Not suite understand your question... It is supposed to use all the CPU!","body":"But what do you expect? Not suite understand your question... It is supposed to use all the CPU!"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1667921173,"post_id":74362226,"comment_id":131280395,"body_markdown":"@ACV I would like to make the code more efficient where the resource [CPU, memory, time etc] requirement is minimal.","body":"@ACV I would like to make the code more efficient where the resource [CPU, memory, time etc] requirement is minimal."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1667984632,"post_id":74362226,"comment_id":131295742,"body_markdown":"@mang4521 - the CPU is supposed to be used to max  by a process. It is up to the OS to allocate it to different processes. But I definitely want my process to use all the CPU available to complete the task as soon as possible. Memory is another thing altogether. The only way to control CPU time is to introduce sleeps in your processing thread.","body":"@mang4521 - the CPU is supposed to be used to max  by a process. It is up to the OS to allocate it to different processes. But I definitely want my process to use all the CPU available to complete the task as soon as possible. Memory is another thing altogether. The only way to control CPU time is to introduce sleeps in your processing thread."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1667986526,"post_id":74362226,"comment_id":131296435,"body_markdown":"@ACV I understand that, but the code snippet mentioned above is resource hungry. There ideally should be more efficient ways of handling the same.","body":"@ACV I understand that, but the code snippet mentioned above is resource hungry. There ideally should be more efficient ways of handling the same."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1667989015,"post_id":74362226,"comment_id":131297273,"body_markdown":"@mang4521 - agree. In that case what you want to do is maybe separate into a thread of its own and let it read and persist the data it got and when it&#39;s done to notify the main thread. You&#39;re reading a large data stream - it is normal for it to consume CPU. Another approach is to somehow split this data stream into chunks and process them in batches or in parallel (but then need to think how to assemble them back)... Anyway, there is not much you can do here","body":"@mang4521 - agree. In that case what you want to do is maybe separate into a thread of its own and let it read and persist the data it got and when it&#39;s done to notify the main thread. You&#39;re reading a large data stream - it is normal for it to consume CPU. Another approach is to somehow split this data stream into chunks and process them in batches or in parallel (but then need to think how to assemble them back)... Anyway, there is not much you can do here"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1667989501,"post_id":74362226,"comment_id":131297432,"body_markdown":"@ACV I already am running the *complete* code snippet shared above as separate threads for multiple incoming requests. I would therefore wish to avoid running the resource hungry snippet as a separate thread. What I would like to do is find out a more efficient way to read from ```ProcessBuilder``` and then convert it to a ```String``` if possible.","body":"@ACV I already am running the <i>complete</i> code snippet shared above as separate threads for multiple incoming requests. I would therefore wish to avoid running the resource hungry snippet as a separate thread. What I would like to do is find out a more efficient way to read from <code>ProcessBuilder</code> and then convert it to a <code>String</code> if possible."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1668098345,"post_id":74362226,"comment_id":131329441,"body_markdown":"You should move away from ProcessBuilder - it is not sustainable. Find another way as others suggested of fetching data from the internet.","body":"You should move away from ProcessBuilder - it is not sustainable. Find another way as others suggested of fetching data from the internet."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1668098748,"post_id":74362226,"comment_id":131329611,"body_markdown":"@ACV I have scoured may webpages online to find other options apart from ProcessBuilder [for Java], havent found many. As you by any chance aware of any [to make a curl call using Java]?","body":"@ACV I have scoured may webpages online to find other options apart from ProcessBuilder [for Java], havent found many. As you by any chance aware of any [to make a curl call using Java]?"},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1668157558,"post_id":74362226,"comment_id":131342291,"body_markdown":"@mang4521 as others pointed out, java has its own &quot;curl&quot;. You can use that. However! that would not resolve your &quot;problem&quot;. Your problem is that reading a large response from a website takes long. So if you don&#39;t want that to hold off other &quot;processes&quot; in your application, you must rethink the architecture. Make it a separate app running all the time and persisting the website responses to a database or something in a form which is easy for the main app to consume.","body":"@mang4521 as others pointed out, java has its own &quot;curl&quot;. You can use that. However! that would not resolve your &quot;problem&quot;. Your problem is that reading a large response from a website takes long. So if you don&#39;t want that to hold off other &quot;processes&quot; in your application, you must rethink the architecture. Make it a separate app running all the time and persisting the website responses to a database or something in a form which is easy for the main app to consume."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1668162408,"post_id":74362226,"comment_id":131343959,"body_markdown":"@ACV What I do not understand is this. I have utilised say Apache HTTPClient to scrape a website. The CPU usage to obtain the response is around 20%. But , the same with cURL is a 100%. Even if we take efficient utilisation of resources on Apache&#39;s part, the difference shouldn&#39;t really be this big.","body":"@ACV What I do not understand is this. I have utilised say Apache HTTPClient to scrape a website. The CPU usage to obtain the response is around 20%. But , the same with cURL is a 100%. Even if we take efficient utilisation of resources on Apache&#39;s part, the difference shouldn&#39;t really be this big."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1668253376,"post_id":74362226,"comment_id":131363512,"body_markdown":"Probably something to do with how `Process` is implemented.. try increasing the wrapping `BufferedReader` buffer size in your code","body":"Probably something to do with how <code>Process</code> is implemented.. try increasing the wrapping <code>BufferedReader</code> buffer size in your code"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":1,"creation_date":1668434455,"post_id":74362226,"comment_id":131397076,"body_markdown":"@ACV By increase in buffer size, are you referring to this? ```BufferedReader(Reader in, int size)```","body":"@ACV By increase in buffer size, are you referring to this? <code>BufferedReader(Reader in, int size)</code>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1672761142,"post_id":74362226,"comment_id":132344734,"body_markdown":"What is `FileUtils.readFileToString`? And what actual file/string size are we talking about?","body":"What is <code>FileUtils.readFileToString</code>? And what actual file/string size are we talking about?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1672764253,"post_id":74362226,"comment_id":132345762,"body_markdown":"@Holger The first code snippet you see in the description is my solution. ```FileUtils.readFileToString``` is a line of code from one of the solutions suggested below [to read the stream into a file and then convert the file content into a string]. This solution did not help.","body":"@Holger The first code snippet you see in the description is my solution. <code>FileUtils.readFileToString</code> is a line of code from one of the solutions suggested below [to read the stream into a file and then convert the file content into a string]. This solution did not help."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1672764511,"post_id":74362226,"comment_id":132345857,"body_markdown":"Well, since `FileUtils.readFileToString` is not a standard method, it’s pointless to say that the method, whose implementation we don’t know, did not solve the problem. You also forgot to mention the sizes. And if we are at it, naming the total time would also help to judge the CPU utilization. Further things to clarify: how is the CPU utilization when using the same curl command without Java? And when you split the work into running the subprocess and reading the string, which part is then consuming the CPU?","body":"Well, since <code>FileUtils.readFileToString</code> is not a standard method, it’s pointless to say that the method, whose implementation we don’t know, did not solve the problem. You also forgot to mention the sizes. And if we are at it, naming the total time would also help to judge the CPU utilization. Further things to clarify: how is the CPU utilization when using the same curl command without Java? And when you split the work into running the subprocess and reading the string, which part is then consuming the CPU?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1672765629,"post_id":74362226,"comment_id":132346209,"body_markdown":"I tried running cURL with python (os) and the CPU utilisation was much lower. As far as splitting the subprocess is concerned, the process to extract the data from the &quot;stream&quot; object into a string is the most time consuming process.","body":"I tried running cURL with python (os) and the CPU utilisation was much lower. As far as splitting the subprocess is concerned, the process to extract the data from the &quot;stream&quot; object into a string is the most time consuming process."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1672989143,"post_id":74362226,"comment_id":132401368,"body_markdown":"Can you provide a [mre], so that we may profile the code ourselves?","body":"Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, so that we may profile the code ourselves?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1673019095,"post_id":74362226,"comment_id":132409812,"body_markdown":"Just to be clear. You’re saying that when you use `redirectOutput(ProcessBuilder.Redirect.appendTo(contentFile));`, followed by `FileUtils.readFileToString(contentFile)`, the subprocess is fast and the CPU time consumption is at the `readFileToString` call? You did verify this? Did you try `Redirect\nto(contentFile)` instead of `Redirect.appendTo(contentFile)`, to be sure that you didn’t read more data than necessary?","body":"Just to be clear. You’re saying that when you use <code>redirectOutput(ProcessBuilder.Redirect.appendTo(contentFile)&zwnj;&#8203;);</code>, followed by <code>FileUtils.readFileToString(contentFile)</code>, the subprocess is fast and the CPU time consumption is at the <code>readFileToString</code> call? You did verify this? Did you try <code>Redirect to(contentFile)</code> instead of <code>Redirect.appendTo(contentFile)</code>, to be sure that you didn’t read more data than necessary?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673090715,"post_id":74362226,"comment_id":132422452,"body_markdown":"@Holger I have updated the description [made it more compact]. The code snippet shared in the description spends most of the CPU resources while retrieving the cURL response data and during the process of converting the response stream into a string.","body":"@Holger I have updated the description [made it more compact]. The code snippet shared in the description spends most of the CPU resources while retrieving the cURL response data and during the process of converting the response stream into a string."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673091326,"post_id":74362226,"comment_id":132422564,"body_markdown":"@Slaw the code snippet shared in the description should ideally be sufficient enough for you to run it successfully. The getArgs() method requires you to pass a url to scrape.\nAddition of imports [if required] is going to be tough here as there are other imports which are exclusive to the problem.","body":"@Slaw the code snippet shared in the description should ideally be sufficient enough for you to run it successfully. The getArgs() method requires you to pass a url to scrape. Addition of imports [if required] is going to be tough here as there are other imports which are exclusive to the problem."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1673098690,"post_id":74362226,"comment_id":132423823,"body_markdown":"These are the results for the case that you are reading from the pipe. I’d like to see the results for the other case, when you redirect `curl` to a file and read afterwards. That’s important for narrowing down the problem.","body":"These are the results for the case that you are reading from the pipe. I’d like to see the results for the other case, when you redirect <code>curl</code> to a file and read afterwards. That’s important for narrowing down the problem."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1673106555,"post_id":74362226,"comment_id":132425489,"body_markdown":"@mang4521 would you mind describing what is present on &quot;profiler screenshot&quot;? Is it a `Sampler` or `Profiler` tab? How many executions of your scrape method it has captured during session? What is Java version?","body":"@mang4521 would you mind describing what is present on &quot;profiler screenshot&quot;? Is it a <code>Sampler</code> or <code>Profiler</code> tab? How many executions of your scrape method it has captured during session? What is Java version?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673270045,"post_id":74362226,"comment_id":132453705,"body_markdown":"@AndreyB.Panfilov This is a profiler tab. I have profiled the service using VisualVM. It has captured over 30K executions. I am on java 8.","body":"@AndreyB.Panfilov This is a profiler tab. I have profiled the service using VisualVM. It has captured over 30K executions. I am on java 8."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673270209,"post_id":74362226,"comment_id":132453761,"body_markdown":"@Holger redirecting the curl response into a file and then reading the file did not improve the CPU usage.The CPU usage remained same as what was described with my original solution.","body":"@Holger redirecting the curl response into a file and then reading the file did not improve the CPU usage.The CPU usage remained same as what was described with my original solution."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1673270675,"post_id":74362226,"comment_id":132453979,"body_markdown":"That’s understood. You said it multiple times. You keep ignoring the question: *which part* is consuming the CPU time when you perform the operation in two steps? Is it still the execution of the `curl` command or is it the reading of the result, which can only happen after the completion of the `curl` command in that case?","body":"That’s understood. You said it multiple times. You keep ignoring the question: <i>which part</i> is consuming the CPU time when you perform the operation in two steps? Is it still the execution of the <code>curl</code> command or is it the reading of the result, which can only happen after the completion of the <code>curl</code> command in that case?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673271174,"post_id":74362226,"comment_id":132454216,"body_markdown":"@Holger It is the process of reading the curl response as a stream which is the most CPU consuming process. Here the curl response is received as a stream and reading the stream takes up the most resource. Hope this answers your question.","body":"@Holger It is the process of reading the curl response as a stream which is the most CPU consuming process. Here the curl response is received as a stream and reading the stream takes up the most resource. Hope this answers your question."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1673273390,"post_id":74362226,"comment_id":132455076,"body_markdown":"So it boils down to “how to read a file into a string efficiently”. In your first example, you are reading line by line and appending to a `StringBuilder` which will result into a string without the line breaks. Is this a requirement or would an operation that reads the file as-is at once, keeping the line breaks, also work for you?","body":"So it boils down to “how to read a file into a string efficiently”. In your first example, you are reading line by line and appending to a <code>StringBuilder</code> which will result into a string without the line breaks. Is this a requirement or would an operation that reads the file as-is at once, keeping the line breaks, also work for you?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673275482,"post_id":74362226,"comment_id":132455972,"body_markdown":"@Holger Actually no. Once a cURL request is made, the response has to be read as a ```Stream```. Now reading the response itself from the stream is a CPU intensive process [irrespective of whether it is converted into a string or not]. I have also tested the process where the line breaks are not removed. No change in the CPU usage observed there.","body":"@Holger Actually no. Once a cURL request is made, the response has to be read as a <code>Stream</code>. Now reading the response itself from the stream is a CPU intensive process [irrespective of whether it is converted into a string or not]. I have also tested the process where the line breaks are not removed. No change in the CPU usage observed there."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1673277199,"post_id":74362226,"comment_id":132456643,"body_markdown":"@mang4521 using `StringBuilderWriter/WriterOutputStream` from commons-io seems to be bit faster than `BufferedReader#readLine()`,  writing to `ByteArrayOutputStream` and then calling `ByteArrayOutputStream.toString()` is faster than `StringBuilderWriter/WriterOutputStream` (I would think about pooling `ByteArrayOutputStream` objects), btw, what is your throughput expectations if it currently spends 81 secs for 30K executions (more that 300 rps)?","body":"@mang4521 using <code>StringBuilderWriter&#47;WriterOutputStream</code> from commons-io seems to be bit faster than <code>BufferedReader#readLine()</code>,  writing to <code>ByteArrayOutputStream</code> and then calling <code>ByteArrayOutputStream.toString()</code> is faster than <code>StringBuilderWriter&#47;WriterOutputStream</code> (I would think about pooling <code>ByteArrayOutputStream</code> objects), btw, what is your throughput expectations if it currently spends 81 secs for 30K executions (more that 300 rps)?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673278038,"post_id":74362226,"comment_id":132456985,"body_markdown":"@AndreyB.Panfilov to be honest, speed isn&#39;t my primary concern here but the usage of CPU. My bandwidth would be around 25TPS per instance. There aren&#39;t expectations in terms of throughput atm.","body":"@AndreyB.Panfilov to be honest, speed isn&#39;t my primary concern here but the usage of CPU. My bandwidth would be around 25TPS per instance. There aren&#39;t expectations in terms of throughput atm."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1673278468,"post_id":74362226,"comment_id":132457156,"body_markdown":"Please stop interpreting everything I write as a question whether it changes the CPU usage. You don’t know what I would suggest, so you can’t know whether it will change the CPU usage. I asked about your requirements regarding the result. Your code example reads into a `StringBuilder`, eventually producing a single `String`. Now you write you need a `Stream`. The most efficient way to read a file into a single string is [`readString`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#readString(java.nio.file.Path)), by the way. Unfortunately not for Java&#160;8.","body":"Please stop interpreting everything I write as a question whether it changes the CPU usage. You don’t know what I would suggest, so you can’t know whether it will change the CPU usage. I asked about your requirements regarding the result. Your code example reads into a <code>StringBuilder</code>, eventually producing a single <code>String</code>. Now you write you need a <code>Stream</code>. The most efficient way to read a file into a single string is <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#readString(java.nio.file.Path)\" rel=\"nofollow noreferrer\"><code>readString</code></a>, by the way. Unfortunately not for Java 8."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673280869,"post_id":74362226,"comment_id":132458208,"body_markdown":"@Holger I am looking out for certain text in the response string. This I can accomplish either by removing the line breaks or by keeping the response string as is. Either case I can devise a ```java.util.regex.Matcher``` search regex.","body":"@Holger I am looking out for certain text in the response string. This I can accomplish either by removing the line breaks or by keeping the response string as is. Either case I can devise a <code>java.util.regex.Matcher</code> search regex."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1673290094,"post_id":74362226,"comment_id":132461293,"body_markdown":"That’s an important information. For example, you don’t need to call `toString()` on the `StringBuilder`, as the regex engine operates on the `CharSequence` interface, so you can search the `StringBuilder` directly. But if the pattern can not span multiple lines, you can simply perform a match attempt on each line right after reading it, instead of assembling the lines to a big string. You can also try `Scanner`. For the other approach, using the temporary file, you can also check [this answer](https://stackoverflow.com/a/52062570/2711488) for efficient pattern matching options.","body":"That’s an important information. For example, you don’t need to call <code>toString()</code> on the <code>StringBuilder</code>, as the regex engine operates on the <code>CharSequence</code> interface, so you can search the <code>StringBuilder</code> directly. But if the pattern can not span multiple lines, you can simply perform a match attempt on each line right after reading it, instead of assembling the lines to a big string. You can also try <code>Scanner</code>. For the other approach, using the temporary file, you can also check <a href=\"https://stackoverflow.com/a/52062570/2711488\">this answer</a> for efficient pattern matching options."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673332450,"post_id":74362226,"comment_id":132468951,"body_markdown":"@Holger Certainly let me take a look. What if I still want to turn the response into a string [as a future reference]? Are there efficient ways of handling this?","body":"@Holger Certainly let me take a look. What if I still want to turn the response into a string [as a future reference]? Are there efficient ways of handling this?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1673337264,"post_id":74362226,"comment_id":132470114,"body_markdown":"As said, the most efficient solution is to upgrade to a recent Java version and use [`Files.readString`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#readString(java.nio.file.Path)). In the best case, it does a single read and no copy operations, as it can access internals when converting the buffer to a string, which no other solution can. This depends on the chosen charset encoding and actual contents. Which has been discussed in [this answer](https://stackoverflow.com/a/70258672/2711488), for example.","body":"As said, the most efficient solution is to upgrade to a recent Java version and use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#readString(java.nio.file.Path)\" rel=\"nofollow noreferrer\"><code>Files.readString</code></a>. In the best case, it does a single read and no copy operations, as it can access internals when converting the buffer to a string, which no other solution can. This depends on the chosen charset encoding and actual contents. Which has been discussed in <a href=\"https://stackoverflow.com/a/70258672/2711488\">this answer</a>, for example."}],"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"comment_count":42,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":409,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675449091,"creation_date":1667916895,"question_id":74362226,"body_markdown":"I have a piece of code which uses `ProcessBuilder` to run a shell command [cURL] and the response from the command is pretty huge [webpage content].\r\n\r\nI am utilising the `BufferedReader` to read the response from `ProcessBuilder` as shown below\r\n\r\n```java\r\nStringBuilder sb = new StringBuilder();\r\nProcessBuilder processBuilder = new ProcessBuilder();\r\nList&lt;String&gt; args = getArgs(&quot;url_to_be_passed&quot;);  // Getting my ProcessBuilder args here\r\nprocessBuilder.command(args);\r\nprocessBuilder.redirectErrorStream(true);\r\nProcess proc = processBuilder.start();\r\nBufferedReader br = null;\r\ntry {\r\n    InputStream inpc = proc.getInputStream();\r\n\r\n    /** Beginning of CPU intensive process **/\r\n    br = new BufferedReader(new InputStreamReader(inpc));\r\n    String line;\r\n    while ((line = br.readLine()) != null)\r\n        sb.append(line);\r\n\r\n    /** End of CPU intensive process **/\r\n\r\n    boolean termination = proc.waitFor(15, TimeUnit.SECONDS);\r\n    if (!termination)\r\n        throw new SocketTimeoutException(&quot;Socket Timed out&quot;);\r\n} finally {\r\n    if(null != br)\r\n        br.close();\r\n    proc.destroy();\r\n}\r\nString data = sb.toString();   // Convert data from ProcessBuilder into a String\r\n```\r\n\r\nThe getArgs() method is as follows:\r\n\r\n```\r\nprivate List&lt;String&gt; getArgs(String url) {\r\n        List&lt;String&gt; args = new LinkedList&lt;&gt;();\r\n        args.add(&quot;curl&quot;);\r\n        args.add(&quot;-L&quot;);\r\n        args.add(&quot;--silent&quot;);\r\n        args.add(&quot;--write-out&quot;);\r\n        args.add(&quot;HTTPSTATUS:%{http_code}&quot;);\r\n        args.add(url);\r\n        args.add(&quot;-XGET&quot;);\r\n        \r\n        args.add(&quot;--compressed&quot;);\r\n        args.add(&quot;--connect-timeout&quot;);\r\n        args.add(&quot;10&quot;);\r\n        \r\n        return args;\r\n    }\r\n```\r\n\r\nI have profiled this piece of code using VisualVM and the screenshot of the CPU intensive process is as shown below:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OgMI4.png\r\n\r\nMy queries are as follows:\r\n\r\n* What is the best way to convert the response from `ProcessBuilder` into a `String`?\r\n* If using `BufferedReader` indeed is a good way to read response from `ProcessBuilder`, how \r\n  to make it more CPU friendly?","title":"Reducing CPU usage with ProcessBuilder and BufferedWriter","body":"<p>I have a piece of code which uses <code>ProcessBuilder</code> to run a shell command [cURL] and the response from the command is pretty huge [webpage content].</p>\n<p>I am utilising the <code>BufferedReader</code> to read the response from <code>ProcessBuilder</code> as shown below</p>\n<pre class=\"lang-java prettyprint-override\"><code>StringBuilder sb = new StringBuilder();\nProcessBuilder processBuilder = new ProcessBuilder();\nList&lt;String&gt; args = getArgs(&quot;url_to_be_passed&quot;);  // Getting my ProcessBuilder args here\nprocessBuilder.command(args);\nprocessBuilder.redirectErrorStream(true);\nProcess proc = processBuilder.start();\nBufferedReader br = null;\ntry {\n    InputStream inpc = proc.getInputStream();\n\n    /** Beginning of CPU intensive process **/\n    br = new BufferedReader(new InputStreamReader(inpc));\n    String line;\n    while ((line = br.readLine()) != null)\n        sb.append(line);\n\n    /** End of CPU intensive process **/\n\n    boolean termination = proc.waitFor(15, TimeUnit.SECONDS);\n    if (!termination)\n        throw new SocketTimeoutException(&quot;Socket Timed out&quot;);\n} finally {\n    if(null != br)\n        br.close();\n    proc.destroy();\n}\nString data = sb.toString();   // Convert data from ProcessBuilder into a String\n</code></pre>\n<p>The getArgs() method is as follows:</p>\n<pre><code>private List&lt;String&gt; getArgs(String url) {\n        List&lt;String&gt; args = new LinkedList&lt;&gt;();\n        args.add(&quot;curl&quot;);\n        args.add(&quot;-L&quot;);\n        args.add(&quot;--silent&quot;);\n        args.add(&quot;--write-out&quot;);\n        args.add(&quot;HTTPSTATUS:%{http_code}&quot;);\n        args.add(url);\n        args.add(&quot;-XGET&quot;);\n        \n        args.add(&quot;--compressed&quot;);\n        args.add(&quot;--connect-timeout&quot;);\n        args.add(&quot;10&quot;);\n        \n        return args;\n    }\n</code></pre>\n<p>I have profiled this piece of code using VisualVM and the screenshot of the CPU intensive process is as shown below:</p>\n<p><a href=\"https://i.stack.imgur.com/OgMI4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OgMI4.png\" alt=\"enter image description here\" /></a></p>\n<p>My queries are as follows:</p>\n<ul>\n<li>What is the best way to convert the response from <code>ProcessBuilder</code> into a <code>String</code>?</li>\n<li>If using <code>BufferedReader</code> indeed is a good way to read response from <code>ProcessBuilder</code>, how\nto make it more CPU friendly?</li>\n</ul>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":3435599,"reputation":4037,"user_id":2878796,"display_name":"UnholySheep"},"score":0,"creation_date":1659202433,"post_id":73177768,"comment_id":129240008,"body_markdown":"I would have called `toCharArray` then changed every third index in that array to `&#39;X&#39;` then constructed a new string from that array","body":"I would have called <code>toCharArray</code> then changed every third index in that array to <code>&#39;X&#39;</code> then constructed a new string from that array"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1659204486,"post_id":73177768,"comment_id":129240412,"body_markdown":"If the input string is **abcdefghij** then shouldn&#39;t the output string be **abXdeXghXj** (rather than `abXdeXfgXij`) ?","body":"If the input string is <b>abcdefghij</b> then shouldn&#39;t the output string be <b>abXdeXghXj</b> (rather than <code>abXdeXfgXij</code>) ?"}],"answers":[{"tags":[],"owner":{"account_id":22112469,"reputation":74,"user_id":16367144,"display_name":"SquidXTV"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1659204153,"creation_date":1659204153,"answer_id":73177957,"question_id":73177768,"body_markdown":"this works fine for me\r\n```\r\nString ans = &quot;&quot;;\r\nString a = &quot;abcdefghij&quot;;\r\nfor(int i = 1; i&lt;=a.length(); i++) {\r\n    if(i%3==0) {\r\n        ans += &quot;X&quot;;\r\n    } else {\r\n        ans += a.charAt(i-1);\r\n    }\r\n}\r\nSystem.out.println(ans);\r\n```","title":"Change letters of a string at certain points","body":"<p>this works fine for me</p>\n<pre><code>String ans = &quot;&quot;;\nString a = &quot;abcdefghij&quot;;\nfor(int i = 1; i&lt;=a.length(); i++) {\n    if(i%3==0) {\n        ans += &quot;X&quot;;\n    } else {\n        ans += a.charAt(i-1);\n    }\n}\nSystem.out.println(ans);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1468853,"reputation":3627,"user_id":1380933,"display_name":"Vadik Sirekanyan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659204980,"creation_date":1659204469,"answer_id":73177997,"question_id":73177768,"body_markdown":"String concatenation doesn&#39;t work optimally because of string is copying on every step of the loop, consider using `StringBuilder`.\r\n\r\nTo solve your problem, just iterate on every char of the input string and copy every char to the output string builder, except for every third character (the character which index `i` satisfies the equality `i % 3 == 2`).\r\n\r\nYou will get something like this:\r\n\r\n```java\r\nString input = &quot;abcdefghijk&quot;;\r\nStringBuilder output = new StringBuilder();\r\nfor (int i = 0; i &lt; input.length(); i++) {\r\n    if (i % 3 == 2) {\r\n        output.append(&quot;X&quot;);\r\n    } else {\r\n        output.append(input.charAt(i));\r\n    }\r\n}\r\nString ans = output.toString();\r\n```","title":"Change letters of a string at certain points","body":"<p>String concatenation doesn't work optimally because of string is copying on every step of the loop, consider using <code>StringBuilder</code>.</p>\n<p>To solve your problem, just iterate on every char of the input string and copy every char to the output string builder, except for every third character (the character which index <code>i</code> satisfies the equality <code>i % 3 == 2</code>).</p>\n<p>You will get something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String input = &quot;abcdefghijk&quot;;\nStringBuilder output = new StringBuilder();\nfor (int i = 0; i &lt; input.length(); i++) {\n    if (i % 3 == 2) {\n        output.append(&quot;X&quot;);\n    } else {\n        output.append(input.charAt(i));\n    }\n}\nString ans = output.toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659205617,"creation_date":1659205617,"answer_id":73178125,"question_id":73177768,"body_markdown":"Simpler and shorter use regex:\r\n\r\n    String a     = &quot;abcabcabcab&quot;;\r\n    String regex = &quot;(..)(.)&quot;;\r\n    String ans   = a.replaceAll(regex,&quot;$1X&quot;);\r\n\r\nStrings should not be concatenated using &#39;+&#39; in a loop. If, how ever, you want to stick to that approach you should only itereate to the largest number multiple of three which is less than your input length. You also need to append possiblly not appended chars if your input length is not a multiple of three after the loop:\r\n\r\n    String a = &quot;abcabcabcab&quot;;\r\n    String ans = &quot;&quot;;\r\n\r\n    for (int j = 0; j &lt; a.length() / 3 * 3; j += 3) {\r\n        ans += a.substring(j, j+2) + &#39;X&#39;;\r\n    }\r\n    \r\n    ans += a.substring(ans.length());\r\n\r\n\r\n\r\n","title":"Change letters of a string at certain points","body":"<p>Simpler and shorter use regex:</p>\n<pre><code>String a     = &quot;abcabcabcab&quot;;\nString regex = &quot;(..)(.)&quot;;\nString ans   = a.replaceAll(regex,&quot;$1X&quot;);\n</code></pre>\n<p>Strings should not be concatenated using '+' in a loop. If, how ever, you want to stick to that approach you should only itereate to the largest number multiple of three which is less than your input length. You also need to append possiblly not appended chars if your input length is not a multiple of three after the loop:</p>\n<pre><code>String a = &quot;abcabcabcab&quot;;\nString ans = &quot;&quot;;\n\nfor (int j = 0; j &lt; a.length() / 3 * 3; j += 3) {\n    ans += a.substring(j, j+2) + 'X';\n}\n\nans += a.substring(ans.length());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6097291,"reputation":400,"user_id":4757683,"display_name":"Shaik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675449077,"creation_date":1675449077,"answer_id":75339737,"question_id":73177768,"body_markdown":"    public static String replaceEvery3rdChar(String input) \r\n    {\r\n         StringBuilder result = new StringBuilder();\r\n         for (int i = 0; i &lt; input.length(); i++) \r\n         {\r\n            if ((i + 1) % 3 == 0)\r\n            {\r\n              result.append(&quot;X&quot;);\r\n            } \r\n            else\r\n            {\r\n              result.append(input.charAt(i));\r\n            }\r\n         }\r\n         return result.toString();\r\n      }","title":"Change letters of a string at certain points","body":"<pre><code>public static String replaceEvery3rdChar(String input) \n{\n     StringBuilder result = new StringBuilder();\n     for (int i = 0; i &lt; input.length(); i++) \n     {\n        if ((i + 1) % 3 == 0)\n        {\n          result.append(&quot;X&quot;);\n        } \n        else\n        {\n          result.append(input.charAt(i));\n        }\n     }\n     return result.toString();\n  }\n</code></pre>\n"}],"owner":{"account_id":20904920,"reputation":69,"user_id":17512245,"display_name":"Nikolas Trapp"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73177957,"answer_count":4,"score":1,"last_activity_date":1675449077,"creation_date":1659202118,"question_id":73177768,"body_markdown":"I get a string from the keyboard and I want every 3 letters in the string to change the original letter to an &quot;X&quot;, but I&#39;m having trouble doing this algorithm.\r\n\r\nfor example: if I have the string **abcdefghij** I have to return the string **abXdeXfgXij**\r\nor if i have **hellokit** string i need to return **heXloXit**\r\n\r\nI&#39;ve done this so far:\r\n```\r\nString ans = &quot;&quot;;\r\nString a = &quot;abcdefghijk&quot;;\r\n\t\t\t  \r\nfor (int j = 0; j &lt; a.length(); j += 3) {\r\n\tans += a.substring(j, j+2) + x;\r\n}\r\n```\r\n\r\nbut it can happen to give the ```StringIndexOutOfBoundsException``` error.\r\n\r\nhow can i do this without resulting in error?\r\n\r\n","title":"Change letters of a string at certain points","body":"<p>I get a string from the keyboard and I want every 3 letters in the string to change the original letter to an &quot;X&quot;, but I'm having trouble doing this algorithm.</p>\n<p>for example: if I have the string <strong>abcdefghij</strong> I have to return the string <strong>abXdeXfgXij</strong>\nor if i have <strong>hellokit</strong> string i need to return <strong>heXloXit</strong></p>\n<p>I've done this so far:</p>\n<pre><code>String ans = &quot;&quot;;\nString a = &quot;abcdefghijk&quot;;\n              \nfor (int j = 0; j &lt; a.length(); j += 3) {\n    ans += a.substring(j, j+2) + x;\n}\n</code></pre>\n<p>but it can happen to give the <code>StringIndexOutOfBoundsException</code> error.</p>\n<p>how can i do this without resulting in error?</p>\n"},{"tags":["java","string","floating-point","format","double"],"comments":[{"owner":{"account_id":232,"reputation":29734,"user_id":287,"accept_rate":91,"display_name":"basszero"},"score":0,"creation_date":1238541072,"post_id":703396,"comment_id":516115,"body_markdown":"If all you want are integers, why not use a long? You get more bang at 2^63-1, no awkward formatting, and better performance.","body":"If all you want are integers, why not use a long? You get more bang at 2^63-1, no awkward formatting, and better performance."},{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":18,"creation_date":1238541154,"post_id":703396,"comment_id":516122,"body_markdown":"Because some values are actually doubles","body":"Because some values are actually doubles"},{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":2,"creation_date":1319271498,"post_id":703396,"comment_id":9584640,"body_markdown":"Some cases where this problem occured was a bug fixed in JDK 7: http://stackoverflow.com/questions/7564525/why-do-some-floating-point-numbers-appear-with-a-trailing-0","body":"Some cases where this problem occured was a bug fixed in JDK 7: <a href=\"http://stackoverflow.com/questions/7564525/why-do-some-floating-point-numbers-appear-with-a-trailing-0\" title=\"why do some floating point numbers appear with a trailing 0\">stackoverflow.com/questions/7564525/&hellip;</a>"},{"owner":{"account_id":4670132,"reputation":5867,"user_id":3782119,"display_name":"Shayan Amani"},"score":0,"creation_date":1575048509,"post_id":703396,"comment_id":104449363,"body_markdown":"`System.out.println(&quot;YOUR STRING&quot; + YOUR_DOUBLE_VARIABLE);`","body":"<code>System.out.println(&quot;YOUR STRING&quot; + YOUR_DOUBLE_VARIABLE);</code>"},{"owner":{"account_id":4297513,"reputation":2662,"user_id":3512164,"accept_rate":47,"display_name":"Ibrahim Disouki"},"score":0,"creation_date":1649071466,"post_id":703396,"comment_id":126775297,"body_markdown":"This is the correct [answer](https://stackoverflow.com/a/25542023/3512164)","body":"This is the correct <a href=\"https://stackoverflow.com/a/25542023/3512164\">answer</a>"}],"answers":[{"tags":[],"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"down_vote_count":16,"up_vote_count":33,"is_accepted":false,"score":17,"last_activity_date":1607423139,"creation_date":1238540635,"answer_id":703424,"question_id":703396,"body_markdown":"Naw, never mind. The performance loss due to string manipulation is zero.\r\n\r\nAnd here&#39;s the code to trim the end after `%f`:\r\n\r\n    private static String trimTrailingZeros(String number) {\r\n        if(!number.contains(&quot;.&quot;)) {\r\n            return number;\r\n        }\r\n\r\n        return number.replaceAll(&quot;\\\\.?0*$&quot;, &quot;&quot;);\r\n    }\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>Naw, never mind. The performance loss due to string manipulation is zero.</p>\n<p>And here's the code to trim the end after <code>%f</code>:</p>\n<pre><code>private static String trimTrailingZeros(String number) {\n    if(!number.contains(&quot;.&quot;)) {\n        return number;\n    }\n\n    return number.replaceAll(&quot;\\\\.?0*$&quot;, &quot;&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":37284,"reputation":4062,"user_id":106553,"accept_rate":17,"display_name":"Jeremy Slade"},"down_vote_count":158,"up_vote_count":394,"is_accepted":false,"score":236,"last_activity_date":1607423165,"creation_date":1250225565,"answer_id":1276096,"question_id":703396,"body_markdown":"    String.format(&quot;%.2f&quot;, value);\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<pre><code>String.format(&quot;%.2f&quot;, value);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":999347,"reputation":1,"user_id":1014558,"display_name":"Kadi"},"down_vote_count":13,"up_vote_count":2,"is_accepted":false,"score":-11,"last_activity_date":1319632765,"creation_date":1319632765,"answer_id":7902679,"question_id":703396,"body_markdown":"    String s = &quot;1.210000&quot;;\r\n    while (s.endsWith(&quot;0&quot;)){\r\n    \ts = (s.substring(0, s.length() - 1));\r\n    }\r\n\r\nThis will make the string to drop the tailing 0-s.","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<pre><code>String s = \"1.210000\";\nwhile (s.endsWith(\"0\")){\n    s = (s.substring(0, s.length() - 1));\n}\n</code></pre>\n\n<p>This will make the string to drop the tailing 0-s.</p>\n"},{"tags":[],"owner":{"account_id":444584,"reputation":8231,"user_id":836487,"accept_rate":64,"display_name":"sethu"},"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1607423596,"creation_date":1336554255,"answer_id":10512935,"question_id":703396,"body_markdown":"The best way to do this is as below:\r\n\r\n    public class Test {\r\n\r\n        public static void main(String args[]){\r\n            System.out.println(String.format(&quot;%s something&quot;, new Double(3.456)));\r\n            System.out.println(String.format(&quot;%s something&quot;, new Double(3.456234523452)));\r\n            System.out.println(String.format(&quot;%s something&quot;, new Double(3.45)));\r\n            System.out.println(String.format(&quot;%s something&quot;, new Double(3)));\r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n```lang-none\r\n3.456 something\r\n3.456234523452 something\r\n3.45 something\r\n3.0 something\r\n```\r\n\r\nThe only issue is the last one where .0 doesn&#39;t get removed. But if you are able to live with that then this works best. %.2f will round it to the last two decimal digits. So will DecimalFormat. If you need all the decimal places, but not the trailing zeros then this works best.\r\n\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>The best way to do this is as below:</p>\n<pre><code>public class Test {\n\n    public static void main(String args[]){\n        System.out.println(String.format(&quot;%s something&quot;, new Double(3.456)));\n        System.out.println(String.format(&quot;%s something&quot;, new Double(3.456234523452)));\n        System.out.println(String.format(&quot;%s something&quot;, new Double(3.45)));\n        System.out.println(String.format(&quot;%s something&quot;, new Double(3)));\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>3.456 something\n3.456234523452 something\n3.45 something\n3.0 something\n</code></pre>\n<p>The only issue is the last one where .0 doesn't get removed. But if you are able to live with that then this works best. %.2f will round it to the last two decimal digits. So will DecimalFormat. If you need all the decimal places, but not the trailing zeros then this works best.</p>\n"},{"tags":[],"owner":{"account_id":140605,"reputation":2523,"user_id":347051,"accept_rate":36,"display_name":"Hiep"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1607424065,"creation_date":1353963340,"answer_id":13573019,"question_id":703396,"body_markdown":"I made a `DoubleFormatter` to efficiently convert a great numbers of double values to a nice/presentable string:\r\n\r\n    double horribleNumber = 3598945.141658554548844;\r\n    DoubleFormatter df = new DoubleFormatter(4, 6); // 4 = MaxInteger, 6 = MaxDecimal\r\n    String beautyDisplay = df.format(horribleNumber);\r\n\r\n- If the integer part of V has more than MaxInteger =&gt; display V in scientific format (1.2345E+30). Otherwise, display in normal format (124.45678).\r\n- the MaxDecimal decide numbers of decimal digits (trim with [bankers&#39; rounding][1])\r\n\r\nHere the code:\r\n\r\n    import java.math.RoundingMode;\r\n    import java.text.DecimalFormat;\r\n    import java.text.DecimalFormatSymbols;\r\n    import java.text.NumberFormat;\r\n    import java.util.Locale;\r\n\r\n    import com.google.common.base.Preconditions;\r\n    import com.google.common.base.Strings;\r\n\r\n    /**\r\n     * Convert a double to a beautiful String (US-local):\r\n     *\r\n     * double horribleNumber = 3598945.141658554548844;\r\n     * DoubleFormatter df = new DoubleFormatter(4,6);\r\n     * String beautyDisplay = df.format(horribleNumber);\r\n     * String beautyLabel = df.formatHtml(horribleNumber);\r\n     *\r\n     * Manipulate 3 instances of NumberFormat to efficiently format a great number of double values.\r\n     * (avoid to create an object NumberFormat each call of format()).\r\n     *\r\n     * 3 instances of NumberFormat will be reused to format a value v:\r\n     *\r\n     * if v &lt; EXP_DOWN, uses nfBelow\r\n     * if EXP_DOWN &lt;= v &lt;= EXP_UP, uses nfNormal\r\n     * if EXP_UP &lt; v, uses nfAbove\r\n     *\r\n     * nfBelow, nfNormal and nfAbove will be generated base on the precision_ parameter.\r\n     *\r\n     * @author: DUONG Phu-Hiep\r\n     */\r\n    public class DoubleFormatter\r\n    {\r\n        private static final double EXP_DOWN = 1.e-3;\r\n        private double EXP_UP; // always = 10^maxInteger\r\n        private int maxInteger_;\r\n        private int maxFraction_;\r\n        private NumberFormat nfBelow_;\r\n        private NumberFormat nfNormal_;\r\n        private NumberFormat nfAbove_;\r\n\r\n        private enum NumberFormatKind {Below, Normal, Above}\r\n\r\n        public DoubleFormatter(int maxInteger, int maxFraction){\r\n            setPrecision(maxInteger, maxFraction);\r\n        }\r\n\r\n        public void setPrecision(int maxInteger, int maxFraction){\r\n            Preconditions.checkArgument(maxFraction&gt;=0);\r\n            Preconditions.checkArgument(maxInteger&gt;0 &amp;&amp; maxInteger&lt;17);\r\n\r\n            if (maxFraction == maxFraction_ &amp;&amp; maxInteger_ == maxInteger) {\r\n                return;\r\n            }\r\n\r\n            maxFraction_ = maxFraction;\r\n            maxInteger_ = maxInteger;\r\n            EXP_UP =  Math.pow(10, maxInteger);\r\n            nfBelow_ = createNumberFormat(NumberFormatKind.Below);\r\n            nfNormal_ = createNumberFormat(NumberFormatKind.Normal);\r\n            nfAbove_ = createNumberFormat(NumberFormatKind.Above);\r\n        }\r\n\r\n        private NumberFormat createNumberFormat(NumberFormatKind kind) {\r\n\r\n            // If you do not use the Guava library, replace it with createSharp(precision);\r\n            final String sharpByPrecision = Strings.repeat(&quot;#&quot;, maxFraction_);\r\n\r\n            NumberFormat f = NumberFormat.getInstance(Locale.US);\r\n\r\n            // Apply bankers&#39; rounding:  this is the rounding mode that\r\n            // statistically minimizes cumulative error when applied\r\n            // repeatedly over a sequence of calculations\r\n            f.setRoundingMode(RoundingMode.HALF_EVEN);\r\n\r\n            if (f instanceof DecimalFormat) {\r\n                DecimalFormat df = (DecimalFormat) f;\r\n                DecimalFormatSymbols dfs = df.getDecimalFormatSymbols();\r\n\r\n                // Set group separator to space instead of comma\r\n\r\n                //dfs.setGroupingSeparator(&#39; &#39;);\r\n\r\n                // Set Exponent symbol to minus &#39;e&#39; instead of &#39;E&#39;\r\n                if (kind == NumberFormatKind.Above) {\r\n                    dfs.setExponentSeparator(&quot;e+&quot;); //force to display the positive sign in the exponent part\r\n                } else {\r\n                    dfs.setExponentSeparator(&quot;e&quot;);\r\n                }\r\n\r\n                df.setDecimalFormatSymbols(dfs);\r\n\r\n                // Use exponent format if v is outside of [EXP_DOWN,EXP_UP]\r\n\r\n                if (kind == NumberFormatKind.Normal) {\r\n                    if (maxFraction_ == 0) {\r\n                        df.applyPattern(&quot;#,##0&quot;);\r\n                    } else {\r\n                        df.applyPattern(&quot;#,##0.&quot;+sharpByPrecision);\r\n                    }\r\n                } else {\r\n                    if (maxFraction_ == 0) {\r\n                        df.applyPattern(&quot;0E0&quot;);\r\n                    } else {\r\n                        df.applyPattern(&quot;0.&quot;+sharpByPrecision+&quot;E0&quot;);\r\n                    }\r\n                }\r\n            }\r\n            return f;\r\n        }\r\n\r\n        public String format(double v) {\r\n            if (Double.isNaN(v)) {\r\n                return &quot;-&quot;;\r\n            }\r\n            if (v==0) {\r\n                return &quot;0&quot;;\r\n            }\r\n            final double absv = Math.abs(v);\r\n\r\n            if (absv&lt;EXP_DOWN) {\r\n                return nfBelow_.format(v);\r\n            }\r\n\r\n            if (absv&gt;EXP_UP) {\r\n                return nfAbove_.format(v);\r\n            }\r\n\r\n            return nfNormal_.format(v);\r\n        }\r\n\r\n        /**\r\n         * Format and higlight the important part (integer part &amp; exponent part)\r\n         */\r\n        public String formatHtml(double v) {\r\n            if (Double.isNaN(v)) {\r\n                return &quot;-&quot;;\r\n            }\r\n            return htmlize(format(v));\r\n        }\r\n\r\n        /**\r\n         * This is the base alogrithm: create a instance of NumberFormat for the value, then format it. It should\r\n         * not be used to format a great numbers of value\r\n         *\r\n         * We will never use this methode, it is here only to understanding the Algo principal:\r\n         *\r\n         * format v to string. precision_ is numbers of digits after decimal.\r\n         * if EXP_DOWN &lt;= abs(v) &lt;= EXP_UP, display the normal format: 124.45678\r\n         * otherwise display scientist format with: 1.2345e+30\r\n         *\r\n         * pre-condition: precision &gt;= 1\r\n         */\r\n        @Deprecated\r\n        public String formatInefficient(double v) {\r\n\r\n            // If you do not use Guava library, replace with createSharp(precision);\r\n            final String sharpByPrecision = Strings.repeat(&quot;#&quot;, maxFraction_);\r\n\r\n            final double absv = Math.abs(v);\r\n\r\n            NumberFormat f = NumberFormat.getInstance(Locale.US);\r\n\r\n            // Apply bankers&#39; rounding:  this is the rounding mode that\r\n            // statistically minimizes cumulative error when applied\r\n            // repeatedly over a sequence of calculations\r\n            f.setRoundingMode(RoundingMode.HALF_EVEN);\r\n\r\n            if (f instanceof DecimalFormat) {\r\n                DecimalFormat df = (DecimalFormat) f;\r\n                DecimalFormatSymbols dfs = df.getDecimalFormatSymbols();\r\n\r\n                // Set group separator to space instead of comma\r\n\r\n                dfs.setGroupingSeparator(&#39; &#39;);\r\n\r\n                // Set Exponent symbol to minus &#39;e&#39; instead of &#39;E&#39;\r\n\r\n                if (absv&gt;EXP_UP) {\r\n                    dfs.setExponentSeparator(&quot;e+&quot;); //force to display the positive sign in the exponent part\r\n                } else {\r\n                    dfs.setExponentSeparator(&quot;e&quot;);\r\n                }\r\n                df.setDecimalFormatSymbols(dfs);\r\n\r\n                //use exponent format if v is out side of [EXP_DOWN,EXP_UP]\r\n\r\n                if (absv&lt;EXP_DOWN || absv&gt;EXP_UP) {\r\n                    df.applyPattern(&quot;0.&quot;+sharpByPrecision+&quot;E0&quot;);\r\n                } else {\r\n                    df.applyPattern(&quot;#,##0.&quot;+sharpByPrecision);\r\n                }\r\n            }\r\n            return f.format(v);\r\n        }\r\n\r\n        /**\r\n         * Convert &quot;3.1416e+12&quot; to &quot;&lt;b&gt;3&lt;/b&gt;.1416e&lt;b&gt;+12&lt;/b&gt;&quot;\r\n         * It is a html format of a number which highlight the integer and exponent part\r\n         */\r\n        private static String htmlize(String s) {\r\n            StringBuilder resu = new StringBuilder(&quot;&lt;b&gt;&quot;);\r\n            int p1 = s.indexOf(&#39;.&#39;);\r\n\r\n            if (p1&gt;0) {\r\n                resu.append(s.substring(0, p1));\r\n                resu.append(&quot;&lt;/b&gt;&quot;);\r\n            } else {\r\n                p1 = 0;\r\n            }\r\n\r\n            int p2 = s.lastIndexOf(&#39;e&#39;);\r\n            if (p2&gt;0) {\r\n                resu.append(s.substring(p1, p2));\r\n                resu.append(&quot;&lt;b&gt;&quot;);\r\n                resu.append(s.substring(p2, s.length()));\r\n                resu.append(&quot;&lt;/b&gt;&quot;);\r\n            } else {\r\n                resu.append(s.substring(p1, s.length()));\r\n                if (p1==0){\r\n                    resu.append(&quot;&lt;/b&gt;&quot;);\r\n                }\r\n            }\r\n            return resu.toString();\r\n        }\r\n    }\r\n\r\nNote: I used two functions from the [Guava][2] library. If you don&#39;t use Guava, code it yourself:\r\n\r\n    /**\r\n     * Equivalent to Strings.repeat(&quot;#&quot;, n) of the Guava library:\r\n     */\r\n    private static String createSharp(int n) {\r\n        StringBuilder sb = new StringBuilder();\r\n        for (int i=0; i&lt;n; i++) {\r\n            sb.append(&#39;#&#39;);\r\n        }\r\n        return sb.toString();\r\n    }\r\n\r\n  [1]: https://en.wiktionary.org/wiki/bankers%27_rounding\r\n  [2]: https://en.wikipedia.org/wiki/Google_Guava\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>I made a <code>DoubleFormatter</code> to efficiently convert a great numbers of double values to a nice/presentable string:</p>\n<pre><code>double horribleNumber = 3598945.141658554548844;\nDoubleFormatter df = new DoubleFormatter(4, 6); // 4 = MaxInteger, 6 = MaxDecimal\nString beautyDisplay = df.format(horribleNumber);\n</code></pre>\n<ul>\n<li>If the integer part of V has more than MaxInteger =&gt; display V in scientific format (1.2345E+30). Otherwise, display in normal format (124.45678).</li>\n<li>the MaxDecimal decide numbers of decimal digits (trim with <a href=\"https://en.wiktionary.org/wiki/bankers%27_rounding\" rel=\"nofollow noreferrer\">bankers' rounding</a>)</li>\n</ul>\n<p>Here the code:</p>\n<pre><code>import java.math.RoundingMode;\nimport java.text.DecimalFormat;\nimport java.text.DecimalFormatSymbols;\nimport java.text.NumberFormat;\nimport java.util.Locale;\n\nimport com.google.common.base.Preconditions;\nimport com.google.common.base.Strings;\n\n/**\n * Convert a double to a beautiful String (US-local):\n *\n * double horribleNumber = 3598945.141658554548844;\n * DoubleFormatter df = new DoubleFormatter(4,6);\n * String beautyDisplay = df.format(horribleNumber);\n * String beautyLabel = df.formatHtml(horribleNumber);\n *\n * Manipulate 3 instances of NumberFormat to efficiently format a great number of double values.\n * (avoid to create an object NumberFormat each call of format()).\n *\n * 3 instances of NumberFormat will be reused to format a value v:\n *\n * if v &lt; EXP_DOWN, uses nfBelow\n * if EXP_DOWN &lt;= v &lt;= EXP_UP, uses nfNormal\n * if EXP_UP &lt; v, uses nfAbove\n *\n * nfBelow, nfNormal and nfAbove will be generated base on the precision_ parameter.\n *\n * @author: DUONG Phu-Hiep\n */\npublic class DoubleFormatter\n{\n    private static final double EXP_DOWN = 1.e-3;\n    private double EXP_UP; // always = 10^maxInteger\n    private int maxInteger_;\n    private int maxFraction_;\n    private NumberFormat nfBelow_;\n    private NumberFormat nfNormal_;\n    private NumberFormat nfAbove_;\n\n    private enum NumberFormatKind {Below, Normal, Above}\n\n    public DoubleFormatter(int maxInteger, int maxFraction){\n        setPrecision(maxInteger, maxFraction);\n    }\n\n    public void setPrecision(int maxInteger, int maxFraction){\n        Preconditions.checkArgument(maxFraction&gt;=0);\n        Preconditions.checkArgument(maxInteger&gt;0 &amp;&amp; maxInteger&lt;17);\n\n        if (maxFraction == maxFraction_ &amp;&amp; maxInteger_ == maxInteger) {\n            return;\n        }\n\n        maxFraction_ = maxFraction;\n        maxInteger_ = maxInteger;\n        EXP_UP =  Math.pow(10, maxInteger);\n        nfBelow_ = createNumberFormat(NumberFormatKind.Below);\n        nfNormal_ = createNumberFormat(NumberFormatKind.Normal);\n        nfAbove_ = createNumberFormat(NumberFormatKind.Above);\n    }\n\n    private NumberFormat createNumberFormat(NumberFormatKind kind) {\n\n        // If you do not use the Guava library, replace it with createSharp(precision);\n        final String sharpByPrecision = Strings.repeat(&quot;#&quot;, maxFraction_);\n\n        NumberFormat f = NumberFormat.getInstance(Locale.US);\n\n        // Apply bankers' rounding:  this is the rounding mode that\n        // statistically minimizes cumulative error when applied\n        // repeatedly over a sequence of calculations\n        f.setRoundingMode(RoundingMode.HALF_EVEN);\n\n        if (f instanceof DecimalFormat) {\n            DecimalFormat df = (DecimalFormat) f;\n            DecimalFormatSymbols dfs = df.getDecimalFormatSymbols();\n\n            // Set group separator to space instead of comma\n\n            //dfs.setGroupingSeparator(' ');\n\n            // Set Exponent symbol to minus 'e' instead of 'E'\n            if (kind == NumberFormatKind.Above) {\n                dfs.setExponentSeparator(&quot;e+&quot;); //force to display the positive sign in the exponent part\n            } else {\n                dfs.setExponentSeparator(&quot;e&quot;);\n            }\n\n            df.setDecimalFormatSymbols(dfs);\n\n            // Use exponent format if v is outside of [EXP_DOWN,EXP_UP]\n\n            if (kind == NumberFormatKind.Normal) {\n                if (maxFraction_ == 0) {\n                    df.applyPattern(&quot;#,##0&quot;);\n                } else {\n                    df.applyPattern(&quot;#,##0.&quot;+sharpByPrecision);\n                }\n            } else {\n                if (maxFraction_ == 0) {\n                    df.applyPattern(&quot;0E0&quot;);\n                } else {\n                    df.applyPattern(&quot;0.&quot;+sharpByPrecision+&quot;E0&quot;);\n                }\n            }\n        }\n        return f;\n    }\n\n    public String format(double v) {\n        if (Double.isNaN(v)) {\n            return &quot;-&quot;;\n        }\n        if (v==0) {\n            return &quot;0&quot;;\n        }\n        final double absv = Math.abs(v);\n\n        if (absv&lt;EXP_DOWN) {\n            return nfBelow_.format(v);\n        }\n\n        if (absv&gt;EXP_UP) {\n            return nfAbove_.format(v);\n        }\n\n        return nfNormal_.format(v);\n    }\n\n    /**\n     * Format and higlight the important part (integer part &amp; exponent part)\n     */\n    public String formatHtml(double v) {\n        if (Double.isNaN(v)) {\n            return &quot;-&quot;;\n        }\n        return htmlize(format(v));\n    }\n\n    /**\n     * This is the base alogrithm: create a instance of NumberFormat for the value, then format it. It should\n     * not be used to format a great numbers of value\n     *\n     * We will never use this methode, it is here only to understanding the Algo principal:\n     *\n     * format v to string. precision_ is numbers of digits after decimal.\n     * if EXP_DOWN &lt;= abs(v) &lt;= EXP_UP, display the normal format: 124.45678\n     * otherwise display scientist format with: 1.2345e+30\n     *\n     * pre-condition: precision &gt;= 1\n     */\n    @Deprecated\n    public String formatInefficient(double v) {\n\n        // If you do not use Guava library, replace with createSharp(precision);\n        final String sharpByPrecision = Strings.repeat(&quot;#&quot;, maxFraction_);\n\n        final double absv = Math.abs(v);\n\n        NumberFormat f = NumberFormat.getInstance(Locale.US);\n\n        // Apply bankers' rounding:  this is the rounding mode that\n        // statistically minimizes cumulative error when applied\n        // repeatedly over a sequence of calculations\n        f.setRoundingMode(RoundingMode.HALF_EVEN);\n\n        if (f instanceof DecimalFormat) {\n            DecimalFormat df = (DecimalFormat) f;\n            DecimalFormatSymbols dfs = df.getDecimalFormatSymbols();\n\n            // Set group separator to space instead of comma\n\n            dfs.setGroupingSeparator(' ');\n\n            // Set Exponent symbol to minus 'e' instead of 'E'\n\n            if (absv&gt;EXP_UP) {\n                dfs.setExponentSeparator(&quot;e+&quot;); //force to display the positive sign in the exponent part\n            } else {\n                dfs.setExponentSeparator(&quot;e&quot;);\n            }\n            df.setDecimalFormatSymbols(dfs);\n\n            //use exponent format if v is out side of [EXP_DOWN,EXP_UP]\n\n            if (absv&lt;EXP_DOWN || absv&gt;EXP_UP) {\n                df.applyPattern(&quot;0.&quot;+sharpByPrecision+&quot;E0&quot;);\n            } else {\n                df.applyPattern(&quot;#,##0.&quot;+sharpByPrecision);\n            }\n        }\n        return f.format(v);\n    }\n\n    /**\n     * Convert &quot;3.1416e+12&quot; to &quot;&lt;b&gt;3&lt;/b&gt;.1416e&lt;b&gt;+12&lt;/b&gt;&quot;\n     * It is a html format of a number which highlight the integer and exponent part\n     */\n    private static String htmlize(String s) {\n        StringBuilder resu = new StringBuilder(&quot;&lt;b&gt;&quot;);\n        int p1 = s.indexOf('.');\n\n        if (p1&gt;0) {\n            resu.append(s.substring(0, p1));\n            resu.append(&quot;&lt;/b&gt;&quot;);\n        } else {\n            p1 = 0;\n        }\n\n        int p2 = s.lastIndexOf('e');\n        if (p2&gt;0) {\n            resu.append(s.substring(p1, p2));\n            resu.append(&quot;&lt;b&gt;&quot;);\n            resu.append(s.substring(p2, s.length()));\n            resu.append(&quot;&lt;/b&gt;&quot;);\n        } else {\n            resu.append(s.substring(p1, s.length()));\n            if (p1==0){\n                resu.append(&quot;&lt;/b&gt;&quot;);\n            }\n        }\n        return resu.toString();\n    }\n}\n</code></pre>\n<p>Note: I used two functions from the <a href=\"https://en.wikipedia.org/wiki/Google_Guava\" rel=\"nofollow noreferrer\">Guava</a> library. If you don't use Guava, code it yourself:</p>\n<pre><code>/**\n * Equivalent to Strings.repeat(&quot;#&quot;, n) of the Guava library:\n */\nprivate static String createSharp(int n) {\n    StringBuilder sb = new StringBuilder();\n    for (int i=0; i&lt;n; i++) {\n        sb.append('#');\n    }\n    return sb.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":508569,"reputation":16492,"user_id":1288598,"display_name":"JasonD"},"down_vote_count":19,"up_vote_count":472,"is_accepted":true,"score":453,"last_activity_date":1410724782,"creation_date":1357149121,"answer_id":14126736,"question_id":703396,"body_markdown":"If the idea is to print integers stored as doubles as if they are integers, and otherwise print the doubles with the minimum necessary precision:\r\n\r\n    public static String fmt(double d)\r\n    {\r\n        if(d == (long) d)\r\n            return String.format(&quot;%d&quot;,(long)d);\r\n        else\r\n            return String.format(&quot;%s&quot;,d);\r\n    }\r\n    \r\nProduces:\r\n\r\n    232\r\n    0.18\r\n    1237875192\r\n    4.58\r\n    0\r\n    1.2345\r\n\r\nAnd does not rely on string manipulation.\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>If the idea is to print integers stored as doubles as if they are integers, and otherwise print the doubles with the minimum necessary precision:</p>\n\n<pre><code>public static String fmt(double d)\n{\n    if(d == (long) d)\n        return String.format(\"%d\",(long)d);\n    else\n        return String.format(\"%s\",d);\n}\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>232\n0.18\n1237875192\n4.58\n0\n1.2345\n</code></pre>\n\n<p>And does not rely on string manipulation.</p>\n"},{"tags":[],"owner":{"account_id":2217579,"reputation":291,"user_id":1957826,"accept_rate":80,"display_name":"kamal"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1369253382,"creation_date":1357885994,"answer_id":14272941,"question_id":703396,"body_markdown":"    String s = String.valueof(&quot;your int variable&quot;);\r\n    while (g.endsWith(&quot;0&quot;) &amp;&amp; g.contains(&quot;.&quot;)) {\r\n        g = g.substring(0, g.length() - 1);\r\n        if (g.endsWith(&quot;.&quot;))\r\n        {\r\n            g = g.substring(0, g.length() - 1);\r\n        }\r\n    }","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<pre><code>String s = String.valueof(\"your int variable\");\nwhile (g.endsWith(\"0\") &amp;&amp; g.contains(\".\")) {\n    g = g.substring(0, g.length() - 1);\n    if (g.endsWith(\".\"))\n    {\n        g = g.substring(0, g.length() - 1);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1607424233,"creation_date":1368918218,"answer_id":16629838,"question_id":703396,"body_markdown":"Here are two ways to achieve it. First, the shorter (and probably better) way:\r\n\r\n    public static String formatFloatToString(final float f)\r\n    {\r\n      final int i = (int)f;\r\n      if(f == i)\r\n        return Integer.toString(i);\r\n      return Float.toString(f);\r\n    }\r\n\r\nAnd here&#39;s the longer and probably worse way:\r\n\r\n    public static String formatFloatToString(final float f)\r\n    {\r\n      final String s = Float.toString(f);\r\n      int dotPos = -1;\r\n      for(int i=0; i&lt;s.length(); ++i)\r\n        if(s.charAt(i) == &#39;.&#39;)\r\n        {\r\n          dotPos = i;\r\n          break;\r\n        }\r\n\r\n      if(dotPos == -1)\r\n        return s;\r\n\r\n      int end = dotPos;\r\n      for(int i = dotPos + 1; i&lt;s.length(); ++i)\r\n      {\r\n        final char c = s.charAt(i);\r\n        if(c != &#39;0&#39;)\r\n          end = i + 1;\r\n      }\r\n      final String result = s.substring(0, end);\r\n      return result;\r\n    }\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>Here are two ways to achieve it. First, the shorter (and probably better) way:</p>\n<pre><code>public static String formatFloatToString(final float f)\n{\n  final int i = (int)f;\n  if(f == i)\n    return Integer.toString(i);\n  return Float.toString(f);\n}\n</code></pre>\n<p>And here's the longer and probably worse way:</p>\n<pre><code>public static String formatFloatToString(final float f)\n{\n  final String s = Float.toString(f);\n  int dotPos = -1;\n  for(int i=0; i&lt;s.length(); ++i)\n    if(s.charAt(i) == '.')\n    {\n      dotPos = i;\n      break;\n    }\n\n  if(dotPos == -1)\n    return s;\n\n  int end = dotPos;\n  for(int i = dotPos + 1; i&lt;s.length(); ++i)\n  {\n    final char c = s.charAt(i);\n    if(c != '0')\n      end = i + 1;\n  }\n  final String result = s.substring(0, end);\n  return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":407719,"reputation":3158,"user_id":777961,"accept_rate":51,"display_name":"Martin Klosi"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1369334492,"creation_date":1369334492,"answer_id":16721517,"question_id":703396,"body_markdown":"Here is an answer that actually works (combination of different answers here)\r\n\r\n\tpublic static String removeTrailingZeros(double f)\r\n\t{\r\n\t    if(f == (int)f) {\r\n\t        return String.format(&quot;%d&quot;, (int)f);\r\n\t    }\r\n\t    return String.format(&quot;%f&quot;, f).replaceAll(&quot;0*$&quot;, &quot;&quot;);\r\n\t}","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>Here is an answer that actually works (combination of different answers here)</p>\n\n<pre><code>public static String removeTrailingZeros(double f)\n{\n    if(f == (int)f) {\n        return String.format(\"%d\", (int)f);\n    }\n    return String.format(\"%f\", f).replaceAll(\"0*$\", \"\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":387941,"reputation":6875,"user_id":974531,"accept_rate":88,"display_name":"Rok Strniša"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1391983866,"creation_date":1391983866,"answer_id":21665735,"question_id":703396,"body_markdown":"On my machine, the following function is roughly 7 times faster than the function provided by [JasonD&#39;s answer](https://stackoverflow.com/a/14126736/974531), since it avoids `String.format`:\r\n\r\n    public static String prettyPrint(double d) {\r\n      int i = (int) d;\r\n      return d == i ? String.valueOf(i) : String.valueOf(d);\r\n    }","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>On my machine, the following function is roughly 7 times faster than the function provided by <a href=\"https://stackoverflow.com/a/14126736/974531\">JasonD's answer</a>, since it avoids <code>String.format</code>:</p>\n\n<pre><code>public static String prettyPrint(double d) {\n  int i = (int) d;\n  return d == i ? String.valueOf(i) : String.valueOf(d);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1606038,"reputation":12017,"user_id":1486125,"accept_rate":54,"display_name":"JBE"},"down_vote_count":0,"up_vote_count":139,"is_accepted":false,"score":139,"last_activity_date":1607424406,"creation_date":1408019714,"answer_id":25308216,"question_id":703396,"body_markdown":"**In short:**\r\n\r\nIf you want to get rid of trailing zeros and [locale][1] problems, then you should use:\r\n\r\n    double myValue = 0.00000021d;\r\n\r\n    DecimalFormat df = new DecimalFormat(&quot;0&quot;, DecimalFormatSymbols.getInstance(Locale.ENGLISH));\r\n    df.setMaximumFractionDigits(340); //340 = DecimalFormat.DOUBLE_FRACTION_DIGITS\r\n\r\n    System.out.println(df.format(myValue)); //output: 0.00000021\r\n\r\n\r\n**Explanation:**\r\n\r\nWhy other answers did not suit me:\r\n\r\n - `Double.toString()` or `System.out.println` or `FloatingDecimal.toJavaFormatString` uses scientific notations if double is less than 10^-3 or greater than or equal to 10^7\r\n\r\n        double myValue = 0.00000021d;\r\n        String.format(&quot;%s&quot;, myvalue); //output: 2.1E-7\r\n\r\n - by using `%f`, the default decimal precision is 6, otherwise you can hardcode it, but it results in extra zeros added if you have fewer decimals. Example:\r\n\r\n        double myValue = 0.00000021d;\r\n        String.format(&quot;%.12f&quot;, myvalue); // Output: 0.000000210000\r\n\r\n - by using `setMaximumFractionDigits(0);` or `%.0f` you remove any decimal precision, which is fine for integers/longs but not for double\r\n\r\n        double myValue = 0.00000021d;\r\n        System.out.println(String.format(&quot;%.0f&quot;, myvalue)); // Output: 0\r\n        DecimalFormat df = new DecimalFormat(&quot;0&quot;);\r\n        System.out.println(df.format(myValue)); // Output: 0\r\n - by using DecimalFormat, you are local dependent. In the French locale, the decimal separator is a comma, not a point:\r\n\r\n        double myValue = 0.00000021d;\r\n        DecimalFormat df = new DecimalFormat(&quot;0&quot;);\r\n        df.setMaximumFractionDigits(340);\r\n        System.out.println(df.format(myvalue)); // Output: 0,00000021\r\n   Using the ENGLISH locale makes sure you get a point for decimal separator, wherever your program will run.\r\n\r\nWhy using 340 then for `setMaximumFractionDigits`?\r\n\r\nTwo reasons:\r\n\r\n - `setMaximumFractionDigits` accepts an integer, but its implementation has a maximum digits allowed of `DecimalFormat.DOUBLE_FRACTION_DIGITS` which equals 340\r\n - `Double.MIN_VALUE = 4.9E-324` so with 340 digits you are sure not to round your double and lose precision\r\n\r\n  [1]: https://en.wiktionary.org/wiki/locale#Noun\r\n\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p><strong>In short:</strong></p>\n<p>If you want to get rid of trailing zeros and <a href=\"https://en.wiktionary.org/wiki/locale#Noun\" rel=\"noreferrer\">locale</a> problems, then you should use:</p>\n<pre><code>double myValue = 0.00000021d;\n\nDecimalFormat df = new DecimalFormat(&quot;0&quot;, DecimalFormatSymbols.getInstance(Locale.ENGLISH));\ndf.setMaximumFractionDigits(340); //340 = DecimalFormat.DOUBLE_FRACTION_DIGITS\n\nSystem.out.println(df.format(myValue)); //output: 0.00000021\n</code></pre>\n<p><strong>Explanation:</strong></p>\n<p>Why other answers did not suit me:</p>\n<ul>\n<li><p><code>Double.toString()</code> or <code>System.out.println</code> or <code>FloatingDecimal.toJavaFormatString</code> uses scientific notations if double is less than 10^-3 or greater than or equal to 10^7</p>\n<pre><code> double myValue = 0.00000021d;\n String.format(&quot;%s&quot;, myvalue); //output: 2.1E-7\n</code></pre>\n</li>\n<li><p>by using <code>%f</code>, the default decimal precision is 6, otherwise you can hardcode it, but it results in extra zeros added if you have fewer decimals. Example:</p>\n<pre><code> double myValue = 0.00000021d;\n String.format(&quot;%.12f&quot;, myvalue); // Output: 0.000000210000\n</code></pre>\n</li>\n<li><p>by using <code>setMaximumFractionDigits(0);</code> or <code>%.0f</code> you remove any decimal precision, which is fine for integers/longs but not for double</p>\n<pre><code> double myValue = 0.00000021d;\n System.out.println(String.format(&quot;%.0f&quot;, myvalue)); // Output: 0\n DecimalFormat df = new DecimalFormat(&quot;0&quot;);\n System.out.println(df.format(myValue)); // Output: 0\n</code></pre>\n</li>\n<li><p>by using DecimalFormat, you are local dependent. In the French locale, the decimal separator is a comma, not a point:</p>\n<pre><code> double myValue = 0.00000021d;\n DecimalFormat df = new DecimalFormat(&quot;0&quot;);\n df.setMaximumFractionDigits(340);\n System.out.println(df.format(myvalue)); // Output: 0,00000021\n</code></pre>\n<p>Using the ENGLISH locale makes sure you get a point for decimal separator, wherever your program will run.</p>\n</li>\n</ul>\n<p>Why using 340 then for <code>setMaximumFractionDigits</code>?</p>\n<p>Two reasons:</p>\n<ul>\n<li><code>setMaximumFractionDigits</code> accepts an integer, but its implementation has a maximum digits allowed of <code>DecimalFormat.DOUBLE_FRACTION_DIGITS</code> which equals 340</li>\n<li><code>Double.MIN_VALUE = 4.9E-324</code> so with 340 digits you are sure not to round your double and lose precision</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":54568,"reputation":3499,"user_id":163274,"display_name":"Valeriu Paloş"},"down_vote_count":0,"up_vote_count":49,"is_accepted":false,"score":49,"last_activity_date":1607424459,"creation_date":1412124839,"answer_id":26132504,"question_id":703396,"body_markdown":"Use:\r\n\r\n    if (d % 1.0 != 0)\r\n        return String.format(&quot;%s&quot;, d);\r\n    else\r\n        return String.format(&quot;%.0f&quot;, d);\r\n\r\nThis should work with the extreme values supported by Double. It yields:\r\n\r\n    0.12\r\n    12\r\n    12.144252\r\n    0\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>Use:</p>\n<pre><code>if (d % 1.0 != 0)\n    return String.format(&quot;%s&quot;, d);\nelse\n    return String.format(&quot;%.0f&quot;, d);\n</code></pre>\n<p>This should work with the extreme values supported by Double. It yields:</p>\n<pre><code>0.12\n12\n12.144252\n0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":558770,"reputation":16438,"user_id":755804,"accept_rate":20,"display_name":"18446744073709551615"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1426492941,"creation_date":1426242292,"answer_id":29029840,"question_id":703396,"body_markdown":"Please note that `String.format(format, args...)` is ***locale-dependent*** because it formats _using the user&#39;s default locale,_ that is, probably with commas and even spaces inside like _123 456,789_ or _123,456.789_, which may be not exactly what you expect.\r\n\r\nYou may prefer to use `String.format((Locale)null, format, args...)`.\r\n\r\nFor example,\r\n\r\n        double f = 123456.789d;\r\n        System.out.println(String.format(Locale.FRANCE,&quot;%f&quot;,f));\r\n        System.out.println(String.format(Locale.GERMANY,&quot;%f&quot;,f));\r\n        System.out.println(String.format(Locale.US,&quot;%f&quot;,f));\r\n\r\nprints\r\n\r\n    123456,789000\r\n    123456,789000\r\n    123456.789000\r\n\r\nand this is what will `String.format(format, args...)` do in different countries.\r\n\r\nEDIT Ok, since there has been a discussion about formalities:\r\n\r\n        res += stripFpZeroes(String.format((Locale) null, (nDigits!=0 ? &quot;%.&quot;+nDigits+&quot;f&quot; : &quot;%f&quot;), value));\r\n        ...\r\n\r\n\tprotected static String stripFpZeroes(String fpnumber) {\r\n\t\tint n = fpnumber.indexOf(&#39;.&#39;);\r\n\t\tif (n == -1) {\r\n\t\t\treturn fpnumber;\r\n\t\t}\r\n\t\tif (n &lt; 2) {\r\n\t\t\tn = 2;\r\n\t\t}\r\n\t\tString s = fpnumber;\r\n\t\twhile (s.length() &gt; n &amp;&amp; s.endsWith(&quot;0&quot;)) {\r\n\t\t\ts = s.substring(0, s.length()-1);\r\n\t\t}\r\n\t\treturn s;\r\n\t}\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>Please note that <code>String.format(format, args...)</code> is <strong><em>locale-dependent</em></strong> because it formats <em>using the user's default locale,</em> that is, probably with commas and even spaces inside like <em>123 456,789</em> or <em>123,456.789</em>, which may be not exactly what you expect.</p>\n\n<p>You may prefer to use <code>String.format((Locale)null, format, args...)</code>.</p>\n\n<p>For example,</p>\n\n<pre><code>    double f = 123456.789d;\n    System.out.println(String.format(Locale.FRANCE,\"%f\",f));\n    System.out.println(String.format(Locale.GERMANY,\"%f\",f));\n    System.out.println(String.format(Locale.US,\"%f\",f));\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>123456,789000\n123456,789000\n123456.789000\n</code></pre>\n\n<p>and this is what will <code>String.format(format, args...)</code> do in different countries.</p>\n\n<p>EDIT Ok, since there has been a discussion about formalities:</p>\n\n<pre><code>    res += stripFpZeroes(String.format((Locale) null, (nDigits!=0 ? \"%.\"+nDigits+\"f\" : \"%f\"), value));\n    ...\n\nprotected static String stripFpZeroes(String fpnumber) {\n    int n = fpnumber.indexOf('.');\n    if (n == -1) {\n        return fpnumber;\n    }\n    if (n &lt; 2) {\n        n = 2;\n    }\n    String s = fpnumber;\n    while (s.length() &gt; n &amp;&amp; s.endsWith(\"0\")) {\n        s = s.substring(0, s.length()-1);\n    }\n    return s;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5501406,"reputation":4041,"user_id":4370629,"accept_rate":67,"display_name":"Spotted"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1607424613,"creation_date":1429772390,"answer_id":29815964,"question_id":703396,"body_markdown":"You said you **choose** to store your numbers with the *double type*. I think this could be the root of the problem, because it forces you to store *integers* into doubles (and therefore losing the initial information about the value&#39;s nature). What about storing your numbers in instances of the [Number][1] class (superclass of both Double and Integer) and rely on polymorphism to determine the correct format of each number?\r\n\r\nI know it may not be acceptable to refactor a whole part of your code due to that, but it could produce the desired output without extra code/casting/parsing.\r\n\r\nExample:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n\r\n    public class UseMixedNumbers {\r\n\r\n        public static void main(String[] args) {\r\n            List&lt;Number&gt; listNumbers = new ArrayList&lt;Number&gt;();\r\n\r\n            listNumbers.add(232);\r\n            listNumbers.add(0.18);\r\n            listNumbers.add(1237875192);\r\n            listNumbers.add(4.58);\r\n            listNumbers.add(0);\r\n            listNumbers.add(1.2345);\r\n\r\n            for (Number number : listNumbers) {\r\n                System.out.println(number);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\nWill produce the following output:\r\n\r\n    232\r\n    0.18\r\n    1237875192\r\n    4.58\r\n    0\r\n    1.2345\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/Number.html\r\n\r\n\r\n\r\n\r\n \r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>You said you <strong>choose</strong> to store your numbers with the <em>double type</em>. I think this could be the root of the problem, because it forces you to store <em>integers</em> into doubles (and therefore losing the initial information about the value's nature). What about storing your numbers in instances of the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Number.html\" rel=\"nofollow noreferrer\">Number</a> class (superclass of both Double and Integer) and rely on polymorphism to determine the correct format of each number?</p>\n<p>I know it may not be acceptable to refactor a whole part of your code due to that, but it could produce the desired output without extra code/casting/parsing.</p>\n<p>Example:</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class UseMixedNumbers {\n\n    public static void main(String[] args) {\n        List&lt;Number&gt; listNumbers = new ArrayList&lt;Number&gt;();\n\n        listNumbers.add(232);\n        listNumbers.add(0.18);\n        listNumbers.add(1237875192);\n        listNumbers.add(4.58);\n        listNumbers.add(0);\n        listNumbers.add(1.2345);\n\n        for (Number number : listNumbers) {\n            System.out.println(number);\n        }\n    }\n\n}\n</code></pre>\n<p>Will produce the following output:</p>\n<pre><code>232\n0.18\n1237875192\n4.58\n0\n1.2345\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1707287,"reputation":453,"user_id":1566098,"accept_rate":33,"display_name":"fop6316"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1623871288,"creation_date":1469788387,"answer_id":38656629,"question_id":703396,"body_markdown":"    if (d == Math.floor(d)) {\r\n        return String.format(&quot;%.0f&quot;, d); //Format is: 0 places after decimal point\r\n    } else {\r\n        return Double.toString(d);\r\n    }\r\n\r\nMore info: https://docs.oracle.com/javase/tutorial/java/data/numberformat.html","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<pre><code>if (d == Math.floor(d)) {\n    return String.format(&quot;%.0f&quot;, d); //Format is: 0 places after decimal point\n} else {\n    return Double.toString(d);\n}\n</code></pre>\n<p>More info: <a href=\"https://docs.oracle.com/javase/tutorial/java/data/numberformat.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/tutorial/java/data/numberformat.html</a></p>\n"},{"tags":[],"owner":{"account_id":152022,"reputation":4063,"user_id":366253,"accept_rate":57,"display_name":"Fernando Gallego"},"down_vote_count":1,"up_vote_count":26,"is_accepted":false,"score":25,"last_activity_date":1607424731,"creation_date":1470389805,"answer_id":38786041,"question_id":703396,"body_markdown":"My two cents:\r\n\r\n    if(n % 1 == 0) {\r\n        return String.format(Locale.US, &quot;%.0f&quot;, n));\r\n    } else {\r\n        return String.format(Locale.US, &quot;%.1f&quot;, n));\r\n    }\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>My two cents:</p>\n<pre><code>if(n % 1 == 0) {\n    return String.format(Locale.US, &quot;%.0f&quot;, n));\n} else {\n    return String.format(Locale.US, &quot;%.1f&quot;, n));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1312446,"reputation":915,"user_id":1262012,"accept_rate":65,"display_name":"Bialy"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1607424956,"creation_date":1473491396,"answer_id":39423559,"question_id":703396,"body_markdown":"This one will gets the job done nicely:\r\n\r\n        public static String removeZero(double number) {\r\n            DecimalFormat format = new DecimalFormat(&quot;#.###########&quot;);\r\n            return format.format(number);\r\n        }\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>This one will gets the job done nicely:</p>\n<pre><code>    public static String removeZero(double number) {\n        DecimalFormat format = new DecimalFormat(&quot;#.###########&quot;);\n        return format.format(number);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4441341,"reputation":1387,"user_id":3615816,"display_name":"Hossein Hajizadeh"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1500093979,"creation_date":1500020987,"answer_id":45098289,"question_id":703396,"body_markdown":"\r\n    new DecimalFormat(&quot;00.#&quot;).format(20.236)\r\n    //out =20.2\r\n    \r\n    new DecimalFormat(&quot;00.#&quot;).format(2.236)\r\n    //out =02.2\r\n\r\n 1. 0 for minimum number of digits\r\n 2. Renders # digits\r\n\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<pre><code>new DecimalFormat(\"00.#\").format(20.236)\n//out =20.2\n\nnew DecimalFormat(\"00.#\").format(2.236)\n//out =02.2\n</code></pre>\n\n<ol>\n<li>0 for minimum number of digits</li>\n<li>Renders # digits</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5605957,"reputation":873,"user_id":4440561,"display_name":"ShAkKiR"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1607425015,"creation_date":1500983123,"answer_id":45302298,"question_id":703396,"body_markdown":"    public static String fmt(double d) {\r\n        String val = Double.toString(d);\r\n        String[] valArray = val.split(&quot;\\\\.&quot;);\r\n        long valLong = 0;\r\n        if(valArray.length == 2) {\r\n            valLong = Long.parseLong(valArray[1]);\r\n        }\r\n         if (valLong == 0)\r\n            return String.format(&quot;%d&quot;, (long) d);\r\n        else\r\n            return String.format(&quot;%s&quot;, d);\r\n    }\r\n\r\nI had to use this because `d == (long)d` was giving me violation in a [SonarQube][1] report.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/SonarQube\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<pre><code>public static String fmt(double d) {\n    String val = Double.toString(d);\n    String[] valArray = val.split(&quot;\\\\.&quot;);\n    long valLong = 0;\n    if(valArray.length == 2) {\n        valLong = Long.parseLong(valArray[1]);\n    }\n     if (valLong == 0)\n        return String.format(&quot;%d&quot;, (long) d);\n    else\n        return String.format(&quot;%s&quot;, d);\n}\n</code></pre>\n<p>I had to use this because <code>d == (long)d</code> was giving me violation in a <a href=\"https://en.wikipedia.org/wiki/SonarQube\" rel=\"nofollow noreferrer\">SonarQube</a> report.</p>\n"},{"tags":[],"owner":{"account_id":101088,"reputation":821,"user_id":272132,"display_name":"vlazzle"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1607425147,"creation_date":1507665561,"answer_id":46674987,"question_id":703396,"body_markdown":"Use a `DecimalFormat` and `setMinimumFractionDigits(0)`.\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>Use a <code>DecimalFormat</code> and <code>setMinimumFractionDigits(0)</code>.</p>\n"},{"tags":[],"owner":{"account_id":1419056,"reputation":5266,"user_id":1344070,"accept_rate":100,"display_name":"keisar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1607425261,"creation_date":1523468713,"answer_id":49781460,"question_id":703396,"body_markdown":"This is what I came up with:\r\n\r\n      private static String format(final double dbl) {\r\n        return dbl % 1 != 0 ? String.valueOf(dbl) : String.valueOf((int) dbl);\r\n      }\r\n\r\nIt is a simple one-liner and only casts to int if it really needs to.\r\n\r\n \r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>This is what I came up with:</p>\n<pre><code>  private static String format(final double dbl) {\n    return dbl % 1 != 0 ? String.valueOf(dbl) : String.valueOf((int) dbl);\n  }\n</code></pre>\n<p>It is a simple one-liner and only casts to int if it really needs to.</p>\n"},{"tags":[],"owner":{"account_id":3300281,"reputation":1823,"user_id":2776623,"display_name":"oxied"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1607425443,"creation_date":1568201646,"answer_id":57888252,"question_id":703396,"body_markdown":"**Format price with grouping, rounding, and no unnecessary zeroes (in double).**\r\n\r\nRules:\r\n\r\n1. No zeroes at the end (`2.0000 = 2; 1.0100000 = 1.01`)\r\n2. Two digits maximum after a point (`2.010 = 2.01; 0.20 = 0.2`)\r\n3. Rounding after the 2nd digit after a point (`1.994 = 1.99; 1.995 = 2; 1.006 = 1.01; 0.0006 -&gt; 0`)\r\n4. Returns `0` (`null/-0 = 0`)\r\n5. Adds `$` (`= $56/-$56`)\r\n6. Grouping (`101101.02 = $101,101.02`)\r\n\r\nMore examples:\r\n\r\n&gt; `-99.985 = -$99.99`\r\n&gt;\r\n&gt; `10 = $10`\r\n&gt;\r\n&gt; `10.00 = $10`\r\n&gt;\r\n&gt; `20.01000089 = $20.01`\r\n\r\nIt is written in [Kotlin][1] as a fun extension of Double (because it is used in Android), but it can be converted to Java easily, because Java classes were used.\r\n\r\n    /**\r\n     * 23.0 -&gt; $23\r\n     *\r\n     * 23.1 -&gt; $23.1\r\n     *\r\n     * 23.01 -&gt; $23.01\r\n     *\r\n     * 23.99 -&gt; $23.99\r\n     *\r\n     * 23.999 -&gt; $24\r\n     *\r\n     * -0.0 -&gt; $0\r\n     *\r\n     * -5.00 -&gt; -$5\r\n     *\r\n     * -5.019 -&gt; -$5.02\r\n     */\r\n    fun Double?.formatUserAsSum(): String {\r\n        return when {\r\n            this == null || this == 0.0 -&gt; &quot;$0&quot;\r\n            this % 1 == 0.0 -&gt; DecimalFormat(&quot;$#,##0;-$#,##0&quot;).format(this)\r\n            else -&gt; DecimalFormat(&quot;$#,##0.##;-$#,##0.##&quot;).format(this)\r\n        }\r\n    }\r\n\r\nHow to use:\r\n\r\n    var yourDouble: Double? = -20.00\r\n    println(yourDouble.formatUserAsSum()) // will print -$20\r\n\r\n    yourDouble = null\r\n    println(yourDouble.formatUserAsSum()) // will print $0\r\n\r\n**About DecimalFormat**: https://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Kotlin_(programming_language)\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p><strong>Format price with grouping, rounding, and no unnecessary zeroes (in double).</strong></p>\n<p>Rules:</p>\n<ol>\n<li>No zeroes at the end (<code>2.0000 = 2; 1.0100000 = 1.01</code>)</li>\n<li>Two digits maximum after a point (<code>2.010 = 2.01; 0.20 = 0.2</code>)</li>\n<li>Rounding after the 2nd digit after a point (<code>1.994 = 1.99; 1.995 = 2; 1.006 = 1.01; 0.0006 -&gt; 0</code>)</li>\n<li>Returns <code>0</code> (<code>null/-0 = 0</code>)</li>\n<li>Adds <code>$</code> (<code>= $56/-$56</code>)</li>\n<li>Grouping (<code>101101.02 = $101,101.02</code>)</li>\n</ol>\n<p>More examples:</p>\n<blockquote>\n<p><code>-99.985 = -$99.99</code></p>\n<p><code>10 = $10</code></p>\n<p><code>10.00 = $10</code></p>\n<p><code>20.01000089 = $20.01</code></p>\n</blockquote>\n<p>It is written in <a href=\"https://en.wikipedia.org/wiki/Kotlin_(programming_language)\" rel=\"nofollow noreferrer\">Kotlin</a> as a fun extension of Double (because it is used in Android), but it can be converted to Java easily, because Java classes were used.</p>\n<pre><code>/**\n * 23.0 -&gt; $23\n *\n * 23.1 -&gt; $23.1\n *\n * 23.01 -&gt; $23.01\n *\n * 23.99 -&gt; $23.99\n *\n * 23.999 -&gt; $24\n *\n * -0.0 -&gt; $0\n *\n * -5.00 -&gt; -$5\n *\n * -5.019 -&gt; -$5.02\n */\nfun Double?.formatUserAsSum(): String {\n    return when {\n        this == null || this == 0.0 -&gt; &quot;$0&quot;\n        this % 1 == 0.0 -&gt; DecimalFormat(&quot;$#,##0;-$#,##0&quot;).format(this)\n        else -&gt; DecimalFormat(&quot;$#,##0.##;-$#,##0.##&quot;).format(this)\n    }\n}\n</code></pre>\n<p>How to use:</p>\n<pre><code>var yourDouble: Double? = -20.00\nprintln(yourDouble.formatUserAsSum()) // will print -$20\n\nyourDouble = null\nprintln(yourDouble.formatUserAsSum()) // will print $0\n</code></pre>\n<p><strong>About DecimalFormat</strong>: <a href=\"https://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html</a></p>\n"},{"tags":[],"owner":{"account_id":4048971,"reputation":896,"user_id":3329281,"display_name":"Taras Lozovyi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1607425480,"creation_date":1575540867,"answer_id":59192821,"question_id":703396,"body_markdown":"For Kotlin you can use an extension like:\r\n\r\n```\r\nfun Double.toPrettyString() =\r\n    if(this - this.toLong() == 0.0)\r\n        String.format(&quot;%d&quot;, this.toLong())\r\n    else\r\n        String.format(&quot;%s&quot;, this)\r\n```\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>For Kotlin you can use an extension like:</p>\n<pre><code>fun Double.toPrettyString() =\n    if(this - this.toLong() == 0.0)\n        String.format(&quot;%d&quot;, this.toLong())\n    else\n        String.format(&quot;%s&quot;, this)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10071729,"reputation":566,"user_id":7445066,"display_name":"Ahmed Mihoub"},"down_vote_count":2,"up_vote_count":22,"is_accepted":false,"score":20,"last_activity_date":1607425518,"creation_date":1575901336,"answer_id":59250845,"question_id":703396,"body_markdown":"    float price = 4.30;\r\n    DecimalFormat format = new DecimalFormat(&quot;0.##&quot;); // Choose the number of decimal places to work with in case they are different than zero and zero value will be removed\r\n    format.setRoundingMode(RoundingMode.DOWN); // Choose your Rounding Mode\r\n    System.out.println(format.format(price));\r\n\r\nThis is the result of some tests:\r\n\r\n    4.30     =&gt; 4.3\r\n    4.39     =&gt; 4.39  // Choose format.setRoundingMode(RoundingMode.UP) to get 4.4\r\n    4.000000 =&gt; 4\r\n    4        =&gt; 4\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<pre><code>float price = 4.30;\nDecimalFormat format = new DecimalFormat(&quot;0.##&quot;); // Choose the number of decimal places to work with in case they are different than zero and zero value will be removed\nformat.setRoundingMode(RoundingMode.DOWN); // Choose your Rounding Mode\nSystem.out.println(format.format(price));\n</code></pre>\n<p>This is the result of some tests:</p>\n<pre><code>4.30     =&gt; 4.3\n4.39     =&gt; 4.39  // Choose format.setRoundingMode(RoundingMode.UP) to get 4.4\n4.000000 =&gt; 4\n4        =&gt; 4\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12401582,"reputation":2466,"user_id":9038584,"accept_rate":75,"display_name":"Tenten Ponce"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589468855,"creation_date":1589468855,"answer_id":61800791,"question_id":703396,"body_markdown":"Here&#39;s another answer that has an option to append decimal **ONLY IF** decimal was not zero.\r\n\r\n```\r\n   /**\r\n     * Example: (isDecimalRequired = true)\r\n     * d = 12345\r\n     * returns 12,345.00\r\n     *\r\n     * d = 12345.12345\r\n     * returns 12,345.12\r\n     *\r\n     * ==================================================\r\n     * Example: (isDecimalRequired = false)\r\n     * d = 12345\r\n     * returns 12,345 (notice that there&#39;s no decimal since it&#39;s zero)\r\n     *\r\n     * d = 12345.12345\r\n     * returns 12,345.12\r\n     *\r\n     * @param d float to format\r\n     * @param zeroCount number decimal places\r\n     * @param isDecimalRequired true if it will put decimal even zero,\r\n     * false will remove the last decimal(s) if zero.\r\n     */\r\n    fun formatDecimal(d: Float? = 0f, zeroCount: Int, isDecimalRequired: Boolean = true): String {\r\n        val zeros = StringBuilder()\r\n\r\n        for (i in 0 until zeroCount) {\r\n            zeros.append(&quot;0&quot;)\r\n        }\r\n\r\n        var pattern = &quot;#,##0&quot;\r\n\r\n        if (zeros.isNotEmpty()) {\r\n            pattern += &quot;.$zeros&quot;\r\n        }\r\n\r\n        val numberFormat = DecimalFormat(pattern)\r\n\r\n        var formattedNumber = if (d != null) numberFormat.format(d) else &quot;0&quot;\r\n\r\n        if (!isDecimalRequired) {\r\n            for (i in formattedNumber.length downTo formattedNumber.length - zeroCount) {\r\n                val number = formattedNumber[i - 1]\r\n\r\n                if (number == &#39;0&#39; || number == &#39;.&#39;) {\r\n                    formattedNumber = formattedNumber.substring(0, formattedNumber.length - 1)\r\n                } else {\r\n                    break\r\n                }\r\n            }\r\n        }\r\n\r\n        return formattedNumber\r\n    }\r\n```","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>Here's another answer that has an option to append decimal <strong>ONLY IF</strong> decimal was not zero.</p>\n\n<pre><code>   /**\n     * Example: (isDecimalRequired = true)\n     * d = 12345\n     * returns 12,345.00\n     *\n     * d = 12345.12345\n     * returns 12,345.12\n     *\n     * ==================================================\n     * Example: (isDecimalRequired = false)\n     * d = 12345\n     * returns 12,345 (notice that there's no decimal since it's zero)\n     *\n     * d = 12345.12345\n     * returns 12,345.12\n     *\n     * @param d float to format\n     * @param zeroCount number decimal places\n     * @param isDecimalRequired true if it will put decimal even zero,\n     * false will remove the last decimal(s) if zero.\n     */\n    fun formatDecimal(d: Float? = 0f, zeroCount: Int, isDecimalRequired: Boolean = true): String {\n        val zeros = StringBuilder()\n\n        for (i in 0 until zeroCount) {\n            zeros.append(\"0\")\n        }\n\n        var pattern = \"#,##0\"\n\n        if (zeros.isNotEmpty()) {\n            pattern += \".$zeros\"\n        }\n\n        val numberFormat = DecimalFormat(pattern)\n\n        var formattedNumber = if (d != null) numberFormat.format(d) else \"0\"\n\n        if (!isDecimalRequired) {\n            for (i in formattedNumber.length downTo formattedNumber.length - zeroCount) {\n                val number = formattedNumber[i - 1]\n\n                if (number == '0' || number == '.') {\n                    formattedNumber = formattedNumber.substring(0, formattedNumber.length - 1)\n                } else {\n                    break\n                }\n            }\n        }\n\n        return formattedNumber\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1091376,"reputation":5589,"user_id":1085958,"accept_rate":83,"display_name":"djmj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607425696,"creation_date":1603730119,"answer_id":64541281,"question_id":703396,"body_markdown":"I am using this for formatting numbers without trailing zeroes in our [JSF][1] application. The original built-in formatters required you to specify max numbers of fractional digits which could be useful here also in case you have too many fractional digits.\r\n\r\n    /**\r\n     * Formats the given Number as with as many fractional digits as precision\r\n     * available.&lt;br&gt;\r\n     * This is a convenient method in case all fractional digits shall be\r\n     * rendered and no custom format / pattern needs to be provided.&lt;br&gt;\r\n     * &lt;br&gt;\r\n     * This serves as a workaround for {@link NumberFormat#getNumberInstance()}\r\n     * which by default only renders up to three fractional digits.\r\n     *\r\n     * @param number\r\n     * @param locale\r\n     * @param groupingUsed &lt;code&gt;true&lt;/code&gt; if grouping shall be used\r\n     *\r\n     * @return\r\n     */\r\n    public static String formatNumberFraction(final Number number, final Locale locale, final boolean groupingUsed)\r\n    {\r\n        if (number == null)\r\n            return null;\r\n\r\n        final BigDecimal bDNumber = MathUtils.getBigDecimal(number);\r\n\r\n        final NumberFormat numberFormat = NumberFormat.getNumberInstance(locale);\r\n        numberFormat.setMaximumFractionDigits(Math.max(0, bDNumber.scale()));\r\n        numberFormat.setGroupingUsed(groupingUsed);\r\n\r\n        // Convert back for locale percent formatter\r\n        return numberFormat.format(bDNumber);\r\n    }\r\n\r\n    /**\r\n     * Formats the given Number as percent with as many fractional digits as\r\n     * precision available.&lt;br&gt;\r\n     * This is a convenient method in case all fractional digits shall be\r\n     * rendered and no custom format / pattern needs to be provided.&lt;br&gt;\r\n     * &lt;br&gt;\r\n     * This serves as a workaround for {@link NumberFormat#getPercentInstance()}\r\n     * which does not renders fractional digits.\r\n     *\r\n     * @param number Number in range of [0-1]\r\n     * @param locale\r\n     *\r\n     * @return\r\n     */\r\n    public static String formatPercentFraction(final Number number, final Locale locale)\r\n    {\r\n        if (number == null)\r\n            return null;\r\n\r\n        final BigDecimal bDNumber = MathUtils.getBigDecimal(number).multiply(new BigDecimal(100));\r\n\r\n        final NumberFormat percentScaleFormat = NumberFormat.getPercentInstance(locale);\r\n        percentScaleFormat.setMaximumFractionDigits(Math.max(0, bDNumber.scale() - 2));\r\n\r\n        final BigDecimal bDNumberPercent = bDNumber.multiply(new BigDecimal(0.01));\r\n\r\n        // Convert back for locale percent formatter\r\n        final String strPercent = percentScaleFormat.format(bDNumberPercent);\r\n\r\n        return strPercent;\r\n    }\r\n\r\n  [1]: https://en.wikipedia.org/wiki/JavaServer_Faces\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>I am using this for formatting numbers without trailing zeroes in our <a href=\"https://en.wikipedia.org/wiki/JavaServer_Faces\" rel=\"nofollow noreferrer\">JSF</a> application. The original built-in formatters required you to specify max numbers of fractional digits which could be useful here also in case you have too many fractional digits.</p>\n<pre><code>/**\n * Formats the given Number as with as many fractional digits as precision\n * available.&lt;br&gt;\n * This is a convenient method in case all fractional digits shall be\n * rendered and no custom format / pattern needs to be provided.&lt;br&gt;\n * &lt;br&gt;\n * This serves as a workaround for {@link NumberFormat#getNumberInstance()}\n * which by default only renders up to three fractional digits.\n *\n * @param number\n * @param locale\n * @param groupingUsed &lt;code&gt;true&lt;/code&gt; if grouping shall be used\n *\n * @return\n */\npublic static String formatNumberFraction(final Number number, final Locale locale, final boolean groupingUsed)\n{\n    if (number == null)\n        return null;\n\n    final BigDecimal bDNumber = MathUtils.getBigDecimal(number);\n\n    final NumberFormat numberFormat = NumberFormat.getNumberInstance(locale);\n    numberFormat.setMaximumFractionDigits(Math.max(0, bDNumber.scale()));\n    numberFormat.setGroupingUsed(groupingUsed);\n\n    // Convert back for locale percent formatter\n    return numberFormat.format(bDNumber);\n}\n\n/**\n * Formats the given Number as percent with as many fractional digits as\n * precision available.&lt;br&gt;\n * This is a convenient method in case all fractional digits shall be\n * rendered and no custom format / pattern needs to be provided.&lt;br&gt;\n * &lt;br&gt;\n * This serves as a workaround for {@link NumberFormat#getPercentInstance()}\n * which does not renders fractional digits.\n *\n * @param number Number in range of [0-1]\n * @param locale\n *\n * @return\n */\npublic static String formatPercentFraction(final Number number, final Locale locale)\n{\n    if (number == null)\n        return null;\n\n    final BigDecimal bDNumber = MathUtils.getBigDecimal(number).multiply(new BigDecimal(100));\n\n    final NumberFormat percentScaleFormat = NumberFormat.getPercentInstance(locale);\n    percentScaleFormat.setMaximumFractionDigits(Math.max(0, bDNumber.scale() - 2));\n\n    final BigDecimal bDNumberPercent = bDNumber.multiply(new BigDecimal(0.01));\n\n    // Convert back for locale percent formatter\n    final String strPercent = percentScaleFormat.format(bDNumberPercent);\n\n    return strPercent;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1577409,"reputation":16015,"user_id":1463522,"accept_rate":64,"display_name":"holmis83"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1630943153,"creation_date":1630943153,"answer_id":69077254,"question_id":703396,"body_markdown":"A simple solution with locale in mind:\r\n\r\n    double d = 123.45;\r\n    NumberFormat numberFormat = NumberFormat.getInstance(Locale.GERMANY);\r\n    System.out.println(numberFormat.format(d));\r\n\r\nSince comma is used as decimal separator in Germany, the above will print:\r\n\r\n&gt; 123,45","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>A simple solution with locale in mind:</p>\n<pre><code>double d = 123.45;\nNumberFormat numberFormat = NumberFormat.getInstance(Locale.GERMANY);\nSystem.out.println(numberFormat.format(d));\n</code></pre>\n<p>Since comma is used as decimal separator in Germany, the above will print:</p>\n<blockquote>\n<p>123,45</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4500973,"reputation":395,"user_id":3659492,"accept_rate":78,"display_name":"Mahbubur Rahman Khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644962251,"creation_date":1644962251,"answer_id":71133898,"question_id":703396,"body_markdown":" work with given decimal length...\r\n\r\n\r\n    public static String getLocaleFloatValueDecimalWithLength(Locale loc, float value, int length) {\r\n            //make string from float value\r\n            return String.format(loc, (value % 1 == 0 ? &quot;%.0f&quot; : &quot;%.&quot;+length+&quot;f&quot;), value);\r\n        }","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>work with given decimal length...</p>\n<pre><code>public static String getLocaleFloatValueDecimalWithLength(Locale loc, float value, int length) {\n        //make string from float value\n        return String.format(loc, (value % 1 == 0 ? &quot;%.0f&quot; : &quot;%.&quot;+length+&quot;f&quot;), value);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9060283,"reputation":71,"user_id":6747017,"display_name":"pogo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675083009,"creation_date":1675083009,"answer_id":75284626,"question_id":703396,"body_markdown":"0.0 -&gt; 0%&lt;br&gt;\r\n1.0 -&gt; 100%&lt;br&gt;\r\n0.1 -&gt; 10%&lt;br&gt;\r\n0.11 -&gt; 11%&lt;br&gt;\r\n0.01 -&gt; 1%&lt;br&gt;\r\n0.111 -&gt; 11.1%&lt;br&gt;\r\n0.001 -&gt; 0.1%&lt;br&gt;\r\n0.1111 -&gt; 11.11%&lt;br&gt;\r\n0.0001 -&gt; 0.01%&lt;br&gt;\r\n\r\n&quot;.replace()&quot; is added because I was always getting wrong separator\r\n```\r\nimport java.text.NumberFormat\r\n\r\nfun Double.formating(): String {\r\n    val defaultFormat: NumberFormat = NumberFormat.getPercentInstance()\r\n    defaultFormat.minimumFractionDigits = 0\r\n    defaultFormat.maximumFractionDigits = 2\r\n\r\n    return defaultFormat.format(this).replace(&quot;,&quot;, &quot;.&quot;)\r\n}\r\n```","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>0.0 -&gt; 0%<br>\n1.0 -&gt; 100%<br>\n0.1 -&gt; 10%<br>\n0.11 -&gt; 11%<br>\n0.01 -&gt; 1%<br>\n0.111 -&gt; 11.1%<br>\n0.001 -&gt; 0.1%<br>\n0.1111 -&gt; 11.11%<br>\n0.0001 -&gt; 0.01%<br></p>\n<p>&quot;.replace()&quot; is added because I was always getting wrong separator</p>\n<pre><code>import java.text.NumberFormat\n\nfun Double.formating(): String {\n    val defaultFormat: NumberFormat = NumberFormat.getPercentInstance()\n    defaultFormat.minimumFractionDigits = 0\n    defaultFormat.maximumFractionDigits = 2\n\n    return defaultFormat.format(this).replace(&quot;,&quot;, &quot;.&quot;)\n}\n</code></pre>\n"}],"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":832823,"favorite_count":0,"down_vote_count":2,"up_vote_count":614,"accepted_answer_id":14126736,"answer_count":29,"score":612,"last_activity_date":1675448983,"creation_date":1238540069,"question_id":703396,"body_markdown":"A 64-bit double can represent integer +/- 2&lt;sup&gt;53&lt;/sup&gt; exactly.\r\n\r\nGiven this fact, I choose to use a double type as a single type for all my types, since my largest integer is an unsigned 32-bit number.\r\n\r\nBut now I have to print these pseudo integers, but the problem is they are also mixed in with actual doubles.\r\n\r\nSo how do I print these doubles nicely in Java?\r\n\r\nI have tried `String.format(&quot;%f&quot;, value)`, which is close, except I get a lot of trailing zeros for small values.\r\n\r\nHere&#39;s an example output of of `%f`\r\n\r\n&lt;pre&gt;\r\n232.00000000\r\n0.18000000000\r\n1237875192.0\r\n4.5800000000\r\n0.00000000\r\n1.23450000\r\n&lt;/pre&gt;\r\n\r\nWhat I want is:\r\n\r\n&lt;pre&gt;\r\n232\r\n0.18\r\n1237875192\r\n4.58\r\n0\r\n1.2345\r\n&lt;/pre&gt;\r\n\r\nSure I can write a function to trim those zeros, but that&#39;s lot of performance loss due to string manipulation. Can I do better with other format code?\r\n\r\n&lt;hr/&gt;\r\n\r\nThe answers by Tom E. and Jeremy S. are unacceptable as they both arbitrarily rounds to two decimal places. Please understand the problem before answering.\r\n\r\n&lt;hr/&gt;\r\n\r\nPlease note that `String.format(format, args...)` is ***locale-dependent*** (see answers below).\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>A 64-bit double can represent integer +/- 2<sup>53</sup> exactly.</p>\n<p>Given this fact, I choose to use a double type as a single type for all my types, since my largest integer is an unsigned 32-bit number.</p>\n<p>But now I have to print these pseudo integers, but the problem is they are also mixed in with actual doubles.</p>\n<p>So how do I print these doubles nicely in Java?</p>\n<p>I have tried <code>String.format(&quot;%f&quot;, value)</code>, which is close, except I get a lot of trailing zeros for small values.</p>\n<p>Here's an example output of of <code>%f</code></p>\n<pre>\n232.00000000\n0.18000000000\n1237875192.0\n4.5800000000\n0.00000000\n1.23450000\n</pre>\n<p>What I want is:</p>\n<pre>\n232\n0.18\n1237875192\n4.58\n0\n1.2345\n</pre>\n<p>Sure I can write a function to trim those zeros, but that's lot of performance loss due to string manipulation. Can I do better with other format code?</p>\n<hr/>\n<p>The answers by Tom E. and Jeremy S. are unacceptable as they both arbitrarily rounds to two decimal places. Please understand the problem before answering.</p>\n<hr/>\n<p>Please note that <code>String.format(format, args...)</code> is <em><strong>locale-dependent</strong></em> (see answers below).</p>\n"},{"tags":["java","string","date","simpledateformat","date-formatting"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1675436236,"post_id":75337406,"comment_id":132934612,"body_markdown":"&quot;I had troubles understanding the correct usage of SimpleDateFormat for this case&quot; - do you *have* to use that class at all? I&#39;d strongly recommend using java.time, e.g. `java.time.LocalDate` to represent a date. Basically, you should parse the existing string into a `LocalDate`, and then format it into the format. `DateTimeFormatter` is the appropriate class to use for that.","body":"&quot;I had troubles understanding the correct usage of SimpleDateFormat for this case&quot; - do you <i>have</i> to use that class at all? I&#39;d strongly recommend using java.time, e.g. <code>java.time.LocalDate</code> to represent a date. Basically, you should parse the existing string into a <code>LocalDate</code>, and then format it into the format. <code>DateTimeFormatter</code> is the appropriate class to use for that."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1675612556,"post_id":75337406,"comment_id":132962511,"body_markdown":"The most correct way to use `SimpleDateFormat` is - *not* to use it at all. Seriously. That class is so troublesome and so long outdated, you will never want to use it. See the answer.","body":"The most correct way to use <code>SimpleDateFormat</code> is - <i>not</i> to use it at all. Seriously. That class is so troublesome and so long outdated, you will never want to use it. See the answer."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1675613063,"post_id":75337406,"comment_id":132962596,"body_markdown":"I am wondering a bit about the format you say you want, `02012023`. I don&#39;t imagine anyone wanting to read a date in that format. What do you want it for? Wouldn&#39;t your users want something more readable and unambiguous?","body":"I am wondering a bit about the format you say you want, <code>02012023</code>. I don&#39;t imagine anyone wanting to read a date in that format. What do you want it for? Wouldn&#39;t your users want something more readable and unambiguous?"},{"owner":{"account_id":27695576,"reputation":3,"user_id":21141382,"display_name":"Markus"},"score":0,"creation_date":1676029390,"post_id":75337406,"comment_id":133059553,"body_markdown":"@OleV.V. this is how date is stored on the backend, users are seeing in different format","body":"@OleV.V. this is how date is stored on the backend, users are seeing in different format"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1676030742,"post_id":75337406,"comment_id":133059962,"body_markdown":"That explains, or halfway, thanks. It’s also a non-recommended format for storage. If your storage doesn’t directly support a date type, I recommend storing as a string in [ISO 8601 format](https://en.wikipedia.org/wiki/ISO_8601), for example -- yes the format you have already got! `2023-02-01`.","body":"That explains, or halfway, thanks. It’s also a non-recommended format for storage. If your storage doesn’t directly support a date type, I recommend storing as a string in <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601 format</a>, for example -- yes the format you have already got! <code>2023-02-01</code>."}],"answers":[{"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675436332,"creation_date":1675436332,"answer_id":75337462,"question_id":75337406,"body_markdown":"`SimpleDateFormat` is legacy now, try to use the modern `java.time` library instead:\r\n\r\n    String newStringDate = LocalDate.parse(&quot;2023-02-01&quot;)\r\n            .format(DateTimeFormatter.ofPattern(&quot;MMdduuuu&quot;));","title":"Convert Date string into another string with different format","body":"<p><code>SimpleDateFormat</code> is legacy now, try to use the modern <code>java.time</code> library instead:</p>\n<pre><code>String newStringDate = LocalDate.parse(&quot;2023-02-01&quot;)\n        .format(DateTimeFormatter.ofPattern(&quot;MMdduuuu&quot;));\n</code></pre>\n"}],"owner":{"account_id":27695576,"reputation":3,"user_id":21141382,"display_name":"Markus"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75337462,"answer_count":1,"score":0,"last_activity_date":1675448820,"creation_date":1675436022,"question_id":75337406,"body_markdown":"I&#39;m quite new to the Java and for the use case I would like to know how to convert String &quot;2023-02-01&quot; into &quot;02012023&quot;\r\nI had troubles understanding the correct usage of SimpleDateFormat for this case\r\n\r\nSo far I tried nothing","title":"Convert Date string into another string with different format","body":"<p>I'm quite new to the Java and for the use case I would like to know how to convert String &quot;2023-02-01&quot; into &quot;02012023&quot;\nI had troubles understanding the correct usage of SimpleDateFormat for this case</p>\n<p>So far I tried nothing</p>\n"},{"tags":["java","spring-boot","aws-ssm"],"comments":[{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1675450693,"post_id":75339656,"comment_id":132939269,"body_markdown":"Your best bet is to create an IAM policy that gives access to Secret Manager from wherever you&#39;re deploying your spring-boot jar to.  See https://docs.aws.amazon.com/secretsmanager/latest/userguide/auth-and-access_examples.html","body":"Your best bet is to create an IAM policy that gives access to Secret Manager from wherever you&#39;re deploying your spring-boot jar to.  See <a href=\"https://docs.aws.amazon.com/secretsmanager/latest/userguide/auth-and-access_examples.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/secretsmanager/latest/userguide/&hellip;</a>"},{"owner":{"account_id":17051052,"reputation":17,"user_id":12336678,"display_name":"Micro"},"score":0,"creation_date":1675825977,"post_id":75339656,"comment_id":133010283,"body_markdown":"thanks for ur reply..@lane.maxwell. unfortunately team was saying that&#39; not an option. would u pls take a look at this https://stackoverflow.com/questions/75368893. Once i get the credentials can i store it or register as @Bean so it will be there till next deployment.","body":"thanks for ur reply..@lane.maxwell. unfortunately team was saying that&#39; not an option. would u pls take a look at this <a href=\"https://stackoverflow.com/questions/75368893\">stackoverflow.com/questions/75368893</a>. Once i get the credentials can i store it or register as @Bean so it will be there till next deployment."}],"owner":{"account_id":17051052,"reputation":17,"user_id":12336678,"display_name":"Micro"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":295,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1675448531,"creation_date":1675448531,"question_id":75339656,"body_markdown":"Currently we are having access key and secret access key stored in properties file and we are able to make all the Aws service calls, now we want to store access key and secret access key in ssm parameter store(we have been asked to store only in ssm not environment variable or system properties). \r\n\r\n\r\n\r\nPlan is to create a bean during bean instantiation which returns AwsCredentialsProvider with the values read from Ssm, not able to find how to make a call to ssm if the access key and secret access key are stored in ssm itself\r\n\r\n\r\nOne way we have tried is, there is a lambda function which returns all these params in ssm(here also same doubt how we can call without credentials).\r\nFor the above scenario there is a lambda authorizer but the token we will get once a req is made to backend and we don&#39;t want to hit lambda function everytime to get those params.\r\n\r\nWould pls someone suggest any way to achieve this or any workaround?","title":"Reading Access Key and Secret Access key from AWS Ssm Parameter Store with Spring Boot 2.1 AWS Java sdk v1","body":"<p>Currently we are having access key and secret access key stored in properties file and we are able to make all the Aws service calls, now we want to store access key and secret access key in ssm parameter store(we have been asked to store only in ssm not environment variable or system properties).</p>\n<p>Plan is to create a bean during bean instantiation which returns AwsCredentialsProvider with the values read from Ssm, not able to find how to make a call to ssm if the access key and secret access key are stored in ssm itself</p>\n<p>One way we have tried is, there is a lambda function which returns all these params in ssm(here also same doubt how we can call without credentials).\nFor the above scenario there is a lambda authorizer but the token we will get once a req is made to backend and we don't want to hit lambda function everytime to get those params.</p>\n<p>Would pls someone suggest any way to achieve this or any workaround?</p>\n"},{"tags":["java","encryption","udp","rc4-cipher"],"comments":[{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1675419248,"post_id":75333589,"comment_id":132929406,"body_markdown":"If I&#39;m reading the code correctly, you always send the entire 65535-byte `buffer` regardless of how much content you actually wanted to send.","body":"If I&#39;m reading the code correctly, you always send the entire 65535-byte <code>buffer</code> regardless of how much content you actually wanted to send."},{"owner":{"account_id":22282664,"reputation":37,"user_id":16510829,"display_name":"Zeffia"},"score":0,"creation_date":1675420767,"post_id":75333589,"comment_id":132929845,"body_markdown":"Altering the size of the byte buffer on the client side does seem to change the decrypted output length, but I&#39;m not sure how to do it to make it fit the size of the response from host...","body":"Altering the size of the byte buffer on the client side does seem to change the decrypted output length, but I&#39;m not sure how to do it to make it fit the size of the response from host..."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1675426660,"post_id":75333589,"comment_id":132931555,"body_markdown":"You&#39;re trying to decrypt the entire packet buffer instead of that fraction of it that contains the actual message. See my comment [HERE](https://stackoverflow.com/questions/75333814/extra-characters-appearing-after-rc4-decryption)","body":"You&#39;re trying to decrypt the entire packet buffer instead of that fraction of it that contains the actual message. See my comment <a href=\"https://stackoverflow.com/questions/75333814/extra-characters-appearing-after-rc4-decryption\">HERE</a>"},{"owner":{"account_id":22282664,"reputation":37,"user_id":16510829,"display_name":"Zeffia"},"score":0,"creation_date":1675430552,"post_id":75333589,"comment_id":132932682,"body_markdown":"@g00se Yeah I figured that out myself after much time spent messing around. Appreciate the help though!","body":"@g00se Yeah I figured that out myself after much time spent messing around. Appreciate the help though!"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1675434157,"post_id":75333589,"comment_id":132933925,"body_markdown":"Then you should have processed the question instead of letting people like me waste their time","body":"Then you should have processed the question instead of letting people like me waste their time"}],"answers":[{"tags":[],"owner":{"account_id":22282664,"reputation":37,"user_id":16510829,"display_name":"Zeffia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675447817,"creation_date":1675447817,"answer_id":75339565,"question_id":75333589,"body_markdown":"I was trying to decrypt the entire packet buffer instead of that fraction of it that contains the actual message, which resulted in the large wall of text after the actual decrypted message.\r\n\r\nAltering the decrypt function used to instead take in the appropriate packet size fixed the issue.","title":"Unknown ciphertext appended to decrypted plaintext","body":"<p>I was trying to decrypt the entire packet buffer instead of that fraction of it that contains the actual message, which resulted in the large wall of text after the actual decrypted message.</p>\n<p>Altering the decrypt function used to instead take in the appropriate packet size fixed the issue.</p>\n"}],"owner":{"account_id":22282664,"reputation":37,"user_id":16510829,"display_name":"Zeffia"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675447817,"creation_date":1675415406,"question_id":75333589,"body_markdown":"I&#39;m using a RC4 stream cipher to encrypt/decrypt data sent through a Java UDP client-server program. My code works as intended on the host program and displays the correct plaintext and ciphertext, but when the data is sent over to the client via UDP, the ciphertext in particular get a super long ciphertext appended to it. \r\n\r\nThe client is still able to decrypt it properly, I just don&#39;t understand where the random appended ciphertext is coming from.\r\n\r\n**Host program:**\r\n```\r\npublic class Host {\r\n\t\r\n\tprivate static final String ENCRYPTION_ALGORITHM = &quot;ARCFOUR&quot;; // or &quot;RC4&quot;\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\t\r\n\t\t//Use Java&#39;s built-in DatagramSocket and DatagramPacket to implement UDP\r\n\t\tDatagramSocket socket = new DatagramSocket(1500); //Create a socket to listen at port 1500\r\n\t    byte[] buf = new byte[65535]; //Byte array to wrap\r\n\t    \r\n\t    //Initialize P, G, H(PW), A variables\r\n\t    BigInteger P = null;\r\n\t    BigInteger G = null;\r\n\t    String hashedPW = null; //Hashed PW using SHA-1\r\n\t    BigInteger A = new BigInteger(10, new Random()); //Random number selected by Alice, maximum limit of 1000\r\n\t    BigInteger aliceKey = null;\r\n\t    \r\n\t    //Read in Diffie-Hellman parameters from param.txt\r\n\t    File file = new File(&quot;param.txt&quot;);\r\n\t    Scanner scan = new Scanner(file);\r\n\t    \r\n\t    //Loop through the entire file\r\n\t\twhile(scan.hasNextLine()) {\r\n\t\t\tint counter = 0;\r\n\t\t\tString delimiter = &quot;,&quot;; //Content in the file is separated using a comma\r\n\r\n\t\t\tString[] tokenValue = scan.nextLine().split(delimiter);\r\n\t\t\t\tfor (String token : tokenValue) {\r\n\t\t\t\t\tswitch (counter++) {\r\n\t\t\t\t\t\tcase 0: //Diffie-Hellman&#39;s P\r\n\t\t\t\t\t\t\tP = new BigInteger(token);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 1: //Diffie-Hellman&#39;s G\r\n\t\t\t\t\t\t\tG = new BigInteger(token);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 2: //Password hashed using SHA-1\r\n\t\t\t\t\t\t\thashedPW = token;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\tscan.close(); //Close scanner to prevent memory leaks\r\n\t\t\r\n\t\taliceKey = G.modPow(A, P); //Calculate g^a mod p to obtain Alice&#39;s public key\r\n\t\t\r\n\t\tbyte[] passwordBytes = hashedPW.getBytes();\r\n\t\t\r\n\t\t//Setting up RC4 stream cipher\r\n\t\tSecretKey secretKey = new SecretKeySpec(passwordBytes, 0 , passwordBytes.length, &quot;RC4&quot;); //Generate secret key using common password\r\n\t\tCipher rc4 = Cipher.getInstance(ENCRYPTION_ALGORITHM);\r\n\t\t\r\n\t    System.out.println(&quot;Parameters successfully read. Listening on port 1500...&quot;);\r\n\r\n\t    //While-loop to keep host running until terminated\r\n\t    while (true) {\r\n\t\t  DatagramPacket message = new DatagramPacket(buf, buf.length); //Create a packet to receive message\r\n\t      socket.receive(message); //Receive the message from Bob\r\n\t      \r\n\t      //If Alice receives a packet with the message &quot;Bob&quot;\r\n\t      if(new String(message.getData(),0,message.getLength()).equals(&quot;Bob&quot;)) {\r\n\t    \t  System.out.println(&quot;Bob has sent a connection request.&quot;);\r\n\t    \t  \r\n\t    \t  String msgToBob = hashedPW + &quot;,&quot; + P + &quot;,&quot; + G + &quot;,&quot; + aliceKey; //H(PW), P, G, G^A mod P\r\n\t    \t  message.setData(encrypt(msgToBob, secretKey, rc4)); //Encrypt data using RC4\r\n\t    \t  \r\n\t    \t  System.out.println(&quot;Ciphertext sent: &quot; + new String(message.getData(),0,message.getLength()));\r\n\t    \t  System.out.println(&quot;Decrypted text: &quot; + decrypt(secretKey, rc4, message.getData()));\r\n\t    \t  \r\n\t    \t  socket.send(message);\r\n\t      }\r\n\t    }\r\n\t}\r\n```\r\n\r\n**Client program:**\r\n```\r\npublic class Client {\r\n\t\r\n\tprivate static final String ENCRYPTION_ALGORITHM = &quot;ARCFOUR&quot;; // or &quot;RC4&quot;\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\t\r\n\t\t//Use Java&#39;s built-in DatagramSocket and DatagramPacket to implement UDP\r\n\t\tDatagramSocket socket = new DatagramSocket(); //Create socket object to send data\r\n\t\tbyte[] buffer = new byte[65535];\r\n\t\tsocket.setSoTimeout(5000); //Throw an exception if no data received within 5000ms\r\n\t\t\r\n\t    //Create scanner to grab user input\r\n\t    Scanner input = new Scanner(System.in);\r\n\t    System.out.print(&quot;Please enter the common password: &quot;);\r\n\t    String commonPW = input.nextLine(); //Storing the password\r\n\r\n\t    commonPW = encryptThisString(commonPW); //Hash using SHA-1\r\n\t    byte[] passwordBytes = commonPW.getBytes(); //Convert password to byte-array\r\n\t    \r\n\t\t//Setting up RC4 stream cipher\r\n\t\tSecretKey secretKey = new SecretKeySpec(passwordBytes, 0 , passwordBytes.length, &quot;RC4&quot;); //Generate secret key using common password\r\n        Cipher rc4 = Cipher.getInstance(ENCRYPTION_ALGORITHM);\r\n\t    \r\n        System.out.print(&quot;Enter a message to send to Alice: &quot;);\r\n\t    String bobInput = input.nextLine();\r\n\t    \r\n\t\t//Create packet containing message\r\n\t\tDatagramPacket message = new DatagramPacket(buffer, buffer.length, InetAddress.getByName(&quot;localhost&quot;), 1500);\r\n\t\tmessage.setData(bobInput.getBytes());\r\n\t\tsocket.send(message); //Send message to host\r\n\t\t\r\n\t\t//Create separate packet to receive response (so that its length is big enough to accept)\r\n\t\tDatagramPacket response = new DatagramPacket(buffer, buffer.length);\r\n\t\tsocket.receive(response);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Received from Alice: &quot; + new String(response.getData(),0,response.getLength()));\r\n\t\tSystem.out.println(&quot;Decrypted text: &quot; + decrypt(secretKey, rc4, response.getData()));\r\n\t\t\r\n\t\tsocket.close();\r\n\t}\r\n```\r\nAnd here&#39;s the same methods in both programs used to encrypt/decrypt data:\r\n```\r\nprivate static byte[] encrypt(String plaintext, SecretKey secretKey, Cipher rc4) throws InvalidKeyException, IllegalBlockSizeException, BadPaddingException {\r\n          rc4.init(Cipher.ENCRYPT_MODE, secretKey);\r\n          byte[] plaintextBytes = plaintext.getBytes();\r\n          byte[] ciphertextBytes = rc4.doFinal(plaintextBytes);\r\n          //System.out.println(&quot;RC4 ciphertext base64 encoded: &quot; + Base64.encodeBase64String(ciphertextBytes));\r\n          return ciphertextBytes;\r\n      }\r\n\r\n      private static String decrypt(SecretKey secretKey, Cipher rc4, byte[] ciphertextBytes) throws InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {\r\n          rc4.init(Cipher.DECRYPT_MODE, secretKey, rc4.getParameters());\r\n          byte[] byteDecryptedText = rc4.doFinal(ciphertextBytes);\r\n          String plaintextBack = new String(byteDecryptedText);\r\n          return plaintextBack;\r\n      }\r\n```\r\n\r\nThe console output for host:\r\n\r\n&gt; Parameters successfully read. Listening on port 1500...\r\n&gt; \r\n&gt; Bob has sent a connection request.\r\n&gt; \r\n&gt; q?Md`|-A????&#177;?h??♥?a????h&#182;^O&#160;e&#198;&#225;&lt;&#177;?&#255;.♂/?9&#167;}5?aaJj??f&#235;???7&#243;Ip&#167;T▬??&#241;k??l&#252;m&#181;&#197;⌂&#187;??=L?r&#250;k?&#167;}x☻?.☻j:A&#183;&#230;u?8&#235;∟2&#228;q*k∟♥?C?$??VZI&#249;?!0|?&#225;=I?X{♥&#178;&quot;‼&#176;▲|c??2&#178;ht??&#178;☻P=?T?&quot;?,9?ƒZ▼?X??M=d\r\n&gt; u&#246;&#229;&#228;$M☼&#241;?&quot;♂♀&#246;&#171;2&amp;??SC?&#238;?&#197;?|?#?B??⌂b9?♀??T?l&#198;ƒ&#238;\r\n&gt; D^&#237;?&#224;&#234;oO3{N3♦^L&#178;&#188;?=&#235;??-?|?O{???B?♣\r\n&gt; #&#198;??&#189;.&#236;V:&#243;?&#177;]&#220;4▲?|rA&#163;jEGJ&#233;??♠?$K&quot;&#39;=&#171;??D&#187;m←&#255;4?J↕&#165;&#167;y&#182;[&#163;↨?U&#172;y-?&#255;p&#235;&#241;&#249;&#171;←x→`↨[&#178;&#228;ueN???↨}☻zƒy??si??z?U[q??Q\r\n&gt; ?+?&#247;&#161;,7&#220;?S{6?l???&#178;??↨?%?+&#252;&#225;???\r\n&gt; &#39;&#189;?J??&#171;?&#182;?T.&#177;@=Q!&#243;??&gt;&#189;&#235;Y2?P☻a♂**?iLO???☺⌂♫?&#241;=N?&#246;?k$4??&#228;&#238;&#243;&#237;←?si?↓&#236;&#220;g∟Z6↕?&#181;&#225;&#249;&#189;R&#251;▲b?9&#181;,???g?6&#249;?→nv?&#251;y&#181;&#246;?M&#191;U♥&#226;?\r\n&gt; e[?V?Z&#244;$&#191;?&#162;&#244;q♥j????G??|?~0&#199;GZ?z♥68&amp;MoK??v&#183;$&lt;`?&#226;Z^??Ys??[g??    \r\n&gt; &#189;&#229;\\▬&#223;&#191;?&#183;↔!N???.?&#39;?AD?Vg?&#235;n&#162;-6&#244;\r\n&gt; ???0,&#246;???}l&#228;??Y?D?X&#241;&#172;?&#186;??&#178;☺r&#165;&#239;??1?#pq?►p?▬??FM&#220;-m&gt;&#223;&#241;&#232;,?&#161;r??&#181;&#177;@?C?&#182;&#163;?&#191;→?oi&#160;O??♥&#243;e&#242;M&#163;?N\r\n&gt; &#235;_?▲&#232;v&#161;&#239;?&#220;(?&#246;W♥w&#178;&#249;]q???e♠&#224;♠&#237;&#244;?&#237;^??QM?^?5&#233;&#209;??V(???&#160;V?`&gt;&#232;?&#224;%?D-r∟&#220;1??   \r\n&gt; N↑??&#183;*?A?tT&#223;&#230;i?[??&#250;&#172;c&#162;ƒl??↓▲&#255;ie→?♠tL&#161;??&#39;&#209;e&#247;∟ ƒ&#237;?♠↑4 &#196;?R;}?:&#39;&#161;!n6◄▲\r\n&gt; ☻&#39;??r?I???↨&#172;z?→X&#196;??☼&#196;{&#241;:&#226;⌂$&#234;{????&#224;&#223;?FR&#237;???☻&#170;3?#9‼/&#191;?$/&#239;?{&#231;      \r\n&gt; &#246;&#251;u&#189;Rz?▼?&#244;,??◄K[P∟►&#167;PS??))?&#226;?d▲&#237;♥?9??&#220;?&#161;?       &#171;&#171;+?☼☺?&lt;&lt;&#176;n&#188;?♂%&#243;&#238;↔&#250;&#246;g\r\n&gt; \r\n&gt; Decrypted text:\r\n&gt; 62a91401ef53536f5e4a282ca75ce2505b7f8dfe,133369106234410027239548844977121529173266794839390492022055432118963330212454946189658890281117740419231366102782626716256746218028068963594259491015958826219687167085932845323487318056081767660358673429760060452507829995471137991271021787608959982667244524929925606086596447565032707095625628293300812984091,15635507126291796032175381295261956049808038047523713881770866167494167302066120851790523759612392465402233123769308400911864440257625348397936936978922581645934310469147780992255584968935730234568508327975497520199946653504137607154138430285573487119797346741445139288140860073660395495603540644148828628224,96950246366083756365146382678616471348261490848687079335489625506702434220187716384031671233394087317377823909861019537627642960196032766557467991541000545780675424518198042877768900211198791646583260247888450303207379340549434158094990174523043323964083031376798844776809887666868545542060025549549427788304\r\n\r\nOutput for Client is similar except for the decrypted plaintext:\r\n\r\n&gt; Please enter the common password: Popcorn\r\n&gt; \r\n&gt; Enter a message to send to Alice: Bob\r\n&gt; \r\n&gt; q?Md`|-A????&#177;?h??♥?a????h&#182;^O&#160;e&#198;&#225;&lt;&#177;?&#255;.♂/?9&#167;}5?aaJj??f&#235;???7&#243;Ip&#167;T▬??&#241;k??l&#252;m&#181;&#197;⌂&#187;??=L?r&#250;k?&#167;}x☻?.☻j:A&#183;&#230;u?8&#235;∟2&#228;q*k∟♥?C?$??VZI&#249;?!0|?&#225;=I?X{♥&#178;&quot;‼&#176;▲|c??2&#178;ht??&#178;☻P=?T?&quot;?,9?ƒZ▼?X??M=d\r\n&gt; u&#246;&#229;&#228;$M☼&#241;?&quot;♂♀&#246;&#171;2&amp;??SC?&#238;?&#197;?|?#?B??⌂b9?♀??T?l&#198;ƒ&#238;\r\n&gt; D^&#237;?&#224;&#234;oO3{N3♦^L&#178;&#188;?=&#235;??-?|?O{???B?♣\r\n&gt; #&#198;??&#189;.&#236;V:&#243;?&#177;]&#220;4▲?|rA&#163;jEGJ&#233;??♠?$K&quot;&#39;=&#171;??D&#187;m←&#255;4?J↕&#165;&#167;y&#182;[&#163;↨?U&#172;y-?&#255;p&#235;&#241;&#249;&#171;←x→`↨[&#178;&#228;ueN???↨}☻zƒy??si??z?U[q??Q\r\n&gt; ?+?&#247;&#161;,7&#220;?S{6?l???&#178;??↨?%?+&#252;&#225;???\r\n&gt; &#39;&#189;?J??&#171;?&#182;?T.&#177;@=Q!&#243;??&gt;&#189;&#235;Y2?P☻a♂**?iLO???☺⌂♫?&#241;=N?&#246;?k$4??&#228;&#238;&#243;&#237;←?si?↓&#236;&#220;g∟Z6↕?&#181;&#225;&#249;&#189;R&#251;▲b?9&#181;,???g?6&#249;?→nv?&#251;y&#181;&#246;?M&#191;U♥&#226;?\r\n&gt; e[?V?Z&#244;$&#191;?&#162;&#244;q♥j????G??|?~0&#199;GZ?z♥68&amp;MoK??v&#183;$&lt;`?&#226;Z^??Ys??[g??    \r\n&gt; &#189;&#229;\\▬&#223;&#191;?&#183;↔!N???.?&#39;?AD?Vg?&#235;n&#162;-6&#244;\r\n&gt; ???0,&#246;???}l&#228;??Y?D?X&#241;&#172;?&#186;??&#178;☺r&#165;&#239;??1?#pq?►p?▬??FM&#220;-m&gt;&#223;&#241;&#232;,?&#161;r??&#181;&#177;@?C?&#182;&#163;?&#191;→?oi&#160;O??♥&#243;e&#242;M&#163;?N\r\n&gt; &#235;_?▲&#232;v&#161;&#239;?&#220;(?&#246;W♥w&#178;&#249;]q???e♠&#224;♠&#237;&#244;?&#237;^??QM?^?5&#233;&#209;??V(???&#160;V?`&gt;&#232;?&#224;%?D-r∟&#220;1??   \r\n&gt; N↑??&#183;*?A?tT&#223;&#230;i?[??&#250;&#172;c&#162;ƒl??↓▲&#255;ie→?♠tL&#161;??&#39;&#209;e&#247;∟ ƒ&#237;?♠↑4 &#196;?R;}?:&#39;&#161;!n6◄▲\r\n&gt; ☻&#39;??r?I???↨&#172;z?→X&#196;??☼&#196;{&#241;:&#226;⌂$&#234;{????&#224;&#223;?FR&#237;???☻&#170;3?#9‼/&#191;?$/&#239;?{&#231;      \r\n&gt; &#246;&#251;u&#189;Rz?▼?&#244;,??◄K[P∟►&#167;PS??))?&#226;?d▲&#237;♥?9??&#220;?&#161;?       &#171;&#171;+?☼☺?&lt;&lt;&#176;n&#188;?♂%&#243;&#238;↔&#250;&#246;g\r\n&gt; \r\n&gt; Decrypted text:\r\n&gt; 62a91401ef53536f5e4a282ca75ce2505b7f8dfe,133369106234410027239548844977121529173266794839390492022055432118963330212454946189658890281117740419231366102782626716256746218028068963594259491015958826219687167085932845323487318056081767660358673429760060452507829995471137991271021787608959982667244524929925606086596447565032707095625628293300812984091,15635507126291796032175381295261956049808038047523713881770866167494167302066120851790523759612392465402233123769308400911864440257625348397936936978922581645934310469147780992255584968935730234568508327975497520199946653504137607154138430285573487119797346741445139288140860073660395495603540644148828628224,96950246366083756365146382678616471348261490848687079335489625506702434220187716384031671233394087317377823909861019537627642960196032766557467991541000545780675424518198042877768900211198791646583260247888450303207379340549434158094990174523043323964083031376798844776809887666868545542060025549549427788304?&#250;mB&#189;&#196;????←&#234;???►\\d⌂h♦4LM♣☼&#187;??*&#209;?&#236;?&#231;t&#186;???&#236;?.◄☺????xK♥??&#196;4&#246;&#243;↑↨\r\n&gt; 4?&#225;☼m&#235;Q&#171;a\r\n\r\nThe actual output is much longer for the client program, I didn&#39;t copy the entire appended ciphertext. Not sure if it&#39;s relevant, but the console makes some Windows notification/error noise when it runs as well, although it doesn&#39;t actually give any compilation errors. I&#39;m running my program using command prompt.\r\n\r\nI don&#39;t think the issue lies with the decryption as I tested with some text on both the host and client programs and I managed to get the same decrypted plaintext just fine. Only when I send the data over UDP it causes this issue it seems.\r\n\r\n*The text infront of the original ciphertext such as &quot;Ciphertext sent: &quot; gets omitted in the output as well.*\r\n\r\nWhat am I missing?","title":"Unknown ciphertext appended to decrypted plaintext","body":"<p>I'm using a RC4 stream cipher to encrypt/decrypt data sent through a Java UDP client-server program. My code works as intended on the host program and displays the correct plaintext and ciphertext, but when the data is sent over to the client via UDP, the ciphertext in particular get a super long ciphertext appended to it.</p>\n<p>The client is still able to decrypt it properly, I just don't understand where the random appended ciphertext is coming from.</p>\n<p><strong>Host program:</strong></p>\n<pre><code>public class Host {\n    \n    private static final String ENCRYPTION_ALGORITHM = &quot;ARCFOUR&quot;; // or &quot;RC4&quot;\n\n    public static void main(String[] args) throws Exception {\n        \n        //Use Java's built-in DatagramSocket and DatagramPacket to implement UDP\n        DatagramSocket socket = new DatagramSocket(1500); //Create a socket to listen at port 1500\n        byte[] buf = new byte[65535]; //Byte array to wrap\n        \n        //Initialize P, G, H(PW), A variables\n        BigInteger P = null;\n        BigInteger G = null;\n        String hashedPW = null; //Hashed PW using SHA-1\n        BigInteger A = new BigInteger(10, new Random()); //Random number selected by Alice, maximum limit of 1000\n        BigInteger aliceKey = null;\n        \n        //Read in Diffie-Hellman parameters from param.txt\n        File file = new File(&quot;param.txt&quot;);\n        Scanner scan = new Scanner(file);\n        \n        //Loop through the entire file\n        while(scan.hasNextLine()) {\n            int counter = 0;\n            String delimiter = &quot;,&quot;; //Content in the file is separated using a comma\n\n            String[] tokenValue = scan.nextLine().split(delimiter);\n                for (String token : tokenValue) {\n                    switch (counter++) {\n                        case 0: //Diffie-Hellman's P\n                            P = new BigInteger(token);\n                            break;\n                        case 1: //Diffie-Hellman's G\n                            G = new BigInteger(token);\n                            break;\n                        case 2: //Password hashed using SHA-1\n                            hashedPW = token;\n                            break;\n                    }\n                }\n            }\n        scan.close(); //Close scanner to prevent memory leaks\n        \n        aliceKey = G.modPow(A, P); //Calculate g^a mod p to obtain Alice's public key\n        \n        byte[] passwordBytes = hashedPW.getBytes();\n        \n        //Setting up RC4 stream cipher\n        SecretKey secretKey = new SecretKeySpec(passwordBytes, 0 , passwordBytes.length, &quot;RC4&quot;); //Generate secret key using common password\n        Cipher rc4 = Cipher.getInstance(ENCRYPTION_ALGORITHM);\n        \n        System.out.println(&quot;Parameters successfully read. Listening on port 1500...&quot;);\n\n        //While-loop to keep host running until terminated\n        while (true) {\n          DatagramPacket message = new DatagramPacket(buf, buf.length); //Create a packet to receive message\n          socket.receive(message); //Receive the message from Bob\n          \n          //If Alice receives a packet with the message &quot;Bob&quot;\n          if(new String(message.getData(),0,message.getLength()).equals(&quot;Bob&quot;)) {\n              System.out.println(&quot;Bob has sent a connection request.&quot;);\n              \n              String msgToBob = hashedPW + &quot;,&quot; + P + &quot;,&quot; + G + &quot;,&quot; + aliceKey; //H(PW), P, G, G^A mod P\n              message.setData(encrypt(msgToBob, secretKey, rc4)); //Encrypt data using RC4\n              \n              System.out.println(&quot;Ciphertext sent: &quot; + new String(message.getData(),0,message.getLength()));\n              System.out.println(&quot;Decrypted text: &quot; + decrypt(secretKey, rc4, message.getData()));\n              \n              socket.send(message);\n          }\n        }\n    }\n</code></pre>\n<p><strong>Client program:</strong></p>\n<pre><code>public class Client {\n    \n    private static final String ENCRYPTION_ALGORITHM = &quot;ARCFOUR&quot;; // or &quot;RC4&quot;\n\n    public static void main(String[] args) throws Exception {\n        \n        //Use Java's built-in DatagramSocket and DatagramPacket to implement UDP\n        DatagramSocket socket = new DatagramSocket(); //Create socket object to send data\n        byte[] buffer = new byte[65535];\n        socket.setSoTimeout(5000); //Throw an exception if no data received within 5000ms\n        \n        //Create scanner to grab user input\n        Scanner input = new Scanner(System.in);\n        System.out.print(&quot;Please enter the common password: &quot;);\n        String commonPW = input.nextLine(); //Storing the password\n\n        commonPW = encryptThisString(commonPW); //Hash using SHA-1\n        byte[] passwordBytes = commonPW.getBytes(); //Convert password to byte-array\n        \n        //Setting up RC4 stream cipher\n        SecretKey secretKey = new SecretKeySpec(passwordBytes, 0 , passwordBytes.length, &quot;RC4&quot;); //Generate secret key using common password\n        Cipher rc4 = Cipher.getInstance(ENCRYPTION_ALGORITHM);\n        \n        System.out.print(&quot;Enter a message to send to Alice: &quot;);\n        String bobInput = input.nextLine();\n        \n        //Create packet containing message\n        DatagramPacket message = new DatagramPacket(buffer, buffer.length, InetAddress.getByName(&quot;localhost&quot;), 1500);\n        message.setData(bobInput.getBytes());\n        socket.send(message); //Send message to host\n        \n        //Create separate packet to receive response (so that its length is big enough to accept)\n        DatagramPacket response = new DatagramPacket(buffer, buffer.length);\n        socket.receive(response);\n        \n        System.out.println(&quot;Received from Alice: &quot; + new String(response.getData(),0,response.getLength()));\n        System.out.println(&quot;Decrypted text: &quot; + decrypt(secretKey, rc4, response.getData()));\n        \n        socket.close();\n    }\n</code></pre>\n<p>And here's the same methods in both programs used to encrypt/decrypt data:</p>\n<pre><code>private static byte[] encrypt(String plaintext, SecretKey secretKey, Cipher rc4) throws InvalidKeyException, IllegalBlockSizeException, BadPaddingException {\n          rc4.init(Cipher.ENCRYPT_MODE, secretKey);\n          byte[] plaintextBytes = plaintext.getBytes();\n          byte[] ciphertextBytes = rc4.doFinal(plaintextBytes);\n          //System.out.println(&quot;RC4 ciphertext base64 encoded: &quot; + Base64.encodeBase64String(ciphertextBytes));\n          return ciphertextBytes;\n      }\n\n      private static String decrypt(SecretKey secretKey, Cipher rc4, byte[] ciphertextBytes) throws InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {\n          rc4.init(Cipher.DECRYPT_MODE, secretKey, rc4.getParameters());\n          byte[] byteDecryptedText = rc4.doFinal(ciphertextBytes);\n          String plaintextBack = new String(byteDecryptedText);\n          return plaintextBack;\n      }\n</code></pre>\n<p>The console output for host:</p>\n<blockquote>\n<p>Parameters successfully read. Listening on port 1500...</p>\n<p>Bob has sent a connection request.</p>\n<p>q?Md<code>|-A????±?h??♥?a????h¶^O eÆá&lt;±?ÿ.♂/?9§}5?aaJj??fë???7óIp§T▬??ñk??lümµÅ⌂»??=L?rúk?§}x☻?.☻j:A·æu?8ë∟2äq*k∟♥?C?$??VZIù?!0|?á=I?X{♥²&quot;‼°▲|c??2²ht??²☻P=?T?&quot;?,9?ƒZ▼?X??M=d uöåä$M☼ñ?&quot;♂♀ö«2&amp;??SC?î?Å?|?#?B??⌂b9?♀??T?lÆƒî D^í?àêoO3{N3♦^L²¼?=ë??-?|?O{???B?♣ #Æ??½.ìV:ó?±]Ü4▲?|rA£jEGJé??♠?$K&quot;'=«??D»m←ÿ4?J↕¥§y¶[£↨?U¬y-?ÿpëñù«←x→</code>↨[²äueN???↨}☻zƒy??si??z?U[q??Q\n?+?÷¡,7Ü?S{6?l???²??↨?%?+üá???\n'½?J??«?¶?T.±@=Q!ó??&gt;½ëY2?P☻a♂**?iLO???☺⌂♫?ñ=N?ö?k$4??äîóí←?si?↓ìÜg∟Z6↕?µáù½Rû▲b?9µ,???g?6ù?→nv?ûyµö?M¿U♥â?\ne[?V?Zô$¿?¢ôq♥j????G??|?~0ÇGZ?z♥68&amp;MoK??v·$&lt;<code>?âZ^??Ys??[g??     ½å\\▬ß¿?·↔!N???.?'?AD?Vg?ën¢-6ô ???0,ö???}lä??Y?D?Xñ¬?º??²☺r¥ï??1?#pq?►p?▬??FMÜ-m&gt;ßñè,?¡r??µ±@?C?¶£?¿→?oi O??♥óeòM£?N ë_?▲èv¡ï?Ü(?öW♥w²ù]q???e♠à♠íô?í^??QM?^?5éÑ??V(??? V?</code>&gt;è?à%?D-r∟Ü1??<br />\nN↑??·*?A?tTßæi?[??ú¬c¢ƒl??↓▲ÿie→?♠tL¡??'Ñe÷∟ ƒí?♠↑4 Ä?R;}?:'¡!n6◄▲\n☻'??r?I???↨¬z?→XÄ??☼Ä{ñ:â⌂$ê{????àß?FRí???☻ª3?#9‼/¿?$/ï?{ç<br />\nöûu½Rz?▼?ô,??◄K[P∟►§PS??))?â?d▲í♥?9??Ü?¡?       ««+?☼☺?&lt;&lt;°n¼?♂%óî↔úög</p>\n<p>Decrypted text:\n62a91401ef53536f5e4a282ca75ce2505b7f8dfe,133369106234410027239548844977121529173266794839390492022055432118963330212454946189658890281117740419231366102782626716256746218028068963594259491015958826219687167085932845323487318056081767660358673429760060452507829995471137991271021787608959982667244524929925606086596447565032707095625628293300812984091,15635507126291796032175381295261956049808038047523713881770866167494167302066120851790523759612392465402233123769308400911864440257625348397936936978922581645934310469147780992255584968935730234568508327975497520199946653504137607154138430285573487119797346741445139288140860073660395495603540644148828628224,96950246366083756365146382678616471348261490848687079335489625506702434220187716384031671233394087317377823909861019537627642960196032766557467991541000545780675424518198042877768900211198791646583260247888450303207379340549434158094990174523043323964083031376798844776809887666868545542060025549549427788304</p>\n</blockquote>\n<p>Output for Client is similar except for the decrypted plaintext:</p>\n<blockquote>\n<p>Please enter the common password: Popcorn</p>\n<p>Enter a message to send to Alice: Bob</p>\n<p>q?Md<code>|-A????±?h??♥?a????h¶^O eÆá&lt;±?ÿ.♂/?9§}5?aaJj??fë???7óIp§T▬??ñk??lümµÅ⌂»??=L?rúk?§}x☻?.☻j:A·æu?8ë∟2äq*k∟♥?C?$??VZIù?!0|?á=I?X{♥²&quot;‼°▲|c??2²ht??²☻P=?T?&quot;?,9?ƒZ▼?X??M=d uöåä$M☼ñ?&quot;♂♀ö«2&amp;??SC?î?Å?|?#?B??⌂b9?♀??T?lÆƒî D^í?àêoO3{N3♦^L²¼?=ë??-?|?O{???B?♣ #Æ??½.ìV:ó?±]Ü4▲?|rA£jEGJé??♠?$K&quot;'=«??D»m←ÿ4?J↕¥§y¶[£↨?U¬y-?ÿpëñù«←x→</code>↨[²äueN???↨}☻zƒy??si??z?U[q??Q\n?+?÷¡,7Ü?S{6?l???²??↨?%?+üá???\n'½?J??«?¶?T.±@=Q!ó??&gt;½ëY2?P☻a♂**?iLO???☺⌂♫?ñ=N?ö?k$4??äîóí←?si?↓ìÜg∟Z6↕?µáù½Rû▲b?9µ,???g?6ù?→nv?ûyµö?M¿U♥â?\ne[?V?Zô$¿?¢ôq♥j????G??|?~0ÇGZ?z♥68&amp;MoK??v·$&lt;<code>?âZ^??Ys??[g??     ½å\\▬ß¿?·↔!N???.?'?AD?Vg?ën¢-6ô ???0,ö???}lä??Y?D?Xñ¬?º??²☺r¥ï??1?#pq?►p?▬??FMÜ-m&gt;ßñè,?¡r??µ±@?C?¶£?¿→?oi O??♥óeòM£?N ë_?▲èv¡ï?Ü(?öW♥w²ù]q???e♠à♠íô?í^??QM?^?5éÑ??V(??? V?</code>&gt;è?à%?D-r∟Ü1??<br />\nN↑??·*?A?tTßæi?[??ú¬c¢ƒl??↓▲ÿie→?♠tL¡??'Ñe÷∟ ƒí?♠↑4 Ä?R;}?:'¡!n6◄▲\n☻'??r?I???↨¬z?→XÄ??☼Ä{ñ:â⌂$ê{????àß?FRí???☻ª3?#9‼/¿?$/ï?{ç<br />\nöûu½Rz?▼?ô,??◄K[P∟►§PS??))?â?d▲í♥?9??Ü?¡?       ««+?☼☺?&lt;&lt;°n¼?♂%óî↔úög</p>\n<p>Decrypted text:\n62a91401ef53536f5e4a282ca75ce2505b7f8dfe,133369106234410027239548844977121529173266794839390492022055432118963330212454946189658890281117740419231366102782626716256746218028068963594259491015958826219687167085932845323487318056081767660358673429760060452507829995471137991271021787608959982667244524929925606086596447565032707095625628293300812984091,15635507126291796032175381295261956049808038047523713881770866167494167302066120851790523759612392465402233123769308400911864440257625348397936936978922581645934310469147780992255584968935730234568508327975497520199946653504137607154138430285573487119797346741445139288140860073660395495603540644148828628224,96950246366083756365146382678616471348261490848687079335489625506702434220187716384031671233394087317377823909861019537627642960196032766557467991541000545780675424518198042877768900211198791646583260247888450303207379340549434158094990174523043323964083031376798844776809887666868545542060025549549427788304?úmB½Ä????←ê???►\\d⌂h♦4LM♣☼»??*Ñ?ì?çtº???ì?.◄☺????xK♥??Ä4öó↑↨\n4?á☼mëQ«a</p>\n</blockquote>\n<p>The actual output is much longer for the client program, I didn't copy the entire appended ciphertext. Not sure if it's relevant, but the console makes some Windows notification/error noise when it runs as well, although it doesn't actually give any compilation errors. I'm running my program using command prompt.</p>\n<p>I don't think the issue lies with the decryption as I tested with some text on both the host and client programs and I managed to get the same decrypted plaintext just fine. Only when I send the data over UDP it causes this issue it seems.</p>\n<p><em>The text infront of the original ciphertext such as &quot;Ciphertext sent: &quot; gets omitted in the output as well.</em></p>\n<p>What am I missing?</p>\n"},{"tags":["java","android","android-studio","kotlin"],"answers":[{"tags":[],"owner":{"account_id":14313475,"reputation":88,"user_id":10338991,"display_name":"Ahmet Korkmaz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616504485,"creation_date":1616504485,"answer_id":66763680,"question_id":66752057,"body_markdown":"If you are talking about throwing an exception: `throw new Exception(&quot;Exception message&quot;);` this is for Java. For Kotlin it&#39;s similar with a little change :[Kotlin nothing exception][1]\r\n\r\n\r\n  [1]: https://kotlinlang.org/docs/exceptions.html#the-nothing-type","title":"Can you force a compiler warning or error in Kotlin/Java?","body":"<p>If you are talking about throwing an exception: <code>throw new Exception(&quot;Exception message&quot;);</code> this is for Java. For Kotlin it's similar with a little change :<a href=\"https://kotlinlang.org/docs/exceptions.html#the-nothing-type\" rel=\"nofollow noreferrer\">Kotlin nothing exception</a></p>\n"},{"tags":[],"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675447704,"creation_date":1675447704,"answer_id":75339551,"question_id":66752057,"body_markdown":"I know I&#39;m late to the party here, but for that specific case, `TODO` comments are great. They are just like any other comment, but Android Studio (and IntelliJ for that matter) will highlight them differently and there&#39;s a special TODO window available that shows all the TODO-comments in the file or project. Here&#39;s an example:\r\n\r\n    // TODO This will be hightlighted by Android Studio","title":"Can you force a compiler warning or error in Kotlin/Java?","body":"<p>I know I'm late to the party here, but for that specific case, <code>TODO</code> comments are great. They are just like any other comment, but Android Studio (and IntelliJ for that matter) will highlight them differently and there's a special TODO window available that shows all the TODO-comments in the file or project. Here's an example:</p>\n<pre><code>// TODO This will be hightlighted by Android Studio\n</code></pre>\n"}],"owner":{"account_id":5703575,"reputation":483,"user_id":14251124,"display_name":"Vym"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1144,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1675447704,"creation_date":1616438574,"question_id":66752057,"body_markdown":"Having a background in iOS development, I&#39;m quite used to using this directive for intentionally triggering a compiler warning (in Swift):\r\n\r\n```swift\r\n#warning(&quot;This will output as a warning during compilation&quot;)\r\n```\r\n\r\nor this one to trigger an error:\r\n\r\n```swift\r\n#error(&quot;This will output as an error during compilation&quot;)\r\n```\r\n\r\nThis is very useful if, for example, I need to defer attention to the code fragment in question, or when using conditional compiler directives. I really miss this feature during Android development (in Kotlin, preferably, but I&#39;m also curious about a similar Java feature). \r\n\r\nI&#39;d like to know if there&#39;s at least an alternative for doing this, especially if it&#39;s integrated well into Android Studio and the compiler.","title":"Can you force a compiler warning or error in Kotlin/Java?","body":"<p>Having a background in iOS development, I'm quite used to using this directive for intentionally triggering a compiler warning (in Swift):</p>\n<pre class=\"lang-swift prettyprint-override\"><code>#warning(&quot;This will output as a warning during compilation&quot;)\n</code></pre>\n<p>or this one to trigger an error:</p>\n<pre class=\"lang-swift prettyprint-override\"><code>#error(&quot;This will output as an error during compilation&quot;)\n</code></pre>\n<p>This is very useful if, for example, I need to defer attention to the code fragment in question, or when using conditional compiler directives. I really miss this feature during Android development (in Kotlin, preferably, but I'm also curious about a similar Java feature).</p>\n<p>I'd like to know if there's at least an alternative for doing this, especially if it's integrated well into Android Studio and the compiler.</p>\n"},{"tags":["java","generics","reflection"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":4,"creation_date":1675447283,"post_id":75339460,"comment_id":132938336,"body_markdown":"Have you tried this? Object IS a superclass of List, so this just works.","body":"Have you tried this? Object IS a superclass of List, so this just works."},{"owner":{"account_id":8865173,"reputation":135,"user_id":7028615,"accept_rate":40,"display_name":"Frank Ponte"},"score":1,"creation_date":1675447484,"post_id":75339460,"comment_id":132938394,"body_markdown":"@S&#246;ren Oh wow. Because of your comment i rechecked my code and it seems that I just had an extra parenthesis, I also thought that about Object being a super class that includes List, but overthought it instead going to the basics. Thank you!!","body":"@S&#246;ren Oh wow. Because of your comment i rechecked my code and it seems that I just had an extra parenthesis, I also thought that about Object being a super class that includes List, but overthought it instead going to the basics. Thank you!!"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1675451899,"post_id":75339460,"comment_id":132939574,"body_markdown":"Side note: you only need `Map.entry(…)` when you want to initialize a map with more than ten entries (or truly have a need for `Map.Entry` instances themselves). For the simple cases, you can just write `public static final Map&lt;String, Object&gt; INITIALIZER = Map.of(&quot;field1&quot;, &quot;String&quot;, &quot;field2&quot;, new BigDecimal(&quot;23.43&quot;), &quot;listField3&quot;, List.of(&quot;e1&quot;,&quot;e2&quot;));`","body":"Side note: you only need <code>Map.entry(…)</code> when you want to initialize a map with more than ten entries (or truly have a need for <code>Map.Entry</code> instances themselves). For the simple cases, you can just write <code>public static final Map&lt;String, Object&gt; INITIALIZER = Map.of(&quot;field1&quot;, &quot;String&quot;, &quot;field2&quot;, new BigDecimal(&quot;23.43&quot;), &quot;listField3&quot;, List.of(&quot;e1&quot;,&quot;e2&quot;));</code>"}],"owner":{"account_id":8865173,"reputation":135,"user_id":7028615,"accept_rate":40,"display_name":"Frank Ponte"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675447029,"creation_date":1675447029,"question_id":75339460,"body_markdown":"I&#39;m trying to initialize a class with Reflection and a Map (This due a more complex requirement, I just isolated the example)\r\n\r\n```\r\npublic class ParentDto {\r\n    private String field1;\r\n    private BigDecimal field2;\r\n    private List&lt;AClass&gt; listField3;\r\n}\r\n```\r\n\r\nI created a map to set values for the first 2 fields with a generic value Map\r\n\r\n```\r\npublic static final Map&lt;String, Object&gt; INITIALIZER = Map.ofEntries(\r\n    Map.entry(&quot;field1&quot;, &quot;String&quot;),\r\n    Map.entry(&quot;field2&quot;, new BigDecimal(&quot;23.43&quot;)\r\n```\r\n\r\nHowever, if i try to do the same for the list it will fail. It makes sense since Object is not a Base Class for List&lt;Object&gt;. My question is: Is there any way I can add\r\n```\r\nMap.entry(&quot;listField3&quot;, List.of(&quot;e1&quot;,&quot;e2&quot;))\r\n```\r\n\r\ninto my static map? A superclass that have in common both Objects and List&lt;Object&gt;","title":"Is there a generic type that contains any Object class and a List&lt;Object&gt; in Java?","body":"<p>I'm trying to initialize a class with Reflection and a Map (This due a more complex requirement, I just isolated the example)</p>\n<pre><code>public class ParentDto {\n    private String field1;\n    private BigDecimal field2;\n    private List&lt;AClass&gt; listField3;\n}\n</code></pre>\n<p>I created a map to set values for the first 2 fields with a generic value Map</p>\n<pre><code>public static final Map&lt;String, Object&gt; INITIALIZER = Map.ofEntries(\n    Map.entry(&quot;field1&quot;, &quot;String&quot;),\n    Map.entry(&quot;field2&quot;, new BigDecimal(&quot;23.43&quot;)\n</code></pre>\n<p>However, if i try to do the same for the list it will fail. It makes sense since Object is not a Base Class for List. My question is: Is there any way I can add</p>\n<pre><code>Map.entry(&quot;listField3&quot;, List.of(&quot;e1&quot;,&quot;e2&quot;))\n</code></pre>\n<p>into my static map? A superclass that have in common both Objects and List</p>\n"},{"tags":["java","flutter","gradle"],"owner":{"account_id":27573695,"reputation":11,"user_id":21044377,"display_name":"Maciej Wawryszuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675447005,"creation_date":1675444241,"question_id":75338971,"body_markdown":"I have a problem , I am trying to connect to the FairBid plugin and it keeps giving me this error and the app is not building , is there any way to make it work so I can fire up the Flutter App and open the ad? I don&#39;t know if I imported everything correctly or if it&#39;s a problem with the code in Mainactivity.java , I would appreciate your help\r\n\r\n[My Error][1]\r\n\r\nMainActivity\r\n\r\n\r\n```\r\npackage com.example.firebirdtest;\r\nimport com.fyber.fairbid.ads.Rewarded;\r\nimport android.os.Bundle;\r\nimport android.widget.Toast;\r\nimport com.fyber.FairBid;\r\nimport com.fyber.fairbid.ads.rewarded.RewardedListener;\r\nimport com.fyber.fairbid.ads.*;\r\nimport androidx.annotation.NonNull;\r\nimport io.flutter.embedding.android.FlutterActivity;\r\nimport io.flutter.plugin.common.MethodCall;\r\nimport io.flutter.embedding.engine.FlutterEngine;\r\nimport io.flutter.plugin.common.MethodChannel;\r\nimport io.flutter.plugins.GeneratedPluginRegistrant;\r\n\r\npublic class MainActivity extends FlutterActivity {\r\n  private  static final String CHANNEL = &quot;toast.flutter.io/toast&quot;;\r\n  @Override\r\n  public void configureFlutterEngine(@NonNull FlutterEngine flutterEngine) {\r\n    GeneratedPluginRegistrant.registerWith(flutterEngine);\r\n    new MethodChannel(getFlutterEngine().getDartExecutor().getBinaryMessenger(),CHANNEL).setMethodCallHandler(new MethodChannel.MethodCallHandler() {\r\n      @Override\r\n      public void onMethodCall(MethodCall methodCall, MethodChannel.Result result) {\r\n        if(methodCall.method.equals(&quot;showToast&quot;)){\r\n          Toast.makeText(getApplicationContext(),&quot;Flutter Toast&quot;,Toast.LENGTH_SHORT).show();\r\n          FairBid.start(&quot;120661&quot; , getActivity());\r\n \r\n          String placementId = &quot;12345&quot;;\r\n          Rewarded.request(placementId);\r\n          Rewarded.setRewardedListener(new RewardedListener() {\r\n            public void onAvailable(String placementId) {\r\n                // Called when a rewarded ad from placement &#39;placementId&#39; becomes available\r\n                if (Rewarded.isAvailable(placementId)) {\r\n                  Rewarded.show(placementId, context);\r\n              }\r\n            }\r\n        });\r\n        } else {\r\n          result.notImplemented();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  \r\n}\r\n\r\n```\r\nbuild.gradle //App\r\n\r\n```\r\ndef localProperties = new Properties()\r\ndef localPropertiesFile = rootProject.file(&#39;local.properties&#39;)\r\nif (localPropertiesFile.exists()) {\r\n    localPropertiesFile.withReader(&#39;UTF-8&#39;) { reader -&gt;\r\n        localProperties.load(reader)\r\n    }\r\n}\r\n\r\ndef flutterRoot = localProperties.getProperty(&#39;flutter.sdk&#39;)\r\nif (flutterRoot == null) {\r\n    throw new FileNotFoundException(&quot;Flutter SDK not found. Define location with flutter.sdk in the local.properties file.&quot;)\r\n}\r\n\r\ndef flutterVersionCode = localProperties.getProperty(&#39;flutter.versionCode&#39;)\r\nif (flutterVersionCode == null) {\r\n    flutterVersionCode = &#39;1&#39;\r\n}\r\n\r\ndef flutterVersionName = localProperties.getProperty(&#39;flutter.versionName&#39;)\r\nif (flutterVersionName == null) {\r\n    flutterVersionName = &#39;1.0&#39;\r\n}\r\napply plugin: &#39;com.fyber.fairbid-sdk-plugin&#39;\r\napply plugin: &#39;com.android.application&#39;\r\napply plugin: &#39;kotlin-android&#39;\r\napply from: &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot;\r\n\r\nbuildscript {\r\n    repositories { \r\n     mavenCentral()\r\n   }\r\n   \r\n}\r\nandroid {\r\n    compileSdkVersion flutter.compileSdkVersion\r\n    ndkVersion flutter.ndkVersion\r\n    namespace &#39;com.example.firebirdtest&#39;\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n    kotlinOptions {\r\n        jvmTarget = &#39;1.8&#39;\r\n    }\r\n\r\n    sourceSets {\r\n        main.java.srcDirs += &#39;src/main/kotlin&#39;\r\n    }\r\nallprojects {\r\n   repositories {\r\n       mavenCentral()\r\n  }\r\n}\r\n    defaultConfig {\r\n        // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).\r\n        applicationId &quot;com.example.firebirdtest&quot;\r\n        // You can update the following values to match your application needs.\r\n        // For more information, see: https://docs.flutter.dev/deployment/android#reviewing-the-build-configuration.\r\n        minSdkVersion flutter.minSdkVersion\r\n        targetSdkVersion flutter.targetSdkVersion\r\n        versionCode flutterVersionCode.toInteger()\r\n        versionName flutterVersionName\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            signingConfig signingConfigs.debug\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_11\r\n        targetCompatibility JavaVersion.VERSION_11\r\n    }\r\n\r\n    packagingOptions {\r\n        resources.excludes.add(&quot;META-INF/*&quot;)\r\n    }\r\n\r\n    kotlinOptions {\r\n        jvmTarget = JavaVersion.VERSION_11.toString()\r\n    }\r\n}\r\n\r\nflutter {\r\n    source &#39;../..&#39;\r\n}\r\n\r\ndependencies {\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\r\n}\r\n\r\n```\r\nbuild.gradle // Project\r\n```\r\nbuildscript {\r\n    ext.kotlin_version = &#39;1.6.10&#39;\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.1.2&#39;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n    }\r\n}\r\nplugins{\r\n        id &#39;com.fyber.fairbid-sdk-plugin&#39;\r\n}\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n}\r\n\r\nrootProject.buildDir = &#39;../build&#39;\r\nsubprojects {\r\n    project.buildDir = &quot;${rootProject.buildDir}/${project.name}&quot;\r\n}\r\nsubprojects {\r\n    project.evaluationDependsOn(&#39;:app&#39;)\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n\r\n```\r\n     \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/etZhN.png","title":"Gradle &amp; Flutter in MainActivity.java I can&#39;t get the fyber SDK to work","body":"<p>I have a problem , I am trying to connect to the FairBid plugin and it keeps giving me this error and the app is not building , is there any way to make it work so I can fire up the Flutter App and open the ad? I don't know if I imported everything correctly or if it's a problem with the code in Mainactivity.java , I would appreciate your help</p>\n<p><a href=\"https://i.stack.imgur.com/etZhN.png\" rel=\"nofollow noreferrer\">My Error</a></p>\n<p>MainActivity</p>\n<pre><code>package com.example.firebirdtest;\nimport com.fyber.fairbid.ads.Rewarded;\nimport android.os.Bundle;\nimport android.widget.Toast;\nimport com.fyber.FairBid;\nimport com.fyber.fairbid.ads.rewarded.RewardedListener;\nimport com.fyber.fairbid.ads.*;\nimport androidx.annotation.NonNull;\nimport io.flutter.embedding.android.FlutterActivity;\nimport io.flutter.plugin.common.MethodCall;\nimport io.flutter.embedding.engine.FlutterEngine;\nimport io.flutter.plugin.common.MethodChannel;\nimport io.flutter.plugins.GeneratedPluginRegistrant;\n\npublic class MainActivity extends FlutterActivity {\n  private  static final String CHANNEL = &quot;toast.flutter.io/toast&quot;;\n  @Override\n  public void configureFlutterEngine(@NonNull FlutterEngine flutterEngine) {\n    GeneratedPluginRegistrant.registerWith(flutterEngine);\n    new MethodChannel(getFlutterEngine().getDartExecutor().getBinaryMessenger(),CHANNEL).setMethodCallHandler(new MethodChannel.MethodCallHandler() {\n      @Override\n      public void onMethodCall(MethodCall methodCall, MethodChannel.Result result) {\n        if(methodCall.method.equals(&quot;showToast&quot;)){\n          Toast.makeText(getApplicationContext(),&quot;Flutter Toast&quot;,Toast.LENGTH_SHORT).show();\n          FairBid.start(&quot;120661&quot; , getActivity());\n \n          String placementId = &quot;12345&quot;;\n          Rewarded.request(placementId);\n          Rewarded.setRewardedListener(new RewardedListener() {\n            public void onAvailable(String placementId) {\n                // Called when a rewarded ad from placement 'placementId' becomes available\n                if (Rewarded.isAvailable(placementId)) {\n                  Rewarded.show(placementId, context);\n              }\n            }\n        });\n        } else {\n          result.notImplemented();\n        }\n      }\n    });\n  }\n\n  \n}\n\n</code></pre>\n<p>build.gradle //App</p>\n<pre><code>def localProperties = new Properties()\ndef localPropertiesFile = rootProject.file('local.properties')\nif (localPropertiesFile.exists()) {\n    localPropertiesFile.withReader('UTF-8') { reader -&gt;\n        localProperties.load(reader)\n    }\n}\n\ndef flutterRoot = localProperties.getProperty('flutter.sdk')\nif (flutterRoot == null) {\n    throw new FileNotFoundException(&quot;Flutter SDK not found. Define location with flutter.sdk in the local.properties file.&quot;)\n}\n\ndef flutterVersionCode = localProperties.getProperty('flutter.versionCode')\nif (flutterVersionCode == null) {\n    flutterVersionCode = '1'\n}\n\ndef flutterVersionName = localProperties.getProperty('flutter.versionName')\nif (flutterVersionName == null) {\n    flutterVersionName = '1.0'\n}\napply plugin: 'com.fyber.fairbid-sdk-plugin'\napply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply from: &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot;\n\nbuildscript {\n    repositories { \n     mavenCentral()\n   }\n   \n}\nandroid {\n    compileSdkVersion flutter.compileSdkVersion\n    ndkVersion flutter.ndkVersion\n    namespace 'com.example.firebirdtest'\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\nallprojects {\n   repositories {\n       mavenCentral()\n  }\n}\n    defaultConfig {\n        // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).\n        applicationId &quot;com.example.firebirdtest&quot;\n        // You can update the following values to match your application needs.\n        // For more information, see: https://docs.flutter.dev/deployment/android#reviewing-the-build-configuration.\n        minSdkVersion flutter.minSdkVersion\n        targetSdkVersion flutter.targetSdkVersion\n        versionCode flutterVersionCode.toInteger()\n        versionName flutterVersionName\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            signingConfig signingConfigs.debug\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_11\n        targetCompatibility JavaVersion.VERSION_11\n    }\n\n    packagingOptions {\n        resources.excludes.add(&quot;META-INF/*&quot;)\n    }\n\n    kotlinOptions {\n        jvmTarget = JavaVersion.VERSION_11.toString()\n    }\n}\n\nflutter {\n    source '../..'\n}\n\ndependencies {\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\n}\n\n</code></pre>\n<p>build.gradle // Project</p>\n<pre><code>buildscript {\n    ext.kotlin_version = '1.6.10'\n    repositories {\n        google()\n        mavenCentral()\n    }\n    \n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.1.2'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    }\n}\nplugins{\n        id 'com.fyber.fairbid-sdk-plugin'\n}\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n    }\n}\n\nrootProject.buildDir = '../build'\nsubprojects {\n    project.buildDir = &quot;${rootProject.buildDir}/${project.name}&quot;\n}\nsubprojects {\n    project.evaluationDependsOn(':app')\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n\n</code></pre>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":14632062,"reputation":585,"user_id":10671013,"display_name":"Tan Yu Hau Sean"},"score":0,"creation_date":1675442303,"post_id":75338290,"comment_id":132936744,"body_markdown":"what annotations did you try?","body":"what annotations did you try?"},{"owner":{"account_id":404521,"reputation":480,"user_id":772883,"accept_rate":50,"display_name":"No3x"},"score":0,"creation_date":1675442680,"post_id":75338290,"comment_id":132936877,"body_markdown":"`@JsonFormat(shape=JsonFormat.Shape.ARRAY)`, `@JsonValue`, `@JsonProperty` without change","body":"<code>@JsonFormat(shape=JsonFormat.Shape.ARRAY)</code>, <code>@JsonValue</code>, <code>@JsonProperty</code> without change"},{"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"score":2,"creation_date":1675444148,"post_id":75338290,"comment_id":132937370,"body_markdown":"have you tried this? https://stackoverflow.com/questions/69846490/how-to-fix-error-start-array-token-when-deserializing-json-with-modelmapper","body":"have you tried this? <a href=\"https://stackoverflow.com/questions/69846490/how-to-fix-error-start-array-token-when-deserializing-json-with-modelmapper\" title=\"how to fix error start array token when deserializing json with modelmapper\">stackoverflow.com/questions/69846490/&hellip;</a>"},{"owner":{"account_id":14632062,"reputation":585,"user_id":10671013,"display_name":"Tan Yu Hau Sean"},"score":0,"creation_date":1675444667,"post_id":75338290,"comment_id":132937550,"body_markdown":"thanks for pointing us in the right direction kerbermeister, all the searches i was making either didnt have a solution or was using custom deserializer and was quite convoluted","body":"thanks for pointing us in the right direction kerbermeister, all the searches i was making either didnt have a solution or was using custom deserializer and was quite convoluted"},{"owner":{"account_id":404521,"reputation":480,"user_id":772883,"accept_rate":50,"display_name":"No3x"},"score":0,"creation_date":1675444850,"post_id":75338290,"comment_id":132937610,"body_markdown":"@kerbermeister I also tried `@JsonCreator` but it did not work. Now I tried again on my non-corporate machine and it works! Maybe there is a difference in the versions. Please post it as answer.","body":"@kerbermeister I also tried <code>@JsonCreator</code> but it did not work. Now I tried again on my non-corporate machine and it works! Maybe there is a difference in the versions. Please post it as answer."},{"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"score":0,"creation_date":1675445128,"post_id":75338290,"comment_id":132937716,"body_markdown":"you&#39;re welcome, posted an answer, however, I agree it depends on the version of jackson you&#39;re using","body":"you&#39;re welcome, posted an answer, however, I agree it depends on the version of jackson you&#39;re using"},{"owner":{"account_id":404521,"reputation":480,"user_id":772883,"accept_rate":50,"display_name":"No3x"},"score":0,"creation_date":1675445235,"post_id":75338290,"comment_id":132937746,"body_markdown":"@kerbermeister so i might not able to use this approach because I&#39;m tied to the platform versions in corporate field. Maybe someone knows an alternative to `@JsonCreator`?","body":"@kerbermeister so i might not able to use this approach because I&#39;m tied to the platform versions in corporate field. Maybe someone knows an alternative to <code>@JsonCreator</code>?"},{"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"score":0,"creation_date":1675445553,"post_id":75338290,"comment_id":132937832,"body_markdown":"I&#39;ll try to research this","body":"I&#39;ll try to research this"},{"owner":{"account_id":404521,"reputation":480,"user_id":772883,"accept_rate":50,"display_name":"No3x"},"score":0,"creation_date":1675447991,"post_id":75338290,"comment_id":132938559,"body_markdown":"Seems to work on both machines/versions. Tested 2.13.4, 2.14.1","body":"Seems to work on both machines/versions. Tested 2.13.4, 2.14.1"}],"answers":[{"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675446919,"creation_date":1675445090,"answer_id":75339110,"question_id":75338290,"body_markdown":"Actually it is quite simple to serialize your models to the target json, but might be tricky to deserialize.\r\n\r\nSo, the solution for deserialization in this case could be using `@JsonCreator` annotation from `com.fasterxml.jackson.annotation` package above constructor:\r\n\r\n    @Data\r\n    public class GetPersonsReponseDto {\r\n    \r\n        public List&lt;Person&gt; persons;\r\n    \r\n        @JsonCreator // use this annotation for deserialization on constructor\r\n        public GetPersonsReponseDto(List&lt;Person&gt; persons) {\r\n            this.persons = persons;\r\n        }\r\n    \r\n        public GetPersonsReponseDto() {\r\n        }\r\n    }\r\n\r\nHowever, it might not work with some versions of jackson.","title":"How to deserialize JSON file starting with an array in Jackson - with Annotations only?","body":"<p>Actually it is quite simple to serialize your models to the target json, but might be tricky to deserialize.</p>\n<p>So, the solution for deserialization in this case could be using <code>@JsonCreator</code> annotation from <code>com.fasterxml.jackson.annotation</code> package above constructor:</p>\n<pre><code>@Data\npublic class GetPersonsReponseDto {\n\n    public List&lt;Person&gt; persons;\n\n    @JsonCreator // use this annotation for deserialization on constructor\n    public GetPersonsReponseDto(List&lt;Person&gt; persons) {\n        this.persons = persons;\n    }\n\n    public GetPersonsReponseDto() {\n    }\n}\n</code></pre>\n<p>However, it might not work with some versions of jackson.</p>\n"}],"owner":{"account_id":404521,"reputation":480,"user_id":772883,"accept_rate":50,"display_name":"No3x"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":869,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75339110,"answer_count":1,"score":2,"last_activity_date":1675446919,"creation_date":1675440618,"question_id":75338290,"body_markdown":"I have a Json response that looks like this:\r\n\r\n    [\r\n        { &quot;name&quot;:&quot;A&quot; },\r\n        { &quot;name&quot;:&quot;B&quot; }\r\n    ]\r\n\r\nI have Java classes representing a single `ResponseDto` and contains a List of `Person`:\r\n\r\n    public class GetPersonsResponseDto {\r\n        public List&lt;Person&gt; persons;\r\n    }\r\n\r\n    public class Person {\r\n        public String name;\r\n    }\r\n\r\nI would like to deserialize the by JSON using `ObjectMapper` but without use of a custom Deserializer and without collection type (no `Persons[].class` or `TypeReference&lt;List&lt;Person&gt;&gt;(){}`). What I really want is\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.readValue(in, GetPersonsResponseDto.class);\r\nBut I get:\r\n\r\n    jackson.map.JsonMappingException: \r\n    Can not deserialize instance of com.project.my.GetPersonsResponseDto out of START_ARRAY token\r\nI tried several Annotations but without success.","title":"How to deserialize JSON file starting with an array in Jackson - with Annotations only?","body":"<p>I have a Json response that looks like this:</p>\n<pre><code>[\n    { &quot;name&quot;:&quot;A&quot; },\n    { &quot;name&quot;:&quot;B&quot; }\n]\n</code></pre>\n<p>I have Java classes representing a single <code>ResponseDto</code> and contains a List of <code>Person</code>:</p>\n<pre><code>public class GetPersonsResponseDto {\n    public List&lt;Person&gt; persons;\n}\n\npublic class Person {\n    public String name;\n}\n</code></pre>\n<p>I would like to deserialize the by JSON using <code>ObjectMapper</code> but without use of a custom Deserializer and without collection type (no <code>Persons[].class</code> or <code>TypeReference&lt;List&lt;Person&gt;&gt;(){}</code>). What I really want is</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.readValue(in, GetPersonsResponseDto.class);\n</code></pre>\n<p>But I get:</p>\n<pre><code>jackson.map.JsonMappingException: \nCan not deserialize instance of com.project.my.GetPersonsResponseDto out of START_ARRAY token\n</code></pre>\n<p>I tried several Annotations but without success.</p>\n"},{"tags":["java","eclipse","maven"],"comments":[{"owner":{"account_id":161274,"reputation":6294,"user_id":381897,"accept_rate":100,"display_name":"bhdrkn"},"score":2,"creation_date":1429555692,"post_id":29755373,"comment_id":47644070,"body_markdown":"Please share your pom.xml","body":"Please share your pom.xml"},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1429585630,"post_id":29755373,"comment_id":47656123,"body_markdown":"Also, see if you are using a JDK not a JRE, see it here for eclipse: http://stackoverflow.com/a/21099229/460557","body":"Also, see if you are using a JDK not a JRE, see it here for eclipse: <a href=\"http://stackoverflow.com/a/21099229/460557\">stackoverflow.com/a/21099229/460557</a>"},{"owner":{"account_id":201380,"reputation":151,"user_id":447786,"accept_rate":75,"display_name":"Raphael Milani"},"score":1,"creation_date":1429711550,"post_id":29755373,"comment_id":47728205,"body_markdown":"Hi @JorgeCampos: I am using JDK and I can&#180;t share my POM because it&#180;s of private Bank","body":"Hi @JorgeCampos: I am using JDK and I can&#180;t share my POM because it&#180;s of private Bank"},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1429750767,"post_id":29755373,"comment_id":47751259,"body_markdown":"This error is on eclipse or in the command line? Forget to ask before!","body":"This error is on eclipse or in the command line? Forget to ask before!"},{"owner":{"account_id":201380,"reputation":151,"user_id":447786,"accept_rate":75,"display_name":"Raphael Milani"},"score":0,"creation_date":1429821367,"post_id":29755373,"comment_id":47794251,"body_markdown":"Hi @JorgeCampos this issue happens in both","body":"Hi @JorgeCampos this issue happens in both"},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1429919276,"post_id":29755373,"comment_id":47844460,"body_markdown":"Go to your repository on this path `repository\\org\\apache\\maven\\plugins\\maven-surefire-plugin` see if there is a version of the plugin and if so see if there is a jar named `maven-surefire-plugin-x.xx.jar`","body":"Go to your repository on this path <code>repository\\org\\apache\\maven\\plugins\\maven-surefire-plugin</code> see if there is a version of the plugin and if so see if there is a jar named <code>maven-surefire-plugin-x.xx.jar</code>"},{"owner":{"account_id":201380,"reputation":151,"user_id":447786,"accept_rate":75,"display_name":"Raphael Milani"},"score":0,"creation_date":1430142342,"post_id":29755373,"comment_id":47917739,"body_markdown":"Hi @JorgeCampos on my repository there are many versions of maven-surefire-plugin.jar, but now occurs other exception: Caused by: java.lang.ClassNotFoundException: org.apache.maven.wagon.providers.http.HttpWagon","body":"Hi @JorgeCampos on my repository there are many versions of maven-surefire-plugin.jar, but now occurs other exception: Caused by: java.lang.ClassNotFoundException: org.apache.maven.wagon.providers.http.HttpWagon"},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1430143423,"post_id":29755373,"comment_id":47918595,"body_markdown":"Most probably you have a configuration problem then. Check if you have set the maven enviroment `M2_HOME`, check also if your console is pointing to the proper JDK not JRE (I know I said it before, double check it with just calling `javac -version`), another possible problem is the jar on your current repository is corrupted so, go to your maven repository e.g. `c:\\maven\\repository` and rename it to `c:\\maven\\repository_` and run mvn install again it will redownload every jar, so it take some time to finish...","body":"Most probably you have a configuration problem then. Check if you have set the maven enviroment <code>M2_HOME</code>, check also if your console is pointing to the proper JDK not JRE (I know I said it before, double check it with just calling <code>javac -version</code>), another possible problem is the jar on your current repository is corrupted so, go to your maven repository e.g. <code>c:\\maven\\repository</code> and rename it to <code>c:\\maven\\repository_</code> and run mvn install again it will redownload every jar, so it take some time to finish..."},{"owner":{"account_id":201380,"reputation":151,"user_id":447786,"accept_rate":75,"display_name":"Raphael Milani"},"score":0,"creation_date":1430143774,"post_id":29755373,"comment_id":47918861,"body_markdown":"Hi @JorgeCampos I am going to try that, but my problem is: Failed to read artifact descriptor for org.codehaus.plexus:plexus-archiver:jar:2.6.3: Could not transfer artifact org.codehaus.plexus:plexus-archiver:pom:2.6.3 from/to R2DS-Group (https://dsnexus.uk.hibm.hsbc:8082/nexus/content/groups/R2DS-Group/): No connector available to access repository R2DS-Group (https://dsnexus.uk.hibm.hsbc:8082/nexus/content/groups/R2DS-Group/) of type default using the available factories WagonRepositoryConnectorFactory","body":"Hi @JorgeCampos I am going to try that, but my problem is: Failed to read artifact descriptor for org.codehaus.plexus:plexus-archiver:jar:2.6.3: Could not transfer artifact org.codehaus.plexus:plexus-archiver:pom:2.6.3 from/to R2DS-Group (<a href=\"https://dsnexus.uk.hibm.hsbc:8082/nexus/content/groups/R2DS-Group/\" rel=\"nofollow noreferrer\">dsnexus.uk.hibm.hsbc:8082/nexus/content/groups/R2DS-Group</a>): No connector available to access repository R2DS-Group (<a href=\"https://dsnexus.uk.hibm.hsbc:8082/nexus/content/groups/R2DS-Group/\" rel=\"nofollow noreferrer\">dsnexus.uk.hibm.hsbc:8082/nexus/content/groups/R2DS-Group</a>) of type default using the available factories WagonRepositoryConnectorFactory"},{"owner":{"account_id":201380,"reputation":151,"user_id":447786,"accept_rate":75,"display_name":"Raphael Milani"},"score":0,"creation_date":1430155542,"post_id":29755373,"comment_id":47927024,"body_markdown":"Hi @JorgeCampos your suggestion worked! I &quot;redownloaded&quot; the whole internet.","body":"Hi @JorgeCampos your suggestion worked! I &quot;redownloaded&quot; the whole internet."},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1430158828,"post_id":29755373,"comment_id":47928866,"body_markdown":"hahahahaha good to know that I could Help. May I add this info as an answer?","body":"hahahahaha good to know that I could Help. May I add this info as an answer?"},{"owner":{"account_id":201380,"reputation":151,"user_id":447786,"accept_rate":75,"display_name":"Raphael Milani"},"score":0,"creation_date":1430160578,"post_id":29755373,"comment_id":47929947,"body_markdown":"Hi @JorgeCampos of course. Feel free!","body":"Hi @JorgeCampos of course. Feel free!"}],"answers":[{"tags":[],"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1430162922,"creation_date":1430162922,"answer_id":29904328,"question_id":29755373,"body_markdown":"There are a few things that you should check about this problem.\r\n\r\nI will enumarate then here so you could check.\r\n\r\n1. Check if you defined the JDK instead of the JRE on your path enviroment variables. Maven does not work properly only with the JRE. To check that go to your console and se if the `javac -version` command works.\r\n2. Check if you have the **M2_HOME** variable defined on your enviroment variables with the path where you installed maven.\r\n3. Since you are having a `ClassNotFoundException` on the `SurefireReportParameters` class check if the correspondent jar is on your local repository. It normally is on `maven_path\\repository\\org\\apache\\maven\\plugins\\maven-surefire-plugin` there it should have folder with versions and inside it a JAR file with the name: `maven-surefire-plugin-x.xx.jar`.\r\n4. Sometimes it happens that JAR files get corrupted from outside events of the O.S. or the IDE leading to the `ClassNotFoundException` as it would be very difficult to find all corrupted JARs I usually recomend to redownload the entiry repository again. **Note that** depending on the size of your project and number of dependencies you have on it this operation will take some time to complete. In order to do that you go to your repository folder (e.g. `c:\\maven\\repository`) and rename it (just the repository folder e.g. `c:\\maven\\repository_`) or delete it (just repository folder) then go to your project and run `mvn install`\r\n\r\nOne of this options should solve your problem. And as we discussed on the comments we already know which one it was. ;)","title":"Maven Issue SurefireReportParameters","body":"<p>There are a few things that you should check about this problem.</p>\n\n<p>I will enumarate then here so you could check.</p>\n\n<ol>\n<li>Check if you defined the JDK instead of the JRE on your path enviroment variables. Maven does not work properly only with the JRE. To check that go to your console and se if the <code>javac -version</code> command works.</li>\n<li>Check if you have the <strong>M2_HOME</strong> variable defined on your enviroment variables with the path where you installed maven.</li>\n<li>Since you are having a <code>ClassNotFoundException</code> on the <code>SurefireReportParameters</code> class check if the correspondent jar is on your local repository. It normally is on <code>maven_path\\repository\\org\\apache\\maven\\plugins\\maven-surefire-plugin</code> there it should have folder with versions and inside it a JAR file with the name: <code>maven-surefire-plugin-x.xx.jar</code>.</li>\n<li>Sometimes it happens that JAR files get corrupted from outside events of the O.S. or the IDE leading to the <code>ClassNotFoundException</code> as it would be very difficult to find all corrupted JARs I usually recomend to redownload the entiry repository again. <strong>Note that</strong> depending on the size of your project and number of dependencies you have on it this operation will take some time to complete. In order to do that you go to your repository folder (e.g. <code>c:\\maven\\repository</code>) and rename it (just the repository folder e.g. <code>c:\\maven\\repository_</code>) or delete it (just repository folder) then go to your project and run <code>mvn install</code></li>\n</ol>\n\n<p>One of this options should solve your problem. And as we discussed on the comments we already know which one it was. ;)</p>\n"},{"tags":[],"owner":{"account_id":8113332,"reputation":121,"user_id":6112633,"display_name":"nichole"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675446505,"creation_date":1675446505,"answer_id":75339349,"question_id":29755373,"body_markdown":"There are solutions posted for a similar question, but in the context of the Spring Framework.\r\n\r\nhttps://stackoverflow.com/questions/50661648/spring-boot-fails-to-run-maven-surefire-plugin-classnotfoundexception-org-apache/53261434#53261434\r\n\r\nOne answer is to use version 3.0.0-M1 of the maven-surefire-plugin.\r\n\r\n","title":"Maven Issue SurefireReportParameters","body":"<p>There are solutions posted for a similar question, but in the context of the Spring Framework.</p>\n<p><a href=\"https://stackoverflow.com/questions/50661648/spring-boot-fails-to-run-maven-surefire-plugin-classnotfoundexception-org-apache/53261434#53261434\">Spring Boot fails to run maven-surefire-plugin ClassNotFoundException org.apache.maven.surefire.booter.ForkedBooter</a></p>\n<p>One answer is to use version 3.0.0-M1 of the maven-surefire-plugin.</p>\n"}],"owner":{"account_id":201380,"reputation":151,"user_id":447786,"accept_rate":75,"display_name":"Raphael Milani"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4198,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":29904328,"answer_count":2,"score":2,"last_activity_date":1675446505,"creation_date":1429553698,"question_id":29755373,"body_markdown":"I&#39;ve been trying to build an app but when I run maven, I catch this exception:\r\n\r\n &gt; java.lang.ClassNotFoundException: org.apache.maven.plugin.surefire.SurefireReportParameters\r\n\r\nI installed the maven-plugin manually, but the issue still continues. Any suggestion will be appreciated.","title":"Maven Issue SurefireReportParameters","body":"<p>I've been trying to build an app but when I run maven, I catch this exception:</p>\n\n<blockquote>\n  <p>java.lang.ClassNotFoundException: org.apache.maven.plugin.surefire.SurefireReportParameters</p>\n</blockquote>\n\n<p>I installed the maven-plugin manually, but the issue still continues. Any suggestion will be appreciated.</p>\n"},{"tags":["java","spring-boot","tomcat","websocket","heap-dump"],"answers":[{"tags":[],"owner":{"account_id":4602926,"reputation":31,"user_id":5039342,"display_name":"joe380"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675445867,"creation_date":1675437548,"answer_id":75337702,"question_id":75327130,"body_markdown":"I was able to find out what was the cause, so here the findings:\r\n- if you use the default configuration of websocket handler in a spring boot application it&#39;s provided from tomcat, as the underlying provider\r\n- we used the default @EnableWebSecurity =&gt; which means that for each websocket session there is also a classic StandardHttpSession created which is used for the authentication part\r\n- the default timeout for the StandartHttpSession is 60s (server.servlet.session.timeout=60) In case of tomcat these are always multiples of 60 =&gt; 60,120,180.... But in the production (without my knowledge) somebody set this property to -1 =&gt; which means the session never expires (this solved the first visible problem of losing the web socket connections, but caused one new problem which was seen after a year(now) due to increased load)\r\n- so the mechanics of the problem is, that after the timeout of the StandartHttpSession the &quot;underlying&quot; websocket session is closed EVEN-THOUGH were is visible communication. \r\n- the issue is that the &quot;activity&quot; in the websocket session is not propagated to the above StandardHttpSession =&gt; that means the http session comes to timeout and closes the underlying websocket session\r\n\r\nSolution for now (I need to test it) is to somehow overcome this 2 session constellation, or use a different provider like jetty, undertow....\r\nor a hack to pass the reference of the httpsession to the websocket session as an attribute and on events onConnected set the timeout to -1 and after the session is closed set it to 60s =&gt; so that after a minute the session is gone.\r\n\r\nThe fix was to enforce the session policy to NEVER!\r\n\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.NEVER)\r\n            .and().csrf().disable()\r\n\r\n","title":"Issue with rising heap size in a spring boot app (running in k8s)","body":"<p>I was able to find out what was the cause, so here the findings:</p>\n<ul>\n<li>if you use the default configuration of websocket handler in a spring boot application it's provided from tomcat, as the underlying provider</li>\n<li>we used the default @EnableWebSecurity =&gt; which means that for each websocket session there is also a classic StandardHttpSession created which is used for the authentication part</li>\n<li>the default timeout for the StandartHttpSession is 60s (server.servlet.session.timeout=60) In case of tomcat these are always multiples of 60 =&gt; 60,120,180.... But in the production (without my knowledge) somebody set this property to -1 =&gt; which means the session never expires (this solved the first visible problem of losing the web socket connections, but caused one new problem which was seen after a year(now) due to increased load)</li>\n<li>so the mechanics of the problem is, that after the timeout of the StandartHttpSession the &quot;underlying&quot; websocket session is closed EVEN-THOUGH were is visible communication.</li>\n<li>the issue is that the &quot;activity&quot; in the websocket session is not propagated to the above StandardHttpSession =&gt; that means the http session comes to timeout and closes the underlying websocket session</li>\n</ul>\n<p>Solution for now (I need to test it) is to somehow overcome this 2 session constellation, or use a different provider like jetty, undertow....\nor a hack to pass the reference of the httpsession to the websocket session as an attribute and on events onConnected set the timeout to -1 and after the session is closed set it to 60s =&gt; so that after a minute the session is gone.</p>\n<p>The fix was to enforce the session policy to NEVER!</p>\n<pre><code>protected void configure(HttpSecurity http) throws Exception {\n    http.csrf().disable()\n    http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.NEVER)\n        .and().csrf().disable()\n</code></pre>\n"}],"owner":{"account_id":4602926,"reputation":31,"user_id":5039342,"display_name":"joe380"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675445867,"creation_date":1675360520,"question_id":75327130,"body_markdown":"**Description of the service:**\r\n\r\nThis spring boot application is essentially a web socket proxy for charging stations (using OCPP protocol over websocket) running as multiple\r\nnodes behind a load balancer, to basically hold/keep open the connections, so that other microservices(actual consumers of the messages) which connect to this proxy over rabbitmq can be redeployed and maintained.\r\n\r\n**Heap dump:**\r\n\r\nThese devices (tens of thousands) tend to connect and disconnect very often. The issue is that the\r\n\r\n&gt; **sessions (attribute)** in org.apache.catalina.session.StandardManager\r\n\r\nkeeps adding sessions (more than 700 000) but not removing them (in a span of 7 days). [see picture (StandartManager)](https://i.stack.imgur.com/K0anZ.png)\r\n\r\nI also looked into\r\n\r\n&gt; **sessions (attribute)** in org.apache.tomcat.websocket.server.WsServerContainer\r\n\r\nwhich holds the websocket sessions (at the time of dump: 523) which was correct. [see picture (WsServerContainer)](https://i.stack.imgur.com/ABYub.png)\r\n\r\nThe application also keeps the active sessions (per node) in a concurrent map for own purposes:\r\n\r\n&gt; **sessions (attribute)** in WebsocketServerService\r\n\r\nat the time of dump: 530 (which correlates with the above sessions, do not mind the small difference, it&#39;s ok) [see picture (WebsocketServerService)](https://i.stack.imgur.com/slt1p.png)\r\n\r\nSo basically the expectation would be that all **sessions** attributes would hold almost the same amount of sessions, which is this case would be around 530 and NOT more than 700 000.\r\n\r\n**Question:**\r\n\r\nWhat might cause the everlasting rising of the standard sessions? I&#39;m not familiar with inner workings of tomcat, if a websocket connection is &quot;baked&quot; by a standart session (at least at the beginning of the connection) and not properly closing the socket (by both parties) could cause that the standard sessions will stick around and are not collected after a while. These are just assumptions.\r\n\r\nOne version of the possible cause (WIP) is that we are using the standard **WebSecurityConfigurerAdapter** \r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@AllArgsConstructor\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    private final WebsocketServerProperties websocketServerProperties;\r\n    private final StationAuthenticationProvider stationAuthenticationProvider;\r\n    private final AuthenticationEntryPoint authEntryPoint;\r\n\r\n    @Override\r\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.authenticationProvider(stationAuthenticationProvider);\r\n    }\r\n\r\n    @Override\r\n    @SuppressWarnings(&quot;squid:S4502&quot;)\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n                .httpBasic()\r\n                .authenticationEntryPoint(authEntryPoint)\r\n                .and()\r\n                .antMatcher(websocketServerProperties.getWebsocketPathVpn() + &quot;/**&quot;).anonymous()\r\n                .and()\r\n                .antMatcher(websocketServerProperties.getWebsocketPathInternet() + &quot;/**&quot;)\r\n                .authorizeRequests()\r\n                .anyRequest()\r\n                .authenticated();\r\n    }\r\n\r\n}\r\n```\r\n\r\nand not the one mentioned here https://docs.spring.io/spring-security/reference/servlet/integrations/websocket.html#websocket-configuration\r\n\r\nSo if the station connects and there is an error for example  401, the socket is not properly closed, and the sessions increase without being properly closed and collected by GC (assumtion).\r\n\r\nThe implementations of the websocket controller is a standard one (at least by the reference doc):\r\n\r\n```\r\n@Configuration\r\n@EnableWebSocket\r\n@RequiredArgsConstructor\r\n@EnableConfigurationProperties(WebsocketServerProperties.class)\r\npublic class WebsocketServerConfig implements WebSocketConfigurer {\r\n    public static final String[] SUPPORTED_PROTOCOLS = new String[]{.....};\r\n\r\n    private final WebsocketServerProperties websocketServerProperties;\r\n    private final WebsocketHandShakeInterceptor websocketHandShakeInterceptor;\r\n    private final StationSocketHandler stationSocketHandler;\r\n\r\n    public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {\r\n        registry.addHandler(stationSocketHandler,\r\n                        websocketServerProperties.getWebsocketPathVpn() + &quot;/*&quot;,\r\n                        websocketServerProperties.getWebsocketPathInternet() + &quot;/*&quot;)\r\n                .addInterceptors(websocketHandShakeInterceptor)\r\n                .setHandshakeHandler(handshakeHandler())\r\n                .setAllowedOrigins(&quot;*&quot;);\r\n    }\r\n\r\n    private HandshakeHandler handshakeHandler() {\r\n        DefaultHandshakeHandler handler = new DefaultHandshakeHandler();\r\n        handler.setSupportedProtocols(SUPPORTED_PROTOCOLS);\r\n        return handler;\r\n    }\r\n\r\n    @Bean\r\n    public ServletServerContainerFactoryBean createWebSocketContainer() {\r\n        ServletServerContainerFactoryBean container = new ServletServerContainerFactoryBean();\r\n        container.setMaxTextMessageBufferSize(websocketServerProperties.getMaxTextMessageBufferSize());\r\n        container.setMaxSessionIdleTimeout(websocketServerProperties.getMaxSessionIdleTimeout());\r\n        return container;\r\n    }\r\n\r\n}\r\n```\r\n\r\n```\r\n@Slf4j\r\n@Component\r\n@RequiredArgsConstructor(onConstructor = @__({@Autowired}))\r\npublic class StationSocketHandler extends TextWebSocketHandler implements SubProtocolCapable {\r\n\r\n    public static final String DEVICE_ID = &quot;DEVICE_ID&quot;;\r\n    public static final String CONNECTION_ROUTE = &quot;CONNECTION_ROUTE&quot;;\r\n\r\n    private final OcppMessageParser ocppMessageParser;\r\n    private final WebsocketServerService websocketServerService;\r\n    private final PingPongService pingPongService;\r\n\r\n    @Override\r\n    public void handleTextMessage(final WebSocketSession session, TextMessage textMessage) {\r\n        OcppMessage message = ocppMessageParser.parsePayloadWithSessionId(session.getId(), textMessage.getPayload());\r\n        websocketServerService.processMessageFromStation(message);\r\n    }\r\n\r\n    @Override\r\n    public void afterConnectionEstablished(WebSocketSession session) {\r\n        Map&lt;String, Object&gt; attributes = session.getAttributes();\r\n        String deviceId = (String) attributes.get(DEVICE_ID);\r\n        String connectionRoute = (String) attributes.get(CONNECTION_ROUTE);\r\n        websocketServerService.connect(Route.toRoute(connectionRoute), deviceId, session);\r\n    }\r\n\r\n    @Override\r\n    public void afterConnectionClosed(WebSocketSession session, @NonNull CloseStatus status) {\r\n        log.info(&quot;WebSocketSession[{}][{}] closed with status {} and attributes {}&quot;,\r\n                session.getId(), session.isOpen(), status, session.getAttributes());\r\n        websocketServerService.disconnectSessionId(session.getId());\r\n    }\r\n\r\n    @Override\r\n    protected void handlePongMessage(WebSocketSession session, PongMessage message) throws Exception {\r\n        pingPongService.handlePong(session, message);\r\n    }\r\n\r\n    @Override\r\n    public @NonNull\r\n    List&lt;String&gt; getSubProtocols() {\r\n        return Arrays.asList(WebsocketServerConfig.SUPPORTED_PROTOCOLS);\r\n    }\r\n\r\n}\r\n```\r\n\r\nAny suggestion, idea what could cause this would be appreciated.\r\n\r\nI run some load tests to see if the sessions are rising and not correlating with the real state.\r\nThe heap dumps after test were (at least for now) not very helpful.\r\nAlso tried so simulate the errors, with no visible outcome.\r\n","title":"Issue with rising heap size in a spring boot app (running in k8s)","body":"<p><strong>Description of the service:</strong></p>\n<p>This spring boot application is essentially a web socket proxy for charging stations (using OCPP protocol over websocket) running as multiple\nnodes behind a load balancer, to basically hold/keep open the connections, so that other microservices(actual consumers of the messages) which connect to this proxy over rabbitmq can be redeployed and maintained.</p>\n<p><strong>Heap dump:</strong></p>\n<p>These devices (tens of thousands) tend to connect and disconnect very often. The issue is that the</p>\n<blockquote>\n<p><strong>sessions (attribute)</strong> in org.apache.catalina.session.StandardManager</p>\n</blockquote>\n<p>keeps adding sessions (more than 700 000) but not removing them (in a span of 7 days). <a href=\"https://i.stack.imgur.com/K0anZ.png\" rel=\"nofollow noreferrer\">see picture (StandartManager)</a></p>\n<p>I also looked into</p>\n<blockquote>\n<p><strong>sessions (attribute)</strong> in org.apache.tomcat.websocket.server.WsServerContainer</p>\n</blockquote>\n<p>which holds the websocket sessions (at the time of dump: 523) which was correct. <a href=\"https://i.stack.imgur.com/ABYub.png\" rel=\"nofollow noreferrer\">see picture (WsServerContainer)</a></p>\n<p>The application also keeps the active sessions (per node) in a concurrent map for own purposes:</p>\n<blockquote>\n<p><strong>sessions (attribute)</strong> in WebsocketServerService</p>\n</blockquote>\n<p>at the time of dump: 530 (which correlates with the above sessions, do not mind the small difference, it's ok) <a href=\"https://i.stack.imgur.com/slt1p.png\" rel=\"nofollow noreferrer\">see picture (WebsocketServerService)</a></p>\n<p>So basically the expectation would be that all <strong>sessions</strong> attributes would hold almost the same amount of sessions, which is this case would be around 530 and NOT more than 700 000.</p>\n<p><strong>Question:</strong></p>\n<p>What might cause the everlasting rising of the standard sessions? I'm not familiar with inner workings of tomcat, if a websocket connection is &quot;baked&quot; by a standart session (at least at the beginning of the connection) and not properly closing the socket (by both parties) could cause that the standard sessions will stick around and are not collected after a while. These are just assumptions.</p>\n<p>One version of the possible cause (WIP) is that we are using the standard <strong>WebSecurityConfigurerAdapter</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@AllArgsConstructor\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    private final WebsocketServerProperties websocketServerProperties;\n    private final StationAuthenticationProvider stationAuthenticationProvider;\n    private final AuthenticationEntryPoint authEntryPoint;\n\n    @Override\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.authenticationProvider(stationAuthenticationProvider);\n    }\n\n    @Override\n    @SuppressWarnings(&quot;squid:S4502&quot;)\n    protected void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n                .httpBasic()\n                .authenticationEntryPoint(authEntryPoint)\n                .and()\n                .antMatcher(websocketServerProperties.getWebsocketPathVpn() + &quot;/**&quot;).anonymous()\n                .and()\n                .antMatcher(websocketServerProperties.getWebsocketPathInternet() + &quot;/**&quot;)\n                .authorizeRequests()\n                .anyRequest()\n                .authenticated();\n    }\n\n}\n</code></pre>\n<p>and not the one mentioned here <a href=\"https://docs.spring.io/spring-security/reference/servlet/integrations/websocket.html#websocket-configuration\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/reference/servlet/integrations/websocket.html#websocket-configuration</a></p>\n<p>So if the station connects and there is an error for example  401, the socket is not properly closed, and the sessions increase without being properly closed and collected by GC (assumtion).</p>\n<p>The implementations of the websocket controller is a standard one (at least by the reference doc):</p>\n<pre><code>@Configuration\n@EnableWebSocket\n@RequiredArgsConstructor\n@EnableConfigurationProperties(WebsocketServerProperties.class)\npublic class WebsocketServerConfig implements WebSocketConfigurer {\n    public static final String[] SUPPORTED_PROTOCOLS = new String[]{.....};\n\n    private final WebsocketServerProperties websocketServerProperties;\n    private final WebsocketHandShakeInterceptor websocketHandShakeInterceptor;\n    private final StationSocketHandler stationSocketHandler;\n\n    public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {\n        registry.addHandler(stationSocketHandler,\n                        websocketServerProperties.getWebsocketPathVpn() + &quot;/*&quot;,\n                        websocketServerProperties.getWebsocketPathInternet() + &quot;/*&quot;)\n                .addInterceptors(websocketHandShakeInterceptor)\n                .setHandshakeHandler(handshakeHandler())\n                .setAllowedOrigins(&quot;*&quot;);\n    }\n\n    private HandshakeHandler handshakeHandler() {\n        DefaultHandshakeHandler handler = new DefaultHandshakeHandler();\n        handler.setSupportedProtocols(SUPPORTED_PROTOCOLS);\n        return handler;\n    }\n\n    @Bean\n    public ServletServerContainerFactoryBean createWebSocketContainer() {\n        ServletServerContainerFactoryBean container = new ServletServerContainerFactoryBean();\n        container.setMaxTextMessageBufferSize(websocketServerProperties.getMaxTextMessageBufferSize());\n        container.setMaxSessionIdleTimeout(websocketServerProperties.getMaxSessionIdleTimeout());\n        return container;\n    }\n\n}\n</code></pre>\n<pre><code>@Slf4j\n@Component\n@RequiredArgsConstructor(onConstructor = @__({@Autowired}))\npublic class StationSocketHandler extends TextWebSocketHandler implements SubProtocolCapable {\n\n    public static final String DEVICE_ID = &quot;DEVICE_ID&quot;;\n    public static final String CONNECTION_ROUTE = &quot;CONNECTION_ROUTE&quot;;\n\n    private final OcppMessageParser ocppMessageParser;\n    private final WebsocketServerService websocketServerService;\n    private final PingPongService pingPongService;\n\n    @Override\n    public void handleTextMessage(final WebSocketSession session, TextMessage textMessage) {\n        OcppMessage message = ocppMessageParser.parsePayloadWithSessionId(session.getId(), textMessage.getPayload());\n        websocketServerService.processMessageFromStation(message);\n    }\n\n    @Override\n    public void afterConnectionEstablished(WebSocketSession session) {\n        Map&lt;String, Object&gt; attributes = session.getAttributes();\n        String deviceId = (String) attributes.get(DEVICE_ID);\n        String connectionRoute = (String) attributes.get(CONNECTION_ROUTE);\n        websocketServerService.connect(Route.toRoute(connectionRoute), deviceId, session);\n    }\n\n    @Override\n    public void afterConnectionClosed(WebSocketSession session, @NonNull CloseStatus status) {\n        log.info(&quot;WebSocketSession[{}][{}] closed with status {} and attributes {}&quot;,\n                session.getId(), session.isOpen(), status, session.getAttributes());\n        websocketServerService.disconnectSessionId(session.getId());\n    }\n\n    @Override\n    protected void handlePongMessage(WebSocketSession session, PongMessage message) throws Exception {\n        pingPongService.handlePong(session, message);\n    }\n\n    @Override\n    public @NonNull\n    List&lt;String&gt; getSubProtocols() {\n        return Arrays.asList(WebsocketServerConfig.SUPPORTED_PROTOCOLS);\n    }\n\n}\n</code></pre>\n<p>Any suggestion, idea what could cause this would be appreciated.</p>\n<p>I run some load tests to see if the sessions are rising and not correlating with the real state.\nThe heap dumps after test were (at least for now) not very helpful.\nAlso tried so simulate the errors, with no visible outcome.</p>\n"},{"tags":["java","junit","mocking"],"comments":[{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1675444110,"post_id":75338783,"comment_id":132937356,"body_markdown":"It seems like you don&#39;t mock the `new B()` and instead you create an actual instance of it. Would I be correct in this observation? If I am correct, then it&#39;s no surprising it doesn&#39;t behave exactly according to test expectation.","body":"It seems like you don&#39;t mock the <code>new B()</code> and instead you create an actual instance of it. Would I be correct in this observation? If I am correct, then it&#39;s no surprising it doesn&#39;t behave exactly according to test expectation."}],"answers":[{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675444520,"creation_date":1675444520,"answer_id":75339019,"question_id":75338783,"body_markdown":"If you want to just verify that each `B` in your `Set` has its `bMethod` invoked, you can set up your test something like this:\r\n\r\n\t@Test\r\n\tpublic void givenAWithBSet_whenAMethodIsCalled_thenCallBMethodOnAllBs() {\r\n\t\tSet&lt;B&gt; bSet = new HashSet&lt;&gt;();\r\n\t\tfor (int i = 0; i&lt;10; i++) {\r\n\t\t\tbSet.add(Mockito.mock(B.class));\r\n\t\t}\r\n\r\n\t\tA a = new A(bSet);\r\n\r\n\t\ta.aMethod();\r\n\r\n\t\tfor (B b : a.getBSet()) {\r\n\t\t\tverify(b).bMethod();\r\n\t\t}\r\n\t}\r\n\r\nIt will verify that `bMethod` was called on each of the mocks.  It&#39;d be nice to use the same mock, but as you&#39;re using a `Set` and the mock uses the identity function for equality, you&#39;ll need to create multiples.","title":"Mocking object in set","body":"<p>If you want to just verify that each <code>B</code> in your <code>Set</code> has its <code>bMethod</code> invoked, you can set up your test something like this:</p>\n<pre><code>@Test\npublic void givenAWithBSet_whenAMethodIsCalled_thenCallBMethodOnAllBs() {\n    Set&lt;B&gt; bSet = new HashSet&lt;&gt;();\n    for (int i = 0; i&lt;10; i++) {\n        bSet.add(Mockito.mock(B.class));\n    }\n\n    A a = new A(bSet);\n\n    a.aMethod();\n\n    for (B b : a.getBSet()) {\n        verify(b).bMethod();\n    }\n}\n</code></pre>\n<p>It will verify that <code>bMethod</code> was called on each of the mocks.  It'd be nice to use the same mock, but as you're using a <code>Set</code> and the mock uses the identity function for equality, you'll need to create multiples.</p>\n"}],"owner":{"account_id":17056266,"reputation":455,"user_id":12340711,"display_name":"riggedCoinflip"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75339019,"answer_count":1,"score":0,"last_activity_date":1675445865,"creation_date":1675443097,"question_id":75338783,"body_markdown":"I have the following classes:\r\n\r\n```java\r\n@Getter //lombok\r\n@AllArgsConstructor //lombok\r\npublic class A {\r\n    private Set&lt;B&gt; bSet;\r\n\r\n    public void aMethod() {\r\n        for (B b: bSet) b.bMethod();\r\n    }\r\n}\r\n\r\n@AllArgsConstructor //lombok\r\npublic class B {\r\n    public void bMethod() { \r\n        //do something\r\n    }\r\n}\r\n```\r\n\r\nI would like to write a test that checks if bMethod() got called for every element of bSet without caring about the Implementation of bMethod(). A unit test.\r\n\r\nThis is my JUnit test case that needs to succeed:\r\n```java\r\n    @Test\r\n    public void givenAWithBSet_whenAMethodIsCalled_thenCallBMethodOnAllBs() {\r\n        //GIVEN a with bSet\r\n        Set&lt;B&gt; bSet = new HashSet&lt;&gt;();\r\n        bSet.add(new B());\r\n        bSet.add(new B());\r\n        \r\n        A a = new A(bSet);\r\n\r\n        //WHEN aMethodIsCalled\r\n        a.aMethod();\r\n\r\n        //then call bMethod on all bs\r\n        bSet.forEach(b -&gt; verify(b, times(1)).bMethod());\r\n        bSet.forEach(Mockito::verifyNoMoreInteractions);\r\n    }\r\n```\r\n\r\nI tried mocking it, but was unsuccessful and need your help","title":"Mocking object in set","body":"<p>I have the following classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter //lombok\n@AllArgsConstructor //lombok\npublic class A {\n    private Set&lt;B&gt; bSet;\n\n    public void aMethod() {\n        for (B b: bSet) b.bMethod();\n    }\n}\n\n@AllArgsConstructor //lombok\npublic class B {\n    public void bMethod() { \n        //do something\n    }\n}\n</code></pre>\n<p>I would like to write a test that checks if bMethod() got called for every element of bSet without caring about the Implementation of bMethod(). A unit test.</p>\n<p>This is my JUnit test case that needs to succeed:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    public void givenAWithBSet_whenAMethodIsCalled_thenCallBMethodOnAllBs() {\n        //GIVEN a with bSet\n        Set&lt;B&gt; bSet = new HashSet&lt;&gt;();\n        bSet.add(new B());\n        bSet.add(new B());\n        \n        A a = new A(bSet);\n\n        //WHEN aMethodIsCalled\n        a.aMethod();\n\n        //then call bMethod on all bs\n        bSet.forEach(b -&gt; verify(b, times(1)).bMethod());\n        bSet.forEach(Mockito::verifyNoMoreInteractions);\n    }\n</code></pre>\n<p>I tried mocking it, but was unsuccessful and need your help</p>\n"},{"tags":["java","maven","github","github-actions","cicd"],"comments":[{"owner":{"account_id":10402418,"reputation":12349,"user_id":7670262,"display_name":"Azeem"},"score":0,"creation_date":1675446072,"post_id":75339194,"comment_id":132937995,"body_markdown":"Does this answer your question? [How to create and save files using PowerShell in GitHub action?](https://stackoverflow.com/questions/75320606/how-to-create-and-save-files-using-powershell-in-github-action)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75320606/how-to-create-and-save-files-using-powershell-in-github-action\">How to create and save files using PowerShell in GitHub action?</a>"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1675447803,"post_id":75339194,"comment_id":132938499,"body_markdown":"Why is code changing source code even if it&#39;s in test area. Such things should be done in `target` directory and never in `src` because it&#39;s under version control... The question is why do you need such a change?","body":"Why is code changing source code even if it&#39;s in test area. Such things should be done in <code>target</code> directory and never in <code>src</code> because it&#39;s under version control... The question is why do you need such a change?"}],"owner":{"account_id":7419576,"reputation":1,"user_id":5644492,"display_name":"Beksultan Nurkulov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675445716,"creation_date":1675445641,"question_id":75339194,"body_markdown":"My question is: I have Maven Project that generates txt file and I&#39;m running it from GitHub Actions. Generated files not pushing into GitHub repo.\r\n\r\nDo I need to add some script into yaml?\r\n\r\n```yml\r\nname: Java CI with Maven\r\n\r\non:\r\n  push:\r\n    branches: [ &quot;master&quot; ]\r\n  pull_request:\r\n    branches: [ &quot;master&quot; ]\r\njobs:\r\n  build:\r\n\r\n    runs-on: ubuntu-latest\r\n\r\n    steps:\r\n    - uses: actions/checkout@v3\r\n    - name: Set up JDK 11\r\n      uses: actions/setup-java@v3\r\n      with:\r\n        java-version: &#39;11&#39;\r\n        distribution: &#39;temurin&#39;\r\n        cache: maven\r\n    - name: Build with Maven\r\n      run: mvn clean test -DsuiteXMLFILE=testng.xml\r\n```\r\n\r\n\r\n![screenshot from github](https://i.stack.imgur.com/PDv9O.png)\r\n\r\n![ss from framework](https://i.stack.imgur.com/HQ95P.png)\r\n\r\nThese two files not updating at all. \r\n\r\nAll paths are correct (used relative path).","title":"Generated txt file not pushing to GitHub repo","body":"<p>My question is: I have Maven Project that generates txt file and I'm running it from GitHub Actions. Generated files not pushing into GitHub repo.</p>\n<p>Do I need to add some script into yaml?</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>name: Java CI with Maven\n\non:\n  push:\n    branches: [ &quot;master&quot; ]\n  pull_request:\n    branches: [ &quot;master&quot; ]\njobs:\n  build:\n\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v3\n    - name: Set up JDK 11\n      uses: actions/setup-java@v3\n      with:\n        java-version: '11'\n        distribution: 'temurin'\n        cache: maven\n    - name: Build with Maven\n      run: mvn clean test -DsuiteXMLFILE=testng.xml\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/PDv9O.png\" alt=\"screenshot from github\" /></p>\n<p><img src=\"https://i.stack.imgur.com/HQ95P.png\" alt=\"ss from framework\" /></p>\n<p>These two files not updating at all.</p>\n<p>All paths are correct (used relative path).</p>\n"},{"tags":["java","mongodb","nosql"],"answers":[{"tags":[],"owner":{"account_id":4235689,"reputation":1161,"user_id":3466890,"display_name":"Hayden Braxton"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1474221708,"creation_date":1474221708,"answer_id":39560927,"question_id":39560890,"body_markdown":"[This tutorial](https://spring.io/guides/gs/accessing-mongodb-data-rest/) might help you out. Your question is a very general question. A google search would probably be more helpful than asking on SO.","title":"Is there any way to expose mongodb database as rest api","body":"<p><a href=\"https://spring.io/guides/gs/accessing-mongodb-data-rest/\" rel=\"nofollow\">This tutorial</a> might help you out. Your question is a very general question. A google search would probably be more helpful than asking on SO.</p>\n"},{"tags":[],"owner":{"account_id":1765900,"reputation":5015,"user_id":1611791,"accept_rate":25,"display_name":"4J41"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474221741,"creation_date":1474221741,"answer_id":39560933,"question_id":39560890,"body_markdown":"Please find the details in [this official page][1].\r\n\r\nSome of the REST Interfaces.\r\n\r\n - RESTHeart\r\n - Mongodb Java REST server\r\n\r\n  [1]: https://docs.mongodb.com/ecosystem/tools/http-interfaces/#rest-interfaces","title":"Is there any way to expose mongodb database as rest api","body":"<p>Please find the details in <a href=\"https://docs.mongodb.com/ecosystem/tools/http-interfaces/#rest-interfaces\" rel=\"nofollow\">this official page</a>.</p>\n\n<p>Some of the REST Interfaces.</p>\n\n<ul>\n<li>RESTHeart</li>\n<li>Mongodb Java REST server</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":27696879,"reputation":1,"user_id":21142396,"display_name":"Sachin Patidar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675445559,"creation_date":1675445360,"answer_id":75339152,"question_id":39560890,"body_markdown":"You can use https://github.com/abilliondreams/mongodb-generic-rest-api\r\n\r\nGeneric REST API to perform CRUD operation on a monogodb collection.","title":"Is there any way to expose mongodb database as rest api","body":"<p>You can use <a href=\"https://github.com/abilliondreams/mongodb-generic-rest-api\" rel=\"nofollow noreferrer\">https://github.com/abilliondreams/mongodb-generic-rest-api</a></p>\n<p>Generic REST API to perform CRUD operation on a monogodb collection.</p>\n"}],"owner":{"account_id":4165992,"reputation":1,"user_id":3414953,"display_name":"user3414953"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1440,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1675445559,"creation_date":1474221452,"question_id":39560890,"body_markdown":"Is there any way to expose mongodb database as rest api.\r\n\r\nI would like to expose my mongo DB database as a rest API. ","title":"Is there any way to expose mongodb database as rest api","body":"<p>Is there any way to expose mongodb database as rest api.</p>\n\n<p>I would like to expose my mongo DB database as a rest API. </p>\n"},{"tags":["java","eclipse","settings","javadoc","java-18"],"answers":[{"tags":[],"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675445344,"creation_date":1675445344,"answer_id":75339150,"question_id":75339120,"body_markdown":"Try opening your Javadoc comment block with `/**` instead of `/*`:\r\n\r\n**Example:**\r\n\r\n&gt; https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html\r\n&gt; \r\n&gt;     /**\r\n&gt;     * Returns an Image object that can then be painted on the screen. \r\n&gt;     * The url argument must specify an absolute &lt;a href=&quot;#{@link}&quot;&gt;{@link URL}&lt;/a&gt;. The name\r\n&gt;     * argument is a specifier that is relative to the url argument. \r\n&gt;     * &lt;p&gt;\r\n&gt;     * This method always returns immediately, whether or not the \r\n&gt;     * image exists. When this applet attempts to draw the image on\r\n&gt;     * the screen, the data will be loaded. The graphics primitives \r\n&gt;     * that draw the image will incrementally paint on the screen. \r\n&gt;     *\r\n&gt;     * @param  url  an absolute URL giving the base location of the image\r\n&gt;     * @param  name the location of the image, relative to the url argument\r\n&gt;     * @return      the image at the specified URL\r\n&gt;     * @see         Image\r\n&gt;     */\r\n&gt;     public Image getImage(URL url, String name) {\r\n&gt;       try {\r\n&gt;         return getImage(new URL(url, name));\r\n&gt;       } \r\n&gt;       catch (MalformedURLException e) {\r\n&gt;         return null;\r\n&gt;       }\r\n&gt;     }\r\n\r\n","title":"why does eclipse show an error message when using the javadoc tag @param when commenting?","body":"<p>Try opening your Javadoc comment block with <code>/**</code> instead of <code>/*</code>:</p>\n<p><strong>Example:</strong></p>\n<blockquote>\n<p><a href=\"https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html</a></p>\n<pre><code>/**\n* Returns an Image object that can then be painted on the screen. \n* The url argument must specify an absolute &lt;a href=&quot;#{@link}&quot;&gt;{@link URL}&lt;/a&gt;. The name\n* argument is a specifier that is relative to the url argument. \n* &lt;p&gt;\n* This method always returns immediately, whether or not the \n* image exists. When this applet attempts to draw the image on\n* the screen, the data will be loaded. The graphics primitives \n* that draw the image will incrementally paint on the screen. \n*\n* @param  url  an absolute URL giving the base location of the image\n* @param  name the location of the image, relative to the url argument\n* @return      the image at the specified URL\n* @see         Image\n*/\npublic Image getImage(URL url, String name) {\n  try {\n    return getImage(new URL(url, name));\n  } \n  catch (MalformedURLException e) {\n    return null;\n  }\n}\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":26470102,"reputation":15,"user_id":20110842,"display_name":"Heracless123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75339150,"answer_count":1,"score":1,"last_activity_date":1675445344,"creation_date":1675445143,"question_id":75339120,"body_markdown":"I was typing some code in eclipse and as soon as I start to use the javadoc @param tag the IDE show me an error mark as seen in the picture. When I use the given solution from eclipse, the IDE corrects for example @param board to @paramboard but this is not the correct notation as I know. The javadoc tag @see don&#39;t show such error as seen in the picture. Do I miss some setting here or do I mistaken here something?\r\n\r\nThanks in advance!\r\n[Screenshot of my IDE with the error mark](https://i.stack.imgur.com/DeAOe.png)","title":"why does eclipse show an error message when using the javadoc tag @param when commenting?","body":"<p>I was typing some code in eclipse and as soon as I start to use the javadoc @param tag the IDE show me an error mark as seen in the picture. When I use the given solution from eclipse, the IDE corrects for example @param board to @paramboard but this is not the correct notation as I know. The javadoc tag @see don't show such error as seen in the picture. Do I miss some setting here or do I mistaken here something?</p>\n<p>Thanks in advance!\n<a href=\"https://i.stack.imgur.com/DeAOe.png\" rel=\"nofollow noreferrer\">Screenshot of my IDE with the error mark</a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":11188,"reputation":75684,"user_id":21441,"accept_rate":100,"display_name":"Mark Elliot"},"score":3,"creation_date":1288494476,"post_id":4061659,"comment_id":4363322,"body_markdown":"What do you want to happen when the size limit is exceeded? (should the add fail? should elements be removed to make room? if you want to remove elements, what&#39;s the criteria for removal?)","body":"What do you want to happen when the size limit is exceeded? (should the add fail? should elements be removed to make room? if you want to remove elements, what&#39;s the criteria for removal?)"},{"owner":{"account_id":314650,"reputation":1571,"user_id":745828,"display_name":"nabster"},"score":0,"creation_date":1538715812,"post_id":4061659,"comment_id":92247666,"body_markdown":"Possible duplicate of [Define a fixed-size list in Java](https://stackoverflow.com/questions/5207162/define-a-fixed-size-list-in-java)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/5207162/define-a-fixed-size-list-in-java\">Define a fixed-size list in Java</a>"}],"answers":[{"tags":[],"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1288494713,"creation_date":1288494713,"answer_id":4061683,"question_id":4061659,"body_markdown":"I would look at the java.util.Collections class source and develop a SizeLimitedList similar to how they do a checkedList.  Then on add I would delete the first entry from the list if the list was full.","title":"How to limit the number of entries in a java List?","body":"<p>I would look at the java.util.Collections class source and develop a SizeLimitedList similar to how they do a checkedList.  Then on add I would delete the first entry from the list if the list was full.</p>\n"},{"tags":[],"owner":{"account_id":5278793,"reputation":784,"user_id":4214827,"display_name":"Martin Forte"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1538713745,"creation_date":1538713745,"answer_id":52658368,"question_id":4061659,"body_markdown":"You could try create a new list with streams. If are only 10 don&#39;t should be a performance problem create a new list.\r\n\r\n    list = list.stream().limit(10).collect(Collectors.toList());\r\n","title":"How to limit the number of entries in a java List?","body":"<p>You could try create a new list with streams. If are only 10 don't should be a performance problem create a new list.</p>\n\n<pre><code>list = list.stream().limit(10).collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1055952,"reputation":106,"user_id":1058668,"display_name":"Splash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675445109,"creation_date":1675445109,"answer_id":75339116,"question_id":4061659,"body_markdown":"```\r\nList b = new ArrayList&lt;&gt;(a.subList(0, 10));\r\n```","title":"How to limit the number of entries in a java List?","body":"<pre><code>List b = new ArrayList&lt;&gt;(a.subList(0, 10));\n</code></pre>\n"}],"owner":{"account_id":55301,"reputation":15295,"user_id":165589,"accept_rate":99,"display_name":"Koerr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15197,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":4061683,"answer_count":3,"score":3,"last_activity_date":1675445109,"creation_date":1288494142,"question_id":4061659,"body_markdown":"I know how to limit size in Map ([like this][1],using LinkedHashMap.removeEldestEntry method does exactly that)\r\n\r\nI want to know how to limit size in a List,what is a best way to implement?\r\n\r\nthanks for help :)\r\n\r\n  [1]: https://stackoverflow.com/questions/422181/how-do-i-limit-the-number-of-entries-in-a-java-hashtable","title":"How to limit the number of entries in a java List?","body":"<p>I know how to limit size in Map (<a href=\"https://stackoverflow.com/questions/422181/how-do-i-limit-the-number-of-entries-in-a-java-hashtable\">like this</a>,using LinkedHashMap.removeEldestEntry method does exactly that)</p>\n\n<p>I want to know how to limit size in a List,what is a best way to implement?</p>\n\n<p>thanks for help :)</p>\n"},{"tags":["java","eclipse","builder"],"comments":[{"owner":{"account_id":1861886,"reputation":3121,"user_id":1686330,"accept_rate":83,"display_name":"Dirk Lachowski"},"score":1,"creation_date":1428417000,"post_id":29493898,"comment_id":47147006,"body_markdown":"A quick google search for `eclipse plugin builder pattern` got me (among others) https://code.google.com/p/fluent-builders-generator-eclipse-plugin/","body":"A quick google search for <code>eclipse plugin builder pattern</code> got me (among others) <a href=\"https://code.google.com/p/fluent-builders-generator-eclipse-plugin/\" rel=\"nofollow noreferrer\">code.google.com/p/fluent-builders-generator-eclipse-plugin</a>"},{"owner":{"account_id":2787344,"reputation":14687,"user_id":2398375,"accept_rate":75,"display_name":"Vince"},"score":0,"creation_date":1428417027,"post_id":29493898,"comment_id":47147021,"body_markdown":"Unless you can somehow achieve this by making a template, Annotation Processing is the only thing I can think of. It allows you to create an annotation, such as `@Build`, then create a processor to look for that annotation in your source code, raise an error when there&#39;s no builder class (optional), and allow the client to generate the builder code similar to how one automatically declared unimplemented methods. As for plugins, I&#39;m sure you know the rules by now /: It sucks, but you can&#39;t request for tools on here","body":"Unless you can somehow achieve this by making a template, Annotation Processing is the only thing I can think of. It allows you to create an annotation, such as <code>@Build</code>, then create a processor to look for that annotation in your source code, raise an error when there&#39;s no builder class (optional), and allow the client to generate the builder code similar to how one automatically declared unimplemented methods. As for plugins, I&#39;m sure you know the rules by now /: It sucks, but you can&#39;t request for tools on here"},{"owner":{"account_id":3446101,"reputation":11345,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":1,"creation_date":1435241222,"post_id":29493898,"comment_id":50126433,"body_markdown":"@Dirk - I do not like your answer. It&#39;s not possible to downvote the comments but I am virtually giving you -1. Maybe you should not be happy just with the pure existence of a link found by google. I have tried the Fluent Builder Generator and it has not been updated for 10 years and generates quite complicated code instead of a nice simple builder.","body":"@Dirk - I do not like your answer. It&#39;s not possible to downvote the comments but I am virtually giving you -1. Maybe you should not be happy just with the pure existence of a link found by google. I have tried the Fluent Builder Generator and it has not been updated for 10 years and generates quite complicated code instead of a nice simple builder."},{"owner":{"account_id":1861886,"reputation":3121,"user_id":1686330,"accept_rate":83,"display_name":"Dirk Lachowski"},"score":0,"creation_date":1435300896,"post_id":29493898,"comment_id":50152721,"body_markdown":"@HonzaZidek I think you have misunderstood the point of my comment. The OP hasn&#39;t shown any effort to find an answer by himself. I only wanted to point out the fact that some simple googling got me answers (plural, that&#39;s why i have written &#39;among others&#39;). I know that a &quot;here do you have a link&quot; isn&#39;t an answer - that&#39;s why i have put it in a comment. Maybe i better had voted to close...","body":"@HonzaZidek I think you have misunderstood the point of my comment. The OP hasn&#39;t shown any effort to find an answer by himself. I only wanted to point out the fact that some simple googling got me answers (plural, that&#39;s why i have written &#39;among others&#39;). I know that a &quot;here do you have a link&quot; isn&#39;t an answer - that&#39;s why i have put it in a comment. Maybe i better had voted to close..."},{"owner":{"account_id":3446101,"reputation":11345,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":0,"creation_date":1435304559,"post_id":29493898,"comment_id":50154794,"body_markdown":"@Dirk: I would not close it! I did myself some research and I have not found any useful eclipse plugin for the builder - that&#39;s how I came to this post. So I would enjoy if someone may *answer* the OP&#39;s question, not to close it! You may show your ability to use google and find something really working, configurable and up-to-date and post it as an answer :)","body":"@Dirk: I would not close it! I did myself some research and I have not found any useful eclipse plugin for the builder - that&#39;s how I came to this post. So I would enjoy if someone may <i>answer</i> the OP&#39;s question, not to close it! You may show your ability to use google and find something really working, configurable and up-to-date and post it as an answer :)"},{"owner":{"account_id":1861886,"reputation":3121,"user_id":1686330,"accept_rate":83,"display_name":"Dirk Lachowski"},"score":0,"creation_date":1435310156,"post_id":29493898,"comment_id":50157965,"body_markdown":"@HonzaZidek Using my google foo? I&#39;m sorely tempted :)","body":"@HonzaZidek Using my google foo? I&#39;m sorely tempted :)"},{"owner":{"account_id":1861886,"reputation":3121,"user_id":1686330,"accept_rate":83,"display_name":"Dirk Lachowski"},"score":1,"creation_date":1435310790,"post_id":29493898,"comment_id":50158329,"body_markdown":"@HonzaZidek It&#39;s not an eclipse plugin but maybe you&#39;ll give it a try: https://github.com/mkarneim/pojobuilder","body":"@HonzaZidek It&#39;s not an eclipse plugin but maybe you&#39;ll give it a try: <a href=\"https://github.com/mkarneim/pojobuilder\" rel=\"nofollow noreferrer\">github.com/mkarneim/pojobuilder</a>"},{"owner":{"account_id":367746,"reputation":24129,"user_id":714112,"accept_rate":80,"display_name":"Sridhar Sarnobat"},"score":0,"creation_date":1521424349,"post_id":29493898,"comment_id":85709791,"body_markdown":"Eclipse badly needs this functionality. Someone with more patience than me please file an issue ;)","body":"Eclipse badly needs this functionality. Someone with more patience than me please file an issue ;)"},{"owner":{"account_id":4318345,"reputation":6373,"user_id":3527464,"accept_rate":100,"display_name":"Pyves"},"score":1,"creation_date":1534800828,"post_id":29493898,"comment_id":90827678,"body_markdown":"@Sridhar-Sarnobat actually there is a bug report, hidden inside Bugzilla: https://bugs.eclipse.org/bugs/show_bug.cgi?id=458364","body":"@Sridhar-Sarnobat actually there is a bug report, hidden inside Bugzilla: <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=458364\" rel=\"nofollow noreferrer\">bugs.eclipse.org/bugs/show_bug.cgi?id=458364</a>"},{"owner":{"account_id":3746709,"reputation":1,"user_id":3115223,"display_name":"user3115223"},"score":0,"creation_date":1635173191,"post_id":29493898,"comment_id":123221760,"body_markdown":"One problem of lombok. It generate all in compile time. This can be a perfomance neck. Use with caution.","body":"One problem of lombok. It generate all in compile time. This can be a perfomance neck. Use with caution."}],"answers":[{"tags":[],"owner":{"account_id":3889821,"reputation":586,"user_id":3220336,"accept_rate":90,"display_name":"unique_ptr"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1438005633,"creation_date":1438005633,"answer_id":31655204,"question_id":29493898,"body_markdown":"You could add your own template window -&gt; preferences -&gt; java -&gt; editor -&gt; templates and this will be activated with the content proposal but not by refactor action","title":"Automatically create builder for class in Eclipse","body":"<p>You could add your own template window -> preferences -> java -> editor -> templates and this will be activated with the content proposal but not by refactor action</p>\n"},{"tags":[],"owner":{"account_id":4197127,"reputation":544,"user_id":3438277,"display_name":"jaco"},"down_vote_count":1,"up_vote_count":30,"is_accepted":false,"score":29,"last_activity_date":1438722514,"creation_date":1438722514,"answer_id":31819370,"question_id":29493898,"body_markdown":"You may want to look at [lombok][1] annotations to generate builders without the boiler plate code. For example:\r\n\r\n    @Builder\r\n    public class MyPojo {\r\n        private String name;\r\n    }\r\n        \r\n    MyPojoBuilder.builder().name(&quot;yourame&quot;).build();\r\n\r\nThe limitation is that this doesn&#39;t seem to work with abstract classes.\r\n\r\n  [1]: https://projectlombok.org","title":"Automatically create builder for class in Eclipse","body":"<p>You may want to look at <a href=\"https://projectlombok.org\">lombok</a> annotations to generate builders without the boiler plate code. For example:</p>\n\n<pre><code>@Builder\npublic class MyPojo {\n    private String name;\n}\n\nMyPojoBuilder.builder().name(\"yourame\").build();\n</code></pre>\n\n<p>The limitation is that this doesn't seem to work with abstract classes.</p>\n"},{"tags":[],"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1675444950,"creation_date":1442967300,"answer_id":32729063,"question_id":29493898,"body_markdown":"Maybe I am late to the party.\r\n\r\nEclipse on its own does not provide a way to generate code to support builder pattern. However it can be extended through plugins to enhance the functionality.\r\n\r\nThere is this plugin that I use this:\r\n\r\nhttps://github.com/henningjensen/bpep\r\n\r\n\r\n\r\nEdit: After 5 years, revisiting this topic, would recommend to use lombok that has become industry standard anyway and is also IDE agnostic ==&gt; would work if your team mates use a variety of IDEs.\r\nCheck out this annotation. You could also include pattern [inheritance][1] among classes. \r\n\r\n    @Builder(toBuilder = true)\r\n    // or you could use this for inheritance\r\n    @SuperBuilder\r\n\r\n\r\n\r\n  [1]: https://www.baeldung.com/lombok-builder-inheritance","title":"Automatically create builder for class in Eclipse","body":"<p>Maybe I am late to the party.</p>\n<p>Eclipse on its own does not provide a way to generate code to support builder pattern. However it can be extended through plugins to enhance the functionality.</p>\n<p>There is this plugin that I use this:</p>\n<p><a href=\"https://github.com/henningjensen/bpep\" rel=\"nofollow noreferrer\">https://github.com/henningjensen/bpep</a></p>\n<p>Edit: After 5 years, revisiting this topic, would recommend to use lombok that has become industry standard anyway and is also IDE agnostic ==&gt; would work if your team mates use a variety of IDEs.\nCheck out this annotation. You could also include pattern <a href=\"https://www.baeldung.com/lombok-builder-inheritance\" rel=\"nofollow noreferrer\">inheritance</a> among classes.</p>\n<pre><code>@Builder(toBuilder = true)\n// or you could use this for inheritance\n@SuperBuilder\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4487505,"reputation":131,"user_id":3649631,"display_name":"Atmega"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1475421085,"creation_date":1475421085,"answer_id":39818392,"question_id":29493898,"body_markdown":"Try https://github.com/vojtek/write-it-once\r\n\r\n    package ${cls.package.name};\r\n\r\n    public class ${cls.shortName}Builder {\r\n\r\n    public static ${cls.name}Builder builder() {\r\n        return new ${cls.name}Builder();\r\n    }\r\n    &lt;% for(field in cls.fields) {%&gt;\r\n    private ${field.type.name} ${field.name};\r\n    &lt;% } %&gt;\r\n    &lt;% for(field in cls.fields) {%&gt;\r\n    public ${cls.name}Builder ${field.name}(${field.type.name} ${field.name}) {\r\n        this.${field.name} = ${field.name};\r\n        return this;\r\n    }\r\n    &lt;% } %&gt;\r\n    public ${cls.name} build() {\r\n        final ${cls.name} data = new ${cls.name}();\r\n    &lt;% for(field in cls.fields) {%&gt;\r\n        data.${field.setter.name}(this.${field.name});\r\n    &lt;% } %&gt;\r\n        return data;\r\n    }\r\n    }","title":"Automatically create builder for class in Eclipse","body":"<p>Try <a href=\"https://github.com/vojtek/write-it-once\" rel=\"nofollow\">https://github.com/vojtek/write-it-once</a></p>\n\n<pre><code>package ${cls.package.name};\n\npublic class ${cls.shortName}Builder {\n\npublic static ${cls.name}Builder builder() {\n    return new ${cls.name}Builder();\n}\n&lt;% for(field in cls.fields) {%&gt;\nprivate ${field.type.name} ${field.name};\n&lt;% } %&gt;\n&lt;% for(field in cls.fields) {%&gt;\npublic ${cls.name}Builder ${field.name}(${field.type.name} ${field.name}) {\n    this.${field.name} = ${field.name};\n    return this;\n}\n&lt;% } %&gt;\npublic ${cls.name} build() {\n    final ${cls.name} data = new ${cls.name}();\n&lt;% for(field in cls.fields) {%&gt;\n    data.${field.setter.name}(this.${field.name});\n&lt;% } %&gt;\n    return data;\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":45915,"reputation":3990,"user_id":135535,"accept_rate":59,"display_name":"Christoph"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1598897340,"creation_date":1497559587,"answer_id":44576754,"question_id":29493898,"body_markdown":"I currently use **Spark Builder Generator** with Eclipse Neon.1a Release (4.6.1) and it works well. \r\n\r\n* https://marketplace.eclipse.org/content/sparkbuildergenerator \r\n* https://github.com/helospark/SparkBuilderGenerator\r\n\r\n\r\n&gt; You can set the preferences under:  \r\nWindow-&gt;Preferences-&gt;Java-&gt;Spark Builder Generator","title":"Automatically create builder for class in Eclipse","body":"<p>I currently use <strong>Spark Builder Generator</strong> with Eclipse Neon.1a Release (4.6.1) and it works well.</p>\n<ul>\n<li><a href=\"https://marketplace.eclipse.org/content/sparkbuildergenerator\" rel=\"nofollow noreferrer\">https://marketplace.eclipse.org/content/sparkbuildergenerator</a></li>\n<li><a href=\"https://github.com/helospark/SparkBuilderGenerator\" rel=\"nofollow noreferrer\">https://github.com/helospark/SparkBuilderGenerator</a></li>\n</ul>\n<blockquote>\n<p>You can set the preferences under:<br />\nWindow-&gt;Preferences-&gt;Java-&gt;Spark Builder Generator</p>\n</blockquote>\n"}],"owner":{"account_id":1036855,"reputation":13858,"user_id":1043882,"accept_rate":79,"display_name":"hasanghaforian"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38109,"favorite_count":0,"down_vote_count":0,"up_vote_count":51,"accepted_answer_id":32729063,"answer_count":5,"score":51,"last_activity_date":1675444950,"creation_date":1428416509,"question_id":29493898,"body_markdown":"Is there a way to use an *automatic builder* to create builder ([Joshua Bloch&#39;s Builder Pattern][1]) for classes in `Eclipse`? For example an option in the menu, a plugin or something else. I could not find anything under &quot;*`Refactor`*&quot;.\r\n\r\n  [1]: http://www.informit.com/articles/article.aspx?p=1216151&amp;seqNum=2","title":"Automatically create builder for class in Eclipse","body":"<p>Is there a way to use an <em>automatic builder</em> to create builder (<a href=\"http://www.informit.com/articles/article.aspx?p=1216151&amp;seqNum=2\" rel=\"noreferrer\">Joshua Bloch's Builder Pattern</a>) for classes in <code>Eclipse</code>? For example an option in the menu, a plugin or something else. I could not find anything under \"<em><code>Refactor</code></em>\".</p>\n"},{"tags":["java","spring-batch"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1401031214,"post_id":23847661,"comment_id":36716676,"body_markdown":"But is the FlatFileItemReader able to read zip files?","body":"But is the FlatFileItemReader able to read zip files?"},{"owner":{"account_id":3412463,"reputation":1246,"user_id":2862100,"accept_rate":33,"display_name":"Luke"},"score":0,"creation_date":1401057877,"post_id":23847661,"comment_id":36724493,"body_markdown":"inputZipFile is a leftover. I am passing txt file.","body":"inputZipFile is a leftover. I am passing txt file."}],"answers":[{"tags":[],"owner":{"account_id":3412463,"reputation":1246,"user_id":2862100,"accept_rate":33,"display_name":"Luke"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1401058239,"creation_date":1401058239,"answer_id":23860699,"question_id":23847661,"body_markdown":"The issue disappeared when I change the return type of my reader bean from Item&lt;Player&gt; to FlatFileItemReader&lt;Player&gt;. It is still not clear to me why this is a problem since chunk().reader() accepts ItemReader&lt;?&gt; as an input. I assume that there is some AOP magic under the hood which does FlatFileReader init and matches by the return type.","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>The issue disappeared when I change the return type of my reader bean from Item to FlatFileItemReader. It is still not clear to me why this is a problem since chunk().reader() accepts ItemReader as an input. I assume that there is some AOP magic under the hood which does FlatFileReader init and matches by the return type.</p>\n"},{"tags":[],"owner":{"account_id":4793143,"reputation":111,"user_id":3871744,"display_name":"user3871744"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1406185103,"creation_date":1406185103,"answer_id":24927005,"question_id":23847661,"body_markdown":"It is because ItemReader don&#39;t have the open method, using hte StepScope will create a proxy class based on the return type. It is also ok to return ItemStreamReader","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>It is because ItemReader don't have the open method, using hte StepScope will create a proxy class based on the return type. It is also ok to return ItemStreamReader</p>\n"},{"tags":[],"owner":{"account_id":2221557,"reputation":3028,"user_id":1960816,"display_name":"Nick Vanderhoven"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1430988452,"creation_date":1430988452,"answer_id":30096121,"question_id":23847661,"body_markdown":"Since you put the reader in `StepScope`, the bean return type should be the implementing type `FlatFileItemReader`:\r\n\r\n    @Bean\r\n    @StepScope\r\n    public FlatFileItemReader&lt;Player&gt; reader(@Value(&quot;#{jobParameters[inputZipfile]}&quot;) String inputZipfile) {\r\n                ...\r\n                return reader;\r\n    }\r\n\r\nIf you specify the interface, the Spring proxy only has access to the methods and annotations specified on the interface `ItemReader` and is missing important annotations. There is also a warning (with a typo) in the logs:\r\n\r\n    2015-05-07 10:40:22,733 WARN  [main] org.springframework.batch.item.ItemReader is an interface.  The implementing class will not be queried for annotation based listener configurations.  If using @StepScope on a @Bean method, be sure to return the implementing class so listner annotations can be used.\r\n    2015-05-07 10:40:22,748 WARN  [main] org.springframework.batch.item.ItemReader is an interface.  The implementing class will not be queried for annotation based listener configurations.  If using @StepScope on a @Bean method, be sure to return the implementing class so listner annotations can be used. \r\n\r\nCurrently the Spring Boot Batch example is also returning the ItemReader, so I guess other people will struggle with the same issues.","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>Since you put the reader in <code>StepScope</code>, the bean return type should be the implementing type <code>FlatFileItemReader</code>:</p>\n\n<pre><code>@Bean\n@StepScope\npublic FlatFileItemReader&lt;Player&gt; reader(@Value(\"#{jobParameters[inputZipfile]}\") String inputZipfile) {\n            ...\n            return reader;\n}\n</code></pre>\n\n<p>If you specify the interface, the Spring proxy only has access to the methods and annotations specified on the interface <code>ItemReader</code> and is missing important annotations. There is also a warning (with a typo) in the logs:</p>\n\n<pre><code>2015-05-07 10:40:22,733 WARN  [main] org.springframework.batch.item.ItemReader is an interface.  The implementing class will not be queried for annotation based listener configurations.  If using @StepScope on a @Bean method, be sure to return the implementing class so listner annotations can be used.\n2015-05-07 10:40:22,748 WARN  [main] org.springframework.batch.item.ItemReader is an interface.  The implementing class will not be queried for annotation based listener configurations.  If using @StepScope on a @Bean method, be sure to return the implementing class so listner annotations can be used. \n</code></pre>\n\n<p>Currently the Spring Boot Batch example is also returning the ItemReader, so I guess other people will struggle with the same issues.</p>\n"},{"tags":[],"owner":{"account_id":1080401,"reputation":599,"user_id":1077548,"accept_rate":79,"display_name":"bodtx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1452166439,"creation_date":1452166439,"answer_id":34654115,"question_id":23847661,"body_markdown":"Same problem here.\r\nChanging return type of my reader to the real implementation and adding to the reader\r\n\r\n    implements ItemStream\r\n\r\nDid the trick for me","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>Same problem here.\nChanging return type of my reader to the real implementation and adding to the reader</p>\n\n<pre><code>implements ItemStream\n</code></pre>\n\n<p>Did the trick for me</p>\n"},{"tags":[],"owner":{"account_id":4760125,"reputation":7,"user_id":6612111,"display_name":"Kiran Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514452555,"creation_date":1514452555,"answer_id":48004717,"question_id":23847661,"body_markdown":"I think you should increase your chunk size in processPlayerStats() step bean class, i.e from chunk(10) to chunk(100/more may be). ","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>I think you should increase your chunk size in processPlayerStats() step bean class, i.e from chunk(10) to chunk(100/more may be). </p>\n"},{"tags":[],"owner":{"account_id":2149542,"reputation":767,"user_id":1906350,"display_name":"Amitabha Roy"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1527248621,"creation_date":1527248621,"answer_id":50528449,"question_id":23847661,"body_markdown":"I have fixed it by:\r\n\r\n    reader.open(new ExecutionContext());","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>I have fixed it by:</p>\n\n<pre><code>reader.open(new ExecutionContext());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9758900,"reputation":487,"user_id":7234608,"display_name":"Ray"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1544601979,"creation_date":1544601979,"answer_id":53738574,"question_id":23847661,"body_markdown":"The method I defined is like below:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n        @Bean\r\n        @StepScope\r\n        public ItemReader&lt;BP&gt; BPReader(){\r\n           \r\n            JdbcCursorItemReader&lt;BP&gt; itemReader = new JdbcCursorItemReader&lt;BP&gt;();\r\n            ...\r\n            return itemReader;\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nThe type I defined in the method is ItemReader which is an interface, the return type is JdbcCursorItemReader which is a sub-class of it. By changing the return type defination to JdbcCursorItemReader solved my problem","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>The method I defined is like below:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>    @Bean\r\n    @StepScope\r\n    public ItemReader&lt;BP&gt; BPReader(){\r\n       \r\n        JdbcCursorItemReader&lt;BP&gt; itemReader = new JdbcCursorItemReader&lt;BP&gt;();\r\n        ...\r\n        return itemReader;\r\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The type I defined in the method is ItemReader which is an interface, the return type is JdbcCursorItemReader which is a sub-class of it. By changing the return type defination to JdbcCursorItemReader solved my problem</p>\n"},{"tags":[],"owner":{"account_id":362810,"reputation":718,"user_id":706208,"display_name":"apetrelli"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675444941,"creation_date":1675444941,"answer_id":75339091,"question_id":23847661,"body_markdown":"Instead of returning `ItemReader`, return `ItemStreamReader`, since it&#39;s a combination of `ItemReader` and `ItemStream` interfaces, so it recognizes that there is the `open` method that needs to be called.","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>Instead of returning <code>ItemReader</code>, return <code>ItemStreamReader</code>, since it's a combination of <code>ItemReader</code> and <code>ItemStream</code> interfaces, so it recognizes that there is the <code>open</code> method that needs to be called.</p>\n"}],"owner":{"account_id":3412463,"reputation":1246,"user_id":2862100,"accept_rate":33,"display_name":"Luke"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30995,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"answer_count":8,"score":31,"last_activity_date":1675444941,"creation_date":1400951374,"question_id":23847661,"body_markdown":"I read SO related questions but the solutions don&#39;t work for me.\r\n\r\nI get the `org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read` exception.\r\n\r\nBelow is my configuration:\r\n\r\n\r\n \r\n\r\n    @Bean\r\n    @StepScope\r\n    public ItemReader&lt;Player&gt; reader(@Value(&quot;#{jobParameters[inputZipfile]}&quot;) String inputZipfile) {\r\n            \t\tfinal String [] header = { .. this part omitted for brevity ... };\r\n                    FlatFileItemReader&lt;Player&gt; reader = new FlatFileItemReader&lt;Player&gt;();\r\n                    \r\n            \r\n                    System.out.println(&quot;\\t\\t\\t\\t\\t&quot;+inputZipfile);\r\n            \r\n                    reader.setResource(new ClassPathResource(inputZipfile));\r\n                    reader.setLineMapper(new DefaultLineMapper&lt;Player&gt;() {{\r\n                        setLineTokenizer(new DelimitedLineTokenizer() {{\r\n                            setNames( header );\r\n                        }});\r\n                        setFieldSetMapper(new BeanWrapperFieldSetMapper&lt;Player&gt;() {{\r\n                            setTargetType(Player.class);\r\n                        }});\r\n                    }});\r\n                    reader.setComments( header );\r\n                    return reader;\r\n    }\r\n            \t\r\n    @Bean\r\n    @StepScope\r\n    public ItemProcessor&lt;Player, PlayersStats&gt; processor(@Value(&quot;#{jobParameters[statType]}&quot;) String statType,\r\n            \t\t\t\t\t\t\t\t\t\t\t\t\t\t @Value(&quot;#{jobParameters[season]}&quot;) String season){\r\n            \t\tPlayersStatsProcessor psp = new PlayersStatsProcessor();\r\n            \t\tpsp.setStatisticType( StatisticType.valueOf(statType) );\r\n            \t\tpsp.setSeason( season );\r\n                \treturn psp;\r\n    }\r\n            \t\r\n            \t\r\n    @Bean\r\n    @StepScope\r\n    public ItemWriter&lt;PlayersStats&gt; writer(){\r\n            \treturn new CustomWriter();\r\n    }\r\n        \r\n        \r\n    @Bean\r\n    public Job generateStatisticsJob() {\r\n            \r\n            return this.jobs.get(&quot;generateStatisticsJob&quot;)\r\n                    .incrementer(new RunIdIncrementer())\r\n                    .start(processPlayerStats())\r\n                    //.end()\r\n                    .build();\r\n    }\r\n            \t\r\n    @Bean\r\n    public Step processPlayerStats() {\r\n               return this.steps.get(&quot;processPlayerStats&quot;)        \r\n                            .&lt;Player, PlayersStats&gt; chunk(10)\r\n                            .reader(reader(null))\r\n                            .processor(processor(null,null))\r\n                            .writer(writer())\r\n                            .build();\r\n    }\r\n\r\nThe inputZipFile variable is set properly and the file exists on the drive.\r\nI checked in the FlatFileItemReader code and the ReaderNotOpenException occurs when the reader member of the reader class is not set. The reader member is set in doOpen method.\r\nIt looks that doOpen is not called. The question is why ?\r\n\r\n","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>I read SO related questions but the solutions don't work for me.</p>\n\n<p>I get the <code>org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read</code> exception.</p>\n\n<p>Below is my configuration:</p>\n\n<pre><code>@Bean\n@StepScope\npublic ItemReader&lt;Player&gt; reader(@Value(\"#{jobParameters[inputZipfile]}\") String inputZipfile) {\n                final String [] header = { .. this part omitted for brevity ... };\n                FlatFileItemReader&lt;Player&gt; reader = new FlatFileItemReader&lt;Player&gt;();\n\n\n                System.out.println(\"\\t\\t\\t\\t\\t\"+inputZipfile);\n\n                reader.setResource(new ClassPathResource(inputZipfile));\n                reader.setLineMapper(new DefaultLineMapper&lt;Player&gt;() {{\n                    setLineTokenizer(new DelimitedLineTokenizer() {{\n                        setNames( header );\n                    }});\n                    setFieldSetMapper(new BeanWrapperFieldSetMapper&lt;Player&gt;() {{\n                        setTargetType(Player.class);\n                    }});\n                }});\n                reader.setComments( header );\n                return reader;\n}\n\n@Bean\n@StepScope\npublic ItemProcessor&lt;Player, PlayersStats&gt; processor(@Value(\"#{jobParameters[statType]}\") String statType,\n                                                                 @Value(\"#{jobParameters[season]}\") String season){\n                PlayersStatsProcessor psp = new PlayersStatsProcessor();\n                psp.setStatisticType( StatisticType.valueOf(statType) );\n                psp.setSeason( season );\n                return psp;\n}\n\n\n@Bean\n@StepScope\npublic ItemWriter&lt;PlayersStats&gt; writer(){\n            return new CustomWriter();\n}\n\n\n@Bean\npublic Job generateStatisticsJob() {\n\n        return this.jobs.get(\"generateStatisticsJob\")\n                .incrementer(new RunIdIncrementer())\n                .start(processPlayerStats())\n                //.end()\n                .build();\n}\n\n@Bean\npublic Step processPlayerStats() {\n           return this.steps.get(\"processPlayerStats\")        \n                        .&lt;Player, PlayersStats&gt; chunk(10)\n                        .reader(reader(null))\n                        .processor(processor(null,null))\n                        .writer(writer())\n                        .build();\n}\n</code></pre>\n\n<p>The inputZipFile variable is set properly and the file exists on the drive.\nI checked in the FlatFileItemReader code and the ReaderNotOpenException occurs when the reader member of the reader class is not set. The reader member is set in doOpen method.\nIt looks that doOpen is not called. The question is why ?</p>\n"},{"tags":["java","amazon-web-services","aws-cloudformation","aws-api-gateway","bitbucket-pipelines"],"answers":[{"tags":[],"owner":{"account_id":15768772,"reputation":372,"user_id":13930970,"display_name":"furydrive"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675438337,"creation_date":1675438337,"answer_id":75337880,"question_id":75337664,"body_markdown":"You need to add [CAPABILITY_AUTO_EXPAND] as the error describes\r\n\r\nthat would be,\r\n\r\n```\r\nstep:\r\n          name: Deploy to Cloudformation\r\n          script:\r\n            - pipe: atlassian/aws-sam-deploy:1.1.0\r\n              variables:\r\n                AWS_ACCESS_KEY_ID: &#39;my id here&#39;\r\n                AWS_SECRET_ACCESS_KEY: &#39;key here&#39;\r\n                AWS_SESSION_TOKEN: &#39;sessionToken&#39;\r\n                AWS_DEFAULT_REGION: &#39;us-east-1&#39;\r\n                S3_BUCKET: &#39;s3bucketname&#39;\r\n                STACK_NAME: &#39;stackname&#39;\r\n                s3_prefix: &#39;stackname&#39;\r\n                SAM_TEMPLATE: &#39;template.yaml&#39; \r\n                capabilities: [&#39;CAPABILITY_NAMED_IAM&#39;,&#39;CAPABILITY_AUTO_EXPAND&#39;]\r\n                parameter_overrides: [&quot;VPC=\\&quot;vpcenteredhere\\&quot; VPCEName=\\&quot;vpceenteredhere\\&quot; MyStageName=\\&quot;test\\&quot; ApplicationTag=\\&quot;project\\&quot;&quot;]\r\n```","title":"Getting error running Bitbucket pipeline for deploying to AWS Cloudformation","body":"<p>You need to add [CAPABILITY_AUTO_EXPAND] as the error describes</p>\n<p>that would be,</p>\n<pre><code>step:\n          name: Deploy to Cloudformation\n          script:\n            - pipe: atlassian/aws-sam-deploy:1.1.0\n              variables:\n                AWS_ACCESS_KEY_ID: 'my id here'\n                AWS_SECRET_ACCESS_KEY: 'key here'\n                AWS_SESSION_TOKEN: 'sessionToken'\n                AWS_DEFAULT_REGION: 'us-east-1'\n                S3_BUCKET: 's3bucketname'\n                STACK_NAME: 'stackname'\n                s3_prefix: 'stackname'\n                SAM_TEMPLATE: 'template.yaml' \n                capabilities: ['CAPABILITY_NAMED_IAM','CAPABILITY_AUTO_EXPAND']\n                parameter_overrides: [&quot;VPC=\\&quot;vpcenteredhere\\&quot; VPCEName=\\&quot;vpceenteredhere\\&quot; MyStageName=\\&quot;test\\&quot; ApplicationTag=\\&quot;project\\&quot;&quot;]\n</code></pre>\n"}],"owner":{"account_id":15801712,"reputation":1294,"user_id":11402025,"display_name":"Tanu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675444600,"creation_date":1675437308,"question_id":75337664,"body_markdown":"I am trying to deploy to AWS Cloud Formation using the script. I am using the values present in samconfig.toml. I am able to build it locally but it fails in bitbucket pipeline. \r\n\r\n```\r\nstep:\r\n          name: Deploy to Cloudformation\r\n          script:\r\n            - pipe: atlassian/aws-sam-deploy:1.1.0\r\n              variables:\r\n                AWS_ACCESS_KEY_ID: &#39;my id here&#39;\r\n                AWS_SECRET_ACCESS_KEY: &#39;key here&#39;\r\n                AWS_SESSION_TOKEN: &#39;sessionToken&#39;\r\n                AWS_DEFAULT_REGION: &#39;us-east-1&#39;\r\n                S3_BUCKET: &#39;s3bucketname&#39;\r\n                STACK_NAME: &#39;stackname&#39;\r\n                s3_prefix: &#39;stackname&#39;\r\n                SAM_TEMPLATE: &#39;template.yaml&#39; \r\n                capabilities: [&#39;CAPABILITY_NAMED_IAM&#39;, &#39;CAPABILITY_AUTO_EXPAND&#39;]\r\n                parameter_overrides: [&quot;VPC=\\&quot;vpcenteredhere\\&quot; VPCEName=\\&quot;vpceenteredhere\\&quot; MyStageName=\\&quot;test\\&quot; ApplicationTag=\\&quot;project\\&quot;&quot;]\r\n```\r\n\r\n```\r\n✖ Failed to create the stack.\r\nAn error occurred (InsufficientCapabilitiesException) when calling the CreateStack operation: Requires capabilities : [CAPABILITY_AUTO_EXPAND]\r\nERROR: Failed to get information about stack stackname.\r\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id stackname does not exist\r\n```","title":"Getting error running Bitbucket pipeline for deploying to AWS Cloudformation","body":"<p>I am trying to deploy to AWS Cloud Formation using the script. I am using the values present in samconfig.toml. I am able to build it locally but it fails in bitbucket pipeline.</p>\n<pre><code>step:\n          name: Deploy to Cloudformation\n          script:\n            - pipe: atlassian/aws-sam-deploy:1.1.0\n              variables:\n                AWS_ACCESS_KEY_ID: 'my id here'\n                AWS_SECRET_ACCESS_KEY: 'key here'\n                AWS_SESSION_TOKEN: 'sessionToken'\n                AWS_DEFAULT_REGION: 'us-east-1'\n                S3_BUCKET: 's3bucketname'\n                STACK_NAME: 'stackname'\n                s3_prefix: 'stackname'\n                SAM_TEMPLATE: 'template.yaml' \n                capabilities: ['CAPABILITY_NAMED_IAM', 'CAPABILITY_AUTO_EXPAND']\n                parameter_overrides: [&quot;VPC=\\&quot;vpcenteredhere\\&quot; VPCEName=\\&quot;vpceenteredhere\\&quot; MyStageName=\\&quot;test\\&quot; ApplicationTag=\\&quot;project\\&quot;&quot;]\n</code></pre>\n<pre><code>✖ Failed to create the stack.\nAn error occurred (InsufficientCapabilitiesException) when calling the CreateStack operation: Requires capabilities : [CAPABILITY_AUTO_EXPAND]\nERROR: Failed to get information about stack stackname.\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id stackname does not exist\n</code></pre>\n"},{"tags":["java","list","algorithm","data-structures"],"comments":[{"owner":{"account_id":22848,"reputation":131588,"user_id":56778,"accept_rate":93,"display_name":"Jim Mischel"},"score":0,"creation_date":1675442571,"post_id":75337081,"comment_id":132936840,"body_markdown":"I think your #3 should be &quot;A utility function that returns a list of persons in a group.&quot;","body":"I think your #3 should be &quot;A utility function that returns a list of persons in a group.&quot;"},{"owner":{"account_id":22848,"reputation":131588,"user_id":56778,"accept_rate":93,"display_name":"Jim Mischel"},"score":0,"creation_date":1675442677,"post_id":75337081,"comment_id":132936876,"body_markdown":"You said: &quot;Given a list of persons [Pi, Pj, Pm, ..., Pn], I want to find out all the groups present here.&quot; Where is &quot;here?&quot; Do you mean that, given a list of persons, you want to get a list of all the groups those persons represent?","body":"You said: &quot;Given a list of persons [Pi, Pj, Pm, ..., Pn], I want to find out all the groups present here.&quot; Where is &quot;here?&quot; Do you mean that, given a list of persons, you want to get a list of all the groups those persons represent?"},{"owner":{"account_id":22848,"reputation":131588,"user_id":56778,"accept_rate":93,"display_name":"Jim Mischel"},"score":0,"creation_date":1675442774,"post_id":75337081,"comment_id":132936914,"body_markdown":"Do all of the people in a group have to be present in order for the group to be considered present? Or is a group &quot;present&quot; if any one or more of the people from the group is present?","body":"Do all of the people in a group have to be present in order for the group to be considered present? Or is a group &quot;present&quot; if any one or more of the people from the group is present?"},{"owner":{"account_id":16666623,"reputation":21,"user_id":12045095,"display_name":"prasuna_16"},"score":0,"creation_date":1675443417,"post_id":75337081,"comment_id":132937123,"body_markdown":"Re `I think your #3 should be &quot;A utility function that returns a list of persons in a group.&quot;` - oops, sorry, thanks for pointing it out.","body":"Re <code>I think your #3 should be &quot;A utility function that returns a list of persons in a group.&quot;</code> - oops, sorry, thanks for pointing it out."},{"owner":{"account_id":16666623,"reputation":21,"user_id":12045095,"display_name":"prasuna_16"},"score":0,"creation_date":1675443633,"post_id":75337081,"comment_id":132937199,"body_markdown":"I&#39;ve updated the question to make it more clear.\nRe `Do you mean that, given a list of persons, you want to get a list of all the groups those persons represent?` - No, I want the groups where all the persons belonging to that group should be present in the input list of persons given.\nI&#39;ve made changes in the actual question too. Hope that clarifies it.","body":"I&#39;ve updated the question to make it more clear. Re <code>Do you mean that, given a list of persons, you want to get a list of all the groups those persons represent?</code> - No, I want the groups where all the persons belonging to that group should be present in the input list of persons given. I&#39;ve made changes in the actual question too. Hope that clarifies it."},{"owner":{"account_id":16666623,"reputation":21,"user_id":12045095,"display_name":"prasuna_16"},"score":0,"creation_date":1675443735,"post_id":75337081,"comment_id":132937242,"body_markdown":"Re `Do all of the people in a group have to be present in order for the group to be considered present?` - The order does not matter, if *all* the people are present in the group, we consider it present.","body":"Re <code>Do all of the people in a group have to be present in order for the group to be considered present?</code> - The order does not matter, if <i>all</i> the people are present in the group, we consider it present."}],"answers":[{"tags":[],"owner":{"account_id":286249,"reputation":43941,"user_id":585411,"accept_rate":60,"display_name":"btilly"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675444274,"creation_date":1675444274,"answer_id":75338979,"question_id":75337081,"body_markdown":"Your current code has poor performance because you are using `.containsAll` repeatedly.  This has to look through the entire list each time, to find what is missing.\r\n\r\nYou can improve performance by creating a [HashMap][1] mapping groups to the count of members.  Create another saying by group, how many times you found a person in that group.  Walk through the people, look at the groups that they are in, and populate both.  Compare the two. Any group the numbers match, then you saw all the members and the group is completely contained in your collection of people.\r\n\r\nThis algorithm should be linear in the number of times a person in your collection is a member of some group.  Which is required just to find which groups might be included.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html","title":"Efficient way to the find the groups present in a list","body":"<p>Your current code has poor performance because you are using <code>.containsAll</code> repeatedly.  This has to look through the entire list each time, to find what is missing.</p>\n<p>You can improve performance by creating a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\" rel=\"nofollow noreferrer\">HashMap</a> mapping groups to the count of members.  Create another saying by group, how many times you found a person in that group.  Walk through the people, look at the groups that they are in, and populate both.  Compare the two. Any group the numbers match, then you saw all the members and the group is completely contained in your collection of people.</p>\n<p>This algorithm should be linear in the number of times a person in your collection is a member of some group.  Which is required just to find which groups might be included.</p>\n"}],"owner":{"account_id":16666623,"reputation":21,"user_id":12045095,"display_name":"prasuna_16"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1675444274,"creation_date":1675434404,"question_id":75337081,"body_markdown":"There are a few people in a class e.g. [P1, P2, P3, P4, P5, P6]. And there are some friends groups e.g. [G1, G2, G3, G4, G5, G6].\r\n\r\nGroup G1 = [P1, P2, P3, P4], this says the persons P1, P2, P3, P4 are friends with each other.&lt;br&gt;\r\nGroup G2 = [P1, P3, P4] this says P1, P3, and P4 are friends with each other.\r\n\r\nThis information is given to me as:\r\n1. List of persons belonging to a class.\r\n2. An utility function that returns the list of groups a person belongs to.&lt;br&gt;\r\nE.g. getGroups(Person P1) returns [G1, G3, G2,..]\r\n3. An utility function that returns the list of persons in a group.&lt;br&gt;\r\nE.g. getPersons(Group G1) returns [P2, P1, P3,..]&lt;br&gt;\r\nBut I cannot directly access all the groups present, and I don&#39;t even know how many groups are present.\r\n\r\nWhat I want:\r\nGiven a list of persons [Pi, Pj, Pm, ..., Pn], I want to find out the groups formed by any subset of persons in the list.&lt;br&gt;\r\nNeither the order (of elements) in input nor in the lists returned by utility functions matters.\r\n\r\nEg.&lt;br&gt;\r\n&lt;b&gt;Information 1&lt;/b&gt; (I cannot iterate over all the persons, but if I have the person&#39;s name I can access its data):&lt;br&gt;`P1 = G1, G2; P2 = G1, G3; P3 = G1; P4 = G1, G2, G3; P5 = G3`&lt;br&gt;\r\n&lt;b&gt;Information 2&lt;/b&gt; (I cannot iterate over these groups, but if I have group name I can access its data):&lt;br&gt;`G1 = [P1, P2, P3, P4]; G2 = [P1, P3, P4]; G3 = [P2, P4, P5]`\r\n\r\n&lt;b&gt;Query:&lt;/b&gt; `[P1, P3, P2, P4]`&lt;br&gt;\r\n&lt;b&gt;Output:&lt;/b&gt; `[G1, G2]` (any order)&lt;br&gt;\r\n&lt;b&gt;Explanation:&lt;/b&gt;&lt;br&gt;\r\nP1, P2, P3, P4 belongs to group G1.&lt;br&gt;\r\nP1, P3, P4 belongs to group G2.&lt;br&gt;\r\n&lt;i&gt;Group G3 is not outputted because P5 is not in the input query list.&lt;/i&gt;\r\n\r\n\r\n\r\nObvious way to solve this is to iterate over each person and each group.\r\n```\r\npersonsTracked = []\r\nresult = []\r\nfor (Person person : persons) {\r\n  personsTracked.add(person) // Using personsTracked to avoid duplicate groups addition to result\r\n  groupsPersonBelongsTo = person.getGroups()\r\n  for (Group group : groupsPersonBelongsTo) {\r\n    if (personsTracked.containsAll(group.getPersons())):\r\n      result.add(group)\r\n  }\r\n}\r\n```\r\n\r\nBut is there a way to optimise this? Any ideas are appreciated.\r\n\r\nThank you!","title":"Efficient way to the find the groups present in a list","body":"<p>There are a few people in a class e.g. [P1, P2, P3, P4, P5, P6]. And there are some friends groups e.g. [G1, G2, G3, G4, G5, G6].</p>\n<p>Group G1 = [P1, P2, P3, P4], this says the persons P1, P2, P3, P4 are friends with each other.<br>\nGroup G2 = [P1, P3, P4] this says P1, P3, and P4 are friends with each other.</p>\n<p>This information is given to me as:</p>\n<ol>\n<li>List of persons belonging to a class.</li>\n<li>An utility function that returns the list of groups a person belongs to.<br>\nE.g. getGroups(Person P1) returns [G1, G3, G2,..]</li>\n<li>An utility function that returns the list of persons in a group.<br>\nE.g. getPersons(Group G1) returns [P2, P1, P3,..]<br>\nBut I cannot directly access all the groups present, and I don't even know how many groups are present.</li>\n</ol>\n<p>What I want:\nGiven a list of persons [Pi, Pj, Pm, ..., Pn], I want to find out the groups formed by any subset of persons in the list.<br>\nNeither the order (of elements) in input nor in the lists returned by utility functions matters.</p>\n<p>Eg.<br>\n<b>Information 1</b> (I cannot iterate over all the persons, but if I have the person's name I can access its data):<br><code>P1 = G1, G2; P2 = G1, G3; P3 = G1; P4 = G1, G2, G3; P5 = G3</code><br>\n<b>Information 2</b> (I cannot iterate over these groups, but if I have group name I can access its data):<br><code>G1 = [P1, P2, P3, P4]; G2 = [P1, P3, P4]; G3 = [P2, P4, P5]</code></p>\n<p><b>Query:</b> <code>[P1, P3, P2, P4]</code><br>\n<b>Output:</b> <code>[G1, G2]</code> (any order)<br>\n<b>Explanation:</b><br>\nP1, P2, P3, P4 belongs to group G1.<br>\nP1, P3, P4 belongs to group G2.<br>\n<i>Group G3 is not outputted because P5 is not in the input query list.</i></p>\n<p>Obvious way to solve this is to iterate over each person and each group.</p>\n<pre><code>personsTracked = []\nresult = []\nfor (Person person : persons) {\n  personsTracked.add(person) // Using personsTracked to avoid duplicate groups addition to result\n  groupsPersonBelongsTo = person.getGroups()\n  for (Group group : groupsPersonBelongsTo) {\n    if (personsTracked.containsAll(group.getPersons())):\n      result.add(group)\n  }\n}\n</code></pre>\n<p>But is there a way to optimise this? Any ideas are appreciated.</p>\n<p>Thank you!</p>\n"},{"tags":["java","java-8","java-stream","option-type"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":4,"creation_date":1545892901,"post_id":53938100,"comment_id":94720843,"body_markdown":"Why might the list be null? The preferred return for list-valued methods with no reply is `emptyList()`.","body":"Why might the list be null? The preferred return for list-valued methods with no reply is <code>emptyList()</code>."}],"answers":[{"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1545867269,"creation_date":1545865915,"answer_id":53938117,"question_id":53938100,"body_markdown":"&gt; if list not null or not empty, then it needs to be filtered.\r\n\r\n\r\nNo need for Optional here, as it&#39;s not intended to replace simple `if` checks.\r\n\r\n\r\n    ResponseEntry entry = null;\r\n    List&lt;ResponseEntry&gt; responseEntries = serviceResponse.getEntryList();\r\n    if(responseEntries != null &amp;&amp; !responseEntries.isEmpty()){\r\n        entry = responseEntries.stream()\r\n                    .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue()))\r\n                    .findFirst()\r\n                    .orElse(null);\r\n    }\r\n\r\n - reads &quot;if `responseEntries` is not null and `responseEntries` is not empty then apply the filter operation and find the first item or else null&quot;. Very readable.\r\n\r\nOn the other hand, the optional approach:\r\n\r\n    ResponseEntry entry = Optional.ofNullable(serviceResponse.getEntryList())\r\n                                  .orElseGet(() -&gt; Collections.emptyList())\r\n                                  .stream()\r\n                                  .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue()))\r\n                                  .findFirst();\r\n\r\n    if(!entry.isPresent()){ ... } // or entry.ifPresent(e -&gt; ...) depending on the logic you&#39;re performing inside the block\r\n\r\n - unnecessarily creates objects that could be avoided and not really the intention of optional to be used as a substitute for simple &quot;if&quot; checks.","title":"How to handle nullable lists using java 8?","body":"<blockquote>\n  <p>if list not null or not empty, then it needs to be filtered.</p>\n</blockquote>\n\n<p>No need for Optional here, as it's not intended to replace simple <code>if</code> checks.</p>\n\n<pre><code>ResponseEntry entry = null;\nList&lt;ResponseEntry&gt; responseEntries = serviceResponse.getEntryList();\nif(responseEntries != null &amp;&amp; !responseEntries.isEmpty()){\n    entry = responseEntries.stream()\n                .filter(e -&gt; \"expectedValue\".equals(e.getValue()))\n                .findFirst()\n                .orElse(null);\n}\n</code></pre>\n\n<ul>\n<li>reads \"if <code>responseEntries</code> is not null and <code>responseEntries</code> is not empty then apply the filter operation and find the first item or else null\". Very readable.</li>\n</ul>\n\n<p>On the other hand, the optional approach:</p>\n\n<pre><code>ResponseEntry entry = Optional.ofNullable(serviceResponse.getEntryList())\n                              .orElseGet(() -&gt; Collections.emptyList())\n                              .stream()\n                              .filter(e -&gt; \"expectedValue\".equals(e.getValue()))\n                              .findFirst();\n\nif(!entry.isPresent()){ ... } // or entry.ifPresent(e -&gt; ...) depending on the logic you're performing inside the block\n</code></pre>\n\n<ul>\n<li>unnecessarily creates objects that could be avoided and not really the intention of optional to be used as a substitute for simple \"if\" checks.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1545868549,"creation_date":1545868549,"answer_id":53938341,"question_id":53938100,"body_markdown":"In Java 9, you could use the new method [`Objects.requireNonNullElse(T,T)`](https://docs.oracle.com/javase/10/docs/api/java/util/Objects.html#requireNonNullElse(T,T)):\r\n\r\n    Objects.requireNonNullElse(serviceResponse.getEntryList(),\r\n                               Collections.emptyList())\r\n\r\nApache Commons Collections actually has a method [`ListUtils.emptyIfNull(List&lt;T&gt;)`](https://commons.apache.org/proper/commons-collections/javadocs/api-4.2/org/apache/commons/collections4/ListUtils.html#emptyIfNull-java.util.List-) which returns an empty list if the argument list is `null`. That&#39;s even better, but `Objects.requireNonNullElse` is the closest thing to it in Java SE.\r\n\r\nIf you&#39;re restricted to just Java 8, then I agree with Aomine&#39;s answer that trying to do something like go through `Optional` is worse than an `if` statement.","title":"How to handle nullable lists using java 8?","body":"<p>In Java 9, you could use the new method <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/Objects.html#requireNonNullElse(T,T)\" rel=\"noreferrer\"><code>Objects.requireNonNullElse(T,T)</code></a>:</p>\n\n<pre><code>Objects.requireNonNullElse(serviceResponse.getEntryList(),\n                           Collections.emptyList())\n</code></pre>\n\n<p>Apache Commons Collections actually has a method <a href=\"https://commons.apache.org/proper/commons-collections/javadocs/api-4.2/org/apache/commons/collections4/ListUtils.html#emptyIfNull-java.util.List-\" rel=\"noreferrer\"><code>ListUtils.emptyIfNull(List&lt;T&gt;)</code></a> which returns an empty list if the argument list is <code>null</code>. That's even better, but <code>Objects.requireNonNullElse</code> is the closest thing to it in Java SE.</p>\n\n<p>If you're restricted to just Java 8, then I agree with Aomine's answer that trying to do something like go through <code>Optional</code> is worse than an <code>if</code> statement.</p>\n"},{"tags":[],"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1545872966,"creation_date":1545871205,"answer_id":53938598,"question_id":53938100,"body_markdown":"## [`Stream.ofNullable`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html#ofNullable(T)) (Java-9)\r\n\r\n&gt; Returns a sequential Stream containing a ***single element***, *if non-null*,\r\n&gt; *otherwise* returns an ***empty Stream***.\r\n\r\n### Current Code\r\n\r\n    ResponseEntry entry = serviceResponse.getEntryList() // List&lt;ResponseEntry&gt;\r\n            .stream() // NPE here   // Stream&lt;ResponseEntry&gt;\r\n            .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue())) // filter\r\n            .findFirst() // Optional&lt;ResponseEntry&gt;\r\n            .orElse(null); // or else null\r\n\r\n###Updated Code\r\n\r\n\r\n    ResponseEntry entry = Stream.ofNullable(serviceResponse.getEntryList()) // Stream&lt;List&lt;ResponseEntry&gt;&gt;\r\n            .flatMap(List::stream) // Stream&lt;ResponseEntry&gt;\r\n            .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue())) // filter here\r\n            .findFirst() // Optional&lt;ResponseEntry&gt;\r\n            .orElse(null); // or else null\r\n\r\n----------\r\n\r\n## [`Optional.stream`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html#stream()) (Java-9)\r\n\r\n&gt; returns a sequential *Stream* containing ***only that value***, *otherwise*\r\n&gt; returns an ***empty Stream***.\r\n\r\n    ResponseEntry entry = Optional.ofNullable(serviceResponse.getEntryList())\r\n            .stream() // Stream&lt;List&lt;ResponseEntry&gt;&gt;\r\n            .flatMap(List::stream) // Stream&lt;ResponseEntry&gt;\r\n            .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue())) // filter here\r\n            .findFirst() // Optional&lt;ResponseEntry&gt;\r\n            .orElse(null); // or else null\r\n\r\n\r\n----------\r\n\r\n\r\n## [`Optional.isEmpty`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html#isEmpty())(Java-11)\r\n\r\n&gt; If a value is *not present*, returns ***true***, *otherwise* ***false***\r\n\r\n    Optional&lt;ResponseEntry&gt; entry = Optional.ofNullable(serviceResponse.getEntryList()) // Optional&lt;List&lt;ResponseEntry&gt;&gt;\r\n            .orElseGet(Collections::emptyList) // or else empty List\r\n            .stream() // Stream&lt;ResponseEntry&gt;\r\n            .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue())) // filter\r\n            .findFirst(); // Optional&lt;ResponseEntry&gt;\r\n\r\n    if (entry.isEmpty()) { // !entry.isPresent in java-8\r\n       // Do your work here\r\n    }","title":"How to handle nullable lists using java 8?","body":"<h2><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html#ofNullable(T)\" rel=\"noreferrer\"><code>Stream.ofNullable</code></a> (Java-9)</h2>\n\n<blockquote>\n  <p>Returns a sequential Stream containing a <strong><em>single element</em></strong>, <em>if non-null</em>,\n  <em>otherwise</em> returns an <strong><em>empty Stream</em></strong>.</p>\n</blockquote>\n\n<h3>Current Code</h3>\n\n<pre><code>ResponseEntry entry = serviceResponse.getEntryList() // List&lt;ResponseEntry&gt;\n        .stream() // NPE here   // Stream&lt;ResponseEntry&gt;\n        .filter(e -&gt; \"expectedValue\".equals(e.getValue())) // filter\n        .findFirst() // Optional&lt;ResponseEntry&gt;\n        .orElse(null); // or else null\n</code></pre>\n\n<h3>Updated Code</h3>\n\n<pre><code>ResponseEntry entry = Stream.ofNullable(serviceResponse.getEntryList()) // Stream&lt;List&lt;ResponseEntry&gt;&gt;\n        .flatMap(List::stream) // Stream&lt;ResponseEntry&gt;\n        .filter(e -&gt; \"expectedValue\".equals(e.getValue())) // filter here\n        .findFirst() // Optional&lt;ResponseEntry&gt;\n        .orElse(null); // or else null\n</code></pre>\n\n<hr>\n\n<h2><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html#stream()\" rel=\"noreferrer\"><code>Optional.stream</code></a> (Java-9)</h2>\n\n<blockquote>\n  <p>returns a sequential <em>Stream</em> containing <strong><em>only that value</em></strong>, <em>otherwise</em>\n  returns an <strong><em>empty Stream</em></strong>.</p>\n</blockquote>\n\n<pre><code>ResponseEntry entry = Optional.ofNullable(serviceResponse.getEntryList())\n        .stream() // Stream&lt;List&lt;ResponseEntry&gt;&gt;\n        .flatMap(List::stream) // Stream&lt;ResponseEntry&gt;\n        .filter(e -&gt; \"expectedValue\".equals(e.getValue())) // filter here\n        .findFirst() // Optional&lt;ResponseEntry&gt;\n        .orElse(null); // or else null\n</code></pre>\n\n<hr>\n\n<h2><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html#isEmpty()\" rel=\"noreferrer\"><code>Optional.isEmpty</code></a>(Java-11)</h2>\n\n<blockquote>\n  <p>If a value is <em>not present</em>, returns <strong><em>true</em></strong>, <em>otherwise</em> <strong><em>false</em></strong></p>\n</blockquote>\n\n<pre><code>Optional&lt;ResponseEntry&gt; entry = Optional.ofNullable(serviceResponse.getEntryList()) // Optional&lt;List&lt;ResponseEntry&gt;&gt;\n        .orElseGet(Collections::emptyList) // or else empty List\n        .stream() // Stream&lt;ResponseEntry&gt;\n        .filter(e -&gt; \"expectedValue\".equals(e.getValue())) // filter\n        .findFirst(); // Optional&lt;ResponseEntry&gt;\n\nif (entry.isEmpty()) { // !entry.isPresent in java-8\n   // Do your work here\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1545875549,"creation_date":1545875549,"answer_id":53938922,"question_id":53938100,"body_markdown":"You could simply use the ternary operator:\r\n\r\n    ServiceResponse serviceResponse = service.getServiceResponse();\r\n    List&lt;ResponseEntry&gt; list = serviceResponse.getEntryList();\r\n\r\n    ResponseEntry entry = (list == null ? Collections.emptyList() : list)\r\n        .stream()\r\n        .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue()))\r\n        .findFirst()\r\n        .orElse(null);\r\n\r\n    if (entry == null) { ... }\r\n\r\nSometimes, traditional is better IMO.\r\n","title":"How to handle nullable lists using java 8?","body":"<p>You could simply use the ternary operator:</p>\n\n<pre><code>ServiceResponse serviceResponse = service.getServiceResponse();\nList&lt;ResponseEntry&gt; list = serviceResponse.getEntryList();\n\nResponseEntry entry = (list == null ? Collections.emptyList() : list)\n    .stream()\n    .filter(e -&gt; \"expectedValue\".equals(e.getValue()))\n    .findFirst()\n    .orElse(null);\n\nif (entry == null) { ... }\n</code></pre>\n\n<p>Sometimes, traditional is better IMO.</p>\n"},{"tags":[],"owner":{"account_id":1042959,"reputation":638633,"user_id":1048572,"accept_rate":77,"display_name":"Bergi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1545917832,"creation_date":1545917832,"answer_id":53945999,"question_id":53938100,"body_markdown":"Another option would be to use the `Optional` [monad](https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#flatMap-java.util.function.Function-):\r\n\r\n    Optional&lt;ResponseEntry&gt; entry = Optional.ofNullable(serviceResponse.getEntryList()).flatMap(list -&gt;\r\n        list.stream().filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue())).findFirst()\r\n    );\r\n    \r\n    if (!entry.isPresent()) {\r\n        …\r\n    }\r\n\r\nYou might even use [`orElseGet`](https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#orElseGet-java.util.function.Supplier-) instead of that `if` statement if your objective is to build (and return) a value, instead of executing a side effect.","title":"How to handle nullable lists using java 8?","body":"<p>Another option would be to use the <code>Optional</code> <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#flatMap-java.util.function.Function-\" rel=\"nofollow noreferrer\">monad</a>:</p>\n\n<pre><code>Optional&lt;ResponseEntry&gt; entry = Optional.ofNullable(serviceResponse.getEntryList()).flatMap(list -&gt;\n    list.stream().filter(e -&gt; \"expectedValue\".equals(e.getValue())).findFirst()\n);\n\nif (!entry.isPresent()) {\n    …\n}\n</code></pre>\n\n<p>You might even use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#orElseGet-java.util.function.Supplier-\" rel=\"nofollow noreferrer\"><code>orElseGet</code></a> instead of that <code>if</code> statement if your objective is to build (and return) a value, instead of executing a side effect.</p>\n"},{"tags":[],"owner":{"account_id":25290010,"reputation":37,"user_id":19116298,"display_name":"Sachi97"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675444154,"creation_date":1675444154,"answer_id":75338955,"question_id":53938100,"body_markdown":"I am new to Optional and I may be wrong. Logic can be written like below if you want to have logic including only optional.\r\n\r\n    ServiceResponse serviceResponse = service.getServiceResponse();\r\n    ResponseEntry entry = \r\n\r\n    Optional.of(CollectionUtils.isNotEmpty(serviceResponse.getEntryList()))\r\n            .filter(BooleanUtils::isTrue)\r\n            .stream()\r\n            .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue()))\r\n            .findFirst()\r\n            .orElse(null);","title":"How to handle nullable lists using java 8?","body":"<p>I am new to Optional and I may be wrong. Logic can be written like below if you want to have logic including only optional.</p>\n<pre><code>ServiceResponse serviceResponse = service.getServiceResponse();\nResponseEntry entry = \n\nOptional.of(CollectionUtils.isNotEmpty(serviceResponse.getEntryList()))\n        .filter(BooleanUtils::isTrue)\n        .stream()\n        .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue()))\n        .findFirst()\n        .orElse(null);\n</code></pre>\n"}],"owner":{"account_id":11937666,"reputation":304,"user_id":8735547,"display_name":"Kyle Bak"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21711,"favorite_count":0,"down_vote_count":1,"up_vote_count":17,"accepted_answer_id":53938117,"answer_count":6,"score":16,"last_activity_date":1675444154,"creation_date":1545865777,"question_id":53938100,"body_markdown":"I&#39;m making a service call and trying to handle response. \r\nResponse might have a list of something. That list might be null.\r\n\r\nMoreover, if list not null or not empty, then\r\nit needs to be filtered. \r\nIn the code &quot;entry&quot; reference might be null if filtering gives nothing or response list is empty or null.\r\n\r\nCurrently i&#39;m getting NPE when i try to use stream() on a null response list. \r\nHow can i handle this situation?\r\n\r\n    @Getter\r\n    public class ServiceResponse {  \r\n        List&lt;ResponseEntry&gt; entryList;\r\n    }\r\n\r\n    @Getter\r\n    public class ResponseEntry {\r\n        String value;\r\n    }\r\n\r\n\r\n    ServiceResponse serviceResponse = service.getServiceResponse();\r\n    ResponseEntry entry = serviceResponse.getEntryList()\r\n        .stream()\r\n        .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue()))\r\n        .findFirst()\r\n        .orElse(null);\r\n\r\n    if (entry == null) { ... }\r\n\r\n&lt;/code&gt;&lt;/pre&gt;","title":"How to handle nullable lists using java 8?","body":"<p>I'm making a service call and trying to handle response. \nResponse might have a list of something. That list might be null.</p>\n\n<p>Moreover, if list not null or not empty, then\nit needs to be filtered. \nIn the code \"entry\" reference might be null if filtering gives nothing or response list is empty or null.</p>\n\n<p>Currently i'm getting NPE when i try to use stream() on a null response list. \nHow can i handle this situation?</p>\n\n<pre><code>@Getter\npublic class ServiceResponse {  \n    List&lt;ResponseEntry&gt; entryList;\n}\n\n@Getter\npublic class ResponseEntry {\n    String value;\n}\n\n\nServiceResponse serviceResponse = service.getServiceResponse();\nResponseEntry entry = serviceResponse.getEntryList()\n    .stream()\n    .filter(e -&gt; \"expectedValue\".equals(e.getValue()))\n    .findFirst()\n    .orElse(null);\n\nif (entry == null) { ... }\n</code></pre>\n\n<p></p>\n"},{"tags":["java","algorithm","math","matrix"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1675159956,"post_id":75295518,"comment_id":132863884,"body_markdown":"Please don&#39;t link to external code. Include all relevant code in the question itself. If you decide to take down the gist in future, this question will become useless for future readers.","body":"Please don&#39;t link to external code. Include all relevant code in the question itself. If you decide to take down the gist in future, this question will become useless for future readers."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1675253325,"post_id":75295518,"comment_id":132887601,"body_markdown":"Happy to remove it when the question contains all the relevant code. If Stack Overflow complains that the ratio of text to code is too low, then you&#39;ll either need to add more explanation, or figure out how you can distill your problem to use less code. Once again, a gist is a poor solution for the reason I already described.","body":"Happy to remove it when the question contains all the relevant code. If Stack Overflow complains that the ratio of text to code is too low, then you&#39;ll either need to add more explanation, or figure out how you can distill your problem to use less code. Once again, a gist is a poor solution for the reason I already described."},{"owner":{"account_id":14035647,"reputation":851,"user_id":10138416,"display_name":"linker"},"score":0,"creation_date":1675267720,"post_id":75295518,"comment_id":132892842,"body_markdown":"@Michael Tbh there’s no other explanation I can possibly give other than how I have simply explained the problem. Since you have decided to stay unhappy until your wish is granted, I can only promise that my gist would not be taken down anytime in the future just the same way concerning some of your posts on Stack Overflow with external links you have no problem in believing associated websites or services where they are hosted won’t be taken down in the future. I only want you to be happy, that’s why I typed this much. I just really hope you can be happy though… after all I have typed","body":"@Michael Tbh there’s no other explanation I can possibly give other than how I have simply explained the problem. Since you have decided to stay unhappy until your wish is granted, I can only promise that my gist would not be taken down anytime in the future just the same way concerning some of your posts on Stack Overflow with external links you have no problem in believing associated websites or services where they are hosted won’t be taken down in the future. I only want you to be happy, that’s why I typed this much. I just really hope you can be happy though… after all I have typed"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1675268066,"post_id":75295518,"comment_id":132892982,"body_markdown":"It&#39;s not about me being unhappy, it&#39;s about no one person being above the rules. The rules exist to make things better for everyone. &quot;*just the same way concerning some of your posts on Stack Overflow with external links*&quot;. No, this is entirely different. Your question is *entirely predicated* on the existence of that link. My answers may be supplemented, but even if the links go down, the answers should stand on their own. If some don&#39;t stand on their own, then feel free to downvote them and comment on how they can be improved.","body":"It&#39;s not about me being unhappy, it&#39;s about no one person being above the rules. The rules exist to make things better for everyone. &quot;<i>just the same way concerning some of your posts on Stack Overflow with external links</i>&quot;. No, this is entirely different. Your question is <i>entirely predicated</i> on the existence of that link. My answers may be supplemented, but even if the links go down, the answers should stand on their own. If some don&#39;t stand on their own, then feel free to downvote them and comment on how they can be improved."},{"owner":{"account_id":20937,"reputation":167577,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":0,"creation_date":1675366125,"post_id":75295518,"comment_id":132919233,"body_markdown":"OK, the code is included in the question now. Perhaps someone is nice enough to go through it and spot the bug, but I think you&#39;ll have more luck by either commenting under the Gist to see if the original author knows what&#39;s going wrong, or by manually calculating the matrix operation and then stepping through the code to see if you spot the error yourself. Anyway, best of luck!","body":"OK, the code is included in the question now. Perhaps someone is nice enough to go through it and spot the bug, but I think you&#39;ll have more luck by either commenting under the Gist to see if the original author knows what&#39;s going wrong, or by manually calculating the matrix operation and then stepping through the code to see if you spot the error yourself. Anyway, best of luck!"},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1675370342,"post_id":75295518,"comment_id":132920346,"body_markdown":"If you print the matrix after each pass, after pass two it has some alarming numbers in it (E16, E23). If this gives correct results for some matrices but not others, I would suspect loss of precision due to numerical instability of the chosen method.","body":"If you print the matrix after each pass, after pass two it has some alarming numbers in it (E16, E23). If this gives correct results for some matrices but not others, I would suspect loss of precision due to numerical instability of the chosen method."},{"owner":{"account_id":14035647,"reputation":851,"user_id":10138416,"display_name":"linker"},"score":0,"creation_date":1675432781,"post_id":75295518,"comment_id":132933419,"body_markdown":"@teapot418 I switched from working with floats initially to double because after each pass I noticed some funny numbers were showing up occasionally. Please what do you recommend in order to get better precision: BigDecimal?","body":"@teapot418 I switched from working with floats initially to double because after each pass I noticed some funny numbers were showing up occasionally. Please what do you recommend in order to get better precision: BigDecimal?"},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":1,"creation_date":1675433153,"post_id":75295518,"comment_id":132933567,"body_markdown":"I think LU decomposition is usually preferred as being less explody. I think you can get rref from LU, but I won&#39;t point you to a specific formula, this topic is complex and my memory of it fuzzy. Or you can cheat and [use fractions](https://rosettacode.org/wiki/Reduced_row_echelon_form#Java).","body":"I think LU decomposition is usually preferred as being less explody. I think you can get rref from LU, but I won&#39;t point you to a specific formula, this topic is complex and my memory of it fuzzy. Or you can cheat and <a href=\"https://rosettacode.org/wiki/Reduced_row_echelon_form#Java\" rel=\"nofollow noreferrer\">use fractions</a>."},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":1,"creation_date":1675433991,"post_id":75295518,"comment_id":132933873,"body_markdown":"The above probably rather with BigFraction, Fraction is int-based and can overflow.","body":"The above probably rather with BigFraction, Fraction is int-based and can overflow."},{"owner":{"account_id":7359583,"reputation":11343,"user_id":5603247,"display_name":"Hans Olsson"},"score":0,"creation_date":1675434653,"post_id":75295518,"comment_id":132934094,"body_markdown":"As I understand RREF is an ill-posed problem so if you start from the double-matrix as input you might work a lot to give better results, while ignoring that the input matrix may have been rounded to double precision and that rounding may cause differences as big as the one we see.","body":"As I understand RREF is an ill-posed problem so if you start from the double-matrix as input you might work a lot to give better results, while ignoring that the input matrix may have been rounded to double precision and that rounding may cause differences as big as the one we see."},{"owner":{"account_id":14035647,"reputation":851,"user_id":10138416,"display_name":"linker"},"score":0,"creation_date":1675434857,"post_id":75295518,"comment_id":132934173,"body_markdown":"@HansOlsson definitely","body":"@HansOlsson definitely"}],"answers":[{"tags":[],"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675434957,"creation_date":1675434957,"answer_id":75337196,"question_id":75295518,"body_markdown":"You may actually have a &quot;do not compare floats for equality&quot; problem in there.\r\nIf I do:\r\n\r\n    public static boolean isZero(double foo) {\r\n        // demonstration only, replace with less silly implementation\r\n        return Math.abs(foo)&lt;0.0000001;\r\n    }\r\n\r\n      ...\r\n      while(isZero(matrix[cursor][columnIndex])){\r\n      //instead of\r\n      while(matrix[cursor][columnIndex] == 0){\r\n\r\nI get\r\n\r\n    [1.0, 0.0, 0.0, 1.3816531235294117E7, 0.0, 0.0]\r\n    [0.0, 1.0, 0.0, -0.6363636363636362, 0.0, 0.0]\r\n    [0.0, 0.0, 1.0, -1.3999999999999997, 0.0, 0.0]\r\n    [0.0, 0.0, 0.0, 0.0, 1.0, 0.0]\r\n    [0.0, 0.0, 0.0, 0.0, 0.0, 1.0]\r\n\r\nwhich is the result you wanted I believe.\r\n\r\nMore discussion e.g. in https://stackoverflow.com/questions/4915462/how-should-i-do-floating-point-comparison","title":"Reduced Row Echelon Implementation in Java","body":"<p>You may actually have a &quot;do not compare floats for equality&quot; problem in there.\nIf I do:</p>\n<pre><code>public static boolean isZero(double foo) {\n    // demonstration only, replace with less silly implementation\n    return Math.abs(foo)&lt;0.0000001;\n}\n\n  ...\n  while(isZero(matrix[cursor][columnIndex])){\n  //instead of\n  while(matrix[cursor][columnIndex] == 0){\n</code></pre>\n<p>I get</p>\n<pre><code>[1.0, 0.0, 0.0, 1.3816531235294117E7, 0.0, 0.0]\n[0.0, 1.0, 0.0, -0.6363636363636362, 0.0, 0.0]\n[0.0, 0.0, 1.0, -1.3999999999999997, 0.0, 0.0]\n[0.0, 0.0, 0.0, 0.0, 1.0, 0.0]\n[0.0, 0.0, 0.0, 0.0, 0.0, 1.0]\n</code></pre>\n<p>which is the result you wanted I believe.</p>\n<p>More discussion e.g. in <a href=\"https://stackoverflow.com/questions/4915462/how-should-i-do-floating-point-comparison\">How should I do floating point comparison?</a></p>\n"}],"owner":{"account_id":14035647,"reputation":851,"user_id":10138416,"display_name":"linker"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":431,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":75337196,"answer_count":1,"score":1,"last_activity_date":1675443873,"creation_date":1675159628,"question_id":75295518,"body_markdown":"Via this code:\r\n\r\n```java\r\nimport java.util.Arrays;\r\n\r\npublic class RREFS {\r\n\r\n    public static void main(String[] args){\r\n\r\n        double[][] rref;\r\n        double[][] matrix;\r\n        matrix=new double[][]{\r\n                new double[]{  8.385956100787163E-8,   0.9103664774626016, 0.41380294430118253,                 0.0, 0.0, 0.0  },\r\n                new double[]{ 2.0779736498353668E-8,  0.22558161873553792, -0.4962795612181877,  0.8383433249008051, 0.0, 0.0  },\r\n                new double[]{ 1.0081125874457642E-7, -0.34690893617920376,  0.7631996595942279,  0.5451426139958772, 0.0, 0.0  },\r\n                new double[]{                   0.0,                  0.0,                 0.0,                 0.0, 1.0, 0.0  },\r\n                new double[]{                   0.0,                  0.0,                 0.0,                 0.0, 0.0, 1.0  }\r\n        };\r\n        rref=RREFS.rref(matrix);\r\n        print(rref);\r\n\r\n//      this\r\n//      [ 8.385956100787163E-8,   0.9103664774626016, 0.41380294430118253,                 0.0, 0.0, 0.0]\r\n//      [2.0779736498353668E-8,  0.22558161873553792, -0.4962795612181877,  0.8383433249008051, 0.0, 0.0]\r\n//      [1.0081125874457642E-7, -0.34690893617920376,  0.7631996595942279,  0.5451426139958772, 0.0, 0.0]\r\n//      [                  0.0,                  0.0,                 0.0,                 0.0, 1.0, 0.0]\r\n//      [                  0.0,                  0.0,                 0.0,                 0.0, 0.0, 1.0]\r\n\r\n//       produces\r\n//       [1.0, 0.0, 0.0,                 0.0, 0.0, 0.0]\r\n//       [0.0, 1.0, 0.0,                 0.0, 0.0, 0.0]\r\n//       [0.0, 0.0, 1.0, -1.3999999999999997, 0.0, 0.0]\r\n//       [0.0, 0.0, 0.0,                 0.0, 1.0, 0.0]\r\n//       [0.0, 0.0, 0.0,                 0.0, 0.0, 1.0]\r\n\r\n//       insteada\r\n//       [1.0, 0.0, 0.0,  1.38165312352941182995E7, 0.0, 0.0]\r\n//       [0.0, 1.0, 0.0,        -0.636363636363636, 0.0, 0.0]\r\n//       [0.0, 0.0, 1.0,                      -1.4, 0.0, 0.0]\r\n//       [0.0, 0.0, 0.0,                         0, 1.0, 0.0]\r\n//       [0.0, 0.0, 0.0,                         0, 0.0, 1.0]\r\n​\r\n    }\r\n\r\n\r\n    /**\r\n     * Puts a matrix into reduced row echelon form\r\n     *\r\n     * @param matrix input matrix\r\n     *\r\n     * @return 2D result matrix\r\n     */\r\n    public static double[][] rref(double[][] matrix){\r\n        int columnIndex = 0;\r\n        int cursor;\r\n\r\n        // number of rows and columns in matrix\r\n        int getRowSize = matrix.length;\r\n        int getColumnSize = matrix[0].length;\r\n\r\n\r\n        loop:\r\n        for(int rowIndex = 0; rowIndex &lt; getRowSize; rowIndex++){\r\n            if(getColumnSize &lt;= columnIndex){\r\n                break loop;\r\n            }\r\n            cursor = rowIndex;\r\n            while(matrix[cursor][columnIndex] == 0){\r\n                cursor++;\r\n                if(getRowSize == cursor){\r\n                    cursor = rowIndex;\r\n                    columnIndex++;\r\n                    if(getColumnSize == columnIndex){\r\n                        break loop;\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            matrix = rowSwap(matrix, cursor, rowIndex);\r\n            if(matrix[rowIndex][columnIndex] != 0){\r\n                matrix = rowScale(matrix, rowIndex, (1/matrix[rowIndex][columnIndex]));\r\n            }\r\n\r\n            for(cursor = 0; cursor &lt; getRowSize; cursor++){\r\n                if(cursor != rowIndex){\r\n                    matrix = rowAddScale(matrix, rowIndex, cursor,((-1) * matrix[cursor][columnIndex]));\r\n                }\r\n            }columnIndex++;\r\n        }return matrix;\r\n    }\r\n\r\n    /**\r\n     * Swap positions of 2 rows\r\n     *\r\n     * @param matrix matrix before row additon\r\n     * @param rowIndex1 int index of row to swap\r\n     * @param rowIndex2 int index of row to swap\r\n     *\r\n     * @return matrix after row swap\r\n     */\r\n    private static double[][] rowSwap(double[][] matrix, int rowIndex1,\r\n                                      int rowIndex2){\r\n        // number of columns in matrix\r\n        int numColumns = matrix[0].length;\r\n\r\n        // holds number to be swapped\r\n        double hold;\r\n\r\n        for(int k = 0; k &lt; numColumns; k++){\r\n            hold = matrix[rowIndex2][k];\r\n            matrix[rowIndex2][k] = matrix[rowIndex1][k];\r\n            matrix[rowIndex1][k] = hold;\r\n        }\r\n\r\n        return matrix;\r\n    }\r\n\r\n    /**\r\n     * Adds 2 rows together row2 = row2 + row1\r\n     *\r\n     * @param matrix matrix before row additon\r\n     * @param rowIndex1 int index of row to be added\r\n     * @param rowIndex2 int index or row that row1 is added to\r\n     *\r\n     * @return matrix after row addition\r\n     */\r\n    private static double[][] rowAdd(double[][] matrix, int rowIndex1,\r\n                                     int rowIndex2){\r\n        // number of columns in matrix\r\n        int numColumns = matrix[0].length;\r\n\r\n        for(int k = 0; k &lt; numColumns; k++){\r\n            matrix[rowIndex2][k] += matrix[rowIndex1][k];\r\n        }\r\n\r\n        return matrix;\r\n    }\r\n\r\n    /**\r\n     * Multiplies a row by a scalar\r\n     *\r\n     * @param matrix matrix before row additon\r\n     * @param rowIndex int index of row to be scaled\r\n     * @param scalar double to scale row by\r\n     *\r\n     * @return matrix after row scaling\r\n     */\r\n    private static double[][] rowScale(double[][] matrix, int rowIndex,\r\n                                       double scalar){\r\n        // number of columns in matrix\r\n        int numColumns = matrix[0].length;\r\n\r\n        for(int k = 0; k &lt; numColumns; k++){\r\n            matrix[rowIndex][k] *= scalar;\r\n        }\r\n\r\n        return matrix;\r\n    }\r\n\r\n    /**\r\n     * Adds a row by the scalar of another row\r\n     * row2 = row2 + (row1 * scalar)\r\n     * @param matrix matrix before row additon\r\n     * @param rowIndex1 int index of row to be added\r\n     * @param rowIndex2 int index or row that row1 is added to\r\n     * @param scalar double to scale row by\r\n     *\r\n     * @return matrix after row addition\r\n     */\r\n    private static double[][] rowAddScale(double[][] matrix, int rowIndex1,\r\n                                          int rowIndex2, double scalar){\r\n        // number of columns in matrix\r\n        int numColumns = matrix[0].length;\r\n\r\n        for(int k = 0; k &lt; numColumns; k++){\r\n            matrix[rowIndex2][k] += (matrix[rowIndex1][k] * scalar);\r\n        }\r\n\r\n        return matrix;\r\n    }\r\n\r\n    public static void print(double[][] matrix) {\r\n        print(&quot;&quot;,matrix);\r\n    }\r\n    public static void print(String message, double[][] matrix) {\r\n        System.out.println(message);\r\n        for (int i = 0; i &lt; matrix.length; i++) {\r\n            System.out.println(Arrays.toString(matrix[i]));\r\n        }System.out.println();\r\n    }\r\n}\r\n```\r\n\r\nI am trying to build a custom rref calculator thus I have \r\n[edie-zhou&#39;s][2] [implementation][3] [asper][4].\r\n\r\nIt works with every simple matrix I have tested so far, However the result of \r\n\r\n     [ 8.385956100787163E-8,   0.9103664774626016, 0.41380294430118253,                 0.0, 0.0, 0.0]\r\n     [2.0779736498353668E-8,  0.22558161873553792, -0.4962795612181877,  0.8383433249008051, 0.0, 0.0]\r\n     [1.0081125874457642E-7, -0.34690893617920376,  0.7631996595942279,  0.5451426139958772, 0.0, 0.0]\r\n     [                  0.0,                  0.0,                 0.0,                 0.0, 1.0, 0.0]\r\n     [                  0.0,                  0.0,                 0.0,                 0.0, 0.0, 1.0]\r\n\r\nis this \r\n\r\n    [1.0, 0.0, 0.0,                 0.0, 0.0, 0.0]\r\n    [0.0, 1.0, 0.0,                 0.0, 0.0, 0.0]\r\n    [0.0, 0.0, 1.0, -1.3999999999999997, 0.0, 0.0]\r\n    [0.0, 0.0, 0.0,                 0.0, 1.0, 0.0]\r\n    [0.0, 0.0, 0.0,                 0.0, 0.0, 1.0]\r\n\r\ninstead of\r\n\r\n    [1.0, 0.0, 0.0,  1.38165312352941182995E7, 0.0, 0.0]\r\n    [0.0, 1.0, 0.0,        -0.636363636363636, 0.0, 0.0]\r\n    [0.0, 0.0, 1.0,                      -1.4, 0.0, 0.0]\r\n    [0.0, 0.0, 0.0,                         0, 1.0, 0.0]\r\n    [0.0, 0.0, 0.0,                         0, 0.0, 1.0]\r\n\r\naccording to this online [calculator][5] and some others I tested, please what seems to be the problem with the code.   \r\n\r\n\r\n  [1]: https://gist.github.com/54LiNKeR/ca76197806f4de9388bf165f25b25d73\r\n  [2]: https://github.com/edie-zhou\r\n  [3]: https://github.com/edie-zhou/Matrix-Calculator/blob/master/RREF.java\r\n  [4]: https://en.wikipedia.org/wiki/Row_echelon_form#Pseudocode_for_reduced_row_echelon_form\r\n  [5]: https://www.emathhelp.net/calculators/linear-algebra/reduced-row-echelon-form-rref-calculator/?i=%5B%5B8.385956100787163E-8%2C0.9103664774626016%2C0.41380294430118253%2C0%2C0%2C0%5D%2C%5B2.0779736498353668E-8%2C0.22558161873553792%2C-0.4962795612181877%2C0.8383433249008051%2C0%2C0%5D%2C%5B1.0081125874457642E-7%2C-0.34690893617920376%2C0.7631996595942279%2C0.5451426139958772%2C0%2C0%5D%2C%5B0%2C0%2C0%2C0%2C1%2C0%5D%2C%5B0%2C0%2C0%2C0%2C0%2C1%5D%5D&amp;reduced=on","title":"Reduced Row Echelon Implementation in Java","body":"<p>Via this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\n\npublic class RREFS {\n\n    public static void main(String[] args){\n\n        double[][] rref;\n        double[][] matrix;\n        matrix=new double[][]{\n                new double[]{  8.385956100787163E-8,   0.9103664774626016, 0.41380294430118253,                 0.0, 0.0, 0.0  },\n                new double[]{ 2.0779736498353668E-8,  0.22558161873553792, -0.4962795612181877,  0.8383433249008051, 0.0, 0.0  },\n                new double[]{ 1.0081125874457642E-7, -0.34690893617920376,  0.7631996595942279,  0.5451426139958772, 0.0, 0.0  },\n                new double[]{                   0.0,                  0.0,                 0.0,                 0.0, 1.0, 0.0  },\n                new double[]{                   0.0,                  0.0,                 0.0,                 0.0, 0.0, 1.0  }\n        };\n        rref=RREFS.rref(matrix);\n        print(rref);\n\n//      this\n//      [ 8.385956100787163E-8,   0.9103664774626016, 0.41380294430118253,                 0.0, 0.0, 0.0]\n//      [2.0779736498353668E-8,  0.22558161873553792, -0.4962795612181877,  0.8383433249008051, 0.0, 0.0]\n//      [1.0081125874457642E-7, -0.34690893617920376,  0.7631996595942279,  0.5451426139958772, 0.0, 0.0]\n//      [                  0.0,                  0.0,                 0.0,                 0.0, 1.0, 0.0]\n//      [                  0.0,                  0.0,                 0.0,                 0.0, 0.0, 1.0]\n\n//       produces\n//       [1.0, 0.0, 0.0,                 0.0, 0.0, 0.0]\n//       [0.0, 1.0, 0.0,                 0.0, 0.0, 0.0]\n//       [0.0, 0.0, 1.0, -1.3999999999999997, 0.0, 0.0]\n//       [0.0, 0.0, 0.0,                 0.0, 1.0, 0.0]\n//       [0.0, 0.0, 0.0,                 0.0, 0.0, 1.0]\n\n//       insteada\n//       [1.0, 0.0, 0.0,  1.38165312352941182995E7, 0.0, 0.0]\n//       [0.0, 1.0, 0.0,        -0.636363636363636, 0.0, 0.0]\n//       [0.0, 0.0, 1.0,                      -1.4, 0.0, 0.0]\n//       [0.0, 0.0, 0.0,                         0, 1.0, 0.0]\n//       [0.0, 0.0, 0.0,                         0, 0.0, 1.0]\n​\n    }\n\n\n    /**\n     * Puts a matrix into reduced row echelon form\n     *\n     * @param matrix input matrix\n     *\n     * @return 2D result matrix\n     */\n    public static double[][] rref(double[][] matrix){\n        int columnIndex = 0;\n        int cursor;\n\n        // number of rows and columns in matrix\n        int getRowSize = matrix.length;\n        int getColumnSize = matrix[0].length;\n\n\n        loop:\n        for(int rowIndex = 0; rowIndex &lt; getRowSize; rowIndex++){\n            if(getColumnSize &lt;= columnIndex){\n                break loop;\n            }\n            cursor = rowIndex;\n            while(matrix[cursor][columnIndex] == 0){\n                cursor++;\n                if(getRowSize == cursor){\n                    cursor = rowIndex;\n                    columnIndex++;\n                    if(getColumnSize == columnIndex){\n                        break loop;\n                    }\n                }\n\n            }\n\n            matrix = rowSwap(matrix, cursor, rowIndex);\n            if(matrix[rowIndex][columnIndex] != 0){\n                matrix = rowScale(matrix, rowIndex, (1/matrix[rowIndex][columnIndex]));\n            }\n\n            for(cursor = 0; cursor &lt; getRowSize; cursor++){\n                if(cursor != rowIndex){\n                    matrix = rowAddScale(matrix, rowIndex, cursor,((-1) * matrix[cursor][columnIndex]));\n                }\n            }columnIndex++;\n        }return matrix;\n    }\n\n    /**\n     * Swap positions of 2 rows\n     *\n     * @param matrix matrix before row additon\n     * @param rowIndex1 int index of row to swap\n     * @param rowIndex2 int index of row to swap\n     *\n     * @return matrix after row swap\n     */\n    private static double[][] rowSwap(double[][] matrix, int rowIndex1,\n                                      int rowIndex2){\n        // number of columns in matrix\n        int numColumns = matrix[0].length;\n\n        // holds number to be swapped\n        double hold;\n\n        for(int k = 0; k &lt; numColumns; k++){\n            hold = matrix[rowIndex2][k];\n            matrix[rowIndex2][k] = matrix[rowIndex1][k];\n            matrix[rowIndex1][k] = hold;\n        }\n\n        return matrix;\n    }\n\n    /**\n     * Adds 2 rows together row2 = row2 + row1\n     *\n     * @param matrix matrix before row additon\n     * @param rowIndex1 int index of row to be added\n     * @param rowIndex2 int index or row that row1 is added to\n     *\n     * @return matrix after row addition\n     */\n    private static double[][] rowAdd(double[][] matrix, int rowIndex1,\n                                     int rowIndex2){\n        // number of columns in matrix\n        int numColumns = matrix[0].length;\n\n        for(int k = 0; k &lt; numColumns; k++){\n            matrix[rowIndex2][k] += matrix[rowIndex1][k];\n        }\n\n        return matrix;\n    }\n\n    /**\n     * Multiplies a row by a scalar\n     *\n     * @param matrix matrix before row additon\n     * @param rowIndex int index of row to be scaled\n     * @param scalar double to scale row by\n     *\n     * @return matrix after row scaling\n     */\n    private static double[][] rowScale(double[][] matrix, int rowIndex,\n                                       double scalar){\n        // number of columns in matrix\n        int numColumns = matrix[0].length;\n\n        for(int k = 0; k &lt; numColumns; k++){\n            matrix[rowIndex][k] *= scalar;\n        }\n\n        return matrix;\n    }\n\n    /**\n     * Adds a row by the scalar of another row\n     * row2 = row2 + (row1 * scalar)\n     * @param matrix matrix before row additon\n     * @param rowIndex1 int index of row to be added\n     * @param rowIndex2 int index or row that row1 is added to\n     * @param scalar double to scale row by\n     *\n     * @return matrix after row addition\n     */\n    private static double[][] rowAddScale(double[][] matrix, int rowIndex1,\n                                          int rowIndex2, double scalar){\n        // number of columns in matrix\n        int numColumns = matrix[0].length;\n\n        for(int k = 0; k &lt; numColumns; k++){\n            matrix[rowIndex2][k] += (matrix[rowIndex1][k] * scalar);\n        }\n\n        return matrix;\n    }\n\n    public static void print(double[][] matrix) {\n        print(&quot;&quot;,matrix);\n    }\n    public static void print(String message, double[][] matrix) {\n        System.out.println(message);\n        for (int i = 0; i &lt; matrix.length; i++) {\n            System.out.println(Arrays.toString(matrix[i]));\n        }System.out.println();\n    }\n}\n</code></pre>\n<p>I am trying to build a custom rref calculator thus I have\n<a href=\"https://github.com/edie-zhou\" rel=\"nofollow noreferrer\">edie-zhou's</a> <a href=\"https://github.com/edie-zhou/Matrix-Calculator/blob/master/RREF.java\" rel=\"nofollow noreferrer\">implementation</a> <a href=\"https://en.wikipedia.org/wiki/Row_echelon_form#Pseudocode_for_reduced_row_echelon_form\" rel=\"nofollow noreferrer\">asper</a>.</p>\n<p>It works with every simple matrix I have tested so far, However the result of</p>\n<pre><code> [ 8.385956100787163E-8,   0.9103664774626016, 0.41380294430118253,                 0.0, 0.0, 0.0]\n [2.0779736498353668E-8,  0.22558161873553792, -0.4962795612181877,  0.8383433249008051, 0.0, 0.0]\n [1.0081125874457642E-7, -0.34690893617920376,  0.7631996595942279,  0.5451426139958772, 0.0, 0.0]\n [                  0.0,                  0.0,                 0.0,                 0.0, 1.0, 0.0]\n [                  0.0,                  0.0,                 0.0,                 0.0, 0.0, 1.0]\n</code></pre>\n<p>is this</p>\n<pre><code>[1.0, 0.0, 0.0,                 0.0, 0.0, 0.0]\n[0.0, 1.0, 0.0,                 0.0, 0.0, 0.0]\n[0.0, 0.0, 1.0, -1.3999999999999997, 0.0, 0.0]\n[0.0, 0.0, 0.0,                 0.0, 1.0, 0.0]\n[0.0, 0.0, 0.0,                 0.0, 0.0, 1.0]\n</code></pre>\n<p>instead of</p>\n<pre><code>[1.0, 0.0, 0.0,  1.38165312352941182995E7, 0.0, 0.0]\n[0.0, 1.0, 0.0,        -0.636363636363636, 0.0, 0.0]\n[0.0, 0.0, 1.0,                      -1.4, 0.0, 0.0]\n[0.0, 0.0, 0.0,                         0, 1.0, 0.0]\n[0.0, 0.0, 0.0,                         0, 0.0, 1.0]\n</code></pre>\n<p>according to this online <a href=\"https://www.emathhelp.net/calculators/linear-algebra/reduced-row-echelon-form-rref-calculator/?i=%5B%5B8.385956100787163E-8%2C0.9103664774626016%2C0.41380294430118253%2C0%2C0%2C0%5D%2C%5B2.0779736498353668E-8%2C0.22558161873553792%2C-0.4962795612181877%2C0.8383433249008051%2C0%2C0%5D%2C%5B1.0081125874457642E-7%2C-0.34690893617920376%2C0.7631996595942279%2C0.5451426139958772%2C0%2C0%5D%2C%5B0%2C0%2C0%2C0%2C1%2C0%5D%2C%5B0%2C0%2C0%2C0%2C0%2C1%5D%5D&amp;reduced=on\" rel=\"nofollow noreferrer\">calculator</a> and some others I tested, please what seems to be the problem with the code.</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675443342,"creation_date":1675443342,"answer_id":75338829,"question_id":75338387,"body_markdown":"The `peutJouer` property in the screenshot you shared is a numeric value. The code you use to read it however does:\r\n```\r\nsnapshot.getValue(String.class)\r\n```\r\n\r\nSince the snapshot does not have a `String` value, you can&#39;t retrieve it like that.\r\n\r\nInstead, you&#39;ll want to extract is with:\r\n\r\n```\r\npeutjouer = snapshot.getValue(Long.class);\r\n```","title":"Failed to convert value of type java.lang.Long to String - Android Studio - Firebase Realtime Database","body":"<p>The <code>peutJouer</code> property in the screenshot you shared is a numeric value. The code you use to read it however does:</p>\n<pre><code>snapshot.getValue(String.class)\n</code></pre>\n<p>Since the snapshot does not have a <code>String</code> value, you can't retrieve it like that.</p>\n<p>Instead, you'll want to extract is with:</p>\n<pre><code>peutjouer = snapshot.getValue(Long.class);\n</code></pre>\n"}],"owner":{"account_id":27453794,"reputation":3,"user_id":20945572,"display_name":"Hugo MERLE"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75338829,"answer_count":1,"score":0,"last_activity_date":1675443861,"creation_date":1675441063,"question_id":75338387,"body_markdown":"I&#39;m coding a Tic Tac Toe, and while executing it crashes when I tried to read a value from the database.\r\n\r\nI&#39;m getting the following error: \r\n\r\n&gt; com.google.firebase.database.DatabaseException: Failed to convert value of type java.lang.Long to String\r\n\r\nThe line where it crashes is the following : `canPlay = Long.parseLong(snapshot.getValue(String.class));`\r\n\r\nThe function is the following:\r\n \r\n\r\n```\r\nrefPeutJouer.addValueEventListener(new ValueEventListener() {\r\n    @Override\r\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n        peutjouer = Long.parseLong(snapshot.getValue(String.class));\r\n    }\r\n\r\n    @Override\r\n    public void onCancelled(@NonNull DatabaseError error) {}\r\n});\r\n```\r\n\r\nThe variable is declared as `private long peutjouer` at the beginning of the class.\r\nI have declared the `DatabaseReference` as follows: `private DatabaseReference refPeutJouer = database.getReference(&quot;peutJouer&quot;);`\r\n\r\nHere is a screenshot of the Firebase database: \r\n\r\n![Screenshot of the Database](https://i.stack.imgur.com/EEqEl.png)\r\n\r\nI tried to switch from an int to a long, but that didn&#39;t change anything.\r\n","title":"Failed to convert value of type java.lang.Long to String - Android Studio - Firebase Realtime Database","body":"<p>I'm coding a Tic Tac Toe, and while executing it crashes when I tried to read a value from the database.</p>\n<p>I'm getting the following error:</p>\n<blockquote>\n<p>com.google.firebase.database.DatabaseException: Failed to convert value of type java.lang.Long to String</p>\n</blockquote>\n<p>The line where it crashes is the following : <code>canPlay = Long.parseLong(snapshot.getValue(String.class));</code></p>\n<p>The function is the following:</p>\n<pre><code>refPeutJouer.addValueEventListener(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\n        peutjouer = Long.parseLong(snapshot.getValue(String.class));\n    }\n\n    @Override\n    public void onCancelled(@NonNull DatabaseError error) {}\n});\n</code></pre>\n<p>The variable is declared as <code>private long peutjouer</code> at the beginning of the class.\nI have declared the <code>DatabaseReference</code> as follows: <code>private DatabaseReference refPeutJouer = database.getReference(&quot;peutJouer&quot;);</code></p>\n<p>Here is a screenshot of the Firebase database:</p>\n<p><img src=\"https://i.stack.imgur.com/EEqEl.png\" alt=\"Screenshot of the Database\" /></p>\n<p>I tried to switch from an int to a long, but that didn't change anything.</p>\n"},{"tags":["java","web-services","soap","client","cxf"],"comments":[{"owner":{"account_id":21804,"reputation":7207,"user_id":53300,"accept_rate":53,"display_name":"DaveH"},"score":0,"creation_date":1366111429,"post_id":16035612,"comment_id":22876953,"body_markdown":"Not sure if I understand what you are trying to achieve, but there are utilities that can be used to generate web service clients from a wsdl. wsimport comes as part of the standard jdk ( from Java 6 if I remember correctly )","body":"Not sure if I understand what you are trying to achieve, but there are utilities that can be used to generate web service clients from a wsdl. wsimport comes as part of the standard jdk ( from Java 6 if I remember correctly )"},{"owner":{"account_id":1645220,"reputation":5070,"user_id":1516873,"display_name":"user1516873"},"score":0,"creation_date":1366111553,"post_id":16035612,"comment_id":22877022,"body_markdown":"You can generate classes by wsdl using cxf `wsdl2java` command or using jax-ws `wsimport`","body":"You can generate classes by wsdl using cxf <code>wsdl2java</code> command or using jax-ws <code>wsimport</code>"},{"owner":{"account_id":2197855,"reputation":889,"user_id":1943085,"accept_rate":100,"display_name":"Lenymm"},"score":0,"creation_date":1366117461,"post_id":16035612,"comment_id":22880599,"body_markdown":"I wish you had asked about NetBeans (Right click the project, new, Web Service Client, from WSDL, done)\n\nAnyway - wsimport is sufficient for your problem.","body":"I wish you had asked about NetBeans (Right click the project, new, Web Service Client, from WSDL, done)  Anyway - wsimport is sufficient for your problem."}],"answers":[{"tags":[],"owner":{"account_id":1587132,"reputation":6980,"user_id":1471203,"accept_rate":89,"display_name":"Rais Alam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366111503,"creation_date":1366111503,"answer_id":16035798,"question_id":16035612,"body_markdown":"You can take help of `Apache CXF` [Link][1] wsdl to java tool. `wsdl2java` - takes a WSDL document and generates fully annotated Java code from which to implement a service.\r\n\r\nYou can take help of eclipse plugin also.\r\n\r\n[Eclipse plugin to generate java class][2]\r\n\r\n\r\n  [1]: http://cxf.apache.org/docs/wsdl-to-java.html\r\n  [2]: http://sourceforge.net/projects/wsdl2javawizard/","title":"Create a SOAP Webservice Client Application in Java","body":"<p>You can take help of <code>Apache CXF</code> <a href=\"http://cxf.apache.org/docs/wsdl-to-java.html\" rel=\"nofollow\">Link</a> wsdl to java tool. <code>wsdl2java</code> - takes a WSDL document and generates fully annotated Java code from which to implement a service.</p>\n\n<p>You can take help of eclipse plugin also.</p>\n\n<p><a href=\"http://sourceforge.net/projects/wsdl2javawizard/\" rel=\"nofollow\">Eclipse plugin to generate java class</a></p>\n"},{"tags":[],"owner":{"account_id":431486,"reputation":3641,"user_id":815566,"accept_rate":81,"display_name":"Satheesh Cheveri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366114462,"creation_date":1366111614,"answer_id":16035836,"question_id":16035612,"body_markdown":"You can send request to web service API as XML request. Only thing you would need to constuct SOAP complaint request with proper header and body. By using SoapUI you can generate the XML request structure, and then reuse it in your application. \r\n\r\nIf you are using Jax-RS(REST APIs), even http method also works\r\n\r\n\r\n**[update]**\r\n\r\nIf you are stuck with  how to create client classes, then you would follow this\r\n\r\n\r\n1. Use wsimport \r\n \r\n        &gt;  http : //hostname :port/wsdl.url on command line to create proxy classes\r\n\r\n2. Create jar file generated proxy classes\r\n3. Add jar file to class path\r\n4. Use Service API to construct the end point, and then invoke service.\r\n5. Sample test client is given below.\r\n\r\n\r\n\r\n\r\n\t\ttry {\r\n\r\n\t\t\tURL wsdlURL = new URL(&quot;http://localhost:8082/cxf/services/yourservice?wsdl&quot;);\r\n\r\n\t\t\tQName SERVICE_NAME = new QName(&quot;http://package.name/&quot;,&quot;PORTNAme&quot;);\r\n\r\n\t\t\tService service = Service.create(wsdlURL, SERVICE_NAME);\r\n\r\n\t\t\tclient = service.getPort(PORTInterface.class);\r\n\r\n\t\t\tclient.executeYourMethod()\r\n\r\n\t\t} catch (Exception e) {\r\n\r\n\t\t\t// TODO Auto-generated catch block\r\n\r\n\t\t\te.printStackTrace();\r\n\r\n\t\t}\r\n\r\n\t\r\n\r\n&gt; \r\n\r\n1. URL is WSDL url\r\n2. To create QName, need to provide namespace of the service interface(revers name of package,usually) and PORT name which you can find in WSDL in binding section.\r\n3. Also need to identify the Proxy class ( name would be similar to port name)\r\n\r\n\r\nCheers\r\nSatheesh","title":"Create a SOAP Webservice Client Application in Java","body":"<p>You can send request to web service API as XML request. Only thing you would need to constuct SOAP complaint request with proper header and body. By using SoapUI you can generate the XML request structure, and then reuse it in your application. </p>\n\n<p>If you are using Jax-RS(REST APIs), even http method also works</p>\n\n<p><strong>[update]</strong></p>\n\n<p>If you are stuck with  how to create client classes, then you would follow this</p>\n\n<ol>\n<li><p>Use wsimport </p>\n\n<pre><code>&gt;  http : //hostname :port/wsdl.url on command line to create proxy classes\n</code></pre></li>\n<li><p>Create jar file generated proxy classes</p></li>\n<li>Add jar file to class path</li>\n<li>Use Service API to construct the end point, and then invoke service.</li>\n<li><p>Sample test client is given below.</p>\n\n<pre><code>try {\n\n    URL wsdlURL = new URL(\"http://localhost:8082/cxf/services/yourservice?wsdl\");\n\n    QName SERVICE_NAME = new QName(\"http://package.name/\",\"PORTNAme\");\n\n    Service service = Service.create(wsdlURL, SERVICE_NAME);\n\n    client = service.getPort(PORTInterface.class);\n\n    client.executeYourMethod()\n\n} catch (Exception e) {\n\n    // TODO Auto-generated catch block\n\n    e.printStackTrace();\n\n}\n</code></pre></li>\n</ol>\n\n<blockquote>\n  <p></p>\n</blockquote>\n\n<ol>\n<li>URL is WSDL url</li>\n<li>To create QName, need to provide namespace of the service interface(revers name of package,usually) and PORT name which you can find in WSDL in binding section.</li>\n<li>Also need to identify the Proxy class ( name would be similar to port name)</li>\n</ol>\n\n<p>Cheers\nSatheesh</p>\n"}],"owner":{"display_name":"user1079425"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7831,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1675443705,"creation_date":1366110900,"question_id":16035612,"body_markdown":"I have created in eclipse a Webservice in Java using **Apache CXF**, now I have to create a WebService client application to consume and invoke it.\r\nI have been searching a way to do it, and I found that Client is always dependent to the server&#39;s Java Class.\r\n\r\nThe problem is that I have to develop a client class in an other Java environment. My question is : Is there a way to develop a client class which will be independent of webservice server&#39;s package, using only the **WSDL** file ?\r\n\r\nThank you :)","title":"Create a SOAP Webservice Client Application in Java","body":"<p>I have created in eclipse a Webservice in Java using <strong>Apache CXF</strong>, now I have to create a WebService client application to consume and invoke it.\nI have been searching a way to do it, and I found that Client is always dependent to the server's Java Class.</p>\n\n<p>The problem is that I have to develop a client class in an other Java environment. My question is : Is there a way to develop a client class which will be independent of webservice server's package, using only the <strong>WSDL</strong> file ?</p>\n\n<p>Thank you :)</p>\n"},{"tags":["java","postgresql","spring-boot","jdbc"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1675434226,"post_id":75337003,"comment_id":132933948,"body_markdown":"Please post the full exception stacktrace.","body":"Please post the full exception stacktrace."},{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":3,"creation_date":1675435238,"post_id":75337003,"comment_id":132934297,"body_markdown":"Hard without the full trace but it seems that you are not loading the dev properties as it seems to try to connect to another URL than the one you show. Are you sure you start with the correct profile?","body":"Hard without the full trace but it seems that you are not loading the dev properties as it seems to try to connect to another URL than the one you show. Are you sure you start with the correct profile?"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":3,"creation_date":1675441387,"post_id":75337003,"comment_id":132936440,"body_markdown":"`java.net.UnknownHostException: postgres`, but **application-dev.properties** , use jdbc:postgresql://**localhost**:5432, In most cases **localhost** cannot lead to **Unknown Host Exception**. So are you sure your application is using application-dev.properties file?","body":"<code>java.net.UnknownHostException: postgres</code>, but <b>application-dev.properties</b> , use jdbc:postgresql://**localhost**:5432, In most cases <b>localhost</b> cannot lead to <b>Unknown Host Exception</b>. So are you sure your application is using application-dev.properties file?"}],"answers":[{"tags":[],"owner":{"account_id":20506651,"reputation":95,"user_id":15049285,"display_name":"Lalarukh khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675443440,"creation_date":1675443440,"answer_id":75338851,"question_id":75337003,"body_markdown":"I also faced the same issue and after a lot of working I finally resolved it this way:\r\nAs you&#39;re receiving unknown host means that your application can&#39;t detect your this file: **application-dev.properties**\r\n\r\nYou shall make this **application.yml** inside your project (yourprojectdirectory/application.yml) and this will automatically detects the DB information and all. \r\nAs you&#39;re using postgres as DB so, add this code inside this file:\r\n\r\n    spring:\r\n      datasource:\r\n        driver-class-name: org.postgresql.Driver\r\n        url: jdbc:postgresql:db_name\r\n        username: your-postgres-username\r\n        password: your-postgres-password\r\n    \r\nRun this command for application running: `mvn spring-boot:run -Dspring-boot.run.profiles`","title":"Java application is not connecting with Postgres Database","body":"<p>I also faced the same issue and after a lot of working I finally resolved it this way:\nAs you're receiving unknown host means that your application can't detect your this file: <strong>application-dev.properties</strong></p>\n<p>You shall make this <strong>application.yml</strong> inside your project (yourprojectdirectory/application.yml) and this will automatically detects the DB information and all.\nAs you're using postgres as DB so, add this code inside this file:</p>\n<pre><code>spring:\n  datasource:\n    driver-class-name: org.postgresql.Driver\n    url: jdbc:postgresql:db_name\n    username: your-postgres-username\n    password: your-postgres-password\n</code></pre>\n<p>Run this command for application running: <code>mvn spring-boot:run -Dspring-boot.run.profiles</code></p>\n"}],"owner":{"account_id":27695261,"reputation":19,"user_id":21141126,"display_name":"Meta Stack"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":558,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75338851,"answer_count":1,"score":0,"last_activity_date":1675443440,"creation_date":1675434030,"question_id":75337003,"body_markdown":"I recently setup a java application in my spring-boot. I&#39;m getting this error when i run it:\r\n\r\n    org.postgresql.util.PSQLException: The connection attempt failed.\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:315)\r\n\tat org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:51)\r\n\tat org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:225)\r\n\tat org.postgresql.Driver.makeConnection(Driver.java:465)\r\n\tat org.postgresql.Driver.connect(Driver.java:264) ........\r\n    Caused by: java.net.UnknownHostException: postgres ........\r\n    Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2023-02-03 17:24:15 - Application run failed\r\n\r\n\r\nMy application-dev.properties file in src/main/resources/ has this code:\r\n```none\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/sofra_hybrid_7?useUnicode=yes&amp;characterEncoding=UTF-8\r\nspring.datasource.username=postgres\r\nspring.datasource.password=admin\r\n```\r\nI have made the database too as well in the postgres server with username &quot;postgres&quot; and pass &quot;admin:\r\n\r\n```none\r\nlalarukh=# CREATE DATABASE sofra_hybrid_7;\r\nCREATE DATABASE\r\nlalarukh=# grant all privileges on database sofra_hybrid_7 to postgres ;\r\nGRANT\r\n```\r\nI have even also used the jdbc postgres jar file inside the application to make the connection but all in vain.\r\nSeeking Help!\r\n\r\nI can&#39;t run my java application as postgres can&#39;t make connection with my app in spring boot.","title":"Java application is not connecting with Postgres Database","body":"<p>I recently setup a java application in my spring-boot. I'm getting this error when i run it:</p>\n<pre><code>org.postgresql.util.PSQLException: The connection attempt failed.\nat org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:315)\nat org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:51)\nat org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:225)\nat org.postgresql.Driver.makeConnection(Driver.java:465)\nat org.postgresql.Driver.connect(Driver.java:264) ........\nCaused by: java.net.UnknownHostException: postgres ........\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n</code></pre>\n<p>2023-02-03 17:24:15 - Application run failed</p>\n<p>My application-dev.properties file in src/main/resources/ has this code:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.datasource.url=jdbc:postgresql://localhost:5432/sofra_hybrid_7?useUnicode=yes&amp;characterEncoding=UTF-8\nspring.datasource.username=postgres\nspring.datasource.password=admin\n</code></pre>\n<p>I have made the database too as well in the postgres server with username &quot;postgres&quot; and pass &quot;admin:</p>\n<pre class=\"lang-none prettyprint-override\"><code>lalarukh=# CREATE DATABASE sofra_hybrid_7;\nCREATE DATABASE\nlalarukh=# grant all privileges on database sofra_hybrid_7 to postgres ;\nGRANT\n</code></pre>\n<p>I have even also used the jdbc postgres jar file inside the application to make the connection but all in vain.\nSeeking Help!</p>\n<p>I can't run my java application as postgres can't make connection with my app in spring boot.</p>\n"},{"tags":["java","yaml"],"answers":[{"tags":[],"owner":{"account_id":7846543,"reputation":11,"user_id":5931424,"display_name":"envfriendly"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675443418,"creation_date":1675443418,"answer_id":75338843,"question_id":75338766,"body_markdown":"    Map&lt;String, Object&gt; obj = yaml.load(inputStream);\r\n    obj.values();\r\n\r\nsee also: https://www.baeldung.com/java-snake-yaml\r\n","title":"How to get the title of the value from yaml to java","body":"<pre><code>Map&lt;String, Object&gt; obj = yaml.load(inputStream);\nobj.values();\n</code></pre>\n<p>see also: <a href=\"https://www.baeldung.com/java-snake-yaml\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-snake-yaml</a></p>\n"}],"owner":{"account_id":26120217,"reputation":1,"user_id":19812639,"display_name":"Chocorot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675443418,"creation_date":1675443023,"question_id":75338766,"body_markdown":"```\r\nfruits:\r\n    apple:\r\n        color: red\r\n    banana:\r\n        color: yellow\r\n    graps:\r\n        color: purple\r\n```\r\n\r\nis it posible to get a String\\[\\] with value of {&quot;apple&quot;, &quot;banana&quot;, &quot;grapes&quot;} in java\r\n\r\ni have tried many way but i still cant figure it out","title":"How to get the title of the value from yaml to java","body":"<pre><code>fruits:\n    apple:\n        color: red\n    banana:\n        color: yellow\n    graps:\n        color: purple\n</code></pre>\n<p>is it posible to get a String[] with value of {&quot;apple&quot;, &quot;banana&quot;, &quot;grapes&quot;} in java</p>\n<p>i have tried many way but i still cant figure it out</p>\n"},{"tags":["java","elasticsearch","elk","kibana-7"],"owner":{"account_id":25414251,"reputation":51,"user_id":19221489,"display_name":"TheCoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675442830,"creation_date":1675441962,"question_id":75338563,"body_markdown":"I have 2 dashboards: an advanced and a basic dashboard. I want to provide link(url) of advanced dashboard in basic dashboard from the data saved in elasticsearch (which varies for each of the index pattern). \r\n\r\nI tried using markdown (Text) but there I am not able to add any data from elastic search.\r\n\r\nI am using elastic and kibana version 7.16","title":"Kibana navigate from one dashboard to other","body":"<p>I have 2 dashboards: an advanced and a basic dashboard. I want to provide link(url) of advanced dashboard in basic dashboard from the data saved in elasticsearch (which varies for each of the index pattern).</p>\n<p>I tried using markdown (Text) but there I am not able to add any data from elastic search.</p>\n<p>I am using elastic and kibana version 7.16</p>\n"},{"tags":["java","android","kotlin","background","autocompletetextview"],"answers":[{"tags":[],"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675442818,"creation_date":1675442818,"answer_id":75338721,"question_id":75333276,"body_markdown":"You can change the `AppCompatAutoCompleteTextView` selector background with `app:backgroundTint` attribute.\r\n\r\nAnd change the background of the dropdown list programmatically with either:\r\n```\r\nautoCompleteTV.setDropDownBackgroundDrawable(ColorDrawable(Color.RED))\r\nautoCompleteTV.setDropDownBackgroundResource(resourceId) // takes a color/drawable resource\r\n```\r\n\r\n\r\n","title":"AutoCompleteText not update popup background","body":"<p>You can change the <code>AppCompatAutoCompleteTextView</code> selector background with <code>app:backgroundTint</code> attribute.</p>\n<p>And change the background of the dropdown list programmatically with either:</p>\n<pre><code>autoCompleteTV.setDropDownBackgroundDrawable(ColorDrawable(Color.RED))\nautoCompleteTV.setDropDownBackgroundResource(resourceId) // takes a color/drawable resource\n</code></pre>\n"}],"owner":{"account_id":5019073,"reputation":3015,"user_id":4033050,"accept_rate":27,"display_name":"Seb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675442818,"creation_date":1675413548,"question_id":75333276,"body_markdown":"I am using `AppCompatAutoCompleteTextView` but I cannot change the background of the dropdown list or neither the color of the background of the selector. I tried color or drawable but nothing change.\r\n \r\n\r\n```\r\n     &lt;androidx.appcompat.widget.AppCompatAutoCompleteTextView\r\n                    android:id=&quot;@+id/topicEt&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;48dp&quot;\r\n                    android:layout_marginTop=&quot;4dp&quot;\r\n                    android:background=&quot;@drawable/corner_shape_spinner_darkness&quot;\r\n                    android:dropDownHeight=&quot;wrap_content&quot;\r\n                    android:hint=&quot;@string/support_select_topic&quot;\r\n                    android:inputType=&quot;none&quot;\r\n                    android:editable=&quot;false&quot;\r\n                    android:paddingStart=&quot;12dp&quot;\r\n                    android:textAppearance=&quot;@style/Body_12&quot;\r\n                    android:textColor=&quot;@color/white&quot;\r\n                    android:textColorHint=&quot;@color/gray200&quot;\r\n                    android:drawableEnd=&quot;@drawable/dropdown_icon_selector&quot;\r\n                    android:paddingEnd=&quot;14dp&quot;\r\n                    android:dropDownSelector=&quot;@color/lightness100&quot;\r\n                    android:popupBackground=&quot;@color/darkness100&quot;/&gt;\r\n```\r\n\r\nAny idea ?","title":"AutoCompleteText not update popup background","body":"<p>I am using <code>AppCompatAutoCompleteTextView</code> but I cannot change the background of the dropdown list or neither the color of the background of the selector. I tried color or drawable but nothing change.</p>\n<pre><code>     &lt;androidx.appcompat.widget.AppCompatAutoCompleteTextView\n                    android:id=&quot;@+id/topicEt&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;48dp&quot;\n                    android:layout_marginTop=&quot;4dp&quot;\n                    android:background=&quot;@drawable/corner_shape_spinner_darkness&quot;\n                    android:dropDownHeight=&quot;wrap_content&quot;\n                    android:hint=&quot;@string/support_select_topic&quot;\n                    android:inputType=&quot;none&quot;\n                    android:editable=&quot;false&quot;\n                    android:paddingStart=&quot;12dp&quot;\n                    android:textAppearance=&quot;@style/Body_12&quot;\n                    android:textColor=&quot;@color/white&quot;\n                    android:textColorHint=&quot;@color/gray200&quot;\n                    android:drawableEnd=&quot;@drawable/dropdown_icon_selector&quot;\n                    android:paddingEnd=&quot;14dp&quot;\n                    android:dropDownSelector=&quot;@color/lightness100&quot;\n                    android:popupBackground=&quot;@color/darkness100&quot;/&gt;\n</code></pre>\n<p>Any idea ?</p>\n"},{"tags":["java","xstream"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1675403493,"post_id":75331775,"comment_id":132925666,"body_markdown":"Have a look at the source of ThrowableConverter and AbstractTruffleException","body":"Have a look at the source of ThrowableConverter and AbstractTruffleException"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1675408438,"post_id":75331775,"comment_id":132926524,"body_markdown":"The emitted message sounds more like you tried to deserialize that `IllegalArgumentException` - that is create the Java object from some external form...","body":"The emitted message sounds more like you tried to deserialize that <code>IllegalArgumentException</code> - that is create the Java object from some external form..."}],"answers":[{"tags":[],"owner":{"account_id":19796944,"reputation":51,"user_id":14498732,"display_name":"a stand-out flamingo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675442719,"creation_date":1675442719,"answer_id":75338709,"question_id":75331775,"body_markdown":"I think it&#39;s due to Graalvm&#39;s implementation of &quot;javax.script.ScriptEngine&quot; class, which are not implemented as what jdk has implemented.\r\nRemoving Graalvm dependency, everything works fine.","title":"UnsupportedOperationException was thrown when serializing a Throwable variable using XStream","body":"<p>I think it's due to Graalvm's implementation of &quot;javax.script.ScriptEngine&quot; class, which are not implemented as what jdk has implemented.\nRemoving Graalvm dependency, everything works fine.</p>\n"}],"owner":{"account_id":19796944,"reputation":51,"user_id":14498732,"display_name":"a stand-out flamingo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675442719,"creation_date":1675401300,"question_id":75331775,"body_markdown":"When I tried using XStream 1.4.9 to serialize an *IllegalArgumentException* type variable, there is a java.lang.UnsupportedOperationException. \r\n\r\nBelow is the stack trace information.\r\nI have no idea what this could mean. Information from online is limited.\r\n\r\n\r\n```\r\njava.lang.UnsupportedOperationException: Not supported. Pass in the cause using the constructors instead.\r\n\tat com.oracle.truffle.api.exception.AbstractTruffleException.initCause(AbstractTruffleException.java:413)\r\n\tat com.thoughtworks.xstream.converters.extended.ThrowableConverter.marshal(ThrowableConverter.java:56)\r\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:68)\r\n```\r\n\r\n```\r\n        try {\r\n            final ScriptEngine scriptEngine = new ScriptEngineManager()\r\n                    .getEngineByName(&quot;JavaScript&quot;);\r\n\r\n            Objects.toString(scriptEngine.eval(&quot;X&quot;), null);\r\n        } catch (Exception e) {\r\n            XStream xstream = new XStream();\r\n            System.err.println(xstream.toXML(e));\r\n        }\r\n```\r\nThis is a minimum example that I see.\r\nI realize that whenever I used *js-scriptengine* dependency, XStream fails to serialize it, while removing such dependency, everything works\r\n","title":"UnsupportedOperationException was thrown when serializing a Throwable variable using XStream","body":"<p>When I tried using XStream 1.4.9 to serialize an <em>IllegalArgumentException</em> type variable, there is a java.lang.UnsupportedOperationException.</p>\n<p>Below is the stack trace information.\nI have no idea what this could mean. Information from online is limited.</p>\n<pre><code>java.lang.UnsupportedOperationException: Not supported. Pass in the cause using the constructors instead.\n    at com.oracle.truffle.api.exception.AbstractTruffleException.initCause(AbstractTruffleException.java:413)\n    at com.thoughtworks.xstream.converters.extended.ThrowableConverter.marshal(ThrowableConverter.java:56)\n    at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:68)\n</code></pre>\n<pre><code>        try {\n            final ScriptEngine scriptEngine = new ScriptEngineManager()\n                    .getEngineByName(&quot;JavaScript&quot;);\n\n            Objects.toString(scriptEngine.eval(&quot;X&quot;), null);\n        } catch (Exception e) {\n            XStream xstream = new XStream();\n            System.err.println(xstream.toXML(e));\n        }\n</code></pre>\n<p>This is a minimum example that I see.\nI realize that whenever I used <em>js-scriptengine</em> dependency, XStream fails to serialize it, while removing such dependency, everything works</p>\n"},{"tags":["java","jpa"],"comments":[{"owner":{"account_id":9539331,"reputation":138,"user_id":7088224,"accept_rate":100,"display_name":"SW Jeong"},"score":0,"creation_date":1675442749,"post_id":75338700,"comment_id":132936908,"body_markdown":"That is because you have not assigned any value to your allocated variable id.","body":"That is because you have not assigned any value to your allocated variable id."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1675448481,"post_id":75338700,"comment_id":132938703,"body_markdown":"Component.getId() will be null until the insert statement to the database, which only happens when the persistence context is synchronized with the database - essentially when flush is called or the transaction is committed. Make sure also that your reference to the entity is a managed reference, as JPA will update the managed instance with the ID, but not a detached instance. Ie if you use em.merge, it will update the entity is passes back, not necessarily the one you pass into it.","body":"Component.getId() will be null until the insert statement to the database, which only happens when the persistence context is synchronized with the database - essentially when flush is called or the transaction is committed. Make sure also that your reference to the entity is a managed reference, as JPA will update the managed instance with the ID, but not a detached instance. Ie if you use em.merge, it will update the entity is passes back, not necessarily the one you pass into it."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1675481984,"post_id":75338700,"comment_id":132944061,"body_markdown":"`@GeneratedValue(strategy = GenerationType.SEQUENCE)`","body":"<code>@GeneratedValue(strategy = GenerationType.SEQUENCE)</code>"}],"owner":{"account_id":27696237,"reputation":1,"user_id":21141905,"display_name":"Nima Saminasab"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675442679,"creation_date":1675442679,"question_id":75338700,"body_markdown":"\r\n    @Entity\r\n    public class Component {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id ;\r\n\r\n\r\n\r\nI only get null on component.id ","title":"How do I get Auto Increment on my Id variable?","body":"<pre><code>@Entity\npublic class Component {\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id ;\n</code></pre>\n<p>I only get null on component.id</p>\n"},{"tags":["java","ignite"],"owner":{"account_id":1010382,"reputation":127,"user_id":1023077,"accept_rate":25,"display_name":"sushil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675442622,"creation_date":1674208831,"question_id":75182431,"body_markdown":"We have upgraded ignite 2.7.6 to 2.11.1 server. But getting below exception while querying the database:\r\n\r\n    [2023-01-18T04:56:14,637][ERROR][client-connector-#143][JdbcRequestHandler] Failed to execute SQL query [reqId=29, req=JdbcQueryExecuteRequest [schemaName=PUBLIC, pageSize=1024, maxRows=0, sqlQry=SELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?), args=Object[] [1], stmtType=SELECT_STATEMENT_TYPE, autoCommit=true, partResReq=false, explicitTimeout=false, super=JdbcRequest [type=2, reqId=29]]]\r\n    javax.cache.CacheException: class org.apache.ignite.internal.processors.query.IgniteSQLException: General error: &quot;class org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]&quot;; SQL statement:\r\n    SELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?) [50000-197]\r\n    .\r\n    .\r\n    .\r\n    .\r\n    Caused by: org.apache.ignite.internal.processors.query.IgniteSQLException: General error: &quot;class org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]&quot;; SQL statement:\r\n    SELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?) [50000-197]\r\n    .\r\n    .\r\n    .\r\n    .\r\n    Caused by: org.h2.jdbc.JdbcSQLException: General error: &quot;class org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]&quot;; SQL statement:\r\n    SELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?) [50000-197]\r\n    .\r\n    .\r\n    .\r\n    .\r\n    Caused by: org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]\r\n    .\r\n    .\r\n    .\r\n    .\r\n    Caused by: org.apache.ignite.IgniteCheckedException: Rows cannot be compared\r\n    .\r\n    .\r\n    .\r\n    .\r\n    Caused by: org.h2.message.DbException: Hexadecimal string with odd number of characters: &quot;1&quot; [90003-197]\r\n\r\nAny help/suggestion would really appreciated.\r\n\r\n","title":"Ignite org.h2.message.DbException: Hexadecimal string with odd number of characters:","body":"<p>We have upgraded ignite 2.7.6 to 2.11.1 server. But getting below exception while querying the database:</p>\n<pre><code>[2023-01-18T04:56:14,637][ERROR][client-connector-#143][JdbcRequestHandler] Failed to execute SQL query [reqId=29, req=JdbcQueryExecuteRequest [schemaName=PUBLIC, pageSize=1024, maxRows=0, sqlQry=SELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?), args=Object[] [1], stmtType=SELECT_STATEMENT_TYPE, autoCommit=true, partResReq=false, explicitTimeout=false, super=JdbcRequest [type=2, reqId=29]]]\njavax.cache.CacheException: class org.apache.ignite.internal.processors.query.IgniteSQLException: General error: &quot;class org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]&quot;; SQL statement:\nSELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?) [50000-197]\n.\n.\n.\n.\nCaused by: org.apache.ignite.internal.processors.query.IgniteSQLException: General error: &quot;class org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]&quot;; SQL statement:\nSELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?) [50000-197]\n.\n.\n.\n.\nCaused by: org.h2.jdbc.JdbcSQLException: General error: &quot;class org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]&quot;; SQL statement:\nSELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?) [50000-197]\n.\n.\n.\n.\nCaused by: org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]\n.\n.\n.\n.\nCaused by: org.apache.ignite.IgniteCheckedException: Rows cannot be compared\n.\n.\n.\n.\nCaused by: org.h2.message.DbException: Hexadecimal string with odd number of characters: &quot;1&quot; [90003-197]\n</code></pre>\n<p>Any help/suggestion would really appreciated.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"answers":[{"tags":[],"owner":{"account_id":2038203,"reputation":1330,"user_id":1820013,"display_name":"bbejeck"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675442433,"creation_date":1675442433,"answer_id":75338654,"question_id":75334869,"body_markdown":"TLDR; the keys won&#39;t overwrite each other; keys from either topic will get included in the aggregation.\r\n\r\nFor some context, Kafka Streams creates a `Task` for each input partition.  So if you have a topic with 4 partitions, you&#39;ll get 4 tasks.  When you have multiple topics in the source, the number of tasks Kafka streams creates is max(topic1.partitions, topic2.partitions), and the task will process records from the same partition from each topic.  For example, let&#39;s assume `topic1` and `topic2` each have 4 partitions - you&#39;ll end up with 4 tasks  `0_0, 1_1, 2_2, 3_3`, the first number is the task-id, and the second number is the partition it&#39;s responsible for.\r\n\r\nSo the `groupByKey` will group keys from either topic since all the records the task is processing belong to the nth partition.  If you want to treat records differently by topic, you&#39;ll need to use the [KStream.process][1] method, which gives you access to the [ProcessorContex][2]. From the `ProcessorContext`, you can use the `recordMetadata()` method to retrieve the [RecordMetadata][3] object from which you can get the source topic for that particular record.  In some cases, the topic name might not be available as explained in the [RecordMetadata.topic(][4]) Javadoc.\r\n\r\nHTH,\r\n\r\nBill\r\n\r\n\r\n  [1]: https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/kstream/KStream.html#process-org.apache.kafka.streams.processor.api.ProcessorSupplier-java.lang.String...-\r\n  [2]: https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/processor/ProcessorContext.html\r\n  [3]: https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/processor/api/RecordMetadata.html\r\n  [4]: https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/processor/api/RecordMetadata.html#topic--","title":"Is materialized store created per partition and key or only per key?","body":"<p>TLDR; the keys won't overwrite each other; keys from either topic will get included in the aggregation.</p>\n<p>For some context, Kafka Streams creates a <code>Task</code> for each input partition.  So if you have a topic with 4 partitions, you'll get 4 tasks.  When you have multiple topics in the source, the number of tasks Kafka streams creates is max(topic1.partitions, topic2.partitions), and the task will process records from the same partition from each topic.  For example, let's assume <code>topic1</code> and <code>topic2</code> each have 4 partitions - you'll end up with 4 tasks  <code>0_0, 1_1, 2_2, 3_3</code>, the first number is the task-id, and the second number is the partition it's responsible for.</p>\n<p>So the <code>groupByKey</code> will group keys from either topic since all the records the task is processing belong to the nth partition.  If you want to treat records differently by topic, you'll need to use the <a href=\"https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/kstream/KStream.html#process-org.apache.kafka.streams.processor.api.ProcessorSupplier-java.lang.String...-\" rel=\"nofollow noreferrer\">KStream.process</a> method, which gives you access to the <a href=\"https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/processor/ProcessorContext.html\" rel=\"nofollow noreferrer\">ProcessorContex</a>. From the <code>ProcessorContext</code>, you can use the <code>recordMetadata()</code> method to retrieve the <a href=\"https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/processor/api/RecordMetadata.html\" rel=\"nofollow noreferrer\">RecordMetadata</a> object from which you can get the source topic for that particular record.  In some cases, the topic name might not be available as explained in the <a href=\"https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/processor/api/RecordMetadata.html#topic--\" rel=\"nofollow noreferrer\">RecordMetadata.topic(</a>) Javadoc.</p>\n<p>HTH,</p>\n<p>Bill</p>\n"}],"owner":{"account_id":1193173,"reputation":4237,"user_id":1165499,"accept_rate":76,"display_name":"ashur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75338654,"answer_count":1,"score":0,"last_activity_date":1675442433,"creation_date":1675422629,"question_id":75334869,"body_markdown":"I have the following topology definition:\r\n\r\n    KStream&lt;String, ObjectMessage&gt; stream = kStreamBuilder.stream(&quot;topic1&quot;, &quot;topic2&quot;);\r\n    stream.mapValues(new ProtobufObjectConverter())\r\n            .groupByKey()\r\n            .windowedBy(TimeWindows.ofSizeWithNoGrace(Duration.ofMillis(100)))\r\n            .aggregate(AggregatedObject::new, new ObjectAggregator(), buildStateStore(storeName))\r\n            .suppress(Suppressed.untilWindowCloses(Suppressed.BufferConfig.unbounded().withMaxRecords(config.suppressionBufferSize())))\r\n            .mapValues(new AggregatedObjectProtobufConverter())\r\n            .toStream((key, value) -&gt; key.key())\r\n            .to(outputTopic);\r\n\r\n    private Materialized&lt;String, AggregatedTicker, WindowStore&lt;Bytes, byte[]&gt;&gt; buildStateStore(String storeName) {\r\n        return Materialized.&lt;String, AggregatedObject, WindowStore&lt;Bytes, byte[]&gt;&gt;as(storeName)\r\n                .withKeySerde(Serdes.String())\r\n                .withValueSerde(new JsonSerde&lt;&gt;(AggregatedObject.class));\r\n    }\r\n\r\n\r\nBoth topics use the same key, but they mean different things. The question is, whether the keys put into store won&#39;t overwrite themself from different topics? I couldn&#39;t find easily such information in the code or documentation or didn&#39;t know where to particularly look to.\r\n\r\nWhat I want to achieve is to possibly use single store across all topics and their partitions and be sure that state won&#39;t be corrupted or lost.","title":"Is materialized store created per partition and key or only per key?","body":"<p>I have the following topology definition:</p>\n<pre><code>KStream&lt;String, ObjectMessage&gt; stream = kStreamBuilder.stream(&quot;topic1&quot;, &quot;topic2&quot;);\nstream.mapValues(new ProtobufObjectConverter())\n        .groupByKey()\n        .windowedBy(TimeWindows.ofSizeWithNoGrace(Duration.ofMillis(100)))\n        .aggregate(AggregatedObject::new, new ObjectAggregator(), buildStateStore(storeName))\n        .suppress(Suppressed.untilWindowCloses(Suppressed.BufferConfig.unbounded().withMaxRecords(config.suppressionBufferSize())))\n        .mapValues(new AggregatedObjectProtobufConverter())\n        .toStream((key, value) -&gt; key.key())\n        .to(outputTopic);\n\nprivate Materialized&lt;String, AggregatedTicker, WindowStore&lt;Bytes, byte[]&gt;&gt; buildStateStore(String storeName) {\n    return Materialized.&lt;String, AggregatedObject, WindowStore&lt;Bytes, byte[]&gt;&gt;as(storeName)\n            .withKeySerde(Serdes.String())\n            .withValueSerde(new JsonSerde&lt;&gt;(AggregatedObject.class));\n}\n</code></pre>\n<p>Both topics use the same key, but they mean different things. The question is, whether the keys put into store won't overwrite themself from different topics? I couldn't find easily such information in the code or documentation or didn't know where to particularly look to.</p>\n<p>What I want to achieve is to possibly use single store across all topics and their partitions and be sure that state won't be corrupted or lost.</p>\n"},{"tags":["java","swing","jtable"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1675178318,"post_id":75293942,"comment_id":132870081,"body_markdown":"*when I highlight cell 1, it will be highlighted with blue but when I click it again it won&#39;t be un-highlighted unless I click another cell then click cell 1 again* - So Is the requirement that only one cell can be highlighted at a time?","body":"<i>when I highlight cell 1, it will be highlighted with blue but when I click it again it won&#39;t be un-highlighted unless I click another cell then click cell 1 again</i> - So Is the requirement that only one cell can be highlighted at a time?"},{"owner":{"account_id":26631611,"reputation":3,"user_id":20248721,"display_name":"rewards110"},"score":0,"creation_date":1675178784,"post_id":75293942,"comment_id":132870290,"body_markdown":"I want to highlight cells one by one, then un-highlight each cell by clicking on it again. The problem is when I click a cell it is highlighted but when I click it again to un-highlight it, it won&#39;t be un-highlighted unless I click another cell. I do have a condition set within a mouse listener.","body":"I want to highlight cells one by one, then un-highlight each cell by clicking on it again. The problem is when I click a cell it is highlighted but when I click it again to un-highlight it, it won&#39;t be un-highlighted unless I click another cell. I do have a condition set within a mouse listener."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1675180608,"post_id":75293942,"comment_id":132870997,"body_markdown":"Keeping variable like &quot;oneCount, twoCount...&quot; is the wrong approach as this can get unmaintainable as the grid size increases. I would keep a 2D Array of boolean values to indicate whether a cell should be highlighted or not. A mouse pressed on the cell would toggle the value. The renderer would check the value do the the highlighting.","body":"Keeping variable like &quot;oneCount, twoCount...&quot; is the wrong approach as this can get unmaintainable as the grid size increases. I would keep a 2D Array of boolean values to indicate whether a cell should be highlighted or not. A mouse pressed on the cell would toggle the value. The renderer would check the value do the the highlighting."},{"owner":{"account_id":26631611,"reputation":3,"user_id":20248721,"display_name":"rewards110"},"score":0,"creation_date":1675181881,"post_id":75293942,"comment_id":132871451,"body_markdown":"I&#39;m a bit confused, can you please elaborate or give some example","body":"I&#39;m a bit confused, can you please elaborate or give some example"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1675184840,"post_id":75293942,"comment_id":132872449,"body_markdown":"In your renderer you keep a 2D Array to represent the state of each cell. You already have a MouseListener. You already know the row/column of the cell. So you then toggle the state of the cell in the renderer and invoke repaint() on the table.. You add code to the renderer to highlight the cell based on the state of the cell.","body":"In your renderer you keep a 2D Array to represent the state of each cell. You already have a MouseListener. You already know the row/column of the cell. So you then toggle the state of the cell in the renderer and invoke repaint() on the table.. You add code to the renderer to highlight the cell based on the state of the cell."},{"owner":{"account_id":26631611,"reputation":3,"user_id":20248721,"display_name":"rewards110"},"score":0,"creation_date":1675248659,"post_id":75293942,"comment_id":132886270,"body_markdown":"I initialized the 2D boolean array and it should be false by default. When I assign it to true I get the exception &quot;java.lang.ArrayIndexOutOfBounds Exception&quot;\n\nboolean cells[][] = new boolean[row][column];\ncells[row][column] = true;\n\nHow should I add it in a mouse listener and renderer?","body":"I initialized the 2D boolean array and it should be false by default. When I assign it to true I get the exception &quot;java.lang.ArrayIndexOutOfBounds Exception&quot;  boolean cells[][] = new boolean[row][column]; cells[row][column] = true;  How should I add it in a mouse listener and renderer?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1675263399,"post_id":75293942,"comment_id":132891144,"body_markdown":"In the constructor of your renderer you need to create the 2D Array based on the size of your table, which appears to be 4x4.  In your renderer you also need a method like &quot;toggleCellHighlight(row, column). Now, in the MouseListener you invoke this method for the specific row/column. Also, you can&#39;t just set it to &quot;true&quot; because you also need the ability to reset it to &quot;false&quot; when you click on the cell again. Post a proper [mre] showing your attempt if you need more help.","body":"In the constructor of your renderer you need to create the 2D Array based on the size of your table, which appears to be 4x4.  In your renderer you also need a method like &quot;toggleCellHighlight(row, column). Now, in the MouseListener you invoke this method for the specific row/column. Also, you can&#39;t just set it to &quot;true&quot; because you also need the ability to reset it to &quot;false&quot; when you click on the cell again. Post a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> showing your attempt if you need more help."},{"owner":{"account_id":26631611,"reputation":3,"user_id":20248721,"display_name":"rewards110"},"score":0,"creation_date":1675431471,"post_id":75293942,"comment_id":132932965,"body_markdown":"I&#39;ve edited the code and used the boolean variable isSelected to print whether the cells boolean 2D array changes from false to true but does not change so I can use the boolean on the change color method.","body":"I&#39;ve edited the code and used the boolean variable isSelected to print whether the cells boolean 2D array changes from false to true but does not change so I can use the boolean on the change color method."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1675432388,"post_id":75293942,"comment_id":132933272,"body_markdown":"@camickr _In your renderer you keep a 2D Array to represent the state of each cell_ ehh .. no: I would argue that keeping table state is __not__ the task of a renderer, all it might do is compare it&#39;s own location with some state of the table and configure itself accordingly. Maybe misunderstanding both the requirement and and your comment, though :)","body":"@camickr <i>In your renderer you keep a 2D Array to represent the state of each cell</i> ehh .. no: I would argue that keeping table state is <b>not</b> the task of a renderer, all it might do is compare it&#39;s own location with some state of the table and configure itself accordingly. Maybe misunderstanding both the requirement and and your comment, though :)"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1675432469,"post_id":75293942,"comment_id":132933298,"body_markdown":"also unrelated: please keep the your tags focused .. uitableView is clearly documented to be about iOS ..","body":"also unrelated: please keep the your tags focused .. uitableView is clearly documented to be about iOS .."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1675440950,"post_id":75293942,"comment_id":132936301,"body_markdown":"@kleopatra don&#39;t disagree that normally a renderer is generic and can be used by any table so it should not track state information. In this case we need custom data to track the highlight state of each cell. We then need the ability to toggle the state and finally render the state. I was thinking that it might be easier to have a single class handle this functionality, instead of having the logic split in multiple classes. In any case I made a simple example below which maybe you can improve upon.","body":"@kleopatra don&#39;t disagree that normally a renderer is generic and can be used by any table so it should not track state information. In this case we need custom data to track the highlight state of each cell. We then need the ability to toggle the state and finally render the state. I was thinking that it might be easier to have a single class handle this functionality, instead of having the logic split in multiple classes. In any case I made a simple example below which maybe you can improve upon."}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675441792,"creation_date":1675439817,"answer_id":75338154,"question_id":75293942,"body_markdown":"In the example below the &quot;state&quot; of the highlight is contained in a 2D Array that has been added as data to the table by using a &quot;client property&quot;.\r\n\r\nThe MouseListener is used to toggle the highlighting state every time you click on a cell. \r\n\r\nThe renderer will then query the highlighting state in order to paint the background.\r\n\r\n    import java.awt.*;\r\n    import javax.swing.*;\r\n    import javax.swing.table.*;\r\n    import java.awt.event.*;\r\n    \r\n    public class TableHighlight extends JPanel\r\n    {\r\n    \tpublic TableHighlight()\r\n    \t{\r\n    \t\tsetLayout( new BorderLayout() );\r\n    \r\n    \t\tJTable table = new JTable(4, 4);\r\n    \t\tadd( new JScrollPane( table ) );\r\n    \r\n    \t\tboolean[][] highlights = new boolean[4][4];\r\n    \t\ttable.setDefaultRenderer(Object.class, new TableRenderer());\r\n    \t\ttable.putClientProperty(&quot;highlights&quot;, highlights);\r\n    \r\n    \t\ttable.addMouseListener(new MouseAdapter()\r\n    \t\t{\r\n    \t        @Override\r\n        \t    public void mousePressed(final MouseEvent e)\r\n        \t    {\r\n    \t\t\t\tJTable table = (JTable)e.getSource();\r\n    \t\t\t\tint row = table.getSelectedRow();\r\n    \t\t\t\tint column = table.getSelectedColumn();\r\n    \r\n    \t\t\t\tboolean[][] highlights = (boolean[][])table.getClientProperty(&quot;highlights&quot;);\r\n    \t\t\t\thighlights[row][column] = !highlights[row][column];\r\n    \r\n    \t\t\t\ttable.repaint();\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    \r\n    \tprivate class TableRenderer extends DefaultTableCellRenderer\r\n    \t{\r\n    \t\t@Override\r\n    \t\tpublic Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\r\n    \r\n    \t\tComponent c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\r\n    \r\n    \t\tboolean[][] highlights = (boolean[][])table.getClientProperty(&quot;highlights&quot;);\r\n    \t\tboolean highlighted = highlights[row][column];\r\n    \r\n            if (highlighted)\r\n                c.setBackground(Color.BLUE);\r\n            else\r\n    \t        c.setBackground(Color.WHITE);\r\n    \r\n            return c;\r\n        }\r\n    }\r\n    \r\n    \tprivate static void createAndShowGUI()\r\n    \t{\r\n    \t\tJFrame frame = new JFrame(&quot;TableHighlight&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\tframe.add(new TableHighlight());\r\n            frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform( true );\r\n    \t\tframe.setVisible( true );\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) throws Exception\r\n    \t{\r\n    \t\tjava.awt.EventQueue.invokeLater( () -&gt; createAndShowGUI() );\r\n    \t}\r\n    }\r\n\r\n","title":"Jtable cell selection and highlighting","body":"<p>In the example below the &quot;state&quot; of the highlight is contained in a 2D Array that has been added as data to the table by using a &quot;client property&quot;.</p>\n<p>The MouseListener is used to toggle the highlighting state every time you click on a cell.</p>\n<p>The renderer will then query the highlighting state in order to paint the background.</p>\n<pre><code>import java.awt.*;\nimport javax.swing.*;\nimport javax.swing.table.*;\nimport java.awt.event.*;\n\npublic class TableHighlight extends JPanel\n{\n    public TableHighlight()\n    {\n        setLayout( new BorderLayout() );\n\n        JTable table = new JTable(4, 4);\n        add( new JScrollPane( table ) );\n\n        boolean[][] highlights = new boolean[4][4];\n        table.setDefaultRenderer(Object.class, new TableRenderer());\n        table.putClientProperty(&quot;highlights&quot;, highlights);\n\n        table.addMouseListener(new MouseAdapter()\n        {\n            @Override\n            public void mousePressed(final MouseEvent e)\n            {\n                JTable table = (JTable)e.getSource();\n                int row = table.getSelectedRow();\n                int column = table.getSelectedColumn();\n\n                boolean[][] highlights = (boolean[][])table.getClientProperty(&quot;highlights&quot;);\n                highlights[row][column] = !highlights[row][column];\n\n                table.repaint();\n            }\n        });\n    }\n\n    private class TableRenderer extends DefaultTableCellRenderer\n    {\n        @Override\n        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\n\n        Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n\n        boolean[][] highlights = (boolean[][])table.getClientProperty(&quot;highlights&quot;);\n        boolean highlighted = highlights[row][column];\n\n        if (highlighted)\n            c.setBackground(Color.BLUE);\n        else\n            c.setBackground(Color.WHITE);\n\n        return c;\n    }\n}\n\n    private static void createAndShowGUI()\n    {\n        JFrame frame = new JFrame(&quot;TableHighlight&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.add(new TableHighlight());\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        frame.pack();\n        frame.setLocationByPlatform( true );\n        frame.setVisible( true );\n    }\n\n    public static void main(String[] args) throws Exception\n    {\n        java.awt.EventQueue.invokeLater( () -&gt; createAndShowGUI() );\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26631611,"reputation":3,"user_id":20248721,"display_name":"rewards110"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":75338154,"answer_count":1,"score":-2,"last_activity_date":1675441792,"creation_date":1675150605,"question_id":75293942,"body_markdown":"I have an attached code, it working but with a little issue. I&#39;m able to highlight a cell with blue color. What I want is after highlighting a single cell with a blue color I want to be able to un-highlight the same cell by clicking it again. For example when I highlight cell 1, it will be highlighted with blue but when I click it again it won&#39;t be un-highlighted  unless I click another cell then click cell 1 again.\r\n\r\nHow can I fix this problem. \r\n\r\nIn the code I&#39;m only testing cell 1 to 4.\r\n\r\n```\r\n\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.Component;\r\nimport java.awt.Container;\r\nimport java.awt.Font;\r\nimport java.awt.event.MouseAdapter;\r\nimport java.awt.event.MouseEvent;\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JScrollPane;\r\nimport javax.swing.JTable;\r\nimport javax.swing.table.DefaultTableCellRenderer;\r\n\r\npublic class myJTable extends JFrame {\r\n\r\n    Container container;\r\n    JTable table;\r\n    JScrollPane pane;\r\n   \r\n    static String oneSelected = &quot;&quot;;\r\n    static String twoSelected = &quot;&quot;;\r\n    static String threeSelected = &quot;&quot;;\r\n    static String fourSelected = &quot;&quot;;\r\n   \r\n    int oneCount = 0;\r\n    int twoCount = 0;\r\n    int threeCount = 0;\r\n    int fourCount = 0;\r\n   \r\n    public myJTable() {\r\n\r\n        container = this.getContentPane();\r\n        container.setLayout(new BorderLayout());\r\n\r\n        String[] columnNames = {&quot;No.1&quot;,&quot;No.2&quot;, &quot;No.3&quot;, &quot;No.4&quot;};\r\n        Object[][] rowData = {{&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;},\r\n            {&quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;},\r\n            {&quot;9&quot;, &quot;10&quot;, &quot;11&quot;, &quot;12&quot;},\r\n            {&quot;13&quot;, &quot;14&quot;, &quot;15&quot;, &quot;16&quot;},\r\n            {&quot;17&quot;, &quot;18&quot;, &quot;19&quot;, &quot;20&quot;}};\r\n\r\n        table = new JTable(rowData, columnNames);\r\n        table.setRowHeight(50);\r\n        table.setDefaultRenderer(Object.class, new TableRenderer());\r\n        table.setCellSelectionEnabled(true);\r\n        pane = new JScrollPane(table);\r\n        container.add(pane);\r\n       \r\n           table.addMouseListener(new MouseAdapter() {\r\n        @Override\r\n        public void mouseClicked(final MouseEvent e) {\r\n        if (e.getClickCount() == 1) {\r\n        final JTable jTable= (JTable)e.getSource();\r\n        final int row = jTable.getSelectedRow();\r\n        final int column = jTable.getSelectedColumn();\r\n        final String cellValue = (String)jTable.getValueAt(row, column);\r\n        //textfield.setText(valueInCell);\r\n       \r\n        if (cellValue.equals(&quot;1&quot;) &amp;&amp; oneCount == 0) {\r\n        oneSelected  = cellValue;\r\n        oneCount++;\r\n        System.out.println(&quot;cell value is &quot; +oneSelected);\r\n        System.out.println(&quot;one count is &quot; +oneCount);\r\n        }\r\n        else if (cellValue.equals(&quot;1&quot;) &amp;&amp; oneCount &gt;= 1) {\r\n        oneSelected  = &quot;&quot;;\r\n        oneCount = 0;\r\n        System.out.println(&quot;cell value is &quot; +oneSelected);\r\n        System.out.println(&quot;one count is &quot; +oneCount);\r\n        }\r\n       \r\n            if (cellValue.equals(&quot;2&quot;) &amp;&amp; twoCount == 0) {\r\n          twoSelected  = cellValue;\r\n          twoCount++;\r\n          System.out.println(&quot;cell value is &quot; +twoSelected);\r\n        }\r\n            else if (cellValue.equals(&quot;2&quot;) &amp;&amp; twoCount &gt;= 1) {\r\n        twoSelected  = &quot;&quot;;\r\n        twoCount = 0;\r\n        System.out.println(&quot;cell value is &quot; +twoSelected);\r\n        System.out.println(&quot;two count is &quot; +twoCount);\r\n        }\r\n           \r\n            if (cellValue.equals(&quot;3&quot;) &amp;&amp; threeCount == 0) {\r\n          threeSelected  = cellValue;\r\n          threeCount++;\r\n          System.out.println(&quot;cell value is &quot; +threeSelected);\r\n           }\r\n            else if (cellValue.equals(&quot;3&quot;) &amp;&amp; threeCount &gt;= 1) {\r\n        threeSelected  = &quot;&quot;;\r\n        threeCount = 0;\r\n        System.out.println(&quot;cell value is &quot; +threeSelected);\r\n        System.out.println(&quot;three count is &quot; +threeCount);\r\n        }\r\n           \r\n            if (cellValue.equals(&quot;4&quot;) &amp;&amp; fourCount == 0) {\r\n         fourSelected  = cellValue;\r\n         fourCount++;\r\n         System.out.println(&quot;cell value is &quot; +fourSelected);\r\n           }\r\n            else if (cellValue.equals(&quot;4&quot;) &amp;&amp; fourCount &gt;= 1) {\r\n        fourSelected  = &quot;&quot;;\r\n        fourCount = 0;\r\n        System.out.println(&quot;cell value is &quot; +fourSelected);\r\n        System.out.println(&quot;four count is &quot; +fourCount);\r\n        }\r\n        }\r\n        }\r\n        });\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n   \r\n        myJTable frame = new myJTable();\r\n        frame.setTitle(&quot;JTable Example&quot;);\r\n        frame.setVisible(true);\r\n        frame.setSize(700, 300);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    }\r\n}\r\n\r\nclass TableRenderer extends DefaultTableCellRenderer {\r\n\r\n    @Override\r\n   public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\r\n   \r\n    String oneSValue = myJTable.oneSelected;\r\n    String twoSValue = myJTable.twoSelected;\r\n    String threeSValue = myJTable.threeSelected;\r\n    String fourSValue = myJTable.fourSelected;\r\n       \r\n    Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\r\n       \r\n        if (value.equals(oneSValue) || value.equals(twoSValue) || value.equals(threeSValue) || value.equals(fourSValue)) {\r\n            c.setBackground(Color.BLUE);\r\n            c.setForeground(Color.WHITE);\r\n          }\r\n        else {\r\n        c.setBackground(Color.WHITE);\r\n        c.setForeground(Color.BLACK);\r\n        }\r\n       \r\n        return c;\r\n       \r\n    }\r\n}\r\n      \r\n\r\n```\r\n**FIRST EDIT:**\r\n\r\n*I&#39;ve edited the code and used the boolean variable isSelected to print whether the cells boolean 2D array changes from false to true but does not change*\r\n```\r\nclass TableRenderer extends DefaultTableCellRenderer {\r\n\r\n@Override\r\npublic Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\r\n\r\nboolean cells[][] = new boolean [4][4];\r\n\r\n\r\nComponent c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\r\n\r\nif(isSelected) {\r\nif(cells[0][0] == false) {\r\nSystem.out.println(&quot;cell 0 0 is &quot; + cells[0][0]);\r\ncells[0][0] = true;\r\n}\r\nelse if(cells[0][0] == true) {\r\nSystem.out.println(&quot;cell 0 0 is &quot; + cells[0][0]);\r\n}\r\n}\r\n\r\nreturn c;\r\n}\r\n}\r\n```\r\n","title":"Jtable cell selection and highlighting","body":"<p>I have an attached code, it working but with a little issue. I'm able to highlight a cell with blue color. What I want is after highlighting a single cell with a blue color I want to be able to un-highlight the same cell by clicking it again. For example when I highlight cell 1, it will be highlighted with blue but when I click it again it won't be un-highlighted  unless I click another cell then click cell 1 again.</p>\n<p>How can I fix this problem.</p>\n<p>In the code I'm only testing cell 1 to 4.</p>\n<pre><code>\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Component;\nimport java.awt.Container;\nimport java.awt.Font;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\n\nimport javax.swing.JFrame;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTable;\nimport javax.swing.table.DefaultTableCellRenderer;\n\npublic class myJTable extends JFrame {\n\n    Container container;\n    JTable table;\n    JScrollPane pane;\n   \n    static String oneSelected = &quot;&quot;;\n    static String twoSelected = &quot;&quot;;\n    static String threeSelected = &quot;&quot;;\n    static String fourSelected = &quot;&quot;;\n   \n    int oneCount = 0;\n    int twoCount = 0;\n    int threeCount = 0;\n    int fourCount = 0;\n   \n    public myJTable() {\n\n        container = this.getContentPane();\n        container.setLayout(new BorderLayout());\n\n        String[] columnNames = {&quot;No.1&quot;,&quot;No.2&quot;, &quot;No.3&quot;, &quot;No.4&quot;};\n        Object[][] rowData = {{&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;},\n            {&quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;},\n            {&quot;9&quot;, &quot;10&quot;, &quot;11&quot;, &quot;12&quot;},\n            {&quot;13&quot;, &quot;14&quot;, &quot;15&quot;, &quot;16&quot;},\n            {&quot;17&quot;, &quot;18&quot;, &quot;19&quot;, &quot;20&quot;}};\n\n        table = new JTable(rowData, columnNames);\n        table.setRowHeight(50);\n        table.setDefaultRenderer(Object.class, new TableRenderer());\n        table.setCellSelectionEnabled(true);\n        pane = new JScrollPane(table);\n        container.add(pane);\n       \n           table.addMouseListener(new MouseAdapter() {\n        @Override\n        public void mouseClicked(final MouseEvent e) {\n        if (e.getClickCount() == 1) {\n        final JTable jTable= (JTable)e.getSource();\n        final int row = jTable.getSelectedRow();\n        final int column = jTable.getSelectedColumn();\n        final String cellValue = (String)jTable.getValueAt(row, column);\n        //textfield.setText(valueInCell);\n       \n        if (cellValue.equals(&quot;1&quot;) &amp;&amp; oneCount == 0) {\n        oneSelected  = cellValue;\n        oneCount++;\n        System.out.println(&quot;cell value is &quot; +oneSelected);\n        System.out.println(&quot;one count is &quot; +oneCount);\n        }\n        else if (cellValue.equals(&quot;1&quot;) &amp;&amp; oneCount &gt;= 1) {\n        oneSelected  = &quot;&quot;;\n        oneCount = 0;\n        System.out.println(&quot;cell value is &quot; +oneSelected);\n        System.out.println(&quot;one count is &quot; +oneCount);\n        }\n       \n            if (cellValue.equals(&quot;2&quot;) &amp;&amp; twoCount == 0) {\n          twoSelected  = cellValue;\n          twoCount++;\n          System.out.println(&quot;cell value is &quot; +twoSelected);\n        }\n            else if (cellValue.equals(&quot;2&quot;) &amp;&amp; twoCount &gt;= 1) {\n        twoSelected  = &quot;&quot;;\n        twoCount = 0;\n        System.out.println(&quot;cell value is &quot; +twoSelected);\n        System.out.println(&quot;two count is &quot; +twoCount);\n        }\n           \n            if (cellValue.equals(&quot;3&quot;) &amp;&amp; threeCount == 0) {\n          threeSelected  = cellValue;\n          threeCount++;\n          System.out.println(&quot;cell value is &quot; +threeSelected);\n           }\n            else if (cellValue.equals(&quot;3&quot;) &amp;&amp; threeCount &gt;= 1) {\n        threeSelected  = &quot;&quot;;\n        threeCount = 0;\n        System.out.println(&quot;cell value is &quot; +threeSelected);\n        System.out.println(&quot;three count is &quot; +threeCount);\n        }\n           \n            if (cellValue.equals(&quot;4&quot;) &amp;&amp; fourCount == 0) {\n         fourSelected  = cellValue;\n         fourCount++;\n         System.out.println(&quot;cell value is &quot; +fourSelected);\n           }\n            else if (cellValue.equals(&quot;4&quot;) &amp;&amp; fourCount &gt;= 1) {\n        fourSelected  = &quot;&quot;;\n        fourCount = 0;\n        System.out.println(&quot;cell value is &quot; +fourSelected);\n        System.out.println(&quot;four count is &quot; +fourCount);\n        }\n        }\n        }\n        });\n    }\n\n    public static void main(String[] args) {\n   \n        myJTable frame = new myJTable();\n        frame.setTitle(&quot;JTable Example&quot;);\n        frame.setVisible(true);\n        frame.setSize(700, 300);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }\n}\n\nclass TableRenderer extends DefaultTableCellRenderer {\n\n    @Override\n   public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\n   \n    String oneSValue = myJTable.oneSelected;\n    String twoSValue = myJTable.twoSelected;\n    String threeSValue = myJTable.threeSelected;\n    String fourSValue = myJTable.fourSelected;\n       \n    Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n       \n        if (value.equals(oneSValue) || value.equals(twoSValue) || value.equals(threeSValue) || value.equals(fourSValue)) {\n            c.setBackground(Color.BLUE);\n            c.setForeground(Color.WHITE);\n          }\n        else {\n        c.setBackground(Color.WHITE);\n        c.setForeground(Color.BLACK);\n        }\n       \n        return c;\n       \n    }\n}\n      \n\n</code></pre>\n<p><strong>FIRST EDIT:</strong></p>\n<p><em>I've edited the code and used the boolean variable isSelected to print whether the cells boolean 2D array changes from false to true but does not change</em></p>\n<pre><code>class TableRenderer extends DefaultTableCellRenderer {\n\n@Override\npublic Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\n\nboolean cells[][] = new boolean [4][4];\n\n\nComponent c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n\nif(isSelected) {\nif(cells[0][0] == false) {\nSystem.out.println(&quot;cell 0 0 is &quot; + cells[0][0]);\ncells[0][0] = true;\n}\nelse if(cells[0][0] == true) {\nSystem.out.println(&quot;cell 0 0 is &quot; + cells[0][0]);\n}\n}\n\nreturn c;\n}\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1675436154,"post_id":75337410,"comment_id":132934580,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551) Instead [edit] your question to contain the output you get as (properly formatted) plain text.","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a> Instead <a href=\"https://stackoverflow.com/posts/75337410/edit\">edit</a> your question to contain the output you get as (properly formatted) plain text."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1675436380,"post_id":75337410,"comment_id":132934655,"body_markdown":"Capital `R` is encoded as 82, which is smaller than 97, suggesting that `D` became negative in the decryption formula, that&#39;s about as far as I debugged. Figure out why and fix that. You might be running into the fact that [`%` isn&#39;t exactly the same as `mod`](https://stackoverflow.com/questions/5385024/mod-in-java-produces-negative-numbers), especially when it comes to negative numbers.","body":"Capital <code>R</code> is encoded as 82, which is smaller than 97, suggesting that <code>D</code> became negative in the decryption formula, that&#39;s about as far as I debugged. Figure out why and fix that. You might be running into the fact that <a href=\"https://stackoverflow.com/questions/5385024/mod-in-java-produces-negative-numbers\"><code>%</code> isn&#39;t exactly the same as <code>mod</code></a>, especially when it comes to negative numbers."},{"owner":{"account_id":14632062,"reputation":585,"user_id":10671013,"display_name":"Tan Yu Hau Sean"},"score":0,"creation_date":1675436900,"post_id":75337410,"comment_id":132934815,"body_markdown":"% in Java is the remainder operation, which doesnt do complements. what I did to circumvent that was a while loop that while the number is negative, add the modulo value to it., you could probably make it a helper method to convert all your negatives after using %","body":"% in Java is the remainder operation, which doesnt do complements. what I did to circumvent that was a while loop that while the number is negative, add the modulo value to it., you could probably make it a helper method to convert all your negatives after using %"},{"owner":{"account_id":5018541,"reputation":12092,"user_id":4032703,"accept_rate":100,"display_name":"EJoshuaS - Stand with Ukraine"},"score":0,"creation_date":1675444855,"post_id":75337410,"comment_id":132937611,"body_markdown":"@JoachimSauer I edited on the OP&#39;s behalf, so the image is now available as text.","body":"@JoachimSauer I edited on the OP&#39;s behalf, so the image is now available as text."}],"answers":[{"tags":[],"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675440056,"creation_date":1675438561,"answer_id":75337923,"question_id":75337410,"body_markdown":"As Joachim Sauer and Tan Yu Hau Sean suggest, `%` does things you may not expect on negative numbers. If `a` is negative, `a%b` will be a number between `-b` and `0`.\r\n\r\nIf you add a method like this\r\n\r\n    public static int mod(int a, int b) {\r\n        return (a%b+b)%b;\r\n    } \r\n\r\nand replace your instances of `%` with calls to it, e.g.:\r\n\r\n      int C = mod(a* val + b,26);\r\n\r\nthings will work a lot better.","title":"Affine Cypher in Java","body":"<p>As Joachim Sauer and Tan Yu Hau Sean suggest, <code>%</code> does things you may not expect on negative numbers. If <code>a</code> is negative, <code>a%b</code> will be a number between <code>-b</code> and <code>0</code>.</p>\n<p>If you add a method like this</p>\n<pre><code>public static int mod(int a, int b) {\n    return (a%b+b)%b;\n} \n</code></pre>\n<p>and replace your instances of <code>%</code> with calls to it, e.g.:</p>\n<pre><code>  int C = mod(a* val + b,26);\n</code></pre>\n<p>things will work a lot better.</p>\n"}],"owner":{"account_id":27695550,"reputation":13,"user_id":21141364,"display_name":"user21141364"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":75337923,"answer_count":1,"score":-1,"last_activity_date":1675440866,"creation_date":1675436038,"question_id":75337410,"body_markdown":"I&#39;m an Engineering Student and I&#39;m stuck on this part of the Affine Cypher.\r\n\r\n```\r\nimport java.util.Scanner;\r\npublic class abcd {\r\n\tpublic static int a, b;\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tSystem.out.println(&quot;Enter key(a,b): &quot;);\r\n\t\ta = sc.nextInt();\r\n\t\tb = sc.nextInt();\r\n\t\tScanner hj = new Scanner(System.in);\r\n\t\tSystem.out.print(&quot;Enter String: &quot;);\r\n\t\tString word = hj.nextLine();\r\n\t\tsc.close();\r\n\t\thj.close();\r\n\r\n\t\t\r\n\t\tSystem.out.println(&quot;Cyphered text: &quot; + cypher(word));\r\n\t\tSystem.out.println(&quot;Decyphered text: &quot; + decypher(cypher(word)));\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static String cypher(String plaintext) {\r\n\r\n\t\t\r\n\t\tString CT = &quot;&quot;;\r\n\t\tfor (int i = 0; i &lt; plaintext.length(); i++) {\r\n\t\t\tchar x = plaintext.charAt(i);\r\n\t\t\tint val = (char)x-97;\r\n\t\t\tint C = ((a* val + b)%26);\r\n\t\t\tchar n = (char) (C + 97);\r\n\t\t\tCT = CT + n;\r\n\t\t\t\r\n\t\t}\r\n\t\treturn CT;\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static int inv (int a, int b) {\r\n\t\ta=a%b;\r\n\t\tfor (int x = 1; x&lt;26; x++) {\r\n\t\t\tif ((a*x)%26==1) {\r\n\t\t\t\treturn x;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 1;\r\n\t}\r\n\t\r\n\tpublic static String decypher(String cyphertext) {\r\n\t\tString t = &quot;&quot;;\r\n\r\n\t\tfor (int i = 0; i&lt;cyphertext.length(); i++) {\r\n\t\t\tchar x = cyphertext.charAt(i);\r\n\t\t\tint val = (char)x - 97;\r\n\t\t\tint D = ((inv(a, 26)*(val-b))%26);\r\n\t\t\tchar n = (char)(D + 97);\r\n\t\t\tt = t + n;\r\n\t\t\t\t\t\r\n\t\t}return t;\r\n\t}\r\n\r\n}\r\n```\r\nThe cyphered text shows the desired output but the deciphered text doesn&#39;t match the original text.\r\n\r\nHere is my console input and output:\r\n\r\n    Enter key(a,b):\r\n    7\r\n    2\r\n    Enter String: hello\r\n    Cyphered text: zebbw\r\n    Decyphered text: heRRo\r\n\r\n![enter image description here](https://i.stack.imgur.com/ldJnr.png)\r\n\r\nI was expecting the deciphered text to match the original text since that is what it was supposed to do.","title":"Affine Cypher in Java","body":"<p>I'm an Engineering Student and I'm stuck on this part of the Affine Cypher.</p>\n<pre><code>import java.util.Scanner;\npublic class abcd {\n    public static int a, b;\n    \n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;Enter key(a,b): &quot;);\n        a = sc.nextInt();\n        b = sc.nextInt();\n        Scanner hj = new Scanner(System.in);\n        System.out.print(&quot;Enter String: &quot;);\n        String word = hj.nextLine();\n        sc.close();\n        hj.close();\n\n        \n        System.out.println(&quot;Cyphered text: &quot; + cypher(word));\n        System.out.println(&quot;Decyphered text: &quot; + decypher(cypher(word)));\n        \n    }\n    \n    public static String cypher(String plaintext) {\n\n        \n        String CT = &quot;&quot;;\n        for (int i = 0; i &lt; plaintext.length(); i++) {\n            char x = plaintext.charAt(i);\n            int val = (char)x-97;\n            int C = ((a* val + b)%26);\n            char n = (char) (C + 97);\n            CT = CT + n;\n            \n        }\n        return CT;\n        \n        \n    }\n    \n    public static int inv (int a, int b) {\n        a=a%b;\n        for (int x = 1; x&lt;26; x++) {\n            if ((a*x)%26==1) {\n                return x;\n            }\n        }\n        return 1;\n    }\n    \n    public static String decypher(String cyphertext) {\n        String t = &quot;&quot;;\n\n        for (int i = 0; i&lt;cyphertext.length(); i++) {\n            char x = cyphertext.charAt(i);\n            int val = (char)x - 97;\n            int D = ((inv(a, 26)*(val-b))%26);\n            char n = (char)(D + 97);\n            t = t + n;\n                    \n        }return t;\n    }\n\n}\n</code></pre>\n<p>The cyphered text shows the desired output but the deciphered text doesn't match the original text.</p>\n<p>Here is my console input and output:</p>\n<pre><code>Enter key(a,b):\n7\n2\nEnter String: hello\nCyphered text: zebbw\nDecyphered text: heRRo\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/ldJnr.png\" alt=\"enter image description here\" /></p>\n<p>I was expecting the deciphered text to match the original text since that is what it was supposed to do.</p>\n"},{"tags":["java","junit5","testcontainers"],"answers":[{"tags":[],"owner":{"account_id":1460128,"reputation":10123,"user_id":1374678,"accept_rate":93,"display_name":"rolve"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675357756,"creation_date":1675357412,"answer_id":75326573,"question_id":75326388,"body_markdown":"Yes, you can extend the `GenericContainer` class. By overriding methods like `containerIsStarted` or adding your own methods, you can customize the container&#39;s behavior.\r\n\r\nHave a look at how these modules are implemented, e.g., [the MongoDB one][1]. It overrides `containerIsStarted` to initialize a replica set:\r\n\r\n    @Override\r\n    protected void containerIsStarted(InspectContainerResponse containerInfo, boolean reused) {\r\n        if (reused &amp;&amp; isReplicationSetAlreadyInitialized()) {\r\n            log.debug(&quot;Replica set already initialized.&quot;);\r\n        } else {\r\n            initReplicaSet();\r\n        }\r\n    }\r\n\r\n\r\n\r\n  [1]: https://github.com/testcontainers/testcontainers-java/blob/main/modules/mongodb/src/main/java/org/testcontainers/containers/MongoDBContainer.java","title":"Create custom testcontainer modules?","body":"<p>Yes, you can extend the <code>GenericContainer</code> class. By overriding methods like <code>containerIsStarted</code> or adding your own methods, you can customize the container's behavior.</p>\n<p>Have a look at how these modules are implemented, e.g., <a href=\"https://github.com/testcontainers/testcontainers-java/blob/main/modules/mongodb/src/main/java/org/testcontainers/containers/MongoDBContainer.java\" rel=\"nofollow noreferrer\">the MongoDB one</a>. It overrides <code>containerIsStarted</code> to initialize a replica set:</p>\n<pre><code>@Override\nprotected void containerIsStarted(InspectContainerResponse containerInfo, boolean reused) {\n    if (reused &amp;&amp; isReplicationSetAlreadyInitialized()) {\n        log.debug(&quot;Replica set already initialized.&quot;);\n    } else {\n        initReplicaSet();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75326573,"answer_count":1,"score":1,"last_activity_date":1675440379,"creation_date":1675356490,"question_id":75326388,"body_markdown":"I am using JUnit5 + Testcontainers.\r\n\r\nI see there are Testcontainer modules such as these: https://github.com/testcontainers/testcontainers-java/tree/main/modules\r\n\r\nI would like to build my own Testcontainers custom module.\r\n\r\nIs there a way for developers to build their own?","title":"Create custom testcontainer modules?","body":"<p>I am using JUnit5 + Testcontainers.</p>\n<p>I see there are Testcontainer modules such as these: <a href=\"https://github.com/testcontainers/testcontainers-java/tree/main/modules\" rel=\"nofollow noreferrer\">https://github.com/testcontainers/testcontainers-java/tree/main/modules</a></p>\n<p>I would like to build my own Testcontainers custom module.</p>\n<p>Is there a way for developers to build their own?</p>\n"},{"tags":["java","itext","itext7"],"comments":[{"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"score":0,"creation_date":1675504046,"post_id":75338218,"comment_id":132946226,"body_markdown":"don&#39;t post images with code","body":"don&#39;t post images with code"}],"owner":{"account_id":27696109,"reputation":1,"user_id":21141804,"display_name":"Faustino Rojas Arellano"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675440115,"creation_date":1675440115,"question_id":75338218,"body_markdown":"is posible create this type of table?\r\n\r\nI&#180;m using itext 7 in java\r\n\r\n[enter image description here](https://i.stack.imgur.com/aZthX.png)\r\n\r\n\r\n\r\nI have this in my code\r\n\r\n[enter image description here](https://i.stack.imgur.com/eLTW3.png)\r\n\r\n[enter image description here](https://i.stack.imgur.com/HwGZy.png)","title":"Create custom table with header Itext 7","body":"<p>is posible create this type of table?</p>\n<p>I´m using itext 7 in java</p>\n<p><a href=\"https://i.stack.imgur.com/aZthX.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I have this in my code</p>\n<p><a href=\"https://i.stack.imgur.com/eLTW3.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://i.stack.imgur.com/HwGZy.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","nullpointerexception"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1675433833,"post_id":75336881,"comment_id":132933820,"body_markdown":"then check where it is thrown originally. a NullPointerException only has one possible origin: an action taken on a not instantiated instance of a class","body":"then check where it is thrown originally. a NullPointerException only has one possible origin: an action taken on a not instantiated instance of a class"},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":3,"creation_date":1675434174,"post_id":75336881,"comment_id":132933935,"body_markdown":"The exception happens somewhere within `ChMarginHeaderP.createCopy()`, but the sources of that are not available to the debugger, so it cannot give more details.","body":"The exception happens somewhere within <code>ChMarginHeaderP.createCopy()</code>, but the sources of that are not available to the debugger, so it cannot give more details."},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1675434282,"post_id":75336881,"comment_id":132933967,"body_markdown":"It is entirely possible that `ChMarginHeaderP.createCopy` itself has a line `throw new NullPointerException()`.","body":"It is entirely possible that <code>ChMarginHeaderP.createCopy</code> itself has a line <code>throw new NullPointerException()</code>."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1675434788,"post_id":75336881,"comment_id":132934145,"body_markdown":"Out of curiosity, what library is `at com.clh.model.margin.table.classes.ChMarginHeaderP` from? I can&#39;t find anything about it, and the domain seems to be for sale...","body":"Out of curiosity, what library is <code>at com.clh.model.margin.table.classes.ChMarginHeaderP</code> from? I can&#39;t find anything about it, and the domain seems to be for sale..."},{"owner":{"account_id":21241583,"reputation":151,"user_id":15624965,"display_name":"Daniele Scalco"},"score":0,"creation_date":1675436469,"post_id":75336881,"comment_id":132934690,"body_markdown":"That library is of my company","body":"That library is of my company"},{"owner":{"account_id":21241583,"reputation":151,"user_id":15624965,"display_name":"Daniele Scalco"},"score":0,"creation_date":1675436791,"post_id":75336881,"comment_id":132934788,"body_markdown":"Why the source should not be available to the debugger?","body":"Why the source should not be available to the debugger?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1675434297,"creation_date":1675434297,"answer_id":75337058,"question_id":75336881,"body_markdown":"The first line of the stack trace is where the NPE is actually thrown. As you can see, it is __not__ on the line you highlighted - that is where you call `createCopy()`, and that works fine (because `defaultChMarginHeaderP` is not null, as your debugger correctly tells you). It&#39;s some code _inside_ the `createCopy()` call that is either explicitly throwing the exception (literally, `throw new NullPointerException()` is in that method and is being executed), or, some code in there that dereferences a null pointer. Usually something like `foo.methodCall()` where `foo` is `null`. What is that code? Dunno - you are running ChMarginHeaderP as a class file (not as a source file), and the class file does not have debug info, hence, unknown line number and all that.\r\n\r\nDebugging this without such debug info means you have to read docs and toy around, figure out &#39;in the dark&#39; what precondition requirement of the createCopy method you are violating.\r\n\r\nNormally you have this info, which gives you a line number, that you can crosscheck with the source of ChMarginHeaderP and then you&#39;ll know much faster.\r\n","title":"NullPointerException on not null object","body":"<p>The first line of the stack trace is where the NPE is actually thrown. As you can see, it is <strong>not</strong> on the line you highlighted - that is where you call <code>createCopy()</code>, and that works fine (because <code>defaultChMarginHeaderP</code> is not null, as your debugger correctly tells you). It's some code <em>inside</em> the <code>createCopy()</code> call that is either explicitly throwing the exception (literally, <code>throw new NullPointerException()</code> is in that method and is being executed), or, some code in there that dereferences a null pointer. Usually something like <code>foo.methodCall()</code> where <code>foo</code> is <code>null</code>. What is that code? Dunno - you are running ChMarginHeaderP as a class file (not as a source file), and the class file does not have debug info, hence, unknown line number and all that.</p>\n<p>Debugging this without such debug info means you have to read docs and toy around, figure out 'in the dark' what precondition requirement of the createCopy method you are violating.</p>\n<p>Normally you have this info, which gives you a line number, that you can crosscheck with the source of ChMarginHeaderP and then you'll know much faster.</p>\n"}],"owner":{"account_id":21241583,"reputation":151,"user_id":15624965,"display_name":"Daniele Scalco"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675440110,"creation_date":1675433438,"question_id":75336881,"body_markdown":"I have a strange problem: I&#39;m debugging my application and I have this NullPointerException, but the object is not null.\r\n\r\n```\r\njava.lang.NullPointerException\r\n\tat com.clh.model.margin.table.classes.ChMarginHeaderP.createCopy(Unknown Source)\r\n\tat com.clh.controller.builders.EccFirstCallBean.buildDefaultComponent(EccFirstCallBean.java:710)\r\n\tat com.clh.controller.builders.EccFirstCallBean.buildFirstCall(EccFirstCallBean.java:549)\r\n\tat com.clh.controller.builders.EccFirstCallBean.buildMargin(EccFirstCallBean.java:403)\r\n\tat com.clh.controller.builders.EccFirstCallBean.elabThirdLevel(EccFirstCallBean.java:268)\r\n\tat com.clh.controller.builders.EccFirstCallBeanTest.elabThirdLevelTest(EccFirstCallBeanTest.java:529)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat org.junit.internal.runners.TestMethod.invoke(TestMethod.java:68)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:326)\r\n\tat org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:89)\r\n\tat org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:97)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:310)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:131)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.access$100(PowerMockJUnit47RunnerDelegateImpl.java:59)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner$TestExecutorStatement.evaluate(PowerMockJUnit47RunnerDelegateImpl.java:147)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.evaluateStatement(PowerMockJUnit47RunnerDelegateImpl.java:107)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:82)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:298)\r\n\tat org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:87)\r\n\tat org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:50)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:218)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:160)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:134)\r\n\tat org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)\r\n\tat org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:136)\r\n\tat org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:117)\r\n\tat org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:57)\r\n\tat org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:59)\r\n\tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:542)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\r\n```\r\n\r\nThat&#39;s what is just before I press F5 to step into and getting the exception:\r\n[![Variable status before Exception][1]][1]\r\n\r\nThis is the createCopyMethod:\r\n\r\n```\r\npublic ChMarginHeaderP createCopy() {\r\n\t\tfinal ChMarginHeaderP copyChMarginHeaderP = new ChMarginHeaderP(\r\n\t\t\t\tnew ChMarginHeaderPPK(1), this.flgLock,this.flgIsLive, \r\n\t\t\t\tthis.referenceDate, this.userDescription,\r\n\t\t\t\tthis.chCounterpartyPk,\r\n\t\t\t\tthis.chCurrencyPk, this.chTypePk,\r\n\t\t\t\tthis.chPortfolioPk, this.chProductsPk, this.chEntitiesPk,\r\n\t\t\t\tthis.chStatusTradePk, this.chTypeCalledPk,this.segment, this.class_, this.section, this.division);\r\n\r\n\t\treturn copyChMarginHeaderP;\r\n\t}\r\n```\r\n\r\nThe .super() method belongs to the Object class\r\n```\r\npublic ChMarginHeaderP(final ChMarginHeaderPPK id, final boolean flgLock,\r\n\t\t\tfinal boolean flgLive, final Date referenceDate,\r\n\t\t\tfinal String userDescription, final String chCounterpartiesPk,\r\n\t\t\tfinal String chCurrenciesPk, final String chTypePk,\r\n\t\t\tfinal String chPortfolioPk, final String chProductsPk,\r\n\t\t\tfinal String chEntitiesPk, final String chStatusMargin,\r\n\t\t\tfinal String chTypeCalledPk, final String segment, \r\n\t\t\tfinal String class_, final String section, final String division) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.flgLock = flgLock;\r\n\t\tthis.flgIsLive = flgLive;\r\n\t\tthis.referenceDate = referenceDate;\r\n\t\tthis.userDescription = userDescription;\r\n\t\tthis.chCounterpartyPk= chCounterpartiesPk;\r\n\t\tthis.chCurrencyPk = chCurrenciesPk;\r\n\t\tthis.chTypePk = chTypePk;\r\n\t\tthis.chPortfolioPk = chPortfolioPk;\r\n\t\tthis.chProductsPk = chProductsPk;\r\n\t\tthis.chEntitiesPk = chEntitiesPk;\r\n\t\tthis.chStatusTradePk = chStatusMargin;\r\n\t\tthis.chTypeCalledPk = chTypeCalledPk;\r\n\t\tthis.segment = segment;\r\n\t\tthis.class_ = class_;\r\n\t\tthis.section = section; \r\n\t\tthis.division = division;\r\n\t}\r\n```\r\n\r\nWhy my debugger can&#39;t see the source code of the method? Which are the possible causes? &quot;Add line number attribute...&quot; is checked in Compiler options in Preferences. I&#39;va also tried to remove all breakpoints, project clean, uncheck and then check the box but I can&#39;t.\r\n\r\n  [1]: https://i.stack.imgur.com/JRBVi.png","title":"NullPointerException on not null object","body":"<p>I have a strange problem: I'm debugging my application and I have this NullPointerException, but the object is not null.</p>\n<pre><code>java.lang.NullPointerException\n    at com.clh.model.margin.table.classes.ChMarginHeaderP.createCopy(Unknown Source)\n    at com.clh.controller.builders.EccFirstCallBean.buildDefaultComponent(EccFirstCallBean.java:710)\n    at com.clh.controller.builders.EccFirstCallBean.buildFirstCall(EccFirstCallBean.java:549)\n    at com.clh.controller.builders.EccFirstCallBean.buildMargin(EccFirstCallBean.java:403)\n    at com.clh.controller.builders.EccFirstCallBean.elabThirdLevel(EccFirstCallBean.java:268)\n    at com.clh.controller.builders.EccFirstCallBeanTest.elabThirdLevelTest(EccFirstCallBeanTest.java:529)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:68)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:326)\n    at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:89)\n    at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:97)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:310)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:131)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.access$100(PowerMockJUnit47RunnerDelegateImpl.java:59)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner$TestExecutorStatement.evaluate(PowerMockJUnit47RunnerDelegateImpl.java:147)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.evaluateStatement(PowerMockJUnit47RunnerDelegateImpl.java:107)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:82)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:298)\n    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:87)\n    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:50)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:218)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:160)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:134)\n    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)\n    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:136)\n    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:117)\n    at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:57)\n    at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:59)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:542)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\n</code></pre>\n<p>That's what is just before I press F5 to step into and getting the exception:\n<a href=\"https://i.stack.imgur.com/JRBVi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JRBVi.png\" alt=\"Variable status before Exception\" /></a></p>\n<p>This is the createCopyMethod:</p>\n<pre><code>public ChMarginHeaderP createCopy() {\n        final ChMarginHeaderP copyChMarginHeaderP = new ChMarginHeaderP(\n                new ChMarginHeaderPPK(1), this.flgLock,this.flgIsLive, \n                this.referenceDate, this.userDescription,\n                this.chCounterpartyPk,\n                this.chCurrencyPk, this.chTypePk,\n                this.chPortfolioPk, this.chProductsPk, this.chEntitiesPk,\n                this.chStatusTradePk, this.chTypeCalledPk,this.segment, this.class_, this.section, this.division);\n\n        return copyChMarginHeaderP;\n    }\n</code></pre>\n<p>The .super() method belongs to the Object class</p>\n<pre><code>public ChMarginHeaderP(final ChMarginHeaderPPK id, final boolean flgLock,\n            final boolean flgLive, final Date referenceDate,\n            final String userDescription, final String chCounterpartiesPk,\n            final String chCurrenciesPk, final String chTypePk,\n            final String chPortfolioPk, final String chProductsPk,\n            final String chEntitiesPk, final String chStatusMargin,\n            final String chTypeCalledPk, final String segment, \n            final String class_, final String section, final String division) {\n        super();\n        this.id = id;\n        this.flgLock = flgLock;\n        this.flgIsLive = flgLive;\n        this.referenceDate = referenceDate;\n        this.userDescription = userDescription;\n        this.chCounterpartyPk= chCounterpartiesPk;\n        this.chCurrencyPk = chCurrenciesPk;\n        this.chTypePk = chTypePk;\n        this.chPortfolioPk = chPortfolioPk;\n        this.chProductsPk = chProductsPk;\n        this.chEntitiesPk = chEntitiesPk;\n        this.chStatusTradePk = chStatusMargin;\n        this.chTypeCalledPk = chTypeCalledPk;\n        this.segment = segment;\n        this.class_ = class_;\n        this.section = section; \n        this.division = division;\n    }\n</code></pre>\n<p>Why my debugger can't see the source code of the method? Which are the possible causes? &quot;Add line number attribute...&quot; is checked in Compiler options in Preferences. I'va also tried to remove all breakpoints, project clean, uncheck and then check the box but I can't.</p>\n"},{"tags":["java","apache-kafka","apache-flink"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1675350412,"post_id":75323626,"comment_id":132913928,"body_markdown":"Please show AllDataDeserializationSchema class","body":"Please show AllDataDeserializationSchema class"}],"answers":[{"tags":[],"owner":{"account_id":93136,"reputation":3176,"user_id":254934,"accept_rate":63,"display_name":"BenoitParis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675344004,"creation_date":1675344004,"answer_id":75323797,"question_id":75323626,"body_markdown":"You might be interested in specifying your Deserialization Schema as:\r\n\r\n    .setDeserializer(KafkaRecordDeserializationSchema.of(new JSONKeyValueDeserializationSchema(false)))\r\n            \r\nThen you would then map and filter that source with, validating which fields are present:\r\n\r\n    Key fields can be accessed by calling objectNode.get(&quot;key&quot;).get(&lt;name&gt;).as(&lt;type&gt;)\r\n\r\n    Value fields can be accessed by calling objectNode.get(&quot;value&quot;).get(&lt;name&gt;).as(&lt;type&gt;)\r\n\r\nOr cast the objects to existing POJOs inside your map.","title":"Flink using multiple structures of data in java","body":"<p>You might be interested in specifying your Deserialization Schema as:</p>\n<pre><code>.setDeserializer(KafkaRecordDeserializationSchema.of(new JSONKeyValueDeserializationSchema(false)))\n        \n</code></pre>\n<p>Then you would then map and filter that source with, validating which fields are present:</p>\n<pre><code>Key fields can be accessed by calling objectNode.get(&quot;key&quot;).get(&lt;name&gt;).as(&lt;type&gt;)\n\nValue fields can be accessed by calling objectNode.get(&quot;value&quot;).get(&lt;name&gt;).as(&lt;type&gt;)\n</code></pre>\n<p>Or cast the objects to existing POJOs inside your map.</p>\n"},{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675350673,"creation_date":1675350673,"answer_id":75325178,"question_id":75323626,"body_markdown":"You cannot use `&lt;AllDataPOJO&gt;` if you have other POJO classes with other fields.\r\n\r\nOr, you need to add all fields from all POJO types, and make them nullable when they don&#39;t exist in your data. But that may be error prone as name and pin could potentially exist in the same record, for example, but shouldn&#39;t. \r\n\r\nOtherwise, as the other answer says, use a more generic String/JSON deserializer, and then you can use filter/map operations to cast your data into more concrete types, depending on the fields that are available ","title":"Flink using multiple structures of data in java","body":"<p>You cannot use <code>&lt;AllDataPOJO&gt;</code> if you have other POJO classes with other fields.</p>\n<p>Or, you need to add all fields from all POJO types, and make them nullable when they don't exist in your data. But that may be error prone as name and pin could potentially exist in the same record, for example, but shouldn't.</p>\n<p>Otherwise, as the other answer says, use a more generic String/JSON deserializer, and then you can use filter/map operations to cast your data into more concrete types, depending on the fields that are available</p>\n"},{"tags":[],"owner":{"account_id":82425,"reputation":8270,"user_id":231762,"display_name":"kkrugler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675440080,"creation_date":1675440080,"answer_id":75338207,"question_id":75323626,"body_markdown":"In situations like this I normally use the SimpleStringSchema, then follow the source with a ProcessFunction where I parse the string, and use side outputs (one per each message type). The added benefit to this approach is that if the JSON isn&#39;t deserializable, or it doesn&#39;t properly map to any of the target types, you have the opportunity to flexibly handle the error (e.g. send out to an error sink).","title":"Flink using multiple structures of data in java","body":"<p>In situations like this I normally use the SimpleStringSchema, then follow the source with a ProcessFunction where I parse the string, and use side outputs (one per each message type). The added benefit to this approach is that if the JSON isn't deserializable, or it doesn't properly map to any of the target types, you have the opportunity to flexibly handle the error (e.g. send out to an error sink).</p>\n"}],"owner":{"account_id":7935210,"reputation":21,"user_id":5991506,"display_name":"Abhinav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1675440080,"creation_date":1675343138,"question_id":75323626,"body_markdown":"I am reading data from kafka in Java to perform some processing in Apache Flink and sink the results.\r\n\r\nI have the kafka topic **topic_a** which has some data like {name: &quot;abc&quot;, age: 20} and some data like {pin: 111, number: 999999, address: &quot;some place&quot;}\r\n\r\nWhen I read the data from kafka using KafkaSource, I deserialize the records into a POJO which has the fields String name, int age with their respective getter and setter functions and constructor.\r\n\r\nWhen I run the flink code, the deserliazer works fine for {name: &quot;abc&quot;, age: 20}\r\n```\r\nKafkaSource&lt;AllDataPOJO&gt; kafkaAllAlertsSource = KafkaSource.&lt;AllAlertsPOJO&gt;builder()\r\n                .setBootstrapServers(bootstrapServers)\r\n                .setTopics(Arrays.asList(&quot;topic_a&quot;))\r\n                .setProperties(properties)\r\n                .setGroupId(allEventsGroupID)\r\n                .setStartingOffsets(OffsetsInitializer.earliest())\r\n                .setValueOnlyDeserializer(new AllDataDeserializationSchema())\r\n                .build();\r\n```\r\n```\r\nAllDataPOJO\r\nprivate String name;\r\nprivate int age;\r\n```\r\n\r\nThe code runs fine for **{name: &quot;abc&quot;, age: 20}**, but as soon as **{pin: 111, number: 999999, address: &quot;some place&quot;}**, it starts failing. \r\n\r\n**2 questions:**\r\n\r\n1. Is there any way that I can read such varying formats of messages and perform the flink operations. Depending on what kind of message comes, I wish to route it to a different kafka topic.?\r\n2. When I get **{name: &quot;abc&quot;, age: 20}**, it should go to topic **user_basic** and **{pin: 111, number: 999999, address: &quot;some place&quot;}** should go to topic ** user_details**\r\n\r\nHow can I achieve the above with just 1 flink java code?\r\n","title":"Flink using multiple structures of data in java","body":"<p>I am reading data from kafka in Java to perform some processing in Apache Flink and sink the results.</p>\n<p>I have the kafka topic <strong>topic_a</strong> which has some data like {name: &quot;abc&quot;, age: 20} and some data like {pin: 111, number: 999999, address: &quot;some place&quot;}</p>\n<p>When I read the data from kafka using KafkaSource, I deserialize the records into a POJO which has the fields String name, int age with their respective getter and setter functions and constructor.</p>\n<p>When I run the flink code, the deserliazer works fine for {name: &quot;abc&quot;, age: 20}</p>\n<pre><code>KafkaSource&lt;AllDataPOJO&gt; kafkaAllAlertsSource = KafkaSource.&lt;AllAlertsPOJO&gt;builder()\n                .setBootstrapServers(bootstrapServers)\n                .setTopics(Arrays.asList(&quot;topic_a&quot;))\n                .setProperties(properties)\n                .setGroupId(allEventsGroupID)\n                .setStartingOffsets(OffsetsInitializer.earliest())\n                .setValueOnlyDeserializer(new AllDataDeserializationSchema())\n                .build();\n</code></pre>\n<pre><code>AllDataPOJO\nprivate String name;\nprivate int age;\n</code></pre>\n<p>The code runs fine for <strong>{name: &quot;abc&quot;, age: 20}</strong>, but as soon as <strong>{pin: 111, number: 999999, address: &quot;some place&quot;}</strong>, it starts failing.</p>\n<p><strong>2 questions:</strong></p>\n<ol>\n<li>Is there any way that I can read such varying formats of messages and perform the flink operations. Depending on what kind of message comes, I wish to route it to a different kafka topic.?</li>\n<li>When I get <strong>{name: &quot;abc&quot;, age: 20}</strong>, it should go to topic <strong>user_basic</strong> and <strong>{pin: 111, number: 999999, address: &quot;some place&quot;}</strong> should go to topic ** user_details**</li>\n</ol>\n<p>How can I achieve the above with just 1 flink java code?</p>\n"},{"tags":["java","spring","spring-boot","repository","entity"],"comments":[{"owner":{"account_id":12473930,"reputation":338,"user_id":15491774,"display_name":"stylepatrick"},"score":0,"creation_date":1675437228,"post_id":75337506,"comment_id":132934930,"body_markdown":"The @Repository Annotation is not necessary on your EmployeeRepository. This will be managed automatically because you extend the CrudRepository.","body":"The @Repository Annotation is not necessary on your EmployeeRepository. This will be managed automatically because you extend the CrudRepository."},{"owner":{"account_id":26889406,"reputation":35,"user_id":20468426,"display_name":"Bhorah"},"score":0,"creation_date":1675437717,"post_id":75337506,"comment_id":132935096,"body_markdown":"Good to know, thank you ! However it does not solve the problem :(","body":"Good to know, thank you ! However it does not solve the problem :("},{"owner":{"account_id":12473930,"reputation":338,"user_id":15491774,"display_name":"stylepatrick"},"score":0,"creation_date":1675437902,"post_id":75337506,"comment_id":132935166,"body_markdown":"Have you tried to remove the @EntityScan? I would also try to remove the two hibernate dependency in your pom.","body":"Have you tried to remove the @EntityScan? I would also try to remove the two hibernate dependency in your pom."},{"owner":{"account_id":12473930,"reputation":338,"user_id":15491774,"display_name":"stylepatrick"},"score":0,"creation_date":1675438226,"post_id":75337506,"comment_id":132935308,"body_markdown":"I would also add following properties to you applicatipn.properties to tell spring boot your datasource: spring.datasource.url=jdbc:h2:mem:testdb\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=","body":"I would also add following properties to you applicatipn.properties to tell spring boot your datasource: spring.datasource.url=jdbc:h2:mem:testdb spring.datasource.driverClassName=org.h2.Driver spring.datasource.username=sa spring.datasource.password="}],"answers":[{"tags":[],"owner":{"account_id":22866153,"reputation":158,"user_id":17009760,"display_name":"Pioter88"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675440073,"creation_date":1675440073,"answer_id":75338201,"question_id":75337506,"body_markdown":"when using spring jpa dependency you dont need hibernate alone\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n            &lt;version&gt;6.1.5.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nYour imports in Employee come from \r\n```\r\njavax.persistence\r\n\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.Table;\r\n```\r\n\r\nchange it for \r\n```\r\nimport jakarta.persistence.*;\r\n```\r\n\r\nplease see  \r\n[javax vs jakarta in Spring](https://stackoverflow.com/questions/71179660/spring-boot-3-jakarta-and-javax)\r\n\r\nalso ``@EntityScan(&quot;com.openclassrooms.api.models&quot;)`` is unnecessary  \r\n\r\n","title":"BeanCreationException error creating Repository with Spring Boot - &quot;Not a managed type&quot; error","body":"<p>when using spring jpa dependency you dont need hibernate alone</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;6.1.5.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Your imports in Employee come from</p>\n<pre><code>javax.persistence\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n</code></pre>\n<p>change it for</p>\n<pre><code>import jakarta.persistence.*;\n</code></pre>\n<p>please see<br />\n<a href=\"https://stackoverflow.com/questions/71179660/spring-boot-3-jakarta-and-javax\">javax vs jakarta in Spring</a></p>\n<p>also <code>@EntityScan(&quot;com.openclassrooms.api.models&quot;)</code> is unnecessary</p>\n"}],"owner":{"account_id":26889406,"reputation":35,"user_id":20468426,"display_name":"Bhorah"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2208,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75338201,"answer_count":1,"score":1,"last_activity_date":1675440073,"creation_date":1675436579,"question_id":75337506,"body_markdown":"I am trying to learn Spring and most particularly Spring Boot, and I have made a set of classes, starting with a main, a model class and a repository class. However, when I try to start the main app, Spring does not boot and throws the following error :\r\n\r\n```\r\n\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.0.2)\r\n\r\n2023-02-03T15:45:58.473+01:00  INFO 28388 --- [           main] com.openclassrooms.api.ApiApplication    : Starting ApiApplication using Java 17.0.5 with PID 28388 (C:\\Users\\Bastien ROY\\OneDrive\\Projet Transversal\\api\\target\\classes started by Bastien ROY in C:\\Users\\Bastien ROY\\OneDrive\\Projet Transversal\\api)\r\n2023-02-03T15:45:58.477+01:00  INFO 28388 --- [           main] com.openclassrooms.api.ApiApplication    : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-02-03T15:45:59.506+01:00  INFO 28388 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9000 (http)\r\n2023-02-03T15:45:59.813+01:00  INFO 28388 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at &#39;/h2-console&#39;. Database available at &#39;jdbc:h2:mem:bca07d4f-a527-494b-9b3f-460ee65f30e9&#39;\r\n2023-02-03T15:46:01.019+01:00 ERROR 28388 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;employeeRepository&#39; defined in com.openclassrooms.api.repository.EmployeeRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Not a managed type: class com.openclassrooms.api.models.Employee\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915) ~[spring-context-6.0.4.jar:6.0.4]\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.4.jar:6.0.4]\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.2.jar:3.0.2]\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.2.jar:3.0.2]\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.2.jar:3.0.2]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.2.jar:3.0.2]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.2.jar:3.0.2]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.2.jar:3.0.2]\r\n        at com.openclassrooms.api.ApiApplication.main(ApiApplication.java:12) ~[classes/:na]\r\nCaused by: java.lang.IllegalArgumentException: Not a managed type: class com.openclassrooms.api.models.Employee\r\n        at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:181) ~[hibernate-core-6.1.5.Final.jar:6.1.5.Final]\r\n        at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:496) ~[hibernate-core-6.1.5.Final.jar:6.1.5.Final]\r\n        at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:99) ~[hibernate-core-6.1.5.Final.jar:6.1.5.Final]\r\n        at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.&lt;init&gt;(JpaMetamodelEntityInformation.java:77) ~[spring-data-jpa-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:81) ~[spring-data-jpa-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.0.1.jar:3.0.1]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        ... 16 common frames omitted\r\n```\r\n\r\nThis bug keeps on appearing, whatever correction I try to make to repair it.\r\n\r\nMy Entity class :\r\n\r\n```\r\npackage com.openclassrooms.api.models;\r\n\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.Table;\r\n\r\nimport lombok.Data;\r\n\r\n@Data\r\n@Entity\r\n@Table(name = &quot;employees&quot;)\r\npublic class Employee {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;first_name&quot;)\r\n    private String firstName;\r\n\r\n    @Column(name = &quot;last_name&quot;)\r\n    private String lastName;\r\n\r\n    private String mail;\r\n\r\n    private String password;\r\n\r\n}\r\n```\r\n\r\nMy repository class :\r\n\r\n```\r\n\r\npackage com.openclassrooms.api.repository;\r\n\r\nimport org.springframework.data.repository.CrudRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\nimport com.openclassrooms.api.models.Employee;\r\n\r\n@Repository\r\npublic interface EmployeeRepository extends CrudRepository&lt;Employee, Long&gt; {\r\n\r\n}\r\n```\r\n\r\nMy main class :\r\n\r\n```\r\npackage com.openclassrooms.api;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\r\n\r\n@SpringBootApplication\r\n@EntityScan(&quot;com.openclassrooms.api.models&quot;)\r\npublic class ApiApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(ApiApplication.class, args);\r\n\t\tSystem.out.println(&quot;Hello World !&quot;);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nMy dependencies in pom.xml :\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.openclassrooms&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;api&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;api&lt;/name&gt;\r\n\t&lt;description&gt;API with SpringBoot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n  \t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n  \t\t\t&lt;version&gt;6.1.5.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nMy project properties in application.properties :\r\n\r\n```\r\n#Global configuration\r\nspring.application.name=api\r\n\r\n#Tomcat configuration\r\nserver.port=9000\r\n\r\n#Log level configuration\r\nlogging.level.root=ERROR\r\nlogging.level.com.openclassrooms=INFO\r\nlogging.level.org.springframework.boot.autoconfigure.h2=INFO\r\nlogging.level.org.springframework.boot.web.embedded.tomcat=INFO\r\n\r\n#H2 Configuration\r\nspring.h2.console.enabled=true\r\n```\r\n\r\nIf you have any idea of where the problem could come from, I would be extremely thankful.","title":"BeanCreationException error creating Repository with Spring Boot - &quot;Not a managed type&quot; error","body":"<p>I am trying to learn Spring and most particularly Spring Boot, and I have made a set of classes, starting with a main, a model class and a repository class. However, when I try to start the main app, Spring does not boot and throws the following error :</p>\n<pre><code>\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.0.2)\n\n2023-02-03T15:45:58.473+01:00  INFO 28388 --- [           main] com.openclassrooms.api.ApiApplication    : Starting ApiApplication using Java 17.0.5 with PID 28388 (C:\\Users\\Bastien ROY\\OneDrive\\Projet Transversal\\api\\target\\classes started by Bastien ROY in C:\\Users\\Bastien ROY\\OneDrive\\Projet Transversal\\api)\n2023-02-03T15:45:58.477+01:00  INFO 28388 --- [           main] com.openclassrooms.api.ApiApplication    : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-02-03T15:45:59.506+01:00  INFO 28388 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9000 (http)\n2023-02-03T15:45:59.813+01:00  INFO 28388 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:bca07d4f-a527-494b-9b3f-460ee65f30e9'\n2023-02-03T15:46:01.019+01:00 ERROR 28388 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'employeeRepository' defined in com.openclassrooms.api.repository.EmployeeRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Not a managed type: class com.openclassrooms.api.models.Employee\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915) ~[spring-context-6.0.4.jar:6.0.4]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.4.jar:6.0.4]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.2.jar:3.0.2]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.2.jar:3.0.2]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.2.jar:3.0.2]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.2.jar:3.0.2]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.2.jar:3.0.2]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.2.jar:3.0.2]\n        at com.openclassrooms.api.ApiApplication.main(ApiApplication.java:12) ~[classes/:na]\nCaused by: java.lang.IllegalArgumentException: Not a managed type: class com.openclassrooms.api.models.Employee\n        at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:181) ~[hibernate-core-6.1.5.Final.jar:6.1.5.Final]\n        at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:496) ~[hibernate-core-6.1.5.Final.jar:6.1.5.Final]\n        at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:99) ~[hibernate-core-6.1.5.Final.jar:6.1.5.Final]\n        at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.&lt;init&gt;(JpaMetamodelEntityInformation.java:77) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n        at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:81) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n        at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.0.1.jar:3.0.1]\n        at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.0.1.jar:3.0.1]\n        at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.0.1.jar:3.0.1]\n        at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.0.1.jar:3.0.1]\n        at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.0.1.jar:3.0.1]\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747) ~[spring-beans-6.0.4.jar:6.0.4]\n        ... 16 common frames omitted\n</code></pre>\n<p>This bug keeps on appearing, whatever correction I try to make to repair it.</p>\n<p>My Entity class :</p>\n<pre><code>package com.openclassrooms.api.models;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\nimport lombok.Data;\n\n@Data\n@Entity\n@Table(name = &quot;employees&quot;)\npublic class Employee {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;first_name&quot;)\n    private String firstName;\n\n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n\n    private String mail;\n\n    private String password;\n\n}\n</code></pre>\n<p>My repository class :</p>\n<pre><code>\npackage com.openclassrooms.api.repository;\n\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\n\nimport com.openclassrooms.api.models.Employee;\n\n@Repository\npublic interface EmployeeRepository extends CrudRepository&lt;Employee, Long&gt; {\n\n}\n</code></pre>\n<p>My main class :</p>\n<pre><code>package com.openclassrooms.api;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\n\n@SpringBootApplication\n@EntityScan(&quot;com.openclassrooms.api.models&quot;)\npublic class ApiApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ApiApplication.class, args);\n        System.out.println(&quot;Hello World !&quot;);\n    }\n\n}\n</code></pre>\n<p>My dependencies in pom.xml :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.openclassrooms&lt;/groupId&gt;\n    &lt;artifactId&gt;api&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;api&lt;/name&gt;\n    &lt;description&gt;API with SpringBoot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;6.1.5.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>My project properties in application.properties :</p>\n<pre><code>#Global configuration\nspring.application.name=api\n\n#Tomcat configuration\nserver.port=9000\n\n#Log level configuration\nlogging.level.root=ERROR\nlogging.level.com.openclassrooms=INFO\nlogging.level.org.springframework.boot.autoconfigure.h2=INFO\nlogging.level.org.springframework.boot.web.embedded.tomcat=INFO\n\n#H2 Configuration\nspring.h2.console.enabled=true\n</code></pre>\n<p>If you have any idea of where the problem could come from, I would be extremely thankful.</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","model"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1675452278,"post_id":75338199,"comment_id":132939669,"body_markdown":"Your first attempt is fine, but you mapped the ExperimentDetails instance as an entity and marked externalId as THE unique identifier when it is certainly not unique. Since multiple rows of your query returned the same externalId, JPA returns the same instance for those rows - that is the point of object identity within entities. So you don&#39;t really want a managed entity for this. If you map the underlying tables 1:1 with entity classes, you can easily do something in JPQL","body":"Your first attempt is fine, but you mapped the ExperimentDetails instance as an entity and marked externalId as THE unique identifier when it is certainly not unique. Since multiple rows of your query returned the same externalId, JPA returns the same instance for those rows - that is the point of object identity within entities. So you don&#39;t really want a managed entity for this. If you map the underlying tables 1:1 with entity classes, you can easily do something in JPQL"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1675452331,"post_id":75338199,"comment_id":132939684,"body_markdown":"something like like JPQL query &quot;&quot;Select package.ExperimentDetails(ce.externalId, ce.isid, ji.name.. ) from JurisdictionInfo ji join ji.substance s join s.controlledEvent ce on ce.callingSystemId = 402 AND ce.externalId = :externalId&quot;","body":"something like like JPQL query &quot;&quot;Select package.ExperimentDetails(ce.externalId, ce.isid, ji.name.. ) from JurisdictionInfo ji join ji.substance s join s.controlledEvent ce on ce.callingSystemId = 402 AND ce.externalId = :externalId&quot;"},{"owner":{"account_id":5084578,"reputation":399,"user_id":4079729,"display_name":"Altaf"},"score":0,"creation_date":1675453921,"post_id":75338199,"comment_id":132940024,"body_markdown":"Thanks @Chris. The `externalId` is unique, but `ExperimentDetails` can contain many compounds, so it&#39;s the way my query is written, I was just returning the `externalId` and `ISID`, so I can map it using a `HashMap` and return an API call in my service layer.  If I understand you correctly you&#39;re saying take out `@Embeddable` make `Compound` table an entity class and annotate with `@ONETOMANY` bc each experiment can have more than one compound, and then instead of Native Query use a JPQL query, I am not familiar with JPQL, but I&#39;ll research it. Is that correct?","body":"Thanks @Chris. The <code>externalId</code> is unique, but <code>ExperimentDetails</code> can contain many compounds, so it&#39;s the way my query is written, I was just returning the <code>externalId</code> and <code>ISID</code>, so I can map it using a <code>HashMap</code> and return an API call in my service layer.  If I understand you correctly you&#39;re saying take out <code>@Embeddable</code> make <code>Compound</code> table an entity class and annotate with <code>@ONETOMANY</code> bc each experiment can have more than one compound, and then instead of Native Query use a JPQL query, I am not familiar with JPQL, but I&#39;ll research it. Is that correct?"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1675457872,"post_id":75338199,"comment_id":132940959,"body_markdown":"No, I&#39;ve suggested you make 3 entities, one for each table in your Native SQL query, and map them as they look in the database. JPQL is pretty similar to SQL, the difference being it is more DB agnostic and based on your entity/java objects, not table constructs. It isn&#39;t necessary to be able to build the scalar results from the Native SQL query into a pojo object as I&#39;ve shown in the JPQL query, but it is the easiest  to show and describe - I don&#39;t know how to get Spring to use a Result set mapping but it is possible","body":"No, I&#39;ve suggested you make 3 entities, one for each table in your Native SQL query, and map them as they look in the database. JPQL is pretty similar to SQL, the difference being it is more DB agnostic and based on your entity/java objects, not table constructs. It isn&#39;t necessary to be able to build the scalar results from the Native SQL query into a pojo object as I&#39;ve shown in the JPQL query, but it is the easiest  to show and describe - I don&#39;t know how to get Spring to use a Result set mapping but it is possible"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1675457968,"post_id":75338199,"comment_id":132940983,"body_markdown":"see https://stackoverflow.com/a/13013323/496099 , https://stackoverflow.com/questions/13012584/jpa-how-to-convert-a-native-query-result-set-to-pojo-class-collection and https://thorben-janssen.com/spring-data-jpa-dto-native-queries/","body":"see <a href=\"https://stackoverflow.com/a/13013323/496099\">stackoverflow.com/a/13013323/496099</a> , <a href=\"https://stackoverflow.com/questions/13012584/jpa-how-to-convert-a-native-query-result-set-to-pojo-class-collection\" title=\"jpa how to convert a native query result set to pojo class collection\">stackoverflow.com/questions/13012584/&hellip;</a> and <a href=\"https://thorben-janssen.com/spring-data-jpa-dto-native-queries/\" rel=\"nofollow noreferrer\">thorben-janssen.com/spring-data-jpa-dto-native-queries</a>"},{"owner":{"account_id":5084578,"reputation":399,"user_id":4079729,"display_name":"Altaf"},"score":0,"creation_date":1675490862,"post_id":75338199,"comment_id":132944683,"body_markdown":"used the thorben-janssen article to solve my issue thanks","body":"used the thorben-janssen article to solve my issue thanks"}],"owner":{"account_id":5084578,"reputation":399,"user_id":4079729,"display_name":"Altaf"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675440046,"creation_date":1675440046,"question_id":75338199,"body_markdown":"I have this sql query I am running in my database:\r\n&gt; Select ce.external_id, ce.isid, ji.name, ji.controlled_status, ji.jurisdiction_name, ji.result_comments, ji.code_name, s.corporate_id\r\nfrom cs_jurisdiction_information ji\r\nJoin substance s on ji.substance_id = s.id\r\nJoin controlled_event ce on ce.id = s.controlled_event_id and ce.calling_system_id = 402 \r\nand ce.external_id = &#39;EXP-raoan-000011774&#39;;\r\n\r\n[![Results][1]][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JdNMd.png\r\n\r\nWhich produces the above results.  Everything following the first two fields are compounds that I would like to map to my model, so when I run this query from my repository:\r\n\r\n```\r\npublic interface ExperimentDetailsRepository extends JpaRepository&lt;ExperimentDetails, String&gt; {\r\n\r\n    @Query(value = &quot;Select ce.external_id, ce.isid, ji.name, ji.controlled_status, &quot; +\r\n    &quot;ji.jurisdiction_name, ji.result_comments,&quot; +\r\n    &quot;ji.code_name, s.corporate_id &quot; +\r\n    &quot;from cs_jurisdiction_information ji &quot; +\r\n    &quot;Join substance s on ji.substance_id = s.id &quot; +\r\n    &quot;Join controlled_event ce on ce.id = s.controlled_event_id &quot; +\r\n    &quot;and ce.calling_system_id = 402 &quot; +\r\n    &quot;and ce.external_id = :externalId&quot;, nativeQuery = true)\r\n    List&lt;ExperimentDetails&gt; findByExternalId(@Param(&quot;externalId&quot;) String externalId);\r\n}\r\n```\r\n\r\nI first tried this model:\r\n\r\n```\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity\r\npublic class ExperimentDetails {\r\n    @Id\r\n    private String externalId;\r\n    private String isid;\r\n    private String name;\r\n    private String controlledStatus;\r\n    private String jurisdictionName;\r\n    private String resultComments;\r\n    private String codeName;\r\n    private String corporateId;\r\n}\r\n```\r\nCalling `findByExternalId(externalId)` in my service class produces the incorrect results, the method returns 3 objects which is fine, but only maps the first compound Cathine, and duplicates the result for the next two objects, which makes sense because my structure here is flat, when it actually should be an array for anything after `name` attribute.\r\n\r\nSo I tried using `@Embeddable` annotation to modify the model to the correct structure as below:\r\n\r\n```\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity\r\npublic class ExperimentDetails {\r\n    @Id\r\n    private String externalId;\r\n    private String isid;\r\n\r\n    @Embedded\r\n    @AttributeOverrides({\r\n        @AttributeOverride(name = &quot;name&quot;, column = @Column(name = &quot;name&quot;)),\r\n        @AttributeOverride(name = &quot;controlledStatus&quot;, column = @Column(name = &quot;controlled_status&quot;)),\r\n        @AttributeOverride(name = &quot;jurisdictionName&quot;, column = @Column(name = &quot;jurisdiction_name&quot;)),\r\n        @AttributeOverride(name = &quot;resultComments&quot;, column = @Column(name = &quot;result_comments&quot;)),\r\n        @AttributeOverride(name = &quot;codeName&quot;, column = @Column(name = &quot;code_name&quot;)),\r\n        @AttributeOverride(name = &quot;corporateId&quot;, column = @Column(name = &quot;corporate_id&quot;)),\r\n    })\r\n    private Compound compounds;\r\n}\r\n```\r\n\r\nand I created the Embeddable class:\r\n\r\n```\r\n@Embeddable\r\n@Data\r\npublic class Compound {\r\n    private String name;\r\n    private String controlledStatus;\r\n    private String jurisdictionName;\r\n    private String resultComments;\r\n    private String codeName;\r\n    private String corporateId;\r\n}\r\n```\r\n\r\nThis duplicates the same error in results as the previous model, which I then realized still doesn&#39;t produce the array of compounds, so I modified the model again:\r\n\r\n```\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity\r\npublic class ExperimentDetails {\r\n    @Id\r\n    private String externalId;\r\n    private String isid;\r\n\r\n    @Embedded\r\n    @AttributeOverrides({\r\n        @AttributeOverride(name = &quot;name&quot;, column = @Column(name = &quot;name&quot;)),\r\n        @AttributeOverride(name = &quot;controlledStatus&quot;, column = @Column(name = &quot;controlled_status&quot;)),\r\n        @AttributeOverride(name = &quot;jurisdictionName&quot;, column = @Column(name = &quot;jurisdiction_name&quot;)),\r\n        @AttributeOverride(name = &quot;resultComments&quot;, column = @Column(name = &quot;result_comments&quot;)),\r\n        @AttributeOverride(name = &quot;codeName&quot;, column = @Column(name = &quot;code_name&quot;)),\r\n        @AttributeOverride(name = &quot;corporateId&quot;, column = @Column(name = &quot;corporate_id&quot;)),\r\n    })\r\n    private List&lt;Compound&gt; compounds;\r\n}\r\n```\r\n\r\nThis time making `Compound` a list. However, running `findByExternalId(externalId)` now produces null for the embedded class, so no compounds are actually mapped.\r\n\r\nHow can I map my model correctly to produce the correct results for my query?","title":"How to Map Model correctly to a native query in my repository","body":"<p>I have this sql query I am running in my database:</p>\n<blockquote>\n<p>Select ce.external_id, ce.isid, ji.name, ji.controlled_status, ji.jurisdiction_name, ji.result_comments, ji.code_name, s.corporate_id\nfrom cs_jurisdiction_information ji\nJoin substance s on ji.substance_id = s.id\nJoin controlled_event ce on ce.id = s.controlled_event_id and ce.calling_system_id = 402\nand ce.external_id = 'EXP-raoan-000011774';</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/JdNMd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JdNMd.png\" alt=\"Results\" /></a></p>\n<p>Which produces the above results.  Everything following the first two fields are compounds that I would like to map to my model, so when I run this query from my repository:</p>\n<pre><code>public interface ExperimentDetailsRepository extends JpaRepository&lt;ExperimentDetails, String&gt; {\n\n    @Query(value = &quot;Select ce.external_id, ce.isid, ji.name, ji.controlled_status, &quot; +\n    &quot;ji.jurisdiction_name, ji.result_comments,&quot; +\n    &quot;ji.code_name, s.corporate_id &quot; +\n    &quot;from cs_jurisdiction_information ji &quot; +\n    &quot;Join substance s on ji.substance_id = s.id &quot; +\n    &quot;Join controlled_event ce on ce.id = s.controlled_event_id &quot; +\n    &quot;and ce.calling_system_id = 402 &quot; +\n    &quot;and ce.external_id = :externalId&quot;, nativeQuery = true)\n    List&lt;ExperimentDetails&gt; findByExternalId(@Param(&quot;externalId&quot;) String externalId);\n}\n</code></pre>\n<p>I first tried this model:</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\npublic class ExperimentDetails {\n    @Id\n    private String externalId;\n    private String isid;\n    private String name;\n    private String controlledStatus;\n    private String jurisdictionName;\n    private String resultComments;\n    private String codeName;\n    private String corporateId;\n}\n</code></pre>\n<p>Calling <code>findByExternalId(externalId)</code> in my service class produces the incorrect results, the method returns 3 objects which is fine, but only maps the first compound Cathine, and duplicates the result for the next two objects, which makes sense because my structure here is flat, when it actually should be an array for anything after <code>name</code> attribute.</p>\n<p>So I tried using <code>@Embeddable</code> annotation to modify the model to the correct structure as below:</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\npublic class ExperimentDetails {\n    @Id\n    private String externalId;\n    private String isid;\n\n    @Embedded\n    @AttributeOverrides({\n        @AttributeOverride(name = &quot;name&quot;, column = @Column(name = &quot;name&quot;)),\n        @AttributeOverride(name = &quot;controlledStatus&quot;, column = @Column(name = &quot;controlled_status&quot;)),\n        @AttributeOverride(name = &quot;jurisdictionName&quot;, column = @Column(name = &quot;jurisdiction_name&quot;)),\n        @AttributeOverride(name = &quot;resultComments&quot;, column = @Column(name = &quot;result_comments&quot;)),\n        @AttributeOverride(name = &quot;codeName&quot;, column = @Column(name = &quot;code_name&quot;)),\n        @AttributeOverride(name = &quot;corporateId&quot;, column = @Column(name = &quot;corporate_id&quot;)),\n    })\n    private Compound compounds;\n}\n</code></pre>\n<p>and I created the Embeddable class:</p>\n<pre><code>@Embeddable\n@Data\npublic class Compound {\n    private String name;\n    private String controlledStatus;\n    private String jurisdictionName;\n    private String resultComments;\n    private String codeName;\n    private String corporateId;\n}\n</code></pre>\n<p>This duplicates the same error in results as the previous model, which I then realized still doesn't produce the array of compounds, so I modified the model again:</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\npublic class ExperimentDetails {\n    @Id\n    private String externalId;\n    private String isid;\n\n    @Embedded\n    @AttributeOverrides({\n        @AttributeOverride(name = &quot;name&quot;, column = @Column(name = &quot;name&quot;)),\n        @AttributeOverride(name = &quot;controlledStatus&quot;, column = @Column(name = &quot;controlled_status&quot;)),\n        @AttributeOverride(name = &quot;jurisdictionName&quot;, column = @Column(name = &quot;jurisdiction_name&quot;)),\n        @AttributeOverride(name = &quot;resultComments&quot;, column = @Column(name = &quot;result_comments&quot;)),\n        @AttributeOverride(name = &quot;codeName&quot;, column = @Column(name = &quot;code_name&quot;)),\n        @AttributeOverride(name = &quot;corporateId&quot;, column = @Column(name = &quot;corporate_id&quot;)),\n    })\n    private List&lt;Compound&gt; compounds;\n}\n</code></pre>\n<p>This time making <code>Compound</code> a list. However, running <code>findByExternalId(externalId)</code> now produces null for the embedded class, so no compounds are actually mapped.</p>\n<p>How can I map my model correctly to produce the correct results for my query?</p>\n"},{"tags":["java","android","android-service","foreground-service"],"owner":{"account_id":23786916,"reputation":26,"user_id":17926797,"display_name":"Max"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675439112,"creation_date":1675359300,"question_id":75326916,"body_markdown":"My Android application (targeting API 33) invokes a foreground service when the app is launched for the first time. The service is used for sending a &#39;heartbeat&#39; / status to an API which writes the timestamp of the last heartbeat / status update to a database.\r\n\r\nStarting the foreground service in the &#39;MainActivity&#39;:\r\n\r\n```\r\n@Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.login_activity);\r\n        if(!clientServiceRunning()) {\r\n            Intent serviceIntent = new Intent(this, ClientService.class);\r\n            this.startForegroundService(serviceIntent);\r\n        }\r\n        authenticateUser();\r\n        checkNetworkState();\r\n        storeTerminalId(TERMINAL_ID);\r\n    }\r\n```\r\n\r\nCode of the foreground service class:\r\n\r\n```\r\npublic class ClientService extends Service {\r\n\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n        throw new UnsupportedOperationException(&quot;Not yet implemented&quot;);\r\n    }\r\n\r\n    public ClientService() {\r\n        super();\r\n    }\r\n\r\n    @Override\r\n    public int onStartCommand(Intent intent, int flags, int startId) {\r\n\r\n        // Thread that sends the heartbeat to the API\r\n        new Thread(\r\n                new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        while (true) {\r\n                            Log.d(&quot;Client Service&quot;, &quot;Service is running&quot;);\r\n                            // Sends request to API using Androids Volley library\r\n                            sendHeartbeat();\r\n                            try {\r\n                                // Only send heartbeat every 2 minutes\r\n                                Thread.sleep(120000);\r\n                            } catch (InterruptedException ex) {\r\n                                ex.printStackTrace();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n        ).start();\r\n\r\n        new Thread(\r\n            new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    // Some other task\r\n                }\r\n            }\r\n        ).start();\r\n\r\n        // Necessary notification details for foreground service\r\n        final String CHANNEL_ID = &quot;Client Service ID&quot;;\r\n        NotificationChannel notificationChannel = new NotificationChannel(\r\n                CHANNEL_ID,\r\n                CHANNEL_ID,\r\n                NotificationManager.IMPORTANCE_LOW\r\n        );\r\n\r\n        getSystemService(NotificationManager.class).createNotificationChannel(notificationChannel);\r\n        Notification.Builder serviceNotification = new Notification.Builder(this, CHANNEL_ID)\r\n                .setContentText(&quot;Client Service running the background&quot;)\r\n                .setSmallIcon(R.drawable.launcher_foreground_icon);\r\n\r\n        startForeground(1, serviceNotification.build());\r\n        return super.onStartCommand(intent, flags, startId);\r\n    }\r\n}\r\n```\r\n\r\nMethod that makes the API heartbeat request:\r\n(Note that JSONRequestNoResponse is a custom volley response class)\r\n\r\n```\r\nprivate void sendHeartbeat() {\r\n        try {\r\n            RequestQueue requestQueue = Volley.newRequestQueue(this);\r\n            String URL = &quot;https://api.myapplication.com/device/heartbeat&quot;;\r\n\r\n            JSONObject jsonBody = new JSONObject();\r\n            jsonBody.put(&quot;terminalId&quot;, String.valueOf(terminalId));\r\n            jsonBody.put(&quot;scannerConnectionState&quot;, String.valueOf(isScannerConnected));\r\n\r\n            JSONRequestNoResponse jsonRequest =  new JSONRequestNoResponse(Request.Method.PUT, URL, jsonBody,\r\n                    new Response.Listener&lt;&gt;() {\r\n                        @Override\r\n                        public void onResponse(JSONObject response) {\r\n                            Log.d(&quot;Volley&quot;, &quot;API: Heartbeat sent&quot;);\r\n                        }\r\n                    },\r\n                    new Response.ErrorListener() {\r\n                        @Override\r\n                        public void onErrorResponse(VolleyError error) {\r\n                            Log.w(&quot;Volley ERROR&quot;, &quot;Service - Error Response&quot;);\r\n                        }\r\n                    }\r\n            );\r\n\r\n            requestQueue.add(jsonRequest);\r\n\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n\r\n\r\nWhen debugging and checking the Logcat output in Android Studio the `Log.d()` messages are displayed and I can see that in my database, the timestamp is renewed every two minutes since the service calls the API to initiate a this database update. The service also keeps running when the application is closed or when my device goes to sleep - as expected from a foreground service.\r\n\r\nNow to my problem: \r\nThe service and the hence calling the API only works when my test device is connected to Android Studio. (The device and my PC are connected via a USB C cable). As soon as I disconnect the device from my PC, the service keeps running but the timestamp in the database is not updated every two minutes anymore. \r\n\r\nWhen I reconnect my device to my PC and open Android Studio, the Logcat messages (&quot;Client Service&quot;, &quot;Service is running&quot;) resume and also the timestamp in the DB keeps updating regularly again. \r\n\r\nSo why does the service only really work when it is connected to a PC/Android Studio. I find this to be very peculiar.","title":"Android Service Thread only runs when connected to Android Studio","body":"<p>My Android application (targeting API 33) invokes a foreground service when the app is launched for the first time. The service is used for sending a 'heartbeat' / status to an API which writes the timestamp of the last heartbeat / status update to a database.</p>\n<p>Starting the foreground service in the 'MainActivity':</p>\n<pre><code>@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.login_activity);\n        if(!clientServiceRunning()) {\n            Intent serviceIntent = new Intent(this, ClientService.class);\n            this.startForegroundService(serviceIntent);\n        }\n        authenticateUser();\n        checkNetworkState();\n        storeTerminalId(TERMINAL_ID);\n    }\n</code></pre>\n<p>Code of the foreground service class:</p>\n<pre><code>public class ClientService extends Service {\n\n    @Override\n    public IBinder onBind(Intent intent) {\n        throw new UnsupportedOperationException(&quot;Not yet implemented&quot;);\n    }\n\n    public ClientService() {\n        super();\n    }\n\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n\n        // Thread that sends the heartbeat to the API\n        new Thread(\n                new Runnable() {\n                    @Override\n                    public void run() {\n                        while (true) {\n                            Log.d(&quot;Client Service&quot;, &quot;Service is running&quot;);\n                            // Sends request to API using Androids Volley library\n                            sendHeartbeat();\n                            try {\n                                // Only send heartbeat every 2 minutes\n                                Thread.sleep(120000);\n                            } catch (InterruptedException ex) {\n                                ex.printStackTrace();\n                            }\n                        }\n                    }\n                }\n        ).start();\n\n        new Thread(\n            new Runnable() {\n                @Override\n                public void run() {\n                    // Some other task\n                }\n            }\n        ).start();\n\n        // Necessary notification details for foreground service\n        final String CHANNEL_ID = &quot;Client Service ID&quot;;\n        NotificationChannel notificationChannel = new NotificationChannel(\n                CHANNEL_ID,\n                CHANNEL_ID,\n                NotificationManager.IMPORTANCE_LOW\n        );\n\n        getSystemService(NotificationManager.class).createNotificationChannel(notificationChannel);\n        Notification.Builder serviceNotification = new Notification.Builder(this, CHANNEL_ID)\n                .setContentText(&quot;Client Service running the background&quot;)\n                .setSmallIcon(R.drawable.launcher_foreground_icon);\n\n        startForeground(1, serviceNotification.build());\n        return super.onStartCommand(intent, flags, startId);\n    }\n}\n</code></pre>\n<p>Method that makes the API heartbeat request:\n(Note that JSONRequestNoResponse is a custom volley response class)</p>\n<pre><code>private void sendHeartbeat() {\n        try {\n            RequestQueue requestQueue = Volley.newRequestQueue(this);\n            String URL = &quot;https://api.myapplication.com/device/heartbeat&quot;;\n\n            JSONObject jsonBody = new JSONObject();\n            jsonBody.put(&quot;terminalId&quot;, String.valueOf(terminalId));\n            jsonBody.put(&quot;scannerConnectionState&quot;, String.valueOf(isScannerConnected));\n\n            JSONRequestNoResponse jsonRequest =  new JSONRequestNoResponse(Request.Method.PUT, URL, jsonBody,\n                    new Response.Listener&lt;&gt;() {\n                        @Override\n                        public void onResponse(JSONObject response) {\n                            Log.d(&quot;Volley&quot;, &quot;API: Heartbeat sent&quot;);\n                        }\n                    },\n                    new Response.ErrorListener() {\n                        @Override\n                        public void onErrorResponse(VolleyError error) {\n                            Log.w(&quot;Volley ERROR&quot;, &quot;Service - Error Response&quot;);\n                        }\n                    }\n            );\n\n            requestQueue.add(jsonRequest);\n\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>When debugging and checking the Logcat output in Android Studio the <code>Log.d()</code> messages are displayed and I can see that in my database, the timestamp is renewed every two minutes since the service calls the API to initiate a this database update. The service also keeps running when the application is closed or when my device goes to sleep - as expected from a foreground service.</p>\n<p>Now to my problem:\nThe service and the hence calling the API only works when my test device is connected to Android Studio. (The device and my PC are connected via a USB C cable). As soon as I disconnect the device from my PC, the service keeps running but the timestamp in the database is not updated every two minutes anymore.</p>\n<p>When I reconnect my device to my PC and open Android Studio, the Logcat messages (&quot;Client Service&quot;, &quot;Service is running&quot;) resume and also the timestamp in the DB keeps updating regularly again.</p>\n<p>So why does the service only really work when it is connected to a PC/Android Studio. I find this to be very peculiar.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1675416057,"post_id":75331682,"comment_id":132928417,"body_markdown":"[mcve] please ..","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please .."},{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":0,"creation_date":1675436159,"post_id":75331682,"comment_id":132934581,"body_markdown":"As @kleopatra has noted, there&#39;s not enough code here for a real answer.  I&#39;m going to guess, though, that it&#39;s not the MouseEvent that being missed, but the fact that you just have one ScaleTransition, it takes 100ms, and it&#39;s already running when the mouse exits.  So it doesn&#39;t run again.  You could change the setByX/setByY to setToX/setToY and use values of 1.75 and 1.00 which would allow you to cancel the running transition and then restart it with new parameters.  Alternatively, you could create a new transition each time and figure out how to queue them up.","body":"As @kleopatra has noted, there&#39;s not enough code here for a real answer.  I&#39;m going to guess, though, that it&#39;s not the MouseEvent that being missed, but the fact that you just have one ScaleTransition, it takes 100ms, and it&#39;s already running when the mouse exits.  So it doesn&#39;t run again.  You could change the setByX/setByY to setToX/setToY and use values of 1.75 and 1.00 which would allow you to cancel the running transition and then restart it with new parameters.  Alternatively, you could create a new transition each time and figure out how to queue them up."}],"answers":[{"tags":[],"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675438968,"creation_date":1675438968,"answer_id":75338006,"question_id":75331682,"body_markdown":"It&#39;s not the MouseExited that&#39;s being missed, it&#39;s the in progress transitions that cause the problem.\r\n\r\nTwo things need to be done.  First, the ScaleTransition has be set to absolutes targets, so setToX() not setByX().  Second, change the play() to playFromStart().  Like so...\r\n\r\n    class MouseOverExample : Application() {\r\n       override fun start(stage: Stage) {\r\n          stage.scene = Scene(createContent())\r\n          stage.show()\r\n       }\r\n    \r\n       private fun createContent(): Region = HBox(40.0).apply {\r\n          children += listOf(animatedPane(100.0), animatedPane(500.0), animatedPane(1200.0))\r\n          padding = Insets(40.0)\r\n       }\r\n    \r\n       private fun animatedPane(transitionDuration: Double): Region = StackPane().apply {\r\n          children += Label(&quot;H&quot;).apply { style = &quot;-fx-font-size: 40px;&quot; }\r\n          style = &quot;-fx-border-color: blue; -fx-border-width: 5px;&quot;\r\n          padding = Insets(20.0)\r\n          val transition: ScaleTransition = ScaleTransition().also {\r\n             it.node = this\r\n             it.duration = Duration(transitionDuration)\r\n          }\r\n          onMouseEntered = EventHandler {\r\n             with(transition) {\r\n                toX = 1.5\r\n                toY = 1.5\r\n                playFromStart()\r\n             }\r\n          }\r\n          onMouseExited = EventHandler {\r\n             with(transition) {\r\n                toX = 1.0\r\n                toY = 1.0\r\n                playFromStart()\r\n             }\r\n          }\r\n       }\r\n    }\r\n    \r\n    fun main() {\r\n       Application.launch(MouseOverExample::class.java)\r\n    }\r\n\r\nThis is Kotlin, but it should be easy enough to figure out. \r\n\r\nThis gives three Panes, each with a transition associated with it, and the durations are all different so that you can see how mouse speed has an impact. \r\n\r\nAt 100ms, a partial grow followed by a shrink looks just fine.  At 1200ms, if the mouse exits and the grow transition stops after, say, 100ms then it will still take 1200ms to shrink back to the original size, which is kind of goofy.  But in every case the Pane goes back to its original size no matter how fast you sweep the mouse through it.","title":"Is there a better method than onMouseExited that detects when it exits no matter how fast it moves?","body":"<p>It's not the MouseExited that's being missed, it's the in progress transitions that cause the problem.</p>\n<p>Two things need to be done.  First, the ScaleTransition has be set to absolutes targets, so setToX() not setByX().  Second, change the play() to playFromStart().  Like so...</p>\n<pre><code>class MouseOverExample : Application() {\n   override fun start(stage: Stage) {\n      stage.scene = Scene(createContent())\n      stage.show()\n   }\n\n   private fun createContent(): Region = HBox(40.0).apply {\n      children += listOf(animatedPane(100.0), animatedPane(500.0), animatedPane(1200.0))\n      padding = Insets(40.0)\n   }\n\n   private fun animatedPane(transitionDuration: Double): Region = StackPane().apply {\n      children += Label(&quot;H&quot;).apply { style = &quot;-fx-font-size: 40px;&quot; }\n      style = &quot;-fx-border-color: blue; -fx-border-width: 5px;&quot;\n      padding = Insets(20.0)\n      val transition: ScaleTransition = ScaleTransition().also {\n         it.node = this\n         it.duration = Duration(transitionDuration)\n      }\n      onMouseEntered = EventHandler {\n         with(transition) {\n            toX = 1.5\n            toY = 1.5\n            playFromStart()\n         }\n      }\n      onMouseExited = EventHandler {\n         with(transition) {\n            toX = 1.0\n            toY = 1.0\n            playFromStart()\n         }\n      }\n   }\n}\n\nfun main() {\n   Application.launch(MouseOverExample::class.java)\n}\n</code></pre>\n<p>This is Kotlin, but it should be easy enough to figure out.</p>\n<p>This gives three Panes, each with a transition associated with it, and the durations are all different so that you can see how mouse speed has an impact.</p>\n<p>At 100ms, a partial grow followed by a shrink looks just fine.  At 1200ms, if the mouse exits and the grow transition stops after, say, 100ms then it will still take 1200ms to shrink back to the original size, which is kind of goofy.  But in every case the Pane goes back to its original size no matter how fast you sweep the mouse through it.</p>\n"}],"owner":{"account_id":27691360,"reputation":13,"user_id":21137969,"display_name":"Crynda"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75338006,"answer_count":1,"score":0,"last_activity_date":1675438968,"creation_date":1675400229,"question_id":75331682,"body_markdown":"Can someone tell me how I can do so that an animation is made in a pane when the mouse is over said pane and make another when it is the opposite? I tried using the onMouseEntered and onMouseExited methods, with the first one there was no problem, however if we remove the mouse very quickly or abruptly, the program will not detect the exit of the mouse and therefore the animation will not be executed, can someone help me to solve this bug? please\r\n\r\nfirst add 2 methods to an events from the scene builder for the pane, these are said methods\r\n\r\n```\r\npublic void scale1 () {\r\n\t\tdouble currentScaleX = pane1.getScaleX();\r\n\t\tdouble currentScaleY = pane1.getScaleY();\r\n\t\t\r\n\t\tif(currentScaleX ==1.0 &amp;&amp; currentScaleY ==1.0) {\r\n\t\t\r\n\t\t\tscale.setNode(pane1);\r\n\t\t\tscale.setDuration(Duration.millis(100));\r\n\t\t\tscale.setByX(0.75);\r\n\t\t\tscale.setByY(0.75);\r\n\t\t\tscale.play();\r\n\t\t\t\r\n\t\t}\t\r\n\t}\r\n\r\npublic void scale1Re () {\r\n\t\tdouble currentScaleX = pane1.getScaleX();\r\n\t\tdouble currentScaleY = pane1.getScaleY();\r\n\r\n\t\tif(currentScaleX &gt;1.0 &amp;&amp; currentScaleY &gt;1.0) {\r\n\t\t\tscale.setNode(pane1);\r\n\t\t\tscale.setDuration(Duration.millis(100));\r\n\t\t\tscale.setByX(-0.75);\r\n\t\t\tscale.setByY(-0.75);\r\n\t\t\tscale.play();\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n```\r\nHowever, when executed it works, but if we move the mouse very quickly, it will not detect the change and sometimes it will only execute the first method[It is not seen in the screenshot, but my mouse is out of the pane](https://i.stack.imgur.com/HH0kd.png)\r\n\r\nI even tried to make a mouselistener class in my controller class so that it detects when the mouse is out of the pane or something and automatically executes the second method, but I think I did it wrong\r\n\r\n```\r\n@Override\r\n\tpublic void initialize(URL arg0, ResourceBundle arg1) {\r\n\t\tpane1.setOnMouseExited(new EventHandler&lt;MouseEvent&gt;() {\r\n\t\t    @Override\r\n\t\t    public void handle(MouseEvent mouseEvent) {\r\n\t\t        Bounds bounds = principalPane.getBoundsInParent();\r\n\t\t        if (bounds.contains(mouseEvent.getSceneX(), mouseEvent.getSceneY())) {\r\n\t\t        \tscale1Re();\r\n\t\t        }\r\n\t\t    }\r\n\t\t});\r\n\r\n\t\t\r\n\t}\r\n```","title":"Is there a better method than onMouseExited that detects when it exits no matter how fast it moves?","body":"<p>Can someone tell me how I can do so that an animation is made in a pane when the mouse is over said pane and make another when it is the opposite? I tried using the onMouseEntered and onMouseExited methods, with the first one there was no problem, however if we remove the mouse very quickly or abruptly, the program will not detect the exit of the mouse and therefore the animation will not be executed, can someone help me to solve this bug? please</p>\n<p>first add 2 methods to an events from the scene builder for the pane, these are said methods</p>\n<pre><code>public void scale1 () {\n        double currentScaleX = pane1.getScaleX();\n        double currentScaleY = pane1.getScaleY();\n        \n        if(currentScaleX ==1.0 &amp;&amp; currentScaleY ==1.0) {\n        \n            scale.setNode(pane1);\n            scale.setDuration(Duration.millis(100));\n            scale.setByX(0.75);\n            scale.setByY(0.75);\n            scale.play();\n            \n        }   \n    }\n\npublic void scale1Re () {\n        double currentScaleX = pane1.getScaleX();\n        double currentScaleY = pane1.getScaleY();\n\n        if(currentScaleX &gt;1.0 &amp;&amp; currentScaleY &gt;1.0) {\n            scale.setNode(pane1);\n            scale.setDuration(Duration.millis(100));\n            scale.setByX(-0.75);\n            scale.setByY(-0.75);\n            scale.play();\n            \n        }\n    }\n</code></pre>\n<p>However, when executed it works, but if we move the mouse very quickly, it will not detect the change and sometimes it will only execute the first method<a href=\"https://i.stack.imgur.com/HH0kd.png\" rel=\"nofollow noreferrer\">It is not seen in the screenshot, but my mouse is out of the pane</a></p>\n<p>I even tried to make a mouselistener class in my controller class so that it detects when the mouse is out of the pane or something and automatically executes the second method, but I think I did it wrong</p>\n<pre><code>@Override\n    public void initialize(URL arg0, ResourceBundle arg1) {\n        pane1.setOnMouseExited(new EventHandler&lt;MouseEvent&gt;() {\n            @Override\n            public void handle(MouseEvent mouseEvent) {\n                Bounds bounds = principalPane.getBoundsInParent();\n                if (bounds.contains(mouseEvent.getSceneX(), mouseEvent.getSceneY())) {\n                    scale1Re();\n                }\n            }\n        });\n\n        \n    }\n</code></pre>\n"},{"tags":["java","spring-boot","spring-test"],"comments":[{"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"score":3,"creation_date":1527776256,"post_id":50607285,"comment_id":88262947,"body_markdown":"Is your test class annotated with `@Import(MyTestConfiguration.class)`?","body":"Is your test class annotated with <code>@Import(MyTestConfiguration.class)</code>?"},{"owner":{"account_id":4712900,"reputation":3227,"user_id":3812888,"accept_rate":73,"display_name":"The Head Rush"},"score":3,"creation_date":1527779822,"post_id":50607285,"comment_id":88265224,"body_markdown":"@SamBrannen It wasn&#39;t there. And adding it didn&#39;t work. But changing it to `@ContextConfiguration(MyTestConfiguration.class)` did. Still don&#39;t understand why the @Primary annotation was being ignored without the  `ContextConfiguration`, though.","body":"@SamBrannen It wasn&#39;t there. And adding it didn&#39;t work. But changing it to <code>@ContextConfiguration(MyTestConfiguration.class)</code> did. Still don&#39;t understand why the @Primary annotation was being ignored without the  <code>ContextConfiguration</code>, though."},{"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"score":1,"creation_date":1527783826,"post_id":50607285,"comment_id":88267520,"body_markdown":"As documented in the Spring Boot reference manual, any beans configured in a top-level class annotated with `@TestConfiguration` will not be picked up via component scanning. So that&#39;s why you have to explicitly declare it.","body":"As documented in the Spring Boot reference manual, any beans configured in a top-level class annotated with <code>@TestConfiguration</code> will not be picked up via component scanning. So that&#39;s why you have to explicitly declare it."},{"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"score":0,"creation_date":1527783866,"post_id":50607285,"comment_id":88267537,"body_markdown":"If you class annotated with `@TestConfiguration` were a static nested class within your test class, it would be used automatically.","body":"If you class annotated with <code>@TestConfiguration</code> were a static nested class within your test class, it would be used automatically."},{"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"score":0,"creation_date":1527783894,"post_id":50607285,"comment_id":88267555,"body_markdown":"If that answers your question(s), I can make it a formal _answer_. ;-)","body":"If that answers your question(s), I can make it a formal <i>answer</i>. ;-)"},{"owner":{"account_id":4712900,"reputation":3227,"user_id":3812888,"accept_rate":73,"display_name":"The Head Rush"},"score":0,"creation_date":1527786923,"post_id":50607285,"comment_id":88269057,"body_markdown":"@SamBrannen That would be good. Thanks much for the help and explainations.","body":"@SamBrannen That would be good. Thanks much for the help and explainations."},{"owner":{"account_id":10595855,"reputation":2708,"user_id":7804595,"display_name":"Valeriy K."},"score":0,"creation_date":1547821066,"post_id":50607285,"comment_id":95335466,"body_markdown":"I found that if you have some another class in `@ContextConfiguration(classes=...)` `@TestConfiguration` will not work anymore. So you have to add your class with configuration explicitly to `@ContextConfiguration(classes=...)`.","body":"I found that if you have some another class in <code>@ContextConfiguration(classes=...)</code> <code>@TestConfiguration</code> will not work anymore. So you have to add your class with configuration explicitly to <code>@ContextConfiguration(classes=...)</code>."}],"answers":[{"tags":[],"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"down_vote_count":1,"up_vote_count":122,"is_accepted":true,"score":121,"last_activity_date":1571390968,"creation_date":1527854639,"answer_id":50643036,"question_id":50607285,"body_markdown":"As documented in the [Detecting Test Configuration][1] section of the Spring Boot reference manual, any beans configured in a top-level class annotated with `@TestConfiguration` will **not** be picked up via component scanning. So you have to explicitly register your `@TestConfiguration` class.\r\n\r\nYou can do that either via `@Import(MyTestConfiguration.class)` or `@ContextConfiguration(classes = MyTestConfiguration.class)` on your test class.\r\n\r\nOn the other hand, if your class annotated with `@TestConfiguration` were a `static` nested class *within* your test class, it would be registered automatically.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-testing-spring-boot-applications-detecting-config\r\n","title":"Spring Boot: @TestConfiguration Not Overriding Bean During Integration Test","body":"<p>As documented in the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-testing-spring-boot-applications-detecting-config\" rel=\"noreferrer\">Detecting Test Configuration</a> section of the Spring Boot reference manual, any beans configured in a top-level class annotated with <code>@TestConfiguration</code> will <strong>not</strong> be picked up via component scanning. So you have to explicitly register your <code>@TestConfiguration</code> class.</p>\n\n<p>You can do that either via <code>@Import(MyTestConfiguration.class)</code> or <code>@ContextConfiguration(classes = MyTestConfiguration.class)</code> on your test class.</p>\n\n<p>On the other hand, if your class annotated with <code>@TestConfiguration</code> were a <code>static</code> nested class <em>within</em> your test class, it would be registered automatically.</p>\n"},{"tags":[],"owner":{"account_id":4763985,"reputation":541,"user_id":3850635,"display_name":"Marcel Thimm"},"down_vote_count":0,"up_vote_count":54,"is_accepted":false,"score":54,"last_activity_date":1550140074,"creation_date":1550140074,"answer_id":54688203,"question_id":50607285,"body_markdown":"Make sure that the method name of your @Bean factory method does not match any existing bean name. I had issues with method names like *config()* or (in my case) \r\n *prometheusConfig()* which collided with existing bean names. Spring skips those factory methods **silently** and simply does not call them / does not instantiate the beans.\r\n\r\nIf you want to override a bean definition in your test, use the bean name explicitly as string parameter in your @Bean(&quot;beanName&quot;) annotation.","title":"Spring Boot: @TestConfiguration Not Overriding Bean During Integration Test","body":"<p>Make sure that the method name of your @Bean factory method does not match any existing bean name. I had issues with method names like <em>config()</em> or (in my case) \n <em>prometheusConfig()</em> which collided with existing bean names. Spring skips those factory methods <strong>silently</strong> and simply does not call them / does not instantiate the beans.</p>\n\n<p>If you want to override a bean definition in your test, use the bean name explicitly as string parameter in your @Bean(\"beanName\") annotation.</p>\n"},{"tags":[],"owner":{"account_id":182532,"reputation":2344,"user_id":417297,"accept_rate":75,"display_name":"Maksim Sorokin"},"down_vote_count":2,"up_vote_count":15,"is_accepted":false,"score":13,"last_activity_date":1585308852,"creation_date":1585308852,"answer_id":60885206,"question_id":50607285,"body_markdown":" - Test configuration has to be explicitly imported in the test via `@Import({MyTestConfiguration.class})`.\r\n - The name of the `@Bean` methods in `@Configuration` and `@TestConfiguration` have to be different. At least it makes difference in Spring Boot v2.2.\r\n - Also make sure `spring.main.allow-bean-definition-overriding=true` otherwise the bean could not be overriden.","title":"Spring Boot: @TestConfiguration Not Overriding Bean During Integration Test","body":"<ul>\n<li>Test configuration has to be explicitly imported in the test via <code>@Import({MyTestConfiguration.class})</code>.</li>\n<li>The name of the <code>@Bean</code> methods in <code>@Configuration</code> and <code>@TestConfiguration</code> have to be different. At least it makes difference in Spring Boot v2.2.</li>\n<li>Also make sure <code>spring.main.allow-bean-definition-overriding=true</code> otherwise the bean could not be overriden.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5973459,"reputation":774,"user_id":4695118,"accept_rate":0,"display_name":"Andrew Sneck"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1616691146,"creation_date":1616691146,"answer_id":66804092,"question_id":50607285,"body_markdown":"For me worked this code:\r\n\r\n      @TestConfiguration // 1. necessary\r\n      public class TestMessagesConfig {\r\n\r\n        @Bean\r\n        @Primary // 2. necessary\r\n        public MessageSource testMessageSource() { // 3. different method name than in production code e.g. add test prefix\r\n    \r\n        }\r\n      }","title":"Spring Boot: @TestConfiguration Not Overriding Bean During Integration Test","body":"<p>For me worked this code:</p>\n<pre><code>  @TestConfiguration // 1. necessary\n  public class TestMessagesConfig {\n\n    @Bean\n    @Primary // 2. necessary\n    public MessageSource testMessageSource() { // 3. different method name than in production code e.g. add test prefix\n\n    }\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1093223,"reputation":1998,"user_id":1087373,"accept_rate":0,"display_name":"snowfox"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1631015779,"creation_date":1631015779,"answer_id":69087824,"question_id":50607285,"body_markdown":"I came across a similar issue recently and got it sorted out by annotating my testing bean with @Primary as well as @Bean. Not sure why it&#39;s required, which seems not documented in the Spring doc. The version of my SpringBoot is 2.0.3.","title":"Spring Boot: @TestConfiguration Not Overriding Bean During Integration Test","body":"<p>I came across a similar issue recently and got it sorted out by annotating my testing bean with @Primary as well as @Bean. Not sure why it's required, which seems not documented in the Spring doc. The version of my SpringBoot is 2.0.3.</p>\n"},{"tags":[],"owner":{"account_id":975547,"reputation":511,"user_id":9550551,"display_name":"Didier Breedt"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1634739108,"creation_date":1634739108,"answer_id":69647623,"question_id":50607285,"body_markdown":"I struggled with a related problem, whereby even though I was using an inner static class, my test bean was not being registered.\r\n\r\nIt turns out, You still need to add your inner static class to the `@ContextConfiguration` class array, otherwise the beans inside the @TestConfiguration doesn&#39;t get picked up.\r\n\r\n```\r\npublic interface Foo {\r\n    String execute();\r\n}\r\n```\r\n\r\n```\r\npublic class FooService {\r\n    private final Foo foo;\r\n\r\n    FooService(Foo foo) {\r\n        this.foo = foo;\r\n    }\r\n\r\n    public String execute() {\r\n        return foo.execute();\r\n    }\r\n}\r\n```\r\n\r\n```\r\n@ExtendWith(SpringExtension.class)\r\n@ContextConfiguration(classes = {FooService.class, FooTest.FooTestConfig.class})\r\npublic class FooTest {\r\n    @Autowired\r\n    FooService fooService;\r\n\r\n    @Test\r\n    void test() {\r\n        Assertions.assertEquals(&quot;MY_TEST_BEAN&quot;, fooService.execute());\r\n    }\r\n\r\n    @TestConfiguration\r\n    static class FooTestConfig {\r\n        @Bean\r\n        public Foo getFooBean() {\r\n            return () -&gt; &quot;MY_TEST_BEAN&quot;;\r\n        }\r\n    }\r\n}\r\n```","title":"Spring Boot: @TestConfiguration Not Overriding Bean During Integration Test","body":"<p>I struggled with a related problem, whereby even though I was using an inner static class, my test bean was not being registered.</p>\n<p>It turns out, You still need to add your inner static class to the <code>@ContextConfiguration</code> class array, otherwise the beans inside the @TestConfiguration doesn't get picked up.</p>\n<pre><code>public interface Foo {\n    String execute();\n}\n</code></pre>\n<pre><code>public class FooService {\n    private final Foo foo;\n\n    FooService(Foo foo) {\n        this.foo = foo;\n    }\n\n    public String execute() {\n        return foo.execute();\n    }\n}\n</code></pre>\n<pre><code>@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = {FooService.class, FooTest.FooTestConfig.class})\npublic class FooTest {\n    @Autowired\n    FooService fooService;\n\n    @Test\n    void test() {\n        Assertions.assertEquals(&quot;MY_TEST_BEAN&quot;, fooService.execute());\n    }\n\n    @TestConfiguration\n    static class FooTestConfig {\n        @Bean\n        public Foo getFooBean() {\n            return () -&gt; &quot;MY_TEST_BEAN&quot;;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16877142,"reputation":516,"user_id":12204242,"display_name":"Hasintha Abeykoon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666877513,"creation_date":1666877513,"answer_id":74222948,"question_id":50607285,"body_markdown":"In my case it was an issue with `@RunWith(SpringRunner.class)`, I&#39;m not exactly sure why it wasn&#39;t working, I was following this - [Testing in Spring Boot][1]\r\n\r\nBut after replacing that with `@ExtendWith(SpringExtension.class)` the inner static `@TestConfiguration` class created the beans as expected.\r\n \r\nMaybe a version mismatch - I&#39;m using Spring Boot 2.7.2.\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-boot-testing","title":"Spring Boot: @TestConfiguration Not Overriding Bean During Integration Test","body":"<p>In my case it was an issue with <code>@RunWith(SpringRunner.class)</code>, I'm not exactly sure why it wasn't working, I was following this - <a href=\"https://www.baeldung.com/spring-boot-testing\" rel=\"nofollow noreferrer\">Testing in Spring Boot</a></p>\n<p>But after replacing that with <code>@ExtendWith(SpringExtension.class)</code> the inner static <code>@TestConfiguration</code> class created the beans as expected.</p>\n<p>Maybe a version mismatch - I'm using Spring Boot 2.7.2.</p>\n"},{"tags":[],"owner":{"account_id":1751077,"reputation":61,"user_id":1600152,"display_name":"JavaDevOps"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1669633852,"creation_date":1669211840,"answer_id":74547973,"question_id":50607285,"body_markdown":"In my case replacing @`Import(TestConfig.class)` with `@ContextConfiguration(classes=TestConfig.class)` did the trick. For some reason, some of the beans from TestConfig but 1 wasn&#39;t until I replaced `@Import` with `@ContextConfiguration`.\r\nThis was also mentioned in some comments that were hidden because they had no upvotes.","title":"Spring Boot: @TestConfiguration Not Overriding Bean During Integration Test","body":"<p>In my case replacing @<code>Import(TestConfig.class)</code> with <code>@ContextConfiguration(classes=TestConfig.class)</code> did the trick. For some reason, some of the beans from TestConfig but 1 wasn't until I replaced <code>@Import</code> with <code>@ContextConfiguration</code>.\nThis was also mentioned in some comments that were hidden because they had no upvotes.</p>\n"},{"tags":[],"owner":{"account_id":2650647,"reputation":1354,"user_id":3514976,"accept_rate":71,"display_name":"nonzaprej"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675438778,"creation_date":1675438778,"answer_id":75337970,"question_id":50607285,"body_markdown":"I found it odd how several answers stated that the names of the `@Bean`s have to be different from each other. How would that make one override the other?  \r\nThere wasn&#39;t one specific answer that worked for me, but I&#39;ve solved the issue by combining some of their advices.  \r\n  \r\nHere&#39;s what worked for me.  \r\n  \r\nMain configuration class:  \r\n\r\n    @Configuration\r\n    public class SpringConfiguration {\r\n    \r\n        @Bean\r\n        BeanInterface myBean() {\r\n            return new BeanImplementation();\r\n        }\r\n        \r\n        @Bean\r\n        OtherClass otherBean() {\r\n            return new OtherClass();\r\n        }\r\n    }\r\n  \r\nTest configuration class:  \r\n\r\n    @TestConfiguration\r\n    public class TestSpringConfiguration {\r\n    \r\n        @Bean\r\n        @Primary\r\n        BeanInterface myBean() {\r\n            return new TestBeanImplementation();\r\n        }\r\n    }\r\n  \r\nTest class:  \r\n\r\n    @SpringBootTest(classes = TestSpringConfiguration.class, \r\n            properties = &quot;spring.main.allow-bean-definition-overriding=true&quot;)\r\n    public class Tests {\r\n        \r\n        @Test\r\n        public void test() {\r\n            // do stuff\r\n        }\r\n    }\r\n\r\nIn this way, the &quot;myBean&quot; bean instance is the one defined in the `TestSpringConfiguration` class, while &quot;otherBean&quot; is the one defined in the `SpringConfiguration` class, since it&#39;s not overridden.  \r\nIf I gave two different names to the &quot;myBean&quot; beans, the &quot;real&quot; one would still be initialized and, in my case, would give an error during tests, since it needs something that&#39;s only available at runtime in its proper environment.  \r\nOnce I gave both the same name, Spring would throw an error saying that they were conflicting. Hence why I had to specify the property `spring.main.allow-bean-definition-overriding=true` in the `@SpringBootTest` annotation of the test class.  \r\n  \r\n&lt;br&gt;&lt;br&gt;\r\n\r\nBy the way, if you&#39;re **NOT** using Spring Boot, I guess these alternative annotations could work for you:  \r\n  \r\n    @ExtendWith(value = SpringExtension.class)\r\n    @ContextConfiguration(loader = AnnotationConfigContextLoader.class, // &lt;- not sure about this one\r\n            classes = { SpringConfiguration.class, TestSpringConfiguration.class })\r\n    public class Tests {\r\n        \r\n        @Test\r\n        public void test() {\r\n            // do stuff\r\n        }\r\n    }\r\n\r\nThen, you would still have to set the property `spring.main.allow-bean-definition-overriding=true` in the test `application.yml` or `application.properties` file, or in some other way via code on startup.  \r\n  \r\nNote: I&#39;m not 100% sure that you would need the `loader = AnnotationConfigContextLoader.class` thing. Try without it, first. I needed it in a project of mine which had Spring without Boot, but I can&#39;t remember whether it&#39;s a standard thing to set or I needed it for some specific reason.","title":"Spring Boot: @TestConfiguration Not Overriding Bean During Integration Test","body":"<p>I found it odd how several answers stated that the names of the <code>@Bean</code>s have to be different from each other. How would that make one override the other?<br />\nThere wasn't one specific answer that worked for me, but I've solved the issue by combining some of their advices.</p>\n<p>Here's what worked for me.</p>\n<p>Main configuration class:</p>\n<pre><code>@Configuration\npublic class SpringConfiguration {\n\n    @Bean\n    BeanInterface myBean() {\n        return new BeanImplementation();\n    }\n    \n    @Bean\n    OtherClass otherBean() {\n        return new OtherClass();\n    }\n}\n</code></pre>\n<p>Test configuration class:</p>\n<pre><code>@TestConfiguration\npublic class TestSpringConfiguration {\n\n    @Bean\n    @Primary\n    BeanInterface myBean() {\n        return new TestBeanImplementation();\n    }\n}\n</code></pre>\n<p>Test class:</p>\n<pre><code>@SpringBootTest(classes = TestSpringConfiguration.class, \n        properties = &quot;spring.main.allow-bean-definition-overriding=true&quot;)\npublic class Tests {\n    \n    @Test\n    public void test() {\n        // do stuff\n    }\n}\n</code></pre>\n<p>In this way, the &quot;myBean&quot; bean instance is the one defined in the <code>TestSpringConfiguration</code> class, while &quot;otherBean&quot; is the one defined in the <code>SpringConfiguration</code> class, since it's not overridden.<br />\nIf I gave two different names to the &quot;myBean&quot; beans, the &quot;real&quot; one would still be initialized and, in my case, would give an error during tests, since it needs something that's only available at runtime in its proper environment.<br />\nOnce I gave both the same name, Spring would throw an error saying that they were conflicting. Hence why I had to specify the property <code>spring.main.allow-bean-definition-overriding=true</code> in the <code>@SpringBootTest</code> annotation of the test class.</p>\n<p><br><br></p>\n<p>By the way, if you're <strong>NOT</strong> using Spring Boot, I guess these alternative annotations could work for you:</p>\n<pre><code>@ExtendWith(value = SpringExtension.class)\n@ContextConfiguration(loader = AnnotationConfigContextLoader.class, // &lt;- not sure about this one\n        classes = { SpringConfiguration.class, TestSpringConfiguration.class })\npublic class Tests {\n    \n    @Test\n    public void test() {\n        // do stuff\n    }\n}\n</code></pre>\n<p>Then, you would still have to set the property <code>spring.main.allow-bean-definition-overriding=true</code> in the test <code>application.yml</code> or <code>application.properties</code> file, or in some other way via code on startup.</p>\n<p>Note: I'm not 100% sure that you would need the <code>loader = AnnotationConfigContextLoader.class</code> thing. Try without it, first. I needed it in a project of mine which had Spring without Boot, but I can't remember whether it's a standard thing to set or I needed it for some specific reason.</p>\n"}],"owner":{"account_id":4712900,"reputation":3227,"user_id":3812888,"accept_rate":73,"display_name":"The Head Rush"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84076,"favorite_count":0,"down_vote_count":0,"up_vote_count":92,"accepted_answer_id":50643036,"answer_count":9,"score":92,"last_activity_date":1675438778,"creation_date":1527690595,"question_id":50607285,"body_markdown":"I have a `Bean` defined in a class decorated with `@Configuration`:\r\n\r\n    @Configuration\r\n    public class MyBeanConfig {\r\n        @Bean\r\n        public String configPath() {\r\n            return &quot;../production/environment/path&quot;;\r\n        }\r\n    }\r\n\r\nI have a class decorated with `@TestConfiguration` that should override this `Bean`:\r\n\r\n    @TestConfiguration\r\n    public class MyTestConfiguration {\r\n        @Bean\r\n        @Primary\r\n        public String configPath() {\r\n            return &quot;/test/environment/path&quot;;\r\n        }\r\n    }\r\n\r\nThe `configPath` bean is used to set the path to an external file containing a registration code that must be read during startup. It is used in an `@Component` class:\r\n\r\n    @Component\r\n    public class MyParsingComponent {\r\n        private String CONFIG_PATH;\r\n        \r\n        @Autowired\r\n        public void setCONFIG_PATH(String configPath) {\r\n            this.CONFIG_PATH = configPath;\r\n        }\r\n    }\r\n\r\nWhile trying to debug this I set a breakpoint inside each method as well as the constructor of the test config class. The `@TestConfiguration`&#39;s constructor breakpoint is hit, so i know that my test configuration class instantiates, however the `configPath` method of that class is never hit. Instead, the `configPath` method of the normal `@Configuration` class is hit and the `@Autowired` `String` in `MyParsingComponent` is always `../production/environment/path` rather than the expected `/test/environment/path`.\r\n\r\nNot sure why this is happening. Any thoughts would be greatly appreciated.","title":"Spring Boot: @TestConfiguration Not Overriding Bean During Integration Test","body":"<p>I have a <code>Bean</code> defined in a class decorated with <code>@Configuration</code>:</p>\n<pre><code>@Configuration\npublic class MyBeanConfig {\n    @Bean\n    public String configPath() {\n        return &quot;../production/environment/path&quot;;\n    }\n}\n</code></pre>\n<p>I have a class decorated with <code>@TestConfiguration</code> that should override this <code>Bean</code>:</p>\n<pre><code>@TestConfiguration\npublic class MyTestConfiguration {\n    @Bean\n    @Primary\n    public String configPath() {\n        return &quot;/test/environment/path&quot;;\n    }\n}\n</code></pre>\n<p>The <code>configPath</code> bean is used to set the path to an external file containing a registration code that must be read during startup. It is used in an <code>@Component</code> class:</p>\n<pre><code>@Component\npublic class MyParsingComponent {\n    private String CONFIG_PATH;\n    \n    @Autowired\n    public void setCONFIG_PATH(String configPath) {\n        this.CONFIG_PATH = configPath;\n    }\n}\n</code></pre>\n<p>While trying to debug this I set a breakpoint inside each method as well as the constructor of the test config class. The <code>@TestConfiguration</code>'s constructor breakpoint is hit, so i know that my test configuration class instantiates, however the <code>configPath</code> method of that class is never hit. Instead, the <code>configPath</code> method of the normal <code>@Configuration</code> class is hit and the <code>@Autowired</code> <code>String</code> in <code>MyParsingComponent</code> is always <code>../production/environment/path</code> rather than the expected <code>/test/environment/path</code>.</p>\n<p>Not sure why this is happening. Any thoughts would be greatly appreciated.</p>\n"},{"tags":["java","maven","intellij-idea","junit4"],"comments":[{"owner":{"account_id":14879298,"reputation":1234,"user_id":10744483,"display_name":"Olga Klisho"},"score":0,"creation_date":1619082514,"post_id":67202962,"comment_id":118799033,"body_markdown":"Can you please provide the code sample where you experience the issue. And the dependencies of the project. Thank you","body":"Can you please provide the code sample where you experience the issue. And the dependencies of the project. Thank you"},{"owner":{"account_id":16506411,"reputation":1143,"user_id":11926338,"display_name":"Pavel Petrashov"},"score":0,"creation_date":1619084330,"post_id":67202962,"comment_id":118799832,"body_markdown":"@Olga Klisho No. It is a large multimodule project with private code.","body":"@Olga Klisho No. It is a large multimodule project with private code."}],"owner":{"account_id":16506411,"reputation":1143,"user_id":11926338,"display_name":"Pavel Petrashov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1257,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1675438666,"creation_date":1619036515,"question_id":67202962,"body_markdown":"I updated my Intellij IDE to:\r\n\r\n&gt; IntelliJ IDEA 2021.1 (Ultimate Edition) Build #IU-211.6693.111, built\r\n&gt; on April 6, 2021\r\n\r\nI have started to get this message after unit tests finishing since I updated Intellij IDE: \r\n\r\n&gt; Error: Could not find or load main class\r\n&gt; com.intellij.rt.junit.JUnitStarter\r\n\r\nTests pass but Intelij shows this message. I tried to fix it and found this [advice][1]. I closed IDE and removed `.idea` folder in my project. After that, I opened Project and rebuilt it. After that I started to get this error:\r\n\r\n&gt; Error running &#39;package.with.tests in my-app&#39;: Command line is too\r\n&gt; long. Shorten command line for package.with.tests in my-app or also\r\n&gt; for JUnit default configuration?\r\n\r\n\r\nAfter googling I found solution: \r\n\r\n[![enter image description here][2]][2]\r\n\r\nI chouse this option and I returned to first exception: \r\n\r\n&gt; Error: Could not find or load main class\r\n&gt; com.intellij.rt.junit.JUnitStarter\r\n\r\nThese are some configs of my IDE:\r\n\r\n[![enter image description here][3]][3]\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/45911888/11926338\r\n  [2]: https://i.stack.imgur.com/EiWkb.png\r\n  [3]: https://i.stack.imgur.com/YchCn.png\r\n  [4]: https://i.stack.imgur.com/Joo1Y.png","title":"Error: Could not find or load main class com.intellij.rt.junit.JUnitStarter after update Intellij IDE to 2021.1","body":"<p>I updated my Intellij IDE to:</p>\n<blockquote>\n<p>IntelliJ IDEA 2021.1 (Ultimate Edition) Build #IU-211.6693.111, built\non April 6, 2021</p>\n</blockquote>\n<p>I have started to get this message after unit tests finishing since I updated Intellij IDE:</p>\n<blockquote>\n<p>Error: Could not find or load main class\ncom.intellij.rt.junit.JUnitStarter</p>\n</blockquote>\n<p>Tests pass but Intelij shows this message. I tried to fix it and found this <a href=\"https://stackoverflow.com/a/45911888/11926338\">advice</a>. I closed IDE and removed <code>.idea</code> folder in my project. After that, I opened Project and rebuilt it. After that I started to get this error:</p>\n<blockquote>\n<p>Error running 'package.with.tests in my-app': Command line is too\nlong. Shorten command line for package.with.tests in my-app or also\nfor JUnit default configuration?</p>\n</blockquote>\n<p>After googling I found solution:</p>\n<p><a href=\"https://i.stack.imgur.com/EiWkb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EiWkb.png\" alt=\"enter image description here\" /></a></p>\n<p>I chouse this option and I returned to first exception:</p>\n<blockquote>\n<p>Error: Could not find or load main class\ncom.intellij.rt.junit.JUnitStarter</p>\n</blockquote>\n<p>These are some configs of my IDE:</p>\n<p><a href=\"https://i.stack.imgur.com/YchCn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YchCn.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/Joo1Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Joo1Y.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":15539213,"reputation":346,"user_id":11210547,"display_name":"P&#233;ter Bar&#225;th"},"score":0,"creation_date":1666011941,"post_id":74095282,"comment_id":130827242,"body_markdown":"Yes, I guess it have been removed from version 6, although I didn&#39;t find clue regarding this.\nMaybe this document can help you: https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#schema-generation","body":"Yes, I guess it have been removed from version 6, although I didn&#39;t find clue regarding this. Maybe this document can help you: <a href=\"https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#schema-generation\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/orm/current/userguide/html_single/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1666030172,"creation_date":1666030172,"answer_id":74101425,"question_id":74095282,"body_markdown":"These classes are part of the hibernate-ant module: https://search.maven.org/artifact/org.hibernate.orm/hibernate-ant/6.1.4.Final/jar","title":"Hibernate 6 SchemaExport class not found","body":"<p>These classes are part of the hibernate-ant module: <a href=\"https://search.maven.org/artifact/org.hibernate.orm/hibernate-ant/6.1.4.Final/jar\" rel=\"noreferrer\">https://search.maven.org/artifact/org.hibernate.orm/hibernate-ant/6.1.4.Final/jar</a></p>\n"}],"owner":{"account_id":1247323,"reputation":1647,"user_id":1319938,"accept_rate":67,"display_name":"mah454"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1394,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":74101425,"answer_count":1,"score":7,"last_activity_date":1675438584,"creation_date":1665999531,"question_id":74095282,"body_markdown":"I use code like to export JPA entities schema DDL :       \r\n\r\n\r\n    import org.hibernate.tool.hbm2ddl.SchemaExport;\r\n    import org.hibernate.tool.hbm2ddl.SchemaUpdate;\r\n\r\n    public class HibernateQueryGenerator {\r\n        public static void main(String[] args) {\r\n    //        createSchema();\r\n            updateSchema();\r\n        }\r\n    \r\n        private static void addEntityClass(MetadataSources metadata) {\r\n            // Scan entity packages and use : \r\n            // metadata.addAnnotatedClass(...);\r\n        }\r\n    \r\n        private static void updateSchema() {\r\n            MetadataSources metadata = getMetadataSources();\r\n            SchemaUpdate schemaUpdate = new SchemaUpdate();\r\n            schemaUpdate.setHaltOnError(true);\r\n            schemaUpdate.setFormat(false);\r\n            schemaUpdate.setDelimiter(&quot;;&quot;);\r\n            schemaUpdate.execute(EnumSet.of(TargetType.STDOUT), metadata.buildMetadata());\r\n        }\r\n    \r\n        private static void createSchema() {\r\n            MetadataSources metadata = getMetadataSources();\r\n            SchemaExport schemaExport = new SchemaExport();\r\n            schemaExport.setHaltOnError(true);\r\n            schemaExport.setFormat(false);\r\n            schemaExport.setDelimiter(&quot;;&quot;);\r\n            schemaExport.execute(EnumSet.of(TargetType.STDOUT), SchemaExport.Action.CREATE, metadata.buildMetadata());\r\n        }\r\n    \r\n        private static MetadataSources getMetadataSources() {\r\n            MetadataSources metadata = new MetadataSources(\r\n                    new StandardServiceRegistryBuilder()\r\n                            .applySettings(getSettings())\r\n                            .build());\r\n            addEntityClass(metadata);\r\n            return metadata;\r\n        }\r\n    \r\n        private static Map&lt;String, String&gt; getSettings() {\r\n            Map&lt;String, String&gt; settings = new HashMap&lt;&gt;();\r\n            settings.put(&quot;connection.driver_class&quot;, &quot;org.postgresql.Driver&quot;);\r\n            settings.put(&quot;dialect&quot;, &quot;org.hibernate.dialect.PostgreSQL10Dialect&quot;);\r\n            settings.put(&quot;hibernate.connection.url&quot;, &quot;jdbc:postgresql://172.22.0.3:5432/tutorial&quot;);\r\n            settings.put(&quot;hibernate.connection.username&quot;, &quot;admin&quot;);\r\n            settings.put(&quot;hibernate.connection.password&quot;, &quot;adminpass&quot;);\r\n            return settings;\r\n        }\r\n    }         \r\n\r\nI can not found SchemaExport and SchemaUpdate classes in Hibernate 6 .     \r\nis this classes depricated ?      \r\nWhat is replacement ?      ","title":"Hibernate 6 SchemaExport class not found","body":"<p>I use code like to export JPA entities schema DDL :</p>\n<pre><code>import org.hibernate.tool.hbm2ddl.SchemaExport;\nimport org.hibernate.tool.hbm2ddl.SchemaUpdate;\n\npublic class HibernateQueryGenerator {\n    public static void main(String[] args) {\n//        createSchema();\n        updateSchema();\n    }\n\n    private static void addEntityClass(MetadataSources metadata) {\n        // Scan entity packages and use : \n        // metadata.addAnnotatedClass(...);\n    }\n\n    private static void updateSchema() {\n        MetadataSources metadata = getMetadataSources();\n        SchemaUpdate schemaUpdate = new SchemaUpdate();\n        schemaUpdate.setHaltOnError(true);\n        schemaUpdate.setFormat(false);\n        schemaUpdate.setDelimiter(&quot;;&quot;);\n        schemaUpdate.execute(EnumSet.of(TargetType.STDOUT), metadata.buildMetadata());\n    }\n\n    private static void createSchema() {\n        MetadataSources metadata = getMetadataSources();\n        SchemaExport schemaExport = new SchemaExport();\n        schemaExport.setHaltOnError(true);\n        schemaExport.setFormat(false);\n        schemaExport.setDelimiter(&quot;;&quot;);\n        schemaExport.execute(EnumSet.of(TargetType.STDOUT), SchemaExport.Action.CREATE, metadata.buildMetadata());\n    }\n\n    private static MetadataSources getMetadataSources() {\n        MetadataSources metadata = new MetadataSources(\n                new StandardServiceRegistryBuilder()\n                        .applySettings(getSettings())\n                        .build());\n        addEntityClass(metadata);\n        return metadata;\n    }\n\n    private static Map&lt;String, String&gt; getSettings() {\n        Map&lt;String, String&gt; settings = new HashMap&lt;&gt;();\n        settings.put(&quot;connection.driver_class&quot;, &quot;org.postgresql.Driver&quot;);\n        settings.put(&quot;dialect&quot;, &quot;org.hibernate.dialect.PostgreSQL10Dialect&quot;);\n        settings.put(&quot;hibernate.connection.url&quot;, &quot;jdbc:postgresql://172.22.0.3:5432/tutorial&quot;);\n        settings.put(&quot;hibernate.connection.username&quot;, &quot;admin&quot;);\n        settings.put(&quot;hibernate.connection.password&quot;, &quot;adminpass&quot;);\n        return settings;\n    }\n}         \n</code></pre>\n<p>I can not found SchemaExport and SchemaUpdate classes in Hibernate 6 .<br />\nis this classes depricated ?<br />\nWhat is replacement ?</p>\n"},{"tags":["java","eclipse","import","server","client"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1675351418,"post_id":75322559,"comment_id":132914354,"body_markdown":"Are you inadvertently using Java modules? Show us the project, and if you have a module-info.java, its contents.","body":"Are you inadvertently using Java modules? Show us the project, and if you have a module-info.java, its contents."}],"owner":{"account_id":24557932,"reputation":1,"user_id":18466164,"display_name":"Joshua"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675438496,"creation_date":1675337590,"question_id":75322559,"body_markdown":"Hi I am currently doing a project where I have multiple clients telling the server a date however my `java.util.date` is not working and running me back an error message.\r\n\r\nHow would I fix this issue code is provided below as well as the message. I must also add I am writing said project in java and using the eclipse IDE.\r\n\r\n    package clientServer;\r\n    import java.io.IOException;\r\n    import java.io.PrintWriter;\r\n    import java.net.ServerSocket;\r\n    import java.net.Socket;\r\n    import java.util.Date;\r\n    public class Server {\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            try (ServerSocket listener = new ServerSocket(7000)) {\r\n                System.out.println(&quot;The date server is running...&quot;);\r\n                while (true) {\r\n                    try (Socket socket = listener.accept()) {\r\n                        PrintWriter out =\r\n                                new PrintWriter(socket.getOutputStream(), true);\r\n                        out.println(new Date().toString());\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nthe 2 errors \r\nfor import `java.util.Date` it says `import java.util.Date cannot be resolved`\r\nand for the code `out.println(new Date())` it says `Date cannot be resolved into a type`\r\n\r\nI have tried cleaning the project and using alt 5 to give it a direct path however this has not worked","title":"Trying to run a server with multiple clients where the client will tell me the date but my java.util.Date is not importing correctly","body":"<p>Hi I am currently doing a project where I have multiple clients telling the server a date however my <code>java.util.date</code> is not working and running me back an error message.</p>\n<p>How would I fix this issue code is provided below as well as the message. I must also add I am writing said project in java and using the eclipse IDE.</p>\n<pre><code>package clientServer;\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.util.Date;\npublic class Server {\n\n    public static void main(String[] args) throws IOException {\n        try (ServerSocket listener = new ServerSocket(7000)) {\n            System.out.println(&quot;The date server is running...&quot;);\n            while (true) {\n                try (Socket socket = listener.accept()) {\n                    PrintWriter out =\n                            new PrintWriter(socket.getOutputStream(), true);\n                    out.println(new Date().toString());\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>the 2 errors\nfor import <code>java.util.Date</code> it says <code>import java.util.Date cannot be resolved</code>\nand for the code <code>out.println(new Date())</code> it says <code>Date cannot be resolved into a type</code></p>\n<p>I have tried cleaning the project and using alt 5 to give it a direct path however this has not worked</p>\n"},{"tags":["java","spring","spring-boot","spring-cloud-sleuth"],"answers":[{"tags":[],"owner":{"account_id":944144,"reputation":5331,"user_id":971735,"display_name":"Jonatan Ivanov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675438430,"creation_date":1626983657,"answer_id":68490795,"question_id":68482862,"body_markdown":"Check the [terminology in the docs](https://web.archive.org/web/20210621191636/https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/htmlsingle/#getting-started-terminology).\r\n\r\nA trace is just a tree of spans (there is a root) so theoretically you can have a &quot;session span&quot; that starts with login and ends with logout but you need to:\r\n - create it before you call the login endpoint\r\n - end it after you called logout\r\n - keep it somewhere in between\r\n - handle the case if logout is never called\r\n\r\nAs you can see, this can be very problematic, also, your trace won&#39;t be completed until logout, what do you expect to see on the UI in the meantime?\r\n\r\nBecause of these, a trace usually (in case of HTTP) is in &quot;request scope&quot;. This means that a new &quot;root span&quot; is created for every requests that the client made and subsequent spans are created from the root for each call.\r\n\r\nThis does not mean that you can&#39;t attach some sort of a &quot;workflowId&quot; to your spans that belong to the same workflow (please never attach the real sessionId because that should be kept as a secret).\r\n\r\nPlease check the [Baggage](https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/htmlsingle/#features-baggage) and the [Tag](https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/htmlsingle/#features-baggage-vs-tags) sections of the docs. You can create a &quot;workflowId&quot; that you can propagate to all of the services (using a baggage) and you can attach this as a tag to your spans so that you can query them on the ui and see all the traces that belong to the same workflow.","title":"How to use the same trace id in multiple api calls","body":"<p>Check the <a href=\"https://web.archive.org/web/20210621191636/https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/htmlsingle/#getting-started-terminology\" rel=\"nofollow noreferrer\">terminology in the docs</a>.</p>\n<p>A trace is just a tree of spans (there is a root) so theoretically you can have a &quot;session span&quot; that starts with login and ends with logout but you need to:</p>\n<ul>\n<li>create it before you call the login endpoint</li>\n<li>end it after you called logout</li>\n<li>keep it somewhere in between</li>\n<li>handle the case if logout is never called</li>\n</ul>\n<p>As you can see, this can be very problematic, also, your trace won't be completed until logout, what do you expect to see on the UI in the meantime?</p>\n<p>Because of these, a trace usually (in case of HTTP) is in &quot;request scope&quot;. This means that a new &quot;root span&quot; is created for every requests that the client made and subsequent spans are created from the root for each call.</p>\n<p>This does not mean that you can't attach some sort of a &quot;workflowId&quot; to your spans that belong to the same workflow (please never attach the real sessionId because that should be kept as a secret).</p>\n<p>Please check the <a href=\"https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/htmlsingle/#features-baggage\" rel=\"nofollow noreferrer\">Baggage</a> and the <a href=\"https://docs.spring.io/spring-cloud-sleuth/docs/current/reference/htmlsingle/#features-baggage-vs-tags\" rel=\"nofollow noreferrer\">Tag</a> sections of the docs. You can create a &quot;workflowId&quot; that you can propagate to all of the services (using a baggage) and you can attach this as a tag to your spans so that you can query them on the ui and see all the traces that belong to the same workflow.</p>\n"}],"owner":{"account_id":13692434,"reputation":478,"user_id":9879898,"display_name":"sge"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1521,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":68490795,"answer_count":1,"score":0,"last_activity_date":1675438430,"creation_date":1626947957,"question_id":68482862,"body_markdown":"I have an api that has several methods. The workflow of the api call is in general like this:\r\nlogin, callX, ... and logout. Each api method is doing calls to subsystems. The trace id with sleuth works for e.g. the login call and all it&#39;s subsystems. Now i would like to have a trace id  that is the same for the hole workflow (like a session id). how do i achive this. does a predefined tag exists like the spanid and traceid?","title":"How to use the same trace id in multiple api calls","body":"<p>I have an api that has several methods. The workflow of the api call is in general like this:\nlogin, callX, ... and logout. Each api method is doing calls to subsystems. The trace id with sleuth works for e.g. the login call and all it's subsystems. Now i would like to have a trace id  that is the same for the hole workflow (like a session id). how do i achive this. does a predefined tag exists like the spanid and traceid?</p>\n"},{"tags":["java","spring-boot","swagger"],"owner":{"account_id":3079492,"reputation":1027,"user_id":2608063,"accept_rate":94,"display_name":"tomtomssi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675438176,"creation_date":1675424466,"question_id":75335218,"body_markdown":"I have a Spring Boot application that uses the Swagger API to auto-generate Swagger documentation. There is an old swagger.yaml file that contains a lot of object definitions. Instead of re-writing these in Java classes I would like to access the swagger.yaml file and use the existing definitions. Is this somehow possible?\r\n\r\nSomething along the lines of:\r\n\r\n    @Schema(name = &quot;name&quot;, description = &quot;description&quot;, ref = definition from swagger.yaml)\r\n    private SomeClass someClass;","title":"Reference swagger.yaml definitions from the Java API","body":"<p>I have a Spring Boot application that uses the Swagger API to auto-generate Swagger documentation. There is an old swagger.yaml file that contains a lot of object definitions. Instead of re-writing these in Java classes I would like to access the swagger.yaml file and use the existing definitions. Is this somehow possible?</p>\n<p>Something along the lines of:</p>\n<pre><code>@Schema(name = &quot;name&quot;, description = &quot;description&quot;, ref = definition from swagger.yaml)\nprivate SomeClass someClass;\n</code></pre>\n"},{"tags":["java","unit-testing","mocking","mockito"],"answers":[{"tags":[],"owner":{"account_id":2087834,"reputation":7157,"user_id":1858327,"accept_rate":71,"display_name":"Captain Man"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1655212003,"creation_date":1439482407,"answer_id":31993440,"question_id":31993439,"body_markdown":"If you are using Mockito 2.1.0 or above and Java 8 or above, see [this](https://stackoverflow.com/a/46708152/1858327) answer instead, it&#39;s much simpler now.\r\n\r\n---\r\n\r\nI found the answer while writing the question.\r\n\r\nYes, you can. Instead of using `any(Bar.class)` you&#39;ll need to implement your own instance of [`ArgumentMatcher&lt;T&gt;`][1] and use [`Mockito#argThat(Matcher)`][2], for example, say we want to check that `i` is 5...\r\n\r\n    // in the test (could also be outside)\r\n    \r\n    private static final class BarIs5 extends ArgumentMatcher&lt;Bar&gt; {\r\n      \r\n      @Override\r\n      public boolean matches(Object argument) {\r\n        return ((Bar) argument).getI() == 5;\r\n      }\r\n    }\r\n\r\nThen verify like so: `verify(mockedFoo).doThing(argThat(new BarIs5()));`\r\n\r\n---\r\n\r\nKick it up a notch by adding constructor parameters!\r\n\r\n    private static final class BarIsWhat extends ArgumentMatcher&lt;Bar&gt; {\r\n      \r\n      private final int i;\r\n\r\n      public BarIsWhat(int i) {\r\n        this.i = i\r\n      }\r\n\r\n      @Override\r\n      public boolean matches(Object argument) {\r\n        return ((Bar) argument).getI() == i;\r\n      }\r\n    }\r\n\r\nThen verify like so: `verify(mockedFoo).doThing(argThat(new BarIsWhat(5)));`\r\n\r\n---\r\n\r\n**Update:** This popped in my queue because of a badge and saw some room for improvement.\r\n\r\nI have tried this and it works. You can sort of use a lambda expression which is a lot cleaner (if you don&#39;t mind unchecked cast warnings at least).\r\n\r\nThe only issue is that `argThat` accepts a Hamcrest `Matcher` which is *not* a `@FunctionalInterface`. Luckily, Mockito&#39;s `ArgumentMatcher` is an abstract class that extends it and only has a single abstract method.\r\n\r\nIn your test (or some common location) make a method like below\r\n\r\n    private static &lt;T&gt; ArgumentMatcher&lt;T&gt; matches(Predicate&lt;T&gt; predicate) {\r\n      return new ArgumentMatcher&lt;T&gt;() {\r\n    \r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        @Override\r\n        public boolean matches(Object argument) {\r\n          return predicate.test((T) argument);\r\n        }\r\n      };\r\n    }\r\n\r\nNow, in your test you can do this to use a lambda expression:\r\n\r\n    verify(mockedFoo).doThing(argThat(matches( (Bar arg) -&gt; arg.getI() == 5 )));\r\n\r\n[1]: https://javadoc.io/static/org.mockito/mockito-core/4.6.1/org/mockito/ArgumentMatcher.html\r\n[2]: https://javadoc.io/static/org.mockito/mockito-core/4.6.1/org/mockito/ArgumentMatchers.html#argThat(org.mockito.ArgumentMatcher)","title":"Can Mockito verify an argument has certain properties/fields?","body":"<p>If you are using Mockito 2.1.0 or above and Java 8 or above, see <a href=\"https://stackoverflow.com/a/46708152/1858327\">this</a> answer instead, it's much simpler now.</p>\n<hr />\n<p>I found the answer while writing the question.</p>\n<p>Yes, you can. Instead of using <code>any(Bar.class)</code> you'll need to implement your own instance of <a href=\"https://javadoc.io/static/org.mockito/mockito-core/4.6.1/org/mockito/ArgumentMatcher.html\" rel=\"nofollow noreferrer\"><code>ArgumentMatcher&lt;T&gt;</code></a> and use <a href=\"https://javadoc.io/static/org.mockito/mockito-core/4.6.1/org/mockito/ArgumentMatchers.html#argThat(org.mockito.ArgumentMatcher)\" rel=\"nofollow noreferrer\"><code>Mockito#argThat(Matcher)</code></a>, for example, say we want to check that <code>i</code> is 5...</p>\n<pre><code>// in the test (could also be outside)\n\nprivate static final class BarIs5 extends ArgumentMatcher&lt;Bar&gt; {\n  \n  @Override\n  public boolean matches(Object argument) {\n    return ((Bar) argument).getI() == 5;\n  }\n}\n</code></pre>\n<p>Then verify like so: <code>verify(mockedFoo).doThing(argThat(new BarIs5()));</code></p>\n<hr />\n<p>Kick it up a notch by adding constructor parameters!</p>\n<pre><code>private static final class BarIsWhat extends ArgumentMatcher&lt;Bar&gt; {\n  \n  private final int i;\n\n  public BarIsWhat(int i) {\n    this.i = i\n  }\n\n  @Override\n  public boolean matches(Object argument) {\n    return ((Bar) argument).getI() == i;\n  }\n}\n</code></pre>\n<p>Then verify like so: <code>verify(mockedFoo).doThing(argThat(new BarIsWhat(5)));</code></p>\n<hr />\n<p><strong>Update:</strong> This popped in my queue because of a badge and saw some room for improvement.</p>\n<p>I have tried this and it works. You can sort of use a lambda expression which is a lot cleaner (if you don't mind unchecked cast warnings at least).</p>\n<p>The only issue is that <code>argThat</code> accepts a Hamcrest <code>Matcher</code> which is <em>not</em> a <code>@FunctionalInterface</code>. Luckily, Mockito's <code>ArgumentMatcher</code> is an abstract class that extends it and only has a single abstract method.</p>\n<p>In your test (or some common location) make a method like below</p>\n<pre><code>private static &lt;T&gt; ArgumentMatcher&lt;T&gt; matches(Predicate&lt;T&gt; predicate) {\n  return new ArgumentMatcher&lt;T&gt;() {\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    @Override\n    public boolean matches(Object argument) {\n      return predicate.test((T) argument);\n    }\n  };\n}\n</code></pre>\n<p>Now, in your test you can do this to use a lambda expression:</p>\n<pre><code>verify(mockedFoo).doThing(argThat(matches( (Bar arg) -&gt; arg.getI() == 5 )));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2775988,"reputation":2874,"user_id":2389570,"accept_rate":62,"display_name":"Niccol&#242;"},"down_vote_count":0,"up_vote_count":173,"is_accepted":true,"score":173,"last_activity_date":1544801209,"creation_date":1507806663,"answer_id":46708152,"question_id":31993439,"body_markdown":"In **Mockito 2.1.0 and up with Java 8 you can pass the lambda to argThat out of the box** so that one does not need a custom argument matchers. For the example in the OP would be:\r\n\r\n    verify(mockedFoo).doThing(argThat((Bar aBar) -&gt; aBar.getI() == 5));\r\n\r\nThis is because as of Mockito 2.1.0, `ArgumentMatcher` is a functional interface.\r\n\r\n\r\n  [1]: https://static.javadoc.io/org.mockito/mockito-core/2.10.0/org/mockito/ArgumentMatcher.html","title":"Can Mockito verify an argument has certain properties/fields?","body":"<p>In <strong>Mockito 2.1.0 and up with Java 8 you can pass the lambda to argThat out of the box</strong> so that one does not need a custom argument matchers. For the example in the OP would be:</p>\n\n<pre><code>verify(mockedFoo).doThing(argThat((Bar aBar) -&gt; aBar.getI() == 5));\n</code></pre>\n\n<p>This is because as of Mockito 2.1.0, <code>ArgumentMatcher</code> is a functional interface.</p>\n"},{"tags":[],"owner":{"account_id":5648860,"reputation":9049,"user_id":4470135,"accept_rate":54,"display_name":"yuranos"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1547115754,"creation_date":1523001258,"answer_id":49687994,"question_id":31993439,"body_markdown":"If using Mockito 2+ is not an option, you can also use good old `ArgumentCaptor`. It&#39;ll be a bit more verbose though:\r\n\r\n    ArgumentCaptor&lt;Long&gt; siteIdCaptor = ArgumentCaptor.forClass(Long.class);\r\n    verify(repository).findBySiteId(siteIdCaptor.capture());\r\n    assertEquals(15, siteIdCaptor.getValue().longValue());","title":"Can Mockito verify an argument has certain properties/fields?","body":"<p>If using Mockito 2+ is not an option, you can also use good old <code>ArgumentCaptor</code>. It'll be a bit more verbose though:</p>\n\n<pre><code>ArgumentCaptor&lt;Long&gt; siteIdCaptor = ArgumentCaptor.forClass(Long.class);\nverify(repository).findBySiteId(siteIdCaptor.capture());\nassertEquals(15, siteIdCaptor.getValue().longValue());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2990262,"reputation":6816,"user_id":2628137,"accept_rate":93,"display_name":"Yosi Dahari"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1606648462,"creation_date":1606648462,"answer_id":65059490,"question_id":31993439,"body_markdown":"In case you are looking for the `when.. then..` syntax, this should be a working alternative:\r\n\r\n```\r\ndoReturn(valueToReturn).when(mockedFoo).doThing(argThat((Bar aBar) -&gt; aBar.getI() == 5));\r\n```","title":"Can Mockito verify an argument has certain properties/fields?","body":"<p>In case you are looking for the <code>when.. then..</code> syntax, this should be a working alternative:</p>\n<pre><code>doReturn(valueToReturn).when(mockedFoo).doThing(argThat((Bar aBar) -&gt; aBar.getI() == 5));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1532531,"reputation":36089,"user_id":1429387,"accept_rate":63,"display_name":"naXa stands with Ukraine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675438175,"creation_date":1675438175,"answer_id":75337849,"question_id":31993439,"body_markdown":"with Kotlin and mockito-kotlin library this can be tricky. You need to create an extension function on class `Bar`. I&#39;d like to share an example:\r\n\r\n```kt\r\nimport com.nhaarman.mockito_kotlin.argThat\r\nimport com.nhaarman.mockito_kotlin.mock\r\nimport com.nhaarman.mockito_kotlin.verify\r\n// ...\r\n\r\n    @Test\r\n    fun testBar() {\r\n        val mockedFoo: Foo = mock()\r\n        val someBar: Bar = mock()\r\n        // ...\r\n        fun Bar.hasExpectedValue() = this.getI() == 5\r\n        verify(mockedFoo).doThing(argThat( Bar::hasExpectedValue ))\r\n    }\r\n```","title":"Can Mockito verify an argument has certain properties/fields?","body":"<p>with Kotlin and mockito-kotlin library this can be tricky. You need to create an extension function on class <code>Bar</code>. I'd like to share an example:</p>\n<pre><code>import com.nhaarman.mockito_kotlin.argThat\nimport com.nhaarman.mockito_kotlin.mock\nimport com.nhaarman.mockito_kotlin.verify\n// ...\n\n    @Test\n    fun testBar() {\n        val mockedFoo: Foo = mock()\n        val someBar: Bar = mock()\n        // ...\n        fun Bar.hasExpectedValue() = this.getI() == 5\n        verify(mockedFoo).doThing(argThat( Bar::hasExpectedValue ))\n    }\n</code></pre>\n"}],"owner":{"account_id":2087834,"reputation":7157,"user_id":1858327,"accept_rate":71,"display_name":"Captain Man"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80592,"favorite_count":0,"down_vote_count":0,"up_vote_count":105,"accepted_answer_id":46708152,"answer_count":5,"score":105,"last_activity_date":1675438175,"creation_date":1439482407,"question_id":31993439,"body_markdown":"Say I am mocking this class `Foo`\r\n\r\n    class Foo {\r\n      public void doThing(Bar bar) {\r\n        // ...\r\n      }\r\n    }\r\n\r\nand this is `Bar`\r\n\r\n    class Bar {\r\n      private int i;\r\n      public int getI() { return i; }\r\n      public void setI(int i) { this.i = i; }\r\n    }\r\n\r\nI know I can use Mockito&#39;s verify functionality to see if `Foo#doThing(Bar)` was called on the mock with a specific instance of `Bar` or any  `Bar` with `Mockito.any(Bar.class)`, **but is there some way to ensure it was called by any `Bar` but with a specific value for `i` or `Bar#getI()`?**\r\n\r\nWhat I know is possible:\r\n\r\n    Foo mockedFoo = mock(Foo.class);\r\n    Bar someBar = mock(Bar.class);\r\n    ...\r\n    verify(mockedFoo).doThing(someBar);\r\n    verify(mockedFoo).doThing(any(Bar.class);\r\n\r\nWhat I want to know is if there is a way to verify that a `Bar` with particular things true about it was passed as an argument.","title":"Can Mockito verify an argument has certain properties/fields?","body":"<p>Say I am mocking this class <code>Foo</code></p>\n\n<pre><code>class Foo {\n  public void doThing(Bar bar) {\n    // ...\n  }\n}\n</code></pre>\n\n<p>and this is <code>Bar</code></p>\n\n<pre><code>class Bar {\n  private int i;\n  public int getI() { return i; }\n  public void setI(int i) { this.i = i; }\n}\n</code></pre>\n\n<p>I know I can use Mockito's verify functionality to see if <code>Foo#doThing(Bar)</code> was called on the mock with a specific instance of <code>Bar</code> or any  <code>Bar</code> with <code>Mockito.any(Bar.class)</code>, <strong>but is there some way to ensure it was called by any <code>Bar</code> but with a specific value for <code>i</code> or <code>Bar#getI()</code>?</strong></p>\n\n<p>What I know is possible:</p>\n\n<pre><code>Foo mockedFoo = mock(Foo.class);\nBar someBar = mock(Bar.class);\n...\nverify(mockedFoo).doThing(someBar);\nverify(mockedFoo).doThing(any(Bar.class);\n</code></pre>\n\n<p>What I want to know is if there is a way to verify that a <code>Bar</code> with particular things true about it was passed as an argument.</p>\n"},{"tags":["java","mockito","junit5","powermock"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":2,"creation_date":1675438467,"post_id":75337737,"comment_id":132935415,"body_markdown":"`EntityLookup.Constants.VERIFY = mock(…)`? It&#39;s public, so you should be able to simply assign a new value to the field","body":"<code>EntityLookup.Constants.VERIFY = mock(…)</code>? It&#39;s public, so you should be able to simply assign a new value to the field"},{"owner":{"account_id":4185213,"reputation":7640,"user_id":3429133,"accept_rate":73,"display_name":"beatngu13"},"score":0,"creation_date":1677620790,"post_id":75337737,"comment_id":133373625,"body_markdown":"@knittl +1 but be careful when running tests concurrently. Then, tests using `EntityLookup` should at least define a corresponding [`@ResourceLock`](https://junit.org/junit5/docs/current/user-guide/#writing-tests-parallel-execution-synchronization).","body":"@knittl +1 but be careful when running tests concurrently. Then, tests using <code>EntityLookup</code> should at least define a corresponding <a href=\"https://junit.org/junit5/docs/current/user-guide/#writing-tests-parallel-execution-synchronization\" rel=\"nofollow noreferrer\"><code>@ResourceLock</code></a>."}],"owner":{"account_id":2550873,"reputation":794,"user_id":2214646,"accept_rate":66,"display_name":"Pamba"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675437989,"creation_date":1675437703,"question_id":75337737,"body_markdown":"Currently I am using JUnit5 for creating test cases in Java. But in some places I could not implement the test cases due to Mock issue.\r\n\r\nThis is my interface:\r\n\r\n    public interface EntityLookup extends Lookup {\r\n    \r\n      public static final Constants constants = new Constants();\r\n      \r\n      public static class Constants {\r\n    \r\n        public EntityLookup VERIFY;\r\n        \r\n        public void initialize() {\r\n    \r\n          this.VERIFY = (EntityLookup)LookupHelper.getLookupInstance(EntityLookup.class, &quot;ABCD&quot;);\r\n        }\r\n      }\r\n    }\r\n\r\nI want to mock the below code\r\n\r\n    EntityLookup.constants.VERIFY.trimmedValue()\r\n\r\nI know how to implement in JUnit4 \r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    public class MyTestClass {\r\n    \r\n      @Test\r\n      public void test1() throws Exception {\r\n    \r\n        PowerMockito.mockStatic(EntityLookup.class);\r\n        PowerMockito.mockStatic(EntityLookup.Constants.class);\r\n    \t\r\n        EntityLookup.Constants constants = Mockito.mock(EntityLookup.Constants.class);\r\n    \t\r\n        EntityLookup entityLookup = Mockito.mock(EntityLookup.class);\r\n    \t\r\n        PowerMockito.whenNew(EntityLookup.Constants.class).withNoArguments().thenReturn(constants);\r\n        Whitebox.setInternalState(EntityLookup.constants, &quot;VERIFY&quot;, entityLookup);\r\n        Mockito.when(entityLookup.trimmedValue()).thenReturn(&quot;ABCD&quot;);\r\n    \r\n        //assert...\r\n      }\r\n    }\r\n\r\n\r\n\r\n**But in JUnit5, I have no idea**\r\n\r\nCan anyone convert it to JUnit5 from JUnit4?\r\n","title":"How to mock static object inside an Interface by using JUnit5 in Java?","body":"<p>Currently I am using JUnit5 for creating test cases in Java. But in some places I could not implement the test cases due to Mock issue.</p>\n<p>This is my interface:</p>\n<pre><code>public interface EntityLookup extends Lookup {\n\n  public static final Constants constants = new Constants();\n  \n  public static class Constants {\n\n    public EntityLookup VERIFY;\n    \n    public void initialize() {\n\n      this.VERIFY = (EntityLookup)LookupHelper.getLookupInstance(EntityLookup.class, &quot;ABCD&quot;);\n    }\n  }\n}\n</code></pre>\n<p>I want to mock the below code</p>\n<pre><code>EntityLookup.constants.VERIFY.trimmedValue()\n</code></pre>\n<p>I know how to implement in JUnit4</p>\n<pre><code>@RunWith(PowerMockRunner.class)\npublic class MyTestClass {\n\n  @Test\n  public void test1() throws Exception {\n\n    PowerMockito.mockStatic(EntityLookup.class);\n    PowerMockito.mockStatic(EntityLookup.Constants.class);\n    \n    EntityLookup.Constants constants = Mockito.mock(EntityLookup.Constants.class);\n    \n    EntityLookup entityLookup = Mockito.mock(EntityLookup.class);\n    \n    PowerMockito.whenNew(EntityLookup.Constants.class).withNoArguments().thenReturn(constants);\n    Whitebox.setInternalState(EntityLookup.constants, &quot;VERIFY&quot;, entityLookup);\n    Mockito.when(entityLookup.trimmedValue()).thenReturn(&quot;ABCD&quot;);\n\n    //assert...\n  }\n}\n</code></pre>\n<p><strong>But in JUnit5, I have no idea</strong></p>\n<p>Can anyone convert it to JUnit5 from JUnit4?</p>\n"},{"tags":["java","selenium","cucumber"],"comments":[{"owner":{"account_id":23081176,"reputation":131,"user_id":17193441,"display_name":"Srinivasu Kaki"},"score":0,"creation_date":1675538649,"post_id":75337780,"comment_id":132952403,"body_markdown":"Did you try executing the scenarios in parallel mode? You can find more information from https://cucumber.io/docs/guides/parallel-execution/?lang=java#junit-5","body":"Did you try executing the scenarios in parallel mode? You can find more information from <a href=\"https://cucumber.io/docs/guides/parallel-execution/?lang=java#junit-5\" rel=\"nofollow noreferrer\">cucumber.io/docs/guides/parallel-execution/?lang=java#junit-&zwnj;&#8203;5</a>"},{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":0,"creation_date":1675646941,"post_id":75337780,"comment_id":132968072,"body_markdown":"This sounds like a scenario that a manual tester should do. I don&#39;t know how you are going to sync the two browsers since each will have to be driven by its own script.","body":"This sounds like a scenario that a manual tester should do. I don&#39;t know how you are going to sync the two browsers since each will have to be driven by its own script."},{"owner":{"account_id":27695808,"reputation":21,"user_id":21141570,"display_name":"Xoro"},"score":0,"creation_date":1675746520,"post_id":75337780,"comment_id":132990069,"body_markdown":"@SrinivasuKaki Parallel run is for two differ scenarios or same scenario in outline. What I am searching is one scenario with two users in parallel.","body":"@SrinivasuKaki Parallel run is for two differ scenarios or same scenario in outline. What I am searching is one scenario with two users in parallel."}],"owner":{"account_id":27695808,"reputation":21,"user_id":21141570,"display_name":"Xoro"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1675437869,"creation_date":1675437869,"question_id":75337780,"body_markdown":"I am trying to automate one scenario where I need to confirm that two users cannot simultaneously edit one table in an application. My framework is Java cucumber selenium based and using PicoContainer for dependency injection.\r\n\r\nMy problem is the framework is written in such a way that that it can handle only one user and one browser in a single scenario.\r\n\r\nScenario:\r\nStep 1: User1 logs in with id Access1 in one chrome browser\r\nStep 2: User1 opens a table\r\nStep 3: User2 logs in with id Access2 in another chrome browser\r\nStep 4: User 2 opens the same table and sees error message &#39; the table is locked by user 1&#39;\r\nStep 5: User 1 logs off\r\nStep 6: User2 tried to open the same table and this time its editable.\r\nStep 7.User 2 logs off\r\n\r\nI tried declaring a 2nd driver, it works fine if I close the previously open bbrowser but not simultaneously in the same scenario.\r\n\r\n","title":"Cucumber to handle two users in two browsers in one scenario","body":"<p>I am trying to automate one scenario where I need to confirm that two users cannot simultaneously edit one table in an application. My framework is Java cucumber selenium based and using PicoContainer for dependency injection.</p>\n<p>My problem is the framework is written in such a way that that it can handle only one user and one browser in a single scenario.</p>\n<p>Scenario:\nStep 1: User1 logs in with id Access1 in one chrome browser\nStep 2: User1 opens a table\nStep 3: User2 logs in with id Access2 in another chrome browser\nStep 4: User 2 opens the same table and sees error message ' the table is locked by user 1'\nStep 5: User 1 logs off\nStep 6: User2 tried to open the same table and this time its editable.\nStep 7.User 2 logs off</p>\n<p>I tried declaring a 2nd driver, it works fine if I close the previously open bbrowser but not simultaneously in the same scenario.</p>\n"},{"tags":["java","json","serialization","jackson"],"comments":[{"owner":{"account_id":78549,"reputation":46986,"user_id":223478,"accept_rate":94,"display_name":"Neil McGuigan"},"score":2,"creation_date":1420658038,"post_id":27826806,"comment_id":44059557,"body_markdown":"http://wiki.fasterxml.com/JacksonJsonViews","body":"<a href=\"http://wiki.fasterxml.com/JacksonJsonViews\" rel=\"nofollow noreferrer\">wiki.fasterxml.com/JacksonJsonViews</a>"},{"owner":{"account_id":57501,"reputation":4679,"user_id":172272,"accept_rate":83,"display_name":"Didier A."},"score":0,"creation_date":1420658372,"post_id":27826806,"comment_id":44059724,"body_markdown":"@NeilMcGuigan It won&#39;t work for me because I need it to be specified on the class to be serialized, not the ObjectMapper.","body":"@NeilMcGuigan It won&#39;t work for me because I need it to be specified on the class to be serialized, not the ObjectMapper."},{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1420659319,"post_id":27826806,"comment_id":44060268,"body_markdown":"Maybe you can use a `Module` and a mixin?","body":"Maybe you can use a <code>Module</code> and a mixin?"}],"answers":[{"tags":[],"owner":{"account_id":1293741,"reputation":4913,"user_id":1245337,"accept_rate":100,"display_name":"atish shimpi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1420657839,"creation_date":1420657839,"answer_id":27826845,"question_id":27826806,"body_markdown":"There is no such annotation, you have to use `@JsonIgnoreProperties` on properties which you don&#39;t want.","title":"How to include only certain properties and fields of my object to be serialized by Jackson?","body":"<p>There is no such annotation, you have to use <code>@JsonIgnoreProperties</code> on properties which you don't want.</p>\n"},{"tags":[],"owner":{"account_id":893101,"reputation":3385,"user_id":931004,"accept_rate":100,"display_name":"Ghokun"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1420702165,"creation_date":1420702165,"answer_id":27834991,"question_id":27826806,"body_markdown":"You can introduce a new class from your class.\r\n\r\n`MyClass` Your original class\r\n\r\n`MyClassForJson` Fork of your class that has properties of your choice.\r\n\r\nUse second class for only serialization. Maybe you can cast just before serialization.\r\nThis way no unexpected changes will happen to your json.\r\n\r\n","title":"How to include only certain properties and fields of my object to be serialized by Jackson?","body":"<p>You can introduce a new class from your class.</p>\n\n<p><code>MyClass</code> Your original class</p>\n\n<p><code>MyClassForJson</code> Fork of your class that has properties of your choice.</p>\n\n<p>Use second class for only serialization. Maybe you can cast just before serialization.\nThis way no unexpected changes will happen to your json.</p>\n"},{"tags":[],"owner":{"account_id":78549,"reputation":46986,"user_id":223478,"accept_rate":94,"display_name":"Neil McGuigan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1420761460,"creation_date":1420761460,"answer_id":27851721,"question_id":27826806,"body_markdown":"Haven&#39;t tested this, but you should be able to disable JsonAutoDetect, then annotate each property manually.\r\n\r\nSee http://wiki.fasterxml.com/JacksonFeatureAutoDetect","title":"How to include only certain properties and fields of my object to be serialized by Jackson?","body":"<p>Haven't tested this, but you should be able to disable JsonAutoDetect, then annotate each property manually.</p>\n\n<p>See <a href=\"http://wiki.fasterxml.com/JacksonFeatureAutoDetect\" rel=\"nofollow\">http://wiki.fasterxml.com/JacksonFeatureAutoDetect</a></p>\n"},{"tags":[],"owner":{"account_id":32984,"reputation":4331,"user_id":91933,"accept_rate":65,"display_name":"markvgti"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1499431296,"creation_date":1499431296,"answer_id":44971053,"question_id":27826806,"body_markdown":"So far I have preferred using wrapper objects to achieve this whitelist effect (in my case the additional complication is that the POJO I want to selectively serialize is part of an object hierarchy, so using Views is not possible).\r\n\r\nIf `MyClass` is the original class and `MyClassForJson` is the wrapper, this is how I use it:\r\n\r\n    public class MyClassForJson {\r\n    \r\n        private MyClass wrapped;\r\n    \r\n        public MyClassForJson(MyClass toBeWrapped) {\r\n            this.wrapped = toBeWrapped;\r\n        }\r\n    \r\n        /**\r\n         * Delegate method exposing a property\r\n         */\r\n        public String getExposedProperty() {\r\n            return this.wrapped.getExposedProperty();\r\n        }\r\n    }\r\n\r\nNow only properties I create delegate getter methods for will ever be exposed to Jackson when serializing, irrespective of how many properties I add to `MyClass`. Delegate methods can be auto-generated by most IDEs today for selected properties of the wrapped class.\r\n\r\nIf I want to have different sets of whitelisted properties for serializing `MyClass` in different ways, all I have to do is create different wrapper classes.\r\n","title":"How to include only certain properties and fields of my object to be serialized by Jackson?","body":"<p>So far I have preferred using wrapper objects to achieve this whitelist effect (in my case the additional complication is that the POJO I want to selectively serialize is part of an object hierarchy, so using Views is not possible).</p>\n\n<p>If <code>MyClass</code> is the original class and <code>MyClassForJson</code> is the wrapper, this is how I use it:</p>\n\n<pre><code>public class MyClassForJson {\n\n    private MyClass wrapped;\n\n    public MyClassForJson(MyClass toBeWrapped) {\n        this.wrapped = toBeWrapped;\n    }\n\n    /**\n     * Delegate method exposing a property\n     */\n    public String getExposedProperty() {\n        return this.wrapped.getExposedProperty();\n    }\n}\n</code></pre>\n\n<p>Now only properties I create delegate getter methods for will ever be exposed to Jackson when serializing, irrespective of how many properties I add to <code>MyClass</code>. Delegate methods can be auto-generated by most IDEs today for selected properties of the wrapped class.</p>\n\n<p>If I want to have different sets of whitelisted properties for serializing <code>MyClass</code> in different ways, all I have to do is create different wrapper classes.</p>\n"},{"tags":[],"owner":{"account_id":12061146,"reputation":910,"user_id":8820133,"display_name":"Gabe Gates"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577983560,"creation_date":1577983560,"answer_id":59566991,"question_id":27826806,"body_markdown":"I was able to get this to work using the `@JsonView` annotation.\n\n&gt; [JsonView][1]\n&gt;\n&gt; Annotation used for indicating view(s) that the property that is defined by method or field annotated is part of.\n\nYou could use any class for the view, but I prefer them created in one spot:\n\n    public class JsonViews {\n        public static class Small {}\n        public static class Medium extends Small {}\n    }\n\n Then in the Class:\n\n    public class User {\n        @JsonView(JsonViews.Small.class)\n        private Integer id;\n        @JsonView(JsonViews.Medium.class)\n        private String name;\n        // email does not have a view, by default it will be in any view\n        private String email;\n    \n        ...\n    }\n\nThen we can pass the view class into the `ObjectMapper`\n    \n    mapper.writerWithView(clazz);\n    \n\n If you do not want properties without a view defined to be in the JSON make sure to configure the `ObjectMapper`\n\n    mapper.configure(MapperFeature.DEFAULT_VIEW_INCLUSION, false);\n\n  [1]: https://fasterxml.github.io/jackson-annotations/javadoc/2.1.1/com/fasterxml/jackson/annotation/JsonView.html","title":"How to include only certain properties and fields of my object to be serialized by Jackson?","body":"<p>I was able to get this to work using the <code>@JsonView</code> annotation.</p>\n<blockquote>\n<p><a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.1.1/com/fasterxml/jackson/annotation/JsonView.html\" rel=\"nofollow noreferrer\">JsonView</a></p>\n<p>Annotation used for indicating view(s) that the property that is defined by method or field annotated is part of.</p>\n</blockquote>\n<p>You could use any class for the view, but I prefer them created in one spot:</p>\n<pre><code>public class JsonViews {\n    public static class Small {}\n    public static class Medium extends Small {}\n}\n</code></pre>\n<p>Then in the Class:</p>\n<pre><code>public class User {\n    @JsonView(JsonViews.Small.class)\n    private Integer id;\n    @JsonView(JsonViews.Medium.class)\n    private String name;\n    // email does not have a view, by default it will be in any view\n    private String email;\n\n    ...\n}\n</code></pre>\n<p>Then we can pass the view class into the <code>ObjectMapper</code></p>\n<pre><code>mapper.writerWithView(clazz);\n</code></pre>\n<p>If you do not want properties without a view defined to be in the JSON make sure to configure the <code>ObjectMapper</code></p>\n<pre><code>mapper.configure(MapperFeature.DEFAULT_VIEW_INCLUSION, false);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19112024,"reputation":159,"user_id":13957834,"display_name":"juran.maurice"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660217395,"creation_date":1660217395,"answer_id":73319915,"question_id":27826806,"body_markdown":"It&#180;s an old question, but if anyone is still searching for the answer:\r\n\r\nThe feature you were searching for is implemented since version 2.12 and is called @JsonIncludeProperties.\r\n\r\nMore information:\r\nhttps://fasterxml.github.io/jackson-annotations/javadoc/2.12/com/fasterxml/jackson/annotation/JsonIncludeProperties.html","title":"How to include only certain properties and fields of my object to be serialized by Jackson?","body":"<p>It´s an old question, but if anyone is still searching for the answer:</p>\n<p>The feature you were searching for is implemented since version 2.12 and is called @JsonIncludeProperties.</p>\n<p>More information:\n<a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.12/com/fasterxml/jackson/annotation/JsonIncludeProperties.html\" rel=\"nofollow noreferrer\">https://fasterxml.github.io/jackson-annotations/javadoc/2.12/com/fasterxml/jackson/annotation/JsonIncludeProperties.html</a></p>\n"},{"tags":[],"owner":{"account_id":3169068,"reputation":316,"user_id":2678458,"display_name":"everis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675437804,"creation_date":1675437804,"answer_id":75337760,"question_id":27826806,"body_markdown":"For anyone who wants to do this for specific class.\r\n\r\nAs pointed out in [another answer](https://stackoverflow.com/a/27851721/2678458) \r\n`@JsonAutoDetect` annotation is the way. \r\n\r\nThen annotate properties you want with `@JsonProperty` to include them in serialization.\r\n\r\nExample bellow, note the `isGetterVisibility = Visibility.NONE` parameter for `boolean` properties if you are, like me, using lombok or some other &quot;getter generating&quot; tool.\r\n```\r\n@JsonAutoDetect(getterVisibility = Visibility.NONE, isGetterVisibility = Visibility.NONE)\r\npublic class MyClass {\r\n    @JsonProperty\r\n    private String id;\r\n\r\n    //list of properties without @JsonProperty, which will not be serialized\r\n}\r\n```\r\n\r\nThere are more options for `@JsonAutoDetect` see [documenation](https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonAutoDetect.html).","title":"How to include only certain properties and fields of my object to be serialized by Jackson?","body":"<p>For anyone who wants to do this for specific class.</p>\n<p>As pointed out in <a href=\"https://stackoverflow.com/a/27851721/2678458\">another answer</a>\n<code>@JsonAutoDetect</code> annotation is the way.</p>\n<p>Then annotate properties you want with <code>@JsonProperty</code> to include them in serialization.</p>\n<p>Example bellow, note the <code>isGetterVisibility = Visibility.NONE</code> parameter for <code>boolean</code> properties if you are, like me, using lombok or some other &quot;getter generating&quot; tool.</p>\n<pre><code>@JsonAutoDetect(getterVisibility = Visibility.NONE, isGetterVisibility = Visibility.NONE)\npublic class MyClass {\n    @JsonProperty\n    private String id;\n\n    //list of properties without @JsonProperty, which will not be serialized\n}\n</code></pre>\n<p>There are more options for <code>@JsonAutoDetect</code> see <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonAutoDetect.html\" rel=\"nofollow noreferrer\">documenation</a>.</p>\n"}],"owner":{"account_id":57501,"reputation":4679,"user_id":172272,"accept_rate":83,"display_name":"Didier A."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5480,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":7,"score":8,"last_activity_date":1675437804,"creation_date":1420657660,"question_id":27826806,"body_markdown":"I have a class I need to serialize and it contains a lot of properties and fields, but I only need a small subset to be serialized, not the entire class. I also want to guarantee that I won&#39;t inadvertently add fields in the future which would be serialized and break my expectation of what gets serialized by suddenly including something new.\r\n\r\nSo is there any annotation I can use to basically specify what gets serialize only?\r\n\r\nI&#39;d need like the opposite of @JsonIgnoreProperties. Something that acts as a whitelist instead of a blacklist.","title":"How to include only certain properties and fields of my object to be serialized by Jackson?","body":"<p>I have a class I need to serialize and it contains a lot of properties and fields, but I only need a small subset to be serialized, not the entire class. I also want to guarantee that I won't inadvertently add fields in the future which would be serialized and break my expectation of what gets serialized by suddenly including something new.</p>\n\n<p>So is there any annotation I can use to basically specify what gets serialize only?</p>\n\n<p>I'd need like the opposite of @JsonIgnoreProperties. Something that acts as a whitelist instead of a blacklist.</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":1,"creation_date":1675436850,"post_id":75337418,"comment_id":132934802,"body_markdown":"You can create lots of threads. It&#39;s just if there are more threads than cpus then the extra threads will have to wait for a running thread to get swapped out before they get to run.","body":"You can create lots of threads. It&#39;s just if there are more threads than cpus then the extra threads will have to wait for a running thread to get swapped out before they get to run."},{"owner":{"account_id":11371334,"reputation":744,"user_id":8336836,"accept_rate":85,"display_name":"Sam Fisher"},"score":0,"creation_date":1675437349,"post_id":75337418,"comment_id":132934972,"body_markdown":"@NathanHughes lots of threads on cpus, but what about cpus cores?","body":"@NathanHughes lots of threads on cpus, but what about cpus cores?"},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1675437471,"post_id":75337418,"comment_id":132935008,"body_markdown":"Modern hardware and OS combinations can easily handle thousands of them.","body":"Modern hardware and OS combinations can easily handle thousands of them."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1675437648,"post_id":75337418,"comment_id":132935074,"body_markdown":"Modern cpu cores often have multithreading, i.e. they can physically execute two separate threads at the same time. Logically you can start any number of threads and they&#39;ll simply seem to run slower and slower, but still mostly look like they are running all at the same time (the beauty of preemptive multithreading). For CPU-heavy stuff you want slightly more threads than your CPU(s) can physically run, but not much more.","body":"Modern cpu cores often have multithreading, i.e. they can physically execute two separate threads at the same time. Logically you can start any number of threads and they&#39;ll simply seem to run slower and slower, but still mostly look like they are running all at the same time (the beauty of preemptive multithreading). For CPU-heavy stuff you want slightly more threads than your CPU(s) can physically run, but not much more."},{"owner":{"account_id":11371334,"reputation":744,"user_id":8336836,"accept_rate":85,"display_name":"Sam Fisher"},"score":0,"creation_date":1675437674,"post_id":75337418,"comment_id":132935083,"body_markdown":"@rzwitserloot &quot;modern hardware&quot; is abstract category. I&#39;m trying to understand situation around concrete thing - cpu cores","body":"@rzwitserloot &quot;modern hardware&quot; is abstract category. I&#39;m trying to understand situation around concrete thing - cpu cores"},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1675438710,"post_id":75337418,"comment_id":132935488,"body_markdown":"Unless it&#39;s something that is intentionally incredibly underspecced relative to normal expectations (example: A raspberry pi, a machine that was built 15 years ago, a TV set-top box, that sort of thing. Non-examples: Phones, tablets, cheap laptops - unless they are 10 years+ old, they&#39;re modern), thousands is fine. If you have specific hardware in mind, write a test instead of asking. Let me put it differently, what are you expecting? Someone to post a table of 5000 different devices and an exact number as to how many threads you can run? That&#39;s.. obviously preposterous.","body":"Unless it&#39;s something that is intentionally incredibly underspecced relative to normal expectations (example: A raspberry pi, a machine that was built 15 years ago, a TV set-top box, that sort of thing. Non-examples: Phones, tablets, cheap laptops - unless they are 10 years+ old, they&#39;re modern), thousands is fine. If you have specific hardware in mind, write a test instead of asking. Let me put it differently, what are you expecting? Someone to post a table of 5000 different devices and an exact number as to how many threads you can run? That&#39;s.. obviously preposterous."},{"owner":{"account_id":11371334,"reputation":744,"user_id":8336836,"accept_rate":85,"display_name":"Sam Fisher"},"score":0,"creation_date":1675441102,"post_id":75337418,"comment_id":132936351,"body_markdown":"@rzwitserloot nope, I dont need tests and benchmarks, just want to understand - cpu core executes 1 thread in time of its cycle or multiple threads","body":"@rzwitserloot nope, I dont need tests and benchmarks, just want to understand - cpu core executes 1 thread in time of its cycle or multiple threads"},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1675442456,"post_id":75337418,"comment_id":132936793,"body_markdown":"1 thread at a time, hopping around when the thread it executes no longer needs CPU (due to waiting for something, say, disk or network), or when it&#39;s been running for a while. Each core is doing that, on most architectures.","body":"1 thread at a time, hopping around when the thread it executes no longer needs CPU (due to waiting for something, say, disk or network), or when it&#39;s been running for a while. Each core is doing that, on most architectures."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1675437750,"creation_date":1675437750,"answer_id":75337751,"question_id":75337418,"body_markdown":"Modern hardware and OS combinations can easily handle thousands of them. And they can all be in the &#39;running state&#39;.\r\n\r\nHowever, let&#39;s say you have 2000 threads, 2 CPUs in the box, and each CPU has 16 cores, then certainly at most 32 of your running threads are truly &#39;executing stuff&#39; - the other ones are ready to go if any of he 32 currently actually executing threads do something that isn&#39;t CPU-dependent (for example, waiting for some bytes to flow in from the network, or bytes to be read from a disk), or just time passes (eventually the CPU+OS+JVM work together to pre-empt an executing thread - to pause it so that it doesn&#39;t hog the resources).\r\n\r\nThe bottleneck you&#39;re most likely to run into first is memory: Each thread needs a stack, and stacks take memory. If for example you are working with 1MB stacks, creating 2000 threads means you now have 2GB worth of stackspace alone, and the java heap (Where all objects live) probably also takes a GB or 2, that&#39;s 4. On your average provisioned IAAS box you don&#39;t have that much.\r\n\r\nA simple solution to that problem is that you can actually control the stack size when you create a new thread object. You can use this to make much smaller stacks, for example, 64k stacks - now 2000 threads only take an eight of a GB. Of course, a 64k stack is not capable of running particularly deeply nested methods - usually if you&#39;re creating thousands of threads, the code they actually end up running should be relatively simple and not create large stacks or do recursive calling.\r\n\r\nIf you mess this up, you&#39;ll get `StackOverflowError`. Then you know to either adjust the code or increase the stack sizes.\r\n\r\nIf you&#39;re not making thousands of threads (merely, say, hundreds), don&#39;t worry about it. Just.. make em and run em, trust the OS+CPU+JVM to sort it out for you.\r\n","title":"How much threads can be created and executed on single cpu core?","body":"<p>Modern hardware and OS combinations can easily handle thousands of them. And they can all be in the 'running state'.</p>\n<p>However, let's say you have 2000 threads, 2 CPUs in the box, and each CPU has 16 cores, then certainly at most 32 of your running threads are truly 'executing stuff' - the other ones are ready to go if any of he 32 currently actually executing threads do something that isn't CPU-dependent (for example, waiting for some bytes to flow in from the network, or bytes to be read from a disk), or just time passes (eventually the CPU+OS+JVM work together to pre-empt an executing thread - to pause it so that it doesn't hog the resources).</p>\n<p>The bottleneck you're most likely to run into first is memory: Each thread needs a stack, and stacks take memory. If for example you are working with 1MB stacks, creating 2000 threads means you now have 2GB worth of stackspace alone, and the java heap (Where all objects live) probably also takes a GB or 2, that's 4. On your average provisioned IAAS box you don't have that much.</p>\n<p>A simple solution to that problem is that you can actually control the stack size when you create a new thread object. You can use this to make much smaller stacks, for example, 64k stacks - now 2000 threads only take an eight of a GB. Of course, a 64k stack is not capable of running particularly deeply nested methods - usually if you're creating thousands of threads, the code they actually end up running should be relatively simple and not create large stacks or do recursive calling.</p>\n<p>If you mess this up, you'll get <code>StackOverflowError</code>. Then you know to either adjust the code or increase the stack sizes.</p>\n<p>If you're not making thousands of threads (merely, say, hundreds), don't worry about it. Just.. make em and run em, trust the OS+CPU+JVM to sort it out for you.</p>\n"}],"owner":{"account_id":11371334,"reputation":744,"user_id":8336836,"accept_rate":85,"display_name":"Sam Fisher"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":191,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":75337751,"answer_count":1,"score":-2,"last_activity_date":1675437750,"creation_date":1675436099,"question_id":75337418,"body_markdown":"If I have a program with multithreading and 1 dual-core cpu on working machine, how much threads can I create parallel for these 2 cores? In some articles I saw that cpu cor can handle only on thread. Does it mean that I can create only 2 threads? Or I can create multiple threads, but only 2 of them will be executed by core in a tact? I know, that this question is simple, but, I&#39;m confused a little bit","title":"How much threads can be created and executed on single cpu core?","body":"<p>If I have a program with multithreading and 1 dual-core cpu on working machine, how much threads can I create parallel for these 2 cores? In some articles I saw that cpu cor can handle only on thread. Does it mean that I can create only 2 threads? Or I can create multiple threads, but only 2 of them will be executed by core in a tact? I know, that this question is simple, but, I'm confused a little bit</p>\n"},{"tags":["python","java","linux","raspberry-pi","gamepad"],"owner":{"account_id":27664854,"reputation":153,"user_id":21116910,"display_name":"Alexander Gorodilov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675437728,"creation_date":1675437728,"question_id":75337742,"body_markdown":"I need to create an arcade cabinet with a clone of an old arcade videogame. A Raspberry PI3 must be used for the:\r\n1) Running the videogame\r\n2) External LEDs Control via GPIO\r\n\r\nA USB joystick must be used for the control of the main character. I must read the buttons and axis of the joystick from the game. The game is written on java and uses library processing-core.jar (library of the programming language [processing](www.processing.org)). But I cannot find any library to read the button states from Java that runs on Raspberry Pi OS.\r\n\r\nI used GameControlPlus - library for processing, but it doesn&#39;t work on this processor architecture with this operating system:  It can not find right native methods. I tried to emulate my keyboard and mouse via a USB controller. But I need to launch this software and select the configuration file by every launch of the raspberry pi. I founded, that the controller info lays in the dev/controls and the USB controller signals can be read from this directory using evdev, but it uses Python. But I use Java and don&#39;t know any another programming languages.","title":"Control java applet using a Joystick/Gamepad on a Raspberry Pi 3","body":"<p>I need to create an arcade cabinet with a clone of an old arcade videogame. A Raspberry PI3 must be used for the:</p>\n<ol>\n<li>Running the videogame</li>\n<li>External LEDs Control via GPIO</li>\n</ol>\n<p>A USB joystick must be used for the control of the main character. I must read the buttons and axis of the joystick from the game. The game is written on java and uses library processing-core.jar (library of the programming language processing). But I cannot find any library to read the button states from Java that runs on Raspberry Pi OS.</p>\n<p>I used GameControlPlus - library for processing, but it doesn't work on this processor architecture with this operating system:  It can not find right native methods. I tried to emulate my keyboard and mouse via a USB controller. But I need to launch this software and select the configuration file by every launch of the raspberry pi. I founded, that the controller info lays in the dev/controls and the USB controller signals can be read from this directory using evdev, but it uses Python. But I use Java and don't know any another programming languages.</p>\n"},{"tags":["java","php","aes"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1675436922,"post_id":75337378,"comment_id":132934821,"body_markdown":"If you want to decrypt, you must specify the decryption mode and IV: `cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(rndBytes))`. Mode of operation and padding must also be defined: `Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;)`. Also it is more robust to specify the encoding in `new String()`.","body":"If you want to decrypt, you must specify the decryption mode and IV: <code>cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(rndBytes))</code>. Mode of operation and padding must also be defined: <code>Cipher cipher = Cipher.getInstance(&quot;AES&#47;CBC&#47;PKCS5Padding&quot;)</code>. Also it is more robust to specify the encoding in <code>new String()</code>."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1675437818,"post_id":75337378,"comment_id":132935134,"body_markdown":"please don&#39;t delete and repost a question - instead edit the previous https://stackoverflow.com/questions/75331270/return-text-from-cipher to make it answerable","body":"please don&#39;t delete and repost a question - instead edit the previous <a href=\"https://stackoverflow.com/questions/75331270/return-text-from-cipher\" title=\"return text from cipher\">stackoverflow.com/questions/75331270/return-text-from-cipher</a> to make it answerable"},{"owner":{"account_id":26370202,"reputation":41,"user_id":20025013,"display_name":"Uncer"},"score":0,"creation_date":1675438219,"post_id":75337378,"comment_id":132935305,"body_markdown":"@kleopatra, Of course I understand everything, but wait for hours until someone opens the topic. I don&#39;t really want to. There was a problem here, I messed everything up, in fact, `SecretKeySpec` needed `AES`, and Cipther needed `AES/CBC/PKCS5Padding`, and I didn’t understand why there was `Cipher.ENCRYPT_MODE` when needed `Cipher.DECRYPT_MODE`, copied the wrong line by mistake.","body":"@kleopatra, Of course I understand everything, but wait for hours until someone opens the topic. I don&#39;t really want to. There was a problem here, I messed everything up, in fact, <code>SecretKeySpec</code> needed <code>AES</code>, and Cipther needed <code>AES&#47;CBC&#47;PKCS5Padding</code>, and I didn’t understand why there was <code>Cipher.ENCRYPT_MODE</code> when needed <code>Cipher.DECRYPT_MODE</code>, copied the wrong line by mistake."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1675443057,"post_id":75337378,"comment_id":132937006,"body_markdown":"_but wait for hours until someone opens the topic. I don&#39;t really want to_ what do you expect? This is not a service site - if you are in a hurry, consider hiring a consultant ;) Actually, this site is a community effort to build a useful knowledge base, its focus is on being helpful to __future__ readers with a similar problem as yours. Which implies you as part of builder/collector","body":"<i>but wait for hours until someone opens the topic. I don&#39;t really want to</i> what do you expect? This is not a service site - if you are in a hurry, consider hiring a consultant ;) Actually, this site is a community effort to build a useful knowledge base, its focus is on being helpful to <b>future</b> readers with a similar problem as yours. Which implies you as part of builder/collector"},{"owner":{"account_id":26370202,"reputation":41,"user_id":20025013,"display_name":"Uncer"},"score":0,"creation_date":1675443451,"post_id":75337378,"comment_id":132937138,"body_markdown":"@kleopatra, Time is money, you want to wait, I&#39;m not going to wait for anything. I didn&#39;t break anything. The closed question also said, or create a new one. Created. More questions?","body":"@kleopatra, Time is money, you want to wait, I&#39;m not going to wait for anything. I didn&#39;t break anything. The closed question also said, or create a new one. Created. More questions?"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1675443930,"post_id":75337378,"comment_id":132937297,"body_markdown":"Beware: every deleted question is a step into a question ban. If you disagree with the site rules, please discuss them on meta. Anyway, your options: a) follow the site rules b) go elsewhere ..","body":"Beware: every deleted question is a step into a question ban. If you disagree with the site rules, please discuss them on meta. Anyway, your options: a) follow the site rules b) go elsewhere .."},{"owner":{"account_id":26370202,"reputation":41,"user_id":20025013,"display_name":"Uncer"},"score":0,"creation_date":1675445437,"post_id":75337378,"comment_id":132937800,"body_markdown":"@kleopatra, Well, then you need to write it right after closing, and not abroad or after, when they already ban you. And sending everyone to another place is such an option.","body":"@kleopatra, Well, then you need to write it right after closing, and not abroad or after, when they already ban you. And sending everyone to another place is such an option."}],"answers":[{"tags":[],"owner":{"account_id":26370202,"reputation":41,"user_id":20025013,"display_name":"Uncer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675437478,"creation_date":1675437478,"answer_id":75337694,"question_id":75337378,"body_markdown":"Hurrah! Understood! Thanx @Topaco.\r\n\r\n    final Decoder decoder = Base64.getDecoder();\r\n    final byte[] encBytes = decoder.decode(&quot;n+hHeLU4eI9r23ckxOwBOA==&quot;),\r\n                 keyPass = decoder.decode(&quot;gGwdF6FDd68C/ANEqlqgOrsLqqC11u2JYn7NEJP10DA=&quot;),\r\n                 rndBytes = decoder.decode(&quot;0PLpHMRYGwDBgcBsbeI3Qw==&quot;);\r\n    final String algo = &quot;AES&quot;;\r\n    final SecretKeySpec secretKey = new SecretKeySpec(keyPass, algo);\r\n    final Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n    cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(rndBytes));\r\n    final byte[] decBytes = cipher.doFinal(encBytes);\r\n    System.out.println(new String(decBytes, StandardCharsets.UTF_8)); // YOU IN","title":"How to write an analogue of returning text","body":"<p>Hurrah! Understood! Thanx @Topaco.</p>\n<pre><code>final Decoder decoder = Base64.getDecoder();\nfinal byte[] encBytes = decoder.decode(&quot;n+hHeLU4eI9r23ckxOwBOA==&quot;),\n             keyPass = decoder.decode(&quot;gGwdF6FDd68C/ANEqlqgOrsLqqC11u2JYn7NEJP10DA=&quot;),\n             rndBytes = decoder.decode(&quot;0PLpHMRYGwDBgcBsbeI3Qw==&quot;);\nfinal String algo = &quot;AES&quot;;\nfinal SecretKeySpec secretKey = new SecretKeySpec(keyPass, algo);\nfinal Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\ncipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(rndBytes));\nfinal byte[] decBytes = cipher.doFinal(encBytes);\nSystem.out.println(new String(decBytes, StandardCharsets.UTF_8)); // YOU IN\n</code></pre>\n"}],"owner":{"account_id":26370202,"reputation":41,"user_id":20025013,"display_name":"Uncer"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75337694,"answer_count":1,"score":-1,"last_activity_date":1675437478,"creation_date":1675435889,"question_id":75337378,"body_markdown":"I don&#39;t understand how to do this in Java:\r\n\r\n    $text = &quot;YOU IN&quot;;\r\n    // get the password key via: `base64_encode(openssl_random_pseudo_bytes(32)) = gGwdF6FDd68C/ANEqlqgOrsLqqC11u2JYn7NEJP10DA` = and further:\r\n    $keyPass = base64_decode(&quot;gGwdF6FDd68C/ANEqlqgOrsLqqC11u2JYn7NEJP10DA=&quot;);\r\n    $rndBytes = openssl_random_pseudo_bytes(openssl_cipher_iv_length(&#39;aes-256-cbc&#39;)); // 0PLpHMRYGwDBgcBsbeI3Qw==\r\n    $encText = openssl_encrypt($text, &#39;aes-256-cbc&#39;, $keyPass, 0, $rndBytes); // n+hHeLU4eI9r23ckxOwBOA==\r\n\r\nSo that you can also return this text without any problems:\r\n\r\n    echo openssl_decrypt(\r\n        base64_decode(&quot;n+hHeLU4eI9r23ckxOwBOA==&quot;),\r\n        &#39;aes-256-cbc&#39;,\r\n        base64_decode(&quot;gGwdF6FDd68C/ANEqlqgOrsLqqC11u2JYn7NEJP10DA=&quot;),\r\n        OPENSSL_RAW_DATA,\r\n        base64_decode(&quot;0PLpHMRYGwDBgcBsbeI3Qw==&quot;)\r\n    ); // YOU IN\r\n\r\nHow can I do this in Java?\r\n\r\nThe task in Java is to return, not to encrypt.  \r\nThat is, the resulting `$encText` will always be different, while any one will fit `openssl_decrypt`.\r\n\r\nTried to do like this:\r\n\r\n    final Decoder decoder = Base64.getDecoder();\r\n    final byte[] encBytes = decoder.decode(&quot;n+hHeLU4eI9r23ckxOwBOA==&quot;),\r\n                 keyPass = decoder.decode(&quot;gGwdF6FDd68C/ANEqlqgOrsLqqC11u2JYn7NEJP10DA=&quot;),\r\n                 rndBytes = decoder.decode(&quot;0PLpHMRYGwDBgcBsbeI3Qw==&quot;);\r\n    final String algo = &quot;AES&quot;;\r\n    final SecretKeySpec secretKey = new SecretKeySpec(keyPass, algo);\r\n    final Cipher cipher = Cipher.getInstance(algo);\r\n    cipher.init(Cipher.ENCRYPT_MODE, secretKey);\r\n    final byte[] decBytes = cipher.doFinal(encBytes);\r\n    System.out.println(new String(decBytes));\r\n    //\r\n    // Return hieroglyphs:\r\n    //\r\n    // ��*�#в��\\��i�9���:�_�`�-U��\r\n\r\nI don&#39;t know how to find this `aes-256-cbc`...\r\nIf you try to change the line:\r\n\r\n    cipher.init(Cipher.ENCRYPT_MODE, secretKey, new IvParameterSpec(rndBytes));\r\n\r\nCrashes with an error:  \r\n`InvalidAlgorithmParameterException: ECB mode cannot use IV`\r\n","title":"How to write an analogue of returning text","body":"<p>I don't understand how to do this in Java:</p>\n<pre><code>$text = &quot;YOU IN&quot;;\n// get the password key via: `base64_encode(openssl_random_pseudo_bytes(32)) = gGwdF6FDd68C/ANEqlqgOrsLqqC11u2JYn7NEJP10DA` = and further:\n$keyPass = base64_decode(&quot;gGwdF6FDd68C/ANEqlqgOrsLqqC11u2JYn7NEJP10DA=&quot;);\n$rndBytes = openssl_random_pseudo_bytes(openssl_cipher_iv_length('aes-256-cbc')); // 0PLpHMRYGwDBgcBsbeI3Qw==\n$encText = openssl_encrypt($text, 'aes-256-cbc', $keyPass, 0, $rndBytes); // n+hHeLU4eI9r23ckxOwBOA==\n</code></pre>\n<p>So that you can also return this text without any problems:</p>\n<pre><code>echo openssl_decrypt(\n    base64_decode(&quot;n+hHeLU4eI9r23ckxOwBOA==&quot;),\n    'aes-256-cbc',\n    base64_decode(&quot;gGwdF6FDd68C/ANEqlqgOrsLqqC11u2JYn7NEJP10DA=&quot;),\n    OPENSSL_RAW_DATA,\n    base64_decode(&quot;0PLpHMRYGwDBgcBsbeI3Qw==&quot;)\n); // YOU IN\n</code></pre>\n<p>How can I do this in Java?</p>\n<p>The task in Java is to return, not to encrypt.<br />\nThat is, the resulting <code>$encText</code> will always be different, while any one will fit <code>openssl_decrypt</code>.</p>\n<p>Tried to do like this:</p>\n<pre><code>final Decoder decoder = Base64.getDecoder();\nfinal byte[] encBytes = decoder.decode(&quot;n+hHeLU4eI9r23ckxOwBOA==&quot;),\n             keyPass = decoder.decode(&quot;gGwdF6FDd68C/ANEqlqgOrsLqqC11u2JYn7NEJP10DA=&quot;),\n             rndBytes = decoder.decode(&quot;0PLpHMRYGwDBgcBsbeI3Qw==&quot;);\nfinal String algo = &quot;AES&quot;;\nfinal SecretKeySpec secretKey = new SecretKeySpec(keyPass, algo);\nfinal Cipher cipher = Cipher.getInstance(algo);\ncipher.init(Cipher.ENCRYPT_MODE, secretKey);\nfinal byte[] decBytes = cipher.doFinal(encBytes);\nSystem.out.println(new String(decBytes));\n//\n// Return hieroglyphs:\n//\n// ��*�#в��\\��i�9���:�_�`�-U��\n</code></pre>\n<p>I don't know how to find this <code>aes-256-cbc</code>...\nIf you try to change the line:</p>\n<pre><code>cipher.init(Cipher.ENCRYPT_MODE, secretKey, new IvParameterSpec(rndBytes));\n</code></pre>\n<p>Crashes with an error:<br />\n<code>InvalidAlgorithmParameterException: ECB mode cannot use IV</code></p>\n"},{"tags":["java","html","servlets"],"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":1,"creation_date":1675379221,"post_id":75329685,"comment_id":132922398,"body_markdown":"Use something like Thymeleaf. It does pretty much what you are looking for.","body":"Use something like Thymeleaf. It does pretty much what you are looking for."},{"owner":{"account_id":20757739,"reputation":15,"user_id":15243760,"display_name":"Gustavo Morais"},"score":0,"creation_date":1675434554,"post_id":75329685,"comment_id":132934059,"body_markdown":"I should add that I want to implement the mechanism myself, I&#39;m not looking for a tool that does everything for me. But thanks anyway!","body":"I should add that I want to implement the mechanism myself, I&#39;m not looking for a tool that does everything for me. But thanks anyway!"}],"answers":[{"tags":[],"owner":{"account_id":21016488,"reputation":35,"user_id":15443835,"display_name":"huy vo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675386049,"creation_date":1675386049,"answer_id":75330472,"question_id":75329685,"body_markdown":"you can try this by using Velocity\r\n\r\nadd Velocity dependency\r\nput this in your index.tpl\r\n\r\n    String templateFile = &quot;index.tpl&quot;;\r\n    VelocityEngine velocityEngine = new VelocityEngine();\r\n    velocityEngine.init();\r\n    Template template = velocityEngine.getTemplate(templateFile);\r\n        \r\n    VelocityContext context = new VelocityContext();\r\n    context.put(&quot;pet.name&quot;, &quot;Fluffy&quot;);\r\n    context.put(&quot;pet.age&quot;, 5);\r\n        \r\n    StringWriter writer = new StringWriter();\r\n    template.merge(context, writer);\r\n    String result = writer.toString();\r\n\r\nset content for response \r\n\r\n    response.setContentType(&quot;text/html&quot;);\r\n    response.getWriter().write(result);\r\n\r\n\r\n\r\n","title":"Process html with java servlet","body":"<p>you can try this by using Velocity</p>\n<p>add Velocity dependency\nput this in your index.tpl</p>\n<pre><code>String templateFile = &quot;index.tpl&quot;;\nVelocityEngine velocityEngine = new VelocityEngine();\nvelocityEngine.init();\nTemplate template = velocityEngine.getTemplate(templateFile);\n    \nVelocityContext context = new VelocityContext();\ncontext.put(&quot;pet.name&quot;, &quot;Fluffy&quot;);\ncontext.put(&quot;pet.age&quot;, 5);\n    \nStringWriter writer = new StringWriter();\ntemplate.merge(context, writer);\nString result = writer.toString();\n</code></pre>\n<p>set content for response</p>\n<pre><code>response.setContentType(&quot;text/html&quot;);\nresponse.getWriter().write(result);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675437164,"creation_date":1675437164,"answer_id":75337634,"question_id":75329685,"body_markdown":"In your servlet code for the servlet at &quot;/&quot;, in the doGet() method read the path to find your template file:\r\n\r\n       public void doGet(HttpServletRequest request, HttpServletResponse response)\r\n          throws ServletException, IOException {\r\n    \r\n       String pathFromUrl = request.getPathInfo();\r\n    \r\n       String filePath = BASE_PATH + &quot;/&quot; + pathFromUrl;\r\n       \r\n       byte[] bytes = Files.readAllBytes(Paths.get(filePath));\r\n       String fileContent = new String (bytes);\r\n    \r\n       String id = request.getParameterByName(&quot;id&quot;);\r\n    \r\n       Pet pet = // get pet with id\r\n    \r\n       // TODO modify fileContent with pet content\r\n    \r\n       response.setStatus(HttpServletResponse.SC_OK);\r\n       response.getWriter().write(fileContent);\r\n       response.getWriter().flush();\r\n    }\r\n\r\n","title":"Process html with java servlet","body":"<p>In your servlet code for the servlet at &quot;/&quot;, in the doGet() method read the path to find your template file:</p>\n<pre><code>   public void doGet(HttpServletRequest request, HttpServletResponse response)\n      throws ServletException, IOException {\n\n   String pathFromUrl = request.getPathInfo();\n\n   String filePath = BASE_PATH + &quot;/&quot; + pathFromUrl;\n   \n   byte[] bytes = Files.readAllBytes(Paths.get(filePath));\n   String fileContent = new String (bytes);\n\n   String id = request.getParameterByName(&quot;id&quot;);\n\n   Pet pet = // get pet with id\n\n   // TODO modify fileContent with pet content\n\n   response.setStatus(HttpServletResponse.SC_OK);\n   response.getWriter().write(fileContent);\n   response.getWriter().flush();\n}\n</code></pre>\n"}],"owner":{"account_id":20757739,"reputation":15,"user_id":15243760,"display_name":"Gustavo Morais"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75337634,"answer_count":2,"score":0,"last_activity_date":1675437164,"creation_date":1675377864,"question_id":75329685,"body_markdown":"I have an html template file, lets call it index.tpl, which I want to process with a java servlet.\r\nThis is what index.tpl looks like:\r\n\r\n```\r\n&lt;html&gt;\r\n  &lt;body&gt;\r\n    &lt;h1&gt; Pet profile - {pet.name} &lt;/h1&gt;\r\n    &lt;p&gt; age {pet.age} &lt;/p&gt;\r\n    etc.\r\n  &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nHow can I make a servlet that takes this html as an input, processes it, and sends it back to the browser? \r\n\r\nThe user journey is basically:\r\n\r\n1.User types something like webAppDomain.com/index.tpl?id=1\r\n\r\n2.Servlet processes index.tpl and shows the filled template to the user\r\n\r\nI&#39;m specifically interested in knowing how the servlet can take the html code as an input to process.\r\n\r\nI&#39;ve tried searching for some way to do this, but I&#39;ve literally just picked up servlets and I&#39;m a bit lost.","title":"Process html with java servlet","body":"<p>I have an html template file, lets call it index.tpl, which I want to process with a java servlet.\nThis is what index.tpl looks like:</p>\n<pre><code>&lt;html&gt;\n  &lt;body&gt;\n    &lt;h1&gt; Pet profile - {pet.name} &lt;/h1&gt;\n    &lt;p&gt; age {pet.age} &lt;/p&gt;\n    etc.\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>How can I make a servlet that takes this html as an input, processes it, and sends it back to the browser?</p>\n<p>The user journey is basically:</p>\n<p>1.User types something like webAppDomain.com/index.tpl?id=1</p>\n<p>2.Servlet processes index.tpl and shows the filled template to the user</p>\n<p>I'm specifically interested in knowing how the servlet can take the html code as an input to process.</p>\n<p>I've tried searching for some way to do this, but I've literally just picked up servlets and I'm a bit lost.</p>\n"},{"tags":["java","hibernate","jpa","hibernate-mapping"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675437154,"creation_date":1675437154,"answer_id":75337631,"question_id":75328749,"body_markdown":"I think what you are looking for is discriminator based joined inheritance: https://en.wikibooks.org/wiki/Java_Persistence/Inheritance#Example_joined_inheritance_XML\r\n\r\nYou&#39;d just mention the same table name for every class except for the `SpecialOutFile` one.","title":"Migrating Hibernate mixed inheritance from hbm.xml to orm.xml","body":"<p>I think what you are looking for is discriminator based joined inheritance: <a href=\"https://en.wikibooks.org/wiki/Java_Persistence/Inheritance#Example_joined_inheritance_XML\" rel=\"nofollow noreferrer\">https://en.wikibooks.org/wiki/Java_Persistence/Inheritance#Example_joined_inheritance_XML</a></p>\n<p>You'd just mention the same table name for every class except for the <code>SpecialOutFile</code> one.</p>\n"}],"owner":{"account_id":234378,"reputation":8776,"user_id":500478,"accept_rate":75,"display_name":"Bastien Jansen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":417,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1675437154,"creation_date":1675370743,"question_id":75328749,"body_markdown":"Consider the following Java hierarchy:\r\n\r\n[![Java class hierarchy][1]][1]\r\n\r\nI want the whole hierarchy to be stored in a single table named `file`, except for `SpecialOutFile` which should have its dedicated `special_file` table.\r\n\r\nThis works perfectly well using hbm.xml mappings:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;hibernate-mapping xmlns=&quot;http://www.hibernate.org/xsd/hibernate-mapping&quot;\r\n\t\t\t\t   default-access=&quot;field&quot;\r\n\t\t\t\t   default-cascade=&quot;all&quot;\r\n\t\t\t\t   default-lazy=&quot;true&quot;&gt;\r\n\r\n\t&lt;class name=&quot;com.example.demo.File&quot;&gt;\r\n\t\t&lt;id name=&quot;id&quot;/&gt;\r\n\t\t&lt;discriminator column=&quot;file_type&quot;/&gt;\r\n\r\n\t\t&lt;subclass name=&quot;com.example.demo.InFile&quot; discriminator-value=&quot;InFile&quot;/&gt;\r\n\t\t&lt;subclass name=&quot;com.example.demo.TypedOutFile1&quot; discriminator-value=&quot;TypedOutFile1&quot;/&gt;\r\n\t\t&lt;subclass name=&quot;com.example.demo.TypedOutFile2&quot; discriminator-value=&quot;TypedOutFile2&quot;/&gt;\r\n\t\t&lt;subclass name=&quot;com.example.demo.OutFile&quot; discriminator-value=&quot;OutFile&quot;/&gt;\r\n\t&lt;/class&gt;\r\n\r\n\t&lt;class name=&quot;com.example.demo.SpecialOutFile&quot; table=&quot;special_file&quot;&gt;\r\n\t\t&lt;id name=&quot;id&quot;/&gt;\r\n\t\t&lt;property name=&quot;moreData&quot;/&gt;\r\n\t&lt;/class&gt;\r\n&lt;/hibernate-mapping&gt;\r\n```\r\n\r\nWhen I persist an `OutFile`, only one record is inserted, in `file`.  \r\nWhen I persist a `SpecialOutFile`, only one record is inserted, in `special_file`.\r\n\r\nNow I&#39;d like to do the same in orm.xml, as hbm.xml became deprecated in Hibernate 6. However, I cannot manage to reproduce the exact same behavior.\r\n\r\nThe closest I can get is using a secondary table, but now when I persist a `SpecialOutFile` two records are created: one in `file` and one in `special_file`:\r\n\r\n```\r\nHibernate: insert into file (some_data, type, id) values (?, &#39;SpecialOutFile&#39;, ?)\r\nHibernate: insert into special_file (more_data, id) values (?, ?)\r\n```\r\n\r\nHere&#39;s my current version of orm.xml:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;entity-mappings version=&quot;2.0&quot;\r\n\t\t\t\t xmlns=&quot;http://java.sun.com/xml/ns/persistence/orm&quot;\r\n\t\t\t\t xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t\t\t xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_2_0.xsd&quot;&gt;\r\n\r\n\t&lt;access&gt;FIELD&lt;/access&gt;\r\n\r\n\t&lt;entity class=&quot;com.example.demo.File&quot;&gt;\r\n\t\t&lt;discriminator-column name=&quot;type&quot;/&gt;\r\n\t\t&lt;attributes&gt;\r\n\t\t\t&lt;id name=&quot;id&quot;/&gt;\r\n\t\t&lt;/attributes&gt;\r\n\t&lt;/entity&gt;\r\n\r\n\t&lt;entity class=&quot;com.example.demo.InFile&quot;&gt;\r\n\t\t&lt;discriminator-value&gt;InFile&lt;/discriminator-value&gt;\r\n\t&lt;/entity&gt;\r\n\t&lt;entity class=&quot;com.example.demo.TypedOutFile1&quot;&gt;\r\n\t\t&lt;discriminator-value&gt;TypedOutFile1&lt;/discriminator-value&gt;\r\n\t&lt;/entity&gt;\r\n\t&lt;entity class=&quot;com.example.demo.TypedOutFile2&quot;&gt;\r\n\t\t&lt;discriminator-value&gt;TypedOutFile2&lt;/discriminator-value&gt;\r\n\t&lt;/entity&gt;\r\n\t&lt;entity class=&quot;com.example.demo.OutFile&quot;&gt;\r\n\t\t&lt;discriminator-value&gt;OutFile&lt;/discriminator-value&gt;\r\n\t&lt;/entity&gt;\r\n\r\n\t&lt;entity class=&quot;com.example.demo.SpecialOutFile&quot;&gt;\r\n\t\t&lt;secondary-table name=&quot;special_file&quot;/&gt;\r\n\t\t&lt;attribute-override name=&quot;id&quot;&gt;\r\n\t\t\t&lt;column table=&quot;special_file&quot;/&gt;\r\n\t\t&lt;/attribute-override&gt;\r\n\t\t&lt;attributes&gt;\r\n\t\t\t&lt;basic name=&quot;moreData&quot;&gt;\r\n\t\t\t\t&lt;column table=&quot;special_file&quot;/&gt;\r\n\t\t\t&lt;/basic&gt;\r\n\t\t&lt;/attributes&gt;\r\n\t&lt;/entity&gt;\r\n&lt;/entity-mappings&gt;\r\n```\r\n\r\nIs there a way to move all inherited attributes into the secondary table and completely get rid of the primary table when persisting a `SpecialOutFile`, like I was able to do with hbm.xml mappings?\r\n\r\nMinimal reproducible exemple here: https://github.com/bjansen/so-question-75328749\r\n\r\n  [1]: https://i.stack.imgur.com/Cgz8E.png","title":"Migrating Hibernate mixed inheritance from hbm.xml to orm.xml","body":"<p>Consider the following Java hierarchy:</p>\n<p><a href=\"https://i.stack.imgur.com/Cgz8E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Cgz8E.png\" alt=\"Java class hierarchy\" /></a></p>\n<p>I want the whole hierarchy to be stored in a single table named <code>file</code>, except for <code>SpecialOutFile</code> which should have its dedicated <code>special_file</code> table.</p>\n<p>This works perfectly well using hbm.xml mappings:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;hibernate-mapping xmlns=&quot;http://www.hibernate.org/xsd/hibernate-mapping&quot;\n                   default-access=&quot;field&quot;\n                   default-cascade=&quot;all&quot;\n                   default-lazy=&quot;true&quot;&gt;\n\n    &lt;class name=&quot;com.example.demo.File&quot;&gt;\n        &lt;id name=&quot;id&quot;/&gt;\n        &lt;discriminator column=&quot;file_type&quot;/&gt;\n\n        &lt;subclass name=&quot;com.example.demo.InFile&quot; discriminator-value=&quot;InFile&quot;/&gt;\n        &lt;subclass name=&quot;com.example.demo.TypedOutFile1&quot; discriminator-value=&quot;TypedOutFile1&quot;/&gt;\n        &lt;subclass name=&quot;com.example.demo.TypedOutFile2&quot; discriminator-value=&quot;TypedOutFile2&quot;/&gt;\n        &lt;subclass name=&quot;com.example.demo.OutFile&quot; discriminator-value=&quot;OutFile&quot;/&gt;\n    &lt;/class&gt;\n\n    &lt;class name=&quot;com.example.demo.SpecialOutFile&quot; table=&quot;special_file&quot;&gt;\n        &lt;id name=&quot;id&quot;/&gt;\n        &lt;property name=&quot;moreData&quot;/&gt;\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n<p>When I persist an <code>OutFile</code>, only one record is inserted, in <code>file</code>.<br />\nWhen I persist a <code>SpecialOutFile</code>, only one record is inserted, in <code>special_file</code>.</p>\n<p>Now I'd like to do the same in orm.xml, as hbm.xml became deprecated in Hibernate 6. However, I cannot manage to reproduce the exact same behavior.</p>\n<p>The closest I can get is using a secondary table, but now when I persist a <code>SpecialOutFile</code> two records are created: one in <code>file</code> and one in <code>special_file</code>:</p>\n<pre><code>Hibernate: insert into file (some_data, type, id) values (?, 'SpecialOutFile', ?)\nHibernate: insert into special_file (more_data, id) values (?, ?)\n</code></pre>\n<p>Here's my current version of orm.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;entity-mappings version=&quot;2.0&quot;\n                 xmlns=&quot;http://java.sun.com/xml/ns/persistence/orm&quot;\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n                 xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_2_0.xsd&quot;&gt;\n\n    &lt;access&gt;FIELD&lt;/access&gt;\n\n    &lt;entity class=&quot;com.example.demo.File&quot;&gt;\n        &lt;discriminator-column name=&quot;type&quot;/&gt;\n        &lt;attributes&gt;\n            &lt;id name=&quot;id&quot;/&gt;\n        &lt;/attributes&gt;\n    &lt;/entity&gt;\n\n    &lt;entity class=&quot;com.example.demo.InFile&quot;&gt;\n        &lt;discriminator-value&gt;InFile&lt;/discriminator-value&gt;\n    &lt;/entity&gt;\n    &lt;entity class=&quot;com.example.demo.TypedOutFile1&quot;&gt;\n        &lt;discriminator-value&gt;TypedOutFile1&lt;/discriminator-value&gt;\n    &lt;/entity&gt;\n    &lt;entity class=&quot;com.example.demo.TypedOutFile2&quot;&gt;\n        &lt;discriminator-value&gt;TypedOutFile2&lt;/discriminator-value&gt;\n    &lt;/entity&gt;\n    &lt;entity class=&quot;com.example.demo.OutFile&quot;&gt;\n        &lt;discriminator-value&gt;OutFile&lt;/discriminator-value&gt;\n    &lt;/entity&gt;\n\n    &lt;entity class=&quot;com.example.demo.SpecialOutFile&quot;&gt;\n        &lt;secondary-table name=&quot;special_file&quot;/&gt;\n        &lt;attribute-override name=&quot;id&quot;&gt;\n            &lt;column table=&quot;special_file&quot;/&gt;\n        &lt;/attribute-override&gt;\n        &lt;attributes&gt;\n            &lt;basic name=&quot;moreData&quot;&gt;\n                &lt;column table=&quot;special_file&quot;/&gt;\n            &lt;/basic&gt;\n        &lt;/attributes&gt;\n    &lt;/entity&gt;\n&lt;/entity-mappings&gt;\n</code></pre>\n<p>Is there a way to move all inherited attributes into the secondary table and completely get rid of the primary table when persisting a <code>SpecialOutFile</code>, like I was able to do with hbm.xml mappings?</p>\n<p>Minimal reproducible exemple here: <a href=\"https://github.com/bjansen/so-question-75328749\" rel=\"nofollow noreferrer\">https://github.com/bjansen/so-question-75328749</a></p>\n"},{"tags":["java","spring-boot","maven","pom.xml"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1674993967,"post_id":75273030,"comment_id":132828720,"body_markdown":"I&#39;m a bit puzzled. This is documented in the release notes: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes","body":"I&#39;m a bit puzzled. This is documented in the release notes: <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/wiki/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":16243302,"reputation":98,"user_id":11729079,"display_name":"bakarJc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674974634,"creation_date":1674974634,"answer_id":75273059,"question_id":75273030,"body_markdown":"The following import should work:\r\n\r\n```\r\nimport javax.validation.constraints.NotBlank;\r\n```\r\n","title":"How to import @NotBlank after adding org.springframework.boot dependency in pom.xml","body":"<p>The following import should work:</p>\n<pre><code>import javax.validation.constraints.NotBlank;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1674991129,"creation_date":1674991129,"answer_id":75274457,"question_id":75273030,"body_markdown":"From Spring Boot 3.0.0 it uses Java 17. In Java 17 the location of of validators has moved from javax.validation to jakarta.validation - see [Bug: Spring Boot 3.0.0-M1 cannot find javax.validation#2953][1] - not really a bug.\r\n\r\nYour options are to stay with spring-boot-starter-parent v3.0.2 (jdk17) and use the following import:\r\n\r\n    import jakarta.validation.constraints.NotBlank;\r\n\r\nOr to drop spring-boot-starter-parent to a version before 3.0.0, eg 2.7.8 and use the following import. I recomment this unless you really need Java17.\r\n\r\n    import javax.validation.constraints.NotBlank;\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/issues/29533\r\n\r\n","title":"How to import @NotBlank after adding org.springframework.boot dependency in pom.xml","body":"<p>From Spring Boot 3.0.0 it uses Java 17. In Java 17 the location of of validators has moved from javax.validation to jakarta.validation - see <a href=\"https://github.com/spring-projects/spring-boot/issues/29533\" rel=\"nofollow noreferrer\">Bug: Spring Boot 3.0.0-M1 cannot find javax.validation#2953</a> - not really a bug.</p>\n<p>Your options are to stay with spring-boot-starter-parent v3.0.2 (jdk17) and use the following import:</p>\n<pre><code>import jakarta.validation.constraints.NotBlank;\n</code></pre>\n<p>Or to drop spring-boot-starter-parent to a version before 3.0.0, eg 2.7.8 and use the following import. I recomment this unless you really need Java17.</p>\n<pre><code>import javax.validation.constraints.NotBlank;\n</code></pre>\n"}],"owner":{"account_id":16423002,"reputation":40,"user_id":11863754,"display_name":"mvalpha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":815,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75274457,"answer_count":2,"score":2,"last_activity_date":1675436584,"creation_date":1674974132,"question_id":75273030,"body_markdown":"I am new to spring-boot and I am following freecodecamp&#39;s tutorial and there the tutor imported @NotBlank, I am trying to import it from org.springframework.boot but it is not working. \r\nCan anyone tell me how to import @NotBlank.\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;learning-spring&lt;/name&gt;\r\n\t&lt;description&gt;Trying to learn&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;annotations&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;20.1.0&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\nThis is pom.xml and I have added org.springframework.boot in the dependency\r\n\r\n```\r\n&lt;dependency&gt;\r\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI don&#39;t know how to import it into my code?\r\n\r\nThis is my code, help me out.\r\n\r\n```\r\npackage com.example.demo.model;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport java.util.UUID;\r\npublic class Person\r\n{\r\n    private final UUID id;\r\n\r\n    @NotBlank\r\n    private final String name;\r\n\r\n    public Person(@JsonProperty(&quot;id&quot;)UUID id,\r\n                  @JsonProperty(&quot;name&quot;) String name)\r\n    {\r\n        this.id = id;\r\n        this.name = name;\r\n    }\r\n    public UUID getId()\r\n    {\r\n        return id;\r\n    }\r\n    public String getName()\r\n    {\r\n        return name;\r\n    }\r\n}\r\n\r\n```\r\nThanks in advance.\r\n\r\n\r\n","title":"How to import @NotBlank after adding org.springframework.boot dependency in pom.xml","body":"<p>I am new to spring-boot and I am following freecodecamp's tutorial and there the tutor imported @NotBlank, I am trying to import it from org.springframework.boot but it is not working.\nCan anyone tell me how to import @NotBlank.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;learning-spring&lt;/name&gt;\n    &lt;description&gt;Trying to learn&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\n            &lt;artifactId&gt;annotations&lt;/artifactId&gt;\n            &lt;version&gt;20.1.0&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>This is pom.xml and I have added org.springframework.boot in the dependency</p>\n<pre><code>&lt;dependency&gt;\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I don't know how to import it into my code?</p>\n<p>This is my code, help me out.</p>\n<pre><code>package com.example.demo.model;\n\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport java.util.UUID;\npublic class Person\n{\n    private final UUID id;\n\n    @NotBlank\n    private final String name;\n\n    public Person(@JsonProperty(&quot;id&quot;)UUID id,\n                  @JsonProperty(&quot;name&quot;) String name)\n    {\n        this.id = id;\n        this.name = name;\n    }\n    public UUID getId()\n    {\n        return id;\n    }\n    public String getName()\n    {\n        return name;\n    }\n}\n\n</code></pre>\n<p>Thanks in advance.</p>\n"},{"tags":["javascript","java","angularjs","spring","spring-mvc"],"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":339,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1675436519,"creation_date":1446318976,"question_id":33455562,"body_markdown":"I am decomposing &lt;a href=&quot;https://github.com/singularity-sg/spring-petclinic&quot;&gt;the Angularjs branch of the Spring petclinic sample app&lt;/a&gt; to figure out how it works.  Towards that end, I deleted the entire contents of &lt;a href=&quot;https://github.com/singularity-sg/spring-petclinic/tree/master/src/main/webapp&quot;&gt;src/main/webapp/&lt;/a&gt; and replaced it with:  \r\n  \r\n    src/main/webapp/resources/css/bootstrap.cs\r\n    src/main/webapp/resources/css/my.css\r\n    src/main/webapp/js/lib/angular.js\r\n    src/main/webapp/includes/index_testincl.html\r\n    src/main/webapp/testController.js\r\n    src/main/webapp/index.html\r\n  \r\nThere is nothing else in &lt;a href=&quot;https://github.com/singularity-sg/spring-petclinic/tree/master/src/main/webapp&quot;&gt;`src/main/webapp/`&lt;/a&gt; besides the 6 files listed above.\r\n  \r\nThe Spring config files remain the same and are at &lt;a href=&quot;https://github.com/singularity-sg/spring-petclinic/tree/master/src/main/resources/spring&quot;&gt;this link&lt;/a&gt;.\r\n \r\nThe stripped and minimally-replaced version works perfectly in Eclipse on a local devbox when called from `localhost:8080/appname`, but when I bundle it into a war file and upload it to a remote server, it is not able to serve the JavaScript, CSS, or HTML include files that are a critical part of its functioning.  What do I need to change in the setup in order to get the Angularjs functionality to work properly in the remote web server when someone types mydomain.com into their browser?\r\n\r\nThere is no CSS or JavaScript in the content served by the remote web server, so there are no links.  There is only plain text.  When I have the network tab of the developer tools open in Firefox, the following output is displayed:  \r\n  \r\n&lt;img src=&quot;https://i.stack.imgur.com/6Klhy.gif&quot;&gt;\r\n&lt;!-- source: https://s9.postimg.org/xp4kdrxzz/networktab.gif --&gt;\r\n  \r\nThere is no console tab output for any of the above requests.\r\n  \r\nThe goal is to better understand how the connection between AngularJS and Spring MVC needs to be set up. The more sophisticated versions built up from these simple files need to do database transactions using Java and Spring MVC.  Thus, any answer needs to be compatible with Java and Spring MVC.    \r\n  \r\nThe Tomcat server that serves up mydomain.com at the remote web server also successfully serves up other war files that are spring-only using jsp, so the problem is related to adding AngularJS and HTML. \r\n  \r\nNote: The exact clone of the AngularJS Spring petclinic app also does not run when bundled into a war and deployed at mydomain.com, but this OP uses a greatly simplified AngularJS app in order to more effectively isolate the specific mechanism required to get Tomcat, spring-mvc, and AngularJS to work together on a web server.  \r\n  \r\n\r\n---\r\n\r\nSteps to recreate this problem\r\n---\r\n\r\nThe problem can be recreated with the following steps:  \r\n  \r\n1.) Navigate to `/home/username/git`  \r\n\r\n2.) git clone https://github.com/singularity-sg/spring-petclinic.git    \r\n  \r\n3.) Eclipse -&gt; File -&gt; Import -&gt; Maven -&gt; Existing Maven project  \r\n  \r\n4.) Eclipse -&gt; Project Explorer -&gt; Rt-Click-Project -&gt; Maven -&gt; Download Sources  \r\n  \r\n5.) Eclipse -&gt; Project Explorer -&gt; Rt-Click-Project -&gt; Maven -&gt; Update Project   \r\n  \r\n6.) Delete everything in `src/main/webapp` except keep: `src/main/webapp/js/lib/angular.js`  \r\n  \r\n7.) Download `bootstrap.css` version 3.3.5 from this url: http://getbootstrap.com/getting-started/  (It is in a zip file.) Once it is downloaded, copy it to the following location in the project:  `src/main/webapp/resources/css/bootstrap.cs`  (You will need to create the `src/main/webapp/resources/` and `src/main/webapp/resources/css` directories.)\r\n  \r\n8.) Create `src/main/webapp/resources/css/my.css` to include whatever minimal styles you want.  \r\n  \r\n9.) Create `src/main/webapp/index.html` and add the following:  \r\n    \r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    \t&lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    \t&lt;title&gt;title of page&lt;/title&gt;\r\n    \t&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;resources/css/bootstrap.css&quot;&gt;\r\n    \t&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;resources/css/my.css&quot;&gt;\r\n    &lt;/head&gt;\r\n    &lt;body ng-app=&quot;testApp&quot;&gt;\r\n        &lt;script src=&quot;js/lib/angular.js&quot;&gt;&lt;/script&gt;\r\n        &lt;script type=&quot;text/javascript&quot; src=&quot;testController.js&quot;&gt;&lt;/script&gt;\r\n    \r\n    &lt;div ng-controller=&quot;testController&quot;&gt;  \r\n    &lt;table width=100%&gt;\r\n    \t&lt;tr&gt;\r\n    \t\t&lt;td align=center&gt;\r\n    \t\t\t&lt;table&gt;\r\n    \t\t\t\t&lt;tr&gt;\r\n    \t\t\t\t\t&lt;th class=&quot;toc&quot;&gt; \r\n    \t\t\t\t\t\t&lt;a class=&quot;btn btn-success&quot; role=&quot;button&quot; ng-click=&quot;homeFunc()&quot;&gt;Home&lt;/a&gt;\r\n    \t\t\t\t\t&lt;/th&gt;\r\n    \t\t\t\t\t&lt;th class=&quot;toc&quot;&gt;\r\n    \t\t\t\t\t\t&lt;a class=&quot;btn btn-success&quot; role=&quot;button&quot; ng-click=&quot;testFunc()&quot;&gt;Include file&lt;/a&gt;\r\n    \t\t\t\t\t&lt;/th&gt;\r\n    \t\t\t\t&lt;/tr&gt;\r\n    \t\t\t&lt;/table&gt;\r\n    \t\t&lt;/td&gt;\r\n    \t&lt;/tr&gt;\r\n    \t&lt;tr&gt;\r\n    \t\t&lt;td align=&quot;center&quot;&gt;\r\n    \t\t\t  &lt;div ng-if=&quot;functype == &#39;home&#39;&quot;&gt;\r\n    \t\t\t    Home page.\r\n    \t\t\t  &lt;/div&gt;\r\n    \t\t\t  &lt;div ng-if=&quot;functype == &#39;test&#39;&quot;&gt;\r\n    \t\t\t    &lt;div ng-include=&quot;&#39;includes/index_testincl.html&#39;&quot;&gt;&lt;/div&gt;\r\n    \t\t\t  &lt;/div&gt;\r\n    \t\t&lt;/td&gt;\r\n    \t&lt;/tr&gt;\r\n    &lt;/table&gt;\r\n    &lt;/div&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;   \r\n  \r\n10.) Create `src/main/webapp/includes/index_testincl.html` and include the following code:  \r\n  \r\n\t    &lt;table&gt;\r\n    \t\t&lt;tr&gt;\r\n\t    \t\t&lt;td&gt;\r\n\t\t    \t\t&lt;p class=&quot;body&quot;&gt;If the link shows this, then JavaScript works!&lt;/p&gt;\r\n\t\t\t    &lt;/td&gt;\r\n\t\t    &lt;/tr&gt;\r\n\t    &lt;/table&gt;\r\n    \r\n11.) Create `src/main/webapp/testController.js`  and include the following:  \r\n  \r\n    // create Angular app\r\n    var testApp = angular.module(&#39;testApp&#39;, []);\r\n  \r\n    // create Angular controller\r\n    testApp.controller(&#39;testController&#39;, [&#39;$scope&#39;, &#39;$http&#39;, function($scope, $http) {\r\n    \t$scope.functype = &#39;home&#39;;\r\n\r\n        //below functions handle navigation links\r\n        $scope.homeFunc = function() {\r\n        \t$scope.functype = &#39;home&#39;;\r\n        }\r\n        $scope.testFunc = function() {\r\n        \t$scope.functype = &#39;test&#39;;\r\n        }\r\n    \r\n    }]);\r\n  \r\n12.) Eclipse -&gt; Project Explorer -&gt; Rt-Click-Project -&gt; Run As..Maven Build  \r\n  \r\n13.) Eclipse -&gt; Project Explorer -&gt; Rt-Click-Project -&gt; Refresh  \r\n  \r\n14.) Copy the way to some remote Tomcat server and try to load it from a web browser by typing anydomain.com.  \r\n  \r\nThat is it. The problem should be recreated.  \r\n\r\nWhat needs to be changed in order for the above minimal AngularJS app to run properly on the remote Tomcat web server when requests are made to anydomain.com?\r\n","title":"How do I add Angularjs to Spring petclinic for use on a web server?","body":"<p>I am decomposing <a href=\"https://github.com/singularity-sg/spring-petclinic\" rel=\"nofollow noreferrer\">the Angularjs branch of the Spring petclinic sample app</a> to figure out how it works.  Towards that end, I deleted the entire contents of <a href=\"https://github.com/singularity-sg/spring-petclinic/tree/master/src/main/webapp\" rel=\"nofollow noreferrer\">src/main/webapp/</a> and replaced it with:</p>\n<pre><code>src/main/webapp/resources/css/bootstrap.cs\nsrc/main/webapp/resources/css/my.css\nsrc/main/webapp/js/lib/angular.js\nsrc/main/webapp/includes/index_testincl.html\nsrc/main/webapp/testController.js\nsrc/main/webapp/index.html\n</code></pre>\n<p>There is nothing else in <a href=\"https://github.com/singularity-sg/spring-petclinic/tree/master/src/main/webapp\" rel=\"nofollow noreferrer\"><code>src/main/webapp/</code></a> besides the 6 files listed above.</p>\n<p>The Spring config files remain the same and are at <a href=\"https://github.com/singularity-sg/spring-petclinic/tree/master/src/main/resources/spring\" rel=\"nofollow noreferrer\">this link</a>.</p>\n<p>The stripped and minimally-replaced version works perfectly in Eclipse on a local devbox when called from <code>localhost:8080/appname</code>, but when I bundle it into a war file and upload it to a remote server, it is not able to serve the JavaScript, CSS, or HTML include files that are a critical part of its functioning.  What do I need to change in the setup in order to get the Angularjs functionality to work properly in the remote web server when someone types mydomain.com into their browser?</p>\n<p>There is no CSS or JavaScript in the content served by the remote web server, so there are no links.  There is only plain text.  When I have the network tab of the developer tools open in Firefox, the following output is displayed:</p>\n<img src=\"https://i.stack.imgur.com/6Klhy.gif\">\n\n  \nThere is no console tab output for any of the above requests.\n  \nThe goal is to better understand how the connection between AngularJS and Spring MVC needs to be set up. The more sophisticated versions built up from these simple files need to do database transactions using Java and Spring MVC.  Thus, any answer needs to be compatible with Java and Spring MVC.    \n  \nThe Tomcat server that serves up mydomain.com at the remote web server also successfully serves up other war files that are spring-only using jsp, so the problem is related to adding AngularJS and HTML. \n  \nNote: The exact clone of the AngularJS Spring petclinic app also does not run when bundled into a war and deployed at mydomain.com, but this OP uses a greatly simplified AngularJS app in order to more effectively isolate the specific mechanism required to get Tomcat, spring-mvc, and AngularJS to work together on a web server.  \n  \n<hr />\n<h2>Steps to recreate this problem</h2>\n<p>The problem can be recreated with the following steps:</p>\n<p>1.) Navigate to <code>/home/username/git</code></p>\n<p>2.) git clone <a href=\"https://github.com/singularity-sg/spring-petclinic.git\" rel=\"nofollow noreferrer\">https://github.com/singularity-sg/spring-petclinic.git</a></p>\n<p>3.) Eclipse -&gt; File -&gt; Import -&gt; Maven -&gt; Existing Maven project</p>\n<p>4.) Eclipse -&gt; Project Explorer -&gt; Rt-Click-Project -&gt; Maven -&gt; Download Sources</p>\n<p>5.) Eclipse -&gt; Project Explorer -&gt; Rt-Click-Project -&gt; Maven -&gt; Update Project</p>\n<p>6.) Delete everything in <code>src/main/webapp</code> except keep: <code>src/main/webapp/js/lib/angular.js</code></p>\n<p>7.) Download <code>bootstrap.css</code> version 3.3.5 from this url: <a href=\"http://getbootstrap.com/getting-started/\" rel=\"nofollow noreferrer\">http://getbootstrap.com/getting-started/</a>  (It is in a zip file.) Once it is downloaded, copy it to the following location in the project:  <code>src/main/webapp/resources/css/bootstrap.cs</code>  (You will need to create the <code>src/main/webapp/resources/</code> and <code>src/main/webapp/resources/css</code> directories.)</p>\n<p>8.) Create <code>src/main/webapp/resources/css/my.css</code> to include whatever minimal styles you want.</p>\n<p>9.) Create <code>src/main/webapp/index.html</code> and add the following:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;title of page&lt;/title&gt;\n    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;resources/css/bootstrap.css&quot;&gt;\n    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;resources/css/my.css&quot;&gt;\n&lt;/head&gt;\n&lt;body ng-app=&quot;testApp&quot;&gt;\n    &lt;script src=&quot;js/lib/angular.js&quot;&gt;&lt;/script&gt;\n    &lt;script type=&quot;text/javascript&quot; src=&quot;testController.js&quot;&gt;&lt;/script&gt;\n\n&lt;div ng-controller=&quot;testController&quot;&gt;  \n&lt;table width=100%&gt;\n    &lt;tr&gt;\n        &lt;td align=center&gt;\n            &lt;table&gt;\n                &lt;tr&gt;\n                    &lt;th class=&quot;toc&quot;&gt; \n                        &lt;a class=&quot;btn btn-success&quot; role=&quot;button&quot; ng-click=&quot;homeFunc()&quot;&gt;Home&lt;/a&gt;\n                    &lt;/th&gt;\n                    &lt;th class=&quot;toc&quot;&gt;\n                        &lt;a class=&quot;btn btn-success&quot; role=&quot;button&quot; ng-click=&quot;testFunc()&quot;&gt;Include file&lt;/a&gt;\n                    &lt;/th&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td align=&quot;center&quot;&gt;\n              &lt;div ng-if=&quot;functype == 'home'&quot;&gt;\n                Home page.\n              &lt;/div&gt;\n              &lt;div ng-if=&quot;functype == 'test'&quot;&gt;\n                &lt;div ng-include=&quot;'includes/index_testincl.html'&quot;&gt;&lt;/div&gt;\n              &lt;/div&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;   \n</code></pre>\n<p>10.) Create <code>src/main/webapp/includes/index_testincl.html</code> and include the following code:</p>\n<pre><code>    &lt;table&gt;\n        &lt;tr&gt;\n            &lt;td&gt;\n                &lt;p class=&quot;body&quot;&gt;If the link shows this, then JavaScript works!&lt;/p&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n</code></pre>\n<p>11.) Create <code>src/main/webapp/testController.js</code>  and include the following:</p>\n<pre><code>// create Angular app\nvar testApp = angular.module('testApp', []);\n\n// create Angular controller\ntestApp.controller('testController', ['$scope', '$http', function($scope, $http) {\n    $scope.functype = 'home';\n\n    //below functions handle navigation links\n    $scope.homeFunc = function() {\n        $scope.functype = 'home';\n    }\n    $scope.testFunc = function() {\n        $scope.functype = 'test';\n    }\n\n}]);\n</code></pre>\n<p>12.) Eclipse -&gt; Project Explorer -&gt; Rt-Click-Project -&gt; Run As..Maven Build</p>\n<p>13.) Eclipse -&gt; Project Explorer -&gt; Rt-Click-Project -&gt; Refresh</p>\n<p>14.) Copy the way to some remote Tomcat server and try to load it from a web browser by typing anydomain.com.</p>\n<p>That is it. The problem should be recreated.</p>\n<p>What needs to be changed in order for the above minimal AngularJS app to run properly on the remote Tomcat web server when requests are made to anydomain.com?</p>\n"},{"tags":["java","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675436447,"creation_date":1675436447,"answer_id":75337478,"question_id":75311052,"body_markdown":"You can flush the persistence context after calling `persist` for entry1 by calling `EntityManager.flush()`.","title":"force hibernate insertion under @Transactional method to happen in the same order they received","body":"<p>You can flush the persistence context after calling <code>persist</code> for entry1 by calling <code>EntityManager.flush()</code>.</p>\n"}],"owner":{"account_id":12306042,"reputation":103,"user_id":8979050,"display_name":"Dev93"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675436447,"creation_date":1675258862,"question_id":75311052,"body_markdown":"I&#39;m saving 2 entries to the same table 1 by 1 with JPA and Hibernate under some Transactional flow chain.\r\n\r\nthe entries are not committed until the transaction is over of course,\r\nbut weirdly they are saved to the table in the opposite order.\r\n\r\nfor example:\r\nt1: transactional flow invoked\r\nt2: entry 1 saved to table X\r\nt3: entry 2 saved to table X\r\nt4: the transaction is over.\r\n\r\nwhen I check the table I can see entry 2 received a lower id then entry 1.\r\n\r\nis there something I can do in order to force hibernate to persist in the order I intended?","title":"force hibernate insertion under @Transactional method to happen in the same order they received","body":"<p>I'm saving 2 entries to the same table 1 by 1 with JPA and Hibernate under some Transactional flow chain.</p>\n<p>the entries are not committed until the transaction is over of course,\nbut weirdly they are saved to the table in the opposite order.</p>\n<p>for example:\nt1: transactional flow invoked\nt2: entry 1 saved to table X\nt3: entry 2 saved to table X\nt4: the transaction is over.</p>\n<p>when I check the table I can see entry 2 received a lower id then entry 1.</p>\n<p>is there something I can do in order to force hibernate to persist in the order I intended?</p>\n"},{"tags":["java","spring-boot","log4j2"],"answers":[{"tags":[],"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675436354,"creation_date":1675426035,"answer_id":75335512,"question_id":75332862,"body_markdown":"Since this didn&#39;t leave me any peace, I invested a few extra hours and tried out many possible combinations and setups. In the end I came up with the following proper working solution:\r\n\r\nlog4j2.yaml:\r\n```yaml\r\nConfiguration:\r\n  //...\r\n\r\n  Appenders:\r\n\r\n    JDBC:\r\n      name: DataBase\r\n      ConnectionFactory:\r\n        class: &quot;com.example.config.Log4jConnectionFactory&quot;\r\n        method: &quot;getDbConnection&quot;\r\n\r\n      tableName: &quot;application_log&quot;\r\n      Column:\r\n        - name: &quot;log_date&quot;\r\n          isEventTimestamp: true\r\n        - name: &quot;log_level&quot;\r\n          pattern: &quot;%level&quot;\r\n        - name: &quot;logger&quot;\r\n          pattern: &quot;%logger&quot;\r\n        - name: &quot;user_id&quot;\r\n          pattern: &quot;$${ctx:userId}&quot;\r\n        - name: &quot;user_name&quot;\r\n          pattern: &quot;$${ctx:username}&quot;\r\n        - name: &quot;log_message&quot;\r\n          pattern: &quot;%message&quot;\r\n        - name: &quot;exception&quot;\r\n          pattern: &quot;%exception&quot;\r\n\r\n  //...\r\n```\r\n\r\nConnectionFactory:\r\n```java\r\npublic class Log4jConnectionFactory {\r\n\r\n    private static final HikariDataSource dataSource;\r\n\r\n    static {\r\n        System.out.println(&quot;====================== This is Log4jConnectionFactory speaking ======================&quot;);\r\n\r\n        dataSource = new HikariDataSource();\r\n\r\n        dataSource.setJdbcUrl(&quot;jdbc:h2:mem:example-db;DB_CLOSE_DELAY=-1;DATABASE_TO_UPPER=false;INIT=RUNSCRIPT FROM &#39;./src/db/h2/schema-log4j2.sql&#39;&quot;);\r\n        dataSource.setDriverClassName(&quot;org.h2.Driver&quot;);\r\n        dataSource.setUsername(&quot;sa&quot;);\r\n        dataSource.setPassword(&quot;&quot;);\r\n    }\r\n\r\n    private Log4jConnectionFactory() { }\r\n\r\n    public static Connection getDbConnection() throws SQLException {\r\n        return dataSource.getConnection();\r\n    }\r\n}\r\n```\r\n\r\nschema-log4j2.sql:\r\n```sql\r\nCREATE TABLE IF NOT EXISTS `application_log` (\r\n    application_log_id INTEGER GENERATED BY DEFAULT AS IDENTITY,\r\n    log_date           TIMESTAMP,\r\n    log_level          VARCHAR(10),\r\n    logger             VARCHAR(100),\r\n    user_id            BIGINT,\r\n    user_name          VARCHAR(50),\r\n    log_message        TEXT,\r\n    exception          TEXT,\r\n\r\n    PRIMARY KEY (application_log_id)\r\n);\r\n```\r\n\r\nSince we are in a Spring Boot environment and an H2 database is used, we have to consider that both logger and database have to be ready for use at a point, where Spring Boot itself is still in the initialization phase. Therefore logger and database must be setup without the help of Spring Boot, respectively without the application.yml configuration file.\r\n\r\nSo since schema creation can&#39;t be done via config file, we assign this task to the H2-connection-string. However, this means that every time a connection is requested, the schema creation is processed. To not run into an error see the detail `CREATE TABLE IF NOT EXISTS`.\r\n\r\nAlso to be mentioned, the connection data is currently hardcoded. This is definitely not a great solution, and I&#39;m still looking for a way to work around this. A lookup to the Spring context is not possible due to timing reasons already mentioned. JNDI doesn&#39;t make much sense either, since the Tomcat configuration for this happens also too late. Let&#39;s see what solution eventually it will be. If I&#39;ll find one, I will update this post.","title":"How to setup a Log4j2 JDBC Appender in a YAML configuration?","body":"<p>Since this didn't leave me any peace, I invested a few extra hours and tried out many possible combinations and setups. In the end I came up with the following proper working solution:</p>\n<p>log4j2.yaml:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>Configuration:\n  //...\n\n  Appenders:\n\n    JDBC:\n      name: DataBase\n      ConnectionFactory:\n        class: &quot;com.example.config.Log4jConnectionFactory&quot;\n        method: &quot;getDbConnection&quot;\n\n      tableName: &quot;application_log&quot;\n      Column:\n        - name: &quot;log_date&quot;\n          isEventTimestamp: true\n        - name: &quot;log_level&quot;\n          pattern: &quot;%level&quot;\n        - name: &quot;logger&quot;\n          pattern: &quot;%logger&quot;\n        - name: &quot;user_id&quot;\n          pattern: &quot;$${ctx:userId}&quot;\n        - name: &quot;user_name&quot;\n          pattern: &quot;$${ctx:username}&quot;\n        - name: &quot;log_message&quot;\n          pattern: &quot;%message&quot;\n        - name: &quot;exception&quot;\n          pattern: &quot;%exception&quot;\n\n  //...\n</code></pre>\n<p>ConnectionFactory:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Log4jConnectionFactory {\n\n    private static final HikariDataSource dataSource;\n\n    static {\n        System.out.println(&quot;====================== This is Log4jConnectionFactory speaking ======================&quot;);\n\n        dataSource = new HikariDataSource();\n\n        dataSource.setJdbcUrl(&quot;jdbc:h2:mem:example-db;DB_CLOSE_DELAY=-1;DATABASE_TO_UPPER=false;INIT=RUNSCRIPT FROM './src/db/h2/schema-log4j2.sql'&quot;);\n        dataSource.setDriverClassName(&quot;org.h2.Driver&quot;);\n        dataSource.setUsername(&quot;sa&quot;);\n        dataSource.setPassword(&quot;&quot;);\n    }\n\n    private Log4jConnectionFactory() { }\n\n    public static Connection getDbConnection() throws SQLException {\n        return dataSource.getConnection();\n    }\n}\n</code></pre>\n<p>schema-log4j2.sql:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE IF NOT EXISTS `application_log` (\n    application_log_id INTEGER GENERATED BY DEFAULT AS IDENTITY,\n    log_date           TIMESTAMP,\n    log_level          VARCHAR(10),\n    logger             VARCHAR(100),\n    user_id            BIGINT,\n    user_name          VARCHAR(50),\n    log_message        TEXT,\n    exception          TEXT,\n\n    PRIMARY KEY (application_log_id)\n);\n</code></pre>\n<p>Since we are in a Spring Boot environment and an H2 database is used, we have to consider that both logger and database have to be ready for use at a point, where Spring Boot itself is still in the initialization phase. Therefore logger and database must be setup without the help of Spring Boot, respectively without the application.yml configuration file.</p>\n<p>So since schema creation can't be done via config file, we assign this task to the H2-connection-string. However, this means that every time a connection is requested, the schema creation is processed. To not run into an error see the detail <code>CREATE TABLE IF NOT EXISTS</code>.</p>\n<p>Also to be mentioned, the connection data is currently hardcoded. This is definitely not a great solution, and I'm still looking for a way to work around this. A lookup to the Spring context is not possible due to timing reasons already mentioned. JNDI doesn't make much sense either, since the Tomcat configuration for this happens also too late. Let's see what solution eventually it will be. If I'll find one, I will update this post.</p>\n"}],"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":642,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675436354,"creation_date":1675410713,"question_id":75332862,"body_markdown":"Since the Log4j2 documentation unfortunately doesn&#39;t have any examples for specifying a JDBC Appender using a ConnectionFactory in a log4j2.yaml-configuration, i&#39;d like to ask for a proper example.\r\n\r\nThis is my current state of the log4j2.yml:\r\n```yaml\r\nConfiguration:\r\n  //...\r\n\r\n  Appenders:\r\n\r\n    JDBC:\r\n      name: DataBase\r\n      connectionSource:\r\n        class: &quot;com.example.config.Log4jConnectionFactory&quot;\r\n        method: &quot;getDbConnection&quot;\r\n\r\n      tableName: &quot;application_log&quot;\r\n      columnConfigs:\r\n        - name: &quot;log_date&quot;\r\n          isEventTimestamp: true\r\n        - name: &quot;log_level&quot;\r\n          pattern: &quot;%level&quot;\r\n        - name: &quot;logger&quot;\r\n          pattern: &quot;%logger&quot;\r\n        - name: &quot;user_id&quot;\r\n          pattern: &quot;$${ctx:userId}&quot;\r\n        - name: &quot;user_name&quot;\r\n          pattern: &quot;$${ctx:username}&quot;\r\n        - name: &quot;log_message&quot;\r\n          pattern: &quot;%message&quot;\r\n        - name: &quot;exception&quot;\r\n          pattern: &quot;%exception&quot;\r\n\r\n  //...\r\n```\r\n\r\nAnd here the associated ConnectionFactory:\r\n```java\r\npublic class Log4jConnectionFactory {\r\n\r\n    private static BasicDataSource dataSource;\r\n\r\n    private Log4jConnectionFactory() { }\r\n\r\n    public static Connection getDbConnection() throws SQLException {\r\n        if (dataSource == null) {\r\n            dataSource = new BasicDataSource();\r\n\r\n            dataSource.setUrl(&quot;jdbc:h2:mem:example-db;DB_CLOSE_DELAY=-1&quot;);\r\n            dataSource.setDriverClassName(&quot;org.h2.Driver&quot;);\r\n            dataSource.setUsername(&quot;sa&quot;);\r\n            dataSource.setPassword(&quot;&quot;);\r\n        }\r\n\r\n        return dataSource.getConnection();\r\n    }\r\n}\r\n```\r\n\r\nWith this configuration above Log4j throws the following error:\r\n```none\r\nNo factory method found for class org.apache.logging.log4j.core.appender.db.jdbc.JdbcAppender\r\n```\r\nThe complete error log:\r\n```none\r\n2023-02-03 09:38:08,479 main ERROR Unable to locate plugin type for connectionSource\r\n2023-02-03 09:38:08,481 main ERROR Unable to locate plugin type for columnConfigs\r\n2023-02-03 09:38:08,481 main ERROR Unable to locate plugin type for columnConfigs\r\n2023-02-03 09:38:08,481 main ERROR Unable to locate plugin type for columnConfigs\r\n2023-02-03 09:38:08,482 main ERROR Unable to locate plugin type for columnConfigs\r\n2023-02-03 09:38:08,482 main ERROR Unable to locate plugin type for columnConfigs\r\n2023-02-03 09:38:08,482 main ERROR Unable to locate plugin type for columnConfigs\r\n2023-02-03 09:38:08,482 main ERROR Unable to locate plugin type for columnConfigs\r\n2023-02-03 09:38:08,566 main ERROR Unable to locate plugin for connectionSource\r\n2023-02-03 09:38:08,566 main ERROR Unable to locate plugin for columnConfigs\r\n2023-02-03 09:38:08,566 main ERROR Unable to locate plugin for columnConfigs\r\n2023-02-03 09:38:08,567 main ERROR Unable to locate plugin for columnConfigs\r\n2023-02-03 09:38:08,567 main ERROR Unable to locate plugin for columnConfigs\r\n2023-02-03 09:38:08,567 main ERROR Unable to locate plugin for columnConfigs\r\n2023-02-03 09:38:08,567 main ERROR Unable to locate plugin for columnConfigs\r\n2023-02-03 09:38:08,567 main ERROR Unable to locate plugin for columnConfigs\r\n2023-02-03 09:38:08,569 main ERROR Could not create plugin of type class org.apache.logging.log4j.core.appender.db.jdbc.JdbcAppender for element JDBC: java.lang.NullPointerException: Cannot invoke &quot;org.apache.logging.log4j.core.config.plugins.util.PluginType.getElementName()&quot; because &quot;childType&quot; is null java.lang.NullPointerException: Cannot invoke &quot;org.apache.logging.log4j.core.config.plugins.util.PluginType.getElementName()&quot; because &quot;childType&quot; is null\r\n\tat org.apache.logging.log4j.core.config.plugins.visitors.PluginElementVisitor.findNamedNode(PluginElementVisitor.java:104)\r\n\tat org.apache.logging.log4j.core.config.plugins.visitors.PluginElementVisitor.visit(PluginElementVisitor.java:88)\r\n\tat org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.injectFields(PluginBuilder.java:187)\r\n\tat org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:123)\r\n\tat org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1138)\r\n\tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1063)\r\n\tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1055)\r\n\tat org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:664)\r\n\tat org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:258)\r\n\tat org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:304)\r\n\tat org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\r\n\tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\r\n\tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\r\n\tat org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\r\n\tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\r\n\tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\r\n\tat org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\r\n\tat org.apache.logging.log4j.spi.AbstractLoggerAdapter.getContext(AbstractLoggerAdapter.java:137)\r\n\tat org.apache.logging.slf4j.Log4jLoggerFactory.getContext(Log4jLoggerFactory.java:61)\r\n\tat org.apache.logging.log4j.spi.AbstractLoggerAdapter.getLogger(AbstractLoggerAdapter.java:47)\r\n\tat org.apache.logging.slf4j.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:33)\r\n\tat org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:391)\r\n\tat org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:416)\r\n\tat com.example.Application.&lt;clinit&gt;(Application.java:13)\r\n\r\n2023-02-03 09:38:08,571 main ERROR Unable to invoke factory method in class org.apache.logging.log4j.core.appender.db.jdbc.JdbcAppender for element JDBC: java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.db.jdbc.JdbcAppender java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.db.jdbc.JdbcAppender\r\n\tat org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.findFactoryMethod(PluginBuilder.java:260)\r\n\tat org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:136)\r\n\tat org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1138)\r\n\tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1063)\r\n\tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1055)\r\n\tat org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:664)\r\n\tat org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:258)\r\n\tat org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:304)\r\n\tat org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\r\n\tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\r\n\tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\r\n\tat org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\r\n\tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\r\n\tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\r\n\tat org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\r\n\tat org.apache.logging.log4j.spi.AbstractLoggerAdapter.getContext(AbstractLoggerAdapter.java:137)\r\n\tat org.apache.logging.slf4j.Log4jLoggerFactory.getContext(Log4jLoggerFactory.java:61)\r\n\tat org.apache.logging.log4j.spi.AbstractLoggerAdapter.getLogger(AbstractLoggerAdapter.java:47)\r\n\tat org.apache.logging.slf4j.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:33)\r\n\tat org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:391)\r\n\tat org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:416)\r\n\tat com.example.Application.&lt;clinit&gt;(Application.java:13)\r\n```\r\n\r\nSince I&#39;m not sure whether the Appender structure is correct or not, and since I haven&#39;t found anything anywhere how this shoud be done in a YAML config file, and since the Log4j2 documentation isn&#39;t any help either, I&#39;d like to ask for any help that can provide some clarification.\r\n\r\nMany thanks in advance\r\n\r\n","title":"How to setup a Log4j2 JDBC Appender in a YAML configuration?","body":"<p>Since the Log4j2 documentation unfortunately doesn't have any examples for specifying a JDBC Appender using a ConnectionFactory in a log4j2.yaml-configuration, i'd like to ask for a proper example.</p>\n<p>This is my current state of the log4j2.yml:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>Configuration:\n  //...\n\n  Appenders:\n\n    JDBC:\n      name: DataBase\n      connectionSource:\n        class: &quot;com.example.config.Log4jConnectionFactory&quot;\n        method: &quot;getDbConnection&quot;\n\n      tableName: &quot;application_log&quot;\n      columnConfigs:\n        - name: &quot;log_date&quot;\n          isEventTimestamp: true\n        - name: &quot;log_level&quot;\n          pattern: &quot;%level&quot;\n        - name: &quot;logger&quot;\n          pattern: &quot;%logger&quot;\n        - name: &quot;user_id&quot;\n          pattern: &quot;$${ctx:userId}&quot;\n        - name: &quot;user_name&quot;\n          pattern: &quot;$${ctx:username}&quot;\n        - name: &quot;log_message&quot;\n          pattern: &quot;%message&quot;\n        - name: &quot;exception&quot;\n          pattern: &quot;%exception&quot;\n\n  //...\n</code></pre>\n<p>And here the associated ConnectionFactory:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Log4jConnectionFactory {\n\n    private static BasicDataSource dataSource;\n\n    private Log4jConnectionFactory() { }\n\n    public static Connection getDbConnection() throws SQLException {\n        if (dataSource == null) {\n            dataSource = new BasicDataSource();\n\n            dataSource.setUrl(&quot;jdbc:h2:mem:example-db;DB_CLOSE_DELAY=-1&quot;);\n            dataSource.setDriverClassName(&quot;org.h2.Driver&quot;);\n            dataSource.setUsername(&quot;sa&quot;);\n            dataSource.setPassword(&quot;&quot;);\n        }\n\n        return dataSource.getConnection();\n    }\n}\n</code></pre>\n<p>With this configuration above Log4j throws the following error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>No factory method found for class org.apache.logging.log4j.core.appender.db.jdbc.JdbcAppender\n</code></pre>\n<p>The complete error log:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2023-02-03 09:38:08,479 main ERROR Unable to locate plugin type for connectionSource\n2023-02-03 09:38:08,481 main ERROR Unable to locate plugin type for columnConfigs\n2023-02-03 09:38:08,481 main ERROR Unable to locate plugin type for columnConfigs\n2023-02-03 09:38:08,481 main ERROR Unable to locate plugin type for columnConfigs\n2023-02-03 09:38:08,482 main ERROR Unable to locate plugin type for columnConfigs\n2023-02-03 09:38:08,482 main ERROR Unable to locate plugin type for columnConfigs\n2023-02-03 09:38:08,482 main ERROR Unable to locate plugin type for columnConfigs\n2023-02-03 09:38:08,482 main ERROR Unable to locate plugin type for columnConfigs\n2023-02-03 09:38:08,566 main ERROR Unable to locate plugin for connectionSource\n2023-02-03 09:38:08,566 main ERROR Unable to locate plugin for columnConfigs\n2023-02-03 09:38:08,566 main ERROR Unable to locate plugin for columnConfigs\n2023-02-03 09:38:08,567 main ERROR Unable to locate plugin for columnConfigs\n2023-02-03 09:38:08,567 main ERROR Unable to locate plugin for columnConfigs\n2023-02-03 09:38:08,567 main ERROR Unable to locate plugin for columnConfigs\n2023-02-03 09:38:08,567 main ERROR Unable to locate plugin for columnConfigs\n2023-02-03 09:38:08,567 main ERROR Unable to locate plugin for columnConfigs\n2023-02-03 09:38:08,569 main ERROR Could not create plugin of type class org.apache.logging.log4j.core.appender.db.jdbc.JdbcAppender for element JDBC: java.lang.NullPointerException: Cannot invoke &quot;org.apache.logging.log4j.core.config.plugins.util.PluginType.getElementName()&quot; because &quot;childType&quot; is null java.lang.NullPointerException: Cannot invoke &quot;org.apache.logging.log4j.core.config.plugins.util.PluginType.getElementName()&quot; because &quot;childType&quot; is null\n    at org.apache.logging.log4j.core.config.plugins.visitors.PluginElementVisitor.findNamedNode(PluginElementVisitor.java:104)\n    at org.apache.logging.log4j.core.config.plugins.visitors.PluginElementVisitor.visit(PluginElementVisitor.java:88)\n    at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.injectFields(PluginBuilder.java:187)\n    at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:123)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1138)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1063)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1055)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:664)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:258)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:304)\n    at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\n    at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\n    at org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\n    at org.apache.logging.log4j.spi.AbstractLoggerAdapter.getContext(AbstractLoggerAdapter.java:137)\n    at org.apache.logging.slf4j.Log4jLoggerFactory.getContext(Log4jLoggerFactory.java:61)\n    at org.apache.logging.log4j.spi.AbstractLoggerAdapter.getLogger(AbstractLoggerAdapter.java:47)\n    at org.apache.logging.slf4j.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:33)\n    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:391)\n    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:416)\n    at com.example.Application.&lt;clinit&gt;(Application.java:13)\n\n2023-02-03 09:38:08,571 main ERROR Unable to invoke factory method in class org.apache.logging.log4j.core.appender.db.jdbc.JdbcAppender for element JDBC: java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.db.jdbc.JdbcAppender java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.db.jdbc.JdbcAppender\n    at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.findFactoryMethod(PluginBuilder.java:260)\n    at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:136)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1138)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1063)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1055)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:664)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:258)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:304)\n    at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\n    at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\n    at org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\n    at org.apache.logging.log4j.spi.AbstractLoggerAdapter.getContext(AbstractLoggerAdapter.java:137)\n    at org.apache.logging.slf4j.Log4jLoggerFactory.getContext(Log4jLoggerFactory.java:61)\n    at org.apache.logging.log4j.spi.AbstractLoggerAdapter.getLogger(AbstractLoggerAdapter.java:47)\n    at org.apache.logging.slf4j.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:33)\n    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:391)\n    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:416)\n    at com.example.Application.&lt;clinit&gt;(Application.java:13)\n</code></pre>\n<p>Since I'm not sure whether the Appender structure is correct or not, and since I haven't found anything anywhere how this shoud be done in a YAML config file, and since the Log4j2 documentation isn't any help either, I'd like to ask for any help that can provide some clarification.</p>\n<p>Many thanks in advance</p>\n"},{"tags":["java","selenium","selenium-webdriver","webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":3832273,"reputation":1326,"user_id":5564018,"accept_rate":84,"display_name":"JumpIntoTheWater"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1492421291,"creation_date":1492406852,"answer_id":43445643,"question_id":43445545,"body_markdown":"When executing the chrome-driver, you must close it ,as you mentioned, in order to close the chrome-driver. Basically in order to run tests you should use relevant running framework as JUnit(as for java) and then you won&#39;t be confused. ","title":"Selenium initiated ChromeDriver keeps running in background","body":"<p>When executing the chrome-driver, you must close it ,as you mentioned, in order to close the chrome-driver. Basically in order to run tests you should use relevant running framework as JUnit(as for java) and then you won't be confused. </p>\n"},{"tags":[],"owner":{"account_id":9296472,"reputation":3349,"user_id":6903223,"accept_rate":67,"display_name":"Kushal Bhalaik"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1492407890,"creation_date":1492407890,"answer_id":43445811,"question_id":43445545,"body_markdown":"As chromedriver is an executable file, so it is run as a separate thread and it isn&#39;t getting closed because your driver.close() method is not getting called so you have no other choice than to close it manually. You can  either choose to close chromedriver.exe process  manually from Task Manager but I&#39;d recommend using following command in Command Prompt\n\n     taskkill /f /im chromedriver.exe\n\nThis particular command can be run in order to delete any processes running on your windows device.","title":"Selenium initiated ChromeDriver keeps running in background","body":"<p>As chromedriver is an executable file, so it is run as a separate thread and it isn't getting closed because your driver.close() method is not getting called so you have no other choice than to close it manually. You can  either choose to close chromedriver.exe process  manually from Task Manager but I'd recommend using following command in Command Prompt</p>\n\n<pre><code> taskkill /f /im chromedriver.exe\n</code></pre>\n\n<p>This particular command can be run in order to delete any processes running on your windows device.</p>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1579872281,"creation_date":1492436552,"answer_id":43452691,"question_id":43445545,"body_markdown":"You need to take care of a couple of things as follows:\r\n\r\n1. _Try running this code, say 5 times, and there will be 5 background running instances_: This is because each time you have opened a new driver instance which you have never released.\r\n\r\n2. _Tried restarting Eclipse, with no luck_: Its worth mentioning that Eclipse is an IDE (Integrated Development Environment) which helps us to construct programming steps through a programming language. So through Eclipse we write programs/steps for Selenium to open/close a browser session and quit a driver session. But Eclipse have no control over the execution done by Selenium in-terms of open/close a browser session and quit a driver session. Hence restarting Eclipse would make no difference.\r\n\r\n3. `driver.close()`: This command will help you only to Close the browser session/window on which currently the driver have the focus.\r\n\r\n4. _when the main-thread dies, all supporting running instances should die with it_: You are right. It is the WebDriver instance (i.e. driver - as per your code) which opens all the browser sessions every-time. So when your program ends you should always call `driver.quit()` which Closes all browser windows, quits the driver and safely ends the session.\r\n\r\n\r\n----------\r\n\r\n\r\nHowever, at any point of time you can forcefully kill all the instances of WebDriver variants e.g. [tag:geckodriver], [tag:selenium-chromedriver], [tag:selenium-iedriver] through [tag:os] specific methods as follows:\r\n\r\n- Java Solution(Windows):\r\n\r\n\t\timport java.io.IOException;\r\n\r\n\t\tpublic class Kill_ChromeDriver_GeckoDriver_IEDriverserver \r\n\t\t{\r\n\t\t\tpublic static void main(String[] args) throws Exception \r\n\t\t\t{\r\n\t\t\t\tRuntime.getRuntime().exec(&quot;taskkill /F /IM geckodriver.exe /T&quot;);\r\n\t\t\t\tRuntime.getRuntime().exec(&quot;taskkill /F /IM chromedriver.exe /T&quot;);\r\n\t\t\t\tRuntime.getRuntime().exec(&quot;taskkill /F /IM IEDriverServer.exe /T&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n- Python Solution(Windows):\r\n\r\n\t\timport os\r\n\t\tos.system(&quot;taskkill /f /im geckodriver.exe /T&quot;)\r\n        os.system(&quot;taskkill /f /im chromedriver.exe /T&quot;)\r\n        os.system(&quot;taskkill /f /im IEDriverServer.exe /T&quot;)\r\n\t\t\r\n- Python Solution(**Cross Platform**): \r\n\r\n\t\timport os\r\n\t\timport psutil\r\n\r\n\t\tPROCNAME = &quot;geckodriver&quot; # or chromedriver or IEDriverServer\r\n\t\tfor proc in psutil.process_iter():\r\n\t\t    # check whether the process name matches\r\n\t\t    if proc.name() == PROCNAME:\r\n\t\t\t    proc.kill()","title":"Selenium initiated ChromeDriver keeps running in background","body":"<p>You need to take care of a couple of things as follows:</p>\n\n<ol>\n<li><p><em>Try running this code, say 5 times, and there will be 5 background running instances</em>: This is because each time you have opened a new driver instance which you have never released.</p></li>\n<li><p><em>Tried restarting Eclipse, with no luck</em>: Its worth mentioning that Eclipse is an IDE (Integrated Development Environment) which helps us to construct programming steps through a programming language. So through Eclipse we write programs/steps for Selenium to open/close a browser session and quit a driver session. But Eclipse have no control over the execution done by Selenium in-terms of open/close a browser session and quit a driver session. Hence restarting Eclipse would make no difference.</p></li>\n<li><p><code>driver.close()</code>: This command will help you only to Close the browser session/window on which currently the driver have the focus.</p></li>\n<li><p><em>when the main-thread dies, all supporting running instances should die with it</em>: You are right. It is the WebDriver instance (i.e. driver - as per your code) which opens all the browser sessions every-time. So when your program ends you should always call <code>driver.quit()</code> which Closes all browser windows, quits the driver and safely ends the session.</p></li>\n</ol>\n\n<hr>\n\n<p>However, at any point of time you can forcefully kill all the instances of WebDriver variants e.g. <a href=\"/questions/tagged/geckodriver\" class=\"post-tag\" title=\"show questions tagged &#39;geckodriver&#39;\" rel=\"tag\">geckodriver</a>, <a href=\"/questions/tagged/selenium-chromedriver\" class=\"post-tag\" title=\"show questions tagged &#39;selenium-chromedriver&#39;\" rel=\"tag\">selenium-chromedriver</a>, <a href=\"/questions/tagged/selenium-iedriver\" class=\"post-tag\" title=\"show questions tagged &#39;selenium-iedriver&#39;\" rel=\"tag\">selenium-iedriver</a> through <a href=\"/questions/tagged/os\" class=\"post-tag\" title=\"show questions tagged &#39;os&#39;\" rel=\"tag\">os</a> specific methods as follows:</p>\n\n<ul>\n<li><p>Java Solution(Windows):</p>\n\n<pre><code>import java.io.IOException;\n\npublic class Kill_ChromeDriver_GeckoDriver_IEDriverserver \n{\n    public static void main(String[] args) throws Exception \n    {\n        Runtime.getRuntime().exec(\"taskkill /F /IM geckodriver.exe /T\");\n        Runtime.getRuntime().exec(\"taskkill /F /IM chromedriver.exe /T\");\n        Runtime.getRuntime().exec(\"taskkill /F /IM IEDriverServer.exe /T\");\n    }\n}\n</code></pre></li>\n<li><p>Python Solution(Windows):</p>\n\n<pre><code>import os\nos.system(\"taskkill /f /im geckodriver.exe /T\")\nos.system(\"taskkill /f /im chromedriver.exe /T\")\nos.system(\"taskkill /f /im IEDriverServer.exe /T\")\n</code></pre></li>\n<li><p>Python Solution(<strong>Cross Platform</strong>): </p>\n\n<pre><code>import os\nimport psutil\n\nPROCNAME = \"geckodriver\" # or chromedriver or IEDriverServer\nfor proc in psutil.process_iter():\n    # check whether the process name matches\n    if proc.name() == PROCNAME:\n        proc.kill()\n</code></pre></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1716151,"reputation":11,"user_id":1573163,"display_name":"mvpmurali"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1492495050,"creation_date":1492437579,"answer_id":43452968,"question_id":43445545,"body_markdown":"Create an bat file(killchorme.bat) using the below cmd\r\n\r\ntaskkill /f /im chromedriver.exe\r\n\r\nthen call the bat file before initiating your chrome driver using\r\nRuntime.getruntime().exec(&quot;killchrome.bat&quot;)\r\n","title":"Selenium initiated ChromeDriver keeps running in background","body":"<p>Create an bat file(killchorme.bat) using the below cmd</p>\n\n<p>taskkill /f /im chromedriver.exe</p>\n\n<p>then call the bat file before initiating your chrome driver using\nRuntime.getruntime().exec(\"killchrome.bat\")</p>\n"},{"tags":[],"owner":{"account_id":20314643,"reputation":950,"user_id":14900791,"display_name":"Jurakin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675436028,"creation_date":1675436028,"answer_id":75337409,"question_id":43445545,"body_markdown":"I know this is off topic, but this helped me to solve the problem `chromedriver is still running in the background`. I was using `driver.close` which is not killing the session. See this [answer](https://stackoverflow.com/a/32447644/14900791):\r\n\r\n&gt; You should use `driver.quit` whenever you want to end the program. It\r\n&gt; will close all opened browser windows and terminates the WebDriver\r\n&gt; session. If you do not use `driver.quit` at the end of the program, the\r\n&gt; WebDriver session will not close properly and files would not be\r\n&gt; cleared from memory. This may result in memory leak errors.","title":"Selenium initiated ChromeDriver keeps running in background","body":"<p>I know this is off topic, but this helped me to solve the problem <code>chromedriver is still running in the background</code>. I was using <code>driver.close</code> which is not killing the session. See this <a href=\"https://stackoverflow.com/a/32447644/14900791\">answer</a>:</p>\n<blockquote>\n<p>You should use <code>driver.quit</code> whenever you want to end the program. It\nwill close all opened browser windows and terminates the WebDriver\nsession. If you do not use <code>driver.quit</code> at the end of the program, the\nWebDriver session will not close properly and files would not be\ncleared from memory. This may result in memory leak errors.</p>\n</blockquote>\n"}],"owner":{"account_id":9025225,"reputation":165,"user_id":6724744,"display_name":"Apurv Chatterjee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8350,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":43452691,"answer_count":5,"score":4,"last_activity_date":1675436028,"creation_date":1492406254,"question_id":43445545,"body_markdown":"I am not able to completely delete a project, because the chromedriver instance is running in the background, even when there is no code is being executed.\nPlease see the below image.\n[![Task Manager Process View][1]][1]\n\nThe error I get while the project deletion is:[![Eclipse error while project deletion][2]][2]\n\nTake the below code for instance:\n\n    import java.util.concurrent.TimeUnit;\n    \n    import org.openqa.selenium.WebDriver;\n    import org.openqa.selenium.chrome.ChromeDriver;\n    \n    public class Test {\n    \n        public static void main(String[] args) throws Exception {\n    \n            String url = &quot;https://www.google.com&quot;;\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;src/driver/chromedriver.exe&quot;);\n            WebDriver driver = new ChromeDriver();\n            driver.manage().window().maximize();\n            driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\n            driver.get(url);\n            System.out.println(driver.getTitle());\n    \n        }\n    }\n\nTry running this code, say 5 times, and there will be 5 background running instances. Tried restarting Eclipse, with no luck.\n\nI understand this is happening because I am not writing this line:\n\n    driver.close();\n\nBut normally, when the main-thread dies, all supporting running instances should die with it.\n\nIs this a known issue, or I am scripting something wrong.\n\nThanks in advance.\n\n  [1]: https://i.stack.imgur.com/bt1Tb.png\n  [2]: https://i.stack.imgur.com/pKIO0.png","title":"Selenium initiated ChromeDriver keeps running in background","body":"<p>I am not able to completely delete a project, because the chromedriver instance is running in the background, even when there is no code is being executed.\nPlease see the below image.\n<a href=\"https://i.stack.imgur.com/bt1Tb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bt1Tb.png\" alt=\"Task Manager Process View\" /></a></p>\n<p>The error I get while the project deletion is:<a href=\"https://i.stack.imgur.com/pKIO0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pKIO0.png\" alt=\"Eclipse error while project deletion\" /></a></p>\n<p>Take the below code for instance:</p>\n<pre><code>import java.util.concurrent.TimeUnit;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\npublic class Test {\n\n    public static void main(String[] args) throws Exception {\n\n        String url = &quot;https://www.google.com&quot;;\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;src/driver/chromedriver.exe&quot;);\n        WebDriver driver = new ChromeDriver();\n        driver.manage().window().maximize();\n        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\n        driver.get(url);\n        System.out.println(driver.getTitle());\n\n    }\n}\n</code></pre>\n<p>Try running this code, say 5 times, and there will be 5 background running instances. Tried restarting Eclipse, with no luck.</p>\n<p>I understand this is happening because I am not writing this line:</p>\n<pre><code>driver.close();\n</code></pre>\n<p>But normally, when the main-thread dies, all supporting running instances should die with it.</p>\n<p>Is this a known issue, or I am scripting something wrong.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","math","jsp"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1228478026,"post_id":343584,"comment_id":178153,"body_markdown":"You seem to have an inaccurate idea of what mantissa and exponent are. They aren&#39;t just &quot;whole part&quot; and &quot;fractional part&quot;. See http://en.wikipedia.org/wiki/Floating_point","body":"You seem to have an inaccurate idea of what mantissa and exponent are. They aren&#39;t just &quot;whole part&quot; and &quot;fractional part&quot;. See <a href=\"http://en.wikipedia.org/wiki/Floating_point\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Floating_point</a>"},{"owner":{"account_id":1146,"reputation":49086,"user_id":1527,"accept_rate":92,"display_name":"Pete Kirkham"},"score":0,"creation_date":1239022397,"post_id":343584,"comment_id":533177,"body_markdown":"Keep the original title otherwise most of the answers don&#39;t make sense.","body":"Keep the original title otherwise most of the answers don&#39;t make sense."}],"answers":[{"tags":[],"owner":{"account_id":3795,"reputation":48941,"user_id":5542,"accept_rate":61,"display_name":"Rasmus Faber"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1452945106,"creation_date":1228477478,"answer_id":343598,"question_id":343584,"body_markdown":"The original question asked for the exponent and mantissa, rather than the fractional and whole part.\r\n\r\nTo get the exponent and mantissa from a double you can convert it into the [IEEE 754][1] representation and extract the bits like this:\r\n\r\n    long bits = Double.doubleToLongBits(3.25);\r\n        \r\n    boolean isNegative = (bits &amp; 0x8000000000000000L) != 0; \r\n    long exponent      = (bits &amp; 0x7ff0000000000000L) &gt;&gt; 52;\r\n    long mantissa      =  bits &amp; 0x000fffffffffffffL;\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/IEEE_754 ","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<p>The original question asked for the exponent and mantissa, rather than the fractional and whole part.</p>\n\n<p>To get the exponent and mantissa from a double you can convert it into the <a href=\"http://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">IEEE 754</a> representation and extract the bits like this:</p>\n\n<pre><code>long bits = Double.doubleToLongBits(3.25);\n\nboolean isNegative = (bits &amp; 0x8000000000000000L) != 0; \nlong exponent      = (bits &amp; 0x7ff0000000000000L) &gt;&gt; 52;\nlong mantissa      =  bits &amp; 0x000fffffffffffffL;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11356,"reputation":26481,"user_id":21849,"accept_rate":96,"display_name":"Dan Vinton"},"down_vote_count":2,"up_vote_count":172,"is_accepted":false,"score":170,"last_activity_date":1228483090,"creation_date":1228477857,"answer_id":343602,"question_id":343584,"body_markdown":"    double value = 3.25;\r\n    double fractionalPart = value % 1;\r\n    double integralPart = value - fractionalPart;","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<pre><code>double value = 3.25;\ndouble fractionalPart = value % 1;\ndouble integralPart = value - fractionalPart;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2182,"reputation":51860,"user_id":2998,"accept_rate":69,"display_name":"Stephen Darlington"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1228485418,"creation_date":1228478516,"answer_id":343621,"question_id":343584,"body_markdown":"_[Edit: The question originally asked how to get the mantissa and exponent.]_\r\n\r\nWhere _n_ is the number to get the real mantissa/exponent:\r\n\r\n    exponent = int(log(n))\r\n    mantissa = n / 10^exponent\r\n\r\nOr, to get the answer you were looking for:\r\n\r\n    exponent = int(n)\r\n    mantissa = n - exponent\r\n\r\nThese are not Java exactly but should be easy to convert.","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<p><em>[Edit: The question originally asked how to get the mantissa and exponent.]</em></p>\n\n<p>Where <em>n</em> is the number to get the real mantissa/exponent:</p>\n\n<pre><code>exponent = int(log(n))\nmantissa = n / 10^exponent\n</code></pre>\n\n<p>Or, to get the answer you were looking for:</p>\n\n<pre><code>exponent = int(n)\nmantissa = n - exponent\n</code></pre>\n\n<p>These are not Java exactly but should be easy to convert.</p>\n"},{"tags":[],"owner":{"account_id":1146,"reputation":49086,"user_id":1527,"accept_rate":92,"display_name":"Pete Kirkham"},"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1445923576,"creation_date":1228478727,"answer_id":343629,"question_id":343584,"body_markdown":"The mantissa and exponent of an IEEE double floating point number are the values such that\r\n\r\n    value = sign * (1 + mantissa) * pow(2, exponent)\r\n\r\nif the mantissa is of the form 0.101010101_base 2 (ie its most sigificant bit is shifted to be after the binary point) and the exponent is adjusted for bias.\r\n\r\nSince 1.6, java.lang.Math also provides a direct method to get the unbiased exponent (called getExponent(double)) \r\n\r\nHowever, the numbers you&#39;re asking for are the integral and fractional parts of the number, which can be obtained using\r\n\r\n    integral = Math.floor(x)\r\n    fractional = x - Math.floor(x)\r\n\r\nthough you may you want to treat negative numbers differently `(floor(-3.5) == -4.0)`, depending why you want the two parts.\r\n\r\nI&#39;d strongly suggest that you don&#39;t call these mantissa and exponent.","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<p>The mantissa and exponent of an IEEE double floating point number are the values such that</p>\n\n<pre><code>value = sign * (1 + mantissa) * pow(2, exponent)\n</code></pre>\n\n<p>if the mantissa is of the form 0.101010101_base 2 (ie its most sigificant bit is shifted to be after the binary point) and the exponent is adjusted for bias.</p>\n\n<p>Since 1.6, java.lang.Math also provides a direct method to get the unbiased exponent (called getExponent(double)) </p>\n\n<p>However, the numbers you're asking for are the integral and fractional parts of the number, which can be obtained using</p>\n\n<pre><code>integral = Math.floor(x)\nfractional = x - Math.floor(x)\n</code></pre>\n\n<p>though you may you want to treat negative numbers differently <code>(floor(-3.5) == -4.0)</code>, depending why you want the two parts.</p>\n\n<p>I'd strongly suggest that you don't call these mantissa and exponent.</p>\n"},{"tags":[],"owner":{"account_id":1274,"reputation":134932,"user_id":1695,"accept_rate":53,"display_name":"Gishu"},"down_vote_count":8,"up_vote_count":113,"is_accepted":true,"score":105,"last_activity_date":1574779692,"creation_date":1228479339,"answer_id":343643,"question_id":343584,"body_markdown":"http://www.java2s.com/Code/Java/Data-Type/Obtainingtheintegerandfractionalparts.htm\r\n\r\n    double num;\r\n    long iPart;\r\n    double fPart;\r\n    \r\n    // Get user input\r\n    num = 2.3d;\r\n    iPart = (long) num;\r\n    fPart = num - iPart;\r\n    System.out.println(&quot;Integer part = &quot; + iPart);\r\n    System.out.println(&quot;Fractional part = &quot; + fPart);\r\n\r\nOutputs:\r\n\r\n    Integer part = 2\r\n    Fractional part = 0.2999999999999998\r\n\r\n","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<p><a href=\"http://www.java2s.com/Code/Java/Data-Type/Obtainingtheintegerandfractionalparts.htm\" rel=\"noreferrer\">http://www.java2s.com/Code/Java/Data-Type/Obtainingtheintegerandfractionalparts.htm</a></p>\n\n<pre><code>double num;\nlong iPart;\ndouble fPart;\n\n// Get user input\nnum = 2.3d;\niPart = (long) num;\nfPart = num - iPart;\nSystem.out.println(\"Integer part = \" + iPart);\nSystem.out.println(\"Fractional part = \" + fPart);\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>Integer part = 2\nFractional part = 0.2999999999999998\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"Khawar"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1239026205,"creation_date":1239017469,"answer_id":721061,"question_id":343584,"body_markdown":"    public class MyMain2 {\r\n        public static void main(String[] args) {\r\n            double myDub;\r\n            myDub=1234.5678;\r\n            long myLong;\r\n            myLong=(int)myDub;\r\n            myDub=(myDub%1)*10000;\r\n            int myInt=(int)myDub;\r\n            System.out.println(myLong + &quot;\\n&quot; + myInt);\r\n        }\r\n    }\r\n\r\n","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<pre><code>public class MyMain2 {\n    public static void main(String[] args) {\n        double myDub;\n        myDub=1234.5678;\n        long myLong;\n        myLong=(int)myDub;\n        myDub=(myDub%1)*10000;\n        int myInt=(int)myDub;\n        System.out.println(myLong + \"\\n\" + myInt);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":1,"up_vote_count":26,"is_accepted":false,"score":25,"last_activity_date":1675435952,"creation_date":1266067214,"answer_id":2257643,"question_id":343584,"body_markdown":"Use [JSTL][1] ([installation instructions here][2]) [fmt][3] taglib. There&#39;s a [`&lt;fmt:formatNumber&gt;`][4] tag which does exactly what you want and in a quite easy manner with help of `maxFractionDigits` and `maxIntegerDigits` attributes. \r\n\r\nHere&#39;s an [MCVE][5], just copy&#39;n&#39;paste&#39;n&#39;run it.\r\n```xml\r\n&lt;!DOCTYPE html&gt;\r\n&lt;%@ taglib uri=&quot;jakarta.tags.fmt&quot; prefix=&quot;fmt&quot; %&gt;\r\n&lt;%\r\n    // Just for quick prototyping. Don&#39;t do this in real! Use servlet/javabean.\r\n    double d = 3.25;\r\n    request.setAttribute(&quot;d&quot;, d);\r\n%&gt;\r\n&lt;html lang=&quot;en&quot;&gt;\r\n    &lt;head&gt;\r\n        &lt;title&gt;SO question 343584&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n        &lt;p&gt;Whole: &lt;fmt:formatNumber value=&quot;${d}&quot; maxFractionDigits=&quot;0&quot; /&gt;\r\n        &lt;p&gt;Fraction: &lt;fmt:formatNumber value=&quot;${d}&quot; maxIntegerDigits=&quot;0&quot; /&gt;\r\n    &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n&lt;sub&gt;*(NOTE: if you&#39;re not on JSTL 3.0+ yet, use `uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot;` instead)*&lt;/sub&gt;\r\n\r\nOutput:\r\n\r\n&gt; Whole: 3\r\n&gt; \r\n&gt; Fraction: .25\r\n\r\nThat&#39;s it. No need to massage it with help of plain Java code.\r\n\r\n\r\n  [1]: https://jakarta.ee/specifications/tags/3.0/tagdocs/\r\n  [2]: https://stackoverflow.com/questions/4928271/how-to-install-jstl-the-absolute-uri-http-java-sun-com-jstl-core-cannot-be-r/4928309#4928309\r\n  [3]: https://jakarta.ee/specifications/tags/3.0/tagdocs/fmt/tld-summary.html\r\n  [4]: http://java.sun.com/products/jsp/jstl/1.1/docs/tlddocs/fmt/formatNumber.html\r\n  [5]: https://stackoverflow.com/help/minimal-reproducible-example\r\n","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<p>Use <a href=\"https://jakarta.ee/specifications/tags/3.0/tagdocs/\" rel=\"nofollow noreferrer\">JSTL</a> (<a href=\"https://stackoverflow.com/questions/4928271/how-to-install-jstl-the-absolute-uri-http-java-sun-com-jstl-core-cannot-be-r/4928309#4928309\">installation instructions here</a>) <a href=\"https://jakarta.ee/specifications/tags/3.0/tagdocs/fmt/tld-summary.html\" rel=\"nofollow noreferrer\">fmt</a> taglib. There's a <a href=\"http://java.sun.com/products/jsp/jstl/1.1/docs/tlddocs/fmt/formatNumber.html\" rel=\"nofollow noreferrer\"><code>&lt;fmt:formatNumber&gt;</code></a> tag which does exactly what you want and in a quite easy manner with help of <code>maxFractionDigits</code> and <code>maxIntegerDigits</code> attributes.</p>\n<p>Here's an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a>, just copy'n'paste'n'run it.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;%@ taglib uri=&quot;jakarta.tags.fmt&quot; prefix=&quot;fmt&quot; %&gt;\n&lt;%\n    // Just for quick prototyping. Don't do this in real! Use servlet/javabean.\n    double d = 3.25;\n    request.setAttribute(&quot;d&quot;, d);\n%&gt;\n&lt;html lang=&quot;en&quot;&gt;\n    &lt;head&gt;\n        &lt;title&gt;SO question 343584&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;p&gt;Whole: &lt;fmt:formatNumber value=&quot;${d}&quot; maxFractionDigits=&quot;0&quot; /&gt;\n        &lt;p&gt;Fraction: &lt;fmt:formatNumber value=&quot;${d}&quot; maxIntegerDigits=&quot;0&quot; /&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><sub><em>(NOTE: if you're not on JSTL 3.0+ yet, use <code>uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot;</code> instead)</em></sub></p>\n<p>Output:</p>\n<blockquote>\n<p>Whole: 3</p>\n<p>Fraction: .25</p>\n</blockquote>\n<p>That's it. No need to massage it with help of plain Java code.</p>\n"},{"tags":[],"owner":{"account_id":79673,"reputation":40911,"user_id":225757,"accept_rate":72,"display_name":"Roland Illig"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1268221404,"creation_date":1268221404,"answer_id":2416532,"question_id":343584,"body_markdown":"Since the `fmt:formatNumber` tag doesn&#39;t always yield the correct result, here is another JSP-only approach: It just formats the number as string and does the rest of the computation on the string, since that is easier and doesn&#39;t involve further floating point arithmetics.\r\n\r\n    &lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;\r\n    &lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/functions&quot; prefix=&quot;fn&quot; %&gt;\r\n\r\n    &lt;%\r\n      double[] numbers = { 0.0, 3.25, 3.75, 3.5, 2.5, -1.5, -2.5 };\r\n      pageContext.setAttribute(&quot;numbers&quot;, numbers);\r\n    %&gt;\r\n\r\n    &lt;html&gt;\r\n      &lt;body&gt;\r\n        &lt;ul&gt;\r\n          &lt;c:forEach var=&quot;n&quot; items=&quot;${numbers}&quot;&gt;\r\n            &lt;li&gt;${n} = ${fn:substringBefore(n, &quot;.&quot;)} + ${n - fn:substringBefore(n, &quot;.&quot;)}&lt;/li&gt;\r\n          &lt;/c:forEach&gt;\r\n        &lt;/ul&gt;\r\n      &lt;/body&gt;\r\n    &lt;/html&gt;\r\n","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<p>Since the <code>fmt:formatNumber</code> tag doesn't always yield the correct result, here is another JSP-only approach: It just formats the number as string and does the rest of the computation on the string, since that is easier and doesn't involve further floating point arithmetics.</p>\n\n<pre><code>&lt;%@ taglib uri=\"http://java.sun.com/jsp/jstl/core\" prefix=\"c\" %&gt;\n&lt;%@ taglib uri=\"http://java.sun.com/jsp/jstl/functions\" prefix=\"fn\" %&gt;\n\n&lt;%\n  double[] numbers = { 0.0, 3.25, 3.75, 3.5, 2.5, -1.5, -2.5 };\n  pageContext.setAttribute(\"numbers\", numbers);\n%&gt;\n\n&lt;html&gt;\n  &lt;body&gt;\n    &lt;ul&gt;\n      &lt;c:forEach var=\"n\" items=\"${numbers}\"&gt;\n        &lt;li&gt;${n} = ${fn:substringBefore(n, \".\")} + ${n - fn:substringBefore(n, \".\")}&lt;/li&gt;\n      &lt;/c:forEach&gt;\n    &lt;/ul&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2927376,"reputation":720,"user_id":2508414,"accept_rate":33,"display_name":"OnePunchMan"},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1385630844,"creation_date":1377797894,"answer_id":18517555,"question_id":343584,"body_markdown":"Main logic you have to first find how many digits are there after the decimal point.   \r\n This code works for any number upto 16 digits. If you use BigDecimal you can run it just for upto 18 digits. put the input value (your number) to the variable &quot;num&quot;, here as an example i have hard coded it.\r\n\r\n    double num, temp=0;\r\n    double frac,j=1;\r\n\r\n    num=1034.235;\r\n    // FOR THE FRACTION PART\r\n    do{\r\n    j=j*10;\r\n    temp= num*j;\r\n    }while((temp%10)!=0);       \r\n\r\n    j=j/10;\r\n    temp=(int)num;\r\n    frac=(num*j)-(temp*j);\r\n\r\n    System.out.println(&quot;Double number= &quot;+num);      \r\n    System.out.println(&quot;Whole part= &quot;+(int)num+&quot; fraction part= &quot;+(int)frac);","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<p>Main logic you have to first find how many digits are there after the decimal point.<br>\n This code works for any number upto 16 digits. If you use BigDecimal you can run it just for upto 18 digits. put the input value (your number) to the variable \"num\", here as an example i have hard coded it.</p>\n\n<pre><code>double num, temp=0;\ndouble frac,j=1;\n\nnum=1034.235;\n// FOR THE FRACTION PART\ndo{\nj=j*10;\ntemp= num*j;\n}while((temp%10)!=0);       \n\nj=j/10;\ntemp=(int)num;\nfrac=(num*j)-(temp*j);\n\nSystem.out.println(\"Double number= \"+num);      \nSystem.out.println(\"Whole part= \"+(int)num+\" fraction part= \"+(int)frac);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1267837,"reputation":9823,"user_id":1224741,"accept_rate":91,"display_name":"QED"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1381360069,"creation_date":1381360069,"answer_id":19284357,"question_id":343584,"body_markdown":"Don&#39;t know if this is faster but I&#39;m using\r\n\r\n    float fp = ip % 1.0f;","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<p>Don't know if this is faster but I'm using</p>\n\n<pre><code>float fp = ip % 1.0f;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4095365,"reputation":27,"user_id":3362306,"display_name":"benofben"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1409890360,"creation_date":1409890360,"answer_id":25678502,"question_id":343584,"body_markdown":"A lot of these answers have horrid rounding errors because they&#39;re casting numbers from one type to another.  How about:\r\n\r\n    double x=123.456;\r\n    double fractionalPart = x-Math.floor(x);\r\n    double wholePart = Math.floor(x);\r\n","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<p>A lot of these answers have horrid rounding errors because they're casting numbers from one type to another.  How about:</p>\n\n<pre><code>double x=123.456;\ndouble fractionalPart = x-Math.floor(x);\ndouble wholePart = Math.floor(x);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2035363,"reputation":1,"user_id":1817835,"display_name":"user1817835"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1438949190,"creation_date":1438949190,"answer_id":31877346,"question_id":343584,"body_markdown":"The accepted answer don&#39;t work well for negative numbers between -0 and -1.0\r\nAlso give the fractional part negative.\r\n\r\nFor example: \r\nFor number -0,35 \r\n\r\nreturns\r\n\r\nInteger part = 0\r\nFractional part = -0.35\r\n\r\nIf wou are working with GPS coordinates it is better to have a result with the signum on the integer part as:\r\n\r\nInteger part = -0 \r\nFractional part = 0.35 \r\n\r\nTheses  numbers are used for example for GPS coordinates, where are important the signum for Lat or Long position\r\n\r\nPropose code:\r\n\r\n        double num;\r\n        double iPart;\r\n        double fPart;\r\n\r\n        // Get user input\r\n        num = -0.35d;\r\n        iPart = (long) num;\r\n        //Correct numbers between -0.0 and -1.0\r\n        iPart = (num&lt;=-0.0000001 &amp;&amp; num&gt;-1.0)? -iPart : iPart ;\r\n        fPart = Math.abs(num - iPart);\r\n        System.out.println(String.format(&quot;Integer part = %01.0f&quot;,iPart));\r\n        System.out.println(String.format(&quot;Fractional part = %01.04f&quot;,fPart));\r\n\r\n\r\nOutput:\r\n\r\n    Integer part = -0\r\n    Fractional part = 0,3500\r\n\r\n","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<p>The accepted answer don't work well for negative numbers between -0 and -1.0\nAlso give the fractional part negative.</p>\n\n<p>For example: \nFor number -0,35 </p>\n\n<p>returns</p>\n\n<p>Integer part = 0\nFractional part = -0.35</p>\n\n<p>If wou are working with GPS coordinates it is better to have a result with the signum on the integer part as:</p>\n\n<p>Integer part = -0 \nFractional part = 0.35 </p>\n\n<p>Theses  numbers are used for example for GPS coordinates, where are important the signum for Lat or Long position</p>\n\n<p>Propose code:</p>\n\n<pre><code>    double num;\n    double iPart;\n    double fPart;\n\n    // Get user input\n    num = -0.35d;\n    iPart = (long) num;\n    //Correct numbers between -0.0 and -1.0\n    iPart = (num&lt;=-0.0000001 &amp;&amp; num&gt;-1.0)? -iPart : iPart ;\n    fPart = Math.abs(num - iPart);\n    System.out.println(String.format(\"Integer part = %01.0f\",iPart));\n    System.out.println(String.format(\"Fractional part = %01.04f\",fPart));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Integer part = -0\nFractional part = 0,3500\n</code></pre>\n"},{"tags":[],"owner":{"account_id":150404,"reputation":42109,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445924275,"creation_date":1445924275,"answer_id":33360625,"question_id":343584,"body_markdown":"Since Java 8, you can use `Math.floorDiv`.\r\n\r\nIt returns the largest (closest to positive infinity) `int` value that is less than or equal to the algebraic quotient.\r\n\r\nSome examples:\r\n\r\n    floorDiv(4, 3) == 1\r\n    floorDiv(-4, 3) == -2\r\n\r\nAlternatively, the `/` operator can be used:\r\n\r\n    (4 / 3) == 1\r\n    (-4 / 3) == -1\r\n\r\nReferences:\r\n\r\n* [Java 8 : Math.floorDiv(int,int)][1]\r\n* [Java 8 : Math.floorDiv(long,long)][2]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#floorDiv-int-int-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#floorDiv-long-long-","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<p>Since Java 8, you can use <code>Math.floorDiv</code>.</p>\n\n<p>It returns the largest (closest to positive infinity) <code>int</code> value that is less than or equal to the algebraic quotient.</p>\n\n<p>Some examples:</p>\n\n<pre><code>floorDiv(4, 3) == 1\nfloorDiv(-4, 3) == -2\n</code></pre>\n\n<p>Alternatively, the <code>/</code> operator can be used:</p>\n\n<pre><code>(4 / 3) == 1\n(-4 / 3) == -1\n</code></pre>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#floorDiv-int-int-\" rel=\"nofollow\">Java 8 : Math.floorDiv(int,int)</a></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#floorDiv-long-long-\" rel=\"nofollow\">Java 8 : Math.floorDiv(long,long)</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2666781,"reputation":1100,"user_id":2305034,"display_name":"Endery"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1450786905,"creation_date":1450786905,"answer_id":34415841,"question_id":343584,"body_markdown":"I would use BigDecimal for the solution. Like this:\r\n\r\n        double value = 3.25;\r\n\t\tBigDecimal wholeValue = BigDecimal.valueOf(value).setScale(0, BigDecimal.ROUND_DOWN);\r\n\t\tdouble fractionalValue = value - wholeValue.doubleValue();\r\n\r\n    ","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<p>I would use BigDecimal for the solution. Like this:</p>\n\n<pre><code>    double value = 3.25;\n    BigDecimal wholeValue = BigDecimal.valueOf(value).setScale(0, BigDecimal.ROUND_DOWN);\n    double fractionalValue = value - wholeValue.doubleValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2137050,"reputation":29,"user_id":1896545,"display_name":"Mohamed Sabirulla"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472980347,"creation_date":1472979266,"answer_id":39315178,"question_id":343584,"body_markdown":"    String value = &quot;3.06&quot;;\r\n\r\n    if(!value.isEmpty()){\r\n\t    if(value.contains(&quot;.&quot;)){\t\r\n  \t\t    String block = value.substring(0,value.indexOf(&quot;.&quot;));\r\n\t\t    System.out.println(block);\r\n  \t    }else{\r\n\t\t    System.out.println(value);\r\n   \t    }\r\n    }","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<pre><code>String value = \"3.06\";\n\nif(!value.isEmpty()){\n    if(value.contains(\".\")){    \n        String block = value.substring(0,value.indexOf(\".\"));\n        System.out.println(block);\n    }else{\n        System.out.println(value);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3552517,"reputation":69,"user_id":2967057,"display_name":"roybraym"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1477108047,"creation_date":1477108047,"answer_id":40188113,"question_id":343584,"body_markdown":"What if your number is 2.39999999999999. I suppose you want to get the exact decimal value. Then use BigDecimal:\r\n\r\n    Integer x,y,intPart;\r\n    BigDecimal bd,bdInt,bdDec;\r\n\tbd = new BigDecimal(&quot;2.39999999999999&quot;);\r\n\tintPart = bd.intValue();\r\n\tbdInt = new BigDecimal(intPart);\r\n\tbdDec = bd.subtract(bdInt);\r\n\tSystem.out.println(&quot;Number : &quot; + bd);\r\n\tSystem.out.println(&quot;Whole number part : &quot; + bdInt);\r\n\tSystem.out.println(&quot;Decimal number part : &quot; + bdDec);","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<p>What if your number is 2.39999999999999. I suppose you want to get the exact decimal value. Then use BigDecimal:</p>\n\n<pre><code>Integer x,y,intPart;\nBigDecimal bd,bdInt,bdDec;\nbd = new BigDecimal(\"2.39999999999999\");\nintPart = bd.intValue();\nbdInt = new BigDecimal(intPart);\nbdDec = bd.subtract(bdInt);\nSystem.out.println(\"Number : \" + bd);\nSystem.out.println(\"Whole number part : \" + bdInt);\nSystem.out.println(\"Decimal number part : \" + bdDec);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13411266,"reputation":11,"user_id":9677624,"display_name":"w__"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1587809553,"creation_date":1587809553,"answer_id":61424077,"question_id":343584,"body_markdown":"    // target float point number\r\n    double d = 3.025;\r\n \r\n    // transfer the number to string\r\n    DecimalFormat df = new DecimalFormat();\r\n    df.setDecimalSeparatorAlwaysShown(false);\r\n    String format = df.format(d);\r\n\r\n    // split the number into two fragments\r\n    int dotIndex = format.indexOf(&quot;.&quot;);\r\n    int iPart = Integer.parseInt(format.substring(0, dotIndex)); // output: 3\r\n    double fPart = Double.parseDouble(format.substring(dotIndex)); // output: 0.025","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<pre><code>// target float point number\ndouble d = 3.025;\n\n// transfer the number to string\nDecimalFormat df = new DecimalFormat();\ndf.setDecimalSeparatorAlwaysShown(false);\nString format = df.format(d);\n\n// split the number into two fragments\nint dotIndex = format.indexOf(\".\");\nint iPart = Integer.parseInt(format.substring(0, dotIndex)); // output: 3\ndouble fPart = Double.parseDouble(format.substring(dotIndex)); // output: 0.025\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11436372,"reputation":29,"user_id":8383660,"display_name":"Omar Elashry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592601541,"creation_date":1592601076,"answer_id":62478596,"question_id":343584,"body_markdown":"OK this is maybe late, but i think the best and more accurate approach is using BigDecimal\r\n\r\n    double d = 11.38;\r\n\r\n    BigDecimal bigD = BigDecimal.valueOf(d);\r\n    int intPart = bigD.intValue();\r\n    double fractionalPart = bigD.subtract(BigDecimal.valueOf(intPart)).doubleValue();\r\n\r\n    System.out.println(intPart); // 11\r\n    System.out.println(fractionalPart ); //0.38","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<p>OK this is maybe late, but i think the best and more accurate approach is using BigDecimal</p>\n\n<pre><code>double d = 11.38;\n\nBigDecimal bigD = BigDecimal.valueOf(d);\nint intPart = bigD.intValue();\ndouble fractionalPart = bigD.subtract(BigDecimal.valueOf(intPart)).doubleValue();\n\nSystem.out.println(intPart); // 11\nSystem.out.println(fractionalPart ); //0.38\n</code></pre>\n"}],"owner":{"account_id":14042,"reputation":40275,"user_id":28557,"accept_rate":78,"display_name":"Vinayak Bevinakatti"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179592,"favorite_count":0,"down_vote_count":2,"up_vote_count":116,"accepted_answer_id":343643,"answer_count":18,"score":114,"last_activity_date":1675435952,"creation_date":1228477091,"question_id":343584,"body_markdown":"How do I get whole and fractional parts from double in JSP/Java ? If the value is 3.25 then I want to get `fractional =.25`, `whole = 3`\r\n\r\nHow can we do this in Java?\r\n\r\n\r\n","title":"How do I get whole and fractional parts from double in JSP/Java?","body":"<p>How do I get whole and fractional parts from double in JSP/Java ? If the value is 3.25 then I want to get <code>fractional =.25</code>, <code>whole = 3</code></p>\n\n<p>How can we do this in Java?</p>\n"},{"tags":["java","azure","nginx","azure-cloud-services"],"owner":{"account_id":27694511,"reputation":11,"user_id":21140529,"display_name":"Khirod Pattnayak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1677483495,"answer_count":0,"score":1,"last_activity_date":1675435802,"creation_date":1675434396,"question_id":75337080,"body_markdown":"I am attempting to upload a file in an azure cloud via a Form Data, however getting the following error: after deploy virtual machine with nginx.\r\n\r\nThe application is working fine on local Machine. But when I deployed the same on the virtual machine via azure cloud. When I tried to hit the post request to upload data and file from form-data is showing bad request.  I don&#39;t no why this is happening on cloud, it is working fine on localhost. Below I have mention the error response and the code snippets and configured nginx file. I&#39;m also not aware whether it&#39;s a problem from java code or frontend or whether I configure wrong server.\r\nIt will be very helpful guidance for the problem.\r\n\r\nThank you in advance!!!!!\r\n\r\nError Message:\r\n\r\n`message: &quot;Bad Request&quot;`\r\n`_embedded: {`\r\n`errors: [`\r\n`{`\r\n`message: &quot;Required argument [CompletedFileUpload file] not specified&quot;, path: &quot;/file&quot;`\r\n`}`\r\n`]`\r\n`}`\r\n`errors: [`\r\n`{`  \r\n`message: &quot;Required argument [CompletedFileUpload file] not specified&quot;, path: &quot;/file&quot;`\r\n`}`\r\n`]`\r\n`0: {message: &quot;Required argument [CompletedFileUpload file] not specified&quot;, path: &quot;/file&quot;}`\r\n`message: &quot;Required argument [CompletedFileUpload file] not specified&quot;`\r\n`path: &quot;/file&quot;`\r\n`_links:`\r\n`{`  \r\n`self: {href: &quot;/investor/dataIngestion/addDataIngestion&quot;, templated: false}`\r\n`}`\r\n\r\nthis error I am getting on the preview under network:\r\n\r\n----------\r\n\r\nwe have written java similar to below\r\n\r\n    \r\n    \r\n    @Post(uri = &quot;/addDataIngestion&quot;, consumes ={MediaType.APPLICATION_JSON,MediaType.MULTIPART_FORM_DATA}) public HttpResponse&lt;DataIngestionModel&gt; saveDataIngetion(@Body DataIngestionModeldataIngestionModel,CompletedFileUpload file) throws DataIngestionControllerException\r\n    \r\n    {\r\n    \r\n    try {\t\t\r\n    DataIngestionModel dataingestionObject = this.dataingestionService.saveDataIngestion(dataIngestionModel,\r\n    \t\t\t\tfile);\r\n    \t\treturn HttpResponse.status(HttpStatus.OK).body(dataingestionObject);\r\n    \t} catch (Exception e) {\r\n    \t\t// TODO: handle exception\r\n    \t\te.printStackTrace();\r\n    \t\tthrow new DataIngestionControllerException(ReadPropertiesFile.readResponseProperty(&quot;101&quot;), e, 400,\r\n    \t\t\t\te.getMessage());\r\n    \t}\r\n    }\r\n    \r\n\r\nnginx config file :\r\n\r\n```\r\n server {\r\n        listen       80;\r\n        server_name  investor-relation2.centralindia.cloudapp.azure.com;\r\n\r\n        #charset koi8-r;\r\n\r\n        #access log logs/host.access.log  main;\r\n\r\n\r\n        location / {\r\n            root   C:\\CICD\\Frontend\\ir-platform;\r\n\t           try_files $uri $uri/ /index.html;\r\n                   index index.html index.htm;\r\n\r\n        }\r\n\tlocation /api {\r\n\t\trewrite ^/api/(.*) /$1 break;\r\n  \t\t    client_body_temp_path C:\\data\\files\\incoming;\r\n      \t\tclient_max_body_size 500M;\r\n                add_header &#39;Access-Control-Allow-Methods&#39; &#39;GET, POST, PUT, PATCH, DELETE, OPTIONS&#39;;\r\n                add_header &#39;Access-Control-Allow-Headers&#39; &#39;DNT,X-CustomHeader,Keep-Alive,User-Agent,X-                               Requested-With,If-Modified-Since,Cache-Control,Content-Type&#39;;\r\n            add_header Content-Type &#39;application/json&#39;;\r\n            add_header Content-Disposition &#39;form-data; filename=&quot;$request_filename&quot;&#39;;\r\n            add_header X-Accel-Buffering yes;\r\n            proxy_set_header Upgrade $http_upgrade;\r\n\t    proxy_set_header Connection &#39;upgrade&#39;;\r\n            proxy_set_header Host               $host;\r\n            proxy_set_header X-Real-IP          $remote_addr;\r\n            proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\r\n            proxy_set_header X-Forwarded-Proto  $scheme;\r\n\t    proxy_redirect off;\r\n\t    proxy_pass\t&quot;http://localhost:8080/api/&quot;;\r\n\t}\r\n```","title":"error when trying to upload a file in a azure cloud via a Form Data","body":"<p>I am attempting to upload a file in an azure cloud via a Form Data, however getting the following error: after deploy virtual machine with nginx.</p>\n<p>The application is working fine on local Machine. But when I deployed the same on the virtual machine via azure cloud. When I tried to hit the post request to upload data and file from form-data is showing bad request.  I don't no why this is happening on cloud, it is working fine on localhost. Below I have mention the error response and the code snippets and configured nginx file. I'm also not aware whether it's a problem from java code or frontend or whether I configure wrong server.\nIt will be very helpful guidance for the problem.</p>\n<p>Thank you in advance!!!!!</p>\n<p>Error Message:</p>\n<p><code>message: &quot;Bad Request&quot;</code>\n<code>_embedded: {</code>\n<code>errors: [</code>\n<code>{</code>\n<code>message: &quot;Required argument [CompletedFileUpload file] not specified&quot;, path: &quot;/file&quot;</code>\n<code>}</code>\n<code>]</code>\n<code>}</code>\n<code>errors: [</code>\n<code>{</code><br />\n<code>message: &quot;Required argument [CompletedFileUpload file] not specified&quot;, path: &quot;/file&quot;</code>\n<code>}</code>\n<code>]</code>\n<code>0: {message: &quot;Required argument [CompletedFileUpload file] not specified&quot;, path: &quot;/file&quot;}</code>\n<code>message: &quot;Required argument [CompletedFileUpload file] not specified&quot;</code>\n<code>path: &quot;/file&quot;</code>\n<code>_links:</code>\n<code>{</code><br />\n<code>self: {href: &quot;/investor/dataIngestion/addDataIngestion&quot;, templated: false}</code>\n<code>}</code></p>\n<p>this error I am getting on the preview under network:</p>\n<hr />\n<p>we have written java similar to below</p>\n<pre><code>@Post(uri = &quot;/addDataIngestion&quot;, consumes ={MediaType.APPLICATION_JSON,MediaType.MULTIPART_FORM_DATA}) public HttpResponse&lt;DataIngestionModel&gt; saveDataIngetion(@Body DataIngestionModeldataIngestionModel,CompletedFileUpload file) throws DataIngestionControllerException\n\n{\n\ntry {       \nDataIngestionModel dataingestionObject = this.dataingestionService.saveDataIngestion(dataIngestionModel,\n                file);\n        return HttpResponse.status(HttpStatus.OK).body(dataingestionObject);\n    } catch (Exception e) {\n        // TODO: handle exception\n        e.printStackTrace();\n        throw new DataIngestionControllerException(ReadPropertiesFile.readResponseProperty(&quot;101&quot;), e, 400,\n                e.getMessage());\n    }\n}\n</code></pre>\n<p>nginx config file :</p>\n<pre><code> server {\n        listen       80;\n        server_name  investor-relation2.centralindia.cloudapp.azure.com;\n\n        #charset koi8-r;\n\n        #access log logs/host.access.log  main;\n\n\n        location / {\n            root   C:\\CICD\\Frontend\\ir-platform;\n               try_files $uri $uri/ /index.html;\n                   index index.html index.htm;\n\n        }\n    location /api {\n        rewrite ^/api/(.*) /$1 break;\n            client_body_temp_path C:\\data\\files\\incoming;\n            client_max_body_size 500M;\n                add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, PATCH, DELETE, OPTIONS';\n                add_header 'Access-Control-Allow-Headers' 'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-                               Requested-With,If-Modified-Since,Cache-Control,Content-Type';\n            add_header Content-Type 'application/json';\n            add_header Content-Disposition 'form-data; filename=&quot;$request_filename&quot;';\n            add_header X-Accel-Buffering yes;\n            proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n            proxy_set_header Host               $host;\n            proxy_set_header X-Real-IP          $remote_addr;\n            proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto  $scheme;\n        proxy_redirect off;\n        proxy_pass  &quot;http://localhost:8080/api/&quot;;\n    }\n</code></pre>\n"},{"tags":["java","parsing","split"],"comments":[{"owner":{"account_id":9926590,"reputation":5025,"user_id":7347933,"accept_rate":86,"display_name":"Papershine"},"score":0,"creation_date":1486170841,"post_id":42035402,"comment_id":71245173,"body_markdown":"You haven&#39;t declared a variable to be `s`, how could java split it?","body":"You haven&#39;t declared a variable to be <code>s</code>, how could java split it?"}],"answers":[{"tags":[],"owner":{"account_id":134590,"reputation":26815,"user_id":336827,"accept_rate":61,"display_name":"freedev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1486171095,"creation_date":1486171095,"answer_id":42035475,"question_id":42035402,"body_markdown":"I don&#39;t want write the code for the solution. Just give you some input to arrive at right answer by yourself. It is your exercise after all.\r\n\r\n1. You do not need to use two `Scanner` one is enough.\r\n2. Check the variable `lineString` after the execution of `scnr.nextLine()`\r\n3. The String method `split` usually helps to figure out","title":"How to parse strings in Java?","body":"<p>I don't want write the code for the solution. Just give you some input to arrive at right answer by yourself. It is your exercise after all.</p>\n\n<ol>\n<li>You do not need to use two <code>Scanner</code> one is enough.</li>\n<li>Check the variable <code>lineString</code> after the execution of <code>scnr.nextLine()</code></li>\n<li>The String method <code>split</code> usually helps to figure out</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9926590,"reputation":5025,"user_id":7347933,"accept_rate":86,"display_name":"Papershine"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1486176854,"creation_date":1486171276,"answer_id":42035489,"question_id":42035402,"body_markdown":"    import java.util.Scanner;\r\n    \r\n    public class ParseStrings {\r\n       public static void main(String[] args) {\r\n          Scanner scnr = new Scanner(System.in);\r\n          String userInput = &quot;&quot;;\r\n          boolean inputDone = false; \r\n    \r\n          while (!inputDone) {\r\n             System.out.print(&quot;Enter input string: \\n&quot;);\r\n             userInput = scnr.nextLine()\r\n    \r\n    \r\n             if (userInput.equals(&quot;q&quot;)){\r\n                System.out.println(&quot;First word: &quot; + userInput);\r\n                inputDone = true; \r\n             } else {\r\n                String[] userArray = userInput.split(&quot;,&quot;);\r\n                System.out.println(&quot;First word: &quot; + userArray[0]);\r\n                System.out.println(&quot;Second word: &quot; + userArray[1]);\r\n                System.out.println();\r\n            }\r\n          }\r\n    \r\n    \r\n          return;\r\n       }\r\n    }\r\n\r\nExplanation:\r\nFirst, an object `Scanner` is created. Then, the user&#39;s input is stored in `userInput`. After that, java checks if the user entered q, if so, then end the application. Else, java splits the string into two words and then prints it.\r\n\r\nRemember that understanding the code is a very important process in learning a programming language, so please, please understand the code and not just copy and paste it to submit as your homework.","title":"How to parse strings in Java?","body":"<pre><code>import java.util.Scanner;\n\npublic class ParseStrings {\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in);\n      String userInput = \"\";\n      boolean inputDone = false; \n\n      while (!inputDone) {\n         System.out.print(\"Enter input string: \\n\");\n         userInput = scnr.nextLine()\n\n\n         if (userInput.equals(\"q\")){\n            System.out.println(\"First word: \" + userInput);\n            inputDone = true; \n         } else {\n            String[] userArray = userInput.split(\",\");\n            System.out.println(\"First word: \" + userArray[0]);\n            System.out.println(\"Second word: \" + userArray[1]);\n            System.out.println();\n        }\n      }\n\n\n      return;\n   }\n}\n</code></pre>\n\n<p>Explanation:\nFirst, an object <code>Scanner</code> is created. Then, the user's input is stored in <code>userInput</code>. After that, java checks if the user entered q, if so, then end the application. Else, java splits the string into two words and then prints it.</p>\n\n<p>Remember that understanding the code is a very important process in learning a programming language, so please, please understand the code and not just copy and paste it to submit as your homework.</p>\n"},{"tags":[],"owner":{"account_id":18247865,"reputation":11,"user_id":13283555,"display_name":"matalco"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1586567235,"creation_date":1586567235,"answer_id":61150875,"question_id":42035402,"body_markdown":"I got this same problem in my class and it been a very challenging problem for me to figure out. I was able to get the correct answer using the code posted in here that only needed very slight modifications made to it. Thank you for the help. below is modified version of the above the code I used to get the correct answer. \r\n\r\n    import java.util.Scanner;\r\n\r\n    public class ParseStrings {\r\n       public static void main(String[] args) {\r\n          Scanner scnr = new Scanner(System.in);\r\n          String userInput = &quot;&quot;;\r\n          boolean inputDone = false; \r\n\r\n          while (!inputDone) {\r\n             System.out.print(&quot;Enter input string: \\n&quot;);\r\n             userInput = scnr.nextLine();\r\n         \r\n             if (userInput.equals(&quot;q&quot;)){\r\n                inputDone = true;\r\n                break;\r\n             }\r\n         \r\n             if(userInput.indexOf(&quot;,&quot;) == -1){ //if comma is not found in the user input\r\n             System.out.println(&quot;Error: No comma in string&quot;);\r\n             continue;\r\n             }\r\n\r\n\r\n              else {\r\n                String[] userArray = userInput.split(&quot;,&quot;);\r\n                System.out.println(&quot;First word: &quot; + userArray[0].trim());\r\n                System.out.println(&quot;Second word: &quot; + userArray[1].trim());\r\n                System.out.println();\r\n                System.out.println();\r\n            }\r\n          }\r\n\r\n\r\n          return;\r\n       }\r\n    }","title":"How to parse strings in Java?","body":"<p>I got this same problem in my class and it been a very challenging problem for me to figure out. I was able to get the correct answer using the code posted in here that only needed very slight modifications made to it. Thank you for the help. below is modified version of the above the code I used to get the correct answer. </p>\n\n<pre><code>import java.util.Scanner;\n\npublic class ParseStrings {\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in);\n      String userInput = \"\";\n      boolean inputDone = false; \n\n      while (!inputDone) {\n         System.out.print(\"Enter input string: \\n\");\n         userInput = scnr.nextLine();\n\n         if (userInput.equals(\"q\")){\n            inputDone = true;\n            break;\n         }\n\n         if(userInput.indexOf(\",\") == -1){ //if comma is not found in the user input\n         System.out.println(\"Error: No comma in string\");\n         continue;\n         }\n\n\n          else {\n            String[] userArray = userInput.split(\",\");\n            System.out.println(\"First word: \" + userArray[0].trim());\n            System.out.println(\"Second word: \" + userArray[1].trim());\n            System.out.println();\n            System.out.println();\n        }\n      }\n\n\n      return;\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26881335,"reputation":1,"user_id":20461711,"display_name":"Kris Kollman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670074303,"creation_date":1670074303,"answer_id":74667217,"question_id":42035402,"body_markdown":"The unit I was working on for this problem was about using the inSS, so I wanted to try and use it to solve the problem. I did get stuck constantly collecting the comma for the second word, but after consulting someone else was suggesting using a delimiter to get passed the comma. I did have to add a trim() command on the print lines to get rid of any white spaces around the words when they were captured by the inSS.## \r\n\r\n\r\n----------\r\n\r\n    import java.util.Scanner;\r\n    \r\n    \r\n    public class ParseStrings {\r\n       public static void main(String[] args) {\r\n          Scanner scnr = new Scanner(System.in);\r\n          //Input string stream\r\n    \t   Scanner inSS = null;\r\n       \t//Input string \r\n       \tString inputWords;\r\n       \t// first word\r\n       \tString firstWord;\r\n       \t//Comma check;\r\n       \tString commaCheck;\r\n       \t//second word\r\n       \tString secondWord;\r\n       \t//flag to indicate next iteration\r\n    \t   boolean inputDone;\r\n    \t\r\n    \t   inputDone = false;\r\n    \r\n       \t//prompt the user to input string \r\n       \tSystem.out.println(&quot;Enter input string: &quot;);\r\n       \t\r\n       \t//take input data as long as &quot;q&quot; is not ent\r\n       \twhile (!inputDone){\r\n       \t\r\n       \t\t//entire line into inputWords\r\n       \t\tinputWords = scnr.nextLine();\r\n       \t\t\r\n       \t\t//Init scanner object with string\r\n       \t\tinSS = new Scanner(inputWords);\r\n    \r\n    \t\t//Set the delimiter to &quot;,&quot; and new line\r\n    \t\tinSS.useDelimiter(&quot;[,\\n]&quot;);\r\n       \r\n       \t\t//process the line\r\n       \t\tfirstWord = inSS.next();\r\n       \r\n       \t\t//output parsed values\r\n       \t\tif (firstWord.equals(&quot;q&quot;)){\r\n       \t      \tinputDone = true;\r\n       \t\t\tbreak;\r\n       \t\t}\r\n       \t\t\r\n       \t\t//comma check\r\n       \t\tif(inputWords.indexOf(&quot;,&quot;) == -1){\r\n       \t\t\tSystem.out.println(&quot;Error: No comma in string&quot;);\r\n       \t\t\tSystem.out.println(&quot;Enter input string: &quot;);\r\n       \t\t\tcontinue;\r\n       \t\t}\r\n       \t\telse {\r\n    \t\t\tsecondWord = inSS.next();\r\n       \t\t\tSystem.out.println(&quot;First word: &quot; + firstWord.trim());\r\n       \t\t\tSystem.out.println(&quot;Second word: &quot; + secondWord.trim());\r\n       \t\t\tSystem.out.println();\r\n       \t\t\tSystem.out.println();\r\n       \t\t}\r\n       \t\tSystem.out.println(&quot;Enter input string: &quot;);\r\n       \t\t\t\t\r\n    \r\n       \r\n    \t}\r\n    \r\n    \t}\t\r\n    }\r\n\r\n","title":"How to parse strings in Java?","body":"<p>The unit I was working on for this problem was about using the inSS, so I wanted to try and use it to solve the problem. I did get stuck constantly collecting the comma for the second word, but after consulting someone else was suggesting using a delimiter to get passed the comma. I did have to add a trim() command on the print lines to get rid of any white spaces around the words when they were captured by the inSS.##</p>\n<hr />\n<pre><code>import java.util.Scanner;\n\n\npublic class ParseStrings {\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in);\n      //Input string stream\n       Scanner inSS = null;\n    //Input string \n    String inputWords;\n    // first word\n    String firstWord;\n    //Comma check;\n    String commaCheck;\n    //second word\n    String secondWord;\n    //flag to indicate next iteration\n       boolean inputDone;\n    \n       inputDone = false;\n\n    //prompt the user to input string \n    System.out.println(&quot;Enter input string: &quot;);\n    \n    //take input data as long as &quot;q&quot; is not ent\n    while (!inputDone){\n    \n        //entire line into inputWords\n        inputWords = scnr.nextLine();\n        \n        //Init scanner object with string\n        inSS = new Scanner(inputWords);\n\n        //Set the delimiter to &quot;,&quot; and new line\n        inSS.useDelimiter(&quot;[,\\n]&quot;);\n   \n        //process the line\n        firstWord = inSS.next();\n   \n        //output parsed values\n        if (firstWord.equals(&quot;q&quot;)){\n            inputDone = true;\n            break;\n        }\n        \n        //comma check\n        if(inputWords.indexOf(&quot;,&quot;) == -1){\n            System.out.println(&quot;Error: No comma in string&quot;);\n            System.out.println(&quot;Enter input string: &quot;);\n            continue;\n        }\n        else {\n            secondWord = inSS.next();\n            System.out.println(&quot;First word: &quot; + firstWord.trim());\n            System.out.println(&quot;Second word: &quot; + secondWord.trim());\n            System.out.println();\n            System.out.println();\n        }\n        System.out.println(&quot;Enter input string: &quot;);\n                \n\n   \n    }\n\n    }   \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23615156,"reputation":1,"user_id":17649386,"display_name":"Lorie Zimmerman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675435409,"creation_date":1675434684,"answer_id":75337143,"question_id":42035402,"body_markdown":"This worked for me.\r\n\r\n\r\n    import java.util.Scanner;\r\n    public class ParseStrings {\r\n       public static void main(String[] args) {\r\n   \r\n          Scanner scnr = new Scanner(System.in); // Input stream for standard input\r\n          Scanner inSS = null;              // Input string stream       \r\n          String lineString = &quot;&quot;;           // Input string   \r\n          String firstWord = &quot;&quot;;             // Word one\r\n          String secondWord = &quot;&quot;;             // word two\r\n          boolean inputDone = false;\r\n      \r\n          while (!inputDone) {\r\n\r\n             System.out.println(&quot;Enter input string: &quot;);\r\n\r\n             // Entire line into lineString\r\n             lineString = scnr.nextLine();\r\n      \r\n             // Create new input string stream\r\n             inSS = new Scanner(lineString);\r\n         \r\n             //Set the delimiter to &quot;,&quot; and new line\r\n             inSS.useDelimiter(&quot;[,\\n]&quot;);\r\n         \r\n             if (lineString.equals(&quot;q&quot;)) {\r\n                inputDone = true;\r\n                break;\r\n             }\r\n         \r\n             if (lineString.indexOf(&quot;,&quot;) == -1) {\r\n                System.out.println(&quot;Error: No comma in string&quot;);\r\n            \r\n                continue;  \r\n         \r\n             }\r\n             else {\r\n      \r\n                // Now process the line           \r\n                firstWord = inSS.next();\r\n                // Now process the line\r\n                secondWord = inSS.next();\r\n      \r\n                System.out.println(&quot;First word: &quot; + firstWord.trim().replace(&quot;,&quot;, &quot;&quot;));\r\n                System.out.println(&quot;Second word: &quot; + secondWord.trim().replace(&quot;,&quot;, &quot;&quot;) + &quot;\\n\\n&quot;);\r\n             }   \r\n         \r\n          }\r\n          return;\r\n       }\r\n    }   \r\n\r\n","title":"How to parse strings in Java?","body":"<p>This worked for me.</p>\n<pre><code>import java.util.Scanner;\npublic class ParseStrings {\n   public static void main(String[] args) {\n\n      Scanner scnr = new Scanner(System.in); // Input stream for standard input\n      Scanner inSS = null;              // Input string stream       \n      String lineString = &quot;&quot;;           // Input string   \n      String firstWord = &quot;&quot;;             // Word one\n      String secondWord = &quot;&quot;;             // word two\n      boolean inputDone = false;\n  \n      while (!inputDone) {\n\n         System.out.println(&quot;Enter input string: &quot;);\n\n         // Entire line into lineString\n         lineString = scnr.nextLine();\n  \n         // Create new input string stream\n         inSS = new Scanner(lineString);\n     \n         //Set the delimiter to &quot;,&quot; and new line\n         inSS.useDelimiter(&quot;[,\\n]&quot;);\n     \n         if (lineString.equals(&quot;q&quot;)) {\n            inputDone = true;\n            break;\n         }\n     \n         if (lineString.indexOf(&quot;,&quot;) == -1) {\n            System.out.println(&quot;Error: No comma in string&quot;);\n        \n            continue;  \n     \n         }\n         else {\n  \n            // Now process the line           \n            firstWord = inSS.next();\n            // Now process the line\n            secondWord = inSS.next();\n  \n            System.out.println(&quot;First word: &quot; + firstWord.trim().replace(&quot;,&quot;, &quot;&quot;));\n            System.out.println(&quot;Second word: &quot; + secondWord.trim().replace(&quot;,&quot;, &quot;&quot;) + &quot;\\n\\n&quot;);\n         }   \n     \n      }\n      return;\n   }\n}   \n</code></pre>\n"}],"owner":{"account_id":10174150,"reputation":33,"user_id":7513452,"display_name":"rmac"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19865,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":5,"score":3,"last_activity_date":1675435409,"creation_date":1486170474,"question_id":42035402,"body_markdown":"I am working on a homework assignment and unable to find the answer in my online text book or anywhere else.\r\n\r\nMy homework question is four parts:\r\n\r\n1. Prompt the user for a string that contains two strings separated by a comma. \r\n\r\n2. Report an error if the input string does not contain a comma. Continue to prompt until a valid string is entered. Note: If the input contains a comma, then assume that the input also contains two strings.\r\n\r\n3. Extract the two words from the input string and remove any spaces. Store the strings in two separate variables and output the strings.\r\n\r\n4. Using a loop, extend the program to handle multiple lines of input. Continue until the user enters q to quit.\r\n\r\n&lt;pre&gt;\r\nFinal outcome should print out as follows:\r\nEnter input string: Jill, Allen\r\nFirst word: Jill\r\nSecond word: Allen\r\n&lt;/pre&gt;\r\n\r\n&lt;pre&gt;\r\nEnter input string: Golden , Monkey\r\nFirst word: Golden\r\nSecond word: Monkey\r\n&lt;/pre&gt;\r\n\r\n&lt;pre&gt;\r\nEnter input string: Washington,DC\r\nFirst word: Washington\r\nSecond word: DC\r\n&lt;/pre&gt;\r\n\r\nEnter input string: q\r\n\r\nMy code output is incorrect. I do not know how to make the automatic , not show after my first word or show up as my second word. I have tried using\r\n`String [] array = s.split(&quot;,);` and the class program does not recognize this command and errors out.\r\n\r\nThis is my code:\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class ParseStrings {\r\n       public static void main(String[] args) {\r\n          Scanner scnr = new Scanner(System.in); \r\n          Scanner inSS = null;                   \r\n          String firstWord = &quot; &quot;;                \r\n          String secondWord = &quot;&quot;;\r\n          String lineString = &quot;&quot;;\r\n          boolean inputDone = false; \r\n             \r\n          while (!inputDone) {\r\n             lineString = scnr.nextLine();\r\n             inSS = new Scanner(lineString);\r\n             firstWord = inSS.next();\r\n             System.out.print(&quot;Enter input string: \\n&quot;);\r\n             \r\n                  \r\n             if (firstWord.equals(&quot;q&quot;)){\r\n                System.out.println(&quot;First word: &quot; + firstWord);\r\n                inputDone = true; \r\n             } else {\r\n                secondWord = inSS.next();\r\n                System.out.println(&quot;First word: &quot; + firstWord);\r\n                System.out.println(&quot;Second word: &quot; + secondWord);\r\n                System.out.println();\r\n            }\r\n          }\r\n          \r\n          \r\n          return;\r\n       }\r\n    }\r\n\r\n\r\nHow can I code this string to include and exclude the comma and print out the error. I am not understanding what I need to do.\r\n\r\n","title":"How to parse strings in Java?","body":"<p>I am working on a homework assignment and unable to find the answer in my online text book or anywhere else.</p>\n\n<p>My homework question is four parts:</p>\n\n<ol>\n<li><p>Prompt the user for a string that contains two strings separated by a comma. </p></li>\n<li><p>Report an error if the input string does not contain a comma. Continue to prompt until a valid string is entered. Note: If the input contains a comma, then assume that the input also contains two strings.</p></li>\n<li><p>Extract the two words from the input string and remove any spaces. Store the strings in two separate variables and output the strings.</p></li>\n<li><p>Using a loop, extend the program to handle multiple lines of input. Continue until the user enters q to quit.</p></li>\n</ol>\n\n<pre>\nFinal outcome should print out as follows:\nEnter input string: Jill, Allen\nFirst word: Jill\nSecond word: Allen\n</pre>\n\n<pre>\nEnter input string: Golden , Monkey\nFirst word: Golden\nSecond word: Monkey\n</pre>\n\n<pre>\nEnter input string: Washington,DC\nFirst word: Washington\nSecond word: DC\n</pre>\n\n<p>Enter input string: q</p>\n\n<p>My code output is incorrect. I do not know how to make the automatic , not show after my first word or show up as my second word. I have tried using\n<code>String [] array = s.split(\",);</code> and the class program does not recognize this command and errors out.</p>\n\n<p>This is my code:</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class ParseStrings {\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in); \n      Scanner inSS = null;                   \n      String firstWord = \" \";                \n      String secondWord = \"\";\n      String lineString = \"\";\n      boolean inputDone = false; \n\n      while (!inputDone) {\n         lineString = scnr.nextLine();\n         inSS = new Scanner(lineString);\n         firstWord = inSS.next();\n         System.out.print(\"Enter input string: \\n\");\n\n\n         if (firstWord.equals(\"q\")){\n            System.out.println(\"First word: \" + firstWord);\n            inputDone = true; \n         } else {\n            secondWord = inSS.next();\n            System.out.println(\"First word: \" + firstWord);\n            System.out.println(\"Second word: \" + secondWord);\n            System.out.println();\n        }\n      }\n\n\n      return;\n   }\n}\n</code></pre>\n\n<p>How can I code this string to include and exclude the comma and print out the error. I am not understanding what I need to do.</p>\n"},{"tags":["java","json","spring-boot","jackson","fasterxml"],"comments":[{"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"score":2,"creation_date":1493986586,"post_id":43804503,"comment_id":74648398,"body_markdown":"don&#39;t use toString Use jackson ObjectMapper::readValue and ObjectMapper::writeValueAsString","body":"don&#39;t use toString Use jackson ObjectMapper::readValue and ObjectMapper::writeValueAsString"},{"owner":{"account_id":2529186,"reputation":3484,"user_id":2197837,"accept_rate":25,"display_name":"Praneeth Ramesh"},"score":1,"creation_date":1493986685,"post_id":43804503,"comment_id":74648451,"body_markdown":"Use `new ObjectMapper().readValue(jsonString, Link.class);`","body":"Use <code>new ObjectMapper().readValue(jsonString, Link.class);</code>"},{"owner":{"account_id":4859,"reputation":40443,"user_id":7512,"accept_rate":75,"display_name":"slim"},"score":1,"creation_date":1493987084,"post_id":43804503,"comment_id":74648737,"body_markdown":"@pvpkiran ... although `ToStringBuilder` can be configured to output JSON, which `ObjectMapper` would be able to consume.","body":"@pvpkiran ... although <code>ToStringBuilder</code> can be configured to output JSON, which <code>ObjectMapper</code> would be able to consume."},{"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"score":1,"creation_date":1493987256,"post_id":43804503,"comment_id":74648859,"body_markdown":"yes you can but there are cases where toString() performs very badly expecially in cases of nested objects and collections.Try printing a map or list with toString and also with ObjectMapper and see the difference","body":"yes you can but there are cases where toString() performs very badly expecially in cases of nested objects and collections.Try printing a map or list with toString and also with ObjectMapper and see the difference"}],"answers":[{"tags":[],"owner":{"account_id":3811869,"reputation":1017,"user_id":3162450,"accept_rate":100,"display_name":"ytibrewala"},"down_vote_count":2,"up_vote_count":65,"is_accepted":true,"score":63,"last_activity_date":1494579750,"creation_date":1494579750,"answer_id":43933606,"question_id":43804503,"body_markdown":"Just putting the comment by @pvpkiran in an answer.\r\n\r\nUse [ObjectMapper][1] class from *com.fasterxml.jackson.databind*\r\n\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n**Converting from Object to String:**\r\n\r\n    String jsonString = objectMapper.writeValueAsString(link);\r\n\r\n**Converting from String to Object:**\r\n\r\n    Link link = objectMapper.readValue(jsonString, type)\r\n\r\n\r\n  [1]: https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html","title":"Jackson Converting String to Object","body":"<p>Just putting the comment by @pvpkiran in an answer.</p>\n\n<p>Use <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html\" rel=\"noreferrer\">ObjectMapper</a> class from <em>com.fasterxml.jackson.databind</em></p>\n\n<pre><code>ObjectMapper objectMapper = new ObjectMapper();\n</code></pre>\n\n<p><strong>Converting from Object to String:</strong></p>\n\n<pre><code>String jsonString = objectMapper.writeValueAsString(link);\n</code></pre>\n\n<p><strong>Converting from String to Object:</strong></p>\n\n<pre><code>Link link = objectMapper.readValue(jsonString, type)\n</code></pre>\n"}],"owner":{"account_id":3811869,"reputation":1017,"user_id":3162450,"accept_rate":100,"display_name":"ytibrewala"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78041,"favorite_count":0,"down_vote_count":1,"up_vote_count":17,"accepted_answer_id":43933606,"answer_count":1,"score":16,"last_activity_date":1675435250,"creation_date":1493985910,"question_id":43804503,"body_markdown":"**Link.java**\r\n    \r\n    @JsonInclude(JsonInclude.Include.NON_NULL)\r\n    @JsonPropertyOrder({ &quot;rel&quot;, &quot;href&quot;,&quot;method&quot; })\r\n    public class Link {\r\n    \r\n        @JsonProperty(&quot;rel&quot;)\r\n        private String rel;\r\n        @JsonProperty(&quot;href&quot;)\r\n        private String href;\r\n        @JsonProperty(&quot;method&quot;)\r\n        private Method method;\r\n\r\n        @Override\r\n        public String toString() {\r\n            return ToStringBuilder.reflectionToString(this);\r\n        }\r\n    }\r\n\r\nI have this third party class with fasterxml jackson annotations. I can convert a given object into a string using the specified toString() method. Is there any way of using that String to get an object of type Link?\r\n\r\nNote: The object itself has an embedded object (which has several more embedded objects) and these too needs to be converted into a Method object from the string itself.","title":"Jackson Converting String to Object","body":"<p><strong>Link.java</strong></p>\n\n<pre><code>@JsonInclude(JsonInclude.Include.NON_NULL)\n@JsonPropertyOrder({ \"rel\", \"href\",\"method\" })\npublic class Link {\n\n    @JsonProperty(\"rel\")\n    private String rel;\n    @JsonProperty(\"href\")\n    private String href;\n    @JsonProperty(\"method\")\n    private Method method;\n\n    @Override\n    public String toString() {\n        return ToStringBuilder.reflectionToString(this);\n    }\n}\n</code></pre>\n\n<p>I have this third party class with fasterxml jackson annotations. I can convert a given object into a string using the specified toString() method. Is there any way of using that String to get an object of type Link?</p>\n\n<p>Note: The object itself has an embedded object (which has several more embedded objects) and these too needs to be converted into a Method object from the string itself.</p>\n"},{"tags":["java","hibernate","logging"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675435163,"creation_date":1675435163,"answer_id":75337236,"question_id":75299539,"body_markdown":"There is no way to do that with plain Hibernate. You can just disable the `org.hibernate.SQL_SLOW` logger temporarily with your logger API by setting the level programatically to e.g. WARN and then reset it again to INFO.","title":"Whitelist specific query from hibernate slow query logging","body":"<p>There is no way to do that with plain Hibernate. You can just disable the <code>org.hibernate.SQL_SLOW</code> logger temporarily with your logger API by setting the level programatically to e.g. WARN and then reset it again to INFO.</p>\n"}],"owner":{"account_id":6512774,"reputation":7115,"user_id":5039498,"display_name":"Amit Bera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675435163,"creation_date":1675179636,"question_id":75299539,"body_markdown":"I am using below hibernate settings to log slow queries for my application\r\n`hibernate.session.events.log.LOG_QUERIES_SLOWER_THAN_MS : &lt;time&gt;` \r\n`org.hibernate.SQL_SLOW: warn`\r\n\r\nIt is working fine. But I want to whitelist a few queries so that even if they run beyond &#39;LOG_QUERIES_SLOWER_THAN_MS&#39; will not be logged as a warning. I want to do that as I know there are a few queries which supposed to take a longer time to run and I don&#39;t want to generate any alerts for those.\r\n\r\nIs there any way I can do that?\r\n\r\nI have tried to find any settings I can provide during the query to override the behaviour for that specific query. \r\n\r\nAre there any settings and API hibernate provide to achieve it?","title":"Whitelist specific query from hibernate slow query logging","body":"<p>I am using below hibernate settings to log slow queries for my application\n<code>hibernate.session.events.log.LOG_QUERIES_SLOWER_THAN_MS : &lt;time&gt;</code>\n<code>org.hibernate.SQL_SLOW: warn</code></p>\n<p>It is working fine. But I want to whitelist a few queries so that even if they run beyond 'LOG_QUERIES_SLOWER_THAN_MS' will not be logged as a warning. I want to do that as I know there are a few queries which supposed to take a longer time to run and I don't want to generate any alerts for those.</p>\n<p>Is there any way I can do that?</p>\n<p>I have tried to find any settings I can provide during the query to override the behaviour for that specific query.</p>\n<p>Are there any settings and API hibernate provide to achieve it?</p>\n"},{"tags":["java","tcp","mocking"],"answers":[{"tags":[],"owner":{"account_id":321412,"reputation":5968,"user_id":640224,"accept_rate":71,"display_name":"henry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1423053847,"creation_date":1423053847,"answer_id":28321748,"question_id":28320610,"body_markdown":"I&#39;d suggest you don&#39;t try and mock at such a low level.\r\n\r\nCreate a meaningful interface that encapsulates the operations you might want to perform against the arduino server. Your code should depend on that and this interface may be mocked for your unit tests.\r\n\r\nYou will need a concrete class that implements the interface and interacts with the server. Don&#39;t try and unit test it - write an integration test for it that hits a real server.\r\n","title":"mocking remote tcp server","body":"<p>I'd suggest you don't try and mock at such a low level.</p>\n\n<p>Create a meaningful interface that encapsulates the operations you might want to perform against the arduino server. Your code should depend on that and this interface may be mocked for your unit tests.</p>\n\n<p>You will need a concrete class that implements the interface and interacts with the server. Don't try and unit test it - write an integration test for it that hits a real server.</p>\n"},{"tags":[],"owner":{"account_id":1066318,"reputation":105,"user_id":1066792,"display_name":"klara-l"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1423054333,"creation_date":1423054333,"answer_id":28321901,"question_id":28320610,"body_markdown":"I&#39;m not sure, how exactly your system design is or what you want to mock, but I see three ways how you could test:\r\n\r\n - Connect with [netcat to the server][1]. Netcat allows you to test text-protocols by sending your request to the server and manually checking the response.\r\n\r\n - Open a connection with a client-socket in your favorite language. You should find plenty information on how to do that on SO.\r\n\r\n - Use [scapy to build a TCP handshake][2], if you want to test specific parts of TCP. Basics for TCP can be found in rfc793.\r\n\r\nIf I did not answer your question, please provide more details on what you want to do, how your overall system architecture is and what programming language you want to use.\r\n\r\n\r\n  [1]: http://www.binarytides.com/netcat-tutorial-for-beginners/\r\n  [2]: https://www.fir3net.com/Programming/Python/how-to-build-a-tcp-connection-in-scapy.html","title":"mocking remote tcp server","body":"<p>I'm not sure, how exactly your system design is or what you want to mock, but I see three ways how you could test:</p>\n\n<ul>\n<li><p>Connect with <a href=\"http://www.binarytides.com/netcat-tutorial-for-beginners/\" rel=\"nofollow\">netcat to the server</a>. Netcat allows you to test text-protocols by sending your request to the server and manually checking the response.</p></li>\n<li><p>Open a connection with a client-socket in your favorite language. You should find plenty information on how to do that on SO.</p></li>\n<li><p>Use <a href=\"https://www.fir3net.com/Programming/Python/how-to-build-a-tcp-connection-in-scapy.html\" rel=\"nofollow\">scapy to build a TCP handshake</a>, if you want to test specific parts of TCP. Basics for TCP can be found in rfc793.</p></li>\n</ul>\n\n<p>If I did not answer your question, please provide more details on what you want to do, how your overall system architecture is and what programming language you want to use.</p>\n"},{"tags":[],"owner":{"account_id":118842,"reputation":169,"user_id":310151,"display_name":"Colorator"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1528327677,"creation_date":1528327677,"answer_id":50731007,"question_id":28320610,"body_markdown":"Take a look at [WireSham][1]: a TCP mocking service that enables to load a previously recorded TCP dump (ie using Wireshark) and creates a virtual server simulating traffic. \r\n\r\n  [1]: https://github.com/abstracta/wiresham","title":"mocking remote tcp server","body":"<p>Take a look at <a href=\"https://github.com/abstracta/wiresham\" rel=\"nofollow noreferrer\">WireSham</a>: a TCP mocking service that enables to load a previously recorded TCP dump (ie using Wireshark) and creates a virtual server simulating traffic. </p>\n"}],"owner":{"account_id":5268273,"reputation":47,"user_id":4207425,"accept_rate":0,"display_name":"Soil92"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5617,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1675434946,"creation_date":1423050419,"question_id":28320610,"body_markdown":"**Some context** : I currently working on a home automation project which involves arduino controllers I need to connect to via TCP/IP. The arduino works as a server.\r\n\r\n**My Question** : How can I mock this arduino connection for testing purpose?\r\nCouldn&#39;t find any good resource to learn from.\r\nSorry if my question is duplicate, but I did not find any answer on SO that fits my need.\r\n\r\nAny help will be appreciated !","title":"mocking remote tcp server","body":"<p><strong>Some context</strong> : I currently working on a home automation project which involves arduino controllers I need to connect to via TCP/IP. The arduino works as a server.</p>\n<p><strong>My Question</strong> : How can I mock this arduino connection for testing purpose?\nCouldn't find any good resource to learn from.\nSorry if my question is duplicate, but I did not find any answer on SO that fits my need.</p>\n<p>Any help will be appreciated !</p>\n"},{"tags":["java","cassandra"],"comments":[{"owner":{"account_id":5357170,"reputation":14233,"user_id":4269535,"display_name":"Erick Ramirez"},"score":0,"creation_date":1675407453,"post_id":75332102,"comment_id":132926326,"body_markdown":"Welcome to Stack Overflow! A friendly reminder that this site is for getting help with coding, algorithm, or programming language problems so I voted to have your post moved to [DBA Stack Exchange](https://dba.stackexchange.com/questions/ask?tags=cassandra). For future reference, you should post DB admin/ops questions on https://dba.stackexchange.com/questions/ask?tags=cassandra. Cheers!","body":"Welcome to Stack Overflow! A friendly reminder that this site is for getting help with coding, algorithm, or programming language problems so I voted to have your post moved to <a href=\"https://dba.stackexchange.com/questions/ask?tags=cassandra\">DBA Stack Exchange</a>. For future reference, you should post DB admin/ops questions on <a href=\"https://dba.stackexchange.com/questions/ask?tags=cassandra\">dba.stackexchange.com/questions/ask?tags=cassandra</a>. Cheers!"}],"answers":[{"tags":[],"owner":{"account_id":5357170,"reputation":14233,"user_id":4269535,"display_name":"Erick Ramirez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675407394,"creation_date":1675407394,"answer_id":75332411,"question_id":75332102,"body_markdown":"Issuing multiple deletes for the same partition can have a significant impact on your cluster.\r\n\r\nRemember that all writes in Cassandra (`INSERT`, `UPDATE`, `DELETE`) are inserts under the hood. Since Cassandra does not perform a read-before-write (with the exception of [lightweight transactions][1]), issuing a `DELETE` will insert a tombstone marker regardless of whether the data exists or has already been deleted.\r\n\r\nEvery single `DELETE` you issue counts as a write request so depending on how busy your cluster is, it may have a measurable impact on its performance. Cheers!\r\n\r\n\r\n  [1]: https://cassandra.apache.org/doc/latest/cassandra/architecture/guarantees.html#lightweight-transactions-with-linearizable-consistency","title":"Does deleting the same data multiple times have a performance impact on a Cassandra cluster?","body":"<p>Issuing multiple deletes for the same partition can have a significant impact on your cluster.</p>\n<p>Remember that all writes in Cassandra (<code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>) are inserts under the hood. Since Cassandra does not perform a read-before-write (with the exception of <a href=\"https://cassandra.apache.org/doc/latest/cassandra/architecture/guarantees.html#lightweight-transactions-with-linearizable-consistency\" rel=\"nofollow noreferrer\">lightweight transactions</a>), issuing a <code>DELETE</code> will insert a tombstone marker regardless of whether the data exists or has already been deleted.</p>\n<p>Every single <code>DELETE</code> you issue counts as a write request so depending on how busy your cluster is, it may have a measurable impact on its performance. Cheers!</p>\n"},{"tags":[],"owner":{"account_id":60456,"reputation":55961,"user_id":1054558,"accept_rate":100,"display_name":"Aaron"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675434410,"creation_date":1675434410,"answer_id":75337083,"question_id":75332102,"body_markdown":"Erick&#39;s answer is pretty solid, but I&#39;d just like to add that the time that you&#39;ll likely see performance issues is at read-time.  That&#39;s because doing a:\r\n\r\n    SELECT * FROM sample_table WHERE id=&#39;1&#39;;\r\n\r\n...will read ALL of the times that the `DELETE` was written (tombstones) from the SSTable file.  The default settings on a table result in deleted data staying around for 10 days (to ensure proper replication) before they can be picked-up by compaction.\r\n\r\nSo figure out how many times that `DELETE` happens per key over a 10 day period, and that&#39;s about how many Cassandra will have to reconcile at read-time.","title":"Does deleting the same data multiple times have a performance impact on a Cassandra cluster?","body":"<p>Erick's answer is pretty solid, but I'd just like to add that the time that you'll likely see performance issues is at read-time.  That's because doing a:</p>\n<pre><code>SELECT * FROM sample_table WHERE id='1';\n</code></pre>\n<p>...will read ALL of the times that the <code>DELETE</code> was written (tombstones) from the SSTable file.  The default settings on a table result in deleted data staying around for 10 days (to ensure proper replication) before they can be picked-up by compaction.</p>\n<p>So figure out how many times that <code>DELETE</code> happens per key over a 10 day period, and that's about how many Cassandra will have to reconcile at read-time.</p>\n"}],"owner":{"account_id":12541958,"reputation":139,"user_id":9126612,"display_name":"Karthik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1675444548,"accepted_answer_id":75332411,"answer_count":2,"score":1,"last_activity_date":1675434410,"creation_date":1675404730,"question_id":75332102,"body_markdown":"If I need to perform an automated housekeeping task, and this is my query:\r\n`delete from sample_table where id = &#39;1&#39;`\r\n\r\nAnd, this scheduled query gets executed from multiple service instances.\r\nWill this have a significant performance impact? What would be an appropriate way of testing this?","title":"Does deleting the same data multiple times have a performance impact on a Cassandra cluster?","body":"<p>If I need to perform an automated housekeeping task, and this is my query:\n<code>delete from sample_table where id = '1'</code></p>\n<p>And, this scheduled query gets executed from multiple service instances.\nWill this have a significant performance impact? What would be an appropriate way of testing this?</p>\n"},{"tags":["javascript","java","jquery","html"],"comments":[{"owner":{"account_id":7587119,"reputation":132,"user_id":5755819,"display_name":"Deepanshu"},"score":0,"creation_date":1456292793,"post_id":35594108,"comment_id":58874162,"body_markdown":"remove javascript before your method name and try","body":"remove javascript before your method name and try"},{"owner":{"account_id":6582886,"reputation":689,"user_id":5086633,"accept_rate":89,"display_name":"yeppe"},"score":0,"creation_date":1456292878,"post_id":35594108,"comment_id":58874201,"body_markdown":"Done that still the same issue :)","body":"Done that still the same issue :)"},{"owner":{"account_id":5665782,"reputation":437,"user_id":4481996,"display_name":"Rana Ahmer Yasin"},"score":0,"creation_date":1456292889,"post_id":35594108,"comment_id":58874205,"body_markdown":"https://jsfiddle.net/ydx6qza1/","body":"<a href=\"https://jsfiddle.net/ydx6qza1/\" rel=\"nofollow noreferrer\">jsfiddle.net/ydx6qza1</a>"},{"owner":{"account_id":5665782,"reputation":437,"user_id":4481996,"display_name":"Rana Ahmer Yasin"},"score":2,"creation_date":1456293191,"post_id":35594108,"comment_id":58874330,"body_markdown":"check link above which one i defined on fiddle","body":"check link above which one i defined on fiddle"},{"owner":{"account_id":6582886,"reputation":689,"user_id":5086633,"accept_rate":89,"display_name":"yeppe"},"score":0,"creation_date":1456298625,"post_id":35594108,"comment_id":58876724,"body_markdown":"thanks for the solution I tweak it a bit  :)  to achieve new window thing though target=&quot;_blank&quot;","body":"thanks for the solution I tweak it a bit  :)  to achieve new window thing though target=&quot;_blank&quot;"}],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1456300854,"creation_date":1456300471,"answer_id":35596275,"question_id":35594108,"body_markdown":"Put your `&lt;script&gt;` tag in the header tag. When anchor element is created the function `abc_openthislink()` was not available, so onclick  event handler doesn&#39;t have a reference to the function.\r\n\r\n[JSFiddle][1] \r\n\r\n\r\n  [1]: https://jsfiddle.net/avt3xpgt/1/","title":"javascript error ReferenceError: is not defined error | want to open a link in a new window using JS","body":"<p>Put your <code>&lt;script&gt;</code> tag in the header tag. When anchor element is created the function <code>abc_openthislink()</code> was not available, so onclick  event handler doesn't have a reference to the function.</p>\n\n<p><a href=\"https://jsfiddle.net/avt3xpgt/1/\" rel=\"nofollow\">JSFiddle</a> </p>\n"}],"owner":{"account_id":6582886,"reputation":689,"user_id":5086633,"accept_rate":89,"display_name":"yeppe"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2302,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":35596275,"answer_count":1,"score":1,"last_activity_date":1675434366,"creation_date":1456292297,"question_id":35594108,"body_markdown":"I am getting below error \r\n\r\n&gt;Reference Error: xxxxfunctionname is not defined\r\n\r\nwhen I call a function from `&lt;a&gt;` tag\r\n\r\nfor instance,\r\n\r\nhtml tag\r\n\r\n    &lt;a class=&quot;linkType2&quot; href=&quot;javascript:void(0);&quot; onclick=&quot;javascript:abc_openthislink(&#39;http url&#39;)&quot;&gt;abc&lt;/a&gt;\r\n\r\nJavaScript\r\n\r\n    &lt;script&gt;\r\n    function abc_openthislink(url)\r\n    \t{\r\n    \t\twindow.open(url);\t\r\n    \t}\r\n    &lt;/script&gt;\r\n\r\nIs there something very obvious that I am missing here. Please correct me if you can.\r\n\r\n","title":"javascript error ReferenceError: is not defined error | want to open a link in a new window using JS","body":"<p>I am getting below error</p>\n<blockquote>\n<p>Reference Error: xxxxfunctionname is not defined</p>\n</blockquote>\n<p>when I call a function from <code>&lt;a&gt;</code> tag</p>\n<p>for instance,</p>\n<p>html tag</p>\n<pre><code>&lt;a class=&quot;linkType2&quot; href=&quot;javascript:void(0);&quot; onclick=&quot;javascript:abc_openthislink('http url')&quot;&gt;abc&lt;/a&gt;\n</code></pre>\n<p>JavaScript</p>\n<pre><code>&lt;script&gt;\nfunction abc_openthislink(url)\n    {\n        window.open(url);   \n    }\n&lt;/script&gt;\n</code></pre>\n<p>Is there something very obvious that I am missing here. Please correct me if you can.</p>\n"},{"tags":["java","spring-boot","kubernetes","rabbitmq","amqp"],"answers":[{"tags":[],"owner":{"account_id":7242784,"reputation":27789,"user_id":5525824,"display_name":"Harsh Manvar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675434245,"creation_date":1675412526,"answer_id":75333134,"question_id":75332770,"body_markdown":"i think it won&#39;t be possible with Nginx ingress just like that, as it supports the **HTTP** **protocol**. \r\n\r\n[Nginx ingress controller doc][1]\r\n\r\nalthough **amqp** uses the **TCP** as **transport protocol** implementing  **tcp_passthrough** config on **Nginx ingress controller** might could be successful for you. \r\n\r\n**Update:** \r\n\r\n&gt; Ingress does not support TCP or UDP services. For this reason this\r\n&gt; Ingress controller uses the flags `--tcp-services-configmap`\r\n\r\nSo you can expose **one port** on the ingress controller and use it to access the **TCP** **service**.\r\n\r\nCreate configmap in **ingress-nginx** namespace\r\n\r\n    apiVersion: v1\r\n    kind: ConfigMap\r\n    metadata:\r\n      name: tcp-services\r\n      namespace: ingress-nginx\r\n    data:\r\n      5672: &quot;default/rabbitmq-service:5672&quot;\r\n\r\nupdate **nginx** deployment with **arg** as it is without changing anything\r\n\r\n    --tcp-services-configmap=$(POD_NAMESPACE)/tcp-services\r\n\r\nand last, add port config in the deployment of **nginx** ingress as shown in the doc. \r\n\r\nhttps://kubernetes.github.io/ingress-nginx/user-guide/exposing-tcp-udp-services/ \r\n\r\n\r\n  [1]: https://kubernetes.github.io/ingress-nginx/user-guide/exposing-tcp-udp-services/\r\n","title":"how to create a service(amqp) and ingress resource in k8s other than http or https?","body":"<p>i think it won't be possible with Nginx ingress just like that, as it supports the <strong>HTTP</strong> <strong>protocol</strong>.</p>\n<p><a href=\"https://kubernetes.github.io/ingress-nginx/user-guide/exposing-tcp-udp-services/\" rel=\"nofollow noreferrer\">Nginx ingress controller doc</a></p>\n<p>although <strong>amqp</strong> uses the <strong>TCP</strong> as <strong>transport protocol</strong> implementing  <strong>tcp_passthrough</strong> config on <strong>Nginx ingress controller</strong> might could be successful for you.</p>\n<p><strong>Update:</strong></p>\n<blockquote>\n<p>Ingress does not support TCP or UDP services. For this reason this\nIngress controller uses the flags <code>--tcp-services-configmap</code></p>\n</blockquote>\n<p>So you can expose <strong>one port</strong> on the ingress controller and use it to access the <strong>TCP</strong> <strong>service</strong>.</p>\n<p>Create configmap in <strong>ingress-nginx</strong> namespace</p>\n<pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: tcp-services\n  namespace: ingress-nginx\ndata:\n  5672: &quot;default/rabbitmq-service:5672&quot;\n</code></pre>\n<p>update <strong>nginx</strong> deployment with <strong>arg</strong> as it is without changing anything</p>\n<pre><code>--tcp-services-configmap=$(POD_NAMESPACE)/tcp-services\n</code></pre>\n<p>and last, add port config in the deployment of <strong>nginx</strong> ingress as shown in the doc.</p>\n<p><a href=\"https://kubernetes.github.io/ingress-nginx/user-guide/exposing-tcp-udp-services/\" rel=\"nofollow noreferrer\">https://kubernetes.github.io/ingress-nginx/user-guide/exposing-tcp-udp-services/</a></p>\n"}],"owner":{"account_id":15296740,"reputation":355,"user_id":11036562,"display_name":"James Taylor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":381,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1675434245,"creation_date":1675410066,"question_id":75332770,"body_markdown":"how to create a service(amqp) and ingress resource in k8s other than http or https?\r\n\r\nWe have a requirement  where our java-spring-bot app needs to send request through 443/80 port and we are requirement to receive that request on port 443/80 &amp; redirect it to our rabbitmq pods which runs on amqp protocol not on http/https.\r\n\r\nI don&#39;t know as of now it&#39;s possible or not, but we have created ingress resource with which to redirect request to our rabbitmq deployment/pods.\r\n\r\nHere&#39;s ingress resource definition.\r\n\r\n```\r\napiVersion: networking.k8s.io/v1\r\nkind: Ingress\r\nmetadata:\r\n  name: ing-rabbitmq-amqp\r\n  annotations:\r\n    kubernetes.io/ingress.class: nginx\r\nspec:\r\n  rules:\r\n    - http:\r\n       paths:\r\n        - path: /amqp\r\n          pathType: Prefix\r\n          backend:\r\n            service:\r\n              name: rabbitmq-amqp\r\n              port:\r\n                number: 5671\r\n\r\n```\r\nBut we are making our java app connect to rabbitmq through this configuration we are getting error messages.\r\n\r\nFrom our java-app\r\n\r\n```\r\n2023-02-03 07:13:51.031  INFO 1 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService &#39;taskScheduler&#39;\r\n2023-02-03 07:13:51.106  INFO 1 --- [           main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [10.25.119.247/amqp:80]\r\n2023-02-03 07:13:51.125  INFO 1 --- [           main] o.s.a.r.l.SimpleMessageListenerContainer : Broker not available; cannot force queue declarations during start: java.net.UnknownHostException: 10.25.119.247/amqp\r\n\r\n\r\n\r\nUsually our app throws this messages for successful connection with rabbitmq on port 5671\r\n\r\n2023-02-03 07:15:44.087  INFO 1 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService &#39;taskScheduler&#39;\r\n2023-02-03 07:15:44.150  INFO 1 --- [           main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [10.25.119.247:5671]\r\n2023-02-03 07:15:46.182  INFO 1 --- [           main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#2f01783a:0/SimpleConnection@5b202a3a [delegate=amqp://test_bot_user@10.25.119.247:5671/test, localPort= 58840]\r\n\r\n```\r\n\r\nWhile nginx-ingress-controller pod is throwing below error messages.\r\n\r\n```\r\n2023/02/03 07:20:08 [error] 4299#4299: *209766772 recv() failed (104: Connection reset by peer) while proxying and reading from upstream, client: 10.25.119.247, server: 0.0.0.0:5671, upstream: &quot;192.168.52.60:5671&quot;, bytes from/to client:5467/6570, bytes from/to upstream:6570/5467\r\n[5.161.119.202] [03/Feb/2023:07:20:08 +0000] TCP 200 6570 5467 263.959\r\n\r\n\r\nThis is our serverIP: 10.25.119.247\r\nThis is rabbitmq-pod IP which is coming in that log: 192.168.52.60\r\n\r\n```\r\n\r\nSo first of all is it possible to create k8s service and ingress resource on other protocols like amqp? \r\n\r\nSecondly if answer to first question is No, we can&#39;t create those resources in k8s on  protocols http/https and even if we can create but I cannot achieve this scenario then\r\nhow do I achieve my scenario where our client is behind a proxy(Cisco-WSA/12.5.2-007) wants our java-springboot app(which connects with rabbitmq on amqp protocol) to connect with our rabbitmq-pods through https ports only and is not willing to open rabbitmq tls port 5671 in his outbound request?\r\n\r\nIf any queries are there please me know?\r\n\r\n","title":"how to create a service(amqp) and ingress resource in k8s other than http or https?","body":"<p>how to create a service(amqp) and ingress resource in k8s other than http or https?</p>\n<p>We have a requirement  where our java-spring-bot app needs to send request through 443/80 port and we are requirement to receive that request on port 443/80 &amp; redirect it to our rabbitmq pods which runs on amqp protocol not on http/https.</p>\n<p>I don't know as of now it's possible or not, but we have created ingress resource with which to redirect request to our rabbitmq deployment/pods.</p>\n<p>Here's ingress resource definition.</p>\n<pre><code>apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: ing-rabbitmq-amqp\n  annotations:\n    kubernetes.io/ingress.class: nginx\nspec:\n  rules:\n    - http:\n       paths:\n        - path: /amqp\n          pathType: Prefix\n          backend:\n            service:\n              name: rabbitmq-amqp\n              port:\n                number: 5671\n\n</code></pre>\n<p>But we are making our java app connect to rabbitmq through this configuration we are getting error messages.</p>\n<p>From our java-app</p>\n<pre><code>2023-02-03 07:13:51.031  INFO 1 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'\n2023-02-03 07:13:51.106  INFO 1 --- [           main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [10.25.119.247/amqp:80]\n2023-02-03 07:13:51.125  INFO 1 --- [           main] o.s.a.r.l.SimpleMessageListenerContainer : Broker not available; cannot force queue declarations during start: java.net.UnknownHostException: 10.25.119.247/amqp\n\n\n\nUsually our app throws this messages for successful connection with rabbitmq on port 5671\n\n2023-02-03 07:15:44.087  INFO 1 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'\n2023-02-03 07:15:44.150  INFO 1 --- [           main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [10.25.119.247:5671]\n2023-02-03 07:15:46.182  INFO 1 --- [           main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#2f01783a:0/SimpleConnection@5b202a3a [delegate=amqp://test_bot_user@10.25.119.247:5671/test, localPort= 58840]\n\n</code></pre>\n<p>While nginx-ingress-controller pod is throwing below error messages.</p>\n<pre><code>2023/02/03 07:20:08 [error] 4299#4299: *209766772 recv() failed (104: Connection reset by peer) while proxying and reading from upstream, client: 10.25.119.247, server: 0.0.0.0:5671, upstream: &quot;192.168.52.60:5671&quot;, bytes from/to client:5467/6570, bytes from/to upstream:6570/5467\n[5.161.119.202] [03/Feb/2023:07:20:08 +0000] TCP 200 6570 5467 263.959\n\n\nThis is our serverIP: 10.25.119.247\nThis is rabbitmq-pod IP which is coming in that log: 192.168.52.60\n\n</code></pre>\n<p>So first of all is it possible to create k8s service and ingress resource on other protocols like amqp?</p>\n<p>Secondly if answer to first question is No, we can't create those resources in k8s on  protocols http/https and even if we can create but I cannot achieve this scenario then\nhow do I achieve my scenario where our client is behind a proxy(Cisco-WSA/12.5.2-007) wants our java-springboot app(which connects with rabbitmq on amqp protocol) to connect with our rabbitmq-pods through https ports only and is not willing to open rabbitmq tls port 5671 in his outbound request?</p>\n<p>If any queries are there please me know?</p>\n"},{"tags":["java","pdf","exception","itext7"],"comments":[{"owner":{"account_id":2703230,"reputation":12011,"user_id":2333458,"accept_rate":75,"display_name":"Alexey Subach"},"score":0,"creation_date":1508232098,"post_id":46772784,"comment_id":80519665,"body_markdown":"Please have a thorough look through your code and make sure you attached the correct version. Do you really use `path` and `loadPath` variables? The exception tells us that the path you provided doesn&#39;t seem to be a correct PDF file. Can you make a self-contained example of trying to load PDF file with a hard-coded path and attach the PDF?","body":"Please have a thorough look through your code and make sure you attached the correct version. Do you really use <code>path</code> and <code>loadPath</code> variables? The exception tells us that the path you provided doesn&#39;t seem to be a correct PDF file. Can you make a self-contained example of trying to load PDF file with a hard-coded path and attach the PDF?"},{"owner":{"account_id":11881449,"reputation":53,"user_id":8695068,"display_name":"thenoobdeveloper"},"score":0,"creation_date":1508236113,"post_id":46772784,"comment_id":80522070,"body_markdown":"path is a substring of loadPath so it&#39;s declared, I split `pdf = new PdfDocument(new PdfReader(loadPath), new PdfWriter(path));`                 in `pdf1 = new PdfDocument(new PdfReader(loadPath));\n          pdf = new PdfDocument(new PdfWriter(path));`                                 and now it works","body":"path is a substring of loadPath so it&#39;s declared, I split <code>pdf = new PdfDocument(new PdfReader(loadPath), new PdfWriter(path));</code>                 in <code>pdf1 = new PdfDocument(new PdfReader(loadPath));           pdf = new PdfDocument(new PdfWriter(path));</code>                                 and now it works"}],"answers":[{"tags":[],"owner":{"account_id":4458093,"reputation":8404,"user_id":3627736,"accept_rate":79,"display_name":"Yuliia Ashomok"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1597965269,"creation_date":1597965269,"answer_id":63514343,"question_id":46772784,"body_markdown":"I my case I forgot to close docs:\r\n\r\n    PdfDocument pdfDoc = new PdfDocument(new PdfWriter(DEST));\r\n    Document doc = new Document(pdfDoc);\r\n    //...\r\n    doc.close(); //HAVE YOU CLOSE?\r\n    pdfDoc.close(); //HAVE YOU CLOSE?","title":"PDF header not found exception","body":"<p>I my case I forgot to close docs:</p>\n<pre><code>PdfDocument pdfDoc = new PdfDocument(new PdfWriter(DEST));\nDocument doc = new Document(pdfDoc);\n//...\ndoc.close(); //HAVE YOU CLOSE?\npdfDoc.close(); //HAVE YOU CLOSE?\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18398102,"reputation":31,"user_id":13401949,"display_name":"ciaran swanepoel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675434040,"creation_date":1675434040,"answer_id":75337007,"question_id":46772784,"body_markdown":"A bit late here but I was facing the same issue. My issue was that the document was password protected when trying to edit with Adobe. I printed the document to PDF (using Chrome) and it worked after that. (Hopefully this helps)","title":"PDF header not found exception","body":"<p>A bit late here but I was facing the same issue. My issue was that the document was password protected when trying to edit with Adobe. I printed the document to PDF (using Chrome) and it worked after that. (Hopefully this helps)</p>\n"}],"owner":{"account_id":11881449,"reputation":53,"user_id":8695068,"display_name":"thenoobdeveloper"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11058,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1675434040,"creation_date":1508164337,"question_id":46772784,"body_markdown":"i&#39;m working with itext 7 and java and my problem is that exception when i try to open an existing pdf file. This is my code\r\n\r\n    \r\n        JFileChooser load = new JFileChooser();\r\n        load.setFileFilter(new PdfFilter());\r\n        load.showOpenDialog(this);\r\n        String loadPath = load.getSelectedFile().getAbsolutePath();\r\n    //some stuff here....\r\n\r\n\r\n        path = path.concat(&quot;.pdf&quot;);//path is declared above\r\n        \r\n\r\n        try {\r\n            pdf = new PdfDocument(new PdfReader(loadPath), new PdfWriter(path));\r\n        } catch (IOException ex) {\r\n            Logger.getLogger(ParagrafoFrame.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n\r\n        doc = new Document(pdf);\r\n        doc.add(new Paragraph(&quot;test&quot;));\r\n        doc.close();\r\n\r\nwhy doesn&#39;t it work?\r\n\r\nhere the stack trace\r\n\r\n&gt; Exception in thread &quot;AWT-EventQueue-0&quot; com.itextpdf.io.IOException: PDF header not found.\r\n\tat com.itextpdf.io.source.PdfTokenizer.getHeaderOffset(PdfTokenizer.java:223)\r\n\tat com.itextpdf.kernel.pdf.PdfReader.getOffsetTokeniser(PdfReader.java:1075)\r\n\tat com.itextpdf.kernel.pdf.PdfReader.&lt;init&gt;(PdfReader.java:120)\r\n\tat com.itextpdf.kernel.pdf.PdfReader.&lt;init&gt;(PdfReader.java:154)\r\n\tat com.itextpdf.kernel.pdf.PdfReader.&lt;init&gt;(PdfReader.java:170)\r\n\tat com.antonionappi.editorpdf.ParagrafoFrame.continuaButtonActionPerformed(ParagrafoFrame.java:1339)\r\n\tat com.antonionappi.editorpdf.ParagrafoFrame.access$2400(ParagrafoFrame.java:46)\r\n\tat com.antonionappi.editorpdf.ParagrafoFrame$25.actionPerformed(ParagrafoFrame.java:404)\r\n\tat javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)\r\n\tat javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)\r\n\tat javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)\r\n\tat javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)\r\n\tat javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)\r\n\tat java.awt.Component.processMouseEvent(Component.java:6533)\r\n\tat javax.swing.JComponent.processMouseEvent(JComponent.java:3324)\r\n\tat java.awt.Component.processEvent(Component.java:6298)\r\n\tat java.awt.Container.processEvent(Container.java:2236)\r\n\tat java.awt.Component.dispatchEventImpl(Component.java:4889)\r\n\tat java.awt.Container.dispatchEventImpl(Container.java:2294)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4711)\r\n\tat java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4888)\r\n\tat java.awt.LightweightDispatcher.processMouseEvent(Container.java:4525)\r\n\tat java.awt.LightweightDispatcher.dispatchEvent(Container.java:4466)\r\n\tat java.awt.Container.dispatchEventImpl(Container.java:2280)\r\n\tat java.awt.Window.dispatchEventImpl(Window.java:2746)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4711)\r\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\r\n\tat java.awt.EventQueue.access$500(EventQueue.java:97)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:709)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:703)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)\r\n\tat java.awt.EventQueue$4.run(EventQueue.java:731)\r\n\tat java.awt.EventQueue$4.run(EventQueue.java:729)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\r\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\r\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\r\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\r\n\tat java.awt.EventDispatchThread.run(EventDispatchThread.java:82)","title":"PDF header not found exception","body":"<p>i'm working with itext 7 and java and my problem is that exception when i try to open an existing pdf file. This is my code</p>\n\n<pre><code>    JFileChooser load = new JFileChooser();\n    load.setFileFilter(new PdfFilter());\n    load.showOpenDialog(this);\n    String loadPath = load.getSelectedFile().getAbsolutePath();\n//some stuff here....\n\n\n    path = path.concat(\".pdf\");//path is declared above\n\n\n    try {\n        pdf = new PdfDocument(new PdfReader(loadPath), new PdfWriter(path));\n    } catch (IOException ex) {\n        Logger.getLogger(ParagrafoFrame.class.getName()).log(Level.SEVERE, null, ex);\n    }\n\n    doc = new Document(pdf);\n    doc.add(new Paragraph(\"test\"));\n    doc.close();\n</code></pre>\n\n<p>why doesn't it work?</p>\n\n<p>here the stack trace</p>\n\n<blockquote>\n  <p>Exception in thread \"AWT-EventQueue-0\" com.itextpdf.io.IOException: PDF header not found.\n      at com.itextpdf.io.source.PdfTokenizer.getHeaderOffset(PdfTokenizer.java:223)\n      at com.itextpdf.kernel.pdf.PdfReader.getOffsetTokeniser(PdfReader.java:1075)\n      at com.itextpdf.kernel.pdf.PdfReader.(PdfReader.java:120)\n      at com.itextpdf.kernel.pdf.PdfReader.(PdfReader.java:154)\n      at com.itextpdf.kernel.pdf.PdfReader.(PdfReader.java:170)\n      at com.antonionappi.editorpdf.ParagrafoFrame.continuaButtonActionPerformed(ParagrafoFrame.java:1339)\n      at com.antonionappi.editorpdf.ParagrafoFrame.access$2400(ParagrafoFrame.java:46)\n      at com.antonionappi.editorpdf.ParagrafoFrame$25.actionPerformed(ParagrafoFrame.java:404)\n      at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)\n      at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)\n      at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)\n      at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)\n      at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)\n      at java.awt.Component.processMouseEvent(Component.java:6533)\n      at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)\n      at java.awt.Component.processEvent(Component.java:6298)\n      at java.awt.Container.processEvent(Container.java:2236)\n      at java.awt.Component.dispatchEventImpl(Component.java:4889)\n      at java.awt.Container.dispatchEventImpl(Container.java:2294)\n      at java.awt.Component.dispatchEvent(Component.java:4711)\n      at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4888)\n      at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4525)\n      at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4466)\n      at java.awt.Container.dispatchEventImpl(Container.java:2280)\n      at java.awt.Window.dispatchEventImpl(Window.java:2746)\n      at java.awt.Component.dispatchEvent(Component.java:4711)\n      at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\n      at java.awt.EventQueue.access$500(EventQueue.java:97)\n      at java.awt.EventQueue$3.run(EventQueue.java:709)\n      at java.awt.EventQueue$3.run(EventQueue.java:703)\n      at java.security.AccessController.doPrivileged(Native Method)\n      at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n      at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)\n      at java.awt.EventQueue$4.run(EventQueue.java:731)\n      at java.awt.EventQueue$4.run(EventQueue.java:729)\n      at java.security.AccessController.doPrivileged(Native Method)\n      at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n      at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\n      at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\n      at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\n      at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\n      at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n      at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\n      at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)</p>\n</blockquote>\n"},{"tags":["java","oauth-2.0","outlook","imap"],"answers":[{"tags":[],"owner":{"account_id":372555,"reputation":4556,"user_id":721666,"accept_rate":48,"display_name":"Ralph"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1669202853,"creation_date":1666624119,"answer_id":74183227,"question_id":74157939,"body_markdown":"The code example is correct. The problem was the missing rights on the provided `servicePrincipal`. \r\nFor creating the servicePrincipal in office365 a `objectId` needs to be used. These tasks can be performed only by administrators using PowerShell scripts. These all has nothing to do with Java. The Java API is straight forward.","title":"How to access outlook.office365.com IMAP form Java with OAUTH2?","body":"<p>The code example is correct. The problem was the missing rights on the provided <code>servicePrincipal</code>.\nFor creating the servicePrincipal in office365 a <code>objectId</code> needs to be used. These tasks can be performed only by administrators using PowerShell scripts. These all has nothing to do with Java. The Java API is straight forward.</p>\n"},{"tags":[],"owner":{"account_id":2106056,"reputation":890,"user_id":1872360,"accept_rate":88,"display_name":"runholen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675433251,"creation_date":1675433251,"answer_id":75336841,"question_id":74157939,"body_markdown":"For everyone getting the dreaded &quot;A1 no authenticate failed&quot;, even though you have tried everything in this thread, and the linked threads:\r\nOur existing javamail code, that worked flawlessly with basic auth before microsoft removed it, always got the &quot;A1 No authenticate failed&quot; error, even though we tried everything else from here and the linked threads.\r\nWhat finally made it work was the following change:\r\n````\r\nimapStore = sess.getStore(&quot;imaps&quot;);\r\n````\r\nto\r\n````\r\nimapStore = sess.getStore(&quot;imap&quot;);\r\n````\r\nSo if you were used to connecting to &quot;imaps&quot; with basic auth, give &quot;imap&quot; a try before pulling out the rest of your hair.. ;-)","title":"How to access outlook.office365.com IMAP form Java with OAUTH2?","body":"<p>For everyone getting the dreaded &quot;A1 no authenticate failed&quot;, even though you have tried everything in this thread, and the linked threads:\nOur existing javamail code, that worked flawlessly with basic auth before microsoft removed it, always got the &quot;A1 No authenticate failed&quot; error, even though we tried everything else from here and the linked threads.\nWhat finally made it work was the following change:</p>\n<pre><code>imapStore = sess.getStore(&quot;imaps&quot;);\n</code></pre>\n<p>to</p>\n<pre><code>imapStore = sess.getStore(&quot;imap&quot;);\n</code></pre>\n<p>So if you were used to connecting to &quot;imaps&quot; with basic auth, give &quot;imap&quot; a try before pulling out the rest of your hair.. ;-)</p>\n"}],"owner":{"account_id":372555,"reputation":4556,"user_id":721666,"accept_rate":48,"display_name":"Ralph"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6336,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1675433251,"creation_date":1666377536,"question_id":74157939,"body_markdown":"Since Microsoft has announced that access to Outlook IMAP mailboxes with Basic authentication will soon no longer be possible, I&#39;m trying to figure out how to properly open an IMAP mailbox with OAUTH2 in Java. But I always get the error code &quot;A1 NO AUTHENTICATE failed.&quot;\r\n\r\nWhat I am doing is the following: \r\n\r\nI have a method to generate a OAUTH2 Access token:\r\n\r\n```java\r\npublic String getAuthToken(String tanantId,String clientId,String client_secret) throws ClientProtocolException, IOException {\r\n\tCloseableHttpClient client = HttpClients.createDefault();\r\n\tHttpPost loginPost = new HttpPost(&quot;https://login.microsoftonline.com/&quot; + tanantId + &quot;/oauth2/v2.0/token&quot;);\r\n\tString scopes = &quot;https://outlook.office365.com/.default&quot;;\r\n\tString encodedBody = &quot;client_id=&quot; + clientId + &quot;&amp;scope=&quot; + scopes + &quot;&amp;client_secret=&quot; + client_secret\r\n\t\t\t+ &quot;&amp;grant_type=client_credentials&quot;;\r\n\tloginPost.setEntity(new StringEntity(encodedBody, ContentType.APPLICATION_FORM_URLENCODED));\r\n\tloginPost.addHeader(new BasicHeader(&quot;cache-control&quot;, &quot;no-cache&quot;));\r\n\tCloseableHttpResponse loginResponse = client.execute(loginPost);\r\n\tInputStream inputStream = loginResponse.getEntity().getContent();\r\n\tbyte[] response = readAllBytes(inputStream);\r\n\tObjectMapper objectMapper = new ObjectMapper();\r\n\tJavaType type = objectMapper.constructType(\r\n\t\t\tobjectMapper.getTypeFactory().constructParametricType(Map.class, String.class, String.class));\r\n\tMap&lt;String, String&gt; parsed = new ObjectMapper().readValue(response, type);\r\n\treturn parsed.get(&quot;access_token&quot;);\r\n}\r\n```\r\n\r\nThe generated token seems to be valid as [jwt.ms](https://jwt.ms) allows me to decode the token.\r\n\r\nI try to access the mailbox via XOAUTH2 using the access token like this:\r\n\r\n```java\r\n\t\tProperties props = new Properties();\r\n\r\n\t\tprops.put(&quot;mail.store.protocol&quot;, &quot;imap&quot;);\r\n\t\tprops.put(&quot;mail.imap.host&quot;, &quot;outlook.office365.com&quot;);\r\n\t\tprops.put(&quot;mail.imap.port&quot;, &quot;993&quot;);\r\n\t\tprops.put(&quot;mail.imap.ssl.enable&quot;, &quot;true&quot;);\r\n\t\tprops.put(&quot;mail.imap.starttls.enable&quot;, &quot;true&quot;);\r\n\t\tprops.put(&quot;mail.imap.auth&quot;, &quot;true&quot;);\r\n\t\tprops.put(&quot;mail.imap.auth.mechanisms&quot;, &quot;XOAUTH2&quot;);\r\n\t\tprops.put(&quot;mail.imap.user&quot;, mailAddress);\r\n\t\tprops.put(&quot;mail.debug&quot;, &quot;true&quot;);\r\n\t\tprops.put(&quot;mail.debug.auth&quot;, &quot;true&quot;);\r\n\t\r\n\t\t// open mailbox....\r\n\t\tString token = getAuthToken(tanantId,clientId,client_secret);\r\n\t\tSession session = Session.getInstance(props);\r\n\t\tsession.setDebug(true);\r\n\t\tStore store = session.getStore(&quot;imap&quot;);\r\n\t\tstore.connect(&quot;outlook.office365.com&quot;, mailAddress, token);\r\n```\r\n\r\n\r\nBut the result is always a `AuthenticationFailedException`: \r\n\r\n    * OK The Microsoft Exchange IMAP4 service is ready. [...............AA==]\r\n    A0 CAPABILITY\r\n    * CAPABILITY IMAP4 IMAP4rev1 AUTH=PLAIN AUTH=XOAUTH2 SASL-IR UIDPLUS MOVE ID UNSELECT CHILDREN IDLE NAMESPACE LITERAL+\r\n    A0 OK CAPABILITY completed.\r\n    DEBUG IMAP: AUTH: PLAIN\r\n    DEBUG IMAP: AUTH: XOAUTH2\r\n    DEBUG IMAP: protocolConnect login, host=outlook.office365.com, user=xxx@yyy.com, password=&lt;non-null&gt;\r\n    A1 AUTHENTICATE XOAUTH2 ....E=\r\n    A1 NO AUTHENTICATE failed.\r\n    javax.mail.AuthenticationFailedException: AUTHENTICATE failed.\r\n\r\n\r\nFrom [this similar question](https://stackoverflow.com/questions/73463357/cannot-authenticate-to-imap-on-office365-using-javamail) I now suspect that my Access token actually has too few rights to access the mailbox. \r\n\r\n\r\nHow can I clarify this? For example when I decode the token I can see that it includes no `scp` or `roles` attribute. \r\nDoes this indicate that the token is wrong?","title":"How to access outlook.office365.com IMAP form Java with OAUTH2?","body":"<p>Since Microsoft has announced that access to Outlook IMAP mailboxes with Basic authentication will soon no longer be possible, I'm trying to figure out how to properly open an IMAP mailbox with OAUTH2 in Java. But I always get the error code &quot;A1 NO AUTHENTICATE failed.&quot;</p>\n<p>What I am doing is the following:</p>\n<p>I have a method to generate a OAUTH2 Access token:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String getAuthToken(String tanantId,String clientId,String client_secret) throws ClientProtocolException, IOException {\n    CloseableHttpClient client = HttpClients.createDefault();\n    HttpPost loginPost = new HttpPost(&quot;https://login.microsoftonline.com/&quot; + tanantId + &quot;/oauth2/v2.0/token&quot;);\n    String scopes = &quot;https://outlook.office365.com/.default&quot;;\n    String encodedBody = &quot;client_id=&quot; + clientId + &quot;&amp;scope=&quot; + scopes + &quot;&amp;client_secret=&quot; + client_secret\n            + &quot;&amp;grant_type=client_credentials&quot;;\n    loginPost.setEntity(new StringEntity(encodedBody, ContentType.APPLICATION_FORM_URLENCODED));\n    loginPost.addHeader(new BasicHeader(&quot;cache-control&quot;, &quot;no-cache&quot;));\n    CloseableHttpResponse loginResponse = client.execute(loginPost);\n    InputStream inputStream = loginResponse.getEntity().getContent();\n    byte[] response = readAllBytes(inputStream);\n    ObjectMapper objectMapper = new ObjectMapper();\n    JavaType type = objectMapper.constructType(\n            objectMapper.getTypeFactory().constructParametricType(Map.class, String.class, String.class));\n    Map&lt;String, String&gt; parsed = new ObjectMapper().readValue(response, type);\n    return parsed.get(&quot;access_token&quot;);\n}\n</code></pre>\n<p>The generated token seems to be valid as <a href=\"https://jwt.ms\" rel=\"nofollow noreferrer\">jwt.ms</a> allows me to decode the token.</p>\n<p>I try to access the mailbox via XOAUTH2 using the access token like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        Properties props = new Properties();\n\n        props.put(&quot;mail.store.protocol&quot;, &quot;imap&quot;);\n        props.put(&quot;mail.imap.host&quot;, &quot;outlook.office365.com&quot;);\n        props.put(&quot;mail.imap.port&quot;, &quot;993&quot;);\n        props.put(&quot;mail.imap.ssl.enable&quot;, &quot;true&quot;);\n        props.put(&quot;mail.imap.starttls.enable&quot;, &quot;true&quot;);\n        props.put(&quot;mail.imap.auth&quot;, &quot;true&quot;);\n        props.put(&quot;mail.imap.auth.mechanisms&quot;, &quot;XOAUTH2&quot;);\n        props.put(&quot;mail.imap.user&quot;, mailAddress);\n        props.put(&quot;mail.debug&quot;, &quot;true&quot;);\n        props.put(&quot;mail.debug.auth&quot;, &quot;true&quot;);\n    \n        // open mailbox....\n        String token = getAuthToken(tanantId,clientId,client_secret);\n        Session session = Session.getInstance(props);\n        session.setDebug(true);\n        Store store = session.getStore(&quot;imap&quot;);\n        store.connect(&quot;outlook.office365.com&quot;, mailAddress, token);\n</code></pre>\n<p>But the result is always a <code>AuthenticationFailedException</code>:</p>\n<pre><code>* OK The Microsoft Exchange IMAP4 service is ready. [...............AA==]\nA0 CAPABILITY\n* CAPABILITY IMAP4 IMAP4rev1 AUTH=PLAIN AUTH=XOAUTH2 SASL-IR UIDPLUS MOVE ID UNSELECT CHILDREN IDLE NAMESPACE LITERAL+\nA0 OK CAPABILITY completed.\nDEBUG IMAP: AUTH: PLAIN\nDEBUG IMAP: AUTH: XOAUTH2\nDEBUG IMAP: protocolConnect login, host=outlook.office365.com, user=xxx@yyy.com, password=&lt;non-null&gt;\nA1 AUTHENTICATE XOAUTH2 ....E=\nA1 NO AUTHENTICATE failed.\njavax.mail.AuthenticationFailedException: AUTHENTICATE failed.\n</code></pre>\n<p>From <a href=\"https://stackoverflow.com/questions/73463357/cannot-authenticate-to-imap-on-office365-using-javamail\">this similar question</a> I now suspect that my Access token actually has too few rights to access the mailbox.</p>\n<p>How can I clarify this? For example when I decode the token I can see that it includes no <code>scp</code> or <code>roles</code> attribute.\nDoes this indicate that the token is wrong?</p>\n"},{"tags":["java","spring-boot","foreign-keys"],"comments":[{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1675431843,"post_id":75335530,"comment_id":132933089,"body_markdown":"Your code already contains the logic to obtain the `CustomUserDetails`. Can&#39;t you use that to find the `User` entity from the `UserRepository` and call `reservation.setUser(...)` or is your question about how you can remove that from your code and have it completely automatic?","body":"Your code already contains the logic to obtain the <code>CustomUserDetails</code>. Can&#39;t you use that to find the <code>User</code> entity from the <code>UserRepository</code> and call <code>reservation.setUser(...)</code> or is your question about how you can remove that from your code and have it completely automatic?"},{"owner":{"account_id":27694021,"reputation":1,"user_id":21140123,"display_name":"meimei"},"score":0,"creation_date":1675477023,"post_id":75335530,"comment_id":132943700,"body_markdown":"Thank you for your comment. I already tried that &#39;reservation.setUser()&#39; but I don&#39;t know what to put in the bracket. I think I am missing something in the CustomUserDetails. Could you please teach me how to complete the &#39;reservation.setUser()&#39; syntax.","body":"Thank you for your comment. I already tried that &#39;reservation.setUser()&#39; but I don&#39;t know what to put in the bracket. I think I am missing something in the CustomUserDetails. Could you please teach me how to complete the &#39;reservation.setUser()&#39; syntax."}],"answers":[{"tags":[],"owner":{"account_id":27692653,"reputation":1,"user_id":21139032,"display_name":"Abhishek Patil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675430276,"creation_date":1675430276,"answer_id":75336278,"question_id":75335530,"body_markdown":"DB mapping is correct.\r\nIn reservation table you have user_id column but in java persistance you have entire User object(which internally maps id of user to user_id of reservation)   \r\nYour code snippet does not shows how logged user data is managed, I will suggest after login pass User object to GET /make_reservation request \r\n\r\n     model.addAttribute(&quot;user&quot;, LOGGED_IN_USER);\r\nand before saving reservation object set user to it.\r\n\r\nIf passing entire user object is not possible pass id of user to model\r\non reservation post method get user by  findById and then set it to reservation object and save reservation entity.","title":"Get logged in user ID filled as a foreign key when user makes a reservation","body":"<p>DB mapping is correct.\nIn reservation table you have user_id column but in java persistance you have entire User object(which internally maps id of user to user_id of reservation)<br />\nYour code snippet does not shows how logged user data is managed, I will suggest after login pass User object to GET /make_reservation request</p>\n<pre><code> model.addAttribute(&quot;user&quot;, LOGGED_IN_USER);\n</code></pre>\n<p>and before saving reservation object set user to it.</p>\n<p>If passing entire user object is not possible pass id of user to model\non reservation post method get user by  findById and then set it to reservation object and save reservation entity.</p>\n"},{"tags":[],"owner":{"account_id":21382922,"reputation":89,"user_id":15748526,"display_name":"coman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675433134,"creation_date":1675432070,"answer_id":75336602,"question_id":75335530,"body_markdown":"You need to set the user in the reservation object before saving it in reservationRepository.\r\n\r\nSomething like this:\r\n\r\n \r\n        Optional&lt;User&gt; optionalUser = userRepository.findById(userId);\r\n        Optional&lt;Reservation&gt; optionalReservation =reservationRepository.findById(reservationId);\r\n        if (!optionalReservation.isEmpty() || !optionalUser.isEmpty()) {\r\n             User user = optionalUser.get();\r\n             Reservation reservation = optionalReservation.get();\r\n             reservation.setUser(user); //You are missing this in your code\r\n             reservationRepository.save(reservation);\r\n\r\n\r\nThis method should be in the reservationService and should be called by the reservationController.\r\nYou should have always separate layer in your application, so you shouldn&#39;t call the repository directly in the controller. \r\nThe right path of calls:\r\nController -&gt; Service -&gt; Repository\r\n       ","title":"Get logged in user ID filled as a foreign key when user makes a reservation","body":"<p>You need to set the user in the reservation object before saving it in reservationRepository.</p>\n<p>Something like this:</p>\n<pre><code>    Optional&lt;User&gt; optionalUser = userRepository.findById(userId);\n    Optional&lt;Reservation&gt; optionalReservation =reservationRepository.findById(reservationId);\n    if (!optionalReservation.isEmpty() || !optionalUser.isEmpty()) {\n         User user = optionalUser.get();\n         Reservation reservation = optionalReservation.get();\n         reservation.setUser(user); //You are missing this in your code\n         reservationRepository.save(reservation);\n</code></pre>\n<p>This method should be in the reservationService and should be called by the reservationController.\nYou should have always separate layer in your application, so you shouldn't call the repository directly in the controller.\nThe right path of calls:\nController -&gt; Service -&gt; Repository</p>\n"}],"owner":{"account_id":27694021,"reputation":1,"user_id":21140123,"display_name":"meimei"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1675433134,"creation_date":1675426126,"question_id":75335530,"body_markdown":"I am very new to Java and Spring Boot. I am trying to complete this web application assignment about a ticket reservation system. \r\n\r\nI have linked the Reservation and User Database Table by @ManyToOne \r\n\r\nReservation\r\n```\r\npackage com.codejava.reservation;\r\n\r\nimport com.codejava.user.User;\r\nimport jakarta.persistence.*;\r\n\r\n@Entity\r\n@Table(name=&quot;reservation&quot;)\r\npublic class Reservation {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n\r\n    @Column (nullable = false)\r\n    private String ticket_firstname;\r\n\r\n    @Column (nullable = false)\r\n    private String ticket_lastname;\r\n\r\n    @Column (nullable = false)\r\n    private String from_station;\r\n\r\n    @Column (nullable = false)\r\n    private String to_station;\r\n\r\n    @ManyToOne(cascade = CascadeType.ALL)\r\n    @JoinColumn(name =&quot;user_id&quot;, referencedColumnName = &quot;id&quot;, insertable = true, updatable = false)\r\n    private User user;\r\n\r\n    public User getUser() {\r\n        return user;\r\n    }\r\n\r\n    public void setUser(User user) {\r\n        this.user = user;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int ticket_id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getTicket_firstname() {\r\n        return ticket_firstname;\r\n    }\r\n\r\n    public void setTicket_firstname(String ticket_firstname) {\r\n        this.ticket_firstname = ticket_firstname;\r\n    }\r\n\r\n    public String getTicket_lastname() {\r\n        return ticket_lastname;\r\n    }\r\n\r\n    public void setTicket_lastname(String ticket_lastname) {\r\n        this.ticket_lastname = ticket_lastname;\r\n    }\r\n\r\n    public String getFrom_station() {\r\n        return from_station;\r\n    }\r\n\r\n    public void setFrom_station(String from_station) {\r\n        this.from_station = from_station;\r\n    }\r\n\r\n    public String getTo_station() {\r\n        return to_station;\r\n    }\r\n\r\n    public void setTo_station(String to_station) {\r\n        this.to_station = to_station;\r\n    }\r\n}\r\n```\r\n\r\nUser\r\n\r\n```\r\npackage com.codejava.user;\r\n\r\nimport com.codejava.reservation.Reservation;\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\nimport jakarta.persistence.*;\r\n\r\nimport java.util.HashSet;\r\nimport java.util.List;\r\nimport java.util.Set;\r\n\r\n@Entity\r\n@Table(name = &quot;user&quot;)\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(nullable = false)\r\n    private String password;\r\n\r\n    @Column(nullable = false, unique = true)\r\n    private String email;\r\n\r\n    @Column(nullable = false, length=45)\r\n    private String firstName;\r\n\r\n    @Column(nullable = false, length=45)\r\n    private String lastName;\r\n\r\n    @OneToMany(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL)\r\n    private Set&lt;Reservation&gt; reservationList= new HashSet&lt;&gt;();\r\n\r\n    public Set&lt;Reservation&gt; getReservationList() {\r\n        return reservationList;\r\n    }\r\n\r\n    public void setReservationList(Set&lt;Reservation&gt; reservationList) {\r\n        this.reservationList = reservationList;\r\n    }\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public String getFirstName() {\r\n        return firstName;\r\n    }\r\n\r\n    public void setFirstName(String firstName) {\r\n        this.firstName = firstName;\r\n    }\r\n\r\n    public String getLastName() {\r\n        return lastName;\r\n    }\r\n\r\n    public void setLastName(String lastName) {\r\n        this.lastName = lastName;\r\n    }\r\n}\r\n```\r\n\r\nI want the user_id field in the Reservation table automatically filled with the current logged-in User-ID when the user make a new reservation.\r\n\r\n[The user_id field is not filled when the logged-in user makes a new reservation][1]\r\n\r\nReservationController\r\n\r\n```\r\npackage com.codejava.reservation;\r\n\r\nimport com.codejava.user.CustomUserDetails;\r\nimport com.codejava.user.User;\r\nimport com.codejava.user.UserRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\n@Service\r\n@Controller\r\npublic class ReservationController {\r\n\r\n    @Autowired\r\n    private ReservationService reservationService;\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @Autowired\r\n    private ReservationRepository reservationRepository;\r\n\r\n    public ReservationController() {\r\n    }\r\n\r\n    @GetMapping (&quot;/make_reservation&quot;)\r\n    public String makeReservation(Model model){\r\n        model.addAttribute(&quot;user&quot;, new User());\r\n        model.addAttribute(&quot;reservation&quot;, new Reservation());\r\n        return &quot;make_reservation&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/make_reservation&quot;)\r\n    public String saveReservation(Reservation reservation) {\r\n        Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\r\n        CustomUserDetails user = (CustomUserDetails)principal;\r\n\r\n        reservationRepository.save(reservation);\r\n\r\n        return &quot;index&quot;;\r\n    }\r\n```\r\n\r\nReservationService\r\n\r\n```\r\npackage com.codejava.reservation;\r\n\r\nimport com.codejava.user.User;\r\nimport jakarta.transaction.Transactional;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\n@Transactional\r\npublic class ReservationService {\r\n\r\n    private User user;\r\n\r\n    public User getUser() {\r\n        return user;\r\n    }\r\n\r\n    public void setUser(User user) {\r\n        this.user = user;\r\n    }\r\n\r\n    @Autowired\r\n    private ReservationRepository reservationRepo;\r\n}\r\n```\r\n\r\nI am very new and the requirement for the project is kinda ridiculously hard for beginners. I have been researching very hard but I still cannot figure it out. I really appreciate it if you can help me and give me some clear instructions.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LLiyi.png","title":"Get logged in user ID filled as a foreign key when user makes a reservation","body":"<p>I am very new to Java and Spring Boot. I am trying to complete this web application assignment about a ticket reservation system.</p>\n<p>I have linked the Reservation and User Database Table by @ManyToOne</p>\n<p>Reservation</p>\n<pre><code>package com.codejava.reservation;\n\nimport com.codejava.user.User;\nimport jakarta.persistence.*;\n\n@Entity\n@Table(name=&quot;reservation&quot;)\npublic class Reservation {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n\n    @Column (nullable = false)\n    private String ticket_firstname;\n\n    @Column (nullable = false)\n    private String ticket_lastname;\n\n    @Column (nullable = false)\n    private String from_station;\n\n    @Column (nullable = false)\n    private String to_station;\n\n    @ManyToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name =&quot;user_id&quot;, referencedColumnName = &quot;id&quot;, insertable = true, updatable = false)\n    private User user;\n\n    public User getUser() {\n        return user;\n    }\n\n    public void setUser(User user) {\n        this.user = user;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int ticket_id) {\n        this.id = id;\n    }\n\n    public String getTicket_firstname() {\n        return ticket_firstname;\n    }\n\n    public void setTicket_firstname(String ticket_firstname) {\n        this.ticket_firstname = ticket_firstname;\n    }\n\n    public String getTicket_lastname() {\n        return ticket_lastname;\n    }\n\n    public void setTicket_lastname(String ticket_lastname) {\n        this.ticket_lastname = ticket_lastname;\n    }\n\n    public String getFrom_station() {\n        return from_station;\n    }\n\n    public void setFrom_station(String from_station) {\n        this.from_station = from_station;\n    }\n\n    public String getTo_station() {\n        return to_station;\n    }\n\n    public void setTo_station(String to_station) {\n        this.to_station = to_station;\n    }\n}\n</code></pre>\n<p>User</p>\n<pre><code>package com.codejava.user;\n\nimport com.codejava.reservation.Reservation;\nimport com.fasterxml.jackson.annotation.JsonIgnore;\nimport jakarta.persistence.*;\n\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\n\n@Entity\n@Table(name = &quot;user&quot;)\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false)\n    private String password;\n\n    @Column(nullable = false, unique = true)\n    private String email;\n\n    @Column(nullable = false, length=45)\n    private String firstName;\n\n    @Column(nullable = false, length=45)\n    private String lastName;\n\n    @OneToMany(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL)\n    private Set&lt;Reservation&gt; reservationList= new HashSet&lt;&gt;();\n\n    public Set&lt;Reservation&gt; getReservationList() {\n        return reservationList;\n    }\n\n    public void setReservationList(Set&lt;Reservation&gt; reservationList) {\n        this.reservationList = reservationList;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n}\n</code></pre>\n<p>I want the user_id field in the Reservation table automatically filled with the current logged-in User-ID when the user make a new reservation.</p>\n<p><a href=\"https://i.stack.imgur.com/LLiyi.png\" rel=\"nofollow noreferrer\">The user_id field is not filled when the logged-in user makes a new reservation</a></p>\n<p>ReservationController</p>\n<pre><code>package com.codejava.reservation;\n\nimport com.codejava.user.CustomUserDetails;\nimport com.codejava.user.User;\nimport com.codejava.user.UserRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.stereotype.Service;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.*;\n\n@Service\n@Controller\npublic class ReservationController {\n\n    @Autowired\n    private ReservationService reservationService;\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @Autowired\n    private ReservationRepository reservationRepository;\n\n    public ReservationController() {\n    }\n\n    @GetMapping (&quot;/make_reservation&quot;)\n    public String makeReservation(Model model){\n        model.addAttribute(&quot;user&quot;, new User());\n        model.addAttribute(&quot;reservation&quot;, new Reservation());\n        return &quot;make_reservation&quot;;\n    }\n\n    @PostMapping(&quot;/make_reservation&quot;)\n    public String saveReservation(Reservation reservation) {\n        Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n        CustomUserDetails user = (CustomUserDetails)principal;\n\n        reservationRepository.save(reservation);\n\n        return &quot;index&quot;;\n    }\n</code></pre>\n<p>ReservationService</p>\n<pre><code>package com.codejava.reservation;\n\nimport com.codejava.user.User;\nimport jakarta.transaction.Transactional;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n@Service\n@Transactional\npublic class ReservationService {\n\n    private User user;\n\n    public User getUser() {\n        return user;\n    }\n\n    public void setUser(User user) {\n        this.user = user;\n    }\n\n    @Autowired\n    private ReservationRepository reservationRepo;\n}\n</code></pre>\n<p>I am very new and the requirement for the project is kinda ridiculously hard for beginners. I have been researching very hard but I still cannot figure it out. I really appreciate it if you can help me and give me some clear instructions.</p>\n"},{"tags":["java","unit-testing","testing","junit5","idempotent"],"comments":[{"owner":{"account_id":97511,"reputation":2688,"user_id":264482,"accept_rate":94,"display_name":"Rob Goodwin"},"score":3,"creation_date":1675342574,"post_id":75323462,"comment_id":132910913,"body_markdown":"For that I use the test setup and teardown methods to ensure the input is there before the test, and removed after.  As far as what gets tested, I will use some sort of coverage report to ensure what I want tested is tested.","body":"For that I use the test setup and teardown methods to ensure the input is there before the test, and removed after.  As far as what gets tested, I will use some sort of coverage report to ensure what I want tested is tested."},{"owner":{"account_id":17006998,"reputation":713,"user_id":12302982,"display_name":"Igor Flakiewicz"},"score":1,"creation_date":1675342696,"post_id":75323462,"comment_id":132910960,"body_markdown":"1. have original file, 2. before each test runs create temp dir and make copy of that file to a temp dir, 3. run test, 4. after each test destroy the temp dir. Look at `@BeforeEach` and `@AfterEach` annotations for junit","body":"1. have original file, 2. before each test runs create temp dir and make copy of that file to a temp dir, 3. run test, 4. after each test destroy the temp dir. Look at <code>@BeforeEach</code> and <code>@AfterEach</code> annotations for junit"},{"owner":{"account_id":13299918,"reputation":406,"user_id":9601720,"display_name":"thmasker"},"score":0,"creation_date":1675343326,"post_id":75323462,"comment_id":132911194,"body_markdown":"@RobGoodwin :facepalm. That is an easy solution!","body":"@RobGoodwin :facepalm. That is an easy solution!"}],"answers":[{"tags":[],"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675433083,"creation_date":1675433083,"answer_id":75336799,"question_id":75323462,"body_markdown":"I would recommend to use new `@TempDir` annotation from `junit 5`.\r\n\r\n[Docs](https://junit.org/junit5/docs/5.4.1/api/org/junit/jupiter/api/io/TempDir.html):\r\n&gt; When the end of the scope of a temporary directory is reached, i.e. when the test method or class has finished execution, JUnit will attempt to recursively delete all files and directories in the temporary directory and, finally, the temporary directory itself. \r\n\r\nIn that case you test cases will look as the next:\r\n```java\r\n@Test\r\nvoid loadsFileCorrectly(@TempDir Path temp) {\r\n    final Path file = temp.resolve(&quot;testable.file&quot;);\r\n    loadFile(file);\r\n    Assertions.assertTrue(Files.notExists(file));\r\n}\r\n\r\n@Test\r\nvoid loadsFileWithException(@TempDir Path temp) {\r\n    final Path file = temp.resolve(&quot;testable.file&quot;);\r\n    loadFile(file);\r\n    Assertions.assertTrue(Files.exists(file.resolveSibling(&quot;ERROR_&quot; + file.getFileName())));\r\n}\r\n```\r\n\r\nIn both scenarios, the created files will be automatically deleted after execution.\r\n\r\n","title":"Design idempotent unit test","body":"<p>I would recommend to use new <code>@TempDir</code> annotation from <code>junit 5</code>.</p>\n<p><a href=\"https://junit.org/junit5/docs/5.4.1/api/org/junit/jupiter/api/io/TempDir.html\" rel=\"nofollow noreferrer\">Docs</a>:</p>\n<blockquote>\n<p>When the end of the scope of a temporary directory is reached, i.e. when the test method or class has finished execution, JUnit will attempt to recursively delete all files and directories in the temporary directory and, finally, the temporary directory itself.</p>\n</blockquote>\n<p>In that case you test cases will look as the next:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid loadsFileCorrectly(@TempDir Path temp) {\n    final Path file = temp.resolve(&quot;testable.file&quot;);\n    loadFile(file);\n    Assertions.assertTrue(Files.notExists(file));\n}\n\n@Test\nvoid loadsFileWithException(@TempDir Path temp) {\n    final Path file = temp.resolve(&quot;testable.file&quot;);\n    loadFile(file);\n    Assertions.assertTrue(Files.exists(file.resolveSibling(&quot;ERROR_&quot; + file.getFileName())));\n}\n</code></pre>\n<p>In both scenarios, the created files will be automatically deleted after execution.</p>\n"}],"owner":{"account_id":13299918,"reputation":406,"user_id":9601720,"display_name":"thmasker"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675433083,"creation_date":1675342300,"question_id":75323462,"body_markdown":"I&#39;m designing unit tests for the following method:\r\n\r\n    public void loadFile(Path filename) throws IOException {\r\n        try {\r\n            // do something\r\n        } catch (RuntimeException ex) {\r\n            Files.move(filename, filename.resolveSibling(&quot;ERROR_&quot; + filename.getFileName()));\r\n            return;\r\n        }\r\n\r\n        Files.delete(filename);\r\n    }\r\n\r\nAnd I&#39;m looking for a way of testing it without producing different results, since the input file is going to be either renamed or deleted after the execution test:\r\n\r\n - If `RuntimeException` takes place, file is renamed.\r\n - If execution goes as expected, file is deleted.\r\n\r\nEither way, consecutive runs of the test will make it fail because file will be named different or it won&#39;t exist... How could I prevent that? Also, is there a way to verify `Files#move(Path, Path, CopyOption...)` and `Files#delete(Path)` were invoked?","title":"Design idempotent unit test","body":"<p>I'm designing unit tests for the following method:</p>\n<pre><code>public void loadFile(Path filename) throws IOException {\n    try {\n        // do something\n    } catch (RuntimeException ex) {\n        Files.move(filename, filename.resolveSibling(&quot;ERROR_&quot; + filename.getFileName()));\n        return;\n    }\n\n    Files.delete(filename);\n}\n</code></pre>\n<p>And I'm looking for a way of testing it without producing different results, since the input file is going to be either renamed or deleted after the execution test:</p>\n<ul>\n<li>If <code>RuntimeException</code> takes place, file is renamed.</li>\n<li>If execution goes as expected, file is deleted.</li>\n</ul>\n<p>Either way, consecutive runs of the test will make it fail because file will be named different or it won't exist... How could I prevent that? Also, is there a way to verify <code>Files#move(Path, Path, CopyOption...)</code> and <code>Files#delete(Path)</code> were invoked?</p>\n"},{"tags":["java","email","outlook","microsoft-graph-api","ouath-outlook"],"comments":[{"owner":{"account_id":334117,"reputation":15586,"user_id":660350,"accept_rate":54,"display_name":"Pascal"},"score":0,"creation_date":1674753138,"post_id":74717563,"comment_id":132785687,"body_markdown":"Hi. Could you find a solution? If yes, can I kindly ask you to document it? Thanks.","body":"Hi. Could you find a solution? If yes, can I kindly ask you to document it? Thanks."},{"owner":{"account_id":8776074,"reputation":8345,"user_id":6561309,"accept_rate":42,"display_name":"Richard"},"score":0,"creation_date":1674809728,"post_id":74717563,"comment_id":132796446,"body_markdown":"Hi  @Pascal, I  could  not find a solution, so I scrapped this. I am able to use an FTP mechanism instead of trying to access MS Outlook from jakarta.mail.","body":"Hi  @Pascal, I  could  not find a solution, so I scrapped this. I am able to use an FTP mechanism instead of trying to access MS Outlook from jakarta.mail."},{"owner":{"account_id":2106056,"reputation":890,"user_id":1872360,"accept_rate":88,"display_name":"runholen"},"score":0,"creation_date":1675423911,"post_id":74717563,"comment_id":132930802,"body_markdown":"@Pascal, if you should manage to find a solution, please post it here for the rest of us..","body":"@Pascal, if you should manage to find a solution, please post it here for the rest of us.."},{"owner":{"account_id":334117,"reputation":15586,"user_id":660350,"accept_rate":54,"display_name":"Pascal"},"score":0,"creation_date":1678723563,"post_id":74717563,"comment_id":133584883,"body_markdown":"@runholen No time to investigate this right now. I&#39;ll update this post if I ever find a solution ;-)","body":"@runholen No time to investigate this right now. I&#39;ll update this post if I ever find a solution ;-)"}],"answers":[{"tags":[],"owner":{"account_id":2596604,"reputation":15928,"user_id":2250152,"accept_rate":72,"display_name":"user2250152"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670421371,"creation_date":1670421371,"answer_id":74717815,"question_id":74717563,"body_markdown":"If you want to get access on behalf of a user then the scope must be a space-separated list of the Microsoft Graph permissions that you want the user to consent to.\r\n\r\n    final String scope = &quot;user.read imap.accessasuser.all etc.&quot;;\r\n\r\nIf you want to get access without user (daemon app) then the value passed for the scope parameter in auth request should be `https://graph.microsoft.com/.default`. This value informs the Microsoft identity platform endpoint to include in the access token all the app-level permissions the admin has consented to.\r\n\r\n    final String scope = &quot;https://graph.microsoft.com/.default&quot;;\r\n\r\n\r\n[Authorization oauth v2 user][1]\r\n\r\n[Authorization oauth v2 service][2]\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/graph/auth-v2-user#authorization-request\r\n  [2]: https://learn.microsoft.com/en-us/graph/auth-v2-service#token-request","title":"JavaMail cannot access Outlook mailbox using OAuth2.0","body":"<p>If you want to get access on behalf of a user then the scope must be a space-separated list of the Microsoft Graph permissions that you want the user to consent to.</p>\n<pre><code>final String scope = &quot;user.read imap.accessasuser.all etc.&quot;;\n</code></pre>\n<p>If you want to get access without user (daemon app) then the value passed for the scope parameter in auth request should be <code>https://graph.microsoft.com/.default</code>. This value informs the Microsoft identity platform endpoint to include in the access token all the app-level permissions the admin has consented to.</p>\n<pre><code>final String scope = &quot;https://graph.microsoft.com/.default&quot;;\n</code></pre>\n<p><a href=\"https://learn.microsoft.com/en-us/graph/auth-v2-user#authorization-request\" rel=\"nofollow noreferrer\">Authorization oauth v2 user</a></p>\n<p><a href=\"https://learn.microsoft.com/en-us/graph/auth-v2-service#token-request\" rel=\"nofollow noreferrer\">Authorization oauth v2 service</a></p>\n"},{"tags":[],"owner":{"account_id":1085024,"reputation":20746,"user_id":1080923,"display_name":"Glen Scales"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670540658,"creation_date":1670540658,"answer_id":74737266,"question_id":74717563,"body_markdown":"    = &quot;https://graph.microsoft.com/.default&quot;;\r\n\r\nthis isn&#39;t the correct scope to use for IMAP the Graph does not provide IMAP access so using that will always generate a token with an incorrect audience that will fail when you try to authenticate against Exchange. \r\n\r\nfor the client credentials flow scope = &quot;https://outlook.office365.com/.default&quot; is the correct scope. The first place to start is check your token in jwt.io and make look at what permissions are being included in the returned token (the are listed under roles).\r\n\r\nEven with the correct permission and scope IMAP can be disabled at the mailbox level (and it recommended to do so) eg https://help.fookes.com/support/solutions/articles/9000213843-cannot-connect-to-microsoft-365-account-via-imap#:~:text=To%20allow%20IMAP%20access%20on,and%20enable%20IMAP%20from%20there.\r\n\r\nIf your building a new application don&#39;t use IMAP it&#39;s legacy and has many security issues. You can use the Graph just as easily and it will be guaranteed that your app will work without problem in the future (or at least you can get support if it doesn&#39;t). Your IMAP code as with what happened with basic authentication maybe discontinued or disabled (by Microsoft of the client/company) because of the associated security issues at any point in the very near future. (this is just IMO)","title":"JavaMail cannot access Outlook mailbox using OAuth2.0","body":"<pre><code>= &quot;https://graph.microsoft.com/.default&quot;;\n</code></pre>\n<p>this isn't the correct scope to use for IMAP the Graph does not provide IMAP access so using that will always generate a token with an incorrect audience that will fail when you try to authenticate against Exchange.</p>\n<p>for the client credentials flow scope = &quot;https://outlook.office365.com/.default&quot; is the correct scope. The first place to start is check your token in jwt.io and make look at what permissions are being included in the returned token (the are listed under roles).</p>\n<p>Even with the correct permission and scope IMAP can be disabled at the mailbox level (and it recommended to do so) eg <a href=\"https://help.fookes.com/support/solutions/articles/9000213843-cannot-connect-to-microsoft-365-account-via-imap#:%7E:text=To%20allow%20IMAP%20access%20on,and%20enable%20IMAP%20from%20there\" rel=\"nofollow noreferrer\">https://help.fookes.com/support/solutions/articles/9000213843-cannot-connect-to-microsoft-365-account-via-imap#:~:text=To%20allow%20IMAP%20access%20on,and%20enable%20IMAP%20from%20there</a>.</p>\n<p>If your building a new application don't use IMAP it's legacy and has many security issues. You can use the Graph just as easily and it will be guaranteed that your app will work without problem in the future (or at least you can get support if it doesn't). Your IMAP code as with what happened with basic authentication maybe discontinued or disabled (by Microsoft of the client/company) because of the associated security issues at any point in the very near future. (this is just IMO)</p>\n"},{"tags":[],"owner":{"account_id":2106056,"reputation":890,"user_id":1872360,"accept_rate":88,"display_name":"runholen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675432962,"creation_date":1675432962,"answer_id":75336780,"question_id":74717563,"body_markdown":"For everyone getting the dreaded &quot;a1 no authenticate failed&quot;:\r\nThe last days we have tried every stackoverflow-thread, and every powershell command, recreating users, applications etc, and no luck. Our existing javamail code that worked flawlessly with basic auth before microsoft removed it, always get the &quot;A1 No authenticate failed&quot; error.\r\nWhat finally made it work was the following change:\r\n````\r\nimapStore = sess.getStore(&quot;imaps&quot;);\r\n````\r\nto\r\n````\r\nimapStore = sess.getStore(&quot;imap&quot;);\r\n````","title":"JavaMail cannot access Outlook mailbox using OAuth2.0","body":"<p>For everyone getting the dreaded &quot;a1 no authenticate failed&quot;:\nThe last days we have tried every stackoverflow-thread, and every powershell command, recreating users, applications etc, and no luck. Our existing javamail code that worked flawlessly with basic auth before microsoft removed it, always get the &quot;A1 No authenticate failed&quot; error.\nWhat finally made it work was the following change:</p>\n<pre><code>imapStore = sess.getStore(&quot;imaps&quot;);\n</code></pre>\n<p>to</p>\n<pre><code>imapStore = sess.getStore(&quot;imap&quot;);\n</code></pre>\n"}],"owner":{"account_id":8776074,"reputation":8345,"user_id":6561309,"accept_rate":42,"display_name":"Richard"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":659,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1675432962,"creation_date":1670420292,"question_id":74717563,"body_markdown":"I am using Java Mail to connect to a MS Outlook Mail Server. I can do so successfully using PLAIN authentication with a username and password. I have heard that Microsoft will disable Basic Authentication soon, so I want to upgrade to use OAuth2.0 rather.\r\n\r\nI do the following using a username (email address) and password, which connects successfully. However, if I change it to use the the OAuth2 Token instead of the password to connect, it is unsuccessful.\r\n\r\n**Java Code**\r\n\r\nGets the token, which  looks like a valid token:\r\n\r\n    public String getAccessTokenByClientCredentialGrant()  {\r\n        String accessToken = null;\r\n        final String clientId = AZURE_CLIENT_ID; // &quot;&lt;client id from azure app registration&gt;&quot;\r\n        final String secret = AZURE_CLIENT_SECRET_VALUE;  // &quot;&lt;client secret from azure app registration&gt;&quot; - client secret value\r\n        final String authority = &quot;https://login.microsoftonline.com/&quot;+AZURE_TENANT_ID+&quot;/oauth2/v2.0/token&quot;; // &quot;https://login.microsoftonline.com/&lt;tenant-id from azure&gt;/oauth2/v2.0/token&quot;; or https://login.microsoftonline.com/{tenant}/v2.0/adminconsent?client_id=&lt;CLIENT_ID&gt;&amp;redirect_uri=&lt;REDIRECT_URI&gt;&amp;scope=https://ps.outlook.com/.default\r\n        final String scope = &quot;https://outlook.office365.com/.default&quot;;  // &quot;https://ps.outlook.com/.default&quot;;\r\n\r\n        try {\r\n            ConfidentialClientApplication app = ConfidentialClientApplication.builder(clientId, ClientCredentialFactory.createFromSecret(secret)).authority(authority).build();\r\n            // With client credentials flows the scope is ALWAYS of the shape &quot;resource/.default&quot;, as the application permissions need to be set statically (in the portal), and then granted by a tenant administrator\r\n            ClientCredentialParameters clientCredentialParam = ClientCredentialParameters.builder(Collections.singleton(scope)).build();\r\n\r\n            CompletableFuture&lt;IAuthenticationResult&gt; future = app.acquireToken(clientCredentialParam);\r\n            IAuthenticationResult result = future.get();\r\n            accessToken = result.accessToken();\r\n            if (StringUtils.isBlank(accessToken)) {\r\n                logger.error(&quot;Access token: &quot;+accessToken);\r\n            }\r\n        } catch(Exception e) {\r\n            logger.error(&quot;Exception in acquiring token: &quot;+e.getMessage(), e);\r\n        }\r\n        logger.debug(&quot;Access Token : &quot;+accessToken);\r\n        return accessToken;\r\n    }\r\n\r\nGet the connection fails:\r\n\r\n    public Store connect(String userEmailId, String oauth2AccessToken) throws Exception {\r\n        Store store = null;\r\n        final String SSL_FACTORY = &quot;javax.net.ssl.SSLSocketFactory&quot;;\r\n        Properties props = new Properties();\r\n        props.put(&quot;mail.imaps.ssl.enable&quot;, &quot;true&quot;);\r\n        props.put(&quot;mail.imaps.sasl.enable&quot;, &quot;true&quot;);\r\n        props.put(&quot;mail.imaps.port&quot;, port);\r\n        props.put(&quot;mail.imaps.host&quot;, host);\r\n        props.put(&quot;mail.imaps.protocol&quot;, &quot;imap&quot;);\r\n        props.put(&quot;mail.imaps.user&quot;, userEmailId);\r\n        props.put(&quot;mail.imaps.auth.mechanisms&quot;, &quot;XOAUTH2&quot;);\r\n        props.put(&quot;mail.imaps.sasl.mechanisms&quot;, &quot;XOAUTH2&quot;);\r\n        props.put(&quot;mail.imaps.auth.login.disable&quot;, &quot;true&quot;);\r\n        props.put(&quot;mail.imaps.auth.plain.disable&quot;, &quot;true&quot;);\r\n        props.setProperty(&quot;mail.imaps.socketFactory.class&quot;, SSL_FACTORY);\r\n        props.setProperty(&quot;mail.imaps.socketFactory.fallback&quot;, &quot;true&quot;);\r\n        props.setProperty(&quot;mail.imaps.socketFactory.port&quot;, port);\r\n        props.setProperty(&quot;mail.imaps.starttls.enable&quot;, &quot;true&quot;);\r\n        props.put(&quot;mail.debug&quot;, &quot;true&quot;);\r\n        props.put(&quot;mail.debug.auth&quot;, &quot;true&quot;);\r\n\r\n        Session session = Session.getInstance(props);\r\n        session.setDebug(true);\r\n        try {\r\n            store = session.getStore(&quot;imaps&quot;);\r\n            logger.info(&quot;OAUTH2 IMAP [&quot;+store.toString()+&quot;] connect with system properties to Host:&quot; + host + &quot;, Port: &quot;+ port + &quot;, userEmailId: &quot; + userEmailId+ &quot;, OAuth2AccessToken: &quot; + oauth2AccessToken);\r\n            Integer iPort = Integer.parseInt(port);\r\n            store.connect(host, iPort, userEmailId, oauth2AccessToken);\r\n            logger.info(&quot;OAUTH2 IMAP connected with system properties to Host:&quot; + host + &quot;, Port: &quot;+ port + &quot;, userEmailId: &quot; + userEmailId+ &quot;, OAuth2AccessToken: &quot; + oauth2AccessToken);\r\n            if(store.isConnected()){\r\n                logger.info(&quot;Connection Established using imap protocol successfully !&quot;);\r\n            } else {\r\n                logger.info(&quot;Connection not Established using imap protocol&quot;);\r\n            }\r\n        } catch (Exception e) {\r\n            logger.error(&quot;Store.Connect failed with the error: &quot;+e.getMessage());\r\n            StringWriter sw = new StringWriter();\r\n            e.printStackTrace(new PrintWriter(sw));\r\n            String exceptionAsString = sw.toString();\r\n            logger.error(exceptionAsString);\r\n        }\r\n        return store;\r\n    }\r\n\r\n**Output**\r\n\r\nHowever, when I try to access the mailbox via OAuth2.0, it still fails authentication.\r\n\r\n    DEBUG: JavaMail version 1.6.2\r\n    DEBUG: successfully loaded resource: /META-INF/javamail.default.address.map\r\n    DEBUG: setDebug: JavaMail version 1.6.2\r\n    DEBUG: getProvider() returning javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Oracle]\r\n    DEBUG IMAPS: mail.imap.fetchsize: 16384\r\n    DEBUG IMAPS: mail.imap.ignorebodystructuresize: false\r\n    DEBUG IMAPS: mail.imap.statuscachetimeout: 1000\r\n    DEBUG IMAPS: mail.imap.appendbuffersize: -1\r\n    DEBUG IMAPS: mail.imap.minidletime: 10\r\n    DEBUG IMAPS: enable STARTTLS\r\n    DEBUG IMAPS: enable SASL\r\n    DEBUG IMAPS: SASL mechanisms allowed: XOAUTH2\r\n    DEBUG IMAPS: closeFoldersOnStoreFailure\r\n\r\n    DEBUG IMAPS: trying to connect to host &quot;outlook.office365.com&quot;, port 993, isSSL true\r\n    * OK The Microsoft Exchange IMAP4 service is ready. [xxx==]\r\n    A0 CAPABILITY\r\n    * CAPABILITY IMAP4 IMAP4rev1 AUTH=PLAIN AUTH=XOAUTH2 SASL-IR UIDPLUS ID UNSELECT CHILDREN IDLE NAMESPACE LITERAL+\r\n    A0 OK CAPABILITY completed.\r\n    DEBUG IMAPS: AUTH: PLAIN\r\n    DEBUG IMAPS: AUTH: XOAUTH2\r\n    DEBUG IMAPS: protocolConnect login, host=outlook.office365.com, user=powwow@company.com, password=&lt;non-null&gt;\r\n    DEBUG IMAPS: SASL Mechanisms:\r\n    DEBUG IMAPS:  XOAUTH2\r\n    DEBUG IMAPS:\r\n    DEBUG IMAPS: SASL client XOAUTH2\r\n    DEBUG IMAPS: SASL callback length: 2\r\n    DEBUG IMAPS: SASL callback 0: javax.security.auth.callback.NameCallback@2ec9d28c\r\n    DEBUG IMAPS: SASL callback 1: javax.security.auth.callback.PasswordCallback@7a98e6b5\r\n    A1 AUTHENTICATE XOAUTH2 xxx\r\n    A1 NO AUTHENTICATE failed.\r\n\r\n    javax.mail.AuthenticationFailedException: AUTHENTICATE failed.\r\n    \tat com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:732)\r\n\r\n**Configuration**\r\n\r\nI have managed to assign FULLACCESS access rights via Powershell to the outlook mailbox ([see here][1] for ref):\r\n\r\n    PS /Users/richardmarais&gt; Install-Module -Name ExchangeOnlineManagement -allowprerelease\r\n    \r\n    PS /Users/richardmarais&gt; Import-module ExchangeOnlineManagement                        \r\n    \r\n    PS /Users/richardmarais&gt; Connect-ExchangeOnline -Organization &lt;Directory (tenant) ID&gt;\r\n    \r\n    New-ServicePrincipal -AppId &lt;APPLICATION_ID&gt; -ServiceId &lt;OBJECT_ID&gt; [-Organization &lt;ORGANIZATION_ID&gt;]\r\n    \r\n    Get-ServicePrincipal | fl\r\n\r\n    Add-MailboxPermission -Identity &quot;powwow@company.com&quot; -User \r\n    &lt;SERVICE_PRINCIPAL_ID&gt; -AccessRights FullAccess\r\n\r\n    Identity             User                 AccessRights                                                                                                                                                                                         IsInherited Deny\r\n    \r\n    --------             ----                 ------------                                                                                                                                                                                         ----------- ----\r\n    \r\n    powwow               ZAFPxxxxx2\\$MIxx… {FullAccess} \r\n\r\n                        \r\n\r\n\r\nI have configured the following API Permissions configured in Azure:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n**Question**\r\n\r\nI have not developed with Microsoft products in the past, so I am a bit in the dark here.  Does anyone have any ideas please?\r\n\r\n\r\n\r\n**Update**\r\n\r\nThank you to user2250152 for their answer below.  I have changed the scope to:\r\n\r\n    final String scope = &quot;https://graph.microsoft.com/.default&quot;;\r\n\r\nand get the same error as above. However, when I change it to:\r\n\r\n    final String scope = &quot;user.read.all&quot;;\r\n\r\nI get a different error:\r\n\r\n    \r\n&gt; MsalServiceException: AADSTS1002012: The provided value for scope\r\n&gt; openid profile offline_access user.read.all is not valid. Client\r\n&gt; credential flows must have a scope value with /.default suffixed to\r\n&gt; the resource identifier (application ID URI).\r\n\r\nHow do I know what to set the `scope` to?\r\n\r\n**Further Update**\r\n\r\nThanks to Glen Scales below for his answer. If I change the `scope` to:\r\n\r\n    final String scope = &quot;https://outlook.office365.com/.default&quot;;\r\n\r\nand then use jwt.io to view the token, it shows that the user has access to:\r\n\r\n      &quot;roles&quot;: [\r\n        &quot;User.Read.All&quot;,\r\n        &quot;Mail.ReadWrite&quot;,\r\n        &quot;POP.AccessAsApp&quot;,\r\n        &quot;User.ReadBasic.All&quot;,\r\n        &quot;Mail.Read&quot;,\r\n        &quot;IMAP.AccessAsApp&quot;\r\n      ],\r\n\r\nWhich corresponds to the Azure API permissions:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nHowever, when I try access it via IMAP, it still gets the same error as above:\r\n\r\n&gt; A1 NO AUTHENTICATE failed.\r\n\r\nI am not sure why the IMAP attempted connection fails. So on his suggestion I think I need to figure out how to connect using Graph instead of IMAP.\r\n\r\n\r\n\r\n\r\n \r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/exchange/client-developer/legacy-protocols/how-to-authenticate-an-imap-pop-smtp-application-by-using-oauth\r\n  [2]: https://i.stack.imgur.com/vA7E7.png\r\n  [3]: https://i.stack.imgur.com/3W9gi.png","title":"JavaMail cannot access Outlook mailbox using OAuth2.0","body":"<p>I am using Java Mail to connect to a MS Outlook Mail Server. I can do so successfully using PLAIN authentication with a username and password. I have heard that Microsoft will disable Basic Authentication soon, so I want to upgrade to use OAuth2.0 rather.</p>\n<p>I do the following using a username (email address) and password, which connects successfully. However, if I change it to use the the OAuth2 Token instead of the password to connect, it is unsuccessful.</p>\n<p><strong>Java Code</strong></p>\n<p>Gets the token, which  looks like a valid token:</p>\n<pre><code>public String getAccessTokenByClientCredentialGrant()  {\n    String accessToken = null;\n    final String clientId = AZURE_CLIENT_ID; // &quot;&lt;client id from azure app registration&gt;&quot;\n    final String secret = AZURE_CLIENT_SECRET_VALUE;  // &quot;&lt;client secret from azure app registration&gt;&quot; - client secret value\n    final String authority = &quot;https://login.microsoftonline.com/&quot;+AZURE_TENANT_ID+&quot;/oauth2/v2.0/token&quot;; // &quot;https://login.microsoftonline.com/&lt;tenant-id from azure&gt;/oauth2/v2.0/token&quot;; or https://login.microsoftonline.com/{tenant}/v2.0/adminconsent?client_id=&lt;CLIENT_ID&gt;&amp;redirect_uri=&lt;REDIRECT_URI&gt;&amp;scope=https://ps.outlook.com/.default\n    final String scope = &quot;https://outlook.office365.com/.default&quot;;  // &quot;https://ps.outlook.com/.default&quot;;\n\n    try {\n        ConfidentialClientApplication app = ConfidentialClientApplication.builder(clientId, ClientCredentialFactory.createFromSecret(secret)).authority(authority).build();\n        // With client credentials flows the scope is ALWAYS of the shape &quot;resource/.default&quot;, as the application permissions need to be set statically (in the portal), and then granted by a tenant administrator\n        ClientCredentialParameters clientCredentialParam = ClientCredentialParameters.builder(Collections.singleton(scope)).build();\n\n        CompletableFuture&lt;IAuthenticationResult&gt; future = app.acquireToken(clientCredentialParam);\n        IAuthenticationResult result = future.get();\n        accessToken = result.accessToken();\n        if (StringUtils.isBlank(accessToken)) {\n            logger.error(&quot;Access token: &quot;+accessToken);\n        }\n    } catch(Exception e) {\n        logger.error(&quot;Exception in acquiring token: &quot;+e.getMessage(), e);\n    }\n    logger.debug(&quot;Access Token : &quot;+accessToken);\n    return accessToken;\n}\n</code></pre>\n<p>Get the connection fails:</p>\n<pre><code>public Store connect(String userEmailId, String oauth2AccessToken) throws Exception {\n    Store store = null;\n    final String SSL_FACTORY = &quot;javax.net.ssl.SSLSocketFactory&quot;;\n    Properties props = new Properties();\n    props.put(&quot;mail.imaps.ssl.enable&quot;, &quot;true&quot;);\n    props.put(&quot;mail.imaps.sasl.enable&quot;, &quot;true&quot;);\n    props.put(&quot;mail.imaps.port&quot;, port);\n    props.put(&quot;mail.imaps.host&quot;, host);\n    props.put(&quot;mail.imaps.protocol&quot;, &quot;imap&quot;);\n    props.put(&quot;mail.imaps.user&quot;, userEmailId);\n    props.put(&quot;mail.imaps.auth.mechanisms&quot;, &quot;XOAUTH2&quot;);\n    props.put(&quot;mail.imaps.sasl.mechanisms&quot;, &quot;XOAUTH2&quot;);\n    props.put(&quot;mail.imaps.auth.login.disable&quot;, &quot;true&quot;);\n    props.put(&quot;mail.imaps.auth.plain.disable&quot;, &quot;true&quot;);\n    props.setProperty(&quot;mail.imaps.socketFactory.class&quot;, SSL_FACTORY);\n    props.setProperty(&quot;mail.imaps.socketFactory.fallback&quot;, &quot;true&quot;);\n    props.setProperty(&quot;mail.imaps.socketFactory.port&quot;, port);\n    props.setProperty(&quot;mail.imaps.starttls.enable&quot;, &quot;true&quot;);\n    props.put(&quot;mail.debug&quot;, &quot;true&quot;);\n    props.put(&quot;mail.debug.auth&quot;, &quot;true&quot;);\n\n    Session session = Session.getInstance(props);\n    session.setDebug(true);\n    try {\n        store = session.getStore(&quot;imaps&quot;);\n        logger.info(&quot;OAUTH2 IMAP [&quot;+store.toString()+&quot;] connect with system properties to Host:&quot; + host + &quot;, Port: &quot;+ port + &quot;, userEmailId: &quot; + userEmailId+ &quot;, OAuth2AccessToken: &quot; + oauth2AccessToken);\n        Integer iPort = Integer.parseInt(port);\n        store.connect(host, iPort, userEmailId, oauth2AccessToken);\n        logger.info(&quot;OAUTH2 IMAP connected with system properties to Host:&quot; + host + &quot;, Port: &quot;+ port + &quot;, userEmailId: &quot; + userEmailId+ &quot;, OAuth2AccessToken: &quot; + oauth2AccessToken);\n        if(store.isConnected()){\n            logger.info(&quot;Connection Established using imap protocol successfully !&quot;);\n        } else {\n            logger.info(&quot;Connection not Established using imap protocol&quot;);\n        }\n    } catch (Exception e) {\n        logger.error(&quot;Store.Connect failed with the error: &quot;+e.getMessage());\n        StringWriter sw = new StringWriter();\n        e.printStackTrace(new PrintWriter(sw));\n        String exceptionAsString = sw.toString();\n        logger.error(exceptionAsString);\n    }\n    return store;\n}\n</code></pre>\n<p><strong>Output</strong></p>\n<p>However, when I try to access the mailbox via OAuth2.0, it still fails authentication.</p>\n<pre><code>DEBUG: JavaMail version 1.6.2\nDEBUG: successfully loaded resource: /META-INF/javamail.default.address.map\nDEBUG: setDebug: JavaMail version 1.6.2\nDEBUG: getProvider() returning javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Oracle]\nDEBUG IMAPS: mail.imap.fetchsize: 16384\nDEBUG IMAPS: mail.imap.ignorebodystructuresize: false\nDEBUG IMAPS: mail.imap.statuscachetimeout: 1000\nDEBUG IMAPS: mail.imap.appendbuffersize: -1\nDEBUG IMAPS: mail.imap.minidletime: 10\nDEBUG IMAPS: enable STARTTLS\nDEBUG IMAPS: enable SASL\nDEBUG IMAPS: SASL mechanisms allowed: XOAUTH2\nDEBUG IMAPS: closeFoldersOnStoreFailure\n\nDEBUG IMAPS: trying to connect to host &quot;outlook.office365.com&quot;, port 993, isSSL true\n* OK The Microsoft Exchange IMAP4 service is ready. [xxx==]\nA0 CAPABILITY\n* CAPABILITY IMAP4 IMAP4rev1 AUTH=PLAIN AUTH=XOAUTH2 SASL-IR UIDPLUS ID UNSELECT CHILDREN IDLE NAMESPACE LITERAL+\nA0 OK CAPABILITY completed.\nDEBUG IMAPS: AUTH: PLAIN\nDEBUG IMAPS: AUTH: XOAUTH2\nDEBUG IMAPS: protocolConnect login, host=outlook.office365.com, user=powwow@company.com, password=&lt;non-null&gt;\nDEBUG IMAPS: SASL Mechanisms:\nDEBUG IMAPS:  XOAUTH2\nDEBUG IMAPS:\nDEBUG IMAPS: SASL client XOAUTH2\nDEBUG IMAPS: SASL callback length: 2\nDEBUG IMAPS: SASL callback 0: javax.security.auth.callback.NameCallback@2ec9d28c\nDEBUG IMAPS: SASL callback 1: javax.security.auth.callback.PasswordCallback@7a98e6b5\nA1 AUTHENTICATE XOAUTH2 xxx\nA1 NO AUTHENTICATE failed.\n\njavax.mail.AuthenticationFailedException: AUTHENTICATE failed.\n    at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:732)\n</code></pre>\n<p><strong>Configuration</strong></p>\n<p>I have managed to assign FULLACCESS access rights via Powershell to the outlook mailbox (<a href=\"https://learn.microsoft.com/en-us/exchange/client-developer/legacy-protocols/how-to-authenticate-an-imap-pop-smtp-application-by-using-oauth\" rel=\"nofollow noreferrer\">see here</a> for ref):</p>\n<pre><code>PS /Users/richardmarais&gt; Install-Module -Name ExchangeOnlineManagement -allowprerelease\n\nPS /Users/richardmarais&gt; Import-module ExchangeOnlineManagement                        \n\nPS /Users/richardmarais&gt; Connect-ExchangeOnline -Organization &lt;Directory (tenant) ID&gt;\n\nNew-ServicePrincipal -AppId &lt;APPLICATION_ID&gt; -ServiceId &lt;OBJECT_ID&gt; [-Organization &lt;ORGANIZATION_ID&gt;]\n\nGet-ServicePrincipal | fl\n\nAdd-MailboxPermission -Identity &quot;powwow@company.com&quot; -User \n&lt;SERVICE_PRINCIPAL_ID&gt; -AccessRights FullAccess\n\nIdentity             User                 AccessRights                                                                                                                                                                                         IsInherited Deny\n\n--------             ----                 ------------                                                                                                                                                                                         ----------- ----\n\npowwow               ZAFPxxxxx2\\$MIxx… {FullAccess} \n\n                    \n</code></pre>\n<p>I have configured the following API Permissions configured in Azure:</p>\n<p><a href=\"https://i.stack.imgur.com/vA7E7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vA7E7.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Question</strong></p>\n<p>I have not developed with Microsoft products in the past, so I am a bit in the dark here.  Does anyone have any ideas please?</p>\n<p><strong>Update</strong></p>\n<p>Thank you to user2250152 for their answer below.  I have changed the scope to:</p>\n<pre><code>final String scope = &quot;https://graph.microsoft.com/.default&quot;;\n</code></pre>\n<p>and get the same error as above. However, when I change it to:</p>\n<pre><code>final String scope = &quot;user.read.all&quot;;\n</code></pre>\n<p>I get a different error:</p>\n<blockquote>\n<p>MsalServiceException: AADSTS1002012: The provided value for scope\nopenid profile offline_access user.read.all is not valid. Client\ncredential flows must have a scope value with /.default suffixed to\nthe resource identifier (application ID URI).</p>\n</blockquote>\n<p>How do I know what to set the <code>scope</code> to?</p>\n<p><strong>Further Update</strong></p>\n<p>Thanks to Glen Scales below for his answer. If I change the <code>scope</code> to:</p>\n<pre><code>final String scope = &quot;https://outlook.office365.com/.default&quot;;\n</code></pre>\n<p>and then use jwt.io to view the token, it shows that the user has access to:</p>\n<pre><code>  &quot;roles&quot;: [\n    &quot;User.Read.All&quot;,\n    &quot;Mail.ReadWrite&quot;,\n    &quot;POP.AccessAsApp&quot;,\n    &quot;User.ReadBasic.All&quot;,\n    &quot;Mail.Read&quot;,\n    &quot;IMAP.AccessAsApp&quot;\n  ],\n</code></pre>\n<p>Which corresponds to the Azure API permissions:</p>\n<p><a href=\"https://i.stack.imgur.com/3W9gi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3W9gi.png\" alt=\"enter image description here\" /></a></p>\n<p>However, when I try access it via IMAP, it still gets the same error as above:</p>\n<blockquote>\n<p>A1 NO AUTHENTICATE failed.</p>\n</blockquote>\n<p>I am not sure why the IMAP attempted connection fails. So on his suggestion I think I need to figure out how to connect using Graph instead of IMAP.</p>\n"},{"tags":["java","eclipse","ant","development-environment"],"comments":[{"owner":{"account_id":1271353,"reputation":7198,"user_id":1237141,"accept_rate":38,"display_name":"thedarkpassenger"},"score":0,"creation_date":1454273119,"post_id":35119239,"comment_id":57959045,"body_markdown":"try importing this project in android studio, or idea intellij or eclipse","body":"try importing this project in android studio, or idea intellij or eclipse"},{"owner":{"account_id":93866,"reputation":76253,"user_id":256618,"display_name":"Mark O&#39;Connor"},"score":1,"creation_date":1454287139,"post_id":35119239,"comment_id":57963332,"body_markdown":"What is confusing about your screenshot is that your project appears to have a build file for both ANT (build.xml) and also Maven (pom.xml). Without knowing which project you&#39;re working on all you can expect is some generic advice to install the both build tools and see what happens","body":"What is confusing about your screenshot is that your project appears to have a build file for both ANT (build.xml) and also Maven (pom.xml). Without knowing which project you&#39;re working on all you can expect is some generic advice to install the both build tools and see what happens"},{"owner":{"account_id":3909282,"reputation":804,"user_id":3235081,"accept_rate":87,"display_name":"Shady Programmer"},"score":0,"creation_date":1454326465,"post_id":35119239,"comment_id":57978739,"body_markdown":"after reading the answer below here I&#39;ve tried building with ant which said &quot;Build succesfull&quot; but haven&#39;t built anything, then I ran Maven command to build it and it has actually built files so I GUESS it&#39;s maven project. I&#39;m stuck now and don&#39;t know how to run examples though.","body":"after reading the answer below here I&#39;ve tried building with ant which said &quot;Build succesfull&quot; but haven&#39;t built anything, then I ran Maven command to build it and it has actually built files so I GUESS it&#39;s maven project. I&#39;m stuck now and don&#39;t know how to run examples though."},{"owner":{"account_id":3909282,"reputation":804,"user_id":3235081,"accept_rate":87,"display_name":"Shady Programmer"},"score":0,"creation_date":1454326502,"post_id":35119239,"comment_id":57978760,"body_markdown":"http://cathyreisenwitz.com/wp-content/uploads/2016/01/no.jpg","body":"<a href=\"http://cathyreisenwitz.com/wp-content/uploads/2016/01/no.jpg\" rel=\"nofollow noreferrer\">cathyreisenwitz.com/wp-content/uploads/2016/01/no.jpg</a>"}],"answers":[{"tags":[],"owner":{"account_id":7533207,"reputation":102,"user_id":5720536,"accept_rate":86,"display_name":"FlowX"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1454273380,"creation_date":1454273380,"answer_id":35119297,"question_id":35119239,"body_markdown":"You have to import the Project!\r\n \r\n 1. From the main menu bar, select command link File &gt; Import.... The Import wizard opens.\r\n\r\n 1. Select General &gt; Existing Project into Workspace and click Next.\r\n    \r\n\r\n 1. Choose either Select root directory or Select archive file and click the associated Browse to locate the directory or file containing the projects.\r\n\r\n    \r\n 1. Under Projects select the project or projects which you would like to import.\r\n\r\n\r\n 1. Click Finish to start the import.\r\n\r\n[help.eclipse][1]\r\n\r\n\r\n  [1]: http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-importproject.htm","title":"How to run source code downloaded from github","body":"<p>You have to import the Project!</p>\n\n<ol>\n<li><p>From the main menu bar, select command link File > Import.... The Import wizard opens.</p></li>\n<li><p>Select General > Existing Project into Workspace and click Next.</p></li>\n<li><p>Choose either Select root directory or Select archive file and click the associated Browse to locate the directory or file containing the projects.</p></li>\n<li><p>Under Projects select the project or projects which you would like to import.</p></li>\n<li><p>Click Finish to start the import.</p></li>\n</ol>\n\n<p><a href=\"http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-importproject.htm\" rel=\"nofollow\">help.eclipse</a></p>\n"},{"tags":[],"owner":{"account_id":3329682,"reputation":931,"user_id":2798897,"display_name":"Julien Revault d&#39;A..."},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1454273499,"creation_date":1454273499,"answer_id":35119325,"question_id":35119239,"body_markdown":"This is a maven and ant project, you need to download and install maven :\r\nhttps://maven.apache.org/\r\n\r\nAnd download and install ant:\r\nhttp://ant.apache.org/\r\n\r\nThe build.xml file is the configuration for ant\r\nThe pom.xml is the configuration for maven\r\n\r\nLook inside the ant.xml, you will find &quot;&amp;lt;target ...&quot; elements.\r\nFor example one target is build, to run it just opent a commande line and :\r\n\r\n    ant build\r\n","title":"How to run source code downloaded from github","body":"<p>This is a maven and ant project, you need to download and install maven :\n<a href=\"https://maven.apache.org/\" rel=\"nofollow\">https://maven.apache.org/</a></p>\n\n<p>And download and install ant:\n<a href=\"http://ant.apache.org/\" rel=\"nofollow\">http://ant.apache.org/</a></p>\n\n<p>The build.xml file is the configuration for ant\nThe pom.xml is the configuration for maven</p>\n\n<p>Look inside the ant.xml, you will find \"&lt;target ...\" elements.\nFor example one target is build, to run it just opent a commande line and :</p>\n\n<pre><code>ant build\n</code></pre>\n"}],"owner":{"account_id":3909282,"reputation":804,"user_id":3235081,"accept_rate":87,"display_name":"Shady Programmer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35170,"favorite_count":0,"down_vote_count":2,"up_vote_count":10,"accepted_answer_id":35119325,"answer_count":2,"score":8,"last_activity_date":1675432853,"creation_date":1454273037,"question_id":35119239,"body_markdown":"This is getting quite frustrating lately as I&#39;ve downloaded various source codes for various programs from github and I don&#39;t know how to build them or run them. Now mind you, I&#39;m not new to programming but this particular area of not knowing how to get things started when I get someones project files is absolutely killing me. What I have is this: \r\n\r\n[![Source files][1]][1]\r\n\r\n\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/HPoo0.png\r\n\r\n**What am I supposed to do now to build and run one of their examples ?** \r\n\r\n*Before anyone starts hatin&#39; on me for that question:*\r\n\r\nI&#39;ve read the manual that was attached with these files and it gives general overview of what can be found in the folders and so on but they don&#39;t specify how to build it. \r\nAlso I have eclipse for Java set up and tried to import these files as a project but eclipse rejected and said that no project can be found. \r\nI tried running individual java files but couldn&#39;t get them to compile because there was no &quot;ant file&quot; ( what is going on ? ) Later on I found something which I think was that ant file and opened it in conjunction with the file I wanted to run but no success. \r\n\r\n","title":"How to run source code downloaded from github","body":"<p>This is getting quite frustrating lately as I've downloaded various source codes for various programs from github and I don't know how to build them or run them. Now mind you, I'm not new to programming but this particular area of not knowing how to get things started when I get someones project files is absolutely killing me. What I have is this: </p>\n\n<p><a href=\"https://i.stack.imgur.com/HPoo0.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HPoo0.png\" alt=\"Source files\"></a></p>\n\n<p><strong>What am I supposed to do now to build and run one of their examples ?</strong> </p>\n\n<p><em>Before anyone starts hatin' on me for that question:</em></p>\n\n<p>I've read the manual that was attached with these files and it gives general overview of what can be found in the folders and so on but they don't specify how to build it. \nAlso I have eclipse for Java set up and tried to import these files as a project but eclipse rejected and said that no project can be found. \nI tried running individual java files but couldn't get them to compile because there was no \"ant file\" ( what is going on ? ) Later on I found something which I think was that ant file and opened it in conjunction with the file I wanted to run but no success. </p>\n"},{"tags":["java","lambda","java-8","functional-interface"],"comments":[{"owner":{"account_id":37136,"reputation":57812,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"score":4,"creation_date":1444297205,"post_id":33010594,"comment_id":53847601,"body_markdown":"`int i = 7; i = 5; System.out.println(i); // wouldn&#39;t it be awesome if this would print both 7 and 5?`","body":"<code>int i = 7; i = 5; System.out.println(i); &#47;&#47; wouldn&#39;t it be awesome if this would print both 7 and 5?</code>"},{"owner":{"account_id":2468965,"reputation":26450,"user_id":2151351,"display_name":"a better oliver"},"score":2,"creation_date":1444301071,"post_id":33010594,"comment_id":53850263,"body_markdown":"I really don&#39;t understand your reasoning. If something doesn&#39;t implement an interface, then how can it be of that type? An iPod doesn&#39;t count as iPhone just because you don&#39;t happen to make phone calls.","body":"I really don&#39;t understand your reasoning. If something doesn&#39;t implement an interface, then how can it be of that type? An iPod doesn&#39;t count as iPhone just because you don&#39;t happen to make phone calls."},{"owner":{"account_id":2674955,"reputation":10194,"user_id":2311557,"accept_rate":61,"display_name":"codepleb"},"score":3,"creation_date":1444301243,"post_id":33010594,"comment_id":53850368,"body_markdown":"@immibis: What you describe here is different from what I asked. :)","body":"@immibis: What you describe here is different from what I asked. :)"},{"owner":{"account_id":37136,"reputation":57812,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"score":3,"creation_date":1444346365,"post_id":33010594,"comment_id":53877247,"body_markdown":"@TrudleR You seemed to be asking: `&lt;some type&gt; i = &lt;some value&gt;; i = &lt;some other value&gt;; // why can&#39;t i be both values at once here?` The variable `i` can hold a reference to ***one*** object, no matter whether that&#39;s an object created by a lambda expression or an instance of a class you wrote explicitly.","body":"@TrudleR You seemed to be asking: <code>&lt;some type&gt; i = &lt;some value&gt;; i = &lt;some other value&gt;; &#47;&#47; why can&#39;t i be both values at once here?</code> The variable <code>i</code> can hold a reference to <b><i>one</i></b> object, no matter whether that&#39;s an object created by a lambda expression or an instance of a class you wrote explicitly."},{"owner":{"account_id":2674955,"reputation":10194,"user_id":2311557,"accept_rate":61,"display_name":"codepleb"},"score":0,"creation_date":1444374270,"post_id":33010594,"comment_id":53885720,"body_markdown":"@immibis: Yeah, I know that. I wrote on another answer, that it&#39;s more about the idea and not about the implementation. But you do something completely different, that makes sense in absolutely no case, since you don&#39;t know which value you would need to print out. In my example, if it were possible, the compiler would know which method he would have to take.","body":"@immibis: Yeah, I know that. I wrote on another answer, that it&#39;s more about the idea and not about the implementation. But you do something completely different, that makes sense in absolutely no case, since you don&#39;t know which value you would need to print out. In my example, if it were possible, the compiler would know which method he would have to take."},{"owner":{"account_id":37136,"reputation":57812,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"score":2,"creation_date":1444389427,"post_id":33010594,"comment_id":53894698,"body_markdown":"@TrudleR So you want to do something like `TestInterface i = new TestInterface() {void hans() {System.out.println(&quot;Hans&quot;);} void hans(int a) {System.out.println(a);} /* and so on */};`?","body":"@TrudleR So you want to do something like <code>TestInterface i = new TestInterface() {void hans() {System.out.println(&quot;Hans&quot;);} void hans(int a) {System.out.println(a);} &#47;* and so on *&#47;};</code>?"},{"owner":{"account_id":3297575,"reputation":3360,"user_id":2774480,"accept_rate":16,"display_name":"MMMM"},"score":1,"creation_date":1612819354,"post_id":33010594,"comment_id":116881242,"body_markdown":"somehow this looks to me, as if Java wanted to make it cool and easy like with javascript arrow functions, then messed it up totally and blew up the code with unnecessary functional interfaces.. ;)","body":"somehow this looks to me, as if Java wanted to make it cool and easy like with javascript arrow functions, then messed it up totally and blew up the code with unnecessary functional interfaces.. ;)"}],"answers":[{"tags":[],"owner":{"account_id":166521,"reputation":30433,"user_id":390695,"accept_rate":72,"display_name":"Damian Leszczyński - Vash"},"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1444293864,"creation_date":1444293421,"answer_id":33010654,"question_id":33010594,"body_markdown":"You do not have to create a functional interface in order to create lambda function. The interface allow you to create instance for future function invocation. \r\n\r\nIn your case you could use already existing interface Runable \r\n\r\n`Runnable r = () -&gt; System.out.println(&quot;Hans&quot;);`\r\n\r\nand then call \r\n\r\n`r.run();`\r\n\r\nYou can think of lambda `-&gt;` as only short hand for: \r\n\r\n    Runnable r = new Runnable() {\r\n         void run() {\r\n              System.out.println(&quot;Hans&quot;);`\r\n         }\r\n    }\r\n\r\nWith lambda you do not need the anonymous class, that is created under the hood in above example. \r\n\r\nBut this has some limitation, in order to figure out what method should be called  interface used with lambdas must be SAM (Single Abstract Method). Then we have only one method. \r\n\r\nFor more detailed explanation read: \r\n\r\n[Introduction to Functional Interfaces – A Concept Recreated in Java 8][1]\r\n\r\n\r\n  [1]: https://dzone.com/articles/introduction-functional-1","title":"Why do I need a functional Interface to work with lambdas?","body":"<p>You do not have to create a functional interface in order to create lambda function. The interface allow you to create instance for future function invocation. </p>\n\n<p>In your case you could use already existing interface Runable </p>\n\n<p><code>Runnable r = () -&gt; System.out.println(\"Hans\");</code></p>\n\n<p>and then call </p>\n\n<p><code>r.run();</code></p>\n\n<p>You can think of lambda <code>-&gt;</code> as only short hand for: </p>\n\n<pre><code>Runnable r = new Runnable() {\n     void run() {\n          System.out.println(\"Hans\");`\n     }\n}\n</code></pre>\n\n<p>With lambda you do not need the anonymous class, that is created under the hood in above example. </p>\n\n<p>But this has some limitation, in order to figure out what method should be called  interface used with lambdas must be SAM (Single Abstract Method). Then we have only one method. </p>\n\n<p>For more detailed explanation read: </p>\n\n<p><a href=\"https://dzone.com/articles/introduction-functional-1\" rel=\"noreferrer\">Introduction to Functional Interfaces – A Concept Recreated in Java 8</a></p>\n"},{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":45,"is_accepted":true,"score":45,"last_activity_date":1444293607,"creation_date":1444293607,"answer_id":33010712,"question_id":33010594,"body_markdown":"When you write :\r\n\r\n    TestInterface i = () -&gt; System.out.println(&quot;Hans&quot;);\r\n\r\nYou give an implementation to the `void hans()` method of the `TestInterface`.\r\n\r\nIf you could assign a lambda expression to an interface having more than one abstract method (i.e. a non functional interface), the lambda expression could only implement one of the methods, leaving the other methods unimplemented.\r\n\r\nYou can&#39;t solve it by assigning two lambda expressions having different signatures to the same variable (Just like you can&#39;t assign references of two objects to a single variable and expect that variable to refer to both objects at once).\r\n","title":"Why do I need a functional Interface to work with lambdas?","body":"<p>When you write :</p>\n\n<pre><code>TestInterface i = () -&gt; System.out.println(\"Hans\");\n</code></pre>\n\n<p>You give an implementation to the <code>void hans()</code> method of the <code>TestInterface</code>.</p>\n\n<p>If you could assign a lambda expression to an interface having more than one abstract method (i.e. a non functional interface), the lambda expression could only implement one of the methods, leaving the other methods unimplemented.</p>\n\n<p>You can't solve it by assigning two lambda expressions having different signatures to the same variable (Just like you can't assign references of two objects to a single variable and expect that variable to refer to both objects at once).</p>\n"},{"tags":[],"owner":{"account_id":2357529,"reputation":2342,"user_id":2065017,"accept_rate":100,"display_name":"blagae"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1535093420,"creation_date":1444294296,"answer_id":33010983,"question_id":33010594,"body_markdown":"The most important reason why they must contain only one method, is that confusion is easily possible otherwise. If multiple methods were allowed in the interface, which method should a lambda pick if the argument lists are the same ?\r\n\r\n    interface TestInterface {\r\n        void first();\r\n        void second(); // this is only distinguished from first() by method name\r\n        String third(); // maybe you could say in this instance &quot;well the return type is different&quot;\r\n        Object fourth(); // but a String is an Object, too !\r\n    }\r\n\r\n    void test() {\r\n        // which method are you implementing, first or second ?\r\n        TestInterface a = () -&gt; System.out.println(&quot;Ido mein ado mein&quot;);\r\n        // which method are you implementing, third or fourth ?\r\n        TestInterface b = () -&gt; &quot;Ido mein ado mein&quot;;\r\n    }","title":"Why do I need a functional Interface to work with lambdas?","body":"<p>The most important reason why they must contain only one method, is that confusion is easily possible otherwise. If multiple methods were allowed in the interface, which method should a lambda pick if the argument lists are the same ?</p>\n\n<pre><code>interface TestInterface {\n    void first();\n    void second(); // this is only distinguished from first() by method name\n    String third(); // maybe you could say in this instance \"well the return type is different\"\n    Object fourth(); // but a String is an Object, too !\n}\n\nvoid test() {\n    // which method are you implementing, first or second ?\n    TestInterface a = () -&gt; System.out.println(\"Ido mein ado mein\");\n    // which method are you implementing, third or fourth ?\n    TestInterface b = () -&gt; \"Ido mein ado mein\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":37136,"reputation":57812,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1444389624,"creation_date":1444389624,"answer_id":33036963,"question_id":33010594,"body_markdown":"You seem to be looking for **anonymous classes**. The following code works:\r\n\r\n    public class Test {\r\n    \r\n        public static void main(String...args) {\r\n            TestInterface i = new TestInterface() {\r\n                public void hans() {\r\n                    System.out.println(&quot;Hans&quot;);\r\n                }\r\n                public void hans(String a) {\r\n                    System.out.println(a);\r\n                }\r\n            };\r\n    \r\n            i.hans();\r\n            i.hans(&quot;Hello&quot;);\r\n        }\r\n    }\r\n    \r\n    public interface TestInterface {\r\n        public void hans();\r\n        public void hans(String a);\r\n    }\r\n\r\nLambda expressions are (mostly) a shorter way to write anonymous classes with only one method. (Likewise, anonymous classes are shorthand for inner classes that you only use in one place)","title":"Why do I need a functional Interface to work with lambdas?","body":"<p>You seem to be looking for <strong>anonymous classes</strong>. The following code works:</p>\n\n<pre><code>public class Test {\n\n    public static void main(String...args) {\n        TestInterface i = new TestInterface() {\n            public void hans() {\n                System.out.println(\"Hans\");\n            }\n            public void hans(String a) {\n                System.out.println(a);\n            }\n        };\n\n        i.hans();\n        i.hans(\"Hello\");\n    }\n}\n\npublic interface TestInterface {\n    public void hans();\n    public void hans(String a);\n}\n</code></pre>\n\n<p>Lambda expressions are (mostly) a shorter way to write anonymous classes with only one method. (Likewise, anonymous classes are shorthand for inner classes that you only use in one place)</p>\n"},{"tags":[],"owner":{"account_id":3430695,"reputation":1295,"user_id":2875210,"accept_rate":89,"display_name":"mzoz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1533807279,"creation_date":1533807279,"answer_id":51763554,"question_id":33010594,"body_markdown":"Functional interface can only contain exactly one abstract method according to [java specs][1]. \r\n\r\nSurely lambda expression can be one-time used as your commented code does, but when it comes to passing lambda expression as parameter to mimic function callback, functional interface is a must because in that case the variable data type is the functional interface. \r\n\r\nFor example, `Runnable` is a built-in functional interface:\r\n\r\n    public interface Runnable() {\r\n        public void run();\r\n    }\r\n\r\nThe usage can be demonstrated as below:\r\n\r\n    public class LambdaTest {\r\n        // data type of parameter &#39;task&#39; is functional interface &#39;Runnable&#39;\r\n        static void doSeveralTimes(Runnable task, int repeat) {\r\n            for (int i = 0; i &lt; repeat; i++) {\r\n                task.run();\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            // one-time lambda\r\n            doSeveralTimes(() -&gt; {\r\n                System.out.println(&quot;one-time lambda&quot;);\r\n            }, 3);\r\n    \r\n            // lambda as variable\r\n            Runnable test;\r\n            test = () -&gt; {\r\n                System.out.println(&quot;lambda as variable&quot;);\r\n            };\r\n            doSeveralTimes(test, 3);\r\n        }\r\n    }\r\n\r\nand the result is:\r\n\r\n    one-time lambda\r\n    one-time lambda\r\n    one-time lambda\r\n    lambda as variable\r\n    lambda as variable\r\n    lambda as variable\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se8/html/jls-9.html#jls-9.8","title":"Why do I need a functional Interface to work with lambdas?","body":"<p>Functional interface can only contain exactly one abstract method according to <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-9.html#jls-9.8\" rel=\"nofollow noreferrer\">java specs</a>. </p>\n\n<p>Surely lambda expression can be one-time used as your commented code does, but when it comes to passing lambda expression as parameter to mimic function callback, functional interface is a must because in that case the variable data type is the functional interface. </p>\n\n<p>For example, <code>Runnable</code> is a built-in functional interface:</p>\n\n<pre><code>public interface Runnable() {\n    public void run();\n}\n</code></pre>\n\n<p>The usage can be demonstrated as below:</p>\n\n<pre><code>public class LambdaTest {\n    // data type of parameter 'task' is functional interface 'Runnable'\n    static void doSeveralTimes(Runnable task, int repeat) {\n        for (int i = 0; i &lt; repeat; i++) {\n            task.run();\n        }\n    }\n\n    public static void main(String[] args) {\n        // one-time lambda\n        doSeveralTimes(() -&gt; {\n            System.out.println(\"one-time lambda\");\n        }, 3);\n\n        // lambda as variable\n        Runnable test;\n        test = () -&gt; {\n            System.out.println(\"lambda as variable\");\n        };\n        doSeveralTimes(test, 3);\n    }\n}\n</code></pre>\n\n<p>and the result is:</p>\n\n<pre><code>one-time lambda\none-time lambda\none-time lambda\nlambda as variable\nlambda as variable\nlambda as variable\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13012947,"reputation":116,"user_id":9405264,"display_name":"kumarras"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590398366,"creation_date":1590398366,"answer_id":61999398,"question_id":33010594,"body_markdown":"A lambda expression is nothing but a shortcut to defining an implementation of a functional interface.\r\nIt is equivalent to an instance of a functional interface implementation.","title":"Why do I need a functional Interface to work with lambdas?","body":"<p>A lambda expression is nothing but a shortcut to defining an implementation of a functional interface.\nIt is equivalent to an instance of a functional interface implementation.</p>\n"},{"tags":[],"owner":{"account_id":20498730,"reputation":21,"user_id":15043089,"display_name":"Ach"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1611138856,"creation_date":1611138856,"answer_id":65807778,"question_id":33010594,"body_markdown":" - In java when an interface is implemented, all its abstract methods are needed to implemented (otherwise the implementing class will have to be an interface). \r\n- Java compiler expands lambda expression internally with a class definition with the method, and a statement to instantiate this class. Currently java doesn&#39;t support/provide a way for more than 1 lambda to be associated with 1 interface. \r\n\r\n\r\n        public class Test {\r\n            public static void main(String...args) {\r\n                TestInterface i = () -&gt; System.out.println(&quot;Hans&quot;); // this will not compile as the implementation for public void hans(String a); can not be provided/is not found\r\n                //i = (String a) -&gt; System.out.println(a); //this can not add an implementation for 2nd method to i after compilation of 1st lambda\r\n             }\r\n        }\r\n        public interface TestInterface {\r\n            public void hans();\r\n            public void hans(String a);\r\n        }\r\n \r\nThis the reason lambda in java only works with an interface with one method or functional interface.    ","title":"Why do I need a functional Interface to work with lambdas?","body":"<ul>\n<li><p>In java when an interface is implemented, all its abstract methods are needed to implemented (otherwise the implementing class will have to be an interface).</p>\n</li>\n<li><p>Java compiler expands lambda expression internally with a class definition with the method, and a statement to instantiate this class. Currently java doesn't support/provide a way for more than 1 lambda to be associated with 1 interface.</p>\n<pre><code>  public class Test {\n      public static void main(String...args) {\n          TestInterface i = () -&gt; System.out.println(&quot;Hans&quot;); // this will not compile as the implementation for public void hans(String a); can not be provided/is not found\n          //i = (String a) -&gt; System.out.println(a); //this can not add an implementation for 2nd method to i after compilation of 1st lambda\n       }\n  }\n  public interface TestInterface {\n      public void hans();\n      public void hans(String a);\n  }\n</code></pre>\n</li>\n</ul>\n<p>This the reason lambda in java only works with an interface with one method or functional interface.</p>\n"}],"owner":{"account_id":2674955,"reputation":10194,"user_id":2311557,"accept_rate":61,"display_name":"codepleb"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42710,"favorite_count":0,"down_vote_count":3,"up_vote_count":49,"accepted_answer_id":33010712,"answer_count":7,"score":46,"last_activity_date":1675432845,"creation_date":1444293263,"question_id":33010594,"body_markdown":"I think this question is already somewhere out there, but I wasn&#39;t able to find it.\r\n\r\nI don&#39;t understand, why it&#39;s necessary to have a functional interface to work with lambdas. Consider the following example:\r\n\r\n\r\n    public class Test {\r\n    \r\n    \tpublic static void main(String...args) {\r\n    \t\tTestInterface i = () -&gt; System.out.println(&quot;Hans&quot;);\r\n    //\t\ti = (String a) -&gt; System.out.println(a);\r\n    \t\t\r\n    \t\ti.hans();\r\n    //\t\ti.hans(&quot;Hello&quot;);\r\n    \t}\r\n    }\r\n\r\n    public interface TestInterface {\r\n    \tpublic void hans();\r\n    //\tpublic void hans(String a);\r\n    }\r\n\r\nThis works without problems, but if you uncomment the commented lines, it doesn&#39;t. Why? In my understanding, the compiler should be able to distinguish the two methods, since they have different input-parameters. Why do I need a functional interface and blow up my code?\r\n\r\nEDIT: The linked duplicates didn&#39;t answer my question because I&#39;m asking about different method-parameters. But I got some really useful answers here, thanks to everyone who helped! :)\r\n\r\nEDIT2: Sorry, I&#39;m obviously not a native speaker, but to precise myself:&lt;/br&gt;\r\n\r\n    public interface TestInterface {\r\n    \tpublic void hans();\t\t\t\t\t//has no input parameters&lt;/br&gt;\r\n    \tpublic void hans(String a);\t\t\t//has 1 input parameter, type String&lt;/br&gt;\r\n    \tpublic void hans(String a, int b);\t//has 2 input parameters, 1. type = String, 2. type = int&lt;/br&gt;\r\n    \tpublic void hans(int a, int b);\t\t//has also 2 input parameters, but not the same and a different order than `hans(String a, int a);`, so you could distinguish both\r\n    }\r\n    \r\n    public class Test {\r\n    \r\n    \tpublic static void main(String...args) {\r\n    \t\tTestInterface i = () -&gt; System.out.println(&quot;Hans&quot;);\r\n    \t\ti = (String a) -&gt; System.out.println(a);\r\n    \t\ti = (String a, int b) -&gt; System.out.println(a + b);\r\n    \t\ti = (int a, int b) -&gt; System.out.println(a);\r\n    \t\t\r\n    \t\ti.hans(2, 3);\t//Which method would be called? Of course the one that would take 2 integer arguments. :)\r\n    \t}\r\n    }\r\n\r\nAll I&#39;m asking is about the arguments. The method name doesn&#39;t matter, but each method takes an unique order of different arguments and because of that, Oracle could have implemented this feature instead just making a single method possible per &quot;Lambda-Interface&quot;.","title":"Why do I need a functional Interface to work with lambdas?","body":"<p>I think this question is already somewhere out there, but I wasn't able to find it.</p>\n\n<p>I don't understand, why it's necessary to have a functional interface to work with lambdas. Consider the following example:</p>\n\n<pre><code>public class Test {\n\n    public static void main(String...args) {\n        TestInterface i = () -&gt; System.out.println(\"Hans\");\n//      i = (String a) -&gt; System.out.println(a);\n\n        i.hans();\n//      i.hans(\"Hello\");\n    }\n}\n\npublic interface TestInterface {\n    public void hans();\n//  public void hans(String a);\n}\n</code></pre>\n\n<p>This works without problems, but if you uncomment the commented lines, it doesn't. Why? In my understanding, the compiler should be able to distinguish the two methods, since they have different input-parameters. Why do I need a functional interface and blow up my code?</p>\n\n<p>EDIT: The linked duplicates didn't answer my question because I'm asking about different method-parameters. But I got some really useful answers here, thanks to everyone who helped! :)</p>\n\n<p>EDIT2: Sorry, I'm obviously not a native speaker, but to precise myself:</p>\n\n<pre><code>public interface TestInterface {\n    public void hans();                 //has no input parameters&lt;/br&gt;\n    public void hans(String a);         //has 1 input parameter, type String&lt;/br&gt;\n    public void hans(String a, int b);  //has 2 input parameters, 1. type = String, 2. type = int&lt;/br&gt;\n    public void hans(int a, int b);     //has also 2 input parameters, but not the same and a different order than `hans(String a, int a);`, so you could distinguish both\n}\n\npublic class Test {\n\n    public static void main(String...args) {\n        TestInterface i = () -&gt; System.out.println(\"Hans\");\n        i = (String a) -&gt; System.out.println(a);\n        i = (String a, int b) -&gt; System.out.println(a + b);\n        i = (int a, int b) -&gt; System.out.println(a);\n\n        i.hans(2, 3);   //Which method would be called? Of course the one that would take 2 integer arguments. :)\n    }\n}\n</code></pre>\n\n<p>All I'm asking is about the arguments. The method name doesn't matter, but each method takes an unique order of different arguments and because of that, Oracle could have implemented this feature instead just making a single method possible per \"Lambda-Interface\".</p>\n"},{"tags":["java","spring","hibernate","maven"],"comments":[{"owner":{"account_id":1674243,"reputation":10043,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":0,"creation_date":1598185159,"post_id":63546844,"comment_id":112369220,"body_markdown":"Can you provide more of the error logs?","body":"Can you provide more of the error logs?"},{"owner":{"account_id":12090646,"reputation":21,"user_id":8837045,"display_name":"Tso"},"score":0,"creation_date":1598187030,"post_id":63546844,"comment_id":112369736,"body_markdown":"@Giorgi Tsiklauri full stack trace added (cropped some lines due to stackoverflow limit)","body":"@Giorgi Tsiklauri full stack trace added (cropped some lines due to stackoverflow limit)"},{"owner":{"account_id":4272276,"reputation":3564,"user_id":3493829,"display_name":"SSK"},"score":0,"creation_date":1598187707,"post_id":63546844,"comment_id":112369943,"body_markdown":"Could you please add code for `UserService ?`","body":"Could you please add code for <code>UserService ?</code>"},{"owner":{"account_id":12090646,"reputation":21,"user_id":8837045,"display_name":"Tso"},"score":0,"creation_date":1598191697,"post_id":63546844,"comment_id":112371086,"body_markdown":"@SSK I&#39;ve added the UserService class","body":"@SSK I&#39;ve added the UserService class"},{"owner":{"account_id":1674243,"reputation":10043,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":0,"creation_date":1598193087,"post_id":63546844,"comment_id":112371499,"body_markdown":"Now add `DbService` class, please. Some dependency can&#39;t be resolved..","body":"Now add <code>DbService</code> class, please. Some dependency can&#39;t be resolved.."},{"owner":{"account_id":4272276,"reputation":3564,"user_id":3493829,"display_name":"SSK"},"score":0,"creation_date":1598196853,"post_id":63546844,"comment_id":112372688,"body_markdown":"You need to create the class with `@Configuration` one of the below answers will work in your case. Classes `@Configuration` beans created first then other beans will be created","body":"You need to create the class with <code>@Configuration</code> one of the below answers will work in your case. Classes <code>@Configuration</code> beans created first then other beans will be created"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1598251608,"post_id":63546844,"comment_id":112385784,"body_markdown":"If this is a Spring Boot application is is a terrible one (or at least the tutorial). You can (and should) remove the `DataSource` bean, Spring Boot creates it for you. You can remove the HikariCP and Jackson dependencies, those are already part of other dependencies. And your code should really be using a `JdbcTemplate`.","body":"If this is a Spring Boot application is is a terrible one (or at least the tutorial). You can (and should) remove the <code>DataSource</code> bean, Spring Boot creates it for you. You can remove the HikariCP and Jackson dependencies, those are already part of other dependencies. And your code should really be using a <code>JdbcTemplate</code>."}],"answers":[{"tags":[],"owner":{"account_id":2734183,"reputation":715,"user_id":2357209,"display_name":"Onur Başt&#252;rk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1598187751,"creation_date":1598187751,"answer_id":63547281,"question_id":63546844,"body_markdown":"May be you should check the Heroku tutorial again. It says that you have to add a configuration bean to your app! It means that you need at least one class with @Configuration. The configuration bean at the tutorial is as follows:\r\n\r\n    package com.example.demo;\r\n\r\n    import com.zaxxer.hikari.*;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.context.annotation.*;\r\n    import javax.sql.DataSource;\r\n\r\n    @Configuration\r\n    public class DatabaseConfig {\r\n    \r\n      @Value(&quot;${spring.datasource.url}&quot;)\r\n      private String dbUrl;\r\n    \r\n      @Bean\r\n      public DataSource dataSource() {\r\n          HikariConfig config = new HikariConfig();\r\n          config.setJdbcUrl(dbUrl);\r\n          return new HikariDataSource(config);\r\n      }\r\n    }","title":"Cannot run spring boot app after adding Jpa maven dependency","body":"<p>May be you should check the Heroku tutorial again. It says that you have to add a configuration bean to your app! It means that you need at least one class with @Configuration. The configuration bean at the tutorial is as follows:</p>\n<pre><code>package com.example.demo;\n\nimport com.zaxxer.hikari.*;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.*;\nimport javax.sql.DataSource;\n\n@Configuration\npublic class DatabaseConfig {\n\n  @Value(&quot;${spring.datasource.url}&quot;)\n  private String dbUrl;\n\n  @Bean\n  public DataSource dataSource() {\n      HikariConfig config = new HikariConfig();\n      config.setJdbcUrl(dbUrl);\n      return new HikariDataSource(config);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3238523,"reputation":509,"user_id":2732094,"accept_rate":50,"display_name":"SkillsIndexOutOfBounds"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1598191834,"creation_date":1598191834,"answer_id":63547930,"question_id":63546844,"body_markdown":"@Configuration annotated class is used by JavaConfig as a source of bean definitions. You need to create configuration class and provide method dataSource() inside that to create bean.\r\n\r\n   \r\n\r\n     @Configuration\r\n    public class DatabaseConfig {\r\n    \r\n        @Value(&quot;${spring.datasource.url}&quot;)\r\n        private String dbUrl;\r\n    \r\n        @Bean\r\n        public DataSource dataSource() throws SQLException {\r\n            if (dbUrl == null || dbUrl.isEmpty()) {\r\n                return new HikariDataSource();\r\n            } else {\r\n                HikariConfig config = new HikariConfig();\r\n                config.setJdbcUrl(dbUrl);\r\n                return new HikariDataSource(config);\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nFor more information here is [link](https://docs.spring.io/spring-javaconfig/docs/1.0.0.m3/reference/html/creating-bean-definitions.html)\r\n\r\n","title":"Cannot run spring boot app after adding Jpa maven dependency","body":"<p>@Configuration annotated class is used by JavaConfig as a source of bean definitions. You need to create configuration class and provide method dataSource() inside that to create bean.</p>\n<pre><code> @Configuration\npublic class DatabaseConfig {\n\n    @Value(&quot;${spring.datasource.url}&quot;)\n    private String dbUrl;\n\n    @Bean\n    public DataSource dataSource() throws SQLException {\n        if (dbUrl == null || dbUrl.isEmpty()) {\n            return new HikariDataSource();\n        } else {\n            HikariConfig config = new HikariConfig();\n            config.setJdbcUrl(dbUrl);\n            return new HikariDataSource(config);\n        }\n    }\n\n}\n</code></pre>\n<p>For more information here is <a href=\"https://docs.spring.io/spring-javaconfig/docs/1.0.0.m3/reference/html/creating-bean-definitions.html\" rel=\"nofollow noreferrer\">link</a></p>\n"},{"tags":[],"owner":{"account_id":8935549,"reputation":1,"user_id":6666495,"display_name":"&#202;nio Lemos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675432827,"creation_date":1675171199,"answer_id":75297793,"question_id":63546844,"body_markdown":"If you are following the Heroku Getting Started just delete in `Main.java` file this attributes:\r\n```\r\n  @Value(&quot;${spring.datasource.url}&quot;)\r\n  private String dbUrl;\r\n\r\n  @Autowired\r\n  private DataSource dataSource;\r\n```\r\nSpring already creates theam.","title":"Cannot run spring boot app after adding Jpa maven dependency","body":"<p>If you are following the Heroku Getting Started just delete in <code>Main.java</code> file this attributes:</p>\n<pre><code>  @Value(&quot;${spring.datasource.url}&quot;)\n  private String dbUrl;\n\n  @Autowired\n  private DataSource dataSource;\n</code></pre>\n<p>Spring already creates theam.</p>\n"}],"owner":{"account_id":12090646,"reputation":21,"user_id":8837045,"display_name":"Tso"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":593,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1675432827,"creation_date":1598184995,"question_id":63546844,"body_markdown":"I started a spring boot app based on the heroku&#39;s [sample app](https://github.com/heroku/java-getting-started), following their [tutorial](https://devcenter.heroku.com/articles/deploying-spring-boot-apps-to-heroku#connecting-to-a-database).\r\n\r\nI&#39;m running a postgres docker container to which the app can connect correctly. Now I&#39;d like to use Hibernate (following this [Baeldung guide](https://www.baeldung.com/spring-boot-hibernate) but when I add the Jpa dependency :\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\nThen I get the following error upon running the app : \r\n```\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry&#39; available\r\n```\r\n\r\nI don&#39;t understand this error and can&#39;t find much about it (or I don&#39;t understand). I was suggested to check the config, although I&#39;m not sure what I would missing. \r\n\r\nHere are some of the files in the project :\r\n\r\n**application.properties**\r\n```\r\n########## Original config (Heroku template)\r\nspring.datasource.url: jdbc:postgresql://localhost:5432/postgres?user=postgres&amp;password=postgres\r\nspring.datasource.hikari.connection-timeout=30000\r\nspring.datasource.hikari.maximum-pool-size=10\r\n\r\nspring.thymeleaf.mode=HTML\r\nlogging.level.org.springframework=INFO\r\nspring.profiles.active=production\r\nserver.port=${PORT:5000}\r\n```\r\n\r\n**pom.xml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n  &lt;artifactId&gt;java-getting-started&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0&lt;/version&gt;\r\n\r\n  &lt;parent&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;2.3.0.RELEASE&lt;/version&gt;\r\n    &lt;relativePath/&gt;\r\n  &lt;/parent&gt;\r\n  &lt;name&gt;java-getting-started&lt;/name&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    &lt;webjars-bootstrap.version&gt;4.1.3&lt;/webjars-bootstrap.version&gt;\r\n    &lt;webjars-jquery-ui.version&gt;1.12.1&lt;/webjars-jquery-ui.version&gt;\r\n    &lt;webjars-jquery.version&gt;3.3.1-1&lt;/webjars-jquery.version&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n      &lt;exclusions&gt;\r\n      \t&lt;exclusion&gt;\r\n      \t\t&lt;groupId&gt;nz.net.ultraq.thymeleaf&lt;/groupId&gt;\r\n      \t\t&lt;artifactId&gt;thymeleaf-layout-dialect&lt;/artifactId&gt;\r\n      \t&lt;/exclusion&gt;\r\n      &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n      &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\r\n      &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jquery&lt;/artifactId&gt;\r\n      &lt;version&gt;${webjars-jquery.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jquery-ui&lt;/artifactId&gt;\r\n      &lt;version&gt;${webjars-jquery-ui.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n      &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\r\n      &lt;version&gt;${webjars-bootstrap.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n      &lt;artifactId&gt;webjars-locator&lt;/artifactId&gt;\r\n      &lt;version&gt;0.30&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n      &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- additional dependencies --&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n      &lt;version&gt;2.11.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n      &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n      &lt;version&gt;2.8.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;build-info&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n              &lt;additionalProperties&gt;\r\n                &lt;encoding.source&gt;${project.build.sourceEncoding}&lt;/encoding.source&gt;\r\n                &lt;encoding.reporting&gt;${project.reporting.outputEncoding}&lt;/encoding.reporting&gt;\r\n                &lt;java.source&gt;${maven.compiler.source}&lt;/java.source&gt;\r\n                &lt;java.target&gt;${maven.compiler.target}&lt;/java.target&gt;\r\n              &lt;/additionalProperties&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n**DbService.java** service to connect to db\r\n```\r\npackage com.example.service;\r\n\r\nimport com.zaxxer.hikari.HikariConfig;\r\nimport com.zaxxer.hikari.HikariDataSource;\r\n\r\nimport javax.sql.DataSource;\r\nimport java.sql.Connection;\r\nimport java.sql.SQLException;\r\nimport java.sql.Statement;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\npublic class DbService {\r\n\r\n    @Value(&quot;${spring.datasource.url}&quot;)\r\n    private String dbUrl;\r\n\r\n    @Autowired\r\n    private DataSource dataSource;\r\n\r\n    public List&lt;User&gt; fetchUsers(String query) {\r\n\r\n        try (Connection connection = dataSource.getConnection()) {\r\n            Statement stmt = connection.createStatement();\r\n            ResultSet resultSet = stmt.executeQuery(query);\r\n\r\n            List&lt;User&gt; output = new ArrayList&lt;&gt;();\r\n            while (resultSet.next()) {\r\n                User user = new User();\r\n                user.setId(Long.valueOf(resultSet.getString(&quot;id&quot;)));\r\n                user.setTitle(resultSet.getString(&quot;name&quot;));                \r\n\r\n                output.add(user);\r\n            }\r\n\r\n            return output;\r\n\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Oops : &quot; + e);\r\n        }\r\n        return null;\r\n    }\r\n    \r\n    @Bean\r\n    public DataSource dataSource() throws SQLException {\r\n        if (dbUrl == null || dbUrl.isEmpty()) {\r\n            return new HikariDataSource();\r\n        } else {\r\n            HikariConfig config = new HikariConfig();\r\n            config.setJdbcUrl(dbUrl);\r\n            return new HikariDataSource(config);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\n**Main.java**\r\n```\r\npackage com.example;\r\n\r\n@Controller\r\n@SpringBootApplication\r\npublic class Main {\r\n    \r\n    @Autowired\r\n    private UserService userService;\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        SpringApplication.run(Main.class, args);\r\n    }\r\n\r\n    @GetMapping(value = &quot;/listUsers&quot;)\r\n    @ResponseBody\r\n    public String listUsers() {\r\n\r\n        User user = this.userService.listUsers().stream().findFirst().orElse(null);\r\n        return user != null ? user.getName() : &quot;No user&quot;;\r\n    }\r\n\r\n}\r\n```\r\n**UserService.java**\r\n```\r\n@Service\r\npublic class UserService {\r\n\r\n    @Autowired\r\n    private DbService dbService;\r\n\r\n    public List&lt;User&gt; listUsers() {\r\n\r\n        StringBuilder fetchQuery = new StringBuilder();\r\n        fetchQuery.append(&quot;SELECT * FROM user&quot;);\r\n\r\n        System.out.println(&quot;Fetching with query : &quot; + fetchQuery.toString());\r\n        List&lt;User&gt; users = this.dbService.fetchUsers(fetchQuery.toString());\r\n\r\n        return users;\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nMy IDE (IntelliJ) correctly imports the dependency, and I can use various hibernate annotations on my models, but the issue is when running the app. Any advice is greatly welcome, thanks!\r\n\r\nEdit: full error stack\r\n```\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration&#39;: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dbService&#39;: Unsatisfied dependency expressed through field &#39;dataSource&#39;; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name &#39;dataSource&#39;: Requested bean is currently in creation: Is there an unresolvable circular reference?\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:228) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1358) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1204) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:409) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1338) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1108) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dbService&#39;: Unsatisfied dependency expressed through field &#39;dataSource&#39;; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name &#39;dataSource&#39;: Requested bean is currently in creation: Is there an unresolvable circular reference?\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:643) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:130) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1422) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:594) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:409) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1338) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\t... 34 common frames omitted\r\nCaused by: org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name &#39;dataSource&#39;: Requested bean is currently in creation: Is there an unresolvable circular reference?\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:347) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:219) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1306) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\t... 57 common frames omitted\r\n\r\n2020-08-23 14:42:50.784  WARN 77261 --- [  restartedMain] o.s.boot.SpringApplication               : Unable to close ApplicationContext\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;applicationAvailability&#39; defined in class path resource [org/springframework/boot/autoconfigure/availability/ApplicationAvailabilityAutoConfiguration.class]: BeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration&#39;: Initialization of bean failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry&#39; available\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:512) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.context.event.AbstractApplicationEventMulticaster.retrieveApplicationListeners(AbstractApplicationEventMulticaster.java:245) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:197) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:134) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:403) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:360) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.boot.availability.AvailabilityChangeEvent.publish(AvailabilityChangeEvent.java:81) ~[spring-boot-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n\tat org.springframework.boot.availability.AvailabilityChangeEvent.publish(AvailabilityChangeEvent.java:67) ~[spring-boot-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:167) ~[spring-boot-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:978) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.handleRunFailure(SpringApplication.java:814) ~[spring-boot-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1237) ~[spring-boot-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration&#39;: Initialization of bean failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry&#39; available\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:603) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:409) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1338) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.aop.framework.autoproxy.BeanFactoryAdvisorRetrievalHelper.findAdvisorBeans(BeanFactoryAdvisorRetrievalHelper.java:91) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findCandidateAdvisors(AbstractAdvisorAutoProxyCreator.java:109) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\t... 23 common frames omitted\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry&#39; available\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:814) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1282) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:297) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor.postProcessBeforeInitialization(ConfigurationClassPostProcessor.java:456) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:416) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\t... 45 common frames omitted\r\n```","title":"Cannot run spring boot app after adding Jpa maven dependency","body":"<p>I started a spring boot app based on the heroku's <a href=\"https://github.com/heroku/java-getting-started\" rel=\"nofollow noreferrer\">sample app</a>, following their <a href=\"https://devcenter.heroku.com/articles/deploying-spring-boot-apps-to-heroku#connecting-to-a-database\" rel=\"nofollow noreferrer\">tutorial</a>.</p>\n<p>I'm running a postgres docker container to which the app can connect correctly. Now I'd like to use Hibernate (following this <a href=\"https://www.baeldung.com/spring-boot-hibernate\" rel=\"nofollow noreferrer\">Baeldung guide</a> but when I add the Jpa dependency :</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Then I get the following error upon running the app :</p>\n<pre><code>Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry' available\n</code></pre>\n<p>I don't understand this error and can't find much about it (or I don't understand). I was suggested to check the config, although I'm not sure what I would missing.</p>\n<p>Here are some of the files in the project :</p>\n<p><strong>application.properties</strong></p>\n<pre><code>########## Original config (Heroku template)\nspring.datasource.url: jdbc:postgresql://localhost:5432/postgres?user=postgres&amp;password=postgres\nspring.datasource.hikari.connection-timeout=30000\nspring.datasource.hikari.maximum-pool-size=10\n\nspring.thymeleaf.mode=HTML\nlogging.level.org.springframework=INFO\nspring.profiles.active=production\nserver.port=${PORT:5000}\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.example&lt;/groupId&gt;\n  &lt;artifactId&gt;java-getting-started&lt;/artifactId&gt;\n  &lt;version&gt;1.0&lt;/version&gt;\n\n  &lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.3.0.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt;\n  &lt;/parent&gt;\n  &lt;name&gt;java-getting-started&lt;/name&gt;\n\n  &lt;properties&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;webjars-bootstrap.version&gt;4.1.3&lt;/webjars-bootstrap.version&gt;\n    &lt;webjars-jquery-ui.version&gt;1.12.1&lt;/webjars-jquery-ui.version&gt;\n    &lt;webjars-jquery.version&gt;3.3.1-1&lt;/webjars-jquery.version&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n      &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;nz.net.ultraq.thymeleaf&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf-layout-dialect&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n      &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n      &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.zaxxer&lt;/groupId&gt;\n      &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n      &lt;artifactId&gt;jquery&lt;/artifactId&gt;\n      &lt;version&gt;${webjars-jquery.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n      &lt;artifactId&gt;jquery-ui&lt;/artifactId&gt;\n      &lt;version&gt;${webjars-jquery-ui.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n      &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\n      &lt;version&gt;${webjars-bootstrap.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n      &lt;artifactId&gt;webjars-locator&lt;/artifactId&gt;\n      &lt;version&gt;0.30&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n      &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- additional dependencies --&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n      &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n      &lt;version&gt;2.11.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n      &lt;artifactId&gt;gson&lt;/artifactId&gt;\n      &lt;version&gt;2.8.6&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;build-info&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n              &lt;additionalProperties&gt;\n                &lt;encoding.source&gt;${project.build.sourceEncoding}&lt;/encoding.source&gt;\n                &lt;encoding.reporting&gt;${project.reporting.outputEncoding}&lt;/encoding.reporting&gt;\n                &lt;java.source&gt;${maven.compiler.source}&lt;/java.source&gt;\n                &lt;java.target&gt;${maven.compiler.target}&lt;/java.target&gt;\n              &lt;/additionalProperties&gt;\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong>DbService.java</strong> service to connect to db</p>\n<pre><code>package com.example.service;\n\nimport com.zaxxer.hikari.HikariConfig;\nimport com.zaxxer.hikari.HikariDataSource;\n\nimport javax.sql.DataSource;\nimport java.sql.Connection;\nimport java.sql.SQLException;\nimport java.sql.Statement;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class DbService {\n\n    @Value(&quot;${spring.datasource.url}&quot;)\n    private String dbUrl;\n\n    @Autowired\n    private DataSource dataSource;\n\n    public List&lt;User&gt; fetchUsers(String query) {\n\n        try (Connection connection = dataSource.getConnection()) {\n            Statement stmt = connection.createStatement();\n            ResultSet resultSet = stmt.executeQuery(query);\n\n            List&lt;User&gt; output = new ArrayList&lt;&gt;();\n            while (resultSet.next()) {\n                User user = new User();\n                user.setId(Long.valueOf(resultSet.getString(&quot;id&quot;)));\n                user.setTitle(resultSet.getString(&quot;name&quot;));                \n\n                output.add(user);\n            }\n\n            return output;\n\n        } catch (Exception e) {\n            System.out.println(&quot;Oops : &quot; + e);\n        }\n        return null;\n    }\n    \n    @Bean\n    public DataSource dataSource() throws SQLException {\n        if (dbUrl == null || dbUrl.isEmpty()) {\n            return new HikariDataSource();\n        } else {\n            HikariConfig config = new HikariConfig();\n            config.setJdbcUrl(dbUrl);\n            return new HikariDataSource(config);\n        }\n    }\n\n}\n</code></pre>\n<p><strong>Main.java</strong></p>\n<pre><code>package com.example;\n\n@Controller\n@SpringBootApplication\npublic class Main {\n    \n    @Autowired\n    private UserService userService;\n\n    public static void main(String[] args) throws Exception {\n        SpringApplication.run(Main.class, args);\n    }\n\n    @GetMapping(value = &quot;/listUsers&quot;)\n    @ResponseBody\n    public String listUsers() {\n\n        User user = this.userService.listUsers().stream().findFirst().orElse(null);\n        return user != null ? user.getName() : &quot;No user&quot;;\n    }\n\n}\n</code></pre>\n<p><strong>UserService.java</strong></p>\n<pre><code>@Service\npublic class UserService {\n\n    @Autowired\n    private DbService dbService;\n\n    public List&lt;User&gt; listUsers() {\n\n        StringBuilder fetchQuery = new StringBuilder();\n        fetchQuery.append(&quot;SELECT * FROM user&quot;);\n\n        System.out.println(&quot;Fetching with query : &quot; + fetchQuery.toString());\n        List&lt;User&gt; users = this.dbService.fetchUsers(fetchQuery.toString());\n\n        return users;\n    }\n\n}\n</code></pre>\n<p>My IDE (IntelliJ) correctly imports the dependency, and I can use various hibernate annotations on my models, but the issue is when running the app. Any advice is greatly welcome, thanks!</p>\n<p>Edit: full error stack</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration': Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dbService': Unsatisfied dependency expressed through field 'dataSource'; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'dataSource': Requested bean is currently in creation: Is there an unresolvable circular reference?\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:228) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1358) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1204) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:409) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1338) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1108) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dbService': Unsatisfied dependency expressed through field 'dataSource'; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'dataSource': Requested bean is currently in creation: Is there an unresolvable circular reference?\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:643) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:130) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1422) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:594) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:409) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1338) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    ... 34 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'dataSource': Requested bean is currently in creation: Is there an unresolvable circular reference?\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:347) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:219) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1306) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    ... 57 common frames omitted\n\n2020-08-23 14:42:50.784  WARN 77261 --- [  restartedMain] o.s.boot.SpringApplication               : Unable to close ApplicationContext\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'applicationAvailability' defined in class path resource [org/springframework/boot/autoconfigure/availability/ApplicationAvailabilityAutoConfiguration.class]: BeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration': Initialization of bean failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry' available\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:512) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.context.event.AbstractApplicationEventMulticaster.retrieveApplicationListeners(AbstractApplicationEventMulticaster.java:245) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:197) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:134) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:403) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:360) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.boot.availability.AvailabilityChangeEvent.publish(AvailabilityChangeEvent.java:81) ~[spring-boot-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.boot.availability.AvailabilityChangeEvent.publish(AvailabilityChangeEvent.java:67) ~[spring-boot-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:167) ~[spring-boot-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:978) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.boot.SpringApplication.handleRunFailure(SpringApplication.java:814) ~[spring-boot-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:325) ~[spring-boot-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1237) ~[spring-boot-2.3.0.RELEASE.jar:2.3.0.RELEASE]\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration': Initialization of bean failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry' available\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:603) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:409) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1338) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.aop.framework.autoproxy.BeanFactoryAdvisorRetrievalHelper.findAdvisorBeans(BeanFactoryAdvisorRetrievalHelper.java:91) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findCandidateAdvisors(AbstractAdvisorAutoProxyCreator.java:109) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    ... 23 common frames omitted\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'org.springframework.context.annotation.ConfigurationClassPostProcessor.importRegistry' available\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:814) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1282) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:297) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor.postProcessBeforeInitialization(ConfigurationClassPostProcessor.java:456) ~[spring-context-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:416) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595) ~[spring-beans-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    ... 45 common frames omitted\n</code></pre>\n"},{"tags":["java","caffeine"],"answers":[{"tags":[],"owner":{"account_id":10326,"reputation":9293,"user_id":19450,"display_name":"Ben Manes"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1589165294,"creation_date":1589165294,"answer_id":61721505,"question_id":61721386,"body_markdown":"This can be done by using a custom expiration policy and leverage an unreachable duration. The maximum duration is `Long.MAX_VALUE`, which is 292 years in nanoseconds. Assuming your record holds when (and if) it expires then you might configure the cache as,\r\n\r\n```java\r\nLoadingCache&lt;Key, Graph&gt; graphs = Caffeine.newBuilder()\r\n    .expireAfter(new Expiry&lt;Key, Graph&gt;() {\r\n      public long expireAfterCreate(Key key, Graph graph, long currentTime) {\r\n        if (graph.getExpiresOn() == null) {\r\n          return Long.MAX_VALUE;\r\n        }\r\n        long seconds = graph.getExpiresOn()\r\n            .minus(System.currentTimeMillis(), MILLIS)\r\n            .toEpochSecond();\r\n        return TimeUnit.SECONDS.toNanos(seconds);\r\n      }\r\n      public long expireAfterUpdate(Key key, Graph graph, \r\n          long currentTime, long currentDuration) {\r\n        return currentDuration;\r\n      }\r\n      public long expireAfterRead(Key key, Graph graph,\r\n          long currentTime, long currentDuration) {\r\n        return currentDuration;\r\n      }\r\n    })\r\n    .build(key -&gt; createExpensiveGraph(key));\r\n```","title":"Caffeine Cache - Specify expiry for an entry","body":"<p>This can be done by using a custom expiration policy and leverage an unreachable duration. The maximum duration is <code>Long.MAX_VALUE</code>, which is 292 years in nanoseconds. Assuming your record holds when (and if) it expires then you might configure the cache as,</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>LoadingCache&lt;Key, Graph&gt; graphs = Caffeine.newBuilder()\n    .expireAfter(new Expiry&lt;Key, Graph&gt;() {\n      public long expireAfterCreate(Key key, Graph graph, long currentTime) {\n        if (graph.getExpiresOn() == null) {\n          return Long.MAX_VALUE;\n        }\n        long seconds = graph.getExpiresOn()\n            .minus(System.currentTimeMillis(), MILLIS)\n            .toEpochSecond();\n        return TimeUnit.SECONDS.toNanos(seconds);\n      }\n      public long expireAfterUpdate(Key key, Graph graph, \n          long currentTime, long currentDuration) {\n        return currentDuration;\n      }\n      public long expireAfterRead(Key key, Graph graph,\n          long currentTime, long currentDuration) {\n        return currentDuration;\n      }\n    })\n    .build(key -&gt; createExpensiveGraph(key));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19560959,"reputation":11,"user_id":14314186,"display_name":"Ben HMIDA Bassem"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1675432628,"creation_date":1675432628,"answer_id":75336715,"question_id":61721386,"body_markdown":"I am currently working on the subject, I am inspired by this few articles, and I share with you the solution that worked well for me.\r\n\r\n    @EnableCaching\r\n    @Configuration\r\n    public class CaffeineConfiguration {\r\n    \r\n      @Autowired\r\n      private ApplicationProperties applicationProperties;\r\n    \r\n    \r\n      @Bean\r\n      public Caffeine caffeineConfig() {\r\n        return Caffeine.newBuilder().expireAfter(new Expiry&lt;String, Object&gt;() {\r\n          @Override\r\n          public long expireAfterCreate(String key, Object value, long currentTime) {\r\n            long customExpiry = applicationProperties.getCache().getEhcache().getTimeToLiveSeconds();\r\n            if (key.startsWith(&quot;PREFIX&quot;)) {\r\n              customExpiry = 60;\r\n            }\r\n            return TimeUnit.SECONDS.toNanos(customExpiry);\r\n          }\r\n    \r\n          @Override\r\n          public long expireAfterUpdate(String key, Object value, long currentTime,\r\n              long currentDuration) {\r\n            return currentDuration;\r\n          }\r\n    \r\n          @Override\r\n          public long expireAfterRead(String key, Object value, long currentTime,\r\n              long currentDuration) {\r\n            return currentDuration;\r\n          }\r\n        });\r\n    \r\n      }\r\n    \r\n    \r\n      @Bean\r\n      public CacheManager cacheManager(Caffeine caffeine) {\r\n        CaffeineCacheManager caffeineCacheManager = new CaffeineCacheManager();\r\n        caffeineCacheManager.getCache(PROVIDER_RESPONSE);\r\n        caffeineCacheManager.getCache(BCU_RESPONSE);\r\n        caffeineCacheManager.setCaffeine(caffeine);\r\n        return caffeineCacheManager;\r\n      }\r\n    \r\n    }","title":"Caffeine Cache - Specify expiry for an entry","body":"<p>I am currently working on the subject, I am inspired by this few articles, and I share with you the solution that worked well for me.</p>\n<pre><code>@EnableCaching\n@Configuration\npublic class CaffeineConfiguration {\n\n  @Autowired\n  private ApplicationProperties applicationProperties;\n\n\n  @Bean\n  public Caffeine caffeineConfig() {\n    return Caffeine.newBuilder().expireAfter(new Expiry&lt;String, Object&gt;() {\n      @Override\n      public long expireAfterCreate(String key, Object value, long currentTime) {\n        long customExpiry = applicationProperties.getCache().getEhcache().getTimeToLiveSeconds();\n        if (key.startsWith(&quot;PREFIX&quot;)) {\n          customExpiry = 60;\n        }\n        return TimeUnit.SECONDS.toNanos(customExpiry);\n      }\n\n      @Override\n      public long expireAfterUpdate(String key, Object value, long currentTime,\n          long currentDuration) {\n        return currentDuration;\n      }\n\n      @Override\n      public long expireAfterRead(String key, Object value, long currentTime,\n          long currentDuration) {\n        return currentDuration;\n      }\n    });\n\n  }\n\n\n  @Bean\n  public CacheManager cacheManager(Caffeine caffeine) {\n    CaffeineCacheManager caffeineCacheManager = new CaffeineCacheManager();\n    caffeineCacheManager.getCache(PROVIDER_RESPONSE);\n    caffeineCacheManager.getCache(BCU_RESPONSE);\n    caffeineCacheManager.setCaffeine(caffeine);\n    return caffeineCacheManager;\n  }\n\n}\n</code></pre>\n"}],"owner":{"account_id":360879,"reputation":2866,"user_id":703139,"accept_rate":58,"display_name":"tsar2512"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8031,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":61721505,"answer_count":2,"score":8,"last_activity_date":1675432628,"creation_date":1589164271,"question_id":61721386,"body_markdown":"I&#39;m trying to further my understanding of the [caffeine cache](https://github.com/ben-manes/caffeine). I was wondering if there is a way to specify a timeout for an entry that&#39;s populated in the cache, but have no time based expiry for the rest of the records. \r\n\r\nEssentially I would like to have the following interface:\r\n\r\n`put(key, value, timeToExpiry)`// enter a key and value with a specified timeToExpiry\r\n\r\n`put(key, value)` // enter a key value with no timeToExpiry\r\n\r\nI can write the interfaces and plumbing, but I&#39;d like to understand how I can configure caffeine for both of the above requirements. I&#39;m also open to have two separate instances of the caffeine cache. ","title":"Caffeine Cache - Specify expiry for an entry","body":"<p>I'm trying to further my understanding of the <a href=\"https://github.com/ben-manes/caffeine\" rel=\"noreferrer\">caffeine cache</a>. I was wondering if there is a way to specify a timeout for an entry that's populated in the cache, but have no time based expiry for the rest of the records. </p>\n\n<p>Essentially I would like to have the following interface:</p>\n\n<p><code>put(key, value, timeToExpiry)</code>// enter a key and value with a specified timeToExpiry</p>\n\n<p><code>put(key, value)</code> // enter a key value with no timeToExpiry</p>\n\n<p>I can write the interfaces and plumbing, but I'd like to understand how I can configure caffeine for both of the above requirements. I'm also open to have two separate instances of the caffeine cache. </p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":2466481,"reputation":2619,"user_id":2149453,"display_name":"Himeshgiri gosvami"},"score":0,"creation_date":1675430363,"post_id":75326123,"comment_id":132932624,"body_markdown":"why so many sysout ? use logger","body":"why so many sysout ? use logger"}],"answers":[{"tags":[],"owner":{"account_id":27629160,"reputation":11,"user_id":21088530,"display_name":"Wajih"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675379412,"creation_date":1675355506,"answer_id":75326176,"question_id":75326123,"body_markdown":"    public static List&lt;WebElement&gt; displayElementTables() {\r\n        List&lt;WebElement&gt; list =  webDriverWait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(tableExist)));        \r\n        return list;\r\n    }\r\n\r\n ","title":"Display the rest of the table after the search Selenium","body":"<pre><code>public static List&lt;WebElement&gt; displayElementTables() {\n    List&lt;WebElement&gt; list =  webDriverWait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(tableExist)));        \n    return list;\n}\n</code></pre>\n"}],"owner":{"account_id":12809345,"reputation":193,"user_id":9268070,"display_name":"BMW83"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675431896,"creation_date":1675355195,"question_id":75326123,"body_markdown":"I need to do a search with Selenium and display the results. Actually, I have a program in selenium to display a table and put a search word in the text field. And when the word is written automatically, tabulate the columns containing those words.\r\n\r\nHere’s a code from my program.\r\n\r\n    private static String searchName = &quot;//*[@id=\\&quot;searchName\\&quot;]&quot;;\r\n    private static String tableExist = &quot;//table[@role=&#39;table&#39;]/tbody/tr&quot;;\r\n    \r\n    //return if exist elements in the table\r\n    public static Boolean elementExistsInTheTableCustomer() {\r\n        return (driver.findElements(By.xpath(tableExist)).size() &gt; 0);\r\n    }\r\n    // here i put the text search\r\n    public static void enterSearchName(String nameSearchTxt) {\r\n        driver.findElement(By.xpath(searchName)).sendKeys(nameSearchTxt);\r\n    }\r\n    // this function to put 2 char to search in the table\r\n    public static void searchStringName() {\r\n        String strSearch = RandomStringUtils.randomAlphabetic(2);\r\n        System.out.println(&quot;The String search : &quot; + strSearch);\r\n        Customer.enterSearchName(strSearch);\r\n    }\r\n    public static WebElement displayElementTables() {\r\n        WebElement list =  webDriverWait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(tableExist)));        \r\n        return list;\r\n    } \r\n    \r\n    //here the test of element after and before the search name\r\n    @Test\r\n    public void GIVEN_Customers_On_Database() throws InterruptedException {\r\n        Customer.clickCustomers();\r\n        Thread.sleep(3000);\r\n        if (Customer.elementExistsInTheTableCustomer()) {\r\n            System.out.println(&quot;\\t===============================&quot;);\r\n            for (WebElement detail : Customer.displayElementTables()) {\r\n                System.out.println(&quot;\\t The elements in the table : &quot; + detail.getText());\r\n            }\r\n            System.out.println(&quot;\\t===============================&quot;);            \r\n        }\r\n        Customer.searchStringName();\r\n        // here to display if i have elements or no \r\n        for (WebElement detail : Customer.displayElementTables()) {\r\n                System.out.println(&quot;\\t The elements in the table : &quot; + detail.getText());\r\n            }\r\n    }\r\n\r\nIn the last part, I will check if he has any lines to publish. the **displayElementTables()** function in which I can receive the search result. whether I have items or not and put the result in a variable to display.\r\n    \r\n\r\n\r\n\r\n\r\n","title":"Display the rest of the table after the search Selenium","body":"<p>I need to do a search with Selenium and display the results. Actually, I have a program in selenium to display a table and put a search word in the text field. And when the word is written automatically, tabulate the columns containing those words.</p>\n<p>Here’s a code from my program.</p>\n<pre><code>private static String searchName = &quot;//*[@id=\\&quot;searchName\\&quot;]&quot;;\nprivate static String tableExist = &quot;//table[@role='table']/tbody/tr&quot;;\n\n//return if exist elements in the table\npublic static Boolean elementExistsInTheTableCustomer() {\n    return (driver.findElements(By.xpath(tableExist)).size() &gt; 0);\n}\n// here i put the text search\npublic static void enterSearchName(String nameSearchTxt) {\n    driver.findElement(By.xpath(searchName)).sendKeys(nameSearchTxt);\n}\n// this function to put 2 char to search in the table\npublic static void searchStringName() {\n    String strSearch = RandomStringUtils.randomAlphabetic(2);\n    System.out.println(&quot;The String search : &quot; + strSearch);\n    Customer.enterSearchName(strSearch);\n}\npublic static WebElement displayElementTables() {\n    WebElement list =  webDriverWait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(tableExist)));        \n    return list;\n} \n\n//here the test of element after and before the search name\n@Test\npublic void GIVEN_Customers_On_Database() throws InterruptedException {\n    Customer.clickCustomers();\n    Thread.sleep(3000);\n    if (Customer.elementExistsInTheTableCustomer()) {\n        System.out.println(&quot;\\t===============================&quot;);\n        for (WebElement detail : Customer.displayElementTables()) {\n            System.out.println(&quot;\\t The elements in the table : &quot; + detail.getText());\n        }\n        System.out.println(&quot;\\t===============================&quot;);            \n    }\n    Customer.searchStringName();\n    // here to display if i have elements or no \n    for (WebElement detail : Customer.displayElementTables()) {\n            System.out.println(&quot;\\t The elements in the table : &quot; + detail.getText());\n        }\n}\n</code></pre>\n<p>In the last part, I will check if he has any lines to publish. the <strong>displayElementTables()</strong> function in which I can receive the search result. whether I have items or not and put the result in a variable to display.</p>\n"},{"tags":["java","unity-game-engine","gradle","build"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1675500008,"post_id":75336488,"comment_id":132945663,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":16486649,"reputation":1,"user_id":11911833,"display_name":"Filippo Bravi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675431832,"creation_date":1675431476,"question_id":75336488,"body_markdown":"I&#39;ve got an android project going on and it all goes smoothly until i try to implement ads. As soon as i turn on the unity ads and install the ads package, my game doesn&#39;t build anymore and gives me this Gradle build failed error. I&#39;ve really tried anything so everything helps. Thank you.\r\n\r\nConsole errors:\r\n\r\n```\r\nConfigure project :launcher warning: C:\\Users\\fili7\\OneDrive\\Desktop\\Unity Proj\\Lio\\Library\\Bee\\Android\\Prj\\Mono2x\\Gradle\\unityLibrary\\libs\\classes.jar(com/samsung/android/gamesdk/GameSDKManager.class): major version 53 is newer than 52, the highest major version supported by this compiler. It is recommended that the compiler be upgraded. CommandInvokationFailure: Gradle build failed. C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.11f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\OpenJDK\\bin\\java.exe -classpath &quot;C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.11f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\Tools\\gradle\\lib\\gradle-launcher-6.1.1.jar&quot; org.gradle.launcher.GradleMain &quot;-Dorg.gradle.jvmargs=-Xmx4096m&quot; &quot;assembleRelease&quot; Build completed with a result of &#39;Failed&#39; in 46 seconds (46351 ms) UnityEngine.GUIUtility: ProcessEvent (int,intptr,bool&amp;) UnityEditor.BuildPlayerWindow+BuildMethodException: 4 errors at UnityEditor.BuildPlayerWindow+DefaultBuildMethods.BuildPlayer (UnityEditor.BuildPlayerOptions options) [0x002da] in :0 at UnityEditor.BuildPlayerWindow.CallBuildMethods (System.Boolean askForBuildLocation, UnityEditor.BuildOptions defaultBuildOptions) [0x00080] in :0 UnityEngine.GUIUtility: ProcessEvent (int,intptr,bool&amp;)\r\n```\r\n\r\nPretty much everything. Tried on multiple unity versions, even tried to use custom skd and ndk and gradles, nothing worked.","title":"Problem with unity gradle build (java maybe?)","body":"<p>I've got an android project going on and it all goes smoothly until i try to implement ads. As soon as i turn on the unity ads and install the ads package, my game doesn't build anymore and gives me this Gradle build failed error. I've really tried anything so everything helps. Thank you.</p>\n<p>Console errors:</p>\n<pre><code>Configure project :launcher warning: C:\\Users\\fili7\\OneDrive\\Desktop\\Unity Proj\\Lio\\Library\\Bee\\Android\\Prj\\Mono2x\\Gradle\\unityLibrary\\libs\\classes.jar(com/samsung/android/gamesdk/GameSDKManager.class): major version 53 is newer than 52, the highest major version supported by this compiler. It is recommended that the compiler be upgraded. CommandInvokationFailure: Gradle build failed. C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.11f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\OpenJDK\\bin\\java.exe -classpath &quot;C:\\Program Files\\Unity\\Hub\\Editor\\2021.3.11f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\Tools\\gradle\\lib\\gradle-launcher-6.1.1.jar&quot; org.gradle.launcher.GradleMain &quot;-Dorg.gradle.jvmargs=-Xmx4096m&quot; &quot;assembleRelease&quot; Build completed with a result of 'Failed' in 46 seconds (46351 ms) UnityEngine.GUIUtility: ProcessEvent (int,intptr,bool&amp;) UnityEditor.BuildPlayerWindow+BuildMethodException: 4 errors at UnityEditor.BuildPlayerWindow+DefaultBuildMethods.BuildPlayer (UnityEditor.BuildPlayerOptions options) [0x002da] in :0 at UnityEditor.BuildPlayerWindow.CallBuildMethods (System.Boolean askForBuildLocation, UnityEditor.BuildOptions defaultBuildOptions) [0x00080] in :0 UnityEngine.GUIUtility: ProcessEvent (int,intptr,bool&amp;)\n</code></pre>\n<p>Pretty much everything. Tried on multiple unity versions, even tried to use custom skd and ndk and gradles, nothing worked.</p>\n"},{"tags":["java","spring-boot","spring-cloud-sleuth"],"comments":[{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":1,"creation_date":1675431273,"post_id":75336414,"comment_id":132932914,"body_markdown":"I would parse that as does not work with 3.x or later, no changes expected. Only works with 2.x or lower.","body":"I would parse that as does not work with 3.x or later, no changes expected. Only works with 2.x or lower."},{"owner":{"account_id":3019275,"reputation":4542,"user_id":2560685,"accept_rate":70,"display_name":"sab"},"score":0,"creation_date":1675431444,"post_id":75336414,"comment_id":132932958,"body_markdown":"By no change expected, you mean they don&#39;t plan to update the lib to allow springboot 3 ?","body":"By no change expected, you mean they don&#39;t plan to update the lib to allow springboot 3 ?"},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":1,"creation_date":1675431541,"post_id":75336414,"comment_id":132932992,"body_markdown":"Correct, not even planned.","body":"Correct, not even planned."}],"answers":[{"tags":[],"owner":{"account_id":1976110,"reputation":10792,"user_id":1773866,"display_name":"Marcin Grzejszczak"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675431732,"creation_date":1675431732,"answer_id":75336541,"question_id":75336414,"body_markdown":"Spring Cloud Sleuth is not planned to work with Spring Boot 3. You must migrate to Micrometer Tracing. Here you can find a link to the migration guide https://github.com/micrometer-metrics/tracing/wiki/Spring-Cloud-Sleuth-3.1-Migration-Guide","title":"Spring Cloud Sleuth and spring boot 3 and the english language","body":"<p>Spring Cloud Sleuth is not planned to work with Spring Boot 3. You must migrate to Micrometer Tracing. Here you can find a link to the migration guide <a href=\"https://github.com/micrometer-metrics/tracing/wiki/Spring-Cloud-Sleuth-3.1-Migration-Guide\" rel=\"nofollow noreferrer\">https://github.com/micrometer-metrics/tracing/wiki/Spring-Cloud-Sleuth-3.1-Migration-Guide</a></p>\n"}],"owner":{"account_id":3019275,"reputation":4542,"user_id":2560685,"accept_rate":70,"display_name":"sab"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":978,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75336541,"answer_count":1,"score":1,"last_activity_date":1675431732,"creation_date":1675430971,"question_id":75336414,"body_markdown":"Sorry for asking that. I&#39;m not an English speaker, and Stackoverflow is the only  website I have access to at my work\r\n\r\nI need to use Spring Cloud Sleuth in a project currently in spring boot 2, but who will pass to spring boot 3 in a month?\r\n\r\nI was reading the Spring Cloud Sleuth documentation and noticed that:\r\n\r\n&gt; Spring Cloud Sleuth will not work with Spring Boot 3.x onward. The\r\n&gt; last major version of Spring Boot that Sleuth will support is 2.x.\r\n\r\nhttps://docs.spring.io/spring-cloud-sleuth/docs/current-SNAPSHOT/reference/html/index.html\r\n\r\nDoes this mean that the library is not currently compatible with Spring Boot 3 and there is no plan to make it work, or is work being done to make it compatible?\r\n\r\n\r\n&quot;My coworkers nor I am familiar with the meaning of &quot;onward&quot; in this context. The word does not translate well in my language.&quot;","title":"Spring Cloud Sleuth and spring boot 3 and the english language","body":"<p>Sorry for asking that. I'm not an English speaker, and Stackoverflow is the only  website I have access to at my work</p>\n<p>I need to use Spring Cloud Sleuth in a project currently in spring boot 2, but who will pass to spring boot 3 in a month?</p>\n<p>I was reading the Spring Cloud Sleuth documentation and noticed that:</p>\n<blockquote>\n<p>Spring Cloud Sleuth will not work with Spring Boot 3.x onward. The\nlast major version of Spring Boot that Sleuth will support is 2.x.</p>\n</blockquote>\n<p><a href=\"https://docs.spring.io/spring-cloud-sleuth/docs/current-SNAPSHOT/reference/html/index.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-cloud-sleuth/docs/current-SNAPSHOT/reference/html/index.html</a></p>\n<p>Does this mean that the library is not currently compatible with Spring Boot 3 and there is no plan to make it work, or is work being done to make it compatible?</p>\n<p>&quot;My coworkers nor I am familiar with the meaning of &quot;onward&quot; in this context. The word does not translate well in my language.&quot;</p>\n"},{"tags":["java","json","jax-rs","wildfly","thorntail"],"answers":[{"tags":[],"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675431705,"creation_date":1675431705,"answer_id":75336537,"question_id":75335499,"body_markdown":"You can use `javax.json.bind.annotation.JsonbNillable` annotation:\r\n```java\r\n@JsonbNillable\r\npublic static class PersonApi {\r\n    private String name;\r\n    private Integer age;\r\n    //constructors, getters and setters are omitted\r\n}\r\n```","title":"How to send null values using jaxrs-jsonb (JSON-B | JSR-367)?","body":"<p>You can use <code>javax.json.bind.annotation.JsonbNillable</code> annotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonbNillable\npublic static class PersonApi {\n    private String name;\n    private Integer age;\n    //constructors, getters and setters are omitted\n}\n</code></pre>\n"}],"owner":{"account_id":21410604,"reputation":355,"user_id":15770918,"display_name":"leandro.dev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675431705,"creation_date":1675425946,"question_id":75335499,"body_markdown":"I am working in a legacy system with Java/EJB/JPA/thorntail/wildfly.\r\n\r\nThe project has:\r\n\r\n```\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;io.thorntail&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxrs-jsonb&lt;/artifactId&gt;\r\n        &lt;version&gt;2.6.0.Final&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n```\r\n\r\nJSON-B provides support for JSON Processing according to JSR-367.\r\n\r\nI need to send null values in API/Rest. Anything similar to `@JsonInclude(Include.ALWAYS)` for Jackson.\r\n\r\nExample that I need:\r\n```\r\nPersonApi with name=Any, age=null\r\n\r\n{\r\n    &quot;name&quot;: &quot;Any&quot;,\r\n    &quot;age&quot;: null\r\n}\r\n```\r\n\r\nIs there some config to do this? ... some annotation, some config to load and resolve it?","title":"How to send null values using jaxrs-jsonb (JSON-B | JSR-367)?","body":"<p>I am working in a legacy system with Java/EJB/JPA/thorntail/wildfly.</p>\n<p>The project has:</p>\n<pre><code>      &lt;dependency&gt;\n        &lt;groupId&gt;io.thorntail&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxrs-jsonb&lt;/artifactId&gt;\n        &lt;version&gt;2.6.0.Final&lt;/version&gt;\n      &lt;/dependency&gt;\n</code></pre>\n<p>JSON-B provides support for JSON Processing according to JSR-367.</p>\n<p>I need to send null values in API/Rest. Anything similar to <code>@JsonInclude(Include.ALWAYS)</code> for Jackson.</p>\n<p>Example that I need:</p>\n<pre><code>PersonApi with name=Any, age=null\n\n{\n    &quot;name&quot;: &quot;Any&quot;,\n    &quot;age&quot;: null\n}\n</code></pre>\n<p>Is there some config to do this? ... some annotation, some config to load and resolve it?</p>\n"},{"tags":["java","spring","spring-boot","maven","jpa"],"comments":[{"owner":{"account_id":1192733,"reputation":1507,"user_id":1165160,"accept_rate":92,"display_name":"King Midas"},"score":0,"creation_date":1675425029,"post_id":75323334,"comment_id":132931108,"body_markdown":"Seems that the way I am trying to do this is not correct. From the [official documentation](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto.data-access.configure-two-datasources) the `@Primary` must be always present.","body":"Seems that the way I am trying to do this is not correct. From the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto.data-access.configure-two-datasources\" rel=\"nofollow noreferrer\">official documentation</a> the <code>@Primary</code> must be always present."}],"answers":[{"tags":[],"owner":{"account_id":1460128,"reputation":10123,"user_id":1374678,"accept_rate":93,"display_name":"rolve"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675431653,"creation_date":1675356564,"answer_id":75326407,"question_id":75323334,"body_markdown":"I would create a small extra Maven module that acts as the standalone app and has the `@Primary` annotation for running the library standalone. This way, I suspect you can also move a bit of code out of the actual library, making it more lightweight.","title":"Spring Boot Multiple Database Configurations: avoiding to use @Primary on one of the database configuration","body":"<p>I would create a small extra Maven module that acts as the standalone app and has the <code>@Primary</code> annotation for running the library standalone. This way, I suspect you can also move a bit of code out of the actual library, making it more lightweight.</p>\n"}],"owner":{"account_id":1192733,"reputation":1507,"user_id":1165160,"accept_rate":92,"display_name":"King Midas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":208,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75326407,"answer_count":1,"score":0,"last_activity_date":1675431653,"creation_date":1675341569,"question_id":75323334,"body_markdown":"I have some libraries written in java and using Spring Boot 2.6.4. Each one -for some reasons- has a database connections as In some cases I want that the libraries stores the data on a different database. \r\n\r\nFor this purpose, I generate multiples database configuration (one as an example):\r\n\r\n```\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(entityManagerFactoryRef = &quot;lib1ManagerFactory&quot;, transactionManagerRef = &quot;lib1TransactionManager&quot;, basePackages = {\r\n        &quot;my.lib1.package&quot;})\r\npublic class Lib1DatabaseConfigurator {\r\n    @Bean\r\n    @ConfigurationProperties(prefix = &quot;spring.lib1.datasource&quot;)\r\n    public DataSource lib1DataSource() {\r\n        return DataSourceBuilder.create().build();\r\n    }\r\n\r\n    @Bean\r\n    public LocalContainerEntityManagerFactoryBean lib1ManagerFactory(EntityManagerFactoryBuilder builder,\r\n                                                                          @Qualifier(&quot;lib1DataSource&quot;) DataSource dataSource) {\r\n        return builder.dataSource(dataSource).packages(&quot;my.lib1.package&quot;).build();\r\n    }\r\n\r\n    @Bean\r\n    public PlatformTransactionManager lib1TransactionManager(\r\n            @Qualifier(&quot;lib1ManagerFactory&quot;) EntityManagerFactory lib1EntityManagerFactory) {\r\n        return new JpaTransactionManager(lib1EntityManagerFactory);\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nThen, I have an application that has some entities and it connects to a database as any of the previous libraries (configuration very similar). The difference is that it is an application that executes as a rest server, but also some internal modules can be use as libraries for other applications (it is a maven multi-module application, where the business logic can be used as library, but also has other maven modules that execute the library as a rest application for accepting rest calls). \r\n\r\nOn this application, when I execute it, I get the error `No qualifying bean of type &#39;org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder`. In all sources I have checked, this will be fixed if I include the `@Primary` on the database configuration. \r\n\r\nBut as I want that database entities and configuration will be used as a library for some other applications, I will want to avoid the `@Primary` annotation, as other applications will have its custom database configuration and probably with this annotation. \r\n\r\nNote that I have some Custom Implementation of repositories in some cases, the type of:\r\n\r\n    @Repository\r\n    public class CustomLib1RepositoryImpl&lt;T&gt; implements CustomLib1Repository&lt;T&gt; {\r\n\r\n      @PersistenceContext\r\n      @Qualifier(value = &quot;lib1ManagerFactory&quot;)\r\n      private EntityManager entityManager;\r\n\r\n      private Class&lt;T&gt; entityTypeClass;\r\n\r\n     ...\r\n    }\r\n\r\n\r\n\r\n**What I want to achieve is**: create a library that has its custom database configuration that I can use in multiples applications. Therefore the final application will have its own database configuration and the database configuration from the imported library.\r\n\r\nbut\r\n\r\nIn one specific case, the library can also run as an standalone application. That means that must have its own database configuration running, but this one can be exported when used as a library. \r\n\r\n**What I want to avoid** also, is to not duplicate library&#39;s database configurations among applications (then include it on the libraries).","title":"Spring Boot Multiple Database Configurations: avoiding to use @Primary on one of the database configuration","body":"<p>I have some libraries written in java and using Spring Boot 2.6.4. Each one -for some reasons- has a database connections as In some cases I want that the libraries stores the data on a different database.</p>\n<p>For this purpose, I generate multiples database configuration (one as an example):</p>\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(entityManagerFactoryRef = &quot;lib1ManagerFactory&quot;, transactionManagerRef = &quot;lib1TransactionManager&quot;, basePackages = {\n        &quot;my.lib1.package&quot;})\npublic class Lib1DatabaseConfigurator {\n    @Bean\n    @ConfigurationProperties(prefix = &quot;spring.lib1.datasource&quot;)\n    public DataSource lib1DataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Bean\n    public LocalContainerEntityManagerFactoryBean lib1ManagerFactory(EntityManagerFactoryBuilder builder,\n                                                                          @Qualifier(&quot;lib1DataSource&quot;) DataSource dataSource) {\n        return builder.dataSource(dataSource).packages(&quot;my.lib1.package&quot;).build();\n    }\n\n    @Bean\n    public PlatformTransactionManager lib1TransactionManager(\n            @Qualifier(&quot;lib1ManagerFactory&quot;) EntityManagerFactory lib1EntityManagerFactory) {\n        return new JpaTransactionManager(lib1EntityManagerFactory);\n    }\n\n}\n\n</code></pre>\n<p>Then, I have an application that has some entities and it connects to a database as any of the previous libraries (configuration very similar). The difference is that it is an application that executes as a rest server, but also some internal modules can be use as libraries for other applications (it is a maven multi-module application, where the business logic can be used as library, but also has other maven modules that execute the library as a rest application for accepting rest calls).</p>\n<p>On this application, when I execute it, I get the error <code>No qualifying bean of type 'org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder</code>. In all sources I have checked, this will be fixed if I include the <code>@Primary</code> on the database configuration.</p>\n<p>But as I want that database entities and configuration will be used as a library for some other applications, I will want to avoid the <code>@Primary</code> annotation, as other applications will have its custom database configuration and probably with this annotation.</p>\n<p>Note that I have some Custom Implementation of repositories in some cases, the type of:</p>\n<pre><code>@Repository\npublic class CustomLib1RepositoryImpl&lt;T&gt; implements CustomLib1Repository&lt;T&gt; {\n\n  @PersistenceContext\n  @Qualifier(value = &quot;lib1ManagerFactory&quot;)\n  private EntityManager entityManager;\n\n  private Class&lt;T&gt; entityTypeClass;\n\n ...\n}\n</code></pre>\n<p><strong>What I want to achieve is</strong>: create a library that has its custom database configuration that I can use in multiples applications. Therefore the final application will have its own database configuration and the database configuration from the imported library.</p>\n<p>but</p>\n<p>In one specific case, the library can also run as an standalone application. That means that must have its own database configuration running, but this one can be exported when used as a library.</p>\n<p><strong>What I want to avoid</strong> also, is to not duplicate library's database configurations among applications (then include it on the libraries).</p>\n"},{"tags":["java","angular","spring-boot","selenium","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":22880863,"reputation":26,"user_id":17023516,"display_name":"Flumberg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674716950,"creation_date":1674566478,"answer_id":75222097,"question_id":75208656,"body_markdown":"This part of your code contains problem with xpath.   \r\n \r\n\r\n    driver.findElement(By.xpath(&quot;a[href=&#39;/customers&#39;]&quot;)).click();\r\n\r\nYou should put &quot;//&quot; before tagname and &quot;@&quot; before attribute like:\r\n\r\n    driver.findElement(By.xpath(&quot;//a[@href=&#39;/customers&#39;]&quot;)).click();\r\nNote that the attribute value must be written in full. \r\nIf it&#39;s not the full value of the attribute you can use &quot;contains()&quot; like:\r\n\r\n    driver.findElement(By.xpath(&quot;//a[contains(@href, &#39;/customers&#39;])&quot;)).click();\r\nAny chance that your locator located in &#39;iframe&#39; block? If so you must switch to the &#39;iframe&#39; block at first\r\n\r\n    //Store the web element\r\n    WebElement iframe = driver.findElement(By.cssSelector(&quot;iframe path&quot;));\r\n    \r\n    //Switch to the frame\r\n    driver.switchTo().frame(iframe);\r\n    \r\n    //Now we can click the button\r\n    driver.findElement(By.xpath(&quot;//a[contains(@href, &#39;/customers&#39;])&quot;)).click();\r\nAlso you can try to click via JS\r\n\r\n    WebElement element = driver.findElement(By.xpath(&quot;//a[contains(@href, &#39;/customers&#39;])&quot;));\r\n    JavascriptExecutor executor = (JavascriptExecutor)driver;\r\n    executor.executeScript(&quot;arguments[0].click();&quot;, element);","title":"How to select a menu link our Angular application with Selenium","body":"<p>This part of your code contains problem with xpath.</p>\n<pre><code>driver.findElement(By.xpath(&quot;a[href='/customers']&quot;)).click();\n</code></pre>\n<p>You should put &quot;//&quot; before tagname and &quot;@&quot; before attribute like:</p>\n<pre><code>driver.findElement(By.xpath(&quot;//a[@href='/customers']&quot;)).click();\n</code></pre>\n<p>Note that the attribute value must be written in full.\nIf it's not the full value of the attribute you can use &quot;contains()&quot; like:</p>\n<pre><code>driver.findElement(By.xpath(&quot;//a[contains(@href, '/customers'])&quot;)).click();\n</code></pre>\n<p>Any chance that your locator located in 'iframe' block? If so you must switch to the 'iframe' block at first</p>\n<pre><code>//Store the web element\nWebElement iframe = driver.findElement(By.cssSelector(&quot;iframe path&quot;));\n\n//Switch to the frame\ndriver.switchTo().frame(iframe);\n\n//Now we can click the button\ndriver.findElement(By.xpath(&quot;//a[contains(@href, '/customers'])&quot;)).click();\n</code></pre>\n<p>Also you can try to click via JS</p>\n<pre><code>WebElement element = driver.findElement(By.xpath(&quot;//a[contains(@href, '/customers'])&quot;));\nJavascriptExecutor executor = (JavascriptExecutor)driver;\nexecutor.executeScript(&quot;arguments[0].click();&quot;, element);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12809345,"reputation":193,"user_id":9268070,"display_name":"BMW83"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674646727,"creation_date":1674646727,"answer_id":75233431,"question_id":75208656,"body_markdown":"I tried to install the chrome extension &#39;**SelectorsHub**&#39; which allows me to have the exact path of any path.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nAnd I tried this path but no solution and I find an exception .\r\n\r\n    WARNING: Unable to find an exact match for CDP version 109, so returning the closest version found: 108\r\n    Exception in thread &quot;main&quot; org.openqa.selenium.NoSuchElementException: no such \r\n    element: Unable to locate element: {&quot;method&quot;:&quot;xpath&quot;,&quot;selector&quot;:&quot;//a[contains(@href, &#39;/customers&#39;)]&quot;}\r\n \r\n\r\nThe problem is that there is no search word **&#39;Customers&#39;** when I try to get the source code of the page.\r\nAnd this page includes Angular components.\r\nthe only solution is to put the link in the second tab with the customers.\r\nI tried to apply here to get an idea with the Angular components that are still displayed in the current page\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/z3Xpf.png","title":"How to select a menu link our Angular application with Selenium","body":"<p>I tried to install the chrome extension '<strong>SelectorsHub</strong>' which allows me to have the exact path of any path.</p>\n<p><a href=\"https://i.stack.imgur.com/z3Xpf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z3Xpf.png\" alt=\"enter image description here\" /></a></p>\n<p>And I tried this path but no solution and I find an exception .</p>\n<pre><code>WARNING: Unable to find an exact match for CDP version 109, so returning the closest version found: 108\nException in thread &quot;main&quot; org.openqa.selenium.NoSuchElementException: no such \nelement: Unable to locate element: {&quot;method&quot;:&quot;xpath&quot;,&quot;selector&quot;:&quot;//a[contains(@href, '/customers')]&quot;}\n</code></pre>\n<p>The problem is that there is no search word <strong>'Customers'</strong> when I try to get the source code of the page.\nAnd this page includes Angular components.\nthe only solution is to put the link in the second tab with the customers.\nI tried to apply here to get an idea with the Angular components that are still displayed in the current page</p>\n"},{"tags":[],"owner":{"account_id":12809345,"reputation":193,"user_id":9268070,"display_name":"BMW83"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675431647,"creation_date":1675431647,"answer_id":75336526,"question_id":75208656,"body_markdown":"I found this solution on the xpath track.\r\n\r\n    &quot;/html/body/app-root/layout/classy-layout/fuse-vertical-navigation/div/div[2]/fuse-vertical-navigation-basic-item[2]/div/a/div/div/span&quot;","title":"How to select a menu link our Angular application with Selenium","body":"<p>I found this solution on the xpath track.</p>\n<pre><code>&quot;/html/body/app-root/layout/classy-layout/fuse-vertical-navigation/div/div[2]/fuse-vertical-navigation-basic-item[2]/div/a/div/div/span&quot;\n</code></pre>\n"}],"owner":{"account_id":12809345,"reputation":193,"user_id":9268070,"display_name":"BMW83"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75336526,"answer_count":3,"score":0,"last_activity_date":1675431647,"creation_date":1674472199,"question_id":75208656,"body_markdown":"I have a Spring Boot Angular Project. And I’d like to do some Selenuim tests on the components. I made the connection and entered the home page. But I can’t click on the menu that has other links to other components. It shows me the following errors:\r\n\r\n    Command: [2d56d2bfe5693b9a2876fdbaf7337e6d, findElement {using=xpath, value=a[href=&#39;/customers&#39;]}]\r\n      Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: \r\n      109.0.5414.75, chrome: {chromedriverVersion: 109.0.5414.74 (e7c5703604da..., userDataDir: \r\n      C:\\Users\\hp\\AppData\\Local\\T...}, goog:chromeOptions: {debuggerAddress: localhost:64215}, \r\n      networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: WINDOWS, proxy: \r\n      Proxy(), se:cdp: ws://localhost:64215/devtoo..., se:cdpVersion: 109.0.5414.75, \r\n      setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 1000, pageLoad: \r\n      300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, \r\n      webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, \r\n      webauthn:virtualAuthenticators: true}\r\n[![My page web][1]][1]\r\n\r\nI want to access the different Client menus or links under administration...\r\nIn the source code of the page you can’t find the links I’m looking for &quot;[/customers]&quot;. There is a tutorial that explains this.\r\n\r\n    driver.findElement(By.xpath(&quot;a[href=&#39;/customers&#39;]&quot;)).click();\r\n\r\nMy code is here \r\n\r\n\r\n        `System.setProperty(&quot;webdriver.gecko.driver&quot;, &quot;C:\\\\geckodriver.exe&quot;);\r\n\r\n        ChromeOptions chromeOptions = new ChromeOptions();\r\n        Map&lt;String, Integer&gt; timeOUts = new HashMap&lt;&gt;();\r\n        timeOUts.put(&quot;implicit&quot;, 1000);\r\n        chromeOptions.setCapability(&quot;timeouts&quot;, timeOUts);\r\n\r\n        WebDriver driver = new ChromeDriver(chromeOptions);\r\n        driver.manage().window().maximize();\r\n\r\n        driver.get(&quot;http://myApplication.fr&quot;);//\r\n        driver.findElement(By.id(&quot;email&quot;)).sendKeys(&quot;exemple@exemple.fr&quot;);\r\n        driver.findElement(By.id(&quot;password&quot;)).sendKeys(&quot;123&quot;);\r\n        driver.findElement(By.className(&quot;fuse-mat-button-large&quot;)).click();\r\n\r\n        driver.findElement(By.xpath(&quot;a[href=&#39;/customers&#39;]&quot;)).click();`\r\n\r\n  [1]: https://i.stack.imgur.com/tqhPl.png","title":"How to select a menu link our Angular application with Selenium","body":"<p>I have a Spring Boot Angular Project. And I’d like to do some Selenuim tests on the components. I made the connection and entered the home page. But I can’t click on the menu that has other links to other components. It shows me the following errors:</p>\n<pre><code>Command: [2d56d2bfe5693b9a2876fdbaf7337e6d, findElement {using=xpath, value=a[href='/customers']}]\n  Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: \n  109.0.5414.75, chrome: {chromedriverVersion: 109.0.5414.74 (e7c5703604da..., userDataDir: \n  C:\\Users\\hp\\AppData\\Local\\T...}, goog:chromeOptions: {debuggerAddress: localhost:64215}, \n  networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: WINDOWS, proxy: \n  Proxy(), se:cdp: ws://localhost:64215/devtoo..., se:cdpVersion: 109.0.5414.75, \n  setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 1000, pageLoad: \n  300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, \n  webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, \n  webauthn:virtualAuthenticators: true}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/tqhPl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tqhPl.png\" alt=\"My page web\" /></a></p>\n<p>I want to access the different Client menus or links under administration...\nIn the source code of the page you can’t find the links I’m looking for &quot;[/customers]&quot;. There is a tutorial that explains this.</p>\n<pre><code>driver.findElement(By.xpath(&quot;a[href='/customers']&quot;)).click();\n</code></pre>\n<p>My code is here</p>\n<pre><code>    `System.setProperty(&quot;webdriver.gecko.driver&quot;, &quot;C:\\\\geckodriver.exe&quot;);\n\n    ChromeOptions chromeOptions = new ChromeOptions();\n    Map&lt;String, Integer&gt; timeOUts = new HashMap&lt;&gt;();\n    timeOUts.put(&quot;implicit&quot;, 1000);\n    chromeOptions.setCapability(&quot;timeouts&quot;, timeOUts);\n\n    WebDriver driver = new ChromeDriver(chromeOptions);\n    driver.manage().window().maximize();\n\n    driver.get(&quot;http://myApplication.fr&quot;);//\n    driver.findElement(By.id(&quot;email&quot;)).sendKeys(&quot;exemple@exemple.fr&quot;);\n    driver.findElement(By.id(&quot;password&quot;)).sendKeys(&quot;123&quot;);\n    driver.findElement(By.className(&quot;fuse-mat-button-large&quot;)).click();\n\n    driver.findElement(By.xpath(&quot;a[href='/customers']&quot;)).click();`\n</code></pre>\n"},{"tags":["java","jvm"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1675324222,"post_id":75320007,"comment_id":132905156,"body_markdown":"Why do you think the *size* of the object is needed to read object&#39;s data? To read object data, you just need to know where that data is...","body":"Why do you think the <i>size</i> of the object is needed to read object&#39;s data? To read object data, you just need to know where that data is..."},{"owner":{"account_id":27682745,"reputation":33,"user_id":21131141,"display_name":"korjun1993"},"score":0,"creation_date":1675329583,"post_id":75320007,"comment_id":132906574,"body_markdown":"I think it need to do bound check","body":"I think it need to do bound check"}],"answers":[{"tags":[],"owner":{"account_id":1460128,"reputation":10123,"user_id":1374678,"accept_rate":93,"display_name":"rolve"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1675431602,"creation_date":1675327077,"answer_id":75320497,"question_id":75320007,"body_markdown":"The difference between an array and a &quot;normal&quot; object is that arrays can have different sizes, while every object of a given class has the same size. In a way, the size of non-array objects _is_ stored, but not with every object, but only once in the respective class data (hence the class pointer).\r\n\r\nRegarding accessing the data in an array/object, there is another difference: When accessing the element of an array, the JVM has to do a bounds check, which requires knowing the size of the array. When accessing the field of a normal object, however, this is not the case, as the number/positions of all fields is fixed (and known at class loading time) for every object of a given class. So usually, knowing the size of an object is not actually required to access its data. However, I want to relativize Sweeper&#39;s comment: The JVM _does_ need to know the size of non-array objects, e.g., when moving them around as part of garbage collection compaction.","title":"How does the JVM know how much to read in the start address when reading object data?","body":"<p>The difference between an array and a &quot;normal&quot; object is that arrays can have different sizes, while every object of a given class has the same size. In a way, the size of non-array objects <em>is</em> stored, but not with every object, but only once in the respective class data (hence the class pointer).</p>\n<p>Regarding accessing the data in an array/object, there is another difference: When accessing the element of an array, the JVM has to do a bounds check, which requires knowing the size of the array. When accessing the field of a normal object, however, this is not the case, as the number/positions of all fields is fixed (and known at class loading time) for every object of a given class. So usually, knowing the size of an object is not actually required to access its data. However, I want to relativize Sweeper's comment: The JVM <em>does</em> need to know the size of non-array objects, e.g., when moving them around as part of garbage collection compaction.</p>\n"}],"owner":{"account_id":27682745,"reputation":33,"user_id":21131141,"display_name":"korjun1993"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":75320497,"answer_count":1,"score":3,"last_activity_date":1675431602,"creation_date":1675323835,"question_id":75320007,"body_markdown":"I studied the following.\r\nObject header consists of a mark word and a klass pointer.\r\nIn the case of an **array**, it additionally has **size header**.\r\n\r\nIn other words, there is no size information in the header of object data. So, how does the JVM know how far to read from the start address when reading object data?","title":"How does the JVM know how much to read in the start address when reading object data?","body":"<p>I studied the following.\nObject header consists of a mark word and a klass pointer.\nIn the case of an <strong>array</strong>, it additionally has <strong>size header</strong>.</p>\n<p>In other words, there is no size information in the header of object data. So, how does the JVM know how far to read from the start address when reading object data?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1675433266,"post_id":75336451,"comment_id":132933608,"body_markdown":"Your console shows a warning message: `Cannot find template location...`, even though it does appear to exist and does appear to be on the runtime classpath. There may be various reasons why this is happening. You can [research](https://www.google.com/search?q=spring+boot+cannot+find+template+location+site:stackoverflow.com) different suggestions and solutions. You can update your question with the results of your research. (I don&#39;t know if this is related to your `404 not found` problem - but it&#39;s a good place to start.)","body":"Your console shows a warning message: <code>Cannot find template location...</code>, even though it does appear to exist and does appear to be on the runtime classpath. There may be various reasons why this is happening. You can <a href=\"https://www.google.com/search?q=spring+boot+cannot+find+template+location+site:stackoverflow.com\" rel=\"nofollow noreferrer\">research</a> different suggestions and solutions. You can update your question with the results of your research. (I don&#39;t know if this is related to your <code>404 not found</code> problem - but it&#39;s a good place to start.)"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1675433346,"post_id":75336451,"comment_id":132933644,"body_markdown":"Note: Please always show text as formatted text (not as screenshots). See a list of reasons why [here](https://meta.stackoverflow.com/a/285557/12567365).","body":"Note: Please always show text as formatted text (not as screenshots). See a list of reasons why <a href=\"https://meta.stackoverflow.com/a/285557/12567365\">here</a>."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1675433867,"post_id":75336451,"comment_id":132933830,"body_markdown":"what is the real path of the &#39;templates&#39; folder?","body":"what is the real path of the &#39;templates&#39; folder?"},{"owner":{"account_id":22810863,"reputation":13,"user_id":16962177,"display_name":"imnach2"},"score":0,"creation_date":1675434956,"post_id":75336451,"comment_id":132934207,"body_markdown":"@JohnWilliams src/main/resources/templates/home.html","body":"@JohnWilliams src/main/resources/templates/home.html"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1675441765,"post_id":75336451,"comment_id":132936574,"body_markdown":"@imnach2 , your GreetingController.java return &quot;greeting&quot;;  But your templates use **home.html** ?","body":"@imnach2 , your GreetingController.java return &quot;greeting&quot;;  But your templates use <b>home.html</b> ?"},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1675443019,"post_id":75336451,"comment_id":132936993,"body_markdown":"@imnach2 If your template file is named home.html, then you need to return &quot;home&quot;, not &quot;greeting&quot;","body":"@imnach2 If your template file is named home.html, then you need to return &quot;home&quot;, not &quot;greeting&quot;"}],"owner":{"account_id":22810863,"reputation":13,"user_id":16962177,"display_name":"imnach2"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675431244,"creation_date":1675431195,"question_id":75336451,"body_markdown":"I&#39;m starting to develop in &#39;Spring-boot&#39; and I did the &#39;getting started&#39; as it is and it doesn&#39;t show me what it should\r\n\r\n[so are the routes](https://i.stack.imgur.com/atJDi.png)\r\n\r\n\r\n[this is the console](https://i.stack.imgur.com/kgx6j.png)\r\n\r\nhere is the code of application.properties\r\n\r\n\r\n```java\r\nspring.thymeleaf.prefix=classpath:/templates/\r\nspring.thymeleaf.suffix=.html\r\nspring.thymeleaf.mode=HTML\r\nspring.thymeleaf.encoding=UTF-8\r\nspring.thymeleaf.content-type=text/html # ;charset=&lt;encoding&gt; is added\r\nspring.thymeleaf.cache=false\r\n```\r\n\r\ntemplate &#39;greeting&#39;\r\n\r\n```html\r\n\r\n&lt;!DOCTYPE HTML&gt;\r\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n&lt;head&gt; \r\n    &lt;title&gt;Getting Started: Serving Web Content&lt;/title&gt; \r\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n    &lt;p th:text=&quot;&#39;Hello, &#39; + ${name} + &#39;!&#39;&quot; /&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n\r\n```\r\n\r\nThis is the controller code.\r\n\r\n```java\r\npackage com.arbaAppWebC.controller;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\n\r\n@Controller\r\npublic class GreetingController {\r\n\r\n\t@GetMapping(&quot;/greeting&quot;)\r\n\tpublic String greeting(@RequestParam(name=&quot;name&quot;, required=false, defaultValue=&quot;World&quot;) String name, Model model) {\r\n\t\tmodel.addAttribute(&quot;name&quot;, name);\r\n\t\treturn &quot;greeting&quot;;\r\n\t}\r\n\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n```java\r\n\r\npackage com.ArbaAppWeb.demo;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class DemoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(DemoApplication.class, args);\r\n\t}\r\n\r\n}\r\n\r\n\r\n```\r\n\r\nAnd this is the dependencies\r\n\r\n```java\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n```\r\n\r\n[this appears on the web](https://i.stack.imgur.com/J4nL7.png)\r\n\r\nI am using java 17 as a compiler although I have java 19 installed even so I do not understand what is wrong because I followed the same steps indicated in the spring-boot doc.\r\n\r\nI have the same problem since yesterday.\r\n\r\n\r\n\r\nIf you need any other information I am at your disposal to give it and be able to obtain the desired solution.","title":"Why doesn&#39;t it show the &#39;greetings&#39; template?","body":"<p>I'm starting to develop in 'Spring-boot' and I did the 'getting started' as it is and it doesn't show me what it should</p>\n<p><a href=\"https://i.stack.imgur.com/atJDi.png\" rel=\"nofollow noreferrer\">so are the routes</a></p>\n<p><a href=\"https://i.stack.imgur.com/kgx6j.png\" rel=\"nofollow noreferrer\">this is the console</a></p>\n<p>here is the code of application.properties</p>\n<pre class=\"lang-java prettyprint-override\"><code>spring.thymeleaf.prefix=classpath:/templates/\nspring.thymeleaf.suffix=.html\nspring.thymeleaf.mode=HTML\nspring.thymeleaf.encoding=UTF-8\nspring.thymeleaf.content-type=text/html # ;charset=&lt;encoding&gt; is added\nspring.thymeleaf.cache=false\n</code></pre>\n<p>template 'greeting'</p>\n<pre class=\"lang-html prettyprint-override\"><code>\n&lt;!DOCTYPE HTML&gt;\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt; \n    &lt;title&gt;Getting Started: Serving Web Content&lt;/title&gt; \n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;p th:text=&quot;'Hello, ' + ${name} + '!'&quot; /&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\n</code></pre>\n<p>This is the controller code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.arbaAppWebC.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\n\n@Controller\npublic class GreetingController {\n\n    @GetMapping(&quot;/greeting&quot;)\n    public String greeting(@RequestParam(name=&quot;name&quot;, required=false, defaultValue=&quot;World&quot;) String name, Model model) {\n        model.addAttribute(&quot;name&quot;, name);\n        return &quot;greeting&quot;;\n    }\n\n}\n\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>\npackage com.ArbaAppWeb.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n}\n\n\n</code></pre>\n<p>And this is the dependencies</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/J4nL7.png\" rel=\"nofollow noreferrer\">this appears on the web</a></p>\n<p>I am using java 17 as a compiler although I have java 19 installed even so I do not understand what is wrong because I followed the same steps indicated in the spring-boot doc.</p>\n<p>I have the same problem since yesterday.</p>\n<p>If you need any other information I am at your disposal to give it and be able to obtain the desired solution.</p>\n"},{"tags":["java","amazon-web-services","docker","aws-cloudformation","openapi"],"comments":[{"owner":{"account_id":199153,"reputation":462,"user_id":444252,"display_name":"HariKrishnan"},"score":0,"creation_date":1675400616,"post_id":75330866,"comment_id":132925262,"body_markdown":"Can you please clarify what you mean by &quot;run the OpenAPI documentation locally&quot;? If you are you referring to being able to browse the documentation, you can run https://hub.docker.com/r/swaggerapi/swagger-editor/ on your local machine. This will give you the same experience as https://editor.swagger.io/.","body":"Can you please clarify what you mean by &quot;run the OpenAPI documentation locally&quot;? If you are you referring to being able to browse the documentation, you can run <a href=\"https://hub.docker.com/r/swaggerapi/swagger-editor/\" rel=\"nofollow noreferrer\">hub.docker.com/r/swaggerapi/swagger-editor</a> on your local machine. This will give you the same experience as <a href=\"https://editor.swagger.io/\" rel=\"nofollow noreferrer\">editor.swagger.io</a>."},{"owner":{"account_id":15801712,"reputation":1294,"user_id":11402025,"display_name":"Tanu"},"score":0,"creation_date":1675402264,"post_id":75330866,"comment_id":132925503,"body_markdown":"getting an error : The requested image&#39;s platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested","body":"getting an error : The requested image&#39;s platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested"},{"owner":{"account_id":199153,"reputation":462,"user_id":444252,"display_name":"HariKrishnan"},"score":0,"creation_date":1675404102,"post_id":75330866,"comment_id":132925747,"body_markdown":"Looks like platform issue (https://github.com/swagger-api/swagger-editor/issues/2725). You can try this instead &quot;docker pull swaggerapi/swagger-editor:next-v5&quot; and then &quot;docker run -p 8888:80 swaggerapi/swagger-editor:next-v5&quot; and access the editor on &quot;http://localhost:8888/&quot; (https://github.com/swagger-api/swagger-editor/issues/3416#issuecomment-1310575668). This will be similar to https://editor-next.swagger.io/.","body":"Looks like platform issue (<a href=\"https://github.com/swagger-api/swagger-editor/issues/2725\" rel=\"nofollow noreferrer\">github.com/swagger-api/swagger-editor/issues/2725</a>). You can try this instead &quot;docker pull swaggerapi/swagger-editor:next-v5&quot; and then &quot;docker run -p 8888:80 swaggerapi/swagger-editor:next-v5&quot; and access the editor on &quot;<a href=\"http://localhost:8888/\" rel=\"nofollow noreferrer\">localhost:8888</a>&quot; (<a href=\"https://github.com/swagger-api/swagger-editor/issues/3416#issuecomment-1310575668\" rel=\"nofollow noreferrer\">github.com/swagger-api/swagger-editor/issues/&hellip;</a>). This will be similar to <a href=\"https://editor-next.swagger.io/\" rel=\"nofollow noreferrer\">editor-next.swagger.io</a>."}],"owner":{"account_id":15801712,"reputation":1294,"user_id":11402025,"display_name":"Tanu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675431159,"creation_date":1675390768,"question_id":75330866,"body_markdown":"I have an OpenAPI YAML file for a Java project. I am creating an AWS Lambda function and using API gateway deploying it on CloudFormation.\r\n\r\nIs there a way I can use Docker to run the OpenAPI documentation locally?\r\n\r\n","title":"How to run OpenAPI YAML using Docker","body":"<p>I have an OpenAPI YAML file for a Java project. I am creating an AWS Lambda function and using API gateway deploying it on CloudFormation.</p>\n<p>Is there a way I can use Docker to run the OpenAPI documentation locally?</p>\n"},{"tags":["java","apache-httpclient-4.x"],"comments":[{"owner":{"account_id":6753265,"reputation":57,"user_id":5202634,"display_name":"Albert"},"score":0,"creation_date":1675428465,"post_id":75335383,"comment_id":132932073,"body_markdown":"With curl it works, but I need to do it in java, see curl command -&gt; `curl &#39;https://www.net-a-porter.com/variants/images/1647597286238991/in/w230_q80.jpg&#39; \\\n  -H &#39;accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&#39; \\\n  -H &#39;if-modified-since: Mon, 16 Jan 2023 20:30:31 GMT&#39; \\\n  -H &#39;user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36&#39; \\\n  --compressed --output test.jpg`","body":"With curl it works, but I need to do it in java, see curl command -&gt; <code>curl &#39;https:&#47;&#47;www.net-a-porter.com&#47;variants&#47;images&#47;16475972862389&zwnj;&#8203;91&#47;in&#47;w230_q80.jpg&#39; \\   -H &#39;accept: text&#47;html,application&#47;xhtml+xml,application&#47;xml;q=0.9,image&#47;&zwnj;&#8203;avif,image&#47;webp,imag&zwnj;&#8203;e&#47;apng,*&#47;*;q=0.8,app&zwnj;&#8203;lication&#47;signed-exch&zwnj;&#8203;ange;v=b3;q=0.9&#39; \\   -H &#39;if-modified-since: Mon, 16 Jan 2023 20:30:31 GMT&#39; \\   -H &#39;user-agent: Mozilla&#47;5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit&#47;537.36 (KHTML, like Gecko) Chrome&#47;109.0.0.0 Safari&#47;537.36&#39; \\   --compressed --output test.jpg</code>"}],"answers":[{"tags":[],"owner":{"account_id":19619018,"reputation":127,"user_id":14359869,"display_name":"antonio_s87"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675431080,"creation_date":1675430464,"answer_id":75336317,"question_id":75335383,"body_markdown":"Try setting the user agent to something else. For example &quot;Safari/537.36&quot;. \r\n\r\n        CloseableHttpClient httpClient2 = HttpClientBuilder.create()\r\n            .setDefaultRequestConfig(\r\n                    RequestConfig.custom()\r\n                            .setCookieSpec(CookieSpecs.STANDARD)\r\n                            .setConnectTimeout(TIMEOUT_IN_SECONDS * 1000)\r\n                            .setConnectionRequestTimeout(TIMEOUT_IN_SECONDS * 1000)\r\n                            .setSocketTimeout(TIMEOUT_IN_SECONDS * 1000)\r\n                            .build())\r\n                    .setUserAgent(&quot;Safari/537.36&quot;)\r\n                    .build();\r\n\r\nIt seems to be working for me with the &quot;Safari/537.36&quot; user agent.","title":"Cannot download an image with an HttpClientBuilder object","body":"<p>Try setting the user agent to something else. For example &quot;Safari/537.36&quot;.</p>\n<pre><code>    CloseableHttpClient httpClient2 = HttpClientBuilder.create()\n        .setDefaultRequestConfig(\n                RequestConfig.custom()\n                        .setCookieSpec(CookieSpecs.STANDARD)\n                        .setConnectTimeout(TIMEOUT_IN_SECONDS * 1000)\n                        .setConnectionRequestTimeout(TIMEOUT_IN_SECONDS * 1000)\n                        .setSocketTimeout(TIMEOUT_IN_SECONDS * 1000)\n                        .build())\n                .setUserAgent(&quot;Safari/537.36&quot;)\n                .build();\n</code></pre>\n<p>It seems to be working for me with the &quot;Safari/537.36&quot; user agent.</p>\n"}],"owner":{"account_id":6753265,"reputation":57,"user_id":5202634,"display_name":"Albert"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75336317,"answer_count":1,"score":0,"last_activity_date":1675431080,"creation_date":1675425335,"question_id":75335383,"body_markdown":"I&#39;m trying to download images in Java using HttpClientBuilder. On most of the cases I do not have any problem, but on this particular example, I cannot make it work and I do not know what else to try.\r\n\r\nI attach a code example, when I run it I always get a ```java.net.SocketTimeoutException: Read timed out```.\r\n\r\nI&#39;ve tried setting a specific User-Agent, and other settings in the request with no luck. \r\n\r\nAny help would be appreciate, thanks.\r\n\r\n\r\n        CloseableHttpClient httpClient2 = HttpClientBuilder.create()\r\n                .setDefaultRequestConfig(\r\n                        RequestConfig.custom()\r\n                                .setCookieSpec(CookieSpecs.STANDARD)\r\n                                .setConnectTimeout(TIMEOUT_IN_SECONDS * 1000)\r\n                                .setConnectionRequestTimeout(TIMEOUT_IN_SECONDS * 1000)\r\n                                .setSocketTimeout(TIMEOUT_IN_SECONDS * 1000)\r\n                                .build())\r\n                .build();\r\n\r\n        final HttpGet httpGet = new HttpGet(URI.create(&quot;https://www.net-a-porter.com/variants/images/1647597286238991/in/w230_q80.jpg&quot;));\r\n        try (CloseableHttpResponse response2 = httpClient2.execute(httpGet)) {\r\n            // code never reached\r\n        }","title":"Cannot download an image with an HttpClientBuilder object","body":"<p>I'm trying to download images in Java using HttpClientBuilder. On most of the cases I do not have any problem, but on this particular example, I cannot make it work and I do not know what else to try.</p>\n<p>I attach a code example, when I run it I always get a <code>java.net.SocketTimeoutException: Read timed out</code>.</p>\n<p>I've tried setting a specific User-Agent, and other settings in the request with no luck.</p>\n<p>Any help would be appreciate, thanks.</p>\n<pre><code>    CloseableHttpClient httpClient2 = HttpClientBuilder.create()\n            .setDefaultRequestConfig(\n                    RequestConfig.custom()\n                            .setCookieSpec(CookieSpecs.STANDARD)\n                            .setConnectTimeout(TIMEOUT_IN_SECONDS * 1000)\n                            .setConnectionRequestTimeout(TIMEOUT_IN_SECONDS * 1000)\n                            .setSocketTimeout(TIMEOUT_IN_SECONDS * 1000)\n                            .build())\n            .build();\n\n    final HttpGet httpGet = new HttpGet(URI.create(&quot;https://www.net-a-porter.com/variants/images/1647597286238991/in/w230_q80.jpg&quot;));\n    try (CloseableHttpResponse response2 = httpClient2.execute(httpGet)) {\n        // code never reached\n    }\n</code></pre>\n"},{"tags":["java","algorithm","data-structures","recursion","linked-list"],"comments":[{"owner":{"account_id":1394089,"reputation":40460,"user_id":1424875,"accept_rate":86,"display_name":"nanofarad"},"score":0,"creation_date":1373284044,"post_id":17525757,"comment_id":25484537,"body_markdown":"Show us what you&#39;ve tried.","body":"Show us what you&#39;ve tried."},{"owner":{"account_id":2299663,"reputation":2305,"user_id":2020229,"accept_rate":92,"display_name":"banarun"},"score":0,"creation_date":1373284456,"post_id":17525757,"comment_id":25484780,"body_markdown":"Why don&#39;t you use tail recursion?","body":"Why don&#39;t you use tail recursion?"},{"owner":{"account_id":2918180,"reputation":2843,"user_id":2500965,"accept_rate":56,"display_name":"ssindelar"},"score":4,"creation_date":1373284522,"post_id":17525757,"comment_id":25484812,"body_markdown":"Pretty dangerous implementation, but for excercise ok. Recursion is usually used a lot while teaching, but shouldn&#39;t be used in  the real world, if you don&#39;t know the maximum recursion depth. You pretty easyly run into a StackOverflow Error, when the depth depends on some input data. This detail is usually omitted at universities or programming courses.","body":"Pretty dangerous implementation, but for excercise ok. Recursion is usually used a lot while teaching, but shouldn&#39;t be used in  the real world, if you don&#39;t know the maximum recursion depth. You pretty easyly run into a StackOverflow Error, when the depth depends on some input data. This detail is usually omitted at universities or programming courses."}],"answers":[{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1373284506,"creation_date":1373283965,"answer_id":17525794,"question_id":17525757,"body_markdown":"This should work\r\n\r\n\tstatic void reverse(List list, int p) {\r\n\t\tif (p == list.size() / 2) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tObject o1 = list.get(p);\r\n\t\tObject o2 = list.get(list.size() - p - 1);\r\n\t\tlist.set(p, o2);\r\n\t\tlist.set(list.size() - p - 1, o1);\r\n\t\treverse(list, p + 1);\r\n\t}\r\n\r\nthough to be efficient with LinkedList it should be refactored to use ListIterator\r\n","title":"Recursion - Reverse LinkedList with void function return type","body":"<p>This should work</p>\n\n<pre><code>static void reverse(List list, int p) {\n    if (p == list.size() / 2) {\n        return;\n    }\n    Object o1 = list.get(p);\n    Object o2 = list.get(list.size() - p - 1);\n    list.set(p, o2);\n    list.set(list.size() - p - 1, o1);\n    reverse(list, p + 1);\n}\n</code></pre>\n\n<p>though to be efficient with LinkedList it should be refactored to use ListIterator</p>\n"},{"tags":[],"owner":{"account_id":1308022,"reputation":9735,"user_id":1256583,"display_name":"darijan"},"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1373287110,"creation_date":1373284270,"answer_id":17525891,"question_id":17525757,"body_markdown":"Tested, it works (assuming you have your own implementation of a linked list with `Node`s that know the `next` node).\r\n\r\n    public static void reverse(Node previous, Node current) {\r\n\t\t//if there is next node...\r\n\t    if (current.next != null) {\r\n\t        //...go forth and pwn\r\n\t        reverse(current, current.next);\r\n\t    }\r\n\t\t\r\n\t\tif (previous == null) {\r\n\t        // this was the start node\r\n\t\t\tcurrent.next= null;\r\n\t    } else {\r\n\t        //reverse\r\n\t        current.next= previous;\r\n\t    }   \r\n\t}\r\n\r\nYou call it with\r\n\r\n    reverse(null, startNode);","title":"Recursion - Reverse LinkedList with void function return type","body":"<p>Tested, it works (assuming you have your own implementation of a linked list with <code>Node</code>s that know the <code>next</code> node).</p>\n\n<pre><code>public static void reverse(Node previous, Node current) {\n    //if there is next node...\n    if (current.next != null) {\n        //...go forth and pwn\n        reverse(current, current.next);\n    }\n\n    if (previous == null) {\n        // this was the start node\n        current.next= null;\n    } else {\n        //reverse\n        current.next= previous;\n    }   \n}\n</code></pre>\n\n<p>You call it with</p>\n\n<pre><code>reverse(null, startNode);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1474146,"reputation":7887,"user_id":1384984,"accept_rate":100,"display_name":"tibtof"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1373284624,"creation_date":1373284624,"answer_id":17526004,"question_id":17525757,"body_markdown":"The simplest method that I can think of it&#39;s:\r\n\r\n\tpublic static &lt;T&gt; void reverse( LinkedList&lt;T&gt; list )\r\n\t{\r\n\t\tif (list.size() &lt;= 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tT first = list.removeFirst();\r\n\t\treverse( list);\r\n\t\tlist.addLast( first );\r\n\t}","title":"Recursion - Reverse LinkedList with void function return type","body":"<p>The simplest method that I can think of it's:</p>\n\n<pre><code>public static &lt;T&gt; void reverse( LinkedList&lt;T&gt; list )\n{\n    if (list.size() &lt;= 1) {\n        return;\n    }\n    T first = list.removeFirst();\n    reverse( list);\n    list.addLast( first );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":136142,"reputation":638,"user_id":339453,"accept_rate":56,"display_name":"eddyxu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380937969,"creation_date":1380937969,"answer_id":19193165,"question_id":17525757,"body_markdown":"I am not familiar with Java, but here is a C++ version. After reversing the list, the head of list is still preserved, which means that the list can still be accessible from the old list head `List* h`.\r\n\r\n \r\n\r\n    void reverse(List* h) {\r\n        if (!h || !h-&gt;next) {\r\n          return;\r\n        }\r\n        if (!h-&gt;next-&gt;next) {\r\n          swap(h-&gt;value, h-&gt;next-&gt;value);\r\n          return;\r\n        }\r\n        auto next_of_next = h-&gt;next-&gt;next;\r\n        auto new_head = h-&gt;next;\r\n        reverse(h-&gt;next);\r\n        swap(h-&gt;value, new_head-&gt;value);\r\n        next_of_next-&gt;next = new_head;\r\n        h-&gt;next = new_head-&gt;next;\r\n        new_head-&gt;next = nullptr;\r\n      }\r\n","title":"Recursion - Reverse LinkedList with void function return type","body":"<p>I am not familiar with Java, but here is a C++ version. After reversing the list, the head of list is still preserved, which means that the list can still be accessible from the old list head <code>List* h</code>.</p>\n\n<pre><code>void reverse(List* h) {\n    if (!h || !h-&gt;next) {\n      return;\n    }\n    if (!h-&gt;next-&gt;next) {\n      swap(h-&gt;value, h-&gt;next-&gt;value);\n      return;\n    }\n    auto next_of_next = h-&gt;next-&gt;next;\n    auto new_head = h-&gt;next;\n    reverse(h-&gt;next);\n    swap(h-&gt;value, new_head-&gt;value);\n    next_of_next-&gt;next = new_head;\n    h-&gt;next = new_head-&gt;next;\n    new_head-&gt;next = nullptr;\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":103429,"reputation":6646,"user_id":277023,"accept_rate":56,"display_name":"kellyfj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1381610808,"creation_date":1381610808,"answer_id":19339053,"question_id":17525757,"body_markdown":"Try this code instead - it actually works\r\n\r\n        public static ListElement reverseListConstantStorage(ListElement head) {\r\n        return reverse(null,head);\r\n    }\r\n\r\n    private static ListElement reverse(ListElement previous, ListElement current) {\r\n        \r\n        ListElement newHead = null;\r\n        if (current.getNext() != null) {\r\n            newHead = reverse(current, current.getNext());\r\n        } else {//end of the list\r\n            newHead=current;\r\n            newHead.setNext(previous);\r\n        }\r\n\r\n        current.setNext(previous);        \r\n        return newHead;        \r\n    }","title":"Recursion - Reverse LinkedList with void function return type","body":"<p>Try this code instead - it actually works</p>\n\n<pre><code>    public static ListElement reverseListConstantStorage(ListElement head) {\n    return reverse(null,head);\n}\n\nprivate static ListElement reverse(ListElement previous, ListElement current) {\n\n    ListElement newHead = null;\n    if (current.getNext() != null) {\n        newHead = reverse(current, current.getNext());\n    } else {//end of the list\n        newHead=current;\n        newHead.setNext(previous);\n    }\n\n    current.setNext(previous);        \n    return newHead;        \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3815053,"reputation":1,"user_id":3164599,"display_name":"algoguru"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1388996693,"creation_date":1388995165,"answer_id":20945496,"question_id":17525757,"body_markdown":"    public static Node recurse2(Node node){\r\n        Node head =null;\r\n        if(node.next == null) return node;\r\n        Node previous=node, current = node.next;\r\n        head = recurse2(node.next);\r\n        current.next = previous;\r\n        previous.next = null;\r\n        return head;\r\n        \r\n    }\r\n\r\nWhile calling the function assign the return value as below:\r\n\r\n     list.head=recurse2(list.head);","title":"Recursion - Reverse LinkedList with void function return type","body":"<pre><code>public static Node recurse2(Node node){\n    Node head =null;\n    if(node.next == null) return node;\n    Node previous=node, current = node.next;\n    head = recurse2(node.next);\n    current.next = previous;\n    previous.next = null;\n    return head;\n\n}\n</code></pre>\n\n<p>While calling the function assign the return value as below:</p>\n\n<pre><code> list.head=recurse2(list.head);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4006879,"reputation":11,"user_id":3301337,"display_name":"Siddhahast Mohapatra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1392204848,"creation_date":1392203811,"answer_id":21726422,"question_id":17525757,"body_markdown":"\r\n    public void recursiveDisplay(Link current){\r\n    \r\n            if(current== null)\r\n    \t       return ;\r\n            recursiveDisplay(current.next);\r\n            current.display();\r\n    }\r\n\t\t\r\n\t\r\n","title":"Recursion - Reverse LinkedList with void function return type","body":"<pre><code>public void recursiveDisplay(Link current){\n\n        if(current== null)\n           return ;\n        recursiveDisplay(current.next);\n        current.display();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3849580,"reputation":654,"user_id":3190073,"accept_rate":92,"display_name":"MrGuy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1396990158,"creation_date":1396990158,"answer_id":22947867,"question_id":17525757,"body_markdown":"The function below is based on the chosen answer from darijan, all I did is adding 2 lines of code so that it&#39;d fit in the code you guys want to work:\r\n\r\n    public void reverse(Node previous, Node current) {\r\n    \t\t//if there is next node...\r\n    \t\tif (current.next != null) {\r\n    \t\t\t//...go forth and pwn\r\n    \t\t\treverse(current, current.next);\r\n    \t\t}\r\n    \t\telse this.head = current;/*end of the list &lt;-- This line alone would be the fix\r\n            since you will now have the former tail of the Linked List set as the new head*/\r\n    \t\t\r\n    \r\n    \t\tif (previous == null) {\r\n    \t\t\t// this was the start node\r\n    \t\t\tcurrent.next= null;\r\n    \t\t\tthis.tail = current; /*No need for that one if you&#39;re not using a Node in \r\n                your class to represent the last Node in the given list*/\r\n    \t\t} else {\r\n    \t\t\t//reverse\r\n    \t\t\tcurrent.next= previous;\r\n    \t\t}   \r\n    \t}\r\n\r\nAlso, I&#39;ve changed it to a non static function so then the way to use it would be: `myLinkedList.reverse(null, myLinkedList.head);`","title":"Recursion - Reverse LinkedList with void function return type","body":"<p>The function below is based on the chosen answer from darijan, all I did is adding 2 lines of code so that it'd fit in the code you guys want to work:</p>\n\n<pre><code>public void reverse(Node previous, Node current) {\n        //if there is next node...\n        if (current.next != null) {\n            //...go forth and pwn\n            reverse(current, current.next);\n        }\n        else this.head = current;/*end of the list &lt;-- This line alone would be the fix\n        since you will now have the former tail of the Linked List set as the new head*/\n\n\n        if (previous == null) {\n            // this was the start node\n            current.next= null;\n            this.tail = current; /*No need for that one if you're not using a Node in \n            your class to represent the last Node in the given list*/\n        } else {\n            //reverse\n            current.next= previous;\n        }   \n    }\n</code></pre>\n\n<p>Also, I've changed it to a non static function so then the way to use it would be: <code>myLinkedList.reverse(null, myLinkedList.head);</code></p>\n"},{"tags":[],"owner":{"account_id":1140058,"reputation":39,"user_id":1124227,"accept_rate":100,"display_name":"Ajay Parmar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1421250788,"creation_date":1421250788,"answer_id":27947071,"question_id":17525757,"body_markdown":"Here is my version - void ReverseWithRecursion(Node currentNode) \r\n                   - It is method of LinkListDemo Class so head is accessible\r\n\r\n1. Base Case - If Node is null, then do nothing and return.\r\n               If Node-&gt;Next is null, &quot;Make it head&quot; and return.\r\n2. Other Case - Reverse the Next of currentNode.\r\n       \r\n\r\n        public void ReverseWithRecursion(Node currentNode){\r\n           if(currentNode == null) return;\r\n           if(currentNode.next == null) {head = currentNode; return;}\r\n\r\n           Node first = currentNode;\r\n           Node rest = currentNode.next;\r\n\r\n           RevereseWithRecursion(rest);\r\n\r\n           first.next.next = first;\r\n           first.next = null;\r\n        }\r\n\r\nYou Call it like this -\r\n\r\n    LinkListDemo ll = new LinkListDemo(); // assueme class is available\r\n    ll.insert(1);  // Assume method is available\r\n    ll.insert(2);\r\n    ll.insert(3);\r\n    ll.ReverseWithRecursion(ll.head);\r\n\r\n\r\n\r\n\r\n\r\n","title":"Recursion - Reverse LinkedList with void function return type","body":"<p>Here is my version - void ReverseWithRecursion(Node currentNode) \n                   - It is method of LinkListDemo Class so head is accessible</p>\n\n<ol>\n<li>Base Case - If Node is null, then do nothing and return.\n           If Node->Next is null, \"Make it head\" and return.</li>\n<li><p>Other Case - Reverse the Next of currentNode.</p>\n\n<pre><code>public void ReverseWithRecursion(Node currentNode){\n   if(currentNode == null) return;\n   if(currentNode.next == null) {head = currentNode; return;}\n\n   Node first = currentNode;\n   Node rest = currentNode.next;\n\n   RevereseWithRecursion(rest);\n\n   first.next.next = first;\n   first.next = null;\n}\n</code></pre></li>\n</ol>\n\n<p>You Call it like this -</p>\n\n<pre><code>LinkListDemo ll = new LinkListDemo(); // assueme class is available\nll.insert(1);  // Assume method is available\nll.insert(2);\nll.insert(3);\nll.ReverseWithRecursion(ll.head);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7064757,"reputation":17,"user_id":5408449,"display_name":"Venu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1449893274,"creation_date":1449893274,"answer_id":34236150,"question_id":17525757,"body_markdown":"\tstatic StringBuilder reverseStr = new StringBuilder();\r\n\r\n\tpublic static void main(String args[]) {\r\n\t\tString str = &quot;9876543210&quot;;\r\n\t\treverse(str, str.length() - 1);\r\n\t}\r\n\r\n\tpublic static void reverse(String str, int index) {\r\n\t\tif (index &lt; 0) {\r\n\t\t\tSystem.out.println(reverseStr.toString());\r\n\t\t} else {\r\n\t\t\treverseStr.append(str.charAt(index));\r\n\t\t\treverse(str, index - 1);\r\n\t\t\tindex--;\r\n\t\t}\r\n\t}","title":"Recursion - Reverse LinkedList with void function return type","body":"<pre><code>static StringBuilder reverseStr = new StringBuilder();\n\npublic static void main(String args[]) {\n    String str = \"9876543210\";\n    reverse(str, str.length() - 1);\n}\n\npublic static void reverse(String str, int index) {\n    if (index &lt; 0) {\n        System.out.println(reverseStr.toString());\n    } else {\n        reverseStr.append(str.charAt(index));\n        reverse(str, index - 1);\n        index--;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15990376,"reputation":1,"user_id":11539732,"display_name":"Rishindra Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675430903,"creation_date":1675430773,"answer_id":75336367,"question_id":17525757,"body_markdown":"Given that you have a Node class as below:\r\n\r\n    public class Node\r\n    {\r\n        public int data;\r\n        public Node next;\r\n        public Node(int d)   //constructor.\r\n        {\r\n            data = d;\r\n            next = null;\r\n        }\r\n    }\r\n\r\nAnd a linkedList class where you have declared a head node, so that it can be accessed by the methods that you create inside LinkedList class. The method &#39;ReverseLinkedList&#39; takes a Node as an argument and reverses the ll.\r\n\r\nYou may do a dry run of the code by considering 1-&gt;2 as the linkedList. Where node = 1, node.next = 2.\r\n\r\n     public class LinkedList\r\n    {\r\n        public Node? head;  //head of list\r\n\r\n        public LinkedList()\r\n        {\r\n            head = null;\r\n        }\r\n \r\n\r\n        public void ReverseLinkedList(Node node)\r\n        {\r\n            if(node==null)\r\n            {\r\n                return;\r\n            }\r\n            if(node.next==null)\r\n            {\r\n                head = node;\r\n                return;\r\n            }\r\n            \r\n\r\n            ReverseLinkedList(node.next);   // node.next = rest of the linkedList\r\n\r\n            node.next.next = node;   // consider node as the first part of linkedList\r\n            node.next = null;\r\n\r\n        }\r\n\r\n        \r\n    }\r\n    \r\n\r\n  ","title":"Recursion - Reverse LinkedList with void function return type","body":"<p>Given that you have a Node class as below:</p>\n<pre><code>public class Node\n{\n    public int data;\n    public Node next;\n    public Node(int d)   //constructor.\n    {\n        data = d;\n        next = null;\n    }\n}\n</code></pre>\n<p>And a linkedList class where you have declared a head node, so that it can be accessed by the methods that you create inside LinkedList class. The method 'ReverseLinkedList' takes a Node as an argument and reverses the ll.</p>\n<p>You may do a dry run of the code by considering 1-&gt;2 as the linkedList. Where node = 1, node.next = 2.</p>\n<pre><code> public class LinkedList\n{\n    public Node? head;  //head of list\n\n    public LinkedList()\n    {\n        head = null;\n    }\n\n\n    public void ReverseLinkedList(Node node)\n    {\n        if(node==null)\n        {\n            return;\n        }\n        if(node.next==null)\n        {\n            head = node;\n            return;\n        }\n        \n\n        ReverseLinkedList(node.next);   // node.next = rest of the linkedList\n\n        node.next.next = node;   // consider node as the first part of linkedList\n        node.next = null;\n\n    }\n\n    \n}\n</code></pre>\n"}],"owner":{"account_id":2988790,"reputation":1187,"user_id":2546848,"accept_rate":50,"display_name":"tmgr"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5712,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":17525891,"answer_count":11,"score":4,"last_activity_date":1675430903,"creation_date":1373283854,"question_id":17525757,"body_markdown":"I was trying to reverse a linked list using recursion. I got the solution, but can&#39;t get it to work for below question found on internet.\r\n\r\n&gt; Reverse a linked list using recursion but function should have void\r\n&gt; return type.\r\n\r\nI was able to implement the function with return type as **Node**. Below is my solution.\r\n\r\n    public static Node recursive(Node start) {\r\n    \t\t\r\n    \t// exit condition\r\n    \tif(start == null || start.next == null)\r\n    \t\treturn start;\r\n    \t\t\r\n    \tNode remainingNode = recursive(start.next);\r\n    \t\t\r\n    \tNode current = remainingNode;\r\n    \t\t\r\n    \twhile(current.next != null)\r\n    \t       current = current.next;\r\n    \t\t\r\n    \tcurrent.next = start;\r\n    \tstart.next = null;\r\n    \treturn remainingNode;\r\n     }\r\n\r\nI cannot imagine if there will be such a solution to this problem. \r\n\r\nAny suggestions ? ","title":"Recursion - Reverse LinkedList with void function return type","body":"<p>I was trying to reverse a linked list using recursion. I got the solution, but can't get it to work for below question found on internet.</p>\n\n<blockquote>\n  <p>Reverse a linked list using recursion but function should have void\n  return type.</p>\n</blockquote>\n\n<p>I was able to implement the function with return type as <strong>Node</strong>. Below is my solution.</p>\n\n<pre><code>public static Node recursive(Node start) {\n\n    // exit condition\n    if(start == null || start.next == null)\n        return start;\n\n    Node remainingNode = recursive(start.next);\n\n    Node current = remainingNode;\n\n    while(current.next != null)\n           current = current.next;\n\n    current.next = start;\n    start.next = null;\n    return remainingNode;\n }\n</code></pre>\n\n<p>I cannot imagine if there will be such a solution to this problem. </p>\n\n<p>Any suggestions ? </p>\n"},{"tags":["java","spring-boot","spring-rabbit"],"comments":[{"owner":{"account_id":15102634,"reputation":338,"user_id":10899197,"display_name":"Tr1monster"},"score":0,"creation_date":1675425819,"post_id":75335151,"comment_id":132931339,"body_markdown":"Is the RabbitAutoConfiguration a class from your project or something you receive trough a dependency? Maybe this Question will help: https://stackoverflow.com/questions/30845711/disable-rabbitautoconfiguration-programmatically","body":"Is the RabbitAutoConfiguration a class from your project or something you receive trough a dependency? Maybe this Question will help: <a href=\"https://stackoverflow.com/questions/30845711/disable-rabbitautoconfiguration-programmatically\" title=\"disable rabbitautoconfiguration programmatically\">stackoverflow.com/questions/30845711/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675430749,"creation_date":1675430749,"answer_id":75336362,"question_id":75335151,"body_markdown":"It looks like RabbitMQ is disabled and that&#39;s actually a reason of the exception you get. Your code contains a bean that gets loaded (and autowired) in the test setup, that looks like this:\r\n\r\n\r\n```java\r\n@Component\r\npublic class MyMessageManager {\r\n   @Autowired\r\n   private RabbitTemplate rabbitTemplate;\r\n\r\n   public void doSomething() {\r\n      ....\r\n      rabbitTemplate.&lt;...&gt; // use the template \r\n   }\r\n}\r\n```\r\nWhen spring test creates the instance of this bean it should be able to inject something that looks like a rabbit template, but since you&#39;ve disabled it - there is no bean to be injected, hence the error.\r\n\r\nHow to solve it? \r\nWell, there are many different approaches:\r\n\r\n1. Use @MockBean in the test\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest(\r\n        webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT,\r\n        classes = {PDFService.class},\r\n        properties = {\r\n                &quot;spring.cloud.config.enabled=false&quot;,\r\n                &quot;spring.cloud.discovery.enabled=false&quot;,\r\n        })\r\n@EnableAutoConfiguration(exclude = {RabbitAutoConfiguration.class})\r\nclass PDFServiceTest {\r\n   ...\r\n   @MockBean RabbitTemplate template;\r\n```\r\nNow the mock of rabbit template will be injected into all the beans that need it.\r\n\r\n2. Refactor the code in a way that the class that uses RabbitTemplate won&#39;t be loaded. Usually it works well if you don&#39;t really want to test the functionality of that class.\r\n\r\n3. Don&#39;t disable Rabbit MQ, instead, try using Test Containers and start rabbit mq before the test, create an infra that will define everything you need to run the code and inject a real rabbit template that works with the test container of rabbit. This is good if you actually want to test the message sending/receiving mechanism\r\n\r\n\r\n","title":"How to disable RabbitMQ in a SpringBoot Test","body":"<p>It looks like RabbitMQ is disabled and that's actually a reason of the exception you get. Your code contains a bean that gets loaded (and autowired) in the test setup, that looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class MyMessageManager {\n   @Autowired\n   private RabbitTemplate rabbitTemplate;\n\n   public void doSomething() {\n      ....\n      rabbitTemplate.&lt;...&gt; // use the template \n   }\n}\n</code></pre>\n<p>When spring test creates the instance of this bean it should be able to inject something that looks like a rabbit template, but since you've disabled it - there is no bean to be injected, hence the error.</p>\n<p>How to solve it?\nWell, there are many different approaches:</p>\n<ol>\n<li>Use @MockBean in the test</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest(\n        webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT,\n        classes = {PDFService.class},\n        properties = {\n                &quot;spring.cloud.config.enabled=false&quot;,\n                &quot;spring.cloud.discovery.enabled=false&quot;,\n        })\n@EnableAutoConfiguration(exclude = {RabbitAutoConfiguration.class})\nclass PDFServiceTest {\n   ...\n   @MockBean RabbitTemplate template;\n</code></pre>\n<p>Now the mock of rabbit template will be injected into all the beans that need it.</p>\n<ol start=\"2\">\n<li><p>Refactor the code in a way that the class that uses RabbitTemplate won't be loaded. Usually it works well if you don't really want to test the functionality of that class.</p>\n</li>\n<li><p>Don't disable Rabbit MQ, instead, try using Test Containers and start rabbit mq before the test, create an infra that will define everything you need to run the code and inject a real rabbit template that works with the test container of rabbit. This is good if you actually want to test the message sending/receiving mechanism</p>\n</li>\n</ol>\n"}],"owner":{"account_id":3992180,"reputation":1526,"user_id":3290745,"display_name":"Tristate"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1015,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675430885,"creation_date":1675424081,"question_id":75335151,"body_markdown":"I have a SpringBootTest\r\n\r\n    @ExtendWith(SpringExtension.class)\r\n    @SpringBootTest(\r\n            webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT,\r\n            classes = {PDFService.class},\r\n            properties = {\r\n                    &quot;spring.cloud.config.enabled=false&quot;,\r\n                    &quot;spring.cloud.discovery.enabled=false&quot;,\r\n            })\r\n    @EnableAutoConfiguration(exclude = {RabbitAutoConfiguration.class})\r\n    class PDFServiceTest {\r\n\r\nOn start I got this exception\r\n\r\n    Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: \r\n        No qualifying bean of type &#39;org.springframework.amqp.rabbit.core.RabbitTemplate&#39; available: \r\n        expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\r\nHow can I  disable RabbitMQ in my Tests? Or mock it.","title":"How to disable RabbitMQ in a SpringBoot Test","body":"<p>I have a SpringBootTest</p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest(\n        webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT,\n        classes = {PDFService.class},\n        properties = {\n                &quot;spring.cloud.config.enabled=false&quot;,\n                &quot;spring.cloud.discovery.enabled=false&quot;,\n        })\n@EnableAutoConfiguration(exclude = {RabbitAutoConfiguration.class})\nclass PDFServiceTest {\n</code></pre>\n<p>On start I got this exception</p>\n<pre><code>Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: \n    No qualifying bean of type 'org.springframework.amqp.rabbit.core.RabbitTemplate' available: \n    expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n</code></pre>\n<p>How can I  disable RabbitMQ in my Tests? Or mock it.</p>\n"},{"tags":["java","android","samsung","samsung-browser","samsung-internet"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1675430985,"post_id":75336249,"comment_id":132932821,"body_markdown":"What is your question? There is no requirement for a browser, email client, or anything else to support deeplinks at all, let alone by default.","body":"What is your question? There is no requirement for a browser, email client, or anything else to support deeplinks at all, let alone by default."},{"owner":{"account_id":13479434,"reputation":51,"user_id":9725223,"display_name":"Talha"},"score":0,"creation_date":1675437174,"post_id":75336249,"comment_id":132934911,"body_markdown":"is there any way to enable this option programtically ?","body":"is there any way to enable this option programtically ?"},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1675437469,"post_id":75336249,"comment_id":132935007,"body_markdown":"I would be rather stunned if Samsung had some sort of API to allow arbitrary third-party apps to enable deeplinks. Even if they do, that API would be unique to their app and would not impact Firefox, Outlook, or other apps that do not support deeplinks at all (or not by default).","body":"I would be rather stunned if Samsung had some sort of API to allow arbitrary third-party apps to enable deeplinks. Even if they do, that API would be unique to their app and would not impact Firefox, Outlook, or other apps that do not support deeplinks at all (or not by default)."},{"owner":{"account_id":13479434,"reputation":51,"user_id":9725223,"display_name":"Talha"},"score":0,"creation_date":1675441118,"post_id":75336249,"comment_id":132936358,"body_markdown":"Then what is the concept of deeplink if browser does not allow it?","body":"Then what is the concept of deeplink if browser does not allow it?"},{"owner":{"account_id":13479434,"reputation":51,"user_id":9725223,"display_name":"Talha"},"score":0,"creation_date":1675441391,"post_id":75336249,"comment_id":132936442,"body_markdown":"There&#39;s an Api which give us URL, we open that url in default browser then user perform some authentication there and when the authentication is successful or unsuccessful a deep link is fired and it redirect back to our app where we recieve deeplink with code 200 in case of success or 400 in case of failure. So it is working fine in chrome but in samsung internet browser it does not return the correct deeplink instead it does navigate us back to our app but with wrong link which does not contain any status code. If we open that feature from settings of browser than it works correctly.","body":"There&#39;s an Api which give us URL, we open that url in default browser then user perform some authentication there and when the authentication is successful or unsuccessful a deep link is fired and it redirect back to our app where we recieve deeplink with code 200 in case of success or 400 in case of failure. So it is working fine in chrome but in samsung internet browser it does not return the correct deeplink instead it does navigate us back to our app but with wrong link which does not contain any status code. If we open that feature from settings of browser than it works correctly."},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1675441931,"post_id":75336249,"comment_id":132936631,"body_markdown":"&quot;Then what is the concept of deeplink if browser does not allow it?&quot; -- different browsers and other clients will do different things. As you note, Chrome supports deeplinks by default. You will need some other mechanism for your authentication flow that will work in cases where the deeplink does not launch the app.","body":"&quot;Then what is the concept of deeplink if browser does not allow it?&quot; -- different browsers and other clients will do different things. As you note, Chrome supports deeplinks by default. You will need some other mechanism for your authentication flow that will work in cases where the deeplink does not launch the app."}],"owner":{"account_id":13479434,"reputation":51,"user_id":9725223,"display_name":"Talha"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":587,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675430090,"creation_date":1675430090,"question_id":75336249,"body_markdown":"When the Samsung internet browser feature &quot;Open links in other apps&quot; is disabled then the browser does not return the correct deep link URL it should return links.xxxx.com which contains a success code instead it returns xxxx.com just with no success code. when &quot;Open links in other apps&quot; is turned on then it returns the correct URL. \r\n\r\n\r\n**Note: It does work as expected in Google Chrome.**","title":"Deeplinking not working on Samsung Internet default browser","body":"<p>When the Samsung internet browser feature &quot;Open links in other apps&quot; is disabled then the browser does not return the correct deep link URL it should return links.xxxx.com which contains a success code instead it returns xxxx.com just with no success code. when &quot;Open links in other apps&quot; is turned on then it returns the correct URL.</p>\n<p><strong>Note: It does work as expected in Google Chrome.</strong></p>\n"},{"tags":["java","class","methods","switch-statement"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1675430103,"post_id":75336190,"comment_id":132932546,"body_markdown":"Your design doesn&#39;t make much sense. What do you expect to happen if I were to choose 2 without choosing 1 first?","body":"Your design doesn&#39;t make much sense. What do you expect to happen if I were to choose 2 without choosing 1 first?"},{"owner":{"account_id":18911549,"reputation":600,"user_id":13797513,"display_name":"chptr-one"},"score":0,"creation_date":1675430640,"post_id":75336190,"comment_id":132932706,"body_markdown":"Alternatively, you can check if the circle has already been created, and only then allow the user to select menu items 2 and 3. And yes, you need to create the circle outside of the `switch`, in a more general scope.","body":"Alternatively, you can check if the circle has already been created, and only then allow the user to select menu items 2 and 3. And yes, you need to create the circle outside of the <code>switch</code>, in a more general scope."},{"owner":{"account_id":26498717,"reputation":3,"user_id":20135996,"display_name":"Melvin Lee"},"score":0,"creation_date":1675656378,"post_id":75336190,"comment_id":132969069,"body_markdown":"Ah alright, thank you! Understand that the design itself doesn&#39;t make much sense, but am just trying out different things here to see what&#39;s works and what doesn&#39;t.","body":"Ah alright, thank you! Understand that the design itself doesn&#39;t make much sense, but am just trying out different things here to see what&#39;s works and what doesn&#39;t."}],"owner":{"account_id":26498717,"reputation":3,"user_id":20135996,"display_name":"Melvin Lee"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675429863,"creation_date":1675429710,"question_id":75336190,"body_markdown":"I am currently trying to learn java.\r\n\r\nTo my current knowledge, I understand it is an OO-based language. I am trying to create a simple class &quot;Circle&quot; with basic parameters (radius, area).\r\n\r\nMain function:\r\n```\r\nimport java.util.*;\r\n\r\npublic class CircleApp\r\n{\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\tint choice = 1;\r\n\t\twhile (choice!=4)\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;==== Circle Computation =====&quot;);\r\n\t\t\tSystem.out.println(&quot;|1. Create a new circle \t |&quot;);\r\n\t\t\tSystem.out.println(&quot;|2. Print Area\t \t\t\t |&quot;);\r\n\t\t\tSystem.out.println(&quot;|3. Print circumference \t |&quot;);\r\n\t\t\tSystem.out.println(&quot;|4. Quit \t\t\t\t\t |&quot;);\r\n\t\t\tSystem.out.println(&quot;=============================&quot;);\r\n\t\t\tScanner sc1 = new Scanner(System.in);\r\n\t\t\tchoice = sc1.nextInt();\r\n\t\t\tswitch (choice)\r\n\t\t\t{\r\n\t\t\t\tcase 1:\r\n\t\t\t\t{\r\n\t\t\t\t\tint rad;\r\n\t\t\t\t\tSystem.out.println(&quot;Enter the radius to compute the area and circumference: \\n&quot;);\r\n\t\t\t\t\tScanner sc2 = new Scanner(System.in);\r\n\t\t\t\t\trad = sc2.nextInt();\r\n\t\t\t\t\tCircle circ1 = new Circle(rad);\r\n\t\t\t\t\tcirc1.setRadius(rad);\r\n\t\t\t\t\tcirc1.area();\r\n\t\t\t\t\tcirc1.printArea(circ1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 2:\r\n\t\t\t\t{\r\n\t\t\t\t\tcirc1.area();\r\n\t\t\t\t\tCircle.printArea(circ1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 4:\r\n\t\t\t\t{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tdefault:\r\n\t\t\t\t{\r\n\t\t\t\t\tSystem.out.println(&quot;Choice unknown&quot;);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\nCircle class:\r\n\r\n```\r\nimport java.util.*;\r\nimport java.lang.Math;\r\n\r\npublic class Circle\r\n{\r\n\tprivate double radius; // radius of circle\r\n\tprivate double area;\r\n\tprivate double circumference;\r\n\tprivate static int numCircle;\r\n\tprivate static final double PI = 3.14159;\r\n\t// constructor\r\n\tpublic Circle(double rad)\r\n\t{\r\n\t\tthis.radius = rad;\r\n\t\tnumCircle++;\r\n\t}\r\n\tpublic Circle()\r\n\t{\r\n\t\tradius = 1.0;\r\n\t}\r\n\t// mutator method – set radius\r\n\tpublic void setRadius(double rad)\r\n\t{\r\n\t\tthis.radius = rad;\r\n\t}\r\n\t// accessor method – get radius\r\n\tpublic double getRadius()\r\n\t{\r\n\t\treturn this.radius;\r\n\t}\r\n\t// calculate area\r\n\tpublic double area()\r\n\t{\r\n\t\treturn area =  PI * Math.pow(radius, 2);\r\n\t}\r\n\t// calculate circumference\r\n\tpublic double circumference()\r\n\t{\r\n\t\treturn circumference = 2 * PI * radius;\r\n\t}\r\n\t// print area\r\n\tpublic static void printArea(Circle c)\r\n\t{\r\n\t\tSystem.out.println(&quot;Radius: &quot; + c.radius);\r\n\t\tSystem.out.println(&quot;Area: &quot; + c.area);\r\n\t}\r\n\t// print circumference\r\n\tpublic void printCircumference()\r\n\t{\r\n\t\tSystem.out.println(&quot;Radius: &quot; + radius);\r\n\t\tSystem.out.println(&quot;Circumference: &quot; + circumference);\r\n\t}\r\n}\r\n\r\n```\r\n\r\nCurrently, I am trying to create an instance of class Circle within case 1 of my switch case. However, I am unable to get case 2 (calculate and print area) to run properly. While there is the simple workaround of initialising the object outside the switch case, I was wondering if there is a workaround if I were to initialise the object this way instead.\r\n\r\n\r\nI understand from other sources that the compiler may not respond well to such a scenario as the initialisation of the object is isolated to case 1, which is not guaranteed to be selected first either. Is there a work-around to the issue I am facing or must I initialize the object outside the switch case? Thank you!","title":"Initialising and interacting with class in separate switch-case statements","body":"<p>I am currently trying to learn java.</p>\n<p>To my current knowledge, I understand it is an OO-based language. I am trying to create a simple class &quot;Circle&quot; with basic parameters (radius, area).</p>\n<p>Main function:</p>\n<pre><code>import java.util.*;\n\npublic class CircleApp\n{\n    public static void main(String[] args)\n    {\n        int choice = 1;\n        while (choice!=4)\n        {\n            System.out.println(&quot;==== Circle Computation =====&quot;);\n            System.out.println(&quot;|1. Create a new circle      |&quot;);\n            System.out.println(&quot;|2. Print Area               |&quot;);\n            System.out.println(&quot;|3. Print circumference      |&quot;);\n            System.out.println(&quot;|4. Quit                     |&quot;);\n            System.out.println(&quot;=============================&quot;);\n            Scanner sc1 = new Scanner(System.in);\n            choice = sc1.nextInt();\n            switch (choice)\n            {\n                case 1:\n                {\n                    int rad;\n                    System.out.println(&quot;Enter the radius to compute the area and circumference: \\n&quot;);\n                    Scanner sc2 = new Scanner(System.in);\n                    rad = sc2.nextInt();\n                    Circle circ1 = new Circle(rad);\n                    circ1.setRadius(rad);\n                    circ1.area();\n                    circ1.printArea(circ1);\n                    break;\n                }\n                case 2:\n                {\n                    circ1.area();\n                    Circle.printArea(circ1);\n                    break;\n                }\n                case 4:\n                {\n                    break;\n                }\n                default:\n                {\n                    System.out.println(&quot;Choice unknown&quot;);\n                }\n            }\n        }\n        \n\n    }\n    \n}\n</code></pre>\n<p>Circle class:</p>\n<pre><code>import java.util.*;\nimport java.lang.Math;\n\npublic class Circle\n{\n    private double radius; // radius of circle\n    private double area;\n    private double circumference;\n    private static int numCircle;\n    private static final double PI = 3.14159;\n    // constructor\n    public Circle(double rad)\n    {\n        this.radius = rad;\n        numCircle++;\n    }\n    public Circle()\n    {\n        radius = 1.0;\n    }\n    // mutator method – set radius\n    public void setRadius(double rad)\n    {\n        this.radius = rad;\n    }\n    // accessor method – get radius\n    public double getRadius()\n    {\n        return this.radius;\n    }\n    // calculate area\n    public double area()\n    {\n        return area =  PI * Math.pow(radius, 2);\n    }\n    // calculate circumference\n    public double circumference()\n    {\n        return circumference = 2 * PI * radius;\n    }\n    // print area\n    public static void printArea(Circle c)\n    {\n        System.out.println(&quot;Radius: &quot; + c.radius);\n        System.out.println(&quot;Area: &quot; + c.area);\n    }\n    // print circumference\n    public void printCircumference()\n    {\n        System.out.println(&quot;Radius: &quot; + radius);\n        System.out.println(&quot;Circumference: &quot; + circumference);\n    }\n}\n\n</code></pre>\n<p>Currently, I am trying to create an instance of class Circle within case 1 of my switch case. However, I am unable to get case 2 (calculate and print area) to run properly. While there is the simple workaround of initialising the object outside the switch case, I was wondering if there is a workaround if I were to initialise the object this way instead.</p>\n<p>I understand from other sources that the compiler may not respond well to such a scenario as the initialisation of the object is isolated to case 1, which is not guaranteed to be selected first either. Is there a work-around to the issue I am facing or must I initialize the object outside the switch case? Thank you!</p>\n"},{"tags":["java","android","json","spring","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":21757037,"reputation":296,"user_id":16062235,"display_name":"Yacine"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675429844,"creation_date":1675338306,"answer_id":75322695,"question_id":75322644,"body_markdown":"the issue is with the serialization of the `byte[]` to JSON. The default serialization of a `byte[]` in Java will result in the string representation you have shown which is not a valid format for a binary image. \r\n\r\nTo correctly serialize the `byte[]` as a base64 encoded string, you can use a custom serializer/deserializer in your API. One option is to use the `Base64` class in Java to encode the `byte[]` as a string and then decode the string back to a `byte[]` during deserialization.","title":"JSON parse error: Cannot deserialize value of type `byte[]` from String","body":"<p>the issue is with the serialization of the <code>byte[]</code> to JSON. The default serialization of a <code>byte[]</code> in Java will result in the string representation you have shown which is not a valid format for a binary image.</p>\n<p>To correctly serialize the <code>byte[]</code> as a base64 encoded string, you can use a custom serializer/deserializer in your API. One option is to use the <code>Base64</code> class in Java to encode the <code>byte[]</code> as a string and then decode the string back to a <code>byte[]</code> during deserialization.</p>\n"}],"owner":{"account_id":8720587,"reputation":163,"user_id":6523875,"display_name":"StudentOfTheGame"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2075,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675429844,"creation_date":1675338077,"question_id":75322644,"body_markdown":"I am developing an Android App with a Java Backend using Spring Data JPA. One of my classes represents a profile image and contains the following field:\r\n\r\n```\r\n @Lob\r\n    @Column(name = &quot;image&quot;)\r\n    private byte[] image;\r\n```\r\nWhen i invoke the Rest API that saves the above class the JSON request looks like this:\r\n```\r\n{&quot;image&quot;:&quot;[B@23bafb3&quot;}\r\n```\r\nThen the described error occurs. I have seen suggestions of declaring the image as string and then get the bytes but this does not seem a good practice to me.\r\n","title":"JSON parse error: Cannot deserialize value of type `byte[]` from String","body":"<p>I am developing an Android App with a Java Backend using Spring Data JPA. One of my classes represents a profile image and contains the following field:</p>\n<pre><code> @Lob\n    @Column(name = &quot;image&quot;)\n    private byte[] image;\n</code></pre>\n<p>When i invoke the Rest API that saves the above class the JSON request looks like this:</p>\n<pre><code>{&quot;image&quot;:&quot;[B@23bafb3&quot;}\n</code></pre>\n<p>Then the described error occurs. I have seen suggestions of declaring the image as string and then get the bytes but this does not seem a good practice to me.</p>\n"},{"tags":["java","switch-statement"],"comments":[{"owner":{"account_id":1236102,"reputation":11483,"user_id":1199662,"accept_rate":69,"display_name":"Droidman"},"score":0,"creation_date":1377297917,"post_id":18412936,"comment_id":27048365,"body_markdown":"@OliCharlesworth yep. Check my comment for arshajii&#39;s answer","body":"@OliCharlesworth yep. Check my comment for arshajii&#39;s answer"},{"owner":{"account_id":1593181,"reputation":5129,"user_id":1476062,"display_name":"Dennis Meng"},"score":0,"creation_date":1377298013,"post_id":18412936,"comment_id":27048392,"body_markdown":"arshajii doesn&#39;t seem to have an answer...","body":"arshajii doesn&#39;t seem to have an answer..."},{"owner":{"account_id":1075870,"reputation":7152,"user_id":1074041,"accept_rate":100,"display_name":"Trevor Freeman"},"score":2,"creation_date":1377298255,"post_id":18412936,"comment_id":27048466,"body_markdown":"`||` is essentially the default operation of a case statement in the absence of `break`.","body":"<code>||</code> is essentially the default operation of a case statement in the absence of <code>break</code>."},{"owner":{"account_id":305390,"reputation":424,"user_id":615520,"accept_rate":72,"display_name":"SerotoninChase"},"score":1,"creation_date":1377298446,"post_id":18412936,"comment_id":27048519,"body_markdown":"Think about it this way - If switch had the same capability as if-else then why do we need both? It&#39;ll be redundant!! The idea of switch is to improve readability as opposed to writing spaghetti code with multiple if else blocks. Arguably switch also gives slightly a better performance due to its simplicity.","body":"Think about it this way - If switch had the same capability as if-else then why do we need both? It&#39;ll be redundant!! The idea of switch is to improve readability as opposed to writing spaghetti code with multiple if else blocks. Arguably switch also gives slightly a better performance due to its simplicity."},{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":0,"creation_date":1377300481,"post_id":18412936,"comment_id":27048982,"body_markdown":"The Ada language does the exact sort of thing you&#39;re asking about--you&#39;d say `when Some_Value | Some_Other_Value =&gt;` in a `case` statement.  But the language doesn&#39;t use | as an operator, so there&#39;s no way this syntax could be ambiguous.  Using || for this purpose in C (Java, etc.) would make the syntax ambiguous, and it&#39;s not a good idea to have funky rules with exceptions (like || means one thing in an expression except that it means something different in a different context...).","body":"The Ada language does the exact sort of thing you&#39;re asking about--you&#39;d say <code>when Some_Value | Some_Other_Value =&gt;</code> in a <code>case</code> statement.  But the language doesn&#39;t use | as an operator, so there&#39;s no way this syntax could be ambiguous.  Using || for this purpose in C (Java, etc.) would make the syntax ambiguous, and it&#39;s not a good idea to have funky rules with exceptions (like || means one thing in an expression except that it means something different in a different context...)."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1377301085,"post_id":18412936,"comment_id":27049110,"body_markdown":"Because it&#39;s redundant?","body":"Because it&#39;s redundant?"}],"answers":[{"tags":[],"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"down_vote_count":0,"up_vote_count":62,"is_accepted":true,"score":62,"last_activity_date":1377301127,"creation_date":1377297763,"answer_id":18412950,"question_id":18412936,"body_markdown":"&gt; What are the backgrounds for a switch-case to not accept this operator?\r\n\r\nBecause `case` requires constant expression as its value. And since an `||` expression is not a compile time constant, it is not allowed.\r\n\r\nFrom [JLS Section 14.11][1]:\r\n\r\nSwitch label should have following syntax:\r\n\r\n&gt; SwitchLabel:  \r\n&gt;     case ConstantExpression :  \r\n&gt;      case EnumConstantName :  \r\n&gt;      default :\r\n\r\n&lt;hr /&gt;\r\n\r\nUnder the hood:\r\n--------------\r\n\r\nThe reason behind allowing just constant expression with cases can be understood from the [JVM Spec Section 3.10 - Compiling Switches][2]:\r\n\r\n&gt; Compilation of switch statements uses the **tableswitch** and **lookupswitch** instructions. The tableswitch instruction is used when the cases of the switch can be efficiently represented as indices into a table of target offsets. The default target of the switch is used if the value of the expression of the switch falls outside the range of valid indices. \r\n\r\nSo, for the cases label to be used by `tableswitch` as a index into the table of target offsets, the value of the case should be known at compile time. That is only possible if the case value is a constant expression. And `||` expression will be evaluated at runtime, and the value will only be available at that time.\r\n\r\nFrom the same JVM section, the following `switch-case`:\r\n\r\n    switch (i) {\r\n        case 0:  return  0;\r\n        case 1:  return  1;\r\n        case 2:  return  2;\r\n        default: return -1;\r\n    }\r\n\r\nis compiled to:\r\n\r\n    0   iload_1             // Push local variable 1 (argument i)\r\n    1   tableswitch 0 to 2: // Valid indices are 0 through 2  (NOTICE This instruction?)\r\n          0: 28             // If i is 0, continue at 28\r\n          1: 30             // If i is 1, continue at 30\r\n          2: 32             // If i is 2, continue at 32\r\n          default:34        // Otherwise, continue at 34\r\n    28  iconst_0            // i was 0; push int constant 0...\r\n    29  ireturn             // ...and return it\r\n    30  iconst_1            // i was 1; push int constant 1...\r\n    31  ireturn             // ...and return it\r\n    32  iconst_2            // i was 2; push int constant 2...\r\n    33  ireturn             // ...and return it\r\n    34  iconst_m1           // otherwise push int constant -1...\r\n    35  ireturn             // ...and return it\r\n\r\nSo, if the `case` value is not a constant expressions, compiler won&#39;t be able to index it into the table of instruction pointers, using `tableswitch` instruction.\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.11\r\n  [2]: http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-3.html#jvms-3.10","title":"OR operator in switch-case?","body":"<blockquote>\n  <p>What are the backgrounds for a switch-case to not accept this operator?</p>\n</blockquote>\n\n<p>Because <code>case</code> requires constant expression as its value. And since an <code>||</code> expression is not a compile time constant, it is not allowed.</p>\n\n<p>From <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.11\" rel=\"noreferrer\">JLS Section 14.11</a>:</p>\n\n<p>Switch label should have following syntax:</p>\n\n<blockquote>\n  <p>SwitchLabel:<br>\n      case ConstantExpression :<br>\n       case EnumConstantName :<br>\n       default :</p>\n</blockquote>\n\n<hr />\n\n<h2>Under the hood:</h2>\n\n<p>The reason behind allowing just constant expression with cases can be understood from the <a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-3.html#jvms-3.10\" rel=\"noreferrer\">JVM Spec Section 3.10 - Compiling Switches</a>:</p>\n\n<blockquote>\n  <p>Compilation of switch statements uses the <strong>tableswitch</strong> and <strong>lookupswitch</strong> instructions. The tableswitch instruction is used when the cases of the switch can be efficiently represented as indices into a table of target offsets. The default target of the switch is used if the value of the expression of the switch falls outside the range of valid indices. </p>\n</blockquote>\n\n<p>So, for the cases label to be used by <code>tableswitch</code> as a index into the table of target offsets, the value of the case should be known at compile time. That is only possible if the case value is a constant expression. And <code>||</code> expression will be evaluated at runtime, and the value will only be available at that time.</p>\n\n<p>From the same JVM section, the following <code>switch-case</code>:</p>\n\n<pre><code>switch (i) {\n    case 0:  return  0;\n    case 1:  return  1;\n    case 2:  return  2;\n    default: return -1;\n}\n</code></pre>\n\n<p>is compiled to:</p>\n\n<pre><code>0   iload_1             // Push local variable 1 (argument i)\n1   tableswitch 0 to 2: // Valid indices are 0 through 2  (NOTICE This instruction?)\n      0: 28             // If i is 0, continue at 28\n      1: 30             // If i is 1, continue at 30\n      2: 32             // If i is 2, continue at 32\n      default:34        // Otherwise, continue at 34\n28  iconst_0            // i was 0; push int constant 0...\n29  ireturn             // ...and return it\n30  iconst_1            // i was 1; push int constant 1...\n31  ireturn             // ...and return it\n32  iconst_2            // i was 2; push int constant 2...\n33  ireturn             // ...and return it\n34  iconst_m1           // otherwise push int constant -1...\n35  ireturn             // ...and return it\n</code></pre>\n\n<p>So, if the <code>case</code> value is not a constant expressions, compiler won't be able to index it into the table of instruction pointers, using <code>tableswitch</code> instruction.</p>\n"},{"tags":[],"owner":{"account_id":1643981,"reputation":2192,"user_id":1515891,"accept_rate":100,"display_name":"spt025"},"down_vote_count":3,"up_vote_count":123,"is_accepted":false,"score":120,"last_activity_date":1377297927,"creation_date":1377297927,"answer_id":18412971,"question_id":18412936,"body_markdown":"dude do like this \r\n\r\n        case R.id.someValue :\r\n        case R.id.someOtherValue :\r\n           //do stuff\r\n\r\nThis is same as using OR operator between two values \r\nBecause of this case operator isn&#39;t there in switch case","title":"OR operator in switch-case?","body":"<p>dude do like this </p>\n\n<pre><code>    case R.id.someValue :\n    case R.id.someOtherValue :\n       //do stuff\n</code></pre>\n\n<p>This is same as using OR operator between two values \nBecause of this case operator isn't there in switch case</p>\n"},{"tags":[],"owner":{"account_id":350533,"reputation":10937,"user_id":686478,"accept_rate":59,"display_name":"Prashant Bhate"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1377299293,"creation_date":1377299293,"answer_id":18413163,"question_id":18412936,"body_markdown":"Switch is not same as if-else-if. \r\n\r\nSwitch is used when there is one expression that gets evaluated to a value and that value can be one of predefined set of values. If you need to perform multiple boolean / comparions operations run-time then if-else-if needs to be used.\r\n\r\n\r\n\r\n\r\n ","title":"OR operator in switch-case?","body":"<p>Switch is not same as if-else-if. </p>\n\n<p>Switch is used when there is one expression that gets evaluated to a value and that value can be one of predefined set of values. If you need to perform multiple boolean / comparions operations run-time then if-else-if needs to be used.</p>\n"},{"tags":[],"owner":{"account_id":10995735,"reputation":526,"user_id":8078014,"display_name":"Breimer"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1511010888,"creation_date":1511010888,"answer_id":47366512,"question_id":18412936,"body_markdown":"    foreach (array(&#39;one&#39;, &#39;two&#39;, &#39;three&#39;) as $v) {\r\n        switch ($v) {\r\n            case (function ($v) {\r\n                if ($v == &#39;two&#39;) return $v;\r\n                return &#39;one&#39;;\r\n            })($v):\r\n                echo &quot;$v min \\n&quot;;\r\n                break;\r\n    \r\n    \r\n        }\r\n    }\r\n\r\nthis works fine for languages supporting enclosures\r\n\r\n","title":"OR operator in switch-case?","body":"<pre><code>foreach (array('one', 'two', 'three') as $v) {\n    switch ($v) {\n        case (function ($v) {\n            if ($v == 'two') return $v;\n            return 'one';\n        })($v):\n            echo \"$v min \\n\";\n            break;\n\n\n    }\n}\n</code></pre>\n\n<p>this works fine for languages supporting enclosures</p>\n"},{"tags":[],"owner":{"account_id":6555092,"reputation":1946,"user_id":5068021,"accept_rate":75,"display_name":"Hilaj S L"},"down_vote_count":0,"up_vote_count":46,"is_accepted":false,"score":46,"last_activity_date":1535267546,"creation_date":1535262857,"answer_id":52023566,"question_id":18412936,"body_markdown":"You cannot use || operators in between 2 case. But you can use multiple case values without using a break between them. The program will then jump to the respective case and then it will look for code to execute until it finds a &quot;break&quot;. As a result these cases will share the same code.\r\n\r\n    switch(value) \r\n    { \r\n        case 0: \r\n        case 1: \r\n            // do stuff for if case 0 || case 1 \r\n            break; \r\n        // other cases \r\n        default: \r\n            break; \r\n    }","title":"OR operator in switch-case?","body":"<p>You cannot use || operators in between 2 case. But you can use multiple case values without using a break between them. The program will then jump to the respective case and then it will look for code to execute until it finds a \"break\". As a result these cases will share the same code.</p>\n\n<pre><code>switch(value) \n{ \n    case 0: \n    case 1: \n        // do stuff for if case 0 || case 1 \n        break; \n    // other cases \n    default: \n        break; \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21059950,"reputation":49,"user_id":15478539,"display_name":"Naveed Khan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1618979349,"creation_date":1618979349,"answer_id":67189295,"question_id":18412936,"body_markdown":"I do not know a best approach but I do it as\r\n\r\n```\r\ncase &#39;E&#39;:\r\ncase &#39;e&#39;:\r\n   System.exit(0);\r\n   break;\r\n```","title":"OR operator in switch-case?","body":"<p>I do not know a best approach but I do it as</p>\n<pre><code>case 'E':\ncase 'e':\n   System.exit(0);\n   break;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11492539,"reputation":1,"user_id":8422977,"display_name":"Владимир Комяк"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1652647689,"creation_date":1652641666,"answer_id":72251417,"question_id":18412936,"body_markdown":"helps in some cases.\r\n\r\n    switch(true){\r\n     case a == b: break;\r\n     case a == 2 || a == 3: break;\r\n     default: break;\r\n    } ","title":"OR operator in switch-case?","body":"<p>helps in some cases.</p>\n<pre><code>switch(true){\n case a == b: break;\n case a == 2 || a == 3: break;\n default: break;\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":9607071,"reputation":384,"user_id":7132774,"display_name":"Dave Lee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659377444,"creation_date":1659377444,"answer_id":73197897,"question_id":18412936,"body_markdown":"You can still do it like this.\r\n```\r\nswitch (v.getId()) {\r\n    case R.id.someValue: case R.id.someOtherValue:\r\n        // do stuff\r\n        break;\r\n}\r\n```","title":"OR operator in switch-case?","body":"<p>You can still do it like this.</p>\n<pre><code>switch (v.getId()) {\n    case R.id.someValue: case R.id.someOtherValue:\n        // do stuff\n        break;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15944383,"reputation":21,"user_id":11505381,"display_name":"makeussrgreatagain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675429695,"creation_date":1675429695,"answer_id":75336187,"question_id":18412936,"body_markdown":"&lt;!-- language-all: lang-java --&gt;\r\n\r\n[Since Java 12][1] and on it is possible to have multiple values in cases:\r\n``` java\r\n@Override\r\npublic void onClick(View v) {\r\n    switch (v.getId()) {\r\n        case R.id.someValue, R.id.someOtherValue:\r\n            // do stuff\r\n            break;\r\n    }\r\n}\r\n```\r\n\r\nOR\r\n\r\n```\r\n@Override\r\npublic void onClick(View v) {\r\n    switch (v.getId()) {\r\n        case R.id.someValue, R.id.someOtherValue -&gt; {/* do stuff */}\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/325","title":"OR operator in switch-case?","body":"\n<p><a href=\"https://openjdk.org/jeps/325\" rel=\"nofollow noreferrer\">Since Java 12</a> and on it is possible to have multiple values in cases:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void onClick(View v) {\n    switch (v.getId()) {\n        case R.id.someValue, R.id.someOtherValue:\n            // do stuff\n            break;\n    }\n}\n</code></pre>\n<p>OR</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void onClick(View v) {\n    switch (v.getId()) {\n        case R.id.someValue, R.id.someOtherValue -&gt; {/* do stuff */}\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1236102,"reputation":11483,"user_id":1199662,"accept_rate":69,"display_name":"Droidman"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":242321,"favorite_count":0,"down_vote_count":0,"up_vote_count":67,"accepted_answer_id":18412950,"answer_count":9,"score":67,"last_activity_date":1675429695,"creation_date":1377297686,"question_id":18412936,"body_markdown":"Let&#39;s take a simple switch-case that looks like:\r\n\r\n    @Override\r\n    public void onClick(View v) {\r\n        switch (v.getId()) {\r\n            case R.id.someValue :\r\n            case R.id.someOtherValue:\r\n                // do stuff\r\n                break;\r\n        }\r\n    }\r\n\r\nI wonder why it is not allowed to use the `||` operator? Like\r\n\r\n    switch (v.getId()) {\r\n        case R.id.someValue || R.id.someOtherValue:\r\n            // do stuff\r\n            break;\r\n    }\r\n\r\nThe `switch-case` construct is pretty similar to an `if-else` statement, you can use the OR operator in an `if` however. What are the backgrounds for a `switch-case` to not accept this operator?","title":"OR operator in switch-case?","body":"<p>Let's take a simple switch-case that looks like:</p>\n\n<pre><code>@Override\npublic void onClick(View v) {\n    switch (v.getId()) {\n        case R.id.someValue :\n        case R.id.someOtherValue:\n            // do stuff\n            break;\n    }\n}\n</code></pre>\n\n<p>I wonder why it is not allowed to use the <code>||</code> operator? Like</p>\n\n<pre><code>switch (v.getId()) {\n    case R.id.someValue || R.id.someOtherValue:\n        // do stuff\n        break;\n}\n</code></pre>\n\n<p>The <code>switch-case</code> construct is pretty similar to an <code>if-else</code> statement, you can use the OR operator in an <code>if</code> however. What are the backgrounds for a <code>switch-case</code> to not accept this operator?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9316,"page":676,"page_size":100}
