{"items":[{"tags":["java","gradle"],"comments":[{"owner":{"account_id":16673497,"reputation":2011,"user_id":12050506,"display_name":"possum"},"score":0,"creation_date":1700560860,"post_id":77521854,"comment_id":136666886,"body_markdown":"Does this answer your question? [Causes of getting a java.lang.VerifyError](https://stackoverflow.com/questions/100107/causes-of-getting-a-java-lang-verifyerror)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/100107/causes-of-getting-a-java-lang-verifyerror\">Causes of getting a java.lang.VerifyError</a>"}],"owner":{"account_id":19499426,"reputation":45,"user_id":14265892,"display_name":"Anurag"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700560611,"creation_date":1700560611,"question_id":77521854,"body_markdown":"I am facing the below issue when running my jar:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48)\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:87)\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:51)\r\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:52)\r\nCaused by: java.lang.VerifyError: Bad return type\r\nException Details:\r\n  Location:\r\n    org/apache/commons/logging/LogFactory.getFactory()Lorg/apache/commons/logging/LogFactory; @7: areturn\r\n  Reason:\r\n    Type &#39;org/apache/commons/logging/LogFactory$1&#39; (current frame, stack[0]) is not assignable to &#39;org/apache/commons/logging/LogFactory&#39; (from method signature)\r\n  Current Frame:\r\n    bci: @7\r\n    flags: { }\r\n    locals: { }\r\n    stack: { &#39;org/apache/commons/logging/LogFactory$1&#39; }\r\n  Bytecode:\r\n    0000000: bb00 0559 b700 06b0\r\n\r\n        at org.springframework.boot.SpringApplication.&lt;clinit&gt;(SpringApplication.java:195)\r\n        at com.philips.asp.container.cv.CvEtlApplication.main(CvEtlApplication.java:20)\r\n        ... 8 more\r\n```\r\n\r\nI am using Java 11 and gradle 4.10.2.\r\nAnd dependency task gives below output: \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/s19B9.png","title":"java.lang.VerifyError: Bad return type","body":"<p>I am facing the below issue when running my jar:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48)\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:87)\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:51)\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:52)\nCaused by: java.lang.VerifyError: Bad return type\nException Details:\n  Location:\n    org/apache/commons/logging/LogFactory.getFactory()Lorg/apache/commons/logging/LogFactory; @7: areturn\n  Reason:\n    Type 'org/apache/commons/logging/LogFactory$1' (current frame, stack[0]) is not assignable to 'org/apache/commons/logging/LogFactory' (from method signature)\n  Current Frame:\n    bci: @7\n    flags: { }\n    locals: { }\n    stack: { 'org/apache/commons/logging/LogFactory$1' }\n  Bytecode:\n    0000000: bb00 0559 b700 06b0\n\n        at org.springframework.boot.SpringApplication.&lt;clinit&gt;(SpringApplication.java:195)\n        at com.philips.asp.container.cv.CvEtlApplication.main(CvEtlApplication.java:20)\n        ... 8 more\n</code></pre>\n<p>I am using Java 11 and gradle 4.10.2.\nAnd dependency task gives below output:\n<a href=\"https://i.stack.imgur.com/s19B9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s19B9.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","jpa"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":2,"creation_date":1700479841,"post_id":77515481,"comment_id":136655571,"body_markdown":"You are throwing a checked exception and not showing us the actual exception you are facing.   Can you please paste the actual stack trace.  What I am seeing is the checked exception log...not the actual problem encountered.   I want this        \n            ex.printStackTrace();","body":"You are throwing a checked exception and not showing us the actual exception you are facing.   Can you please paste the actual stack trace.  What I am seeing is the checked exception log...not the actual problem encountered.   I want this                     ex.printStackTrace();"},{"owner":{"account_id":13175119,"reputation":56,"user_id":9516271,"display_name":"Hashila"},"score":0,"creation_date":1700481045,"post_id":77515481,"comment_id":136655771,"body_markdown":"It is not getting anything other than that","body":"It is not getting anything other than that"},{"owner":{"account_id":26746848,"reputation":226,"user_id":20346807,"display_name":"Joan"},"score":0,"creation_date":1700481746,"post_id":77515481,"comment_id":136655898,"body_markdown":"As @JCompetence said you should provide the result of this: ex.printStackTrace();. Just remove the try catch block and provide the output of the proper exception.","body":"As @JCompetence said you should provide the result of this: ex.printStackTrace();. Just remove the try catch block and provide the output of the proper exception."},{"owner":{"account_id":13175119,"reputation":56,"user_id":9516271,"display_name":"Hashila"},"score":0,"creation_date":1700481967,"post_id":77515481,"comment_id":136655946,"body_markdown":"Ok sure, I will share you","body":"Ok sure, I will share you"}],"owner":{"account_id":13175119,"reputation":56,"user_id":9516271,"display_name":"Hashila"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700560479,"creation_date":1700479309,"question_id":77515481,"body_markdown":"I am getting this error when quering from the beloq custom repository method it is not getting the error every time, this is a multi tenant applicaiton this error coming only from a specific tenant. I have checked the data at the database, there are no any missing or errored data can be found.\r\n\r\n\r\n```\r\n2023-11-20 10:49:40,927 ERROR c.p.v.m.ControllerAdvisor [http-nio-5050-exec-4] An error occurred while searching, please try again.\r\ncom.papertrl.vportal.exception.PaperTrlCheckedException: An error occurred while searching, please try again.\r\n        at com.papertrl.vportal.service.impl.ExpenseServiceImpl.searchExpenseListGrid(ExpenseServiceImpl.java:839)\r\n        at com.papertrl.vportal.service.impl.ExpenseServiceImpl$$FastClassBySpringCGLIB$$4876cb67.invoke(&lt;generated&gt;)\r\n        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:367)\r\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\r\n        at com.papertrl.vportal.service.impl.ExpenseServiceImpl$$EnhancerBySpringCGLIB$$9bf24dbd.searchExpenseListGrid(&lt;generated&gt;)\r\n        at com.papertrl.vportal.service.impl.ExpenseServiceImpl$$FastClassBySpringCGLIB$$4876cb67.invoke(&lt;generated&gt;)\r\n        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n        at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136)\r\n        at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\r\n        at com.papertrl.vportal.service.impl.ExpenseServiceImpl$$EnhancerBySpringCGLIB$$e4b0f6ab.searchExpenseListGrid(&lt;generated&gt;)\r\n        at com.papertrl.vportal.controller.ExpenseController.searchExpenseListGrid(ExpenseController.java:53)\r\n        at com.papertrl.vportal.controller.ExpenseController$$FastClassBySpringCGLIB$$3a92de4d.invoke(&lt;generated&gt;)\r\n        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n        at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136)\r\n        at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\r\n        at com.papertrl.vportal.controller.ExpenseController$$EnhancerBySpringCGLIB$$53f8bf11.searchExpenseListGrid(&lt;generated&gt;)\r\n        at sun.reflect.GeneratedMethodAccessor1085.invoke(Unknown Source)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)\r\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\r\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)\r\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)\r\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\r\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)\r\n        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)\r\n        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126)\r\n        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90)\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118)\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158)\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n        at org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter.doFilter(OAuth2AuthenticationProcessingFilter.java:176)\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)\r\n        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)\r\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\r\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\r\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\r\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\r\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n\r\n```\r\n\r\n\r\nthis is my code \r\n\r\n**Service class**\r\n\r\n\r\n```java\r\n@Override\r\npublic ResponseEntity&lt;Object&gt; searchExpenseListGrid(GridSearchDtoV2 gridSearchDtoV2) throws PaperTrlCheckedException {\r\n\ttry {\r\n\t\tGridSearchResultContainerDtoV2 resultContainerDtoV2 = new GridSearchResultContainerDtoV2();\r\n\t\taddRestrictionsToTheDocument(gridSearchDtoV2);\r\n\t\tresultContainerDtoV2.setData(expenseMasterRepository.searchExpense(gridSearchDtoV2));\r\n\t\t     resultContainerDtoV2.setTotalRecords(expenseMasterRepository.getTotalResult(gridSearchDtoV2));\r\n\t\treturn new ResponseEntity(resultContainerDtoV2, HttpStatus.OK);\r\n\t} catch (Exception ex) {\r\n\t\tex.printStackTrace();\r\n\t\tthrow new PaperTrlCheckedException(ExceptionMessages.SEARCH_FAILED);\r\n\t}\r\n}\r\n```\r\n\r\n\r\n**custom repository method**\r\n\r\n\r\n```java\r\n@Override\r\npublic List&lt;ExpenseGridSearchResultDto&gt; searchExpense(GridSearchDtoV2 gridSearchDtoV2) throws ParseException {\r\n\tString sql = &quot;SELECT new com.papertrl.vportal.dto.grid.ExpenseGridSearchResultDto(expense.attachmentId,expense.id, expense.id,expense.reportName,&quot;\r\n                + &quot;expense.createdByName,expense.createdOn,automation.automationName,expense.approvalUserName,expense.approvalGroupName,expense.totalAmount,&quot;\r\n                + &quot;expense.status,expense.startFrom,expense.endDate,expense.exportStatus,expense.approvalUser,expense.approvalGroup, expense.vendorId,&quot; +\r\n                &quot; expense.paymentStatus, expense.balanceAmount, dept.departmentName,expense.paidAmount) &quot;\r\n                + &quot;FROM VpExpenseMst expense LEFT JOIN CommonAutomationMst automation ON automation.id=expense.automationId&quot;\r\n                + &quot; LEFT JOIN UmmApprovalGroup appGroup ON appGroup.id=expense.approvalGroup&quot;\r\n                + &quot; LEFT JOIN CommonDepartment dept ON dept.id=expense.departmentId&quot;\r\n                + &quot; LEFT JOIN VpVendorMst vendor ON vendor.id=expense.vendorId&quot;\r\n                + &quot; WHERE expense.status&lt;&gt;&#39;&quot; + CommonConstants.STATUS_DELETED + &quot;&#39; &quot;\r\n                + &quot; AND (expense.status&lt;&gt;&#39;&quot; + STATUS_DRAFT + &quot;&#39; OR (expense.status=&#39;&quot; + STATUS_DRAFT + &quot;&#39; AND expense.createdBy=:&quot; + PARAM_CREATED_BY_ID + &quot;)) &quot;;\r\n\r\n\tsql = setConditions(gridSearchDtoV2, sql);\r\n\tsql = setOrderBy(gridSearchDtoV2, sql);\r\n\tQuery query = entityManager.createQuery(sql);\r\n\tsetParameters(gridSearchDtoV2, query);\r\n\tquery.setParameter(PARAM_CREATED_BY_ID, SecurityContextHolder.getContext().getAuthentication().getName());\r\n\r\n\tquery.setFirstResult(gridSearchDtoV2.getFirst());\r\n\tquery.setMaxResults(gridSearchDtoV2.getRows());\r\n\treturn query.getResultList();\r\n}\r\n```\r\n\r\n\r\nplease give me solution for this, still I can&#39;t find the route cource of the issue by reading the log.","title":"When getting data from custom repository in Java got this error","body":"<p>I am getting this error when quering from the beloq custom repository method it is not getting the error every time, this is a multi tenant applicaiton this error coming only from a specific tenant. I have checked the data at the database, there are no any missing or errored data can be found.</p>\n<pre><code>2023-11-20 10:49:40,927 ERROR c.p.v.m.ControllerAdvisor [http-nio-5050-exec-4] An error occurred while searching, please try again.\ncom.papertrl.vportal.exception.PaperTrlCheckedException: An error occurred while searching, please try again.\n        at com.papertrl.vportal.service.impl.ExpenseServiceImpl.searchExpenseListGrid(ExpenseServiceImpl.java:839)\n        at com.papertrl.vportal.service.impl.ExpenseServiceImpl$$FastClassBySpringCGLIB$$4876cb67.invoke(&lt;generated&gt;)\n        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:367)\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\n        at com.papertrl.vportal.service.impl.ExpenseServiceImpl$$EnhancerBySpringCGLIB$$9bf24dbd.searchExpenseListGrid(&lt;generated&gt;)\n        at com.papertrl.vportal.service.impl.ExpenseServiceImpl$$FastClassBySpringCGLIB$$4876cb67.invoke(&lt;generated&gt;)\n        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n        at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136)\n        at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\n        at com.papertrl.vportal.service.impl.ExpenseServiceImpl$$EnhancerBySpringCGLIB$$e4b0f6ab.searchExpenseListGrid(&lt;generated&gt;)\n        at com.papertrl.vportal.controller.ExpenseController.searchExpenseListGrid(ExpenseController.java:53)\n        at com.papertrl.vportal.controller.ExpenseController$$FastClassBySpringCGLIB$$3a92de4d.invoke(&lt;generated&gt;)\n        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n        at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136)\n        at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\n        at com.papertrl.vportal.controller.ExpenseController$$EnhancerBySpringCGLIB$$53f8bf11.searchExpenseListGrid(&lt;generated&gt;)\n        at sun.reflect.GeneratedMethodAccessor1085.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105)\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:652)\n        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)\n        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126)\n        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n        at org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter.doFilter(OAuth2AuthenticationProcessingFilter.java:176)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)\n        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.lang.Thread.run(Thread.java:748)\n\n</code></pre>\n<p>this is my code</p>\n<p><strong>Service class</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic ResponseEntity&lt;Object&gt; searchExpenseListGrid(GridSearchDtoV2 gridSearchDtoV2) throws PaperTrlCheckedException {\n    try {\n        GridSearchResultContainerDtoV2 resultContainerDtoV2 = new GridSearchResultContainerDtoV2();\n        addRestrictionsToTheDocument(gridSearchDtoV2);\n        resultContainerDtoV2.setData(expenseMasterRepository.searchExpense(gridSearchDtoV2));\n             resultContainerDtoV2.setTotalRecords(expenseMasterRepository.getTotalResult(gridSearchDtoV2));\n        return new ResponseEntity(resultContainerDtoV2, HttpStatus.OK);\n    } catch (Exception ex) {\n        ex.printStackTrace();\n        throw new PaperTrlCheckedException(ExceptionMessages.SEARCH_FAILED);\n    }\n}\n</code></pre>\n<p><strong>custom repository method</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic List&lt;ExpenseGridSearchResultDto&gt; searchExpense(GridSearchDtoV2 gridSearchDtoV2) throws ParseException {\n    String sql = &quot;SELECT new com.papertrl.vportal.dto.grid.ExpenseGridSearchResultDto(expense.attachmentId,expense.id, expense.id,expense.reportName,&quot;\n                + &quot;expense.createdByName,expense.createdOn,automation.automationName,expense.approvalUserName,expense.approvalGroupName,expense.totalAmount,&quot;\n                + &quot;expense.status,expense.startFrom,expense.endDate,expense.exportStatus,expense.approvalUser,expense.approvalGroup, expense.vendorId,&quot; +\n                &quot; expense.paymentStatus, expense.balanceAmount, dept.departmentName,expense.paidAmount) &quot;\n                + &quot;FROM VpExpenseMst expense LEFT JOIN CommonAutomationMst automation ON automation.id=expense.automationId&quot;\n                + &quot; LEFT JOIN UmmApprovalGroup appGroup ON appGroup.id=expense.approvalGroup&quot;\n                + &quot; LEFT JOIN CommonDepartment dept ON dept.id=expense.departmentId&quot;\n                + &quot; LEFT JOIN VpVendorMst vendor ON vendor.id=expense.vendorId&quot;\n                + &quot; WHERE expense.status&lt;&gt;'&quot; + CommonConstants.STATUS_DELETED + &quot;' &quot;\n                + &quot; AND (expense.status&lt;&gt;'&quot; + STATUS_DRAFT + &quot;' OR (expense.status='&quot; + STATUS_DRAFT + &quot;' AND expense.createdBy=:&quot; + PARAM_CREATED_BY_ID + &quot;)) &quot;;\n\n    sql = setConditions(gridSearchDtoV2, sql);\n    sql = setOrderBy(gridSearchDtoV2, sql);\n    Query query = entityManager.createQuery(sql);\n    setParameters(gridSearchDtoV2, query);\n    query.setParameter(PARAM_CREATED_BY_ID, SecurityContextHolder.getContext().getAuthentication().getName());\n\n    query.setFirstResult(gridSearchDtoV2.getFirst());\n    query.setMaxResults(gridSearchDtoV2.getRows());\n    return query.getResultList();\n}\n</code></pre>\n<p>please give me solution for this, still I can't find the route cource of the issue by reading the log.</p>\n"},{"tags":["java","multithreading","concurrency","wait"],"answers":[{"comments":[{"owner":{"display_name":"user41871"},"score":3,"creation_date":1273134482,"post_id":2779565,"comment_id":2814366,"body_markdown":"There&#39;s a detailed discussion here as well, saying essentially the same thing. http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/2006-01/msg01130.html","body":"There&#39;s a detailed discussion here as well, saying essentially the same thing. <a href=\"http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/2006-01/msg01130.html\" rel=\"nofollow noreferrer\">coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":1,"creation_date":1321346506,"post_id":2779565,"comment_id":9979768,"body_markdown":"btw, if you are not to ignore interrupted flag the loop shall check `Thread.interrupted()` as well.","body":"btw, if you are not to ignore interrupted flag the loop shall check <code>Thread.interrupted()</code> as well."},{"owner":{"account_id":98263,"reputation":7066,"user_id":266103,"accept_rate":87,"display_name":"shrini1000"},"score":3,"creation_date":1346744898,"post_id":2779565,"comment_id":16434997,"body_markdown":"I can still do something like: while(!condition){synchronized(this){wait();}} which means there&#39;s still a race between checking the condition and waiting even if wait() is correctly called in a synchronized block. So is there any other reason behind this restriction, perhaps due to the way it&#39;s implemented in Java?","body":"I can still do something like: while(!condition){synchronized(this){wait();}} which means there&#39;s still a race between checking the condition and waiting even if wait() is correctly called in a synchronized block. So is there any other reason behind this restriction, perhaps due to the way it&#39;s implemented in Java?"},{"owner":{"account_id":106442,"reputation":2106,"user_id":283553,"accept_rate":80,"display_name":"willjcroz"},"score":0,"creation_date":1401478559,"post_id":2779565,"comment_id":36916360,"body_markdown":"@Michael Good answer! Small point: spurious wakeups come from the underlying OS and are not triggered by a `notify()` (and hence no third thread involved).\n\n[Spurious interrupts on Wikipedia](http://en.wikipedia.org/wiki/Spurious_wakeup)\n , \n[Interesting read on why they exist](http://www.lambdacs.com/cpt/FAQ.html#Q94)","body":"@Michael Good answer! Small point: spurious wakeups come from the underlying OS and are not triggered by a <code>notify()</code> (and hence no third thread involved).  <a href=\"http://en.wikipedia.org/wiki/Spurious_wakeup\" rel=\"nofollow noreferrer\">Spurious interrupts on Wikipedia</a>  ,  <a href=\"http://www.lambdacs.com/cpt/FAQ.html#Q94\" rel=\"nofollow noreferrer\">Interesting read on why they exist</a>"},{"owner":{"display_name":"user3458"},"score":15,"creation_date":1403095830,"post_id":2779565,"comment_id":37525815,"body_markdown":"Another nasty scenario: condition is false, we&#39;re about to go into wait() and then another thread changes the condition and invokes notify(). Because we&#39;re not in wait() yet, we will miss this notify(). In other words, test and wait, as well as change and notify must be *atomic*.","body":"Another nasty scenario: condition is false, we&#39;re about to go into wait() and then another thread changes the condition and invokes notify(). Because we&#39;re not in wait() yet, we will miss this notify(). In other words, test and wait, as well as change and notify must be <i>atomic</i>."},{"owner":{"account_id":263443,"reputation":5321,"user_id":549007,"accept_rate":78,"display_name":"insumity"},"score":0,"creation_date":1585327723,"post_id":2779565,"comment_id":107729799,"body_markdown":"This does not seem to answer the use of lock-free synchronization primitives.\nIf we only can use locks, then yes we need to `lock` the condition variable before, but if we used lock-free primitives why do we need to use `synchronized`. What&#39;s the rationale of this?","body":"This does not seem to answer the use of lock-free synchronization primitives. If we only can use locks, then yes we need to <code>lock</code> the condition variable before, but if we used lock-free primitives why do we need to use <code>synchronized</code>. What&#39;s the rationale of this?"},{"owner":{"display_name":"user10990333"},"score":0,"creation_date":1607197756,"post_id":2779565,"comment_id":115198807,"body_markdown":"@user3438 How could that scenario ever happen? The code block is holding a monitor, so it won&#39;t stop in the middle of its execution. Why should one make it atomic?","body":"@user3438 How could that scenario ever happen? The code block is holding a monitor, so it won&#39;t stop in the middle of its execution. Why should one make it atomic?"}],"tags":[],"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"comment_count":7,"down_vote_count":0,"up_vote_count":262,"is_accepted":true,"score":262,"last_activity_date":1438970592,"creation_date":1273134176,"answer_id":2779565,"question_id":2779484,"body_markdown":"A `wait()` only makes sense when there is also a `notify()`, so it&#39;s always about communication between threads, and that needs synchronization to work correctly. One could argue that this should be implicit, but that would not really help, for the following reason:\r\n\r\nSemantically, you never just `wait()`. You need some condition to be satsified, and if it is not, you wait until it is. So what you really do is\r\n\r\n    if(!condition){\r\n        wait();\r\n    }\r\n\r\nBut the condition is being set by a separate thread, so in order to have this work correctly you need synchronization.\r\n\r\nA couple more things wrong with it, where just because your thread quit waiting doesn&#39;t mean the condition you are looking for is true: \r\n\r\n* You can get spurious wakeups (meaning that a thread can wake up from waiting without ever having received a notification), or \r\n\r\n* The condition can get set, but a third thread makes the condition false again by the time the waiting thread wakes up (and reacquires the monitor). \r\n\r\nTo deal with these cases what you really need is *always* some variation of this:\r\n\r\n    synchronized(lock){\r\n        while(!condition){\r\n            lock.wait();\r\n        }\r\n    }\r\n\r\nBetter yet, don&#39;t mess with the synchronization primitives at all and work with the abstractions offered in the `java.util.concurrent` packages.","title":"Why must wait() always be in synchronized block","body":"<p>A <code>wait()</code> only makes sense when there is also a <code>notify()</code>, so it's always about communication between threads, and that needs synchronization to work correctly. One could argue that this should be implicit, but that would not really help, for the following reason:</p>\n\n<p>Semantically, you never just <code>wait()</code>. You need some condition to be satsified, and if it is not, you wait until it is. So what you really do is</p>\n\n<pre><code>if(!condition){\n    wait();\n}\n</code></pre>\n\n<p>But the condition is being set by a separate thread, so in order to have this work correctly you need synchronization.</p>\n\n<p>A couple more things wrong with it, where just because your thread quit waiting doesn't mean the condition you are looking for is true: </p>\n\n<ul>\n<li><p>You can get spurious wakeups (meaning that a thread can wake up from waiting without ever having received a notification), or </p></li>\n<li><p>The condition can get set, but a third thread makes the condition false again by the time the waiting thread wakes up (and reacquires the monitor). </p></li>\n</ul>\n\n<p>To deal with these cases what you really need is <em>always</em> some variation of this:</p>\n\n<pre><code>synchronized(lock){\n    while(!condition){\n        lock.wait();\n    }\n}\n</code></pre>\n\n<p>Better yet, don't mess with the synchronization primitives at all and work with the abstractions offered in the <code>java.util.concurrent</code> packages.</p>\n"},{"comments":[{"owner":{"account_id":116671,"reputation":1823,"user_id":305864,"accept_rate":64,"display_name":"Surya Wijaya Madjid"},"score":0,"creation_date":1343744491,"post_id":2779674,"comment_id":15584941,"body_markdown":"In addition also to make sure the changes made to the condition is seen immediately after the wait() finishes, I guess. Otherwise, also a dead-lock since the notify() has been already called.","body":"In addition also to make sure the changes made to the condition is seen immediately after the wait() finishes, I guess. Otherwise, also a dead-lock since the notify() has been already called."},{"owner":{"account_id":2289816,"reputation":1222,"user_id":2012947,"accept_rate":94,"display_name":"Marcus"},"score":0,"creation_date":1391030741,"post_id":2779674,"comment_id":32355205,"body_markdown":"Interesting, but note that just calling synchronized actually won&#39;t always solve such problems due to the &quot;unreliable&quot; nature of wait() and notify(). Read more here: http://stackoverflow.com/questions/21439355/are-wait-and-notify-unreliable-despite-of-synchronized. The reason why synchronized is needed lays within the hardware architecture (see my answer below).","body":"Interesting, but note that just calling synchronized actually won&#39;t always solve such problems due to the &quot;unreliable&quot; nature of wait() and notify(). Read more here: <a href=\"http://stackoverflow.com/questions/21439355/are-wait-and-notify-unreliable-despite-of-synchronized\" title=\"are wait and notify unreliable despite of synchronized\">stackoverflow.com/questions/21439355/&hellip;</a>. The reason why synchronized is needed lays within the hardware architecture (see my answer below)."},{"owner":{"account_id":2171891,"reputation":506,"user_id":1923650,"display_name":"BobJiang"},"score":0,"creation_date":1524276241,"post_id":2779674,"comment_id":86919846,"body_markdown":"but if add `return buffer.remove();` in while block but after `wait();`, it works?","body":"but if add <code>return buffer.remove();</code> in while block but after <code>wait();</code>, it works?"},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":1,"creation_date":1524311075,"post_id":2779674,"comment_id":86927185,"body_markdown":"@BobJiang, no, the thread can be woken up for reasons other than someone calling give. In other words, buffer may be empty even after `wait` returns.","body":"@BobJiang, no, the thread can be woken up for reasons other than someone calling give. In other words, buffer may be empty even after <code>wait</code> returns."},{"owner":{"account_id":1254031,"reputation":2548,"user_id":1213885,"accept_rate":64,"display_name":"Shashwat"},"score":0,"creation_date":1529919864,"post_id":2779674,"comment_id":89033534,"body_markdown":"I have only `Thread.currentThread().wait();` in the `main` function surrounded by try-catch for `InterruptedException`. Without `synchronized` block, it gives me the same exception `IllegalMonitorStateException`. What makes it reach illegal state now? It works inside `synchronized` block though.","body":"I have only <code>Thread.currentThread().wait();</code> in the <code>main</code> function surrounded by try-catch for <code>InterruptedException</code>. Without <code>synchronized</code> block, it gives me the same exception <code>IllegalMonitorStateException</code>. What makes it reach illegal state now? It works inside <code>synchronized</code> block though."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":1,"creation_date":1529957161,"post_id":2779674,"comment_id":89054376,"body_markdown":"@Shashwat `Thread.currentThread().wait();` doesn&#39;t make sense. You probably want to add a `Object lock = new Object();` field in your class, and do `lock.wait();` (or something similar). I&#39;ve never seen anyone call `wait()` on a `Thread` object.","body":"@Shashwat <code>Thread.currentThread().wait();</code> doesn&#39;t make sense. You probably want to add a <code>Object lock = new Object();</code> field in your class, and do <code>lock.wait();</code> (or something similar). I&#39;ve never seen anyone call <code>wait()</code> on a <code>Thread</code> object."},{"owner":{"account_id":1254031,"reputation":2548,"user_id":1213885,"accept_rate":64,"display_name":"Shashwat"},"score":0,"creation_date":1529994463,"post_id":2779674,"comment_id":89064075,"body_markdown":"It&#39;s not on the `Thread` object bu the java `main` function. I understand that it doesn&#39;t make sense. But why does it give exception? What exactly is going on inside `wait`?","body":"It&#39;s not on the <code>Thread</code> object bu the java <code>main</code> function. I understand that it doesn&#39;t make sense. But why does it give exception? What exactly is going on inside <code>wait</code>?"},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1529998742,"post_id":2779674,"comment_id":89066300,"body_markdown":"`synchronized` makes sure you own that monitor. You can only call `wait` on monitors you own. See javadoc for wait: &quot;The current thread must own this object&#39;s monitor.&quot;","body":"<code>synchronized</code> makes sure you own that monitor. You can only call <code>wait</code> on monitors you own. See javadoc for wait: &quot;The current thread must own this object&#39;s monitor.&quot;"},{"owner":{"account_id":3408167,"reputation":690,"user_id":2859238,"accept_rate":32,"display_name":"user104309"},"score":0,"creation_date":1531051672,"post_id":2779674,"comment_id":89442746,"body_markdown":"@aioobe So it will be best if Java ensures that both the condition+wait/notify is inside the `synchronized` method/block. But at least it enforces for `wait()` and `notify()`, right? Is there any situation where the condition can be put outside `synchronized` and only `wait` and `notify` inside?","body":"@aioobe So it will be best if Java ensures that both the condition+wait/notify is inside the <code>synchronized</code> method/block. But at least it enforces for <code>wait()</code> and <code>notify()</code>, right? Is there any situation where the condition can be put outside <code>synchronized</code> and only <code>wait</code> and <code>notify</code> inside?"},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1531056702,"post_id":2779674,"comment_id":89444095,"body_markdown":"_But at least it enforces for wait() and notify(), right?_ That&#39;s right. I can&#39;t think of any situation where the condition can be put outside synchronized. That would be a situation where the evaluation of the condition doesn&#39;t really matter at the point where wait or notify is called.","body":"<i>But at least it enforces for wait() and notify(), right?</i> That&#39;s right. I can&#39;t think of any situation where the condition can be put outside synchronized. That would be a situation where the evaluation of the condition doesn&#39;t really matter at the point where wait or notify is called."},{"owner":{"account_id":1344927,"reputation":456,"user_id":1285873,"display_name":"Valentin Kovalenko"},"score":0,"creation_date":1543002153,"post_id":2779674,"comment_id":93776884,"body_markdown":"@aioobe &quot;Always perform give/notify and isEmpty/wait atomically&quot; - it&#39;s true that there must be a total order between all `notify` and `checkCondition&amp;wait` actions, and it is achieved by executing `notify` and `checkCondition&amp;wait` in synchronized blocks. But there is no reason to universally require a total order between `setConditionToTrue&amp;notify` and `checkCondition&amp;wait` actions, thus there is no reason to universally require putting `setConditionToTrue` and `notify` into a synchronized block. Do you agree?","body":"@aioobe &quot;Always perform give/notify and isEmpty/wait atomically&quot; - it&#39;s true that there must be a total order between all <code>notify</code> and <code>checkCondition&amp;wait</code> actions, and it is achieved by executing <code>notify</code> and <code>checkCondition&amp;wait</code> in synchronized blocks. But there is no reason to universally require a total order between <code>setConditionToTrue&amp;notify</code> and <code>checkCondition&amp;wait</code> actions, thus there is no reason to universally require putting <code>setConditionToTrue</code> and <code>notify</code> into a synchronized block. Do you agree?"},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1543156392,"post_id":2779674,"comment_id":93807481,"body_markdown":"@Male, yes, thanks for pointing this out. I updated the answer.","body":"@Male, yes, thanks for pointing this out. I updated the answer."},{"owner":{"account_id":2508599,"reputation":374,"user_id":2181576,"display_name":"veritas"},"score":0,"creation_date":1601660528,"post_id":2779674,"comment_id":113484903,"body_markdown":"The answer chosend as correct theoretically tells you why wait can only be in synchronized but it is this answer that gives you the elaborated illustration on why that is so which helps appreciate Michael Borgwardt&#39;s chosen answer.","body":"The answer chosend as correct theoretically tells you why wait can only be in synchronized but it is this answer that gives you the elaborated illustration on why that is so which helps appreciate Michael Borgwardt&#39;s chosen answer."},{"owner":{"account_id":1962736,"reputation":311,"user_id":1763792,"display_name":"almondandapricot"},"score":0,"creation_date":1606045925,"post_id":2779674,"comment_id":114834581,"body_markdown":"It&#39;s worth pointing out that a) the term **deadlock** is hardly appropriate where the issue is a missed `notify()` =&gt; a lack of progress - OK I guess it&#39;s used loosely here; b) this bad scenario that is supposed to illustrate the main reason why the **check-wait** loop has to be atomic.. This can be easily fixed by putting a timeout on the wait e.g. `wait(100)` and _that scenario_ is gone. A slight delay consuming the element is all that&#39;ll happen. Sure, the thing has to be atomic (for this reason+others), even **check-wait-remove** must be atomic, but I reckon it&#39;s an unconvincing example.","body":"It&#39;s worth pointing out that a) the term <b>deadlock</b> is hardly appropriate where the issue is a missed <code>notify()</code> =&gt; a lack of progress - OK I guess it&#39;s used loosely here; b) this bad scenario that is supposed to illustrate the main reason why the <b>check-wait</b> loop has to be atomic.. This can be easily fixed by putting a timeout on the wait e.g. <code>wait(100)</code> and <i>that scenario</i> is gone. A slight delay consuming the element is all that&#39;ll happen. Sure, the thing has to be atomic (for this reason+others), even <b>check-wait-remove</b> must be atomic, but I reckon it&#39;s an unconvincing example."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1606055826,"post_id":2779674,"comment_id":114837242,"body_markdown":"@almondandapricot, a) I wrote &quot;if unlucky this _could_ result in a deadlock.&quot; It could very well be the case that missed `notify` causes no more `give` to be invoked (as part of some higher level protocol outside of this class). I&#39;m not saying that a missed `notify` _will_ result in a deadlock. b) Yes, you can solve it by notifying again if the first one happens to be missed. Personally however, I would classify that as a bug.\n\nAre you saying that this `give`/`take` example is unconvincing? Do you have any more convincing example in mind?","body":"@almondandapricot, a) I wrote &quot;if unlucky this <i>could</i> result in a deadlock.&quot; It could very well be the case that missed <code>notify</code> causes no more <code>give</code> to be invoked (as part of some higher level protocol outside of this class). I&#39;m not saying that a missed <code>notify</code> <i>will</i> result in a deadlock. b) Yes, you can solve it by notifying again if the first one happens to be missed. Personally however, I would classify that as a bug.  Are you saying that this <code>give</code>/<code>take</code> example is unconvincing? Do you have any more convincing example in mind?"},{"owner":{"account_id":19596445,"reputation":109,"user_id":14425370,"display_name":"Kaisan"},"score":0,"creation_date":1629537888,"post_id":2779674,"comment_id":121716218,"body_markdown":"but you would have to synchronise on the same lock, right?","body":"but you would have to synchronise on the same lock, right?"}],"tags":[],"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"comment_count":16,"down_vote_count":0,"up_vote_count":324,"is_accepted":false,"score":324,"last_activity_date":1543156355,"creation_date":1273135403,"answer_id":2779674,"question_id":2779484,"body_markdown":"&gt; ***What is the potential damage if it was possible to invoke `wait()` outside a synchronized block, retaining it&#39;s semantics - suspending the caller thread?***\r\n\r\nLet&#39;s illustrate what issues we would run into if `wait()` could be called outside of a synchronized block with a **concrete example**.\r\n\r\nSuppose we were to implement a blocking queue (I know, there is already one in the API :)\r\n\r\nA first attempt (without synchronization) could look something along the lines below\r\n\r\n    class BlockingQueue {\r\n        Queue&lt;String&gt; buffer = new LinkedList&lt;String&gt;();\r\n        \r\n        public void give(String data) {\r\n            buffer.add(data);\r\n            notify();                   // Since someone may be waiting in take!\r\n        }\r\n        \r\n        public String take() throws InterruptedException {\r\n            while (buffer.isEmpty())    // don&#39;t use &quot;if&quot; due to spurious wakeups.\r\n                wait();\r\n            return buffer.remove();\r\n        }\r\n    }\r\n\r\nThis is what could potentially happen:\r\n\r\n1. A consumer thread calls `take()` and sees that the `buffer.isEmpty()`.\r\n\r\n2. Before the consumer thread goes on to call `wait()`, a producer thread comes along and invokes a full `give()`, that is, `buffer.add(data); notify();`\r\n\r\n3. The consumer thread will now call `wait()` (and *miss* the `notify()` that was just called).\r\n\r\n4. If unlucky, the producer thread won&#39;t produce more `give()` as a result of the fact that the consumer thread never wakes up, and we have a dead-lock.\r\n\r\nOnce you understand the issue, the solution is obvious: Use `synchronized` to make sure `notify` is never called between `isEmpty` and `wait`.\r\n\r\nWithout going into details: This synchronization issue is universal. As Michael Borgwardt points out, wait/notify is all about communication between threads, so you&#39;ll always end up with a race condition similar to the one described above. This is why the &quot;only wait inside synchronized&quot; rule is enforced.\r\n\r\n-------\r\nA paragraph from the [link posted by @Willie](http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/2006-01/msg01130.html) summarizes it quite well:\r\n\r\n&gt; You need an absolute guarantee that the waiter and the notifier agree about the state of the predicate. The waiter checks the state of the predicate at some point slightly BEFORE it goes to sleep, but it depends for correctness on the predicate being true WHEN it goes to sleep. There&#39;s a period of vulnerability between those two events, which can break the program.\r\n\r\nThe predicate that the producer and consumer need to agree upon is in the above example `buffer.isEmpty()`. And the agreement is resolved by ensuring that the wait and notify are performed in `synchronized` blocks.\r\n\r\n\r\n----------\r\n\r\nThis post has been rewritten as an article here: [Java: Why wait must be called in a synchronized block](http://programming.guide/java/why-wait-must-be-in-synchronized.html)","title":"Why must wait() always be in synchronized block","body":"<blockquote>\n  <p><strong><em>What is the potential damage if it was possible to invoke <code>wait()</code> outside a synchronized block, retaining it's semantics - suspending the caller thread?</em></strong></p>\n</blockquote>\n\n<p>Let's illustrate what issues we would run into if <code>wait()</code> could be called outside of a synchronized block with a <strong>concrete example</strong>.</p>\n\n<p>Suppose we were to implement a blocking queue (I know, there is already one in the API :)</p>\n\n<p>A first attempt (without synchronization) could look something along the lines below</p>\n\n<pre><code>class BlockingQueue {\n    Queue&lt;String&gt; buffer = new LinkedList&lt;String&gt;();\n\n    public void give(String data) {\n        buffer.add(data);\n        notify();                   // Since someone may be waiting in take!\n    }\n\n    public String take() throws InterruptedException {\n        while (buffer.isEmpty())    // don't use \"if\" due to spurious wakeups.\n            wait();\n        return buffer.remove();\n    }\n}\n</code></pre>\n\n<p>This is what could potentially happen:</p>\n\n<ol>\n<li><p>A consumer thread calls <code>take()</code> and sees that the <code>buffer.isEmpty()</code>.</p></li>\n<li><p>Before the consumer thread goes on to call <code>wait()</code>, a producer thread comes along and invokes a full <code>give()</code>, that is, <code>buffer.add(data); notify();</code></p></li>\n<li><p>The consumer thread will now call <code>wait()</code> (and <em>miss</em> the <code>notify()</code> that was just called).</p></li>\n<li><p>If unlucky, the producer thread won't produce more <code>give()</code> as a result of the fact that the consumer thread never wakes up, and we have a dead-lock.</p></li>\n</ol>\n\n<p>Once you understand the issue, the solution is obvious: Use <code>synchronized</code> to make sure <code>notify</code> is never called between <code>isEmpty</code> and <code>wait</code>.</p>\n\n<p>Without going into details: This synchronization issue is universal. As Michael Borgwardt points out, wait/notify is all about communication between threads, so you'll always end up with a race condition similar to the one described above. This is why the \"only wait inside synchronized\" rule is enforced.</p>\n\n<hr>\n\n<p>A paragraph from the <a href=\"http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/2006-01/msg01130.html\" rel=\"noreferrer\">link posted by @Willie</a> summarizes it quite well:</p>\n\n<blockquote>\n  <p>You need an absolute guarantee that the waiter and the notifier agree about the state of the predicate. The waiter checks the state of the predicate at some point slightly BEFORE it goes to sleep, but it depends for correctness on the predicate being true WHEN it goes to sleep. There's a period of vulnerability between those two events, which can break the program.</p>\n</blockquote>\n\n<p>The predicate that the producer and consumer need to agree upon is in the above example <code>buffer.isEmpty()</code>. And the agreement is resolved by ensuring that the wait and notify are performed in <code>synchronized</code> blocks.</p>\n\n<hr>\n\n<p>This post has been rewritten as an article here: <a href=\"http://programming.guide/java/why-wait-must-be-in-synchronized.html\" rel=\"noreferrer\">Java: Why wait must be called in a synchronized block</a></p>\n"},{"comments":[{"owner":{"account_id":2296572,"reputation":12748,"user_id":2017866,"accept_rate":76,"display_name":"Rollerball"},"score":0,"creation_date":1369658568,"post_id":16768351,"comment_id":24167208,"body_markdown":"From the question the author made, does not seem that the question author has a clear understanding of what I quoted from the tutorial.And moreover, my answer, explains &quot;Why&quot;.","body":"From the question the author made, does not seem that the question author has a clear understanding of what I quoted from the tutorial.And moreover, my answer, explains &quot;Why&quot;."}],"tags":[],"owner":{"account_id":2296572,"reputation":12748,"user_id":2017866,"accept_rate":76,"display_name":"Rollerball"},"comment_count":1,"down_vote_count":4,"up_vote_count":4,"is_accepted":false,"score":0,"last_activity_date":1369639847,"creation_date":1369639847,"answer_id":16768351,"question_id":2779484,"body_markdown":"directly from [this][1] java oracle tutorial:\r\n\r\n&gt; When a thread invokes d.wait, it must own the intrinsic lock for d \r\n&gt; otherwise an error is thrown. Invoking wait inside a synchronized\r\n&gt; method is a simple way to acquire the intrinsic lock.\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html","title":"Why must wait() always be in synchronized block","body":"<p>directly from <a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html\" rel=\"nofollow\">this</a> java oracle tutorial:</p>\n\n<blockquote>\n  <p>When a thread invokes d.wait, it must own the intrinsic lock for d \n  otherwise an error is thrown. Invoking wait inside a synchronized\n  method is a simple way to acquire the intrinsic lock.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3172839,"reputation":197,"user_id":2681376,"display_name":"ashoka.devanampriya"},"comment_count":0,"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1700560434,"creation_date":1376464862,"answer_id":18225522,"question_id":2779484,"body_markdown":"@Rollerball is right. The `wait()` is called, so that the thread can wait for some condition to occur when this `wait()` call happens, the thread is forced to give up its lock.  \r\nTo give up something, you need to own it first. Thread needs to own the lock first.\r\nHence the need to call it inside a `synchronized` method/block.\r\n\r\nYes, I do agree with all the above answers regarding the potential damages/inconsistencies if you did not check the condition within `synchronized` method/block.  However as @shrini1000 has pointed out, just calling `wait()` within synchronized block will not avert this inconsistency from happening. \r\n\r\n[Here is a nice read..][1]\r\n\r\n\r\n  [1]: https://www.artima.com/insidejvm/ed2/threadsynch.html","title":"Why must wait() always be in synchronized block","body":"<p>@Rollerball is right. The <code>wait()</code> is called, so that the thread can wait for some condition to occur when this <code>wait()</code> call happens, the thread is forced to give up its lock.<br />\nTo give up something, you need to own it first. Thread needs to own the lock first.\nHence the need to call it inside a <code>synchronized</code> method/block.</p>\n<p>Yes, I do agree with all the above answers regarding the potential damages/inconsistencies if you did not check the condition within <code>synchronized</code> method/block.  However as @shrini1000 has pointed out, just calling <code>wait()</code> within synchronized block will not avert this inconsistency from happening.</p>\n<p><a href=\"https://www.artima.com/insidejvm/ed2/threadsynch.html\" rel=\"nofollow noreferrer\">Here is a nice read..</a></p>\n"},{"comments":[{"owner":{"account_id":2289816,"reputation":1222,"user_id":2012947,"accept_rate":94,"display_name":"Marcus"},"score":1,"creation_date":1391097616,"post_id":21409975,"comment_id":32387245,"body_markdown":"Just discovered an website that explains it perfectly and in-depth: http://www.javamex.com/tutorials/synchronization_concurrency_synchronized2.shtml","body":"Just discovered an website that explains it perfectly and in-depth: <a href=\"http://www.javamex.com/tutorials/synchronization_concurrency_synchronized2.shtml\" rel=\"nofollow noreferrer\">javamex.com/tutorials/&hellip;</a>"},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1422356414,"post_id":21409975,"comment_id":44707418,"body_markdown":"Hmm.. not sure I follow. If caching was the only reason for putting wait and notify inside synchronized, why isn&#39;t the synchronization put inside the implementation of wait / notify?","body":"Hmm.. not sure I follow. If caching was the only reason for putting wait and notify inside synchronized, why isn&#39;t the synchronization put inside the implementation of wait / notify?"},{"owner":{"account_id":2289816,"reputation":1222,"user_id":2012947,"accept_rate":94,"display_name":"Marcus"},"score":0,"creation_date":1434036122,"post_id":21409975,"comment_id":49619705,"body_markdown":"Good question, since wait / notify could very well be synchronized methods...maybe Sun&#39;s former Java developers know the answer? Have a look into the link above, or maybe this will also help you: http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html","body":"Good question, since wait / notify could very well be synchronized methods...maybe Sun&#39;s former Java developers know the answer? Have a look into the link above, or maybe this will also help you: <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jls/se7/html/jls-17.html</a>"},{"owner":{"account_id":2289816,"reputation":1222,"user_id":2012947,"accept_rate":94,"display_name":"Marcus"},"score":0,"creation_date":1434037777,"post_id":21409975,"comment_id":49620992,"body_markdown":"A reason might be: In the early days of Java there were no compile errors when not calling synchronized before doing these multithreading operations. Instead there were only runtime errors (e.g. http://www.coderanch.com/t/239491/java-programmer-SCJP/certification/Compile-time-Runtime-errors). Maybe they really thought @SUN that when programmers are getting these errors they&#39;re being contacted, which may have given them the opportunity to sell more of their servers. When did it change? Maybe Java 5.0 or 6.0, but actually I don&#39;t remember to be honest...","body":"A reason might be: In the early days of Java there were no compile errors when not calling synchronized before doing these multithreading operations. Instead there were only runtime errors (e.g. <a href=\"http://www.coderanch.com/t/239491/java-programmer-SCJP/certification/Compile-time-Runtime-errors\" rel=\"nofollow noreferrer\">coderanch.com/t/239491/java-programmer-SCJP/certification/&hellip;</a>)&zwnj;&#8203;. Maybe they really thought @SUN that when programmers are getting these errors they&#39;re being contacted, which may have given them the opportunity to sell more of their servers. When did it change? Maybe Java 5.0 or 6.0, but actually I don&#39;t remember to be honest..."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1434054604,"post_id":21409975,"comment_id":49631175,"body_markdown":"TBH I see a few issues with your answer 1) Your second sentence doesn&#39;t make sense: It doesn&#39;t matter *which* object a thread has a lock on. Regardless what object two threads synchronize on, *all* changes are made visible. 2) You say another thread *&quot;will not&quot;* see any changes. This should be *&quot;may not&quot;*. 3) I don&#39;t know why you&#39;re bringing up 1st/2nd/3rd level caches... What matters here is what the Java Memory Model says and that is specified in JLS. While hardware architecture may help in understanding *why* JLS says what it does, it is strictly speaking irrelevant in this context.","body":"TBH I see a few issues with your answer 1) Your second sentence doesn&#39;t make sense: It doesn&#39;t matter <i>which</i> object a thread has a lock on. Regardless what object two threads synchronize on, <i>all</i> changes are made visible. 2) You say another thread <i>&quot;will not&quot;</i> see any changes. This should be <i>&quot;may not&quot;</i>. 3) I don&#39;t know why you&#39;re bringing up 1st/2nd/3rd level caches... What matters here is what the Java Memory Model says and that is specified in JLS. While hardware architecture may help in understanding <i>why</i> JLS says what it does, it is strictly speaking irrelevant in this context."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1434054652,"post_id":21409975,"comment_id":49631218,"body_markdown":"Your comments are a bit confusing too. There is *still* no compile error for calling wait/notify outside a synchronized block. This has always been the case and didn&#39;t change in 5.0 or 6.0. (Judging whether this is the case in statically is even undecidable!) The fact that you don&#39;t understand why the synchronization can&#39;t be done inside wait/notify seems to indicate that you don&#39;t understand why wait/notify must only be called when holding the lock in the first place. I think my and Michael Borgwardt answers explain it well enough if you&#39;re curious about the underlying reason.","body":"Your comments are a bit confusing too. There is <i>still</i> no compile error for calling wait/notify outside a synchronized block. This has always been the case and didn&#39;t change in 5.0 or 6.0. (Judging whether this is the case in statically is even undecidable!) The fact that you don&#39;t understand why the synchronization can&#39;t be done inside wait/notify seems to indicate that you don&#39;t understand why wait/notify must only be called when holding the lock in the first place. I think my and Michael Borgwardt answers explain it well enough if you&#39;re curious about the underlying reason."},{"owner":{"account_id":2289816,"reputation":1222,"user_id":2012947,"accept_rate":94,"display_name":"Marcus"},"score":0,"creation_date":1435156179,"post_id":21409975,"comment_id":50083321,"body_markdown":"I don&#39;t know what you mean since I&#39;m getting these compiler errors when calling wait outside a sync block...also I disagree with you about the lock: https://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html and my links above say that a lock is on the object, therefore synchronizing the object&#39;s state with main memory (but not synchronizing all objects between all waiting threads). Please don&#39;t say I&#39;m misunderstanding things when I have sources which prove my words while you didn&#39;t post any source yet, thanks (And yes, I&#39;m waiting for your links sources...).","body":"I don&#39;t know what you mean since I&#39;m getting these compiler errors when calling wait outside a sync block...also I disagree with you about the lock: <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/&hellip;</a> and my links above say that a lock is on the object, therefore synchronizing the object&#39;s state with main memory (but not synchronizing all objects between all waiting threads). Please don&#39;t say I&#39;m misunderstanding things when I have sources which prove my words while you didn&#39;t post any source yet, thanks (And yes, I&#39;m waiting for your links sources...)."},{"owner":{"account_id":2289816,"reputation":1222,"user_id":2012947,"accept_rate":94,"display_name":"Marcus"},"score":1,"creation_date":1435165649,"post_id":21409975,"comment_id":50090003,"body_markdown":"And yes, I know you&#39;re probably refering to Doug Lea when he wrote (http://gee.cs.oswego.edu/dl/cpj/jmm.html): *&quot;A writing thread releases a synchronization lock and a reading thread subsequently acquires that same synchronization lock. In essence, releasing a lock forces a flush of all writes from working memory employed by the thread, and acquiring a lock forces a (re)load of the values of accessible fields. While lock actions provide exclusion only for the operations performed within a synchronized method or block, these memory effects are defined to cover all fields used by the thread...*","body":"And yes, I know you&#39;re probably refering to Doug Lea when he wrote (<a href=\"http://gee.cs.oswego.edu/dl/cpj/jmm.html\" rel=\"nofollow noreferrer\">gee.cs.oswego.edu/dl/cpj/jmm.html</a>): <i>&quot;A writing thread releases a synchronization lock and a reading thread subsequently acquires that same synchronization lock. In essence, releasing a lock forces a flush of all writes from working memory employed by the thread, and acquiring a lock forces a (re)load of the values of accessible fields. While lock actions provide exclusion only for the operations performed within a synchronized method or block, these memory effects are defined to cover all fields used by the thread...</i>"},{"owner":{"account_id":2289816,"reputation":1222,"user_id":2012947,"accept_rate":94,"display_name":"Marcus"},"score":0,"creation_date":1435165700,"post_id":21409975,"comment_id":50090034,"body_markdown":"*...performing the action.&quot;* Obviously there are some problems with these wordings. Because it&#39;s not clear which fields of which object he means: The hole thread&#39;s fields or just all objects within the synchronized block? Well, the latter seems to be true, but we can&#39;t be sure, as others say: http://stackoverflow.com/a/1863612/2012947 and http://stackoverflow.com/a/3601646/2012947 (note that Doug is just one guy any may be completely wrong, so I wouldn&#39;t solely rely on him...and *IMHO if somebody doesn&#39;t explain something clearly he didn&#39;t understand it too well!*)","body":"<i>...performing the action.&quot;</i> Obviously there are some problems with these wordings. Because it&#39;s not clear which fields of which object he means: The hole thread&#39;s fields or just all objects within the synchronized block? Well, the latter seems to be true, but we can&#39;t be sure, as others say: <a href=\"http://stackoverflow.com/a/1863612/2012947\">stackoverflow.com/a/1863612/2012947</a> and <a href=\"http://stackoverflow.com/a/3601646/2012947\">stackoverflow.com/a/3601646/2012947</a> (note that Doug is just one guy any may be completely wrong, so I wouldn&#39;t solely rely on him...and <i>IMHO if somebody doesn&#39;t explain something clearly he didn&#39;t understand it too well!</i>)"},{"owner":{"account_id":2289816,"reputation":1222,"user_id":2012947,"accept_rate":94,"display_name":"Marcus"},"score":0,"creation_date":1435165770,"post_id":21409975,"comment_id":50090081,"body_markdown":"But to answer your points in detail: 1) I wrote &quot;another thread holding the same object MAY not see the changements you&#39;re doing&quot; which is correct. 2) I said &quot;will not [...] WHEN&quot;...you must read the hole sentence. 3) What the Java Memory Model says and what is really implemented are two different shoes. See my three comments just above. I also like this article from a guy saying that &quot;flushing&quot; is wrong and that it&#39;s just &quot;fencing&quot;: http://mechanical-sympathy.blogspot.ch/2013/02/cpu-cache-flushing-fallacy.html. If even Doug Lea is wrong...we can say only one thing for sure: Never be too sure.","body":"But to answer your points in detail: 1) I wrote &quot;another thread holding the same object MAY not see the changements you&#39;re doing&quot; which is correct. 2) I said &quot;will not [...] WHEN&quot;...you must read the hole sentence. 3) What the Java Memory Model says and what is really implemented are two different shoes. See my three comments just above. I also like this article from a guy saying that &quot;flushing&quot; is wrong and that it&#39;s just &quot;fencing&quot;: <a href=\"http://mechanical-sympathy.blogspot.ch/2013/02/cpu-cache-flushing-fallacy.html\" rel=\"nofollow noreferrer\">mechanical-sympathy.blogspot.ch/2013/02/&hellip;</a>. If even Doug Lea is wrong...we can say only one thing for sure: Never be too sure."},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1435268434,"post_id":21409975,"comment_id":50143031,"body_markdown":"What compile errors do you get? Could you please post a snippet of code that gives you a compile error due to having wait or notify outside of a synchronized block? (Either in a comment or on for instance pastebin.com.)","body":"What compile errors do you get? Could you please post a snippet of code that gives you a compile error due to having wait or notify outside of a synchronized block? (Either in a comment or on for instance pastebin.com.)"},{"owner":{"account_id":2289816,"reputation":1222,"user_id":2012947,"accept_rate":94,"display_name":"Marcus"},"score":0,"creation_date":1435341844,"post_id":21409975,"comment_id":50177524,"body_markdown":"Simply an &quot;Invoking Object.wait outside synchronized context&quot;-error, and the code is just `wait()` or `wait(integer)` somewhere in a `run()` method. Btw I&#39;m using NetBeans (IDE 7.2)...which allows me to write code many times faster as in Eclipse and without any nonsense-error messages. ;-) Oh, btw I need to thank you for your remarks, because it kept me thinking about the hole synchronized stuff once more and in more depth, and I must admit that I only partially understood what was really going on (I&#39;m not saying that my views of the JVM were completely wrong, but partially!). Which finally...","body":"Simply an &quot;Invoking Object.wait outside synchronized context&quot;-error, and the code is just <code>wait()</code> or <code>wait(integer)</code> somewhere in a <code>run()</code> method. Btw I&#39;m using NetBeans (IDE 7.2)...which allows me to write code many times faster as in Eclipse and without any nonsense-error messages. ;-) Oh, btw I need to thank you for your remarks, because it kept me thinking about the hole synchronized stuff once more and in more depth, and I must admit that I only partially understood what was really going on (I&#39;m not saying that my views of the JVM were completely wrong, but partially!). Which finally..."},{"owner":{"account_id":2289816,"reputation":1222,"user_id":2012947,"accept_rate":94,"display_name":"Marcus"},"score":0,"creation_date":1435342020,"post_id":21409975,"comment_id":50177591,"body_markdown":"...lead to this infamous question: http://stackoverflow.com/questions/31052406/java-monitor-lock-by-calling-synchronized-only-on-the-variable-aka-reference-a. On which some people with many k&#39;s basically admit that they also don&#39;t understand how the JVM really works, like I didn&#39;t before. But due to the extreme crazy and inpolite reactions to this question, and because SO doesn&#39;t remove it even upon my request (!), I now choosed not to update all my other partially wrong answers. In fact I&#39;ll be hibernating my account here on SO, and only if this question is completely removed, I&#39;m thinking...","body":"...lead to this infamous question: <a href=\"http://stackoverflow.com/questions/31052406/java-monitor-lock-by-calling-synchronized-only-on-the-variable-aka-reference-a\" title=\"java monitor lock by calling synchronized only on the variable aka reference a\">stackoverflow.com/questions/31052406/&hellip;</a>. On which some people with many k&#39;s basically admit that they also don&#39;t understand how the JVM really works, like I didn&#39;t before. But due to the extreme crazy and inpolite reactions to this question, and because SO doesn&#39;t remove it even upon my request (!), I now choosed not to update all my other partially wrong answers. In fact I&#39;ll be hibernating my account here on SO, and only if this question is completely removed, I&#39;m thinking..."},{"owner":{"account_id":2289816,"reputation":1222,"user_id":2012947,"accept_rate":94,"display_name":"Marcus"},"score":0,"creation_date":1435342202,"post_id":21409975,"comment_id":50177679,"body_markdown":"...of coming back and correct all my answers concerning the synchronized matter. Speaking in terms of transitivity, it was basically your post here that somehow &quot;kicked&quot; me out of this plattform. Hope you can accept that. Good bye, Marcus","body":"...of coming back and correct all my answers concerning the synchronized matter. Speaking in terms of transitivity, it was basically your post here that somehow &quot;kicked&quot; me out of this plattform. Hope you can accept that. Good bye, Marcus"},{"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":1,"creation_date":1435358140,"post_id":21409975,"comment_id":50184374,"body_markdown":"The *&quot;Invoking Object.wait outside synchronized context&quot;* is a NetBeans specific message and not something that is mandated by JLS. As for my remarks, you&#39;re welcome. Helping others improves my knoledge too. As I learn new stuff I try to update my posts. I recommend you to do so too. If you learn that your answer is incorrect but don&#39;t have time to update it, plase consider deleting it to avoid spreading the confusion. Finally, no one kicked you out, but if you can&#39;t stand the heat, get out of the kitchen ;-)","body":"The <i>&quot;Invoking Object.wait outside synchronized context&quot;</i> is a NetBeans specific message and not something that is mandated by JLS. As for my remarks, you&#39;re welcome. Helping others improves my knoledge too. As I learn new stuff I try to update my posts. I recommend you to do so too. If you learn that your answer is incorrect but don&#39;t have time to update it, plase consider deleting it to avoid spreading the confusion. Finally, no one kicked you out, but if you can&#39;t stand the heat, get out of the kitchen ;-)"},{"owner":{"account_id":372293,"reputation":180467,"user_id":721269,"accept_rate":100,"display_name":"David Schwartz"},"score":0,"creation_date":1459330690,"post_id":21409975,"comment_id":60233637,"body_markdown":"That memory hierarchy has anything to do with this is a myth. Google &quot;MESI protocol&quot;.","body":"That memory hierarchy has anything to do with this is a myth. Google &quot;MESI protocol&quot;."}],"tags":[],"owner":{"account_id":2289816,"reputation":1222,"user_id":2012947,"accept_rate":94,"display_name":"Marcus"},"comment_count":16,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1435341639,"creation_date":1390923387,"answer_id":21409975,"question_id":2779484,"body_markdown":"This basically has to do with the hardware architecture (i.e. **RAM** and **caches**).\r\n\r\nIf you don&#39;t use `synchronized` together with `wait()` or `notify()`, another thread *could* enter the same block instead of waiting for the monitor to enter it. Moreover, when e.g. accessing an array without a synchronized block, another thread may not see the changement to it...actually another thread *will not* see any changements to it *when* it already has a copy of the array in the x-level cache (a.k.a. 1st/2nd/3rd-level caches) of the thread handling CPU core.\r\n\r\nBut synchronized blocks are only one side of the medal: If you actually access an object within a synchronized context from a non-synchronized context, the object still won&#39;t be synchronized even within a synchronized block, because it holds an own copy of the object in its cache. I wrote about this issues here: https://stackoverflow.com/a/21462631 and https://stackoverflow.com/questions/21458625/when-a-lock-holds-a-non-final-object-can-the-objects-reference-still-be-change\r\n\r\nFurthermore, I&#39;m convinced that the x-level caches are responsible for most non-reproducible runtime errors. That&#39;s because the developers usually don&#39;t learn the low-level stuff, like how CPU&#39;s work or how the memory hierarchy affects the running of applications: http://en.wikipedia.org/wiki/Memory_hierarchy\r\n\r\nIt remains a riddle why programming classes don&#39;t start with memory hierarchy and CPU architecture first. &quot;Hello world&quot; won&#39;t help here. ;)","title":"Why must wait() always be in synchronized block","body":"<p>This basically has to do with the hardware architecture (i.e. <strong>RAM</strong> and <strong>caches</strong>).</p>\n\n<p>If you don't use <code>synchronized</code> together with <code>wait()</code> or <code>notify()</code>, another thread <em>could</em> enter the same block instead of waiting for the monitor to enter it. Moreover, when e.g. accessing an array without a synchronized block, another thread may not see the changement to it...actually another thread <em>will not</em> see any changements to it <em>when</em> it already has a copy of the array in the x-level cache (a.k.a. 1st/2nd/3rd-level caches) of the thread handling CPU core.</p>\n\n<p>But synchronized blocks are only one side of the medal: If you actually access an object within a synchronized context from a non-synchronized context, the object still won't be synchronized even within a synchronized block, because it holds an own copy of the object in its cache. I wrote about this issues here: <a href=\"https://stackoverflow.com/a/21462631\">https://stackoverflow.com/a/21462631</a> and <a href=\"https://stackoverflow.com/questions/21458625/when-a-lock-holds-a-non-final-object-can-the-objects-reference-still-be-change\">When a lock holds a non-final object, can the object&#39;s reference still be changed by another thread?</a></p>\n\n<p>Furthermore, I'm convinced that the x-level caches are responsible for most non-reproducible runtime errors. That's because the developers usually don't learn the low-level stuff, like how CPU's work or how the memory hierarchy affects the running of applications: <a href=\"http://en.wikipedia.org/wiki/Memory_hierarchy\" rel=\"nofollow noreferrer\">http://en.wikipedia.org/wiki/Memory_hierarchy</a></p>\n\n<p>It remains a riddle why programming classes don't start with memory hierarchy and CPU architecture first. \"Hello world\" won't help here. ;)</p>\n"},{"tags":[],"owner":{"account_id":4432971,"reputation":41,"user_id":3609662,"display_name":"Shay.G"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1468768500,"creation_date":1456496647,"answer_id":35654209,"question_id":2779484,"body_markdown":"The problem it may cause if you do _not_ synchronize before `wait()` is as follows:\r\n\r\n  1. If the 1st thread goes into `makeChangeOnX()` and checks the while condition, and it is `true` (`x.metCondition()` returns `false`, means `x.condition` is `false`) so it will get inside it. Then just before the `wait()` method, another thread goes to `setConditionToTrue()` and sets the `x.condition` to `true` and `notifyAll()`.\r\n  2. Then only after that, the 1st thread will enter his `wait()` method (not affected by the `notifyAll()` that happened few moments before).\r\nIn this case, the 1st thread will stay waiting for another thread to perform `setConditionToTrue()`, but that might not happen again.\r\n\r\n&gt;But if you put `synchronized` before the methods that change the object state, this will not happen.\r\n\r\n\r\n    class A {\r\n    \r\n    \tprivate Object X;\r\n    \t\r\n    \tmakeChangeOnX(){\r\n    \t\twhile (! x.getCondition()){\r\n    \t\t\twait();\r\n    \t\t\t}\r\n    \t\t// Do the change\r\n    \t}\r\n    \t\r\n    \tsetConditionToTrue(){\r\n    \t\tx.condition = true;\t\r\n    \t\tnotifyAll();\r\n    \r\n    \t}\r\n    \tsetConditionToFalse(){\r\n    \t\tx.condition = false;\r\n    \t\tnotifyAll();\r\n    \t}\r\n    \tbool getCondition(){\r\n\t\t    return x.condition;\r\n\t    }\r\n    }","title":"Why must wait() always be in synchronized block","body":"<p>The problem it may cause if you do <em>not</em> synchronize before <code>wait()</code> is as follows:</p>\n\n<ol>\n<li>If the 1st thread goes into <code>makeChangeOnX()</code> and checks the while condition, and it is <code>true</code> (<code>x.metCondition()</code> returns <code>false</code>, means <code>x.condition</code> is <code>false</code>) so it will get inside it. Then just before the <code>wait()</code> method, another thread goes to <code>setConditionToTrue()</code> and sets the <code>x.condition</code> to <code>true</code> and <code>notifyAll()</code>.</li>\n<li>Then only after that, the 1st thread will enter his <code>wait()</code> method (not affected by the <code>notifyAll()</code> that happened few moments before).\nIn this case, the 1st thread will stay waiting for another thread to perform <code>setConditionToTrue()</code>, but that might not happen again.</li>\n</ol>\n\n<blockquote>\n  <p>But if you put <code>synchronized</code> before the methods that change the object state, this will not happen.</p>\n</blockquote>\n\n<pre><code>class A {\n\n    private Object X;\n\n    makeChangeOnX(){\n        while (! x.getCondition()){\n            wait();\n            }\n        // Do the change\n    }\n\n    setConditionToTrue(){\n        x.condition = true; \n        notifyAll();\n\n    }\n    setConditionToFalse(){\n        x.condition = false;\n        notifyAll();\n    }\n    bool getCondition(){\n        return x.condition;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5861851,"reputation":49,"user_id":4617260,"display_name":"lakshman reddy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626448140,"creation_date":1457598233,"answer_id":35911094,"question_id":2779484,"body_markdown":"When you call `notify()` on an object `t`, Java notifies a particular `t.wait()` method. But, how does Java search and notify a particular `wait` method.\r\n\r\nJava only looks into the synchronized block of code which was locked by object `t`. Java cannot search the whole code to notify a particular `t.wait()`.","title":"Why must wait() always be in synchronized block","body":"<p>When you call <code>notify()</code> on an object <code>t</code>, Java notifies a particular <code>t.wait()</code> method. But, how does Java search and notify a particular <code>wait</code> method.</p>\n<p>Java only looks into the synchronized block of code which was locked by object <code>t</code>. Java cannot search the whole code to notify a particular <code>t.wait()</code>.</p>\n"},{"tags":[],"owner":{"account_id":11827036,"reputation":317,"user_id":8654710,"display_name":"Aavesh Yadav"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1512146878,"creation_date":1512146878,"answer_id":47597822,"question_id":2779484,"body_markdown":"We all know that wait(), notify() and notifyAll() methods are used for inter-threaded \r\ncommunications. To get rid of missed signal and spurious wake up problems, waiting thread \r\nalways waits on some conditions.\r\ne.g.-\r\n\r\n    boolean wasNotified = false;\r\n    while(!wasNotified) {\r\n        wait();\r\n    }\r\n\r\nThen notifying thread sets wasNotified variable to true and notify.\r\n\r\nEvery thread has their local cache so all the changes first get written there and \r\nthen promoted to main memory gradually.\r\n\r\nHad these methods not invoked within synchronized block, the wasNotified variable \r\nwould not be flushed into main memory and would be there in thread&#39;s local cache \r\nso the waiting thread will keep waiting for the signal although it was reset by notifying \r\nthread.\r\n\r\nTo fix these types of problems, these methods are always invoked inside synchronized block \r\nwhich assures that when synchronized block starts then everything will be read from main \r\nmemory and will be flushed into main memory before exiting the synchronized block. \r\n\r\n    synchronized(monitor) {\r\n        boolean wasNotified = false;\r\n        while(!wasNotified) {\r\n            wait();\r\n        }\r\n    }\r\n\r\nThanks, hope it clarifies.\r\n\r\n","title":"Why must wait() always be in synchronized block","body":"<p>We all know that wait(), notify() and notifyAll() methods are used for inter-threaded \ncommunications. To get rid of missed signal and spurious wake up problems, waiting thread \nalways waits on some conditions.\ne.g.-</p>\n\n<pre><code>boolean wasNotified = false;\nwhile(!wasNotified) {\n    wait();\n}\n</code></pre>\n\n<p>Then notifying thread sets wasNotified variable to true and notify.</p>\n\n<p>Every thread has their local cache so all the changes first get written there and \nthen promoted to main memory gradually.</p>\n\n<p>Had these methods not invoked within synchronized block, the wasNotified variable \nwould not be flushed into main memory and would be there in thread's local cache \nso the waiting thread will keep waiting for the signal although it was reset by notifying \nthread.</p>\n\n<p>To fix these types of problems, these methods are always invoked inside synchronized block \nwhich assures that when synchronized block starts then everything will be read from main \nmemory and will be flushed into main memory before exiting the synchronized block. </p>\n\n<pre><code>synchronized(monitor) {\n    boolean wasNotified = false;\n    while(!wasNotified) {\n        wait();\n    }\n}\n</code></pre>\n\n<p>Thanks, hope it clarifies.</p>\n"},{"tags":[],"owner":{"account_id":5448501,"reputation":1780,"user_id":4334162,"display_name":"Arun Raaj"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1559546974,"creation_date":1559546974,"answer_id":56422871,"question_id":2779484,"body_markdown":"*as per docs:* \r\n&gt; The current thread must own this object&#39;s monitor. The thread releases\r\n&gt; ownership of this monitor.\r\n\r\n`wait()` method simply means it releases the lock on the object. So the object will be locked only within the synchronized block/method. If thread is outside the sync block means it&#39;s not locked, if it&#39;s not locked then what would you release on the object?","title":"Why must wait() always be in synchronized block","body":"<p><em>as per docs:</em> </p>\n\n<blockquote>\n  <p>The current thread must own this object's monitor. The thread releases\n  ownership of this monitor.</p>\n</blockquote>\n\n<p><code>wait()</code> method simply means it releases the lock on the object. So the object will be locked only within the synchronized block/method. If thread is outside the sync block means it's not locked, if it's not locked then what would you release on the object?</p>\n"},{"tags":[],"owner":{"account_id":7964707,"reputation":420,"user_id":6011410,"display_name":"aditya lath"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592763409,"creation_date":1592763409,"answer_id":62502687,"question_id":2779484,"body_markdown":"Thread wait on the **monitoring object** (object used by synchronization block), There can be n number of monitoring object in whole journey of a single thread. If Thread wait outside the synchronization block then there is no monitoring object and also other thread notify to access for the monitoring object, so how would the thread outside the synchronization block would know that it has been notified. This is also one of the reason that wait(), notify() and notifyAll() are in object class rather than thread class.\r\n\r\nBasically the monitoring object is common resource here for all the threads, and monitoring objects can only be available in synchronization block.\r\n\r\n\r\n    class A {\r\n       int a = 0;\r\n      //something......\r\n      public void add() {\r\n       synchronization(this) {\r\n          //this is your monitoring object and thread has to wait to gain lock on **this**\r\n           }\r\n      }","title":"Why must wait() always be in synchronized block","body":"<p>Thread wait on the <strong>monitoring object</strong> (object used by synchronization block), There can be n number of monitoring object in whole journey of a single thread. If Thread wait outside the synchronization block then there is no monitoring object and also other thread notify to access for the monitoring object, so how would the thread outside the synchronization block would know that it has been notified. This is also one of the reason that wait(), notify() and notifyAll() are in object class rather than thread class.</p>\n<p>Basically the monitoring object is common resource here for all the threads, and monitoring objects can only be available in synchronization block.</p>\n<pre><code>class A {\n   int a = 0;\n  //something......\n  public void add() {\n   synchronization(this) {\n      //this is your monitoring object and thread has to wait to gain lock on **this**\n       }\n  }\n</code></pre>\n"}],"owner":{"account_id":53013,"reputation":3590,"user_id":158508,"accept_rate":62,"display_name":"diy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170509,"favorite_count":0,"down_vote_count":1,"up_vote_count":312,"accepted_answer_id":2779565,"answer_count":10,"score":311,"last_activity_date":1700560434,"creation_date":1273133338,"question_id":2779484,"body_markdown":"We all know that in order to invoke [`Object.wait()`][1], this call must be placed in synchronized block, otherwise an [`IllegalMonitorStateException`][2] is thrown. But **what&#39;s the reason for making this restriction?** I know that `wait()` releases the monitor, but why do we need to explicitly acquire the monitor by making particular block synchronized and then release the monitor by calling `wait()`?\r\n\r\nWhat is the potential damage if it was possible to invoke `wait()` outside a synchronized block, retaining it&#39;s semantics - suspending the caller thread?\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#wait%28%29\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalMonitorStateException.html","title":"Why must wait() always be in synchronized block","body":"<p>We all know that in order to invoke <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#wait%28%29\" rel=\"noreferrer\"><code>Object.wait()</code></a>, this call must be placed in synchronized block, otherwise an <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalMonitorStateException.html\" rel=\"noreferrer\"><code>IllegalMonitorStateException</code></a> is thrown. But <strong>what's the reason for making this restriction?</strong> I know that <code>wait()</code> releases the monitor, but why do we need to explicitly acquire the monitor by making particular block synchronized and then release the monitor by calling <code>wait()</code>?</p>\n\n<p>What is the potential damage if it was possible to invoke <code>wait()</code> outside a synchronized block, retaining it's semantics - suspending the caller thread?</p>\n"},{"tags":["java","android","google-play-services"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1700584646,"post_id":77521825,"comment_id":136671486,"body_markdown":"What is your question? Looks like you just dumped the output from some tool here. Did you see [ask] already?","body":"What is your question? Looks like you just dumped the output from some tool here. Did you see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> already?"},{"owner":{"account_id":29946896,"reputation":1,"user_id":22949982,"display_name":"Ya Sa"},"score":0,"creation_date":1700592797,"post_id":77521825,"comment_id":136672949,"body_markdown":"@Robert My question is not accepting an application from Google Do you have a solution to this message from Google, please?","body":"@Robert My question is not accepting an application from Google Do you have a solution to this message from Google, please?"}],"owner":{"account_id":29946896,"reputation":1,"user_id":22949982,"display_name":"Ya Sa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1700560398,"creation_date":1700560398,"question_id":77521825,"body_markdown":"We reviewed your apps Data safety form in Play Console and found discrepancies between it and how the app collects and shares user data. All apps are required to complete an accurate Data safety form that discloses their data collection and sharing practices - this is required even if your app does not collect any user data.\r\n\r\nWe detected user data transmitted off device that you have not disclosed in your apps Data safety form as user data collected.\r\n\r\nYou must ensure that your apps Data safety section accurately reflects your apps data collection, sharing, and handling practices. This includes data collected and handled through any third-party libraries or SDKs used in your app. When available, weve included details on SDKs that contain code similar to the code in your APK that may be sending user data off device. You can check if your app uses any of these SDKs, but note that this list of SDKs may not be exhaustive. You must review and account for all data collected and shared by your app.\r\n\r\nIssue details\r\n\r\nWe found an issue in the following area(s):\r\n\r\nVersion code 1: Policy Declaration - Data Safety Section: Device Or Other IDs Data Type - Device Or Other IDs (some common examples may include Advertising ID, Android ID, IMEI, BSSID, MAC address), Possible SDKs: com.applovin:applovin-sdk\r\n\r\n[enter image description here](https://i.stack.imgur.com/Y9lcJ.png)\r\n","title":"Version code 1: Policy Declaration - Data Safety Section","body":"<p>We reviewed your apps Data safety form in Play Console and found discrepancies between it and how the app collects and shares user data. All apps are required to complete an accurate Data safety form that discloses their data collection and sharing practices - this is required even if your app does not collect any user data.</p>\n<p>We detected user data transmitted off device that you have not disclosed in your apps Data safety form as user data collected.</p>\n<p>You must ensure that your apps Data safety section accurately reflects your apps data collection, sharing, and handling practices. This includes data collected and handled through any third-party libraries or SDKs used in your app. When available, weve included details on SDKs that contain code similar to the code in your APK that may be sending user data off device. You can check if your app uses any of these SDKs, but note that this list of SDKs may not be exhaustive. You must review and account for all data collected and shared by your app.</p>\n<p>Issue details</p>\n<p>We found an issue in the following area(s):</p>\n<p>Version code 1: Policy Declaration - Data Safety Section: Device Or Other IDs Data Type - Device Or Other IDs (some common examples may include Advertising ID, Android ID, IMEI, BSSID, MAC address), Possible SDKs: com.applovin:applovin-sdk</p>\n<p><a href=\"https://i.stack.imgur.com/Y9lcJ.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","android","android-studio","gradle","android-buildconfig"],"answers":[{"comments":[{"owner":{"account_id":5656040,"reputation":3154,"user_id":4475206,"accept_rate":80,"display_name":"Roar Gr&#248;nmo"},"score":0,"creation_date":1669884816,"post_id":74634322,"comment_id":131745772,"body_markdown":"I found a similar problem for an older v of AS here https://issuetracker.google.com/issues/161727311, but that one introduces another way if setting those values through gradle. Haven&#39;t testet them yet.","body":"I found a similar problem for an older v of AS here <a href=\"https://issuetracker.google.com/issues/161727311\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/161727311</a>, but that one introduces another way if setting those values through gradle. Haven&#39;t testet them yet."},{"owner":{"account_id":5656040,"reputation":3154,"user_id":4475206,"accept_rate":80,"display_name":"Roar Gr&#248;nmo"},"score":0,"creation_date":1669885029,"post_id":74634322,"comment_id":131745844,"body_markdown":"Confirming that setting `android.defaults.buildfeatures.buildconfig=true` doesn&#39;t produce error when building project, but hasn&#39;t check other influences yet.","body":"Confirming that setting <code>android.defaults.buildfeatures.buildconfig=true</code> doesn&#39;t produce error when building project, but hasn&#39;t check other influences yet."},{"owner":{"account_id":14349390,"reputation":659,"user_id":10365380,"display_name":"Rohaitas Tanoli"},"score":0,"creation_date":1683654798,"post_id":74634322,"comment_id":134398945,"body_markdown":"buildConfig = true fixed my isssue","body":"buildConfig = true fixed my isssue"}],"tags":[],"owner":{"account_id":3641070,"reputation":7183,"user_id":3035127,"display_name":"fattire"},"comment_count":3,"down_vote_count":0,"up_vote_count":111,"is_accepted":false,"score":111,"last_activity_date":1670465615,"creation_date":1669843400,"answer_id":74634322,"question_id":74634321,"body_markdown":"Answering my own question -- there *is* a quick solution.  Try adding the following line to `gradle.properties`, and the problem should hopefully stop bothering you (for now):\r\n\r\n    android.defaults.buildfeatures.buildconfig=true\r\n\r\nOr, per @Scott_AGP&#39;s answer, it may be better to add this to `build.gradle` instead of changing `gradle.properties`:\r\n\r\n    android {\r\n        buildFeatures {\r\n            buildConfig = true\r\n        }\r\n    }\r\n\r\n\r\nThis issue is due to the deprecation of `buildConfigField` (from android.packageBuildConfig) as described [in this commit][1].\r\n\r\n**UPDATE 12/12/22:**\r\n\r\nPer a note from [Roar Gr&#248;nmo][3] below, there is a newer way to sneak the timestamp into the `BuildConfig.java` file [than the one I suggested back in 2014.][2]\r\n\r\nTo use this newer method, first delete any lines in your current `build.gradle` (or `build.gradle.kts`) file that looks like:\r\n\r\n    buildConfigField(&quot;String&quot;, &quot;BUILD_TIME&quot;, &quot;\\&quot;&quot; + System.currentTimeMillis().toString() + &quot;\\&quot;&quot;)\r\n\r\nInstead, first add the following to the top of your `build.gradle.kts`:\r\n\r\n    import com.android.build.api.variant.BuildConfigField\r\n\r\nand outside of the `android { ... }` part of `build.config.kts` add this:\r\n\r\n    androidComponents {\r\n        onVariants {\r\n           it.buildConfigFields.put(\r\n                &quot;BUILD_TIME&quot;, BuildConfigField(\r\n                    &quot;String&quot;, &quot;\\&quot;&quot; + System.currentTimeMillis().toString() + &quot;\\&quot;&quot;, &quot;build timestamp&quot;\r\n                )\r\n            )\r\n        }\r\n    }\r\n\r\nYou shouldn&#39;t have to make any new changes to your main codebase-- the timestamp can still be accessed in Kotlin like this:\r\n\r\n    private val buildDate = Date(BuildConfig.BUILD_TIME.toLong())\r\n    Log.i(&quot;MyProgram&quot;, &quot;This .apk was built on ${buildDate.toString()}&quot;);\r\n\r\n\r\nThat&#39;s it!  Note this still requires the change to `gradle.properties` described above or you will see an **Accessing value buildConfigFields in variant ____ has no effect as the feature buildConfig is disabled.** warning.\r\n\r\nThere may still be a better way to do this without using `BuildConfigField`, but if so, I don&#39;t know it.  If anyone has a more permanent fix, please let me (us) know.\r\n\r\n  [1]: https://android.googlesource.com/platform/tools/base/+/370c706fb6553dc5952e10323a81f2b195405c3f%5E%21/\r\n  [2]: https://stackoverflow.com/questions/3540739/how-to-programmatically-read-the-date-when-my-android-apk-was-built/22649533#22649533\r\n  [3]: https://stackoverflow.com/users/4475206/roar-gr%C3%B8nmo","title":"Fixing the &quot;Build Type contains custom BuildConfig fields, but the feature is disabled&quot; error w/ buildConfigField","body":"<p>Answering my own question -- there <em>is</em> a quick solution.  Try adding the following line to <code>gradle.properties</code>, and the problem should hopefully stop bothering you (for now):</p>\n<pre><code>android.defaults.buildfeatures.buildconfig=true\n</code></pre>\n<p>Or, per @Scott_AGP's answer, it may be better to add this to <code>build.gradle</code> instead of changing <code>gradle.properties</code>:</p>\n<pre><code>android {\n    buildFeatures {\n        buildConfig = true\n    }\n}\n</code></pre>\n<p>This issue is due to the deprecation of <code>buildConfigField</code> (from android.packageBuildConfig) as described <a href=\"https://android.googlesource.com/platform/tools/base/+/370c706fb6553dc5952e10323a81f2b195405c3f%5E%21/\" rel=\"noreferrer\">in this commit</a>.</p>\n<p><strong>UPDATE 12/12/22:</strong></p>\n<p>Per a note from <a href=\"https://stackoverflow.com/users/4475206/roar-gr%C3%B8nmo\">Roar Grnmo</a> below, there is a newer way to sneak the timestamp into the <code>BuildConfig.java</code> file <a href=\"https://stackoverflow.com/questions/3540739/how-to-programmatically-read-the-date-when-my-android-apk-was-built/22649533#22649533\">than the one I suggested back in 2014.</a></p>\n<p>To use this newer method, first delete any lines in your current <code>build.gradle</code> (or <code>build.gradle.kts</code>) file that looks like:</p>\n<pre><code>buildConfigField(&quot;String&quot;, &quot;BUILD_TIME&quot;, &quot;\\&quot;&quot; + System.currentTimeMillis().toString() + &quot;\\&quot;&quot;)\n</code></pre>\n<p>Instead, first add the following to the top of your <code>build.gradle.kts</code>:</p>\n<pre><code>import com.android.build.api.variant.BuildConfigField\n</code></pre>\n<p>and outside of the <code>android { ... }</code> part of <code>build.config.kts</code> add this:</p>\n<pre><code>androidComponents {\n    onVariants {\n       it.buildConfigFields.put(\n            &quot;BUILD_TIME&quot;, BuildConfigField(\n                &quot;String&quot;, &quot;\\&quot;&quot; + System.currentTimeMillis().toString() + &quot;\\&quot;&quot;, &quot;build timestamp&quot;\n            )\n        )\n    }\n}\n</code></pre>\n<p>You shouldn't have to make any new changes to your main codebase-- the timestamp can still be accessed in Kotlin like this:</p>\n<pre><code>private val buildDate = Date(BuildConfig.BUILD_TIME.toLong())\nLog.i(&quot;MyProgram&quot;, &quot;This .apk was built on ${buildDate.toString()}&quot;);\n</code></pre>\n<p>That's it!  Note this still requires the change to <code>gradle.properties</code> described above or you will see an <strong>Accessing value buildConfigFields in variant ____ has no effect as the feature buildConfig is disabled.</strong> warning.</p>\n<p>There may still be a better way to do this without using <code>BuildConfigField</code>, but if so, I don't know it.  If anyone has a more permanent fix, please let me (us) know.</p>\n"},{"comments":[{"owner":{"account_id":315203,"reputation":1249,"user_id":630833,"display_name":"jayeffkay"},"score":1,"creation_date":1682203592,"post_id":74673405,"comment_id":134178946,"body_markdown":"Humbly downvoted this, since solution is deprecated.","body":"Humbly downvoted this, since solution is deprecated."}],"tags":[],"owner":{"account_id":9957379,"reputation":119,"user_id":7367757,"display_name":"SarathEXP "},"comment_count":1,"down_vote_count":6,"up_vote_count":13,"is_accepted":false,"score":7,"last_activity_date":1670136319,"creation_date":1670136319,"answer_id":74673405,"question_id":74634321,"body_markdown":"adding `android.defaults.buildfeatures.buildconfig=true` to your `gradle.properties` would fix this.","title":"Fixing the &quot;Build Type contains custom BuildConfig fields, but the feature is disabled&quot; error w/ buildConfigField","body":"<p>adding <code>android.defaults.buildfeatures.buildconfig=true</code> to your <code>gradle.properties</code> would fix this.</p>\n"},{"comments":[{"owner":{"account_id":5900723,"reputation":2918,"user_id":5187459,"accept_rate":15,"display_name":"Dazzle"},"score":6,"creation_date":1691265124,"post_id":74692390,"comment_id":135469588,"body_markdown":"for each module? What is this 1995?","body":"for each module? What is this 1995?"},{"owner":{"account_id":4608033,"reputation":9671,"user_id":3736955,"accept_rate":71,"display_name":"Jemshit"},"score":2,"creation_date":1692369548,"post_id":74692390,"comment_id":135617921,"body_markdown":"@Dazzle &quot;Always has been&quot; meme","body":"@Dazzle &quot;Always has been&quot; meme"}],"tags":[],"owner":{"account_id":4119496,"reputation":766,"user_id":3380260,"display_name":"Scott_AGP"},"comment_count":2,"down_vote_count":0,"up_vote_count":73,"is_accepted":false,"score":73,"last_activity_date":1670263069,"creation_date":1670262924,"answer_id":74692390,"question_id":74634321,"body_markdown":"Avoid adding `android.defaults.buildfeatures.buildconfig=true` to your `gradle.properties` file because that property is [deprecated in AGP 8.0 and is scheduled to be removed in AGP 9.0](https://cs.android.com/android-studio/platform/tools/base/+/0bc1c23297760643b03e8cfd8acc52c007a99cd6).\r\n\r\nInstead, add the following to the per-module `build.gradle` file for each module using `BuildConfig`:\r\n\r\n```\r\nandroid {\r\n    buildFeatures {\r\n        buildConfig = true\r\n    }\r\n}\r\n```","title":"Fixing the &quot;Build Type contains custom BuildConfig fields, but the feature is disabled&quot; error w/ buildConfigField","body":"<p>Avoid adding <code>android.defaults.buildfeatures.buildconfig=true</code> to your <code>gradle.properties</code> file because that property is <a href=\"https://cs.android.com/android-studio/platform/tools/base/+/0bc1c23297760643b03e8cfd8acc52c007a99cd6\" rel=\"noreferrer\">deprecated in AGP 8.0 and is scheduled to be removed in AGP 9.0</a>.</p>\n<p>Instead, add the following to the per-module <code>build.gradle</code> file for each module using <code>BuildConfig</code>:</p>\n<pre><code>android {\n    buildFeatures {\n        buildConfig = true\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24575673,"reputation":49,"user_id":18481510,"display_name":"kdan"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1689752553,"creation_date":1689751978,"answer_id":76718915,"question_id":74634321,"body_markdown":"add these lines to your gradle.properties:\r\n\r\n    android.buildConfig=true\r\n    API_KEY=0000\r\n\r\nand these to build.gradle(module):\r\n\r\n    buildFeatures {\r\n            buildConfig = true\r\n        }","title":"Fixing the &quot;Build Type contains custom BuildConfig fields, but the feature is disabled&quot; error w/ buildConfigField","body":"<p>add these lines to your gradle.properties:</p>\n<pre><code>android.buildConfig=true\nAPI_KEY=0000\n</code></pre>\n<p>and these to build.gradle(module):</p>\n<pre><code>buildFeatures {\n        buildConfig = true\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28197592,"reputation":41,"user_id":21551950,"display_name":"Milo40"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700560298,"creation_date":1700560298,"answer_id":77521810,"question_id":74634321,"body_markdown":"I&#39;ll just add this alternative &quot;solution&quot; here... For whomever it might help ?\r\n\r\nFrom [developer.android.com documentation][1] :\r\n\r\n&gt; You can override the default for this for all projects in your build\r\n&gt; by adding the line android.defaults.buildfeatures.buildconfig=true in\r\n&gt; the gradle.properties file at the root project of your build.\r\n\r\nSo one might just want to explicitly declare that in his project level `gradle.properties`.\r\n\r\n  [1]: https://developer.android.com/reference/tools/gradle-api/7.4/com/android/build/api/dsl/BuildFeatures#buildConfig()","title":"Fixing the &quot;Build Type contains custom BuildConfig fields, but the feature is disabled&quot; error w/ buildConfigField","body":"<p>I'll just add this alternative &quot;solution&quot; here... For whomever it might help ?</p>\n<p>From <a href=\"https://developer.android.com/reference/tools/gradle-api/7.4/com/android/build/api/dsl/BuildFeatures#buildConfig()\" rel=\"nofollow noreferrer\">developer.android.com documentation</a> :</p>\n<blockquote>\n<p>You can override the default for this for all projects in your build\nby adding the line android.defaults.buildfeatures.buildconfig=true in\nthe gradle.properties file at the root project of your build.</p>\n</blockquote>\n<p>So one might just want to explicitly declare that in his project level <code>gradle.properties</code>.</p>\n"}],"owner":{"account_id":3641070,"reputation":7183,"user_id":3035127,"display_name":"fattire"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39542,"favorite_count":0,"down_vote_count":0,"up_vote_count":86,"answer_count":5,"score":86,"last_activity_date":1700560298,"creation_date":1669843400,"question_id":74634321,"body_markdown":"In the new version of Android Studio (Flamingo | 2022.2.1 Canary 9) with the org.jetbrains.kotlin (1.8.0-Beta) plugin and 8.0.0-alpha09 gradle plugin, a new build suddenly gets this error:\r\n\r\n&gt; Build Type &#39;release&#39; contains custom BuildConfig fields, but the feature is disabled.\r\n\r\nIs there a way to make this go away?","title":"Fixing the &quot;Build Type contains custom BuildConfig fields, but the feature is disabled&quot; error w/ buildConfigField","body":"<p>In the new version of Android Studio (Flamingo | 2022.2.1 Canary 9) with the org.jetbrains.kotlin (1.8.0-Beta) plugin and 8.0.0-alpha09 gradle plugin, a new build suddenly gets this error:</p>\n<blockquote>\n<p>Build Type 'release' contains custom BuildConfig fields, but the feature is disabled.</p>\n</blockquote>\n<p>Is there a way to make this go away?</p>\n"},{"tags":["java","unit-testing","junit","mockito","private-methods"],"comments":[{"owner":{"account_id":18586978,"reputation":2220,"user_id":15000097,"display_name":"Georgii Lvov"},"score":0,"creation_date":1700240367,"post_id":77503203,"comment_id":136634108,"body_markdown":"Which observer do you mean, from here: `observer.get(topic)` ? If yes, show us more code to see how this observer is created","body":"Which observer do you mean, from here: <code>observer.get(topic)</code> ? If yes, show us more code to see how this observer is created"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1700295594,"post_id":77503203,"comment_id":136639163,"body_markdown":"Where is `observer` defined/initialized? How is the lambda relevant? Which method should throw the error, `put`, `send` or a different one?","body":"Where is <code>observer</code> defined/initialized? How is the lambda relevant? Which method should throw the error, <code>put</code>, <code>send</code> or a different one?"},{"owner":{"account_id":29928306,"reputation":1,"user_id":22935829,"display_name":"Tahir Sultan"},"score":0,"creation_date":1700750413,"post_id":77503203,"comment_id":136694800,"body_markdown":"I want to write unit test for below code:\n\nMessageObservable observable = MessageSendingObserver.create((isSuccess, publicationReport){\n            if (shouldBeResend(isSuccess, publicationReport)) {\n                handler.postDelayed(observer.get(topic), INTERVAL);\n            }\n        });","body":"I want to write unit test for below code:  MessageObservable observable = MessageSendingObserver.create((isSuccess, publicationReport){             if (shouldBeResend(isSuccess, publicationReport)) {                 handler.postDelayed(observer.get(topic), INTERVAL);             }         });"}],"owner":{"account_id":29928306,"reputation":1,"user_id":22935829,"display_name":"Tahir Sultan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700559863,"creation_date":1700238597,"question_id":77503203,"body_markdown":"I want to test this code.\r\n\r\n```\r\npublic void send(String topic, Object value) {\r\n        Optional.ofNullable(observer.get(topic)).ifPresent(handler::removeCallbacks);\r\n        observer.put(topic, () -&gt; send(topic, value));\r\n        MessageObservable observable = MessageSendingObserver.create((isSuccess, publicationReport){\r\n            if (shouldBeResend(isSuccess, publicationReport)) {\r\n                handler.postDelayed(observer.get(topic), INTERVAL);\r\n            }\r\n        });\r\n        message.publish(topic, value, observable);\r\n    }\r\n\t\r\nprivate boolean shouldBeResend(boolean isSuccess, PublicationReport publicationReport) {\r\n        return !isSuccess &amp;&amp; publicationReport.getErrorCode() &gt;= 400 &amp;&amp; publicationReport.getErrorCode() &lt;= 599;\r\n} \r\nI want to test this code.\r\n```\r\nI have problem how to mock observer and force it to throw error or return value on success. I&#39;m using mockito/junit. Can someone point me how to achieve it? Maybe my code is untestable?\r\n\r\n","title":"How to test lambda expression included private method using Mockito?","body":"<p>I want to test this code.</p>\n<pre><code>public void send(String topic, Object value) {\n        Optional.ofNullable(observer.get(topic)).ifPresent(handler::removeCallbacks);\n        observer.put(topic, () -&gt; send(topic, value));\n        MessageObservable observable = MessageSendingObserver.create((isSuccess, publicationReport){\n            if (shouldBeResend(isSuccess, publicationReport)) {\n                handler.postDelayed(observer.get(topic), INTERVAL);\n            }\n        });\n        message.publish(topic, value, observable);\n    }\n    \nprivate boolean shouldBeResend(boolean isSuccess, PublicationReport publicationReport) {\n        return !isSuccess &amp;&amp; publicationReport.getErrorCode() &gt;= 400 &amp;&amp; publicationReport.getErrorCode() &lt;= 599;\n} \nI want to test this code.\n</code></pre>\n<p>I have problem how to mock observer and force it to throw error or return value on success. I'm using mockito/junit. Can someone point me how to achieve it? Maybe my code is untestable?</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":4,"creation_date":1700559531,"post_id":77521724,"comment_id":136666621,"body_markdown":"Generally, don&#39;t give the community tasks. Ask questions. Show your own effort, explain where you got stuck. So please read [ask].","body":"Generally, don&#39;t give the community tasks. Ask questions. Show your own effort, explain where you got stuck. So please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."},{"owner":{"account_id":23332400,"reputation":13,"user_id":17408611,"display_name":"MM Vadhaniya"},"score":0,"creation_date":1700561616,"post_id":77521724,"comment_id":136667027,"body_markdown":"Thank you Sir for guidelines I&#39;m new on platform :)","body":"Thank you Sir for guidelines I&#39;m new on platform :)"}],"owner":{"account_id":23332400,"reputation":13,"user_id":17408611,"display_name":"MM Vadhaniya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1700559363,"creation_date":1700559363,"question_id":77521724,"body_markdown":"In this demo, you have to read the CSV file (find attachment: Sample_Company_Department.csv) and need to create a JSON structure using that (find attachment: Sample.json).\r\nNote in sample CSV is not static it can contain any level in the full path. So, your solution must parse any number of levels in the full path.\r\n\r\nTechnology: Core Java\r\n\r\n    **CSV File**\r\n\r\n    |ABC Technologies|Full stack|Java,,\r\n    |ABC Technologies|Full stack|Java|Spring,,\r\n    |ABC Technologies|Full stack|Java|Spring|Spring Boot,,\r\n    |ABC Technologies|Full stack|Java|Spring|Spring Boot|JPA,C_1,5\r\n    |ABC Technologies|Full stack|Java|Spring|Spring Boot|Rest Easy,C_2,3\r\n    |ABC Technologies|Full stack|Java|Spring|Spring Boot|Test,,\r\n    |ABC Technologies|Full stack|Java|Spring|Spring Boot|Test|test2,C_5,2\r\n    |ABC Technologies|Full stack|Java|salesforce,,\r\n    |ABC Technologies|Full stack|Java|salesforce|vue.js,C_3,5\r\n    |ABC Technologies|Mobile,,\r\n    |ABC Technologies|Mobile|Android,C_4,9\r\n\r\n\r\n**I want to make Like this**\r\n\r\n\r\n\r\n     [\r\n      {\r\n        &quot;companyDepartment&quot;: {\r\n          &quot;name&quot;: &quot;ABC Technologies - Full stack - Java&quot;,\r\n          &quot;children&quot;: [\r\n            {\r\n              &quot;name&quot;: &quot;Spring&quot;,\r\n              &quot;children&quot;: [\r\n                {\r\n                  &quot;name&quot;: &quot;Spring Boot&quot;,\r\n                  &quot;children&quot;: [\r\n                    {\r\n                      &quot;name&quot;: &quot;JPA&quot;,\r\n                      &quot;code&quot;: &quot;C_1&quot;,\r\n                      &quot;team&quot;: 5\r\n                    },\r\n                    {\r\n                      &quot;name&quot;: &quot;Rest Easy&quot;,\r\n                      &quot;code&quot;: &quot;C_2&quot;,\r\n                      &quot;team&quot;: 3\r\n                    },\r\n    \t\t\t\t{\r\n                      &quot;name&quot;: &quot;Test&quot;,\r\n                      &quot;code&quot;: &quot;C_2&quot;,\r\n                      &quot;team&quot;: 3,\r\n    \t\t\t\t  &quot;children&quot;: [\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t  &quot;name&quot;: &quot;test2&quot;,\r\n    \t\t\t\t\t  &quot;code&quot;: &quot;C_1&quot;,\r\n    \t\t\t\t\t  &quot;team&quot;: 5\r\n    \t\t\t\t\t}\r\n    \t\t\t\t  ]\r\n                    }\r\n                  ]\r\n                }\r\n              ]\r\n            },\r\n            {\r\n              &quot;name&quot;: &quot;salesforce&quot;,\r\n              &quot;children&quot;: [\r\n                {\r\n                  &quot;name&quot;: &quot;vue.js&quot;,\r\n                  &quot;code&quot;: &quot;C_3&quot;,\r\n                  &quot;team&quot;: 5\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      },\r\n      {\r\n        &quot;companyDepartment&quot;: {\r\n          &quot;name&quot;: &quot;ABC Technologies - Mobile&quot;,\r\n          &quot;children&quot;: [\r\n            {\r\n              &quot;name&quot;: &quot;Android&quot;,\r\n              &quot;code&quot;: &quot;C_4&quot;,\r\n              &quot;team&quot;: 9\r\n            }\r\n          ]\r\n        }\r\n      }\r\n      \r\n    ]\r\n\r\n","title":"I want to generate CSV file into JSON","body":"<p>In this demo, you have to read the CSV file (find attachment: Sample_Company_Department.csv) and need to create a JSON structure using that (find attachment: Sample.json).\nNote in sample CSV is not static it can contain any level in the full path. So, your solution must parse any number of levels in the full path.</p>\n<p>Technology: Core Java</p>\n<pre><code>**CSV File**\n\n|ABC Technologies|Full stack|Java,,\n|ABC Technologies|Full stack|Java|Spring,,\n|ABC Technologies|Full stack|Java|Spring|Spring Boot,,\n|ABC Technologies|Full stack|Java|Spring|Spring Boot|JPA,C_1,5\n|ABC Technologies|Full stack|Java|Spring|Spring Boot|Rest Easy,C_2,3\n|ABC Technologies|Full stack|Java|Spring|Spring Boot|Test,,\n|ABC Technologies|Full stack|Java|Spring|Spring Boot|Test|test2,C_5,2\n|ABC Technologies|Full stack|Java|salesforce,,\n|ABC Technologies|Full stack|Java|salesforce|vue.js,C_3,5\n|ABC Technologies|Mobile,,\n|ABC Technologies|Mobile|Android,C_4,9\n</code></pre>\n<p><strong>I want to make Like this</strong></p>\n<pre><code> [\n  {\n    &quot;companyDepartment&quot;: {\n      &quot;name&quot;: &quot;ABC Technologies - Full stack - Java&quot;,\n      &quot;children&quot;: [\n        {\n          &quot;name&quot;: &quot;Spring&quot;,\n          &quot;children&quot;: [\n            {\n              &quot;name&quot;: &quot;Spring Boot&quot;,\n              &quot;children&quot;: [\n                {\n                  &quot;name&quot;: &quot;JPA&quot;,\n                  &quot;code&quot;: &quot;C_1&quot;,\n                  &quot;team&quot;: 5\n                },\n                {\n                  &quot;name&quot;: &quot;Rest Easy&quot;,\n                  &quot;code&quot;: &quot;C_2&quot;,\n                  &quot;team&quot;: 3\n                },\n                {\n                  &quot;name&quot;: &quot;Test&quot;,\n                  &quot;code&quot;: &quot;C_2&quot;,\n                  &quot;team&quot;: 3,\n                  &quot;children&quot;: [\n                    {\n                      &quot;name&quot;: &quot;test2&quot;,\n                      &quot;code&quot;: &quot;C_1&quot;,\n                      &quot;team&quot;: 5\n                    }\n                  ]\n                }\n              ]\n            }\n          ]\n        },\n        {\n          &quot;name&quot;: &quot;salesforce&quot;,\n          &quot;children&quot;: [\n            {\n              &quot;name&quot;: &quot;vue.js&quot;,\n              &quot;code&quot;: &quot;C_3&quot;,\n              &quot;team&quot;: 5\n            }\n          ]\n        }\n      ]\n    }\n  },\n  {\n    &quot;companyDepartment&quot;: {\n      &quot;name&quot;: &quot;ABC Technologies - Mobile&quot;,\n      &quot;children&quot;: [\n        {\n          &quot;name&quot;: &quot;Android&quot;,\n          &quot;code&quot;: &quot;C_4&quot;,\n          &quot;team&quot;: 9\n        }\n      ]\n    }\n  }\n  \n]\n</code></pre>\n"},{"tags":["java","mongodb"],"answers":[{"tags":[],"owner":{"account_id":29956061,"reputation":1,"user_id":22956925,"display_name":"jjimenezgarcia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700559042,"creation_date":1700559042,"answer_id":77521689,"question_id":77058120,"body_markdown":"You can just use the built-in method from BsonValue:\r\n\r\n    result.getInsertedId().asObjectId().getValue();\r\n\r\nThat should be enough.","title":"Get ObjectId from BsonValue with Java mongodb client","body":"<p>You can just use the built-in method from BsonValue:</p>\n<pre><code>result.getInsertedId().asObjectId().getValue();\n</code></pre>\n<p>That should be enough.</p>\n"}],"owner":{"account_id":29204480,"reputation":33,"user_id":22373879,"display_name":"James Work account"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700559042,"creation_date":1694077488,"question_id":77058120,"body_markdown":"I&#39;m using mongodb-driver-sync as my Java driver.\r\n\r\nI have an Author class.\r\n\r\n```\r\npublic class Author {\r\n  String name;\r\n  ObjectId id;\r\n\r\n// getters setters constructors\r\n}\r\n```\r\n\r\nI am inserting into my Mongo collection with the following code\r\n\r\n```\r\nMongoCollection&lt;Author&gt; collection = database.getCollection(&quot;authors&quot;, Author.class)\r\n\r\nAuthor author = new Author();\r\nauthor.setName(&quot;Apple&quot;);\r\n\r\nInsertOneResult result = collection.insertOne(author)\r\n\r\n// This fails because result.getInsertedId returns a BsonValue instead of ObjectId\r\nauthor.setId(result.getInsertedId())\r\n\r\nreturn author;\r\n```\r\n\r\nI am trying to get setId() to work, but it is failing because .getInsertedId() returns a BsonValue. Is there a way to convet BsonValue to ObjectId?\r\n\r\nI have tried using ObjectMapper but I am still exploring.","title":"Get ObjectId from BsonValue with Java mongodb client","body":"<p>I'm using mongodb-driver-sync as my Java driver.</p>\n<p>I have an Author class.</p>\n<pre><code>public class Author {\n  String name;\n  ObjectId id;\n\n// getters setters constructors\n}\n</code></pre>\n<p>I am inserting into my Mongo collection with the following code</p>\n<pre><code>MongoCollection&lt;Author&gt; collection = database.getCollection(&quot;authors&quot;, Author.class)\n\nAuthor author = new Author();\nauthor.setName(&quot;Apple&quot;);\n\nInsertOneResult result = collection.insertOne(author)\n\n// This fails because result.getInsertedId returns a BsonValue instead of ObjectId\nauthor.setId(result.getInsertedId())\n\nreturn author;\n</code></pre>\n<p>I am trying to get setId() to work, but it is failing because .getInsertedId() returns a BsonValue. Is there a way to convet BsonValue to ObjectId?</p>\n<p>I have tried using ObjectMapper but I am still exploring.</p>\n"},{"tags":["java","spring-boot","spring-cloud-stream","spring-cloud-dataflow"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1698884432,"post_id":77402953,"comment_id":136462663,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":24209301,"reputation":491,"user_id":18166042,"display_name":"onobc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698847553,"creation_date":1698847553,"answer_id":77403227,"question_id":77402953,"body_markdown":"It can be done w/ Dataflow but it is not as seamlessly supported as single input/outputs. You will have to use a slightly different DSL syntax and wire the components together yourself. \r\n\r\nSpecifically, you have to register the application as type &quot;App&quot; and then use &quot;||&quot; rather than the &quot;|&quot; when creating the stream definition. \r\n\r\nYou can find more details on this topic in the Dataflow Microsite: \r\nhttps://dataflow.spring.io/docs/concepts/architecture/#streams-with-multiple-inputs-and-outputs\r\n\r\nAlso, Spring Cloud Stream itself supports multiple inputs/outputs:\r\nhttps://docs.spring.io/spring-cloud-stream/docs/current/reference/html/spring-cloud-stream.html#_functions_with_multiple_input_and_output_arguments","title":"Spring Data Flow streams with multiple inputs","body":"<p>It can be done w/ Dataflow but it is not as seamlessly supported as single input/outputs. You will have to use a slightly different DSL syntax and wire the components together yourself.</p>\n<p>Specifically, you have to register the application as type &quot;App&quot; and then use &quot;||&quot; rather than the &quot;|&quot; when creating the stream definition.</p>\n<p>You can find more details on this topic in the Dataflow Microsite:\n<a href=\"https://dataflow.spring.io/docs/concepts/architecture/#streams-with-multiple-inputs-and-outputs\" rel=\"nofollow noreferrer\">https://dataflow.spring.io/docs/concepts/architecture/#streams-with-multiple-inputs-and-outputs</a></p>\n<p>Also, Spring Cloud Stream itself supports multiple inputs/outputs:\n<a href=\"https://docs.spring.io/spring-cloud-stream/docs/current/reference/html/spring-cloud-stream.html#_functions_with_multiple_input_and_output_arguments\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-cloud-stream/docs/current/reference/html/spring-cloud-stream.html#_functions_with_multiple_input_and_output_arguments</a></p>\n"},{"tags":[],"owner":{"account_id":80984,"reputation":825,"user_id":228649,"display_name":"Corneil du Plessis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700558399,"creation_date":1700558399,"answer_id":77521622,"question_id":77402953,"body_markdown":"The [Restaurant][1] sample should provide more of what you need.\r\n\r\n\r\n  [1]: https://github.com/spring-cloud/spring-cloud-dataflow-samples/tree/main/restaurant-stream-apps","title":"Spring Data Flow streams with multiple inputs","body":"<p>The <a href=\"https://github.com/spring-cloud/spring-cloud-dataflow-samples/tree/main/restaurant-stream-apps\" rel=\"nofollow noreferrer\">Restaurant</a> sample should provide more of what you need.</p>\n"}],"owner":{"account_id":29802713,"reputation":3,"user_id":22840126,"display_name":"Roman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77403227,"answer_count":2,"score":0,"last_activity_date":1700558399,"creation_date":1698844863,"question_id":77402953,"body_markdown":"I use Spring Cloud Data Flow 2.11.2.&lt;br&gt;&lt;br&gt;\r\nMy goal is making two sources and one processor that accepts both messages as input and performs some operations on them, e.g.: [stream view](https://i.stack.imgur.com/RkEs3.jpg)\r\n\r\nI found a guide on this [topic](https://docs.vmware.com/en/Spring-Cloud-Data-Flow-for-VMware-Tanzu/1.13/spring-cloud-data-flow/GUID-pro-features-multi-io-support.html) and the [corresponding video](https://www.youtube.com/watch?v=UEMIcwI3GDc). Also there&#39;re [sources](https://github.com/spring-cloud/spring-cloud-dataflow-samples/tree/main/multi-io-samples/kafka-streams/user-clicks-per-region) used in the guide.\r\n\r\nHowever, when repeating actions from the video, SCDF does not display multiple inputs on the processor.\r\nMoreover, other answers to stackoferflow indicate that graphically SCDF does not support it.\r\n\r\nIn this case, I dont understand how the author of the video managed to do this and what I have to do.\r\n\r\nThanks in advance!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pRwbh.jpg","title":"Spring Data Flow streams with multiple inputs","body":"<p>I use Spring Cloud Data Flow 2.11.2.<br><br>\nMy goal is making two sources and one processor that accepts both messages as input and performs some operations on them, e.g.: <a href=\"https://i.stack.imgur.com/RkEs3.jpg\" rel=\"nofollow noreferrer\">stream view</a></p>\n<p>I found a guide on this <a href=\"https://docs.vmware.com/en/Spring-Cloud-Data-Flow-for-VMware-Tanzu/1.13/spring-cloud-data-flow/GUID-pro-features-multi-io-support.html\" rel=\"nofollow noreferrer\">topic</a> and the <a href=\"https://www.youtube.com/watch?v=UEMIcwI3GDc\" rel=\"nofollow noreferrer\">corresponding video</a>. Also there're <a href=\"https://github.com/spring-cloud/spring-cloud-dataflow-samples/tree/main/multi-io-samples/kafka-streams/user-clicks-per-region\" rel=\"nofollow noreferrer\">sources</a> used in the guide.</p>\n<p>However, when repeating actions from the video, SCDF does not display multiple inputs on the processor.\nMoreover, other answers to stackoferflow indicate that graphically SCDF does not support it.</p>\n<p>In this case, I dont understand how the author of the video managed to do this and what I have to do.</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","spring-webflux","r2dbc"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1568712514,"post_id":57971278,"comment_id":102352663,"body_markdown":"Maybe you should increase the `maxCreateConnectionTime` then? You&#39;re hitting a timeout after all.","body":"Maybe you should increase the <code>maxCreateConnectionTime</code> then? You&#39;re hitting a timeout after all."}],"answers":[{"tags":[],"owner":{"account_id":4619060,"reputation":4445,"user_id":3744640,"accept_rate":76,"display_name":"Nikita"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1568716495,"creation_date":1568716495,"answer_id":57972447,"question_id":57971278,"body_markdown":"Ok, the MAX_SIZE should be also specified for `ConnectionFactoryOptions`. Otherwise connection pool size still remains 10.\r\n\r\n```\r\nimport static io.r2dbc.pool.PoolingConnectionFactoryProvider.MAX_SIZE;\r\n\r\n    ConnectionFactory connectionFactory = ConnectionFactories.get(ConnectionFactoryOptions.builder()\r\n        .option(DRIVER, &quot;pool&quot;)\r\n        .option(PROTOCOL, &quot;postgresql&quot;)\r\n        .option(HOST, host)\r\n        .option(USER, user)\r\n        .option(PASSWORD, password)\r\n        .option(DATABASE, database)\r\n        .option(MAX_SIZE, maxSize)\r\n        .build());\r\n```","title":"Connection pool size with postgres r2dbc-pool","body":"<p>Ok, the MAX_SIZE should be also specified for <code>ConnectionFactoryOptions</code>. Otherwise connection pool size still remains 10.</p>\n\n<pre><code>import static io.r2dbc.pool.PoolingConnectionFactoryProvider.MAX_SIZE;\n\n    ConnectionFactory connectionFactory = ConnectionFactories.get(ConnectionFactoryOptions.builder()\n        .option(DRIVER, \"pool\")\n        .option(PROTOCOL, \"postgresql\")\n        .option(HOST, host)\n        .option(USER, user)\n        .option(PASSWORD, password)\n        .option(DATABASE, database)\n        .option(MAX_SIZE, maxSize)\n        .build());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":103073,"reputation":9057,"user_id":276263,"accept_rate":58,"display_name":"krishnakumarp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1596814577,"creation_date":1596814577,"answer_id":63304954,"question_id":57971278,"body_markdown":"If you are using spring-boot-starter-data-r2dbc, then the min and max is configurable in application.properties\r\n\r\n    spring.r2dbc.pool.initialSize=2\r\n    spring.r2dbc.pool.maxSize=2\r\n\r\nSee `org.springframework.boot.autoconfigure.r2dbc.R2dbcProperties` class","title":"Connection pool size with postgres r2dbc-pool","body":"<p>If you are using spring-boot-starter-data-r2dbc, then the min and max is configurable in application.properties</p>\n<pre><code>spring.r2dbc.pool.initialSize=2\nspring.r2dbc.pool.maxSize=2\n</code></pre>\n<p>See <code>org.springframework.boot.autoconfigure.r2dbc.R2dbcProperties</code> class</p>\n"},{"tags":[],"owner":{"account_id":19290251,"reputation":201,"user_id":14100437,"display_name":"Pierre CARUYER"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1598342555,"creation_date":1598342555,"answer_id":63574494,"question_id":57971278,"body_markdown":"Note that, you can use the release version 0.8.4.RELEASE (which is the latest) https://mvnrepository.com/artifact/io.r2dbc/r2dbc-postgresql/0.8.4.RELEASE which does not require you to instantiate a `ConnectionFactory`","title":"Connection pool size with postgres r2dbc-pool","body":"<p>Note that, you can use the release version 0.8.4.RELEASE (which is the latest) <a href=\"https://mvnrepository.com/artifact/io.r2dbc/r2dbc-postgresql/0.8.4.RELEASE\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/io.r2dbc/r2dbc-postgresql/0.8.4.RELEASE</a> which does not require you to instantiate a <code>ConnectionFactory</code></p>\n"},{"comments":[{"owner":{"account_id":10561548,"reputation":2425,"user_id":7781169,"display_name":"fyrkov"},"score":0,"creation_date":1608104607,"post_id":65055298,"comment_id":115477444,"body_markdown":"This is a very important comment! I also bumped into this ambiguity with `spring.r2dbc.pool.enabled` prop and having `:pool:` in the URL. However I had a different and very peculiar result - if the aforementioned `PooledConnectionFactoryCondition` fails then Connection Pool is created anyway but from a different source (namely `io.r2dbc.pool.PoolingConnectionFactoryProvider#create`). \n\nThis looks like Spring Boot can create a Connection Pool basing on the `PooledConnectionFactoryCondition` but if it fails delegates its creation to `io.r2dbc.pool.PoolingConnectionFactoryProvider.class`","body":"This is a very important comment! I also bumped into this ambiguity with <code>spring.r2dbc.pool.enabled</code> prop and having <code>:pool:</code> in the URL. However I had a different and very peculiar result - if the aforementioned <code>PooledConnectionFactoryCondition</code> fails then Connection Pool is created anyway but from a different source (namely <code>io.r2dbc.pool.PoolingConnectionFactoryProvider#create</code>).   This looks like Spring Boot can create a Connection Pool basing on the <code>PooledConnectionFactoryCondition</code> but if it fails delegates its creation to <code>io.r2dbc.pool.PoolingConnectionFactoryProvider.class</code>"}],"tags":[],"owner":{"account_id":15469120,"reputation":131,"user_id":11159688,"display_name":"MrGrandeluxe"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1606604322,"creation_date":1606604322,"answer_id":65055298,"question_id":57971278,"body_markdown":"Spring boot (at least 2.3.4) have a tricky &quot;gotcha&quot; regarding the pool size when set by properties/yaml. If you include &quot;pool&quot; in your database url, then the size set (initial size or max size) won&#39;t have any effect and the defaults for the r2dbc pool will be used, 10 and 10. \r\n\r\nThis is due to PooledConnectionFactoryCondition in [ConnectionFactoryConfigurations.java][1] failing when both `spring.r2dbc.pool.enabled=true`, which it is if the r2dbc-pool dependency is on the classpath, **and** &quot;pool&quot; being part of the `spring.r2dbc.url` property. \r\n\r\nFrom the PooledConnectionFactoryCondition docs:\r\n&gt; Condition that checks that a ConnectionPool is requested. The\r\ncondition matches if pooling was opt-in via configuration and the r2dbc url does not contain pooling-related options.\r\n\r\n\r\nThis in turn does lead to the ConnectionPool bean not being created.\r\n\r\nSkip the &quot;pool&quot; keyword in the r2dbc url property and have the r2dbc-pool dependency, then you will get a correctly configured pool.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/r2dbc/ConnectionFactoryConfigurations.java\r\n","title":"Connection pool size with postgres r2dbc-pool","body":"<p>Spring boot (at least 2.3.4) have a tricky &quot;gotcha&quot; regarding the pool size when set by properties/yaml. If you include &quot;pool&quot; in your database url, then the size set (initial size or max size) won't have any effect and the defaults for the r2dbc pool will be used, 10 and 10.</p>\n<p>This is due to PooledConnectionFactoryCondition in <a href=\"https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/r2dbc/ConnectionFactoryConfigurations.java\" rel=\"noreferrer\">ConnectionFactoryConfigurations.java</a> failing when both <code>spring.r2dbc.pool.enabled=true</code>, which it is if the r2dbc-pool dependency is on the classpath, <strong>and</strong> &quot;pool&quot; being part of the <code>spring.r2dbc.url</code> property.</p>\n<p>From the PooledConnectionFactoryCondition docs:</p>\n<blockquote>\n<p>Condition that checks that a ConnectionPool is requested. The\ncondition matches if pooling was opt-in via configuration and the r2dbc url does not contain pooling-related options.</p>\n</blockquote>\n<p>This in turn does lead to the ConnectionPool bean not being created.</p>\n<p>Skip the &quot;pool&quot; keyword in the r2dbc url property and have the r2dbc-pool dependency, then you will get a correctly configured pool.</p>\n"},{"tags":[],"owner":{"account_id":15776159,"reputation":592,"user_id":11383913,"display_name":"Ady"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1625657993,"creation_date":1625575844,"answer_id":68270898,"question_id":57971278,"body_markdown":"Below is my configuration for `spring-boot-starter-data-r2dbc` Check if that helps you:\r\n\r\n    spring:\r\n      r2dbc:\r\n        url: r2dbc:postgresql://127.0.0.1:5432/test?schema=public\r\n        username: postgres\r\n        password: postgres\r\n        pool:\r\n          name: TEST-POOL\r\n          initial-size: 1\r\n          max-size: 10\r\n          max-idle-time: 30m","title":"Connection pool size with postgres r2dbc-pool","body":"<p>Below is my configuration for <code>spring-boot-starter-data-r2dbc</code> Check if that helps you:</p>\n<pre><code>spring:\n  r2dbc:\n    url: r2dbc:postgresql://127.0.0.1:5432/test?schema=public\n    username: postgres\n    password: postgres\n    pool:\n      name: TEST-POOL\n      initial-size: 1\n      max-size: 10\n      max-idle-time: 30m\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9834917,"reputation":1,"user_id":20443732,"display_name":"vachoh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700557989,"creation_date":1700557828,"answer_id":77521563,"question_id":57971278,"body_markdown":"Don&#39;t you get a warning stating that you&#39;re creating a connection pool using another pool? because I suppose you don&#39;t need this part:\r\n\r\n    ConnectionPoolConfiguration configuration = C. onnectionPoolConfiguration.builder(connectionFactory)\r\n        .maxIdleTime(Duration.ofMinutes(30))\r\n        .initialSize(initialSize)\r\n        .maxSize(maxSize)\r\n        .maxCreateConnectionTime(Duration.ofSeconds(1))\r\n        .build();\r\n\r\nYou can specify maxIdleTime, initialSize, maxSize... with options of the ConnectionFactory\r\n","title":"Connection pool size with postgres r2dbc-pool","body":"<p>Don't you get a warning stating that you're creating a connection pool using another pool? because I suppose you don't need this part:</p>\n<pre><code>ConnectionPoolConfiguration configuration = C. onnectionPoolConfiguration.builder(connectionFactory)\n    .maxIdleTime(Duration.ofMinutes(30))\n    .initialSize(initialSize)\n    .maxSize(maxSize)\n    .maxCreateConnectionTime(Duration.ofSeconds(1))\n    .build();\n</code></pre>\n<p>You can specify maxIdleTime, initialSize, maxSize... with options of the ConnectionFactory</p>\n"}],"owner":{"account_id":4619060,"reputation":4445,"user_id":3744640,"accept_rate":76,"display_name":"Nikita"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20935,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":57972447,"answer_count":6,"score":7,"last_activity_date":1700557989,"creation_date":1568712416,"question_id":57971278,"body_markdown":"I&#39;m not able to open more than 10 connections with spring-webflux and r2dbc (with r2dbc-pool driver `0.8.0.M8`). My config looks like:\r\n\r\n```\r\n@Configuration\r\npublic class PostgresConfig extends AbstractR2dbcConfiguration {\r\n\r\n  @Override\r\n  @Bean\r\n  public ConnectionFactory connectionFactory() {\r\n    ConnectionFactory connectionFactory = ConnectionFactories.get(ConnectionFactoryOptions.builder()\r\n        .option(DRIVER, &quot;pool&quot;)\r\n        .option(PROTOCOL, &quot;postgresql&quot;)\r\n        .option(HOST, host)\r\n        .option(USER, user)\r\n        .option(PASSWORD, password)\r\n        .option(DATABASE, database)\r\n        .build());\r\n    ConnectionPoolConfiguration configuration = ConnectionPoolConfiguration.builder(connectionFactory)\r\n        .maxIdleTime(Duration.ofMinutes(30))\r\n        .initialSize(initialSize)\r\n        .maxSize(maxSize)\r\n        .maxCreateConnectionTime(Duration.ofSeconds(1))\r\n        .build();\r\n    return new ConnectionPool(configuration);\r\n  }\r\n}\r\n```\r\n\r\nWhen I&#39;m specifying more than 10 connections I get errors like:\r\n```\r\norg.springframework.dao.DataAccessResourceFailureException: \r\nFailed to obtain R2DBC Connection; nested exception is \r\njava.util.concurrent.TimeoutException: \r\nDid not observe any item or terminal signal within 1000ms in &#39;lift&#39; \r\n(and no fallback has been configured)\r\n\tat org.springframework.data.r2dbc.connectionfactory.ConnectionFactoryUtils\r\n    .lambda$getConnection$0(ConnectionFactoryUtils.java:71)\r\n\r\n```\r\n\r\nMoreover, number of connections remain the same as initial size. New connections are not created.","title":"Connection pool size with postgres r2dbc-pool","body":"<p>I'm not able to open more than 10 connections with spring-webflux and r2dbc (with r2dbc-pool driver <code>0.8.0.M8</code>). My config looks like:</p>\n\n<pre><code>@Configuration\npublic class PostgresConfig extends AbstractR2dbcConfiguration {\n\n  @Override\n  @Bean\n  public ConnectionFactory connectionFactory() {\n    ConnectionFactory connectionFactory = ConnectionFactories.get(ConnectionFactoryOptions.builder()\n        .option(DRIVER, \"pool\")\n        .option(PROTOCOL, \"postgresql\")\n        .option(HOST, host)\n        .option(USER, user)\n        .option(PASSWORD, password)\n        .option(DATABASE, database)\n        .build());\n    ConnectionPoolConfiguration configuration = ConnectionPoolConfiguration.builder(connectionFactory)\n        .maxIdleTime(Duration.ofMinutes(30))\n        .initialSize(initialSize)\n        .maxSize(maxSize)\n        .maxCreateConnectionTime(Duration.ofSeconds(1))\n        .build();\n    return new ConnectionPool(configuration);\n  }\n}\n</code></pre>\n\n<p>When I'm specifying more than 10 connections I get errors like:</p>\n\n<pre><code>org.springframework.dao.DataAccessResourceFailureException: \nFailed to obtain R2DBC Connection; nested exception is \njava.util.concurrent.TimeoutException: \nDid not observe any item or terminal signal within 1000ms in 'lift' \n(and no fallback has been configured)\n    at org.springframework.data.r2dbc.connectionfactory.ConnectionFactoryUtils\n    .lambda$getConnection$0(ConnectionFactoryUtils.java:71)\n\n</code></pre>\n\n<p>Moreover, number of connections remain the same as initial size. New connections are not created.</p>\n"},{"tags":["java","google-cloud-platform","google-cloud-functions"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1700556251,"post_id":77521365,"comment_id":136666042,"body_markdown":"Please could you show the `nameOf` method you&#39;re calling? (Ideally, provide a complete example we&#39;d be able to use to try to reproduce the problem.)","body":"Please could you show the <code>nameOf</code> method you&#39;re calling? (Ideally, provide a complete example we&#39;d be able to use to try to reproduce the problem.)"},{"owner":{"account_id":3092822,"reputation":3094,"user_id":2618609,"accept_rate":100,"display_name":"Evil Toad"},"score":0,"creation_date":1700556360,"post_id":77521365,"comment_id":136666061,"body_markdown":"Rigth remark @JonSkeet: question edited. I am going to check that, thank you","body":"Rigth remark @JonSkeet: question edited. I am going to check that, thank you"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1700556990,"post_id":77521365,"comment_id":136666182,"body_markdown":"I *think* I now know what&#39;s going on, but I need to test a little further.","body":"I <i>think</i> I now know what&#39;s going on, but I need to test a little further."}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700557952,"creation_date":1700557952,"answer_id":77521584,"question_id":77521365,"body_markdown":"I believe this is because you&#39;re using the Cloud Functions v1 API to call a Cloud Functions gen2 function. If you use Cloud Functions gen1, your code should work. I&#39;ve reproduced this using the C# client library rather than the Java one, but I&#39;m sure it&#39;s the same cause.\r\n\r\nThe [Cloud Functions v2 API](https://cloud.google.com/functions/docs/reference/rpc/google.cloud.functions.v2) doesn&#39;t currently have an equivalent of the `CallFunction` RPC... so for the moment, I&#39;d recommend simply making an HTTP request directly with an HTTP client, *or* use gen1 functions for now.","title":"Google Cloud Functions error says function doesn&#39;t exist, but it does","body":"<p>I believe this is because you're using the Cloud Functions v1 API to call a Cloud Functions gen2 function. If you use Cloud Functions gen1, your code should work. I've reproduced this using the C# client library rather than the Java one, but I'm sure it's the same cause.</p>\n<p>The <a href=\"https://cloud.google.com/functions/docs/reference/rpc/google.cloud.functions.v2\" rel=\"nofollow noreferrer\">Cloud Functions v2 API</a> doesn't currently have an equivalent of the <code>CallFunction</code> RPC... so for the moment, I'd recommend simply making an HTTP request directly with an HTTP client, <em>or</em> use gen1 functions for now.</p>\n"}],"owner":{"account_id":3092822,"reputation":3094,"user_id":2618609,"accept_rate":100,"display_name":"Evil Toad"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77521584,"answer_count":1,"score":0,"last_activity_date":1700557952,"creation_date":1700555749,"question_id":77521365,"body_markdown":"I created a function (2nd gen) in the Google Cloud Functions service. The function is written in Python (v. 3.11) and the deployment is done as a ZIP upload.\r\nThe function responds correctly if call it with Postman, providing the Google Identity Token in the Authentication header.\r\nBut when I call it programmatically in Java, I always get the following error:\r\n\r\n\tNOT_FOUND: Function &lt;cloud_function_name&gt; in region europe-west6 in project &lt;project&gt; does not exist\r\n\t\r\n**It clearly does exist so: what does this error mean?**\r\n\r\nIn Java I use the google-cloud-functions library:\r\n\r\n\t\t\t&lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;google-cloud-functions&lt;/artifactId&gt;\r\n                &lt;version&gt;2.32.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\nand I provide the program with the authentication by executing:\r\n\r\n    gcloud auth application-default login\r\n\r\nThe code:\r\n\r\n\r\n        private static final String CLOUD_FUNCTION_NAME = &quot;the_name&quot;;\r\n\r\n\t\tpublic GCPFunctionsClient(String project, String location) {\r\n\r\n\t\t\tthis.project = project;\r\n\t\t\tthis.location = location;\r\n\t\t\ttry {\r\n\t\t\t\tclient = CloudFunctionsServiceClient.create();\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\tthrow new RuntimeException(e);\r\n\t\t\t}\r\n\t\t\tthis.mapper = new ObjectMapper();\r\n\t\t}\r\n\t\t\r\n\t\t// ...\r\n\t\t\r\n\t\tpublic String callFunction(String operation, String obuIdentifier){\r\n\t\t\tGenericFunctionRequest request = GenericFunctionRequest.builder().build();\r\n\t\t\ttry {\r\n\t\t\t\tCallFunctionResponse response = client.callFunction(nameOf(CLOUD_FUNCTION_NAME), serialize(request));\r\n\t\t\t\tvar responseContent = response.getResult();\r\n\t\t\t\tif(log.isInfoEnabled()){\r\n\t\t\t\t\tlog.info(&quot;Cloud functions response: {}&quot; + responseContent);\r\n\t\t\t\t}\r\n\t\t\t\treturn responseContent;\r\n\t\t\t}catch (Exception e){\r\n\t\t\t\tthrow new CloudFunctionCallException(e);\r\n\t\t\t}\r\n\t\t}\r\n\r\n        private String nameOf(String functionName) {\r\n            return CloudFunctionName.of(project, location, functionName).toString();\r\n        }\r\n\r\nthe name of the function is correct, I double checked it.\r\n\r\n\r\n","title":"Google Cloud Functions error says function doesn&#39;t exist, but it does","body":"<p>I created a function (2nd gen) in the Google Cloud Functions service. The function is written in Python (v. 3.11) and the deployment is done as a ZIP upload.\nThe function responds correctly if call it with Postman, providing the Google Identity Token in the Authentication header.\nBut when I call it programmatically in Java, I always get the following error:</p>\n<pre><code>NOT_FOUND: Function &lt;cloud_function_name&gt; in region europe-west6 in project &lt;project&gt; does not exist\n</code></pre>\n<p><strong>It clearly does exist so: what does this error mean?</strong></p>\n<p>In Java I use the google-cloud-functions library:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;google-cloud-functions&lt;/artifactId&gt;\n            &lt;version&gt;2.32.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>and I provide the program with the authentication by executing:</p>\n<pre><code>gcloud auth application-default login\n</code></pre>\n<p>The code:</p>\n<pre><code>    private static final String CLOUD_FUNCTION_NAME = &quot;the_name&quot;;\n\n    public GCPFunctionsClient(String project, String location) {\n\n        this.project = project;\n        this.location = location;\n        try {\n            client = CloudFunctionsServiceClient.create();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n        this.mapper = new ObjectMapper();\n    }\n    \n    // ...\n    \n    public String callFunction(String operation, String obuIdentifier){\n        GenericFunctionRequest request = GenericFunctionRequest.builder().build();\n        try {\n            CallFunctionResponse response = client.callFunction(nameOf(CLOUD_FUNCTION_NAME), serialize(request));\n            var responseContent = response.getResult();\n            if(log.isInfoEnabled()){\n                log.info(&quot;Cloud functions response: {}&quot; + responseContent);\n            }\n            return responseContent;\n        }catch (Exception e){\n            throw new CloudFunctionCallException(e);\n        }\n    }\n\n    private String nameOf(String functionName) {\n        return CloudFunctionName.of(project, location, functionName).toString();\n    }\n</code></pre>\n<p>the name of the function is correct, I double checked it.</p>\n"},{"tags":["java","docker","apache-poi"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1698154037,"post_id":77352407,"comment_id":136366949,"body_markdown":"Unrelated, but never store database credentials in a docker image. Anyone can then see the plaintext values when you push to a Docker Registry","body":"Unrelated, but never store database credentials in a docker image. Anyone can then see the plaintext values when you push to a Docker Registry"},{"owner":{"account_id":1171454,"reputation":450,"user_id":1148552,"accept_rate":67,"display_name":"Gehan"},"score":0,"creation_date":1698211376,"post_id":77352407,"comment_id":136374769,"body_markdown":"Thanks. I will change these details asap.\n\nSome additional findings related to this question \n\nIn spring docs they use eclipse-temurin:17-jdk-alpine although it&#39;s an example of &quot;a basic dockerfile&quot;, maybe it helps.\n\nhttps://spring.io/guides/topicals/spring-boot-docker/","body":"Thanks. I will change these details asap.  Some additional findings related to this question   In spring docs they use eclipse-temurin:17-jdk-alpine although it&#39;s an example of &quot;a basic dockerfile&quot;, maybe it helps.  <a href=\"https://spring.io/guides/topicals/spring-boot-docker/\" rel=\"nofollow noreferrer\">spring.io/guides/topicals/spring-boot-docker</a>"},{"owner":{"account_id":1171454,"reputation":450,"user_id":1148552,"accept_rate":67,"display_name":"Gehan"},"score":0,"creation_date":1698211514,"post_id":77352407,"comment_id":136374782,"body_markdown":"The base image used is over a year old and contains lots of vulnerabilities and may be missing some libraries. Apparently, the OpenJDK base image isn&#39;t maintained for half a year. Maybe changing to Eclipse or Amazoncorretto would be an option.\n\nEither find a base image that contains those missing font libraries or add it to your dockerfile as a step, eg apt-get install or yum install, so that itll be installed during packaging.","body":"The base image used is over a year old and contains lots of vulnerabilities and may be missing some libraries. Apparently, the OpenJDK base image isn&#39;t maintained for half a year. Maybe changing to Eclipse or Amazoncorretto would be an option.  Either find a base image that contains those missing font libraries or add it to your dockerfile as a step, eg apt-get install or yum install, so that itll be installed during packaging."},{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":2,"creation_date":1698219695,"post_id":77352407,"comment_id":136375844,"body_markdown":"The Spring tutorial uses `eclipse-temurin:17-jdk-alpine` instead of `eclipse-temurin:17-jre-alpine` but it could be due to the fact that the JRE image was not available when the tutorial was published: see this [blog post](https://adoptium.net/blog/2021/10/jlink-to-produce-own-runtime/).  If you have just *to run* a Java app, a JRE image is the best choice because it is smaller.","body":"The Spring tutorial uses <code>eclipse-temurin:17-jdk-alpine</code> instead of <code>eclipse-temurin:17-jre-alpine</code> but it could be due to the fact that the JRE image was not available when the tutorial was published: see this <a href=\"https://adoptium.net/blog/2021/10/jlink-to-produce-own-runtime/\" rel=\"nofollow noreferrer\">blog post</a>.  If you have just <i>to run</i> a Java app, a JRE image is the best choice because it is smaller."},{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":1,"creation_date":1698241657,"post_id":77352407,"comment_id":136380293,"body_markdown":"@Gehan, have you tried to install one of the packages suggested below?  Was `freetype`   enough or did you need the whole `fontconfig`?  Your feedback could be useful to other people.  If one of the answers solved your problem, remember to approve it.","body":"@Gehan, have you tried to install one of the packages suggested below?  Was <code>freetype</code>   enough or did you need the whole <code>fontconfig</code>?  Your feedback could be useful to other people.  If one of the answers solved your problem, remember to approve it."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1698249435,"post_id":77352407,"comment_id":136382062,"body_markdown":"The Dockerfile itself is unrelated to the error. Spring tutorials dont use Apache POI, which is the root of your issue","body":"The Dockerfile itself is unrelated to the error. Spring tutorials dont use Apache POI, which is the root of your issue"}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698158738,"creation_date":1698154314,"answer_id":77352532,"question_id":77352407,"body_markdown":"Based on searching your error, you need to install a font package into the container. \r\n\r\nSince Docker isn&#39;t a Desktop environment, the JDK doesn&#39;t need this for GUI related applications, such as handling Excel files and fonts within them \r\n\r\nFor example, on Debian/Ubuntu image \r\n\r\n```\r\nRUN apt-get update -y \\\r\n  &amp;&amp; apt-get install -y libfontconfig1\r\n```\r\n\r\nOr on Alpine\r\n\r\n```\r\nRUN apk add --no-cache fontconfig \r\n```\r\n\r\nAlso, the POI version you&#39;re using is 2+ years old, before Java 17 was released. Maybe upgrade and there&#39;s a fix available by now\r\n","title":"Need help regarding an error in the Dockerized version of the application","body":"<p>Based on searching your error, you need to install a font package into the container.</p>\n<p>Since Docker isn't a Desktop environment, the JDK doesn't need this for GUI related applications, such as handling Excel files and fonts within them</p>\n<p>For example, on Debian/Ubuntu image</p>\n<pre><code>RUN apt-get update -y \\\n  &amp;&amp; apt-get install -y libfontconfig1\n</code></pre>\n<p>Or on Alpine</p>\n<pre><code>RUN apk add --no-cache fontconfig \n</code></pre>\n<p>Also, the POI version you're using is 2+ years old, before Java 17 was released. Maybe upgrade and there's a fix available by now</p>\n"},{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1698155609,"post_id":77352650,"comment_id":136367371,"body_markdown":"fontconfig seems to depend on freetype","body":"fontconfig seems to depend on freetype"},{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1698157108,"post_id":77352650,"comment_id":136367739,"body_markdown":"Yes, confirmed.","body":"Yes, confirmed."}],"tags":[],"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1698220301,"creation_date":1698155095,"answer_id":77352650,"question_id":77352407,"body_markdown":"According to [this page][1], to install `libfreetype.so.6` in Alpine you need the `freetype` package:\r\n\r\n    RUN apk add --no-cache freetype\r\n\r\nI would also change the base image: `openjdk:17-alpine` belongs to the [`openjdk`][2] repository that is deprecated, furthermore your `Dockerfile` suggests that a JRE image is enough for you.  You can use [`eclipse-temurin:17-jre-alpine`][3] or the smaller but unofficial [`pnavato/amazoncorretto-jre:17-alpine`][4].\r\n \r\n\r\n\r\n  [1]: https://pkgs.alpinelinux.org/contents?file=libfreetype.so.6&amp;path=&amp;name=&amp;branch=v3.18&amp;arch=x86_64\r\n  [2]: https://hub.docker.com/_/openjdk\r\n  [3]: https://hub.docker.com/_/eclipse-temurin\r\n  [4]: https://hub.docker.com/r/pnavato/amazoncorretto-jre","title":"Need help regarding an error in the Dockerized version of the application","body":"<p>According to <a href=\"https://pkgs.alpinelinux.org/contents?file=libfreetype.so.6&amp;path=&amp;name=&amp;branch=v3.18&amp;arch=x86_64\" rel=\"nofollow noreferrer\">this page</a>, to install <code>libfreetype.so.6</code> in Alpine you need the <code>freetype</code> package:</p>\n<pre><code>RUN apk add --no-cache freetype\n</code></pre>\n<p>I would also change the base image: <code>openjdk:17-alpine</code> belongs to the <a href=\"https://hub.docker.com/_/openjdk\" rel=\"nofollow noreferrer\"><code>openjdk</code></a> repository that is deprecated, furthermore your <code>Dockerfile</code> suggests that a JRE image is enough for you.  You can use <a href=\"https://hub.docker.com/_/eclipse-temurin\" rel=\"nofollow noreferrer\"><code>eclipse-temurin:17-jre-alpine</code></a> or the smaller but unofficial <a href=\"https://hub.docker.com/r/pnavato/amazoncorretto-jre\" rel=\"nofollow noreferrer\"><code>pnavato/amazoncorretto-jre:17-alpine</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":1171454,"reputation":450,"user_id":1148552,"accept_rate":67,"display_name":"Gehan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700557854,"creation_date":1700557854,"answer_id":77521569,"question_id":77352407,"body_markdown":"As suggested in the above comments by @OneCricketeer and @Pino I\r\nupdated the docker file to handle the error identified due to Openjdk image limitation.\r\n\r\nTo install the required packages (freetype and fontconfig) the Dockerfile was updated as  follows:\r\n\r\n     # Install required libraries\r\n            RUN apk add --no-cache freetype fontconfig\r\n\r\nI also updated the Apache POI dependencies to the latest versions as suggested by @OneCricketeer\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n        &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n        &lt;version&gt;5.2.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n        &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n        &lt;version&gt;5.2.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nWhen the above-mentioned updates were made to the Docker file and pom.xml, the existing error was fixed but another issue was displayed due to the same font-related limitation.\r\n\r\n    java. lang.NullPointerException: Cannot load from short array because &quot;sun.awt.FontConfiguration.head&quot; is null.\r\n\r\nI updated the Docker file as mentioned below and they were resolved.\r\n\r\n    RUN apk add --no-cache msttcorefonts-installer fontconfig\r\n    RUN update-ms-fonts\r\n\r\n[Resource][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/74975762/docker-and-spring-boot-giving-sun-awt-fontconfiguration-head-is-null","title":"Need help regarding an error in the Dockerized version of the application","body":"<p>As suggested in the above comments by @OneCricketeer and @Pino I\nupdated the docker file to handle the error identified due to Openjdk image limitation.</p>\n<p>To install the required packages (freetype and fontconfig) the Dockerfile was updated as  follows:</p>\n<pre><code> # Install required libraries\n        RUN apk add --no-cache freetype fontconfig\n</code></pre>\n<p>I also updated the Apache POI dependencies to the latest versions as suggested by @OneCricketeer</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi&lt;/artifactId&gt;\n    &lt;version&gt;5.2.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n    &lt;version&gt;5.2.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>When the above-mentioned updates were made to the Docker file and pom.xml, the existing error was fixed but another issue was displayed due to the same font-related limitation.</p>\n<pre><code>java. lang.NullPointerException: Cannot load from short array because &quot;sun.awt.FontConfiguration.head&quot; is null.\n</code></pre>\n<p>I updated the Docker file as mentioned below and they were resolved.</p>\n<pre><code>RUN apk add --no-cache msttcorefonts-installer fontconfig\nRUN update-ms-fonts\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/74975762/docker-and-spring-boot-giving-sun-awt-fontconfiguration-head-is-null\">Resource</a></p>\n"}],"owner":{"account_id":1171454,"reputation":450,"user_id":1148552,"accept_rate":67,"display_name":"Gehan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":229,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77521569,"answer_count":3,"score":1,"last_activity_date":1700557854,"creation_date":1698153467,"question_id":77352407,"body_markdown":"I am currently working on an application that uses a Spring Boot-based backend based on Java 17. I use Maven as the build tool. The front end is a ReactJS-based application.\r\n\r\nIn my developer environment, I use Oracle JDK java 17.0.4. When I build and execute the report functionality of this application it works as expected.\r\n\r\nBut when the same functionality is checked in a dockerized environment for one Excel report download scenario fails with an error. The back-end log indicates some errors briefly mentioned below.\r\n\r\n***The error message encountered is a Java UnsatisfiedLinkError related to the libfontmanager.so library and its dependency libfreetype.so.6. This error seems to occur when Java is unable to load a required native library (libfreetype.so.6) that is necessary for the functioning of the Java font system.***\r\n\r\nHow can I resolve this issue on Docker environments? Are any changes required for the docker file or Java version used?\r\n\r\n**Related docker File**\r\n\r\n    # === Stage 1: Build the Spring Boot app ===\r\n    FROM maven:3.6.3-openjdk-17 AS build\r\n    WORKDIR /app\r\n    COPY pom.xml .\r\n    COPY src/ /app/src/\r\n    RUN mvn package -DskipTests\r\n    # === Stage 2: Create the final Docker image ===\r\n    FROM openjdk:17-alpine\r\n    WORKDIR /app\r\n    COPY --from=build /app/target/backend-0.0.1-SNAPSHOT.jar app.jar\r\n    # Set environment variables for MySQL configuration\r\n    ENV MYSQL_HOST=localhost\r\n    ENV MYSQL_PORT=****** //Omitted\r\n    ENV MYSQL_DATABASE=db\r\n    ENV MYSQL_USERNAME=****** //Omitted\r\n    ENV MYSQL_PASSWORD=************ //Omitted\r\n    EXPOSE 8080\r\n    CMD [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;]\r\n\r\n**Brief set error messages are listed below.**\r\n\r\n**2023-10-05T07:19:23.875Z ERROR 1 --- [nio-8080-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed: java.lang.UnsatisfiedLinkError: /opt/openjdk-17/lib/libfontmanager.so: Error loading shared library libfreetype.so.6: No such file or directory (needed by /opt/openjdk-17/lib/libfontmanager.so)] with root cause**\r\n\r\n**java.lang.UnsatisfiedLinkError: /opt/openjdk-17/lib/libfontmanager.so: Error loading shared library libfreetype.so.6: No such file or directory (needed by /opt/openjdk-17/lib/libfontmanager.so)**\r\n\r\n    at java.base/jdk.internal.loader.NativeLibraries.load(Native Method) ~[na:na]\r\n    at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:383) ~[na:na]\r\n    at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:227) ~[na:na]\r\n    at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:169) ~[na:na]\r\n    at java.base/jdk.internal.loader.NativeLibraries.findFromPaths(NativeLibraries.java:310) ~[na:na]\r\n    at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:280) ~[na:na]\r\n    at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2392) ~[na:na]\r\n    at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:808) ~[na:na]\r\n    at java.base/java.lang.System.loadLibrary(System.java:1893) ~[na:na]\r\n    at java.desktop/sun.font.FontManagerNativeLibrary$1.run(FontManagerNativeLibrary.java:57) ~[na:na]\r\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:312) ~[na:na]\r\n    at java.desktop/sun.font.FontManagerNativeLibrary.&lt;clinit&gt;(FontManagerNativeLibrary.java:32) ~[na:na]\r\n    at java.desktop/sun.font.SunFontManager$1.run(SunFontManager.java:270) ~[na:na]\r\n    at java.desktop/sun.font.SunFontManager$1.run(SunFontManager.java:268) ~[na:na]\r\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:312) ~[na:na]\r\n    at java.desktop/sun.font.SunFontManager.&lt;clinit&gt;(SunFontManager.java:268) ~[na:na]\r\n    at java.base/java.lang.Class.forName0(Native Method) ~[na:na]\r\n    at java.base/java.lang.Class.forName(Class.java:466) ~[na:na]\r\n    at java.desktop/sun.font.FontManagerFactory$1.run(FontManagerFactory.java:82) ~[na:na]\r\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:312) ~[na:na]\r\n    at java.desktop/sun.font.FontManagerFactory.getInstance(FontManagerFactory.java:74) ~[na:na]\r\n    at java.desktop/java.awt.Font.getFont2D(Font.java:526) ~[na:na]\r\n    at java.desktop/java.awt.Font.canDisplayUpTo(Font.java:2279) ~[na:na]\r\n    at java.desktop/java.awt.font.TextLayout.singleFont(TextLayout.java:469) ~[na:na]\r\n    at java.desktop/java.awt.font.TextLayout.&lt;init&gt;(TextLayout.java:530) ~[na:na]\r\n    at org.apache.poi.ss.util.SheetUtil.getDefaultCharWidth(SheetUtil.java:285) ~[poi-5.0.0.jar!/:5.0.0]\r\n    at org.apache.poi.ss.util.SheetUtil.getColumnWidth(SheetUtil.java:259) ~[poi-5.0.0.jar!/:5.0.0]\r\n    at org.apache.poi.ss.util.SheetUtil.getColumnWidth(SheetUtil.java:244) ~[poi-5.0.0.jar!/:5.0.0]\r\n    at org.apache.poi.xssf.usermodel.XSSFSheet.autoSizeColumn(XSSFSheet.java:523) ~[poi-ooxml-5.0.0.jar!/:5.0.0]\r\n    at org.apache.poi.xssf.usermodel.XSSFSheet.autoSizeColumn(XSSFSheet.java:505) ~[poi-ooxml-5.0.0.jar!/:5.0.0]\r\n    at com.antarctica21.backend.forecasting.service.PlanService.saveWOSRZipExcelFile(PlanService.java:3352) ~[classes!/:0.0.1-SNAPSHOT]\r\n    at com.antarctica21.backend.forecasting.service.PlanService.getWeekOversSalesExcelDetails(PlanService.java:3244) ~[classes!/:0.0.1-SNAPSHOT] \r\n\r\n\r\n**java.lang.NoClassDefFoundError: Could not initialize class sun.awt.X11FontManager**\r\n\r\n    at java.base/java.lang.Class.forName0(Native Method) ~[na:na]\r\n    at java.base/java.lang.Class.forName(Class.java:466) ~[na:na]\r\n    at java.desktop/sun.font.FontManagerFactory$1.run(FontManagerFactory.java:82) ~[na:na]\r\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:312) ~[na:na]\r\n    at java.desktop/sun.font.FontManagerFactory.getInstance(FontManagerFactory.java:74) ~[na:na]\r\n    at java.desktop/java.awt.Font.getFont2D(Font.java:526) ~[na:na]\r\n    at java.desktop/java.awt.Font.canDisplayUpTo(Font.java:2279) ~[na:na]\r\n    at java.desktop/java.awt.font.TextLayout.singleFont(TextLayout.java:469) ~[na:na]\r\n    at java.desktop/java.awt.font.TextLayout.&lt;init&gt;(TextLayout.java:530) ~[na:na]\r\n    at org.apache.poi.ss.util.SheetUtil.getDefaultCharWidth(SheetUtil.java:285) ~[poi-5.0.0.jar!/:5.0.0]\r\n    at org.apache.poi.ss.util.SheetUtil.getColumnWidth(SheetUtil.java:259) ~[poi-5.0.0.jar!/:5.0.0]\r\n    at org.apache.poi.ss.util.SheetUtil.getColumnWidth(SheetUtil.java:244) ~[poi-5.0.0.jar!/:5.0.0]\r\n    at org.apache.poi.xssf.usermodel.XSSFSheet.autoSizeColumn(XSSFSheet.java:523) ~[poi-ooxml-5.0.0.jar!/:5.0.0]\r\n    at org.apache.poi.xssf.usermodel.XSSFSheet.autoSizeColumn(XSSFSheet.java:505) ~[poi-ooxml-5.0.0.jar!/:5.0.0]\r\n    at com.antarctica21.backend.forecasting.service.PlanService.saveWOSRZipExcelFile(PlanService.java:3352) ~[classes!/:0.0.1-SNAPSHOT]\r\n    at com.antarctica21.backend.forecasting.service.PlanService.getWeekOversSalesExcelDetails(PlanService.java:3244) ~[classes!/:0.0.1-SNAPSHOT]\r\n    at com.antarctica21.backend.forecasting.service.PlanService.getWeekOversSalesExcelDetilsByCriteria(PlanService.java:541) ~[classes!/:0.0.1-SNAPSHOT]\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\r\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.7.jar!/:6.0.7]\r\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698) ~[spring-aop-6.0.7.jar!/:6.0.7]\r\n    at com.antarctica21.backend.forecasting.service.PlanService$$SpringCGLIB$$0.getWeekOversSalesExcelDetilsByCriteria(&lt;generated&gt;) ~[classes!/:0.0.1-SNAPSHOT]\r\n    at com.antarctica21.backend.forecasting.controller.PlanController.getWeekOversSalesExcelDetilsByCriteria(PlanController.java:190) ~[classes!/:0.0.1-SNAPSHOT]\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\r\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\r\n**Update on Issue**\r\nUpdated the docker file to handle the error identified due to Openjdk image limitation as suggested in below mentioned comments\r\n\r\nTo install the required packages (freetype and fontconfig) the Dockerfile was updated as  follows:\r\n\r\n    # Install required libraries\r\n        RUN apk add --no-cache freetype fontconfig\r\n\r\nI also updated the Apache POI dependencies to the latest versions as suggested.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n        &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n        &lt;version&gt;5.2.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n        &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n        &lt;version&gt;5.2.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**Update on Issue 2**\r\nWhen the above-mentioned updates were made to the Docker file, the existing error was fixed but another issue was displayed due to font-related limitations.\r\n\r\njava. lang.NullPointerException: Cannot load from short array because &quot;sun.awt.FontConfiguration.head&quot; is null.\r\n\r\nUpdated the Docker file as mentioned below and the were resolved.\r\n\r\n    RUN apk add --no-cache msttcorefonts-installer fontconfig\r\n    RUN update-ms-fonts","title":"Need help regarding an error in the Dockerized version of the application","body":"<p>I am currently working on an application that uses a Spring Boot-based backend based on Java 17. I use Maven as the build tool. The front end is a ReactJS-based application.</p>\n<p>In my developer environment, I use Oracle JDK java 17.0.4. When I build and execute the report functionality of this application it works as expected.</p>\n<p>But when the same functionality is checked in a dockerized environment for one Excel report download scenario fails with an error. The back-end log indicates some errors briefly mentioned below.</p>\n<p><em><strong>The error message encountered is a Java UnsatisfiedLinkError related to the libfontmanager.so library and its dependency libfreetype.so.6. This error seems to occur when Java is unable to load a required native library (libfreetype.so.6) that is necessary for the functioning of the Java font system.</strong></em></p>\n<p>How can I resolve this issue on Docker environments? Are any changes required for the docker file or Java version used?</p>\n<p><strong>Related docker File</strong></p>\n<pre><code># === Stage 1: Build the Spring Boot app ===\nFROM maven:3.6.3-openjdk-17 AS build\nWORKDIR /app\nCOPY pom.xml .\nCOPY src/ /app/src/\nRUN mvn package -DskipTests\n# === Stage 2: Create the final Docker image ===\nFROM openjdk:17-alpine\nWORKDIR /app\nCOPY --from=build /app/target/backend-0.0.1-SNAPSHOT.jar app.jar\n# Set environment variables for MySQL configuration\nENV MYSQL_HOST=localhost\nENV MYSQL_PORT=****** //Omitted\nENV MYSQL_DATABASE=db\nENV MYSQL_USERNAME=****** //Omitted\nENV MYSQL_PASSWORD=************ //Omitted\nEXPOSE 8080\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;]\n</code></pre>\n<p><strong>Brief set error messages are listed below.</strong></p>\n<p><strong>2023-10-05T07:19:23.875Z ERROR 1 --- [nio-8080-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed: java.lang.UnsatisfiedLinkError: /opt/openjdk-17/lib/libfontmanager.so: Error loading shared library libfreetype.so.6: No such file or directory (needed by /opt/openjdk-17/lib/libfontmanager.so)] with root cause</strong></p>\n<p><strong>java.lang.UnsatisfiedLinkError: /opt/openjdk-17/lib/libfontmanager.so: Error loading shared library libfreetype.so.6: No such file or directory (needed by /opt/openjdk-17/lib/libfontmanager.so)</strong></p>\n<pre><code>at java.base/jdk.internal.loader.NativeLibraries.load(Native Method) ~[na:na]\nat java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:383) ~[na:na]\nat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:227) ~[na:na]\nat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:169) ~[na:na]\nat java.base/jdk.internal.loader.NativeLibraries.findFromPaths(NativeLibraries.java:310) ~[na:na]\nat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:280) ~[na:na]\nat java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2392) ~[na:na]\nat java.base/java.lang.Runtime.loadLibrary0(Runtime.java:808) ~[na:na]\nat java.base/java.lang.System.loadLibrary(System.java:1893) ~[na:na]\nat java.desktop/sun.font.FontManagerNativeLibrary$1.run(FontManagerNativeLibrary.java:57) ~[na:na]\nat java.base/java.security.AccessController.doPrivileged(AccessController.java:312) ~[na:na]\nat java.desktop/sun.font.FontManagerNativeLibrary.&lt;clinit&gt;(FontManagerNativeLibrary.java:32) ~[na:na]\nat java.desktop/sun.font.SunFontManager$1.run(SunFontManager.java:270) ~[na:na]\nat java.desktop/sun.font.SunFontManager$1.run(SunFontManager.java:268) ~[na:na]\nat java.base/java.security.AccessController.doPrivileged(AccessController.java:312) ~[na:na]\nat java.desktop/sun.font.SunFontManager.&lt;clinit&gt;(SunFontManager.java:268) ~[na:na]\nat java.base/java.lang.Class.forName0(Native Method) ~[na:na]\nat java.base/java.lang.Class.forName(Class.java:466) ~[na:na]\nat java.desktop/sun.font.FontManagerFactory$1.run(FontManagerFactory.java:82) ~[na:na]\nat java.base/java.security.AccessController.doPrivileged(AccessController.java:312) ~[na:na]\nat java.desktop/sun.font.FontManagerFactory.getInstance(FontManagerFactory.java:74) ~[na:na]\nat java.desktop/java.awt.Font.getFont2D(Font.java:526) ~[na:na]\nat java.desktop/java.awt.Font.canDisplayUpTo(Font.java:2279) ~[na:na]\nat java.desktop/java.awt.font.TextLayout.singleFont(TextLayout.java:469) ~[na:na]\nat java.desktop/java.awt.font.TextLayout.&lt;init&gt;(TextLayout.java:530) ~[na:na]\nat org.apache.poi.ss.util.SheetUtil.getDefaultCharWidth(SheetUtil.java:285) ~[poi-5.0.0.jar!/:5.0.0]\nat org.apache.poi.ss.util.SheetUtil.getColumnWidth(SheetUtil.java:259) ~[poi-5.0.0.jar!/:5.0.0]\nat org.apache.poi.ss.util.SheetUtil.getColumnWidth(SheetUtil.java:244) ~[poi-5.0.0.jar!/:5.0.0]\nat org.apache.poi.xssf.usermodel.XSSFSheet.autoSizeColumn(XSSFSheet.java:523) ~[poi-ooxml-5.0.0.jar!/:5.0.0]\nat org.apache.poi.xssf.usermodel.XSSFSheet.autoSizeColumn(XSSFSheet.java:505) ~[poi-ooxml-5.0.0.jar!/:5.0.0]\nat com.antarctica21.backend.forecasting.service.PlanService.saveWOSRZipExcelFile(PlanService.java:3352) ~[classes!/:0.0.1-SNAPSHOT]\nat com.antarctica21.backend.forecasting.service.PlanService.getWeekOversSalesExcelDetails(PlanService.java:3244) ~[classes!/:0.0.1-SNAPSHOT] \n</code></pre>\n<p><strong>java.lang.NoClassDefFoundError: Could not initialize class sun.awt.X11FontManager</strong></p>\n<pre><code>at java.base/java.lang.Class.forName0(Native Method) ~[na:na]\nat java.base/java.lang.Class.forName(Class.java:466) ~[na:na]\nat java.desktop/sun.font.FontManagerFactory$1.run(FontManagerFactory.java:82) ~[na:na]\nat java.base/java.security.AccessController.doPrivileged(AccessController.java:312) ~[na:na]\nat java.desktop/sun.font.FontManagerFactory.getInstance(FontManagerFactory.java:74) ~[na:na]\nat java.desktop/java.awt.Font.getFont2D(Font.java:526) ~[na:na]\nat java.desktop/java.awt.Font.canDisplayUpTo(Font.java:2279) ~[na:na]\nat java.desktop/java.awt.font.TextLayout.singleFont(TextLayout.java:469) ~[na:na]\nat java.desktop/java.awt.font.TextLayout.&lt;init&gt;(TextLayout.java:530) ~[na:na]\nat org.apache.poi.ss.util.SheetUtil.getDefaultCharWidth(SheetUtil.java:285) ~[poi-5.0.0.jar!/:5.0.0]\nat org.apache.poi.ss.util.SheetUtil.getColumnWidth(SheetUtil.java:259) ~[poi-5.0.0.jar!/:5.0.0]\nat org.apache.poi.ss.util.SheetUtil.getColumnWidth(SheetUtil.java:244) ~[poi-5.0.0.jar!/:5.0.0]\nat org.apache.poi.xssf.usermodel.XSSFSheet.autoSizeColumn(XSSFSheet.java:523) ~[poi-ooxml-5.0.0.jar!/:5.0.0]\nat org.apache.poi.xssf.usermodel.XSSFSheet.autoSizeColumn(XSSFSheet.java:505) ~[poi-ooxml-5.0.0.jar!/:5.0.0]\nat com.antarctica21.backend.forecasting.service.PlanService.saveWOSRZipExcelFile(PlanService.java:3352) ~[classes!/:0.0.1-SNAPSHOT]\nat com.antarctica21.backend.forecasting.service.PlanService.getWeekOversSalesExcelDetails(PlanService.java:3244) ~[classes!/:0.0.1-SNAPSHOT]\nat com.antarctica21.backend.forecasting.service.PlanService.getWeekOversSalesExcelDetilsByCriteria(PlanService.java:541) ~[classes!/:0.0.1-SNAPSHOT]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\nat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\nat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.7.jar!/:6.0.7]\nat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698) ~[spring-aop-6.0.7.jar!/:6.0.7]\nat com.antarctica21.backend.forecasting.service.PlanService$$SpringCGLIB$$0.getWeekOversSalesExcelDetilsByCriteria(&lt;generated&gt;) ~[classes!/:0.0.1-SNAPSHOT]\nat com.antarctica21.backend.forecasting.controller.PlanController.getWeekOversSalesExcelDetilsByCriteria(PlanController.java:190) ~[classes!/:0.0.1-SNAPSHOT]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\nat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n</code></pre>\n<p><strong>Update on Issue</strong>\nUpdated the docker file to handle the error identified due to Openjdk image limitation as suggested in below mentioned comments</p>\n<p>To install the required packages (freetype and fontconfig) the Dockerfile was updated as  follows:</p>\n<pre><code># Install required libraries\n    RUN apk add --no-cache freetype fontconfig\n</code></pre>\n<p>I also updated the Apache POI dependencies to the latest versions as suggested.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi&lt;/artifactId&gt;\n    &lt;version&gt;5.2.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n    &lt;version&gt;5.2.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Update on Issue 2</strong>\nWhen the above-mentioned updates were made to the Docker file, the existing error was fixed but another issue was displayed due to font-related limitations.</p>\n<p>java. lang.NullPointerException: Cannot load from short array because &quot;sun.awt.FontConfiguration.head&quot; is null.</p>\n<p>Updated the Docker file as mentioned below and the were resolved.</p>\n<pre><code>RUN apk add --no-cache msttcorefonts-installer fontconfig\nRUN update-ms-fonts\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":12223265,"reputation":8608,"user_id":8921755,"display_name":"Ivan"},"score":0,"creation_date":1690085743,"post_id":28673740,"comment_id":135302756,"body_markdown":"You probably need to add jar with driver class to class path when running your program to eliminate throwing ClassNotFound at runtime","body":"You probably need to add jar with driver class to class path when running your program to eliminate throwing ClassNotFound at runtime"}],"answers":[{"tags":[],"owner":{"account_id":1250747,"reputation":12431,"user_id":1640490,"accept_rate":92,"display_name":"nano_nano"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1424694285,"creation_date":1424694285,"answer_id":28673779,"question_id":28673740,"body_markdown":"one of your methods throw a `ClassNotFoundException` and you are responsible to deal with those exceptions.\r\nA quickfix \r\n\r\n    public static void main(String args[]) throws Exception\r\n\r\nin this case the exception is printed ot to your console(please expand your question with that output).\r\n\r\nFurthermore be sure that you add the jdbc driver library to your project.\r\n","title":"unreported exception ClassNotFoundException;must be caught or declared to be thrown","body":"<p>one of your methods throw a <code>ClassNotFoundException</code> and you are responsible to deal with those exceptions.\nA quickfix </p>\n\n<pre><code>public static void main(String args[]) throws Exception\n</code></pre>\n\n<p>in this case the exception is printed ot to your console(please expand your question with that output).</p>\n\n<p>Furthermore be sure that you add the jdbc driver library to your project.</p>\n"},{"tags":[],"owner":{"account_id":1857756,"reputation":1598,"user_id":1682984,"display_name":"Aram Paronikyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424696555,"creation_date":1424696555,"answer_id":28674460,"question_id":28673740,"body_markdown":"`ClassNotFoundException` is a subclass of Exception, that&#39;s why you pass compiler. `SQLException` class doesn&#39;t wrap `ClassNotFoundException`. Since the `forName()` method of the &quot;`Class`&quot; class is declared as &quot;`throws ClassNotFoundException`&quot;, the compiler will require you to wrap the method call with a try/catch block or a `throws` clause on the caller method. The `catch` block must use either a `ClassNotFoundException` or one of its parent `Exception` classes.\r\n\r\nYou need to figure out the exception throwing at runtime to check why it fails to run ahead.","title":"unreported exception ClassNotFoundException;must be caught or declared to be thrown","body":"<p><code>ClassNotFoundException</code> is a subclass of Exception, that's why you pass compiler. <code>SQLException</code> class doesn't wrap <code>ClassNotFoundException</code>. Since the <code>forName()</code> method of the \"<code>Class</code>\" class is declared as \"<code>throws ClassNotFoundException</code>\", the compiler will require you to wrap the method call with a try/catch block or a <code>throws</code> clause on the caller method. The <code>catch</code> block must use either a <code>ClassNotFoundException</code> or one of its parent <code>Exception</code> classes.</p>\n\n<p>You need to figure out the exception throwing at runtime to check why it fails to run ahead.</p>\n"}],"owner":{"account_id":1259489,"reputation":21,"user_id":1218205,"display_name":"user1218205"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8920,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1700557510,"creation_date":1424694161,"question_id":28673740,"body_markdown":"This is the program I try to compile using jdk.&quot;satya&quot; in the program refers to an msaccess db file database.when I try to compile it is showing error like `&quot;MyClass.java:0:error:unreported exception ClassNotFoundException;must be caught or declared to be thrown&quot;`.Even if I change the exception in the program from `SQLException` to Exception it compiles sucessfully.But throwing exception when running the program.How to execute??\r\n\r\n   \r\n\r\n    import java.sql.*;\r\n  \r\n    class MyClass\r\n    {\r\n         public static void main(String args[])\r\n         {\r\n  \r\n          try{ \r\n                Class.forName(&quot;sun.jdbc.odbc.JdbcOdbcDriver&quot;);\r\n               Connection con=DriverManager.getConnection(&quot;jdbc:odbc:satya&quot;,&quot;&quot;,&quot;&quot;);\r\n               Statement st=con.createStatement();\r\n               ResultSet rs=st.executeQuery(&quot;select * from studentinfo&quot;);\r\n               while(rs.next())\r\n               {\r\n                 System.out.println(rs.getInt(1)+&quot;\\t&quot;+\r\n                 rs.getString(2)+&quot;\\t&quot;+\r\n                 rs.getString(3)+&quot;\\t&quot;);\r\n               }\r\n             rs.close();\r\n            st.close();\r\n   \r\n            }\r\n            catch (SQLException e) {\r\n                 System.out.println(&quot;&lt;P&gt;&quot; + &quot;There was an error doing the query:&quot;);\r\n                System.out.println (&quot;&lt;PRE&gt;&quot; + e + &quot;&lt;/PRE&gt; \\n &lt;P&gt;&quot;);\r\n              }\r\n     }\r\n     }\r\n","title":"unreported exception ClassNotFoundException;must be caught or declared to be thrown","body":"<p>This is the program I try to compile using jdk.\"satya\" in the program refers to an msaccess db file database.when I try to compile it is showing error like <code>\"MyClass.java:0:error:unreported exception ClassNotFoundException;must be caught or declared to be thrown\"</code>.Even if I change the exception in the program from <code>SQLException</code> to Exception it compiles sucessfully.But throwing exception when running the program.How to execute??</p>\n\n<pre><code>import java.sql.*;\n\nclass MyClass\n{\n     public static void main(String args[])\n     {\n\n      try{ \n            Class.forName(\"sun.jdbc.odbc.JdbcOdbcDriver\");\n           Connection con=DriverManager.getConnection(\"jdbc:odbc:satya\",\"\",\"\");\n           Statement st=con.createStatement();\n           ResultSet rs=st.executeQuery(\"select * from studentinfo\");\n           while(rs.next())\n           {\n             System.out.println(rs.getInt(1)+\"\\t\"+\n             rs.getString(2)+\"\\t\"+\n             rs.getString(3)+\"\\t\");\n           }\n         rs.close();\n        st.close();\n\n        }\n        catch (SQLException e) {\n             System.out.println(\"&lt;P&gt;\" + \"There was an error doing the query:\");\n            System.out.println (\"&lt;PRE&gt;\" + e + \"&lt;/PRE&gt; \\n &lt;P&gt;\");\n          }\n }\n }\n</code></pre>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1490339610,"post_id":42993428,"comment_id":73077505,"body_markdown":"Jump to the definition of `get`, see if it says `throws JqlException`. If it does, you must use try...catch.","body":"Jump to the definition of <code>get</code>, see if it says <code>throws JqlException</code>. If it does, you must use try...catch."},{"owner":{"account_id":7679118,"reputation":6230,"user_id":5818889,"accept_rate":83,"display_name":"glee8e"},"score":4,"creation_date":1490340710,"post_id":42993428,"comment_id":73078021,"body_markdown":"It seems that quite a lot of people are considering Optional as the NextGeneration control flow construct. That&#39;s not going to happen. Optional, as well as its primitive counterparts, inherently can&#39;t handle this kind of task. It&#39;s not designed to completely replace control flow constructs like if-else or try-catch. Instead, it focuses on getting rid of those endless null checks.","body":"It seems that quite a lot of people are considering Optional as the NextGeneration control flow construct. That&#39;s not going to happen. Optional, as well as its primitive counterparts, inherently can&#39;t handle this kind of task. It&#39;s not designed to completely replace control flow constructs like if-else or try-catch. Instead, it focuses on getting rid of those endless null checks."},{"owner":{"account_id":2021661,"reputation":62048,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":0,"creation_date":1490346759,"post_id":42993428,"comment_id":73081084,"body_markdown":"@glee8e *[`Optional`] focuses on getting rid of those endless null checks.* I&#39;d be more specific. Many people would jump to the conclusion that they ought to replace all occurrences of `null` with `Optional`, which goes against the intent of `Optional`&#39;s designers.","body":"@glee8e <i>[<code>Optional</code>] focuses on getting rid of those endless null checks.</i> I&#39;d be more specific. Many people would jump to the conclusion that they ought to replace all occurrences of <code>null</code> with <code>Optional</code>, which goes against the intent of <code>Optional</code>&#39;s designers."},{"owner":{"account_id":7679118,"reputation":6230,"user_id":5818889,"accept_rate":83,"display_name":"glee8e"},"score":0,"creation_date":1490442478,"post_id":42993428,"comment_id":73120432,"body_markdown":"@Jubobs Maybe I&#39;m still not senior enough to know where `null` can&#39;t be replaced with `Optional`, except in performance critical code or there is a design flaw. Please point out a situation, except those listed above, where `null` is used but `Optional` is not applicable.","body":"@Jubobs Maybe I&#39;m still not senior enough to know where <code>null</code> can&#39;t be replaced with <code>Optional</code>, except in performance critical code or there is a design flaw. Please point out a situation, except those listed above, where <code>null</code> is used but <code>Optional</code> is not applicable."},{"owner":{"account_id":2021661,"reputation":62048,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":1,"creation_date":1490646528,"post_id":42993428,"comment_id":73196249,"body_markdown":"@glee8e You shouldn&#39;t use `Optional` fields or parameters. [As Brian Goetz puts it](http://stackoverflow.com/a/26328555/2541573), *[their] intention was to provide a limited mechanism for library method return types where there needed to be a clear way to represent &quot;no result&quot;, and using `null` for such was overwhelmingly likely to cause errors*. See also [this great talk by Stuart Marks](https://www.youtube.com/watch?v=Ej0sss6cq14).","body":"@glee8e You shouldn&#39;t use <code>Optional</code> fields or parameters. <a href=\"http://stackoverflow.com/a/26328555/2541573\">As Brian Goetz puts it</a>, <i>[their] intention was to provide a limited mechanism for library method return types where there needed to be a clear way to represent &quot;no result&quot;, and using <code>null</code> for such was overwhelmingly likely to cause errors</i>. See also <a href=\"https://www.youtube.com/watch?v=Ej0sss6cq14\" rel=\"nofollow noreferrer\">this great talk by Stuart Marks</a>."},{"owner":{"account_id":7679118,"reputation":6230,"user_id":5818889,"accept_rate":83,"display_name":"glee8e"},"score":0,"creation_date":1490700938,"post_id":42993428,"comment_id":73220231,"body_markdown":"@Jubobs Well, such weird usage of Optional never occurred to me. Thanks to point out another weird mistake people may make.","body":"@Jubobs Well, such weird usage of Optional never occurred to me. Thanks to point out another weird mistake people may make."},{"owner":{"account_id":1911430,"reputation":2483,"user_id":1725151,"accept_rate":67,"display_name":"Guildenstern"},"score":0,"creation_date":1594289468,"post_id":42993428,"comment_id":111076664,"body_markdown":"@glee8e Regarding next generation: Optional values have been used in ML-like languages for decades.  But ML-like languages have algebraic data types and pattern matching which makes using values-as-errors more ergonomic.","body":"@glee8e Regarding next generation: Optional values have been used in ML-like languages for decades.  But ML-like languages have algebraic data types and pattern matching which makes using values-as-errors more ergonomic."}],"answers":[{"comments":[{"owner":{"account_id":19298004,"reputation":129,"user_id":14106566,"display_name":"humbleCodes"},"score":0,"creation_date":1680627262,"post_id":42993594,"comment_id":133928841,"body_markdown":"how can we also attach the HttpStatus code with the exception in this example ?","body":"how can we also attach the HttpStatus code with the exception in this example ?"},{"owner":{"account_id":1316033,"reputation":7855,"user_id":1262865,"accept_rate":50,"display_name":"john16384"},"score":0,"creation_date":1680640680,"post_id":42993594,"comment_id":133932036,"body_markdown":"@humbleCodes you can just throw a `HttpStatusCodeException` or `ResponseStatusException`, it will depend on the framework and what exceptions are available for this purpose.  You can also define your own exception that accepts a status code.","body":"@humbleCodes you can just throw a <code>HttpStatusCodeException</code> or <code>ResponseStatusException</code>, it will depend on the framework and what exceptions are available for this purpose.  You can also define your own exception that accepts a status code."},{"owner":{"account_id":19298004,"reputation":129,"user_id":14106566,"display_name":"humbleCodes"},"score":0,"creation_date":1680707567,"post_id":42993594,"comment_id":133944522,"body_markdown":"do you know any resources which have used implementations for Spring/Spring Boot framework applications ?","body":"do you know any resources which have used implementations for Spring/Spring Boot framework applications ?"}],"tags":[],"owner":{"account_id":1316033,"reputation":7855,"user_id":1262865,"accept_rate":50,"display_name":"john16384"},"comment_count":3,"down_vote_count":0,"up_vote_count":97,"is_accepted":true,"score":97,"last_activity_date":1601508686,"creation_date":1490339899,"answer_id":42993594,"question_id":42993428,"body_markdown":"`Optional` is not intended for the purpose of dealing with exceptions, it was intended to deal with potential `null`s without breaking the flow of your program.  For example:\r\n\r\n     myOptional.map(Integer::parseInt).orElseThrow(() -&gt; new RuntimeException(&quot;No data!&quot;);\r\n\r\nThis will automatically skip the `map` step if the optional was empty and go right to the `throw` step -- a nice unbroken program flow.\r\n\r\nWhen you write:\r\n\r\n     myOptionalValue.orElseThrow(() -&gt; new RuntimeException(&quot;Unavailable&quot;));\r\n\r\n... what you are really saying is: Return my optional value, but throw an exception if it is not available.\r\n\r\nWhat you seem to want is a way to create an optional (that instantly catches the exception) and will rethrow that exception when you try using the optional.\r\n","title":"Throw exception in optional in Java8","body":"<p><code>Optional</code> is not intended for the purpose of dealing with exceptions, it was intended to deal with potential <code>null</code>s without breaking the flow of your program.  For example:</p>\n<pre><code> myOptional.map(Integer::parseInt).orElseThrow(() -&gt; new RuntimeException(&quot;No data!&quot;);\n</code></pre>\n<p>This will automatically skip the <code>map</code> step if the optional was empty and go right to the <code>throw</code> step -- a nice unbroken program flow.</p>\n<p>When you write:</p>\n<pre><code> myOptionalValue.orElseThrow(() -&gt; new RuntimeException(&quot;Unavailable&quot;));\n</code></pre>\n<p>... what you are really saying is: Return my optional value, but throw an exception if it is not available.</p>\n<p>What you seem to want is a way to create an optional (that instantly catches the exception) and will rethrow that exception when you try using the optional.</p>\n"},{"tags":[],"owner":{"account_id":1215517,"reputation":5628,"user_id":1183192,"accept_rate":82,"display_name":"stevecross"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1490366072,"creation_date":1490339922,"answer_id":42993601,"question_id":42993428,"body_markdown":"That&#39;s not how Optionals work. They don&#39;t make try-catch-blocks obsolete. However, you could introduce a new wrapper-function like this:\r\n\r\n    public Optional&lt;MyObject&gt; getMyObject(final String jql) {\r\n        try {\r\n            return Optional.ofNullable(get(sql));\r\n        } catch (final JqlParseException e) {\r\n            return Optional.empty();\r\n        }\r\n    }\r\n\r\nYou won&#39;t have to deal with the exception anymore, but you won&#39;t know if there was an error if you get an empty Optional as well.","title":"Throw exception in optional in Java8","body":"<p>That's not how Optionals work. They don't make try-catch-blocks obsolete. However, you could introduce a new wrapper-function like this:</p>\n\n<pre><code>public Optional&lt;MyObject&gt; getMyObject(final String jql) {\n    try {\n        return Optional.ofNullable(get(sql));\n    } catch (final JqlParseException e) {\n        return Optional.empty();\n    }\n}\n</code></pre>\n\n<p>You won't have to deal with the exception anymore, but you won't know if there was an error if you get an empty Optional as well.</p>\n"},{"tags":[],"owner":{"account_id":17689918,"reputation":21,"user_id":12841950,"display_name":"naveen"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1622150794,"creation_date":1622150794,"answer_id":67730196,"question_id":42993428,"body_markdown":"Try this\r\n\r\n    Optional.ofNullable(result)\r\n                    .orElseThrow(() -&gt; new GenericClientException(&quot;Request body is not valid&quot;, HttpStatus.BAD_REQUEST));","title":"Throw exception in optional in Java8","body":"<p>Try this</p>\n<pre><code>Optional.ofNullable(result)\n                .orElseThrow(() -&gt; new GenericClientException(&quot;Request body is not valid&quot;, HttpStatus.BAD_REQUEST));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11318804,"reputation":161,"user_id":8299708,"display_name":"sudha mosalikanti"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700557440,"creation_date":1642769072,"answer_id":70801481,"question_id":42993428,"body_markdown":"    if (StringUtils.isEmpty(message)) {\r\n    \t\t\t\t\r\n    \t\t\t\tthrow new ValidationException(&quot;empty message body received from the queue&quot;);\r\n\t\r\n\r\n**in java 8**\r\n\r\n    Optional.ofNullable(message).filter(message -&gt; !message.isEmpty()).orElseThrow(() -&gt; \r\n    \t\t\t\tnew ValidationException(&quot;empty message body received from the queue&quot;)\r\n    \t\t\t\t\r\n    \t\t\t);\r\n\t\t\t\t","title":"Throw exception in optional in Java8","body":"<pre><code>if (StringUtils.isEmpty(message)) {\n                \n                throw new ValidationException(&quot;empty message body received from the queue&quot;);\n</code></pre>\n<p><strong>in java 8</strong></p>\n<pre><code>Optional.ofNullable(message).filter(message -&gt; !message.isEmpty()).orElseThrow(() -&gt; \n                new ValidationException(&quot;empty message body received from the queue&quot;)\n                \n            );\n            \n</code></pre>\n"},{"tags":[],"owner":{"account_id":8531772,"reputation":1,"user_id":6395156,"display_name":"Millys Carvalhaes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652362672,"creation_date":1652362672,"answer_id":72216646,"question_id":42993428,"body_markdown":"Optional helps to deal with NullPointerException.\r\n\r\nYou can use it to cast new exceptions as mentioned.\r\n\r\n    MyObject object = Optional.ofNullable(get(sql)).orElseThrow(RuntimeException::new);\r\n\r\nHowever, your method `get(sql)` is not returning NULL, which invalidates the use of OPTIONAL as desired. \r\n\r\nI would keep using Try Catch.","title":"Throw exception in optional in Java8","body":"<p>Optional helps to deal with NullPointerException.</p>\n<p>You can use it to cast new exceptions as mentioned.</p>\n<pre><code>MyObject object = Optional.ofNullable(get(sql)).orElseThrow(RuntimeException::new);\n</code></pre>\n<p>However, your method <code>get(sql)</code> is not returning NULL, which invalidates the use of OPTIONAL as desired.</p>\n<p>I would keep using Try Catch.</p>\n"}],"owner":{"account_id":10376134,"reputation":621,"user_id":7652249,"accept_rate":50,"display_name":"joe paulens"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127923,"favorite_count":0,"down_vote_count":1,"up_vote_count":53,"accepted_answer_id":42993594,"answer_count":5,"score":52,"last_activity_date":1700557440,"creation_date":1490339287,"question_id":42993428,"body_markdown":"There is a method `get(sql)` (I can not modify it). This method returns MyObjects and it has to be in try catch block because `JqlParseException` is possible there. My code is:\r\n\r\n    String sql = something;\r\n    try{\r\n       MyObject object = get(sql);\r\n    } catch(JqlParseException e){\r\n       e.printStackTrace();\r\n    } catch(RuntimeException e){\r\n       e.printStackTrace();\r\n    }\r\nI want to remove try catch and use `Optional` class, I tried:\r\n\r\n    MyObject object = Optional.ofNullable(get(sql)).orElseThrow(RuntimeException::new);\r\nbut IDE force there try catch too.\r\n And for:\r\n\r\n    MyObject object = Optional.ofNullable(get(sql)).orElseThrow(JqlParseException::new));\r\n\r\nis an error (in IDE) `The type JqlParseException does not define JqlParseException() that is applicable `. Is there any way to avoid try catch blocks and use optional?\r\n","title":"Throw exception in optional in Java8","body":"<p>There is a method <code>get(sql)</code> (I can not modify it). This method returns MyObjects and it has to be in try catch block because <code>JqlParseException</code> is possible there. My code is:</p>\n\n<pre><code>String sql = something;\ntry{\n   MyObject object = get(sql);\n} catch(JqlParseException e){\n   e.printStackTrace();\n} catch(RuntimeException e){\n   e.printStackTrace();\n}\n</code></pre>\n\n<p>I want to remove try catch and use <code>Optional</code> class, I tried:</p>\n\n<pre><code>MyObject object = Optional.ofNullable(get(sql)).orElseThrow(RuntimeException::new);\n</code></pre>\n\n<p>but IDE force there try catch too.\n And for:</p>\n\n<pre><code>MyObject object = Optional.ofNullable(get(sql)).orElseThrow(JqlParseException::new));\n</code></pre>\n\n<p>is an error (in IDE) <code>The type JqlParseException does not define JqlParseException() that is applicable</code>. Is there any way to avoid try catch blocks and use optional?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1838436,"reputation":27,"user_id":1668346,"display_name":"Undoht"},"score":0,"creation_date":1700556924,"post_id":77521380,"comment_id":136666171,"body_markdown":"Adding implementation of client fixes the problem:\n\n    testImplementation &#39;org.glassfish.jersey.core:jersey-client:3.1.3&#39;","body":"Adding implementation of client fixes the problem:      testImplementation &#39;org.glassfish.jersey.core:jersey-client:3.1.3&#39;"}],"answers":[{"tags":[],"owner":{"account_id":1838436,"reputation":27,"user_id":1668346,"display_name":"Undoht"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700557013,"creation_date":1700557013,"answer_id":77521493,"question_id":77521380,"body_markdown":"Adding implementation of client into dependencies fixes the problem:\r\n\r\n**testImplementation &#39;org.glassfish.jersey.core:jersey-client:3.1.3&#39;** \r\n\r\nThanks to [this][1]\r\n\r\n\r\n  [1]: https://github.com/maruTA-bis5/mattermost4j/discussions/482","title":"Library tests in java project fail with ClassNotFoundException for jakarta class","body":"<p>Adding implementation of client into dependencies fixes the problem:</p>\n<p><strong>testImplementation 'org.glassfish.jersey.core:jersey-client:3.1.3'</strong></p>\n<p>Thanks to <a href=\"https://github.com/maruTA-bis5/mattermost4j/discussions/482\" rel=\"nofollow noreferrer\">this</a></p>\n"}],"owner":{"account_id":1838436,"reputation":27,"user_id":1668346,"display_name":"Undoht"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77521493,"answer_count":1,"score":0,"last_activity_date":1700557013,"creation_date":1700555944,"question_id":77521380,"body_markdown":"I am migrating one java library project (but the problem is reproducible for normal web java app as well) from java 8 to java 11 where I am started to use  **jakarta.ws.rs.client.ClientBuilder** class from **jakarta.ws.rs:jakarta.ws.rs-api:3.1.0** instead of old **javax** class. And for both main and test modules compilation works, but running tests fails with:\r\n```\r\nProvider for jakarta.ws.rs.client.ClientBuilder cannot be found\r\njava.lang.ClassNotFoundException: Provider for jakarta.ws.rs.client.ClientBuilder cannot be found\r\n\tat jakarta.ws.rs.client.FactoryFinder.find(FactoryFinder.java:163)\r\n\tat jakarta.ws.rs.client.ClientBuilder.newBuilder(ClientBuilder.java:62)\r\n\tat com.stackoverflow.FooTests.simpleTest(FooTests.java:10)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:108)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:40)\r\n\tat org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:60)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n\tat jdk.proxy1/jdk.proxy1.$Proxy2.processTestClass(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker$2.run(TestWorker.java:176)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\r\n\tat org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\r\n```\r\n\r\nTest class looks like:\r\n```\r\npackage com.stackoverflow;\r\n\r\nimport jakarta.ws.rs.client.ClientBuilder;\r\nimport org.junit.Test;\r\n\r\n\r\npublic class FooTests {\r\n    @Test\r\n    public void simpleTest() {\r\n        ClientBuilder.newBuilder();\r\n    }\r\n}\r\n```\r\n\r\nIs it due the fact that actual implementation is not presented in tests runtime?\r\nIs there an easy way to fix it somehow?\r\n\r\n","title":"Library tests in java project fail with ClassNotFoundException for jakarta class","body":"<p>I am migrating one java library project (but the problem is reproducible for normal web java app as well) from java 8 to java 11 where I am started to use  <strong>jakarta.ws.rs.client.ClientBuilder</strong> class from <strong>jakarta.ws.rs:jakarta.ws.rs-api:3.1.0</strong> instead of old <strong>javax</strong> class. And for both main and test modules compilation works, but running tests fails with:</p>\n<pre><code>Provider for jakarta.ws.rs.client.ClientBuilder cannot be found\njava.lang.ClassNotFoundException: Provider for jakarta.ws.rs.client.ClientBuilder cannot be found\n    at jakarta.ws.rs.client.FactoryFinder.find(FactoryFinder.java:163)\n    at jakarta.ws.rs.client.ClientBuilder.newBuilder(ClientBuilder.java:62)\n    at com.stackoverflow.FooTests.simpleTest(FooTests.java:10)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:108)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:40)\n    at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:60)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:52)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\n    at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\n    at jdk.proxy1/jdk.proxy1.$Proxy2.processTestClass(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker$2.run(TestWorker.java:176)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\n    at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\n</code></pre>\n<p>Test class looks like:</p>\n<pre><code>package com.stackoverflow;\n\nimport jakarta.ws.rs.client.ClientBuilder;\nimport org.junit.Test;\n\n\npublic class FooTests {\n    @Test\n    public void simpleTest() {\n        ClientBuilder.newBuilder();\n    }\n}\n</code></pre>\n<p>Is it due the fact that actual implementation is not presented in tests runtime?\nIs there an easy way to fix it somehow?</p>\n"},{"tags":["java","android","android-billing"],"answers":[{"comments":[{"owner":{"account_id":17035734,"reputation":201,"user_id":12324822,"display_name":"Espada"},"score":0,"creation_date":1700645681,"post_id":77521440,"comment_id":136679011,"body_markdown":"In other words, it cannot be canceled but can be restored or consumed when the internet is stable. I have tried the link you provided and it is very helpful. Thank You.","body":"In other words, it cannot be canceled but can be restored or consumed when the internet is stable. I have tried the link you provided and it is very helpful. Thank You."}],"tags":[],"owner":{"account_id":29520193,"reputation":932,"user_id":22623172,"display_name":"Vlad Guriev"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700556578,"creation_date":1700556578,"answer_id":77521440,"question_id":77521357,"body_markdown":"No, it&#39;s not possible. But you can call `BillingClient.queryPurchasesAsync()` in your `onResume()` method, as suggested [here][1], and try to acknowledge/consume the unprocessed.\r\n\r\nBesides consuming the second one, you have to acknowledge your one-time purchase as otherwise it will be refunded by Google in 3 days.\r\n\r\n\r\n  [1]: https://developer.android.com/google/play/billing/integrate#fetch","title":"Android Billing : How to cancel Purchase if ConsumeParams failed","body":"<p>No, it's not possible. But you can call <code>BillingClient.queryPurchasesAsync()</code> in your <code>onResume()</code> method, as suggested <a href=\"https://developer.android.com/google/play/billing/integrate#fetch\" rel=\"nofollow noreferrer\">here</a>, and try to acknowledge/consume the unprocessed.</p>\n<p>Besides consuming the second one, you have to acknowledge your one-time purchase as otherwise it will be refunded by Google in 3 days.</p>\n"}],"owner":{"account_id":17035734,"reputation":201,"user_id":12324822,"display_name":"Espada"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700556578,"creation_date":1700555661,"question_id":77521357,"body_markdown":"On an active and stable internet network, the purchasing process does not have any obstacles, but when a purchase is made on an unstable and super slow internet network (possibly disconnected, lost network or something else), sometimes users can&#39;t wait and cancel the purchase by close the application directly or by other means.\r\n\r\nI have 2 types of digital content for sale, the first is a one-time purchase and the second can be purchased multiple times.\r\n\r\nThe problem is in the second type, when the purchase is successful but fails to consume, the end result is a one-time purchase and cannot be purchased again by the user.\r\n\r\nWhat I want to ask is how to cancel a purchase if ConsumeParams fails to consume the purchase? is that possible.\r\n\r\n        @Override\r\n        public void onPurchasesUpdated(@NonNull BillingResult billingResult, @Nullable List&lt;Purchase&gt; list) {\r\n            if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; list != null) {\r\n                handlePurchases(list);\r\n            } else if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.ITEM_ALREADY_OWNED) {\r\n                new Handler(Looper.getMainLooper()).post(this::CANCELED);\r\n            } else if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.USER_CANCELED) {\r\n                new Handler(Looper.getMainLooper()).post(() -&gt; {\r\n                    binding.PurchaseTxtMessage.setText(R.string.DPurchase_Canceled);\r\n                    CANCELED();\r\n                });\r\n            } else {\r\n                new Handler(Looper.getMainLooper()).post(() -&gt; {\r\n                    binding.PurchaseTxtMessage.setText(R.string.DPurchase_Canceled);\r\n                    CANCELED();\r\n                });\r\n            }\r\n        }\r\n    \r\n        private void handlePurchases(List&lt;Purchase&gt;  purchases) {\r\n            for(Purchase purchase:purchases) {\r\n                if (SKU.equals(purchase.getProducts().get(0)) &amp;&amp; purchase.getPurchaseState() == Purchase.PurchaseState.PURCHASED) {\r\n                    if (!verifyValidSignature(purchase.getOriginalJson(), purchase.getSignature())) {\r\n                        new Handler(Looper.getMainLooper()).post(() -&gt; {\r\n                            binding.PurchaseTxtMessage.setText(R.string.DPurchase_Not_Valid);\r\n                            CANCELED();\r\n                        });\r\n                        return;\r\n                    }\r\n                    if (!purchase.isAcknowledged()) {\r\n                        AcknowledgePurchaseParams acknowledgePurchaseParams = AcknowledgePurchaseParams.newBuilder().setPurchaseToken(purchase.getPurchaseToken()).build();\r\n                        billingClient.acknowledgePurchase(acknowledgePurchaseParams, billingResult -&gt; {\r\n                            if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\r\n                                //CHECK PURCHASE TYPE\r\n                                new Handler(Looper.getMainLooper()).post(() -&gt; CHECK_PURCHASE_TYPE(purchase));\r\n                            } else {\r\n                                new Handler(Looper.getMainLooper()).post(this::CANCELED);\r\n                            }\r\n                        });\r\n                    } else {\r\n                        //CHECK PURCHASE TYPE\r\n                        new Handler(Looper.getMainLooper()).post(() -&gt; CHECK_PURCHASE_TYPE(purchase));\r\n                    }\r\n                } else if(SKU.equals(purchase.getProducts().get(0)) &amp;&amp; purchase.getPurchaseState() == Purchase.PurchaseState.PENDING) {\r\n                    new Handler(Looper.getMainLooper()).post(() -&gt; {\r\n                        binding.PurchaseTxtMessage.setText(R.string.DPurchase_Pending);\r\n                        CANCELED();\r\n                    });\r\n                }  else if(SKU.equals(purchase.getProducts().get(0)) &amp;&amp; purchase.getPurchaseState() == Purchase.PurchaseState.UNSPECIFIED_STATE) {\r\n                    new Handler(Looper.getMainLooper()).post(() -&gt; {\r\n                        binding.PurchaseTxtMessage.setText(R.string.DPurchase_Unknown);\r\n                        CANCELED();\r\n                    });\r\n                } else {\r\n                    new Handler(Looper.getMainLooper()).post(this::CANCELED);\r\n                }\r\n            }\r\n        }\r\n\r\n        private void CHECK_PURCHASE_TYPE(Purchase purchase) {\r\n            if (purchase.getProducts().get(0).equals(&quot;sku0&quot;)) {\r\n                ConsumeParams consumeParams = ConsumeParams.newBuilder().setPurchaseToken(purchase.getPurchaseToken()).build();\r\n                billingClient.consumeAsync(consumeParams, (billingResult, s) -&gt; {\r\n                    if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\r\n                        SAVE_PREF(purchase);\r\n                    }\r\n                });\r\n            } else if (purchase.getProducts().get(0).equals(&quot;sku1&quot;)) {\r\n                SAVE_PREF(purchase);\r\n            } else if (purchase.getProducts().get(0).equals(&quot;sku2&quot;)) {\r\n                SAVE_PREF(purchase);\r\n            }\r\n        }","title":"Android Billing : How to cancel Purchase if ConsumeParams failed","body":"<p>On an active and stable internet network, the purchasing process does not have any obstacles, but when a purchase is made on an unstable and super slow internet network (possibly disconnected, lost network or something else), sometimes users can't wait and cancel the purchase by close the application directly or by other means.</p>\n<p>I have 2 types of digital content for sale, the first is a one-time purchase and the second can be purchased multiple times.</p>\n<p>The problem is in the second type, when the purchase is successful but fails to consume, the end result is a one-time purchase and cannot be purchased again by the user.</p>\n<p>What I want to ask is how to cancel a purchase if ConsumeParams fails to consume the purchase? is that possible.</p>\n<pre><code>    @Override\n    public void onPurchasesUpdated(@NonNull BillingResult billingResult, @Nullable List&lt;Purchase&gt; list) {\n        if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; list != null) {\n            handlePurchases(list);\n        } else if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.ITEM_ALREADY_OWNED) {\n            new Handler(Looper.getMainLooper()).post(this::CANCELED);\n        } else if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.USER_CANCELED) {\n            new Handler(Looper.getMainLooper()).post(() -&gt; {\n                binding.PurchaseTxtMessage.setText(R.string.DPurchase_Canceled);\n                CANCELED();\n            });\n        } else {\n            new Handler(Looper.getMainLooper()).post(() -&gt; {\n                binding.PurchaseTxtMessage.setText(R.string.DPurchase_Canceled);\n                CANCELED();\n            });\n        }\n    }\n\n    private void handlePurchases(List&lt;Purchase&gt;  purchases) {\n        for(Purchase purchase:purchases) {\n            if (SKU.equals(purchase.getProducts().get(0)) &amp;&amp; purchase.getPurchaseState() == Purchase.PurchaseState.PURCHASED) {\n                if (!verifyValidSignature(purchase.getOriginalJson(), purchase.getSignature())) {\n                    new Handler(Looper.getMainLooper()).post(() -&gt; {\n                        binding.PurchaseTxtMessage.setText(R.string.DPurchase_Not_Valid);\n                        CANCELED();\n                    });\n                    return;\n                }\n                if (!purchase.isAcknowledged()) {\n                    AcknowledgePurchaseParams acknowledgePurchaseParams = AcknowledgePurchaseParams.newBuilder().setPurchaseToken(purchase.getPurchaseToken()).build();\n                    billingClient.acknowledgePurchase(acknowledgePurchaseParams, billingResult -&gt; {\n                        if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n                            //CHECK PURCHASE TYPE\n                            new Handler(Looper.getMainLooper()).post(() -&gt; CHECK_PURCHASE_TYPE(purchase));\n                        } else {\n                            new Handler(Looper.getMainLooper()).post(this::CANCELED);\n                        }\n                    });\n                } else {\n                    //CHECK PURCHASE TYPE\n                    new Handler(Looper.getMainLooper()).post(() -&gt; CHECK_PURCHASE_TYPE(purchase));\n                }\n            } else if(SKU.equals(purchase.getProducts().get(0)) &amp;&amp; purchase.getPurchaseState() == Purchase.PurchaseState.PENDING) {\n                new Handler(Looper.getMainLooper()).post(() -&gt; {\n                    binding.PurchaseTxtMessage.setText(R.string.DPurchase_Pending);\n                    CANCELED();\n                });\n            }  else if(SKU.equals(purchase.getProducts().get(0)) &amp;&amp; purchase.getPurchaseState() == Purchase.PurchaseState.UNSPECIFIED_STATE) {\n                new Handler(Looper.getMainLooper()).post(() -&gt; {\n                    binding.PurchaseTxtMessage.setText(R.string.DPurchase_Unknown);\n                    CANCELED();\n                });\n            } else {\n                new Handler(Looper.getMainLooper()).post(this::CANCELED);\n            }\n        }\n    }\n\n    private void CHECK_PURCHASE_TYPE(Purchase purchase) {\n        if (purchase.getProducts().get(0).equals(&quot;sku0&quot;)) {\n            ConsumeParams consumeParams = ConsumeParams.newBuilder().setPurchaseToken(purchase.getPurchaseToken()).build();\n            billingClient.consumeAsync(consumeParams, (billingResult, s) -&gt; {\n                if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n                    SAVE_PREF(purchase);\n                }\n            });\n        } else if (purchase.getProducts().get(0).equals(&quot;sku1&quot;)) {\n            SAVE_PREF(purchase);\n        } else if (purchase.getProducts().get(0).equals(&quot;sku2&quot;)) {\n            SAVE_PREF(purchase);\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","cors","api-gateway","spring-cloud-gateway"],"comments":[{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1700556858,"post_id":77521381,"comment_id":136666154,"body_markdown":"See this answer -&gt; https://stackoverflow.com/questions/22343384/the-access-control-allow-origin-header-contains-multiple-values","body":"See this answer -&gt; <a href=\"https://stackoverflow.com/questions/22343384/the-access-control-allow-origin-header-contains-multiple-values\" title=\"the access control allow origin header contains multiple values\">stackoverflow.com/questions/22343384/&hellip;</a>"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1700556946,"post_id":77521381,"comment_id":136666175,"body_markdown":"It&#39;s happening from your frontend application and not spring. You need to change code on the frontend side.","body":"It&#39;s happening from your frontend application and not spring. You need to change code on the frontend side."},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1700557586,"post_id":77521381,"comment_id":136666266,"body_markdown":"My guess is that your service that&#39;s behind the gateway is also configured with CORS and the `DedupeResponseHeader` isn&#39;t filtering the duplicates out properly. Can you show us the CORS headers from the perspective of the webbrowser?","body":"My guess is that your service that&#39;s behind the gateway is also configured with CORS and the <code>DedupeResponseHeader</code> isn&#39;t filtering the duplicates out properly. Can you show us the CORS headers from the perspective of the webbrowser?"},{"owner":{"account_id":25272815,"reputation":15,"user_id":19101918,"display_name":"Batool Ragayah"},"score":0,"creation_date":1700559102,"post_id":77521381,"comment_id":136666524,"body_markdown":"@AnishB. What do you think is the proper solution for my case","body":"@AnishB. What do you think is the proper solution for my case"},{"owner":{"account_id":25272815,"reputation":15,"user_id":19101918,"display_name":"Batool Ragayah"},"score":0,"creation_date":1700559118,"post_id":77521381,"comment_id":136666528,"body_markdown":"@AnishB. could you explain how?","body":"@AnishB. could you explain how?"},{"owner":{"account_id":25272815,"reputation":15,"user_id":19101918,"display_name":"Batool Ragayah"},"score":0,"creation_date":1700559978,"post_id":77521381,"comment_id":136666728,"body_markdown":"@g00glen00b you&#39;re right, the services behind the gateway are also configured with CORS.\n\nhere&#39;s the response headers on the console:\nAccess-Control-Allow-Credentials:\ntrue\n\nAccess-Control-Allow-Origin:\n*\n\nAccess-Control-Allow-Origin:\nhttp://localhost:3000","body":"@g00glen00b you&#39;re right, the services behind the gateway are also configured with CORS.  here&#39;s the response headers on the console: Access-Control-Allow-Credentials: true  Access-Control-Allow-Origin: *  Access-Control-Allow-Origin: <a href=\"http://localhost:3000\" rel=\"nofollow noreferrer\">localhost:3000</a>"},{"owner":{"account_id":25272815,"reputation":15,"user_id":19101918,"display_name":"Batool Ragayah"},"score":0,"creation_date":1700567566,"post_id":77521381,"comment_id":136668097,"body_markdown":"now the error has changed into:\n\nAccess To Fetch At &#39;https://gatway-api-ip-address:port/level/global&#39; From Origin &#39;http://Localhost:3000&#39; Has Been Blocked By CORS Policy: Response To Preflight Request Doesn&#39;t Pass Access Control Check: No &#39;Access-Control-Allow-Origin&#39; Header Is Present On The Requested Resource. If An Opaque Response Serves Your Needs, Set The Request&#39;s Mode To &#39;No-Cors&#39; To Fetch The Resource With CORS Disabled.\n\nbut i haven&#39;t changed anything in application.yml","body":"now the error has changed into:  Access To Fetch At &#39;<a href=\"https://gatway-api-ip-address:port/level/global\" rel=\"nofollow noreferrer\">gatway-api-ip-address:port/level/global</a>&#39; From Origin &#39;<a href=\"http://Localhost:3000\" rel=\"nofollow noreferrer\">Localhost:3000</a>&#39; Has Been Blocked By CORS Policy: Response To Preflight Request Doesn&#39;t Pass Access Control Check: No &#39;Access-Control-Allow-Origin&#39; Header Is Present On The Requested Resource. If An Opaque Response Serves Your Needs, Set The Request&#39;s Mode To &#39;No-Cors&#39; To Fetch The Resource With CORS Disabled.  but i haven&#39;t changed anything in application.yml"}],"owner":{"account_id":25272815,"reputation":15,"user_id":19101918,"display_name":"Batool Ragayah"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700555944,"creation_date":1700555944,"question_id":77521381,"body_markdown":"I have created a gateway API (spring boot) to route to a number of backend services (spring boot applications) for the frontend (Typescript), but I keep getting CORS error when the frontend tries to hit the Gateway API, even though it works fine on Postman.\r\n\r\nThis is the error i got on the console:\r\n\r\n\r\nAccess to fetch at &#39;https://gatway-api-ip-address:port/level/global&#39; from origin &#39;http://localhost:3000&#39; has been blocked by CORS policy: The &#39;Access-Control-Allow-Origin&#39; header contains multiple values &#39;http://localhost:3000, http://localhost:3000&#39;, but only one is allowed. Have the server send the header with a valid value, or, if an opaque response serves your needs, set the request&#39;s mode to &#39;no-cors&#39; to fetch the resource with CORS disabled.\r\n\r\n\r\nHere&#39;s what I have inside the Gateway API, application.yml:\r\n\r\n```spring:\r\n  cloud:\r\n    gateway:\r\n      default-filters:\r\n        - DedupeResponseHeader=Access-Control-Allow-Credentials Access-Control-Allow-Origin\r\n      globalcors:\r\n        corsConfigurations:\r\n          &#39;[/**]&#39;:\r\n            allowedOrigins:\r\n            - &quot;http://localhost:3000&quot;\r\n            - &quot;http://localhost:8000&quot;\r\n            - &quot;http://frontend-ip-address:port&quot;\r\n            allowCredentials: true\r\n            allowedMethods:\r\n              - GET\r\n              - POST\r\n              - DELETE\r\n              - GET\r\n              - OPTIONS\r\n            allowedHeaders: &quot;*&quot;\r\n```\r\n\r\nNote: that the IP address for each backend service, frontend service and gateway API is the same as they&#39;re hosted on one Digital Ocean server.\r\n\r\nNote: I have issued a self-signed ssl certificate for the gateway api","title":"Spring Gateway Request blocked by CORS (The &#39;Access-Control-Allow-Origin&#39; header contains multiple values, but only one is allowed)","body":"<p>I have created a gateway API (spring boot) to route to a number of backend services (spring boot applications) for the frontend (Typescript), but I keep getting CORS error when the frontend tries to hit the Gateway API, even though it works fine on Postman.</p>\n<p>This is the error i got on the console:</p>\n<p>Access to fetch at 'https://gatway-api-ip-address:port/level/global' from origin 'http://localhost:3000' has been blocked by CORS policy: The 'Access-Control-Allow-Origin' header contains multiple values 'http://localhost:3000, http://localhost:3000', but only one is allowed. Have the server send the header with a valid value, or, if an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.</p>\n<p>Here's what I have inside the Gateway API, application.yml:</p>\n<pre><code>  cloud:\n    gateway:\n      default-filters:\n        - DedupeResponseHeader=Access-Control-Allow-Credentials Access-Control-Allow-Origin\n      globalcors:\n        corsConfigurations:\n          '[/**]':\n            allowedOrigins:\n            - &quot;http://localhost:3000&quot;\n            - &quot;http://localhost:8000&quot;\n            - &quot;http://frontend-ip-address:port&quot;\n            allowCredentials: true\n            allowedMethods:\n              - GET\n              - POST\n              - DELETE\n              - GET\n              - OPTIONS\n            allowedHeaders: &quot;*&quot;\n</code></pre>\n<p>Note: that the IP address for each backend service, frontend service and gateway API is the same as they're hosted on one Digital Ocean server.</p>\n<p>Note: I have issued a self-signed ssl certificate for the gateway api</p>\n"},{"tags":["java","guava"],"comments":[{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1328015535,"post_id":9080034,"comment_id":11399656,"body_markdown":"In case you were thinking of serializing the whole cache, that won&#39;t work: &quot;The caches produced by CacheBuilder are serializable, and the deserialized caches retain all the configuration properties of the original cache. Note that the serialized form does not include cache contents, but only configuration.&quot; So you probably need to replace Guava Cache with a more complete cache implementation, as suggested by the wiki you quoted.","body":"In case you were thinking of serializing the whole cache, that won&#39;t work: &quot;The caches produced by CacheBuilder are serializable, and the deserialized caches retain all the configuration properties of the original cache. Note that the serialized form does not include cache contents, but only configuration.&quot; So you probably need to replace Guava Cache with a more complete cache implementation, as suggested by the wiki you quoted."},{"owner":{"account_id":1211884,"reputation":606,"user_id":1180279,"display_name":"Kuhpid"},"score":0,"creation_date":1328019925,"post_id":9080034,"comment_id":11401257,"body_markdown":"You are right with the keyword serializing, sorry I didn&#39;t used it directly.\n\nBut is there a way to get the expiring time information out of the Cache?","body":"You are right with the keyword serializing, sorry I didn&#39;t used it directly.  But is there a way to get the expiring time information out of the Cache?"}],"answers":[{"comments":[{"owner":{"account_id":1211884,"reputation":606,"user_id":1180279,"display_name":"Kuhpid"},"score":0,"creation_date":1328024777,"post_id":9081749,"comment_id":11403287,"body_markdown":"And obviously vice-versa for rebuild the cache. I have the possibility to change the design and switch to a directly persisted version. Too bad, guava cache looks otherwise really nice!","body":"And obviously vice-versa for rebuild the cache. I have the possibility to change the design and switch to a directly persisted version. Too bad, guava cache looks otherwise really nice!"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":3,"creation_date":1328026318,"post_id":9081749,"comment_id":11403887,"body_markdown":"We recommend very strongly against this approach, not least because it will break on new Guava versions.","body":"We recommend very strongly against this approach, not least because it will break on new Guava versions."},{"owner":{"account_id":20657,"reputation":8081,"user_id":49573,"accept_rate":78,"display_name":"maximdim"},"score":0,"creation_date":1328027377,"post_id":9081749,"comment_id":11404361,"body_markdown":"Absolutely agree, I said just that in original post :)","body":"Absolutely agree, I said just that in original post :)"}],"tags":[],"owner":{"account_id":20657,"reputation":8081,"user_id":49573,"accept_rate":78,"display_name":"maximdim"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700555906,"creation_date":1328022102,"answer_id":9081749,"question_id":9080034,"body_markdown":"Well, unfortunately Guava doesn&#39;t seem to expose this functionality but if you feel adventurous and absolutely must have this you could always use reflection. Just look at sources and see what methods do you need. As always care should be taken as your code might break when Guaval internal implementation changes. Code below seems to work with Guava 10.0.1:\r\n\r\n\r\n\t\tCache&lt;Integer, String&gt; cache = CacheBuilder.newBuilder().expireAfterWrite(7, TimeUnit.DAYS).build(new CacheLoader&lt;Integer, String&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic String load(Integer key) throws Exception {\r\n\t\t\t\treturn &quot;The value is &quot;+key.toString();\r\n\t\t\t}\r\n\t\t});\r\n\t\tInteger key_1 = Integer.valueOf(1);\r\n\t\tInteger key_2 = Integer.valueOf(2);\r\n\t\t\r\n\t\tSystem.out.println(cache.get(key_1));\r\n\t\tSystem.out.println(cache.get(key_2));\r\n\t\t\r\n\t\tConcurrentMap&lt;Integer, String&gt; map = cache.asMap();\r\n\t\t\r\n\t\tMethod m = map.getClass().getDeclaredMethod(&quot;getEntry&quot;, Object.class);\r\n\t\tm.setAccessible(true);\r\n\r\n\t\tfor(Integer key: map.keySet()) {\r\n\t\t\tObject value = m.invoke(map, key);\r\n\t\t\tMethod m2 = value.getClass().getDeclaredMethod(&quot;getExpirationTime&quot;, null);\r\n\t\t\tm2.setAccessible(true);\r\n\t\t\tLong expirationTime = (Long)m2.invoke(value, null);\r\n\t\t\tSystem.out.println(key+&quot; expiration time is &quot;+expirationTime);\r\n\t\t}\r\n","title":"Persist guava cache on shutdown","body":"<p>Well, unfortunately Guava doesn't seem to expose this functionality but if you feel adventurous and absolutely must have this you could always use reflection. Just look at sources and see what methods do you need. As always care should be taken as your code might break when Guaval internal implementation changes. Code below seems to work with Guava 10.0.1:</p>\n<pre><code>    Cache&lt;Integer, String&gt; cache = CacheBuilder.newBuilder().expireAfterWrite(7, TimeUnit.DAYS).build(new CacheLoader&lt;Integer, String&gt;() {\n        @Override\n        public String load(Integer key) throws Exception {\n            return &quot;The value is &quot;+key.toString();\n        }\n    });\n    Integer key_1 = Integer.valueOf(1);\n    Integer key_2 = Integer.valueOf(2);\n    \n    System.out.println(cache.get(key_1));\n    System.out.println(cache.get(key_2));\n    \n    ConcurrentMap&lt;Integer, String&gt; map = cache.asMap();\n    \n    Method m = map.getClass().getDeclaredMethod(&quot;getEntry&quot;, Object.class);\n    m.setAccessible(true);\n\n    for(Integer key: map.keySet()) {\n        Object value = m.invoke(map, key);\n        Method m2 = value.getClass().getDeclaredMethod(&quot;getExpirationTime&quot;, null);\n        m2.setAccessible(true);\n        Long expirationTime = (Long)m2.invoke(value, null);\n        System.out.println(key+&quot; expiration time is &quot;+expirationTime);\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1211884,"reputation":606,"user_id":1180279,"display_name":"Kuhpid"},"score":0,"creation_date":1328091912,"post_id":9083415,"comment_id":11421153,"body_markdown":"I didn&#39;t used the guava cache for performance reasons, but rather because it seemed to be a very simple solution for timeout objects. In the end there is missing a way to make the cache survive a application shutdown for any reasons. So in the end I now decided to directly persist the object with a timestamp and let a scheduled thread cleanup the timed out objects. Costs a lot more lines of code but fits my needs better. Thank you all so far.","body":"I didn&#39;t used the guava cache for performance reasons, but rather because it seemed to be a very simple solution for timeout objects. In the end there is missing a way to make the cache survive a application shutdown for any reasons. So in the end I now decided to directly persist the object with a timestamp and let a scheduled thread cleanup the timed out objects. Costs a lot more lines of code but fits my needs better. Thank you all so far."}],"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1328028374,"creation_date":1328028374,"answer_id":9083415,"question_id":9080034,"body_markdown":"I don&#39;t believe there&#39;s any way to recreate the cache with per-entry expiration values -- even if you do use reflection.  You might be able to simulate it by using a `DelayedQueue` in a separate thread that explicitly invalidates entries that should have expired, but that&#39;s the best I think you can do.\r\n\r\nThat said, if you&#39;re just interested in peeking at the expiration information, I would recommend wrapping your cache values in a class that remembers the expiration time, so you can look up the expiration time for an entry just by looking up its value and calling a `getExpirationTime()` method or what have you.\r\n\r\nThat approach, at least, should not break with new Guava releases.","title":"Persist guava cache on shutdown","body":"<p>I don't believe there's any way to recreate the cache with per-entry expiration values -- even if you do use reflection.  You might be able to simulate it by using a <code>DelayedQueue</code> in a separate thread that explicitly invalidates entries that should have expired, but that's the best I think you can do.</p>\n\n<p>That said, if you're just interested in peeking at the expiration information, I would recommend wrapping your cache values in a class that remembers the expiration time, so you can look up the expiration time for an entry just by looking up its value and calling a <code>getExpirationTime()</code> method or what have you.</p>\n\n<p>That approach, at least, should not break with new Guava releases.</p>\n"}],"owner":{"account_id":1211884,"reputation":606,"user_id":1180279,"display_name":"Kuhpid"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5096,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":9083415,"answer_count":2,"score":1,"last_activity_date":1700555906,"creation_date":1328015205,"question_id":9080034,"body_markdown":"I use the following guava cache to store messages for a specific time waiting for a possible response. So I use the cache more like a timeout for messages:\r\n\r\n    Cache cache = CacheBuilder.newBuilder().expireAfterWrite(7, TimeUnit.DAYS).build();\r\n    cache.put(id,message);\r\n    ...\r\n    cache.getIfPresent(id);\r\n\r\nIn the end I need to persist the messages with its currently &#39;timeout&#39; information on shutdown\r\nand restore it on startup with the internal already expired times per entry. I couldn&#39;t find any methods which give me access to the time information, so I can handle it by myself.\r\n\r\nThe [gauva wiki][1] says:\r\n\r\n&gt;Your application will not need to store more data than what would fit in RAM. (Guava caches are local to a single run of your application. They do not store data in files, or on outside servers. If this does not fit your needs, consider a tool like Memcached.)\r\n\r\nDo you think this restriction address also a &#39;timeout&#39; map to persist on shutdown?\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/wiki/CachesExplained","title":"Persist guava cache on shutdown","body":"<p>I use the following guava cache to store messages for a specific time waiting for a possible response. So I use the cache more like a timeout for messages:</p>\n\n<pre><code>Cache cache = CacheBuilder.newBuilder().expireAfterWrite(7, TimeUnit.DAYS).build();\ncache.put(id,message);\n...\ncache.getIfPresent(id);\n</code></pre>\n\n<p>In the end I need to persist the messages with its currently 'timeout' information on shutdown\nand restore it on startup with the internal already expired times per entry. I couldn't find any methods which give me access to the time information, so I can handle it by myself.</p>\n\n<p>The <a href=\"http://code.google.com/p/guava-libraries/wiki/CachesExplained\" rel=\"nofollow\">gauva wiki</a> says:</p>\n\n<blockquote>\n  <p>Your application will not need to store more data than what would fit in RAM. (Guava caches are local to a single run of your application. They do not store data in files, or on outside servers. If this does not fit your needs, consider a tool like Memcached.)</p>\n</blockquote>\n\n<p>Do you think this restriction address also a 'timeout' map to persist on shutdown?</p>\n"},{"tags":["java","derby"],"answers":[{"tags":[],"owner":{"account_id":21083132,"reputation":3240,"user_id":15496965,"display_name":"Henning"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662398119,"creation_date":1662398119,"answer_id":73612764,"question_id":73492197,"body_markdown":"Are you trying to upgrade Derby from 10.8.x.x to 10.15.x.x or higher?\r\n\r\nIn that case you need to additionally add the artifact `derbytools` to the artifacts `derby` and `derbyshared` that you probably already have on the classpath.\r\n\r\nWith release 10.15.1.3, Derby has been modularized and the classes have been rearranged a bit. `EmbeddedDataSource` is now in `derbytools.jar`: https://db.apache.org/derby/releases/release-10.15.1.3.html","title":"Apache Derby EmbeddedDataSource no longer available","body":"<p>Are you trying to upgrade Derby from 10.8.x.x to 10.15.x.x or higher?</p>\n<p>In that case you need to additionally add the artifact <code>derbytools</code> to the artifacts <code>derby</code> and <code>derbyshared</code> that you probably already have on the classpath.</p>\n<p>With release 10.15.1.3, Derby has been modularized and the classes have been rearranged a bit. <code>EmbeddedDataSource</code> is now in <code>derbytools.jar</code>: <a href=\"https://db.apache.org/derby/releases/release-10.15.1.3.html\" rel=\"nofollow noreferrer\">https://db.apache.org/derby/releases/release-10.15.1.3.html</a></p>\n"},{"tags":[],"owner":{"account_id":8781304,"reputation":1,"user_id":6564846,"display_name":"Raghvendra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700555420,"creation_date":1700555420,"answer_id":77521331,"question_id":73492197,"body_markdown":"EmbeddedDataSource is not supported with 10.15.x version. One might be using Derby version 10.14.x. If someone is working with Derby version 10.15.x or 10.16.x, they will no longer be able to use EmbeddedDataSource until and unless they do not add derbytools.jar in their POM file. \r\n\r\nWith the new Derby version upgrade (10.15.x and 10.16.x), a new jar file (derbyshared.jar) has been added. All Derby configurations require it. In addition, the derbytools.jar library is now required when running the network server, when using Derby DataSources, and when directly referencing the JDBC drivers. Below dependency is to be added additionally in POM-\r\n\r\ngroupId: org.apache.derby\r\nartifactId: derbytools\r\n\r\nReference: https://db.apache.org/derby/releases/release-10.15.1.3.html ","title":"Apache Derby EmbeddedDataSource no longer available","body":"<p>EmbeddedDataSource is not supported with 10.15.x version. One might be using Derby version 10.14.x. If someone is working with Derby version 10.15.x or 10.16.x, they will no longer be able to use EmbeddedDataSource until and unless they do not add derbytools.jar in their POM file.</p>\n<p>With the new Derby version upgrade (10.15.x and 10.16.x), a new jar file (derbyshared.jar) has been added. All Derby configurations require it. In addition, the derbytools.jar library is now required when running the network server, when using Derby DataSources, and when directly referencing the JDBC drivers. Below dependency is to be added additionally in POM-</p>\n<p>groupId: org.apache.derby\nartifactId: derbytools</p>\n<p>Reference: <a href=\"https://db.apache.org/derby/releases/release-10.15.1.3.html\" rel=\"nofollow noreferrer\">https://db.apache.org/derby/releases/release-10.15.1.3.html</a></p>\n"}],"owner":{"account_id":8922233,"reputation":475,"user_id":6658290,"accept_rate":78,"display_name":"Polyphase29"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1700555420,"creation_date":1661452130,"question_id":73492197,"body_markdown":"I was using a 10.8.x.x version of Apache Derby and utilizing the EmbeddedDataSource class. I can&#39;t seem to find a non interface replacement. I was able to find the classes located in org.apache.derby.iapi.jdbc. which contains an EmbeddeDataSource interface, but no actual implementation of the class. Was this moved somewhere or is there an alternative class I can use? I haven&#39;t been able to find anything. Thanks!","title":"Apache Derby EmbeddedDataSource no longer available","body":"<p>I was using a 10.8.x.x version of Apache Derby and utilizing the EmbeddedDataSource class. I can't seem to find a non interface replacement. I was able to find the classes located in org.apache.derby.iapi.jdbc. which contains an EmbeddeDataSource interface, but no actual implementation of the class. Was this moved somewhere or is there an alternative class I can use? I haven't been able to find anything. Thanks!</p>\n"},{"tags":["java","spring","spring-boot","maven","spring-data-jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1700549600,"post_id":77519911,"comment_id":136665037,"body_markdown":"Looking at your config it looks like there is a trailing space after the `com.mysql.cj.jdbc.Driver` name. Make sure there isn&#39;t. Or you could just remove the `spring.datasource.driver-class-name` as Spring will automatically detect the proper driver based on the URL.","body":"Looking at your config it looks like there is a trailing space after the <code>com.mysql.cj.jdbc.Driver</code> name. Make sure there isn&#39;t. Or you could just remove the <code>spring.datasource.driver-class-name</code> as Spring will automatically detect the proper driver based on the URL."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1700556440,"post_id":77519911,"comment_id":136666076,"body_markdown":"Try without `runtime `scope for mysql dependency.","body":"Try without <code>runtime </code>scope for mysql dependency."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1700556512,"post_id":77519911,"comment_id":136666085,"body_markdown":"I agree with @M.Deinum completely. You don&#39;t need to add driver-class-name explicitly. Spring is smart enough to detect the driver class by looking at the jar and url.","body":"I agree with @M.Deinum completely. You don&#39;t need to add driver-class-name explicitly. Spring is smart enough to detect the driver class by looking at the jar and url."},{"owner":{"account_id":15259656,"reputation":3,"user_id":11010160,"display_name":"Kelths"},"score":0,"creation_date":1700601984,"post_id":77519911,"comment_id":136674399,"body_markdown":"Thanks to @M.Deinum and Troley. It was the freaking trailing space.","body":"Thanks to @M.Deinum and Troley. It was the freaking trailing space."}],"answers":[{"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1700549539,"post_id":77520497,"comment_id":136665030,"body_markdown":"The driver is already in the `pom.xml` if you look properly.","body":"The driver is already in the <code>pom.xml</code> if you look properly."}],"tags":[],"owner":{"account_id":448639,"reputation":504,"user_id":2992066,"accept_rate":67,"display_name":"cJ_"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1700544655,"creation_date":1700544655,"answer_id":77520497,"question_id":77519911,"body_markdown":"You only added JPA dependency. You need to also add sql driver dependency.\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n      &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n      &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"Spring boot - Cannot load driver class: com.mysql.cj.jdbc.Driver","body":"<p>You only added JPA dependency. You need to also add sql driver dependency.</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n  &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n  &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10595514,"reputation":1478,"user_id":7804385,"display_name":"Troley"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700555114,"creation_date":1700555114,"answer_id":77521299,"question_id":77519911,"body_markdown":"As @M. Deinum specified in the comment, you have an extra trailing space in the driver setup property line.\r\n\r\nSo try changing:\r\n```spring.datasource.driver-class-name: com.mysql.cj.jdbc.Driver ```\r\n\r\nTo this:\r\n```spring.datasource.driver-class-name: com.mysql.cj.jdbc.Driver```\r\n\r\nAnd it should work.","title":"Spring boot - Cannot load driver class: com.mysql.cj.jdbc.Driver","body":"<p>As @M. Deinum specified in the comment, you have an extra trailing space in the driver setup property line.</p>\n<p>So try changing:\n<code>spring.datasource.driver-class-name: com.mysql.cj.jdbc.Driver </code></p>\n<p>To this:\n<code>spring.datasource.driver-class-name: com.mysql.cj.jdbc.Driver</code></p>\n<p>And it should work.</p>\n"}],"owner":{"account_id":15259656,"reputation":3,"user_id":11010160,"display_name":"Kelths"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77521299,"answer_count":2,"score":0,"last_activity_date":1700555114,"creation_date":1700532544,"question_id":77519911,"body_markdown":"I&#39;m trying to learn Spring, I&#39;m building a project using Netbeans, I used Srping Initializr to get all files ready but when I try to run the project I get this error &#39;Cannot load driver class: com.mysql.cj.jdbc.Driver &#39; Event though the driver is set up, I have the dependencies on the POM file as well as the project&#39;s properties, can you please take a look? \r\n\r\nThis is the error message: \r\n\r\n```\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2023-11-20 20:58:28.978 ERROR 10340 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method &#39;dataSourceScriptDatabaseInitializer&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is java.lang.IllegalStateException: Cannot load driver class: com.mysql.cj.jdbc.Driver \r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:536) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1160) ~[spring-context-5.3.30.jar:5.3.30]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:911) ~[spring-context-5.3.30.jar:5.3.30]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.30.jar:5.3.30]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.17.jar:2.7.17]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732) [spring-boot-2.7.17.jar:2.7.17]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:409) [spring-boot-2.7.17.jar:2.7.17]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) [spring-boot-2.7.17.jar:2.7.17]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1300) [spring-boot-2.7.17.jar:2.7.17]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1289) [spring-boot-2.7.17.jar:2.7.17]\r\n\tat com.egg.biblioteca.BibliotecaApplication.main(BibliotecaApplication.java:10) [classes/:na]\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is java.lang.IllegalStateException: Cannot load driver class: com.mysql.cj.jdbc.Driver \r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:633) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:911) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\t... 21 common frames omitted\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is java.lang.IllegalStateException: Cannot load driver class: com.mysql.cj.jdbc.Driver \r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648) ~[spring-beans-5.3.30.jar:5.3.30]\r\n\t... 35 common frames omitted\r\nCaused by: java.lang.IllegalStateException: Cannot load driver class: com.mysql.cj.jdbc.Driver \r\n\tat org.springframework.util.Assert.state(Assert.java:97) ~[spring-core-5.3.30.jar:5.3.30]\r\n\tat org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:175) ~[spring-boot-autoconfigure-2.7.17.jar:2.7.17]\r\n\tat org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.initializeDataSourceBuilder(DataSourceProperties.java:125) ~[spring-boot-autoconfigure-2.7.17.jar:2.7.17]\r\n\tat org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:48) ~[spring-boot-autoconfigure-2.7.17.jar:2.7.17]\r\n\tat org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:90) ~[spring-boot-autoconfigure-2.7.17.jar:2.7.17]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_111]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_111]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_111]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_111]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.30.jar:5.3.30]\r\n36 common frames omitted\r\n```\r\nThis is the POM file \r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.17&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.egg&lt;/groupId&gt;\r\n    &lt;artifactId&gt;biblioteca&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;biblioteca&lt;/name&gt;\r\n    &lt;description&gt;Proyecto de biblioteca Egg&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n                \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;image&gt;\r\n                        &lt;builder&gt;paketobuildpacks/builder-jammy-base:latest&lt;/builder&gt;\r\n                    &lt;/image&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nAnd these are the properties: \r\n\r\n\r\n```\r\nspring.datasource.url: jdbc:mysql://localhost:3306/DATABASE?allowPublicKeyRetrieval=true&amp;useSSL=false&amp;use\r\nTimezone=true&amp;serverTimezone=GMT&amp;characterEncoding=UTF-8\r\nspring.datasource.username: root\r\nspring.datasource.password: root\r\nspring.datasource.driver-class-name: com.mysql.cj.jdbc.Driver \r\nspring.jpa.show-sql: true\r\nspring.jpa.hibernate.ddl-auto: update\r\nspring.jpa.properties.hibernate.dialect: org.hibernate.dialect.MySQL5InnoDBDialect\r\nspring.thymeleaf.cache: false\r\n\r\n```\r\n\r\n\r\n\r\nI tried changing the version of the Mysql driver on the dependencies inside the pom.xml but doesn&#39;t seem to work. I&#39;ve reviewed the driver version and everything seems to be working ok. \r\n\r\nI&#39;m running springboot version 2.7.17, Java version 8 and the current Mysql driver is 8.0.33.","title":"Spring boot - Cannot load driver class: com.mysql.cj.jdbc.Driver","body":"<p>I'm trying to learn Spring, I'm building a project using Netbeans, I used Srping Initializr to get all files ready but when I try to run the project I get this error 'Cannot load driver class: com.mysql.cj.jdbc.Driver ' Event though the driver is set up, I have the dependencies on the POM file as well as the project's properties, can you please take a look?</p>\n<p>This is the error message:</p>\n<pre><code>Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2023-11-20 20:58:28.978 ERROR 10340 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is java.lang.IllegalStateException: Cannot load driver class: com.mysql.cj.jdbc.Driver \n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:801) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:536) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1160) ~[spring-context-5.3.30.jar:5.3.30]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:911) ~[spring-context-5.3.30.jar:5.3.30]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.30.jar:5.3.30]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.17.jar:2.7.17]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732) [spring-boot-2.7.17.jar:2.7.17]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:409) [spring-boot-2.7.17.jar:2.7.17]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) [spring-boot-2.7.17.jar:2.7.17]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1300) [spring-boot-2.7.17.jar:2.7.17]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1289) [spring-boot-2.7.17.jar:2.7.17]\n    at com.egg.biblioteca.BibliotecaApplication.main(BibliotecaApplication.java:10) [classes/:na]\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is java.lang.IllegalStateException: Cannot load driver class: com.mysql.cj.jdbc.Driver \n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:633) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:911) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:788) ~[spring-beans-5.3.30.jar:5.3.30]\n    ... 21 common frames omitted\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is java.lang.IllegalStateException: Cannot load driver class: com.mysql.cj.jdbc.Driver \n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.30.jar:5.3.30]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648) ~[spring-beans-5.3.30.jar:5.3.30]\n    ... 35 common frames omitted\nCaused by: java.lang.IllegalStateException: Cannot load driver class: com.mysql.cj.jdbc.Driver \n    at org.springframework.util.Assert.state(Assert.java:97) ~[spring-core-5.3.30.jar:5.3.30]\n    at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:175) ~[spring-boot-autoconfigure-2.7.17.jar:2.7.17]\n    at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.initializeDataSourceBuilder(DataSourceProperties.java:125) ~[spring-boot-autoconfigure-2.7.17.jar:2.7.17]\n    at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:48) ~[spring-boot-autoconfigure-2.7.17.jar:2.7.17]\n    at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:90) ~[spring-boot-autoconfigure-2.7.17.jar:2.7.17]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_111]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_111]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_111]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_111]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.30.jar:5.3.30]\n36 common frames omitted\n</code></pre>\n<p>This is the POM file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.17&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.egg&lt;/groupId&gt;\n    &lt;artifactId&gt;biblioteca&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;biblioteca&lt;/name&gt;\n    &lt;description&gt;Proyecto de biblioteca Egg&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n                \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;image&gt;\n                        &lt;builder&gt;paketobuildpacks/builder-jammy-base:latest&lt;/builder&gt;\n                    &lt;/image&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>And these are the properties:</p>\n<pre><code>spring.datasource.url: jdbc:mysql://localhost:3306/DATABASE?allowPublicKeyRetrieval=true&amp;useSSL=false&amp;use\nTimezone=true&amp;serverTimezone=GMT&amp;characterEncoding=UTF-8\nspring.datasource.username: root\nspring.datasource.password: root\nspring.datasource.driver-class-name: com.mysql.cj.jdbc.Driver \nspring.jpa.show-sql: true\nspring.jpa.hibernate.ddl-auto: update\nspring.jpa.properties.hibernate.dialect: org.hibernate.dialect.MySQL5InnoDBDialect\nspring.thymeleaf.cache: false\n\n</code></pre>\n<p>I tried changing the version of the Mysql driver on the dependencies inside the pom.xml but doesn't seem to work. I've reviewed the driver version and everything seems to be working ok.</p>\n<p>I'm running springboot version 2.7.17, Java version 8 and the current Mysql driver is 8.0.33.</p>\n"},{"tags":["java","mysql"],"comments":[{"owner":{"account_id":6740011,"reputation":46648,"user_id":5193536,"display_name":"nbk"},"score":1,"creation_date":1700555272,"post_id":77521295,"comment_id":136665881,"body_markdown":"the deadlock would occur if thesame rows are updated, or you made a table lock","body":"the deadlock would occur if thesame rows are updated, or you made a table lock"},{"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"score":0,"creation_date":1700555658,"post_id":77521295,"comment_id":136665944,"body_markdown":"Do you have one (java) server on which all code runs? Or do you have multiple replicas?","body":"Do you have one (java) server on which all code runs? Or do you have multiple replicas?"},{"owner":{"account_id":22769173,"reputation":73,"user_id":16926827,"display_name":"Lara"},"score":0,"creation_date":1700555986,"post_id":77521295,"comment_id":136665999,"body_markdown":"It is running on one server","body":"It is running on one server"},{"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"score":0,"creation_date":1700556453,"post_id":77521295,"comment_id":136666080,"body_markdown":"In tranitional RDBMS, like MySQL, there is the concept of Isolation Levels (https://dev.mysql.com/doc/refman/8.0/en/set-transaction.html) to avoid lock contention.  This would allow each thread in java to access the database with different Isolation levels (albeit this is harder to program).\n\nAlternatively since you have just 1 java application you have the option to managing the locking control in java code to avoid a deadlock.\n\nIs the userid table you talk about the central problem that is locked for long periods? ... I need to know more about the situation to go further on this.","body":"In tranitional RDBMS, like MySQL, there is the concept of Isolation Levels (<a href=\"https://dev.mysql.com/doc/refman/8.0/en/set-transaction.html\" rel=\"nofollow noreferrer\">dev.mysql.com/doc/refman/8.0/en/set-transaction.html</a>) to avoid lock contention.  This would allow each thread in java to access the database with different Isolation levels (albeit this is harder to program).  Alternatively since you have just 1 java application you have the option to managing the locking control in java code to avoid a deadlock.  Is the userid table you talk about the central problem that is locked for long periods? ... I need to know more about the situation to go further on this."},{"owner":{"account_id":7035840,"reputation":33810,"user_id":5389997,"display_name":"Shadow"},"score":1,"creation_date":1700557715,"post_id":77521295,"comment_id":136666282,"body_markdown":"Locking rows or even a table does not result in deadlock. Deadlock occurs if different transactions lock tables or rows that another transaction needs, which in turn locks tables or rows the first one needs, therefore neither can progress. The situation you describe seems to give raise to lock timeout issues -a transaction has to wait too long to obtain a lock. You have to modify your code to lock as few resources as possible at any given point in time: do not lock tables, just rows, commit as early as possible, use indexes for locking reads and updates and perhaps lock them in a certain order","body":"Locking rows or even a table does not result in deadlock. Deadlock occurs if different transactions lock tables or rows that another transaction needs, which in turn locks tables or rows the first one needs, therefore neither can progress. The situation you describe seems to give raise to lock timeout issues -a transaction has to wait too long to obtain a lock. You have to modify your code to lock as few resources as possible at any given point in time: do not lock tables, just rows, commit as early as possible, use indexes for locking reads and updates and perhaps lock them in a certain order"},{"owner":{"account_id":22769173,"reputation":73,"user_id":16926827,"display_name":"Lara"},"score":0,"creation_date":1700557925,"post_id":77521295,"comment_id":136666318,"body_markdown":"Its likely that I found the issue: Multiple threads are accessing the same row. I.e. the user can change the username and there is a thread that updates this username. Another thread is updating whether or not the user is allowed to join. Both use the same transaction and if the Transaction is commited it commits the whole thing. Since its not commited the table is hold in lock mode for this long. There is another application that now also updates this row when the user goes online. This might be the result of the deadlock.","body":"Its likely that I found the issue: Multiple threads are accessing the same row. I.e. the user can change the username and there is a thread that updates this username. Another thread is updating whether or not the user is allowed to join. Both use the same transaction and if the Transaction is commited it commits the whole thing. Since its not commited the table is hold in lock mode for this long. There is another application that now also updates this row when the user goes online. This might be the result of the deadlock."}],"owner":{"account_id":22769173,"reputation":73,"user_id":16926827,"display_name":"Lara"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700555063,"creation_date":1700555063,"question_id":77521295,"body_markdown":"I have written a program that is running on a server that updates certain informations all the time. Most of the time this is data from external apis. There are no events that I could call. Therefore I have to do this periodically. Here is a pseudocode for this:\r\n\r\n```\r\nboolean taskStarted = false;\r\n\r\nmain() {\r\n  time.schedule(createCustomTask(() -&gt; {\r\n    if (taskStarted) return;\r\n    taskStarted = true;\r\n    // UPDATE ALL DATA\r\n    taskStarted = false;\r\n  }), 0, 5_000L);\r\n}\r\n\r\ncreateCustomTask(Runnable r) {\r\n  return new TimerTask() {\r\n    @Override public void run() {\r\n      if (LocalDateTime.NOW.getSeconds() &lt; 5)\r\n        runnable.run(); \r\n    }\r\n  };\r\n}\r\n```\r\n\r\nI try to request and update the data at the beginning of every minute. This will only be done if the previous loop is completed.\r\n\r\nNow this look good but the problem is that this will result in a deadlock if the same table is used by another program or another transaction that tries to access the same table/data at the same time. Usually this is not an issue because you access the table, update it, close the transaction and the table is no longer locked. However in this case this code causes to hold the table in &quot;lock-mode&quot; almost all the time.\r\n\r\n### Why is this a problem?\r\n\r\n| userid | allowed |\r\n| --- | --- |\r\n| 4b216de4-b6c6-4ef8-ae34-9395508cd49a | 1 |\r\n| e57cb337-d2a3-4a15-878d-9c3da756a4b1 | 0 |\r\n\r\nLets say we have a table with all userids and if they are allowed to connect to a specific server. Now someone wants to join this server. We have to check if his userid is registered in the database, if not we will insert this userid in the database with an allowed-value of 0 (false). If the user is registered and allowed is 1 (true) this user will be able to connect. We do not want the user to wait minutes until the lock is removed. We want to access/update the data immediately.\r\n\r\nA solution would be to store all user data in the local storage and update it every few minutes and use this as a backup if a deadlock occurs. But this is not a great solution. Is there any workaround to avoid this?\r\n\r\nWhen I access the database I expect to access this database but its in lock mode way to long.","title":"How to avoid a MySQL deadlock?","body":"<p>I have written a program that is running on a server that updates certain informations all the time. Most of the time this is data from external apis. There are no events that I could call. Therefore I have to do this periodically. Here is a pseudocode for this:</p>\n<pre><code>boolean taskStarted = false;\n\nmain() {\n  time.schedule(createCustomTask(() -&gt; {\n    if (taskStarted) return;\n    taskStarted = true;\n    // UPDATE ALL DATA\n    taskStarted = false;\n  }), 0, 5_000L);\n}\n\ncreateCustomTask(Runnable r) {\n  return new TimerTask() {\n    @Override public void run() {\n      if (LocalDateTime.NOW.getSeconds() &lt; 5)\n        runnable.run(); \n    }\n  };\n}\n</code></pre>\n<p>I try to request and update the data at the beginning of every minute. This will only be done if the previous loop is completed.</p>\n<p>Now this look good but the problem is that this will result in a deadlock if the same table is used by another program or another transaction that tries to access the same table/data at the same time. Usually this is not an issue because you access the table, update it, close the transaction and the table is no longer locked. However in this case this code causes to hold the table in &quot;lock-mode&quot; almost all the time.</p>\n<h3>Why is this a problem?</h3>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>userid</th>\n<th>allowed</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>4b216de4-b6c6-4ef8-ae34-9395508cd49a</td>\n<td>1</td>\n</tr>\n<tr>\n<td>e57cb337-d2a3-4a15-878d-9c3da756a4b1</td>\n<td>0</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Lets say we have a table with all userids and if they are allowed to connect to a specific server. Now someone wants to join this server. We have to check if his userid is registered in the database, if not we will insert this userid in the database with an allowed-value of 0 (false). If the user is registered and allowed is 1 (true) this user will be able to connect. We do not want the user to wait minutes until the lock is removed. We want to access/update the data immediately.</p>\n<p>A solution would be to store all user data in the local storage and update it every few minutes and use this as a backup if a deadlock occurs. But this is not a great solution. Is there any workaround to avoid this?</p>\n<p>When I access the database I expect to access this database but its in lock mode way to long.</p>\n"},{"tags":["java","spring-boot","microservices","insomnia"],"comments":[{"owner":{"account_id":6126609,"reputation":1245,"user_id":4778343,"display_name":"Stefan Golubovi"},"score":1,"creation_date":1700554225,"post_id":77521182,"comment_id":136665730,"body_markdown":"error message is self-explanatory - https://stackoverflow.com/help/how-to-ask","body":"error message is self-explanatory - <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}],"owner":{"account_id":29955376,"reputation":1,"user_id":22956385,"display_name":"Let&#39;s Go"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":0,"score":-3,"last_activity_date":1700554201,"creation_date":1700553912,"question_id":77521182,"body_markdown":"\r\n\r\nI am trying to fetch data from RATINGS_SERVICE using USER_SERVICE but I get this type of error.i am trying to solve this problem but i am stuck.\r\n\r\n\r\njava.lang.IllegalStateException: Request URI does not contain a valid hostname: http://RATINGS_SERVICE/ratings/user/0692cae3-b791-4e21-a6ea-fee21a427ada\r\n\tat org.springframework.util.Assert.state(Assert.java:76) ~[spring-core-5.3.23.jar:5.3.23]\r\n\tat org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor.intercept(LoadBalancerInterceptor.java:55) ~[spring-cloud-commons-3.1.7.jar:3.1.7]\r\n\tat org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:93) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:77) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:334) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat com.microservice.user.userservice.service.UserServiceIMPL.getUser(UserServiceIMPL.java:45) ~[classes/:na]\r\n\tat com.microservice.user.userservice.controller.UserController.getById(UserController.java:51) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:670) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:779) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]","title":"When I execute the search java API(http://localhost:8081/user/user/0692cae3-b791-4e21-a6ea-fee21a427ada) using insomnia, I face the following error","body":"<p>I am trying to fetch data from RATINGS_SERVICE using USER_SERVICE but I get this type of error.i am trying to solve this problem but i am stuck.</p>\n<p>java.lang.IllegalStateException: Request URI does not contain a valid hostname: http://RATINGS_SERVICE/ratings/user/0692cae3-b791-4e21-a6ea-fee21a427ada\nat org.springframework.util.Assert.state(Assert.java:76) ~[spring-core-5.3.23.jar:5.3.23]\nat org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor.intercept(LoadBalancerInterceptor.java:55) ~[spring-cloud-commons-3.1.7.jar:3.1.7]\nat org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:93) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:77) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:334) ~[spring-web-5.3.23.jar:5.3.23]\nat com.microservice.user.userservice.service.UserServiceIMPL.getUser(UserServiceIMPL.java:45) ~[classes/:na]\nat com.microservice.user.userservice.controller.UserController.getById(UserController.java:51) ~[classes/:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\nat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:670) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:779) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]</p>\n"},{"tags":["java","owasp-dependency-track"],"owner":{"account_id":29955422,"reputation":1,"user_id":22956421,"display_name":"Rounak Dhadiwal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700553961,"creation_date":1700553961,"question_id":77521188,"body_markdown":"recently my H2 database of around 24 GB got corrupted. To recover the data i tried using command \r\n```\r\njava -cp h2*.jar org.h2.tools.Recover\r\n```\r\nafter that a txt file was generated of almost around 9GB. \r\n\r\nNow again to convert the txt file to DB file i used the command \r\n```\r\njava -Xmx24G -cp h2*.jar org.h2.tools.RunScript -url jdbc:h2:~/Desktop/db -user sa -script db.txt\r\n```\r\nBut I&#39;m getting following error \r\n\r\n\r\n```\r\nException in thread &quot;main&quot; org.h2.message.DbException: IO Exception: &quot;java.io.IOException: Error in parsing script, statement size exceeds 1G, first 80 characters of statement looks like: File E:/dbfile/db.mv.db, 25048920064 bytes, 23888 MB000000000 fileHeader H:2,bl&quot; [90028-200]\r\n        at org.h2.message.DbException.get(DbException.java:194)\r\n        at org.h2.message.DbException.convertIOException(DbException.java:392)\r\n        at org.h2.util.ScriptReader.readStatement(ScriptReader.java:101)\r\n        at org.h2.tools.RunScript.process(RunScript.java:203)\r\n        at org.h2.tools.RunScript.process(RunScript.java:192)\r\n        at org.h2.tools.RunScript.process(RunScript.java:328)\r\n        at org.h2.tools.RunScript.runTool(RunScript.java:143)\r\n        at org.h2.tools.RunScript.main(RunScript.java:70)\r\n```\r\n\r\n\r\nHow do i solve the issue","title":"org.h2.message.DbException: IO Exception: &quot;java.io.IOException: Error in parsing script, statement size exceeds 1G,","body":"<p>recently my H2 database of around 24 GB got corrupted. To recover the data i tried using command</p>\n<pre><code>java -cp h2*.jar org.h2.tools.Recover\n</code></pre>\n<p>after that a txt file was generated of almost around 9GB.</p>\n<p>Now again to convert the txt file to DB file i used the command</p>\n<pre><code>java -Xmx24G -cp h2*.jar org.h2.tools.RunScript -url jdbc:h2:~/Desktop/db -user sa -script db.txt\n</code></pre>\n<p>But I'm getting following error</p>\n<pre><code>Exception in thread &quot;main&quot; org.h2.message.DbException: IO Exception: &quot;java.io.IOException: Error in parsing script, statement size exceeds 1G, first 80 characters of statement looks like: File E:/dbfile/db.mv.db, 25048920064 bytes, 23888 MB000000000 fileHeader H:2,bl&quot; [90028-200]\n        at org.h2.message.DbException.get(DbException.java:194)\n        at org.h2.message.DbException.convertIOException(DbException.java:392)\n        at org.h2.util.ScriptReader.readStatement(ScriptReader.java:101)\n        at org.h2.tools.RunScript.process(RunScript.java:203)\n        at org.h2.tools.RunScript.process(RunScript.java:192)\n        at org.h2.tools.RunScript.process(RunScript.java:328)\n        at org.h2.tools.RunScript.runTool(RunScript.java:143)\n        at org.h2.tools.RunScript.main(RunScript.java:70)\n</code></pre>\n<p>How do i solve the issue</p>\n"},{"tags":["java","logback","jcifs"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1700553671,"post_id":77521134,"comment_id":136665648,"body_markdown":"What do you mean by &quot;logging with a different user&quot;?","body":"What do you mean by &quot;logging with a different user&quot;?"},{"owner":{"account_id":6396922,"reputation":11,"user_id":4960967,"display_name":"zakimatyi"},"score":0,"creation_date":1700644293,"post_id":77521134,"comment_id":136678760,"body_markdown":"As I was asking in the question: a different user (authenticated by username/pass with jcifs) than the app starting user. This means that when I start the java app using user A, but the log dir has write permission only for user B.","body":"As I was asking in the question: a different user (authenticated by username/pass with jcifs) than the app starting user. This means that when I start the java app using user A, but the log dir has write permission only for user B."}],"owner":{"account_id":6396922,"reputation":11,"user_id":4960967,"display_name":"zakimatyi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700553408,"creation_date":1700553408,"question_id":77521134,"body_markdown":"Is there any logback extension or module or any way that supports logging with a different user than the  app starting user?\r\nI am using basic spring-boot java app on windows. No web.\r\n\r\nI&#39;ve tried to override logback inner classes, but it&#39;s a bit way too complicated, because itt needs a couple of java classes to be overidden.","title":"Is there a way to log with logback in a basic spring-boot java app using another user maybe with jcifs?","body":"<p>Is there any logback extension or module or any way that supports logging with a different user than the  app starting user?\nI am using basic spring-boot java app on windows. No web.</p>\n<p>I've tried to override logback inner classes, but it's a bit way too complicated, because itt needs a couple of java classes to be overidden.</p>\n"},{"tags":["java","elasticsearch","search"],"comments":[{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1700550730,"post_id":77520806,"comment_id":136665203,"body_markdown":"You should provide some more context and maybe some examples that demonstrate what you&#39;re looking for.","body":"You should provide some more context and maybe some examples that demonstrate what you&#39;re looking for."},{"owner":{"account_id":7718592,"reputation":119,"user_id":5845487,"display_name":"Hassan Golshani"},"score":0,"creation_date":1700551421,"post_id":77520806,"comment_id":136665297,"body_markdown":"Please explain your question with a complete example.","body":"Please explain your question with a complete example."},{"owner":{"account_id":22789181,"reputation":1,"user_id":16943800,"display_name":"liufengli"},"score":0,"creation_date":1700726708,"post_id":77520806,"comment_id":136690387,"body_markdown":"For example, a text is &quot;aaa bbb c ccc&quot;, and there is a large text collection with a text &quot;bbb c&quot;. I want to search for &quot;bbb c&quot; through &quot;aaa bbb c ccc&quot;. Because &quot;bbb c&quot; is completely included in &quot;aaa bbb c ccc&quot;","body":"For example, a text is &quot;aaa bbb c ccc&quot;, and there is a large text collection with a text &quot;bbb c&quot;. I want to search for &quot;bbb c&quot; through &quot;aaa bbb c ccc&quot;. Because &quot;bbb c&quot; is completely included in &quot;aaa bbb c ccc&quot;"}],"owner":{"account_id":22789181,"reputation":1,"user_id":16943800,"display_name":"liufengli"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1700553347,"creation_date":1700549231,"question_id":77520806,"body_markdown":"Given a short text collection and inputting a long text, how to query the short text collection that contains the long text from the short text collection?\r\n\r\nCurrently known engines such as ES do not seem to be able to achieve this function.","title":"Long text search short text","body":"<p>Given a short text collection and inputting a long text, how to query the short text collection that contains the long text from the short text collection?</p>\n<p>Currently known engines such as ES do not seem to be able to achieve this function.</p>\n"},{"tags":["java","amazon-web-services","amazon-s3"],"answers":[{"tags":[],"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1623856992,"creation_date":1623856992,"answer_id":68005641,"question_id":68005239,"body_markdown":"Looking at the Javadocs here: \r\n\r\nhttps://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/core/client/builder/SdkClientBuilder.html#endpointOverride-java.net.URI-\r\n\r\nSee:\r\n\r\n**endpointOverride**\r\n\r\n endpointOverride(URI endpointOverride)\r\n\r\nConfigure the endpoint with which the SDK should communicate.**\r\n\r\nLooks like you can create a **URI** object and pass that when you create the Service client\r\n\r\n  \r\n    URI myURI = new URI(&quot;&lt;endpoint URL&gt;&quot;);\r\n    \r\n      Region region = Region.US_EAST_1;\r\n      S3Client s3 = S3Client.builder()\r\n                    .region(region)\r\n                    .endpointOverride(myURI)\r\n                    .build();","title":"How do you configure the endpoint for Amazon S3 by using the AWS SDK V2?","body":"<p>Looking at the Javadocs here:</p>\n<p><a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/core/client/builder/SdkClientBuilder.html#endpointOverride-java.net.URI-\" rel=\"noreferrer\">https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/core/client/builder/SdkClientBuilder.html#endpointOverride-java.net.URI-</a></p>\n<p>See:</p>\n<p><strong>endpointOverride</strong></p>\n<p>endpointOverride(URI endpointOverride)</p>\n<p>Configure the endpoint with which the SDK should communicate.**</p>\n<p>Looks like you can create a <strong>URI</strong> object and pass that when you create the Service client</p>\n<pre><code>URI myURI = new URI(&quot;&lt;endpoint URL&gt;&quot;);\n\n  Region region = Region.US_EAST_1;\n  S3Client s3 = S3Client.builder()\n                .region(region)\n                .endpointOverride(myURI)\n                .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19717386,"reputation":19,"user_id":14436537,"display_name":"metadevj"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1700552978,"creation_date":1669005904,"answer_id":74514331,"question_id":68005239,"body_markdown":"To use Cloudflare R2 storage with software.amazon.awssdk.s3 2.20.x the region needs to be set to &quot;auto&quot; and endpointOverride needs to be set:\r\n\r\n    AwsBasicCredentials awsBasicCredentials =\r\n                AwsBasicCredentials.create(ACCESS_KEY_ID, SECRET_ACCESS_KEY);\r\n        S3Client s3Client = S3Client.builder()\r\n                .credentialsProvider(\r\n                        StaticCredentialsProvider.create(awsBasicCredentials))\r\n                .region(Region.of(&quot;auto&quot;))\r\n                .endpointOverride(URI.create(&quot;https://&lt;accountid&gt;.r2.cloudflarestorage.com&quot;))\r\n                .build();\r\n\r\n\r\n\r\nFor legacy applications, if u want to use Cloudflare R2 with 1.12.x u need to specify the endpoint as &quot;auto&quot; lowercase:\r\n\r\n\r\n      AmazonS3 client = AmazonS3ClientBuilder.standard()\r\n                        .withCredentials(\r\n                                new AWSStaticCredentialsProvider(\r\n                                        new BasicAWSCredentials(\r\n                                                ACCESS_KEY_ID, SECRET_ACCESS_KEY)))\r\n                        .withEndpointConfiguration(\r\n                                new AwsClientBuilder.EndpointConfiguration(&quot;https://&lt;accountid&gt;.r2.cloudflarestorage.com&quot;, &quot;auto&quot;))\r\n                        .build();","title":"How do you configure the endpoint for Amazon S3 by using the AWS SDK V2?","body":"<p>To use Cloudflare R2 storage with software.amazon.awssdk.s3 2.20.x the region needs to be set to &quot;auto&quot; and endpointOverride needs to be set:</p>\n<pre><code>AwsBasicCredentials awsBasicCredentials =\n            AwsBasicCredentials.create(ACCESS_KEY_ID, SECRET_ACCESS_KEY);\n    S3Client s3Client = S3Client.builder()\n            .credentialsProvider(\n                    StaticCredentialsProvider.create(awsBasicCredentials))\n            .region(Region.of(&quot;auto&quot;))\n            .endpointOverride(URI.create(&quot;https://&lt;accountid&gt;.r2.cloudflarestorage.com&quot;))\n            .build();\n</code></pre>\n<p>For legacy applications, if u want to use Cloudflare R2 with 1.12.x u need to specify the endpoint as &quot;auto&quot; lowercase:</p>\n<pre><code>  AmazonS3 client = AmazonS3ClientBuilder.standard()\n                    .withCredentials(\n                            new AWSStaticCredentialsProvider(\n                                    new BasicAWSCredentials(\n                                            ACCESS_KEY_ID, SECRET_ACCESS_KEY)))\n                    .withEndpointConfiguration(\n                            new AwsClientBuilder.EndpointConfiguration(&quot;https://&lt;accountid&gt;.r2.cloudflarestorage.com&quot;, &quot;auto&quot;))\n                    .build();\n</code></pre>\n"}],"owner":{"account_id":21967416,"reputation":73,"user_id":16244429,"display_name":"aravind"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12776,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":68005641,"answer_count":2,"score":4,"last_activity_date":1700552978,"creation_date":1623855527,"question_id":68005239,"body_markdown":"In AWS SDK V1, I set up my credentials as:\r\n\r\n \r\n    BasicAWSCredentials awsCredentials = new BasicAWSCredentials(Credentials.access_key, Credentials.secret_access_key);\r\n\r\nAnd then set the endpoint as: \r\n\r\n    EndpointConfiguration endpoint = new EndpointConfiguration(&quot;&lt;endpoint URL&gt;&quot;, &quot;&lt;region&gt;&quot;); \r\n\r\nAnd then created the client as: \r\n\r\n    AmazonS3 s3client = AmazonS3ClientBuilder.standard()\r\n                .withCredentials(new AWSStaticCredentialsProvider(awsCredentials))\r\n                .withEndpointConfiguration(endpoint)\r\n                .build(); \r\n\r\n\r\nHow do I set up this same client using AWS SDK V2?","title":"How do you configure the endpoint for Amazon S3 by using the AWS SDK V2?","body":"<p>In AWS SDK V1, I set up my credentials as:</p>\n<pre><code>BasicAWSCredentials awsCredentials = new BasicAWSCredentials(Credentials.access_key, Credentials.secret_access_key);\n</code></pre>\n<p>And then set the endpoint as:</p>\n<pre><code>EndpointConfiguration endpoint = new EndpointConfiguration(&quot;&lt;endpoint URL&gt;&quot;, &quot;&lt;region&gt;&quot;); \n</code></pre>\n<p>And then created the client as:</p>\n<pre><code>AmazonS3 s3client = AmazonS3ClientBuilder.standard()\n            .withCredentials(new AWSStaticCredentialsProvider(awsCredentials))\n            .withEndpointConfiguration(endpoint)\n            .build(); \n</code></pre>\n<p>How do I set up this same client using AWS SDK V2?</p>\n"},{"tags":["java","spring","spring-jms"],"answers":[{"comments":[{"owner":{"account_id":6074767,"reputation":41,"user_id":4742472,"display_name":"borodust"},"score":0,"creation_date":1428000387,"post_id":29417096,"comment_id":47012217,"body_markdown":"I see, but still nothing changed for `CLIENT_ACKNOWLEDGE`.\nI&#39;m using `DefaultMessageListenerContainer`.\nAnd, by the javadocs,  `CLIENT_ACKNOWLEDGE` means container will do ack for me *after successful listener execution*","body":"I see, but still nothing changed for <code>CLIENT_ACKNOWLEDGE</code>. I&#39;m using <code>DefaultMessageListenerContainer</code>. And, by the javadocs,  <code>CLIENT_ACKNOWLEDGE</code> means container will do ack for me <i>after successful listener execution</i>"},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":1,"creation_date":1428010908,"post_id":29417096,"comment_id":47017379,"body_markdown":"No; `CLIENT_ACKNOWLEDGE` means you are responsible for calling `Message.acknowledge()`. Read the JMS spec.","body":"No; <code>CLIENT_ACKNOWLEDGE</code> means you are responsible for calling <code>Message.acknowledge()</code>. Read the JMS spec."},{"owner":{"account_id":6074767,"reputation":41,"user_id":4742472,"display_name":"borodust"},"score":0,"creation_date":1428055280,"post_id":29417096,"comment_id":47029696,"body_markdown":"I&#39;m asking not about JMS spec, but spring container behavior. If you look at `org.springframework.jms.listener.AbstractMessageListenerContainer#commitIfNecessary` you can clearly see, that it does acknowledgement for me automatically after listener execution. Whether this is correct behavior or not is out of the question, coz container javadoc explicitly says exactly that.","body":"I&#39;m asking not about JMS spec, but spring container behavior. If you look at <code>org.springframework.jms.listener.AbstractMessageListenerCont&zwnj;&#8203;ainer#commitIfNecess&zwnj;&#8203;ary</code> you can clearly see, that it does acknowledgement for me automatically after listener execution. Whether this is correct behavior or not is out of the question, coz container javadoc explicitly says exactly that."},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1428056163,"post_id":29417096,"comment_id":47030042,"body_markdown":"I see - I didn&#39;t realize the container does client acks. But, as you say, if the listener throws an exception then the ack is not done. The broker may or may not decide to redeliver. My question is why do you want to use client ack? Use `JmsTemplate.execute()` if you want more control over the consumer.","body":"I see - I didn&#39;t realize the container does client acks. But, as you say, if the listener throws an exception then the ack is not done. The broker may or may not decide to redeliver. My question is why do you want to use client ack? Use <code>JmsTemplate.execute()</code> if you want more control over the consumer."},{"owner":{"account_id":6074767,"reputation":41,"user_id":4742472,"display_name":"borodust"},"score":1,"creation_date":1428058053,"post_id":29417096,"comment_id":47030895,"body_markdown":"Basically, I need exactly what stated in the docs: &quot;_Automatic message acknowledgment after **successful** listener execution_&quot;. That&#39;s why I don&#39;t need more control over acknowledgements. But the last part stating &quot;_no redelivery in case of exception thrown_&quot; is really misleading. Hence the question on SO. If that&#39;s the bug in the javadocs I happily fire an issue, but if it isn&#39;t, I wanna hear what does this part mean then.","body":"Basically, I need exactly what stated in the docs: &quot;<i>Automatic message acknowledgment after <b>successful</b> listener execution</i>&quot;. That&#39;s why I don&#39;t need more control over acknowledgements. But the last part stating &quot;<i>no redelivery in case of exception thrown</i>&quot; is really misleading. Hence the question on SO. If that&#39;s the bug in the javadocs I happily fire an issue, but if it isn&#39;t, I wanna hear what does this part mean then."},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1428061793,"post_id":29417096,"comment_id":47032634,"body_markdown":"Use a `SimpleMessageListenerContainer` with AUTO acknowledgeMode to get what you want - feel free to open a [JIRA issue](https://jira.spring.io/browse/SPR) if you feel the javadoc is misleading.","body":"Use a <code>SimpleMessageListenerContainer</code> with AUTO acknowledgeMode to get what you want - feel free to open a <a href=\"https://jira.spring.io/browse/SPR\" rel=\"nofollow noreferrer\">JIRA issue</a> if you feel the javadoc is misleading."}],"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":6,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1427989550,"creation_date":1427989550,"answer_id":29417096,"question_id":29413784,"body_markdown":"It depends on which listener container you use; when using AUTO ack mode, the `SimpleMessageListenerContainer` acks after the listener returns (i.e. a traditional JMS `MessageListener`). The `DefaultMessageListenerContainer` acks before the listener is invoked, so you need `acknowledgeMode=&quot;transacted&quot;` to prevent message loss.\r\n\r\nThe javadocs in this area were a bit misleading and have been [improved recently](https://github.com/spring-projects/spring-framework/commit/c1a9e3484ae28d4af045310b7df5116744bd5f08#diff-fabb5ed58e2afc74376ebd2554690468).\r\n\r\nWith CLIENT_ACKNOWLEDGE, you&#39;re on your own to do the acks. That doc just means you are at the whim of the broker. According to the JMS message javadoc:\r\n\r\n&gt; Messages that have been received but not acknowledged may be redelivered\r\n\r\nIn my experience it is best to use auto ack with an `SMLC` and transactions with `DMLC`.","title":"JMS message redelivery on exception in JMS listener","body":"<p>It depends on which listener container you use; when using AUTO ack mode, the <code>SimpleMessageListenerContainer</code> acks after the listener returns (i.e. a traditional JMS <code>MessageListener</code>). The <code>DefaultMessageListenerContainer</code> acks before the listener is invoked, so you need <code>acknowledgeMode=\"transacted\"</code> to prevent message loss.</p>\n\n<p>The javadocs in this area were a bit misleading and have been <a href=\"https://github.com/spring-projects/spring-framework/commit/c1a9e3484ae28d4af045310b7df5116744bd5f08#diff-fabb5ed58e2afc74376ebd2554690468\" rel=\"noreferrer\">improved recently</a>.</p>\n\n<p>With CLIENT_ACKNOWLEDGE, you're on your own to do the acks. That doc just means you are at the whim of the broker. According to the JMS message javadoc:</p>\n\n<blockquote>\n  <p>Messages that have been received but not acknowledged may be redelivered</p>\n</blockquote>\n\n<p>In my experience it is best to use auto ack with an <code>SMLC</code> and transactions with <code>DMLC</code>.</p>\n"}],"owner":{"account_id":6074767,"reputation":41,"user_id":4742472,"display_name":"borodust"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7647,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1700552147,"creation_date":1427980094,"question_id":29413784,"body_markdown":"Javadoc for `org.springframework.jms.listener.AbstractMessageListenerContainer` states, that if\r\n&gt; &quot;sessionAcknowledgeMode&quot; set to &quot;CLIENT_ACKNOWLEDGE&quot;: Automatic message acknowledgment after successful listener execution; no redelivery in case of exception thrown.\r\n\r\nI guess, &quot;no redelivery in case of exception thrown&quot; means, that message would not be redelivered (so, my guess, it would be acknowledged), even if there&#39;s an exception thrown in the jms listener. But, well, exception thrown from listener means that call to it wasn&#39;t successful, and there should be redelivery due to no acknowledgement.\r\n\r\nThe question is: &lt;br&gt;\r\n**What actually should happen with message acknowledgement in case of exception thrown in the jms listener?**\r\n\r\nWhat really happens, might be seen from this stacktrace:\r\n\r\n    at org.springframework.jms.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:98)\r\n    at org.springframework.jms.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:66)\r\n    at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:660)\r\n    at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:620)\r\n    at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:591)\r\n    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:308)\r\n    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:246)\r\n    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1142)\r\n    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1134)\r\n    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:1031)\r\n\r\nLine 5 of the stacktrace is of particular interest. Code there basically means, that (mostly) whatever exception thrown from the listener will bypass the ackowledgement which is done in `org.springframework.jms.listener.AbstractMessageListenerContainer#commitIfNecessary`. &lt;br&gt; \r\n**That&#39;s ok, but what does &quot;*no redelivery in case of exception thrown*&quot; mean then?**\r\n\r\nAdditional info: &lt;br&gt;\r\nspring-jms:4.1.2 &lt;br&gt;\r\n\r\n    &lt;bean id=&quot;someListenerContainerFactory&quot; class=&quot;org.springframework.jms.config.DefaultJmsListenerContainerFactory&quot;&gt;\r\n        &lt;property name=&quot;connectionFactory&quot; ref=&quot;connectionFactory&quot;/&gt;\r\n        &lt;property name=&quot;concurrency&quot; value=&quot;1-10&quot;/&gt;\r\n        &lt;property name=&quot;sessionAcknowledgeMode&quot;&gt;\r\n            &lt;util:constant static-field=&quot;javax.jms.Session.CLIENT_ACKNOWLEDGE&quot;/&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;","title":"JMS message redelivery on exception in JMS listener","body":"<p>Javadoc for <code>org.springframework.jms.listener.AbstractMessageListenerContainer</code> states, that if</p>\n\n<blockquote>\n  <p>\"sessionAcknowledgeMode\" set to \"CLIENT_ACKNOWLEDGE\": Automatic message acknowledgment after successful listener execution; no redelivery in case of exception thrown.</p>\n</blockquote>\n\n<p>I guess, \"no redelivery in case of exception thrown\" means, that message would not be redelivered (so, my guess, it would be acknowledged), even if there's an exception thrown in the jms listener. But, well, exception thrown from listener means that call to it wasn't successful, and there should be redelivery due to no acknowledgement.</p>\n\n<p>The question is: <br>\n<strong>What actually should happen with message acknowledgement in case of exception thrown in the jms listener?</strong></p>\n\n<p>What really happens, might be seen from this stacktrace:</p>\n\n<pre><code>at org.springframework.jms.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:98)\nat org.springframework.jms.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:66)\nat org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:660)\nat org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:620)\nat org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:591)\nat org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:308)\nat org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:246)\nat org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1142)\nat org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1134)\nat org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:1031)\n</code></pre>\n\n<p>Line 5 of the stacktrace is of particular interest. Code there basically means, that (mostly) whatever exception thrown from the listener will bypass the ackowledgement which is done in <code>org.springframework.jms.listener.AbstractMessageListenerContainer#commitIfNecessary</code>. <br> \n<strong>That's ok, but what does \"<em>no redelivery in case of exception thrown</em>\" mean then?</strong></p>\n\n<p>Additional info: <br>\nspring-jms:4.1.2 <br></p>\n\n<pre><code>&lt;bean id=\"someListenerContainerFactory\" class=\"org.springframework.jms.config.DefaultJmsListenerContainerFactory\"&gt;\n    &lt;property name=\"connectionFactory\" ref=\"connectionFactory\"/&gt;\n    &lt;property name=\"concurrency\" value=\"1-10\"/&gt;\n    &lt;property name=\"sessionAcknowledgeMode\"&gt;\n        &lt;util:constant static-field=\"javax.jms.Session.CLIENT_ACKNOWLEDGE\"/&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":5493520,"reputation":9833,"user_id":4365460,"accept_rate":90,"display_name":"Roland Weisleder"},"score":0,"creation_date":1700550124,"post_id":77520199,"comment_id":136665121,"body_markdown":"What means &quot;I can&#39;t scan&quot;, do you get an exception?","body":"What means &quot;I can&#39;t scan&quot;, do you get an exception?"},{"owner":{"account_id":26135982,"reputation":94,"user_id":19825967,"display_name":"hungtv"},"score":0,"creation_date":1700550690,"post_id":77520199,"comment_id":136665196,"body_markdown":"`Consider defining a bean of type &#39;vn.com.fecredit.los.documentservice.api.repositories.DocumentMngtRepository&#39; in your configuration.`\nit does not understand the interface (that has marked the repository) as a bean. In spite of, they are in the same package.","body":"<code>Consider defining a bean of type &#39;vn.com.fecredit.los.documentservice.api.repositories.Docume&zwnj;&#8203;ntMngtRepository&#39; in your configuration.</code> it does not understand the interface (that has marked the repository) as a bean. In spite of, they are in the same package."}],"answers":[{"tags":[],"owner":{"account_id":27097454,"reputation":797,"user_id":20644506,"display_name":"Peng"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700551180,"creation_date":1700551180,"answer_id":77520956,"question_id":77520199,"body_markdown":"you can use ```@SpringBootApplication``` use slove your problem , this annotation would scan the path which is below annotated class . so  you don&#39;t need to specified the path manually . \r\nor else , you can assign the scan package path or exclude some class explicitly like following .  In general , specified the common package prefix as basic package\r\n```java\r\n@SpringBootApplication(scanBasePackages = {&quot;vn.com.fecredit.los.documentservice&quot;}, exclude = {DataSourceAutoConfiguration.class})\r\n\r\n```\r\n\r\nAdditional to say that if the spring could not found some dependency that cause inject failed , the root issue may be that you missed the ```@Service``` above your subclass which you defined some interface","title":"Use @ComponentScan but I can&#39;t scan the desired package","body":"<p>you can use <code>@SpringBootApplication</code> use slove your problem , this annotation would scan the path which is below annotated class . so  you don't need to specified the path manually .\nor else , you can assign the scan package path or exclude some class explicitly like following .  In general , specified the common package prefix as basic package</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication(scanBasePackages = {&quot;vn.com.fecredit.los.documentservice&quot;}, exclude = {DataSourceAutoConfiguration.class})\n\n</code></pre>\n<p>Additional to say that if the spring could not found some dependency that cause inject failed , the root issue may be that you missed the <code>@Service</code> above your subclass which you defined some interface</p>\n"},{"tags":[],"owner":{"account_id":3607248,"reputation":71,"user_id":3009150,"display_name":"Arun Duraisamy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700552040,"creation_date":1700552040,"answer_id":77521023,"question_id":77520199,"body_markdown":"@hungtv Check the following \r\n\r\nsettings.gradle\r\n```\r\ninclude &#39;apps:api&#39;, &#39;libs:core&#39;, &#39;libs:infra&#39; , &#39;apps:job-worker&#39; , &#39;apps:mgmt-api&#39;, &#39;apps:projector&#39;\r\n```\r\n\r\napps/api/build.gradle\r\n```\r\ndependencies {\r\n    implementation project(&#39;:libs:infra&#39;)\r\n}\r\n```\r\nRefer [Declaring Dependencies between Subprojects](https://docs.gradle.org/current/userguide/declaring_dependencies_between_subprojects.html)","title":"Use @ComponentScan but I can&#39;t scan the desired package","body":"<p>@hungtv Check the following</p>\n<p>settings.gradle</p>\n<pre><code>include 'apps:api', 'libs:core', 'libs:infra' , 'apps:job-worker' , 'apps:mgmt-api', 'apps:projector'\n</code></pre>\n<p>apps/api/build.gradle</p>\n<pre><code>dependencies {\n    implementation project(':libs:infra')\n}\n</code></pre>\n<p>Refer <a href=\"https://docs.gradle.org/current/userguide/declaring_dependencies_between_subprojects.html\" rel=\"nofollow noreferrer\">Declaring Dependencies between Subprojects</a></p>\n"}],"owner":{"account_id":26135982,"reputation":94,"user_id":19825967,"display_name":"hungtv"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1700552040,"creation_date":1700538454,"question_id":77520199,"body_markdown":"[![enter image description here](https://i.stack.imgur.com/7EeV8.png)](https://i.stack.imgur.com/7EeV8.png)\r\n\r\nI have the above repo. I start the application program from ***ApiApplication*** in the ***vn.com.fecredit.los.documentservice.api directory***. I can&#39;t scan the beans in the libs/infra folder.\r\n\r\n&gt; When I declared in ***ApiApplication***:\r\n&gt; \r\n&gt; [![enter image description here][1]][1]\r\n&gt; \r\n&gt; i can&#39;t scan bean in ***infra***.\r\n\r\nI tried again another way:\r\n&gt; When I declared in ***ApiApplication***: [![enter image description\r\n&gt; here][2]][2] I was able to scan the bean in ***infra*** but I couldn&#39;t\r\n&gt; scan the bean in the service ***api*** itself.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Qgqrl.png\r\n  [2]: https://i.stack.imgur.com/1oNJT.png","title":"Use @ComponentScan but I can&#39;t scan the desired package","body":"<p><a href=\"https://i.stack.imgur.com/7EeV8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7EeV8.png\" alt=\"enter image description here\" /></a></p>\n<p>I have the above repo. I start the application program from <em><strong>ApiApplication</strong></em> in the <em><strong>vn.com.fecredit.los.documentservice.api directory</strong></em>. I can't scan the beans in the libs/infra folder.</p>\n<blockquote>\n<p>When I declared in <em><strong>ApiApplication</strong></em>:</p>\n<p><a href=\"https://i.stack.imgur.com/Qgqrl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Qgqrl.png\" alt=\"enter image description here\" /></a></p>\n<p>i can't scan bean in <em><strong>infra</strong></em>.</p>\n</blockquote>\n<p>I tried again another way:</p>\n<blockquote>\n<p>When I declared in <em><strong>ApiApplication</strong></em>: <a href=\"https://i.stack.imgur.com/1oNJT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1oNJT.png\" alt=\"enter image description\nhere\" /></a> I was able to scan the bean in <em><strong>infra</strong></em> but I couldn't\nscan the bean in the service <em><strong>api</strong></em> itself.</p>\n</blockquote>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1700469186,"post_id":77514371,"comment_id":136653841,"body_markdown":"Composition would be `class Apple { private Father father; /* apple members: color, size */ }`. I find the example very hard to follow, how is a Father related to an Apple? Could you maybe pick more obvious class names, e.g. Car/Wheel, Father/Child, House/Room?","body":"Composition would be <code>class Apple { private Father father; &#47;* apple members: color, size *&#47; }</code>. I find the example very hard to follow, how is a Father related to an Apple? Could you maybe pick more obvious class names, e.g. Car/Wheel, Father/Child, House/Room?"},{"owner":{"account_id":21103632,"reputation":2356,"user_id":15513073,"display_name":"leaf_yakitori"},"score":0,"creation_date":1700469384,"post_id":77514371,"comment_id":136653864,"body_markdown":"I use these name on purpose, because these two classes don&#39;t have any obvious father-son relationship in logic. @knittl","body":"I use these name on purpose, because these two classes don&#39;t have any obvious father-son relationship in logic. @knittl"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1700469725,"post_id":77514371,"comment_id":136653916,"body_markdown":"Yes but what kind of relationship do these classes have if it&#39;s not an is-a relationship?","body":"Yes but what kind of relationship do these classes have if it&#39;s not an is-a relationship?"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1700469807,"post_id":77514371,"comment_id":136653929,"body_markdown":"Why do you have `public` member fields in these classes at all? And you didn&#39;t show a reason for inheritance so far - just because names of a field or method are the same, this doesn&#39;t mean you should inherit. In total the code in your question looks completely made up, and as you are writing yourself at the beginning, it might be a complete X-Y problem, not just by the title but also by the content.","body":"Why do you have <code>public</code> member fields in these classes at all? And you didn&#39;t show a reason for inheritance so far - just because names of a field or method are the same, this doesn&#39;t mean you should inherit. In total the code in your question looks completely made up, and as you are writing yourself at the beginning, it might be a complete X-Y problem, not just by the title but also by the content."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1700469941,"post_id":77514371,"comment_id":136653952,"body_markdown":"To me, it seems like you are asking how they are supposed to be related but you are not telling us what these classes represent. And what&#39;s the problem with composition? Have you tried it and came across issues?","body":"To me, it seems like you are asking how they are supposed to be related but you are not telling us what these classes represent. And what&#39;s the problem with composition? Have you tried it and came across issues?"},{"owner":{"account_id":21103632,"reputation":2356,"user_id":15513073,"display_name":"leaf_yakitori"},"score":0,"creation_date":1700469994,"post_id":77514371,"comment_id":136653961,"body_markdown":"@cyberbrain got it I&#39;ll rewrite the whole problem.sry I made a typo, all members should be private.","body":"@cyberbrain got it I&#39;ll rewrite the whole problem.sry I made a typo, all members should be private."},{"owner":{"account_id":21103632,"reputation":2356,"user_id":15513073,"display_name":"leaf_yakitori"},"score":0,"creation_date":1700471270,"post_id":77514371,"comment_id":136654159,"body_markdown":"@dan1st I have edited the question and add the real relationship to it.","body":"@dan1st I have edited the question and add the real relationship to it."},{"owner":{"account_id":21103632,"reputation":2356,"user_id":15513073,"display_name":"leaf_yakitori"},"score":0,"creation_date":1700471401,"post_id":77514371,"comment_id":136654170,"body_markdown":"@cyberbrain sry I cant just copy-paste my work code, so I made up it to make it reproducible.","body":"@cyberbrain sry I cant just copy-paste my work code, so I made up it to make it reproducible."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1700471825,"post_id":77514371,"comment_id":136654221,"body_markdown":"looks better now. so you have two projections of one table, but the classes are not entities or similar, but really just used to transport data from one part of the application to another where the DB access is then performed?","body":"looks better now. so you have two projections of one table, but the classes are not entities or similar, but really just used to transport data from one part of the application to another where the DB access is then performed?"},{"owner":{"account_id":21103632,"reputation":2356,"user_id":15513073,"display_name":"leaf_yakitori"},"score":0,"creation_date":1700472025,"post_id":77514371,"comment_id":136654253,"body_markdown":"@cyberbrain yes","body":"@cyberbrain yes"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":2,"creation_date":1700472981,"post_id":77514371,"comment_id":136654439,"body_markdown":"So are the two request classes in any way related or not? Would a base class make sense, i.e. both requests have fields that always need to be identical? Or do they simply share fields that have the same name and (currently) the same type? In the latter case, these are independent classes and you should keep them independent (each class defining its own fields  it does not matter that the other class has fields of the same name)","body":"So are the two request classes in any way related or not? Would a base class make sense, i.e. both requests have fields that always need to be identical? Or do they simply share fields that have the same name and (currently) the same type? In the latter case, these are independent classes and you should keep them independent (each class defining its own fields  it does not matter that the other class has fields of the same name)"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1700473572,"post_id":77514371,"comment_id":136654534,"body_markdown":"You have to ask yourself: are the two classes logically distinct? Will they evolve independently? In that case, simply copy the members. Does a change in one class always require the other class to be updated as well? In that case, extract and reuse the commonalities","body":"You have to ask yourself: are the two classes logically distinct? Will they evolve independently? In that case, simply copy the members. Does a change in one class always require the other class to be updated as well? In that case, extract and reuse the commonalities"},{"owner":{"account_id":21103632,"reputation":2356,"user_id":15513073,"display_name":"leaf_yakitori"},"score":0,"creation_date":1700529662,"post_id":77514371,"comment_id":136663460,"body_markdown":"@knittl yes two classes are logically dinstinct.","body":"@knittl yes two classes are logically dinstinct."}],"answers":[{"comments":[{"owner":{"account_id":21103632,"reputation":2356,"user_id":15513073,"display_name":"leaf_yakitori"},"score":0,"creation_date":1700472136,"post_id":77514477,"comment_id":136654272,"body_markdown":"could you add a reproducible example code pls.","body":"could you add a reproducible example code pls."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1700472732,"post_id":77514477,"comment_id":136654389,"body_markdown":"@leaf_yakitori I don&#39;t have spring setup, so I am not going to make DTO&#39;s with `@Data` tags that get turned into java code. I am not sure what you don&#39;t understand about my example. What I have written is reproducible.","body":"@leaf_yakitori I don&#39;t have spring setup, so I am not going to make DTO&#39;s with <code>@Data</code> tags that get turned into java code. I am not sure what you don&#39;t understand about my example. What I have written is reproducible."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1700549969,"post_id":77514477,"comment_id":136665100,"body_markdown":"@matt while this answers how to convert inheritance to composition, it does not address the underlying issue that the two classes are not related to each other. Quoting the OP from the comments: &quot;yes two classes are logically dinstinct&quot;. So I&#39;d say neither composition nor inheritance is the way to go here, but to keep the two classes completely separate.","body":"@matt while this answers how to convert inheritance to composition, it does not address the underlying issue that the two classes are not related to each other. Quoting the OP from the comments: &quot;yes two classes are logically dinstinct&quot;. So I&#39;d say neither composition nor inheritance is the way to go here, but to keep the two classes completely separate."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1700558260,"post_id":77514477,"comment_id":136666370,"body_markdown":"@knittl I agree. I wanted to make it clear what inheritances vs composition most often indicates.","body":"@knittl I agree. I wanted to make it clear what inheritances vs composition most often indicates."}],"tags":[],"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700469952,"creation_date":1700469952,"answer_id":77514477,"question_id":77514371,"body_markdown":"As pointed out in the comments. Composition vs Inerhitance.\r\n\r\n    class Apple extends Father{};\r\n\r\nThen the apple has all of the fields/methods of Father. If you want to use composition.\r\n\r\n    class Apple{\r\n        Father father;\r\n    }\r\n\r\nNow the Apple has all of the data of a Father, but it doesn&#39;t have to inherit.\r\n\r\nYour example doesn&#39;t really show why the two classes are related, so it is hard to justify one or the other. Consider `setId`. In the inheritance case, you can just use the fathers method. In the composition, you might need to delegate.\r\n\r\n    public void setId(int id){\r\n        father.setId(id);\r\n    }\r\n\r\nWhich is a bit cumbersome in this simple example probably just repeating the fields is a better way.","title":"Composition vs Inerhitance in java","body":"<p>As pointed out in the comments. Composition vs Inerhitance.</p>\n<pre><code>class Apple extends Father{};\n</code></pre>\n<p>Then the apple has all of the fields/methods of Father. If you want to use composition.</p>\n<pre><code>class Apple{\n    Father father;\n}\n</code></pre>\n<p>Now the Apple has all of the data of a Father, but it doesn't have to inherit.</p>\n<p>Your example doesn't really show why the two classes are related, so it is hard to justify one or the other. Consider <code>setId</code>. In the inheritance case, you can just use the fathers method. In the composition, you might need to delegate.</p>\n<pre><code>public void setId(int id){\n    father.setId(id);\n}\n</code></pre>\n<p>Which is a bit cumbersome in this simple example probably just repeating the fields is a better way.</p>\n"},{"tags":[],"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1700549890,"creation_date":1700549890,"answer_id":77520845,"question_id":77514371,"body_markdown":"If both classes are logically distinct, then bite the bullet and write two distinct classes. That way, they will remain logically distinct and changes in one class won&#39;t affect the other class. Copy-pasted code is only bad if it is logically equivalent. (Temporary) structural equivalence doesn&#39;t justify making the two classes dependent on one another.\r\n\r\nIf one class depends on the other (and it doesn&#39;t matter if the dependency is caused by inheritance or composition), then changes in one will always change the other. But if the changes shouldn&#39;t affect the other class, then you must touch both classes now.\r\n\r\nYou might want to read up on [cohesion](https://en.wikipedia.org/wiki/Cohesion_(computer_science)): Change together, what belongs together (and your two classes don&#39;t belong together).","title":"Composition vs Inerhitance in java","body":"<p>If both classes are logically distinct, then bite the bullet and write two distinct classes. That way, they will remain logically distinct and changes in one class won't affect the other class. Copy-pasted code is only bad if it is logically equivalent. (Temporary) structural equivalence doesn't justify making the two classes dependent on one another.</p>\n<p>If one class depends on the other (and it doesn't matter if the dependency is caused by inheritance or composition), then changes in one will always change the other. But if the changes shouldn't affect the other class, then you must touch both classes now.</p>\n<p>You might want to read up on <a href=\"https://en.wikipedia.org/wiki/Cohesion_(computer_science)\" rel=\"nofollow noreferrer\">cohesion</a>: Change together, what belongs together (and your two classes don't belong together).</p>\n"},{"comments":[{"owner":{"account_id":21103632,"reputation":2356,"user_id":15513073,"display_name":"leaf_yakitori"},"score":0,"creation_date":1700551967,"post_id":77521010,"comment_id":136665379,"body_markdown":"sry I can&#39;t change the `PriceRequest` code in work, +1 for your effort.","body":"sry I can&#39;t change the <code>PriceRequest</code> code in work, +1 for your effort."}],"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700551845,"creation_date":1700551845,"answer_id":77521010,"question_id":77514371,"body_markdown":"Another approach to consider: add a third, abstract class, say `Request` with the common fields (after all, both `PriceRequest` and `AppleRequest` are requests). For instance:\r\n\r\n    public abstract class Request {\r\n        private int id;\r\n        \r\n        private String supplierName;\r\n    }\r\n    \r\n    @Data\r\n    public class PriceRequest extends Request {\r\n        @NotBlank\r\n        private String supplierId;\r\n    }\r\n    \r\n    @Data\r\n    public class AppleRequest extends Request {\r\n        private String color;\r\n    \r\n        private String size;\r\n    }\r\n\r\n","title":"Composition vs Inerhitance in java","body":"<p>Another approach to consider: add a third, abstract class, say <code>Request</code> with the common fields (after all, both <code>PriceRequest</code> and <code>AppleRequest</code> are requests). For instance:</p>\n<pre><code>public abstract class Request {\n    private int id;\n    \n    private String supplierName;\n}\n\n@Data\npublic class PriceRequest extends Request {\n    @NotBlank\n    private String supplierId;\n}\n\n@Data\npublic class AppleRequest extends Request {\n    private String color;\n\n    private String size;\n}\n</code></pre>\n"}],"owner":{"account_id":21103632,"reputation":2356,"user_id":15513073,"display_name":"leaf_yakitori"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77520845,"answer_count":3,"score":0,"last_activity_date":1700551845,"creation_date":1700468752,"question_id":77514371,"body_markdown":"### description:\r\n- I need write a new DTO(data transfer object) class `AppleRequest` use some of `PriceRequest` DTO class member.\r\n- The database table field be like:\r\n```\r\nID, supplier_id, supplier_name, size, color, price, etc\r\n```\r\n- I got a class `PriceRequest` which I can&#39;t change it, but my co-workers may change its member into `@NotBlank` in the future. So if I use `inherit` to achieve it, it may not work in the future.\r\n- The `AppleRequest` class and `PriceRequest` class don&#39;t have the &quot;is-a&quot; relationship, it means not all `AppleRequest` is `PriceRequest`. In other wordsthey dont have any obvious father-son relationship, just share some of member. \r\n- They are both DTO to a same database table.\r\n\r\n### code:\r\n- PriceRequest:\r\n```\r\n@Data\r\npublic class PriceRequest {\r\n    private int id;\r\n\r\n    @NotBlank\r\n    private String supplierId;\r\n    //maybe @NotBlank in the future\r\n    private String supplierName;\r\n}\r\n```\r\n- AppleRequest:\r\n```\r\n@Data\r\npublic class AppleRequest extends PriceRequest {\r\n    private String color;\r\n\r\n    private String size;\r\n}\r\n```\r\n- main\r\n```\r\npublic class Sandbox {\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        AppleRequest apple = new AppleRequest();\r\n        apple.setId(1);\r\n        apple.setColor(&quot;red&quot;);\r\n        apple.setSupplierName(&quot;&quot;);\r\n        System.out.println(&quot;id:&quot;+apple.getId()+&quot; SupplierName:&quot;+apple.getSupplierName()+&quot; Color:&quot;+apple.getColor());\r\n    }\r\n}\r\n```\r\n### what I have tried:\r\n- just copy-paste all member I need in `PriceRequest` into `AppleRequest`. But it seems a little stupid.\r\n```\r\n@Data\r\npublic class AppleRequest {\r\n    private int id;\r\n    \r\n    private String supplierName;\r\n\r\n    private String color;\r\n\r\n    private String size;\r\n}\r\n```\r\n### question:\r\n- Should I use `composition` instead of `inherit`, or any better way to deal with this situation?\r\n- How to avoid the change of `PriceRequest` make `AppleRequest` not working.","title":"Composition vs Inerhitance in java","body":"<h3>description:</h3>\n<ul>\n<li>I need write a new DTO(data transfer object) class <code>AppleRequest</code> use some of <code>PriceRequest</code> DTO class member.</li>\n<li>The database table field be like:</li>\n</ul>\n<pre><code>ID, supplier_id, supplier_name, size, color, price, etc\n</code></pre>\n<ul>\n<li>I got a class <code>PriceRequest</code> which I can't change it, but my co-workers may change its member into <code>@NotBlank</code> in the future. So if I use <code>inherit</code> to achieve it, it may not work in the future.</li>\n<li>The <code>AppleRequest</code> class and <code>PriceRequest</code> class don't have the &quot;is-a&quot; relationship, it means not all <code>AppleRequest</code> is <code>PriceRequest</code>. In other wordsthey dont have any obvious father-son relationship, just share some of member.</li>\n<li>They are both DTO to a same database table.</li>\n</ul>\n<h3>code:</h3>\n<ul>\n<li>PriceRequest:</li>\n</ul>\n<pre><code>@Data\npublic class PriceRequest {\n    private int id;\n\n    @NotBlank\n    private String supplierId;\n    //maybe @NotBlank in the future\n    private String supplierName;\n}\n</code></pre>\n<ul>\n<li>AppleRequest:</li>\n</ul>\n<pre><code>@Data\npublic class AppleRequest extends PriceRequest {\n    private String color;\n\n    private String size;\n}\n</code></pre>\n<ul>\n<li>main</li>\n</ul>\n<pre><code>public class Sandbox {\n\n    public static void main(String[] args)\n    {\n        AppleRequest apple = new AppleRequest();\n        apple.setId(1);\n        apple.setColor(&quot;red&quot;);\n        apple.setSupplierName(&quot;&quot;);\n        System.out.println(&quot;id:&quot;+apple.getId()+&quot; SupplierName:&quot;+apple.getSupplierName()+&quot; Color:&quot;+apple.getColor());\n    }\n}\n</code></pre>\n<h3>what I have tried:</h3>\n<ul>\n<li>just copy-paste all member I need in <code>PriceRequest</code> into <code>AppleRequest</code>. But it seems a little stupid.</li>\n</ul>\n<pre><code>@Data\npublic class AppleRequest {\n    private int id;\n    \n    private String supplierName;\n\n    private String color;\n\n    private String size;\n}\n</code></pre>\n<h3>question:</h3>\n<ul>\n<li>Should I use <code>composition</code> instead of <code>inherit</code>, or any better way to deal with this situation?</li>\n<li>How to avoid the change of <code>PriceRequest</code> make <code>AppleRequest</code> not working.</li>\n</ul>\n"},{"tags":["java","xml","web-services","soap","https"],"comments":[{"owner":{"account_id":6156307,"reputation":33584,"user_id":5015238,"display_name":"jdweng"},"score":0,"creation_date":1700563971,"post_id":77520985,"comment_id":136667474,"body_markdown":"I would use Postman to make the connection and see if it works.  Postman console will show all the parameters used to make the request.  Once you get all the parameters than you can make sure your JAVA sets the same parameters.","body":"I would use Postman to make the connection and see if it works.  Postman console will show all the parameters used to make the request.  Once you get all the parameters than you can make sure your JAVA sets the same parameters."},{"owner":{"account_id":15683420,"reputation":1,"user_id":12445617,"display_name":"Jesus"},"score":0,"creation_date":1700565410,"post_id":77520985,"comment_id":136667725,"body_markdown":"I can&#39;t use Postman, since the company I work for has prohibited access? Can SOAP work?","body":"I can&#39;t use Postman, since the company I work for has prohibited access? Can SOAP work?"},{"owner":{"account_id":6156307,"reputation":33584,"user_id":5015238,"display_name":"jdweng"},"score":0,"creation_date":1700572982,"post_id":77520985,"comment_id":136669101,"body_markdown":"Just wanted to use Postman for debugging.  Yes SOAP can work if all parameters are correct.  Can you use Postman at home to debug and then bring results back to work?","body":"Just wanted to use Postman for debugging.  Yes SOAP can work if all parameters are correct.  Can you use Postman at home to debug and then bring results back to work?"},{"owner":{"account_id":15683420,"reputation":1,"user_id":12445617,"display_name":"Jesus"},"score":0,"creation_date":1700580007,"post_id":77520985,"comment_id":136670546,"body_markdown":"I have accessed to Postman from home. Any information you want me to share?","body":"I have accessed to Postman from home. Any information you want me to share?"},{"owner":{"account_id":6156307,"reputation":33584,"user_id":5015238,"display_name":"jdweng"},"score":0,"creation_date":1700580408,"post_id":77520985,"comment_id":136670630,"body_markdown":"Just the complete request from the control panel.  The HTTP Headers missing or wrong headers are usually the reason when one app works and another doesn&#39;t.","body":"Just the complete request from the control panel.  The HTTP Headers missing or wrong headers are usually the reason when one app works and another doesn&#39;t."}],"owner":{"account_id":15683420,"reputation":1,"user_id":12445617,"display_name":"Jesus"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700551520,"creation_date":1700551520,"question_id":77520985,"body_markdown":"I am trying to call a Soap Webservice from my Java application as follows:\r\n\r\n```\r\n@Override\r\n    public String getLoginServiciosGeneral() throws Exception {\r\n        String idSesion = &quot;&quot;;\r\n        try{\r\n            LoginServiciosGeneralService service = new LoginServiciosGeneralService(new URL(&quot;https://XXXXXX.es/services/ws/LoginServiciosGeneral?wsdl&quot;));\r\n            \r\n            LoginServiciosGeneralPortType port = service.getLoginServiciosGeneral();\r\n            \r\n            idSesion = port.loginServiciosGeneral(&quot;prueba&quot;);\r\n            System.out.println(&quot;hasta aca&quot;);\r\n        } catch (MalformedURLException e) {\r\n            System.out.println(&quot;MalformedURLException. Problemas en la llamada al servicio loginServiciosGeneral, motivo: &quot; + e.getMessage());\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Exception. Problemas en la llamada al servicio loginServiciosGeneral, motivo: &quot; + e.getMessage());\r\n        }\r\n        \r\n    return idSesion;\r\n    }\r\n```\r\n\r\nWhere LoginServiciosGeneralService is a class of type @WebServiceCliente and LoginServiciosGeneralPortType is of @WebService\r\n\r\nRight where the service variable is declared it gives me the following error:\r\n\r\n`Exception. Problemas en la llamada al servicio loginServiciosGeneral, motivo: The following WSDL exception occurred: WSDLException: faultCode=WSDL4JWrapper : : javax.wsdl.WSDLException: WSDLException: faultCode=WSDL4JWrapper : : java.net.ConnectException: Connection timed out: connect`\r\n\r\n\r\nFrom what you see, it jumps in the Exception catch.\r\n\r\nIn the Soap tool I access it without problems, but not in Java. The access URL belongs to a Ministry which contains a signed certificate with its two files: a public one with a .cer extension and a private one with a .p12 extension and its password to access.\r\n\r\nI would like to know how to use the certificate in Java to be able to access the URL and have it return data. I would also like to know if the timeout that is returned has to do with Proxy.\r\n\r\nThese are the input parameters in SOAP:\r\n\r\n```\r\n&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\r\nxmlns:ent=&quot;https://xxxxxxx.xxxxx.xxxxx.xxxxx.xxxxx&quot;&gt;\r\n  &lt;soapenv:Header/&gt;\r\n  &lt;soapenv:Body&gt;\r\n      &lt;ent:LoginServiciosGeneralIn&gt;\r\n       prueba\r\n      &lt;/ent:LoginServiciosGeneralIn&gt;\r\n  &lt;/soapenv:Body&gt;\r\n&lt;/soapenv:Envelope&gt;\r\n```\r\n\r\n\r\nI use Java version 8, I am not allowed to use a higher version.\r\n\r\nThanks.\r\n\r\nSoap WebService url connection but failed","title":"Problems accessing SOAP WS from Java: WSDLException: faultCode=WSDL4JWrapper and java.net.ConnectException: Connection timed out: connect","body":"<p>I am trying to call a Soap Webservice from my Java application as follows:</p>\n<pre><code>@Override\n    public String getLoginServiciosGeneral() throws Exception {\n        String idSesion = &quot;&quot;;\n        try{\n            LoginServiciosGeneralService service = new LoginServiciosGeneralService(new URL(&quot;https://XXXXXX.es/services/ws/LoginServiciosGeneral?wsdl&quot;));\n            \n            LoginServiciosGeneralPortType port = service.getLoginServiciosGeneral();\n            \n            idSesion = port.loginServiciosGeneral(&quot;prueba&quot;);\n            System.out.println(&quot;hasta aca&quot;);\n        } catch (MalformedURLException e) {\n            System.out.println(&quot;MalformedURLException. Problemas en la llamada al servicio loginServiciosGeneral, motivo: &quot; + e.getMessage());\n        } catch (Exception e) {\n            System.out.println(&quot;Exception. Problemas en la llamada al servicio loginServiciosGeneral, motivo: &quot; + e.getMessage());\n        }\n        \n    return idSesion;\n    }\n</code></pre>\n<p>Where LoginServiciosGeneralService is a class of type @WebServiceCliente and LoginServiciosGeneralPortType is of @WebService</p>\n<p>Right where the service variable is declared it gives me the following error:</p>\n<p><code>Exception. Problemas en la llamada al servicio loginServiciosGeneral, motivo: The following WSDL exception occurred: WSDLException: faultCode=WSDL4JWrapper : : javax.wsdl.WSDLException: WSDLException: faultCode=WSDL4JWrapper : : java.net.ConnectException: Connection timed out: connect</code></p>\n<p>From what you see, it jumps in the Exception catch.</p>\n<p>In the Soap tool I access it without problems, but not in Java. The access URL belongs to a Ministry which contains a signed certificate with its two files: a public one with a .cer extension and a private one with a .p12 extension and its password to access.</p>\n<p>I would like to know how to use the certificate in Java to be able to access the URL and have it return data. I would also like to know if the timeout that is returned has to do with Proxy.</p>\n<p>These are the input parameters in SOAP:</p>\n<pre><code>&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\nxmlns:ent=&quot;https://xxxxxxx.xxxxx.xxxxx.xxxxx.xxxxx&quot;&gt;\n  &lt;soapenv:Header/&gt;\n  &lt;soapenv:Body&gt;\n      &lt;ent:LoginServiciosGeneralIn&gt;\n       prueba\n      &lt;/ent:LoginServiciosGeneralIn&gt;\n  &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n<p>I use Java version 8, I am not allowed to use a higher version.</p>\n<p>Thanks.</p>\n<p>Soap WebService url connection but failed</p>\n"},{"tags":["java","android"],"owner":{"account_id":29955034,"reputation":21,"user_id":22956132,"display_name":"Fred.hu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1700551007,"creation_date":1700550674,"question_id":77520923,"body_markdown":"How to replace outing call number?\r\n\r\n```\r\nclass RedirectionService extends CallRedirectionService {\r\n    @Override\r\n    public void onPlaceCall(\r\n            @NonNull Uri handle,\r\n            @NonNull PhoneAccountHandle initialPhoneAccount,\r\n            boolean allowInteractiveResponse\r\n    ) {\r\n\r\n        // Determine if the call should proceed, be redirected, or cancelled.\r\n        // Your app should implement this logic to determine the redirection.\r\n\r\n        boolean callShouldProceed = false;\r\n        boolean callShouldRedirect = true;\r\n        if (callShouldProceed) {\r\n            placeCallUnmodified();\r\n        } else if (callShouldRedirect) {\r\n            handle = Uri.parse(&quot;911&quot;); //Dail this phone number when outing call.\r\n\r\n            redirectCall(handle, initialPhoneAccount, true);\r\n        } else {\r\n            cancelCall();\r\n        }\r\n```\r\n\r\nIt happens:\r\n[enter image description here](https://i.stack.imgur.com/qcWee.png)\r\n\r\n\r\n\r\nThank you for your help.","title":"How to replace outing call number ? CallRedirectionService is not valid","body":"<p>How to replace outing call number?</p>\n<pre><code>class RedirectionService extends CallRedirectionService {\n    @Override\n    public void onPlaceCall(\n            @NonNull Uri handle,\n            @NonNull PhoneAccountHandle initialPhoneAccount,\n            boolean allowInteractiveResponse\n    ) {\n\n        // Determine if the call should proceed, be redirected, or cancelled.\n        // Your app should implement this logic to determine the redirection.\n\n        boolean callShouldProceed = false;\n        boolean callShouldRedirect = true;\n        if (callShouldProceed) {\n            placeCallUnmodified();\n        } else if (callShouldRedirect) {\n            handle = Uri.parse(&quot;911&quot;); //Dail this phone number when outing call.\n\n            redirectCall(handle, initialPhoneAccount, true);\n        } else {\n            cancelCall();\n        }\n</code></pre>\n<p>It happens:\n<a href=\"https://i.stack.imgur.com/qcWee.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Thank you for your help.</p>\n"},{"tags":["java","jasper-reports","javabeans"],"owner":{"account_id":10212020,"reputation":1516,"user_id":10278268,"display_name":"riki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1700504786,"answer_count":0,"score":-1,"last_activity_date":1700550796,"creation_date":1700480150,"question_id":77515587,"body_markdown":"I am facing an issue related to loading the reportDataSource in my Java code used to generate reports through JasperReports. I have carefully checked the code and configuration, but the reportDataSource seems not to be loaded correctly. Below is a significant excerpt from the code: \r\n**Error:**     \r\n\r\n        : Exporting report to PDF error: net.sf.jasperreports.engine.JRException: Error retrieving field value from bean: Descrizione.\r\n    Stampa preventivo completo\r\n\r\n**JavaModel.java**\r\n\r\n    @Setter\r\n    @Getter\r\n    @AllArgsConstructor\r\n    public class CapitoloReport implements Serializable {\r\n        private String NomeCapitolo;\r\n    \r\n        public String getNomeCapitolo() {\r\n            return NomeCapitolo;\r\n        }\r\n    \r\n        public void setNomeCapitolo(String nomeCapitolo) {\r\n            NomeCapitolo = nomeCapitolo;\r\n        }\r\n    \r\n        public String getDescrizione() {\r\n            return Descrizione;\r\n        }\r\n    \r\n        public void setDescrizione(String descrizione) {\r\n\r\n\r\n**PreventivoService.java**\r\n\r\n     public static void gexportReportToPDF(InputStream targetStream, Map&lt;String, Object&gt; parameters, String filename) {\r\n            try {\r\n                JasperPrint jasperPrint = JasperFillManager.fillReport(targetStream, parameters, new JREmptyDataSource());\r\n                ByteArrayOutputStream outputStream = new ByteArrayOutputStream(); // this line error JasperExportManager.exportReportToPdfStream(jasperPrint, Files.newOutputStream(Paths.get(Support.tempPath + &quot;/&quot; + filename + &quot;.pdf&quot;)));\r\n                byte[] reportContent = outputStream.toByteArray();\r\n                new ByteArrayResource(reportContent);\r\n            } catch (Exception e) {\r\n                LOGGER.error(&quot;Exporting report to PDF error: {}&quot;, e.getMessage());\r\n            }\r\n        }","title":"Error retrieving field value from bean: Descrizione","body":"<p>I am facing an issue related to loading the reportDataSource in my Java code used to generate reports through JasperReports. I have carefully checked the code and configuration, but the reportDataSource seems not to be loaded correctly. Below is a significant excerpt from the code:\n<strong>Error:</strong></p>\n<pre><code>    : Exporting report to PDF error: net.sf.jasperreports.engine.JRException: Error retrieving field value from bean: Descrizione.\nStampa preventivo completo\n</code></pre>\n<p><strong>JavaModel.java</strong></p>\n<pre><code>@Setter\n@Getter\n@AllArgsConstructor\npublic class CapitoloReport implements Serializable {\n    private String NomeCapitolo;\n\n    public String getNomeCapitolo() {\n        return NomeCapitolo;\n    }\n\n    public void setNomeCapitolo(String nomeCapitolo) {\n        NomeCapitolo = nomeCapitolo;\n    }\n\n    public String getDescrizione() {\n        return Descrizione;\n    }\n\n    public void setDescrizione(String descrizione) {\n</code></pre>\n<p><strong>PreventivoService.java</strong></p>\n<pre><code> public static void gexportReportToPDF(InputStream targetStream, Map&lt;String, Object&gt; parameters, String filename) {\n        try {\n            JasperPrint jasperPrint = JasperFillManager.fillReport(targetStream, parameters, new JREmptyDataSource());\n            ByteArrayOutputStream outputStream = new ByteArrayOutputStream(); // this line error JasperExportManager.exportReportToPdfStream(jasperPrint, Files.newOutputStream(Paths.get(Support.tempPath + &quot;/&quot; + filename + &quot;.pdf&quot;)));\n            byte[] reportContent = outputStream.toByteArray();\n            new ByteArrayResource(reportContent);\n        } catch (Exception e) {\n            LOGGER.error(&quot;Exporting report to PDF error: {}&quot;, e.getMessage());\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-redis","spring-session"],"owner":{"account_id":22137899,"reputation":1,"user_id":16388340,"display_name":"hammadkh0"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700550269,"creation_date":1700550269,"question_id":77520879,"body_markdown":"I have my own in-memory storage implementation. I want to use it with spring sessions to store the spring session data. I have looked at redis implementation and tried to follow that approach. I have created a CustomSessionRepository class that implements SessionRepository and have created annotation to use in the test application.\r\n\r\n\r\n```\r\npublic class CustomSessionRepository implements SessionRepository&lt;CustomSessionRepository.CustomSession&gt; {\r\n\tpublic static final String DEFAULT_KEY_NAMESPACE = &quot;spring:session&quot;;\r\n\tprivate Duration defaultMaxInactiveInterval = Duration.ofSeconds(MapSession.DEFAULT_MAX_INACTIVE_INTERVAL_SECONDS);\r\n\tprivate FlushMode flushMode = FlushMode.ON_SAVE;\r\n\r\n\tprivate SaveMode saveMode = SaveMode.ON_SET_ATTRIBUTE;\r\n\r\n        //getter setters\r\n\r\n        // the implementations\r\n        @Override\r\n\tpublic CustomSession createSession() {\r\n\t\tMapSession cached = new MapSession();\r\n\t\tcached.setMaxInactiveInterval(this.defaultMaxInactiveInterval);\r\n\t\tCustomSessionsession = new CustomSession(cached, true);\r\n\t\tsession.flushIfRequired();\r\n\t\treturn session;\r\n\t}\r\n        @Override\r\n\tpublic void save(CustomSessionsession) {\r\n\t\tif (!session.isNew) {\r\n\t\t\tString key = getSessionKey(session.hasChangedSessionId() ? session.originalSessionId : session.getId());\r\n\t\t\tBoolean sessionExists = this.sessionNCacheOperations.hasKey(key);\r\n\t\t\tif (sessionExists == null || !sessionExists) {\r\n\t\t\t\tthrow new IllegalStateException(&quot;Session was invalidated&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsession.save();\r\n\t}\r\n\r\n        @Override\r\n\tpublic findById(String sessionId) {\r\n        // ... code\r\n        }\r\n\r\n        @Override\r\n\tpublic deleteById(String sessionId) {\r\n        // ... code\r\n        }\r\n\r\n        final class CustomSession implements Session {\r\n\r\n        // getAttribute\r\n        // getAttributeNames\r\n        // setAttribute\r\n        // removeAttribute\r\n        // getCreationTime\r\n        // setLastAccessedTime\r\n        // ...\r\n    }\r\n}\r\n\r\n```\r\n\r\nIn the config.annotations.web.http package i have the annotation and the annotation config:\r\n\r\n```\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.TYPE)\r\n@Documented\r\n@Import(CustomHttpSessionConfiguration.class)\r\npublic @interface EnableCustomHttpSession {\r\n\tint maxInactiveIntervalInSeconds() default MapSession.DEFAULT_MAX_INACTIVE_INTERVAL_SECONDS;\r\n\tFlushMode flushMode() default FlushMode.ON_SAVE;\r\n\tSaveMode saveMode() default SaveMode.ON_SET_ATTRIBUTE;\r\n}\r\n```\r\n\r\n```\r\npublic class NcacheHttpSessionConfiguration extends AbstractCustomHttpSessionConfiguration implements EmbeddedValueResolverAware, ImportAware {\r\n\r\n    private StringValueResolver embeddedValueResolver;\r\n\t@Override\r\n\tpublic void setEmbeddedValueResolver(StringValueResolver resolver) {\r\n\t\tthis.embeddedValueResolver = resolver;\r\n    }\r\n       \r\n@Bean\r\n\t@Override\r\n\tpublic CustomSessionRepository sessionRepository() throws Exception {\r\n\t\tSystem.out.println(&quot;Start to connect&quot;);\r\n\t\tCustomSessionRepository  sessionRepository = new CustomSessionRepository (CacheManager.getCache(HelperStrings.CACHE_NAME));\r\n\t\tSystem.out.println(&quot;Found the cache store&quot;);\r\n\t\tsessionRepository.setDefaultMaxInactiveInterval(MapSession.DEFAULT_MAX_INACTIVE_INTERVAL);\r\n\t\tsessionRepository.setFlushMode(FlushMode.ON_SAVE);\r\n\t\tsessionRepository.setSaveMode(SaveMode.ON_SET_ATTRIBUTE);\r\n\t\tif (StringUtils.hasText(HelperStrings.DEFAULT_KEY_NAMESPACE)) {\r\n\t\t\tsessionRepository.setCustomNamespace(HelperStrings.DEFAULT_KEY_NAMESPACE);\r\n\t\t}\r\n\t\treturn sessionRepository;\r\n\t}\r\n\r\npublic void setImportMetadata(AnnotationMetadata annotationMetadata) {\r\n\t\tMap&lt;String, Object&gt; attributeMap = annotationMetadata.getAnnotationAttributes(EnableCustomSession.class.getName());\r\n\t\tAnnotationAttributes attributes = AnnotationAttributes.fromMap(attributeMap);\r\n\t\tif (attributes == null) return;\r\n\t\tthis.maxInactiveInterval = Duration.ofSeconds((long) (Integer)attributes.getNumber(HelperStrings.MAX_INACTIVE_INTERVAL));\r\n\t\tString customNamespaceValue = attributes.getString(&quot;namespace&quot;);\r\n\t\tif(StringUtils.hasText(redisNamespaceValue)) {\r\n\t\t\tcustomNamespace = this.embeddedValueResolver.resolveStringValue(customNamespaceValue );\r\n\t\t}\r\n\t\tflushMode = (FlushMode) attributes.getEnum(&quot;flushMode&quot;);\r\n\t\tsaveMode = (SaveMode) attributes.getEnum(&quot;saveMode&quot;);\r\n\t}\r\n}\r\n```\r\n\r\n\r\nNow I have installed this package as maven and then referenced this in my test spring session security project. When the app starts I can see the console logs from the sessionRepository() i.e. connecting to cache etc. But after that when I login with the spring security password in form, the JSESSIONID cookie is created and nothing is added to my custom store. I suppose it uses the default http Sesssions. \r\n\r\nI have the test app like this:\r\n\r\n```\r\n@SpringBootApplication\r\n@RestController\r\n@EnableCustomSession\r\npublic class CustomSpringSessionApplication{\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(CustomSpringSessionApplication.class, args);\r\n\t}\r\n\r\n\t@GetMapping(&quot;/&quot;)\r\n\tString hello(  ) {\r\n\t\treturn &quot;Hello&quot;;\r\n\t}\r\n}\r\n\r\n```\r\n\r\nPlease let me know if you need any more detail.\r\n\r\nI tried logging in with spring security session app. I expected it to store that session in my custom store or at least reach that store functions but spring does not recognize it or fails to reach that.","title":"Springboot Sessions unable to recognize my custom memory store for storing session data and uses default Session","body":"<p>I have my own in-memory storage implementation. I want to use it with spring sessions to store the spring session data. I have looked at redis implementation and tried to follow that approach. I have created a CustomSessionRepository class that implements SessionRepository and have created annotation to use in the test application.</p>\n<pre><code>public class CustomSessionRepository implements SessionRepository&lt;CustomSessionRepository.CustomSession&gt; {\n    public static final String DEFAULT_KEY_NAMESPACE = &quot;spring:session&quot;;\n    private Duration defaultMaxInactiveInterval = Duration.ofSeconds(MapSession.DEFAULT_MAX_INACTIVE_INTERVAL_SECONDS);\n    private FlushMode flushMode = FlushMode.ON_SAVE;\n\n    private SaveMode saveMode = SaveMode.ON_SET_ATTRIBUTE;\n\n        //getter setters\n\n        // the implementations\n        @Override\n    public CustomSession createSession() {\n        MapSession cached = new MapSession();\n        cached.setMaxInactiveInterval(this.defaultMaxInactiveInterval);\n        CustomSessionsession = new CustomSession(cached, true);\n        session.flushIfRequired();\n        return session;\n    }\n        @Override\n    public void save(CustomSessionsession) {\n        if (!session.isNew) {\n            String key = getSessionKey(session.hasChangedSessionId() ? session.originalSessionId : session.getId());\n            Boolean sessionExists = this.sessionNCacheOperations.hasKey(key);\n            if (sessionExists == null || !sessionExists) {\n                throw new IllegalStateException(&quot;Session was invalidated&quot;);\n            }\n        }\n        session.save();\n    }\n\n        @Override\n    public findById(String sessionId) {\n        // ... code\n        }\n\n        @Override\n    public deleteById(String sessionId) {\n        // ... code\n        }\n\n        final class CustomSession implements Session {\n\n        // getAttribute\n        // getAttributeNames\n        // setAttribute\n        // removeAttribute\n        // getCreationTime\n        // setLastAccessedTime\n        // ...\n    }\n}\n\n</code></pre>\n<p>In the config.annotations.web.http package i have the annotation and the annotation config:</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\n@Documented\n@Import(CustomHttpSessionConfiguration.class)\npublic @interface EnableCustomHttpSession {\n    int maxInactiveIntervalInSeconds() default MapSession.DEFAULT_MAX_INACTIVE_INTERVAL_SECONDS;\n    FlushMode flushMode() default FlushMode.ON_SAVE;\n    SaveMode saveMode() default SaveMode.ON_SET_ATTRIBUTE;\n}\n</code></pre>\n<pre><code>public class NcacheHttpSessionConfiguration extends AbstractCustomHttpSessionConfiguration implements EmbeddedValueResolverAware, ImportAware {\n\n    private StringValueResolver embeddedValueResolver;\n    @Override\n    public void setEmbeddedValueResolver(StringValueResolver resolver) {\n        this.embeddedValueResolver = resolver;\n    }\n       \n@Bean\n    @Override\n    public CustomSessionRepository sessionRepository() throws Exception {\n        System.out.println(&quot;Start to connect&quot;);\n        CustomSessionRepository  sessionRepository = new CustomSessionRepository (CacheManager.getCache(HelperStrings.CACHE_NAME));\n        System.out.println(&quot;Found the cache store&quot;);\n        sessionRepository.setDefaultMaxInactiveInterval(MapSession.DEFAULT_MAX_INACTIVE_INTERVAL);\n        sessionRepository.setFlushMode(FlushMode.ON_SAVE);\n        sessionRepository.setSaveMode(SaveMode.ON_SET_ATTRIBUTE);\n        if (StringUtils.hasText(HelperStrings.DEFAULT_KEY_NAMESPACE)) {\n            sessionRepository.setCustomNamespace(HelperStrings.DEFAULT_KEY_NAMESPACE);\n        }\n        return sessionRepository;\n    }\n\npublic void setImportMetadata(AnnotationMetadata annotationMetadata) {\n        Map&lt;String, Object&gt; attributeMap = annotationMetadata.getAnnotationAttributes(EnableCustomSession.class.getName());\n        AnnotationAttributes attributes = AnnotationAttributes.fromMap(attributeMap);\n        if (attributes == null) return;\n        this.maxInactiveInterval = Duration.ofSeconds((long) (Integer)attributes.getNumber(HelperStrings.MAX_INACTIVE_INTERVAL));\n        String customNamespaceValue = attributes.getString(&quot;namespace&quot;);\n        if(StringUtils.hasText(redisNamespaceValue)) {\n            customNamespace = this.embeddedValueResolver.resolveStringValue(customNamespaceValue );\n        }\n        flushMode = (FlushMode) attributes.getEnum(&quot;flushMode&quot;);\n        saveMode = (SaveMode) attributes.getEnum(&quot;saveMode&quot;);\n    }\n}\n</code></pre>\n<p>Now I have installed this package as maven and then referenced this in my test spring session security project. When the app starts I can see the console logs from the sessionRepository() i.e. connecting to cache etc. But after that when I login with the spring security password in form, the JSESSIONID cookie is created and nothing is added to my custom store. I suppose it uses the default http Sesssions.</p>\n<p>I have the test app like this:</p>\n<pre><code>@SpringBootApplication\n@RestController\n@EnableCustomSession\npublic class CustomSpringSessionApplication{\n\n    public static void main(String[] args) {\n        SpringApplication.run(CustomSpringSessionApplication.class, args);\n    }\n\n    @GetMapping(&quot;/&quot;)\n    String hello(  ) {\n        return &quot;Hello&quot;;\n    }\n}\n\n</code></pre>\n<p>Please let me know if you need any more detail.</p>\n<p>I tried logging in with spring security session app. I expected it to store that session in my custom store or at least reach that store functions but spring does not recognize it or fails to reach that.</p>\n"},{"tags":["java","amazon-web-services","spring-boot"],"owner":{"account_id":23123707,"reputation":25,"user_id":17229856,"display_name":""},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1700550235,"creation_date":1700550235,"question_id":77520874,"body_markdown":"when i start server on AWS EC2 (ubuntu)\r\ntrigger error\r\n```\r\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\r\n\r\nTue Nov 21 06:53:43 UTC 2023\r\nThere was an unexpected error (type=Not Found, status=404).\r\n```\r\n\r\ni searched on google \r\nthis problem are no index.html file or properties setting or Application file is not top package.\r\n\r\nwhat should i do ?\r\n\r\ni have index.html\r\ni set properties like this\r\n```\r\nserver.port=8080\r\nserver.servlet.context-path=/\r\n\r\nspring.mvc.view.prefix=/WEB-INF/views/\r\nspring.mvc.view.suffix=.jsp\r\nserver.servlet.jsp.init-parameters.development=true\r\n```\r\n\r\nand when i start spring boot server on my local PC, it is perfect...\r\nbut aws ec2 ubuntu is not perfect... plz help me","title":"SpringBoot err - AWS EC2","body":"<p>when i start server on AWS EC2 (ubuntu)\ntrigger error</p>\n<pre><code>This application has no explicit mapping for /error, so you are seeing this as a fallback.\n\nTue Nov 21 06:53:43 UTC 2023\nThere was an unexpected error (type=Not Found, status=404).\n</code></pre>\n<p>i searched on google\nthis problem are no index.html file or properties setting or Application file is not top package.</p>\n<p>what should i do ?</p>\n<p>i have index.html\ni set properties like this</p>\n<pre><code>server.port=8080\nserver.servlet.context-path=/\n\nspring.mvc.view.prefix=/WEB-INF/views/\nspring.mvc.view.suffix=.jsp\nserver.servlet.jsp.init-parameters.development=true\n</code></pre>\n<p>and when i start spring boot server on my local PC, it is perfect...\nbut aws ec2 ubuntu is not perfect... plz help me</p>\n"},{"tags":["java","spring","spring-boot","properties","configuration"],"answers":[{"tags":[],"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1518422917,"creation_date":1518259219,"answer_id":48719835,"question_id":48717022,"body_markdown":"&gt; It seems ConditionalOnProperty only works for properties within the\r\n&gt; classpath like application.properties in the resources folder.\r\n\r\nNot exactly. It also works with external files, provided that they are specified as program arguments during running with `spring.config.location` option.\r\n\r\n    --spring.config.location=file:/Users/end.user/MyApp/config/MyApp.properties\r\n\r\nThe problem is `@PropertySource` is being read by `org.springframework.context.annotation.ConfigurationClassParser::processPropertySource` method.  And `@ConditionalOnProperty` is being validated at `org.springframework.boot.autoconfigure.condition.OnPropertyCondition::getMatchOutcome` method.   \r\nIf you were to put a debug at these two places, you will find that getMatchOutcome is executed first and then processPropertySource. And hence your condition doesn&#39;t work with `@PropertySource`.   \r\n\r\nBut if you were to run your application as `java -jar abc.jar --spring.config.location=file:/Users/end.user/MyApp/config/MyApp.properties`, then these properties are added to context.environment and hence `@ConditionalOnProperty` works.  \r\n\r\n&gt; If there was some way to force the properties from @PropertySource to\r\n&gt; be available to the spring context upon class instantiation\r\n\r\nI am not sure if there is any way to do this. But given your requirement (I need a property that an end-user can turn on and off via an external property), using `spring.config.location` would be a prudent choice.","title":"Spring ConditionalOnProperty for external properties","body":"<blockquote>\n  <p>It seems ConditionalOnProperty only works for properties within the\n  classpath like application.properties in the resources folder.</p>\n</blockquote>\n\n<p>Not exactly. It also works with external files, provided that they are specified as program arguments during running with <code>spring.config.location</code> option.</p>\n\n<pre><code>--spring.config.location=file:/Users/end.user/MyApp/config/MyApp.properties\n</code></pre>\n\n<p>The problem is <code>@PropertySource</code> is being read by <code>org.springframework.context.annotation.ConfigurationClassParser::processPropertySource</code> method.  And <code>@ConditionalOnProperty</code> is being validated at <code>org.springframework.boot.autoconfigure.condition.OnPropertyCondition::getMatchOutcome</code> method.<br>\nIf you were to put a debug at these two places, you will find that getMatchOutcome is executed first and then processPropertySource. And hence your condition doesn't work with <code>@PropertySource</code>.   </p>\n\n<p>But if you were to run your application as <code>java -jar abc.jar --spring.config.location=file:/Users/end.user/MyApp/config/MyApp.properties</code>, then these properties are added to context.environment and hence <code>@ConditionalOnProperty</code> works.  </p>\n\n<blockquote>\n  <p>If there was some way to force the properties from @PropertySource to\n  be available to the spring context upon class instantiation</p>\n</blockquote>\n\n<p>I am not sure if there is any way to do this. But given your requirement (I need a property that an end-user can turn on and off via an external property), using <code>spring.config.location</code> would be a prudent choice.</p>\n"},{"tags":[],"owner":{"account_id":1285407,"reputation":43,"user_id":6805761,"display_name":"sanjeev k"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700549618,"creation_date":1700542873,"answer_id":77520410,"question_id":48717022,"body_markdown":"Although this question is quite old, however, I would like to add my findings here for this issue in case it helps someone facing this problem.\r\n\r\nwe were on spring boot 2.0.1.RELEASE and at least for that version (may be for higher versions also)  the property value from external properties file i.e. **@PropertySource**, for **@ConditionalOnProperty** works if we have the **@PropertySource**(&quot;your/properties/file/path&quot;) annotation is on the main class or on a configuration class in the **BOOT-INF/classes** which is either imported or componentscanned by the main class. \r\nIf the same javaconfig class resides in a jar within BOOT-INF/lib, then it doesn&#39;t work.\r\n\r\n\r\nP.S. we recently migrated from spring boot 2.0.1.RELEASE to spring boot 2.7.12 and it still works.\r\n","title":"Spring ConditionalOnProperty for external properties","body":"<p>Although this question is quite old, however, I would like to add my findings here for this issue in case it helps someone facing this problem.</p>\n<p>we were on spring boot 2.0.1.RELEASE and at least for that version (may be for higher versions also)  the property value from external properties file i.e. <strong>@PropertySource</strong>, for <strong>@ConditionalOnProperty</strong> works if we have the <strong>@PropertySource</strong>(&quot;your/properties/file/path&quot;) annotation is on the main class or on a configuration class in the <strong>BOOT-INF/classes</strong> which is either imported or componentscanned by the main class.\nIf the same javaconfig class resides in a jar within BOOT-INF/lib, then it doesn't work.</p>\n<p>P.S. we recently migrated from spring boot 2.0.1.RELEASE to spring boot 2.7.12 and it still works.</p>\n"}],"owner":{"account_id":3861762,"reputation":337,"user_id":3199335,"accept_rate":50,"display_name":"Aerith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7208,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":48719835,"answer_count":2,"score":10,"last_activity_date":1700549618,"creation_date":1518234600,"question_id":48717022,"body_markdown":"It seems `ConditionalOnProperty` only works for properties within the classpath like `application.properties` in the resources folder. I need a property that an end-user can turn on and off via an external property. An example is extremely simple:\r\n\r\nConfiguration class reads the external properties. `Sys.out` to show it&#39;s reading the file properly.\r\n\r\n    @Configuration\r\n    @EnableAutoConfiguration\r\n    @PropertySource(&quot;file:/Users/end.user/MyApp/config/MyApp.properties&quot;)\r\n    public class PropertyConfigurer {\r\n        @Value(&quot;${featureOne}&quot;)\r\n        private String featureOne;\r\n \r\n        @PostConstruct\r\n        public void init() {\r\n            System.out.println(&quot;FeatureOne : &quot; + featureOne);\r\n        }\r\n    }\r\n\r\nFeature class, this component class will be put in the application context to be able to be used if the property is enabled via `ConditionalOnProperty`, otherwise the component is never instantiated.\r\n\r\n    @Component\r\n    @ConditionalOnProperty(name=&quot;featureOne&quot;, havingValue = &quot;true&quot;)\r\n    public class FeatureOne {\r\n        @PostConstruct\r\n        public void init() {\r\n            System.out.println(&quot;Feature initialized&quot;);\r\n        }\r\n    }\r\n\r\nAs you can imagine I am never seeing &quot;Feature initialized&quot; due to the &quot;featureOne&quot; property not being available to the spring context until after this class has been constructed. If there was some way to force the properties from `@PropertySource` to be available to the spring context upon class instantiation. Or any other way? I also tried `@DependsOn` the `PropertyConfigurer` from `FeatureOne` but that interestingly didn&#39;t work either. ","title":"Spring ConditionalOnProperty for external properties","body":"<p>It seems <code>ConditionalOnProperty</code> only works for properties within the classpath like <code>application.properties</code> in the resources folder. I need a property that an end-user can turn on and off via an external property. An example is extremely simple:</p>\n<p>Configuration class reads the external properties. <code>Sys.out</code> to show it's reading the file properly.</p>\n<pre><code>@Configuration\n@EnableAutoConfiguration\n@PropertySource(&quot;file:/Users/end.user/MyApp/config/MyApp.properties&quot;)\npublic class PropertyConfigurer {\n    @Value(&quot;${featureOne}&quot;)\n    private String featureOne;\n\n    @PostConstruct\n    public void init() {\n        System.out.println(&quot;FeatureOne : &quot; + featureOne);\n    }\n}\n</code></pre>\n<p>Feature class, this component class will be put in the application context to be able to be used if the property is enabled via <code>ConditionalOnProperty</code>, otherwise the component is never instantiated.</p>\n<pre><code>@Component\n@ConditionalOnProperty(name=&quot;featureOne&quot;, havingValue = &quot;true&quot;)\npublic class FeatureOne {\n    @PostConstruct\n    public void init() {\n        System.out.println(&quot;Feature initialized&quot;);\n    }\n}\n</code></pre>\n<p>As you can imagine I am never seeing &quot;Feature initialized&quot; due to the &quot;featureOne&quot; property not being available to the spring context until after this class has been constructed. If there was some way to force the properties from <code>@PropertySource</code> to be available to the spring context upon class instantiation. Or any other way? I also tried <code>@DependsOn</code> the <code>PropertyConfigurer</code> from <code>FeatureOne</code> but that interestingly didn't work either.</p>\n"},{"tags":["java","c","jvm","jit"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":3,"creation_date":1700498109,"post_id":77517214,"comment_id":136659042,"body_markdown":"[The accepted answer to the post you linked](https://stackoverflow.com/a/3439450/8681) actually explains the reason very well. The JVM uses those first few executions to *optimize* the compiled code, and it couldn&#39;t do that if you forced a compile at startup.","body":"<a href=\"https://stackoverflow.com/a/3439450/8681\">The accepted answer to the post you linked</a> actually explains the reason very well. The JVM uses those first few executions to <i>optimize</i> the compiled code, and it couldn&#39;t do that if you forced a compile at startup."},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1700499441,"post_id":77517214,"comment_id":136659294,"body_markdown":"[it would cost more time to compile them than the amortized\ntime saved by running them in compiled mode](https://answers.ycrash.io/question/what-is-java-forced-compilation-mode--xcomp?q=652)","body":"<a href=\"https://answers.ycrash.io/question/what-is-java-forced-compilation-mode--xcomp?q=652\" rel=\"nofollow noreferrer\">it would cost more time to compile them than the amortized time saved by running them in compiled mode</a>"},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1700501514,"post_id":77517214,"comment_id":136659767,"body_markdown":"@teapot418: That&#39;s not a very good reason to remove the ability to request that behaviour at all.  Perhaps some use-cases and real-time guarantees for the first request after starting, without having to simulate a bunch of calls to important functions first.  (Just one or two calls to get things warmed up, maybe, since even ahead-of-time compiled programs have warm-up effects, and there&#39;s the CPU.)","body":"@teapot418: That&#39;s not a very good reason to remove the ability to request that behaviour at all.  Perhaps some use-cases and real-time guarantees for the first request after starting, without having to simulate a bunch of calls to important functions first.  (Just one or two calls to get things warmed up, maybe, since even ahead-of-time compiled programs have warm-up effects, and there&#39;s the CPU.)"},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1700501669,"post_id":77517214,"comment_id":136659796,"body_markdown":"What does make sense is that compiling without profiling data from the early runs is a new mode that the JVM wouldn&#39;t have to support if the option were removed.  e.g. it has to guess about branch takenness like an AoT compiler.  (Or just make simplistic assumptions: if the JITed asm really tends to be a lot worse than when JITing after some training runs, then it makes sense to at least deprecate the option so people aren&#39;t fooled by the performance numbers they see from it.)","body":"What does make sense is that compiling without profiling data from the early runs is a new mode that the JVM wouldn&#39;t have to support if the option were removed.  e.g. it has to guess about branch takenness like an AoT compiler.  (Or just make simplistic assumptions: if the JITed asm really tends to be a lot worse than when JITing after some training runs, then it makes sense to at least deprecate the option so people aren&#39;t fooled by the performance numbers they see from it.)"},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":3,"creation_date":1700502547,"post_id":77517214,"comment_id":136659947,"body_markdown":"Compiling byte code to native code may not always improve performance. For infrequently-used code a smallish interpreter and concise byte code may fit better into CPU caches than oodles of cold native code.","body":"Compiling byte code to native code may not always improve performance. For infrequently-used code a smallish interpreter and concise byte code may fit better into CPU caches than oodles of cold native code."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":2,"creation_date":1700527091,"post_id":77517214,"comment_id":136663258,"body_markdown":"@teapot418: Interesting point that might be true if the interpreter is fast enough vs. code-fetch bandwidth (or I-cache miss latency after hard-to-predict jumps).  The OP is kind of asking the wrong question about whether that&#39;s faster or not; deprecation is about the option not being recommended for *any* use case, e.g. because it no longer works as designed after changes to the internals don&#39;t properly support it, so maybe it makes asm that&#39;s not like normal JIT would.  The question of whether it&#39;s always faster would be relevant for whether it should be on by default, not deprecation.","body":"@teapot418: Interesting point that might be true if the interpreter is fast enough vs. code-fetch bandwidth (or I-cache miss latency after hard-to-predict jumps).  The OP is kind of asking the wrong question about whether that&#39;s faster or not; deprecation is about the option not being recommended for <i>any</i> use case, e.g. because it no longer works as designed after changes to the internals don&#39;t properly support it, so maybe it makes asm that&#39;s not like normal JIT would.  The question of whether it&#39;s always faster would be relevant for whether it should be on by default, not deprecation."},{"owner":{"account_id":27725738,"reputation":179,"user_id":21165336,"display_name":"Xavier Z."},"score":1,"creation_date":1700530368,"post_id":77517214,"comment_id":136663518,"body_markdown":"@PeterCordes thank you and I have edited post according to comments above. Wish you think it&#39;s appropriate now and can share further insight.","body":"@PeterCordes thank you and I have edited post according to comments above. Wish you think it&#39;s appropriate now and can share further insight."},{"owner":{"account_id":78868,"reputation":337070,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":1,"creation_date":1700535819,"post_id":77517214,"comment_id":136663879,"body_markdown":"The accepted answer you linked on [Java VM tuning - Xbatch and -Xcomp](https://stackoverflow.com/a/3439450) explains some reasons why it&#39;s not always faster: compiling without the profiling information from the early runs can lead to worse asm.  Speculatively treating invariants as constants can simplify the asm a lot.  As for relative size of Java bytecode vs. x86-64 machine code, I don&#39;t know what&#39;s typical.  Hotspot (the JVM you&#39;re talking about) does sometimes unroll loops, but hopefully wouldn&#39;t do that without profiling info.","body":"The accepted answer you linked on <a href=\"https://stackoverflow.com/a/3439450\">Java VM tuning - Xbatch and -Xcomp</a> explains some reasons why it&#39;s not always faster: compiling without the profiling information from the early runs can lead to worse asm.  Speculatively treating invariants as constants can simplify the asm a lot.  As for relative size of Java bytecode vs. x86-64 machine code, I don&#39;t know what&#39;s typical.  Hotspot (the JVM you&#39;re talking about) does sometimes unroll loops, but hopefully wouldn&#39;t do that without profiling info."},{"owner":{"account_id":27725738,"reputation":179,"user_id":21165336,"display_name":"Xavier Z."},"score":0,"creation_date":1700536921,"post_id":77517214,"comment_id":136663947,"body_markdown":"@PeterCordes &#39;Speculatively treating invariants as constants can simplify the asm a lot.&#39; This sounds like a solid answer to me, and it is not clear from the linked post which just described in a general way without detail. Could you share this line with a new answer? I believe it&#39;s valuable for Java Programmers who care performance but not very familiar with asm procedure.","body":"@PeterCordes &#39;Speculatively treating invariants as constants can simplify the asm a lot.&#39; This sounds like a solid answer to me, and it is not clear from the linked post which just described in a general way without detail. Could you share this line with a new answer? I believe it&#39;s valuable for Java Programmers who care performance but not very familiar with asm procedure."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1700579043,"post_id":77517214,"comment_id":136670375,"body_markdown":"Compiling only pays off if executing the compiled is faster than interpreting the code (which is not always given) *and* this gain multiplied with the number of executions of the code is higher than the time needed to compile the code. In other words, code executed only a few times or even only once, like initialization code, is very unlikely to benefit from JIT compilation, even if we assume the compilation to produce perfectly optimized results.","body":"Compiling only pays off if executing the compiled is faster than interpreting the code (which is not always given) <i>and</i> this gain multiplied with the number of executions of the code is higher than the time needed to compile the code. In other words, code executed only a few times or even only once, like initialization code, is very unlikely to benefit from JIT compilation, even if we assume the compilation to produce perfectly optimized results."}],"answers":[{"tags":[],"owner":{"account_id":27725738,"reputation":179,"user_id":21165336,"display_name":"Xavier Z."},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700549476,"creation_date":1700545278,"answer_id":77520526,"question_id":77517214,"body_markdown":"Thanks to all insight from above comments, the answer is no, because of the potential of the JIT compiler which is one form of [dynamic compilation][1].\r\n\r\nDynamic compilation makes it possible to utilize runtime information generating performant native code. \r\n\r\nFor example, following mechanism is applicable for hot pot compilation:\r\n  1. Inlining: Small, frequently called functions are inlined into the calling site to reduce function call overhead.\r\n  2. Loop Optimizations: Techniques like loop unrolling (reducing the number of iterations) and loop peeling (handling special cases outside the loop) are used to minimize loop overhead.\r\n  3. Peephole Optimization: Optimizes small sections of the generated machine code to increase efficiency, often by replacing instruction sequences.\r\n  4. Register Allocation: Frequently used variables are stored in CPU registers instead of memory to speed up access.\r\n\r\n\r\nHope this post helps java programmers get a better understand of JIT copmiler.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Dynamic_compilation","title":"Does Compiling Java to Native Code with -Xcomp Always Enhance Performance?","body":"<p>Thanks to all insight from above comments, the answer is no, because of the potential of the JIT compiler which is one form of <a href=\"https://en.wikipedia.org/wiki/Dynamic_compilation\" rel=\"nofollow noreferrer\">dynamic compilation</a>.</p>\n<p>Dynamic compilation makes it possible to utilize runtime information generating performant native code.</p>\n<p>For example, following mechanism is applicable for hot pot compilation:</p>\n<ol>\n<li>Inlining: Small, frequently called functions are inlined into the calling site to reduce function call overhead.</li>\n<li>Loop Optimizations: Techniques like loop unrolling (reducing the number of iterations) and loop peeling (handling special cases outside the loop) are used to minimize loop overhead.</li>\n<li>Peephole Optimization: Optimizes small sections of the generated machine code to increase efficiency, often by replacing instruction sequences.</li>\n<li>Register Allocation: Frequently used variables are stored in CPU registers instead of memory to speed up access.</li>\n</ol>\n<p>Hope this post helps java programmers get a better understand of JIT copmiler.</p>\n"}],"owner":{"account_id":27725738,"reputation":179,"user_id":21165336,"display_name":"Xavier Z."},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1700549476,"creation_date":1700495030,"question_id":77517214,"body_markdown":"In an [Oracle post][1], it&#39;s mentioned that C2 compiles hotspots into efficient native code, storing it in the code cache. A [previous discussion][2] pointed out that using `-Xcomp` compiles all code into native code, but this might reduce overall performance.\r\n\r\nThis leaves me puzzled. Wouldn&#39;t running entirely on native code be the most efficient? Even if, as some comments suggest, the &#39;cold&#39; native code is bulkier than compact bytecode (which generally isn&#39;t the case, as [this post][3] indicates), shouldn&#39;t it still be viable, considering that C/C++ operates exclusively with native code?\r\n\r\nLooking forward to a detailed explanation with appreciation\r\n\r\n\r\n  [1]: https://blogs.oracle.com/javamagazine/post/the-best-hotspot-jvm-options-and-switches-for-java-11-through-java-17\r\n  [2]: https://stackoverflow.com/questions/3369791/java-vm-tuning-xbatch-and-xcomp\r\n  [3]: https://www.javatpoint.com/difference-between-byte-code-and-machine-code-in-java#:~:text=Byte%20code%20and%20machine%20code%20are%20two%20important%20terms%20used,executed%20by%20the%20computer&#39;s%20processor.","title":"Does Compiling Java to Native Code with -Xcomp Always Enhance Performance?","body":"<p>In an <a href=\"https://blogs.oracle.com/javamagazine/post/the-best-hotspot-jvm-options-and-switches-for-java-11-through-java-17\" rel=\"nofollow noreferrer\">Oracle post</a>, it's mentioned that C2 compiles hotspots into efficient native code, storing it in the code cache. A <a href=\"https://stackoverflow.com/questions/3369791/java-vm-tuning-xbatch-and-xcomp\">previous discussion</a> pointed out that using <code>-Xcomp</code> compiles all code into native code, but this might reduce overall performance.</p>\n<p>This leaves me puzzled. Wouldn't running entirely on native code be the most efficient? Even if, as some comments suggest, the 'cold' native code is bulkier than compact bytecode (which generally isn't the case, as <a href=\"https://www.javatpoint.com/difference-between-byte-code-and-machine-code-in-java#:%7E:text=Byte%20code%20and%20machine%20code%20are%20two%20important%20terms%20used,executed%20by%20the%20computer%27s%20processor.\" rel=\"nofollow noreferrer\">this post</a> indicates), shouldn't it still be viable, considering that C/C++ operates exclusively with native code?</p>\n<p>Looking forward to a detailed explanation with appreciation</p>\n"},{"tags":["java","spring-batch"],"answers":[{"comments":[{"owner":{"account_id":3011691,"reputation":711,"user_id":2555056,"display_name":"Anjan Biswas"},"score":0,"creation_date":1700543662,"post_id":73104250,"comment_id":136664461,"body_markdown":"In this way, can I get JobId and StepId on the itemWriter()?\nI need to validate the data on the itemWriter() and if the validation fails I need to put an error log that needs to be required JobId and StepId.","body":"In this way, can I get JobId and StepId on the itemWriter()? I need to validate the data on the itemWriter() and if the validation fails I need to put an error log that needs to be required JobId and StepId."},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1700556834,"post_id":73104250,"comment_id":136666148,"body_markdown":"@AnjanBiswas You can apply the same idea to the item writer by making it step-scoped as well.","body":"@AnjanBiswas You can apply the same idea to the item writer by making it step-scoped as well."},{"owner":{"account_id":3011691,"reputation":711,"user_id":2555056,"display_name":"Anjan Biswas"},"score":0,"creation_date":1700732126,"post_id":73104250,"comment_id":136691410,"body_markdown":"I do not implement ItemWriteListener. I just @StepScope on ItemWriter and use &quot;#{stepExecution.jobExecution.executionContext}&quot;\nlike: public ItemWriter&lt;LeadInfo&gt; leadInfoWriter(@Value(&quot;#{stepExecution.jobExecution.executionContext}&quot;) ExecutionContext stepExecutionContext)   --- but getting &quot;stepExecutionContext&quot; value is null.\nwhat mistake here? could you please explain?","body":"I do not implement ItemWriteListener. I just @StepScope on ItemWriter and use &quot;#{stepExecution.jobExecution.executionContext}&quot; like: public ItemWriter&lt;LeadInfo&gt; leadInfoWriter(@Value(&quot;#{stepExecution.jobExecution.executio&zwnj;&#8203;nContext}&quot;) ExecutionContext stepExecutionContext)   --- but getting &quot;stepExecutionContext&quot; value is null. what mistake here? could you please explain?"},{"owner":{"account_id":3011691,"reputation":711,"user_id":2555056,"display_name":"Anjan Biswas"},"score":0,"creation_date":1700735199,"post_id":73104250,"comment_id":136692037,"body_markdown":"implements StepExecutionListener solve my problem. Thank you all","body":"implements StepExecutionListener solve my problem. Thank you all"},{"owner":{"account_id":3011691,"reputation":711,"user_id":2555056,"display_name":"Anjan Biswas"},"score":0,"creation_date":1700741373,"post_id":73104250,"comment_id":136693146,"body_markdown":"I save stepId and jobId to global variables with overwriding beforeStep. But it will set to null after next itemProcessor. how can I save stepId and jobId with global variable?","body":"I save stepId and jobId to global variables with overwriding beforeStep. But it will set to null after next itemProcessor. how can I save stepId and jobId with global variable?"},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":1,"creation_date":1700751766,"post_id":73104250,"comment_id":136695055,"body_markdown":"@AnjanBiswas This seems like a different case. Please open a question and share your code and I will try to help.","body":"@AnjanBiswas This seems like a different case. Please open a question and share your code and I will try to help."},{"owner":{"account_id":3011691,"reputation":711,"user_id":2555056,"display_name":"Anjan Biswas"},"score":0,"creation_date":1700768190,"post_id":73104250,"comment_id":136697620,"body_markdown":"solved using JobInstance. Also, try to ask questions for better solutions.","body":"solved using JobInstance. Also, try to ask questions for better solutions."}],"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700548464,"creation_date":1658725349,"answer_id":73104250,"question_id":73097484,"body_markdown":"You can use a step scoped listener and in inject the job/step name in it. Here is a quick example:\r\n\r\n```\r\npublic class WriterListener implements ItemWriteListener {\r\n\r\n\r\n    private static final PlatformLogger logger = PlatformLogger.getLogger(WriterListener.class);\r\n\r\n    private String stepName;\r\n\r\n    public WriterListener(String stepName) {\r\n        stepName = stepName;\r\n    }\r\n\r\n    @Override\r\n    public void beforeWrite(List list) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void afterWrite(List list) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onWriteError(Exception e, List list) {\r\n\r\n        // use this.stepName in the log message here\r\n        logger.error(&quot;Exception occurred while writing {}&quot;, Arrays.toString(list.toArray()), e);\r\n    }\r\n}\r\n```\r\n\r\nYou can declare your listener as a scoped bean as follows:\r\n\r\n```\r\n@Bean\r\n@StepScope\r\npublic WriterListener writerListener(@Value(&quot;#{stepExecution.stepName}&quot;) String stepName) {\r\n    return new WriterListener(stepName);\r\n}\r\n```\r\n\r\nOnce this is done, you can register the listener in your step as follows:\r\n\r\n```\r\n@Bean\r\npublic Job job(JobBuilderFactory jobs, StepBuilderFactory steps) {\r\n    return jobs.get(&quot;job&quot;)\r\n            .start(steps.get(&quot;step&quot;)\r\n                    .&lt;Integer, Integer&gt;chunk(5)\r\n                    .reader(itemReader())\r\n                    .processor(itemProcessor())\r\n                    .writer(itemWriter())\r\n                    .listener(writerListener(null))\r\n                    .build())\r\n            .build();\r\n}\r\n```","title":"How do i get job name or step name in ItemWriteListener implemented class","body":"<p>You can use a step scoped listener and in inject the job/step name in it. Here is a quick example:</p>\n<pre><code>public class WriterListener implements ItemWriteListener {\n\n\n    private static final PlatformLogger logger = PlatformLogger.getLogger(WriterListener.class);\n\n    private String stepName;\n\n    public WriterListener(String stepName) {\n        stepName = stepName;\n    }\n\n    @Override\n    public void beforeWrite(List list) {\n\n    }\n\n    @Override\n    public void afterWrite(List list) {\n\n    }\n\n    @Override\n    public void onWriteError(Exception e, List list) {\n\n        // use this.stepName in the log message here\n        logger.error(&quot;Exception occurred while writing {}&quot;, Arrays.toString(list.toArray()), e);\n    }\n}\n</code></pre>\n<p>You can declare your listener as a scoped bean as follows:</p>\n<pre><code>@Bean\n@StepScope\npublic WriterListener writerListener(@Value(&quot;#{stepExecution.stepName}&quot;) String stepName) {\n    return new WriterListener(stepName);\n}\n</code></pre>\n<p>Once this is done, you can register the listener in your step as follows:</p>\n<pre><code>@Bean\npublic Job job(JobBuilderFactory jobs, StepBuilderFactory steps) {\n    return jobs.get(&quot;job&quot;)\n            .start(steps.get(&quot;step&quot;)\n                    .&lt;Integer, Integer&gt;chunk(5)\n                    .reader(itemReader())\n                    .processor(itemProcessor())\n                    .writer(itemWriter())\n                    .listener(writerListener(null))\n                    .build())\n            .build();\n}\n</code></pre>\n"}],"owner":{"account_id":25882147,"reputation":1,"user_id":19610986,"display_name":"Dharmendra kannaujiya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":469,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700548464,"creation_date":1658657690,"question_id":73097484,"body_markdown":"This is my implementation and i want to print job name or step name as well with error message.\r\nHow can I do this?\r\n\r\n\r\n    public class WriterListener implements ItemWriteListener {\r\n    \r\n        private static final PlatformLogger logger = PlatformLogger.getLogger(WriterListener.class);\r\n    \r\n        @Override\r\n        public void beforeWrite(List list) {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void afterWrite(List list) {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void onWriteError(Exception e, List list) {\r\n            logger.error(&quot;Exception occurred while writing {}&quot;, Arrays.toString(list.toArray()), e);\r\n        }\r\n    }\r\n\r\n","title":"How do i get job name or step name in ItemWriteListener implemented class","body":"<p>This is my implementation and i want to print job name or step name as well with error message.\nHow can I do this?</p>\n<pre><code>public class WriterListener implements ItemWriteListener {\n\n    private static final PlatformLogger logger = PlatformLogger.getLogger(WriterListener.class);\n\n    @Override\n    public void beforeWrite(List list) {\n\n    }\n\n    @Override\n    public void afterWrite(List list) {\n\n    }\n\n    @Override\n    public void onWriteError(Exception e, List list) {\n        logger.error(&quot;Exception occurred while writing {}&quot;, Arrays.toString(list.toArray()), e);\n    }\n}\n</code></pre>\n"},{"tags":["java","html","jasper-reports"],"comments":[{"owner":{"account_id":24810,"reputation":44154,"user_id":63309,"accept_rate":70,"display_name":"Tom"},"score":0,"creation_date":1240498084,"post_id":300383,"comment_id":11351255,"body_markdown":"Have you tried using [iReport](http://jasperforge.org/plugins/project/project_home.php?group_id=83). Its an IDE for writing JasperReports. It could make your life simpler.","body":"Have you tried using <a href=\"http://jasperforge.org/plugins/project/project_home.php?group_id=83\" rel=\"nofollow noreferrer\">iReport</a>. Its an IDE for writing JasperReports. It could make your life simpler."},{"owner":{"account_id":1073482,"reputation":10989,"user_id":1072187,"accept_rate":36,"display_name":"John Little"},"score":0,"creation_date":1410183191,"post_id":300383,"comment_id":40218061,"body_markdown":"I have the same issue.  If you want columns spread evenly across the avaiable width, its not possible.  In Jasper Stuido, when you create a table with say 10 columns, it sqashes the columns into a tiny area with a width of just 22px.  You have to then edite every cell and manually change the width to some value you calculate- it takes hours.  Then when you want to change it.. for this reason I NEVER use tables any more. I use subreportsfor just about everything, as you can change their width by dragging.","body":"I have the same issue.  If you want columns spread evenly across the avaiable width, its not possible.  In Jasper Stuido, when you create a table with say 10 columns, it sqashes the columns into a tiny area with a width of just 22px.  You have to then edite every cell and manually change the width to some value you calculate- it takes hours.  Then when you want to change it.. for this reason I NEVER use tables any more. I use subreportsfor just about everything, as you can change their width by dragging."}],"answers":[{"comments":[{"owner":{"account_id":33772,"reputation":484,"user_id":94841,"accept_rate":67,"display_name":"al."},"score":0,"creation_date":1240497510,"post_id":306816,"comment_id":56341315,"body_markdown":"Agree with Jamie Love. But I would apply his suggestion on the columnHeader tag, for the property to apply for the whole column.","body":"Agree with Jamie Love. But I would apply his suggestion on the columnHeader tag, for the property to apply for the whole column."},{"owner":{"account_id":452305,"reputation":9137,"user_id":848668,"accept_rate":94,"display_name":"br3nt"},"score":0,"creation_date":1467250660,"post_id":306816,"comment_id":63658719,"body_markdown":"Awesome, thanks!!  I found that when the column stretches to fit the contents there is no padding next to the adjacent column.  Adding `&lt;box padding=&quot;10&quot;/&gt;` within the `textField` element fixed that issue as suggested by [this SO answer](http://stackoverflow.com/a/14284593/848668)","body":"Awesome, thanks!!  I found that when the column stretches to fit the contents there is no padding next to the adjacent column.  Adding <code>&lt;box padding=&quot;10&quot;&#47;&gt;</code> within the <code>textField</code> element fixed that issue as suggested by <a href=\"http://stackoverflow.com/a/14284593/848668\">this SO answer</a>"}],"tags":[],"owner":{"account_id":13547,"reputation":5468,"user_id":27308,"accept_rate":73,"display_name":"Jamie Love"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1549892586,"creation_date":1227214120,"answer_id":306816,"question_id":300383,"body_markdown":"While not perfect, you could flag the field to stretch with overflow. This would at least give you all the data. In your jrxml file it would be similar to:\r\n\r\n    &lt;textField isStretchWithOverflow=&quot;true&quot; hyperlinkType=&quot;None&quot;&gt;\r\n        &lt;reportElement style=&quot;Report Sub-Title&quot; x=&quot;0&quot; y=&quot;84&quot; width=&quot;802&quot; height=&quot;20&quot;/&gt;\r\n        &lt;textElement/&gt;\r\n        &lt;textFieldExpression class=&quot;java.lang.String&quot;&gt;\r\n            &lt;![CDATA[&quot;For the period ...]]&gt;\r\n        &lt;/textFieldExpression&gt;\r\n    &lt;/textField&gt;\r\n\r\nI&#39;m afraid I don&#39;t know of any feature of Jasper reports that would allow the dynamic resizing of column widths - It is probably one of those things that makes sense for HTML but little sense for other output formats such as PDF.","title":"Dynamic column cell width","body":"<p>While not perfect, you could flag the field to stretch with overflow. This would at least give you all the data. In your jrxml file it would be similar to:</p>\n\n<pre><code>&lt;textField isStretchWithOverflow=\"true\" hyperlinkType=\"None\"&gt;\n    &lt;reportElement style=\"Report Sub-Title\" x=\"0\" y=\"84\" width=\"802\" height=\"20\"/&gt;\n    &lt;textElement/&gt;\n    &lt;textFieldExpression class=\"java.lang.String\"&gt;\n        &lt;![CDATA[\"For the period ...]]&gt;\n    &lt;/textFieldExpression&gt;\n&lt;/textField&gt;\n</code></pre>\n\n<p>I'm afraid I don't know of any feature of Jasper reports that would allow the dynamic resizing of column widths - It is probably one of those things that makes sense for HTML but little sense for other output formats such as PDF.</p>\n"},{"comments":[{"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"score":3,"creation_date":1302196291,"post_id":1374076,"comment_id":6355392,"body_markdown":"@Carlos: That will cause the cell to stretch in height, not width.","body":"@Carlos: That will cause the cell to stretch in height, not width."}],"tags":[],"owner":{"display_name":"anotherchrisberry"},"comment_count":1,"down_vote_count":5,"up_vote_count":2,"is_accepted":false,"score":-3,"last_activity_date":1346332412,"creation_date":1251991118,"answer_id":1374076,"question_id":300383,"body_markdown":"In iReport there is an option called &quot;Stretch Type&quot;. Select &quot;Relative to Band Height&quot;","title":"Dynamic column cell width","body":"<p>In iReport there is an option called \"Stretch Type\". Select \"Relative to Band Height\"</p>\n"},{"tags":[],"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1607618465,"creation_date":1302196412,"answer_id":5584936,"question_id":300383,"body_markdown":"The developers made a conscious decision to not allow cell width to stretch. For columns to change their width based on the content, it must be done through programming. A helpful tool: [DynamicJasper][1].\r\n\r\n&gt; DynamicJasper creates reports\r\n&gt; dynamically, defining at runtime the\r\n&gt; columns, column width (auto width),\r\n&gt; groups, variables, fonts, charts,\r\n&gt; crosstabs, sub reports (that can also\r\n&gt; be dynamic), page size and everything\r\n&gt; else that you can define at design\r\n&gt; time.\r\n\r\n\r\nThe [JasperReports forum](https://community.jaspersoft.com/questions/522554/how-dynamically-increaze-column-width) and [DynamicJasper HOW-TO](http://dynamicjasper.com/2010/10/06/how-to-create-bar-code-columns/) both have examples of automatic (dynamic) column widths.\r\n\r\n``` java\r\nFastReportBuilder drb = new FastReportBuilder();\r\ndrb.addColumn(&quot;State&quot;, &quot;state&quot;, String.class.getName(),20)\r\n        .addColumn(&quot;Branch&quot;, &quot;branch&quot;, String.class.getName(),30)\r\n        .addColumn(&quot;Quantity&quot;, &quot;quantity&quot;, Long.class.getName(),60,true)\r\n        .addColumn(&quot;Amount&quot;, &quot;amount&quot;, Float.class.getName(),70,true)\r\n        .addBarcodeColumn(&quot;Bar-Code&quot;, &quot;amount&quot;, Long.class.getName(), BarcodeTypes.USD3, true,\r\nfalse,null, 100, true, ImageScaleMode.FILL, null)\r\n        .addGroups(1)\r\n        .setDetailHeight(30)\r\n        .setTitle(&quot;November 2006 sales report&quot;)\r\n        .setSubtitle(&quot;This report was generated at &quot; + new Date())\r\n        .setUseFullPageWidth(true);     \r\n\r\nDynamicReport dr = drb.build();\r\n```\r\n\r\nPassing in `true` when calling `addColumn` indicates to use a _fixed_ width. Leaving the parameter off or passing `false` will set the column width dynamically. You may also have to call `setUseFullPageWidth( true )` for the auto widths to activate, but I&#39;m not sure on this point.\r\n\r\n\r\n  [1]: http://dynamicjasper.com/","title":"Dynamic column cell width","body":"<p>The developers made a conscious decision to not allow cell width to stretch. For columns to change their width based on the content, it must be done through programming. A helpful tool: <a href=\"http://dynamicjasper.com/\" rel=\"nofollow noreferrer\">DynamicJasper</a>.</p>\n<blockquote>\n<p>DynamicJasper creates reports\ndynamically, defining at runtime the\ncolumns, column width (auto width),\ngroups, variables, fonts, charts,\ncrosstabs, sub reports (that can also\nbe dynamic), page size and everything\nelse that you can define at design\ntime.</p>\n</blockquote>\n<p>The <a href=\"https://community.jaspersoft.com/questions/522554/how-dynamically-increaze-column-width\" rel=\"nofollow noreferrer\">JasperReports forum</a> and <a href=\"http://dynamicjasper.com/2010/10/06/how-to-create-bar-code-columns/\" rel=\"nofollow noreferrer\">DynamicJasper HOW-TO</a> both have examples of automatic (dynamic) column widths.</p>\n<pre class=\"lang-java prettyprint-override\"><code>FastReportBuilder drb = new FastReportBuilder();\ndrb.addColumn(&quot;State&quot;, &quot;state&quot;, String.class.getName(),20)\n        .addColumn(&quot;Branch&quot;, &quot;branch&quot;, String.class.getName(),30)\n        .addColumn(&quot;Quantity&quot;, &quot;quantity&quot;, Long.class.getName(),60,true)\n        .addColumn(&quot;Amount&quot;, &quot;amount&quot;, Float.class.getName(),70,true)\n        .addBarcodeColumn(&quot;Bar-Code&quot;, &quot;amount&quot;, Long.class.getName(), BarcodeTypes.USD3, true,\nfalse,null, 100, true, ImageScaleMode.FILL, null)\n        .addGroups(1)\n        .setDetailHeight(30)\n        .setTitle(&quot;November 2006 sales report&quot;)\n        .setSubtitle(&quot;This report was generated at &quot; + new Date())\n        .setUseFullPageWidth(true);     \n\nDynamicReport dr = drb.build();\n</code></pre>\n<p>Passing in <code>true</code> when calling <code>addColumn</code> indicates to use a <em>fixed</em> width. Leaving the parameter off or passing <code>false</code> will set the column width dynamically. You may also have to call <code>setUseFullPageWidth( true )</code> for the auto widths to activate, but I'm not sure on this point.</p>\n"}],"owner":{"account_id":1921,"reputation":185682,"user_id":2648,"accept_rate":52,"display_name":"D&#243;nal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47739,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1700548167,"creation_date":1227047551,"question_id":300383,"body_markdown":"I have some Jasper reports which are displayed in HTML format. I would like the width of the columns in the HTML tables to automatically resize to fit the content of the widest cell (in that column), such that all the data is displayed.\r\n\r\nCurrently this does not happen because the HTML generated by Jasper specifies fixed widths for the &amp;lt;table&amp;gt; and some &amp;lt;td&amp;gt; elements, e.g.\r\n\r\n    &lt;td style=&quot;width: 20px; height: 17px;&quot;&gt;\r\n      &lt;span style=&quot;font-family: Arial; font-size: 11px;&quot;&gt;foo-bar-baz@examp&lt;/span&gt;\r\n    &lt;/td&gt;\r\n\r\nI can&#39;t simply remove all these width properties (using JavaScript), because (as shown in the HTML above) any data that would be hidden when using these widths is not even returned to the client-side\r\n\r\nCheers,\r\nDon\r\n","title":"Dynamic column cell width","body":"<p>I have some Jasper reports which are displayed in HTML format. I would like the width of the columns in the HTML tables to automatically resize to fit the content of the widest cell (in that column), such that all the data is displayed.</p>\n\n<p>Currently this does not happen because the HTML generated by Jasper specifies fixed widths for the &lt;table&gt; and some &lt;td&gt; elements, e.g.</p>\n\n<pre><code>&lt;td style=\"width: 20px; height: 17px;\"&gt;\n  &lt;span style=\"font-family: Arial; font-size: 11px;\"&gt;foo-bar-baz@examp&lt;/span&gt;\n&lt;/td&gt;\n</code></pre>\n\n<p>I can't simply remove all these width properties (using JavaScript), because (as shown in the HTML above) any data that would be hidden when using these widths is not even returned to the client-side</p>\n\n<p>Cheers,\nDon</p>\n"},{"tags":["java","maven","ant","bytecode"],"comments":[{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":1,"creation_date":1508142613,"post_id":46765429,"comment_id":80477228,"body_markdown":"There is one thing I missed: The very first line in the Maven version is &quot;Compiled from &quot;KvRLRechBetragEuroComparator.java&quot;. This line is missing in the Ant version.","body":"There is one thing I missed: The very first line in the Maven version is &quot;Compiled from &quot;KvRLRechBetragEuroComparator.java&quot;. This line is missing in the Ant version."},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1508145281,"post_id":46765429,"comment_id":80478715,"body_markdown":"I&#39;ve updated my answer based in this comment - it&#39;s likely that you haven&#39;t specified the `debug` parameter to the javac ant task / maven-java-compiler plugin and the default in ant is off while in maven it is on.","body":"I&#39;ve updated my answer based in this comment - it&#39;s likely that you haven&#39;t specified the <code>debug</code> parameter to the javac ant task / maven-java-compiler plugin and the default in ant is off while in maven it is on."}],"answers":[{"comments":[{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1508141184,"post_id":46765565,"comment_id":80476429,"body_markdown":"the real question is why would that change, if `javac` version has not changed. I like the question","body":"the real question is why would that change, if <code>javac</code> version has not changed. I like the question"},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1508141487,"post_id":46765565,"comment_id":80476586,"body_markdown":"The rest of the line is totally identical. Two things are strange: Firstly, Ant uses the number 1,2,3,4,5, but Maven uses 21,29,30,35,48. Secondly, we converted more than 1000 (really) Java projects without a Byte Code difference, but this project has this special difference in just one class.","body":"The rest of the line is totally identical. Two things are strange: Firstly, Ant uses the number 1,2,3,4,5, but Maven uses 21,29,30,35,48. Secondly, we converted more than 1000 (really) Java projects without a Byte Code difference, but this project has this special difference in just one class."}],"tags":[],"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1508145232,"creation_date":1508140985,"answer_id":46765565,"question_id":46765429,"body_markdown":"The #29 refers to an index in the constant table that describes the method being invoked. It would have been better if you had pasted the *full* output of `javap -c`, because the comment at the end of the line indicates the actual method descriptor.\r\n\r\nExample of `javap -c` on an invocation of an instance method `test` in class `Z`:\r\n\r\n       7: invokevirtual #19                 // Method snippet/Z.test:()V\r\n\r\nYou can ignore the # number, as long as the method descriptor in the comment is the same.\r\n\r\nWhy\r\n---\r\nAs to the &quot;why&quot; question, it is very likely caused by the debug in the ant and maven compiler task/plugin settings.\r\n\r\nBy default, the maven-compiler-plugin compiles with the `debug` configuration option set to `true`, which will attach among other the name of the source file, and thing like line number tables and local variable names.\r\n\r\nhttps://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html\r\n\r\nBy default, the ant java compiler has this set to `false`.\r\n\r\nhttps://ant.apache.org/manual/Tasks/javac.html\r\n\r\nTo compare and check, set the `debug` parameter of the Ant Javac task to `true` and see if that makes the generated .class files the same.","title":"Byte code difference in #-values after change Ant to Maven","body":"<p>The #29 refers to an index in the constant table that describes the method being invoked. It would have been better if you had pasted the <em>full</em> output of <code>javap -c</code>, because the comment at the end of the line indicates the actual method descriptor.</p>\n\n<p>Example of <code>javap -c</code> on an invocation of an instance method <code>test</code> in class <code>Z</code>:</p>\n\n<pre><code>   7: invokevirtual #19                 // Method snippet/Z.test:()V\n</code></pre>\n\n<p>You can ignore the # number, as long as the method descriptor in the comment is the same.</p>\n\n<h2>Why</h2>\n\n<p>As to the \"why\" question, it is very likely caused by the debug in the ant and maven compiler task/plugin settings.</p>\n\n<p>By default, the maven-compiler-plugin compiles with the <code>debug</code> configuration option set to <code>true</code>, which will attach among other the name of the source file, and thing like line number tables and local variable names.</p>\n\n<p><a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html</a></p>\n\n<p>By default, the ant java compiler has this set to <code>false</code>.</p>\n\n<p><a href=\"https://ant.apache.org/manual/Tasks/javac.html\" rel=\"nofollow noreferrer\">https://ant.apache.org/manual/Tasks/javac.html</a></p>\n\n<p>To compare and check, set the <code>debug</code> parameter of the Ant Javac task to <code>true</code> and see if that makes the generated .class files the same.</p>\n"},{"tags":[],"owner":{"account_id":25223771,"reputation":61,"user_id":19059901,"display_name":"Heisenbug"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700548063,"creation_date":1700548063,"answer_id":77520728,"question_id":46765429,"body_markdown":"Changes are because ANT keeps debug mode to false for its javac command while maven keeps it true.\r\n\r\nIf you want ANT to produce same .class file or same bytecode as javac in cmd or maven, you need to add one more flag into javac of ANT script.\r\n\r\n&gt; debug = &quot;true&quot;","title":"Byte code difference in #-values after change Ant to Maven","body":"<p>Changes are because ANT keeps debug mode to false for its javac command while maven keeps it true.</p>\n<p>If you want ANT to produce same .class file or same bytecode as javac in cmd or maven, you need to add one more flag into javac of ANT script.</p>\n<blockquote>\n<p>debug = &quot;true&quot;</p>\n</blockquote>\n"}],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":46765565,"answer_count":2,"score":2,"last_activity_date":1700548063,"creation_date":1508140479,"question_id":46765429,"body_markdown":"I changed the compilation of a project from Ant to Maven. We still use Java 1.7.0_80. The ByteCode of all classes stayed the same except for a Comparator class. I disassembled the class with `javap -c`. The only differences are in #-values, e.g.:\r\n\r\nbefore: `invokevirtual #2`\r\n\r\nafter: `invokevirtual #29`\r\n\r\nWhat do these #-values mean? Is this a functional difference or just a difference in naming?\r\n\r\nEDIT: The first method in Bytecode before and after:\r\n\r\n\t  public de.continentale.kvrl.model.comp.KvRLRechBetragEuroComparator();\r\n\t\tCode:\r\n\t\t   0: aload_0       \r\n\t\t   1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\r\n\t\t   4: return        \r\n\r\n\r\n\t  public de.continentale.kvrl.model.comp.KvRLRechBetragEuroComparator();\r\n\t\tCode:\r\n\t\t   0: aload_0       \r\n\t\t   1: invokespecial #21                 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\r\n\t\t   4: return   \r\n\r\n     \r\n\r\n","title":"Byte code difference in #-values after change Ant to Maven","body":"<p>I changed the compilation of a project from Ant to Maven. We still use Java 1.7.0_80. The ByteCode of all classes stayed the same except for a Comparator class. I disassembled the class with <code>javap -c</code>. The only differences are in #-values, e.g.:</p>\n\n<p>before: <code>invokevirtual #2</code></p>\n\n<p>after: <code>invokevirtual #29</code></p>\n\n<p>What do these #-values mean? Is this a functional difference or just a difference in naming?</p>\n\n<p>EDIT: The first method in Bytecode before and after:</p>\n\n<pre><code>  public de.continentale.kvrl.model.comp.KvRLRechBetragEuroComparator();\n    Code:\n       0: aload_0       \n       1: invokespecial #1                  // Method java/lang/Object.\"&lt;init&gt;\":()V\n       4: return        \n\n\n  public de.continentale.kvrl.model.comp.KvRLRechBetragEuroComparator();\n    Code:\n       0: aload_0       \n       1: invokespecial #21                 // Method java/lang/Object.\"&lt;init&gt;\":()V\n       4: return   \n</code></pre>\n"},{"tags":["java","apache-flink","flink-streaming","pyflink"],"comments":[{"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1700574278,"post_id":77520698,"comment_id":136669390,"body_markdown":"What version of Flink are you using for these experiments?","body":"What version of Flink are you using for these experiments?"},{"owner":{"account_id":29852769,"reputation":11,"user_id":22878257,"display_name":"yqchen"},"score":0,"creation_date":1700578576,"post_id":77520698,"comment_id":136670294,"body_markdown":"version 1.16, and Flink is deployed via Docker","body":"version 1.16, and Flink is deployed via Docker"}],"owner":{"account_id":29852769,"reputation":11,"user_id":22878257,"display_name":"yqchen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700547732,"creation_date":1700547732,"question_id":77520698,"body_markdown":"I meet a scenario to deploy Flink on some IoT devices, so what I concern about is the limited resources on these platforms, the default configuration results in unacceptable memory usage to me. I&#39;m trying to modify the memory configuration(of taskmanager) in `flink-conf.yaml` according to official docs and some blogs.\r\nHere are what I found and was confused:\r\n\r\n - If I set the `Task Heap` to 0 the jobs can still run normally, and results through operators still remain correct. Are  `Task Heap` and `Framework Heap` shared so the tasks can utilize heap memory other than `Task Heap`?\r\n\r\n\r\n - I also set the `Managed Memory` to 0 since I&#39;m not using RocksDB as state backend, so the intermediate states should be stored on the heap memory. I found an interesting thing here: the size of `Task Heap` configured in `flink-conf.yaml` is related to the runtime memory usage of taskmanager. For example, by default it&#39;s set to 256MB, when a job is running the memory usage of taskmanager can be up to 800MB. When I set it to a small number instead, like 10MB, memory usage of taskmanager would be at most 500MB. And from the Flink UI I noticed that JVM would run GC much more frequently when `Task Heap` is small. I can&#39;t find corresponding explain from Flink&#39;s docs. I guess there is a space to store states somewhere on the heap, the space size is related to `Task Heap`, and every time it&#39;s fullfilled the JVM will call GC.\r\n - About the metrics shown on Flink UI, the part of `Network` is reflected in real memory occupation even though it&#39;s &quot;not actually used&quot;. For example, if `Network` is set to 100MB, taskmanager will take 90MB more memory compared to when it&#39;s set to 10MB, but most of time the usage of  `Network` is less than 1MB.\r\n - I&#39;m also wondering whether the memory occupied by taskmanager, as a JVM process, is exactly or approximatively equal to `Heap` + `Non-Heap` + `Outside JVM Memory`? When there is no job running I think it&#39;s reasonable, but after a job is submitted, taskmanager will occupy a few hundred MBs more memory but I can&#39;s find corresponding terms on Flink UI.\r\n\r\nMany thanks if you can explain my problems above.\r\n\r\n ","title":"Optimizing Flink&#39;s memory usage","body":"<p>I meet a scenario to deploy Flink on some IoT devices, so what I concern about is the limited resources on these platforms, the default configuration results in unacceptable memory usage to me. I'm trying to modify the memory configuration(of taskmanager) in <code>flink-conf.yaml</code> according to official docs and some blogs.\nHere are what I found and was confused:</p>\n<ul>\n<li><p>If I set the <code>Task Heap</code> to 0 the jobs can still run normally, and results through operators still remain correct. Are  <code>Task Heap</code> and <code>Framework Heap</code> shared so the tasks can utilize heap memory other than <code>Task Heap</code>?</p>\n</li>\n<li><p>I also set the <code>Managed Memory</code> to 0 since I'm not using RocksDB as state backend, so the intermediate states should be stored on the heap memory. I found an interesting thing here: the size of <code>Task Heap</code> configured in <code>flink-conf.yaml</code> is related to the runtime memory usage of taskmanager. For example, by default it's set to 256MB, when a job is running the memory usage of taskmanager can be up to 800MB. When I set it to a small number instead, like 10MB, memory usage of taskmanager would be at most 500MB. And from the Flink UI I noticed that JVM would run GC much more frequently when <code>Task Heap</code> is small. I can't find corresponding explain from Flink's docs. I guess there is a space to store states somewhere on the heap, the space size is related to <code>Task Heap</code>, and every time it's fullfilled the JVM will call GC.</p>\n</li>\n<li><p>About the metrics shown on Flink UI, the part of <code>Network</code> is reflected in real memory occupation even though it's &quot;not actually used&quot;. For example, if <code>Network</code> is set to 100MB, taskmanager will take 90MB more memory compared to when it's set to 10MB, but most of time the usage of  <code>Network</code> is less than 1MB.</p>\n</li>\n<li><p>I'm also wondering whether the memory occupied by taskmanager, as a JVM process, is exactly or approximatively equal to <code>Heap</code> + <code>Non-Heap</code> + <code>Outside JVM Memory</code>? When there is no job running I think it's reasonable, but after a job is submitted, taskmanager will occupy a few hundred MBs more memory but I can's find corresponding terms on Flink UI.</p>\n</li>\n</ul>\n<p>Many thanks if you can explain my problems above.</p>\n"},{"tags":["java","maven","jenkins","jenkins-plugins","jenkins-cli"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1700493056,"post_id":77516812,"comment_id":136658028,"body_markdown":"Are you just trying to get a Jenkins server to work? That&#39;s not a programming question, and thus off-topic on StackOverflow.","body":"Are you just trying to get a Jenkins server to work? That&#39;s not a programming question, and thus off-topic on StackOverflow."},{"owner":{"account_id":6256793,"reputation":447,"user_id":4865071,"accept_rate":62,"display_name":"sameer"},"score":0,"creation_date":1700495642,"post_id":77516812,"comment_id":136658548,"body_markdown":"It&#39;s Jenkins Server version 2.375/2.401 configuration with Java maven build with hpi file.","body":"It&#39;s Jenkins Server version 2.375/2.401 configuration with Java maven build with hpi file."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1700497927,"post_id":77516812,"comment_id":136659006,"body_markdown":"That&#39;s not what I asked, so I&#39;m assuming the answer is yes and VTC as not about programming.","body":"That&#39;s not what I asked, so I&#39;m assuming the answer is yes and VTC as not about programming."},{"owner":{"account_id":6256793,"reputation":447,"user_id":4865071,"accept_rate":62,"display_name":"sameer"},"score":0,"creation_date":1700547224,"post_id":77516812,"comment_id":136664779,"body_markdown":"Jenkins server with installed java maven hpi file initial day working fine after couple of days or after some time it will throw null pointer exception &amp; java.lang.reflect.InvocationTargetException how to avoid such exception ?","body":"Jenkins server with installed java maven hpi file initial day working fine after couple of days or after some time it will throw null pointer exception &amp; java.lang.reflect.InvocationTargetException how to avoid such exception ?"}],"owner":{"account_id":6256793,"reputation":447,"user_id":4865071,"accept_rate":62,"display_name":"sameer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700547408,"creation_date":1700491827,"question_id":77516812,"body_markdown":"1. Jenkins server version 2.375/2.401\r\n2. Java 11\r\n3. While configuration Java build hpi file and Jenkins Configuration JWT initial days working fine , but after couple of days/after couple of hours  immediately through below exceptions are \r\n\r\n\r\n**Jenkins.log :**\r\n\r\n     Error while serving https://xxxx:8080/jwtauth/conjur-jwk-set\r\n    java.lang.NullPointerException\r\n    Caused: java.lang.reflect.InvocationTargetException\r\n    \tat org.kohsuke.stapler.Function$MethodFunction.invoke(Function.java:401)\r\n    \tat org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:409)\r\n    \tat org.kohsuke.stapler.Function.bindAndInvoke(Function.java:207)\r\n    \tat org.kohsuke.stapler.SelectionInterceptedFunction$Adapter.invoke(SelectionInterceptedFunction.java:36)\r\n    \tat org.kohsuke.stapler.verb.HttpVerbInterceptor.invoke(HttpVerbInterceptor.java:48)\r\n    \tat org.kohsuke.stapler.SelectionInterceptedFunction.bindAndInvoke(SelectionInterceptedFunction.java:26)\r\n    \tat org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:140)\r\n    \tat org.kohsuke.stapler.MetaClass$11.doDispatch(MetaClass.java:558)\r\n    \tat org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:59)\r\n    \tat org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:762)\r\n    \tat org.kohsuke.stapler.Stapler.invoke(Stapler.java:894)\r\n    \tat org.kohsuke.stapler.MetaClass$9.dispatch(MetaClass.java:475)\r\n    \tat org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:762)\r\n    \tat org.kohsuke.stapler.Stapler.invoke(Stapler.java:894)\r\n    \tat org.kohsuke.stapler.Stapler.invoke(Stapler.java:690)\r\n    \tat org.kohsuke.stapler.Stapler.service(Stapler.java:240)\r\n\r\nHow to fix : **Null pointer exception/Caused: java.lang.reflect.InvocationTargetException  without restart Jenkins server /deleted old config file.**\r\n\r\n4. what is the reason  after couple of days throwing exception why not immediately?","title":"while serving JWT https://xxx.8083/jwtauth/conjur-jwk-set java.lang.NullPointerException/Caused: java.lang.reflect.InvocationTargetException","body":"<ol>\n<li>Jenkins server version 2.375/2.401</li>\n<li>Java 11</li>\n<li>While configuration Java build hpi file and Jenkins Configuration JWT initial days working fine , but after couple of days/after couple of hours  immediately through below exceptions are</li>\n</ol>\n<p><strong>Jenkins.log :</strong></p>\n<pre><code> Error while serving https://xxxx:8080/jwtauth/conjur-jwk-set\njava.lang.NullPointerException\nCaused: java.lang.reflect.InvocationTargetException\n    at org.kohsuke.stapler.Function$MethodFunction.invoke(Function.java:401)\n    at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:409)\n    at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:207)\n    at org.kohsuke.stapler.SelectionInterceptedFunction$Adapter.invoke(SelectionInterceptedFunction.java:36)\n    at org.kohsuke.stapler.verb.HttpVerbInterceptor.invoke(HttpVerbInterceptor.java:48)\n    at org.kohsuke.stapler.SelectionInterceptedFunction.bindAndInvoke(SelectionInterceptedFunction.java:26)\n    at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:140)\n    at org.kohsuke.stapler.MetaClass$11.doDispatch(MetaClass.java:558)\n    at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:59)\n    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:762)\n    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:894)\n    at org.kohsuke.stapler.MetaClass$9.dispatch(MetaClass.java:475)\n    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:762)\n    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:894)\n    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:690)\n    at org.kohsuke.stapler.Stapler.service(Stapler.java:240)\n</code></pre>\n<p>How to fix : <strong>Null pointer exception/Caused: java.lang.reflect.InvocationTargetException  without restart Jenkins server /deleted old config file.</strong></p>\n<ol start=\"4\">\n<li>what is the reason  after couple of days throwing exception why not immediately?</li>\n</ol>\n"},{"tags":["java","android","broadcastreceiver","broadcast"],"answers":[{"tags":[],"owner":{"account_id":5925808,"reputation":13,"user_id":4661691,"display_name":"Mikhail  Mustakimov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700421892,"creation_date":1700421892,"answer_id":77512174,"question_id":75054101,"body_markdown":"There is likely a bad UI test  you should not register receiver in system, or register it with a flag `Context.RECEIVER_NOT_EXPORTED`:\r\n\r\n```kotlin\r\nthis.registerReceiver(myBroadcastReceiver, filter, Context.RECEIVER_NOT_EXPORTED);\r\n\r\n// or ContextCompat version (preferred)\r\nContextCompat.registerReceiver(this, myBroadcastReceiver, filter, ContextCompat.RECEIVER_NOT_EXPORTED);\r\n```\r\n\r\nUI test for this task creates `BroadcastReceiver` from your&#39;s `MainActivity. makeBroadcastReceiver` method, then checks it against list of `Intent.ACTION_*` described in task. Btw, check carefully all action&#39;s names  some of them presented differently from corresponding constant name","title":"Error with Broadcast Receiver which should to work with 13 broadcasts","body":"<p>There is likely a bad UI test  you should not register receiver in system, or register it with a flag <code>Context.RECEIVER_NOT_EXPORTED</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>this.registerReceiver(myBroadcastReceiver, filter, Context.RECEIVER_NOT_EXPORTED);\n\n// or ContextCompat version (preferred)\nContextCompat.registerReceiver(this, myBroadcastReceiver, filter, ContextCompat.RECEIVER_NOT_EXPORTED);\n</code></pre>\n<p>UI test for this task creates <code>BroadcastReceiver</code> from your's <code>MainActivity. makeBroadcastReceiver</code> method, then checks it against list of <code>Intent.ACTION_*</code> described in task. Btw, check carefully all action's names  some of them presented differently from corresponding constant name</p>\n"}],"owner":{"account_id":27451158,"reputation":3,"user_id":20943388,"display_name":"Foogles super"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":371,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700546786,"creation_date":1673248280,"question_id":75054101,"body_markdown":"```none\r\nError in mainTest(ru.myitschool.lab23.InstrumentedTestLab46):\r\njava.lang.RuntimeException: java.lang.Throwable:      &#39;an instance of android.widget.TextView and view.getText() with or without transformation to match: is &quot;ACTION_ASSIST&quot;&#39; doesn&#39;t match the selected view.\r\nExpected: an instance of android.widget.TextView and view.getText() with or without transformation to match: is &quot;ACTION_ASSIST&quot;\r\n     Got: view.getText() was &quot;android.intent.action.BATTERY_CHANGED&quot; transformed text was &quot;android.intent.action.BATTERY_CHANGED&quot;\r\nView Details: MaterialTextView{id=2131231135, res-name=status_text, visibility=VISIBLE, width=1080, height=2105, has-focus=false, has-focusable=false, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=false, is-selected=false, layout-params=android.widget.LinearLayout$LayoutParams@YYYYYY, tag=null, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0, text=android.intent.action.BATTERY_CHANGED, inp...\r\n\tat androidx.test.espresso.base.ThrowableHandler.handle(ThrowableHandler.java:2)\r\n\tat androidx.test.espresso.base.DefaultFailureHandler.handle(DefaultFailureHandler.java:5)\r\n\tat ru.myitschool.lab23.DescriptionFailureHandler.handle(InstrumentedTestLab46.kt:244)\r\n\tat androidx.test.espresso.ViewInteraction.waitForAndHandleInteractionResults(ViewInteraction.java:5)\r\n\tat androidx.test.espresso.ViewInteraction.check(ViewInteraction.java:12)\r\n\tat io.github.kakaocup.kakao.delegate.ViewInteractionDelegate.check(ViewInteractionDelegate.kt:26)\r\n\tat io.github.kakaocup.kakao.text.TextViewAssertions$DefaultImpls.hasText(TextViewAssertions.kt:53)\r\n\tat io.github.kakaocup.kakao.text.KTextView.hasText(KTextView.kt:18)\r\n\tat ru.myitschool.lab23.InstrumentedTestLab46$mainTestCheckStep$1.invoke(InstrumentedTestLab46.kt:150)\r\n\tat ru.myitschool.lab23.InstrumentedTestLab46$mainTestCheckStep$1.invoke(InstrumentedTestLab46.kt:138)\r\n\tat io.github.kakaocup.kakao.screen.Screen.invoke(Screen.kt:119)\r\n\tat ru.myitschool.lab23.InstrumentedTestLab46.mainTestCheckStep(InstrumentedTestLab46.kt:138)\r\n\tat ru.myitschool.lab23.InstrumentedTestLab46.mainTest(InstrumentedTestLab46.kt:128)\r\n\t... 8 trimmed\r\nCaused by: java.lang.Throwable:      &#39;an instance of android.widget.TextView and view.getText() with or without transformation to match: is &quot;ACTION_ASSIST&quot;&#39; doesn&#39;t match the selected view.\r\nExpected: an instance of android.widget.TextView and view.getText() with or without transformation to match: is &quot;ACTION_ASSIST&quot;\r\n     Got: view.getText() was &quot;android.intent.action.BATTERY_CHANGED&quot; transformed text was &quot;android.intent.action.BATTERY_CHANGED&quot;\r\nView Details: MaterialTextView{id=2131231135, res-name=status_text, visibility=VISIBLE, width=1080, height=2105, has-focus=false, has-focusable=false, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=false, is-selected=false, layout-params=android.widget.LinearLayout$LayoutParams@YYYYYY, tag=null, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0, text=android.intent.action.BATTERY_CHANGED, inp...\r\n\tat ru.myitschool.lab23.DescriptionFailureHandler.handle(InstrumentedTestLab46.kt:234)\r\n\t... 19 more\r\n```\r\nMainActivity:\r\n```\r\nimport android.content.BroadcastReceiver;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.net.ConnectivityManager;\r\nimport android.os.Bundle;\r\nimport android.widget.TextView;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    TextView statusText;\r\n    BroadcastReceiver myBroadcastReceiver;\r\n\r\n    @Override\r\n    public void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        statusText = findViewById(R.id.status_text);\r\n        myBroadcastReceiver = new MyBroadcastReceiver();\r\n    }\r\n\r\n    public BroadcastReceiver makeBroadcastReceiver() {\r\n\r\n        IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);\r\n        filter.addAction(Intent.ACTION_AIRPLANE_MODE_CHANGED);\r\n        filter.addAction(Intent.ACTION_APPLICATION_RESTRICTIONS_CHANGED);\r\n        filter.addAction(Intent.ACTION_APPLICATION_LOCALE_CHANGED);\r\n        filter.addAction(Intent.ACTION_ASSIST);\r\n        filter.addAction(Intent.ACTION_BATTERY_CHANGED);\r\n        filter.addAction(Intent.ACTION_BATTERY_LOW);\r\n        filter.addAction(Intent.ACTION_BATTERY_OKAY);\r\n        filter.addAction(Intent.ACTION_CALL);\r\n        filter.addAction(Intent.ACTION_DATE_CHANGED);\r\n        filter.addAction(Intent.ACTION_DEFAULT);\r\n        filter.addAction(Intent.ACTION_HEADSET_PLUG);\r\n        filter.addAction(Intent.ACTION_LOCALE_CHANGED);\r\n        filter.addAction(Intent.ACTION_TIME_TICK);\r\n\r\n        this.registerReceiver(myBroadcastReceiver, filter);\r\n\r\n        return myBroadcastReceiver;\r\n    }\r\n\r\n    private class MyBroadcastReceiver extends BroadcastReceiver {\r\n        public MyBroadcastReceiver() {\r\n        }\r\n\r\n        public void onReceive(Context context, Intent intent) {\r\n            statusText.setText(intent.getAction());\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        unregisterReceiver(myBroadcastReceiver);\r\n    }\r\n}\r\n```\r\nI had a task to create a Broadcast Receiver that could receive 13 different broadcasts and output their value to `statusText`, that is, if we have `ACTION_TIME_TICK` broadcast, then the text ACTION_TIME_TICK should be set in `statusText`. Method `makeBroadcastReceiver()` which return Broadcast Receiver is required by the task.\r\nIn our training, most of the information has to be searched for myself, so I even had to work on it for several days, looking for information on how to do it, this is my first time working with Broadcast Receiver.","title":"Error with Broadcast Receiver which should to work with 13 broadcasts","body":"<pre class=\"lang-none prettyprint-override\"><code>Error in mainTest(ru.myitschool.lab23.InstrumentedTestLab46):\njava.lang.RuntimeException: java.lang.Throwable:      'an instance of android.widget.TextView and view.getText() with or without transformation to match: is &quot;ACTION_ASSIST&quot;' doesn't match the selected view.\nExpected: an instance of android.widget.TextView and view.getText() with or without transformation to match: is &quot;ACTION_ASSIST&quot;\n     Got: view.getText() was &quot;android.intent.action.BATTERY_CHANGED&quot; transformed text was &quot;android.intent.action.BATTERY_CHANGED&quot;\nView Details: MaterialTextView{id=2131231135, res-name=status_text, visibility=VISIBLE, width=1080, height=2105, has-focus=false, has-focusable=false, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=false, is-selected=false, layout-params=android.widget.LinearLayout$LayoutParams@YYYYYY, tag=null, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0, text=android.intent.action.BATTERY_CHANGED, inp...\n    at androidx.test.espresso.base.ThrowableHandler.handle(ThrowableHandler.java:2)\n    at androidx.test.espresso.base.DefaultFailureHandler.handle(DefaultFailureHandler.java:5)\n    at ru.myitschool.lab23.DescriptionFailureHandler.handle(InstrumentedTestLab46.kt:244)\n    at androidx.test.espresso.ViewInteraction.waitForAndHandleInteractionResults(ViewInteraction.java:5)\n    at androidx.test.espresso.ViewInteraction.check(ViewInteraction.java:12)\n    at io.github.kakaocup.kakao.delegate.ViewInteractionDelegate.check(ViewInteractionDelegate.kt:26)\n    at io.github.kakaocup.kakao.text.TextViewAssertions$DefaultImpls.hasText(TextViewAssertions.kt:53)\n    at io.github.kakaocup.kakao.text.KTextView.hasText(KTextView.kt:18)\n    at ru.myitschool.lab23.InstrumentedTestLab46$mainTestCheckStep$1.invoke(InstrumentedTestLab46.kt:150)\n    at ru.myitschool.lab23.InstrumentedTestLab46$mainTestCheckStep$1.invoke(InstrumentedTestLab46.kt:138)\n    at io.github.kakaocup.kakao.screen.Screen.invoke(Screen.kt:119)\n    at ru.myitschool.lab23.InstrumentedTestLab46.mainTestCheckStep(InstrumentedTestLab46.kt:138)\n    at ru.myitschool.lab23.InstrumentedTestLab46.mainTest(InstrumentedTestLab46.kt:128)\n    ... 8 trimmed\nCaused by: java.lang.Throwable:      'an instance of android.widget.TextView and view.getText() with or without transformation to match: is &quot;ACTION_ASSIST&quot;' doesn't match the selected view.\nExpected: an instance of android.widget.TextView and view.getText() with or without transformation to match: is &quot;ACTION_ASSIST&quot;\n     Got: view.getText() was &quot;android.intent.action.BATTERY_CHANGED&quot; transformed text was &quot;android.intent.action.BATTERY_CHANGED&quot;\nView Details: MaterialTextView{id=2131231135, res-name=status_text, visibility=VISIBLE, width=1080, height=2105, has-focus=false, has-focusable=false, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=false, is-selected=false, layout-params=android.widget.LinearLayout$LayoutParams@YYYYYY, tag=null, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0, text=android.intent.action.BATTERY_CHANGED, inp...\n    at ru.myitschool.lab23.DescriptionFailureHandler.handle(InstrumentedTestLab46.kt:234)\n    ... 19 more\n</code></pre>\n<p>MainActivity:</p>\n<pre><code>import android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport android.net.ConnectivityManager;\nimport android.os.Bundle;\nimport android.widget.TextView;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\npublic class MainActivity extends AppCompatActivity {\n\n    TextView statusText;\n    BroadcastReceiver myBroadcastReceiver;\n\n    @Override\n    public void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        statusText = findViewById(R.id.status_text);\n        myBroadcastReceiver = new MyBroadcastReceiver();\n    }\n\n    public BroadcastReceiver makeBroadcastReceiver() {\n\n        IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);\n        filter.addAction(Intent.ACTION_AIRPLANE_MODE_CHANGED);\n        filter.addAction(Intent.ACTION_APPLICATION_RESTRICTIONS_CHANGED);\n        filter.addAction(Intent.ACTION_APPLICATION_LOCALE_CHANGED);\n        filter.addAction(Intent.ACTION_ASSIST);\n        filter.addAction(Intent.ACTION_BATTERY_CHANGED);\n        filter.addAction(Intent.ACTION_BATTERY_LOW);\n        filter.addAction(Intent.ACTION_BATTERY_OKAY);\n        filter.addAction(Intent.ACTION_CALL);\n        filter.addAction(Intent.ACTION_DATE_CHANGED);\n        filter.addAction(Intent.ACTION_DEFAULT);\n        filter.addAction(Intent.ACTION_HEADSET_PLUG);\n        filter.addAction(Intent.ACTION_LOCALE_CHANGED);\n        filter.addAction(Intent.ACTION_TIME_TICK);\n\n        this.registerReceiver(myBroadcastReceiver, filter);\n\n        return myBroadcastReceiver;\n    }\n\n    private class MyBroadcastReceiver extends BroadcastReceiver {\n        public MyBroadcastReceiver() {\n        }\n\n        public void onReceive(Context context, Intent intent) {\n            statusText.setText(intent.getAction());\n        }\n    }\n\n    @Override\n    protected void onStop() {\n        super.onStop();\n        unregisterReceiver(myBroadcastReceiver);\n    }\n}\n</code></pre>\n<p>I had a task to create a Broadcast Receiver that could receive 13 different broadcasts and output their value to <code>statusText</code>, that is, if we have <code>ACTION_TIME_TICK</code> broadcast, then the text ACTION_TIME_TICK should be set in <code>statusText</code>. Method <code>makeBroadcastReceiver()</code> which return Broadcast Receiver is required by the task.\nIn our training, most of the information has to be searched for myself, so I even had to work on it for several days, looking for information on how to do it, this is my first time working with Broadcast Receiver.</p>\n"},{"tags":["java","spring","oracle","plsql","database-administration"],"answers":[{"comments":[{"owner":{"account_id":4978133,"reputation":35,"user_id":4003907,"display_name":"ManiShankar"},"score":0,"creation_date":1700570743,"post_id":77520622,"comment_id":136668687,"body_markdown":"thanks for the answer,I have changed the java code from p2 to s2.p2 yet, I am getting the same exception like s2.p2 must be declared.","body":"thanks for the answer,I have changed the java code from p2 to s2.p2 yet, I am getting the same exception like s2.p2 must be declared."},{"owner":{"account_id":12498833,"reputation":135427,"user_id":9097906,"display_name":"Littlefoot"},"score":0,"creation_date":1700573808,"post_id":77520622,"comment_id":136669281,"body_markdown":"I don&#39;t know Java. But, I presume that you must have established connection to Oracle database. Which user are you connected to? S1, S2 or neither of these two?","body":"I don&#39;t know Java. But, I presume that you must have established connection to Oracle database. Which user are you connected to? S1, S2 or neither of these two?"},{"owner":{"account_id":4978133,"reputation":35,"user_id":4003907,"display_name":"ManiShankar"},"score":0,"creation_date":1700575131,"post_id":77520622,"comment_id":136669569,"body_markdown":"I am connected to S2 from java application, and procedure p2 is in S2 only, still getting p2 must be declared.","body":"I am connected to S2 from java application, and procedure p2 is in S2 only, still getting p2 must be declared."}],"tags":[],"owner":{"account_id":12498833,"reputation":135427,"user_id":9097906,"display_name":"Littlefoot"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700546733,"creation_date":1700546733,"answer_id":77520622,"question_id":77520177,"body_markdown":"The way I see it,\r\n\r\n  - procedure `p2` is owned by user (schema) `s2`\r\n  - you granted execute on `p2` to user (schema) `s1`\r\n  - when `p2` procedure is called from Java application, you get error that `p2` must be declared\r\n  - it means that `p2` doesn&#39;t exist (or is inaccessible) in schema you&#39;re currently logged in\r\n  - therefore, which user are you connected to?\r\n    - if it were `s2`, then `p2` would be accessible\r\n    - if it is `s1` (which is what I presume), then \r\n      - although grant exists - procedure isn&#39;t &quot;visible&quot; to `s1`\r\n      - what to do?\r\n        - call procedure by specifying its owner. For example not just by `p2`, but `s2.p2`\r\n        - or, create a **synonym** in schema `s1`:\r\n\r\n              create synonym p2 for s2.p2;","title":"ORA-06550:Proc p1 must be declared, while executing the procedure from java app,","body":"<p>The way I see it,</p>\n<ul>\n<li>procedure <code>p2</code> is owned by user (schema) <code>s2</code></li>\n<li>you granted execute on <code>p2</code> to user (schema) <code>s1</code></li>\n<li>when <code>p2</code> procedure is called from Java application, you get error that <code>p2</code> must be declared</li>\n<li>it means that <code>p2</code> doesn't exist (or is inaccessible) in schema you're currently logged in</li>\n<li>therefore, which user are you connected to?\n<ul>\n<li>if it were <code>s2</code>, then <code>p2</code> would be accessible</li>\n<li>if it is <code>s1</code> (which is what I presume), then\n<ul>\n<li>although grant exists - procedure isn't &quot;visible&quot; to <code>s1</code></li>\n<li>what to do?\n<ul>\n<li><p>call procedure by specifying its owner. For example not just by <code>p2</code>, but <code>s2.p2</code></p>\n</li>\n<li><p>or, create a <strong>synonym</strong> in schema <code>s1</code>:</p>\n<pre><code>create synonym p2 for s2.p2;\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n"}],"owner":{"account_id":4978133,"reputation":35,"user_id":4003907,"display_name":"ManiShankar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700546733,"creation_date":1700538006,"question_id":77520177,"body_markdown":"I have two schemas s1 and s2, I have created a proc p2 in s2 and in p2, I have a select query from table t1 in s1, \r\nI have provided grant select access from table t1 to s2 and can run the same proc from the SQL developer also, while running from the Java application, I am getting the below error.\r\nORA-06550: line 1, column 7:\r\nPLS-00201: identifier &#39;p2&#39; must be declared\r\nORA-06550: line 1, column 7:\r\nPL/SQL: Statement ignored\r\n\r\nthe procedure p2 just select the query and grabs that data and sends back that data as an array type, able to query the same table t1 from schema s2 in SQL developer,\r\nI have provided p2 execute grant access to s2, still not resolved.","title":"ORA-06550:Proc p1 must be declared, while executing the procedure from java app,","body":"<p>I have two schemas s1 and s2, I have created a proc p2 in s2 and in p2, I have a select query from table t1 in s1,\nI have provided grant select access from table t1 to s2 and can run the same proc from the SQL developer also, while running from the Java application, I am getting the below error.\nORA-06550: line 1, column 7:\nPLS-00201: identifier 'p2' must be declared\nORA-06550: line 1, column 7:\nPL/SQL: Statement ignored</p>\n<p>the procedure p2 just select the query and grabs that data and sends back that data as an array type, able to query the same table t1 from schema s2 in SQL developer,\nI have provided p2 execute grant access to s2, still not resolved.</p>\n"},{"tags":["java","encryption","aes","keystore"],"comments":[{"owner":{"account_id":218057,"reputation":67738,"user_id":474189,"accept_rate":72,"display_name":"Duncan Jones"},"score":3,"creation_date":1390916319,"post_id":21406884,"comment_id":32291518,"body_markdown":"Welcome to Stack Overflow! I suggest you read the documentation for the [`KeyStore`](http://docs.oracle.com/javase/7/docs/api/java/security/KeyStore.html) class, try something yourself and let us know if you get stuck.","body":"Welcome to Stack Overflow! I suggest you read the documentation for the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/security/KeyStore.html\" rel=\"nofollow noreferrer\"><code>KeyStore</code></a> class, try something yourself and let us know if you get stuck."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1390954958,"post_id":21406884,"comment_id":32314097,"body_markdown":"Do try and use the jceks key store for at least moderate protection and choose a hard to crack password (like a sentence including made up words).","body":"Do try and use the jceks key store for at least moderate protection and choose a hard to crack password (like a sentence including made up words)."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1555384176,"post_id":21406884,"comment_id":98081630,"body_markdown":"Don&#39;t write code like this. Code that depends on the success of code in a prior `try` block should be inside that `try` block. In your case, if the file isn&#39;t found, the keystores isn&#39;t initialised, so you should not execute the remaining code.","body":"Don&#39;t write code like this. Code that depends on the success of code in a prior <code>try</code> block should be inside that <code>try</code> block. In your case, if the file isn&#39;t found, the keystores isn&#39;t initialised, so you should not execute the remaining code."}],"answers":[{"tags":[],"owner":{"account_id":3398201,"reputation":970,"user_id":2851184,"accept_rate":43,"display_name":"Alok Mishra"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700546714,"creation_date":1432130491,"answer_id":30351975,"question_id":21406884,"body_markdown":"According to the `KeyStore` [documentation][1] ,\r\n\r\n&gt; Before a keystore can be accessed, it must be `loaded`.\r\n\r\n&gt; In order to create an empty keystore, or if the keystore cannot be initialized from a stream, pass null as the stream argument. \r\n\r\nso you are loading the KeyStore but what if a `FileNotFoundException` occures at \r\n`fis = new java.io.FileInputStream(&quot;keyStoreName&quot;);` , hence if file does not exist we load the KeyStore with `null` values ,like , `ks.load(null,null);` .\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/security/KeyStore.html","title":"Storing AES Secret key using keystore in java","body":"<p>According to the <code>KeyStore</code> <a href=\"https://docs.oracle.com/javase/7/docs/api/java/security/KeyStore.html\" rel=\"nofollow noreferrer\">documentation</a> ,</p>\n<blockquote>\n<p>Before a keystore can be accessed, it must be <code>loaded</code>.</p>\n</blockquote>\n<blockquote>\n<p>In order to create an empty keystore, or if the keystore cannot be initialized from a stream, pass null as the stream argument.</p>\n</blockquote>\n<p>so you are loading the KeyStore but what if a <code>FileNotFoundException</code> occures at\n<code>fis = new java.io.FileInputStream(&quot;keyStoreName&quot;);</code> , hence if file does not exist we load the KeyStore with <code>null</code> values ,like , <code>ks.load(null,null);</code> .</p>\n"}],"owner":{"account_id":3922935,"reputation":661,"user_id":3244519,"accept_rate":46,"display_name":"user3244519"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15077,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1700546714,"creation_date":1390915705,"question_id":21406884,"body_markdown":"I am using Java keystore to store the secret key for AES encryption.\r\n\r\n    final String strToEncrypt = &quot;Hello World&quot;;\r\n    KeyGenerator kg = KeyGenerator.getInstance(&quot;AES&quot;);\r\n    kg.init(128);\r\n    SecretKey sk = kg.generateKey();\r\n    String secretKey = String.valueOf(Hex.encodeHex(sk.getEncoded()));   \r\n    //Storing AES Secret key in keystore\r\n    KeyStore ks = KeyStore.getInstance(&quot;JCEKS&quot;);\r\n    char[] password = &quot;keystorepassword&quot;.toCharArray();\r\n    java.io.FileInputStream fis = null;\r\n    try {\r\n      fis = new java.io.FileInputStream(&quot;keyStoreName&quot;);\r\n      ks.load(fis, password);\r\n    } finally {\r\n      if (fis != null) {\r\n        fis.close();\r\n      }\r\n\r\n      KeyStore.ProtectionParameter protParam = \r\n        new KeyStore.PasswordProtection(password);\r\n\r\n      KeyStore.SecretKeyEntry skEntry = new KeyStore.SecretKeyEntry(sk);\r\n      ks.setEntry(&quot;secretKeyAlias&quot;, skEntry, protParam);\r\n\r\nBut i am getting following Exception.\r\n\r\n&gt; Exception in thread &quot;main&quot; java.security.KeyStoreException: Uninitialized keystore  \r\n&gt; at java.security.KeyStore.setEntry(Unknown Source) \r\n\r\nHow to fix this error? Thanks in advance","title":"Storing AES Secret key using keystore in java","body":"<p>I am using Java keystore to store the secret key for AES encryption.</p>\n\n<pre><code>final String strToEncrypt = \"Hello World\";\nKeyGenerator kg = KeyGenerator.getInstance(\"AES\");\nkg.init(128);\nSecretKey sk = kg.generateKey();\nString secretKey = String.valueOf(Hex.encodeHex(sk.getEncoded()));   \n//Storing AES Secret key in keystore\nKeyStore ks = KeyStore.getInstance(\"JCEKS\");\nchar[] password = \"keystorepassword\".toCharArray();\njava.io.FileInputStream fis = null;\ntry {\n  fis = new java.io.FileInputStream(\"keyStoreName\");\n  ks.load(fis, password);\n} finally {\n  if (fis != null) {\n    fis.close();\n  }\n\n  KeyStore.ProtectionParameter protParam = \n    new KeyStore.PasswordProtection(password);\n\n  KeyStore.SecretKeyEntry skEntry = new KeyStore.SecretKeyEntry(sk);\n  ks.setEntry(\"secretKeyAlias\", skEntry, protParam);\n</code></pre>\n\n<p>But i am getting following Exception.</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.security.KeyStoreException: Uninitialized keystore<br>\n  at java.security.KeyStore.setEntry(Unknown Source) </p>\n</blockquote>\n\n<p>How to fix this error? Thanks in advance</p>\n"},{"tags":["java","eclipse"],"answers":[{"comments":[{"owner":{"account_id":41301,"reputation":482760,"user_id":119963,"display_name":"Cascabel"},"score":2,"creation_date":1283445141,"post_id":3629167,"comment_id":3812703,"body_markdown":"&quot;using the same eclipse compiler that is used in eclipse&quot; (though my guess would be the compiler flags aren&#39;t the same)","body":"&quot;using the same eclipse compiler that is used in eclipse&quot; (though my guess would be the compiler flags aren&#39;t the same)"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1283445248,"post_id":3629167,"comment_id":3812719,"body_markdown":"The command line interface to ecj intentionally mimics those for javac.","body":"The command line interface to ecj intentionally mimics those for javac."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":1,"creation_date":1283445643,"post_id":3629167,"comment_id":3812769,"body_markdown":"Good explanation although I&#39;d always pull down the full JDK anyway, not harder just takes a little longer.","body":"Good explanation although I&#39;d always pull down the full JDK anyway, not harder just takes a little longer."},{"owner":{"account_id":5065,"reputation":1902,"user_id":7949,"accept_rate":92,"display_name":"darrickc"},"score":0,"creation_date":1283445888,"post_id":3629167,"comment_id":3812799,"body_markdown":"I added the &quot;compile with eclipse compiler&quot; target that I am using (which was recommended somewhere).","body":"I added the &quot;compile with eclipse compiler&quot; target that I am using (which was recommended somewhere)."},{"owner":{"account_id":17593,"reputation":10206,"user_id":39529,"accept_rate":95,"display_name":"Aaron Fi"},"score":0,"creation_date":1283446021,"post_id":3629167,"comment_id":3812817,"body_markdown":"Why does Eclipse have its own compiler?","body":"Why does Eclipse have its own compiler?"},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1283446162,"post_id":3629167,"comment_id":3812834,"body_markdown":"Also, the Eclipse compiler is good.  Really good.  Any time I&#39;ve seen the Eclipse compiler differ non-trivially from javac, Eclipse has either been more conformant to the spec or equally conformant but more smart or forgiving.","body":"Also, the Eclipse compiler is good.  Really good.  Any time I&#39;ve seen the Eclipse compiler differ non-trivially from javac, Eclipse has either been more conformant to the spec or equally conformant but more smart or forgiving."},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":3,"creation_date":1283446264,"post_id":3629167,"comment_id":3812845,"body_markdown":"@Aaron F: An application like Eclipse (with JDT) needs to have a VERY good suite of static analysis tools to support the feedback that it does via syntax highlighting, error highlighting, suggestions, auto-complete, etc.   Javac doesn&#39;t provide this support through an API so they made their own suite.  At that point creating a compiler is very little extra effort and has the added benefit of not needing to separately install the JDK.","body":"@Aaron F: An application like Eclipse (with JDT) needs to have a VERY good suite of static analysis tools to support the feedback that it does via syntax highlighting, error highlighting, suggestions, auto-complete, etc.   Javac doesn&#39;t provide this support through an API so they made their own suite.  At that point creating a compiler is very little extra effort and has the added benefit of not needing to separately install the JDK."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1283446750,"post_id":3629167,"comment_id":3812926,"body_markdown":"@Aaron F, when you have used Eclipse a lot you will see that it knows really much about your Java code.  To learn that, the compiler needs to tell the editor all it needs to know, so the Eclipse project essentially _had_ to write their own compiler to do so.  They just packaged it up so it can be used standalone too.","body":"@Aaron F, when you have used Eclipse a lot you will see that it knows really much about your Java code.  To learn that, the compiler needs to tell the editor all it needs to know, so the Eclipse project essentially <i>had</i> to write their own compiler to do so.  They just packaged it up so it can be used standalone too."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1283446799,"post_id":3629167,"comment_id":3812933,"body_markdown":"@darrick, can be different options and Java version targets.","body":"@darrick, can be different options and Java version targets."},{"owner":{"account_id":5065,"reputation":1902,"user_id":7949,"accept_rate":92,"display_name":"darrickc"},"score":0,"creation_date":1283448160,"post_id":3629167,"comment_id":3813143,"body_markdown":"I gave you a down vote because in the question I specify that I am using the same compiler as eclipse, but in your answer you said that the difference is that ant and eclipse uses different compilers. Your answer - though interesting, and well written - doesn&#39;t answer my question.","body":"I gave you a down vote because in the question I specify that I am using the same compiler as eclipse, but in your answer you said that the difference is that ant and eclipse uses different compilers. Your answer - though interesting, and well written - doesn&#39;t answer my question."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1307019405,"post_id":3629167,"comment_id":7236494,"body_markdown":"@darrickc, How do you ensure that it is exactly the same compiler?","body":"@darrickc, How do you ensure that it is exactly the same compiler?"}],"tags":[],"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"comment_count":11,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1283450158,"creation_date":1283445106,"answer_id":3629167,"question_id":3629158,"body_markdown":"Eclipse uses its own compiler, which generates slightly different - but correct - bytecode.\r\n\r\nAnt uses the standard Sun compiler - javac - available in the JDK.\r\n\r\nThe eclipse compiler can be downloaded from eclipse.org and ant told to use it.  This has the added benefit of being able to compile with the JRE alone, which is much easier to install than the full JDK.  Look for &quot;JDT Core Batch Compiler&quot; in http://download.eclipse.org/eclipse/downloads/drops/R-3.6-201006080911/index.php\r\n\r\n-------\r\n\r\nEDIT:  Even with the same compiler the byte code generated may be different.  Some factors that influence on this are: \r\n\r\n* Target JVM - Java 6 byte codes are slightly different than Java 1.2 byte codes.\r\n* Optimization level (some inlining, better left to the JVM these days)\r\n* Debug information inclusion.\r\n\r\n","title":"Why are class files different size when compiling the same code in eclipse, and then with the eclipse compiler via ant?","body":"<p>Eclipse uses its own compiler, which generates slightly different - but correct - bytecode.</p>\n\n<p>Ant uses the standard Sun compiler - javac - available in the JDK.</p>\n\n<p>The eclipse compiler can be downloaded from eclipse.org and ant told to use it.  This has the added benefit of being able to compile with the JRE alone, which is much easier to install than the full JDK.  Look for \"JDT Core Batch Compiler\" in <a href=\"http://download.eclipse.org/eclipse/downloads/drops/R-3.6-201006080911/index.php\" rel=\"nofollow noreferrer\">http://download.eclipse.org/eclipse/downloads/drops/R-3.6-201006080911/index.php</a></p>\n\n<hr>\n\n<p>EDIT:  Even with the same compiler the byte code generated may be different.  Some factors that influence on this are: </p>\n\n<ul>\n<li>Target JVM - Java 6 byte codes are slightly different than Java 1.2 byte codes.</li>\n<li>Optimization level (some inlining, better left to the JVM these days)</li>\n<li>Debug information inclusion.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":25223771,"reputation":61,"user_id":19059901,"display_name":"Heisenbug"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700546008,"creation_date":1700546008,"answer_id":77520566,"question_id":3629158,"body_markdown":"Difference in sizes is because ANT&#39;s javac by default has debug mode as false.\r\n\r\nTurning \r\n\r\n&gt; debug=&quot;true&quot;\r\n\r\n in javac of ANT script will \r\n1. generate the same class file \r\nwhich is generated with maven or normal javac in cmd.\r\n2. because debug details such as line number and label nodes will also be added into the bytecode.","title":"Why are class files different size when compiling the same code in eclipse, and then with the eclipse compiler via ant?","body":"<p>Difference in sizes is because ANT's javac by default has debug mode as false.</p>\n<p>Turning</p>\n<blockquote>\n<p>debug=&quot;true&quot;</p>\n</blockquote>\n<p>in javac of ANT script will</p>\n<ol>\n<li>generate the same class file\nwhich is generated with maven or normal javac in cmd.</li>\n<li>because debug details such as line number and label nodes will also be added into the bytecode.</li>\n</ol>\n"}],"owner":{"account_id":5065,"reputation":1902,"user_id":7949,"accept_rate":92,"display_name":"darrickc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5074,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":3629167,"answer_count":2,"score":6,"last_activity_date":1700546008,"creation_date":1283445045,"question_id":3629158,"body_markdown":"I am making an automated build environment using ant to build a freshly checked out source tree using the same eclipse compiler that is used in eclipse. The problem is that some of the resulting class files are different in size than the class file generated by compiling within eclipse. Why is this? Is this ok, and to be expected? As prescribed I&#39;m telling Ant to use the eclipse compiler, like:\r\n\r\n    &lt;target description=&quot;compile project with Eclipse compiler&quot; name=&quot;build-eclipse-compiler&quot;&gt;\r\n            &lt;property name=&quot;build.compiler&quot; value=&quot;org.eclipse.jdt.core.JDTCompilerAdapter&quot;/&gt;\r\n            &lt;antcall target=&quot;build&quot;/&gt;\r\n    &lt;/target&gt;","title":"Why are class files different size when compiling the same code in eclipse, and then with the eclipse compiler via ant?","body":"<p>I am making an automated build environment using ant to build a freshly checked out source tree using the same eclipse compiler that is used in eclipse. The problem is that some of the resulting class files are different in size than the class file generated by compiling within eclipse. Why is this? Is this ok, and to be expected? As prescribed I'm telling Ant to use the eclipse compiler, like:</p>\n\n<pre><code>&lt;target description=\"compile project with Eclipse compiler\" name=\"build-eclipse-compiler\"&gt;\n        &lt;property name=\"build.compiler\" value=\"org.eclipse.jdt.core.JDTCompilerAdapter\"/&gt;\n        &lt;antcall target=\"build\"/&gt;\n&lt;/target&gt;\n</code></pre>\n"},{"tags":["java","xml","encryption","pfx"],"comments":[{"owner":{"account_id":13294099,"reputation":49274,"user_id":9597706,"display_name":"Richard Heap"},"score":0,"creation_date":1699973038,"post_id":77472096,"comment_id":136595916,"body_markdown":"Presumably you have to decrypt the key element first (using the RSA private key) - and then decrypt the data element using the key just obtained using the symmetrical algorithm specified (3DES). Also it seems that the CipherValues need to be base-64 decoded to bytes.","body":"Presumably you have to decrypt the key element first (using the RSA private key) - and then decrypt the data element using the key just obtained using the symmetrical algorithm specified (3DES). Also it seems that the CipherValues need to be base-64 decoded to bytes."},{"owner":{"account_id":29630756,"reputation":1,"user_id":22709244,"display_name":"juniorDev"},"score":0,"creation_date":1700447090,"post_id":77472096,"comment_id":136651813,"body_markdown":"@RichardHeap thanks for the reply. I have found SAP blog [link](https://blogs.sap.com/2018/12/24/how-to-encryptdecrypt-xml-payload-with-aes256-cbc-and-rsa-algorithm-in-sap-cpi/) describing what you mention and with difference on encrypted data as AES while 3DES. However, I am encountering this error java.security.InvalidKeyException: Wrong key size. Please help me know what I&#39;m doing wrong.","body":"@RichardHeap thanks for the reply. I have found SAP blog <a href=\"https://blogs.sap.com/2018/12/24/how-to-encryptdecrypt-xml-payload-with-aes256-cbc-and-rsa-algorithm-in-sap-cpi/\" rel=\"nofollow noreferrer\">link</a> describing what you mention and with difference on encrypted data as AES while 3DES. However, I am encountering this error java.security.InvalidKeyException: Wrong key size. Please help me know what I&#39;m doing wrong."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1700461874,"post_id":77472096,"comment_id":136652953,"body_markdown":"Check `decryptedKey.length` and it should be 24 bytes. If not your encryption is wrong.","body":"Check <code>decryptedKey.length</code> and it should be 24 bytes. If not your encryption is wrong."},{"owner":{"account_id":29630756,"reputation":1,"user_id":22709244,"display_name":"juniorDev"},"score":0,"creation_date":1700545654,"post_id":77472096,"comment_id":136664629,"body_markdown":"@dave_thompson_085 I manage to get the right key by adding the DESedeKeySpec.\n` DESedeKeySpec desEdeKeySpec = new DESedeKeySpec(decryptedKey);\n  SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(&quot;DESede&quot;);\n  SecretKey key = keyFactory.generateSecret(desEdeKeySpec);`\n\nNow I no longer have any errors on compile and runtime but I am just getting back my input as the output. so I&#39;m I am not sure now what I could be doing wrong.","body":"@dave_thompson_085 I manage to get the right key by adding the DESedeKeySpec. ` DESedeKeySpec desEdeKeySpec = new DESedeKeySpec(decryptedKey);   SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(&quot;DESede&quot;);   SecretKey key = keyFactory.generateSecret(desEdeKeySpec);`  Now I no longer have any errors on compile and runtime but I am just getting back my input as the output. so I&#39;m I am not sure now what I could be doing wrong."},{"owner":{"account_id":29630756,"reputation":1,"user_id":22709244,"display_name":"juniorDev"},"score":0,"creation_date":1700634850,"post_id":77472096,"comment_id":136677301,"body_markdown":"I have added `Document decryptedDoc = db.parse(new ByteArrayInputStream(decryptedData.getBytes(&quot;UTF-8&quot;)));` to get result xml document but I&#39;m encountering `[Fatal Error] :1:1: Content is not allowed in prolog.`","body":"I have added <code>Document decryptedDoc = db.parse(new ByteArrayInputStream(decryptedData.getBytes(&quot;UTF-8&quot;)));</code> to get result xml document but I&#39;m encountering <code>[Fatal Error] :1:1: Content is not allowed in prolog.</code>"},{"owner":{"account_id":29630756,"reputation":1,"user_id":22709244,"display_name":"juniorDev"},"score":0,"creation_date":1700634856,"post_id":77472096,"comment_id":136677302,"body_markdown":"but when I enclose the decrypted string in I suppose root element `String newDecryptedData = &quot;&lt;root&gt;&quot;+decryptedData+&quot;&lt;/root&gt;&quot;; Document decryptedDoc = db.parse(new ByteArrayInputStream(newDecryptedData.getBytes(&quot;UTF-8&quot;)));` the error changes to `[Fatal Error] :1:11: An invalid XML character (Unicode: 0x1d) was found in the element content of the document.`. Please help point out what I need to fix and what could probably doing wrong the entire program.","body":"but when I enclose the decrypted string in I suppose root element <code>String newDecryptedData = &quot;&lt;root&gt;&quot;+decryptedData+&quot;&lt;&#47;root&gt;&quot;; Document decryptedDoc = db.parse(new ByteArrayInputStream(newDecryptedData.getBytes(&quot;UTF-8&quot;)));</code> the error changes to <code>[Fatal Error] :1:11: An invalid XML character (Unicode: 0x1d) was found in the element content of the document.</code>. Please help point out what I need to fix and what could probably doing wrong the entire program."}],"owner":{"account_id":29630756,"reputation":1,"user_id":22709244,"display_name":"juniorDev"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700545962,"creation_date":1699857552,"question_id":77472096,"body_markdown":"We have a requirement to encrypt request payloads and decrypt responses that follows the [W3 standards](https://www.w3.org/TR/xmlenc-core1/). I was to get the encryption following what was described [here](https://stackoverflow.com/questions/57261251/examples-or-tutorials-about-santuario-java).\r\n\r\nNow what needs to be now is the decryption which I find not as straight forward like a reverse of the encryption. What I have searched so far discussed symmetric encryption and decryption and involving just some String values.\r\n\r\nThis is how the response looks (namespace URLs shortened):\r\n\r\n```\r\n\r\n&lt;xenc:EncryptedData Type=&quot;xmlenc#Element&quot; xmlns:xenc=&quot;xmlenc#&quot;&gt;\r\n\t&lt;xenc:EncryptionMethod Algorithm=&quot;xmlenc#tripledes-cbc&quot;/&gt;\r\n\t&lt;dsig:KeyInfo xmlns:dsig=&quot;xmldsig#&quot;&gt;\r\n\t\t&lt;xenc:EncryptedKey Recipient=&quot;name:55bb96ec-...&quot;&gt;\r\n\t\t\t&lt;xenc:EncryptionMethod Algorithm=&quot;xmlenc#rsa-1_5&quot;/&gt;\r\n\t\t\t&lt;dsig:KeyInfo&gt;\r\n\t\t\t\t&lt;dsig:KeyName&gt;55bb96ec-....&lt;/dsig:KeyName&gt;\r\n\t\t\t&lt;/dsig:KeyInfo&gt;\r\n\t\t\t&lt;xenc:CipherData&gt;\r\n\t\t\t\t&lt;xenc:CipherValue&gt;nO6Hic8FxebFy.....&lt;/xenc:CipherValue&gt;\r\n\t\t\t&lt;/xenc:CipherData&gt;\r\n\t\t&lt;/xenc:EncryptedKey&gt;\r\n\t&lt;/dsig:KeyInfo&gt;\r\n\t&lt;xenc:CipherData&gt;\r\n\t\t&lt;xenc:CipherValue&gt;j9v2IznqpwCunQiZG....&lt;/xenc:CipherValue&gt;\r\n\t&lt;/xenc:CipherData&gt;\r\n&lt;/xenc:EncryptedData&gt;\r\n```\r\n\r\n\r\nBelow is what I have so far which is encountering below error. The expectation is that the decrypted XML has the actual response structure with digital signature.\r\n\r\n```\r\nException in thread &quot;main&quot; java.security.InvalidKeyException: Wrong key size\r\n\tat com.sun.crypto.provider.DESedeCrypt.init(DESedeCrypt.java:69)\r\n\tat com.sun.crypto.provider.CipherBlockChaining.init(CipherBlockChaining.java:93)\r\n\tat com.sun.crypto.provider.CipherCore.init(CipherCore.java:591)\r\n\tat com.sun.crypto.provider.DESedeCipher.engineInit(DESedeCipher.java:197)\r\n\tat javax.crypto.Cipher.implInit(Cipher.java:809)\r\n\tat javax.crypto.Cipher.chooseProvider(Cipher.java:867)\r\n\tat javax.crypto.Cipher.init(Cipher.java:1399)\r\n\tat javax.crypto.Cipher.init(Cipher.java:1330)\r\n\tat testDecrypt.main(testDecrypt.java:90)\r\n\r\n```\r\n\r\n```\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\nimport java.io.FileOutputStream;\r\nimport java.security.KeyStore;\r\nimport java.security.PrivateKey;\r\nimport java.util.Base64;\r\n\r\nimport javax.crypto.Cipher;\r\nimport javax.crypto.SecretKey;\r\nimport javax.crypto.SecretKeyFactory;\r\nimport javax.crypto.spec.DESedeKeySpec;\r\nimport javax.crypto.spec.IvParameterSpec;\r\nimport javax.xml.parsers.DocumentBuilder;\r\nimport javax.xml.parsers.DocumentBuilderFactory;\r\nimport javax.xml.transform.OutputKeys;\r\nimport javax.xml.transform.Transformer;\r\nimport javax.xml.transform.TransformerFactory;\r\nimport javax.xml.transform.dom.DOMSource;\r\nimport javax.xml.transform.stream.StreamResult;\r\n\r\nimport org.w3c.dom.Document;\r\nimport org.w3c.dom.Element;\r\nimport org.w3c.dom.NodeList;\r\n\r\n\r\n//import com.sun.org.apache.xml.internal.security.utils.Base64;\r\n\r\npublic class testDecrypt {\r\n\tstatic {\r\n\t\torg.apache.xml.security.Init.init();\r\n\t}\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\tString xmlInput = &quot;ENCRYPTED XML FOLDER\\XENC FILE.xml&quot;;\r\n\t\tString keyStorePW = &quot;PFX password&quot;;\r\n\t\tString keyStore = &quot;PFX FILE FOLDER\\PFX File.pfx&quot;;\r\n\t\t\r\n\t\t//build document from input xml file\r\n\t\tDocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\r\n\t\tdbf.setNamespaceAware(true);\r\n\t\tDocumentBuilder db = dbf.newDocumentBuilder();\r\n\t\tDocument doc = db.parse(xmlInput);\r\n\t\t\r\n\t\t//load the Private Key from Keystore\r\n\t\tKeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n\t\tks.load(new FileInputStream(keyStore), keyStorePW.toCharArray());\r\n\t\tString alias = ks.aliases().nextElement();\r\n\t\tPrivateKey privKey = (PrivateKey)ks.getKey(alias, keyStorePW.toCharArray());\r\n\t\tSystem.out.println(&quot;Private Key: &quot;+privKey);\r\n\t\t\r\n\t\t//Get the encrypted Key and data element from input xml\r\n\t\tNodeList cipherValueNodes = doc.getElementsByTagName(&quot;xenc:CipherValue&quot;);\r\n\t\tElement encKey = null;\r\n\t\tElement encData = null;\r\n\t\tfor(int i = 0; i &lt; cipherValueNodes.getLength(); i++) {\r\n\t\t\tif (i == 0) {\r\n\t\t\t\tencKey = (Element)cipherValueNodes.item(i);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tencData = (Element)cipherValueNodes.item(i);\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Encrypted key: &quot;+encKey.getTextContent());\r\n\t\tSystem.out.println(&quot;Encrypted data: &quot;+encData.getTextContent());\r\n\t\t\r\n\t\t//Start decryption of encrypted Key using the private key\r\n\t    Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/NoPadding&quot;);\r\n\t    cipher.init(Cipher.DECRYPT_MODE, privKey);\r\n\t    byte[] encryptedKeyBytes = Base64.getDecoder().decode(encKey.getTextContent());\r\n\t    byte[] decryptedKey = cipher.doFinal(encryptedKeyBytes);\r\n\t    DESedeKeySpec desEdeKeySpec = new DESedeKeySpec(decryptedKey);\r\n\t    SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(&quot;DESede&quot;);\r\n\t    SecretKey key = keyFactory.generateSecret(desEdeKeySpec);\r\n\t    System.out.println(&quot;Key size:&quot;+key.getEncoded().length);\r\n\t\t\r\n\t\t//decrypt the encrypted data element using the secrek key\r\n\t    int ivLen = 8;\r\n    \tbyte[] ivBytes = new byte[ivLen];\r\n    \tbyte[] encryptedDataBytes = Base64.getDecoder().decode(encData.getTextContent());\r\n    \tSystem.arraycopy(encryptedDataBytes, 0, ivBytes, 0, ivLen);\r\n    \tIvParameterSpec ivParameterSpec = new IvParameterSpec(ivBytes);\r\n    \tCipher cipherData = Cipher.getInstance(&quot;DESede/CBC/NoPadding&quot;);\r\n    \tcipherData.init(Cipher.DECRYPT_MODE, key, ivParameterSpec);\r\n    \tString decryptedData = new String(cipher.doFinal(encryptedDataBytes, ivLen, encryptedDataBytes.length - ivLen));\r\n    \tSystem.out.println(&quot;DEcrypted Data: &quot;+decryptedData);\r\n\t\t\r\n\t\t//write the Decrypted XML\r\n\t\tFile encryptionFile = new File(&quot;FILE OUTPUT DIRECTORY\\decryptedInfo2.xml&quot;);\r\n        FileOutputStream f = new FileOutputStream(encryptionFile);\r\n        TransformerFactory factory = TransformerFactory.newInstance();\r\n        Transformer transformer = factory.newTransformer();\r\n        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\r\n        DOMSource source = new DOMSource(doc);\r\n        StreamResult result = new StreamResult(f);\r\n        transformer.transform(source, result);\r\n        f.close();\r\n        System.out.println(\r\n            &quot;Wrote document containing encrypted data to &quot; + encryptionFile.toURI().toURL().toString()\r\n        );\r\n\t}\r\n\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n\r\n","title":"Steps on how to decrypt XML using private key in a PFX keystore with Java","body":"<p>We have a requirement to encrypt request payloads and decrypt responses that follows the <a href=\"https://www.w3.org/TR/xmlenc-core1/\" rel=\"nofollow noreferrer\">W3 standards</a>. I was to get the encryption following what was described <a href=\"https://stackoverflow.com/questions/57261251/examples-or-tutorials-about-santuario-java\">here</a>.</p>\n<p>Now what needs to be now is the decryption which I find not as straight forward like a reverse of the encryption. What I have searched so far discussed symmetric encryption and decryption and involving just some String values.</p>\n<p>This is how the response looks (namespace URLs shortened):</p>\n<pre><code>\n&lt;xenc:EncryptedData Type=&quot;xmlenc#Element&quot; xmlns:xenc=&quot;xmlenc#&quot;&gt;\n    &lt;xenc:EncryptionMethod Algorithm=&quot;xmlenc#tripledes-cbc&quot;/&gt;\n    &lt;dsig:KeyInfo xmlns:dsig=&quot;xmldsig#&quot;&gt;\n        &lt;xenc:EncryptedKey Recipient=&quot;name:55bb96ec-...&quot;&gt;\n            &lt;xenc:EncryptionMethod Algorithm=&quot;xmlenc#rsa-1_5&quot;/&gt;\n            &lt;dsig:KeyInfo&gt;\n                &lt;dsig:KeyName&gt;55bb96ec-....&lt;/dsig:KeyName&gt;\n            &lt;/dsig:KeyInfo&gt;\n            &lt;xenc:CipherData&gt;\n                &lt;xenc:CipherValue&gt;nO6Hic8FxebFy.....&lt;/xenc:CipherValue&gt;\n            &lt;/xenc:CipherData&gt;\n        &lt;/xenc:EncryptedKey&gt;\n    &lt;/dsig:KeyInfo&gt;\n    &lt;xenc:CipherData&gt;\n        &lt;xenc:CipherValue&gt;j9v2IznqpwCunQiZG....&lt;/xenc:CipherValue&gt;\n    &lt;/xenc:CipherData&gt;\n&lt;/xenc:EncryptedData&gt;\n</code></pre>\n<p>Below is what I have so far which is encountering below error. The expectation is that the decrypted XML has the actual response structure with digital signature.</p>\n<pre><code>Exception in thread &quot;main&quot; java.security.InvalidKeyException: Wrong key size\n    at com.sun.crypto.provider.DESedeCrypt.init(DESedeCrypt.java:69)\n    at com.sun.crypto.provider.CipherBlockChaining.init(CipherBlockChaining.java:93)\n    at com.sun.crypto.provider.CipherCore.init(CipherCore.java:591)\n    at com.sun.crypto.provider.DESedeCipher.engineInit(DESedeCipher.java:197)\n    at javax.crypto.Cipher.implInit(Cipher.java:809)\n    at javax.crypto.Cipher.chooseProvider(Cipher.java:867)\n    at javax.crypto.Cipher.init(Cipher.java:1399)\n    at javax.crypto.Cipher.init(Cipher.java:1330)\n    at testDecrypt.main(testDecrypt.java:90)\n\n</code></pre>\n<pre><code>import java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.security.KeyStore;\nimport java.security.PrivateKey;\nimport java.util.Base64;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.SecretKey;\nimport javax.crypto.SecretKeyFactory;\nimport javax.crypto.spec.DESedeKeySpec;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport javax.xml.transform.OutputKeys;\nimport javax.xml.transform.Transformer;\nimport javax.xml.transform.TransformerFactory;\nimport javax.xml.transform.dom.DOMSource;\nimport javax.xml.transform.stream.StreamResult;\n\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.NodeList;\n\n\n//import com.sun.org.apache.xml.internal.security.utils.Base64;\n\npublic class testDecrypt {\n    static {\n        org.apache.xml.security.Init.init();\n    }\n    public static void main(String[] args) throws Exception {\n        String xmlInput = &quot;ENCRYPTED XML FOLDER\\XENC FILE.xml&quot;;\n        String keyStorePW = &quot;PFX password&quot;;\n        String keyStore = &quot;PFX FILE FOLDER\\PFX File.pfx&quot;;\n        \n        //build document from input xml file\n        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n        dbf.setNamespaceAware(true);\n        DocumentBuilder db = dbf.newDocumentBuilder();\n        Document doc = db.parse(xmlInput);\n        \n        //load the Private Key from Keystore\n        KeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;);\n        ks.load(new FileInputStream(keyStore), keyStorePW.toCharArray());\n        String alias = ks.aliases().nextElement();\n        PrivateKey privKey = (PrivateKey)ks.getKey(alias, keyStorePW.toCharArray());\n        System.out.println(&quot;Private Key: &quot;+privKey);\n        \n        //Get the encrypted Key and data element from input xml\n        NodeList cipherValueNodes = doc.getElementsByTagName(&quot;xenc:CipherValue&quot;);\n        Element encKey = null;\n        Element encData = null;\n        for(int i = 0; i &lt; cipherValueNodes.getLength(); i++) {\n            if (i == 0) {\n                encKey = (Element)cipherValueNodes.item(i);\n            }\n            else {\n                encData = (Element)cipherValueNodes.item(i);\n            }\n        }\n        System.out.println(&quot;Encrypted key: &quot;+encKey.getTextContent());\n        System.out.println(&quot;Encrypted data: &quot;+encData.getTextContent());\n        \n        //Start decryption of encrypted Key using the private key\n        Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/NoPadding&quot;);\n        cipher.init(Cipher.DECRYPT_MODE, privKey);\n        byte[] encryptedKeyBytes = Base64.getDecoder().decode(encKey.getTextContent());\n        byte[] decryptedKey = cipher.doFinal(encryptedKeyBytes);\n        DESedeKeySpec desEdeKeySpec = new DESedeKeySpec(decryptedKey);\n        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(&quot;DESede&quot;);\n        SecretKey key = keyFactory.generateSecret(desEdeKeySpec);\n        System.out.println(&quot;Key size:&quot;+key.getEncoded().length);\n        \n        //decrypt the encrypted data element using the secrek key\n        int ivLen = 8;\n        byte[] ivBytes = new byte[ivLen];\n        byte[] encryptedDataBytes = Base64.getDecoder().decode(encData.getTextContent());\n        System.arraycopy(encryptedDataBytes, 0, ivBytes, 0, ivLen);\n        IvParameterSpec ivParameterSpec = new IvParameterSpec(ivBytes);\n        Cipher cipherData = Cipher.getInstance(&quot;DESede/CBC/NoPadding&quot;);\n        cipherData.init(Cipher.DECRYPT_MODE, key, ivParameterSpec);\n        String decryptedData = new String(cipher.doFinal(encryptedDataBytes, ivLen, encryptedDataBytes.length - ivLen));\n        System.out.println(&quot;DEcrypted Data: &quot;+decryptedData);\n        \n        //write the Decrypted XML\n        File encryptionFile = new File(&quot;FILE OUTPUT DIRECTORY\\decryptedInfo2.xml&quot;);\n        FileOutputStream f = new FileOutputStream(encryptionFile);\n        TransformerFactory factory = TransformerFactory.newInstance();\n        Transformer transformer = factory.newTransformer();\n        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\n        DOMSource source = new DOMSource(doc);\n        StreamResult result = new StreamResult(f);\n        transformer.transform(source, result);\n        f.close();\n        System.out.println(\n            &quot;Wrote document containing encrypted data to &quot; + encryptionFile.toURI().toURL().toString()\n        );\n    }\n\n}\n\n\n</code></pre>\n"},{"tags":["java","jvm"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1547603388,"post_id":54209349,"comment_id":95245004,"body_markdown":"here you go - https://docs.oracle.com/javase/8/docs/technotes/guides/visualvm/profiler.html","body":"here you go - <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/visualvm/profiler.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/guides/visualvm/&hellip;</a>"},{"owner":{"account_id":13375769,"reputation":69,"user_id":9652693,"display_name":"MLM520"},"score":0,"creation_date":1547603938,"post_id":54209349,"comment_id":95245092,"body_markdown":"Thanks, I know about this tool, but my supervisor wants to know which methods are responsible for a large amount of memory usage at a certain time, and which methods generate a large number of objects in the heap.","body":"Thanks, I know about this tool, but my supervisor wants to know which methods are responsible for a large amount of memory usage at a certain time, and which methods generate a large number of objects in the heap."},{"owner":{"account_id":13375769,"reputation":69,"user_id":9652693,"display_name":"MLM520"},"score":0,"creation_date":1547604108,"post_id":54209349,"comment_id":95245124,"body_markdown":"For example,Which method produces this String object","body":"For example,Which method produces this String object"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1547606147,"post_id":54209349,"comment_id":95245515,"body_markdown":"How do you collect the data shown in your graph?  The source is important.","body":"How do you collect the data shown in your graph?  The source is important."},{"owner":{"account_id":13375769,"reputation":69,"user_id":9652693,"display_name":"MLM520"},"score":0,"creation_date":1547620345,"post_id":54209349,"comment_id":95248983,"body_markdown":"I used the JavaMelody in this project, but not every project used it, so I wanted to find a generic wayI used the JavaMelody for this project,","body":"I used the JavaMelody in this project, but not every project used it, so I wanted to find a generic wayI used the JavaMelody for this project,"}],"answers":[{"tags":[],"owner":{"account_id":2749918,"reputation":1609,"user_id":2369544,"display_name":"starikoff"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1547632432,"creation_date":1547632432,"answer_id":54214395,"question_id":54209349,"body_markdown":"You need a tool that can do [JVM allocation profiling][1].\r\n\r\nJava Flight Recorder (JFR) can help you with low overhead allocation profiling ([1][2], [2][3]  docs for older versions, the UI looks quite different now, but &quot;Allocations&quot; and &quot;TLAB&quot; are still the words used to find stuff). Make sure that allocation profiling [is enabled][4] in the settings you use. It&#39;s a commercial feature until OpenJDK 11. They say some other tools can do it with low overhead these days too (e.g. [async-profiler][5]).\r\n\r\nIf you don&#39;t care about your app becoming unusably slow and are on JDK &lt; 11(?), VisualVM used to be able to show you stack traces of allocations. I can&#39;t find it in the latest version (1.4.2 as of now), but can find it in JVisualVM shipped with my Oracle JDK 8-something. &quot;Profiler&quot; &gt; check &quot;Settings&quot; &gt; &quot;Memory Settings&quot; &gt; check &quot;Record allocation stack traces&quot;. Start profiling, wait, wait, wait, identify the biggest allocations, right-click, &quot;Take Snapshot and Show Allocation Stack Traces&quot;. It looks like YourKit [does basically the same][6], as well as JProfiler (they call it &quot;allocation recording&quot;). Again: slows down the application a lot, so don&#39;t use it in prod.\r\n\r\n\r\n  [1]: https://www.google.com/search?q=jvm%20allocation%20profiling\r\n  [2]: https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks001.html\r\n  [3]: http://hirt.se/blog/?p=381\r\n  [4]: https://stackoverflow.com/questions/19056826/java-mission-control-heap-profile\r\n  [5]: https://github.com/jvm-profiling-tools/async-profiler\r\n  [6]: https://www.yourkit.com/docs/java/help/allocations.jsp","title":"Java,How do I find out which class or method USES a lot of memory?","body":"<p>You need a tool that can do <a href=\"https://www.google.com/search?q=jvm%20allocation%20profiling\" rel=\"nofollow noreferrer\">JVM allocation profiling</a>.</p>\n\n<p>Java Flight Recorder (JFR) can help you with low overhead allocation profiling (<a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks001.html\" rel=\"nofollow noreferrer\">1</a>, <a href=\"http://hirt.se/blog/?p=381\" rel=\"nofollow noreferrer\">2</a>  docs for older versions, the UI looks quite different now, but \"Allocations\" and \"TLAB\" are still the words used to find stuff). Make sure that allocation profiling <a href=\"https://stackoverflow.com/questions/19056826/java-mission-control-heap-profile\">is enabled</a> in the settings you use. It's a commercial feature until OpenJDK 11. They say some other tools can do it with low overhead these days too (e.g. <a href=\"https://github.com/jvm-profiling-tools/async-profiler\" rel=\"nofollow noreferrer\">async-profiler</a>).</p>\n\n<p>If you don't care about your app becoming unusably slow and are on JDK &lt; 11(?), VisualVM used to be able to show you stack traces of allocations. I can't find it in the latest version (1.4.2 as of now), but can find it in JVisualVM shipped with my Oracle JDK 8-something. \"Profiler\" > check \"Settings\" > \"Memory Settings\" > check \"Record allocation stack traces\". Start profiling, wait, wait, wait, identify the biggest allocations, right-click, \"Take Snapshot and Show Allocation Stack Traces\". It looks like YourKit <a href=\"https://www.yourkit.com/docs/java/help/allocations.jsp\" rel=\"nofollow noreferrer\">does basically the same</a>, as well as JProfiler (they call it \"allocation recording\"). Again: slows down the application a lot, so don't use it in prod.</p>\n"},{"comments":[{"owner":{"account_id":2749918,"reputation":1609,"user_id":2369544,"display_name":"starikoff"},"score":0,"creation_date":1548367811,"post_id":54285074,"comment_id":95527272,"body_markdown":"_&quot;and from which thread it is created&quot;_ -- the last time I checked, I couldn&#39;t find this information in a heap dump, can you maybe give a hint where to look?","body":"<i>&quot;and from which thread it is created&quot;</i> -- the last time I checked, I couldn&#39;t find this information in a heap dump, can you maybe give a hint where to look?"},{"owner":{"account_id":2324956,"reputation":967,"user_id":2039693,"accept_rate":50,"display_name":"Ramesh Subramanian"},"score":0,"creation_date":1548397287,"post_id":54285074,"comment_id":95534226,"body_markdown":"@starikoff , updated the answer for &quot;from which thread it is created&quot;.","body":"@starikoff , updated the answer for &quot;from which thread it is created&quot;."},{"owner":{"account_id":2749918,"reputation":1609,"user_id":2369544,"display_name":"starikoff"},"score":0,"creation_date":1548404579,"post_id":54285074,"comment_id":95536987,"body_markdown":"Thank you for the elaborate comment and for your effort! I think though you are looking at things slightly wrong: this thread is what has a reference to the object at the time of the dump (this is kinda the definition of a &quot;GC root&quot;). And not all objects will have Thread as the GC root at this point; in fact most probably won&#39;t, look into some of your (non-JVM) classes for examples.","body":"Thank you for the elaborate comment and for your effort! I think though you are looking at things slightly wrong: this thread is what has a reference to the object at the time of the dump (this is kinda the definition of a &quot;GC root&quot;). And not all objects will have Thread as the GC root at this point; in fact most probably won&#39;t, look into some of your (non-JVM) classes for examples."}],"tags":[],"owner":{"account_id":2324956,"reputation":967,"user_id":2039693,"accept_rate":50,"display_name":"Ramesh Subramanian"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1548397207,"creation_date":1548055066,"answer_id":54285074,"question_id":54209349,"body_markdown":"You have take a heap dump periodically and analyse these with tools like MAT- Memory Analyzer Tool (https://www.eclipse.org/mat/). The tool provides the which Object / Class occupying more memory and from which thread it is created etc. \r\n\r\nHow to find from which thread particular object is created?\r\n\r\n1. In the MAT, click on the Histogram - It will show the list of classes available in the dump. To demonstrate, let me filter out the class `java.lang.String` only\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n2. Right click any class name , in the popup-window choose **List Objects ---&gt; with outgoing references**\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n3. Above Step list out all the instances of the selected class. Right click any one of the class name and from the pop up choose **Merge Shortest Paths to GC Roots ---&gt; with all references**\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n4. After the above step, you can view the From which Thread class particular object is created.\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mFqTm.png\r\n  [2]: https://i.stack.imgur.com/bslxh.png\r\n  [3]: https://i.stack.imgur.com/N6ob0.png\r\n  [4]: https://i.stack.imgur.com/eT9RO.png","title":"Java,How do I find out which class or method USES a lot of memory?","body":"<p>You have take a heap dump periodically and analyse these with tools like MAT- Memory Analyzer Tool (<a href=\"https://www.eclipse.org/mat/\" rel=\"nofollow noreferrer\">https://www.eclipse.org/mat/</a>). The tool provides the which Object / Class occupying more memory and from which thread it is created etc. </p>\n\n<p>How to find from which thread particular object is created?</p>\n\n<ol>\n<li>In the MAT, click on the Histogram - It will show the list of classes available in the dump. To demonstrate, let me filter out the class <code>java.lang.String</code> only</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/mFqTm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mFqTm.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"2\">\n<li>Right click any class name , in the popup-window choose <strong>List Objects ---> with outgoing references</strong></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/bslxh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bslxh.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"3\">\n<li>Above Step list out all the instances of the selected class. Right click any one of the class name and from the pop up choose <strong>Merge Shortest Paths to GC Roots ---> with all references</strong></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/N6ob0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N6ob0.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"4\">\n<li>After the above step, you can view the From which Thread class particular object is created.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/eT9RO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eT9RO.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700545594,"creation_date":1700545594,"answer_id":77520541,"question_id":54209349,"body_markdown":"If you just want heap you could run `jmap -histo:live &lt;YOUR PID&gt;` and parse the (fairly terse) output.\r\n\r\n[ref][1]\r\n\r\n\r\n  [1]: https://medium.com/@jerolba/measuring-actual-memory-consumption-in-java-jmnemohistosyne-5eed2c1edd65","title":"Java,How do I find out which class or method USES a lot of memory?","body":"<p>If you just want heap you could run <code>jmap -histo:live &lt;YOUR PID&gt;</code> and parse the (fairly terse) output.</p>\n<p><a href=\"https://medium.com/@jerolba/measuring-actual-memory-consumption-in-java-jmnemohistosyne-5eed2c1edd65\" rel=\"nofollow noreferrer\">ref</a></p>\n"}],"owner":{"account_id":13375769,"reputation":69,"user_id":9652693,"display_name":"MLM520"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2797,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1700545594,"creation_date":1547603265,"question_id":54209349,"body_markdown":"[![enter image description here][1]][1]\r\n\r\nThis is a one-day memory curve for my Java project.How do I find out which class or method USES a lot of memory?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RXqpW.png","title":"Java,How do I find out which class or method USES a lot of memory?","body":"<p><a href=\"https://i.stack.imgur.com/RXqpW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RXqpW.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is a one-day memory curve for my Java project.How do I find out which class or method USES a lot of memory?</p>\n"},{"tags":["java","spring"],"answers":[{"comments":[{"owner":{"account_id":62111,"reputation":40153,"user_id":184730,"accept_rate":72,"display_name":"fastcodejava"},"score":0,"creation_date":1271529689,"post_id":2657465,"comment_id":2676644,"body_markdown":"Good answer. So DAO classes can be `final`? They are not usually transactional.","body":"Good answer. So DAO classes can be <code>final</code>? They are not usually transactional."},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":2,"creation_date":1271570901,"post_id":2657465,"comment_id":2678576,"body_markdown":"Well, then _can_, but be careful with that as well. You might at some point add some AOP to them as well.","body":"Well, then <i>can</i>, but be careful with that as well. You might at some point add some AOP to them as well."},{"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"score":2,"creation_date":1305808059,"post_id":2657465,"comment_id":7012459,"body_markdown":"It&#39;s a flaw of those tools to not be able to instrument `final` classes, which are a must for proper OO design (see, for instance, the &quot;Practical API Design&quot; book - or even the GoF book). There *are* ways to instrument final classes; tools like CGLIB are obsolete.","body":"It&#39;s a flaw of those tools to not be able to instrument <code>final</code> classes, which are a must for proper OO design (see, for instance, the &quot;Practical API Design&quot; book - or even the GoF book). There <i>are</i> ways to instrument final classes; tools like CGLIB are obsolete."},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":1,"creation_date":1305808307,"post_id":2657465,"comment_id":7012522,"body_markdown":"@Rogerio the question is about spring, and this is the way to do it in spring, good or bad. So I don&#39;t agree with you (and the downvote). spring uses CGLIB. When you say there are ways, please list these ways. I can only think of aspectj perhaps. Is it this what you mean?","body":"@Rogerio the question is about spring, and this is the way to do it in spring, good or bad. So I don&#39;t agree with you (and the downvote). spring uses CGLIB. When you say there are ways, please list these ways. I can only think of aspectj perhaps. Is it this what you mean?"},{"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"score":1,"creation_date":1305837279,"post_id":2657465,"comment_id":7021365,"body_markdown":"@Bozho: Yes, and Spring also uses AspectJ, which can instrument final classes. At the low level, there are two approaches for runtime bytecode modification that can be used for this sort of thing: java.lang.instrument, and a custom classloader. The first one has the ability of *redefining* classes, in addition to load-time modification. IMO, frameworks like Spring should dump old and limited tools such as CGLIB, Javaassist, etc. and take advantage of java.lang.instrument + ASM.","body":"@Bozho: Yes, and Spring also uses AspectJ, which can instrument final classes. At the low level, there are two approaches for runtime bytecode modification that can be used for this sort of thing: java.lang.instrument, and a custom classloader. The first one has the ability of <i>redefining</i> classes, in addition to load-time modification. IMO, frameworks like Spring should dump old and limited tools such as CGLIB, Javaassist, etc. and take advantage of java.lang.instrument + ASM."},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":0,"creation_date":1305841294,"post_id":2657465,"comment_id":7022329,"body_markdown":"@Rogerio true, but my opinion is that instrumentation and weaving are not exactly pure-OOP :) Compared to not supporting final, I can&#39;t decide which is the lesser evil.","body":"@Rogerio true, but my opinion is that instrumentation and weaving are not exactly pure-OOP :) Compared to not supporting final, I can&#39;t decide which is the lesser evil."},{"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"score":0,"creation_date":1305892365,"post_id":2657465,"comment_id":7031085,"body_markdown":"@Bozho: Whether instrumentation is OOP or not is irrelevant here, as they would be used to implement a tool or framework used by client code. Besides, so what? Is only OOP valid? What about functional programming in Scala, static methods, etc.? About `final`, not supporting it is not an option! That would be equivalent to not supporting `private`, for example; any OO language must support both overridable and non-overridable classes &amp; methods, as they are both essential in OO design. Therefore, libraries/tools/frameworks for those languages must support it too.","body":"@Bozho: Whether instrumentation is OOP or not is irrelevant here, as they would be used to implement a tool or framework used by client code. Besides, so what? Is only OOP valid? What about functional programming in Scala, static methods, etc.? About <code>final</code>, not supporting it is not an option! That would be equivalent to not supporting <code>private</code>, for example; any OO language must support both overridable and non-overridable classes &amp; methods, as they are both essential in OO design. Therefore, libraries/tools/frameworks for those languages must support it too."}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":7,"down_vote_count":1,"up_vote_count":36,"is_accepted":true,"score":35,"last_activity_date":1271484733,"creation_date":1271484733,"answer_id":2657465,"question_id":2657432,"body_markdown":"Don&#39;t make them `final`. If you use any AOP (including transaction support) on concrete classes, spring will use CGLIB to dynamically extend your class in order to make a proxy. And the requirement for CGLIB to work is to have your classes non-`final`. Otherwise an exception will be thrown.","title":"Make Spring Service Classes Final?","body":"<p>Don't make them <code>final</code>. If you use any AOP (including transaction support) on concrete classes, spring will use CGLIB to dynamically extend your class in order to make a proxy. And the requirement for CGLIB to work is to have your classes non-<code>final</code>. Otherwise an exception will be thrown.</p>\n"},{"tags":[],"owner":{"account_id":201403,"reputation":1538,"user_id":447822,"display_name":"Saish"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1700544888,"creation_date":1325181953,"answer_id":8671538,"question_id":2657432,"body_markdown":"Spring will create a JDK dynamic proxy rather than a CGLIB proxy if the following are true:\r\n\r\n1.  aop:config has proxy-target-classes set to false\r\n2.  Any other namespace configurations (e.g. tx:transaction-management) also have proxy-target-classes set to false\r\n3.  Your class implements an interface\r\n\r\nIf all three are true, then you can declare the class final.  (You can even make the class package-private and the constructor private if you like, Spring will be able to instantiate it).\r\n\r\nOtherwise, Spring will create a CGLIB proxy.  You can still declare the class final (assuming it is not decorated with @Repository and you do not have a PersistenceExceptionPostBeanProcessor declared) if there are no public methods in the bean.  Once you have a single public method, you cannot declare the class final with CBLIB proxying.  (Note:  you must have at least a package-private, no-argument constructor when proxying via CGLIB).  \r\n\r\nWhen is the above useful?  Say you have a service interface (all services should generally have interfaces) with an implementation bean that is package private.  The service is using JDK dynamic proxying.  So, it can be final and non-visible outside the package, leaking fewer implementation details.  Say the service needs a data access object.  If no other service uses this DAO, why make it or any of its methods public?  If all the methods on the DAO are package-private, the service implementation can still wire the DAO in and use its methods.  From outside the package, callers only see the interface (a good thing) and any types that are used in the interface signature.  \r\n\r\nFinally (no pun intended), make a class final whenever you can.  Concrete inheritance is both often confusing and abused (see [fragile base problem][1]).  Final classes also allow some compiler optimizations.\r\n\r\n[1]: https://en.wikipedia.org/wiki/Fragile_base_class","title":"Make Spring Service Classes Final?","body":"<p>Spring will create a JDK dynamic proxy rather than a CGLIB proxy if the following are true:</p>\n<ol>\n<li>aop:config has proxy-target-classes set to false</li>\n<li>Any other namespace configurations (e.g. tx:transaction-management) also have proxy-target-classes set to false</li>\n<li>Your class implements an interface</li>\n</ol>\n<p>If all three are true, then you can declare the class final.  (You can even make the class package-private and the constructor private if you like, Spring will be able to instantiate it).</p>\n<p>Otherwise, Spring will create a CGLIB proxy.  You can still declare the class final (assuming it is not decorated with @Repository and you do not have a PersistenceExceptionPostBeanProcessor declared) if there are no public methods in the bean.  Once you have a single public method, you cannot declare the class final with CBLIB proxying.  (Note:  you must have at least a package-private, no-argument constructor when proxying via CGLIB).</p>\n<p>When is the above useful?  Say you have a service interface (all services should generally have interfaces) with an implementation bean that is package private.  The service is using JDK dynamic proxying.  So, it can be final and non-visible outside the package, leaking fewer implementation details.  Say the service needs a data access object.  If no other service uses this DAO, why make it or any of its methods public?  If all the methods on the DAO are package-private, the service implementation can still wire the DAO in and use its methods.  From outside the package, callers only see the interface (a good thing) and any types that are used in the interface signature.</p>\n<p>Finally (no pun intended), make a class final whenever you can.  Concrete inheritance is both often confusing and abused (see <a href=\"https://en.wikipedia.org/wiki/Fragile_base_class\" rel=\"nofollow noreferrer\">fragile base problem</a>).  Final classes also allow some compiler optimizations.</p>\n"}],"owner":{"account_id":62111,"reputation":40153,"user_id":184730,"accept_rate":72,"display_name":"fastcodejava"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14722,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":2657465,"answer_count":2,"score":16,"last_activity_date":1700544888,"creation_date":1271483801,"question_id":2657432,"body_markdown":"Can I make the spring service classes final? Is there any harm doing that? Nobody is going to extend the class. Is there any issue?\r\n\r\n    public final class MyService {\r\n       // Depedencies go here.\r\n    }","title":"Make Spring Service Classes Final?","body":"<p>Can I make the spring service classes final? Is there any harm doing that? Nobody is going to extend the class. Is there any issue?</p>\n\n<pre><code>public final class MyService {\n   // Depedencies go here.\n}\n</code></pre>\n"},{"tags":["java","spring","transactions","annotations"],"answers":[{"comments":[{"owner":{"account_id":21211,"reputation":43403,"user_id":51382,"accept_rate":87,"display_name":"willcodejavaforfood"},"score":0,"creation_date":1291884446,"post_id":4396324,"comment_id":4791988,"body_markdown":"Are you sure about this? I would not expect it to make a difference.","body":"Are you sure about this? I would not expect it to make a difference."},{"owner":{"account_id":4962272,"reputation":525,"user_id":4162708,"accept_rate":53,"display_name":"lily"},"score":1,"creation_date":1574412811,"post_id":4396324,"comment_id":104232204,"body_markdown":"how about if the proxying style is Cglib?","body":"how about if the proxying style is Cglib?"},{"owner":{"account_id":121188,"reputation":5073,"user_id":314089,"accept_rate":60,"display_name":"icyerasor"},"score":1,"creation_date":1629804367,"post_id":4396324,"comment_id":121778484,"body_markdown":"I used the following regex `@Transactional([^{](?!public))+ \\{` to find possible annotations that won&#39;t have any effect (because they are on private, protected, package-private Methods) in our codebase. \nDoesn&#39;t find &quot;self-reference-without-proxy&quot;-calls to public methods of course - is there a plugin or something to spot those?","body":"I used the following regex <code>@Transactional([^{](?!public))+ \\{</code> to find possible annotations that won&#39;t have any effect (because they are on private, protected, package-private Methods) in our codebase.  Doesn&#39;t find &quot;self-reference-without-proxy&quot;-calls to public methods of course - is there a plugin or something to spot those?"}],"tags":[],"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"comment_count":3,"down_vote_count":3,"up_vote_count":267,"is_accepted":false,"score":264,"last_activity_date":1478050447,"creation_date":1291884344,"answer_id":4396324,"question_id":4396284,"body_markdown":"The answer your question is no - `@Transactional` will have no effect if used to annotate private methods. The proxy generator will ignore them.\r\n\r\nThis is documented in [Spring Manual chapter 10.5.6][1]:\r\n\r\n&gt; **Method visibility and `@Transactional`**\r\n&gt; \r\n&gt; When using proxies, you should apply\r\n&gt; the `@Transactional` annotation only\r\n&gt; to methods with public visibility. If\r\n&gt; you do annotate protected, private or\r\n&gt; package-visible methods with the\r\n&gt; `@Transactional` annotation, no error\r\n&gt; is raised, but the annotated method\r\n&gt; does not exhibit the configured\r\n&gt; transactional settings. Consider the\r\n&gt; use of AspectJ (see below) if you need\r\n&gt; to annotate non-public methods.\r\n\r\n\r\n  [1]: http://static.springsource.org/spring/docs/current/spring-framework-reference/html/transaction.html#transaction-declarative-annotations","title":"Does Spring @Transactional attribute work on a private method?","body":"<p>The answer your question is no - <code>@Transactional</code> will have no effect if used to annotate private methods. The proxy generator will ignore them.</p>\n\n<p>This is documented in <a href=\"http://static.springsource.org/spring/docs/current/spring-framework-reference/html/transaction.html#transaction-declarative-annotations\" rel=\"noreferrer\">Spring Manual chapter 10.5.6</a>:</p>\n\n<blockquote>\n  <p><strong>Method visibility and <code>@Transactional</code></strong></p>\n  \n  <p>When using proxies, you should apply\n  the <code>@Transactional</code> annotation only\n  to methods with public visibility. If\n  you do annotate protected, private or\n  package-visible methods with the\n  <code>@Transactional</code> annotation, no error\n  is raised, but the annotated method\n  does not exhibit the configured\n  transactional settings. Consider the\n  use of AspectJ (see below) if you need\n  to annotate non-public methods.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":66000,"reputation":5549,"user_id":193886,"display_name":"ivy"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1291887973,"creation_date":1291884486,"answer_id":4396336,"question_id":4396284,"body_markdown":"The answer is no. Please see [Spring Reference: Using @Transactional](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations)\r\n :\r\n\r\n&gt; The `@Transactional` annotation may be placed before an interface definition, a method on an interface, a class definition, or a *public* method on a class","title":"Does Spring @Transactional attribute work on a private method?","body":"<p>The answer is no. Please see <a href=\"http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations\" rel=\"nofollow\">Spring Reference: Using @Transactional</a>\n :</p>\n\n<blockquote>\n  <p>The <code>@Transactional</code> annotation may be placed before an interface definition, a method on an interface, a class definition, or a <em>public</em> method on a class</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":21211,"reputation":43403,"user_id":51382,"accept_rate":87,"display_name":"willcodejavaforfood"},"score":0,"creation_date":1291885363,"post_id":4396417,"comment_id":4792106,"body_markdown":"Do you mean bean = new Bean();?","body":"Do you mean bean = new Bean();?"},{"owner":{"account_id":1078,"reputation":33615,"user_id":1431,"accept_rate":71,"display_name":"Juha Syrj&#228;l&#228;"},"score":0,"creation_date":1291885586,"post_id":4396417,"comment_id":4792135,"body_markdown":"Nope. If I create beans with new Bean(), the annotation will never work at least without using Aspect-J.","body":"Nope. If I create beans with new Bean(), the annotation will never work at least without using Aspect-J."},{"owner":{"account_id":84599,"reputation":15850,"user_id":236370,"accept_rate":87,"display_name":"manuel aldana"},"score":2,"creation_date":1310048310,"post_id":4396417,"comment_id":7803945,"body_markdown":"thanks! This explains weird behaviour I was observing. Quite counter intuitive this internal method invocation restriction...","body":"thanks! This explains weird behaviour I was observing. Quite counter intuitive this internal method invocation restriction..."}],"tags":[],"owner":{"account_id":1078,"reputation":33615,"user_id":1431,"accept_rate":71,"display_name":"Juha Syrj&#228;l&#228;"},"comment_count":3,"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1291887890,"creation_date":1291885229,"answer_id":4396417,"question_id":4396284,"body_markdown":"By default the `@Transactional` attribute works only when calling an annotated method on a reference obtained from applicationContext.\n\n\n\n    public class Bean {\n      public void doStuff() {\n        doTransactionStuff();\n      }\n      @Transactional\n      public void doTransactionStuff() {\n\n      }\n    }\n\n\n\nThis will open a transaction:\n\n    Bean bean = (Bean)appContext.getBean(&quot;bean&quot;);\n    bean.doTransactionStuff();\n\nThis will not:\n\n    Bean bean = (Bean)appContext.getBean(&quot;bean&quot;);\n    bean.doStuff();\n\n[Spring Reference: Using @Transactional](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations)\n\n&gt; Note: In proxy mode (which is the default), only &#39;external&#39; method calls coming in through the proxy will be intercepted. This means that &#39;self-invocation&#39;, i.e. a method within the target object calling some other method of the target object, won&#39;t lead to an actual transaction at runtime even if the invoked method is marked with `@Transactional`!\n&gt;\n&gt; Consider the use of AspectJ mode (see below) if you expect self-invocations to be wrapped with transactions as well. In this case, there won&#39;t be a proxy in the first place; instead, the target class will be &#39;weaved&#39; (i.e. its byte code will be modified) in order to turn `@Transactional` into runtime behavior on any kind of method.","title":"Does Spring @Transactional attribute work on a private method?","body":"<p>By default the <code>@Transactional</code> attribute works only when calling an annotated method on a reference obtained from applicationContext.</p>\n<pre><code>public class Bean {\n  public void doStuff() {\n    doTransactionStuff();\n  }\n  @Transactional\n  public void doTransactionStuff() {\n\n  }\n}\n</code></pre>\n<p>This will open a transaction:</p>\n<pre><code>Bean bean = (Bean)appContext.getBean(&quot;bean&quot;);\nbean.doTransactionStuff();\n</code></pre>\n<p>This will not:</p>\n<pre><code>Bean bean = (Bean)appContext.getBean(&quot;bean&quot;);\nbean.doStuff();\n</code></pre>\n<p><a href=\"http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations\" rel=\"noreferrer\">Spring Reference: Using @Transactional</a></p>\n<blockquote>\n<p>Note: In proxy mode (which is the default), only 'external' method calls coming in through the proxy will be intercepted. This means that 'self-invocation', i.e. a method within the target object calling some other method of the target object, won't lead to an actual transaction at runtime even if the invoked method is marked with <code>@Transactional</code>!</p>\n<p>Consider the use of AspectJ mode (see below) if you expect self-invocations to be wrapped with transactions as well. In this case, there won't be a proxy in the first place; instead, the target class will be 'weaved' (i.e. its byte code will be modified) in order to turn <code>@Transactional</code> into runtime behavior on any kind of method.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":105902,"reputation":3968,"user_id":282345,"accept_rate":88,"display_name":"asgs"},"score":0,"creation_date":1539856302,"post_id":4396526,"comment_id":92656263,"body_markdown":"could you add a reference to `BeanSelfAware`? It doesn&#39;t look like a Spring&#39;s class","body":"could you add a reference to <code>BeanSelfAware</code>? It doesn&#39;t look like a Spring&#39;s class"},{"owner":{"account_id":145555,"reputation":21469,"user_id":355438,"display_name":"Ilya Serbis"},"score":0,"creation_date":1557089596,"post_id":4396526,"comment_id":98639698,"body_markdown":"@asgs Suppose, it&#39;s about self injection (provide a bean with an instance of itself wrapped into a proxy). You can see examples in https://stackoverflow.com/q/3423972/355438.","body":"@asgs Suppose, it&#39;s about self injection (provide a bean with an instance of itself wrapped into a proxy). You can see examples in <a href=\"https://stackoverflow.com/q/3423972/355438\">stackoverflow.com/q/3423972/355438</a>."}],"tags":[],"owner":{"account_id":255845,"reputation":69,"user_id":536161,"accept_rate":50,"display_name":"user536161"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1539856279,"creation_date":1291886119,"answer_id":4396526,"question_id":4396284,"body_markdown":"Spring Docs explain that  \r\n\r\n&gt; In proxy mode (which is the default), only external method calls\r\n&gt; coming in through the proxy are intercepted. This means that\r\n&gt; self-invocation, in effect, a method within the target object calling\r\n&gt; another method of the target object, will not lead to an actual\r\n&gt; transaction at runtime even if the invoked method is marked with\r\n&gt; @Transactional.\r\n&gt; \r\n&gt; Consider the use of AspectJ mode (see mode attribute in table below)\r\n&gt; if you expect self-invocations to be wrapped with transactions as\r\n&gt; well. In this case, there will not be a proxy in the first place;\r\n&gt; instead, the target class will be weaved (that is, its byte code will\r\n&gt; be modified) in order to turn @Transactional into runtime behavior on\r\n&gt; any kind of method.\r\n\r\nAnother way is user **BeanSelfAware**","title":"Does Spring @Transactional attribute work on a private method?","body":"<p>Spring Docs explain that  </p>\n\n<blockquote>\n  <p>In proxy mode (which is the default), only external method calls\n  coming in through the proxy are intercepted. This means that\n  self-invocation, in effect, a method within the target object calling\n  another method of the target object, will not lead to an actual\n  transaction at runtime even if the invoked method is marked with\n  @Transactional.</p>\n  \n  <p>Consider the use of AspectJ mode (see mode attribute in table below)\n  if you expect self-invocations to be wrapped with transactions as\n  well. In this case, there will not be a proxy in the first place;\n  instead, the target class will be weaved (that is, its byte code will\n  be modified) in order to turn @Transactional into runtime behavior on\n  any kind of method.</p>\n</blockquote>\n\n<p>Another way is user <strong>BeanSelfAware</strong></p>\n"},{"comments":[{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":5,"creation_date":1291888731,"post_id":4396530,"comment_id":4792657,"body_markdown":"Both points are not necessarily true. The first is incorrect - private methods *can* be invoked reflectively, but the proxy discovering logic chooses not to do so. The second point is only true for interface-based JDK proxies, but not for CGLIB subclass-based proxies.","body":"Both points are not necessarily true. The first is incorrect - private methods <i>can</i> be invoked reflectively, but the proxy discovering logic chooses not to do so. The second point is only true for interface-based JDK proxies, but not for CGLIB subclass-based proxies."},{"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":0,"creation_date":1291889117,"post_id":4396530,"comment_id":4792721,"body_markdown":"@skaffman: 1 - i make my statment more precise, 2. But the default Proxy is the Interface based - isn&#39;t it?","body":"@skaffman: 1 - i make my statment more precise, 2. But the default Proxy is the Interface based - isn&#39;t it?"},{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":3,"creation_date":1291890916,"post_id":4396530,"comment_id":4793024,"body_markdown":"That depends whether the target uses interfaces or not. If it doesn&#39;t, CGLIB is used.","body":"That depends whether the target uses interfaces or not. If it doesn&#39;t, CGLIB is used."},{"owner":{"account_id":2151963,"reputation":620,"user_id":1908087,"display_name":"phil"},"score":0,"creation_date":1393577403,"post_id":4396530,"comment_id":33504496,"body_markdown":"canu tell me the reson or some reference why cglib can not but aspectj can ?","body":"canu tell me the reson or some reference why cglib can not but aspectj can ?"},{"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":0,"creation_date":1393578586,"post_id":4396530,"comment_id":33505150,"body_markdown":"@phil: I added a link to the reference.","body":"@phil: I added a link to the reference."},{"owner":{"account_id":1540226,"reputation":1045,"user_id":1435079,"display_name":"Lawrence"},"score":1,"creation_date":1442487243,"post_id":4396530,"comment_id":53106438,"body_markdown":"Please don&#39;t shoot me but it is my opinion that if you are putting @Transactional on a private method, you don&#39;t know what you&#39;re doing. You shouldn&#39; do that.","body":"Please don&#39;t shoot me but it is my opinion that if you are putting @Transactional on a private method, you don&#39;t know what you&#39;re doing. You shouldn&#39; do that."},{"owner":{"account_id":9135083,"reputation":1797,"user_id":6795054,"display_name":"Michael Ouyang"},"score":1,"creation_date":1587027954,"post_id":4396530,"comment_id":108349280,"body_markdown":"Reference from the link in answer block, if you want to use Spring Proxies [default environment], put annotation on doStuff() and call doPrivateStuff() using ((Bean) AopContext.currentProxy()).doPrivateStuff(); It will execute both methods in one same transaction if the propagation is reeuired [default environment].","body":"Reference from the link in answer block, if you want to use Spring Proxies [default environment], put annotation on doStuff() and call doPrivateStuff() using ((Bean) AopContext.currentProxy()).doPrivateStuff(); It will execute both methods in one same transaction if the propagation is reeuired [default environment]."},{"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":1,"creation_date":1587107354,"post_id":4396530,"comment_id":108382982,"body_markdown":"@MichaelOuyang: thank you for pointing out this solution. But in the referenced Spring documentation, this approach is described this way: _&quot;The next approach is absolutely horrendous, and I am almost reticent to point it out precisely because it is so horrendous. You can (choke!) totally tie the logic within your class to Spring AOP by doing this&quot;_","body":"@MichaelOuyang: thank you for pointing out this solution. But in the referenced Spring documentation, this approach is described this way: <i>&quot;The next approach is absolutely horrendous, and I am almost reticent to point it out precisely because it is so horrendous. You can (choke!) totally tie the logic within your class to Spring AOP by doing this&quot;</i>"},{"owner":{"account_id":12969674,"reputation":713,"user_id":9375838,"display_name":"Leena"},"score":0,"creation_date":1610515123,"post_id":4396530,"comment_id":116154939,"body_markdown":"@Ralph So, if I have added Transactional over a public method with a db save operation, but this public method is internally calling a private method which also has a db save operation, then both the db operations together will be considered as a trancaction right?( i.e one fails other will get rolled back)","body":"@Ralph So, if I have added Transactional over a public method with a db save operation, but this public method is internally calling a private method which also has a db save operation, then both the db operations together will be considered as a trancaction right?( i.e one fails other will get rolled back)"}],"tags":[],"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"comment_count":9,"down_vote_count":0,"up_vote_count":239,"is_accepted":true,"score":239,"last_activity_date":1600185093,"creation_date":1291886135,"answer_id":4396530,"question_id":4396284,"body_markdown":"The Question is not private or public, the question is: How is it invoked and which AOP implementation you use!\r\n\r\nIf you use (default) Spring Proxy AOP, then all AOP functionality provided by Spring (like `@Transactional`) will only be taken into account if the call goes through the proxy. -- This is normally the case if the annotated method is invoked from **another** bean.\r\n\r\nThis has two implications:\r\n\r\n  - Because private methods must not be invoked from another bean (the exception is reflection), their `@Transactional` Annotation is not taken into account.\r\n  - If the method is public, but it is invoked from the same bean, it will not be taken into account either (this statement is only correct if (default) Spring Proxy AOP is used).\r\n\r\n\r\n@See [Spring Reference: Chapter 9.6 9.6 Proxying mechanisms][1]\r\n\r\nIMHO you should use the aspectJ mode, instead of the Spring Proxies, that will overcome the problem. And the AspectJ Transactional Aspects are woven even into private methods (checked for Spring 3.0).\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/3.2.4.RELEASE/spring-framework-reference/html/aop.html#aop-proxying","title":"Does Spring @Transactional attribute work on a private method?","body":"<p>The Question is not private or public, the question is: How is it invoked and which AOP implementation you use!</p>\n<p>If you use (default) Spring Proxy AOP, then all AOP functionality provided by Spring (like <code>@Transactional</code>) will only be taken into account if the call goes through the proxy. -- This is normally the case if the annotated method is invoked from <strong>another</strong> bean.</p>\n<p>This has two implications:</p>\n<ul>\n<li>Because private methods must not be invoked from another bean (the exception is reflection), their <code>@Transactional</code> Annotation is not taken into account.</li>\n<li>If the method is public, but it is invoked from the same bean, it will not be taken into account either (this statement is only correct if (default) Spring Proxy AOP is used).</li>\n</ul>\n<p>@See <a href=\"http://docs.spring.io/spring/docs/3.2.4.RELEASE/spring-framework-reference/html/aop.html#aop-proxying\" rel=\"noreferrer\">Spring Reference: Chapter 9.6 9.6 Proxying mechanisms</a></p>\n<p>IMHO you should use the aspectJ mode, instead of the Spring Proxies, that will overcome the problem. And the AspectJ Transactional Aspects are woven even into private methods (checked for Spring 3.0).</p>\n"},{"comments":[{"owner":{"account_id":4962272,"reputation":525,"user_id":4162708,"accept_rate":53,"display_name":"lily"},"score":0,"creation_date":1574412881,"post_id":35687786,"comment_id":104232242,"body_markdown":"if the proxying method is cglib, there is no need to implements a interface of which the method should be public, then it is able to use @Transactional on private methods?","body":"if the proxying method is cglib, there is no need to implements a interface of which the method should be public, then it is able to use @Transactional on private methods?"},{"owner":{"account_id":2372918,"reputation":4836,"user_id":2077101,"accept_rate":64,"display_name":"James Watkins"},"score":0,"creation_date":1592449751,"post_id":35687786,"comment_id":110431502,"body_markdown":"Yes, it works on private methods, and without interfaces! As long as AspectJ is configured properly, it basically guarantees working method decorators. And user536161 pointed out in his answer that it will even work on self-invocations. It&#39;s really cool, and just a tiny bit scary.","body":"Yes, it works on private methods, and without interfaces! As long as AspectJ is configured properly, it basically guarantees working method decorators. And user536161 pointed out in his answer that it will even work on self-invocations. It&#39;s really cool, and just a tiny bit scary."}],"tags":[],"owner":{"account_id":2372918,"reputation":4836,"user_id":2077101,"accept_rate":64,"display_name":"James Watkins"},"comment_count":2,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1456690896,"creation_date":1456690896,"answer_id":35687786,"question_id":4396284,"body_markdown":"Yes, it is possible to use @Transactional on private methods, but as others have mentioned this won&#39;t work out of the box. You need to use AspectJ. It took me some time to figure out how to get it working. I will share my results.\r\n\r\nI chose to use compile-time weaving instead of load-time weaving because I think it&#39;s an overall better option. Also, I&#39;m using Java 8 so you may need to adjust some parameters.\r\n\r\nFirst, add the dependency for aspectjrt.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n        &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n        &lt;version&gt;1.8.8&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThen add the AspectJ plugin to do the actual bytecode weaving in Maven (this may not be a minimal example).\r\n\r\n\t&lt;plugin&gt;\r\n\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.8&lt;/version&gt;\r\n\t\t&lt;configuration&gt;\r\n\t\t\t&lt;complianceLevel&gt;1.8&lt;/complianceLevel&gt;\r\n\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t&lt;aspectLibraries&gt;\r\n\t\t\t\t&lt;aspectLibrary&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/aspectLibrary&gt;\r\n\t\t\t&lt;/aspectLibraries&gt;\r\n\t\t&lt;/configuration&gt;\r\n\t\t&lt;executions&gt;\r\n\t\t\t&lt;execution&gt;\r\n\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t&lt;goal&gt;compile&lt;/goal&gt;\r\n\t\t\t\t&lt;/goals&gt;\r\n\t\t\t&lt;/execution&gt;\r\n\t\t&lt;/executions&gt;\r\n\t&lt;/plugin&gt;\r\n\r\nFinally add this to your config class\r\n\r\n    @EnableTransactionManagement(mode = AdviceMode.ASPECTJ)\r\n\r\nNow you should be able to use @Transactional on private methods.\r\n\r\nOne caveat to this approach: You will need to configure your IDE to be aware of AspectJ otherwise if you run the app via Eclipse for example it may not work. Make sure you test against a direct Maven build as a sanity check.","title":"Does Spring @Transactional attribute work on a private method?","body":"<p>Yes, it is possible to use @Transactional on private methods, but as others have mentioned this won't work out of the box. You need to use AspectJ. It took me some time to figure out how to get it working. I will share my results.</p>\n\n<p>I chose to use compile-time weaving instead of load-time weaving because I think it's an overall better option. Also, I'm using Java 8 so you may need to adjust some parameters.</p>\n\n<p>First, add the dependency for aspectjrt.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n    &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n    &lt;version&gt;1.8.8&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Then add the AspectJ plugin to do the actual bytecode weaving in Maven (this may not be a minimal example).</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.8&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;complianceLevel&gt;1.8&lt;/complianceLevel&gt;\n        &lt;source&gt;1.8&lt;/source&gt;\n        &lt;target&gt;1.8&lt;/target&gt;\n        &lt;aspectLibraries&gt;\n            &lt;aspectLibrary&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n            &lt;/aspectLibrary&gt;\n        &lt;/aspectLibraries&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;compile&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>Finally add this to your config class</p>\n\n<pre><code>@EnableTransactionManagement(mode = AdviceMode.ASPECTJ)\n</code></pre>\n\n<p>Now you should be able to use @Transactional on private methods.</p>\n\n<p>One caveat to this approach: You will need to configure your IDE to be aware of AspectJ otherwise if you run the app via Eclipse for example it may not work. Make sure you test against a direct Maven build as a sanity check.</p>\n"},{"comments":[{"owner":{"account_id":163820,"reputation":11607,"user_id":386201,"accept_rate":75,"display_name":"Stuck"},"score":1,"creation_date":1587755404,"post_id":52989925,"comment_id":108644690,"body_markdown":"Good to show `TransactionTemplate` usage, but please call that second method `..RequiresTransaction` rather than `..InTransaction`.  Always name stuff how you would like to read it a year later. Also I would argue to think if it really requires a second private method: Either put its content directly in the anonymous `execute` implementation or if that becomes messy it might be an indication to split of the implementation into another service that you then can annotate `@Transactional`.","body":"Good to show <code>TransactionTemplate</code> usage, but please call that second method <code>..RequiresTransaction</code> rather than <code>..InTransaction</code>.  Always name stuff how you would like to read it a year later. Also I would argue to think if it really requires a second private method: Either put its content directly in the anonymous <code>execute</code> implementation or if that becomes messy it might be an indication to split of the implementation into another service that you then can annotate <code>@Transactional</code>."},{"owner":{"account_id":2590005,"reputation":1317,"user_id":2244915,"accept_rate":75,"display_name":"loonis"},"score":0,"creation_date":1588668943,"post_id":52989925,"comment_id":108979965,"body_markdown":"@Stuck, the 2nd method is indeed not necessary, but it answers the original question which is how to apply a spring transaction on a private method","body":"@Stuck, the 2nd method is indeed not necessary, but it answers the original question which is how to apply a spring transaction on a private method"},{"owner":{"account_id":163820,"reputation":11607,"user_id":386201,"accept_rate":75,"display_name":"Stuck"},"score":0,"creation_date":1588671261,"post_id":52989925,"comment_id":108981078,"body_markdown":"yes, I already upvoted the answer but wanted to share some context and thoughts about how to apply it, because I think from an architecture standpoint this situation is a potential indication for a design flaw.","body":"yes, I already upvoted the answer but wanted to share some context and thoughts about how to apply it, because I think from an architecture standpoint this situation is a potential indication for a design flaw."}],"tags":[],"owner":{"account_id":2590005,"reputation":1317,"user_id":2244915,"accept_rate":75,"display_name":"loonis"},"comment_count":3,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1623671910,"creation_date":1540472421,"answer_id":52989925,"question_id":4396284,"body_markdown":"If you need to wrap a private method inside a transaction and don&#39;t want to use AspectJ, you can use [`TransactionTemplate`][1].\r\n\r\n    @Service\r\n    public class MyService {\r\n    \t@Autowired\r\n    \tprivate TransactionTemplate transactionTemplate;\r\n    \r\n    \tprivate void process() {\r\n    \t\ttransactionTemplate.executeWithoutResult(status -&gt; processInTransaction());\r\n    \t}\r\n    \r\n    \tprivate void processInTransaction(){\r\n    \t\t//...\r\n    \t}\r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/support/TransactionTemplate.html","title":"Does Spring @Transactional attribute work on a private method?","body":"<p>If you need to wrap a private method inside a transaction and don't want to use AspectJ, you can use <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/support/TransactionTemplate.html\" rel=\"noreferrer\"><code>TransactionTemplate</code></a>.</p>\n<pre><code>@Service\npublic class MyService {\n    @Autowired\n    private TransactionTemplate transactionTemplate;\n\n    private void process() {\n        transactionTemplate.executeWithoutResult(status -&gt; processInTransaction());\n    }\n\n    private void processInTransaction(){\n        //...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":145555,"reputation":21469,"user_id":355438,"display_name":"Ilya Serbis"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1558964521,"creation_date":1557090726,"answer_id":55996479,"question_id":4396284,"body_markdown":"Same way as [@loonis suggested][1] to use [TransactionTemplate][2] one may use this helper component (Kotlin):\r\n\r\n    @Component\r\n    class TransactionalUtils {\r\n        /**\r\n         * Execute any [block] of code (even private methods)\r\n         * as if it was effectively [Transactional]\r\n         */\r\n        @Transactional\r\n        fun &lt;R&gt; executeAsTransactional(block: () -&gt; R): R {\r\n            return block()\r\n        }\r\n    }\r\n\r\nUsage:\r\n\r\n    @Service\r\n    class SomeService(private val transactionalUtils: TransactionalUtils) {\r\n\r\n        fun foo() {\r\n            transactionalUtils.executeAsTransactional { transactionalFoo() }\r\n        }\r\n\r\n        private fun transactionalFoo() {\r\n            println(&quot;This method is executed within transaction&quot;)\r\n        }\r\n    }\r\n\r\nDon&#39;t know whether `TransactionTemplate` reuse existing transaction or not but this code definitely do.\r\n\r\n  [1]: https://stackoverflow.com/a/52989925/355438\r\n  [2]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/support/TransactionTemplate.html","title":"Does Spring @Transactional attribute work on a private method?","body":"<p>Same way as <a href=\"https://stackoverflow.com/a/52989925/355438\">@loonis suggested</a> to use <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/support/TransactionTemplate.html\" rel=\"nofollow noreferrer\">TransactionTemplate</a> one may use this helper component (Kotlin):</p>\n\n<pre><code>@Component\nclass TransactionalUtils {\n    /**\n     * Execute any [block] of code (even private methods)\n     * as if it was effectively [Transactional]\n     */\n    @Transactional\n    fun &lt;R&gt; executeAsTransactional(block: () -&gt; R): R {\n        return block()\n    }\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>@Service\nclass SomeService(private val transactionalUtils: TransactionalUtils) {\n\n    fun foo() {\n        transactionalUtils.executeAsTransactional { transactionalFoo() }\n    }\n\n    private fun transactionalFoo() {\n        println(\"This method is executed within transaction\")\n    }\n}\n</code></pre>\n\n<p>Don't know whether <code>TransactionTemplate</code> reuse existing transaction or not but this code definitely do.</p>\n"}],"owner":{"account_id":1078,"reputation":33615,"user_id":1431,"accept_rate":71,"display_name":"Juha Syrj&#228;l&#228;"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179913,"favorite_count":0,"down_vote_count":0,"up_vote_count":266,"accepted_answer_id":4396530,"answer_count":8,"score":266,"last_activity_date":1700544602,"creation_date":1291883932,"question_id":4396284,"body_markdown":"If I have a [@Transactional](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/transaction/annotation/Transactional.html) annotation on a private method in a Spring bean, does the annotation have any effect?\r\n\r\nIf the `@Transactional` annotation is on a public method, it works and opens a transaction.\r\n\r\n    public class Bean {\r\n      public void doStuff() {\r\n         doPrivateStuff();\r\n      }\r\n      @Transactional\r\n      private void doPrivateStuff() {\r\n  \r\n      }\r\n    }\r\n   \r\n    ...\r\n\r\n    Bean bean = (Bean)appContext.getBean(&quot;bean&quot;);\r\n    bean.doStuff();\r\n","title":"Does Spring @Transactional attribute work on a private method?","body":"<p>If I have a <a href=\"http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/transaction/annotation/Transactional.html\" rel=\"nofollow noreferrer\">@Transactional</a> annotation on a private method in a Spring bean, does the annotation have any effect?</p>\n<p>If the <code>@Transactional</code> annotation is on a public method, it works and opens a transaction.</p>\n<pre><code>public class Bean {\n  public void doStuff() {\n     doPrivateStuff();\n  }\n  @Transactional\n  private void doPrivateStuff() {\n\n  }\n}\n\n...\n\nBean bean = (Bean)appContext.getBean(&quot;bean&quot;);\nbean.doStuff();\n</code></pre>\n"},{"tags":["java","amazon-web-services","amazon-ec2"],"answers":[{"comments":[{"owner":{"account_id":8327519,"reputation":1743,"user_id":6257144,"display_name":"CodeTalker"},"score":1,"creation_date":1591011837,"post_id":62131306,"comment_id":109886189,"body_markdown":"Ohh my god!! Why didn&#39;t you come in my life earlier? You saved my life!! Thank you so much. I have been searching for it for too long.","body":"Ohh my god!! Why didn&#39;t you come in my life earlier? You saved my life!! Thank you so much. I have been searching for it for too long."},{"owner":{"account_id":18477889,"reputation":32901,"user_id":13460933,"display_name":"Chris Williams"},"score":1,"creation_date":1591012037,"post_id":62131306,"comment_id":109886292,"body_markdown":"Haha, glad I was of assistance :)","body":"Haha, glad I was of assistance :)"}],"tags":[],"owner":{"account_id":18477889,"reputation":32901,"user_id":13460933,"display_name":"Chris Williams"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1591011542,"creation_date":1591011542,"answer_id":62131306,"question_id":62131226,"body_markdown":"Instances do not have a name, they instead have tags which are MetaData key values that are attached to the instance.\r\n\r\nYou will have a tag with the key of &quot;Name&quot;.\r\n\r\nWhat you would want to be looking at is the [withTagSpecifications](https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/ec2/model/RunInstancesRequest.html#withTagSpecifications-com.amazonaws.services.ec2.model.TagSpecification...-) argument.","title":"How to provide name of the Instance while creating aws ec2 using java aws sdk","body":"<p>Instances do not have a name, they instead have tags which are MetaData key values that are attached to the instance.</p>\n\n<p>You will have a tag with the key of \"Name\".</p>\n\n<p>What you would want to be looking at is the <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/ec2/model/RunInstancesRequest.html#withTagSpecifications-com.amazonaws.services.ec2.model.TagSpecification...-\" rel=\"nofollow noreferrer\">withTagSpecifications</a> argument.</p>\n"},{"tags":[],"owner":{"account_id":29372647,"reputation":1,"user_id":22504905,"display_name":"ronak thakor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700544420,"creation_date":1700544420,"answer_id":77520483,"question_id":62131226,"body_markdown":"you can use Tags , it will be your instance name \r\n\r\nhere is how you can give the name to your instance using AWS SDK 2.x \r\n\r\n      private static final String TAG = &quot;whatever you want to keep&quot;;\r\n    private static final String AMI_ID = &quot;your_aws_AMI_ID&quot;;\r\n\r\n    public static void main(String[] args) {\r\n\r\n        final AmazonEC2 ec2 = Ec2Config.createEC2Client();\r\n\r\n        RunInstancesRequest run_request = new RunInstancesRequest()\r\n                .withImageId(AMI_ID)\r\n                .withInstanceType(InstanceType.T1Micro)\r\n                .withMaxCount(1)\r\n                .withMinCount(1);\r\n\r\n        RunInstancesResult run_response = ec2.runInstances(run_request);\r\n\r\n        String reservation_id = run_response.getReservation().getInstances().get(0).getInstanceId();\r\n\r\n            System.out.println(&quot;ReservationID :- &quot;+ reservation_id);\r\n\r\n        Tag tag = new Tag()\r\n                .withKey(&quot;Name&quot;)\r\n                .withValue(TAG);\r\n\r\n        CreateTagsRequest tag_request = new CreateTagsRequest()\r\n                .withResources(reservation_id)\r\n                .withTags(tag);\r\n\r\n        CreateTagsResult tag_response = ec2.createTags(tag_request);\r\n\r\n        System.out.printf(\r\n                &quot;Successfully started EC2 instance %s based on AMI %s&quot;,\r\n                reservation_id, AMI_ID);\r\n    }\r\n\r\nHere is the whole method to create your instance with custom name","title":"How to provide name of the Instance while creating aws ec2 using java aws sdk","body":"<p>you can use Tags , it will be your instance name</p>\n<p>here is how you can give the name to your instance using AWS SDK 2.x</p>\n<pre><code>  private static final String TAG = &quot;whatever you want to keep&quot;;\nprivate static final String AMI_ID = &quot;your_aws_AMI_ID&quot;;\n\npublic static void main(String[] args) {\n\n    final AmazonEC2 ec2 = Ec2Config.createEC2Client();\n\n    RunInstancesRequest run_request = new RunInstancesRequest()\n            .withImageId(AMI_ID)\n            .withInstanceType(InstanceType.T1Micro)\n            .withMaxCount(1)\n            .withMinCount(1);\n\n    RunInstancesResult run_response = ec2.runInstances(run_request);\n\n    String reservation_id = run_response.getReservation().getInstances().get(0).getInstanceId();\n\n        System.out.println(&quot;ReservationID :- &quot;+ reservation_id);\n\n    Tag tag = new Tag()\n            .withKey(&quot;Name&quot;)\n            .withValue(TAG);\n\n    CreateTagsRequest tag_request = new CreateTagsRequest()\n            .withResources(reservation_id)\n            .withTags(tag);\n\n    CreateTagsResult tag_response = ec2.createTags(tag_request);\n\n    System.out.printf(\n            &quot;Successfully started EC2 instance %s based on AMI %s&quot;,\n            reservation_id, AMI_ID);\n}\n</code></pre>\n<p>Here is the whole method to create your instance with custom name</p>\n"}],"owner":{"account_id":8327519,"reputation":1743,"user_id":6257144,"display_name":"CodeTalker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":348,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":62131306,"answer_count":2,"score":2,"last_activity_date":1700544420,"creation_date":1591011264,"question_id":62131226,"body_markdown":"I am finding it very hard to figure out how to provide the *name* of ec2 instance while creating ec2 instance using Aws Java SDK.\r\n\r\nI am using following method to create ec2 Instance- \r\n\r\n```\r\n  RunInstancesRequest runInstancesRequest = new RunInstancesRequest();\r\n            runInstancesRequest.withImageId(ec2Configuration.getImageId())\r\n                    .withInstanceType(ec2Configuration.getInstanceType())\r\n                    .withMinCount(ec2Configuration.getMincount())\r\n                    .withMaxCount(ec2Configuration.getMaxcount())\r\n                    .withKeyName(ec2Configuration.getKeyPairName())\r\n                    .withSecurityGroupIds(Arrays.asList(ec2Configuration.getSgId()));\r\n            if (ec2Configuration.isEbsOptimized())\r\n                runInstancesRequest.withMonitoring(true);\r\n            if (ec2Configuration.isEbsOptimized())\r\n                runInstancesRequest.withEbsOptimized(true);\r\n            try {\r\n                RunInstancesResult result = amazonEC2Client.runInstances(\r\n                        runInstancesRequest);\r\n                } catch (Exception e) {\r\n                // all exception stuffs\r\n                }\r\n``` \r\n\r\nI could not find anything anywhere like `.withName(&quot;myVmName&quot;).withInstanceType(...)` or `.define(&quot;myVmName&quot;).withInstanceType()`.\r\n\r\nWhat is the way to set the name of Instance while creating an instance.\r\n\r\nI want to give name given like the name &#39;cpanel&#39; given in this image\r\n\r\n[![Check this image.][1]][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/S6hJO.png","title":"How to provide name of the Instance while creating aws ec2 using java aws sdk","body":"<p>I am finding it very hard to figure out how to provide the <em>name</em> of ec2 instance while creating ec2 instance using Aws Java SDK.</p>\n\n<p>I am using following method to create ec2 Instance- </p>\n\n<pre><code>  RunInstancesRequest runInstancesRequest = new RunInstancesRequest();\n            runInstancesRequest.withImageId(ec2Configuration.getImageId())\n                    .withInstanceType(ec2Configuration.getInstanceType())\n                    .withMinCount(ec2Configuration.getMincount())\n                    .withMaxCount(ec2Configuration.getMaxcount())\n                    .withKeyName(ec2Configuration.getKeyPairName())\n                    .withSecurityGroupIds(Arrays.asList(ec2Configuration.getSgId()));\n            if (ec2Configuration.isEbsOptimized())\n                runInstancesRequest.withMonitoring(true);\n            if (ec2Configuration.isEbsOptimized())\n                runInstancesRequest.withEbsOptimized(true);\n            try {\n                RunInstancesResult result = amazonEC2Client.runInstances(\n                        runInstancesRequest);\n                } catch (Exception e) {\n                // all exception stuffs\n                }\n</code></pre>\n\n<p>I could not find anything anywhere like <code>.withName(\"myVmName\").withInstanceType(...)</code> or <code>.define(\"myVmName\").withInstanceType()</code>.</p>\n\n<p>What is the way to set the name of Instance while creating an instance.</p>\n\n<p>I want to give name given like the name 'cpanel' given in this image</p>\n\n<p><a href=\"https://i.stack.imgur.com/S6hJO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S6hJO.png\" alt=\"Check this image.\"></a></p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":204659,"reputation":37559,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"score":0,"creation_date":1460648173,"post_id":36627547,"comment_id":60851525,"body_markdown":"Consider some custom scopes.  checkout the Custom scopes section in http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/","body":"Consider some custom scopes.  checkout the Custom scopes section in <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/\" rel=\"nofollow noreferrer\">docs.spring.io/spring/docs/current/spring-framework-referenc&zwnj;&#8203;e/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2158549,"reputation":417,"user_id":1913234,"accept_rate":78,"display_name":"April Papajohn"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1527018591,"creation_date":1527018591,"answer_id":50475466,"question_id":36627547,"body_markdown":"I&#39;m not sure if it&#39;s OK if C can see A (looks like maybe that&#39;s desired and there is just a typo). If it is OK, then I think the following will work:\r\n\r\nSince you are using Spring annotations, then the beans can be package scoped. \r\n\r\nhttp://sahits.ch/blog/blog/2014/02/16/package-private-beans/\r\n\r\nThat should do it:\r\n\r\n    package the.first\r\n    @Component\r\n    public class A {\r\n    }\r\n    package the.second\r\n    @Component\r\n    //package protected\r\n    class B {\r\n    }\r\n    package the.second\r\n    @Component\r\n    //package protected\r\n    class C {\r\n    }\r\n\r\n\r\n\r\n\r\n","title":"How to narrow visibility of bean in Spring","body":"<p>I'm not sure if it's OK if C can see A (looks like maybe that's desired and there is just a typo). If it is OK, then I think the following will work:</p>\n\n<p>Since you are using Spring annotations, then the beans can be package scoped. </p>\n\n<p><a href=\"http://sahits.ch/blog/blog/2014/02/16/package-private-beans/\" rel=\"nofollow noreferrer\">http://sahits.ch/blog/blog/2014/02/16/package-private-beans/</a></p>\n\n<p>That should do it:</p>\n\n<pre><code>package the.first\n@Component\npublic class A {\n}\npackage the.second\n@Component\n//package protected\nclass B {\n}\npackage the.second\n@Component\n//package protected\nclass C {\n}\n</code></pre>\n"}],"owner":{"account_id":4277611,"reputation":128,"user_id":3497869,"display_name":"milus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3988,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1700544170,"creation_date":1460647579,"question_id":36627547,"body_markdown":"Let&#39;s assume that we have 3 classes:\r\n\r\n    @Component\r\n    public class A {\r\n    }\r\n\r\n    @Component\r\n    public class B {\r\n    }\r\n\r\n    @Component\r\n    public class C {\r\n        @Autowired\r\n        public C(A a, B b) { }\r\n    }\r\n\r\nBy default, each bean sees any other defined bean:\r\n\r\n- A sees B and C\r\n- B sees A and C\r\n- C sees A and B.\r\n\r\nWhat I want to achieve is to limit visibility of bean A:\r\n\r\n- A sees no other bean\r\n- B sees A and C\r\n- C sees B and C\r\n\r\nI thought that I can create two contexts: common, which holds only A bean definition, and child context which sees all beans defined in the first context and also declares its own beans (B and C).\r\nUnfortunately, I didn&#39;t find any way to do this with Java Config.\r\n\r\nDo you know any way to achieve such solution?","title":"How to narrow visibility of bean in Spring","body":"<p>Let's assume that we have 3 classes:</p>\n<pre><code>@Component\npublic class A {\n}\n\n@Component\npublic class B {\n}\n\n@Component\npublic class C {\n    @Autowired\n    public C(A a, B b) { }\n}\n</code></pre>\n<p>By default, each bean sees any other defined bean:</p>\n<ul>\n<li>A sees B and C</li>\n<li>B sees A and C</li>\n<li>C sees A and B.</li>\n</ul>\n<p>What I want to achieve is to limit visibility of bean A:</p>\n<ul>\n<li>A sees no other bean</li>\n<li>B sees A and C</li>\n<li>C sees B and C</li>\n</ul>\n<p>I thought that I can create two contexts: common, which holds only A bean definition, and child context which sees all beans defined in the first context and also declares its own beans (B and C).\nUnfortunately, I didn't find any way to do this with Java Config.</p>\n<p>Do you know any way to achieve such solution?</p>\n"},{"tags":["java","spring","constructor","javabeans","private"],"comments":[{"owner":{"account_id":65635,"reputation":2058,"user_id":193033,"accept_rate":88,"display_name":"dm3"},"score":8,"creation_date":1314779901,"post_id":7254496,"comment_id":8727703,"body_markdown":"How about giving it a try and then posting the results?","body":"How about giving it a try and then posting the results?"},{"owner":{"account_id":365724,"reputation":23438,"user_id":710818,"accept_rate":82,"display_name":"user710818"},"score":1,"creation_date":1314780040,"post_id":7254496,"comment_id":8727747,"body_markdown":"It is difficult - I don&#39;t have all source.","body":"It is difficult - I don&#39;t have all source."}],"answers":[{"comments":[{"owner":{"account_id":365724,"reputation":23438,"user_id":710818,"accept_rate":82,"display_name":"user710818"},"score":0,"creation_date":1314780452,"post_id":7254553,"comment_id":8727851,"body_markdown":"strange, there are no static method, no public constructor but when I do debug - private constructor invoked! by sun.reflect.NativeConstructorAccessorImpl","body":"strange, there are no static method, no public constructor but when I do debug - private constructor invoked! by sun.reflect.NativeConstructorAccessorImpl"},{"owner":{"account_id":537921,"reputation":3524,"user_id":906184,"accept_rate":100,"display_name":"Ashkan Aryan"},"score":0,"creation_date":1314780506,"post_id":7254553,"comment_id":8727865,"body_markdown":"Without specifics/code it won&#39;t be possible to comment any further!","body":"Without specifics/code it won&#39;t be possible to comment any further!"},{"owner":{"account_id":365724,"reputation":23438,"user_id":710818,"accept_rate":82,"display_name":"user710818"},"score":0,"creation_date":1314780629,"post_id":7254553,"comment_id":8727897,"body_markdown":"I suppose you are wrong. There are no specific code - I see in debugger only standard sun/spring methods.","body":"I suppose you are wrong. There are no specific code - I see in debugger only standard sun/spring methods."},{"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":1,"creation_date":1314783193,"post_id":7254553,"comment_id":8728587,"body_markdown":"@Ashkan: I suspect you&#39;re getting the -1 votes because you&#39;re wrong. Spring _can_ peek behind the curtain (unless there&#39;s a strict security manager in place and the Spring code isn&#39;t marked as trusted).","body":"@Ashkan: I suspect you&#39;re getting the -1 votes because you&#39;re wrong. Spring <i>can</i> peek behind the curtain (unless there&#39;s a strict security manager in place and the Spring code isn&#39;t marked as trusted)."},{"owner":{"account_id":537921,"reputation":3524,"user_id":906184,"accept_rate":100,"display_name":"Ashkan Aryan"},"score":0,"creation_date":1314783864,"post_id":7254553,"comment_id":8728750,"body_markdown":"@Donal Fellows thanks! Probably! But the rest of my comment is correct and is what is in Spring docs actually so I&#39;m not sure what&#39;s -1s are for. I can remove the 1st sentence if it&#39;s wrong though. So, if you have a constructor that is explicitly marked private it can still be used by Spring, is that what we are saying?","body":"@Donal Fellows thanks! Probably! But the rest of my comment is correct and is what is in Spring docs actually so I&#39;m not sure what&#39;s -1s are for. I can remove the 1st sentence if it&#39;s wrong though. So, if you have a constructor that is explicitly marked private it can still be used by Spring, is that what we are saying?"},{"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":1,"creation_date":1314784234,"post_id":7254553,"comment_id":8728858,"body_markdown":"@Ashkan: It&#39;s _very bad style_ to go against visibility restrictions. Don&#39;t do it! Or if you do, feel very bad about it. (Spring does it because it wants to split the definition of a bean from its configuration, but they&#39;re typically still closely linked. This question happens to be about the exceptional case where that&#39;s not true)","body":"@Ashkan: It&#39;s <i>very bad style</i> to go against visibility restrictions. Don&#39;t do it! Or if you do, feel very bad about it. (Spring does it because it wants to split the definition of a bean from its configuration, but they&#39;re typically still closely linked. This question happens to be about the exceptional case where that&#39;s not true)"},{"owner":{"account_id":537921,"reputation":3524,"user_id":906184,"accept_rate":100,"display_name":"Ashkan Aryan"},"score":0,"creation_date":1314784618,"post_id":7254553,"comment_id":8728949,"body_markdown":"@Donal Fellows: Exactly, hence my initial reply. I just can&#39;t understand why he would want to do that, what is he trying to achieve, despite me and Matthew asking repeatedly.","body":"@Donal Fellows: Exactly, hence my initial reply. I just can&#39;t understand why he would want to do that, what is he trying to achieve, despite me and Matthew asking repeatedly."}],"tags":[],"owner":{"account_id":537921,"reputation":3524,"user_id":906184,"accept_rate":100,"display_name":"Ashkan Aryan"},"comment_count":7,"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1314784880,"creation_date":1314780110,"answer_id":7254553,"question_id":7254496,"body_markdown":"You would normally have a static factory method in such beans, you can specify that method for spring to get an instance of that bean. See [3.3.1.3 here.][1]  This is the way it&#39;s recommended by Spring, rather than going against visibility restrictions.\r\n\r\n\r\n  [1]: http://static.springsource.org/spring/docs/2.5.x/reference/beans.html\r\n\r\n","title":"Java Spring bean with private constructor","body":"<p>You would normally have a static factory method in such beans, you can specify that method for spring to get an instance of that bean. See <a href=\"http://static.springsource.org/spring/docs/2.5.x/reference/beans.html\" rel=\"nofollow\">3.3.1.3 here.</a>  This is the way it's recommended by Spring, rather than going against visibility restrictions.</p>\n"},{"comments":[{"owner":{"account_id":365724,"reputation":23438,"user_id":710818,"accept_rate":82,"display_name":"user710818"},"score":0,"creation_date":1314780743,"post_id":7254617,"comment_id":8727927,"body_markdown":"Could you please give me the reference to docs? Constructor has parameters, and in xml file to this arguments assigned values.","body":"Could you please give me the reference to docs? Constructor has parameters, and in xml file to this arguments assigned values."},{"owner":{"account_id":537921,"reputation":3524,"user_id":906184,"accept_rate":100,"display_name":"Ashkan Aryan"},"score":0,"creation_date":1314780996,"post_id":7254617,"comment_id":8727994,"body_markdown":"you mean if a bean has specifically something like private bean() { ... } spring can invoke that? How is that possible, that defies the whole purpose of &quot;private&quot;.","body":"you mean if a bean has specifically something like private bean() { ... } spring can invoke that? How is that possible, that defies the whole purpose of &quot;private&quot;."},{"owner":{"account_id":40784,"reputation":7745,"user_id":118268,"accept_rate":84,"display_name":"KevinS"},"score":1,"creation_date":1314781274,"post_id":7254617,"comment_id":8728076,"body_markdown":"Sorry, I&#39;m probably wrong about it only being no-arg constructors. I&#39;m just going by what I&#39;ve noticed on my own projects. I can&#39;t say I&#39;ve ever seen it in the Spring documentation anywhere. But this is the javadoc for the class that is responsible for doing the instantiation. http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/BeanUtils.html#instantiateClass(java.lang.reflect.Constructor,%20java.lang.Object...)","body":"Sorry, I&#39;m probably wrong about it only being no-arg constructors. I&#39;m just going by what I&#39;ve noticed on my own projects. I can&#39;t say I&#39;ve ever seen it in the Spring documentation anywhere. But this is the javadoc for the class that is responsible for doing the instantiation. <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/BeanUtils.html#instantiateClass(java.lang.reflect.Constructor,%20java.lang.Object...)\" rel=\"nofollow noreferrer\">static.springsource.org/spring/docs/3.0.x/javadoc-api/org/&hellip;</a>"},{"owner":{"account_id":40784,"reputation":7745,"user_id":118268,"accept_rate":84,"display_name":"KevinS"},"score":4,"creation_date":1314781429,"post_id":7254617,"comment_id":8728119,"body_markdown":"@Ashkan It is possible using reflection. In particular, the Spring BeanUtils class uses a class called ReflectionUtils to make the constructor accessible. See javadocs for Constructor.setAccessible().","body":"@Ashkan It is possible using reflection. In particular, the Spring BeanUtils class uses a class called ReflectionUtils to make the constructor accessible. See javadocs for Constructor.setAccessible()."},{"owner":{"account_id":537921,"reputation":3524,"user_id":906184,"accept_rate":100,"display_name":"Ashkan Aryan"},"score":0,"creation_date":1314781673,"post_id":7254617,"comment_id":8728188,"body_markdown":"@Kevin Stembridge you are correct, it is possible using Reflection.","body":"@Kevin Stembridge you are correct, it is possible using Reflection."},{"owner":{"account_id":365724,"reputation":23438,"user_id":710818,"accept_rate":82,"display_name":"user710818"},"score":0,"creation_date":1314781987,"post_id":7254617,"comment_id":8728266,"body_markdown":"I think yes, it possible use private constructor by means of reflection. May be spring do it.","body":"I think yes, it possible use private constructor by means of reflection. May be spring do it."},{"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":0,"creation_date":1314782866,"post_id":7254617,"comment_id":8728505,"body_markdown":"+1: Note that if you&#39;ve got a non-Spring-aware third-party bean implementation, you&#39;ll have to use XML to configure it (including setting what values to pass as arguments to the constructor, if necessary). Not that that should be a problem.","body":"+1: Note that if you&#39;ve got a non-Spring-aware third-party bean implementation, you&#39;ll have to use XML to configure it (including setting what values to pass as arguments to the constructor, if necessary). Not that that should be a problem."}],"tags":[],"owner":{"account_id":40784,"reputation":7745,"user_id":118268,"accept_rate":84,"display_name":"KevinS"},"comment_count":7,"down_vote_count":0,"up_vote_count":85,"is_accepted":true,"score":85,"last_activity_date":1314782004,"creation_date":1314780527,"answer_id":7254617,"question_id":7254496,"body_markdown":"Yes, Spring can invoke private constructors. If it finds a constructor with the right arguments, regardless of visibility, it will use reflection to set its constructor to be accessible. ","title":"Java Spring bean with private constructor","body":"<p>Yes, Spring can invoke private constructors. If it finds a constructor with the right arguments, regardless of visibility, it will use reflection to set its constructor to be accessible. </p>\n"},{"comments":[{"owner":{"account_id":365724,"reputation":23438,"user_id":710818,"accept_rate":82,"display_name":"user710818"},"score":0,"creation_date":1314781714,"post_id":7254649,"comment_id":8728198,"body_markdown":"interesting, but I cannot find factory. May be exists another way?","body":"interesting, but I cannot find factory. May be exists another way?"},{"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":0,"creation_date":1314782945,"post_id":7254649,"comment_id":8728524,"body_markdown":"@Matthew: He appears to be retrofitting Spring around some fugly third-party code. That&#39;s just _bound_ to be messy.","body":"@Matthew: He appears to be retrofitting Spring around some fugly third-party code. That&#39;s just <i>bound</i> to be messy."},{"owner":{"account_id":1376,"reputation":61117,"user_id":1836,"accept_rate":90,"display_name":"Matthew Farwell"},"score":1,"creation_date":1314784355,"post_id":7254649,"comment_id":8728893,"body_markdown":"@Donal, no I didn&#39;t understand what he said in the comment.","body":"@Donal, no I didn&#39;t understand what he said in the comment."},{"owner":{"account_id":5422554,"reputation":103,"user_id":4315788,"accept_rate":55,"display_name":"Mishal Harish"},"score":0,"creation_date":1616661230,"post_id":7254649,"comment_id":118074031,"body_markdown":"Could you please tell what would be the java config equivalent for this xml config please?","body":"Could you please tell what would be the java config equivalent for this xml config please?"}],"tags":[],"owner":{"account_id":1376,"reputation":61117,"user_id":1836,"accept_rate":90,"display_name":"Matthew Farwell"},"comment_count":4,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1314781722,"creation_date":1314780682,"answer_id":7254649,"question_id":7254496,"body_markdown":"You can always use a factory method to create beans rather than relying on a default constructor, from [The IoC container: Instantiation using an instance factory method][1]:\r\n\r\n    &lt;!-- the factory bean, which contains a method called createInstance() --&gt;\r\n    &lt;bean id=&quot;serviceLocator&quot; class=&quot;com.foo.DefaultServiceLocator&quot;&gt;\r\n      &lt;!-- inject any dependencies required by this locator bean --&gt;\r\n    &lt;/bean&gt;\r\n    \r\n    &lt;!-- the bean to be created via the factory bean --&gt;\r\n    &lt;bean id=&quot;exampleBean&quot;\r\n          factory-bean=&quot;serviceLocator&quot;\r\n          factory-method=&quot;createInstance&quot;/&gt;\r\n\r\nThis has the advantage that you can use non-default constructors for your bean, and the dependencies for the factory method bean can be injected as well.\r\n\r\n  [1]: http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-factory-class-instance-factory-method","title":"Java Spring bean with private constructor","body":"<p>You can always use a factory method to create beans rather than relying on a default constructor, from <a href=\"http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-factory-class-instance-factory-method\" rel=\"nofollow\">The IoC container: Instantiation using an instance factory method</a>:</p>\n\n<pre><code>&lt;!-- the factory bean, which contains a method called createInstance() --&gt;\n&lt;bean id=\"serviceLocator\" class=\"com.foo.DefaultServiceLocator\"&gt;\n  &lt;!-- inject any dependencies required by this locator bean --&gt;\n&lt;/bean&gt;\n\n&lt;!-- the bean to be created via the factory bean --&gt;\n&lt;bean id=\"exampleBean\"\n      factory-bean=\"serviceLocator\"\n      factory-method=\"createInstance\"/&gt;\n</code></pre>\n\n<p>This has the advantage that you can use non-default constructors for your bean, and the dependencies for the factory method bean can be injected as well.</p>\n"},{"comments":[{"owner":{"account_id":2418532,"reputation":111,"user_id":2112091,"display_name":"lastmannorth"},"score":0,"creation_date":1629822244,"post_id":33801678,"comment_id":121785884,"body_markdown":"Anyone know how to do this using Spring Java configuration (not xml based)?","body":"Anyone know how to do this using Spring Java configuration (not xml based)?"}],"tags":[],"owner":{"account_id":6732368,"reputation":322,"user_id":5188230,"display_name":"Ashish Ani"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1447929972,"creation_date":1447929972,"answer_id":33801678,"question_id":7254496,"body_markdown":"Yes, Private constructors are invoked by spring.\r\nConsider my code:\r\n\r\nBean definition file:\r\n\r\n    &lt;bean id=&quot;message&quot; class=&quot;com.aa.testp.Message&quot;&gt;\r\n    \t\t&lt;constructor-arg index=&quot;0&quot; value=&quot;Hi Nice&quot;/&gt;\r\n    \t&lt;/bean&gt;\r\n\r\n\r\nBean class:\r\n\r\n    package com.aa.testp;\r\n    \r\n    public class Message {\r\n    \r\n        private String message;\r\n    \r\n        private Message(String msg) {\r\n           // You may add your log or print statements to check execution or invocation\r\n            message = msg;\r\n        }\r\n    \r\n        public String getMessage() {\r\n            return message;\r\n        }\r\n    \r\n        public void setMessage(String message) {\r\n            this.message = message;\r\n        }\r\n    \r\n        public void display() {\r\n            System.out.println(&quot; Hi &quot; + message);\r\n        }\r\n    \r\n    }\r\n\r\nThe above code works fine. Hence, spring invoked the private constructor.","title":"Java Spring bean with private constructor","body":"<p>Yes, Private constructors are invoked by spring.\nConsider my code:</p>\n\n<p>Bean definition file:</p>\n\n<pre><code>&lt;bean id=\"message\" class=\"com.aa.testp.Message\"&gt;\n        &lt;constructor-arg index=\"0\" value=\"Hi Nice\"/&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>Bean class:</p>\n\n<pre><code>package com.aa.testp;\n\npublic class Message {\n\n    private String message;\n\n    private Message(String msg) {\n       // You may add your log or print statements to check execution or invocation\n        message = msg;\n    }\n\n    public String getMessage() {\n        return message;\n    }\n\n    public void setMessage(String message) {\n        this.message = message;\n    }\n\n    public void display() {\n        System.out.println(\" Hi \" + message);\n    }\n\n}\n</code></pre>\n\n<p>The above code works fine. Hence, spring invoked the private constructor.</p>\n"},{"tags":[],"owner":{"account_id":9706811,"reputation":2870,"user_id":7200018,"display_name":"GnanaJeyam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1632379573,"creation_date":1534580973,"answer_id":51906755,"question_id":7254496,"body_markdown":"Yes ! Spring can access private constructor.\r\nIt will works internally like below code.\r\n\r\n     try {\r\n\t\tClass clazz = Class.forName(&quot;A&quot;); // A - Fully qualified class name\r\n\t\tConstructor constructor[] = clazz.getDeclaredConstructors();\r\n\t\tconstructor[0].setAccessible(true);\r\n\t\tA a = (A) constructor[0].newInstance();\r\n\t }\r\n     catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t }","title":"Java Spring bean with private constructor","body":"<p>Yes ! Spring can access private constructor.\nIt will works internally like below code.</p>\n<pre><code> try {\n    Class clazz = Class.forName(&quot;A&quot;); // A - Fully qualified class name\n    Constructor constructor[] = clazz.getDeclaredConstructors();\n    constructor[0].setAccessible(true);\n    A a = (A) constructor[0].newInstance();\n }\n catch (Exception e) {\n        e.printStackTrace();\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18572412,"reputation":1,"user_id":13533949,"display_name":"pradhap paranthaman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617925516,"creation_date":1617884208,"answer_id":67003818,"question_id":7254496,"body_markdown":"Spring will never call private constructor as Bean scope. If do it will through the below error.\r\n\r\nCommon causes of this problem include using a final class or a non-visible class. Nested exception is \r\n\r\n&gt; java.lang.IllegalArgumentException: No visible constructors in class.","title":"Java Spring bean with private constructor","body":"<p>Spring will never call private constructor as Bean scope. If do it will through the below error.</p>\n<p>Common causes of this problem include using a final class or a non-visible class. Nested exception is</p>\n<blockquote>\n<p>java.lang.IllegalArgumentException: No visible constructors in class.</p>\n</blockquote>\n"}],"owner":{"account_id":365724,"reputation":23438,"user_id":710818,"accept_rate":82,"display_name":"user710818"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43178,"favorite_count":0,"down_vote_count":1,"up_vote_count":52,"accepted_answer_id":7254617,"answer_count":6,"score":51,"last_activity_date":1700543931,"creation_date":1314779777,"question_id":7254496,"body_markdown":"Is it possible in Spring that a class for bean doesn&#39;t have a public constructor but only a private one?\r\nWill this private constructor be invoked when the bean is created?\r\n","title":"Java Spring bean with private constructor","body":"<p>Is it possible in Spring that a class for bean doesn't have a public constructor but only a private one?\nWill this private constructor be invoked when the bean is created?</p>\n"},{"tags":["java","windows","powershell","cmd"],"comments":[{"owner":{"account_id":653447,"reputation":15025,"user_id":447901,"accept_rate":66,"display_name":"lit"},"score":0,"creation_date":1700239295,"post_id":77503144,"comment_id":136633877,"body_markdown":"Does `Get-Process | Where-Object Path -match &#39;java&#39; | Format-List -Property *` show what you are seeking?","body":"Does <code>Get-Process | Where-Object Path -match &#39;java&#39; | Format-List -Property *</code> show what you are seeking?"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1700239535,"post_id":77503144,"comment_id":136633935,"body_markdown":"The Task Manager simply shows you the command line. It doesn&#39;t know that Test.jar is a file; it just treats it as a command-line parameter string. There is no way you can get the full path of Test.jar if you haven&#39;t provided it on the command line, other than by getting your own Java program to print it.","body":"The Task Manager simply shows you the command line. It doesn&#39;t know that Test.jar is a file; it just treats it as a command-line parameter string. There is no way you can get the full path of Test.jar if you haven&#39;t provided it on the command line, other than by getting your own Java program to print it."},{"owner":{"account_id":23520067,"reputation":21,"user_id":17567330,"display_name":"Shire"},"score":0,"creation_date":1700240407,"post_id":77503144,"comment_id":136634118,"body_markdown":"@lit Don&#39;t have Test.jar full path info,only javaw.exe full path","body":"@lit Don&#39;t have Test.jar full path info,only javaw.exe full path"},{"owner":{"account_id":23520067,"reputation":21,"user_id":17567330,"display_name":"Shire"},"score":0,"creation_date":1700240679,"post_id":77503144,"comment_id":136634179,"body_markdown":"@k314159 Is there any way get Test.jar full path?","body":"@k314159 Is there any way get Test.jar full path?"},{"owner":{"account_id":23520067,"reputation":21,"user_id":17567330,"display_name":"Shire"},"score":0,"creation_date":1700240748,"post_id":77503144,"comment_id":136634189,"body_markdown":"When I use the Java command `jps -l`, I still lose the Test.jar path","body":"When I use the Java command <code>jps -l</code>, I still lose the Test.jar path"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1700243283,"post_id":77503144,"comment_id":136634664,"body_markdown":"From the `jps` documentation it would seem that it _should_ give you the full path of the jar file, but I&#39;m not familiar with it and don&#39;t know why it doesn&#39;t.","body":"From the <code>jps</code> documentation it would seem that it <i>should</i> give you the full path of the jar file, but I&#39;m not familiar with it and don&#39;t know why it doesn&#39;t."}],"answers":[{"tags":[],"owner":{"account_id":23520067,"reputation":21,"user_id":17567330,"display_name":"Shire"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700543575,"creation_date":1700543575,"answer_id":77520441,"question_id":77503144,"body_markdown":"Thanks @Adrian Mole reopen and amendment this question.\r\n\r\nThis is the information I currently have,\r\nwhen I use microsoft official tool **Process Explorer**,I got this information\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yqIOM.png\r\n\r\nThe key information is **Current directory**.\r\nI think this is OS process concept(current working directory).\r\n\r\nI want to do it in a simple way(like CLI)get running Jar full path,but when Jar starting in relative,I need get process CWD.\r\n\r\nPerhaps I can simply obtain the process CWD on Linux through the CLI without coding,But I currently can&#39;t find it on Windows.\r\n\r\nBy the way,This issue is not very important,I will close it.","title":"How to view the running JAR path in cmd or PowerShell?","body":"<p>Thanks @Adrian Mole reopen and amendment this question.</p>\n<p>This is the information I currently have,\nwhen I use microsoft official tool <strong>Process Explorer</strong>,I got this information</p>\n<p><a href=\"https://i.stack.imgur.com/yqIOM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yqIOM.png\" alt=\"enter image description here\" /></a></p>\n<p>The key information is <strong>Current directory</strong>.\nI think this is OS process concept(current working directory).</p>\n<p>I want to do it in a simple way(like CLI)get running Jar full path,but when Jar starting in relative,I need get process CWD.</p>\n<p>Perhaps I can simply obtain the process CWD on Linux through the CLI without coding,But I currently can't find it on Windows.</p>\n<p>By the way,This issue is not very important,I will close it.</p>\n"}],"owner":{"account_id":23520067,"reputation":21,"user_id":17567330,"display_name":"Shire"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77520441,"answer_count":1,"score":0,"last_activity_date":1700543575,"creation_date":1700238039,"question_id":77503144,"body_markdown":"1. JAR path is &quot;D:\\AA\\BB\\Test.jar&quot;\r\n2. Change CLI current path to &quot;D:\\AA\\BB&quot;\r\n3. Execute `javaw -jar Test.jar`\r\n4. Close CLI\r\n\r\nIn the task manager, there is only the &quot;javaw.exe process&quot;, and the command line does not have Test.jar path information.\r\n\r\n![enter image description here](https://i.stack.imgur.com/icpZV.png)\r\n\r\n&lt;br/&gt;\r\n\r\n![enter image description here](https://i.stack.imgur.com/wirxY.png)\r\n\r\nHow to view the path of a jar through cmd, power shell commands, or other methods","title":"How to view the running JAR path in cmd or PowerShell?","body":"<ol>\n<li>JAR path is &quot;D:\\AA\\BB\\Test.jar&quot;</li>\n<li>Change CLI current path to &quot;D:\\AA\\BB&quot;</li>\n<li>Execute <code>javaw -jar Test.jar</code></li>\n<li>Close CLI</li>\n</ol>\n<p>In the task manager, there is only the &quot;javaw.exe process&quot;, and the command line does not have Test.jar path information.</p>\n<p><img src=\"https://i.stack.imgur.com/icpZV.png\" alt=\"enter image description here\" /></p>\n<br/>\n<p><img src=\"https://i.stack.imgur.com/wirxY.png\" alt=\"enter image description here\" /></p>\n<p>How to view the path of a jar through cmd, power shell commands, or other methods</p>\n"},{"tags":["java","freeze","profiler","heap-dump","thread-dump"],"owner":{"account_id":3814490,"reputation":1388,"user_id":3164187,"accept_rate":78,"display_name":"user3164187"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1700543093,"creation_date":1700543093,"question_id":77520417,"body_markdown":"I have a Java desktop application which hangs at-times while running a scenario.\r\n\r\nI tried to take heap and thread dump for analysis. \r\nUp until the application hangs I am able to take the heap and thread dumps but once the application hangs neither thread dump nor heap dump works. \r\n\r\nThe profilers just behaves like nothing happened or hanged.\r\n\r\nI tried , Jprofiler, JvisualVm, and also Jstack command.\r\n\r\nNone of these applications can take a dump. When I tried to connect to the application after its hanged, profilers cannot attach to it.\r\n\r\nWhats the reason behind it ? I assume that the profiler needs a thread in application to be able to attach to it and that is hanged?\r\n\r\nIs there any workaround for this .\r\n","title":"Profilers not able to take heap/thread dump","body":"<p>I have a Java desktop application which hangs at-times while running a scenario.</p>\n<p>I tried to take heap and thread dump for analysis.\nUp until the application hangs I am able to take the heap and thread dumps but once the application hangs neither thread dump nor heap dump works.</p>\n<p>The profilers just behaves like nothing happened or hanged.</p>\n<p>I tried , Jprofiler, JvisualVm, and also Jstack command.</p>\n<p>None of these applications can take a dump. When I tried to connect to the application after its hanged, profilers cannot attach to it.</p>\n<p>Whats the reason behind it ? I assume that the profiler needs a thread in application to be able to attach to it and that is hanged?</p>\n<p>Is there any workaround for this .</p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1700444785,"post_id":77513143,"comment_id":136651659,"body_markdown":"what have you tried so far?","body":"what have you tried so far?"},{"owner":{"account_id":18032324,"reputation":23,"user_id":13106566,"display_name":"Andy999L"},"score":0,"creation_date":1700445863,"post_id":77513143,"comment_id":136651740,"body_markdown":"@ScaryWombat, I tried it but I couldn&#39;t go beyond writing it like this which is very far from my expectaion. Map&lt;Integer, Double&gt; productsByNameCategoryType = products.stream()\n                .collect(Collectors.groupingBy(Product::getId,\n                        Collectors.collectingAndThen(\n                                Collectors.summarizingDouble(Product::getPrice),\n                                p -&gt; p.getSum())\n                ));","body":"@ScaryWombat, I tried it but I couldn&#39;t go beyond writing it like this which is very far from my expectaion. Map&lt;Integer, Double&gt; productsByNameCategoryType = products.stream()                 .collect(Collectors.groupingBy(Product::getId,                         Collectors.collectingAndThen(                                 Collectors.summarizingDouble(Product::getPrice),                                 p -&gt; p.getSum())                 ));"},{"owner":{"account_id":18032324,"reputation":23,"user_id":13106566,"display_name":"Andy999L"},"score":0,"creation_date":1700447032,"post_id":77513143,"comment_id":136651812,"body_markdown":"@tresf It sums the price and the quantity while keeping the the product name and id. For example product with id 1 is sold two times. so, sum the product price and sum the quantity sold. Product(1, &quot;x&quot;, 100, 4)) and (new Product(1, &quot;x&quot;, 100, 1)); The result will be like id 1, name x, price 200, quantity 5. This is the general idea","body":"@tresf It sums the price and the quantity while keeping the the product name and id. For example product with id 1 is sold two times. so, sum the product price and sum the quantity sold. Product(1, &quot;x&quot;, 100, 4)) and (new Product(1, &quot;x&quot;, 100, 1)); The result will be like id 1, name x, price 200, quantity 5. This is the general idea"},{"owner":{"account_id":3858478,"reputation":7458,"user_id":3196753,"display_name":"tresf"},"score":0,"creation_date":1700447271,"post_id":77513143,"comment_id":136651828,"body_markdown":"Yeah, the question makes sense.  I would recommend streaming into a new list of `Products()` as a container.  If the name is confusing, rename `Products()` to `Sales()`.  Each item would contain the aggregated values, but joined on the `id`.","body":"Yeah, the question makes sense.  I would recommend streaming into a new list of <code>Products()</code> as a container.  If the name is confusing, rename <code>Products()</code> to <code>Sales()</code>.  Each item would contain the aggregated values, but joined on the <code>id</code>."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1700448886,"post_id":77513143,"comment_id":136651930,"body_markdown":"Use the _toMap_ method.  _List&lt;Product&gt; l = products.stream().collect(Collectors.collectingAndThen(Collectors.toMap(Product::getId, x -&gt; x, (a, b) -&gt; { Product p = new Product(); p.setId(a.getId()); p.setName(a.getName()); p.setPrice(a.getPrice() + b.getPrice()); p.setQuantity(a.getQuantity() + b.getQuantity()); return p; }), x -&gt; new ArrayList&lt;&gt;(x.values())));_","body":"Use the <i>toMap</i> method.  <i>List&lt;Product&gt; l = products.stream().collect(Collectors.collectingAndThen(Colle&zwnj;&#8203;ctors.toMap(Product:&zwnj;&#8203;:getId, x -&gt; x, (a, b) -&gt; { Product p = new Product(); p.setId(a.getId()); p.setName(a.getName()); p.setPrice(a.getPrice() + b.getPrice()); p.setQuantity(a.getQuantity() + b.getQuantity()); return p; }), x -&gt; new ArrayList&lt;&gt;(x.values())));</i>"},{"owner":{"account_id":18032324,"reputation":23,"user_id":13106566,"display_name":"Andy999L"},"score":0,"creation_date":1700451713,"post_id":77513143,"comment_id":136652136,"body_markdown":"@Reilas Thank you. That is an easy to understand brave solution.","body":"@Reilas Thank you. That is an easy to understand brave solution."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1700494750,"post_id":77513143,"comment_id":136658398,"body_markdown":"@Andy999L, no problem.  I&#39;ve added an answer.","body":"@Andy999L, no problem.  I&#39;ve added an answer."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700543047,"creation_date":1700494732,"answer_id":77517171,"question_id":77513143,"body_markdown":"&gt; _&quot;... I have list of products. I want to sum all the data with the same id ...&quot;_\r\n\r\nCreate a new _List_ to contain the merged _Product_ values.\\\r\nTraverse _products_, and then sub-traverse the remaining entries, from _i + 1_.\\\r\nMerge the _Product_ values, and add to the new _List_, if it doesn&#39;t already contain the _id_.\r\n\r\n```java\r\nList&lt;Product&gt; l = new ArrayList&lt;&gt;();\r\nProduct p, t;\r\nint i, j, k, n = products.size(), m;\r\nboolean b;\r\nfor (i = 0; i &lt; n; i++) {\r\n    p = products.get(i);\r\n    for (j = i + 1; j &lt; n; j++)\r\n        if (p.getId() == (t = products.get(j)).getId()) {\r\n            p.setPrice(p.getPrice() + t.getPrice());\r\n            p.setQuantity(p.getQuantity() + t.getQuantity());\r\n        }\r\n    b = false;\r\n    for (k = 0, m = l.size(); k &lt; m; k++)\r\n        if (l.get(k).getId() == p.getId()) {\r\n            b = true;\r\n            break;\r\n        }\r\n    if (!b) l.add(p);\r\n}\r\n```\r\n\r\nTo simplify the process, provide a _method_ to merge the values.\r\n\r\n```java\r\nclass Product {\r\n    ...\r\n    void merge(Product p) {\r\n        price += p.getPrice();\r\n        quantity += p.getQuantity();\r\n    }\r\n    ...\r\n}\r\n```\r\n\r\n```java\r\nfor (j = i + 1; j &lt; n; j++)\r\n    if (p.getId() == (t = products.get(j)).getId())\r\n        p.merge(t);\r\n```\r\n\r\nAlternately, encapsulate the _ArrayList_ class, and implement a _merge_ method.\r\n\r\n```java\r\nclass ProductList extends ArrayList&lt;Product&gt; {\r\n    @Override\r\n    public boolean add(Product product) {\r\n        return merge(product);\r\n    }\r\n\r\n    boolean merge(Product p) {\r\n        for (Product v : this)\r\n            if (p.getId() == v.getId()) {\r\n                v.setPrice(p.getPrice() + v.getPrice());\r\n                v.setQuantity(p.getQuantity() + v.getQuantity());\r\n                return true;\r\n            }\r\n        return super.add(p);\r\n    }\r\n}\r\n```\r\n\r\n```java\r\nProductList products = new ProductList();\r\nproducts.add(new Product(1, &quot;x&quot;, 100, 4));\r\nproducts.add(new Product(4, &quot;y&quot;, 200, 2));\r\nproducts.add(new Product(4, &quot;y&quot;, 50, 5));\r\nproducts.add(new Product(8, &quot;k&quot;, 50, 1));\r\nproducts.add(new Product(10, &quot;m&quot;, 1000, 1));\r\nproducts.add(new Product(1, &quot;x&quot;, 100, 1));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n1, x, 200.0, 5\r\n4, y, 250.0, 7\r\n8, k, 50.0, 1\r\n10, m, 1000.0, 1\r\n```\r\n\r\nIf you did want to use a _stream_, utilize the _[Collectors#toMap](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function))_ method.\\\r\nAnd, populate an _ArrayList_ instance, from the _[collectingAndThen](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#collectingAndThen(java.util.stream.Collector,java.util.function.Function))_ method; a somewhat un-intuitive step.\r\n\r\n```java\r\nList&lt;Product&gt; l\r\n    = products.stream()\r\n              .collect(\r\n                  Collectors.collectingAndThen(\r\n                      Collectors.toMap(\r\n                          Product::getId,\r\n                          x -&gt; x,\r\n                          (a, b) -&gt; {\r\n                              Product p = new Product();\r\n                              p.merge(b);\r\n                              return p;\r\n                          }),\r\n                      x -&gt; new ArrayList&lt;&gt;(x.values())));\r\n```","title":"Summarizing daily sales of products in Java7 / Java 8","body":"<blockquote>\n<p><em>&quot;... I have list of products. I want to sum all the data with the same id ...&quot;</em></p>\n</blockquote>\n<p>Create a new <em>List</em> to contain the merged <em>Product</em> values.<br />\nTraverse <em>products</em>, and then sub-traverse the remaining entries, from <em>i + 1</em>.<br />\nMerge the <em>Product</em> values, and add to the new <em>List</em>, if it doesn't already contain the <em>id</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Product&gt; l = new ArrayList&lt;&gt;();\nProduct p, t;\nint i, j, k, n = products.size(), m;\nboolean b;\nfor (i = 0; i &lt; n; i++) {\n    p = products.get(i);\n    for (j = i + 1; j &lt; n; j++)\n        if (p.getId() == (t = products.get(j)).getId()) {\n            p.setPrice(p.getPrice() + t.getPrice());\n            p.setQuantity(p.getQuantity() + t.getQuantity());\n        }\n    b = false;\n    for (k = 0, m = l.size(); k &lt; m; k++)\n        if (l.get(k).getId() == p.getId()) {\n            b = true;\n            break;\n        }\n    if (!b) l.add(p);\n}\n</code></pre>\n<p>To simplify the process, provide a <em>method</em> to merge the values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Product {\n    ...\n    void merge(Product p) {\n        price += p.getPrice();\n        quantity += p.getQuantity();\n    }\n    ...\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>for (j = i + 1; j &lt; n; j++)\n    if (p.getId() == (t = products.get(j)).getId())\n        p.merge(t);\n</code></pre>\n<p>Alternately, encapsulate the <em>ArrayList</em> class, and implement a <em>merge</em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class ProductList extends ArrayList&lt;Product&gt; {\n    @Override\n    public boolean add(Product product) {\n        return merge(product);\n    }\n\n    boolean merge(Product p) {\n        for (Product v : this)\n            if (p.getId() == v.getId()) {\n                v.setPrice(p.getPrice() + v.getPrice());\n                v.setQuantity(p.getQuantity() + v.getQuantity());\n                return true;\n            }\n        return super.add(p);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>ProductList products = new ProductList();\nproducts.add(new Product(1, &quot;x&quot;, 100, 4));\nproducts.add(new Product(4, &quot;y&quot;, 200, 2));\nproducts.add(new Product(4, &quot;y&quot;, 50, 5));\nproducts.add(new Product(8, &quot;k&quot;, 50, 1));\nproducts.add(new Product(10, &quot;m&quot;, 1000, 1));\nproducts.add(new Product(1, &quot;x&quot;, 100, 1));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>1, x, 200.0, 5\n4, y, 250.0, 7\n8, k, 50.0, 1\n10, m, 1000.0, 1\n</code></pre>\n<p>If you did want to use a <em>stream</em>, utilize the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function)\" rel=\"nofollow noreferrer\">Collectors#toMap</a></em> method.<br />\nAnd, populate an <em>ArrayList</em> instance, from the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#collectingAndThen(java.util.stream.Collector,java.util.function.Function)\" rel=\"nofollow noreferrer\">collectingAndThen</a></em> method; a somewhat un-intuitive step.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Product&gt; l\n    = products.stream()\n              .collect(\n                  Collectors.collectingAndThen(\n                      Collectors.toMap(\n                          Product::getId,\n                          x -&gt; x,\n                          (a, b) -&gt; {\n                              Product p = new Product();\n                              p.merge(b);\n                              return p;\n                          }),\n                      x -&gt; new ArrayList&lt;&gt;(x.values())));\n</code></pre>\n"}],"owner":{"account_id":18032324,"reputation":23,"user_id":13106566,"display_name":"Andy999L"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"accepted_answer_id":77517171,"answer_count":1,"score":-1,"last_activity_date":1700543047,"creation_date":1700444698,"question_id":77513143,"body_markdown":"I have list of products. I want to sum all the data with the same id\r\n   \r\n\r\n```\r\npublic class Product {\r\n    private int id;\r\n    private String name;\r\n    private double price;\r\n    private int quantity;\r\n.....\r\n}\r\n```\r\n\r\nI added the data into a list \r\n\r\n```\r\nList&lt;Product&gt; products = new ArrayList&lt;&gt;();\r\n        products.add(new Product(1, &quot;x&quot;, 100, 4));\r\n        products.add(new Product(4, &quot;y&quot;, 200, 2));\r\n        products.add(new Product(4, &quot;y&quot;, 50, 5));\r\n        products.add(new Product(8, &quot;k&quot;, 50, 1));\r\n        products.add(new Product(10, &quot;m&quot;, 1000, 1));\r\n        products.add(new Product(1, &quot;x&quot;, 100, 1));\r\n```\r\n\r\nSo far, I have tried to\r\n```````\r\nMap&lt;Integer, Double&gt; productsByNameCategoryType = products.stream()\r\n                .collect(Collectors.groupingBy(Product::getId,\r\n                        Collectors.collectingAndThen(\r\n                          Collectors.summarizingDouble(Product::getPrice),\r\n                                p -&gt; p.getSum())\r\n                ));\r\n\r\n```````\r\nThis is too far from my expectation and still trying on it\r\nMy expectation of the output is \r\n\r\n1, x, 200, 5\r\n\r\n4, y, 250, 7\r\n\r\n8, k, 50, 1\r\n\r\n10, m, 1000, 1\r\n\r\n","title":"Summarizing daily sales of products in Java7 / Java 8","body":"<p>I have list of products. I want to sum all the data with the same id</p>\n<pre><code>public class Product {\n    private int id;\n    private String name;\n    private double price;\n    private int quantity;\n.....\n}\n</code></pre>\n<p>I added the data into a list</p>\n<pre><code>List&lt;Product&gt; products = new ArrayList&lt;&gt;();\n        products.add(new Product(1, &quot;x&quot;, 100, 4));\n        products.add(new Product(4, &quot;y&quot;, 200, 2));\n        products.add(new Product(4, &quot;y&quot;, 50, 5));\n        products.add(new Product(8, &quot;k&quot;, 50, 1));\n        products.add(new Product(10, &quot;m&quot;, 1000, 1));\n        products.add(new Product(1, &quot;x&quot;, 100, 1));\n</code></pre>\n<p>So far, I have tried to</p>\n<pre><code>Map&lt;Integer, Double&gt; productsByNameCategoryType = products.stream()\n                .collect(Collectors.groupingBy(Product::getId,\n                        Collectors.collectingAndThen(\n                          Collectors.summarizingDouble(Product::getPrice),\n                                p -&gt; p.getSum())\n                ));\n\n</code></pre>\n<p>This is too far from my expectation and still trying on it\nMy expectation of the output is</p>\n<p>1, x, 200, 5</p>\n<p>4, y, 250, 7</p>\n<p>8, k, 50, 1</p>\n<p>10, m, 1000, 1</p>\n"},{"tags":["java","gridworld"],"comments":[{"owner":{"account_id":2678195,"reputation":68091,"user_id":2314073,"accept_rate":56,"display_name":"Juned Ahsan"},"score":2,"creation_date":1369501104,"post_id":16751862,"comment_id":24130275,"body_markdown":"What is the question/problem?","body":"What is the question/problem?"},{"owner":{"account_id":2815542,"reputation":43,"user_id":2420736,"display_name":"Lyric"},"score":0,"creation_date":1369501312,"post_id":16751862,"comment_id":24130337,"body_markdown":"The first time this method is called it creates the space like intended. I call this method every time the previous row of asteroids runs into the bottom of the grid. The second time and every other time after has no gap. Sorry","body":"The first time this method is called it creates the space like intended. I call this method every time the previous row of asteroids runs into the bottom of the grid. The second time and every other time after has no gap. Sorry"},{"owner":{"account_id":915836,"reputation":6730,"user_id":948652,"accept_rate":85,"display_name":"arynaq"},"score":0,"creation_date":1369511605,"post_id":16751862,"comment_id":24132925,"body_markdown":"Your current randNum is between 1 and 15 and you iterate 1 through 15, the problem to me doesn&#39;t seem to be in here, what is world and how do you add asteroids at a given location? I see no problem with the random part of your code.","body":"Your current randNum is between 1 and 15 and you iterate 1 through 15, the problem to me doesn&#39;t seem to be in here, what is world and how do you add asteroids at a given location? I see no problem with the random part of your code."}],"answers":[{"comments":[{"owner":{"account_id":2814798,"reputation":43,"user_id":2420180,"display_name":"khreenberg"},"score":0,"creation_date":1369503070,"post_id":16751985,"comment_id":24130827,"body_markdown":"@home Ah, of course. Thanks for the feedback! (I&#39;m new). Though, I honestly don&#39;t know why the original code is not working. It works for me, if I create the asteroids as stars.","body":"@home Ah, of course. Thanks for the feedback! (I&#39;m new). Though, I honestly don&#39;t know why the original code is not working. It works for me, if I create the asteroids as stars."}],"tags":[],"owner":{"account_id":2814798,"reputation":43,"user_id":2420180,"display_name":"khreenberg"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1369501967,"creation_date":1369501967,"answer_id":16751985,"question_id":16751862,"body_markdown":"Try using the Random class:\r\n\r\n    import java.util.Random;\r\n\r\n    public class Main{\r\n\r\n    static Random rnd = new Random();\r\n\r\n    public static void main( String[] args ){\r\n        int randNum = rnd.nextInt( 16 )+1;\r\n        for( int i = 0; i &lt; 16; i++ )\r\n            if( i != randNum )\r\n                System.out.print(&quot;*&quot;);\r\n            else\r\n                System.out.print(&quot; &quot;);\r\n        }\r\n    }","title":"Creating a new random number in a static method","body":"<p>Try using the Random class:</p>\n\n<pre><code>import java.util.Random;\n\npublic class Main{\n\nstatic Random rnd = new Random();\n\npublic static void main( String[] args ){\n    int randNum = rnd.nextInt( 16 )+1;\n    for( int i = 0; i &lt; 16; i++ )\n        if( i != randNum )\n            System.out.print(\"*\");\n        else\n            System.out.print(\" \");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1568788,"reputation":500,"user_id":1456971,"accept_rate":80,"display_name":"Lars"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1369502962,"creation_date":1369502962,"answer_id":16752149,"question_id":16751862,"body_markdown":"If it works the first time you call `nextAsteroidField()` but not the second (or third...), then I think your problem is, that you don&#39;t remove the asteroids from your world.\r\n\r\nChange your method to look like this:\r\n\r\n    public static void nextAsteroidField()\r\n    {\r\n        world.clearAsteroids(); //Clear the world, so no other asteroids block the gap\r\n                                //Of course, you have to write this function ;)\r\n        int randNum = (int)(Math.random()*15)+1;\r\n        for(int i = 1; i &lt; 16; i++)\r\n        {\r\n            if(i != randNum)\r\n                world.add(new Location(0, i), new Asteroid());\r\n        }\r\n    }","title":"Creating a new random number in a static method","body":"<p>If it works the first time you call <code>nextAsteroidField()</code> but not the second (or third...), then I think your problem is, that you don't remove the asteroids from your world.</p>\n\n<p>Change your method to look like this:</p>\n\n<pre><code>public static void nextAsteroidField()\n{\n    world.clearAsteroids(); //Clear the world, so no other asteroids block the gap\n                            //Of course, you have to write this function ;)\n    int randNum = (int)(Math.random()*15)+1;\n    for(int i = 1; i &lt; 16; i++)\n    {\n        if(i != randNum)\n            world.add(new Location(0, i), new Asteroid());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2815542,"reputation":43,"user_id":2420736,"display_name":"Lyric"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9533,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1700542970,"creation_date":1369501032,"question_id":16751862,"body_markdown":"I am trying to make a simple game in gridworld where your ship passes through and asteriod belt. The asteroid belt is supposed to have one empty space in it every time it is generated. I have a method called nextAsteroidField() that creates this belt my implementaion for it is this \r\n\r\n    public static void nextAsteroidField()\r\n    {\r\n        int randNum = (int)(Math.random()*15)+1;\r\n        for(int i = 1; i &lt; 16; i++)\r\n        {\r\n            if(i == randNum)\r\n            {\r\n            }\r\n            else\r\n                world.add(new Location(0, i), new Asteroid());\r\n        }\r\n    }\r\nthe method has to be static because it is being called from the main of the class when the first asteroid belt is created.\r\n\r\nThe first time this method is called it creates the space like intended. I call this method every time the previous row of asteroids runs into the bottom of the grid. The second time and every other time after has no gap.","title":"Creating a new random number in a static method","body":"<p>I am trying to make a simple game in gridworld where your ship passes through and asteriod belt. The asteroid belt is supposed to have one empty space in it every time it is generated. I have a method called nextAsteroidField() that creates this belt my implementaion for it is this </p>\n\n<pre><code>public static void nextAsteroidField()\n{\n    int randNum = (int)(Math.random()*15)+1;\n    for(int i = 1; i &lt; 16; i++)\n    {\n        if(i == randNum)\n        {\n        }\n        else\n            world.add(new Location(0, i), new Asteroid());\n    }\n}\n</code></pre>\n\n<p>the method has to be static because it is being called from the main of the class when the first asteroid belt is created.</p>\n\n<p>The first time this method is called it creates the space like intended. I call this method every time the previous row of asteroids runs into the bottom of the grid. The second time and every other time after has no gap.</p>\n"},{"tags":["java","servlets","ant","javac"],"comments":[{"owner":{"account_id":183645,"reputation":3141,"user_id":419132,"accept_rate":95,"display_name":"wespiserA"},"score":0,"creation_date":1302549623,"post_id":5626317,"comment_id":6411173,"body_markdown":"please add some code, this question seems vague","body":"please add some code, this question seems vague"},{"owner":{"account_id":14531,"reputation":118870,"user_id":29995,"accept_rate":77,"display_name":"Rob Hruska"},"score":0,"creation_date":1302549746,"post_id":5626317,"comment_id":6411207,"body_markdown":"[Related](http://stackoverflow.com/questions/5625589/javac-erroring-out-when-compiling-servlet-libraries)","body":"<a href=\"http://stackoverflow.com/questions/5625589/javac-erroring-out-when-compiling-servlet-libraries\">Related</a>"}],"answers":[{"comments":[{"owner":{"account_id":220897,"reputation":18271,"user_id":478573,"accept_rate":87,"display_name":"Genadinik"},"score":0,"creation_date":1302549794,"post_id":5626353,"comment_id":6411217,"body_markdown":"Here is the ant task: \t  &lt;target name=&quot;compile&quot; depends=&quot;prepare&quot; description=&quot;compile the source&quot; &gt;\n\t  \t&lt;echo&gt;=== COMPILE === SRCDIR: ${src}/com/udfr/src/java &lt;/echo&gt;\n\t    &lt;!-- Compile the java code from ${src} into ${build} --&gt;\n\t    &lt;javac srcdir=&quot;${src}/com/udfr/src/java&quot; destdir=&quot;${dist}/WEB-INF/classes&quot;/&gt;\n\t  &lt;/target&gt;","body":"Here is the ant task: \t  &lt;target name=&quot;compile&quot; depends=&quot;prepare&quot; description=&quot;compile the source&quot; &gt; \t  \t&lt;echo&gt;=== COMPILE === SRCDIR: ${src}/com/udfr/src/java &lt;/echo&gt; \t    &lt;!-- Compile the java code from ${src} into ${build} --&gt; \t    &lt;javac srcdir=&quot;${src}/com/udfr/src/java&quot; destdir=&quot;${dist}/WEB-INF/classes&quot;/&gt; \t  &lt;/target&gt;"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1302551144,"post_id":5626353,"comment_id":6411564,"body_markdown":"@Genadinik: Basically, you&#39;re not specifying a classpath *at all*.","body":"@Genadinik: Basically, you&#39;re not specifying a classpath <i>at all</i>."}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1302549620,"creation_date":1302549620,"answer_id":5626353,"question_id":5626317,"body_markdown":"It&#39;s a common occurrence if you don&#39;t specify the servlet libraries properly in the classpath for the `javac` task... I suspect that&#39;s the problem. If you post the task which fails and the command line which works, we&#39;ll be able to help more.","title":"Ant Javac and Commandline Javac give different results","body":"<p>It's a common occurrence if you don't specify the servlet libraries properly in the classpath for the <code>javac</code> task... I suspect that's the problem. If you post the task which fails and the command line which works, we'll be able to help more.</p>\n"},{"comments":[{"owner":{"account_id":220897,"reputation":18271,"user_id":478573,"accept_rate":87,"display_name":"Genadinik"},"score":0,"creation_date":1302549839,"post_id":5626356,"comment_id":6411229,"body_markdown":"Actually, the funny thing is that my CLASSPATH is set.  I mean, Javac works.  Just not from the ant task which I posted after Jon&#39;s answer.","body":"Actually, the funny thing is that my CLASSPATH is set.  I mean, Javac works.  Just not from the ant task which I posted after Jon&#39;s answer."},{"owner":{"account_id":280045,"reputation":6775,"user_id":575520,"accept_rate":67,"display_name":"Laurent Pireyn"},"score":0,"creation_date":1302550044,"post_id":5626356,"comment_id":6411283,"body_markdown":"@Genadinik I&#39;m pretty sure the `CLASSPATH` environment variable is ignored by the `javac` Ant task, so that would explain why the command line works and the Ant task doesn&#39;t. Please try specifying the `classpath` attribute on the `javac` Ant task.","body":"@Genadinik I&#39;m pretty sure the <code>CLASSPATH</code> environment variable is ignored by the <code>javac</code> Ant task, so that would explain why the command line works and the Ant task doesn&#39;t. Please try specifying the <code>classpath</code> attribute on the <code>javac</code> Ant task."},{"owner":{"account_id":146723,"reputation":9512,"user_id":357360,"accept_rate":84,"display_name":"RonK"},"score":0,"creation_date":1302550609,"post_id":5626356,"comment_id":6411425,"body_markdown":"I&#39;m not sure about that - my guess is that CLASSPATH is set for a specific process, whereas the process running ANT (e.g. Eclipse) is not aware of the CLASSPATH. \nTry setting the classpath in the Javac task itself.","body":"I&#39;m not sure about that - my guess is that CLASSPATH is set for a specific process, whereas the process running ANT (e.g. Eclipse) is not aware of the CLASSPATH.  Try setting the classpath in the Javac task itself."},{"owner":{"account_id":220897,"reputation":18271,"user_id":478573,"accept_rate":87,"display_name":"Genadinik"},"score":0,"creation_date":1302550913,"post_id":5626356,"comment_id":6411505,"body_markdown":"Yes funny enough, adding this worked: \t    \tclasspath=&quot;/usr/local/tomcat/lib/*:/usr/local/jdk1.6.0_24/jre/lib/ext/servlet.jar&quot; but adding just this didn&#39;t: \t    \tclasspath=&quot;/usr/local/tomcat/lib/*&quot;  -- any idea why the more elegant solution would not work here?","body":"Yes funny enough, adding this worked: \t    \tclasspath=&quot;/usr/local/tomcat/lib/*:/usr/local/jdk1.6.0_24/j&zwnj;&#8203;re/lib/ext/servlet.j&zwnj;&#8203;ar&quot; but adding just this didn&#39;t: \t    \tclasspath=&quot;/usr/local/tomcat/lib/*&quot;  -- any idea why the more elegant solution would not work here?"},{"owner":{"account_id":280045,"reputation":6775,"user_id":575520,"accept_rate":67,"display_name":"Laurent Pireyn"},"score":1,"creation_date":1302551027,"post_id":5626356,"comment_id":6411535,"body_markdown":"@Genadinik You should read about the path structures in Ant: http://ant.apache.org/manual/using.html#path","body":"@Genadinik You should read about the path structures in Ant: <a href=\"http://ant.apache.org/manual/using.html#path\" rel=\"nofollow noreferrer\">ant.apache.org/manual/using.html#path</a>"}],"tags":[],"owner":{"account_id":280045,"reputation":6775,"user_id":575520,"accept_rate":67,"display_name":"Laurent Pireyn"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1302549639,"creation_date":1302549639,"answer_id":5626356,"question_id":5626317,"body_markdown":"For some reason, the JAR file containing the Servlet API is part of your classpath when you compile your program in command line. However, it&#39;s not in the classpath of the `javac` Ant task.\r\n\r\nYou should explicitely add the JAR file to the classpath in your `javac` Ant task. There are several ways to do that; please read http://ant.apache.org/manual/Tasks/javac.html","title":"Ant Javac and Commandline Javac give different results","body":"<p>For some reason, the JAR file containing the Servlet API is part of your classpath when you compile your program in command line. However, it's not in the classpath of the <code>javac</code> Ant task.</p>\n\n<p>You should explicitely add the JAR file to the classpath in your <code>javac</code> Ant task. There are several ways to do that; please read <a href=\"http://ant.apache.org/manual/Tasks/javac.html\" rel=\"nofollow\">http://ant.apache.org/manual/Tasks/javac.html</a></p>\n"},{"tags":[],"owner":{"account_id":25223771,"reputation":61,"user_id":19059901,"display_name":"Heisenbug"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700542672,"creation_date":1700542672,"answer_id":77520392,"question_id":5626317,"body_markdown":"Difference is because ANT&#39;s javac has debug mode as false by default.\r\n\r\nTurning \r\n\r\n&gt; debug=&quot;true&quot;\r\n\r\n in javac of ANT script will generate the same class file \r\nwhich is generated with maven or normal javac in cmd.","title":"Ant Javac and Commandline Javac give different results","body":"<p>Difference is because ANT's javac has debug mode as false by default.</p>\n<p>Turning</p>\n<blockquote>\n<p>debug=&quot;true&quot;</p>\n</blockquote>\n<p>in javac of ANT script will generate the same class file\nwhich is generated with maven or normal javac in cmd.</p>\n"}],"owner":{"account_id":220897,"reputation":18271,"user_id":478573,"accept_rate":87,"display_name":"Genadinik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":861,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":5626353,"answer_count":3,"score":1,"last_activity_date":1700542672,"creation_date":1302549413,"question_id":5626317,"body_markdown":"I have a class that imports some servlet libraries.  When I compile it from command-line it is fine.\r\n\r\nWhen I use the ant compile task to compile it, it gives the errors that it can&#39;t find the servlet libraries in its path.\r\n\r\nIs that a known/common occurrence?\r\n\r\nHere is my Ant target:\r\n\r\n    &lt;target name=&quot;compile&quot; depends=&quot;prepare&quot; description=&quot;compile the source&quot; &gt;\r\n        &lt;echo&gt;=== COMPILE === SRCDIR: ${src}/com/udfr/src/java &lt;/echo&gt; &lt;!-- Compile the java code from ${src} into ${build} --&gt;\r\n        &lt;javac srcdir=&quot;${src}/com/udfr/src/java&quot; destdir=&quot;${dist}/WEB-INF/classes&quot;/&gt;\r\n    &lt;/target&gt;","title":"Ant Javac and Commandline Javac give different results","body":"<p>I have a class that imports some servlet libraries.  When I compile it from command-line it is fine.</p>\n\n<p>When I use the ant compile task to compile it, it gives the errors that it can't find the servlet libraries in its path.</p>\n\n<p>Is that a known/common occurrence?</p>\n\n<p>Here is my Ant target:</p>\n\n<pre><code>&lt;target name=\"compile\" depends=\"prepare\" description=\"compile the source\" &gt;\n    &lt;echo&gt;=== COMPILE === SRCDIR: ${src}/com/udfr/src/java &lt;/echo&gt; &lt;!-- Compile the java code from ${src} into ${build} --&gt;\n    &lt;javac srcdir=\"${src}/com/udfr/src/java\" destdir=\"${dist}/WEB-INF/classes\"/&gt;\n&lt;/target&gt;\n</code></pre>\n"},{"tags":["java","android","google-signin"],"answers":[{"comments":[{"owner":{"account_id":15656427,"reputation":3,"user_id":11296633,"display_name":"Mikelear er"},"score":0,"creation_date":1700543885,"post_id":77520380,"comment_id":136664477,"body_markdown":"Thanks! It worked. I deleted that line by mistake. Thanks for your help.","body":"Thanks! It worked. I deleted that line by mistake. Thanks for your help."}],"tags":[],"owner":{"account_id":17973935,"reputation":185,"user_id":13062000,"display_name":"404NotFound"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700542323,"creation_date":1700542323,"answer_id":77520380,"question_id":77520160,"body_markdown":"You have not added this in `OnCreate` method:\r\n\r\n```\r\nsetContentView(R.layout.activity_login)\r\n```\r\nthis might be the problem\r\n","title":"Android - Login page is coming as blank","body":"<p>You have not added this in <code>OnCreate</code> method:</p>\n<pre><code>setContentView(R.layout.activity_login)\n</code></pre>\n<p>this might be the problem</p>\n"}],"owner":{"account_id":15656427,"reputation":3,"user_id":11296633,"display_name":"Mikelear er"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77520380,"answer_count":1,"score":0,"last_activity_date":1700542323,"creation_date":1700537561,"question_id":77520160,"body_markdown":"When I try to load the app, instead of the login page, I see just a blank page with nothing. Can anyone help me why its happening? I don&#39;t see any error, logs or anything that can help me dig deep. Code is compiling fine but its just not showing me the page.\r\n\r\nHere is all the code for your reference -\r\n\r\n\r\n-------------------------------------------\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@drawable/logo&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@drawable/logo&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.Bakarstation&quot;\r\n        android:usesCleartextTraffic=&quot;true&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.SplashActivity&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;!-- &lt;activity --&gt;\r\n        &lt;!-- android:name=&quot;.PostsFeedActivity&quot; --&gt;\r\n        &lt;!-- android:exported=&quot;false&quot; /&gt; --&gt;\r\n        &lt;!-- Need to remove above setting in prod env --&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.LoginActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n```\r\n\r\n-------------------------------------------------------\r\n\r\n\r\n```\r\npublic class LoginActivity extends AppCompatActivity {\r\n\r\n    private SignInClient oneTapClient;\r\n    private BeginSignInRequest signUpRequest;\r\n    ImageButton googleSignInButton;\r\n\r\n    private static final int REQ_ONE_TAP = 2;  // Can be any integer unique to the Activity.\r\n    private final boolean showOneTapUI = true;\r\n    String userName;\r\n    String userDisplayName;\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState,\r\n                         PersistableBundle persistentState) {\r\n\r\n        super.onCreate(savedInstanceState, persistentState);\r\n        Log.i(&quot;CUSTOM MESSAGE&quot;, &quot;Hello from Login Activity&quot;);\r\n\r\n        googleSignInButton = findViewById(R.id.google_login_button);\r\n\r\n        oneTapClient = Identity.getSignInClient(this);\r\n        signUpRequest = BeginSignInRequest.builder()\r\n                .setGoogleIdTokenRequestOptions(BeginSignInRequest.GoogleIdTokenRequestOptions.builder()\r\n                        .setSupported(true)\r\n                        // Your server&#39;s client ID, not your Android client ID.\r\n                        .setServerClientId(getString(R.string.web_client_id))\r\n                        // Show all accounts on the device.\r\n                        .setFilterByAuthorizedAccounts(false)\r\n                        .build())\r\n                .build();\r\n\r\n        ActivityResultLauncher&lt;IntentSenderRequest&gt; activityResultLauncher =\r\n                registerForActivityResult(new ActivityResultContracts.StartIntentSenderForResult(), new ActivityResultCallback&lt;ActivityResult&gt;() {\r\n                    @Override\r\n                    public void onActivityResult(ActivityResult result) {\r\n                        if (result.getResultCode() == Activity.RESULT_OK) {\r\n                            try {\r\n                                SignInCredential credential = oneTapClient.getSignInCredentialFromIntent(result.getData());\r\n                                String idToken = credential.getGoogleIdToken();\r\n                                if (idToken != null) {\r\n                                    // Got an ID token from Google. Use it to authenticate\r\n                                    // with your backend.\r\n\r\n                                    //We can authenticate with our own server here as this will help establish that the user exists in our DB\r\n                                    userName = credential.getId();   //userName will be google email id\r\n                                    //Make a call to our backend server to make sure that the user exists and pull his id and alias name\r\n                                    userDisplayName = credential.getDisplayName();\r\n                                    boolean userExists = false;\r\n                                    Toast.makeText(LoginActivity.this, &quot;email:&quot; + userName, Toast.LENGTH_SHORT).show();\r\n\r\n\r\n                                    Log.d(&quot;TAG&quot;, &quot;Got ID token.&quot;);\r\n                                }\r\n                            } catch (ApiException e) {\r\n                                //Change following with logging\r\n                                e.printStackTrace();\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n        googleSignInButton.setOnClickListener(v -&gt; oneTapClient.beginSignIn(signUpRequest)\r\n                .addOnSuccessListener(LoginActivity.this, result -&gt; {\r\n                    IntentSenderRequest intentSenderRequest = new IntentSenderRequest.Builder(result.getPendingIntent().getIntentSender()).build();\r\n                    activityResultLauncher.launch(intentSenderRequest);\r\n                })\r\n                .addOnFailureListener(LoginActivity.this, e -&gt; {\r\n                    // No Google Accounts found. Just continue presenting the signed-out UI.\r\n                    Log.d(&quot;TAG&quot;, e.getLocalizedMessage());\r\n                }));\r\n    }\r\n}\r\n```\r\n\r\n-----------------------\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:card_view=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:fitsSystemWindows=&quot;true&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    android:background=&quot;@color/white&quot;\r\n    tools:context=&quot;.LoginActivity&quot;&gt;\r\n    &lt;ImageButton\r\n        android:id=&quot;@+id/google_login_button&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:background=&quot;@color/white&quot;\r\n        android:contentDescription=&quot;@string/login_with_google&quot;\r\n        android:src=&quot;@drawable/android_dark_sq_ctn&quot;\r\n        android:tag=&quot;google_login_button&quot;\r\n        android:text=&quot;@string/sign_in_google&quot; /&gt;\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI explained in the problem that the page is not loading and there is no error or logs that I could see.","title":"Android - Login page is coming as blank","body":"<p>When I try to load the app, instead of the login page, I see just a blank page with nothing. Can anyone help me why its happening? I don't see any error, logs or anything that can help me dig deep. Code is compiling fine but its just not showing me the page.</p>\n<p>Here is all the code for your reference -</p>\n<hr />\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@drawable/logo&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@drawable/logo&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.Bakarstation&quot;\n        android:usesCleartextTraffic=&quot;true&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.SplashActivity&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;!-- &lt;activity --&gt;\n        &lt;!-- android:name=&quot;.PostsFeedActivity&quot; --&gt;\n        &lt;!-- android:exported=&quot;false&quot; /&gt; --&gt;\n        &lt;!-- Need to remove above setting in prod env --&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.LoginActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n<hr />\n<pre><code>public class LoginActivity extends AppCompatActivity {\n\n    private SignInClient oneTapClient;\n    private BeginSignInRequest signUpRequest;\n    ImageButton googleSignInButton;\n\n    private static final int REQ_ONE_TAP = 2;  // Can be any integer unique to the Activity.\n    private final boolean showOneTapUI = true;\n    String userName;\n    String userDisplayName;\n\n    @Override\n    public void onCreate(Bundle savedInstanceState,\n                         PersistableBundle persistentState) {\n\n        super.onCreate(savedInstanceState, persistentState);\n        Log.i(&quot;CUSTOM MESSAGE&quot;, &quot;Hello from Login Activity&quot;);\n\n        googleSignInButton = findViewById(R.id.google_login_button);\n\n        oneTapClient = Identity.getSignInClient(this);\n        signUpRequest = BeginSignInRequest.builder()\n                .setGoogleIdTokenRequestOptions(BeginSignInRequest.GoogleIdTokenRequestOptions.builder()\n                        .setSupported(true)\n                        // Your server's client ID, not your Android client ID.\n                        .setServerClientId(getString(R.string.web_client_id))\n                        // Show all accounts on the device.\n                        .setFilterByAuthorizedAccounts(false)\n                        .build())\n                .build();\n\n        ActivityResultLauncher&lt;IntentSenderRequest&gt; activityResultLauncher =\n                registerForActivityResult(new ActivityResultContracts.StartIntentSenderForResult(), new ActivityResultCallback&lt;ActivityResult&gt;() {\n                    @Override\n                    public void onActivityResult(ActivityResult result) {\n                        if (result.getResultCode() == Activity.RESULT_OK) {\n                            try {\n                                SignInCredential credential = oneTapClient.getSignInCredentialFromIntent(result.getData());\n                                String idToken = credential.getGoogleIdToken();\n                                if (idToken != null) {\n                                    // Got an ID token from Google. Use it to authenticate\n                                    // with your backend.\n\n                                    //We can authenticate with our own server here as this will help establish that the user exists in our DB\n                                    userName = credential.getId();   //userName will be google email id\n                                    //Make a call to our backend server to make sure that the user exists and pull his id and alias name\n                                    userDisplayName = credential.getDisplayName();\n                                    boolean userExists = false;\n                                    Toast.makeText(LoginActivity.this, &quot;email:&quot; + userName, Toast.LENGTH_SHORT).show();\n\n\n                                    Log.d(&quot;TAG&quot;, &quot;Got ID token.&quot;);\n                                }\n                            } catch (ApiException e) {\n                                //Change following with logging\n                                e.printStackTrace();\n                            }\n                        }\n                    }\n                });\n\n        googleSignInButton.setOnClickListener(v -&gt; oneTapClient.beginSignIn(signUpRequest)\n                .addOnSuccessListener(LoginActivity.this, result -&gt; {\n                    IntentSenderRequest intentSenderRequest = new IntentSenderRequest.Builder(result.getPendingIntent().getIntentSender()).build();\n                    activityResultLauncher.launch(intentSenderRequest);\n                })\n                .addOnFailureListener(LoginActivity.this, e -&gt; {\n                    // No Google Accounts found. Just continue presenting the signed-out UI.\n                    Log.d(&quot;TAG&quot;, e.getLocalizedMessage());\n                }));\n    }\n}\n</code></pre>\n<hr />\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:card_view=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:fitsSystemWindows=&quot;true&quot;\n    android:orientation=&quot;vertical&quot;\n    android:background=&quot;@color/white&quot;\n    tools:context=&quot;.LoginActivity&quot;&gt;\n    &lt;ImageButton\n        android:id=&quot;@+id/google_login_button&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:background=&quot;@color/white&quot;\n        android:contentDescription=&quot;@string/login_with_google&quot;\n        android:src=&quot;@drawable/android_dark_sq_ctn&quot;\n        android:tag=&quot;google_login_button&quot;\n        android:text=&quot;@string/sign_in_google&quot; /&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>I explained in the problem that the page is not loading and there is no error or logs that I could see.</p>\n"},{"tags":["java","image-processing","raster","bufferedimage"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1700541294,"post_id":77520298,"comment_id":136664264,"body_markdown":"Normally you take the image pixel array, and simply set the red and green channel values to 0. And because it&#39;s a 1D array you just loop once with an increment of 4 (assuming an RGBA set per pixel). Search SO a bit for working with the pixels for an image in java, there&#39;s quite a few questions about that to be found.","body":"Normally you take the image pixel array, and simply set the red and green channel values to 0. And because it&#39;s a 1D array you just loop once with an increment of 4 (assuming an RGBA set per pixel). Search SO a bit for working with the pixels for an image in java, there&#39;s quite a few questions about that to be found."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1700541397,"post_id":77520298,"comment_id":136664271,"body_markdown":"Mask the color value?  _setPixel(i, j, img.getRGB(i, j) &amp; 0x0000ff00)_.","body":"Mask the color value?  <i>setPixel(i, j, img.getRGB(i, j) &amp; 0x0000ff00)</i>."},{"owner":{"account_id":29914211,"reputation":1,"user_id":22924800,"display_name":"Michael243"},"score":0,"creation_date":1700546827,"post_id":77520298,"comment_id":136664736,"body_markdown":"thankyou g&#39;s. appreciate the advice I&#39;ll try em out","body":"thankyou g&#39;s. appreciate the advice I&#39;ll try em out"},{"owner":{"account_id":4205035,"reputation":1690,"user_id":3444205,"display_name":"Andr&#233;s Alcarraz"},"score":0,"creation_date":1700549527,"post_id":77520298,"comment_id":136665027,"body_markdown":"Can you tell how the right image is supposed to look like? I only see blue pixels there, what is wrong?","body":"Can you tell how the right image is supposed to look like? I only see blue pixels there, what is wrong?"},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1700551999,"post_id":77520298,"comment_id":136665385,"body_markdown":"Some suggestions to make it faster: 1. Don&#39;t loop over the bands (`k`), you basically just do the same thing 3 (or 4) times over. 2. Loop over width (`i`) in the inner loop. This may be faster, especially for large images, due to data locality. 3. Instead of collecting RGB values in one loop and setting the value back in another, do both in a single loop.  And finally something that doesn&#39;t matter for performance: 4. Name you variables `x/y` instead of `i/j`for better readability. &#128512;","body":"Some suggestions to make it faster: 1. Don&#39;t loop over the bands (<code>k</code>), you basically just do the same thing 3 (or 4) times over. 2. Loop over width (<code>i</code>) in the inner loop. This may be faster, especially for large images, due to data locality. 3. Instead of collecting RGB values in one loop and setting the value back in another, do both in a single loop.  And finally something that doesn&#39;t matter for performance: 4. Name you variables <code>x&#47;y</code> instead of <code>i&#47;j</code>for better readability. "},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1700581730,"post_id":77520298,"comment_id":136670889,"body_markdown":"I would think a solution would be easier to find. In the 1990s, using GW-Basic, we could do bitwise operations on a pair of images. If you had an image, called `BLUE_MASK` for example, in which every pixel was `0x0000ff00`, you could achieve the result you want with `&lt;your image&gt; AND BLUE_MASK`.","body":"I would think a solution would be easier to find. In the 1990s, using GW-Basic, we could do bitwise operations on a pair of images. If you had an image, called <code>BLUE_MASK</code> for example, in which every pixel was <code>0x0000ff00</code>, you could achieve the result you want with <code>&lt;your image&gt; AND BLUE_MASK</code>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1700582153,"post_id":77520298,"comment_id":136670958,"body_markdown":"OpenCV seems to offer bitwise operations for images. You might look into that.","body":"OpenCV seems to offer bitwise operations for images. You might look into that."}],"owner":{"account_id":29914211,"reputation":1,"user_id":22924800,"display_name":"Michael243"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1700541220,"creation_date":1700540798,"question_id":77520298,"body_markdown":"I need to display only the blue band of an image. In my code I have used a lot of loops. I want to know what does the standard code look like when it comes to solving this problem, e.g are there any functions/shortcuts rather than manually getting and setting each color component? \r\n\r\n```\r\npackage example;\r\nimport java.awt.Color;\r\nimport java.awt.FlowLayout;\r\nimport java.awt.Image;\r\nimport java.awt.image.BufferedImage;\r\nimport java.awt.image.WritableRaster;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.ImageIcon;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\npublic class DisplayBlueBand {\r\n\t//function to display the image\r\n\tpublic static void showImage(Image img, String label) throws IOException {\r\n\t\tImageIcon icon=new ImageIcon(img);\r\n\t\tJFrame frame=new JFrame(label);\r\n\t\tframe.setLayout(new FlowLayout());\r\n\t\tint width = img.getWidth(null); \r\n\t\tint height = img.getHeight(null);\r\n\t\tframe.setSize(width,height);\r\n\t\tJLabel lbl=new JLabel();\r\n\t\tlbl.setIcon(icon);\r\n\t\tframe.add(lbl);\r\n\t\tframe.setVisible(true);\r\n\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t}\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tBufferedImage img = null;\r\n\t\timg = ImageIO.read(new File(&quot;/home/user/Desktop/test.jpg&quot;)) ;\r\n\t\tshowImage(img,&quot;rgb image&quot;);\t\r\n\t\t//extract the individual rgb color components\r\n\t\tint [] red = new int[img.getWidth()*img.getHeight()];\r\n\t\tint [] green = new int[img.getWidth()*img.getHeight()];\r\n\t\tint [] blue = new int[img.getWidth()*img.getHeight()];\r\n\t\tint count = 0;\r\n\t\tWritableRaster imgRaster = img.getRaster();\r\n\t\tfor( int i=0; i&lt;imgRaster.getWidth();i++) {\r\n\t\t\tfor(int j=0; j&lt;imgRaster.getHeight();j++) {\r\n\t\t\t\tfor(int k=0;k&lt;imgRaster.getNumBands();k++) {\r\n\t\t\t\t\tint sample = img.getRGB(i, j);\r\n\t\t\t\t\tColor color = new Color(sample,false);\r\n\t\t\t\t\tred[count] = color.getRed();\r\n\t\t\t\t\tgreen[count] = color.getGreen();\r\n\t\t\t\t\tblue[count]= color.getBlue();\r\n\t\t\t\t}\r\n\t\t\t\tcount++;\r\n\t\t\t}\t\t\r\n\t\t}\r\n\t\t//display only the blue band\r\n\t\tcount = 0;\r\n\t\tfor( int i=0; i&lt;imgRaster.getWidth();i++) {\r\n\t\t\tfor(int j=0; j&lt;imgRaster.getHeight();j++) {\r\n\t\t\t\t\tint [] newColor = {0,0,blue[count]};\r\n\t\t\t\t\timgRaster.setPixel(i, j, newColor);\r\n\t\t\t\t\tcount++;\r\n\t\t\t}\t\t\r\n\t\t}\r\n\t\tshowImage(img,&quot;blue channel image&quot;);\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\nI tried using a for loop to iterate over each pixel and get the individual color components. Then another for loop to set the red and green values in each pixel to zero, leaving the blue components intact so I can display them alone. The result is as shown below: \r\n[side by side comparison of RGB image and image with only blue values][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fXKsy.png","title":"What is a better way to display only the blue component of an image?","body":"<p>I need to display only the blue band of an image. In my code I have used a lot of loops. I want to know what does the standard code look like when it comes to solving this problem, e.g are there any functions/shortcuts rather than manually getting and setting each color component?</p>\n<pre><code>package example;\nimport java.awt.Color;\nimport java.awt.FlowLayout;\nimport java.awt.Image;\nimport java.awt.image.BufferedImage;\nimport java.awt.image.WritableRaster;\nimport java.io.File;\nimport java.io.IOException;\nimport javax.imageio.ImageIO;\nimport javax.swing.ImageIcon;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\npublic class DisplayBlueBand {\n    //function to display the image\n    public static void showImage(Image img, String label) throws IOException {\n        ImageIcon icon=new ImageIcon(img);\n        JFrame frame=new JFrame(label);\n        frame.setLayout(new FlowLayout());\n        int width = img.getWidth(null); \n        int height = img.getHeight(null);\n        frame.setSize(width,height);\n        JLabel lbl=new JLabel();\n        lbl.setIcon(icon);\n        frame.add(lbl);\n        frame.setVisible(true);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }\n    public static void main(String[] args) throws IOException {\n        // TODO Auto-generated method stub\n        BufferedImage img = null;\n        img = ImageIO.read(new File(&quot;/home/user/Desktop/test.jpg&quot;)) ;\n        showImage(img,&quot;rgb image&quot;); \n        //extract the individual rgb color components\n        int [] red = new int[img.getWidth()*img.getHeight()];\n        int [] green = new int[img.getWidth()*img.getHeight()];\n        int [] blue = new int[img.getWidth()*img.getHeight()];\n        int count = 0;\n        WritableRaster imgRaster = img.getRaster();\n        for( int i=0; i&lt;imgRaster.getWidth();i++) {\n            for(int j=0; j&lt;imgRaster.getHeight();j++) {\n                for(int k=0;k&lt;imgRaster.getNumBands();k++) {\n                    int sample = img.getRGB(i, j);\n                    Color color = new Color(sample,false);\n                    red[count] = color.getRed();\n                    green[count] = color.getGreen();\n                    blue[count]= color.getBlue();\n                }\n                count++;\n            }       \n        }\n        //display only the blue band\n        count = 0;\n        for( int i=0; i&lt;imgRaster.getWidth();i++) {\n            for(int j=0; j&lt;imgRaster.getHeight();j++) {\n                    int [] newColor = {0,0,blue[count]};\n                    imgRaster.setPixel(i, j, newColor);\n                    count++;\n            }       \n        }\n        showImage(img,&quot;blue channel image&quot;);\n    }\n\n}\n</code></pre>\n<p>I tried using a for loop to iterate over each pixel and get the individual color components. Then another for loop to set the red and green values in each pixel to zero, leaving the blue components intact so I can display them alone. The result is as shown below:\n<a href=\"https://i.stack.imgur.com/fXKsy.png\" rel=\"nofollow noreferrer\">side by side comparison of RGB image and image with only blue values</a></p>\n"},{"tags":["java","multithreading","semaphore"],"owner":{"account_id":19600152,"reputation":163,"user_id":14345214,"display_name":"thefool"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1700541139,"creation_date":1700541139,"question_id":77520318,"body_markdown":"Let&#39;s assume, that there is a constant flow of threads going through my java code. I would like to stop them in such way, that when a certain flag is changed, all threads will wait on some barrier and then (when the flag is changed again) resume in the same order in which they reached the barrier *before* all the threads that will come in the meantime. In other words: constant flow of threads, I would like to stop them and then resume in such way that in my flow the order of threads will stay the same. I thought about such solution:\r\n\r\nI declare those variables in some part of my code (that block of code is run by one thread):\r\n\r\n    ...\r\n    Semaphore mutex = new Semaphore(0, true)\r\n    atomicBoolean flag = new atomicBoolean(flase);\r\n    atomicInteger threadCounter = new atomicInteger(0);\r\n    ...\r\n    \r\n    \r\nHere is my barrier that should count and stop all the threads (that block of code is run by multiple threads):\r\n\r\n    if(flag.compareAndSet(false, false)) {\r\n    threadCounter.addAndGet(1);\r\n    mutex.acquire();\r\n    }\r\n \r\nThen, I would like the threads to resume in the same order in which they reach the barrier, so I do:\r\n\r\n            ...\r\n    flag.set(true);\r\n    for(threadCounter) {\r\n       mutex.realise();\r\n    }\r\n            ...\r\n\r\nThat should release threads from my mutex semaphore in the right order. HOWEVER I had to change my flag, so all the threads that pass thought the barrier will mix with threads released from mutex semaphore!\r\n\r\nI can do it like that:\r\n\r\n            ...\r\n    for(threadCounter) {\r\n       mutex.realise();\r\n    }\r\n    flag.set(true);\r\n            ...\r\n\r\nBut, if I put my flag on the other side of the loop, I will be left with some threads waiting on the barrier, because they can come after the end of the loop and before I change my flag.\r\n\r\nThen what should I do? Any help would be much appreciated.\r\n","title":"Barrier maintaining the order of threads flow after being open (java multithreading)","body":"<p>Let's assume, that there is a constant flow of threads going through my java code. I would like to stop them in such way, that when a certain flag is changed, all threads will wait on some barrier and then (when the flag is changed again) resume in the same order in which they reached the barrier <em>before</em> all the threads that will come in the meantime. In other words: constant flow of threads, I would like to stop them and then resume in such way that in my flow the order of threads will stay the same. I thought about such solution:</p>\n<p>I declare those variables in some part of my code (that block of code is run by one thread):</p>\n<pre><code>...\nSemaphore mutex = new Semaphore(0, true)\natomicBoolean flag = new atomicBoolean(flase);\natomicInteger threadCounter = new atomicInteger(0);\n...\n</code></pre>\n<p>Here is my barrier that should count and stop all the threads (that block of code is run by multiple threads):</p>\n<pre><code>if(flag.compareAndSet(false, false)) {\nthreadCounter.addAndGet(1);\nmutex.acquire();\n}\n</code></pre>\n<p>Then, I would like the threads to resume in the same order in which they reach the barrier, so I do:</p>\n<pre><code>        ...\nflag.set(true);\nfor(threadCounter) {\n   mutex.realise();\n}\n        ...\n</code></pre>\n<p>That should release threads from my mutex semaphore in the right order. HOWEVER I had to change my flag, so all the threads that pass thought the barrier will mix with threads released from mutex semaphore!</p>\n<p>I can do it like that:</p>\n<pre><code>        ...\nfor(threadCounter) {\n   mutex.realise();\n}\nflag.set(true);\n        ...\n</code></pre>\n<p>But, if I put my flag on the other side of the loop, I will be left with some threads waiting on the barrier, because they can come after the end of the loop and before I change my flag.</p>\n<p>Then what should I do? Any help would be much appreciated.</p>\n"},{"tags":["java","process","runtime.exec"],"comments":[{"owner":{"account_id":16209,"reputation":280512,"user_id":35070,"accept_rate":78,"display_name":"phihag"},"score":0,"creation_date":1296387876,"post_id":4842684,"comment_id":5376392,"body_markdown":"Looks like you&#39;re looking for http://docs.codehaus.org/display/JANINO/Home ;) .","body":"Looks like you&#39;re looking for <a href=\"http://docs.codehaus.org/display/JANINO/Home\" rel=\"nofollow noreferrer\">docs.codehaus.org/display/JANINO/Home</a> ;) ."},{"owner":{"display_name":"user467871"},"score":0,"creation_date":1296387957,"post_id":4842684,"comment_id":5376399,"body_markdown":"@phihag it is just java code example. I will generalize it with c/c++ code and ohters","body":"@phihag it is just java code example. I will generalize it with c/c++ code and ohters"},{"owner":{"account_id":287756,"reputation":3499,"user_id":587772,"accept_rate":80,"display_name":"Sasha Goldshtein"},"score":1,"creation_date":1296388043,"post_id":4842684,"comment_id":5376407,"body_markdown":"Aren&#39;t you supposed to use `Process.getOutputStream`?","body":"Aren&#39;t you supposed to use <code>Process.getOutputStream</code>?"},{"owner":{"account_id":262710,"reputation":3835,"user_id":547766,"display_name":"adamax"},"score":0,"creation_date":1296388137,"post_id":4842684,"comment_id":5376418,"body_markdown":"What are the `exitValue()` &#39;s of the processes? What do they output in ErrorStreams?","body":"What are the <code>exitValue()</code> &#39;s of the processes? What do they output in ErrorStreams?"},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":3,"creation_date":1296388326,"post_id":4842684,"comment_id":5376441,"body_markdown":"Works fine for me. Are you sure that java and javac are in the PATH? Does it work if you run those commands from the command line? You may also wish to use the javax.tools package for compiling if you want more control over the compiling process.","body":"Works fine for me. Are you sure that java and javac are in the PATH? Does it work if you run those commands from the command line? You may also wish to use the javax.tools package for compiling if you want more control over the compiling process."},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1296388446,"post_id":4842684,"comment_id":5376446,"body_markdown":"@Sasha, no, stdout of the process goes into getInputStream(). It is confusing no matter how you name the methods, as the output from one side is the input at another side.","body":"@Sasha, no, stdout of the process goes into getInputStream(). It is confusing no matter how you name the methods, as the output from one side is the input at another side."},{"owner":{"display_name":"user467871"},"score":0,"creation_date":1296388555,"post_id":4842684,"comment_id":5376451,"body_markdown":"@Sergey I just run this code in my netbeans project","body":"@Sergey I just run this code in my netbeans project"},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1296389257,"post_id":4842684,"comment_id":5376513,"body_markdown":"@hilal, disregard my previous comment. I missed that you call exitValue(). You can&#39;t do this before the process is finished. Confusion is right.","body":"@hilal, disregard my previous comment. I missed that you call exitValue(). You can&#39;t do this before the process is finished. Confusion is right."},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1296389507,"post_id":4842684,"comment_id":5376552,"body_markdown":"@hilal, oh, sorry again. I also missed that you actually edited your code. The first version was correct and it was working properly for me. You still need to check if the processes are started correctly (after you try to start them), then read processes&#39; error streams (while they are running) and check their exitValue()s (after they have finished).","body":"@hilal, oh, sorry again. I also missed that you actually edited your code. The first version was correct and it was working properly for me. You still need to check if the processes are started correctly (after you try to start them), then read processes&#39; error streams (while they are running) and check their exitValue()s (after they have finished)."},{"owner":{"display_name":"user467871"},"score":0,"creation_date":1296390292,"post_id":4842684,"comment_id":5376634,"body_markdown":"@Segey thanks for your comment. I think it is related to my classpath but I can&#39;t solve this problem","body":"@Segey thanks for your comment. I think it is related to my classpath but I can&#39;t solve this problem"},{"owner":{"account_id":262710,"reputation":3835,"user_id":547766,"display_name":"adamax"},"score":0,"creation_date":1296391003,"post_id":4842684,"comment_id":5376716,"body_markdown":"Try this: `Runtime.getRuntime().exec(&quot;javac Main.java&quot;, null, new File(&quot;/path&quot;));` where &quot;/path&quot; is the absolute path to the directory where your Main.java is located. And the same with `java Main`","body":"Try this: <code>Runtime.getRuntime().exec(&quot;javac Main.java&quot;, null, new File(&quot;&#47;path&quot;));</code> where &quot;/path&quot; is the absolute path to the directory where your Main.java is located. And the same with <code>java Main</code>"},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1296391839,"post_id":4842684,"comment_id":5376812,"body_markdown":"@hilal, I don&#39;t think classpath has anything to do with it. I&#39;d suspect PATH instead.","body":"@hilal, I don&#39;t think classpath has anything to do with it. I&#39;d suspect PATH instead."},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1296392033,"post_id":4842684,"comment_id":5376837,"body_markdown":"@hilal, sorry, PATH has nothing to do with it. If one of the commands was unavailable, it would break with an IOException.","body":"@hilal, sorry, PATH has nothing to do with it. If one of the commands was unavailable, it would break with an IOException."}],"answers":[{"comments":[{"owner":{"display_name":"user467871"},"score":0,"creation_date":1296388461,"post_id":4842732,"comment_id":5376447,"body_markdown":"I did this bu this also don&#39;t give any answer","body":"I did this bu this also don&#39;t give any answer"},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1296389323,"post_id":4842732,"comment_id":5376524,"body_markdown":"@hilal, you actually need to do it after your last loop. You read process&#39;es output while it&#39;s running, that&#39;s okay, but you can access exitValue() only after it has finished.","body":"@hilal, you actually need to do it after your last loop. You read process&#39;es output while it&#39;s running, that&#39;s okay, but you can access exitValue() only after it has finished."},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1296391785,"post_id":4842732,"comment_id":5376803,"body_markdown":"@hilal, your code from the first edition worked fine for me with no changes. I&#39;ll post the code with checks, though.","body":"@hilal, your code from the first edition worked fine for me with no changes. I&#39;ll post the code with checks, though."}],"tags":[],"owner":{"account_id":9148,"reputation":16366,"user_id":16784,"accept_rate":82,"display_name":"Confusion"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1296388433,"creation_date":1296388433,"answer_id":4842732,"question_id":4842684,"body_markdown":"You also need to  \r\n\r\n    pro2.waitFor();\r\n\r\nbecause executing that process will take some time and you can&#39;t take the exitValue() before the process has finished.","title":"how to compile &amp; run java program in another java program?","body":"<p>You also need to  </p>\n\n<pre><code>pro2.waitFor();\n</code></pre>\n\n<p>because executing that process will take some time and you can't take the exitValue() before the process has finished.</p>\n"},{"comments":[{"owner":{"display_name":"user467871"},"score":0,"creation_date":1296400885,"post_id":4843033,"comment_id":5377910,"body_markdown":"+1. I put these two files in same package. It was my error. Thanks Sergey","body":"+1. I put these two files in same package. It was my error. Thanks Sergey"},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1391785418,"post_id":4843033,"comment_id":32686989,"body_markdown":"@Addy, then you need to use `getOutputStream()` on the second process to feed the process the data it needs. Or just close that stream so the process gets EOF immediately.","body":"@Addy, then you need to use <code>getOutputStream()</code> on the second process to feed the process the data it needs. Or just close that stream so the process gets EOF immediately."},{"owner":{"account_id":4539573,"reputation":1608,"user_id":3687849,"accept_rate":50,"display_name":"Divyang Shah"},"score":0,"creation_date":1426068127,"post_id":4843033,"comment_id":46216063,"body_markdown":"how can we pass argument in this?","body":"how can we pass argument in this?"},{"owner":{"account_id":1326099,"reputation":4946,"user_id":1270865,"accept_rate":50,"display_name":"cafebabe1991"},"score":0,"creation_date":1455302773,"post_id":4843033,"comment_id":58445904,"body_markdown":"When i try to run both commands using &amp;&amp; like this... javac Main.java &amp;&amp; java Main -&gt; it fails ... Can you help @sergey","body":"When i try to run both commands using &amp;&amp; like this... javac Main.java &amp;&amp; java Main -&gt; it fails ... Can you help @sergey"}],"tags":[],"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"comment_count":4,"down_vote_count":0,"up_vote_count":30,"is_accepted":true,"score":30,"last_activity_date":1296392708,"creation_date":1296392708,"answer_id":4843033,"question_id":4842684,"body_markdown":"I have modified the code to include some checks:\r\n\r\n    public class Laj {\r\n    \r\n      private static void printLines(String name, InputStream ins) throws Exception {\r\n        String line = null;\r\n        BufferedReader in = new BufferedReader(\r\n            new InputStreamReader(ins));\r\n        while ((line = in.readLine()) != null) {\r\n            System.out.println(name + &quot; &quot; + line);\r\n        }\r\n      }\r\n    \r\n      private static void runProcess(String command) throws Exception {\r\n        Process pro = Runtime.getRuntime().exec(command);\r\n        printLines(command + &quot; stdout:&quot;, pro.getInputStream());\r\n        printLines(command + &quot; stderr:&quot;, pro.getErrorStream());\r\n        pro.waitFor();\r\n        System.out.println(command + &quot; exitValue() &quot; + pro.exitValue());\r\n      }\r\n    \r\n      public static void main(String[] args) {\r\n        try {\r\n          runProcess(&quot;javac Main.java&quot;);\r\n          runProcess(&quot;java Main&quot;);\r\n        } catch (Exception e) {\r\n          e.printStackTrace();\r\n        }\r\n      }\r\n    }\r\n\r\nHere is the Main.java:\r\n\r\n    public class Main {\r\n      public static void main(String[] args) {\r\n        System.out.println(&quot;ok&quot;);\r\n      }\r\n    }\r\n\r\nWhen everything is fine, it just works:\r\n\r\n    alqualos@ubuntu:~/tmp$ java Laj\r\n    javac Main.java exitValue() 0\r\n    java Main stdout: ok\r\n    java Main exitValue() 0\r\n\r\nNow, for example, if I have some error in Main.java:\r\n\r\n    alqualos@ubuntu:~/tmp$ java Laj\r\n    javac Main.java stderr: Main.java:3: package Systems does not exist\r\n    javac Main.java stderr:     Systems.out.println(&quot;ok&quot;);\r\n    javac Main.java stderr:            ^\r\n    javac Main.java stderr: 1 error\r\n    javac Main.java exitValue() 1\r\n    java Main stdout: ok\r\n    java Main exitValue() 0\r\n\r\nIt still prints &quot;ok&quot; because the previously compiled Main.class is still there, but at least you can see what exactly is happening when your processes are running.","title":"how to compile &amp; run java program in another java program?","body":"<p>I have modified the code to include some checks:</p>\n\n<pre><code>public class Laj {\n\n  private static void printLines(String name, InputStream ins) throws Exception {\n    String line = null;\n    BufferedReader in = new BufferedReader(\n        new InputStreamReader(ins));\n    while ((line = in.readLine()) != null) {\n        System.out.println(name + \" \" + line);\n    }\n  }\n\n  private static void runProcess(String command) throws Exception {\n    Process pro = Runtime.getRuntime().exec(command);\n    printLines(command + \" stdout:\", pro.getInputStream());\n    printLines(command + \" stderr:\", pro.getErrorStream());\n    pro.waitFor();\n    System.out.println(command + \" exitValue() \" + pro.exitValue());\n  }\n\n  public static void main(String[] args) {\n    try {\n      runProcess(\"javac Main.java\");\n      runProcess(\"java Main\");\n    } catch (Exception e) {\n      e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n\n<p>Here is the Main.java:</p>\n\n<pre><code>public class Main {\n  public static void main(String[] args) {\n    System.out.println(\"ok\");\n  }\n}\n</code></pre>\n\n<p>When everything is fine, it just works:</p>\n\n<pre><code>alqualos@ubuntu:~/tmp$ java Laj\njavac Main.java exitValue() 0\njava Main stdout: ok\njava Main exitValue() 0\n</code></pre>\n\n<p>Now, for example, if I have some error in Main.java:</p>\n\n<pre><code>alqualos@ubuntu:~/tmp$ java Laj\njavac Main.java stderr: Main.java:3: package Systems does not exist\njavac Main.java stderr:     Systems.out.println(\"ok\");\njavac Main.java stderr:            ^\njavac Main.java stderr: 1 error\njavac Main.java exitValue() 1\njava Main stdout: ok\njava Main exitValue() 0\n</code></pre>\n\n<p>It still prints \"ok\" because the previously compiled Main.class is still there, but at least you can see what exactly is happening when your processes are running.</p>\n"},{"comments":[{"owner":{"account_id":2875603,"reputation":2068,"user_id":2467753,"accept_rate":78,"display_name":"rockinfresh"},"score":0,"creation_date":1396456815,"post_id":22817379,"comment_id":34799694,"body_markdown":"the answer, care to further clarify?","body":"the answer, care to further clarify?"}],"tags":[],"owner":{"account_id":4267556,"reputation":1,"user_id":3490305,"display_name":"user3490305"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1396455598,"creation_date":1396455598,"answer_id":22817379,"question_id":4842684,"body_markdown":"I have added the condition in Laj class main function to check for compilation process has completed successfully or not..\r\n   \r\n    public class Laj {\r\n    \r\n      private static void printLines(String name, InputStream ins) throws Exception {\r\n        String line = null;\r\n        BufferedReader in = new BufferedReader(\r\n            new InputStreamReader(ins));\r\n        while ((line = in.readLine()) != null) {\r\n            System.out.println(name + &quot; &quot; + line);\r\n        }\r\n      }\r\n    \r\n      private static int runProcess(String command) throws Exception {\r\n        Process pro = Runtime.getRuntime().exec(command);\r\n        printLines(command + &quot; stdout:&quot;, pro.getInputStream());\r\n        printLines(command + &quot; stderr:&quot;, pro.getErrorStream());\r\n        pro.waitFor();\r\n       // System.out.println(command + &quot; exitValue() &quot; + pro.exitValue());\r\n    \treturn pro.exitValue();\r\n      }\r\n    \r\n      public static void main(String[] args) {\r\n        try {\r\n        int k =  runProcess(&quot;javac Main.java&quot;);\r\n    \tif (k==0)\r\n        k=runProcess(&quot;java Main&quot;);\r\n    \t\r\n        } catch (Exception e) {\r\n          e.printStackTrace();\r\n        }\r\n      }\r\n    }","title":"how to compile &amp; run java program in another java program?","body":"<p>I have added the condition in Laj class main function to check for compilation process has completed successfully or not..</p>\n\n<pre><code>public class Laj {\n\n  private static void printLines(String name, InputStream ins) throws Exception {\n    String line = null;\n    BufferedReader in = new BufferedReader(\n        new InputStreamReader(ins));\n    while ((line = in.readLine()) != null) {\n        System.out.println(name + \" \" + line);\n    }\n  }\n\n  private static int runProcess(String command) throws Exception {\n    Process pro = Runtime.getRuntime().exec(command);\n    printLines(command + \" stdout:\", pro.getInputStream());\n    printLines(command + \" stderr:\", pro.getErrorStream());\n    pro.waitFor();\n   // System.out.println(command + \" exitValue() \" + pro.exitValue());\n    return pro.exitValue();\n  }\n\n  public static void main(String[] args) {\n    try {\n    int k =  runProcess(\"javac Main.java\");\n    if (k==0)\n    k=runProcess(\"java Main\");\n\n    } catch (Exception e) {\n      e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700540600,"creation_date":1700540600,"answer_id":77520286,"question_id":4842684,"body_markdown":"You may try a combination of two open source libraries: [jaxec](https://github.com/yegor256/jaxec) and [jhome](https://github.com/yegor256/jhome) (I&#39;m an author of them). This is how you call a Java program from your Java program:\r\n\r\n```\r\nimport com.yegor256.Jaxec;\r\nimport com.yegor256.Jhome;\r\n\r\n// compile it first:\r\nnew Jaxec()\r\n  .with(new Jhome().path(&quot;bin/javac&quot;).toString())\r\n  .with(&quot;Hello.java&quot;) // the file name\r\n  .exec();\r\n\r\n// next, execute it:\r\nnew Jaxec()\r\n  .with(new Jhome().path(&quot;bin/java&quot;).toString())\r\n  .with(&quot;Hello&quot;) // the name of the class\r\n  .exec();\r\n```\r\n\r\nBehind the scene, it will find the location of `JAVA_HOME` and call `ProcessBuilder` to run two new processes.","title":"how to compile &amp; run java program in another java program?","body":"<p>You may try a combination of two open source libraries: <a href=\"https://github.com/yegor256/jaxec\" rel=\"nofollow noreferrer\">jaxec</a> and <a href=\"https://github.com/yegor256/jhome\" rel=\"nofollow noreferrer\">jhome</a> (I'm an author of them). This is how you call a Java program from your Java program:</p>\n<pre><code>import com.yegor256.Jaxec;\nimport com.yegor256.Jhome;\n\n// compile it first:\nnew Jaxec()\n  .with(new Jhome().path(&quot;bin/javac&quot;).toString())\n  .with(&quot;Hello.java&quot;) // the file name\n  .exec();\n\n// next, execute it:\nnew Jaxec()\n  .with(new Jhome().path(&quot;bin/java&quot;).toString())\n  .with(&quot;Hello&quot;) // the name of the class\n  .exec();\n</code></pre>\n<p>Behind the scene, it will find the location of <code>JAVA_HOME</code> and call <code>ProcessBuilder</code> to run two new processes.</p>\n"}],"owner":{"display_name":"user467871"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46445,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":4843033,"answer_count":4,"score":26,"last_activity_date":1700540600,"creation_date":1296387699,"question_id":4842684,"body_markdown":"I have a Main.java and Test.java classes that I want to compile and run Main.java in Test.java code. Here is my code\r\n\r\n        Process pro1 = Runtime.getRuntime().exec(&quot;javac Main.java&quot;);\r\n        pro1.waitFor();\r\n        Process pro2 = Runtime.getRuntime().exec(&quot;java Main&quot;);\r\n\r\n        BufferedReader in = new BufferedReader(new InputStreamReader(pro2.getInputStream()));\r\n        String line = null;\r\n\r\n        while ((line = in.readLine()) != null) {\r\n            System.out.println(line);\r\n        }\r\n\r\nI just print &quot;ok&quot; in Main.java but this code doesn&#39;t print anything. What is the problem ?\r\n","title":"how to compile &amp; run java program in another java program?","body":"<p>I have a Main.java and Test.java classes that I want to compile and run Main.java in Test.java code. Here is my code</p>\n\n<pre><code>    Process pro1 = Runtime.getRuntime().exec(\"javac Main.java\");\n    pro1.waitFor();\n    Process pro2 = Runtime.getRuntime().exec(\"java Main\");\n\n    BufferedReader in = new BufferedReader(new InputStreamReader(pro2.getInputStream()));\n    String line = null;\n\n    while ((line = in.readLine()) != null) {\n        System.out.println(line);\n    }\n</code></pre>\n\n<p>I just print \"ok\" in Main.java but this code doesn't print anything. What is the problem ?</p>\n"},{"tags":["java","runtime","runtime.exec"],"comments":[{"owner":{"account_id":1241681,"reputation":5254,"user_id":1204134,"accept_rate":92,"display_name":"Alex Gittemeier"},"score":0,"creation_date":1362471748,"post_id":15218892,"comment_id":21451050,"body_markdown":"you would have to do some kind of pipe from the STDIN of sam to sam2 but that may be more trouble that its worth.","body":"you would have to do some kind of pipe from the STDIN of sam to sam2 but that may be more trouble that its worth."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":3,"creation_date":1362478823,"post_id":15218892,"comment_id":21454807,"body_markdown":"Please learn java naming conventions and stick to them, here: class names should start with an uppercase letter.","body":"Please learn java naming conventions and stick to them, here: class names should start with an uppercase letter."},{"owner":{"account_id":2447875,"reputation":5747,"user_id":2134774,"accept_rate":45,"display_name":"AKA"},"score":0,"creation_date":1362486603,"post_id":15218892,"comment_id":21459294,"body_markdown":"i was trying to present a simple example. thanks for your advice.. :)","body":"i was trying to present a simple example. thanks for your advice.. :)"}],"answers":[{"comments":[{"owner":{"account_id":2447875,"reputation":5747,"user_id":2134774,"accept_rate":45,"display_name":"AKA"},"score":0,"creation_date":1362486740,"post_id":15219056,"comment_id":21459391,"body_markdown":"i couldnt understand what u mean by this statement..!! :(","body":"i couldnt understand what u mean by this statement..!! :("},{"owner":{"account_id":2447875,"reputation":5747,"user_id":2134774,"accept_rate":45,"display_name":"AKA"},"score":1,"creation_date":1362487787,"post_id":15219056,"comment_id":21460045,"body_markdown":"It works.. :) thanks a lot.. But when i use this way.. the entire control will be gone to the second program. so master will execute only after the completion of the second program.. should i use threads to solve this problem..??","body":"It works.. :) thanks a lot.. But when i use this way.. the entire control will be gone to the second program. so master will execute only after the completion of the second program.. should i use threads to solve this problem..??"},{"owner":{"account_id":2447875,"reputation":5747,"user_id":2134774,"accept_rate":45,"display_name":"AKA"},"score":0,"creation_date":1362545259,"post_id":15219056,"comment_id":21486986,"body_markdown":"Problem..!!! when i store the class name of second program to a string variable it encounters the following error..\n**cannot find symbol tempfile.main(new String[0]);**\n **symbol:   method main(String[])**\n**location: variable tempfile of type String**\nWhat should i do..??","body":"Problem..!!! when i store the class name of second program to a string variable it encounters the following error.. <b>cannot find symbol tempfile.main(new String[0]);</b>  <b>symbol:   method main(String[])</b> <b>location: variable tempfile of type String</b> What should i do..??"},{"owner":{"account_id":2343027,"reputation":615,"user_id":2053913,"display_name":"Andr&#225;s T&#243;th"},"score":0,"creation_date":1362650480,"post_id":15219056,"comment_id":21537608,"body_markdown":"What do you want? You can not use a String as a class instance. Maybe you should use java reflection to this work. But reflection is usually not needed.","body":"What do you want? You can not use a String as a class instance. Maybe you should use java reflection to this work. But reflection is usually not needed."}],"tags":[],"owner":{"account_id":2343027,"reputation":615,"user_id":2053913,"display_name":"Andr&#225;s T&#243;th"},"comment_count":4,"down_vote_count":1,"up_vote_count":23,"is_accepted":true,"score":22,"last_activity_date":1362472209,"creation_date":1362472209,"answer_id":15219056,"question_id":15218892,"body_markdown":"It is a bit strange but you can run the second program without forking it. Just calling the main method in it. So forget the runtime section and do this:\r\n\r\n    sam2.main(new String[0]);\r\n\r\nOf course this way you must compile sam2 at compile time","title":"Running a java program from another java program","body":"<p>It is a bit strange but you can run the second program without forking it. Just calling the main method in it. So forget the runtime section and do this:</p>\n\n<pre><code>sam2.main(new String[0]);\n</code></pre>\n\n<p>Of course this way you must compile sam2 at compile time</p>\n"},{"tags":[],"owner":{"account_id":30421,"reputation":4979,"user_id":82976,"accept_rate":92,"display_name":"Jay Q."},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1362472322,"creation_date":1362472322,"answer_id":15219088,"question_id":15218892,"body_markdown":"You can just call the main method of the second class. The main method is just like any other static method.","title":"Running a java program from another java program","body":"<p>You can just call the main method of the second class. The main method is just like any other static method.</p>\n"},{"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1362476421,"creation_date":1362476421,"answer_id":15220419,"question_id":15218892,"body_markdown":"Each process needs to be allowed to run and finish.  You can use `Process#waitFor` for this purpose.  Equally, you need to consume any output from the process at the same time.  `waitFor` will block so you will need use a `Thread` to read the input (and if you need to, write output to the process)\r\n\r\nDepending on the location of the java/class file, you may also need to specify a starting folder from which the execution of the process can start.\r\n\r\nMost of this significantly easier using `ProcessBuilder`\r\n\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n\r\n    public class CompileAndRun {\r\n\r\n        public static void main(String[] args) {\r\n            new CompileAndRun();\r\n        }\r\n\r\n        public CompileAndRun() {\r\n            try {\r\n                int result = compile(&quot;compileandrun/HelloWorld.java&quot;);\r\n                System.out.println(&quot;javac returned &quot; + result);\r\n                result = run(&quot;compileandrun.HelloWorld&quot;);\r\n            } catch (IOException | InterruptedException ex) {\r\n                ex.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        public int run(String clazz) throws IOException, InterruptedException {        \r\n            ProcessBuilder pb = new ProcessBuilder(&quot;java&quot;, clazz);\r\n            pb.redirectError();\r\n            pb.directory(new File(&quot;src&quot;));\r\n            Process p = pb.start();\r\n            InputStreamConsumer consumer = new InputStreamConsumer(p.getInputStream());\r\n            consumer.start();\r\n        \r\n            int result = p.waitFor();\r\n        \r\n            consumer.join();\r\n        \r\n            System.out.println(consumer.getOutput());\r\n        \r\n            return result;\r\n        }\r\n    \r\n        public int compile(String file) throws IOException, InterruptedException {        \r\n            ProcessBuilder pb = new ProcessBuilder(&quot;javac&quot;, file);\r\n            pb.redirectError();\r\n            pb.directory(new File(&quot;src&quot;));\r\n            Process p = pb.start();\r\n            InputStreamConsumer consumer = new InputStreamConsumer(p.getInputStream());\r\n            consumer.start();\r\n        \r\n            int result = p.waitFor();\r\n        \r\n            consumer.join();\r\n        \r\n            System.out.println(consumer.getOutput());\r\n        \r\n            return result;        \r\n        }\r\n    \r\n        public class InputStreamConsumer extends Thread {\r\n        \r\n            private InputStream is;\r\n            private IOException exp;\r\n            private StringBuilder output;\r\n\r\n            public InputStreamConsumer(InputStream is) {\r\n                this.is = is;\r\n            }\r\n\r\n            @Override\r\n            public void run() {\r\n                int in = -1;\r\n                output = new StringBuilder(64);\r\n                try {\r\n                    while ((in = is.read()) != -1) {\r\n                        output.append((char) in);\r\n                    }\r\n                } catch (IOException ex) {\r\n                    ex.printStackTrace();\r\n                    exp = ex;\r\n                }\r\n            }\r\n\r\n            public StringBuilder getOutput() {\r\n                return output;\r\n            }\r\n\r\n            public IOException getException() {\r\n                return exp;\r\n            }\r\n        }\r\n    }\r\n\r\nNow obviously, you should check the return results of the processes, and may be produce a better mechanism for interacting with the processes, but that&#39;s the basic idea...","title":"Running a java program from another java program","body":"<p>Each process needs to be allowed to run and finish.  You can use <code>Process#waitFor</code> for this purpose.  Equally, you need to consume any output from the process at the same time.  <code>waitFor</code> will block so you will need use a <code>Thread</code> to read the input (and if you need to, write output to the process)</p>\n\n<p>Depending on the location of the java/class file, you may also need to specify a starting folder from which the execution of the process can start.</p>\n\n<p>Most of this significantly easier using <code>ProcessBuilder</code></p>\n\n<pre><code>import java.io.File;\nimport java.io.IOException;\nimport java.io.InputStream;\n\npublic class CompileAndRun {\n\n    public static void main(String[] args) {\n        new CompileAndRun();\n    }\n\n    public CompileAndRun() {\n        try {\n            int result = compile(\"compileandrun/HelloWorld.java\");\n            System.out.println(\"javac returned \" + result);\n            result = run(\"compileandrun.HelloWorld\");\n        } catch (IOException | InterruptedException ex) {\n            ex.printStackTrace();\n        }\n    }\n\n    public int run(String clazz) throws IOException, InterruptedException {        \n        ProcessBuilder pb = new ProcessBuilder(\"java\", clazz);\n        pb.redirectError();\n        pb.directory(new File(\"src\"));\n        Process p = pb.start();\n        InputStreamConsumer consumer = new InputStreamConsumer(p.getInputStream());\n        consumer.start();\n\n        int result = p.waitFor();\n\n        consumer.join();\n\n        System.out.println(consumer.getOutput());\n\n        return result;\n    }\n\n    public int compile(String file) throws IOException, InterruptedException {        \n        ProcessBuilder pb = new ProcessBuilder(\"javac\", file);\n        pb.redirectError();\n        pb.directory(new File(\"src\"));\n        Process p = pb.start();\n        InputStreamConsumer consumer = new InputStreamConsumer(p.getInputStream());\n        consumer.start();\n\n        int result = p.waitFor();\n\n        consumer.join();\n\n        System.out.println(consumer.getOutput());\n\n        return result;        \n    }\n\n    public class InputStreamConsumer extends Thread {\n\n        private InputStream is;\n        private IOException exp;\n        private StringBuilder output;\n\n        public InputStreamConsumer(InputStream is) {\n            this.is = is;\n        }\n\n        @Override\n        public void run() {\n            int in = -1;\n            output = new StringBuilder(64);\n            try {\n                while ((in = is.read()) != -1) {\n                    output.append((char) in);\n                }\n            } catch (IOException ex) {\n                ex.printStackTrace();\n                exp = ex;\n            }\n        }\n\n        public StringBuilder getOutput() {\n            return output;\n        }\n\n        public IOException getException() {\n            return exp;\n        }\n    }\n}\n</code></pre>\n\n<p>Now obviously, you should check the return results of the processes, and may be produce a better mechanism for interacting with the processes, but that's the basic idea...</p>\n"},{"tags":[],"owner":{"account_id":12017606,"reputation":1,"user_id":10096487,"display_name":"denis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1535936881,"creation_date":1535935451,"answer_id":52142047,"question_id":15218892,"body_markdown":"This is what worked for me:\r\n\r\n    try {\r\n        single.main(new String[0]);\r\n    } catch (Exception e) {\r\n        JOptionPane.showMessageDialog(null, e);\r\n    }\r\n","title":"Running a java program from another java program","body":"<p>This is what worked for me:</p>\n\n<pre><code>try {\n    single.main(new String[0]);\n} catch (Exception e) {\n    JOptionPane.showMessageDialog(null, e);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13907386,"reputation":1,"user_id":10041413,"display_name":"Srinivasan. B"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548285569,"creation_date":1548281064,"answer_id":54336390,"question_id":15218892,"body_markdown":"Just call the main class file. For example, if your java class file name is `xyz.java`, you can call and execute the same in java swing application on click of a `JButton`, code is\r\n\r\n    private void Btn_createdatabaseActionPerformed(java.awt.event.ActionEvent evt) {                                                   \r\n           xyz.main(new String[0]);\r\n    }\r\n                                           \r\nThat&#39;s it...\r\n","title":"Running a java program from another java program","body":"<p>Just call the main class file. For example, if your java class file name is <code>xyz.java</code>, you can call and execute the same in java swing application on click of a <code>JButton</code>, code is</p>\n\n<pre><code>private void Btn_createdatabaseActionPerformed(java.awt.event.ActionEvent evt) {                                                   \n       xyz.main(new String[0]);\n}\n</code></pre>\n\n<p>That's it...</p>\n"},{"tags":[],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700540464,"creation_date":1700540464,"answer_id":77520277,"question_id":15218892,"body_markdown":"You may try a combination of two open source libraries: [jaxec](https://github.com/yegor256/jaxec) and [jhome](https://github.com/yegor256/jhome) (I&#39;m an author of them). This is how you call a Java program from your Java program:\r\n\r\n```\r\nimport com.yegor256.Jaxec;\r\nimport com.yegor256.Jhome;\r\n\r\nnew Jaxec()\r\n  .with(new Jhome().path(&quot;bin/javac&quot;).toString())\r\n  .with(&quot;Hello.java&quot;)\r\n  .exec();\r\nnew Jaxec()\r\n  .with(new Jhome().path(&quot;bin/java&quot;).toString())\r\n  .with(&quot;Hello&quot;) // class name\r\n  .exec();\r\n```\r\n\r\nThe absolute path of `bin/java` and `bin/javac` is calculated by `Jhome`.\r\n","title":"Running a java program from another java program","body":"<p>You may try a combination of two open source libraries: <a href=\"https://github.com/yegor256/jaxec\" rel=\"nofollow noreferrer\">jaxec</a> and <a href=\"https://github.com/yegor256/jhome\" rel=\"nofollow noreferrer\">jhome</a> (I'm an author of them). This is how you call a Java program from your Java program:</p>\n<pre><code>import com.yegor256.Jaxec;\nimport com.yegor256.Jhome;\n\nnew Jaxec()\n  .with(new Jhome().path(&quot;bin/javac&quot;).toString())\n  .with(&quot;Hello.java&quot;)\n  .exec();\nnew Jaxec()\n  .with(new Jhome().path(&quot;bin/java&quot;).toString())\n  .with(&quot;Hello&quot;) // class name\n  .exec();\n</code></pre>\n<p>The absolute path of <code>bin/java</code> and <code>bin/javac</code> is calculated by <code>Jhome</code>.</p>\n"}],"owner":{"account_id":2447875,"reputation":5747,"user_id":2134774,"accept_rate":45,"display_name":"AKA"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67214,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":15219056,"answer_count":6,"score":16,"last_activity_date":1700540464,"creation_date":1362471594,"question_id":15218892,"body_markdown":"I am working on a simple java program. It simply compiles and executes another java program. I am using Runtime.exec() function to compile and run. There is no problem with compilation. but when it runs, if the second program needs an input to read from keyboard, I can&#39;t give it from the master process. I used getOutputStream() function. but it couldn&#39;t help. I will provide my code.\r\n\r\n    public class sam {  \r\n        public static void main(String[] args) throws Exception {  \r\n            try { \r\n                 Process p = Runtime.getRuntime().exec(&quot;javac sam2.java&quot;);\r\n\t             Process p2 = Runtime.getRuntime().exec(&quot;java sam2&quot;);\r\n                 BufferedReader in = new BufferedReader(  \r\n                                    new InputStreamReader(p2.getInputStream()));\r\n\t\t        \r\n\t\t         OutputStream out = p.getOutputStream();\r\n                 String line = null; \r\n\t\t         line = in.readLine();\r\n\t\t         System.out.println(line);\r\n                 input=input+&quot;\\n&quot;;\r\n                 out.write(input.getBytes());\r\n                 p.wait(10000);\r\n                 out.flush();\r\n            }catch (IOException e) {  \r\n                 e.printStackTrace();  \r\n            }  \r\n        }  \r\n    }  \r\n\r\nThis is my master program(sam.java).\r\n\r\nThe following is the code of sam2.java\r\n\r\n    public class sam2 {  \r\n    public static void main(String[] args) throws Exception {  \r\n                             \r\n        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\r\n        String str; \r\n        System.out.println(&quot;Enter the number..\\n&quot;);\r\n        str = br.readLine(); \r\n        System.out.println(Integer.parseInt(str));\r\n\t                        \r\n        }  \r\n    }  \r\n\r\n\r\nThere is no problem, if my second program has only printing statements. But the problem arises when I have to read something from the other.","title":"Running a java program from another java program","body":"<p>I am working on a simple java program. It simply compiles and executes another java program. I am using Runtime.exec() function to compile and run. There is no problem with compilation. but when it runs, if the second program needs an input to read from keyboard, I can't give it from the master process. I used getOutputStream() function. but it couldn't help. I will provide my code.</p>\n\n<pre><code>public class sam {  \n    public static void main(String[] args) throws Exception {  \n        try { \n             Process p = Runtime.getRuntime().exec(\"javac sam2.java\");\n             Process p2 = Runtime.getRuntime().exec(\"java sam2\");\n             BufferedReader in = new BufferedReader(  \n                                new InputStreamReader(p2.getInputStream()));\n\n             OutputStream out = p.getOutputStream();\n             String line = null; \n             line = in.readLine();\n             System.out.println(line);\n             input=input+\"\\n\";\n             out.write(input.getBytes());\n             p.wait(10000);\n             out.flush();\n        }catch (IOException e) {  \n             e.printStackTrace();  \n        }  \n    }  \n}  \n</code></pre>\n\n<p>This is my master program(sam.java).</p>\n\n<p>The following is the code of sam2.java</p>\n\n<pre><code>public class sam2 {  \npublic static void main(String[] args) throws Exception {  \n\n    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n    String str; \n    System.out.println(\"Enter the number..\\n\");\n    str = br.readLine(); \n    System.out.println(Integer.parseInt(str));\n\n    }  \n}  \n</code></pre>\n\n<p>There is no problem, if my second program has only printing statements. But the problem arises when I have to read something from the other.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":22651,"reputation":13651,"user_id":56076,"accept_rate":72,"display_name":"Don Branson"},"score":0,"creation_date":1233562148,"post_id":502494,"comment_id":317554,"body_markdown":"What does the getMessage() on that IOException return?","body":"What does the getMessage() on that IOException return?"},{"owner":{"account_id":1710,"reputation":18740,"user_id":2309,"accept_rate":79,"display_name":"Mario Orteg&#243;n"},"score":1,"creation_date":1233562570,"post_id":502494,"comment_id":317568,"body_markdown":"Do you want to execute it in a different VM?  You can always create a new thread and let the other program run.","body":"Do you want to execute it in a different VM?  You can always create a new thread and let the other program run."},{"owner":{"account_id":69165,"reputation":580,"user_id":201406,"accept_rate":0,"display_name":"Arun"},"score":0,"creation_date":1233564137,"post_id":502494,"comment_id":317625,"body_markdown":"java.io.IOException: CreateProcess: c:/ error=5\n        at java.lang.Win32Process.create(Native Method)\n        at java.lang.Win32Process.&lt;init&gt;(Win32Process.java:63)\n        at java.lang.Runtime.execInternal(Native Method)","body":"java.io.IOException: CreateProcess: c:/ error=5         at java.lang.Win32Process.create(Native Method)         at java.lang.Win32Process.&lt;init&gt;(Win32Process.java:63)         at java.lang.Runtime.execInternal(Native Method)"},{"owner":{"account_id":16881,"reputation":12006,"user_id":37231,"accept_rate":83,"display_name":"jdigital"},"score":0,"creation_date":1233610158,"post_id":502494,"comment_id":319714,"body_markdown":"Can you show us the string you&#39;re passing into exec()?","body":"Can you show us the string you&#39;re passing into exec()?"},{"owner":{"account_id":14372,"reputation":15444,"user_id":29505,"accept_rate":89,"display_name":"cbrulak"},"score":2,"creation_date":1233619053,"post_id":502494,"comment_id":320218,"body_markdown":"edit your question to include your code","body":"edit your question to include your code"}],"answers":[{"comments":[{"owner":{"account_id":69165,"reputation":580,"user_id":201406,"accept_rate":0,"display_name":"Arun"},"score":0,"creation_date":1233565263,"post_id":502581,"comment_id":317650,"body_markdown":"Hey buddy it&#39;s working 4 me too, but I need to use Runtime class.\nThat&#39;s the big issue..","body":"Hey buddy it&#39;s working 4 me too, but I need to use Runtime class. That&#39;s the big issue.."},{"owner":{"account_id":246,"reputation":107903,"user_id":304,"accept_rate":40,"display_name":"McDowell"},"score":5,"creation_date":1233575381,"post_id":502581,"comment_id":317902,"body_markdown":"Calling &quot;main&quot; is not without side-effects. Even if you ensure classes get unloaded when you&#39;re done with them by using your own class loaders, invoked applications may alter the global state of the JVM in ways that conflict with your application.","body":"Calling &quot;main&quot; is not without side-effects. Even if you ensure classes get unloaded when you&#39;re done with them by using your own class loaders, invoked applications may alter the global state of the JVM in ways that conflict with your application."}],"tags":[],"owner":{"account_id":23719,"reputation":171,"user_id":59646,"display_name":"Dean"},"comment_count":2,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1233564559,"creation_date":1233564559,"answer_id":502581,"question_id":502494,"body_markdown":"How about just calling the main from your java program?\r\n\r\nTest.main(null);\r\n\r\nThis worked fine for me","title":"Execute a Java program from our Java program","body":"<p>How about just calling the main from your java program?</p>\n\n<p>Test.main(null);</p>\n\n<p>This worked fine for me</p>\n"},{"tags":[],"owner":{"account_id":21049,"reputation":5503,"user_id":50866,"accept_rate":60,"display_name":"Mark Davidson"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1233564577,"creation_date":1233564577,"answer_id":502582,"question_id":502494,"body_markdown":"Is there any reason you can&#39;t just call it directly in your Java code?\r\n\r\nIf there is a reason I&#39;ve not tried it for executing a Java Program but you could try [Jakarta Commons Exec][1] works well for executing most programs.\r\n\r\n  [1]: http://commons.apache.org/exec/","title":"Execute a Java program from our Java program","body":"<p>Is there any reason you can't just call it directly in your Java code?</p>\n\n<p>If there is a reason I've not tried it for executing a Java Program but you could try <a href=\"http://commons.apache.org/exec/\" rel=\"nofollow noreferrer\">Jakarta Commons Exec</a> works well for executing most programs.</p>\n"},{"tags":[],"owner":{"account_id":12262,"reputation":103384,"user_id":24054,"accept_rate":86,"display_name":"kgiannakakis"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1233564821,"creation_date":1233564821,"answer_id":502591,"question_id":502494,"body_markdown":"You must pass the path of your executable at the exec method. Are you really trying to execute the &quot;-&quot; process?\r\n\r\nAlso, have a look at [this][1] for some useful tips.\r\n\r\n\r\n  [1]: http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html","title":"Execute a Java program from our Java program","body":"<p>You must pass the path of your executable at the exec method. Are you really trying to execute the \"-\" process?</p>\n\n<p>Also, have a look at <a href=\"http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html\" rel=\"nofollow noreferrer\">this</a> for some useful tips.</p>\n"},{"tags":[],"owner":{"account_id":20670,"reputation":16103,"user_id":49643,"display_name":"Ray Hidayat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1233564958,"creation_date":1233564958,"answer_id":502597,"question_id":502494,"body_markdown":"I can&#39;t remember the exact code that I used to get this to work, but you have to pass &quot;java.exe&quot; (or the equivalent) as the executable, and then the class or jar to run as the parameter, with the correct working directory. So it&#39;s not as simple as just calling one method. ","title":"Execute a Java program from our Java program","body":"<p>I can't remember the exact code that I used to get this to work, but you have to pass \"java.exe\" (or the equivalent) as the executable, and then the class or jar to run as the parameter, with the correct working directory. So it's not as simple as just calling one method. </p>\n"},{"comments":[{"owner":{"account_id":17095,"reputation":6286,"user_id":37923,"display_name":"Mark"},"score":0,"creation_date":1233590496,"post_id":502605,"comment_id":318558,"body_markdown":"Yes, it works fine for simple files, but it&#39;s a bad habit to get into. What happens when you try to run a command line, like &quot;cmd /c cd ../myfolder&amp;make&quot; or try to read something beginning &quot;\\\\?\\&quot;?. Not to mention the confusion when the user sees &quot;c:/users\\myname/desktop\\&quot;.","body":"Yes, it works fine for simple files, but it&#39;s a bad habit to get into. What happens when you try to run a command line, like &quot;cmd /c cd ../myfolder&amp;make&quot; or try to read something beginning &quot;\\\\?\\&quot;?. Not to mention the confusion when the user sees &quot;c:/users\\myname/desktop\\&quot;."},{"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":0,"creation_date":1270648000,"post_id":502605,"comment_id":2600569,"body_markdown":"Things get messy if you&#39;re trying to run `cmd.exe` from inside another program. They get even worse if you want to use `start` as that has some really *strange* options...","body":"Things get messy if you&#39;re trying to run <code>cmd.exe</code> from inside another program. They get even worse if you want to use <code>start</code> as that has some really <i>strange</i> options..."}],"tags":[],"owner":{"account_id":17095,"reputation":6286,"user_id":37923,"display_name":"Mark"},"comment_count":2,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1233565588,"creation_date":1233565107,"answer_id":502605,"question_id":502494,"body_markdown":"You&#39;re trying to execute &quot;C:/&quot;.  You&#39;ll want to execute something like:\r\n\r\n`&quot;javaw.exe d:\\\\somejavaprogram\\\\program.jar&quot;`\r\n\r\nNotice the path separators.\r\n\r\nI&#39;m assuming this is for an ad-hoc project, rather than something large.  However, for best practice running external programs from code:\r\n\r\n - Don&#39;t hardcode the executable location, unless you&#39;re certain it will never change\r\n - Look up directories like %windir% using System.getenv\r\n - Don&#39;t assume programs like javaw.exe are in the search path: check them first, or allow the user to specify a location\r\n - Make sure you&#39;re taking spaces into account: `&quot;cmd /c start &quot; + myProg` will not work if myProg is `&quot;my program.jar&quot;`.\r\n\r\n","title":"Execute a Java program from our Java program","body":"<p>You're trying to execute \"C:/\".  You'll want to execute something like:</p>\n\n<p><code>\"javaw.exe d:\\\\somejavaprogram\\\\program.jar\"</code></p>\n\n<p>Notice the path separators.</p>\n\n<p>I'm assuming this is for an ad-hoc project, rather than something large.  However, for best practice running external programs from code:</p>\n\n<ul>\n<li>Don't hardcode the executable location, unless you're certain it will never change</li>\n<li>Look up directories like %windir% using System.getenv</li>\n<li>Don't assume programs like javaw.exe are in the search path: check them first, or allow the user to specify a location</li>\n<li>Make sure you're taking spaces into account: <code>\"cmd /c start \" + myProg</code> will not work if myProg is <code>\"my program.jar\"</code>.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":8537,"reputation":40691,"user_id":15459,"accept_rate":70,"display_name":"PhiLho"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1233572260,"creation_date":1233572260,"answer_id":502843,"question_id":502494,"body_markdown":"I had to do this recently.  \r\nHere is how I did it, picking up only the relevant parts:\r\n\r\n    private static final String[] straJavaArgs =\r\n    {\r\n       &quot;?i/j2re/bin/java&quot;,\r\n       &quot;-ms64m&quot;,\r\n       &quot;-mx64m&quot;,\r\n       &quot;-Djava.ext.dirs=?i/lib;?i/jar/lib;?i/jar&quot;\r\n    };\r\n\r\n    // ...\r\n\r\n      // AppDesc appToRun;\r\n      List&lt;String&gt; params = new ArrayList&lt;String&gt;();\r\n      // Java exe and parameters\r\n      params.addAll(ExpandStrings(straJavaArgs));\r\n      // Common VM arguments\r\n      params.addAll(Arrays.asList(AppDesc.GetCommonVMArgs()));\r\n      // Specific VM arguments\r\n      params.addAll(ExpandStrings(appToRun.GetVMArgs()));\r\n      // The program to run\r\n      params.add(appToRun.GetClass());\r\n      // Its arguments\r\n      params.addAll(ExpandStrings(appToRun.GetProgramArgs()));\r\n      // The common arguments\r\n      params.addAll(ExpandStrings(AppDesc.GetCommonProgramArgs()));\r\n\r\n      ProcessBuilder processBuilder = new ProcessBuilder(params);\r\n      process = processBuilder.start();\r\n      return CaptureProcessOutput(); // Uses a StreamGobbler class\r\n\r\n    protected ArrayList&lt;String&gt; ExpandStrings(String[] stra)\r\n    {\r\n      ArrayList&lt;String&gt; alResult = new ArrayList&lt;String&gt;();\r\n      for (int i = 0; i &lt; stra.length; i++)\r\n      {\r\n         // Super flexible, eh? Ad hoc for the current task, at least...\r\n         alResult.add(stra[i]\r\n               .replaceAll(&quot;\\\\?i&quot;, strInstallDir)\r\n               .replaceAll(&quot;\\\\?c&quot;, strConfigDir)\r\n         );\r\n      }\r\n      return alResult;\r\n    }\r\n\r\n    public enum AppDesc\r\n    {\r\n    // Enumerate the applications to run, with their parameters\r\n    }\r\n\r\nIncomplete, if you need more details, just ask.","title":"Execute a Java program from our Java program","body":"<p>I had to do this recently.<br>\nHere is how I did it, picking up only the relevant parts:</p>\n\n<pre><code>private static final String[] straJavaArgs =\n{\n   \"?i/j2re/bin/java\",\n   \"-ms64m\",\n   \"-mx64m\",\n   \"-Djava.ext.dirs=?i/lib;?i/jar/lib;?i/jar\"\n};\n\n// ...\n\n  // AppDesc appToRun;\n  List&lt;String&gt; params = new ArrayList&lt;String&gt;();\n  // Java exe and parameters\n  params.addAll(ExpandStrings(straJavaArgs));\n  // Common VM arguments\n  params.addAll(Arrays.asList(AppDesc.GetCommonVMArgs()));\n  // Specific VM arguments\n  params.addAll(ExpandStrings(appToRun.GetVMArgs()));\n  // The program to run\n  params.add(appToRun.GetClass());\n  // Its arguments\n  params.addAll(ExpandStrings(appToRun.GetProgramArgs()));\n  // The common arguments\n  params.addAll(ExpandStrings(AppDesc.GetCommonProgramArgs()));\n\n  ProcessBuilder processBuilder = new ProcessBuilder(params);\n  process = processBuilder.start();\n  return CaptureProcessOutput(); // Uses a StreamGobbler class\n\nprotected ArrayList&lt;String&gt; ExpandStrings(String[] stra)\n{\n  ArrayList&lt;String&gt; alResult = new ArrayList&lt;String&gt;();\n  for (int i = 0; i &lt; stra.length; i++)\n  {\n     // Super flexible, eh? Ad hoc for the current task, at least...\n     alResult.add(stra[i]\n           .replaceAll(\"\\\\?i\", strInstallDir)\n           .replaceAll(\"\\\\?c\", strConfigDir)\n     );\n  }\n  return alResult;\n}\n\npublic enum AppDesc\n{\n// Enumerate the applications to run, with their parameters\n}\n</code></pre>\n\n<p>Incomplete, if you need more details, just ask.</p>\n"},{"tags":[],"owner":{"account_id":246,"reputation":107903,"user_id":304,"accept_rate":40,"display_name":"McDowell"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1233572923,"creation_date":1233572923,"answer_id":502867,"question_id":502494,"body_markdown":"    java.io.IOException: CreateProcess: c:/ error=5\r\n            at java.lang.Win32Process.create(Native Method)\r\n            at java.lang.Win32Process.&amp;lt;init&amp;gt;(Win32Process.java:63)\r\n            at java.lang.Runtime.execInternal(Native Method)\r\n\r\nIf I recall correctly, error code 5 means access denied. This could be because your path is incorrect (trying to execute &quot;c:/&quot;) or you are bumping against your OS security (in which case, look at the permissions).\r\n\r\nIf you are having trouble locating the Java executable, you can usually find it using system properties:\r\n\r\n    public class LaunchJre {\r\n    \r\n    \tprivate static boolean isWindows() {\r\n    \t\tString os = System.getProperty(&quot;os.name&quot;);\r\n    \t\tif (os == null) {\r\n    \t\t\tthrow new IllegalStateException(&quot;os.name&quot;);\r\n    \t\t}\r\n    \t\tos = os.toLowerCase();\r\n    \t\treturn os.startsWith(&quot;windows&quot;);\r\n    \t}\r\n    \r\n    \tpublic static File getJreExecutable() throws FileNotFoundException {\r\n    \t\tString jreDirectory = System.getProperty(&quot;java.home&quot;);\r\n    \t\tif (jreDirectory == null) {\r\n    \t\t\tthrow new IllegalStateException(&quot;java.home&quot;);\r\n    \t\t}\r\n    \t\tFile exe;\r\n    \t\tif (isWindows()) {\r\n    \t\t\texe = new File(jreDirectory, &quot;bin/java.exe&quot;);\r\n    \t\t} else {\r\n    \t\t\texe = new File(jreDirectory, &quot;bin/java&quot;);\r\n    \t\t}\r\n    \t\tif (!exe.isFile()) {\r\n    \t\t\tthrow new FileNotFoundException(exe.toString());\r\n    \t\t}\r\n    \t\treturn exe;\r\n    \t}\r\n    \r\n    \tpublic static int launch(List&lt;String&gt; cmdarray) throws IOException,\r\n    \t\t\tInterruptedException {\r\n    \t\tbyte[] buffer = new byte[1024];\r\n    \r\n    \t\tProcessBuilder processBuilder = new ProcessBuilder(cmdarray);\r\n    \t\tprocessBuilder.redirectErrorStream(true);\r\n    \t\tProcess process = processBuilder.start();\r\n    \t\tInputStream in = process.getInputStream();\r\n    \t\twhile (true) {\r\n    \t\t\tint r = in.read(buffer);\r\n    \t\t\tif (r &lt;= 0) {\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t\tSystem.out.write(buffer, 0, r);\r\n    \t\t}\r\n    \t\treturn process.waitFor();\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\ttry {\r\n    \t\t\tRuntime.getRuntime().exec(&quot;c:/&quot;);\r\n    \r\n    \t\t\tList&lt;String&gt; cmdarray = new ArrayList&lt;String&gt;();\r\n    \t\t\tcmdarray.add(getJreExecutable().toString());\r\n    \t\t\tcmdarray.add(&quot;-version&quot;);\r\n    \t\t\tint retValue = launch(cmdarray);\r\n    \t\t\tif (retValue != 0) {\r\n    \t\t\t\tSystem.err.println(&quot;Error code &quot; + retValue);\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println(&quot;OK&quot;);\r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (InterruptedException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n(Tested Windows XP, Sun JRE 1.6; Ubuntu 8.04, OpenJDK JRE 1.6)\r\n\r\nThis is the equivalent of running:\r\n\r\n    java -version\r\n\r\nYou may also want to look at the &quot;java.library.path&quot; system property (and &quot;path.separator&quot;) when trying to locate the executable.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/io/File.html#canExecute()","title":"Execute a Java program from our Java program","body":"<pre><code>java.io.IOException: CreateProcess: c:/ error=5\n        at java.lang.Win32Process.create(Native Method)\n        at java.lang.Win32Process.&amp;lt;init&amp;gt;(Win32Process.java:63)\n        at java.lang.Runtime.execInternal(Native Method)\n</code></pre>\n\n<p>If I recall correctly, error code 5 means access denied. This could be because your path is incorrect (trying to execute \"c:/\") or you are bumping against your OS security (in which case, look at the permissions).</p>\n\n<p>If you are having trouble locating the Java executable, you can usually find it using system properties:</p>\n\n<pre><code>public class LaunchJre {\n\n    private static boolean isWindows() {\n        String os = System.getProperty(\"os.name\");\n        if (os == null) {\n            throw new IllegalStateException(\"os.name\");\n        }\n        os = os.toLowerCase();\n        return os.startsWith(\"windows\");\n    }\n\n    public static File getJreExecutable() throws FileNotFoundException {\n        String jreDirectory = System.getProperty(\"java.home\");\n        if (jreDirectory == null) {\n            throw new IllegalStateException(\"java.home\");\n        }\n        File exe;\n        if (isWindows()) {\n            exe = new File(jreDirectory, \"bin/java.exe\");\n        } else {\n            exe = new File(jreDirectory, \"bin/java\");\n        }\n        if (!exe.isFile()) {\n            throw new FileNotFoundException(exe.toString());\n        }\n        return exe;\n    }\n\n    public static int launch(List&lt;String&gt; cmdarray) throws IOException,\n            InterruptedException {\n        byte[] buffer = new byte[1024];\n\n        ProcessBuilder processBuilder = new ProcessBuilder(cmdarray);\n        processBuilder.redirectErrorStream(true);\n        Process process = processBuilder.start();\n        InputStream in = process.getInputStream();\n        while (true) {\n            int r = in.read(buffer);\n            if (r &lt;= 0) {\n                break;\n            }\n            System.out.write(buffer, 0, r);\n        }\n        return process.waitFor();\n    }\n\n    public static void main(String[] args) {\n        try {\n            Runtime.getRuntime().exec(\"c:/\");\n\n            List&lt;String&gt; cmdarray = new ArrayList&lt;String&gt;();\n            cmdarray.add(getJreExecutable().toString());\n            cmdarray.add(\"-version\");\n            int retValue = launch(cmdarray);\n            if (retValue != 0) {\n                System.err.println(\"Error code \" + retValue);\n            }\n            System.out.println(\"OK\");\n        } catch (IOException e) {\n            e.printStackTrace();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n\n<p>(Tested Windows XP, Sun JRE 1.6; Ubuntu 8.04, OpenJDK JRE 1.6)</p>\n\n<p>This is the equivalent of running:</p>\n\n<pre><code>java -version\n</code></pre>\n\n<p>You may also want to look at the \"java.library.path\" system property (and \"path.separator\") when trying to locate the executable.</p>\n"},{"tags":[],"owner":{"account_id":12009,"reputation":4327,"user_id":23428,"accept_rate":83,"display_name":"Stroboskop"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1233574677,"creation_date":1233574677,"answer_id":502920,"question_id":502494,"body_markdown":"You can either launch another JVM (as described in detail in other answers).\r\nBut that is not a solution i would prefer.\r\n\r\nReasons are:\r\n\r\n - calling a native program from java is &quot;dirty&quot; (and sometimes crashes your own VM)\r\n - you need to know the path to the external JVM (modern JVMs don&#39;t set JAVA_HOME anymore)\r\n - you have no control on the other program\r\n\r\nMain reason to do it anyway is, that the other application has no control over your part of the program either. And more importantly there&#39;s no trouble with unresponsive system threads like the AWT-Thread if the other application doesn&#39;t know its threading 101.\r\n\r\nBut! You can achieve more control and similar behaviour by using an elementary plugin technique. I.e. just call &quot;a known interface method&quot; the other application has to implement. (in this case the &quot;main&quot; method).\r\n\r\nOnly it&#39;s not quite as easy as it sounds to pull this off.\r\n\r\n - you have to dynamically include required jars at runtime (or include them in the classpath for your application)\r\n - you have to put the plugin in a sandbox that prevents compromising critical classes to the other application\r\n\r\nAnd this calls for a customized classloader. But be warned - there are some well hidden pitfalls in implementing that. On the other hand it&#39;s a great exercise.\r\n\r\nSo, take your pick: either quick and dirty or hard but rewarding.","title":"Execute a Java program from our Java program","body":"<p>You can either launch another JVM (as described in detail in other answers).\nBut that is not a solution i would prefer.</p>\n\n<p>Reasons are:</p>\n\n<ul>\n<li>calling a native program from java is \"dirty\" (and sometimes crashes your own VM)</li>\n<li>you need to know the path to the external JVM (modern JVMs don't set JAVA_HOME anymore)</li>\n<li>you have no control on the other program</li>\n</ul>\n\n<p>Main reason to do it anyway is, that the other application has no control over your part of the program either. And more importantly there's no trouble with unresponsive system threads like the AWT-Thread if the other application doesn't know its threading 101.</p>\n\n<p>But! You can achieve more control and similar behaviour by using an elementary plugin technique. I.e. just call \"a known interface method\" the other application has to implement. (in this case the \"main\" method).</p>\n\n<p>Only it's not quite as easy as it sounds to pull this off.</p>\n\n<ul>\n<li>you have to dynamically include required jars at runtime (or include them in the classpath for your application)</li>\n<li>you have to put the plugin in a sandbox that prevents compromising critical classes to the other application</li>\n</ul>\n\n<p>And this calls for a customized classloader. But be warned - there are some well hidden pitfalls in implementing that. On the other hand it's a great exercise.</p>\n\n<p>So, take your pick: either quick and dirty or hard but rewarding.</p>\n"},{"tags":[],"owner":{"account_id":15843,"reputation":13885,"user_id":33889,"accept_rate":82,"display_name":"Michael Rutherfurd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1233618993,"creation_date":1233618993,"answer_id":505512,"question_id":502494,"body_markdown":"I had a similiar problem. I needed to run a section of Java code in a seperate VM as it invoked native code via JNI that occasionally blew up taking out the entire VM.\r\n\r\nI cheated a little though. I initially used Runtime to invoke a simple batch command file and put the work-in-progress java command in there. This enabled me to tweak it as needed and to run the command in a DOS prompt for easy testing. Once it was finished I simply copied the result into the Runtime invocation.","title":"Execute a Java program from our Java program","body":"<p>I had a similiar problem. I needed to run a section of Java code in a seperate VM as it invoked native code via JNI that occasionally blew up taking out the entire VM.</p>\n\n<p>I cheated a little though. I initially used Runtime to invoke a simple batch command file and put the work-in-progress java command in there. This enabled me to tweak it as needed and to run the command in a DOS prompt for easy testing. Once it was finished I simply copied the result into the Runtime invocation.</p>\n"},{"comments":[{"owner":{"account_id":881690,"reputation":89,"user_id":52255,"display_name":"egorpe"},"score":0,"creation_date":1233620303,"post_id":505557,"comment_id":14524783,"body_markdown":"The code provided by jex above is dangerous. Read the following article that explains it in greater details: http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html It also explains how to call external native program from your Java code properly.","body":"The code provided by jex above is dangerous. Read the following article that explains it in greater details: <a href=\"http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html\" rel=\"nofollow noreferrer\">javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html</a> It also explains how to call external native program from your Java code properly."}],"tags":[],"owner":{"display_name":"jex"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1270647711,"creation_date":1233619894,"answer_id":505557,"question_id":502494,"body_markdown":"    public class Test {    \r\n      public static void main(String[] args) throws Exception {    \r\n        Process p = Runtime.getRuntime().exec(&quot;\\&quot;c:/program files/windows/notepad.exe\\&quot;&quot;);\r\n        p.waitFor();\r\n      }\r\n    \r\n    }\r\n\r\nThe above works quite well, instead of passing \\&quot;c:/program files/windows/notepad.exe\\&quot; as the arguments for the executable, use the path to your program, I&#39;m not sure if this solution is JVM version dependent, or if it can use relative paths.","title":"Execute a Java program from our Java program","body":"<pre><code>public class Test {    \n  public static void main(String[] args) throws Exception {    \n    Process p = Runtime.getRuntime().exec(\"\\\"c:/program files/windows/notepad.exe\\\"\");\n    p.waitFor();\n  }\n\n}\n</code></pre>\n\n<p>The above works quite well, instead of passing \\\"c:/program files/windows/notepad.exe\\\" as the arguments for the executable, use the path to your program, I'm not sure if this solution is JVM version dependent, or if it can use relative paths.</p>\n"},{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1330426935,"post_id":9479959,"comment_id":11998688,"body_markdown":"hmm ... can&#39;t really believe that you can execute a java _source_ file. All that might happen - depending on your local setup - is that an editor/IDE associated with the file extension is fired up :-)","body":"hmm ... can&#39;t really believe that you can execute a java <i>source</i> file. All that might happen - depending on your local setup - is that an editor/IDE associated with the file extension is fired up :-)"},{"owner":{"account_id":1283590,"reputation":57,"user_id":1237120,"display_name":"Ushsa Varghese"},"score":0,"creation_date":1330492463,"post_id":9479959,"comment_id":12019693,"body_markdown":"nopes. you have to believe. you can execute a java source file. That is you can get a class file. But the $java factorial command will not work. Well i have not found out. There may be ways that could be done.","body":"nopes. you have to believe. you can execute a java source file. That is you can get a class file. But the $java factorial command will not work. Well i have not found out. There may be ways that could be done."}],"tags":[],"owner":{"account_id":1283590,"reputation":57,"user_id":1237120,"display_name":"Ushsa Varghese"},"comment_count":2,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1330492337,"creation_date":1330423636,"answer_id":9479959,"question_id":502494,"body_markdown":"The answer is simple all you have to do is put the code -\r\n    \r\n    $ process p = Runtime.getRuntime().exec(&quot;javac factorial.java&quot;); in the try catch block\r\n\r\nThe code would look like this -\r\n\r\n    try\r\n    {\r\n    process p = Runtime.getRuntime().exec(&quot;javac factorial.java&quot;);\r\n    }\r\n    catch(IOException e)\r\n    {\r\n    e.printStackTrace();\r\n    }\r\n\r\nHey I think this should work. Atleast for me it did work","title":"Execute a Java program from our Java program","body":"<p>The answer is simple all you have to do is put the code -</p>\n\n<pre><code>$ process p = Runtime.getRuntime().exec(\"javac factorial.java\"); in the try catch block\n</code></pre>\n\n<p>The code would look like this -</p>\n\n<pre><code>try\n{\nprocess p = Runtime.getRuntime().exec(\"javac factorial.java\");\n}\ncatch(IOException e)\n{\ne.printStackTrace();\n}\n</code></pre>\n\n<p>Hey I think this should work. Atleast for me it did work</p>\n"},{"tags":[],"owner":{"account_id":2263175,"reputation":2879,"user_id":1992679,"accept_rate":48,"display_name":"Reegan Miranda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1364208068,"creation_date":1364199557,"answer_id":15610368,"question_id":502494,"body_markdown":"First you compile the prog-A code and convert to jar file(ie:In NetBeans Shift-F11)and the path is of netbeans(NetBeansProjects/prog-A/dist/prog-A.jar)\r\n         \r\n\r\n\r\n\r\n     public class ProgA {\r\n\r\n    /**\r\n     * @param args the command line arguments\r\n     */\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Helllo print thr ProgA&quot;);\r\n        \r\n    }\r\n    }\r\n    }\r\n\r\nSecond open the new project in prog-B and add the libraries, and select the jar and give to the prog-A.jar file and write the two line in your program\r\n\r\n    public class ProgB {\r\n\r\n    \r\n    public static void main(String[] args) {\r\n        ProgA progA = new  ProgA();\r\n        String arg[] = null;\r\n        progA.main(arg);\r\n    }\r\n    }\r\n","title":"Execute a Java program from our Java program","body":"<p>First you compile the prog-A code and convert to jar file(ie:In NetBeans Shift-F11)and the path is of netbeans(NetBeansProjects/prog-A/dist/prog-A.jar)</p>\n\n<pre><code> public class ProgA {\n\n/**\n * @param args the command line arguments\n */\npublic static void main(String[] args) {\n    System.out.println(\"Helllo print thr ProgA\");\n\n}\n}\n}\n</code></pre>\n\n<p>Second open the new project in prog-B and add the libraries, and select the jar and give to the prog-A.jar file and write the two line in your program</p>\n\n<pre><code>public class ProgB {\n\n\npublic static void main(String[] args) {\n    ProgA progA = new  ProgA();\n    String arg[] = null;\n    progA.main(arg);\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3011545,"reputation":1,"user_id":2554940,"display_name":"jay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1373054781,"creation_date":1373054781,"answer_id":17496176,"question_id":502494,"body_markdown":"I agree with Ushsa Varghese, if you just want to run your jar file instead of compiling the .java file that is in the same directory you are executing your application from try the code below. This is the same as executing your java application from the command line so you have to invoke the jvm in order to run your application. Also make sure you have the complete path to your jar file the example below assumes that the jar file is in the same directory as the application that is executing the code below. keep in mind this is system dependent code.\r\n\r\n    try {\r\n      Runtime runTime = Runtime.getRuntime();\r\n      Process process = runTime.exec(&quot;java -jar deleteDriveC.jar&quot;);\r\n    } catch (IOException ex) {\r\n      //jar file doesnt exist\r\n      //Logger.getLogger(this.class.getName()).log(Level.SEVERE, null, ex);\r\n    }","title":"Execute a Java program from our Java program","body":"<p>I agree with Ushsa Varghese, if you just want to run your jar file instead of compiling the .java file that is in the same directory you are executing your application from try the code below. This is the same as executing your java application from the command line so you have to invoke the jvm in order to run your application. Also make sure you have the complete path to your jar file the example below assumes that the jar file is in the same directory as the application that is executing the code below. keep in mind this is system dependent code.</p>\n\n<pre><code>try {\n  Runtime runTime = Runtime.getRuntime();\n  Process process = runTime.exec(\"java -jar deleteDriveC.jar\");\n} catch (IOException ex) {\n  //jar file doesnt exist\n  //Logger.getLogger(this.class.getName()).log(Level.SEVERE, null, ex);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2219344,"reputation":2652,"user_id":1959181,"display_name":"Edgard Leal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1387328496,"creation_date":1387328496,"answer_id":20647811,"question_id":502494,"body_markdown":"Put ant lib in you classpath ( project lib ) and run this code :\r\n\r\n    import org.apache.tools.ant.taskdefs.Execute;\r\n\r\n    Execute exe = new Execute();\r\n    exe.setCommandline(new String[]{&quot;java&quot;, &quot;-version&quot;});\r\n    exe.execute();","title":"Execute a Java program from our Java program","body":"<p>Put ant lib in you classpath ( project lib ) and run this code :</p>\n\n<pre><code>import org.apache.tools.ant.taskdefs.Execute;\n\nExecute exe = new Execute();\nexe.setCommandline(new String[]{\"java\", \"-version\"});\nexe.execute();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700540303,"creation_date":1700540303,"answer_id":77520268,"question_id":502494,"body_markdown":"You may try a combination of two open source libraries: [jaxec](https://github.com/yegor256/jaxec) and [jhome](https://github.com/yegor256/jhome) (I&#39;m an author of them). This is how you call a Java program from your Java program:\r\n\r\n```\r\nimport com.yegor256.Jaxec;\r\nimport com.yegor256.Jhome;\r\n\r\nnew Jaxec()\r\n  .with(new Jhome().path(&quot;bin/java&quot;).toString())\r\n  .with(&quot;-Dfile.encoding=UTF-8&quot;)\r\n  .with(&quot;org.example.Main&quot;)\r\n  .withHome(homeDir) // home directory\r\n  .withStdin(&quot;hello, world!&quot;) // input stream\r\n  .exec();\r\n```\r\n\r\nThe absolute path of `bin/java` is calculated by `Jhome`.\r\n","title":"Execute a Java program from our Java program","body":"<p>You may try a combination of two open source libraries: <a href=\"https://github.com/yegor256/jaxec\" rel=\"nofollow noreferrer\">jaxec</a> and <a href=\"https://github.com/yegor256/jhome\" rel=\"nofollow noreferrer\">jhome</a> (I'm an author of them). This is how you call a Java program from your Java program:</p>\n<pre><code>import com.yegor256.Jaxec;\nimport com.yegor256.Jhome;\n\nnew Jaxec()\n  .with(new Jhome().path(&quot;bin/java&quot;).toString())\n  .with(&quot;-Dfile.encoding=UTF-8&quot;)\n  .with(&quot;org.example.Main&quot;)\n  .withHome(homeDir) // home directory\n  .withStdin(&quot;hello, world!&quot;) // input stream\n  .exec();\n</code></pre>\n<p>The absolute path of <code>bin/java</code> is calculated by <code>Jhome</code>.</p>\n"}],"owner":{"account_id":69165,"reputation":580,"user_id":201406,"accept_rate":0,"display_name":"Arun"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63313,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":15,"score":10,"last_activity_date":1700540303,"creation_date":1233561990,"question_id":502494,"body_markdown":"I used \r\n\r\n    Runtime.getRuntime().exec(&quot;_____&quot;)\r\n\r\n but it throws a `IOException` as below:\r\n\r\n    java.io.IOException: CreateProcess: c:/ error=5\r\n      at java.lang.Win32Process.create(Native Method)\r\n      at java.lang.Win32Process.&lt;init&gt;(Win32Process.java:63)\r\n      at java.lang.Runtime.execInternal(Native Method\r\n\r\n I don&#39;t know whether I have the problem with specifying the path or something else. Can anyone please help me with the code.","title":"Execute a Java program from our Java program","body":"<p>I used </p>\n\n<pre><code>Runtime.getRuntime().exec(\"_____\")\n</code></pre>\n\n<p>but it throws a <code>IOException</code> as below:</p>\n\n<pre><code>java.io.IOException: CreateProcess: c:/ error=5\n  at java.lang.Win32Process.create(Native Method)\n  at java.lang.Win32Process.&lt;init&gt;(Win32Process.java:63)\n  at java.lang.Runtime.execInternal(Native Method\n</code></pre>\n\n<p>I don't know whether I have the problem with specifying the path or something else. Can anyone please help me with the code.</p>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":3255430,"reputation":2267,"user_id":2744663,"accept_rate":75,"display_name":"Flight Odyssey"},"score":0,"creation_date":1391462563,"post_id":21537982,"comment_id":32524141,"body_markdown":"The `bar` class will not compile as it is currently written because it is not abstract and does not implement `b`.","body":"The <code>bar</code> class will not compile as it is currently written because it is not abstract and does not implement <code>b</code>."},{"owner":{"account_id":8949866,"reputation":484,"user_id":6941400,"display_name":"Anshuman Kumar"},"score":0,"creation_date":1591861257,"post_id":21537982,"comment_id":110217560,"body_markdown":"Not strictly related, but in C++, if you are dealing with abstract classes, you don&#39;t  need to do it.","body":"Not strictly related, but in C++, if you are dealing with abstract classes, you don&#39;t  need to do it."},{"owner":{"account_id":8949866,"reputation":484,"user_id":6941400,"display_name":"Anshuman Kumar"},"score":0,"creation_date":1591861305,"post_id":21537982,"comment_id":110217578,"body_markdown":"https://ide.geeksforgeeks.org/cMDbSy9cWa Check it out if you like","body":"<a href=\"https://ide.geeksforgeeks.org/cMDbSy9cWa\" rel=\"nofollow noreferrer\">ide.geeksforgeeks.org/cMDbSy9cWa</a> Check it out if you like"}],"answers":[{"tags":[],"owner":{"account_id":428580,"reputation":35982,"user_id":811001,"accept_rate":85,"display_name":"tskuzzy"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1391462431,"creation_date":1391462431,"answer_id":21538017,"question_id":21537982,"body_markdown":"You not only *should*, but **have to** implement all abstract methods (if the subclass is non-abstract). Otherwise an object of that subclass wouldn&#39;t know what to do if that method was called!\r\n\r\nThe only way to prevent this is if the subclass is also declared `abstract`, so that it cannot be instantiated in the first place.","title":"Should I implement all the methods present in an abstract class?","body":"<p>You not only <em>should</em>, but <strong>have to</strong> implement all abstract methods (if the subclass is non-abstract). Otherwise an object of that subclass wouldn't know what to do if that method was called!</p>\n\n<p>The only way to prevent this is if the subclass is also declared <code>abstract</code>, so that it cannot be instantiated in the first place.</p>\n"},{"tags":[],"owner":{"account_id":3043462,"reputation":1717,"user_id":2579839,"accept_rate":27,"display_name":"Girish"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1391462441,"creation_date":1391462441,"answer_id":21538021,"question_id":21537982,"body_markdown":"Ya definately implementing class can define its own method as well and if are not implementing all the methods of your abstract class in the derived class then mark this derived class also as Abstract \r\n\r\nbut at the end of chain you have to make one concrete class which implements all the method that was not implement in abstract sub-parent","title":"Should I implement all the methods present in an abstract class?","body":"<p>Ya definately implementing class can define its own method as well and if are not implementing all the methods of your abstract class in the derived class then mark this derived class also as Abstract </p>\n\n<p>but at the end of chain you have to make one concrete class which implements all the method that was not implement in abstract sub-parent</p>\n"},{"tags":[],"owner":{"account_id":3934016,"reputation":124,"user_id":3251218,"display_name":"M7Jacks"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1391462457,"creation_date":1391462457,"answer_id":21538025,"question_id":21537982,"body_markdown":"Yes, the implementing class need only implement the methods labeled as abstract in the abstract class.","title":"Should I implement all the methods present in an abstract class?","body":"<p>Yes, the implementing class need only implement the methods labeled as abstract in the abstract class.</p>\n"},{"tags":[],"owner":{"account_id":3159138,"reputation":33796,"user_id":2670792,"accept_rate":100,"display_name":"Christian Tapia"},"comment_count":0,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1524246286,"creation_date":1391462518,"answer_id":21538039,"question_id":21537982,"body_markdown":"***Q-1:- Should I implement all methods in `abstract` class?***\r\n\r\n- Yes, you **must** implement all `abstract` methods.\r\n\r\n***Q-2 :- Can the implementing class have its own methods?***\r\n\r\n- Yes, you can declare own (*more specfic*) methods.","title":"Should I implement all the methods present in an abstract class?","body":"<p><strong><em>Q-1:- Should I implement all methods in <code>abstract</code> class?</em></strong></p>\n\n<ul>\n<li>Yes, you <strong>must</strong> implement all <code>abstract</code> methods.</li>\n</ul>\n\n<p><strong><em>Q-2 :- Can the implementing class have its own methods?</em></strong></p>\n\n<ul>\n<li>Yes, you can declare own (<em>more specfic</em>) methods.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1515518,"reputation":24,"user_id":1416592,"display_name":"Vyaas"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1700540028,"creation_date":1391462625,"answer_id":21538065,"question_id":21537982,"body_markdown":"Yes, When you are implementing an Interface **you will have** to implement all its methods (unless the `default` method in Java 8 and later). That is the purpose of defining an Interface. And yes, you can have your own methods in the implementing class where you implement an Interface.","title":"Should I implement all the methods present in an abstract class?","body":"<p>Yes, When you are implementing an Interface <strong>you will have</strong> to implement all its methods (unless the <code>default</code> method in Java 8 and later). That is the purpose of defining an Interface. And yes, you can have your own methods in the implementing class where you implement an Interface.</p>\n"},{"comments":[{"owner":{"account_id":4916508,"reputation":696,"user_id":3960315,"accept_rate":100,"display_name":"Arash"},"score":2,"creation_date":1579770073,"post_id":21538104,"comment_id":105879717,"body_markdown":"This answer is more precise than the others.","body":"This answer is more precise than the others."}],"tags":[],"owner":{"account_id":57395,"reputation":2741,"user_id":171927,"accept_rate":75,"display_name":"scriptmonster"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1391462753,"creation_date":1391462753,"answer_id":21538104,"question_id":21537982,"body_markdown":"You don&#39;t have to implement all methods of an abstract class. **But you must implement all abstract methods of it.**\r\n\r\nIn fact extending an abstract class has no difference then extending a normal class. It&#39;s not like implementing interfaces. Since you&#39;re extending you are creating a subclass thus you can add as many methods and attributes as you need.","title":"Should I implement all the methods present in an abstract class?","body":"<p>You don't have to implement all methods of an abstract class. <strong>But you must implement all abstract methods of it.</strong></p>\n\n<p>In fact extending an abstract class has no difference then extending a normal class. It's not like implementing interfaces. Since you're extending you are creating a subclass thus you can add as many methods and attributes as you need.</p>\n"},{"tags":[],"owner":{"account_id":1413664,"reputation":793,"user_id":1339772,"accept_rate":62,"display_name":"user1339772"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1391462765,"creation_date":1391462765,"answer_id":21538110,"question_id":21537982,"body_markdown":"        public interface I{\r\n           public void m();\r\n        }\r\n        \r\n        public abstract class A1 implements I{\r\n             //No need to implement m() here - since this is abstract\r\n        }\r\n        \r\n        public class B1 extends A1{\r\n          public void m(){\r\n                //This is required, since A1 did not implement m().\r\n          }\r\n        }\r\n        \r\n        public abstract class A11 extends A1{\r\n              //Again No need to implement m() here - since this is abstract\r\n             public abstract void newA11Method()\r\n        }\r\n    \r\n       public class B11 extends A11{\r\n            //This class needs to implement m() and newA11Method()\r\n       }\r\n\r\n","title":"Should I implement all the methods present in an abstract class?","body":"<pre><code>    public interface I{\n       public void m();\n    }\n\n    public abstract class A1 implements I{\n         //No need to implement m() here - since this is abstract\n    }\n\n    public class B1 extends A1{\n      public void m(){\n            //This is required, since A1 did not implement m().\n      }\n    }\n\n    public abstract class A11 extends A1{\n          //Again No need to implement m() here - since this is abstract\n         public abstract void newA11Method()\n    }\n\n   public class B11 extends A11{\n        //This class needs to implement m() and newA11Method()\n   }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":15074744,"reputation":1049,"user_id":10879181,"display_name":"Marinario Agalliu"},"score":1,"creation_date":1605005881,"post_id":21538526,"comment_id":114514779,"body_markdown":"You my friend deserve a big up for this explanation. Thank you and God bless you!","body":"You my friend deserve a big up for this explanation. Thank you and God bless you!"}],"tags":[],"owner":{"account_id":1140957,"reputation":2536,"user_id":1124868,"display_name":"mdewitt"},"comment_count":1,"down_vote_count":0,"up_vote_count":70,"is_accepted":false,"score":70,"last_activity_date":1695122511,"creation_date":1391464066,"answer_id":21538526,"question_id":21537982,"body_markdown":"When you extend an `Interface` or an `Abstract` class you are creating a contract of sorts with that `superclass`. In the contract you are saying:\r\n\r\n&gt; &quot;I will implement all unimplemented methods in my superclass&quot;\r\n\r\nIf you do not, implement all the unimplemented methods, then you are breaking your contract. A way to not break your contract is make your subclass `Abstract` as well as a way of saying \r\n\r\n&gt; &quot;I have not implemented all the methods in my contract, I am going to\r\n&gt; have my subclasses implement them&quot;.\r\n\r\nFor your class `bar` right now, you must implement `b()` or make `bar` an `Abstract` class or you are not fulfilling your contract with `MyAbstractClass`\r\n\r\nThe basic idea is:\r\n\r\n**Interface:** None of my methods are implemented. A subclass must implement all my methods in order to implement me. (Note: I believe default interfaces have been added to Java 8 which may change this a bit)\r\n\r\nExample:\r\n\r\n     public interface myInterface\r\n     { \r\n         //My subclasses must implement this to fulfill their contract with me\r\n         public void methodA();\r\n     \r\n         //My subclasses must implement this to fulfill their contract with me\r\n         public void methodB();\r\n     }\r\n\r\n**Abstract:** I may implement some of my methods, but I will also leave methods as abstract so that my subclasses must implement because they can implement those classes to suit their needs better than I can.\r\n\r\nExample:\r\n     \r\n     public abstract class myAbstractClass\r\n     {\r\n         //My subclasses must implement this to fulfill their contract with me\r\n         public abstract void methodC();\r\n\r\n         public void helloWorld()\r\n         {\r\n             System.out.println(&quot;Hello World&quot;);\r\n         }\r\n     }\r\n\r\n`Abstract` classes can also extend interfaces so they can implement some of their methods. But they can also leave some of the methods unimplemented so the subclass can implement them. If you leave an interface method unimplemented, there is not need to declare it abstract, it is already in the contract.\r\n\r\nExample:\r\n      \r\n\r\n      public abstract class myAbstractClass2 implement myInterface\r\n      {\r\n          @Override\r\n          public void methodA()\r\n          {\r\n              // this fulfills part of the contract with myInterface.\r\n              // my subclasses will not need to implement this unless they want to override\r\n              // my implementation.\r\n          }\r\n\r\n          //My subclasses must implement this to fulfill their contract with me\r\n          public abstract void methodD();\r\n      }\r\n\r\nSo in essence, an abstract class doesn&#39;t have as strict a contract with it&#39;s superclass because it can delegate its methods to its subclasses.\r\n\r\n**Regular Class**: (I use regular to mean non-interface, and non-abstract). I must implement **all** unimplemented methods from all of my superclasses. These classes have a binding contract.\r\n\r\nExample:  \r\n\r\n     public class mySubClass extends myAbstractClass2\r\n     {\r\n         @Override\r\n         public void methodB()\r\n         {\r\n             //must be implemented to fulfill contract with myInterface\r\n         }\r\n\r\n         @Override\r\n         public void methodD()\r\n         {\r\n             //must be implemented to fulfill contract with myAbstractClass2\r\n         }\r\n\r\n         public void myMethod()\r\n         {\r\n            //This is a method specifically for mySubClass. \r\n         }\r\n     }","title":"Should I implement all the methods present in an abstract class?","body":"<p>When you extend an <code>Interface</code> or an <code>Abstract</code> class you are creating a contract of sorts with that <code>superclass</code>. In the contract you are saying:</p>\n<blockquote>\n<p>&quot;I will implement all unimplemented methods in my superclass&quot;</p>\n</blockquote>\n<p>If you do not, implement all the unimplemented methods, then you are breaking your contract. A way to not break your contract is make your subclass <code>Abstract</code> as well as a way of saying</p>\n<blockquote>\n<p>&quot;I have not implemented all the methods in my contract, I am going to\nhave my subclasses implement them&quot;.</p>\n</blockquote>\n<p>For your class <code>bar</code> right now, you must implement <code>b()</code> or make <code>bar</code> an <code>Abstract</code> class or you are not fulfilling your contract with <code>MyAbstractClass</code></p>\n<p>The basic idea is:</p>\n<p><strong>Interface:</strong> None of my methods are implemented. A subclass must implement all my methods in order to implement me. (Note: I believe default interfaces have been added to Java 8 which may change this a bit)</p>\n<p>Example:</p>\n<pre><code> public interface myInterface\n { \n     //My subclasses must implement this to fulfill their contract with me\n     public void methodA();\n \n     //My subclasses must implement this to fulfill their contract with me\n     public void methodB();\n }\n</code></pre>\n<p><strong>Abstract:</strong> I may implement some of my methods, but I will also leave methods as abstract so that my subclasses must implement because they can implement those classes to suit their needs better than I can.</p>\n<p>Example:</p>\n<pre><code> public abstract class myAbstractClass\n {\n     //My subclasses must implement this to fulfill their contract with me\n     public abstract void methodC();\n\n     public void helloWorld()\n     {\n         System.out.println(&quot;Hello World&quot;);\n     }\n }\n</code></pre>\n<p><code>Abstract</code> classes can also extend interfaces so they can implement some of their methods. But they can also leave some of the methods unimplemented so the subclass can implement them. If you leave an interface method unimplemented, there is not need to declare it abstract, it is already in the contract.</p>\n<p>Example:</p>\n<pre><code>  public abstract class myAbstractClass2 implement myInterface\n  {\n      @Override\n      public void methodA()\n      {\n          // this fulfills part of the contract with myInterface.\n          // my subclasses will not need to implement this unless they want to override\n          // my implementation.\n      }\n\n      //My subclasses must implement this to fulfill their contract with me\n      public abstract void methodD();\n  }\n</code></pre>\n<p>So in essence, an abstract class doesn't have as strict a contract with it's superclass because it can delegate its methods to its subclasses.</p>\n<p><strong>Regular Class</strong>: (I use regular to mean non-interface, and non-abstract). I must implement <strong>all</strong> unimplemented methods from all of my superclasses. These classes have a binding contract.</p>\n<p>Example:</p>\n<pre><code> public class mySubClass extends myAbstractClass2\n {\n     @Override\n     public void methodB()\n     {\n         //must be implemented to fulfill contract with myInterface\n     }\n\n     @Override\n     public void methodD()\n     {\n         //must be implemented to fulfill contract with myAbstractClass2\n     }\n\n     public void myMethod()\n     {\n        //This is a method specifically for mySubClass. \n     }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8638088,"reputation":304,"user_id":6467521,"accept_rate":0,"display_name":"VISHWANATH N P"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491974817,"creation_date":1491974817,"answer_id":43360960,"question_id":21537982,"body_markdown":"Yes, when you extends abstract you should give implementation for all [abstract methods][1] which are presents in [abstract class][2]. Othrewise you should make it implementation class as abtract class. \r\n\r\n\r\n  [1]: https://www.quora.com/What-is-the-use-of-abstract-methods-in-Java\r\n  [2]: http://www.geeksforgeeks.org/abstract-classes-in-java/","title":"Should I implement all the methods present in an abstract class?","body":"<p>Yes, when you extends abstract you should give implementation for all <a href=\"https://www.quora.com/What-is-the-use-of-abstract-methods-in-Java\" rel=\"nofollow noreferrer\">abstract methods</a> which are presents in <a href=\"http://www.geeksforgeeks.org/abstract-classes-in-java/\" rel=\"nofollow noreferrer\">abstract class</a>. Othrewise you should make it implementation class as abtract class. </p>\n"},{"tags":[],"owner":{"account_id":14679230,"reputation":2722,"user_id":10601286,"display_name":"Achintha Isuru"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559539435,"creation_date":1559539435,"answer_id":56421561,"question_id":21537982,"body_markdown":"You must implement all the abstract methods you have in the abstract class. But you can directly use the concrete methods that are implemented.\r\n\r\nFor more information please refer to the :\r\nhttps://www.javatpoint.com/abstract-class-in-java","title":"Should I implement all the methods present in an abstract class?","body":"<p>You must implement all the abstract methods you have in the abstract class. But you can directly use the concrete methods that are implemented.</p>\n\n<p>For more information please refer to the :\n<a href=\"https://www.javatpoint.com/abstract-class-in-java\" rel=\"nofollow noreferrer\">https://www.javatpoint.com/abstract-class-in-java</a></p>\n"},{"tags":[],"owner":{"account_id":16455822,"reputation":105,"user_id":11888026,"display_name":"Gayathri Srivathsan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700519081,"creation_date":1581604246,"answer_id":60210172,"question_id":21537982,"body_markdown":"Yes you must implement all the **abstract** methods present in an abstract class. As the purpose of abstract class is purely to create a template for the functions whose implementation is decided by the class implementing them. So if you don&#39;t implement them, then you are breaking the concept of abstract class. But you ***don&#39;t have*** to implement the **non-abstract methods** of the Abstract Class (but you can override them to add another suitable implementation) because it has an implementation already.\r\n\r\nTo answer your second question,  yes you can create any number of your own methods irrespective of the abstract class you are extending. \r\n","title":"Should I implement all the methods present in an abstract class?","body":"<p>Yes you must implement all the <strong>abstract</strong> methods present in an abstract class. As the purpose of abstract class is purely to create a template for the functions whose implementation is decided by the class implementing them. So if you don't implement them, then you are breaking the concept of abstract class. But you <em><strong>don't have</strong></em> to implement the <strong>non-abstract methods</strong> of the Abstract Class (but you can override them to add another suitable implementation) because it has an implementation already.</p>\n<p>To answer your second question,  yes you can create any number of your own methods irrespective of the abstract class you are extending.</p>\n"}],"owner":{"account_id":1262990,"reputation":695,"user_id":1220857,"accept_rate":87,"display_name":"violet kiwi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81530,"favorite_count":0,"down_vote_count":2,"up_vote_count":30,"answer_count":11,"score":28,"last_activity_date":1700540028,"creation_date":1391462315,"question_id":21537982,"body_markdown":"Below is the code snippet:\r\n\r\n    public abstract class MyAbstractClass {\r\n    \r\n        public abstract void a();\r\n        public abstract void b();\r\n    }\r\n\r\n\r\n    public class Foo extends MyAbstractClass {\r\n\r\n        public void a() {\r\n            System.out.println(&quot;hello&quot;);\r\n        }\r\n\r\n        public void b(){\r\n            System.out.println(&quot;bye&quot;);\r\n        }\r\n    }\r\n\r\n\r\n    public class Bar extends MyAbstractClass {\r\n\r\n        public void a() {\r\n            System.out.println(&quot;hello&quot;);\r\n        }\r\n\r\n        public void delta() {\r\n            System.out.println(&quot;gamma&quot;);\r\n        }\r\n    }\r\n\r\n\r\n\r\nThere are couple of questions that I have: \r\n\r\n**Q-1 :- Should I implement ALL the methods in `abstract` class?** \r\n\r\n**Q-2 :- Can the implementing class have its own methods?**\r\n\r\n","title":"Should I implement all the methods present in an abstract class?","body":"<p>Below is the code snippet:</p>\n\n<pre><code>public abstract class MyAbstractClass {\n\n    public abstract void a();\n    public abstract void b();\n}\n\n\npublic class Foo extends MyAbstractClass {\n\n    public void a() {\n        System.out.println(\"hello\");\n    }\n\n    public void b(){\n        System.out.println(\"bye\");\n    }\n}\n\n\npublic class Bar extends MyAbstractClass {\n\n    public void a() {\n        System.out.println(\"hello\");\n    }\n\n    public void delta() {\n        System.out.println(\"gamma\");\n    }\n}\n</code></pre>\n\n<p>There are couple of questions that I have: </p>\n\n<p><strong>Q-1 :- Should I implement ALL the methods in <code>abstract</code> class?</strong> </p>\n\n<p><strong>Q-2 :- Can the implementing class have its own methods?</strong></p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":8357383,"reputation":11939,"user_id":6277104,"display_name":"SternK"},"score":2,"creation_date":1601189582,"post_id":64085651,"comment_id":113324475,"body_markdown":"The class `org.hibernate.dialect.Oracle12cDialect` belong to the `hibernate-core` jar, not to the `ojdbc`. So, what hibernate version do you use?","body":"The class <code>org.hibernate.dialect.Oracle12cDialect</code> belong to the <code>hibernate-core</code> jar, not to the <code>ojdbc</code>. So, what hibernate version do you use?"},{"owner":{"account_id":8357383,"reputation":11939,"user_id":6277104,"display_name":"SternK"},"score":0,"creation_date":1601189969,"post_id":64085651,"comment_id":113324544,"body_markdown":"It was added in hibernate 5.0.0.Beta1, See [HHH-9044](https://hibernate.atlassian.net/browse/HHH-9044)","body":"It was added in hibernate 5.0.0.Beta1, See <a href=\"https://hibernate.atlassian.net/browse/HHH-9044\" rel=\"nofollow noreferrer\">HHH-9044</a>"}],"answers":[{"tags":[],"owner":{"account_id":1615024,"reputation":4089,"user_id":1492969,"accept_rate":56,"display_name":"Sam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1601371512,"creation_date":1601207557,"answer_id":64088162,"question_id":64085651,"body_markdown":"You can find hibernate.dialect.Oracle12cDialect in **hibernate-core-5.0.11**.\r\n\r\nInstead of OJDBC, upgrade your hibernate core dependency to,\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n    &lt;version&gt;5.0.11.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nor any version higher than 5.0.11\r\n","title":"java.lang.ClassNotFoundException: Could not load requested class : org.hibernate.dialect.Oracle12cDialect","body":"<p>You can find hibernate.dialect.Oracle12cDialect in <strong>hibernate-core-5.0.11</strong>.</p>\n<p>Instead of OJDBC, upgrade your hibernate core dependency to,</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n    &lt;version&gt;5.0.11.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>or any version higher than 5.0.11</p>\n"}],"owner":{"account_id":9244469,"reputation":1,"user_id":6866784,"display_name":"Tammy Miller"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17878,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700539530,"creation_date":1601189137,"question_id":64085651,"body_markdown":"I have a problem to compile my application, the reason is:\r\n\r\n```\r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\r\n    Caused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\r\n    Caused by: org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.Oracle12cDialect     ] as strategy [org.hibernate.dialect.Dialect]\r\n    Caused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [org.hibernate.dialect.Oracle12cDialect     ]\r\n    Caused by: java.lang.ClassNotFoundException: Could not load requested class : org.hibernate.dialect.Oracle12cDialect\r\n```\r\n     \r\n\r\nHowever, the jar is in pom.xml:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;oracle&lt;/groupId&gt;\r\n\t&lt;!-- &lt;artifactId&gt;ojdbc7&lt;/artifactId&gt; --&gt;\r\n\t&lt;!-- &lt;version&gt;12.1.0.1&lt;/version&gt; --&gt;\r\n\t&lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n\t&lt;version&gt;12.2.0.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"java.lang.ClassNotFoundException: Could not load requested class : org.hibernate.dialect.Oracle12cDialect","body":"<p>I have a problem to compile my application, the reason is:</p>\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\n    Caused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\n    Caused by: org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.Oracle12cDialect     ] as strategy [org.hibernate.dialect.Dialect]\n    Caused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [org.hibernate.dialect.Oracle12cDialect     ]\n    Caused by: java.lang.ClassNotFoundException: Could not load requested class : org.hibernate.dialect.Oracle12cDialect\n</code></pre>\n<p>However, the jar is in pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;oracle&lt;/groupId&gt;\n    &lt;!-- &lt;artifactId&gt;ojdbc7&lt;/artifactId&gt; --&gt;\n    &lt;!-- &lt;version&gt;12.1.0.1&lt;/version&gt; --&gt;\n    &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n    &lt;version&gt;12.2.0.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","linux","ansible","devops"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1700538459,"post_id":77520091,"comment_id":136664053,"body_markdown":"Write a launch script (typically about 3 lines of bash code) for each Java app that selects the JVM that the app needs to use ... and runs it.","body":"Write a launch script (typically about 3 lines of bash code) for each Java app that selects the JVM that the app needs to use ... and runs it."}],"owner":{"account_id":17073468,"reputation":171,"user_id":12353608,"display_name":"Manu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1700538882,"creation_date":1700536259,"question_id":77520091,"body_markdown":"I have a use case in which Linux server has already few Java Apps running on JDK 1.8, and I need to install a new java app which runs on JDK 17. As part of the installation of new java app, I installed JDK 11 using ansible script which internally changed the system default java version from jdk 1.8 to jdk 17. Due to this, all the old application started failing. Is there a way to install Java 17 using ansible without changing the system default java version 1.8\r\n\r\nPlease note : I am very new in using ansible scripts, so, not very sure how this can be done.","title":"Ansible : How to run multiple apps on Linux with Different Java Version while keeping the default Java version as old version","body":"<p>I have a use case in which Linux server has already few Java Apps running on JDK 1.8, and I need to install a new java app which runs on JDK 17. As part of the installation of new java app, I installed JDK 11 using ansible script which internally changed the system default java version from jdk 1.8 to jdk 17. Due to this, all the old application started failing. Is there a way to install Java 17 using ansible without changing the system default java version 1.8</p>\n<p>Please note : I am very new in using ansible scripts, so, not very sure how this can be done.</p>\n"},{"tags":["java","sum","floating-accuracy"],"comments":[{"owner":{"account_id":43861,"reputation":59786,"user_id":128397,"accept_rate":82,"display_name":"Daniel Pryden"},"score":1,"creation_date":1481526337,"post_id":5257166,"comment_id":69395859,"body_markdown":"Closely related is this question: http://stackoverflow.com/questions/6699066/in-which-order-should-floats-be-added-to-get-the-most-precise-result","body":"Closely related is this question: <a href=\"http://stackoverflow.com/questions/6699066/in-which-order-should-floats-be-added-to-get-the-most-precise-result\" title=\"in which order should floats be added to get the most precise result\">stackoverflow.com/questions/6699066/&hellip;</a>"},{"owner":{"account_id":66816,"reputation":56360,"user_id":195835,"accept_rate":53,"display_name":"Simon East"},"score":0,"creation_date":1700689593,"post_id":5257166,"comment_id":136686953,"body_markdown":"I dont agree with the closing of this question, as the answers have useful Java-specific information and code examples that the supposed duplicate does not. Unfortunately Im outnumbered by the others who want almost all floating point questions directed to the main general one. See [discussion on meta here](https://meta.stackoverflow.com/questions/427161/can-we-reopen-this-javascript-specific-question-about-floating-point-precision-t).","body":"I dont agree with the closing of this question, as the answers have useful Java-specific information and code examples that the supposed duplicate does not. Unfortunately Im outnumbered by the others who want almost all floating point questions directed to the main general one. See <a href=\"https://meta.stackoverflow.com/questions/427161/can-we-reopen-this-javascript-specific-question-about-floating-point-precision-t\">discussion on meta here</a>."}],"answers":[{"tags":[],"owner":{"account_id":24377,"reputation":818073,"user_id":61974,"display_name":"Mark Byers"},"comment_count":0,"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1299746802,"creation_date":1299746218,"answer_id":5257183,"question_id":5257166,"body_markdown":"There is a no exact representation of 0.1 as a `float` or `double`. Because of this representation error the results are slightly different from what you expected.\r\n\r\nA couple of approaches you can use:\r\n\r\n * When using the `double` type, only display as many digits as you need. When checking for equality allow for a small tolerance either way.\r\n * Alternatively use a type that allows you to store the numbers you are trying to represent exactly, for example `BigDecimal` can represent 0.1 exactly.\r\n\r\nExample code for `BigDecimal`:\r\n\r\n    BigDecimal step = new BigDecimal(&quot;0.1&quot;);\r\n    for (BigDecimal value = BigDecimal.ZERO;\r\n         value.compareTo(BigDecimal.ONE) &lt; 0;\r\n         value = value.add(step)) {\r\n        System.out.println(value);\r\n    }\r\n\r\nSee it online: [ideone][1]\r\n\r\n[1]: http://ideone.com/7fKju","title":"How to avoid floating point precision errors with floats or doubles in Java?","body":"<p>There is a no exact representation of 0.1 as a <code>float</code> or <code>double</code>. Because of this representation error the results are slightly different from what you expected.</p>\n\n<p>A couple of approaches you can use:</p>\n\n<ul>\n<li>When using the <code>double</code> type, only display as many digits as you need. When checking for equality allow for a small tolerance either way.</li>\n<li>Alternatively use a type that allows you to store the numbers you are trying to represent exactly, for example <code>BigDecimal</code> can represent 0.1 exactly.</li>\n</ul>\n\n<p>Example code for <code>BigDecimal</code>:</p>\n\n<pre><code>BigDecimal step = new BigDecimal(\"0.1\");\nfor (BigDecimal value = BigDecimal.ZERO;\n     value.compareTo(BigDecimal.ONE) &lt; 0;\n     value = value.add(step)) {\n    System.out.println(value);\n}\n</code></pre>\n\n<p>See it online: <a href=\"http://ideone.com/7fKju\">ideone</a></p>\n"},{"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":13,"creation_date":1299746358,"post_id":5257191,"comment_id":5920048,"body_markdown":"It&#39;s not a matter of &quot;precise&quot; and &quot;imprecise&quot; - it&#39;s a matter of what can be represented in each type. BigDecimal is no more capable of representing &quot;a third&quot; exactly than double is capable of representing &quot;a tenth&quot; exactly.","body":"It&#39;s not a matter of &quot;precise&quot; and &quot;imprecise&quot; - it&#39;s a matter of what can be represented in each type. BigDecimal is no more capable of representing &quot;a third&quot; exactly than double is capable of representing &quot;a tenth&quot; exactly."},{"owner":{"account_id":52616,"reputation":1042991,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":1,"creation_date":1299746481,"post_id":5257191,"comment_id":5920070,"body_markdown":"@Jon: Actually, as you commented I was editing, I&#39;d said &quot;precise&quot; where I meant &quot;accurate&quot; (because everyone does, but I try to avoid doing it). Fascinating point about &quot;a third&quot;, though. **Very** good point indeed.","body":"@Jon: Actually, as you commented I was editing, I&#39;d said &quot;precise&quot; where I meant &quot;accurate&quot; (because everyone does, but I try to avoid doing it). Fascinating point about &quot;a third&quot;, though. <b>Very</b> good point indeed."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1299746667,"post_id":5257191,"comment_id":5920097,"body_markdown":"I&#39;d say that &quot;accurate&quot; isn&#39;t necessarily a good word either. There are two issues here - one is base representation, and the other is a fixed or varying size (where BigDecimal can expand as it sees fit depending on the MathContext, whereas something like System.Decimal in .NET is always 128 bits). But it&#39;s definitely a complicated thing to describe concisely :) &quot;Accurate&quot; may or may not be appropriate for BigDecimal based on the MathContext used - I *believe* that with an &quot;unlimited&quot;, operations will throw an exception if the result can&#39;t be represented exactly.","body":"I&#39;d say that &quot;accurate&quot; isn&#39;t necessarily a good word either. There are two issues here - one is base representation, and the other is a fixed or varying size (where BigDecimal can expand as it sees fit depending on the MathContext, whereas something like System.Decimal in .NET is always 128 bits). But it&#39;s definitely a complicated thing to describe concisely :) &quot;Accurate&quot; may or may not be appropriate for BigDecimal based on the MathContext used - I <i>believe</i> that with an &quot;unlimited&quot;, operations will throw an exception if the result can&#39;t be represented exactly."}],"tags":[],"owner":{"account_id":52616,"reputation":1042991,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"comment_count":3,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1299746659,"creation_date":1299746261,"answer_id":5257191,"question_id":5257166,"body_markdown":"You can avoid this specific problem using classes like [`BigDecimal`][1]. `float` and `double`, being IEEE 754 floating-point, are not designed to be perfectly accurate, they&#39;re designed to be fast. But note Jon&#39;s point below: `BigDecimal` can&#39;t represent &quot;one third&quot; accurately, any more than `double` can represent &quot;one tenth&quot; accurately. But for (say) financial calculations, `BigDecimal` and classes like it tend to be the way to go, because they can represent numbers in the way that we humans tend to think about them.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/math/BigDecimal.html","title":"How to avoid floating point precision errors with floats or doubles in Java?","body":"<p>You can avoid this specific problem using classes like <a href=\"http://download.oracle.com/javase/6/docs/api/java/math/BigDecimal.html\" rel=\"noreferrer\"><code>BigDecimal</code></a>. <code>float</code> and <code>double</code>, being IEEE 754 floating-point, are not designed to be perfectly accurate, they're designed to be fast. But note Jon's point below: <code>BigDecimal</code> can't represent \"one third\" accurately, any more than <code>double</code> can represent \"one tenth\" accurately. But for (say) financial calculations, <code>BigDecimal</code> and classes like it tend to be the way to go, because they can represent numbers in the way that we humans tend to think about them.</p>\n"},{"comments":[{"owner":{"account_id":1209109,"reputation":7934,"user_id":1178016,"accept_rate":73,"display_name":"xehpuk"},"score":0,"creation_date":1473274293,"post_id":5257192,"comment_id":66082209,"body_markdown":"@anivaler The link was broken from the beginning. Java 1.4 was long dead when this answer was posted.","body":"@anivaler The link was broken from the beginning. Java 1.4 was long dead when this answer was posted."}],"tags":[],"owner":{"account_id":187807,"reputation":2221,"user_id":426133,"accept_rate":82,"display_name":"Tobias Schittkowski"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1473325156,"creation_date":1299746261,"answer_id":5257192,"question_id":5257166,"body_markdown":"You should use a decimal datatype, not floats:\r\n\r\nhttps://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html","title":"How to avoid floating point precision errors with floats or doubles in Java?","body":"<p>You should use a decimal datatype, not floats:</p>\n\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html\" rel=\"nofollow\">https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html</a></p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1299746459,"creation_date":1299746459,"answer_id":5257208,"question_id":5257166,"body_markdown":"It&#39;s *not* just an accumulated error (and has absolutely nothing to do with Java). `1.0f`, once translated to actual code, does not have the value 0.1 - you already get a rounding error.\r\n\r\nFrom [The Floating-Point Guide:][1]\r\n\r\n&gt; What can I do to avoid this problem?\r\n&gt; \r\n&gt; That depends on what kind of\r\n&gt; calculations youre doing.\r\n&gt; \r\n&gt;    * If you really need your results to add up exactly, especially when you work with money: use a special decimal datatype.\r\n&gt;    * If you just dont want to see all those extra decimal places: simply format your result rounded to a fixed\r\n&gt; number of decimal places when\r\n&gt; displaying it.\r\n&gt;    * If you have no decimal datatype available, an alternative is to work\r\n&gt; with integers, e.g. do money\r\n&gt; calculations entirely in cents. But\r\n&gt; this is more work and has some\r\n&gt; drawbacks.\r\n\r\nRead the linked-to site for detailed information.\r\n\r\n  [1]: http://floating-point-gui.de/","title":"How to avoid floating point precision errors with floats or doubles in Java?","body":"<p>It's <em>not</em> just an accumulated error (and has absolutely nothing to do with Java). <code>1.0f</code>, once translated to actual code, does not have the value 0.1 - you already get a rounding error.</p>\n\n<p>From <a href=\"http://floating-point-gui.de/\" rel=\"nofollow\">The Floating-Point Guide:</a></p>\n\n<blockquote>\n  <p>What can I do to avoid this problem?</p>\n  \n  <p>That depends on what kind of\n  calculations youre doing.</p>\n  \n  <ul>\n  <li>If you really need your results to add up exactly, especially when you work with money: use a special decimal datatype.</li>\n  <li>If you just dont want to see all those extra decimal places: simply format your result rounded to a fixed\n  number of decimal places when\n  displaying it.</li>\n  <li>If you have no decimal datatype available, an alternative is to work\n  with integers, e.g. do money\n  calculations entirely in cents. But\n  this is more work and has some\n  drawbacks.</li>\n  </ul>\n</blockquote>\n\n<p>Read the linked-to site for detailed information.</p>\n"},{"tags":[],"owner":{"account_id":834,"reputation":45846,"user_id":1088,"accept_rate":92,"display_name":"aib"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1299746759,"creation_date":1299746759,"answer_id":5257255,"question_id":5257166,"body_markdown":"Another solution is to forgo `==` and check if the two values are *close enough*. (I know this is not what you asked in the body but I&#39;m answering the question title.)","title":"How to avoid floating point precision errors with floats or doubles in Java?","body":"<p>Another solution is to forgo <code>==</code> and check if the two values are <em>close enough</em>. (I know this is not what you asked in the body but I'm answering the question title.)</p>\n"},{"tags":[],"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1299748715,"creation_date":1299748715,"answer_id":5257584,"question_id":5257166,"body_markdown":"If you want to keep on using `float` and avoid accumulating errors by repeatedly adding `0.1f`, try something like this:\r\n\r\n    for (int count = 0; count &lt; 10; count++) {\r\n        float value = 0.1f * count;\r\n        System.out.println(value);\r\n    }\r\n\r\nNote however, as others have already explained, that `float` is not an infinitely precise data type.","title":"How to avoid floating point precision errors with floats or doubles in Java?","body":"<p>If you want to keep on using <code>float</code> and avoid accumulating errors by repeatedly adding <code>0.1f</code>, try something like this:</p>\n\n<pre><code>for (int count = 0; count &lt; 10; count++) {\n    float value = 0.1f * count;\n    System.out.println(value);\n}\n</code></pre>\n\n<p>Note however, as others have already explained, that <code>float</code> is not an infinitely precise data type.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1299748811,"creation_date":1299748811,"answer_id":5257597,"question_id":5257166,"body_markdown":"Don&#39;t use float/double in an iterator as this maximises your rounding error.  If you just use the following\r\n\r\n    for (int i = 0; i &lt; 10; i++)\r\n        System.out.println(i / 10.0);\r\n\r\nit prints\r\n\r\n    0.0\r\n    0.1\r\n    0.2\r\n    0.3\r\n    0.4\r\n    0.5\r\n    0.6\r\n    0.7\r\n    0.8\r\n    0.9\r\n\r\nI know BigDecimal is a popular choice, but I prefer double not because its much faster but its usually much shorter/cleaner to understand.\r\n\r\nIf you count the number of symbols as a measure of code complexity\r\n\r\n- using double =&gt; 11 symbols\r\n- use BigDecimal (from @Mark Byers example) =&gt; 21 symbols\r\n\r\nBTW: don&#39;t use float unless there is a *really* good reason to not use double.","title":"How to avoid floating point precision errors with floats or doubles in Java?","body":"<p>Don't use float/double in an iterator as this maximises your rounding error.  If you just use the following</p>\n\n<pre><code>for (int i = 0; i &lt; 10; i++)\n    System.out.println(i / 10.0);\n</code></pre>\n\n<p>it prints</p>\n\n<pre><code>0.0\n0.1\n0.2\n0.3\n0.4\n0.5\n0.6\n0.7\n0.8\n0.9\n</code></pre>\n\n<p>I know BigDecimal is a popular choice, but I prefer double not because its much faster but its usually much shorter/cleaner to understand.</p>\n\n<p>If you count the number of symbols as a measure of code complexity</p>\n\n<ul>\n<li>using double => 11 symbols</li>\n<li>use BigDecimal (from @Mark Byers example) => 21 symbols</li>\n</ul>\n\n<p>BTW: don't use float unless there is a <em>really</em> good reason to not use double.</p>\n"},{"tags":[],"owner":{"account_id":2831,"reputation":17651,"user_id":4003,"accept_rate":96,"display_name":"Nick Pierpoint"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1299751827,"creation_date":1299751827,"answer_id":5258156,"question_id":5257166,"body_markdown":"You just need to be aware of the precision required in your calculation and the precision your chosen data type is capable of and present your answers accordingly.\r\n\r\nFor example, if you are dealing with numbers with 3 significant figures, use of `float` (which provides a precision of 7 significant figures) is appropriate. However, you can&#39;t quote your final answer to a precision of 7 significant figures if your starting values only have a precision of 2 significant figures.\r\n\r\n    5.01 + 4.02 = 9.03 (to 3 significant figures)\r\n\r\nIn your example you are performing multiple additions, and with each addition there is a consequent impact on the final precision.","title":"How to avoid floating point precision errors with floats or doubles in Java?","body":"<p>You just need to be aware of the precision required in your calculation and the precision your chosen data type is capable of and present your answers accordingly.</p>\n\n<p>For example, if you are dealing with numbers with 3 significant figures, use of <code>float</code> (which provides a precision of 7 significant figures) is appropriate. However, you can't quote your final answer to a precision of 7 significant figures if your starting values only have a precision of 2 significant figures.</p>\n\n<pre><code>5.01 + 4.02 = 9.03 (to 3 significant figures)\n</code></pre>\n\n<p>In your example you are performing multiple additions, and with each addition there is a consequent impact on the final precision.</p>\n"},{"tags":[],"owner":{"account_id":1489317,"reputation":9140,"user_id":1396822,"accept_rate":82,"display_name":"aka.nice"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1353097713,"creation_date":1353097713,"answer_id":13423943,"question_id":5257166,"body_markdown":"For the sake of completeness I recommend this one:\r\n\r\nShewchuck, &quot;Robust Adaptive Floating-Point Geometric Predicates&quot;, if you want more examples of how to perform exact arithmetic with floating point - or at least controlled accuracy which is the original intention of author, http://www.cs.berkeley.edu/~jrs/papers/robustr.pdf ","title":"How to avoid floating point precision errors with floats or doubles in Java?","body":"<p>For the sake of completeness I recommend this one:</p>\n\n<p>Shewchuck, \"Robust Adaptive Floating-Point Geometric Predicates\", if you want more examples of how to perform exact arithmetic with floating point - or at least controlled accuracy which is the original intention of author, <a href=\"http://www.cs.berkeley.edu/~jrs/papers/robustr.pdf\" rel=\"nofollow\">http://www.cs.berkeley.edu/~jrs/papers/robustr.pdf</a> </p>\n"},{"tags":[],"owner":{"account_id":1766074,"reputation":549,"user_id":1611938,"accept_rate":50,"display_name":"Balu SKT"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1437719963,"creation_date":1437719963,"answer_id":31603824,"question_id":5257166,"body_markdown":"I had faced same issue, resolved the same using BigDecimal. Below is the snippet which helped me.\r\n\r\n    double[] array = {45.34d, 45000.24d, 15000.12d, 4534.89d, 3444.12d, 12000.00d, 4900.00d, 1800.01d};\r\n\tdouble total = 0.00d;\r\n\tBigDecimal bTotal = new BigDecimal(0.0+&quot;&quot;);\r\n\tfor(int i = 0;i &lt; array.length; i++) {\r\n\t\ttotal += (double)array[i];\r\n\t\tbTotal = bTotal.add(new BigDecimal(array[i] +&quot;&quot;));\r\n\t}\r\n\tSystem.out.println(total);\r\n\tSystem.out.println(bTotal);\r\n\r\nHope it will help you.","title":"How to avoid floating point precision errors with floats or doubles in Java?","body":"<p>I had faced same issue, resolved the same using BigDecimal. Below is the snippet which helped me.</p>\n\n<pre><code>double[] array = {45.34d, 45000.24d, 15000.12d, 4534.89d, 3444.12d, 12000.00d, 4900.00d, 1800.01d};\ndouble total = 0.00d;\nBigDecimal bTotal = new BigDecimal(0.0+\"\");\nfor(int i = 0;i &lt; array.length; i++) {\n    total += (double)array[i];\n    bTotal = bTotal.add(new BigDecimal(array[i] +\"\"));\n}\nSystem.out.println(total);\nSystem.out.println(bTotal);\n</code></pre>\n\n<p>Hope it will help you.</p>\n"},{"tags":[],"owner":{"account_id":8432140,"reputation":21,"user_id":6327476,"display_name":"Solus"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1487927044,"creation_date":1463083633,"answer_id":37196470,"question_id":5257166,"body_markdown":"    package loopinamdar;\r\n\r\n    import java.text.DecimalFormat;\r\n\r\n    public class loopinam {\r\n\t    static DecimalFormat valueFormat = new DecimalFormat(&quot;0.0&quot;);\r\n\r\n\t    public static void main(String[] args) {\r\n\t\t    for (float value = 0.0f; value &lt; 1.0f; value += 0.1f)\r\n\t\t        System.out.println(&quot;&quot; + valueFormat.format(value));\r\n\t    }\r\n    }\r\n","title":"How to avoid floating point precision errors with floats or doubles in Java?","body":"<pre><code>package loopinamdar;\n\nimport java.text.DecimalFormat;\n\npublic class loopinam {\n    static DecimalFormat valueFormat = new DecimalFormat(\"0.0\");\n\n    public static void main(String[] args) {\n        for (float value = 0.0f; value &lt; 1.0f; value += 0.1f)\n            System.out.println(\"\" + valueFormat.format(value));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4434190,"reputation":1816,"user_id":3610482,"display_name":"rdalmeida"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523717716,"creation_date":1523651514,"answer_id":49824714,"question_id":5257166,"body_markdown":"First make it a **double**. Don&#39;t ever use *float* or you will have trouble using the `java.lang.Math` utilities.\r\n\r\nNow if you happen to know in advance the **precision** you want and it is equal or less than 15, then it becomes easy to tell your *double*s to behave. Check below:\r\n\r\n    // the magic method:\r\n    public final static double makePrecise(double value, int precision) {\r\n    \tdouble pow = Math.pow(10, precision);\r\n    \tlong powValue = Math.round(pow * value);\r\n    \treturn powValue / pow;\r\n    }\r\n\r\nNow whenever you make an operation, you must tell your *double* result to behave:\r\n\r\n    for ( double value = 0.0d; value &lt; 1.0d; value += 0.1d )\r\n    \t\t    System.out.println( makePrecise(value, 1) + &quot; =&gt; &quot; + value );\r\n\r\nOutput:\r\n\r\n    0.0 =&gt; 0.0\r\n    0.1 =&gt; 0.1\r\n    0.2 =&gt; 0.2\r\n    0.3 =&gt; 0.30000000000000004\r\n    0.4 =&gt; 0.4\r\n    0.5 =&gt; 0.5\r\n    0.6 =&gt; 0.6\r\n    0.7 =&gt; 0.7\r\n    0.8 =&gt; 0.7999999999999999\r\n    0.9 =&gt; 0.8999999999999999\r\n    1.0 =&gt; 0.9999999999999999\r\n\r\nIf you need more than 15 precision then you are out of luck:\r\n\r\n    for ( double value = 0.0d; value &lt; 1.0d; value += 0.1d )\r\n    \t\t    System.out.println( makePrecise(value, 16) + &quot; =&gt; &quot; + value );\r\n\r\nOutput:\r\n\r\n    0.0 =&gt; 0.0\r\n    0.1 =&gt; 0.1\r\n    0.2 =&gt; 0.2\r\n    0.3000000000000001 =&gt; 0.30000000000000004\r\n    0.4 =&gt; 0.4\r\n    0.5 =&gt; 0.5\r\n    0.6 =&gt; 0.6\r\n    0.7 =&gt; 0.7\r\n    0.8 =&gt; 0.7999999999999999\r\n    0.9 =&gt; 0.8999999999999999\r\n    0.9999999999999998 =&gt; 0.9999999999999999\r\n\r\n**NOTE1:** For performance you should cache the `Math.pow` operation in an array. Not done here for clarity.\r\n\r\n**NOTE2:** That&#39;s why we never use *double*s for prices, but *long*s where the last N (i.e. where N &lt;= 15, usually 8) digits are the decimal digits. Then you can forget about what I wrote above :)\r\n","title":"How to avoid floating point precision errors with floats or doubles in Java?","body":"<p>First make it a <strong>double</strong>. Don't ever use <em>float</em> or you will have trouble using the <code>java.lang.Math</code> utilities.</p>\n\n<p>Now if you happen to know in advance the <strong>precision</strong> you want and it is equal or less than 15, then it becomes easy to tell your <em>double</em>s to behave. Check below:</p>\n\n<pre><code>// the magic method:\npublic final static double makePrecise(double value, int precision) {\n    double pow = Math.pow(10, precision);\n    long powValue = Math.round(pow * value);\n    return powValue / pow;\n}\n</code></pre>\n\n<p>Now whenever you make an operation, you must tell your <em>double</em> result to behave:</p>\n\n<pre><code>for ( double value = 0.0d; value &lt; 1.0d; value += 0.1d )\n            System.out.println( makePrecise(value, 1) + \" =&gt; \" + value );\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0.0 =&gt; 0.0\n0.1 =&gt; 0.1\n0.2 =&gt; 0.2\n0.3 =&gt; 0.30000000000000004\n0.4 =&gt; 0.4\n0.5 =&gt; 0.5\n0.6 =&gt; 0.6\n0.7 =&gt; 0.7\n0.8 =&gt; 0.7999999999999999\n0.9 =&gt; 0.8999999999999999\n1.0 =&gt; 0.9999999999999999\n</code></pre>\n\n<p>If you need more than 15 precision then you are out of luck:</p>\n\n<pre><code>for ( double value = 0.0d; value &lt; 1.0d; value += 0.1d )\n            System.out.println( makePrecise(value, 16) + \" =&gt; \" + value );\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0.0 =&gt; 0.0\n0.1 =&gt; 0.1\n0.2 =&gt; 0.2\n0.3000000000000001 =&gt; 0.30000000000000004\n0.4 =&gt; 0.4\n0.5 =&gt; 0.5\n0.6 =&gt; 0.6\n0.7 =&gt; 0.7\n0.8 =&gt; 0.7999999999999999\n0.9 =&gt; 0.8999999999999999\n0.9999999999999998 =&gt; 0.9999999999999999\n</code></pre>\n\n<p><strong>NOTE1:</strong> For performance you should cache the <code>Math.pow</code> operation in an array. Not done here for clarity.</p>\n\n<p><strong>NOTE2:</strong> That's why we never use <em>double</em>s for prices, but <em>long</em>s where the last N (i.e. where N &lt;= 15, usually 8) digits are the decimal digits. Then you can forget about what I wrote above :)</p>\n"}],"owner":{"account_id":12810,"reputation":23492,"user_id":25418,"accept_rate":89,"display_name":"tunnuz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55905,"favorite_count":0,"down_vote_count":1,"up_vote_count":33,"closed_date":1700538474,"accepted_answer_id":5257183,"answer_count":12,"score":32,"last_activity_date":1700538613,"creation_date":1299746117,"question_id":5257166,"body_markdown":"I have aproblem with long sums of floats or doubles in Java.\r\n\r\nIf I execute:\r\n\r\n    for ( float value = 0.0f; value &lt; 1.0f; value += 0.1f )\r\n        System.out.println( value );\r\n\r\nI get:\r\n\r\n    0.0\r\n    0.1\r\n    0.2\r\n    0.3\r\n    0.4\r\n    0.5\r\n    0.6\r\n    0.70000005\r\n    0.8000001\r\n    0.9000001\r\n \r\nHow do I get rid of the accumulation of the floating precision error?\r\n\r\nI tried using doubles to halve the error, but the result is the same.","title":"How to avoid floating point precision errors with floats or doubles in Java?","body":"<p>I have aproblem with long sums of floats or doubles in Java.</p>\n<p>If I execute:</p>\n<pre><code>for ( float value = 0.0f; value &lt; 1.0f; value += 0.1f )\n    System.out.println( value );\n</code></pre>\n<p>I get:</p>\n<pre><code>0.0\n0.1\n0.2\n0.3\n0.4\n0.5\n0.6\n0.70000005\n0.8000001\n0.9000001\n</code></pre>\n<p>How do I get rid of the accumulation of the floating precision error?</p>\n<p>I tried using doubles to halve the error, but the result is the same.</p>\n"},{"tags":["java","spring","spring-annotations"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1700538330,"post_id":77520135,"comment_id":136664037,"body_markdown":"not too sure about this, but @Value inject the properties from somewhere, then wouldnt each call or reference to the myTopic bean or getMyTopic keep injecting the value making it less efficient?","body":"not too sure about this, but @Value inject the properties from somewhere, then wouldnt each call or reference to the myTopic bean or getMyTopic keep injecting the value making it less efficient?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1700549802,"post_id":77520135,"comment_id":136665071,"body_markdown":"Yes that will work, best practice (when using Spring Boot though) is to bind the properties to a properties class and inject that into the `@Bean` method. But what you wrote with the `@Bean` will just work.","body":"Yes that will work, best practice (when using Spring Boot though) is to bind the properties to a properties class and inject that into the <code>@Bean</code> method. But what you wrote with the <code>@Bean</code> will just work."}],"owner":{"account_id":27925481,"reputation":175,"user_id":21324690,"display_name":"chunkynuggy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1700537088,"creation_date":1700537088,"question_id":77520135,"body_markdown":"I m making a @Configuration class that is to just provide the names of topics and queues I want to publish/subscribe to using JMS. The config file looks something like the following but repeated 10+ times. \r\n\r\n    @Value(&quot;myTopic&quot;)\r\n    private String myTopic;\r\n    @Bean(&quot;myTopic&quot;)\r\n    public String getMyTopic() { return this.myTopic; }\r\n\r\nI was wondering if I could simplify it to the following. Whether it is best practice, allowed etc?\r\n\r\n    @Bean(&quot;myTopic&quot;)\r\n    public String getMyTopic(@Value(&quot;myTopic&quot;) final String myTopic) { return myTopic; }\r\n\r\n\r\nI did not put the topics and queues inside application.properties, because this configuration class is being used by two different projects. If the values are put into application.properties, it would require both projects to include those values inside their application.properties, but I dont have access to change those","title":"Can I simplify spring configuration file beans by combining the annotations onto one method?","body":"<p>I m making a @Configuration class that is to just provide the names of topics and queues I want to publish/subscribe to using JMS. The config file looks something like the following but repeated 10+ times.</p>\n<pre><code>@Value(&quot;myTopic&quot;)\nprivate String myTopic;\n@Bean(&quot;myTopic&quot;)\npublic String getMyTopic() { return this.myTopic; }\n</code></pre>\n<p>I was wondering if I could simplify it to the following. Whether it is best practice, allowed etc?</p>\n<pre><code>@Bean(&quot;myTopic&quot;)\npublic String getMyTopic(@Value(&quot;myTopic&quot;) final String myTopic) { return myTopic; }\n</code></pre>\n<p>I did not put the topics and queues inside application.properties, because this configuration class is being used by two different projects. If the values are put into application.properties, it would require both projects to include those values inside their application.properties, but I dont have access to change those</p>\n"},{"tags":["java","javafx"],"answers":[{"comments":[{"owner":{"account_id":26636851,"reputation":31,"user_id":20253139,"display_name":""},"score":0,"creation_date":1700559269,"post_id":77520106,"comment_id":136666554,"body_markdown":"You use this Fxplorer software is your own writing, it feels very useful, Can you share it with me.","body":"You use this Fxplorer software is your own writing, it feels very useful, Can you share it with me."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1700592284,"post_id":77520106,"comment_id":136672867,"body_markdown":"@ The _Fxplorer_ in the screenshot looks similar to [Scenic View](https://github.com/JonathanGiles/scenic-view) (I don&#39;t believe the two are the same software, but I couldn&#39;t find _Fxplorer_ from a quick Google search, and _Scenic View_ is readily available on GitHub).","body":"@ The <i>Fxplorer</i> in the screenshot looks similar to <a href=\"https://github.com/JonathanGiles/scenic-view\" rel=\"nofollow noreferrer\">Scenic View</a> (I don&#39;t believe the two are the same software, but I couldn&#39;t find <i>Fxplorer</i> from a quick Google search, and <i>Scenic View</i> is readily available on GitHub)."},{"owner":{"account_id":7717111,"reputation":8774,"user_id":5844477,"display_name":"Sai Dandem"},"score":1,"creation_date":1700611354,"post_id":77520106,"comment_id":136675388,"body_markdown":"@Slaw you are right. This tool is built by taking the inspiration from ScenicView. ScenicView has some limitations. Particularly for inspecting Popups(in ComboBox, Menus, etc) which is a major blocker for me. Also there is not clear details about the background &amp; border details of node. So used the technique (RMI) that is used in ScenicView and developed a tool from scratch as per my needs. A quick readme about the tool can be found [here](https://github.com/SaiPradeepDandem/Fxplorer/). I will publish this once I clean the code.","body":"@Slaw you are right. This tool is built by taking the inspiration from ScenicView. ScenicView has some limitations. Particularly for inspecting Popups(in ComboBox, Menus, etc) which is a major blocker for me. Also there is not clear details about the background &amp; border details of node. So used the technique (RMI) that is used in ScenicView and developed a tool from scratch as per my needs. A quick readme about the tool can be found <a href=\"https://github.com/SaiPradeepDandem/Fxplorer/\" rel=\"nofollow noreferrer\">here</a>. I will publish this once I clean the code."}],"tags":[],"owner":{"account_id":7717111,"reputation":8774,"user_id":5844477,"display_name":"Sai Dandem"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1700536479,"creation_date":1700536479,"answer_id":77520106,"question_id":77520020,"body_markdown":"If you check the hierarchy of text area as in below image, the shadow is actually the background color (gradient) of ContentView. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nSo to turn if off, just set the ContentView background color to white in your current css.\r\n\r\n    .text-area-ui .content {\r\n        -fx-background-insets: 0;\r\n        -fx-background-color:white;\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/buNvO.png","title":"The issue is with the top shadow in the TextArea","body":"<p>If you check the hierarchy of text area as in below image, the shadow is actually the background color (gradient) of ContentView.</p>\n<p><a href=\"https://i.stack.imgur.com/buNvO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/buNvO.png\" alt=\"enter image description here\" /></a></p>\n<p>So to turn if off, just set the ContentView background color to white in your current css.</p>\n<pre><code>.text-area-ui .content {\n    -fx-background-insets: 0;\n    -fx-background-color:white;\n}\n</code></pre>\n"}],"owner":{"account_id":26636851,"reputation":31,"user_id":20253139,"display_name":""},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700536479,"creation_date":1700534813,"question_id":77520020,"body_markdown":"[![enter image description here](https://i.stack.imgur.com/WnAGR.png)](https://i.stack.imgur.com/WnAGR.png)I am trying to beautify a TextArea, but there is always a shadow at the top of the TextArea that I want to eliminate. \r\nThis is my CSS code:\r\n```CSS\r\n.text-area-ui{\r\n    /*-fx-effect: innershadow(one-pass-box, rgba(128, 128, 128, 0.67), 5, 0, 1, 1);*/\r\n    -fx-background-radius: 3;\r\n    -fx-background-color: white;\r\n}\r\n.text-area-ui:focused{\r\n    /*-fx-effect: dropshadow(two-pass-box, #0075FF, 5, 0, 1, 1)!important;*/\r\n}\r\n.text-area-ui .content {\r\n    -fx-background-insets: 0;\r\n}\r\n```\r\n\r\nI have consulted the JavaFX CSS documentation, but I cannot resolve it. ","title":"The issue is with the top shadow in the TextArea","body":"<p><a href=\"https://i.stack.imgur.com/WnAGR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WnAGR.png\" alt=\"enter image description here\" /></a>I am trying to beautify a TextArea, but there is always a shadow at the top of the TextArea that I want to eliminate.\nThis is my CSS code:</p>\n<pre><code>.text-area-ui{\n    /*-fx-effect: innershadow(one-pass-box, rgba(128, 128, 128, 0.67), 5, 0, 1, 1);*/\n    -fx-background-radius: 3;\n    -fx-background-color: white;\n}\n.text-area-ui:focused{\n    /*-fx-effect: dropshadow(two-pass-box, #0075FF, 5, 0, 1, 1)!important;*/\n}\n.text-area-ui .content {\n    -fx-background-insets: 0;\n}\n</code></pre>\n<p>I have consulted the JavaFX CSS documentation, but I cannot resolve it.</p>\n"},{"tags":["java","overriding","equals","hashcode"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1700525473,"post_id":77519602,"comment_id":136663122,"body_markdown":"`When I set two boards with same values, equals method should return true.` Then what constitutes &quot;same values?&quot;  Wouldn&#39;t it just be the `board` state, not the other values?","body":"<code>When I set two boards with same values, equals method should return true.</code> Then what constitutes &quot;same values?&quot;  Wouldn&#39;t it just be the <code>board</code> state, not the other values?"}],"answers":[{"tags":[],"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700526637,"creation_date":1700526637,"answer_id":77519687,"question_id":77519602,"body_markdown":"I think your problem is that one+ field is incompatible with the EqualBuilder. Specifically the class does not itself implement an `equals()` properly.  As you don&#39;t provide the source for these classes we cannot know.\r\n\r\nI thought perhaps it was the 2D array `SudokuField[][] board`. But looking at line 823 of the source of the utility:\r\n\r\nhttps://commons.apache.org/proper/commons-lang//jacoco/org.apache.commons.lang3.builder/EqualsBuilder.java.html\r\n\r\nit looks as if properly recurses.\r\n\r\nSo, what I would do is, take each `append()` in \r\n\r\n```\r\n        return new EqualsBuilder()\r\n                .append(board, otherBoard.board)\r\n                .append(solver, otherBoard.solver)\r\n                .append(columnObservers, otherBoard.columnObservers)\r\n                .append(rowObservers, otherBoard.rowObservers)\r\n                .append(boxObservers, otherBoard.boxObservers)\r\n                .append(state, otherBoard.state)\r\n                .isEquals();\r\n```\r\n\r\nAnd remove one at a time and see which one is breaking the equality.\r\n\r\nThe other thing you could do is try `EqualsBuilder.reflectionEquals(this, obj)` which ought to traverse the full tree depth using reflection\r\n\r\n","title":"How to write equals method using Apache commons-lang3?","body":"<p>I think your problem is that one+ field is incompatible with the EqualBuilder. Specifically the class does not itself implement an <code>equals()</code> properly.  As you don't provide the source for these classes we cannot know.</p>\n<p>I thought perhaps it was the 2D array <code>SudokuField[][] board</code>. But looking at line 823 of the source of the utility:</p>\n<p><a href=\"https://commons.apache.org/proper/commons-lang//jacoco/org.apache.commons.lang3.builder/EqualsBuilder.java.html\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-lang//jacoco/org.apache.commons.lang3.builder/EqualsBuilder.java.html</a></p>\n<p>it looks as if properly recurses.</p>\n<p>So, what I would do is, take each <code>append()</code> in</p>\n<pre><code>        return new EqualsBuilder()\n                .append(board, otherBoard.board)\n                .append(solver, otherBoard.solver)\n                .append(columnObservers, otherBoard.columnObservers)\n                .append(rowObservers, otherBoard.rowObservers)\n                .append(boxObservers, otherBoard.boxObservers)\n                .append(state, otherBoard.state)\n                .isEquals();\n</code></pre>\n<p>And remove one at a time and see which one is breaking the equality.</p>\n<p>The other thing you could do is try <code>EqualsBuilder.reflectionEquals(this, obj)</code> which ought to traverse the full tree depth using reflection</p>\n"}],"owner":{"account_id":26882599,"reputation":23,"user_id":20462765,"display_name":"jano"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700536288,"creation_date":1700524698,"question_id":77519602,"body_markdown":"```\r\npackage org.sudoku;\r\n\r\nimport org.apache.commons.lang3.builder.EqualsBuilder;\r\nimport org.apache.commons.lang3.builder.HashCodeBuilder;\r\n\r\nimport java.util.*;\r\n\r\npublic class SudokuBoard {\r\n    private final SudokuField[][] board = new SudokuField[9][9];\r\n    private final SudokuSolver solver;\r\n    private final SudokuColumn[] columnObservers = new SudokuColumn[9];\r\n    private final SudokuRow[] rowObservers = new SudokuRow[9];\r\n    private final SudokuBox[] boxObservers = new SudokuBox[9];\r\n    private boolean state = true;\r\n\r\n    public SudokuBoard(SudokuSolver solver) {\r\n        this.solver = Objects.requireNonNull(solver);\r\n        for (int i = 0; i &lt; 9; i++) {\r\n            for (int j = 0; j &lt; 9; j++) {\r\n                board[i][j] = new SudokuField();\r\n            }\r\n        }\r\n        for (int y = 0; y &lt; 9; y++) {\r\n            List&lt;SudokuField&gt; fields = Arrays.asList(new SudokuField[9]);\r\n            for (int i = 0; i &lt; 9; i++) {\r\n                fields.set(i, board[y][i]);\r\n            }\r\n            rowObservers[y] = new SudokuRow(fields);\r\n        }\r\n        for (int x = 0; x &lt; 9; x++) {\r\n            List&lt;SudokuField&gt; fields = Arrays.asList(new SudokuField[9]);\r\n            for (int i = 0; i &lt; 9; i++) {\r\n                fields.set(i, board[i][x]);\r\n            }\r\n            columnObservers[x] = new SudokuColumn(fields);\r\n        }\r\n        int tableIndex = 0;\r\n        for (int x = 0; x &lt; 9; x  += 3) {\r\n            for (int y = 0; y &lt; 9; y += 3) {\r\n                List&lt;SudokuField&gt; fields = Arrays.asList(new SudokuField[9]);\r\n                int fieldIndex = 0;\r\n                for (int i = x; i &lt; x + 3; i++) {\r\n                    for (int j = y; j &lt; y + 3; j++) {\r\n                        fields.set(fieldIndex, board[i][j]);\r\n                        fieldIndex++;\r\n                    }\r\n                }\r\n                boxObservers[tableIndex] = new SudokuBox(fields);\r\n                tableIndex++;\r\n            }\r\n        }\r\n        int tableIndex2 = 0;\r\n        for (int i = 0; i &lt; 9; i++) {\r\n            for (int j = 0; j &lt; 9; j++) {\r\n                board[i][j].setObservers(columnObservers[i], rowObservers[j], boxObservers[tableIndex2]);\r\n                if (j % 3 == 2) {\r\n                    tableIndex2++;\r\n                }\r\n            }\r\n            tableIndex2 = i / 3;\r\n        }\r\n    }\r\n\r\n    public void solveGame() {\r\n        solver.solve(this);\r\n    }\r\n\r\n    public boolean isSafe() {\r\n        return checkBoard();\r\n    }\r\n\r\n    public int get(int y, int x) {\r\n        return board[y][x].getFieldValue();\r\n    }\r\n\r\n    public void set(int y, int x, int value) {\r\n        try {\r\n            board[y][x].setFieldValue(value);\r\n        } catch (IllegalArgumentException e) {\r\n            state = false;\r\n        }\r\n    }\r\n\r\n    public SudokuRow getRow(int y) {\r\n        return rowObservers[y];\r\n    }\r\n\r\n    public SudokuColumn getColumn(int x) {\r\n        return columnObservers[x];\r\n    }\r\n\r\n    public SudokuBox getBox(int y, int x) {\r\n        int row = y / 3 * 3;\r\n        int col = x / 3 * 3;\r\n        return boxObservers[col + 3 * row];\r\n    }\r\n\r\n    private boolean checkBoard() {\r\n        if (state) {\r\n            return true;\r\n        }\r\n        state = true;\r\n        for (int i = 0; i &lt; 9; i++) {\r\n            state &amp;= columnObservers[i].verify() &amp; rowObservers[i].verify() &amp; boxObservers[i].verify();\r\n        }\r\n        return state;\r\n}\r\n    @Override\r\n    public String toString() {\r\n        StringBuilder stringBuilder = new StringBuilder();\r\n        for (int i = 0; i &lt; 9; i++) {\r\n            for (int j = 0; j &lt; 9; j++) {\r\n                stringBuilder.append(board[i][j].getFieldValue());\r\n                if (j &lt; 8) {\r\n                    stringBuilder.append(&quot;  &quot;);\r\n                }\r\n            }\r\n            stringBuilder.append(&quot;\\n&quot;);\r\n        }\r\n        return stringBuilder.toString();\r\n    }\r\n}\r\n```\r\n\r\nI tried to write the equals method this way (below) but unfortunately it does not work. I wanted to Override the following methods in all data model classes: `toString()`, `equals()` and `hashCode()` methods.\r\n\r\nUsing an external library to implement them efficiently. \r\n\r\nApache commons-lang3\r\n\r\nimplementation of the hashCode() and equals() methods were consistent with each other. When I set two boards with same values, equals method should return true.\r\n\r\n```\r\n    @Override\r\n    public boolean equals(Object obj) {\r\n        if (this == obj) return true;\r\n        if (obj == null || getClass() != obj.getClass()) return false;\r\n\r\n        SudokuBoard otherBoard = (SudokuBoard) obj;\r\n\r\n        return new EqualsBuilder()\r\n                .append(board, otherBoard.board)\r\n                .append(solver, otherBoard.solver)\r\n                .append(columnObservers, otherBoard.columnObservers)\r\n                .append(rowObservers, otherBoard.rowObservers)\r\n                .append(boxObservers, otherBoard.boxObservers)\r\n                .append(state, otherBoard.state)\r\n                .isEquals();\r\n    }\r\n    }\r\n```","title":"How to write equals method using Apache commons-lang3?","body":"<pre><code>package org.sudoku;\n\nimport org.apache.commons.lang3.builder.EqualsBuilder;\nimport org.apache.commons.lang3.builder.HashCodeBuilder;\n\nimport java.util.*;\n\npublic class SudokuBoard {\n    private final SudokuField[][] board = new SudokuField[9][9];\n    private final SudokuSolver solver;\n    private final SudokuColumn[] columnObservers = new SudokuColumn[9];\n    private final SudokuRow[] rowObservers = new SudokuRow[9];\n    private final SudokuBox[] boxObservers = new SudokuBox[9];\n    private boolean state = true;\n\n    public SudokuBoard(SudokuSolver solver) {\n        this.solver = Objects.requireNonNull(solver);\n        for (int i = 0; i &lt; 9; i++) {\n            for (int j = 0; j &lt; 9; j++) {\n                board[i][j] = new SudokuField();\n            }\n        }\n        for (int y = 0; y &lt; 9; y++) {\n            List&lt;SudokuField&gt; fields = Arrays.asList(new SudokuField[9]);\n            for (int i = 0; i &lt; 9; i++) {\n                fields.set(i, board[y][i]);\n            }\n            rowObservers[y] = new SudokuRow(fields);\n        }\n        for (int x = 0; x &lt; 9; x++) {\n            List&lt;SudokuField&gt; fields = Arrays.asList(new SudokuField[9]);\n            for (int i = 0; i &lt; 9; i++) {\n                fields.set(i, board[i][x]);\n            }\n            columnObservers[x] = new SudokuColumn(fields);\n        }\n        int tableIndex = 0;\n        for (int x = 0; x &lt; 9; x  += 3) {\n            for (int y = 0; y &lt; 9; y += 3) {\n                List&lt;SudokuField&gt; fields = Arrays.asList(new SudokuField[9]);\n                int fieldIndex = 0;\n                for (int i = x; i &lt; x + 3; i++) {\n                    for (int j = y; j &lt; y + 3; j++) {\n                        fields.set(fieldIndex, board[i][j]);\n                        fieldIndex++;\n                    }\n                }\n                boxObservers[tableIndex] = new SudokuBox(fields);\n                tableIndex++;\n            }\n        }\n        int tableIndex2 = 0;\n        for (int i = 0; i &lt; 9; i++) {\n            for (int j = 0; j &lt; 9; j++) {\n                board[i][j].setObservers(columnObservers[i], rowObservers[j], boxObservers[tableIndex2]);\n                if (j % 3 == 2) {\n                    tableIndex2++;\n                }\n            }\n            tableIndex2 = i / 3;\n        }\n    }\n\n    public void solveGame() {\n        solver.solve(this);\n    }\n\n    public boolean isSafe() {\n        return checkBoard();\n    }\n\n    public int get(int y, int x) {\n        return board[y][x].getFieldValue();\n    }\n\n    public void set(int y, int x, int value) {\n        try {\n            board[y][x].setFieldValue(value);\n        } catch (IllegalArgumentException e) {\n            state = false;\n        }\n    }\n\n    public SudokuRow getRow(int y) {\n        return rowObservers[y];\n    }\n\n    public SudokuColumn getColumn(int x) {\n        return columnObservers[x];\n    }\n\n    public SudokuBox getBox(int y, int x) {\n        int row = y / 3 * 3;\n        int col = x / 3 * 3;\n        return boxObservers[col + 3 * row];\n    }\n\n    private boolean checkBoard() {\n        if (state) {\n            return true;\n        }\n        state = true;\n        for (int i = 0; i &lt; 9; i++) {\n            state &amp;= columnObservers[i].verify() &amp; rowObservers[i].verify() &amp; boxObservers[i].verify();\n        }\n        return state;\n}\n    @Override\n    public String toString() {\n        StringBuilder stringBuilder = new StringBuilder();\n        for (int i = 0; i &lt; 9; i++) {\n            for (int j = 0; j &lt; 9; j++) {\n                stringBuilder.append(board[i][j].getFieldValue());\n                if (j &lt; 8) {\n                    stringBuilder.append(&quot;  &quot;);\n                }\n            }\n            stringBuilder.append(&quot;\\n&quot;);\n        }\n        return stringBuilder.toString();\n    }\n}\n</code></pre>\n<p>I tried to write the equals method this way (below) but unfortunately it does not work. I wanted to Override the following methods in all data model classes: <code>toString()</code>, <code>equals()</code> and <code>hashCode()</code> methods.</p>\n<p>Using an external library to implement them efficiently.</p>\n<p>Apache commons-lang3</p>\n<p>implementation of the hashCode() and equals() methods were consistent with each other. When I set two boards with same values, equals method should return true.</p>\n<pre><code>    @Override\n    public boolean equals(Object obj) {\n        if (this == obj) return true;\n        if (obj == null || getClass() != obj.getClass()) return false;\n\n        SudokuBoard otherBoard = (SudokuBoard) obj;\n\n        return new EqualsBuilder()\n                .append(board, otherBoard.board)\n                .append(solver, otherBoard.solver)\n                .append(columnObservers, otherBoard.columnObservers)\n                .append(rowObservers, otherBoard.rowObservers)\n                .append(boxObservers, otherBoard.boxObservers)\n                .append(state, otherBoard.state)\n                .isEquals();\n    }\n    }\n</code></pre>\n"},{"tags":["java","methods","instance"],"comments":[{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1700531577,"post_id":77519857,"comment_id":136663591,"body_markdown":"It doesn&#39;t make sense to access per-instance private variables from any static method. If your method needs access to per-instance data then it shouldn&#39;t be static.","body":"It doesn&#39;t make sense to access per-instance private variables from any static method. If your method needs access to per-instance data then it shouldn&#39;t be static."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1700531710,"post_id":77519857,"comment_id":136663603,"body_markdown":"it cannot be a static method. Think about it. the slope you want to get is between one point and another, but static method means the method of getSlope belongs to the class of Point, and the calculation is done by deducting other.yCord by the ability of the Point class to have a yCord. doesnt make much sense if you think about it logically. So the method must belong to the instance itself, comparing &quot;this&quot; to the other point, or if static, takes two points for comparison. sorry if the analogy isnt quite right, not too sure how to word it","body":"it cannot be a static method. Think about it. the slope you want to get is between one point and another, but static method means the method of getSlope belongs to the class of Point, and the calculation is done by deducting other.yCord by the ability of the Point class to have a yCord. doesnt make much sense if you think about it logically. So the method must belong to the instance itself, comparing &quot;this&quot; to the other point, or if static, takes two points for comparison. sorry if the analogy isnt quite right, not too sure how to word it"},{"owner":{"account_id":29953035,"reputation":9,"user_id":22954602,"display_name":"Ray Coia"},"score":0,"creation_date":1700531718,"post_id":77519857,"comment_id":136663604,"body_markdown":"I just tried removing static from getSlope it put the whole method in red.","body":"I just tried removing static from getSlope it put the whole method in red."},{"owner":{"account_id":21103632,"reputation":2356,"user_id":15513073,"display_name":"leaf_yakitori"},"score":0,"creation_date":1700531812,"post_id":77519857,"comment_id":136663609,"body_markdown":"just change `Point.yCord` to `this.yCord`, and remove `static` in `getSlope`. Point is a class, I think what you want to do is using instance&#39;s `yCord`.","body":"just change <code>Point.yCord</code> to <code>this.yCord</code>, and remove <code>static</code> in <code>getSlope</code>. Point is a class, I think what you want to do is using instance&#39;s <code>yCord</code>."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1700531909,"post_id":77519857,"comment_id":136663620,"body_markdown":"Your problem likely stems from a misunderstanding what static means, the details. You would probably benefit by reviewing a tutorial or two on this.","body":"Your problem likely stems from a misunderstanding what static means, the details. You would probably benefit by reviewing a tutorial or two on this."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1700535030,"post_id":77519857,"comment_id":136663842,"body_markdown":"How do I know the location of an object that does not exist?","body":"How do I know the location of an object that does not exist?"}],"answers":[{"tags":[],"owner":{"account_id":21103632,"reputation":2356,"user_id":15513073,"display_name":"leaf_yakitori"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1700533394,"creation_date":1700532266,"answer_id":77519902,"question_id":77519857,"body_markdown":"1. Change `Point.yCord` to `this.yCord`. Point is a class, I think what you actually want to do is using instance of Point `yCord` to calculate with a new point `yCord`.\r\n2. You need add `setter` method to set point member value, not just `getter`.\r\n3. You need remove `static` in `getSlope`, Static methods are the methods that can be called without creating an object of class.  Apparently you are creating an object of Point.\r\n4. A little fix to `getSlope` output format.\r\n### example code\r\n- Point\r\n```\r\npublic class Point {\r\n    private double xCord;\r\n    private double yCord;\r\n    public String getSlope(Point other) {\r\n        double slope = ((this.yCord - other.yCord) / (this.xCord - other.xCord));\r\n        return &quot;The slope of the line from &quot; + &quot;(&quot; + this.xCord + &quot;, &quot; + this.yCord + &quot;)&quot; + &quot; to &quot;  + &quot;(&quot; + other.xCord + &quot;, &quot; + other.yCord + &quot;)&quot; +  &quot; is &quot; + slope;\r\n    }\r\n    public double getXCord() {return this.xCord;}\r\n    public void setXCord(double cord) {this.xCord=cord;}\r\n    public double getYCord() {return this.yCord;}\r\n    public void setYCord(double cord) {this.yCord=cord;}\r\n}\r\n```\r\n- main\r\n```\r\n    public static void main(String[] args)\r\n    {\r\n        Point point = new Point();\r\n        point.setXCord(0);\r\n        point.setXCord(0);\r\n        Point newPoint = new Point();\r\n        newPoint.setXCord(1.00);\r\n        newPoint.setYCord(1.00);\r\n        System.out.println(point.getSlope(newPoint));\r\n    }\r\n```\r\n- result:\r\n```\r\nThe slope of the line from (0.0, 0.0) to (1.0, 1.0) is 1.0\r\n```\r\n ","title":"How do I access my private variables from my static method","body":"<ol>\n<li>Change <code>Point.yCord</code> to <code>this.yCord</code>. Point is a class, I think what you actually want to do is using instance of Point <code>yCord</code> to calculate with a new point <code>yCord</code>.</li>\n<li>You need add <code>setter</code> method to set point member value, not just <code>getter</code>.</li>\n<li>You need remove <code>static</code> in <code>getSlope</code>, Static methods are the methods that can be called without creating an object of class.  Apparently you are creating an object of Point.</li>\n<li>A little fix to <code>getSlope</code> output format.</li>\n</ol>\n<h3>example code</h3>\n<ul>\n<li>Point</li>\n</ul>\n<pre><code>public class Point {\n    private double xCord;\n    private double yCord;\n    public String getSlope(Point other) {\n        double slope = ((this.yCord - other.yCord) / (this.xCord - other.xCord));\n        return &quot;The slope of the line from &quot; + &quot;(&quot; + this.xCord + &quot;, &quot; + this.yCord + &quot;)&quot; + &quot; to &quot;  + &quot;(&quot; + other.xCord + &quot;, &quot; + other.yCord + &quot;)&quot; +  &quot; is &quot; + slope;\n    }\n    public double getXCord() {return this.xCord;}\n    public void setXCord(double cord) {this.xCord=cord;}\n    public double getYCord() {return this.yCord;}\n    public void setYCord(double cord) {this.yCord=cord;}\n}\n</code></pre>\n<ul>\n<li>main</li>\n</ul>\n<pre><code>    public static void main(String[] args)\n    {\n        Point point = new Point();\n        point.setXCord(0);\n        point.setXCord(0);\n        Point newPoint = new Point();\n        newPoint.setXCord(1.00);\n        newPoint.setYCord(1.00);\n        System.out.println(point.getSlope(newPoint));\n    }\n</code></pre>\n<ul>\n<li>result:</li>\n</ul>\n<pre><code>The slope of the line from (0.0, 0.0) to (1.0, 1.0) is 1.0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29896649,"reputation":176,"user_id":22911363,"display_name":"Hugh Granger"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700532700,"creation_date":1700532700,"answer_id":77519922,"question_id":77519857,"body_markdown":"A static method cannot access non-static members/fields. Instead, write your function with a parameter for both `Point`s:\r\n\r\n    public static String getSlope1(Point a, Point b) {\r\n        double slope = ((a.yCord - b.yCord) / (a.xCord - b.xCord));\r\n        return &quot;The slope of the line from &quot; + &quot;(&quot; + a.xCord + &quot;, &quot; + a.yCord + &quot;)&quot; + &quot; to &quot; + &quot;(&quot; + b.xCord + &quot;, &quot; + b.yCord + &quot;)&quot; +  &quot;is &quot; + slope;\r\n    }\r\n\r\nAlternatively, you could remove the `static` keyword and access members/fields with `this.xCord` or simply `xCord`:\r\n\r\n    public String getSlope2(Point other) {\r\n        double slope = ((yCord - other.yCord) / (xCord - other.xCord));\r\n        return &quot;The slope of the line from &quot; + &quot;(&quot; + xCord + &quot;, &quot; + yCord + &quot;)&quot; + &quot; to &quot; + &quot;(&quot; + other.xCord + &quot;, &quot; + other.yCord + &quot;)&quot; +  &quot;is &quot; + slope;\r\n    }\r\n\r\nThese must be called differently:\r\n\r\n    // #1\r\n    String x = getSlope1(p1, p2);\r\n    // #2\r\n    String y = p1.getSlope2(p2);\r\n\r\n","title":"How do I access my private variables from my static method","body":"<p>A static method cannot access non-static members/fields. Instead, write your function with a parameter for both <code>Point</code>s:</p>\n<pre><code>public static String getSlope1(Point a, Point b) {\n    double slope = ((a.yCord - b.yCord) / (a.xCord - b.xCord));\n    return &quot;The slope of the line from &quot; + &quot;(&quot; + a.xCord + &quot;, &quot; + a.yCord + &quot;)&quot; + &quot; to &quot; + &quot;(&quot; + b.xCord + &quot;, &quot; + b.yCord + &quot;)&quot; +  &quot;is &quot; + slope;\n}\n</code></pre>\n<p>Alternatively, you could remove the <code>static</code> keyword and access members/fields with <code>this.xCord</code> or simply <code>xCord</code>:</p>\n<pre><code>public String getSlope2(Point other) {\n    double slope = ((yCord - other.yCord) / (xCord - other.xCord));\n    return &quot;The slope of the line from &quot; + &quot;(&quot; + xCord + &quot;, &quot; + yCord + &quot;)&quot; + &quot; to &quot; + &quot;(&quot; + other.xCord + &quot;, &quot; + other.yCord + &quot;)&quot; +  &quot;is &quot; + slope;\n}\n</code></pre>\n<p>These must be called differently:</p>\n<pre><code>// #1\nString x = getSlope1(p1, p2);\n// #2\nString y = p1.getSlope2(p2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700535882,"creation_date":1700534347,"answer_id":77519999,"question_id":77519857,"body_markdown":"&gt; _&quot;... I have two private instance variables xCord and yCord. I have a public static method called getSlope that takes in two arguments of class Point. When I try to use .yCord or .xCord on them it says non-static variable cannot be referenced from a static context. ...&quot;_\r\n\r\nHere is the _Java_ tutorial on the usage of the _static_ keyword, within a _[class](https://docs.oracle.com/javase/tutorial/java/javaOO/index.html)_.\\\r\n_[Understanding Class Members (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Classes and Objects)](https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)_.\r\n\r\nEssentially, when a _[field](https://docs.oracle.com/javase/tutorial/java/javaOO/variables.html)_, or _[method](https://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)_, is defined as _static_, you will not need an _[instance](https://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html)_ to access them.\\\r\nSimilar to the _[Math](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Math.html)_ class, which is composed of all _static_ _members_.\r\n\r\nSo, here is an example of an _instance_ _field_, and an _instance_ _method_.\r\n\r\n```java\r\nclass ABC {\r\n    String s;\r\n\r\n    void f() {\r\n\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n    ABC abc = new ABC();\r\n    String s = abc.s;\r\n    abc.f();\r\n}\r\n```\r\n\r\nAnd, here is an example of a _static_ _field_, and a _static_ _method_.\r\n\r\n```java\r\nclass ABC {\r\n    static String s;\r\n\r\n    static void f() {\r\n\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n    String s = ABC.s;\r\n    ABC.f();\r\n}\r\n```\r\n\r\n&gt; _&quot;... I tried to use a public accessor method to get the x and y coordinates, however I got the same error message when I tried that. ...&quot;_\r\n\r\nThe _[access modifiers](https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)_ are used to define the access, when out-side of the class.\r\n\r\nFor example, if you declare the _f_ _method_ as _private_, you would not be able to access it, from the _main_ _method_.\r\n\r\nYou would receive the following _compilation error_.\r\n\r\n```none\r\njava: f() has private access in ABC\r\n```\r\n\r\nAlthough, the reason you&#39;re receiving the specific error you&#39;ve mentioned, is because the _xCord_ and _yCord_ are _instance fields_, and not _static fields_.\r\n\r\n&gt; _&quot;... my goal was to calculate the slope then print it out with a sentence format that included the individual coordinates that were involved in the calculation. ...&quot;_\r\n\r\nSince you&#39;re _method_ is static, you&#39;ll need two parameters; one for each _Point_.\r\n\r\nThis is similar to the _[Integer#compare](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#compare(int,int))_ _method_, and not like the _[String#compareTo](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html#compareTo(java.lang.String))_ _method_.\r\n\r\nHere is an example of both.\r\n\r\n```java\r\nstatic String getSlope(Point a, Point b) {\r\n    double slope = ((a.yCord - b.yCord) / (a.xCord - b.xCord));\r\n    return &quot;The slope of the line from &quot; + &quot;(&quot; + a.xCord + &quot;, &quot; + a.yCord + &quot;)&quot; + &quot; to &quot; + &quot;(&quot; + b.xCord + &quot;, &quot; + &quot;(&quot; + b.xCord + &quot;, &quot; + b.yCord + &quot;)&quot; +  &quot;is &quot; + slope;\r\n}\r\n```\r\n\r\n```java\r\nString getSlope(Point p) {\r\n    double slope = ((yCord - p.yCord) / (xCord - p.xCord));\r\n    return &quot;The slope of the line from &quot; + &quot;(&quot; + xCord + &quot;, &quot; + yCord + &quot;)&quot; + &quot; to &quot; + &quot;(&quot; + p.xCord + &quot;, &quot; + &quot;(&quot; + p.xCord + &quot;, &quot; + p.yCord + &quot;)&quot; +  &quot;is &quot; + slope;\r\n}\r\n```\r\n\r\nAnd, it&#39;s worth noting, I believe your arithmetic is backwards.\\\r\nA slope is typically calculated as _m = (y&lt;sub&gt;2&lt;/sub&gt; &amp;minus; y&lt;sub&gt;1&lt;/sub&gt;) / (x&lt;sub&gt;2&lt;/sub&gt; &amp;minus; x&lt;sub&gt;1&lt;/sub&gt;)_.\\\r\n_[Wikipedia &amp;ndash; Slope](https://en.wikipedia.org/wiki/Slope)_.\r\n\r\nHere is a re-factor.\r\n\r\n```java\r\nclass Point {\r\n    double x, y;\r\n\r\n    Point(double x, double y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    static String slope(Point a, Point b) {\r\n        double m = (b.y - a.y) / (b.x - a.x);\r\n        return &quot;m = (%s - %s) / (%s - %s) = %s&quot;.formatted(b.y, a.y, b.x, a.x, m);\r\n    }\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nm = (8.0 - 2.0) / (13.0 - 1.0) = 0.5\r\n```\r\n\r\nAlternately, use a _[record class](https://docs.oracle.com/en/java/javase/21/language/records.html)_.\r\n\r\n```java\r\nrecord Point(double x, double y) {\r\n    static String slope(Point a, Point b) {\r\n        double m = (b.y - a.y) / (b.x - a.x);\r\n        return &quot;m = (%s - %s) / (%s - %s) = %s&quot;.formatted(b.y, a.y, b.x, a.x, m);\r\n    }\r\n}\r\n```","title":"How do I access my private variables from my static method","body":"<blockquote>\n<p><em>&quot;... I have two private instance variables xCord and yCord. I have a public static method called getSlope that takes in two arguments of class Point. When I try to use .yCord or .xCord on them it says non-static variable cannot be referenced from a static context. ...&quot;</em></p>\n</blockquote>\n<p>Here is the <em>Java</em> tutorial on the usage of the <em>static</em> keyword, within a <em><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/index.html\" rel=\"nofollow noreferrer\">class</a></em>.<br />\n<em><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html\" rel=\"nofollow noreferrer\">Understanding Class Members (The Java Tutorials &gt; Learning the Java Language &gt; Classes and Objects)</a></em>.</p>\n<p>Essentially, when a <em><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/variables.html\" rel=\"nofollow noreferrer\">field</a></em>, or <em><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methods.html\" rel=\"nofollow noreferrer\">method</a></em>, is defined as <em>static</em>, you will not need an <em><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html\" rel=\"nofollow noreferrer\">instance</a></em> to access them.<br />\nSimilar to the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Math.html\" rel=\"nofollow noreferrer\">Math</a></em> class, which is composed of all <em>static</em> <em>members</em>.</p>\n<p>So, here is an example of an <em>instance</em> <em>field</em>, and an <em>instance</em> <em>method</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class ABC {\n    String s;\n\n    void f() {\n\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    ABC abc = new ABC();\n    String s = abc.s;\n    abc.f();\n}\n</code></pre>\n<p>And, here is an example of a <em>static</em> <em>field</em>, and a <em>static</em> <em>method</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class ABC {\n    static String s;\n\n    static void f() {\n\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    String s = ABC.s;\n    ABC.f();\n}\n</code></pre>\n<blockquote>\n<p><em>&quot;... I tried to use a public accessor method to get the x and y coordinates, however I got the same error message when I tried that. ...&quot;</em></p>\n</blockquote>\n<p>The <em><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\" rel=\"nofollow noreferrer\">access modifiers</a></em> are used to define the access, when out-side of the class.</p>\n<p>For example, if you declare the <em>f</em> <em>method</em> as <em>private</em>, you would not be able to access it, from the <em>main</em> <em>method</em>.</p>\n<p>You would receive the following <em>compilation error</em>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>java: f() has private access in ABC\n</code></pre>\n<p>Although, the reason you're receiving the specific error you've mentioned, is because the <em>xCord</em> and <em>yCord</em> are <em>instance fields</em>, and not <em>static fields</em>.</p>\n<blockquote>\n<p><em>&quot;... my goal was to calculate the slope then print it out with a sentence format that included the individual coordinates that were involved in the calculation. ...&quot;</em></p>\n</blockquote>\n<p>Since you're <em>method</em> is static, you'll need two parameters; one for each <em>Point</em>.</p>\n<p>This is similar to the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#compare(int,int)\" rel=\"nofollow noreferrer\">Integer#compare</a></em> <em>method</em>, and not like the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html#compareTo(java.lang.String)\" rel=\"nofollow noreferrer\">String#compareTo</a></em> <em>method</em>.</p>\n<p>Here is an example of both.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static String getSlope(Point a, Point b) {\n    double slope = ((a.yCord - b.yCord) / (a.xCord - b.xCord));\n    return &quot;The slope of the line from &quot; + &quot;(&quot; + a.xCord + &quot;, &quot; + a.yCord + &quot;)&quot; + &quot; to &quot; + &quot;(&quot; + b.xCord + &quot;, &quot; + &quot;(&quot; + b.xCord + &quot;, &quot; + b.yCord + &quot;)&quot; +  &quot;is &quot; + slope;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>String getSlope(Point p) {\n    double slope = ((yCord - p.yCord) / (xCord - p.xCord));\n    return &quot;The slope of the line from &quot; + &quot;(&quot; + xCord + &quot;, &quot; + yCord + &quot;)&quot; + &quot; to &quot; + &quot;(&quot; + p.xCord + &quot;, &quot; + &quot;(&quot; + p.xCord + &quot;, &quot; + p.yCord + &quot;)&quot; +  &quot;is &quot; + slope;\n}\n</code></pre>\n<p>And, it's worth noting, I believe your arithmetic is backwards.<br />\nA slope is typically calculated as <em>m = (y<sub>2</sub>  y<sub>1</sub>) / (x<sub>2</sub>  x<sub>1</sub>)</em>.<br />\n<em><a href=\"https://en.wikipedia.org/wiki/Slope\" rel=\"nofollow noreferrer\">Wikipedia  Slope</a></em>.</p>\n<p>Here is a re-factor.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Point {\n    double x, y;\n\n    Point(double x, double y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    static String slope(Point a, Point b) {\n        double m = (b.y - a.y) / (b.x - a.x);\n        return &quot;m = (%s - %s) / (%s - %s) = %s&quot;.formatted(b.y, a.y, b.x, a.x, m);\n    }\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>m = (8.0 - 2.0) / (13.0 - 1.0) = 0.5\n</code></pre>\n<p>Alternately, use a <em><a href=\"https://docs.oracle.com/en/java/javase/21/language/records.html\" rel=\"nofollow noreferrer\">record class</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>record Point(double x, double y) {\n    static String slope(Point a, Point b) {\n        double m = (b.y - a.y) / (b.x - a.x);\n        return &quot;m = (%s - %s) / (%s - %s) = %s&quot;.formatted(b.y, a.y, b.x, a.x, m);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29953035,"reputation":9,"user_id":22954602,"display_name":"Ray Coia"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":3,"score":-2,"last_activity_date":1700535882,"creation_date":1700531324,"question_id":77519857,"body_markdown":"I have two private instance variables xCord and yCord. I have a public static method called getSlope that takes in two arguments of class Point. When I try to use .yCord or .xCord on them it says non-static variable cannot be referenced from a static context.\r\n\r\nI tried to use a public accessor method to get the x and y coordinates, however I got the same error message when I tried that. In the code snippets below my goal was to calculate the slope then print it out with a sentence format that included the individual coordinates that were involved in the calculation. I am new to coding so my ability to test is limited by what I know. The accessor methods are at the bottom. I also looked at the suggested questions that were answered already but none of it helped.\r\n\r\n\r\n```\r\nprivate double xCord;\r\nprivate  double yCord;\r\n\r\npublic static String getSlope(Point other) {\r\n        double slope = ((Point.yCord - other.yCord) / (Point.xCord - other.xCord));\r\n        return &quot;The slope of the line from &quot; + &quot;(&quot; + Point.xCord + &quot;, &quot; + Point.yCord + &quot;)&quot; + &quot; to &quot; + &quot;(&quot; + other.xCord + &quot;, &quot; + &quot;(&quot; + other.xCord + &quot;, &quot; + other.yCord + &quot;)&quot; +  &quot;is &quot; + slope;\r\n}\r\n\r\npublic double getXCord() {return this.xCord;}\r\npublic double getYCord() {return this.yCord;}\r\n```","title":"How do I access my private variables from my static method","body":"<p>I have two private instance variables xCord and yCord. I have a public static method called getSlope that takes in two arguments of class Point. When I try to use .yCord or .xCord on them it says non-static variable cannot be referenced from a static context.</p>\n<p>I tried to use a public accessor method to get the x and y coordinates, however I got the same error message when I tried that. In the code snippets below my goal was to calculate the slope then print it out with a sentence format that included the individual coordinates that were involved in the calculation. I am new to coding so my ability to test is limited by what I know. The accessor methods are at the bottom. I also looked at the suggested questions that were answered already but none of it helped.</p>\n<pre><code>private double xCord;\nprivate  double yCord;\n\npublic static String getSlope(Point other) {\n        double slope = ((Point.yCord - other.yCord) / (Point.xCord - other.xCord));\n        return &quot;The slope of the line from &quot; + &quot;(&quot; + Point.xCord + &quot;, &quot; + Point.yCord + &quot;)&quot; + &quot; to &quot; + &quot;(&quot; + other.xCord + &quot;, &quot; + &quot;(&quot; + other.xCord + &quot;, &quot; + other.yCord + &quot;)&quot; +  &quot;is &quot; + slope;\n}\n\npublic double getXCord() {return this.xCord;}\npublic double getYCord() {return this.yCord;}\n</code></pre>\n"},{"tags":["java","postgresql","hibernate","jpa","entity"],"comments":[{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":0,"creation_date":1503233611,"post_id":45782327,"comment_id":78522020,"body_markdown":"what is the name of your shcema you are using?","body":"what is the name of your shcema you are using?"},{"owner":{"account_id":7032646,"reputation":5107,"user_id":5387794,"accept_rate":68,"display_name":"kovac"},"score":0,"creation_date":1503233650,"post_id":45782327,"comment_id":78522027,"body_markdown":"schema name is `myapp`.","body":"schema name is <code>myapp</code>."}],"answers":[{"comments":[{"owner":{"account_id":7032646,"reputation":5107,"user_id":5387794,"accept_rate":68,"display_name":"kovac"},"score":2,"creation_date":1503239335,"post_id":45782399,"comment_id":78523693,"body_markdown":"Thanks for updating the answer. I can&#39;t put the actual schema as it contains some business information. But your advice fixed the issue :)","body":"Thanks for updating the answer. I can&#39;t put the actual schema as it contains some business information. But your advice fixed the issue :)"},{"owner":{"account_id":7032646,"reputation":5107,"user_id":5387794,"accept_rate":68,"display_name":"kovac"},"score":1,"creation_date":1503239581,"post_id":45782399,"comment_id":78523764,"body_markdown":"No, I followed your original answer and now there is no issue. Everything is working as expected. We can close the thread. Thanks very much for your help!","body":"No, I followed your original answer and now there is no issue. Everything is working as expected. We can close the thread. Thanks very much for your help!"},{"owner":{"account_id":10253326,"reputation":1143,"user_id":7566812,"display_name":"Sajeer Babu"},"score":1,"creation_date":1614105025,"post_id":45782399,"comment_id":117281709,"body_markdown":"Thanks bro, using capital letters in column name was my issue","body":"Thanks bro, using capital letters in column name was my issue"},{"owner":{"account_id":3850196,"reputation":3198,"user_id":3190576,"accept_rate":95,"display_name":"gdrt"},"score":1,"creation_date":1619259989,"post_id":45782399,"comment_id":118854419,"body_markdown":"I&#39;m falling for this sneaky USER keyword every time&#129318;","body":"I&#39;m falling for this sneaky USER keyword every time"},{"owner":{"account_id":17156375,"reputation":192,"user_id":12417164,"display_name":"Om Gupta"},"score":0,"creation_date":1691420902,"post_id":45782399,"comment_id":135485813,"body_markdown":"What seriously? I didn&#39;t know user was a reserved keyword. Like everyone names their tables &quot;users&quot;?","body":"What seriously? I didn&#39;t know user was a reserved keyword. Like everyone names their tables &quot;users&quot;?"},{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":1,"creation_date":1691422748,"post_id":45782399,"comment_id":135486247,"body_markdown":"@OmGupta take a look here https://www.postgresql.org/docs/8.1/sql-keywords-appendix.html","body":"@OmGupta take a look here <a href=\"https://www.postgresql.org/docs/8.1/sql-keywords-appendix.html\" rel=\"nofollow noreferrer\">postgresql.org/docs/8.1/sql-keywords-appendix.html</a>"}],"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"comment_count":6,"down_vote_count":1,"up_vote_count":68,"is_accepted":true,"score":67,"last_activity_date":1657549746,"creation_date":1503233756,"answer_id":45782399,"question_id":45782327,"body_markdown":"## Solution\r\n\r\nIn **PostgreSQL** you have to specify the name of schema like so :\r\n\r\n    @Table(name=&quot;table_name&quot;, schema = &quot;myapp&quot;)\r\n                              ^^^^^^^^^^^^^^^^\r\n\r\n## Long Story\r\n\r\nyou got this error :\r\n\r\n    org.postgresql.util.PSQLException: ERROR: column user0_.id does not exist\r\n\r\nbecause when you create a database in **PostgreSQL**, it create a default schema named **public**, so when you don&#39;t specify the name in the `Entity` then Hibernate will check automatically in the **public** schema.\r\n\r\n---\r\n\r\n## Good practices\r\n\r\n  1. Don&#39;t use Upper letters in the name of `database`, `schema`, `tables` or `columns` in **PostgreSQL**. Else you should to escape this names with quotes, and this can cause Syntax errors, so instead you can use :\r\n\r\n&lt;b&gt;&lt;/b&gt;\r\n\r\n    @Table(name=&quot;table_name&quot;, schema = &quot;schema_name&quot;)\r\n                 ^^^^^^^^^^             ^^^^^^^^^^^\r\n\r\n  2. the keyword **USER** is reserved keyword in **PostgreSQL** [**take a look at**][1]\r\n\r\n&lt;b&gt;&lt;/b&gt;\r\n\r\n    +----------+-----------+----------+-----------+---------+\r\n    | Key Word |PostgreSQL |SQL:2003  |\tSQL:1999  |\tSQL-92  |\r\n    +----------+-----------+----------+-----------+---------+\r\n    |  ....        ....       ....       ....       ....    |\r\n    +----------+-----------+----------+-----------+---------+\r\n    | USER\t   |  reserved |reserved  |\treserved  | reserved|\r\n    +----------+-----------+----------+-----------+---------+\r\n\r\n   \r\n\r\n  3. to difference between **Dto** and **Entity** its good practice to use Entity in the end of the name of your Entity for example `UserEntity`\r\n\r\n  [1]: https://www.postgresql.org/docs/8.1/static/sql-keywords-appendix.html\r\n\r\n","title":"org.postgresql.util.PSQLException: ERROR: column user0_.id does not exist - Hibernate","body":"<h2>Solution</h2>\n<p>In <strong>PostgreSQL</strong> you have to specify the name of schema like so :</p>\n<pre><code>@Table(name=&quot;table_name&quot;, schema = &quot;myapp&quot;)\n                          ^^^^^^^^^^^^^^^^\n</code></pre>\n<h2>Long Story</h2>\n<p>you got this error :</p>\n<pre><code>org.postgresql.util.PSQLException: ERROR: column user0_.id does not exist\n</code></pre>\n<p>because when you create a database in <strong>PostgreSQL</strong>, it create a default schema named <strong>public</strong>, so when you don't specify the name in the <code>Entity</code> then Hibernate will check automatically in the <strong>public</strong> schema.</p>\n<hr />\n<h2>Good practices</h2>\n<ol>\n<li>Don't use Upper letters in the name of <code>database</code>, <code>schema</code>, <code>tables</code> or <code>columns</code> in <strong>PostgreSQL</strong>. Else you should to escape this names with quotes, and this can cause Syntax errors, so instead you can use :</li>\n</ol>\n<p><b></b></p>\n<pre><code>@Table(name=&quot;table_name&quot;, schema = &quot;schema_name&quot;)\n             ^^^^^^^^^^             ^^^^^^^^^^^\n</code></pre>\n<ol start=\"2\">\n<li>the keyword <strong>USER</strong> is reserved keyword in <strong>PostgreSQL</strong> <a href=\"https://www.postgresql.org/docs/8.1/static/sql-keywords-appendix.html\" rel=\"noreferrer\"><strong>take a look at</strong></a></li>\n</ol>\n<p><b></b></p>\n<pre><code>+----------+-----------+----------+-----------+---------+\n| Key Word |PostgreSQL |SQL:2003  | SQL:1999  | SQL-92  |\n+----------+-----------+----------+-----------+---------+\n|  ....        ....       ....       ....       ....    |\n+----------+-----------+----------+-----------+---------+\n| USER     |  reserved |reserved  | reserved  | reserved|\n+----------+-----------+----------+-----------+---------+\n</code></pre>\n<ol start=\"3\">\n<li>to difference between <strong>Dto</strong> and <strong>Entity</strong> its good practice to use Entity in the end of the name of your Entity for example <code>UserEntity</code></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":14472970,"reputation":1136,"user_id":10454340,"display_name":"Vikash Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1564998434,"creation_date":1564998434,"answer_id":57356039,"question_id":45782327,"body_markdown":"For people getting this exception ,In postgres Whenever you write an Entity Class try to associate it with the correct schema (where your table is present), like this:\r\n\r\n    @Entity\r\n    @Table(name = &quot;user&quot;, schema = &quot;users_details&quot;)\r\n    public class User implements Serializable{\r\n    \r\n        @Column(name = &quot;id&quot;)\r\n        Long id;    //long is not recommended\r\n\r\n       // Other data\r\n    }\r\n\r\nAs @YCF_L has said **Don&#39;t use Upper_case letters** in a table name or column name otherwise you will get this exception.\r\n\r\nThis convention becomes more important when their is a scenario where you have to **auto generate** the tables from entity classes or vice-versa.","title":"org.postgresql.util.PSQLException: ERROR: column user0_.id does not exist - Hibernate","body":"<p>For people getting this exception ,In postgres Whenever you write an Entity Class try to associate it with the correct schema (where your table is present), like this:</p>\n\n<pre><code>@Entity\n@Table(name = \"user\", schema = \"users_details\")\npublic class User implements Serializable{\n\n    @Column(name = \"id\")\n    Long id;    //long is not recommended\n\n   // Other data\n}\n</code></pre>\n\n<p>As @YCF_L has said <strong>Don't use Upper_case letters</strong> in a table name or column name otherwise you will get this exception.</p>\n\n<p>This convention becomes more important when their is a scenario where you have to <strong>auto generate</strong> the tables from entity classes or vice-versa.</p>\n"},{"tags":[],"owner":{"account_id":14456773,"reputation":440,"user_id":10442757,"display_name":"Raj Shukla"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1577360355,"creation_date":1577360355,"answer_id":59487926,"question_id":45782327,"body_markdown":"Use: @GeneratedValue(strategy = GenerationType.IDENTITY) \r\n\r\nIn your POJO class Id Field. This thing solved my error.","title":"org.postgresql.util.PSQLException: ERROR: column user0_.id does not exist - Hibernate","body":"<p>Use: @GeneratedValue(strategy = GenerationType.IDENTITY) </p>\n\n<p>In your POJO class Id Field. This thing solved my error.</p>\n"},{"comments":[{"owner":{"account_id":17156375,"reputation":192,"user_id":12417164,"display_name":"Om Gupta"},"score":0,"creation_date":1691421069,"post_id":61420062,"comment_id":135485842,"body_markdown":"I did this, but still facing the issue: `[select u1_0.id from public.user u1_0 where u1_0.email=? fetch first ? rows only] [ERROR: relation &quot;public.user&quot; does not exist`","body":"I did this, but still facing the issue: <code>[select u1_0.id from public.user u1_0 where u1_0.email=? fetch first ? rows only] [ERROR: relation &quot;public.user&quot; does not exist</code>"}],"tags":[],"owner":{"account_id":3759199,"reputation":111,"user_id":3124725,"display_name":"Cebu CM Solutions"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1587779937,"creation_date":1587779937,"answer_id":61420062,"question_id":45782327,"body_markdown":"Should add schema name on the Entity class.\r\nFor this example, when the schema name is public\r\n\r\n    @Table(name = &quot;user&quot;, schema = &quot;public&quot;)\r\n\r\nSee the PostgreSQL Admin view below\r\n\r\n[![enter image description here][1]][1]\r\n\r\nSee here for more about SpringBoot Java and Postgre SQL connectivity:\r\nhttps://cmsoftwaretech.wordpress.com/2020/04/25/springboot-thymleaf-using-postgresql/\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/f8R2e.jpg","title":"org.postgresql.util.PSQLException: ERROR: column user0_.id does not exist - Hibernate","body":"<p>Should add schema name on the Entity class.\nFor this example, when the schema name is public</p>\n\n<pre><code>@Table(name = \"user\", schema = \"public\")\n</code></pre>\n\n<p>See the PostgreSQL Admin view below</p>\n\n<p><a href=\"https://i.stack.imgur.com/f8R2e.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/f8R2e.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>See here for more about SpringBoot Java and Postgre SQL connectivity:\n<a href=\"https://cmsoftwaretech.wordpress.com/2020/04/25/springboot-thymleaf-using-postgresql/\" rel=\"noreferrer\">https://cmsoftwaretech.wordpress.com/2020/04/25/springboot-thymleaf-using-postgresql/</a></p>\n"},{"tags":[],"owner":{"account_id":4385291,"reputation":366,"user_id":3575661,"accept_rate":75,"display_name":"Daniel Gsch&#246;sser"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1590517756,"creation_date":1590495097,"answer_id":62021881,"question_id":45782327,"body_markdown":"I obtained using general names like `user` are making troubles in the app.\r\n\r\nI got the same issue as reported here with the following simple entity.\r\n\r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.SequenceGenerator;\r\n    \r\n    @Entity\r\n    public class User implements Serializable {\r\n    \r\n        private static final long serialVersionUID = 6843302791607583447L;\r\n    \r\n        @Id\r\n        @SequenceGenerator(name = &quot;user_id_seq&quot;, sequenceName = &quot;user_id_seq&quot;, allocationSize = 1)\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;user_id_seq&quot;)\r\n        private Long id;\r\n    \r\n        @Column\r\n        private String name;\r\n    \r\n        @Column\r\n        private String password;\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return name;\r\n        }\r\n    \r\n        public Long getId() {\r\n            return id;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(final String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public String getPassword() {\r\n            return password;\r\n        }\r\n    \r\n        public void setPassword(final String password) {\r\n            this.password = password;\r\n        }\r\n    \r\n    }\r\n\r\nAll i did was renaming the entity from `User` to `Sessionxuser` (and renaming the datatable from `user` to `sessionxuser` to fix this issue.\r\n\r\nSchema was still `public`.\r\n\r\nSince pre- or postfix some names like `mycoolappuser` or `usermycoolapp` to avoid troubles like this.\r\n\r\nFind below a list with reserved keywords and literals preventing using as table, column, and further customized names.\r\n\r\n[https://www.postgresql.org/docs/8.1/sql-keywords-appendix.html][1]\r\n\r\nIn this case `user` is preserved for `PostgreSQL`, `SQL:2003`, `SQL:1999` and `SQL-92`.\r\n\r\n\r\n  [1]: https://www.postgresql.org/docs/8.1/sql-keywords-appendix.html","title":"org.postgresql.util.PSQLException: ERROR: column user0_.id does not exist - Hibernate","body":"<p>I obtained using general names like <code>user</code> are making troubles in the app.</p>\n\n<p>I got the same issue as reported here with the following simple entity.</p>\n\n<pre><code>import javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.SequenceGenerator;\n\n@Entity\npublic class User implements Serializable {\n\n    private static final long serialVersionUID = 6843302791607583447L;\n\n    @Id\n    @SequenceGenerator(name = \"user_id_seq\", sequenceName = \"user_id_seq\", allocationSize = 1)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"user_id_seq\")\n    private Long id;\n\n    @Column\n    private String name;\n\n    @Column\n    private String password;\n\n    @Override\n    public String toString() {\n        return name;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(final String name) {\n        this.name = name;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(final String password) {\n        this.password = password;\n    }\n\n}\n</code></pre>\n\n<p>All i did was renaming the entity from <code>User</code> to <code>Sessionxuser</code> (and renaming the datatable from <code>user</code> to <code>sessionxuser</code> to fix this issue.</p>\n\n<p>Schema was still <code>public</code>.</p>\n\n<p>Since pre- or postfix some names like <code>mycoolappuser</code> or <code>usermycoolapp</code> to avoid troubles like this.</p>\n\n<p>Find below a list with reserved keywords and literals preventing using as table, column, and further customized names.</p>\n\n<p><a href=\"https://www.postgresql.org/docs/8.1/sql-keywords-appendix.html\" rel=\"nofollow noreferrer\">https://www.postgresql.org/docs/8.1/sql-keywords-appendix.html</a></p>\n\n<p>In this case <code>user</code> is preserved for <code>PostgreSQL</code>, <code>SQL:2003</code>, <code>SQL:1999</code> and <code>SQL-92</code>.</p>\n"},{"tags":[],"owner":{"account_id":18537481,"reputation":1557,"user_id":13506812,"display_name":"abhinav kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1596530290,"creation_date":1596530290,"answer_id":63243089,"question_id":45782327,"body_markdown":"Try Dropping the table from pg admin console (`drop table schema_name.table_name`)and make sure your entity class is proper annotated.For example `@Table(name = &quot;table_name&quot;, schema = &quot;schema_name&quot;)` on entity class\r\n ","title":"org.postgresql.util.PSQLException: ERROR: column user0_.id does not exist - Hibernate","body":"<p>Try Dropping the table from pg admin console (<code>drop table schema_name.table_name</code>)and make sure your entity class is proper annotated.For example <code>@Table(name = &quot;table_name&quot;, schema = &quot;schema_name&quot;)</code> on entity class</p>\n"},{"tags":[],"owner":{"account_id":19881143,"reputation":65,"user_id":14565141,"display_name":"GrigoryKrasovsky"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624459871,"creation_date":1624459871,"answer_id":68102186,"question_id":45782327,"body_markdown":"In addition to all previous correct answers, I&#39;d like to say that the positioning of annotations @Column and @GeneratedValue also matters. You want to have both these annotations above either the specific field or getter method, but not separately (**not** one annotation above the getter and the other above the field). It worked for me at least. ","title":"org.postgresql.util.PSQLException: ERROR: column user0_.id does not exist - Hibernate","body":"<p>In addition to all previous correct answers, I'd like to say that the positioning of annotations @Column and @GeneratedValue also matters. You want to have both these annotations above either the specific field or getter method, but not separately (<strong>not</strong> one annotation above the getter and the other above the field). It worked for me at least.</p>\n"},{"tags":[],"owner":{"account_id":17208073,"reputation":245,"user_id":12458182,"display_name":"Frederick Haug"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670598208,"creation_date":1670598208,"answer_id":74744856,"question_id":45782327,"body_markdown":"I fixed the issue by altering the column name from `nameLikeThis` to `name_like_this`\r\n\r\n```\r\nALTER TABLE table RENAME nameLikeThis to name_like_this;\r\n```","title":"org.postgresql.util.PSQLException: ERROR: column user0_.id does not exist - Hibernate","body":"<p>I fixed the issue by altering the column name from <code>nameLikeThis</code> to <code>name_like_this</code></p>\n<pre><code>ALTER TABLE table RENAME nameLikeThis to name_like_this;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20483031,"reputation":11,"user_id":15030823,"display_name":"LuisBrescia"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700535220,"creation_date":1700482886,"answer_id":77515879,"question_id":45782327,"body_markdown":"Change\r\n```java\r\n@Table(name=&quot;USER&quot;)\r\n```\r\nTo\r\n```java\r\n@Table(name&quot;/&quot;USER/&quot;&quot;)\r\n```\r\nUSER is a reserved word, so it needs the `&quot;` character.\r\n","title":"org.postgresql.util.PSQLException: ERROR: column user0_.id does not exist - Hibernate","body":"<p>Change</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Table(name=&quot;USER&quot;)\n</code></pre>\n<p>To</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Table(name&quot;/&quot;USER/&quot;&quot;)\n</code></pre>\n<p>USER is a reserved word, so it needs the <code>&quot;</code> character.</p>\n"}],"owner":{"account_id":7032646,"reputation":5107,"user_id":5387794,"accept_rate":68,"display_name":"kovac"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86410,"favorite_count":0,"down_vote_count":0,"up_vote_count":46,"accepted_answer_id":45782399,"answer_count":9,"score":46,"last_activity_date":1700535220,"creation_date":1503233363,"question_id":45782327,"body_markdown":"I have a model class that is mapped to a postgres database using hibernate. My model class is:\r\n\r\n    @Entity\r\n    @Table(name=&quot;USER&quot;)\r\n    public class User {\r\n    \t\r\n    \t@Id \r\n    \t@GeneratedValue\r\n    \t@Column(name=&quot;id&quot;)\r\n    \tprivate long id;\r\n    \t\r\n    \t@Column(name=&quot;username&quot;, unique=true)\r\n    \tprivate String username;\r\n    \t\r\n    \t@Column(name=&quot;email&quot;)\r\n    \tprivate String email;\r\n    \t\r\n    \t@Column(name=&quot;created&quot;)\r\n    \tprivate Timestamp created;\r\n    \t\r\n    \tpublic User(long id, String username, String email) {\r\n    \t\tthis.id = id;\r\n    \t\tthis.username = username;\r\n    \t\tthis.email = email;\r\n    \t}\r\n    }\r\n\r\nI try to retrieve the user with username &quot;adam&quot; using the below query:\r\n\r\n    tx = session.beginTransaction();\r\n    TypedQuery&lt;User&gt; query = session.createQuery(&quot;FROM User u WHERE u.username = :username&quot;, User.class).setParameter(&quot;username&quot;, &quot;adam&quot;);\r\n    user = query.getSingleResult();\r\n\r\nI get an exception that says:\r\n\r\n    org.postgresql.util.PSQLException: ERROR: column user0_.id does not exist\r\n\r\nMy database from bash shell looks like:\r\n\r\n[![database][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/02Deb.png\r\n\r\nHow does hibernate map class attributes to table columns? Does it match based on the `@Column(name=&quot;username&quot;)` only or does it also try to match based on datatypes and constraints such as unique/auto-increment?","title":"org.postgresql.util.PSQLException: ERROR: column user0_.id does not exist - Hibernate","body":"<p>I have a model class that is mapped to a postgres database using hibernate. My model class is:</p>\n\n<pre><code>@Entity\n@Table(name=\"USER\")\npublic class User {\n\n    @Id \n    @GeneratedValue\n    @Column(name=\"id\")\n    private long id;\n\n    @Column(name=\"username\", unique=true)\n    private String username;\n\n    @Column(name=\"email\")\n    private String email;\n\n    @Column(name=\"created\")\n    private Timestamp created;\n\n    public User(long id, String username, String email) {\n        this.id = id;\n        this.username = username;\n        this.email = email;\n    }\n}\n</code></pre>\n\n<p>I try to retrieve the user with username \"adam\" using the below query:</p>\n\n<pre><code>tx = session.beginTransaction();\nTypedQuery&lt;User&gt; query = session.createQuery(\"FROM User u WHERE u.username = :username\", User.class).setParameter(\"username\", \"adam\");\nuser = query.getSingleResult();\n</code></pre>\n\n<p>I get an exception that says:</p>\n\n<pre><code>org.postgresql.util.PSQLException: ERROR: column user0_.id does not exist\n</code></pre>\n\n<p>My database from bash shell looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/02Deb.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/02Deb.png\" alt=\"database\"></a></p>\n\n<p>How does hibernate map class attributes to table columns? Does it match based on the <code>@Column(name=\"username\")</code> only or does it also try to match based on datatypes and constraints such as unique/auto-increment?</p>\n"},{"tags":["java","linux","sockets","ubuntu","init"],"comments":[{"owner":{"account_id":36185,"reputation":26538,"user_id":103081,"accept_rate":89,"display_name":"Paul"},"score":0,"creation_date":1396007914,"post_id":22712080,"comment_id":34609456,"body_markdown":"`/etc/rc.local` is the lazy place to put code to run on system start.","body":"<code>&#47;etc&#47;rc.local</code> is the lazy place to put code to run on system start."},{"owner":{"account_id":938736,"reputation":6591,"user_id":967203,"accept_rate":100,"display_name":"Will"},"score":0,"creation_date":1396008730,"post_id":22712080,"comment_id":34609968,"body_markdown":"@Paul - Nice of you to offer an alternative","body":"@Paul - Nice of you to offer an alternative"}],"answers":[{"comments":[{"owner":{"account_id":4122242,"reputation":565,"user_id":3382246,"accept_rate":64,"display_name":"Ram"},"score":0,"creation_date":1396009041,"post_id":22712211,"comment_id":34610169,"body_markdown":"What if i wont change PID_PATH_NAME=/tmp/MyService-pid in your program.If i let it be as it is.Will it be OK","body":"What if i wont change PID_PATH_NAME=/tmp/MyService-pid in your program.If i let it be as it is.Will it be OK"},{"owner":{"account_id":4122242,"reputation":565,"user_id":3382246,"accept_rate":64,"display_name":"Ram"},"score":0,"creation_date":1396010290,"post_id":22712211,"comment_id":34610997,"body_markdown":"one More Silly question.Am sorry sir i am very novice to Linux ..How to come out of this command sudo vi /etc/init.d/mytestserv  after pasting the script and execute next command i.e sudo chmod +x /etc/init.d/mytestserv","body":"one More Silly question.Am sorry sir i am very novice to Linux ..How to come out of this command sudo vi /etc/init.d/mytestserv  after pasting the script and execute next command i.e sudo chmod +x /etc/init.d/mytestserv"},{"owner":{"account_id":1482474,"reputation":7545,"user_id":1652451,"display_name":"PbxMan"},"score":1,"creation_date":1396010909,"post_id":22712211,"comment_id":34611431,"body_markdown":"you mean getting out the vi editor!!?? press &quot;ESC +  :wq + &quot;INTRO&quot; to exit. If you mean to reboot the machine try &quot;sudo reboot now&quot; or &quot;sudo reboot&quot;","body":"you mean getting out the vi editor!!?? press &quot;ESC +  :wq + &quot;INTRO&quot; to exit. If you mean to reboot the machine try &quot;sudo reboot now&quot; or &quot;sudo reboot&quot;"},{"owner":{"account_id":4122242,"reputation":565,"user_id":3382246,"accept_rate":64,"display_name":"Ram"},"score":0,"creation_date":1396011126,"post_id":22712211,"comment_id":34611572,"body_markdown":"Got it sir..One More thing if my service is in started Mode and after some time i rebooted my Linux System then My Service will automatically be Started.Am i Right?","body":"Got it sir..One More thing if my service is in started Mode and after some time i rebooted my Linux System then My Service will automatically be Started.Am i Right?"},{"owner":{"account_id":1482474,"reputation":7545,"user_id":1652451,"display_name":"PbxMan"},"score":0,"creation_date":1396011244,"post_id":22712211,"comment_id":34611641,"body_markdown":"Yes Reboot you computer if you can to double check it. Lot&#39;s of luck!","body":"Yes Reboot you computer if you can to double check it. Lot&#39;s of luck!"}],"tags":[],"owner":{"account_id":1482474,"reputation":7545,"user_id":1652451,"display_name":"PbxMan"},"comment_count":5,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1478770038,"creation_date":1396007967,"answer_id":22712211,"question_id":22712080,"body_markdown":"Ideally you should create a service wrapper for your java application and then make this service run on startup example [here][1].\r\n\r\nUse  \r\n`sudo update-rc.d mytestserv defaults` to run your service wrapper on startup on Ubuntu\r\n\r\n\r\n  [1]: http://www.jcgonzalez.com/linux-java-service-wrapper-example","title":"How to run Java application on startup of Ubuntu Linux","body":"<p>Ideally you should create a service wrapper for your java application and then make this service run on startup example <a href=\"http://www.jcgonzalez.com/linux-java-service-wrapper-example\" rel=\"noreferrer\">here</a>.</p>\n\n<p>Use<br>\n<code>sudo update-rc.d mytestserv defaults</code> to run your service wrapper on startup on Ubuntu</p>\n"},{"tags":[],"owner":{"account_id":938736,"reputation":6591,"user_id":967203,"accept_rate":100,"display_name":"Will"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1396008671,"creation_date":1396008671,"answer_id":22712485,"question_id":22712080,"body_markdown":"So two things you&#39;ll need to do:\r\n\r\nFirst create a small shell script to start your java program from a terminal. As you have packaged as a jar have a look at [this][1], specifically the `JAR Files as Applications` section. \r\n\r\nThis may be sufficient: (although you&#39;ll want to use the full path to Java)\r\n\r\n    #!/bin/bash\r\n    java -jar path_to_jar_file\r\n\r\nYou should be able to run your script and successfully start your program. \r\n\r\nOnce you&#39;ve got it starting from a script you can use standard linux tools to start the script. Either putting it in `/etc/rc.local`, or as you&#39;re using Ubuntu, use [update-rc.d][2] to start it on boot. See [here][3] for a very simple example of using `update-rc.d`\r\n\r\nHope this helps, \r\n\r\nWill\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/deployment/jar/run.html\r\n  [2]: http://manpages.ubuntu.com/manpages/precise/en/man8/update-rc.d.8.html\r\n  [3]: http://jasonleveille.com/blog/2013/01/debian-ubuntu-adding-a-startup-script/","title":"How to run Java application on startup of Ubuntu Linux","body":"<p>So two things you'll need to do:</p>\n\n<p>First create a small shell script to start your java program from a terminal. As you have packaged as a jar have a look at <a href=\"http://docs.oracle.com/javase/tutorial/deployment/jar/run.html\" rel=\"nofollow\">this</a>, specifically the <code>JAR Files as Applications</code> section. </p>\n\n<p>This may be sufficient: (although you'll want to use the full path to Java)</p>\n\n<pre><code>#!/bin/bash\njava -jar path_to_jar_file\n</code></pre>\n\n<p>You should be able to run your script and successfully start your program. </p>\n\n<p>Once you've got it starting from a script you can use standard linux tools to start the script. Either putting it in <code>/etc/rc.local</code>, or as you're using Ubuntu, use <a href=\"http://manpages.ubuntu.com/manpages/precise/en/man8/update-rc.d.8.html\" rel=\"nofollow\">update-rc.d</a> to start it on boot. See <a href=\"http://jasonleveille.com/blog/2013/01/debian-ubuntu-adding-a-startup-script/\" rel=\"nofollow\">here</a> for a very simple example of using <code>update-rc.d</code></p>\n\n<p>Hope this helps, </p>\n\n<p>Will</p>\n"}],"owner":{"account_id":4122242,"reputation":565,"user_id":3382246,"accept_rate":64,"display_name":"Ram"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17799,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":22712211,"answer_count":2,"score":4,"last_activity_date":1700534305,"creation_date":1396007522,"question_id":22712080,"body_markdown":"I have a requirement where I need to develop application that reads TCP/IP Socket. I successfully made the program as Java program with No GUI means as soon as program runs it starts listening to the Socket and gets the response with the help of Netbeans IDE. Now as per my requirement i have to start execution of this program as soon as Linux system Booted.\r\n\r\nActually I am very novice in Java and Linux Platform, so have few doubts..\r\n\r\n1. Is my Socket Program with no GUI is fine to be run as per my requirement.\r\n2. How can I write script to run jar on Linux Boot up, I got to know. `init.d` is meant for this.","title":"How to run Java application on startup of Ubuntu Linux","body":"<p>I have a requirement where I need to develop application that reads TCP/IP Socket. I successfully made the program as Java program with No GUI means as soon as program runs it starts listening to the Socket and gets the response with the help of Netbeans IDE. Now as per my requirement i have to start execution of this program as soon as Linux system Booted.</p>\n\n<p>Actually I am very novice in Java and Linux Platform, so have few doubts..</p>\n\n<ol>\n<li>Is my Socket Program with no GUI is fine to be run as per my requirement.</li>\n<li>How can I write script to run jar on Linux Boot up, I got to know. <code>init.d</code> is meant for this.</li>\n</ol>\n"},{"tags":["java","equals","record"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":2,"creation_date":1700468807,"post_id":77514303,"comment_id":136653784,"body_markdown":"Does [this](https://stackoverflow.com/a/61043989/5133585) answer your question? This is another use of `invokedynamic`. It isn&#39;t really related to Java lambda expressions - the classes involved just happen to be called &quot;lambda&quot;.","body":"Does <a href=\"https://stackoverflow.com/a/61043989/5133585\">this</a> answer your question? This is another use of <code>invokedynamic</code>. It isn&#39;t really related to Java lambda expressions - the classes involved just happen to be called &quot;lambda&quot;."},{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225; Petrovick&#253;"},"score":0,"creation_date":1700469054,"post_id":77514303,"comment_id":136653824,"body_markdown":"Considering that the overhead of it appears to be nearly 50 % of the run time of the `equals()` method, I&#39;d like to understand what it&#39;s there for. Seems like writing a custom `equals()` for records to avoid this overhead would defeat the purpose of records.","body":"Considering that the overhead of it appears to be nearly 50 % of the run time of the <code>equals()</code> method, I&#39;d like to understand what it&#39;s there for. Seems like writing a custom <code>equals()</code> for records to avoid this overhead would defeat the purpose of records."},{"owner":{"account_id":953149,"reputation":177303,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"score":0,"creation_date":1700469453,"post_id":77514303,"comment_id":136653877,"body_markdown":"@Luk&#225;Petrovick&#253;: Does your record just contain a `Pair&lt;Integer, Integer&gt;`? If so, then `equals()` should be extremely fast, so according to [Amdahl&#39;s law](https://en.wikipedia.org/wiki/Amdahl%27s_law), I wouldn&#39;t expect that even doubling its runtime would impact the actual performance of your program.","body":"@Luk&#225;Petrovick&#253;: Does your record just contain a <code>Pair&lt;Integer, Integer&gt;</code>? If so, then <code>equals()</code> should be extremely fast, so according to <a href=\"https://en.wikipedia.org/wiki/Amdahl%27s_law\" rel=\"nofollow noreferrer\">Amdahl&#39;s law</a>, I wouldn&#39;t expect that even doubling its runtime would impact the actual performance of your program."},{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225; Petrovick&#253;"},"score":0,"creation_date":1700469584,"post_id":77514303,"comment_id":136653893,"body_markdown":"In the benchmark above, I have found out that this single `equals` method makes up 2 % of my entire run time. In fact, the whole reason why I was benchmarking this was because I noticed a drop in performance after migrating some classes to records. This application is very performance-sensitive, single digits matter to me.","body":"In the benchmark above, I have found out that this single <code>equals</code> method makes up 2 % of my entire run time. In fact, the whole reason why I was benchmarking this was because I noticed a drop in performance after migrating some classes to records. This application is very performance-sensitive, single digits matter to me."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1700469651,"post_id":77514303,"comment_id":136653902,"body_markdown":"How many times are you calling `equals`? I would expect it to be slower when you only call it once or twice. It should be faster in the long run.","body":"How many times are you calling <code>equals</code>? I would expect it to be slower when you only call it once or twice. It should be faster in the long run."},{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225; Petrovick&#253;"},"score":0,"creation_date":1700469788,"post_id":77514303,"comment_id":136653925,"body_markdown":"@Sweeper JMH shows 32 samples out of total ~3900. The code itself is on the hot path, so I would expect it to be called often.","body":"@Sweeper JMH shows 32 samples out of total ~3900. The code itself is on the hot path, so I would expect it to be called often."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1700470055,"post_id":77514303,"comment_id":136653971,"body_markdown":"Okay, I&#39;m not sure what you are looking for in this question then? It is now clear that this is too slow for you, so you can just go back to implementing your own `equals`, and problem solved?","body":"Okay, I&#39;m not sure what you are looking for in this question then? It is now clear that this is too slow for you, so you can just go back to implementing your own <code>equals</code>, and problem solved?"},{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225; Petrovick&#253;"},"score":0,"creation_date":1700470133,"post_id":77514303,"comment_id":136653987,"body_markdown":"True. That said, I like to understand things - so I was hoping someone could tell me what it is that actually happens in there. Quick search for source code didn&#39;t turn up anything, but maybe I didn&#39;t look for the right thing in the right place. I edited the question to make it more clear.","body":"True. That said, I like to understand things - so I was hoping someone could tell me what it is that actually happens in there. Quick search for source code didn&#39;t turn up anything, but maybe I didn&#39;t look for the right thing in the right place. I edited the question to make it more clear."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1700470474,"post_id":77514303,"comment_id":136654039,"body_markdown":"Use `javap` to decompile the created java class, this will give you the source of the generated class file. That way you can see what is being generated for the `record` based `equals` method.","body":"Use <code>javap</code> to decompile the created java class, this will give you the source of the generated class file. That way you can see what is being generated for the <code>record</code> based <code>equals</code> method."},{"owner":{"account_id":953149,"reputation":177303,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"score":0,"creation_date":1700470492,"post_id":77514303,"comment_id":136654044,"body_markdown":"Does your benchmark have a reasonable number of warmup iterations before it starts sampling?","body":"Does your benchmark have a reasonable number of warmup iterations before it starts sampling?"},{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225; Petrovick&#253;"},"score":0,"creation_date":1700470526,"post_id":77514303,"comment_id":136654047,"body_markdown":"@M.Deinum Good idea; I should&#39;ve thought of that.","body":"@M.Deinum Good idea; I should&#39;ve thought of that."},{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225; Petrovick&#253;"},"score":0,"creation_date":1700470566,"post_id":77514303,"comment_id":136654052,"body_markdown":"@ruakh Indeed. My overall margin of error is well under 1 %.","body":"@ruakh Indeed. My overall margin of error is well under 1 %."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1700536354,"post_id":77514303,"comment_id":136663909,"body_markdown":"It is not specified how `Record.equals` actually works; see the [javadoc](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Record.html#equals(java.lang.Object))","body":"It is not specified how <code>Record.equals</code> actually works; see the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Record.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\">javadoc</a>"}],"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225; Petrovick&#253;"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1700533301,"creation_date":1700467809,"question_id":77514303,"body_markdown":"In my Java code, I have a simple record class just like so:\r\n\r\n    record SingleIndexProperties&lt;A&gt;(A property) implements IndexProperties {\r\n\r\n        // Here go implementations of IndexProperties methods; not relevant to question.\r\n\r\n    }\r\n\r\nWhen I run a JMH benchmark of code using this record, I notice something interesting in the CPU time flame graph that is generated at the end:\r\n\r\n[![Flame graph showing what the equals() actually does.][1]][1]\r\n\r\nThis is just an excerpt from a much larger flame graph of the benchmarked code. The interesting thing here is that, for some reason, the default `equals()` method of the record seems to be doing some dynamic calls.\r\n\r\nNaively, I&#39;d expect that the method would do something like this:\r\n\r\n    public boolean equals(Object o) {\r\n         if (o instanceof SingleIndexProperties other)  {\r\n             return Objects.equals(property, other.property);\r\n         }\r\n         return false;\r\n    }\r\n\r\nClearly, that is not the case. What does it actually do instead, and why? I looked for the source code, but I couldn&#39;t find anything.\r\n\r\n(I&#39;m on OpenJDK `Temurin-21.0.1+12`. The `Pair` you see in the flame graph is what is put into the record, and is itself also a record, whose `equals()` exhibits the same default behavior. Then inside the `Pair`, there are `Integer`s.)\r\n\r\n  [1]: https://i.stack.imgur.com/d4VS1.png","title":"What does Java&#39;s record equals() method actually do under the hood?","body":"<p>In my Java code, I have a simple record class just like so:</p>\n<pre><code>record SingleIndexProperties&lt;A&gt;(A property) implements IndexProperties {\n\n    // Here go implementations of IndexProperties methods; not relevant to question.\n\n}\n</code></pre>\n<p>When I run a JMH benchmark of code using this record, I notice something interesting in the CPU time flame graph that is generated at the end:</p>\n<p><a href=\"https://i.stack.imgur.com/d4VS1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d4VS1.png\" alt=\"Flame graph showing what the equals() actually does.\" /></a></p>\n<p>This is just an excerpt from a much larger flame graph of the benchmarked code. The interesting thing here is that, for some reason, the default <code>equals()</code> method of the record seems to be doing some dynamic calls.</p>\n<p>Naively, I'd expect that the method would do something like this:</p>\n<pre><code>public boolean equals(Object o) {\n     if (o instanceof SingleIndexProperties other)  {\n         return Objects.equals(property, other.property);\n     }\n     return false;\n}\n</code></pre>\n<p>Clearly, that is not the case. What does it actually do instead, and why? I looked for the source code, but I couldn't find anything.</p>\n<p>(I'm on OpenJDK <code>Temurin-21.0.1+12</code>. The <code>Pair</code> you see in the flame graph is what is put into the record, and is itself also a record, whose <code>equals()</code> exhibits the same default behavior. Then inside the <code>Pair</code>, there are <code>Integer</code>s.)</p>\n"},{"tags":["java","mysql","jsp"],"comments":[{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1414521782,"post_id":26615426,"comment_id":41843400,"body_markdown":"So, what is line 72?","body":"So, what is line 72?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1414522890,"post_id":26615426,"comment_id":41844042,"body_markdown":"It looks like the code in your page is actually running twice.  Perhaps when you&#39;re doing the &quot;forward&quot; at the end, you&#39;re forwarding to a page that redirects to something that uses the same controller; or something like that.  I would recommend that you try stepping through this with a debugger to get a clearer picture of what&#39;s going on.","body":"It looks like the code in your page is actually running twice.  Perhaps when you&#39;re doing the &quot;forward&quot; at the end, you&#39;re forwarding to a page that redirects to something that uses the same controller; or something like that.  I would recommend that you try stepping through this with a debugger to get a clearer picture of what&#39;s going on."},{"owner":{"account_id":5067761,"reputation":11,"user_id":4067422,"accept_rate":62,"display_name":"Sadia Asghar"},"score":0,"creation_date":1414523142,"post_id":26615426,"comment_id":41844179,"body_markdown":"yes the pages index.jsp and meeting_Id.jsp both have form action=&quot;MainController&quot; So what should i do ?","body":"yes the pages index.jsp and meeting_Id.jsp both have form action=&quot;MainController&quot; So what should i do ?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1414523522,"post_id":26615426,"comment_id":41844379,"body_markdown":"So how is it redirecting or resubmitting?  Or are you actually clicking something on the form when it displays the second time?","body":"So how is it redirecting or resubmitting?  Or are you actually clicking something on the form when it displays the second time?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1414523637,"post_id":26615426,"comment_id":41844449,"body_markdown":"And is that an extra `&quot;` mark in your JSP?  In the line that starts `name=&quot;button&quot;`?  Also, I see an `&lt;/a&gt;` without a matching `&lt;a&gt;`.","body":"And is that an extra <code>&quot;</code> mark in your JSP?  In the line that starts <code>name=&quot;button&quot;</code>?  Also, I see an <code>&lt;&#47;a&gt;</code> without a matching <code>&lt;a&gt;</code>."},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":0,"creation_date":1414523694,"post_id":26615426,"comment_id":41844491,"body_markdown":"What about the &quot;meeting_Id.jsp&quot;?","body":"What about the &quot;meeting_Id.jsp&quot;?"},{"owner":{"account_id":5067761,"reputation":11,"user_id":4067422,"accept_rate":62,"display_name":"Sadia Asghar"},"score":0,"creation_date":1414523780,"post_id":26615426,"comment_id":41844535,"body_markdown":"index.jsp is a login form i click on login button and its forward the control to meeting_Id.jsp and there is a next button when i click on it error occurs &quot;null pointer exception&quot; and all that mentioned above","body":"index.jsp is a login form i click on login button and its forward the control to meeting_Id.jsp and there is a next button when i click on it error occurs &quot;null pointer exception&quot; and all that mentioned above"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1414523855,"post_id":26615426,"comment_id":41844574,"body_markdown":"Then you should show us meeting_id.jsp too, because that&#39;s where the problem is.","body":"Then you should show us meeting_id.jsp too, because that&#39;s where the problem is."},{"owner":{"account_id":5067761,"reputation":11,"user_id":4067422,"accept_rate":62,"display_name":"Sadia Asghar"},"score":0,"creation_date":1414524045,"post_id":26615426,"comment_id":41844677,"body_markdown":"@DavidWallace yes it was extra and &lt;/a&gt; it was by mistake ... thank u","body":"@DavidWallace yes it was extra and &lt;/a&gt; it was by mistake ... thank u"},{"owner":{"account_id":5067761,"reputation":11,"user_id":4067422,"accept_rate":62,"display_name":"Sadia Asghar"},"score":0,"creation_date":1414524261,"post_id":26615426,"comment_id":41844807,"body_markdown":"i edit the post to show meeting_Id.jsp code","body":"i edit the post to show meeting_Id.jsp code"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1414524853,"post_id":26615426,"comment_id":41845108,"body_markdown":"OK, so for a start, try using the name &quot;button&quot; for both buttons on meeting_Id.jsp, since this is the name you&#39;re checking for.","body":"OK, so for a start, try using the name &quot;button&quot; for both buttons on meeting_Id.jsp, since this is the name you&#39;re checking for."},{"owner":{"account_id":5067761,"reputation":11,"user_id":4067422,"accept_rate":62,"display_name":"Sadia Asghar"},"score":0,"creation_date":1414525677,"post_id":26615426,"comment_id":41845561,"body_markdown":"i changed meeting_Id.jsp by name=&quot;button&quot; and also change the MainController.java by String next=request.getParameter(&quot;button&quot;);","body":"i changed meeting_Id.jsp by name=&quot;button&quot; and also change the MainController.java by String next=request.getParameter(&quot;button&quot;);"},{"owner":{"account_id":5067761,"reputation":11,"user_id":4067422,"accept_rate":62,"display_name":"Sadia Asghar"},"score":0,"creation_date":1414525721,"post_id":26615426,"comment_id":41845584,"body_markdown":"now it shows error when i run this java.lang.IllegalStateException: Cannot forward after response has been committed\n\tclasses.MainController.doPost(MainController.java:150)","body":"now it shows error when i run this java.lang.IllegalStateException: Cannot forward after response has been committed \tclasses.MainController.doPost(MainController.java:150)"},{"owner":{"account_id":5067761,"reputation":11,"user_id":4067422,"accept_rate":62,"display_name":"Sadia Asghar"},"score":0,"creation_date":1414525760,"post_id":26615426,"comment_id":41845606,"body_markdown":"in console its &quot;start\nreached controller\nlogin111\ninside if\n111  sadia   sadia\n111  sadia   sadia\nSELECT AId,Password FROM administrator\nnextlogin\nExceptions Column count doesn&#39;t match value count at row 1&quot;","body":"in console its &quot;start reached controller login111 inside if 111  sadia   sadia 111  sadia   sadia SELECT AId,Password FROM administrator nextlogin Exceptions Column count doesn&#39;t match value count at row 1&quot;"},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":0,"creation_date":1414526849,"post_id":26615426,"comment_id":41846180,"body_markdown":"If you have changed your code, please edit your question to the new code, and write the console at its botton. Most people write something like &quot;EDIT: I changed my source and now it does so and so&quot;. You can use code blocks only in the question.","body":"If you have changed your code, please edit your question to the new code, and write the console at its botton. Most people write something like &quot;EDIT: I changed my source and now it does so and so&quot;. You can use code blocks only in the question."},{"owner":{"account_id":5067761,"reputation":11,"user_id":4067422,"accept_rate":62,"display_name":"Sadia Asghar"},"score":0,"creation_date":1414591567,"post_id":26615426,"comment_id":41872838,"body_markdown":"i just edit the question ....now i m using button for both jsp pages ..it shows null pointer exception and stuck in the line if(button.equals(&quot;Next&quot;)) thanks","body":"i just edit the question ....now i m using button for both jsp pages ..it shows null pointer exception and stuck in the line if(button.equals(&quot;Next&quot;)) thanks"},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":0,"creation_date":1414595292,"post_id":26615426,"comment_id":41875376,"body_markdown":"I expanded my answer. Though I&#39;m pretty sure the updated stack trace should have shown a NullPointerException again rather than NumberFormatException, but anyway, I covered both of them.","body":"I expanded my answer. Though I&#39;m pretty sure the updated stack trace should have shown a NullPointerException again rather than NumberFormatException, but anyway, I covered both of them."},{"owner":{"account_id":5067761,"reputation":11,"user_id":4067422,"accept_rate":62,"display_name":"Sadia Asghar"},"score":0,"creation_date":1414596221,"post_id":26615426,"comment_id":41876076,"body_markdown":"thank u i edit the code and edit name=&quot;meeting_id&quot; in meeting_Id.jsp then i the run now it shows class not found exception that is java.lang.NoClassDefFoundError: classes/meeting","body":"thank u i edit the code and edit name=&quot;meeting_id&quot; in meeting_Id.jsp then i the run now it shows class not found exception that is java.lang.NoClassDefFoundError: classes/meeting"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1627224927,"post_id":26615426,"comment_id":121094268,"body_markdown":"Did not see a warning yet: use a PreparedStatement; reason [hacking](https://xkcd.com/327/) and escaping of apostrophe etcetera.","body":"Did not see a warning yet: use a PreparedStatement; reason <a href=\"https://xkcd.com/327/\" rel=\"nofollow noreferrer\">hacking</a> and escaping of apostrophe etcetera."}],"answers":[{"comments":[{"owner":{"account_id":5067761,"reputation":11,"user_id":4067422,"accept_rate":62,"display_name":"Sadia Asghar"},"score":0,"creation_date":1414522549,"post_id":26616167,"comment_id":41843851,"body_markdown":"Thank u #RealSkeptic. The button is submit button and when i remove the code after the comment &quot;//for getting meeting id&quot; it works fine the problem starts with the line after this comment","body":"Thank u #RealSkeptic. The button is submit button and when i remove the code after the comment &quot;//for getting meeting id&quot; it works fine the problem starts with the line after this comment"},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1414522766,"post_id":26616167,"comment_id":41843966,"body_markdown":"@SadiaAsghar: the stack trace tells you exactly where the exception is thrown: at line 72. Why don&#39;t you tell us which line this is?","body":"@SadiaAsghar: the stack trace tells you exactly where the exception is thrown: at line 72. Why don&#39;t you tell us which line this is?"},{"owner":{"account_id":5067761,"reputation":11,"user_id":4067422,"accept_rate":62,"display_name":"Sadia Asghar"},"score":0,"creation_date":1414522869,"post_id":26616167,"comment_id":41844029,"body_markdown":"its if(button.equals(&quot;login&quot;))","body":"its if(button.equals(&quot;login&quot;))"},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":0,"creation_date":1414523252,"post_id":26616167,"comment_id":41844245,"body_markdown":"Well, the problem is the comparison `button.equals(&quot;login&quot;)`. You may think it is somewhere else, because it only happens when you activate the servlet again from your &quot;meeting_Id.jsp&quot; which is probably using the same servlet as a form `action` and doesn&#39;t have a `button`.","body":"Well, the problem is the comparison <code>button.equals(&quot;login&quot;)</code>. You may think it is somewhere else, because it only happens when you activate the servlet again from your &quot;meeting_Id.jsp&quot; which is probably using the same servlet as a form <code>action</code> and doesn&#39;t have a <code>button</code>."},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":0,"creation_date":1414525254,"post_id":26616167,"comment_id":41845320,"body_markdown":"I extended my answer to explain the process better. It is indeed as I thought - the same action, called twice.","body":"I extended my answer to explain the process better. It is indeed as I thought - the same action, called twice."},{"owner":{"account_id":5067761,"reputation":11,"user_id":4067422,"accept_rate":62,"display_name":"Sadia Asghar"},"score":0,"creation_date":1414596065,"post_id":26616167,"comment_id":41875943,"body_markdown":"thank u i edit the code and edit name=&quot;meeting_id&quot; in meeting_Id.jsp then i the run now it shows class not found exception that is java.lang.NoClassDefFoundError: classes/meeting","body":"thank u i edit the code and edit name=&quot;meeting_id&quot; in meeting_Id.jsp then i the run now it shows class not found exception that is java.lang.NoClassDefFoundError: classes/meeting"},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":0,"creation_date":1414596232,"post_id":26616167,"comment_id":41876080,"body_markdown":"(a) Your classes should always have names that start with a Capital letter (`Meeting`, not `meeting`). (b) The public classes&#39; names should always match the name of the file in which they are saved, including capital letters.","body":"(a) Your classes should always have names that start with a Capital letter (<code>Meeting</code>, not <code>meeting</code>). (b) The public classes&#39; names should always match the name of the file in which they are saved, including capital letters."},{"owner":{"account_id":5067761,"reputation":11,"user_id":4067422,"accept_rate":62,"display_name":"Sadia Asghar"},"score":0,"creation_date":1414596527,"post_id":26616167,"comment_id":41876297,"body_markdown":"classes is the package name and the project name is Meeting1 where the package and classes reside","body":"classes is the package name and the project name is Meeting1 where the package and classes reside"},{"owner":{"account_id":5067761,"reputation":11,"user_id":4067422,"accept_rate":62,"display_name":"Sadia Asghar"},"score":0,"creation_date":1414597347,"post_id":26616167,"comment_id":41876883,"body_markdown":"i changed package name by Meeting1 now the problem solve the control moves to meeting.java the console shows that the problem is now at INSERT INTO Meeting VALUE ( 0) after that error occurred &quot;java.sql.SQLException: Column count doesn&#39;t match value count at row 1&quot;","body":"i changed package name by Meeting1 now the problem solve the control moves to meeting.java the console shows that the problem is now at INSERT INTO Meeting VALUE ( 0) after that error occurred &quot;java.sql.SQLException: Column count doesn&#39;t match value count at row 1&quot;"},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":0,"creation_date":1414599629,"post_id":26616167,"comment_id":41878546,"body_markdown":"I don&#39;t think the StackOverflow format is good for what you are trying to do here. You need to have an experienced programmer right next to you helping to point out the mistakes. So this is my last comment on this issue: the syntax of an INSERT statement is `INSERT INTO &lt;table name&gt; VALUES (&lt;values of all fields&gt;)` OR `INSERT INTO &lt;table name&gt; (&lt;field1&gt;,&lt;field2&gt;,...) VALUES (&lt;value1&gt;,&lt;value2&gt;,...)`.","body":"I don&#39;t think the StackOverflow format is good for what you are trying to do here. You need to have an experienced programmer right next to you helping to point out the mistakes. So this is my last comment on this issue: the syntax of an INSERT statement is <code>INSERT INTO &lt;table name&gt; VALUES (&lt;values of all fields&gt;)</code> OR <code>INSERT INTO &lt;table name&gt; (&lt;field1&gt;,&lt;field2&gt;,...) VALUES (&lt;value1&gt;,&lt;value2&gt;,...)</code>."}],"tags":[],"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"comment_count":10,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1414595192,"creation_date":1414521999,"answer_id":26616167,"question_id":26615426,"body_markdown":"&lt;h3&gt;Solution for the original NullPointerException problem&lt;/h3&gt;\r\n\r\nThe problem is in here:\r\n\r\n        //System.out.println(&quot;connection&quot;);\r\n        String button=request.getParameter(&quot;button&quot;);\r\n        System.out.println(button +  request.getParameter(&quot;AId&quot;));\r\n\r\n\r\n\r\n\r\n        if(button.equals(&quot;login&quot;))\r\n \r\nAs you can see from your own debug printing, both `button` and the parameter `AId` that you print are null.\r\n\r\nTherefore, when you try to call `button.equals(&quot;login&quot;)` you get a NullPointerException. That&#39;s because you can&#39;t call a method on a null.\r\n\r\nYou should always check if your parameters are `null` before using them. Even if you think that they should never be `null` - because hackers can try to send stuff to your servlet without the control of your form.\r\n\r\nHere is what happens, step by step.\r\n\r\n 1. You display `index.jsp`. You click the button.\r\n 2. MainController runs. Since there is a `button` parameter that came from `index.jsp`, everything is OK, and it reaches the code at the end that forwards it into the `meeting_Id.jsp` which is now displayed on your browser.\r\n 3. You now click the button and send the form in the `meeting_Id.jsp` back to `MainController`.\r\n 4. Now, in this invocation, there is no parameter `button`. Therefore you get the NullPointerException.\r\n\r\nYou are working in an MVC environment. Every form is sent to the same controller, `MainContoller`, and `MainController` is supposed to be smart enough to know which form sent it the request, and handle it accordingly. But yours assumes only `index.jsp` is calling it. But it doesn&#39;t work like this. When you click the `next` button on `meeting_Id.jspa`, you are creating a **new request**, which goes to the same `MainController` servlet, and causes the error.\r\n\r\nYou should make sure your forms send some sort of ID that tells `MainController` which form is using it at the moment, and then the controller can send the request to be processed by the appropriate model. The input you use this for should have the same name and should exist in all the forms you are sending.\r\n\r\n&lt;h3&gt;Solution for the NumberFormatException&lt;/h3&gt;\r\n\r\nNow you have a similar issue for a different reason. In this line:\r\n\r\n     int meetingid = Integer.parseInt(request.getParameter(&quot;meeting_id&quot;));\r\n\r\nYou are trying to parse a parameter called `meeting_id`. The problem is that, again, you are not checking for nulls. You don&#39;t actually have such a parameter.\r\n\r\nWhy? Because this is what your HTML (in `meeting_Id.jsp`) says:\r\n\r\n    &lt;input type=&quot;text&quot; id=&quot;meeting_id&quot; name=&quot;mid&quot; required=&quot;required&quot; /&gt;\r\n\r\nAs you can see, &quot;meeting_id&quot; is its **id**, not its **name**, and `getParameter()` always works with the input&#39;s `name`.\r\n\r\nBeyond that, after you fix this, you must either make sure (with a regex) that the parameter has only numbers in it, or you have to catch `NumberFormatException` using a try-catch block around the `parseInt` line.\r\n\r\nAlways, always, check the parameters that you get from the user. Never assume that they exist, that they are not null, or that they have the values you expect them to have.","title":"java.lang.NumberFormatException: null java.lang.Integer.parseInt(Unknown Source)","body":"<h3>Solution for the original NullPointerException problem</h3>\n\n<p>The problem is in here:</p>\n\n<pre><code>    //System.out.println(\"connection\");\n    String button=request.getParameter(\"button\");\n    System.out.println(button +  request.getParameter(\"AId\"));\n\n\n\n\n    if(button.equals(\"login\"))\n</code></pre>\n\n<p>As you can see from your own debug printing, both <code>button</code> and the parameter <code>AId</code> that you print are null.</p>\n\n<p>Therefore, when you try to call <code>button.equals(\"login\")</code> you get a NullPointerException. That's because you can't call a method on a null.</p>\n\n<p>You should always check if your parameters are <code>null</code> before using them. Even if you think that they should never be <code>null</code> - because hackers can try to send stuff to your servlet without the control of your form.</p>\n\n<p>Here is what happens, step by step.</p>\n\n<ol>\n<li>You display <code>index.jsp</code>. You click the button.</li>\n<li>MainController runs. Since there is a <code>button</code> parameter that came from <code>index.jsp</code>, everything is OK, and it reaches the code at the end that forwards it into the <code>meeting_Id.jsp</code> which is now displayed on your browser.</li>\n<li>You now click the button and send the form in the <code>meeting_Id.jsp</code> back to <code>MainController</code>.</li>\n<li>Now, in this invocation, there is no parameter <code>button</code>. Therefore you get the NullPointerException.</li>\n</ol>\n\n<p>You are working in an MVC environment. Every form is sent to the same controller, <code>MainContoller</code>, and <code>MainController</code> is supposed to be smart enough to know which form sent it the request, and handle it accordingly. But yours assumes only <code>index.jsp</code> is calling it. But it doesn't work like this. When you click the <code>next</code> button on <code>meeting_Id.jspa</code>, you are creating a <strong>new request</strong>, which goes to the same <code>MainController</code> servlet, and causes the error.</p>\n\n<p>You should make sure your forms send some sort of ID that tells <code>MainController</code> which form is using it at the moment, and then the controller can send the request to be processed by the appropriate model. The input you use this for should have the same name and should exist in all the forms you are sending.</p>\n\n<h3>Solution for the NumberFormatException</h3>\n\n<p>Now you have a similar issue for a different reason. In this line:</p>\n\n<pre><code> int meetingid = Integer.parseInt(request.getParameter(\"meeting_id\"));\n</code></pre>\n\n<p>You are trying to parse a parameter called <code>meeting_id</code>. The problem is that, again, you are not checking for nulls. You don't actually have such a parameter.</p>\n\n<p>Why? Because this is what your HTML (in <code>meeting_Id.jsp</code>) says:</p>\n\n<pre><code>&lt;input type=\"text\" id=\"meeting_id\" name=\"mid\" required=\"required\" /&gt;\n</code></pre>\n\n<p>As you can see, \"meeting_id\" is its <strong>id</strong>, not its <strong>name</strong>, and <code>getParameter()</code> always works with the input's <code>name</code>.</p>\n\n<p>Beyond that, after you fix this, you must either make sure (with a regex) that the parameter has only numbers in it, or you have to catch <code>NumberFormatException</code> using a try-catch block around the <code>parseInt</code> line.</p>\n\n<p>Always, always, check the parameters that you get from the user. Never assume that they exist, that they are not null, or that they have the values you expect them to have.</p>\n"}],"owner":{"account_id":5067761,"reputation":11,"user_id":4067422,"accept_rate":62,"display_name":"Sadia Asghar"},"comment_count":19,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9548,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1700532120,"creation_date":1414519673,"question_id":26615426,"body_markdown":"I am trying to get values from jsp page and want store those values in mysql(xampp) database using java.\r\nThe connection is established and successfully logged in but when i tried to get values null pointer exception occurs\r\n\r\n`MainController.java` is \r\n\r\n    package classes;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    import java.sql.Connection;\r\n    \r\n    import java.sql.Date;\r\n    \r\n    import java.sql.DriverManager;\r\n    \r\n    //import java.sql.PreparedStatement;\r\n    \r\n    import java.sql.ResultSet;\r\n    \r\n    import java.sql.SQLException;\r\n    \r\n    import java.sql.Statement;\r\n    \r\n    import java.sql.Time;\r\n    \r\n    import javax.servlet.RequestDispatcher;\r\n    \r\n    import javax.servlet.ServletContext;\r\n    \r\n    import javax.servlet.ServletException;\r\n    \r\n    import javax.servlet.annotation.WebServlet;\r\n    \r\n    import javax.servlet.http.HttpServlet;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    \r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import javax.servlet.http.HttpSession;\r\n    \r\n    /**\r\n    \r\n     * Servlet implementation class MainController\r\n    \r\n     */\r\n    \r\n    @WebServlet(&quot;/MainController&quot;)\r\n    \r\n    public class MainController extends HttpServlet {\r\n    \r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t/**\r\n    \r\n    \t * @see HttpServlet#HttpServlet()\r\n    \r\n    \t */\r\n    \tpublic MainController() {\r\n    \t\tsuper();\r\n    \t\t// TODO Auto-generated constructor stub\r\n    \t}\r\n    \r\n    \t/**\r\n    \r\n    \t * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse\r\n    \r\n    \t *      response)\r\n    \r\n    \t */\r\n    \r\n    \tprotected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n    \t\t\r\n    \r\n    \t\t\r\n    \r\n    \t/**\r\n    \t * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse\r\n    \t *      response)\r\n    \t */\r\n    \t}\r\n    \t//@SuppressWarnings(&quot;null&quot;)\r\n    \tprotected void doPost(HttpServletRequest request,\r\n    \t\t\tHttpServletResponse response) throws ServletException, IOException {\r\n    \t\tString url= &quot;jdbc:mysql://localhost/meeting_planner&quot;;\r\n    \t\tSystem.out.println(&quot;start&quot;);\r\n    \t\t// boolean stfound = false;\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tSystem.out.println(&quot;reached controller&quot;);\r\n    \t\t\tClass.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n    \t\tConnection con = DriverManager.getConnection(url, &quot;admin&quot;, &quot;admin&quot;);\r\n    \t\t\r\n    \t\tStatement stmt = con.createStatement();\r\n    \t\t//System.out.println(&quot;connection&quot;);\r\n    \t\tString button=request.getParameter(&quot;button&quot;);\r\n    \t\tSystem.out.println(button +  request.getParameter(&quot;AId&quot;));\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\tif(button.equals(&quot;login&quot;))\r\n    \t\t{\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(&quot;inside if&quot;);\r\n    \t\t\t\r\n    \t\t\tString  AdminId= request.getParameter(&quot;AId&quot;);\r\n    \t\t\tString password= request.getParameter(&quot;Password&quot;);\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(AdminId+&quot;  sadia   &quot;+password);\r\n    \t\t\t\r\n    \t\t\tif(!(AdminId==&quot;&quot; || password==&quot;&quot;))\r\n    \t\t\t{\r\n    \t\t\t\t\r\n    \t\t\t\tboolean stfound = false;\r\n    \t\t\t\t\r\n    \t\t\t\tSystem.out.println(AdminId+&quot;  sadia   &quot;+password);\r\n    \t\t\t\t\r\n    \t\t\t\tString query = &quot;SELECT AId,Password FROM administrator&quot;;\r\n    \t\t\t\t\r\n    \t\t\t\tResultSet rs = stmt.executeQuery(query);\r\n    \t\t\t\tSystem.out.println(query);\r\n    \t\t\t\t\r\n    \t\t\t\twhile(rs.next())\r\n    \t\t\t\t{\r\n    \t\t\t\t\t\r\n    \t\t\t\t\tString dbadminid = rs.getString(1);\r\n    \t\t\t\t\tString dbadminpwd = rs.getString(2);\r\n    \t\t\t\t\t\r\n    \t\t\t\t\tif(AdminId.equals(dbadminid) &amp;&amp; password.equals(dbadminpwd))\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\tHttpSession session = request.getSession(true);\r\n    \t\t\t\t\t\tsession.setAttribute(&quot;userid&quot;,dbadminid);\r\n    \t\t\t\t\t\tstfound = true;\r\n    \t\t\t\t\t\tbreak;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\tif(stfound){\r\n    \t\t\t RequestDispatcher dispatcher = getServletContext().getRequestDispatcher ( &quot;/meeting_Id.jsp&quot; ) ;\r\n    \t\t    \r\n    \t\t\t dispatcher.forward ( request, response ) ;\r\n    \t\t\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t\telse{\r\n    \t\t\t\tRequestDispatcher dispatcher = getServletContext().getRequestDispatcher ( &quot;/index.jsp&quot; ) ;\r\n    \t\t\t    \r\n    \t\t\t\tdispatcher.forward ( request, response ) ;\r\n    \t\t\t\r\n    \t\t\t}\r\n    \t\t\t}\r\n    \t\tif(button.equals(&quot;Next&quot;))\r\n\t\t{\r\n\t\t\t\r\n\t\t\tHttpSession session = request.getSession(true);\r\n\t\t\tString AID =(String) session.getAttribute(&quot;aid&quot;);\r\n\t\t\t\r\n\t\t\t \r\n\t\t\tint meetingid = Integer.parseInt(request.getParameter(&quot;meeting_id&quot;));\r\n\t\t\t/*String CNM= request.getParameter(&quot;CNM&quot;);\r\n\t\t\tint CCD = Integer.parseInt(request.getParameter(&quot;CCD&quot;));\r\n\t\t\tint  CCDD= Integer.parseInt(request.getParameter(&quot;CCDD&quot;));\r\n\t\t\tint PID= Integer.parseInt(request.getParameter(&quot;PID&quot;));\r\n\t\t\tint STFID=Integer.parseInt(AID);*/\r\n\t\t\t\r\n\t\t\tmeeting obj=new meeting();\r\n\t\t\tobj.addmeeting(meetingid);\r\n\t\t\t\r\n\t\t\tSystem.out.print(&quot;Sadia&quot;);\r\n\t\t\t\r\n\t\t\tRequestDispatcher dispatcher = getServletContext().getRequestDispatcher ( &quot;/creat_date.jsp&quot; ) ;\r\n\t\t    \r\n\t\t\tdispatcher.forward ( request, response ) ;\r\n\t\t}\r\n    \t}catch (ClassNotFoundException e1) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te1.printStackTrace();\r\n\t\t} catch (SQLException e1) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te1.printStackTrace();\r\n\t\t}\r\n\t\t}\r\n\t}\r\n    \t\t\r\nand Meeting.java is \r\n\r\n    package classes;\r\n\r\n    import java.sql.Connection;\r\n\r\n    import java.sql.Date;\r\n\r\n    import java.sql.DriverManager;\r\n\r\n    import java.sql.ResultSet;\r\n\r\n    import java.sql.SQLException;\r\n\r\n    import java.sql.Time;\r\n\r\n    import java.sql.Statement;\r\n\r\n    public class meeting {\r\n\r\n        private int meeting_id;\r\n        Connection con=null;\r\n        Statement smt = null;\r\n\r\n        public static void main(String[] args) {\r\n            // TODO Auto-generated method stub\r\n\r\n        }\r\n        public meeting()throws ClassNotFoundException//construtor\r\n            , SQLException{\r\n                //\ttry{\r\n                String url = &quot;jdbc:mysql://localhost/meeting_planner&quot;;\r\n                Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n                con = DriverManager.getConnection(url, &quot;admin&quot;, &quot;admin&quot;);\r\n\r\n                smt = con.createStatement();\r\n\r\n                //}catch(ClassNotFoundException e1){\r\n                //e1.printStackTrace();\r\n            }\r\n            public void addmeeting(int meeting_id1)throws ClassNotFoundException  // from attribute web.xml\r\n                , SQLException{\r\n                    System.out.println(&quot;------TRY INSERTION------&quot;); \r\n\r\n\r\n                    String query = &quot;SELECT meeting_Id FROM meeting&quot;;\r\n                    ResultSet rs = smt.executeQuery(query);\r\n                    int numCols = rs.getMetaData().getColumnCount()+1;\r\n                    //\tSTAFF_ID=numCols+1;\r\n\r\n                    String query1 = &quot;INSERT INTO Meeting VALUE ( &quot;+meeting_id+&quot;)&quot;;\r\n                    System.out.println(query1); \r\n                    smt.executeUpdate(query1);\r\n\r\n                }\r\n            }\r\n\r\n\r\nthe name of Next button is &quot;next&quot;\r\nwhen i print the value of `next` in this line `System.out.println(&quot;next&quot;+next);`\r\nit print null for next parameter \r\n\r\n** EDIT: The problem with NullPointerException was resolved, but now a NumberFormatException is thrown **\r\n\r\nConsole is like this \r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    start\r\n    \r\n    reached controller\r\n    \r\n    inside if\r\n    \r\n    111  sadia   sadia\r\n    \r\n    111  sadia   sadia\r\n    \r\n    SELECT AId,Password FROM administrator\r\n    \r\n    start\r\n    \r\n    reached controller\r\n    \r\n    Oct 29, 2014 6:44:57 PM org.apache.catalina.core.StandardWrapperValve invoke\r\n    \r\n    SEVERE: Servlet.service() for servlet [classes.MainController] in context with path [/Meeting1] threw \r\n    \r\n    exception\r\n    \r\n    java.lang.NumberFormatException: null\r\n    \r\n    \tat java.lang.Integer.parseInt(Unknown Source)\r\n    \r\n    \tat java.lang.Integer.parseInt(Unknown Source)\r\n    \r\n    \tat classes.MainController.doPost(MainController.java:141)\r\n    \r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n    \r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\r\n    \r\n    \tat \r\n    \r\n    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\r\n    \r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n    \r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\r\n    \r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\r\n    \r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n    \r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\r\n    \r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\r\n    \r\n    \tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:953)\r\n    \r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\r\n    \r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\r\n    \r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1023)\r\n    \r\n    \tat \r\n    \r\n    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)\r\n    \r\n    \tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)\r\n    \r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    \r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    \r\n    \tat java.lang.Thread.run(Unknown Source)\r\n\r\n\r\nThe index.jsp is \r\n\r\n\t&lt;form method = &quot;post&quot; name=&quot;create&quot; action=&quot;MainController&quot;&gt;\r\n\r\n\t\t\t\t\t\t\t\t\t\t&lt;label for=&quot;author&quot;&gt;Enter id: &lt;/label&gt; &lt;input type=&quot;text&quot;\r\n\t\t\t\t\t\t\t\t\t\t\tid=&quot;AId&quot; name=&quot;AId&quot; required=&quot;required&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;div class=&quot;cleaner_h10&quot;&gt;&lt;/div&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;label for=&quot;author&quot;&gt;Enter_password: &lt;/label&gt;&lt;input\r\n\t\t\t\t\t\t\t\t\t\t\ttype=&quot;password&quot; name=&quot;Password&quot; required=&quot;required&quot; /&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;div class=&quot;cleaner_h10&quot;&gt;&lt;/div&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;br&gt;  &lt;input type=&quot;submit&quot;\r\n\t\t\t\t\t\t\t\t\t\t\t\tname=&quot;button&quot; &quot; value=&quot;login&quot;\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=&quot;height: 30px; width: 70px&quot;&gt;&lt;/a&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t &lt;/input&gt;\r\n\t\t\t\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t\t&lt;/form&gt;\r\n\r\n\r\nThe meeting_Id.jsp is \r\n  \r\n\r\n    &lt;form method=&quot;post&quot; name=&quot;create&quot; action=&quot;MainController&quot;&gt;\r\n\r\n                        &lt;label for=&quot;author&quot;&gt;Enter Meeting Id:&lt;/label&gt; &lt;input type=&quot;text&quot; id=&quot;meeting_id&quot; name=&quot;mid&quot; required=&quot;required&quot; /&gt;\r\n                        &lt;div class=&quot;cleaner_h10&quot;&gt;&lt;/div&gt;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n                        &lt;div class=&quot;cleaner_h10&quot;&gt;&lt;/div&gt;&lt;br&gt;\r\n\t\t\t\t\t\t\r\n\t\t\t\t&lt;input type=&quot;submit&quot; name=&quot;cancelbutton&quot; value=&quot;Cancel&quot; style=&quot;height:30px; width:70px&quot;&gt;\r\n\t\t\t\t&lt;/input&gt;\r\n\t\t\t\t&lt;input type=&quot;submit&quot; name=&quot;button&quot; value=&quot;Next&quot; style=&quot;height:30px; width:70px&quot;&gt;\r\n\t\t\t\t&lt;/input&gt;\r\n\t\t\t\t\t&lt;/form&gt;\r\n\r\n","title":"java.lang.NumberFormatException: null java.lang.Integer.parseInt(Unknown Source)","body":"<p>I am trying to get values from jsp page and want store those values in mysql(xampp) database using java.\nThe connection is established and successfully logged in but when i tried to get values null pointer exception occurs</p>\n\n<p><code>MainController.java</code> is </p>\n\n<pre><code>package classes;\n\nimport java.io.IOException;\n\nimport java.sql.Connection;\n\nimport java.sql.Date;\n\nimport java.sql.DriverManager;\n\n//import java.sql.PreparedStatement;\n\nimport java.sql.ResultSet;\n\nimport java.sql.SQLException;\n\nimport java.sql.Statement;\n\nimport java.sql.Time;\n\nimport javax.servlet.RequestDispatcher;\n\nimport javax.servlet.ServletContext;\n\nimport javax.servlet.ServletException;\n\nimport javax.servlet.annotation.WebServlet;\n\nimport javax.servlet.http.HttpServlet;\n\nimport javax.servlet.http.HttpServletRequest;\n\nimport javax.servlet.http.HttpServletResponse;\n\nimport javax.servlet.http.HttpSession;\n\n/**\n\n * Servlet implementation class MainController\n\n */\n\n@WebServlet(\"/MainController\")\n\npublic class MainController extends HttpServlet {\n\n    private static final long serialVersionUID = 1L;\n\n    /**\n\n     * @see HttpServlet#HttpServlet()\n\n     */\n    public MainController() {\n        super();\n        // TODO Auto-generated constructor stub\n    }\n\n    /**\n\n     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse\n\n     *      response)\n\n     */\n\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n\n\n\n\n    /**\n     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse\n     *      response)\n     */\n    }\n    //@SuppressWarnings(\"null\")\n    protected void doPost(HttpServletRequest request,\n            HttpServletResponse response) throws ServletException, IOException {\n        String url= \"jdbc:mysql://localhost/meeting_planner\";\n        System.out.println(\"start\");\n        // boolean stfound = false;\n\n        try {\n            System.out.println(\"reached controller\");\n            Class.forName(\"com.mysql.jdbc.Driver\");\n        Connection con = DriverManager.getConnection(url, \"admin\", \"admin\");\n\n        Statement stmt = con.createStatement();\n        //System.out.println(\"connection\");\n        String button=request.getParameter(\"button\");\n        System.out.println(button +  request.getParameter(\"AId\"));\n\n\n\n\n        if(button.equals(\"login\"))\n        {\n\n            System.out.println(\"inside if\");\n\n            String  AdminId= request.getParameter(\"AId\");\n            String password= request.getParameter(\"Password\");\n\n            System.out.println(AdminId+\"  sadia   \"+password);\n\n            if(!(AdminId==\"\" || password==\"\"))\n            {\n\n                boolean stfound = false;\n\n                System.out.println(AdminId+\"  sadia   \"+password);\n\n                String query = \"SELECT AId,Password FROM administrator\";\n\n                ResultSet rs = stmt.executeQuery(query);\n                System.out.println(query);\n\n                while(rs.next())\n                {\n\n                    String dbadminid = rs.getString(1);\n                    String dbadminpwd = rs.getString(2);\n\n                    if(AdminId.equals(dbadminid) &amp;&amp; password.equals(dbadminpwd))\n                    {\n                        HttpSession session = request.getSession(true);\n                        session.setAttribute(\"userid\",dbadminid);\n                        stfound = true;\n                        break;\n                    }\n                }\n\n\n\n\n        if(stfound){\n             RequestDispatcher dispatcher = getServletContext().getRequestDispatcher ( \"/meeting_Id.jsp\" ) ;\n\n             dispatcher.forward ( request, response ) ;\n\n            }\n        }\n            else{\n                RequestDispatcher dispatcher = getServletContext().getRequestDispatcher ( \"/index.jsp\" ) ;\n\n                dispatcher.forward ( request, response ) ;\n\n            }\n            }\n        if(button.equals(\"Next\"))\n    {\n\n        HttpSession session = request.getSession(true);\n        String AID =(String) session.getAttribute(\"aid\");\n\n\n        int meetingid = Integer.parseInt(request.getParameter(\"meeting_id\"));\n        /*String CNM= request.getParameter(\"CNM\");\n        int CCD = Integer.parseInt(request.getParameter(\"CCD\"));\n        int  CCDD= Integer.parseInt(request.getParameter(\"CCDD\"));\n        int PID= Integer.parseInt(request.getParameter(\"PID\"));\n        int STFID=Integer.parseInt(AID);*/\n\n        meeting obj=new meeting();\n        obj.addmeeting(meetingid);\n\n        System.out.print(\"Sadia\");\n\n        RequestDispatcher dispatcher = getServletContext().getRequestDispatcher ( \"/creat_date.jsp\" ) ;\n\n        dispatcher.forward ( request, response ) ;\n    }\n    }catch (ClassNotFoundException e1) {\n        // TODO Auto-generated catch block\n        e1.printStackTrace();\n    } catch (SQLException e1) {\n        // TODO Auto-generated catch block\n        e1.printStackTrace();\n    }\n    }\n}\n</code></pre>\n\n<p>and Meeting.java is </p>\n\n<pre><code>package classes;\n\nimport java.sql.Connection;\n\nimport java.sql.Date;\n\nimport java.sql.DriverManager;\n\nimport java.sql.ResultSet;\n\nimport java.sql.SQLException;\n\nimport java.sql.Time;\n\nimport java.sql.Statement;\n\npublic class meeting {\n\n    private int meeting_id;\n    Connection con=null;\n    Statement smt = null;\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n\n    }\n    public meeting()throws ClassNotFoundException//construtor\n        , SQLException{\n            //  try{\n            String url = \"jdbc:mysql://localhost/meeting_planner\";\n            Class.forName(\"com.mysql.jdbc.Driver\");\n            con = DriverManager.getConnection(url, \"admin\", \"admin\");\n\n            smt = con.createStatement();\n\n            //}catch(ClassNotFoundException e1){\n            //e1.printStackTrace();\n        }\n        public void addmeeting(int meeting_id1)throws ClassNotFoundException  // from attribute web.xml\n            , SQLException{\n                System.out.println(\"------TRY INSERTION------\"); \n\n\n                String query = \"SELECT meeting_Id FROM meeting\";\n                ResultSet rs = smt.executeQuery(query);\n                int numCols = rs.getMetaData().getColumnCount()+1;\n                //  STAFF_ID=numCols+1;\n\n                String query1 = \"INSERT INTO Meeting VALUE ( \"+meeting_id+\")\";\n                System.out.println(query1); \n                smt.executeUpdate(query1);\n\n            }\n        }\n</code></pre>\n\n<p>the name of Next button is \"next\"\nwhen i print the value of <code>next</code> in this line <code>System.out.println(\"next\"+next);</code>\nit print null for next parameter </p>\n\n<p>** EDIT: The problem with NullPointerException was resolved, but now a NumberFormatException is thrown **</p>\n\n<p>Console is like this </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>start\n\nreached controller\n\ninside if\n\n111  sadia   sadia\n\n111  sadia   sadia\n\nSELECT AId,Password FROM administrator\n\nstart\n\nreached controller\n\nOct 29, 2014 6:44:57 PM org.apache.catalina.core.StandardWrapperValve invoke\n\nSEVERE: Servlet.service() for servlet [classes.MainController] in context with path [/Meeting1] threw \n\nexception\n\njava.lang.NumberFormatException: null\n\n    at java.lang.Integer.parseInt(Unknown Source)\n\n    at java.lang.Integer.parseInt(Unknown Source)\n\n    at classes.MainController.doPost(MainController.java:141)\n\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\n\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\n\n    at \n\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\n\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\n\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\n\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\n\n    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:953)\n\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\n\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1023)\n\n    at \n\norg.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)\n\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)\n\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n\n    at java.lang.Thread.run(Unknown Source)\n</code></pre>\n\n<p>The index.jsp is </p>\n\n<pre><code>&lt;form method = \"post\" name=\"create\" action=\"MainController\"&gt;\n\n                                    &lt;label for=\"author\"&gt;Enter id: &lt;/label&gt; &lt;input type=\"text\"\n                                        id=\"AId\" name=\"AId\" required=\"required\" /&gt;\n                                    &lt;div class=\"cleaner_h10\"&gt;&lt;/div&gt;\n                                    &lt;label for=\"author\"&gt;Enter_password: &lt;/label&gt;&lt;input\n                                        type=\"password\" name=\"Password\" required=\"required\" /&gt;\n                                    &lt;div class=\"cleaner_h10\"&gt;&lt;/div&gt;\n                                    &lt;br&gt;  &lt;input type=\"submit\"\n                                            name=\"button\" \" value=\"login\"\n                                            style=\"height: 30px; width: 70px\"&gt;&lt;/a&gt;\n                                             &lt;/input&gt;\n\n                                &lt;/form&gt;\n</code></pre>\n\n<p>The meeting_Id.jsp is </p>\n\n<pre><code>&lt;form method=\"post\" name=\"create\" action=\"MainController\"&gt;\n\n                    &lt;label for=\"author\"&gt;Enter Meeting Id:&lt;/label&gt; &lt;input type=\"text\" id=\"meeting_id\" name=\"mid\" required=\"required\" /&gt;\n                    &lt;div class=\"cleaner_h10\"&gt;&lt;/div&gt;\n\n\n                    &lt;div class=\"cleaner_h10\"&gt;&lt;/div&gt;&lt;br&gt;\n\n            &lt;input type=\"submit\" name=\"cancelbutton\" value=\"Cancel\" style=\"height:30px; width:70px\"&gt;\n            &lt;/input&gt;\n            &lt;input type=\"submit\" name=\"button\" value=\"Next\" style=\"height:30px; width:70px\"&gt;\n            &lt;/input&gt;\n                &lt;/form&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","oauth-2.0"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":2,"creation_date":1642244507,"post_id":70720182,"comment_id":125022558,"body_markdown":"resource server, your application can accept tokens. While client, your server is a client calling someone else to get a token and then consume other services. So yeah you got it right","body":"resource server, your application can accept tokens. While client, your server is a client calling someone else to get a token and then consume other services. So yeah you got it right"},{"owner":{"account_id":10968388,"reputation":34405,"user_id":8059459,"accept_rate":90,"display_name":"Willem van der Veen"},"score":0,"creation_date":1642244901,"post_id":70720182,"comment_id":125022638,"body_markdown":"@Toerktumlare So if I want to implement google login on the frontend to access certain resources on the backend I do the following:\n\npass the token from the frontend to my resource server &gt;&gt; \nVerify the token on the resource server &gt;&gt; give back resource right?","body":"@Toerktumlare So if I want to implement google login on the frontend to access certain resources on the backend I do the following:  pass the token from the frontend to my resource server &gt;&gt;  Verify the token on the resource server &gt;&gt; give back resource right?"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1642263722,"post_id":70720182,"comment_id":125026808,"body_markdown":"i dont understand when you say google &quot;login on the frontend&quot; google login is implemented in the backend https://github.com/spring-projects/spring-security/tree/5.2.1.RELEASE/samples/boot/oauth2login#google-login","body":"i dont understand when you say google &quot;login on the frontend&quot; google login is implemented in the backend <a href=\"https://github.com/spring-projects/spring-security/tree/5.2.1.RELEASE/samples/boot/oauth2login#google-login\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-security/tree/5.2.1.RELEAS&zwnj;&#8203;E/&hellip;</a>"},{"owner":{"account_id":21488921,"reputation":4730,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":0,"creation_date":1642356468,"post_id":70720182,"comment_id":125043766,"body_markdown":"This is a good ol&#39; fashioned &quot;read the docs&quot; question. Always check out the [spring.io project page](https://spring.io/projects/spring-security#learn) for links to the latest docs. See Client and Resource Server sections on the [OAuth2 page](https://docs.spring.io/spring-security/reference/servlet/oauth2/index.html).","body":"This is a good ol&#39; fashioned &quot;read the docs&quot; question. Always check out the <a href=\"https://spring.io/projects/spring-security#learn\" rel=\"nofollow noreferrer\">spring.io project page</a> for links to the latest docs. See Client and Resource Server sections on the <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/index.html\" rel=\"nofollow noreferrer\">OAuth2 page</a>."}],"answers":[{"tags":[],"owner":{"account_id":3619499,"reputation":5613,"user_id":3018627,"display_name":"Subarata Talukder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700531489,"creation_date":1669822596,"answer_id":74630368,"question_id":70720182,"body_markdown":"Let&#39;s understand everything through a diagram:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n&gt; **OAuth2 defines few roles:**\r\n\r\n**Client:** The client (REST API client) is the system that access the protected resources from ***Resource server***. To access resources from the ***Resource server***, the Client must hold the appropriate Access Token.\r\n\r\nClient uses this maven dependency:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n    &lt;version&gt;2.7.6&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n**Resource Server:** This Server is an application that protects resources via OAuth tokens. The job of the ***Resource server*** is to validate the token before serving a resource to the client.\r\n\r\nResource server uses this maven dependency:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\r\n    &lt;version&gt;2.7.6&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n**Authorization Server:** This Server receives requests from the Client for Access Tokens and issues them upon successful authentication. The service acting as a middleman between client and resource owner.\r\n\r\nAuthorization server uses this maven dependency:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-security-oauth2-authorization-server&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/Bv1yC.png","title":"Spring boot auth2 dependencies &gt;&gt; differences between spring-boot-starter-oauth2-client and spring-boot-starter-oauth2-resource-server","body":"<p>Let's understand everything through a diagram:</p>\n<p><a href=\"https://i.stack.imgur.com/Bv1yC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Bv1yC.png\" alt=\"enter image description here\" /></a></p>\n<blockquote>\n<p><strong>OAuth2 defines few roles:</strong></p>\n</blockquote>\n<p><strong>Client:</strong> The client (REST API client) is the system that access the protected resources from <em><strong>Resource server</strong></em>. To access resources from the <em><strong>Resource server</strong></em>, the Client must hold the appropriate Access Token.</p>\n<p>Client uses this maven dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n    &lt;version&gt;2.7.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Resource Server:</strong> This Server is an application that protects resources via OAuth tokens. The job of the <em><strong>Resource server</strong></em> is to validate the token before serving a resource to the client.</p>\n<p>Resource server uses this maven dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n    &lt;version&gt;2.7.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Authorization Server:</strong> This Server receives requests from the Client for Access Tokens and issues them upon successful authentication. The service acting as a middleman between client and resource owner.</p>\n<p>Authorization server uses this maven dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-oauth2-authorization-server&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":10968388,"reputation":34405,"user_id":8059459,"accept_rate":90,"display_name":"Willem van der Veen"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":759,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74630368,"answer_count":1,"score":0,"last_activity_date":1700531489,"creation_date":1642238220,"question_id":70720182,"body_markdown":"What is the difference between the following 2 dependencies and when to use which?\r\n\r\n      #maven pom.xml format deps:\r\n \r\n       &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\nFrom what I researched you should use:\r\n\r\n**resource-server:** When a client app is already verified via the authorization server. The client then sends the token in an authorization header to our spring boot server. The token then gets verified on the server and access is granted to server resources.\r\n\r\n**client**: The spring boot app is the client now and will make a request to an authorization server from which it gets a token. This token can now be used in additional request to other resource servers to obtain certain resources.\r\n\r\nIs my understanding correct. Am I missing any details?","title":"Spring boot auth2 dependencies &gt;&gt; differences between spring-boot-starter-oauth2-client and spring-boot-starter-oauth2-resource-server","body":"<p>What is the difference between the following 2 dependencies and when to use which?</p>\n<pre><code>  #maven pom.xml format deps:\n\n   &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>From what I researched you should use:</p>\n<p><strong>resource-server:</strong> When a client app is already verified via the authorization server. The client then sends the token in an authorization header to our spring boot server. The token then gets verified on the server and access is granted to server resources.</p>\n<p><strong>client</strong>: The spring boot app is the client now and will make a request to an authorization server from which it gets a token. This token can now be used in additional request to other resource servers to obtain certain resources.</p>\n<p>Is my understanding correct. Am I missing any details?</p>\n"},{"tags":["java","swing","jtable"],"comments":[{"owner":{"account_id":87845,"reputation":15821,"user_id":243373,"accept_rate":100,"display_name":"TT."},"score":0,"creation_date":1700487377,"post_id":77513765,"comment_id":136656965,"body_markdown":"Consider posting a [SSCCE](http://www.sscce.org/) instead of several excerpts of your code. If your excerpts showed the problem you have, someone would have told you about it already.","body":"Consider posting a <a href=\"http://www.sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a> instead of several excerpts of your code. If your excerpts showed the problem you have, someone would have told you about it already."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1700493724,"post_id":77513765,"comment_id":136658176,"body_markdown":"Not sure what you are attempting to do. It looks like you attempted to modify the code from the Swing tutorial on &quot;How to Use Tables&quot;, but are doing it incorrectly. You say the data is String but you attempt to treat it as Integer. Very confusing. Don&#39;t know why you added code to the setValueAt(...) method. That method is used to update the model. The code from the tutorial works fine. The code you added doesn&#39;t update the model. Post a proper [mre].","body":"Not sure what you are attempting to do. It looks like you attempted to modify the code from the Swing tutorial on &quot;How to Use Tables&quot;, but are doing it incorrectly. You say the data is String but you attempt to treat it as Integer. Very confusing. Don&#39;t know why you added code to the setValueAt(...) method. That method is used to update the model. The code from the tutorial works fine. The code you added doesn&#39;t update the model. Post a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":18626515,"reputation":33,"user_id":13575501,"display_name":"MartinH"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700531339,"creation_date":1700459761,"question_id":77513765,"body_markdown":"I&#39;m using a JTable and I only want columns 0 and 3 to be editable. Column 0 works fine, but when I go to edit column 3, it returns true that it is editable, but does not allow me to enter new text or fire setValueAt(...).\r\n\r\nI do have some click events, which I remarked out and using a custom renderer, which I disabled, but nothing seems to help. What else should I look at for a problem? It&#39;s not throwing any errors.\r\n\r\nDo I need to set a cell editor? I&#39;ve tried some examples I&#39;ve found but none seem to work properly. Column 0 is a boolean (checkbox, which works fine) and the rest are strings.\r\n\r\n    public boolean isCellEditable(int row, int col) {\r\n            //Note that the data/cell address is constant,\r\n            //no matter where the cell appears onscreen.\r\n            if (col == 0) {\r\n                return true;\r\n            }else if(col == 3) {\r\n            \treturn true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        \r\n       \r\n        /*\r\n         * Don&#39;t need to implement this method unless your table&#39;s\r\n         * data can change.\r\n         */\r\n        public void setValueAt(Object value, int row, int col) {\r\n            if (DEBUG) {\r\n                System.out.println(&quot;Setting value at &quot; + row + &quot;,&quot; + col\r\n                                   + &quot; to &quot; + value\r\n                                   + &quot; (an instance of &quot;\r\n                                   + value.getClass() + &quot;)&quot;);\r\n            }\r\n \r\n            data[row][col] = value;            \r\n            fireTableCellUpdated(row, col);\r\n            int ch;\r\n\t\t\tint dab;\r\n\t\t\ttry {\r\n\t\t\t\tif (col == 0) {\r\n\t\t\t\t\tch = Integer.valueOf(String.valueOf(data[row][1]));\r\n\t\t\t\t\tdab = Integer.valueOf(String.valueOf(data[row][2]))-1;\r\n\t\t\t\t\tplot.dab[ch].get(dab).visible = (boolean) value;\r\n\t\t\t\t}\r\n\t\t\t\tif (col == 3) {\r\n\t\t\t\t\tch = Integer.valueOf(String.valueOf(data[row][1]));\r\n\t\t\t\t\tdab = Integer.valueOf(String.valueOf(data[row][2]))-1;\r\n\t\t\t\t\tplot.dab[ch].get(dab).desc = String.valueOf(value);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tplot.repaintCall();\r\n\t\t\t} catch (NumberFormatException e) {e.printStackTrace();}\r\n          //  System.out.println(ch + &quot;   &quot; + dab);\r\n            if (DEBUG) {\r\n                System.out.println(&quot;New value of data:&quot;);\r\n                printDebugData();\r\n            }\r\n        }\r\n\r\n ","title":"JTable cell not editing","body":"<p>I'm using a JTable and I only want columns 0 and 3 to be editable. Column 0 works fine, but when I go to edit column 3, it returns true that it is editable, but does not allow me to enter new text or fire setValueAt(...).</p>\n<p>I do have some click events, which I remarked out and using a custom renderer, which I disabled, but nothing seems to help. What else should I look at for a problem? It's not throwing any errors.</p>\n<p>Do I need to set a cell editor? I've tried some examples I've found but none seem to work properly. Column 0 is a boolean (checkbox, which works fine) and the rest are strings.</p>\n<pre><code>public boolean isCellEditable(int row, int col) {\n        //Note that the data/cell address is constant,\n        //no matter where the cell appears onscreen.\n        if (col == 0) {\n            return true;\n        }else if(col == 3) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n    \n   \n    /*\n     * Don't need to implement this method unless your table's\n     * data can change.\n     */\n    public void setValueAt(Object value, int row, int col) {\n        if (DEBUG) {\n            System.out.println(&quot;Setting value at &quot; + row + &quot;,&quot; + col\n                               + &quot; to &quot; + value\n                               + &quot; (an instance of &quot;\n                               + value.getClass() + &quot;)&quot;);\n        }\n\n        data[row][col] = value;            \n        fireTableCellUpdated(row, col);\n        int ch;\n        int dab;\n        try {\n            if (col == 0) {\n                ch = Integer.valueOf(String.valueOf(data[row][1]));\n                dab = Integer.valueOf(String.valueOf(data[row][2]))-1;\n                plot.dab[ch].get(dab).visible = (boolean) value;\n            }\n            if (col == 3) {\n                ch = Integer.valueOf(String.valueOf(data[row][1]));\n                dab = Integer.valueOf(String.valueOf(data[row][2]))-1;\n                plot.dab[ch].get(dab).desc = String.valueOf(value);\n                \n            }\n            plot.repaintCall();\n        } catch (NumberFormatException e) {e.printStackTrace();}\n      //  System.out.println(ch + &quot;   &quot; + dab);\n        if (DEBUG) {\n            System.out.println(&quot;New value of data:&quot;);\n            printDebugData();\n        }\n    }\n</code></pre>\n"},{"tags":["java","android","gps","geolocation","android-location"],"comments":[{"owner":{"account_id":2156757,"reputation":1031,"user_id":1911784,"display_name":"OMAK"},"score":0,"creation_date":1373539162,"post_id":17591147,"comment_id":25599262,"body_markdown":"check this http://developer.android.com/training/location/retrieve-current.html","body":"check this <a href=\"http://developer.android.com/training/location/retrieve-current.html\" rel=\"nofollow noreferrer\">developer.android.com/training/location/retrieve-current.htm&zwnj;&#8203;l</a>"},{"owner":{"account_id":32385,"reputation":31109,"user_id":89818,"accept_rate":96,"display_name":"caw"},"score":3,"creation_date":1425507602,"post_id":17591147,"comment_id":45997279,"body_markdown":"The easist way is to use a higher-level library like this: https://github.com/delight-im/Android-SimpleLocation","body":"The easist way is to use a higher-level library like this: <a href=\"https://github.com/delight-im/Android-SimpleLocation\" rel=\"nofollow noreferrer\">github.com/delight-im/Android-SimpleLocation</a>"},{"owner":{"account_id":5843227,"reputation":755,"user_id":4604095,"accept_rate":80,"display_name":"Gagan"},"score":0,"creation_date":1457593872,"post_id":17591147,"comment_id":59478884,"body_markdown":"there is an easy lib to do so......very easy to implement ..have a look https://github.com/Gaganjdeep/GetMyLocationLIbrary.git  OR http://shortcutsandroid.blogspot.in/2016/03/get-current-location-in-activity-in.html","body":"there is an easy lib to do so......very easy to implement ..have a look <a href=\"https://github.com/Gaganjdeep/GetMyLocationLIbrary.git\" rel=\"nofollow noreferrer\">github.com/Gaganjdeep/GetMyLocationLIbrary.git</a>  OR <a href=\"http://shortcutsandroid.blogspot.in/2016/03/get-current-location-in-activity-in.html\" rel=\"nofollow noreferrer\">shortcutsandroid.blogspot.in/2016/03/&hellip;</a>"},{"owner":{"account_id":3191067,"reputation":4077,"user_id":2695282,"accept_rate":71,"display_name":"Syed Raza Mehdi"},"score":1,"creation_date":1470920401,"post_id":17591147,"comment_id":65153080,"body_markdown":"check this out, it is nice and easy https://github.com/meetmehdi/GetAccurateLocation","body":"check this out, it is nice and easy <a href=\"https://github.com/meetmehdi/GetAccurateLocation\" rel=\"nofollow noreferrer\">github.com/meetmehdi/GetAccurateLocation</a>"},{"owner":{"account_id":8075635,"reputation":2057,"user_id":6086782,"display_name":"varun"},"score":0,"creation_date":1563455282,"post_id":17591147,"comment_id":100711765,"body_markdown":"@caw Thanks for the direction, now there&#39;s no need to reinvent those methods!  :)","body":"@caw Thanks for the direction, now there&#39;s no need to reinvent those methods!  :)"}],"answers":[{"tags":[],"owner":{"account_id":1081569,"reputation":5334,"user_id":1078427,"accept_rate":38,"display_name":"Lukas Olsen"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1416512150,"creation_date":1373539116,"answer_id":17591218,"question_id":17591147,"body_markdown":"You need to write code in the **OnLocationChanged** method, because *this method is called when the location has changed*. I.e. you need to save the new location to return it if getLocation is called.\r\n\r\nIf you don&#39;t use the *onLocationChanged* it always will be the old location.","title":"How to get current location in Android","body":"<p>You need to write code in the <strong>OnLocationChanged</strong> method, because <em>this method is called when the location has changed</em>. I.e. you need to save the new location to return it if getLocation is called.</p>\n\n<p>If you don't use the <em>onLocationChanged</em> it always will be the old location.</p>\n"},{"comments":[{"owner":{"account_id":3071530,"reputation":1992,"user_id":2602071,"display_name":"TechArcSri"},"score":31,"creation_date":1403087829,"post_id":17591374,"comment_id":37520788,"body_markdown":"what is GPSTracker here?","body":"what is GPSTracker here?"},{"owner":{"account_id":985908,"reputation":23340,"user_id":1325646,"accept_rate":64,"display_name":"pomber"},"score":60,"creation_date":1407247798,"post_id":17591374,"comment_id":39134281,"body_markdown":"flip the if pleassse","body":"flip the if pleassse"},{"owner":{"account_id":940429,"reputation":3071,"user_id":968589,"accept_rate":80,"display_name":"drulabs"},"score":1,"creation_date":1415109988,"post_id":17591374,"comment_id":42060278,"body_markdown":"what is the advantage of flipping the &quot;if&quot;?","body":"what is the advantage of flipping the &quot;if&quot;?"},{"owner":{"account_id":408586,"reputation":5227,"user_id":779348,"accept_rate":82,"display_name":"Sap"},"score":10,"creation_date":1418496082,"post_id":17591374,"comment_id":43360938,"body_markdown":"@KKD it&#39;s clearer to read and it&#39;s not a negative check. `if(canGetLocation()){}` sounds much better, doesn&#39;t it","body":"@KKD it&#39;s clearer to read and it&#39;s not a negative check. <code>if(canGetLocation()){}</code> sounds much better, doesn&#39;t it"},{"owner":{"account_id":3058352,"reputation":2385,"user_id":2591556,"accept_rate":86,"display_name":"VipulKumar"},"score":4,"creation_date":1427263152,"post_id":17591374,"comment_id":46701510,"body_markdown":"Never us &quot;true/false&quot; in if statements. If implicitly mean &quot;if it&#39;s true or false&quot;.","body":"Never us &quot;true/false&quot; in if statements. If implicitly mean &quot;if it&#39;s true or false&quot;."},{"owner":{"account_id":181580,"reputation":2202,"user_id":415673,"display_name":"fangzhzh"},"score":2,"creation_date":1475722468,"post_id":17591374,"comment_id":67060002,"body_markdown":"@VipulKumar Hi I came cross your answer and I felt that your answer is like paradox. It seems &quot;never use true/false in if statement&quot; is not correct, but still you get two upvotes. I know this answer is one year ago, but can you elaborate the answer in detail? Did I miss something about how to use if? Thanks","body":"@VipulKumar Hi I came cross your answer and I felt that your answer is like paradox. It seems &quot;never use true/false in if statement&quot; is not correct, but still you get two upvotes. I know this answer is one year ago, but can you elaborate the answer in detail? Did I miss something about how to use if? Thanks"},{"owner":{"account_id":3058352,"reputation":2385,"user_id":2591556,"accept_rate":86,"display_name":"VipulKumar"},"score":1,"creation_date":1475741314,"post_id":17591374,"comment_id":67067374,"body_markdown":"Hi @fangzhzh, The statement was `tracker.canGetLocation() == false` when I commented. See edit history. It was edited to `!tracker.canGetLocation()`, which is the right way to do it. You should use NOT operator rather than using &quot;false&quot;.","body":"Hi @fangzhzh, The statement was <code>tracker.canGetLocation() == false</code> when I commented. See edit history. It was edited to <code>!tracker.canGetLocation()</code>, which is the right way to do it. You should use NOT operator rather than using &quot;false&quot;."},{"owner":{"account_id":8287644,"reputation":251,"user_id":6230313,"accept_rate":42,"display_name":"techDigi"},"score":0,"creation_date":1485949999,"post_id":17591374,"comment_id":71135768,"body_markdown":"can u tell me how can i implement the onLocationChanged in your code and further use there values","body":"can u tell me how can i implement the onLocationChanged in your code and further use there values"}],"tags":[],"owner":{"account_id":3027761,"reputation":2498,"user_id":2567383,"display_name":"fhamicode"},"comment_count":8,"down_vote_count":14,"up_vote_count":19,"is_accepted":false,"score":5,"last_activity_date":1700531145,"creation_date":1373539643,"answer_id":17591374,"question_id":17591147,"body_markdown":"I&#39;m using [this tutorial][1] and it works nicely for my application.\r\n\r\nIn my activity I put this code:\r\n\r\n    GPSTracker tracker = new GPSTracker(this);\r\n\tif (tracker.canGetLocation()) {\r\n        latitude = tracker.getLatitude();\r\n\t\tlongitude = tracker.getLongitude();\r\n\t} else {\r\n\t\ttracker.showSettingsAlert();\r\n\t}\r\n\r\nalso check if your emulator runs with Google API\r\n\r\n\r\n  [1]: https://www.androidhive.info/2015/02/android-location-api-using-google-play-services/","title":"How to get current location in Android","body":"<p>I'm using <a href=\"https://www.androidhive.info/2015/02/android-location-api-using-google-play-services/\" rel=\"nofollow noreferrer\">this tutorial</a> and it works nicely for my application.</p>\n<p>In my activity I put this code:</p>\n<pre><code>GPSTracker tracker = new GPSTracker(this);\nif (tracker.canGetLocation()) {\n    latitude = tracker.getLatitude();\n    longitude = tracker.getLongitude();\n} else {\n    tracker.showSettingsAlert();\n}\n</code></pre>\n<p>also check if your emulator runs with Google API</p>\n"},{"comments":[{"owner":{"account_id":3033610,"reputation":1781,"user_id":2572161,"accept_rate":75,"display_name":"Boris Pawlowski"},"score":0,"creation_date":1373542445,"post_id":17591377,"comment_id":25601158,"body_markdown":"Acctualy GPS possitioning works fine, but NETWORK positioning dosn&#39;t.\nWhen Ive turned devices GPS on cordinates keep changing while im moving, but dosnt happence same when I have turn it off","body":"Acctualy GPS possitioning works fine, but NETWORK positioning dosn&#39;t. When Ive turned devices GPS on cordinates keep changing while im moving, but dosnt happence same when I have turn it off"},{"owner":{"account_id":475270,"reputation":4759,"user_id":1053731,"accept_rate":86,"display_name":"Axxiss"},"score":9,"creation_date":1373542752,"post_id":17591377,"comment_id":25601355,"body_markdown":"Keep in mind that, the precision between GPS and NETWORK based location is really big. Yesterday I was testing in it, while moving on the bus, the GPS gave an accuracy of 3-5 meters and the NETWORK like 1Km. So get in a bus/car and and see the difference between those two.","body":"Keep in mind that, the precision between GPS and NETWORK based location is really big. Yesterday I was testing in it, while moving on the bus, the GPS gave an accuracy of 3-5 meters and the NETWORK like 1Km. So get in a bus/car and and see the difference between those two."},{"owner":{"account_id":3450594,"reputation":1578,"user_id":2890374,"accept_rate":62,"display_name":"Amitsharma"},"score":14,"creation_date":1392363637,"post_id":17591377,"comment_id":32939860,"body_markdown":"@Axxiss how u get LOCATION_REFRESH_TIME,\n            LOCATION_REFRESH_DISTANCE, mLocationListener);","body":"@Axxiss how u get LOCATION_REFRESH_TIME,             LOCATION_REFRESH_DISTANCE, mLocationListener);"},{"owner":{"account_id":475270,"reputation":4759,"user_id":1053731,"accept_rate":86,"display_name":"Axxiss"},"score":2,"creation_date":1392375407,"post_id":17591377,"comment_id":32946509,"body_markdown":"@amitsharma those are two constant defined by me. Here you can check the documentation http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates(long, float,android.location.Criteria, android.app.PendingIntent)","body":"@amitsharma those are two constant defined by me. Here you can check the documentation <a href=\"http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates(long\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/location/&hellip;</a>, float,android.location.Criteria, android.app.PendingIntent)"},{"owner":{"account_id":3450594,"reputation":1578,"user_id":2890374,"accept_rate":62,"display_name":"Amitsharma"},"score":0,"creation_date":1392375976,"post_id":17591377,"comment_id":32946855,"body_markdown":"@Axxiss u have tell me before i have dun ,but i have get help from your code thank&#39;s Axxiss","body":"@Axxiss u have tell me before i have dun ,but i have get help from your code thank&#39;s Axxiss"},{"owner":{"account_id":8802140,"reputation":1380,"user_id":6577892,"display_name":"Subhan Ali"},"score":1,"creation_date":1501066189,"post_id":17591377,"comment_id":77611101,"body_markdown":"@Axxiss nice answer :)","body":"@Axxiss nice answer :)"},{"owner":{"account_id":8960180,"reputation":6051,"user_id":6683139,"accept_rate":85,"display_name":"Ege Kuzubasioglu"},"score":4,"creation_date":1512989267,"post_id":17591377,"comment_id":82462547,"body_markdown":"You may also need\n\n`@Override public void onStatusChanged(String provider, int status, Bundle extras) {\n\n    }\n\n    @Override public void onProviderEnabled(String provider) {\n\n    }\n\n    @Override public void onProviderDisabled(String provider) {\n\n    }`","body":"You may also need  <code>@Override public void onStatusChanged(String provider, int status, Bundle extras) {      }      @Override public void onProviderEnabled(String provider) {      }      @Override public void onProviderDisabled(String provider) {      }</code>"},{"owner":{"account_id":445336,"reputation":9179,"user_id":837722,"accept_rate":87,"display_name":"Si8"},"score":0,"creation_date":1537445225,"post_id":17591377,"comment_id":91792314,"body_markdown":"What is the difference between network vs gps... which is more accurate? Thanks","body":"What is the difference between network vs gps... which is more accurate? Thanks"},{"owner":{"account_id":7406306,"reputation":340,"user_id":5635144,"accept_rate":0,"display_name":"naturesenshi"},"score":0,"creation_date":1557235403,"post_id":17591377,"comment_id":98690938,"body_markdown":"God bless your soul @Axxiss","body":"God bless your soul @Axxiss"},{"owner":{"account_id":7252464,"reputation":379,"user_id":5532217,"accept_rate":57,"display_name":"sshanzel"},"score":0,"creation_date":1585477547,"post_id":17591377,"comment_id":107767198,"body_markdown":"Will this work while in the background?","body":"Will this work while in the background?"},{"owner":{"display_name":"user15260712"},"score":0,"creation_date":1626146035,"post_id":17591377,"comment_id":120808369,"body_markdown":"how to set accuracy like `PRIORITY_HIGH_ACCURACY`","body":"how to set accuracy like <code>PRIORITY_HIGH_ACCURACY</code>"}],"tags":[],"owner":{"account_id":475270,"reputation":4759,"user_id":1053731,"accept_rate":86,"display_name":"Axxiss"},"comment_count":11,"down_vote_count":4,"up_vote_count":184,"is_accepted":true,"score":180,"last_activity_date":1642261349,"creation_date":1373539654,"answer_id":17591377,"question_id":17591147,"body_markdown":"First you need to define a `LocationListener` to handle location changes.\r\n\r\n    int LOCATION_REFRESH_TIME = 15000; // 15 seconds to update\r\n    int LOCATION_REFRESH_DISTANCE = 500; // 500 meters to update\r\n....\r\n\r\n\r\n    private final LocationListener mLocationListener = new LocationListener() {\r\n        @Override\r\n        public void onLocationChanged(final Location location) {\r\n            //your code here\r\n        }\r\n    };\r\n\r\n\r\nThen get the `LocationManager` and ask for location updates\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n    \r\n        mLocationManager = (LocationManager) getSystemService(LOCATION_SERVICE);\r\n\r\n        mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, LOCATION_REFRESH_TIME,\r\n                LOCATION_REFRESH_DISTANCE, mLocationListener);\r\n    }\r\n\r\n\r\nAnd finally make sure that you have added the permission on the Manifest, \r\n\r\nFor using only network based location use this one\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot;/&gt;\r\n\r\nFor GPS based location, this one\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;\r\n","title":"How to get current location in Android","body":"<p>First you need to define a <code>LocationListener</code> to handle location changes.</p>\n<pre><code>int LOCATION_REFRESH_TIME = 15000; // 15 seconds to update\nint LOCATION_REFRESH_DISTANCE = 500; // 500 meters to update\n</code></pre>\n<p>....</p>\n<pre><code>private final LocationListener mLocationListener = new LocationListener() {\n    @Override\n    public void onLocationChanged(final Location location) {\n        //your code here\n    }\n};\n</code></pre>\n<p>Then get the <code>LocationManager</code> and ask for location updates</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    mLocationManager = (LocationManager) getSystemService(LOCATION_SERVICE);\n\n    mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, LOCATION_REFRESH_TIME,\n            LOCATION_REFRESH_DISTANCE, mLocationListener);\n}\n</code></pre>\n<p>And finally make sure that you have added the permission on the Manifest,</p>\n<p>For using only network based location use this one</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot;/&gt;\n</code></pre>\n<p>For GPS based location, this one</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":3033610,"reputation":1781,"user_id":2572161,"accept_rate":75,"display_name":"Boris Pawlowski"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":583886,"favorite_count":0,"down_vote_count":0,"up_vote_count":132,"closed_date":1373641320,"accepted_answer_id":17591377,"answer_count":3,"score":132,"last_activity_date":1700531145,"creation_date":1373538887,"question_id":17591147,"body_markdown":"I&#39;m having troubles of getting my current position coordinates using the NETWORK provider of android location system. \r\n\r\nAlready read a lot of tutorials and implemented 4 or 5 existing classes to my project and all of them are giving me the last coordinates but not the current ones.\r\n\r\nI&#39;m pretty sure that the problem is something fundamental that I am missing but I am not able to understand what exactly it is. \r\n\r\n\r\n**Codes I&#39;m using now:**\r\n\r\n**This is my main Activity** \r\n\r\n    package com.example.locationtests;\r\n\r\n    import android.os.Bundle;\r\n    import android.app.Activity;\r\n    import android.view.Menu;\r\n    import android.widget.TextView;\r\n\r\n    public class MainActivity extends Activity {\r\n\r\n\t@Override\r\n\tprotected void onCreate(Bundle savedInstanceState) {\r\n\t\tsuper.onCreate(savedInstanceState);\r\n\t\tsetContentView(R.layout.activity_main);\r\n\t\tGPSTracker mGPS = new GPSTracker(this);\r\n\t\t\r\n\t\tTextView text = (TextView) findViewById(R.id.texts);\r\n\t\tif(mGPS.canGetLocation ){\r\n\t\tmGPS.getLocation();\r\n\t\ttext.setText(&quot;Lat&quot;+mGPS.getLatitude()+&quot;Lon&quot;+mGPS.getLongitude());\r\n\t\t}else{\r\n\t\t\ttext.setText(&quot;Unabletofind&quot;);\r\n\t\t\tSystem.out.println(&quot;Unable&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean onCreateOptionsMenu(Menu menu) {\r\n\t\t// Inflate the menu; this adds items to the action bar if it is present.\r\n\t\tgetMenuInflater().inflate(R.menu.main, menu);\r\n\t\treturn true;\r\n\t}\r\n\r\n    }\r\n\r\n**This is the class I&#39;m using for Tracking:**\r\n\r\n\r\n    package com.example.locationtests;\r\n    \r\n    import android.app.AlertDialog;\r\n    import android.content.Context;\r\n    import android.content.DialogInterface;\r\n    import android.content.Intent;\r\n    import android.location.Location;\r\n    import android.location.LocationListener;\r\n    import android.location.LocationManager;\r\n    import android.os.Bundle;\r\n    import android.provider.Settings;\r\n    import android.util.Log;\r\n    \r\n    public final class GPSTracker implements LocationListener {\r\n    \r\n    \tprivate final Context mContext;\r\n    \r\n    \t// flag for GPS status\r\n    \tpublic boolean isGPSEnabled = false;\r\n    \r\n    \t// flag for network status\r\n    \tboolean isNetworkEnabled = false;\r\n    \r\n    \t// flag for GPS status\r\n    \tboolean canGetLocation = false;\r\n    \r\n    \tLocation location; // location\r\n    \tdouble latitude; // latitude\r\n    \tdouble longitude; // longitude\r\n    \r\n    \t// The minimum distance to change Updates in meters\r\n    \tprivate static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 1; // 10 meters\r\n    \r\n    \t// The minimum time between updates in milliseconds\r\n    \tprivate static final long MIN_TIME_BW_UPDATES = 1; // 1 minute\r\n    \r\n    \t// Declaring a Location Manager\r\n    \tprotected LocationManager locationManager;\r\n    \r\n    \tpublic GPSTracker(Context context) {\r\n    \t\tthis.mContext = context;\r\n    \t\tgetLocation();\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Function to get the user&#39;s current location\r\n    \t * \r\n    \t * @return\r\n    \t */\r\n    \tpublic Location getLocation() {\r\n    \t\ttry {\r\n    \t\t\tlocationManager = (LocationManager) mContext\r\n    \t\t\t\t\t.getSystemService(Context.LOCATION_SERVICE);\r\n    \r\n    \t\t\t// getting GPS status\r\n    \t\t\tisGPSEnabled = locationManager\r\n    \t\t\t\t\t.isProviderEnabled(LocationManager.GPS_PROVIDER);\r\n    \r\n    \t\t\tLog.v(&quot;isGPSEnabled&quot;, &quot;=&quot; + isGPSEnabled);\r\n    \r\n    \t\t\t// getting network status\r\n    \t\t\tisNetworkEnabled = locationManager\r\n    \t\t\t\t\t.isProviderEnabled(LocationManager.NETWORK_PROVIDER);\r\n    \r\n    \t\t\tLog.v(&quot;isNetworkEnabled&quot;, &quot;=&quot; + isNetworkEnabled);\r\n    \r\n    \t\t\tif (isGPSEnabled == false &amp;&amp; isNetworkEnabled == false) {\r\n    \t\t\t\t// no network provider is enabled\r\n    \t\t\t} else {\r\n    \t\t\t\tthis.canGetLocation = true;\r\n    \t\t\t\tif (isNetworkEnabled) {\r\n    \t\t\t\t\tlocation=null;\r\n    \t\t\t\t\tlocationManager.requestLocationUpdates(\r\n    \t\t\t\t\t\t\tLocationManager.NETWORK_PROVIDER,\r\n    \t\t\t\t\t\t\tMIN_TIME_BW_UPDATES,\r\n    \t\t\t\t\t\t\tMIN_DISTANCE_CHANGE_FOR_UPDATES, this);\r\n    \t\t\t\t\tLog.d(&quot;Network&quot;, &quot;Network&quot;);\r\n    \t\t\t\t\tif (locationManager != null) {\r\n    \t\t\t\t\t\tlocation = locationManager\r\n    \t\t\t\t\t\t\t\t.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\r\n    \t\t\t\t\t\tif (location != null) {\r\n    \t\t\t\t\t\t\tlatitude = location.getLatitude();\r\n    \t\t\t\t\t\t\tlongitude = location.getLongitude();\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\t// if GPS Enabled get lat/long using GPS Services\r\n    \t\t\t\tif (isGPSEnabled) {\r\n    \t\t\t\t\tlocation=null;\r\n    \t\t\t\t\tif (location == null) {\r\n    \t\t\t\t\t\tlocationManager.requestLocationUpdates(\r\n    \t\t\t\t\t\t\t\tLocationManager.GPS_PROVIDER,\r\n    \t\t\t\t\t\t\t\tMIN_TIME_BW_UPDATES,\r\n    \t\t\t\t\t\t\t\tMIN_DISTANCE_CHANGE_FOR_UPDATES, this);\r\n    \t\t\t\t\t\tLog.d(&quot;GPS Enabled&quot;, &quot;GPS Enabled&quot;);\r\n    \t\t\t\t\t\tif (locationManager != null) {\r\n    \t\t\t\t\t\t\tlocation = locationManager\r\n    \t\t\t\t\t\t\t\t\t.getLastKnownLocation(LocationManager.GPS_PROVIDER);\r\n    \t\t\t\t\t\t\tif (location != null) {\r\n    \t\t\t\t\t\t\t\tlatitude = location.getLatitude();\r\n    \t\t\t\t\t\t\t\tlongitude = location.getLongitude();\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t\treturn location;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Stop using GPS listener Calling this function will stop using GPS in your\r\n    \t * app\r\n    \t * */\r\n    \tpublic void stopUsingGPS() {\r\n    \t\tif (locationManager != null) {\r\n    \t\t\tlocationManager.removeUpdates(GPSTracker.this);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Function to get latitude\r\n    \t * */\r\n    \tpublic double getLatitude() {\r\n    \t\tif (location != null) {\r\n    \t\t\tlatitude = location.getLatitude();\r\n    \t\t}\r\n    \r\n    \t\t// return latitude\r\n    \t\treturn latitude;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Function to get longitude\r\n    \t * */\r\n    \tpublic double getLongitude() {\r\n    \t\tif (location != null) {\r\n    \t\t\tlongitude = location.getLongitude();\r\n    \t\t}\r\n    \r\n    \t\t// return longitude\r\n    \t\treturn longitude;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Function to check GPS/wifi enabled\r\n    \t * \r\n    \t * @return boolean\r\n    \t * */\r\n    \tpublic boolean canGetLocation() {\r\n    \t\treturn this.canGetLocation;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Function to show settings alert dialog On pressing Settings button will\r\n    \t * lauch Settings Options\r\n    \t * */\r\n    \tpublic void showSettingsAlert() {\r\n    \t\tAlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);\r\n    \r\n    \t\t// Setting Dialog Title\r\n    \t\talertDialog.setTitle(&quot;GPS is settings&quot;);\r\n    \r\n    \t\t// Setting Dialog Message\r\n    \t\talertDialog\r\n    \t\t\t\t.setMessage(&quot;GPS is not enabled. Do you want to go to settings menu?&quot;);\r\n    \r\n    \t\t// On pressing Settings button\r\n    \t\talertDialog.setPositiveButton(&quot;Settings&quot;,\r\n    \t\t\t\tnew DialogInterface.OnClickListener() {\r\n    \t\t\t\t\tpublic void onClick(DialogInterface dialog, int which) {\r\n    \t\t\t\t\t\tIntent intent = new Intent(\r\n    \t\t\t\t\t\t\t\tSettings.ACTION_LOCATION_SOURCE_SETTINGS);\r\n    \t\t\t\t\t\tmContext.startActivity(intent);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t});\r\n    \r\n    \t\t// on pressing cancel button\r\n    \t\talertDialog.setNegativeButton(&quot;Cancel&quot;,\r\n    \t\t\t\tnew DialogInterface.OnClickListener() {\r\n    \t\t\t\t\tpublic void onClick(DialogInterface dialog, int which) {\r\n    \t\t\t\t\t\tdialog.cancel();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t});\r\n    \r\n    \t\t// Showing Alert Message\r\n    \t\talertDialog.show();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void onLocationChanged(Location location) {\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void onProviderDisabled(String provider) {\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void onProviderEnabled(String provider) {\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void onStatusChanged(String provider, int status, Bundle extras) {\r\n    \t}\r\n    \r\n    }\r\n**This is my AndroidManifest.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        package=&quot;com.example.locationtests&quot;\r\n        android:versionCode=&quot;1&quot;\r\n        android:versionName=&quot;1.0&quot; &gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n    \t&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;&gt;&lt;/uses-permission&gt;\r\n    \t&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt; \r\n    \t&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    \t&lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;\r\n        &lt;uses-feature android:name=&quot;android.hardware.camera&quot; /&gt;\r\n      \t&lt;uses-feature android:name=&quot;android.hardware.location&quot; android:required=&quot;true&quot; /&gt;\r\n      \t&lt;uses-feature android:name=&quot;android.hardware.location.gps&quot; android:required=&quot;false&quot; /&gt;\r\n      \t\r\n        &lt;uses-sdk\r\n            android:minSdkVersion=&quot;8&quot;\r\n            android:targetSdkVersion=&quot;17&quot; /&gt;\r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:icon=&quot;@drawable/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:theme=&quot;@style/AppTheme&quot; &gt;\r\n            &lt;activity\r\n                android:name=&quot;com.example.locationtests.MainActivity&quot;\r\n                android:label=&quot;@string/app_name&quot; &gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;\r\n\r\nActually GPS positioning works fine, but NETWORK positioning dosn&#39;t.\r\nWhen Ive turned devices GPS on coordinates keep changing while i&#39;m moving, but the same  doesn&#39;t happen when I have turn it off and relay on the NETWORK_PROVIDER\r\n","title":"How to get current location in Android","body":"<p>I'm having troubles of getting my current position coordinates using the NETWORK provider of android location system. </p>\n\n<p>Already read a lot of tutorials and implemented 4 or 5 existing classes to my project and all of them are giving me the last coordinates but not the current ones.</p>\n\n<p>I'm pretty sure that the problem is something fundamental that I am missing but I am not able to understand what exactly it is. </p>\n\n<p><strong>Codes I'm using now:</strong></p>\n\n<p><strong>This is my main Activity</strong> </p>\n\n<pre><code>package com.example.locationtests;\n\nimport android.os.Bundle;\nimport android.app.Activity;\nimport android.view.Menu;\nimport android.widget.TextView;\n\npublic class MainActivity extends Activity {\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    GPSTracker mGPS = new GPSTracker(this);\n\n    TextView text = (TextView) findViewById(R.id.texts);\n    if(mGPS.canGetLocation ){\n    mGPS.getLocation();\n    text.setText(\"Lat\"+mGPS.getLatitude()+\"Lon\"+mGPS.getLongitude());\n    }else{\n        text.setText(\"Unabletofind\");\n        System.out.println(\"Unable\");\n    }\n}\n\n@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    // Inflate the menu; this adds items to the action bar if it is present.\n    getMenuInflater().inflate(R.menu.main, menu);\n    return true;\n}\n\n}\n</code></pre>\n\n<p><strong>This is the class I'm using for Tracking:</strong></p>\n\n<pre><code>package com.example.locationtests;\n\nimport android.app.AlertDialog;\nimport android.content.Context;\nimport android.content.DialogInterface;\nimport android.content.Intent;\nimport android.location.Location;\nimport android.location.LocationListener;\nimport android.location.LocationManager;\nimport android.os.Bundle;\nimport android.provider.Settings;\nimport android.util.Log;\n\npublic final class GPSTracker implements LocationListener {\n\n    private final Context mContext;\n\n    // flag for GPS status\n    public boolean isGPSEnabled = false;\n\n    // flag for network status\n    boolean isNetworkEnabled = false;\n\n    // flag for GPS status\n    boolean canGetLocation = false;\n\n    Location location; // location\n    double latitude; // latitude\n    double longitude; // longitude\n\n    // The minimum distance to change Updates in meters\n    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 1; // 10 meters\n\n    // The minimum time between updates in milliseconds\n    private static final long MIN_TIME_BW_UPDATES = 1; // 1 minute\n\n    // Declaring a Location Manager\n    protected LocationManager locationManager;\n\n    public GPSTracker(Context context) {\n        this.mContext = context;\n        getLocation();\n    }\n\n    /**\n     * Function to get the user's current location\n     * \n     * @return\n     */\n    public Location getLocation() {\n        try {\n            locationManager = (LocationManager) mContext\n                    .getSystemService(Context.LOCATION_SERVICE);\n\n            // getting GPS status\n            isGPSEnabled = locationManager\n                    .isProviderEnabled(LocationManager.GPS_PROVIDER);\n\n            Log.v(\"isGPSEnabled\", \"=\" + isGPSEnabled);\n\n            // getting network status\n            isNetworkEnabled = locationManager\n                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);\n\n            Log.v(\"isNetworkEnabled\", \"=\" + isNetworkEnabled);\n\n            if (isGPSEnabled == false &amp;&amp; isNetworkEnabled == false) {\n                // no network provider is enabled\n            } else {\n                this.canGetLocation = true;\n                if (isNetworkEnabled) {\n                    location=null;\n                    locationManager.requestLocationUpdates(\n                            LocationManager.NETWORK_PROVIDER,\n                            MIN_TIME_BW_UPDATES,\n                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);\n                    Log.d(\"Network\", \"Network\");\n                    if (locationManager != null) {\n                        location = locationManager\n                                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);\n                        if (location != null) {\n                            latitude = location.getLatitude();\n                            longitude = location.getLongitude();\n                        }\n                    }\n                }\n                // if GPS Enabled get lat/long using GPS Services\n                if (isGPSEnabled) {\n                    location=null;\n                    if (location == null) {\n                        locationManager.requestLocationUpdates(\n                                LocationManager.GPS_PROVIDER,\n                                MIN_TIME_BW_UPDATES,\n                                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);\n                        Log.d(\"GPS Enabled\", \"GPS Enabled\");\n                        if (locationManager != null) {\n                            location = locationManager\n                                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);\n                            if (location != null) {\n                                latitude = location.getLatitude();\n                                longitude = location.getLongitude();\n                            }\n                        }\n                    }\n                }\n            }\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        return location;\n    }\n\n    /**\n     * Stop using GPS listener Calling this function will stop using GPS in your\n     * app\n     * */\n    public void stopUsingGPS() {\n        if (locationManager != null) {\n            locationManager.removeUpdates(GPSTracker.this);\n        }\n    }\n\n    /**\n     * Function to get latitude\n     * */\n    public double getLatitude() {\n        if (location != null) {\n            latitude = location.getLatitude();\n        }\n\n        // return latitude\n        return latitude;\n    }\n\n    /**\n     * Function to get longitude\n     * */\n    public double getLongitude() {\n        if (location != null) {\n            longitude = location.getLongitude();\n        }\n\n        // return longitude\n        return longitude;\n    }\n\n    /**\n     * Function to check GPS/wifi enabled\n     * \n     * @return boolean\n     * */\n    public boolean canGetLocation() {\n        return this.canGetLocation;\n    }\n\n    /**\n     * Function to show settings alert dialog On pressing Settings button will\n     * lauch Settings Options\n     * */\n    public void showSettingsAlert() {\n        AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);\n\n        // Setting Dialog Title\n        alertDialog.setTitle(\"GPS is settings\");\n\n        // Setting Dialog Message\n        alertDialog\n                .setMessage(\"GPS is not enabled. Do you want to go to settings menu?\");\n\n        // On pressing Settings button\n        alertDialog.setPositiveButton(\"Settings\",\n                new DialogInterface.OnClickListener() {\n                    public void onClick(DialogInterface dialog, int which) {\n                        Intent intent = new Intent(\n                                Settings.ACTION_LOCATION_SOURCE_SETTINGS);\n                        mContext.startActivity(intent);\n                    }\n                });\n\n        // on pressing cancel button\n        alertDialog.setNegativeButton(\"Cancel\",\n                new DialogInterface.OnClickListener() {\n                    public void onClick(DialogInterface dialog, int which) {\n                        dialog.cancel();\n                    }\n                });\n\n        // Showing Alert Message\n        alertDialog.show();\n    }\n\n    @Override\n    public void onLocationChanged(Location location) {\n    }\n\n    @Override\n    public void onProviderDisabled(String provider) {\n    }\n\n    @Override\n    public void onProviderEnabled(String provider) {\n    }\n\n    @Override\n    public void onStatusChanged(String provider, int status, Bundle extras) {\n    }\n\n}\n</code></pre>\n\n<p><strong>This is my AndroidManifest.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.example.locationtests\"\n    android:versionCode=\"1\"\n    android:versionName=\"1.0\" &gt;\n    &lt;uses-permission android:name=\"android.permission.CAMERA\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.INTERNET\"&gt;&lt;/uses-permission&gt;\n    &lt;uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\" /&gt; \n    &lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.VIBRATE\" /&gt;\n    &lt;uses-feature android:name=\"android.hardware.camera\" /&gt;\n    &lt;uses-feature android:name=\"android.hardware.location\" android:required=\"true\" /&gt;\n    &lt;uses-feature android:name=\"android.hardware.location.gps\" android:required=\"false\" /&gt;\n\n    &lt;uses-sdk\n        android:minSdkVersion=\"8\"\n        android:targetSdkVersion=\"17\" /&gt;\n\n    &lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@drawable/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:theme=\"@style/AppTheme\" &gt;\n        &lt;activity\n            android:name=\"com.example.locationtests.MainActivity\"\n            android:label=\"@string/app_name\" &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n\n<p>Actually GPS positioning works fine, but NETWORK positioning dosn't.\nWhen Ive turned devices GPS on coordinates keep changing while i'm moving, but the same  doesn't happen when I have turn it off and relay on the NETWORK_PROVIDER</p>\n"},{"tags":["java","android","image","android-mediascanner"],"comments":[{"owner":{"account_id":13835744,"reputation":2940,"user_id":9987309,"display_name":"iCantC"},"score":0,"creation_date":1612434596,"post_id":28243330,"comment_id":116768010,"body_markdown":"What if the image was stored in a directory as  `getExternalFilesDir` ??","body":"What if the image was stored in a directory as  <code>getExternalFilesDir</code> ??"}],"answers":[{"comments":[{"owner":{"account_id":4834595,"reputation":763,"user_id":3901722,"accept_rate":85,"display_name":"rommex"},"score":0,"creation_date":1509713422,"post_id":28243723,"comment_id":81141857,"body_markdown":"Thanks for a helpful piece of code. Cannot figure out what &#39;imageUrl&quot; is in the end though...","body":"Thanks for a helpful piece of code. Cannot figure out what &#39;imageUrl&quot; is in the end though..."},{"owner":{"account_id":2772818,"reputation":3381,"user_id":2387054,"accept_rate":46,"display_name":"zgc7009"},"score":0,"creation_date":1509723817,"post_id":28243723,"comment_id":81149019,"body_markdown":"More than welcome. It&#39;s supposed to just be url. Edited the response. Take a look at parakmiakos answer below, it seems to be a final solution.","body":"More than welcome. It&#39;s supposed to just be url. Edited the response. Take a look at parakmiakos answer below, it seems to be a final solution."},{"owner":{"account_id":9888762,"reputation":750,"user_id":7918717,"display_name":"antaki93"},"score":0,"creation_date":1700158562,"post_id":28243723,"comment_id":136623250,"body_markdown":"&quot;insertImage&quot; method was deprecated in API level 29.\ninserting of images should be performed using MediaColumns#IS_PENDING, which offers richer control over lifecycle.\nhttps://developer.android.com/reference/android/provider/MediaStore.Images.Media#insertImage(android.content.ContentResolver,%20java.lang.String,%20java.lang.String,%20java.lang.String)","body":"&quot;insertImage&quot; method was deprecated in API level 29. inserting of images should be performed using MediaColumns#IS_PENDING, which offers richer control over lifecycle. <a href=\"https://developer.android.com/reference/android/provider/MediaStore.Images.Media#insertImage(android.content.ContentResolver,%20java.lang.String,%20java.lang.String,%20java.lang.String)\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/provider/&hellip;</a>"}],"tags":[],"owner":{"account_id":2772818,"reputation":3381,"user_id":2387054,"accept_rate":46,"display_name":"zgc7009"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1509723788,"creation_date":1422648194,"answer_id":28243723,"question_id":28243330,"body_markdown":"I would put this as a comment as I don&#39;t have time to really go into detail about things, but it&#39;s obviously too long. Try something like this (I use this for storing bitmaps to the gallery). As a note, it doesn&#39;t seem you are doing anything but scanning an image. Right now it seems you are storing the file to your internal storage, not your phones content (gallery).\r\n\r\n__Assume we are running this from ActivityA.class that extends Activity__\r\n\r\n\r\n     /**\r\n     * Will save our card (currently set as a bitmap) as a jpeg and save it into our devices\r\n     * native photo gallery. Unfortunately, the default method for this will add the image to the bottom\r\n     * of the gallery by default, that is no good. This more complex method that utilizes Android&#39;s\r\n     * native methods will allow us to store the bitmap at the top of the gallery by setting it&#39;s\r\n     * meta data to today&#39;s date.\r\n     */\r\n    public class SaveBitmapToDevice extends AsyncTask&lt;Bitmap, Void, String&gt;{\r\n\r\n        private final ShareType type;\r\n\r\n        public SaveBitmapToDevice(ShareType type){\r\n            this.type = type;\r\n        }\r\n\r\n        @Override\r\n        protected String doInBackground(Bitmap... cards) {\r\n            return insertImageIntoGallery(getContentResolver(), cards[0], getString(R.string.card_gallery_title),\r\n                    getString(R.string.card_gallery_label));\r\n        }\r\n\r\n        /**\r\n         * A copy of the Android internals insertImage method, this method populates the\r\n         * meta data with DATE_ADDED and DATE_TAKEN. This fixes a common problem where media\r\n         * that is inserted manually gets saved at the end of the gallery (because date is not populated).\r\n         * @see android.provider.MediaStore.Images.Media#insertImage(android.content.ContentResolver, Bitmap, String, String).\r\n         * If the MediaStore not available, we will redirect the file to our alternative source, the SD card.\r\n         */\r\n        public String insertImageIntoGallery(ContentResolver cr, Bitmap source, String title, String description) {\r\n\r\n            ContentValues values = new ContentValues();\r\n            values.put(MediaStore.Images.Media.TITLE, title);\r\n            values.put(MediaStore.Images.Media.DISPLAY_NAME, title);\r\n            values.put(MediaStore.Images.Media.DESCRIPTION, description);\r\n            values.put(MediaStore.Images.Media.MIME_TYPE, &quot;image/jpeg&quot;);\r\n            // Add the date meta data to ensure the image is added at the front of the gallery\r\n            values.put(MediaStore.Images.Media.DATE_ADDED, System.currentTimeMillis());\r\n            values.put(MediaStore.Images.Media.DATE_TAKEN, System.currentTimeMillis());\r\n\r\n            Uri url = null;\r\n            String stringUrl = null;    /* value to be returned */\r\n\r\n            try {\r\n                url = cr.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);\r\n\r\n                if (source != null) {\r\n                    OutputStream imageOut = cr.openOutputStream(url);\r\n                    try {\r\n                        source.compress(Bitmap.CompressFormat.JPEG, 50, imageOut);\r\n                    } finally {\r\n                        imageOut.close();\r\n                    }\r\n\r\n                    long id = ContentUris.parseId(url);\r\n                    // Wait until MINI_KIND thumbnail is generated.\r\n                    Bitmap miniThumb = MediaStore.Images.Thumbnails.getThumbnail(cr, id, MediaStore.Images.Thumbnails.MINI_KIND, null);\r\n                    // This is for backward compatibility.\r\n                    storeThumbnail(cr, miniThumb, id, 50F, 50F, MediaStore.Images.Thumbnails.MICRO_KIND);\r\n                } else {\r\n                    cr.delete(url, null, null);\r\n                    return storeToAlternateSd(source, title);\r\n                    // url = null;\r\n                }\r\n            } catch (Exception e) {\r\n                if (url != null) {\r\n                    cr.delete(url, null, null);\r\n                    return storeToAlternateSd(source, title);\r\n                    // url = null;\r\n                }\r\n            }\r\n\r\n            savedOnSD = false;\r\n            if (url != null) {\r\n                stringUrl = url.toString();\r\n            }\r\n\r\n            return stringUrl;\r\n        }\r\n\r\n        /**\r\n         * A copy of the Android internals StoreThumbnail method, it used with the insertImage to\r\n         * populate the android.provider.MediaStore.Images.Media#insertImage with all the correct\r\n         * meta data. The StoreThumbnail method is private so it must be duplicated here.\r\n         * @see android.provider.MediaStore.Images.Media (StoreThumbnail private method).\r\n         */\r\n        private Bitmap storeThumbnail(\r\n                ContentResolver cr,\r\n                Bitmap source,\r\n                long id,\r\n                float width,\r\n                float height,\r\n                int kind) {\r\n\r\n            // create the matrix to scale it\r\n            Matrix matrix = new Matrix();\r\n\r\n            float scaleX = width / source.getWidth();\r\n            float scaleY = height / source.getHeight();\r\n\r\n            matrix.setScale(scaleX, scaleY);\r\n\r\n            Bitmap thumb = Bitmap.createBitmap(source, 0, 0,\r\n                    source.getWidth(),\r\n                    source.getHeight(), matrix,\r\n                    true\r\n            );\r\n\r\n            ContentValues values = new ContentValues(4);\r\n            values.put(MediaStore.Images.Thumbnails.KIND,kind);\r\n            values.put(MediaStore.Images.Thumbnails.IMAGE_ID,(int)id);\r\n            values.put(MediaStore.Images.Thumbnails.HEIGHT,thumb.getHeight());\r\n            values.put(MediaStore.Images.Thumbnails.WIDTH,thumb.getWidth());\r\n\r\n            Uri url = cr.insert(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, values);\r\n\r\n            try {\r\n                OutputStream thumbOut = cr.openOutputStream(url);\r\n                thumb.compress(Bitmap.CompressFormat.JPEG, 100, thumbOut);\r\n                thumbOut.close();\r\n                return thumb;\r\n            } catch (FileNotFoundException ex) {\r\n                Log.e(&quot;IMAGE_COMPRESSION_ERROR&quot;, &quot;File not found&quot;);\r\n                ex.printStackTrace();\r\n                return null;\r\n            } catch (IOException ex) {\r\n                Log.e(&quot;IMAGE_COMPRESSION_ERROR&quot;, &quot;IO Exception&quot;);\r\n                ex.printStackTrace();\r\n                return null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * If we have issues saving into our MediaStore, save it directly to our SD card. We can then interact with this file\r\n         * directly, opposed to pulling from the MediaStore. Again, this is a backup method if things don&#39;t work out as we\r\n         * would expect (seeing as most devices will have a MediaStore).\r\n         *\r\n         * @param src\r\n         * @param title\r\n         * @return - the file&#39;s path\r\n         */\r\n        private String storeToAlternateSd(Bitmap src, String title){\r\n            if(src == null)\r\n                return null;\r\n\r\n            File sdCardDirectory = new File(Environment.getExternalStorageDirectory() + File.separator + &quot;My Cards&quot;);\r\n            if(!sdCardDirectory.exists())\r\n                sdCardDirectory.mkdir();\r\n\r\n            SimpleDateFormat sdf = new SimpleDateFormat(&quot;MM-dd-yyyy - (hh.mm.a)&quot;, Locale.US);\r\n            File image = new File(sdCardDirectory, title + &quot; -- [&quot; + sdf.format(new Date()) + &quot;].jpg&quot;);\r\n            try {\r\n                FileOutputStream imageOut = new FileOutputStream(image);\r\n                src.compress(Bitmap.CompressFormat.JPEG, 100, imageOut);\r\n                imageOut.close();\r\n                savedOnSD = true;\r\n                return image.getAbsolutePath();\r\n            } catch (FileNotFoundException ex) {\r\n                ex.printStackTrace();\r\n                return null;\r\n            } catch (IOException ex) {\r\n                ex.printStackTrace();\r\n                return null;\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public void onPostExecute(String url){\r\n            if(url != null){\r\n                Intent intent = new Intent();\r\n                intent.setAction(Intent.ACTION_VIEW);\r\n                if(savedOnSD){\r\n                    File file = new File(url);\r\n                    if(file.exists())\r\n                        intent.setDataAndType(Uri.fromFile(file), &quot;image/jpeg&quot;);\r\n                    else\r\n                        return;\r\n                }\r\n                else\r\n                    intent.setDataAndType(Uri.parse(url), &quot;image/jpeg&quot;);\r\n\r\n                ActivityA.this.startActivity(intent);\r\n            }\r\n            else\r\n                Toast.makeText(ActivityA.this, getString(R.string.error_compressing), Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n    }","title":"Add image to Media Gallery - Android","body":"<p>I would put this as a comment as I don't have time to really go into detail about things, but it's obviously too long. Try something like this (I use this for storing bitmaps to the gallery). As a note, it doesn't seem you are doing anything but scanning an image. Right now it seems you are storing the file to your internal storage, not your phones content (gallery).</p>\n\n<p><strong>Assume we are running this from ActivityA.class that extends Activity</strong></p>\n\n<pre><code> /**\n * Will save our card (currently set as a bitmap) as a jpeg and save it into our devices\n * native photo gallery. Unfortunately, the default method for this will add the image to the bottom\n * of the gallery by default, that is no good. This more complex method that utilizes Android's\n * native methods will allow us to store the bitmap at the top of the gallery by setting it's\n * meta data to today's date.\n */\npublic class SaveBitmapToDevice extends AsyncTask&lt;Bitmap, Void, String&gt;{\n\n    private final ShareType type;\n\n    public SaveBitmapToDevice(ShareType type){\n        this.type = type;\n    }\n\n    @Override\n    protected String doInBackground(Bitmap... cards) {\n        return insertImageIntoGallery(getContentResolver(), cards[0], getString(R.string.card_gallery_title),\n                getString(R.string.card_gallery_label));\n    }\n\n    /**\n     * A copy of the Android internals insertImage method, this method populates the\n     * meta data with DATE_ADDED and DATE_TAKEN. This fixes a common problem where media\n     * that is inserted manually gets saved at the end of the gallery (because date is not populated).\n     * @see android.provider.MediaStore.Images.Media#insertImage(android.content.ContentResolver, Bitmap, String, String).\n     * If the MediaStore not available, we will redirect the file to our alternative source, the SD card.\n     */\n    public String insertImageIntoGallery(ContentResolver cr, Bitmap source, String title, String description) {\n\n        ContentValues values = new ContentValues();\n        values.put(MediaStore.Images.Media.TITLE, title);\n        values.put(MediaStore.Images.Media.DISPLAY_NAME, title);\n        values.put(MediaStore.Images.Media.DESCRIPTION, description);\n        values.put(MediaStore.Images.Media.MIME_TYPE, \"image/jpeg\");\n        // Add the date meta data to ensure the image is added at the front of the gallery\n        values.put(MediaStore.Images.Media.DATE_ADDED, System.currentTimeMillis());\n        values.put(MediaStore.Images.Media.DATE_TAKEN, System.currentTimeMillis());\n\n        Uri url = null;\n        String stringUrl = null;    /* value to be returned */\n\n        try {\n            url = cr.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);\n\n            if (source != null) {\n                OutputStream imageOut = cr.openOutputStream(url);\n                try {\n                    source.compress(Bitmap.CompressFormat.JPEG, 50, imageOut);\n                } finally {\n                    imageOut.close();\n                }\n\n                long id = ContentUris.parseId(url);\n                // Wait until MINI_KIND thumbnail is generated.\n                Bitmap miniThumb = MediaStore.Images.Thumbnails.getThumbnail(cr, id, MediaStore.Images.Thumbnails.MINI_KIND, null);\n                // This is for backward compatibility.\n                storeThumbnail(cr, miniThumb, id, 50F, 50F, MediaStore.Images.Thumbnails.MICRO_KIND);\n            } else {\n                cr.delete(url, null, null);\n                return storeToAlternateSd(source, title);\n                // url = null;\n            }\n        } catch (Exception e) {\n            if (url != null) {\n                cr.delete(url, null, null);\n                return storeToAlternateSd(source, title);\n                // url = null;\n            }\n        }\n\n        savedOnSD = false;\n        if (url != null) {\n            stringUrl = url.toString();\n        }\n\n        return stringUrl;\n    }\n\n    /**\n     * A copy of the Android internals StoreThumbnail method, it used with the insertImage to\n     * populate the android.provider.MediaStore.Images.Media#insertImage with all the correct\n     * meta data. The StoreThumbnail method is private so it must be duplicated here.\n     * @see android.provider.MediaStore.Images.Media (StoreThumbnail private method).\n     */\n    private Bitmap storeThumbnail(\n            ContentResolver cr,\n            Bitmap source,\n            long id,\n            float width,\n            float height,\n            int kind) {\n\n        // create the matrix to scale it\n        Matrix matrix = new Matrix();\n\n        float scaleX = width / source.getWidth();\n        float scaleY = height / source.getHeight();\n\n        matrix.setScale(scaleX, scaleY);\n\n        Bitmap thumb = Bitmap.createBitmap(source, 0, 0,\n                source.getWidth(),\n                source.getHeight(), matrix,\n                true\n        );\n\n        ContentValues values = new ContentValues(4);\n        values.put(MediaStore.Images.Thumbnails.KIND,kind);\n        values.put(MediaStore.Images.Thumbnails.IMAGE_ID,(int)id);\n        values.put(MediaStore.Images.Thumbnails.HEIGHT,thumb.getHeight());\n        values.put(MediaStore.Images.Thumbnails.WIDTH,thumb.getWidth());\n\n        Uri url = cr.insert(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, values);\n\n        try {\n            OutputStream thumbOut = cr.openOutputStream(url);\n            thumb.compress(Bitmap.CompressFormat.JPEG, 100, thumbOut);\n            thumbOut.close();\n            return thumb;\n        } catch (FileNotFoundException ex) {\n            Log.e(\"IMAGE_COMPRESSION_ERROR\", \"File not found\");\n            ex.printStackTrace();\n            return null;\n        } catch (IOException ex) {\n            Log.e(\"IMAGE_COMPRESSION_ERROR\", \"IO Exception\");\n            ex.printStackTrace();\n            return null;\n        }\n    }\n\n    /**\n     * If we have issues saving into our MediaStore, save it directly to our SD card. We can then interact with this file\n     * directly, opposed to pulling from the MediaStore. Again, this is a backup method if things don't work out as we\n     * would expect (seeing as most devices will have a MediaStore).\n     *\n     * @param src\n     * @param title\n     * @return - the file's path\n     */\n    private String storeToAlternateSd(Bitmap src, String title){\n        if(src == null)\n            return null;\n\n        File sdCardDirectory = new File(Environment.getExternalStorageDirectory() + File.separator + \"My Cards\");\n        if(!sdCardDirectory.exists())\n            sdCardDirectory.mkdir();\n\n        SimpleDateFormat sdf = new SimpleDateFormat(\"MM-dd-yyyy - (hh.mm.a)\", Locale.US);\n        File image = new File(sdCardDirectory, title + \" -- [\" + sdf.format(new Date()) + \"].jpg\");\n        try {\n            FileOutputStream imageOut = new FileOutputStream(image);\n            src.compress(Bitmap.CompressFormat.JPEG, 100, imageOut);\n            imageOut.close();\n            savedOnSD = true;\n            return image.getAbsolutePath();\n        } catch (FileNotFoundException ex) {\n            ex.printStackTrace();\n            return null;\n        } catch (IOException ex) {\n            ex.printStackTrace();\n            return null;\n        }\n    }\n\n    @Override\n    public void onPostExecute(String url){\n        if(url != null){\n            Intent intent = new Intent();\n            intent.setAction(Intent.ACTION_VIEW);\n            if(savedOnSD){\n                File file = new File(url);\n                if(file.exists())\n                    intent.setDataAndType(Uri.fromFile(file), \"image/jpeg\");\n                else\n                    return;\n            }\n            else\n                intent.setDataAndType(Uri.parse(url), \"image/jpeg\");\n\n            ActivityA.this.startActivity(intent);\n        }\n        else\n            Toast.makeText(ActivityA.this, getString(R.string.error_compressing), Toast.LENGTH_SHORT).show();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3866431,"reputation":2994,"user_id":3202885,"accept_rate":50,"display_name":"parakmiakos"},"comment_count":0,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1700530743,"creation_date":1422692670,"answer_id":28249682,"question_id":28243330,"body_markdown":"Thanks @zgc7009, you set me on the right track. I used some of your code, and this is the end result for anyone else wanting to solve. \r\n\r\nThe problem indeed was that I was storing the image in my application&#39;s local storage.\r\n\r\n    File storedImagePath = generateImagePath(&quot;player&quot;, &quot;png&quot;);\r\n    if (!compressAndSaveImage(storedImagePath, bitmap)) {\r\n        return null;\r\n    }\r\n    Uri url = addImageToGallery(context.getContentResolver(), &quot;png&quot;, storedImagePath);\r\n\r\nWhere the three methods used are:\r\n\r\n**Generate Path**\r\n\r\n    private static File getImagesDirectory() {\r\n        File file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES) + File.separator + IMAGE_DIR);//Environment.getExternalStorageDirectory()\r\n        if (!file.mkdirs() &amp;&amp; !file.isDirectory()) {\r\n            Log.e(&quot;mkdir&quot;, &quot;Directory not created&quot;);\r\n        }\r\n        return file;\r\n    }\r\n\r\n    public static File generateImagePath(String title, String imgType) {\r\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd-MM-yyyy-hh-mm-ss&quot;);\r\n        return new File(getImagesDirectory(), title + &quot;_&quot; + sdf.format(new Date()) + &quot;.&quot; + imgType);\r\n    }\r\n    \r\n\r\n**Compress And Save**\r\n\r\n    public boolean compressAndSaveImage(File file, Bitmap bitmap) {\r\n        boolean result = false;\r\n        try {\r\n            FileOutputStream fos = new FileOutputStream(file);\r\n            if (result = bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos)) {\r\n                Log.w(&quot;image manager&quot;, &quot;Compression success&quot;);\r\n            }\r\n            fos.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return result;\r\n    }\r\n\r\n**Add To Gallery**\r\n\r\n    public Uri addImageToGallery(ContentResolver cr, String imgType, File filepath) {\r\n        ContentValues values = new ContentValues();\r\n        values.put(MediaStore.Images.Media.TITLE, &quot;player&quot;);\r\n        values.put(MediaStore.Images.Media.DISPLAY_NAME, &quot;player&quot;);\r\n        values.put(MediaStore.Images.Media.DESCRIPTION, &quot;&quot;);\r\n        values.put(MediaStore.Images.Media.MIME_TYPE, &quot;image/&quot; + imgType);\r\n        values.put(MediaStore.Images.Media.DATE_ADDED, System.currentTimeMillis());\r\n        values.put(MediaStore.Images.Media.DATE_TAKEN, System.currentTimeMillis());\r\n        values.put(MediaStore.Images.Media.DATA, filepath.toString());\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n            values.put(MediaStore.MediaColumns.RELATIVE_PATH, Environment.DIRECTORY_PICTURES + &quot;/YourAppFolder&quot;);\r\n            values.put(MediaStore.MediaColumns.IS_PENDING, 1);\r\n            Uri uri = cr.insert(MediaStore.Images.Media.getContentUri(MediaStore.VOLUME_EXTERNAL), values);\r\n            values.clear();\r\n            values.put(MediaStore.Images.Media.IS_PENDING, 0);\r\n            cr.update(uri, values, null, null);\r\n            return uri;\r\n        } else {\r\n            return cr.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);\r\n        }\r\n    }","title":"Add image to Media Gallery - Android","body":"<p>Thanks @zgc7009, you set me on the right track. I used some of your code, and this is the end result for anyone else wanting to solve.</p>\n<p>The problem indeed was that I was storing the image in my application's local storage.</p>\n<pre><code>File storedImagePath = generateImagePath(&quot;player&quot;, &quot;png&quot;);\nif (!compressAndSaveImage(storedImagePath, bitmap)) {\n    return null;\n}\nUri url = addImageToGallery(context.getContentResolver(), &quot;png&quot;, storedImagePath);\n</code></pre>\n<p>Where the three methods used are:</p>\n<p><strong>Generate Path</strong></p>\n<pre><code>private static File getImagesDirectory() {\n    File file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES) + File.separator + IMAGE_DIR);//Environment.getExternalStorageDirectory()\n    if (!file.mkdirs() &amp;&amp; !file.isDirectory()) {\n        Log.e(&quot;mkdir&quot;, &quot;Directory not created&quot;);\n    }\n    return file;\n}\n\npublic static File generateImagePath(String title, String imgType) {\n    SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd-MM-yyyy-hh-mm-ss&quot;);\n    return new File(getImagesDirectory(), title + &quot;_&quot; + sdf.format(new Date()) + &quot;.&quot; + imgType);\n}\n</code></pre>\n<p><strong>Compress And Save</strong></p>\n<pre><code>public boolean compressAndSaveImage(File file, Bitmap bitmap) {\n    boolean result = false;\n    try {\n        FileOutputStream fos = new FileOutputStream(file);\n        if (result = bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos)) {\n            Log.w(&quot;image manager&quot;, &quot;Compression success&quot;);\n        }\n        fos.close();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return result;\n}\n</code></pre>\n<p><strong>Add To Gallery</strong></p>\n<pre><code>public Uri addImageToGallery(ContentResolver cr, String imgType, File filepath) {\n    ContentValues values = new ContentValues();\n    values.put(MediaStore.Images.Media.TITLE, &quot;player&quot;);\n    values.put(MediaStore.Images.Media.DISPLAY_NAME, &quot;player&quot;);\n    values.put(MediaStore.Images.Media.DESCRIPTION, &quot;&quot;);\n    values.put(MediaStore.Images.Media.MIME_TYPE, &quot;image/&quot; + imgType);\n    values.put(MediaStore.Images.Media.DATE_ADDED, System.currentTimeMillis());\n    values.put(MediaStore.Images.Media.DATE_TAKEN, System.currentTimeMillis());\n    values.put(MediaStore.Images.Media.DATA, filepath.toString());\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n        values.put(MediaStore.MediaColumns.RELATIVE_PATH, Environment.DIRECTORY_PICTURES + &quot;/YourAppFolder&quot;);\n        values.put(MediaStore.MediaColumns.IS_PENDING, 1);\n        Uri uri = cr.insert(MediaStore.Images.Media.getContentUri(MediaStore.VOLUME_EXTERNAL), values);\n        values.clear();\n        values.put(MediaStore.Images.Media.IS_PENDING, 0);\n        cr.update(uri, values, null, null);\n        return uri;\n    } else {\n        return cr.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2155518,"reputation":905,"user_id":1910863,"display_name":"Don Shrout"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1576063552,"creation_date":1485955987,"answer_id":41981112,"question_id":28243330,"body_markdown":"You could also use MediaStore&#39;s static methods...\r\n\r\n    public String addImageToGallery(ContentResolver cr, File filepath) {\r\n        try {\r\n           return MediaStore.Images.Media.insertImage(cr, filepath.toString(), \r\n                                                      filepath.getName(), &quot;Image Description&quot;);\r\n        } catch (FileNotFoundException e) {\r\n           e.printStackTrace();\r\n           return e.getMessage();\r\n        }\r\n    }\r\n\r\nThe `String` returned from `insertImage` is the same as calling `toString()` on the `Uri` object in the accepted answer.\r\n\r\nI know this is an older post but I hope this can help others who still find their way here.","title":"Add image to Media Gallery - Android","body":"<p>You could also use MediaStore's static methods...</p>\n\n<pre><code>public String addImageToGallery(ContentResolver cr, File filepath) {\n    try {\n       return MediaStore.Images.Media.insertImage(cr, filepath.toString(), \n                                                  filepath.getName(), \"Image Description\");\n    } catch (FileNotFoundException e) {\n       e.printStackTrace();\n       return e.getMessage();\n    }\n}\n</code></pre>\n\n<p>The <code>String</code> returned from <code>insertImage</code> is the same as calling <code>toString()</code> on the <code>Uri</code> object in the accepted answer.</p>\n\n<p>I know this is an older post but I hope this can help others who still find their way here.</p>\n"},{"tags":[],"owner":{"account_id":1953309,"reputation":2211,"user_id":1756939,"display_name":"AndrewBloom"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1586375300,"creation_date":1586375300,"answer_id":61108876,"question_id":28243330,"body_markdown":"Android 10 introduces scoped storage, so the you will get a file not found EACCESS error trying to write on those folders. Here a solution in kotlin, following the current android documentation.\r\n\r\n    fun addImageToGallery(b: Bitmap): Uri {\r\n        val resolver = context.applicationContext.contentResolver\r\n\r\n        val pictureCollection = MediaStore.Images.Media\r\n            .getContentUri(MediaStore.VOLUME_EXTERNAL_PRIMARY)\r\n\r\n        val pictureDetails = ContentValues().apply {\r\n            put(MediaStore.Images.Media.DISPLAY_NAME, &quot;CurrentAlbumArt.png&quot;)\r\n            put(MediaStore.Audio.Media.IS_PENDING, 1)\r\n        }\r\n\r\n        val pictureContentUri = resolver.insert(pictureCollection, pictureDetails)!!\r\n\r\n        resolver.openFileDescriptor(pictureContentUri, &quot;w&quot;, null).use { pfd -&gt;\r\n            try {\r\n                pfd?.let {\r\n                    val fos = FileOutputStream(it.fileDescriptor)\r\n                    b.compress(Bitmap.CompressFormat.PNG, 100, fos)\r\n                    fos.close()\r\n                }\r\n            } catch (e: IOException) {\r\n                e.printStackTrace()\r\n            }\r\n        }\r\n\r\n        pictureDetails.clear()\r\n        pictureDetails.put(MediaStore.Images.Media.IS_PENDING, 0)\r\n        resolver.update(pictureContentUri, pictureDetails, null, null)\r\n        return pictureContentUri\r\n    }\r\n\r\nNote: I overwrite the old files (same file name) and insert works as replace as i needed for my case.","title":"Add image to Media Gallery - Android","body":"<p>Android 10 introduces scoped storage, so the you will get a file not found EACCESS error trying to write on those folders. Here a solution in kotlin, following the current android documentation.</p>\n\n<pre><code>fun addImageToGallery(b: Bitmap): Uri {\n    val resolver = context.applicationContext.contentResolver\n\n    val pictureCollection = MediaStore.Images.Media\n        .getContentUri(MediaStore.VOLUME_EXTERNAL_PRIMARY)\n\n    val pictureDetails = ContentValues().apply {\n        put(MediaStore.Images.Media.DISPLAY_NAME, \"CurrentAlbumArt.png\")\n        put(MediaStore.Audio.Media.IS_PENDING, 1)\n    }\n\n    val pictureContentUri = resolver.insert(pictureCollection, pictureDetails)!!\n\n    resolver.openFileDescriptor(pictureContentUri, \"w\", null).use { pfd -&gt;\n        try {\n            pfd?.let {\n                val fos = FileOutputStream(it.fileDescriptor)\n                b.compress(Bitmap.CompressFormat.PNG, 100, fos)\n                fos.close()\n            }\n        } catch (e: IOException) {\n            e.printStackTrace()\n        }\n    }\n\n    pictureDetails.clear()\n    pictureDetails.put(MediaStore.Images.Media.IS_PENDING, 0)\n    resolver.update(pictureContentUri, pictureDetails, null, null)\n    return pictureContentUri\n}\n</code></pre>\n\n<p>Note: I overwrite the old files (same file name) and insert works as replace as i needed for my case.</p>\n"}],"owner":{"account_id":3866431,"reputation":2994,"user_id":3202885,"accept_rate":50,"display_name":"parakmiakos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19645,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":28243723,"answer_count":4,"score":14,"last_activity_date":1700530743,"creation_date":1422646509,"question_id":28243330,"body_markdown":"I am trying to add a new image to the gallery. I pick an already existing image though an intent and then resize and compress it.\r\n\r\nThen I store the resulting bitmap:\r\n\r\n    public static File compressAndSaveImage(Context ctx, Uri imageUri) throws FileNotFoundException {\r\n        File file = null;\r\n\r\n        if (imageUri != null) {\r\n            ContextWrapper cw = new ContextWrapper(ctx);\r\n            File directory = cw.getDir(&quot;imageDir&quot;, Context.MODE_PRIVATE);\r\n            file = new File(directory, imageUri.getLastPathSegment());\r\n            System.out.println(&quot;storing to &quot; + file);\r\n\r\n            InputStream input = ctx.getContentResolver().openInputStream(imageUri);\r\n            Bitmap b = ImageManager.resize(BitmapFactory.decodeStream(input),\r\n                    ctx.getResources().getDimension(R.dimen.player_thumb_w),\r\n                    ctx.getResources().getDimension(R.dimen.player_thumb_h));\r\n\r\n            FileOutputStream fos = new FileOutputStream(file);\r\n            if (b.compress(Bitmap.CompressFormat.PNG, 100, fos)) {\r\n                System.out.println(&quot;Compression success&quot;);// bmp is your Bitmap instance\r\n            }\r\n            addPictureToGallery(ctx, file);\r\n        }\r\n        return file;\r\n    }\r\n\r\nBut when I try to add the image to the gallery, I get no errors and the image is not added. I have tried both the methods below:\r\n\r\n    private static void addPictureToGallery(Context ctx, File filepath) {\r\n    //        Intent mediaScanIntent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);\r\n    //        System.out.println(&quot;Publish: &quot; + filepath.exists());\r\n    //        System.out.println(&quot;Publish: &quot; + filepath.getAbsolutePath());\r\n    //        Uri contentUri = Uri.fromFile(filepath);\r\n    //        mediaScanIntent.setData(contentUri);\r\n    //        ctx.sendBroadcast(mediaScanIntent);\r\n        MediaScannerConnection.scanFile(\r\n                ctx,\r\n                new String[]{filepath.getAbsolutePath()},\r\n                null,\r\n                new MediaScannerConnection.OnScanCompletedListener() {\r\n                    @Override\r\n                    public void onScanCompleted(String path, Uri uri) {\r\n                        Log.w(&quot;mydebug&quot;, &quot;file &quot; + path + &quot; was scanned successfully: &quot; + uri);\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\nThe callback prints the following line:\r\n\r\n    file /data/data/test.myapps.appname/app_imageDir/6045564126748266738 was scanned successfully: content://media/external/file/7838\r\n\r\nWhat am I missing?","title":"Add image to Media Gallery - Android","body":"<p>I am trying to add a new image to the gallery. I pick an already existing image though an intent and then resize and compress it.</p>\n\n<p>Then I store the resulting bitmap:</p>\n\n<pre><code>public static File compressAndSaveImage(Context ctx, Uri imageUri) throws FileNotFoundException {\n    File file = null;\n\n    if (imageUri != null) {\n        ContextWrapper cw = new ContextWrapper(ctx);\n        File directory = cw.getDir(\"imageDir\", Context.MODE_PRIVATE);\n        file = new File(directory, imageUri.getLastPathSegment());\n        System.out.println(\"storing to \" + file);\n\n        InputStream input = ctx.getContentResolver().openInputStream(imageUri);\n        Bitmap b = ImageManager.resize(BitmapFactory.decodeStream(input),\n                ctx.getResources().getDimension(R.dimen.player_thumb_w),\n                ctx.getResources().getDimension(R.dimen.player_thumb_h));\n\n        FileOutputStream fos = new FileOutputStream(file);\n        if (b.compress(Bitmap.CompressFormat.PNG, 100, fos)) {\n            System.out.println(\"Compression success\");// bmp is your Bitmap instance\n        }\n        addPictureToGallery(ctx, file);\n    }\n    return file;\n}\n</code></pre>\n\n<p>But when I try to add the image to the gallery, I get no errors and the image is not added. I have tried both the methods below:</p>\n\n<pre><code>private static void addPictureToGallery(Context ctx, File filepath) {\n//        Intent mediaScanIntent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);\n//        System.out.println(\"Publish: \" + filepath.exists());\n//        System.out.println(\"Publish: \" + filepath.getAbsolutePath());\n//        Uri contentUri = Uri.fromFile(filepath);\n//        mediaScanIntent.setData(contentUri);\n//        ctx.sendBroadcast(mediaScanIntent);\n    MediaScannerConnection.scanFile(\n            ctx,\n            new String[]{filepath.getAbsolutePath()},\n            null,\n            new MediaScannerConnection.OnScanCompletedListener() {\n                @Override\n                public void onScanCompleted(String path, Uri uri) {\n                    Log.w(\"mydebug\", \"file \" + path + \" was scanned successfully: \" + uri);\n                }\n            });\n    }\n}\n</code></pre>\n\n<p>The callback prints the following line:</p>\n\n<pre><code>file /data/data/test.myapps.appname/app_imageDir/6045564126748266738 was scanned successfully: content://media/external/file/7838\n</code></pre>\n\n<p>What am I missing?</p>\n"},{"tags":["java","spring-boot","spring-kafka","spring-retry"],"answers":[{"comments":[{"owner":{"account_id":16910209,"reputation":25,"user_id":12229445,"display_name":"tinku"},"score":0,"creation_date":1689293462,"post_id":76679828,"comment_id":135196736,"body_markdown":"Please check the edited code snippet. I configured the error handler to have a back off function which allows infinite retries when HttpServerException occurs. The idea is to use backoff that&#39;s supplied to the DefaultErrorHandler while it&#39;s initialized, for all exceptions that aren&#39;t HttpServerException. Custom BackOff is created using a BiFunction and is set on the defaultErrorHandler object. Please let me know if the backoff supplied to the DefaultErrorHandler&#39;s constructor is treated as default one and will be used when the Bifuncation returns null.","body":"Please check the edited code snippet. I configured the error handler to have a back off function which allows infinite retries when HttpServerException occurs. The idea is to use backoff that&#39;s supplied to the DefaultErrorHandler while it&#39;s initialized, for all exceptions that aren&#39;t HttpServerException. Custom BackOff is created using a BiFunction and is set on the defaultErrorHandler object. Please let me know if the backoff supplied to the DefaultErrorHandler&#39;s constructor is treated as default one and will be used when the Bifuncation returns null."},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":1,"creation_date":1689340426,"post_id":76679828,"comment_id":135203488,"body_markdown":"Yes; but why do you need confirmation? That&#39;s exactly what the javadoc says. However, you don&#39;t need to create a new `BackOff` each time the function is called; just create it once alongside the default `BackOff` and return it from the function.","body":"Yes; but why do you need confirmation? That&#39;s exactly what the javadoc says. However, you don&#39;t need to create a new <code>BackOff</code> each time the function is called; just create it once alongside the default <code>BackOff</code> and return it from the function."}],"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689254399,"creation_date":1689254399,"answer_id":76679828,"question_id":76674614,"body_markdown":"Yes, everything is correctly configured.\r\n\r\n&gt;Is there a way to configure a retry policy for a given exception ? For example, retry consuming a message infinitely on a Database non availability error. \r\n\r\nSee \r\n\r\n```java\r\n/**\r\n * Set a function to dynamically determine the {@link BackOff} to use, based on the\r\n * consumer record and/or exception. If null is returned, the default BackOff will be\r\n * used.\r\n * @param backOffFunction the function.\r\n * @since 2.6\r\n */\r\npublic void setBackOffFunction(BiFunction&lt;ConsumerRecord&lt;?, ?&gt;, Exception, BackOff&gt; backOffFunction) {\r\n```\r\n\r\nalso\r\n\r\n```java\r\n/**\r\n * Set to true to reset the retry {@link BackOff} if the exception is a different type\r\n * to the previous failure for the same record. The\r\n * {@link #setBackOffFunction(BiFunction) backOffFunction}, if provided, will be\r\n * called to get the {@link BackOff} to use for the new exception; otherwise, the\r\n * configured {@link BackOff} will be used. Default true since 2.9; set to false\r\n * to use the existing retry state, even when exceptions change.\r\n * @param resetStateOnExceptionChange true to reset.\r\n * @since 2.6.3\r\n */\r\npublic void setResetStateOnExceptionChange(boolean resetStateOnExceptionChange) {\r\n```\r\n\r\n(It is now true by default).\r\n","title":"Configure default error handler to commit messages after recovery","body":"<p>Yes, everything is correctly configured.</p>\n<blockquote>\n<p>Is there a way to configure a retry policy for a given exception ? For example, retry consuming a message infinitely on a Database non availability error.</p>\n</blockquote>\n<p>See</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Set a function to dynamically determine the {@link BackOff} to use, based on the\n * consumer record and/or exception. If null is returned, the default BackOff will be\n * used.\n * @param backOffFunction the function.\n * @since 2.6\n */\npublic void setBackOffFunction(BiFunction&lt;ConsumerRecord&lt;?, ?&gt;, Exception, BackOff&gt; backOffFunction) {\n</code></pre>\n<p>also</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Set to true to reset the retry {@link BackOff} if the exception is a different type\n * to the previous failure for the same record. The\n * {@link #setBackOffFunction(BiFunction) backOffFunction}, if provided, will be\n * called to get the {@link BackOff} to use for the new exception; otherwise, the\n * configured {@link BackOff} will be used. Default true since 2.9; set to false\n * to use the existing retry state, even when exceptions change.\n * @param resetStateOnExceptionChange true to reset.\n * @since 2.6.3\n */\npublic void setResetStateOnExceptionChange(boolean resetStateOnExceptionChange) {\n</code></pre>\n<p>(It is now true by default).</p>\n"}],"owner":{"account_id":16910209,"reputation":25,"user_id":12229445,"display_name":"tinku"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":281,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76679828,"answer_count":1,"score":0,"last_activity_date":1700529547,"creation_date":1689197980,"question_id":76674614,"body_markdown":"I would like to retry consuming a message on processing/deserialiation failure for a finite number of times. After the retries are exhausted, I would like to log a message, commit the offset and move ahead with consuming further messages. For this to happen I have configured the error handler bean as below. \r\n\r\nI am using the ack mode as MANUAL_IMMEDIATE and the auto commit is disabled by `enable.auto.commit: false `\r\nOffsets are committed manually/programmatically with a reference to an Acknowledgement object (ack.acknowledge())\r\n\r\nEDIT: As per Gary&#39;s comments, I have edited the config of error handler\r\n    \r\n```\r\n@Bean\r\npublic DefaultErrorHandler errorHandler(){\r\n\r\n   ConsumerRecordRecoverer recovery = (record, ex) -&gt;{\r\n   \r\n      log.error(&quot;Retries have been exhausted. Commiting offset &quot;+record.offset())\r\n    }\r\n  \r\n   // Default backoff\r\n   BackOff backoff = new FixedBackOff(3000, 5);\r\n   DefaultErrorHandler defaultErrorHandler = new DefaultErrorHandler(recovery, backoff);\r\n   defaultErrorHandler.setCommitRecovered(true);\r\n   defaultErrorHandler.setAckAfterHandle(true);\r\n\r\n  // BackOff to use when HttpServerException occurs\r\n     BackOff infiniteRetry = new FixedBackOff(FixedBackOff.DEFAULT_INTERVAL, FixedBackOff.UNLIMITED_ATTEMPTS);\r\n\r\n  BiFunction&lt;ConsumerRecord&lt;?,?&gt;,Exception, BackOff&gt; backOffFunction = (record, ex) -&gt; {\r\n  \r\n  if(ex instanceOf HttpServerException){\r\n      return infiniteRetry;\r\n     }\r\n    return null;\r\n  }\r\n   defaultErrorHandler.removeClassification(DeserializationException.class);\r\n   defaultErrorHandler.setBackOffFunction(backOffFunction)\r\n   return defaultErrorHandler;\r\n}  \r\n```\r\n\r\nQuestions:\r\n\r\n1.  In the case when retries(5) have been exhausted, the idea is to log a message and commit the offset and move forward with consuming other messages. For this to happen, I have configured the below on the error handler. Please confirm if this is enough?\r\n\r\n```\r\ndefaultErrorHandler.setCommitRecovered(true);\r\ndefaultErrorHandler.setAckAfterHandle(true);\r\n```\r\n\r\n2. Since the DesrializationExeption is part of the fatal list, it&#39;s not going to be retried. Therefore I configured the error handler to remove it this way for a retry to occur as configured, when a Deserialization error occurs. Please confirm if this is correct? \r\n\r\n`defaultErrorHandler.removeClassification(DeserializationException.class);`\r\n\r\n3. Is there a way to configure a retry policy for a given exception ? For example, retry consuming a message infinitely on a Database non availability error. This was possible in earlier versions of Springboot/Spring-kafka, as the retry policy can be set on the Listener Container. However, I could not figure this in the latest version. Please help me with any sample if its possible.\r\n\r\n\r\n   \r\n\r\nNote: I have tried the above config and it seems to work. I would like to verify with the experts that this config does what is expected and does not cause any other effects.","title":"Configure default error handler to commit messages after recovery","body":"<p>I would like to retry consuming a message on processing/deserialiation failure for a finite number of times. After the retries are exhausted, I would like to log a message, commit the offset and move ahead with consuming further messages. For this to happen I have configured the error handler bean as below.</p>\n<p>I am using the ack mode as MANUAL_IMMEDIATE and the auto commit is disabled by <code>enable.auto.commit: false </code>\nOffsets are committed manually/programmatically with a reference to an Acknowledgement object (ack.acknowledge())</p>\n<p>EDIT: As per Gary's comments, I have edited the config of error handler</p>\n<pre><code>@Bean\npublic DefaultErrorHandler errorHandler(){\n\n   ConsumerRecordRecoverer recovery = (record, ex) -&gt;{\n   \n      log.error(&quot;Retries have been exhausted. Commiting offset &quot;+record.offset())\n    }\n  \n   // Default backoff\n   BackOff backoff = new FixedBackOff(3000, 5);\n   DefaultErrorHandler defaultErrorHandler = new DefaultErrorHandler(recovery, backoff);\n   defaultErrorHandler.setCommitRecovered(true);\n   defaultErrorHandler.setAckAfterHandle(true);\n\n  // BackOff to use when HttpServerException occurs\n     BackOff infiniteRetry = new FixedBackOff(FixedBackOff.DEFAULT_INTERVAL, FixedBackOff.UNLIMITED_ATTEMPTS);\n\n  BiFunction&lt;ConsumerRecord&lt;?,?&gt;,Exception, BackOff&gt; backOffFunction = (record, ex) -&gt; {\n  \n  if(ex instanceOf HttpServerException){\n      return infiniteRetry;\n     }\n    return null;\n  }\n   defaultErrorHandler.removeClassification(DeserializationException.class);\n   defaultErrorHandler.setBackOffFunction(backOffFunction)\n   return defaultErrorHandler;\n}  \n</code></pre>\n<p>Questions:</p>\n<ol>\n<li>In the case when retries(5) have been exhausted, the idea is to log a message and commit the offset and move forward with consuming other messages. For this to happen, I have configured the below on the error handler. Please confirm if this is enough?</li>\n</ol>\n<pre><code>defaultErrorHandler.setCommitRecovered(true);\ndefaultErrorHandler.setAckAfterHandle(true);\n</code></pre>\n<ol start=\"2\">\n<li>Since the DesrializationExeption is part of the fatal list, it's not going to be retried. Therefore I configured the error handler to remove it this way for a retry to occur as configured, when a Deserialization error occurs. Please confirm if this is correct?</li>\n</ol>\n<p><code>defaultErrorHandler.removeClassification(DeserializationException.class);</code></p>\n<ol start=\"3\">\n<li>Is there a way to configure a retry policy for a given exception ? For example, retry consuming a message infinitely on a Database non availability error. This was possible in earlier versions of Springboot/Spring-kafka, as the retry policy can be set on the Listener Container. However, I could not figure this in the latest version. Please help me with any sample if its possible.</li>\n</ol>\n<p>Note: I have tried the above config and it seems to work. I would like to verify with the experts that this config does what is expected and does not cause any other effects.</p>\n"},{"tags":["java","spring-boot","oauth-2.0","keycloak"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700529242,"creation_date":1700500465,"answer_id":77517763,"question_id":77515715,"body_markdown":"There are quite a few inconsistencies in your question:\r\n- what&#39;s the point of setting up Keycloak for `Basic` authentication? Keycloak is an OIDC authorization server, it is intended to be used in OAuth2 security flows\r\n- you use [`spring-addons-starter-oidc`][1] properties, so I imagine you have [the jar][2] on the classpath (can&#39;t be sure as you provide neither pom nor gradle build files), but you define your own `SecurityFilterChain` without a `securityMatcher` =&gt; this filter chain is intended to process all requests. What&#39;s the point to use spring-addons if the `resourceServerSecurityFilterChain` it configures is never used? \r\n- the `SecurityFilterChain` you defined is stateless, but is configured neither for `Basic` nor `Bearer` authorizations. How do you expect it to work exactly?\r\n\r\nMy guess is because you haven&#39;t set `Basic` or `Bearer` authorization in the `SecurityFilterChain` you defined (and designed to intercept all requests), Spring Security tries to build a security context from a session, but as you also defined `sessionCreationPolicy(SessionCreationPolicy.STATELESS)`, it can&#39;t find a valid session token. But without a reproducer project, it is hard to tell.\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons#1-spring-boot-starter\r\n  [2]: https://repo1.maven.org/maven2/com/c4-soft/springaddons/spring-addons-starter-oidc/","title":"Spring Boot 3 + OAuth2 + Keycloak invalid session ID","body":"<p>There are quite a few inconsistencies in your question:</p>\n<ul>\n<li>what's the point of setting up Keycloak for <code>Basic</code> authentication? Keycloak is an OIDC authorization server, it is intended to be used in OAuth2 security flows</li>\n<li>you use <a href=\"https://github.com/ch4mpy/spring-addons#1-spring-boot-starter\" rel=\"nofollow noreferrer\"><code>spring-addons-starter-oidc</code></a> properties, so I imagine you have <a href=\"https://repo1.maven.org/maven2/com/c4-soft/springaddons/spring-addons-starter-oidc/\" rel=\"nofollow noreferrer\">the jar</a> on the classpath (can't be sure as you provide neither pom nor gradle build files), but you define your own <code>SecurityFilterChain</code> without a <code>securityMatcher</code> =&gt; this filter chain is intended to process all requests. What's the point to use spring-addons if the <code>resourceServerSecurityFilterChain</code> it configures is never used?</li>\n<li>the <code>SecurityFilterChain</code> you defined is stateless, but is configured neither for <code>Basic</code> nor <code>Bearer</code> authorizations. How do you expect it to work exactly?</li>\n</ul>\n<p>My guess is because you haven't set <code>Basic</code> or <code>Bearer</code> authorization in the <code>SecurityFilterChain</code> you defined (and designed to intercept all requests), Spring Security tries to build a security context from a session, but as you also defined <code>sessionCreationPolicy(SessionCreationPolicy.STATELESS)</code>, it can't find a valid session token. But without a reproducer project, it is hard to tell.</p>\n"}],"owner":{"account_id":8765338,"reputation":97,"user_id":6553931,"display_name":"D. D."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700529242,"creation_date":1700481471,"question_id":77515715,"body_markdown":"I am implementing Keycloak 22.0.5 with OAuth2 and Spring Boot 3.1.5. I want to use Basic Authentication. On the keycloak side I have created a Realm, client, user and the appropriate roles for the user and that are applicable to the endpoint I am pinging.\r\nI have the problem that I constantly get this error: \r\n\r\n    DEBUG o.s.s.w.s.SessionManagementFilter.doFilter - Request requested invalid session id ***SESSION_ID_TOKEN***\r\n\r\nThe SESSION_ID_TOKEN is always the same in the logs on each request I try to send to the endpoint and I always get 401 Unauthorized.\r\n\r\nThis is the current implementation that I have:\r\n\r\n*application.yml:*\r\n\r\n    origins: http://localhost:9999\r\n    issuer: **KEYCLOAK-URL**\r\n\r\n    com:\r\n      c4-soft:\r\n        springaddons:\r\n          oidc:\r\n            ops:\r\n              - iss: ${issuer}\r\n                username-claim: preferred_username\r\n                authorities:\r\n                  - path: $.realm_access.roles\r\n                    prefix: ROLE_\r\n                  - path: $.resource_access.*.roles\r\n            resourceserver:\r\n              cors:\r\n                - path: /**\r\n                  allowed-origin-patterns: ${origins}\r\n              permit-all:\r\n                - &quot;/example&quot;\r\n\r\n\r\n*WebSecurityConfig:*\r\n\r\n    @Configuration\r\n    @EnableMethodSecurity\r\n    public class WebSecurityConfig {\r\n    \r\n        @Bean\r\n        public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n            http.csrf(AbstractHttpConfigurer::disable);\r\n            http.authorizeHttpRequests(accessManagement -&gt; accessManagement\r\n                    .anyRequest().authenticated());\r\n            http.sessionManagement(sm -&gt; sm.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\r\n            http.exceptionHandling(eh -&gt; eh.authenticationEntryPoint((request, response, authException) -&gt; {\r\n                response.addHeader(HttpHeaders.WWW_AUTHENTICATE, &quot;Bearer realm=\\&quot;Restricted Content\\&quot;&quot;);\r\n                response.sendError(HttpStatus.UNAUTHORIZED.value(), HttpStatus.UNAUTHORIZED.getReasonPhrase());\r\n            }));\r\n            return http.build();\r\n        }\r\n    }\r\n\r\n\r\nThe settings that I have in Keycloak -&gt; Realm settings -&gt; Sessions are these:\r\n[![enter image description here][1]][1][![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TKUio.png\r\n  [2]: https://i.stack.imgur.com/q4Oo7.png\r\n\r\nAnybody have any idea where the issue might be?","title":"Spring Boot 3 + OAuth2 + Keycloak invalid session ID","body":"<p>I am implementing Keycloak 22.0.5 with OAuth2 and Spring Boot 3.1.5. I want to use Basic Authentication. On the keycloak side I have created a Realm, client, user and the appropriate roles for the user and that are applicable to the endpoint I am pinging.\nI have the problem that I constantly get this error:</p>\n<pre><code>DEBUG o.s.s.w.s.SessionManagementFilter.doFilter - Request requested invalid session id ***SESSION_ID_TOKEN***\n</code></pre>\n<p>The SESSION_ID_TOKEN is always the same in the logs on each request I try to send to the endpoint and I always get 401 Unauthorized.</p>\n<p>This is the current implementation that I have:</p>\n<p><em>application.yml:</em></p>\n<pre><code>origins: http://localhost:9999\nissuer: **KEYCLOAK-URL**\n\ncom:\n  c4-soft:\n    springaddons:\n      oidc:\n        ops:\n          - iss: ${issuer}\n            username-claim: preferred_username\n            authorities:\n              - path: $.realm_access.roles\n                prefix: ROLE_\n              - path: $.resource_access.*.roles\n        resourceserver:\n          cors:\n            - path: /**\n              allowed-origin-patterns: ${origins}\n          permit-all:\n            - &quot;/example&quot;\n</code></pre>\n<p><em>WebSecurityConfig:</em></p>\n<pre><code>@Configuration\n@EnableMethodSecurity\npublic class WebSecurityConfig {\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http.csrf(AbstractHttpConfigurer::disable);\n        http.authorizeHttpRequests(accessManagement -&gt; accessManagement\n                .anyRequest().authenticated());\n        http.sessionManagement(sm -&gt; sm.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\n        http.exceptionHandling(eh -&gt; eh.authenticationEntryPoint((request, response, authException) -&gt; {\n            response.addHeader(HttpHeaders.WWW_AUTHENTICATE, &quot;Bearer realm=\\&quot;Restricted Content\\&quot;&quot;);\n            response.sendError(HttpStatus.UNAUTHORIZED.value(), HttpStatus.UNAUTHORIZED.getReasonPhrase());\n        }));\n        return http.build();\n    }\n}\n</code></pre>\n<p>The settings that I have in Keycloak -&gt; Realm settings -&gt; Sessions are these:\n<a href=\"https://i.stack.imgur.com/TKUio.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TKUio.png\" alt=\"enter image description here\" /></a><a href=\"https://i.stack.imgur.com/q4Oo7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q4Oo7.png\" alt=\"enter image description here\" /></a></p>\n<p>Anybody have any idea where the issue might be?</p>\n"},{"tags":["java","collections","java-8","java-stream"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":5,"creation_date":1700529604,"post_id":77519781,"comment_id":136663454,"body_markdown":"Show how you implemented `equals()` and `hashcode()` for `Car`.  Why do you need to optimize at this point?  Assuming an individual car (VIN) won&#39;t appear more than once in a list, why not use Java&#39;s `Set&lt;&gt;` class, which provides `containsAll()`, `removeAll()` and `retainAll()` set operations?","body":"Show how you implemented <code>equals()</code> and <code>hashcode()</code> for <code>Car</code>.  Why do you need to optimize at this point?  Assuming an individual car (VIN) won&#39;t appear more than once in a list, why not use Java&#39;s <code>Set&lt;&gt;</code> class, which provides <code>containsAll()</code>, <code>removeAll()</code> and <code>retainAll()</code> set operations?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1700531707,"post_id":77519781,"comment_id":136663601,"body_markdown":"Using parallel streams can take *more* time in some cases, not always *less* time. And a thousand elements is not much at all for your purpose here. Don&#39;t optimize for performance until you have a proven bottleneck.","body":"Using parallel streams can take <i>more</i> time in some cases, not always <i>less</i> time. And a thousand elements is not much at all for your purpose here. Don&#39;t optimize for performance until you have a proven bottleneck."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1700531762,"post_id":77519781,"comment_id":136663607,"body_markdown":"I imagine parallel execution here, would actually hinder the latency. _[Parallelism (The Java Tutorials &gt; Collections &gt; Aggregate Operations)](https://docs.oracle.com/javase/tutorial/collections/streams/parallelism.html)_.","body":"I imagine parallel execution here, would actually hinder the latency. <i><a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/parallelism.html\" rel=\"nofollow noreferrer\">Parallelism (The Java Tutorials &gt; Collections &gt; Aggregate Operations)</a></i>."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1700532099,"post_id":77519781,"comment_id":136663637,"body_markdown":"... parallel execution is good for things like, rendering a _[fractal](https://en.wikipedia.org/wiki/Fractal)_.  In the generic sense, the time it takes to manifest the objects, to begin the concurrent process, it just as costly, if not more costly, than just running a sequential execution.","body":"... parallel execution is good for things like, rendering a <i><a href=\"https://en.wikipedia.org/wiki/Fractal\" rel=\"nofollow noreferrer\">fractal</a></i>.  In the generic sense, the time it takes to manifest the objects, to begin the concurrent process, it just as costly, if not more costly, than just running a sequential execution."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1700532506,"post_id":77519781,"comment_id":136663665,"body_markdown":"Tip: For a thousand elements, just use [`Set#removeAll`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html#removeAll(java.util.Collection)) or `retainsAll`.","body":"Tip: For a thousand elements, just use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html#removeAll(java.util.Collection)\" rel=\"nofollow noreferrer\"><code>Set#removeAll</code></a> or <code>retainsAll</code>."},{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":1,"creation_date":1700562518,"post_id":77519781,"comment_id":136667198,"body_markdown":"Seems to me that leveraging functionality of `HashSet` (or `Set` in general) would be more preferrable than running parallel streams over nested iterators over two lists. In my experience, uniqueness filter over collection of elements where multiple properties are checked, will not have noticeable improvements in performance for up to and including hundreds of thousands of elements. We ran into issues with similar nested iterations only since we reached 50K items, and even then using helper key objects in a Set helped in bringing execution time down without parallelisation.","body":"Seems to me that leveraging functionality of <code>HashSet</code> (or <code>Set</code> in general) would be more preferrable than running parallel streams over nested iterators over two lists. In my experience, uniqueness filter over collection of elements where multiple properties are checked, will not have noticeable improvements in performance for up to and including hundreds of thousands of elements. We ran into issues with similar nested iterations only since we reached 50K items, and even then using helper key objects in a Set helped in bringing execution time down without parallelisation."},{"owner":{"account_id":16910209,"reputation":25,"user_id":12229445,"display_name":"tinku"},"score":0,"creation_date":1702049045,"post_id":77519781,"comment_id":136853439,"body_markdown":"Thank you all. All comments have suggested to make use of the methods from Set interface. I have accordingly modified my equals and hashcode method to determine equality between objects and have used the methods from Set interface to check for equality.","body":"Thank you all. All comments have suggested to make use of the methods from Set interface. I have accordingly modified my equals and hashcode method to determine equality between objects and have used the methods from Set interface to check for equality."}],"owner":{"account_id":16910209,"reputation":25,"user_id":12229445,"display_name":"tinku"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1700531512,"answer_count":0,"score":-1,"last_activity_date":1700529192,"creation_date":1700529192,"question_id":77519781,"body_markdown":"I am looking for a better solution/suggestion which is high in performance.\r\n\r\nI have the below use case\r\n\r\n   Compare 2 lists. List A and List B. Both lists contain List of Car objects. I have to check if elements of List A are present in List B. If no, create another list which contains elements that are present only in List A and not List B.\r\n\r\nI have opted to choose parallel streams for better performance.\r\n\r\nEquality of car objects is based on vin. If two cars have same vin, then they are equal.\r\n\r\n```\r\n\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic Class Car{\r\n\r\nprivate String make;\r\nprivate String model;\r\nprivate String vin;\r\n\r\n}\r\n\r\npublic Class App{\r\n\r\npublic static void main(String[] args){\r\n\r\n   Car honda = new Car(&quot;Honda&quot;, &quot;Civic&quot;, &quot;1XCV56&quot;);\r\n   Car toyota = new Car(&quot;Toyota&quot;, &quot;Corolla&quot;, &quot;2XCV56&quot;);\r\n   Car mazda = new Car(&quot;Mazda&quot;, &quot;CX5&quot;, &quot;3XCV56&quot;);\r\n   Car bmw = new Car(&quot;BMW&quot;, &quot;330i&quot;, &quot;4XCV56&quot;);\r\n   Car audi = new Car(&quot;Audi&quot;, &quot;A4&quot;, &quot;5XCV56&quot;);\r\n   Car tesla = new Car(&quot;Tesla&quot;, &quot;model 3&quot;, &quot;6XCV56&quot;);\r\n\r\n   List&lt;Car&gt; firstList = new ArrayList&lt;&gt;;\r\n   firstList.add(honda);\r\n   firstList.add(toyota);\r\n   firstList.add(mazda);\r\n   firstList.add(bmw);\r\n   firstList.add(audi);\r\n   firstList.add(tesla);\r\n\r\n   List&lt;Car&gt; secondList = new ArrayList&lt;&gt;;\r\n   secondList.add(honda);\r\n   secondList.add(toyota);\r\n   secondList.add(mazda);\r\n   secondList.add(bmw);\r\n \r\n   List&lt;Car&gt; uniqueCarsInFirstList = firstList.paralleltream()\r\n        .filter(f -&gt; secondList.parallelStream()\r\n                .noneMatch(t -&gt; t.getVin().equalsIgnoreCase(f.getVin()))\r\n        .collect(Collectors.toList());\r\n\r\n   uniqueCarsInFirstList.stream().forEach(e-&gt;System.out.println(e.getMake()));\r\n   \r\n }\r\n\r\n}\r\n```\r\n*Output:*\r\n*Audi*\r\n*Tesla*\r\n\r\n**Note: In real time, the minimum elements in both lists would at least be a 1000. Also, to compare the equality of objects, we would be checking for equality of multiple other fields in each object. For ex: make, model etc;**\r\n\r\nThis above solution is giving me the expected output. I would like to know if there are any other solutions which have higher performance.\r\n\r\nReference for this solution: https://stackoverflow.com/questions/57252497/java-8-streams-compare-two-lists-object-values-and-add-value-to-new-list\r\n","title":"JAVA 8 Parallel Streams - Compare 2 Lists and get a different list","body":"<p>I am looking for a better solution/suggestion which is high in performance.</p>\n<p>I have the below use case</p>\n<p>Compare 2 lists. List A and List B. Both lists contain List of Car objects. I have to check if elements of List A are present in List B. If no, create another list which contains elements that are present only in List A and not List B.</p>\n<p>I have opted to choose parallel streams for better performance.</p>\n<p>Equality of car objects is based on vin. If two cars have same vin, then they are equal.</p>\n<pre><code>\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic Class Car{\n\nprivate String make;\nprivate String model;\nprivate String vin;\n\n}\n\npublic Class App{\n\npublic static void main(String[] args){\n\n   Car honda = new Car(&quot;Honda&quot;, &quot;Civic&quot;, &quot;1XCV56&quot;);\n   Car toyota = new Car(&quot;Toyota&quot;, &quot;Corolla&quot;, &quot;2XCV56&quot;);\n   Car mazda = new Car(&quot;Mazda&quot;, &quot;CX5&quot;, &quot;3XCV56&quot;);\n   Car bmw = new Car(&quot;BMW&quot;, &quot;330i&quot;, &quot;4XCV56&quot;);\n   Car audi = new Car(&quot;Audi&quot;, &quot;A4&quot;, &quot;5XCV56&quot;);\n   Car tesla = new Car(&quot;Tesla&quot;, &quot;model 3&quot;, &quot;6XCV56&quot;);\n\n   List&lt;Car&gt; firstList = new ArrayList&lt;&gt;;\n   firstList.add(honda);\n   firstList.add(toyota);\n   firstList.add(mazda);\n   firstList.add(bmw);\n   firstList.add(audi);\n   firstList.add(tesla);\n\n   List&lt;Car&gt; secondList = new ArrayList&lt;&gt;;\n   secondList.add(honda);\n   secondList.add(toyota);\n   secondList.add(mazda);\n   secondList.add(bmw);\n \n   List&lt;Car&gt; uniqueCarsInFirstList = firstList.paralleltream()\n        .filter(f -&gt; secondList.parallelStream()\n                .noneMatch(t -&gt; t.getVin().equalsIgnoreCase(f.getVin()))\n        .collect(Collectors.toList());\n\n   uniqueCarsInFirstList.stream().forEach(e-&gt;System.out.println(e.getMake()));\n   \n }\n\n}\n</code></pre>\n<p><em>Output:</em>\n<em>Audi</em>\n<em>Tesla</em></p>\n<p><strong>Note: In real time, the minimum elements in both lists would at least be a 1000. Also, to compare the equality of objects, we would be checking for equality of multiple other fields in each object. For ex: make, model etc;</strong></p>\n<p>This above solution is giving me the expected output. I would like to know if there are any other solutions which have higher performance.</p>\n<p>Reference for this solution: <a href=\"https://stackoverflow.com/questions/57252497/java-8-streams-compare-two-lists-object-values-and-add-value-to-new-list\">Java 8 Streams - Compare two Lists&#39; object values and add value to new List?</a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9748252,"reputation":181,"user_id":7227446,"display_name":"Einar"},"score":0,"creation_date":1480892732,"post_id":40964763,"comment_id":69139044,"body_markdown":"What are you trying to achieve with this code?","body":"What are you trying to achieve with this code?"},{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":0,"creation_date":1480892866,"post_id":40964763,"comment_id":69139091,"body_markdown":"To `true`? I would not expect that from this code. Please make a MCVE. This code finds the first index, of the first `n-1` characters of a String, but starting at index `n-1`. Essentially, if it returns `true`, then the first `n-1` characters are repeated next to each other in the string. But is that the intention here?","body":"To <code>true</code>? I would not expect that from this code. Please make a MCVE. This code finds the first index, of the first <code>n-1</code> characters of a String, but starting at index <code>n-1</code>. Essentially, if it returns <code>true</code>, then the first <code>n-1</code> characters are repeated next to each other in the string. But is that the intention here?"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1480893119,"post_id":40964763,"comment_id":69139162,"body_markdown":"Note that your if/else block is equivalent to `return index != -1;` which is probably more readable.","body":"Note that your if/else block is equivalent to <code>return index != -1;</code> which is probably more readable."},{"owner":{"account_id":6775621,"reputation":74,"user_id":5217478,"display_name":"Akash"},"score":0,"creation_date":1480896121,"post_id":40964763,"comment_id":69139968,"body_markdown":"What are the parameters you are passing?","body":"What are the parameters you are passing?"},{"owner":{"account_id":4404941,"reputation":121,"user_id":4161113,"display_name":"CuriousIndeed"},"score":0,"creation_date":1480966261,"post_id":40964763,"comment_id":69173162,"body_markdown":"I&#39;m working through the codingBat problems..This problem is listed under http://codingbat.com/prob/p136417 \n&quot;Given a string, consider the prefix string made of the first N chars of the string. Does that prefix string appear somewhere else in the string? Assume that the string is not empty and that N is in the range 1..str.length().&quot;","body":"I&#39;m working through the codingBat problems..This problem is listed under <a href=\"http://codingbat.com/prob/p136417\" rel=\"nofollow noreferrer\">codingbat.com/prob/p136417</a>  &quot;Given a string, consider the prefix string made of the first N chars of the string. Does that prefix string appear somewhere else in the string? Assume that the string is not empty and that N is in the range 1..str.length().&quot;"},{"owner":{"account_id":4404941,"reputation":121,"user_id":4161113,"display_name":"CuriousIndeed"},"score":0,"creation_date":1480966593,"post_id":40964763,"comment_id":69173353,"body_markdown":"@Tunaki: Exactly!\n@ Assylias: You are right but then the codes still evaluates always to true.\n@ Akash: the parameters are defined by the codingBat environment","body":"@Tunaki: Exactly! @ Assylias: You are right but then the codes still evaluates always to true. @ Akash: the parameters are defined by the codingBat environment"},{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":0,"creation_date":1480966641,"post_id":40964763,"comment_id":69173383,"body_markdown":"But what is the question?!","body":"But what is the question?!"},{"owner":{"account_id":4404941,"reputation":121,"user_id":4161113,"display_name":"CuriousIndeed"},"score":0,"creation_date":1480966760,"post_id":40964763,"comment_id":69173457,"body_markdown":"@Tunaki Why does the code always return true? Because str.indexOf(prefix,n-1) should search the String str for occurences of the substring prefix starting at index n-1 But even if there are no such strings found the code always return true..What am I missing?","body":"@Tunaki Why does the code always return true? Because str.indexOf(prefix,n-1) should search the String str for occurences of the substring prefix starting at index n-1 But even if there are no such strings found the code always return true..What am I missing?"},{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":0,"creation_date":1480966843,"post_id":40964763,"comment_id":69173520,"body_markdown":"If you try with `prefixAgain(&quot;plop plap&quot;, 5)` (or any index for that matter), it won&#39;t return `true`...","body":"If you try with <code>prefixAgain(&quot;plop plap&quot;, 5)</code> (or any index for that matter), it won&#39;t return <code>true</code>..."},{"owner":{"account_id":4404941,"reputation":121,"user_id":4161113,"display_name":"CuriousIndeed"},"score":0,"creation_date":1480967048,"post_id":40964763,"comment_id":69173636,"body_markdown":"@Tunaki: Probably, but I cannot choose the String str which is passed to the method prefixAgain. The str is choosen by the codingBat environment. The code must then generate the prefix using the first n characters (starting at index 0). Then the code should detect further occurences of that prefix in the remaining string, i.e. starting from index n-1..","body":"@Tunaki: Probably, but I cannot choose the String str which is passed to the method prefixAgain. The str is choosen by the codingBat environment. The code must then generate the prefix using the first n characters (starting at index 0). Then the code should detect further occurences of that prefix in the remaining string, i.e. starting from index n-1.."}],"answers":[{"tags":[],"owner":{"account_id":9748252,"reputation":181,"user_id":7227446,"display_name":"Einar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1480893207,"creation_date":1480893207,"answer_id":40964846,"question_id":40964763,"body_markdown":"I think this would work better for you:\r\n\r\n    int index = str.indexOf(prefix,0);\r\n\r\nYou were trying to find the index of the prefix at the end of where you were looking (n-1). What are you trying to achieve exactly?","title":"Find occurence of substring in string using indexOf and substring in java","body":"<p>I think this would work better for you:</p>\n\n<pre><code>int index = str.indexOf(prefix,0);\n</code></pre>\n\n<p>You were trying to find the index of the prefix at the end of where you were looking (n-1). What are you trying to achieve exactly?</p>\n"},{"tags":[],"owner":{"account_id":6114160,"reputation":58,"user_id":4769732,"display_name":"Nishikant Nipane"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700528864,"creation_date":1480896114,"answer_id":40965235,"question_id":40964763,"body_markdown":"    package com;\r\n    public class Mycode {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.out.println(prefixAgain(&quot;nishikantnishikant&quot;, 11));\r\n    \t\t/* false - if you have repeated string it will return false\r\n    \t\t   until index is greater than length of the string */\r\n\r\n    \t\tSystem.out.println(prefixAgain(&quot;nishikant&quot;, 3));\r\n    \t\t/* False - if there is no repeat, you can get false */\r\n\r\n    \t\tSystem.out.println(prefixAgain(&quot;nishikant&quot;, 2));\r\n    \t\t/* true */\r\n\r\n    \t\tSystem.out.println(prefixAgain(&quot;nishikantnishikant&quot;, 10));\r\n    \t\t/* true - if you have repeated string it will return true\r\n    \t\t   until index is equal to length of the string */\r\n    \t}\r\n    \tpublic static  boolean prefixAgain(String str, int n) {\r\n    \t\tString prefix = str.substring(0,n-1);\r\n    \t\tint index = str.indexOf(prefix,n-1);\r\n    \t\treturn index != -1;\r\n    \t}\r\n    }\r\n\r\n","title":"Find occurence of substring in string using indexOf and substring in java","body":"<pre><code>package com;\npublic class Mycode {\n    public static void main(String[] args) {\n        System.out.println(prefixAgain(&quot;nishikantnishikant&quot;, 11));\n        /* false - if you have repeated string it will return false\n           until index is greater than length of the string */\n\n        System.out.println(prefixAgain(&quot;nishikant&quot;, 3));\n        /* False - if there is no repeat, you can get false */\n\n        System.out.println(prefixAgain(&quot;nishikant&quot;, 2));\n        /* true */\n\n        System.out.println(prefixAgain(&quot;nishikantnishikant&quot;, 10));\n        /* true - if you have repeated string it will return true\n           until index is equal to length of the string */\n    }\n    public static  boolean prefixAgain(String str, int n) {\n        String prefix = str.substring(0,n-1);\n        int index = str.indexOf(prefix,n-1);\n        return index != -1;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1700530132,"post_id":41048470,"comment_id":136663497,"body_markdown":"Standard practice for java is for ranges to be semi closed `[int start, int finish)`.  You may want to keep this in mind when developing your own applications which have ranges.","body":"Standard practice for java is for ranges to be semi closed <code>[int start, int finish)</code>.  You may want to keep this in mind when developing your own applications which have ranges."}],"tags":[],"owner":{"account_id":4404941,"reputation":121,"user_id":4161113,"display_name":"CuriousIndeed"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481229732,"creation_date":1481229732,"answer_id":41048470,"question_id":40964763,"body_markdown":"I finally realized that I have to use n insted of n-1 in the code. \r\nThis is because the substring method has two different conventions for start and end index. \r\n\r\n`str.substring(0,n)` includes the start index (0) but excludes the end index (n). This intuitively makes sense because as such the length of the substring matches n. ","title":"Find occurence of substring in string using indexOf and substring in java","body":"<p>I finally realized that I have to use n insted of n-1 in the code. \nThis is because the substring method has two different conventions for start and end index. </p>\n\n<p><code>str.substring(0,n)</code> includes the start index (0) but excludes the end index (n). This intuitively makes sense because as such the length of the substring matches n. </p>\n"}],"owner":{"account_id":4404941,"reputation":121,"user_id":4161113,"display_name":"CuriousIndeed"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1700528960,"creation_date":1480892561,"question_id":40964763,"body_markdown":"Why this code always return `true`?\r\n\r\n    public boolean prefixAgain(String str, int n) {\r\n        String prefix = str.substring(0,n-1);\r\n        int index = str.indexOf(prefix,n-1);\r\n        return index != -1;\r\n    }","title":"Find occurence of substring in string using indexOf and substring in java","body":"<p>Why this code always return <code>true</code>?</p>\n<pre><code>public boolean prefixAgain(String str, int n) {\n    String prefix = str.substring(0,n-1);\n    int index = str.indexOf(prefix,n-1);\n    return index != -1;\n}\n</code></pre>\n"},{"tags":["java","sql","hibernate","collections","garbage-collection"],"comments":[{"owner":{"account_id":116755,"reputation":12030,"user_id":306042,"accept_rate":80,"display_name":"milan"},"score":2,"creation_date":1324547417,"post_id":8602073,"comment_id":10673116,"body_markdown":"what&#39;s the difference between those two machines? is one 32bit and the other 64bit? which java versions you have on them? the same/different?","body":"what&#39;s the difference between those two machines? is one 32bit and the other 64bit? which java versions you have on them? the same/different?"},{"owner":{"account_id":1062201,"reputation":33,"user_id":1063577,"accept_rate":25,"display_name":"Abhimanyu"},"score":0,"creation_date":1324548063,"post_id":8602073,"comment_id":10673334,"body_markdown":"java version at both machine is 1.6.0_29-b11 and windows 5.1 (xpsp3) 32 bit x86","body":"java version at both machine is 1.6.0_29-b11 and windows 5.1 (xpsp3) 32 bit x86"},{"owner":{"account_id":1023013,"reputation":16655,"user_id":1032890,"accept_rate":100,"display_name":"GeertPt"},"score":0,"creation_date":1324558964,"post_id":8602073,"comment_id":10676496,"body_markdown":"Maybe you have another application running on the 3GB server that is taking too much? E.g. SQL Server?","body":"Maybe you have another application running on the 3GB server that is taking too much? E.g. SQL Server?"}],"answers":[{"comments":[{"owner":{"account_id":1062201,"reputation":33,"user_id":1063577,"accept_rate":25,"display_name":"Abhimanyu"},"score":0,"creation_date":1324548091,"post_id":8602181,"comment_id":10673347,"body_markdown":"java version at both machine is 1.6.0_29-b11 and windows 5.1 (xpsp3) 32 bit x86","body":"java version at both machine is 1.6.0_29-b11 and windows 5.1 (xpsp3) 32 bit x86"},{"owner":{"account_id":1062201,"reputation":33,"user_id":1063577,"accept_rate":25,"display_name":"Abhimanyu"},"score":0,"creation_date":1324549610,"post_id":8602181,"comment_id":10673793,"body_markdown":"[java] Exception in thread &quot;Thread-29&quot; java.lang.OutOfMemoryError: Java heap space\n     [java] \tat com.mysql.jdbc.MysqlIO.nextRowFast(MysqlIO.java:1624)\n     [java] \tat com.mysql.jdbc.MysqlIO.nextRow(MysqlIO.java:1401)\n     [java] \tat com.mysql.jdbc.MysqlIO.readSingleRowSet(MysqlIO.java:2840)\n     [java] \tat com.mysql.jdbc.MysqlIO.getResultSet(MysqlIO.java:468)\n     [java] \tat com.mysql.jdbc.MysqlIO.readResultsForQueryOrUpdate(MysqlIO.java:2534)\n     [java] \tat com.mysql.jdbc.MysqlIO.readAllResults(MysqlIO.java:1749)\n     [java] \tat com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2159)","body":"[java] Exception in thread &quot;Thread-29&quot; java.lang.OutOfMemoryError: Java heap space      [java] \tat com.mysql.jdbc.MysqlIO.nextRowFast(MysqlIO.java:1624)      [java] \tat com.mysql.jdbc.MysqlIO.nextRow(MysqlIO.java:1401)      [java] \tat com.mysql.jdbc.MysqlIO.readSingleRowSet(MysqlIO.java:2840)      [java] \tat com.mysql.jdbc.MysqlIO.getResultSet(MysqlIO.java:468)      [java] \tat com.mysql.jdbc.MysqlIO.readResultsForQueryOrUpdate(MysqlIO.j&zwnj;&#8203;ava:2534)      [java] \tat com.mysql.jdbc.MysqlIO.readAllResults(MysqlIO.java:1749)      [java] \tat com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2159)"},{"owner":{"account_id":1062201,"reputation":33,"user_id":1063577,"accept_rate":25,"display_name":"Abhimanyu"},"score":0,"creation_date":1324549639,"post_id":8602181,"comment_id":10673806,"body_markdown":"[java] Exception in thread &quot;TimerQueue&quot; java.lang.OutOfMemoryError: Java heap space\n     [java] \tat java.awt.EventQueue.invokeLater(Unknown Source)\n     [java] \tat javax.swing.SwingUtilities.invokeLater(Unknown Source)\n     [java] \tat javax.swing.Timer$1.run(Unknown Source)\n     [java] \tat javax.swing.Timer$1.run(Unknown Source)\n     [java] \tat java.security.AccessController.doPrivileged(Native Method)\n     [java] \tat javax.swing.Timer.post(Unknown Source)\n     [java] \tat javax.swing.TimerQueue.postExpiredTimers(Unknown Source)\n     [java] \tat javax.swing.TimerQueue.run(Unknown Source)","body":"[java] Exception in thread &quot;TimerQueue&quot; java.lang.OutOfMemoryError: Java heap space      [java] \tat java.awt.EventQueue.invokeLater(Unknown Source)      [java] \tat javax.swing.SwingUtilities.invokeLater(Unknown Source)      [java] \tat javax.swing.Timer$1.run(Unknown Source)      [java] \tat javax.swing.Timer$1.run(Unknown Source)      [java] \tat java.security.AccessController.doPrivileged(Native Method)      [java] \tat javax.swing.Timer.post(Unknown Source)      [java] \tat javax.swing.TimerQueue.postExpiredTimers(Unknown Source)      [java] \tat javax.swing.TimerQueue.run(Unknown Source)"},{"owner":{"account_id":1062201,"reputation":33,"user_id":1063577,"accept_rate":25,"display_name":"Abhimanyu"},"score":0,"creation_date":1324549689,"post_id":8602181,"comment_id":10673817,"body_markdown":"[java] Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.OutOfMemoryError: Java heap space\n     [java] \tat javax.swing.border.CompoundBorder.getBorderInsets(Unknown Source)\n     [java] \tat javax.swing.JComponent.getInsets(Unknown Source)\n     [java] \tat javax.swing.SwingUtilities.calculateInnerArea(Unknown Source)\n     [java] \tat javax.swing.plaf.basic.BasicProgressBarUI.sizeChanged(Unknown Source)\n     [java] \tat javax.swing.plaf.basic.BasicProgressBarUI.setAnimationIndex(Unknown Source)\n   \tat com.sun.java.swing.plaf.windows.WindowsProgressBarUI.setAnimationIndex(Unknown Source)","body":"[java] Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.OutOfMemoryError: Java heap space      [java] \tat javax.swing.border.CompoundBorder.getBorderInsets(Unknown Source)      [java] \tat javax.swing.JComponent.getInsets(Unknown Source)      [java] \tat javax.swing.SwingUtilities.calculateInnerArea(Unknown Source)      [java] \tat javax.swing.plaf.basic.BasicProgressBarUI.sizeChanged(Unknow&zwnj;&#8203;n Source)      [java] \tat javax.swing.plaf.basic.BasicProgressBarUI.setAnimationIndex(&zwnj;&#8203;Unknown Source)    \tat com.sun.java.swing.plaf.windows.WindowsProgressBarUI.setAnim&zwnj;&#8203;ationIndex(Unknown Source)"},{"owner":{"account_id":1106839,"reputation":842,"user_id":1098090,"display_name":"andrey"},"score":0,"creation_date":1324556116,"post_id":8602181,"comment_id":10675674,"body_markdown":"Hmm... I have no ideas why do you get OOME. But however on your place I&#39;d check 1) you are working with the same database (if databases are different - the one with huge tables could be an issue)  2) If you are developer of this Java application try to limit the number of rows displayed in JTable of user GUI (by implementing next/previous page mechanism)","body":"Hmm... I have no ideas why do you get OOME. But however on your place I&#39;d check 1) you are working with the same database (if databases are different - the one with huge tables could be an issue)  2) If you are developer of this Java application try to limit the number of rows displayed in JTable of user GUI (by implementing next/previous page mechanism)"},{"owner":{"account_id":1106839,"reputation":842,"user_id":1098090,"display_name":"andrey"},"score":0,"creation_date":1324556165,"post_id":8602181,"comment_id":10675695,"body_markdown":"3) as last resort (if you are developer of this app) try to run application in debugger and pause it before OOME and check what kind of objects are taking space too much space with VisualVM (normal values for space you can get by running VisualVM on working machine).","body":"3) as last resort (if you are developer of this app) try to run application in debugger and pause it before OOME and check what kind of objects are taking space too much space with VisualVM (normal values for space you can get by running VisualVM on working machine)."},{"owner":{"account_id":1062201,"reputation":33,"user_id":1063577,"accept_rate":25,"display_name":"Abhimanyu"},"score":0,"creation_date":1324614867,"post_id":8602181,"comment_id":10689225,"body_markdown":"1 hibernate Query is taking 207474 records from MySql table that could be the problem but not sure because heap dump which is generated at OOME in jVisualVm is not opened i have to get heap dump again !","body":"1 hibernate Query is taking 207474 records from MySql table that could be the problem but not sure because heap dump which is generated at OOME in jVisualVm is not opened i have to get heap dump again !"}],"tags":[],"owner":{"account_id":1106839,"reputation":842,"user_id":1098090,"display_name":"andrey"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1324547845,"creation_date":1324547845,"answer_id":8602181,"question_id":8602073,"body_markdown":"The same application that run in 64-bit JVM can consume as much as twice more memory.\r\n\r\nYour scenarion is possible if machine where you getting OOME have 64-bit JVM installed and machine where you have no exception is 32-bit JVM. \r\n\r\nHard to answer more without your app in hands.","title":"java.lang.OutOfMemoryError: Java heap space (&quot;-Xmx1280M&quot;)","body":"<p>The same application that run in 64-bit JVM can consume as much as twice more memory.</p>\n\n<p>Your scenarion is possible if machine where you getting OOME have 64-bit JVM installed and machine where you have no exception is 32-bit JVM. </p>\n\n<p>Hard to answer more without your app in hands.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1324550406,"creation_date":1324550406,"answer_id":8602672,"question_id":8602073,"body_markdown":"Shutdown server, remove all caches and restart. When then the problem persists it must a different system configuration, database or so, and might be retraceable to some wrong coding.","title":"java.lang.OutOfMemoryError: Java heap space (&quot;-Xmx1280M&quot;)","body":"<p>Shutdown server, remove all caches and restart. When then the problem persists it must a different system configuration, database or so, and might be retraceable to some wrong coding.</p>\n"},{"tags":[],"owner":{"account_id":321412,"reputation":5968,"user_id":640224,"accept_rate":71,"display_name":"henry"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1324559002,"creation_date":1324559002,"answer_id":8604251,"question_id":8602073,"body_markdown":"Set your maximum and minimum heap to the same size (-Xms1280m -Xmx1280m) so that the jvm will attempt to grab the full amount on startup. It maybe that on one machine there is not a large enough contiguous chunk of memory.\r\n\r\nI have seen virus checkers and other software prevent the JVM from finding contiguous chunks even when the is a large amount of free ram.","title":"java.lang.OutOfMemoryError: Java heap space (&quot;-Xmx1280M&quot;)","body":"<p>Set your maximum and minimum heap to the same size (-Xms1280m -Xmx1280m) so that the jvm will attempt to grab the full amount on startup. It maybe that on one machine there is not a large enough contiguous chunk of memory.</p>\n\n<p>I have seen virus checkers and other software prevent the JVM from finding contiguous chunks even when the is a large amount of free ram.</p>\n"}],"owner":{"account_id":1062201,"reputation":33,"user_id":1063577,"accept_rate":25,"display_name":"Abhimanyu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9096,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1700528680,"creation_date":1324547275,"question_id":8602073,"body_markdown":"    java.lang.OutOfMemoryError: Java heap space\r\n    Exception in thread &quot;RMI TCP Connection(idle)&quot; java.lang.OutOfMemoryError: Java heap space\r\n\r\nI am getting this error my system RAM is 3GB and I have given `-Xmx1280M`. Still, I am getting this error.\r\nIn some other machine with 2GB RAM and `-Xmx1280M` option, this error is not coming (Same operation).\r\nWhat can be the problem? I am using java VisualVM to track which objects are taking memory but heap which is generating at OOME is very big. It is taking very much time to load the heap and &quot;Computing Retained Size&quot; seems to be never ending.\r\n\r\nWhat should I do to recover from OOME?\r\n\r\n","title":"java.lang.OutOfMemoryError: Java heap space (&quot;-Xmx1280M&quot;)","body":"<pre><code>java.lang.OutOfMemoryError: Java heap space\nException in thread \"RMI TCP Connection(idle)\" java.lang.OutOfMemoryError: Java heap space\n</code></pre>\n\n<p>I am getting this error my system RAM is 3GB and I have given <code>-Xmx1280M</code>. Still, I am getting this error.\nIn some other machine with 2GB RAM and <code>-Xmx1280M</code> option, this error is not coming (Same operation).\nWhat can be the problem? I am using java VisualVM to track which objects are taking memory but heap which is generating at OOME is very big. It is taking very much time to load the heap and \"Computing Retained Size\" seems to be never ending.</p>\n\n<p>What should I do to recover from OOME?</p>\n"},{"tags":["java","static-methods","valueinjecter"],"answers":[{"tags":[],"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700528670,"creation_date":1700528670,"answer_id":77519766,"question_id":77519754,"body_markdown":"You can achieve this, **BUT** \r\n\r\n1. the `@Value` annotation needs to be a non-static field, and then you can pass it to a static variable after the injection happens (if this is Spring, you can listen to a life cycle event - or change the injection to happen in the constructor)\r\n2. you can only use your static method after the injection happens.\r\n\r\nSo altogether unwise, unless you are in full control of the application life cycle.","title":"Inject value from application.properies into one static value and use that value in same class static method","body":"<p>You can achieve this, <strong>BUT</strong></p>\n<ol>\n<li>the <code>@Value</code> annotation needs to be a non-static field, and then you can pass it to a static variable after the injection happens (if this is Spring, you can listen to a life cycle event - or change the injection to happen in the constructor)</li>\n<li>you can only use your static method after the injection happens.</li>\n</ol>\n<p>So altogether unwise, unless you are in full control of the application life cycle.</p>\n"}],"owner":{"account_id":25929520,"reputation":1,"user_id":19650844,"display_name":"lalala"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1700528670,"creation_date":1700528380,"question_id":77519754,"body_markdown":"Just like stated in title, is it possible to implement such functionality in java? Thanks.\r\n\r\nSuppose I have a class myClass.java, is it possible to achieve below functionality\r\n\r\n   \r\n\r\n    public class myClass {\r\n\r\n    @Value(&quot;{myString}&quot;)\r\n    private static String myString;\r\n    \r\n    static String myStaticMethod (final Stringp[] args) {\r\n    if args.length &gt; 0 {\r\n    retrun args[0] + myString;}\r\n    }\r\n    }","title":"Inject value from application.properies into one static value and use that value in same class static method","body":"<p>Just like stated in title, is it possible to implement such functionality in java? Thanks.</p>\n<p>Suppose I have a class myClass.java, is it possible to achieve below functionality</p>\n<pre><code>public class myClass {\n\n@Value(&quot;{myString}&quot;)\nprivate static String myString;\n\nstatic String myStaticMethod (final Stringp[] args) {\nif args.length &gt; 0 {\nretrun args[0] + myString;}\n}\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","amazon-sqs","scheduling","spring-jms"],"comments":[{"owner":{"account_id":535778,"reputation":49549,"user_id":905093,"display_name":"Book Of Zeus"},"score":0,"creation_date":1624510677,"post_id":68109113,"comment_id":120379538,"body_markdown":"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-delay-queues.html","body":"<a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-delay-queues.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/AWSSimpleQueueService/latest/&hellip;</a>"},{"owner":{"account_id":3630600,"reputation":5980,"user_id":3026886,"accept_rate":93,"display_name":"rado"},"score":0,"creation_date":1624511272,"post_id":68109113,"comment_id":120379694,"body_markdown":"@BookOfZeus unfortunately this don&#39;t suit me since `The maximum is 15 minutes`. I want a 4h delay","body":"@BookOfZeus unfortunately this don&#39;t suit me since <code>The maximum is 15 minutes</code>. I want a 4h delay"},{"owner":{"account_id":535778,"reputation":49549,"user_id":905093,"display_name":"Book Of Zeus"},"score":0,"creation_date":1624593013,"post_id":68109113,"comment_id":120405958,"body_markdown":"then have a counter on your queue item and reinsert every 15 minutes 15 times ... when it reach 15, you have waited 4 hours","body":"then have a counter on your queue item and reinsert every 15 minutes 15 times ... when it reach 15, you have waited 4 hours"}],"answers":[{"comments":[{"owner":{"account_id":3630600,"reputation":5980,"user_id":3026886,"accept_rate":93,"display_name":"rado"},"score":0,"creation_date":1624511428,"post_id":68109224,"comment_id":120379726,"body_markdown":"since I want a 4h delay, and the maximum `DelaySeconds` is 15min, this step function would be called 4h/15min = 16 times?","body":"since I want a 4h delay, and the maximum <code>DelaySeconds</code> is 15min, this step function would be called 4h/15min = 16 times?"},{"owner":{"account_id":2898330,"reputation":7846,"user_id":2485624,"accept_rate":89,"display_name":"Harkirat Saluja"},"score":0,"creation_date":1638521278,"post_id":68109224,"comment_id":124115600,"body_markdown":"No, step function is called only when the state of the execution changes.","body":"No, step function is called only when the state of the execution changes."}],"tags":[],"owner":{"account_id":3409800,"reputation":8299,"user_id":2860032,"display_name":"Jason Wadsworth"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624504882,"creation_date":1624504882,"answer_id":68109224,"question_id":68109113,"body_markdown":"You could send message B to a Step Functions state machine and put a wait state in to wait for 4 hours before sending it to the queue. The state machine would keep the state for you, and you can [send messages directly to SQS from Step Functions](https://docs.aws.amazon.com/step-functions/latest/dg/connect-sqs.html) so you don&#39;t need to write any code.","title":"How to delay retry by 4 hours on SQS?","body":"<p>You could send message B to a Step Functions state machine and put a wait state in to wait for 4 hours before sending it to the queue. The state machine would keep the state for you, and you can <a href=\"https://docs.aws.amazon.com/step-functions/latest/dg/connect-sqs.html\" rel=\"nofollow noreferrer\">send messages directly to SQS from Step Functions</a> so you don't need to write any code.</p>\n"},{"tags":[],"owner":{"account_id":11191659,"reputation":2248,"user_id":14114029,"display_name":"Foghorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1624882652,"creation_date":1624882652,"answer_id":68163230,"question_id":68109113,"body_markdown":"I would write a small AWS Lambda function that gets invoked every ~minute.  That function would get a message (off the hopefully FIFO-type SQS queue) and check the time it was added.  If it was added &gt;= 4 hours, it would delete it off the incoming queue and add it to the delayed by 4 hour queue, which your application could listen to.  If it moved a message, continue to do so until the next message isn&#39;t 4 hours old.  Increase/decrease the frequency of the lambda to increase the granularity of how &#39;tight&#39; to 4 hours you are, but at the added expense of running the lambda more often.\r\n\r\nHere is a quick link to an example of an AWS Lambda function using SQS: https://docs.aws.amazon.com/lambda/latest/dg/with-sqs-example.html","title":"How to delay retry by 4 hours on SQS?","body":"<p>I would write a small AWS Lambda function that gets invoked every ~minute.  That function would get a message (off the hopefully FIFO-type SQS queue) and check the time it was added.  If it was added &gt;= 4 hours, it would delete it off the incoming queue and add it to the delayed by 4 hour queue, which your application could listen to.  If it moved a message, continue to do so until the next message isn't 4 hours old.  Increase/decrease the frequency of the lambda to increase the granularity of how 'tight' to 4 hours you are, but at the added expense of running the lambda more often.</p>\n<p>Here is a quick link to an example of an AWS Lambda function using SQS: <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/with-sqs-example.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/lambda/latest/dg/with-sqs-example.html</a></p>\n"},{"tags":[],"owner":{"account_id":3630600,"reputation":5980,"user_id":3026886,"accept_rate":93,"display_name":"rado"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625321446,"creation_date":1625321446,"answer_id":68237018,"question_id":68109113,"body_markdown":"Since I was using `JmsListener` with `setSessionAcknowledgeMode(Session.CLIENT_ACKNOWLEDGE)`, I decided to run this at the end of the consumer of re-processable messages:\r\n\r\n    myAmazonSqsInstance.sendMessage(\r\n            new SendMessageRequest()\r\n                    .withQueueUrl(&quot;queueName&quot;)\r\n                    .withMessageBody(myMessageWithText)\r\n                    .withDelaySeconds(900) // 900s = 15min\r\n    );\r\n\r\nThis way this message will be consumed successfully but a new message with the same body will be produced on the queue. This message will be consumed in 15min, and due to my business logic, fail again. There will be 16 fails (16*15min=4h) til it finally is consumed without producing new messages. \r\n\r\nAlthough this is not what I asked for, and it&#39;s similar to the other answers (only the tech stack is different), I decided to write it down here to make a java solution available","title":"How to delay retry by 4 hours on SQS?","body":"<p>Since I was using <code>JmsListener</code> with <code>setSessionAcknowledgeMode(Session.CLIENT_ACKNOWLEDGE)</code>, I decided to run this at the end of the consumer of re-processable messages:</p>\n<pre><code>myAmazonSqsInstance.sendMessage(\n        new SendMessageRequest()\n                .withQueueUrl(&quot;queueName&quot;)\n                .withMessageBody(myMessageWithText)\n                .withDelaySeconds(900) // 900s = 15min\n);\n</code></pre>\n<p>This way this message will be consumed successfully but a new message with the same body will be produced on the queue. This message will be consumed in 15min, and due to my business logic, fail again. There will be 16 fails (16*15min=4h) til it finally is consumed without producing new messages.</p>\n<p>Although this is not what I asked for, and it's similar to the other answers (only the tech stack is different), I decided to write it down here to make a java solution available</p>\n"},{"tags":[],"owner":{"account_id":4070522,"reputation":5252,"user_id":3343801,"display_name":"Venkateswara Rao"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700528055,"creation_date":1700528055,"answer_id":77519738,"question_id":68109113,"body_markdown":"The easiest and robust way is, Have a timestamp attribute of when it can be processed and use delay window to hide it for 30 mins. When the message is not ready to consume(i.e. timestamp is less than current time), keep it back to SQS again if the time not reached, else process it.\r\n","title":"How to delay retry by 4 hours on SQS?","body":"<p>The easiest and robust way is, Have a timestamp attribute of when it can be processed and use delay window to hide it for 30 mins. When the message is not ready to consume(i.e. timestamp is less than current time), keep it back to SQS again if the time not reached, else process it.</p>\n"}],"owner":{"account_id":3630600,"reputation":5980,"user_id":3026886,"accept_rate":93,"display_name":"rado"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4069,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":68163230,"answer_count":4,"score":3,"last_activity_date":1700528055,"creation_date":1624503831,"question_id":68109113,"body_markdown":"**TL;DR:** how to mimic [rabbitMQ&#39;s scheduling functionality][1] keeping the consumer:\r\n1. stateless\r\n2. free from managing scheduled messages\r\n3. free from useless retries from scheduled messages between receiving the message and finally consuming it the correct scheduled time\r\n\r\nI have a single SQS queue with default properties on creation. The average time a consumer takes to process a message is 1~2s. But a few messages needs to be processed twice, between a 4h window. These messages are called B, and the others are called A.\r\n\r\nSuppose I have my queue with the following messages: `A1, A2, B1, A3, B2` (5 messages, max 10s to consume them all) at the start of these table:\r\n\r\n    time     | what should happen\r\n    ---------|-------------------\r\n    now      | consumer connected to queue\r\n    now+10s  | all As were consumed successfully and deleted from queue\r\n               Bs had their unsuccessful first try and now they are waiting for their retry in 4h\r\n    between  | nothing happens since no new messages arrived and old ones are waiting\r\n    now+4h4s | Bs successfully consumed during second retry and due that, deleted from queue\r\n\r\nI have a `Spring` application where I can throw exceptions when I find a type `B` message. Due simplicity and scalability, I want to have one single thread consuming messages taking 1~2s to consume each message. \r\n\r\nThis way, I cannot hang message processing [as this answer suggested][2]. I also don&#39;t need SQS&#39; `Delivery delay` since it postpones just the messages arriving at queue and not retries. If possible, I would like to keep using long polling `@JmsListener` and avoid at all keeping any state on my memory&#39;s application. I [want to avoid this][3] if possible\r\n\r\n\r\n  [1]: https://blog.rabbitmq.com/posts/2015/04/scheduling-messages-with-rabbitmq#:~:text=To%20delay%20a%20message%20a,queues%20or%20to%20other%20exchanges.\r\n  [2]: https://stackoverflow.com/a/32532414/3026886\r\n  [3]: https://docs.aws.amazon.com/general/latest/gr/api-retries.html","title":"How to delay retry by 4 hours on SQS?","body":"<p><strong>TL;DR:</strong> how to mimic <a href=\"https://blog.rabbitmq.com/posts/2015/04/scheduling-messages-with-rabbitmq#:%7E:text=To%20delay%20a%20message%20a,queues%20or%20to%20other%20exchanges.\" rel=\"nofollow noreferrer\">rabbitMQ's scheduling functionality</a> keeping the consumer:</p>\n<ol>\n<li>stateless</li>\n<li>free from managing scheduled messages</li>\n<li>free from useless retries from scheduled messages between receiving the message and finally consuming it the correct scheduled time</li>\n</ol>\n<p>I have a single SQS queue with default properties on creation. The average time a consumer takes to process a message is 1~2s. But a few messages needs to be processed twice, between a 4h window. These messages are called B, and the others are called A.</p>\n<p>Suppose I have my queue with the following messages: <code>A1, A2, B1, A3, B2</code> (5 messages, max 10s to consume them all) at the start of these table:</p>\n<pre><code>time     | what should happen\n---------|-------------------\nnow      | consumer connected to queue\nnow+10s  | all As were consumed successfully and deleted from queue\n           Bs had their unsuccessful first try and now they are waiting for their retry in 4h\nbetween  | nothing happens since no new messages arrived and old ones are waiting\nnow+4h4s | Bs successfully consumed during second retry and due that, deleted from queue\n</code></pre>\n<p>I have a <code>Spring</code> application where I can throw exceptions when I find a type <code>B</code> message. Due simplicity and scalability, I want to have one single thread consuming messages taking 1~2s to consume each message.</p>\n<p>This way, I cannot hang message processing <a href=\"https://stackoverflow.com/a/32532414/3026886\">as this answer suggested</a>. I also don't need SQS' <code>Delivery delay</code> since it postpones just the messages arriving at queue and not retries. If possible, I would like to keep using long polling <code>@JmsListener</code> and avoid at all keeping any state on my memory's application. I <a href=\"https://docs.aws.amazon.com/general/latest/gr/api-retries.html\" rel=\"nofollow noreferrer\">want to avoid this</a> if possible</p>\n"},{"tags":["java","algorithm","sorting","quicksort"],"comments":[{"owner":{"account_id":267086,"reputation":62435,"user_id":555045,"accept_rate":100,"display_name":"harold"},"score":2,"creation_date":1700525645,"post_id":77519637,"comment_id":136663131,"body_markdown":"By the way the stackexchange network has this site for reviews: https://codereview.stackexchange.com/","body":"By the way the stackexchange network has this site for reviews: <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"},{"owner":{"account_id":14315119,"reputation":31,"user_id":10340117,"display_name":"Lydia Yuan"},"score":0,"creation_date":1700526819,"post_id":77519637,"comment_id":136663231,"body_markdown":"@harold Oh, thank you! I wasn&#39;t aware that such a code review site even existed!","body":"@harold Oh, thank you! I wasn&#39;t aware that such a code review site even existed!"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1700530044,"post_id":77519637,"comment_id":136663492,"body_markdown":"I&#39;m curious *why* you would want a worst-case Quicksort algorithm.  Is there a reason?","body":"I&#39;m curious <i>why</i> you would want a worst-case Quicksort algorithm.  Is there a reason?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1700530116,"post_id":77519637,"comment_id":136663495,"body_markdown":"Tooting my own horn: https://codereview.stackexchange.com/questions/226467/quicksort-with-insertion-sort-and-improved-pivot-selection","body":"Tooting my own horn: <a href=\"https://codereview.stackexchange.com/questions/226467/quicksort-with-insertion-sort-and-improved-pivot-selection\" title=\"quicksort with insertion sort and improved pivot selection\">codereview.stackexchange.com/questions/226467/&hellip;</a>"},{"owner":{"account_id":14315119,"reputation":31,"user_id":10340117,"display_name":"Lydia Yuan"},"score":0,"creation_date":1700532628,"post_id":77519637,"comment_id":136663675,"body_markdown":"@markspace I know people don&#39;t mess up the input when they know the pivot strategy in real life. I&#39;m just doing this for fun, not for any serious reasons.","body":"@markspace I know people don&#39;t mess up the input when they know the pivot strategy in real life. I&#39;m just doing this for fun, not for any serious reasons."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1700534810,"post_id":77519637,"comment_id":136663826,"body_markdown":"In that case, &quot;just for fun&quot;, implement something similar to the middle of three pivot selection, except instead of picking the middle value, pick the least or the greatest (just consistently pick one of those).","body":"In that case, &quot;just for fun&quot;, implement something similar to the middle of three pivot selection, except instead of picking the middle value, pick the least or the greatest (just consistently pick one of those)."},{"owner":{"account_id":14315119,"reputation":31,"user_id":10340117,"display_name":"Lydia Yuan"},"score":0,"creation_date":1700585297,"post_id":77519637,"comment_id":136671616,"body_markdown":"@markspace Thanks for all the suggestions! Implementing a more comprehensive worst-case scenario generator sounds like a great idea. I&#39;ll focus on developing that approach later on.","body":"@markspace Thanks for all the suggestions! Implementing a more comprehensive worst-case scenario generator sounds like a great idea. I&#39;ll focus on developing that approach later on."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700527691,"creation_date":1700527691,"answer_id":77519724,"question_id":77519637,"body_markdown":"&gt; _&quot;... I&#39;ve implemented a solution aiming to generate the worst-case scenario for QuickSort using the middle pivot strategy in Java. ...&quot;_\r\n\r\nFor reference, here is a ported version of the, _&quot;[Hoare partition scheme](https://en.wikipedia.org/wiki/Quicksort#Hoare_partition_scheme)&quot;_ algorithm, from _Wikipedia_.\\\r\nThis scheme uses a _middle-point_ pivot.\r\n\r\nI haven&#39;t added any comments; those are the originals.\r\n\r\n```java\r\nclass Quicksort {\r\n    // Sorts a (portion of an) array, divides it into partitions, then sorts those\r\n    void quicksort(int[] A, int lo, int hi) {\r\n        if (lo &gt;= 0 &amp;&amp; hi &gt;= 0 &amp;&amp; lo &lt; hi) {\r\n            int p = partition(A, lo, hi);\r\n            quicksort(A, lo, p); // Note: the pivot is now included\r\n            quicksort(A, p + 1, hi);\r\n        }\r\n    }\r\n\r\n    // Divides array into two partitions\r\n    int partition(int[] A, int lo, int hi) {\r\n        // Pivot value\r\n        int pivot = A[ (int) Math.floor((hi - lo)/2) + lo ]; // The value in the middle of the array\r\n\r\n        // Left index\r\n        int i = lo - 1;\r\n\r\n        // Right index\r\n        int j = hi + 1, t;\r\n\r\n        while (true) {\r\n            // Move the left index to the right at least once and while the element at\r\n            // the left index is less than the pivot\r\n            do i = i + 1;\r\n            while (A[i] &lt; pivot);\r\n\r\n            // Move the right index to the left at least once and while the element at\r\n            // the right index is greater than the pivot\r\n            do j = j - 1;\r\n            while (A[j] &gt; pivot);\r\n\r\n            // If the indices crossed, return\r\n            if (i &gt;= j) return j;\r\n\r\n            // Swap the elements at the left and right indices\r\n            t = A[i];\r\n            A[i] = A[j];\r\n            A[j] = t;\r\n        }\r\n    }\r\n}\r\n```","title":"Code Review: Generating Worst Case for QuickSort Middle Pivot","body":"<blockquote>\n<p><em>&quot;... I've implemented a solution aiming to generate the worst-case scenario for QuickSort using the middle pivot strategy in Java. ...&quot;</em></p>\n</blockquote>\n<p>For reference, here is a ported version of the, <em>&quot;<a href=\"https://en.wikipedia.org/wiki/Quicksort#Hoare_partition_scheme\" rel=\"nofollow noreferrer\">Hoare partition scheme</a>&quot;</em> algorithm, from <em>Wikipedia</em>.<br />\nThis scheme uses a <em>middle-point</em> pivot.</p>\n<p>I haven't added any comments; those are the originals.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Quicksort {\n    // Sorts a (portion of an) array, divides it into partitions, then sorts those\n    void quicksort(int[] A, int lo, int hi) {\n        if (lo &gt;= 0 &amp;&amp; hi &gt;= 0 &amp;&amp; lo &lt; hi) {\n            int p = partition(A, lo, hi);\n            quicksort(A, lo, p); // Note: the pivot is now included\n            quicksort(A, p + 1, hi);\n        }\n    }\n\n    // Divides array into two partitions\n    int partition(int[] A, int lo, int hi) {\n        // Pivot value\n        int pivot = A[ (int) Math.floor((hi - lo)/2) + lo ]; // The value in the middle of the array\n\n        // Left index\n        int i = lo - 1;\n\n        // Right index\n        int j = hi + 1, t;\n\n        while (true) {\n            // Move the left index to the right at least once and while the element at\n            // the left index is less than the pivot\n            do i = i + 1;\n            while (A[i] &lt; pivot);\n\n            // Move the right index to the left at least once and while the element at\n            // the right index is greater than the pivot\n            do j = j - 1;\n            while (A[j] &gt; pivot);\n\n            // If the indices crossed, return\n            if (i &gt;= j) return j;\n\n            // Swap the elements at the left and right indices\n            t = A[i];\n            A[i] = A[j];\n            A[j] = t;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14315119,"reputation":31,"user_id":10340117,"display_name":"Lydia Yuan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1700534855,"answer_count":1,"score":1,"last_activity_date":1700527691,"creation_date":1700525557,"question_id":77519637,"body_markdown":"I&#39;ve implemented a solution aiming to generate the worst-case scenario for QuickSort using the middle pivot strategy in Java. My goal is to rearrange an input array to produce the worst performance during sorting.\r\n\r\nHere&#39;s the code I&#39;ve written:\r\n\r\n\r\n```\r\npublic class WorstCaseForMiddlePivotQuickSort&lt;E extends Comparable&lt;? super E&gt;&gt; {\r\n\tprivate static &lt;E extends Comparable&lt;? super E&gt;&gt; int partition(List&lt;E&gt; arr, int low, int high) {\r\n\t\tint middlePivotIndex = (low + high) / 2;\r\n\t\tE pivot = arr.get(middlePivotIndex);\r\n\t\t\r\n\t\tint i = low;\r\n\t\tint j = high;\r\n\t\t\r\n\t\twhile (i &lt;= j) {\r\n\t\t\twhile (arr.get(i).compareTo(pivot) &lt; 0) {\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\twhile (arr.get(j).compareTo(pivot) &gt; 0) {\r\n\t\t\t\tj--;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (i &lt;= j) {\r\n\t\t\t\tCollections.swap(arr, i, j);\r\n\t\t\t\ti++;\r\n\t\t\t\tj--;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn i;\r\n\t}\r\n\t\r\n\t\r\n\tprivate static &lt;E extends Comparable&lt;? super E&gt;&gt; void quickSortUsingMiddlePivot(List&lt;E&gt; arr, int low, int high, List&lt;Integer&gt; partitionIndexHistory) {\r\n\t\tif (low &gt;= high) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tint partitionIndex = partition(arr, low, high);\r\n\t\tpartitionIndexHistory.add(partitionIndex);\r\n\t\tquickSortUsingMiddlePivot(arr, low, partitionIndex - 1, partitionIndexHistory);\r\n\t\tquickSortUsingMiddlePivot(arr, partitionIndex + 1, high, partitionIndexHistory);\r\n\t}\r\n\t\r\n\tpublic static &lt;E extends Comparable&lt;? super E&gt;&gt; List&lt;E&gt; generateWorstCaseForQuickSortPivotPoint(List&lt;E&gt; input, Map&lt;Integer, Integer&gt; currentIndexToPreviousIndexMapping) {\r\n\t\tList&lt;E&gt; reverseOrdered = new ArrayList&lt;&gt;(input);\r\n\t\treverseOrdered.sort(Collections.reverseOrder());\r\n\t\tList&lt;E&gt; worstCase = new ArrayList&lt;&gt;(Collections.nCopies(reverseOrdered.size(), null));\r\n\t\tint inOrderCount = 0;\r\n\t\twhile (inOrderCount &lt; worstCase.size()) {\r\n\t\t\tint whereToPut = (reverseOrdered.size() - inOrderCount - 1) / 2;\r\n\t\t\tif (worstCase.get(whereToPut) != null) {\r\n\t\t\t\twhereToPut = retrieveIndex(whereToPut, currentIndexToPreviousIndexMapping);\r\n\t\t\t}\r\n\t\t\tworstCase.set(whereToPut, reverseOrdered.get(inOrderCount));\r\n\t\t\tcurrentIndexToPreviousIndexMapping.put(whereToPut, worstCase.size() - inOrderCount - 1);\r\n\t\t\tinOrderCount++;\r\n\t\t}\r\n\t\treturn worstCase;\r\n\t}\r\n\t\r\n\tpublic static &lt;E extends Comparable&lt;? super E&gt;&gt; void quickSortUsingMiddlePivot(List&lt;E&gt; input, List&lt;Integer&gt; partitionIndexHistory) {\r\n\t\tif (input == null || input.isEmpty()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tquickSortUsingMiddlePivot(input, 0, input.size() - 1, partitionIndexHistory);\r\n\t}\r\n\t\r\n\tprivate static int retrieveIndex(int currentIndex, Map&lt;Integer, Integer&gt; currentIndexToPreviousIndexMapping) {\r\n\t\tif (!currentIndexToPreviousIndexMapping.containsKey(currentIndex)) {\r\n\t\t\treturn currentIndex;\r\n\t\t}\r\n\t\treturn retrieveIndex(currentIndexToPreviousIndexMapping.get(currentIndex), currentIndexToPreviousIndexMapping);\r\n\t}\r\n}\r\n\r\n```\r\n\r\nHere is my very simple test. Although my simple test has passed, I&#39;m still concerned about the accuracy of my approach.\r\n\r\n```\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.util.*;\r\n\r\nimport static org.junit.jupiter.api.Assertions.*;\r\nimport static worstcasegenerator.WorstCaseForMiddlePivotQuickSort.generateWorstCaseForQuickSortPivotPoint;\r\nimport static worstcasegenerator.WorstCaseForMiddlePivotQuickSort.quickSortUsingMiddlePivot;\r\n\r\nclass WorstCaseForMiddlePivotQuickSortTest {\r\n\t\r\n\tprivate List&lt;Integer&gt; generatePrefixSizeList(int size) {\r\n\t\tList&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n\t\tfor (int i = 1; i &lt;= size; i++) {\r\n\t\t\tlist.add(i);\r\n\t\t}\r\n\t\treturn list;\r\n\t}\r\n\t\r\n\tprivate void checkIfIsWorstCase(List&lt;Integer&gt; partitionIndexHistory, int size) {\r\n\t\tassertEquals(size - 1, partitionIndexHistory.size());\r\n\t\tfor (int i = 0; i &lt; partitionIndexHistory.size(); i++) {\r\n\t\t\tassertEquals(size - 1 - i, partitionIndexHistory.get(i));\r\n\t\t}\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid testWorstCaseForMiddlePivotQuickSortGenerator() {\r\n\t\tfor (int size = 1; size &lt;= 100; size++) {\r\n\t\t\tList&lt;Integer&gt; testInput = generatePrefixSizeList(size);\r\n\t\t\tList&lt;Integer&gt; partitionIndexHistory = new ArrayList&lt;&gt;();\r\n\t\t\tMap&lt;Integer, Integer&gt; currentIndexToPreviousIndexMapping = new HashMap&lt;&gt;();\r\n\t\t\tList&lt;Integer&gt; worstCase = generateWorstCaseForQuickSortPivotPoint(testInput, currentIndexToPreviousIndexMapping);\r\n\t\t\tSystem.out.println(&quot;input size: &quot; + size + &quot; , worst case input : &quot; + worstCase);\r\n\t\t\tquickSortUsingMiddlePivot(worstCase, partitionIndexHistory);\r\n\t\t\tSystem.out.println(&quot;partition index history: &quot; + partitionIndexHistory);\r\n\t\t\tcheckIfIsWorstCase(partitionIndexHistory, size);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n\r\nI&#39;m seeking feedback on the correctness and potential improvements for this solution. I&#39;m particularly interested in optimizing the algorithm, enhancing code readability, and ensuring the logic for index management is effective.\r\n\r\n\r\nAny feedback, suggestions, or improvements would be greatly appreciated. Thank you!","title":"Code Review: Generating Worst Case for QuickSort Middle Pivot","body":"<p>I've implemented a solution aiming to generate the worst-case scenario for QuickSort using the middle pivot strategy in Java. My goal is to rearrange an input array to produce the worst performance during sorting.</p>\n<p>Here's the code I've written:</p>\n<pre><code>public class WorstCaseForMiddlePivotQuickSort&lt;E extends Comparable&lt;? super E&gt;&gt; {\n    private static &lt;E extends Comparable&lt;? super E&gt;&gt; int partition(List&lt;E&gt; arr, int low, int high) {\n        int middlePivotIndex = (low + high) / 2;\n        E pivot = arr.get(middlePivotIndex);\n        \n        int i = low;\n        int j = high;\n        \n        while (i &lt;= j) {\n            while (arr.get(i).compareTo(pivot) &lt; 0) {\n                i++;\n            }\n            while (arr.get(j).compareTo(pivot) &gt; 0) {\n                j--;\n            }\n            \n            if (i &lt;= j) {\n                Collections.swap(arr, i, j);\n                i++;\n                j--;\n            }\n        }\n        \n        return i;\n    }\n    \n    \n    private static &lt;E extends Comparable&lt;? super E&gt;&gt; void quickSortUsingMiddlePivot(List&lt;E&gt; arr, int low, int high, List&lt;Integer&gt; partitionIndexHistory) {\n        if (low &gt;= high) {\n            return;\n        }\n        int partitionIndex = partition(arr, low, high);\n        partitionIndexHistory.add(partitionIndex);\n        quickSortUsingMiddlePivot(arr, low, partitionIndex - 1, partitionIndexHistory);\n        quickSortUsingMiddlePivot(arr, partitionIndex + 1, high, partitionIndexHistory);\n    }\n    \n    public static &lt;E extends Comparable&lt;? super E&gt;&gt; List&lt;E&gt; generateWorstCaseForQuickSortPivotPoint(List&lt;E&gt; input, Map&lt;Integer, Integer&gt; currentIndexToPreviousIndexMapping) {\n        List&lt;E&gt; reverseOrdered = new ArrayList&lt;&gt;(input);\n        reverseOrdered.sort(Collections.reverseOrder());\n        List&lt;E&gt; worstCase = new ArrayList&lt;&gt;(Collections.nCopies(reverseOrdered.size(), null));\n        int inOrderCount = 0;\n        while (inOrderCount &lt; worstCase.size()) {\n            int whereToPut = (reverseOrdered.size() - inOrderCount - 1) / 2;\n            if (worstCase.get(whereToPut) != null) {\n                whereToPut = retrieveIndex(whereToPut, currentIndexToPreviousIndexMapping);\n            }\n            worstCase.set(whereToPut, reverseOrdered.get(inOrderCount));\n            currentIndexToPreviousIndexMapping.put(whereToPut, worstCase.size() - inOrderCount - 1);\n            inOrderCount++;\n        }\n        return worstCase;\n    }\n    \n    public static &lt;E extends Comparable&lt;? super E&gt;&gt; void quickSortUsingMiddlePivot(List&lt;E&gt; input, List&lt;Integer&gt; partitionIndexHistory) {\n        if (input == null || input.isEmpty()) {\n            return;\n        }\n        quickSortUsingMiddlePivot(input, 0, input.size() - 1, partitionIndexHistory);\n    }\n    \n    private static int retrieveIndex(int currentIndex, Map&lt;Integer, Integer&gt; currentIndexToPreviousIndexMapping) {\n        if (!currentIndexToPreviousIndexMapping.containsKey(currentIndex)) {\n            return currentIndex;\n        }\n        return retrieveIndex(currentIndexToPreviousIndexMapping.get(currentIndex), currentIndexToPreviousIndexMapping);\n    }\n}\n\n</code></pre>\n<p>Here is my very simple test. Although my simple test has passed, I'm still concerned about the accuracy of my approach.</p>\n<pre><code>import org.junit.jupiter.api.Test;\n\nimport java.util.*;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static worstcasegenerator.WorstCaseForMiddlePivotQuickSort.generateWorstCaseForQuickSortPivotPoint;\nimport static worstcasegenerator.WorstCaseForMiddlePivotQuickSort.quickSortUsingMiddlePivot;\n\nclass WorstCaseForMiddlePivotQuickSortTest {\n    \n    private List&lt;Integer&gt; generatePrefixSizeList(int size) {\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n        for (int i = 1; i &lt;= size; i++) {\n            list.add(i);\n        }\n        return list;\n    }\n    \n    private void checkIfIsWorstCase(List&lt;Integer&gt; partitionIndexHistory, int size) {\n        assertEquals(size - 1, partitionIndexHistory.size());\n        for (int i = 0; i &lt; partitionIndexHistory.size(); i++) {\n            assertEquals(size - 1 - i, partitionIndexHistory.get(i));\n        }\n    }\n    \n    @Test\n    void testWorstCaseForMiddlePivotQuickSortGenerator() {\n        for (int size = 1; size &lt;= 100; size++) {\n            List&lt;Integer&gt; testInput = generatePrefixSizeList(size);\n            List&lt;Integer&gt; partitionIndexHistory = new ArrayList&lt;&gt;();\n            Map&lt;Integer, Integer&gt; currentIndexToPreviousIndexMapping = new HashMap&lt;&gt;();\n            List&lt;Integer&gt; worstCase = generateWorstCaseForQuickSortPivotPoint(testInput, currentIndexToPreviousIndexMapping);\n            System.out.println(&quot;input size: &quot; + size + &quot; , worst case input : &quot; + worstCase);\n            quickSortUsingMiddlePivot(worstCase, partitionIndexHistory);\n            System.out.println(&quot;partition index history: &quot; + partitionIndexHistory);\n            checkIfIsWorstCase(partitionIndexHistory, size);\n        }\n    }\n}\n</code></pre>\n<p>I'm seeking feedback on the correctness and potential improvements for this solution. I'm particularly interested in optimizing the algorithm, enhancing code readability, and ensuring the logic for index management is effective.</p>\n<p>Any feedback, suggestions, or improvements would be greatly appreciated. Thank you!</p>\n"},{"tags":["java","android","kotlin","android-animation"],"owner":{"account_id":20561909,"reputation":11,"user_id":15092231,"display_name":"yazan khateeb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700526494,"creation_date":1700502478,"question_id":77517948,"body_markdown":"I&#39;m trying to move `View` above the IME using `WindowInsetsAnimationCompat.Callback` API, in `onProgress` method i added `mView.setTranslationY(-(imeHeight + (100 * interpolatedFraction)))`.\r\n\r\nI expected to move the View by `1092 /** ime height */ + 100 /** extra height */`, and `interpolatedFraction` is to equal 1 by end of the animation\r\n\r\nThe actual result is `1084 /** ime height */ + 92 /** extra height */`, `interpolatedFraction` is equal 0.92 by end of the animation\r\n\r\nI noticed that i can&#39;t move the View more than IME height, every time i&#39;m trying to add extra height the imeHeight and interpolatedFraction reduced by some percentage.\r\n\r\n\r\n\r\n\r\n```\r\npublic class RootViewDeferringInsetsHandler extends WindowInsetsAnimationCompat.Callback implements OnApplyWindowInsetsListener {\r\n  private final ThemedReactContext mContext;\r\n  private final KeyboardMovingViewView mView;\r\n\r\n  public RootViewDeferringInsetsHandler(ThemedReactContext context, KeyboardMovingViewView view) {\r\n    super(WindowInsetsAnimationCompat.Callback.DISPATCH_MODE_STOP);\r\n    mContext = context;\r\n    mView = view;\r\n  }\r\n\r\n  \r\n  @Override\r\n  public WindowInsetsCompat onApplyWindowInsets(View v, WindowInsetsCompat insets) {\r\n    Insets systemInsets = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n\r\n    mView.setContentViewInsets(systemInsets.top, systemInsets.bottom);\r\n\r\n    return WindowInsetsCompat.CONSUMED;\r\n  }\r\n\r\n  @NonNull\r\n  @Override\r\n  public WindowInsetsCompat onProgress(@NonNull WindowInsetsCompat insets, @NonNull List&lt;WindowInsetsAnimationCompat&gt; runningAnimations) {\r\n\r\n    WindowInsetsAnimationCompat animation = runningAnimations.get(0);\r\n\r\n\r\n    boolean isIMEVisible = SystemUIUtils.isIMEVisible(mView);\r\n\r\n    int imeHeight = insets.getInsets(WindowInsetsCompat.Type.ime()).bottom;\r\n    int navigationBars = insets.getInsets(WindowInsetsCompat.Type.navigationBars()).bottom;\r\n\r\n    float interpolatedFraction = isIMEVisible ? animation.getInterpolatedFraction() : 1 - animation.getInterpolatedFraction();\r\n\r\n    imeHeight = imeHeight - (navigationBars * interpolatedFraction);\r\n    mView.setTranslationY(-(imeHeight + (100 * interpolatedFraction)));\r\n\r\n\r\n    return insets;\r\n  }\r\n\r\n}\r\n```\r\n","title":"Android: Issue in Moving View more than IME height in WindowInsetsAnimationCompat.Callback -&gt; onProgress","body":"<p>I'm trying to move <code>View</code> above the IME using <code>WindowInsetsAnimationCompat.Callback</code> API, in <code>onProgress</code> method i added <code>mView.setTranslationY(-(imeHeight + (100 * interpolatedFraction)))</code>.</p>\n<p>I expected to move the View by <code>1092 /** ime height */ + 100 /** extra height */</code>, and <code>interpolatedFraction</code> is to equal 1 by end of the animation</p>\n<p>The actual result is <code>1084 /** ime height */ + 92 /** extra height */</code>, <code>interpolatedFraction</code> is equal 0.92 by end of the animation</p>\n<p>I noticed that i can't move the View more than IME height, every time i'm trying to add extra height the imeHeight and interpolatedFraction reduced by some percentage.</p>\n<pre><code>public class RootViewDeferringInsetsHandler extends WindowInsetsAnimationCompat.Callback implements OnApplyWindowInsetsListener {\n  private final ThemedReactContext mContext;\n  private final KeyboardMovingViewView mView;\n\n  public RootViewDeferringInsetsHandler(ThemedReactContext context, KeyboardMovingViewView view) {\n    super(WindowInsetsAnimationCompat.Callback.DISPATCH_MODE_STOP);\n    mContext = context;\n    mView = view;\n  }\n\n  \n  @Override\n  public WindowInsetsCompat onApplyWindowInsets(View v, WindowInsetsCompat insets) {\n    Insets systemInsets = insets.getInsets(WindowInsetsCompat.Type.systemBars());\n\n    mView.setContentViewInsets(systemInsets.top, systemInsets.bottom);\n\n    return WindowInsetsCompat.CONSUMED;\n  }\n\n  @NonNull\n  @Override\n  public WindowInsetsCompat onProgress(@NonNull WindowInsetsCompat insets, @NonNull List&lt;WindowInsetsAnimationCompat&gt; runningAnimations) {\n\n    WindowInsetsAnimationCompat animation = runningAnimations.get(0);\n\n\n    boolean isIMEVisible = SystemUIUtils.isIMEVisible(mView);\n\n    int imeHeight = insets.getInsets(WindowInsetsCompat.Type.ime()).bottom;\n    int navigationBars = insets.getInsets(WindowInsetsCompat.Type.navigationBars()).bottom;\n\n    float interpolatedFraction = isIMEVisible ? animation.getInterpolatedFraction() : 1 - animation.getInterpolatedFraction();\n\n    imeHeight = imeHeight - (navigationBars * interpolatedFraction);\n    mView.setTranslationY(-(imeHeight + (100 * interpolatedFraction)));\n\n\n    return insets;\n  }\n\n}\n</code></pre>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":7561736,"reputation":5173,"user_id":5739035,"accept_rate":50,"display_name":"Adi Levin"},"score":7,"creation_date":1452869754,"post_id":34813693,"comment_id":57369469,"body_markdown":"Try to specify more precisely what you mean by 5 years ago. A year is not a constant unit of duration. Some years are a bit longer than other years. Do you want the same date as today, 5 years ago? Or do you want 5*365 days ago?","body":"Try to specify more precisely what you mean by 5 years ago. A year is not a constant unit of duration. Some years are a bit longer than other years. Do you want the same date as today, 5 years ago? Or do you want 5*365 days ago?"},{"owner":{"account_id":2021661,"reputation":62048,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":12,"creation_date":1452873618,"post_id":34813693,"comment_id":57372103,"body_markdown":"Invoke `new FlyingDelorean().Builder.speed(88).unit(Unit.MILES_PER_HOUR).build();`","body":"Invoke <code>new FlyingDelorean().Builder.speed(88).unit(Unit.MILES_PER_HOUR)&zwnj;&#8203;.build();</code>"},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":1,"creation_date":1512172088,"post_id":34813693,"comment_id":82164976,"body_markdown":"Related: https://stackoverflow.com/questions/39907925/why-instant-does-not-support-operations-with-chronounit-years","body":"Related: <a href=\"https://stackoverflow.com/questions/39907925/why-instant-does-not-support-operations-with-chronounit-years\" title=\"why instant does not support operations with chronounit years\">stackoverflow.com/questions/39907925/&hellip;</a>"},{"owner":{"account_id":2509209,"reputation":2169,"user_id":2182091,"accept_rate":61,"display_name":"sbeliakov"},"score":0,"creation_date":1513789898,"post_id":34813693,"comment_id":82789830,"body_markdown":"Time math ain&#39;t easy. Imagine instant corresponds to 13:00 Feb 29, 2012. What should instant.plus(-1, ChronoUnit.YEARS) return? Whatever you think it should return, now think what instant.plus(-1, ChronoUnit.YEARS).plus(1, ChronoUnit.YEARS) return.","body":"Time math ain&#39;t easy. Imagine instant corresponds to 13:00 Feb 29, 2012. What should instant.plus(-1, ChronoUnit.YEARS) return? Whatever you think it should return, now think what instant.plus(-1, ChronoUnit.YEARS).plus(1, ChronoUnit.YEARS) return."}],"answers":[{"comments":[{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":3,"creation_date":1452875237,"post_id":34813846,"comment_id":57373161,"body_markdown":"Your first sentence is wrong. `Instant` does NOT support years - and that is why the OP has a problem.","body":"Your first sentence is wrong. <code>Instant</code> does NOT support years - and that is why the OP has a problem."},{"owner":{"account_id":4425177,"reputation":1800,"user_id":3603834,"accept_rate":50,"display_name":"Milan"},"score":1,"creation_date":1453133769,"post_id":34813846,"comment_id":57457875,"body_markdown":"Thnx! It was a typo.","body":"Thnx! It was a typo."}],"tags":[],"owner":{"account_id":4425177,"reputation":1800,"user_id":3603834,"accept_rate":50,"display_name":"Milan"},"comment_count":2,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1453133738,"creation_date":1452869824,"answer_id":34813846,"question_id":34813693,"body_markdown":"Instant does not support addition or subtraction of YEARS.\r\n\r\nYou can use this LocalDate if you only need date without time:\r\n\r\n    LocalDate date = LocalDate.now();\r\n    date = date.plus(-5, ChronoUnit.YEARS);\r\n\r\nOtherwise you can user LocalDateTime.","title":"How to get 5 years before now","body":"<p>Instant does not support addition or subtraction of YEARS.</p>\n\n<p>You can use this LocalDate if you only need date without time:</p>\n\n<pre><code>LocalDate date = LocalDate.now();\ndate = date.plus(-5, ChronoUnit.YEARS);\n</code></pre>\n\n<p>Otherwise you can user LocalDateTime.</p>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"comment_count":0,"down_vote_count":1,"up_vote_count":84,"is_accepted":true,"score":83,"last_activity_date":1452869866,"creation_date":1452869866,"answer_id":34813863,"question_id":34813693,"body_markdown":"    ZonedDateTime.now().minusYears(5).toInstant()\r\n\r\nThat will use your default time zone to compute the time. If you want another one, specify it in `now()`. For example:\r\n\r\n    ZonedDateTime.now(ZoneOffset.UTC).minusYears(5).toInstant()","title":"How to get 5 years before now","body":"<pre><code>ZonedDateTime.now().minusYears(5).toInstant()\n</code></pre>\n\n<p>That will use your default time zone to compute the time. If you want another one, specify it in <code>now()</code>. For example:</p>\n\n<pre><code>ZonedDateTime.now(ZoneOffset.UTC).minusYears(5).toInstant()\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1197669,"reputation":1004,"user_id":1169042,"accept_rate":64,"display_name":"marc82ch"},"score":2,"creation_date":1518765743,"post_id":34814043,"comment_id":84647010,"body_markdown":"Thanks for stating what TemporalUnits are supported","body":"Thanks for stating what TemporalUnits are supported"}],"tags":[],"owner":{"account_id":326657,"reputation":462,"user_id":3639962,"accept_rate":75,"display_name":"pca"},"comment_count":1,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1452870462,"creation_date":1452870462,"answer_id":34814043,"question_id":34813693,"body_markdown":"According to the Javadoc, Instant will only accept temporal units from nanos to days [Instant.plus(long amountToAdd, TemporalUnit unit);][1]\r\n\r\nYou can use [LocalDateTime][2]. You use it the same way, but it will support operation on the YEARS level.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#plus-long-java.time.temporal.TemporalUnit- &quot;Instant.plus&amp;#40;long amountToAdd, TemporalUnit unit&amp;#41;&quot;\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html","title":"How to get 5 years before now","body":"<p>According to the Javadoc, Instant will only accept temporal units from nanos to days <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#plus-long-java.time.temporal.TemporalUnit-\" rel=\"noreferrer\" title=\"Instant.plus&#40;long amountToAdd, TemporalUnit unit&#41;\">Instant.plus(long amountToAdd, TemporalUnit unit);</a></p>\n\n<p>You can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html\" rel=\"noreferrer\">LocalDateTime</a>. You use it the same way, but it will support operation on the YEARS level.</p>\n"},{"comments":[{"owner":{"account_id":3983395,"reputation":3281,"user_id":3284749,"accept_rate":65,"display_name":"Mouna"},"score":2,"creation_date":1512763205,"post_id":44829130,"comment_id":82403239,"body_markdown":"Does not work! Java is so disappointing! Does not even do what it says! `Period.ofYears(5).getDays()` value is 0","body":"Does not work! Java is so disappointing! Does not even do what it says! <code>Period.ofYears(5).getDays()</code> value is 0"},{"owner":{"account_id":1013099,"reputation":1212,"user_id":1025248,"accept_rate":67,"display_name":"benny.la"},"score":4,"creation_date":1533120747,"post_id":44829130,"comment_id":90227043,"body_markdown":"Actually `getDays()` does exactly what it says. Look at the JavaDoc:\n_The resulting period will have the specified months. The years and days units will be zero._","body":"Actually <code>getDays()</code> does exactly what it says. Look at the JavaDoc: <i>The resulting period will have the specified months. The years and days units will be zero.</i>"},{"owner":{"account_id":6414351,"reputation":399,"user_id":4973016,"display_name":"futchas"},"score":0,"creation_date":1533919723,"post_id":44829130,"comment_id":90539178,"body_markdown":"This worked for me: `Instant.now().minus(5 * 365L, ChronoUnit.DAYS)`","body":"This worked for me: <code>Instant.now().minus(5 * 365L, ChronoUnit.DAYS)</code>"},{"owner":{"account_id":329906,"reputation":12901,"user_id":653708,"accept_rate":90,"display_name":"8bitjunkie"},"score":1,"creation_date":1583343842,"post_id":44829130,"comment_id":107087118,"body_markdown":"You can&#39;t know how many days there are in five years with `Period.ofYears(5).getDays()`. It&#39;s a question that doesn&#39;t make any sense because you haven&#39;t specified _which_ years. It might be a leap year, it might not. The days count would vary.","body":"You can&#39;t know how many days there are in five years with <code>Period.ofYears(5).getDays()</code>. It&#39;s a question that doesn&#39;t make any sense because you haven&#39;t specified <i>which</i> years. It might be a leap year, it might not. The days count would vary."}],"tags":[],"owner":{"account_id":363150,"reputation":18199,"user_id":706727,"accept_rate":89,"display_name":"Usman Ismail"},"comment_count":4,"down_vote_count":6,"up_vote_count":1,"is_accepted":false,"score":-5,"last_activity_date":1498749535,"creation_date":1498749535,"answer_id":44829130,"question_id":34813693,"body_markdown":"If you are so inclined is does not require the date time conversion.\r\n\r\n    Instant.now().minus(Period.ofYears(5).getDays(),ChronoUnit.DAYS);\r\n\r\n","title":"How to get 5 years before now","body":"<p>If you are so inclined is does not require the date time conversion.</p>\n\n<pre><code>Instant.now().minus(Period.ofYears(5).getDays(),ChronoUnit.DAYS);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13504770,"reputation":486,"user_id":9743227,"display_name":"Reneta"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610532734,"creation_date":1610532734,"answer_id":65699754,"question_id":34813693,"body_markdown":"I bumped into the same exception, but with ChronoUnit.MONTHS. It is a little bit misleading, because on compile time does not throw an error or warning or something.\r\nAnyway, I read the documentation, too: [![enter image description here][1]][1]\r\n\r\nand, yes, all the other ChronoUnit types are not supported unfortunately. \r\n\r\n  [1]: https://i.stack.imgur.com/f7epy.png\r\n\r\nHappily, LocalDateTime can substract months and years, too.\r\n\r\n&gt; LocalDateTime.now().minusYears(yearsBack)\r\n\r\n&gt; LocalDateTime.now().minusMonths(monthsBack);\r\n\r\n","title":"How to get 5 years before now","body":"<p>I bumped into the same exception, but with ChronoUnit.MONTHS. It is a little bit misleading, because on compile time does not throw an error or warning or something.\nAnyway, I read the documentation, too: <a href=\"https://i.stack.imgur.com/f7epy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f7epy.png\" alt=\"enter image description here\" /></a></p>\n<p>and, yes, all the other ChronoUnit types are not supported unfortunately.</p>\n<p>Happily, LocalDateTime can substract months and years, too.</p>\n<blockquote>\n<p>LocalDateTime.now().minusYears(yearsBack)</p>\n</blockquote>\n<blockquote>\n<p>LocalDateTime.now().minusMonths(monthsBack);</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700526125,"creation_date":1700525709,"answer_id":77519646,"question_id":34813693,"body_markdown":"## tl;dr\r\n\r\n```java\r\nLocalDate                            // Represent a date only, no time, no zone.\r\n.now( \r\n    ZoneId.of( &quot;America/Edmonton&quot; )  // Today&#39;s date varies by zone.\r\n)\r\n.minusYears( 5 )                     // Go back in time by years.\r\n.toString()                          // Generate text is standard format.\r\n```\r\n \r\nRun code [at Ideone.com][1].\r\n\r\n&gt;2018-11-20\r\n\r\nFor your copy-paste convenience:\r\n\r\n    LocalDate.now().minusYears( 5 )  // Using JVMs current default time zone to get today&#39;s date.\r\n\r\n\r\n## `LocalDate`\r\n\r\nIf you want simply the date, without time-of-day, and without time zone, use [`LocalDate`][2]. To move back in years, call [`minusYears`][3].\r\n\r\n## `ZoneId`\r\n\r\nTo capture the current date, specify [a time zone][4]. If omitted, the JVMs current default time zone is implicitly applied. Understand that for any given moment, **the date varies** around the globe by time zone. It&#39;s &quot;tomorrow&quot; in `Asia/Tokyo` while still &quot;yesterday&quot; in `America/Edmonton`. \r\n\r\n    ZoneId z = ZoneId.of( &quot;America/Edmonton&quot; ) ;\r\n    LocalDate today = LocalDate.now( z ) ;\r\n    LocalDate fiveYearsAgo = today.minusYears( 5 ) ;\r\n\r\nFYI, see list of [real time zone](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones) names, with `Continent/Region` names.\r\n\r\n## Generate text\r\n\r\nGenerate text is standard [ISO 8601][5] format.\r\n\r\n    String output = fiveYearsAgo.toString() ;\r\n\r\n\r\n  [1]: https://ideone.com/lIkLCg\r\n  [2]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDate.html\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDate.html#minusYears(long)\r\n  [4]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/ZoneId.html\r\n  [5]: https://en.wikipedia.org/wiki/ISO_8601","title":"How to get 5 years before now","body":"<h2>tl;dr</h2>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDate                            // Represent a date only, no time, no zone.\n.now( \n    ZoneId.of( &quot;America/Edmonton&quot; )  // Today's date varies by zone.\n)\n.minusYears( 5 )                     // Go back in time by years.\n.toString()                          // Generate text is standard format.\n</code></pre>\n<p>Run code <a href=\"https://ideone.com/lIkLCg\" rel=\"nofollow noreferrer\">at Ideone.com</a>.</p>\n<blockquote>\n<p>2018-11-20</p>\n</blockquote>\n<p>For your copy-paste convenience:</p>\n<pre><code>LocalDate.now().minusYears( 5 )  // Using JVMs current default time zone to get today's date.\n</code></pre>\n<h2><code>LocalDate</code></h2>\n<p>If you want simply the date, without time-of-day, and without time zone, use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDate.html\" rel=\"nofollow noreferrer\"><code>LocalDate</code></a>. To move back in years, call <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDate.html#minusYears(long)\" rel=\"nofollow noreferrer\"><code>minusYears</code></a>.</p>\n<h2><code>ZoneId</code></h2>\n<p>To capture the current date, specify <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/ZoneId.html\" rel=\"nofollow noreferrer\">a time zone</a>. If omitted, the JVMs current default time zone is implicitly applied. Understand that for any given moment, <strong>the date varies</strong> around the globe by time zone. It's &quot;tomorrow&quot; in <code>Asia/Tokyo</code> while still &quot;yesterday&quot; in <code>America/Edmonton</code>.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;America/Edmonton&quot; ) ;\nLocalDate today = LocalDate.now( z ) ;\nLocalDate fiveYearsAgo = today.minusYears( 5 ) ;\n</code></pre>\n<p>FYI, see list of <a href=\"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\" rel=\"nofollow noreferrer\">real time zone</a> names, with <code>Continent/Region</code> names.</p>\n<h2>Generate text</h2>\n<p>Generate text is standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> format.</p>\n<pre><code>String output = fiveYearsAgo.toString() ;\n</code></pre>\n"}],"owner":{"account_id":3342130,"reputation":2812,"user_id":2808178,"accept_rate":85,"display_name":"HMdeveloper"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35096,"favorite_count":0,"down_vote_count":0,"up_vote_count":62,"accepted_answer_id":34813863,"answer_count":6,"score":62,"last_activity_date":1700526125,"creation_date":1452869351,"question_id":34813693,"body_markdown":"I am new to java 8 and I am trying to get five years before now, here is my code:\r\n\r\n    Instant fiveYearsBefore = Instant.now().plus(-5,\r\n\t\t\t\t\t\tChronoUnit.YEARS);\r\nBut I get the following error:\r\n\r\n    java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Years\r\n\r\nCan anyone help me how to do that?","title":"How to get 5 years before now","body":"<p>I am new to java 8 and I am trying to get five years before now, here is my code:</p>\n\n<pre><code>Instant fiveYearsBefore = Instant.now().plus(-5,\n                    ChronoUnit.YEARS);\n</code></pre>\n\n<p>But I get the following error:</p>\n\n<pre><code>java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Years\n</code></pre>\n\n<p>Can anyone help me how to do that?</p>\n"},{"tags":["java","memory-management","jvm","garbage-collection","g1gc"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1700231672,"post_id":77502400,"comment_id":136632444,"body_markdown":"Java doesn&#39;t necessarily return allocated memory to the OS (this does depend on the garbage collector and its configuration). And if it does, it will usually not do so immediately.","body":"Java doesn&#39;t necessarily return allocated memory to the OS (this does depend on the garbage collector and its configuration). And if it does, it will usually not do so immediately."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1700231703,"post_id":77502400,"comment_id":136632447,"body_markdown":"`I need the RSS to be reduced since most of the time Java heap must be small and it&#39;s simply inefficient`  I&#39;d argue the opposite.  Memory is cheap and engineering time is expensive.  Can you really justify that statement?  What exactly is inefficient here?","body":"<code>I need the RSS to be reduced since most of the time Java heap must be small and it&#39;s simply inefficient</code>  I&#39;d argue the opposite.  Memory is cheap and engineering time is expensive.  Can you really justify that statement?  What exactly is inefficient here?"},{"owner":{"account_id":12321033,"reputation":8782,"user_id":8990329,"accept_rate":70,"display_name":"Some Name"},"score":0,"creation_date":1700231747,"post_id":77502400,"comment_id":136632456,"body_markdown":"@MarkRotteveel So even for `G1GC` such behavior of `System.gc()` is not documented I guess...","body":"@MarkRotteveel So even for <code>G1GC</code> such behavior of <code>System.gc()</code> is not documented I guess..."},{"owner":{"account_id":12321033,"reputation":8782,"user_id":8990329,"accept_rate":70,"display_name":"Some Name"},"score":0,"creation_date":1700231806,"post_id":77502400,"comment_id":136632472,"body_markdown":"@markspace Well, a host machine has 2GB of physicall memory. `java` process have used heap size `1MB`, but consuming RSS `800MB`","body":"@markspace Well, a host machine has 2GB of physicall memory. <code>java</code> process have used heap size <code>1MB</code>, but consuming RSS <code>800MB</code>"},{"owner":{"account_id":12321033,"reputation":8782,"user_id":8990329,"accept_rate":70,"display_name":"Some Name"},"score":0,"creation_date":1700231828,"post_id":77502400,"comment_id":136632477,"body_markdown":"@MarkRotteveel Only for G1 it does, Parallel does not","body":"@MarkRotteveel Only for G1 it does, Parallel does not"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1700231903,"post_id":77502400,"comment_id":136632496,"body_markdown":"User code shouldn&#39;t normally call `System.gc()`, and all it does is hint to the garbage collector that it might be a good idea to run (which the GC might ignore or not), it does not change anything to the capabilities or workings of the GC. It only sends a hint to run. It seems that G1GC takes the hint (in this case) and performs a full collect, while otherwise it might simply take a while to do so.","body":"User code shouldn&#39;t normally call <code>System.gc()</code>, and all it does is hint to the garbage collector that it might be a good idea to run (which the GC might ignore or not), it does not change anything to the capabilities or workings of the GC. It only sends a hint to run. It seems that G1GC takes the hint (in this case) and performs a full collect, while otherwise it might simply take a while to do so."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1700232086,"post_id":77502400,"comment_id":136632549,"body_markdown":"As far as I&#39;m aware, the parallel GC is not capable of returning memory to the OS (though I might be wrong).","body":"As far as I&#39;m aware, the parallel GC is not capable of returning memory to the OS (though I might be wrong)."}],"answers":[{"tags":[],"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700525504,"creation_date":1700525504,"answer_id":77519633,"question_id":77502400,"body_markdown":"Parallel GC never uncommits memory reserved for Java Heap, while G1 may uncommit unused memory (i.e. return it back to the OS). Before JDK 12, G1 could return memory only after a full GC or a concurrent cycle. Since JDK 12, it can uncommit more often - see [JEP 346](https://openjdk.org/jeps/346) for details.\r\n\r\nSee also: [Memory footprint of a Java process](https://youtu.be/c755fFv1Rnk?t=818)","title":"Why isn&#39;t RSS reduced when System.gc() for parallel, but for G1 is?","body":"<p>Parallel GC never uncommits memory reserved for Java Heap, while G1 may uncommit unused memory (i.e. return it back to the OS). Before JDK 12, G1 could return memory only after a full GC or a concurrent cycle. Since JDK 12, it can uncommit more often - see <a href=\"https://openjdk.org/jeps/346\" rel=\"nofollow noreferrer\">JEP 346</a> for details.</p>\n<p>See also: <a href=\"https://youtu.be/c755fFv1Rnk?t=818\" rel=\"nofollow noreferrer\">Memory footprint of a Java process</a></p>\n"}],"owner":{"account_id":12321033,"reputation":8782,"user_id":8990329,"accept_rate":70,"display_name":"Some Name"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77519633,"answer_count":1,"score":0,"last_activity_date":1700525504,"creation_date":1700231354,"question_id":77502400,"body_markdown":"I&#39;m using Java 17. I have a container with 2GB and run the following Java program:\r\n\r\n\r\n    import java.util.*;\r\n    \r\n    public class Main{\r\n            public static Map&lt;byte[], byte[]&gt; m = new HashMap&lt;&gt;();\r\n    \r\n            public static void main(String args[]) throws Exception {\r\n                    int i = 0;\r\n                    while(true){\r\n                            i++;\r\n                            byte b[] = new byte[1024 * 1024];\r\n                            m.put(b, b);\r\n                            if(i % 700 == 0){\r\n                                    System.out.println(&quot;Reached limit: &quot; + i);\r\n                                    m = new HashMap&lt;&gt;();\r\n                                    Thread.sleep(500000);\r\n                                    System.gc();\r\n                                    Thread.sleep(500000);\r\n                            }\r\n                    }\r\n            }\r\n    }\r\n\r\nRunning it with the options \r\n\r\n    java -XX:+UseParallelGC \\\r\n         -XX:InitialRAMPercentage=40 \\\r\n         -XX:MaxRAMPercentage=40 \\\r\n         -XX:-ShrinkHeapInSteps \\\r\n         -XX:MinHeapFreeRatio=10 \\\r\n         -XX:MaxHeapFreeRatio=10 Main\r\n\r\nI keep receiving that the RSS reported by `pmap` of the heap is 800MB, it&#39;s not getting lower.\r\n\r\n         Address Perm   Offset Device   Inode    Size    Rss    Pss Referenced Anonymous \r\n        ccc00000 rw-p 00000000  00:00       0  839680 838812 838812     838812    838812       \r\n\r\nBut it&#39;s pretty clear that `System.gc()` is applied and not ignored:\r\n\r\n    [5.871s][info ][gc             ] GC(4) Pause Full (System.gc()) 702M-&gt;1M(792M) 2.820ms\r\n\r\nSo neither `-XX:-ShrinkHeapInSteps -XX:MinHeapFreeRatio=10 -XX:MaxHeapFreeRatio=10 -XX:+UseParallelGC` nor `System.gc()` makes RSS being reduced.\r\n\r\nI need the RSS to be reduced since most of the time Java heap must be small and it&#39;s simply inefficient to consume so much RSS for nothing.\r\n\r\nNotably, `System.gc()` can reduce the amount of RSS of G1 GC and works as expected.\r\n\r\nIs there a way to do that for parallel and why does `System.gc()` required for G1 and simply full GC is not enough?","title":"Why isn&#39;t RSS reduced when System.gc() for parallel, but for G1 is?","body":"<p>I'm using Java 17. I have a container with 2GB and run the following Java program:</p>\n<pre><code>import java.util.*;\n\npublic class Main{\n        public static Map&lt;byte[], byte[]&gt; m = new HashMap&lt;&gt;();\n\n        public static void main(String args[]) throws Exception {\n                int i = 0;\n                while(true){\n                        i++;\n                        byte b[] = new byte[1024 * 1024];\n                        m.put(b, b);\n                        if(i % 700 == 0){\n                                System.out.println(&quot;Reached limit: &quot; + i);\n                                m = new HashMap&lt;&gt;();\n                                Thread.sleep(500000);\n                                System.gc();\n                                Thread.sleep(500000);\n                        }\n                }\n        }\n}\n</code></pre>\n<p>Running it with the options</p>\n<pre><code>java -XX:+UseParallelGC \\\n     -XX:InitialRAMPercentage=40 \\\n     -XX:MaxRAMPercentage=40 \\\n     -XX:-ShrinkHeapInSteps \\\n     -XX:MinHeapFreeRatio=10 \\\n     -XX:MaxHeapFreeRatio=10 Main\n</code></pre>\n<p>I keep receiving that the RSS reported by <code>pmap</code> of the heap is 800MB, it's not getting lower.</p>\n<pre><code>     Address Perm   Offset Device   Inode    Size    Rss    Pss Referenced Anonymous \n    ccc00000 rw-p 00000000  00:00       0  839680 838812 838812     838812    838812       \n</code></pre>\n<p>But it's pretty clear that <code>System.gc()</code> is applied and not ignored:</p>\n<pre><code>[5.871s][info ][gc             ] GC(4) Pause Full (System.gc()) 702M-&gt;1M(792M) 2.820ms\n</code></pre>\n<p>So neither <code>-XX:-ShrinkHeapInSteps -XX:MinHeapFreeRatio=10 -XX:MaxHeapFreeRatio=10 -XX:+UseParallelGC</code> nor <code>System.gc()</code> makes RSS being reduced.</p>\n<p>I need the RSS to be reduced since most of the time Java heap must be small and it's simply inefficient to consume so much RSS for nothing.</p>\n<p>Notably, <code>System.gc()</code> can reduce the amount of RSS of G1 GC and works as expected.</p>\n<p>Is there a way to do that for parallel and why does <code>System.gc()</code> required for G1 and simply full GC is not enough?</p>\n"},{"tags":["java","boolean","boolean-logic"],"comments":[{"owner":{"account_id":36035,"reputation":15548,"user_id":102482,"accept_rate":91,"display_name":"Finglas"},"score":173,"creation_date":1276962497,"post_id":3076078,"comment_id":3152063,"body_markdown":"Inline the return statement.","body":"Inline the return statement."},{"owner":{"account_id":17355,"reputation":79151,"user_id":38765,"accept_rate":68,"display_name":"Andrew Grimm"},"score":82,"creation_date":1277019875,"post_id":3076078,"comment_id":3154748,"body_markdown":"`atLeastTwo(iWantYou, iNeedYou, imEverGonnaLoveYou)`","body":"<code>atLeastTwo(iWantYou, iNeedYou, imEverGonnaLoveYou)</code>"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1277022322,"post_id":3076078,"comment_id":3154835,"body_markdown":"Had it been C, you could just add the booleans together.  Perhaps this was what he was thinking of, but forgot Java cannot do that?","body":"Had it been C, you could just add the booleans together.  Perhaps this was what he was thinking of, but forgot Java cannot do that?"},{"owner":{"account_id":579119,"reputation":2894,"user_id":230831,"accept_rate":25,"display_name":"Ken"},"score":6,"creation_date":1277045520,"post_id":3076078,"comment_id":3155913,"body_markdown":"Thorbj&#248;rn: Doesn&#39;t C use zero/nonzero for bools?  I don&#39;t think that would even work in C, e.g., `atLeastTwo(0,2,0)`.","body":"Thorbj&#248;rn: Doesn&#39;t C use zero/nonzero for bools?  I don&#39;t think that would even work in C, e.g., <code>atLeastTwo(0,2,0)</code>."},{"owner":{"account_id":3481,"reputation":61331,"user_id":5023,"accept_rate":86,"display_name":"Ash"},"score":1,"creation_date":1277105556,"post_id":3076078,"comment_id":3159571,"body_markdown":"Your interviewer should define &#39;improved&#39; before you can do anything else.  Inlining the if/else would be reasonable, but anything more is simply proving how clever they are.","body":"Your interviewer should define &#39;improved&#39; before you can do anything else.  Inlining the if/else would be reasonable, but anything more is simply proving how clever they are."},{"owner":{"account_id":36621,"reputation":2571,"user_id":104491,"accept_rate":75,"display_name":"Rune Aamodt"},"score":3,"creation_date":1277147195,"post_id":3076078,"comment_id":3165061,"body_markdown":"Ken, you could use !! to make sure that the value was either 1 or 0, i.e. (!!A + !!B + !!C)&gt;=2\n\nStill, the ?: version given below is better.","body":"Ken, you could use !! to make sure that the value was either 1 or 0, i.e. (!!A + !!B + !!C)&gt;=2  Still, the ?: version given below is better."},{"owner":{"account_id":30228,"reputation":207232,"user_id":82294,"accept_rate":67,"display_name":"Dietrich Epp"},"score":2,"creation_date":1277167589,"post_id":3076078,"comment_id":3167236,"body_markdown":"@Ken: According to C99, whenever you cast from a `bool` you always get either 0 or 1.  Therefore, adding them together would always work in C99.","body":"@Ken: According to C99, whenever you cast from a <code>bool</code> you always get either 0 or 1.  Therefore, adding them together would always work in C99."},{"owner":{"account_id":1754,"reputation":5864,"user_id":2384,"display_name":"dguaraglia"},"score":3,"creation_date":1277178860,"post_id":3076078,"comment_id":3167924,"body_markdown":"LOL, this is what my functional programming teacher would call &quot;Boolean fear&quot;: instead of using the perfectly acceptable result of a boolean expression, using a control structure to wrap it and return either True or False. Apparently it looks reassuring when you see exactly what you are returning, instead of trusting the logic operators.","body":"LOL, this is what my functional programming teacher would call &quot;Boolean fear&quot;: instead of using the perfectly acceptable result of a boolean expression, using a control structure to wrap it and return either True or False. Apparently it looks reassuring when you see exactly what you are returning, instead of trusting the logic operators."},{"owner":{"account_id":3161,"reputation":4105,"user_id":4498,"display_name":"paperhorse"},"score":5,"creation_date":1277201955,"post_id":3076078,"comment_id":3169939,"body_markdown":"return true; //math joke : if vs if and only if","body":"return true; //math joke : if vs if and only if"},{"owner":{"account_id":85546,"reputation":84738,"user_id":238419,"accept_rate":89,"display_name":"BlueRaja - Danny Pflughoeft"},"score":93,"creation_date":1277225126,"post_id":3076078,"comment_id":3173488,"body_markdown":"Why do people upvote the most trivial questions?","body":"Why do people upvote the most trivial questions?"},{"owner":{"account_id":12167,"reputation":31094,"user_id":23822,"accept_rate":77,"display_name":"Davy8"},"score":4,"creation_date":1277232270,"post_id":3076078,"comment_id":3174592,"body_markdown":"Seriously, how does this get 78 upvotes?","body":"Seriously, how does this get 78 upvotes?"},{"owner":{"account_id":36232,"reputation":26946,"user_id":103206,"accept_rate":67,"display_name":"Jay"},"score":52,"creation_date":1277314653,"post_id":3076078,"comment_id":3183691,"body_markdown":"Questions that are general and easy to understand get a lot of up votes. Questions that are very specific and technical don&#39;t.","body":"Questions that are general and easy to understand get a lot of up votes. Questions that are very specific and technical don&#39;t."},{"owner":{"account_id":17355,"reputation":79151,"user_id":38765,"accept_rate":68,"display_name":"Andrew Grimm"},"score":0,"creation_date":1278300816,"post_id":3076078,"comment_id":3270533,"body_markdown":"Should a separate question be asked about how you&#39;d do this in your favorite language, and non-java answers moved there?","body":"Should a separate question be asked about how you&#39;d do this in your favorite language, and non-java answers moved there?"},{"owner":{"account_id":141278,"reputation":12438,"user_id":348183,"accept_rate":97,"display_name":"Albus Dumbledore"},"score":0,"creation_date":1281610815,"post_id":3076078,"comment_id":3616326,"body_markdown":"Not only upvoting, but people are even marking it as a favourite (47 favourites now). Woow.","body":"Not only upvoting, but people are even marking it as a favourite (47 favourites now). Woow."},{"owner":{"account_id":34514,"reputation":28046,"user_id":97627,"accept_rate":75,"display_name":"Paul Wagland"},"score":1,"creation_date":1316459836,"post_id":3076078,"comment_id":9047279,"body_markdown":"@BlueRaja-DannyPflughoeft the simple questions get upvoted, because everyone understands them, and this question actually got a few good answers as well.","body":"@BlueRaja-DannyPflughoeft the simple questions get upvoted, because everyone understands them, and this question actually got a few good answers as well."},{"owner":{"account_id":1325253,"reputation":6722,"user_id":1270219,"accept_rate":94,"display_name":"fontno"},"score":1,"creation_date":1369289752,"post_id":3076078,"comment_id":24049576,"body_markdown":"125 interviewers have favorited this question. And they will get what they deserve ;)","body":"125 interviewers have favorited this question. And they will get what they deserve ;)"},{"owner":{"account_id":1723893,"reputation":1525,"user_id":2323036,"accept_rate":69,"display_name":"user2323036"},"score":0,"creation_date":1394447512,"post_id":3076078,"comment_id":33877624,"body_markdown":"you can write a method as getTrueValuesSize(boolean[] values) {  List&lt;Boolean&gt; trueValues = new ArrayList(); for (int i = 0; i &lt; values.length; i++) {\n      if (values[i] == true) {\n        trueValues.add(bolArray[i]);\n      }\n    }}  // when the number of condition increases it will be hard to maintain and error prone if missed the condition or closing the brackets propertly.","body":"you can write a method as getTrueValuesSize(boolean[] values) {  List&lt;Boolean&gt; trueValues = new ArrayList(); for (int i = 0; i &lt; values.length; i++) {       if (values[i] == true) {         trueValues.add(bolArray[i]);       }     }}  // when the number of condition increases it will be hard to maintain and error prone if missed the condition or closing the brackets propertly."},{"owner":{"account_id":105404,"reputation":6333,"user_id":281306,"accept_rate":94,"display_name":"Sebastian"},"score":0,"creation_date":1398347717,"post_id":3076078,"comment_id":35614493,"body_markdown":"@BlueRaja-DannyPflughoeft, http://en.wikipedia.org/wiki/Parkinson&#39;s_law_of_triviality","body":"@BlueRaja-DannyPflughoeft, <a href=\"http://en.wikipedia.org/wiki/Parkinson&#39;s_law_of_triviality\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Parkinson&#39;s_law_of_triviality</a>"},{"owner":{"account_id":3298301,"reputation":5886,"user_id":2775013,"accept_rate":90,"display_name":"kenju"},"score":2,"creation_date":1440117290,"post_id":3076078,"comment_id":52152086,"body_markdown":"It depends on what &quot;improve&quot; means here, readability or performance.","body":"It depends on what &quot;improve&quot; means here, readability or performance."}],"answers":[{"comments":[{"owner":{"account_id":17898,"reputation":80772,"user_id":40516,"accept_rate":89,"display_name":"Juliet"},"score":150,"creation_date":1276963348,"post_id":3076081,"comment_id":3152122,"body_markdown":"+1: lovely solution to the puzzle, but hopefully we don&#39;t see anything like this in the real world :)","body":"+1: lovely solution to the puzzle, but hopefully we don&#39;t see anything like this in the real world :)"},{"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"score":125,"creation_date":1276972235,"post_id":3076081,"comment_id":3152766,"body_markdown":"@Juliet: I don&#39;t know, I think if this was a real-world requirement (with real variable names) it would read pretty well.  Consider `return hasGoodAttendance ? (passedCoursework || passed Exam) : (passedCoursework &amp;&amp; passedExam)`, that looks fine to me.","body":"@Juliet: I don&#39;t know, I think if this was a real-world requirement (with real variable names) it would read pretty well.  Consider <code>return hasGoodAttendance ? (passedCoursework || passed Exam) : (passedCoursework &amp;&amp; passedExam)</code>, that looks fine to me."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":3,"creation_date":1276980862,"post_id":3076081,"comment_id":3153263,"body_markdown":"I love how every other answer is trying to optimize, while that&#39;s obviously not what the interviewer wanted to hear.","body":"I love how every other answer is trying to optimize, while that&#39;s obviously not what the interviewer wanted to hear."},{"owner":{"account_id":579119,"reputation":2894,"user_id":230831,"accept_rate":25,"display_name":"Ken"},"score":18,"creation_date":1276990419,"post_id":3076081,"comment_id":3153723,"body_markdown":"I don&#39;t think that looks *bad*, but if the requirement in the domain is understood to be &quot;at least two&quot;, I think it&#39;d be easier to read `atLeastTwo(hasgoodAttendance, passedCoursework, passedExam)`.  The idea of &quot;at least 2 bools are true&quot; is generic enough to deserve its own function.","body":"I don&#39;t think that looks <i>bad</i>, but if the requirement in the domain is understood to be &quot;at least two&quot;, I think it&#39;d be easier to read <code>atLeastTwo(hasgoodAttendance, passedCoursework, passedExam)</code>.  The idea of &quot;at least 2 bools are true&quot; is generic enough to deserve its own function."},{"owner":{"account_id":154778,"reputation":7963,"user_id":370940,"accept_rate":78,"display_name":"L&#232;se majest&#233;"},"score":1,"creation_date":1276992751,"post_id":3076081,"comment_id":3153820,"body_markdown":"Jorn: can you elaborate? I would think that basic optimization is something that most programmers do instinctively. If you&#39;re trying to solve a problem, you&#39;re naturally going to go for the optimal route. Additionally, the poster wrote that the interviewer noted that his answer could be improved. And if you&#39;re being interviewed for a job, then you&#39;d want your answer to be better than the other applicants&#39;. Shooting for &quot;just good enough&quot; usually _isn&#39;t_ good enough.","body":"Jorn: can you elaborate? I would think that basic optimization is something that most programmers do instinctively. If you&#39;re trying to solve a problem, you&#39;re naturally going to go for the optimal route. Additionally, the poster wrote that the interviewer noted that his answer could be improved. And if you&#39;re being interviewed for a job, then you&#39;d want your answer to be better than the other applicants&#39;. Shooting for &quot;just good enough&quot; usually <i>isn&#39;t</i> good enough."},{"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":18,"creation_date":1277013948,"post_id":3076081,"comment_id":3154583,"body_markdown":"@Lese: Asking the most micro-optimized code in face to face interviews is impractical, and dare I say, useless. Micro-optimizations, when driven by the need, is guided by runtime profiling results, not human instincts (which are known to be terrible). You can certainly ask interviewees the process by which you&#39;d optimize this further; that&#39;s more important than the result itself.","body":"@Lese: Asking the most micro-optimized code in face to face interviews is impractical, and dare I say, useless. Micro-optimizations, when driven by the need, is guided by runtime profiling results, not human instincts (which are known to be terrible). You can certainly ask interviewees the process by which you&#39;d optimize this further; that&#39;s more important than the result itself."},{"owner":{"account_id":6356,"reputation":8963,"user_id":10659,"accept_rate":51,"display_name":"Loren Pechtel"},"score":0,"creation_date":1277159526,"post_id":3076081,"comment_id":3166659,"body_markdown":"I don&#39;t agree with Juliet--it&#39;s a creative solution but I normally wouldn&#39;t answer such a thing with code I wouldn&#39;t want to see in the real world.","body":"I don&#39;t agree with Juliet--it&#39;s a creative solution but I normally wouldn&#39;t answer such a thing with code I wouldn&#39;t want to see in the real world."},{"owner":{"account_id":9378,"reputation":14558,"user_id":17300,"display_name":"Stephen P"},"score":18,"creation_date":1277165666,"post_id":3076081,"comment_id":3167092,"body_markdown":"The ternary operator is a common idiom that you should be able to read. If you can&#39;t read it you should study it until you can. Use of the ternary operator is not something I consider &quot;clever&quot; in the derogatory sense.\nBut yes, I&#39;d put this as the body of a method call if you&#39;re commonly using the &quot;at least two&quot; logic.","body":"The ternary operator is a common idiom that you should be able to read. If you can&#39;t read it you should study it until you can. Use of the ternary operator is not something I consider &quot;clever&quot; in the derogatory sense. But yes, I&#39;d put this as the body of a method call if you&#39;re commonly using the &quot;at least two&quot; logic."},{"owner":{"account_id":11857,"reputation":88771,"user_id":23072,"accept_rate":74,"display_name":"Uri"},"score":0,"creation_date":1277225116,"post_id":3076081,"comment_id":3173485,"body_markdown":"In real-world situations, I&#39;m a sucker for readability. I would actually use the function &quot;isAtLeastTwo(e1,e2,e3)&quot; instead of directly using ?: in the code.","body":"In real-world situations, I&#39;m a sucker for readability. I would actually use the function &quot;isAtLeastTwo(e1,e2,e3)&quot; instead of directly using ?: in the code."},{"owner":{"account_id":11037,"reputation":12285,"user_id":21126,"accept_rate":76,"display_name":"MattC"},"score":3,"creation_date":1277234181,"post_id":3076081,"comment_id":3174855,"body_markdown":"So elegant. I must admire the beauty for a while longer. I will sit here and bask in it until my boss comes by.","body":"So elegant. I must admire the beauty for a while longer. I will sit here and bask in it until my boss comes by."},{"owner":{"account_id":11037,"reputation":12285,"user_id":21126,"accept_rate":76,"display_name":"MattC"},"score":0,"creation_date":1277234260,"post_id":3076081,"comment_id":3174866,"body_markdown":"Although, the question specifies two booleans must be true. If I&#39;m reading this correctly, it will return true if at least two of these are false as well, correct?","body":"Although, the question specifies two booleans must be true. If I&#39;m reading this correctly, it will return true if at least two of these are false as well, correct?"},{"owner":{"account_id":67941,"reputation":9463,"user_id":198501,"display_name":"walkytalky"},"score":0,"creation_date":1277298163,"post_id":3076081,"comment_id":3180962,"body_markdown":"@MattC: No. You&#39;re not reading it correctly. But imagine that it did return true in both scenarios: what would that be equivalent to?","body":"@MattC: No. You&#39;re not reading it correctly. But imagine that it did return true in both scenarios: what would that be equivalent to?"},{"owner":{"account_id":60961,"reputation":5097,"user_id":181894,"accept_rate":78,"display_name":"Tomas"},"score":1,"creation_date":1340885826,"post_id":3076081,"comment_id":14775306,"body_markdown":"In the last example, you should put parentheses around `a &amp;&amp; (b || c)`. Relying on the readers knowledge of operator precedence of `&amp;&amp;` and `||` is bad style.","body":"In the last example, you should put parentheses around <code>a &amp;&amp; (b || c)</code>. Relying on the readers knowledge of operator precedence of <code>&amp;&amp;</code> and <code>||</code> is bad style."},{"owner":{"account_id":2704969,"reputation":144,"user_id":2334757,"display_name":"audun"},"score":1,"creation_date":1437927924,"post_id":3076081,"comment_id":51224970,"body_markdown":"The second example is not equivalent to the first, so the text is currently slightly incorrect. If `a` is true and `b` and `c` are both false, `b` will be tested twice.","body":"The second example is not equivalent to the first, so the text is currently slightly incorrect. If <code>a</code> is true and <code>b</code> and <code>c</code> are both false, <code>b</code> will be tested twice."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1513829965,"post_id":3076081,"comment_id":82803613,"body_markdown":"I would not have an issue with finding this in the real world, for one reason only - the name of the method `atLeastTwo`.  This says exactly what it does.  If I need to understand how, I can study it; and if I don&#39;t, I can just believe the method name.  If this expression were in the middle of a method that did something else, then I would not allow it through code review.","body":"I would not have an issue with finding this in the real world, for one reason only - the name of the method <code>atLeastTwo</code>.  This says exactly what it does.  If I need to understand how, I can study it; and if I don&#39;t, I can just believe the method name.  If this expression were in the middle of a method that did something else, then I would not allow it through code review."},{"owner":{"account_id":6590,"reputation":13159,"user_id":11142,"accept_rate":49,"display_name":"anjanb"},"score":0,"creation_date":1573165563,"post_id":3076081,"comment_id":103803195,"body_markdown":"After an All Nighter, I thought I would not be able to find a good solution to this -- but this looks good. Yes, I have a similar situation where I want only 1 of 3 conditions to be true. Here it is only 1 conditions to be false.","body":"After an All Nighter, I thought I would not be able to find a good solution to this -- but this looks good. Yes, I have a similar situation where I want only 1 of 3 conditions to be true. Here it is only 1 conditions to be false."}],"tags":[],"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"comment_count":16,"down_vote_count":6,"up_vote_count":853,"is_accepted":true,"score":847,"last_activity_date":1460536907,"creation_date":1276962395,"answer_id":3076081,"question_id":3076078,"body_markdown":"Rather than writing:\r\n\r\n\tif (someExpression) {\r\n\t\treturn true;\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n\r\nWrite:\r\n\r\n\treturn someExpression;\r\n\r\n----\r\n\r\nAs for the expression itself, something like this:\r\n\r\n\tboolean atLeastTwo(boolean a, boolean b, boolean c) {\r\n\t\treturn a ? (b || c) : (b &amp;&amp; c);\r\n\t}\r\n\r\nor this (whichever you find easier to grasp):\r\n\r\n\tboolean atLeastTwo(boolean a, boolean b, boolean c) {\r\n\t\treturn a &amp;&amp; (b || c) || (b &amp;&amp; c);\r\n\t}\r\n\r\nIt tests `a` and `b` exactly once, and `c` at most once.\r\n\r\n### References\r\n\r\n* [JLS 15.25 Conditional Operator ? :](http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#15.25)","title":"Check if at least two out of three booleans are true","body":"<p>Rather than writing:</p>\n\n<pre><code>if (someExpression) {\n    return true;\n} else {\n    return false;\n}\n</code></pre>\n\n<p>Write:</p>\n\n<pre><code>return someExpression;\n</code></pre>\n\n<hr>\n\n<p>As for the expression itself, something like this:</p>\n\n<pre><code>boolean atLeastTwo(boolean a, boolean b, boolean c) {\n    return a ? (b || c) : (b &amp;&amp; c);\n}\n</code></pre>\n\n<p>or this (whichever you find easier to grasp):</p>\n\n<pre><code>boolean atLeastTwo(boolean a, boolean b, boolean c) {\n    return a &amp;&amp; (b || c) || (b &amp;&amp; c);\n}\n</code></pre>\n\n<p>It tests <code>a</code> and <code>b</code> exactly once, and <code>c</code> at most once.</p>\n\n<h3>References</h3>\n\n<ul>\n<li><a href=\"http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#15.25\" rel=\"noreferrer\">JLS 15.25 Conditional Operator ? :</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":4,"creation_date":1276962745,"post_id":3076091,"comment_id":3152082,"body_markdown":"`a+b+c &gt;= 2` : this doesn&#39;t work with negatives, right? You may have to do the `!!a` thing, I&#39;m not sure.","body":"<code>a+b+c &gt;= 2</code> : this doesn&#39;t work with negatives, right? You may have to do the <code>!!a</code> thing, I&#39;m not sure."},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":8,"creation_date":1276962758,"post_id":3076091,"comment_id":3152083,"body_markdown":"&lt;s&gt;-1.  You should never do that for C.  You don&#39;t know what the value of true is (it could just as easily be -1).&lt;/s&gt; Actually I guess C99 includes in its standard that true is defined as 1.  But I still wouldn&#39;t do this.","body":"&lt;s&gt;-1.  You should never do that for C.  You don&#39;t know what the value of true is (it could just as easily be -1).&lt;/s&gt; Actually I guess C99 includes in its standard that true is defined as 1.  But I still wouldn&#39;t do this."},{"owner":{"account_id":55500,"reputation":13703,"user_id":166235,"accept_rate":79,"display_name":"Rotsor"},"score":1,"creation_date":1276963132,"post_id":3076091,"comment_id":3152107,"body_markdown":"Is that possible if your input is result of boolean operations? And is that possible for &quot;bool&quot; type in C++?","body":"Is that possible if your input is result of boolean operations? And is that possible for &quot;bool&quot; type in C++?"},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":2,"creation_date":1276963535,"post_id":3076091,"comment_id":3152131,"body_markdown":"@Rotsor: Nobody said the input has to be the result of boolean operations.  Even without negatives you&#39;re playing with fire, as if you define it as 2 your condition would have false positives.  But I don&#39;t care about that as much as I dislike the idea of intermingling booleans into arithmetic.  Your Java solution is clear in that it does not rely on nuanced conversions from boolean to an integer type.","body":"@Rotsor: Nobody said the input has to be the result of boolean operations.  Even without negatives you&#39;re playing with fire, as if you define it as 2 your condition would have false positives.  But I don&#39;t care about that as much as I dislike the idea of intermingling booleans into arithmetic.  Your Java solution is clear in that it does not rely on nuanced conversions from boolean to an integer type."},{"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"score":1,"creation_date":1276977079,"post_id":3076091,"comment_id":3153032,"body_markdown":"unexpected... and happy to be wrong... updating my answer slightly","body":"unexpected... and happy to be wrong... updating my answer slightly"},{"owner":{"account_id":55500,"reputation":13703,"user_id":166235,"accept_rate":79,"display_name":"Rotsor"},"score":1,"creation_date":1276977348,"post_id":3076091,"comment_id":3153049,"body_markdown":"Actually, I didn&#39;t expect it too. I thought that straightforward ab|bc|ac would be unbeatable.","body":"Actually, I didn&#39;t expect it too. I thought that straightforward ab|bc|ac would be unbeatable."},{"owner":{"account_id":55500,"reputation":13703,"user_id":166235,"accept_rate":79,"display_name":"Rotsor"},"score":0,"creation_date":1276978639,"post_id":3076091,"comment_id":3153129,"body_markdown":"One more surprise to me! It seems that result depends not on the runtime environment, but on the compiler. If I compile with *javac.exe*, then I get results similar to what TofuBeer got.\nIf I compile with Eclipse builder, then I get my results published earlier.","body":"One more surprise to me! It seems that result depends not on the runtime environment, but on the compiler. If I compile with <i>javac.exe</i>, then I get results similar to what TofuBeer got. If I compile with Eclipse builder, then I get my results published earlier."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":7,"creation_date":1276979538,"post_id":3076091,"comment_id":3153180,"body_markdown":"Be cautious with microbenchmarks: http://java.sun.com/docs/hotspot/HotSpotFAQ.html#benchmarking_simple","body":"Be cautious with microbenchmarks: <a href=\"http://java.sun.com/docs/hotspot/HotSpotFAQ.html#benchmarking_simple\" rel=\"nofollow noreferrer\">java.sun.com/docs/hotspot/HotSpotFAQ.html#benchmarking_simpl&zwnj;&#8203;e</a>"},{"owner":{"account_id":55500,"reputation":13703,"user_id":166235,"accept_rate":79,"display_name":"Rotsor"},"score":1,"creation_date":1276983698,"post_id":3076091,"comment_id":3153409,"body_markdown":"BalusC, thank you. I split the benchmark into several smaller methods for HotSpot convenience and now it seems to run equally fast with all compilers.","body":"BalusC, thank you. I split the benchmark into several smaller methods for HotSpot convenience and now it seems to run equally fast with all compilers."},{"owner":{"account_id":149269,"reputation":2674,"user_id":361632,"display_name":"Justin K"},"score":0,"creation_date":1277144674,"post_id":3076091,"comment_id":3164685,"body_markdown":"Obviously, these results suggest you should use the DEAD method.","body":"Obviously, these results suggest you should use the DEAD method."},{"owner":{"account_id":21604,"reputation":10997,"user_id":52622,"accept_rate":68,"display_name":"Anthony D"},"score":0,"creation_date":1277145163,"post_id":3076091,"comment_id":3164756,"body_markdown":"What does the !! do? Does that NOT NOT, or basically true-&gt;false-&gt;true?","body":"What does the !! do? Does that NOT NOT, or basically true-&gt;false-&gt;true?"},{"owner":{"account_id":14741,"reputation":41424,"user_id":30587,"accept_rate":72,"display_name":"joshperry"},"score":0,"creation_date":1277160878,"post_id":3076091,"comment_id":3166758,"body_markdown":"This has to be some of the most awful repetitive code I&#39;ve ever seen. I don&#39;t think I could trust it&#39;s outcome whatever it may be...","body":"This has to be some of the most awful repetitive code I&#39;ve ever seen. I don&#39;t think I could trust it&#39;s outcome whatever it may be..."},{"owner":{"account_id":55500,"reputation":13703,"user_id":166235,"accept_rate":79,"display_name":"Rotsor"},"score":0,"creation_date":1277221552,"post_id":3076091,"comment_id":3172937,"body_markdown":"@joshperry Can&#39;t use virtual methods in performance-critical places, sorry.\nI wonder why such a poor question attracted so much attention anyway... I almost doubled my rep. and got my first &quot;Good Answer&quot; badge for doing a useless benchmark. :)","body":"@joshperry Can&#39;t use virtual methods in performance-critical places, sorry. I wonder why such a poor question attracted so much attention anyway... I almost doubled my rep. and got my first &quot;Good Answer&quot; badge for doing a useless benchmark. :)"},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1277234204,"post_id":3076091,"comment_id":3174859,"body_markdown":"@Anthony D: I&#39;m not a C user, but I would guess it normalizes a boolean value to some standard definition of true/false.  So `!5 == 0`, `!!5 == !(!5) == !(0) == 1`","body":"@Anthony D: I&#39;m not a C user, but I would guess it normalizes a boolean value to some standard definition of true/false.  So <code>!5 == 0</code>, <code>!!5 == !(!5) == !(0) == 1</code>"},{"owner":{"account_id":36232,"reputation":26946,"user_id":103206,"accept_rate":67,"display_name":"Jay"},"score":0,"creation_date":1277313867,"post_id":3076091,"comment_id":3183532,"body_markdown":"@Rotsor: Hey, my highest score to date is for my answer to &quot;What&#39;s your favorite programmer joke&quot;. All that hard work testing code on some of my answers, the brilliant insights from years of experience, and my best score comes from a joke.","body":"@Rotsor: Hey, my highest score to date is for my answer to &quot;What&#39;s your favorite programmer joke&quot;. All that hard work testing code on some of my answers, the brilliant insights from years of experience, and my best score comes from a joke."},{"owner":{"account_id":169500,"reputation":14774,"user_id":395626,"display_name":"ruslik"},"score":0,"creation_date":1279676423,"post_id":3076091,"comment_id":3413288,"body_markdown":"a + b + c &lt;= 2 can be improved even further to (a + b + c) &gt;&gt; 1","body":"a + b + c &lt;= 2 can be improved even further to (a + b + c) &gt;&gt; 1"},{"owner":{"account_id":271958,"reputation":127857,"user_id":562769,"accept_rate":61,"display_name":"Martin Thoma"},"score":0,"creation_date":1307525537,"post_id":3076091,"comment_id":7326096,"body_markdown":"This solution is great, as it can be easily adepted to other problems, such as at least 2 out of 4 or at least 3 out of 4. Thanks!","body":"This solution is great, as it can be easily adepted to other problems, such as at least 2 out of 4 or at least 3 out of 4. Thanks!"},{"owner":{"account_id":34514,"reputation":28046,"user_id":97627,"accept_rate":75,"display_name":"Paul Wagland"},"score":0,"creation_date":1316459301,"post_id":3076091,"comment_id":9047133,"body_markdown":"a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c : 394 ms\n   a ? b||c : b&amp;&amp;c   : 435 ms\n   a&amp;b | b&amp;c | c&amp;a   : 420 ms\n   a + b + c &lt;= 2    : 640 ms\n   a ^ b ? c : a     : 571 ms\n   a != b ? c : a    : 487 ms\n       DEAD          : 170 ms\nThese results from from a Mac Java 1.6.0_26-b03-383-11A511","body":"a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c : 394 ms    a ? b||c : b&amp;&amp;c   : 435 ms    a&amp;b | b&amp;c | c&amp;a   : 420 ms    a + b + c &lt;= 2    : 640 ms    a ^ b ? c : a     : 571 ms    a != b ? c : a    : 487 ms        DEAD          : 170 ms These results from from a Mac Java 1.6.0_26-b03-383-11A511"},{"owner":{"account_id":5063932,"reputation":3400,"user_id":4441547,"accept_rate":86,"display_name":"Aaron Franke"},"score":0,"creation_date":1493310199,"post_id":3076091,"comment_id":74373207,"body_markdown":"What does the `?` operator do? What does the `:` operator do?","body":"What does the <code>?</code> operator do? What does the <code>:</code> operator do?"},{"owner":{"account_id":55500,"reputation":13703,"user_id":166235,"accept_rate":79,"display_name":"Rotsor"},"score":0,"creation_date":1493474007,"post_id":3076091,"comment_id":74437679,"body_markdown":"These can only be used together and therefore they don&#39;t count as individual operators, but rather as one [ternary operator](https://en.wikipedia.org/wiki/%3F:). The informal meaning of `A ? B : C` is &quot;if A then B else C&quot;.","body":"These can only be used together and therefore they don&#39;t count as individual operators, but rather as one <a href=\"https://en.wikipedia.org/wiki/%3F:\" rel=\"nofollow noreferrer\">ternary operator</a>. The informal meaning of <code>A ? B : C</code> is &quot;if A then B else C&quot;."}],"tags":[],"owner":{"account_id":55500,"reputation":13703,"user_id":166235,"accept_rate":79,"display_name":"Rotsor"},"comment_count":20,"down_vote_count":3,"up_vote_count":231,"is_accepted":false,"score":228,"last_activity_date":1434108025,"creation_date":1276962585,"answer_id":3076091,"question_id":3076078,"body_markdown":"Why not implement it literally? :)\r\n\r\n    (a?1:0)+(b?1:0)+(c?1:0) &gt;= 2\r\n\r\nIn C you could just write `a+b+c &gt;= 2` (or `!!a+!!b+!!c &gt;= 2` to be very safe).\r\n\r\n\r\nIn response to **TofuBeer**&#39;s comparison of java bytecode, here is a simple performance test:\r\n\r\n    class Main\r\n    {\r\n\t\tstatic boolean majorityDEAD(boolean a,boolean b,boolean c)\r\n\t\t{\r\n\t\t\treturn a;\r\n\t\t}\r\n\t\t\r\n\t\tstatic boolean majority1(boolean a,boolean b,boolean c)\r\n\t\t{\r\n\t\t\treturn a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c;\r\n\t\t}\r\n\t\t\r\n\t\tstatic boolean majority2(boolean a,boolean b,boolean c)\r\n\t\t{\r\n\t\t\treturn a ? b||c : b&amp;&amp;c;\r\n\t\t}\r\n\t\t\r\n\t\tstatic boolean majority3(boolean a,boolean b,boolean c)\r\n\t\t{\r\n\t\t\treturn a&amp;b | b&amp;c | c&amp;a;\r\n\t\t}\r\n\t\t\r\n\t\tstatic boolean majority4(boolean a,boolean b,boolean c)\r\n\t\t{\r\n\t\t\treturn (a?1:0)+(b?1:0)+(c?1:0) &gt;= 2;\r\n\t\t}\r\n\t\t\r\n\t\tstatic int loop1(boolean[] data, int i, int sz1, int sz2)\r\n\t\t{\r\n\t\t\tint sum = 0;\r\n\t\t\tfor(int j=i;j&lt;i+sz1;j++)\r\n\t\t\t{\r\n\t\t\t\tfor(int k=j;k&lt;j+sz2;k++)\r\n\t\t\t\t{\r\n\t\t\t\t\tsum += majority1(data[i], data[j], data[k])?1:0; \r\n\t\t\t\t\tsum += majority1(data[i], data[k], data[j])?1:0; \r\n\t\t\t\t\tsum += majority1(data[j], data[k], data[i])?1:0; \r\n\t\t\t\t\tsum += majority1(data[j], data[i], data[k])?1:0; \r\n\t\t\t\t\tsum += majority1(data[k], data[i], data[j])?1:0; \r\n\t\t\t\t\tsum += majority1(data[k], data[j], data[i])?1:0; \r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn sum;\r\n\t\t}\r\n\t\t\r\n\t\tstatic int loop2(boolean[] data, int i, int sz1, int sz2)\r\n\t\t{\r\n\t\t\tint sum = 0;\r\n\t\t\tfor(int j=i;j&lt;i+sz1;j++)\r\n\t\t\t{\r\n\t\t\t\tfor(int k=j;k&lt;j+sz2;k++)\r\n\t\t\t\t{\r\n\t\t\t\t\tsum += majority2(data[i], data[j], data[k])?1:0; \r\n\t\t\t\t\tsum += majority2(data[i], data[k], data[j])?1:0; \r\n\t\t\t\t\tsum += majority2(data[j], data[k], data[i])?1:0; \r\n\t\t\t\t\tsum += majority2(data[j], data[i], data[k])?1:0; \r\n\t\t\t\t\tsum += majority2(data[k], data[i], data[j])?1:0; \r\n\t\t\t\t\tsum += majority2(data[k], data[j], data[i])?1:0; \r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn sum;\r\n\t\t}\r\n\t\t\r\n\t\tstatic int loop3(boolean[] data, int i, int sz1, int sz2)\r\n\t\t{\r\n\t\t\tint sum = 0;\r\n\t\t\tfor(int j=i;j&lt;i+sz1;j++)\r\n\t\t\t{\r\n\t\t\t\tfor(int k=j;k&lt;j+sz2;k++)\r\n\t\t\t\t{\r\n\t\t\t\t\tsum += majority3(data[i], data[j], data[k])?1:0; \r\n\t\t\t\t\tsum += majority3(data[i], data[k], data[j])?1:0; \r\n\t\t\t\t\tsum += majority3(data[j], data[k], data[i])?1:0; \r\n\t\t\t\t\tsum += majority3(data[j], data[i], data[k])?1:0; \r\n\t\t\t\t\tsum += majority3(data[k], data[i], data[j])?1:0; \r\n\t\t\t\t\tsum += majority3(data[k], data[j], data[i])?1:0; \r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn sum;\r\n\t\t}\r\n\t\t\r\n\t\tstatic int loop4(boolean[] data, int i, int sz1, int sz2)\r\n\t\t{\r\n\t\t\tint sum = 0;\r\n\t\t\tfor(int j=i;j&lt;i+sz1;j++)\r\n\t\t\t{\r\n\t\t\t\tfor(int k=j;k&lt;j+sz2;k++)\r\n\t\t\t\t{\r\n\t\t\t\t\tsum += majority4(data[i], data[j], data[k])?1:0; \r\n\t\t\t\t\tsum += majority4(data[i], data[k], data[j])?1:0; \r\n\t\t\t\t\tsum += majority4(data[j], data[k], data[i])?1:0; \r\n\t\t\t\t\tsum += majority4(data[j], data[i], data[k])?1:0; \r\n\t\t\t\t\tsum += majority4(data[k], data[i], data[j])?1:0; \r\n\t\t\t\t\tsum += majority4(data[k], data[j], data[i])?1:0; \r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn sum;\r\n\t\t}\r\n\t\t\r\n\t\tstatic int loopDEAD(boolean[] data, int i, int sz1, int sz2)\r\n\t\t{\r\n\t\t\tint sum = 0;\r\n\t\t\tfor(int j=i;j&lt;i+sz1;j++)\r\n\t\t\t{\r\n\t\t\t\tfor(int k=j;k&lt;j+sz2;k++)\r\n\t\t\t\t{\r\n\t\t\t\t\tsum += majorityDEAD(data[i], data[j], data[k])?1:0; \r\n\t\t\t\t\tsum += majorityDEAD(data[i], data[k], data[j])?1:0; \r\n\t\t\t\t\tsum += majorityDEAD(data[j], data[k], data[i])?1:0; \r\n\t\t\t\t\tsum += majorityDEAD(data[j], data[i], data[k])?1:0; \r\n\t\t\t\t\tsum += majorityDEAD(data[k], data[i], data[j])?1:0; \r\n\t\t\t\t\tsum += majorityDEAD(data[k], data[j], data[i])?1:0; \r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn sum;\r\n\t\t}\r\n\t\t\r\n\t\tstatic void work()\r\n\t\t{\r\n\t\t\tboolean [] data = new boolean [10000];\r\n\t\t\tjava.util.Random r = new java.util.Random(0);\r\n\t\t\tfor(int i=0;i&lt;data.length;i++)\r\n\t\t\t\tdata[i] = r.nextInt(2) &gt; 0;\r\n\t\t\tlong t0,t1,t2,t3,t4,tDEAD;\r\n\t\t\tint sz1 = 100;\r\n\t\t\tint sz2 = 100;\r\n\t\t\tint sum = 0;\r\n\t\r\n\t\t\tt0 = System.currentTimeMillis();\r\n\t\t\t\r\n\t\t\tfor(int i=0;i&lt;data.length-sz1-sz2;i++)\r\n\t\t\t\tsum += loop1(data, i, sz1, sz2);\r\n\r\n\t\t\tt1 = System.currentTimeMillis();\r\n\t\t\t\r\n\t\t\tfor(int i=0;i&lt;data.length-sz1-sz2;i++)\r\n\t\t\t\tsum += loop2(data, i, sz1, sz2);\r\n\r\n\t\t\tt2 = System.currentTimeMillis();\r\n\t\t\t\r\n\t\t\tfor(int i=0;i&lt;data.length-sz1-sz2;i++)\r\n\t\t\t\tsum += loop3(data, i, sz1, sz2);\r\n\r\n\t\t\tt3 = System.currentTimeMillis();\r\n\t\t\t\r\n\t\t\tfor(int i=0;i&lt;data.length-sz1-sz2;i++)\r\n\t\t\t\tsum += loop4(data, i, sz1, sz2);\r\n\r\n\t\t\tt4 = System.currentTimeMillis();\r\n\t\t\t\r\n\t\t\tfor(int i=0;i&lt;data.length-sz1-sz2;i++)\r\n\t\t\t\tsum += loopDEAD(data, i, sz1, sz2);\r\n\t\t\t\r\n\t\t\ttDEAD = System.currentTimeMillis();\r\n\t\r\n\t\t\tSystem.out.println(&quot;a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c : &quot; + (t1-t0) + &quot; ms&quot;);\r\n\t\t\tSystem.out.println(&quot;   a ? b||c : b&amp;&amp;c   : &quot; + (t2-t1) + &quot; ms&quot;);\r\n\t\t\tSystem.out.println(&quot;   a&amp;b | b&amp;c | c&amp;a   : &quot; + (t3-t2) + &quot; ms&quot;);\r\n\t\t\tSystem.out.println(&quot;   a + b + c &gt;= 2    : &quot; + (t4-t3) + &quot; ms&quot;);\r\n\t\t\tSystem.out.println(&quot;       DEAD          : &quot; + (tDEAD-t4) + &quot; ms&quot;);\r\n\t\t\tSystem.out.println(&quot;sum: &quot;+sum);\r\n\t\t}\r\n\t\t\r\n\t\tpublic static void main(String[] args) throws InterruptedException\r\n\t\t{\r\n\t\t\twhile(true)\r\n\t\t\t{\r\n\t\t\t\twork();\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\nThis prints the following on my machine (running Ubuntu on Intel Core 2 + sun java 1.6.0_15-b03 with HotSpot Server VM (14.1-b02, mixed mode)):\r\n\r\nFirst and second iterations:\r\n\r\n    a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c : 1740 ms\r\n       a ? b||c : b&amp;&amp;c   : 1690 ms\r\n       a&amp;b | b&amp;c | c&amp;a   : 835 ms\r\n       a + b + c &gt;= 2    : 348 ms\r\n           DEAD          : 169 ms\r\n    sum: 1472612418\r\n\r\nLater iterations:\r\n\r\n    a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c : 1638 ms\r\n       a ? b||c : b&amp;&amp;c   : 1612 ms\r\n       a&amp;b | b&amp;c | c&amp;a   : 779 ms\r\n       a + b + c &gt;= 2    : 905 ms\r\n           DEAD          : 221 ms\r\n\r\nI wonder, what could java VM do that *degrades* performance over time for (a + b + c &gt;= 2) case.\r\n\r\nAnd here is what happens if I run java with a `-client` VM switch:\r\n\r\n    a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c : 4034 ms\r\n       a ? b||c : b&amp;&amp;c   : 2215 ms\r\n       a&amp;b | b&amp;c | c&amp;a   : 1347 ms\r\n       a + b + c &gt;= 2    : 6589 ms\r\n           DEAD          : 1016 ms\r\n\r\nMystery...\r\n\r\nAnd if I run it in [GNU Java Interpreter][1], it gets almost 100 times slower, but the `a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c` version wins then.\r\n\r\nResults from Tofubeer with the latest code running OS X:\r\n\r\n    a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c : 1358 ms\r\n       a ? b||c : b&amp;&amp;c   : 1187 ms\r\n       a&amp;b | b&amp;c | c&amp;a   : 410 ms\r\n       a + b + c &gt;= 2    : 602 ms\r\n           DEAD          : 161 ms\r\n\r\n\r\nResults from  Paul Wagland with a Mac Java 1.6.0_26-b03-383-11A511\r\n\r\n    a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c : 394 ms \r\n       a ? b||c : b&amp;&amp;c   : 435 ms\r\n       a&amp;b | b&amp;c | c&amp;a   : 420 ms\r\n       a + b + c &gt;= 2    : 640 ms\r\n       a ^ b ? c : a     : 571 ms\r\n       a != b ? c : a    : 487 ms\r\n           DEAD          : 170 ms\r\n\r\n\r\n  [1]: http://gcc.gnu.org/java/","title":"Check if at least two out of three booleans are true","body":"<p>Why not implement it literally? :)</p>\n\n<pre><code>(a?1:0)+(b?1:0)+(c?1:0) &gt;= 2\n</code></pre>\n\n<p>In C you could just write <code>a+b+c &gt;= 2</code> (or <code>!!a+!!b+!!c &gt;= 2</code> to be very safe).</p>\n\n<p>In response to <strong>TofuBeer</strong>'s comparison of java bytecode, here is a simple performance test:</p>\n\n<pre><code>class Main\n{\n    static boolean majorityDEAD(boolean a,boolean b,boolean c)\n    {\n        return a;\n    }\n\n    static boolean majority1(boolean a,boolean b,boolean c)\n    {\n        return a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c;\n    }\n\n    static boolean majority2(boolean a,boolean b,boolean c)\n    {\n        return a ? b||c : b&amp;&amp;c;\n    }\n\n    static boolean majority3(boolean a,boolean b,boolean c)\n    {\n        return a&amp;b | b&amp;c | c&amp;a;\n    }\n\n    static boolean majority4(boolean a,boolean b,boolean c)\n    {\n        return (a?1:0)+(b?1:0)+(c?1:0) &gt;= 2;\n    }\n\n    static int loop1(boolean[] data, int i, int sz1, int sz2)\n    {\n        int sum = 0;\n        for(int j=i;j&lt;i+sz1;j++)\n        {\n            for(int k=j;k&lt;j+sz2;k++)\n            {\n                sum += majority1(data[i], data[j], data[k])?1:0; \n                sum += majority1(data[i], data[k], data[j])?1:0; \n                sum += majority1(data[j], data[k], data[i])?1:0; \n                sum += majority1(data[j], data[i], data[k])?1:0; \n                sum += majority1(data[k], data[i], data[j])?1:0; \n                sum += majority1(data[k], data[j], data[i])?1:0; \n            }\n        }\n        return sum;\n    }\n\n    static int loop2(boolean[] data, int i, int sz1, int sz2)\n    {\n        int sum = 0;\n        for(int j=i;j&lt;i+sz1;j++)\n        {\n            for(int k=j;k&lt;j+sz2;k++)\n            {\n                sum += majority2(data[i], data[j], data[k])?1:0; \n                sum += majority2(data[i], data[k], data[j])?1:0; \n                sum += majority2(data[j], data[k], data[i])?1:0; \n                sum += majority2(data[j], data[i], data[k])?1:0; \n                sum += majority2(data[k], data[i], data[j])?1:0; \n                sum += majority2(data[k], data[j], data[i])?1:0; \n            }\n        }\n        return sum;\n    }\n\n    static int loop3(boolean[] data, int i, int sz1, int sz2)\n    {\n        int sum = 0;\n        for(int j=i;j&lt;i+sz1;j++)\n        {\n            for(int k=j;k&lt;j+sz2;k++)\n            {\n                sum += majority3(data[i], data[j], data[k])?1:0; \n                sum += majority3(data[i], data[k], data[j])?1:0; \n                sum += majority3(data[j], data[k], data[i])?1:0; \n                sum += majority3(data[j], data[i], data[k])?1:0; \n                sum += majority3(data[k], data[i], data[j])?1:0; \n                sum += majority3(data[k], data[j], data[i])?1:0; \n            }\n        }\n        return sum;\n    }\n\n    static int loop4(boolean[] data, int i, int sz1, int sz2)\n    {\n        int sum = 0;\n        for(int j=i;j&lt;i+sz1;j++)\n        {\n            for(int k=j;k&lt;j+sz2;k++)\n            {\n                sum += majority4(data[i], data[j], data[k])?1:0; \n                sum += majority4(data[i], data[k], data[j])?1:0; \n                sum += majority4(data[j], data[k], data[i])?1:0; \n                sum += majority4(data[j], data[i], data[k])?1:0; \n                sum += majority4(data[k], data[i], data[j])?1:0; \n                sum += majority4(data[k], data[j], data[i])?1:0; \n            }\n        }\n        return sum;\n    }\n\n    static int loopDEAD(boolean[] data, int i, int sz1, int sz2)\n    {\n        int sum = 0;\n        for(int j=i;j&lt;i+sz1;j++)\n        {\n            for(int k=j;k&lt;j+sz2;k++)\n            {\n                sum += majorityDEAD(data[i], data[j], data[k])?1:0; \n                sum += majorityDEAD(data[i], data[k], data[j])?1:0; \n                sum += majorityDEAD(data[j], data[k], data[i])?1:0; \n                sum += majorityDEAD(data[j], data[i], data[k])?1:0; \n                sum += majorityDEAD(data[k], data[i], data[j])?1:0; \n                sum += majorityDEAD(data[k], data[j], data[i])?1:0; \n            }\n        }\n        return sum;\n    }\n\n    static void work()\n    {\n        boolean [] data = new boolean [10000];\n        java.util.Random r = new java.util.Random(0);\n        for(int i=0;i&lt;data.length;i++)\n            data[i] = r.nextInt(2) &gt; 0;\n        long t0,t1,t2,t3,t4,tDEAD;\n        int sz1 = 100;\n        int sz2 = 100;\n        int sum = 0;\n\n        t0 = System.currentTimeMillis();\n\n        for(int i=0;i&lt;data.length-sz1-sz2;i++)\n            sum += loop1(data, i, sz1, sz2);\n\n        t1 = System.currentTimeMillis();\n\n        for(int i=0;i&lt;data.length-sz1-sz2;i++)\n            sum += loop2(data, i, sz1, sz2);\n\n        t2 = System.currentTimeMillis();\n\n        for(int i=0;i&lt;data.length-sz1-sz2;i++)\n            sum += loop3(data, i, sz1, sz2);\n\n        t3 = System.currentTimeMillis();\n\n        for(int i=0;i&lt;data.length-sz1-sz2;i++)\n            sum += loop4(data, i, sz1, sz2);\n\n        t4 = System.currentTimeMillis();\n\n        for(int i=0;i&lt;data.length-sz1-sz2;i++)\n            sum += loopDEAD(data, i, sz1, sz2);\n\n        tDEAD = System.currentTimeMillis();\n\n        System.out.println(\"a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c : \" + (t1-t0) + \" ms\");\n        System.out.println(\"   a ? b||c : b&amp;&amp;c   : \" + (t2-t1) + \" ms\");\n        System.out.println(\"   a&amp;b | b&amp;c | c&amp;a   : \" + (t3-t2) + \" ms\");\n        System.out.println(\"   a + b + c &gt;= 2    : \" + (t4-t3) + \" ms\");\n        System.out.println(\"       DEAD          : \" + (tDEAD-t4) + \" ms\");\n        System.out.println(\"sum: \"+sum);\n    }\n\n    public static void main(String[] args) throws InterruptedException\n    {\n        while(true)\n        {\n            work();\n            Thread.sleep(1000);\n        }\n    }\n}\n</code></pre>\n\n<p>This prints the following on my machine (running Ubuntu on Intel Core 2 + sun java 1.6.0_15-b03 with HotSpot Server VM (14.1-b02, mixed mode)):</p>\n\n<p>First and second iterations:</p>\n\n<pre><code>a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c : 1740 ms\n   a ? b||c : b&amp;&amp;c   : 1690 ms\n   a&amp;b | b&amp;c | c&amp;a   : 835 ms\n   a + b + c &gt;= 2    : 348 ms\n       DEAD          : 169 ms\nsum: 1472612418\n</code></pre>\n\n<p>Later iterations:</p>\n\n<pre><code>a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c : 1638 ms\n   a ? b||c : b&amp;&amp;c   : 1612 ms\n   a&amp;b | b&amp;c | c&amp;a   : 779 ms\n   a + b + c &gt;= 2    : 905 ms\n       DEAD          : 221 ms\n</code></pre>\n\n<p>I wonder, what could java VM do that <em>degrades</em> performance over time for (a + b + c >= 2) case.</p>\n\n<p>And here is what happens if I run java with a <code>-client</code> VM switch:</p>\n\n<pre><code>a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c : 4034 ms\n   a ? b||c : b&amp;&amp;c   : 2215 ms\n   a&amp;b | b&amp;c | c&amp;a   : 1347 ms\n   a + b + c &gt;= 2    : 6589 ms\n       DEAD          : 1016 ms\n</code></pre>\n\n<p>Mystery...</p>\n\n<p>And if I run it in <a href=\"http://gcc.gnu.org/java/\" rel=\"noreferrer\">GNU Java Interpreter</a>, it gets almost 100 times slower, but the <code>a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c</code> version wins then.</p>\n\n<p>Results from Tofubeer with the latest code running OS X:</p>\n\n<pre><code>a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c : 1358 ms\n   a ? b||c : b&amp;&amp;c   : 1187 ms\n   a&amp;b | b&amp;c | c&amp;a   : 410 ms\n   a + b + c &gt;= 2    : 602 ms\n       DEAD          : 161 ms\n</code></pre>\n\n<p>Results from  Paul Wagland with a Mac Java 1.6.0_26-b03-383-11A511</p>\n\n<pre><code>a&amp;&amp;b || b&amp;&amp;c || a&amp;&amp;c : 394 ms \n   a ? b||c : b&amp;&amp;c   : 435 ms\n   a&amp;b | b&amp;c | c&amp;a   : 420 ms\n   a + b + c &gt;= 2    : 640 ms\n   a ^ b ? c : a     : 571 ms\n   a != b ? c : a    : 487 ms\n       DEAD          : 170 ms\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1359153127,"creation_date":1276962681,"answer_id":3076096,"question_id":3076078,"body_markdown":"The most obvious set of improvements are:\r\n\r\n    // There is no point in an else if you already returned.\r\n    boolean atLeastTwo(boolean a, boolean b, boolean c) {\r\n        if ((a &amp;&amp; b) || (b &amp;&amp; c) || (a &amp;&amp; c)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\nand then\r\n\r\n    // There is no point in an if(true) return true otherwise return false.\r\n    boolean atLeastTwo(boolean a, boolean b, boolean c) {\r\n        return ((a &amp;&amp; b) || (b &amp;&amp; c) || (a &amp;&amp; c));\r\n    }\r\n\r\nBut those improvements are minor.\r\n","title":"Check if at least two out of three booleans are true","body":"<p>The most obvious set of improvements are:</p>\n\n<pre><code>// There is no point in an else if you already returned.\nboolean atLeastTwo(boolean a, boolean b, boolean c) {\n    if ((a &amp;&amp; b) || (b &amp;&amp; c) || (a &amp;&amp; c)) {\n        return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>// There is no point in an if(true) return true otherwise return false.\nboolean atLeastTwo(boolean a, boolean b, boolean c) {\n    return ((a &amp;&amp; b) || (b &amp;&amp; c) || (a &amp;&amp; c));\n}\n</code></pre>\n\n<p>But those improvements are minor.</p>\n"},{"comments":[{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":11,"creation_date":1276963157,"post_id":3076099,"comment_id":3152109,"body_markdown":"Why would you want to force 5 evaluations when 1 could do? It really doesn&#39;t perform the same number of logic operations in truth.  In fact, it would **always** perform more.","body":"Why would you want to force 5 evaluations when 1 could do? It really doesn&#39;t perform the same number of logic operations in truth.  In fact, it would <b>always</b> perform more."},{"owner":{"account_id":142896,"reputation":35109,"user_id":350890,"accept_rate":100,"display_name":"Peter Tillemans"},"score":2,"creation_date":1276963227,"post_id":3076099,"comment_id":3152114,"body_markdown":"I think mixing binary arithmetic and boolean arithmetic is a bad idea. It is like driving screws in the wall with a wrench. Worst of all is they have different semantics.","body":"I think mixing binary arithmetic and boolean arithmetic is a bad idea. It is like driving screws in the wall with a wrench. Worst of all is they have different semantics."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":12,"creation_date":1276963453,"post_id":3076099,"comment_id":3152127,"body_markdown":"@Mark - it might be faster ... depending on the effect of an incorrect branch prediction on the CPU pipeline.  However, it is best to leave such micro-optimizations to the JIT compiler.","body":"@Mark - it might be faster ... depending on the effect of an incorrect branch prediction on the CPU pipeline.  However, it is best to leave such micro-optimizations to the JIT compiler."},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1276963851,"post_id":3076099,"comment_id":3152143,"body_markdown":"@Stephen C: OK, I see where he&#39;s coming from now but agree that&#39;s not something you should be doing explicitly in Java.  Unfortunately I apparently can&#39;t remove my down-vote unless he edits it.","body":"@Stephen C: OK, I see where he&#39;s coming from now but agree that&#39;s not something you should be doing explicitly in Java.  Unfortunately I apparently can&#39;t remove my down-vote unless he edits it."},{"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"score":4,"creation_date":1276964234,"post_id":3076099,"comment_id":3152175,"body_markdown":"It is fine to do something like this in Java (or any other language)... with a couple of caveats: 1) it needs to be faster (in this case, I believe it is, see my second answer) 2) preferable significantly faster (not sure if it is), 3) most importantly documented since it is &quot;odd&quot;.  As long as it serves a purpose and it is documented it is fine to &quot;break the rules&quot; when it makes sense.","body":"It is fine to do something like this in Java (or any other language)... with a couple of caveats: 1) it needs to be faster (in this case, I believe it is, see my second answer) 2) preferable significantly faster (not sure if it is), 3) most importantly documented since it is &quot;odd&quot;.  As long as it serves a purpose and it is documented it is fine to &quot;break the rules&quot; when it makes sense."},{"owner":{"account_id":20562,"reputation":55673,"user_id":49246,"accept_rate":73,"display_name":"starblue"},"score":11,"creation_date":1276968523,"post_id":3076099,"comment_id":3152545,"body_markdown":"@Peter Tillemans There is no mixing with binary operators, in Java these are boolean operators.","body":"@Peter Tillemans There is no mixing with binary operators, in Java these are boolean operators."},{"owner":{"account_id":1304272,"reputation":574,"user_id":1253569,"display_name":"flanglet"},"score":1,"creation_date":1333311819,"post_id":3076099,"comment_id":12733608,"body_markdown":"return ((a|b) &amp; c) | (a &amp; b) uses 4 logical operators instead of 5. Note that (a|b) and (a^b) both work with this formula.","body":"return ((a|b) &amp; c) | (a &amp; b) uses 4 logical operators instead of 5. Note that (a|b) and (a^b) both work with this formula."}],"tags":[],"owner":{"account_id":6947,"reputation":87429,"user_id":11834,"accept_rate":73,"display_name":"moonshadow"},"comment_count":7,"down_vote_count":3,"up_vote_count":37,"is_accepted":false,"score":34,"last_activity_date":1276962702,"creation_date":1276962702,"answer_id":3076099,"question_id":3076078,"body_markdown":"You don&#39;t need to use the short circuiting forms of the operators.\r\n\r\n`return (a &amp; b) | (b &amp; c) | (c &amp; a);`\r\n\r\nThis performs the same number of logic operations as your version, however is completely branchless.","title":"Check if at least two out of three booleans are true","body":"<p>You don't need to use the short circuiting forms of the operators.</p>\n\n<p><code>return (a &amp; b) | (b &amp; c) | (c &amp; a);</code></p>\n\n<p>This performs the same number of logic operations as your version, however is completely branchless.</p>\n"},{"comments":[{"owner":{"account_id":23618,"reputation":33082,"user_id":59301,"accept_rate":83,"display_name":"Adrian Grigore"},"score":22,"creation_date":1276987553,"post_id":3076150,"comment_id":3153605,"body_markdown":"I agree with the premise, but (a &amp;&amp; b) || (b &amp;&amp; c) || (a &amp;&amp; c) is much more readable than your solution IMHO.","body":"I agree with the premise, but (a &amp;&amp; b) || (b &amp;&amp; c) || (a &amp;&amp; c) is much more readable than your solution IMHO."},{"owner":{"account_id":21494,"reputation":11627,"user_id":52273,"accept_rate":71,"display_name":"Arafangion"},"score":65,"creation_date":1277007846,"post_id":3076150,"comment_id":3154403,"body_markdown":"Hmm, now I need a &quot;two out of FOUR booleans&quot; version...  danatel&#39;s version is *much* easier now.","body":"Hmm, now I need a &quot;two out of FOUR booleans&quot; version...  danatel&#39;s version is <i>much</i> easier now."},{"owner":{"account_id":53637,"reputation":54848,"user_id":160378,"accept_rate":80,"display_name":"retronym"},"score":7,"creation_date":1277272837,"post_id":3076150,"comment_id":3178192,"body_markdown":"Or in Scala: `Seq(true, true, false).map(if (_) 1 else 0).sum &gt;= 2`","body":"Or in Scala: <code>Seq(true, true, false).map(if (_) 1 else 0).sum &gt;= 2</code>"},{"owner":{"account_id":4341,"reputation":4993,"user_id":6475,"accept_rate":80,"display_name":"Seun Osewa"},"score":5,"creation_date":1280002467,"post_id":3076150,"comment_id":3449746,"body_markdown":"@retronym: Hmm, no.  The Java way works just fine in Scala and is both more readable and more efficient.","body":"@retronym: Hmm, no.  The Java way works just fine in Scala and is both more readable and more efficient."}],"tags":[],"owner":{"account_id":10505,"reputation":4874,"user_id":19884,"accept_rate":89,"display_name":"danatel"},"comment_count":4,"down_vote_count":0,"up_vote_count":145,"is_accepted":false,"score":145,"last_activity_date":1359153194,"creation_date":1276963437,"answer_id":3076150,"question_id":3076078,"body_markdown":"Readability should be the goal. Someone who reads the code must understand your intent immediately. So here is my solution.\r\n\r\n    int howManyBooleansAreTrue =\r\n          (a ? 1 : 0)\r\n        + (b ? 1 : 0)\r\n        + (c ? 1 : 0);\r\n\r\n    return howManyBooleansAreTrue &gt;= 2;\r\n","title":"Check if at least two out of three booleans are true","body":"<p>Readability should be the goal. Someone who reads the code must understand your intent immediately. So here is my solution.</p>\n\n<pre><code>int howManyBooleansAreTrue =\n      (a ? 1 : 0)\n    + (b ? 1 : 0)\n    + (c ? 1 : 0);\n\nreturn howManyBooleansAreTrue &gt;= 2;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":147044,"reputation":981,"user_id":357891,"accept_rate":57,"display_name":"Tachy"},"score":11,"creation_date":1277152439,"post_id":3076173,"comment_id":3165851,"body_markdown":"@Justin, The Karnaugh map reduced the number of logical operations from 3 ANDs and 2 ORs to 2 ANDs and 2 ORs.                            \n\n@Jack, Thanks for reminding me of the Karnaugh Map&#39;s existence.","body":"@Justin, The Karnaugh map reduced the number of logical operations from 3 ANDs and 2 ORs to 2 ANDs and 2 ORs.                              @Jack, Thanks for reminding me of the Karnaugh Map&#39;s existence."},{"owner":{"account_id":3211,"reputation":23603,"user_id":4593,"accept_rate":98,"display_name":"Justin R."},"score":15,"creation_date":1277190058,"post_id":3076173,"comment_id":3168645,"body_markdown":"+1 for something new. My next functional spec will include a K-map, whether it needs it or it.","body":"+1 for something new. My next functional spec will include a K-map, whether it needs it or it."},{"owner":{"account_id":22327,"reputation":5114,"user_id":54956,"accept_rate":74,"display_name":"moala"},"score":2,"creation_date":1328197192,"post_id":3076173,"comment_id":11452099,"body_markdown":"Maybe the poor readability can be compensated by (1) the appropriate table in comment and (2) the appropriate unit test... +1 for something useful learned at school.","body":"Maybe the poor readability can be compensated by (1) the appropriate table in comment and (2) the appropriate unit test... +1 for something useful learned at school."}],"tags":[],"owner":{"account_id":41850,"reputation":132328,"user_id":121747,"accept_rate":89,"display_name":"Jack"},"comment_count":3,"down_vote_count":3,"up_vote_count":149,"is_accepted":false,"score":146,"last_activity_date":1276963817,"creation_date":1276963817,"answer_id":3076173,"question_id":3076078,"body_markdown":"This kind of questions can be solved with a [Karnaugh Map][1]:\r\n\r\n          | C | !C\r\n    ------|---|----\r\n     A  B | 1 | 1 \r\n     A !B | 1 | 0\r\n    !A !B | 0 | 0\r\n    !A  B | 1 | 0\r\n\r\nfrom which you infer that you need a group for first row and two groups for first column, obtaining the optimal solution of polygenelubricants:\r\n\r\n    (C &amp;&amp; (A || B)) || (A &amp;&amp; B)  &lt;---- first row\r\n           ^\r\n           |\r\n       first column without third case\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Karnaugh_map\r\n","title":"Check if at least two out of three booleans are true","body":"<p>This kind of questions can be solved with a <a href=\"http://en.wikipedia.org/wiki/Karnaugh_map\" rel=\"noreferrer\">Karnaugh Map</a>:</p>\n\n<pre><code>      | C | !C\n------|---|----\n A  B | 1 | 1 \n A !B | 1 | 0\n!A !B | 0 | 0\n!A  B | 1 | 0\n</code></pre>\n\n<p>from which you infer that you need a group for first row and two groups for first column, obtaining the optimal solution of polygenelubricants:</p>\n\n<pre><code>(C &amp;&amp; (A || B)) || (A &amp;&amp; B)  &lt;---- first row\n       ^\n       |\n   first column without third case\n</code></pre>\n"},{"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":5,"creation_date":1338337113,"post_id":3076199,"comment_id":14065015,"body_markdown":"You&#39;re only looking at the bytecode. For all you know, the JIT will take a version with branches in the bytecode and turn it into a version with no branches in native code. But one would tend to think that fewer branches in the bytecode would be better.","body":"You&#39;re only looking at the bytecode. For all you know, the JIT will take a version with branches in the bytecode and turn it into a version with no branches in native code. But one would tend to think that fewer branches in the bytecode would be better."}],"tags":[],"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"comment_count":1,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1276977168,"creation_date":1276964079,"answer_id":3076199,"question_id":3076078,"body_markdown":"Taking the answers (so far) here:\r\n\r\n    public class X\r\n    {\r\n        static boolean a(final boolean a, final boolean b, final boolean c)\r\n        {\r\n    \treturn ((a &amp;&amp; b) || (b &amp;&amp; c) || (a &amp;&amp; c));\r\n        }\r\n    \r\n        static boolean b(final boolean a, final boolean b, final boolean c)\r\n        {\r\n    \treturn a ? (b || c) : (b &amp;&amp; c);\r\n        }\r\n    \r\n        static boolean c(final boolean a, final boolean b, final boolean c)\r\n        {\r\n    \treturn ((a &amp; b) | (b &amp; c) | (c &amp; a));\r\n        }\r\n    \r\n        static boolean d(final boolean a, final boolean b, final boolean c)\r\n        {\r\n    \treturn ((a?1:0)+(b?1:0)+(c?1:0) &gt;= 2);\r\n        }\r\n    }\r\n\r\nand running them through the decompiler (javap -c X &gt; results.txt):\r\n\r\n    Compiled from &quot;X.java&quot;\r\n    public class X extends java.lang.Object{\r\n    public X();\r\n      Code:\r\n       0:\taload_0\r\n       1:\tinvokespecial\t#1; //Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\r\n       4:\treturn\r\n    \r\n    static boolean a(boolean, boolean, boolean);\r\n      Code:\r\n       0:\tiload_0\r\n       1:\tifeq\t8\r\n       4:\tiload_1\r\n       5:\tifne\t24\r\n       8:\tiload_1\r\n       9:\tifeq\t16\r\n       12:\tiload_2\r\n       13:\tifne\t24\r\n       16:\tiload_0\r\n       17:\tifeq\t28\r\n       20:\tiload_2\r\n       21:\tifeq\t28\r\n       24:\ticonst_1\r\n       25:\tgoto\t29\r\n       28:\ticonst_0\r\n       29:\tireturn\r\n    \r\n    static boolean b(boolean, boolean, boolean);\r\n      Code:\r\n       0:\tiload_0\r\n       1:\tifeq\t20\r\n       4:\tiload_1\r\n       5:\tifne\t12\r\n       8:\tiload_2\r\n       9:\tifeq\t16\r\n       12:\ticonst_1\r\n       13:\tgoto\t33\r\n       16:\ticonst_0\r\n       17:\tgoto\t33\r\n       20:\tiload_1\r\n       21:\tifeq\t32\r\n       24:\tiload_2\r\n       25:\tifeq\t32\r\n       28:\ticonst_1\r\n       29:\tgoto\t33\r\n       32:\ticonst_0\r\n       33:\tireturn\r\n    \r\n    static boolean c(boolean, boolean, boolean);\r\n      Code:\r\n       0:\tiload_0\r\n       1:\tiload_1\r\n       2:\tiand\r\n       3:\tiload_1\r\n       4:\tiload_2\r\n       5:\tiand\r\n       6:\tior\r\n       7:\tiload_2\r\n       8:\tiload_0\r\n       9:\tiand\r\n       10:\tior\r\n       11:\tireturn\r\n    \r\n    static boolean d(boolean, boolean, boolean);\r\n      Code:\r\n       0:\tiload_0\r\n       1:\tifeq\t8\r\n       4:\ticonst_1\r\n       5:\tgoto\t9\r\n       8:\ticonst_0\r\n       9:\tiload_1\r\n       10:\tifeq\t17\r\n       13:\ticonst_1\r\n       14:\tgoto\t18\r\n       17:\ticonst_0\r\n       18:\tiadd\r\n       19:\tiload_2\r\n       20:\tifeq\t27\r\n       23:\ticonst_1\r\n       24:\tgoto\t28\r\n       27:\ticonst_0\r\n       28:\tiadd\r\n       29:\ticonst_2\r\n       30:\tif_icmplt\t37\r\n       33:\ticonst_1\r\n       34:\tgoto\t38\r\n       37:\ticonst_0\r\n       38:\tireturn\r\n    }\r\n\r\nYou can see that the ?: ones are slightly better then the fixed up version of your original.  The one that is the best is the one that avoids branching altogether.  That is good from the point of view of fewer instructions (in most cases) and better for branch prediction parts of the CPU, since a wrong guess in the branch prediction can cause CPU stalling. \r\n\r\nI&#39;d say the most efficient one is the one from moonshadow overall.  It uses the fewest instructions on average and reduces the chance for pipeline stalls in the CPU.  \r\n\r\nTo be 100% sure you would need to find out the cost (in CPU cycles) for each instruction, which, unfortunately isn&#39;t readily available (you would have to look at the source for hotspot and then the CPU vendors specs for the time taken for each generated instruction).\r\n\r\nSee the updated answer by Rotsor for a runtime analysis of the code.\r\n","title":"Check if at least two out of three booleans are true","body":"<p>Taking the answers (so far) here:</p>\n\n<pre><code>public class X\n{\n    static boolean a(final boolean a, final boolean b, final boolean c)\n    {\n    return ((a &amp;&amp; b) || (b &amp;&amp; c) || (a &amp;&amp; c));\n    }\n\n    static boolean b(final boolean a, final boolean b, final boolean c)\n    {\n    return a ? (b || c) : (b &amp;&amp; c);\n    }\n\n    static boolean c(final boolean a, final boolean b, final boolean c)\n    {\n    return ((a &amp; b) | (b &amp; c) | (c &amp; a));\n    }\n\n    static boolean d(final boolean a, final boolean b, final boolean c)\n    {\n    return ((a?1:0)+(b?1:0)+(c?1:0) &gt;= 2);\n    }\n}\n</code></pre>\n\n<p>and running them through the decompiler (javap -c X > results.txt):</p>\n\n<pre><code>Compiled from \"X.java\"\npublic class X extends java.lang.Object{\npublic X();\n  Code:\n   0:   aload_0\n   1:   invokespecial   #1; //Method java/lang/Object.\"&lt;init&gt;\":()V\n   4:   return\n\nstatic boolean a(boolean, boolean, boolean);\n  Code:\n   0:   iload_0\n   1:   ifeq    8\n   4:   iload_1\n   5:   ifne    24\n   8:   iload_1\n   9:   ifeq    16\n   12:  iload_2\n   13:  ifne    24\n   16:  iload_0\n   17:  ifeq    28\n   20:  iload_2\n   21:  ifeq    28\n   24:  iconst_1\n   25:  goto    29\n   28:  iconst_0\n   29:  ireturn\n\nstatic boolean b(boolean, boolean, boolean);\n  Code:\n   0:   iload_0\n   1:   ifeq    20\n   4:   iload_1\n   5:   ifne    12\n   8:   iload_2\n   9:   ifeq    16\n   12:  iconst_1\n   13:  goto    33\n   16:  iconst_0\n   17:  goto    33\n   20:  iload_1\n   21:  ifeq    32\n   24:  iload_2\n   25:  ifeq    32\n   28:  iconst_1\n   29:  goto    33\n   32:  iconst_0\n   33:  ireturn\n\nstatic boolean c(boolean, boolean, boolean);\n  Code:\n   0:   iload_0\n   1:   iload_1\n   2:   iand\n   3:   iload_1\n   4:   iload_2\n   5:   iand\n   6:   ior\n   7:   iload_2\n   8:   iload_0\n   9:   iand\n   10:  ior\n   11:  ireturn\n\nstatic boolean d(boolean, boolean, boolean);\n  Code:\n   0:   iload_0\n   1:   ifeq    8\n   4:   iconst_1\n   5:   goto    9\n   8:   iconst_0\n   9:   iload_1\n   10:  ifeq    17\n   13:  iconst_1\n   14:  goto    18\n   17:  iconst_0\n   18:  iadd\n   19:  iload_2\n   20:  ifeq    27\n   23:  iconst_1\n   24:  goto    28\n   27:  iconst_0\n   28:  iadd\n   29:  iconst_2\n   30:  if_icmplt   37\n   33:  iconst_1\n   34:  goto    38\n   37:  iconst_0\n   38:  ireturn\n}\n</code></pre>\n\n<p>You can see that the ?: ones are slightly better then the fixed up version of your original.  The one that is the best is the one that avoids branching altogether.  That is good from the point of view of fewer instructions (in most cases) and better for branch prediction parts of the CPU, since a wrong guess in the branch prediction can cause CPU stalling. </p>\n\n<p>I'd say the most efficient one is the one from moonshadow overall.  It uses the fewest instructions on average and reduces the chance for pipeline stalls in the CPU.  </p>\n\n<p>To be 100% sure you would need to find out the cost (in CPU cycles) for each instruction, which, unfortunately isn't readily available (you would have to look at the source for hotspot and then the CPU vendors specs for the time taken for each generated instruction).</p>\n\n<p>See the updated answer by Rotsor for a runtime analysis of the code.</p>\n"},{"tags":[],"owner":{"account_id":154832,"reputation":61,"user_id":371052,"display_name":"malu"},"comment_count":0,"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1276969136,"creation_date":1276969136,"answer_id":3076560,"question_id":3076078,"body_markdown":"    boolean atLeastTwo(boolean a, boolean b, boolean c) \r\n    {\r\n      return ((a &amp;&amp; b) || (b &amp;&amp; c) || (a &amp;&amp; c));\r\n    }","title":"Check if at least two out of three booleans are true","body":"<pre><code>boolean atLeastTwo(boolean a, boolean b, boolean c) \n{\n  return ((a &amp;&amp; b) || (b &amp;&amp; c) || (a &amp;&amp; c));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3481,"reputation":61331,"user_id":5023,"accept_rate":86,"display_name":"Ash"},"score":0,"creation_date":1279545672,"post_id":3076954,"comment_id":3396223,"body_markdown":"+1  @Loadmaster, I&#39;m sorry but you&#39;re wrong!  This is the most succinct answer here. (i.e. briefly AND clearly expressed) ;)","body":"+1  @Loadmaster, I&#39;m sorry but you&#39;re wrong!  This is the most succinct answer here. (i.e. briefly AND clearly expressed) ;)"},{"owner":{"account_id":1124964,"reputation":1222,"user_id":1112472,"accept_rate":86,"display_name":"M. Mimpen"},"score":0,"creation_date":1390226101,"post_id":3076954,"comment_id":31987710,"body_markdown":"Micro-optimisation: `++n` is faster than `n++` [because you have to create another copy before doing the increment](http://stackoverflow.com/questions/3181211/prefix-postfix-increment-operators).","body":"Micro-optimisation: <code>++n</code> is faster than <code>n++</code> <a href=\"http://stackoverflow.com/questions/3181211/prefix-postfix-increment-operators\">because you have to create another copy before doing the increment</a>."},{"owner":{"account_id":56888,"reputation":11998,"user_id":170383,"accept_rate":71,"display_name":"David R Tribble"},"score":0,"creation_date":1390434044,"post_id":3076954,"comment_id":32094381,"body_markdown":"@M.Mimpen: Only for class objects. For primitive types (like `n` above), any decent compiler will compile each `++` operation down into a single CPU instruction, whether it&#39;s pre or post.","body":"@M.Mimpen: Only for class objects. For primitive types (like <code>n</code> above), any decent compiler will compile each <code>++</code> operation down into a single CPU instruction, whether it&#39;s pre or post."}],"tags":[],"owner":{"account_id":56888,"reputation":11998,"user_id":170383,"accept_rate":71,"display_name":"David R Tribble"},"comment_count":3,"down_vote_count":3,"up_vote_count":16,"is_accepted":false,"score":13,"last_activity_date":1423584120,"creation_date":1276976080,"answer_id":3076954,"question_id":3076078,"body_markdown":"Another example of direct code:\r\n\r\n    int  n = 0;\r\n    if (a) n++;\r\n    if (b) n++;\r\n    if (c) n++;\r\n    return (n &gt;= 2);\r\n\r\nIt&#39;s not the most succinct code, obviously.\r\n\r\n**Addendum**\r\n\r\nAnother (slightly optimized) version of this:\r\n\r\n    int  n = -2;\r\n    if (a) n++;\r\n    if (b) n++;\r\n    if (c) n++;\r\n    return (n &gt;= 0);\r\n\r\nThis might run slightly faster, assuming that the comparison against 0 will use faster (or perhaps less) code than the comparison against 2.","title":"Check if at least two out of three booleans are true","body":"<p>Another example of direct code:</p>\n\n<pre><code>int  n = 0;\nif (a) n++;\nif (b) n++;\nif (c) n++;\nreturn (n &gt;= 2);\n</code></pre>\n\n<p>It's not the most succinct code, obviously.</p>\n\n<p><strong>Addendum</strong></p>\n\n<p>Another (slightly optimized) version of this:</p>\n\n<pre><code>int  n = -2;\nif (a) n++;\nif (b) n++;\nif (c) n++;\nreturn (n &gt;= 0);\n</code></pre>\n\n<p>This might run slightly faster, assuming that the comparison against 0 will use faster (or perhaps less) code than the comparison against 2.</p>\n"},{"comments":[{"owner":{"account_id":55500,"reputation":13703,"user_id":166235,"accept_rate":79,"display_name":"Rotsor"},"score":9,"creation_date":1276980101,"post_id":3077029,"comment_id":3153220,"body_markdown":"Wow, I&#39;ve never seen a **fully** tested method before seeing this one.","body":"Wow, I&#39;ve never seen a <b>fully</b> tested method before seeing this one."},{"owner":{"account_id":38584,"reputation":1371,"user_id":110834,"accept_rate":75,"display_name":"CaptainCasey"},"score":52,"creation_date":1277098896,"post_id":3077029,"comment_id":3159092,"body_markdown":"I personally find this code awful, for so many reasons. I&#39;m not going to downvote, but if I ever saw this in production code I would curse. An extremely simple boolean operation does not need to be complicated like this.","body":"I personally find this code awful, for so many reasons. I&#39;m not going to downvote, but if I ever saw this in production code I would curse. An extremely simple boolean operation does not need to be complicated like this."},{"owner":{"account_id":30171,"reputation":40012,"user_id":82118,"accept_rate":72,"display_name":"Carl Manaster"},"score":11,"creation_date":1277127755,"post_id":3077029,"comment_id":3162137,"body_markdown":"I&#39;d be very interested to know your reasons, @CaptainCasey.  I think this is pretty good code.  There&#39;s a nice generalized function that&#39;s easy to understand, easy to verify, and a specific function that takes advantage of it, also easy to understand &amp; verify.  In the real world, I&#39;d make them public and put them in another class; other than that - I&#39;d happily put this code into production.  Oh - yeah - I&#39;d rename countBooleans() to countTrue().","body":"I&#39;d be very interested to know your reasons, @CaptainCasey.  I think this is pretty good code.  There&#39;s a nice generalized function that&#39;s easy to understand, easy to verify, and a specific function that takes advantage of it, also easy to understand &amp; verify.  In the real world, I&#39;d make them public and put them in another class; other than that - I&#39;d happily put this code into production.  Oh - yeah - I&#39;d rename countBooleans() to countTrue()."},{"owner":{"account_id":18996,"reputation":18826,"user_id":44065,"accept_rate":80,"display_name":"jmucchiello"},"score":1,"creation_date":1277156756,"post_id":3077029,"comment_id":3166395,"body_markdown":"@Carl - your code is spending a lot of time creating temporary boolean arrays. Very strange for profiling performance.","body":"@Carl - your code is spending a lot of time creating temporary boolean arrays. Very strange for profiling performance."},{"owner":{"account_id":7094,"reputation":43646,"user_id":12166,"accept_rate":100,"display_name":"Rafa Dowgird"},"score":2,"creation_date":1277193279,"post_id":3077029,"comment_id":3168973,"body_markdown":"@Carl: I&#39;d say that this code is overgeneralized. Most of the single-method solutions from other answers are equally easy to understand and verify. So unless you have another use for `countBooleans` elsewhere in your code there&#39;s no reason to have two methods where one does fine.","body":"@Carl: I&#39;d say that this code is overgeneralized. Most of the single-method solutions from other answers are equally easy to understand and verify. So unless you have another use for <code>countBooleans</code> elsewhere in your code there&#39;s no reason to have two methods where one does fine."},{"owner":{"account_id":152051,"reputation":11647,"user_id":366299,"accept_rate":81,"display_name":"atamanroman"},"score":5,"creation_date":1277198229,"post_id":3077029,"comment_id":3169534,"body_markdown":"if its not about performance, this solution looks nearly perfect for me: very easy to read and extendable. Thats exactly what var-args are made for.","body":"if its not about performance, this solution looks nearly perfect for me: very easy to read and extendable. Thats exactly what var-args are made for."},{"owner":{"account_id":30171,"reputation":40012,"user_id":82118,"accept_rate":72,"display_name":"Carl Manaster"},"score":0,"creation_date":1277229213,"post_id":3077029,"comment_id":3174156,"body_markdown":"@Michael, @Krougan: Not a joke.  I am well aware that my solution isn&#39;t as performant as the others; I think it&#39;s clearer and more general, and I think that has value.  You&#39;re entitled to your contrary opinion, of course.","body":"@Michael, @Krougan: Not a joke.  I am well aware that my solution isn&#39;t as performant as the others; I think it&#39;s clearer and more general, and I think that has value.  You&#39;re entitled to your contrary opinion, of course."},{"owner":{"account_id":67941,"reputation":9463,"user_id":198501,"display_name":"walkytalky"},"score":1,"creation_date":1277240676,"post_id":3077029,"comment_id":3175735,"body_markdown":"I sort of admire the sheer psychotic religious doggedness of this, but please just shoot me if I *ever* write code like it. (And no, performance is not the issue.)","body":"I sort of admire the sheer psychotic religious doggedness of this, but please just shoot me if I <i>ever</i> write code like it. (And no, performance is not the issue.)"},{"owner":{"account_id":30171,"reputation":40012,"user_id":82118,"accept_rate":72,"display_name":"Carl Manaster"},"score":3,"creation_date":1277269382,"post_id":3077029,"comment_id":3177971,"body_markdown":"@walkytalky I&#39;d rather exercise psychotic religious doggedness with respect to correctness, clarity, and generality than to clipping off that one last machine instruction; I think there is much greater value in that, with today&#39;s platforms.  YMMV.","body":"@walkytalky I&#39;d rather exercise psychotic religious doggedness with respect to correctness, clarity, and generality than to clipping off that one last machine instruction; I think there is much greater value in that, with today&#39;s platforms.  YMMV."},{"owner":{"account_id":67941,"reputation":9463,"user_id":198501,"display_name":"walkytalky"},"score":4,"creation_date":1277279944,"post_id":3077029,"comment_id":3178800,"body_markdown":"@Carl Was my final sentence somehow unclear? I couldn&#39;t care less about that last machine instruction. Writing half a page of scripture in place of a simple expression is not clarity at all, it is obfuscation. And if the only way you can think of to demonstrate correctness is absolute exhaustion then how do you ever get anything done?","body":"@Carl Was my final sentence somehow unclear? I couldn&#39;t care less about that last machine instruction. Writing half a page of scripture in place of a simple expression is not clarity at all, it is obfuscation. And if the only way you can think of to demonstrate correctness is absolute exhaustion then how do you ever get anything done?"},{"owner":{"account_id":30171,"reputation":40012,"user_id":82118,"accept_rate":72,"display_name":"Carl Manaster"},"score":2,"creation_date":1277301440,"post_id":3077029,"comment_id":3181446,"body_markdown":"@walkytalky Your final sentence was somewhat obscured by the insult of your first.  As it happens, I had the complete working solution written after test #2; I added the remaining tests so readers would have no doubt of the correctness.  It took about 30 seconds and I don&#39;t consider the time wasted.","body":"@walkytalky Your final sentence was somewhat obscured by the insult of your first.  As it happens, I had the complete working solution written after test #2; I added the remaining tests so readers would have no doubt of the correctness.  It took about 30 seconds and I don&#39;t consider the time wasted."},{"owner":{"account_id":67941,"reputation":9463,"user_id":198501,"display_name":"walkytalky"},"score":1,"creation_date":1277312922,"post_id":3077029,"comment_id":3183372,"body_markdown":"@Carl I certainly apologise for the insult - the sentence was intended lightheartedly, but reads as rude - sorry for that. On the rest we must agree to disagree.","body":"@Carl I certainly apologise for the insult - the sentence was intended lightheartedly, but reads as rude - sorry for that. On the rest we must agree to disagree."},{"owner":{"account_id":83010,"reputation":27402,"user_id":233014,"display_name":"Christoffer Hammarstr&#246;m"},"score":9,"creation_date":1292795994,"post_id":3077029,"comment_id":4905527,"body_markdown":"What the hell, people? This is clear and well tested code, and the only reason it looks like a lot is because it includes the tests. A+++, would upvote again.","body":"What the hell, people? This is clear and well tested code, and the only reason it looks like a lot is because it includes the tests. A+++, would upvote again."},{"owner":{"account_id":332245,"reputation":16487,"user_id":657427,"accept_rate":67,"display_name":"Christophe Roussy"},"score":0,"creation_date":1369129436,"post_id":3077029,"comment_id":23979001,"body_markdown":"While you are at it make the tests generic too ... but this looks more like stuff which could be useful in a boolean tool library","body":"While you are at it make the tests generic too ... but this looks more like stuff which could be useful in a boolean tool library"}],"tags":[],"owner":{"account_id":30171,"reputation":40012,"user_id":82118,"accept_rate":72,"display_name":"Carl Manaster"},"comment_count":14,"down_vote_count":5,"up_vote_count":35,"is_accepted":false,"score":30,"last_activity_date":1276977510,"creation_date":1276977510,"answer_id":3077029,"question_id":3076078,"body_markdown":"Here&#39;s a test-driven, general approach.  Not as &quot;efficient&quot; as most of the solutions so far offered, but clear, tested, working, and generalized.\r\n\r\n    public class CountBooleansTest extends TestCase {\r\n    \tpublic void testThreeFalse() throws Exception {\r\n    \t\tassertFalse(atLeastTwoOutOfThree(false, false, false));\r\n    \t}\r\n    \r\n    \tpublic void testThreeTrue() throws Exception {\r\n    \t\tassertTrue(atLeastTwoOutOfThree(true, true, true));\r\n    \t}\r\n    \t\r\n    \tpublic void testOnes() throws Exception {\r\n    \t\tassertFalse(atLeastTwoOutOfThree(true, false, false));\r\n    \t\tassertFalse(atLeastTwoOutOfThree(false, true, false));\r\n    \t\tassertFalse(atLeastTwoOutOfThree(false, false, true));\r\n    \t}\r\n    \r\n    \tpublic void testTwos() throws Exception {\r\n    \t\tassertTrue(atLeastTwoOutOfThree(false, true, true));\r\n    \t\tassertTrue(atLeastTwoOutOfThree(true, false, true));\r\n    \t\tassertTrue(atLeastTwoOutOfThree(true, true, false));\r\n    \t}\r\n    \r\n    \tprivate static boolean atLeastTwoOutOfThree(boolean b, boolean c, boolean d) {\r\n    \t\treturn countBooleans(b, c, d) &gt;= 2;\r\n    \t}\r\n    \r\n    \tprivate static int countBooleans(boolean... bs) {\r\n    \t\tint count = 0;\r\n    \t\tfor (boolean b : bs)\r\n    \t\t\tif (b)\r\n    \t\t\t\tcount++;\r\n    \t\treturn count;\r\n    \t}\r\n    }\r\n\r\n","title":"Check if at least two out of three booleans are true","body":"<p>Here's a test-driven, general approach.  Not as \"efficient\" as most of the solutions so far offered, but clear, tested, working, and generalized.</p>\n\n<pre><code>public class CountBooleansTest extends TestCase {\n    public void testThreeFalse() throws Exception {\n        assertFalse(atLeastTwoOutOfThree(false, false, false));\n    }\n\n    public void testThreeTrue() throws Exception {\n        assertTrue(atLeastTwoOutOfThree(true, true, true));\n    }\n\n    public void testOnes() throws Exception {\n        assertFalse(atLeastTwoOutOfThree(true, false, false));\n        assertFalse(atLeastTwoOutOfThree(false, true, false));\n        assertFalse(atLeastTwoOutOfThree(false, false, true));\n    }\n\n    public void testTwos() throws Exception {\n        assertTrue(atLeastTwoOutOfThree(false, true, true));\n        assertTrue(atLeastTwoOutOfThree(true, false, true));\n        assertTrue(atLeastTwoOutOfThree(true, true, false));\n    }\n\n    private static boolean atLeastTwoOutOfThree(boolean b, boolean c, boolean d) {\n        return countBooleans(b, c, d) &gt;= 2;\n    }\n\n    private static int countBooleans(boolean... bs) {\n        int count = 0;\n        for (boolean b : bs)\n            if (b)\n                count++;\n        return count;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":94218,"reputation":27823,"user_id":257356,"accept_rate":59,"display_name":"SyntaxT3rr0r"},"score":0,"creation_date":1315485708,"post_id":3077577,"comment_id":8864265,"body_markdown":"@Anurag: as much as I love M/R and the exposure that Google recently gave to it (even if it&#39;s not the one true M/R from FP), I&#39;d tend to call bullsh!t on your answer.  There are billions and billions of lines of code performing Real-World [TM] &quot;stuff&quot; where there ain&#39;t a single line of map/reduce used.  Someone answering such a question with *this* is definitely flagged in my book as: *&quot;trying to play the smartie&quot;*.  Not to mention most interviewers wouldn&#39;t be able to tell if you&#39;re trying to bullsh!t them or not because they actually never wrote a single program using M/R in their career.","body":"@Anurag: as much as I love M/R and the exposure that Google recently gave to it (even if it&#39;s not the one true M/R from FP), I&#39;d tend to call bullsh!t on your answer.  There are billions and billions of lines of code performing Real-World [TM] &quot;stuff&quot; where there ain&#39;t a single line of map/reduce used.  Someone answering such a question with <i>this</i> is definitely flagged in my book as: <i>&quot;trying to play the smartie&quot;</i>.  Not to mention most interviewers wouldn&#39;t be able to tell if you&#39;re trying to bullsh!t them or not because they actually never wrote a single program using M/R in their career."},{"owner":{"account_id":55352,"reputation":140675,"user_id":165737,"accept_rate":97,"display_name":"Anurag"},"score":2,"creation_date":1315525949,"post_id":3077577,"comment_id":8874966,"body_markdown":"@Syntax - Everyone is entitled to their opinion. My answer is just one more approach of looking at the problem. Sure, it sounds exaggerated for 3 booleans values, but that doesn&#39;t mean I&#39;m trying to be the smarty-pants here. This is a common approach to problem solving that everyone uses - break the problem down into small pieces. That&#39;s how mathematical induction works, that&#39;s how most recursive algorithms work, and that&#39;s how people solve problems in general.","body":"@Syntax - Everyone is entitled to their opinion. My answer is just one more approach of looking at the problem. Sure, it sounds exaggerated for 3 booleans values, but that doesn&#39;t mean I&#39;m trying to be the smarty-pants here. This is a common approach to problem solving that everyone uses - break the problem down into small pieces. That&#39;s how mathematical induction works, that&#39;s how most recursive algorithms work, and that&#39;s how people solve problems in general."}],"tags":[],"owner":{"account_id":55352,"reputation":140675,"user_id":165737,"accept_rate":97,"display_name":"Anurag"},"comment_count":2,"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1277265538,"creation_date":1276988620,"answer_id":3077577,"question_id":3076078,"body_markdown":"Here&#39;s another implementation using map/reduce. This scales well to *billions of booleans*&lt;sup&gt;&#169;&lt;/sup&gt; in a distributed environment. Using MongoDB:\r\n\r\nCreating a database `values` of booleans:\r\n\r\n    db.values.insert({value: true});\r\n    db.values.insert({value: false});\r\n    db.values.insert({value: true});\r\n    \r\nCreating the map, reduce functions:\r\n\r\n**Edit**: I like [CurtainDog&#39;s][1] [answer][2] about having map/reduce apply to generic lists, so here goes a map function which takes a callback that determines whether a value should be counted or not.\r\n\r\n    var mapper = function(shouldInclude) {\r\n        return function() {\r\n            emit(null, shouldInclude(this) ? 1 : 0);\r\n        };\r\n    }\r\n\r\n    var reducer = function(key, values) {\r\n        var sum = 0;\r\n        for(var i = 0; i &lt; values.length; i++) {\r\n            sum += values[i];\r\n        }\r\n        return sum;\r\n    }\r\n \r\nRunning map/reduce:\r\n\r\n    var result = db.values.mapReduce(mapper(isTrue), reducer).result;\r\n\r\n    containsMinimum(2, result); // true\r\n    containsMinimum(1, result); // false\r\n\r\n\r\n    function isTrue(object) {\r\n        return object.value == true;\r\n    }\r\n\r\n    function containsMinimum(count, resultDoc) {\r\n    \tvar record = db[resultDoc].find().next();\r\n    \treturn record.value &gt;= count;\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/87206/curtaindog\r\n  [2]: https://stackoverflow.com/questions/3076078/check-if-at-least-2-out-of-3-booleans-is-true/3098764#3098764","title":"Check if at least two out of three booleans are true","body":"<p>Here's another implementation using map/reduce. This scales well to <em>billions of booleans</em><sup></sup> in a distributed environment. Using MongoDB:</p>\n\n<p>Creating a database <code>values</code> of booleans:</p>\n\n<pre><code>db.values.insert({value: true});\ndb.values.insert({value: false});\ndb.values.insert({value: true});\n</code></pre>\n\n<p>Creating the map, reduce functions:</p>\n\n<p><strong>Edit</strong>: I like <a href=\"https://stackoverflow.com/users/87206/curtaindog\">CurtainDog's</a> <a href=\"https://stackoverflow.com/questions/3076078/check-if-at-least-2-out-of-3-booleans-is-true/3098764#3098764\">answer</a> about having map/reduce apply to generic lists, so here goes a map function which takes a callback that determines whether a value should be counted or not.</p>\n\n<pre><code>var mapper = function(shouldInclude) {\n    return function() {\n        emit(null, shouldInclude(this) ? 1 : 0);\n    };\n}\n\nvar reducer = function(key, values) {\n    var sum = 0;\n    for(var i = 0; i &lt; values.length; i++) {\n        sum += values[i];\n    }\n    return sum;\n}\n</code></pre>\n\n<p>Running map/reduce:</p>\n\n<pre><code>var result = db.values.mapReduce(mapper(isTrue), reducer).result;\n\ncontainsMinimum(2, result); // true\ncontainsMinimum(1, result); // false\n\n\nfunction isTrue(object) {\n    return object.value == true;\n}\n\nfunction containsMinimum(count, resultDoc) {\n    var record = db[resultDoc].find().next();\n    return record.value &gt;= count;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1277014000,"post_id":3078229,"comment_id":3154586,"body_markdown":"or (a?1:0)+(b?1:0)+(c?1:0) &gt;= 2","body":"or (a?1:0)+(b?1:0)+(c?1:0) &gt;= 2"}],"tags":[],"owner":{"account_id":21911,"reputation":10474,"user_id":2127508,"display_name":"barrowc"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1277008355,"creation_date":1277008355,"answer_id":3078229,"question_id":3076078,"body_markdown":"Yet another way to do this but not a very good one:\r\n\r\n    return (Boolean.valueOf(a).hashCode() + Boolean.valueOf(b).hashCode() + Boolean.valueOf(c).hashCode()) &lt; 3705);\r\n\r\nThe `Boolean` hashcode values are fixed at 1231 for true and 1237 for false so could equally have used `&lt;= 3699`","title":"Check if at least two out of three booleans are true","body":"<p>Yet another way to do this but not a very good one:</p>\n\n<pre><code>return (Boolean.valueOf(a).hashCode() + Boolean.valueOf(b).hashCode() + Boolean.valueOf(c).hashCode()) &lt; 3705);\n</code></pre>\n\n<p>The <code>Boolean</code> hashcode values are fixed at 1231 for true and 1237 for false so could equally have used <code>&lt;= 3699</code></p>\n"},{"comments":[{"owner":{"account_id":154406,"reputation":1094,"user_id":370321,"display_name":"abelito"},"score":0,"creation_date":1277146091,"post_id":3079167,"comment_id":3164898,"body_markdown":"Functionally, it is the same. Syntactically, it makes it easier to read for those unaccustomed to the use of the question mark conditional operator. I am willing to bet more people know how to use AND and OR operators than the number of people who know how to use question mark conditional operators.\n\nThe original question asks for an &quot;improved answer&quot;.. The accepted answer does simplify the answer, but raises a very interesting question of what does one consider improvement. Do you program for universal readability or for simplicity?\n\nTo me, this is an improvement over the accepted answer :)","body":"Functionally, it is the same. Syntactically, it makes it easier to read for those unaccustomed to the use of the question mark conditional operator. I am willing to bet more people know how to use AND and OR operators than the number of people who know how to use question mark conditional operators.  The original question asks for an &quot;improved answer&quot;.. The accepted answer does simplify the answer, but raises a very interesting question of what does one consider improvement. Do you program for universal readability or for simplicity?  To me, this is an improvement over the accepted answer :)"},{"owner":{"account_id":59121,"reputation":51086,"user_id":176923,"accept_rate":79,"display_name":"nico"},"score":0,"creation_date":1277150417,"post_id":3079167,"comment_id":3165553,"body_markdown":"Personal preferences. For me it&#39;s way more easy to understand the cleaner ternary operator than this solution.","body":"Personal preferences. For me it&#39;s way more easy to understand the cleaner ternary operator than this solution."},{"owner":{"account_id":85462,"reputation":31450,"user_id":238260,"accept_rate":66,"display_name":"Vivian River"},"score":1,"creation_date":1277224836,"post_id":3079167,"comment_id":3173445,"body_markdown":"Ah yeah, I saw this problem and was wondering why no one else mentioned this solution.\n\nIf you write out the OP&#39;s logic as boolean algebra, you get A*B+A*C+B*C, which has five operations.  By the associative property, you can write A*(B+C)+B*C, which has four operations.","body":"Ah yeah, I saw this problem and was wondering why no one else mentioned this solution.  If you write out the OP&#39;s logic as boolean algebra, you get A<i>B+A</i>C+B<i>C, which has five operations.  By the associative property, you can write A*(B+C)+B</i>C, which has four operations."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1277465568,"post_id":3079167,"comment_id":3199644,"body_markdown":"It&#39;s the same as Jack&#39;s answer (Jun. 19th) `(C &amp;&amp; (A || B)) || (A &amp;&amp; B)` just changed the *variable` names...","body":"It&#39;s the same as Jack&#39;s answer (Jun. 19th) <code>(C &amp;&amp; (A || B)) || (A &amp;&amp; B)</code> just changed the *variable` names..."}],"tags":[],"owner":{"account_id":154406,"reputation":1094,"user_id":370321,"display_name":"abelito"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1359153453,"creation_date":1277035918,"answer_id":3079167,"question_id":3076078,"body_markdown":"The simplest way (IMO) that is not confusing and easy to read:\r\n\r\n    // Three booleans, check if two or more are true\r\n\r\n    return ( a &amp;&amp; ( b || c ) ) || ( b &amp;&amp; c );\r\n","title":"Check if at least two out of three booleans are true","body":"<p>The simplest way (IMO) that is not confusing and easy to read:</p>\n\n<pre><code>// Three booleans, check if two or more are true\n\nreturn ( a &amp;&amp; ( b || c ) ) || ( b &amp;&amp; c );\n</code></pre>\n"},{"comments":[{"owner":{"account_id":23619,"reputation":135298,"user_id":59303,"accept_rate":84,"display_name":"ChrisF"},"score":2,"creation_date":1277140913,"post_id":3086807,"comment_id":3164140,"body_markdown":"Why not simply `return ($count &gt;= 2);`? Also it&#39;s a duplicate of this answer - http://stackoverflow.com/questions/3076078/check-if-at-least-2-out-of-3-booleans-is-true/3076954#3076954","body":"Why not simply <code>return ($count &gt;= 2);</code>? Also it&#39;s a duplicate of this answer - <a href=\"http://stackoverflow.com/questions/3076078/check-if-at-least-2-out-of-3-booleans-is-true/3076954#3076954\" title=\"check if at least 2 out of 3 booleans is true\">stackoverflow.com/questions/3076078/&hellip;</a>"},{"owner":{"account_id":12503,"reputation":1831,"user_id":24643,"accept_rate":100,"display_name":"labratmatt"},"score":0,"creation_date":1277143017,"post_id":3086807,"comment_id":3164465,"body_markdown":"@ChrisF\n\nThe if () {return bool} is more clear to me. I can see how some think it is too verbose.\n\nMy solution is very similar to http://stackoverflow.com/questions/3076078/check-if-at-least-2-out-of-3-booleans-is-true/3076954#3076954 but it is more complete and contains some justification (the text about ternary operators being confusing).","body":"@ChrisF  The if () {return bool} is more clear to me. I can see how some think it is too verbose.  My solution is very similar to <a href=\"http://stackoverflow.com/questions/3076078/check-if-at-least-2-out-of-3-booleans-is-true/3076954#3076954\" title=\"check if at least 2 out of 3 booleans is true\">stackoverflow.com/questions/3076078/&hellip;</a> but it is more complete and contains some justification (the text about ternary operators being confusing)."},{"owner":{"account_id":44872,"reputation":70920,"user_id":131930,"accept_rate":91,"display_name":"Jeremy Friesner"},"score":5,"creation_date":1277144224,"post_id":3086807,"comment_id":3164615,"body_markdown":"Personally I find multiple if statements Make Me Think more than ternary operators, since each if statement represents a different possible execution path.  A single line, OTOH, will always set the value to the left of the equals sign exactly once, no matter how many ternary operators are used to the right of the equals sign.","body":"Personally I find multiple if statements Make Me Think more than ternary operators, since each if statement represents a different possible execution path.  A single line, OTOH, will always set the value to the left of the equals sign exactly once, no matter how many ternary operators are used to the right of the equals sign."},{"owner":{"account_id":35976,"reputation":1581,"user_id":102289,"accept_rate":56,"display_name":"Luciano"},"score":4,"creation_date":1277155937,"post_id":3086807,"comment_id":3166312,"body_markdown":"I much prefer Ternary operators to multi-line stuff that I replace.  I often (in legacy code) take ~10 lines down to one with a ternary.  Less text = more code on screen = more context.","body":"I much prefer Ternary operators to multi-line stuff that I replace.  I often (in legacy code) take ~10 lines down to one with a ternary.  Less text = more code on screen = more context."},{"owner":{"account_id":25438,"reputation":274811,"user_id":65387,"accept_rate":66,"display_name":"mpen"},"score":2,"creation_date":1277184337,"post_id":3086807,"comment_id":3168222,"body_markdown":"Yeah man... it isn&#39;t *just* about being cool. Ternaries are *shorter*. Less to read, less to comprehend. Unless you *really* struggle with them, one little ternary is a lot quicker to understand than the... 8 lines and branching opportunities you have there.","body":"Yeah man... it isn&#39;t <i>just</i> about being cool. Ternaries are <i>shorter</i>. Less to read, less to comprehend. Unless you <i>really</i> struggle with them, one little ternary is a lot quicker to understand than the... 8 lines and branching opportunities you have there."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1338337485,"post_id":3086807,"comment_id":14065074,"body_markdown":"This is much harder to understand than a ternary operator.","body":"This is much harder to understand than a ternary operator."}],"tags":[],"owner":{"account_id":12503,"reputation":1831,"user_id":24643,"accept_rate":100,"display_name":"labratmatt"},"comment_count":6,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1700524944,"creation_date":1277140436,"answer_id":3086807,"question_id":3076078,"body_markdown":"Ternary operators get the nerd juices flowing, but they can be confusing (making code less maintainable, thus increasing the potential for bug injection). [Jeff Attwood][1] said it well [here][2]:\r\n\r\n&gt; It&#39;s a perfect example of trading off\r\n&gt; an utterly meaningless one time\r\n&gt; write-time savings against dozens of\r\n&gt; read-time comprehension penalties-- It\r\n&gt; Makes Me Think.\r\n\r\nAvoiding ternary operators, I&#39;ve created the following function:\r\n\r\n    function atLeastTwoTrue($a, $b, $c) {\r\n        $count = 0;\r\n\r\n        if ($a) { $count++; }\r\n        if ($b) { $count++; }\r\n        if ($c) { $count++; }\r\n\r\n        return $count &gt;= 2;\r\n    }\r\n\r\nIs this as cool as some of the other solutions? No. Is it easier to understand? Yes. Will that lead to more maintainable, less buggy code? Yes.\r\n\r\n  [1]: https://stackoverflow.com/users/1/jeff-atwood\r\n  [2]: http://www.codinghorror.com/blog/2005/09/in-defense-of-verbosity.html","title":"Check if at least two out of three booleans are true","body":"<p>Ternary operators get the nerd juices flowing, but they can be confusing (making code less maintainable, thus increasing the potential for bug injection). <a href=\"https://stackoverflow.com/users/1/jeff-atwood\">Jeff Attwood</a> said it well <a href=\"http://www.codinghorror.com/blog/2005/09/in-defense-of-verbosity.html\" rel=\"nofollow noreferrer\">here</a>:</p>\n<blockquote>\n<p>It's a perfect example of trading off\nan utterly meaningless one time\nwrite-time savings against dozens of\nread-time comprehension penalties-- It\nMakes Me Think.</p>\n</blockquote>\n<p>Avoiding ternary operators, I've created the following function:</p>\n<pre><code>function atLeastTwoTrue($a, $b, $c) {\n    $count = 0;\n\n    if ($a) { $count++; }\n    if ($b) { $count++; }\n    if ($c) { $count++; }\n\n    return $count &gt;= 2;\n}\n</code></pre>\n<p>Is this as cool as some of the other solutions? No. Is it easier to understand? Yes. Will that lead to more maintainable, less buggy code? Yes.</p>\n"},{"comments":[{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":3,"creation_date":1277142074,"post_id":3086826,"comment_id":3164324,"body_markdown":"Look more like C#. This should be mentioned as such in the answer since the question is Java-targeted :)","body":"Look more like C#. This should be mentioned as such in the answer since the question is Java-targeted :)"}],"tags":[],"owner":{"account_id":624585,"reputation":31,"user_id":372395,"display_name":"Duby"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1277140852,"creation_date":1277140585,"answer_id":3086826,"question_id":3076078,"body_markdown":"    Function ReturnTrueIfTwoIsTrue(bool val1, val2, val3))\r\n    {\r\n         return (System.Convert.ToInt16(val1) +\r\n                 System.Convert.ToInt16(val2) +\r\n                 System.Convert.ToInt16(val3)) &gt; 1;\r\n    }\r\n\r\nToo many ways to do this...\r\n","title":"Check if at least two out of three booleans are true","body":"<pre><code>Function ReturnTrueIfTwoIsTrue(bool val1, val2, val3))\n{\n     return (System.Convert.ToInt16(val1) +\n             System.Convert.ToInt16(val2) +\n             System.Convert.ToInt16(val3)) &gt; 1;\n}\n</code></pre>\n\n<p>Too many ways to do this...</p>\n"},{"tags":[],"owner":{"account_id":95063,"reputation":18807,"user_id":259130,"accept_rate":54,"display_name":"Roman A. Taycher"},"comment_count":0,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1359153534,"creation_date":1277140588,"answer_id":3086829,"question_id":3076078,"body_markdown":"I don&#39;t like ternary (`return a ? (b || c) : (b &amp;&amp; c);` from the top answer), and I don&#39;t think I&#39;ve seen anyone mention it. It is written like this:\r\n\r\n    boolean atLeastTwo(boolean a, boolean b, boolean c) {\r\n        if (a) {\r\n            return b||c;\r\n        } \r\n        else {\r\n            return b&amp;&amp;C;\r\n        }\r\n","title":"Check if at least two out of three booleans are true","body":"<p>I don't like ternary (<code>return a ? (b || c) : (b &amp;&amp; c);</code> from the top answer), and I don't think I've seen anyone mention it. It is written like this:</p>\n\n<pre><code>boolean atLeastTwo(boolean a, boolean b, boolean c) {\n    if (a) {\n        return b||c;\n    } \n    else {\n        return b&amp;&amp;C;\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":55500,"reputation":13703,"user_id":166235,"accept_rate":79,"display_name":"Rotsor"},"score":166,"creation_date":1277221847,"post_id":3087026,"comment_id":3172986,"body_markdown":"Wow, cool solution.\nBut for me its inverted version is easier to understand: a==b ? a : c","body":"Wow, cool solution. But for me its inverted version is easier to understand: a==b ? a : c"},{"owner":{"account_id":152015,"reputation":19159,"user_id":366234,"display_name":"Tim Stone"},"score":1,"creation_date":1277245971,"post_id":3087026,"comment_id":3176388,"body_markdown":"Yeah, that&#39;s definitely more clear for anyone who has to read the code. Heh, admittedly I&#39;d probably do a quick double-take at what I wrote if I saw it somewhere else.","body":"Yeah, that&#39;s definitely more clear for anyone who has to read the code. Heh, admittedly I&#39;d probably do a quick double-take at what I wrote if I saw it somewhere else."},{"owner":{"account_id":46120,"reputation":2722,"user_id":136173,"display_name":"alexanderpas"},"score":5,"creation_date":1277249971,"post_id":3087026,"comment_id":3176773,"body_markdown":"a ^ b ? c : a ^ b ? c : a ^ b ? c : a","body":"a ^ b ? c : a ^ b ? c : a ^ b ? c : a"},{"owner":{"account_id":3809,"reputation":11695,"user_id":5559,"accept_rate":96,"display_name":"EightyOne Unite"},"score":4,"creation_date":1279295178,"post_id":3087026,"comment_id":3378416,"body_markdown":"Yay,..XOR gets such a bad press and you seldom get the chance to use it.","body":"Yay,..XOR gets such a bad press and you seldom get the chance to use it."},{"owner":{"account_id":107998,"reputation":67665,"user_id":286871,"accept_rate":77,"display_name":"Tikhon Jelvis"},"score":19,"creation_date":1284104716,"post_id":3087026,"comment_id":3879250,"body_markdown":"@Stimul8d maybe because, for booleans, it&#39;s the same as != but less readable? Figuring that out was a eureka moment for me...","body":"@Stimul8d maybe because, for booleans, it&#39;s the same as != but less readable? Figuring that out was a eureka moment for me..."},{"owner":{"account_id":187437,"reputation":941,"user_id":425493,"accept_rate":95,"display_name":"182764125216"},"score":1,"creation_date":1310495776,"post_id":3087026,"comment_id":7886296,"body_markdown":"Does it do (a ^ b) ? c : a   OR  a ^ (b ? c : a)","body":"Does it do (a ^ b) ? c : a   OR  a ^ (b ? c : a)"},{"owner":{"account_id":152015,"reputation":19159,"user_id":366234,"display_name":"Tim Stone"},"score":1,"creation_date":1310496192,"post_id":3087026,"comment_id":7886437,"body_markdown":"@182764125216 The first one. XOR has a higher precedence than the ternary operator.","body":"@182764125216 The first one. XOR has a higher precedence than the ternary operator."},{"owner":{"account_id":411070,"reputation":8766,"user_id":783284,"accept_rate":88,"display_name":"Cody"},"score":0,"creation_date":1328116266,"post_id":3087026,"comment_id":11429684,"body_markdown":"The `a ^ b` is throwing me off - what exactly is going on?","body":"The <code>a ^ b</code> is throwing me off - what exactly is going on?"},{"owner":{"account_id":152015,"reputation":19159,"user_id":366234,"display_name":"Tim Stone"},"score":1,"creation_date":1328117020,"post_id":3087026,"comment_id":11429950,"body_markdown":"@DoctorOreo `a ^ b` is the same as `a != b` in this case, so if at least two are true `a` must not equal `b` (i.e one of them is true) and `c` must be true, otherwise `a` must equal `b` and `a` must be true.","body":"@DoctorOreo <code>a ^ b</code> is the same as <code>a != b</code> in this case, so if at least two are true <code>a</code> must not equal <code>b</code> (i.e one of them is true) and <code>c</code> must be true, otherwise <code>a</code> must equal <code>b</code> and <code>a</code> must be true."},{"owner":{"account_id":1304272,"reputation":574,"user_id":1253569,"display_name":"flanglet"},"score":2,"creation_date":1333311791,"post_id":3087026,"comment_id":12733601,"body_markdown":"I prefer the purely binary form: return ((a^b) &amp; c) | (a &amp; b). It is branch-less (faster) and easy to read : (a or b is true and c is true) or (a and b are both true). Note that (a|b) and (a^b) both work with this formula.","body":"I prefer the purely binary form: return ((a^b) &amp; c) | (a &amp; b). It is branch-less (faster) and easy to read : (a or b is true and c is true) or (a and b are both true). Note that (a|b) and (a^b) both work with this formula."},{"owner":{"account_id":1074601,"reputation":8524,"user_id":1073023,"accept_rate":100,"display_name":"Kshitij"},"score":1,"creation_date":1340365629,"post_id":3087026,"comment_id":14627945,"body_markdown":"unfortunately I am just allowed to upvote once :( ..simple and accurate. great answer!","body":"unfortunately I am just allowed to upvote once :( ..simple and accurate. great answer!"},{"owner":{"account_id":5063932,"reputation":3400,"user_id":4441547,"accept_rate":86,"display_name":"Aaron Franke"},"score":0,"creation_date":1493310142,"post_id":3087026,"comment_id":74373149,"body_markdown":"What does the `?` operator do? What does the `:` operator do?","body":"What does the <code>?</code> operator do? What does the <code>:</code> operator do?"},{"owner":{"account_id":152015,"reputation":19159,"user_id":366234,"display_name":"Tim Stone"},"score":0,"creation_date":1493310304,"post_id":3087026,"comment_id":74373293,"body_markdown":"@AaronFranke It&#39;s the [ternary operator](https://en.wikipedia.org/wiki/%3F:#Java)","body":"@AaronFranke It&#39;s the <a href=\"https://en.wikipedia.org/wiki/%3F:#Java\" rel=\"nofollow noreferrer\">ternary operator</a>"}],"tags":[],"owner":{"account_id":152015,"reputation":19159,"user_id":366234,"display_name":"Tim Stone"},"comment_count":13,"down_vote_count":2,"up_vote_count":512,"is_accepted":false,"score":510,"last_activity_date":1277142231,"creation_date":1277142231,"answer_id":3087026,"question_id":3076078,"body_markdown":"Just for the sake of using XOR to answer a relatively straight-forward problem...\r\n\r\n    return a ^ b ? c : a","title":"Check if at least two out of three booleans are true","body":"<p>Just for the sake of using XOR to answer a relatively straight-forward problem...</p>\n\n<pre><code>return a ^ b ? c : a\n</code></pre>\n"},{"comments":[{"owner":{"account_id":25438,"reputation":274811,"user_id":65387,"accept_rate":66,"display_name":"mpen"},"score":2,"creation_date":1277184066,"post_id":3087188,"comment_id":3168204,"body_markdown":"Gahh... why?! The other counting methods already posted are so much better!","body":"Gahh... why?! The other counting methods already posted are so much better!"}],"tags":[],"owner":{"account_id":624600,"reputation":11,"user_id":372436,"display_name":"itpatil"},"comment_count":1,"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1277143692,"creation_date":1277143692,"answer_id":3087188,"question_id":3076078,"body_markdown":"&lt;pre&gt;\r\nfunction atLeastTwoTrue($a, $b, $c) {\r\n\r\n  int count = 0;\r\n  count = (a ? count + 1 : count);\r\n  count = (b ? count + 1 : count);\r\n  count = (c ? count + 1 : count);\r\n  return (count &gt;= 2);\r\n}\r\n&lt;/pre&gt;","title":"Check if at least two out of three booleans are true","body":"<pre>\nfunction atLeastTwoTrue($a, $b, $c) {\n\n  int count = 0;\n  count = (a ? count + 1 : count);\n  count = (b ? count + 1 : count);\n  count = (c ? count + 1 : count);\n  return (count >= 2);\n}\n</pre>\n"},{"tags":[],"owner":{"account_id":627594,"reputation":21,"user_id":372497,"display_name":"Suvega"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1277206602,"creation_date":1277148220,"answer_id":3087785,"question_id":3076078,"body_markdown":"A C solution.\r\n\r\n    int two(int a, int b, int c) {\r\n      return !a + !b + !c &lt; 2;\r\n    }\r\n\r\nor you may prefer:\r\n\r\n    int two(int a, int b, int c) {\r\n      return !!a + !!b + !!c &gt;= 2;\r\n    }\r\n","title":"Check if at least two out of three booleans are true","body":"<p>A C solution.</p>\n\n<pre><code>int two(int a, int b, int c) {\n  return !a + !b + !c &lt; 2;\n}\n</code></pre>\n\n<p>or you may prefer:</p>\n\n<pre><code>int two(int a, int b, int c) {\n  return !!a + !!b + !!c &gt;= 2;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":31,"reputation":13054,"user_id":40,"accept_rate":100,"display_name":"Kevin"},"score":0,"creation_date":1277150374,"post_id":3088064,"comment_id":3165545,"body_markdown":"Didn&#39;t see Suvega&#39;s answer before posing this, pretty much the same thing.","body":"Didn&#39;t see Suvega&#39;s answer before posing this, pretty much the same thing."},{"owner":{"account_id":44125,"reputation":4707,"user_id":129332,"display_name":"Mark Edgar"},"score":0,"creation_date":1277205474,"post_id":3088064,"comment_id":3170287,"body_markdown":"Does this really work?  I assume this is PHP, but I don&#39;t have access to it, but I&#39;ll just ask you: what happens if $a is 0?","body":"Does this really work?  I assume this is PHP, but I don&#39;t have access to it, but I&#39;ll just ask you: what happens if $a is 0?"},{"owner":{"account_id":31,"reputation":13054,"user_id":40,"accept_rate":100,"display_name":"Kevin"},"score":0,"creation_date":1277210864,"post_id":3088064,"comment_id":3171084,"body_markdown":"@Mark It actually doesn&#39;t work if $a is 0. That was an oversight. Thanks for pointing that out. :)","body":"@Mark It actually doesn&#39;t work if $a is 0. That was an oversight. Thanks for pointing that out. :)"}],"tags":[],"owner":{"account_id":31,"reputation":13054,"user_id":40,"accept_rate":100,"display_name":"Kevin"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1277210683,"creation_date":1277150304,"answer_id":3088064,"question_id":3076078,"body_markdown":"    return 1 &lt;&lt; $a &lt;&lt; $b &lt;&lt; $c &gt;= 1 &lt;&lt; 2;","title":"Check if at least two out of three booleans are true","body":"<pre><code>return 1 &lt;&lt; $a &lt;&lt; $b &lt;&lt; $c &gt;= 1 &lt;&lt; 2;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":79166,"reputation":808,"user_id":224705,"accept_rate":74,"display_name":"Torbj&#248;rn Kristoffersen"},"score":2,"creation_date":1277201429,"post_id":3088075,"comment_id":3169880,"body_markdown":"This is the most elegant solution, in my opinion.","body":"This is the most elegant solution, in my opinion."},{"owner":{"account_id":4903,"reputation":4570,"user_id":7602,"accept_rate":95,"display_name":"tomdemuyt"},"score":10,"creation_date":1277213303,"post_id":3088075,"comment_id":3171459,"body_markdown":"Rookie mistake though, a boolean value is NOT 0, that does not mean its always 1.","body":"Rookie mistake though, a boolean value is NOT 0, that does not mean its always 1."},{"owner":{"account_id":36232,"reputation":26946,"user_id":103206,"accept_rate":67,"display_name":"Jay"},"score":14,"creation_date":1277314048,"post_id":3088075,"comment_id":3183571,"body_markdown":"Except that the tag on the post says &quot;Java&quot;, and you can&#39;t write &quot;a+b+c&quot; when they are defined as booleans in Java.","body":"Except that the tag on the post says &quot;Java&quot;, and you can&#39;t write &quot;a+b+c&quot; when they are defined as booleans in Java."},{"owner":{"account_id":56888,"reputation":11998,"user_id":170383,"accept_rate":71,"display_name":"David R Tribble"},"score":0,"creation_date":1384543325,"post_id":3088075,"comment_id":29793031,"body_markdown":"To work in Java, it would have to be `return ((a?1:0) + (b?1:0) + (c?1:0)) &gt;= 2`.","body":"To work in Java, it would have to be <code>return ((a?1:0) + (b?1:0) + (c?1:0)) &gt;= 2</code>."},{"owner":{"account_id":1607224,"reputation":5916,"user_id":1487069,"accept_rate":82,"display_name":"Carlo Wood"},"score":0,"creation_date":1514774893,"post_id":3088075,"comment_id":83065266,"body_markdown":"Duh, I voted this up because I thought it was a C++ question... why am I reading java questions? :/","body":"Duh, I voted this up because I thought it was a C++ question... why am I reading java questions? :/"}],"tags":[],"owner":{"account_id":560326,"reputation":73,"user_id":77965,"accept_rate":80,"display_name":"memet"},"comment_count":5,"down_vote_count":5,"up_vote_count":29,"is_accepted":false,"score":24,"last_activity_date":1277150425,"creation_date":1277150425,"answer_id":3088075,"question_id":3076078,"body_markdown":" Sum it up. It&#39;s called boolean algebra for a reason:\r\n\r\n      0 x 0 = 0\r\n      1 x 0 = 0\r\n      1 x 1 = 1\r\n    \r\n      0 + 0 = 0\r\n      1 + 0 = 1\r\n      1 + 1 = 0 (+ carry)\r\n\r\nIf you look at the truth tables there, you can see that multiplication is boolean and, and simply addition is xor.\r\n\r\n To answer your question: \r\n\r\n    return (a + b + c) &gt;= 2\r\n","title":"Check if at least two out of three booleans are true","body":"<p>Sum it up. It's called boolean algebra for a reason:</p>\n\n<pre><code>  0 x 0 = 0\n  1 x 0 = 0\n  1 x 1 = 1\n\n  0 + 0 = 0\n  1 + 0 = 1\n  1 + 1 = 0 (+ carry)\n</code></pre>\n\n<p>If you look at the truth tables there, you can see that multiplication is boolean and, and simply addition is xor.</p>\n\n<p>To answer your question: </p>\n\n<pre><code>return (a + b + c) &gt;= 2\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2284,"reputation":2161,"user_id":3163,"display_name":"Timothy Fries"},"score":7,"creation_date":1277158373,"post_id":3088163,"comment_id":3166558,"body_markdown":"Your answer returns an incorrect value when a and c are false, and only b is true.","body":"Your answer returns an incorrect value when a and c are false, and only b is true."}],"tags":[],"owner":{"account_id":155699,"reputation":11,"user_id":372524,"display_name":"Brandon"},"comment_count":1,"down_vote_count":8,"up_vote_count":1,"is_accepted":false,"score":-7,"last_activity_date":1277151117,"creation_date":1277151117,"answer_id":3088163,"question_id":3076078,"body_markdown":"My first thought was\r\n\r\n    return (a||b)&amp;&amp;(b||c)\r\n\r\nbut for ease of reading I liked the proposed a+b+c&gt;=2 solution that you guys suggested better\r\n","title":"Check if at least two out of three booleans are true","body":"<p>My first thought was</p>\n\n<pre><code>return (a||b)&amp;&amp;(b||c)\n</code></pre>\n\n<p>but for ease of reading I liked the proposed a+b+c>=2 solution that you guys suggested better</p>\n"},{"tags":[],"owner":{"account_id":289935,"reputation":71,"user_id":591191,"display_name":"Kintar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1277155821,"creation_date":1277155821,"answer_id":3088648,"question_id":3076078,"body_markdown":"Definitely a question that&#39;s more about how you solve problems/think than your actual coding ability.\r\n\r\nA slightly terser version could be\r\n&gt; return ((a ^ b) &amp;&amp; (b ^ c)) ^ b\r\n\r\nBut like a previous poster said, if I saw this in any code I was working on, someone would be getting an earful. :)","title":"Check if at least two out of three booleans are true","body":"<p>Definitely a question that's more about how you solve problems/think than your actual coding ability.</p>\n\n<p>A slightly terser version could be</p>\n\n<blockquote>\n  <p>return ((a ^ b) &amp;&amp; (b ^ c)) ^ b</p>\n</blockquote>\n\n<p>But like a previous poster said, if I saw this in any code I was working on, someone would be getting an earful. :)</p>\n"},{"tags":[],"owner":{"account_id":155753,"reputation":1,"user_id":372612,"display_name":"blakecallens"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1359153617,"creation_date":1277156882,"answer_id":3088729,"question_id":3076078,"body_markdown":"A literal interpretation will work in all major languages:\r\n\r\n    return (a ? 1:0) + (b ? 1:0) + (c ? 1:0) &gt;= 2;\r\n\r\nBut I would probably make it easier for people to read, and expandable to more than three - something that seems to be forgotten by many programmers:\r\n\r\n    boolean testBooleans(Array bools)\r\n    {\r\n         int minTrue = ceil(bools.length * .5);\r\n         int trueCount = 0;\r\n\r\n         for(int i = 0; i &lt; bools.length; i++)\r\n         {\r\n              if(bools[i])\r\n              {\r\n                   trueCount++;\r\n              }\r\n         }\r\n         return trueCount &gt;= minTrue;\r\n    }\r\n","title":"Check if at least two out of three booleans are true","body":"<p>A literal interpretation will work in all major languages:</p>\n\n<pre><code>return (a ? 1:0) + (b ? 1:0) + (c ? 1:0) &gt;= 2;\n</code></pre>\n\n<p>But I would probably make it easier for people to read, and expandable to more than three - something that seems to be forgotten by many programmers:</p>\n\n<pre><code>boolean testBooleans(Array bools)\n{\n     int minTrue = ceil(bools.length * .5);\n     int trueCount = 0;\n\n     for(int i = 0; i &lt; bools.length; i++)\n     {\n          if(bools[i])\n          {\n               trueCount++;\n          }\n     }\n     return trueCount &gt;= minTrue;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":38702,"reputation":39748,"user_id":111266,"accept_rate":81,"display_name":"Joe Enos"},"score":0,"creation_date":1277160921,"post_id":3088909,"comment_id":3166761,"body_markdown":"That should probably be:\nif (++counter == howMany)\ninstead of incrementing and then checking separately.","body":"That should probably be: if (++counter == howMany) instead of incrementing and then checking separately."},{"owner":{"account_id":38702,"reputation":39748,"user_id":111266,"accept_rate":81,"display_name":"Joe Enos"},"score":2,"creation_date":1277160974,"post_id":3088909,"comment_id":3166763,"body_markdown":"Or even shorter: if (b &amp;&amp; (++counter == howMany))","body":"Or even shorter: if (b &amp;&amp; (++counter == howMany))"},{"owner":{"account_id":16868,"reputation":19586,"user_id":37193,"accept_rate":64,"display_name":"Stephen"},"score":1,"creation_date":1277162155,"post_id":3088909,"comment_id":3166842,"body_markdown":"I&#39;d do `boolean ... boolValues` so it&#39;s easier to call, but still takes an array","body":"I&#39;d do <code>boolean ... boolValues</code> so it&#39;s easier to call, but still takes an array"},{"owner":{"account_id":38702,"reputation":39748,"user_id":111266,"accept_rate":81,"display_name":"Joe Enos"},"score":0,"creation_date":1277163846,"post_id":3088909,"comment_id":3166949,"body_markdown":"I&#39;m not up to date on my Java - didn&#39;t know that existed.  Kind of a strange syntax, but it&#39;s useful - every once in a while I&#39;ll do that in C# (params keyword), and it does make things nicer to call.  Or, I don&#39;t know about Java, but in .NET, arrays and all collections implement IEnumerable&lt;T&gt;, so I&#39;d probably use whatever Java&#39;s equivalent is.","body":"I&#39;m not up to date on my Java - didn&#39;t know that existed.  Kind of a strange syntax, but it&#39;s useful - every once in a while I&#39;ll do that in C# (params keyword), and it does make things nicer to call.  Or, I don&#39;t know about Java, but in .NET, arrays and all collections implement IEnumerable&lt;T&gt;, so I&#39;d probably use whatever Java&#39;s equivalent is."},{"owner":{"account_id":47494,"reputation":5220,"user_id":140731,"accept_rate":79,"display_name":"Iain Sproat"},"score":0,"creation_date":1277380492,"post_id":3088909,"comment_id":3190395,"body_markdown":"How does the performance of this compare against the 2of3 example?\n\n    return a ? (b || c) : (b &amp;&amp; c);","body":"How does the performance of this compare against the 2of3 example?      return a ? (b || c) : (b &amp;&amp; c);"},{"owner":{"account_id":38702,"reputation":39748,"user_id":111266,"accept_rate":81,"display_name":"Joe Enos"},"score":0,"creation_date":1277387852,"post_id":3088909,"comment_id":3191470,"body_markdown":"Without actually testing it...\n\nIf you want 2 out of 3, and know for a fact that you want 2 out of 3, and will never change your mind and want 2 out of 4, and don&#39;t mind your code being unreadable, then the a?(b||c):(b&amp;&amp;c) example would definitely save you a microsecond or two.","body":"Without actually testing it...  If you want 2 out of 3, and know for a fact that you want 2 out of 3, and will never change your mind and want 2 out of 4, and don&#39;t mind your code being unreadable, then the a?(b||c):(b&amp;&amp;c) example would definitely save you a microsecond or two."}],"tags":[],"owner":{"account_id":38702,"reputation":39748,"user_id":111266,"accept_rate":81,"display_name":"Joe Enos"},"comment_count":6,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1277158998,"creation_date":1277158998,"answer_id":3088909,"question_id":3076078,"body_markdown":"I don&#39;t think I&#39;ve seen this solution yet:\r\n\r\n    boolean atLeast(int howMany, boolean[] boolValues) {\r\n      // check params for valid values\r\n    \r\n      int counter = 0;\r\n      for (boolean b : boolValues) {\r\n        if (b) {\r\n          counter++;\r\n\r\n          if (counter == howMany) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\nIts advantage is that once it reaches the number that you&#39;re looking for, it breaks.  So if this was &quot;at least 2 out of this 1,000,000 values are true&quot; where the first two are actually true, then it should go faster than some of the more &quot;normal&quot; solutions.","title":"Check if at least two out of three booleans are true","body":"<p>I don't think I've seen this solution yet:</p>\n\n<pre><code>boolean atLeast(int howMany, boolean[] boolValues) {\n  // check params for valid values\n\n  int counter = 0;\n  for (boolean b : boolValues) {\n    if (b) {\n      counter++;\n\n      if (counter == howMany) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n</code></pre>\n\n<p>Its advantage is that once it reaches the number that you're looking for, it breaks.  So if this was \"at least 2 out of this 1,000,000 values are true\" where the first two are actually true, then it should go faster than some of the more \"normal\" solutions.</p>\n"},{"comments":[{"owner":{"account_id":143625,"reputation":1978,"user_id":352088,"display_name":"dsmith"},"score":2,"creation_date":1277165605,"post_id":3088915,"comment_id":3167082,"body_markdown":"+1 Great generic version shows the power of the Lisps. Thanks,","body":"+1 Great generic version shows the power of the Lisps. Thanks,"}],"tags":[],"owner":{"account_id":22392,"reputation":4816,"user_id":55150,"accept_rate":86,"display_name":"Vagif Verdi"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1359153657,"creation_date":1277159044,"answer_id":3088915,"question_id":3076078,"body_markdown":"In [Clojure][1]:\r\n\r\n    (defn at-least [n &amp; bools]\r\n      (&gt;= (count (filter true? bools)) n)\r\n\r\nUsage:\r\n\r\n    (at-least 2 true false true)\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Clojure\r\n","title":"Check if at least two out of three booleans are true","body":"<p>In <a href=\"http://en.wikipedia.org/wiki/Clojure\" rel=\"nofollow noreferrer\">Clojure</a>:</p>\n\n<pre><code>(defn at-least [n &amp; bools]\n  (&gt;= (count (filter true? bools)) n)\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>(at-least 2 true false true)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2490315,"reputation":5131,"user_id":2552290,"accept_rate":68,"display_name":"Don Hatch"},"score":0,"creation_date":1637609145,"post_id":3088957,"comment_id":123867386,"body_markdown":"What language is this?  What does OR mean?  (boolean? bitwise?) What does + mean?  (The question is tagged java, where + isn&#39;t an operation you can do on booleans and there isn&#39;t any &quot;OR&quot; in the language.)","body":"What language is this?  What does OR mean?  (boolean? bitwise?) What does + mean?  (The question is tagged java, where + isn&#39;t an operation you can do on booleans and there isn&#39;t any &quot;OR&quot; in the language.)"}],"tags":[],"owner":{"account_id":627642,"reputation":1,"user_id":372636,"display_name":"dai"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1277159583,"creation_date":1277159583,"answer_id":3088957,"question_id":3076078,"body_markdown":"X = OR(a+b,c)\r\n\r\na b c X\r\n\r\n1 1 0 1\r\n\r\n0 0 1 1\r\n\r\n0 1 1 1\r\n\r\n\r\n\r\n\r\n\r\n","title":"Check if at least two out of three booleans are true","body":"<p>X = OR(a+b,c)</p>\n\n<p>a b c X</p>\n\n<p>1 1 0 1</p>\n\n<p>0 0 1 1</p>\n\n<p>0 1 1 1</p>\n"},{"tags":[],"owner":{"account_id":150501,"reputation":78480,"user_id":363751,"accept_rate":35,"display_name":"supercat"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1277161473,"creation_date":1277161473,"answer_id":3089102,"question_id":3076078,"body_markdown":"If the goal is to return a bitwise two-out-of-three value for three operands, arithmetic and iterative approaches are apt to be relatively ineffective.  On many CPU architectures, a good form would be &quot;return ((a | b) &amp; c) | (a &amp; b);&quot;.  That takes four boolean operations.  On single-accumulator machines (common in small embedded systems) that&#39;s apt to take a total of seven instructions per byte.  The form &quot;return (a &amp; b) | (a &amp; c) | (b &amp; c);&quot; is perhaps nicer looking, but it would require five boolean operations, or nine instructions per byte on a single-accumulator machine.\r\n\r\nIncidentally, in CMOS logic, computing &quot;not two out of three&quot; requires twelve transistors (for comparison, an inverter requires two, a two-input NAND or NOR requires four, and a three-input NAND or NOR requires six).","title":"Check if at least two out of three booleans are true","body":"<p>If the goal is to return a bitwise two-out-of-three value for three operands, arithmetic and iterative approaches are apt to be relatively ineffective.  On many CPU architectures, a good form would be \"return ((a | b) &amp; c) | (a &amp; b);\".  That takes four boolean operations.  On single-accumulator machines (common in small embedded systems) that's apt to take a total of seven instructions per byte.  The form \"return (a &amp; b) | (a &amp; c) | (b &amp; c);\" is perhaps nicer looking, but it would require five boolean operations, or nine instructions per byte on a single-accumulator machine.</p>\n\n<p>Incidentally, in CMOS logic, computing \"not two out of three\" requires twelve transistors (for comparison, an inverter requires two, a two-input NAND or NOR requires four, and a three-input NAND or NOR requires six).</p>\n"},{"comments":[{"owner":{"account_id":10155,"reputation":7189,"user_id":19038,"accept_rate":64,"display_name":"Kevin"},"score":0,"creation_date":1277210827,"post_id":3089326,"comment_id":3171078,"body_markdown":"except this answer is wrong.  it would return true if only b is true","body":"except this answer is wrong.  it would return true if only b is true"},{"owner":{"account_id":22080,"reputation":19151,"user_id":54187,"display_name":"gnrfan"},"score":0,"creation_date":1277501026,"post_id":3089326,"comment_id":3204458,"body_markdown":"You&#39;re right. So I stick to a+b+c&gt;=2 then. Works for PHP and Python too.","body":"You&#39;re right. So I stick to a+b+c&gt;=2 then. Works for PHP and Python too."}],"tags":[],"owner":{"account_id":22080,"reputation":19151,"user_id":54187,"display_name":"gnrfan"},"comment_count":2,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1277165234,"creation_date":1277165234,"answer_id":3089326,"question_id":3076078,"body_markdown":"I believe using plain boolean operators (a || b) &amp;&amp; (b || c) is fine and is simpler.\r\n\r\nYou can swap any of the 3 letters with any of the other two and it&#39;s still the same expresion.\r\n","title":"Check if at least two out of three booleans are true","body":"<p>I believe using plain boolean operators (a || b) &amp;&amp; (b || c) is fine and is simpler.</p>\n\n<p>You can swap any of the 3 letters with any of the other two and it's still the same expresion.</p>\n"},{"tags":[],"owner":{"account_id":70017,"reputation":18878,"user_id":203458,"accept_rate":25,"display_name":"Kate Gregory"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1277165267,"creation_date":1277165267,"answer_id":3089329,"question_id":3076078,"body_markdown":"One thing I haven&#39;t seen others point out is that a standard thing to do in the &quot;please write me some code&quot; section of the job interview is to say &quot;Could you improve that?&quot; or &quot;Are you completely happy with that&quot; or &quot;is that as optimized as possible?&quot; when you say you are done. It&#39;s possible you heard &quot;how would you improve that&quot; as &quot;this might be improved; how?&quot;. In this case changing the `if(x) return true; else return false;` idiom to just `return x` is an improvement - but be aware that there are times they just want to see how you react to the question. I have heard that some interviewers will insist there is a flaw in perfect code just to see how you cope with it.","title":"Check if at least two out of three booleans are true","body":"<p>One thing I haven't seen others point out is that a standard thing to do in the \"please write me some code\" section of the job interview is to say \"Could you improve that?\" or \"Are you completely happy with that\" or \"is that as optimized as possible?\" when you say you are done. It's possible you heard \"how would you improve that\" as \"this might be improved; how?\". In this case changing the <code>if(x) return true; else return false;</code> idiom to just <code>return x</code> is an improvement - but be aware that there are times they just want to see how you react to the question. I have heard that some interviewers will insist there is a flaw in perfect code just to see how you cope with it.</p>\n"},{"tags":[],"owner":{"account_id":141270,"reputation":678,"user_id":348172,"accept_rate":0,"display_name":"Matt Billenstein"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1359153782,"creation_date":1277169013,"answer_id":3089557,"question_id":3076078,"body_markdown":"This sort of is reading better:\r\n\r\n    if (a) {\r\n        return b || c;\r\n    } \r\n    else {\r\n        return b &amp;&amp; c;\r\n    }\r\n","title":"Check if at least two out of three booleans are true","body":"<p>This sort of is reading better:</p>\n\n<pre><code>if (a) {\n    return b || c;\n} \nelse {\n    return b &amp;&amp; c;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":62379,"reputation":4678,"user_id":185387,"accept_rate":32,"display_name":"ZaBlanc"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1277181385,"creation_date":1277181385,"answer_id":3090291,"question_id":3076078,"body_markdown":"The best answer to the question should be &quot;As an employee, it&#39;s important I write it so that my meaning is clear while maintaining efficiency where necessary for performance.&quot;  Here&#39;s how I&#39;d write it:\r\n\r\n    function atLeastTwoAreTrue(a, b, c) {\r\n        return (a &amp;&amp; b) || (b &amp;&amp; c) || (a &amp;&amp; c);\r\n    }\r\n\r\nIn reality, the test is so contrived that writing a method that&#39;s the fastest, most cryptic possible is perfect acceptable if you accomodate it with a simple comment.  But, in general, in this one-liner world, we need more readable code in this world. :-)","title":"Check if at least two out of three booleans are true","body":"<p>The best answer to the question should be \"As an employee, it's important I write it so that my meaning is clear while maintaining efficiency where necessary for performance.\"  Here's how I'd write it:</p>\n\n<pre><code>function atLeastTwoAreTrue(a, b, c) {\n    return (a &amp;&amp; b) || (b &amp;&amp; c) || (a &amp;&amp; c);\n}\n</code></pre>\n\n<p>In reality, the test is so contrived that writing a method that's the fastest, most cryptic possible is perfect acceptable if you accomodate it with a simple comment.  But, in general, in this one-liner world, we need more readable code in this world. :-)</p>\n"},{"comments":[{"owner":{"account_id":62364,"reputation":409,"user_id":185349,"accept_rate":100,"display_name":"z-index"},"score":4,"creation_date":1277183592,"post_id":3090404,"comment_id":3168182,"body_markdown":"Well, the original solution is easier.","body":"Well, the original solution is easier."}],"tags":[],"owner":{"account_id":62364,"reputation":409,"user_id":185349,"accept_rate":100,"display_name":"z-index"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1479320880,"creation_date":1277182977,"answer_id":3090404,"question_id":3076078,"body_markdown":"Calculated via a truth table:\r\n\r\n    return (a &amp; b) | (c &amp; (a ^ b));","title":"Check if at least two out of three booleans are true","body":"<p>Calculated via a truth table:</p>\n\n<pre><code>return (a &amp; b) | (c &amp; (a ^ b));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":31685,"reputation":3185,"user_id":87206,"display_name":"CurtainDog"},"score":11,"creation_date":1277263018,"post_id":3090573,"comment_id":3177627,"body_markdown":"c is never even tested... brilliant!","body":"c is never even tested... brilliant!"},{"owner":{"account_id":332245,"reputation":16487,"user_id":657427,"accept_rate":67,"display_name":"Christophe Roussy"},"score":0,"creation_date":1369128744,"post_id":3090573,"comment_id":23978625,"body_markdown":"Uses transitive relation of equality and the fact that a boolean is either true or false +1","body":"Uses transitive relation of equality and the fact that a boolean is either true or false +1"},{"owner":{"account_id":60766,"reputation":6021,"user_id":181406,"accept_rate":52,"display_name":"Adrian"},"score":3,"creation_date":1376646414,"post_id":3090573,"comment_id":26797578,"body_markdown":"So elegant! I had to check with pen and paper to believe it:) Kudos to you sir!","body":"So elegant! I had to check with pen and paper to believe it:) Kudos to you sir!"},{"owner":{"account_id":429256,"reputation":6774,"user_id":812053,"accept_rate":75,"display_name":"Ben Millwood"},"score":11,"creation_date":1482598424,"post_id":3090573,"comment_id":69833715,"body_markdown":"I think about this as &quot;if `a` and `b` agree, they have the majority vote, so go with whatever it is, else, they disagree, so `c` is the deciding vote&quot;","body":"I think about this as &quot;if <code>a</code> and <code>b</code> agree, they have the majority vote, so go with whatever it is, else, they disagree, so <code>c</code> is the deciding vote&quot;"}],"tags":[],"owner":{"account_id":627710,"reputation":1,"user_id":372825,"display_name":"pdox"},"comment_count":4,"down_vote_count":2,"up_vote_count":164,"is_accepted":false,"score":162,"last_activity_date":1478801348,"creation_date":1277185891,"answer_id":3090573,"question_id":3076078,"body_markdown":"    return (a==b) ? a : c;\r\n\r\nExplanation:\r\n\r\nIf `a==b`, then both are true or both are false. If both are true, we have found our two true booleans, and can return true (by returning `a`). If both are false there cannot be two true booleans even if `c` is true, so we return false (by returning `a`). That&#39;s the `(a==b) ? a` part. What about `: c` ? Well if `a==b` is false, then exactly one of `a` or `b` must be true, so we have found the first true boolean, and the only thing left that matters is if `c` is also true, so we return `c` as the answer.","title":"Check if at least two out of three booleans are true","body":"<pre><code>return (a==b) ? a : c;\n</code></pre>\n\n<p>Explanation:</p>\n\n<p>If <code>a==b</code>, then both are true or both are false. If both are true, we have found our two true booleans, and can return true (by returning <code>a</code>). If both are false there cannot be two true booleans even if <code>c</code> is true, so we return false (by returning <code>a</code>). That's the <code>(a==b) ? a</code> part. What about <code>: c</code> ? Well if <code>a==b</code> is false, then exactly one of <code>a</code> or <code>b</code> must be true, so we have found the first true boolean, and the only thing left that matters is if <code>c</code> is also true, so we return <code>c</code> as the answer.</p>\n"},{"tags":[],"owner":{"account_id":10326,"reputation":9293,"user_id":19450,"display_name":"Ben Manes"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1277186087,"creation_date":1277186087,"answer_id":3090581,"question_id":3076078,"body_markdown":"FYI, this is just the carry-out bit of a full adder. In hardware, you could use the logical effort to determine the optimal circuit based on the different boolean expressions. I would guess that the traditional XOR solution would take more effort than the less succinct expression that the poster presented.","title":"Check if at least two out of three booleans are true","body":"<p>FYI, this is just the carry-out bit of a full adder. In hardware, you could use the logical effort to determine the optimal circuit based on the different boolean expressions. I would guess that the traditional XOR solution would take more effort than the less succinct expression that the poster presented.</p>\n"},{"tags":[],"owner":{"account_id":156317,"reputation":9,"user_id":373529,"display_name":"Aaron"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1359153900,"creation_date":1277233448,"answer_id":3096287,"question_id":3076078,"body_markdown":"In [C#][1], off of the top of my head:\r\n\r\n    public bool lol(int minTrue, params bool[] bools)\r\n    {\r\n        return bools.Count( ( b ) =&gt; b ) &gt;= minTrue;\r\n    }\r\n\r\nshould be pretty quick.\r\n\r\nA call would look like this:\r\n\r\n    lol( 2, true, true, false );\r\n\r\nThis way, you are leaving the rules (two must be true) up to the caller, instead of embedding them in the method.\r\n\r\n  [1]: http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29\r\n","title":"Check if at least two out of three booleans are true","body":"<p>In <a href=\"http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29\" rel=\"nofollow noreferrer\">C#</a>, off of the top of my head:</p>\n\n<pre><code>public bool lol(int minTrue, params bool[] bools)\n{\n    return bools.Count( ( b ) =&gt; b ) &gt;= minTrue;\n}\n</code></pre>\n\n<p>should be pretty quick.</p>\n\n<p>A call would look like this:</p>\n\n<pre><code>lol( 2, true, true, false );\n</code></pre>\n\n<p>This way, you are leaving the rules (two must be true) up to the caller, instead of embedding them in the method.</p>\n"},{"tags":[],"owner":{"account_id":151235,"reputation":897,"user_id":364962,"accept_rate":85,"display_name":"Barzee"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1359154017,"creation_date":1277238184,"answer_id":3096837,"question_id":3076078,"body_markdown":"As an addition to @TofuBeer TofuBeer&#39;s excellent post, consider @pdox pdox&#39;s answer:\r\n\r\n    static boolean five(final boolean a, final boolean b, final boolean c)\r\n    {\r\n        return a == b ? a : c;\r\n    }\r\n\r\nConsider also its disassembled version as given by &quot;javap -c&quot;:\r\n\r\n    static boolean five(boolean, boolean, boolean);\r\n      Code:\r\n        0:    iload_0\r\n        1:    iload_1\r\n        2:    if_icmpne    9\r\n        5:    iload_0\r\n        6:    goto    10\r\n        9:    iload_2\r\n       10:    ireturn\r\n\r\npdox&#39;s answer compiles to less byte code than any of the previous answers. How does its execution time compare to the others?\r\n\r\n    one                5242 ms\r\n    two                6318 ms\r\n    three (moonshadow) 3806 ms\r\n    four               7192 ms\r\n    five  (pdox)       3650 ms\r\n\r\nAt least on my computer, pdox&#39;s answer is just slightly faster than @moonshadow moonshadow&#39;s answer, making pdox&#39;s the fastest overall (on my HP/Intel laptop).\r\n","title":"Check if at least two out of three booleans are true","body":"<p>As an addition to @TofuBeer TofuBeer's excellent post, consider @pdox pdox's answer:</p>\n\n<pre><code>static boolean five(final boolean a, final boolean b, final boolean c)\n{\n    return a == b ? a : c;\n}\n</code></pre>\n\n<p>Consider also its disassembled version as given by \"javap -c\":</p>\n\n<pre><code>static boolean five(boolean, boolean, boolean);\n  Code:\n    0:    iload_0\n    1:    iload_1\n    2:    if_icmpne    9\n    5:    iload_0\n    6:    goto    10\n    9:    iload_2\n   10:    ireturn\n</code></pre>\n\n<p>pdox's answer compiles to less byte code than any of the previous answers. How does its execution time compare to the others?</p>\n\n<pre><code>one                5242 ms\ntwo                6318 ms\nthree (moonshadow) 3806 ms\nfour               7192 ms\nfive  (pdox)       3650 ms\n</code></pre>\n\n<p>At least on my computer, pdox's answer is just slightly faster than @moonshadow moonshadow's answer, making pdox's the fastest overall (on my HP/Intel laptop).</p>\n"},{"tags":[],"owner":{"account_id":101157,"reputation":1374,"user_id":272288,"accept_rate":87,"display_name":"kerkeslager"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1277245873,"creation_date":1277245873,"answer_id":3097636,"question_id":3076078,"body_markdown":"It really depends what you mean by &quot;improved&quot;:\r\n\r\nClearer?\r\n\r\n    boolean twoOrMoreAreTrue(boolean a, boolean b, boolean c)\r\n    {\r\n        return (a &amp;&amp; b) || (a &amp;&amp; c) || (b &amp;&amp; c);\r\n    }\r\n\r\nTerser?\r\n\r\n    boolean moreThanTwo(boolean a, boolean b, boolean c)\r\n    {\r\n        return a == b ? a : c;\r\n    }\r\n\r\nMore general?\r\n\r\n    boolean moreThanXTrue(int x, boolean[] bs)\r\n    {\r\n        int count = 0;\r\n        \r\n        for(boolean b : bs)\r\n        {\r\n            count += b ? 1 : 0;\r\n\r\n            if(count &gt; x) return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\nMore scalable?\r\n\r\n    boolean moreThanXTrue(int x, boolean[] bs)\r\n    {\r\n        int count = 0;\r\n        \r\n        for(int i &lt; 0; i &lt; bs.length; i++)\r\n        {\r\n            count += bs[i] ? 1 : 0;\r\n\r\n            if(count &gt; x) return true;\r\n\r\n            int needed = x - count;\r\n            int remaining = bs.length - i;\r\n\r\n            if(needed &gt;= remaining) return false;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\nFaster?\r\n\r\n    // Only profiling can answer this.\r\n\r\nWhich one is &quot;improved&quot; depends heavily on the situation.","title":"Check if at least two out of three booleans are true","body":"<p>It really depends what you mean by \"improved\":</p>\n\n<p>Clearer?</p>\n\n<pre><code>boolean twoOrMoreAreTrue(boolean a, boolean b, boolean c)\n{\n    return (a &amp;&amp; b) || (a &amp;&amp; c) || (b &amp;&amp; c);\n}\n</code></pre>\n\n<p>Terser?</p>\n\n<pre><code>boolean moreThanTwo(boolean a, boolean b, boolean c)\n{\n    return a == b ? a : c;\n}\n</code></pre>\n\n<p>More general?</p>\n\n<pre><code>boolean moreThanXTrue(int x, boolean[] bs)\n{\n    int count = 0;\n\n    for(boolean b : bs)\n    {\n        count += b ? 1 : 0;\n\n        if(count &gt; x) return true;\n    }\n\n    return false;\n}\n</code></pre>\n\n<p>More scalable?</p>\n\n<pre><code>boolean moreThanXTrue(int x, boolean[] bs)\n{\n    int count = 0;\n\n    for(int i &lt; 0; i &lt; bs.length; i++)\n    {\n        count += bs[i] ? 1 : 0;\n\n        if(count &gt; x) return true;\n\n        int needed = x - count;\n        int remaining = bs.length - i;\n\n        if(needed &gt;= remaining) return false;\n    }\n\n    return false;\n}\n</code></pre>\n\n<p>Faster?</p>\n\n<pre><code>// Only profiling can answer this.\n</code></pre>\n\n<p>Which one is \"improved\" depends heavily on the situation.</p>\n"},{"tags":[],"owner":{"account_id":156436,"reputation":3872,"user_id":373722,"accept_rate":83,"display_name":"endy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700517196,"creation_date":1277249601,"answer_id":3097919,"question_id":3076078,"body_markdown":"```\r\nint count = 0;\r\n\r\nboolean atLeastTwo(boolean a, boolean b, boolean c) {\r\n    if (a)\r\n        count++;\r\n    if (b)\r\n        count++;\r\n    if (c)\r\n        count++;\r\n\r\n    return count &gt; 1;\r\n}\r\n```","title":"Check if at least two out of three booleans are true","body":"<pre><code>int count = 0;\n\nboolean atLeastTwo(boolean a, boolean b, boolean c) {\n    if (a)\n        count++;\n    if (b)\n        count++;\n    if (c)\n        count++;\n\n    return count &gt; 1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":156496,"reputation":1,"user_id":373826,"display_name":"user373826"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1277262030,"creation_date":1277262030,"answer_id":3098647,"question_id":3076078,"body_markdown":"In Ruby:\r\n\r\n`[a, b, c].count { |x| x } &gt;= 2`\r\n\r\nWhich could be run in JRuby on the JavaVM. ;-)","title":"Check if at least two out of three booleans are true","body":"<p>In Ruby:</p>\n\n<p><code>[a, b, c].count { |x| x } &gt;= 2</code></p>\n\n<p>Which could be run in JRuby on the JavaVM. ;-)</p>\n"},{"tags":[],"owner":{"account_id":31685,"reputation":3185,"user_id":87206,"display_name":"CurtainDog"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1277263936,"creation_date":1277263936,"answer_id":3098764,"question_id":3076078,"body_markdown":"The 2 and 3 in the question posed are decidedly magic-numberish. The &#39;correct&#39; answer will depend on whether the interviewer was trying to get at your grasp of boolean logic (and I don&#39;t think pdox&#39;s answer could be bested in this respect) or your understanding of architectural issues.\r\n\r\nI&#39;d be inclined to go with a map-reduce solution that will accept any sort of list with any arbitrary condition.","title":"Check if at least two out of three booleans are true","body":"<p>The 2 and 3 in the question posed are decidedly magic-numberish. The 'correct' answer will depend on whether the interviewer was trying to get at your grasp of boolean logic (and I don't think pdox's answer could be bested in this respect) or your understanding of architectural issues.</p>\n\n<p>I'd be inclined to go with a map-reduce solution that will accept any sort of list with any arbitrary condition.</p>\n"},{"tags":[],"owner":{"account_id":32317,"reputation":42877,"user_id":89556,"accept_rate":60,"display_name":"this. __curious_geek"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1277269508,"creation_date":1277268330,"answer_id":3098986,"question_id":3076078,"body_markdown":"I found this solution.\r\n\r\n    boolean atLeastTwo(boolean a, boolean b, boolean c) {\r\n        bool result = !(a ^ b ^ c) &amp;&amp; !(!a &amp; !b &amp; !c) || (a &amp; b &amp; c);\r\n        return result;\r\n    }","title":"Check if at least two out of three booleans are true","body":"<p>I found this solution.</p>\n\n<pre><code>boolean atLeastTwo(boolean a, boolean b, boolean c) {\n    bool result = !(a ^ b ^ c) &amp;&amp; !(!a &amp; !b &amp; !c) || (a &amp; b &amp; c);\n    return result;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":38360,"reputation":999,"user_id":110030,"display_name":"Joan Rieu"},"score":0,"creation_date":1277750752,"post_id":3104052,"comment_id":3220643,"body_markdown":"You can push it further: I believe in C you could do\n\n    return a+b+c&gt;1;","body":"You can push it further: I believe in C you could do      return a+b+c&gt;1;"},{"owner":{"account_id":36232,"reputation":26946,"user_id":103206,"accept_rate":67,"display_name":"Jay"},"score":0,"creation_date":1278433646,"post_id":3104052,"comment_id":3283858,"body_markdown":"Fififox: True, but the question is tagged &quot;Java&quot;, where this would not work. The (a?1:0) solution is the closest Java equivalent to what you are suggesting for C. One could, I am sure, endlessly debate the relative merits. In C you can do easy shortcuts by treating booleans an ints; in Java you are protected from hurting yourself by accidentally treating booleans as ints.","body":"Fififox: True, but the question is tagged &quot;Java&quot;, where this would not work. The (a?1:0) solution is the closest Java equivalent to what you are suggesting for C. One could, I am sure, endlessly debate the relative merits. In C you can do easy shortcuts by treating booleans an ints; in Java you are protected from hurting yourself by accidentally treating booleans as ints."}],"tags":[],"owner":{"account_id":36232,"reputation":26946,"user_id":103206,"accept_rate":67,"display_name":"Jay"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1359154208,"creation_date":1277314423,"answer_id":3104052,"question_id":3076078,"body_markdown":"My first thought when I saw the question was:\r\n\r\n    int count=0;\r\n    if (a)\r\n        ++count;\r\n    if (b)\r\n        ++count;\r\n    if (c)\r\n        ++count;\r\n    return count&gt;=2;\r\n\r\nAfter seeing other posts, I admit that\r\n\r\n    return (a?1:0)+(b?1:0)+(c?1:0)&gt;=2;\r\n\r\nis much more elegant. I wonder what the relative runtimes are.\r\n\r\nIn any case, though, I think this sort of solution is much better than a solution of the\r\n\r\n    return a&amp;b | b&amp;c | a&amp;c;\r\n\r\nvariety because is is more easily extensible. What if later we add a fourth variable that must be tested? What if the number of variables is determined at runtime, and we are passed an array of booleans of unknown size? A solution that depends on counting is much easier to extend than a solution that depends on listing every possible combination. Also, when listing all possible combinations, I suspect that it is much easier to make a mistake. Like try writing the code for &quot;any 3 of 4&quot; and make sure you neither miss any nor duplicate any. Now try it with &quot;any 5 of 7&quot;.\r\n","title":"Check if at least two out of three booleans are true","body":"<p>My first thought when I saw the question was:</p>\n\n<pre><code>int count=0;\nif (a)\n    ++count;\nif (b)\n    ++count;\nif (c)\n    ++count;\nreturn count&gt;=2;\n</code></pre>\n\n<p>After seeing other posts, I admit that</p>\n\n<pre><code>return (a?1:0)+(b?1:0)+(c?1:0)&gt;=2;\n</code></pre>\n\n<p>is much more elegant. I wonder what the relative runtimes are.</p>\n\n<p>In any case, though, I think this sort of solution is much better than a solution of the</p>\n\n<pre><code>return a&amp;b | b&amp;c | a&amp;c;\n</code></pre>\n\n<p>variety because is is more easily extensible. What if later we add a fourth variable that must be tested? What if the number of variables is determined at runtime, and we are passed an array of booleans of unknown size? A solution that depends on counting is much easier to extend than a solution that depends on listing every possible combination. Also, when listing all possible combinations, I suspect that it is much easier to make a mistake. Like try writing the code for \"any 3 of 4\" and make sure you neither miss any nor duplicate any. Now try it with \"any 5 of 7\".</p>\n"},{"tags":[],"owner":{"account_id":157197,"reputation":6747,"user_id":374980,"display_name":"stinky472"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1277458116,"creation_date":1277457593,"answer_id":3116886,"question_id":3076078,"body_markdown":"He&#39;s probably not looking for anything convoluted like bitwise comparison operators (not normally convoluted but with booleans, it&#39;s extremely odd to use bitwise operators) or something that is very roundabout like converting to int and summing them up.\r\n\r\nThe most direct and natural way to solve this is with an expression like this:\r\n\r\n    a ? (b || c): (b &amp;&amp; c)\r\n\r\nPut it in a function if you prefer, but it&#39;s not very complicated. The solution is logically concise and efficient.","title":"Check if at least two out of three booleans are true","body":"<p>He's probably not looking for anything convoluted like bitwise comparison operators (not normally convoluted but with booleans, it's extremely odd to use bitwise operators) or something that is very roundabout like converting to int and summing them up.</p>\n\n<p>The most direct and natural way to solve this is with an expression like this:</p>\n\n<pre><code>a ? (b || c): (b &amp;&amp; c)\n</code></pre>\n\n<p>Put it in a function if you prefer, but it's not very complicated. The solution is logically concise and efficient.</p>\n"},{"comments":[{"owner":{"display_name":"user357812"},"score":0,"creation_date":1283723369,"post_id":3361653,"comment_id":3835743,"body_markdown":"Doesn&#39;t this return true with just C been true?","body":"Doesn&#39;t this return true with just C been true?"},{"owner":{"account_id":172427,"reputation":2168,"user_id":400447,"accept_rate":43,"display_name":"Egalitarian"},"score":0,"creation_date":1283858474,"post_id":3361653,"comment_id":3847953,"body_markdown":"oops ... i forgot to add something... its    if((A &amp;&amp; (B || C )) || (B &amp;&amp; C) { return true; } else return false;","body":"oops ... i forgot to add something... its    if((A &amp;&amp; (B || C )) || (B &amp;&amp; C) { return true; } else return false;"}],"tags":[],"owner":{"account_id":172427,"reputation":2168,"user_id":400447,"accept_rate":43,"display_name":"Egalitarian"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700517151,"creation_date":1280400440,"answer_id":3361653,"question_id":3076078,"body_markdown":"Let the three boolean values be A, B and C.\r\n\r\nYou can use a k-MAP and come with a boolean expression.\r\n\r\nIn this case boolean expression will be `A(B+C) + C`\r\n```\r\nreturn (A &amp;&amp; (B || C )) || C;\r\n```\r\n","title":"Check if at least two out of three booleans are true","body":"<p>Let the three boolean values be A, B and C.</p>\n<p>You can use a k-MAP and come with a boolean expression.</p>\n<p>In this case boolean expression will be <code>A(B+C) + C</code></p>\n<pre><code>return (A &amp;&amp; (B || C )) || C;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":50152,"reputation":114249,"user_id":149482,"accept_rate":79,"display_name":"Matt Joiner"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1280913629,"creation_date":1280913629,"answer_id":3404154,"question_id":3076078,"body_markdown":"C:\r\n\r\n    if (!!a + !!b + !!c &gt;= 2)","title":"Check if at least two out of three booleans are true","body":"<p>C:</p>\n\n<pre><code>if (!!a + !!b + !!c &gt;= 2)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16586,"reputation":241521,"user_id":36305,"accept_rate":100,"display_name":"Dimitre Novatchev"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1359154250,"creation_date":1283698596,"answer_id":3646470,"question_id":3076078,"body_markdown":"It should be:\r\n\r\n    (a || b &amp;&amp; c) &amp;&amp; (b || c &amp;&amp; a)\r\n\r\nAlso, if `true` is automatically converted to `1` and `false` to `0`:\r\n\r\n    (a + b*c) * (b + c*a) &gt; 0\r\n\r\n","title":"Check if at least two out of three booleans are true","body":"<p>It should be:</p>\n\n<pre><code>(a || b &amp;&amp; c) &amp;&amp; (b || c &amp;&amp; a)\n</code></pre>\n\n<p>Also, if <code>true</code> is automatically converted to <code>1</code> and <code>false</code> to <code>0</code>:</p>\n\n<pre><code>(a + b*c) * (b + c*a) &gt; 0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":38645,"reputation":8343,"user_id":111052,"accept_rate":100,"display_name":"Derek Organ"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359154371,"creation_date":1295382788,"answer_id":4728727,"question_id":3076078,"body_markdown":"It seems to me that three out of three are quite arbitrary numbers, and the function should work with an arbitrary number. So in order to answer the question, I&#39;d write a function that would work out if x in an array were true, for example,\r\n\r\n    bool istrue ( int x, bool[] list)\r\n        y = count true in list\r\n        return y &gt;= x\r\n","title":"Check if at least two out of three booleans are true","body":"<p>It seems to me that three out of three are quite arbitrary numbers, and the function should work with an arbitrary number. So in order to answer the question, I'd write a function that would work out if x in an array were true, for example,</p>\n\n<pre><code>bool istrue ( int x, bool[] list)\n    y = count true in list\n    return y &gt;= x\n</code></pre>\n"},{"comments":[{"owner":{"account_id":34514,"reputation":28046,"user_id":97627,"accept_rate":75,"display_name":"Paul Wagland"},"score":0,"creation_date":1316459725,"post_id":4836796,"comment_id":9047250,"body_markdown":"Actually, this answer is wrong it should be &gt;= 2, since you need _at least_ two true booleans, not exactly two.","body":"Actually, this answer is wrong it should be &gt;= 2, since you need <i>at least</i> two true booleans, not exactly two."},{"owner":{"account_id":50152,"reputation":114249,"user_id":149482,"accept_rate":79,"display_name":"Matt Joiner"},"score":0,"creation_date":1316474177,"post_id":4836796,"comment_id":9050713,"body_markdown":"@Paul Wagland: Thanks for the catch.","body":"@Paul Wagland: Thanks for the catch."},{"owner":{"account_id":50152,"reputation":114249,"user_id":149482,"accept_rate":79,"display_name":"Matt Joiner"},"score":0,"creation_date":1327994184,"post_id":4836796,"comment_id":11393351,"body_markdown":"@ergosys: Wth I answered twice?","body":"@ergosys: Wth I answered twice?"},{"owner":{"account_id":2903414,"reputation":4949,"user_id":2489480,"accept_rate":71,"display_name":"Remi"},"score":0,"creation_date":1599559090,"post_id":4836796,"comment_id":112804015,"body_markdown":"Nice one. I&#39;d prefer this one since it will allow you to expand it to &quot;three out of four&quot; etc. Wondering if there is a caveat to counting the number of true&#39;s and comparing that to the amount though.","body":"Nice one. I&#39;d prefer this one since it will allow you to expand it to &quot;three out of four&quot; etc. Wondering if there is a caveat to counting the number of true&#39;s and comparing that to the amount though."}],"tags":[],"owner":{"account_id":50152,"reputation":114249,"user_id":149482,"accept_rate":79,"display_name":"Matt Joiner"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1316474008,"creation_date":1296303383,"answer_id":4836796,"question_id":3076078,"body_markdown":"In C:\r\n\r\n    return !!a + !!b + !!c &gt;= 2;","title":"Check if at least two out of three booleans are true","body":"<p>In C:</p>\n\n<pre><code>return !!a + !!b + !!c &gt;= 2;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":970548,"reputation":2499,"user_id":1071669,"accept_rate":43,"display_name":"dargaud"},"score":0,"creation_date":1639485033,"post_id":6640862,"comment_id":124355427,"body_markdown":"I don&#39;t understand why this isn&#39;t the official answer: it&#39;s the most concise, the fastest in execution and the simplest to understand. And in C you don&#39;t need to transtype: `a+b+c&gt;=2`","body":"I don&#39;t understand why this isn&#39;t the official answer: it&#39;s the most concise, the fastest in execution and the simplest to understand. And in C you don&#39;t need to transtype: <code>a+b+c&gt;=2</code>"}],"tags":[],"owner":{"account_id":220559,"reputation":4930,"user_id":478028,"accept_rate":56,"display_name":"vine&#39;th"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1359154391,"creation_date":1310298107,"answer_id":6640862,"question_id":3076078,"body_markdown":"We can convert the bools to integers and perform this easy check:\r\n\r\n    (int(a) + int(b) + int(c)) &gt;= 2\r\n","title":"Check if at least two out of three booleans are true","body":"<p>We can convert the bools to integers and perform this easy check:</p>\n\n<pre><code>(int(a) + int(b) + int(c)) &gt;= 2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":441912,"reputation":799,"user_id":832271,"accept_rate":82,"display_name":"SirensOfTitan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1310494657,"creation_date":1310493408,"answer_id":6668792,"question_id":3076078,"body_markdown":"The non-reduced solution to this problem is:\r\n\r\n    a&#39;bc + abc&#39; + abc + ab&#39;c\r\n\r\nReducing using K-Maps, one gets:\r\n\r\n    bc + ab + ac\r\n\r\nOne could reduce this further by using exclusive or on the a&#39;bc and abc&#39; minterms and combining the abc and ab&#39;c minterms:\r\n\r\n    b(a ^ c) + ac\r\n\r\n","title":"Check if at least two out of three booleans are true","body":"<p>The non-reduced solution to this problem is:</p>\n\n<pre><code>a'bc + abc' + abc + ab'c\n</code></pre>\n\n<p>Reducing using K-Maps, one gets:</p>\n\n<pre><code>bc + ab + ac\n</code></pre>\n\n<p>One could reduce this further by using exclusive or on the a'bc and abc' minterms and combining the abc and ab'c minterms:</p>\n\n<pre><code>b(a ^ c) + ac\n</code></pre>\n"},{"comments":[{"owner":{"account_id":342830,"reputation":2662,"user_id":674188,"accept_rate":55,"display_name":"CCC"},"score":1,"creation_date":1418854465,"post_id":7436722,"comment_id":43500044,"body_markdown":"This one is wrong.It fails if a is true and b and c are false.","body":"This one is wrong.It fails if a is true and b and c are false."}],"tags":[],"owner":{"account_id":914510,"reputation":401,"user_id":947620,"display_name":"d1val"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1359154429,"creation_date":1316116493,"answer_id":7436722,"question_id":3076078,"body_markdown":"How about `(a||b) &amp;&amp; (a||c)` -  Java, uses three comparisons instead of the OP&#39;s six.\r\n\r\nWrong, I should have checked earlier.\r\n","title":"Check if at least two out of three booleans are true","body":"<p>How about <code>(a||b) &amp;&amp; (a||c)</code> -  Java, uses three comparisons instead of the OP's six.</p>\n\n<p>Wrong, I should have checked earlier.</p>\n"},{"tags":[],"owner":{"account_id":963571,"reputation":321,"user_id":987411,"display_name":"Bruce Attah"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1359154500,"creation_date":1318407215,"answer_id":7737046,"question_id":3076078,"body_markdown":"Since it wasn&#39;t specified how the code should be improved, I shall endeavour to improve the code by making it more amusing. Here&#39;s my solution:\r\n\r\n    boolean atLeastTwo(boolean t, boolean f, boolean True) {\r\n    \tboolean False = True;\r\n    \tif ((t || f) &amp;&amp; (True || False)) \r\n            return &quot;answer&quot; != &quot;42&quot;;\r\n    \tif (t &amp;&amp; f) \r\n            return !&quot;France&quot;.contains(&quot;Paris&quot;);\r\n    \tif (False == True) \r\n            return true == false;\r\n    \treturn Math.random() &gt; 0.5;\r\n    }\r\n\r\nIn case anyone&#39;s wondering if this code works, here&#39;s a simplification using the same logic:\r\n\r\n    boolean atLeastTwo(boolean a, boolean b, boolean c) {\r\n        if ((a || b) &amp;&amp; (c)) \r\n            return true;\r\n        if (a &amp;&amp; b) \r\n            return true;\r\n        if (true) \r\n            return false;\r\n        // The last line is a red herring, as it will never be reached:\r\n        return Math.random() &gt; 0.5; \r\n   }\r\n\r\nThis can be boiled down further to the following:\r\n\r\n    return ((a || b) &amp;&amp; (c)) || (a &amp;&amp; b);\r\n\r\nBut now it&#39;s not funny any more.\r\n","title":"Check if at least two out of three booleans are true","body":"<p>Since it wasn't specified how the code should be improved, I shall endeavour to improve the code by making it more amusing. Here's my solution:</p>\n\n<pre><code>boolean atLeastTwo(boolean t, boolean f, boolean True) {\n    boolean False = True;\n    if ((t || f) &amp;&amp; (True || False)) \n        return \"answer\" != \"42\";\n    if (t &amp;&amp; f) \n        return !\"France\".contains(\"Paris\");\n    if (False == True) \n        return true == false;\n    return Math.random() &gt; 0.5;\n}\n</code></pre>\n\n<p>In case anyone's wondering if this code works, here's a simplification using the same logic:</p>\n\n<pre><code>boolean atLeastTwo(boolean a, boolean b, boolean c) {\n    if ((a || b) &amp;&amp; (c)) \n        return true;\n    if (a &amp;&amp; b) \n        return true;\n    if (true) \n        return false;\n    // The last line is a red herring, as it will never be reached:\n    return Math.random() &gt; 0.5; \n</code></pre>\n\n<p>}</p>\n\n<p>This can be boiled down further to the following:</p>\n\n<pre><code>return ((a || b) &amp;&amp; (c)) || (a &amp;&amp; b);\n</code></pre>\n\n<p>But now it's not funny any more.</p>\n"},{"tags":[],"owner":{"account_id":960943,"reputation":1678,"user_id":985306,"accept_rate":89,"display_name":"Kshitij Banerjee"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1359154554,"creation_date":1327933633,"answer_id":9065348,"question_id":3076078,"body_markdown":"If I convert the booleans into a number, and if the number is not a power of two, it has at least two trues. \r\n\r\n    a*4 + b*2 + c*1 = N\r\n    return( N != 0 &amp;&amp; (N&amp;(N-1)) != 0)\r\n\r\nI am just giving an alternative.\r\n","title":"Check if at least two out of three booleans are true","body":"<p>If I convert the booleans into a number, and if the number is not a power of two, it has at least two trues. </p>\n\n<pre><code>a*4 + b*2 + c*1 = N\nreturn( N != 0 &amp;&amp; (N&amp;(N-1)) != 0)\n</code></pre>\n\n<p>I am just giving an alternative.</p>\n"},{"comments":[{"owner":{"account_id":2490315,"reputation":5131,"user_id":2552290,"accept_rate":68,"display_name":"Don Hatch"},"score":0,"creation_date":1637609531,"post_id":9086658,"comment_id":123867506,"body_markdown":"looks a lot like `a ? b||c : b&amp;&amp;c`","body":"looks a lot like <code>a ? b||c : b&amp;&amp;c</code>"}],"tags":[],"owner":{"account_id":1192695,"reputation":842,"user_id":1165128,"display_name":"mdprotacio"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359154591,"creation_date":1328042700,"answer_id":9086658,"question_id":3076078,"body_markdown":"The simplest form using ternary operators to solve the problem is:\r\n\r\n    return a ? (b ? true : c) : (b ? c : false);\r\n\r\nYou may also want to invest finding a solution by using double negation of the requirement, meaning to say, instead of at least two true values, you need to satisfy the condition at most one false value.\r\n","title":"Check if at least two out of three booleans are true","body":"<p>The simplest form using ternary operators to solve the problem is:</p>\n\n<pre><code>return a ? (b ? true : c) : (b ? c : false);\n</code></pre>\n\n<p>You may also want to invest finding a solution by using double negation of the requirement, meaning to say, instead of at least two true values, you need to satisfy the condition at most one false value.</p>\n"},{"tags":[],"owner":{"account_id":213996,"reputation":913,"user_id":467705,"accept_rate":94,"display_name":"teodozjan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1328111195,"creation_date":1328103315,"answer_id":9096666,"question_id":3076078,"body_markdown":"Not in context of performance but good code(extensible and readable code that can be reused)\r\n\r\n         static boolean trueBooleans (int howMany,boolean ... bools)\r\n         {\r\n          int total = 0;\r\n\r\n          for (boolean b:bools)\r\n            if (b &amp;&amp; (++total == howMany)) return true;\r\n            \r\n\r\n          return false;\r\n        }\r\n\r\n\r\nIn my humble opinion when writing Java, easy handling unexpected changes and no duplicated code are more important than concise (domain of script languages) or fast program.","title":"Check if at least two out of three booleans are true","body":"<p>Not in context of performance but good code(extensible and readable code that can be reused)</p>\n\n<pre><code>     static boolean trueBooleans (int howMany,boolean ... bools)\n     {\n      int total = 0;\n\n      for (boolean b:bools)\n        if (b &amp;&amp; (++total == howMany)) return true;\n\n\n      return false;\n    }\n</code></pre>\n\n<p>In my humble opinion when writing Java, easy handling unexpected changes and no duplicated code are more important than concise (domain of script languages) or fast program.</p>\n"},{"comments":[{"owner":{"account_id":1408313,"reputation":1513,"user_id":1335431,"accept_rate":72,"display_name":"Jacklynn"},"score":2,"creation_date":1400591690,"post_id":9890468,"comment_id":36534196,"body_markdown":"There is no need for the ? true : false.  That tells the complier, if this is true, return true, but if it is false, return false.  Cut out the unnecessary step and just return ho(a) + ho(b) + ho(c) &gt;= 2;","body":"There is no need for the ? true : false.  That tells the complier, if this is true, return true, but if it is false, return false.  Cut out the unnecessary step and just return ho(a) + ho(b) + ho(c) &gt;= 2;"}],"tags":[],"owner":{"account_id":466771,"reputation":3713,"user_id":871726,"accept_rate":78,"display_name":"Dhananjay"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700524778,"creation_date":1332854900,"answer_id":9890468,"question_id":3076078,"body_markdown":"Function `ko` returns the answer:\r\n\r\n    static int ho(bool a)\r\n    {\r\n        return a ? 1 : 0;\r\n    }\r\n\r\n    static bool ko(bool a, bool b, bool c)\r\n    {\r\n        return ho(a) + ho(b) + ho(c) &gt;= 2;\r\n    }\r\n","title":"Check if at least two out of three booleans are true","body":"<p>Function <code>ko</code> returns the answer:</p>\n<pre><code>static int ho(bool a)\n{\n    return a ? 1 : 0;\n}\n\nstatic bool ko(bool a, bool b, bool c)\n{\n    return ho(a) + ho(b) + ho(c) &gt;= 2;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1607224,"reputation":5916,"user_id":1487069,"accept_rate":82,"display_name":"Carlo Wood"},"score":0,"creation_date":1514774582,"post_id":10251042,"comment_id":83065235,"body_markdown":"a != b ? c : a seems more intuitive.","body":"a != b ? c : a seems more intuitive."}],"tags":[],"owner":{"account_id":449903,"reputation":167,"user_id":844957,"accept_rate":25,"display_name":"binary_baba"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1334944116,"creation_date":1334944116,"answer_id":10251042,"question_id":3076078,"body_markdown":"How about this one:\r\n\r\n    (a - b) ? c : a","title":"Check if at least two out of three booleans are true","body":"<p>How about this one:</p>\n\n<pre><code>(a - b) ? c : a\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1560875,"reputation":341,"user_id":1450765,"accept_rate":80,"display_name":"Luka"},"score":0,"creation_date":1373989302,"post_id":16172981,"comment_id":25758061,"body_markdown":"This only checks if both a and b is true or if c is true","body":"This only checks if both a and b is true or if c is true"}],"tags":[],"owner":{"account_id":2119667,"reputation":7639,"user_id":1883212,"accept_rate":14,"display_name":"user1883212"},"comment_count":1,"down_vote_count":6,"up_vote_count":0,"is_accepted":false,"score":-6,"last_activity_date":1700525079,"creation_date":1366729946,"answer_id":16172981,"question_id":3076078,"body_markdown":"I think the simplest solution is:\r\n```\r\nreturn (a &amp;&amp; b) || c;\r\n```","title":"Check if at least two out of three booleans are true","body":"<p>I think the simplest solution is:</p>\n<pre><code>return (a &amp;&amp; b) || c;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":313216,"reputation":44997,"user_id":627727,"accept_rate":84,"display_name":"mkobit"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1418702360,"creation_date":1418702360,"answer_id":27497281,"question_id":3076078,"body_markdown":"Taking another approach to this using Java 8&#39;s [Stream][1] functionality, for any number of booleans with an arbitrary required amount. The Stream short circuits if it hits the limit before processing all of the elements:\r\n\r\n\r\n    public static boolean atLeastTrue(int amount, Boolean ... booleans) {\r\n        return Stream.of(booleans).filter(b -&gt; b).limit(amount).count() == amount;\r\n    }\r\n\r\n    public static void main(String[] args){\r\n        System.out.println(&quot;1,2: &quot; + atLeastTrue(1, true, false, true));\r\n        System.out.println(&quot;1,1: &quot; + atLeastTrue(1, false, true));\r\n        System.out.println(&quot;1,0: &quot; + atLeastTrue(1, false));\r\n        System.out.println(&quot;1,1: &quot; + atLeastTrue(1, true, false));\r\n        System.out.println(&quot;2,3: &quot; + atLeastTrue(2, true, false, true, true));\r\n        System.out.println(&quot;3,2: &quot; + atLeastTrue(3, true, false, true, false));\r\n        System.out.println(&quot;3,3: &quot; + atLeastTrue(3, true, true, true, false));\r\n    }\r\n\r\n\r\nOutput:\r\n\r\n    1,2: true\r\n    1,1: true\r\n    1,0: false\r\n    1,1: true\r\n    2,3: true\r\n    3,2: false\r\n    3,3: true\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html","title":"Check if at least two out of three booleans are true","body":"<p>Taking another approach to this using Java 8's <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\" rel=\"nofollow\">Stream</a> functionality, for any number of booleans with an arbitrary required amount. The Stream short circuits if it hits the limit before processing all of the elements:</p>\n\n<pre><code>public static boolean atLeastTrue(int amount, Boolean ... booleans) {\n    return Stream.of(booleans).filter(b -&gt; b).limit(amount).count() == amount;\n}\n\npublic static void main(String[] args){\n    System.out.println(\"1,2: \" + atLeastTrue(1, true, false, true));\n    System.out.println(\"1,1: \" + atLeastTrue(1, false, true));\n    System.out.println(\"1,0: \" + atLeastTrue(1, false));\n    System.out.println(\"1,1: \" + atLeastTrue(1, true, false));\n    System.out.println(\"2,3: \" + atLeastTrue(2, true, false, true, true));\n    System.out.println(\"3,2: \" + atLeastTrue(3, true, false, true, false));\n    System.out.println(\"3,3: \" + atLeastTrue(3, true, true, true, false));\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1,2: true\n1,1: true\n1,0: false\n1,1: true\n2,3: true\n3,2: false\n3,3: true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1749879,"reputation":3381,"user_id":1599213,"accept_rate":33,"display_name":"To Kra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1423423878,"creation_date":1423423878,"answer_id":28398366,"question_id":3076078,"body_markdown":"    public static boolean atLeast(int atLeastToBeTrue, boolean...bools){\r\n\t\tint booleansTrue = 0;\r\n\t\tfor(boolean tmp : bools){\r\n\t\t\tbooleansTrue += tmp ? 1 : 0;\r\n\t\t}\r\n\t\treturn booleansTrue &gt;= atLeastToBeTrue;\r\n\t}\r\n\r\nYou can choose how many `at least` you want to be true from `varargs` a.k.a `boolean[]` :-)","title":"Check if at least two out of three booleans are true","body":"<pre><code>public static boolean atLeast(int atLeastToBeTrue, boolean...bools){\n    int booleansTrue = 0;\n    for(boolean tmp : bools){\n        booleansTrue += tmp ? 1 : 0;\n    }\n    return booleansTrue &gt;= atLeastToBeTrue;\n}\n</code></pre>\n\n<p>You can choose how many <code>at least</code> you want to be true from <code>varargs</code> a.k.a <code>boolean[]</code> :-)</p>\n"},{"comments":[{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":0,"creation_date":1478792236,"post_id":40531026,"comment_id":68302777,"body_markdown":"Instead of `Arrays.asList(a, b, c).stream()`, you can have `Stream.of(a, b, c)`...","body":"Instead of <code>Arrays.asList(a, b, c).stream()</code>, you can have <code>Stream.of(a, b, c)</code>..."},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":0,"creation_date":1478798226,"post_id":40531026,"comment_id":68306635,"body_markdown":"Very heavyweight.","body":"Very heavyweight."},{"owner":{"account_id":3069684,"reputation":71,"user_id":2600659,"accept_rate":100,"display_name":"coder"},"score":1,"creation_date":1479315008,"post_id":40531026,"comment_id":68507684,"body_markdown":"@Boan I think is more important the code reveals intention than early optimizations...","body":"@Boan I think is more important the code reveals intention than early optimizations..."}],"tags":[],"owner":{"account_id":3069684,"reputation":71,"user_id":2600659,"accept_rate":100,"display_name":"coder"},"comment_count":3,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1479314898,"creation_date":1478791057,"answer_id":40531026,"question_id":3076078,"body_markdown":"Currenty with Java 8, I really prefer something like this:\r\n\r\n    boolean atLeastTwo(boolean a, boolean b, boolean c) {\r\n        return Stream.of(a, b, c).filter(active -&gt; active).count() &gt;= 2;\r\n    }\r\n","title":"Check if at least two out of three booleans are true","body":"<p>Currenty with Java 8, I really prefer something like this:</p>\n\n<pre><code>boolean atLeastTwo(boolean a, boolean b, boolean c) {\n    return Stream.of(a, b, c).filter(active -&gt; active).count() &gt;= 2;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3136336,"reputation":2227,"user_id":2652785,"display_name":"Kal"},"score":1,"creation_date":1591852939,"post_id":50192838,"comment_id":110214347,"body_markdown":"Another copy of the accepted answer? It&#39;s always a good idea to check first to see if your answer has already been posted by others.","body":"Another copy of the accepted answer? It&#39;s always a good idea to check first to see if your answer has already been posted by others."}],"tags":[],"owner":{"account_id":7793197,"reputation":521,"user_id":5895352,"display_name":"nabil london"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1525545489,"creation_date":1525545489,"answer_id":50192838,"question_id":3076078,"body_markdown":"  Another one:\r\n\r\n    return a? b||c : b&amp;&amp;c","title":"Check if at least two out of three booleans are true","body":"<p>Another one:</p>\n\n<pre><code>return a? b||c : b&amp;&amp;c\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6615151,"reputation":7343,"user_id":5108695,"display_name":"Dupinder Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700524845,"creation_date":1620721869,"answer_id":67483149,"question_id":3076078,"body_markdown":"This is very simple with the help of arithmetic operation.\r\n\r\n    boolean a = true;\r\n    boolean b = false;\r\n    boolean c = true;\r\n\r\n    // Exactly one boolean value true.\r\n    return (a?1:0)+(b?1:0)+(c?1:0)==1;\r\n\r\n    // Exactly 2 boolean value true.\r\n    return (a?1:0)+(b?1:0)+(c?1:0)==2;\r\n\r\nAnd this is how you can just increase the value of constant to check how many boolean values are `true`.","title":"Check if at least two out of three booleans are true","body":"<p>This is very simple with the help of arithmetic operation.</p>\n<pre><code>boolean a = true;\nboolean b = false;\nboolean c = true;\n\n// Exactly one boolean value true.\nreturn (a?1:0)+(b?1:0)+(c?1:0)==1;\n\n// Exactly 2 boolean value true.\nreturn (a?1:0)+(b?1:0)+(c?1:0)==2;\n</code></pre>\n<p>And this is how you can just increase the value of constant to check how many boolean values are <code>true</code>.</p>\n"},{"tags":[],"owner":{"account_id":9824068,"reputation":335,"user_id":7277725,"display_name":"Bobin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641048787,"creation_date":1641048787,"answer_id":70549626,"question_id":3076078,"body_markdown":"Its easy with operator overloading if you have a lot of booleans.\r\n\r\n\r\n    operator fun Boolean.unaryPlus() = if (this) 1 else 0\r\n    // ...\r\n    if(+bool1 + +bool2 + ... + +boolN &gt; 2) {\r\n        // ...\r\n    }","title":"Check if at least two out of three booleans are true","body":"<p>Its easy with operator overloading if you have a lot of booleans.</p>\n<pre><code>operator fun Boolean.unaryPlus() = if (this) 1 else 0\n// ...\nif(+bool1 + +bool2 + ... + +boolN &gt; 2) {\n    // ...\n}\n</code></pre>\n"}],"owner":{"account_id":106151,"reputation":3135,"user_id":282886,"accept_rate":100,"display_name":"user282886"},"comment_count":19,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":200003,"favorite_count":0,"down_vote_count":6,"up_vote_count":618,"accepted_answer_id":3076081,"answer_count":65,"score":612,"last_activity_date":1700525079,"creation_date":1276962362,"question_id":3076078,"body_markdown":"An interviewer recently asked me this question: given three boolean variables, a, b, and c, return true if at least two out of the three are true.\r\n\r\nMy solution follows:\r\n\r\n    boolean atLeastTwo(boolean a, boolean b, boolean c) {\r\n        if ((a &amp;&amp; b) || (b &amp;&amp; c) || (a &amp;&amp; c)) {\r\n            return true;\r\n        }\r\n        else{\r\n            return false;\r\n        }\r\n    }\r\n\r\nHe said that this can be improved further, but how?\r\n","title":"Check if at least two out of three booleans are true","body":"<p>An interviewer recently asked me this question: given three boolean variables, a, b, and c, return true if at least two out of the three are true.</p>\n\n<p>My solution follows:</p>\n\n<pre><code>boolean atLeastTwo(boolean a, boolean b, boolean c) {\n    if ((a &amp;&amp; b) || (b &amp;&amp; c) || (a &amp;&amp; c)) {\n        return true;\n    }\n    else{\n        return false;\n    }\n}\n</code></pre>\n\n<p>He said that this can be improved further, but how?</p>\n"},{"tags":["java","spring-boot","mockito"],"comments":[{"owner":{"account_id":18586978,"reputation":2220,"user_id":15000097,"display_name":"Georgii Lvov"},"score":2,"creation_date":1700460700,"post_id":77513067,"comment_id":136652833,"body_markdown":"Show how do you create orderrepository mock, and better the whole test","body":"Show how do you create orderrepository mock, and better the whole test"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1700484154,"post_id":77513067,"comment_id":136656342,"body_markdown":"How do you create/initialize the `orderRepository` mock instance and how do you inject it into the service? Probably one of the reasons explained in [Why are my mocked methods not called when executing a unit test?](https://stackoverflow.com/q/74027324/112968)","body":"How do you create/initialize the <code>orderRepository</code> mock instance and how do you inject it into the service? Probably one of the reasons explained in <a href=\"https://stackoverflow.com/q/74027324/112968\">Why are my mocked methods not called when executing a unit test?</a>"},{"owner":{"account_id":19081660,"reputation":520,"user_id":13933721,"display_name":"Mr. Kenneth"},"score":0,"creation_date":1700525055,"post_id":77513067,"comment_id":136663076,"body_markdown":"@GeorgiiLvov, knittl I thought I added the mocked repository when I pasted the code. I deleted unnecessary code before I submitted my question. Must had removed it too by accident.","body":"@GeorgiiLvov, knittl I thought I added the mocked repository when I pasted the code. I deleted unnecessary code before I submitted my question. Must had removed it too by accident."},{"owner":{"account_id":19081660,"reputation":520,"user_id":13933721,"display_name":"Mr. Kenneth"},"score":0,"creation_date":1700525087,"post_id":77513067,"comment_id":136663080,"body_markdown":"@knittl just mention since I cant mention more than 1 per comment","body":"@knittl just mention since I cant mention more than 1 per comment"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1700550127,"post_id":77513067,"comment_id":136665123,"body_markdown":"@Mr.Kenneth your test isn&#39;t testing any production code (except `OrderItem` and `Order`). Both service and repository are mock objects. So calling `orderItemServiceImpl.createOrderItem` never does anything, becaue `orderItemServiceImpl` is a mock. Since you want to test the behavior of your real `OrderItemServiceImpl` class, it _must not_ be mocked!. (Also note the confusing names of `setOrderItem1`, `setOrder`, and `setOrderItemRequestDto3`: they don&#39;t set anything, but are factory methods and why are some postfixed with a number?)","body":"@Mr.Kenneth your test isn&#39;t testing any production code (except <code>OrderItem</code> and <code>Order</code>). Both service and repository are mock objects. So calling <code>orderItemServiceImpl.createOrderItem</code> never does anything, becaue <code>orderItemServiceImpl</code> is a mock. Since you want to test the behavior of your real <code>OrderItemServiceImpl</code> class, it <i>must not</i> be mocked!. (Also note the confusing names of <code>setOrderItem1</code>, <code>setOrder</code>, and <code>setOrderItemRequestDto3</code>: they don&#39;t set anything, but are factory methods and why are some postfixed with a number?)"},{"owner":{"account_id":19081660,"reputation":520,"user_id":13933721,"display_name":"Mr. Kenneth"},"score":0,"creation_date":1700555813,"post_id":77513067,"comment_id":136665968,"body_markdown":"@knittl.  understand that I am mocking only. That is why when I execute `Mockito.when()` it should return a mocked `optionalOrder` where I can then assert later. But I am getting null instead of a mocked `optionalOrder`","body":"@knittl.  understand that I am mocking only. That is why when I execute <code>Mockito.when()</code> it should return a mocked <code>optionalOrder</code> where I can then assert later. But I am getting null instead of a mocked <code>optionalOrder</code>"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1700556700,"post_id":77513067,"comment_id":136666115,"body_markdown":"@Mr.Kenneth `orderItemServiceImpl.createOrderItem` does NOT call your service&#39;s method, it calls the (empty) method on the mock object. The mock object does not care about the method implementation of the production code.","body":"@Mr.Kenneth <code>orderItemServiceImpl.createOrderItem</code> does NOT call your service&#39;s method, it calls the (empty) method on the mock object. The mock object does not care about the method implementation of the production code."}],"owner":{"account_id":19081660,"reputation":520,"user_id":13933721,"display_name":"Mr. Kenneth"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1700524977,"creation_date":1700441737,"question_id":77513067,"body_markdown":"Asking for why my optionalEntity.get() is returning NoSuchElementException error.\r\n\r\nOrderItemServiceImpl\r\n```\r\npublic OrderItem createOrderItem(OrderItemRequestDto orderItemRequestDto) {\r\n    Optional&lt;Order&gt; optionalOrder = orderRepository.findOrderByUuid(orderItemRequestDto.getOrderId());\r\n\r\n    Order order = optionalOrder.get();\r\n\r\n    return orderItemRepository.save(orderItemRequestDto);\r\n}\r\n```\r\n\r\nOrderItemServiceImplUnitTest\r\n```\r\nprivate static final UUID uuid1 = UUID.randomUUID();\r\nprivate static final Order order1 = Order.builder().uuid(UUID.randomUUID()).buyer(&quot;order1&quot;).build();\r\n\r\n@Mock\r\nOrderItemRepository orderItemRepository;\r\n\r\n@Mock\r\nOrderRepository orderRepository;\r\n\r\npublic OrderItem setOrderItem1() {\r\n        return OrderItem\r\n                .builder()\r\n                .uuid(uuid1)\r\n                .build();\r\n}\r\n\r\npublic Order setOrder() {\r\n        return Order.builder()\r\n                .uuid(UUID.randomUUID())\r\n                .buyer(&quot;order1&quot;)\r\n                .build();\r\n}\r\n\r\nprivate OrderItemRequestDto setOrderItemRequestDto3() {\r\n    return OrderItemRequestDto\r\n            .builder()\r\n            .orderId(order3.getUuid())\r\n            .itemId(item3.getUuid())\r\n            .qty(1)\r\n            .build();\r\n}\r\n\r\n@Test\r\npublic void OrderItemServiceImplTest_createOrderItem() {\r\n        OrderItem orderItem1 = setOrderItem1();\r\n\r\n        Optional&lt;Order&gt; optionalOrder = Optional.of(order1);\r\n\r\n        logger.info(&quot;optionalOrder.get() {}&quot;, optionalOrder.get()); // log to check if optionalOrder.get() returns Order1. Log did write the Order1 with uuid and name.\r\n\r\n        Mockito.when(orderRepository.findOrderByUuid(order1.getUuid()))\r\n                .thenReturn(optionalOrder); // error java.util.NoSuchElementException\r\n\r\n        orderItemServiceImpl.createOrderItem(orderItemRequestDto1);\r\n        Mockito.verify(orderItemRepository, Mockito.times(1)).save(orderItem1);\r\n        ArgumentCaptor&lt;OrderItem&gt; orderItemArgumentCaptor = ArgumentCaptor.forClass(OrderItem.class);\r\n\r\n        ... // assertions\r\n}\r\n```\r\n\r\nWhat I understood: I am mocking the `Mockito.when(orderRepository...).thenReturn(optionalOrder)` method where I am expecting it to return `optionalOrder`. Now inside the `createOrderItem` running the `optional.get()` should return a valid mocked `Order` but I am getting null.\r\n\r\nNote: Order and OrderItem has a relationship: OrderItem.order_id\r\n","title":"Mockito thenReturn(optionalEntity)-&gt; optionalEntity.get() returns java.util.NoSuchElementException: No value present","body":"<p>Asking for why my optionalEntity.get() is returning NoSuchElementException error.</p>\n<p>OrderItemServiceImpl</p>\n<pre><code>public OrderItem createOrderItem(OrderItemRequestDto orderItemRequestDto) {\n    Optional&lt;Order&gt; optionalOrder = orderRepository.findOrderByUuid(orderItemRequestDto.getOrderId());\n\n    Order order = optionalOrder.get();\n\n    return orderItemRepository.save(orderItemRequestDto);\n}\n</code></pre>\n<p>OrderItemServiceImplUnitTest</p>\n<pre><code>private static final UUID uuid1 = UUID.randomUUID();\nprivate static final Order order1 = Order.builder().uuid(UUID.randomUUID()).buyer(&quot;order1&quot;).build();\n\n@Mock\nOrderItemRepository orderItemRepository;\n\n@Mock\nOrderRepository orderRepository;\n\npublic OrderItem setOrderItem1() {\n        return OrderItem\n                .builder()\n                .uuid(uuid1)\n                .build();\n}\n\npublic Order setOrder() {\n        return Order.builder()\n                .uuid(UUID.randomUUID())\n                .buyer(&quot;order1&quot;)\n                .build();\n}\n\nprivate OrderItemRequestDto setOrderItemRequestDto3() {\n    return OrderItemRequestDto\n            .builder()\n            .orderId(order3.getUuid())\n            .itemId(item3.getUuid())\n            .qty(1)\n            .build();\n}\n\n@Test\npublic void OrderItemServiceImplTest_createOrderItem() {\n        OrderItem orderItem1 = setOrderItem1();\n\n        Optional&lt;Order&gt; optionalOrder = Optional.of(order1);\n\n        logger.info(&quot;optionalOrder.get() {}&quot;, optionalOrder.get()); // log to check if optionalOrder.get() returns Order1. Log did write the Order1 with uuid and name.\n\n        Mockito.when(orderRepository.findOrderByUuid(order1.getUuid()))\n                .thenReturn(optionalOrder); // error java.util.NoSuchElementException\n\n        orderItemServiceImpl.createOrderItem(orderItemRequestDto1);\n        Mockito.verify(orderItemRepository, Mockito.times(1)).save(orderItem1);\n        ArgumentCaptor&lt;OrderItem&gt; orderItemArgumentCaptor = ArgumentCaptor.forClass(OrderItem.class);\n\n        ... // assertions\n}\n</code></pre>\n<p>What I understood: I am mocking the <code>Mockito.when(orderRepository...).thenReturn(optionalOrder)</code> method where I am expecting it to return <code>optionalOrder</code>. Now inside the <code>createOrderItem</code> running the <code>optional.get()</code> should return a valid mocked <code>Order</code> but I am getting null.</p>\n<p>Note: Order and OrderItem has a relationship: OrderItem.order_id</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1698909031,"post_id":77406210,"comment_id":136464617,"body_markdown":"Use Android Studio Girafe.","body":"Use Android Studio Girafe."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1698913151,"post_id":77406210,"comment_id":136465248,"body_markdown":"That is the Android &quot;Write xor Execute&quot; security restriction on recent Android versions. Dex files are not allowed in the writable data path of an app.","body":"That is the Android &quot;Write xor Execute&quot; security restriction on recent Android versions. Dex files are not allowed in the writable data path of an app."},{"owner":{"account_id":29310513,"reputation":5,"user_id":22456418,"display_name":"MysticSticker"},"score":0,"creation_date":1699018835,"post_id":77406210,"comment_id":136481481,"body_markdown":"@blackapps i have to use dolphin :(","body":"@blackapps i have to use dolphin :("},{"owner":{"account_id":29310513,"reputation":5,"user_id":22456418,"display_name":"MysticSticker"},"score":0,"creation_date":1699018916,"post_id":77406210,"comment_id":136481502,"body_markdown":"@Robert i dont know what is or isnt a dex files. And by path do you mean the path of the file location?","body":"@Robert i dont know what is or isnt a dex files. And by path do you mean the path of the file location?"}],"answers":[{"tags":[],"owner":{"account_id":17594613,"reputation":11,"user_id":12765747,"display_name":"Vadim"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700524630,"creation_date":1700524605,"answer_id":77519595,"question_id":77406210,"body_markdown":"Use the current version of Android Studio, like Girafe of Hedgehog. Older versions change the dex files to r/w, so if you&#39;re targeting Android 14 the app will not deploy correctly.","title":"Writable dex file is not allowed?","body":"<p>Use the current version of Android Studio, like Girafe of Hedgehog. Older versions change the dex files to r/w, so if you're targeting Android 14 the app will not deploy correctly.</p>\n"}],"owner":{"account_id":29310513,"reputation":5,"user_id":22456418,"display_name":"MysticSticker"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700524630,"creation_date":1698882567,"question_id":77406210,"body_markdown":"the full error is &quot;Writable dex file &#39;/data/data/com.example.tasklist/code_cache/.overlay/base.apk/classes3.dex&#39; is not allowed.&quot;\r\n\r\nI did not make the code the error is for, its a school assignment where we just copy the powerpoint. Nothing in the code is underlined red and I&#39;ve relooked at the powerpoint 3 times for spelling errors. The assignment for context is making a Task List DataBase. I&#39;m not sure where to start looking and if you need the full error I&#39;ll update this post with it.","title":"Writable dex file is not allowed?","body":"<p>the full error is &quot;Writable dex file '/data/data/com.example.tasklist/code_cache/.overlay/base.apk/classes3.dex' is not allowed.&quot;</p>\n<p>I did not make the code the error is for, its a school assignment where we just copy the powerpoint. Nothing in the code is underlined red and I've relooked at the powerpoint 3 times for spelling errors. The assignment for context is making a Task List DataBase. I'm not sure where to start looking and if you need the full error I'll update this post with it.</p>\n"},{"tags":["java","loops","for-loop","enums"],"comments":[{"owner":{"account_id":1257650,"reputation":23489,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"score":0,"creation_date":1537507823,"post_id":1104975,"comment_id":91817271,"body_markdown":"Java 8 : https://stackoverflow.com/a/30962181/1216775","body":"Java 8 : <a href=\"https://stackoverflow.com/a/30962181/1216775\">stackoverflow.com/a/30962181/1216775</a>"}],"answers":[{"comments":[{"owner":{"account_id":3320383,"reputation":1548,"user_id":2791703,"display_name":"dARKpRINCE"},"score":0,"creation_date":1454941511,"post_id":1104990,"comment_id":58255360,"body_markdown":"@RAnders00 True. But still the answer is valid and the format really doesn&#39;t matter (atleast to me)","body":"@RAnders00 True. But still the answer is valid and the format really doesn&#39;t matter (atleast to me)"},{"owner":{"account_id":5355547,"reputation":598,"user_id":4996524,"accept_rate":56,"display_name":"YoTengoUnLCD"},"score":0,"creation_date":1465674948,"post_id":1104990,"comment_id":63004357,"body_markdown":"What does the `#` do?","body":"What does the <code>#</code> do?"},{"owner":{"account_id":4797336,"reputation":472,"user_id":3874884,"accept_rate":90,"display_name":"Spotlight"},"score":0,"creation_date":1465680060,"post_id":1104990,"comment_id":63005695,"body_markdown":"@YoTengoUnLCD Basically it&#39;s saying that values() is part of the Enum object. e.g `Enum#values()` = `Enum.values()`","body":"@YoTengoUnLCD Basically it&#39;s saying that values() is part of the Enum object. e.g <code>Enum#values()</code> = <code>Enum.values()</code>"},{"owner":{"account_id":5355547,"reputation":598,"user_id":4996524,"accept_rate":56,"display_name":"YoTengoUnLCD"},"score":0,"creation_date":1465682659,"post_id":1104990,"comment_id":63006251,"body_markdown":"Hmm, I&#39;m sorry, I don&#39;t follow, is it the same as using `.` (always?)?","body":"Hmm, I&#39;m sorry, I don&#39;t follow, is it the same as using <code>.</code> (always?)?"},{"owner":{"account_id":930090,"reputation":4490,"user_id":960115,"accept_rate":92,"display_name":"Jeff G"},"score":4,"creation_date":1477945016,"post_id":1104990,"comment_id":67954295,"body_markdown":"@YoTengoUnLCD The hashtag is JavaDoc syntax, not Java code.","body":"@YoTengoUnLCD The hashtag is JavaDoc syntax, not Java code."}],"tags":[],"owner":{"account_id":32251,"reputation":114942,"user_id":89266,"accept_rate":91,"display_name":"dfa"},"comment_count":5,"down_vote_count":0,"up_vote_count":141,"is_accepted":false,"score":141,"last_activity_date":1569960474,"creation_date":1247156813,"answer_id":1104990,"question_id":1104975,"body_markdown":"All the constants of an enum type can be obtained by calling the implicit `public static T[] values()` method of that type:\r\n\r\n     for (Direction d : Direction.values()) {\r\n         System.out.println(d);\r\n     }\r\n","title":"A for-loop to iterate over an enum in Java","body":"<p>All the constants of an enum type can be obtained by calling the implicit <code>public static T[] values()</code> method of that type:</p>\n\n<pre><code> for (Direction d : Direction.values()) {\n     System.out.println(d);\n }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1415830,"reputation":7284,"user_id":1341526,"accept_rate":96,"display_name":"jacktrades"},"score":46,"creation_date":1358385150,"post_id":1104994,"comment_id":19984757,"body_markdown":"Why this method *values()* isn&#39;t listed [here](http://docs.oracle.com/javase/7/docs/api/) under java.lang.enum","body":"Why this method <i>values()</i> isn&#39;t listed <a href=\"http://docs.oracle.com/javase/7/docs/api/\" rel=\"nofollow noreferrer\">here</a> under java.lang.enum"},{"owner":{"account_id":1041463,"reputation":3845,"user_id":1047418,"display_name":"Torben"},"score":83,"creation_date":1362475973,"post_id":1104994,"comment_id":21453104,"body_markdown":"@jacktrades: It is an implicit method that exists only in the compiler. Therefore the base class can not declare a method with the same name and thus it does not get included in the automatically generated Javadocs.  http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.2","body":"@jacktrades: It is an implicit method that exists only in the compiler. Therefore the base class can not declare a method with the same name and thus it does not get included in the automatically generated Javadocs.  <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.2\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9&zwnj;&#8203;.2</a>"},{"owner":{"account_id":6283,"reputation":4942,"user_id":10505,"accept_rate":100,"display_name":"greg7gkb"},"score":4,"creation_date":1504476718,"post_id":1104994,"comment_id":79016510,"body_markdown":"Oddly, it is mentioned in the [valueOf() docs](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html#valueOf(java.lang.Class,%20java.lang.String))","body":"Oddly, it is mentioned in the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html#valueOf(java.lang.Class,%20java.lang.String)\" rel=\"nofollow noreferrer\">valueOf() docs</a>"}],"tags":[],"owner":{"account_id":43112,"reputation":58953,"user_id":125844,"accept_rate":85,"display_name":"notnoop"},"comment_count":3,"down_vote_count":1,"up_vote_count":1487,"is_accepted":true,"score":1486,"last_activity_date":1437510256,"creation_date":1247156835,"answer_id":1104994,"question_id":1104975,"body_markdown":"# `.values()`\r\n\r\nYou can call the `values()` method on your enum.\r\n\r\n    for (Direction dir : Direction.values()) {\r\n      // do what you want\r\n    }\r\n\r\nThis `values()` method is [implicitly declared by the compiler][1]. So it is not listed on [`Enum`][2] doc. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.9.3\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html","title":"A for-loop to iterate over an enum in Java","body":"<h1><code>.values()</code></h1>\n\n<p>You can call the <code>values()</code> method on your enum.</p>\n\n<pre><code>for (Direction dir : Direction.values()) {\n  // do what you want\n}\n</code></pre>\n\n<p>This <code>values()</code> method is <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.9.3\" rel=\"noreferrer\">implicitly declared by the compiler</a>. So it is not listed on <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html\" rel=\"noreferrer\"><code>Enum</code></a> doc. </p>\n"},{"comments":[{"owner":{"account_id":6901,"reputation":19082,"user_id":11760,"accept_rate":91,"display_name":"Nate"},"score":2,"creation_date":1247159617,"post_id":1104996,"comment_id":920041,"body_markdown":"Provided you import java.util.EnumSet","body":"Provided you import java.util.EnumSet"},{"owner":{"account_id":36036,"reputation":5314,"user_id":102483,"accept_rate":100,"display_name":"Hiro2k"},"score":9,"creation_date":1433269097,"post_id":1104996,"comment_id":49275519,"body_markdown":"Super useful for Java8 foreach loops.\n\nEnumSet.allOf(Enum.class).forEach(blah -&gt; method(blah))","body":"Super useful for Java8 foreach loops.  EnumSet.allOf(Enum.class).forEach(blah -&gt; method(blah))"},{"owner":{"account_id":5303874,"reputation":5062,"user_id":4464702,"accept_rate":96,"display_name":"randers"},"score":1,"creation_date":1454935331,"post_id":1104996,"comment_id":58250995,"body_markdown":"@Hiro2k You could also do `Arrays.stream(Enum.values()).forEach(...)` - the stream will be sequential","body":"@Hiro2k You could also do <code>Arrays.stream(Enum.values()).forEach(...)</code> - the stream will be sequential"},{"owner":{"account_id":876051,"reputation":1497,"user_id":925675,"accept_rate":50,"display_name":"schatten"},"score":0,"creation_date":1463180578,"post_id":1104996,"comment_id":61971925,"body_markdown":"Can you explain why it&#39;s better than `Enum.values()` ?","body":"Can you explain why it&#39;s better than <code>Enum.values()</code> ?"},{"owner":{"account_id":6742219,"reputation":3296,"user_id":5922757,"accept_rate":100,"display_name":"Jezor"},"score":1,"creation_date":1473343002,"post_id":1104996,"comment_id":66111812,"body_markdown":"@schatten well, it&#39;s a `set` instead of `array`. It&#39;s not &quot;better&quot;, although it describes enum values better in my opinion, because from set&#39;s definition, values in set cannot be repeated (like in enum), whereas values in array can be.","body":"@schatten well, it&#39;s a <code>set</code> instead of <code>array</code>. It&#39;s not &quot;better&quot;, although it describes enum values better in my opinion, because from set&#39;s definition, values in set cannot be repeated (like in enum), whereas values in array can be."},{"owner":{"account_id":876051,"reputation":1497,"user_id":925675,"accept_rate":50,"display_name":"schatten"},"score":2,"creation_date":1473361345,"post_id":1104996,"comment_id":66122738,"body_markdown":"@Jezor It&#39;s a better choice when you actually need a very fast set of enums, like bit flags, though seems to be too complicated for a simple iteration.","body":"@Jezor It&#39;s a better choice when you actually need a very fast set of enums, like bit flags, though seems to be too complicated for a simple iteration."}],"tags":[],"owner":{"account_id":7223,"reputation":4097,"user_id":12457,"accept_rate":90,"display_name":"toluju"},"comment_count":6,"down_vote_count":0,"up_vote_count":64,"is_accepted":false,"score":64,"last_activity_date":1247156839,"creation_date":1247156839,"answer_id":1104996,"question_id":1104975,"body_markdown":"You can do this as follows:\r\n\r\n    for (Direction direction : EnumSet.allOf(Direction.class)) {\r\n      // do stuff\r\n    }","title":"A for-loop to iterate over an enum in Java","body":"<p>You can do this as follows:</p>\n\n<pre><code>for (Direction direction : EnumSet.allOf(Direction.class)) {\n  // do stuff\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6901,"reputation":19082,"user_id":11760,"accept_rate":91,"display_name":"Nate"},"score":2,"creation_date":1247159718,"post_id":1104997,"comment_id":920056,"body_markdown":"Provided you import java.util.EnumSet and java.util.Set","body":"Provided you import java.util.EnumSet and java.util.Set"},{"owner":{"account_id":930090,"reputation":4490,"user_id":960115,"accept_rate":92,"display_name":"Jeff G"},"score":4,"creation_date":1477945405,"post_id":1104997,"comment_id":67954492,"body_markdown":"From the [documentation for `EnumSet`](https://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html): *The iterator returned by the iterator method traverses the elements in their **natural order** (the order in which the enum constants are declared)*.  This guarantees that the order of iteration matches the order returned by `Enum.values()`.","body":"From the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/EnumSet.html\" rel=\"nofollow noreferrer\">documentation for <code>EnumSet</code></a>: <i>The iterator returned by the iterator method traverses the elements in their <b>natural order</b> (the order in which the enum constants are declared)</i>.  This guarantees that the order of iteration matches the order returned by <code>Enum.values()</code>."}],"tags":[],"owner":{"account_id":32598,"reputation":13160,"user_id":90573,"display_name":"Tom Jefferys"},"comment_count":2,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1247156853,"creation_date":1247156853,"answer_id":1104997,"question_id":1104975,"body_markdown":"If you don&#39;t care about the order this should work:\r\n\r\n    Set&lt;Direction&gt; directions = EnumSet.allOf(Direction.class);\r\n    for(Direction direction : directions) {\r\n        // do stuff\r\n    }\r\n","title":"A for-loop to iterate over an enum in Java","body":"<p>If you don't care about the order this should work:</p>\n\n<pre><code>Set&lt;Direction&gt; directions = EnumSet.allOf(Direction.class);\nfor(Direction direction : directions) {\n    // do stuff\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":38384,"reputation":1715,"user_id":110126,"accept_rate":85,"display_name":"buzz3791"},"score":2,"creation_date":1543965044,"post_id":30962181,"comment_id":94105980,"body_markdown":"As with all stream operations be aware of thread statelessness and side effect limits https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Statelessness.  These 2 enum iteration options are significantly different in this regard.","body":"As with all stream operations be aware of thread statelessness and side effect limits <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Statelessness\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/stream/&hellip;</a>.  These 2 enum iteration options are significantly different in this regard."}],"tags":[],"owner":{"account_id":1257650,"reputation":23489,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"comment_count":1,"down_vote_count":2,"up_vote_count":49,"is_accepted":false,"score":47,"last_activity_date":1543979880,"creation_date":1434871017,"answer_id":30962181,"question_id":1104975,"body_markdown":"# Streams\r\n\r\nPrior to Java 8\r\n---------------\r\n\r\n    for (Direction dir : Direction.values()) {\r\n                System.out.println(dir);\r\n    }\r\n\r\nJava 8\r\n------\r\n\r\nWe can also make use of lambda and streams ([Tutorial][1]):\r\n\r\n    Stream.of(Direction.values()).forEachOrdered(System.out::println);\r\n\r\n\r\n----------\r\n\r\n\r\n**Why `forEachOrdered` and not `forEach` with streams ?**\r\n\r\nThe behaviour of `forEach` is explicitly nondeterministic where as the `forEachOrdered` performs an action for each element of this stream, in the encounter order of the stream if the stream has a defined encounter order. So `forEach` does not guarantee that the order would be kept. \r\n\r\nAlso when working with streams (especially parallel ones) keep in mind the nature of streams. As per the [doc][2]:\r\n\r\n Stream pipeline results may be nondeterministic or incorrect if the behavioral parameters to the stream operations are stateful. A stateful lambda is one whose result depends on any state which might change during the execution of the stream pipeline.\r\n\r\n    Set&lt;Integer&gt; seen = Collections.synchronizedSet(new HashSet&lt;&gt;());\r\n    stream.parallel().map(e -&gt; { if (seen.add(e)) return 0; else return e; })...\r\n\r\nHere, if the mapping operation is performed in parallel, the results for the same input could vary from run to run, due to thread scheduling differences, whereas, with a stateless lambda expression the results would always be the same.\r\n\r\nSide-effects in behavioral parameters to stream operations are, in general, discouraged, as they can often lead to unwitting violations of the statelessness requirement, as well as other thread-safety hazards.\r\n\r\nStreams may or may not have a defined encounter order. Whether or not a stream has an encounter order depends on the source and the intermediate operations.\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html","title":"A for-loop to iterate over an enum in Java","body":"<h1>Streams</h1>\n\n<h2>Prior to Java 8</h2>\n\n<pre><code>for (Direction dir : Direction.values()) {\n            System.out.println(dir);\n}\n</code></pre>\n\n<h2>Java 8</h2>\n\n<p>We can also make use of lambda and streams (<a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"noreferrer\">Tutorial</a>):</p>\n\n<pre><code>Stream.of(Direction.values()).forEachOrdered(System.out::println);\n</code></pre>\n\n<hr>\n\n<p><strong>Why <code>forEachOrdered</code> and not <code>forEach</code> with streams ?</strong></p>\n\n<p>The behaviour of <code>forEach</code> is explicitly nondeterministic where as the <code>forEachOrdered</code> performs an action for each element of this stream, in the encounter order of the stream if the stream has a defined encounter order. So <code>forEach</code> does not guarantee that the order would be kept. </p>\n\n<p>Also when working with streams (especially parallel ones) keep in mind the nature of streams. As per the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\" rel=\"noreferrer\">doc</a>:</p>\n\n<p>Stream pipeline results may be nondeterministic or incorrect if the behavioral parameters to the stream operations are stateful. A stateful lambda is one whose result depends on any state which might change during the execution of the stream pipeline.</p>\n\n<pre><code>Set&lt;Integer&gt; seen = Collections.synchronizedSet(new HashSet&lt;&gt;());\nstream.parallel().map(e -&gt; { if (seen.add(e)) return 0; else return e; })...\n</code></pre>\n\n<p>Here, if the mapping operation is performed in parallel, the results for the same input could vary from run to run, due to thread scheduling differences, whereas, with a stateless lambda expression the results would always be the same.</p>\n\n<p>Side-effects in behavioral parameters to stream operations are, in general, discouraged, as they can often lead to unwitting violations of the statelessness requirement, as well as other thread-safety hazards.</p>\n\n<p>Streams may or may not have a defined encounter order. Whether or not a stream has an encounter order depends on the source and the intermediate operations.</p>\n"},{"comments":[{"owner":{"account_id":2524791,"reputation":3884,"user_id":2194364,"accept_rate":77,"display_name":"Raghu K Nair"},"score":1,"creation_date":1456381338,"post_id":35619827,"comment_id":58922241,"body_markdown":"oh sorry. I just realized that akhil_mittal already posted the similar answer.","body":"oh sorry. I just realized that akhil_mittal already posted the similar answer."},{"owner":{"account_id":4166814,"reputation":566,"user_id":3415618,"accept_rate":67,"display_name":"Jeremy"},"score":0,"creation_date":1462286762,"post_id":35619827,"comment_id":61567046,"body_markdown":"When and why should I use Stream.of(o).forEach? The for loop seems much more readable.","body":"When and why should I use Stream.of(o).forEach? The for loop seems much more readable."},{"owner":{"account_id":237493,"reputation":11836,"user_id":505714,"accept_rate":87,"display_name":"Alexis Dufrenoy"},"score":0,"creation_date":1481729868,"post_id":35619827,"comment_id":69495269,"body_markdown":"Not if you are familiar with functional programming.","body":"Not if you are familiar with functional programming."}],"tags":[],"owner":{"account_id":2524791,"reputation":3884,"user_id":2194364,"accept_rate":77,"display_name":"Raghu K Nair"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1456381285,"creation_date":1456381285,"answer_id":35619827,"question_id":1104975,"body_markdown":"Java8 \r\n\r\n    Stream.of(Direction.values()).forEach(System.out::println);\r\n\r\nfrom Java5+ \r\n\r\n    for ( Direction d: Direction.values()){\r\n     System.out.println(d);\r\n    }\r\n\r\n\r\n\r\n\r\n","title":"A for-loop to iterate over an enum in Java","body":"<p>Java8 </p>\n\n<pre><code>Stream.of(Direction.values()).forEach(System.out::println);\n</code></pre>\n\n<p>from Java5+ </p>\n\n<pre><code>for ( Direction d: Direction.values()){\n System.out.println(d);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1471892,"reputation":9718,"user_id":1383240,"accept_rate":38,"display_name":"NiVeR"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1527101171,"creation_date":1527101171,"answer_id":50495423,"question_id":1104975,"body_markdown":"More methods in java 8:\r\n\r\n&lt;h2&gt;Using &lt;code&gt;EnumSet&lt;/code&gt; with &lt;code&gt;forEach&lt;/code&gt;&lt;/h2&gt;\r\n\r\n    EnumSet.allOf(Direction.class).forEach(...);\r\n    \r\n&lt;h2&gt; Using &lt;code&gt;Arrays.asList&lt;/code&gt; with &lt;code&gt;forEach&lt;/code&gt; &lt;/h2&gt;\r\n\r\n    Arrays.asList(Direction.values()).forEach(...);","title":"A for-loop to iterate over an enum in Java","body":"<p>More methods in java 8:</p>\n\n<h2>Using <code>EnumSet</code> with <code>forEach</code></h2>\n\n<pre><code>EnumSet.allOf(Direction.class).forEach(...);\n</code></pre>\n\n<h2> Using <code>Arrays.asList</code> with <code>forEach</code> </h2>\n\n<pre><code>Arrays.asList(Direction.values()).forEach(...);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13345304,"reputation":101,"user_id":9632236,"display_name":"Sarat Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700524568,"creation_date":1597556552,"answer_id":63433528,"question_id":1104975,"body_markdown":"We can use a filter (JAVA 8) like this.\r\n```java\r\nStream.of(Direction.values()).filter(name -&gt; !name.toString().startsWith(&quot;S&quot;)).forEach(System.out::println);\r\n```","title":"A for-loop to iterate over an enum in Java","body":"<p>We can use a filter (JAVA 8) like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream.of(Direction.values()).filter(name -&gt; !name.toString().startsWith(&quot;S&quot;)).forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11585374,"reputation":194,"user_id":8487732,"display_name":"Ajay"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1658149343,"creation_date":1658149029,"answer_id":73022675,"question_id":1104975,"body_markdown":"**Scenario**: Let&#39;s say, we have a fixed number of card types.\r\nEach card type has fees and a joining bonus associated with it.\r\n\r\n\r\n\r\n    package enumPkg;\r\n\r\n    public enum CardTypes {\r\n\t//Each enum is object\r\n\tDEBIT(10,20),\r\n\tCREDIT(0,10),\r\n\tCRYPTO(5,30);\r\n\r\n\t//Object properties\r\n\tint fees;\r\n\tint bonus;\r\n\r\n\t//Initilize object using constructor\r\n\tCardTypes(int fee, int bonus){\r\n\t\tthis.fees = fee;\r\n\t\tthis.bonus = bonus;\r\n\t}\r\n\r\n\t//access object property\r\n\tpublic int getFees(){\r\n\t\treturn this.fees;\r\n\t}\r\n\r\n\tpublic int getBonus(){\r\n\t\treturn this.bonus;\r\n\t}\r\n\r\n    }\r\n\r\n\r\nNow to access enum in other class. Follow the below process in java:\r\n\r\n    package enumPkg;\r\n\r\n    public class EnumClass {\r\n\tpublic static void main(String[] args) {\r\n\t\tCardTypes cardType = CardTypes.CREDIT; //Each enum element is public static final, when accessed returns a object\r\n\t\tSystem.out.println(cardType);\r\n\r\n\t\tSystem.out.println(&quot;Debit card fees : &quot;+CardTypes.DEBIT.getFees());\r\n\t\tSystem.out.println(&quot;Debit card bonus : &quot;+CardTypes.DEBIT.getBonus());\r\n\r\n\t\tCardTypes[] cardTypes = CardTypes.values();//return array of CardTypes i.e all enum elements we have defined\r\n\r\n\t\tfor (CardTypes type : CardTypes.values()) {\r\n\t\t\tSystem.out.println(type); //particular enum object\r\n\t\t\tSystem.out.println(type.ordinal()); //return enum position\r\n\t\t\tSystem.out.println(&quot;Bonus : &quot;+type.getBonus()); //return enum object property: Bonus\r\n\t\t\tSystem.out.println(&quot;Fees  : &quot;+type.getFees());//return enum object property: Fees\r\n\t\t}\r\n\r\n\t}\r\n    }\r\n\r\n\r\nOutput:\r\n\r\n    CREDIT\r\n    Debit card fees : 10\r\n    Debit card bonus : 20\r\n    DEBIT\r\n    0\r\n    Bonus : 20\r\n    Fees  : 10\r\n    CREDIT\r\n    1\r\n    Bonus : 10\r\n    Fees  : 0\r\n    CRYPTO\r\n    2\r\n    Bonus : 30\r\n    Fees  : 5","title":"A for-loop to iterate over an enum in Java","body":"<p><strong>Scenario</strong>: Let's say, we have a fixed number of card types.\nEach card type has fees and a joining bonus associated with it.</p>\n<pre><code>package enumPkg;\n\npublic enum CardTypes {\n//Each enum is object\nDEBIT(10,20),\nCREDIT(0,10),\nCRYPTO(5,30);\n\n//Object properties\nint fees;\nint bonus;\n\n//Initilize object using constructor\nCardTypes(int fee, int bonus){\n    this.fees = fee;\n    this.bonus = bonus;\n}\n\n//access object property\npublic int getFees(){\n    return this.fees;\n}\n\npublic int getBonus(){\n    return this.bonus;\n}\n\n}\n</code></pre>\n<p>Now to access enum in other class. Follow the below process in java:</p>\n<pre><code>package enumPkg;\n\npublic class EnumClass {\npublic static void main(String[] args) {\n    CardTypes cardType = CardTypes.CREDIT; //Each enum element is public static final, when accessed returns a object\n    System.out.println(cardType);\n\n    System.out.println(&quot;Debit card fees : &quot;+CardTypes.DEBIT.getFees());\n    System.out.println(&quot;Debit card bonus : &quot;+CardTypes.DEBIT.getBonus());\n\n    CardTypes[] cardTypes = CardTypes.values();//return array of CardTypes i.e all enum elements we have defined\n\n    for (CardTypes type : CardTypes.values()) {\n        System.out.println(type); //particular enum object\n        System.out.println(type.ordinal()); //return enum position\n        System.out.println(&quot;Bonus : &quot;+type.getBonus()); //return enum object property: Bonus\n        System.out.println(&quot;Fees  : &quot;+type.getFees());//return enum object property: Fees\n    }\n\n}\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>CREDIT\nDebit card fees : 10\nDebit card bonus : 20\nDEBIT\n0\nBonus : 20\nFees  : 10\nCREDIT\n1\nBonus : 10\nFees  : 0\nCRYPTO\n2\nBonus : 30\nFees  : 5\n</code></pre>\n"}],"owner":{"account_id":45806,"reputation":39492,"user_id":135178,"accept_rate":83,"display_name":"Nick Meyer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":523024,"favorite_count":0,"down_vote_count":0,"up_vote_count":941,"accepted_answer_id":1104994,"answer_count":9,"score":941,"last_activity_date":1700524568,"creation_date":1247156643,"question_id":1104975,"body_markdown":"I have an `enum` in Java for the cardinal and intermediate directions:\r\n\r\n    public enum Direction {\r\n       NORTH,\r\n       NORTHEAST,\r\n       EAST,\r\n       SOUTHEAST,\r\n       SOUTH,\r\n       SOUTHWEST,\r\n       WEST,\r\n       NORTHWEST\r\n    }\r\n\r\nHow can I write a `for` loop that iterates through each of these `enum` values?","title":"A for-loop to iterate over an enum in Java","body":"<p>I have an <code>enum</code> in Java for the cardinal and intermediate directions:</p>\n<pre><code>public enum Direction {\n   NORTH,\n   NORTHEAST,\n   EAST,\n   SOUTHEAST,\n   SOUTH,\n   SOUTHWEST,\n   WEST,\n   NORTHWEST\n}\n</code></pre>\n<p>How can I write a <code>for</code> loop that iterates through each of these <code>enum</code> values?</p>\n"},{"tags":["java","xsd","maven-jaxb2-plugin","jaxb2-maven-plugin"],"comments":[{"owner":{"account_id":333595,"reputation":103,"user_id":659527,"accept_rate":25,"display_name":"Ionut"},"score":0,"creation_date":1658492804,"post_id":73064021,"comment_id":129071157,"body_markdown":"I just tagged this question with maven-jaxb2-plugin because I changed the plugin from jaxb2-maven-plugin to maven-jaxb2-plugin and I get the same result. I even have a small sample project that can be used to reproduce the error.","body":"I just tagged this question with maven-jaxb2-plugin because I changed the plugin from jaxb2-maven-plugin to maven-jaxb2-plugin and I get the same result. I even have a small sample project that can be used to reproduce the error."},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1658494225,"post_id":73064021,"comment_id":129071620,"body_markdown":"Does this answer your question? [JAXB - Property &quot;Value&quot; is already defined. Use &lt;jaxb:property&gt; to resolve this conflict](https://stackoverflow.com/questions/4394134/jaxb-property-value-is-already-defined-use-jaxbproperty-to-resolve-this)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/4394134/jaxb-property-value-is-already-defined-use-jaxbproperty-to-resolve-this\">JAXB - Property &quot;Value&quot; is already defined. Use &lt;jaxb:property&gt; to resolve this conflict</a>"}],"answers":[{"tags":[],"owner":{"account_id":29874264,"reputation":478,"user_id":22894892,"display_name":"Laurent Schoelens"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700524047,"creation_date":1700524047,"answer_id":77519561,"question_id":73064021,"body_markdown":"I&#39;ve downloaded your project sample (thanks for it by the way)\r\n\r\n - After upgrading to latest version of `maven-jaxb2-plugin` with new coordinates\r\n```xml\r\n&lt;groupId&gt;org.jvnet.jaxb&lt;/groupId&gt;\r\n&lt;artifactId&gt;jaxb-maven-plugin&lt;/artifactId&gt;\r\n&lt;version&gt;2.0.9&lt;/version&gt;\r\n```\r\n\r\n- And after updating your catalog to fix the public ref to namespace declaration\r\n```\r\nPUBLIC &quot;http://www.springframework.org/schema/beans&quot; &quot;maven:org.springframework:spring-beans::!/org/springframework/beans/factory/xml/spring-beans-3.1.xsd&quot;\r\nPUBLIC &quot;http://www.mulesoft.org/schema/mule/core&quot; &quot;maven:org.mule.modules:mule-module-spring-config:jar::!/META-INF/mule.xsd&quot;\r\nPUBLIC &quot;http://www.mulesoft.org/schema/mule/schemadoc&quot; &quot;maven:org.mule.modules:mule-module-spring-config:jar::!/META-INF/mule-schemadoc.xsd&quot;\r\nPUBLIC &quot;http://www.mulesoft.org/schema/mule/jms&quot; &quot;maven:org.mule.transports:mule-transport-jms:jar::!/META-INF/mule-jms.xsd&quot;\r\nPUBLIC &quot;http://www.springframework.org/schema/context&quot; &quot;maven:org.springframework:spring-context::!/org/springframework/context/config/spring-context-3.1.xsd&quot;\r\nPUBLIC &quot;http://www.springframework.org/schema/tool&quot; &quot;maven:org.springframework:spring-beans::!/org/springframework/beans/factory/xml/spring-tool-3.1.xsd&quot;\r\n```\r\n\r\nI manage to reproduce your error\r\n```\r\n[ERROR] Error while parsing schema(s).Location [ http://www.springframework.org/schema/beans/spring-beans-3.1.xsd http://www.springframework.org/schema/beans{566,30}].\r\ncom.sun.istack.SAXParseException2: Property &quot;Ref&quot; is already defined. Use &amp;lt;jaxb:property&gt; to resolve this conflict.\r\n    at com.sun.tools.xjc.ErrorReceiver.error (ErrorReceiver.java:56)\r\n[...]\r\n[ERROR] Error while parsing schema(s).Location [ http://www.springframework.org/schema/beans/spring-beans-3.1.xsd http://www.springframework.org/schema/beans{606,48}].\r\ncom.sun.istack.SAXParseException2: The following location is relevant to the above error\r\n```\r\n\r\nAs you can see, the error is split in two parts, in order to know where the conflict is located. Here for example, you have the `ref` element that is declared twice in `spring-beans.xsd` (line 566 v. line 606).\r\n\r\nBy looking at the xsd, you&#39;ll find that `constructor-arg` `xsd:element` has two `ref` declared, one as child `xsd:element` and another one as `xsd:attribute`, documented as `A short-cut alternative to a nested &quot;&lt;ref bean=&#39;...&#39;/&gt;&quot; element.`\r\n\r\nIn the end, your configuration is good but you need to apply the [following trick][1] that was mentionned in the comments.\r\n\r\nUsing the following `bindings.xjb` file, you should be able to generate your XSD :\r\n\r\n```xml\r\n&lt;jaxb:bindings \r\n\tversion=&quot;2.1&quot;\r\n\txmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\r\n    xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\r\n\r\n\t&lt;jaxb:bindings xmlns:tns=&quot;http://www.springframework.org/schema/beans&quot; scd=&quot;x-schema::tns&quot;&gt;\r\n\t\t&lt;jaxb:bindings scd=&quot;/tns:ref&quot;&gt;\r\n            &lt;jaxb:property name=&quot;refAttribute&quot;/&gt;\r\n        &lt;/jaxb:bindings&gt;\r\n        &lt;jaxb:bindings scd=&quot;/tns:value&quot;&gt;\r\n            &lt;jaxb:property name=&quot;valueAttribute&quot;/&gt;\r\n        &lt;/jaxb:bindings&gt;\r\n        &lt;jaxb:bindings scd=&quot;/tns:key&quot;&gt;\r\n            &lt;jaxb:property name=&quot;keyAttribute&quot;/&gt;\r\n        &lt;/jaxb:bindings&gt;\r\n\t&lt;/jaxb:bindings&gt;\r\n    &lt;jaxb:bindings xmlns:tns=&quot;http://www.springframework.org/schema/context&quot; scd=&quot;x-schema::tns&quot;&gt;\r\n        &lt;jaxb:bindings scd=&quot;/tns:property-placeholder&quot;&gt;\r\n            &lt;jaxb:class name=&quot;org.springframework.schema.context.PropertyPlaceholderElement&quot;/&gt;\r\n        &lt;/jaxb:bindings&gt;\r\n\t&lt;/jaxb:bindings&gt;\r\n&lt;/jaxb:bindings&gt;\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4394134/jaxb-property-value-is-already-defined-use-jaxbproperty-to-resolve-this","title":"xsd conflict when using jaxb2-maven-plugin","body":"<p>I've downloaded your project sample (thanks for it by the way)</p>\n<ul>\n<li>After upgrading to latest version of <code>maven-jaxb2-plugin</code> with new coordinates</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;groupId&gt;org.jvnet.jaxb&lt;/groupId&gt;\n&lt;artifactId&gt;jaxb-maven-plugin&lt;/artifactId&gt;\n&lt;version&gt;2.0.9&lt;/version&gt;\n</code></pre>\n<ul>\n<li>And after updating your catalog to fix the public ref to namespace declaration</li>\n</ul>\n<pre><code>PUBLIC &quot;http://www.springframework.org/schema/beans&quot; &quot;maven:org.springframework:spring-beans::!/org/springframework/beans/factory/xml/spring-beans-3.1.xsd&quot;\nPUBLIC &quot;http://www.mulesoft.org/schema/mule/core&quot; &quot;maven:org.mule.modules:mule-module-spring-config:jar::!/META-INF/mule.xsd&quot;\nPUBLIC &quot;http://www.mulesoft.org/schema/mule/schemadoc&quot; &quot;maven:org.mule.modules:mule-module-spring-config:jar::!/META-INF/mule-schemadoc.xsd&quot;\nPUBLIC &quot;http://www.mulesoft.org/schema/mule/jms&quot; &quot;maven:org.mule.transports:mule-transport-jms:jar::!/META-INF/mule-jms.xsd&quot;\nPUBLIC &quot;http://www.springframework.org/schema/context&quot; &quot;maven:org.springframework:spring-context::!/org/springframework/context/config/spring-context-3.1.xsd&quot;\nPUBLIC &quot;http://www.springframework.org/schema/tool&quot; &quot;maven:org.springframework:spring-beans::!/org/springframework/beans/factory/xml/spring-tool-3.1.xsd&quot;\n</code></pre>\n<p>I manage to reproduce your error</p>\n<pre><code>[ERROR] Error while parsing schema(s).Location [ http://www.springframework.org/schema/beans/spring-beans-3.1.xsd http://www.springframework.org/schema/beans{566,30}].\ncom.sun.istack.SAXParseException2: Property &quot;Ref&quot; is already defined. Use &amp;lt;jaxb:property&gt; to resolve this conflict.\n    at com.sun.tools.xjc.ErrorReceiver.error (ErrorReceiver.java:56)\n[...]\n[ERROR] Error while parsing schema(s).Location [ http://www.springframework.org/schema/beans/spring-beans-3.1.xsd http://www.springframework.org/schema/beans{606,48}].\ncom.sun.istack.SAXParseException2: The following location is relevant to the above error\n</code></pre>\n<p>As you can see, the error is split in two parts, in order to know where the conflict is located. Here for example, you have the <code>ref</code> element that is declared twice in <code>spring-beans.xsd</code> (line 566 v. line 606).</p>\n<p>By looking at the xsd, you'll find that <code>constructor-arg</code> <code>xsd:element</code> has two <code>ref</code> declared, one as child <code>xsd:element</code> and another one as <code>xsd:attribute</code>, documented as <code>A short-cut alternative to a nested &quot;&lt;ref bean='...'/&gt;&quot; element.</code></p>\n<p>In the end, your configuration is good but you need to apply the <a href=\"https://stackoverflow.com/questions/4394134/jaxb-property-value-is-already-defined-use-jaxbproperty-to-resolve-this\">following trick</a> that was mentionned in the comments.</p>\n<p>Using the following <code>bindings.xjb</code> file, you should be able to generate your XSD :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;jaxb:bindings \n    version=&quot;2.1&quot;\n    xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\n    xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\n\n    &lt;jaxb:bindings xmlns:tns=&quot;http://www.springframework.org/schema/beans&quot; scd=&quot;x-schema::tns&quot;&gt;\n        &lt;jaxb:bindings scd=&quot;/tns:ref&quot;&gt;\n            &lt;jaxb:property name=&quot;refAttribute&quot;/&gt;\n        &lt;/jaxb:bindings&gt;\n        &lt;jaxb:bindings scd=&quot;/tns:value&quot;&gt;\n            &lt;jaxb:property name=&quot;valueAttribute&quot;/&gt;\n        &lt;/jaxb:bindings&gt;\n        &lt;jaxb:bindings scd=&quot;/tns:key&quot;&gt;\n            &lt;jaxb:property name=&quot;keyAttribute&quot;/&gt;\n        &lt;/jaxb:bindings&gt;\n    &lt;/jaxb:bindings&gt;\n    &lt;jaxb:bindings xmlns:tns=&quot;http://www.springframework.org/schema/context&quot; scd=&quot;x-schema::tns&quot;&gt;\n        &lt;jaxb:bindings scd=&quot;/tns:property-placeholder&quot;&gt;\n            &lt;jaxb:class name=&quot;org.springframework.schema.context.PropertyPlaceholderElement&quot;/&gt;\n        &lt;/jaxb:bindings&gt;\n    &lt;/jaxb:bindings&gt;\n&lt;/jaxb:bindings&gt;\n</code></pre>\n"}],"owner":{"account_id":333595,"reputation":103,"user_id":659527,"accept_rate":25,"display_name":"Ionut"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":303,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700524047,"creation_date":1658396847,"question_id":73064021,"body_markdown":"I&#39;m trying to revive a legacy project for my client. The project is pretty old and it uses the jaxb2-maven-plugin to generate some java classes from an xsd schema file.\r\n\r\n       &lt;plugin&gt;\r\n          &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n          &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.4&lt;/version&gt;\r\n          &lt;executions&gt;\r\n             &lt;execution&gt;\r\n                &lt;goals&gt;\r\n                   &lt;goal&gt;xjc&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n             &lt;/execution&gt;\r\n          &lt;/executions&gt;\r\n          &lt;configuration&gt;\r\n             &lt;sources&gt;\r\n                &lt;source&gt;src/main/resources/custom-api.xsd&lt;/source&gt;\r\n             &lt;/sources&gt;\r\n             &lt;packageName&gt;com.client&lt;/packageName&gt;\r\n             &lt;catalog&gt;src/main/resources/catalog.cat&lt;/catalog&gt;\r\n          &lt;/configuration&gt;\r\n       &lt;/plugin&gt;\r\n\r\nThe problem is the company doesn&#39;t allow any internet access - hence when I generate the code I get errors such as `java.net.UnknownHostException` saying that it cannot find `www.springframework.org`.\r\n\r\nSo I understand that the solution for this problem is to provide the xsd files locally - which I did, extracting them in a folder named `import` and I created also a `catalog.cat` file to rewrite the access to those xsd files to the `import` folder.\r\n\r\nThe `catalog.cat` file looks like this:\r\n\r\n```\r\nREWRITE_SYSTEM &quot;http://www.springframework.org/schema/beans/spring-beans-3.1.xsd&quot; &quot;import/spring-beans-3.1.xsd&quot;\r\nREWRITE_SYSTEM &quot;http://www.mulesoft.org/schema/mule/core/3.4/mule.xsd&quot; &quot;import/mule.xsd&quot;\r\nREWRITE_SYSTEM &quot;http://www.mulesoft.org/schema/mule/schemadoc/3.4/mule-schemadoc.xsd&quot; &quot;import/mule-schemadoc.xsd&quot;\r\nREWRITE_SYSTEM &quot;http://www.mulesoft.org/schema/mule/jms/current/mule-jms.xsd&quot; &quot;import/mule-jms.xsd&quot;\r\nREWRITE_SYSTEM &quot;http://www.springframework.org/schema/context/spring-context-3.1.xsd&quot; &quot;import/spring-context-3.1.xsd&quot;\r\nREWRITE_SYSTEM &quot;http://www.springframework.org/schema/tool/spring-tool-3.1.xsd&quot; &quot;import/spring-tool-3.1.xsd&quot;\r\n```\r\n\r\nUnfortunately I get some conflicts in `spring-beans.xsd`:\r\n\r\n```\r\ncom.sun.istack.SAXParseException2publicId: http://www.springframework.org/schema/beans; systemId: http://www.springframework.org/schema/beans/spring-beans-3.1.xsd; lineNumber: 566; columnNumber: 30; Property &quot;Ref&quot; is already defined. Use &amp;lt;jaxb:property&gt; to resolve this conflict.\r\n                at com.sun.tools.xjc.ErrorReceiver.error(ErrorReceiver.java:56)\r\n```\r\n\r\nI suspect that this happens because the xsd is loaded multiple times - probably being referenced by other xsd files. The usual way to get rid of such conflicts is to use a binding file, but I don&#39;t think this is the right thing to do considering that this is a third party xsd file.\r\n\r\nAn example of a sample project has been provided here: https://github.com/scutaru/sample-xjc\r\n\r\nAnybody knows how I can get rid of these conflicts ? ","title":"xsd conflict when using jaxb2-maven-plugin","body":"<p>I'm trying to revive a legacy project for my client. The project is pretty old and it uses the jaxb2-maven-plugin to generate some java classes from an xsd schema file.</p>\n<pre><code>   &lt;plugin&gt;\n      &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n      &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\n      &lt;version&gt;2.4&lt;/version&gt;\n      &lt;executions&gt;\n         &lt;execution&gt;\n            &lt;goals&gt;\n               &lt;goal&gt;xjc&lt;/goal&gt;\n            &lt;/goals&gt;\n         &lt;/execution&gt;\n      &lt;/executions&gt;\n      &lt;configuration&gt;\n         &lt;sources&gt;\n            &lt;source&gt;src/main/resources/custom-api.xsd&lt;/source&gt;\n         &lt;/sources&gt;\n         &lt;packageName&gt;com.client&lt;/packageName&gt;\n         &lt;catalog&gt;src/main/resources/catalog.cat&lt;/catalog&gt;\n      &lt;/configuration&gt;\n   &lt;/plugin&gt;\n</code></pre>\n<p>The problem is the company doesn't allow any internet access - hence when I generate the code I get errors such as <code>java.net.UnknownHostException</code> saying that it cannot find <code>www.springframework.org</code>.</p>\n<p>So I understand that the solution for this problem is to provide the xsd files locally - which I did, extracting them in a folder named <code>import</code> and I created also a <code>catalog.cat</code> file to rewrite the access to those xsd files to the <code>import</code> folder.</p>\n<p>The <code>catalog.cat</code> file looks like this:</p>\n<pre><code>REWRITE_SYSTEM &quot;http://www.springframework.org/schema/beans/spring-beans-3.1.xsd&quot; &quot;import/spring-beans-3.1.xsd&quot;\nREWRITE_SYSTEM &quot;http://www.mulesoft.org/schema/mule/core/3.4/mule.xsd&quot; &quot;import/mule.xsd&quot;\nREWRITE_SYSTEM &quot;http://www.mulesoft.org/schema/mule/schemadoc/3.4/mule-schemadoc.xsd&quot; &quot;import/mule-schemadoc.xsd&quot;\nREWRITE_SYSTEM &quot;http://www.mulesoft.org/schema/mule/jms/current/mule-jms.xsd&quot; &quot;import/mule-jms.xsd&quot;\nREWRITE_SYSTEM &quot;http://www.springframework.org/schema/context/spring-context-3.1.xsd&quot; &quot;import/spring-context-3.1.xsd&quot;\nREWRITE_SYSTEM &quot;http://www.springframework.org/schema/tool/spring-tool-3.1.xsd&quot; &quot;import/spring-tool-3.1.xsd&quot;\n</code></pre>\n<p>Unfortunately I get some conflicts in <code>spring-beans.xsd</code>:</p>\n<pre><code>com.sun.istack.SAXParseException2publicId: http://www.springframework.org/schema/beans; systemId: http://www.springframework.org/schema/beans/spring-beans-3.1.xsd; lineNumber: 566; columnNumber: 30; Property &quot;Ref&quot; is already defined. Use &amp;lt;jaxb:property&gt; to resolve this conflict.\n                at com.sun.tools.xjc.ErrorReceiver.error(ErrorReceiver.java:56)\n</code></pre>\n<p>I suspect that this happens because the xsd is loaded multiple times - probably being referenced by other xsd files. The usual way to get rid of such conflicts is to use a binding file, but I don't think this is the right thing to do considering that this is a third party xsd file.</p>\n<p>An example of a sample project has been provided here: <a href=\"https://github.com/scutaru/sample-xjc\" rel=\"nofollow noreferrer\">https://github.com/scutaru/sample-xjc</a></p>\n<p>Anybody knows how I can get rid of these conflicts ?</p>\n"},{"tags":["java","tomcat","openssl","keytool"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1700438429,"post_id":77512894,"comment_id":136651133,"body_markdown":"`-destkeystore mykeystore.jks -deststoretype pkcs12`: Here you are contradicting yourself. Most probably it should be `-destkeystore mykeystore.jks -deststoretype JKS`. Otherwise you could use the first keystore created by `openssl`, as long as `server.xml` knows that it&#39;s a pkcs12 keystore, not JKS.","body":"<code>-destkeystore mykeystore.jks -deststoretype pkcs12</code>: Here you are contradicting yourself. Most probably it should be <code>-destkeystore mykeystore.jks -deststoretype JKS</code>. Otherwise you could use the first keystore created by <code>openssl</code>, as long as <code>server.xml</code> knows that it&#39;s a pkcs12 keystore, not JKS."}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1700441128,"post_id":77512947,"comment_id":136651368,"body_markdown":"Tehcnically Tomcat has had PKCS#12 support since Java did.","body":"Tehcnically Tomcat has had PKCS#12 support since Java did."},{"owner":{"account_id":4871757,"reputation":39,"user_id":3927994,"accept_rate":0,"display_name":"Hector"},"score":0,"creation_date":1700445957,"post_id":77512947,"comment_id":136651746,"body_markdown":"Thank you guys for your response. I have tried using the .p12 file but it looks like it is not working","body":"Thank you guys for your response. I have tried using the .p12 file but it looks like it is not working"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1700461413,"post_id":77512947,"comment_id":136652904,"body_markdown":"(@user207421) PKCS12 was first published in 1999 and Java has supported it since at latest 1.4.1 in 2002, but Sun designed JKS and used it as the default because PKCS12 (normally) uses fairly strong encryption that in the 1990s couldn&#39;t be exported from the US or imported some other places, and Sun wanted Java used &#39;everywhere&#39;. (JKS used and still does deliberately weak encryption, although when the password is available in clear like with Tomcat this is moot; Oracle versions of Java since 2017 discourage JKS as &#39;proprietary&#39; without mentioning &#39;weak&#39;.)","body":"(@user207421) PKCS12 was first published in 1999 and Java has supported it since at latest 1.4.1 in 2002, but Sun designed JKS and used it as the default because PKCS12 (normally) uses fairly strong encryption that in the 1990s couldn&#39;t be exported from the US or imported some other places, and Sun wanted Java used &#39;everywhere&#39;. (JKS used and still does deliberately weak encryption, although when the password is available in clear like with Tomcat this is moot; Oracle versions of Java since 2017 discourage JKS as &#39;proprietary&#39; without mentioning &#39;weak&#39;.)"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1700461591,"post_id":77512947,"comment_id":136652920,"body_markdown":"@Hector: unless you&#39;re using OpenSSL &gt;=3.0 with certain slightly older versions of Java, in which case you get a clearly spurious exception about &quot;password was incorrect&quot; that can be searched on Stack in like 10 seconds, every Tomcat I have seen in decades works with a PKCS12 keystore if the keystore is valid to start with. If yours doesn&#39;t you must have done something wrong, but you&#39;ll have to fix it yourself because you give us no information at all to go on.","body":"@Hector: unless you&#39;re using OpenSSL &gt;=3.0 with certain slightly older versions of Java, in which case you get a clearly spurious exception about &quot;password was incorrect&quot; that can be searched on Stack in like 10 seconds, every Tomcat I have seen in decades works with a PKCS12 keystore if the keystore is valid to start with. If yours doesn&#39;t you must have done something wrong, but you&#39;ll have to fix it yourself because you give us no information at all to go on."},{"owner":{"account_id":4871757,"reputation":39,"user_id":3927994,"accept_rate":0,"display_name":"Hector"},"score":0,"creation_date":1700549912,"post_id":77512947,"comment_id":136665093,"body_markdown":"on the logs, i dont  get any error, not sure why it is not loading the certificate. I have check permission and everything seems to be okay. I have tested using PKCS12 with .pfx file and still not working.","body":"on the logs, i dont  get any error, not sure why it is not loading the certificate. I have check permission and everything seems to be okay. I have tested using PKCS12 with .pfx file and still not working."},{"owner":{"account_id":51881,"reputation":38016,"user_id":155020,"accept_rate":80,"display_name":"chubbsondubs"},"score":0,"creation_date":1700582265,"post_id":77512947,"comment_id":136670981,"body_markdown":"How are you determining that what you&#39;ve done is not working?  Tell us the symptoms.","body":"How are you determining that what you&#39;ve done is not working?  Tell us the symptoms."}],"tags":[],"owner":{"account_id":51881,"reputation":38016,"user_id":155020,"accept_rate":80,"display_name":"chubbsondubs"},"comment_count":6,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700438480,"creation_date":1700438480,"answer_id":77512947,"question_id":77512894,"body_markdown":"So you are doing too much.  You don&#39;t need to convert the key into JKS keystore.  JKS was Java&#39;s original keystore format that was a propriety format.  Since that time PKCS12 has emerged and Java finally supports that so I&#39;d recommend just using your p12 files, and configuring tomcat to read PKCS12 instead of trying to use JKS.\r\n\r\nBut, for a quick answer you&#39;re conversion routine from PKCS12 -&gt; JKS isn&#39;t saving a JKS file.  `-deststoretype pkcs12` should be `-deststoretype JKS`  However, we&#39;re going to do it for PKCS12 because that is the &quot;future&quot;.  Technically Tomcat has had PKCS12 support since 5.0, but future is the saying.\r\n\r\nAnyway here is how you can use the P12 cert in your setup in Tomcat.\r\n\r\n```\r\n&lt;Connector port=&quot;8443&quot; \r\n           protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; \r\n           SSLEnabled=&quot;true&quot;\r\n           maxThreads=&quot;150&quot;\r\n           scheme=&quot;https&quot;\r\n           secure=&quot;true&quot;\r\n           clientAuth=&quot;false&quot; \r\n           sslProtocol=&quot;TLS&quot; \r\n           keystoreFile=&quot;/your/path/certificate.p12&quot;\r\n           keystorePass=&quot;xxxxsomething_secretxxxxx&quot;\r\n           keystoreType=&quot;PKCS12&quot; /&gt;\r\n```","title":"How to set up an SSL certificate for Tomcat in Ubuntu","body":"<p>So you are doing too much.  You don't need to convert the key into JKS keystore.  JKS was Java's original keystore format that was a propriety format.  Since that time PKCS12 has emerged and Java finally supports that so I'd recommend just using your p12 files, and configuring tomcat to read PKCS12 instead of trying to use JKS.</p>\n<p>But, for a quick answer you're conversion routine from PKCS12 -&gt; JKS isn't saving a JKS file.  <code>-deststoretype pkcs12</code> should be <code>-deststoretype JKS</code>  However, we're going to do it for PKCS12 because that is the &quot;future&quot;.  Technically Tomcat has had PKCS12 support since 5.0, but future is the saying.</p>\n<p>Anyway here is how you can use the P12 cert in your setup in Tomcat.</p>\n<pre><code>&lt;Connector port=&quot;8443&quot; \n           protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; \n           SSLEnabled=&quot;true&quot;\n           maxThreads=&quot;150&quot;\n           scheme=&quot;https&quot;\n           secure=&quot;true&quot;\n           clientAuth=&quot;false&quot; \n           sslProtocol=&quot;TLS&quot; \n           keystoreFile=&quot;/your/path/certificate.p12&quot;\n           keystorePass=&quot;xxxxsomething_secretxxxxx&quot;\n           keystoreType=&quot;PKCS12&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":4871757,"reputation":39,"user_id":3927994,"accept_rate":0,"display_name":"Hector"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1700523894,"creation_date":1700436980,"question_id":77512894,"body_markdown":"I am using &lt;https://zerossl.com&gt; for the certificate, they provide me these files: \r\n\r\n - ca_bundle.crt  \r\n - certficate.crt \r\n - private.key\r\n\r\nThen I run these commands \r\n\r\nTo generate a p12 file \r\n\r\n    openssl pkcs12 -export -in certificate.crt -inkey private.key -out keystore.p12 -name tomcat -CAfile ca_bundle.crt -caname root -chain\r\n\r\nTo generate the JKS file\r\n\r\n    keytool -importkeystore -srckeystore certifcate.p12 -srcstoretype pkcs12 -destkeystore mykeystore.jks -deststoretype pkcs12\r\n\r\n\r\nThen I edit my /opt/tomcat/conf/server.xml\r\n\r\n```xml\r\n&lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot;\r\n   maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\r\n   keystoreFile=&quot;/path/to/your/keystore.jks&quot; keystorePass=&quot;your_keystore_password&quot;\r\n   keyAlias=&quot;tomcat&quot; keyPass=&quot;your_key_password&quot;\r\n   clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; /&gt;\r\n```\r\n\r\nI&#39;m not sure why the SSL certificate is not working. I would appreciate if someone tells me if I am missing something.\r\n\r\n","title":"How to set up an SSL certificate for Tomcat in Ubuntu","body":"<p>I am using <a href=\"https://zerossl.com\" rel=\"nofollow noreferrer\">https://zerossl.com</a> for the certificate, they provide me these files:</p>\n<ul>\n<li>ca_bundle.crt</li>\n<li>certficate.crt</li>\n<li>private.key</li>\n</ul>\n<p>Then I run these commands</p>\n<p>To generate a p12 file</p>\n<pre><code>openssl pkcs12 -export -in certificate.crt -inkey private.key -out keystore.p12 -name tomcat -CAfile ca_bundle.crt -caname root -chain\n</code></pre>\n<p>To generate the JKS file</p>\n<pre><code>keytool -importkeystore -srckeystore certifcate.p12 -srcstoretype pkcs12 -destkeystore mykeystore.jks -deststoretype pkcs12\n</code></pre>\n<p>Then I edit my /opt/tomcat/conf/server.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot;\n   maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\n   keystoreFile=&quot;/path/to/your/keystore.jks&quot; keystorePass=&quot;your_keystore_password&quot;\n   keyAlias=&quot;tomcat&quot; keyPass=&quot;your_key_password&quot;\n   clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; /&gt;\n</code></pre>\n<p>I'm not sure why the SSL certificate is not working. I would appreciate if someone tells me if I am missing something.</p>\n"},{"tags":["java","json","amazon-web-services","aws-lambda"],"comments":[{"owner":{"account_id":100740,"reputation":73227,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1700513152,"post_id":77518725,"comment_id":136661574,"body_markdown":"Related: https://stackoverflow.com/questions/55289606/json-key-with-blank-spaces-to-a-java-pojo","body":"Related: <a href=\"https://stackoverflow.com/questions/55289606/json-key-with-blank-spaces-to-a-java-pojo\" title=\"json key with blank spaces to a java pojo\">stackoverflow.com/questions/55289606/&hellip;</a>"},{"owner":{"account_id":25379518,"reputation":71,"user_id":20037774,"display_name":"Luis Felipe Gongora Garcia"},"score":0,"creation_date":1700513684,"post_id":77518725,"comment_id":136661656,"body_markdown":"In this case, using @JsonProperty is already working; the issue lies elsewhere in my situation.","body":"In this case, using @JsonProperty is already working; the issue lies elsewhere in my situation."},{"owner":{"account_id":100740,"reputation":73227,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1700516819,"post_id":77518725,"comment_id":136662130,"body_markdown":"Your Lambda function appears to be serializing, not deserializing. Is your issue that `objectMapper.writeValueAsString(event)` doesn&#39;t produce the desired result? If so, is `event` actually the thing you think it is or is the serialized data actually somewhere within the event, e.g. `event.body`?","body":"Your Lambda function appears to be serializing, not deserializing. Is your issue that <code>objectMapper.writeValueAsString(event)</code> doesn&#39;t produce the desired result? If so, is <code>event</code> actually the thing you think it is or is the serialized data actually somewhere within the event, e.g. <code>event.body</code>?"},{"owner":{"account_id":25379518,"reputation":71,"user_id":20037774,"display_name":"Luis Felipe Gongora Garcia"},"score":0,"creation_date":1700520663,"post_id":77518725,"comment_id":136662617,"body_markdown":"I try to convert the incoming JSON (input) into an object within my lambda, and this results in a null object. In this case, the event is the JSON that should be transformed into the object.","body":"I try to convert the incoming JSON (input) into an object within my lambda, and this results in a null object. In this case, the event is the JSON that should be transformed into the object."},{"owner":{"account_id":100740,"reputation":73227,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1700570784,"post_id":77518725,"comment_id":136668697,"body_markdown":"Need some clarification here. You said that the DetailedDescription field is not being properly populated during deserialization. By `DetailedDescription`, do you mean the `Description` field within `Detailed Information` or do you mean `Detailed Information` itself?","body":"Need some clarification here. You said that the DetailedDescription field is not being properly populated during deserialization. By <code>DetailedDescription</code>, do you mean the <code>Description</code> field within <code>Detailed Information</code> or do you mean <code>Detailed Information</code> itself?"}],"owner":{"account_id":25379518,"reputation":71,"user_id":20037774,"display_name":"Luis Felipe Gongora Garcia"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700523459,"creation_date":1700512394,"question_id":77518725,"body_markdown":"I am encountering an issue while deserializing a JSON object into a Java object within an AWS Lambda function when the JSON keys contain spaces. The JSON structure is as follows:\r\n```\r\n{\r\n  &quot;Detailed Information&quot;: {\r\n    &quot;Organization&quot;: &quot;string&quot;,\r\n    &quot;Client Full Name&quot;: &quot;string&quot;,\r\n    &quot;Corporate Name&quot;: &quot;string&quot;,\r\n    &quot;Description&quot;: &quot;string&quot;,\r\n    &quot;Contact Phone&quot;: &quot;string&quot;,\r\n    &quot;Email&quot;: &quot;string&quot;,\r\n    &quot;Name&quot;: &quot;string&quot;,\r\n    &quot;UF&quot;: &quot;string&quot;,\r\n    &quot;Order&quot;: &quot;string&quot;\r\n  }\r\n}\r\n```\r\nI have the corresponding Java classes with proper annotations, including @JsonProperty to handle the spaces in the keys. However, when I attempt to deserialize this JSON into a Java object within an AWS Lambda function, the Detailed Description field is consistently null.\r\n\r\nHere are my Java classes:\r\n```\r\n// Values class\r\n@Data\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class Values {\r\n    @JsonProperty(&quot;Detailed Information&quot;)\r\n    private DetailedInformation detailedInformation;\r\n}\r\n\r\n// DetailedInformation class\r\n@Data\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class DetailedInformation {\r\n    @JsonProperty(&quot;Organization&quot;)\r\n    private String organization;\r\n    // ... (other fields)\r\n}\r\n```\r\nHere is my main class:\r\n```\r\npackage br.com.invoke;\r\n\r\nimport br.com.invoke.model.DetailedInformation;\r\nimport br.com.invoke.model.Values;\r\nimport com.amazonaws.services.lambda.runtime.Context;\r\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport lombok.SneakyThrows;\r\nimport lombok.extern.log4j.Log4j2;\r\n\r\nimport javax.net.ssl.*;\r\nimport java.net.URI;\r\nimport java.net.http.HttpClient;\r\nimport java.net.http.HttpRequest;\r\nimport java.net.http.HttpResponse;\r\nimport java.security.KeyManagementException;\r\nimport java.security.NoSuchAlgorithmException;\r\nimport java.security.cert.CertificateException;\r\nimport java.security.cert.X509Certificate;\r\n\r\n@Log4j2\r\npublic class InvokeMyRestAPI implements RequestHandler&lt;Values, String&gt; {\r\n    @SneakyThrows\r\n    @Override\r\n    public String handleRequest(Values event, Context context) {\r\n        log.info(event);\r\n        try {\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n            String jsonString = objectMapper.writeValueAsString(event);\r\n\r\n            HttpRequest postRequest = HttpRequest.newBuilder()\r\n                    .uri(new URI(&quot;https://www.help-me.please.com&quot;))\r\n                    .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                    .POST(HttpRequest.BodyPublishers.ofString(jsonString))\r\n                    .build();\r\n\r\n            log.info(jsonString);\r\n\r\n            HttpClient httpClient = HttpClient.newBuilder().build();\r\n\r\n            HttpResponse&lt;String&gt; postResponse = httpClient.send(postRequest,\r\n                    HttpResponse.BodyHandlers.ofString());\r\n\r\n            String responseBody = postResponse.body();\r\n            log.info(&quot;Response from API: {}&quot;, responseBody);\r\n\r\n            return responseBody;\r\n\r\n        } catch (Exception e) {\r\n            log.error(&quot;Erro ao enviar a solicita&#231;&#227;o HTTP&quot;, e);\r\n            return e.getMessage();\r\n        }\r\n    }\r\n}\r\n```\r\nI have tried using @JsonProperty annotations, but the issue persists. Any insights into why the DetailedDescription field is not being properly populated during deserialization in the context of an AWS Lambda function would be greatly appreciated.","title":"When I try to deserialize my JSON with spaces in the keys into a Java object, it returns null","body":"<p>I am encountering an issue while deserializing a JSON object into a Java object within an AWS Lambda function when the JSON keys contain spaces. The JSON structure is as follows:</p>\n<pre><code>{\n  &quot;Detailed Information&quot;: {\n    &quot;Organization&quot;: &quot;string&quot;,\n    &quot;Client Full Name&quot;: &quot;string&quot;,\n    &quot;Corporate Name&quot;: &quot;string&quot;,\n    &quot;Description&quot;: &quot;string&quot;,\n    &quot;Contact Phone&quot;: &quot;string&quot;,\n    &quot;Email&quot;: &quot;string&quot;,\n    &quot;Name&quot;: &quot;string&quot;,\n    &quot;UF&quot;: &quot;string&quot;,\n    &quot;Order&quot;: &quot;string&quot;\n  }\n}\n</code></pre>\n<p>I have the corresponding Java classes with proper annotations, including @JsonProperty to handle the spaces in the keys. However, when I attempt to deserialize this JSON into a Java object within an AWS Lambda function, the Detailed Description field is consistently null.</p>\n<p>Here are my Java classes:</p>\n<pre><code>// Values class\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Values {\n    @JsonProperty(&quot;Detailed Information&quot;)\n    private DetailedInformation detailedInformation;\n}\n\n// DetailedInformation class\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class DetailedInformation {\n    @JsonProperty(&quot;Organization&quot;)\n    private String organization;\n    // ... (other fields)\n}\n</code></pre>\n<p>Here is my main class:</p>\n<pre><code>package br.com.invoke;\n\nimport br.com.invoke.model.DetailedInformation;\nimport br.com.invoke.model.Values;\nimport com.amazonaws.services.lambda.runtime.Context;\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport lombok.SneakyThrows;\nimport lombok.extern.log4j.Log4j2;\n\nimport javax.net.ssl.*;\nimport java.net.URI;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\nimport java.security.KeyManagementException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\n\n@Log4j2\npublic class InvokeMyRestAPI implements RequestHandler&lt;Values, String&gt; {\n    @SneakyThrows\n    @Override\n    public String handleRequest(Values event, Context context) {\n        log.info(event);\n        try {\n            ObjectMapper objectMapper = new ObjectMapper();\n            String jsonString = objectMapper.writeValueAsString(event);\n\n            HttpRequest postRequest = HttpRequest.newBuilder()\n                    .uri(new URI(&quot;https://www.help-me.please.com&quot;))\n                    .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                    .POST(HttpRequest.BodyPublishers.ofString(jsonString))\n                    .build();\n\n            log.info(jsonString);\n\n            HttpClient httpClient = HttpClient.newBuilder().build();\n\n            HttpResponse&lt;String&gt; postResponse = httpClient.send(postRequest,\n                    HttpResponse.BodyHandlers.ofString());\n\n            String responseBody = postResponse.body();\n            log.info(&quot;Response from API: {}&quot;, responseBody);\n\n            return responseBody;\n\n        } catch (Exception e) {\n            log.error(&quot;Erro ao enviar a solicitao HTTP&quot;, e);\n            return e.getMessage();\n        }\n    }\n}\n</code></pre>\n<p>I have tried using @JsonProperty annotations, but the issue persists. Any insights into why the DetailedDescription field is not being properly populated during deserialization in the context of an AWS Lambda function would be greatly appreciated.</p>\n"},{"tags":["python","java","machine-learning","data-modeling","h2o.ai"],"answers":[{"tags":[],"owner":{"account_id":27205034,"reputation":216,"user_id":20736722,"display_name":"Wendy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700523219,"creation_date":1700523219,"answer_id":77519516,"question_id":77504686,"body_markdown":"The correct link that you should use is here: https://docs.h2o.ai/h2o/latest-stable/h2o-docs/mojo-quickstart.html\r\n\r\n\r\nPlease follow it to generate your model and save it as a mojo.  You will have two files: yourModelMojoXXX.zip and h2o.genmodel.jar.\r\n\r\nDo not follow the java step in the link, they only teach you how to generate predict for one row of data at a time which is not what you are looking for.  Instead, follow this link: https://github.com/h2oai/h2o-3/issues/15935 and follow the steps listed in the issue.  That should allow you to call your mojo model with an input csv file and output the predictions in a csv file without having the h2o-3 cluster running.\r\n\r\nI hope this works for you.","title":"Load and run h2o MOJO model without H2O cluster","body":"<p>The correct link that you should use is here: <a href=\"https://docs.h2o.ai/h2o/latest-stable/h2o-docs/mojo-quickstart.html\" rel=\"nofollow noreferrer\">https://docs.h2o.ai/h2o/latest-stable/h2o-docs/mojo-quickstart.html</a></p>\n<p>Please follow it to generate your model and save it as a mojo.  You will have two files: yourModelMojoXXX.zip and h2o.genmodel.jar.</p>\n<p>Do not follow the java step in the link, they only teach you how to generate predict for one row of data at a time which is not what you are looking for.  Instead, follow this link: <a href=\"https://github.com/h2oai/h2o-3/issues/15935\" rel=\"nofollow noreferrer\">https://github.com/h2oai/h2o-3/issues/15935</a> and follow the steps listed in the issue.  That should allow you to call your mojo model with an input csv file and output the predictions in a csv file without having the h2o-3 cluster running.</p>\n<p>I hope this works for you.</p>\n"}],"owner":{"account_id":25519170,"reputation":1,"user_id":19309439,"display_name":"lvfmc85"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700523219,"creation_date":1700255828,"question_id":77504686,"body_markdown":"I have several models generated in h2o on Python. I saved them as mojo files (.zip and h2o-genmodel.jar) using the code:\r\n\r\n    H2O_Model.download_mojo(path=Model_Path, get_genmodel_jar=True)\r\n\r\nInside the zip files, there are 2 folders (&quot;domains&quot; and &quot;experimental&quot;) and a model.ini file, which has info regarding the models.\r\n\r\nI need to run those models in an old raspberry pi 2 to make predictions on some data provided inside CSV files. I can do it by running the models inside the h2o cluster using the following code:\r\n\r\n    #load H2O Model\r\n    h2o.init()\r\n\r\n    # Download the MOJO\r\n    mojo_path = model_mojo\r\n    imported_model = h2o.import_mojo(mojo_path)\r\n\r\n    # Run Model\r\n    new_observations = h2o.H2OFrame(df_prever)\r\n    predictions = imported_model.predict(new_observations)\r\n\r\n    # Save Results\r\n    predictions = predictions.as_data_frame(predictions)\r\n    data_results = pd.concat([df_prever, predictions], axis=1)\r\n    data_results = data_results.rename(columns={&quot;predict&quot; : &quot;Predicted_Values&quot;}) \r\n    data_results = data_results.infer_objects()\r\n    data_results.to_csv(&quot;./Data_Results.csv&quot;, sep=delimiter, decimal=decimal_sep, index=False)\r\n\r\nAnd I ended up with a CSV with the prediction results.\r\n\r\nThe problem is that the cluster takes a long time to start in a Raspberry Pi 2. I read that running the models without a cluster is possible, but I couldn&#39;t do it.\r\n\r\nI tried to run the models without starting the cluster with no success. I even tried to let a cluster open at the boot, but it didn&#39;t work, and every time I run a script to make predictions, the cluster starts and ends when the script finalizes.\r\n\r\nCan anyone please help me with that? My models are sorted; I have deep learning, XGboost, StackedEnsemble, GBM, etc.. I have regression, multi-class, and binary classification models, so a flexible way to deal with different models is much appreciated.\r\n\r\nBelow is the complete code I use to load the models with the h2o cluster.\r\n\r\n    import pandas as pd\r\n    from pandas import read_csv\r\n    import h2o\r\n\r\n    # User defined Variables\r\n\r\n    # Data file to make predictions\r\n    csv_file = &quot;Data.csv&quot;\r\n\r\n    # CSV parameters\r\n    delimiter=&quot;;&quot;\r\n    decimal_sep=&quot;,&quot;\r\n    encoding=&quot;ascii&quot;\r\n\r\n    # Model zip file\r\n    model_mojo=&quot;DeepLearning_grid_1_AutoML_1_20231116_204416_model_581.zip&quot;\r\n\r\n    # Load data\r\n    df_prever = read_csv(filepath_or_buffer = csv_file, sep=delimiter, decimal=decimal_sep, encoding=encoding)\r\n    df_prever = df_prever.reset_index(drop=True)\r\n\r\n    #load H2O Model\r\n    h2o.init()\r\n\r\n    # Import the MOJO file\r\n    mojo_path = model_mojo\r\n    imported_model = h2o.import_mojo(mojo_path)\r\n\r\n    # Run Model\r\n    new_observations = h2o.H2OFrame(df_prever)\r\n    predictions = imported_model.predict(new_observations)\r\n\r\n    # Save Results\r\n    predictions = predictions.as_data_frame(predictions)\r\n    data_results = pd.concat([df_prever, predictions], axis=1)\r\n    data_results = data_results.rename(columns={&quot;predict&quot; : &quot;Predicted_Values&quot;}) \r\n    data_results = data_results.infer_objects()\r\n    data_results.to_csv(&quot;./Data_Results.csv&quot;, sep=delimiter, decimal=decimal_sep, index=False)\r\n\r\n    # Close H2O\r\n    h2o.cluster().shutdown()\r\n\r\nI tried to call the model in Java (probably I did it wrong) using the h2o-genmodel.jar and the zip file, but it asks for a &quot;main&quot; file I don&#39;t have. I tried to let a cluster open.\r\nI read the following documentation:\r\n\r\n[h2o-docs/productionizing](https://docs.h2o.ai/h2o/latest-stable/h2o-docs/productionizing.html#step-2-compile-and-run-the-mojo)\r\n[h2o-docs/mojo-capabilities](https://docs.h2o.ai/h2o/latest-stable/h2o-docs/mojo-capabilities.html)\r\n[h2o-genmodel/javadoc](https://docs.h2o.ai/h2o/latest-stable/h2o-genmodel/javadoc/index.html)\r\n[Tutorial/mojo-resource](https://github.com/h2oai/h2o-tutorials/tree/f67765bc6c68c2058d4b2786d1bbc627d3b70539/tutorials%2Fmojo-resource)\r\n[examples/h2o_mojo](https://docs.seldon.io/projects/seldon-core/en/latest/examples/h2o_mojo.html)\r\n\r\n\r\n","title":"Load and run h2o MOJO model without H2O cluster","body":"<p>I have several models generated in h2o on Python. I saved them as mojo files (.zip and h2o-genmodel.jar) using the code:</p>\n<pre><code>H2O_Model.download_mojo(path=Model_Path, get_genmodel_jar=True)\n</code></pre>\n<p>Inside the zip files, there are 2 folders (&quot;domains&quot; and &quot;experimental&quot;) and a model.ini file, which has info regarding the models.</p>\n<p>I need to run those models in an old raspberry pi 2 to make predictions on some data provided inside CSV files. I can do it by running the models inside the h2o cluster using the following code:</p>\n<pre><code>#load H2O Model\nh2o.init()\n\n# Download the MOJO\nmojo_path = model_mojo\nimported_model = h2o.import_mojo(mojo_path)\n\n# Run Model\nnew_observations = h2o.H2OFrame(df_prever)\npredictions = imported_model.predict(new_observations)\n\n# Save Results\npredictions = predictions.as_data_frame(predictions)\ndata_results = pd.concat([df_prever, predictions], axis=1)\ndata_results = data_results.rename(columns={&quot;predict&quot; : &quot;Predicted_Values&quot;}) \ndata_results = data_results.infer_objects()\ndata_results.to_csv(&quot;./Data_Results.csv&quot;, sep=delimiter, decimal=decimal_sep, index=False)\n</code></pre>\n<p>And I ended up with a CSV with the prediction results.</p>\n<p>The problem is that the cluster takes a long time to start in a Raspberry Pi 2. I read that running the models without a cluster is possible, but I couldn't do it.</p>\n<p>I tried to run the models without starting the cluster with no success. I even tried to let a cluster open at the boot, but it didn't work, and every time I run a script to make predictions, the cluster starts and ends when the script finalizes.</p>\n<p>Can anyone please help me with that? My models are sorted; I have deep learning, XGboost, StackedEnsemble, GBM, etc.. I have regression, multi-class, and binary classification models, so a flexible way to deal with different models is much appreciated.</p>\n<p>Below is the complete code I use to load the models with the h2o cluster.</p>\n<pre><code>import pandas as pd\nfrom pandas import read_csv\nimport h2o\n\n# User defined Variables\n\n# Data file to make predictions\ncsv_file = &quot;Data.csv&quot;\n\n# CSV parameters\ndelimiter=&quot;;&quot;\ndecimal_sep=&quot;,&quot;\nencoding=&quot;ascii&quot;\n\n# Model zip file\nmodel_mojo=&quot;DeepLearning_grid_1_AutoML_1_20231116_204416_model_581.zip&quot;\n\n# Load data\ndf_prever = read_csv(filepath_or_buffer = csv_file, sep=delimiter, decimal=decimal_sep, encoding=encoding)\ndf_prever = df_prever.reset_index(drop=True)\n\n#load H2O Model\nh2o.init()\n\n# Import the MOJO file\nmojo_path = model_mojo\nimported_model = h2o.import_mojo(mojo_path)\n\n# Run Model\nnew_observations = h2o.H2OFrame(df_prever)\npredictions = imported_model.predict(new_observations)\n\n# Save Results\npredictions = predictions.as_data_frame(predictions)\ndata_results = pd.concat([df_prever, predictions], axis=1)\ndata_results = data_results.rename(columns={&quot;predict&quot; : &quot;Predicted_Values&quot;}) \ndata_results = data_results.infer_objects()\ndata_results.to_csv(&quot;./Data_Results.csv&quot;, sep=delimiter, decimal=decimal_sep, index=False)\n\n# Close H2O\nh2o.cluster().shutdown()\n</code></pre>\n<p>I tried to call the model in Java (probably I did it wrong) using the h2o-genmodel.jar and the zip file, but it asks for a &quot;main&quot; file I don't have. I tried to let a cluster open.\nI read the following documentation:</p>\n<p><a href=\"https://docs.h2o.ai/h2o/latest-stable/h2o-docs/productionizing.html#step-2-compile-and-run-the-mojo\" rel=\"nofollow noreferrer\">h2o-docs/productionizing</a>\n<a href=\"https://docs.h2o.ai/h2o/latest-stable/h2o-docs/mojo-capabilities.html\" rel=\"nofollow noreferrer\">h2o-docs/mojo-capabilities</a>\n<a href=\"https://docs.h2o.ai/h2o/latest-stable/h2o-genmodel/javadoc/index.html\" rel=\"nofollow noreferrer\">h2o-genmodel/javadoc</a>\n<a href=\"https://github.com/h2oai/h2o-tutorials/tree/f67765bc6c68c2058d4b2786d1bbc627d3b70539/tutorials%2Fmojo-resource\" rel=\"nofollow noreferrer\">Tutorial/mojo-resource</a>\n<a href=\"https://docs.seldon.io/projects/seldon-core/en/latest/examples/h2o_mojo.html\" rel=\"nofollow noreferrer\">examples/h2o_mojo</a></p>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"score":0,"creation_date":1495131796,"post_id":44055180,"comment_id":75135403,"body_markdown":"your approach of doing this piece of login in Aspect is right. But there is a small glitch. I don&#39;t think Spring validation would have kicked in by the time the control reaches your aspect. So BindingResult, will not have anything.","body":"your approach of doing this piece of login in Aspect is right. But there is a small glitch. I don&#39;t think Spring validation would have kicked in by the time the control reaches your aspect. So BindingResult, will not have anything."},{"owner":{"account_id":796110,"reputation":10035,"user_id":869225,"accept_rate":50,"display_name":"Martin Frey"},"score":1,"creation_date":1495132333,"post_id":44055180,"comment_id":75135716,"body_markdown":"If you dont have bindingresult as a parameter spring will automatically throw a bindingexception if I&#39;m not mistaken. As long as you dont do anything specific with the bindingresult this could be handled with an errorhandler in a global advice.","body":"If you dont have bindingresult as a parameter spring will automatically throw a bindingexception if I&#39;m not mistaken. As long as you dont do anything specific with the bindingresult this could be handled with an errorhandler in a global advice."}],"answers":[{"tags":[],"owner":{"account_id":9930956,"reputation":86,"user_id":7350955,"display_name":"derBobby"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700523022,"creation_date":1700523022,"answer_id":77519504,"question_id":44055180,"body_markdown":"This question is very old, yet an answer would have spared me a lot of time. Therefore:\r\n\r\nIn my Controller I have the `@Valid` annotation, the `BindingResult` is not necessary here:\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;String&gt; webHook(@Valid @RequestBody SomeDTO someDTO) {\r\n        ...\r\n    }\r\n\r\nAnd then I use a `@ControllerAdvice` to handle the error:\r\n\r\n    @ControllerAdvice\r\n    public class DtoValidationAdvice{\r\n\r\n        @ExceptionHandler(MethodArgumentNotValidException.class)\r\n        public ResponseEntity&lt;Map&lt;String, String&gt;&gt; handleValidationException(MethodArgumentNotValidException ex) {\r\n            Map&lt;String, String&gt; errors = new HashMap&lt;&gt;();\r\n            ex.getBindingResult().getAllErrors().forEach(error -&gt; {\r\n                String fieldName = ((FieldError) error).getField();\r\n                String errorMessage = error.getDefaultMessage();\r\n                errors.put(fieldName, errorMessage);\r\n            });\r\n\r\n            return ResponseEntity.badRequest().body(errors);\r\n        }\r\n    }\r\n\r\n    \r\n","title":"Move BindingResult check from Controller to Aspect or Interceptor","body":"<p>This question is very old, yet an answer would have spared me a lot of time. Therefore:</p>\n<p>In my Controller I have the <code>@Valid</code> annotation, the <code>BindingResult</code> is not necessary here:</p>\n<pre><code>@PostMapping\npublic ResponseEntity&lt;String&gt; webHook(@Valid @RequestBody SomeDTO someDTO) {\n    ...\n}\n</code></pre>\n<p>And then I use a <code>@ControllerAdvice</code> to handle the error:</p>\n<pre><code>@ControllerAdvice\npublic class DtoValidationAdvice{\n\n    @ExceptionHandler(MethodArgumentNotValidException.class)\n    public ResponseEntity&lt;Map&lt;String, String&gt;&gt; handleValidationException(MethodArgumentNotValidException ex) {\n        Map&lt;String, String&gt; errors = new HashMap&lt;&gt;();\n        ex.getBindingResult().getAllErrors().forEach(error -&gt; {\n            String fieldName = ((FieldError) error).getField();\n            String errorMessage = error.getDefaultMessage();\n            errors.put(fieldName, errorMessage);\n        });\n\n        return ResponseEntity.badRequest().body(errors);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3464860,"reputation":2008,"user_id":2900738,"accept_rate":48,"display_name":"Eric"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":491,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700523022,"creation_date":1495131481,"question_id":44055180,"body_markdown":"I have multiple multiple methods in my `Controller` and each one has a `ModelAttribute` with a `BindingResult` such as \r\n\r\n    @RequestMapping(value = &quot;/somewhere&quot;, method = RequestMethod.POST)\r\n    @ResponseBody\r\n    public SomeDTO someMethod(@Valid SomeModel someModel, BindingResult bindingResult, HttpServletRequest request,\r\n    \t\tHttpServletResponse response) {\r\n    \r\n    \tif (bindingResult.hasErrors()) {\r\n    \t\tthrow new InvalidRequestException(&quot;some error&quot;, bindingResult);\r\n    \t}\r\n    \r\n    \tSomeDTO someDTO = someService.doSomething(someModel);\r\n    \r\n    \treturn someDTO;\r\n    }\r\n\r\nI&#39;d like to DRY up my code a bit and put the `BindingResult` check in something like an `Aspect` or `Interceptor.` In other words, I don&#39;t want to do the following check in every method:\r\n\r\n\tif (bindingResult.hasErrors()) {\r\n\t\tthrow new InvalidRequestException(&quot;some error&quot;, bindingResult);\r\n\t}\r\n\r\nAnytime a method is called on a `@Controller` I want to check the `BindingResult` and if there is an error, then throw my custom `InvalidRequestException`. That way my Controllers don&#39;t need to do a check. \r\n\r\nMy initial thought was to have an aspect that checks for this:\r\n\r\npseudocode\r\n\r\n    @Before(&quot;@within(org.springframework.stereotype.Controller)&quot;)\r\n    public void myMethod( JoinPoint jp ) throws Throwable {\r\n    \r\n    \tSignature signature = jp.getSignature();\r\n    \tObject [] args = jp.getArgs();\r\n    \t\r\n    \tfor(Object arg : args){\r\n    \t\tif(arg instanceof BindingResult){\r\n    \t\t\tBindingResult br = (BindingResult) arg;\r\n    \t\t\tif(br.hasErrors()){\r\n    \t\t\t\tthrow new InvalidRequestException(&quot;Error...&quot;, br);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nBut I&#39;m not sure if this would be a good way to handle this or not. Is there an easier way to do this? Or something in Spring that can help do this?\r\n\r\nThe reasoning behind this is that I have a form that submits two different `ModelAttributes`. So every method has two `BindingResults` which makes the checking a bit larger and I actually do something like the following:\r\n\r\n\tif (br1.hasErrors() || br2.hasErrors()) {\r\n\t\tList&lt;Errors&gt; errors = new ArrayList&lt;Errors&gt;();\r\n\t\t\r\n\t\tif(br1.hasErrors()){\r\n\t\t\terrors.add(br1);\r\n\t\t}\r\n\t\t\r\n\t\tif(br2.hasErrors()){\r\n\t\t\terrors.add(br2);\r\n\t\t}\r\n\t\t\r\n\t\tthrow new InvalidRequestException(&quot;Error...&quot;, errors.toArray(new Errors[errors.size()]));\r\n\t}\r\n\r\nSo not having to do this check in every method would be nice.\r\n\r\n","title":"Move BindingResult check from Controller to Aspect or Interceptor","body":"<p>I have multiple multiple methods in my <code>Controller</code> and each one has a <code>ModelAttribute</code> with a <code>BindingResult</code> such as </p>\n\n<pre><code>@RequestMapping(value = \"/somewhere\", method = RequestMethod.POST)\n@ResponseBody\npublic SomeDTO someMethod(@Valid SomeModel someModel, BindingResult bindingResult, HttpServletRequest request,\n        HttpServletResponse response) {\n\n    if (bindingResult.hasErrors()) {\n        throw new InvalidRequestException(\"some error\", bindingResult);\n    }\n\n    SomeDTO someDTO = someService.doSomething(someModel);\n\n    return someDTO;\n}\n</code></pre>\n\n<p>I'd like to DRY up my code a bit and put the <code>BindingResult</code> check in something like an <code>Aspect</code> or <code>Interceptor.</code> In other words, I don't want to do the following check in every method:</p>\n\n<pre><code>if (bindingResult.hasErrors()) {\n    throw new InvalidRequestException(\"some error\", bindingResult);\n}\n</code></pre>\n\n<p>Anytime a method is called on a <code>@Controller</code> I want to check the <code>BindingResult</code> and if there is an error, then throw my custom <code>InvalidRequestException</code>. That way my Controllers don't need to do a check. </p>\n\n<p>My initial thought was to have an aspect that checks for this:</p>\n\n<p>pseudocode</p>\n\n<pre><code>@Before(\"@within(org.springframework.stereotype.Controller)\")\npublic void myMethod( JoinPoint jp ) throws Throwable {\n\n    Signature signature = jp.getSignature();\n    Object [] args = jp.getArgs();\n\n    for(Object arg : args){\n        if(arg instanceof BindingResult){\n            BindingResult br = (BindingResult) arg;\n            if(br.hasErrors()){\n                throw new InvalidRequestException(\"Error...\", br);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>But I'm not sure if this would be a good way to handle this or not. Is there an easier way to do this? Or something in Spring that can help do this?</p>\n\n<p>The reasoning behind this is that I have a form that submits two different <code>ModelAttributes</code>. So every method has two <code>BindingResults</code> which makes the checking a bit larger and I actually do something like the following:</p>\n\n<pre><code>if (br1.hasErrors() || br2.hasErrors()) {\n    List&lt;Errors&gt; errors = new ArrayList&lt;Errors&gt;();\n\n    if(br1.hasErrors()){\n        errors.add(br1);\n    }\n\n    if(br2.hasErrors()){\n        errors.add(br2);\n    }\n\n    throw new InvalidRequestException(\"Error...\", errors.toArray(new Errors[errors.size()]));\n}\n</code></pre>\n\n<p>So not having to do this check in every method would be nice.</p>\n"},{"tags":["java","singleton","lombok"],"answers":[{"comments":[{"owner":{"account_id":22389872,"reputation":39,"user_id":16602133,"display_name":"expelliarmus"},"score":0,"creation_date":1700410626,"post_id":77510210,"comment_id":136648264,"body_markdown":"I tried way that you explain but didn&#39;t work as expected","body":"I tried way that you explain but didn&#39;t work as expected"},{"owner":{"account_id":2818342,"reputation":299906,"user_id":2422776,"display_name":"Mureinik"},"score":0,"creation_date":1700414017,"post_id":77510210,"comment_id":136648671,"body_markdown":"@expelliarmus care to ellaborate?","body":"@expelliarmus care to ellaborate?"}],"tags":[],"owner":{"account_id":2818342,"reputation":299906,"user_id":2422776,"display_name":"Mureinik"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700384667,"creation_date":1700384667,"answer_id":77510210,"question_id":77510176,"body_markdown":"You can annotate your class with [`@EqualsAndHashCode`](https://projectlombok.org/features/EqualsAndHashCode):\r\n\r\n```java\r\n@Getter\r\n@Setter\r\n@EqualsAndHashCode\r\npublic class PaymentService {\r\n```","title":"how can we create the same hashcode value for 2 identical objects using lombok?","body":"<p>You can annotate your class with <a href=\"https://projectlombok.org/features/EqualsAndHashCode\" rel=\"nofollow noreferrer\"><code>@EqualsAndHashCode</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@EqualsAndHashCode\npublic class PaymentService {\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22389872,"reputation":39,"user_id":16602133,"display_name":"expelliarmus"},"score":0,"creation_date":1700410673,"post_id":77510668,"comment_id":136648271,"body_markdown":"I know that service1 and service2 have the same hash values when we manually implemen and override the equals and hashCode methods. But I want to do this through lombok, not manually.","body":"I know that service1 and service2 have the same hash values when we manually implemen and override the equals and hashCode methods. But I want to do this through lombok, not manually."},{"owner":{"account_id":29923834,"reputation":1,"user_id":22932333,"display_name":"Mat"},"score":0,"creation_date":1700519453,"post_id":77510668,"comment_id":136662475,"body_markdown":"You can use this annotation like @EqualsAndHashCode(of = {&quot;amount&quot;, &quot;paymentStatus&quot;})","body":"You can use this annotation like @EqualsAndHashCode(of = {&quot;amount&quot;, &quot;paymentStatus&quot;})"}],"tags":[],"owner":{"account_id":29923834,"reputation":1,"user_id":22932333,"display_name":"Mat"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700522907,"creation_date":1700395021,"answer_id":77510668,"question_id":77510176,"body_markdown":"The `@EqualsAndHashCode` annotation in Lombok generates `equals` and `hashCode` methods based on the fields in your class. In your case, since you have two different instances of `PaymentService` (service1 and service2), they have different field values, resulting in different hash codes.\r\n\r\nTo ensure that service1 and service2 have the same hash code when their values are the same, you can use it like `@EqualsAndHashCode(of = {&quot;amount&quot;, &quot;paymentStatus&quot;})`.","title":"how can we create the same hashcode value for 2 identical objects using lombok?","body":"<p>The <code>@EqualsAndHashCode</code> annotation in Lombok generates <code>equals</code> and <code>hashCode</code> methods based on the fields in your class. In your case, since you have two different instances of <code>PaymentService</code> (service1 and service2), they have different field values, resulting in different hash codes.</p>\n<p>To ensure that service1 and service2 have the same hash code when their values are the same, you can use it like <code>@EqualsAndHashCode(of = {&quot;amount&quot;, &quot;paymentStatus&quot;})</code>.</p>\n"},{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700424528,"creation_date":1700424528,"answer_id":77512315,"question_id":77510176,"body_markdown":"Everything with your question seems wrong.\r\n\r\nIt starts with the title:\r\n\r\n&gt; _how can we create the same hashcode value for 2 identical objects using lombok?_\r\n\r\nFirst: your code doesn&#39;t contain &quot;2 identical objects&quot;. You are using Spring singleton beans to create **one and only one** `PaymentService` object and your code therefore has **only one** `PaymentService` object. This object is referenced by the two fields `service1` and `service2`, **but there is only one object**.\r\n\r\nSecond: Lomboks `@EqualsAndHashCode` annotation was created for exactly this: create a `hashCode()` method that creates _the same hashcode value for 2 identical objects_. It does this by taking into account all the fields of the object.\r\n\r\nYour test code:\r\n\r\n    @Override\r\n    public void run(String... args) {\r\n        log.info(&quot;service1 hashcode &quot; + service1.hashCode());\r\n        service1.setAmount(100L);\r\n        service1.setPaymentStatus(&quot;success&quot;);\r\n        log.info(&quot;service2 hashcode &quot; + service2.hashCode());\r\n    }\r\n\r\nonly shows that if you change the fields of an object the hashcode for that object changes.\r\n\r\nSpecifically it cannot show that the hashcode from `service1` is different from the hashcode of `service2` (hint: they are not because **there is only one object**) because you change that object between the two calls and that just shows that the hashcode changes if the object changes.\r\n\r\nTo show that the hashcode for `service1` is different from the hashcode for `service2` **you must print** both hashcodes before changing the object (and you may want to print both hashcodes after changing the object):\r\n\r\n    @Override\r\n    public void run(String... args) {\r\n        log.info(&quot;hashcode before changing the object&quot;);\r\n        log.info(&quot;service1 hashcode &quot; + service1.hashCode());\r\n        log.info(&quot;service2 hashcode &quot; + service2.hashCode());\r\n        log.info(&quot;changing the object&quot;);\r\n        service1.setAmount(100L);\r\n        service1.setPaymentStatus(&quot;success&quot;);\r\n        log.info(&quot;hashcode after changing the object&quot;);\r\n        log.info(&quot;service1 hashcode &quot; + service1.hashCode());\r\n        log.info(&quot;service2 hashcode &quot; + service2.hashCode());\r\n    }\r\n\r\n---\r\n\r\n&gt; _When I use the @EqualsAndHashCode annotation top of the class, service1 and service2 hashcode values are output differently._\r\n\r\nYes, with your sample code the hashcode values are output differently - because between those two output **you modified the object by changing fields** and changing the fields leads to a different hashcode value.\r\n\r\nBut this is not because Lomboks `@EqualsAndHashCode` is broken - it is because your sample code (especially the part where you want to show that the hashcode changes) is broken.\r\n\r\n---\r\nYour sample code behaves in this way:\r\n\r\n* Your house is painted white \r\n* you take a picture of your house\r\n* you paint your house green\r\n* you take a picture of your house\r\n\r\nAnd then you ask someone &quot;why in the first picture is my house white when it is green in the second picture?&quot;\r\n\r\nWell it is because you painted your house green!?","title":"how can we create the same hashcode value for 2 identical objects using lombok?","body":"<p>Everything with your question seems wrong.</p>\n<p>It starts with the title:</p>\n<blockquote>\n<p><em>how can we create the same hashcode value for 2 identical objects using lombok?</em></p>\n</blockquote>\n<p>First: your code doesn't contain &quot;2 identical objects&quot;. You are using Spring singleton beans to create <strong>one and only one</strong> <code>PaymentService</code> object and your code therefore has <strong>only one</strong> <code>PaymentService</code> object. This object is referenced by the two fields <code>service1</code> and <code>service2</code>, <strong>but there is only one object</strong>.</p>\n<p>Second: Lomboks <code>@EqualsAndHashCode</code> annotation was created for exactly this: create a <code>hashCode()</code> method that creates <em>the same hashcode value for 2 identical objects</em>. It does this by taking into account all the fields of the object.</p>\n<p>Your test code:</p>\n<pre><code>@Override\npublic void run(String... args) {\n    log.info(&quot;service1 hashcode &quot; + service1.hashCode());\n    service1.setAmount(100L);\n    service1.setPaymentStatus(&quot;success&quot;);\n    log.info(&quot;service2 hashcode &quot; + service2.hashCode());\n}\n</code></pre>\n<p>only shows that if you change the fields of an object the hashcode for that object changes.</p>\n<p>Specifically it cannot show that the hashcode from <code>service1</code> is different from the hashcode of <code>service2</code> (hint: they are not because <strong>there is only one object</strong>) because you change that object between the two calls and that just shows that the hashcode changes if the object changes.</p>\n<p>To show that the hashcode for <code>service1</code> is different from the hashcode for <code>service2</code> <strong>you must print</strong> both hashcodes before changing the object (and you may want to print both hashcodes after changing the object):</p>\n<pre><code>@Override\npublic void run(String... args) {\n    log.info(&quot;hashcode before changing the object&quot;);\n    log.info(&quot;service1 hashcode &quot; + service1.hashCode());\n    log.info(&quot;service2 hashcode &quot; + service2.hashCode());\n    log.info(&quot;changing the object&quot;);\n    service1.setAmount(100L);\n    service1.setPaymentStatus(&quot;success&quot;);\n    log.info(&quot;hashcode after changing the object&quot;);\n    log.info(&quot;service1 hashcode &quot; + service1.hashCode());\n    log.info(&quot;service2 hashcode &quot; + service2.hashCode());\n}\n</code></pre>\n<hr />\n<blockquote>\n<p><em>When I use the @EqualsAndHashCode annotation top of the class, service1 and service2 hashcode values are output differently.</em></p>\n</blockquote>\n<p>Yes, with your sample code the hashcode values are output differently - because between those two output <strong>you modified the object by changing fields</strong> and changing the fields leads to a different hashcode value.</p>\n<p>But this is not because Lomboks <code>@EqualsAndHashCode</code> is broken - it is because your sample code (especially the part where you want to show that the hashcode changes) is broken.</p>\n<hr />\n<p>Your sample code behaves in this way:</p>\n<ul>\n<li>Your house is painted white</li>\n<li>you take a picture of your house</li>\n<li>you paint your house green</li>\n<li>you take a picture of your house</li>\n</ul>\n<p>And then you ask someone &quot;why in the first picture is my house white when it is green in the second picture?&quot;</p>\n<p>Well it is because you painted your house green!?</p>\n"}],"owner":{"account_id":22389872,"reputation":39,"user_id":16602133,"display_name":"expelliarmus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1700522907,"creation_date":1700383788,"question_id":77510176,"body_markdown":"I am trying the singleton design pattern. I know that service1 and service2 have the same hash values when we manually implements and overrides the equals and hashCode methods. But I want to do this through lombok, not manually. But I want hashcode values to be generated via Lombok. When I use the @EqualsAndHashCode annotation top of the class, service1 and service2 hashcode values are output differently. How can I ensure that the hash values of service1 and service2 are the same using Lombok? I used @EqualsAndHashCode but it didn&#39;t do what I wanted. I also used @EqualsAndHashCode.Include and it still didn&#39;t work.\r\n\r\n    @SpringBootApplication\r\n    @Slf4j\r\n    @RequiredArgsConstructor\r\n    public class DemoApplication implements CommandLineRunner {\r\n    \r\n        private final PaymentService service1;\r\n        private final PaymentService service2;\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(DemoApplication.class, args);\r\n        }\r\n    \r\n        @Override\r\n        public void run(String... args) {\r\n            log.info(&quot;service1 hashcode &quot; + service1.hashCode());\r\n            service1.setAmount(100L);\r\n            service1.setPaymentStatus(&quot;success&quot;);\r\n            log.info(&quot;service2 hashcode &quot; + service2.hashCode());\r\n            log.info(&quot;service2 amount &quot; + service2.getAmount());\r\n            log.info(&quot;service2 status &quot; + service2.getPaymentStatus());\r\n        }\r\n    }\r\n    \r\n    @Getter\r\n    @Setter\r\n    public class PaymentService {\r\n        private long amount;\r\n        private String paymentStatus;\r\n    }\r\n    \r\n    @Component\r\n    public class PaymentConfiguration {\r\n        @Bean\r\n        @Scope(value = &quot;singleton&quot;)\r\n        public PaymentService getPaymentService() {\r\n            return new PaymentService();\r\n        }\r\n    }","title":"how can we create the same hashcode value for 2 identical objects using lombok?","body":"<p>I am trying the singleton design pattern. I know that service1 and service2 have the same hash values when we manually implements and overrides the equals and hashCode methods. But I want to do this through lombok, not manually. But I want hashcode values to be generated via Lombok. When I use the @EqualsAndHashCode annotation top of the class, service1 and service2 hashcode values are output differently. How can I ensure that the hash values of service1 and service2 are the same using Lombok? I used @EqualsAndHashCode but it didn't do what I wanted. I also used @EqualsAndHashCode.Include and it still didn't work.</p>\n<pre><code>@SpringBootApplication\n@Slf4j\n@RequiredArgsConstructor\npublic class DemoApplication implements CommandLineRunner {\n\n    private final PaymentService service1;\n    private final PaymentService service2;\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n    @Override\n    public void run(String... args) {\n        log.info(&quot;service1 hashcode &quot; + service1.hashCode());\n        service1.setAmount(100L);\n        service1.setPaymentStatus(&quot;success&quot;);\n        log.info(&quot;service2 hashcode &quot; + service2.hashCode());\n        log.info(&quot;service2 amount &quot; + service2.getAmount());\n        log.info(&quot;service2 status &quot; + service2.getPaymentStatus());\n    }\n}\n\n@Getter\n@Setter\npublic class PaymentService {\n    private long amount;\n    private String paymentStatus;\n}\n\n@Component\npublic class PaymentConfiguration {\n    @Bean\n    @Scope(value = &quot;singleton&quot;)\n    public PaymentService getPaymentService() {\n        return new PaymentService();\n    }\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9869,"page":48,"page_size":100}
