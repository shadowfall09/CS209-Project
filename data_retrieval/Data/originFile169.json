{"items":[{"tags":["java","iso","apdu","iso-19794"],"answers":[{"comments":[{"owner":{"account_id":1076047,"reputation":138,"user_id":1074182,"display_name":"Tito"},"score":0,"creation_date":1635288888,"post_id":69710872,"comment_id":123256415,"body_markdown":"I use JMRTD for wap and unwrap secure message without issue. And the Chilean ID Card has Match On Card.  You know if i can obtain fingerprint image on doc  9303? i read specs and i don&#39;t found how i can obtain fingerprint image. Thanks!!","body":"I use JMRTD for wap and unwrap secure message without issue. And the Chilean ID Card has Match On Card.  You know if i can obtain fingerprint image on doc  9303? i read specs and i don&#39;t found how i can obtain fingerprint image. Thanks!!"},{"owner":{"account_id":22883167,"reputation":465,"user_id":17024479,"display_name":"nvf"},"score":0,"creation_date":1635422062,"post_id":69710872,"comment_id":123297036,"body_markdown":"Doc 9303 (7th ed) part 9 tells that &quot;the storage of the fingerprint image\nis mandatory to permit global interoperability&quot; and &quot;The storage of an associated template is optional at the discretion of the issuing State.&quot; So, storage of minutiae data is possible, but not garanteed. If card stores fingerprint data, it can be found in data group 3 (EF ID=0103). Access to DG3 is protected with Extended Access Control - EAC (see Doc 9303 7th ed, part 11). Actually, EAC is specified in BSI TR-03110.","body":"Doc 9303 (7th ed) part 9 tells that &quot;the storage of the fingerprint image is mandatory to permit global interoperability&quot; and &quot;The storage of an associated template is optional at the discretion of the issuing State.&quot; So, storage of minutiae data is possible, but not garanteed. If card stores fingerprint data, it can be found in data group 3 (EF ID=0103). Access to DG3 is protected with Extended Access Control - EAC (see Doc 9303 7th ed, part 11). Actually, EAC is specified in BSI TR-03110."}],"tags":[],"owner":{"account_id":22883167,"reputation":465,"user_id":17024479,"display_name":"nvf"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635176830,"creation_date":1635175926,"answer_id":69710872,"question_id":69698977,"body_markdown":"Usually error SW=6987 means that your secure channel protocol is not implemented correctly. For example, secured case 3 command should contain DO 87 (87-L-01-encrypted data) and DO 8E (8E-L-MAC). If you don&#39;t put DO 8E in the end of secured APDU data field, you&#39;ll have error &quot;Expected secure messaging DOs missing&quot;.\r\nBy the way, Doc 9303 compliant cards don&#39;t store minutiae data. They store fingerprint image.","title":"Error 69 87 when do APDU verify instruction with biometric","body":"<p>Usually error SW=6987 means that your secure channel protocol is not implemented correctly. For example, secured case 3 command should contain DO 87 (87-L-01-encrypted data) and DO 8E (8E-L-MAC). If you don't put DO 8E in the end of secured APDU data field, you'll have error &quot;Expected secure messaging DOs missing&quot;.\nBy the way, Doc 9303 compliant cards don't store minutiae data. They store fingerprint image.</p>\n"}],"owner":{"account_id":1076047,"reputation":138,"user_id":1074182,"display_name":"Tito"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":326,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695397065,"creation_date":1635095016,"question_id":69698977,"body_markdown":"I&#39;m doing a fingerprint verification process with a Chilean ID card.\r\nIt compliant with:\r\nICAO 9303 Part 3, Volume 2\r\n• ICAO Technical Report LDS 1.7\r\n• IAS ECC v1.0.1 specification\r\n• ISO 14443, Type B\r\n• ISO 7810\r\n• ISO 7816-15\r\n• ISO 19794-2 \r\n• ISO 19794-5 \r\n• Java Card 2.2.2\r\n• Global Platform 2.1.1 \r\n\r\n It have Match On Card fingerprint verification.\r\n\r\nIt use iso 19794-2:2005 smart card.\r\nI convert minutiae from ANSI 378 TO iso 19794-2:2005 smart card.\r\nI did all process of security, challenger, mutual authentication, etc.\r\nBut when i send a encrypt APDU with INS 21 ( verify) I have this return message:\r\n69 87 : Expected secure messaging (SM) object missing. I don&#39;t know what mean because when we sent unencrypted message it return 69 88, and we check that enc key, mac , etc are ok.\r\nAnyone can help to discovery what mean?\r\nwe did try with different APDU ( with code 20,21, with tag 81 and 95, etc)\r\nThis is the last APU that we are using:\r\n\r\n 00210000BE7F2EBB81B4600b5c1f33800b082e334150087240411109720d991130c00d032e30412a033b40411b0c3b12a11b4140120f2e4141220f314041101031178110184017022e18413902520041111752229c112a8022082e2a4160082e40410e202e2ea10e3c402e0e173c205b0e264020062226304306144030052e144140055b00411a255b359c1a3d8035082e3d414f087140410f2c713f9a0f44c03f041744207304494020082d49405f084b80400b174b21420b04402104329503080910\r\n\r\nThanks!!\r\n\r\n\r\n\r\n","title":"Error 69 87 when do APDU verify instruction with biometric","body":"<p>I'm doing a fingerprint verification process with a Chilean ID card.\nIt compliant with:\nICAO 9303 Part 3, Volume 2\n• ICAO Technical Report LDS 1.7\n• IAS ECC v1.0.1 specification\n• ISO 14443, Type B\n• ISO 7810\n• ISO 7816-15\n• ISO 19794-2\n• ISO 19794-5\n• Java Card 2.2.2\n• Global Platform 2.1.1</p>\n<p>It have Match On Card fingerprint verification.</p>\n<p>It use iso 19794-2:2005 smart card.\nI convert minutiae from ANSI 378 TO iso 19794-2:2005 smart card.\nI did all process of security, challenger, mutual authentication, etc.\nBut when i send a encrypt APDU with INS 21 ( verify) I have this return message:\n69 87 : Expected secure messaging (SM) object missing. I don't know what mean because when we sent unencrypted message it return 69 88, and we check that enc key, mac , etc are ok.\nAnyone can help to discovery what mean?\nwe did try with different APDU ( with code 20,21, with tag 81 and 95, etc)\nThis is the last APU that we are using:</p>\n<p>00210000BE7F2EBB81B4600b5c1f33800b082e334150087240411109720d991130c00d032e30412a033b40411b0c3b12a11b4140120f2e4141220f314041101031178110184017022e18413902520041111752229c112a8022082e2a4160082e40410e202e2ea10e3c402e0e173c205b0e264020062226304306144030052e144140055b00411a255b359c1a3d8035082e3d414f087140410f2c713f9a0f44c03f041744207304494020082d49405f084b80400b174b21420b04402104329503080910</p>\n<p>Thanks!!</p>\n"},{"tags":["java","mysql","uuid"],"comments":[{"owner":{"account_id":369687,"reputation":56616,"user_id":717214,"accept_rate":86,"display_name":"Aleks G"},"score":1,"creation_date":1397638969,"post_id":23104610,"comment_id":35316679,"body_markdown":"Why not just have `integer auto_increment` field and use it for default sorting?","body":"Why not just have <code>integer auto_increment</code> field and use it for default sorting?"},{"owner":{"account_id":1573273,"reputation":3033,"user_id":1460467,"accept_rate":88,"display_name":"Alexandre Jacob"},"score":0,"creation_date":1397639575,"post_id":23104610,"comment_id":35317034,"body_markdown":"For research purpose I&#39;d like to be completely free from database generated values (so no `auto_increment`)","body":"For research purpose I&#39;d like to be completely free from database generated values (so no <code>auto_increment</code>)"},{"owner":{"account_id":36208,"reputation":240326,"user_id":103154,"display_name":"axtavt"},"score":0,"creation_date":1397639743,"post_id":23104610,"comment_id":35317147,"body_markdown":"Can&#39;t you just sort by `created_at`?","body":"Can&#39;t you just sort by <code>created_at</code>?"},{"owner":{"account_id":22149,"reputation":2417,"user_id":54376,"accept_rate":90,"display_name":"Mike"},"score":4,"creation_date":1397639817,"post_id":23104610,"comment_id":35317197,"body_markdown":"UUIDs aren&#39;t designed to be ordered. If you want to select based on insertion order you need to order based on created_by.","body":"UUIDs aren&#39;t designed to be ordered. If you want to select based on insertion order you need to order based on created_by."},{"owner":{"account_id":1573273,"reputation":3033,"user_id":1460467,"accept_rate":88,"display_name":"Alexandre Jacob"},"score":0,"creation_date":1397640112,"post_id":23104610,"comment_id":35317401,"body_markdown":"Why not working with my `created_at` column but in it&#39;s current form it isn&#39;t precise enough (there are duplicates) how could I deal with it ?","body":"Why not working with my <code>created_at</code> column but in it&#39;s current form it isn&#39;t precise enough (there are duplicates) how could I deal with it ?"},{"owner":{"account_id":989600,"reputation":30745,"user_id":1007273,"display_name":"hovanessyan"},"score":1,"creation_date":1397643644,"post_id":23104610,"comment_id":35319869,"body_markdown":"@AlexandreJacob why would you need to have ordered inserts?","body":"@AlexandreJacob why would you need to have ordered inserts?"},{"owner":{"account_id":1573273,"reputation":3033,"user_id":1460467,"accept_rate":88,"display_name":"Alexandre Jacob"},"score":0,"creation_date":1397645791,"post_id":23104610,"comment_id":35321294,"body_markdown":"Ah good question, I want to fetch X rows that come before row id Y ordered by `id desc`. Now I&#39;m starting to think that I can do otherwise ...","body":"Ah good question, I want to fetch X rows that come before row id Y ordered by <code>id desc</code>. Now I&#39;m starting to think that I can do otherwise ..."}],"answers":[{"tags":[],"owner":{"account_id":1428213,"reputation":729,"user_id":1831702,"display_name":"Pranab Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1447649669,"creation_date":1447649669,"answer_id":33728751,"question_id":23104610,"body_markdown":"Please see this link \r\nhttps://www.percona.com/blog/2014/12/19/store-uuid-optimized-way/\r\n\r\nHere the author rearranged the UUID to make it sequential, for this he created one MySQL user defined function.","title":"How to maintain insertion order using UUID","body":"<p>Please see this link \n<a href=\"https://www.percona.com/blog/2014/12/19/store-uuid-optimized-way/\" rel=\"nofollow\">https://www.percona.com/blog/2014/12/19/store-uuid-optimized-way/</a></p>\n\n<p>Here the author rearranged the UUID to make it sequential, for this he created one MySQL user defined function.</p>\n"},{"tags":[],"owner":{"account_id":1053260,"reputation":1032,"user_id":1056610,"display_name":"fabiolimace"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1695397031,"creation_date":1594088677,"answer_id":62767227,"question_id":23104610,"body_markdown":"Today there&#39;s a proposal to a new version that keeps the byte order of the timestamp, the version 6.\r\n\r\nIf you want to create a UUIDv6 by yourself, first generate a UUIDv1 and chenge the byte order this way:\r\n\r\n```\r\nFrom: aaaaaaaa-bbbb-1ccc-dddd-eeeeeeeeeeee (time-based, version 1)\r\nTo:   cccbbbba-aaaa-6aaa-dddd-eeeeeeeeeeee (time-ordered, version 6)\r\n```\r\n\r\nIf you want a library that already does it, you may use `uuid-creator`, assuming you are coding in Java. Example:\r\n\r\n```java\r\n// Generate a UUIDv6\r\nUUID uuid = UuidCreator.getTimeOrdered();\r\n```\r\n\r\nProject on github: https://github.com/f4b6a3/uuid-creator\r\n\r\nIf you are coding in PHP, you can use a library from Ben Ramsey. I think it was the first project to implement UUIDv6:\r\n\r\nProject on github: https://github.com/ramsey/uuid\r\n\r\n---\r\n**Disclaimer**: I&#39;m the main contributor of `uuid-creator`.","title":"How to maintain insertion order using UUID","body":"<p>Today there's a proposal to a new version that keeps the byte order of the timestamp, the version 6.</p>\n<p>If you want to create a UUIDv6 by yourself, first generate a UUIDv1 and chenge the byte order this way:</p>\n<pre><code>From: aaaaaaaa-bbbb-1ccc-dddd-eeeeeeeeeeee (time-based, version 1)\nTo:   cccbbbba-aaaa-6aaa-dddd-eeeeeeeeeeee (time-ordered, version 6)\n</code></pre>\n<p>If you want a library that already does it, you may use <code>uuid-creator</code>, assuming you are coding in Java. Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Generate a UUIDv6\nUUID uuid = UuidCreator.getTimeOrdered();\n</code></pre>\n<p>Project on github: <a href=\"https://github.com/f4b6a3/uuid-creator\" rel=\"nofollow noreferrer\">https://github.com/f4b6a3/uuid-creator</a></p>\n<p>If you are coding in PHP, you can use a library from Ben Ramsey. I think it was the first project to implement UUIDv6:</p>\n<p>Project on github: <a href=\"https://github.com/ramsey/uuid\" rel=\"nofollow noreferrer\">https://github.com/ramsey/uuid</a></p>\n<hr />\n<p><strong>Disclaimer</strong>: I'm the main contributor of <code>uuid-creator</code>.</p>\n"}],"owner":{"account_id":1573273,"reputation":3033,"user_id":1460467,"accept_rate":88,"display_name":"Alexandre Jacob"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17192,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":2,"score":14,"last_activity_date":1695397031,"creation_date":1397638781,"question_id":23104610,"body_markdown":"On a pet project I started to work with UUIDs.\r\nThe application is fairly simple, it adds data in a MySQL database with `binary(16)` primary keys.\r\n\r\nTo generate PK&#39;s I&#39;m using [JUG][1] this way :\r\n\r\n`UUID uuid = Generators.timeBasedGenerator().generate();`\r\n\r\nThen I convert it to a byte array :\r\n\r\n`byte[] b = UUIDUtil.asByteArray(uuid);`\r\n\r\nThe problem now is that I have no idea on the insertion order of my rows.\r\nIf I sort my rows by the ID some recent rows comes before older rows (according to a `DATETIME` field)\r\n\r\nWhat should I do to be able to keep the insertion order of my rows (for sorting purpose) ?\r\n\r\nIllustration of the problem, UUIDs are sorted ASC, I&#39;m expecting created_at being in the same order.\r\n\r\n`select hex(id), created_at from myTable order by id`\r\n\r\n\t+----------------------------------+---------------------+\r\n\t| hex(id)                          | created_at          |\r\n\t+----------------------------------+---------------------+\r\n\t| 0913FF1FC53911E39D8D6F7C246EE143 | 2014-04-16 09:30:50 |\r\n\t| 09378CB1C53911E39D8DD94CAEA8D23F | 2014-04-16 09:30:50 |\r\n\t| 094A9F83C53911E39D8DDF087D0ED31A | 2014-04-16 09:30:51 |\r\n\t| 0CBE40D5C0B711E38172B9CB0C485EE3 | 2014-04-10 15:50:17 |\r\n\t| 0CBF5247C0B711E3817277CAF5E1D5B5 | 2014-04-10 15:50:17 |\r\n\t| 0CC03CA9C0B711E381721BA12057F9E2 | 2014-04-10 15:50:17 |\r\n\t| 0CC14E1BC0B711E381720505D5FFDCD3 | 2014-04-10 15:50:17 |\r\n\t| 0CC2387DC0B711E38172F9A6B29EB613 | 2014-04-10 15:50:17 |\r\n\t| 0CC349EFC0B711E381723D1DB8515E3F | 2014-04-10 15:50:17 |\r\n\t| 0CC43451C0B711E3817257D8AFFD09B8 | 2014-04-10 15:50:17 |\r\n\t| 0CC545C3C0B711E381729B3CB87CD707 | 2014-04-10 15:50:17 |\r\n\t| 0CC8C835C0B711E38172CDA11992F9BC | 2014-04-10 15:50:17 |\r\n\t| 0E33A6B5C08B11E396829782BD5365D2 | 2014-04-10 10:35:22 |\r\n\t| 0E368CE7C08B11E39682A9F63D5EF0E6 | 2014-04-10 10:35:22 |\r\n\t| 0E383A99C08B11E396825D6048BFC696 | 2014-04-10 10:35:22 |\r\n\t| 128DD6C5C53911E39D8D7577DB523A2C | 2014-04-16 09:31:06 |\r\n\t+----------------------------------+---------------------+\r\n\r\n**EDIT**\r\n\r\nJust to clarify, I of course know and am used to `auto_increment` PK&#39;s, I just wanted to see how it was achievable to work without them. (In case it is !)\r\n\r\n  [1]: http://wiki.fasterxml.com/JugHome","title":"How to maintain insertion order using UUID","body":"<p>On a pet project I started to work with UUIDs.\nThe application is fairly simple, it adds data in a MySQL database with <code>binary(16)</code> primary keys.</p>\n\n<p>To generate PK's I'm using <a href=\"http://wiki.fasterxml.com/JugHome\" rel=\"noreferrer\">JUG</a> this way :</p>\n\n<p><code>UUID uuid = Generators.timeBasedGenerator().generate();</code></p>\n\n<p>Then I convert it to a byte array :</p>\n\n<p><code>byte[] b = UUIDUtil.asByteArray(uuid);</code></p>\n\n<p>The problem now is that I have no idea on the insertion order of my rows.\nIf I sort my rows by the ID some recent rows comes before older rows (according to a <code>DATETIME</code> field)</p>\n\n<p>What should I do to be able to keep the insertion order of my rows (for sorting purpose) ?</p>\n\n<p>Illustration of the problem, UUIDs are sorted ASC, I'm expecting created_at being in the same order.</p>\n\n<p><code>select hex(id), created_at from myTable order by id</code></p>\n\n<pre><code>+----------------------------------+---------------------+\n| hex(id)                          | created_at          |\n+----------------------------------+---------------------+\n| 0913FF1FC53911E39D8D6F7C246EE143 | 2014-04-16 09:30:50 |\n| 09378CB1C53911E39D8DD94CAEA8D23F | 2014-04-16 09:30:50 |\n| 094A9F83C53911E39D8DDF087D0ED31A | 2014-04-16 09:30:51 |\n| 0CBE40D5C0B711E38172B9CB0C485EE3 | 2014-04-10 15:50:17 |\n| 0CBF5247C0B711E3817277CAF5E1D5B5 | 2014-04-10 15:50:17 |\n| 0CC03CA9C0B711E381721BA12057F9E2 | 2014-04-10 15:50:17 |\n| 0CC14E1BC0B711E381720505D5FFDCD3 | 2014-04-10 15:50:17 |\n| 0CC2387DC0B711E38172F9A6B29EB613 | 2014-04-10 15:50:17 |\n| 0CC349EFC0B711E381723D1DB8515E3F | 2014-04-10 15:50:17 |\n| 0CC43451C0B711E3817257D8AFFD09B8 | 2014-04-10 15:50:17 |\n| 0CC545C3C0B711E381729B3CB87CD707 | 2014-04-10 15:50:17 |\n| 0CC8C835C0B711E38172CDA11992F9BC | 2014-04-10 15:50:17 |\n| 0E33A6B5C08B11E396829782BD5365D2 | 2014-04-10 10:35:22 |\n| 0E368CE7C08B11E39682A9F63D5EF0E6 | 2014-04-10 10:35:22 |\n| 0E383A99C08B11E396825D6048BFC696 | 2014-04-10 10:35:22 |\n| 128DD6C5C53911E39D8D7577DB523A2C | 2014-04-16 09:31:06 |\n+----------------------------------+---------------------+\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Just to clarify, I of course know and am used to <code>auto_increment</code> PK's, I just wanted to see how it was achievable to work without them. (In case it is !)</p>\n"},{"tags":["java","postgresql","ssl"],"comments":[{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":1,"creation_date":1464015397,"post_id":37394078,"comment_id":62297350,"body_markdown":"Post your Java code.  Are you setting the connection properties for SSL?   See https://jdbc.postgresql.org/documentation/head/connect.html","body":"Post your Java code.  Are you setting the connection properties for SSL?   See <a href=\"https://jdbc.postgresql.org/documentation/head/connect.html\" rel=\"nofollow noreferrer\">jdbc.postgresql.org/documentation/head/connect.html</a>"},{"owner":{"account_id":248044,"reputation":16466,"user_id":523168,"accept_rate":77,"display_name":"Valter Silva"},"score":0,"creation_date":1464015767,"post_id":37394078,"comment_id":62297559,"body_markdown":"@AndrewHenle yes, I have set the properties for this connection on a file. I have edited my question. I&#39;m calling my database via `maven` to build my application which access my database in order to do some tests.","body":"@AndrewHenle yes, I have set the properties for this connection on a file. I have edited my question. I&#39;m calling my database via <code>maven</code> to build my application which access my database in order to do some tests."},{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":1,"creation_date":1464016991,"post_id":37394078,"comment_id":62298344,"body_markdown":"Assuming your connected works without SSL enabled, can you set `-Djavax.net.debug=all` in MAVEN_OPTS to get Java connection debugging data?  See http://stackoverflow.com/questions/2007192/maven-jetty-plugin-how-to-control-vm-arguments  (I&#39;m no Maven guru...)","body":"Assuming your connected works without SSL enabled, can you set <code>-Djavax.net.debug=all</code> in MAVEN_OPTS to get Java connection debugging data?  See <a href=\"http://stackoverflow.com/questions/2007192/maven-jetty-plugin-how-to-control-vm-arguments\" title=\"maven jetty plugin how to control vm arguments\">stackoverflow.com/questions/2007192/&hellip;</a>  (I&#39;m no Maven guru...)"}],"answers":[{"comments":[{"owner":{"account_id":5835327,"reputation":968,"user_id":4598583,"accept_rate":57,"display_name":"Graham Leggett"},"score":3,"creation_date":1513706293,"post_id":43710113,"comment_id":82751853,"body_markdown":"The &quot;org.postgresql.ssl.NonValidatingFactory&quot; factory bypasses all SSL certificate validation, making the SSL connection pointless.","body":"The &quot;org.postgresql.ssl.NonValidatingFactory&quot; factory bypasses all SSL certificate validation, making the SSL connection pointless."},{"owner":{"account_id":2502149,"reputation":12737,"user_id":2176962,"accept_rate":67,"display_name":"hgoebl"},"score":1,"creation_date":1530032404,"post_id":43710113,"comment_id":89087196,"body_markdown":"Not sure whether `&amp;amp;` is correct or necessary. For me, it works with just `&amp;`.","body":"Not sure whether <code>&amp;amp;</code> is correct or necessary. For me, it works with just <code>&amp;</code>."}],"tags":[],"owner":{"account_id":198788,"reputation":6200,"user_id":443664,"accept_rate":97,"display_name":"Dexter"},"comment_count":2,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1540748117,"creation_date":1493578287,"answer_id":43710113,"question_id":37394078,"body_markdown":"Need a keystore too I believe. Since ssl=true should require a private key for your self-signed cert. I also would add &quot;nonValidating SSLFactory&quot; setting \r\n\r\n    ?ssl=true&amp;sslfactory=org.postgresql.ssl.NonValidatingFactory\r\n\r\nAlso your port setting for `server_name:1234` does not match `5432`. \r\n\r\n`&quot;parseUrl&quot;` is a null error, maybe there&#39;s a variable somewhere in the JDBC url that is incorrectly set.","title":"How to connect with PostgreSQL database over SSL?","body":"<p>Need a keystore too I believe. Since ssl=true should require a private key for your self-signed cert. I also would add \"nonValidating SSLFactory\" setting </p>\n\n<pre><code>?ssl=true&amp;sslfactory=org.postgresql.ssl.NonValidatingFactory\n</code></pre>\n\n<p>Also your port setting for <code>server_name:1234</code> does not match <code>5432</code>. </p>\n\n<p><code>\"parseUrl\"</code> is a null error, maybe there's a variable somewhere in the JDBC url that is incorrectly set.</p>\n"},{"tags":[],"owner":{"account_id":4437257,"reputation":129,"user_id":3612771,"accept_rate":75,"display_name":"D V Santhosh Kiran"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1570143667,"creation_date":1570143667,"answer_id":58227927,"question_id":37394078,"body_markdown":"    url=jdbc:postgresql://&lt;host_url_or_ip&gt;:&lt;port&gt;/&lt;db_name&gt;?currentSchema=&lt;schema_name&gt;&amp;sslmode=verify-ca&amp;sslfactory=org.postgresql.ssl.DefaultJavaSSLFactory\r\n\r\nNote: if `schema_name` is `public`, it is not required. But port even if is default i.e. 5432, you have to provide it.\r\n\r\nFor sslmode values ref: https://jdbc.postgresql.org/documentation/head/ssl-client.html\r\nset `sslfactory=org.postgresql.ssl.DefaultJavaSSLFactory` to enable validation. \r\n\r\nFor non-validating ssl connection,  you can use `sslfactory=org.postgresql.ssl.NonValidatingFactory`\r\n\r\nBut remember, once you enable SSL validation, it may require a root CA certificate. \r\n\r\nYou have various options as follows (may not be exhaustive. but these worked for me.)\r\n \r\n1. You can place it in its default place i.e ~/Postgres/root.crt OR\r\n2. Set `PGSSLROOTCERT` env variable to its path OR\r\n3. import into a truststore and pass it path as:\r\n`-Djavax.net.ssl.trustStore=[trust_store_path] -Djavax.net.ssl.trustStorePassword=[trust_store_password]`. If you are using default truststore i.e. JRE&#39;s `cacerts` these two env variables are not required.\r\n\r\nRef: \r\n\r\nhttps://jdbc.postgresql.org/documentation/head/ssl-client.html\r\n\r\nhttps://www.postgresql.org/docs/9.0/libpq-ssl.html\r\n","title":"How to connect with PostgreSQL database over SSL?","body":"<pre><code>url=jdbc:postgresql://&lt;host_url_or_ip&gt;:&lt;port&gt;/&lt;db_name&gt;?currentSchema=&lt;schema_name&gt;&amp;sslmode=verify-ca&amp;sslfactory=org.postgresql.ssl.DefaultJavaSSLFactory\n</code></pre>\n\n<p>Note: if <code>schema_name</code> is <code>public</code>, it is not required. But port even if is default i.e. 5432, you have to provide it.</p>\n\n<p>For sslmode values ref: <a href=\"https://jdbc.postgresql.org/documentation/head/ssl-client.html\" rel=\"noreferrer\">https://jdbc.postgresql.org/documentation/head/ssl-client.html</a>\nset <code>sslfactory=org.postgresql.ssl.DefaultJavaSSLFactory</code> to enable validation. </p>\n\n<p>For non-validating ssl connection,  you can use <code>sslfactory=org.postgresql.ssl.NonValidatingFactory</code></p>\n\n<p>But remember, once you enable SSL validation, it may require a root CA certificate. </p>\n\n<p>You have various options as follows (may not be exhaustive. but these worked for me.)</p>\n\n<ol>\n<li>You can place it in its default place i.e ~/Postgres/root.crt OR</li>\n<li>Set <code>PGSSLROOTCERT</code> env variable to its path OR</li>\n<li>import into a truststore and pass it path as:\n<code>-Djavax.net.ssl.trustStore=[trust_store_path] -Djavax.net.ssl.trustStorePassword=[trust_store_password]</code>. If you are using default truststore i.e. JRE's <code>cacerts</code> these two env variables are not required.</li>\n</ol>\n\n<p>Ref: </p>\n\n<p><a href=\"https://jdbc.postgresql.org/documentation/head/ssl-client.html\" rel=\"noreferrer\">https://jdbc.postgresql.org/documentation/head/ssl-client.html</a></p>\n\n<p><a href=\"https://www.postgresql.org/docs/9.0/libpq-ssl.html\" rel=\"noreferrer\">https://www.postgresql.org/docs/9.0/libpq-ssl.html</a></p>\n"},{"comments":[{"owner":{"account_id":16773846,"reputation":1526,"user_id":12125692,"display_name":"Ashutosh Tiwari"},"score":0,"creation_date":1644313229,"post_id":61239382,"comment_id":125567005,"body_markdown":"Hi ! How to use sslkey= ? Will I also need sslcert= or with key itself it will work?","body":"Hi ! How to use sslkey= ? Will I also need sslcert= or with key itself it will work?"},{"owner":{"account_id":4480628,"reputation":1802,"user_id":3758005,"display_name":"Oleksandr Shmyrko"},"score":0,"creation_date":1644337631,"post_id":61239382,"comment_id":125577550,"body_markdown":"@AshutoshTiwari, it will be something like this `jdbc:postgresql://host:5432/db_name?sslmode=verify-full&amp;sslrootcert=CA.crt&amp;sslcert=db-client.crt&amp;sslkey=db-client.pk8`","body":"@AshutoshTiwari, it will be something like this <code>jdbc:postgresql:&#47;&#47;host:5432&#47;db_name?sslmode=verify-full&amp;sslr&zwnj;&#8203;ootcert=CA.crt&amp;sslce&zwnj;&#8203;rt=db-client.crt&amp;ssl&zwnj;&#8203;key=db-client.pk8</code>"}],"tags":[],"owner":{"account_id":4480628,"reputation":1802,"user_id":3758005,"display_name":"Oleksandr Shmyrko"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1695396764,"creation_date":1586988099,"answer_id":61239382,"question_id":37394078,"body_markdown":"If you don&#39;t need to verify database client, just comment out `ssl_ca_file` in `postgresql.conf`.\r\n\r\n&gt; `ssl_ca_file` - trusted certificate authorities, checks that client certificate is signed by a trusted certificate authority.\r\n\r\nYour database URL should look like this:\r\n```\r\nurl=jdbc:postgresql://host:5432/db_name?ssl=true&amp;sslmode=require\r\n```\r\n\r\nIn case you need to verify the database client, you should add `sslcert=...` and `sslkey=...` parameters to your database URL, e.g.:\r\n\r\n```\r\nurl=jdbc:postgresql://host:5432/db_name?sslmode=verify-full&amp;sslrootcert=CA.crt&amp;sslcert=db-client.crt&amp;sslkey=db-client.pk8\r\n```\r\n\r\nRefer to [PostgreSQL JDBC docs][1] for more details on `sslmode`.\r\n\r\n[1]: https://jdbc.postgresql.org/documentation/head/ssl-client.html","title":"How to connect with PostgreSQL database over SSL?","body":"<p>If you don't need to verify database client, just comment out <code>ssl_ca_file</code> in <code>postgresql.conf</code>.</p>\n<blockquote>\n<p><code>ssl_ca_file</code> - trusted certificate authorities, checks that client certificate is signed by a trusted certificate authority.</p>\n</blockquote>\n<p>Your database URL should look like this:</p>\n<pre><code>url=jdbc:postgresql://host:5432/db_name?ssl=true&amp;sslmode=require\n</code></pre>\n<p>In case you need to verify the database client, you should add <code>sslcert=...</code> and <code>sslkey=...</code> parameters to your database URL, e.g.:</p>\n<pre><code>url=jdbc:postgresql://host:5432/db_name?sslmode=verify-full&amp;sslrootcert=CA.crt&amp;sslcert=db-client.crt&amp;sslkey=db-client.pk8\n</code></pre>\n<p>Refer to <a href=\"https://jdbc.postgresql.org/documentation/head/ssl-client.html\" rel=\"nofollow noreferrer\">PostgreSQL JDBC docs</a> for more details on <code>sslmode</code>.</p>\n"},{"tags":[],"owner":{"account_id":13690978,"reputation":519,"user_id":9878763,"display_name":"Vijay Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669913614,"creation_date":1622312238,"answer_id":67754532,"question_id":37394078,"body_markdown":"i had issue with jfrog artifactory connection to azure postgres, this below worked for me\r\n\r\n    sudo cat &lt;&lt;EOF &gt;/opt/jfrog/artifactory/var/etc/system.yaml\r\n    configVersion: 1\r\n    shared:\r\n        node:\r\n        database:\r\n            type: postgresql\r\n            driver: org.postgresql.Driver\r\n            url: &quot;jdbc:postgresql://test-psqlserver.postgres.database.azure.com:5432/postgres?ssl=true&amp;sslmode=require&quot;\r\n            username: psqladminun@test-psqlserver\r\n            password: password:-)\r\n    EOF","title":"How to connect with PostgreSQL database over SSL?","body":"<p>i had issue with jfrog artifactory connection to azure postgres, this below worked for me</p>\n<pre><code>sudo cat &lt;&lt;EOF &gt;/opt/jfrog/artifactory/var/etc/system.yaml\nconfigVersion: 1\nshared:\n    node:\n    database:\n        type: postgresql\n        driver: org.postgresql.Driver\n        url: &quot;jdbc:postgresql://test-psqlserver.postgres.database.azure.com:5432/postgres?ssl=true&amp;sslmode=require&quot;\n        username: psqladminun@test-psqlserver\n        password: password:-)\nEOF\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25285861,"reputation":31,"user_id":19112865,"display_name":"Hightower"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662495584,"creation_date":1662495584,"answer_id":73627379,"question_id":37394078,"body_markdown":"https://stackoverflow.com/users/3612771/d-v-santhosh-kiran is on to something here guys.\r\n\r\nSome of their information is not perfectly accurate.\r\nsslfactory=org.postgresql.ssl.DefaultJavaSSLFactory is good - but it relies on  SSLSocketFactory.getDefault() which knows how to read CA trust stores from $JAVA_HOME/lib/security/cacerts, or from javax.net.ssl.* properties as per point number 3 in that answer.  Points 1 and 2 are correct if you are using the default sslfactory, org.postgresql.ssl.LibPQFactory, but are 100% not at all compatible with DefaultJavaSSLFactory.  So be careful.\r\n\r\nAlso, I propose option number 4. Add root CA to JRE cacerts file, and let java do its default thing.\r\nYou&#39;ll have to get out keytool for this one, but it is more flexible than java.net.ssl settings if you have more than one client in your jvm at runtime.\r\n```\r\nkeytool -importcert -keystore $JAVA_HOME/lib/security/cacerts -storepass changeit -noprompt -alias &quot;$ALIAS&quot; -file $YOUR_CERT -trustcacerts\r\n```\r\nSee https://docs.oracle.com/en/java/javase/11/tools/keytool.html and mileage may vary.  What you are trying to do is import (x509/pkix) certificates into the cacerts java keystore\r\n\r\nfwiw org.postgresql.ssl.LibPQFactory is a terrible name that makes people think that the postgres driver will do some JNI and call into C.  That is not what the author intended.  The class could have been SslFactoryThatDoesPathsLikeLibPQBro.  That&#39;s all it does regarding libpq:  looks for certs in paths like LibPQ does.  Apart from that it uses regular old java JSSE to load truststore certs for TLS.\r\nHave a look at the source code: https://github.com/pgjdbc/pgjdbc/blob/master/pgjdbc/src/main/java/org/postgresql/ssl/LibPQFactory.java#L102\r\n```\r\nSSLContext ctx = SSLContext.getInstance(&quot;TLS&quot;);\r\n... stuff about libpq path locations ...\r\nTrustManagerFactory tmf = TrustManagerFactory.getInstance(&quot;PKIX&quot;);\r\n...\r\nks = KeyStore.getInstance(&quot;jks&quot;);\r\n...\r\nCertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\nObject[] certs = cf.generateCertificates(fis).toArray(new Certificate[]{});\r\nks.load(null, null);\r\nfor (int i = 0; i &lt; certs.length; i++) {\r\n  ks.setCertificateEntry(&quot;cert&quot; + i, (Certificate) certs[i]);\r\n}\r\ntmf.init(ks);\r\ntm = tmf.getTrustManagers();\r\n...\r\n// finally we can initialize the context\r\n...\r\n        KeyManager km = this.km;\r\n        ctx.init(km == null ? null : new KeyManager[]{km}, tm, null);\r\n...\r\n      factory = ctx.getSocketFactory();\r\n```","title":"How to connect with PostgreSQL database over SSL?","body":"<p><a href=\"https://stackoverflow.com/users/3612771/d-v-santhosh-kiran\">https://stackoverflow.com/users/3612771/d-v-santhosh-kiran</a> is on to something here guys.</p>\n<p>Some of their information is not perfectly accurate.\nsslfactory=org.postgresql.ssl.DefaultJavaSSLFactory is good - but it relies on  SSLSocketFactory.getDefault() which knows how to read CA trust stores from $JAVA_HOME/lib/security/cacerts, or from javax.net.ssl.* properties as per point number 3 in that answer.  Points 1 and 2 are correct if you are using the default sslfactory, org.postgresql.ssl.LibPQFactory, but are 100% not at all compatible with DefaultJavaSSLFactory.  So be careful.</p>\n<p>Also, I propose option number 4. Add root CA to JRE cacerts file, and let java do its default thing.\nYou'll have to get out keytool for this one, but it is more flexible than java.net.ssl settings if you have more than one client in your jvm at runtime.</p>\n<pre><code>keytool -importcert -keystore $JAVA_HOME/lib/security/cacerts -storepass changeit -noprompt -alias &quot;$ALIAS&quot; -file $YOUR_CERT -trustcacerts\n</code></pre>\n<p>See <a href=\"https://docs.oracle.com/en/java/javase/11/tools/keytool.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/tools/keytool.html</a> and mileage may vary.  What you are trying to do is import (x509/pkix) certificates into the cacerts java keystore</p>\n<p>fwiw org.postgresql.ssl.LibPQFactory is a terrible name that makes people think that the postgres driver will do some JNI and call into C.  That is not what the author intended.  The class could have been SslFactoryThatDoesPathsLikeLibPQBro.  That's all it does regarding libpq:  looks for certs in paths like LibPQ does.  Apart from that it uses regular old java JSSE to load truststore certs for TLS.\nHave a look at the source code: <a href=\"https://github.com/pgjdbc/pgjdbc/blob/master/pgjdbc/src/main/java/org/postgresql/ssl/LibPQFactory.java#L102\" rel=\"nofollow noreferrer\">https://github.com/pgjdbc/pgjdbc/blob/master/pgjdbc/src/main/java/org/postgresql/ssl/LibPQFactory.java#L102</a></p>\n<pre><code>SSLContext ctx = SSLContext.getInstance(&quot;TLS&quot;);\n... stuff about libpq path locations ...\nTrustManagerFactory tmf = TrustManagerFactory.getInstance(&quot;PKIX&quot;);\n...\nks = KeyStore.getInstance(&quot;jks&quot;);\n...\nCertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\nObject[] certs = cf.generateCertificates(fis).toArray(new Certificate[]{});\nks.load(null, null);\nfor (int i = 0; i &lt; certs.length; i++) {\n  ks.setCertificateEntry(&quot;cert&quot; + i, (Certificate) certs[i]);\n}\ntmf.init(ks);\ntm = tmf.getTrustManagers();\n...\n// finally we can initialize the context\n...\n        KeyManager km = this.km;\n        ctx.init(km == null ? null : new KeyManager[]{km}, tm, null);\n...\n      factory = ctx.getSocketFactory();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1957539,"reputation":5468,"user_id":1760179,"accept_rate":56,"display_name":"Espresso"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663792008,"creation_date":1663792008,"answer_id":73806574,"question_id":37394078,"body_markdown":"For those that use Springboot &amp; SSL \r\n\r\nConvert the key from pem to pkcs8\r\n```\r\nopenssl pkcs8 -topk8 -inform PEM -outform DER \\\r\n   -in client-key.pem \\\r\n   -out client-key.pkcs8 -nocrypt\r\n```\r\n\r\n\r\nAdd the certs to db url in applications.properties\r\n```\r\nspring.datasource.url=jdbc:postgresql://&lt;DB_IP&gt;/mydbName?ssl=true&amp;sslmode=verify-ca\\\r\n&amp;sslcert=BOOT-INF/classes/db/certs/client-cert.pem\\\r\n&amp;sslkey=BOOT-INF/classes/db/certs/client-key.pkcs8\\\r\n&amp;sslrootcert=BOOT-INF/classes/db/certs/server-ca.pem\r\n```\r\n\r\nHey, if anyone find a way to put this certs/key in env var and use inside jdbc-url, please edit/add that info. That would be better aligned with cloudnative/k8s.\r\n\r\n","title":"How to connect with PostgreSQL database over SSL?","body":"<p>For those that use Springboot &amp; SSL</p>\n<p>Convert the key from pem to pkcs8</p>\n<pre><code>openssl pkcs8 -topk8 -inform PEM -outform DER \\\n   -in client-key.pem \\\n   -out client-key.pkcs8 -nocrypt\n</code></pre>\n<p>Add the certs to db url in applications.properties</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://&lt;DB_IP&gt;/mydbName?ssl=true&amp;sslmode=verify-ca\\\n&amp;sslcert=BOOT-INF/classes/db/certs/client-cert.pem\\\n&amp;sslkey=BOOT-INF/classes/db/certs/client-key.pkcs8\\\n&amp;sslrootcert=BOOT-INF/classes/db/certs/server-ca.pem\n</code></pre>\n<p>Hey, if anyone find a way to put this certs/key in env var and use inside jdbc-url, please edit/add that info. That would be better aligned with cloudnative/k8s.</p>\n"}],"owner":{"account_id":248044,"reputation":16466,"user_id":523168,"accept_rate":77,"display_name":"Valter Silva"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58419,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"answer_count":6,"score":17,"last_activity_date":1695396764,"creation_date":1464014757,"question_id":37394078,"body_markdown":"I have created my own certificate and configured `postgresql.conf` file:\r\n\r\n    ...\r\n    #authentication_timeout = 1min          # 1s-600s\r\n    ssl = true                              # (change requires restart)\r\n    ssl_ciphers = &#39;HIGH:MEDIUM:+3DES:!aNULL&#39; # allowed SSL ciphers\r\n                                            # (change requires restart)\r\n    #ssl_prefer_server_ciphers = on         # (change requires restart)\r\n    #ssl_ecdh_curve = &#39;prime256v1&#39;          # (change requires restart)\r\n    ssl_cert_file = &#39;/etc/ssl/certs/company/database/certificate&#39;           # (change requires restart)\r\n    ssl_key_file = &#39;/etc/ssl/certs/company/database/key&#39;            # (change requires restart)\r\n    ssl_ca_file = &#39;/usr/share/ca-certificates/company/ca/certificate&#39;                        # (change requires restart)\r\n    #ssl_crl_file = &#39;&#39;                      # (change requires restart)\r\n    #password_encryption = on\r\n    #db_user_namespace = off\r\n    #row_security = on\r\n    ...\r\n\r\nThen, I allow my server to connect with my database, `pg_hba.conf`:\r\n\r\n    ...\r\n    hostssl    postgres             postgres             XXX.XXX.XXX.XXX/0            md5\r\n    ...\r\n\r\nSo, I can connect to it via `psql` command line:\r\n\r\n\r\n    psql (9.5.3)\r\n    SSL connection (protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384, bits: 256, compression: off)\r\n    Type &quot;help&quot; for help.\r\n    \r\n    postgres=#\r\n\r\nBut, when I try to open a connection with the database via my java application, **even when I provide the truststore with my database certificate included**, I keep getting no connection with it:\r\n\r\n    mvn package -Djavax.net.ssl.trustStore=/opt/app/truststore -Djavax.net.ssl.trustStorePassword=changeit\r\n\r\nException:\r\n\r\n    2016-05-23 16:28:32,900 WARN [com.mchange.v2.resourcepool.BasicResourcePool] - &lt;Having failed to acquire a resource, com.mchange.v2.resourcepool.BasicResourcePool@75fa1be3 is interrupting all Threads waiting on a resource to check out. Will try again in response to new client requests.&gt;\r\n    2016-05-23 16:28:32,900 WARN [com.mchange.v2.resourcepool.BasicResourcePool] - &lt;com.mchange.v2.resourcepool.BasicResourcePool$ScatteredAcquireTask@2be057bf -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception: &gt;\r\n    java.lang.NullPointerException\r\n    \tat org.postgresql.Driver.parseURL(Driver.java:532)\r\n    \tat org.postgresql.Driver.acceptsURL(Driver.java:431)\r\n    \tat java.sql.DriverManager.getDriver(DriverManager.java:299)\r\n    \tat com.mchange.v2.c3p0.DriverManagerDataSource.driver(DriverManagerDataSource.java:285)\r\n    \tat com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:161)\r\n    \tat com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:161)\r\n    \tat com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:147)\r\n    \tat com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:202)\r\n    \tat com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1138)\r\n    \tat com.mchange.v2.resourcepool.BasicResourcePool.doAcquireAndDecrementPendingAcquiresWithinLockOnSuccess(BasicResourcePool.java:1125)\r\n    \tat com.mchange.v2.resourcepool.BasicResourcePool.access$700(BasicResourcePool.java:44)\r\n    \tat com.mchange.v2.resourcepool.BasicResourcePool$ScatteredAcquireTask.run(BasicResourcePool.java:1870)\r\n    \tat com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:696)\r\n    2016-05-23 16:28:32,901 WARN [com.mchange.v2.resourcepool.BasicResourcePool] - &lt;Having failed to acquire a resource, com.mchange.v2.resourcepool.BasicResourcePool@75fa1be3 is interrupting all Threads waiting on a resource to check out. Will try again in response to new client requests.&gt;\r\n\r\nVia `psql` everything seems to be working fine, not with my application.\r\nAny suggestion ?\r\n\r\n**EDIT:**\r\n\r\nMy `props.properties` file:\r\n\r\n    uatDb.user=postgres\r\n    uatDb.password=password\r\n    uatDb.driverClass=org.postgresql.Driver\r\n    uatDb.jdbcUrl=jdbc:postgresql://&lt;server_name&gt;:1234/uat?ssl=true\r\n    uatDb.port=5443\r\n    uatDb.name=uat\r\n    uatDb.host=&lt;server_name&gt;","title":"How to connect with PostgreSQL database over SSL?","body":"<p>I have created my own certificate and configured <code>postgresql.conf</code> file:</p>\n\n<pre><code>...\n#authentication_timeout = 1min          # 1s-600s\nssl = true                              # (change requires restart)\nssl_ciphers = 'HIGH:MEDIUM:+3DES:!aNULL' # allowed SSL ciphers\n                                        # (change requires restart)\n#ssl_prefer_server_ciphers = on         # (change requires restart)\n#ssl_ecdh_curve = 'prime256v1'          # (change requires restart)\nssl_cert_file = '/etc/ssl/certs/company/database/certificate'           # (change requires restart)\nssl_key_file = '/etc/ssl/certs/company/database/key'            # (change requires restart)\nssl_ca_file = '/usr/share/ca-certificates/company/ca/certificate'                        # (change requires restart)\n#ssl_crl_file = ''                      # (change requires restart)\n#password_encryption = on\n#db_user_namespace = off\n#row_security = on\n...\n</code></pre>\n\n<p>Then, I allow my server to connect with my database, <code>pg_hba.conf</code>:</p>\n\n<pre><code>...\nhostssl    postgres             postgres             XXX.XXX.XXX.XXX/0            md5\n...\n</code></pre>\n\n<p>So, I can connect to it via <code>psql</code> command line:</p>\n\n<pre><code>psql (9.5.3)\nSSL connection (protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384, bits: 256, compression: off)\nType \"help\" for help.\n\npostgres=#\n</code></pre>\n\n<p>But, when I try to open a connection with the database via my java application, <strong>even when I provide the truststore with my database certificate included</strong>, I keep getting no connection with it:</p>\n\n<pre><code>mvn package -Djavax.net.ssl.trustStore=/opt/app/truststore -Djavax.net.ssl.trustStorePassword=changeit\n</code></pre>\n\n<p>Exception:</p>\n\n<pre><code>2016-05-23 16:28:32,900 WARN [com.mchange.v2.resourcepool.BasicResourcePool] - &lt;Having failed to acquire a resource, com.mchange.v2.resourcepool.BasicResourcePool@75fa1be3 is interrupting all Threads waiting on a resource to check out. Will try again in response to new client requests.&gt;\n2016-05-23 16:28:32,900 WARN [com.mchange.v2.resourcepool.BasicResourcePool] - &lt;com.mchange.v2.resourcepool.BasicResourcePool$ScatteredAcquireTask@2be057bf -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception: &gt;\njava.lang.NullPointerException\n    at org.postgresql.Driver.parseURL(Driver.java:532)\n    at org.postgresql.Driver.acceptsURL(Driver.java:431)\n    at java.sql.DriverManager.getDriver(DriverManager.java:299)\n    at com.mchange.v2.c3p0.DriverManagerDataSource.driver(DriverManagerDataSource.java:285)\n    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:161)\n    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:161)\n    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:147)\n    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:202)\n    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1138)\n    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquireAndDecrementPendingAcquiresWithinLockOnSuccess(BasicResourcePool.java:1125)\n    at com.mchange.v2.resourcepool.BasicResourcePool.access$700(BasicResourcePool.java:44)\n    at com.mchange.v2.resourcepool.BasicResourcePool$ScatteredAcquireTask.run(BasicResourcePool.java:1870)\n    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:696)\n2016-05-23 16:28:32,901 WARN [com.mchange.v2.resourcepool.BasicResourcePool] - &lt;Having failed to acquire a resource, com.mchange.v2.resourcepool.BasicResourcePool@75fa1be3 is interrupting all Threads waiting on a resource to check out. Will try again in response to new client requests.&gt;\n</code></pre>\n\n<p>Via <code>psql</code> everything seems to be working fine, not with my application.\nAny suggestion ?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>My <code>props.properties</code> file:</p>\n\n<pre><code>uatDb.user=postgres\nuatDb.password=password\nuatDb.driverClass=org.postgresql.Driver\nuatDb.jdbcUrl=jdbc:postgresql://&lt;server_name&gt;:1234/uat?ssl=true\nuatDb.port=5443\nuatDb.name=uat\nuatDb.host=&lt;server_name&gt;\n</code></pre>\n"},{"tags":["java","stripes"],"owner":{"account_id":2602969,"reputation":149,"user_id":2254827,"display_name":"MADARASSOU David"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695396208,"creation_date":1695394433,"question_id":77158694,"body_markdown":"With Java, I&#39;m trying to create a customer in Stripe (Version 2022-11-15).\r\nI get this error:\r\n\r\n    com.stripe.exception.InvalidRequestException Invalid Object....\r\n\r\nHow can I solve this problem?\r\n\r\nHere&#39;s the code:\r\n\r\n    String idempotencyKey = UUID.randomUUID().toString();\r\n    RequestOptions requestOptions = RequestOptions.builder().setApiKey(Constantes.STRIPE_KEY_TEST).build();\r\n    // CUSTOMER\r\n    CustomerCreateParams paramsCustomer = CustomerCreateParams.builder()\r\n        .setEmail(&quot;product_name_price_199@nj.tiago&quot;)\r\n        .setName(&quot;John Doe&quot;)\r\n        .putExtraParam(&quot;address&quot;, &quot;123 avenidad da Saudade CopaCabana RJ&quot;)\r\n        .setPaymentMethod(&quot;pm_card_br&quot;)\r\n        .build();\r\n   \r\n    Customer customer = null;\r\n    try {\r\n        customer = Customer.create(paramsCustomer);\r\n        System.out.println(&quot;Customer ID: &quot; + customer.getId());\r\n    } catch (StripeException e) {\r\n        e.printStackTrace();\r\n    }\r\n","title":"Stripe Java : Creating a Customer Programmatically in Stripe Java Failed","body":"<p>With Java, I'm trying to create a customer in Stripe (Version 2022-11-15).\nI get this error:</p>\n<pre><code>com.stripe.exception.InvalidRequestException Invalid Object....\n</code></pre>\n<p>How can I solve this problem?</p>\n<p>Here's the code:</p>\n<pre><code>String idempotencyKey = UUID.randomUUID().toString();\nRequestOptions requestOptions = RequestOptions.builder().setApiKey(Constantes.STRIPE_KEY_TEST).build();\n// CUSTOMER\nCustomerCreateParams paramsCustomer = CustomerCreateParams.builder()\n    .setEmail(&quot;product_name_price_199@nj.tiago&quot;)\n    .setName(&quot;John Doe&quot;)\n    .putExtraParam(&quot;address&quot;, &quot;123 avenidad da Saudade CopaCabana RJ&quot;)\n    .setPaymentMethod(&quot;pm_card_br&quot;)\n    .build();\n\nCustomer customer = null;\ntry {\n    customer = Customer.create(paramsCustomer);\n    System.out.println(&quot;Customer ID: &quot; + customer.getId());\n} catch (StripeException e) {\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":["java","spring-boot","authentication","spring-security","jwt"],"comments":[{"owner":{"account_id":28695489,"reputation":611,"user_id":21973805,"display_name":"Ahmed Nabil"},"score":0,"creation_date":1695210244,"post_id":77139317,"comment_id":135993092,"body_markdown":"show screen shots of how exactly you send the request","body":"show screen shots of how exactly you send the request"},{"owner":{"account_id":23511795,"reputation":9,"user_id":17560284,"display_name":"Quan Pham"},"score":0,"creation_date":1695214929,"post_id":77139317,"comment_id":135994222,"body_markdown":"I add the screenshot above","body":"I add the screenshot above"}],"answers":[{"comments":[{"owner":{"account_id":23511795,"reputation":9,"user_id":17560284,"display_name":"Quan Pham"},"score":0,"creation_date":1695255331,"post_id":77145467,"comment_id":136001399,"body_markdown":"I try 2 way store in database is ROLE_CUSTOMER and CUSTOMER, both way not working at all","body":"I try 2 way store in database is ROLE_CUSTOMER and CUSTOMER, both way not working at all"},{"owner":{"account_id":24877126,"reputation":441,"user_id":18750808,"display_name":"Sve Kamenska"},"score":0,"creation_date":1695287359,"post_id":77145467,"comment_id":136005263,"body_markdown":"But have you tried to use ROLE_CUSTOMER in the DB and update your code, in _both_ places to hasRole(&#39;CUSTOMER&#39;) ? Also you can debug it and see what is happening in your JWTAuthorizationFilter ot any other place you use to read token?","body":"But have you tried to use ROLE_CUSTOMER in the DB and update your code, in <i>both</i> places to hasRole(&#39;CUSTOMER&#39;) ? Also you can debug it and see what is happening in your JWTAuthorizationFilter ot any other place you use to read token?"},{"owner":{"account_id":23511795,"reputation":9,"user_id":17560284,"display_name":"Quan Pham"},"score":1,"creation_date":1695396121,"post_id":77145467,"comment_id":136023375,"body_markdown":"actually, it work in 2 way. I fix it already, I miss validate token, so token always be 401","body":"actually, it work in 2 way. I fix it already, I miss validate token, so token always be 401"}],"tags":[],"owner":{"account_id":24877126,"reputation":441,"user_id":18750808,"display_name":"Sve Kamenska"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695239337,"creation_date":1695238479,"answer_id":77145467,"question_id":77139317,"body_markdown":"There might be issue with the role naming.\r\n1. Which role does your user have? &quot;CUSTOMER&quot; or &quot;ROLE_CUSTOMER&quot;? It should be &quot;ROLE_CUSTOMER&quot; in the database.\r\n2. Note that you double check user&#39;s role and use different wording with and without &quot;ROLE_&quot; prefix\r\n- in the security config: \r\n\r\n    `.requestMatchers(&quot;/api/test/customer&quot;).hasRole(&quot;ROLE_CUSTOMER&quot;)`\r\n- in the method annotation \r\n\r\n    `@PreAuthorize(&quot;hasRole(&#39;CUSTOMER&#39;)&quot;)`\r\n\r\nSpring after version 4, I guess, adds &quot;ROLE_&quot; frefix on its own, so you can check `hasRole(&quot;CUSTOMER&quot;)`, but the role in the database should be with prefix, i.e. &quot;ROLE_CUSTOMER&quot;. Some spring versions don&#39;t add prefix, so you have to check `hasRole(&quot;ROLE_CUSTOMER&quot;)`.\r\n\r\nPlease, check this answer here as well, it might help\r\n[StackOverflow: getting-401-unauthorized-even-when-the-user-is-authenticated-spring-security][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/71810226/getting-401-unauthorized-even-when-the-user-is-authenticated-spring-security/71819541#71819541","title":"Problem with Authentication (SPRING SECURITY)","body":"<p>There might be issue with the role naming.</p>\n<ol>\n<li>Which role does your user have? &quot;CUSTOMER&quot; or &quot;ROLE_CUSTOMER&quot;? It should be &quot;ROLE_CUSTOMER&quot; in the database.</li>\n<li>Note that you double check user's role and use different wording with and without &quot;ROLE_&quot; prefix</li>\n</ol>\n<ul>\n<li><p>in the security config:</p>\n<p><code>.requestMatchers(&quot;/api/test/customer&quot;).hasRole(&quot;ROLE_CUSTOMER&quot;)</code></p>\n</li>\n<li><p>in the method annotation</p>\n<p><code>@PreAuthorize(&quot;hasRole('CUSTOMER')&quot;)</code></p>\n</li>\n</ul>\n<p>Spring after version 4, I guess, adds &quot;ROLE_&quot; frefix on its own, so you can check <code>hasRole(&quot;CUSTOMER&quot;)</code>, but the role in the database should be with prefix, i.e. &quot;ROLE_CUSTOMER&quot;. Some spring versions don't add prefix, so you have to check <code>hasRole(&quot;ROLE_CUSTOMER&quot;)</code>.</p>\n<p>Please, check this answer here as well, it might help\n<a href=\"https://stackoverflow.com/questions/71810226/getting-401-unauthorized-even-when-the-user-is-authenticated-spring-security/71819541#71819541\">StackOverflow: getting-401-unauthorized-even-when-the-user-is-authenticated-spring-security</a></p>\n"},{"comments":[{"owner":{"account_id":11774506,"reputation":1282,"user_id":8616470,"display_name":"spkrtn"},"score":0,"creation_date":1695664832,"post_id":77158920,"comment_id":136051962,"body_markdown":"If the problem with your question was incorrect code elsewhere, you should close the question yourself as not meaningful since it cannot help anyone else.","body":"If the problem with your question was incorrect code elsewhere, you should close the question yourself as not meaningful since it cannot help anyone else."},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1695676712,"post_id":77158920,"comment_id":136053801,"body_markdown":"Please use the edit link on your question to add additional information. The Post Answer button should be used only for complete answers to the question. - [From Review](/review/low-quality-posts/35044109)","body":"Please use the edit link on your question to add additional information. The Post Answer button should be used only for complete answers to the question. - <a href=\"/review/low-quality-posts/35044109\">From Review</a>"},{"owner":{"account_id":15396644,"reputation":25775,"user_id":11107541,"display_name":"starball"},"score":1,"creation_date":1695717550,"post_id":77158920,"comment_id":136058321,"body_markdown":"@siggemannen really? [answer] doesn&#39;t say that.","body":"@siggemannen really? <a href=\"https://stackoverflow.com/questions/how-to-answer\">How to Answer</a> doesn&#39;t say that."}],"tags":[],"owner":{"account_id":23511795,"reputation":9,"user_id":17560284,"display_name":"Quan Pham"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695396177,"creation_date":1695396177,"answer_id":77158920,"question_id":77139317,"body_markdown":"I miss validate token, so the token send to the server always be 401","title":"Problem with Authentication (SPRING SECURITY)","body":"<p>I miss validate token, so the token send to the server always be 401</p>\n"}],"owner":{"account_id":23511795,"reputation":9,"user_id":17560284,"display_name":"Quan Pham"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1695396177,"creation_date":1695184555,"question_id":77139317,"body_markdown":"I have a problem, I&#39;m using spring security to create endpoint login. After login success the response with token will be created. But when I using postman to send request(I&#39;m using correct method, the header contain Bearer token, token still alive I also can decode token) but I always be 401 error\r\nhere is my config\r\n\r\n```\r\n@Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        return http\r\n                .cors()\r\n                .and().csrf().disable() \r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/register/&quot;, &quot;/api/test/all&quot;, &quot;/api/test/login&quot;)\r\n                .permitAll() \r\n                .and()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/users/&quot;)\r\n                .hasAnyAuthority(&quot;CUSTOMER&quot;, &quot;ADMIN&quot;, &quot;EXPERT&quot;) \r\n                .and()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/api/test/customer&quot;)\r\n                .hasRole(&quot;ROLE_CUSTOMER&quot;)\r\n                .and()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/api/test/customer&quot;)\r\n                .authenticated()\r\n                .and()\r\n                .formLogin() \r\n                .defaultSuccessUrl(&quot;/api/test/customer&quot;)\r\n                .and()\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(new AuthenticationEntryPoint() {\r\n                    @Override\r\n                    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {\r\n                        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, authException.getMessage());\r\n                    }\r\n                })\r\n                .and()\r\n                .build();\r\n    }\r\n//and the endpoint I want to access after login success(the full is /api/test/customer)\r\n@PreAuthorize(&quot;hasRole(&#39;CUSTOMER&#39;)&quot;)\r\n    @GetMapping(&quot;/customer&quot;)\r\n    public String home() {\r\n        return &quot;Home after login for customer&quot;;\r\n    }\r\n```\r\n\r\n\r\nI want to fix that as soon as possible\r\n[I&#39;m using postman to send request][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QvxZe.png","title":"Problem with Authentication (SPRING SECURITY)","body":"<p>I have a problem, I'm using spring security to create endpoint login. After login success the response with token will be created. But when I using postman to send request(I'm using correct method, the header contain Bearer token, token still alive I also can decode token) but I always be 401 error\nhere is my config</p>\n<pre><code>@Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        return http\n                .cors()\n                .and().csrf().disable() \n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/register/&quot;, &quot;/api/test/all&quot;, &quot;/api/test/login&quot;)\n                .permitAll() \n                .and()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/users/&quot;)\n                .hasAnyAuthority(&quot;CUSTOMER&quot;, &quot;ADMIN&quot;, &quot;EXPERT&quot;) \n                .and()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/api/test/customer&quot;)\n                .hasRole(&quot;ROLE_CUSTOMER&quot;)\n                .and()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/api/test/customer&quot;)\n                .authenticated()\n                .and()\n                .formLogin() \n                .defaultSuccessUrl(&quot;/api/test/customer&quot;)\n                .and()\n                .exceptionHandling()\n                .authenticationEntryPoint(new AuthenticationEntryPoint() {\n                    @Override\n                    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {\n                        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, authException.getMessage());\n                    }\n                })\n                .and()\n                .build();\n    }\n//and the endpoint I want to access after login success(the full is /api/test/customer)\n@PreAuthorize(&quot;hasRole('CUSTOMER')&quot;)\n    @GetMapping(&quot;/customer&quot;)\n    public String home() {\n        return &quot;Home after login for customer&quot;;\n    }\n</code></pre>\n<p>I want to fix that as soon as possible\n<a href=\"https://i.stack.imgur.com/QvxZe.png\" rel=\"nofollow noreferrer\">I'm using postman to send request</a></p>\n"},{"tags":["java","postgresql","docker","dockerfile","opensuse"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695420655,"post_id":77157940,"comment_id":136027161,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":25574487,"reputation":11,"user_id":19354238,"display_name":"Behdin Talebi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695396079,"creation_date":1695396079,"answer_id":77158910,"question_id":77157940,"body_markdown":"try using this command on your docker file \r\nRUN echo &quot;deb http://apt.postgresql.org/pub/repos/apt/ precise-pgdg main&quot; &gt; /etc/apt/sources.list.d/pgdg.list\r\nand using your custom version from this link:\r\nhttp://apt.postgresql.org/pub/repos/apt/pool/15/p/postgresql-15/\r\nhope its help ","title":"Not able to install 15.5 in opensuse using DockerFile","body":"<p>try using this command on your docker file\nRUN echo &quot;deb <a href=\"http://apt.postgresql.org/pub/repos/apt/\" rel=\"nofollow noreferrer\">http://apt.postgresql.org/pub/repos/apt/</a> precise-pgdg main&quot; &gt; /etc/apt/sources.list.d/pgdg.list\nand using your custom version from this link:\n<a href=\"http://apt.postgresql.org/pub/repos/apt/pool/15/p/postgresql-15/\" rel=\"nofollow noreferrer\">http://apt.postgresql.org/pub/repos/apt/pool/15/p/postgresql-15/</a>\nhope its help</p>\n"}],"owner":{"account_id":25888435,"reputation":1,"user_id":19616186,"display_name":"Rashmi Patil"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695396079,"creation_date":1695388445,"question_id":77157940,"body_markdown":"I used DockerFile to build image where i want to install postgre 15.5. I have used below line in my code. But seems when i go into the container using docker exec and then check for postgre version installed it says it is 15.3 version\r\n\r\n\r\n```\r\n# install postgres\r\nRUN zypper --non-interactive --quiet addrepo --refresh -p 90  http://download.opensuse.org/repositories/server:database:postgresql/15.5/ PostgreSQL\r\nRUN zypper --gpg-auto-import-keys ref\r\nRUN zypper --non-interactive in postgresql postgresql-server postgresql-contrib\r\n```\r\n\r\n\r\nI need 15.5 to be installed. Can anyone help?\r\n\r\n\r\nTried different option but did not work","title":"Not able to install 15.5 in opensuse using DockerFile","body":"<p>I used DockerFile to build image where i want to install postgre 15.5. I have used below line in my code. But seems when i go into the container using docker exec and then check for postgre version installed it says it is 15.3 version</p>\n<pre><code># install postgres\nRUN zypper --non-interactive --quiet addrepo --refresh -p 90  http://download.opensuse.org/repositories/server:database:postgresql/15.5/ PostgreSQL\nRUN zypper --gpg-auto-import-keys ref\nRUN zypper --non-interactive in postgresql postgresql-server postgresql-contrib\n</code></pre>\n<p>I need 15.5 to be installed. Can anyone help?</p>\n<p>Tried different option but did not work</p>\n"},{"tags":["java","maven","pom.xml"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1695393969,"post_id":77158443,"comment_id":136022845,"body_markdown":"You should always define the versions (release versions!) of your dependencies and also of your plugins.. (pluginManagement) etc.","body":"You should always define the versions (release versions!) of your dependencies and also of your plugins.. (pluginManagement) etc."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1695404542,"post_id":77158443,"comment_id":136024872,"body_markdown":"Is this by chance a Spring Boot project? Because the SB starter parent includes another parent that defines many, many version numbers. Other parent poms may do the same thing, specifying dependency management details for dependencies. See [this answer](https://stackoverflow.com/a/12316462/636009) and try `mvn help:effective-pom` to see the versions maven is finding for your pom.","body":"Is this by chance a Spring Boot project? Because the SB starter parent includes another parent that defines many, many version numbers. Other parent poms may do the same thing, specifying dependency management details for dependencies. See <a href=\"https://stackoverflow.com/a/12316462/636009\">this answer</a> and try <code>mvn help:effective-pom</code> to see the versions maven is finding for your pom."}],"answers":[{"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1695393992,"post_id":77158634,"comment_id":136022851,"body_markdown":"Can you explain this part: `use a spesific version doesn&#39;t indicate a version -&gt; will try to fetch latest available version.`?","body":"Can you explain this part: <code>use a spesific version doesn&#39;t indicate a version -&gt; will try to fetch latest available version.</code>?"}],"tags":[],"owner":{"account_id":20432834,"reputation":7,"user_id":14991409,"display_name":"OMGer"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695394533,"creation_date":1695393938,"answer_id":77158634,"question_id":77158443,"body_markdown":"indicate a version -&gt; use a spesific version.\r\n...\r\ndoesn&#39;t indicate a version -&gt; will try to fetch latest available version.\r\n\r\nThis might be tempting to think (wouldn&#39;t it be best to always take latest?)\r\nbut it might occur weird bugs over the time.\r\nImagine not entering to a project for two years and now anything is a mess and you don&#39;t know which part makes the mess.","title":"Should I indicate dependency versions in pom.xml?","body":"<p>indicate a version -&gt; use a spesific version.\n...\ndoesn't indicate a version -&gt; will try to fetch latest available version.</p>\n<p>This might be tempting to think (wouldn't it be best to always take latest?)\nbut it might occur weird bugs over the time.\nImagine not entering to a project for two years and now anything is a mess and you don't know which part makes the mess.</p>\n"},{"tags":[],"owner":{"account_id":957259,"reputation":29625,"user_id":982341,"display_name":"GreyBeardedGeek"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695394020,"creation_date":1695394020,"answer_id":77158647,"question_id":77158443,"body_markdown":"This is somewhat of an opinion-based question, but here&#39;s opinion:\r\n\r\nIf you don&#39;t specify a version, then there is no actual record in your version control repo of what version you get. I believe that you would get the latest version each time it is resolved. For production apps, this would, IMHO, not be acceptable at all.\r\n\r\nYou can specify just a major version, or major/minor or major/minor/patch.\r\n\r\nTheoretically, it _should_ be safe to specify major and minor versions to make sure that the version that you get it compatible with your code.\r\n\r\nBut, if you want to be really sure that your code and the library are entirely compatible, then you would specify the patch version as well.\r\n\r\nI tend to use just the major version number during initial development, and then lock down to the patch version for initial production deployment after verifying that all tests still pass.\r\n\r\nYou can then upgrade individual library versions later, if you become aware of security updates or new features that you want to use, again, after fully testing them.","title":"Should I indicate dependency versions in pom.xml?","body":"<p>This is somewhat of an opinion-based question, but here's opinion:</p>\n<p>If you don't specify a version, then there is no actual record in your version control repo of what version you get. I believe that you would get the latest version each time it is resolved. For production apps, this would, IMHO, not be acceptable at all.</p>\n<p>You can specify just a major version, or major/minor or major/minor/patch.</p>\n<p>Theoretically, it <em>should</em> be safe to specify major and minor versions to make sure that the version that you get it compatible with your code.</p>\n<p>But, if you want to be really sure that your code and the library are entirely compatible, then you would specify the patch version as well.</p>\n<p>I tend to use just the major version number during initial development, and then lock down to the patch version for initial production deployment after verifying that all tests still pass.</p>\n<p>You can then upgrade individual library versions later, if you become aware of security updates or new features that you want to use, again, after fully testing them.</p>\n"},{"tags":[],"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695396070,"creation_date":1695396070,"answer_id":77158909,"question_id":77158443,"body_markdown":"I add a third answer because I think the other two missed the true meaning of your question.  Let us know what&#39;s the right one for your needs.\r\n\r\nIn Maven it is **mandatory** to specify the version number of each dependency.  If you see a block like this one:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\nwithout an explicit `&lt;version&gt;` tag, it means that the version is specified *elsewhere*, in a `&lt;dependencyManagement&gt;` block.  Tipically this block is in the root pom of the Maven project or in an external parent of the root pom. \r\n `spring-boot-starter-parent` is a well-known example of external parent that provides a `&lt;dependencyManagement&gt;` block.\r\n\r\nSee also the Maven documentation about [dependencyManagement][1].\r\n\r\n\r\n  [1]: https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#dependency-management","title":"Should I indicate dependency versions in pom.xml?","body":"<p>I add a third answer because I think the other two missed the true meaning of your question.  Let us know what's the right one for your needs.</p>\n<p>In Maven it is <strong>mandatory</strong> to specify the version number of each dependency.  If you see a block like this one:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>without an explicit <code>&lt;version&gt;</code> tag, it means that the version is specified <em>elsewhere</em>, in a <code>&lt;dependencyManagement&gt;</code> block.  Tipically this block is in the root pom of the Maven project or in an external parent of the root pom.\n<code>spring-boot-starter-parent</code> is a well-known example of external parent that provides a <code>&lt;dependencyManagement&gt;</code> block.</p>\n<p>See also the Maven documentation about <a href=\"https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#dependency-management\" rel=\"nofollow noreferrer\">dependencyManagement</a>.</p>\n"}],"owner":{"account_id":10350169,"reputation":1,"user_id":8999457,"display_name":"Yin and yang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1695404589,"answer_count":3,"score":-1,"last_activity_date":1695396070,"creation_date":1695392435,"question_id":77158443,"body_markdown":"Most examples from the Internet on Java do not indicate the version of the dependencies in &lt;version&gt;&lt;/version&gt; tags. Should I indicate dependency versions in production pom.xml file?\r\n\r\nIf I do not indicate the version, where then is the number of the dependency version is stored of my project in GIT repo?","title":"Should I indicate dependency versions in pom.xml?","body":"<p>Most examples from the Internet on Java do not indicate the version of the dependencies in  tags. Should I indicate dependency versions in production pom.xml file?</p>\n<p>If I do not indicate the version, where then is the number of the dependency version is stored of my project in GIT repo?</p>\n"},{"tags":["java","maven","intellij-idea","junit","mockito"],"comments":[{"owner":{"account_id":9195431,"reputation":529,"user_id":6834313,"accept_rate":97,"display_name":"Bob"},"score":1,"creation_date":1511433729,"post_id":47453386,"comment_id":81861601,"body_markdown":"Try to right click on you project, then in the menu -&gt; maven -&gt; Download Sources (or Reimport)","body":"Try to right click on you project, then in the menu -&gt; maven -&gt; Download Sources (or Reimport)"}],"answers":[{"comments":[{"owner":{"account_id":4698323,"reputation":6170,"user_id":3802631,"accept_rate":86,"display_name":"Jan B."},"score":1,"creation_date":1511433740,"post_id":47453468,"comment_id":81861613,"body_markdown":"Because sometimes Idea has hick-ups :)","body":"Because sometimes Idea has hick-ups :)"},{"owner":{"account_id":8881930,"reputation":11996,"user_id":6644368,"accept_rate":100,"display_name":"Yash"},"score":1,"creation_date":1511433819,"post_id":47453468,"comment_id":81861664,"body_markdown":"Some hiccup @Matt!","body":"Some hiccup @Matt!"},{"owner":{"account_id":1049814,"reputation":11925,"user_id":1054021,"accept_rate":81,"display_name":"Tobb"},"score":1,"creation_date":1511434518,"post_id":47453468,"comment_id":81862117,"body_markdown":"Usually when you change a pom-file tracked by IDEA, you get a small popup in your lower right corner asking you if you want to reimport the project (or enable autoimport). Changes done to the pom file has no effect until a reimport is completed.","body":"Usually when you change a pom-file tracked by IDEA, you get a small popup in your lower right corner asking you if you want to reimport the project (or enable autoimport). Changes done to the pom file has no effect until a reimport is completed."},{"owner":{"account_id":8881930,"reputation":11996,"user_id":6644368,"accept_rate":100,"display_name":"Yash"},"score":0,"creation_date":1511504927,"post_id":47453468,"comment_id":81889334,"body_markdown":"@Tobb Yeah! That&#39;s the usual case, but I was not getting that pop-up in this case. However, the `Reimport` worked for me. Thanks again :)","body":"@Tobb Yeah! That&#39;s the usual case, but I was not getting that pop-up in this case. However, the <code>Reimport</code> worked for me. Thanks again :)"},{"owner":{"account_id":1605721,"reputation":509,"user_id":1485864,"accept_rate":33,"display_name":"user1485864"},"score":0,"creation_date":1587658649,"post_id":47453468,"comment_id":108604316,"body_markdown":"And for Scala / sbt projects: Try `View` -&gt; `Tool Windows` -&gt; `Sbt projects`, then right click on the project and (`Reimport sbt project`).\n\nIf this does not work, in the sbt console do manual `clean` then `update` and then `compile`.","body":"And for Scala / sbt projects: Try <code>View</code> -&gt; <code>Tool Windows</code> -&gt; <code>Sbt projects</code>, then right click on the project and (<code>Reimport sbt project</code>).  If this does not work, in the sbt console do manual <code>clean</code> then <code>update</code> and then <code>compile</code>."}],"tags":[],"owner":{"account_id":1049814,"reputation":11925,"user_id":1054021,"accept_rate":81,"display_name":"Tobb"},"comment_count":5,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1511433549,"creation_date":1511433549,"answer_id":47453468,"question_id":47453386,"body_markdown":"Try `View` -&gt; `Tool Windows` -&gt; `Maven projects`, then click the blue icon in the top left of the tool window (`Reimport all Maven projects`). You should be able to find the dependencies in the project view, under external libraries.\r\n\r\nIf this does not work, there is probably something wrong with your maven config (pom.xml). Try `mvn clean install` from the command line see if it gives any errors.","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>Try <code>View</code> -> <code>Tool Windows</code> -> <code>Maven projects</code>, then click the blue icon in the top left of the tool window (<code>Reimport all Maven projects</code>). You should be able to find the dependencies in the project view, under external libraries.</p>\n\n<p>If this does not work, there is probably something wrong with your maven config (pom.xml). Try <code>mvn clean install</code> from the command line see if it gives any errors.</p>\n"},{"comments":[{"owner":{"account_id":1049814,"reputation":11925,"user_id":1054021,"accept_rate":81,"display_name":"Tobb"},"score":1,"creation_date":1548062257,"post_id":54284765,"comment_id":95394236,"body_markdown":"The maven idea plugin is retired, and not really useful. Better to let IDEA generate the idea files based on the pom.xml. http://maven.apache.org/plugins/maven-idea-plugin/","body":"The maven idea plugin is retired, and not really useful. Better to let IDEA generate the idea files based on the pom.xml. <a href=\"http://maven.apache.org/plugins/maven-idea-plugin/\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-idea-plugin</a>"}],"tags":[],"owner":{"account_id":10441450,"reputation":194,"user_id":7697959,"display_name":"Shivangi Gupta"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1548053528,"creation_date":1548053528,"answer_id":54284765,"question_id":47453386,"body_markdown":"You can also use command \r\n\r\n&gt; mvn -U idea:idea\r\n\r\nThis command forces a check for missing dependencies and helps in resolving them.","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>You can also use command </p>\n\n<blockquote>\n  <p>mvn -U idea:idea</p>\n</blockquote>\n\n<p>This command forces a check for missing dependencies and helps in resolving them.</p>\n"},{"tags":[],"owner":{"account_id":2779211,"reputation":4624,"user_id":2392093,"accept_rate":71,"display_name":"kvm006"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1590741672,"creation_date":1570747983,"answer_id":58332104,"question_id":47453386,"body_markdown":"My IDE was not resolving JUnit &amp; Mockito dependencies. Tried reimport in IntelliJ and mvn clean install multiple times which didn&#39;t help. Reimport worked for me, but with the following steps. \r\n\r\n**Please be aware that you will lose any run configurations that you have created.**\r\n\r\n 1. Close IntelliJ\r\n 2. Go to Project Folder and remove .idea folder (rm -rf ./idea)\r\n 3. Import Maven project again (You will need to add back any run configurations that were deleted)","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>My IDE was not resolving JUnit &amp; Mockito dependencies. Tried reimport in IntelliJ and mvn clean install multiple times which didn't help. Reimport worked for me, but with the following steps. </p>\n\n<p><strong>Please be aware that you will lose any run configurations that you have created.</strong></p>\n\n<ol>\n<li>Close IntelliJ</li>\n<li>Go to Project Folder and remove .idea folder (rm -rf ./idea)</li>\n<li>Import Maven project again (You will need to add back any run configurations that were deleted)</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2470791,"reputation":1829,"user_id":2152704,"display_name":"Mohammed Elrashidy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1591540673,"creation_date":1591540673,"answer_id":62246935,"question_id":47453386,"body_markdown":"Restartig intellIJ fixed that for me","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>Restartig intellIJ fixed that for me</p>\n"},{"tags":[],"owner":{"account_id":9336815,"reputation":1022,"user_id":6930761,"accept_rate":67,"display_name":"Max.Futerman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591704203,"creation_date":1591704203,"answer_id":62282177,"question_id":47453386,"body_markdown":"For me, I deleted org.mockito package from m2 repository and then did mvn clean install.\r\nthis reimport the package. ","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>For me, I deleted org.mockito package from m2 repository and then did mvn clean install.\nthis reimport the package. </p>\n"},{"tags":[],"owner":{"account_id":17540978,"reputation":11,"user_id":12723151,"display_name":"pali7"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638804612,"creation_date":1638804612,"answer_id":70247907,"question_id":47453386,"body_markdown":"I solved this problem by adding mockito to module I used. Just go to `File` -&gt; `Project structure` and in `Modules` add mockito to your selected module - the one in which you use mockito (usually `Test`).","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>I solved this problem by adding mockito to module I used. Just go to <code>File</code> -&gt; <code>Project structure</code> and in <code>Modules</code> add mockito to your selected module - the one in which you use mockito (usually <code>Test</code>).</p>\n"},{"tags":[],"owner":{"account_id":20664326,"reputation":59,"user_id":15171549,"display_name":"sruju333"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673929918,"creation_date":1673929918,"answer_id":75142009,"question_id":47453386,"body_markdown":"Try using lower versions of junit and mockito. \r\n\r\nThe latest versions weren&#39;t working in my project but it worked once I used lower versions.\r\n\r\n\r\nFew other things you can do: \r\n\r\n - After adding the dependency just make sure to update the maven\r\n   project. (right-click on project folder -&gt; Maven -&gt; Reload project)\r\n \r\n - You can also try clicking on the tiny m symbol on the top right to   \r\n   load maven changes or select maven button to get clean+install   \r\n   options and click play button.\r\n\r\n[![Maven Reload project][1]][1]\r\n\r\n[![Maven Load and Clean Install options][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WVWf8.png\r\n  [2]: https://i.stack.imgur.com/maRH5.png","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>Try using lower versions of junit and mockito.</p>\n<p>The latest versions weren't working in my project but it worked once I used lower versions.</p>\n<p>Few other things you can do:</p>\n<ul>\n<li><p>After adding the dependency just make sure to update the maven\nproject. (right-click on project folder -&gt; Maven -&gt; Reload project)</p>\n</li>\n<li><p>You can also try clicking on the tiny m symbol on the top right to<br />\nload maven changes or select maven button to get clean+install<br />\noptions and click play button.</p>\n</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/WVWf8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WVWf8.png\" alt=\"Maven Reload project\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/maRH5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/maRH5.png\" alt=\"Maven Load and Clean Install options\" /></a></p>\n"},{"tags":[],"owner":{"account_id":124590,"reputation":8425,"user_id":319773,"accept_rate":89,"display_name":"Bevor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695395111,"creation_date":1695395111,"answer_id":77158793,"question_id":47453386,"body_markdown":"File -&gt; Invalid Caches does the trick for me.","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>File -&gt; Invalid Caches does the trick for me.</p>\n"}],"owner":{"account_id":8881930,"reputation":11996,"user_id":6644368,"accept_rate":100,"display_name":"Yash"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30377,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":47453468,"answer_count":8,"score":12,"last_activity_date":1695395111,"creation_date":1511433323,"question_id":47453386,"body_markdown":"I am using `IntelliJ idea` for writing simple unit test cases using `JUnit` and `Mockito`. I am using Maven for dependency management.\r\n\r\n`IntelliJ idea` keeps complaining that following imports cannot be resolved:\r\n\r\n    import org.junit.Test; //Cannot resolve symbol &#39;Test&#39;\r\n\r\n    import static org.mockito.Mockito.*; //Cannot resolve symbol &#39;mockito&#39;\r\n\r\nFollowing is the `dependencies` section of my project:\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;!-- Dependency for JUnit --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;4.12&lt;/version&gt;\r\n            &lt;!--&lt;scope&gt;test&lt;/scope&gt;--&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- Dependency for Mockito --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\r\n            &lt;version&gt;1.10.19&lt;/version&gt;\r\n            &lt;!--&lt;scope&gt;test&lt;/scope&gt;--&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nFollowing is my project structure:\r\n\r\n[![Project Structure][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iAWsf.png","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>I am using <code>IntelliJ idea</code> for writing simple unit test cases using <code>JUnit</code> and <code>Mockito</code>. I am using Maven for dependency management.</p>\n\n<p><code>IntelliJ idea</code> keeps complaining that following imports cannot be resolved:</p>\n\n<pre><code>import org.junit.Test; //Cannot resolve symbol 'Test'\n\nimport static org.mockito.Mockito.*; //Cannot resolve symbol 'mockito'\n</code></pre>\n\n<p>Following is the <code>dependencies</code> section of my project:</p>\n\n<pre><code>&lt;dependencies&gt;\n    &lt;!-- Dependency for JUnit --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.12&lt;/version&gt;\n        &lt;!--&lt;scope&gt;test&lt;/scope&gt;--&gt;\n    &lt;/dependency&gt;\n    &lt;!-- Dependency for Mockito --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n        &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\n        &lt;version&gt;1.10.19&lt;/version&gt;\n        &lt;!--&lt;scope&gt;test&lt;/scope&gt;--&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>Following is my project structure:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iAWsf.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/iAWsf.png\" alt=\"Project Structure\"></a></p>\n"},{"tags":["java","interface","implementation"],"comments":[{"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"score":0,"creation_date":1454967136,"post_id":35277358,"comment_id":58271101,"body_markdown":"Reopened because this question is significantly more specific than the alleged duplicate.","body":"Reopened because this question is significantly more specific than the alleged duplicate."},{"owner":{"account_id":1671542,"reputation":11460,"user_id":1537925,"accept_rate":100,"display_name":"The Vee"},"score":1,"creation_date":1480074775,"post_id":35277358,"comment_id":68829581,"body_markdown":"For the record, if anyone is interested in what the &quot;alleged duplicate&quot; was, like myself: http://stackoverflow.com/questions/1321122/what-is-an-interface-in-java","body":"For the record, if anyone is interested in what the &quot;alleged duplicate&quot; was, like myself: <a href=\"http://stackoverflow.com/questions/1321122/what-is-an-interface-in-java\" title=\"what is an interface in java\">stackoverflow.com/questions/1321122/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":4,"creation_date":1454959433,"post_id":35277404,"comment_id":58266677,"body_markdown":"This is a &quot;link-only answer&quot;, which is considered bad form on StackOverflow because links go bad. Ask yourself how good the answer would be without the link. Unless you&#39;re prepared to make the answer sufficiently self-contained, it should be a comment instead.","body":"This is a &quot;link-only answer&quot;, which is considered bad form on StackOverflow because links go bad. Ask yourself how good the answer would be without the link. Unless you&#39;re prepared to make the answer sufficiently self-contained, it should be a comment instead."},{"owner":{"account_id":7621146,"reputation":727,"user_id":5779137,"display_name":"Hamel Kothari"},"score":0,"creation_date":1454960359,"post_id":35277404,"comment_id":58267204,"body_markdown":"I don&#39;t think the asker thinks you are limited in one implementation class. I think they were more wondering why someone would split out the interface in the case where they only had one implementation class.","body":"I don&#39;t think the asker thinks you are limited in one implementation class. I think they were more wondering why someone would split out the interface in the case where they only had one implementation class."}],"tags":[],"owner":{"account_id":3990326,"reputation":726,"user_id":5728209,"display_name":"Damanpreet Singh"},"comment_count":2,"down_vote_count":6,"up_vote_count":1,"is_accepted":false,"score":-5,"last_activity_date":1454958659,"creation_date":1454958659,"answer_id":35277404,"question_id":35277358,"body_markdown":"Interfaces can be implemented by multiple classes. There is no rule that only one class can implement these. Interfaces provide abstraction to the java. \r\n\r\nhttp://www.tutorialspoint.com/java/java_interfaces.htm\r\nYou can get more information about interfaces from this link","title":"Why should I use an interface when there is only one implementation class?","body":"<p>Interfaces can be implemented by multiple classes. There is no rule that only one class can implement these. Interfaces provide abstraction to the java. </p>\n\n<p><a href=\"http://www.tutorialspoint.com/java/java_interfaces.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/java/java_interfaces.htm</a>\nYou can get more information about interfaces from this link</p>\n"},{"comments":[{"owner":{"account_id":3801676,"reputation":2535,"user_id":3155154,"accept_rate":88,"display_name":"Nitek"},"score":3,"creation_date":1454959069,"post_id":35277463,"comment_id":58266474,"body_markdown":"I don&#39;t see the difference between handing the user an Interface vs. handing the user the implementation Class. The &quot;look and feel&quot; is the same ...","body":"I don&#39;t see the difference between handing the user an Interface vs. handing the user the implementation Class. The &quot;look and feel&quot; is the same ..."},{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":1,"creation_date":1454959124,"post_id":35277463,"comment_id":58266506,"body_markdown":"@Nitek: here&#39;s an example solved by this, where the OP wants to expose public methods to tests that he doesn&#39;t want to expose to the end-user: http://stackoverflow.com/a/6913509/217324","body":"@Nitek: here&#39;s an example solved by this, where the OP wants to expose public methods to tests that he doesn&#39;t want to expose to the end-user: <a href=\"http://stackoverflow.com/a/6913509/217324\">stackoverflow.com/a/6913509/217324</a>"},{"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"score":0,"creation_date":1454959180,"post_id":35277463,"comment_id":58266541,"body_markdown":"@Nitek That&#39;s not about look and feel, it&#39;s about isolating users of your library from things they are not supposed to see.","body":"@Nitek That&#39;s not about look and feel, it&#39;s about isolating users of your library from things they are not supposed to see."},{"owner":{"account_id":3801676,"reputation":2535,"user_id":3155154,"accept_rate":88,"display_name":"Nitek"},"score":0,"creation_date":1454959255,"post_id":35277463,"comment_id":58266578,"body_markdown":"Not sure it&#39;s good style to make methods public for tests and then try to hide them. I get that there might be a few cases where this might make sense, but I&#39;d consider this more like an edge case then good programming style.","body":"Not sure it&#39;s good style to make methods public for tests and then try to hide them. I get that there might be a few cases where this might make sense, but I&#39;d consider this more like an edge case then good programming style."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1454968861,"post_id":35277463,"comment_id":58271938,"body_markdown":"Maybe worth saying that there are also many situations where YAGNI is a good default...","body":"Maybe worth saying that there are also many situations where YAGNI is a good default..."}],"tags":[],"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"comment_count":5,"down_vote_count":2,"up_vote_count":18,"is_accepted":true,"score":16,"last_activity_date":1454959129,"creation_date":1454958860,"answer_id":35277463,"question_id":35277358,"body_markdown":"You do this to prevent others from accessing your implementing type. For example, you could hide your implementing type inside a library, give the type package access, and return an instance of your interface to the users of your library:\r\n\r\n    // This is what the users of your library know about the class\r\n    // that does the work:\r\n    public interface SomeInterface {\r\n        void doSomethingUseful();\r\n        void doSomethingElse();\r\n    }\r\n\r\n    // This is the class itself, which is hidden from your clients\r\n    class MyImplementation implements SomeInterface {\r\n        private SomeDependency dependency = new SomeDependency();\r\n        public void doSomethingUseful() {\r\n            ...\r\n        }\r\n        public void doSomethingElse() {\r\n            ...\r\n        }\r\n    }\r\n\r\nYour clients obtain objects like this:\r\n\r\n    public class MyFactory {\r\n        static SomeInterface make() {\r\n            // MyFactory can see MyImplementation\r\n            return new MyImplementation();\r\n        }\r\n    }\r\n\r\nThis trick becomes useful when the implementation uses lots of libraries. You efficiently decouple the interface of your library from its implementation, so that the user wouldn&#39;t have to know about the dependencies internal to your library.","title":"Why should I use an interface when there is only one implementation class?","body":"<p>You do this to prevent others from accessing your implementing type. For example, you could hide your implementing type inside a library, give the type package access, and return an instance of your interface to the users of your library:</p>\n\n<pre><code>// This is what the users of your library know about the class\n// that does the work:\npublic interface SomeInterface {\n    void doSomethingUseful();\n    void doSomethingElse();\n}\n\n// This is the class itself, which is hidden from your clients\nclass MyImplementation implements SomeInterface {\n    private SomeDependency dependency = new SomeDependency();\n    public void doSomethingUseful() {\n        ...\n    }\n    public void doSomethingElse() {\n        ...\n    }\n}\n</code></pre>\n\n<p>Your clients obtain objects like this:</p>\n\n<pre><code>public class MyFactory {\n    static SomeInterface make() {\n        // MyFactory can see MyImplementation\n        return new MyImplementation();\n    }\n}\n</code></pre>\n\n<p>This trick becomes useful when the implementation uses lots of libraries. You efficiently decouple the interface of your library from its implementation, so that the user wouldn't have to know about the dependencies internal to your library.</p>\n"},{"tags":[],"owner":{"account_id":4083543,"reputation":41,"user_id":3353494,"display_name":"Gerald V."},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1454960368,"creation_date":1454960368,"answer_id":35277883,"question_id":35277358,"body_markdown":"One reason is to maintain the open/closed principle, which states that your code should be open for extension, but closed for modification. Although you only have one implementing class now, chance is that you will need another differing implementation class with the passing of time. If you extract the implementation into an interface beforehand, you just have to write another implementing class ie. You don&#39;t have to modify a perfectly working piece of code, eliminating the risks of introducing bugs.","title":"Why should I use an interface when there is only one implementation class?","body":"<p>One reason is to maintain the open/closed principle, which states that your code should be open for extension, but closed for modification. Although you only have one implementing class now, chance is that you will need another differing implementation class with the passing of time. If you extract the implementation into an interface beforehand, you just have to write another implementing class ie. You don't have to modify a perfectly working piece of code, eliminating the risks of introducing bugs.</p>\n"},{"tags":[],"owner":{"account_id":6093107,"reputation":23152,"user_id":4754790,"accept_rate":94,"display_name":"Dragan Bozanovic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454960489,"creation_date":1454960489,"answer_id":35277920,"question_id":35277358,"body_markdown":"It can give you the flexibility to add more implementations in the future without changing the client code which references the interface.\r\n\r\nAnother example of when it can be useful is to simulate multiple inheritance in Java when it is needed. For example, suppose you have an interface `MyInterface` and an implementation:\r\n\r\n    public interface MyInterface {\r\n      void aMethod1();\r\n      void aMethod2();\r\n    }\r\n    \r\n    class MyInterfaceImpl implements MyInterface {\r\n      public void aMethod1() {...}\r\n      public void aMethod2() {...}\r\n    }\r\n\r\nYou also have an unrelated class with its own hierarchy:\r\n\r\n    public class SomeClass extends SomeOtherClass {\r\n     ...\r\n    }\r\n\r\nNow you want to make `SomeClass` be of type `MyInterface` but you also want to inherit all the code that is already existing in `MyInterfaceImpl`. Since you cannot extend both `SomeOtherClass` and `MyInterfaceImpl`, you can implement the interface and use delegation:\r\n\r\n    public class SomeClass extends SomeOtherClass implements MyInterface {\r\n      private MyInterface myInterface = new MyInterfaceImpl();\r\n\r\n      public void aMethod1() {\r\n        myInterface.aMethod1();\r\n      }\r\n\r\n      public void aMethod2() {\r\n        myInterface.aMethod2();\r\n      }\r\n      ...\r\n    }","title":"Why should I use an interface when there is only one implementation class?","body":"<p>It can give you the flexibility to add more implementations in the future without changing the client code which references the interface.</p>\n\n<p>Another example of when it can be useful is to simulate multiple inheritance in Java when it is needed. For example, suppose you have an interface <code>MyInterface</code> and an implementation:</p>\n\n<pre><code>public interface MyInterface {\n  void aMethod1();\n  void aMethod2();\n}\n\nclass MyInterfaceImpl implements MyInterface {\n  public void aMethod1() {...}\n  public void aMethod2() {...}\n}\n</code></pre>\n\n<p>You also have an unrelated class with its own hierarchy:</p>\n\n<pre><code>public class SomeClass extends SomeOtherClass {\n ...\n}\n</code></pre>\n\n<p>Now you want to make <code>SomeClass</code> be of type <code>MyInterface</code> but you also want to inherit all the code that is already existing in <code>MyInterfaceImpl</code>. Since you cannot extend both <code>SomeOtherClass</code> and <code>MyInterfaceImpl</code>, you can implement the interface and use delegation:</p>\n\n<pre><code>public class SomeClass extends SomeOtherClass implements MyInterface {\n  private MyInterface myInterface = new MyInterfaceImpl();\n\n  public void aMethod1() {\n    myInterface.aMethod1();\n  }\n\n  public void aMethod2() {\n    myInterface.aMethod2();\n  }\n  ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7208586,"reputation":29,"user_id":5503454,"display_name":"Alain Bienvenue"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1455129727,"creation_date":1455129727,"answer_id":35323360,"question_id":35277358,"body_markdown":"To respect the Interface Segregation Principle.\r\n\r\nThe decision to create an interface should not be based on the number of implementing classes, but rather on the number of different ways that object is used. Each ways the object is used is represented by an interface, defined with the code that uses it. Say your object needs to be stored in memory, in collections that keep objects in order. That same object and also needs to be stored in some persistent storage. \r\n\r\nSay you implement persistence first. What is needed by the storage system is a unique identifier for the persisted objects. You create an interface, say Storable, with a method getUniqueId. You then implement the storage.\r\n\r\n\r\nThen, you implement the collection. You define what the collection needs from stored objects in an interface, like Comparable, with a method compareTo. You can then implement the collection with dependency on Comparable. \r\n\r\nThe class you want to define would implement both interfaces. \r\n\r\nIf the class you are defining implement a single interface, that interface would have to represent the needs of the collection and storage system. That would cause, for example:\r\n\r\n- unit tests for the collection would have to be written with objects that implement Storable, adding a level of complexity. \r\n\r\n\r\n- if the need arise later to display the object, you would have to add methods needed by the display code to the single interface, and modify the tests for collection and storage to also implement the methods needed for display. \r\n\r\nI talk about impact on test code here. The problem is larger if other production level objects need storage and not display. The larger the project, the larger the issue created by not respecting the interface segregation principle will become. \r\n\r\n","title":"Why should I use an interface when there is only one implementation class?","body":"<p>To respect the Interface Segregation Principle.</p>\n\n<p>The decision to create an interface should not be based on the number of implementing classes, but rather on the number of different ways that object is used. Each ways the object is used is represented by an interface, defined with the code that uses it. Say your object needs to be stored in memory, in collections that keep objects in order. That same object and also needs to be stored in some persistent storage. </p>\n\n<p>Say you implement persistence first. What is needed by the storage system is a unique identifier for the persisted objects. You create an interface, say Storable, with a method getUniqueId. You then implement the storage.</p>\n\n<p>Then, you implement the collection. You define what the collection needs from stored objects in an interface, like Comparable, with a method compareTo. You can then implement the collection with dependency on Comparable. </p>\n\n<p>The class you want to define would implement both interfaces. </p>\n\n<p>If the class you are defining implement a single interface, that interface would have to represent the needs of the collection and storage system. That would cause, for example:</p>\n\n<ul>\n<li><p>unit tests for the collection would have to be written with objects that implement Storable, adding a level of complexity. </p></li>\n<li><p>if the need arise later to display the object, you would have to add methods needed by the display code to the single interface, and modify the tests for collection and storage to also implement the methods needed for display. </p></li>\n</ul>\n\n<p>I talk about impact on test code here. The problem is larger if other production level objects need storage and not display. The larger the project, the larger the issue created by not respecting the interface segregation principle will become. </p>\n"},{"tags":[],"owner":{"account_id":9795689,"reputation":1259,"user_id":7258827,"display_name":"AppleCiderGuy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640288309,"creation_date":1640288048,"answer_id":70466666,"question_id":35277358,"body_markdown":"I see a lot of good points being made in this post. Also wanted to add my 2 cents to this collection of knowledge.\r\n\r\nInterfaces Encourage parallel development in a team environment. There can be 2 classes A and B, with A calling B&#39;s API. There can be 2 developers simultaneously working on A and B. while B is not ready, A can totally go about it&#39;s own implementation by integrating with B&#39;s interfaces.\r\n\r\nInterfaces serve as a good ground for establishing API Contracts between different layers of code.\r\n\r\nIt&#39;s good to have a separation of concerns with Interface handling implicit API documentation. it&#39;s super easy to refer to one and figure which APIs are accessible for the clients to call.\r\n\r\nLastly, it&#39;s better to practice using interfaces as a standard in a project than having to use it on a case by case bases (where you need multiple implementations). This ensures consistency in your project. \r\n\r\nFor the Art that Java Code is, interfaces make thmem even more beautiful :)","title":"Why should I use an interface when there is only one implementation class?","body":"<p>I see a lot of good points being made in this post. Also wanted to add my 2 cents to this collection of knowledge.</p>\n<p>Interfaces Encourage parallel development in a team environment. There can be 2 classes A and B, with A calling B's API. There can be 2 developers simultaneously working on A and B. while B is not ready, A can totally go about it's own implementation by integrating with B's interfaces.</p>\n<p>Interfaces serve as a good ground for establishing API Contracts between different layers of code.</p>\n<p>It's good to have a separation of concerns with Interface handling implicit API documentation. it's super easy to refer to one and figure which APIs are accessible for the clients to call.</p>\n<p>Lastly, it's better to practice using interfaces as a standard in a project than having to use it on a case by case bases (where you need multiple implementations). This ensures consistency in your project.</p>\n<p>For the Art that Java Code is, interfaces make thmem even more beautiful :)</p>\n"},{"comments":[{"owner":{"account_id":460988,"reputation":266,"user_id":862414,"display_name":"Mike Sage"},"score":0,"creation_date":1673561873,"post_id":71956879,"comment_id":132533644,"body_markdown":"There are so many times when YAGNI applies here. You Ain&#39;t Gonna Need It!!!","body":"There are so many times when YAGNI applies here. You Ain&#39;t Gonna Need It!!!"}],"tags":[],"owner":{"account_id":1313740,"reputation":2571,"user_id":1261162,"accept_rate":60,"display_name":"Rafael"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1650554156,"creation_date":1650554156,"answer_id":71956879,"question_id":35277358,"body_markdown":"You shoulnt do anything without thinking and reasoning.\r\n\r\nThere might be cases where you might want to add an interface even for a single implementation ... but IMO that&#39;s an **OBSOLETE PRACTICE** coming from old EJB times, that people use and enforce without the proper reasoning and reflection.\r\n\r\n... and both Martin Fowler, Adan Bien, and others has been saying it for years.\r\n\r\nhttps://martinfowler.com/bliki/InterfaceImplementationPair.html\r\n\r\nhttps://www.adam-bien.com/roller/abien/entry/service_s_new_serviceimpl_why","title":"Why should I use an interface when there is only one implementation class?","body":"<p>You shoulnt do anything without thinking and reasoning.</p>\n<p>There might be cases where you might want to add an interface even for a single implementation ... but IMO that's an <strong>OBSOLETE PRACTICE</strong> coming from old EJB times, that people use and enforce without the proper reasoning and reflection.</p>\n<p>... and both Martin Fowler, Adan Bien, and others has been saying it for years.</p>\n<p><a href=\"https://martinfowler.com/bliki/InterfaceImplementationPair.html\" rel=\"noreferrer\">https://martinfowler.com/bliki/InterfaceImplementationPair.html</a></p>\n<p><a href=\"https://www.adam-bien.com/roller/abien/entry/service_s_new_serviceimpl_why\" rel=\"noreferrer\">https://www.adam-bien.com/roller/abien/entry/service_s_new_serviceimpl_why</a></p>\n"},{"tags":[],"owner":{"account_id":29317993,"reputation":31,"user_id":22462274,"display_name":"unimatrix10"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695394985,"creation_date":1695394985,"answer_id":77158778,"question_id":35277358,"body_markdown":"There are many good answers to this question. And my contribution is:\r\n\r\nThe interface allows you to perform code substitution without having to make changes to the code that is currently using it.\r\n\r\nThis is particularly useful for unit testing, since it allows to replace the code that is actually executed by one prepared with a particular feature/situation/configuration/calculation such as simulating* access to a database, a file, a Web Service, a mail and even prepared to test the error cases thus verifying that the code is well executed and also correctly handles the error cases and special cases. This feature of the interface can even be used for development, refactoring and testing without affecting de current code.\r\n\r\nSo if you don&#39;t have that interface you won&#39;t be able to do the substitution and therefore the automatic unit tests would not be able to take advantage of the benefits mentioned above.\r\n\r\nIf you want to see a more visual example of this I recommend you to watch the following video:\r\n\r\nhttps://www.youtube.com/watch?v=J1f5b4vcxCQ&amp;list=PLotziLf0XP1htK1RYUd1GR13ly7suM-IC&amp;index=2&amp;t=667s\r\n\r\n*In java the act of substitute to simulation or test is called &quot;mock&quot;\r\n\r\nHappy Coding;\r\n","title":"Why should I use an interface when there is only one implementation class?","body":"<p>There are many good answers to this question. And my contribution is:</p>\n<p>The interface allows you to perform code substitution without having to make changes to the code that is currently using it.</p>\n<p>This is particularly useful for unit testing, since it allows to replace the code that is actually executed by one prepared with a particular feature/situation/configuration/calculation such as simulating* access to a database, a file, a Web Service, a mail and even prepared to test the error cases thus verifying that the code is well executed and also correctly handles the error cases and special cases. This feature of the interface can even be used for development, refactoring and testing without affecting de current code.</p>\n<p>So if you don't have that interface you won't be able to do the substitution and therefore the automatic unit tests would not be able to take advantage of the benefits mentioned above.</p>\n<p>If you want to see a more visual example of this I recommend you to watch the following video:</p>\n<p><a href=\"https://www.youtube.com/watch?v=J1f5b4vcxCQ&amp;list=PLotziLf0XP1htK1RYUd1GR13ly7suM-IC&amp;index=2&amp;t=667s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=J1f5b4vcxCQ&amp;list=PLotziLf0XP1htK1RYUd1GR13ly7suM-IC&amp;index=2&amp;t=667s</a></p>\n<p>*In java the act of substitute to simulation or test is called &quot;mock&quot;</p>\n<p>Happy Coding;</p>\n"}],"owner":{"account_id":7800313,"reputation":287,"user_id":5900005,"display_name":"Qais Sahel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10373,"favorite_count":0,"down_vote_count":1,"up_vote_count":28,"accepted_answer_id":35277463,"answer_count":8,"score":27,"last_activity_date":1695394985,"creation_date":1454958487,"question_id":35277358,"body_markdown":"I&#39;m new at programming and I&#39;m learning Java. \r\nI was just wondering why I should use an interface when there is only one implementation class? ","title":"Why should I use an interface when there is only one implementation class?","body":"<p>I'm new at programming and I'm learning Java. \nI was just wondering why I should use an interface when there is only one implementation class? </p>\n"},{"tags":["java","jpa","jakarta-ee"],"answers":[{"comments":[{"owner":{"account_id":225072,"reputation":81659,"user_id":485343,"accept_rate":75,"display_name":"rustyx"},"score":8,"creation_date":1293452241,"post_id":416235,"comment_id":4973518,"body_markdown":"This is only valid for JPA 1.0. In JPA 2.0 you can use @ElementCollection annotation as shown above.","body":"This is only valid for JPA 1.0. In JPA 2.0 you can use @ElementCollection annotation as shown above."}],"tags":[],"owner":{"account_id":9867,"reputation":618201,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"comment_count":1,"down_vote_count":5,"up_vote_count":4,"is_accepted":false,"score":-1,"last_activity_date":1231242747,"creation_date":1231242747,"answer_id":416235,"question_id":416208,"body_markdown":"Collections in JPA refer to one-to-many or many-to-many relationships and they can only contain other entities.  Sorry, but you&#39;d need to wrap those enums in an entity.  If you think about it, you&#39;d need some sort of ID field and foreign key to store this information anyway.  That is unless you do something crazy like store a comma-separated list in a String (don&#39;t do this!).\r\n","title":"JPA map collection of Enums","body":"<p>Collections in JPA refer to one-to-many or many-to-many relationships and they can only contain other entities.  Sorry, but you'd need to wrap those enums in an entity.  If you think about it, you'd need some sort of ID field and foreign key to store this information anyway.  That is unless you do something crazy like store a comma-separated list in a String (don't do this!).</p>\n"},{"comments":[{"owner":{"display_name":"Walter White"},"score":160,"creation_date":1271869182,"post_id":642805,"comment_id":2704941,"body_markdown":"In case anybody reads this now ... @CollectionOfElements is now deprecated, instead use: @ElementCollection","body":"In case anybody reads this now ... @CollectionOfElements is now deprecated, instead use: @ElementCollection"},{"owner":{"account_id":150404,"reputation":42109,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"score":2,"creation_date":1313274269,"post_id":642805,"comment_id":8433897,"body_markdown":"You can find a sample in the answser of this question : http://stackoverflow.com/q/3152787/363573","body":"You can find a sample in the answser of this question : <a href=\"http://stackoverflow.com/q/3152787/363573\">stackoverflow.com/q/3152787/363573</a>"},{"owner":{"account_id":243192,"reputation":6619,"user_id":515205,"accept_rate":83,"display_name":"spaaarky21"},"score":1,"creation_date":1330980719,"post_id":642805,"comment_id":12138714,"body_markdown":"Since you mentioned Hibernate, I thought this answer might have been vendor-specific but I don&#39;t think it is unless using JoinTable causes trouble in other implementations.  From what I&#39;ve seen, I believe CollectionTable should be used instead.  That&#39;s what I used in my answer and it works for me (although yes, I am also using Hibernate right now.)","body":"Since you mentioned Hibernate, I thought this answer might have been vendor-specific but I don&#39;t think it is unless using JoinTable causes trouble in other implementations.  From what I&#39;ve seen, I believe CollectionTable should be used instead.  That&#39;s what I used in my answer and it works for me (although yes, I am also using Hibernate right now.)"},{"owner":{"account_id":177015,"reputation":3890,"user_id":408093,"display_name":"LinuxLars"},"score":0,"creation_date":1424874752,"post_id":642805,"comment_id":45729933,"body_markdown":"I know this is an old thread, but we&#39;re implementing the same kind of thing using javax.persistence. When we add:\n\n  @ElementCollection(targetClass=Roles.class)\n  @CollectionTable(\n    name=&quot;USER_ROLES&quot;,\n    joinColumns=@JoinColumn(name=&quot;USER_ID&quot;)\n  )\n  @Column(\n    name=&quot;ROLE&quot;,\n    nullable=false\n  )\n  @Enumerated(EnumType.STRING)\n  private Set&lt;Roles&gt; roles;\n\nto our User table, things flake out in the entire model package. In our User object, even an error on the Primary key&#39;s @Id...@GeneratedValue generator and the first @OneToMany throw goofy errors on build.","body":"I know this is an old thread, but we&#39;re implementing the same kind of thing using javax.persistence. When we add:    @ElementCollection(targetClass=Roles.class)   @CollectionTable(     name=&quot;USER_ROLES&quot;,     joinColumns=@JoinColumn(name=&quot;USER_ID&quot;)   )   @Column(     name=&quot;ROLE&quot;,     nullable=false   )   @Enumerated(EnumType.STRING)   private Set&lt;Roles&gt; roles;  to our User table, things flake out in the entire model package. In our User object, even an error on the Primary key&#39;s @Id...@GeneratedValue generator and the first @OneToMany throw goofy errors on build."},{"owner":{"account_id":177015,"reputation":3890,"user_id":408093,"display_name":"LinuxLars"},"score":0,"creation_date":1424876390,"post_id":642805,"comment_id":45731148,"body_markdown":"For what it&#39;s worth - the errors I&#39;m seeing are a bug - https://issues.jboss.org/browse/JBIDE-16016","body":"For what it&#39;s worth - the errors I&#39;m seeing are a bug - <a href=\"https://issues.jboss.org/browse/JBIDE-16016\" rel=\"nofollow noreferrer\">issues.jboss.org/browse/JBIDE-16016</a>"}],"tags":[],"owner":{"display_name":"ant"},"comment_count":5,"down_vote_count":1,"up_vote_count":133,"is_accepted":true,"score":132,"last_activity_date":1649100248,"creation_date":1236952247,"answer_id":642805,"question_id":416208,"body_markdown":"using Hibernate you can do\r\n\r\n  \r\n\t@ElementCollection(targetElement = InterestsEnum.class)\r\n\t@JoinTable(name = &quot;tblInterests&quot;, joinColumns = @JoinColumn(name = &quot;personID&quot;))\r\n\t@Column(name = &quot;interest&quot;, nullable = false)\r\n\t@Enumerated(EnumType.STRING)\r\n\tCollection&lt;InterestsEnum&gt; interests;\r\n","title":"JPA map collection of Enums","body":"<p>using Hibernate you can do</p>\n<pre><code>@ElementCollection(targetElement = InterestsEnum.class)\n@JoinTable(name = &quot;tblInterests&quot;, joinColumns = @JoinColumn(name = &quot;personID&quot;))\n@Column(name = &quot;interest&quot;, nullable = false)\n@Enumerated(EnumType.STRING)\nCollection&lt;InterestsEnum&gt; interests;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":26568,"reputation":15517,"user_id":69258,"display_name":"DataNucleus"},"score":5,"creation_date":1366797127,"post_id":9458969,"comment_id":23143775,"body_markdown":"Sadly some &quot;admin&quot; decided to delete that answer without giving a reason (about par for the course here). For the reference it is http://www.datanucleus.org/products/accessplatform_3_0/jpa/orm/one_to_many_collection.html#join_nonpc","body":"Sadly some &quot;admin&quot; decided to delete that answer without giving a reason (about par for the course here). For the reference it is <a href=\"http://www.datanucleus.org/products/accessplatform_3_0/jpa/orm/one_to_many_collection.html#join_nonpc\" rel=\"nofollow noreferrer\">datanucleus.org/products/accessplatform_3_0/jpa/orm/&hellip;</a>"},{"owner":{"account_id":1380055,"reputation":17338,"user_id":1313268,"accept_rate":88,"display_name":"CorayThan"},"score":5,"creation_date":1368032915,"post_id":9458969,"comment_id":23589639,"body_markdown":"All you actually need out of this is `@ElementCollection` and `Collection&lt;InterestsEnum&gt; interests;`  The rest is potentially useful but unnecessary. For example `@Enumerated(EnumType.STRING)` puts human readable strings in your database.","body":"All you actually need out of this is <code>@ElementCollection</code> and <code>Collection&lt;InterestsEnum&gt; interests;</code>  The rest is potentially useful but unnecessary. For example <code>@Enumerated(EnumType.STRING)</code> puts human readable strings in your database."},{"owner":{"account_id":243192,"reputation":6619,"user_id":515205,"accept_rate":83,"display_name":"spaaarky21"},"score":2,"creation_date":1368041658,"post_id":9458969,"comment_id":23594152,"body_markdown":"You are correct - in this example, you could rely on the `@Column`&#39;s `name` being implied. I just wanted to clarify what is implied when @Column is omitted. And @Enumerated is always recommended since ordinal is an awful thing to default to. :)","body":"You are correct - in this example, you could rely on the <code>@Column</code>&#39;s <code>name</code> being implied. I just wanted to clarify what is implied when @Column is omitted. And @Enumerated is always recommended since ordinal is an awful thing to default to. :)"},{"owner":{"account_id":2929147,"reputation":1706,"user_id":2509844,"accept_rate":90,"display_name":"lukaszrys"},"score":0,"creation_date":1414161406,"post_id":9458969,"comment_id":41722563,"body_markdown":"I think its worth to mention that you actually need person_interest table","body":"I think its worth to mention that you actually need person_interest table"},{"owner":{"account_id":1098324,"reputation":2941,"user_id":1091424,"accept_rate":86,"display_name":"Tiago"},"score":1,"creation_date":1441047600,"post_id":9458969,"comment_id":52511168,"body_markdown":"I had to add the joinColumn parameter to make it work `@CollectionTable(name=&quot;person_interest&quot;, joinColumns = {@JoinColumn(name=&quot;person_id&quot;)})`","body":"I had to add the joinColumn parameter to make it work <code>@CollectionTable(name=&quot;person_interest&quot;, joinColumns = {@JoinColumn(name=&quot;person_id&quot;)})</code>"}],"tags":[],"owner":{"account_id":243192,"reputation":6619,"user_id":515205,"accept_rate":83,"display_name":"spaaarky21"},"comment_count":5,"down_vote_count":1,"up_vote_count":78,"is_accepted":false,"score":77,"last_activity_date":1330305869,"creation_date":1330305869,"answer_id":9458969,"question_id":416208,"body_markdown":"The link in Andy&#39;s answer is a great starting point for mapping collections of &quot;non-Entity&quot; objects in JPA 2, but isn&#39;t quite complete when it comes to mapping enums.  Here is what I came up with instead.\r\n\r\n    @Entity\r\n    public class Person {\r\n        @ElementCollection(targetClass=InterestsEnum.class)\r\n        @Enumerated(EnumType.STRING) // Possibly optional (I&#39;m not sure) but defaults to ORDINAL.\r\n        @CollectionTable(name=&quot;person_interest&quot;)\r\n        @Column(name=&quot;interest&quot;) // Column name in person_interest\r\n        Collection&lt;InterestsEnum&gt; interests;\r\n    }","title":"JPA map collection of Enums","body":"<p>The link in Andy's answer is a great starting point for mapping collections of \"non-Entity\" objects in JPA 2, but isn't quite complete when it comes to mapping enums.  Here is what I came up with instead.</p>\n\n<pre><code>@Entity\npublic class Person {\n    @ElementCollection(targetClass=InterestsEnum.class)\n    @Enumerated(EnumType.STRING) // Possibly optional (I'm not sure) but defaults to ORDINAL.\n    @CollectionTable(name=\"person_interest\")\n    @Column(name=\"interest\") // Column name in person_interest\n    Collection&lt;InterestsEnum&gt; interests;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5502833,"reputation":8715,"user_id":4371659,"accept_rate":80,"display_name":"Tobias Liefke"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1422424246,"creation_date":1422397631,"answer_id":28181217,"question_id":416208,"body_markdown":"I&#39;m using a slight modification of java.util.RegularEnumSet to have a persistent EnumSet:\r\n\r\n    @MappedSuperclass\r\n    @Access(AccessType.FIELD)\r\n    public class PersistentEnumSet&lt;E extends Enum&lt;E&gt;&gt; \r\n        extends AbstractSet&lt;E&gt; {\r\n      private long elements;\r\n\r\n      @Transient\r\n      private final Class&lt;E&gt; elementType;\r\n\r\n      @Transient\r\n      private final E[] universe;\r\n        \r\n      public PersistentEnumSet(final Class&lt;E&gt; elementType) {\r\n        this.elementType = elementType;\r\n        try {\r\n          this.universe = (E[]) elementType.getMethod(&quot;values&quot;).invoke(null);\r\n        } catch (final ReflectiveOperationException e) {\r\n          throw new IllegalArgumentException(&quot;Not an enum type: &quot; + elementType, e);\r\n        }\r\n        if (this.universe.length &gt; 64) {\r\n          throw new IllegalArgumentException(&quot;More than 64 enum elements are not allowed&quot;);\r\n        }\r\n      }\r\n\r\n      // Copy everything else from java.util.RegularEnumSet\r\n      // ...\r\n    }\r\n\r\nThis class is now the base for all of my enum sets:\r\n\r\n    @Embeddable\r\n    public class InterestsSet extends PersistentEnumSet&lt;InterestsEnum&gt; {\r\n      public InterestsSet() {\r\n        super(InterestsEnum.class);\r\n      }\r\n    }\r\n\r\nAnd that set I can use in my entity:\r\n\r\n    @Entity\r\n    public class MyEntity {\r\n      // ...\r\n      @Embedded\r\n      @AttributeOverride(name=&quot;elements&quot;, column=@Column(name=&quot;interests&quot;))\r\n      private InterestsSet interests = new InterestsSet();\r\n    }\r\n\r\n*Advantages:*\r\n\r\n - Working with a type safe and performant enum set in your code (see `java.util.EnumSet` for a description)\r\n - The set is just one numeric column in the database\r\n - everything is plain JPA (no provider specific *custom types*)\r\n - easy (and short) declaration of new fields of the same type, compared with the other solutions\r\n\r\n*Drawbacks:*\r\n\r\n - Code duplication (`RegularEnumSet` and `PersistentEnumSet` are nearly the same) \r\n   - You could wrap the result of `EnumSet.noneOf(enumType)` in your `PersistenEnumSet`, declare `AccessType.PROPERTY` and provide two access methods which use reflection to read and write the `elements` field\r\n - An additional set class is needed for every enum class that should be stored in a persistent set\r\n   - If your persistence provider supports embeddables without a public    constructor, you could add `@Embeddable` to `PersistentEnumSet` and drop the\r\n   extra class (`... interests = new PersistentEnumSet&lt;&gt;(InterestsEnum.class);`)\r\n - You must use an `@AttributeOverride`, as given in my example, if you&#39;ve got more than one `PersistentEnumSet` in your entity (otherwise both    would be stored to the same column &quot;elements&quot;)\r\n - The access of `values()` with reflection in the constructor is not optimal (especially when looking at the performance), but the two other options have their drawbacks as well: \r\n   - An implementation like `EnumSet.getUniverse()` makes use of a `sun.misc` class\r\n   - Providing the values array as parameter has the risk that the given values are not the correct ones\r\n - Only enums with up to 64 values are supported (is that really a drawback?)\r\n    - You could use BigInteger instead\r\n - It&#39;s not easy to use the elements field in a criteria query or JPQL\r\n    - You could use binary operators or a bitmask column with the appropriate functions, if your database supports that","title":"JPA map collection of Enums","body":"<p>I'm using a slight modification of java.util.RegularEnumSet to have a persistent EnumSet:</p>\n\n<pre><code>@MappedSuperclass\n@Access(AccessType.FIELD)\npublic class PersistentEnumSet&lt;E extends Enum&lt;E&gt;&gt; \n    extends AbstractSet&lt;E&gt; {\n  private long elements;\n\n  @Transient\n  private final Class&lt;E&gt; elementType;\n\n  @Transient\n  private final E[] universe;\n\n  public PersistentEnumSet(final Class&lt;E&gt; elementType) {\n    this.elementType = elementType;\n    try {\n      this.universe = (E[]) elementType.getMethod(\"values\").invoke(null);\n    } catch (final ReflectiveOperationException e) {\n      throw new IllegalArgumentException(\"Not an enum type: \" + elementType, e);\n    }\n    if (this.universe.length &gt; 64) {\n      throw new IllegalArgumentException(\"More than 64 enum elements are not allowed\");\n    }\n  }\n\n  // Copy everything else from java.util.RegularEnumSet\n  // ...\n}\n</code></pre>\n\n<p>This class is now the base for all of my enum sets:</p>\n\n<pre><code>@Embeddable\npublic class InterestsSet extends PersistentEnumSet&lt;InterestsEnum&gt; {\n  public InterestsSet() {\n    super(InterestsEnum.class);\n  }\n}\n</code></pre>\n\n<p>And that set I can use in my entity:</p>\n\n<pre><code>@Entity\npublic class MyEntity {\n  // ...\n  @Embedded\n  @AttributeOverride(name=\"elements\", column=@Column(name=\"interests\"))\n  private InterestsSet interests = new InterestsSet();\n}\n</code></pre>\n\n<p><em>Advantages:</em></p>\n\n<ul>\n<li>Working with a type safe and performant enum set in your code (see <code>java.util.EnumSet</code> for a description)</li>\n<li>The set is just one numeric column in the database</li>\n<li>everything is plain JPA (no provider specific <em>custom types</em>)</li>\n<li>easy (and short) declaration of new fields of the same type, compared with the other solutions</li>\n</ul>\n\n<p><em>Drawbacks:</em></p>\n\n<ul>\n<li>Code duplication (<code>RegularEnumSet</code> and <code>PersistentEnumSet</code> are nearly the same) \n<ul>\n<li>You could wrap the result of <code>EnumSet.noneOf(enumType)</code> in your <code>PersistenEnumSet</code>, declare <code>AccessType.PROPERTY</code> and provide two access methods which use reflection to read and write the <code>elements</code> field</li>\n</ul></li>\n<li>An additional set class is needed for every enum class that should be stored in a persistent set\n<ul>\n<li>If your persistence provider supports embeddables without a public    constructor, you could add <code>@Embeddable</code> to <code>PersistentEnumSet</code> and drop the\nextra class (<code>... interests = new PersistentEnumSet&lt;&gt;(InterestsEnum.class);</code>)</li>\n</ul></li>\n<li>You must use an <code>@AttributeOverride</code>, as given in my example, if you've got more than one <code>PersistentEnumSet</code> in your entity (otherwise both    would be stored to the same column \"elements\")</li>\n<li>The access of <code>values()</code> with reflection in the constructor is not optimal (especially when looking at the performance), but the two other options have their drawbacks as well: \n<ul>\n<li>An implementation like <code>EnumSet.getUniverse()</code> makes use of a <code>sun.misc</code> class</li>\n<li>Providing the values array as parameter has the risk that the given values are not the correct ones</li>\n</ul></li>\n<li>Only enums with up to 64 values are supported (is that really a drawback?)\n<ul>\n<li>You could use BigInteger instead</li>\n</ul></li>\n<li>It's not easy to use the elements field in a criteria query or JPQL\n<ul>\n<li>You could use binary operators or a bitmask column with the appropriate functions, if your database supports that</li>\n</ul></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":395861,"reputation":3742,"user_id":759042,"accept_rate":62,"display_name":"aha"},"score":0,"creation_date":1631794333,"post_id":42963219,"comment_id":122321998,"body_markdown":"[`FetchType.EAGER` is never the right answer for lazy-loading problems](https://thorben-janssen.com/lazyinitializationexception/#Don8217t_use_FetchTypeEAGER) because the JPA provider rarely uses a JOIN. As explained in https://stackoverflow.com/a/39129988/759042, `JOIN FETCH` is supported.","body":"<a href=\"https://thorben-janssen.com/lazyinitializationexception/#Don8217t_use_FetchTypeEAGER\" rel=\"nofollow noreferrer\"><code>FetchType.EAGER</code> is never the right answer for lazy-loading problems</a> because the JPA provider rarely uses a JOIN. As explained in <a href=\"https://stackoverflow.com/a/39129988/759042\">stackoverflow.com/a/39129988/759042</a>, <code>JOIN FETCH</code> is supported."},{"owner":{"account_id":3380825,"reputation":71,"user_id":2837901,"display_name":"Amrit Raj"},"score":0,"creation_date":1658229273,"post_id":42963219,"comment_id":128994511,"body_markdown":"@megalucio  does it creates a new table too?","body":"@megalucio  does it creates a new table too?"}],"tags":[],"owner":{"account_id":5564647,"reputation":5151,"user_id":4412414,"accept_rate":100,"display_name":"megalucio"},"comment_count":2,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1490219097,"creation_date":1490219097,"answer_id":42963219,"question_id":416208,"body_markdown":"I was able to accomplish this in this simple way:\r\n\r\n    @ElementCollection(fetch = FetchType.EAGER)\r\n    Collection&lt;InterestsEnum&gt; interests;\r\n\r\nEager loading is required in order to avoid lazy loading inizializing error as explained [here][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/11746499/solve-failed-to-lazily-initialize-a-collection-of-role-exception","title":"JPA map collection of Enums","body":"<p>I was able to accomplish this in this simple way:</p>\n\n<pre><code>@ElementCollection(fetch = FetchType.EAGER)\nCollection&lt;InterestsEnum&gt; interests;\n</code></pre>\n\n<p>Eager loading is required in order to avoid lazy loading inizializing error as explained <a href=\"https://stackoverflow.com/questions/11746499/solve-failed-to-lazily-initialize-a-collection-of-role-exception\">here</a>.</p>\n"},{"comments":[{"owner":{"account_id":6063952,"reputation":136,"user_id":4734929,"accept_rate":67,"display_name":"Nicolazz92"},"score":0,"creation_date":1598373125,"post_id":61282876,"comment_id":112435618,"body_markdown":"In this case I cannot change this collection because it saves as a PersistenceSet which is immutable.","body":"In this case I cannot change this collection because it saves as a PersistenceSet which is immutable."},{"owner":{"account_id":6063952,"reputation":136,"user_id":4734929,"accept_rate":67,"display_name":"Nicolazz92"},"score":0,"creation_date":1598374691,"post_id":61282876,"comment_id":112436300,"body_markdown":"My mistake. We can change this set with a setter.","body":"My mistake. We can change this set with a setter."}],"tags":[],"owner":{"account_id":2932312,"reputation":1029,"user_id":2766687,"display_name":"Bruno Morais"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1695394899,"creation_date":1587170478,"answer_id":61282876,"question_id":416208,"body_markdown":"tl;dr A short solution would be the following:\r\n\r\n    @ElementCollection(targetClass = InterestsEnum.class)\r\n    @CollectionTable\r\n    @Enumerated(EnumType.STRING)\r\n    Collection&lt;InterestsEnum&gt; interests;\r\n\r\nThe long answer is that with this annotations JPA will create one table that will hold the list of InterestsEnum pointing to the main class identifier (Person.class in this case).\r\n\r\n`@ElementCollections` specify where JPA can find information about the Enum.\r\n\r\n`@CollectionTable` create the table that hold relationship from Person to InterestsEnum\r\n\r\n`@Enumerated(EnumType.STRING)` tells JPA to persist the Enum as String, could be `EnumType.ORDINAL`.","title":"JPA map collection of Enums","body":"<p>tl;dr A short solution would be the following:</p>\n<pre><code>@ElementCollection(targetClass = InterestsEnum.class)\n@CollectionTable\n@Enumerated(EnumType.STRING)\nCollection&lt;InterestsEnum&gt; interests;\n</code></pre>\n<p>The long answer is that with this annotations JPA will create one table that will hold the list of InterestsEnum pointing to the main class identifier (Person.class in this case).</p>\n<p><code>@ElementCollections</code> specify where JPA can find information about the Enum.</p>\n<p><code>@CollectionTable</code> create the table that hold relationship from Person to InterestsEnum</p>\n<p><code>@Enumerated(EnumType.STRING)</code> tells JPA to persist the Enum as String, could be <code>EnumType.ORDINAL</code>.</p>\n"}],"owner":{"account_id":18523,"reputation":5667,"user_id":42512,"accept_rate":73,"display_name":"Gennady Shumakher"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97825,"favorite_count":0,"down_vote_count":0,"up_vote_count":111,"accepted_answer_id":642805,"answer_count":6,"score":111,"last_activity_date":1695394899,"creation_date":1231242019,"question_id":416208,"body_markdown":"Is there a way in JPA to map a collection of Enums within the Entity class? Or the only solution is to wrap Enum with another domain class and use it to map the collection?\r\n\r\n\r\n\r\n    @Entity\r\n    public class Person {\r\n        public enum InterestsEnum {Books, Sport, etc...  }\r\n        //@???\r\n        Collection&lt;InterestsEnum&gt; interests;\r\n    }\r\n\r\nI am using Hibernate JPA implementation, but of course would prefer implementation agnostic solution.\r\n\r\n\r\n","title":"JPA map collection of Enums","body":"<p>Is there a way in JPA to map a collection of Enums within the Entity class? Or the only solution is to wrap Enum with another domain class and use it to map the collection?</p>\n\n<pre><code>@Entity\npublic class Person {\n    public enum InterestsEnum {Books, Sport, etc...  }\n    //@???\n    Collection&lt;InterestsEnum&gt; interests;\n}\n</code></pre>\n\n<p>I am using Hibernate JPA implementation, but of course would prefer implementation agnostic solution.</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":5419194,"reputation":5240,"user_id":4313437,"display_name":"sahitya"},"score":0,"creation_date":1441029294,"post_id":32312876,"comment_id":52500962,"body_markdown":"If you can use it, HashSet will ignore the key, if it already exists.","body":"If you can use it, HashSet will ignore the key, if it already exists."},{"owner":{"account_id":1315495,"reputation":17293,"user_id":1262477,"accept_rate":74,"display_name":"Patan"},"score":0,"creation_date":1441029528,"post_id":32312876,"comment_id":52501126,"body_markdown":"@captain-aryabhatta. Is it possible to have key values in hashset","body":"@captain-aryabhatta. Is it possible to have key values in hashset"}],"answers":[{"comments":[{"owner":{"account_id":42068,"reputation":20631,"user_id":122441,"accept_rate":70,"display_name":"Hendy Irawan"},"score":14,"creation_date":1502716658,"post_id":32313069,"comment_id":78308294,"body_markdown":"I&#39;m confused, why is duplicate **values** (not keys) not allowed? And how to allow duplicate values?","body":"I&#39;m confused, why is duplicate <b>values</b> (not keys) not allowed? And how to allow duplicate values?"},{"owner":{"account_id":81003,"reputation":5487,"user_id":228689,"accept_rate":84,"display_name":"Guillaume"},"score":0,"creation_date":1507044937,"post_id":32313069,"comment_id":80050806,"body_markdown":"is there any way to retrieve the key for which the collision occurs ?\nanswer here: https://stackoverflow.com/questions/40761954/collectors-tomap-with-same-keysprint-same-key","body":"is there any way to retrieve the key for which the collision occurs ? answer here: <a href=\"https://stackoverflow.com/questions/40761954/collectors-tomap-with-same-keysprint-same-key\" title=\"collectors tomap with same keysprint same key\">stackoverflow.com/questions/40761954/&hellip;</a>"},{"owner":{"account_id":8653896,"reputation":590,"user_id":6478781,"display_name":"djkelly99"},"score":2,"creation_date":1532603563,"post_id":32313069,"comment_id":90042367,"body_markdown":"Is it possible to totally ignore this entry if there&#39;s a clash?  Basically, if I ever encounter duplicate keys I don&#39;t want them to be added at all.  In the example above, I don&#39;t want address1 or address2 in my map.","body":"Is it possible to totally ignore this entry if there&#39;s a clash?  Basically, if I ever encounter duplicate keys I don&#39;t want them to be added at all.  In the example above, I don&#39;t want address1 or address2 in my map."},{"owner":{"account_id":10042541,"reputation":2660,"user_id":7424948,"display_name":"Ricola"},"score":31,"creation_date":1546188458,"post_id":32313069,"comment_id":94796362,"body_markdown":"@Hendy Irawan : duplicate values are allowed. The merging function is to chose between (or merge) two values that **have the same key**.","body":"@Hendy Irawan : duplicate values are allowed. The merging function is to chose between (or merge) two values that <b>have the same key</b>."},{"owner":{"account_id":10042541,"reputation":2660,"user_id":7424948,"display_name":"Ricola"},"score":6,"creation_date":1546188773,"post_id":32313069,"comment_id":94796459,"body_markdown":"@djkelly99 Actually you can, you just have to make your remapping function return `null`. \nSee [toMap doc](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function,java.util.function.BinaryOperator)) that point to [merge doc](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)) that states _If the remapping function returns null, the mapping is removed._","body":"@djkelly99 Actually you can, you just have to make your remapping function return <code>null</code>.  See <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function,java.util.function.BinaryOperator)\" rel=\"nofollow noreferrer\">toMap doc</a> that point to <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\">merge doc</a> that states <i>If the remapping function returns null, the mapping is removed.</i>"},{"owner":{"account_id":4226254,"reputation":2400,"user_id":3459721,"accept_rate":86,"display_name":"lvoelk"},"score":4,"creation_date":1554217280,"post_id":32313069,"comment_id":97666044,"body_markdown":"Shouldn&#39;t we return address2 to mimic standard map behavior.  If this where a for each instead of a collect the standard behavior would be that put on the second address would wipe out the first.  Thus to avoid changes in behavior when code refactoring occurs address2 is the logical choice.","body":"Shouldn&#39;t we return address2 to mimic standard map behavior.  If this where a for each instead of a collect the standard behavior would be that put on the second address would wipe out the first.  Thus to avoid changes in behavior when code refactoring occurs address2 is the logical choice."},{"owner":{"account_id":1723085,"reputation":3842,"user_id":1578356,"accept_rate":63,"display_name":"newday"},"score":1,"creation_date":1594771666,"post_id":32313069,"comment_id":111241858,"body_markdown":"@Ricola if there are 3 duplicate entries then it will ignore the first two entries but it will pick the third one. I tried with distinct() method to the stream too but same issue.","body":"@Ricola if there are 3 duplicate entries then it will ignore the first two entries but it will pick the third one. I tried with distinct() method to the stream too but same issue."},{"owner":{"account_id":10042541,"reputation":2660,"user_id":7424948,"display_name":"Ricola"},"score":1,"creation_date":1594999855,"post_id":32313069,"comment_id":111332847,"body_markdown":"@newday I&#39;m not sure I understand what you want. This code will pick the first one. If you *want* to pick the last one return address2 instead.","body":"@newday I&#39;m not sure I understand what you want. This code will pick the first one. If you <i>want</i> to pick the last one return address2 instead."},{"owner":{"account_id":1734438,"reputation":36275,"user_id":1587329,"accept_rate":94,"display_name":"serv-inc"},"score":1,"creation_date":1632916912,"post_id":32313069,"comment_id":122621424,"body_markdown":"@Ricola : it might be that newday meant that returning `null` for the first comparison to skip entry creation still creates one if there&#39;s a third with the same key","body":"@Ricola : it might be that newday meant that returning <code>null</code> for the first comparison to skip entry creation still creates one if there&#39;s a third with the same key"},{"owner":{"account_id":8001381,"reputation":203,"user_id":6036094,"display_name":"Koen van der Marel"},"score":0,"creation_date":1674054657,"post_id":32313069,"comment_id":132633578,"body_markdown":"@HendyIrawan In a hashmap the index of a value is based on it&#39;s key value. In the background there is a hashing function which converts the key into an index. If the same key would be inserted the new value should be placed on the exact same place as the previous value. There are multiple solutions upon resolving this issue, but codewise in the first this is not allowed.","body":"@HendyIrawan In a hashmap the index of a value is based on it&#39;s key value. In the background there is a hashing function which converts the key into an index. If the same key would be inserted the new value should be placed on the exact same place as the previous value. There are multiple solutions upon resolving this issue, but codewise in the first this is not allowed."}],"tags":[],"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"comment_count":10,"down_vote_count":1,"up_vote_count":656,"is_accepted":true,"score":655,"last_activity_date":1471618062,"creation_date":1441029527,"answer_id":32313069,"question_id":32312876,"body_markdown":"This is possible using the `mergeFunction` parameter of [`Collectors.toMap(keyMapper, valueMapper, mergeFunction)`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-):\r\n\r\n    Map&lt;String, String&gt; phoneBook = \r\n        people.stream()\r\n              .collect(Collectors.toMap(\r\n                 Person::getName,\r\n                 Person::getAddress,\r\n                 (address1, address2) -&gt; {\r\n                     System.out.println(&quot;duplicate key found!&quot;);\r\n                     return address1;\r\n                 }\r\n              ));\r\n\r\n`mergeFunction` is a function that operates on two values associated with the same key. `adress1` corresponds to the first address that was encountered when collecting elements and `adress2` corresponds to the second address encountered: this lambda just tells to keep the first address and ignores the second.","title":"Ignore duplicates when producing map using streams","body":"<p>This is possible using the <code>mergeFunction</code> parameter of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-\" rel=\"noreferrer\"><code>Collectors.toMap(keyMapper, valueMapper, mergeFunction)</code></a>:</p>\n\n<pre><code>Map&lt;String, String&gt; phoneBook = \n    people.stream()\n          .collect(Collectors.toMap(\n             Person::getName,\n             Person::getAddress,\n             (address1, address2) -&gt; {\n                 System.out.println(\"duplicate key found!\");\n                 return address1;\n             }\n          ));\n</code></pre>\n\n<p><code>mergeFunction</code> is a function that operates on two values associated with the same key. <code>adress1</code> corresponds to the first address that was encountered when collecting elements and <code>adress2</code> corresponds to the second address encountered: this lambda just tells to keep the first address and ignores the second.</p>\n"},{"comments":[{"owner":{"account_id":14537432,"reputation":874,"user_id":10500330,"display_name":"Anurag Bhalekar"},"score":2,"creation_date":1679405210,"post_id":32313148,"comment_id":133713012,"body_markdown":"This could be a serious data loss if not understood correctly.","body":"This could be a serious data loss if not understood correctly."},{"owner":{"account_id":1227394,"reputation":3921,"user_id":1192702,"accept_rate":75,"display_name":"alaster"},"score":1,"creation_date":1679570883,"post_id":32313148,"comment_id":133746919,"body_markdown":"Well, yes. In most cases duplicated values must be somehow combined or exception is thrown (by default and it&#39;s correct behavior). But in some rare cases you need to ignore duplicate, and that was the question.","body":"Well, yes. In most cases duplicated values must be somehow combined or exception is thrown (by default and it&#39;s correct behavior). But in some rare cases you need to ignore duplicate, and that was the question."}],"tags":[],"owner":{"account_id":1227394,"reputation":3921,"user_id":1192702,"accept_rate":75,"display_name":"alaster"},"comment_count":2,"down_vote_count":1,"up_vote_count":184,"is_accepted":false,"score":183,"last_activity_date":1668698310,"creation_date":1441029782,"answer_id":32313148,"question_id":32312876,"body_markdown":"As said in [JavaDocs][1]:\r\n\r\n&gt; If the mapped keys contains duplicates (according to\r\n&gt; `Object.equals(Object)`), an `IllegalStateException` is thrown when the\r\n&gt; collection operation is performed. If the mapped keys may have\r\n&gt; duplicates, use `toMap(Function keyMapper, Function valueMapper, BinaryOperator mergeFunction)` instead.\r\n\r\nSo you should use [`toMap(Function keyMapper, Function valueMapper, BinaryOperator mergeFunction)`][2] instead. Just provide a **merge function**, that will determine which one of duplicates is put in the map. \r\n\r\nFor example, if you don&#39;t care which one, just call\r\n\r\n    Map&lt;String, String&gt; phoneBook = people.stream().collect(\r\n            Collectors.toMap(Person::getName, Person::getAddress, (a1, a2) -&gt; a1));\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-","title":"Ignore duplicates when producing map using streams","body":"<p>As said in <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-\" rel=\"noreferrer\">JavaDocs</a>:</p>\n<blockquote>\n<p>If the mapped keys contains duplicates (according to\n<code>Object.equals(Object)</code>), an <code>IllegalStateException</code> is thrown when the\ncollection operation is performed. If the mapped keys may have\nduplicates, use <code>toMap(Function keyMapper, Function valueMapper, BinaryOperator mergeFunction)</code> instead.</p>\n</blockquote>\n<p>So you should use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-\" rel=\"noreferrer\"><code>toMap(Function keyMapper, Function valueMapper, BinaryOperator mergeFunction)</code></a> instead. Just provide a <strong>merge function</strong>, that will determine which one of duplicates is put in the map.</p>\n<p>For example, if you don't care which one, just call</p>\n<pre><code>Map&lt;String, String&gt; phoneBook = people.stream().collect(\n        Collectors.toMap(Person::getName, Person::getAddress, (a1, a2) -&gt; a1));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1647608948,"creation_date":1529519460,"answer_id":50954897,"question_id":32312876,"body_markdown":"The answer from [alaster][1] helped me a lot, but I would like to add  meaningful information if someone is trying to **group** the data.\r\n\r\nIf you have, for example, two `Orders` with the same `code` but different `quantity` of products for each one, and your desire is to **sum** the quantities, you can do the following:\r\n\r\n    List&lt;Order&gt; listQuantidade = new ArrayList&lt;&gt;();\r\n    listOrders.add(new Order(&quot;COD_1&quot;, 1L));\r\n    listOrders.add(new Order(&quot;COD_1&quot;, 5L));\r\n    listOrders.add(new Order(&quot;COD_1&quot;, 3L));\r\n    listOrders.add(new Order(&quot;COD_2&quot;, 3L));\r\n    listOrders.add(new Order(&quot;COD_3&quot;, 4L));\r\n\r\n\tlistOrders.collect(Collectors.toMap(Order::getCode, \r\n                                        o -&gt; o.getQuantity(), \r\n                                        (o1, o2) -&gt; o1 + o2));\r\n\r\nResult:\r\n\r\n    {COD_3=4, COD_2=3, COD_1=9}\r\n\r\nOr, from the [javadocs][2], you can combine addresses:\r\n\r\n     Map&lt;String, String&gt; phoneBook\r\n         people.stream().collect(toMap(Person::getName,\r\n                                       Person::getAddress,\r\n                                       (s, a) -&gt; s + &quot;, &quot; + a));\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/1192702/alaster\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-","title":"Ignore duplicates when producing map using streams","body":"<p>The answer from <a href=\"https://stackoverflow.com/users/1192702/alaster\">alaster</a> helped me a lot, but I would like to add  meaningful information if someone is trying to <strong>group</strong> the data.</p>\n<p>If you have, for example, two <code>Orders</code> with the same <code>code</code> but different <code>quantity</code> of products for each one, and your desire is to <strong>sum</strong> the quantities, you can do the following:</p>\n<pre><code>List&lt;Order&gt; listQuantidade = new ArrayList&lt;&gt;();\nlistOrders.add(new Order(&quot;COD_1&quot;, 1L));\nlistOrders.add(new Order(&quot;COD_1&quot;, 5L));\nlistOrders.add(new Order(&quot;COD_1&quot;, 3L));\nlistOrders.add(new Order(&quot;COD_2&quot;, 3L));\nlistOrders.add(new Order(&quot;COD_3&quot;, 4L));\n\nlistOrders.collect(Collectors.toMap(Order::getCode, \n                                    o -&gt; o.getQuantity(), \n                                    (o1, o2) -&gt; o1 + o2));\n</code></pre>\n<p>Result:</p>\n<pre><code>{COD_3=4, COD_2=3, COD_1=9}\n</code></pre>\n<p>Or, from the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-\" rel=\"noreferrer\">javadocs</a>, you can combine addresses:</p>\n<pre><code> Map&lt;String, String&gt; phoneBook\n     people.stream().collect(toMap(Person::getName,\n                                   Person::getAddress,\n                                   (s, a) -&gt; s + &quot;, &quot; + a));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6174988,"reputation":11040,"user_id":4812170,"accept_rate":73,"display_name":"vaquar khan"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1543443856,"creation_date":1543443856,"answer_id":53529006,"question_id":32312876,"body_markdown":"Assuming you have people is List of object \r\n\r\n  \r\n\r\n      Map&lt;String, String&gt; phoneBook=people.stream()\r\n                                            .collect(toMap(Person::getName, Person::getAddress));\r\n\r\n \r\nNow you need two steps :\r\n\r\n1) \r\n\r\n    people =removeDuplicate(people);\r\n\r\n\r\n2) \r\n\r\n    Map&lt;String, String&gt; phoneBook=people.stream()\r\n                                            .collect(toMap(Person::getName, Person::getAddress));\r\n\r\nHere is method to remove duplicate \r\n\r\n    public static List removeDuplicate(Collection&lt;Person&gt;  list) {\r\n        \tif(list ==null || list.isEmpty()){\r\n        \t\treturn null;\r\n        \t}\r\n        \t\r\n        \tObject removedDuplicateList =\r\n        \t\t\tlist.stream()\r\n                         .distinct()\r\n                         .collect(Collectors.toList());\r\n         return (List) removedDuplicateList;\r\n           \r\n          }\r\n\r\n\r\nAdding full example here\r\n\r\n   \r\n\r\n     package com.example.khan.vaquar;\r\n    \r\n    import java.util.Arrays;\r\n    import java.util.Collection;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.stream.Collectors;\r\n    \r\n    public class RemovedDuplicate {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tPerson vaquar = new Person(1, &quot;Vaquar&quot;, &quot;Khan&quot;);\r\n    \t\tPerson zidan = new Person(2, &quot;Zidan&quot;, &quot;Khan&quot;);\r\n    \t\tPerson zerina = new Person(3, &quot;Zerina&quot;, &quot;Khan&quot;);\r\n    \r\n    \t\t// Add some random persons\r\n    \t\tCollection&lt;Person&gt; duplicateList = Arrays.asList(vaquar, zidan, zerina, vaquar, zidan, vaquar);\r\n    \r\n    \t\t//\r\n    \t\tSystem.out.println(&quot;Before removed duplicate list&quot; + duplicateList);\r\n    \t\t//\r\n    \t\tCollection&lt;Person&gt; nonDuplicateList = removeDuplicate(duplicateList);\r\n    \t\t//\r\n    \t\tSystem.out.println(&quot;&quot;);\r\n    \t\tSystem.out.println(&quot;After removed duplicate list&quot; + nonDuplicateList);\r\n    \t\t;\r\n    \r\n    \t\t// 1) solution Working code\r\n    \t\tMap&lt;Object, Object&gt; k = nonDuplicateList.stream().distinct()\r\n    \t\t\t\t.collect(Collectors.toMap(s1 -&gt; s1.getId(), s1 -&gt; s1));\r\n    \t\tSystem.out.println(&quot;&quot;);\r\n    \t\tSystem.out.println(&quot;Result 1 using method_______________________________________________&quot;);\r\n    \t\tSystem.out.println(&quot;k&quot; + k);\r\n    \t\tSystem.out.println(&quot;_____________________________________________________________________&quot;);\r\n    \r\n    \t\t// 2) solution using inline distinct()\r\n    \t\tMap&lt;Object, Object&gt; k1 = duplicateList.stream().distinct()\r\n    \t\t\t\t.collect(Collectors.toMap(s1 -&gt; s1.getId(), s1 -&gt; s1));\r\n    \t\tSystem.out.println(&quot;&quot;);\r\n    \t\tSystem.out.println(&quot;Result 2 using inline_______________________________________________&quot;);\r\n    \t\tSystem.out.println(&quot;k1&quot; + k1);\r\n    \t\tSystem.out.println(&quot;_____________________________________________________________________&quot;);\r\n    \t\t\r\n    \t\t//breacking code\r\n    \t\tSystem.out.println(&quot;&quot;);\r\n    \t\tSystem.out.println(&quot;Throwing exception _______________________________________________&quot;);\r\n    \t\tMap&lt;Object, Object&gt; k2 = duplicateList.stream()\r\n    \t\t\t\t.collect(Collectors.toMap(s1 -&gt; s1.getId(), s1 -&gt; s1));\r\n    \t\tSystem.out.println(&quot;&quot;);\r\n    \t\tSystem.out.println(&quot;k2&quot; + k2);\r\n    \t\tSystem.out.println(&quot;_____________________________________________________________________&quot;);\r\n    \t}\r\n    \r\n    \tpublic static List removeDuplicate(Collection&lt;Person&gt; list) {\r\n    \t\tif (list == null || list.isEmpty()) {\r\n    \t\t\treturn null;\r\n    \t\t}\r\n    \r\n    \t\tObject removedDuplicateList = list.stream().distinct().collect(Collectors.toList());\r\n    \t\treturn (List) removedDuplicateList;\r\n    \r\n    \t}\r\n    \r\n    }\r\n    \r\n    // Model class\r\n    class Person {\r\n    \tpublic Person(Integer id, String fname, String lname) {\r\n    \t\tsuper();\r\n    \t\tthis.id = id;\r\n    \t\tthis.fname = fname;\r\n    \t\tthis.lname = lname;\r\n    \t}\r\n    \r\n    \tprivate Integer id;\r\n    \tprivate String fname;\r\n    \tprivate String lname;\r\n    \r\n    \t// Getters and Setters\r\n    \r\n    \tpublic Integer getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(Integer id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getFname() {\r\n    \t\treturn fname;\r\n    \t}\r\n    \r\n    \tpublic void setFname(String fname) {\r\n    \t\tthis.fname = fname;\r\n    \t}\r\n    \r\n    \tpublic String getLname() {\r\n    \t\treturn lname;\r\n    \t}\r\n    \r\n    \tpublic void setLname(String lname) {\r\n    \t\tthis.lname = lname;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;Person [id=&quot; + id + &quot;, fname=&quot; + fname + &quot;, lname=&quot; + lname + &quot;]&quot;;\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nResults :\r\n\r\n\r\n    Before removed duplicate list[Person [id=1, fname=Vaquar, lname=Khan], Person [id=2, fname=Zidan, lname=Khan], Person [id=3, fname=Zerina, lname=Khan], Person [id=1, fname=Vaquar, lname=Khan], Person [id=2, fname=Zidan, lname=Khan], Person [id=1, fname=Vaquar, lname=Khan]]\r\n    \r\n    After removed duplicate list[Person [id=1, fname=Vaquar, lname=Khan], Person [id=2, fname=Zidan, lname=Khan], Person [id=3, fname=Zerina, lname=Khan]]\r\n    \r\n    Result 1 using method_______________________________________________\r\n    k{1=Person [id=1, fname=Vaquar, lname=Khan], 2=Person [id=2, fname=Zidan, lname=Khan], 3=Person [id=3, fname=Zerina, lname=Khan]}\r\n    _____________________________________________________________________\r\n    \r\n    Result 2 using inline_______________________________________________\r\n    k1{1=Person [id=1, fname=Vaquar, lname=Khan], 2=Person [id=2, fname=Zidan, lname=Khan], 3=Person [id=3, fname=Zerina, lname=Khan]}\r\n    _____________________________________________________________________\r\n    \r\n    Throwing exception _______________________________________________\r\n    Exception in thread &quot;main&quot; java.lang.IllegalStateException: Duplicate key Person [id=1, fname=Vaquar, lname=Khan]\r\n    \tat java.util.stream.Collectors.lambda$throwingMerger$0(Collectors.java:133)\r\n    \tat java.util.HashMap.merge(HashMap.java:1253)\r\n    \tat java.util.stream.Collectors.lambda$toMap$58(Collectors.java:1320)\r\n    \tat java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\r\n    \tat java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\r\n    \tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n    \tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n    \tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\r\n    \tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n    \tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\r\n    \tat com.example.khan.vaquar.RemovedDuplicate.main(RemovedDuplicate.java:48)\r\n","title":"Ignore duplicates when producing map using streams","body":"<p>Assuming you have people is List of object </p>\n\n<pre><code>  Map&lt;String, String&gt; phoneBook=people.stream()\n                                        .collect(toMap(Person::getName, Person::getAddress));\n</code></pre>\n\n<p>Now you need two steps :</p>\n\n<p>1) </p>\n\n<pre><code>people =removeDuplicate(people);\n</code></pre>\n\n<p>2) </p>\n\n<pre><code>Map&lt;String, String&gt; phoneBook=people.stream()\n                                        .collect(toMap(Person::getName, Person::getAddress));\n</code></pre>\n\n<p>Here is method to remove duplicate </p>\n\n<pre><code>public static List removeDuplicate(Collection&lt;Person&gt;  list) {\n        if(list ==null || list.isEmpty()){\n            return null;\n        }\n\n        Object removedDuplicateList =\n                list.stream()\n                     .distinct()\n                     .collect(Collectors.toList());\n     return (List) removedDuplicateList;\n\n      }\n</code></pre>\n\n<p>Adding full example here</p>\n\n<pre><code> package com.example.khan.vaquar;\n\nimport java.util.Arrays;\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\npublic class RemovedDuplicate {\n\n    public static void main(String[] args) {\n        Person vaquar = new Person(1, \"Vaquar\", \"Khan\");\n        Person zidan = new Person(2, \"Zidan\", \"Khan\");\n        Person zerina = new Person(3, \"Zerina\", \"Khan\");\n\n        // Add some random persons\n        Collection&lt;Person&gt; duplicateList = Arrays.asList(vaquar, zidan, zerina, vaquar, zidan, vaquar);\n\n        //\n        System.out.println(\"Before removed duplicate list\" + duplicateList);\n        //\n        Collection&lt;Person&gt; nonDuplicateList = removeDuplicate(duplicateList);\n        //\n        System.out.println(\"\");\n        System.out.println(\"After removed duplicate list\" + nonDuplicateList);\n        ;\n\n        // 1) solution Working code\n        Map&lt;Object, Object&gt; k = nonDuplicateList.stream().distinct()\n                .collect(Collectors.toMap(s1 -&gt; s1.getId(), s1 -&gt; s1));\n        System.out.println(\"\");\n        System.out.println(\"Result 1 using method_______________________________________________\");\n        System.out.println(\"k\" + k);\n        System.out.println(\"_____________________________________________________________________\");\n\n        // 2) solution using inline distinct()\n        Map&lt;Object, Object&gt; k1 = duplicateList.stream().distinct()\n                .collect(Collectors.toMap(s1 -&gt; s1.getId(), s1 -&gt; s1));\n        System.out.println(\"\");\n        System.out.println(\"Result 2 using inline_______________________________________________\");\n        System.out.println(\"k1\" + k1);\n        System.out.println(\"_____________________________________________________________________\");\n\n        //breacking code\n        System.out.println(\"\");\n        System.out.println(\"Throwing exception _______________________________________________\");\n        Map&lt;Object, Object&gt; k2 = duplicateList.stream()\n                .collect(Collectors.toMap(s1 -&gt; s1.getId(), s1 -&gt; s1));\n        System.out.println(\"\");\n        System.out.println(\"k2\" + k2);\n        System.out.println(\"_____________________________________________________________________\");\n    }\n\n    public static List removeDuplicate(Collection&lt;Person&gt; list) {\n        if (list == null || list.isEmpty()) {\n            return null;\n        }\n\n        Object removedDuplicateList = list.stream().distinct().collect(Collectors.toList());\n        return (List) removedDuplicateList;\n\n    }\n\n}\n\n// Model class\nclass Person {\n    public Person(Integer id, String fname, String lname) {\n        super();\n        this.id = id;\n        this.fname = fname;\n        this.lname = lname;\n    }\n\n    private Integer id;\n    private String fname;\n    private String lname;\n\n    // Getters and Setters\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getFname() {\n        return fname;\n    }\n\n    public void setFname(String fname) {\n        this.fname = fname;\n    }\n\n    public String getLname() {\n        return lname;\n    }\n\n    public void setLname(String lname) {\n        this.lname = lname;\n    }\n\n    @Override\n    public String toString() {\n        return \"Person [id=\" + id + \", fname=\" + fname + \", lname=\" + lname + \"]\";\n    }\n\n}\n</code></pre>\n\n<p>Results :</p>\n\n<pre><code>Before removed duplicate list[Person [id=1, fname=Vaquar, lname=Khan], Person [id=2, fname=Zidan, lname=Khan], Person [id=3, fname=Zerina, lname=Khan], Person [id=1, fname=Vaquar, lname=Khan], Person [id=2, fname=Zidan, lname=Khan], Person [id=1, fname=Vaquar, lname=Khan]]\n\nAfter removed duplicate list[Person [id=1, fname=Vaquar, lname=Khan], Person [id=2, fname=Zidan, lname=Khan], Person [id=3, fname=Zerina, lname=Khan]]\n\nResult 1 using method_______________________________________________\nk{1=Person [id=1, fname=Vaquar, lname=Khan], 2=Person [id=2, fname=Zidan, lname=Khan], 3=Person [id=3, fname=Zerina, lname=Khan]}\n_____________________________________________________________________\n\nResult 2 using inline_______________________________________________\nk1{1=Person [id=1, fname=Vaquar, lname=Khan], 2=Person [id=2, fname=Zidan, lname=Khan], 3=Person [id=3, fname=Zerina, lname=Khan]}\n_____________________________________________________________________\n\nThrowing exception _______________________________________________\nException in thread \"main\" java.lang.IllegalStateException: Duplicate key Person [id=1, fname=Vaquar, lname=Khan]\n    at java.util.stream.Collectors.lambda$throwingMerger$0(Collectors.java:133)\n    at java.util.HashMap.merge(HashMap.java:1253)\n    at java.util.stream.Collectors.lambda$toMap$58(Collectors.java:1320)\n    at java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\n    at java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\n    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\n    at com.example.khan.vaquar.RemovedDuplicate.main(RemovedDuplicate.java:48)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1477140,"reputation":1906,"user_id":1387275,"accept_rate":100,"display_name":"Shessuky"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1553850105,"creation_date":1553850105,"answer_id":55413787,"question_id":32312876,"body_markdown":"I have encountered such a problem when grouping object, i always resolved them by a simple way: perform a custom filter using a java.util.Set to remove duplicate object with whatever attribute of your choice as bellow\r\n\r\n    Set&lt;String&gt; uniqueNames = new HashSet&lt;&gt;();\r\n    Map&lt;String, String&gt; phoneBook = people\r\n                      .stream()\r\n                      .filter(person -&gt; person != null &amp;&amp; !uniqueNames.add(person.getName()))\r\n                      .collect(toMap(Person::getName, Person::getAddress));\r\n\r\nHope this helps anyone having the same problem !","title":"Ignore duplicates when producing map using streams","body":"<p>I have encountered such a problem when grouping object, i always resolved them by a simple way: perform a custom filter using a java.util.Set to remove duplicate object with whatever attribute of your choice as bellow</p>\n\n<pre><code>Set&lt;String&gt; uniqueNames = new HashSet&lt;&gt;();\nMap&lt;String, String&gt; phoneBook = people\n                  .stream()\n                  .filter(person -&gt; person != null &amp;&amp; !uniqueNames.add(person.getName()))\n                  .collect(toMap(Person::getName, Person::getAddress));\n</code></pre>\n\n<p>Hope this helps anyone having the same problem !</p>\n"},{"comments":[{"owner":{"account_id":71795,"reputation":1978,"user_id":207552,"accept_rate":75,"display_name":"bschandramohan"},"score":0,"creation_date":1649274410,"post_id":57861353,"comment_id":126837331,"body_markdown":"How can you log the key name here if the values are strings?","body":"How can you log the key name here if the values are strings?"}],"tags":[],"owner":{"account_id":1829075,"reputation":1414,"user_id":2502267,"accept_rate":0,"display_name":"fjkjava"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1568064100,"creation_date":1568064100,"answer_id":57861353,"question_id":32312876,"body_markdown":"For grouping by Objects\r\n\r\n    Map&lt;Integer, Data&gt; dataMap = dataList.stream().collect(Collectors.toMap(Data::getId, data-&gt; data, (data1, data2)-&gt; {LOG.info(&quot;Duplicate Group For :&quot; + data2.getId());return data1;}));","title":"Ignore duplicates when producing map using streams","body":"<p>For grouping by Objects</p>\n\n<pre><code>Map&lt;Integer, Data&gt; dataMap = dataList.stream().collect(Collectors.toMap(Data::getId, data-&gt; data, (data1, data2)-&gt; {LOG.info(\"Duplicate Group For :\" + data2.getId());return data1;}));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":956228,"reputation":1898,"user_id":981477,"accept_rate":76,"display_name":"Andrew"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1620418108,"creation_date":1576630289,"answer_id":59384109,"question_id":32312876,"body_markdown":"For anyone else getting this issue but without duplicate keys in the map being streamed, **make sure your keyMapper function isn&#39;t returning null values**.\r\n\r\nIt&#39;s very annoying to track this down because when it processes the second element, the Exception will say &quot;Duplicate key 1&quot; when 1 is actually the **value** of the entry instead of the key.\r\n\r\nIn my case, my keyMapper function tried to look up values in a different map, but due to a typo in the strings was returning null values.\r\n\r\n    final Map&lt;String, String&gt; doop = new HashMap&lt;&gt;();\r\n    doop.put(&quot;a&quot;, &quot;1&quot;);\r\n    doop.put(&quot;b&quot;, &quot;2&quot;);\r\n\r\n    final Map&lt;String, String&gt; lookup = new HashMap&lt;&gt;();\r\n    doop.put(&quot;c&quot;, &quot;e&quot;);\r\n    doop.put(&quot;d&quot;, &quot;f&quot;);\r\n\r\n    doop.entrySet().stream().collect(Collectors.toMap(e -&gt; lookup.get(e.getKey()), e -&gt; e.getValue()));\r\n","title":"Ignore duplicates when producing map using streams","body":"<p>For anyone else getting this issue but without duplicate keys in the map being streamed, <strong>make sure your keyMapper function isn't returning null values</strong>.</p>\n<p>It's very annoying to track this down because when it processes the second element, the Exception will say &quot;Duplicate key 1&quot; when 1 is actually the <strong>value</strong> of the entry instead of the key.</p>\n<p>In my case, my keyMapper function tried to look up values in a different map, but due to a typo in the strings was returning null values.</p>\n<pre><code>final Map&lt;String, String&gt; doop = new HashMap&lt;&gt;();\ndoop.put(&quot;a&quot;, &quot;1&quot;);\ndoop.put(&quot;b&quot;, &quot;2&quot;);\n\nfinal Map&lt;String, String&gt; lookup = new HashMap&lt;&gt;();\ndoop.put(&quot;c&quot;, &quot;e&quot;);\ndoop.put(&quot;d&quot;, &quot;f&quot;);\n\ndoop.entrySet().stream().collect(Collectors.toMap(e -&gt; lookup.get(e.getKey()), e -&gt; e.getValue()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1620426968,"creation_date":1620421093,"answer_id":67441603,"question_id":32312876,"body_markdown":"Feels like `toMap` working often but not always is a dark underbelly of the java Streams.  Like they should have called it `toUniqueMap` or something...\r\n\r\nThe easiest way is to use `Collectors.groupingBy` [instead of][1] `Collectors.toMap`.\r\n\r\nIt will return a `List` type output by default, but collision problem is gone, and that maybe what you want in the presence of multiples anyway.\r\n\r\n      Map&lt;String, List&lt;Person&gt;&gt; phoneBook = people.stream()\r\n              .collect(groupingBy((x) -&gt; x.name));\r\n  \r\nIf  a `Set` type collection of the addresses associated with a particular name, `groupingBy` can do that [as well][2]: \r\n\r\n    Map&lt;String, Set&lt;String&gt;&gt; phoneBook = people.stream()\r\n              .collect(groupingBy((x) -&gt; x.name, mapping((x) -&gt; x.address, toSet())));\r\n\r\nThe other way is to &quot;start&quot; with either a Hash or a Set...And carefully track through to make sure the keys never duplicate in the output stream.  Ugh.  Here&#39;s an [example][3] that happens to survive this...sometimes...\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/45231743/32453\r\n  [2]: https://stackoverflow.com/a/39882789/32453\r\n  [3]: https://stackoverflow.com/q/33606014/32453","title":"Ignore duplicates when producing map using streams","body":"<p>Feels like <code>toMap</code> working often but not always is a dark underbelly of the java Streams.  Like they should have called it <code>toUniqueMap</code> or something...</p>\n<p>The easiest way is to use <code>Collectors.groupingBy</code> <a href=\"https://stackoverflow.com/a/45231743/32453\">instead of</a> <code>Collectors.toMap</code>.</p>\n<p>It will return a <code>List</code> type output by default, but collision problem is gone, and that maybe what you want in the presence of multiples anyway.</p>\n<pre><code>  Map&lt;String, List&lt;Person&gt;&gt; phoneBook = people.stream()\n          .collect(groupingBy((x) -&gt; x.name));\n</code></pre>\n<p>If  a <code>Set</code> type collection of the addresses associated with a particular name, <code>groupingBy</code> can do that <a href=\"https://stackoverflow.com/a/39882789/32453\">as well</a>:</p>\n<pre><code>Map&lt;String, Set&lt;String&gt;&gt; phoneBook = people.stream()\n          .collect(groupingBy((x) -&gt; x.name, mapping((x) -&gt; x.address, toSet())));\n</code></pre>\n<p>The other way is to &quot;start&quot; with either a Hash or a Set...And carefully track through to make sure the keys never duplicate in the output stream.  Ugh.  Here's an <a href=\"https://stackoverflow.com/q/33606014/32453\">example</a> that happens to survive this...sometimes...</p>\n"},{"tags":[],"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620427465,"creation_date":1620422729,"answer_id":67441847,"question_id":32312876,"body_markdown":"For completeness, here&#39;s how to &quot;reduce&quot; duplicates down to just one.\r\n\r\nIf you are OK with the last:\r\n\r\n      Map&lt;String, Person&gt; phoneBook = people.stream()\r\n              .collect(groupingBy(x -&gt; x.name, reducing(null, identity(), (first, last) -&gt; last)));\r\n\r\nIf you want only the first:\r\n\r\n      Map&lt;String, Person&gt; phoneBook = people.stream()\r\n              .collect(groupingBy(x -&gt; x.name, reducing(null, identity(), (first, last) -&gt; first != null ? first : last)));\r\n\r\nAnd if you want last but &quot;address as String&quot; (doesn&#39;t use the `identity()` as a parameter).\r\n\r\n      Map&lt;String, String&gt; phoneBook = people.stream()\r\n              .collect(groupingBy(x -&gt; x.name, reducing(null, x -&gt; x.address, (first, last) -&gt; last)));\r\n\r\n[source][1]\r\n\r\nSo in essence `groupingBy` paired with a `reducing` collector starts to behave very similarly to the `toMap` collector, having something similar to its mergeFunction...and identical end result...\r\n\r\n  [1]: https://stackoverflow.com/questions/34495816/stream-groupingby-reducing-to-first-element-of-list#comment110097397_48123966","title":"Ignore duplicates when producing map using streams","body":"<p>For completeness, here's how to &quot;reduce&quot; duplicates down to just one.</p>\n<p>If you are OK with the last:</p>\n<pre><code>  Map&lt;String, Person&gt; phoneBook = people.stream()\n          .collect(groupingBy(x -&gt; x.name, reducing(null, identity(), (first, last) -&gt; last)));\n</code></pre>\n<p>If you want only the first:</p>\n<pre><code>  Map&lt;String, Person&gt; phoneBook = people.stream()\n          .collect(groupingBy(x -&gt; x.name, reducing(null, identity(), (first, last) -&gt; first != null ? first : last)));\n</code></pre>\n<p>And if you want last but &quot;address as String&quot; (doesn't use the <code>identity()</code> as a parameter).</p>\n<pre><code>  Map&lt;String, String&gt; phoneBook = people.stream()\n          .collect(groupingBy(x -&gt; x.name, reducing(null, x -&gt; x.address, (first, last) -&gt; last)));\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/34495816/stream-groupingby-reducing-to-first-element-of-list#comment110097397_48123966\">source</a></p>\n<p>So in essence <code>groupingBy</code> paired with a <code>reducing</code> collector starts to behave very similarly to the <code>toMap</code> collector, having something similar to its mergeFunction...and identical end result...</p>\n"},{"tags":[],"owner":{"account_id":14335067,"reputation":722,"user_id":10354810,"display_name":"Jaja"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647516359,"creation_date":1647516359,"answer_id":71511513,"question_id":32312876,"body_markdown":"One can use lambda function: the comparison is done on key string from key(...)\r\n\r\n    \r\n\r\n    List&lt;Blog&gt; blogsNoDuplicates = blogs.stream()\r\n                .collect(toMap(b-&gt;key(b), b-&gt;b, (b1, b2) -&gt; b1))  // b.getAuthor() &lt;~&gt;key(b) as Key criteria for Duplicate elimination\r\n                .values().stream().collect(Collectors.toList());\r\n\r\n    static String key(Blog b){\r\n        return b.getTitle()+b.getAuthor(); // make key as criteria of distinction\r\n    }","title":"Ignore duplicates when producing map using streams","body":"<p>One can use lambda function: the comparison is done on key string from key(...)</p>\n<pre><code>List&lt;Blog&gt; blogsNoDuplicates = blogs.stream()\n            .collect(toMap(b-&gt;key(b), b-&gt;b, (b1, b2) -&gt; b1))  // b.getAuthor() &lt;~&gt;key(b) as Key criteria for Duplicate elimination\n            .values().stream().collect(Collectors.toList());\n\nstatic String key(Blog b){\n    return b.getTitle()+b.getAuthor(); // make key as criteria of distinction\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4741976,"reputation":5385,"user_id":3834413,"display_name":"Eugene"},"score":0,"creation_date":1647785608,"post_id":71546495,"comment_id":126453390,"body_markdown":"This is actually a duplicate answer. Please see the accepted one.","body":"This is actually a duplicate answer. Please see the accepted one."}],"tags":[],"owner":{"account_id":20532870,"reputation":1,"user_id":15069678,"display_name":"ShaniW"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1647777223,"creation_date":1647777223,"answer_id":71546495,"question_id":32312876,"body_markdown":"I had the same case and found that the simplest solution (Assuming you want to just override the map value for duplicate key) is:\r\n\r\n    Map&lt;String, String&gt; phoneBook = \r\n           people.stream()\r\n               .collect(Collectors.toMap(Person::getName, \r\n                                      Person::getAddress, \r\n                                            (key1, key2)-&gt; key2));","title":"Ignore duplicates when producing map using streams","body":"<p>I had the same case and found that the simplest solution (Assuming you want to just override the map value for duplicate key) is:</p>\n<pre><code>Map&lt;String, String&gt; phoneBook = \n       people.stream()\n           .collect(Collectors.toMap(Person::getName, \n                                  Person::getAddress, \n                                        (key1, key2)-&gt; key2));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10809524,"reputation":601,"user_id":7950525,"display_name":"Thimira Pathirana"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678117838,"creation_date":1678117388,"answer_id":75652883,"question_id":32312876,"body_markdown":"I got the same issue. A map stores key, value pairs and does not allow duplicate keys. If individual objects have duplicate names, you will get the error\r\n&gt; java.lang.IllegalStateException: Duplicate key\r\n\r\nEx: \r\n\r\n    Map&lt;String, String&gt; stringMap;\r\n            List&lt;Person&gt; personList = new ArrayList&lt;&gt;();\r\n            personList.add(new Person(1, &quot;Mark&quot;, &quot;Menlo Park&quot;));\r\n            personList.add(new Person(2, &quot;Sundar&quot;, &quot;1600 Amphitheatre Pkwy&quot;));\r\n            personList.add(new Person(3, &quot;Sundar&quot;, &quot;232 Santa Margarita Ave&quot;));\r\n            personList.add(new Person(4, &quot;Steve&quot;, &quot;Los Altos&quot;));\r\n    \r\n            stringMap = personList.stream().distinct().collect(Collectors.toMap(Person::getName, Person::getAddress));\r\n\r\n[![enter image description here][1]][1]\r\n\r\nTo resolve it, we need to use a different method with an additional parameter, the **mergeFunction**.\r\n\r\n        phoneBook = personList.stream().distinct().collect(Collectors.toMap(Person::getName, Person::getAddress\r\n                        , (existing, replacement) -&gt; existing));\r\n    \r\n    System.out.println(&quot;Map object output :&quot; + stringMap);\r\n\r\n\r\n&gt; Output: **Map object output :{Steve=Los Altos, Mark=Menlo Park, Sundar=1600 Amphitheatre Pkwy}**\r\n\r\nNOTE: When you change `(existing, replacement) -&gt; replacement)`. the old key is replaced with the new value.\r\nAnd if you need all addresses to store the same key check this \r\n[Multimap][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JOmn1.png\r\n  [2]: https://stackoverflow.com/a/75644186/7950525","title":"Ignore duplicates when producing map using streams","body":"<p>I got the same issue. A map stores key, value pairs and does not allow duplicate keys. If individual objects have duplicate names, you will get the error</p>\n<blockquote>\n<p>java.lang.IllegalStateException: Duplicate key</p>\n</blockquote>\n<p>Ex:</p>\n<pre><code>Map&lt;String, String&gt; stringMap;\n        List&lt;Person&gt; personList = new ArrayList&lt;&gt;();\n        personList.add(new Person(1, &quot;Mark&quot;, &quot;Menlo Park&quot;));\n        personList.add(new Person(2, &quot;Sundar&quot;, &quot;1600 Amphitheatre Pkwy&quot;));\n        personList.add(new Person(3, &quot;Sundar&quot;, &quot;232 Santa Margarita Ave&quot;));\n        personList.add(new Person(4, &quot;Steve&quot;, &quot;Los Altos&quot;));\n\n        stringMap = personList.stream().distinct().collect(Collectors.toMap(Person::getName, Person::getAddress));\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/JOmn1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JOmn1.png\" alt=\"enter image description here\" /></a></p>\n<p>To resolve it, we need to use a different method with an additional parameter, the <strong>mergeFunction</strong>.</p>\n<pre><code>    phoneBook = personList.stream().distinct().collect(Collectors.toMap(Person::getName, Person::getAddress\n                    , (existing, replacement) -&gt; existing));\n\nSystem.out.println(&quot;Map object output :&quot; + stringMap);\n</code></pre>\n<blockquote>\n<p>Output: <strong>Map object output :{Steve=Los Altos, Mark=Menlo Park, Sundar=1600 Amphitheatre Pkwy}</strong></p>\n</blockquote>\n<p>NOTE: When you change <code>(existing, replacement) -&gt; replacement)</code>. the old key is replaced with the new value.\nAnd if you need all addresses to store the same key check this\n<a href=\"https://stackoverflow.com/a/75644186/7950525\">Multimap</a></p>\n"},{"tags":[],"owner":{"account_id":17722198,"reputation":63,"user_id":12866947,"display_name":"Pushpendra Kushvaha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695394828,"creation_date":1695394828,"answer_id":77158757,"question_id":32312876,"body_markdown":"If someone is looking get `Map&lt;String, List&lt;Person&gt;&gt;` then follow below steps:\r\n\r\n    Map&lt;String, List&lt;Person&gt;&gt; phoneBook = people\r\n                .stream()\r\n                .collect(Collectors.toMap(\r\n                        Person::getName,\r\n                        Function.identity(),\r\n                        (first, second) -&gt; first);\r\n\r\n**Function.identity():** is a convenient way to indicate that the values in the map should be the Person objects themselves without any modification.\r\n\r\n**(first, second) -&gt; first:** This is a merge function used to handle situations where there are duplicate keys in the stream. If two Person objects have the same name (a duplicate key), this function specifies that the value associated with that key should be the first Person encountered (address1) among the duplicates, effectively preserving the first occurrence and discarding the duplicates.\r\n\r\n***Use below two case as per you need:***\r\n\r\n - If we use `((first, second) -&gt; first)` specifies what to do in case\r\n   of duplicate keys it chooses the first encountered Person.\r\n \r\n - If we use `((first, second) -&gt; second)` specifies what to do in case \r\n   of duplicate keys it chooses the last encountered Person.","title":"Ignore duplicates when producing map using streams","body":"<p>If someone is looking get <code>Map&lt;String, List&lt;Person&gt;&gt;</code> then follow below steps:</p>\n<pre><code>Map&lt;String, List&lt;Person&gt;&gt; phoneBook = people\n            .stream()\n            .collect(Collectors.toMap(\n                    Person::getName,\n                    Function.identity(),\n                    (first, second) -&gt; first);\n</code></pre>\n<p><strong>Function.identity():</strong> is a convenient way to indicate that the values in the map should be the Person objects themselves without any modification.</p>\n<p><strong>(first, second) -&gt; first:</strong> This is a merge function used to handle situations where there are duplicate keys in the stream. If two Person objects have the same name (a duplicate key), this function specifies that the value associated with that key should be the first Person encountered (address1) among the duplicates, effectively preserving the first occurrence and discarding the duplicates.</p>\n<p><em><strong>Use below two case as per you need:</strong></em></p>\n<ul>\n<li><p>If we use <code>((first, second) -&gt; first)</code> specifies what to do in case\nof duplicate keys it chooses the first encountered Person.</p>\n</li>\n<li><p>If we use <code>((first, second) -&gt; second)</code> specifies what to do in case\nof duplicate keys it chooses the last encountered Person.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":1315495,"reputation":17293,"user_id":1262477,"accept_rate":74,"display_name":"Patan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":253493,"favorite_count":0,"down_vote_count":0,"up_vote_count":394,"accepted_answer_id":32313069,"answer_count":13,"score":394,"last_activity_date":1695394828,"creation_date":1441028985,"question_id":32312876,"body_markdown":"    Map&lt;String, String&gt; phoneBook = people.stream()\r\n                                          .collect(toMap(Person::getName,\r\n                                                         Person::getAddress));\r\n\r\nI get `java.lang.IllegalStateException: Duplicate key` when a duplicated element is found. \r\n\r\nIs it possible to ignore such exception on adding values to the map?\r\n\r\nWhen there is duplicate it simply should continue by ignoring that duplicate key.","title":"Ignore duplicates when producing map using streams","body":"<pre><code>Map&lt;String, String&gt; phoneBook = people.stream()\n                                      .collect(toMap(Person::getName,\n                                                     Person::getAddress));\n</code></pre>\n\n<p>I get <code>java.lang.IllegalStateException: Duplicate key</code> when a duplicated element is found. </p>\n\n<p>Is it possible to ignore such exception on adding values to the map?</p>\n\n<p>When there is duplicate it simply should continue by ignoring that duplicate key.</p>\n"},{"tags":["java","html","unit-testing","thymeleaf","jsoup"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1695394920,"post_id":77158696,"comment_id":136023068,"body_markdown":"Unless your `white-space` is set to `pre`, don&#39;t use &quot;\\n&quot; in your HTML. If you want a line-feed, use `&lt;br/&gt;`.","body":"Unless your <code>white-space</code> is set to <code>pre</code>, don&#39;t use &quot;\\n&quot; in your HTML. If you want a line-feed, use <code>&lt;br&#47;&gt;</code>."},{"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"score":0,"creation_date":1695395078,"post_id":77158696,"comment_id":136023107,"body_markdown":"@Mr.Polywhirl The actual html I&#39;m outputting does not have the newline tags. This was just a quick and dirty example.","body":"@Mr.Polywhirl The actual html I&#39;m outputting does not have the newline tags. This was just a quick and dirty example."}],"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695395134,"answer_count":0,"score":0,"last_activity_date":1695394774,"creation_date":1695394439,"question_id":77158696,"body_markdown":"I&#39;m working on a java function that generates some html code for an email using a thymeleaf template. I then want to unit test the resulting html string using JSoup. The problem I&#39;m running into is that JSoup is picky about closing tags. While the browser can handle `&lt;p&gt;` blocks without a closing tag, JSoup requires the `&lt;/p&gt;` to correctly extract the element text.\r\n\r\nSo the obvious solution then would be to just make sure to close the `&lt;p&gt;` tag right? The problem is, closing the `&lt;p&gt;` is adding an extra line break. I want to display:\r\n\r\n&gt; &lt;p id=&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot;\r\n&gt; &gt;&lt;strong&gt;Foo&lt;/strong&gt;&lt;br/&gt;\r\n&gt;                                                 &lt;span id=&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot;&gt;&lt;strong&gt;Bar&lt;/strong&gt;&lt;/span&gt;\r\n\r\n&lt;br/&gt;\r\n\r\n\r\nbut if I close the paragraph I get the following instead: \r\n\r\n&gt; &lt;p id=&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot; &gt;&lt;strong&gt;Foo\r\n&gt; 2&lt;/strong&gt;&lt;/p&gt;\r\n&gt;                                                 &lt;span id=&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot;&gt;&lt;strong&gt;Bar\r\n&gt; 2&lt;/strong&gt;&lt;/span&gt;\r\n\r\n\r\n \r\n\r\nBelow is an example of my test function. The first test will pass but the html will have the unwanted extra line break. The second function will display correctly but the test will fail. I&#39;m at a bit off a loss for how to handle this. How do I structure my html to produce the desired output while allowing JSoup to correctly parse when testing?\r\n\r\n```java\r\n@Test\r\npublic void testJsoupParsePClosed() {\r\n    // Test JSoup parsing with an explicitly closed paragraph tag\r\n    Document testDoc = Jsoup.parse(\r\n        &quot;&lt;html&gt; &lt;p id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot; &gt;&lt;strong&gt;A test  academic message&lt;/strong&gt;&lt;/p&gt;\\n&quot; +\r\n            &quot;&lt;span id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot;&gt;&lt;strong&gt;From: X Yz &lt;a href=\\&quot;mailto:xyz123@bucknell.edu?subject=Re:%20A%20test%20academic%20message\\&quot;&gt;&amp;lt;xyz123@bucknell.edu&amp;gt;&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;\\n&quot; +\r\n            &quot;&lt;div&gt;\\n&quot; +\r\n            &quot;\\n&quot; +\r\n            &quot;&lt;span&gt;This is a test of an academic message&lt;/span&gt;\\n&quot; +\r\n            &quot;&lt;/div&gt; &lt;/html&gt;&quot;);\r\n\r\n    String sp1 = testDoc.selectFirst(&quot;p#272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot;).wholeText();\r\n    System.out.println(&quot;sp1 text: &quot; + sp1);\r\n    assertThat(sp1).isEqualTo(&quot;A test  academic message&quot;);\r\n}\r\n```\r\n\r\n```java\r\n@Test\r\npublic void testJsoupParsePOpen() {\r\n    // test JSoup parsing with an unclosed paragraph tag\r\n    Document testDoc2 = Jsoup.parse(\r\n        &quot;&lt;html&gt; &lt;p id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot; &gt;&lt;strong&gt;A test  academic message&lt;/strong&gt;&lt;br /&gt;\\n&quot; +\r\n            &quot;&lt;span id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot;&gt;&lt;strong&gt;From: X Yz &lt;a href=\\&quot;mailto:xyz123@bucknell.edu?subject=Re:%20A%20test%20academic%20message\\&quot;&gt;&amp;lt;xyz123@bucknell.edu&amp;gt;&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;\\n&quot; +\r\n            &quot;&lt;div&gt;\\n&quot; +\r\n            &quot;\\n&quot; +\r\n            &quot;&lt;span&gt;This is a test of an academic message&lt;/span&gt;\\n&quot; +\r\n            &quot;&lt;/div&gt; &lt;/html&gt;&quot;);\r\n\r\n    String sp2 = testDoc2.selectFirst(&quot;p#272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot;).wholeText();\r\n    System.out.println(&quot;sp2 text: &quot; + sp2);\r\n    assertThat(sp2).isEqualTo(&quot;A test  academic message&quot;);\r\n}\r\n```\r\n","title":"Closing an HTML &lt;p&gt; tag without the added line break","body":"<p>I'm working on a java function that generates some html code for an email using a thymeleaf template. I then want to unit test the resulting html string using JSoup. The problem I'm running into is that JSoup is picky about closing tags. While the browser can handle <code>&lt;p&gt;</code> blocks without a closing tag, JSoup requires the <code>&lt;/p&gt;</code> to correctly extract the element text.</p>\n<p>So the obvious solution then would be to just make sure to close the <code>&lt;p&gt;</code> tag right? The problem is, closing the <code>&lt;p&gt;</code> is adding an extra line break. I want to display:</p>\n<blockquote>\n<strong>Foo</strong><br/>\n                                                <strong>Bar</strong>\n</blockquote>\n<br/>\n<p>but if I close the paragraph I get the following instead:</p>\n<blockquote>\n<strong>Foo\n2</strong></p>\n                                                <strong>Bar\n2</strong>\n</blockquote>\n<p>Below is an example of my test function. The first test will pass but the html will have the unwanted extra line break. The second function will display correctly but the test will fail. I'm at a bit off a loss for how to handle this. How do I structure my html to produce the desired output while allowing JSoup to correctly parse when testing?</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testJsoupParsePClosed() {\n    // Test JSoup parsing with an explicitly closed paragraph tag\n    Document testDoc = Jsoup.parse(\n        &quot;&lt;html&gt; &lt;p id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot; &gt;&lt;strong&gt;A test  academic message&lt;/strong&gt;&lt;/p&gt;\\n&quot; +\n            &quot;&lt;span id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot;&gt;&lt;strong&gt;From: X Yz &lt;a href=\\&quot;mailto:xyz123@bucknell.edu?subject=Re:%20A%20test%20academic%20message\\&quot;&gt;&amp;lt;xyz123@bucknell.edu&amp;gt;&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;\\n&quot; +\n            &quot;&lt;div&gt;\\n&quot; +\n            &quot;\\n&quot; +\n            &quot;&lt;span&gt;This is a test of an academic message&lt;/span&gt;\\n&quot; +\n            &quot;&lt;/div&gt; &lt;/html&gt;&quot;);\n\n    String sp1 = testDoc.selectFirst(&quot;p#272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot;).wholeText();\n    System.out.println(&quot;sp1 text: &quot; + sp1);\n    assertThat(sp1).isEqualTo(&quot;A test  academic message&quot;);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testJsoupParsePOpen() {\n    // test JSoup parsing with an unclosed paragraph tag\n    Document testDoc2 = Jsoup.parse(\n        &quot;&lt;html&gt; &lt;p id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot; &gt;&lt;strong&gt;A test  academic message&lt;/strong&gt;&lt;br /&gt;\\n&quot; +\n            &quot;&lt;span id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot;&gt;&lt;strong&gt;From: X Yz &lt;a href=\\&quot;mailto:xyz123@bucknell.edu?subject=Re:%20A%20test%20academic%20message\\&quot;&gt;&amp;lt;xyz123@bucknell.edu&amp;gt;&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;\\n&quot; +\n            &quot;&lt;div&gt;\\n&quot; +\n            &quot;\\n&quot; +\n            &quot;&lt;span&gt;This is a test of an academic message&lt;/span&gt;\\n&quot; +\n            &quot;&lt;/div&gt; &lt;/html&gt;&quot;);\n\n    String sp2 = testDoc2.selectFirst(&quot;p#272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot;).wholeText();\n    System.out.println(&quot;sp2 text: &quot; + sp2);\n    assertThat(sp2).isEqualTo(&quot;A test  academic message&quot;);\n}\n</code></pre>\n"},{"tags":["java","ssl","soap","https","wsdl"],"comments":[{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1695328872,"post_id":77153220,"comment_id":136013649,"body_markdown":"Hi, to understand your problem you need to post a minimum reproducible code sample so we can reproduce your problem and give you a solution.","body":"Hi, to understand your problem you need to post a minimum reproducible code sample so we can reproduce your problem and give you a solution."},{"owner":{"account_id":4471856,"reputation":315,"user_id":3637971,"accept_rate":14,"display_name":"user3637971"},"score":0,"creation_date":1695394136,"post_id":77153220,"comment_id":136022884,"body_markdown":"I added the code to help to the text explanation","body":"I added the code to help to the text explanation"},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1695422904,"post_id":77153220,"comment_id":136027405,"body_markdown":"webServiceProduct = salesWSService.getSalesWSPort();\n\nThis should be webServiceSale = salesWSService.getSalesWSPort(); ?","body":"webServiceProduct = salesWSService.getSalesWSPort();  This should be webServiceSale = salesWSService.getSalesWSPort(); ?"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1695469997,"post_id":77153220,"comment_id":136030545,"body_markdown":"A correct implementation of an [X509ExtendedTrustManager](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/net/ssl/X509ExtendedTrustManager.html) can select the certificate/key alias in the keystore for each HTTPS connection.","body":"A correct implementation of an <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/net/ssl/X509ExtendedTrustManager.html\" rel=\"nofollow noreferrer\">X509ExtendedTrustManager</a> can select the certificate/key alias in the keystore for each HTTPS connection."},{"owner":{"account_id":4471856,"reputation":315,"user_id":3637971,"accept_rate":14,"display_name":"user3637971"},"score":0,"creation_date":1695670562,"post_id":77153220,"comment_id":136052929,"body_markdown":"I checked the link https://stackoverflow.com/questions/908903/scope-of-the-java-system-properties about the scope of Java system properties and there&#39;s a reply where it says that system properties are per virtual machine. I uploaded the java web application on two wildfly&#39;s with different ports on same server. The results were that java system properties weren&#39;t shared so that&#39;s the goal I wanted to come","body":"I checked the link <a href=\"https://stackoverflow.com/questions/908903/scope-of-the-java-system-properties\" title=\"scope of the java system properties\">stackoverflow.com/questions/908903/&hellip;</a> about the scope of Java system properties and there&#39;s a reply where it says that system properties are per virtual machine. I uploaded the java web application on two wildfly&#39;s with different ports on same server. The results were that java system properties weren&#39;t shared so that&#39;s the goal I wanted to come"}],"owner":{"account_id":4471856,"reputation":315,"user_id":3637971,"accept_rate":14,"display_name":"user3637971"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695394499,"creation_date":1695325453,"question_id":77153220,"body_markdown":"I got a java web application and this has two https soap web service clients:\r\n\r\n    https://product.com?wsdl\r\n    https://sales.com?wsdl\r\n\r\nEach webservice has its own java class such as Product.java and Sales.java. Each class has its own implementation about how to invoke the web service entering the information like trustStore, trustStorePassword, keyStore, keyStorePassword, keyStoreType.\r\nI&#39;m understanding that these information are global for java. The classes are instaced using singleton. The thing is when the application invokes https://product.com?wsdl, it works. Then the app invokes https://sales.com?wsdl, it works. After that, the app invokes https://product.com?wsdl, it fails because the objects were instanced in singleton. Besides, the trustore and keystore information were not refreshed according to specific webservice. So in order to make it works is adding the code to refresh the trustore and keystore information before invokation. Other way is instacing without singleton but I think it&#39;s not a good idea because it can grow the ram memory.\r\n\r\nQuestion:\r\n1. Is it necessary to refresh the trustore and keystore information before invoking to a specefic webservice?\r\n2. Are there inconvenients if I don&#39;t use singleton for instancing?\r\n\r\nAdded:\r\n\r\nProduct.java\r\n\r\n    public class Products {\r\n    \tprivate static Products instance = null;\r\n    \tpublic ProductsWS webServiceProduct = null;\r\n    \t...\r\n    \t...\r\n    \r\n    \tprotected Products() {\r\n    \t\t\r\n    \t\ttry{\r\n        \t\tKeyManager[] keyManager = this.getKeyManagers(productKeyStore, productKeyStorePassword);\r\n    \t\t\tTrustManager[] trustManager = this.getTrustManagers(productTrustStore, productTrustStorePassword);\r\n    \t\t\tSSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n    \t\t\tsslContext.init(keyManager, trustManager, null);\r\n    \t\t\tHostnameVerifier hostnameVerifier = new HostnameVerifier() {\r\n    \t\t\t\tpublic boolean verify(String hostname, SSLSession session) { return true; }\r\n    \t\t\t};\r\n    \t\t\tHttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier);\r\n    \t\t\tHttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());\r\n                            \r\n    \t\t\tQName qname = new QName(&quot;http://product.net/&quot;, &quot;ProductsWSService&quot;);\r\n    \t\t\tProductsWSService productsWSService = new ProductsWSService(new URL(productUrl),qname);\r\n    \t\t\twebServiceProduct = productsWSService.getProductsWSPort();\r\n    \t\t\tSystem.out.println(&quot;Connection succeded&quot;);\r\n    \t\t}catch(Exception ex){\r\n    \t\t\tSystem.out.println(&quot;Error&quot;);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic static Products getInstance(){\r\n    \t\tif(instance == null){\r\n                instance = new Products();\r\n    \t\t}\r\n    \t\treturn instance;\r\n                    \r\n    \t}\r\n\r\n\t\tpublic String getProductName(int number) {\r\n\t\t\tif (number==1)\r\n\t\t\t  return &quot;Radio&quot;;\r\n\t\t\telse\r\n\t\t\t  return &quot;Television&quot;;\r\n\t\t}\r\n    \t\r\n    }\r\n\r\nSales.java\r\n\r\n    public class Sales {\r\n    \tprivate static Sales instance = null;\r\n    \tpublic SalesWS webServiceSale = null;\r\n    \t...\r\n    \t...\r\n    \r\n    \tprotected Sales() {\r\n    \t\t\r\n    \t\ttry{\r\n        \t\tKeyManager[] keyManager = this.getKeyManagers(saleKeyStore, saleKeyStorePassword);\r\n    \t\t\tTrustManager[] trustManager = this.getTrustManagers(saleTrustStore, saleTrustStorePassword);\r\n    \t\t\tSSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n    \t\t\tsslContext.init(keyManager, trustManager, null);\r\n    \t\t\tHostnameVerifier hostnameVerifier = new HostnameVerifier() {\r\n    \t\t\t\tpublic boolean verify(String hostname, SSLSession session) { return true; }\r\n    \t\t\t};\r\n    \t\t\tHttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier);\r\n\t\t\t\tHttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());\r\n                            \r\n    \t\t\tQName qname = new QName(&quot;http://sale.net/&quot;, &quot;SalesWSService&quot;);\r\n    \t\t\tSalesWSService salesWSService = new SalesWSService(new URL(productUrl),qname);\r\n    \t\t\twebServiceProduct = salesWSService.getSalesWSPort();\r\n    \t\t\tSystem.out.println(&quot;Connection succeded&quot;);\r\n    \t\t}catch(Exception ex){\r\n    \t\t\tSystem.out.println(&quot;Error&quot;);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic static Sales getInstance(){\r\n    \t\tif(instance == null){\r\n                instance = new Sales();\r\n    \t\t}\r\n    \t\treturn instance;\r\n                    \r\n    \t}\r\n\r\n\t\tpublic String getSaleDate(int number) {\r\n\t\t\tif (number==1)\r\n\t\t\t  return &quot;2023-01-01&quot;;\r\n\t\t\telse\r\n\t\t\t  return &quot;2023-02-01&quot;;\r\n\t\t}\r\n    \t\r\n    }\r\n\r\n\r\nClient.java\r\n\r\n    public class Client {\r\n    \r\n    \tprotected Client() {\t}\r\n    \r\n    \tpublic static void main(String args[]){\r\n    \t\tProducts clientProduct = Products.getInstance();\r\n\t\t\tString name = clientProduct.getProductName(1); // It works\r\n    \t\tSales saleProduct = Sales.getInstance();\r\n\t\t\tString date = saleProduct.getSaleDate(1); // It works\r\n\t\t\tname = clientProduct.getProductName(1); // It fails because the objects were instanced in singleton. \r\n\t\t\t//Besides, the trustore and keystore information were not refreshed according to specific webservice\r\n    \t}\r\n    \r\n    }","title":"How to avoid refresh ssl information for multiple https soap web services client in Java?","body":"<p>I got a java web application and this has two https soap web service clients:</p>\n<pre><code>https://product.com?wsdl\nhttps://sales.com?wsdl\n</code></pre>\n<p>Each webservice has its own java class such as Product.java and Sales.java. Each class has its own implementation about how to invoke the web service entering the information like trustStore, trustStorePassword, keyStore, keyStorePassword, keyStoreType.\nI'm understanding that these information are global for java. The classes are instaced using singleton. The thing is when the application invokes <a href=\"https://product.com?wsdl\" rel=\"nofollow noreferrer\">https://product.com?wsdl</a>, it works. Then the app invokes <a href=\"https://sales.com?wsdl\" rel=\"nofollow noreferrer\">https://sales.com?wsdl</a>, it works. After that, the app invokes <a href=\"https://product.com?wsdl\" rel=\"nofollow noreferrer\">https://product.com?wsdl</a>, it fails because the objects were instanced in singleton. Besides, the trustore and keystore information were not refreshed according to specific webservice. So in order to make it works is adding the code to refresh the trustore and keystore information before invokation. Other way is instacing without singleton but I think it's not a good idea because it can grow the ram memory.</p>\n<p>Question:</p>\n<ol>\n<li>Is it necessary to refresh the trustore and keystore information before invoking to a specefic webservice?</li>\n<li>Are there inconvenients if I don't use singleton for instancing?</li>\n</ol>\n<p>Added:</p>\n<p>Product.java</p>\n<pre><code>public class Products {\n    private static Products instance = null;\n    public ProductsWS webServiceProduct = null;\n    ...\n    ...\n\n    protected Products() {\n        \n        try{\n            KeyManager[] keyManager = this.getKeyManagers(productKeyStore, productKeyStorePassword);\n            TrustManager[] trustManager = this.getTrustManagers(productTrustStore, productTrustStorePassword);\n            SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n            sslContext.init(keyManager, trustManager, null);\n            HostnameVerifier hostnameVerifier = new HostnameVerifier() {\n                public boolean verify(String hostname, SSLSession session) { return true; }\n            };\n            HttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier);\n            HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());\n                        \n            QName qname = new QName(&quot;http://product.net/&quot;, &quot;ProductsWSService&quot;);\n            ProductsWSService productsWSService = new ProductsWSService(new URL(productUrl),qname);\n            webServiceProduct = productsWSService.getProductsWSPort();\n            System.out.println(&quot;Connection succeded&quot;);\n        }catch(Exception ex){\n            System.out.println(&quot;Error&quot;);\n        }\n    }\n    \n    public static Products getInstance(){\n        if(instance == null){\n            instance = new Products();\n        }\n        return instance;\n                \n    }\n\n    public String getProductName(int number) {\n        if (number==1)\n          return &quot;Radio&quot;;\n        else\n          return &quot;Television&quot;;\n    }\n    \n}\n</code></pre>\n<p>Sales.java</p>\n<pre><code>public class Sales {\n    private static Sales instance = null;\n    public SalesWS webServiceSale = null;\n    ...\n    ...\n\n    protected Sales() {\n        \n        try{\n            KeyManager[] keyManager = this.getKeyManagers(saleKeyStore, saleKeyStorePassword);\n            TrustManager[] trustManager = this.getTrustManagers(saleTrustStore, saleTrustStorePassword);\n            SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n            sslContext.init(keyManager, trustManager, null);\n            HostnameVerifier hostnameVerifier = new HostnameVerifier() {\n                public boolean verify(String hostname, SSLSession session) { return true; }\n            };\n            HttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier);\n            HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());\n                        \n            QName qname = new QName(&quot;http://sale.net/&quot;, &quot;SalesWSService&quot;);\n            SalesWSService salesWSService = new SalesWSService(new URL(productUrl),qname);\n            webServiceProduct = salesWSService.getSalesWSPort();\n            System.out.println(&quot;Connection succeded&quot;);\n        }catch(Exception ex){\n            System.out.println(&quot;Error&quot;);\n        }\n    }\n    \n    public static Sales getInstance(){\n        if(instance == null){\n            instance = new Sales();\n        }\n        return instance;\n                \n    }\n\n    public String getSaleDate(int number) {\n        if (number==1)\n          return &quot;2023-01-01&quot;;\n        else\n          return &quot;2023-02-01&quot;;\n    }\n    \n}\n</code></pre>\n<p>Client.java</p>\n<pre><code>public class Client {\n\n    protected Client() {    }\n\n    public static void main(String args[]){\n        Products clientProduct = Products.getInstance();\n        String name = clientProduct.getProductName(1); // It works\n        Sales saleProduct = Sales.getInstance();\n        String date = saleProduct.getSaleDate(1); // It works\n        name = clientProduct.getProductName(1); // It fails because the objects were instanced in singleton. \n        //Besides, the trustore and keystore information were not refreshed according to specific webservice\n    }\n\n}\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":6291,"reputation":11568,"user_id":10522,"accept_rate":78,"display_name":"Berlin Brown"},"score":0,"creation_date":1695137816,"post_id":77130323,"comment_id":135982456,"body_markdown":"Looks like it works if there is a sub directory.  Which is different format from svn to git.  Dont we put the dot project file at the root of the directory?","body":"Looks like it works if there is a sub directory.  Which is different format from svn to git.  Dont we put the dot project file at the root of the directory?"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695396201,"post_id":77130323,"comment_id":136023395,"body_markdown":"I didn&#39;t understand the issue completely. Can you tell what issue you are exactly facing?","body":"I didn&#39;t understand the issue completely. Can you tell what issue you are exactly facing?"},{"owner":{"account_id":6291,"reputation":11568,"user_id":10522,"accept_rate":78,"display_name":"Berlin Brown"},"score":1,"creation_date":1695413061,"post_id":77130323,"comment_id":136026168,"body_markdown":"I am using this script with Eclipse and working set, but doesn&#39;t work with a project where the .project files are at the root of a project.\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;psf version=&quot;2.0&quot;&gt;\n&lt;provider id=&quot;org.eclipse.egit.core.GitProvider&quot;&gt;\n&lt;project reference=&quot;1.0,https://git.mygithub.com/git/my-project,main,my-project&quot;/&gt;\n&lt;/provider&gt;\n&lt;/psf&gt;\n\nFor example:\nHow can I make this work with source with the following:\n\nhttps://git.mygithub.com/git/my-project/.project","body":"I am using this script with Eclipse and working set, but doesn&#39;t work with a project where the .project files are at the root of a project.  &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;psf version=&quot;2.0&quot;&gt; &lt;provider id=&quot;org.eclipse.egit.core.GitProvider&quot;&gt; &lt;project reference=&quot;1.0,<a href=\"https://git.mygithub.com/git/my-project,main,my-project&quot;/\" rel=\"nofollow noreferrer\">git.mygithub.com/git/my-project,main,my-proje&zwnj;&#8203;ct&quot;</a>&gt; &lt;/provider&gt; &lt;/psf&gt;  For example: How can I make this work with source with the following:  <a href=\"https://git.mygithub.com/git/my-project/.project\" rel=\"nofollow noreferrer\">git.mygithub.com/git/my-project/.project</a>"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695431481,"post_id":77130323,"comment_id":136027966,"body_markdown":"Ok got it. Looking into it.","body":"Ok got it. Looking into it."},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1695571371,"post_id":77130323,"comment_id":136039127,"body_markdown":"Please add the directory tree of your setup and also add the .project contents. If the structure is my-project/my-project then you probably have a custom source folders setup not just pointing to `src`. DId you committed both .project and .classpath files?\nAlso, please explain what &quot;but doesn&#39;t work&quot; means.","body":"Please add the directory tree of your setup and also add the .project contents. If the structure is my-project/my-project then you probably have a custom source folders setup not just pointing to <code>src</code>. DId you committed both .project and .classpath files? Also, please explain what &quot;but doesn&#39;t work&quot; means."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1695629054,"post_id":77130323,"comment_id":136044697,"body_markdown":"You can do this and more with [Eclipse Oomph](https://wiki.eclipse.org/Eclipse_Oomph_Authoring).","body":"You can do this and more with <a href=\"https://wiki.eclipse.org/Eclipse_Oomph_Authoring\" rel=\"nofollow noreferrer\">Eclipse Oomph</a>."},{"owner":{"account_id":6291,"reputation":11568,"user_id":10522,"accept_rate":78,"display_name":"Berlin Brown"},"score":0,"creation_date":1695674212,"post_id":77130323,"comment_id":136053493,"body_markdown":"My package is this:\n\n&lt;repo&gt;/.project\n&lt;repo&gt;/src/main/java essetially","body":"My package is this:  &lt;repo&gt;/.project &lt;repo&gt;/src/main/java essetially"},{"owner":{"account_id":6291,"reputation":11568,"user_id":10522,"accept_rate":78,"display_name":"Berlin Brown"},"score":0,"creation_date":1695730803,"post_id":77130323,"comment_id":136061007,"body_markdown":"For oomph, do you have a more specific, detailed example","body":"For oomph, do you have a more specific, detailed example"},{"owner":{"account_id":6291,"reputation":11568,"user_id":10522,"accept_rate":78,"display_name":"Berlin Brown"},"score":0,"creation_date":1695758817,"post_id":77130323,"comment_id":136066696,"body_markdown":"Also, are these project working set configs, really just doing a git clone or subversion svn co?  I could write a bash script.","body":"Also, are these project working set configs, really just doing a git clone or subversion svn co?  I could write a bash script."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1695885373,"post_id":77130323,"comment_id":136084111,"body_markdown":"There is a [tutorial for Eclipse Oomph here](https://eclipsesource.com/blogs/tutorials/oomph-basic-tutorial/). The idea of Eclipse Oomph is to setup up everything including the Eclipse IDE. If you only want to clone a collection of Git repositories, you can do this via [Git submodules](https://wiki.eclipse.org/EGit/User_Guide#Cloning_Repositories_with_Submodules).","body":"There is a <a href=\"https://eclipsesource.com/blogs/tutorials/oomph-basic-tutorial/\" rel=\"nofollow noreferrer\">tutorial for Eclipse Oomph here</a>. The idea of Eclipse Oomph is to setup up everything including the Eclipse IDE. If you only want to clone a collection of Git repositories, you can do this via <a href=\"https://wiki.eclipse.org/EGit/User_Guide#Cloning_Repositories_with_Submodules\" rel=\"nofollow noreferrer\">Git submodules</a>."}],"owner":{"account_id":6291,"reputation":11568,"user_id":10522,"accept_rate":78,"display_name":"Berlin Brown"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1695394491,"creation_date":1695070305,"question_id":77130323,"body_markdown":"We used to use the working set configuration below, with subversion and the working set psf file would work... Visit the repository, pull down the source from that module, add the directory relative to the workspace and that is it.\r\n\r\nNow I am not clear how converting to git would work to accomplish the same thing.\r\n\r\nSo we had a subversion based project working set configuration where we would use import project set.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;psf version=&quot;2.0&quot;&gt;\r\n    &lt;provider id=&quot;org.tigris.subversion.subclipse.core.svnnature&quot;&gt;\r\n    \t&lt;project reference=&quot;1.0,http://repo.svn.com/svn/my-project/trunk,my-project&quot;/&gt;\r\n    &lt;/provider&gt;\r\n\r\nAnd the configuration above seemed to work as expected where the project was part of the workspace.  There was a .project at the root of the project and used configuration of that project.\r\n\r\nIf I use the git version, seems to do close but, things are off.  For example, it seems to use some git configuration default path when it pulls down the files (I am mac, uses ~/git).  May git configuration in git plugins.\r\n\r\nBut also, doesn&#39;t take the .project file from the root, in the example below, my-project has to be a sub directory.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;psf version=&quot;2.0&quot;&gt;\r\n    &lt;provider id=&quot;org.eclipse.egit.core.GitProvider&quot;&gt;\r\n    &lt;project reference=&quot;1.0,https://git.mygithub.com/git/my-project,main,my-project&quot;/&gt;\r\n    &lt;/provider&gt;\r\n    &lt;/psf&gt;","title":"Is there a way to automate pulling down multiple projects from a git repo using Eclipse","body":"<p>We used to use the working set configuration below, with subversion and the working set psf file would work... Visit the repository, pull down the source from that module, add the directory relative to the workspace and that is it.</p>\n<p>Now I am not clear how converting to git would work to accomplish the same thing.</p>\n<p>So we had a subversion based project working set configuration where we would use import project set.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;psf version=&quot;2.0&quot;&gt;\n&lt;provider id=&quot;org.tigris.subversion.subclipse.core.svnnature&quot;&gt;\n    &lt;project reference=&quot;1.0,http://repo.svn.com/svn/my-project/trunk,my-project&quot;/&gt;\n&lt;/provider&gt;\n</code></pre>\n<p>And the configuration above seemed to work as expected where the project was part of the workspace.  There was a .project at the root of the project and used configuration of that project.</p>\n<p>If I use the git version, seems to do close but, things are off.  For example, it seems to use some git configuration default path when it pulls down the files (I am mac, uses ~/git).  May git configuration in git plugins.</p>\n<p>But also, doesn't take the .project file from the root, in the example below, my-project has to be a sub directory.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;psf version=&quot;2.0&quot;&gt;\n&lt;provider id=&quot;org.eclipse.egit.core.GitProvider&quot;&gt;\n&lt;project reference=&quot;1.0,https://git.mygithub.com/git/my-project,main,my-project&quot;/&gt;\n&lt;/provider&gt;\n&lt;/psf&gt;\n</code></pre>\n"},{"tags":["java","performance","gatling","latency","gatling-plugin"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1695463165,"post_id":77158635,"comment_id":136029949,"body_markdown":"Lookup the word &quot;percentiles&quot; in relation to &quot;statistics&quot; in mathematics !   It&#39;s not so much averages, as &quot;groupings&quot; (data) in particular &quot;similar environment sets of(plural) results&quot; (ad hoc vaguely).","body":"Lookup the word &quot;percentiles&quot; in relation to &quot;statistics&quot; in mathematics !   It&#39;s not so much averages, as &quot;groupings&quot; (data) in particular &quot;similar environment sets of(plural) results&quot; (ad hoc vaguely)."},{"owner":{"account_id":6852429,"reputation":6319,"user_id":5269205,"display_name":"St&#233;phane LANDELLE"},"score":0,"creation_date":1695479018,"post_id":77158635,"comment_id":136031363,"body_markdown":"No way to tell unless you share your `simulation.log` file.","body":"No way to tell unless you share your <code>simulation.log</code> file."}],"owner":{"account_id":7929172,"reputation":1797,"user_id":6059506,"accept_rate":77,"display_name":"theprogrammer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695393949,"creation_date":1695393949,"question_id":77158635,"body_markdown":"Consider this **gatling report overview**\r\n[![enter image description here][1]][1]\r\n\r\n\r\nAs you can see, the max response time is shown as `18389 ms`. Now let&#39;s check response time percentiles section below.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5aMEY.png\r\n  [2]: https://i.stack.imgur.com/yolJJ.png\r\n\r\nI have zoomed into the max spiked section. Now as you can see, the max shown here is `1966 ms` which is different compared to the max shown in the overall overview at the top(which in our case was `18389 ms`.\r\n\r\nSo why is there a discrepancy between these two values? That too such a large difference(an order of 10^1).","title":"Why does gatling report show different values in &quot;Response Time Percentiles&quot; Section and main report overview?","body":"<p>Consider this <strong>gatling report overview</strong>\n<a href=\"https://i.stack.imgur.com/5aMEY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5aMEY.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see, the max response time is shown as <code>18389 ms</code>. Now let's check response time percentiles section below.</p>\n<p><a href=\"https://i.stack.imgur.com/yolJJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yolJJ.png\" alt=\"enter image description here\" /></a></p>\n<p>I have zoomed into the max spiked section. Now as you can see, the max shown here is <code>1966 ms</code> which is different compared to the max shown in the overall overview at the top(which in our case was <code>18389 ms</code>.</p>\n<p>So why is there a discrepancy between these two values? That too such a large difference(an order of 10^1).</p>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-test"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1642015404,"post_id":70686277,"comment_id":124963014,"body_markdown":"does your application start when you run it without tests and does it respond when you call it.","body":"does your application start when you run it without tests and does it respond when you call it."},{"owner":{"account_id":18089135,"reputation":450,"user_id":13149219,"display_name":"Utsav10"},"score":0,"creation_date":1642065855,"post_id":70686277,"comment_id":124974568,"body_markdown":"@Toerktumlare Yes, the app runs. I&#39;ve checked the network call. It is working as expected","body":"@Toerktumlare Yes, the app runs. I&#39;ve checked the network call. It is working as expected"}],"answers":[{"tags":[],"owner":{"account_id":18089135,"reputation":450,"user_id":13149219,"display_name":"Utsav10"},"comment_count":0,"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1642068078,"creation_date":1642068078,"answer_id":70694659,"question_id":70686277,"body_markdown":"I added mocking the decoder in the test as \r\n\r\n```\r\n@MockBean\r\nprivate JwtDecoder jwtDecoder;\r\n```\r\n\r\nand the test ran !","title":"ERROR No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available","body":"<p>I added mocking the decoder in the test as</p>\n<pre><code>@MockBean\nprivate JwtDecoder jwtDecoder;\n</code></pre>\n<p>and the test ran !</p>\n"},{"tags":[],"owner":{"account_id":4451500,"reputation":772,"user_id":3623232,"display_name":"Guillermo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1685537187,"creation_date":1684761288,"answer_id":76306583,"question_id":70686277,"body_markdown":"I got this error when using `@SpringBootTest`. It started appearing when upgrading from spring boot version `2.5.12` to `2.7.8`.\r\n\r\nI could fix it by changing \r\n\r\n```java\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.NONE)\r\n```\r\n\r\nto\r\n\r\n```java\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n```","title":"ERROR No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available","body":"<p>I got this error when using <code>@SpringBootTest</code>. It started appearing when upgrading from spring boot version <code>2.5.12</code> to <code>2.7.8</code>.</p>\n<p>I could fix it by changing</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.NONE)\n</code></pre>\n<p>to</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2226374,"reputation":106,"user_id":1965042,"display_name":"vcg"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1688940005,"creation_date":1688940005,"answer_id":76649703,"question_id":70686277,"body_markdown":"Hi i was having same issue, then I realize on my test properties I missed to configure:   \r\n```security:\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          issuer-uri: realm_uri_here\r\n          jwk-set-uri: ${spring.security.oauth2.resource-server.jwt.issuer-uri}/protocol/openid-connect/certs```","title":"ERROR No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available","body":"<p>Hi i was having same issue, then I realize on my test properties I missed to configure:</p>\n<pre><code>    oauth2:\n      resourceserver:\n        jwt:\n          issuer-uri: realm_uri_here\n          jwk-set-uri: ${spring.security.oauth2.resource-server.jwt.issuer-uri}/protocol/openid-connect/certs```\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28425334,"reputation":11,"user_id":22615357,"display_name":"Kris Ktoś"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695393875,"creation_date":1695393875,"answer_id":77158623,"question_id":70686277,"body_markdown":"This configuration test also resolved problem in Unit Tests.\r\n\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          issuer-uri: test","title":"ERROR No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available","body":"<p>This configuration test also resolved problem in Unit Tests.</p>\n<pre><code>oauth2:\n  resourceserver:\n    jwt:\n      issuer-uri: test\n</code></pre>\n"}],"owner":{"account_id":18089135,"reputation":450,"user_id":13149219,"display_name":"Utsav10"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12086,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":70694659,"answer_count":4,"score":11,"last_activity_date":1695393875,"creation_date":1642010296,"question_id":70686277,"body_markdown":"I am trying to write a test for my controller but the test environment fails to load with the given stackTrace.\r\n\r\n```\r\n    @PreAuthorize(&quot;hasAuthority(&#39;my.scope&#39;)&quot;)\r\n    @GetMapping(value = &quot;/path&quot;, produces = APPLICATION_JSON_VALUE)\r\n    public ResponseEntity&lt;Map&lt;String, Set&lt;String&gt;&gt;&gt; getPath() {\r\n        return myService.pathFunction()\r\n            .map(ResponseEntity::ok);\r\n    }\r\n```\r\n\r\nand following is how I&#39;ve configured my security config\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(securedEnabled = true, prePostEnabled = true)\r\npublic class WebConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    private static final String PRINCIPAL = &quot;sub&quot;;\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n\r\n        JwtAuthenticationConverter authenticationConverter =\r\n            new JwtAuthenticationConverter();\r\n        authenticationConverter.setJwtGrantedAuthoritiesConverter(...);\r\n        authenticationConverter.setPrincipalClaimName(PRINCIPAL);\r\n\r\n        http.csrf().disable()\r\n            .cors()\r\n            .and()\r\n            .authorizeRequests().antMatchers(&quot;/actuator/**&quot;).permitAll()\r\n            .anyRequest().authenticated()\r\n            .and()\r\n            .oauth2ResourceServer()\r\n            .jwt()\r\n            .jwtAuthenticationConverter(authenticationConverter);\r\n    }\r\n}\r\n```\r\n**The controller is working as needed but my test fails with this error. I am not using any customer JwtDecoder**\r\n\r\n```\r\n@WebMvcTest(controllers = Controller.class)\r\nclass ControllerTest {\r\n\r\n    @MockBean\r\n    private MyService myService;\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @Test\r\n    @WithMockUser(authorities = {&quot;my.scope&quot;})\r\n    void controllerTest() throws Exception{\r\n        Map&lt;String, Set&lt;String&gt;&gt; mapResponse = Map.of(&quot;key&quot;, Set.of(&quot;foo1&quot;, &quot;foo2&quot;));\r\n        Mockito.when(myService.pathFunction()).thenReturn(Optional.of(mapResponse));\r\n\r\n        MockHttpServletResponse result = mockMvc.perform(get(&quot;/configuration/api-registry&quot;)\r\n                .contentType(MediaType.APPLICATION_JSON))\r\n            .andExpect(status().isOk())\r\n            .andReturn()\r\n            .getResponse();\r\n\r\n        String response = result.getContentAsString();\r\n        assertTrue(response.contains(&quot;foo1&quot;));\r\n    }\r\n\r\n}\r\n```\r\nHow do I run this test ?\r\n\r\n```\r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\n\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;springSecurityFilterChain&#39; defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available\r\n\t...\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\r\n\t... 90 more\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available\r\n\tat ...\r\n```","title":"ERROR No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available","body":"<p>I am trying to write a test for my controller but the test environment fails to load with the given stackTrace.</p>\n<pre><code>    @PreAuthorize(&quot;hasAuthority('my.scope')&quot;)\n    @GetMapping(value = &quot;/path&quot;, produces = APPLICATION_JSON_VALUE)\n    public ResponseEntity&lt;Map&lt;String, Set&lt;String&gt;&gt;&gt; getPath() {\n        return myService.pathFunction()\n            .map(ResponseEntity::ok);\n    }\n</code></pre>\n<p>and following is how I've configured my security config</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(securedEnabled = true, prePostEnabled = true)\npublic class WebConfig extends WebSecurityConfigurerAdapter {\n\n    private static final String PRINCIPAL = &quot;sub&quot;;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        JwtAuthenticationConverter authenticationConverter =\n            new JwtAuthenticationConverter();\n        authenticationConverter.setJwtGrantedAuthoritiesConverter(...);\n        authenticationConverter.setPrincipalClaimName(PRINCIPAL);\n\n        http.csrf().disable()\n            .cors()\n            .and()\n            .authorizeRequests().antMatchers(&quot;/actuator/**&quot;).permitAll()\n            .anyRequest().authenticated()\n            .and()\n            .oauth2ResourceServer()\n            .jwt()\n            .jwtAuthenticationConverter(authenticationConverter);\n    }\n}\n</code></pre>\n<p><strong>The controller is working as needed but my test fails with this error. I am not using any customer JwtDecoder</strong></p>\n<pre><code>@WebMvcTest(controllers = Controller.class)\nclass ControllerTest {\n\n    @MockBean\n    private MyService myService;\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Test\n    @WithMockUser(authorities = {&quot;my.scope&quot;})\n    void controllerTest() throws Exception{\n        Map&lt;String, Set&lt;String&gt;&gt; mapResponse = Map.of(&quot;key&quot;, Set.of(&quot;foo1&quot;, &quot;foo2&quot;));\n        Mockito.when(myService.pathFunction()).thenReturn(Optional.of(mapResponse));\n\n        MockHttpServletResponse result = mockMvc.perform(get(&quot;/configuration/api-registry&quot;)\n                .contentType(MediaType.APPLICATION_JSON))\n            .andExpect(status().isOk())\n            .andReturn()\n            .getResponse();\n\n        String response = result.getContentAsString();\n        assertTrue(response.contains(&quot;foo1&quot;));\n    }\n\n}\n</code></pre>\n<p>How do I run this test ?</p>\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' available\n    ...\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' available\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n    ... 90 more\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' available\n    at ...\n</code></pre>\n"},{"tags":["java","reactjs","servlets","cors","fetch"],"owner":{"account_id":25996762,"reputation":1,"user_id":19707999,"display_name":"salvador8a"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695393798,"creation_date":1695393798,"question_id":77158613,"body_markdown":"I&#39;m running a React frontend for my Java WebServlets backend, up until now I&#39;ve found no trouble with CORS by just using &quot;response.addHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:3000&quot;);&quot; to my POST and GET methods. However fetch API PUT requests give me the next error, even with the aforementioned header:\r\n\r\n&gt; Access to fetch at &#39;http://localhost:8080/ControladorPedido&#39; from origin &#39;http://localhost:3000&#39; has been blocked by CORS policy: Response to preflight request doesn&#39;t pass access control check: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. If an opaque response serves your needs, set the request&#39;s mode to &#39;no-cors&#39; to fetch the resource with CORS disabled.\r\n\r\nHere&#39;s my fetch request:\r\n\r\n```\r\n    let handlePago = (evt) =&gt; {\r\n        evt.preventDefault();\r\n\r\n        let pago = {\r\n            pedido_id : info.id_pedido,\r\n            pedido_pagado : true\r\n        }\r\n\r\n        try{\r\n            fetch(&quot;http://localhost:8080/ControladorPedido&quot;, {\r\n                method: &quot;PUT&quot;,\r\n                headers: {\r\n                    &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;\r\n                },\r\n                body: new URLSearchParams(pago)\r\n            })\r\n            .then(res =&gt; res.json())\r\n            .then(result =&gt; {\r\n                console.log(result)\r\n            })\r\n        }catch(e){\r\n            console.log(e)\r\n        }\r\n\r\n    }\r\n```\r\n\r\nHere are my doPut headers:\r\n\r\n```\r\nprotected void doPut(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n    pool = conexion.connect();\r\n    response.setContentType(&quot;application/json&quot;);\r\n    response.setCharacterEncoding(&quot;utf-8&quot;);\r\n\r\n    response.addHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:3000&quot;);\r\n    response.addHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;GET, POST, PATCH, PUT, DELETE, OPTIONS&quot;);\r\n    response.addHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Origin, Content-Type, X-Auth-Token&quot;);\r\n\r\n    PrintWriter print = response.getWriter();\r\n}\r\n```\r\n\r\nI&#39;ve tried using &quot;response.setHeader&quot; instead of &quot;response.addHeader&quot; but to no avail.","title":"Servlet doPut rejecting my frontend fetch due to CORS","body":"<p>I'm running a React frontend for my Java WebServlets backend, up until now I've found no trouble with CORS by just using &quot;response.addHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:3000&quot;);&quot; to my POST and GET methods. However fetch API PUT requests give me the next error, even with the aforementioned header:</p>\n<blockquote>\n<p>Access to fetch at 'http://localhost:8080/ControladorPedido' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.</p>\n</blockquote>\n<p>Here's my fetch request:</p>\n<pre><code>    let handlePago = (evt) =&gt; {\n        evt.preventDefault();\n\n        let pago = {\n            pedido_id : info.id_pedido,\n            pedido_pagado : true\n        }\n\n        try{\n            fetch(&quot;http://localhost:8080/ControladorPedido&quot;, {\n                method: &quot;PUT&quot;,\n                headers: {\n                    &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;\n                },\n                body: new URLSearchParams(pago)\n            })\n            .then(res =&gt; res.json())\n            .then(result =&gt; {\n                console.log(result)\n            })\n        }catch(e){\n            console.log(e)\n        }\n\n    }\n</code></pre>\n<p>Here are my doPut headers:</p>\n<pre><code>protected void doPut(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    pool = conexion.connect();\n    response.setContentType(&quot;application/json&quot;);\n    response.setCharacterEncoding(&quot;utf-8&quot;);\n\n    response.addHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:3000&quot;);\n    response.addHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;GET, POST, PATCH, PUT, DELETE, OPTIONS&quot;);\n    response.addHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Origin, Content-Type, X-Auth-Token&quot;);\n\n    PrintWriter print = response.getWriter();\n}\n</code></pre>\n<p>I've tried using &quot;response.setHeader&quot; instead of &quot;response.addHeader&quot; but to no avail.</p>\n"},{"tags":["python","java","cryptography","aes"],"comments":[{"owner":{"account_id":4075612,"reputation":21,"user_id":3347376,"display_name":"Anaconda"},"score":0,"creation_date":1695394707,"post_id":77158609,"comment_id":136023002,"body_markdown":"Note to my future self and anyone else: Java appends the authentication tag while python gives it separately. Thats probably the issue here, will try and report bag.","body":"Note to my future self and anyone else: Java appends the authentication tag while python gives it separately. Thats probably the issue here, will try and report bag."},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1695395142,"post_id":77158609,"comment_id":136023117,"body_markdown":"That&#39;s correct, but your Python code doesn&#39;t return a tag, which is because you are using `encrypt()` instead of [`encrypt_and_digest()`](https://pycryptodome.readthedocs.io/en/latest/src/cipher/modern.html#gcm-mode). The latter returns ciphertext and tag (which can then be concatenated for the Java code).","body":"That&#39;s correct, but your Python code doesn&#39;t return a tag, which is because you are using <code>encrypt()</code> instead of <a href=\"https://pycryptodome.readthedocs.io/en/latest/src/cipher/modern.html#gcm-mode\" rel=\"nofollow noreferrer\"><code>encrypt_and_digest()</code></a>. The latter returns ciphertext and tag (which can then be concatenated for the Java code)."},{"owner":{"account_id":4075612,"reputation":21,"user_id":3347376,"display_name":"Anaconda"},"score":0,"creation_date":1695395575,"post_id":77158609,"comment_id":136023226,"body_markdown":"@Topaco Yes that was the problem. I&#39;ve had encrypt_and_digest but didn&#39;t know what to do with the digest... It works if i just add it at the end of the cipher. Do you want to formualte an answer?","body":"@Topaco Yes that was the problem. I&#39;ve had encrypt_and_digest but didn&#39;t know what to do with the digest... It works if i just add it at the end of the cipher. Do you want to formualte an answer?"}],"owner":{"account_id":4075612,"reputation":21,"user_id":3347376,"display_name":"Anaconda"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695393749,"creation_date":1695393749,"question_id":77158609,"body_markdown":"I&#39;m currently trying to write some Python Code (with pycryptodome) that encrypts some data which will be decrypted by a Java tool which is not in my control (so, the Java part is fixed).\r\n\r\nThe process includes RSA encrypting the AES key and adding the AES nonce. I&#39;ve got all these working, but the AES decryption itself seems to differ. I guess it comes down to some details in the cipher setup but after trying different settings I&#39;m now lost.\r\n\r\nThe strange part is, I can get the java part to decrypt my python cipher text, but I have to use the `Cipher.ENCRYPT_MODE`. Since I can&#39;t change the relevant Java code in production, and the Java code uses `Cipher.DECRYPT_MODE`, thats no solution (and it tells me I&#39;m doing something wrong). With `Cipher.DECRYPT_MODE`, I get `javax.crypto.AEADBadTagException: Tag mismatch`.\r\n\r\nI already tried calling `cipher.decrypt` on the Python part (instead of `cipher.encrypt`), but both give me the same result, so somehow Java makes a difference on encrypt / decrypt while Python doesn&#39;t... Or it&#39;s something completely different.\r\n\r\nI&#39;ve reduced the problem to a minimal example.\r\n\r\nPython Code to generate the cipher:\r\n\r\n```\r\nimport base64\r\nimport Crypto.Cipher.AES\r\n\r\naesnonce  = base64.b64decode(b&quot;nsHTfsEFKyVytEk2&quot;)\r\naeskey    = base64.b64decode(b&quot;2hn3S9IsCTut7Hr9SX/7Pg==&quot;)\r\ncipher    = Crypto.Cipher.AES.new(aeskey, Crypto.Cipher.AES.MODE_GCM, nonce=aesnonce)\r\n\r\nplaintext = b&#39;&#39;&#39;Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore.&#39;&#39;&#39;\r\ncrypted   = cipher.encrypt(plaintext)\r\n\r\nprint( base64.b64encode(crypted) )\r\n#w0ehWquycruj2KGkRES4M8pc6w4ZM+9HyI+KOXgqybmiYIuU1nsjZJwisZprxx2mczP280ZT5KlCXzSX0h24136m708N8sbX6m+5QlDVa73/r9dRyfSzFeByi51NqVm35wP4oHdxYW5iVx9P8iFFpcYd9c8=\r\n```\r\n\r\n\r\nAnd the Java Part \r\n\r\n```\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.IOException;\r\nimport java.security.InvalidAlgorithmParameterException;\r\nimport java.security.InvalidKeyException;\r\nimport java.security.NoSuchAlgorithmException;\r\nimport java.util.Base64;\r\n\r\nimport javax.crypto.Cipher;\r\nimport javax.crypto.CipherInputStream;\r\nimport javax.crypto.NoSuchPaddingException;\r\nimport javax.crypto.spec.GCMParameterSpec;\r\nimport javax.crypto.spec.SecretKeySpec;\r\n\r\npublic class MainTest {\r\n    static public void main(String[] args) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IOException {\r\n    \tbyte[] aesnonce    = Base64.getDecoder().decode(&quot;nsHTfsEFKyVytEk2&quot;);\r\n    \tbyte[] aeskeybytes = Base64.getDecoder().decode(&quot;2hn3S9IsCTut7Hr9SX/7Pg==&quot;);\r\n        byte[] crypted     = Base64.getDecoder().decode(&quot;w0ehWquycruj2KGkRES4M8pc6w4ZM+9HyI+KOXgqybmiYIuU1nsjZJwisZprxx2mczP280ZT5KlCXzSX0h24136m708N8sbX6m+5QlDVa73/r9dRyfSzFeByi51NqVm35wP4oHdxYW5iVx9P8iFFpcYd9c8=&quot;);\r\n                \r\n    \tSecretKeySpec secretKey = new SecretKeySpec(aeskeybytes, &quot;AES&quot;);\r\n\r\n        GCMParameterSpec gcmParameterSpec = new GCMParameterSpec(128, aesnonce);\r\n        Cipher cipher = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\r\n\r\n        cipher.init(Cipher.ENCRYPT_MODE, secretKey, gcmParameterSpec);  // Works\r\n//      cipher.init(Cipher.DECRYPT_MODE, secretKey, gcmParameterSpec);  // Error\r\n\r\n        ByteArrayInputStream inputStream = new ByteArrayInputStream(crypted);\r\n        CipherInputStream cipherInputStream = new CipherInputStream(inputStream, cipher);\r\n        \r\n        byte[] plaintext = cipherInputStream.readAllBytes();\r\n        System.out.print( new String(plaintext) );\r\n    }\r\n}\r\n```\r\n\r\nPS: I&#39;m no Java Guy, and the code is more or less taken from the actual implementation that will be used in production.\r\n\r\nPPS: I know that the authentication check is missing. But, since I do not control the protocol, that&#39;s what we have to work with.","title":"AES encryption - encrypt in Python and decrypt in Java - AEADBadTagException","body":"<p>I'm currently trying to write some Python Code (with pycryptodome) that encrypts some data which will be decrypted by a Java tool which is not in my control (so, the Java part is fixed).</p>\n<p>The process includes RSA encrypting the AES key and adding the AES nonce. I've got all these working, but the AES decryption itself seems to differ. I guess it comes down to some details in the cipher setup but after trying different settings I'm now lost.</p>\n<p>The strange part is, I can get the java part to decrypt my python cipher text, but I have to use the <code>Cipher.ENCRYPT_MODE</code>. Since I can't change the relevant Java code in production, and the Java code uses <code>Cipher.DECRYPT_MODE</code>, thats no solution (and it tells me I'm doing something wrong). With <code>Cipher.DECRYPT_MODE</code>, I get <code>javax.crypto.AEADBadTagException: Tag mismatch</code>.</p>\n<p>I already tried calling <code>cipher.decrypt</code> on the Python part (instead of <code>cipher.encrypt</code>), but both give me the same result, so somehow Java makes a difference on encrypt / decrypt while Python doesn't... Or it's something completely different.</p>\n<p>I've reduced the problem to a minimal example.</p>\n<p>Python Code to generate the cipher:</p>\n<pre><code>import base64\nimport Crypto.Cipher.AES\n\naesnonce  = base64.b64decode(b&quot;nsHTfsEFKyVytEk2&quot;)\naeskey    = base64.b64decode(b&quot;2hn3S9IsCTut7Hr9SX/7Pg==&quot;)\ncipher    = Crypto.Cipher.AES.new(aeskey, Crypto.Cipher.AES.MODE_GCM, nonce=aesnonce)\n\nplaintext = b'''Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore.'''\ncrypted   = cipher.encrypt(plaintext)\n\nprint( base64.b64encode(crypted) )\n#w0ehWquycruj2KGkRES4M8pc6w4ZM+9HyI+KOXgqybmiYIuU1nsjZJwisZprxx2mczP280ZT5KlCXzSX0h24136m708N8sbX6m+5QlDVa73/r9dRyfSzFeByi51NqVm35wP4oHdxYW5iVx9P8iFFpcYd9c8=\n</code></pre>\n<p>And the Java Part</p>\n<pre><code>import java.io.ByteArrayInputStream;\nimport java.io.IOException;\nimport java.security.InvalidAlgorithmParameterException;\nimport java.security.InvalidKeyException;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.Base64;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.CipherInputStream;\nimport javax.crypto.NoSuchPaddingException;\nimport javax.crypto.spec.GCMParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n\npublic class MainTest {\n    static public void main(String[] args) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IOException {\n        byte[] aesnonce    = Base64.getDecoder().decode(&quot;nsHTfsEFKyVytEk2&quot;);\n        byte[] aeskeybytes = Base64.getDecoder().decode(&quot;2hn3S9IsCTut7Hr9SX/7Pg==&quot;);\n        byte[] crypted     = Base64.getDecoder().decode(&quot;w0ehWquycruj2KGkRES4M8pc6w4ZM+9HyI+KOXgqybmiYIuU1nsjZJwisZprxx2mczP280ZT5KlCXzSX0h24136m708N8sbX6m+5QlDVa73/r9dRyfSzFeByi51NqVm35wP4oHdxYW5iVx9P8iFFpcYd9c8=&quot;);\n                \n        SecretKeySpec secretKey = new SecretKeySpec(aeskeybytes, &quot;AES&quot;);\n\n        GCMParameterSpec gcmParameterSpec = new GCMParameterSpec(128, aesnonce);\n        Cipher cipher = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\n\n        cipher.init(Cipher.ENCRYPT_MODE, secretKey, gcmParameterSpec);  // Works\n//      cipher.init(Cipher.DECRYPT_MODE, secretKey, gcmParameterSpec);  // Error\n\n        ByteArrayInputStream inputStream = new ByteArrayInputStream(crypted);\n        CipherInputStream cipherInputStream = new CipherInputStream(inputStream, cipher);\n        \n        byte[] plaintext = cipherInputStream.readAllBytes();\n        System.out.print( new String(plaintext) );\n    }\n}\n</code></pre>\n<p>PS: I'm no Java Guy, and the code is more or less taken from the actual implementation that will be used in production.</p>\n<p>PPS: I know that the authentication check is missing. But, since I do not control the protocol, that's what we have to work with.</p>\n"},{"tags":["java","sonarqube"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1695394208,"post_id":77158575,"comment_id":136022903,"body_markdown":"If Sonar puts the marker at the top of the file, that must mean it&#39;s not getting a line number for where it is occurring, so I think it must be in generated code, perhaps by Lombok or some other annotation processor? I think if you decompile / delombok / `javap -c` the class file you may be able to identify the cause.","body":"If Sonar puts the marker at the top of the file, that must mean it&#39;s not getting a line number for where it is occurring, so I think it must be in generated code, perhaps by Lombok or some other annotation processor? I think if you decompile / delombok / <code>javap -c</code> the class file you may be able to identify the cause."}],"owner":{"account_id":1703211,"reputation":424,"user_id":1562808,"accept_rate":77,"display_name":"ldepablo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695393415,"creation_date":1695393415,"question_id":77158575,"body_markdown":"Sonar is telling me there is an issue \r\n\r\n    Class com.xxx.MyClass creates and initializes a collection but never reads or gains information from it\r\n\r\nTwo things to say:\r\n\r\n 1. We can&#39;f find any collection in that situation and\r\n 2. The line sonar marks as incorrect (red underwrting) is the first line of the file, the `package com.xxx`\r\n\r\nI&#39;ve tried the \r\n\r\n    @SuppressWarnings(&quot;fb-contrib:WOC_WRITE_ONLY_COLLECTION_FIELD&quot;)\r\n\r\njust above the class declaration line but still receiving the same message.\r\n\r\nAny idea as to how to ignore this message or solve this issue?\r\n\r\nMany thanks","title":"sonar issue in package line &quot;creates and initializes a collection but never reads or gains information from it&quot;","body":"<p>Sonar is telling me there is an issue</p>\n<pre><code>Class com.xxx.MyClass creates and initializes a collection but never reads or gains information from it\n</code></pre>\n<p>Two things to say:</p>\n<ol>\n<li>We can'f find any collection in that situation and</li>\n<li>The line sonar marks as incorrect (red underwrting) is the first line of the file, the <code>package com.xxx</code></li>\n</ol>\n<p>I've tried the</p>\n<pre><code>@SuppressWarnings(&quot;fb-contrib:WOC_WRITE_ONLY_COLLECTION_FIELD&quot;)\n</code></pre>\n<p>just above the class declaration line but still receiving the same message.</p>\n<p>Any idea as to how to ignore this message or solve this issue?</p>\n<p>Many thanks</p>\n"},{"tags":["java","pdf","pdfbox"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":2,"creation_date":1695398502,"post_id":77158544,"comment_id":136023830,"body_markdown":"*&quot;To encrypt it correctly I need to know what character is in the file&quot;* - you cannot count on knowing that. The &quot;text&quot; drawing instructions use character codes in arbitrary encodings, encodings that don&#39;t need to have anything to do with standard encodings, e.g. the first glyph used on a given page might have the code 1, the second glyph code 2, etc etc. And there doesn&#39;t need to be any map to resolve that. And even if there is such a map, it may map different glyphs to the same Unicode character. Also there may be single glyphs representing ligatures, i.e. multiple characters, etc.","body":"<i>&quot;To encrypt it correctly I need to know what character is in the file&quot;</i> - you cannot count on knowing that. The &quot;text&quot; drawing instructions use character codes in arbitrary encodings, encodings that don&#39;t need to have anything to do with standard encodings, e.g. the first glyph used on a given page might have the code 1, the second glyph code 2, etc etc. And there doesn&#39;t need to be any map to resolve that. And even if there is such a map, it may map different glyphs to the same Unicode character. Also there may be single glyphs representing ligatures, i.e. multiple characters, etc."},{"owner":{"account_id":29098189,"reputation":16,"user_id":22290633,"display_name":"omkar vanjare"},"score":0,"creation_date":1695721924,"post_id":77158544,"comment_id":136059259,"body_markdown":"Hi  @mkl, Sorry for responding late. I am trying to follow your suggestions in this answer https://stackoverflow.com/a/47850848/22290633 . In this answer you have given 5 steps to read and edit text in pdf at the end of the answer.  My current code is same as in this question : https://stackoverflow.com/q/60631596 . help me to figure out where I am going wrong.","body":"Hi  @mkl, Sorry for responding late. I am trying to follow your suggestions in this answer <a href=\"https://stackoverflow.com/a/47850848/22290633\">stackoverflow.com/a/47850848/22290633</a> . In this answer you have given 5 steps to read and edit text in pdf at the end of the answer.  My current code is same as in this question : <a href=\"https://stackoverflow.com/q/60631596\">stackoverflow.com/q/60631596</a> . help me to figure out where I am going wrong."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1695744766,"post_id":77158544,"comment_id":136064255,"body_markdown":"*&quot;Sorry for responding late. I am trying to follow your suggestions in this answer&quot;* - Actually I there already said what I have said in my first comment here: *Each font in PDFs can use a different encoding for its strings, and these encodings don&#39;t even need to be standard encodings, they may be ad-hoc encodings created on the fly by the PDF creator program.* In that case without mappings to Unicode in the font object, it is very difficult to implement the step *decode the string contents according to the information in the font.*","body":"<i>&quot;Sorry for responding late. I am trying to follow your suggestions in this answer&quot;</i> - Actually I there already said what I have said in my first comment here: <i>Each font in PDFs can use a different encoding for its strings, and these encodings don&#39;t even need to be standard encodings, they may be ad-hoc encodings created on the fly by the PDF creator program.</i> In that case without mappings to Unicode in the font object, it is very difficult to implement the step <i>decode the string contents according to the information in the font.</i>"}],"owner":{"account_id":29098189,"reputation":16,"user_id":22290633,"display_name":"omkar vanjare"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695393190,"creation_date":1695393190,"question_id":77158544,"body_markdown":"I want to edit text in pdf file. Example :- If my PDF is having text as &#39;HELLO WORLD&#39; then I want to encrypt it using one custom encryption algorithm to &quot;GDKKN VNQKC&quot; preserving font and location of text on page.\r\nTo encrypt it correctly I need to know what character is in the file and then apply my encryption algorithm on that and then write it in file in place of original character\r\nHow can I achieve this if it is even achievable using Apache PDFBox java library.\r\n\r\nI have found that TJ operator is used to display text in pdf. I am parsing ContentStream for page and getting TJ token. When I am calling COSString.getSTring() from COSString received from TJ it shows me some random characters because this string is encoded in font. Now I have to find out how to get real character from this encoded value from Font and then encrypt it and encode encrypted character using Font and replace original character with encrypted one.\r\n\r\nI have got this understanding from this posts [https://stackoverflow.com/a/47850848/22290633](https://stackoverflow.com),[https://stackoverflow.com/a/52586830/22290633](https://stackoverflow.com)","title":"How to edit text in pdf preserving format of all textual and non-textual content?","body":"<p>I want to edit text in pdf file. Example :- If my PDF is having text as 'HELLO WORLD' then I want to encrypt it using one custom encryption algorithm to &quot;GDKKN VNQKC&quot; preserving font and location of text on page.\nTo encrypt it correctly I need to know what character is in the file and then apply my encryption algorithm on that and then write it in file in place of original character\nHow can I achieve this if it is even achievable using Apache PDFBox java library.</p>\n<p>I have found that TJ operator is used to display text in pdf. I am parsing ContentStream for page and getting TJ token. When I am calling COSString.getSTring() from COSString received from TJ it shows me some random characters because this string is encoded in font. Now I have to find out how to get real character from this encoded value from Font and then encrypt it and encode encrypted character using Font and replace original character with encrypted one.</p>\n<p>I have got this understanding from this posts <a href=\"https://stackoverflow.com\">https://stackoverflow.com/a/47850848/22290633</a>,<a href=\"https://stackoverflow.com\">https://stackoverflow.com/a/52586830/22290633</a></p>\n"},{"tags":["java","spring-boot","redirect","swagger","http-redirect"],"comments":[{"owner":{"account_id":1581397,"reputation":1555,"user_id":1466713,"display_name":"leberknecht"},"score":0,"creation_date":1695374891,"post_id":77156369,"comment_id":136018904,"body_markdown":"from what i know, swagger is a specification how to describe APIs.. Are you talking about server/client lib that was generated from a swagger spec?","body":"from what i know, swagger is a specification how to describe APIs.. Are you talking about server/client lib that was generated from a swagger spec?"},{"owner":{"account_id":29507678,"reputation":1,"user_id":22613370,"display_name":"zlobeen"},"score":0,"creation_date":1695375081,"post_id":77156369,"comment_id":136018960,"body_markdown":"@leberknecht yes, I&#39;m writing code, one of the functions of which is to redirect to another page on the Internet. I can&#39;t navigate to another page while Swagger is required in my project.","body":"@leberknecht yes, I&#39;m writing code, one of the functions of which is to redirect to another page on the Internet. I can&#39;t navigate to another page while Swagger is required in my project."}],"owner":{"account_id":29507678,"reputation":1,"user_id":22613370,"display_name":"zlobeen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695393024,"creation_date":1695374673,"question_id":77156369,"body_markdown":"I configured Swagger in my project and it handles GET, POST and DELETE requests normally. However, in my project, clicking on one of these requests requires redirecting to another web resource, for example, *https://www.google.com/*. Swagger does not allow me to do this either by the methods:\r\n```\r\npublic String testUrl = &quot;https://www.google.com/&quot;;\r\n\r\n@GetMapping(&quot;/RedirectView&quot;)\r\npublic RedirectView redirectView() {\r\n    return new RedirectView(testUrl);\r\n}\r\n\r\n@GetMapping(&quot;/ResponseEntity&quot;)\r\npublic ResponseEntity&lt;Object&gt; responseEntity() throws URISyntaxException {\r\n    URI uri = new URI(testUrl);\r\n    HttpHeaders httpHeaders = new HttpHeaders();\r\n    httpHeaders.setLocation(uri);\r\n    return new ResponseEntity&lt;&gt;(httpHeaders, HttpStatus.SEE_OTHER);\r\n}\r\n\r\n@GetMapping(value = &quot;/HttpServletResponse&quot;)\r\npublic void httpServletResponse(HttpServletResponse httpServletResponse) throws IOException {\r\n    httpServletResponse.sendRedirect(testUrl);\r\n}\r\n```\r\nIn response to these methods it sends me an error:\r\n**Code:** *Undocumented*\r\n**Details:** *TypeError: Failed to fetch*\r\nAfter opening the page code, I saw the following error in the console:\r\n**Access to fetch at &#39;https://www.google.com/&#39; (redirected from &#39;http://localhost:8080/HttpServletResponse&#39;) from origin &#39;http://localhost:8080&#39; has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. If an opaque response serves your needs, set the request&#39;s mode to &#39;no-cors&#39; to fetch the resource with CORS disabled.**\r\nI tried to solve the problem with CORS, even turned it off, but nothing seems to help me(\r\n\r\n","title":"Can&#39;t access External url from Swagger","body":"<p>I configured Swagger in my project and it handles GET, POST and DELETE requests normally. However, in my project, clicking on one of these requests requires redirecting to another web resource, for example, <em><a href=\"https://www.google.com/\" rel=\"nofollow noreferrer\">https://www.google.com/</a></em>. Swagger does not allow me to do this either by the methods:</p>\n<pre><code>public String testUrl = &quot;https://www.google.com/&quot;;\n\n@GetMapping(&quot;/RedirectView&quot;)\npublic RedirectView redirectView() {\n    return new RedirectView(testUrl);\n}\n\n@GetMapping(&quot;/ResponseEntity&quot;)\npublic ResponseEntity&lt;Object&gt; responseEntity() throws URISyntaxException {\n    URI uri = new URI(testUrl);\n    HttpHeaders httpHeaders = new HttpHeaders();\n    httpHeaders.setLocation(uri);\n    return new ResponseEntity&lt;&gt;(httpHeaders, HttpStatus.SEE_OTHER);\n}\n\n@GetMapping(value = &quot;/HttpServletResponse&quot;)\npublic void httpServletResponse(HttpServletResponse httpServletResponse) throws IOException {\n    httpServletResponse.sendRedirect(testUrl);\n}\n</code></pre>\n<p>In response to these methods it sends me an error:\n<strong>Code:</strong> <em>Undocumented</em>\n<strong>Details:</strong> <em>TypeError: Failed to fetch</em>\nAfter opening the page code, I saw the following error in the console:\n<strong>Access to fetch at 'https://www.google.com/' (redirected from 'http://localhost:8080/HttpServletResponse') from origin 'http://localhost:8080' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.</strong>\nI tried to solve the problem with CORS, even turned it off, but nothing seems to help me(</p>\n"},{"tags":["java","reactjs","spring-boot","websocket","spring-websocket"],"owner":{"account_id":27495475,"reputation":3,"user_id":20980046,"display_name":"abhishek yadav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695392477,"creation_date":1695388784,"question_id":77157986,"body_markdown":"I&#39;m getting the above error when trying to run the application. I&#39;m using spring boot on the backend and websocket. And using js and sockjs library.\r\nThis is the error I&#39;m getting:\r\n\r\n\r\n    ChatRoom.js:45 Uncaught TypeError: Cannot read properties of null (reading &#39;addEventListener&#39;)&lt;br/&gt;\r\n    at ChatRoom (ChatRoom.js:45:1)&lt;br/&gt;\r\n    at renderWithHooks (react-dom.development.js:16305:1)&lt;br/&gt;\r\n    at mountIndeterminateComponent (react-dom.development.js:20074:1)&lt;br/&gt;\r\n    at beginWork (react-dom.development.js:21587:1)&lt;br/&gt;\r\n    at beginWork$1 (react-dom.development.js:27426:1)&lt;br/&gt;\r\n    at performUnitOfWork (react-dom.development.js:26557:1)&lt;br/&gt;\r\n    at workLoopSync (react-dom.development.js:26466:1)&lt;br/&gt;\r\n    at renderRootSync (react-dom.development.js:26434:1)&lt;br/&gt;\r\n    at performSyncWorkOnRoot (react-dom.development.js:26085:1)&lt;br/&gt;\r\n    at flushSyncCallbacks (react-dom.development.js:12042:1)&lt;br/&gt;\r\n    \r\n    \r\n    \r\n    abstract-xhr.js:132     GET https://localhost:8282/NotificationService/info?t=1695387828667 &lt;br/&gt;\r\n    net::ERR_CERT_AUTHORITY_INVALID\r\n\r\n\r\nEverything is working fine if instead of creating a separate file for the frontend code I put all the code in the spring boot project itself.\r\n\r\nThis is the component/chatRoom.js file\r\n\r\n```\r\nconst ChatRoom = () =&gt; {\r\n\r\n    let socket = new SockJS(&quot;https://localhost:8282/NotificationService&quot;);\r\n\r\n    let stompClient = over(socket);\r\n\r\n    stompClient.connect({}, (frame) =&gt; {\r\n        console.log(&#39;WebSocket connection established.&#39;);\r\n\r\n        stompClient.subscribe(&#39;/notification/message&#39;, (message) =&gt; {\r\n            const notification = JSON.parse(message.body);\r\n            displayMessage(notification);\r\n        });\r\n    });\r\n\r\n    function sendMessage() {\r\n        const messageInput = document.getElementById(&#39;messageInput&#39;);\r\n        const message = messageInput.value.trim();\r\n\r\n        if (message) {\r\n            const notification = {\r\n                messageContent: message,\r\n                messageRecipient: &#39;&#39;, // Set the recipient if required\r\n                status: &#39;&#39;,\r\n                createdDate: new Date().toISOString(),\r\n            };\r\n\r\n            stompClient.send(&#39;/app/sendMessage&#39;, {}, JSON.stringify(notification));\r\n            messageInput.value = &#39;&#39;;\r\n        }\r\n    }\r\n\r\n    function displayMessage(notification) {\r\n        const messageList = document.getElementById(&#39;messageList&#39;);\r\n        const messageElement = document.createElement(&#39;li&#39;);\r\n        messageElement.textContent = notification.messageContent;\r\n        messageList.appendChild(messageElement);\r\n    }\r\n\r\n    document.getElementById(&#39;sendButton&#39;).addEventListener(&#39;click&#39;, sendMessage);\r\n    document.getElementById(&#39;messageInput&#39;).addEventListener(&#39;keypress&#39;, (event) =&gt; {\r\n        if (event.key === &#39;Enter&#39;) {\r\n            sendMessage();\r\n        }\r\n    });\r\n\r\n    return (\r\n        &lt;html&gt;\r\n            &lt;head&gt;\r\n                &lt;title&gt;WebSocket Chat&lt;/title&gt;\r\n            &lt;/head&gt;\r\n            &lt;body&gt;\r\n                &lt;h1&gt;Received Messages&lt;/h1&gt;\r\n                &lt;ul id=&quot;messageList&quot;&gt;\r\n                &lt;/ul&gt;\r\n                &lt;div&gt;\r\n                    &lt;label for=&quot;messageInput&quot;&gt;&lt;/label&gt;&lt;input type=&quot;text&quot; id=&quot;messageInput&quot; placeholder=&quot;Type your message...&quot; /&gt;\r\n                    &lt;button id=&quot;sendButton&quot;&gt;Send&lt;/button&gt;\r\n                &lt;/div&gt;\r\n\r\n            &lt;/body&gt;\r\n        &lt;/html&gt;\r\n    )\r\n}\r\n\r\n\r\nexport default ChatRoom\r\n```\r\n\r\nThis is the app.js file\r\n\r\n```\r\nimport React from &#39;react&#39;;\r\nimport ChatRoom from &#39;./component/ChatRoom&#39;;\r\n\r\nfunction App() {\r\n  return (\r\n   &lt;ChatRoom /&gt;\r\n  )\r\n}\r\n\r\nexport default App;\r\n```\r\n\r\nThis is index.js file\r\n\r\n```\r\nimport React from &#39;react&#39;;\r\nimport ReactDOM from &#39;react-dom&#39;;\r\nimport &#39;./index.css&#39;;\r\nimport App from &#39;./App&#39;;\r\n\r\nReactDOM.render(\r\n  &lt;React.StrictMode&gt;\r\n    &lt;App /&gt;\r\n  &lt;/React.StrictMode&gt;,\r\n  document.getElementById(&#39;root&#39;)\r\n);\r\n```","title":"Cannot read properties of null (reading &#39;addEventListener&#39;) Getting error while connecting to sockjs","body":"<p>I'm getting the above error when trying to run the application. I'm using spring boot on the backend and websocket. And using js and sockjs library.\nThis is the error I'm getting:</p>\n<pre><code>ChatRoom.js:45 Uncaught TypeError: Cannot read properties of null (reading 'addEventListener')&lt;br/&gt;\nat ChatRoom (ChatRoom.js:45:1)&lt;br/&gt;\nat renderWithHooks (react-dom.development.js:16305:1)&lt;br/&gt;\nat mountIndeterminateComponent (react-dom.development.js:20074:1)&lt;br/&gt;\nat beginWork (react-dom.development.js:21587:1)&lt;br/&gt;\nat beginWork$1 (react-dom.development.js:27426:1)&lt;br/&gt;\nat performUnitOfWork (react-dom.development.js:26557:1)&lt;br/&gt;\nat workLoopSync (react-dom.development.js:26466:1)&lt;br/&gt;\nat renderRootSync (react-dom.development.js:26434:1)&lt;br/&gt;\nat performSyncWorkOnRoot (react-dom.development.js:26085:1)&lt;br/&gt;\nat flushSyncCallbacks (react-dom.development.js:12042:1)&lt;br/&gt;\n\n\n\nabstract-xhr.js:132     GET https://localhost:8282/NotificationService/info?t=1695387828667 &lt;br/&gt;\nnet::ERR_CERT_AUTHORITY_INVALID\n</code></pre>\n<p>Everything is working fine if instead of creating a separate file for the frontend code I put all the code in the spring boot project itself.</p>\n<p>This is the component/chatRoom.js file</p>\n<pre><code>const ChatRoom = () =&gt; {\n\n    let socket = new SockJS(&quot;https://localhost:8282/NotificationService&quot;);\n\n    let stompClient = over(socket);\n\n    stompClient.connect({}, (frame) =&gt; {\n        console.log('WebSocket connection established.');\n\n        stompClient.subscribe('/notification/message', (message) =&gt; {\n            const notification = JSON.parse(message.body);\n            displayMessage(notification);\n        });\n    });\n\n    function sendMessage() {\n        const messageInput = document.getElementById('messageInput');\n        const message = messageInput.value.trim();\n\n        if (message) {\n            const notification = {\n                messageContent: message,\n                messageRecipient: '', // Set the recipient if required\n                status: '',\n                createdDate: new Date().toISOString(),\n            };\n\n            stompClient.send('/app/sendMessage', {}, JSON.stringify(notification));\n            messageInput.value = '';\n        }\n    }\n\n    function displayMessage(notification) {\n        const messageList = document.getElementById('messageList');\n        const messageElement = document.createElement('li');\n        messageElement.textContent = notification.messageContent;\n        messageList.appendChild(messageElement);\n    }\n\n    document.getElementById('sendButton').addEventListener('click', sendMessage);\n    document.getElementById('messageInput').addEventListener('keypress', (event) =&gt; {\n        if (event.key === 'Enter') {\n            sendMessage();\n        }\n    });\n\n    return (\n        &lt;html&gt;\n            &lt;head&gt;\n                &lt;title&gt;WebSocket Chat&lt;/title&gt;\n            &lt;/head&gt;\n            &lt;body&gt;\n                &lt;h1&gt;Received Messages&lt;/h1&gt;\n                &lt;ul id=&quot;messageList&quot;&gt;\n                &lt;/ul&gt;\n                &lt;div&gt;\n                    &lt;label for=&quot;messageInput&quot;&gt;&lt;/label&gt;&lt;input type=&quot;text&quot; id=&quot;messageInput&quot; placeholder=&quot;Type your message...&quot; /&gt;\n                    &lt;button id=&quot;sendButton&quot;&gt;Send&lt;/button&gt;\n                &lt;/div&gt;\n\n            &lt;/body&gt;\n        &lt;/html&gt;\n    )\n}\n\n\nexport default ChatRoom\n</code></pre>\n<p>This is the app.js file</p>\n<pre><code>import React from 'react';\nimport ChatRoom from './component/ChatRoom';\n\nfunction App() {\n  return (\n   &lt;ChatRoom /&gt;\n  )\n}\n\nexport default App;\n</code></pre>\n<p>This is index.js file</p>\n<pre><code>import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  &lt;React.StrictMode&gt;\n    &lt;App /&gt;\n  &lt;/React.StrictMode&gt;,\n  document.getElementById('root')\n);\n</code></pre>\n"},{"tags":["java","android","kotlin","unit-testing","nfc"],"comments":[{"owner":{"account_id":2755641,"reputation":8698,"user_id":2373819,"display_name":"Andrew"},"score":1,"creation_date":1695393923,"post_id":77158439,"comment_id":136022832,"body_markdown":"There are not really many other options, other than manual testing with a real device, this is what I do. As most of the testing needed is for how to correctly handle Exceptions and timing issues generated quite often by user behaviour.","body":"There are not really many other options, other than manual testing with a real device, this is what I do. As most of the testing needed is for how to correctly handle Exceptions and timing issues generated quite often by user behaviour."}],"owner":{"account_id":21201496,"reputation":1037,"user_id":15592048,"display_name":"Mirco Bellagamba"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695392407,"creation_date":1695392407,"question_id":77158439,"body_markdown":"I am currently working on an Android application that involves NFC tags. In my app, I need to write to NFC tags, and I would like to write some unit tests that directly interact with the [`android.nfc.Tag`][1] class. The following method is an example of the functionality I need to test:\r\n\r\n```kotlin\r\n    fun write(tag: Tag, message: NdefMessage) {\r\n        val ndef = Ndef.get(tag) ?: throw Exception()\r\n        ndef.connect()\r\n        ndef.writeNdefMessage(message)\r\n        ndef.close()\r\n    }\r\n```\r\n\r\nIs there a way to instantiate the `Tag` class in unit tests?\r\n\r\nThe constructor of the `Tag` class is hidden, making it impossible to instantiate it outside the `android.nfc` package. Additionally, it&#39;s not extensible because the Tag class is marked as final. With Android SDK 34, it&#39;s also not possible to use reflection. I attempted the solution mentioned in this StackOverflow thread (https://stackoverflow.com/questions/30841803/how-to-mock-a-android-nfc-tag-object-for-unit-testing), but I encountered the error `java.lang.NoSuchMethodException: android.nfc.Tag.createMockTag`. It seems that the Android team has restricted access to that method for privacy reasons. I&#39;ve also tried the way suggested in https://stackoverflow.com/questions/34882171/testing-an-app-by-faking-nfc-tag-scan but without success for my use case because the Tag is not well formed.\r\n\r\nMy last option is to mock it using [Mockito][2] or another mocking library, but I am hesitant to do so because it would mean testing with a mocked implementation rather than the actual one.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/nfc/Tag\r\n  [2]: https://site.mockito.org/","title":"How to test NFC Tag interaction in Android since android.nfc.Tag cannot be instatiated?","body":"<p>I am currently working on an Android application that involves NFC tags. In my app, I need to write to NFC tags, and I would like to write some unit tests that directly interact with the <a href=\"https://developer.android.com/reference/android/nfc/Tag\" rel=\"nofollow noreferrer\"><code>android.nfc.Tag</code></a> class. The following method is an example of the functionality I need to test:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>    fun write(tag: Tag, message: NdefMessage) {\n        val ndef = Ndef.get(tag) ?: throw Exception()\n        ndef.connect()\n        ndef.writeNdefMessage(message)\n        ndef.close()\n    }\n</code></pre>\n<p>Is there a way to instantiate the <code>Tag</code> class in unit tests?</p>\n<p>The constructor of the <code>Tag</code> class is hidden, making it impossible to instantiate it outside the <code>android.nfc</code> package. Additionally, it's not extensible because the Tag class is marked as final. With Android SDK 34, it's also not possible to use reflection. I attempted the solution mentioned in this StackOverflow thread (<a href=\"https://stackoverflow.com/questions/30841803/how-to-mock-a-android-nfc-tag-object-for-unit-testing\">How to mock a Android NFC Tag object for unit testing</a>), but I encountered the error <code>java.lang.NoSuchMethodException: android.nfc.Tag.createMockTag</code>. It seems that the Android team has restricted access to that method for privacy reasons. I've also tried the way suggested in <a href=\"https://stackoverflow.com/questions/34882171/testing-an-app-by-faking-nfc-tag-scan\">Testing an app by faking NFC tag scan</a> but without success for my use case because the Tag is not well formed.</p>\n<p>My last option is to mock it using <a href=\"https://site.mockito.org/\" rel=\"nofollow noreferrer\">Mockito</a> or another mocking library, but I am hesitant to do so because it would mean testing with a mocked implementation rather than the actual one.</p>\n"},{"tags":["java","file"],"comments":[{"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"score":0,"creation_date":1549640764,"post_id":54595752,"comment_id":95987829,"body_markdown":"Do you want to find longest common prefix? Or any longest common subpath?","body":"Do you want to find longest common prefix? Or any longest common subpath?"},{"owner":{"account_id":14034180,"reputation":523,"user_id":10137268,"display_name":"Paul Erlenmeyer"},"score":0,"creation_date":1549640820,"post_id":54595752,"comment_id":95987863,"body_markdown":"You could split the strings and compare the parts in between the &quot;/&quot;. In the end return the correct substring.","body":"You could split the strings and compare the parts in between the &quot;/&quot;. In the end return the correct substring."},{"owner":{"account_id":7090,"reputation":54514,"user_id":12149,"accept_rate":66,"display_name":"Alex Spurling"},"score":1,"creation_date":1549651707,"post_id":54595752,"comment_id":95993254,"body_markdown":"@MichałZiober the longest common prefix. It should find the nearest parent directory that is common to both paths.","body":"@MichałZiober the longest common prefix. It should find the nearest parent directory that is common to both paths."}],"answers":[{"tags":[],"owner":{"account_id":4540696,"reputation":7790,"user_id":3688648,"accept_rate":54,"display_name":"Felk"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1549642283,"creation_date":1549641745,"answer_id":54596165,"question_id":54595752,"body_markdown":"    Path path1 = Paths.get(&quot;/a/b/c/d/e&quot;);\r\n    Path path2 = Paths.get(&quot;/a/b/c/g/h&quot;);\r\n\r\nYou can relativize the paths to one another:\r\n\r\n    Path relativePath = path1.relativize(path2).normalize();\r\n    // result: ../../g/h\r\n\r\nand then go to the parent until the path ends in `..`\r\n\r\n    while(relativePath != null &amp;&amp; !relativePath.endsWith(&quot;..&quot;)) {\r\n        relativePath = relativePath.getParent();\r\n    }\r\n    // result: ../.. (but may also be null)\r\n\r\nthe result can be applied back to any of the two paths:\r\n\r\n    Path result = path1.resolve(relativePath).normalize()\r\n    // result: /a/b/c","title":"Find the longest Path common to two Paths in Java","body":"<pre><code>Path path1 = Paths.get(\"/a/b/c/d/e\");\nPath path2 = Paths.get(\"/a/b/c/g/h\");\n</code></pre>\n\n<p>You can relativize the paths to one another:</p>\n\n<pre><code>Path relativePath = path1.relativize(path2).normalize();\n// result: ../../g/h\n</code></pre>\n\n<p>and then go to the parent until the path ends in <code>..</code></p>\n\n<pre><code>while(relativePath != null &amp;&amp; !relativePath.endsWith(\"..\")) {\n    relativePath = relativePath.getParent();\n}\n// result: ../.. (but may also be null)\n</code></pre>\n\n<p>the result can be applied back to any of the two paths:</p>\n\n<pre><code>Path result = path1.resolve(relativePath).normalize()\n// result: /a/b/c\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11564221,"reputation":5963,"user_id":8473028,"accept_rate":94,"display_name":"DodgyCodeException"},"score":1,"creation_date":1549646103,"post_id":54596369,"comment_id":95990734,"body_markdown":"You might want to add a `getRoot()` call to fix the problem of stripping the initial &quot;/&quot;.","body":"You might want to add a <code>getRoot()</code> call to fix the problem of stripping the initial &quot;/&quot;."},{"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"score":0,"creation_date":1549664869,"post_id":54596369,"comment_id":95998543,"body_markdown":"Good catch. Thanks! I updated answer with your suggestion.","body":"Good catch. Thanks! I updated answer with your suggestion."}],"tags":[],"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1549664822,"creation_date":1549642561,"answer_id":54596369,"question_id":54595752,"body_markdown":"We can generate all subpaths starting from the longest possible and check which two are equal:\r\n\r\n    private Path commonPath(Path path0, Path path1) {\r\n    \tif (path0.equals(path1)) {\r\n    \t\treturn path0;\r\n    \t}\r\n    \r\n    \tpath0 = path0.normalize();\r\n    \tpath1 = path1.normalize();\r\n    \tint minCount = Math.min(path0.getNameCount(), path1.getNameCount());\r\n    \tfor (int i = minCount; i &gt; 0; i--) {\r\n    \t\tPath sp0 = path0.subpath(0, i);\r\n    \t\tif (sp0.equals(path1.subpath(0, i))) {\r\n    \t\t\tString root = Objects.toString(path0.getRoot(), &quot;&quot;);\r\n    \t\t\treturn Paths.get(root, sp0.toString());\r\n    \t\t}\r\n    \t}\r\n    \r\n    \treturn path0.getRoot();\r\n    }\r\n\r\nAnd usage:\r\n\r\n    Map&lt;String, String&gt; paths = new LinkedHashMap&lt;&gt;();\r\n    paths.put(&quot;/a/b/c&quot;, &quot;/a/b/d&quot;);\r\n    paths.put(&quot;/a/&quot;, &quot;/a/b/d&quot;);\r\n    paths.put(&quot;/f/b/c&quot;, &quot;/a/b/d&quot;);\r\n    paths.put(&quot;/a/b/c/d/e&quot;, &quot;/a/b/f/../c/g&quot;);\r\n    paths.put(&quot;C:/Winnt/System32&quot;, &quot;C:/Winnt/System64&quot;);\r\n    \r\n    paths.forEach((k, v) -&gt;\r\n    \t\tSystem.out.println(\r\n    \t\t\t\tk + &quot; = &quot; + v + &quot; =&gt; &quot; + commonPath(Paths.get(k), Paths.get(v))));\r\n\r\nAbove code prints:\r\n\r\n    /a/b/c = /a/b/d =&gt; /a/b\r\n    /a/ = /a/b/d =&gt; /a\r\n    /f/b/c = /a/b/d =&gt; /\r\n    /a/b/c/d/e = /a/b/f/../c/g =&gt; /a/b/c\r\n    C:/Winnt/System32 = C:/Winnt/System64 =&gt; C:/Winnt","title":"Find the longest Path common to two Paths in Java","body":"<p>We can generate all subpaths starting from the longest possible and check which two are equal:</p>\n\n<pre><code>private Path commonPath(Path path0, Path path1) {\n    if (path0.equals(path1)) {\n        return path0;\n    }\n\n    path0 = path0.normalize();\n    path1 = path1.normalize();\n    int minCount = Math.min(path0.getNameCount(), path1.getNameCount());\n    for (int i = minCount; i &gt; 0; i--) {\n        Path sp0 = path0.subpath(0, i);\n        if (sp0.equals(path1.subpath(0, i))) {\n            String root = Objects.toString(path0.getRoot(), \"\");\n            return Paths.get(root, sp0.toString());\n        }\n    }\n\n    return path0.getRoot();\n}\n</code></pre>\n\n<p>And usage:</p>\n\n<pre><code>Map&lt;String, String&gt; paths = new LinkedHashMap&lt;&gt;();\npaths.put(\"/a/b/c\", \"/a/b/d\");\npaths.put(\"/a/\", \"/a/b/d\");\npaths.put(\"/f/b/c\", \"/a/b/d\");\npaths.put(\"/a/b/c/d/e\", \"/a/b/f/../c/g\");\npaths.put(\"C:/Winnt/System32\", \"C:/Winnt/System64\");\n\npaths.forEach((k, v) -&gt;\n        System.out.println(\n                k + \" = \" + v + \" =&gt; \" + commonPath(Paths.get(k), Paths.get(v))));\n</code></pre>\n\n<p>Above code prints:</p>\n\n<pre><code>/a/b/c = /a/b/d =&gt; /a/b\n/a/ = /a/b/d =&gt; /a\n/f/b/c = /a/b/d =&gt; /\n/a/b/c/d/e = /a/b/f/../c/g =&gt; /a/b/c\nC:/Winnt/System32 = C:/Winnt/System64 =&gt; C:/Winnt\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11564221,"reputation":5963,"user_id":8473028,"accept_rate":94,"display_name":"DodgyCodeException"},"score":0,"creation_date":1549645718,"post_id":54597109,"comment_id":95990533,"body_markdown":"This looks good, except if you use absolute paths &quot;/a/b/c&quot; you&#39;ll get back relative path &quot;a/b/c&quot;.","body":"This looks good, except if you use absolute paths &quot;/a/b/c&quot; you&#39;ll get back relative path &quot;a/b/c&quot;."},{"owner":{"account_id":11564221,"reputation":5963,"user_id":8473028,"accept_rate":94,"display_name":"DodgyCodeException"},"score":0,"creation_date":1549646079,"post_id":54597109,"comment_id":95990722,"body_markdown":"You might want to add a `getRoot()` call.","body":"You might want to add a <code>getRoot()</code> call."},{"owner":{"account_id":1654043,"reputation":2659,"user_id":1524027,"display_name":"mnesarco"},"score":0,"creation_date":1549646292,"post_id":54597109,"comment_id":95990848,"body_markdown":"Thanks @DodgyCodeException, I have added code to support both cases.","body":"Thanks @DodgyCodeException, I have added code to support both cases."},{"owner":{"account_id":11564221,"reputation":5963,"user_id":8473028,"accept_rate":94,"display_name":"DodgyCodeException"},"score":0,"creation_date":1549647823,"post_id":54597109,"comment_id":95991527,"body_markdown":"Now it works well on Linux, but not on Windows (&quot;C:\\a\\b&quot;, &quot;D:\\f\\g&quot; -&gt; &quot;\\&quot; ?)","body":"Now it works well on Linux, but not on Windows (&quot;C:\\a\\b&quot;, &quot;D:\\f\\g&quot; -&gt; &quot;\\&quot; ?)"},{"owner":{"account_id":1654043,"reputation":2659,"user_id":1524027,"display_name":"mnesarco"},"score":0,"creation_date":1549648468,"post_id":54597109,"comment_id":95991803,"body_markdown":"@DodgyCodeException, Nice catch. I have updated the answer.","body":"@DodgyCodeException, Nice catch. I have updated the answer."}],"tags":[],"owner":{"account_id":1654043,"reputation":2659,"user_id":1524027,"display_name":"mnesarco"},"comment_count":5,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1549661459,"creation_date":1549645267,"answer_id":54597109,"question_id":54595752,"body_markdown":"Try this simple idea\r\n\r\n        Path a = Paths.get(&quot;a/b/c/d/e&quot;);\r\n        Path b = Paths.get(&quot;a/b/c/g/h&quot;);\r\n\r\n        // Normalize\r\n        a = a.normalize();\r\n        b = b.normalize();\r\n\r\n        // Create common root\r\n        Path common = null;\r\n        if (a.isAbsolute() &amp;&amp; b.isAbsolute() &amp;&amp; a.getRoot().equals(b.getRoot())) {\r\n                common = a.getRoot();\r\n        }\r\n        else if (!a.isAbsolute() &amp;&amp; !b.isAbsolute()) {\r\n                common = Paths.get(&quot;&quot;);\r\n        }\r\n\r\n        // Iterate from root until names differ\r\n        if (common != null) {\r\n                int n = Math.min(a.getNameCount(), b.getNameCount());\r\n                for (int i=0; i&lt;n; i++) {\r\n                        if (a.getName(i).equals(b.getName(i))) {\r\n                                common = common.resolve(a.getName(i));\r\n                        }\r\n                        else {\r\n                                break;\r\n                        }\r\n                }\r\n        }\r\n\r\n        // Show\r\n        System.out.println(common);\r\n","title":"Find the longest Path common to two Paths in Java","body":"<p>Try this simple idea</p>\n\n<pre><code>    Path a = Paths.get(\"a/b/c/d/e\");\n    Path b = Paths.get(\"a/b/c/g/h\");\n\n    // Normalize\n    a = a.normalize();\n    b = b.normalize();\n\n    // Create common root\n    Path common = null;\n    if (a.isAbsolute() &amp;&amp; b.isAbsolute() &amp;&amp; a.getRoot().equals(b.getRoot())) {\n            common = a.getRoot();\n    }\n    else if (!a.isAbsolute() &amp;&amp; !b.isAbsolute()) {\n            common = Paths.get(\"\");\n    }\n\n    // Iterate from root until names differ\n    if (common != null) {\n            int n = Math.min(a.getNameCount(), b.getNameCount());\n            for (int i=0; i&lt;n; i++) {\n                    if (a.getName(i).equals(b.getName(i))) {\n                            common = common.resolve(a.getName(i));\n                    }\n                    else {\n                            break;\n                    }\n            }\n    }\n\n    // Show\n    System.out.println(common);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1418937,"reputation":5014,"user_id":1343979,"accept_rate":80,"display_name":"Bass"},"score":1,"creation_date":1695389260,"post_id":70381752,"comment_id":136021802,"body_markdown":"Great answer!\n\nI can only comment that the 3-argument form of `Stream.iterate()` can be used in both cases, e.g.: `Stream.iterate(a.normalize(), Objects::nonNull, Path::getParent)`.","body":"Great answer!  I can only comment that the 3-argument form of <code>Stream.iterate()</code> can be used in both cases, e.g.: <code>Stream.iterate(a.normalize(), Objects::nonNull, Path::getParent)</code>."}],"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695392313,"creation_date":1639669061,"answer_id":70381752,"question_id":54595752,"body_markdown":"Whatever the question, it&#39;s always fun trying to answer using streams:\r\n\r\n    public static Path commonPath(Path a, Path b) {\r\n        Path other = b.normalize();\r\n        return Stream.iterate(a.normalize(), Path::getParent)\r\n            .takeWhile(Objects::nonNull)\r\n            .filter(parent -&gt; Stream.iterate(other, Path::getParent).takeWhile(Objects::nonNull)\r\n                                    .anyMatch(x -&gt; Objects.equals(x, parent)))\r\n            .findFirst().orElse(null);\r\n    }\r\n\r\nThis works on Windows / Linux, for example try the test data in @Michał Ziober answer. This just iterates up the parent hierarchy of first until it meets a parent of the other. \r\n\r\nWith the suggestion by Bass in comments, the common path check is more concise using the other version of `Stream.iterate`:\r\n\r\n    public static Path commonPath(Path a, Path b) {\r\n        return Stream.iterate(a.normalize(), Objects::nonNull, Path::getParent)\r\n            .filter(parent -&gt; Stream.iterate(b.normalize(), Objects::nonNull, Path::getParent)\r\n                                    .anyMatch(parent::equals))\r\n            .findFirst().orElse(null);\r\n    }\r\n\r\nA small refactoring could pull out `Stream.iterate(path.normalize(), Objects::nonNull, Path::getParent)` to a new method `Stream&lt;Path&gt; parentsOf(Path path)` as it is repeated twice above.\r\n\r\n\r\n","title":"Find the longest Path common to two Paths in Java","body":"<p>Whatever the question, it's always fun trying to answer using streams:</p>\n<pre><code>public static Path commonPath(Path a, Path b) {\n    Path other = b.normalize();\n    return Stream.iterate(a.normalize(), Path::getParent)\n        .takeWhile(Objects::nonNull)\n        .filter(parent -&gt; Stream.iterate(other, Path::getParent).takeWhile(Objects::nonNull)\n                                .anyMatch(x -&gt; Objects.equals(x, parent)))\n        .findFirst().orElse(null);\n}\n</code></pre>\n<p>This works on Windows / Linux, for example try the test data in @Michał Ziober answer. This just iterates up the parent hierarchy of first until it meets a parent of the other.</p>\n<p>With the suggestion by Bass in comments, the common path check is more concise using the other version of <code>Stream.iterate</code>:</p>\n<pre><code>public static Path commonPath(Path a, Path b) {\n    return Stream.iterate(a.normalize(), Objects::nonNull, Path::getParent)\n        .filter(parent -&gt; Stream.iterate(b.normalize(), Objects::nonNull, Path::getParent)\n                                .anyMatch(parent::equals))\n        .findFirst().orElse(null);\n}\n</code></pre>\n<p>A small refactoring could pull out <code>Stream.iterate(path.normalize(), Objects::nonNull, Path::getParent)</code> to a new method <code>Stream&lt;Path&gt; parentsOf(Path path)</code> as it is repeated twice above.</p>\n"},{"tags":[],"owner":{"account_id":1418937,"reputation":5014,"user_id":1343979,"accept_rate":80,"display_name":"Bass"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695389800,"creation_date":1695389800,"answer_id":77158104,"question_id":54595752,"body_markdown":"While the [answer](https://stackoverflow.com/a/70381752/1343979) by [DuncG](https://stackoverflow.com/users/4712734/duncg) is definitely the most concise and probably the most efficient one, I&#39;ll add my solution, too.\r\n\r\nConsider we have a function to transform a `Path` into a `Stream` of path entries:\r\n\r\n```java\r\n@NonNull Stream&lt;@NonNull Path&gt; pathEntries(final @NonNull Path path) {\r\n    return Stream.concat(Stream.ofNullable(path.getRoot()), StreamSupport.stream(path.spliterator(), false));\r\n}\r\n```\r\n\r\nNow, consider we have another helper function that [zips two streams](https://stackoverflow.com/a/43059312/1343979) together (e.g.: `Streams.zip()` from _Guava_):\r\n\r\n```java\r\n&lt;A, B, R&gt; @NonNull Stream&lt;R&gt; zip(\r\n        final @NonNull Stream&lt;A&gt; streamA,\r\n        final @NonNull Stream&lt;B&gt; streamB,\r\n        final BiFunction&lt;? super A, ? super B, ? extends R&gt; function\r\n) {\r\n    final Spliterator&lt;A&gt; splitrA = streamA.spliterator();\r\n    final Spliterator&lt;B&gt; splitrB = streamB.spliterator();\r\n    final int characteristics = splitrA.characteristics()\r\n            &amp; splitrB.characteristics()\r\n            &amp; (Spliterator.SIZED | Spliterator.ORDERED);\r\n    final Iterator&lt;A&gt; itrA = Spliterators.iterator(splitrA);\r\n    final Iterator&lt;B&gt; itrB = Spliterators.iterator(splitrB);\r\n    return StreamSupport.stream(new AbstractSpliterator&lt;R&gt;(Math.min(splitrA.estimateSize(), splitrB.estimateSize()), characteristics) {\r\n        @Override\r\n        public boolean tryAdvance(final @NonNull Consumer&lt;? super R&gt; action) {\r\n            if (itrA.hasNext() &amp;&amp; itrB.hasNext()) {\r\n                action.accept(function.apply(itrA.next(), itrB.next()));\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n    }, false)\r\n            .onClose(streamA::close)\r\n            .onClose(streamB::close);\r\n}\r\n```\r\n\r\nThen, the solution will look like this:\r\n\r\n```java\r\n@Nullable Path commonOrNull(final @NonNull Path left, final @NonNull Path right) {\r\n    return zip(\r\n            pathEntries(left.normalize()),\r\n            pathEntries(right.normalize()),\r\n            (l, r) -&gt; l.equals(r) ? l : null\r\n    )\r\n            .takeWhile(Objects::nonNull)\r\n            .reduce(Path::resolve)\r\n            .orElse(null);\r\n}\r\n```\r\n\r\nThis will also work on _Windows_, returning `null` for any two paths that don&#39;t share a common file system root, like `C:\\foo` and `D:\\foo`.","title":"Find the longest Path common to two Paths in Java","body":"<p>While the <a href=\"https://stackoverflow.com/a/70381752/1343979\">answer</a> by <a href=\"https://stackoverflow.com/users/4712734/duncg\">DuncG</a> is definitely the most concise and probably the most efficient one, I'll add my solution, too.</p>\n<p>Consider we have a function to transform a <code>Path</code> into a <code>Stream</code> of path entries:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NonNull Stream&lt;@NonNull Path&gt; pathEntries(final @NonNull Path path) {\n    return Stream.concat(Stream.ofNullable(path.getRoot()), StreamSupport.stream(path.spliterator(), false));\n}\n</code></pre>\n<p>Now, consider we have another helper function that <a href=\"https://stackoverflow.com/a/43059312/1343979\">zips two streams</a> together (e.g.: <code>Streams.zip()</code> from <em>Guava</em>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;A, B, R&gt; @NonNull Stream&lt;R&gt; zip(\n        final @NonNull Stream&lt;A&gt; streamA,\n        final @NonNull Stream&lt;B&gt; streamB,\n        final BiFunction&lt;? super A, ? super B, ? extends R&gt; function\n) {\n    final Spliterator&lt;A&gt; splitrA = streamA.spliterator();\n    final Spliterator&lt;B&gt; splitrB = streamB.spliterator();\n    final int characteristics = splitrA.characteristics()\n            &amp; splitrB.characteristics()\n            &amp; (Spliterator.SIZED | Spliterator.ORDERED);\n    final Iterator&lt;A&gt; itrA = Spliterators.iterator(splitrA);\n    final Iterator&lt;B&gt; itrB = Spliterators.iterator(splitrB);\n    return StreamSupport.stream(new AbstractSpliterator&lt;R&gt;(Math.min(splitrA.estimateSize(), splitrB.estimateSize()), characteristics) {\n        @Override\n        public boolean tryAdvance(final @NonNull Consumer&lt;? super R&gt; action) {\n            if (itrA.hasNext() &amp;&amp; itrB.hasNext()) {\n                action.accept(function.apply(itrA.next(), itrB.next()));\n                return true;\n            }\n\n            return false;\n        }\n    }, false)\n            .onClose(streamA::close)\n            .onClose(streamB::close);\n}\n</code></pre>\n<p>Then, the solution will look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Nullable Path commonOrNull(final @NonNull Path left, final @NonNull Path right) {\n    return zip(\n            pathEntries(left.normalize()),\n            pathEntries(right.normalize()),\n            (l, r) -&gt; l.equals(r) ? l : null\n    )\n            .takeWhile(Objects::nonNull)\n            .reduce(Path::resolve)\n            .orElse(null);\n}\n</code></pre>\n<p>This will also work on <em>Windows</em>, returning <code>null</code> for any two paths that don't share a common file system root, like <code>C:\\foo</code> and <code>D:\\foo</code>.</p>\n"}],"owner":{"account_id":7090,"reputation":54514,"user_id":12149,"accept_rate":66,"display_name":"Alex Spurling"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1691,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":5,"score":5,"last_activity_date":1695392313,"creation_date":1549640300,"question_id":54595752,"body_markdown":"If I have two Paths, how can I find the longest common Path of the two?\r\n\r\n    import java.nio.file.Path;\r\n    import java.nio.file.Paths;\r\n    \r\n    Path common(Path pathA, Path pathB) {\r\n        ...\r\n    }\r\n    ...\r\n    common(Paths.get(&quot;/a/b/c/d/e&quot;), Paths.get(&quot;/a/b/c/g/h&quot;))\r\n\r\nExpected output: \r\n    \r\n    Paths.get(&quot;/a/b/c&quot;)","title":"Find the longest Path common to two Paths in Java","body":"<p>If I have two Paths, how can I find the longest common Path of the two?</p>\n\n<pre><code>import java.nio.file.Path;\nimport java.nio.file.Paths;\n\nPath common(Path pathA, Path pathB) {\n    ...\n}\n...\ncommon(Paths.get(\"/a/b/c/d/e\"), Paths.get(\"/a/b/c/g/h\"))\n</code></pre>\n\n<p>Expected output: </p>\n\n<pre><code>Paths.get(\"/a/b/c\")\n</code></pre>\n"},{"tags":["java","spring-boot","microservices"],"owner":{"account_id":3405565,"reputation":840,"user_id":2856694,"accept_rate":30,"display_name":"Victor Soares"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695392238,"creation_date":1695392238,"question_id":77158421,"body_markdown":"I have a monorepo with a parent POM and several modules. One of the modules (Module A) is a Spring Boot application that has a dependency on another module (Module B). Both have their respective application.properties files.\r\n\r\nHowever, when Module A makes a call to Module B, an error occurs because the called module cannot find the values in its respective .properties file (using @Value).\r\n\r\n    Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder &#39;kafka.bootstrap-servers&#39; in value &quot;${kafka.bootstrap-servers}&quot;\r\n\r\nBoth properties are in the Spring applicationContext, but I believe the problem is that Module B does not manage the application.properties when the call comes from another module.\r\n\r\nDoes anyone know how to solve this?\r\n\r\n**applicationContext A:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**ApplicationContext B:**\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nzxAD.png\r\n  [2]: https://i.stack.imgur.com/FIkQN.png","title":"Spring Boot - Multi Module and problem to find application.properties","body":"<p>I have a monorepo with a parent POM and several modules. One of the modules (Module A) is a Spring Boot application that has a dependency on another module (Module B). Both have their respective application.properties files.</p>\n<p>However, when Module A makes a call to Module B, an error occurs because the called module cannot find the values in its respective .properties file (using @Value).</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder 'kafka.bootstrap-servers' in value &quot;${kafka.bootstrap-servers}&quot;\n</code></pre>\n<p>Both properties are in the Spring applicationContext, but I believe the problem is that Module B does not manage the application.properties when the call comes from another module.</p>\n<p>Does anyone know how to solve this?</p>\n<p><strong>applicationContext A:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/nzxAD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nzxAD.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>ApplicationContext B:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/FIkQN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FIkQN.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","datetime","java-8","timezone","timezone-offset"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1515420729,"post_id":48151335,"comment_id":83282452,"body_markdown":"Do you mean you receive a `DateTimeFormatter` object produced from one of the `DateTimeFormatter.ofPattern` methods (after this has parsed the format pattern string)? Or do you mean that you receive a `TemporalAccessor` that comes from one of the `DateTimeFormatter.parse` methods? Sorry, it’s not perfectly clear.","body":"Do you mean you receive a <code>DateTimeFormatter</code> object produced from one of the <code>DateTimeFormatter.ofPattern</code> methods (after this has parsed the format pattern string)? Or do you mean that you receive a <code>TemporalAccessor</code> that comes from one of the <code>DateTimeFormatter.parse</code> methods? Sorry, it’s not perfectly clear."},{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":0,"creation_date":1515422754,"post_id":48151335,"comment_id":83283731,"body_markdown":"IMHO your idea to &quot;serialize&quot; formatters is not a good idea. It was a wise design decision not to make `DateTimeFormatter` serializable. Instead of &quot;formatting&quot; and &quot;reparsing&quot; inherently complex objects like formatters, you could better just send the format pattern strings together with a zone-id and maybe a locale, too, so the receiver can easily reconstruct the original formatter.","body":"IMHO your idea to &quot;serialize&quot; formatters is not a good idea. It was a wise design decision not to make <code>DateTimeFormatter</code> serializable. Instead of &quot;formatting&quot; and &quot;reparsing&quot; inherently complex objects like formatters, you could better just send the format pattern strings together with a zone-id and maybe a locale, too, so the receiver can easily reconstruct the original formatter."}],"answers":[{"comments":[{"owner":{"account_id":39564,"reputation":10494,"user_id":114196,"accept_rate":80,"display_name":"Niels Basjes"},"score":0,"creation_date":1515493429,"post_id":48152779,"comment_id":83311085,"body_markdown":"Having a simple &quot;fixed&quot; offset like UTC is fine so I really like the parseDefaulting construct. Is it possible to detect that it will be/is used so I can give a warning message?","body":"Having a simple &quot;fixed&quot; offset like UTC is fine so I really like the parseDefaulting construct. Is it possible to detect that it will be/is used so I can give a warning message?"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1515493897,"post_id":48152779,"comment_id":83311363,"body_markdown":"Not really (that I know of). A hack may be to default to an odd offset that would otherwise never be used, like 7 seconds or 60013 seconds, then after parsing you can detect if this offset was used (and change to UTC if you prefer).","body":"Not really (that I know of). A hack may be to default to an odd offset that would otherwise never be used, like 7 seconds or 60013 seconds, then after parsing you can detect if this offset was used (and change to UTC if you prefer)."}],"tags":[],"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1556452078,"creation_date":1515423406,"answer_id":48152779,"question_id":48151335,"body_markdown":"I see what you mean, and I haven’t found the perfect solution either, but I thought I’d share a couple of options.\r\n\r\nIf it’s OK for you to set an offset like UTC to be used if the formatter cannot parse a zone or offset, I suggest:\r\n\r\n\tformatter = new DateTimeFormatterBuilder().append(formatter)\r\n\t\t\t.parseDefaulting(ChronoField.OFFSET_SECONDS, ZoneOffset.UTC.getTotalSeconds())\r\n\t\t\t.toFormatter();\r\n\r\nI have not yet found a case where this would do any harm. If the formatter already parses zone or offset information (or contains a default offset), this will have no effect. If it doesn’t, the specified default offset will be used.\r\n\r\nThe above doesn’t work for enforcing a time zone with variable offset (like a time zone with summer time (DST)). To enforce one, I believe you’re supposed to parse, get and catch the exception and then enforce the time zone the way you have already found:\r\n\r\n\tZonedDateTime dateTime;\r\n\ttry {\r\n\t\tdateTime = ZonedDateTime.parse(dateTimeString, formatter);\r\n\t} catch (DateTimeParseException dtpe) {\r\n\t\tdateTime = ZonedDateTime.parse(dateTimeString, \r\n\t\t\t\t\t\tformatter.withZone(ZoneId.of(&quot;Europe/Amsterdam&quot;)));\r\n\t}\r\n\r\nThe downside is that catch clause will also catch errors not related to missing offset or zone. You might try to parse the exception message, but I believe that that just leaves you with a problem similar to the one you started out from. I would not bother.\r\n\r\nIMHO what we are really missing is a getter to get the fields that the formatter knows how to format and parse. For complicated formatters, the design and use of such a method would be challenging, though, so I tend to understand why they didn’t provide one.","title":"Determine if a Java 8 DateTimeFormatter includes enough timezone information","body":"<p>I see what you mean, and I haven’t found the perfect solution either, but I thought I’d share a couple of options.</p>\n\n<p>If it’s OK for you to set an offset like UTC to be used if the formatter cannot parse a zone or offset, I suggest:</p>\n\n<pre><code>formatter = new DateTimeFormatterBuilder().append(formatter)\n        .parseDefaulting(ChronoField.OFFSET_SECONDS, ZoneOffset.UTC.getTotalSeconds())\n        .toFormatter();\n</code></pre>\n\n<p>I have not yet found a case where this would do any harm. If the formatter already parses zone or offset information (or contains a default offset), this will have no effect. If it doesn’t, the specified default offset will be used.</p>\n\n<p>The above doesn’t work for enforcing a time zone with variable offset (like a time zone with summer time (DST)). To enforce one, I believe you’re supposed to parse, get and catch the exception and then enforce the time zone the way you have already found:</p>\n\n<pre><code>ZonedDateTime dateTime;\ntry {\n    dateTime = ZonedDateTime.parse(dateTimeString, formatter);\n} catch (DateTimeParseException dtpe) {\n    dateTime = ZonedDateTime.parse(dateTimeString, \n                    formatter.withZone(ZoneId.of(\"Europe/Amsterdam\")));\n}\n</code></pre>\n\n<p>The downside is that catch clause will also catch errors not related to missing offset or zone. You might try to parse the exception message, but I believe that that just leaves you with a problem similar to the one you started out from. I would not bother.</p>\n\n<p>IMHO what we are really missing is a getter to get the fields that the formatter knows how to format and parse. For complicated formatters, the design and use of such a method would be challenging, though, so I tend to understand why they didn’t provide one.</p>\n"},{"tags":[],"owner":{"account_id":2500328,"reputation":11,"user_id":2175627,"display_name":"user2175627"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695391843,"creation_date":1695391843,"answer_id":77158376,"question_id":48151335,"body_markdown":"I know this has been asked a long time ago, but in case someone else needs it, this is the approach I took facing the same problem:\r\n\r\n    public boolean formatterOutputsOffset(DateTimeFormatter dateTimeFormatter) {\r\n            DateTimeFormatter forTest = new DateTimeFormatterBuilder()\r\n                    .append(dateTimeFormatter)\r\n                    .parseDefaulting(ChronoField.HOUR_OF_DAY, 0)\r\n                    .parseDefaulting(ChronoField.MINUTE_OF_HOUR, 0)\r\n                    .parseDefaulting(ChronoField.SECOND_OF_MINUTE, 0)\r\n                    .toFormatter();\r\n            String dateTime = forTest.format(Instant.now().atOffset(ZoneOffset.UTC));\r\n            try {\r\n                OffsetDateTime.parse(dateTime, forTest);\r\n                return true;\r\n            } catch (DateTimeException ex) {\r\n                return false;\r\n            }\r\n        }\r\n\r\nHere I&#39;m testing if the the formatter can convert the current instant into a date string that it can convert back into OffsetDateTime. The parseDefaulting methods are invoked in case the formatter loses the hour, minute or second information which are required for the conversion back to OffsetDateTime. In case you expect loss of year, month or day you can add the corresponding parseDefaulting(...). \r\n\r\nThe method checks for the pattern availability of an offset, if you need a test for zones you can write practically the same method using ZonedDateTime.parse(...)","title":"Determine if a Java 8 DateTimeFormatter includes enough timezone information","body":"<p>I know this has been asked a long time ago, but in case someone else needs it, this is the approach I took facing the same problem:</p>\n<pre><code>public boolean formatterOutputsOffset(DateTimeFormatter dateTimeFormatter) {\n        DateTimeFormatter forTest = new DateTimeFormatterBuilder()\n                .append(dateTimeFormatter)\n                .parseDefaulting(ChronoField.HOUR_OF_DAY, 0)\n                .parseDefaulting(ChronoField.MINUTE_OF_HOUR, 0)\n                .parseDefaulting(ChronoField.SECOND_OF_MINUTE, 0)\n                .toFormatter();\n        String dateTime = forTest.format(Instant.now().atOffset(ZoneOffset.UTC));\n        try {\n            OffsetDateTime.parse(dateTime, forTest);\n            return true;\n        } catch (DateTimeException ex) {\n            return false;\n        }\n    }\n</code></pre>\n<p>Here I'm testing if the the formatter can convert the current instant into a date string that it can convert back into OffsetDateTime. The parseDefaulting methods are invoked in case the formatter loses the hour, minute or second information which are required for the conversion back to OffsetDateTime. In case you expect loss of year, month or day you can add the corresponding parseDefaulting(...).</p>\n<p>The method checks for the pattern availability of an offset, if you need a test for zones you can write practically the same method using ZonedDateTime.parse(...)</p>\n"}],"owner":{"account_id":39564,"reputation":10494,"user_id":114196,"accept_rate":80,"display_name":"Niels Basjes"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1657,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":48152779,"answer_count":2,"score":3,"last_activity_date":1695391843,"creation_date":1515418183,"question_id":48151335,"body_markdown":"I have some code that receives a parsed `DateTimeFormatter` instance.\r\nNow in some cases I have seen that there is no timezone/offset information in there and thus I run into parsing errors (exceptions).\r\n\r\nTo avoid those errors I want to &#39;force&#39; a default timezone/offset in like `ZoneOffset.UTC` when nothing is specified.\r\n\r\nSo far I have not yet been able to find a &#39;clean and documented&#39; way of doing this. \r\n\r\nIn this example the `getZone()` method returns `null`\r\n```\r\nParseCaseSensitive(false)Value(DayOfMonth,2)&#39;/&#39;Text(MonthOfYear,SHORT)&#39;/&#39;Value(Year,4)&#39; &#39;Value(HourOfDay,2)&#39;:&#39;Value(MinuteOfHour,2)&#39;:&#39;Value(SecondOfMinute,2)&#39;.&#39;Value(MilliOfSecond,3)&#39; &#39;Offset(+HHMM,&#39;+0000&#39;)\r\n```\r\n\r\n\r\nThe best I have come up with so far is to do a &#39;toString()&#39; and then check if a desired substring is in there like this:\r\n\r\n    String formatterExpression = formatter.toString();\r\n    if (formatterExpression.lastIndexOf(&quot;Offset(&quot;) == -1 &amp;&amp;\r\n        formatterExpression.lastIndexOf(&quot;ZoneText(&quot;) == -1\r\n        ) {\r\n        formatter = formatter.withZone(defaultZone);\r\n        LOG.error(&quot;The timestamp format \\&quot;{}\\&quot; does NOT contain a timezone so we assume \\&quot;{}\\&quot;.&quot;,\r\n            formatter.toString(), defaultZone.getDisplayName(TextStyle.SHORT, Locale.ENGLISH));\r\n    }\r\n\r\nWhat is the proper way of doing this?\r\n\r\n***Additional background information***\r\nThis code is part of a system that allows parsing date/time text for which the format was specified using the strftime format.\r\n\r\nSee:\r\n\r\n - https://github.com/nielsbasjes/logparser/blob/master/httpdlog/httpdlog-parser/src/main/antlr4/nl/basjes/parse/strftime/StrfTime.g4\r\n - https://github.com/nielsbasjes/logparser/blob/master/httpdlog/httpdlog-parser/src/main/java/nl/basjes/parse/httpdlog/dissectors/StrfTimeToDateTimeFormatter.java\r\n","title":"Determine if a Java 8 DateTimeFormatter includes enough timezone information","body":"<p>I have some code that receives a parsed <code>DateTimeFormatter</code> instance.\nNow in some cases I have seen that there is no timezone/offset information in there and thus I run into parsing errors (exceptions).</p>\n\n<p>To avoid those errors I want to 'force' a default timezone/offset in like <code>ZoneOffset.UTC</code> when nothing is specified.</p>\n\n<p>So far I have not yet been able to find a 'clean and documented' way of doing this. </p>\n\n<p>In this example the <code>getZone()</code> method returns <code>null</code></p>\n\n<pre><code>ParseCaseSensitive(false)Value(DayOfMonth,2)'/'Text(MonthOfYear,SHORT)'/'Value(Year,4)' 'Value(HourOfDay,2)':'Value(MinuteOfHour,2)':'Value(SecondOfMinute,2)'.'Value(MilliOfSecond,3)' 'Offset(+HHMM,'+0000')\n</code></pre>\n\n<p>The best I have come up with so far is to do a 'toString()' and then check if a desired substring is in there like this:</p>\n\n<pre><code>String formatterExpression = formatter.toString();\nif (formatterExpression.lastIndexOf(\"Offset(\") == -1 &amp;&amp;\n    formatterExpression.lastIndexOf(\"ZoneText(\") == -1\n    ) {\n    formatter = formatter.withZone(defaultZone);\n    LOG.error(\"The timestamp format \\\"{}\\\" does NOT contain a timezone so we assume \\\"{}\\\".\",\n        formatter.toString(), defaultZone.getDisplayName(TextStyle.SHORT, Locale.ENGLISH));\n}\n</code></pre>\n\n<p>What is the proper way of doing this?</p>\n\n<p><strong><em>Additional background information</em></strong>\nThis code is part of a system that allows parsing date/time text for which the format was specified using the strftime format.</p>\n\n<p>See:</p>\n\n<ul>\n<li><a href=\"https://github.com/nielsbasjes/logparser/blob/master/httpdlog/httpdlog-parser/src/main/antlr4/nl/basjes/parse/strftime/StrfTime.g4\" rel=\"nofollow noreferrer\">https://github.com/nielsbasjes/logparser/blob/master/httpdlog/httpdlog-parser/src/main/antlr4/nl/basjes/parse/strftime/StrfTime.g4</a></li>\n<li><a href=\"https://github.com/nielsbasjes/logparser/blob/master/httpdlog/httpdlog-parser/src/main/java/nl/basjes/parse/httpdlog/dissectors/StrfTimeToDateTimeFormatter.java\" rel=\"nofollow noreferrer\">https://github.com/nielsbasjes/logparser/blob/master/httpdlog/httpdlog-parser/src/main/java/nl/basjes/parse/httpdlog/dissectors/StrfTimeToDateTimeFormatter.java</a></li>\n</ul>\n"},{"tags":["java","maven","karate"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1689029703,"post_id":76657730,"comment_id":135152716,"body_markdown":"See also [_Run a single test method with maven_](https://stackoverflow.com/q/1873995/230513).","body":"See also <a href=\"https://stackoverflow.com/q/1873995/230513\"><i>Run a single test method with maven</i></a>."}],"answers":[{"tags":[],"owner":{"account_id":3228074,"reputation":550,"user_id":2723924,"display_name":"Shreyansh Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689033287,"creation_date":1689033287,"answer_id":76657965,"question_id":76657730,"body_markdown":"Replace -Dkarate.en=“qa” to -Dkarate.env=“qa” ","title":"Unknown lifecycle phase while executing maven command","body":"<p>Replace -Dkarate.en=“qa” to -Dkarate.env=“qa”</p>\n"},{"comments":[{"owner":{"account_id":18805726,"reputation":135,"user_id":13715111,"display_name":"satishsrip"},"score":0,"creation_date":1689346966,"post_id":76658632,"comment_id":135205168,"body_markdown":"I did tried as you suggested. But still I see the same issue. In intellij IDE terminal, when executed with command it says unknown lifecycle phase&quot;.env&quot;\n\nmade changes to pom file with latest version as described in additional detials. still I am facing the same issue.\n\nI tried running the same command in command prompt and it shows\nfatal error compiling invalid target release : 17","body":"I did tried as you suggested. But still I see the same issue. In intellij IDE terminal, when executed with command it says unknown lifecycle phase&quot;.env&quot;  made changes to pom file with latest version as described in additional detials. still I am facing the same issue.  I tried running the same command in command prompt and it shows fatal error compiling invalid target release : 17"},{"owner":{"account_id":48302,"reputation":55363,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1689347938,"post_id":76658632,"comment_id":135205376,"body_markdown":"@satishsrip sorry I give up. follow this process: https://github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue","body":"@satishsrip sorry I give up. follow this process: <a href=\"https://github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue\" rel=\"nofollow noreferrer\">github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue</a>"}],"tags":[],"owner":{"account_id":48302,"reputation":55363,"user_id":143475,"display_name":"Peter Thomas"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689048082,"creation_date":1689048082,"answer_id":76658632,"question_id":76657730,"body_markdown":"Try:\r\n\r\n    -Dkarate.options=&quot;—t @sampletest&quot;\r\n\r\n","title":"Unknown lifecycle phase while executing maven command","body":"<p>Try:</p>\n<pre><code>-Dkarate.options=&quot;—t @sampletest&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9799402,"reputation":11,"user_id":7261208,"display_name":"Tebogo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695391811,"creation_date":1695391811,"answer_id":77158374,"question_id":76657730,"body_markdown":"I had the same issue, and it was resolved when I switched intellij terminal from using powershell to using cmd","title":"Unknown lifecycle phase while executing maven command","body":"<p>I had the same issue, and it was resolved when I switched intellij terminal from using powershell to using cmd</p>\n"}],"owner":{"account_id":18805726,"reputation":135,"user_id":13715111,"display_name":"satishsrip"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1695391811,"creation_date":1689028563,"question_id":76657730,"body_markdown":"\r\n\r\nI am using openjdk 17.6(temurin 17) and maven 3.9.3 to run my karate framework and I am getting following error while executing men command\r\n\r\n**Unknown lifecycle phase .env. You must specify valid lifecycle phase**\r\n\r\nMaven command\r\nMvn clean test -Dkarate.env=“qa” -Dkarate.options=“—-tags@sampletest”\r\n\r\nNot sure why mvn command is failing.please help \r\n\r\n\r\n\r\nAdding additional detials \r\n\r\nfollowing changes have been made to pom file \r\n```\r\n&lt;maven.compiler.version&gt;3.10.1&lt;/maven.compiler.version&gt;\r\n&lt;maven.surefire.plugin&gt;3.1.0&lt;/maven.surefire.plugin&gt;\r\n&lt;karate.version&gt;1.4.1RC2&lt;/karate.version&gt;\r\n&lt;aspectj.version&gt;1.8.10&lt;/aspectj.version&gt;\r\n```\r\n\r\ngetting following issue \r\nFailed to execute goal org.apache.maven.plugin:3.10.1:testCompile\r\nFatal error compiling: Invalid target release 17\r\n\r\n","title":"Unknown lifecycle phase while executing maven command","body":"<p>I am using openjdk 17.6(temurin 17) and maven 3.9.3 to run my karate framework and I am getting following error while executing men command</p>\n<p><strong>Unknown lifecycle phase .env. You must specify valid lifecycle phase</strong></p>\n<p>Maven command\nMvn clean test -Dkarate.env=“qa” -Dkarate.options=“—-tags@sampletest”</p>\n<p>Not sure why mvn command is failing.please help</p>\n<p>Adding additional detials</p>\n<p>following changes have been made to pom file</p>\n<pre><code>&lt;maven.compiler.version&gt;3.10.1&lt;/maven.compiler.version&gt;\n&lt;maven.surefire.plugin&gt;3.1.0&lt;/maven.surefire.plugin&gt;\n&lt;karate.version&gt;1.4.1RC2&lt;/karate.version&gt;\n&lt;aspectj.version&gt;1.8.10&lt;/aspectj.version&gt;\n</code></pre>\n<p>getting following issue\nFailed to execute goal org.apache.maven.plugin:3.10.1:testCompile\nFatal error compiling: Invalid target release 17</p>\n"},{"tags":["java","tomcat","centos","webserver","pki"],"owner":{"account_id":25600556,"reputation":11,"user_id":19375640,"display_name":"codemaster1101"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695391225,"creation_date":1695391225,"question_id":77158295,"body_markdown":"I am using Dogtag PKI 11.4.2 on CentOS 9\r\nI am facing an issue where Tomcat can not find the static css/image files as the GUI for dogtag is actually missing!\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fBu97.png\r\nThis  is the command i am using for installing the PKI:\r\n\r\n```\r\nsudo dnf install pki-server pki-tools pki-ca 389-ds-base -y\r\n\r\n```\r\n\r\nI tried looking up the common-ui folder on the internet but i could not find it anywhere :(","title":"Dogtag PKI &quot;/usr/share/pki/common-ui&quot; is missing","body":"<p>I am using Dogtag PKI 11.4.2 on CentOS 9\nI am facing an issue where Tomcat can not find the static css/image files as the GUI for dogtag is actually missing!</p>\n<p><a href=\"https://i.stack.imgur.com/fBu97.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fBu97.png\" alt=\"enter image description here\" /></a></p>\n<p>This  is the command i am using for installing the PKI:</p>\n<pre><code>sudo dnf install pki-server pki-tools pki-ca 389-ds-base -y\n\n</code></pre>\n<p>I tried looking up the common-ui folder on the internet but i could not find it anywhere :(</p>\n"},{"tags":["java","json","jackson","gson"],"answers":[{"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1403177305,"post_id":24305400,"comment_id":37562758,"body_markdown":"No, the input contains a *list of* `MyType`, not a single object.","body":"No, the input contains a <i>list of</i> <code>MyType</code>, not a single object."}],"tags":[],"owner":{"account_id":1202941,"reputation":1603,"user_id":1173227,"accept_rate":67,"display_name":"Vinit Prajapati"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1403177676,"creation_date":1403177026,"answer_id":24305400,"question_id":24305341,"body_markdown":"It is more easy\r\n\r\n    MyType myType = new ObjectMapper().readValue(input, new TypeReference&lt;List&lt;MyType&gt;&gt;() {});\r\n\r\n\r\nupdated answer.","title":"Parsing a list of objects with Jackson","body":"<p>It is more easy</p>\n\n<pre><code>MyType myType = new ObjectMapper().readValue(input, new TypeReference&lt;List&lt;MyType&gt;&gt;() {});\n</code></pre>\n\n<p>updated answer.</p>\n"},{"comments":[{"owner":{"account_id":144075,"reputation":165,"user_id":352856,"display_name":"giraffe"},"score":0,"creation_date":1686916094,"post_id":24305656,"comment_id":134867705,"body_markdown":"Both construct() methods are deprecated since Jackson 2.7.","body":"Both construct() methods are deprecated since Jackson 2.7."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686916196,"post_id":24305656,"comment_id":134867726,"body_markdown":"Gee, a 9 year old answer is out of date? Who would&#39;ve guessed.","body":"Gee, a 9 year old answer is out of date? Who would&#39;ve guessed."}],"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1403177836,"creation_date":1403177836,"answer_id":24305656,"question_id":24305341,"body_markdown":"I&#39;ve found the solution in the mean time. Apparently, Jackson provides its own way of working around this:\r\n\r\n    List&lt;MyType&gt; list = new ObjectMapper().readValue(input, CollectionType.construct(List.class, SimpleType.construct(MyType.class));","title":"Parsing a list of objects with Jackson","body":"<p>I've found the solution in the mean time. Apparently, Jackson provides its own way of working around this:</p>\n\n<pre><code>List&lt;MyType&gt; list = new ObjectMapper().readValue(input, CollectionType.construct(List.class, SimpleType.construct(MyType.class));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10294926,"reputation":46,"user_id":12526166,"display_name":"pierre-vr"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695391185,"creation_date":1695391185,"answer_id":77158291,"question_id":24305341,"body_markdown":"The following works with Jackson 2.7 and higher. It doesn&#39;t use the deprecated static methods to get the TypeFactory. Instead, it gets the TypeFactory from the object mapper.\r\n\r\n```\r\nfinal ObjectMapper mapper = new ObjectMapper();\r\n\r\nmapper.readValue(input, mapper.getTypeFactory().constructCollectionType(List.class, MyType.class));\r\n```","title":"Parsing a list of objects with Jackson","body":"<p>The following works with Jackson 2.7 and higher. It doesn't use the deprecated static methods to get the TypeFactory. Instead, it gets the TypeFactory from the object mapper.</p>\n<pre><code>final ObjectMapper mapper = new ObjectMapper();\n\nmapper.readValue(input, mapper.getTypeFactory().constructCollectionType(List.class, MyType.class));\n</code></pre>\n"}],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2631,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77158291,"answer_count":3,"score":1,"last_activity_date":1695391185,"creation_date":1403176845,"question_id":24305341,"body_markdown":"I want to use Jackson to parse a list of objects. With Gson, I can do this easily:\r\n\r\n    List&lt;MyType&gt; list = new Gson().fromJson(input, Types.listOf(MyType.class));\r\n\r\nWith Jackson, it seems to be more difficult:\r\n\r\n    List&lt;MyType&gt; list = new ObjectMapper().readValue(input, /* What to put here? */);\r\n\r\nThe code needs to work for lists of any type (like Gson does), so I can&#39;t just make a type that contains a list of `MyType` and pass that in.\r\n\r\nI&#39;ve tried using `new TypeLiteral&lt;List&lt;MyType&gt;&gt;(){}`, which works, but only for a single type. If I pass in the type to the method, it doesn&#39;t work any more:\r\n\r\n    public &lt;T&gt; List&lt;T&gt; parse(Class&lt;T&gt; myType) {\r\n        // returns a List&lt;Map&lt;?,?&gt;&gt; instead of List&lt;T&gt;\r\n        return new ObjectMapper().readValue(input, new TypeLiteral&lt;List&lt;T&gt;&gt;(){});\r\n    }\r\n\r\nHow do I do this with Jackson?","title":"Parsing a list of objects with Jackson","body":"<p>I want to use Jackson to parse a list of objects. With Gson, I can do this easily:</p>\n\n<pre><code>List&lt;MyType&gt; list = new Gson().fromJson(input, Types.listOf(MyType.class));\n</code></pre>\n\n<p>With Jackson, it seems to be more difficult:</p>\n\n<pre><code>List&lt;MyType&gt; list = new ObjectMapper().readValue(input, /* What to put here? */);\n</code></pre>\n\n<p>The code needs to work for lists of any type (like Gson does), so I can't just make a type that contains a list of <code>MyType</code> and pass that in.</p>\n\n<p>I've tried using <code>new TypeLiteral&lt;List&lt;MyType&gt;&gt;(){}</code>, which works, but only for a single type. If I pass in the type to the method, it doesn't work any more:</p>\n\n<pre><code>public &lt;T&gt; List&lt;T&gt; parse(Class&lt;T&gt; myType) {\n    // returns a List&lt;Map&lt;?,?&gt;&gt; instead of List&lt;T&gt;\n    return new ObjectMapper().readValue(input, new TypeLiteral&lt;List&lt;T&gt;&gt;(){});\n}\n</code></pre>\n\n<p>How do I do this with Jackson?</p>\n"},{"tags":["java","spring","spring-boot","serialization"],"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695391027,"creation_date":1695382868,"question_id":77157312,"body_markdown":"Building a Java project(java 19) with spring boot(3.1.3) and gradle(8.2).\r\nAlso use a Google Cloud Storage and when getting data I want to deserialize data in the object with SerializationUtils,but climbs out this error:\r\n\r\n```\r\njava.lang.ClassCastException: class com.example.pastebin.entity.Paste cannot be cast to class com.example.pastebin.entity.Paste (com.example.pastebin.entity.Paste is in unnamed module of loader &#39;app&#39;; com.example.pastebin.entity.Paste is in unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader @6ed949b0)\r\n\tat com.example.pastebin.services.PasteService.findAll(PasteService.java:46) ~[main/:na]\r\n\tat com.example.pastebin.controllers.PasteController.allPastes(PasteController.java:35) ~[main/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.12.jar:6.0]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:110) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:101) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\r\n```\r\n\r\nbuild.gradle:\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;3.1.3&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.3&#39;\r\n}\r\n\r\ngroup = &#39;org.example&#39;\r\nversion = &#39;1.0-SNAPSHOT&#39;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\nconfigurations {\r\n    compileOnly {\r\n        extendsFrom annotationProcessor\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-redis&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-thymeleaf&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    implementation &#39;org.thymeleaf.extras:thymeleaf-extras-springsecurity6&#39;\r\n    compileOnly &#39;org.projectlombok:lombok&#39;\r\n    developmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n    runtimeOnly &#39;org.postgresql:postgresql&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    testImplementation &#39;org.springframework.security:spring-security-test&#39;\r\n    implementation &#39;org.mapstruct:mapstruct:1.5.5.Final&#39;\r\n    annotationProcessor &#39;org.mapstruct:mapstruct-processor:1.5.5.Final&#39;\r\n    implementation &#39;com.google.cloud:google-cloud-storage:2.26.1&#39;\r\n    testImplementation platform(&#39;org.junit:junit-bom:5.9.1&#39;)\r\n    testImplementation &#39;org.junit.jupiter:junit-jupiter&#39;\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n```\r\n\r\nPaste Entity:\r\n```\r\npackage com.example.pastebin.entity;\r\n\r\nimport jakarta.persistence.*;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\nimport java.io.Serial;\r\nimport java.io.Serializable;\r\nimport java.time.LocalDateTime;\r\n\r\n@Entity\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Paste implements Serializable {\r\n    @Serial\r\n    private static final long serialVersionUID = 8591616427310310802L;\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;title&quot;, nullable = false)\r\n    private String title;\r\n\r\n    @Column(name = &quot;text&quot;, nullable = false)\r\n    private String text;\r\n\r\n    @Lob\r\n    private byte[] bytes;\r\n\r\n    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    private User user;\r\n\r\n    private LocalDateTime dateOfCreated;\r\n\r\n    @PrePersist\r\n    private void init() {\r\n        this.dateOfCreated = LocalDateTime.now();\r\n    }\r\n}\r\n```\r\n\r\nDTO:\r\n```\r\npackage com.example.pastebin.dto;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class PasteDTO {\r\n    private String title;\r\n    private String text;\r\n    private String author;\r\n}\r\n```\r\n\r\nPaste Service:\r\n```\r\npackage com.example.pastebin.services;\r\n\r\nimport com.example.pastebin.dto.PasteDTO;\r\nimport com.example.pastebin.entity.Paste;\r\nimport com.example.pastebin.entity.PasteDetails;\r\nimport com.example.pastebin.entity.User;\r\nimport com.example.pastebin.mappers.PasteMapper;\r\nimport com.example.pastebin.repositories.PasteDetailsRepository;\r\nimport com.example.pastebin.repositories.UserRepository;\r\nimport com.google.api.gax.paging.Page;\r\nimport com.google.cloud.storage.*;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.util.SerializationUtils;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@Service\r\n@Slf4j\r\npublic class PasteService {\r\n    private final Storage storage = StorageOptions.getDefaultInstance().getService();\r\n    private final Bucket bucket = storage.get(&quot;pastebin1&quot;);\r\n\r\n    private final UserRepository userRepository;\r\n    private final PasteDetailsRepository pasteDetailsRepository;\r\n    private final PasteMapper pasteMapper;\r\n\r\n    public PasteService(UserRepository userRepository, PasteDetailsRepository pasteDetailsRepository, PasteMapper pasteMapper) {\r\n        this.userRepository = userRepository;\r\n        this.pasteDetailsRepository = pasteDetailsRepository;\r\n        this.pasteMapper = pasteMapper;\r\n    }\r\n\r\n    public List&lt;PasteDTO&gt; findAll() {\r\n        List&lt;PasteDTO&gt; pastes = new ArrayList&lt;&gt;();\r\n        Page&lt;Blob&gt; blobs = bucket.list();\r\n\r\n        for (Blob blob : blobs.getValues()) {\r\n            byte[] bytes = blob.getContent();\r\n\r\n            if (SerializationUtils.deserialize(bytes) == null) {\r\n                throw new IllegalArgumentException(&quot;The byte[] must not be null&quot;);\r\n            }\r\nerror here -&gt;   pastes.add(pasteMapper.fromPasteToDTO((Paste) SerializationUtils.deserialize(bytes)));\r\n        }\r\n\r\n        return pastes;\r\n    }\r\n\r\n    public void connectUserToPaste(String username, Paste paste) {\r\n        User user = userRepository.findByUsername(username);\r\n\r\n        if (user == null) {\r\n            throw new RuntimeException(&quot;User not found&quot;);\r\n        } else {\r\n            paste.setUser(user);\r\n            user.getPastes().add(paste);\r\n        }\r\n    }\r\n\r\n    public void saveText(PasteDTO pasteDTO, String username) {\r\n        Paste paste = Paste.builder()\r\n                .title(pasteDTO.getTitle())\r\n                .text(pasteDTO.getText())\r\n                .build();\r\n        this.connectUserToPaste(username, paste);\r\n\r\n        BlobId blobId = BlobId.of(&quot;pastebin1&quot;, &quot;paste_&quot; + paste.getId());\r\n        BlobInfo blobInfo = BlobInfo.newBuilder(blobId).setContentType(&quot;text/plain&quot;).build();\r\n        Blob blob = storage.create(blobInfo, SerializationUtils.serialize(paste));\r\n\r\n        PasteDetails pasteDetails = PasteDetails.builder()\r\n                .blobId(blobId)\r\n                .bucket(blob.getBucket())\r\n                .build();\r\n\r\n        pasteDetailsRepository.save(pasteDetails);\r\n\r\n        log.info(&quot;Saving new bin with title : {}&quot;, paste.getTitle());\r\n    }\r\n\r\n    public PasteDTO findPasteByTitle(String title) {\r\n        Page&lt;Blob&gt; blobs = bucket.list();\r\n        for (Blob blob : blobs.getValues()) {\r\n            if (title.equals(blob.getName())) {\r\n                PasteDTO pasteDTO = pasteMapper.fromPasteToDTO((Paste) SerializationUtils.deserialize(blob.getContent()));\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\nAnd Paste Controller:\r\n```\r\npackage com.example.pastebin.controllers;\r\n\r\nimport com.example.pastebin.dto.PasteDTO;\r\nimport com.example.pastebin.mappers.PasteMapper;\r\nimport com.example.pastebin.repositories.PasteDetailsRepository;\r\nimport com.example.pastebin.services.PasteService;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\n\r\nimport java.security.Principal;\r\n\r\n@Controller\r\npublic class PasteController {\r\n    private final PasteService pasteService;\r\n\r\n    public PasteController(PasteService pasteService) {\r\n        this.pasteService = pasteService;\r\n    }\r\n\r\n    @GetMapping(&quot;/add_paste&quot;)\r\n    public String addBinPage() {\r\n        return &quot;home&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/add_paste&quot;)\r\n    public String addBin(PasteDTO pasteDTO, Principal principal) {\r\n        pasteService.saveText(pasteDTO, principal.getName());\r\n        return &quot;redirect:/pastes&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;pastes&quot;)\r\n    public String allPastes(Model model) {\r\n        model.addAttribute(&quot;pastes&quot;, pasteService.findAll());\r\n        return &quot;pastes&quot;;\r\n    }\r\n}\r\n```\r\n\r\nAny help would be appreciated.Thank you.\r\n\r\n","title":"Building a pastebin app and can&#39;t to deserialize objects","body":"<p>Building a Java project(java 19) with spring boot(3.1.3) and gradle(8.2).\nAlso use a Google Cloud Storage and when getting data I want to deserialize data in the object with SerializationUtils,but climbs out this error:</p>\n<pre><code>java.lang.ClassCastException: class com.example.pastebin.entity.Paste cannot be cast to class com.example.pastebin.entity.Paste (com.example.pastebin.entity.Paste is in unnamed module of loader 'app'; com.example.pastebin.entity.Paste is in unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader @6ed949b0)\n    at com.example.pastebin.services.PasteService.findAll(PasteService.java:46) ~[main/:na]\n    at com.example.pastebin.controllers.PasteController.allPastes(PasteController.java:35) ~[main/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.12.jar:6.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:110) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:101) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\n</code></pre>\n<p>build.gradle:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.3'\n    id 'io.spring.dependency-management' version '1.1.3'\n}\n\ngroup = 'org.example'\nversion = '1.0-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-data-redis'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.thymeleaf.extras:thymeleaf-extras-springsecurity6'\n    compileOnly 'org.projectlombok:lombok'\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n    runtimeOnly 'org.postgresql:postgresql'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'org.springframework.security:spring-security-test'\n    implementation 'org.mapstruct:mapstruct:1.5.5.Final'\n    annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.5.Final'\n    implementation 'com.google.cloud:google-cloud-storage:2.26.1'\n    testImplementation platform('org.junit:junit-bom:5.9.1')\n    testImplementation 'org.junit.jupiter:junit-jupiter'\n}\n\ntest {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>Paste Entity:</p>\n<pre><code>package com.example.pastebin.entity;\n\nimport jakarta.persistence.*;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.io.Serial;\nimport java.io.Serializable;\nimport java.time.LocalDateTime;\n\n@Entity\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Paste implements Serializable {\n    @Serial\n    private static final long serialVersionUID = 8591616427310310802L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    @Column(name = &quot;title&quot;, nullable = false)\n    private String title;\n\n    @Column(name = &quot;text&quot;, nullable = false)\n    private String text;\n\n    @Lob\n    private byte[] bytes;\n\n    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    private User user;\n\n    private LocalDateTime dateOfCreated;\n\n    @PrePersist\n    private void init() {\n        this.dateOfCreated = LocalDateTime.now();\n    }\n}\n</code></pre>\n<p>DTO:</p>\n<pre><code>package com.example.pastebin.dto;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class PasteDTO {\n    private String title;\n    private String text;\n    private String author;\n}\n</code></pre>\n<p>Paste Service:</p>\n<pre><code>package com.example.pastebin.services;\n\nimport com.example.pastebin.dto.PasteDTO;\nimport com.example.pastebin.entity.Paste;\nimport com.example.pastebin.entity.PasteDetails;\nimport com.example.pastebin.entity.User;\nimport com.example.pastebin.mappers.PasteMapper;\nimport com.example.pastebin.repositories.PasteDetailsRepository;\nimport com.example.pastebin.repositories.UserRepository;\nimport com.google.api.gax.paging.Page;\nimport com.google.cloud.storage.*;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Service;\nimport org.springframework.util.SerializationUtils;\n\nimport java.io.ByteArrayInputStream;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Service\n@Slf4j\npublic class PasteService {\n    private final Storage storage = StorageOptions.getDefaultInstance().getService();\n    private final Bucket bucket = storage.get(&quot;pastebin1&quot;);\n\n    private final UserRepository userRepository;\n    private final PasteDetailsRepository pasteDetailsRepository;\n    private final PasteMapper pasteMapper;\n\n    public PasteService(UserRepository userRepository, PasteDetailsRepository pasteDetailsRepository, PasteMapper pasteMapper) {\n        this.userRepository = userRepository;\n        this.pasteDetailsRepository = pasteDetailsRepository;\n        this.pasteMapper = pasteMapper;\n    }\n\n    public List&lt;PasteDTO&gt; findAll() {\n        List&lt;PasteDTO&gt; pastes = new ArrayList&lt;&gt;();\n        Page&lt;Blob&gt; blobs = bucket.list();\n\n        for (Blob blob : blobs.getValues()) {\n            byte[] bytes = blob.getContent();\n\n            if (SerializationUtils.deserialize(bytes) == null) {\n                throw new IllegalArgumentException(&quot;The byte[] must not be null&quot;);\n            }\nerror here -&gt;   pastes.add(pasteMapper.fromPasteToDTO((Paste) SerializationUtils.deserialize(bytes)));\n        }\n\n        return pastes;\n    }\n\n    public void connectUserToPaste(String username, Paste paste) {\n        User user = userRepository.findByUsername(username);\n\n        if (user == null) {\n            throw new RuntimeException(&quot;User not found&quot;);\n        } else {\n            paste.setUser(user);\n            user.getPastes().add(paste);\n        }\n    }\n\n    public void saveText(PasteDTO pasteDTO, String username) {\n        Paste paste = Paste.builder()\n                .title(pasteDTO.getTitle())\n                .text(pasteDTO.getText())\n                .build();\n        this.connectUserToPaste(username, paste);\n\n        BlobId blobId = BlobId.of(&quot;pastebin1&quot;, &quot;paste_&quot; + paste.getId());\n        BlobInfo blobInfo = BlobInfo.newBuilder(blobId).setContentType(&quot;text/plain&quot;).build();\n        Blob blob = storage.create(blobInfo, SerializationUtils.serialize(paste));\n\n        PasteDetails pasteDetails = PasteDetails.builder()\n                .blobId(blobId)\n                .bucket(blob.getBucket())\n                .build();\n\n        pasteDetailsRepository.save(pasteDetails);\n\n        log.info(&quot;Saving new bin with title : {}&quot;, paste.getTitle());\n    }\n\n    public PasteDTO findPasteByTitle(String title) {\n        Page&lt;Blob&gt; blobs = bucket.list();\n        for (Blob blob : blobs.getValues()) {\n            if (title.equals(blob.getName())) {\n                PasteDTO pasteDTO = pasteMapper.fromPasteToDTO((Paste) SerializationUtils.deserialize(blob.getContent()));\n            }\n        }\n\n        return null;\n    }\n}\n</code></pre>\n<p>And Paste Controller:</p>\n<pre><code>package com.example.pastebin.controllers;\n\nimport com.example.pastebin.dto.PasteDTO;\nimport com.example.pastebin.mappers.PasteMapper;\nimport com.example.pastebin.repositories.PasteDetailsRepository;\nimport com.example.pastebin.services.PasteService;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\n\nimport java.security.Principal;\n\n@Controller\npublic class PasteController {\n    private final PasteService pasteService;\n\n    public PasteController(PasteService pasteService) {\n        this.pasteService = pasteService;\n    }\n\n    @GetMapping(&quot;/add_paste&quot;)\n    public String addBinPage() {\n        return &quot;home&quot;;\n    }\n\n    @PostMapping(&quot;/add_paste&quot;)\n    public String addBin(PasteDTO pasteDTO, Principal principal) {\n        pasteService.saveText(pasteDTO, principal.getName());\n        return &quot;redirect:/pastes&quot;;\n    }\n\n    @GetMapping(&quot;pastes&quot;)\n    public String allPastes(Model model) {\n        model.addAttribute(&quot;pastes&quot;, pasteService.findAll());\n        return &quot;pastes&quot;;\n    }\n}\n</code></pre>\n<p>Any help would be appreciated.Thank you.</p>\n"},{"tags":["java","selenium","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":18895932,"reputation":3508,"user_id":13785121,"display_name":"Abhinaba Chakraborty"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593495350,"creation_date":1593495350,"answer_id":62650899,"question_id":62650720,"body_markdown":"First, visit your app with Chrome and set camera to always allow.\r\n\r\nSecond, get the [chrome prefs][1] file\r\n\r\nThird, copy the default directory to some path /path/to/defaultconfig\r\n\r\nLastly, add that config path to chrome options before launching the driver:\r\n&quot;user-data-dir=/path/to/defaultconfig&quot;\r\n\r\n\r\n  [1]: http://www.forensicswiki.org/wiki/Google_Chrome#Configuration","title":"How to give access or dismiss to the microphone and camera popup in Chromedriver while running the Selenium test?","body":"<p>First, visit your app with Chrome and set camera to always allow.</p>\n<p>Second, get the <a href=\"http://www.forensicswiki.org/wiki/Google_Chrome#Configuration\" rel=\"nofollow noreferrer\">chrome prefs</a> file</p>\n<p>Third, copy the default directory to some path /path/to/defaultconfig</p>\n<p>Lastly, add that config path to chrome options before launching the driver:\n&quot;user-data-dir=/path/to/defaultconfig&quot;</p>\n"},{"tags":[],"owner":{"account_id":19757287,"reputation":1,"user_id":14467294,"display_name":"Nebisis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695390893,"creation_date":1695390893,"answer_id":77158251,"question_id":62650720,"body_markdown":"    ChromeOptions chromeOptions = new ChromeOptions();\r\n    \r\n    HashMap&lt;String, Integer&gt; preferences = new HashMap&lt;&gt;();\r\n    preferences.put(&quot;profile.default_content_setting_values.media_stream_mic&quot;, 1);    # 1:allow, 2:block \r\n    preferences.put(&quot;profile.default_content_setting_values.media_stream_camera&quot;, 1);    # 1:allow, 2:block \r\n    \r\n    chromeOptions.setExperimentalOption(&quot;prefs&quot;, preferences);\r\n    dvr = new ChromeDriver(chromeOptions);\r\n\r\n","title":"How to give access or dismiss to the microphone and camera popup in Chromedriver while running the Selenium test?","body":"<pre><code>ChromeOptions chromeOptions = new ChromeOptions();\n\nHashMap&lt;String, Integer&gt; preferences = new HashMap&lt;&gt;();\npreferences.put(&quot;profile.default_content_setting_values.media_stream_mic&quot;, 1);    # 1:allow, 2:block \npreferences.put(&quot;profile.default_content_setting_values.media_stream_camera&quot;, 1);    # 1:allow, 2:block \n\nchromeOptions.setExperimentalOption(&quot;prefs&quot;, preferences);\ndvr = new ChromeDriver(chromeOptions);\n</code></pre>\n"}],"owner":{"account_id":2369683,"reputation":3436,"user_id":2074563,"accept_rate":11,"display_name":"Bhupendra Singh Rautela"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":328,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695390893,"creation_date":1593494229,"question_id":62650720,"body_markdown":"I have applied the below ChromeOptions but not working for me. Due to this, I am unable to type on the &quot;Enter Pin&quot; input box on the screen. \r\n\r\n    ChromeOptions chromeOptions = new ChromeOptions();\r\n\tchromeOptions.addArguments(&quot;--disable-user-media-security=true&quot;);\r\n\tdvr = new ChromeDriver(chromeOptions);\r\n\r\n[![enter image description here][1]][1]\r\n\t\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zhK3w.png","title":"How to give access or dismiss to the microphone and camera popup in Chromedriver while running the Selenium test?","body":"<p>I have applied the below ChromeOptions but not working for me. Due to this, I am unable to type on the &quot;Enter Pin&quot; input box on the screen.</p>\n<pre><code>ChromeOptions chromeOptions = new ChromeOptions();\nchromeOptions.addArguments(&quot;--disable-user-media-security=true&quot;);\ndvr = new ChromeDriver(chromeOptions);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zhK3w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zhK3w.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","apache-kafka"],"answers":[{"comments":[{"owner":{"account_id":29509526,"reputation":3,"user_id":22614887,"display_name":"user22614887"},"score":0,"creation_date":1695391075,"post_id":77158247,"comment_id":136022232,"body_markdown":"I see, thank you","body":"I see, thank you"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1695391252,"post_id":77158247,"comment_id":136022269,"body_markdown":"It&#39;s specifically not an exception since the broker can be configured to auto create topics that do not exist yet when a client tries to use one... If you really want to check topic existence, use AdminClient","body":"It&#39;s specifically not an exception since the broker can be configured to auto create topics that do not exist yet when a client tries to use one... If you really want to check topic existence, use AdminClient"},{"owner":{"account_id":29509526,"reputation":3,"user_id":22614887,"display_name":"user22614887"},"score":0,"creation_date":1695391480,"post_id":77158247,"comment_id":136022313,"body_markdown":"Basically i am trying to simulate a network error.\nIn case i lose the connection with the kafka client i need to restart a service rather then continue to send further messages.\nDo you perhaps know of a way to handle that scenario?","body":"Basically i am trying to simulate a network error. In case i lose the connection with the kafka client i need to restart a service rather then continue to send further messages. Do you perhaps know of a way to handle that scenario?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1695392289,"post_id":77158247,"comment_id":136022496,"body_markdown":"In practice, you&#39;d typically have a high replication factor on any topic, spread over different fault domains that would make it highly unlikely for Kafka to be down, but assuming it was, then you&#39;d expect a generic Java network exception, nothing Kafka specific","body":"In practice, you&#39;d typically have a high replication factor on any topic, spread over different fault domains that would make it highly unlikely for Kafka to be down, but assuming it was, then you&#39;d expect a generic Java network exception, nothing Kafka specific"},{"owner":{"account_id":29509526,"reputation":3,"user_id":22614887,"display_name":"user22614887"},"score":0,"creation_date":1695394495,"post_id":77158247,"comment_id":136022956,"body_markdown":"I see, haven&#39;t considered that, will look into it\nthanks again","body":"I see, haven&#39;t considered that, will look into it thanks again"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1695474544,"post_id":77158247,"comment_id":136030941,"body_markdown":"The downside of running Kafka replication across availability zones, however, is increased latency and network costs for that higher client availability","body":"The downside of running Kafka replication across availability zones, however, is increased latency and network costs for that higher client availability"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695390885,"creation_date":1695390885,"answer_id":77158247,"question_id":77158181,"body_markdown":"Check javadoc \r\n\r\n&gt; *InvalidTopicException*\r\n&gt; \r\n&gt; For example the topic name is too long, contains invalid characters etc.\r\n\r\nIf you&#39;re sending a *valid* topic name, this isn&#39;t thrown, and you&#39;ll get that warning log instead, which isn&#39;t an exception that can be caught.\r\n\r\nAlso, there&#39;s no reason to `throw(e)`. Use `instanceof` to check the type of the Exception in the callback ","title":"Why is callback in producer.send method not being executed during failure to send a message?","body":"<p>Check javadoc</p>\n<blockquote>\n<p><em>InvalidTopicException</em></p>\n<p>For example the topic name is too long, contains invalid characters etc.</p>\n</blockquote>\n<p>If you're sending a <em>valid</em> topic name, this isn't thrown, and you'll get that warning log instead, which isn't an exception that can be caught.</p>\n<p>Also, there's no reason to <code>throw(e)</code>. Use <code>instanceof</code> to check the type of the Exception in the callback</p>\n"}],"owner":{"account_id":29509526,"reputation":3,"user_id":22614887,"display_name":"user22614887"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77158247,"answer_count":1,"score":0,"last_activity_date":1695390885,"creation_date":1695390397,"question_id":77158181,"body_markdown":"I am currently sending messages to kafka like so:\r\n\r\n```\r\ntry {\r\n\tproducer.send(record, new Callback() {\r\n\t\tpublic void onCompletion(RecordMetadata metadata, Exception e) {\r\n\t\t\tSystem.out.println(metadata);\r\n\t\t\tSystem.out.println(e);\r\n\t\t\tif (e != null)\r\n\t\t\t{\r\n\t\t\t\tSystem.out.println(e);\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow(e);\r\n\t\t\t\t} catch (InvalidTopicException er) {\r\n\t\t\t\t\tlogger.error(&quot;Unrecoverable error: &quot;, er);\r\n\t\t\t\t\tSystem.exit(-1);\r\n\t\t\t\t} //...otherfatalexceptions...\r\n\t\t\t\tcatch (UnknownServerException er) {\r\n\t\t\t\t\tlogger.error(&quot;Unrecoverable error: &quot;, er);\r\n\t\t\t\t\tSystem.exit(-1);\r\n\t\t\t\t}catch (Exception er) {\r\n\t\t\t\t\tlogger.error(&quot;Failed to send message to topic:&quot; + topic, er);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t});\r\n}catch (Exception e) {\r\n\tlogger.error(&quot;Failed to send message to topic:&quot; + topic, e);\r\n}\r\n```\r\n\r\ni am using producer.send and not waiting for the record metadata to be returned before sending the next record in a queue since it would take to long.\r\nInstead i am using `onCallback` method to handle that data.\r\n\r\nThe idea behind the code is to terminate the program in case i get an unrecoverable error.\r\n\r\nProducer is being initialized like so:\r\n\r\n```\r\nproducer = new KafkaProducer&lt;String, String&gt;(properties);\r\n```\r\nwith following properties\r\n\r\n```\r\nProperties mainKafkaProperties = new Properties();\r\nmainKafkaProperties.put(&quot;bootstrap.servers&quot;, kafkaUrl);\r\nmainKafkaProperties.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\nmainKafkaProperties.put(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\nmainKafkaProperties.put(&quot;acks&quot;, &quot;all&quot;);\r\n```\r\n\r\n\r\n\r\n\r\n\r\nWhen messages are being sent properly, System.out.println(metadata); line is properly printing metadata showing that messages are being sent properly,\r\nbut when i delete the topic to simulate the `InvalidTopicException` instead of executing the code in the catch method i only get the following warning:\r\n`[kafka-producer-network-thread | producer-1] WARN org.apache.kafka.clients.NetworkClient - [Producer clientId=producer-1] Error while fetching metadata with correlation id 97 : {em_om_messages_local=UNKNOWN_TOPIC_OR_PARTITION}`\r\n\r\nKafka library used is: org.apache.kafka.clients\r\nI am running the program on eclipse debugger\r\n\r\nI am getting the same error regardless how many partitions the topic has\r\nJava version 17.0.6+10\r\nSpring is not used","title":"Why is callback in producer.send method not being executed during failure to send a message?","body":"<p>I am currently sending messages to kafka like so:</p>\n<pre><code>try {\n    producer.send(record, new Callback() {\n        public void onCompletion(RecordMetadata metadata, Exception e) {\n            System.out.println(metadata);\n            System.out.println(e);\n            if (e != null)\n            {\n                System.out.println(e);\n                try\n                {\n                    throw(e);\n                } catch (InvalidTopicException er) {\n                    logger.error(&quot;Unrecoverable error: &quot;, er);\n                    System.exit(-1);\n                } //...otherfatalexceptions...\n                catch (UnknownServerException er) {\n                    logger.error(&quot;Unrecoverable error: &quot;, er);\n                    System.exit(-1);\n                }catch (Exception er) {\n                    logger.error(&quot;Failed to send message to topic:&quot; + topic, er);\n                }\n            }\n        }\n        });\n}catch (Exception e) {\n    logger.error(&quot;Failed to send message to topic:&quot; + topic, e);\n}\n</code></pre>\n<p>i am using producer.send and not waiting for the record metadata to be returned before sending the next record in a queue since it would take to long.\nInstead i am using <code>onCallback</code> method to handle that data.</p>\n<p>The idea behind the code is to terminate the program in case i get an unrecoverable error.</p>\n<p>Producer is being initialized like so:</p>\n<pre><code>producer = new KafkaProducer&lt;String, String&gt;(properties);\n</code></pre>\n<p>with following properties</p>\n<pre><code>Properties mainKafkaProperties = new Properties();\nmainKafkaProperties.put(&quot;bootstrap.servers&quot;, kafkaUrl);\nmainKafkaProperties.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\nmainKafkaProperties.put(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\nmainKafkaProperties.put(&quot;acks&quot;, &quot;all&quot;);\n</code></pre>\n<p>When messages are being sent properly, System.out.println(metadata); line is properly printing metadata showing that messages are being sent properly,\nbut when i delete the topic to simulate the <code>InvalidTopicException</code> instead of executing the code in the catch method i only get the following warning:\n<code>[kafka-producer-network-thread | producer-1] WARN org.apache.kafka.clients.NetworkClient - [Producer clientId=producer-1] Error while fetching metadata with correlation id 97 : {em_om_messages_local=UNKNOWN_TOPIC_OR_PARTITION}</code></p>\n<p>Kafka library used is: org.apache.kafka.clients\nI am running the program on eclipse debugger</p>\n<p>I am getting the same error regardless how many partitions the topic has\nJava version 17.0.6+10\nSpring is not used</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":2,"creation_date":1486533413,"post_id":42105711,"comment_id":71380707,"body_markdown":"This is too abstract and vague.  Show us the class definitions of `Parent` and `Child` and explain what `parentType` is.  The question is not answerable in its present state.","body":"This is too abstract and vague.  Show us the class definitions of <code>Parent</code> and <code>Child</code> and explain what <code>parentType</code> is.  The question is not answerable in its present state."},{"owner":{"account_id":3189466,"reputation":22172,"user_id":2694184,"accept_rate":48,"display_name":"Gibbs"},"score":0,"creation_date":1486533449,"post_id":42105711,"comment_id":71380726,"body_markdown":"@JimGarrison I am editing. Please wait.","body":"@JimGarrison I am editing. Please wait."},{"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1486533467,"post_id":42105711,"comment_id":71380733,"body_markdown":"If each parent/child combination will be handled by separate logic, then what you have isn&#39;t bad at all IMO.  If so, there is no avoiding specifying such logic.","body":"If each parent/child combination will be handled by separate logic, then what you have isn&#39;t bad at all IMO.  If so, there is no avoiding specifying such logic."},{"owner":{"account_id":3189466,"reputation":22172,"user_id":2694184,"accept_rate":48,"display_name":"Gibbs"},"score":0,"creation_date":1486533712,"post_id":42105711,"comment_id":71380811,"body_markdown":"@JimGarrison Please see my edit and let me know if it is still unclear.","body":"@JimGarrison Please see my edit and let me know if it is still unclear."},{"owner":{"account_id":3189466,"reputation":22172,"user_id":2694184,"accept_rate":48,"display_name":"Gibbs"},"score":0,"creation_date":1486533761,"post_id":42105711,"comment_id":71380838,"body_markdown":"@TimBiegeleisen Yes. For each parent and it&#39;s children logic is separare. But if children is C, then C logic is same for all parent who has C as children.","body":"@TimBiegeleisen Yes. For each parent and it&#39;s children logic is separare. But if children is C, then C logic is same for all parent who has C as children."},{"owner":{"account_id":4465009,"reputation":1505,"user_id":3632894,"accept_rate":50,"display_name":"user1211"},"score":0,"creation_date":1486534130,"post_id":42105711,"comment_id":71380961,"body_markdown":"Use factory pattern","body":"Use factory pattern"},{"owner":{"account_id":236561,"reputation":5234,"user_id":504133,"accept_rate":76,"display_name":"nits.kk"},"score":0,"creation_date":1486558022,"post_id":42105711,"comment_id":71395670,"body_markdown":"@Gops AB : if else or switch statements are ok for situations where we know that the number of cases are fixed and the code for handling each case is also more or less same, swich is better than if else due to improved readability. But both of these should be avoided in case we see that number of cases would be added in future or code to handle cases needs to change, in such cases we have to modify classes just to add new case and to modify any one of the case handling. In such cases abstraction should be used, refer my answer below for more. http://stackoverflow.com/a/42106953/504133","body":"@Gops AB : if else or switch statements are ok for situations where we know that the number of cases are fixed and the code for handling each case is also more or less same, swich is better than if else due to improved readability. But both of these should be avoided in case we see that number of cases would be added in future or code to handle cases needs to change, in such cases we have to modify classes just to add new case and to modify any one of the case handling. In such cases abstraction should be used, refer my answer below for more. <a href=\"http://stackoverflow.com/a/42106953/504133\">stackoverflow.com/a/42106953/504133</a>"},{"owner":{"account_id":236561,"reputation":5234,"user_id":504133,"accept_rate":76,"display_name":"nits.kk"},"score":0,"creation_date":1486558052,"post_id":42105711,"comment_id":71395687,"body_markdown":"Hope it will be helpful and if so you may wish to upvote or mark the answer as acceted","body":"Hope it will be helpful and if so you may wish to upvote or mark the answer as acceted"}],"answers":[{"tags":[],"owner":{"account_id":236561,"reputation":5234,"user_id":504133,"accept_rate":76,"display_name":"nits.kk"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1486538349,"creation_date":1486538349,"answer_id":42106953,"question_id":42105711,"body_markdown":"As a guide `switch` is better than `if-else` statements as it is more readable.  \r\n\r\nAxis of change should be identified and both of these (if else and switch)  should be avoided if we find during initial requirement analysis or later with requirement changes  coming that there are new cases being added. \r\n\r\nIn such a case we need to respect `open close principle`. Swich case statements are not only bad as ocp is voilated but also is prone to errors, if we miss to add a new case at some place then issues may occur. \r\n\r\nIn such a scenario the cases must be handled through abstraction ( try to protect yourself from changes by abstrating what can change). \r\n\r\nYou can define a (abstract) parent class for such cases and each case can be mapped to a separate sub class.\r\nSuppose we had a case x : // contents;. Contents can be put in the implementation of the abstract method which we can have in the parent class. In case we have a new case added we can easily define a new class and provide the implementation. The client code should be dependent only upon abstract parent class amd concrete classes can be injected during run time.","title":"case statements with switch - case or if-else - best design?","body":"<p>As a guide <code>switch</code> is better than <code>if-else</code> statements as it is more readable.  </p>\n\n<p>Axis of change should be identified and both of these (if else and switch)  should be avoided if we find during initial requirement analysis or later with requirement changes  coming that there are new cases being added. </p>\n\n<p>In such a case we need to respect <code>open close principle</code>. Swich case statements are not only bad as ocp is voilated but also is prone to errors, if we miss to add a new case at some place then issues may occur. </p>\n\n<p>In such a scenario the cases must be handled through abstraction ( try to protect yourself from changes by abstrating what can change). </p>\n\n<p>You can define a (abstract) parent class for such cases and each case can be mapped to a separate sub class.\nSuppose we had a case x : // contents;. Contents can be put in the implementation of the abstract method which we can have in the parent class. In case we have a new case added we can easily define a new class and provide the implementation. The client code should be dependent only upon abstract parent class amd concrete classes can be injected during run time.</p>\n"},{"tags":[],"owner":{"display_name":"user22614691"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695387271,"creation_date":1695387172,"answer_id":77157783,"question_id":42105711,"body_markdown":"Following is just about using `switch` or using `if else` since there are object oriented alternatives addressing more suitable extensibility and maintainability than `switch` and `if else` statements.\r\n\r\nTalking about wide solution space complexity wise `switch` statement has an improved complexity than `if else` statements. Summary of technical details is that `switch` statement relies on an indexed solutions space (a jump table with `case` values being indexes) instead of traveling all branches until the matching one. For a narrow solutions space `if else` complexity is better.\r\n\r\nReadability wise the `if else` statement has an improved readability since the statement is placed at the beginning of the code block to run while with `switch` statement each `case` must have a start and a close statement (`case` and `break`) that could be interlaced (multiple `case` statements having one `break` statement) making cumbersome to follow the code block to run from its opening to its close.\r\n\r\nThe best design between the two is a choice between performance (that varies with the solutions space dimension) and readability. Are there enough values to make use of `switch` statement benefits? Or is a facile read preferred regardless of the performance improvements?","title":"case statements with switch - case or if-else - best design?","body":"<p>Following is just about using <code>switch</code> or using <code>if else</code> since there are object oriented alternatives addressing more suitable extensibility and maintainability than <code>switch</code> and <code>if else</code> statements.</p>\n<p>Talking about wide solution space complexity wise <code>switch</code> statement has an improved complexity than <code>if else</code> statements. Summary of technical details is that <code>switch</code> statement relies on an indexed solutions space (a jump table with <code>case</code> values being indexes) instead of traveling all branches until the matching one. For a narrow solutions space <code>if else</code> complexity is better.</p>\n<p>Readability wise the <code>if else</code> statement has an improved readability since the statement is placed at the beginning of the code block to run while with <code>switch</code> statement each <code>case</code> must have a start and a close statement (<code>case</code> and <code>break</code>) that could be interlaced (multiple <code>case</code> statements having one <code>break</code> statement) making cumbersome to follow the code block to run from its opening to its close.</p>\n<p>The best design between the two is a choice between performance (that varies with the solutions space dimension) and readability. Are there enough values to make use of <code>switch</code> statement benefits? Or is a facile read preferred regardless of the performance improvements?</p>\n"},{"tags":[],"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695390383,"creation_date":1695390383,"answer_id":77158179,"question_id":42105711,"body_markdown":"Rather than thinking about which is best, think about what&#39;s more readable to other maintainers: a `switch` is generally fine as is, but it is harder to read when there are variables from outer scope (eg: before the `switch`) used in each branches especially when the code is old and variables are not typed (eg: Object + cast each time we want to use said variables, making it especially unreadable and hard to fllow).\r\n\r\nYou can always declare variables inside a `switch` but it less readable (in my opinion) than when done in an `if`:\r\n\r\n    switch (...) {\r\n      case &#39;...&#39;: {\r\n        var n = ...;\r\n      }\r\n    }\r\n\r\nVersus:\r\n\r\n    if (...) {\r\n      var n = ...;\r\n    }\r\n\r\n\r\nIf you want to use a `switch`:\r\n\r\n- use methods when possible: the smaller the `switch` block, the easier it will be to read it. Same apply to `if`.\r\n- Use `enum` for your `ParentType` because the compiler **can** help you: if the `switch` does not have a `default` case, the compiler will issue an error. You won&#39;t get that with `String` and `int` even if you can have the compiler fails for `switch` without `default`.\r\n- [Try `switch` evolution available in Java 17][1]: this is similar to using methods; I can&#39;t say something good or bad because I rarely used them (I would have to be in Java 17 for that).\r\n- You could also try to not use `switch`: if your `parents` are a finite set, then you could try using enums or a couple of class with one interface. \r\n\r\n    enum ParentType {\r\n      TYPE1 {\r\n        public void doSomething(Context ctx) {\r\n          if(ctx.partent1.contains(ctx.childType1)) {\r\n            // ...\r\n          }\r\n        }\r\n      },;\r\n    \r\n      public abstract void doSomething(Context ctx);\r\n    }\r\n\r\n    record Context(Object parten1, Object childType1) {}\r\n\r\nAnd use it:\r\n\r\n    Map&lt;String, String&gt; children = parentDataHolder.getParent(parentType).getChildren();\r\n    parentType.doSomething(new Context(parten1, childType1));\r\n\r\nThe main points are:\r\n\r\n1. enumerate are finite: you are sure your switch handle all &quot;parent type&quot;; all that remains is a possible `null` check if there are case where it can be logically `null`.\r\n2. use an class to hold variables. You may already have that if you are inside a `class` with attributes: I simply used a `record` here which is available in Java 17.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/language/switch-expressions.html#GUID-BA4F63E3-4823-43C6-A5F3-BAA4A2EF3ADC","title":"case statements with switch - case or if-else - best design?","body":"<p>Rather than thinking about which is best, think about what's more readable to other maintainers: a <code>switch</code> is generally fine as is, but it is harder to read when there are variables from outer scope (eg: before the <code>switch</code>) used in each branches especially when the code is old and variables are not typed (eg: Object + cast each time we want to use said variables, making it especially unreadable and hard to fllow).</p>\n<p>You can always declare variables inside a <code>switch</code> but it less readable (in my opinion) than when done in an <code>if</code>:</p>\n<pre><code>switch (...) {\n  case '...': {\n    var n = ...;\n  }\n}\n</code></pre>\n<p>Versus:</p>\n<pre><code>if (...) {\n  var n = ...;\n}\n</code></pre>\n<p>If you want to use a <code>switch</code>:</p>\n<ul>\n<li><p>use methods when possible: the smaller the <code>switch</code> block, the easier it will be to read it. Same apply to <code>if</code>.</p>\n</li>\n<li><p>Use <code>enum</code> for your <code>ParentType</code> because the compiler <strong>can</strong> help you: if the <code>switch</code> does not have a <code>default</code> case, the compiler will issue an error. You won't get that with <code>String</code> and <code>int</code> even if you can have the compiler fails for <code>switch</code> without <code>default</code>.</p>\n</li>\n<li><p><a href=\"https://docs.oracle.com/en/java/javase/17/language/switch-expressions.html#GUID-BA4F63E3-4823-43C6-A5F3-BAA4A2EF3ADC\" rel=\"nofollow noreferrer\">Try <code>switch</code> evolution available in Java 17</a>: this is similar to using methods; I can't say something good or bad because I rarely used them (I would have to be in Java 17 for that).</p>\n</li>\n<li><p>You could also try to not use <code>switch</code>: if your <code>parents</code> are a finite set, then you could try using enums or a couple of class with one interface.</p>\n<p>enum ParentType {\nTYPE1 {\npublic void doSomething(Context ctx) {\nif(ctx.partent1.contains(ctx.childType1)) {\n// ...\n}\n}\n},;</p>\n<pre><code>public abstract void doSomething(Context ctx);\n</code></pre>\n<p>}</p>\n<p>record Context(Object parten1, Object childType1) {}</p>\n</li>\n</ul>\n<p>And use it:</p>\n<pre><code>Map&lt;String, String&gt; children = parentDataHolder.getParent(parentType).getChildren();\nparentType.doSomething(new Context(parten1, childType1));\n</code></pre>\n<p>The main points are:</p>\n<ol>\n<li>enumerate are finite: you are sure your switch handle all &quot;parent type&quot;; all that remains is a possible <code>null</code> check if there are case where it can be logically <code>null</code>.</li>\n<li>use an class to hold variables. You may already have that if you are inside a <code>class</code> with attributes: I simply used a <code>record</code> here which is available in Java 17.</li>\n</ol>\n"}],"owner":{"account_id":3189466,"reputation":22172,"user_id":2694184,"accept_rate":48,"display_name":"Gibbs"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1695390383,"creation_date":1486533261,"question_id":42105711,"body_markdown":"I am trying to explain my design problem with an example.\r\n\r\nAssume I have 5 parents [1,2,3,4,5]. Each parent has n children. children is like [a,b,c,d,e,f].\r\n\r\nI am trying to write something\r\n\r\n\r\n     Map&lt;String, String&gt; children = parentDataHolder.getParent(parentType).getChildren();\r\n     switch(parentType){\r\n          case 1:\r\n              if(partent1.contains(childType1)){\r\n              }\r\n              //Similarly for all child types\r\n          case 2:\r\n          case 3:\r\n             .......\r\n     }\r\n\r\nHere, Parent types are fixed. Child types are dynamic. I am getting in a map. For each map, I have to check whether child is present. If so, I have to take action according to child type.\r\n\r\nWhich design would be better? Above design doesn&#39;t look good for me.\r\n\r\nAny ideas?\r\n\r\n**EDIT:**\r\n\r\nparentHolder is an object which has methods to get parent type and children types.\r\neg:\r\n\r\n     {\r\n         parentType: &#39;1&#39;,\r\n         children:{\r\n           &quot;a&quot;:&quot;fileOne.xml&quot;,\r\n           &quot;c&quot; : &quot;fileTwo.gz&quot;\r\n         }\r\n      }\r\n\r\nOnce I received this json, I am storing the children values in a `Map` and then I am getting the parentType and passing to switch condition.\r\n\r\nInside switch cases, I have to apply logic for children. The above example has two children. In some other cases, parentType 1 will have a,b,c as children. So It should be generic. ","title":"case statements with switch - case or if-else - best design?","body":"<p>I am trying to explain my design problem with an example.</p>\n\n<p>Assume I have 5 parents [1,2,3,4,5]. Each parent has n children. children is like [a,b,c,d,e,f].</p>\n\n<p>I am trying to write something</p>\n\n<pre><code> Map&lt;String, String&gt; children = parentDataHolder.getParent(parentType).getChildren();\n switch(parentType){\n      case 1:\n          if(partent1.contains(childType1)){\n          }\n          //Similarly for all child types\n      case 2:\n      case 3:\n         .......\n }\n</code></pre>\n\n<p>Here, Parent types are fixed. Child types are dynamic. I am getting in a map. For each map, I have to check whether child is present. If so, I have to take action according to child type.</p>\n\n<p>Which design would be better? Above design doesn't look good for me.</p>\n\n<p>Any ideas?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>parentHolder is an object which has methods to get parent type and children types.\neg:</p>\n\n<pre><code> {\n     parentType: '1',\n     children:{\n       \"a\":\"fileOne.xml\",\n       \"c\" : \"fileTwo.gz\"\n     }\n  }\n</code></pre>\n\n<p>Once I received this json, I am storing the children values in a <code>Map</code> and then I am getting the parentType and passing to switch condition.</p>\n\n<p>Inside switch cases, I have to apply logic for children. The above example has two children. In some other cases, parentType 1 will have a,b,c as children. So It should be generic. </p>\n"},{"tags":["java","xss","owasp"],"answers":[{"tags":[],"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1605692325,"creation_date":1605692325,"answer_id":64890480,"question_id":64884575,"body_markdown":"&gt; So when my input is &lt;a&gt;test&lt;/a&gt;, I expect it will return me the same result, cause I am allowing &quot;a&quot; tag. However, it returns &quot;test&quot; only.\r\n\r\nSome elements are disallowed by default if they do not have attributes provided. Just add the following clause to the policy builder:\r\n\r\n```java\r\n.allowWithoutAttributes(&quot;a&quot;)\r\n```\r\n\r\nIt would remove the `a` element from the internal `HtmlPolicyBuilder.skipIfEmpty` instance set that skips `a`, `font`, `img`, `input`, and `span` by default (see `HtmlPolicyBuilder.DEFAULT_SKIP_IF_EMPTY`).\r\n","title":"OWASP sanitizer generates unexpected results","body":"<blockquote>\n<p>So when my input is test, I expect it will return me the same result, cause I am allowing &quot;a&quot; tag. However, it returns &quot;test&quot; only.</p>\n</blockquote>\n<p>Some elements are disallowed by default if they do not have attributes provided. Just add the following clause to the policy builder:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.allowWithoutAttributes(&quot;a&quot;)\n</code></pre>\n<p>It would remove the <code>a</code> element from the internal <code>HtmlPolicyBuilder.skipIfEmpty</code> instance set that skips <code>a</code>, <code>font</code>, <code>img</code>, <code>input</code>, and <code>span</code> by default (see <code>HtmlPolicyBuilder.DEFAULT_SKIP_IF_EMPTY</code>).</p>\n"}],"owner":{"account_id":3546793,"reputation":1587,"user_id":2962555,"accept_rate":44,"display_name":"Laodao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":749,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":64890480,"answer_count":1,"score":0,"last_activity_date":1695390378,"creation_date":1605653783,"question_id":64884575,"body_markdown":"I am using OWASP sanitizer to do some clean for the input data. Below is the Policy I used \r\n\r\n                 return new HtmlPolicyBuilder()\r\n                        .allowElements(&quot;a&quot;, &quot;label&quot;, &quot;h1&quot;, &quot;h2&quot;, &quot;h3&quot;, &quot;h4&quot;, &quot;h5&quot;, &quot;h6&quot;,\r\n                                &quot;p&quot;, &quot;i&quot;, &quot;b&quot;, &quot;u&quot;, &quot;strong&quot;, &quot;em&quot;, &quot;small&quot;, &quot;big&quot;, &quot;pre&quot;, &quot;code&quot;,\r\n                                &quot;cite&quot;, &quot;samp&quot;, &quot;sub&quot;, &quot;sup&quot;, &quot;strike&quot;, &quot;center&quot;, &quot;blockquote&quot;,\r\n                                &quot;hr&quot;, &quot;br&quot;, &quot;col&quot;, &quot;font&quot;, &quot;span&quot;, &quot;div&quot;, &quot;img&quot;,\r\n                                &quot;ul&quot;, &quot;ol&quot;, &quot;li&quot;, &quot;dd&quot;, &quot;dt&quot;, &quot;dl&quot;, &quot;tbody&quot;, &quot;thead&quot;, &quot;tfoot&quot;,\r\n                                &quot;table&quot;, &quot;td&quot;, &quot;th&quot;, &quot;tr&quot;, &quot;colgroup&quot;, &quot;fieldset&quot;, &quot;legend&quot;)\r\n                        .allowAttributes(&quot;src&quot;, &quot;alt&quot;, &quot;align&quot;, &quot;title&quot;, &quot;hspace&quot;, &quot;vspace&quot;).onElements(&quot;img&quot;)\r\n                        .allowAttributes(&quot;href&quot;, &quot;target&quot;).onElements(&quot;a&quot;)\r\n                        .allowAttributes(&quot;border&quot;, &quot;cellpadding&quot;, &quot;cellspacing&quot;, &quot;style&quot;, &quot;class&quot;).onElements(&quot;table&quot;)\r\n                        .allowAttributes(&quot;colspan&quot;, &quot;rowspan&quot;, &quot;style&quot;, &quot;class&quot;, &quot;align&quot;, &quot;valign&quot;).onElements(&quot;td&quot;)\r\n                        .allowAttributes(&quot;border&quot;, &quot;height&quot;, &quot;width&quot;).globally()\r\n                        .allowStandardUrlProtocols()\r\n                        .requireRelNofollowOnLinks()\r\n                        .allowStyling()\r\n                        .toFactory();\r\n\r\n\r\nSo when my input is `&lt;a&gt;test&lt;/a&gt;`, I expect it will return me the same result, cause I am allowing &quot;a&quot; tag. However, it returns &quot;test&quot; only. Here is my gradle \r\n\r\ncompile group: &#39;com.googlecode.owasp-java-html-sanitizer&#39;, name: &#39;owasp-java-html-sanitizer&#39;, version: &#39;20191001.1&#39;\r\n\r\nI also tried disallowAttributes(&quot;script&quot;). It didn&#39;t work either. Any ideas? Thanks.\r\n\r\n","title":"OWASP sanitizer generates unexpected results","body":"<p>I am using OWASP sanitizer to do some clean for the input data. Below is the Policy I used</p>\n<pre><code>             return new HtmlPolicyBuilder()\n                    .allowElements(&quot;a&quot;, &quot;label&quot;, &quot;h1&quot;, &quot;h2&quot;, &quot;h3&quot;, &quot;h4&quot;, &quot;h5&quot;, &quot;h6&quot;,\n                            &quot;p&quot;, &quot;i&quot;, &quot;b&quot;, &quot;u&quot;, &quot;strong&quot;, &quot;em&quot;, &quot;small&quot;, &quot;big&quot;, &quot;pre&quot;, &quot;code&quot;,\n                            &quot;cite&quot;, &quot;samp&quot;, &quot;sub&quot;, &quot;sup&quot;, &quot;strike&quot;, &quot;center&quot;, &quot;blockquote&quot;,\n                            &quot;hr&quot;, &quot;br&quot;, &quot;col&quot;, &quot;font&quot;, &quot;span&quot;, &quot;div&quot;, &quot;img&quot;,\n                            &quot;ul&quot;, &quot;ol&quot;, &quot;li&quot;, &quot;dd&quot;, &quot;dt&quot;, &quot;dl&quot;, &quot;tbody&quot;, &quot;thead&quot;, &quot;tfoot&quot;,\n                            &quot;table&quot;, &quot;td&quot;, &quot;th&quot;, &quot;tr&quot;, &quot;colgroup&quot;, &quot;fieldset&quot;, &quot;legend&quot;)\n                    .allowAttributes(&quot;src&quot;, &quot;alt&quot;, &quot;align&quot;, &quot;title&quot;, &quot;hspace&quot;, &quot;vspace&quot;).onElements(&quot;img&quot;)\n                    .allowAttributes(&quot;href&quot;, &quot;target&quot;).onElements(&quot;a&quot;)\n                    .allowAttributes(&quot;border&quot;, &quot;cellpadding&quot;, &quot;cellspacing&quot;, &quot;style&quot;, &quot;class&quot;).onElements(&quot;table&quot;)\n                    .allowAttributes(&quot;colspan&quot;, &quot;rowspan&quot;, &quot;style&quot;, &quot;class&quot;, &quot;align&quot;, &quot;valign&quot;).onElements(&quot;td&quot;)\n                    .allowAttributes(&quot;border&quot;, &quot;height&quot;, &quot;width&quot;).globally()\n                    .allowStandardUrlProtocols()\n                    .requireRelNofollowOnLinks()\n                    .allowStyling()\n                    .toFactory();\n</code></pre>\n<p>So when my input is <code>&lt;a&gt;test&lt;/a&gt;</code>, I expect it will return me the same result, cause I am allowing &quot;a&quot; tag. However, it returns &quot;test&quot; only. Here is my gradle</p>\n<p>compile group: 'com.googlecode.owasp-java-html-sanitizer', name: 'owasp-java-html-sanitizer', version: '20191001.1'</p>\n<p>I also tried disallowAttributes(&quot;script&quot;). It didn't work either. Any ideas? Thanks.</p>\n"},{"tags":["java","maven","maven-2","pom.xml","artifactory"],"answers":[{"tags":[],"owner":{"account_id":2671839,"reputation":5341,"user_id":2309068,"display_name":"Clement Amarnath"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1462770665,"creation_date":1462770665,"answer_id":37108092,"question_id":37107859,"body_markdown":"Use mvn deploy to republish/deploy your artifacts into remote repository.\r\n\r\nEnsure that you are pointing the deploy directory to the remote repository in your master pom.\r\n\r\nIf you want to specifically upload a file, use the following command\r\n\r\n    mvn deploy:deploy-file -DpomFile=your pom -Dfile=the jar you want to upload\r\n     -Durl=Url of the repository where the artifact need to be uploaded \r\n     -DrepositoryId=repository ID\r\n\r\nReferences: \r\n\r\nhttps://maven.apache.org/plugins/maven-deploy-plugin/usage.html\r\n\r\nhttps://maven.apache.org/guides/mini/guide-3rd-party-jars-remote.html \r\n\r\nhttp://maven.apache.org/plugins/maven-deploy-plugin/examples/deploy-ssh-external.html \r\n\r\nhttps://docs.oracle.com/middleware/1212/core/MAVEN/config_maven.htm#MAVEN314 \r\n\r\n\r\n\r\n\r\n\r\n  ","title":"how to publishing local .m2 repository all artifacts to jfrog repository","body":"<p>Use mvn deploy to republish/deploy your artifacts into remote repository.</p>\n\n<p>Ensure that you are pointing the deploy directory to the remote repository in your master pom.</p>\n\n<p>If you want to specifically upload a file, use the following command</p>\n\n<pre><code>mvn deploy:deploy-file -DpomFile=your pom -Dfile=the jar you want to upload\n -Durl=Url of the repository where the artifact need to be uploaded \n -DrepositoryId=repository ID\n</code></pre>\n\n<p>References: </p>\n\n<p><a href=\"https://maven.apache.org/plugins/maven-deploy-plugin/usage.html\" rel=\"nofollow\">https://maven.apache.org/plugins/maven-deploy-plugin/usage.html</a></p>\n\n<p><a href=\"https://maven.apache.org/guides/mini/guide-3rd-party-jars-remote.html\" rel=\"nofollow\">https://maven.apache.org/guides/mini/guide-3rd-party-jars-remote.html</a> </p>\n\n<p><a href=\"http://maven.apache.org/plugins/maven-deploy-plugin/examples/deploy-ssh-external.html\" rel=\"nofollow\">http://maven.apache.org/plugins/maven-deploy-plugin/examples/deploy-ssh-external.html</a> </p>\n\n<p><a href=\"https://docs.oracle.com/middleware/1212/core/MAVEN/config_maven.htm#MAVEN314\" rel=\"nofollow\">https://docs.oracle.com/middleware/1212/core/MAVEN/config_maven.htm#MAVEN314</a> </p>\n"},{"tags":[],"owner":{"account_id":1106320,"reputation":20178,"user_id":1097634,"display_name":"Dror Bereznitsky"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1462806844,"creation_date":1462806844,"answer_id":37119357,"question_id":37107859,"body_markdown":"Based on your comment that those artifacts are missing from a [remote repository][1], there are 2 possible options:\r\n\r\n 1. [Importing][2] the repository content from the local .m2 directory. Artifactory support the option of importing content from a directory on the server or an archive. It is possible to import files into remote repository caches.\r\n 2. Re-downloading the artifacts from the remote repository in order to repopulate the cache. This can be done by running a build which has those artifacts as dependencies.\r\n\r\n\r\n  [1]: https://www.jfrog.com/confluence/display/RTF/Remote+Repositories\r\n  [2]: https://www.jfrog.com/confluence/display/RTF/Importing+and+Exporting#ImportingandExporting-Import","title":"how to publishing local .m2 repository all artifacts to jfrog repository","body":"<p>Based on your comment that those artifacts are missing from a <a href=\"https://www.jfrog.com/confluence/display/RTF/Remote+Repositories\" rel=\"nofollow\">remote repository</a>, there are 2 possible options:</p>\n\n<ol>\n<li><a href=\"https://www.jfrog.com/confluence/display/RTF/Importing+and+Exporting#ImportingandExporting-Import\" rel=\"nofollow\">Importing</a> the repository content from the local .m2 directory. Artifactory support the option of importing content from a directory on the server or an archive. It is possible to import files into remote repository caches.</li>\n<li>Re-downloading the artifacts from the remote repository in order to repopulate the cache. This can be done by running a build which has those artifacts as dependencies.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":20375424,"reputation":517,"user_id":14946729,"display_name":"grigouille"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695389958,"creation_date":1695389958,"answer_id":77158119,"question_id":37107859,"body_markdown":"- Package your directory into an archive (tar) file.\r\n- click &quot;Deploy&quot; and select your archive\r\n- checkboxes will appear : check &quot;Deploy as Bundle Artifact&quot;\r\n- fix the &quot;target path&quot; to your need\r\n- validate and you&#39;re done","title":"how to publishing local .m2 repository all artifacts to jfrog repository","body":"<ul>\n<li>Package your directory into an archive (tar) file.</li>\n<li>click &quot;Deploy&quot; and select your archive</li>\n<li>checkboxes will appear : check &quot;Deploy as Bundle Artifact&quot;</li>\n<li>fix the &quot;target path&quot; to your need</li>\n<li>validate and you're done</li>\n</ul>\n"}],"owner":{"account_id":6107344,"reputation":171,"user_id":4764734,"accept_rate":14,"display_name":"nikned"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2750,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":3,"score":3,"last_activity_date":1695389958,"creation_date":1462769008,"question_id":37107859,"body_markdown":"I upgraded JFrog Artifactory to the latest version, and after upgrade I see some artifacts are missing, and also pom files, I still have them in local .m2 directory. Is there a way I can republish/deploy  all these artifacts to a remote Artifactory repository at once ? \r\n","title":"how to publishing local .m2 repository all artifacts to jfrog repository","body":"<p>I upgraded JFrog Artifactory to the latest version, and after upgrade I see some artifacts are missing, and also pom files, I still have them in local .m2 directory. Is there a way I can republish/deploy  all these artifacts to a remote Artifactory repository at once ? </p>\n"},{"tags":["java","arrays","string","printing"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":5,"creation_date":1695145014,"post_id":77136756,"comment_id":135983822,"body_markdown":"The error message states that `tokenize` expects a `String` argument, not a `String[]`.","body":"The error message states that <code>tokenize</code> expects a <code>String</code> argument, not a <code>String[]</code>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":2,"creation_date":1695145101,"post_id":77136756,"comment_id":135983837,"body_markdown":"It isn&#39;t. The message is telling you that `tokenize` expects a `String`, but found a String Array, i.e., `String []`.","body":"It isn&#39;t. The message is telling you that <code>tokenize</code> expects a <code>String</code>, but found a String Array, i.e., <code>String []</code>."}],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695148014,"creation_date":1695148014,"answer_id":77137078,"question_id":77136756,"body_markdown":"The problem is **exactly because it isn&#39;t considering arr as a string**.\r\n\r\nThe error say that the method `tokenize(String)` expects a `String` as parameter but recived `String[]` (`arr`).\r\n\r\nTo solve this you can change the variable declaration to it be a `String`:\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n\tString str = &quot;I went to the park at 2:30 and aw a dog It barked!&quot;;\r\n\tSystem.out.println(tokenize(str));\r\n}\r\n```","title":"passing in a String[] and printing it in main statement java","body":"<p>The problem is <strong>exactly because it isn't considering arr as a string</strong>.</p>\n<p>The error say that the method <code>tokenize(String)</code> expects a <code>String</code> as parameter but recived <code>String[]</code> (<code>arr</code>).</p>\n<p>To solve this you can change the variable declaration to it be a <code>String</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    String str = &quot;I went to the park at 2:30 and aw a dog It barked!&quot;;\n    System.out.println(tokenize(str));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24998171,"reputation":16,"user_id":18858798,"display_name":"Noob"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695389533,"creation_date":1695389533,"answer_id":77158080,"question_id":77136756,"body_markdown":"The method tokenize(String) expects a String variable as an argument but you are passing tokenize(arr) which is a String array. That is the reason you are getting the error.\r\n\r\n\r\n","title":"passing in a String[] and printing it in main statement java","body":"<p>The method tokenize(String) expects a String variable as an argument but you are passing tokenize(arr) which is a String array. That is the reason you are getting the error.</p>\n"}],"owner":{"account_id":28123982,"reputation":1,"user_id":21489736,"display_name":"Emma Cheney"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1695389533,"creation_date":1695144827,"question_id":77136756,"body_markdown":"I want to print the result of a method that passes in a `String[]` but I&#39;m getting the error:\r\n\r\n```\r\nThe method tokenize(String) in the type ReadingScore is not applicable for the arguments (String[])\r\n```\r\n\r\nI have this so far:\r\n\r\n```java \r\npublic static void main(String[] args) {\r\n        String[] arr = {&quot;I&quot;, &quot;went&quot;, &quot;to&quot;, &quot;the&quot;, &quot;park&quot;, &quot;at&quot;, &quot;2:30&quot;, &quot;and&quot;, &quot;saw&quot;, &quot;a&quot;, &quot;dog.&quot;, &quot;It&quot;, &quot;barked!&quot;}; \r\n        System.out.println(tokenize(arr));\r\n    }\r\n}\r\n```\r\n\r\nbut I don&#39;t understand why it is considering arr as a string ","title":"passing in a String[] and printing it in main statement java","body":"<p>I want to print the result of a method that passes in a <code>String[]</code> but I'm getting the error:</p>\n<pre><code>The method tokenize(String) in the type ReadingScore is not applicable for the arguments (String[])\n</code></pre>\n<p>I have this so far:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n        String[] arr = {&quot;I&quot;, &quot;went&quot;, &quot;to&quot;, &quot;the&quot;, &quot;park&quot;, &quot;at&quot;, &quot;2:30&quot;, &quot;and&quot;, &quot;saw&quot;, &quot;a&quot;, &quot;dog.&quot;, &quot;It&quot;, &quot;barked!&quot;}; \n        System.out.println(tokenize(arr));\n    }\n}\n</code></pre>\n<p>but I don't understand why it is considering arr as a string</p>\n"},{"tags":["java","docker","dockerfile"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1695276365,"post_id":77147543,"comment_id":136003237,"body_markdown":"i m pretty sure there are maven plugins for that, but what you dont want to specify in the docker file, you will have to specify to the plugin regardless? https://dmp.fabric8.io/","body":"i m pretty sure there are maven plugins for that, but what you dont want to specify in the docker file, you will have to specify to the plugin regardless? <a href=\"https://dmp.fabric8.io/\" rel=\"nofollow noreferrer\">dmp.fabric8.io</a>"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1695276449,"post_id":77147543,"comment_id":136003255,"body_markdown":"See also this link that uses a similar plugin https://stackoverflow.com/q/57399529/16034206","body":"See also this link that uses a similar plugin <a href=\"https://stackoverflow.com/q/57399529/16034206\">stackoverflow.com/q/57399529/16034206</a>"},{"owner":{"account_id":8913863,"reputation":155,"user_id":6653070,"display_name":"Sudhir Goswami"},"score":0,"creation_date":1695276535,"post_id":77147543,"comment_id":136003262,"body_markdown":"@experimentunit1998X, I will check this option.","body":"@experimentunit1998X, I will check this option."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1695276703,"post_id":77147543,"comment_id":136003287,"body_markdown":"wait, these are two different plugins. The second one is from [spotify](https://github.com/spotify/docker-maven-plugin/blob/master/README.md) but it seems that both support creating a docker file from a provided configuration so either one should work?","body":"wait, these are two different plugins. The second one is from <a href=\"https://github.com/spotify/docker-maven-plugin/blob/master/README.md\" rel=\"nofollow noreferrer\">spotify</a> but it seems that both support creating a docker file from a provided configuration so either one should work?"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1695276896,"post_id":77147543,"comment_id":136003310,"body_markdown":"these are also valid options: https://medium.com/swlh/build-a-docker-image-using-maven-and-spring-boot-58147045a400","body":"these are also valid options: <a href=\"https://medium.com/swlh/build-a-docker-image-using-maven-and-spring-boot-58147045a400\" rel=\"nofollow noreferrer\">medium.com/swlh/&hellip;</a>"},{"owner":{"account_id":8913863,"reputation":155,"user_id":6653070,"display_name":"Sudhir Goswami"},"score":0,"creation_date":1695278225,"post_id":77147543,"comment_id":136003516,"body_markdown":"this video is also helpful to perform step by step https://www.youtube.com/watch?v=YVnQydym9Gw","body":"this video is also helpful to perform step by step <a href=\"https://www.youtube.com/watch?v=YVnQydym9Gw\" rel=\"nofollow noreferrer\">youtube.com/watch?v=YVnQydym9Gw</a>"},{"owner":{"account_id":8913863,"reputation":155,"user_id":6653070,"display_name":"Sudhir Goswami"},"score":0,"creation_date":1695388491,"post_id":77147543,"comment_id":136021639,"body_markdown":"Hi @experimentunit1998X, I have tried to put all the fabric plugin in pom.xml file but docker file is not getting generated. I am updating the configuration in question section.","body":"Hi @experimentunit1998X, I have tried to put all the fabric plugin in pom.xml file but docker file is not getting generated. I am updating the configuration in question section."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1695389665,"post_id":77147543,"comment_id":136021895,"body_markdown":"Hi OP, this section of the documentation says it should, though I cannot confirm if it is true for you? https://dmp.fabric8.io/#docker:build &quot;When using this mode, the Dockerfile is created on the fly with all instructions extracted from the configuration given.&quot;","body":"Hi OP, this section of the documentation says it should, though I cannot confirm if it is true for you? <a href=\"https://dmp.fabric8.io/#docker:build\" rel=\"nofollow noreferrer\">dmp.fabric8.io/#docker:build</a> &quot;When using this mode, the Dockerfile is created on the fly with all instructions extracted from the configuration given.&quot;"}],"answers":[{"tags":[],"owner":{"account_id":1023013,"reputation":16655,"user_id":1032890,"accept_rate":100,"display_name":"GeertPt"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695389314,"creation_date":1695389314,"answer_id":77158048,"question_id":77147543,"body_markdown":"Fabric8 maven plugin does not generate a Dockerfile on disk, it immediately builds the Docker container. \r\n\r\nIf you specify a `&lt;dockerFile&gt;` configuration, it assumes it&#39;s an existing external Dockerfile, and skips generating one.\r\n\r\nAn alternative is the Jib maven plugin from google: https://cloud.google.com/java/getting-started/jib. However, it also does not generate an actual Dockerfile, it generates the container image directly.","title":"How to generate the dockerfile for java based project?","body":"<p>Fabric8 maven plugin does not generate a Dockerfile on disk, it immediately builds the Docker container.</p>\n<p>If you specify a <code>&lt;dockerFile&gt;</code> configuration, it assumes it's an existing external Dockerfile, and skips generating one.</p>\n<p>An alternative is the Jib maven plugin from google: <a href=\"https://cloud.google.com/java/getting-started/jib\" rel=\"nofollow noreferrer\">https://cloud.google.com/java/getting-started/jib</a>. However, it also does not generate an actual Dockerfile, it generates the container image directly.</p>\n"}],"owner":{"account_id":8913863,"reputation":155,"user_id":6653070,"display_name":"Sudhir Goswami"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695389314,"creation_date":1695276176,"question_id":77147543,"body_markdown":"I am looking for generate the Dockerfile for java based project? I don&#39;t want to write it manually. Because for .NET projects in Visual Studio, there is a Docker plugin that can generate the Dockerfile once you build the project. Please help me understand if it&#39;s the same for Java projects as well.\r\n\r\n    \t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;io.fabric8&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;0.43.4&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;verbose&gt;true&lt;/verbose&gt;\r\n\t\t\t\t\t&lt;images&gt;\r\n\t\t\t\t\t\t&lt;image&gt;\r\n\t\t\t\t\t\t\t&lt;name&gt;kbe-rest&lt;/name&gt;\r\n\t\t\t\t\t\t\t&lt;build&gt;\r\n\t\t\t\t\t\t\t\t&lt;assembly&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;descriptionRef&gt;artifact&lt;/descriptionRef&gt;\r\n\t\t\t\t\t\t\t\t&lt;/assembly&gt;\r\n\t\t\t\t\t\t\t\t&lt;dockerFile&gt;Dockerfile&lt;/dockerFile&gt;\r\n\t\t\t\t\t\t\t\t&lt;tags&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;tag&gt;latest&lt;/tag&gt;\r\n\t\t\t\t\t\t\t\t&lt;/tags&gt;\r\n\t\t\t\t\t\t\t&lt;/build&gt;\r\n\t\t\t\t\t\t&lt;/image&gt;\r\n\t\t\t\t\t&lt;/images&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;","title":"How to generate the dockerfile for java based project?","body":"<p>I am looking for generate the Dockerfile for java based project? I don't want to write it manually. Because for .NET projects in Visual Studio, there is a Docker plugin that can generate the Dockerfile once you build the project. Please help me understand if it's the same for Java projects as well.</p>\n<pre><code>            &lt;plugin&gt;\n            &lt;groupId&gt;io.fabric8&lt;/groupId&gt;\n            &lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.43.4&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;verbose&gt;true&lt;/verbose&gt;\n                &lt;images&gt;\n                    &lt;image&gt;\n                        &lt;name&gt;kbe-rest&lt;/name&gt;\n                        &lt;build&gt;\n                            &lt;assembly&gt;\n                                &lt;descriptionRef&gt;artifact&lt;/descriptionRef&gt;\n                            &lt;/assembly&gt;\n                            &lt;dockerFile&gt;Dockerfile&lt;/dockerFile&gt;\n                            &lt;tags&gt;\n                                &lt;tag&gt;latest&lt;/tag&gt;\n                            &lt;/tags&gt;\n                        &lt;/build&gt;\n                    &lt;/image&gt;\n                &lt;/images&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1486535523,"post_id":42106147,"comment_id":71381546,"body_markdown":"Strings are _immutable_ in Java. You cannot replace characters in a String, you have to build a new string, or use a `StringBuilder`, which _is_ mutable.","body":"Strings are <i>immutable</i> in Java. You cannot replace characters in a String, you have to build a new string, or use a <code>StringBuilder</code>, which <i>is</i> mutable."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":2,"creation_date":1486535525,"post_id":42106147,"comment_id":71381548,"body_markdown":"`char x = &#39;x&#39;|&#39;X&#39;;` what are you trying to do here?","body":"<code>char x = &#39;x&#39;|&#39;X&#39;;</code> what are you trying to do here?"},{"owner":{"account_id":7756609,"reputation":31,"user_id":5870673,"accept_rate":20,"display_name":"Latz"},"score":0,"creation_date":1486535865,"post_id":42106147,"comment_id":71381699,"body_markdown":"char x = &#39;x&#39;|&#39;X&#39; // To handle user input if either x|X is entered.","body":"char x = &#39;x&#39;|&#39;X&#39; // To handle user input if either x|X is entered."},{"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"score":0,"creation_date":1486536679,"post_id":42106147,"comment_id":71382083,"body_markdown":"Using [`String.toCharArray`](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray()) and [`String.indexOf`](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf(int)), it would be quite simple to do this without a loop (unless you have more than one character to replace)","body":"Using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray()\" rel=\"nofollow noreferrer\"><code>String.toCharArray</code></a> and <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf(int)\" rel=\"nofollow noreferrer\"><code>String.indexOf</code></a>, it would be quite simple to do this without a loop (unless you have more than one character to replace)"},{"owner":{"account_id":2074932,"reputation":3824,"user_id":1848578,"accept_rate":75,"display_name":"qxz"},"score":3,"creation_date":1486536731,"post_id":42106147,"comment_id":71382103,"body_markdown":"@Latz Unfortunately you can only store one `char` inside a `char`. `&#39;x&#39; | &#39;X&#39;` evaluates to the bitwise-OR of the two char values `&#39;x&#39;` and `&#39;X&#39;`, which equals `120` (or in char form, simply `&#39;x&#39;`). If you want to compare to two chars, you&#39;re gonna have to do two comparisons in your `if` condition.","body":"@Latz Unfortunately you can only store one <code>char</code> inside a <code>char</code>. <code>&#39;x&#39; | &#39;X&#39;</code> evaluates to the bitwise-OR of the two char values <code>&#39;x&#39;</code> and <code>&#39;X&#39;</code>, which equals <code>120</code> (or in char form, simply <code>&#39;x&#39;</code>). If you want to compare to two chars, you&#39;re gonna have to do two comparisons in your <code>if</code> condition."},{"owner":{"account_id":2074932,"reputation":3824,"user_id":1848578,"accept_rate":75,"display_name":"qxz"},"score":1,"creation_date":1486536854,"post_id":42106147,"comment_id":71382153,"body_markdown":"Also, [`String.replace(char, char)`](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)) doesn&#39;t do what you think it does; take a look at [the docs](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)). (It replaces _all_ occurrences of that char, not just one)","body":"Also, <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)\" rel=\"nofollow noreferrer\"><code>String.replace(char, char)</code></a> doesn&#39;t do what you think it does; take a look at <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)\" rel=\"nofollow noreferrer\">the docs</a>. (It replaces <i>all</i> occurrences of that char, not just one)"}],"answers":[{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1486538441,"post_id":42106720,"comment_id":71382987,"body_markdown":"`toUpperCase()` on the string is dangerous in corner cases. For example, in most locales, if the string contains the German letter `&#223;`, it will become `SS`, two chars, and will therefore shift the indices of the following chars, so you may be setting a char at the wrong index. Rather only change the case of the char you are looking at. Or just search for both (small) `x` and (capital) `X`.","body":"<code>toUpperCase()</code> on the string is dangerous in corner cases. For example, in most locales, if the string contains the German letter <code>&#223;</code>, it will become <code>SS</code>, two chars, and will therefore shift the indices of the following chars, so you may be setting a char at the wrong index. Rather only change the case of the char you are looking at. Or just search for both (small) <code>x</code> and (capital) <code>X</code>."},{"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"score":0,"creation_date":1486539457,"post_id":42106720,"comment_id":71383502,"body_markdown":"@Sweeper bad timing ^^ I have just removed the comment since I didn&#39;t like the idea to search both everytime, your twin loop will check only the good amout of time. Save the value into an integer ;) `while( (int index = Math.max ... ) != 1)`","body":"@Sweeper bad timing ^^ I have just removed the comment since I didn&#39;t like the idea to search both everytime, your twin loop will check only the good amout of time. Save the value into an integer ;) <code>while( (int index = Math.max ... ) != 1)</code>"}],"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1486541035,"creation_date":1486537478,"answer_id":42106720,"question_id":42106147,"body_markdown":"I am always a fan of using `StringBuilder`s, so here&#39;s a solution using that:\r\n\r\n    private static String replaceUnknownChars(String strWithUnknownChars, String fullStr) {\r\n        StringBuilder sb = new StringBuilder(strWithUnknownChars);\r\n        while ((int index = Math.max(sb.toString().indexOf(&#39;x&#39;), sb.toString().indexOf(&#39;X&#39;))) != -1) {\r\n            sb.setCharAt(index, fullStr.charAt(index));\r\n        }\r\n\r\n        return sb.toString();\r\n    }\r\n\r\nIt&#39;s quite straightforward. You create a new string builder. While a `x` or `X` can still be found in the string builder (`indexOf(&#39;X&#39;) != -1`), get the index and `setCharAt`.","title":"Replacing a character in a string from another string with the same char index","body":"<p>I am always a fan of using <code>StringBuilder</code>s, so here's a solution using that:</p>\n\n<pre><code>private static String replaceUnknownChars(String strWithUnknownChars, String fullStr) {\n    StringBuilder sb = new StringBuilder(strWithUnknownChars);\n    while ((int index = Math.max(sb.toString().indexOf('x'), sb.toString().indexOf('X'))) != -1) {\n        sb.setCharAt(index, fullStr.charAt(index));\n    }\n\n    return sb.toString();\n}\n</code></pre>\n\n<p>It's quite straightforward. You create a new string builder. While a <code>x</code> or <code>X</code> can still be found in the string builder (<code>indexOf('X') != -1</code>), get the index and <code>setCharAt</code>.</p>\n"},{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1486634648,"post_id":42106741,"comment_id":71433734,"body_markdown":"Funnily, `char c = &#39;x&#39;|&#39;X&#39;;` can be compiled as a statement. I agree with you that it does not make sense.","body":"Funnily, <code>char c = &#39;x&#39;|&#39;X&#39;;</code> can be compiled as a statement. I agree with you that it does not make sense."},{"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"score":0,"creation_date":1486635078,"post_id":42106741,"comment_id":71434009,"body_markdown":"@OleV.V. Damn, off course... this is a simple operator, so indeed this compile (but return an int) but not give the expected result. Well, luckily: 0111 1000 | 0101 1000 still give 0111 1000 (x) so it works with lowercase test. Add this information in the question (but a bit vague)","body":"@OleV.V. Damn, off course... this is a simple operator, so indeed this compile (but return an int) but not give the expected result. Well, luckily: 0111 1000 | 0101 1000 still give 0111 1000 (x) so it works with lowercase test. Add this information in the question (but a bit vague)"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1486635155,"post_id":42106741,"comment_id":71434053,"body_markdown":"— which can be good or bad: it might deceive someone into thinking that this works (I’d personally have preferred it didn’t compile).","body":"— which can be good or bad: it might deceive someone into thinking that this works (I’d personally have preferred it didn’t compile)."},{"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"score":0,"creation_date":1486635799,"post_id":42106741,"comment_id":71434486,"body_markdown":"@OleV.V. Well, it doesn&#39;t because of the result being an integer. But character are just numeric value, so I understand the JVM on this, of course, using a character value instead of the numerical value could be used to prevent this.","body":"@OleV.V. Well, it doesn&#39;t because of the result being an integer. But character are just numeric value, so I understand the JVM on this, of course, using a character value instead of the numerical value could be used to prevent this."}],"tags":[],"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1486635238,"creation_date":1486537531,"answer_id":42106741,"question_id":42106147,"body_markdown":"Your are using `String.replace(char, char)` the wrong way, the doc says\r\n\r\n&gt; Returns a new string resulting from replacing all occurrences of oldChar in this string with newChar. \r\n\r\nSo you if you have more than one character, this will replace every one with the same value.\r\n\r\nYou need to &quot;change&quot; only the character at a specific spot, for this, the easiest is to use the char array that you can get with [`String.toCharArray`][3], from this, this is you can use the same logic.\r\n\r\nOf course, you can use [`String.indexOf`][2] to find the index of a specific character\r\n\r\nNote : `char c = &#39;x&#39;|&#39;X&#39;`; will not give you the expected result. This will do a binary operation giving a value that is not the one you want.\r\n\r\nThe OR will return 1 if one of the bit is 1. \r\n\r\n    0111 1000 (x)\r\n    0101 1000 (X)\r\n    OR\r\n    0111 1000 (x)\r\n\r\nBut the result will be an integer (every numeric operation return at minimum an integer, you can find more information about that)\r\n\r\nYou have two solution here, you either use two variable (or an array) or if you can, you use [`String.toLowerCase`][1] an use only `char c = &#39;x&#39;`\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toLowerCase()\r\n  [2]:https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf(int)\r\n  [3]:https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray()","title":"Replacing a character in a string from another string with the same char index","body":"<p>Your are using <code>String.replace(char, char)</code> the wrong way, the doc says</p>\n\n<blockquote>\n  <p>Returns a new string resulting from replacing all occurrences of oldChar in this string with newChar. </p>\n</blockquote>\n\n<p>So you if you have more than one character, this will replace every one with the same value.</p>\n\n<p>You need to \"change\" only the character at a specific spot, for this, the easiest is to use the char array that you can get with <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray()\" rel=\"nofollow noreferrer\"><code>String.toCharArray</code></a>, from this, this is you can use the same logic.</p>\n\n<p>Of course, you can use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf(int)\" rel=\"nofollow noreferrer\"><code>String.indexOf</code></a> to find the index of a specific character</p>\n\n<p>Note : <code>char c = 'x'|'X'</code>; will not give you the expected result. This will do a binary operation giving a value that is not the one you want.</p>\n\n<p>The OR will return 1 if one of the bit is 1. </p>\n\n<pre><code>0111 1000 (x)\n0101 1000 (X)\nOR\n0111 1000 (x)\n</code></pre>\n\n<p>But the result will be an integer (every numeric operation return at minimum an integer, you can find more information about that)</p>\n\n<p>You have two solution here, you either use two variable (or an array) or if you can, you use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toLowerCase()\" rel=\"nofollow noreferrer\"><code>String.toLowerCase</code></a> an use only <code>char c = 'x'</code></p>\n"},{"tags":[],"owner":{"display_name":"user22614890"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695389076,"creation_date":1695389076,"answer_id":77158023,"question_id":42106147,"body_markdown":"With the level of details from the description the solution is less complex than imagine.\r\n\r\n```[Java]\r\nString voucherRecord = &quot;111122223333&quot;;\r\nString voucherNumber = &quot;1111x22xx333&quot;;\r\nString testVoucher = voucherNumber.replace(voucherNumber, voucherRecord);\r\n```\r\n\r\nAdditional details on what prevents replacing `voucherNumber` with `voucherRecord` definitely increase complexity.","title":"Replacing a character in a string from another string with the same char index","body":"<p>With the level of details from the description the solution is less complex than imagine.</p>\n<pre><code>String voucherRecord = &quot;111122223333&quot;;\nString voucherNumber = &quot;1111x22xx333&quot;;\nString testVoucher = voucherNumber.replace(voucherNumber, voucherRecord);\n</code></pre>\n<p>Additional details on what prevents replacing <code>voucherNumber</code> with <code>voucherRecord</code> definitely increase complexity.</p>\n"}],"owner":{"account_id":7756609,"reputation":31,"user_id":5870673,"accept_rate":20,"display_name":"Latz"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":42106720,"answer_count":3,"score":0,"last_activity_date":1695389076,"creation_date":1486535290,"question_id":42106147,"body_markdown":"I&#39;m trying to search and reveal unknown characters in a string. Both strings are of length 12.\r\n\r\n\r\nExample: \r\n         \r\n         String s1 = &quot;1x11222xx333&quot;;\r\n         String s2 = &quot;111122223333&quot;\r\n\r\nThe program should check for all unknowns in s1 represented by x|X and get the relevant chars in s2 and replace the x|X by the relevant char.\r\n\r\nSo far my code has replaced only the first x|X with the relevant char from s2 but printed duplicates for the rest of the unknowns with the char for the first x|X.\r\n\r\nHere is my code:\r\n\r\n\r\n        String VoucherNumber = &quot;1111x22xx333&quot;;\r\n        String VoucherRecord = &quot;111122223333&quot;;\r\n        String testVoucher = null;\r\n        char x = &#39;x&#39;|&#39;X&#39;;\r\n        \r\n        System.out.println(VoucherNumber); // including unknowns\r\n        \r\n            \r\n                //find x|X in the string VoucherNumber\r\n                for(int i = 0; i &lt; VoucherNumber.length(); i++){\r\n            \r\n                       if (VoucherNumber.charAt(i) == x){\r\n                           \r\n                           testVoucher = VoucherNumber.replace(VoucherNumber.charAt(i), VoucherRecord.charAt(i));\r\n                        \r\n                       }\r\n                    \r\n                         \r\n                }\r\n                \r\n                         System.out.println(testVoucher); //after replacing unknowns\r\n            }\r\n            \r\n           \r\n        }\r\n","title":"Replacing a character in a string from another string with the same char index","body":"<p>I'm trying to search and reveal unknown characters in a string. Both strings are of length 12.</p>\n\n<p>Example: </p>\n\n<pre><code>     String s1 = \"1x11222xx333\";\n     String s2 = \"111122223333\"\n</code></pre>\n\n<p>The program should check for all unknowns in s1 represented by x|X and get the relevant chars in s2 and replace the x|X by the relevant char.</p>\n\n<p>So far my code has replaced only the first x|X with the relevant char from s2 but printed duplicates for the rest of the unknowns with the char for the first x|X.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>    String VoucherNumber = \"1111x22xx333\";\n    String VoucherRecord = \"111122223333\";\n    String testVoucher = null;\n    char x = 'x'|'X';\n\n    System.out.println(VoucherNumber); // including unknowns\n\n\n            //find x|X in the string VoucherNumber\n            for(int i = 0; i &lt; VoucherNumber.length(); i++){\n\n                   if (VoucherNumber.charAt(i) == x){\n\n                       testVoucher = VoucherNumber.replace(VoucherNumber.charAt(i), VoucherRecord.charAt(i));\n\n                   }\n\n\n            }\n\n                     System.out.println(testVoucher); //after replacing unknowns\n        }\n\n\n    }\n</code></pre>\n"},{"tags":["java","queue","ignite","distributed"],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693960885,"post_id":77046331,"comment_id":135827656,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/77046331/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27719614,"reputation":11,"user_id":21160483,"display_name":"user21160483"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695388807,"creation_date":1693932367,"answer_id":77046331,"question_id":77042456,"body_markdown":"How about this: The data in your cache that you are prioritizing has a parallel Java code deployment that maintains a priority queue of the same field as you want the cache prioritized on.\r\n\r\nThen follow this process for **get** operations:\r\n 1. Invoke get from your Java code which returns and removes the highest priority element in its queue.\r\n 2. Use that element to perform a get on the cache.\r\n\r\nFollow this process for **put** operations:\r\n 1. Put the object into your cache taking note of the priority field.\r\n 2. Put the same priority field value into you Java implementation. \r\n\r\n----------\r\n\r\nWhile the above may not be perfect under all circumstances it should perform well. Noted potential issues / assumptions:\r\n 1. Assumption that priority values are always distinct\r\n 2. There is a small and short window between when a priority item is added to the cache and when it appears in the Java priority queue. If this happened to be the next highest priority at the time it was added to the cache you might has a few milli-seconds before it actually was added to the Java code priority.\r\n 3. If your get from cache fails then your process should add the priority element back onto the Java queue implementation. Thoughts? If the Java process failed it would have to scan the cache data to set the proper priority on start up. ","title":"Implementation of an apache Ignite priority queue","body":"<p>How about this: The data in your cache that you are prioritizing has a parallel Java code deployment that maintains a priority queue of the same field as you want the cache prioritized on.</p>\n<p>Then follow this process for <strong>get</strong> operations:</p>\n<ol>\n<li>Invoke get from your Java code which returns and removes the highest priority element in its queue.</li>\n<li>Use that element to perform a get on the cache.</li>\n</ol>\n<p>Follow this process for <strong>put</strong> operations:</p>\n<ol>\n<li>Put the object into your cache taking note of the priority field.</li>\n<li>Put the same priority field value into you Java implementation.</li>\n</ol>\n<hr />\n<p>While the above may not be perfect under all circumstances it should perform well. Noted potential issues / assumptions:</p>\n<ol>\n<li>Assumption that priority values are always distinct</li>\n<li>There is a small and short window between when a priority item is added to the cache and when it appears in the Java priority queue. If this happened to be the next highest priority at the time it was added to the cache you might has a few milli-seconds before it actually was added to the Java code priority.</li>\n<li>If your get from cache fails then your process should add the priority element back onto the Java queue implementation. Thoughts? If the Java process failed it would have to scan the cache data to set the proper priority on start up.</li>\n</ol>\n"}],"owner":{"account_id":3151197,"reputation":599,"user_id":2664618,"accept_rate":59,"display_name":"Dani Gilboa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695388807,"creation_date":1693898438,"question_id":77042456,"body_markdown":"I need a distributed priority queue and looking through the different data structures that Apache Ignite provides I cannot find anything that resembles a priority queue. Is there anyway to create an Ignite priority queue or am I left to fetch data from the Ignite data structure and do the priority sorting myself?\r\n\r\n","title":"Implementation of an apache Ignite priority queue","body":"<p>I need a distributed priority queue and looking through the different data structures that Apache Ignite provides I cannot find anything that resembles a priority queue. Is there anyway to create an Ignite priority queue or am I left to fetch data from the Ignite data structure and do the priority sorting myself?</p>\n"},{"tags":["java","maven","intellij-idea","annotation-processing"],"comments":[{"owner":{"account_id":9059972,"reputation":3080,"user_id":6746785,"display_name":"gthanop"},"score":0,"creation_date":1695304724,"post_id":77149015,"comment_id":136008952,"body_markdown":"[This](https://stackoverflow.com/a/65654562/6746785) answer might help with annotation processors working on incremental builds. Basically the solution seems to be to keep track of consumed annotation constructs in a resource file and checking it inside `Processor.init`.","body":"<a href=\"https://stackoverflow.com/a/65654562/6746785\">This</a> answer might help with annotation processors working on incremental builds. Basically the solution seems to be to keep track of consumed annotation constructs in a resource file and checking it inside <code>Processor.init</code>."}],"answers":[{"tags":[],"owner":{"account_id":40213,"reputation":64391,"user_id":116472,"display_name":"Thomas Broyer"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695292761,"creation_date":1695292761,"answer_id":77149487,"question_id":77149015,"body_markdown":"Because IntelliJ IDEA is (partly) open source, we can poke at the source code.\r\n\r\nThat system property leads to https://github.com/JetBrains/intellij-community/blob/6a50833d3cbdfc342e8fe16d954938b9f465fb2e/jps/jps-builders-6/src/org/jetbrains/jps/javac/JavacMain.java#L48, and from there we can find\r\n\r\n```java\r\n      final APIWrappers.ProcessingContext procContext;\r\n      final DiagnosticOutputConsumer diagnosticListener;\r\n      if (TRACK_AP_GENERATED_DEPENDENCIES &amp;&amp; isAnnotationProcessingEnabled) {\r\n        procContext = new APIWrappers.ProcessingContext(fileManager);\r\n        // use real processor class names and not names of processor wrappers\r\n        diagnosticListener = APIWrappers.newDiagnosticListenerWrapper(procContext, diagnosticConsumer);\r\n      }\r\n      else {\r\n        procContext = null;\r\n        diagnosticListener = diagnosticConsumer;\r\n      }\r\n\r\n      // …\r\n\r\n      // note: `task` is a javax.tools.JavaCompiler.CompilationTask\r\n      if (TRACK_AP_GENERATED_DEPENDENCIES &amp;&amp; isAnnotationProcessingEnabled) {\r\n        final Iterable&lt;Processor&gt; processors = lookupAnnotationProcessors(procContext, getAnnotationProcessorNames(_options));\r\n        if (processors != null) {\r\n          task.setProcessors(processors);\r\n        }\r\n      }\r\n```\r\n\r\nThis then (through the `APIWrappers` wrapper classes) will eventually call https://github.com/JetBrains/intellij-community/blob/6a50833d3cbdfc342e8fe16d954938b9f465fb2e/jps/jps-builders-6/src/org/jetbrains/jps/javac/JpsJavacFileManager.java#L665, which is then used to implement `javax.tools.JavaFileManager`&#39;s `getFileForOutput` and `getJavaFileForOutput`.\r\n\r\nI didn&#39;t look further but it looks like they&#39;re using a similar approach to Gradle&#39;s incremental annotation processing: tracing the &quot;originating elements&quot; for each generated file, so they can determine which other files/classes need to be reprocessed whenever a source file is being compiled after change.","title":"IntelliJ incremental Maven builds with annotations and APT","body":"<p>Because IntelliJ IDEA is (partly) open source, we can poke at the source code.</p>\n<p>That system property leads to <a href=\"https://github.com/JetBrains/intellij-community/blob/6a50833d3cbdfc342e8fe16d954938b9f465fb2e/jps/jps-builders-6/src/org/jetbrains/jps/javac/JavacMain.java#L48\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/intellij-community/blob/6a50833d3cbdfc342e8fe16d954938b9f465fb2e/jps/jps-builders-6/src/org/jetbrains/jps/javac/JavacMain.java#L48</a>, and from there we can find</p>\n<pre class=\"lang-java prettyprint-override\"><code>      final APIWrappers.ProcessingContext procContext;\n      final DiagnosticOutputConsumer diagnosticListener;\n      if (TRACK_AP_GENERATED_DEPENDENCIES &amp;&amp; isAnnotationProcessingEnabled) {\n        procContext = new APIWrappers.ProcessingContext(fileManager);\n        // use real processor class names and not names of processor wrappers\n        diagnosticListener = APIWrappers.newDiagnosticListenerWrapper(procContext, diagnosticConsumer);\n      }\n      else {\n        procContext = null;\n        diagnosticListener = diagnosticConsumer;\n      }\n\n      // …\n\n      // note: `task` is a javax.tools.JavaCompiler.CompilationTask\n      if (TRACK_AP_GENERATED_DEPENDENCIES &amp;&amp; isAnnotationProcessingEnabled) {\n        final Iterable&lt;Processor&gt; processors = lookupAnnotationProcessors(procContext, getAnnotationProcessorNames(_options));\n        if (processors != null) {\n          task.setProcessors(processors);\n        }\n      }\n</code></pre>\n<p>This then (through the <code>APIWrappers</code> wrapper classes) will eventually call <a href=\"https://github.com/JetBrains/intellij-community/blob/6a50833d3cbdfc342e8fe16d954938b9f465fb2e/jps/jps-builders-6/src/org/jetbrains/jps/javac/JpsJavacFileManager.java#L665\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/intellij-community/blob/6a50833d3cbdfc342e8fe16d954938b9f465fb2e/jps/jps-builders-6/src/org/jetbrains/jps/javac/JpsJavacFileManager.java#L665</a>, which is then used to implement <code>javax.tools.JavaFileManager</code>'s <code>getFileForOutput</code> and <code>getJavaFileForOutput</code>.</p>\n<p>I didn't look further but it looks like they're using a similar approach to Gradle's incremental annotation processing: tracing the &quot;originating elements&quot; for each generated file, so they can determine which other files/classes need to be reprocessed whenever a source file is being compiled after change.</p>\n"},{"tags":[],"owner":{"account_id":28411028,"reputation":416,"user_id":21734429,"display_name":"romanv-jb"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695388794,"creation_date":1695388794,"answer_id":77157987,"question_id":77149015,"body_markdown":"For Maven-based Projects IDEA, by default, delegates the the build process to its&#39; native Build System, see [Delegate IDE build/run actions to Maven][1] option.\r\n\r\nIDEA&#39;s Build System does support Incremental Annotation Processing. There are no limitations per se, as it only depends on how well the AP adheres to AP-writing best practices.\r\n\r\nSpecifically, that depends on how well AP reports on so-called &quot;origins&quot; when it returns the result of its&#39; work to IDEA/Javac.\r\n&quot;Origin&quot; indicates which object(s) data returned by AP relates to.\r\nBased off this &quot;origin&quot; data IDEA determines which objects within the Project have been updated and therefore have to be recompiled, removed, etc.\r\nUnfortunately, some APs do not provide this data or do not provide enough of it and in such cases you are likely to get inconsistent compilation results.\r\n\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/maven-runner.html","title":"IntelliJ incremental Maven builds with annotations and APT","body":"<p>For Maven-based Projects IDEA, by default, delegates the the build process to its' native Build System, see <a href=\"https://www.jetbrains.com/help/idea/maven-runner.html\" rel=\"nofollow noreferrer\">Delegate IDE build/run actions to Maven</a> option.</p>\n<p>IDEA's Build System does support Incremental Annotation Processing. There are no limitations per se, as it only depends on how well the AP adheres to AP-writing best practices.</p>\n<p>Specifically, that depends on how well AP reports on so-called &quot;origins&quot; when it returns the result of its' work to IDEA/Javac.\n&quot;Origin&quot; indicates which object(s) data returned by AP relates to.\nBased off this &quot;origin&quot; data IDEA determines which objects within the Project have been updated and therefore have to be recompiled, removed, etc.\nUnfortunately, some APs do not provide this data or do not provide enough of it and in such cases you are likely to get inconsistent compilation results.</p>\n"}],"owner":{"account_id":877636,"reputation":711,"user_id":120140,"display_name":"Mark Proctor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695388794,"creation_date":1695289152,"question_id":77149015,"body_markdown":"Gradle supports incremental annotation processing now, but I don&#39;t believe that helps those with Maven projects in IntelliJ. When I google on this I find a few references to IntelliJ and incremental annotation processing, but nothing describing how it works, its limitations etc. Is there any public information on this?\r\nhttps://github.com/JetBrains/intellij-community/tree/master/java/java-tests/testData/compileServer/incremental/annotations\r\n\r\nI&#39;ve found posts like this:\r\nhttps://intellij-support.jetbrains.com/hc/en-us/community/posts/7085229549586-JPS-incremental-annotation-processing-is-disabled\r\n\r\nAnd the property &quot;jps.track.ap.dependencies&quot;.\r\n\r\nSo this makes me believe IntelliJ is trying to do something that in some situations might be incremental...\r\n\r\nI&#39;ve done extensive searching and cannot find anything, I&#39;m hoping someone might be aware of a resource they can point to, or maybe have some internal Knowledge on this they can relate.","title":"IntelliJ incremental Maven builds with annotations and APT","body":"<p>Gradle supports incremental annotation processing now, but I don't believe that helps those with Maven projects in IntelliJ. When I google on this I find a few references to IntelliJ and incremental annotation processing, but nothing describing how it works, its limitations etc. Is there any public information on this?\n<a href=\"https://github.com/JetBrains/intellij-community/tree/master/java/java-tests/testData/compileServer/incremental/annotations\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/intellij-community/tree/master/java/java-tests/testData/compileServer/incremental/annotations</a></p>\n<p>I've found posts like this:\n<a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/7085229549586-JPS-incremental-annotation-processing-is-disabled\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/7085229549586-JPS-incremental-annotation-processing-is-disabled</a></p>\n<p>And the property &quot;jps.track.ap.dependencies&quot;.</p>\n<p>So this makes me believe IntelliJ is trying to do something that in some situations might be incremental...</p>\n<p>I've done extensive searching and cannot find anything, I'm hoping someone might be aware of a resource they can point to, or maybe have some internal Knowledge on this they can relate.</p>\n"},{"tags":["java","gradle","intellij-idea","build.gradle","gradle-plugin"],"comments":[{"owner":{"account_id":11179248,"reputation":11910,"user_id":8203759,"display_name":"Konstantin Annikov"},"score":0,"creation_date":1695390777,"post_id":77157952,"comment_id":136022160,"body_markdown":"Does it work out of IntelliJ?","body":"Does it work out of IntelliJ?"}],"answers":[{"comments":[{"owner":{"account_id":29509379,"reputation":1,"user_id":22614757,"display_name":"Simone"},"score":0,"creation_date":1695388884,"post_id":77157979,"comment_id":136021715,"body_markdown":"Yes, I&#39;m. I&#39;m using Gradle 8.3","body":"Yes, I&#39;m. I&#39;m using Gradle 8.3"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695607225,"post_id":77157979,"comment_id":136042391,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77157979/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27004317,"reputation":1,"user_id":20565072,"display_name":"user20565072"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695388741,"creation_date":1695388741,"answer_id":77157979,"question_id":77157952,"body_markdown":"Are you sure you have installed Gradle correctly on your machine? Check in the terminal using &#39;gradle -version","title":"Gradle Plugin is not found","body":"<p>Are you sure you have installed Gradle correctly on your machine? Check in the terminal using 'gradle -version</p>\n"}],"owner":{"account_id":29509379,"reputation":1,"user_id":22614757,"display_name":"Simone"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695388741,"creation_date":1695388528,"question_id":77157952,"body_markdown":"As you can see, the plugin [id: &#39;org.gradle.toolchains.foojay-resolver-convention&#39;, version: &#39;0.4.0&#39;] is not found, and I don&#39;t understand why. I am working on this project with other colleagues. The Gradle build works for them. We have analyzed our classes, and they are identical. I don&#39;t understand what I&#39;m doing wrong. (https://i.stack.imgur.com/ySIGD.png)\r\n\r\nI have cloned the project from the repository several times, but with no success. Furthermore, my colleagues have sent me their project folder, but that doesn&#39;t work for me either. Finally, I tried creating a new test project, adding Gradle from IntelliJ right away, and it works in this case.The environment variables appear to be correct.","title":"Gradle Plugin is not found","body":"<p>As you can see, the plugin [id: 'org.gradle.toolchains.foojay-resolver-convention', version: '0.4.0'] is not found, and I don't understand why. I am working on this project with other colleagues. The Gradle build works for them. We have analyzed our classes, and they are identical. I don't understand what I'm doing wrong. (<a href=\"https://i.stack.imgur.com/ySIGD.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/ySIGD.png</a>)</p>\n<p>I have cloned the project from the repository several times, but with no success. Furthermore, my colleagues have sent me their project folder, but that doesn't work for me either. Finally, I tried creating a new test project, adding Gradle from IntelliJ right away, and it works in this case.The environment variables appear to be correct.</p>\n"},{"tags":["java","multithreading","synchronization"],"comments":[{"owner":{"account_id":882111,"reputation":2915,"user_id":251370,"accept_rate":75,"display_name":"Bex"},"score":0,"creation_date":1441067647,"post_id":32300043,"comment_id":52518693,"body_markdown":"This is why the java.util.concurrent.locks.ReadWriteLock was created.","body":"This is why the java.util.concurrent.locks.ReadWriteLock was created."}],"answers":[{"comments":[{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1440966779,"post_id":32300110,"comment_id":52478069,"body_markdown":"All of the above can happen in a _sequentially consistent_ execution of the program, but Java doesn&#39;t even guarantee SC. So even if all the problems described here were to be somehow avoided, `get` would _still_ have to be synchronized.","body":"All of the above can happen in a <i>sequentially consistent</i> execution of the program, but Java doesn&#39;t even guarantee SC. So even if all the problems described here were to be somehow avoided, <code>get</code> would <i>still</i> have to be synchronized."}],"tags":[],"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1695388428,"creation_date":1440961396,"answer_id":32300110,"question_id":32300043,"body_markdown":"Here is one simple scenario that would produce a problem on unsynchronized `get`:\r\n\r\n- Thread A starts `get`, computes the hash bucket number, and gets pre-empted\r\n- Thread B calls `clear()`, so a smaller array of buckets gets allocated\r\n- Thread A wakes up, and may run into the index-out-of-bounds exception\r\n\r\nHere is a more complex scenario:\r\n\r\n- Thread A locks the map for an update, and gets pre-empted\r\n- Thread B initiates a `get` operation, computes the hash bucket number, and gets pre-empted\r\n- Thread A wakes up, and continues the `put`, and realizes that the buckets need resizing\r\n- Thread A allocates new buckets, copies old content into them, and adds the new item\r\n- Thread B wakes up, and continues the search using the old bucket index on the new array of buckets.\r\n\r\nAt this point, thread B is probably not going to find the right item, because it is very likely to be in a hash bucket at a different index. That is why `get` needs to be synchronized as well.","title":"Why does HashMap.get(key) needs to be synchronized when change operations are synchronized?","body":"<p>Here is one simple scenario that would produce a problem on unsynchronized <code>get</code>:</p>\n<ul>\n<li>Thread A starts <code>get</code>, computes the hash bucket number, and gets pre-empted</li>\n<li>Thread B calls <code>clear()</code>, so a smaller array of buckets gets allocated</li>\n<li>Thread A wakes up, and may run into the index-out-of-bounds exception</li>\n</ul>\n<p>Here is a more complex scenario:</p>\n<ul>\n<li>Thread A locks the map for an update, and gets pre-empted</li>\n<li>Thread B initiates a <code>get</code> operation, computes the hash bucket number, and gets pre-empted</li>\n<li>Thread A wakes up, and continues the <code>put</code>, and realizes that the buckets need resizing</li>\n<li>Thread A allocates new buckets, copies old content into them, and adds the new item</li>\n<li>Thread B wakes up, and continues the search using the old bucket index on the new array of buckets.</li>\n</ul>\n<p>At this point, thread B is probably not going to find the right item, because it is very likely to be in a hash bucket at a different index. That is why <code>get</code> needs to be synchronized as well.</p>\n"}],"owner":{"account_id":59715,"reputation":3561,"user_id":178597,"display_name":"Christian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1414,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":32300110,"answer_count":1,"score":6,"last_activity_date":1695388428,"creation_date":1440960972,"question_id":32300043,"body_markdown":"I use the `.get(...)`, `.put(...)` and `.clear()` operations from multiple threads on one HashMap. `.put(...)` and `.clear()` are inside a `synchronized` block but `.get(...)` is not. I can&#39;t imagine that this will cause problems but in other code I&#39;ve seen `.get()` is pretty much always synchronized.\r\n\r\nrelevant code for get/put\r\n\r\n    Object value = map.get(key);\r\n    if(value == null) {\r\n      synchronized (map) {\r\n        value = map.get(key); // check again, might have been changed in between\r\n        if(value == null) {\r\n          map.put(key, new Value(...));\r\n        }\r\n      }\r\n    }\r\n\r\nand clear is just:\r\n\r\n    synchronized (map) {\r\n      map.clear();\r\n    }\r\n\r\nThe write operations will invalidate caches because of the synchronized and the `get(...)` returns either null or an instance. I can&#39;t really see what could go wrong or what would improve by putting the `.get(...)` operation into a `synchronized(map)` block.","title":"Why does HashMap.get(key) needs to be synchronized when change operations are synchronized?","body":"<p>I use the <code>.get(...)</code>, <code>.put(...)</code> and <code>.clear()</code> operations from multiple threads on one HashMap. <code>.put(...)</code> and <code>.clear()</code> are inside a <code>synchronized</code> block but <code>.get(...)</code> is not. I can't imagine that this will cause problems but in other code I've seen <code>.get()</code> is pretty much always synchronized.</p>\n\n<p>relevant code for get/put</p>\n\n<pre><code>Object value = map.get(key);\nif(value == null) {\n  synchronized (map) {\n    value = map.get(key); // check again, might have been changed in between\n    if(value == null) {\n      map.put(key, new Value(...));\n    }\n  }\n}\n</code></pre>\n\n<p>and clear is just:</p>\n\n<pre><code>synchronized (map) {\n  map.clear();\n}\n</code></pre>\n\n<p>The write operations will invalidate caches because of the synchronized and the <code>get(...)</code> returns either null or an instance. I can't really see what could go wrong or what would improve by putting the <code>.get(...)</code> operation into a <code>synchronized(map)</code> block.</p>\n"},{"tags":["java","maven","intellij-idea","sonarqube"],"comments":[{"owner":{"account_id":497945,"reputation":968,"user_id":1360035,"display_name":"moilejter"},"score":0,"creation_date":1538889262,"post_id":52685593,"comment_id":92298783,"body_markdown":"Did you also install the Java analyzer in your SonarQube installation on localhost?  (I don&#39;t remember if it&#39;s there by default, or if you have to install/enable it on your installation, for use in projects it analyzes...)","body":"Did you also install the Java analyzer in your SonarQube installation on localhost?  (I don&#39;t remember if it&#39;s there by default, or if you have to install/enable it on your installation, for use in projects it analyzes...)"},{"owner":{"account_id":13841510,"reputation":47,"user_id":9991694,"display_name":"Rolfen"},"score":0,"creation_date":1538889905,"post_id":52685593,"comment_id":92298879,"body_markdown":"@moilejter SonarJava it&#39;s there by default (I had to update it tho)","body":"@moilejter SonarJava it&#39;s there by default (I had to update it tho)"},{"owner":{"account_id":282043,"reputation":4264,"user_id":578706,"accept_rate":100,"display_name":"Tibor Blenessy"},"score":0,"creation_date":1538923284,"post_id":52685593,"comment_id":92306045,"body_markdown":"Can you please post the output from maven with debug (`-X`) enabled?","body":"Can you please post the output from maven with debug (<code>-X</code>) enabled?"}],"answers":[{"comments":[{"owner":{"account_id":282043,"reputation":4264,"user_id":578706,"accept_rate":100,"display_name":"Tibor Blenessy"},"score":2,"creation_date":1538923359,"post_id":52685627,"comment_id":92306067,"body_markdown":"SonarQube can analyze much more then JaCoCo reports, it also analysis source code. Coverage is just one of many metrics.","body":"SonarQube can analyze much more then JaCoCo reports, it also analysis source code. Coverage is just one of many metrics."}],"tags":[],"owner":{"account_id":966533,"reputation":944,"user_id":989875,"display_name":"Charles"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1538888894,"creation_date":1538888894,"answer_id":52685627,"question_id":52685593,"body_markdown":"Sonarqube works by analyzing jacoco outputs.  I don&#39;t see any configs for jacoco in your pom.  https://www.petrikainulainen.net/programming/maven/creating-code-coverage-reports-for-unit-and-integration-tests-with-the-jacoco-maven-plugin/ is a good tutorial on how to set it up.  \r\n\r\nYou will also have to tell sonarqube where your jacoco.exec file is at.\r\nhttps://docs.sonarqube.org/display/PLUG/Code+Coverage+by+Unit+Tests+for+Java+Project","title":"SonarQube doesn&#39;t analyze the main java code with IntelliJ and Maven","body":"<p>Sonarqube works by analyzing jacoco outputs.  I don't see any configs for jacoco in your pom.  <a href=\"https://www.petrikainulainen.net/programming/maven/creating-code-coverage-reports-for-unit-and-integration-tests-with-the-jacoco-maven-plugin/\" rel=\"nofollow noreferrer\">https://www.petrikainulainen.net/programming/maven/creating-code-coverage-reports-for-unit-and-integration-tests-with-the-jacoco-maven-plugin/</a> is a good tutorial on how to set it up.  </p>\n\n<p>You will also have to tell sonarqube where your jacoco.exec file is at.\n<a href=\"https://docs.sonarqube.org/display/PLUG/Code+Coverage+by+Unit+Tests+for+Java+Project\" rel=\"nofollow noreferrer\">https://docs.sonarqube.org/display/PLUG/Code+Coverage+by+Unit+Tests+for+Java+Project</a></p>\n"},{"tags":[],"owner":{"account_id":13841510,"reputation":47,"user_id":9991694,"display_name":"Rolfen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1538935383,"creation_date":1538935383,"answer_id":52691355,"question_id":52685593,"body_markdown":"So, the problem was that IntelliJ was configured with Java SE Development Kit 11, I downgraded to Java SE Development Kit 8u181 and configured the POM so Maven works with that change, I executed the scanner again and it worked.\r\n\r\nChanges to pom.xml:\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n\r\n        &lt;sonar.sources&gt;src/main/java&lt;/sonar.sources&gt;\r\n    &lt;/properties&gt;\r\n\r\nadded:\r\n\r\n    &lt;plugin&gt;\r\n       &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n             &lt;version&gt;3.8.0&lt;/version&gt;\r\n             &lt;configuration&gt;\r\n                &lt;source&gt;8&lt;/source&gt;\r\n                &lt;target&gt;8&lt;/target&gt;\r\n             &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\n[New analysis results][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QCj2z.png","title":"SonarQube doesn&#39;t analyze the main java code with IntelliJ and Maven","body":"<p>So, the problem was that IntelliJ was configured with Java SE Development Kit 11, I downgraded to Java SE Development Kit 8u181 and configured the POM so Maven works with that change, I executed the scanner again and it worked.</p>\n\n<p>Changes to pom.xml:</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n\n    &lt;sonar.sources&gt;src/main/java&lt;/sonar.sources&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>added:</p>\n\n<pre><code>&lt;plugin&gt;\n   &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n         &lt;version&gt;3.8.0&lt;/version&gt;\n         &lt;configuration&gt;\n            &lt;source&gt;8&lt;/source&gt;\n            &lt;target&gt;8&lt;/target&gt;\n         &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/QCj2z.png\" rel=\"nofollow noreferrer\">New analysis results</a></p>\n"}],"owner":{"account_id":13841510,"reputation":47,"user_id":9991694,"display_name":"Rolfen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2443,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":52691355,"answer_count":2,"score":3,"last_activity_date":1695387700,"creation_date":1538888426,"question_id":52685593,"body_markdown":"I&#39;m using IntelliJ with Maven for my project and i have to analyze it with SonarQube, but when I scan my project with the command provided by the webApp it only analyzes the pom.xml file ignoring the rest of the project.\r\n\r\n[![Analysis results][1]][1]\r\n\r\n&gt; clean install sonar:sonar   -Dsonar.host.url=http://localhost:9000   -Dsonar.login=&quot;the corresponding key here&quot;\r\n\r\nMy pom.xml (what is inside the project tag):\r\n\r\n    &lt;groupId&gt;cl.itau.simulacionCredito&lt;/groupId&gt;\r\n    &lt;artifactId&gt;SimulacionCreditoIntelliJ&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n            &lt;version&gt;RELEASE&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.beust/jcommander --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.beust&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jcommander&lt;/artifactId&gt;\r\n            &lt;version&gt;1.72&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;6&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.6&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.22.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;**/HomeTest.java&lt;/exclude&gt;\r\n                        &lt;exclude&gt;**/PropuestaTest.java&lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0-M1&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.sonarsource.scanner.maven&lt;/groupId&gt;\r\n                &lt;artifactId&gt;sonar-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.5.0.1254&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;distributionManagement&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;SimulacionCredito&lt;/id&gt;\r\n            &lt;name&gt;SimulacionCredito&lt;/name&gt;\r\n            &lt;url&gt;file:C:\\Users\\Pc\\IdeaProjects&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/distributionManagement&gt;\r\n\r\nI also tried to use this inside the configuration tag:\r\n\r\n    &lt;sonar.sources&gt;src/main/java&lt;/sonar.sources&gt; \r\n\r\nAnd this happened:\r\n\r\n[![Second analysis][2]][2]\r\n\r\nMy settings.xml in Maven&#39;s conf:\r\n\r\n    &lt;pluginGroups&gt;\r\n\t    &lt;pluginGroup&gt;org.sonarsource.scanner.maven&lt;/pluginGroup&gt;\r\n      &lt;/pluginGroups&gt;\r\n\r\n      &lt;proxies&gt;\r\n      &lt;/proxies&gt;\r\n\r\n      &lt;servers&gt;\r\n      &lt;/servers&gt;\r\n\r\n      &lt;mirrors&gt;\r\n      &lt;/mirrors&gt;\r\n\r\n      &lt;profiles&gt;\r\n\t    &lt;profile&gt;\r\n           &lt;id&gt;sonar&lt;/id&gt;\r\n           &lt;activation&gt;\r\n               &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n           &lt;/activation&gt;\r\n           &lt;properties&gt;\r\n               &lt;sonar.host.url&gt;\r\n                 http://localhost:9000\r\n               &lt;/sonar.host.url&gt;\r\n            &lt;/properties&gt;\r\n         &lt;/profile&gt;\r\n      &lt;/profiles&gt;\r\n\r\nI&#39;ve been adding things to the POM because of different errors while trying to fix this.\r\n\r\nI have the latest version of SonarQube installed.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ycICh.png\r\n  [2]: https://i.stack.imgur.com/AGD3n.png","title":"SonarQube doesn&#39;t analyze the main java code with IntelliJ and Maven","body":"<p>I'm using IntelliJ with Maven for my project and i have to analyze it with SonarQube, but when I scan my project with the command provided by the webApp it only analyzes the pom.xml file ignoring the rest of the project.</p>\n<p><a href=\"https://i.stack.imgur.com/ycICh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ycICh.png\" alt=\"Analysis results\" /></a></p>\n<blockquote>\n<p>clean install sonar:sonar   -Dsonar.host.url=http://localhost:9000   -Dsonar.login=&quot;the corresponding key here&quot;</p>\n</blockquote>\n<p>My pom.xml (what is inside the project tag):</p>\n<pre><code>&lt;groupId&gt;cl.itau.simulacionCredito&lt;/groupId&gt;\n&lt;artifactId&gt;SimulacionCreditoIntelliJ&lt;/artifactId&gt;\n&lt;version&gt;1.0&lt;/version&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.testng&lt;/groupId&gt;\n        &lt;artifactId&gt;testng&lt;/artifactId&gt;\n        &lt;version&gt;RELEASE&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.beust/jcommander --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.beust&lt;/groupId&gt;\n        &lt;artifactId&gt;jcommander&lt;/artifactId&gt;\n        &lt;version&gt;1.72&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;properties&gt;\n    &lt;maven.compiler.source&gt;6&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.6&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.22.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;**/HomeTest.java&lt;/exclude&gt;\n                    &lt;exclude&gt;**/PropuestaTest.java&lt;/exclude&gt;\n                &lt;/excludes&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0-M1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.sonarsource.scanner.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;sonar-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.5.0.1254&lt;/version&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n\n&lt;distributionManagement&gt;\n    &lt;repository&gt;\n        &lt;id&gt;SimulacionCredito&lt;/id&gt;\n        &lt;name&gt;SimulacionCredito&lt;/name&gt;\n        &lt;url&gt;file:C:\\Users\\Pc\\IdeaProjects&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/distributionManagement&gt;\n</code></pre>\n<p>I also tried to use this inside the configuration tag:</p>\n<pre><code>&lt;sonar.sources&gt;src/main/java&lt;/sonar.sources&gt; \n</code></pre>\n<p>And this happened:</p>\n<p><a href=\"https://i.stack.imgur.com/AGD3n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AGD3n.png\" alt=\"Second analysis\" /></a></p>\n<p>My settings.xml in Maven's conf:</p>\n<pre><code>&lt;pluginGroups&gt;\n    &lt;pluginGroup&gt;org.sonarsource.scanner.maven&lt;/pluginGroup&gt;\n  &lt;/pluginGroups&gt;\n\n  &lt;proxies&gt;\n  &lt;/proxies&gt;\n\n  &lt;servers&gt;\n  &lt;/servers&gt;\n\n  &lt;mirrors&gt;\n  &lt;/mirrors&gt;\n\n  &lt;profiles&gt;\n    &lt;profile&gt;\n       &lt;id&gt;sonar&lt;/id&gt;\n       &lt;activation&gt;\n           &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n       &lt;/activation&gt;\n       &lt;properties&gt;\n           &lt;sonar.host.url&gt;\n             http://localhost:9000\n           &lt;/sonar.host.url&gt;\n        &lt;/properties&gt;\n     &lt;/profile&gt;\n  &lt;/profiles&gt;\n</code></pre>\n<p>I've been adding things to the POM because of different errors while trying to fix this.</p>\n<p>I have the latest version of SonarQube installed.</p>\n"},{"tags":["java","android","animation","height","android-linearlayout"],"answers":[{"comments":[{"owner":{"account_id":5047443,"reputation":2588,"user_id":4052962,"accept_rate":100,"display_name":"Mikhail Spitsin"},"score":3,"creation_date":1695386382,"post_id":41014867,"comment_id":136021209,"body_markdown":"I think this code isn&#39;t supposed to work as `measure` accepts `MeasureSpec` instead of LayoutParam width. \nSource: https://developer.android.com/reference/android/view/View.MeasureSpec","body":"I think this code isn&#39;t supposed to work as <code>measure</code> accepts <code>MeasureSpec</code> instead of LayoutParam width.  Source: <a href=\"https://developer.android.com/reference/android/view/View.MeasureSpec\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/view/View.MeasureSpe&zwnj;&#8203;c</a>"}],"tags":[],"owner":{"account_id":8899762,"reputation":412,"user_id":6643553,"display_name":"Tin Nguyen"},"comment_count":1,"down_vote_count":4,"up_vote_count":29,"is_accepted":true,"score":25,"last_activity_date":1481106120,"creation_date":1481106120,"answer_id":41014867,"question_id":41014530,"body_markdown":"Try this code:\r\n\r\n    linearLayout.measure(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);\r\n    height = linearLayout.getMeasuredHeight();\r\n\r\n","title":"Get what the WRAP_CONTENT height would be","body":"<p>Try this code:</p>\n\n<pre><code>linearLayout.measure(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);\nheight = linearLayout.getMeasuredHeight();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5047443,"reputation":2588,"user_id":4052962,"accept_rate":100,"display_name":"Mikhail Spitsin"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1695387162,"creation_date":1695387162,"answer_id":77157780,"question_id":41014530,"body_markdown":"I think the approach proposed by @tin-nguyen is wrong, as `View.measure` method accepts `Int` as per `MeasureSpec` (here is a [doc](https://developer.android.com/reference/android/view/View#measure(int,%20int))). \r\n\r\nSo, yes, you can send `LayoutParams.WRAP_CONTENT`, but it will doesn&#39;t make much sense to the view you measuring. \r\n\r\nIf the measuring of the view is working for you, while you sent `WRAP_CONTENT` consider that pure luck.\r\n\r\nSo you actually need to call:\r\n\r\n```\r\nval unspecifiedSpec = linearLayout.measure(\r\n  /* widthMeasureSpec = */ MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),\r\n  /* heightMeasureSpec = */ MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED)\r\n)\r\n```\r\n\r\nIn your case you want to imitate `WRAP_CONTENT` situation, which basically means you want to say to the view &quot;Please measure, I don&#39;t have any limitations for you&quot;. And `UNSPECIFIED` is literally for that ([doc link](https://developer.android.com/reference/android/view/View.MeasureSpec#UNSPECIFIED)).","title":"Get what the WRAP_CONTENT height would be","body":"<p>I think the approach proposed by @tin-nguyen is wrong, as <code>View.measure</code> method accepts <code>Int</code> as per <code>MeasureSpec</code> (here is a <a href=\"https://developer.android.com/reference/android/view/View#measure(int,%20int)\" rel=\"noreferrer\">doc</a>).</p>\n<p>So, yes, you can send <code>LayoutParams.WRAP_CONTENT</code>, but it will doesn't make much sense to the view you measuring.</p>\n<p>If the measuring of the view is working for you, while you sent <code>WRAP_CONTENT</code> consider that pure luck.</p>\n<p>So you actually need to call:</p>\n<pre><code>val unspecifiedSpec = linearLayout.measure(\n  /* widthMeasureSpec = */ MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),\n  /* heightMeasureSpec = */ MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED)\n)\n</code></pre>\n<p>In your case you want to imitate <code>WRAP_CONTENT</code> situation, which basically means you want to say to the view &quot;Please measure, I don't have any limitations for you&quot;. And <code>UNSPECIFIED</code> is literally for that (<a href=\"https://developer.android.com/reference/android/view/View.MeasureSpec#UNSPECIFIED\" rel=\"noreferrer\">doc link</a>).</p>\n"}],"owner":{"account_id":9063804,"reputation":1074,"user_id":6749425,"accept_rate":38,"display_name":"Fabio Piunti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8359,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":41014867,"answer_count":2,"score":13,"last_activity_date":1695387162,"creation_date":1481105117,"question_id":41014530,"body_markdown":"My purpose is to have an invisible LinearLayout that appear whit an animation when click on a specific button. To do this i have set the default height to WRAP_CONTENT, get the height when the app start, set the height to 0 and start the animation when i click on the button. Here is the code:\r\n\r\n    \r\n    linearLayout.post(new Runnable() {\r\n        @Override\r\n        public void run(){\r\n            height = linearLayout.getMeasuredHeight();\r\n            linearLayout.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, 0));\r\n        }\r\n    });\r\n    \r\n\r\n    findViewById(R.id.btnOperator).setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View view) {\r\n            Animation ani = new ShowAnim(linearLayout, height/* target layout height */);\r\n            ani.setDuration(1000/* animation time */);\r\n            linearLayout.startAnimation(ani);\r\n            \r\n        }\r\n    });\r\n\r\nThis work pretty good, but i want to do different. I want that the default height is 0, and then calculate what the WRAP_CONTENT height would be, and pass it to:\r\n\r\n    Animation ani = new ShowAnim(linearLayout, height/* target layout height */);\r\n\r\nHow could i do this? I searched but found anything.\r\n\r\n\r\n\r\n","title":"Get what the WRAP_CONTENT height would be","body":"<p>My purpose is to have an invisible LinearLayout that appear whit an animation when click on a specific button. To do this i have set the default height to WRAP_CONTENT, get the height when the app start, set the height to 0 and start the animation when i click on the button. Here is the code:</p>\n\n<pre><code>linearLayout.post(new Runnable() {\n    @Override\n    public void run(){\n        height = linearLayout.getMeasuredHeight();\n        linearLayout.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, 0));\n    }\n});\n\n\nfindViewById(R.id.btnOperator).setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        Animation ani = new ShowAnim(linearLayout, height/* target layout height */);\n        ani.setDuration(1000/* animation time */);\n        linearLayout.startAnimation(ani);\n\n    }\n});\n</code></pre>\n\n<p>This work pretty good, but i want to do different. I want that the default height is 0, and then calculate what the WRAP_CONTENT height would be, and pass it to:</p>\n\n<pre><code>Animation ani = new ShowAnim(linearLayout, height/* target layout height */);\n</code></pre>\n\n<p>How could i do this? I searched but found anything.</p>\n"},{"tags":["java","android","pdf","itext","pdf-generation"],"comments":[{"owner":{"account_id":11363645,"reputation":2645,"user_id":8331157,"display_name":"BenjyTec"},"score":3,"creation_date":1695222265,"post_id":77143702,"comment_id":135996182,"body_markdown":"Welcome to Stackoverflow! Please paste your code as text into your post. You can edit your post to do so.","body":"Welcome to Stackoverflow! Please paste your code as text into your post. You can edit your post to do so."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1695248822,"post_id":77143702,"comment_id":136000838,"body_markdown":"In your code you don&#39;t add anything to the PDF. Furthermore, what class is `Html`? It&#39;s not an iText class.","body":"In your code you don&#39;t add anything to the PDF. Furthermore, what class is <code>Html</code>? It&#39;s not an iText class."},{"owner":{"account_id":24707463,"reputation":1,"user_id":18598111,"display_name":"saeedbayat"},"score":0,"creation_date":1695387191,"post_id":77143702,"comment_id":136021387,"body_markdown":"I edited my question can you help me?","body":"I edited my question can you help me?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1695396873,"post_id":77143702,"comment_id":136023533,"body_markdown":"I&#39;ve not had to deal with such layout details myself, so I don&#39;t have a working solution up my sleeve. Some hints, though:  (1) your `table.getKeepTogether()` calls essentially do nothing, they return a value which your code immediately ignores. You probably wanted to use `table.setKeepTogether` with `true` or `false`. (2) Another method to try is `table.setSplitLate` with `true` or `false`. (3) Yet another approach would be add several `Paragraph` objects to `cell2` each with just one line instead of that single `p1` containing all those lines.","body":"I&#39;ve not had to deal with such layout details myself, so I don&#39;t have a working solution up my sleeve. Some hints, though:  (1) your <code>table.getKeepTogether()</code> calls essentially do nothing, they return a value which your code immediately ignores. You probably wanted to use <code>table.setKeepTogether</code> with <code>true</code> or <code>false</code>. (2) Another method to try is <code>table.setSplitLate</code> with <code>true</code> or <code>false</code>. (3) Yet another approach would be add several <code>Paragraph</code> objects to <code>cell2</code> each with just one line instead of that single <code>p1</code> containing all those lines."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1695397351,"post_id":77143702,"comment_id":136023613,"body_markdown":"(4) Or, of course, use one cell per line.","body":"(4) Or, of course, use one cell per line."},{"owner":{"account_id":24707463,"reputation":1,"user_id":18598111,"display_name":"saeedbayat"},"score":0,"creation_date":1695503748,"post_id":77143702,"comment_id":136033960,"body_markdown":"dear mlk thank you.","body":"dear mlk thank you."}],"owner":{"account_id":24707463,"reputation":1,"user_id":18598111,"display_name":"saeedbayat"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695387104,"creation_date":1695221920,"question_id":77143702,"body_markdown":"I used Itext5 to create a PDF. Because the text is in Persian, I used a table to write. But now there is a big gap between the first and second paragraphs that I added to the project. I don&#39;t want this long distance. you can see my code an the pdf result below.\r\n\r\nthis is my result.\r\n\r\n[I don&#39;t want this long distance.](https://i.stack.imgur.com/ry4k0.png)\r\n\r\n\r\nthis is my code\r\n\r\n   \r\n\r\n      private void createPDF() throws FileNotFoundException {\r\n            Document doc = new Document(PageSize.A4, 10, 10, 50, 36);\r\n    \r\n            try {\r\n    \r\n                String root = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString();\r\n                File dir = new File(root + &quot;/pdf&quot;);\r\n                if (!dir.exists()) {\r\n                    dir.mkdirs();\r\n                }\r\n                String filename = &quot;saeedsss.pdf&quot;;\r\n                File file = new File(dir, filename);\r\n                FileOutputStream fOut = new FileOutputStream(file);\r\n                PdfWriter.getInstance(doc, fOut);\r\n    \r\n                doc.open();\r\n                Paragraph p = new Paragraph();\r\n                BaseFont myFont = BaseFont.createFont(&quot;assets/font/XB Zar.ttf&quot;, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);\r\n                BaseFont myFont1 = BaseFont.createFont(&quot;assets/font/BLOTUSB.TTF&quot;, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);\r\n                com.itextpdf.text.Font paraFont = new com.itextpdf.text.Font(myFont, 20);\r\n                com.itextpdf.text.Font paraFont1 = new com.itextpdf.text.Font(myFont1, 19);\r\n                p.setFont(paraFont);\r\n                p.add(&quot;سعید بیات پریدری &quot;);\r\n                p.add(Html.fromHtml(&quot;&lt;b&gt; محسن بیات &lt;/b&gt; &quot;, 0).toString());\r\n                p.add(&quot;حسین بیات پریدری&quot;);\r\n                Paragraph p1 = new Paragraph();\r\n                p1.setFont(paraFont1);\r\n    \r\n                p1.add(&quot;صورتجلسه مجمع عمومی عادی بطور فوق العاده برای انتخاب مدیران و بازرسین ،روزنامه و تصویب تراز در شرکتهای سهامی خاص\\n&quot; +\r\n                        &quot;نام شرکت : …………...............………………\\n&quot; +\r\n                        &quot;شماره ثبت شرکت : …………………………                                  \\n&quot; +\r\n                        &quot;سرمایه ثبت شده : …………………………\\n&quot; +\r\n                        &quot;شناسه ملی : ......................................\\n&quot; +\r\n                        &quot;صورتجلسه مجمع عمومی عادی بطور فوق العاه شرکت ………… سهامی خاص ثبت شده به شماره …....…… در تاریخ …………… ساعت……… با حضور کلیه / اکثریت سهامداران در محل قانونی شرکت (اگر جلسه در محل دیگری غیر از محل قانونی شرکت تشکیل شده آدرس آن محل نوشته شود) تشکیل گردید. \\n&quot; +\r\n                        &quot;الف: در اجرای ماده 101 لایحه اصلاحی قانون تجارت: \\n&quot; +\r\n                        &quot;1ـ خانم/ آقای ………………………… به سمت رئیس جلسه \\n&quot; +\r\n                        &quot;2ـ خانم/ آقای ………………………… به سمت ناظر جلسه \\n&quot; +\r\n                        &quot;3ـ خانم/ آقای ………………………… به سمت ناظر جلسه \\n&quot; +\r\n                        &quot;4ـ خانم/ آقای………………………… به سمت منشی جلسه انتخاب شدند. \\n&quot; +\r\n                        &quot;ب: در خصوص دستور جلسه، 1ـ انتخاب مدیران 2ـ انتخاب بازرسین 3ـ انتخاب روزنامه کثیرالانتشار 4ـ تصویب ترازنامه حساب سود و زیان به شرح ذیل اتخاذ تصمیم شد. \\n&quot; +\r\n                        &quot;ب : 1ـ اعضای هیات مدیره عبارتند از خانم/آقای ………. به شماره ملی …………………… خانم/آقای …….. به شماره ملی …………………… خانم/آقای ……….. به شماره ملی ……………………  برای مدت دو سال انتخاب و با امضاء ذیل صورتجلسه قبولی خود را اعلام می دارند. مجمع تصویب نمود در اجرای ماده 124 لایحه اصلاحی قانون تجارت میتواند رئیس هیئت مدیره و مدیر عامل یک نفر باشد.\\n&quot; +\r\n                        &quot;ب ـ 2ـ با رعایت ماده 147 لایحه اصلاحی قانون تجارت خانم / آقای ………..  به شماره ملی ……………… به سمت بازرس اصلی خانم / آقای …………. به شماره ملی …………………  به سمت بازرس علی البدل برای مدت یک سال مالی انتخاب شدند. \\n&quot; +\r\n                        &quot;ب ـ 3ـ روزنامه کثیرالانتشار ………………………… جهت نشر آگهی های شرکت انتخاب شد.\\n&quot; +\r\n                        &quot;ب ـ4ـ پس از قرائت گزارش بازرس قانونی ترازنامه و حساب سود و زیان شرکت منتهی به سال...................... مورد تصویب قرار گرفت. \\n&quot; +\r\n                        &quot;ج: اینجانبان اعضاء هیات مدیره و بازرسین ضمن قبولی سمت خود اقرار می نمائیم که هیچگونه سوء پیشینه کیفری نداشته و ممنوعیت اصل 141 قانون اساسی و مواد 111 و147 لایحه اصلاحی قانون تجارت را نداریم .\\n&quot; +\r\n                        &quot;د: به خانم / آقای ………………………… احدی از سهامداران یا احدی از مدیران یا وکیل رسمی شرکت وکالت داده می شود که ضمن مراجعه به اداره ثبت شرکت ها نسبت به ثبت صورتجلسه و پرداخت حق الثبت و امضاء ذیل دفاتر ثبت اقدام نماید.\\n&quot; +\r\n                        &quot;امضاء هیات رئیسه:  رئیس جلسه ……...........…    ناظر جلسه ………………     ناظرجلسه………………\\n&quot; +\r\n                        &quot;منشی جلسه ........................\\n&quot; +\r\n                        &quot;امضا اعضای هیئت مدیره : \\n&quot; +\r\n                        &quot;1 ـ ……………………   2 ـ ……………………   3ـ ……………………    4 ـ  ……………………\\n&quot; +\r\n                        &quot;امضاء بازرسین: \\t \\t             بازرس اصلی\\t                    بازرس علی البدل:\\n&quot; +\r\n                        &quot;\\n&quot; +\r\n                        &quot;\\n&quot; +\r\n                        &quot;\\n &quot;);\r\n    \r\n                PdfPTable table = new PdfPTable(1);\r\n                PdfPCell cell = new PdfPCell(p);\r\n                PdfPCell cell2 = new PdfPCell(p1);\r\n    \r\n                cell.setBorder(0);\r\n                cell2.setBorder(0);\r\n    \r\n                table.getKeepTogether();\r\n                cell2.setHorizontalAlignment(Element.ALIGN_JUSTIFIED);\r\n                cell.setHorizontalAlignment(Element.ALIGN_CENTER);\r\n                cell.setRunDirection(PdfWriter.RUN_DIRECTION_RTL);\r\n                cell2.setRunDirection(PdfWriter.RUN_DIRECTION_RTL);\r\n                cell.setPaddingBottom(20);\r\n                cell2.setLeading(20f, 0f);\r\n                table.getKeepTogether();\r\n                table.addCell(cell);\r\n                table.addCell(cell2);\r\n    \r\n                table.getKeepTogether();\r\n                doc.add(table);\r\n    \r\n    \r\n            } catch (DocumentException de) {\r\n                Log.e(&quot;PDFCreator&quot;, &quot;DocumentException:&quot; + de);\r\n            } catch (IOException e) {\r\n                Log.e(&quot;PDFCreator&quot;, &quot;ioException:&quot; + e);\r\n            } finally {\r\n    \r\n                doc.close();\r\n    \r\n            }\r\n    \r\n        }\r\n\r\n\r\n","title":"in Itext 5 my second page has far (white space) from my first page","body":"<p>I used Itext5 to create a PDF. Because the text is in Persian, I used a table to write. But now there is a big gap between the first and second paragraphs that I added to the project. I don't want this long distance. you can see my code an the pdf result below.</p>\n<p>this is my result.</p>\n<p><a href=\"https://i.stack.imgur.com/ry4k0.png\" rel=\"nofollow noreferrer\">I don't want this long distance.</a></p>\n<p>this is my code</p>\n<pre><code>  private void createPDF() throws FileNotFoundException {\n        Document doc = new Document(PageSize.A4, 10, 10, 50, 36);\n\n        try {\n\n            String root = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString();\n            File dir = new File(root + &quot;/pdf&quot;);\n            if (!dir.exists()) {\n                dir.mkdirs();\n            }\n            String filename = &quot;saeedsss.pdf&quot;;\n            File file = new File(dir, filename);\n            FileOutputStream fOut = new FileOutputStream(file);\n            PdfWriter.getInstance(doc, fOut);\n\n            doc.open();\n            Paragraph p = new Paragraph();\n            BaseFont myFont = BaseFont.createFont(&quot;assets/font/XB Zar.ttf&quot;, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);\n            BaseFont myFont1 = BaseFont.createFont(&quot;assets/font/BLOTUSB.TTF&quot;, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);\n            com.itextpdf.text.Font paraFont = new com.itextpdf.text.Font(myFont, 20);\n            com.itextpdf.text.Font paraFont1 = new com.itextpdf.text.Font(myFont1, 19);\n            p.setFont(paraFont);\n            p.add(&quot;سعید بیات پریدری &quot;);\n            p.add(Html.fromHtml(&quot;&lt;b&gt; محسن بیات &lt;/b&gt; &quot;, 0).toString());\n            p.add(&quot;حسین بیات پریدری&quot;);\n            Paragraph p1 = new Paragraph();\n            p1.setFont(paraFont1);\n\n            p1.add(&quot;صورتجلسه مجمع عمومی عادی بطور فوق العاده برای انتخاب مدیران و بازرسین ،روزنامه و تصویب تراز در شرکتهای سهامی خاص\\n&quot; +\n                    &quot;نام شرکت : …………...............………………\\n&quot; +\n                    &quot;شماره ثبت شرکت : …………………………                                  \\n&quot; +\n                    &quot;سرمایه ثبت شده : …………………………\\n&quot; +\n                    &quot;شناسه ملی : ......................................\\n&quot; +\n                    &quot;صورتجلسه مجمع عمومی عادی بطور فوق العاه شرکت ………… سهامی خاص ثبت شده به شماره …....…… در تاریخ …………… ساعت……… با حضور کلیه / اکثریت سهامداران در محل قانونی شرکت (اگر جلسه در محل دیگری غیر از محل قانونی شرکت تشکیل شده آدرس آن محل نوشته شود) تشکیل گردید. \\n&quot; +\n                    &quot;الف: در اجرای ماده 101 لایحه اصلاحی قانون تجارت: \\n&quot; +\n                    &quot;1ـ خانم/ آقای ………………………… به سمت رئیس جلسه \\n&quot; +\n                    &quot;2ـ خانم/ آقای ………………………… به سمت ناظر جلسه \\n&quot; +\n                    &quot;3ـ خانم/ آقای ………………………… به سمت ناظر جلسه \\n&quot; +\n                    &quot;4ـ خانم/ آقای………………………… به سمت منشی جلسه انتخاب شدند. \\n&quot; +\n                    &quot;ب: در خصوص دستور جلسه، 1ـ انتخاب مدیران 2ـ انتخاب بازرسین 3ـ انتخاب روزنامه کثیرالانتشار 4ـ تصویب ترازنامه حساب سود و زیان به شرح ذیل اتخاذ تصمیم شد. \\n&quot; +\n                    &quot;ب : 1ـ اعضای هیات مدیره عبارتند از خانم/آقای ………. به شماره ملی …………………… خانم/آقای …….. به شماره ملی …………………… خانم/آقای ……….. به شماره ملی ……………………  برای مدت دو سال انتخاب و با امضاء ذیل صورتجلسه قبولی خود را اعلام می دارند. مجمع تصویب نمود در اجرای ماده 124 لایحه اصلاحی قانون تجارت میتواند رئیس هیئت مدیره و مدیر عامل یک نفر باشد.\\n&quot; +\n                    &quot;ب ـ 2ـ با رعایت ماده 147 لایحه اصلاحی قانون تجارت خانم / آقای ………..  به شماره ملی ……………… به سمت بازرس اصلی خانم / آقای …………. به شماره ملی …………………  به سمت بازرس علی البدل برای مدت یک سال مالی انتخاب شدند. \\n&quot; +\n                    &quot;ب ـ 3ـ روزنامه کثیرالانتشار ………………………… جهت نشر آگهی های شرکت انتخاب شد.\\n&quot; +\n                    &quot;ب ـ4ـ پس از قرائت گزارش بازرس قانونی ترازنامه و حساب سود و زیان شرکت منتهی به سال...................... مورد تصویب قرار گرفت. \\n&quot; +\n                    &quot;ج: اینجانبان اعضاء هیات مدیره و بازرسین ضمن قبولی سمت خود اقرار می نمائیم که هیچگونه سوء پیشینه کیفری نداشته و ممنوعیت اصل 141 قانون اساسی و مواد 111 و147 لایحه اصلاحی قانون تجارت را نداریم .\\n&quot; +\n                    &quot;د: به خانم / آقای ………………………… احدی از سهامداران یا احدی از مدیران یا وکیل رسمی شرکت وکالت داده می شود که ضمن مراجعه به اداره ثبت شرکت ها نسبت به ثبت صورتجلسه و پرداخت حق الثبت و امضاء ذیل دفاتر ثبت اقدام نماید.\\n&quot; +\n                    &quot;امضاء هیات رئیسه:  رئیس جلسه ……...........…    ناظر جلسه ………………     ناظرجلسه………………\\n&quot; +\n                    &quot;منشی جلسه ........................\\n&quot; +\n                    &quot;امضا اعضای هیئت مدیره : \\n&quot; +\n                    &quot;1 ـ ……………………   2 ـ ……………………   3ـ ……………………    4 ـ  ……………………\\n&quot; +\n                    &quot;امضاء بازرسین: \\t \\t             بازرس اصلی\\t                    بازرس علی البدل:\\n&quot; +\n                    &quot;\\n&quot; +\n                    &quot;\\n&quot; +\n                    &quot;\\n &quot;);\n\n            PdfPTable table = new PdfPTable(1);\n            PdfPCell cell = new PdfPCell(p);\n            PdfPCell cell2 = new PdfPCell(p1);\n\n            cell.setBorder(0);\n            cell2.setBorder(0);\n\n            table.getKeepTogether();\n            cell2.setHorizontalAlignment(Element.ALIGN_JUSTIFIED);\n            cell.setHorizontalAlignment(Element.ALIGN_CENTER);\n            cell.setRunDirection(PdfWriter.RUN_DIRECTION_RTL);\n            cell2.setRunDirection(PdfWriter.RUN_DIRECTION_RTL);\n            cell.setPaddingBottom(20);\n            cell2.setLeading(20f, 0f);\n            table.getKeepTogether();\n            table.addCell(cell);\n            table.addCell(cell2);\n\n            table.getKeepTogether();\n            doc.add(table);\n\n\n        } catch (DocumentException de) {\n            Log.e(&quot;PDFCreator&quot;, &quot;DocumentException:&quot; + de);\n        } catch (IOException e) {\n            Log.e(&quot;PDFCreator&quot;, &quot;ioException:&quot; + e);\n        } finally {\n\n            doc.close();\n\n        }\n\n    }\n</code></pre>\n"},{"tags":["java","kotlin","testing","junit","assertj"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695312395,"post_id":77151593,"comment_id":136010688,"body_markdown":"So just disable `withStrictTypeChecking`?","body":"So just disable <code>withStrictTypeChecking</code>?"},{"owner":{"account_id":13463440,"reputation":1896,"user_id":9714611,"display_name":"Stefano Cordio"},"score":1,"creation_date":1695316255,"post_id":77151593,"comment_id":136011494,"body_markdown":"@Jorn the OP stated that strict type checking should still be performed on the collection elements. Removing `withStrictTypeChecking` does not enforce strict type checking for the elements.","body":"@Jorn the OP stated that strict type checking should still be performed on the collection elements. Removing <code>withStrictTypeChecking</code> does not enforce strict type checking for the elements."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695323819,"post_id":77151593,"comment_id":136012892,"body_markdown":"I don&#39;t see the point. You can&#39;t just compare those using `equals`?","body":"I don&#39;t see the point. You can&#39;t just compare those using <code>equals</code>?"},{"owner":{"account_id":13463440,"reputation":1896,"user_id":9714611,"display_name":"Stefano Cordio"},"score":1,"creation_date":1695325563,"post_id":77151593,"comment_id":136013150,"body_markdown":"The element types might not implement `equals`, hence the usefulness of the recursive comparison.","body":"The element types might not implement <code>equals</code>, hence the usefulness of the recursive comparison."},{"owner":{"account_id":7424463,"reputation":331,"user_id":5647475,"accept_rate":50,"display_name":"mkapiczy"},"score":1,"creation_date":1695326657,"post_id":77151593,"comment_id":136013321,"body_markdown":"The code above is just an example. Let&#39;s say that I simply don&#39;t know the types of the collections for neither actual nor expected but I want to assert on their contents.","body":"The code above is just an example. Let&#39;s say that I simply don&#39;t know the types of the collections for neither actual nor expected but I want to assert on their contents."}],"answers":[{"tags":[],"owner":{"account_id":13463440,"reputation":1896,"user_id":9714611,"display_name":"Stefano Cordio"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695333368,"creation_date":1695328774,"answer_id":77153525,"question_id":77151593,"body_markdown":"Your target could be achieved with standard list assertions and a [`RecursiveComparator`][1]:\r\n\r\n    val listOfA = listOf(TestClassA(&quot;Name&quot;))\r\n    val arrayListOfB = arrayListOf(TestClassB(&quot;Name&quot;))\r\n\r\n    val configuration = RecursiveComparisonConfiguration()\r\n\r\n    configuration.strictTypeChecking(false) // default\r\n\r\n    assertThat(listOfA)\r\n        .usingElementComparator(RecursiveComparator(configuration))\r\n        .isEqualTo(arrayListOfB) // succeeds\r\n\r\n    configuration.strictTypeChecking(true)\r\n\r\n    assertThat(listOfA)\r\n        .usingElementComparator(RecursiveComparator(configuration))\r\n        .isEqualTo(arrayListOfB) // fails\r\n\r\nNot as fluent as one would expect but it&#39;s the best option I see at the moment.\r\n\r\n  [1]: https://www.javadoc.io/doc/org.assertj/assertj-core/latest/org/assertj/core/api/recursive/comparison/RecursiveComparator.html","title":"How to perform AssertJ recursive comparison with strict type checking only on collection elements?","body":"<p>Your target could be achieved with standard list assertions and a <a href=\"https://www.javadoc.io/doc/org.assertj/assertj-core/latest/org/assertj/core/api/recursive/comparison/RecursiveComparator.html\" rel=\"nofollow noreferrer\"><code>RecursiveComparator</code></a>:</p>\n<pre><code>val listOfA = listOf(TestClassA(&quot;Name&quot;))\nval arrayListOfB = arrayListOf(TestClassB(&quot;Name&quot;))\n\nval configuration = RecursiveComparisonConfiguration()\n\nconfiguration.strictTypeChecking(false) // default\n\nassertThat(listOfA)\n    .usingElementComparator(RecursiveComparator(configuration))\n    .isEqualTo(arrayListOfB) // succeeds\n\nconfiguration.strictTypeChecking(true)\n\nassertThat(listOfA)\n    .usingElementComparator(RecursiveComparator(configuration))\n    .isEqualTo(arrayListOfB) // fails\n</code></pre>\n<p>Not as fluent as one would expect but it's the best option I see at the moment.</p>\n"},{"comments":[{"owner":{"account_id":13463440,"reputation":1896,"user_id":9714611,"display_name":"Stefano Cordio"},"score":0,"creation_date":1695387654,"post_id":77157752,"comment_id":136021487,"body_markdown":"If you could share a more complex example at https://github.com/assertj/assertj/issues/new, we&#39;d be happy to look at it.","body":"If you could share a more complex example at <a href=\"https://github.com/assertj/assertj/issues/new\" rel=\"nofollow noreferrer\">github.com/assertj/assertj/issues/new</a>, we&#39;d be happy to look at it."}],"tags":[],"owner":{"account_id":7424463,"reputation":331,"user_id":5647475,"accept_rate":50,"display_name":"mkapiczy"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695386888,"creation_date":1695386888,"answer_id":77157752,"question_id":77151593,"body_markdown":"The response proposed by Stefano works for the given example. However, with more complex types inside the array it was failing. I am not 100% sure why but it seemed like ignoring collection order did not work. \r\n\r\nIn the end I was able to achieve my goal with a custom condition:\r\n\r\n```\r\n    private fun iterablesEqualCondition(recursiveComparisonConfiguration: RecursiveComparisonConfiguration, other: Iterable&lt;*&gt;): Condition&lt;Any&gt; {\r\n        fun condition(actual: Any): Boolean {\r\n            assertThat((actual as Iterable&lt;*&gt;).toList()).usingRecursiveComparison(recursiveComparisonConfiguration).isEqualTo(other.toList())\r\n            return true\r\n        }\r\n        return Condition(::condition, &quot;Iterables are equal condition&quot;)\r\n    }\r\n\r\nassertThat(listOfA).satisfies(iterablesEqualCondition(RecursiveComparisonConfiguration.builder()\r\n            .withStrictTypeChecking(true)\r\n            .withIgnoreCollectionOrder(true).build(), arrayListOfA))\r\n```\r\n ","title":"How to perform AssertJ recursive comparison with strict type checking only on collection elements?","body":"<p>The response proposed by Stefano works for the given example. However, with more complex types inside the array it was failing. I am not 100% sure why but it seemed like ignoring collection order did not work.</p>\n<p>In the end I was able to achieve my goal with a custom condition:</p>\n<pre><code>    private fun iterablesEqualCondition(recursiveComparisonConfiguration: RecursiveComparisonConfiguration, other: Iterable&lt;*&gt;): Condition&lt;Any&gt; {\n        fun condition(actual: Any): Boolean {\n            assertThat((actual as Iterable&lt;*&gt;).toList()).usingRecursiveComparison(recursiveComparisonConfiguration).isEqualTo(other.toList())\n            return true\n        }\n        return Condition(::condition, &quot;Iterables are equal condition&quot;)\n    }\n\nassertThat(listOfA).satisfies(iterablesEqualCondition(RecursiveComparisonConfiguration.builder()\n            .withStrictTypeChecking(true)\n            .withIgnoreCollectionOrder(true).build(), arrayListOfA))\n</code></pre>\n"}],"owner":{"account_id":7424463,"reputation":331,"user_id":5647475,"accept_rate":50,"display_name":"mkapiczy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1695386888,"creation_date":1695309721,"question_id":77151593,"body_markdown":"I would like to compare two collections using AssertJ with strict type checking. However, I only care about the strict types of collection elements not the collection itself.\r\n\r\nFor instace in the case below I would like assertion\r\n`assertThat(listOfA).usingRecursiveComparison().withStrictTypeChecking().isEqualTo(arrayListOfA)` to be true while now it&#39;s false because listOfA is of type `SingletonList` and arrayListOfA is of type `ArrayList`\r\n\r\n    @Test\r\n    fun `test`() {\r\n        val listOfA = listOf(TestClassA(&quot;Name&quot;))\r\n        val arrayListOfA = arrayListOf(TestClassA(&quot;Name&quot;))\r\n        val arrayListOfB = arrayListOf(TestClassB(&quot;Name&quot;))\r\n        assertThat(listOfA).usingRecursiveComparison().isEqualTo(arrayListOfA)\r\n        assertThat(listOfA).usingRecursiveComparison().isEqualTo(arrayListOfB)\r\n        assertThat(listOfA).usingRecursiveComparison().withStrictTypeChecking().isEqualTo(arrayListOfA)\r\n        assertThat(listOfA).usingRecursiveComparison().withStrictTypeChecking().isNotEqualTo(arrayListOfB)\r\n    }\r\n    \r\n    class TestClassA(val name: String)\r\n    \r\n    class TestClassB(val name: String)\r\n\r\n\r\nIs there any way to achieve this?","title":"How to perform AssertJ recursive comparison with strict type checking only on collection elements?","body":"<p>I would like to compare two collections using AssertJ with strict type checking. However, I only care about the strict types of collection elements not the collection itself.</p>\n<p>For instace in the case below I would like assertion\n<code>assertThat(listOfA).usingRecursiveComparison().withStrictTypeChecking().isEqualTo(arrayListOfA)</code> to be true while now it's false because listOfA is of type <code>SingletonList</code> and arrayListOfA is of type <code>ArrayList</code></p>\n<pre><code>@Test\nfun `test`() {\n    val listOfA = listOf(TestClassA(&quot;Name&quot;))\n    val arrayListOfA = arrayListOf(TestClassA(&quot;Name&quot;))\n    val arrayListOfB = arrayListOf(TestClassB(&quot;Name&quot;))\n    assertThat(listOfA).usingRecursiveComparison().isEqualTo(arrayListOfA)\n    assertThat(listOfA).usingRecursiveComparison().isEqualTo(arrayListOfB)\n    assertThat(listOfA).usingRecursiveComparison().withStrictTypeChecking().isEqualTo(arrayListOfA)\n    assertThat(listOfA).usingRecursiveComparison().withStrictTypeChecking().isNotEqualTo(arrayListOfB)\n}\n\nclass TestClassA(val name: String)\n\nclass TestClassB(val name: String)\n</code></pre>\n<p>Is there any way to achieve this?</p>\n"},{"tags":["java","uipath","rpa","uipath-studio"],"answers":[{"tags":[],"owner":{"account_id":1080513,"reputation":3759,"user_id":1077633,"accept_rate":95,"display_name":"kwoxer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695386832,"creation_date":1695386832,"answer_id":77157741,"question_id":77140875,"body_markdown":"Pretty easy. You need to set the proper type.\r\n\r\n1. Click `For Each`\r\n1. Select `TypeArgument`\r\n1. Make sure `JObject` is selected","title":"When I use For Each in UiPath, it shows &quot;Option Strict On disallows late binding&quot;","body":"<p>Pretty easy. You need to set the proper type.</p>\n<ol>\n<li>Click <code>For Each</code></li>\n<li>Select <code>TypeArgument</code></li>\n<li>Make sure <code>JObject</code> is selected</li>\n</ol>\n"}],"owner":{"account_id":26189284,"reputation":17,"user_id":19871382,"display_name":"Pip"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695386832,"creation_date":1695200516,"question_id":77140875,"body_markdown":"[![error image](https://i.stack.imgur.com/nNBbi.png)](https://i.stack.imgur.com/nNBbi.png)\r\n\r\nFirst, I call an API endpoint to get the response, and I convert the response to jsonResult by using Deserialize JSON.\r\n\r\njsonResult is an object, with fields such as &quot;code&quot;, &quot;status&quot;, &quot;data&quot;.\r\njsonResult(&quot;data&quot;) is a user List.\r\n\r\nNow I need to use these users&#39; name one by one.\r\nSo I use For Each on the List: jsonResult(&quot;data&quot;), the item in the List is named currentItem, then the username would be currentItem(&quot;name&quot;), right?\r\nBut it shows error: Option Strict On disallows late binding.\r\n\r\nBut before the &quot;For Each&quot;, if I print jsonResult(&quot;data&quot;)(0)(&quot;name&quot;), there&#39;s no error at all.\r\nAnd if I use &quot;For Each&quot; and then I print the currentItem directly instead of currentItem(&quot;name&quot;), there&#39;s no error either.\r\nHow can I solve this issue? I need to use these users&#39; name one by one for some activities.","title":"When I use For Each in UiPath, it shows &quot;Option Strict On disallows late binding&quot;","body":"<p><a href=\"https://i.stack.imgur.com/nNBbi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nNBbi.png\" alt=\"error image\" /></a></p>\n<p>First, I call an API endpoint to get the response, and I convert the response to jsonResult by using Deserialize JSON.</p>\n<p>jsonResult is an object, with fields such as &quot;code&quot;, &quot;status&quot;, &quot;data&quot;.\njsonResult(&quot;data&quot;) is a user List.</p>\n<p>Now I need to use these users' name one by one.\nSo I use For Each on the List: jsonResult(&quot;data&quot;), the item in the List is named currentItem, then the username would be currentItem(&quot;name&quot;), right?\nBut it shows error: Option Strict On disallows late binding.</p>\n<p>But before the &quot;For Each&quot;, if I print jsonResult(&quot;data&quot;)(0)(&quot;name&quot;), there's no error at all.\nAnd if I use &quot;For Each&quot; and then I print the currentItem directly instead of currentItem(&quot;name&quot;), there's no error either.\nHow can I solve this issue? I need to use these users' name one by one for some activities.</p>\n"},{"tags":["java","apache-poi","xwpf"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695308046,"post_id":77150882,"comment_id":136009695,"body_markdown":"Your method `mergeCellsV` not considers all issues with merging table cells. If cells get merged, cells needs to be removed too. See https://stackoverflow.com/search?tab=relevance&amp;q=user%3a3915431%20xwpftable%20merge&amp;searchOn=3 for some working examples.","body":"Your method <code>mergeCellsV</code> not considers all issues with merging table cells. If cells get merged, cells needs to be removed too. See <a href=\"https://stackoverflow.com/search?tab=relevance&amp;q=user%3a3915431%20xwpftable%20merge&amp;searchOn=3\">stackoverflow.com/&hellip;</a> for some working examples."},{"owner":{"account_id":29373468,"reputation":13,"user_id":22505556,"display_name":"Milos Jelic"},"score":0,"creation_date":1695360369,"post_id":77150882,"comment_id":136016537,"body_markdown":"I tried your solutions with mergeCellVertically method , also adding grid to table but nothing helps, its still make problems when i have multiple merging in same row.","body":"I tried your solutions with mergeCellVertically method , also adding grid to table but nothing helps, its still make problems when i have multiple merging in same row."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695361307,"post_id":77150882,"comment_id":136016626,"body_markdown":"Please provide a [Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example) as my code samples also are. And please tell what Apache POI version used.","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a> as my code samples also are. And please tell what Apache POI version used."},{"owner":{"account_id":29373468,"reputation":13,"user_id":22505556,"display_name":"Milos Jelic"},"score":0,"creation_date":1695362036,"post_id":77150882,"comment_id":136016702,"body_markdown":"Here is code \nhttps://codefile.io/f/96vZGhkeZ4\nVersion is 4.1.1\nThanks in advance","body":"Here is code  <a href=\"https://codefile.io/f/96vZGhkeZ4\" rel=\"nofollow noreferrer\">codefile.io/f/96vZGhkeZ4</a> Version is 4.1.1 Thanks in advance"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695368194,"post_id":77150882,"comment_id":136017676,"body_markdown":"How is this code complete? But see my answer ;-).","body":"How is this code complete? But see my answer ;-)."}],"answers":[{"comments":[{"owner":{"account_id":29373468,"reputation":13,"user_id":22505556,"display_name":"Milos Jelic"},"score":0,"creation_date":1695371173,"post_id":77155663,"comment_id":136018170,"body_markdown":"thanks for your time and effort but it still doesn&#39;t works for me.\nI created this outside project and still getting bad merged cells :/","body":"thanks for your time and effort but it still doesn&#39;t works for me. I created this outside project and still getting bad merged cells :/"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695371664,"post_id":77155663,"comment_id":136018259,"body_markdown":"My code is complete, tested and works for me.","body":"My code is complete, tested and works for me."},{"owner":{"account_id":29373468,"reputation":13,"user_id":22505556,"display_name":"Milos Jelic"},"score":0,"creation_date":1695385682,"post_id":77155663,"comment_id":136021078,"body_markdown":"My mistake its work on MicrosoftOffice Word 2021 but on LibreOffice 7.4.7.2 i got this https://i.imgur.com/JNz0ldE.png","body":"My mistake its work on MicrosoftOffice Word 2021 but on LibreOffice 7.4.7.2 i got this <a href=\"https://i.imgur.com/JNz0ldE.png\" rel=\"nofollow noreferrer\">i.imgur.com/JNz0ldE.png</a>"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695386854,"post_id":77155663,"comment_id":136021306,"body_markdown":"LibreOffice needs a table grid. See my edits.","body":"LibreOffice needs a table grid. See my edits."},{"owner":{"account_id":29373468,"reputation":13,"user_id":22505556,"display_name":"Milos Jelic"},"score":0,"creation_date":1695405994,"post_id":77155663,"comment_id":136025098,"body_markdown":"You are amazing, thanks a lot.","body":"You are amazing, thanks a lot."},{"owner":{"account_id":29373468,"reputation":13,"user_id":22505556,"display_name":"Milos Jelic"},"score":0,"creation_date":1695647539,"post_id":77155663,"comment_id":136048381,"body_markdown":"Hello Alex, I don&#39;t want to open new topic, do you have some recommendation for prevent table to split on 2 pages?","body":"Hello Alex, I don&#39;t want to open new topic, do you have some recommendation for prevent table to split on 2 pages?"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695654279,"post_id":77155663,"comment_id":136049994,"body_markdown":"https://meta.stackoverflow.com/questions/266767/what-is-the-the-best-way-to-ask-follow-up-questions","body":"<a href=\"https://meta.stackoverflow.com/questions/266767/what-is-the-the-best-way-to-ask-follow-up-questions\" title=\"what is the the best way to ask follow up questions\">meta.stackoverflow.com/questions/266767/&hellip;</a>"}],"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695386544,"creation_date":1695368164,"answer_id":77155663,"question_id":77150882,"body_markdown":"The main question while merging table cells, aside the question what merging settings to use as there are multiple possible settings and as there are compatibility issues between different word processing applications, is: What about the cells which get merged? For example if you merge horizontally cell 3 and 4 in a table row having 6 cells, then after that that row only contains 5 cells. And if you then need merging vertically formerly cell 5 of that row with cell 5 of row below, then this will fail, because formerly cell 5 now is cell 4.\r\n\r\nThats why best practice for merging is following:\r\n\r\n - First create the table having all cells and content.\r\n - Then merge cells vertically as needed.\r\n - Then merge cells horizontally as needed.\r\n\r\nFollowing complete code shows this for the example you seems want to create:\r\n\r\n    import java.io.FileOutputStream;\r\n    \r\n    import java.math.BigInteger;\r\n    \r\n    import org.apache.poi.xwpf.usermodel.XWPFDocument;\r\n    import org.apache.poi.xwpf.usermodel.XWPFTable;\r\n    import org.apache.poi.xwpf.usermodel.XWPFTableCell;\r\n    import org.apache.poi.xwpf.usermodel.XWPFTableRow;\r\n    import org.apache.poi.xwpf.usermodel.XWPFParagraph;\r\n    import org.apache.poi.xwpf.usermodel.XWPFRun;\r\n    import org.apache.poi.xwpf.usermodel.ParagraphAlignment;\r\n    \r\n    import org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTcPr;\r\n    import org.openxmlformats.schemas.wordprocessingml.x2006.main.CTVMerge;\r\n    import org.openxmlformats.schemas.wordprocessingml.x2006.main.STMerge;\r\n    \r\n    public class CreateWordTableMergeTest {\r\n        \r\n     static final String FONT_FAMILY = &quot;Calibri&quot;;\r\n     static final int FONT_SIZE = 10;\r\n    \r\n     static void mergeCellVertically(XWPFTable table, int col, int fromRow, int toRow) {\r\n      for(int rowIndex = fromRow; rowIndex &lt;= toRow; rowIndex++) {\r\n       XWPFTableCell cell = table.getRow(rowIndex).getCell(col);\r\n       CTVMerge vmerge = CTVMerge.Factory.newInstance();\r\n       if(rowIndex == fromRow){\r\n        // The first merged cell is set with RESTART merge value\r\n        vmerge.setVal(STMerge.RESTART);\r\n       } else {\r\n        // Cells which join (merge) the first one, are set with CONTINUE\r\n        vmerge.setVal(STMerge.CONTINUE);\r\n        // and the content should be removed\r\n        for (int i = cell.getParagraphs().size(); i &gt; 0; i--) {\r\n         cell.removeParagraph(0);\r\n        }\r\n        cell.addParagraph();\r\n       }\r\n       // Try getting the TcPr. Not simply setting an new one every time.\r\n       CTTcPr tcPr = cell.getCTTc().getTcPr();\r\n       if (tcPr == null) tcPr = cell.getCTTc().addNewTcPr();\r\n       tcPr.setVMerge(vmerge);\r\n      }\r\n     }\r\n     \r\n     //merging horizontally by setting grid span instead of using CTHMerge\r\n     static void mergeCellHorizontally(XWPFTable table, int row, int fromCol, int toCol) {\r\n      XWPFTableCell cell = table.getRow(row).getCell(fromCol);\r\n      // Try getting the TcPr. Not simply setting an new one every time.\r\n      CTTcPr tcPr = cell.getCTTc().getTcPr();\r\n      if (tcPr == null) tcPr = cell.getCTTc().addNewTcPr();\r\n      // The first merged cell has grid span property set\r\n      if (tcPr.isSetGridSpan()) {\r\n       tcPr.getGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\r\n      } else {\r\n       tcPr.addNewGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\r\n      }\r\n      // Cells which join (merge) the first one, must be removed\r\n      for(int colIndex = toCol; colIndex &gt; fromCol; colIndex--) {\r\n       //table.getRow(row).removeCell(colIndex); // use only this for apache poi versions greater than 4.1.1\r\n       table.getRow(row).getCtRow().removeTc(colIndex); // use this for apache poi versions up to 4.1.1\r\n       table.getRow(row).removeCell(colIndex);\r\n      }\r\n     }\r\n     \r\n     static void createFormattedTableCell(XWPFTableCell cell, String text, String fontFamily, int fontSize, ParagraphAlignment align) {\r\n      XWPFParagraph paragraph = cell.getParagraphArray(0);\r\n      if (paragraph == null) {\r\n       paragraph = cell.addParagraph();\r\n      }\r\n      paragraph.setIndentationFirstLine(0);\r\n      paragraph.setIndentationLeft(0);\r\n    \r\n      XWPFRun run = paragraph.createRun();\r\n      run.setFontFamily(fontFamily);\r\n      run.setFontSize(fontSize);\r\n      String[] lines = text.split(&quot;\\n&quot;);\r\n      if (lines.length &gt; 1) {\r\n       run.setText(lines[0], 0);\r\n       for (int i = 1; i &lt; lines.length; i++) {\r\n        XWPFParagraph pnew = cell.addParagraph();\r\n        cell.addParagraph(pnew);\r\n        pnew.setSpacingAfter(0);\r\n        pnew.setSpacingBefore(0);\r\n        XWPFRun run2 = pnew.createRun();\r\n        run2.setText(lines[i], 0);\r\n        run2.setFontFamily(fontFamily);\r\n        run2.setFontSize(fontSize);\r\n        pnew.setAlignment(align);\r\n       }\r\n      } else {\r\n       run.setText(text);\r\n      }\r\n      paragraph.setAlignment(align);\r\n      paragraph.setSpacingBeforeLines(1);\r\n      paragraph.setSpacingAfterLines(1);\r\n      paragraph.setSpacingBefore(1);\r\n      paragraph.setSpacingAfter(1);\r\n    \r\n      cell.setVerticalAlignment(XWPFTableCell.XWPFVertAlign.CENTER);\r\n    \r\n     }\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      XWPFDocument document= new XWPFDocument();\r\n    \r\n      XWPFParagraph paragraph = document.createParagraph();\r\n      XWPFRun run=paragraph.createRun();  \r\n      run.setText(&quot;The table:&quot;);\r\n    \r\n      //create table\r\n      XWPFTable table = document.createTable();\r\n    \r\n      table.setCellMargins(20, 0, 20, 0);\r\n      //styleTable(table, &quot;100%&quot;, ParagraphAlignment.CENTER);\r\n      table.setWidth(&quot;100%&quot;);\r\n      \r\n      //create CTTblGrid for this table with widths of the 7 columns. \r\n      //necessary for Libreoffice/Openoffice to accept the column widths.\r\n      //values are in unit twentieths of a point (1/1440 of an inch)\r\n      //first column = 1 inches width\r\n      table.getCTTbl().addNewTblGrid().addNewGridCol().setW(BigInteger.valueOf(1*1440));\r\n      //other columns (6 in this case) also each 1 inches width\r\n      for (int col = 1 ; col &lt; 7; col++) {\r\n       table.getCTTbl().getTblGrid().addNewGridCol().setW(BigInteger.valueOf(1*1440));\r\n      }\r\n      \r\n      //add table content\r\n      XWPFTableRow tableRow = table.getRow(0);\r\n      int numCells = 7;\r\n      for (int i = 0; i &lt; numCells; i++) {\r\n       XWPFTableCell tableCell = tableRow.getCell(i);\r\n       if (tableCell == null) {\r\n         tableCell = tableRow.addNewTableCell();\r\n         tableCell.setWidth(&quot;16.66%&quot;);\r\n       }\r\n      }\r\n      createFormattedTableCell(tableRow.getCell(0), &quot;PAKOVANJE / UNIT&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.LEFT);\r\n      createFormattedTableCell(tableRow.getCell(2), &quot;DIMENZIJE / DIMENSIONS&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(5), &quot;NETO&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(6), &quot;BRUTO&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      //mergeCellsH(tableRow.getCell(3), tableRow.getCell(5)); //this working fine - may be, but I doubt that\r\n      \r\n      table.createRow();\r\n      tableRow = table.getRow(1);\r\n      numCells = 7;\r\n      for (int i = 0; i &lt; numCells; i++) {\r\n       XWPFTableCell tableCell = tableRow.getCell(i);\r\n       if (tableCell == null) {\r\n        tableCell = tableRow.addNewTableCell();\r\n       }\r\n      }\r\n      createFormattedTableCell(tableRow.getCell(2), &quot;Širina/Width&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(3), &quot;Dubina/Depth&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(4), &quot;Visina/Heigth&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      \r\n      table.createRow();\r\n      tableRow = table.getRow(2);\r\n      numCells = 7;\r\n      for (int i = 0; i &lt; numCells; i++) {\r\n       XWPFTableCell tableCell = tableRow.getCell(i);\r\n       if (tableCell == null) {\r\n        tableCell = tableRow.addNewTableCell();\r\n       }\r\n      }\r\n      createFormattedTableCell(tableRow.getCell(0), &quot;POJEDINAČNO / CONSUMER&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.LEFT);\r\n      createFormattedTableCell(tableRow.getCell(2), &quot;NAZIV AMBALAŽA&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(5), &quot;14&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(6), &quot;15&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n    \r\n      table.createRow();\r\n      tableRow = table.getRow(3);\r\n      numCells = 7;\r\n      for (int i = 0; i &lt; numCells; i++) {\r\n       XWPFTableCell tableCell = tableRow.getCell(i);\r\n       if (tableCell == null) {\r\n        tableCell = tableRow.addNewTableCell();\r\n       }\r\n      }\r\n      createFormattedTableCell(tableRow.getCell(2), &quot;11&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(3), &quot;12&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(4), &quot;13&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n    \r\n      //merging cells\r\n      mergeCellVertically(table, 0, 0, 1);\r\n      mergeCellVertically(table, 1, 0, 1);\r\n      mergeCellVertically(table, 5, 0, 1);\r\n      mergeCellVertically(table, 6, 0, 1);\r\n      \r\n      mergeCellVertically(table, 0, 2, 3);\r\n      mergeCellVertically(table, 1, 2, 3);\r\n      mergeCellVertically(table, 5, 2, 3);\r\n      mergeCellVertically(table, 6, 2, 3);\r\n      \r\n      mergeCellHorizontally(table, 0, 2, 4);\r\n      mergeCellHorizontally(table, 2, 2, 4);\r\n                \r\n      paragraph = document.createParagraph();\r\n    \r\n      FileOutputStream out = new FileOutputStream(&quot;./create_table.docx&quot;); \r\n      document.write(out);\r\n      out.close();\r\n      document.close();\r\n     }\r\n    }\r\n\r\nAbove code is tested using Apache POI version 4.1.1. It produces:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/guDpe.png\r\n  [2]: https://i.stack.imgur.com/5kEvj.png","title":"Multiple vertical merge in XWPFTable Apache POI","body":"<p>The main question while merging table cells, aside the question what merging settings to use as there are multiple possible settings and as there are compatibility issues between different word processing applications, is: What about the cells which get merged? For example if you merge horizontally cell 3 and 4 in a table row having 6 cells, then after that that row only contains 5 cells. And if you then need merging vertically formerly cell 5 of that row with cell 5 of row below, then this will fail, because formerly cell 5 now is cell 4.</p>\n<p>Thats why best practice for merging is following:</p>\n<ul>\n<li>First create the table having all cells and content.</li>\n<li>Then merge cells vertically as needed.</li>\n<li>Then merge cells horizontally as needed.</li>\n</ul>\n<p>Following complete code shows this for the example you seems want to create:</p>\n<pre><code>import java.io.FileOutputStream;\n\nimport java.math.BigInteger;\n\nimport org.apache.poi.xwpf.usermodel.XWPFDocument;\nimport org.apache.poi.xwpf.usermodel.XWPFTable;\nimport org.apache.poi.xwpf.usermodel.XWPFTableCell;\nimport org.apache.poi.xwpf.usermodel.XWPFTableRow;\nimport org.apache.poi.xwpf.usermodel.XWPFParagraph;\nimport org.apache.poi.xwpf.usermodel.XWPFRun;\nimport org.apache.poi.xwpf.usermodel.ParagraphAlignment;\n\nimport org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTcPr;\nimport org.openxmlformats.schemas.wordprocessingml.x2006.main.CTVMerge;\nimport org.openxmlformats.schemas.wordprocessingml.x2006.main.STMerge;\n\npublic class CreateWordTableMergeTest {\n    \n static final String FONT_FAMILY = &quot;Calibri&quot;;\n static final int FONT_SIZE = 10;\n\n static void mergeCellVertically(XWPFTable table, int col, int fromRow, int toRow) {\n  for(int rowIndex = fromRow; rowIndex &lt;= toRow; rowIndex++) {\n   XWPFTableCell cell = table.getRow(rowIndex).getCell(col);\n   CTVMerge vmerge = CTVMerge.Factory.newInstance();\n   if(rowIndex == fromRow){\n    // The first merged cell is set with RESTART merge value\n    vmerge.setVal(STMerge.RESTART);\n   } else {\n    // Cells which join (merge) the first one, are set with CONTINUE\n    vmerge.setVal(STMerge.CONTINUE);\n    // and the content should be removed\n    for (int i = cell.getParagraphs().size(); i &gt; 0; i--) {\n     cell.removeParagraph(0);\n    }\n    cell.addParagraph();\n   }\n   // Try getting the TcPr. Not simply setting an new one every time.\n   CTTcPr tcPr = cell.getCTTc().getTcPr();\n   if (tcPr == null) tcPr = cell.getCTTc().addNewTcPr();\n   tcPr.setVMerge(vmerge);\n  }\n }\n \n //merging horizontally by setting grid span instead of using CTHMerge\n static void mergeCellHorizontally(XWPFTable table, int row, int fromCol, int toCol) {\n  XWPFTableCell cell = table.getRow(row).getCell(fromCol);\n  // Try getting the TcPr. Not simply setting an new one every time.\n  CTTcPr tcPr = cell.getCTTc().getTcPr();\n  if (tcPr == null) tcPr = cell.getCTTc().addNewTcPr();\n  // The first merged cell has grid span property set\n  if (tcPr.isSetGridSpan()) {\n   tcPr.getGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\n  } else {\n   tcPr.addNewGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\n  }\n  // Cells which join (merge) the first one, must be removed\n  for(int colIndex = toCol; colIndex &gt; fromCol; colIndex--) {\n   //table.getRow(row).removeCell(colIndex); // use only this for apache poi versions greater than 4.1.1\n   table.getRow(row).getCtRow().removeTc(colIndex); // use this for apache poi versions up to 4.1.1\n   table.getRow(row).removeCell(colIndex);\n  }\n }\n \n static void createFormattedTableCell(XWPFTableCell cell, String text, String fontFamily, int fontSize, ParagraphAlignment align) {\n  XWPFParagraph paragraph = cell.getParagraphArray(0);\n  if (paragraph == null) {\n   paragraph = cell.addParagraph();\n  }\n  paragraph.setIndentationFirstLine(0);\n  paragraph.setIndentationLeft(0);\n\n  XWPFRun run = paragraph.createRun();\n  run.setFontFamily(fontFamily);\n  run.setFontSize(fontSize);\n  String[] lines = text.split(&quot;\\n&quot;);\n  if (lines.length &gt; 1) {\n   run.setText(lines[0], 0);\n   for (int i = 1; i &lt; lines.length; i++) {\n    XWPFParagraph pnew = cell.addParagraph();\n    cell.addParagraph(pnew);\n    pnew.setSpacingAfter(0);\n    pnew.setSpacingBefore(0);\n    XWPFRun run2 = pnew.createRun();\n    run2.setText(lines[i], 0);\n    run2.setFontFamily(fontFamily);\n    run2.setFontSize(fontSize);\n    pnew.setAlignment(align);\n   }\n  } else {\n   run.setText(text);\n  }\n  paragraph.setAlignment(align);\n  paragraph.setSpacingBeforeLines(1);\n  paragraph.setSpacingAfterLines(1);\n  paragraph.setSpacingBefore(1);\n  paragraph.setSpacingAfter(1);\n\n  cell.setVerticalAlignment(XWPFTableCell.XWPFVertAlign.CENTER);\n\n }\n\n public static void main(String[] args) throws Exception {\n\n  XWPFDocument document= new XWPFDocument();\n\n  XWPFParagraph paragraph = document.createParagraph();\n  XWPFRun run=paragraph.createRun();  \n  run.setText(&quot;The table:&quot;);\n\n  //create table\n  XWPFTable table = document.createTable();\n\n  table.setCellMargins(20, 0, 20, 0);\n  //styleTable(table, &quot;100%&quot;, ParagraphAlignment.CENTER);\n  table.setWidth(&quot;100%&quot;);\n  \n  //create CTTblGrid for this table with widths of the 7 columns. \n  //necessary for Libreoffice/Openoffice to accept the column widths.\n  //values are in unit twentieths of a point (1/1440 of an inch)\n  //first column = 1 inches width\n  table.getCTTbl().addNewTblGrid().addNewGridCol().setW(BigInteger.valueOf(1*1440));\n  //other columns (6 in this case) also each 1 inches width\n  for (int col = 1 ; col &lt; 7; col++) {\n   table.getCTTbl().getTblGrid().addNewGridCol().setW(BigInteger.valueOf(1*1440));\n  }\n  \n  //add table content\n  XWPFTableRow tableRow = table.getRow(0);\n  int numCells = 7;\n  for (int i = 0; i &lt; numCells; i++) {\n   XWPFTableCell tableCell = tableRow.getCell(i);\n   if (tableCell == null) {\n     tableCell = tableRow.addNewTableCell();\n     tableCell.setWidth(&quot;16.66%&quot;);\n   }\n  }\n  createFormattedTableCell(tableRow.getCell(0), &quot;PAKOVANJE / UNIT&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.LEFT);\n  createFormattedTableCell(tableRow.getCell(2), &quot;DIMENZIJE / DIMENSIONS&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(5), &quot;NETO&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(6), &quot;BRUTO&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  //mergeCellsH(tableRow.getCell(3), tableRow.getCell(5)); //this working fine - may be, but I doubt that\n  \n  table.createRow();\n  tableRow = table.getRow(1);\n  numCells = 7;\n  for (int i = 0; i &lt; numCells; i++) {\n   XWPFTableCell tableCell = tableRow.getCell(i);\n   if (tableCell == null) {\n    tableCell = tableRow.addNewTableCell();\n   }\n  }\n  createFormattedTableCell(tableRow.getCell(2), &quot;Širina/Width&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(3), &quot;Dubina/Depth&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(4), &quot;Visina/Heigth&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  \n  table.createRow();\n  tableRow = table.getRow(2);\n  numCells = 7;\n  for (int i = 0; i &lt; numCells; i++) {\n   XWPFTableCell tableCell = tableRow.getCell(i);\n   if (tableCell == null) {\n    tableCell = tableRow.addNewTableCell();\n   }\n  }\n  createFormattedTableCell(tableRow.getCell(0), &quot;POJEDINAČNO / CONSUMER&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.LEFT);\n  createFormattedTableCell(tableRow.getCell(2), &quot;NAZIV AMBALAŽA&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(5), &quot;14&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(6), &quot;15&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n\n  table.createRow();\n  tableRow = table.getRow(3);\n  numCells = 7;\n  for (int i = 0; i &lt; numCells; i++) {\n   XWPFTableCell tableCell = tableRow.getCell(i);\n   if (tableCell == null) {\n    tableCell = tableRow.addNewTableCell();\n   }\n  }\n  createFormattedTableCell(tableRow.getCell(2), &quot;11&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(3), &quot;12&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(4), &quot;13&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n\n  //merging cells\n  mergeCellVertically(table, 0, 0, 1);\n  mergeCellVertically(table, 1, 0, 1);\n  mergeCellVertically(table, 5, 0, 1);\n  mergeCellVertically(table, 6, 0, 1);\n  \n  mergeCellVertically(table, 0, 2, 3);\n  mergeCellVertically(table, 1, 2, 3);\n  mergeCellVertically(table, 5, 2, 3);\n  mergeCellVertically(table, 6, 2, 3);\n  \n  mergeCellHorizontally(table, 0, 2, 4);\n  mergeCellHorizontally(table, 2, 2, 4);\n            \n  paragraph = document.createParagraph();\n\n  FileOutputStream out = new FileOutputStream(&quot;./create_table.docx&quot;); \n  document.write(out);\n  out.close();\n  document.close();\n }\n}\n</code></pre>\n<p>Above code is tested using Apache POI version 4.1.1. It produces:</p>\n<p><a href=\"https://i.stack.imgur.com/guDpe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/guDpe.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/5kEvj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5kEvj.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29373468,"reputation":13,"user_id":22505556,"display_name":"Milos Jelic"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77155663,"answer_count":1,"score":0,"last_activity_date":1695386544,"creation_date":1695304052,"question_id":77150882,"body_markdown":"I have problem with vertical merging cells if there is multiple merging in same row.\r\nFor example :\r\nI want to merge row(0).getCell(0) with row(1).getCell(0) and \r\nrow(0).getCell(1) with row(1).getCell(1) its merge only second.\r\n\r\n\r\nMethod which I use \r\n```\r\n private void mergeCellsV(XWPFTableCell cellStart, XWPFTableCell cellFinish) {\r\n    cellStart.getCTTc().addNewTcPr().addNewVMerge().setVal(STMerge.RESTART);\r\n    cellFinish.getCTTc().addNewTcPr().addNewVMerge().setVal(STMerge.CONTINUE);\r\n  }\r\nXWPFTableRow row0 = tablePK.getRow(0);\r\nXWPFTableRow row1 = tablePK.getRow(1);\r\nXWPFTableRow row2 = tablePK.getRow(2);\r\nXWPFTableRow row3 = tablePK.getRow(3);\r\n\r\nmergeCellsV(row0.getCell(0), row1.getCell(0));\r\nmergeCellsV(row0.getCell(1), row1.getCell(1));\r\nmergeCellsV(row0.getCell(5), row1.getCell(5));\r\nmergeCellsV(row0.getCell(6), row1.getCell(6));\r\n\r\n\r\nmergeCellsV(row2.getCell(0), row3.getCell(0));\r\nmergeCellsV(row2.getCell(1), row3.getCell(1));\r\nmergeCellsV(row2.getCell(5), row3.getCell(5));\r\nmergeCellsV(row2.getCell(6), row3.getCell(6));\r\n\r\n```\r\nResult : \r\n\r\nadding just one merge and works fine mergeCellsV(row2.getCell(6), row3.getCell(6));\r\n[![adding just one merge and works fine][1]][1]\r\n\r\nadd all merges\r\n[![add all merges][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/u8JVx.png\r\n  [2]: https://i.stack.imgur.com/YTmvr.png\r\n\r\n","title":"Multiple vertical merge in XWPFTable Apache POI","body":"<p>I have problem with vertical merging cells if there is multiple merging in same row.\nFor example :\nI want to merge row(0).getCell(0) with row(1).getCell(0) and\nrow(0).getCell(1) with row(1).getCell(1) its merge only second.</p>\n<p>Method which I use</p>\n<pre><code> private void mergeCellsV(XWPFTableCell cellStart, XWPFTableCell cellFinish) {\n    cellStart.getCTTc().addNewTcPr().addNewVMerge().setVal(STMerge.RESTART);\n    cellFinish.getCTTc().addNewTcPr().addNewVMerge().setVal(STMerge.CONTINUE);\n  }\nXWPFTableRow row0 = tablePK.getRow(0);\nXWPFTableRow row1 = tablePK.getRow(1);\nXWPFTableRow row2 = tablePK.getRow(2);\nXWPFTableRow row3 = tablePK.getRow(3);\n\nmergeCellsV(row0.getCell(0), row1.getCell(0));\nmergeCellsV(row0.getCell(1), row1.getCell(1));\nmergeCellsV(row0.getCell(5), row1.getCell(5));\nmergeCellsV(row0.getCell(6), row1.getCell(6));\n\n\nmergeCellsV(row2.getCell(0), row3.getCell(0));\nmergeCellsV(row2.getCell(1), row3.getCell(1));\nmergeCellsV(row2.getCell(5), row3.getCell(5));\nmergeCellsV(row2.getCell(6), row3.getCell(6));\n\n</code></pre>\n<p>Result :</p>\n<p>adding just one merge and works fine mergeCellsV(row2.getCell(6), row3.getCell(6));\n<a href=\"https://i.stack.imgur.com/u8JVx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u8JVx.png\" alt=\"adding just one merge and works fine\" /></a></p>\n<p>add all merges\n<a href=\"https://i.stack.imgur.com/YTmvr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YTmvr.png\" alt=\"add all merges\" /></a></p>\n"},{"tags":["java","performance","hibernate"],"answers":[{"comments":[{"owner":{"account_id":16987,"reputation":6240,"user_id":37575,"accept_rate":95,"display_name":"Sam"},"score":0,"creation_date":1236207949,"post_id":609430,"comment_id":425708,"body_markdown":"Update? I seem to be getting lots of updates on entities that are immutable.","body":"Update? I seem to be getting lots of updates on entities that are immutable."},{"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"score":0,"creation_date":1560417072,"post_id":609430,"comment_id":99732084,"body_markdown":"@AlexZuroff I get the opposite, I get a value for loadCount but fetchCount is always zero, how that can be it even occurs if start with empty database so nothing can be retrieved form cache without being retrived form datasource first.","body":"@AlexZuroff I get the opposite, I get a value for loadCount but fetchCount is always zero, how that can be it even occurs if start with empty database so nothing can be retrieved form cache without being retrived form datasource first."}],"tags":[],"owner":{"account_id":5447,"reputation":582,"user_id":8770,"display_name":"Alex Zuroff"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1236147945,"creation_date":1236147945,"answer_id":609430,"question_id":609351,"body_markdown":"Working backward through the code, the fetch counter only gets incremented when the entity is retrieved from the datasource (as opposed to any caches) -\r\n\r\n    \tprotected Object loadFromDatasource(\r\n\t\t\tfinal LoadEvent event,\r\n\t\t\tfinal EntityPersister persister,\r\n\t\t\tfinal EntityKey keyToLoad,\r\n\t\t\tfinal LoadEventListener.LoadType options) {\r\n\t\tfinal SessionImplementor source = event.getSession();\r\n\t\tObject entity = persister.load(\r\n\t\t\t\tevent.getEntityId(),\r\n\t\t\t\tevent.getInstanceToLoad(),\r\n\t\t\t\tevent.getLockMode(),\r\n\t\t\t\tsource\r\n\t\t);\r\n\r\n\t\tif ( event.isAssociationFetch() &amp;&amp; source.getFactory().getStatistics().isStatisticsEnabled() ) {\r\n\t\t\tsource.getFactory().getStatisticsImplementor().fetchEntity( event.getEntityClassName() );\r\n\t\t}\r\n\r\n\t\treturn entity;\r\n\t}\r\n\r\n\r\nThe load counter was called from too many places to track them all down, but it looks like it gets incremented any time the entity gets loaded, whether from the datasource or the caches.","title":"In hibernate statistics whats the difference between load and fetch","body":"<p>Working backward through the code, the fetch counter only gets incremented when the entity is retrieved from the datasource (as opposed to any caches) -</p>\n\n<pre><code>    protected Object loadFromDatasource(\n        final LoadEvent event,\n        final EntityPersister persister,\n        final EntityKey keyToLoad,\n        final LoadEventListener.LoadType options) {\n    final SessionImplementor source = event.getSession();\n    Object entity = persister.load(\n            event.getEntityId(),\n            event.getInstanceToLoad(),\n            event.getLockMode(),\n            source\n    );\n\n    if ( event.isAssociationFetch() &amp;&amp; source.getFactory().getStatistics().isStatisticsEnabled() ) {\n        source.getFactory().getStatisticsImplementor().fetchEntity( event.getEntityClassName() );\n    }\n\n    return entity;\n}\n</code></pre>\n\n<p>The load counter was called from too many places to track them all down, but it looks like it gets incremented any time the entity gets loaded, whether from the datasource or the caches.</p>\n"},{"tags":[],"owner":{"account_id":22254755,"reputation":21,"user_id":16487091,"display_name":"qdo_ln"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1695386136,"creation_date":1626776227,"answer_id":68453193,"question_id":609351,"body_markdown":"https://vladmihalcea.com/hibernate-statistics/\r\nThis article contains explicit difference between fetch and load counts:\r\n\r\n&gt; long **getEntityLoadCount()** It gives you the total number of entities\r\n&gt; that were loaded (**including the one fetched from the first or\r\n&gt; second-level cache or the database**) by the current\r\n&gt; EntityManagerFactory or SessionFactory.\r\n&gt; \r\n&gt;long **getEntityFetchCount()** It\r\n&gt; gives you the total number of entities that were fetched **from the\r\n&gt; database** by the current EntityManagerFactory or SessionFactory.\r\n\r\n","title":"In hibernate statistics whats the difference between load and fetch","body":"<p><a href=\"https://vladmihalcea.com/hibernate-statistics/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/hibernate-statistics/</a>\nThis article contains explicit difference between fetch and load counts:</p>\n<blockquote>\n<p>long <strong>getEntityLoadCount()</strong> It gives you the total number of entities\nthat were loaded (<strong>including the one fetched from the first or\nsecond-level cache or the database</strong>) by the current\nEntityManagerFactory or SessionFactory.</p>\n<p>long <strong>getEntityFetchCount()</strong> It\ngives you the total number of entities that were fetched <strong>from the\ndatabase</strong> by the current EntityManagerFactory or SessionFactory.</p>\n</blockquote>\n"}],"owner":{"account_id":16987,"reputation":6240,"user_id":37575,"accept_rate":95,"display_name":"Sam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3085,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":609430,"answer_count":2,"score":11,"last_activity_date":1695386136,"creation_date":1236145254,"question_id":609351,"body_markdown":"Im mainly looking at the EntityStatics (http://www.hibernate.org/hib_docs/v3/api/org/hibernate/stat/EntityStatistics.html).  I can see a lot of fetch, loads and updates and i cant find anywhere that says what the difference between them are.","title":"In hibernate statistics whats the difference between load and fetch","body":"<p>Im mainly looking at the EntityStatics (<a href=\"http://www.hibernate.org/hib_docs/v3/api/org/hibernate/stat/EntityStatistics.html\" rel=\"noreferrer\">http://www.hibernate.org/hib_docs/v3/api/org/hibernate/stat/EntityStatistics.html</a>).  I can see a lot of fetch, loads and updates and i cant find anywhere that says what the difference between them are.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":2488135,"reputation":1051,"user_id":2166177,"accept_rate":67,"display_name":"steve"},"score":0,"creation_date":1701280465,"post_id":77149711,"comment_id":136757297,"body_markdown":"I think the issue is that Size is a platform class and therefore is a fake implementation when context is not a device; in a unit test.","body":"I think the issue is that Size is a platform class and therefore is a fake implementation when context is not a device; in a unit test."}],"owner":{"account_id":2488135,"reputation":1051,"user_id":2166177,"accept_rate":67,"display_name":"steve"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695385777,"creation_date":1695294847,"question_id":77149711,"body_markdown":"I created a `android.util.Size`, but both `getWidth()` and `getHeight()` of the object return 0. Why is that? I expect the value from the getters to be the value I pass to the ctor.\r\n\r\n    @Test\r\n    public void testsize() {\r\n        Size size = new Size(11,22);\r\n        assertThat(size.getWidth(), is(11));\r\n        assertThat(size.getHeight(), is(22));\r\n    }\r\n\r\n`Junit` output:\r\n\r\n&gt; Expected: is &lt;11&gt;\r\n&gt;      but: was &lt;0&gt;\r\n\r\nDebugger says the object value (toString?) is &quot;null&quot; and when drill in: &quot;Class has no fields&quot;.\r\n\r\n`System.out.println` outputs &quot;0&quot; as well.\r\n\r\nWorking with `Android` API 30.","title":"How to use android.util.Size so getters report non-zero?","body":"<p>I created a <code>android.util.Size</code>, but both <code>getWidth()</code> and <code>getHeight()</code> of the object return 0. Why is that? I expect the value from the getters to be the value I pass to the ctor.</p>\n<pre><code>@Test\npublic void testsize() {\n    Size size = new Size(11,22);\n    assertThat(size.getWidth(), is(11));\n    assertThat(size.getHeight(), is(22));\n}\n</code></pre>\n<p><code>Junit</code> output:</p>\n<blockquote>\n<p>Expected: is &lt;11&gt;\nbut: was &lt;0&gt;</p>\n</blockquote>\n<p>Debugger says the object value (toString?) is &quot;null&quot; and when drill in: &quot;Class has no fields&quot;.</p>\n<p><code>System.out.println</code> outputs &quot;0&quot; as well.</p>\n<p>Working with <code>Android</code> API 30.</p>\n"},{"tags":["java","android","permissions"],"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1583189655,"post_id":60495944,"comment_id":107025395,"body_markdown":"Do not forget to add detail such as how the code fails / error description and android version.","body":"Do not forget to add detail such as how the code fails / error description and android version."}],"answers":[{"tags":[],"owner":{"account_id":16447171,"reputation":81,"user_id":11881626,"display_name":"Harel Brodai"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1584460163,"creation_date":1583339709,"answer_id":60530731,"question_id":60495944,"body_markdown":"Resolved by adding this permission:\r\n\r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.WRITE_SETTINGS&quot;\r\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\r\n```","title":"Android Change System Settings permission is not accessible","body":"<p>Resolved by adding this permission:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.WRITE_SETTINGS\"\n        tools:ignore=\"ProtectedPermissions\" /&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":27627442,"reputation":31,"user_id":21087148,"display_name":"ilaiyaraja MCA"},"score":0,"creation_date":1695385785,"post_id":77157617,"comment_id":136021101,"body_markdown":"&lt;uses-permission android:name=&quot;android.permission.WRITE_SETTINGS&quot;\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt; it&#39;s will work 100% just try it","body":"&lt;uses-permission android:name=&quot;android.permission.WRITE_SETTINGS&quot;         tools:ignore=&quot;ProtectedPermissions&quot; /&gt; it&#39;s will work 100% just try it"}],"tags":[],"owner":{"account_id":27627442,"reputation":31,"user_id":21087148,"display_name":"ilaiyaraja MCA"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695385744,"creation_date":1695385744,"answer_id":77157617,"question_id":60495944,"body_markdown":"**Just add this line on your manifest file it&#39;s will work 100%**\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_SETTINGS&quot;\r\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\r\n\r\n**More info**\r\n[Follow my youtube channel][1]\r\n\r\n\r\n  [1]: https://www.youtube.com/c/Rajmeetamil","title":"Android Change System Settings permission is not accessible","body":"<p><strong>Just add this line on your manifest file it's will work 100%</strong></p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.WRITE_SETTINGS&quot;\n    tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\n</code></pre>\n<p><strong>More info</strong>\n<a href=\"https://www.youtube.com/c/Rajmeetamil\" rel=\"nofollow noreferrer\">Follow my youtube channel</a></p>\n"}],"owner":{"account_id":16447171,"reputation":81,"user_id":11881626,"display_name":"Harel Brodai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2377,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1695385744,"creation_date":1583179869,"question_id":60495944,"body_markdown":"The code below should allow access (permission / disable) to Change System Setting as below.\r\nBut it doesn&#39;t work - the switch can&#39;t be turned to on.\r\nMy android version is 9.\r\nWhat&#39;s wrong?\r\n\r\nMain Activity:\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        Button btn = (Button) findViewById(R.id.btn);\r\n        btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                boolean enabled = true;\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !android.provider.Settings.System.canWrite(MainActivity.this)) {\r\n                    Intent intent = new Intent(android.provider.Settings.ACTION_MANAGE_WRITE_SETTINGS);\r\n                    intent.setData(Uri.parse(&quot;package:&quot; + getApplicationContext().getPackageName()));\r\n                    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                    startActivity(intent);\r\n                }\r\n                Settings.System.putInt(getApplicationContext().getContentResolver(), Settings.System.ACCELEROMETER_ROTATION, 1);\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\nManifest:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.example.screenrotation&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACTION_MANAGE_WRITE_SETTINGS &quot;/&gt;\r\n    \r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/AppTheme&quot;&gt;\r\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```","title":"Android Change System Settings permission is not accessible","body":"<p>The code below should allow access (permission / disable) to Change System Setting as below.\nBut it doesn't work - the switch can't be turned to on.\nMy android version is 9.\nWhat's wrong?</p>\n\n<p>Main Activity:</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        Button btn = (Button) findViewById(R.id.btn);\n        btn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                boolean enabled = true;\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !android.provider.Settings.System.canWrite(MainActivity.this)) {\n                    Intent intent = new Intent(android.provider.Settings.ACTION_MANAGE_WRITE_SETTINGS);\n                    intent.setData(Uri.parse(\"package:\" + getApplicationContext().getPackageName()));\n                    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n                    startActivity(intent);\n                }\n                Settings.System.putInt(getApplicationContext().getContentResolver(), Settings.System.ACCELEROMETER_ROTATION, 1);\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>Manifest:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.example.screenrotation\"&gt;\n\n    &lt;uses-permission android:name=\"android.permission.ACTION_MANAGE_WRITE_SETTINGS \"/&gt;\n\n    &lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\"&gt;\n        &lt;activity android:name=\".MainActivity\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","function"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695374519,"post_id":77156345,"comment_id":136018812,"body_markdown":"Did you forget an `else` before the second `if`?","body":"Did you forget an <code>else</code> before the second <code>if</code>?"},{"owner":{"account_id":251706,"reputation":5323,"user_id":529282,"display_name":"Martheen"},"score":0,"creation_date":1695374700,"post_id":77156345,"comment_id":136018852,"body_markdown":"Your IDE has a format/prettify function, you might want to try that to see how your if &amp; else are actually set up.","body":"Your IDE has a format/prettify function, you might want to try that to see how your if &amp; else are actually set up."},{"owner":{"account_id":28479754,"reputation":1,"user_id":21793881,"display_name":"Justin Hahn"},"score":0,"creation_date":1695375684,"post_id":77156345,"comment_id":136019100,"body_markdown":"@Martheen my ide(eclipse) has a formatting function, but it did not effectively change my code).\n  I had already thought of that, but unfortunately that doesn&#39;t help either. \nWhat still puzzles me is that the function is executed correctly as soon as I replace the conn.isvalid.","body":"@Martheen my ide(eclipse) has a formatting function, but it did not effectively change my code).   I had already thought of that, but unfortunately that doesn&#39;t help either.  What still puzzles me is that the function is executed correctly as soon as I replace the conn.isvalid."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1695377308,"post_id":77156345,"comment_id":136019437,"body_markdown":"Instead of saying “works” and “does not work” please say exactly what happens (paste in exception messages and stack traces if you have them) and what you wanted to happen instead.","body":"Instead of saying “works” and “does not work” please say exactly what happens (paste in exception messages and stack traces if you have them) and what you wanted to happen instead."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1695377414,"post_id":77156345,"comment_id":136019465,"body_markdown":"Also, please show us exactly what `Jdbc_mysql_connection.connecttodb(null)` does. My guess is that it’s returning `null`.","body":"Also, please show us exactly what <code>Jdbc_mysql_connection.connecttodb(null)</code> does. My guess is that it’s returning <code>null</code>."}],"answers":[{"tags":[],"owner":{"account_id":2184023,"reputation":464,"user_id":1932862,"display_name":"Ketan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695385559,"creation_date":1695377293,"answer_id":77156688,"question_id":77156345,"body_markdown":"If you have multiple `if` statements they will always be called. However, whether the body of the statement will be executed or not depends on the condition. \r\n\r\nIf you do not wish to execute the remaining if statements you have to look into [guard condition][1]\r\n\r\n\r\n  [1]: https://refactoring.guru/replace-nested-conditional-with-guard-clauses","title":"java only executes the second if statement in a function but not the first one if i use the conn.isValid function","body":"<p>If you have multiple <code>if</code> statements they will always be called. However, whether the body of the statement will be executed or not depends on the condition.</p>\n<p>If you do not wish to execute the remaining if statements you have to look into <a href=\"https://refactoring.guru/replace-nested-conditional-with-guard-clauses\" rel=\"nofollow noreferrer\">guard condition</a></p>\n"}],"owner":{"account_id":28479754,"reputation":1,"user_id":21793881,"display_name":"Justin Hahn"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1695379975,"accepted_answer_id":77156688,"answer_count":1,"score":-3,"last_activity_date":1695385559,"creation_date":1695374478,"question_id":77156345,"body_markdown":"I have a Java function that is supposed to check the connection to the database. The problem is that when I call this function, the second if statment is always called, the first one is effectively never called.\r\n\r\n```\r\n\t\tpublic static void CheckConnection() {\r\n\t\t    if (conn == null) {\r\n\t\t        conn = Jdbc_mysql_connection.connecttodb(null);\r\n\t\t    } if (conn.isValid(10)) {\r\n\t\t        System.out.println(&quot;Datenbankverbindung besteht noch&quot;);\r\n\t\t    } else {\r\n\t\t        conn = Jdbc_mysql_connection.connecttodb(null);\r\n\t\t    }\r\n\t\t}\r\n```\r\n\r\nif I replace the conn.isValid(10) with a conn == null both are executed, but I can&#39;t imagine that the conn.isValid function causes the function to no longer be executed correctly.\r\n\r\nI have tried to correct the formatting, but it seems to be correct.\r\nWith else it does not work either \r\n\r\n```\r\n\tpublic static void CheckConnection()\r\n\t{\r\n\t\tif (conn == null)\r\n\t\t{\r\n\t\t\tconn = Jdbc_mysql_connection.connecttodb(null);\r\n\t\t}\r\n\t\telse {\r\n\t\tif (conn.isValid(10))\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;Datenbankverbindung besteht noch&quot;);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tconn = Jdbc_mysql_connection.connecttodb(null);\r\n\t\t}}\r\n\t}\r\n```\r\n\r\nIt only works when i write it like this :\r\n``` \r\n\tpublic static void CheckConnection()\r\n\t{\r\n\t\tif (conn == null)\r\n\t\t{\r\n\t\t\tconn = Jdbc_mysql_connection.connecttodb(null);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tif (conn.isValid(10))\r\n\t\t\t\t{\r\n\t\t\t\t\tSystem.out.println(&quot;Datenbankverbindung besteht noch&quot;);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tconn = Jdbc_mysql_connection.connecttodb(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (SQLException e)\r\n\t\t\t{\r\n\t\t\t\tSystem.err.println(&quot;Fehler beim &#220;berpr&#252;fen der Datenbankverbindung: &quot; + e.getMessage());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n```","title":"java only executes the second if statement in a function but not the first one if i use the conn.isValid function","body":"<p>I have a Java function that is supposed to check the connection to the database. The problem is that when I call this function, the second if statment is always called, the first one is effectively never called.</p>\n<pre><code>        public static void CheckConnection() {\n            if (conn == null) {\n                conn = Jdbc_mysql_connection.connecttodb(null);\n            } if (conn.isValid(10)) {\n                System.out.println(&quot;Datenbankverbindung besteht noch&quot;);\n            } else {\n                conn = Jdbc_mysql_connection.connecttodb(null);\n            }\n        }\n</code></pre>\n<p>if I replace the conn.isValid(10) with a conn == null both are executed, but I can't imagine that the conn.isValid function causes the function to no longer be executed correctly.</p>\n<p>I have tried to correct the formatting, but it seems to be correct.\nWith else it does not work either</p>\n<pre><code>    public static void CheckConnection()\n    {\n        if (conn == null)\n        {\n            conn = Jdbc_mysql_connection.connecttodb(null);\n        }\n        else {\n        if (conn.isValid(10))\n        {\n            System.out.println(&quot;Datenbankverbindung besteht noch&quot;);\n        }\n        else\n        {\n            conn = Jdbc_mysql_connection.connecttodb(null);\n        }}\n    }\n</code></pre>\n<p>It only works when i write it like this :</p>\n<pre><code>    public static void CheckConnection()\n    {\n        if (conn == null)\n        {\n            conn = Jdbc_mysql_connection.connecttodb(null);\n        }\n        else\n        {\n            try\n            {\n                if (conn.isValid(10))\n                {\n                    System.out.println(&quot;Datenbankverbindung besteht noch&quot;);\n                }\n                else\n                {\n                    conn = Jdbc_mysql_connection.connecttodb(null);\n                }\n            }\n            catch (SQLException e)\n            {\n                System.err.println(&quot;Fehler beim Überprüfen der Datenbankverbindung: &quot; + e.getMessage());\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","android","c++","android-ndk"],"comments":[{"owner":{"account_id":1991491,"reputation":9992,"user_id":1785412,"accept_rate":48,"display_name":"Siddharth_Vyas"},"score":1,"creation_date":1394785761,"post_id":22399572,"comment_id":34055456,"body_markdown":"Are you using any external jar files?","body":"Are you using any external jar files?"},{"owner":{"account_id":3472587,"reputation":2515,"user_id":2906564,"accept_rate":41,"display_name":"Karthik Sivam"},"score":0,"creation_date":1394788275,"post_id":22399572,"comment_id":34056880,"body_markdown":"@SiddharthVyas No , I&#39;m not using external jar files in this.","body":"@SiddharthVyas No , I&#39;m not using external jar files in this."},{"owner":{"account_id":71611,"reputation":26366,"user_id":6998684,"display_name":"IgorGanapolsky"},"score":1,"creation_date":1470759914,"post_id":22399572,"comment_id":65076177,"body_markdown":"Is your application multi-dexed?  If so, then that explains the problem.","body":"Is your application multi-dexed?  If so, then that explains the problem."},{"owner":{"account_id":444211,"reputation":61229,"user_id":835883,"accept_rate":81,"display_name":"j2emanue"},"score":0,"creation_date":1499244775,"post_id":22399572,"comment_id":76818408,"body_markdown":"when i did a signed apk this error did not happen. just debug","body":"when i did a signed apk this error did not happen. just debug"},{"owner":{"account_id":4162891,"reputation":428,"user_id":3412567,"accept_rate":60,"display_name":"Benobab"},"score":0,"creation_date":1507304892,"post_id":22399572,"comment_id":80170824,"body_markdown":"Did you find a working solution ?","body":"Did you find a working solution ?"},{"owner":{"account_id":4951203,"reputation":7272,"user_id":3985071,"accept_rate":54,"display_name":"Arpit Patel"},"score":0,"creation_date":1595007341,"post_id":22399572,"comment_id":111336299,"body_markdown":"minifyEnabled false in debug block in-app Gradle will work","body":"minifyEnabled false in debug block in-app Gradle will work"}],"answers":[{"comments":[{"owner":{"account_id":11293946,"reputation":6479,"user_id":8281994,"accept_rate":56,"display_name":"Florian Walther"},"score":0,"creation_date":1627245761,"post_id":22399630,"comment_id":121098983,"body_markdown":"This was the solution for me after refactoring MainActivity into a different package","body":"This was the solution for me after refactoring MainActivity into a different package"}],"tags":[],"owner":{"account_id":2965421,"reputation":8290,"user_id":2518666,"accept_rate":42,"display_name":"Sushil"},"comment_count":1,"down_vote_count":0,"up_vote_count":73,"is_accepted":false,"score":73,"last_activity_date":1394785436,"creation_date":1394785436,"answer_id":22399630,"question_id":22399572,"body_markdown":"This seems to be problem in your case. The relative path of your activity in manifest is not correct:\r\n\r\n    &lt;activity android:name=&quot;android.app.POMActivity&quot;\r\n\r\nreplace this with :\r\n\r\n    &lt;activity android:name=&quot;.POMActivity&quot;\r\n\r\nor\r\n\r\n    &lt;activity android:name=&quot;com.irrlicht.example1.POMActivity&quot;","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>This seems to be problem in your case. The relative path of your activity in manifest is not correct:</p>\n\n<pre><code>&lt;activity android:name=\"android.app.POMActivity\"\n</code></pre>\n\n<p>replace this with :</p>\n\n<pre><code>&lt;activity android:name=\".POMActivity\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;activity android:name=\"com.irrlicht.example1.POMActivity\"\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user5803705"},"score":1,"creation_date":1478400101,"post_id":22959847,"comment_id":68137441,"body_markdown":"This is the correct solution to the question. I have tested this with my libgdx game with the same errors found as the above. I found these errors by using the log generated with my phone (samsung galaxy S6). Once I applied this solution, all of my issues were solved.","body":"This is the correct solution to the question. I have tested this with my libgdx game with the same errors found as the above. I found these errors by using the log generated with my phone (samsung galaxy S6). Once I applied this solution, all of my issues were solved."},{"owner":{"account_id":2177278,"reputation":4058,"user_id":1927641,"display_name":"Zin Min"},"score":38,"creation_date":1490443384,"post_id":22959847,"comment_id":73120678,"body_markdown":"I cannot find Properties from right click of project. May be I am stupid. :(","body":"I cannot find Properties from right click of project. May be I am stupid. :("},{"owner":{"account_id":238818,"reputation":420,"user_id":507974,"accept_rate":12,"display_name":"Skyler"},"score":15,"creation_date":1499472723,"post_id":22959847,"comment_id":76937832,"body_markdown":"I can&#39;t find properties either, anybody figure out how to navigate to the listed page","body":"I can&#39;t find properties either, anybody figure out how to navigate to the listed page"},{"owner":{"account_id":2514482,"reputation":632,"user_id":2186220,"accept_rate":56,"display_name":"Bot"},"score":20,"creation_date":1507265762,"post_id":22959847,"comment_id":80149171,"body_markdown":"This is a solution for the Eclipse IDE. There is no default &#39;project.properties&#39; file in Android Studio. It can be created though.","body":"This is a solution for the Eclipse IDE. There is no default &#39;project.properties&#39; file in Android Studio. It can be created though."},{"owner":{"account_id":201770,"reputation":947,"user_id":2846109,"display_name":"mnsalim"},"score":4,"creation_date":1583830814,"post_id":22959847,"comment_id":107237147,"body_markdown":"The provided solution is only applicable for Eclipse IDE.","body":"The provided solution is only applicable for Eclipse IDE."},{"owner":{"account_id":12262418,"reputation":146,"user_id":8949733,"display_name":"default123"},"score":2,"creation_date":1690860416,"post_id":22959847,"comment_id":135408343,"body_markdown":"@Zin Min, you&#39;re not stupid, telling someone to &#39;right click on a project&#39; is just terrible advice. Right click where? In your file manager? Do we need to close the project in Android Studio if it&#39;s already open?","body":"@Zin Min, you&#39;re not stupid, telling someone to &#39;right click on a project&#39; is just terrible advice. Right click where? In your file manager? Do we need to close the project in Android Studio if it&#39;s already open?"}],"tags":[],"owner":{"account_id":201770,"reputation":947,"user_id":2846109,"display_name":"mnsalim"},"comment_count":6,"down_vote_count":4,"up_vote_count":66,"is_accepted":false,"score":62,"last_activity_date":1550577487,"creation_date":1397039477,"answer_id":22959847,"question_id":22399572,"body_markdown":"I had a similar problem, here&#39;s my solution:\r\n\r\n 1. Right click on your project and select **Properties**.\r\n 2. Select **Java Build Path** from the menu on the left.\r\n 3. Select the **Order and Export** tab.\r\n 4. From the list make sure the libraries or external jars you added to your project are *checked*.\r\n 5. Finally, clean your project &amp; run.\r\n\r\nYou may also check [this][1] answer.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/10866431/android-activity-classnotfoundexception-tried-everything?rq=1","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I had a similar problem, here's my solution:</p>\n\n<ol>\n<li>Right click on your project and select <strong>Properties</strong>.</li>\n<li>Select <strong>Java Build Path</strong> from the menu on the left.</li>\n<li>Select the <strong>Order and Export</strong> tab.</li>\n<li>From the list make sure the libraries or external jars you added to your project are <em>checked</em>.</li>\n<li>Finally, clean your project &amp; run.</li>\n</ol>\n\n<p>You may also check <a href=\"https://stackoverflow.com/questions/10866431/android-activity-classnotfoundexception-tried-everything?rq=1\">this</a> answer.</p>\n"},{"comments":[{"owner":{"account_id":2837284,"reputation":4425,"user_id":2437655,"accept_rate":77,"display_name":"Shubham AgaRwal"},"score":0,"creation_date":1445966297,"post_id":23471869,"comment_id":54543055,"body_markdown":"folder name is libs only","body":"folder name is libs only"}],"tags":[],"owner":{"account_id":2282492,"reputation":2049,"user_id":2007266,"accept_rate":44,"display_name":"hemantsb"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1399291099,"creation_date":1399291099,"answer_id":23471869,"question_id":22399572,"body_markdown":"Just Change your folder name from `lib` to `libs` ,\r\n\r\n\r\nThen you will see some error marks in your project, to resolve this rightClick on project &gt;\r\n\r\n `Properties &gt; Java Build Path &gt; libraries` :\r\n\r\n  Remove all the library with red marks on it, then `apply &gt; ok &gt;` after that  **clean your project** . TADA see the magic :)","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>Just Change your folder name from <code>lib</code> to <code>libs</code> ,</p>\n\n<p>Then you will see some error marks in your project, to resolve this rightClick on project ></p>\n\n<p><code>Properties &gt; Java Build Path &gt; libraries</code> :</p>\n\n<p>Remove all the library with red marks on it, then <code>apply &gt; ok &gt;</code> after that  <strong>clean your project</strong> . TADA see the magic :)</p>\n"},{"tags":[],"owner":{"account_id":2487494,"reputation":349,"user_id":2165667,"display_name":"crazyjune"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1402638715,"creation_date":1402638715,"answer_id":24198565,"question_id":22399572,"body_markdown":"1. delete the bin folder  \r\n2. change the order of librarys  \r\n3. clean and rebuild  \r\n  \r\nworked for me.\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<ol>\n<li>delete the bin folder  </li>\n<li>change the order of librarys  </li>\n<li>clean and rebuild  </li>\n</ol>\n\n<p>worked for me.</p>\n"},{"tags":[],"owner":{"account_id":2215206,"reputation":2164,"user_id":1956013,"accept_rate":56,"display_name":"Ahmed Adel Ismail"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1443532405,"creation_date":1443532405,"answer_id":32844963,"question_id":22399572,"body_markdown":"after i tried the given answers, i found out another reason for the same Exception, that i had to add the library i&#39;m using manually to my main library through\r\n\r\n    Right click on my main library &gt; \r\n    Properties &gt; \r\n    Android &gt; \r\n    Go to the very bottom of the screen and click (Add) &gt; \r\n    Select my other library that caused the crash &gt;\r\n    Apply\r\n\r\nbefore this solution, i used the &quot;Fix Project setup&quot; from within the .java file in eclipse, but this did not work, so i had to add it manually here and it worked","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>after i tried the given answers, i found out another reason for the same Exception, that i had to add the library i'm using manually to my main library through</p>\n\n<pre><code>Right click on my main library &gt; \nProperties &gt; \nAndroid &gt; \nGo to the very bottom of the screen and click (Add) &gt; \nSelect my other library that caused the crash &gt;\nApply\n</code></pre>\n\n<p>before this solution, i used the \"Fix Project setup\" from within the .java file in eclipse, but this did not work, so i had to add it manually here and it worked</p>\n"},{"comments":[{"owner":{"account_id":2406407,"reputation":3654,"user_id":2102748,"accept_rate":100,"display_name":"milosmns"},"score":1,"creation_date":1472549995,"post_id":37526993,"comment_id":65785448,"body_markdown":"Adding multi-dex is useful only when you pass the reference count limit (56k), and it is *very* unstable and *very* unreliable prior to Lollipop. This should be used to fix problems as a last resort.","body":"Adding multi-dex is useful only when you pass the reference count limit (56k), and it is <i>very</i> unstable and <i>very</i> unreliable prior to Lollipop. This should be used to fix problems as a last resort."},{"owner":{"account_id":7432408,"reputation":4084,"user_id":5652872,"accept_rate":71,"display_name":"Akash Bisariya"},"score":0,"creation_date":1472553302,"post_id":37526993,"comment_id":65787740,"body_markdown":"then what should be the solution according to you","body":"then what should be the solution according to you"},{"owner":{"account_id":2406407,"reputation":3654,"user_id":2102748,"accept_rate":100,"display_name":"milosmns"},"score":0,"creation_date":1472553810,"post_id":37526993,"comment_id":65788048,"body_markdown":"I&#39;m just saying that multi-dex causes more trouble than it helps, which is clearly stated on the developer website. I wouldn&#39;t be here looking for an answer if I had one, would I?","body":"I&#39;m just saying that multi-dex causes more trouble than it helps, which is clearly stated on the developer website. I wouldn&#39;t be here looking for an answer if I had one, would I?"},{"owner":{"account_id":7432408,"reputation":4084,"user_id":5652872,"accept_rate":71,"display_name":"Akash Bisariya"},"score":1,"creation_date":1472557883,"post_id":37526993,"comment_id":65790685,"body_markdown":"Ok thanks for the info , Please update here if you found a good solution , it would be a great help.","body":"Ok thanks for the info , Please update here if you found a good solution , it would be a great help."},{"owner":{"account_id":428615,"reputation":2263,"user_id":811058,"display_name":"gadildafissh"},"score":2,"creation_date":1505285417,"post_id":37526993,"comment_id":79343457,"body_markdown":"Adding the line in dependencies above did it for me.","body":"Adding the line in dependencies above did it for me."},{"owner":{"account_id":1254650,"reputation":229,"user_id":1214383,"display_name":"Mohamed ElSawaf"},"score":1,"creation_date":1544742406,"post_id":37526993,"comment_id":94394497,"body_markdown":"After doing that, I needed to clean and rebuild the project.","body":"After doing that, I needed to clean and rebuild the project."},{"owner":{"account_id":10690698,"reputation":221,"user_id":7869726,"display_name":"YouCii"},"score":1,"creation_date":1661935221,"post_id":37526993,"comment_id":129887515,"body_markdown":"But according the official doc, we don&#39;t need to add multidexEnable when our app&#39; targetSDKVersion &gt;= 21. Additional, multiDexEnable can only solve NoClassDefFoundError, ClassNotFoundException can&#39;t be resolved","body":"But according the official doc, we don&#39;t need to add multidexEnable when our app&#39; targetSDKVersion &gt;= 21. Additional, multiDexEnable can only solve NoClassDefFoundError, ClassNotFoundException can&#39;t be resolved"}],"tags":[],"owner":{"account_id":7432408,"reputation":4084,"user_id":5652872,"accept_rate":71,"display_name":"Akash Bisariya"},"comment_count":7,"down_vote_count":1,"up_vote_count":28,"is_accepted":false,"score":27,"last_activity_date":1678926301,"creation_date":1464615146,"answer_id":37526993,"question_id":22399572,"body_markdown":"I should understand the problem by just seeing \r\n\r\n&gt; dex errors\r\n\r\nBut it took a half day to fix the issue. \r\nI fixed it by following the instructions on the Android Developers page:\r\nhttps://developer.android.com/studio/build/multidex.html\r\n\r\nFirst, add this to `build.gradle` file:\r\n\r\n    defaultConfig {\r\n        ...\r\n        minSdkVersion 15 \r\n        targetSdkVersion 33\r\n        // Enabling multidex support.\r\n        multiDexEnabled true\r\n    }\r\n\r\n     dependencies {\r\n         compile &#39;com.android.support:multidex:1.0.0&#39;\r\n\r\n     }\r\n\r\nThen extend the Application class with the `MultiDexApplication` class as instructed on the above link (or declare the application class in `AndroidManifest.xml` or override `attachBaseContext()` function if it is not possible to extend the application class).\r\n\r\nThat&#39;s all, and it solved the problem.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I should understand the problem by just seeing</p>\n<blockquote>\n<p>dex errors</p>\n</blockquote>\n<p>But it took a half day to fix the issue.\nI fixed it by following the instructions on the Android Developers page:\n<a href=\"https://developer.android.com/studio/build/multidex.html\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/build/multidex.html</a></p>\n<p>First, add this to <code>build.gradle</code> file:</p>\n<pre><code>defaultConfig {\n    ...\n    minSdkVersion 15 \n    targetSdkVersion 33\n    // Enabling multidex support.\n    multiDexEnabled true\n}\n\n dependencies {\n     compile 'com.android.support:multidex:1.0.0'\n\n }\n</code></pre>\n<p>Then extend the Application class with the <code>MultiDexApplication</code> class as instructed on the above link (or declare the application class in <code>AndroidManifest.xml</code> or override <code>attachBaseContext()</code> function if it is not possible to extend the application class).</p>\n<p>That's all, and it solved the problem.</p>\n"},{"comments":[{"owner":{"account_id":2214647,"reputation":123,"user_id":1955607,"accept_rate":100,"display_name":"pinguinos"},"score":2,"creation_date":1585946801,"post_id":38251279,"comment_id":107954558,"body_markdown":"This worked for me too with react native. I opened the android folder with Android Studio and then build -&gt; clean project. Rebuilt it with `react-native run-android`","body":"This worked for me too with react native. I opened the android folder with Android Studio and then build -&gt; clean project. Rebuilt it with <code>react-native run-android</code>"},{"owner":{"account_id":114990,"reputation":1059,"user_id":302135,"display_name":"EldenChris"},"score":0,"creation_date":1590766209,"post_id":38251279,"comment_id":109814358,"body_markdown":"Did the same as comment above and it worked ! Thanks !","body":"Did the same as comment above and it worked ! Thanks !"}],"tags":[],"owner":{"account_id":6867226,"reputation":8143,"user_id":5279156,"display_name":"Vlad"},"comment_count":2,"down_vote_count":2,"up_vote_count":41,"is_accepted":false,"score":39,"last_activity_date":1467910797,"creation_date":1467910797,"answer_id":38251279,"question_id":22399572,"body_markdown":"The deletion of app on device and cleaning of project works for me","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>The deletion of app on device and cleaning of project works for me</p>\n"},{"tags":[],"owner":{"account_id":6253582,"reputation":3528,"user_id":4862911,"accept_rate":76,"display_name":"aligur"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1664457525,"creation_date":1476367103,"answer_id":40023120,"question_id":22399572,"body_markdown":"the solution for me was : performing `./gradlew --stop` command in android studio terminal. After that just clean and rebuild the project. ","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>the solution for me was : performing <code>./gradlew --stop</code> command in android studio terminal. After that just clean and rebuild the project.</p>\n"},{"comments":[{"owner":{"account_id":6887735,"reputation":21370,"user_id":5292302,"accept_rate":100,"display_name":"Petter Friberg"},"score":0,"creation_date":1479762051,"post_id":40729225,"comment_id":68685814,"body_markdown":"Please don&#39;t add the [same answer](http://stackoverflow.com/a/40729213/5292302) to multiple questions. Answer the best one and flag the rest as duplicates. See [Is it acceptable to add a duplicate answer to several questions?](http://meta.stackexchange.com/questions/104227/is-it-acceptable-to-add-a-duplica‌​te-answer-to-several-questions)","body":"Please don&#39;t add the <a href=\"http://stackoverflow.com/a/40729213/5292302\">same answer</a> to multiple questions. Answer the best one and flag the rest as duplicates. See <a href=\"http://meta.stackexchange.com/questions/104227/is-it-acceptable-to-add-a-duplica%E2%80%8C%E2%80%8Bte-answer-to-several-questions\">Is it acceptable to add a duplicate answer to several questions?</a>"}],"tags":[],"owner":{"account_id":4817825,"reputation":1261,"user_id":3889402,"accept_rate":67,"display_name":"dees91"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1479761811,"creation_date":1479761811,"answer_id":40729225,"question_id":22399572,"body_markdown":"If you receive this error after removing some gradle dependency, check your manifest and make sure that you removed all entries corresponding that dependency.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>If you receive this error after removing some gradle dependency, check your manifest and make sure that you removed all entries corresponding that dependency.</p>\n"},{"comments":[{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1550488415,"post_id":41479407,"comment_id":96273851,"body_markdown":"How does `enableMultiDex` affect? In my case `javaMaxHeapSize &quot;4g&quot;` didn&#39;t help.","body":"How does <code>enableMultiDex</code> affect? In my case <code>javaMaxHeapSize &quot;4g&quot;</code> didn&#39;t help."},{"owner":{"account_id":8652943,"reputation":22456,"user_id":6478047,"accept_rate":76,"display_name":"Manohar"},"score":0,"creation_date":1550489008,"post_id":41479407,"comment_id":96274197,"body_markdown":"@CoolMind Its just an application class which extends `MultiDexApplication` . It is necessary if you want to use multidex","body":"@CoolMind Its just an application class which extends <code>MultiDexApplication</code> . It is necessary if you want to use multidex"},{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1550490380,"post_id":41479407,"comment_id":96274980,"body_markdown":"Agree. I use either `MultiDexApplication` or `attachBaseContext` (see https://developer.android.com/studio/build/multidex).","body":"Agree. I use either <code>MultiDexApplication</code> or <code>attachBaseContext</code> (see <a href=\"https://developer.android.com/studio/build/multidex\" rel=\"nofollow noreferrer\">developer.android.com/studio/build/multidex</a>)."}],"tags":[],"owner":{"account_id":8652943,"reputation":22456,"user_id":6478047,"accept_rate":76,"display_name":"Manohar"},"comment_count":3,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1483601163,"creation_date":1483601163,"answer_id":41479407,"question_id":22399572,"body_markdown":"For any one who is having multidex enable write this\r\n\r\ninside **build.gradle**\r\n\r\n \r\n\r\n    apply plugin: &#39;com.android.application&#39;\r\n    \r\n    android {\r\n     defaultConfig {\r\n          multiDexEnabled true\r\n      }\r\n     dexOptions {\r\n            javaMaxHeapSize &quot;4g&quot;\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        compile &#39;com.android.support:appcompat-v7:+&#39;\r\n        compile &#39;com.google.android.gms:play-services:+&#39;\r\n        compile &#39;com.android.support:multidex:1.0.1&#39;\r\n    }\r\n\r\n\r\n\r\n  write a class `EnableMultiDex` like below\r\n\r\n     \r\n   \r\n    import android.content.Context;\r\n    import android.support.multidex.MultiDexApplication;\r\n\r\n    public class EnableMultiDex extends MultiDexApplication {\r\n        private static EnableMultiDex enableMultiDex;\r\n        public static Context context;\r\n    \r\n        public EnableMultiDex(){\r\n            enableMultiDex=this;\r\n        }\r\n    \r\n        public static EnableMultiDex getEnableMultiDexApp() {\r\n            return enableMultiDex;\r\n        }\r\n    \r\n        @Override\r\n        public void onCreate() {\r\n            super.onCreate();\r\n            context = getApplicationContext();\r\n    \r\n        }\r\n    }\r\n\r\n\r\nand in `AndroidManifest.xml` write this **className** inside Application tag\r\n\r\n     &lt;application\r\n        android:name=&quot;YourPakageName.EnableMultiDex&quot;\r\n        android:hardwareAccelerated=&quot;true&quot;\r\n        android:icon=&quot;@drawable/wowio_launch_logo&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:largeHeap=&quot;true&quot;\r\n        tools:node=&quot;replace&quot;&gt;\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>For any one who is having multidex enable write this</p>\n\n<p>inside <strong>build.gradle</strong></p>\n\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\n defaultConfig {\n      multiDexEnabled true\n  }\n dexOptions {\n        javaMaxHeapSize \"4g\"\n    }\n}\n\ndependencies {\n    compile 'com.android.support:appcompat-v7:+'\n    compile 'com.google.android.gms:play-services:+'\n    compile 'com.android.support:multidex:1.0.1'\n}\n</code></pre>\n\n<p>write a class <code>EnableMultiDex</code> like below</p>\n\n<pre><code>import android.content.Context;\nimport android.support.multidex.MultiDexApplication;\n\npublic class EnableMultiDex extends MultiDexApplication {\n    private static EnableMultiDex enableMultiDex;\n    public static Context context;\n\n    public EnableMultiDex(){\n        enableMultiDex=this;\n    }\n\n    public static EnableMultiDex getEnableMultiDexApp() {\n        return enableMultiDex;\n    }\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        context = getApplicationContext();\n\n    }\n}\n</code></pre>\n\n<p>and in <code>AndroidManifest.xml</code> write this <strong>className</strong> inside Application tag</p>\n\n<pre><code> &lt;application\n    android:name=\"YourPakageName.EnableMultiDex\"\n    android:hardwareAccelerated=\"true\"\n    android:icon=\"@drawable/wowio_launch_logo\"\n    android:label=\"@string/app_name\"\n    android:largeHeap=\"true\"\n    tools:node=\"replace\"&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1550479038,"post_id":43352294,"comment_id":96268657,"body_markdown":"We should override this method if we extend from `Application`. Why should we override in a case of `MultiDexAppication`?","body":"We should override this method if we extend from <code>Application</code>. Why should we override in a case of <code>MultiDexAppication</code>?"}],"tags":[],"owner":{"account_id":9498730,"reputation":61,"user_id":7060709,"display_name":"kabore abdoul mohamine"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1491932318,"creation_date":1491930764,"answer_id":43352294,"question_id":22399572,"body_markdown":"When you are using multidex , then try to extend your application class with MultiDexAppication instead of Application and override below method this required for Android below 5.0 (because 5.0 and above support to the multidex)\r\n\r\n    @Override\r\n    protected void attachBaseContext(Context base)\r\n    {\r\n        super.attachBaseContext(base);\r\n        MultiDex.install(BaseApplication.this);\r\n    }\r\n\r\nand in dependencies add this\r\n\r\n    compile &#39;com.android.support:multidex:1.0.1&#39;","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>When you are using multidex , then try to extend your application class with MultiDexAppication instead of Application and override below method this required for Android below 5.0 (because 5.0 and above support to the multidex)</p>\n\n<pre><code>@Override\nprotected void attachBaseContext(Context base)\n{\n    super.attachBaseContext(base);\n    MultiDex.install(BaseApplication.this);\n}\n</code></pre>\n\n<p>and in dependencies add this</p>\n\n<pre><code>compile 'com.android.support:multidex:1.0.1'\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user2306383"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1498215896,"creation_date":1498215896,"answer_id":44719899,"question_id":22399572,"body_markdown":"As per my understading i get the issue after update android studio 2.1 to 2.3 due to the instant feature my application will not run when i copy the apk from output and put into the sdcard.\r\nFor this problem i build the apk from build option do build apk in android studio.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>As per my understading i get the issue after update android studio 2.1 to 2.3 due to the instant feature my application will not run when i copy the apk from output and put into the sdcard.\nFor this problem i build the apk from build option do build apk in android studio.</p>\n"},{"comments":[{"owner":{"account_id":187257,"reputation":13472,"user_id":425183,"accept_rate":55,"display_name":"Ognyan"},"score":12,"creation_date":1506855243,"post_id":45320244,"comment_id":79977348,"body_markdown":"This is the correct answer for Android Studio. I can&#39;t believe that Instant Run is still so buggy to the extend that you have to turn it off in order to avoid nasty surprises...","body":"This is the correct answer for Android Studio. I can&#39;t believe that Instant Run is still so buggy to the extend that you have to turn it off in order to avoid nasty surprises..."},{"owner":{"account_id":2815029,"reputation":189,"user_id":2420353,"accept_rate":80,"display_name":"Răzvan Barbu"},"score":2,"creation_date":1508493142,"post_id":45320244,"comment_id":80640600,"body_markdown":"I have been looking for this answer for days,  even weeks!\nAlthough not critical, this issue has been on the back of my mind, not giving me peace.\nNever thought instant run was the one triggering this. My app worked fine when launched via adb, but always crashed with ClassNotFound runtime expection when manually installing it via apk.","body":"I have been looking for this answer for days,  even weeks! Although not critical, this issue has been on the back of my mind, not giving me peace. Never thought instant run was the one triggering this. My app worked fine when launched via adb, but always crashed with ClassNotFound runtime expection when manually installing it via apk."},{"owner":{"account_id":3058855,"reputation":628,"user_id":2591970,"display_name":"Terranology"},"score":9,"creation_date":1521131774,"post_id":45320244,"comment_id":85611587,"body_markdown":"That&#39;s not the solution to me. I had disabled the instant run","body":"That&#39;s not the solution to me. I had disabled the instant run"},{"owner":{"account_id":10204868,"reputation":1137,"user_id":7533900,"display_name":"Ashik Abbas"},"score":0,"creation_date":1525442138,"post_id":45320244,"comment_id":87370324,"body_markdown":"After disabled the options. Please restart your android studio","body":"After disabled the options. Please restart your android studio"},{"owner":{"account_id":4702581,"reputation":620,"user_id":3805770,"display_name":"KingKongCoder"},"score":0,"creation_date":1527009743,"post_id":45320244,"comment_id":87960169,"body_markdown":"omg i don&#39;t know why instant run is the culprit but it is indeed, thanks man.","body":"omg i don&#39;t know why instant run is the culprit but it is indeed, thanks man."},{"owner":{"account_id":2872952,"reputation":674,"user_id":2465827,"display_name":"Ryde"},"score":0,"creation_date":1532839098,"post_id":45320244,"comment_id":90119882,"body_markdown":"Can instant run turned on again after this? I can&#39;t make it work again..","body":"Can instant run turned on again after this? I can&#39;t make it work again.."},{"owner":{"account_id":2906691,"reputation":481,"user_id":2491809,"display_name":"Bingchean"},"score":0,"creation_date":1560827272,"post_id":45320244,"comment_id":99853182,"body_markdown":"why i am uncheck this chekbox and restart android studio, the issue still exist.  Caused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;com.yryg.hjk.device.MainActivity1&quot;\non path: DexPathList[[zip file &quot;/data/app/com.yryg.hjk.device-1.apk&quot;],  thanks a lot ,and running on virtual device is OK, on device(huawei p6 android version 4.4) is not work.","body":"why i am uncheck this chekbox and restart android studio, the issue still exist.  Caused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;com.yryg.hjk.device.MainActivity1&quot; on path: DexPathList[[zip file &quot;/data/app/com.yryg.hjk.device-1.apk&quot;],  thanks a lot ,and running on virtual device is OK, on device(huawei p6 android version 4.4) is not work."},{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1563277147,"post_id":45320244,"comment_id":100638541,"body_markdown":"@Bingchean, do you use MultiDex?","body":"@Bingchean, do you use MultiDex?"},{"owner":{"account_id":1667970,"reputation":2499,"user_id":1535010,"accept_rate":50,"display_name":"AITAALI_ABDERRAHMANE"},"score":0,"creation_date":1574697483,"post_id":45320244,"comment_id":104314246,"body_markdown":"Now is Apply changes, see https://android-developers.googleblog.com/2019/08/android-studio-35-project-marble-goes.html","body":"Now is Apply changes, see <a href=\"https://android-developers.googleblog.com/2019/08/android-studio-35-project-marble-goes.html\" rel=\"nofollow noreferrer\">android-developers.googleblog.com/2019/08/&hellip;</a>"},{"owner":{"account_id":1064279,"reputation":2186,"user_id":1065226,"accept_rate":71,"display_name":"Liker"},"score":29,"creation_date":1623866149,"post_id":45320244,"comment_id":120202596,"body_markdown":"can&#39;t find instant run in modern android studio :(","body":"can&#39;t find instant run in modern android studio :("},{"owner":{"account_id":988037,"reputation":153,"user_id":1006082,"accept_rate":0,"display_name":"Pedro Santangelo"},"score":0,"creation_date":1640636753,"post_id":45320244,"comment_id":124622817,"body_markdown":"There&#39;s no intant run in AS Artic Fox","body":"There&#39;s no intant run in AS Artic Fox"},{"owner":{"account_id":15922516,"reputation":490,"user_id":11489088,"display_name":"petestmart"},"score":0,"creation_date":1659046697,"post_id":45320244,"comment_id":129209077,"body_markdown":"I don&#39;t know that disabling Instant Run is a fix to this issue anymore: &quot;unlike Instant Run, Apply Changes does not modify your APK.&quot;  https://android-developers.googleblog.com/2019/08/android-studio-35-project-marble-goes.html","body":"I don&#39;t know that disabling Instant Run is a fix to this issue anymore: &quot;unlike Instant Run, Apply Changes does not modify your APK.&quot;  <a href=\"https://android-developers.googleblog.com/2019/08/android-studio-35-project-marble-goes.html\" rel=\"nofollow noreferrer\">android-developers.googleblog.com/2019/08/&hellip;</a>"}],"tags":[],"owner":{"account_id":10204868,"reputation":1137,"user_id":7533900,"display_name":"Ashik Abbas"},"comment_count":12,"down_vote_count":2,"up_vote_count":95,"is_accepted":false,"score":93,"last_activity_date":1501054188,"creation_date":1501054188,"answer_id":45320244,"question_id":22399572,"body_markdown":"I tried all possible options but result is zero. Finally i found correct solution which is helpful for me. Just go to disable Instant Run Go to **File -&gt; Settings -&gt; Build,Execution, Deployment -&gt; Instant Run -&gt; Uncheck the checkbox for instant run**. Run your app once and this apk file work properly..","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I tried all possible options but result is zero. Finally i found correct solution which is helpful for me. Just go to disable Instant Run Go to <strong>File -> Settings -> Build,Execution, Deployment -> Instant Run -> Uncheck the checkbox for instant run</strong>. Run your app once and this apk file work properly..</p>\n"},{"comments":[{"owner":{"account_id":3727392,"reputation":730,"user_id":3100901,"accept_rate":40,"display_name":"Salman Ullah Khan"},"score":0,"creation_date":1604398629,"post_id":46069076,"comment_id":114329437,"body_markdown":"Thanks you very much :)","body":"Thanks you very much :)"}],"tags":[],"owner":{"account_id":2370403,"reputation":574,"user_id":2075155,"display_name":"Romuald"},"comment_count":1,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1554901835,"creation_date":1504682266,"answer_id":46069076,"question_id":22399572,"body_markdown":"If the project was compiling just before, you can try to clear the cache using : \r\n\r\n`./gradlew clean `\r\n\r\nor \r\n\r\n`./gradlew cleanBuildCache`\r\n\r\nor for windows \r\n\r\n`gradlew cleanBuildCache`\r\n\r\nhttps://developer.android.com/studio/build/build-cache.html\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>If the project was compiling just before, you can try to clear the cache using : </p>\n\n<p><code>./gradlew clean</code></p>\n\n<p>or </p>\n\n<p><code>./gradlew cleanBuildCache</code></p>\n\n<p>or for windows </p>\n\n<p><code>gradlew cleanBuildCache</code></p>\n\n<p><a href=\"https://developer.android.com/studio/build/build-cache.html\" rel=\"noreferrer\">https://developer.android.com/studio/build/build-cache.html</a></p>\n"},{"comments":[{"owner":{"account_id":4450305,"reputation":5442,"user_id":3622415,"accept_rate":100,"display_name":"kangkyu"},"score":3,"creation_date":1518387453,"post_id":46214681,"comment_id":84473649,"body_markdown":"Under &quot;Build&quot; menu. Select **Build -&gt; Clean Project** and then **Build -&gt; Rebuild Project**","body":"Under &quot;Build&quot; menu. Select <b>Build -&gt; Clean Project</b> and then <b>Build -&gt; Rebuild Project</b>"},{"owner":{"account_id":1866615,"reputation":4191,"user_id":1690017,"accept_rate":38,"display_name":"David"},"score":0,"creation_date":1580133077,"post_id":46214681,"comment_id":105986940,"body_markdown":"This would imply that the app only crashes locally, bu the crash also occurs in a release version, so this isn&#39;t really a solution.","body":"This would imply that the app only crashes locally, bu the crash also occurs in a release version, so this isn&#39;t really a solution."}],"tags":[],"owner":{"account_id":9102688,"reputation":3351,"user_id":7369357,"accept_rate":76,"display_name":"nicolas asinovich"},"comment_count":2,"down_vote_count":1,"up_vote_count":32,"is_accepted":false,"score":31,"last_activity_date":1505379401,"creation_date":1505379401,"answer_id":46214681,"question_id":22399572,"body_markdown":"Just try **Clean Project** &amp; **Rebuild Project**.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>Just try <strong>Clean Project</strong> &amp; <strong>Rebuild Project</strong>.</p>\n"},{"comments":[{"owner":{"account_id":1237882,"reputation":113,"user_id":6888412,"display_name":"Berry Wing"},"score":2,"creation_date":1560003581,"post_id":46698959,"comment_id":99601847,"body_markdown":"This was helpful for a different reason. Check your spelling. I had a misspelled class name causing the original issue.","body":"This was helpful for a different reason. Check your spelling. I had a misspelled class name causing the original issue."}],"tags":[],"owner":{"account_id":350565,"reputation":7641,"user_id":686540,"accept_rate":100,"display_name":"petrnohejl"},"comment_count":1,"down_vote_count":1,"up_vote_count":26,"is_accepted":false,"score":25,"last_activity_date":1507795992,"creation_date":1507763881,"answer_id":46698959,"question_id":22399572,"body_markdown":"This exception can also occur when you have a **custom view** in your layout like this:\r\n\r\n    &lt;com.example.MyView\r\n    \tandroid:layout_width=&quot;match_parent&quot;\r\n    \tandroid:layout_height=&quot;match_parent&quot; /&gt;\r\n\r\nand you change the view&#39;s **package name** from &quot;com.example&quot; to something different, but you forget to change it in the layout as well.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>This exception can also occur when you have a <strong>custom view</strong> in your layout like this:</p>\n\n<pre><code>&lt;com.example.MyView\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\" /&gt;\n</code></pre>\n\n<p>and you change the view's <strong>package name</strong> from \"com.example\" to something different, but you forget to change it in the layout as well.</p>\n"},{"comments":[{"owner":{"account_id":4814273,"reputation":1342,"user_id":3886821,"accept_rate":93,"display_name":"h8pathak"},"score":0,"creation_date":1591693420,"post_id":47131403,"comment_id":110144901,"body_markdown":"Changing the application name, worked for me when I was trying to run the app on android 4.3","body":"Changing the application name, worked for me when I was trying to run the app on android 4.3"}],"tags":[],"owner":{"account_id":5675614,"reputation":591,"user_id":5312239,"accept_rate":40,"display_name":"Abdul Gaffar"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1518268826,"creation_date":1509951512,"answer_id":47131403,"question_id":22399572,"body_markdown":"We don&#39;t need to have customized **Application** class which extends **MultiDexApplication**. Instead, we can have like this on **AndroidManifest.xml**\r\n\r\n    &lt;application\r\n    android:name=&quot;android.support.multidex.MultiDexApplication&quot;\r\n    android:hardwareAccelerated=&quot;true&quot;\r\n    android:icon=&quot;@mipmap/ic_launcher&quot;\r\n    android:label=&quot;@string/app_name&quot;\r\n    android:supportsRtl=&quot;true&quot;\r\n    android:theme=&quot;@style/AppTheme&quot;&gt;\r\n\r\nAnd along with this on **build.gradle**(Module:app),\r\n\r\n    defaultConfig {\r\n          ...\r\n    \r\n          // Enabling multidex support.\r\n          multiDexEnabled true\r\n    }\r\n    \r\n    dependencies {\r\n         ... \r\n         compile &#39;com.android.support:multidex:1.0.2&#39;\r\n    }\r\n\r\nThanks.\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>We don't need to have customized <strong>Application</strong> class which extends <strong>MultiDexApplication</strong>. Instead, we can have like this on <strong>AndroidManifest.xml</strong></p>\n\n<pre><code>&lt;application\nandroid:name=\"android.support.multidex.MultiDexApplication\"\nandroid:hardwareAccelerated=\"true\"\nandroid:icon=\"@mipmap/ic_launcher\"\nandroid:label=\"@string/app_name\"\nandroid:supportsRtl=\"true\"\nandroid:theme=\"@style/AppTheme\"&gt;\n</code></pre>\n\n<p>And along with this on <strong>build.gradle</strong>(Module:app),</p>\n\n<pre><code>defaultConfig {\n      ...\n\n      // Enabling multidex support.\n      multiDexEnabled true\n}\n\ndependencies {\n     ... \n     compile 'com.android.support:multidex:1.0.2'\n}\n</code></pre>\n\n<p>Thanks.</p>\n"},{"comments":[{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1550478858,"post_id":48026641,"comment_id":96268582,"body_markdown":"It didn&#39;t help me (Samsung Galaxy S4, Android 5.0.1).","body":"It didn&#39;t help me (Samsung Galaxy S4, Android 5.0.1)."}],"tags":[],"owner":{"account_id":1264669,"reputation":499,"user_id":1222232,"display_name":"blinkmacalahan"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1514571144,"creation_date":1514571144,"answer_id":48026641,"question_id":22399572,"body_markdown":"I was getting this crash only on Samsung Lollipop devices and this [solution][1] worked for me.\r\n\r\n    dexOptions {\r\n         preDexLibraries false\r\n    }\r\n\r\nI&#39;m posting this answer here because this question is currently the highest ranked search result on Google for this crash and none of the above answers worked for me. \r\n  [1]: https://stackoverflow.com/a/46816876","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I was getting this crash only on Samsung Lollipop devices and this <a href=\"https://stackoverflow.com/a/46816876\">solution</a> worked for me.</p>\n\n<pre><code>dexOptions {\n     preDexLibraries false\n}\n</code></pre>\n\n<p>I'm posting this answer here because this question is currently the highest ranked search result on Google for this crash and none of the above answers worked for me. </p>\n"},{"tags":[],"owner":{"account_id":244790,"reputation":4294,"user_id":517840,"accept_rate":58,"display_name":"passatgt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521390999,"creation_date":1521390999,"answer_id":49350332,"question_id":22399572,"body_markdown":"For me the issue appeared after i created a signed APK. To fix it, i generated a new, debug apk using Run / Build APK. After that, Run(cmd+r) works again without this error. ","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>For me the issue appeared after i created a signed APK. To fix it, i generated a new, debug apk using Run / Build APK. After that, Run(cmd+r) works again without this error. </p>\n"},{"comments":[{"owner":{"account_id":1150138,"reputation":3131,"user_id":1132033,"accept_rate":67,"display_name":"Lennon Spirlandelli"},"score":1,"creation_date":1539269336,"post_id":49614815,"comment_id":92449022,"body_markdown":"The Android Studio 3.1+ uses this dex complier by default","body":"The Android Studio 3.1+ uses this dex complier by default"}],"tags":[],"owner":{"account_id":8549769,"reputation":233,"user_id":6407070,"display_name":"nkadu1"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1523151840,"creation_date":1522685925,"answer_id":49614815,"question_id":22399572,"body_markdown":"The following solution worked for me...\r\n\r\nI tried everything mentioned above but still didn&#39;t get my app running.\r\nI have react-native app running on latest version of gradle 4+ and android studio.\r\n\r\nI had the issue where if i run react-native run-android it was failing with issue saying its not able to find MainApplication class...i.e ClassNotFoundException\r\n\r\nI was able to resolve the issue when I updated my gradle.properties to use the compiler D8.\r\n\r\nI added:\r\n\r\nandroid.enableD8=true\r\n\r\nto my gradle.properties\r\n\r\nDoc Details here:\r\nhttps://android-developers.googleblog.com/2017/08/next-generation-dex-compiler-now-in.html","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>The following solution worked for me...</p>\n\n<p>I tried everything mentioned above but still didn't get my app running.\nI have react-native app running on latest version of gradle 4+ and android studio.</p>\n\n<p>I had the issue where if i run react-native run-android it was failing with issue saying its not able to find MainApplication class...i.e ClassNotFoundException</p>\n\n<p>I was able to resolve the issue when I updated my gradle.properties to use the compiler D8.</p>\n\n<p>I added:</p>\n\n<p>android.enableD8=true</p>\n\n<p>to my gradle.properties</p>\n\n<p>Doc Details here:\n<a href=\"https://android-developers.googleblog.com/2017/08/next-generation-dex-compiler-now-in.html\" rel=\"nofollow noreferrer\">https://android-developers.googleblog.com/2017/08/next-generation-dex-compiler-now-in.html</a></p>\n"},{"comments":[{"owner":{"account_id":2837945,"reputation":959,"user_id":2438177,"accept_rate":72,"display_name":"FraK"},"score":0,"creation_date":1531934401,"post_id":49757425,"comment_id":89786630,"body_markdown":"Tried multiple solutions, this little thing solved the problem, unbelievable!","body":"Tried multiple solutions, this little thing solved the problem, unbelievable!"},{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1550482658,"post_id":49757425,"comment_id":96270471,"body_markdown":"@FraK, the most rated solution contains this advice. Though I had already unchecked Instant Run (several years it has bringing many bugs).","body":"@FraK, the most rated solution contains this advice. Though I had already unchecked Instant Run (several years it has bringing many bugs)."}],"tags":[],"owner":{"account_id":3555029,"reputation":1963,"user_id":2968988,"accept_rate":100,"display_name":"Mohamed Nageh"},"comment_count":2,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1531985591,"creation_date":1523373756,"answer_id":49757425,"question_id":22399572,"body_markdown":"I faced this Issue multiple times and they&#39;re all solved by disabling **Instant Run**.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I faced this Issue multiple times and they're all solved by disabling <strong>Instant Run</strong>.</p>\n"},{"comments":[{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1550490703,"post_id":50856829,"comment_id":96275153,"body_markdown":"Wow, I have a 99%-Kotlin project What to do? :)","body":"Wow, I have a 99%-Kotlin project What to do? :)"},{"owner":{"account_id":7910432,"reputation":1285,"user_id":5974647,"accept_rate":21,"display_name":"Harry .Naeem"},"score":0,"creation_date":1550558320,"post_id":50856829,"comment_id":96301110,"body_markdown":"Can you please check, with Kotlin version is compatible with your underlying Android Studio. Its just a  guess. take a look","body":"Can you please check, with Kotlin version is compatible with your underlying Android Studio. Its just a  guess. take a look"},{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1550560078,"post_id":50856829,"comment_id":96301799,"body_markdown":"I have AS 3.3.1 and Kotlin 1.3.21. They are latest stable. Sorry, I suppose, all solutions described above and below are not suitable to my situation.","body":"I have AS 3.3.1 and Kotlin 1.3.21. They are latest stable. Sorry, I suppose, all solutions described above and below are not suitable to my situation."},{"owner":{"account_id":16567032,"reputation":785,"user_id":11971304,"display_name":"mahee96"},"score":0,"creation_date":1637190240,"post_id":50856829,"comment_id":123763386,"body_markdown":"yep, Thanks for reminding me, it indeed is the &quot;kapt&quot; annotation processor and kotlin plugin that needed to be added to my build.gradle coz, I did a 100% conversion from java to Kotlin but forgot that the compiler needs to be Kotlin compiler to generate the classes. Tricky to remember but effective constraint to watchout when dealing with kotlin environment.","body":"yep, Thanks for reminding me, it indeed is the &quot;kapt&quot; annotation processor and kotlin plugin that needed to be added to my build.gradle coz, I did a 100% conversion from java to Kotlin but forgot that the compiler needs to be Kotlin compiler to generate the classes. Tricky to remember but effective constraint to watchout when dealing with kotlin environment."},{"owner":{"account_id":15707570,"reputation":71,"user_id":11333898,"display_name":"Qadeer Muniry"},"score":0,"creation_date":1696638544,"post_id":50856829,"comment_id":136183479,"body_markdown":"WORKED FOR ME - This was because of the Kotlin configuration. If you convert the Java class in Kotlin and Kotlin is not configured you may face this issue.\n\nTo resolve this issue, add this line in gradle plugins (project Level)\n id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.8.0&#39; apply false\n\nThis line in gradle plugins (app level)\nid &#39;org.jetbrains.kotlin.android&#39;","body":"WORKED FOR ME - This was because of the Kotlin configuration. If you convert the Java class in Kotlin and Kotlin is not configured you may face this issue.  To resolve this issue, add this line in gradle plugins (project Level)  id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.8.0&#39; apply false  This line in gradle plugins (app level) id &#39;org.jetbrains.kotlin.android&#39;"}],"tags":[],"owner":{"account_id":7910432,"reputation":1285,"user_id":5974647,"accept_rate":21,"display_name":"Harry .Naeem"},"comment_count":5,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1528976801,"creation_date":1528976801,"answer_id":50856829,"question_id":22399572,"body_markdown":"In my case this issue arose because of Kotlin. In my existing code there was a class that was written Kotlin. I built the app, it installed and as soon as first activity opened app crashed. in the logcat this error was being shown. I then updated my Kotlin version from Kotlin website in app gradle file. Build the app again and it worked fine then.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>In my case this issue arose because of Kotlin. In my existing code there was a class that was written Kotlin. I built the app, it installed and as soon as first activity opened app crashed. in the logcat this error was being shown. I then updated my Kotlin version from Kotlin website in app gradle file. Build the app again and it worked fine then.</p>\n"},{"comments":[{"owner":{"account_id":6648992,"reputation":5061,"user_id":5131883,"display_name":"Yannick"},"score":0,"creation_date":1592227846,"post_id":51077498,"comment_id":110341488,"body_markdown":"This is not a good solution because it excludes all of your source files from resource shrinking. Only exclude only the files that are really necessary instead, otherwise you inflate your apk size.","body":"This is not a good solution because it excludes all of your source files from resource shrinking. Only exclude only the files that are really necessary instead, otherwise you inflate your apk size."}],"tags":[],"owner":{"account_id":3068374,"reputation":7527,"user_id":2599596,"accept_rate":63,"display_name":"Naveen Kumar M"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1530172230,"creation_date":1530172230,"answer_id":51077498,"question_id":22399572,"body_markdown":"If you are enabled `minifyEnabled` and `shrinkResources` to true in your app gradle file. You need to add the following line in `proguard-rules.pro` file\r\n\r\n&gt; -keep class com.yourpackage_name.** { *; }\r\n\r\nbecause minification is removed some important classes in our apk file. ","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>If you are enabled <code>minifyEnabled</code> and <code>shrinkResources</code> to true in your app gradle file. You need to add the following line in <code>proguard-rules.pro</code> file</p>\n\n<blockquote>\n  <p>-keep class com.yourpackage_name.** { *; }</p>\n</blockquote>\n\n<p>because minification is removed some important classes in our apk file. </p>\n"},{"tags":[],"owner":{"account_id":444211,"reputation":61229,"user_id":835883,"accept_rate":81,"display_name":"j2emanue"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1532940884,"creation_date":1532940884,"answer_id":51590259,"question_id":22399572,"body_markdown":"i had this issue before and the comments here helped in the past but this time it did not. i checked my proguard configuration and i **removed** the following lines and then it worked so proguard can have something to do with this error:\r\n\r\n     -optimizationpasses 5\r\n            -overloadaggressively\r\n            -repackageclasses &#39;&#39;\r\n            -allowaccessmodification\r\n            -dontskipnonpubliclibraryclassmembers","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>i had this issue before and the comments here helped in the past but this time it did not. i checked my proguard configuration and i <strong>removed</strong> the following lines and then it worked so proguard can have something to do with this error:</p>\n\n<pre><code> -optimizationpasses 5\n        -overloadaggressively\n        -repackageclasses ''\n        -allowaccessmodification\n        -dontskipnonpubliclibraryclassmembers\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4406855,"reputation":822,"user_id":3590996,"display_name":"PK Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1535108762,"creation_date":1535108762,"answer_id":52003123,"question_id":22399572,"body_markdown":"I was facing same issue. I tried everything possible for a day, but nothing worked.\r\nThe dependency which was causing problem was using lower compile sdk, target sdk and min sdk. I created library module for the project, copied all the sources and matched the sdk versions with application sdk versions. And finally it worked like a charm.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I was facing same issue. I tried everything possible for a day, but nothing worked.\nThe dependency which was causing problem was using lower compile sdk, target sdk and min sdk. I created library module for the project, copied all the sources and matched the sdk versions with application sdk versions. And finally it worked like a charm.</p>\n"},{"tags":[],"owner":{"account_id":2063502,"reputation":543,"user_id":1839558,"display_name":"lauksas"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1535456201,"creation_date":1535456201,"answer_id":52056903,"question_id":22399572,"body_markdown":"I had the same error and some answers mislead me on a newbie issue. I had the wrong package in my custom view descriptor like below. I hope it helps somebody.\r\n\r\n    &lt;com.my.app.wrong.package.MyActivity\r\n        android:id=&quot;@+id/myActivity&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginLeft=&quot;16dp&quot;\r\n        android:layout_marginRight=&quot;16dp&quot;\r\n        android:paddingTop=&quot;16dp&quot;\r\n        android:paddingBottom=&quot;8dp&quot;\r\n        android:gravity=&quot;left&quot; /&gt;\r\n\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I had the same error and some answers mislead me on a newbie issue. I had the wrong package in my custom view descriptor like below. I hope it helps somebody.</p>\n\n<pre><code>&lt;com.my.app.wrong.package.MyActivity\n    android:id=\"@+id/myActivity\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginLeft=\"16dp\"\n    android:layout_marginRight=\"16dp\"\n    android:paddingTop=\"16dp\"\n    android:paddingBottom=\"8dp\"\n    android:gravity=\"left\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1469918,"reputation":469,"user_id":6149323,"display_name":"hofs"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1539864022,"creation_date":1539864022,"answer_id":52873507,"question_id":22399572,"body_markdown":"Ashik abbas [answer][1] (disable **Instant Run**) work for me, but i need **Instant Run**, finally i found solution which is helpful for me.\r\njust disable **minifyEnabled**.\r\ngo to **build.gradle(Module: app)** in **debug** block and disable **minifyEnabled**:\r\n\r\n    debug {\r\n                minifyEnabled false\r\n    \r\n            }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/45320244/6149323","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>Ashik abbas <a href=\"https://stackoverflow.com/a/45320244/6149323\">answer</a> (disable <strong>Instant Run</strong>) work for me, but i need <strong>Instant Run</strong>, finally i found solution which is helpful for me.\njust disable <strong>minifyEnabled</strong>.\ngo to <strong>build.gradle(Module: app)</strong> in <strong>debug</strong> block and disable <strong>minifyEnabled</strong>:</p>\n\n<pre><code>debug {\n            minifyEnabled false\n\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6959051,"reputation":622,"user_id":5339154,"display_name":"Andrii Artamonov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1556398632,"creation_date":1556398632,"answer_id":55884808,"question_id":22399572,"body_markdown":"In my case, I used the old namespace library while my project was set up making use of androidx one. \r\n\r\nThe solution was to replace `android.support.design.widget.BottomNavigationView` component with the right one to escape from support library: `com.google.android.material.bottomnavigation.BottomNavigationView`.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>In my case, I used the old namespace library while my project was set up making use of androidx one. </p>\n\n<p>The solution was to replace <code>android.support.design.widget.BottomNavigationView</code> component with the right one to escape from support library: <code>com.google.android.material.bottomnavigation.BottomNavigationView</code>.</p>\n"},{"tags":[],"owner":{"account_id":451141,"reputation":775,"user_id":5685911,"display_name":"Akki"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1559764987,"creation_date":1559764987,"answer_id":56467234,"question_id":22399572,"body_markdown":"One possible reason would be the incorrect path of the activity in the Apps AndroidManifest.xml file.\r\nRegister the activity with in your AndroidManifest.xml with full relative path like below.\r\n\r\n    &lt;activity android:name=&quot;&lt;full_path&gt;.ActivityName&quot; /&gt;","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>One possible reason would be the incorrect path of the activity in the Apps AndroidManifest.xml file.\nRegister the activity with in your AndroidManifest.xml with full relative path like below.</p>\n\n<pre><code>&lt;activity android:name=\"&lt;full_path&gt;.ActivityName\" /&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3253190,"reputation":1004,"user_id":2742962,"display_name":"BugsBunnyBR"},"score":0,"creation_date":1567325034,"post_id":56789533,"comment_id":101926744,"body_markdown":"If you extends `MultiDexApplication` there is no need to call `MultiDex.install(this)`.","body":"If you extends <code>MultiDexApplication</code> there is no need to call <code>MultiDex.install(this)</code>."},{"owner":{"account_id":11679511,"reputation":1329,"user_id":8551764,"display_name":"Mostafa Arian Nejad"},"score":0,"creation_date":1567334166,"post_id":56789533,"comment_id":101928504,"body_markdown":"@BugsBunnyBR Exactly! that&#39;s what I said!","body":"@BugsBunnyBR Exactly! that&#39;s what I said!"}],"tags":[],"owner":{"account_id":11679511,"reputation":1329,"user_id":8551764,"display_name":"Mostafa Arian Nejad"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1561633132,"creation_date":1561633132,"answer_id":56789533,"question_id":22399572,"body_markdown":"This solved my case:\r\n\r\nIn my case, I was getting the exception below (note that my application class was causing the exception, not my activity):\r\n\r\n    ClassNotFoundException: Didn&#39;t find class &quot;com.example.MyApplication&quot; on path: DexPathList\r\n\r\nI was getting this exception only on devices equal or below API 19, the reason was that I was extending `MultiDexApplication()` class and overriding `attachBaseContext` at the same time! When I removed `attachBaseContext` everything got on track.\r\n\r\n    class MyApplication : MultiDexApplication() {\r\n\r\n    override fun onCreate() {\r\n        super.onCreate()\r\n        // ...\r\n    }\r\n\r\n    override fun attachBaseContext(base: Context?) {\r\n        super.attachBaseContext(base)\r\n        MultiDex.install(this)\r\n    }\r\n\r\nSo if you happen to have such case as I had (Which isn&#39;t likely), there is no need to extend `MultiDexApplication()` and override `attachBaseContext` at the same time, doing one of these actions is enough.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>This solved my case:</p>\n\n<p>In my case, I was getting the exception below (note that my application class was causing the exception, not my activity):</p>\n\n<pre><code>ClassNotFoundException: Didn't find class \"com.example.MyApplication\" on path: DexPathList\n</code></pre>\n\n<p>I was getting this exception only on devices equal or below API 19, the reason was that I was extending <code>MultiDexApplication()</code> class and overriding <code>attachBaseContext</code> at the same time! When I removed <code>attachBaseContext</code> everything got on track.</p>\n\n<pre><code>class MyApplication : MultiDexApplication() {\n\noverride fun onCreate() {\n    super.onCreate()\n    // ...\n}\n\noverride fun attachBaseContext(base: Context?) {\n    super.attachBaseContext(base)\n    MultiDex.install(this)\n}\n</code></pre>\n\n<p>So if you happen to have such case as I had (Which isn't likely), there is no need to extend <code>MultiDexApplication()</code> and override <code>attachBaseContext</code> at the same time, doing one of these actions is enough.</p>\n"},{"tags":[],"owner":{"account_id":15287035,"reputation":774,"user_id":11029770,"display_name":"ConcernedHobbit"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1577654795,"creation_date":1577654795,"answer_id":59523438,"question_id":22399572,"body_markdown":"This was similar to my problem--after adding a Kotlin file to an all Java app, my app kept crashing when I would access a view that used a Kotlin file. I shut down Android Studio and restarted it, and it prompted me with a message saying &quot;Kotlin not configured, would you like to configure?&quot;, which then solved my problem.\r\n\r\nWhat this ultimately did is add the following `classpath` line inside my project `build.gradle` file:\r\n\r\n```\r\nbuildscript {\r\n   ...\r\n   dependencies {\r\n      ...\r\n      classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n      ...\r\n   }\r\n   ...\r\n}\r\n```\r\n\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>This was similar to my problem--after adding a Kotlin file to an all Java app, my app kept crashing when I would access a view that used a Kotlin file. I shut down Android Studio and restarted it, and it prompted me with a message saying \"Kotlin not configured, would you like to configure?\", which then solved my problem.</p>\n\n<p>What this ultimately did is add the following <code>classpath</code> line inside my project <code>build.gradle</code> file:</p>\n\n<pre><code>buildscript {\n   ...\n   dependencies {\n      ...\n      classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n      ...\n   }\n   ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9809771,"reputation":6806,"user_id":10699119,"display_name":"Sana Ebadi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587037957,"creation_date":1587037957,"answer_id":61249567,"question_id":22399572,"body_markdown":"in my case, I define the Activity in `Manifest.xml` and forgot to create any `activity`.\r\nSo I created Activity and define it in `manifest` and my error solved!","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>in my case, I define the Activity in <code>Manifest.xml</code> and forgot to create any <code>activity</code>.\nSo I created Activity and define it in <code>manifest</code> and my error solved!</p>\n"},{"tags":[],"owner":{"account_id":16958343,"reputation":303,"user_id":12266091,"display_name":"Psychopomp"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1593666782,"creation_date":1593665427,"answer_id":62689224,"question_id":22399572,"body_markdown":"delete &#39;android/app/.settings&#39; folder\r\n\r\nor\r\n\r\ndelete &#39;android/.settings&#39; folder\r\n\r\nor\r\n\r\ndelete &#39;android/.build&#39; folder\r\n\r\nor\r\n\r\ndelete &#39;android/.idea&#39; folder\r\n\r\nand \r\n\r\nyarn react-native run android","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>delete 'android/app/.settings' folder</p>\n<p>or</p>\n<p>delete 'android/.settings' folder</p>\n<p>or</p>\n<p>delete 'android/.build' folder</p>\n<p>or</p>\n<p>delete 'android/.idea' folder</p>\n<p>and</p>\n<p>yarn react-native run android</p>\n"},{"comments":[{"owner":{"account_id":5848522,"reputation":2057,"user_id":6411857,"display_name":"DroidClicketyClacker"},"score":2,"creation_date":1604116778,"post_id":62852289,"comment_id":114256167,"body_markdown":"This took forever for me to find. Thank you very much!","body":"This took forever for me to find. Thank you very much!"},{"owner":{"account_id":5172500,"reputation":438,"user_id":4140589,"display_name":"jesto paul"},"score":1,"creation_date":1606961120,"post_id":62852289,"comment_id":115124875,"body_markdown":"This is fixed my issue","body":"This is fixed my issue"}],"tags":[],"owner":{"account_id":8005925,"reputation":1108,"user_id":6039240,"display_name":"Amr"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1594487836,"creation_date":1594487836,"answer_id":62852289,"question_id":22399572,"body_markdown":"for anyone who comes across this problem now, with android studio 4.0+ you just have to enable java 8 as mentioned [here][1] \r\n\r\n    android {\r\n        defaultConfig {\r\n                ...\r\n        }\r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/57789915/6039240","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>for anyone who comes across this problem now, with android studio 4.0+ you just have to enable java 8 as mentioned <a href=\"https://stackoverflow.com/a/57789915/6039240\">here</a></p>\n<pre><code>android {\n    defaultConfig {\n            ...\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2668537,"reputation":183,"user_id":9417638,"display_name":"Shivegeeky"},"score":0,"creation_date":1650468163,"post_id":62959189,"comment_id":127124937,"body_markdown":"I added minifyEnabled false for release build then it start working at my side also thanks @Arpit","body":"I added minifyEnabled false for release build then it start working at my side also thanks @Arpit"}],"tags":[],"owner":{"account_id":4951203,"reputation":7272,"user_id":3985071,"accept_rate":54,"display_name":"Arpit Patel"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1595007604,"creation_date":1595007604,"answer_id":62959189,"question_id":22399572,"body_markdown":"I am going with @hofs but displaying where should put minifyEnabled. \r\n\r\nIn Module Gradle, Add **minifyEnabled false** in **Debug** block will work for me.\r\n\r\n     android {\r\n        compileSdkVersion 28\r\n        buildToolsVersion &quot;29.0.2&quot;\r\n        defaultConfig {\r\n            applicationId &quot;com.korechi.roamioapp&quot;\r\n            minSdkVersion 23\r\n            targetSdkVersion 28\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n            multiDexEnabled true\r\n        }\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled true\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n            debug {\r\n              minifyEnabled false\r\n            }\r\n        }\r\n    \r\n    }","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I am going with @hofs but displaying where should put minifyEnabled.</p>\n<p>In Module Gradle, Add <strong>minifyEnabled false</strong> in <strong>Debug</strong> block will work for me.</p>\n<pre><code> android {\n    compileSdkVersion 28\n    buildToolsVersion &quot;29.0.2&quot;\n    defaultConfig {\n        applicationId &quot;com.korechi.roamioapp&quot;\n        minSdkVersion 23\n        targetSdkVersion 28\n        versionCode 1\n        versionName &quot;1.0&quot;\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        multiDexEnabled true\n    }\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n        debug {\n          minifyEnabled false\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5445664,"reputation":4925,"user_id":4332316,"accept_rate":20,"display_name":"Ali Akram"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595009610,"creation_date":1595009610,"answer_id":62959645,"question_id":22399572,"body_markdown":"Flipper isn&#39;t working on `0.61.x`, so commenting out/removing `initializeFlipper(this)` in your `MainApplication.java` should do the trick.\r\n\r\nChill Pill.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>Flipper isn't working on <code>0.61.x</code>, so commenting out/removing <code>initializeFlipper(this)</code> in your <code>MainApplication.java</code> should do the trick.</p>\n<p>Chill Pill.</p>\n"},{"comments":[{"owner":{"account_id":11569004,"reputation":76,"user_id":8476308,"display_name":"John De la cruz"},"score":0,"creation_date":1677525686,"post_id":63576082,"comment_id":133351486,"body_markdown":"That is not a solution. You are avoiding a problem.","body":"That is not a solution. You are avoiding a problem."}],"tags":[],"owner":{"account_id":11990645,"reputation":616,"user_id":8773880,"display_name":"David Innocent"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1598348424,"creation_date":1598348424,"answer_id":63576082,"question_id":22399572,"body_markdown":"For me what i ended up doing is disabling `minifyEnabled  false` and `shrinkResources  false`","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>For me what i ended up doing is disabling <code>minifyEnabled  false</code> and <code>shrinkResources  false</code></p>\n"},{"tags":[],"owner":{"account_id":2497935,"reputation":3239,"user_id":2173890,"accept_rate":30,"display_name":"sifr_dot_in"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1632383828,"creation_date":1632383828,"answer_id":69296072,"question_id":22399572,"body_markdown":"Open &quot;AndroidManifest&quot; file and check for errors&lt;br&gt;\r\nor&lt;br&gt;\r\ncheck whether you have declared that activity name (which we forget when we copy+paste class of activity).\r\n\r\n\r\nin my case i had replaced all occurrences &quot;com&quot; with &quot;ctrl&quot;+&quot;shift&quot;+&quot;R&quot; command, which also changed the names of activities (which started with com) in manifest.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>Open &quot;AndroidManifest&quot; file and check for errors<br>\nor<br>\ncheck whether you have declared that activity name (which we forget when we copy+paste class of activity).</p>\n<p>in my case i had replaced all occurrences &quot;com&quot; with &quot;ctrl&quot;+&quot;shift&quot;+&quot;R&quot; command, which also changed the names of activities (which started with com) in manifest.</p>\n"},{"tags":[],"owner":{"account_id":9332107,"reputation":374,"user_id":6927551,"display_name":"fazal ur Rehman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646132401,"creation_date":1646132401,"answer_id":71307429,"question_id":22399572,"body_markdown":"----------\r\n  Converting Java code to Kotlin code may cause this problem so configure kotlin in your project may remove this problem","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<hr />\n<p>Converting Java code to Kotlin code may cause this problem so configure kotlin in your project may remove this problem</p>\n"},{"tags":[],"owner":{"account_id":12690021,"reputation":594,"user_id":9220465,"display_name":"Mrudul Addipalli"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653282909,"creation_date":1653282909,"answer_id":72343524,"question_id":22399572,"body_markdown":"I tried most of the cache related answers - but didn&#39;t work,\r\n\r\nRCA \r\n\r\n     I created broadcast receiver with android studio tool, and it didn&#39;t give correct package name,\r\n\r\nActual [ Added By Android Studio ]\r\n\r\n     package com.example.app;\r\n     \r\nExpected\r\n\r\n     package com.example.app.all_sms_reader;","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I tried most of the cache related answers - but didn't work,</p>\n<p>RCA</p>\n<pre><code> I created broadcast receiver with android studio tool, and it didn't give correct package name,\n</code></pre>\n<p>Actual [ Added By Android Studio ]</p>\n<pre><code> package com.example.app;\n \n</code></pre>\n<p>Expected</p>\n<pre><code> package com.example.app.all_sms_reader;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20481888,"reputation":21,"user_id":15029922,"display_name":"Nefnaf Raouf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662832644,"creation_date":1662832644,"answer_id":73674079,"question_id":22399572,"body_markdown":"&gt;src-&gt;main-&gt;kotlin..........\r\nMainActivity.kt\r\npackage your_package\r\n\r\nimport io.flutter.embedding.android.FlutterActivity\r\nimport io.flutter.embedding.android.FlutterFragmentActivity\r\n\r\nclass MainActivity: FlutterFragmentActivity() {\r\n}\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<blockquote>\n<p>src-&gt;main-&gt;kotlin..........\nMainActivity.kt\npackage your_package</p>\n</blockquote>\n<p>import io.flutter.embedding.android.FlutterActivity\nimport io.flutter.embedding.android.FlutterFragmentActivity</p>\n<p>class MainActivity: FlutterFragmentActivity() {\n}</p>\n"},{"tags":[],"owner":{"account_id":17441093,"reputation":632,"user_id":12643106,"display_name":"Muzammil Hussain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669486164,"creation_date":1669486164,"answer_id":74584540,"question_id":22399572,"body_markdown":"This issue occurs when your namespace didn&#39;t match with your package. To resolve this issue follow these steps:\r\n\r\nNote: If you are changing your application package follow these steps:\r\n\r\n 1. create New package you want by right click on java&gt;New&gt;package.\r\n 2. then select all of your code from previous package and drop it in new package. Android studio will refactor for you.\r\n 3. Goto Build.gradle(:app) and change namespace to new package you recently created.\r\n 4. Clean and Rebuild project and your issue will be resolved.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>This issue occurs when your namespace didn't match with your package. To resolve this issue follow these steps:</p>\n<p>Note: If you are changing your application package follow these steps:</p>\n<ol>\n<li>create New package you want by right click on java&gt;New&gt;package.</li>\n<li>then select all of your code from previous package and drop it in new package. Android studio will refactor for you.</li>\n<li>Goto Build.gradle(:app) and change namespace to new package you recently created.</li>\n<li>Clean and Rebuild project and your issue will be resolved.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1884098,"reputation":758,"user_id":1703677,"accept_rate":86,"display_name":"beyondtheteal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680480645,"creation_date":1680480645,"answer_id":75915263,"question_id":22399572,"body_markdown":"My issue was because of `kapt`. \r\n\r\nI had a dependency on Hilt but the `kapt` method wasn&#39;t working, so I changed it to `implementation` just so it would compile. \r\n\r\nThe reason `kapt` was showing an error was because I was missing this plugin at the top of the file: \r\n\r\n    id(&quot;org.jetbrains.kotlin.android&quot;)","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>My issue was because of <code>kapt</code>.</p>\n<p>I had a dependency on Hilt but the <code>kapt</code> method wasn't working, so I changed it to <code>implementation</code> just so it would compile.</p>\n<p>The reason <code>kapt</code> was showing an error was because I was missing this plugin at the top of the file:</p>\n<pre><code>id(&quot;org.jetbrains.kotlin.android&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12105180,"reputation":31,"user_id":8844224,"display_name":"Sumedha Kulkarni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688556240,"creation_date":1688554914,"answer_id":76619688,"question_id":22399572,"body_markdown":" 1. Please make sure that activity path is correct in AndroidManifest.xml, if that doesn&#39;t work, simply invalidate caches and restart. \r\n 2. If you are trying to convert existing java android project in kotlin, and kotlin is not configured, then you might face same issue:\r\nTo resolve above: create an new blank Fragment inside your app module, and android studio will automatically configure kotlin for you.\r\n\r\nHope it helps..\r\n\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<ol>\n<li>Please make sure that activity path is correct in AndroidManifest.xml, if that doesn't work, simply invalidate caches and restart.</li>\n<li>If you are trying to convert existing java android project in kotlin, and kotlin is not configured, then you might face same issue:\nTo resolve above: create an new blank Fragment inside your app module, and android studio will automatically configure kotlin for you.</li>\n</ol>\n<p>Hope it helps..</p>\n"},{"tags":[],"owner":{"account_id":17441093,"reputation":632,"user_id":12643106,"display_name":"Muzammil Hussain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695385500,"creation_date":1695385500,"answer_id":77157583,"question_id":22399572,"body_markdown":"In my case, I converted my project from java to kotlin and was facing this error.\r\nTo resolve this issue I have done these steps\r\n\r\n1. Goto build.gradle (:project)\r\n\r\n       classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:1.8.20&quot;\r\n\r\n2. Goto build.gradle(:app)\r\n   \r\n\r\n       apply plugin: &#39;kotlin-android&#39;\r\n        \r\n        android {\r\n          .......\r\n             compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_17\r\n            targetCompatibility JavaVersion.VERSION_17\r\n        }\r\n        kotlinOptions {\r\n            jvmTarget = &#39;17&#39;\r\n        }\r\n        .....\r\n        }\r\n\r\n\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>In my case, I converted my project from java to kotlin and was facing this error.\nTo resolve this issue I have done these steps</p>\n<ol>\n<li><p>Goto build.gradle (:project)</p>\n<pre><code>classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:1.8.20&quot;\n</code></pre>\n</li>\n<li><p>Goto build.gradle(:app)</p>\n<pre><code>apply plugin: 'kotlin-android'\n\n android {\n   .......\n      compileOptions {\n     sourceCompatibility JavaVersion.VERSION_17\n     targetCompatibility JavaVersion.VERSION_17\n }\n kotlinOptions {\n     jvmTarget = '17'\n }\n .....\n }\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":3472587,"reputation":2515,"user_id":2906564,"accept_rate":41,"display_name":"Karthik Sivam"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":286416,"favorite_count":0,"down_vote_count":0,"up_vote_count":194,"answer_count":45,"score":194,"last_activity_date":1695385500,"creation_date":1394785212,"question_id":22399572,"body_markdown":"I&#39;m currently working on a project in which I have to use purely native ndk. It worked when I try running an helloworld example from Irrlicht engine source. Then I try using it in my project following the same format of that example. But I got:\r\n\r\n    03-14 01:40:05.308: E/AndroidRuntime(799): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.irrlicht.example1/android.app.POMActivity}: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;android.app.POMActivity&quot; on path: DexPathList[[zip file &quot;/data/app/com.irrlicht.example1-2.apk&quot;],nativeLibraryDirectories=[/data/app-lib/com.irrlicht.example1-2, /system/lib]]\r\n\r\n\r\nwhile running my project.\r\n\r\n\r\nHere is my main.cpp file:\r\n\r\n    #include &lt;android/log.h&gt;\r\n    #include &lt;jni.h&gt;\r\n    #include &lt;android_native_app_glue.h&gt;\r\n    #include &quot;android_tools.h&quot;\r\n    #ifdef _IRR_ANDROID_PLATFORM_\r\n    void android_main(android_app* app)\r\n    {\r\n    __android_log_print(4 , &quot;pom&quot; , &quot;nothing&quot;);\r\n    }\r\n   #endif\r\n\r\nin Android.mk: \r\n\r\n    LOCAL_PATH := $(call my-dir)/..\r\n    IRRLICHT_PROJECT_PATH := $(LOCAL_PATH)\r\n    include $(CLEAR_VARS)\r\n    LOCAL_MODULE := Irrlicht\r\n    LOCAL_SRC_FILES := /home/karthik/Android/Essentials/ogl-es/lib/Android/libIrrlicht.a\r\n    include $(PREBUILT_STATIC_LIBRARY)\r\n    include $(CLEAR_VARS)\r\n    LOCAL_MODULE := HelloWorldMobile1\r\n    LOCAL_CFLAGS := -D_IRR_ANDROID_PLATFORM_ -pipe -fno-exceptions -fno-rtti -fstrict-aliasing\r\n    LOCAL_C_INCLUDES := -I ../../include -I /home/karthik/Android/Essentials/ogl-es/include -I /home/karthik/Android/json/jsoncpp-src-0.5.0/libs/linux-gcc-4.8 -I /home/karthik/Android/json/jsoncpp-src-0.5.0/include/json \r\n    LOCAL_SRC_FILES :=  android_tools.cpp main.cpp\r\n    LOCAL_LDLIBS := -lEGL -llog -lGLESv1_CM -lGLESv2 -lz -landroid -ldl \r\n    LOCAL_STATIC_LIBRARIES := Irrlicht android_native_app_glue\r\n    include $(BUILD_SHARED_LIBRARY)\r\n    $(call import-module,android/native_app_glue)\r\n\r\nAnd I have given Activity name in AndroidManifest.xml:\r\n\r\n\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    \tpackage=&quot;com.irrlicht.example1&quot;\r\n    \tandroid:versionCode=&quot;1&quot;\r\n    \tandroid:versionName=&quot;1.0&quot;&gt;\r\n    ...\r\n    &lt;application android:icon=&quot;@drawable/irr_icon&quot; android:label=&quot;HelloWorldMobile1&quot; android:theme=&quot;@android:style/Theme.NoTitleBar.Fullscreen&quot; android:debuggable=&quot;true&quot;&gt;\r\n            &lt;activity android:name=&quot;android.app.POMActivity&quot;\r\n    \t\tandroid:label=&quot;HelloWorldMobile1&quot;\r\n    \t\tandroid:launchMode=&quot;singleTask&quot;\r\n    \t\tandroid:configChanges=&quot;orientation|keyboardHidden&quot;\r\n    \t\tandroid:screenOrientation=&quot;portrait&quot;\r\n    \t\tandroid:clearTaskOnLaunch=&quot;true&quot;&gt;\r\n    \t\t&lt;meta-data android:name=&quot;android.app.lib_name&quot; android:value=&quot;HelloWorldMobile1&quot; /&gt;\t\t\t\t\t\t\r\n\r\nWhat is the mistake I am doing here? I&#39;ll post full code if necassary.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I'm currently working on a project in which I have to use purely native ndk. It worked when I try running an helloworld example from Irrlicht engine source. Then I try using it in my project following the same format of that example. But I got:</p>\n\n<pre><code>03-14 01:40:05.308: E/AndroidRuntime(799): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.irrlicht.example1/android.app.POMActivity}: java.lang.ClassNotFoundException: Didn't find class \"android.app.POMActivity\" on path: DexPathList[[zip file \"/data/app/com.irrlicht.example1-2.apk\"],nativeLibraryDirectories=[/data/app-lib/com.irrlicht.example1-2, /system/lib]]\n</code></pre>\n\n<p>while running my project.</p>\n\n<p>Here is my main.cpp file:</p>\n\n<pre><code>#include &lt;android/log.h&gt;\n#include &lt;jni.h&gt;\n#include &lt;android_native_app_glue.h&gt;\n#include \"android_tools.h\"\n#ifdef _IRR_ANDROID_PLATFORM_\nvoid android_main(android_app* app)\n{\n__android_log_print(4 , \"pom\" , \"nothing\");\n}\n</code></pre>\n\n<p>#endif</p>\n\n<p>in Android.mk: </p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)/..\nIRRLICHT_PROJECT_PATH := $(LOCAL_PATH)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := Irrlicht\nLOCAL_SRC_FILES := /home/karthik/Android/Essentials/ogl-es/lib/Android/libIrrlicht.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := HelloWorldMobile1\nLOCAL_CFLAGS := -D_IRR_ANDROID_PLATFORM_ -pipe -fno-exceptions -fno-rtti -fstrict-aliasing\nLOCAL_C_INCLUDES := -I ../../include -I /home/karthik/Android/Essentials/ogl-es/include -I /home/karthik/Android/json/jsoncpp-src-0.5.0/libs/linux-gcc-4.8 -I /home/karthik/Android/json/jsoncpp-src-0.5.0/include/json \nLOCAL_SRC_FILES :=  android_tools.cpp main.cpp\nLOCAL_LDLIBS := -lEGL -llog -lGLESv1_CM -lGLESv2 -lz -landroid -ldl \nLOCAL_STATIC_LIBRARIES := Irrlicht android_native_app_glue\ninclude $(BUILD_SHARED_LIBRARY)\n$(call import-module,android/native_app_glue)\n</code></pre>\n\n<p>And I have given Activity name in AndroidManifest.xml:</p>\n\n<pre><code>&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.irrlicht.example1\"\n    android:versionCode=\"1\"\n    android:versionName=\"1.0\"&gt;\n...\n&lt;application android:icon=\"@drawable/irr_icon\" android:label=\"HelloWorldMobile1\" android:theme=\"@android:style/Theme.NoTitleBar.Fullscreen\" android:debuggable=\"true\"&gt;\n        &lt;activity android:name=\"android.app.POMActivity\"\n        android:label=\"HelloWorldMobile1\"\n        android:launchMode=\"singleTask\"\n        android:configChanges=\"orientation|keyboardHidden\"\n        android:screenOrientation=\"portrait\"\n        android:clearTaskOnLaunch=\"true\"&gt;\n        &lt;meta-data android:name=\"android.app.lib_name\" android:value=\"HelloWorldMobile1\" /&gt;                     \n</code></pre>\n\n<p>What is the mistake I am doing here? I'll post full code if necassary.</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1695384873,"post_id":77157261,"comment_id":136020935,"body_markdown":"Sounds like Jackson changed the implementation to be a bit more information-dense. A welcome change, if you ask me.","body":"Sounds like Jackson changed the implementation to be a bit more information-dense. A welcome change, if you ask me."}],"answers":[{"tags":[],"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695384908,"creation_date":1695384908,"answer_id":77157520,"question_id":77157261,"body_markdown":"You can achieve this by setting the padding of the arrays as follows:\r\n\r\n```java\r\ntry (OutputStream ous = Files.newOutputStream(file)) {\r\n    DefaultPrettyPrinter prettyPrinter = new DefaultPrettyPrinter();        \r\n    prettyPrinter.indentArraysWith(DefaultIndenter.SYSTEM_LINEFEED_INSTANCE);\r\n\r\n    mapper.writer()\r\n          .with(prettyPrinter)\r\n          .writeValue(ous, list);\r\n}\r\n```","title":"Save pretty JSON file using Jackson","body":"<p>You can achieve this by setting the padding of the arrays as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (OutputStream ous = Files.newOutputStream(file)) {\n    DefaultPrettyPrinter prettyPrinter = new DefaultPrettyPrinter();        \n    prettyPrinter.indentArraysWith(DefaultIndenter.SYSTEM_LINEFEED_INSTANCE);\n\n    mapper.writer()\n          .with(prettyPrinter)\n          .writeValue(ous, list);\n}\n</code></pre>\n"}],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77157520,"answer_count":1,"score":1,"last_activity_date":1695384908,"creation_date":1695382498,"question_id":77157261,"body_markdown":"Jackson version 2.15.2\r\n\r\nTo save a json file I use the following code:\r\n\r\n    mapper.writerWithDefaultPrettyPrinter().writeValue(file, object);\r\n\r\nthat I use quite often and it was working as expected, until now when I try for the first time to save a List of objects.\r\n\r\n\r\nExpected result:\r\n\r\n    [\r\n       {\r\n          &quot;firstName&quot;:&quot;a&quot;,\r\n          &quot;lastName&quot;:&quot;a&quot;\r\n       },\r\n       {\r\n          &quot;firstName&quot;:&quot;b&quot;,\r\n          &quot;lastName&quot;:&quot;b&quot;\r\n       },\r\n       {\r\n          &quot;firstName&quot;:&quot;c&quot;,\r\n          &quot;lastName&quot;:&quot;c&quot;\r\n       }\r\n    ]\r\n\r\nbut the written file looks like that:\r\n\r\n    [ {\r\n      &quot;firstName&quot; : &quot;a&quot;,\r\n      &quot;lastName&quot; : &quot;a&quot;\r\n    }, {\r\n      &quot;firstName&quot; : &quot;b&quot;,\r\n      &quot;lastName&quot; : &quot;b&quot;\r\n    }, {\r\n      &quot;firstName&quot; : &quot;c&quot;,\r\n      &quot;lastName&quot; : &quot;c&quot;\r\n    } ]\r\n\r\nIs there any other configuration that I can use to obtain the expected result?\r\n","title":"Save pretty JSON file using Jackson","body":"<p>Jackson version 2.15.2</p>\n<p>To save a json file I use the following code:</p>\n<pre><code>mapper.writerWithDefaultPrettyPrinter().writeValue(file, object);\n</code></pre>\n<p>that I use quite often and it was working as expected, until now when I try for the first time to save a List of objects.</p>\n<p>Expected result:</p>\n<pre><code>[\n   {\n      &quot;firstName&quot;:&quot;a&quot;,\n      &quot;lastName&quot;:&quot;a&quot;\n   },\n   {\n      &quot;firstName&quot;:&quot;b&quot;,\n      &quot;lastName&quot;:&quot;b&quot;\n   },\n   {\n      &quot;firstName&quot;:&quot;c&quot;,\n      &quot;lastName&quot;:&quot;c&quot;\n   }\n]\n</code></pre>\n<p>but the written file looks like that:</p>\n<pre><code>[ {\n  &quot;firstName&quot; : &quot;a&quot;,\n  &quot;lastName&quot; : &quot;a&quot;\n}, {\n  &quot;firstName&quot; : &quot;b&quot;,\n  &quot;lastName&quot; : &quot;b&quot;\n}, {\n  &quot;firstName&quot; : &quot;c&quot;,\n  &quot;lastName&quot; : &quot;c&quot;\n} ]\n</code></pre>\n<p>Is there any other configuration that I can use to obtain the expected result?</p>\n"},{"tags":["java","apache-kafka"],"comments":[{"owner":{"account_id":9452345,"reputation":6871,"user_id":7028697,"display_name":"amethystic"},"score":5,"creation_date":1502186471,"post_id":45560255,"comment_id":78089288,"body_markdown":"Although the user thread hangs for more than 10 seconds, heartbeat thread could still be able to send out heartbeats normally, that&#39;s why no exceptions were thrown and that&#39;s also the reason why `max.poll.intervals.ms` was introduced. What I am interested in is why you still got CommitFailException when `max.poll.intervals.ms` is set to Integer.MAX_VALUE.","body":"Although the user thread hangs for more than 10 seconds, heartbeat thread could still be able to send out heartbeats normally, that&#39;s why no exceptions were thrown and that&#39;s also the reason why <code>max.poll.intervals.ms</code> was introduced. What I am interested in is why you still got CommitFailException when <code>max.poll.intervals.ms</code> is set to Integer.MAX_VALUE."},{"owner":{"account_id":4882220,"reputation":2203,"user_id":3935642,"accept_rate":67,"display_name":"Simon Su"},"score":0,"creation_date":1502244301,"post_id":45560255,"comment_id":78120462,"body_markdown":"That&#39;s my question, I&#39;m also very confused about this. ..","body":"That&#39;s my question, I&#39;m also very confused about this. .."},{"owner":{"account_id":9452345,"reputation":6871,"user_id":7028697,"display_name":"amethystic"},"score":0,"creation_date":1502249947,"post_id":45560255,"comment_id":78121820,"body_markdown":"Could it be reproduced easily or it  just happened only once?","body":"Could it be reproduced easily or it  just happened only once?"},{"owner":{"account_id":9983336,"reputation":4132,"user_id":7769052,"accept_rate":75,"display_name":"banan3&#39;14"},"score":0,"creation_date":1695867799,"post_id":45560255,"comment_id":136082318,"body_markdown":"It is nicely explained here https://medium.com/@Irori/dangerous-default-kafka-settings-part-1-2ee99ee7dfe5","body":"It is nicely explained here <a href=\"https://medium.com/@Irori/dangerous-default-kafka-settings-part-1-2ee99ee7dfe5\" rel=\"nofollow noreferrer\">medium.com/@Irori/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":1318397,"reputation":840,"user_id":1264760,"accept_rate":86,"display_name":"F. Santiago"},"score":3,"creation_date":1544604540,"post_id":47405465,"comment_id":94330847,"body_markdown":"Worked for me as well!\nDefault value for group.max.session.timeout.ms is 30000 and I set my session.timeout.ms to 25000.","body":"Worked for me as well! Default value for group.max.session.timeout.ms is 30000 and I set my session.timeout.ms to 25000."},{"owner":{"account_id":10059115,"reputation":324,"user_id":7436412,"accept_rate":67,"display_name":"Zap"},"score":0,"creation_date":1609157444,"post_id":47405465,"comment_id":115761002,"body_markdown":"Actually it&#39;s in fact 30000, see here: http://kafka.apache.org/090/documentation.html#brokerconfigs","body":"Actually it&#39;s in fact 30000, see here: <a href=\"http://kafka.apache.org/090/documentation.html#brokerconfigs\" rel=\"nofollow noreferrer\">kafka.apache.org/090/documentation.html#brokerconfigs</a>"}],"tags":[],"owner":{"account_id":12303305,"reputation":241,"user_id":8977113,"display_name":"Rahul Teke"},"comment_count":2,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1544656450,"creation_date":1511240011,"answer_id":47405465,"question_id":45560255,"body_markdown":"`session.timeout.ms` set on the consumer should be less than the `group.max.session.timeout.ms` set on Kafka broker. \r\n\r\nThis resolved the issue for me. \r\n\r\nCredit to github link [Commit Failures][1]\r\n\r\n\r\n  [1]: https://github.com/dpkp/kafka-python/issues/746","title":"CommitFailedException Commit cannot be completed since the group has already rebalanced and assigned the partitions to another member","body":"<p><code>session.timeout.ms</code> set on the consumer should be less than the <code>group.max.session.timeout.ms</code> set on Kafka broker. </p>\n\n<p>This resolved the issue for me. </p>\n\n<p>Credit to github link <a href=\"https://github.com/dpkp/kafka-python/issues/746\" rel=\"noreferrer\">Commit Failures</a></p>\n"},{"tags":[],"owner":{"account_id":4856711,"reputation":2710,"user_id":3917452,"accept_rate":87,"display_name":"Abhimanyu"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1695383967,"creation_date":1511245028,"answer_id":47406407,"question_id":45560255,"body_markdown":"For this you need to handle the rebalancing condition in your code and should process the ongoing message and commit it before rebalancing \r\n\r\nLike : \r\n\r\n    private class HandleRebalance implements ConsumerRebalanceListener {\r\n        public void onPartitionsAssigned(Collection&lt;TopicPartition&gt; partitions) {\r\n            // Implement what you want to do once rebalancing is done.\r\n        }\r\n    \r\n        public void onPartitionsRevoked(Collection&lt;TopicPartition&gt; partitions) {\r\n            // commit current method\r\n        }\r\n    }\r\n\r\nand Use this syntax for subscribing the topic :\r\n\r\n&gt; kafkaConsumer.subscribe(topicNameList , new HandleRebalance())\r\n\r\nThe advantage of doing this : \r\n\r\n 1. Messages will not repeat when the rebalancing is taking place.\r\n \r\n 2. No commit fail exception","title":"CommitFailedException Commit cannot be completed since the group has already rebalanced and assigned the partitions to another member","body":"<p>For this you need to handle the rebalancing condition in your code and should process the ongoing message and commit it before rebalancing</p>\n<p>Like :</p>\n<pre><code>private class HandleRebalance implements ConsumerRebalanceListener {\n    public void onPartitionsAssigned(Collection&lt;TopicPartition&gt; partitions) {\n        // Implement what you want to do once rebalancing is done.\n    }\n\n    public void onPartitionsRevoked(Collection&lt;TopicPartition&gt; partitions) {\n        // commit current method\n    }\n}\n</code></pre>\n<p>and Use this syntax for subscribing the topic :</p>\n<blockquote>\n<p>kafkaConsumer.subscribe(topicNameList , new HandleRebalance())</p>\n</blockquote>\n<p>The advantage of doing this :</p>\n<ol>\n<li><p>Messages will not repeat when the rebalancing is taking place.</p>\n</li>\n<li><p>No commit fail exception</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":28434218,"reputation":1,"user_id":21754524,"display_name":"Xia Gong"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682773347,"creation_date":1682597930,"answer_id":76120318,"question_id":45560255,"body_markdown":"If you are also writing tests like me, you can use that ```group id``` to consume one message with a shell command. It can eliminate this error temporarily. For long-term solutions, you can refer to the above answers, e.g.:\r\n\r\n    ./kafka-console-consumer.sh --bootstrap-server xxx:9092 --topic yyy --group zzz --max-messages 1 \r\n\r\n\r\n","title":"CommitFailedException Commit cannot be completed since the group has already rebalanced and assigned the partitions to another member","body":"<p>If you are also writing tests like me, you can use that <code>group id</code> to consume one message with a shell command. It can eliminate this error temporarily. For long-term solutions, you can refer to the above answers, e.g.:</p>\n<pre><code>./kafka-console-consumer.sh --bootstrap-server xxx:9092 --topic yyy --group zzz --max-messages 1 \n</code></pre>\n"}],"owner":{"account_id":4882220,"reputation":2203,"user_id":3935642,"accept_rate":67,"display_name":"Simon Su"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83421,"favorite_count":0,"down_vote_count":0,"up_vote_count":49,"answer_count":3,"score":49,"last_activity_date":1695383967,"creation_date":1502171555,"question_id":45560255,"body_markdown":"I was using kafka 0.10.2 and now faced a CommitFailedException. like:\r\n\r\n&gt; Commit cannot be completed since the group has already rebalanced and\r\n&gt; assigned the partitions to another member. This means that the time\r\n&gt; between subsequent calls to poll() was longer than the configured\r\n&gt; max.poll.interval.ms, which typically implies that the poll loop is\r\n&gt; spending too much time message processing. You can address this either\r\n&gt; by increasing the session timeout or by reducing the maximum size of\r\n&gt; batches returned in poll() with max.poll.records.\r\n\r\nI have set max.poll.interval.ms to Integer.MAX_VALUE. so can anyone tell me why this still happens even I have set the value ? \r\n\r\nAnother question is:\r\nI do as description to set session.timeout.ms to 60000 and it still happens. I try to reproduce by a simple code\r\n \r\n\r\n     public static void main(String[] args) throws InterruptedException {     \r\n            Logger logger = Logger.getLogger(KafkaConsumer10.class);\r\n            logger.info(&quot;XX&quot;);\r\n            Properties props = new Properties();\r\n            props.put(&quot;bootstrap.servers&quot;, &quot;kafka-broker:9098&quot;);\r\n            props.put(&quot;group.id&quot;, &quot;test&quot;);\r\n            props.put(&quot;enable.auto.commit&quot;, &quot;true&quot;);\r\n            props.put(&quot;auto.commit.interval.ms&quot;, &quot;1000&quot;);\r\n            props.put(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\r\n            props.put(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\r\n            props.put(&quot;max.poll.interval.ms&quot;, &quot;300000&quot;);\r\n            props.put(&quot;session.timeout.ms&quot;, &quot;10000&quot;);\r\n            props.put(&quot;max.poll.records&quot;, &quot;2&quot;);\r\n            KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;&gt;(props);\r\n            consumer.subscribe(Arrays.asList(&quot;t1&quot;));\r\n            while (true) {\r\n                Thread.sleep(11000);\r\n                ConsumerRecords&lt;String, String&gt; records = consumer.poll(100);\r\n                //Thread.sleep(11000);\r\n                Thread.sleep(11000);\r\n                for (ConsumerRecord&lt;String, String&gt; record : records)\r\n                    System.out.printf(&quot;offset = %d, key = %s, value = %s%n&quot;, record.offset(), record.key(), record.value());\r\n            }\r\n\r\nwhen I set session.timeout.ms to 10000, I try to sleep more than 10000 ms in my poll loop, but it seems work and no Exception out. so I&#39;m confused about this. if heartbeat is triggered by consumer.poll and consumer.commit, seems heartbeat is out of session timeout in my code. why not throw CommitFailedException ? \r\n\r\n","title":"CommitFailedException Commit cannot be completed since the group has already rebalanced and assigned the partitions to another member","body":"<p>I was using kafka 0.10.2 and now faced a CommitFailedException. like:</p>\n\n<blockquote>\n  <p>Commit cannot be completed since the group has already rebalanced and\n  assigned the partitions to another member. This means that the time\n  between subsequent calls to poll() was longer than the configured\n  max.poll.interval.ms, which typically implies that the poll loop is\n  spending too much time message processing. You can address this either\n  by increasing the session timeout or by reducing the maximum size of\n  batches returned in poll() with max.poll.records.</p>\n</blockquote>\n\n<p>I have set max.poll.interval.ms to Integer.MAX_VALUE. so can anyone tell me why this still happens even I have set the value ? </p>\n\n<p>Another question is:\nI do as description to set session.timeout.ms to 60000 and it still happens. I try to reproduce by a simple code</p>\n\n<pre><code> public static void main(String[] args) throws InterruptedException {     \n        Logger logger = Logger.getLogger(KafkaConsumer10.class);\n        logger.info(\"XX\");\n        Properties props = new Properties();\n        props.put(\"bootstrap.servers\", \"kafka-broker:9098\");\n        props.put(\"group.id\", \"test\");\n        props.put(\"enable.auto.commit\", \"true\");\n        props.put(\"auto.commit.interval.ms\", \"1000\");\n        props.put(\"key.deserializer\", \"org.apache.kafka.common.serialization.StringDeserializer\");\n        props.put(\"value.deserializer\", \"org.apache.kafka.common.serialization.StringDeserializer\");\n        props.put(\"max.poll.interval.ms\", \"300000\");\n        props.put(\"session.timeout.ms\", \"10000\");\n        props.put(\"max.poll.records\", \"2\");\n        KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;&gt;(props);\n        consumer.subscribe(Arrays.asList(\"t1\"));\n        while (true) {\n            Thread.sleep(11000);\n            ConsumerRecords&lt;String, String&gt; records = consumer.poll(100);\n            //Thread.sleep(11000);\n            Thread.sleep(11000);\n            for (ConsumerRecord&lt;String, String&gt; record : records)\n                System.out.printf(\"offset = %d, key = %s, value = %s%n\", record.offset(), record.key(), record.value());\n        }\n</code></pre>\n\n<p>when I set session.timeout.ms to 10000, I try to sleep more than 10000 ms in my poll loop, but it seems work and no Exception out. so I'm confused about this. if heartbeat is triggered by consumer.poll and consumer.commit, seems heartbeat is out of session timeout in my code. why not throw CommitFailedException ? </p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1695377754,"post_id":77156731,"comment_id":136019533,"body_markdown":"What does this means? *print for all the threads*?","body":"What does this means? <i>print for all the threads</i>?"},{"owner":{"account_id":7905406,"reputation":683,"user_id":5971094,"accept_rate":94,"display_name":"Jordan Jordanovski"},"score":0,"creation_date":1695377874,"post_id":77156731,"comment_id":136019562,"body_markdown":"I want to print out the values for all the running threads at once.","body":"I want to print out the values for all the running threads at once."},{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1695378046,"post_id":77156731,"comment_id":136019606,"body_markdown":"Sorry, but this does not help us to understand what you want to achieve. *printing* is *outputting something outside the process*. So what does it means *printing for all the threads*. Give us some code, explain much clearer what you want to achieve.","body":"Sorry, but this does not help us to understand what you want to achieve. <i>printing</i> is <i>outputting something outside the process</i>. So what does it means <i>printing for all the threads</i>. Give us some code, explain much clearer what you want to achieve."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":2,"creation_date":1695378148,"post_id":77156731,"comment_id":136019626,"body_markdown":"@Jean-BaptisteYun&#232;s Just because you don&#39;t understand the question doesn&#39;t mean it&#39;s necessarily the fault of the asker. I understood the question perfectly fine.","body":"@Jean-BaptisteYun&#232;s Just because you don&#39;t understand the question doesn&#39;t mean it&#39;s necessarily the fault of the asker. I understood the question perfectly fine."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":2,"creation_date":1695378406,"post_id":77156731,"comment_id":136019674,"body_markdown":"Think about it: your print operation has to happen on some thread. That printer thread only has access to the thread-local that exists on itself, but not on any other threads. So no, in a general way, it&#39;s not possible. In a much more limited scenario, e.g. you have a subset of threads which all process requests off of some queues or something, you could put requests onto every thread&#39;s queue which say &quot;print your thread-local&quot;.","body":"Think about it: your print operation has to happen on some thread. That printer thread only has access to the thread-local that exists on itself, but not on any other threads. So no, in a general way, it&#39;s not possible. In a much more limited scenario, e.g. you have a subset of threads which all process requests off of some queues or something, you could put requests onto every thread&#39;s queue which say &quot;print your thread-local&quot;."},{"owner":{"account_id":7905406,"reputation":683,"user_id":5971094,"accept_rate":94,"display_name":"Jordan Jordanovski"},"score":0,"creation_date":1695380773,"post_id":77156731,"comment_id":136020094,"body_markdown":"Aha okay, I understand. I posted further explanation in an edit, maybe you can give me an idea how I can test it out?","body":"Aha okay, I understand. I posted further explanation in an edit, maybe you can give me an idea how I can test it out?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695381533,"post_id":77156731,"comment_id":136020259,"body_markdown":"1) Iterate over all threads; 2) access each thread&#39;s package-private variable `threadLocals` (probably via reflection); 3) get your value using private method `threadLocals.getEntry(yourThreadLocal)`, again via reflection.","body":"1) Iterate over all threads; 2) access each thread&#39;s package-private variable <code>threadLocals</code> (probably via reflection); 3) get your value using private method <code>threadLocals.getEntry(yourThreadLocal)</code>, again via reflection."},{"owner":{"account_id":7905406,"reputation":683,"user_id":5971094,"accept_rate":94,"display_name":"Jordan Jordanovski"},"score":0,"creation_date":1695382157,"post_id":77156731,"comment_id":136020392,"body_markdown":"I tried but I&#39;m getting an error &quot;Unable to make field java.lang.ThreadLocal$ThreadLocalMap java.lang.Thread.threadLocals accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @7690781&quot;.","body":"I tried but I&#39;m getting an error &quot;Unable to make field java.lang.ThreadLocal$ThreadLocalMap java.lang.Thread.threadLocals accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @7690781&quot;."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1695382302,"post_id":77156731,"comment_id":136020422,"body_markdown":"If you are having trouble using reflection with the Java module system, please ask a different question about that. And please search first, because that question gets asked *a lot*.","body":"If you are having trouble using reflection with the Java module system, please ask a different question about that. And please search first, because that question gets asked <i>a lot</i>."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695383870,"creation_date":1695383870,"answer_id":77157421,"question_id":77156731,"body_markdown":"I had some time to spare, so I made a proof of concept. It&#39;s in Kotlin because that&#39;s what I had available, but it should be easy to convert to Java:\r\n\r\n```kotlin\r\nfun &lt;V&gt; getAllThreadLocalValues(threadLocal: ThreadLocal&lt;V&gt;): Map&lt;Thread, V&gt; {\r\n    val threadLocalsField = Thread::class.java.getDeclaredField(&quot;threadLocals&quot;)\r\n        .apply { trySetAccessible() }\r\n    val getEntryMethod = Class.forName(&quot;java.lang.ThreadLocal\\$ThreadLocalMap&quot;)\r\n        .getDeclaredMethod(&quot;getEntry&quot;, ThreadLocal::class.java)\r\n        .apply { trySetAccessible() }\r\n    val entryValueField = Class.forName(&quot;java.lang.ThreadLocal\\$ThreadLocalMap\\$Entry&quot;)\r\n        .getDeclaredField(&quot;value&quot;)\r\n        .apply { trySetAccessible() }\r\n\r\n    return Thread.getAllStackTraces().mapValues { (thread, _) -&gt;\r\n        val map = threadLocalsField.get(thread) ?: return@mapValues null\r\n        val entry = getEntryMethod.invoke(map, threadLocal) ?: return@mapValues null\r\n        val value = entryValueField.get(entry) ?: return@mapValues null\r\n        value as V\r\n    }.filterValues { it != null } as Map&lt;Thread, V&gt;\r\n}\r\n```\r\n\r\nThis code returns a map of `Thread` to the value of the passed `ThreadLocal`, if any. Threads without a value aren&#39;t included in the map.\r\n\r\nNote that you&#39;ll need to pass `--add-opens=java.base/java.lang=ALL-UNNAMED` to allow the reflection.","title":"How to print all the values in a ThreadLocal HashMap for all the threads?","body":"<p>I had some time to spare, so I made a proof of concept. It's in Kotlin because that's what I had available, but it should be easy to convert to Java:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun &lt;V&gt; getAllThreadLocalValues(threadLocal: ThreadLocal&lt;V&gt;): Map&lt;Thread, V&gt; {\n    val threadLocalsField = Thread::class.java.getDeclaredField(&quot;threadLocals&quot;)\n        .apply { trySetAccessible() }\n    val getEntryMethod = Class.forName(&quot;java.lang.ThreadLocal\\$ThreadLocalMap&quot;)\n        .getDeclaredMethod(&quot;getEntry&quot;, ThreadLocal::class.java)\n        .apply { trySetAccessible() }\n    val entryValueField = Class.forName(&quot;java.lang.ThreadLocal\\$ThreadLocalMap\\$Entry&quot;)\n        .getDeclaredField(&quot;value&quot;)\n        .apply { trySetAccessible() }\n\n    return Thread.getAllStackTraces().mapValues { (thread, _) -&gt;\n        val map = threadLocalsField.get(thread) ?: return@mapValues null\n        val entry = getEntryMethod.invoke(map, threadLocal) ?: return@mapValues null\n        val value = entryValueField.get(entry) ?: return@mapValues null\n        value as V\n    }.filterValues { it != null } as Map&lt;Thread, V&gt;\n}\n</code></pre>\n<p>This code returns a map of <code>Thread</code> to the value of the passed <code>ThreadLocal</code>, if any. Threads without a value aren't included in the map.</p>\n<p>Note that you'll need to pass <code>--add-opens=java.base/java.lang=ALL-UNNAMED</code> to allow the reflection.</p>\n"}],"owner":{"account_id":7905406,"reputation":683,"user_id":5971094,"accept_rate":94,"display_name":"Jordan Jordanovski"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695383870,"creation_date":1695377620,"question_id":77156731,"body_markdown":"Is it possible to print out all the values in a ThreadLocal HashMap for all the threads?\r\n\r\nEdit: To elaborate further why I want to do this, I have a Spring boot app where the incoming requests are processed on a &quot;http-nio-8080-exec&quot; thread which request uses JobRunr to execute some Jobs (which happens on a &quot;background-worker&quot; thread). \r\n\r\nI have logs before creating the Job and inside the job as well, in the log before creating the Job (executed on the &quot;http-nio-8080-exec&quot; processing thread) I put some stuff in the MDC map (which is ThreadLocal) and what I can see is that the information is passed along to the &quot;background-worker&quot; once doing the log inside the Job. I don&#39;t know how they are being passed to it (probably some process of JobRunr), what I want to make sure that it is only passed to the right &quot;background-worker&quot; thread and afterwards cleared properly. \r\n\r\nBtw I use SLF4J for logging.","title":"How to print all the values in a ThreadLocal HashMap for all the threads?","body":"<p>Is it possible to print out all the values in a ThreadLocal HashMap for all the threads?</p>\n<p>Edit: To elaborate further why I want to do this, I have a Spring boot app where the incoming requests are processed on a &quot;http-nio-8080-exec&quot; thread which request uses JobRunr to execute some Jobs (which happens on a &quot;background-worker&quot; thread).</p>\n<p>I have logs before creating the Job and inside the job as well, in the log before creating the Job (executed on the &quot;http-nio-8080-exec&quot; processing thread) I put some stuff in the MDC map (which is ThreadLocal) and what I can see is that the information is passed along to the &quot;background-worker&quot; once doing the log inside the Job. I don't know how they are being passed to it (probably some process of JobRunr), what I want to make sure that it is only passed to the right &quot;background-worker&quot; thread and afterwards cleared properly.</p>\n<p>Btw I use SLF4J for logging.</p>\n"},{"tags":["java","spring","spring-boot","validation","spring-mvc"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1695331274,"post_id":77153609,"comment_id":136013997,"body_markdown":"You can avoid the duplication by abstracting away the data that needs validation using interfaces and writing `ConstraintValidator` for the interface. My answer [here](https://stackoverflow.com/questions/76921231/custom-springboot-bean-validation/76921640#76921640) shows how to do it.","body":"You can avoid the duplication by abstracting away the data that needs validation using interfaces and writing <code>ConstraintValidator</code> for the interface. My answer <a href=\"https://stackoverflow.com/questions/76921231/custom-springboot-bean-validation/76921640#76921640\">here</a> shows how to do it."}],"answers":[{"tags":[],"owner":{"account_id":28525225,"reputation":81,"user_id":21833389,"display_name":"Ruslan K."},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695380341,"creation_date":1695380341,"answer_id":77157022,"question_id":77153609,"body_markdown":"What I really needed was annotating getters of an interface.\r\n\r\nAs Chaosfire [pointed out][1], one can get rid of the duplication by abstracting away the data that needs validation using interfaces and writing `ConstraintValidator` for the interface.\r\n\r\nMerits of annotating getters of base classes are [listed here][2].\r\n\r\nA solution for me will be annotating getters of interface (let&#39;s name it ValidProduct):\r\n```\r\npublic interface ValidProduct {\r\n    @NotEmpty\r\n    String getName();\r\n}\r\n```\r\nDTO and entity classes then implement this interface.\r\nProduct entity class:\r\n```\r\n@Entity\r\n@Table\r\npublic class Product implements ValidProduct {\r\n    private String name;\r\n    \r\n    @Override\r\n    public String getName() {\r\n        return name;\r\n    }\r\n}\r\n```\r\nNewProductRequest DTO class then looks like:\r\n```\r\npublic class NewProductRequest implements ValidProduct {\r\n    private String name;\r\n\r\n    @Override\r\n    public String getName() {\r\n        return name;\r\n    }\r\n}\r\n```\r\nThis can then be combined with JSR `ConstraintValidator` or Spring `Validator` implementations.\r\n\r\n  [1]: https://stackoverflow.com/a/76921640/21833389\r\n  [2]: https://stackoverflow.com/a/6285499/21833389 ","title":"How to avoid Jakarta validation annotations duplication when validating DTOs and Entities?","body":"<p>What I really needed was annotating getters of an interface.</p>\n<p>As Chaosfire <a href=\"https://stackoverflow.com/a/76921640/21833389\">pointed out</a>, one can get rid of the duplication by abstracting away the data that needs validation using interfaces and writing <code>ConstraintValidator</code> for the interface.</p>\n<p>Merits of annotating getters of base classes are <a href=\"https://stackoverflow.com/a/6285499/21833389\">listed here</a>.</p>\n<p>A solution for me will be annotating getters of interface (let's name it ValidProduct):</p>\n<pre><code>public interface ValidProduct {\n    @NotEmpty\n    String getName();\n}\n</code></pre>\n<p>DTO and entity classes then implement this interface.\nProduct entity class:</p>\n<pre><code>@Entity\n@Table\npublic class Product implements ValidProduct {\n    private String name;\n    \n    @Override\n    public String getName() {\n        return name;\n    }\n}\n</code></pre>\n<p>NewProductRequest DTO class then looks like:</p>\n<pre><code>public class NewProductRequest implements ValidProduct {\n    private String name;\n\n    @Override\n    public String getName() {\n        return name;\n    }\n}\n</code></pre>\n<p>This can then be combined with JSR <code>ConstraintValidator</code> or Spring <code>Validator</code> implementations.</p>\n"}],"owner":{"account_id":28525225,"reputation":81,"user_id":21833389,"display_name":"Ruslan K."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77157022,"answer_count":1,"score":1,"last_activity_date":1695383680,"creation_date":1695329771,"question_id":77153609,"body_markdown":"I&#39;m trying to validate both DTOs (passed into controller methods) and JPA entities. But this often leads to validation rules duplication.\r\n\r\nValidation rules applied are often similar both for entity and DTO classes, for example (classes simplified):\r\n\r\nProduct entity class has a name annotated with @NotEmpty:\r\n```\r\n@Entity\r\n@Table\r\nclass Product {\r\n    @NotEmpty\r\n    private String name;\r\n\r\n    // id, getters, setters and so on\r\n}\r\n```\r\nNewProductRequest DTO class has @NotEmpty name too:\r\n\r\n```\r\nclass NewProductRequest {\r\n    @NotEmpty\r\n    public String name;\r\n}\r\n```\r\nIn more complex scenarios, this leads to massive validation duplication.\r\nUsing this approach any validation changes applied to Product have to be applied to NewProductRequest as well. \r\n\r\nIs there a way to avoid validation annotations duplication so one can follow the [DRY principle](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)? Can it be achieved with Spring MVC custom validators?","title":"How to avoid Jakarta validation annotations duplication when validating DTOs and Entities?","body":"<p>I'm trying to validate both DTOs (passed into controller methods) and JPA entities. But this often leads to validation rules duplication.</p>\n<p>Validation rules applied are often similar both for entity and DTO classes, for example (classes simplified):</p>\n<p>Product entity class has a name annotated with @NotEmpty:</p>\n<pre><code>@Entity\n@Table\nclass Product {\n    @NotEmpty\n    private String name;\n\n    // id, getters, setters and so on\n}\n</code></pre>\n<p>NewProductRequest DTO class has @NotEmpty name too:</p>\n<pre><code>class NewProductRequest {\n    @NotEmpty\n    public String name;\n}\n</code></pre>\n<p>In more complex scenarios, this leads to massive validation duplication.\nUsing this approach any validation changes applied to Product have to be applied to NewProductRequest as well.</p>\n<p>Is there a way to avoid validation annotations duplication so one can follow the <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow noreferrer\">DRY principle</a>? Can it be achieved with Spring MVC custom validators?</p>\n"},{"tags":["java","testing","automation"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695420915,"post_id":77157358,"comment_id":136027190,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":29508780,"reputation":1,"user_id":22614273,"display_name":"Chirag Taneja"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695383331,"creation_date":1695383331,"question_id":77157358,"body_markdown":"Calender logo/icon is visible but not able to inspect. Trying to do automation testing. \r\n\r\nCalender logo is visible but not able to inspect it. Trying to do automation testing. Not able to inspect it . trying to do selenium automation testing.","title":"How to inspect calender using Selenium web driver in reach js?","body":"<p>Calender logo/icon is visible but not able to inspect. Trying to do automation testing.</p>\n<p>Calender logo is visible but not able to inspect it. Trying to do automation testing. Not able to inspect it . trying to do selenium automation testing.</p>\n"},{"tags":["java","jsp","loops","hashmap"],"comments":[{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":18,"creation_date":1259789245,"post_id":1835683,"comment_id":1728334,"body_markdown":"By the way, a `HashMap` is by nature unordered. Are you certain you don&#39;t need `TreeMap` (automagic sort by key) or `LinkedHashMap` (maintains insertion order)?","body":"By the way, a <code>HashMap</code> is by nature unordered. Are you certain you don&#39;t need <code>TreeMap</code> (automagic sort by key) or <code>LinkedHashMap</code> (maintains insertion order)?"}],"answers":[{"comments":[{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":2,"creation_date":1319628302,"post_id":1835742,"comment_id":9647552,"body_markdown":"@Khue: yes, you can also put attributes in the session. I only don&#39;t see why you would like to duplicate application wide data over multiple sessions.","body":"@Khue: yes, you can also put attributes in the session. I only don&#39;t see why you would like to duplicate application wide data over multiple sessions."},{"owner":{"account_id":114223,"reputation":3132,"user_id":300478,"accept_rate":73,"display_name":"Khue Vu"},"score":0,"creation_date":1319687782,"post_id":1835742,"comment_id":9661926,"body_markdown":"I think in case of session-based info. Thanks for the very nice explanation.","body":"I think in case of session-based info. Thanks for the very nice explanation."},{"owner":{"account_id":2516845,"reputation":725,"user_id":2188082,"accept_rate":53,"display_name":"Zibbobz"},"score":0,"creation_date":1527273123,"post_id":1835742,"comment_id":88082017,"body_markdown":"I&#39;m sure the answer is obvious but - why are scriptlets considered poor practice?  In the absence of JSTL due to maintaining a legacy application, this is my only option.","body":"I&#39;m sure the answer is obvious but - why are scriptlets considered poor practice?  In the absence of JSTL due to maintaining a legacy application, this is my only option."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1527273261,"post_id":1835742,"comment_id":88082078,"body_markdown":"@Zibbobz: the text &quot;poor practice&quot; is a link. Click on it.","body":"@Zibbobz: the text &quot;poor practice&quot; is a link. Click on it."}],"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":4,"down_vote_count":2,"up_vote_count":327,"is_accepted":false,"score":325,"last_activity_date":1695383152,"creation_date":1259787311,"answer_id":1835742,"question_id":1835683,"body_markdown":"Just the same way as you would do in normal Java code.\r\n```java\r\nfor (Map.Entry&lt;String, String&gt; entry : countries.entrySet()) {\r\n    String key = entry.getKey();\r\n    String value = entry.getValue();\r\n    // ...\r\n}\r\n```\r\n    \r\n---\r\n\r\n**However**, *scriptlets* (raw Java code in JSP files, those `&lt;% %&gt;` things) are considered a [poor practice][1]. I recommend to install [JSTL][2]. It has a [`&lt;c:forEach&gt;`][3] tag which can iterate over among others `Map`s. Every iteration will give you a [`Map.Entry`][4] back which in turn has `getKey()` and `getValue()` methods.\r\n\r\nHere&#39;s a basic example:\r\n\r\n```xml\r\n&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;jakarta.tags.core&quot; %&gt;\r\n\r\n&lt;c:forEach items=&quot;${map}&quot; var=&quot;entry&quot;&gt;\r\n    Key = ${entry.key}, value = ${entry.value}&lt;br&gt;\r\n&lt;/c:forEach&gt;\r\n```\r\n\r\nThus your particular issue can be solved as follows:\r\n\r\n```xml\r\n&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;jakarta.tags.core&quot; %&gt;\r\n\r\n&lt;select name=&quot;country&quot;&gt;\r\n    &lt;c:forEach items=&quot;${countries}&quot; var=&quot;country&quot;&gt;\r\n        &lt;option value=&quot;${country.key}&quot;&gt;${country.value}&lt;/option&gt;\r\n    &lt;/c:forEach&gt;\r\n&lt;/select&gt;\r\n```\r\n\r\nYou need a `Servlet` or a `ServletContextListener` to place the `${countries}` in the desired scope. If this list is supposed to be request-based, then use the `Servlet`&#39;s `doGet()`:\r\n\r\n```java\r\nprotected void doGet(HttpServletRequest request, HttpServletResponse response) {\r\n    Map&lt;String, String&gt; countries = MainUtils.getCountries();\r\n    request.setAttribute(&quot;countries&quot;, countries);\r\n    request.getRequestDispatcher(&quot;/WEB-INF/page.jsp&quot;).forward(request, response);\r\n}\r\n```\r\n\r\nOr if this list is supposed to be an application-wide constant, then use `ServletContextListener`&#39;s `contextInitialized()` so that it will be loaded only once and kept in memory:\r\n```java\r\npublic void contextInitialized(ServletContextEvent event) {\r\n    Map&lt;String, String&gt; countries = MainUtils.getCountries();\r\n    event.getServletContext().setAttribute(&quot;countries&quot;, countries);\r\n}\r\n```\r\n\r\nIn both cases the `countries` will be available in [EL][5] by `${countries}`.\r\n\r\n### See also:\r\n\r\n- https://stackoverflow.com/questions/2148658/iterate-over-elements-of-list-and-map-using-jstl-cforeach-tag/\r\n- https://stackoverflow.com/questions/2141464/how-to-iterate-over-a-nested-map-in-cforeach/\r\n- https://stackoverflow.com/questions/2117557/how-to-iterate-an-arraylist-inside-a-hashmap-using-jstl/\r\n- https://stackoverflow.com/questions/3468150/using-special-auto-start-servlet-to-initialize-on-startup-and-share-application\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3177733/howto-avoid-java-code-in-jsp-files/3180202#3180202\r\n  [2]: https://stackoverflow.com/tags/jstl/info\r\n  [3]: https://jakarta.ee/specifications/tags/3.0/tagdocs/c/foreach\r\n  [4]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.Entry.html\r\n  [5]: https://stackoverflow.com/tags/el/info\r\n\r\n\r\n","title":"How to loop through a HashMap in JSP?","body":"<p>Just the same way as you would do in normal Java code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (Map.Entry&lt;String, String&gt; entry : countries.entrySet()) {\n    String key = entry.getKey();\n    String value = entry.getValue();\n    // ...\n}\n</code></pre>\n<hr />\n<p><strong>However</strong>, <em>scriptlets</em> (raw Java code in JSP files, those <code>&lt;% %&gt;</code> things) are considered a <a href=\"https://stackoverflow.com/questions/3177733/howto-avoid-java-code-in-jsp-files/3180202#3180202\">poor practice</a>. I recommend to install <a href=\"https://stackoverflow.com/tags/jstl/info\">JSTL</a>. It has a <a href=\"https://jakarta.ee/specifications/tags/3.0/tagdocs/c/foreach\" rel=\"nofollow noreferrer\"><code>&lt;c:forEach&gt;</code></a> tag which can iterate over among others <code>Map</code>s. Every iteration will give you a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.Entry.html\" rel=\"nofollow noreferrer\"><code>Map.Entry</code></a> back which in turn has <code>getKey()</code> and <code>getValue()</code> methods.</p>\n<p>Here's a basic example:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;jakarta.tags.core&quot; %&gt;\n\n&lt;c:forEach items=&quot;${map}&quot; var=&quot;entry&quot;&gt;\n    Key = ${entry.key}, value = ${entry.value}&lt;br&gt;\n&lt;/c:forEach&gt;\n</code></pre>\n<p>Thus your particular issue can be solved as follows:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;jakarta.tags.core&quot; %&gt;\n\n&lt;select name=&quot;country&quot;&gt;\n    &lt;c:forEach items=&quot;${countries}&quot; var=&quot;country&quot;&gt;\n        &lt;option value=&quot;${country.key}&quot;&gt;${country.value}&lt;/option&gt;\n    &lt;/c:forEach&gt;\n&lt;/select&gt;\n</code></pre>\n<p>You need a <code>Servlet</code> or a <code>ServletContextListener</code> to place the <code>${countries}</code> in the desired scope. If this list is supposed to be request-based, then use the <code>Servlet</code>'s <code>doGet()</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>protected void doGet(HttpServletRequest request, HttpServletResponse response) {\n    Map&lt;String, String&gt; countries = MainUtils.getCountries();\n    request.setAttribute(&quot;countries&quot;, countries);\n    request.getRequestDispatcher(&quot;/WEB-INF/page.jsp&quot;).forward(request, response);\n}\n</code></pre>\n<p>Or if this list is supposed to be an application-wide constant, then use <code>ServletContextListener</code>'s <code>contextInitialized()</code> so that it will be loaded only once and kept in memory:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void contextInitialized(ServletContextEvent event) {\n    Map&lt;String, String&gt; countries = MainUtils.getCountries();\n    event.getServletContext().setAttribute(&quot;countries&quot;, countries);\n}\n</code></pre>\n<p>In both cases the <code>countries</code> will be available in <a href=\"https://stackoverflow.com/tags/el/info\">EL</a> by <code>${countries}</code>.</p>\n<h3>See also:</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2148658/iterate-over-elements-of-list-and-map-using-jstl-cforeach-tag/\">Iterate over elements of List and Map using JSTL &lt;c:forEach&gt; tag</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2141464/how-to-iterate-over-a-nested-map-in-cforeach/\">How to iterate over a nested map in &lt;c:forEach&gt;</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2117557/how-to-iterate-an-arraylist-inside-a-hashmap-using-jstl/\">How to iterate an ArrayList inside a HashMap using JSTL?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3468150/using-special-auto-start-servlet-to-initialize-on-startup-and-share-application\">Using special auto start servlet to initialize on startup and share application data</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2220824,"reputation":16635,"user_id":3168721,"accept_rate":97,"display_name":"tk_"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570081991,"creation_date":1570081991,"answer_id":58213027,"question_id":1835683,"body_markdown":"Below code works for me\r\n\r\nfirst I defined the `partnerTypesMap` like below in the server side,\r\n\r\n    Map&lt;String, String&gt; partnerTypes = new HashMap&lt;&gt;();\r\n\r\nafter adding values to it I added the object to `model`,\r\n\r\n    model.addAttribute(&quot;partnerTypesMap&quot;, partnerTypes);\r\n\r\nWhen rendering the page I use below `foreach` to print them one by one.\r\n\r\n\r\n    &lt;c:forEach items=&quot;${partnerTypesMap}&quot; var=&quot;partnerTypesMap&quot;&gt;\r\n    \t  &lt;form:option value=&quot;${partnerTypesMap[&#39;value&#39;]}&quot;&gt;${partnerTypesMap[&#39;key&#39;]}&lt;/form:option&gt;\r\n    &lt;/c:forEach&gt;","title":"How to loop through a HashMap in JSP?","body":"<p>Below code works for me</p>\n\n<p>first I defined the <code>partnerTypesMap</code> like below in the server side,</p>\n\n<pre><code>Map&lt;String, String&gt; partnerTypes = new HashMap&lt;&gt;();\n</code></pre>\n\n<p>after adding values to it I added the object to <code>model</code>,</p>\n\n<pre><code>model.addAttribute(\"partnerTypesMap\", partnerTypes);\n</code></pre>\n\n<p>When rendering the page I use below <code>foreach</code> to print them one by one.</p>\n\n<pre><code>&lt;c:forEach items=\"${partnerTypesMap}\" var=\"partnerTypesMap\"&gt;\n      &lt;form:option value=\"${partnerTypesMap['value']}\"&gt;${partnerTypesMap['key']}&lt;/form:option&gt;\n&lt;/c:forEach&gt;\n</code></pre>\n"}],"owner":{"account_id":573410,"reputation":1541,"user_id":223240,"display_name":"blub"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":225824,"favorite_count":0,"down_vote_count":0,"up_vote_count":154,"answer_count":2,"score":154,"last_activity_date":1695383152,"creation_date":1259786711,"question_id":1835683,"body_markdown":"How can I loop through a `HashMap` in JSP?\r\n\r\n    &lt;%\r\n        HashMap&lt;String, String&gt; countries = MainUtils.getCountries(l);\r\n    %&gt;\r\n\r\n    &lt;select name=&quot;country&quot;&gt;\r\n        &lt;% \r\n            // Here I need to loop through countries.\r\n        %&gt;\r\n    &lt;/select&gt;","title":"How to loop through a HashMap in JSP?","body":"<p>How can I loop through a <code>HashMap</code> in JSP?</p>\n\n<pre><code>&lt;%\n    HashMap&lt;String, String&gt; countries = MainUtils.getCountries(l);\n%&gt;\n\n&lt;select name=\"country\"&gt;\n    &lt;% \n        // Here I need to loop through countries.\n    %&gt;\n&lt;/select&gt;\n</code></pre>\n"},{"tags":["java","image","static","thymeleaf","flying-saucer"],"answers":[{"tags":[],"owner":{"account_id":173186,"reputation":4270,"user_id":401712,"display_name":"Dario Seidl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1541078690,"creation_date":1541078690,"answer_id":53102242,"question_id":50203842,"body_markdown":"You can include resources from any URL (from the Internet or from your file system). Either way, there are several steps involved:\r\n\r\nWhen generating the HTML from the Thymeleaf template, you can use\r\n\r\n  - `@{/some/url}` to resolve a path relative to your Web context (assuming you have a Web context), or\r\n  - `@{classpath:/some/url}` with will just leave the URL as `classpath:/some/url`, or\r\n  - simply a string value constant or a value from a variable (`${var}`), doesn&#39;t matter if it&#39;s an absolute URL `https://some/url` or relative, Thymleaf will leave them unchanged in the resulting HTML.\r\n\r\nBefore you pass the HTML to Flying Saucer, make sure the URLs are correct. Then Flying Saucer will process all URLs with a `UserAgentCallback`, by default `ITextUserAgent`.\r\n\r\nThe relevant methods in `UserAgentCallBack` are `resolveURI` and `setBaseURL`.\r\n\r\nThere is some weird logic going on in the default `resolveURI` method of `ITextUserAgent` (inherited  from `NaiveUserAgent`). If the `baseURL` is null, it will try to set it, so it&#39;s best to always set it yourself. I had better results with overriding the `resolveURI`, the following is enough to keep absolute URLs and resolve relative URLs relative to the `baseURL`:\r\n\r\n    @Override\r\n    public String resolveURI(String uri) {\r\n       if (URI(uri).isAbsolute())\r\n           return uri;\r\n       else\r\n           return Paths.get(getBaseURL(), uri).toUri().toString();\r\n    }\r\n\r\nFinally, in order to resolve the `classpath:` protocol, [you need to define an `URLStreamHandler`](https://stackoverflow.com/questions/861500/url-to-load-resources-from-the-classpath-in-java) unless there is already one defined (for example, the embedded Tomcat of Spring Boot already does supports this). \r\n","title":"Static images not display with flying saucer and thymeleaf for generated pdf files","body":"<p>You can include resources from any URL (from the Internet or from your file system). Either way, there are several steps involved:</p>\n\n<p>When generating the HTML from the Thymeleaf template, you can use</p>\n\n<ul>\n<li><code>@{/some/url}</code> to resolve a path relative to your Web context (assuming you have a Web context), or</li>\n<li><code>@{classpath:/some/url}</code> with will just leave the URL as <code>classpath:/some/url</code>, or</li>\n<li>simply a string value constant or a value from a variable (<code>${var}</code>), doesn't matter if it's an absolute URL <code>https://some/url</code> or relative, Thymleaf will leave them unchanged in the resulting HTML.</li>\n</ul>\n\n<p>Before you pass the HTML to Flying Saucer, make sure the URLs are correct. Then Flying Saucer will process all URLs with a <code>UserAgentCallback</code>, by default <code>ITextUserAgent</code>.</p>\n\n<p>The relevant methods in <code>UserAgentCallBack</code> are <code>resolveURI</code> and <code>setBaseURL</code>.</p>\n\n<p>There is some weird logic going on in the default <code>resolveURI</code> method of <code>ITextUserAgent</code> (inherited  from <code>NaiveUserAgent</code>). If the <code>baseURL</code> is null, it will try to set it, so it's best to always set it yourself. I had better results with overriding the <code>resolveURI</code>, the following is enough to keep absolute URLs and resolve relative URLs relative to the <code>baseURL</code>:</p>\n\n<pre><code>@Override\npublic String resolveURI(String uri) {\n   if (URI(uri).isAbsolute())\n       return uri;\n   else\n       return Paths.get(getBaseURL(), uri).toUri().toString();\n}\n</code></pre>\n\n<p>Finally, in order to resolve the <code>classpath:</code> protocol, <a href=\"https://stackoverflow.com/questions/861500/url-to-load-resources-from-the-classpath-in-java\">you need to define an <code>URLStreamHandler</code></a> unless there is already one defined (for example, the embedded Tomcat of Spring Boot already does supports this). </p>\n"},{"tags":[],"owner":{"account_id":14054068,"reputation":30,"user_id":10151961,"display_name":"Gaurav Jestha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548247204,"creation_date":1548247204,"answer_id":54327512,"question_id":50203842,"body_markdown":"You can render image with the help of base 64 .You just convert your image on base 64 and it will show on your web page as well as mobile view.The tags are:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;img th:src=&quot;@{data:image/png ;base64,your base 64}&quot;/&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Static images not display with flying saucer and thymeleaf for generated pdf files","body":"<p>You can render image with the help of base 64 .You just convert your image on base 64 and it will show on your web page as well as mobile view.The tags are:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;img th:src=\"@{data:image/png ;base64,your base 64}\"/&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":27581037,"reputation":21,"user_id":21050237,"display_name":"Jamshid SadiK"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695383121,"creation_date":1695383121,"answer_id":77157338,"question_id":50203842,"body_markdown":"You have the option to specify the complete file path instead of using the relative path &quot;images/logo_black.png&quot; within the Thymeleaf image source attribute. To achieve this, you can create a directory named &quot;templates&quot; within the &quot;resources&quot; folder of your project. Inside this &quot;templates&quot; directory, you can place your images under a subdirectory named &quot;images.&quot; For instance, you can structure it like this: &quot;templates/images/image.png.&quot;\r\n\r\nWith this setup, you can then reference the image using the full path in the Thymeleaf th:src attribute like so:\r\n\r\n    \r\n    &lt;img th:src=&quot;@{classpath:/templates/images/image.png}&quot; alt=&quot;image&quot;/&gt;\r\n\r\nThis approach ensures that you provide the complete path to the image located within your project&#39;s resources, enhancing the clarity and precision of the image reference.","title":"Static images not display with flying saucer and thymeleaf for generated pdf files","body":"<p>You have the option to specify the complete file path instead of using the relative path &quot;images/logo_black.png&quot; within the Thymeleaf image source attribute. To achieve this, you can create a directory named &quot;templates&quot; within the &quot;resources&quot; folder of your project. Inside this &quot;templates&quot; directory, you can place your images under a subdirectory named &quot;images.&quot; For instance, you can structure it like this: &quot;templates/images/image.png.&quot;</p>\n<p>With this setup, you can then reference the image using the full path in the Thymeleaf th:src attribute like so:</p>\n<pre><code>&lt;img th:src=&quot;@{classpath:/templates/images/image.png}&quot; alt=&quot;image&quot;/&gt;\n</code></pre>\n<p>This approach ensures that you provide the complete path to the image located within your project's resources, enhancing the clarity and precision of the image reference.</p>\n"}],"owner":{"display_name":"user7307131"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2345,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":3,"score":8,"last_activity_date":1695383121,"creation_date":1525635869,"question_id":50203842,"body_markdown":"I am using thymeleaf as my template engin to map XHTML to HTML and flying saucer to generate a pdf file afterwards. \r\n\r\nNow i failed to display my static images located at /src/main/resources/ inside y generated pdf file. The file itsself will be displayed fine only images disapear.\r\n\r\nEven other locations like /src/main/resources/static or /src/main/resources/public didnt help. \r\n\r\nMy HTML / XHTML looks like:\r\n\r\n    &lt;img src=&quot;images/logo_black.png&quot;&gt;&lt;/img&gt;\r\n            &lt;img src=&quot;/images/logo_black.png&quot;&gt;&lt;/img&gt;\r\n            &lt;img alt=&quot;mastercard&quot; th:src=&quot;@{classpath:static/images/logo_black.png}&quot; /&gt;\r\n            \r\n            &lt;div data-src=&quot;images/logo_black.png&quot;&gt;&lt;/div&gt;\r\n            &lt;div data-src=&quot;/images/logo_black.png&quot;&gt;&lt;/div&gt;\r\n            &lt;div data-src=&quot;@{classpath:static/images/logo_black.png}&quot;&gt;&lt;/div&gt;\r\nnone of them is working properly.\r\n\r\nThe Images itself are visible by localhost:8048/logo_black.png\r\n\r\nI dont want to refer my images with a full url (http://...)","title":"Static images not display with flying saucer and thymeleaf for generated pdf files","body":"<p>I am using thymeleaf as my template engin to map XHTML to HTML and flying saucer to generate a pdf file afterwards. </p>\n\n<p>Now i failed to display my static images located at /src/main/resources/ inside y generated pdf file. The file itsself will be displayed fine only images disapear.</p>\n\n<p>Even other locations like /src/main/resources/static or /src/main/resources/public didnt help. </p>\n\n<p>My HTML / XHTML looks like:</p>\n\n<pre><code>&lt;img src=\"images/logo_black.png\"&gt;&lt;/img&gt;\n        &lt;img src=\"/images/logo_black.png\"&gt;&lt;/img&gt;\n        &lt;img alt=\"mastercard\" th:src=\"@{classpath:static/images/logo_black.png}\" /&gt;\n\n        &lt;div data-src=\"images/logo_black.png\"&gt;&lt;/div&gt;\n        &lt;div data-src=\"/images/logo_black.png\"&gt;&lt;/div&gt;\n        &lt;div data-src=\"@{classpath:static/images/logo_black.png}\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>none of them is working properly.</p>\n\n<p>The Images itself are visible by localhost:8048/logo_black.png</p>\n\n<p>I dont want to refer my images with a full url (<a href=\"http://..\" rel=\"noreferrer\">http://..</a>.)</p>\n"},{"tags":["java","logging","slf4j"],"answers":[{"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695382618,"creation_date":1695382618,"answer_id":77157278,"question_id":77156107,"body_markdown":"SLF4J is just a facade, it doesn&#39;t implement any logging mechanisms. What you need to search is how to configure a logging implementation, like for example log4j2, so it logs to the Windows Event Log. There are custom log4j2 appenders that do that. Current Stackoverflow guidelines forbid recommendations but an Internet search of &quot;log4j2 windows event log&quot; should give some answers.\r\n","title":"Slf4j implementation for Windows eventlogger","body":"<p>SLF4J is just a facade, it doesn't implement any logging mechanisms. What you need to search is how to configure a logging implementation, like for example log4j2, so it logs to the Windows Event Log. There are custom log4j2 appenders that do that. Current Stackoverflow guidelines forbid recommendations but an Internet search of &quot;log4j2 windows event log&quot; should give some answers.</p>\n"}],"owner":{"account_id":205579,"reputation":63,"user_id":1652309,"display_name":"eddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695382618,"creation_date":1695372599,"question_id":77156107,"body_markdown":"We have developed a Java application that uses slf4j + logback-classic to log. One of our customers asks if it would be possible to log to Windows eventlogger. \r\n\r\nFrom what I understand the slf4j-api can have many implementations. They can be &quot;plugged in&quot; by supplying a jar file with that implementation, e.g. slf4j-simple.jar, slf4j-log4j12.jar  etc. Is there a plugin for making it log to Windows eventlogger? I have searched across the net but I couldn&#39;t find it. \r\n\r\nAlso any other solutions for moving the log to Windows eventlogger would be appreciated.","title":"Slf4j implementation for Windows eventlogger","body":"<p>We have developed a Java application that uses slf4j + logback-classic to log. One of our customers asks if it would be possible to log to Windows eventlogger.</p>\n<p>From what I understand the slf4j-api can have many implementations. They can be &quot;plugged in&quot; by supplying a jar file with that implementation, e.g. slf4j-simple.jar, slf4j-log4j12.jar  etc. Is there a plugin for making it log to Windows eventlogger? I have searched across the net but I couldn't find it.</p>\n<p>Also any other solutions for moving the log to Windows eventlogger would be appreciated.</p>\n"},{"tags":["java","sockets","java-threads"],"owner":{"account_id":27696700,"reputation":1,"user_id":21142256,"display_name":"Hubert Kiszka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695383850,"answer_count":0,"score":0,"last_activity_date":1695382061,"creation_date":1695382061,"question_id":77157217,"body_markdown":"I am trying to do simple banking application but i encountered problem, my server only sends 1 message instead of sending all of them. My App consists of 3 Files\r\n\r\n```\r\npackage com.kiszka.server;\r\n\r\nimport java.io.*;\r\nimport java.net.Socket;\r\nimport java.util.Map;\r\nimport java.util.HashMap;\r\n\r\npublic class BankServer extends Thread {\r\n    private final Socket socket;\r\n    private static volatile Map&lt;String,String&gt; accAccessData = new HashMap&lt;&gt;();\r\n    private static volatile boolean admitAccess = false;\r\n    public BankServer(Socket socket) {\r\n        accInfo();\r\n        this.socket = socket;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        try {\r\n//            BufferedReader input = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n//            PrintWriter output = new PrintWriter(socket.getOutputStream(),true);\r\n            for(;;){\r\n                checkAccAccess(socket);\r\n            }\r\n        } finally {\r\n            try{\r\n                socket.close();\r\n            } catch (IOException e){\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n    public void accInfo(){\r\n        try(BufferedReader reader = new BufferedReader(new FileReader(&quot;accInfo.csv&quot;))){\r\n            String line;\r\n            while((line = reader.readLine()) != null){\r\n                String[] parts = line.split(&quot;,&quot;);\r\n                if(parts.length&gt;=2){\r\n                    String key = parts[0].trim();\r\n                    String val = parts[1].trim();\r\n                    accAccessData.put(key,val);\r\n                }\r\n            }\r\n        } catch (IOException e){\r\n            throw new RuntimeException(e);\r\n        }\r\n        for (Map.Entry&lt;String, String&gt; entry : accAccessData.entrySet()) {\r\n            System.out.println(&quot;Key: &quot; + entry.getKey() + &quot;, Value: &quot; + entry.getValue());\r\n        }\r\n    }\r\n    public static void checkAccAccess(Socket socket){\r\n        String value;\r\n        int counter = 0;\r\n        try {\r\n            BufferedReader inputReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n            PrintWriter output = new PrintWriter(socket.getOutputStream(),true);\r\n            for(;;){\r\n                output.println(&quot;Please insert your account Number&quot;);\r\n                String input = inputReader.readLine();\r\n                if(!accAccessData.containsKey(input)){\r\n                    output.println(&quot;Invalid Account Number&quot;);\r\n                } else{\r\n                    value = accAccessData.get(input);\r\n                    break;\r\n                }\r\n            }\r\n            while(counter&lt;3){\r\n                output.println(&quot;Please insert PIN to your account&quot;);\r\n                String input = inputReader.readLine();\r\n                if(!input.equals(value)){\r\n                    counter++;\r\n                }\r\n                if(input.equals(value)){\r\n                    output.println(&quot;Access granted&quot;);\r\n                    admitAccess = true;\r\n                    break;\r\n                }\r\n                if(counter == 3){\r\n                    output.println(&quot;Access denied&quot;);\r\n                }\r\n            }\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        } finally {\r\n            try {\r\n                socket.close();\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```\r\npackage com.kiszka.server;\r\n\r\nimport java.io.IOException;\r\nimport java.net.ServerSocket;\r\n\r\npublic class ServerRun {\r\n    public static void main(String[] args) {\r\n        try(ServerSocket serverSocket = new ServerSocket(5000)){\r\n            for(;;){\r\n                new BankServer(serverSocket.accept()).start();\r\n            }\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```\r\npackage com.kiszka.client;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.io.PrintWriter;\r\nimport java.net.Socket;\r\nimport java.util.Scanner;\r\n\r\npublic class ClientRun {\r\n    public static void main(String[] args) {\r\n        try(Socket socket = new Socket(&quot;127.0.0.1&quot;,5000)){\r\n            BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n            PrintWriter writer = new PrintWriter(socket.getOutputStream(),true);\r\n            Scanner scanner = new Scanner(System.in);\r\n            String input;\r\n            for(;;){\r\n                String response = reader.readLine();\r\n                System.out.println(response);\r\n                input = scanner.nextLine();\r\n                writer.println(input);\r\n            }\r\n        } catch(IOException e){\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nthe problem is when I type in wrong input it will only prints something like this\r\nPlease insert your account Number\r\n25\r\nInvalid Account Number\r\n\r\nand nothing more.\r\n\r\n\r\nBut it should like\r\n\r\nPlease insert your account Number\r\n25\r\nInvalid Account Number\r\nPlease insert your account Number\r\n\r\nSometimes it throws java.net.SocketException, i dont have an idea how to solve this problem to make this program sends all messages then waits for input from client","title":"Problem with sending mulltiple messages from server to client usign Java Socket","body":"<p>I am trying to do simple banking application but i encountered problem, my server only sends 1 message instead of sending all of them. My App consists of 3 Files</p>\n<pre><code>package com.kiszka.server;\n\nimport java.io.*;\nimport java.net.Socket;\nimport java.util.Map;\nimport java.util.HashMap;\n\npublic class BankServer extends Thread {\n    private final Socket socket;\n    private static volatile Map&lt;String,String&gt; accAccessData = new HashMap&lt;&gt;();\n    private static volatile boolean admitAccess = false;\n    public BankServer(Socket socket) {\n        accInfo();\n        this.socket = socket;\n    }\n\n    @Override\n    public void run() {\n        try {\n//            BufferedReader input = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n//            PrintWriter output = new PrintWriter(socket.getOutputStream(),true);\n            for(;;){\n                checkAccAccess(socket);\n            }\n        } finally {\n            try{\n                socket.close();\n            } catch (IOException e){\n                throw new RuntimeException(e);\n            }\n        }\n    }\n    public void accInfo(){\n        try(BufferedReader reader = new BufferedReader(new FileReader(&quot;accInfo.csv&quot;))){\n            String line;\n            while((line = reader.readLine()) != null){\n                String[] parts = line.split(&quot;,&quot;);\n                if(parts.length&gt;=2){\n                    String key = parts[0].trim();\n                    String val = parts[1].trim();\n                    accAccessData.put(key,val);\n                }\n            }\n        } catch (IOException e){\n            throw new RuntimeException(e);\n        }\n        for (Map.Entry&lt;String, String&gt; entry : accAccessData.entrySet()) {\n            System.out.println(&quot;Key: &quot; + entry.getKey() + &quot;, Value: &quot; + entry.getValue());\n        }\n    }\n    public static void checkAccAccess(Socket socket){\n        String value;\n        int counter = 0;\n        try {\n            BufferedReader inputReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n            PrintWriter output = new PrintWriter(socket.getOutputStream(),true);\n            for(;;){\n                output.println(&quot;Please insert your account Number&quot;);\n                String input = inputReader.readLine();\n                if(!accAccessData.containsKey(input)){\n                    output.println(&quot;Invalid Account Number&quot;);\n                } else{\n                    value = accAccessData.get(input);\n                    break;\n                }\n            }\n            while(counter&lt;3){\n                output.println(&quot;Please insert PIN to your account&quot;);\n                String input = inputReader.readLine();\n                if(!input.equals(value)){\n                    counter++;\n                }\n                if(input.equals(value)){\n                    output.println(&quot;Access granted&quot;);\n                    admitAccess = true;\n                    break;\n                }\n                if(counter == 3){\n                    output.println(&quot;Access denied&quot;);\n                }\n            }\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        } finally {\n            try {\n                socket.close();\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }\n}\n</code></pre>\n<pre><code>package com.kiszka.server;\n\nimport java.io.IOException;\nimport java.net.ServerSocket;\n\npublic class ServerRun {\n    public static void main(String[] args) {\n        try(ServerSocket serverSocket = new ServerSocket(5000)){\n            for(;;){\n                new BankServer(serverSocket.accept()).start();\n            }\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<pre><code>package com.kiszka.client;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.net.Socket;\nimport java.util.Scanner;\n\npublic class ClientRun {\n    public static void main(String[] args) {\n        try(Socket socket = new Socket(&quot;127.0.0.1&quot;,5000)){\n            BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n            PrintWriter writer = new PrintWriter(socket.getOutputStream(),true);\n            Scanner scanner = new Scanner(System.in);\n            String input;\n            for(;;){\n                String response = reader.readLine();\n                System.out.println(response);\n                input = scanner.nextLine();\n                writer.println(input);\n            }\n        } catch(IOException e){\n            throw new RuntimeException(e);\n        }\n    }\n}\n\n</code></pre>\n<p>the problem is when I type in wrong input it will only prints something like this\nPlease insert your account Number\n25\nInvalid Account Number</p>\n<p>and nothing more.</p>\n<p>But it should like</p>\n<p>Please insert your account Number\n25\nInvalid Account Number\nPlease insert your account Number</p>\n<p>Sometimes it throws java.net.SocketException, i dont have an idea how to solve this problem to make this program sends all messages then waits for input from client</p>\n"},{"tags":["java","concurrency","java.util.concurrent"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1695380910,"post_id":77156195,"comment_id":136020126,"body_markdown":"I don&#39;t think there is an &quot;idiomatic&quot; way.  That would imply that this problem occurs often enough for a recognizable idiom to emerge.  That&#39;s not the case.","body":"I don&#39;t think there is an &quot;idiomatic&quot; way.  That would imply that this problem occurs often enough for a recognizable idiom to emerge.  That&#39;s not the case."}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1697128308,"post_id":77157200,"comment_id":136243911,"body_markdown":"If you want to wait until a `currentTimeMillis()` based deadline, you should use [`awaitUntil`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/locks/Condition.html#awaitUntil(java.util.Date)). If you’re interested in enforcing a correct elapsed time instead, you should use `System.nanoTime()`. Since this has an unspecified base and may roll over, you have to be careful not to compare two values but rather, calculate and check the difference: `long start = System.nanoTime(); while (!flag) { long elapsed = System.nanoTime(); if(elapsed &gt;= …) break; … }`","body":"If you want to wait until a <code>currentTimeMillis()</code> based deadline, you should use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/locks/Condition.html#awaitUntil(java.util.Date)\" rel=\"nofollow noreferrer\"><code>awaitUntil</code></a>. If you’re interested in enforcing a correct elapsed time instead, you should use <code>System.nanoTime()</code>. Since this has an unspecified base and may roll over, you have to be careful not to compare two values but rather, calculate and check the difference: <code>long start = System.nanoTime(); while (!flag) { long elapsed = System.nanoTime(); if(elapsed &gt;= …) break; … }</code>"}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695381910,"creation_date":1695381910,"answer_id":77157200,"question_id":77156195,"body_markdown":"The way to do it would be to get the clock time in the at the start of the `waitFor...` method. Then when you return from await and the condition is not satisfied, get the clock time again and compare it with the first time to decide if you need to await again.  \r\n\r\nThe code could look something like this:\r\n\r\n    void waitForUpToFiveSeconds() throws InterruptedException {\r\n        lock.lock();\r\n        long deadline = System.currentTimeMillis() + 5000L;\r\n        try {\r\n            flagSet.await(5000L, TimeUnit.MILLISECONDS);\r\n            while (!flag) {\r\n                long now = System.currentTimeMillis();\r\n                if (now &gt;= deadline) {\r\n                    break;\r\n                }\r\n                flagSet.await(deadline - now, TimeUnit.MILLISECONDS);\r\n            }\r\n        } finally {\r\n            lock.unlock();\r\n        }\r\n    }\r\n\r\n(It could probably be written in fewer lines of code, but I prefer to write code like this is a way that maximizes readability.)\r\n","title":"Idiom for 2 argument version of Condition#await(long, TimeUnit)","body":"<p>The way to do it would be to get the clock time in the at the start of the <code>waitFor...</code> method. Then when you return from await and the condition is not satisfied, get the clock time again and compare it with the first time to decide if you need to await again.</p>\n<p>The code could look something like this:</p>\n<pre><code>void waitForUpToFiveSeconds() throws InterruptedException {\n    lock.lock();\n    long deadline = System.currentTimeMillis() + 5000L;\n    try {\n        flagSet.await(5000L, TimeUnit.MILLISECONDS);\n        while (!flag) {\n            long now = System.currentTimeMillis();\n            if (now &gt;= deadline) {\n                break;\n            }\n            flagSet.await(deadline - now, TimeUnit.MILLISECONDS);\n        }\n    } finally {\n        lock.unlock();\n    }\n}\n</code></pre>\n<p>(It could probably be written in fewer lines of code, but I prefer to write code like this is a way that maximizes readability.)</p>\n"}],"owner":{"account_id":17087029,"reputation":67,"user_id":12363996,"display_name":"David O&#39;Loughlin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77157200,"answer_count":1,"score":-2,"last_activity_date":1695381910,"creation_date":1695373254,"question_id":77156195,"body_markdown":"What&#39;s the idiomatic way of handling spurious wakeups when using the 2 argument version of Condition#await(long, TimeUnit)\r\n\r\nI understand the zero argument version:\r\n\r\n    import java.util.concurrent.Executors;\r\n    import java.util.concurrent.TimeUnit;\r\n    import java.util.concurrent.locks.Condition;\r\n    import java.util.concurrent.locks.Lock;\r\n    import java.util.concurrent.locks.ReentrantLock;\r\n    \r\n    class Scratch {\r\n        private final Lock lock = new ReentrantLock();\r\n        private final Condition flagSet = lock.newCondition();\r\n        private boolean flag;\r\n    \r\n        void waitForever() throws InterruptedException {\r\n            lock.lock();\r\n            try {\r\n                while (!flag) {\r\n                    flagSet.await();\r\n                }\r\n            } finally {\r\n                lock.unlock();\r\n            }\r\n        }\r\n   \r\n        void setFlag() {\r\n            lock.lock();\r\n            try {\r\n                flag = true;\r\n                System.out.println(&quot;Flag set to true&quot;);\r\n                flagSet.signalAll();\r\n            } finally {\r\n                lock.unlock();\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) throws InterruptedException {\r\n            var scratch = new Scratch();\r\n            var executor = Executors.newSingleThreadScheduledExecutor();\r\n            executor.schedule(scratch::setFlag, 10000, TimeUnit.MILLISECONDS);\r\n            System.out.println(&quot;Waiting for flag...&quot;);\r\n            scratch.waitForever();\r\n            System.out.println(&quot;Finished waiting&quot;);\r\n            executor.shutdownNow();\r\n            System.exit(0);\r\n        }\r\n    }\r\n\r\nHow would I change this so that I wait a maximum of 5 seconds while catering for the possibility of a spurious wakeup?","title":"Idiom for 2 argument version of Condition#await(long, TimeUnit)","body":"<p>What's the idiomatic way of handling spurious wakeups when using the 2 argument version of Condition#await(long, TimeUnit)</p>\n<p>I understand the zero argument version:</p>\n<pre><code>import java.util.concurrent.Executors;\nimport java.util.concurrent.TimeUnit;\nimport java.util.concurrent.locks.Condition;\nimport java.util.concurrent.locks.Lock;\nimport java.util.concurrent.locks.ReentrantLock;\n\nclass Scratch {\n    private final Lock lock = new ReentrantLock();\n    private final Condition flagSet = lock.newCondition();\n    private boolean flag;\n\n    void waitForever() throws InterruptedException {\n        lock.lock();\n        try {\n            while (!flag) {\n                flagSet.await();\n            }\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    void setFlag() {\n        lock.lock();\n        try {\n            flag = true;\n            System.out.println(&quot;Flag set to true&quot;);\n            flagSet.signalAll();\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        var scratch = new Scratch();\n        var executor = Executors.newSingleThreadScheduledExecutor();\n        executor.schedule(scratch::setFlag, 10000, TimeUnit.MILLISECONDS);\n        System.out.println(&quot;Waiting for flag...&quot;);\n        scratch.waitForever();\n        System.out.println(&quot;Finished waiting&quot;);\n        executor.shutdownNow();\n        System.exit(0);\n    }\n}\n</code></pre>\n<p>How would I change this so that I wait a maximum of 5 seconds while catering for the possibility of a spurious wakeup?</p>\n"},{"tags":["java","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":14739504,"reputation":71,"user_id":10644487,"display_name":"Sahil"},"score":0,"creation_date":1564579893,"post_id":57289083,"comment_id":101078250,"body_markdown":"hi @Rajendra Gupta thnx for quick response. i have tried this also but doesn&#39;t worked.","body":"hi @Rajendra Gupta thnx for quick response. i have tried this also but doesn&#39;t worked."}],"tags":[],"owner":{"account_id":2513345,"reputation":381,"user_id":2185290,"accept_rate":20,"display_name":"Rajendra Gupta"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1564570687,"creation_date":1564570344,"answer_id":57289083,"question_id":57288932,"body_markdown":"@RestController is not meant to be used to return views to be resolved. It is supposed to return data which will be written to the body of the response\r\n\r\n            @RestController     //change it to @Controller\r\n            public class ProductController {\r\n            @Autowired\r\n            ProductService service;\r\n\r\nThis difference between @Controller and the @RestController annotation is that @Controller is to create a Map of model object and find a view but the @RestController simply returns the object and object data is directly written into HTTP response as JSON or XML.","title":"Getting resource not found when try to return html page from controller","body":"<p>@RestController is not meant to be used to return views to be resolved. It is supposed to return data which will be written to the body of the response</p>\n\n<pre><code>        @RestController     //change it to @Controller\n        public class ProductController {\n        @Autowired\n        ProductService service;\n</code></pre>\n\n<p>This difference between @Controller and the @RestController annotation is that @Controller is to create a Map of model object and find a view but the @RestController simply returns the object and object data is directly written into HTTP response as JSON or XML.</p>\n"},{"comments":[{"owner":{"account_id":14739504,"reputation":71,"user_id":10644487,"display_name":"Sahil"},"score":0,"creation_date":1564578576,"post_id":57289196,"comment_id":101077424,"body_markdown":"But i am returning ModelAndView from @RestController. And that can be return from restcontroller.","body":"But i am returning ModelAndView from @RestController. And that can be return from restcontroller."},{"owner":{"account_id":14739504,"reputation":71,"user_id":10644487,"display_name":"Sahil"},"score":0,"creation_date":1564578810,"post_id":57289196,"comment_id":101077579,"body_markdown":"I have tried @Controller but that also doesn&#39;t worked.","body":"I have tried @Controller but that also doesn&#39;t worked."},{"owner":{"account_id":2513345,"reputation":381,"user_id":2185290,"accept_rate":20,"display_name":"Rajendra Gupta"},"score":0,"creation_date":1564588652,"post_id":57289196,"comment_id":101083795,"body_markdown":"show where you have written the view resolver and configurations in properties file","body":"show where you have written the view resolver and configurations in properties file"}],"tags":[],"owner":{"account_id":16392366,"reputation":36,"user_id":11840810,"display_name":"Sivakumar Neelakandan"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1564572706,"creation_date":1564570701,"answer_id":57289196,"question_id":57288932,"body_markdown":"You should always use `@Controller` Annotation while using Spring MVC.\r\n`@RestController` is different from `@Controller`.\r\n\r\n`@Controller` returns a view, used in MVC applications,\r\n\r\nWhile `@RestController` returns a response(Mostly Json), it converts your your java object to Json by using Jackson jar, and these are used for api&#39;s.\r\n","title":"Getting resource not found when try to return html page from controller","body":"<p>You should always use <code>@Controller</code> Annotation while using Spring MVC.\n<code>@RestController</code> is different from <code>@Controller</code>.</p>\n\n<p><code>@Controller</code> returns a view, used in MVC applications,</p>\n\n<p>While <code>@RestController</code> returns a response(Mostly Json), it converts your your java object to Json by using Jackson jar, and these are used for api's.</p>\n"},{"comments":[{"owner":{"account_id":14739504,"reputation":71,"user_id":10644487,"display_name":"Sahil"},"score":1,"creation_date":1564578935,"post_id":57290978,"comment_id":101077638,"body_markdown":"I have tried @Controller but that also doesn&#39;t worked.","body":"I have tried @Controller but that also doesn&#39;t worked."},{"owner":{"account_id":15190407,"reputation":13087,"user_id":10961238,"display_name":"Romil Patel"},"score":0,"creation_date":1564579083,"post_id":57290978,"comment_id":101077731,"body_markdown":"Hello @Sahil, Can you update the question with new error","body":"Hello @Sahil, Can you update the question with new error"},{"owner":{"account_id":15190407,"reputation":13087,"user_id":10961238,"display_name":"Romil Patel"},"score":0,"creation_date":1564579193,"post_id":57290978,"comment_id":101077814,"body_markdown":"@Sahil Also add `@ResponseBody` as I have added in answer and let me know how its work","body":"@Sahil Also add <code>@ResponseBody</code> as I have added in answer and let me know how its work"},{"owner":{"account_id":14739504,"reputation":71,"user_id":10644487,"display_name":"Sahil"},"score":0,"creation_date":1564579703,"post_id":57290978,"comment_id":101078138,"body_markdown":"here i debug log after using above options.....                                    2019-07-31 18:57:38.785  WARN 32127 --- [nio-8080-exec-2] o.s.w.s.r.ResourceHttpRequestHandler     : Path with &quot;WEB-INF&quot; or &quot;META-INF&quot;: [WEB-INF/html/home.html]\n2019-07-31 18:57:38.786 DEBUG 32127 --- [nio-8080-exec-2] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found\n2019-07-31 18:57:38.786 DEBUG 32127 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Exiting from &quot;FORWARD&quot; dispatch, status 404","body":"here i debug log after using above options.....                                    2019-07-31 18:57:38.785  WARN 32127 --- [nio-8080-exec-2] o.s.w.s.r.ResourceHttpRequestHandler     : Path with &quot;WEB-INF&quot; or &quot;META-INF&quot;: [WEB-INF/html/home.html] 2019-07-31 18:57:38.786 DEBUG 32127 --- [nio-8080-exec-2] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found 2019-07-31 18:57:38.786 DEBUG 32127 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Exiting from &quot;FORWARD&quot; dispatch, status 404"},{"owner":{"account_id":15190407,"reputation":13087,"user_id":10961238,"display_name":"Romil Patel"},"score":0,"creation_date":1564579829,"post_id":57290978,"comment_id":101078216,"body_markdown":"@Sahil After adding ResponseBody are you getting this? and where you have kept home.html file","body":"@Sahil After adding ResponseBody are you getting this? and where you have kept home.html file"},{"owner":{"account_id":14739504,"reputation":71,"user_id":10644487,"display_name":"Sahil"},"score":0,"creation_date":1564579982,"post_id":57290978,"comment_id":101078309,"body_markdown":"Yes @Patel. I have placed home.html under webapp/WEB-INF/html. and in application.properties here is configured prefix path----spring.mvc.view.prefix=/WEB-INF/html/\nspring.mvc.view.suffix=.html","body":"Yes @Patel. I have placed home.html under webapp/WEB-INF/html. and in application.properties here is configured prefix path----spring.mvc.view.prefix=/WEB-INF/html/ spring.mvc.view.suffix=.html"},{"owner":{"account_id":15190407,"reputation":13087,"user_id":10961238,"display_name":"Romil Patel"},"score":0,"creation_date":1564580410,"post_id":57290978,"comment_id":101078589,"body_markdown":"Hello @Sahil can you add your project structure","body":"Hello @Sahil can you add your project structure"},{"owner":{"account_id":15190407,"reputation":13087,"user_id":10961238,"display_name":"Romil Patel"},"score":0,"creation_date":1564580526,"post_id":57290978,"comment_id":101078677,"body_markdown":"@Sahil Have you manually created WEB-INF as there is no default WEB-INF is ther e for Spring Boot","body":"@Sahil Have you manually created WEB-INF as there is no default WEB-INF is ther e for Spring Boot"},{"owner":{"account_id":14739504,"reputation":71,"user_id":10644487,"display_name":"Sahil"},"score":0,"creation_date":1564583089,"post_id":57290978,"comment_id":101080423,"body_markdown":"I have checked using above project structure also but that also doen&#39;t worked. Can you please share your email or something so that i can share project with you. I am still getting resource not found.","body":"I have checked using above project structure also but that also doen&#39;t worked. Can you please share your email or something so that i can share project with you. I am still getting resource not found."},{"owner":{"account_id":14739504,"reputation":71,"user_id":10644487,"display_name":"Sahil"},"score":0,"creation_date":1564583362,"post_id":57290978,"comment_id":101080604,"body_markdown":"Hi @patel i have shared the project with you. Please check and thnx for your assistance.","body":"Hi @patel i have shared the project with you. Please check and thnx for your assistance."},{"owner":{"account_id":15190407,"reputation":13087,"user_id":10961238,"display_name":"Romil Patel"},"score":0,"creation_date":1564583482,"post_id":57290978,"comment_id":101080686,"body_markdown":"@Sahil 403, please provide the access","body":"@Sahil 403, please provide the access"}],"tags":[],"owner":{"account_id":15190407,"reputation":13087,"user_id":10961238,"display_name":"Romil Patel"},"comment_count":11,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1564581929,"creation_date":1564576828,"answer_id":57290978,"question_id":57288932,"body_markdown":"Avoid `@RestController` for *MVC Based Application* which has to return a view. It is mainly used for REST APIs. While *`@Controller` can return a view* \r\n\r\n*More On `@RestController`*:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n - This annotation is a specialized version of `@Controller` which adds\r\n   `@Controller` and `@ResponseBody` annotation automatically. so we do not have to add `@ResponseBody` to our mapping methods. That means\r\n   `@ResponseBody` is default active.\r\n - If you use `@RestController` you cannot return a view (By using\r\n   `Viewresolver` in Spring/Spring-Boot)\r\n - `@RestController` also converts the response to `JSON/XML automatically` as `@ResponseBody` makes the returned objects to something that could be in the body, `e.g. JSON or XML`\r\n\r\n**[Controller vs RestController][2]**\r\n\r\n\r\n----------\r\n \r\n\r\n    @RestController\r\n        public class ProductController {\r\n            @Autowired\r\n            ProductService service;\r\n    \r\n            @RequestMapping(value = { &quot;/&quot;, &quot;/home&quot; })\r\n            public @ResponseBody ModelAndView home() {\r\n                System.out.println(&quot;sdasasas&quot;);\r\n                ModelAndView modelAndView = new ModelAndView();\r\n    \t        modelAndView.setViewName(&quot;home&quot;);\r\n    \t        return modelAndView;\r\n            }\r\n    }\r\n\r\nProject Structure\r\n[![enter image description here][3]][3]\r\n\r\nNo need to specify `spring.mvc.view.prefix=/WEB-INF/html/ spring.mvc.view.suffix=.html`\r\n\r\nAlso, make sure you don&#39;t have any additional class with `@EnableWebMvc` annotation. This can mess up the *spring-boot autoconfiguration.*\r\n\r\n  [1]: https://i.stack.imgur.com/U9mP2.png\r\n  [2]: https://stackoverflow.com/a/56882597/10961238\r\n  [3]: https://i.stack.imgur.com/GZcLt.png","title":"Getting resource not found when try to return html page from controller","body":"<p>Avoid <code>@RestController</code> for <em>MVC Based Application</em> which has to return a view. It is mainly used for REST APIs. While <em><code>@Controller</code> can return a view</em> </p>\n\n<p><em>More On <code>@RestController</code></em>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/U9mP2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U9mP2.png\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li>This annotation is a specialized version of <code>@Controller</code> which adds\n<code>@Controller</code> and <code>@ResponseBody</code> annotation automatically. so we do not have to add <code>@ResponseBody</code> to our mapping methods. That means\n<code>@ResponseBody</code> is default active.</li>\n<li>If you use <code>@RestController</code> you cannot return a view (By using\n<code>Viewresolver</code> in Spring/Spring-Boot)</li>\n<li><code>@RestController</code> also converts the response to <code>JSON/XML automatically</code> as <code>@ResponseBody</code> makes the returned objects to something that could be in the body, <code>e.g. JSON or XML</code></li>\n</ul>\n\n<p><strong><a href=\"https://stackoverflow.com/a/56882597/10961238\">Controller vs RestController</a></strong></p>\n\n<hr>\n\n<pre><code>@RestController\n    public class ProductController {\n        @Autowired\n        ProductService service;\n\n        @RequestMapping(value = { \"/\", \"/home\" })\n        public @ResponseBody ModelAndView home() {\n            System.out.println(\"sdasasas\");\n            ModelAndView modelAndView = new ModelAndView();\n            modelAndView.setViewName(\"home\");\n            return modelAndView;\n        }\n}\n</code></pre>\n\n<p>Project Structure\n<a href=\"https://i.stack.imgur.com/GZcLt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GZcLt.png\" alt=\"enter image description here\"></a></p>\n\n<p>No need to specify <code>spring.mvc.view.prefix=/WEB-INF/html/ spring.mvc.view.suffix=.html</code></p>\n\n<p>Also, make sure you don't have any additional class with <code>@EnableWebMvc</code> annotation. This can mess up the <em>spring-boot autoconfiguration.</em></p>\n"},{"tags":[],"owner":{"account_id":16947335,"reputation":1498,"user_id":12257758,"display_name":"ANUP SAJJAN"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1629052191,"creation_date":1629052191,"answer_id":68794339,"question_id":57288932,"body_markdown":"If you are returning a view page like .jsp from the controller, and it&#39;s throwing an error saying cannot locate resource .jsp or 404 not found, then try adding these dependencies to your pom file, it worked for me.\r\n\r\n     &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n        &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;","title":"Getting resource not found when try to return html page from controller","body":"<p>If you are returning a view page like .jsp from the controller, and it's throwing an error saying cannot locate resource .jsp or 404 not found, then try adding these dependencies to your pom file, it worked for me.</p>\n<pre><code> &lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1695607688,"post_id":77157199,"comment_id":136042440,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77157199/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":11212691,"reputation":1,"user_id":8226319,"display_name":"rahuljain"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695381900,"creation_date":1695381900,"answer_id":77157199,"question_id":57288932,"body_markdown":"Please check your project structure.\r\nThe class where you are calling SpringApplication.run(XXX.class, args), hierarchy wise should be on top, and then other classes where you are using @RestController.","title":"Getting resource not found when try to return html page from controller","body":"<p>Please check your project structure.\nThe class where you are calling SpringApplication.run(XXX.class, args), hierarchy wise should be on top, and then other classes where you are using @RestController.</p>\n"}],"owner":{"account_id":14739504,"reputation":71,"user_id":10644487,"display_name":"Sahil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7999,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":57290978,"answer_count":5,"score":3,"last_activity_date":1695381900,"creation_date":1564569781,"question_id":57288932,"body_markdown":"I am unable to render html page in springboot. \r\nHere is code...\r\n\r\n            \r\n    @RestController\r\n        public class ProductController {\r\n        \t@Autowired\r\n        \tProductService service;\r\n        \r\n        \t@InitBinder\r\n        \tpublic void initBinder(WebDataBinder webDataBinder) {\r\n        \t\tSimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;);\r\n        \t\tdateFormat.setLenient(false);\r\n        \t\twebDataBinder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, true));\r\n        \t}\r\n        \t\r\n        \t@RequestMapping(value = { &quot;/&quot;, &quot;/home&quot; })\r\n        \tpublic ModelAndView home() {\r\n        \t\tSystem.out.println(&quot;sdasasas&quot;);\r\n        \t\treturn new ModelAndView(&quot;home&quot;);\r\n        \t}\r\n        \r\n        \r\n    \r\n    \r\n\r\nbut whenever i hit http://localhost:8080/home it shows following logs\r\n\r\n    -8080-exec-4] o.s.w.s.v.ContentNegotiatingViewResolver : Selected &#39;text/html&#39; given [text/html, application/xhtml+xml, image/webp, image/apng, application/signed-exchange;v=b3, application/xml;q=0.9,*/*;q=0.8]\r\n    2019-07-31 16:05:25.354 DEBUG 14850 --- [nio-8080-exec-4] o.s.w.servlet.view.InternalResourceView  : View name &#39;home&#39;, model {}\r\n    2019-07-31 16:05:25.354 DEBUG 14850 --- [nio-8080-exec-4] o.s.w.servlet.view.InternalResourceView  : Forwarding to [/WEB-INF/html/home.html]\r\n    2019-07-31 16:05:25.354 DEBUG 14850 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : &quot;FORWARD&quot; dispatch for GET &quot;/WEB-INF/html/home.html&quot;, parameters={}\r\n    2019-07-31 16:05:25.356 DEBUG 14850 --- [nio-8080-exec-4] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [&quot;classpath:/META-INF/resources/&quot;, &quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot;,&quot;/&quot;]\r\n    2019-07-31 16:05:25.356  WARN 14850 --- [nio-8080-exec-4] o.s.w.s.r.ResourceHttpRequestHandler     : Path with &quot;WEB-INF&quot; or &quot;META-INF&quot;: [WEB-INF/html/home.html]\r\n    2019-07-31 16:05:25.356 DEBUG 14850 --- [nio-8080-exec-4] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found\r\n    2019-07-31 16:05:25.357 DEBUG 14850 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Exiting from &quot;FORWARD&quot; dispatch, status 404\r\n    2019-07-31 16:05:25.357 DEBUG 14850 --- [nio-8080-exec-4] o.j.s.OpenEntityManagerInViewInterceptor : Closing JPA EntityManager in OpenEntityManagerInViewInterceptor\r\n    2019-07-31 16:05:25.357 DEBUG 14850 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND\r\n    2019-07-31 16:05:25.357 DEBUG 14850 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : &quot;ERROR&quot; dispatch for GET &quot;/error&quot;, parameters={}","title":"Getting resource not found when try to return html page from controller","body":"<p>I am unable to render html page in springboot.\nHere is code...</p>\n<pre><code>@RestController\n    public class ProductController {\n        @Autowired\n        ProductService service;\n    \n        @InitBinder\n        public void initBinder(WebDataBinder webDataBinder) {\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;);\n            dateFormat.setLenient(false);\n            webDataBinder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, true));\n        }\n        \n        @RequestMapping(value = { &quot;/&quot;, &quot;/home&quot; })\n        public ModelAndView home() {\n            System.out.println(&quot;sdasasas&quot;);\n            return new ModelAndView(&quot;home&quot;);\n        }\n    \n    \n</code></pre>\n<p>but whenever i hit http://localhost:8080/home it shows following logs</p>\n<pre><code>-8080-exec-4] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, application/xhtml+xml, image/webp, image/apng, application/signed-exchange;v=b3, application/xml;q=0.9,*/*;q=0.8]\n2019-07-31 16:05:25.354 DEBUG 14850 --- [nio-8080-exec-4] o.s.w.servlet.view.InternalResourceView  : View name 'home', model {}\n2019-07-31 16:05:25.354 DEBUG 14850 --- [nio-8080-exec-4] o.s.w.servlet.view.InternalResourceView  : Forwarding to [/WEB-INF/html/home.html]\n2019-07-31 16:05:25.354 DEBUG 14850 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : &quot;FORWARD&quot; dispatch for GET &quot;/WEB-INF/html/home.html&quot;, parameters={}\n2019-07-31 16:05:25.356 DEBUG 14850 --- [nio-8080-exec-4] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [&quot;classpath:/META-INF/resources/&quot;, &quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot;,&quot;/&quot;]\n2019-07-31 16:05:25.356  WARN 14850 --- [nio-8080-exec-4] o.s.w.s.r.ResourceHttpRequestHandler     : Path with &quot;WEB-INF&quot; or &quot;META-INF&quot;: [WEB-INF/html/home.html]\n2019-07-31 16:05:25.356 DEBUG 14850 --- [nio-8080-exec-4] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found\n2019-07-31 16:05:25.357 DEBUG 14850 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Exiting from &quot;FORWARD&quot; dispatch, status 404\n2019-07-31 16:05:25.357 DEBUG 14850 --- [nio-8080-exec-4] o.j.s.OpenEntityManagerInViewInterceptor : Closing JPA EntityManager in OpenEntityManagerInViewInterceptor\n2019-07-31 16:05:25.357 DEBUG 14850 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND\n2019-07-31 16:05:25.357 DEBUG 14850 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : &quot;ERROR&quot; dispatch for GET &quot;/error&quot;, parameters={}\n</code></pre>\n"},{"tags":["java","hibernate","kotlin","jpa"],"comments":[{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1695369656,"post_id":77155630,"comment_id":136017930,"body_markdown":"Generally, you want to use only one. Either ManyToOne or OneToMany. Why do you need both? `Parent` seems to be the aggregate. Just omit the parent field in the child and fetch the children always by the parent.","body":"Generally, you want to use only one. Either ManyToOne or OneToMany. Why do you need both? <code>Parent</code> seems to be the aggregate. Just omit the parent field in the child and fetch the children always by the parent."},{"owner":{"account_id":1915598,"reputation":863,"user_id":1728241,"accept_rate":57,"display_name":"Mr.Mountain"},"score":0,"creation_date":1695370217,"post_id":77155630,"comment_id":136018025,"body_markdown":"Since child is owning the foreign key, your comment is not quiet right: I should omit the child in the parent, and fetch the children using the parent id using the fk column. But It want to make both work - so instead of asking &quot;Why both&quot; - I would like to get help for the question: What do I have to do, to make it work.","body":"Since child is owning the foreign key, your comment is not quiet right: I should omit the child in the parent, and fetch the children using the parent id using the fk column. But It want to make both work - so instead of asking &quot;Why both&quot; - I would like to get help for the question: What do I have to do, to make it work."},{"owner":{"account_id":3973489,"reputation":2934,"user_id":3277386,"accept_rate":60,"display_name":"TreffnonX"},"score":1,"creation_date":1695373228,"post_id":77155630,"comment_id":136018554,"body_markdown":"You can&#39;t make it work. Assume this: If you fetch the list of children when you fetch a parent, then you would have to fetch all child entities as well. Those child entities then, would have their own child entities fetched (immediately). What you need is a lazy list, one that only fetches it&#39;s entities, once they are accessed, but this is (often) a very bad pattern, as it causes unexpected DB-calls in situations where you don&#39;t expect them, and depending on the implementation, you either fetch one, or all entities, either which can be inefficient, if generalized.","body":"You can&#39;t make it work. Assume this: If you fetch the list of children when you fetch a parent, then you would have to fetch all child entities as well. Those child entities then, would have their own child entities fetched (immediately). What you need is a lazy list, one that only fetches it&#39;s entities, once they are accessed, but this is (often) a very bad pattern, as it causes unexpected DB-calls in situations where you don&#39;t expect them, and depending on the implementation, you either fetch one, or all entities, either which can be inefficient, if generalized."},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1695375361,"post_id":77155630,"comment_id":136019024,"body_markdown":"@Mr.Mountain for a relational DB you just need one of those relations. I&#39;d add an FK in the child but have a `@OneToMany` at the parent combined with `@JoinColumn(name = &quot;parent_fk&quot;, nullable = false)`","body":"@Mr.Mountain for a relational DB you just need one of those relations. I&#39;d add an FK in the child but have a <code>@OneToMany</code> at the parent combined with <code>@JoinColumn(name = &quot;parent_fk&quot;, nullable = false)</code>"},{"owner":{"account_id":1915598,"reputation":863,"user_id":1728241,"accept_rate":57,"display_name":"Mr.Mountain"},"score":0,"creation_date":1695381486,"post_id":77155630,"comment_id":136020249,"body_markdown":"But this would create a new column at the parent &#39;parent_fk&#39; referencing the child. The relation should stay unidirectional. But the retrieval should collect the reference.","body":"But this would create a new column at the parent &#39;parent_fk&#39; referencing the child. The relation should stay unidirectional. But the retrieval should collect the reference."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1695396284,"post_id":77155630,"comment_id":136023404,"body_markdown":"I don&#39;t see any problems with your mappings - this a standard bidirectional OneToMany relationship. It is also the standard problem with bidirectional relationships - your application is only setting the ManyToOne side of things. JPA maintains a cache of managed entities, so every find call on the parent will return the managed instance. As these are just java objects, the Parent collection will never show the children referencing it if you don&#39;t set the references to keep the object in synch with the database; that is until it is refreshed or re-loaded from the database.","body":"I don&#39;t see any problems with your mappings - this a standard bidirectional OneToMany relationship. It is also the standard problem with bidirectional relationships - your application is only setting the ManyToOne side of things. JPA maintains a cache of managed entities, so every find call on the parent will return the managed instance. As these are just java objects, the Parent collection will never show the children referencing it if you don&#39;t set the references to keep the object in synch with the database; that is until it is refreshed or re-loaded from the database."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1695398818,"post_id":77155630,"comment_id":136023879,"body_markdown":"In short: add the child to the parent.children list when adding new children is the easiest solution. If you don&#39;t/can&#39;t do that, the other alternative is to force a refresh on the parent instance using em.refresh(parent), which will cause it to re fetch the children collection from the database with the current state.","body":"In short: add the child to the parent.children list when adding new children is the easiest solution. If you don&#39;t/can&#39;t do that, the other alternative is to force a refresh on the parent instance using em.refresh(parent), which will cause it to re fetch the children collection from the database with the current state."},{"owner":{"account_id":1915598,"reputation":863,"user_id":1728241,"accept_rate":57,"display_name":"Mr.Mountain"},"score":0,"creation_date":1695632238,"post_id":77155630,"comment_id":136045312,"body_markdown":"Ok - so JPA will not fetch the children and I have to do it manually. Right? If so, please provide a nice answer for the next JPA solution seeking developer and I will accept the answer.","body":"Ok - so JPA will not fetch the children and I have to do it manually. Right? If so, please provide a nice answer for the next JPA solution seeking developer and I will accept the answer."}],"owner":{"account_id":1915598,"reputation":863,"user_id":1728241,"accept_rate":57,"display_name":"Mr.Mountain"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695381420,"creation_date":1695367874,"question_id":77155630,"body_markdown":"**Infos**\r\n\r\nSpring 3.1.2 / Kotlin 1.9.10\r\n\r\n**Code**\r\n```\r\n@Entity\r\ndata class Parent(\r\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    var id: Long? = -1,\r\n    @OneToMany(mappedBy = &quot;parent&quot;, fetch = FetchType.LAZY)\r\n    val children: List&lt;Child&gt;? = arrayListOf()\r\n)\r\n\r\n\r\n@Entity\r\ndata class Child(\r\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    var id: Long? = -1,\r\n    @ManyToOne(fetch = FetchType.LAZY, optional = true) @JoinColumn(name = &quot;fk_parent&quot;) // owns the foreign keys\r\n    val parent: Parent? = null\r\n)\r\n\r\n@Repository\r\ninterface ParentRepository : JpaRepository&lt;Parent, Long&gt;\r\n\r\n@Repository\r\ninterface ChildRepository : JpaRepository&lt;Child, Long&gt;\r\n\r\n```\r\n\r\n**Test with H2 and PostGres Dialect**\r\n\r\n\r\n```\r\n@Transactional\r\n@SpringBootTest(classes = [Application::class], webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\r\n@ActiveProfiles(&quot;test&quot;)\r\ninternal class ParentRepositoryTest {\r\n\r\n    @Autowired\r\n    lateinit var parentRepository: ParentRepository\r\n\r\n    @Autowired\r\n    lateinit var childRepository: ChildRepository\r\n\r\n    @Test\r\n    fun test() {\r\n        var parent = parentRepository.saveAndFlush(Parent())\r\n        childRepository.saveAndFlush(Child().copy(parent = parent))\r\n        parent = parentRepository.findById(parent.id).get() // don&#39;t do this at home, kids\r\n        Assertions.assertNotNull(parent.children)\r\n        Assertions.assertTrue(parent.children!!.isNotEmpty()) // fails\r\n    }\r\n}\r\n```\r\n\r\n**Question**\r\n\r\nWhen running the test field of parent containing the children is always empty. But I want to use the list of the children.\r\n","title":"JPA Spring OneToMany ManyToOne Collection Empty","body":"<p><strong>Infos</strong></p>\n<p>Spring 3.1.2 / Kotlin 1.9.10</p>\n<p><strong>Code</strong></p>\n<pre><code>@Entity\ndata class Parent(\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    var id: Long? = -1,\n    @OneToMany(mappedBy = &quot;parent&quot;, fetch = FetchType.LAZY)\n    val children: List&lt;Child&gt;? = arrayListOf()\n)\n\n\n@Entity\ndata class Child(\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    var id: Long? = -1,\n    @ManyToOne(fetch = FetchType.LAZY, optional = true) @JoinColumn(name = &quot;fk_parent&quot;) // owns the foreign keys\n    val parent: Parent? = null\n)\n\n@Repository\ninterface ParentRepository : JpaRepository&lt;Parent, Long&gt;\n\n@Repository\ninterface ChildRepository : JpaRepository&lt;Child, Long&gt;\n\n</code></pre>\n<p><strong>Test with H2 and PostGres Dialect</strong></p>\n<pre><code>@Transactional\n@SpringBootTest(classes = [Application::class], webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\n@ActiveProfiles(&quot;test&quot;)\ninternal class ParentRepositoryTest {\n\n    @Autowired\n    lateinit var parentRepository: ParentRepository\n\n    @Autowired\n    lateinit var childRepository: ChildRepository\n\n    @Test\n    fun test() {\n        var parent = parentRepository.saveAndFlush(Parent())\n        childRepository.saveAndFlush(Child().copy(parent = parent))\n        parent = parentRepository.findById(parent.id).get() // don't do this at home, kids\n        Assertions.assertNotNull(parent.children)\n        Assertions.assertTrue(parent.children!!.isNotEmpty()) // fails\n    }\n}\n</code></pre>\n<p><strong>Question</strong></p>\n<p>When running the test field of parent containing the children is always empty. But I want to use the list of the children.</p>\n"},{"tags":["java","apache-kafka","producer-consumer"],"comments":[{"owner":{"account_id":3285310,"reputation":150,"user_id":4316743,"accept_rate":20,"display_name":"Michal"},"score":0,"creation_date":1520954164,"post_id":47231775,"comment_id":85522733,"body_markdown":"could be same problem as here https://stackoverflow.com/questions/43315013/how-to-make-kafka-source-reconnect-when-kafka-restarts","body":"could be same problem as here <a href=\"https://stackoverflow.com/questions/43315013/how-to-make-kafka-source-reconnect-when-kafka-restarts\" title=\"how to make kafka source reconnect when kafka restarts\">stackoverflow.com/questions/43315013/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":5201756,"reputation":1971,"user_id":4160889,"accept_rate":74,"display_name":"ForeverLearner"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581280585,"creation_date":1581257192,"answer_id":60137450,"question_id":47231775,"body_markdown":"     bin/kafka-console-consumer.sh --bootstrap-server tt01.my.tech:9092,tt02.my.tech:9092,tt03.my.tech:9092 --topic wallet-test-topic1 --from-beginning\r\n    new message from topic1\r\n    hello\r\n    hello world\r\n    123\r\n    hello again\r\n    123\r\n    what do i publish ?\r\n    [2020-02-09 16:57:21,142] WARN [Consumer clientId=consumer-1, groupId=console-consumer-93672] Connection to node 2 (tt02.my.tech/192.168.35.118:9092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n    [2020-02-09 16:57:25,999] WARN [Consumer clientId=consumer-1, groupId=console-consumer-93672] Connection to node 2 (tt02.my.tech/192.168.35.118:9092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n    [2020-02-09 16:57:58,902] WARN [Consumer clientId=consumer-1, groupId=console-consumer-93672] Connection to node 2 (tt02.my.tech/192.168.35.118:9092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n    [2020-02-09 16:57:59,024] WARN [Consumer clientId=consumer-1, groupId=console-consumer-93672] Connection to node 3 (tt03.my.tech/192.168.35.126:9092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n    ^CProcessed a total of 7 messages\r\n\r\n\r\nOn the consumer side, if there is no message read after the poll , this warning is thrown.\r\n\r\nBasically, a call to `.poll` has a reference to \r\n\r\n`handleTimedOutRequests(responses, updatedNow);`\r\n\r\nIf there are no message read in this poll and there is a timeout, then `processDisconnection` will throw the warning.\r\n\r\n    private void handleTimedOutRequests(List&lt;ClientResponse&gt; responses, long now) {\r\n        List&lt;String&gt; nodeIds = this.inFlightRequests.nodesWithTimedOutRequests(now);\r\n        for (String nodeId : nodeIds) {\r\n            // close connection to the node\r\n            this.selector.close(nodeId);\r\n            log.debug(&quot;Disconnecting from node {} due to request timeout.&quot;, nodeId);\r\n            processDisconnection(responses, nodeId, now, ChannelState.LOCAL_CLOSE);\r\n        }\r\n    \r\n        // we disconnected, so we should probably refresh our metadata\r\n        if (!nodeIds.isEmpty())\r\n            metadataUpdater.requestUpdate();\r\n    }\r\n\t\r\n\r\nThis exact case-match in processDisconnection throws this warning:\r\n\r\n\r\n            case NOT_CONNECTED:\r\n            log.warn(&quot;Connection to node {} ({}) could not be established. Broker may not be available.&quot;, nodeId, disconnectState.remoteAddress());\r\n\r\nIn short, everything will work fine from producer-consumer perspective. And you should treat the message as any other `WARN`","title":"Kafka broker may not be available exception","body":"<pre><code> bin/kafka-console-consumer.sh --bootstrap-server tt01.my.tech:9092,tt02.my.tech:9092,tt03.my.tech:9092 --topic wallet-test-topic1 --from-beginning\nnew message from topic1\nhello\nhello world\n123\nhello again\n123\nwhat do i publish ?\n[2020-02-09 16:57:21,142] WARN [Consumer clientId=consumer-1, groupId=console-consumer-93672] Connection to node 2 (tt02.my.tech/192.168.35.118:9092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n[2020-02-09 16:57:25,999] WARN [Consumer clientId=consumer-1, groupId=console-consumer-93672] Connection to node 2 (tt02.my.tech/192.168.35.118:9092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n[2020-02-09 16:57:58,902] WARN [Consumer clientId=consumer-1, groupId=console-consumer-93672] Connection to node 2 (tt02.my.tech/192.168.35.118:9092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n[2020-02-09 16:57:59,024] WARN [Consumer clientId=consumer-1, groupId=console-consumer-93672] Connection to node 3 (tt03.my.tech/192.168.35.126:9092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n^CProcessed a total of 7 messages\n</code></pre>\n\n<p>On the consumer side, if there is no message read after the poll , this warning is thrown.</p>\n\n<p>Basically, a call to <code>.poll</code> has a reference to </p>\n\n<p><code>handleTimedOutRequests(responses, updatedNow);</code></p>\n\n<p>If there are no message read in this poll and there is a timeout, then <code>processDisconnection</code> will throw the warning.</p>\n\n<pre><code>private void handleTimedOutRequests(List&lt;ClientResponse&gt; responses, long now) {\n    List&lt;String&gt; nodeIds = this.inFlightRequests.nodesWithTimedOutRequests(now);\n    for (String nodeId : nodeIds) {\n        // close connection to the node\n        this.selector.close(nodeId);\n        log.debug(\"Disconnecting from node {} due to request timeout.\", nodeId);\n        processDisconnection(responses, nodeId, now, ChannelState.LOCAL_CLOSE);\n    }\n\n    // we disconnected, so we should probably refresh our metadata\n    if (!nodeIds.isEmpty())\n        metadataUpdater.requestUpdate();\n}\n</code></pre>\n\n<p>This exact case-match in processDisconnection throws this warning:</p>\n\n<pre><code>        case NOT_CONNECTED:\n        log.warn(\"Connection to node {} ({}) could not be established. Broker may not be available.\", nodeId, disconnectState.remoteAddress());\n</code></pre>\n\n<p>In short, everything will work fine from producer-consumer perspective. And you should treat the message as any other <code>WARN</code></p>\n"}],"owner":{"account_id":2939068,"reputation":2834,"user_id":2517384,"accept_rate":81,"display_name":"MeetJoeBlack"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9653,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695380860,"creation_date":1510351223,"question_id":47231775,"body_markdown":"I faced a strange issue with my Kafka producer. I use kafka-0.11 server/client version.\r\nI have one zookeper and one kafka broker node. Also, I created &#39;events&#39; topic with 3 partitions:\r\n\r\n    Topic:events    PartitionCount:3        ReplicationFactor:1     Configs:\r\n            Topic: events   Partition: 0    Leader: 0       Replicas: 0     Isr: 0\r\n            Topic: events   Partition: 1    Leader: 0       Replicas: 0     Isr: 0\r\n            Topic: events   Partition: 2    Leader: 0       Replicas: 0     Isr: 0\r\n\r\nIn my java code I create producer with the following properties:\r\n\r\n    Properties props = new Properties();\r\n    props.put(BOOTSTRAP_SERVERS_CONFIG, brokerUrl);\r\n    props.put(MAX_BLOCK_MS_CONFIG, 30000);\r\n    props.put(KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\r\n    props.put(VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\r\n    props.put(PARTITIONER_CLASS_CONFIG, KafkaCustomPartitioner.class);\r\n    this.producer = new KafkaProducer&lt;&gt;(props);\r\n\r\nAlso, I&#39;have added a callback to Producer#send() method that adds failed message to the queue that is iterated by the other &quot;re-sending&quot; thread in a loop:\r\n\r\n    this.producer.send(producerRecord, new ProducerCallback(producerRecord.value(), topic));\r\n    \r\n    private class ProducerCallback implements Callback {\r\n\t  private final String message;\r\n\t  private final String topic;\r\n\r\n\t  public ProducerCallback(String message, String topic) {\r\n\t\tthis.message = message;\r\n\t\tthis.topic = topic;\r\n\t  }\r\n\r\n\t  @Override\r\n\t  public void onCompletion(RecordMetadata metadata, Exception ex) {\r\n\t\tif (ex != null) {\r\n\t\t\tlogger.error(&quot;Kafka producer error. Topic: &quot; + topic +\r\n\t\t\t\t\t&quot;.Message will be added into failed messages queue.&quot;, ex);\r\n\t\t\tfailedMessagesQueue.enqueue(SerializationUtils.serialize(new FailedMessage(topic, message)));\r\n\t\t}\r\n\t  }\r\n    }\r\n\r\n    private class ResenderThread extends Thread {\r\n        private volatile boolean running = true;\r\n\r\n        public void stopGracefully() {\r\n            running = false;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            while (running) {\r\n                try {\r\n                    byte[] val = failedMessagesQueue.peek();\r\n                    if (val != null) {\r\n                        FailedMessage failedMessage = SerializationUtils.deserialize(val);\r\n                        ProducerRecord&lt;String, String&gt; record;\r\n                        if (topic.equals(failedMessage.getTopic())) {\r\n                            String messageKey = generateMessageKey(failedMessage.getMessage());\r\n                            record = createProducerRecordWithKey(failedMessage.getMessage(), messageKey, failedMessage.getTopic());\r\n                        } else {\r\n                            record = new ProducerRecord&lt;&gt;(failedMessage.getTopic(), failedMessage.getMessage());\r\n                        }\r\n                        try {\r\n                            this.producer.send(record).get();\r\n                            failedMessagesQueue.dequeue();\r\n                        } catch (Exception e) {\r\n                            logger.debug(&quot;Kafka message resending attempt was failed. Topic &quot; + failedMessage.getTopic() +\r\n                                    &quot; Partition. &quot; + record.partition() + &quot;. &quot; + e.getMessage());\r\n                        }\r\n                    }\r\n\r\n                    Thread.sleep(200);\r\n                } catch (Exception e) {\r\n                    logger.error(&quot;Error resending an event&quot;, e);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\t\r\nEverything works fine until I decided to test Kafka broker kill/re-start scenario:\r\n\r\nI&#39;ve killed my Kafka broker node, and sent a 5 messages using my Kafka producer. The following message were logged by my producer app:\r\n\r\n    ....the application works fine....\r\n    // kafka broker was killed\r\n    2017-11-10 09:20:44,594 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\r\n    2017-11-10 09:20:44,646 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\r\n    2017-11-10 09:20:44,700 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\r\n    2017-11-10 09:20:44,759 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\r\n    2017-11-10 09:20:44,802 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\r\n    // sent 5 message using producer. message were put to the failedMessagesQueue and &quot;re-sender&quot; thread started resending \r\n    2017-11-10 09:20:44,905 ERROR [com.inq.kafka.KafkaETLService] - &lt;Kafka producer error. Topic: events.Message will be added into failed messages queue.&gt;\r\n    ....\r\n    2017-11-10 09:20:45,070 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\r\n    2017-11-10 09:20:45,129 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\r\n    2017-11-10 09:20:45,170 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\r\n    2017-11-10 09:20:45,217 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\r\n    \r\n    // kafka broker was restarted, some strange errors were logged\r\n    2017-11-10 09:20:51,103 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Error while fetching metadata with correlation id 29 : {events=INVALID_REPLICATION_FACTOR}&gt;\r\n    2017-11-10 09:20:51,205 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Error while fetching metadata with correlation id 31 : {events=INVALID_REPLICATION_FACTOR}&gt;\r\n    2017-11-10 09:20:51,308 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Error while fetching metadata with correlation id 32 : {events=INVALID_REPLICATION_FACTOR}&gt;\r\n    2017-11-10 09:20:51,114 WARN [org.apache.kafka.clients.producer.internals.Sender] - &lt;Received unknown topic or partition error in produce request on partition events-0. The topic/partition may not exist or the user may not have Describe access to it&gt;\r\n    2017-11-10 09:20:51,114 ERROR [com.inq.kafka.KafkaETLService] - &lt;Kafka message resending attempt was failed. Topic events. org.apache.kafka.common.errors.UnknownTopicOrPartitionException: This server does not host this topic-partition.&gt;\r\n    2017-11-10 09:20:52,485 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Error while fetching metadata with correlation id 33 : {events=INVALID_REPLICATION_FACTOR}&gt;\r\n    // messages were succesfully re-sent and received by consumer..\r\n\r\nHow can I get rid of these logs (that logs every 100ms when Kafka broker is down):\r\n\r\n    [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\r\n\r\nWhy do I receive the following errors after Kafka broker startup(I didn&#39;t change any server props, and didn&#39;t alter the topic). It seems to me that these errors are result of some syncrhonization process between zookeeper and kafka during broker startup, because after some time procuder succesfully resent my messages. Am I wrong?:\r\n\r\n    [org.apache.kafka.clients.NetworkClient] - &lt;Error while fetching metadata with correlation id 29 : {events=INVALID_REPLICATION_FACTOR}&gt;\r\n    Received unknown topic or partition error in produce request on partition events-0. The topic/partition may not exist or the user may not have Describe access to it. ","title":"Kafka broker may not be available exception","body":"<p>I faced a strange issue with my Kafka producer. I use kafka-0.11 server/client version.\nI have one zookeper and one kafka broker node. Also, I created 'events' topic with 3 partitions:</p>\n\n<pre><code>Topic:events    PartitionCount:3        ReplicationFactor:1     Configs:\n        Topic: events   Partition: 0    Leader: 0       Replicas: 0     Isr: 0\n        Topic: events   Partition: 1    Leader: 0       Replicas: 0     Isr: 0\n        Topic: events   Partition: 2    Leader: 0       Replicas: 0     Isr: 0\n</code></pre>\n\n<p>In my java code I create producer with the following properties:</p>\n\n<pre><code>Properties props = new Properties();\nprops.put(BOOTSTRAP_SERVERS_CONFIG, brokerUrl);\nprops.put(MAX_BLOCK_MS_CONFIG, 30000);\nprops.put(KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\nprops.put(VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\nprops.put(PARTITIONER_CLASS_CONFIG, KafkaCustomPartitioner.class);\nthis.producer = new KafkaProducer&lt;&gt;(props);\n</code></pre>\n\n<p>Also, I'have added a callback to Producer#send() method that adds failed message to the queue that is iterated by the other \"re-sending\" thread in a loop:</p>\n\n<pre><code>this.producer.send(producerRecord, new ProducerCallback(producerRecord.value(), topic));\n\nprivate class ProducerCallback implements Callback {\n  private final String message;\n  private final String topic;\n\n  public ProducerCallback(String message, String topic) {\n    this.message = message;\n    this.topic = topic;\n  }\n\n  @Override\n  public void onCompletion(RecordMetadata metadata, Exception ex) {\n    if (ex != null) {\n        logger.error(\"Kafka producer error. Topic: \" + topic +\n                \".Message will be added into failed messages queue.\", ex);\n        failedMessagesQueue.enqueue(SerializationUtils.serialize(new FailedMessage(topic, message)));\n    }\n  }\n}\n\nprivate class ResenderThread extends Thread {\n    private volatile boolean running = true;\n\n    public void stopGracefully() {\n        running = false;\n    }\n\n    @Override\n    public void run() {\n        while (running) {\n            try {\n                byte[] val = failedMessagesQueue.peek();\n                if (val != null) {\n                    FailedMessage failedMessage = SerializationUtils.deserialize(val);\n                    ProducerRecord&lt;String, String&gt; record;\n                    if (topic.equals(failedMessage.getTopic())) {\n                        String messageKey = generateMessageKey(failedMessage.getMessage());\n                        record = createProducerRecordWithKey(failedMessage.getMessage(), messageKey, failedMessage.getTopic());\n                    } else {\n                        record = new ProducerRecord&lt;&gt;(failedMessage.getTopic(), failedMessage.getMessage());\n                    }\n                    try {\n                        this.producer.send(record).get();\n                        failedMessagesQueue.dequeue();\n                    } catch (Exception e) {\n                        logger.debug(\"Kafka message resending attempt was failed. Topic \" + failedMessage.getTopic() +\n                                \" Partition. \" + record.partition() + \". \" + e.getMessage());\n                    }\n                }\n\n                Thread.sleep(200);\n            } catch (Exception e) {\n                logger.error(\"Error resending an event\", e);\n                break;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Everything works fine until I decided to test Kafka broker kill/re-start scenario:</p>\n\n<p>I've killed my Kafka broker node, and sent a 5 messages using my Kafka producer. The following message were logged by my producer app:</p>\n\n<pre><code>....the application works fine....\n// kafka broker was killed\n2017-11-10 09:20:44,594 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\n2017-11-10 09:20:44,646 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\n2017-11-10 09:20:44,700 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\n2017-11-10 09:20:44,759 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\n2017-11-10 09:20:44,802 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\n// sent 5 message using producer. message were put to the failedMessagesQueue and \"re-sender\" thread started resending \n2017-11-10 09:20:44,905 ERROR [com.inq.kafka.KafkaETLService] - &lt;Kafka producer error. Topic: events.Message will be added into failed messages queue.&gt;\n....\n2017-11-10 09:20:45,070 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\n2017-11-10 09:20:45,129 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\n2017-11-10 09:20:45,170 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\n2017-11-10 09:20:45,217 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\n\n// kafka broker was restarted, some strange errors were logged\n2017-11-10 09:20:51,103 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Error while fetching metadata with correlation id 29 : {events=INVALID_REPLICATION_FACTOR}&gt;\n2017-11-10 09:20:51,205 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Error while fetching metadata with correlation id 31 : {events=INVALID_REPLICATION_FACTOR}&gt;\n2017-11-10 09:20:51,308 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Error while fetching metadata with correlation id 32 : {events=INVALID_REPLICATION_FACTOR}&gt;\n2017-11-10 09:20:51,114 WARN [org.apache.kafka.clients.producer.internals.Sender] - &lt;Received unknown topic or partition error in produce request on partition events-0. The topic/partition may not exist or the user may not have Describe access to it&gt;\n2017-11-10 09:20:51,114 ERROR [com.inq.kafka.KafkaETLService] - &lt;Kafka message resending attempt was failed. Topic events. org.apache.kafka.common.errors.UnknownTopicOrPartitionException: This server does not host this topic-partition.&gt;\n2017-11-10 09:20:52,485 WARN [org.apache.kafka.clients.NetworkClient] - &lt;Error while fetching metadata with correlation id 33 : {events=INVALID_REPLICATION_FACTOR}&gt;\n// messages were succesfully re-sent and received by consumer..\n</code></pre>\n\n<p>How can I get rid of these logs (that logs every 100ms when Kafka broker is down):</p>\n\n<pre><code>[org.apache.kafka.clients.NetworkClient] - &lt;Connection to node 0 could not be established. Broker may not be available.&gt;\n</code></pre>\n\n<p>Why do I receive the following errors after Kafka broker startup(I didn't change any server props, and didn't alter the topic). It seems to me that these errors are result of some syncrhonization process between zookeeper and kafka during broker startup, because after some time procuder succesfully resent my messages. Am I wrong?:</p>\n\n<pre><code>[org.apache.kafka.clients.NetworkClient] - &lt;Error while fetching metadata with correlation id 29 : {events=INVALID_REPLICATION_FACTOR}&gt;\nReceived unknown topic or partition error in produce request on partition events-0. The topic/partition may not exist or the user may not have Describe access to it. \n</code></pre>\n"},{"tags":["java","spring","spring-mvc","configuration"],"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1385697311,"post_id":20277883,"comment_id":30251562,"body_markdown":"Please post your full `SpringMvcExampleProfilesInitializer` and specify which `@Configuration` class contains profiles and which `@Configuration` class has the `ApplicationContextInitializer`.","body":"Please post your full <code>SpringMvcExampleProfilesInitializer</code> and specify which <code>@Configuration</code> class contains profiles and which <code>@Configuration</code> class has the <code>ApplicationContextInitializer</code>."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1385720350,"post_id":20277883,"comment_id":30260182,"body_markdown":"Your problem is the fact that you are loading everything twice and that you are only specifing the initializer on the `DispatcherServlet`  and not on the `ContextLoaderListener`. You should split your configuration where the `ContextLoaderListener` loads the general things (services, daos, infrastructure etc.) and the `DispatcherServlet` only the web related things (controllers, viewresovlers etc).","body":"Your problem is the fact that you are loading everything twice and that you are only specifing the initializer on the <code>DispatcherServlet</code>  and not on the <code>ContextLoaderListener</code>. You should split your configuration where the <code>ContextLoaderListener</code> loads the general things (services, daos, infrastructure etc.) and the <code>DispatcherServlet</code> only the web related things (controllers, viewresovlers etc)."},{"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"score":0,"creation_date":1385736910,"post_id":20277883,"comment_id":30268610,"body_markdown":"@M.Deinum, I tried to load web configuraion only in dispatcher servlet, and the InfrastructureContextConfiguration only via ContextLoaderListener. But the problem is that profiles are used by InfrastructureContextConfiguration. And they are activated only via SpringMvcExampleProfilesInitializer for web dispatcher servlet. And as a result, I got the same error:( The DataSource bean is not loaded.","body":"@M.Deinum, I tried to load web configuraion only in dispatcher servlet, and the InfrastructureContextConfiguration only via ContextLoaderListener. But the problem is that profiles are used by InfrastructureContextConfiguration. And they are activated only via SpringMvcExampleProfilesInitializer for web dispatcher servlet. And as a result, I got the same error:( The DataSource bean is not loaded."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1385757571,"post_id":20277883,"comment_id":30277703,"body_markdown":"As mentioned you are only specifying the `SpringMvcExampleProfilesInitializer` not on the `ContextLoaderListener`. You specify it for the `ContextLoaderListener` through a context-param (which you can set directly on the `ServletContext`).","body":"As mentioned you are only specifying the <code>SpringMvcExampleProfilesInitializer</code> not on the <code>ContextLoaderListener</code>. You specify it for the <code>ContextLoaderListener</code> through a context-param (which you can set directly on the <code>ServletContext</code>)."},{"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"score":0,"creation_date":1385765878,"post_id":20277883,"comment_id":30280287,"body_markdown":"@M.Deinum, it helped! Thank you very much!! But could you tell me which option is the best one. Profiles my by used by different configuration files (services, daos, infrastructure, web) and I&#39;d like to specify the only ApplicationContextInitializer. Now I invoke it in a couple of methods: When register and configure DispatcherServlet, second when register ContextLoaderListener.","body":"@M.Deinum, it helped! Thank you very much!! But could you tell me which option is the best one. Profiles my by used by different configuration files (services, daos, infrastructure, web) and I&#39;d like to specify the only ApplicationContextInitializer. Now I invoke it in a couple of methods: When register and configure DispatcherServlet, second when register ContextLoaderListener."},{"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"score":0,"creation_date":1385765967,"post_id":20277883,"comment_id":30280311,"body_markdown":"@M.Deinum, and is there a way to pass ApplicationContextInitializer as class, not as string. Now it is configured as:     private void registerListener(ServletContext servletContext) {  servletContext.setInitParameter(&quot;contextInitializerClasses&quot;,&quot;com.savdev.springmvcexample.web.config.SpringMvcExampleProfilesInitializer&quot; ); WebApplicationContext rootContext = createContext(configurationClasses); servletContext.addListener(new ContextLoaderListener(rootContext));...","body":"@M.Deinum, and is there a way to pass ApplicationContextInitializer as class, not as string. Now it is configured as:     private void registerListener(ServletContext servletContext) {  servletContext.setInitParameter(&quot;contextInitializerClasses&quot;,&zwnj;&#8203;&quot;com.savdev.springmv&zwnj;&#8203;cexample.web.config.&zwnj;&#8203;SpringMvcExampleProf&zwnj;&#8203;ilesInitializer&quot; ); WebApplicationContext rootContext = createContext(configurationClasses); servletContext.addListener(new ContextLoaderListener(rootContext));..."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1385885980,"post_id":20277883,"comment_id":30307039,"body_markdown":"No, currently there isn&#39;t at least not for the `ContextLoaderListener`. If you want this chained I suggest you register [an enhancement request](http://jira.springsource.org)","body":"No, currently there isn&#39;t at least not for the <code>ContextLoaderListener</code>. If you want this chained I suggest you register <a href=\"http://jira.springsource.org\" rel=\"nofollow noreferrer\">an enhancement request</a>"}],"answers":[{"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1385886186,"post_id":20294670,"comment_id":30307076,"body_markdown":"Actually you need both. The one in the `ServletContext` are used by the `ContextLoaderListener` whereas the other ones are used by the `DispatcherSevlet`.","body":"Actually you need both. The one in the <code>ServletContext</code> are used by the <code>ContextLoaderListener</code> whereas the other ones are used by the <code>DispatcherSevlet</code>."}],"tags":[],"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1385767509,"creation_date":1385767509,"answer_id":20294670,"question_id":20277883,"body_markdown":"As M.Deinum recommended I set the profiles initialier to the `ServletContext`, instead of setting it to `DispatcherServlet`. Here is the updated configuration:\r\n\r\n    @Override\r\n     public void onStartup(ServletContext servletContext) throws ServletException {\r\n        configureServletContext( servletContext );\r\n        registerListener(servletContext);\r\n        registerDispatcherServlet(servletContext);\r\n        ...\r\n    }\r\n    \r\n    private void configureServletContext(ServletContext servletContext) {\r\n        String initializerClasses = servletContext.getInitParameter(ContextLoader.CONTEXT_INITIALIZER_CLASSES_PARAM);\r\n        String profilesInitClassName = SpringMvcExampleProfilesInitializer.class.getName();\r\n        if (StringUtils.hasText(initializerClasses)) {\r\n            initializerClasses += &quot; &quot; + profilesInitClassName;\r\n        }\r\n        else {\r\n            initializerClasses = profilesInitClassName;\r\n        }\r\n        servletContext.setInitParameter(ContextLoader.CONTEXT_INITIALIZER_CLASSES_PARAM, initializerClasses);\r\n    }","title":"Using Spring Mvc WebApplicationInitializer, ApplicationContextInitializer and ContextLoaderListener","body":"<p>As M.Deinum recommended I set the profiles initialier to the <code>ServletContext</code>, instead of setting it to <code>DispatcherServlet</code>. Here is the updated configuration:</p>\n\n<pre><code>@Override\n public void onStartup(ServletContext servletContext) throws ServletException {\n    configureServletContext( servletContext );\n    registerListener(servletContext);\n    registerDispatcherServlet(servletContext);\n    ...\n}\n\nprivate void configureServletContext(ServletContext servletContext) {\n    String initializerClasses = servletContext.getInitParameter(ContextLoader.CONTEXT_INITIALIZER_CLASSES_PARAM);\n    String profilesInitClassName = SpringMvcExampleProfilesInitializer.class.getName();\n    if (StringUtils.hasText(initializerClasses)) {\n        initializerClasses += \" \" + profilesInitClassName;\n    }\n    else {\n        initializerClasses = profilesInitClassName;\n    }\n    servletContext.setInitParameter(ContextLoader.CONTEXT_INITIALIZER_CLASSES_PARAM, initializerClasses);\n}\n</code></pre>\n"}],"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8892,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695380860,"creation_date":1385695682,"question_id":20277883,"body_markdown":"I use java-based Spring Mvc configuration. \r\n\r\nI register the Spring dispatcher servlet in the WebApplicationInitializer implementation.\r\nLoad Spring ApplicationContext configuration files. Logic of Spring profiles management is implemented in the ApplicationContextInitializer implementation. And it worked fine. \r\n\r\nHere are full examples of the original files:\r\n**WebApplicationInitializer**\r\n\r\n    public class SpringMvcExampleWebApplicationInitializer implements WebApplicationInitializer {\r\n    \r\n        private static final String DISPATCHER_SERVLET_NAME = &quot;dispatcher&quot;;\r\n    \r\n        @Override\r\n         public void onStartup(ServletContext servletContext) throws ServletException {\r\n            registerDispatcherServlet(servletContext);\r\n            registerHiddenHttpMethodFilter(servletContext);\r\n        }\r\n    \r\n        private void registerDispatcherServlet(final ServletContext servletContext) {\r\n            WebApplicationContext dispatcherContext = createContext(WebMvcContextConfiguration.class, InfrastructureContextConfiguration.class);\r\n            DispatcherServlet dispatcherServlet = new DispatcherServlet(dispatcherContext);\r\n            dispatcherServlet.setContextInitializers(new SpringMvcExampleProfilesInitializer());\r\n            ServletRegistration.Dynamic dispatcher = servletContext.addServlet(DISPATCHER_SERVLET_NAME, dispatcherServlet);\r\n            dispatcher.setLoadOnStartup(1);\r\n            dispatcher.addMapping(&quot;/&quot;);\r\n        }\r\n    \r\n        private WebApplicationContext createContext(final Class&lt;?&gt;... annotatedClasses) {\r\n            AnnotationConfigWebApplicationContext context = new AnnotationConfigWebApplicationContext();\r\n            context.register(annotatedClasses);\r\n            return context;\r\n        }\r\n    \r\n        private void registerHiddenHttpMethodFilter(ServletContext servletContext) {\r\n            FilterRegistration.Dynamic registration = servletContext.addFilter(&quot;hiddenHttpMethodFilter&quot;, HiddenHttpMethodFilter.class);\r\n            registration.addMappingForServletNames(EnumSet.of(DispatcherType.REQUEST, DispatcherType.FORWARD),\r\n                    false, DISPATCHER_SERVLET_NAME);\r\n        }\r\n    }\r\n\r\n**SpringMvcExampleProfilesInitializer**\r\n\r\n    public class SpringMvcExampleProfilesInitializer implements ApplicationContextInitializer&lt;ConfigurableApplicationContext&gt; {\r\n    \r\n        @Override\r\n        public void initialize(ConfigurableApplicationContext ctx) {\r\n            ConfigurableEnvironment environment = ctx.getEnvironment();\r\n            List&lt;String&gt; profiles = new ArrayList&lt;String&gt;(getProfiles());\r\n            if( profiles == null || profiles.isEmpty() )\r\n            {\r\n                throw new IllegalArgumentException(&quot;Profiles have not been configured&quot;);\r\n            }\r\n            environment.setActiveProfiles(profiles.toArray( new String[0]));\r\n        }\r\n    \r\n        //TODO add logic\r\n        private Collection&lt;String&gt; getProfiles() {\r\n            return Lists.newArrayList(&quot;file_based&quot;, &quot;test_data&quot;);\r\n        }\r\n    }\r\n\r\n**InfrastructureContextConfiguration**\r\n\r\n    @Configuration\r\n    @ComponentScan(basePackages = {&quot;com.savdev.springmvcexample.repository&quot;, &quot;com.savdev.springmvcexample.config&quot;})\r\n    @EnableTransactionManagement\r\n    @EnableJpaRepositories(basePackages = {&quot;com.savdev.springmvcexample.repository&quot;})\r\n    public class InfrastructureContextConfiguration {\r\n    \r\n        @Configuration\r\n        @Profile(value = &quot;file_based&quot;)\r\n        @PropertySource(&quot;classpath:/db/config/file_based.properties&quot;)\r\n        public static class FileBasedConfiguration {\r\n    \r\n            @Inject\r\n            private Environment environment;\r\n    \r\n            @Bean\r\n            public DataSource dataSource() {\r\n                BasicDataSource dataSource = new org.apache.commons.dbcp.BasicDataSource();\r\n                dataSource.setDriverClassName(environment.getProperty(&quot;jdbc.driver&quot;));\r\n                dataSource.setUrl(environment.getProperty(&quot;jdbc.url&quot;));\r\n                dataSource.setUsername(environment.getProperty(&quot;jdbc.username&quot;));\r\n                dataSource.setPassword(environment.getProperty(&quot;jdbc.password&quot;));\r\n                return dataSource;\r\n            }\r\n        }\r\n    \r\n        @Bean\r\n        public SpringLiquibase liquibase(DataSource dataSource) {\r\n            SpringLiquibase liquibase = new SpringLiquibase();\r\n            liquibase.setDataSource(dataSource);\r\n            liquibase.setChangeLog(&quot;classpath:/db/liquibase/changelog/db.changelog-master.xml&quot;);\r\n            liquibase.setDropFirst(true);\r\n            return liquibase;\r\n        }\r\n\r\nThen I added Spring Security context configuration to the application. To use it the `DelegatingFilterProxy` have to be loaded. I\\ve updated the configuration:\r\n\r\nAdded new method and invoked it in the `onStartup`:\r\n\r\n    private void registerSpringSecurityFilterChain(ServletContext servletContext) {\r\n        FilterRegistration.Dynamic springSecurityFilterChain = servletContext.addFilter(\r\n                BeanIds.SPRING_SECURITY_FILTER_CHAIN,\r\n                new DelegatingFilterProxy());\r\n        springSecurityFilterChain.addMappingForUrlPatterns(null, false, &quot;/*&quot;);\r\n    }\r\n\r\n    @Override\r\n     public void onStartup(ServletContext servletContext) throws ServletException {\r\n        ...\r\n        registerDispatcherServlet(servletContext);\r\n        ...\r\n        registerSpringSecurityFilterChain(servletContext);\r\n    }\r\n\r\nNow when I try to request any url I&#39;m getting the error:\r\n\r\n    message No WebApplicationContext found: no ContextLoaderListener registered?\r\n    \r\n    description The server encountered an internal error that prevented it from fulfilling this request.\r\n    \r\n    exception\r\n    \r\n    java.lang.IllegalStateException: No WebApplicationContext found: no ContextLoaderListener registered?\r\n    \torg.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:251)\r\n\r\nOk, I added the following:\r\n\r\n            private static final Class&lt;?&gt;[] configurationClasses = new Class&lt;?&gt;[]{\r\n                    WebMvcContextConfiguration.class, InfrastructureContextConfiguration.class};\r\n        ...\r\n    \r\n    private void registerListener(ServletContext servletContext) {\r\n        WebApplicationContext rootContext = createContext(configurationClasses);\r\n        servletContext.addListener(new ContextLoaderListener(rootContext));\r\n    }\r\n\r\nAnd invoked it from:\r\n\r\n    @Override\r\n     public void onStartup(ServletContext servletContext) throws ServletException {\r\n        registerListener(servletContext);\r\n        registerDispatcherServlet(servletContext);\r\n        registerHiddenHttpMethodFilter(servletContext);\r\n        registerSpringSecurityFilterChain(servletContext);\r\n    }\r\n\r\nThe error has gone.\r\n\r\nBut all beans that depend on Spring profile are not loaded now. Adding the `ContextLoaderListener` has broken the  `SpringMvcExampleProfilesInitializer` logic.\r\n\r\n    No qualifying bean of type [javax.sql.DataSource] found for dependency\r\n\r\nWhat can I do to resolve it? Any ideas, please?\r\n\r\nHere is the full updated web initializer class:\r\n\r\n    public class SpringMvcExampleWebApplicationInitializer implements WebApplicationInitializer {\r\n    \r\n        private static final String DISPATCHER_SERVLET_NAME = &quot;dispatcher&quot;;\r\n    \r\n        private static final Class&lt;?&gt;[] configurationClasses = new Class&lt;?&gt;[]{\r\n                WebMvcContextConfiguration.class, InfrastructureContextConfiguration.class};\r\n    \r\n    \r\n        @Override\r\n         public void onStartup(ServletContext servletContext) throws ServletException {\r\n            registerListener(servletContext);\r\n            registerDispatcherServlet(servletContext);\r\n            registerHiddenHttpMethodFilter(servletContext);\r\n            registerSpringSecurityFilterChain(servletContext);\r\n        }\r\n    \r\n        private void registerSpringSecurityFilterChain(ServletContext servletContext) {\r\n            FilterRegistration.Dynamic springSecurityFilterChain = servletContext.addFilter(\r\n                    BeanIds.SPRING_SECURITY_FILTER_CHAIN,\r\n                    new DelegatingFilterProxy());\r\n            springSecurityFilterChain.addMappingForUrlPatterns(null, false, &quot;/*&quot;);\r\n        }\r\n    \r\n        private void registerDispatcherServlet(final ServletContext servletContext) {\r\n            WebApplicationContext dispatcherContext = createContext(WebMvcContextConfiguration.class, InfrastructureContextConfiguration.class);\r\n            DispatcherServlet dispatcherServlet = new DispatcherServlet(dispatcherContext);\r\n            dispatcherServlet.setContextInitializers(new SpringMvcExampleProfilesInitializer());\r\n            ServletRegistration.Dynamic dispatcher = servletContext.addServlet(DISPATCHER_SERVLET_NAME, dispatcherServlet);\r\n            dispatcher.setLoadOnStartup(1);\r\n            dispatcher.addMapping(&quot;/&quot;);\r\n        }\r\n    \r\n        private WebApplicationContext createContext(final Class&lt;?&gt;... annotatedClasses) {\r\n            AnnotationConfigWebApplicationContext context = new AnnotationConfigWebApplicationContext();\r\n            context.register(annotatedClasses);\r\n    //        context.refresh();\r\n            return context;\r\n        }\r\n    \r\n        private void registerListener(ServletContext servletContext) {\r\n            WebApplicationContext rootContext = createContext(configurationClasses);\r\n            servletContext.addListener(new ContextLoaderListener(rootContext));\r\n    //        servletContext.addListener(new RequestContextListener());\r\n        }\r\n    \r\n        private void registerHiddenHttpMethodFilter(ServletContext servletContext) {\r\n            FilterRegistration.Dynamic registration = servletContext.addFilter(&quot;hiddenHttpMethodFilter&quot;, HiddenHttpMethodFilter.class);\r\n            registration.addMappingForServletNames(EnumSet.of(DispatcherType.REQUEST, DispatcherType.FORWARD),\r\n                    false, DISPATCHER_SERVLET_NAME);\r\n        }\r\n    }\r\n\r\n","title":"Using Spring Mvc WebApplicationInitializer, ApplicationContextInitializer and ContextLoaderListener","body":"<p>I use java-based Spring Mvc configuration. </p>\n\n<p>I register the Spring dispatcher servlet in the WebApplicationInitializer implementation.\nLoad Spring ApplicationContext configuration files. Logic of Spring profiles management is implemented in the ApplicationContextInitializer implementation. And it worked fine. </p>\n\n<p>Here are full examples of the original files:\n<strong>WebApplicationInitializer</strong></p>\n\n<pre><code>public class SpringMvcExampleWebApplicationInitializer implements WebApplicationInitializer {\n\n    private static final String DISPATCHER_SERVLET_NAME = \"dispatcher\";\n\n    @Override\n     public void onStartup(ServletContext servletContext) throws ServletException {\n        registerDispatcherServlet(servletContext);\n        registerHiddenHttpMethodFilter(servletContext);\n    }\n\n    private void registerDispatcherServlet(final ServletContext servletContext) {\n        WebApplicationContext dispatcherContext = createContext(WebMvcContextConfiguration.class, InfrastructureContextConfiguration.class);\n        DispatcherServlet dispatcherServlet = new DispatcherServlet(dispatcherContext);\n        dispatcherServlet.setContextInitializers(new SpringMvcExampleProfilesInitializer());\n        ServletRegistration.Dynamic dispatcher = servletContext.addServlet(DISPATCHER_SERVLET_NAME, dispatcherServlet);\n        dispatcher.setLoadOnStartup(1);\n        dispatcher.addMapping(\"/\");\n    }\n\n    private WebApplicationContext createContext(final Class&lt;?&gt;... annotatedClasses) {\n        AnnotationConfigWebApplicationContext context = new AnnotationConfigWebApplicationContext();\n        context.register(annotatedClasses);\n        return context;\n    }\n\n    private void registerHiddenHttpMethodFilter(ServletContext servletContext) {\n        FilterRegistration.Dynamic registration = servletContext.addFilter(\"hiddenHttpMethodFilter\", HiddenHttpMethodFilter.class);\n        registration.addMappingForServletNames(EnumSet.of(DispatcherType.REQUEST, DispatcherType.FORWARD),\n                false, DISPATCHER_SERVLET_NAME);\n    }\n}\n</code></pre>\n\n<p><strong>SpringMvcExampleProfilesInitializer</strong></p>\n\n<pre><code>public class SpringMvcExampleProfilesInitializer implements ApplicationContextInitializer&lt;ConfigurableApplicationContext&gt; {\n\n    @Override\n    public void initialize(ConfigurableApplicationContext ctx) {\n        ConfigurableEnvironment environment = ctx.getEnvironment();\n        List&lt;String&gt; profiles = new ArrayList&lt;String&gt;(getProfiles());\n        if( profiles == null || profiles.isEmpty() )\n        {\n            throw new IllegalArgumentException(\"Profiles have not been configured\");\n        }\n        environment.setActiveProfiles(profiles.toArray( new String[0]));\n    }\n\n    //TODO add logic\n    private Collection&lt;String&gt; getProfiles() {\n        return Lists.newArrayList(\"file_based\", \"test_data\");\n    }\n}\n</code></pre>\n\n<p><strong>InfrastructureContextConfiguration</strong></p>\n\n<pre><code>@Configuration\n@ComponentScan(basePackages = {\"com.savdev.springmvcexample.repository\", \"com.savdev.springmvcexample.config\"})\n@EnableTransactionManagement\n@EnableJpaRepositories(basePackages = {\"com.savdev.springmvcexample.repository\"})\npublic class InfrastructureContextConfiguration {\n\n    @Configuration\n    @Profile(value = \"file_based\")\n    @PropertySource(\"classpath:/db/config/file_based.properties\")\n    public static class FileBasedConfiguration {\n\n        @Inject\n        private Environment environment;\n\n        @Bean\n        public DataSource dataSource() {\n            BasicDataSource dataSource = new org.apache.commons.dbcp.BasicDataSource();\n            dataSource.setDriverClassName(environment.getProperty(\"jdbc.driver\"));\n            dataSource.setUrl(environment.getProperty(\"jdbc.url\"));\n            dataSource.setUsername(environment.getProperty(\"jdbc.username\"));\n            dataSource.setPassword(environment.getProperty(\"jdbc.password\"));\n            return dataSource;\n        }\n    }\n\n    @Bean\n    public SpringLiquibase liquibase(DataSource dataSource) {\n        SpringLiquibase liquibase = new SpringLiquibase();\n        liquibase.setDataSource(dataSource);\n        liquibase.setChangeLog(\"classpath:/db/liquibase/changelog/db.changelog-master.xml\");\n        liquibase.setDropFirst(true);\n        return liquibase;\n    }\n</code></pre>\n\n<p>Then I added Spring Security context configuration to the application. To use it the <code>DelegatingFilterProxy</code> have to be loaded. I\\ve updated the configuration:</p>\n\n<p>Added new method and invoked it in the <code>onStartup</code>:</p>\n\n<pre><code>private void registerSpringSecurityFilterChain(ServletContext servletContext) {\n    FilterRegistration.Dynamic springSecurityFilterChain = servletContext.addFilter(\n            BeanIds.SPRING_SECURITY_FILTER_CHAIN,\n            new DelegatingFilterProxy());\n    springSecurityFilterChain.addMappingForUrlPatterns(null, false, \"/*\");\n}\n\n@Override\n public void onStartup(ServletContext servletContext) throws ServletException {\n    ...\n    registerDispatcherServlet(servletContext);\n    ...\n    registerSpringSecurityFilterChain(servletContext);\n}\n</code></pre>\n\n<p>Now when I try to request any url I'm getting the error:</p>\n\n<pre><code>message No WebApplicationContext found: no ContextLoaderListener registered?\n\ndescription The server encountered an internal error that prevented it from fulfilling this request.\n\nexception\n\njava.lang.IllegalStateException: No WebApplicationContext found: no ContextLoaderListener registered?\n    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:251)\n</code></pre>\n\n<p>Ok, I added the following:</p>\n\n<pre><code>        private static final Class&lt;?&gt;[] configurationClasses = new Class&lt;?&gt;[]{\n                WebMvcContextConfiguration.class, InfrastructureContextConfiguration.class};\n    ...\n\nprivate void registerListener(ServletContext servletContext) {\n    WebApplicationContext rootContext = createContext(configurationClasses);\n    servletContext.addListener(new ContextLoaderListener(rootContext));\n}\n</code></pre>\n\n<p>And invoked it from:</p>\n\n<pre><code>@Override\n public void onStartup(ServletContext servletContext) throws ServletException {\n    registerListener(servletContext);\n    registerDispatcherServlet(servletContext);\n    registerHiddenHttpMethodFilter(servletContext);\n    registerSpringSecurityFilterChain(servletContext);\n}\n</code></pre>\n\n<p>The error has gone.</p>\n\n<p>But all beans that depend on Spring profile are not loaded now. Adding the <code>ContextLoaderListener</code> has broken the  <code>SpringMvcExampleProfilesInitializer</code> logic.</p>\n\n<pre><code>No qualifying bean of type [javax.sql.DataSource] found for dependency\n</code></pre>\n\n<p>What can I do to resolve it? Any ideas, please?</p>\n\n<p>Here is the full updated web initializer class:</p>\n\n<pre><code>public class SpringMvcExampleWebApplicationInitializer implements WebApplicationInitializer {\n\n    private static final String DISPATCHER_SERVLET_NAME = \"dispatcher\";\n\n    private static final Class&lt;?&gt;[] configurationClasses = new Class&lt;?&gt;[]{\n            WebMvcContextConfiguration.class, InfrastructureContextConfiguration.class};\n\n\n    @Override\n     public void onStartup(ServletContext servletContext) throws ServletException {\n        registerListener(servletContext);\n        registerDispatcherServlet(servletContext);\n        registerHiddenHttpMethodFilter(servletContext);\n        registerSpringSecurityFilterChain(servletContext);\n    }\n\n    private void registerSpringSecurityFilterChain(ServletContext servletContext) {\n        FilterRegistration.Dynamic springSecurityFilterChain = servletContext.addFilter(\n                BeanIds.SPRING_SECURITY_FILTER_CHAIN,\n                new DelegatingFilterProxy());\n        springSecurityFilterChain.addMappingForUrlPatterns(null, false, \"/*\");\n    }\n\n    private void registerDispatcherServlet(final ServletContext servletContext) {\n        WebApplicationContext dispatcherContext = createContext(WebMvcContextConfiguration.class, InfrastructureContextConfiguration.class);\n        DispatcherServlet dispatcherServlet = new DispatcherServlet(dispatcherContext);\n        dispatcherServlet.setContextInitializers(new SpringMvcExampleProfilesInitializer());\n        ServletRegistration.Dynamic dispatcher = servletContext.addServlet(DISPATCHER_SERVLET_NAME, dispatcherServlet);\n        dispatcher.setLoadOnStartup(1);\n        dispatcher.addMapping(\"/\");\n    }\n\n    private WebApplicationContext createContext(final Class&lt;?&gt;... annotatedClasses) {\n        AnnotationConfigWebApplicationContext context = new AnnotationConfigWebApplicationContext();\n        context.register(annotatedClasses);\n//        context.refresh();\n        return context;\n    }\n\n    private void registerListener(ServletContext servletContext) {\n        WebApplicationContext rootContext = createContext(configurationClasses);\n        servletContext.addListener(new ContextLoaderListener(rootContext));\n//        servletContext.addListener(new RequestContextListener());\n    }\n\n    private void registerHiddenHttpMethodFilter(ServletContext servletContext) {\n        FilterRegistration.Dynamic registration = servletContext.addFilter(\"hiddenHttpMethodFilter\", HiddenHttpMethodFilter.class);\n        registration.addMappingForServletNames(EnumSet.of(DispatcherType.REQUEST, DispatcherType.FORWARD),\n                false, DISPATCHER_SERVLET_NAME);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","maven","java-17","maven-wrapper"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1633077278,"post_id":69402824,"comment_id":122669064,"body_markdown":"It&#39;s possible that it came from `.mvn/jvm.config`.","body":"It&#39;s possible that it came from <code>.mvn&#47;jvm.config</code>."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1633077328,"post_id":69402824,"comment_id":122669083,"body_markdown":"It is set _somewhere_. Consider searching all your files","body":"It is set <i>somewhere</i>. Consider searching all your files"},{"owner":{"account_id":22266993,"reputation":907,"user_id":16497617,"display_name":"Maneesha Indrachapa"},"score":1,"creation_date":1633077361,"post_id":69402824,"comment_id":122669099,"body_markdown":"Isn&#39;t this answers your question, https://stackoverflow.com/questions/47112412/unrecognized-vm-option-maxpermsize-512m-when-running-zeppelin . After Java9 it seems `MaxPermSize=512m` is removed.","body":"Isn&#39;t this answers your question, <a href=\"https://stackoverflow.com/questions/47112412/unrecognized-vm-option-maxpermsize-512m-when-running-zeppelin\" title=\"unrecognized vm option maxpermsize 512m when running zeppelin\">stackoverflow.com/questions/47112412/&hellip;</a> . After Java9 it seems <code>MaxPermSize=512m</code> is removed."},{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":0,"creation_date":1633077527,"post_id":69402824,"comment_id":122669170,"body_markdown":"@JoachimSauer There is no `.mvn/jvm.config` file. Only `wrapper` folder.","body":"@JoachimSauer There is no <code>.mvn&#47;jvm.config</code> file. Only <code>wrapper</code> folder."},{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":0,"creation_date":1633077599,"post_id":69402824,"comment_id":122669198,"body_markdown":"@Thorbj&#248;rnRavnAndersen: The only thing I switch is the home folder for Java 16 and 17 respectively. There is nothing set in my project as it is nearly empty and using downloaded Maven Wrapper.","body":"@Thorbj&#248;rnRavnAndersen: The only thing I switch is the home folder for Java 16 and 17 respectively. There is nothing set in my project as it is nearly empty and using downloaded Maven Wrapper."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1633077856,"post_id":69402824,"comment_id":122669288,"body_markdown":"Yes.  The newer JVM does not like a command option which comes from somewhere. You may want to single step your mvnw script.","body":"Yes.  The newer JVM does not like a command option which comes from somewhere. You may want to single step your mvnw script."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1633100036,"post_id":69402824,"comment_id":122678268,"body_markdown":"@ManeeshaIndrachapa even Java&#160;8 does not support this option.","body":"@ManeeshaIndrachapa even Java 8 does not support this option."}],"answers":[{"comments":[{"owner":{"account_id":1182744,"reputation":5568,"user_id":1157322,"accept_rate":48,"display_name":"svassr"},"score":1,"creation_date":1680289645,"post_id":69403266,"comment_id":133879147,"body_markdown":"for me (using Java 17), removing `-XX:MaxPermSize=512m` in pom.xml surefire configuration (`&lt;argLine&gt;@{argLine} -Xmx1024m -XX:MaxPermSize=256m&lt;/argLine&gt;`), leaving me with `&lt;argLine&gt;@{argLine} -Xmx1024m&lt;/argLine&gt;`, fixed my issues.","body":"for me (using Java 17), removing <code>-XX:MaxPermSize=512m</code> in pom.xml surefire configuration (<code>&lt;argLine&gt;@{argLine} -Xmx1024m -XX:MaxPermSize=256m&lt;&#47;argLine&gt;</code>), leaving me with <code>&lt;argLine&gt;@{argLine} -Xmx1024m&lt;&#47;argLine&gt;</code>, fixed my issues."},{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":0,"creation_date":1680352763,"post_id":69403266,"comment_id":133886013,"body_markdown":"@svassr Yes, your case is luckily discoverable using the full-text search in the IDE. :)","body":"@svassr Yes, your case is luckily discoverable using the full-text search in the IDE. :)"}],"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"comment_count":2,"down_vote_count":0,"up_vote_count":39,"is_accepted":true,"score":39,"last_activity_date":1654827942,"creation_date":1633078955,"answer_id":69403266,"question_id":69402824,"body_markdown":"Indeed `-XX:MaxPermSize=size` is labelled as follows according to Java&#174; Development Kit Version 16/17 Tool Specifications (see the links):\r\n\r\n- For Java 16 it is [**obsolete**](https://docs.oracle.com/en/java/javase/16/docs/specs/man/java.html#obsolete-java-options).\r\n- For Java 17 it is [**removed**]( https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html#removed-java-options).\r\n\r\nThe Maven Wrapper in the `mvnw.cmd` script, however, aside from the required `JAVA_HOME`, uses also a bunch of *optional* environment variables such as `M2_HOME` and these starting with `MAVEN_` prefix.\r\n\r\nThe important one is `MAVEN_OPTS` where such a removed Java option can appear causing the inability to start the JVM on the newer version. In my case, I had something like:\r\n\r\n```shell\r\nMAVEN_OPTS=&quot;-Xmx4g -XX:MaxPermSize=512m -Dfile.encoding=UTF-8&quot;\r\n```\r\n\r\nThe solution is either to remove the option from the environment variables or add this line to the Maven Wrapper script to override the `MAVEN_OPTS` value, In the minimal form:\r\n \r\n```shell\r\nMAVEN_OPTS=\r\n```","title":"Java 17 with Maven Wrapper results in Unrecognized VM option &#39;MaxPermSize=512m&#39;","body":"<p>Indeed <code>-XX:MaxPermSize=size</code> is labelled as follows according to Java® Development Kit Version 16/17 Tool Specifications (see the links):</p>\n<ul>\n<li>For Java 16 it is <a href=\"https://docs.oracle.com/en/java/javase/16/docs/specs/man/java.html#obsolete-java-options\" rel=\"noreferrer\"><strong>obsolete</strong></a>.</li>\n<li>For Java 17 it is <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html#removed-java-options\" rel=\"noreferrer\"><strong>removed</strong></a>.</li>\n</ul>\n<p>The Maven Wrapper in the <code>mvnw.cmd</code> script, however, aside from the required <code>JAVA_HOME</code>, uses also a bunch of <em>optional</em> environment variables such as <code>M2_HOME</code> and these starting with <code>MAVEN_</code> prefix.</p>\n<p>The important one is <code>MAVEN_OPTS</code> where such a removed Java option can appear causing the inability to start the JVM on the newer version. In my case, I had something like:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>MAVEN_OPTS=&quot;-Xmx4g -XX:MaxPermSize=512m -Dfile.encoding=UTF-8&quot;\n</code></pre>\n<p>The solution is either to remove the option from the environment variables or add this line to the Maven Wrapper script to override the <code>MAVEN_OPTS</code> value, In the minimal form:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>MAVEN_OPTS=\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24367878,"reputation":31,"user_id":18301333,"display_name":"Prateek Sinha"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695380779,"creation_date":1695380779,"answer_id":77157070,"question_id":69402824,"body_markdown":"Use MaxMetaspaceSize in place of MaxPermSize and MetaspaceSize in place of PermSize in jdk17. \r\n\r\nRefer to : https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html\r\n\r\n","title":"Java 17 with Maven Wrapper results in Unrecognized VM option &#39;MaxPermSize=512m&#39;","body":"<p>Use MaxMetaspaceSize in place of MaxPermSize and MetaspaceSize in place of PermSize in jdk17.</p>\n<p>Refer to : <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html</a></p>\n"}],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29628,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":69403266,"answer_count":2,"score":18,"last_activity_date":1695380779,"creation_date":1633076985,"question_id":69402824,"body_markdown":"I use [OpenJDK 17][1] with Maven Wrapper 3.8.2 from [Spring Initializr][2] (Maven project, JAR packaging, Java 17, Spring Boot 2.6.0). No additional dependencies. \r\n\r\n&gt; ```\r\n&gt; user@DESKTOP-U2OU5HG MINGW64 /c/Projects/my-project (master)\r\n&gt; $ java -version\r\n&gt; openjdk version &quot;17&quot; 2021-09-14\r\n&gt; OpenJDK Runtime Environment (build 17+35-2724)\r\n&gt; OpenJDK 64-Bit Server VM (build 17+35-2724, mixed mode, sharing)\r\n&gt; ```\r\n\r\nUpon running any of `./mvnw.cmd -version` or `./mvnw.cmd clean install`, I always get the following message:\r\n\r\n&gt; ```\r\n&gt; Unrecognized VM option &#39;MaxPermSize=512m&#39;\r\n&gt; Error: Could not create the Java Virtual Machine.\r\n&gt; Error: A fatal exception has occurred. Program will exit.\r\n&gt; ``` \r\n\r\nSwitching to [OpenJDK 16.0.2][3] resolves the issue, however, I need to work with Java 17. \r\n\r\nHow to get it run? There is nowhere `MaxPermSize=512m` set.\r\n\r\n\r\n  [1]: https://jdk.java.net/17/\r\n  [2]: https://start.spring.io/\r\n  [3]: https://jdk.java.net/16/","title":"Java 17 with Maven Wrapper results in Unrecognized VM option &#39;MaxPermSize=512m&#39;","body":"<p>I use <a href=\"https://jdk.java.net/17/\" rel=\"noreferrer\">OpenJDK 17</a> with Maven Wrapper 3.8.2 from <a href=\"https://start.spring.io/\" rel=\"noreferrer\">Spring Initializr</a> (Maven project, JAR packaging, Java 17, Spring Boot 2.6.0). No additional dependencies.</p>\n<blockquote>\n<pre><code>user@DESKTOP-U2OU5HG MINGW64 /c/Projects/my-project (master)\n$ java -version\nopenjdk version &quot;17&quot; 2021-09-14\nOpenJDK Runtime Environment (build 17+35-2724)\nOpenJDK 64-Bit Server VM (build 17+35-2724, mixed mode, sharing)\n</code></pre>\n</blockquote>\n<p>Upon running any of <code>./mvnw.cmd -version</code> or <code>./mvnw.cmd clean install</code>, I always get the following message:</p>\n<blockquote>\n<pre><code>Unrecognized VM option 'MaxPermSize=512m'\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n</code></pre>\n</blockquote>\n<p>Switching to <a href=\"https://jdk.java.net/16/\" rel=\"noreferrer\">OpenJDK 16.0.2</a> resolves the issue, however, I need to work with Java 17.</p>\n<p>How to get it run? There is nowhere <code>MaxPermSize=512m</code> set.</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"score":3,"creation_date":1557321384,"post_id":56039603,"comment_id":98725299,"body_markdown":"Please try to run &quot;File | Invalidate Caches&quot; and rebuild project.","body":"Please try to run &quot;File | Invalidate Caches&quot; and rebuild project."},{"owner":{"account_id":13508325,"reputation":113,"user_id":9745548,"display_name":"Matteo Bianchi"},"score":0,"creation_date":1557330217,"post_id":56039603,"comment_id":98730870,"body_markdown":"Thanks, it worked!","body":"Thanks, it worked!"},{"owner":{"account_id":6751849,"reputation":91,"user_id":5201650,"display_name":"Frederic Mamath"},"score":0,"creation_date":1621242242,"post_id":56039603,"comment_id":119426503,"body_markdown":"Thanks @y.bedrov, it also worked for me !","body":"Thanks @y.bedrov, it also worked for me !"}],"answers":[{"comments":[{"owner":{"account_id":7678058,"reputation":2129,"user_id":5818250,"display_name":"Jabongg"},"score":0,"creation_date":1624529121,"post_id":56054317,"comment_id":120386209,"body_markdown":"It works. Thanks. \n\nI chose all the 3 checkboxes.","body":"It works. Thanks.   I chose all the 3 checkboxes."},{"owner":{"account_id":18887843,"reputation":73,"user_id":13778833,"display_name":"mukti wibowo"},"score":0,"creation_date":1675673707,"post_id":56054317,"comment_id":132972179,"body_markdown":"You&#39;re a live saver. I&#39;ve been stuck on this for 2 hours and doing this worked for me. Thank you!","body":"You&#39;re a live saver. I&#39;ve been stuck on this for 2 hours and doing this worked for me. Thank you!"}],"tags":[],"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"comment_count":2,"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1661269343,"creation_date":1557387100,"answer_id":56054317,"question_id":56039603,"body_markdown":"Running &quot;File | Invalidate Caches&quot; helped.\r\n\r\nSee [manual][1].\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/invalidate-caches.html","title":"Intellij doesn&#39;t recognize class","body":"<p>Running &quot;File | Invalidate Caches&quot; helped.</p>\n<p>See <a href=\"https://www.jetbrains.com/help/idea/invalidate-caches.html\" rel=\"noreferrer\">manual</a>.</p>\n"},{"tags":[],"owner":{"account_id":4564732,"reputation":426,"user_id":3706042,"display_name":"Dedkov Vadim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626423482,"creation_date":1626423482,"answer_id":68405768,"question_id":56039603,"body_markdown":"For me changes in `build.sbt` file worked. For example, you can remove some dependency from `build.sbt`, press new appeared button `Load sbt Changes` in top-right corner in `build.sbt`, then revert removed dependency and press again button `Load sbt changes`.\r\n\r\n`Load sbt Changes` button:\r\n[![Load sbt Changes][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hTuGS.png","title":"Intellij doesn&#39;t recognize class","body":"<p>For me changes in <code>build.sbt</code> file worked. For example, you can remove some dependency from <code>build.sbt</code>, press new appeared button <code>Load sbt Changes</code> in top-right corner in <code>build.sbt</code>, then revert removed dependency and press again button <code>Load sbt changes</code>.</p>\n<p><code>Load sbt Changes</code> button:\n<a href=\"https://i.stack.imgur.com/hTuGS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hTuGS.png\" alt=\"Load sbt Changes\" /></a></p>\n"},{"tags":[],"owner":{"account_id":15503489,"reputation":25,"user_id":11184255,"display_name":"cyc8"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695380722,"creation_date":1695380159,"answer_id":77157006,"question_id":56039603,"body_markdown":"Came across the same problem that classes are not recognized. Running `File` &gt; `Invalidate Caches` or `File` &gt; `Repair IDE` didn&#39;t solve the problem for me.\r\n\r\nThe solution was deleting the `.idea` folder within the project and reopen intellij which scans all classes again [like it is mentioned here][1]. Hope it helps someone.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/5905931/11184255","title":"Intellij doesn&#39;t recognize class","body":"<p>Came across the same problem that classes are not recognized. Running <code>File</code> &gt; <code>Invalidate Caches</code> or <code>File</code> &gt; <code>Repair IDE</code> didn't solve the problem for me.</p>\n<p>The solution was deleting the <code>.idea</code> folder within the project and reopen intellij which scans all classes again <a href=\"https://stackoverflow.com/a/5905931/11184255\">like it is mentioned here</a>. Hope it helps someone.</p>\n"}],"owner":{"account_id":13508325,"reputation":113,"user_id":9745548,"display_name":"Matteo Bianchi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9916,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":56054317,"answer_count":3,"score":7,"last_activity_date":1695380722,"creation_date":1557305275,"question_id":56039603,"body_markdown":"i was doing some homework in java but intellij doesn&#39;t recognize my class. It recognize the main class but it recognize the other class only on the first execution, whenever i modify the code and rebuild it intellij doesn&#39;t recognize the other class. I thought it was a jdk problem so i&#39;ve downloaded an open source jdk but the problem persits. I&#39;ve found  no solutions yet, neither in the intellij forum. It sees the class only if i do a refactor but that&#39;s annoying. Mine intellij is up to date(7/5/19).\r\n\r\nYou can see in the pictures that intellij doesn&#39;t give me any problem on the syntax but it says that he cannot resolve &quot;Matrix&quot;.\r\n\r\n![][1]\r\n![][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XunrP.png\r\n  [2]: https://i.stack.imgur.com/UF4mX.png","title":"Intellij doesn&#39;t recognize class","body":"<p>i was doing some homework in java but intellij doesn't recognize my class. It recognize the main class but it recognize the other class only on the first execution, whenever i modify the code and rebuild it intellij doesn't recognize the other class. I thought it was a jdk problem so i've downloaded an open source jdk but the problem persits. I've found  no solutions yet, neither in the intellij forum. It sees the class only if i do a refactor but that's annoying. Mine intellij is up to date(7/5/19).</p>\n\n<p>You can see in the pictures that intellij doesn't give me any problem on the syntax but it says that he cannot resolve \"Matrix\".</p>\n\n<p><img src=\"https://i.stack.imgur.com/XunrP.png\" alt=\"\">\n<img src=\"https://i.stack.imgur.com/UF4mX.png\" alt=\"\"></p>\n"},{"tags":["java","spring","maven"],"answers":[{"tags":[],"owner":{"account_id":3558841,"reputation":2777,"user_id":2971820,"display_name":"jpmottin"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1459275924,"creation_date":1459275426,"answer_id":36292088,"question_id":36290953,"body_markdown":"1) how does Maven know which tests to run? By default, maven executes all tests. I mean, all test that Maven finds.\r\n\r\n2) how do I tell Maven to run other tests? To execute a specific test class (eg. HelloController2Test), you can do this :\r\n\r\n    mvn -Dtest=HelloController2Test test\r\n\r\n[Reference doc here][1]\r\n\r\n[One other explanation(from the well known site MKYong)][2]\r\n\r\n\r\n  [1]: https://maven.apache.org/surefire/maven-surefire-plugin/examples/single-test.html\r\n  [2]: http://www.mkyong.com/maven/how-to-run-unit-test-with-maven/","title":"How do you tell Maven which Tests to run?","body":"<p>1) how does Maven know which tests to run? By default, maven executes all tests. I mean, all test that Maven finds.</p>\n\n<p>2) how do I tell Maven to run other tests? To execute a specific test class (eg. HelloController2Test), you can do this :</p>\n\n<pre><code>mvn -Dtest=HelloController2Test test\n</code></pre>\n\n<p><a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/single-test.html\" rel=\"nofollow\">Reference doc here</a></p>\n\n<p><a href=\"http://www.mkyong.com/maven/how-to-run-unit-test-with-maven/\" rel=\"nofollow\">One other explanation(from the well known site MKYong)</a></p>\n"},{"comments":[{"owner":{"account_id":10764,"reputation":34965,"user_id":20479,"accept_rate":17,"display_name":"Rhubarb"},"score":0,"creation_date":1626860249,"post_id":36292312,"comment_id":121002421,"body_markdown":"Just a note: I had some tests that matched the naming pattern that did not run. Turned out the class definition was not _public_ (was default package level). So check that. Also, the method names in the class must also match the test* patterns. Even if JUnit works with @Test, does not mean that Surefire will run them","body":"Just a note: I had some tests that matched the naming pattern that did not run. Turned out the class definition was not <i>public</i> (was default package level). So check that. Also, the method names in the class must also match the test* patterns. Even if JUnit works with @Test, does not mean that Surefire will run them"}],"tags":[],"owner":{"account_id":56124,"reputation":7256,"user_id":2506382,"accept_rate":67,"display_name":"dcsohl"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1459276679,"creation_date":1459276188,"answer_id":36292312,"question_id":36290953,"body_markdown":"The [maven-surefire-plugin](https://maven.apache.org/surefire/maven-surefire-plugin/) will, [by default](https://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html), attempt to execute all tests that follow the pattern of `Test*.java` or `*Test.java` or `*TestCase.java`. It ignores your `HelloControllerIT` very intentionally, as by standard maven convention, that is not a **unit** test, it is an **integration** test. The maven-surefire-plugin is enabled by default in all maven projects.\r\n\r\nThere is a separate plugin, [maven-failsafe-plugin](https://maven.apache.org/surefire/maven-failsafe-plugin/), used to run integration tests, denoted ([by default](https://maven.apache.org/surefire/maven-failsafe-plugin/examples/inclusion-exclusion.html)) by the naming pattern `IT*.java` or `*IT.java` or `*ITCase.java`. It runs during the `integration-test` phase of the build rather than the `test` phase. However, unlike maven-surefire-plugin, you need to explicitly enable it. (I don&#39;t know why this is.)\r\n\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.19.1&lt;/version&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;integration-test&lt;/goal&gt;\r\n              &lt;goal&gt;verify&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n\r\nAdd maven-failsafe-plugin to your project, and your integration test should run just fine.","title":"How do you tell Maven which Tests to run?","body":"<p>The <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/\" rel=\"noreferrer\">maven-surefire-plugin</a> will, <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html\" rel=\"noreferrer\">by default</a>, attempt to execute all tests that follow the pattern of <code>Test*.java</code> or <code>*Test.java</code> or <code>*TestCase.java</code>. It ignores your <code>HelloControllerIT</code> very intentionally, as by standard maven convention, that is not a <strong>unit</strong> test, it is an <strong>integration</strong> test. The maven-surefire-plugin is enabled by default in all maven projects.</p>\n\n<p>There is a separate plugin, <a href=\"https://maven.apache.org/surefire/maven-failsafe-plugin/\" rel=\"noreferrer\">maven-failsafe-plugin</a>, used to run integration tests, denoted (<a href=\"https://maven.apache.org/surefire/maven-failsafe-plugin/examples/inclusion-exclusion.html\" rel=\"noreferrer\">by default</a>) by the naming pattern <code>IT*.java</code> or <code>*IT.java</code> or <code>*ITCase.java</code>. It runs during the <code>integration-test</code> phase of the build rather than the <code>test</code> phase. However, unlike maven-surefire-plugin, you need to explicitly enable it. (I don't know why this is.)</p>\n\n<pre><code>  &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.19.1&lt;/version&gt;\n    &lt;executions&gt;\n      &lt;execution&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;integration-test&lt;/goal&gt;\n          &lt;goal&gt;verify&lt;/goal&gt;\n        &lt;/goals&gt;\n      &lt;/execution&gt;\n    &lt;/executions&gt;\n  &lt;/plugin&gt;\n</code></pre>\n\n<p>Add maven-failsafe-plugin to your project, and your integration test should run just fine.</p>\n"},{"tags":[],"owner":{"account_id":4086251,"reputation":924,"user_id":3355465,"display_name":"RZet"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459276256,"creation_date":1459276256,"answer_id":36292332,"question_id":36290953,"body_markdown":"Maven surefire plugin is responsible for running tests. The following link should answer your question: [Inclusions and Exclusions of Tests][1]\r\n\r\n\r\n  [1]: http://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html","title":"How do you tell Maven which Tests to run?","body":"<p>Maven surefire plugin is responsible for running tests. The following link should answer your question: <a href=\"http://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html\" rel=\"nofollow\">Inclusions and Exclusions of Tests</a></p>\n"},{"tags":[],"owner":{"account_id":292399,"reputation":127,"user_id":595132,"accept_rate":40,"display_name":"mohsen ny"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695380234,"creation_date":1695380234,"answer_id":77157015,"question_id":36290953,"body_markdown":"2023 update: According to [this Apache doc][1] this is the way to go:\r\n```\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.1.2&lt;/version&gt;\r\n    &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\r\n        &lt;artifactId&gt;surefire-junit47&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.2&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n  &lt;/plugin&gt;\r\n```\r\nI tested it and works well\r\n\r\n\r\n  [1]: https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit.html","title":"How do you tell Maven which Tests to run?","body":"<p>2023 update: According to <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit.html\" rel=\"nofollow noreferrer\">this Apache doc</a> this is the way to go:</p>\n<pre><code>    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.1.2&lt;/version&gt;\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\n        &lt;artifactId&gt;surefire-junit47&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2&lt;/version&gt;\n      &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n  &lt;/plugin&gt;\n</code></pre>\n<p>I tested it and works well</p>\n"}],"owner":{"account_id":551350,"reputation":1516,"user_id":976277,"accept_rate":86,"display_name":"Teofrostus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3634,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":36292312,"answer_count":4,"score":4,"last_activity_date":1695380234,"creation_date":1459272057,"question_id":36290953,"body_markdown":"I am following [this tutorial][1] and have reached the testing portion. When I create the `HelloControllerTest` file as well as a `HelloControllerIT` file in my test directory at `src/test/java/hello/` only the `HelloControllerTest` test runs. However, if I rename the second file to end with the word `Test`, such as `HelloController2Test`, then it also runs. I&#39;m running the tests from command line during the Maven build with `mvn clean verify`. I&#39;m running Maven 3.3.9 on OSX.\r\n\r\nI have two main questions: how does Maven know which tests to run? And, more importantly, how do I tell Maven to run other tests? Below is my `pom.xml`, taken directly from the [tutorial][1]:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;gs-spring-boot&lt;/artifactId&gt;\r\n        &lt;version&gt;0.1.0&lt;/version&gt;\r\n    \r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3.3.RELEASE&lt;/version&gt;\r\n        &lt;/parent&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n        &lt;/properties&gt;\r\n    \r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\n  [1]: https://spring.io/guides/gs/spring-boot/","title":"How do you tell Maven which Tests to run?","body":"<p>I am following <a href=\"https://spring.io/guides/gs/spring-boot/\" rel=\"nofollow\">this tutorial</a> and have reached the testing portion. When I create the <code>HelloControllerTest</code> file as well as a <code>HelloControllerIT</code> file in my test directory at <code>src/test/java/hello/</code> only the <code>HelloControllerTest</code> test runs. However, if I rename the second file to end with the word <code>Test</code>, such as <code>HelloController2Test</code>, then it also runs. I'm running the tests from command line during the Maven build with <code>mvn clean verify</code>. I'm running Maven 3.3.9 on OSX.</p>\n\n<p>I have two main questions: how does Maven know which tests to run? And, more importantly, how do I tell Maven to run other tests? Below is my <code>pom.xml</code>, taken directly from the <a href=\"https://spring.io/guides/gs/spring-boot/\" rel=\"nofollow\">tutorial</a>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;gs-spring-boot&lt;/artifactId&gt;\n    &lt;version&gt;0.1.0&lt;/version&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.3.3.RELEASE&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":1,"creation_date":1613715938,"post_id":66272663,"comment_id":117166645,"body_markdown":"We need to see your JSON, and fixing your JSON at the source is probably the best long term fix here.","body":"We need to see your JSON, and fixing your JSON at the source is probably the best long term fix here."}],"answers":[{"tags":[],"owner":{"account_id":18671929,"reputation":61,"user_id":13610473,"display_name":"Sunshine"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695380085,"creation_date":1613720537,"answer_id":66273531,"question_id":66272663,"body_markdown":"On the AS, the object class is first converted into a row and then converted into a character string. In this case, when a space is parsed, the end is parsed by default. As a result, an error is reported. Therefore, you need to convert the file to the JSON format in one step to avoid errors.\r\n\r\n    gson.fromJson(gson.toJson(sharedPreferences.getString(NAME_KEY,null),type));","title":"java error when trying to parse json object with a space using gson","body":"<p>On the AS, the object class is first converted into a row and then converted into a character string. In this case, when a space is parsed, the end is parsed by default. As a result, an error is reported. Therefore, you need to convert the file to the JSON format in one step to avoid errors.</p>\n<pre><code>gson.fromJson(gson.toJson(sharedPreferences.getString(NAME_KEY,null),type));\n</code></pre>\n"}],"owner":{"account_id":18089628,"reputation":13,"user_id":13149562,"display_name":"champa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":512,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695380085,"creation_date":1613715762,"question_id":66272663,"body_markdown":"I have a class that takes in a String parameter. I then use sharedpreferences to preserve the String. To do this, I converted the input String using the gson.toJson method and then stored it into the sharedpreferences as a json. However, my getter method for the String requires the conversion of the json object of the String back to gson. The conversion works when there are no spaces in the initial input String. However, I get this error when there is a space within the initial input String\r\n\r\n         com.google.gson.JsonSyntaxException: com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 1 column 6 path $\r\n\r\nHere is the class and parameter:\r\n\r\n        public City(String name)\r\n    {\r\n        this.name=name;\r\n        Gson gson=new Gson();\r\n        sharedPreferences=context.getSharedPreferences(&quot;alternate_db&quot;,Context.MODE_PRIVATE);\r\n        SharedPreferences.Editor editor=sharedPreferences.edit();\r\n        editor.putString(NAME_KEY,gson.toJson(this.name));\r\n        editor.apply();\r\n    }\r\nHere is the getter method for the String:\r\n\r\n        public String getName()\r\n    {\r\n        Gson gson=new Gson();\r\n        Type type=new TypeToken&lt;String&gt;(){}.getType();\r\n        return gson.fromJson(sharedPreferences.getString(NAME_KEY,null),type);\r\n    }\r\n","title":"java error when trying to parse json object with a space using gson","body":"<p>I have a class that takes in a String parameter. I then use sharedpreferences to preserve the String. To do this, I converted the input String using the gson.toJson method and then stored it into the sharedpreferences as a json. However, my getter method for the String requires the conversion of the json object of the String back to gson. The conversion works when there are no spaces in the initial input String. However, I get this error when there is a space within the initial input String</p>\n<pre><code>     com.google.gson.JsonSyntaxException: com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 1 column 6 path $\n</code></pre>\n<p>Here is the class and parameter:</p>\n<pre><code>    public City(String name)\n{\n    this.name=name;\n    Gson gson=new Gson();\n    sharedPreferences=context.getSharedPreferences(&quot;alternate_db&quot;,Context.MODE_PRIVATE);\n    SharedPreferences.Editor editor=sharedPreferences.edit();\n    editor.putString(NAME_KEY,gson.toJson(this.name));\n    editor.apply();\n}\n</code></pre>\n<p>Here is the getter method for the String:</p>\n<pre><code>    public String getName()\n{\n    Gson gson=new Gson();\n    Type type=new TypeToken&lt;String&gt;(){}.getType();\n    return gson.fromJson(sharedPreferences.getString(NAME_KEY,null),type);\n}\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","hibernate","spring-data"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1695378857,"post_id":77156804,"comment_id":136019750,"body_markdown":"I cannot think of an obvious conversion from a hex-encoded binary string to an array of `String`.  Could you explain how you would want that conversion to be done?  (Even converting `bytea` to a `String` is a bit dubious ... since you are not specifying what encoding scheme should be used to decode the binary string.)","body":"I cannot think of an obvious conversion from a hex-encoded binary string to an array of <code>String</code>.  Could you explain how you would want that conversion to be done?  (Even converting <code>bytea</code> to a <code>String</code> is a bit dubious ... since you are not specifying what encoding scheme should be used to decode the binary string.)"},{"owner":{"account_id":4771027,"reputation":1749,"user_id":3855773,"accept_rate":22,"display_name":"Jimmy"},"score":0,"creation_date":1695379233,"post_id":77156804,"comment_id":136019815,"body_markdown":"So encoding schema should be UTF-8. But that might not be concern here, as with @JdbcTypeCode I am able to convert Java objects but it has some issues with Object arrays.","body":"So encoding schema should be UTF-8. But that might not be concern here, as with @JdbcTypeCode I am able to convert Java objects but it has some issues with Object arrays."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1695379273,"post_id":77156804,"comment_id":136019822,"body_markdown":"What makes most sense to be is to try to map a `bytea` to a `byte[]` and then decode the `byte[]` yourself in code as appropriate.  That is, using a decoding scheme that is the reverse of the scheme used to encode the data before storing it in the database.","body":"What makes most sense to be is to try to map a <code>bytea</code> to a <code>byte[]</code> and then decode the <code>byte[]</code> yourself in code as appropriate.  That is, using a decoding scheme that is the reverse of the scheme used to encode the data before storing it in the database."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1695379346,"post_id":77156804,"comment_id":136019833,"body_markdown":"You haven&#39;t addressed the real question.  How is the `bytea` actually encoded?  Unless you know that, I don&#39;t know how you can expect Hibernate to understand what to do.","body":"You haven&#39;t addressed the real question.  How is the <code>bytea</code> actually encoded?  Unless you know that, I don&#39;t know how you can expect Hibernate to understand what to do."},{"owner":{"account_id":4771027,"reputation":1749,"user_id":3855773,"accept_rate":22,"display_name":"Jimmy"},"score":0,"creation_date":1695380012,"post_id":77156804,"comment_id":136019950,"body_markdown":"Thanks for reminding me of byte[]. I have updated my question. I already tried that but the problem is we can not use deserializer as it&#39;s method is deprecated. Alternative way has a security hotspot. And we didn&#39;t use and encoding while converting to String[] to byte[] it is default UTF-8","body":"Thanks for reminding me of byte[]. I have updated my question. I already tried that but the problem is we can not use deserializer as it&#39;s method is deprecated. Alternative way has a security hotspot. And we didn&#39;t use and encoding while converting to String[] to byte[] it is default UTF-8"}],"owner":{"account_id":4771027,"reputation":1749,"user_id":3855773,"accept_rate":22,"display_name":"Jimmy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":355,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695379839,"creation_date":1695378343,"question_id":77156804,"body_markdown":"As I am migrating from Spring boot 2.5 to 3.0 - it updated Hibernate to 6.0. I have a field in Java entity which stored as bytea in PostgreSQL database. And I am reading back in the String[]. \r\n\r\nTo fix this issue, I use @JdbcTypeCode annotation and tried to read the value but it is not working.  \r\n\r\n&gt; The problem is @JdbcTypeCode(SqlTypes.Array) can not convert bytea to\r\n&gt; String[]\r\n\r\n      @Column(name = &quot;dummy&quot;)\r\n      @JdbcTypeCode(SqlTypes.ARRAY)\r\n      private String[] dummy;\r\n\r\nWith the SqlTypes.Array I am getting below exception\r\n\r\n&gt; org.springframework.orm.jpa.JpaSystemException: Unable to extract JDBC value for position `3`\r\n\r\nAccording to http://www.java2s.com/example/java-api/java/sql/types/array-0.html\r\n  SqlTypes.Array returns Object[] but if I change from String[] to Object[] I am getting below error at compile time. \r\n\r\n&gt; Caused by: java.lang.ClassCastException: class org.hibernate.type.descriptor.java.spi.CollectionJavaType cannot be cast to class org.hibernate.type.descriptor.java.BasicPluralJavaType (org.hibernate.type.descriptor.java.spi.CollectionJavaType and org.hibernate.type.descriptor.java.BasicPluralJavaType are in unnamed module of loader &#39;app&#39;)\r\n\r\n**Alternative Approach tried**\r\n\r\nI tried getting the data in byte[] like below,\r\n\r\n \r\n\r\n      @Column(name = &quot;dummy&quot;)\r\n      private byte[] dummy;\r\n      \r\n      public String[] getDummy() {\r\n        SerializationUtils.deserialize(dummy); //This is deprecated\r\n      }\r\n\r\n**And tried converting using SerializationUtils but the deserialize method is deprecated and when with ObjectInputStream we are getting SecurityHotspot.** \r\n\r\nLooking for a lead on how I can convert stored bytea in postgres db to String[]\r\n\r\nThanks in advance. ","title":"Hibernate 6 JdbcTypeCode can not convert bytea to String[] array","body":"<p>As I am migrating from Spring boot 2.5 to 3.0 - it updated Hibernate to 6.0. I have a field in Java entity which stored as bytea in PostgreSQL database. And I am reading back in the String[].</p>\n<p>To fix this issue, I use @JdbcTypeCode annotation and tried to read the value but it is not working.</p>\n<blockquote>\n<p>The problem is @JdbcTypeCode(SqlTypes.Array) can not convert bytea to\nString[]</p>\n</blockquote>\n<pre><code>  @Column(name = &quot;dummy&quot;)\n  @JdbcTypeCode(SqlTypes.ARRAY)\n  private String[] dummy;\n</code></pre>\n<p>With the SqlTypes.Array I am getting below exception</p>\n<blockquote>\n<p>org.springframework.orm.jpa.JpaSystemException: Unable to extract JDBC value for position <code>3</code></p>\n</blockquote>\n<p>According to <a href=\"http://www.java2s.com/example/java-api/java/sql/types/array-0.html\" rel=\"nofollow noreferrer\">http://www.java2s.com/example/java-api/java/sql/types/array-0.html</a>\nSqlTypes.Array returns Object[] but if I change from String[] to Object[] I am getting below error at compile time.</p>\n<blockquote>\n<p>Caused by: java.lang.ClassCastException: class org.hibernate.type.descriptor.java.spi.CollectionJavaType cannot be cast to class org.hibernate.type.descriptor.java.BasicPluralJavaType (org.hibernate.type.descriptor.java.spi.CollectionJavaType and org.hibernate.type.descriptor.java.BasicPluralJavaType are in unnamed module of loader 'app')</p>\n</blockquote>\n<p><strong>Alternative Approach tried</strong></p>\n<p>I tried getting the data in byte[] like below,</p>\n<pre><code>  @Column(name = &quot;dummy&quot;)\n  private byte[] dummy;\n  \n  public String[] getDummy() {\n    SerializationUtils.deserialize(dummy); //This is deprecated\n  }\n</code></pre>\n<p><strong>And tried converting using SerializationUtils but the deserialize method is deprecated and when with ObjectInputStream we are getting SecurityHotspot.</strong></p>\n<p>Looking for a lead on how I can convert stored bytea in postgres db to String[]</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","kotlin","nfc","kotlin-multiplatform","st25"],"comments":[{"owner":{"account_id":1675086,"reputation":33930,"user_id":1540818,"accept_rate":82,"display_name":"Joffrey"},"score":1,"creation_date":1695380283,"post_id":77156754,"comment_id":136019994,"body_markdown":"As a side note, the name Kotlin Multiplatform Mobile (KMM) was deprecated in favor of Kotlin Multiplaform (KMP): https://blog.jetbrains.com/kotlin/2023/07/update-on-the-name-of-kotlin-multiplatform/","body":"As a side note, the name Kotlin Multiplatform Mobile (KMM) was deprecated in favor of Kotlin Multiplaform (KMP): <a href=\"https://blog.jetbrains.com/kotlin/2023/07/update-on-the-name-of-kotlin-multiplatform/\" rel=\"nofollow noreferrer\">blog.jetbrains.com/kotlin/2023/07/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":80369,"reputation":16624,"user_id":227313,"accept_rate":59,"display_name":"Kevin Galligan"},"score":1,"creation_date":1695386974,"post_id":77156950,"comment_id":136021338,"body_markdown":"Restating the answer a bit. Definitely correct, but to summarize, you have the JVM ST25 library. There almost certainly is an iOS equivalent. To talk to them from shared Kotlin code, I&#39;d write an interface with only the functions you need from shared code. For each platform, implement that interface and pass it in on app start. expect/actual is rigid, generally, and cinterop on iOS isn&#39;t fun. Talk about this (title on the page is wrong but the video is correct): https://www.droidcon.com/2022/06/28/sdk-design-and-publishing-for-kotlin-multiplatform-mobile/","body":"Restating the answer a bit. Definitely correct, but to summarize, you have the JVM ST25 library. There almost certainly is an iOS equivalent. To talk to them from shared Kotlin code, I&#39;d write an interface with only the functions you need from shared code. For each platform, implement that interface and pass it in on app start. expect/actual is rigid, generally, and cinterop on iOS isn&#39;t fun. Talk about this (title on the page is wrong but the video is correct): <a href=\"https://www.droidcon.com/2022/06/28/sdk-design-and-publishing-for-kotlin-multiplatform-mobile/\" rel=\"nofollow noreferrer\">droidcon.com/2022/06/28/&hellip;</a>"},{"owner":{"account_id":1675086,"reputation":33930,"user_id":1540818,"accept_rate":82,"display_name":"Joffrey"},"score":0,"creation_date":1695389127,"post_id":77156950,"comment_id":136021769,"body_markdown":"That&#39;s a very useful addition, thanks! I don&#39;t have first hand experience with iOS development (neither with Swift nor Kotlin), so I haven&#39;t faced the &quot;reality&quot; of these issues.","body":"That&#39;s a very useful addition, thanks! I don&#39;t have first hand experience with iOS development (neither with Swift nor Kotlin), so I haven&#39;t faced the &quot;reality&quot; of these issues."}],"tags":[],"owner":{"account_id":1675086,"reputation":33930,"user_id":1540818,"accept_rate":82,"display_name":"Joffrey"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1695379705,"creation_date":1695379705,"answer_id":77156950,"question_id":77156754,"body_markdown":"The iOS version of your app will not run on the JVM, it runs natively on iOS. Therefore you cannot use JVM libraries in your iOS app.\r\n\r\nThat said, the Kotlin multiplatform technology does allow you to write common code that calls some functions/APIs that have a different implementation on different platform.\r\n\r\nThis means that, if you find an iOS library to do this, you could define the common API you need as `expect` declarations in common code, and then write the `actual` implementations in the JVM source set by delegating to the ST25 JVM library, and other `actual` implementations in the iOS source set by delegating to the iOS library.","title":"How to use a Java library with KMM (Kotlin Multiplatform Mobile)","body":"<p>The iOS version of your app will not run on the JVM, it runs natively on iOS. Therefore you cannot use JVM libraries in your iOS app.</p>\n<p>That said, the Kotlin multiplatform technology does allow you to write common code that calls some functions/APIs that have a different implementation on different platform.</p>\n<p>This means that, if you find an iOS library to do this, you could define the common API you need as <code>expect</code> declarations in common code, and then write the <code>actual</code> implementations in the JVM source set by delegating to the ST25 JVM library, and other <code>actual</code> implementations in the iOS source set by delegating to the iOS library.</p>\n"}],"owner":{"account_id":19629640,"reputation":15,"user_id":14368242,"display_name":"Matteo Trupia"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77156950,"answer_count":1,"score":1,"last_activity_date":1695379705,"creation_date":1695377974,"question_id":77156754,"body_markdown":"I am developing an **Android** application that uses the **ST25 library** to read **NFC** ST tags. I would like to **port my application** also to **iOS** using **KMM**, a **cross-platform** solution based on **Kotlin**. The **ST25 library** is written in **Java** and I don&#39;t know if I can use it with KMM or if I should look for an alternative. The ST25 sdk includes an .aar and a .jar.\r\n\r\nMy question is, can I use the ST25 library with KMM?If yes, how can I integrate it into my project?If not, is there an equivalent library written in Kotlin or another language compatible with KMM?\r\n\r\n\r\nI tried to do some research online and found only old posts about it and wanted to know if there were any updates regarding the use of Java libraries in KKM.","title":"How to use a Java library with KMM (Kotlin Multiplatform Mobile)","body":"<p>I am developing an <strong>Android</strong> application that uses the <strong>ST25 library</strong> to read <strong>NFC</strong> ST tags. I would like to <strong>port my application</strong> also to <strong>iOS</strong> using <strong>KMM</strong>, a <strong>cross-platform</strong> solution based on <strong>Kotlin</strong>. The <strong>ST25 library</strong> is written in <strong>Java</strong> and I don't know if I can use it with KMM or if I should look for an alternative. The ST25 sdk includes an .aar and a .jar.</p>\n<p>My question is, can I use the ST25 library with KMM?If yes, how can I integrate it into my project?If not, is there an equivalent library written in Kotlin or another language compatible with KMM?</p>\n<p>I tried to do some research online and found only old posts about it and wanted to know if there were any updates regarding the use of Java libraries in KKM.</p>\n"},{"tags":["java","html","owasp","antisamy"],"comments":[{"owner":{"account_id":385460,"reputation":1357,"user_id":742609,"display_name":"Kevin W. Wall"},"score":0,"creation_date":1695010168,"post_id":77099785,"comment_id":135961842,"body_markdown":"I suggest you remove the &#39;esapi&#39; tag here as this is not an ESAPI issue. You are using AntiSamy directly. I suggest you email one or both of the AntiSamy maintainers. You can find their email addresses on https://owasp.org/www-project-antisamy/ under &quot;Leaders&quot; listed on the right-hand side. Maybe add a tag for &#39;antisamy&#39; in case anyone is watching for that. I don&#39;t really care to look into their code to see how it finds resources though, so ask them.","body":"I suggest you remove the &#39;esapi&#39; tag here as this is not an ESAPI issue. You are using AntiSamy directly. I suggest you email one or both of the AntiSamy maintainers. You can find their email addresses on <a href=\"https://owasp.org/www-project-antisamy/\" rel=\"nofollow noreferrer\">owasp.org/www-project-antisamy</a> under &quot;Leaders&quot; listed on the right-hand side. Maybe add a tag for &#39;antisamy&#39; in case anyone is watching for that. I don&#39;t really care to look into their code to see how it finds resources though, so ask them."},{"owner":{"account_id":19727548,"reputation":13,"user_id":14443800,"display_name":"Gafar"},"score":0,"creation_date":1695405075,"post_id":77099785,"comment_id":136024957,"body_markdown":"After several attempt at making this work, unfortunately it does not.\n\nHowever, I found a better solution https://stackoverflow.com/questions/3413297/how-to-sanitize-html-code-in-java-to-prevent-xss-attacks","body":"After several attempt at making this work, unfortunately it does not.  However, I found a better solution <a href=\"https://stackoverflow.com/questions/3413297/how-to-sanitize-html-code-in-java-to-prevent-xss-attacks\" title=\"how to sanitize html code in java to prevent xss attacks\">stackoverflow.com/questions/3413297/&hellip;</a>"}],"owner":{"account_id":19727548,"reputation":13,"user_id":14443800,"display_name":"Gafar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695379564,"creation_date":1694631155,"question_id":77099785,"body_markdown":"I am working on a project that takes html from the user and persist to the DB. The current implementation is vulnerable to XSS attack. \r\n\r\nIn order to prevent this attack, I am trying to implement the OWASP Antisamy as seen [here](https://wiki.owasp.org/index.php/Category:OWASP_AntiSamy_Project#tab=How_do_I_get_started_3F) but I am getting fileNotFoundError for the policy that I have downloaded and put in the resources directory of the project.\r\n\r\n#### Code\r\n```java\r\n//sanitize welcomeMessage\r\ntry {\r\n    Policy policy = Policy.getInstance(new File(&quot;antisamy-tinymce.xml&quot;));\r\n    AntiSamy as = new AntiSamy();\r\n    CleanResults cr = as.scan(welcomeMessage, policy);\r\n    preferences.setWelcomeMessage(cr.getCleanHTML());\r\n} catch (PolicyException | ScanException e) {\r\n    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_WARN, &quot;Invalid Welcome Message&quot;, e.getMessage()));\r\n    return;\r\n}\r\n```\r\n\r\n#### Project Structure\r\n```\r\n.\r\n└── src/\r\n    └── main/\r\n        └── resources/\r\n            ├── antisamy-tinymce.xml\r\n```\r\n\r\nAny pointer to what I might be doing wrongly?\r\n\r\nI have tried using the absolute path of the antisamy-tinymce.xml file but it doesn&#39;t work when deployed to the application server.","title":"Error: FileNotFound thrown while trying to use antisamy-tinymce.xml OWASP","body":"<p>I am working on a project that takes html from the user and persist to the DB. The current implementation is vulnerable to XSS attack.</p>\n<p>In order to prevent this attack, I am trying to implement the OWASP Antisamy as seen <a href=\"https://wiki.owasp.org/index.php/Category:OWASP_AntiSamy_Project#tab=How_do_I_get_started_3F\" rel=\"nofollow noreferrer\">here</a> but I am getting fileNotFoundError for the policy that I have downloaded and put in the resources directory of the project.</p>\n<h4>Code</h4>\n<pre class=\"lang-java prettyprint-override\"><code>//sanitize welcomeMessage\ntry {\n    Policy policy = Policy.getInstance(new File(&quot;antisamy-tinymce.xml&quot;));\n    AntiSamy as = new AntiSamy();\n    CleanResults cr = as.scan(welcomeMessage, policy);\n    preferences.setWelcomeMessage(cr.getCleanHTML());\n} catch (PolicyException | ScanException e) {\n    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_WARN, &quot;Invalid Welcome Message&quot;, e.getMessage()));\n    return;\n}\n</code></pre>\n<h4>Project Structure</h4>\n<pre><code>.\n└── src/\n    └── main/\n        └── resources/\n            ├── antisamy-tinymce.xml\n</code></pre>\n<p>Any pointer to what I might be doing wrongly?</p>\n<p>I have tried using the absolute path of the antisamy-tinymce.xml file but it doesn't work when deployed to the application server.</p>\n"},{"tags":["java","xslt"],"comments":[{"owner":{"account_id":22562945,"reputation":462,"user_id":16750357,"display_name":"al.truisme"},"score":0,"creation_date":1692517453,"post_id":76938166,"comment_id":135632150,"body_markdown":"Seems to be an exception thrown during the transformation when retrieving the source (input) document, here presented as a ```DOMSource```.","body":"Seems to be an exception thrown during the transformation when retrieving the source (input) document, here presented as a <code>DOMSource</code>."},{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":1,"creation_date":1692519998,"post_id":76938166,"comment_id":135632376,"body_markdown":"I would check whether it works or fails with Java 8 or 11, too. Then I would check whether it works with the latest Xalan release from Apache or in general, try to run my XSLT with Saxon HE anyway.","body":"I would check whether it works or fails with Java 8 or 11, too. Then I would check whether it works with the latest Xalan release from Apache or in general, try to run my XSLT with Saxon HE anyway."},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1692520745,"post_id":76938166,"comment_id":135632440,"body_markdown":"If it were the source (input) document, it should fail the same way using the identity transformation - it does not.","body":"If it were the source (input) document, it should fail the same way using the identity transformation - it does not."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692521566,"creation_date":1692521566,"answer_id":76938659,"question_id":76938166,"body_markdown":"Martin Honnen had the key idea: Simply switch to Saxon HE.\r\nAll I did was to add this dependency to my project:\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/net.sf.saxon/Saxon-HE --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;net.sf.saxon&lt;/groupId&gt;\r\n        &lt;artifactId&gt;Saxon-HE&lt;/artifactId&gt;\r\n        &lt;version&gt;12.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nNow the code runs without a single line changed. The issue must somehow be in the OpenJDK-embedded Xalan version, but it is no longer blocking me.","title":"XSLT in OpenJDK 17 gives NullPointerException (Bug in Xalan?)","body":"<p>Martin Honnen had the key idea: Simply switch to Saxon HE.\nAll I did was to add this dependency to my project:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/net.sf.saxon/Saxon-HE --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;net.sf.saxon&lt;/groupId&gt;\n    &lt;artifactId&gt;Saxon-HE&lt;/artifactId&gt;\n    &lt;version&gt;12.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Now the code runs without a single line changed. The issue must somehow be in the OpenJDK-embedded Xalan version, but it is no longer blocking me.</p>\n"},{"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1695063573,"post_id":77128842,"comment_id":135971442,"body_markdown":"That might fix the secondary problem of parsing the stylesheet. Could you elaborate how you got to this conclusion?","body":"That might fix the secondary problem of parsing the stylesheet. Could you elaborate how you got to this conclusion?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1695192975,"post_id":77128842,"comment_id":135989537,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77128842/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":8413095,"reputation":1,"user_id":6314354,"display_name":"pralys"},"score":0,"creation_date":1695203232,"post_id":77128842,"comment_id":135991613,"body_markdown":"@Queeg I edited the answer to be more specific","body":"@Queeg I edited the answer to be more specific"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1695238433,"post_id":77128842,"comment_id":135999439,"body_markdown":"While I know what namespace awareness is, I&#39;m afraid I still do not see the connection between this.stringRep and the namespace.","body":"While I know what namespace awareness is, I&#39;m afraid I still do not see the connection between this.stringRep and the namespace."},{"owner":{"account_id":8413095,"reputation":1,"user_id":6314354,"display_name":"pralys"},"score":1,"creation_date":1695378133,"post_id":77128842,"comment_id":136019623,"body_markdown":"@Queeg I edited again, hope it&#39;ll help","body":"@Queeg I edited again, hope it&#39;ll help"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1695415721,"post_id":77128842,"comment_id":136026573,"body_markdown":"A much better reference this time, thank you. Now I am thinking where _stringRep might get null. This could only happen if namespace is null or empty and localname is null either. Something that could happen on the default namespace only? Then your conclusion makes sense - given that the stylesheet (or parsed document) always has a namespace defined on all nodes. I am happy to have gone to Saxon...","body":"A much better reference this time, thank you. Now I am thinking where _stringRep might get null. This could only happen if namespace is null or empty and localname is null either. Something that could happen on the default namespace only? Then your conclusion makes sense - given that the stylesheet (or parsed document) always has a namespace defined on all nodes. I am happy to have gone to Saxon..."}],"tags":[],"owner":{"account_id":8413095,"reputation":1,"user_id":6314354,"display_name":"pralys"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695379169,"creation_date":1695054070,"answer_id":77128842,"question_id":76938166,"body_markdown":"Since _stringRep depends on the XML namespace (see Xalan sources in JDK17) :\r\n\r\n    public QName(String namespace, String prefix, String localname) {\r\n        _namespace = namespace;\r\n        _prefix    = prefix;\r\n        _localname = localname;\r\n\r\n        _stringRep =\r\n            (namespace != null &amp;&amp; !namespace.equals(Constants.EMPTYSTRING)) ?\r\n            (namespace + &#39;:&#39; + localname) : localname;\r\n\r\n        _hashCode  = _stringRep.hashCode() + 19; // cached for speed\r\n    }\r\n\r\nAnd since your stylesheet contains some XML namespace (in your case &quot;xsl&quot;), setting isNamespaceAware to true (Kotlin) or doing a setNamespaceAware(true) (Java) on the document builder factory may solve your last problem. It will make the factory generate namespace aware parsers. The default value for namespaceAware is false.\r\n\r\nHere is some usefull documentation : https://xalan.apache.org/xalan-j/faq.html#faq-16","title":"XSLT in OpenJDK 17 gives NullPointerException (Bug in Xalan?)","body":"<p>Since _stringRep depends on the XML namespace (see Xalan sources in JDK17) :</p>\n<pre><code>public QName(String namespace, String prefix, String localname) {\n    _namespace = namespace;\n    _prefix    = prefix;\n    _localname = localname;\n\n    _stringRep =\n        (namespace != null &amp;&amp; !namespace.equals(Constants.EMPTYSTRING)) ?\n        (namespace + ':' + localname) : localname;\n\n    _hashCode  = _stringRep.hashCode() + 19; // cached for speed\n}\n</code></pre>\n<p>And since your stylesheet contains some XML namespace (in your case &quot;xsl&quot;), setting isNamespaceAware to true (Kotlin) or doing a setNamespaceAware(true) (Java) on the document builder factory may solve your last problem. It will make the factory generate namespace aware parsers. The default value for namespaceAware is false.</p>\n<p>Here is some usefull documentation : <a href=\"https://xalan.apache.org/xalan-j/faq.html#faq-16\" rel=\"nofollow noreferrer\">https://xalan.apache.org/xalan-j/faq.html#faq-16</a></p>\n"}],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":275,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76938659,"answer_count":2,"score":1,"last_activity_date":1695379169,"creation_date":1692512209,"question_id":76938166,"body_markdown":"I have used XSLT transformation many times in Java thus I am puzzled getting a NullPointerException.\r\n\r\nThis piece of code works without problem:\r\n\r\n        Document doc = generateXml(catalog);\r\n        \r\n        Transformer transformer = TransformerFactory.newInstance().newTransformer();\r\n        transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n        transformer.setOutputProperty(\r\n             &quot;{http://xml.apache.org/xslt}indent-amount&quot;, &quot;4&quot;);\r\n        transformer.transform(new DOMSource(doc), new StreamResult(out));\r\n\r\nNow I want to use a different stylesheet, thus I change the code into that:\r\n\r\n        Document doc = generateXml(catalog);\r\n        \r\n        URL stylesheet = getClass().getResource(&quot;catalog_html.xslt&quot;);\r\n        log.debug(&quot;stylesheet url: {}&quot;, stylesheet);\r\n        Transformer transformer = TransformerFactory.newInstance()\r\n                .newTransformer(new StreamSource(stylesheet.openStream()));\r\n        transformer.transform(new DOMSource(doc), new StreamResult(out));\r\n\r\nFrom the debug log I know that styleheet is not null. Otherwise I would get a NullPointerException when creating the transformer. But instead I get a NullPointerException when executing the transformer, and it looks like this:\r\n\r\n    javax.xml.transform.TransformerException: javax.xml.transform.TransformerException: java.lang.NullPointerException: Cannot invoke &quot;String.toCharArray()&quot; because &quot;data&quot; is null\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:792) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:395) ~[?:?]\r\n    \tat com.chaudhuri.cataloggenerator.Generator.writeHtml(Generator.java:318) ~[classes/:?]\r\n    \tat com.chaudhuri.cataloggenerator.Generator.lambda$run$3(Generator.java:248) ~[classes/:?]\r\n    \tat java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992) ~[?:?]\r\n    \tat java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]\r\n    \tat com.chaudhuri.cataloggenerator.Generator.run(Generator.java:230) ~[classes/:?]\r\n    \tat com.chaudhuri.cataloggenerator.GeneratorTest.testRun4(GeneratorTest.java:193) ~[test-classes/:?]\r\n    \tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n    \tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\r\n    \tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\r\n    \tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727) ~[junit-platform-commons-1.9.2.jar:1.9.2]\r\n    \tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102) [junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54) [junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) [junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) [junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) [junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:50) [surefire-junit-platform-3.0.0.jar:3.0.0]\r\n    \tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) [surefire-junit-platform-3.0.0.jar:3.0.0]\r\n    \tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) [surefire-junit-platform-3.0.0.jar:3.0.0]\r\n    \tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) [surefire-junit-platform-3.0.0.jar:3.0.0]\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) [surefire-booter-3.0.0.jar:3.0.0]\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) [surefire-booter-3.0.0.jar:3.0.0]\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) [surefire-booter-3.0.0.jar:3.0.0]\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) [surefire-booter-3.0.0.jar:3.0.0]\r\n    Caused by: javax.xml.transform.TransformerException: java.lang.NullPointerException: Cannot invoke &quot;String.toCharArray()&quot; because &quot;data&quot; is null\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.getDOM(TransformerImpl.java:603) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:782) ~[?:?]\r\n    \t... 78 more\r\n    Caused by: java.lang.NullPointerException: Cannot invoke &quot;String.toCharArray()&quot; because &quot;data&quot; is null\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:294) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:275) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:275) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:275) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:192) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:144) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.dom.XSLTCDTMManager.getDTM(XSLTCDTMManager.java:335) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.dom.XSLTCDTMManager.getDTM(XSLTCDTMManager.java:214) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.getDOM(TransformerImpl.java:581) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:782) ~[?:?]\r\n    \t... 78 more\r\n\r\nWhile I do not believe this is related to the stylesheet, well here it is:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; version=&quot;1.0&quot;&gt;\r\n        &lt;xsl:output method=&quot;html&quot;/&gt;\r\n    \r\n        &lt;!-- TODO customize transformation rules \r\n             syntax recommendation http://www.w3.org/TR/xslt \r\n        --&gt;\r\n        &lt;xsl:template match=&quot;/&quot;&gt;\r\n            &lt;html&gt;\r\n                &lt;head&gt;\r\n                    &lt;title&gt;catalog_html.xsl&lt;/title&gt;\r\n                &lt;/head&gt;\r\n                &lt;body&gt;\r\n                &lt;/body&gt;\r\n            &lt;/html&gt;\r\n        &lt;/xsl:template&gt;\r\n    \r\n    &lt;/xsl:stylesheet&gt;\r\n\r\nAny ideas what could be the cause?\r\n\r\nEdit\r\n-\r\n\r\nJust to see whether the problem was in the StreamSource, I changed my code to\r\n\r\n        Document doc = generateXml(catalog);\r\n        \r\n        URL stylesheet = getClass().getResource(&quot;catalog_html.xslt&quot;);\r\n        Document ss = DocumentBuilderFactory.newInstance()\r\n                                            .newDocumentBuilder()\r\n                                            .parse(stylesheet.openStream());\r\n        Transformer transformer = \r\n            TransformerFactory.newInstance()\r\n                              .newTransformer(new DOMSource(ss));\r\n        transformer.transform(new DOMSource(doc), new StreamResult(out));\r\n\r\nDo I am parsing the stylesheet myself before injecting it as DOM structure into the transformer. This time I get another exception when initializing the transformer:\r\n\r\n    javax.xml.transform.TransformerConfigurationException: Cannot invoke &quot;String.hashCode()&quot; because &quot;this._stringRep&quot; is null\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:1077) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTransformer(TransformerFactoryImpl.java:834) ~[?:?]\r\n    \tat com.chaudhuri.cataloggenerator.Generator.writeHtml(Generator.java:319) ~[classes/:?]\r\n    \tat com.chaudhuri.cataloggenerator.Generator.lambda$run$3(Generator.java:249) ~[classes/:?]\r\n    \tat java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992) ~[?:?]\r\n    \tat java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]\r\n    \tat com.chaudhuri.cataloggenerator.Generator.run(Generator.java:231) ~[classes/:?]\r\n    \tat com.chaudhuri.cataloggenerator.GeneratorTest.testRun4(GeneratorTest.java:193) ~[test-classes/:?]\r\n    \tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n    \tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\r\n    \tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\r\n    \tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727) ~[junit-platform-commons-1.9.2.jar:1.9.2]\r\n    \tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102) [junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54) [junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) [junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) [junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) [junit-platform-launcher-1.9.2.jar:1.9.2]\r\n    \tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:50) [surefire-junit-platform-3.0.0.jar:3.0.0]\r\n    \tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) [surefire-junit-platform-3.0.0.jar:3.0.0]\r\n    \tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) [surefire-junit-platform-3.0.0.jar:3.0.0]\r\n    \tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) [surefire-junit-platform-3.0.0.jar:3.0.0]\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) [surefire-booter-3.0.0.jar:3.0.0]\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) [surefire-booter-3.0.0.jar:3.0.0]\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) [surefire-booter-3.0.0.jar:3.0.0]\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) [surefire-booter-3.0.0.jar:3.0.0]\r\n    Caused by: java.lang.NullPointerException: Cannot invoke &quot;String.hashCode()&quot; because &quot;this._stringRep&quot; is null\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.compiler.QName.&lt;init&gt;(QName.java:45) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.compiler.Parser.getQName(Parser.java:315) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.compiler.Parser.makeInstance(Parser.java:982) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.compiler.Parser.startElement(Parser.java:1312) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:269) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:192) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:130) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.compiler.Parser.parse(Parser.java:439) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.compiler.XSLTC.compile(XSLTC.java:481) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.compiler.XSLTC.compile(XSLTC.java:575) ~[?:?]\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:1036) ~[?:?]\r\n    \t... 78 more\r\n\r\nIt seems to be either my stylesheet or Xalan. But even if it were the stylesheet, I&#39;d expect a better message from Xalan than that.","title":"XSLT in OpenJDK 17 gives NullPointerException (Bug in Xalan?)","body":"<p>I have used XSLT transformation many times in Java thus I am puzzled getting a NullPointerException.</p>\n<p>This piece of code works without problem:</p>\n<pre><code>    Document doc = generateXml(catalog);\n    \n    Transformer transformer = TransformerFactory.newInstance().newTransformer();\n    transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\n    transformer.setOutputProperty(\n         &quot;{http://xml.apache.org/xslt}indent-amount&quot;, &quot;4&quot;);\n    transformer.transform(new DOMSource(doc), new StreamResult(out));\n</code></pre>\n<p>Now I want to use a different stylesheet, thus I change the code into that:</p>\n<pre><code>    Document doc = generateXml(catalog);\n    \n    URL stylesheet = getClass().getResource(&quot;catalog_html.xslt&quot;);\n    log.debug(&quot;stylesheet url: {}&quot;, stylesheet);\n    Transformer transformer = TransformerFactory.newInstance()\n            .newTransformer(new StreamSource(stylesheet.openStream()));\n    transformer.transform(new DOMSource(doc), new StreamResult(out));\n</code></pre>\n<p>From the debug log I know that styleheet is not null. Otherwise I would get a NullPointerException when creating the transformer. But instead I get a NullPointerException when executing the transformer, and it looks like this:</p>\n<pre><code>javax.xml.transform.TransformerException: javax.xml.transform.TransformerException: java.lang.NullPointerException: Cannot invoke &quot;String.toCharArray()&quot; because &quot;data&quot; is null\n    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:792) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:395) ~[?:?]\n    at com.chaudhuri.cataloggenerator.Generator.writeHtml(Generator.java:318) ~[classes/:?]\n    at com.chaudhuri.cataloggenerator.Generator.lambda$run$3(Generator.java:248) ~[classes/:?]\n    at java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992) ~[?:?]\n    at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]\n    at com.chaudhuri.cataloggenerator.Generator.run(Generator.java:230) ~[classes/:?]\n    at com.chaudhuri.cataloggenerator.GeneratorTest.testRun4(GeneratorTest.java:193) ~[test-classes/:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727) ~[junit-platform-commons-1.9.2.jar:1.9.2]\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102) [junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54) [junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) [junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) [junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) [junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:50) [surefire-junit-platform-3.0.0.jar:3.0.0]\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) [surefire-junit-platform-3.0.0.jar:3.0.0]\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) [surefire-junit-platform-3.0.0.jar:3.0.0]\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) [surefire-junit-platform-3.0.0.jar:3.0.0]\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) [surefire-booter-3.0.0.jar:3.0.0]\n    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) [surefire-booter-3.0.0.jar:3.0.0]\n    at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) [surefire-booter-3.0.0.jar:3.0.0]\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) [surefire-booter-3.0.0.jar:3.0.0]\nCaused by: javax.xml.transform.TransformerException: java.lang.NullPointerException: Cannot invoke &quot;String.toCharArray()&quot; because &quot;data&quot; is null\n    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.getDOM(TransformerImpl.java:603) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:782) ~[?:?]\n    ... 78 more\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;String.toCharArray()&quot; because &quot;data&quot; is null\n    at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:294) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:275) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:275) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:275) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:192) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:144) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.dom.XSLTCDTMManager.getDTM(XSLTCDTMManager.java:335) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.dom.XSLTCDTMManager.getDTM(XSLTCDTMManager.java:214) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.getDOM(TransformerImpl.java:581) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:782) ~[?:?]\n    ... 78 more\n</code></pre>\n<p>While I do not believe this is related to the stylesheet, well here it is:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; version=&quot;1.0&quot;&gt;\n    &lt;xsl:output method=&quot;html&quot;/&gt;\n\n    &lt;!-- TODO customize transformation rules \n         syntax recommendation http://www.w3.org/TR/xslt \n    --&gt;\n    &lt;xsl:template match=&quot;/&quot;&gt;\n        &lt;html&gt;\n            &lt;head&gt;\n                &lt;title&gt;catalog_html.xsl&lt;/title&gt;\n            &lt;/head&gt;\n            &lt;body&gt;\n            &lt;/body&gt;\n        &lt;/html&gt;\n    &lt;/xsl:template&gt;\n\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<p>Any ideas what could be the cause?</p>\n<h2>Edit</h2>\n<p>Just to see whether the problem was in the StreamSource, I changed my code to</p>\n<pre><code>    Document doc = generateXml(catalog);\n    \n    URL stylesheet = getClass().getResource(&quot;catalog_html.xslt&quot;);\n    Document ss = DocumentBuilderFactory.newInstance()\n                                        .newDocumentBuilder()\n                                        .parse(stylesheet.openStream());\n    Transformer transformer = \n        TransformerFactory.newInstance()\n                          .newTransformer(new DOMSource(ss));\n    transformer.transform(new DOMSource(doc), new StreamResult(out));\n</code></pre>\n<p>Do I am parsing the stylesheet myself before injecting it as DOM structure into the transformer. This time I get another exception when initializing the transformer:</p>\n<pre><code>javax.xml.transform.TransformerConfigurationException: Cannot invoke &quot;String.hashCode()&quot; because &quot;this._stringRep&quot; is null\n    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:1077) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTransformer(TransformerFactoryImpl.java:834) ~[?:?]\n    at com.chaudhuri.cataloggenerator.Generator.writeHtml(Generator.java:319) ~[classes/:?]\n    at com.chaudhuri.cataloggenerator.Generator.lambda$run$3(Generator.java:249) ~[classes/:?]\n    at java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992) ~[?:?]\n    at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]\n    at com.chaudhuri.cataloggenerator.Generator.run(Generator.java:231) ~[classes/:?]\n    at com.chaudhuri.cataloggenerator.GeneratorTest.testRun4(GeneratorTest.java:193) ~[test-classes/:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727) ~[junit-platform-commons-1.9.2.jar:1.9.2]\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.9.2.jar:5.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55) ~[junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102) [junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54) [junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) [junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) [junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) [junit-platform-launcher-1.9.2.jar:1.9.2]\n    at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:50) [surefire-junit-platform-3.0.0.jar:3.0.0]\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) [surefire-junit-platform-3.0.0.jar:3.0.0]\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) [surefire-junit-platform-3.0.0.jar:3.0.0]\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) [surefire-junit-platform-3.0.0.jar:3.0.0]\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) [surefire-booter-3.0.0.jar:3.0.0]\n    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) [surefire-booter-3.0.0.jar:3.0.0]\n    at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) [surefire-booter-3.0.0.jar:3.0.0]\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) [surefire-booter-3.0.0.jar:3.0.0]\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;String.hashCode()&quot; because &quot;this._stringRep&quot; is null\n    at com.sun.org.apache.xalan.internal.xsltc.compiler.QName.&lt;init&gt;(QName.java:45) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.compiler.Parser.getQName(Parser.java:315) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.compiler.Parser.makeInstance(Parser.java:982) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.compiler.Parser.startElement(Parser.java:1312) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:269) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:192) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.trax.DOM2SAX.parse(DOM2SAX.java:130) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.compiler.Parser.parse(Parser.java:439) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.compiler.XSLTC.compile(XSLTC.java:481) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.compiler.XSLTC.compile(XSLTC.java:575) ~[?:?]\n    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:1036) ~[?:?]\n    ... 78 more\n</code></pre>\n<p>It seems to be either my stylesheet or Xalan. But even if it were the stylesheet, I'd expect a better message from Xalan than that.</p>\n"},{"tags":["java","unit-testing","assertj"],"answers":[{"tags":[],"owner":{"account_id":13463440,"reputation":1896,"user_id":9714611,"display_name":"Stefano Cordio"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695379088,"creation_date":1695379088,"answer_id":77156891,"question_id":77156631,"body_markdown":"As the exception is caught in the method, AssertJ has no chance to see it, hence the assertion error you already experienced.\r\n\r\nAssuming you are in a unit test with a mock of the DB writer, you might intercept that call of the mock and assert the invocation parameter(s).\r\n\r\nIf you aren&#39;t in a unit test, you should read back from the DB and assert its content.","title":"AssertJ combine exception catching and return type assertions","body":"<p>As the exception is caught in the method, AssertJ has no chance to see it, hence the assertion error you already experienced.</p>\n<p>Assuming you are in a unit test with a mock of the DB writer, you might intercept that call of the mock and assert the invocation parameter(s).</p>\n<p>If you aren't in a unit test, you should read back from the DB and assert its content.</p>\n"}],"owner":{"account_id":1876051,"reputation":3428,"user_id":1697245,"accept_rate":69,"display_name":"Arthur Eirich"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77156891,"answer_count":1,"score":0,"last_activity_date":1695379088,"creation_date":1695376836,"question_id":77156631,"body_markdown":"I have a method which catches an ```IOException``` while trying to process a JSON file and if this exception occurs ```false``` is being returned. Something like:\r\n\r\n    public boolean method(){\r\n     try{\r\n      // process json file\r\n       return true;\r\n     } catch IOException {\r\n       // write stuff into db\r\n       return false;\r\n     }\r\n    }\r\n\r\nThe catch block writes exception message to the database. So given a method with a ```boolean``` return type and exception handling how can I combine both in my unit test to assert the instance of the exception/its message and method&#39;s return value?\r\nI am aware of\r\n\r\n    Assertions.assertThatThrownBy(() -&gt; objectUnderTest.method()).isInstanceOf(IOException.class)\r\nThe above statement results in ```java.lang.AssertionError: Expecting code to raise a throwable.```\r\n\r\nand\r\n\r\n    Assertions.assertThat(objectUnderTest.method()).isFalse() // works well\r\n\r\nThanks a lot!","title":"AssertJ combine exception catching and return type assertions","body":"<p>I have a method which catches an <code>IOException</code> while trying to process a JSON file and if this exception occurs <code>false</code> is being returned. Something like:</p>\n<pre><code>public boolean method(){\n try{\n  // process json file\n   return true;\n } catch IOException {\n   // write stuff into db\n   return false;\n }\n}\n</code></pre>\n<p>The catch block writes exception message to the database. So given a method with a <code>boolean</code> return type and exception handling how can I combine both in my unit test to assert the instance of the exception/its message and method's return value?\nI am aware of</p>\n<pre><code>Assertions.assertThatThrownBy(() -&gt; objectUnderTest.method()).isInstanceOf(IOException.class)\n</code></pre>\n<p>The above statement results in <code>java.lang.AssertionError: Expecting code to raise a throwable.</code></p>\n<p>and</p>\n<pre><code>Assertions.assertThat(objectUnderTest.method()).isFalse() // works well\n</code></pre>\n<p>Thanks a lot!</p>\n"},{"tags":["java","maven","junit","intellij-idea"],"answers":[{"comments":[{"owner":{"account_id":45002,"reputation":13531,"user_id":132374,"accept_rate":87,"display_name":"Jon Onstott"},"score":0,"creation_date":1309561545,"post_id":6553956,"comment_id":7722867,"body_markdown":"Thanks for the tips.  I was able to make it work by tweaking a JUnit run/debug configuration in IntelliJ.","body":"Thanks for the tips.  I was able to make it work by tweaking a JUnit run/debug configuration in IntelliJ."},{"owner":{"account_id":45002,"reputation":13531,"user_id":132374,"accept_rate":87,"display_name":"Jon Onstott"},"score":0,"creation_date":1309561921,"post_id":6553956,"comment_id":7722921,"body_markdown":"I am thinking that this would not be very efficient for me since I only want to run the unit tests for a specific package... I&#39;d have to run mvn test on the root POM which would run all unit tests","body":"I am thinking that this would not be very efficient for me since I only want to run the unit tests for a specific package... I&#39;d have to run mvn test on the root POM which would run all unit tests"},{"owner":{"account_id":371054,"reputation":24474,"user_id":719363,"accept_rate":75,"display_name":"Alex Gitelman"},"score":0,"creation_date":1309562331,"post_id":6553956,"comment_id":7722964,"body_markdown":"You could always use -Dtest as described here. But if you solved it in Idea - great!","body":"You could always use -Dtest as described here. But if you solved it in Idea - great!"},{"owner":{"account_id":371054,"reputation":24474,"user_id":719363,"accept_rate":75,"display_name":"Alex Gitelman"},"score":0,"creation_date":1309583849,"post_id":6553956,"comment_id":7724801,"body_markdown":"I missed the link to surefire single test page. Here it is http://maven.apache.org/plugins/maven-surefire-plugin/examples/single-test.html Sorry about that.","body":"I missed the link to surefire single test page. Here it is <a href=\"http://maven.apache.org/plugins/maven-surefire-plugin/examples/single-test.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-surefire-plugin/examples/&hellip;</a> Sorry about that."}],"tags":[],"owner":{"account_id":371054,"reputation":24474,"user_id":719363,"accept_rate":75,"display_name":"Alex Gitelman"},"comment_count":4,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1309560901,"creation_date":1309560901,"answer_id":6553956,"question_id":6553881,"body_markdown":"In you run Maven from command line, you will be able to run it with debugger enabled and just attach Idea as remote debugger. That&#39;s how I usually use it.\r\n    \r\n    mvn -Dmaven.surefire.debug=&quot;-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000 -Xnoagent -Djava.compiler=NONE&quot; test\r\n\r\nSee http://maven.apache.org/plugins/maven-surefire-plugin/examples/debugging.html\r\n\r\nThis will allow debugger connection to port 8000 and wait for you to attach before execution.","title":"How can I run the IntelliJ debugger on unit tests in a Maven project?","body":"<p>In you run Maven from command line, you will be able to run it with debugger enabled and just attach Idea as remote debugger. That's how I usually use it.</p>\n\n<pre><code>mvn -Dmaven.surefire.debug=\"-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000 -Xnoagent -Djava.compiler=NONE\" test\n</code></pre>\n\n<p>See <a href=\"http://maven.apache.org/plugins/maven-surefire-plugin/examples/debugging.html\" rel=\"noreferrer\">http://maven.apache.org/plugins/maven-surefire-plugin/examples/debugging.html</a></p>\n\n<p>This will allow debugger connection to port 8000 and wait for you to attach before execution.</p>\n"},{"tags":[],"owner":{"account_id":45002,"reputation":13531,"user_id":132374,"accept_rate":87,"display_name":"Jon Onstott"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1309561503,"creation_date":1309561503,"answer_id":6554013,"question_id":6553881,"body_markdown":"I wanted to run the unit tests for a specific package.\r\n\r\nI was able to get this to work by making a new JUnit run/debug configuration in IntelliJ.  I told it to run the tests in the specific package and for &quot;Use classpath and JDK of module&quot;, I picked the root Maven artifact.","title":"How can I run the IntelliJ debugger on unit tests in a Maven project?","body":"<p>I wanted to run the unit tests for a specific package.</p>\n\n<p>I was able to get this to work by making a new JUnit run/debug configuration in IntelliJ.  I told it to run the tests in the specific package and for \"Use classpath and JDK of module\", I picked the root Maven artifact.</p>\n"},{"tags":[],"owner":{"account_id":2195221,"reputation":327,"user_id":1941095,"display_name":"Suraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695378786,"creation_date":1695378786,"answer_id":77156855,"question_id":6553881,"body_markdown":"Try adding this to the maven command: -DforkCount=0\r\ni.e clean verify -DforkCount=0 ","title":"How can I run the IntelliJ debugger on unit tests in a Maven project?","body":"<p>Try adding this to the maven command: -DforkCount=0\ni.e clean verify -DforkCount=0</p>\n"}],"owner":{"account_id":45002,"reputation":13531,"user_id":132374,"accept_rate":87,"display_name":"Jon Onstott"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21312,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":6554013,"answer_count":3,"score":10,"last_activity_date":1695378786,"creation_date":1309559936,"question_id":6553881,"body_markdown":"I&#39;m working with a multi-artifact Maven project where artifacts in the project have a few dependencies on each other.  I am using IntelliJ 9.  I&#39;d like to be able to set breakpoints in my unit tests, but when I right-click on the unit tests folder for my artifact and choose &quot;Debug &#39;All Tests&#39;&quot;, I get a Class not found exception referring to a class in a separate Maven artifact.\r\n\r\nI can run the Maven &quot;test&quot; goal on the parent artifact and it works fine.\r\n\r\nAny ideas?  Thanks.","title":"How can I run the IntelliJ debugger on unit tests in a Maven project?","body":"<p>I'm working with a multi-artifact Maven project where artifacts in the project have a few dependencies on each other.  I am using IntelliJ 9.  I'd like to be able to set breakpoints in my unit tests, but when I right-click on the unit tests folder for my artifact and choose \"Debug 'All Tests'\", I get a Class not found exception referring to a class in a separate Maven artifact.</p>\n\n<p>I can run the Maven \"test\" goal on the parent artifact and it works fine.</p>\n\n<p>Any ideas?  Thanks.</p>\n"},{"tags":["java","date","datetime"],"comments":[{"owner":{"account_id":130796,"reputation":4377,"user_id":330325,"accept_rate":55,"display_name":"Buddha"},"score":0,"creation_date":1385544174,"post_id":20238280,"comment_id":30182924,"body_markdown":"what is it returning?","body":"what is it returning?"},{"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"score":5,"creation_date":1385544357,"post_id":20238280,"comment_id":30183065,"body_markdown":"UTC is not a specific date format but something like a time zone.","body":"UTC is not a specific date format but something like a time zone."},{"owner":{"account_id":130796,"reputation":4377,"user_id":330325,"accept_rate":55,"display_name":"Buddha"},"score":2,"creation_date":1385544933,"post_id":20238280,"comment_id":30183416,"body_markdown":"do you want to return what time is it in UTC time zone?","body":"do you want to return what time is it in UTC time zone?"}],"answers":[{"tags":[],"owner":{"account_id":1268721,"reputation":2821,"user_id":1225463,"accept_rate":43,"display_name":"benjamin.d"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1385544250,"creation_date":1385544250,"answer_id":20238366,"question_id":20238280,"body_markdown":"Try to format your date with the `Z` or `z` timezone flags:\r\n\r\n    new SimpleDateFormat(&quot;MM/dd/yyyy KK:mm:ss a Z&quot;).format(dateObj);","title":"Date in to UTC format Java","body":"<p>Try to format your date with the <code>Z</code> or <code>z</code> timezone flags:</p>\n\n<pre><code>new SimpleDateFormat(\"MM/dd/yyyy KK:mm:ss a Z\").format(dateObj);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":336942,"reputation":301,"user_id":664894,"accept_rate":42,"display_name":"Steven Solomon"},"score":1,"creation_date":1440795269,"post_id":20238531,"comment_id":52437868,"body_markdown":"sdf.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;)); -- this is exactly what I was looking for","body":"sdf.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;)); -- this is exactly what I was looking for"},{"owner":{"account_id":3418861,"reputation":2258,"user_id":2867041,"display_name":"jox"},"score":2,"creation_date":1449589087,"post_id":20238531,"comment_id":56066552,"body_markdown":"The example is chaotic. &quot;sdf.setTimeZone(...)&quot; comes after &quot;sdf.parse(...)&quot;. And &quot;format(dateObj)&quot; uses a new SimpleDateFormat. So &quot;setTimeZone&quot; has no effect on anything here. It is the correct hint though.","body":"The example is chaotic. &quot;sdf.setTimeZone(...)&quot; comes after &quot;sdf.parse(...)&quot;. And &quot;format(dateObj)&quot; uses a new SimpleDateFormat. So &quot;setTimeZone&quot; has no effect on anything here. It is the correct hint though."}],"tags":[],"owner":{"account_id":130796,"reputation":4377,"user_id":330325,"accept_rate":55,"display_name":"Buddha"},"comment_count":2,"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1519550141,"creation_date":1385544649,"answer_id":20238531,"question_id":20238280,"body_markdown":"Try this... Worked for me and printed `10/22/2013 01:37:56 AM` Ofcourse this is your code only with little modifications.\r\n\r\n    final SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&quot;);\r\n    sdf.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));   // This line converts the given date into UTC time zone\r\n    final java.util.Date dateObj = sdf.parse(&quot;2013-10-22T01:37:56&quot;);\r\n\r\n    aRevisedDate = new SimpleDateFormat(&quot;MM/dd/yyyy KK:mm:ss a&quot;).format(dateObj);\r\n    System.out.println(aRevisedDate);\r\n\r\n    ","title":"Date in to UTC format Java","body":"<p>Try this... Worked for me and printed <code>10/22/2013 01:37:56 AM</code> Ofcourse this is your code only with little modifications.</p>\n\n<pre><code>final SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss\");\nsdf.setTimeZone(TimeZone.getTimeZone(\"UTC\"));   // This line converts the given date into UTC time zone\nfinal java.util.Date dateObj = sdf.parse(\"2013-10-22T01:37:56\");\n\naRevisedDate = new SimpleDateFormat(\"MM/dd/yyyy KK:mm:ss a\").format(dateObj);\nSystem.out.println(aRevisedDate);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1290209,"reputation":994,"user_id":1242461,"display_name":"stan"},"comment_count":0,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1385545088,"creation_date":1385545088,"answer_id":20238698,"question_id":20238280,"body_markdown":"    SimpleDateFormat sdf = new SimpleDateFormat( &quot;yyyy-MM-dd HH:mm:ss&quot; );\r\n    // or SimpleDateFormat sdf = new SimpleDateFormat( &quot;MM/dd/yyyy KK:mm:ss a Z&quot; );\r\n    sdf.setTimeZone( TimeZone.getTimeZone( &quot;UTC&quot; ) );\r\n    System.out.println( sdf.format( new Date() ) );","title":"Date in to UTC format Java","body":"<pre><code>SimpleDateFormat sdf = new SimpleDateFormat( \"yyyy-MM-dd HH:mm:ss\" );\n// or SimpleDateFormat sdf = new SimpleDateFormat( \"MM/dd/yyyy KK:mm:ss a Z\" );\nsdf.setTimeZone( TimeZone.getTimeZone( \"UTC\" ) );\nSystem.out.println( sdf.format( new Date() ) );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1403503535,"creation_date":1403465711,"answer_id":24354957,"question_id":20238280,"body_markdown":"# What Time Zones?\n\nNo where in your question do you mention [time zone][1]. What time zone is implied that input string? What time zone do you want for your output? And, [UTC][2] is a time zone (or lack thereof depending on your mindset) *not a string format*.\n\n# ISO 8601\n\nYour input string is in [ISO 8601][3] format, except that it lacks an [offset from UTC][4]. \n\n# Joda-Time\n\nHere is some example code in [Joda-Time][5] 2.3 to show you how to handle time zones. Joda-Time has built-in default [formatters][6] for parsing and generating String representations of date-time values.\n\n    String input = &quot;2013-10-22T01:37:56&quot;;\n    DateTime dateTimeUtc = new DateTime( input, DateTimeZone.UTC );\n    DateTime dateTimeMontr&#233;al = dateTimeUtc.withZone( DateTimeZone.forID( &quot;America/Montreal&quot; );\n    String output = dateTimeMontr&#233;al.toString();\n\n\nAs for generating string representations in other formats, search StackOverflow for &quot;Joda format&quot;.\n\n\n  [1]: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones\n  [2]: http://en.wikipedia.org/wiki/Coordinated_Universal_Time\n  [3]: http://en.wikipedia.org/wiki/ISO_8601\n  [4]: http://en.wikipedia.org/wiki/ISO_8601#Time_offsets_from_UTC\n  [5]: http://www.joda.org/joda-time/\n  [6]: http://www.joda.org/joda-time/apidocs/org/joda/time/format/DateTimeFormatter.html","title":"Date in to UTC format Java","body":"<h1>What Time Zones?</h1>\n<p>No where in your question do you mention <a href=\"http://en.wikipedia.org/wiki/List_of_tz_database_time_zones\" rel=\"noreferrer\">time zone</a>. What time zone is implied that input string? What time zone do you want for your output? And, <a href=\"http://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"noreferrer\">UTC</a> is a time zone (or lack thereof depending on your mindset) <em>not a string format</em>.</p>\n<h1>ISO 8601</h1>\n<p>Your input string is in <a href=\"http://en.wikipedia.org/wiki/ISO_8601\" rel=\"noreferrer\">ISO 8601</a> format, except that it lacks an <a href=\"http://en.wikipedia.org/wiki/ISO_8601#Time_offsets_from_UTC\" rel=\"noreferrer\">offset from UTC</a>.</p>\n<h1>Joda-Time</h1>\n<p>Here is some example code in <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\">Joda-Time</a> 2.3 to show you how to handle time zones. Joda-Time has built-in default <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/format/DateTimeFormatter.html\" rel=\"noreferrer\">formatters</a> for parsing and generating String representations of date-time values.</p>\n<pre><code>String input = &quot;2013-10-22T01:37:56&quot;;\nDateTime dateTimeUtc = new DateTime( input, DateTimeZone.UTC );\nDateTime dateTimeMontréal = dateTimeUtc.withZone( DateTimeZone.forID( &quot;America/Montreal&quot; );\nString output = dateTimeMontréal.toString();\n</code></pre>\n<p>As for generating string representations in other formats, search StackOverflow for &quot;Joda format&quot;.</p>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1572188558,"creation_date":1572187424,"answer_id":58580395,"question_id":20238280,"body_markdown":"## java.time\r\n\r\nIt’s about time someone provides the modern answer. The modern solution uses java.time, the modern Java date and time API. The classes `SimpleDateFormat` and `Date` used in the question and in a couple of the other answers are poorly designed and long outdated, the former in particular notoriously troublesome. `TimeZone` is poorly designed to. I recommend you avoid those.\r\n\r\n\t\tZoneId utc = ZoneId.of(&quot;Etc/UTC&quot;);\r\n\t\tDateTimeFormatter targetFormatter = DateTimeFormatter.ofPattern(\r\n\t\t\t\t&quot;MM/dd/yyyy hh:mm:ss a zzz&quot;, Locale.ENGLISH);\r\n\t\t\r\n\t\tString itsAlarmDttm = &quot;2013-10-22T01:37:56&quot;;\r\n\t\tZonedDateTime utcDateTime = LocalDateTime.parse(itsAlarmDttm)\r\n\t\t\t\t.atZone(ZoneId.systemDefault())\r\n\t\t\t\t.withZoneSameInstant(utc);\r\n\t\tString formatterUtcDateTime = utcDateTime.format(targetFormatter);\r\n\t\tSystem.out.println(formatterUtcDateTime);\r\n\r\nWhen running in my time zone, Europe/Copenhagen, the output is:\r\n\r\n&gt; 10/21/2013 11:37:56 PM UTC\r\n\r\nI have assumed that the string you got was in the default time zone of your JVM, a fragile assumption since that default setting can be changed at any time from another part of your program or another programming running in the same JVM. If you can, instead specify time zone explicitly, for example `ZoneId.of(&quot;Europe/Podgorica&quot;)` or `ZoneId.of(&quot;Asia/Kolkata&quot;)`.\r\n\r\nI am exploiting the fact that you string is in ISO 8601 format, the format the the modern classes parse as their default, that is, without any explicit formatter.\r\n\r\nI am using a `ZonedDateTime` for the result date-time because it allows us to format it with `UTC` in the formatted string to eliminate any and all doubt. For other purposes one would typically have wanted an `OffsetDateTime` or an `Instant` instead.\r\n\r\n## Links\r\n\r\n - [Oracle tutorial: Date Time](https://docs.oracle.com/javase/tutorial/datetime/) explaining how to use java.time.\r\n - [Wikipedia article: ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)\r\n","title":"Date in to UTC format Java","body":"<h2>java.time</h2>\n\n<p>It’s about time someone provides the modern answer. The modern solution uses java.time, the modern Java date and time API. The classes <code>SimpleDateFormat</code> and <code>Date</code> used in the question and in a couple of the other answers are poorly designed and long outdated, the former in particular notoriously troublesome. <code>TimeZone</code> is poorly designed to. I recommend you avoid those.</p>\n\n<pre><code>    ZoneId utc = ZoneId.of(\"Etc/UTC\");\n    DateTimeFormatter targetFormatter = DateTimeFormatter.ofPattern(\n            \"MM/dd/yyyy hh:mm:ss a zzz\", Locale.ENGLISH);\n\n    String itsAlarmDttm = \"2013-10-22T01:37:56\";\n    ZonedDateTime utcDateTime = LocalDateTime.parse(itsAlarmDttm)\n            .atZone(ZoneId.systemDefault())\n            .withZoneSameInstant(utc);\n    String formatterUtcDateTime = utcDateTime.format(targetFormatter);\n    System.out.println(formatterUtcDateTime);\n</code></pre>\n\n<p>When running in my time zone, Europe/Copenhagen, the output is:</p>\n\n<blockquote>\n  <p>10/21/2013 11:37:56 PM UTC</p>\n</blockquote>\n\n<p>I have assumed that the string you got was in the default time zone of your JVM, a fragile assumption since that default setting can be changed at any time from another part of your program or another programming running in the same JVM. If you can, instead specify time zone explicitly, for example <code>ZoneId.of(\"Europe/Podgorica\")</code> or <code>ZoneId.of(\"Asia/Kolkata\")</code>.</p>\n\n<p>I am exploiting the fact that you string is in ISO 8601 format, the format the the modern classes parse as their default, that is, without any explicit formatter.</p>\n\n<p>I am using a <code>ZonedDateTime</code> for the result date-time because it allows us to format it with <code>UTC</code> in the formatted string to eliminate any and all doubt. For other purposes one would typically have wanted an <code>OffsetDateTime</code> or an <code>Instant</code> instead.</p>\n\n<h2>Links</h2>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Oracle tutorial: Date Time</a> explaining how to use java.time.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">Wikipedia article: ISO 8601</a></li>\n</ul>\n"}],"owner":{"account_id":1815974,"reputation":1458,"user_id":1651042,"accept_rate":50,"display_name":"MadTech"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163290,"favorite_count":0,"down_vote_count":1,"up_vote_count":22,"accepted_answer_id":20238366,"answer_count":5,"score":21,"last_activity_date":1695378701,"creation_date":1385544029,"question_id":20238280,"body_markdown":"I have a string like this `2013-10-22T01:37:56`. I Need to change this string into UTC Date format like this `MM/dd/yyyy KK:mm:ss a`. I have tried some code but it is not returning the UTC datetime.\r\n\r\nMy code is\r\n\r\n            String[] time = itsAlarmDttm.split(&quot;T&quot;);\r\n    \t\tString aFormatDate = time[0]+ &quot; &quot;+time[1];\r\n    \t\tString aRevisedDate = null;\r\n    \t\ttry {\r\n    \t\t    final SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n    \t\t    final Date dateObj = sdf.parse(aFormatDate);\r\n    \t\t    aRevisedDate = new SimpleDateFormat(&quot;MM/dd/yyyy KK:mm:ss a&quot;).format(dateObj);\r\n    \t\t    System.out.println(aRevisedDate);\r\n    \t\t} catch (ParseException e) {\r\n    \t\t    itsLogger.error(&quot;Error occured in Parsing the Data Time Object:  &quot; +e.getMessage());\r\n    \t\t} catch (Exception e) {\r\n    \t\t\titsLogger.error(&quot;Error occured in Data Time Objecct:  &quot; +e.getMessage());\r\n    \t\t}\r\n\r\n\r\nI am getting the output is `MM/dd/yyyy KK:mm:ss a` format. But Not UTC time format.\r\nHow to solve this issue?","title":"Date in to UTC format Java","body":"<p>I have a string like this <code>2013-10-22T01:37:56</code>. I Need to change this string into UTC Date format like this <code>MM/dd/yyyy KK:mm:ss a</code>. I have tried some code but it is not returning the UTC datetime.</p>\n\n<p>My code is</p>\n\n<pre><code>        String[] time = itsAlarmDttm.split(\"T\");\n        String aFormatDate = time[0]+ \" \"+time[1];\n        String aRevisedDate = null;\n        try {\n            final SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n            final Date dateObj = sdf.parse(aFormatDate);\n            aRevisedDate = new SimpleDateFormat(\"MM/dd/yyyy KK:mm:ss a\").format(dateObj);\n            System.out.println(aRevisedDate);\n        } catch (ParseException e) {\n            itsLogger.error(\"Error occured in Parsing the Data Time Object:  \" +e.getMessage());\n        } catch (Exception e) {\n            itsLogger.error(\"Error occured in Data Time Objecct:  \" +e.getMessage());\n        }\n</code></pre>\n\n<p>I am getting the output is <code>MM/dd/yyyy KK:mm:ss a</code> format. But Not UTC time format.\nHow to solve this issue?</p>\n"},{"tags":["java","amazon-web-services","amazon-quicksight"],"owner":{"account_id":29423450,"reputation":11,"user_id":22544725,"display_name":"Ilyasse hanafi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1695378409,"creation_date":1695378373,"question_id":77156807,"body_markdown":"I am trying to update a DataSet using JAVA code in a JUNIT test class.\r\nI get the dataSet updated except the attribute &quot;dataSetUsageConfiguration&quot;.\r\nI wonder if there is a condition/ limitation while updating dataSets on quicksight.\r\nHere&#39;s My code :\r\n\r\n    `@Test\r\n    public void ModifyDataSet() {\r\n        List&lt;InputColumn&gt; inputColumns = new ArrayList&lt;&gt;();\r\n        List&lt;TransformOperation&gt; dataTransforms = new ArrayList&lt;&gt;();\r\n        Map&lt;String, PhysicalTable&gt; physicalTableMap = new HashMap&lt;&gt;();\r\n        Map&lt;String, LogicalTable&gt; logicalTableMap = new HashMap&lt;&gt;();\r\n        inputColumns.add(InputColumn.builder().name(&quot;id&quot;).type(&quot;STRING&quot;).build());\r\n        dataTransforms.add(TransformOperation\r\n            .builder()\r\n            .projectOperation(\r\n                ProjectOperation\r\n                    .builder()\r\n                    .projectedColumns(&quot;id&quot;).build()).build());\r\n        physicalTableMap\r\n            .put(\r\n                &quot;KEY&quot;,\r\n                PhysicalTable\r\n                    .builder()\r\n                    .relationalTable(\r\n                        RelationalTable\r\n                            .builder()\r\n                            .dataSourceArn(\r\n                                &quot;my_data_source_ARN&quot;)\r\n                            .schema(&quot;my_schema&quot;).name(&quot;name&quot;)\r\n                            .inputColumns(inputColumns).build()).build());\r\n        logicalTableMap.put(\r\n            &quot;key&quot;,\r\n            LogicalTable\r\n                .builder()\r\n                .alias(&quot;alias&quot;)\r\n                .dataTransforms(dataTransforms)\r\n                .source(\r\n                    LogicalTableSource.builder()\r\n                        .physicalTableId(&quot;physicalTableID&quot;).build()).build());\r\n        // the attribute doesn&#39;t get updated (except when we change it through the quicksight interface )\r\n        DataSetUsageConfiguration dataSetUsageConfig =\r\n            DataSetUsageConfiguration.builder().disableUseAsImportedSource(true)\r\n                .disableUseAsDirectQuerySource(true).build();\r\n\r\n        UpdateDataSetRequest updateDataSetRequest =\r\n            UpdateDataSetRequest.builder().awsAccountId(&quot;awsAccountId&quot;)\r\n                .dataSetId(&quot;dataSetId&quot;)\r\n                .physicalTableMap(physicalTableMap).logicalTableMap(logicalTableMap)\r\n                .dataSetUsageConfiguration(dataSetUsageConfig).name(&quot;name&quot;)\r\n                .importMode(&quot;importMode&quot;).build();\r\n        UpdateDataSetResponse response = this.quickSightClient.updateDataSet(updateDataSetRequest);\r\n\r\n        DescribeDataSetResponse reponse =\r\n            this.quickSightClient.describeDataSet(DescribeDataSetRequest.builder()\r\n                .awsAccountId(&quot;awsAccountId&quot;).dataSetId(&quot;dataSetId&quot;)\r\n                .build());\r\n        \r\n        Assert.assertEquals(reponse.dataSet().name(), &quot;name&quot;);\r\n        Assert.assertTrue(reponse.dataSet().dataSetUsageConfiguration()\r\n        .disableUseAsDirectQuerySource());\r\n        Assert.assertTrue(reponse.dataSet().dataSetUsageConfiguration()\r\n        .disableUseAsImportedSource());`\r\n\r\n\r\n\r\n\r\nThe test class fails since the Assert is wrong.\r\nI also tested that using the cli and the same issue.\r\ni only get to update this parameter when im using the quicksight interface.","title":"Amazon Quicksight API UpdateDataSet doesn&#39;t update the attribute DataSetUsageConfiguration","body":"<p>I am trying to update a DataSet using JAVA code in a JUNIT test class.\nI get the dataSet updated except the attribute &quot;dataSetUsageConfiguration&quot;.\nI wonder if there is a condition/ limitation while updating dataSets on quicksight.\nHere's My code :</p>\n<pre><code>`@Test\npublic void ModifyDataSet() {\n    List&lt;InputColumn&gt; inputColumns = new ArrayList&lt;&gt;();\n    List&lt;TransformOperation&gt; dataTransforms = new ArrayList&lt;&gt;();\n    Map&lt;String, PhysicalTable&gt; physicalTableMap = new HashMap&lt;&gt;();\n    Map&lt;String, LogicalTable&gt; logicalTableMap = new HashMap&lt;&gt;();\n    inputColumns.add(InputColumn.builder().name(&quot;id&quot;).type(&quot;STRING&quot;).build());\n    dataTransforms.add(TransformOperation\n        .builder()\n        .projectOperation(\n            ProjectOperation\n                .builder()\n                .projectedColumns(&quot;id&quot;).build()).build());\n    physicalTableMap\n        .put(\n            &quot;KEY&quot;,\n            PhysicalTable\n                .builder()\n                .relationalTable(\n                    RelationalTable\n                        .builder()\n                        .dataSourceArn(\n                            &quot;my_data_source_ARN&quot;)\n                        .schema(&quot;my_schema&quot;).name(&quot;name&quot;)\n                        .inputColumns(inputColumns).build()).build());\n    logicalTableMap.put(\n        &quot;key&quot;,\n        LogicalTable\n            .builder()\n            .alias(&quot;alias&quot;)\n            .dataTransforms(dataTransforms)\n            .source(\n                LogicalTableSource.builder()\n                    .physicalTableId(&quot;physicalTableID&quot;).build()).build());\n    // the attribute doesn't get updated (except when we change it through the quicksight interface )\n    DataSetUsageConfiguration dataSetUsageConfig =\n        DataSetUsageConfiguration.builder().disableUseAsImportedSource(true)\n            .disableUseAsDirectQuerySource(true).build();\n\n    UpdateDataSetRequest updateDataSetRequest =\n        UpdateDataSetRequest.builder().awsAccountId(&quot;awsAccountId&quot;)\n            .dataSetId(&quot;dataSetId&quot;)\n            .physicalTableMap(physicalTableMap).logicalTableMap(logicalTableMap)\n            .dataSetUsageConfiguration(dataSetUsageConfig).name(&quot;name&quot;)\n            .importMode(&quot;importMode&quot;).build();\n    UpdateDataSetResponse response = this.quickSightClient.updateDataSet(updateDataSetRequest);\n\n    DescribeDataSetResponse reponse =\n        this.quickSightClient.describeDataSet(DescribeDataSetRequest.builder()\n            .awsAccountId(&quot;awsAccountId&quot;).dataSetId(&quot;dataSetId&quot;)\n            .build());\n    \n    Assert.assertEquals(reponse.dataSet().name(), &quot;name&quot;);\n    Assert.assertTrue(reponse.dataSet().dataSetUsageConfiguration()\n    .disableUseAsDirectQuerySource());\n    Assert.assertTrue(reponse.dataSet().dataSetUsageConfiguration()\n    .disableUseAsImportedSource());`\n</code></pre>\n<p>The test class fails since the Assert is wrong.\nI also tested that using the cli and the same issue.\ni only get to update this parameter when im using the quicksight interface.</p>\n"},{"tags":["java","spring","hibernate","hikaricp","dialect"],"comments":[{"owner":{"account_id":11884699,"reputation":497,"user_id":8697412,"display_name":"Barracuda"},"score":0,"creation_date":1632759014,"post_id":69349713,"comment_id":122574141,"body_markdown":"What do you mean by multitenant code?","body":"What do you mean by multitenant code?"},{"owner":{"account_id":19670476,"reputation":207,"user_id":14399829,"display_name":"effedici"},"score":0,"creation_date":1632759576,"post_id":69349713,"comment_id":122574354,"body_markdown":"I have an all-in-one architecture: the same instance of the software and the same MySQL can be used with different tenants.\nEach tenant is identified by an input parameter which is mapped with a set of configurations (e.g.: the credentials and URL of the tenant&#39;s DB).\nEach tenant can be used to connect only to its DB (but all tenants are on the same instance of MySQL.\n\nIn the future, I would like to have one tenant on MySQL, one on PostgresSQL, and one on SQL server but all inside the same instance of the software.","body":"I have an all-in-one architecture: the same instance of the software and the same MySQL can be used with different tenants. Each tenant is identified by an input parameter which is mapped with a set of configurations (e.g.: the credentials and URL of the tenant&#39;s DB). Each tenant can be used to connect only to its DB (but all tenants are on the same instance of MySQL.  In the future, I would like to have one tenant on MySQL, one on PostgresSQL, and one on SQL server but all inside the same instance of the software."},{"owner":{"account_id":11884699,"reputation":497,"user_id":8697412,"display_name":"Barracuda"},"score":0,"creation_date":1632766875,"post_id":69349713,"comment_id":122577063,"body_markdown":"sorry , it&#39;s still hard for me to grasp my head around multitenant code. Maybe you need to put a dialect inside a properties file, add this properties file as a property source to the spring&#39;s environment abstraction and then use PropertySourcesPlaceholderConfigurer in combination with Value annotation inside your configuration class to set appropriate dialect. Then for each tenant you would have a different properties file.","body":"sorry , it&#39;s still hard for me to grasp my head around multitenant code. Maybe you need to put a dialect inside a properties file, add this properties file as a property source to the spring&#39;s environment abstraction and then use PropertySourcesPlaceholderConfigurer in combination with Value annotation inside your configuration class to set appropriate dialect. Then for each tenant you would have a different properties file."},{"owner":{"account_id":19670476,"reputation":207,"user_id":14399829,"display_name":"effedici"},"score":0,"creation_date":1632827580,"post_id":69349713,"comment_id":122593288,"body_markdown":"I do not understand...how can I set dynamically the dialect?\nHow can the same instance of the software switch from one to the other?","body":"I do not understand...how can I set dynamically the dialect? How can the same instance of the software switch from one to the other?"},{"owner":{"account_id":11884699,"reputation":497,"user_id":8697412,"display_name":"Barracuda"},"score":0,"creation_date":1632836744,"post_id":69349713,"comment_id":122597592,"body_markdown":"when in your program do you have a need to change dialect? If your program works with multiple databases at the same time, then maybe you can declare EntityManager for each with a different dialect.","body":"when in your program do you have a need to change dialect? If your program works with multiple databases at the same time, then maybe you can declare EntityManager for each with a different dialect."},{"owner":{"account_id":19670476,"reputation":207,"user_id":14399829,"display_name":"effedici"},"score":0,"creation_date":1632838266,"post_id":69349713,"comment_id":122598405,"body_markdown":"yes, I agree.\nWhat I do not understand is how can I tell when using one EntityManager (MySQL) and when the other one (Postgres or MsSQL).\n\nI was looking to this [solution](https://stackoverflow.com/questions/60796798/dynamically-set-hibernate-dialect-properties-in-spring-boot)\nbut is a little bit different because it discriminates the entities (each entity has its own DB) in my case all entities are on all DBs. Is the tenant that discriminate.","body":"yes, I agree. What I do not understand is how can I tell when using one EntityManager (MySQL) and when the other one (Postgres or MsSQL).  I was looking to this <a href=\"https://stackoverflow.com/questions/60796798/dynamically-set-hibernate-dialect-properties-in-spring-boot\">solution</a> but is a little bit different because it discriminates the entities (each entity has its own DB) in my case all entities are on all DBs. Is the tenant that discriminate."},{"owner":{"account_id":11884699,"reputation":497,"user_id":8697412,"display_name":"Barracuda"},"score":0,"creation_date":1632839417,"post_id":69349713,"comment_id":122598991,"body_markdown":"sorry, I can&#39;t really think something. To be honest , I still don&#39;t quite understand that meaning of tenant and what it means in your case: do you have multiple, let&#39;s say, web applications instances that each uses different dialect or inside your application do you have multiple services/layers that each use different dialect?","body":"sorry, I can&#39;t really think something. To be honest , I still don&#39;t quite understand that meaning of tenant and what it means in your case: do you have multiple, let&#39;s say, web applications instances that each uses different dialect or inside your application do you have multiple services/layers that each use different dialect?"},{"owner":{"account_id":19670476,"reputation":207,"user_id":14399829,"display_name":"effedici"},"score":0,"creation_date":1632839882,"post_id":69349713,"comment_id":122599248,"body_markdown":"I have one instance that should be able to connect to different dialects to execute the operations.\n\nSee the &quot;tenant&quot; as an input token that identifies the DB to be used for the operation (and classifies the users). If is tenant=A &gt; go to MySQL, if is tenant=B &gt; to to MsSQL, etc.\n\n All DBs have the same tables but with different data inside: people of tenant A cannot see the data of people of tenant B.","body":"I have one instance that should be able to connect to different dialects to execute the operations.  See the &quot;tenant&quot; as an input token that identifies the DB to be used for the operation (and classifies the users). If is tenant=A &gt; go to MySQL, if is tenant=B &gt; to to MsSQL, etc.   All DBs have the same tables but with different data inside: people of tenant A cannot see the data of people of tenant B."},{"owner":{"account_id":19670476,"reputation":207,"user_id":14399829,"display_name":"effedici"},"score":0,"creation_date":1632840273,"post_id":69349713,"comment_id":122599454,"body_markdown":"@Barracuda I&#39;ve tried to declare an entity EntityManager for each dialect but it fails with &quot;expected single matching bean but found 2&quot; (see the main message per further details)","body":"@Barracuda I&#39;ve tried to declare an entity EntityManager for each dialect but it fails with &quot;expected single matching bean but found 2&quot; (see the main message per further details)"},{"owner":{"account_id":11884699,"reputation":497,"user_id":8697412,"display_name":"Barracuda"},"score":0,"creation_date":1632840367,"post_id":69349713,"comment_id":122599505,"body_markdown":"Maybe you can declare your classes to use a Map&lt;String,EntityManager&gt; where map keys are going to be the tokens you are taking about.","body":"Maybe you can declare your classes to use a Map&lt;String,EntityManager&gt; where map keys are going to be the tokens you are taking about."},{"owner":{"account_id":11884699,"reputation":497,"user_id":8697412,"display_name":"Barracuda"},"score":0,"creation_date":1632840453,"post_id":69349713,"comment_id":122599560,"body_markdown":"Or, if you don&#39;t want to change your services to use maps, declare some other type of Map with services as values, for example.","body":"Or, if you don&#39;t want to change your services to use maps, declare some other type of Map with services as values, for example."}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634189870,"creation_date":1634189870,"answer_id":69565562,"question_id":69349713,"body_markdown":"That&#39;s not really possible as the dialect affects certain quoting rules etc. which you can&#39;t just &quot;swap out&quot; at runtime based on a tenant identifier. Just create two persistence units, each pointing to a different data source for every database type. You will have to somehow lookup the appropriate `EntityManager`/`EntityManagerFactory` based on your tenant identifier which makes it a bit harder when you want to use Spring Data JPA as that requires a compilation static name reference for the entity manager factory. Maybe you can create a custom `EntityManagerFactory` that delegates all method calls to the appropriate instance based on the tenant identifier. Overall, this is not so easy and you will probably have to do a lot of trial and error.\r\n\r\nIMO it would be better to have a separate application deployment with separate configuration if possible per database type.","title":"Dynamic dialect with Hibernate and Hikari","body":"<p>That's not really possible as the dialect affects certain quoting rules etc. which you can't just &quot;swap out&quot; at runtime based on a tenant identifier. Just create two persistence units, each pointing to a different data source for every database type. You will have to somehow lookup the appropriate <code>EntityManager</code>/<code>EntityManagerFactory</code> based on your tenant identifier which makes it a bit harder when you want to use Spring Data JPA as that requires a compilation static name reference for the entity manager factory. Maybe you can create a custom <code>EntityManagerFactory</code> that delegates all method calls to the appropriate instance based on the tenant identifier. Overall, this is not so easy and you will probably have to do a lot of trial and error.</p>\n<p>IMO it would be better to have a separate application deployment with separate configuration if possible per database type.</p>\n"},{"comments":[{"owner":{"account_id":1000532,"reputation":956,"user_id":1015482,"accept_rate":70,"display_name":"regisxp"},"score":0,"creation_date":1695376741,"post_id":71184162,"comment_id":136019332,"body_markdown":"Awesome! Your video pointed me in the right direction. But, creating a `EntityManagerFactory` generated some problems with another libs, like Hazelcast. The aproach I used is detailed bellow.","body":"Awesome! Your video pointed me in the right direction. But, creating a <code>EntityManagerFactory</code> generated some problems with another libs, like Hazelcast. The aproach I used is detailed bellow."}],"tags":[],"owner":{"account_id":24309347,"reputation":11,"user_id":18251625,"display_name":"Tsvetelin Yakimov"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645267109,"creation_date":1645267109,"answer_id":71184162,"question_id":69349713,"body_markdown":"I finally managed to find a solution for this problem.\r\nI managed to get around the problem with the dialects by having an entity manager factory for each dialect (in this case MySQL, Postgres and MS SQL Server).\r\n\r\nCreate a bean for EntityManagerFactory and return a proxy of that interface and in the handler, based on your logic, you can switch which emf to use to suit the used data source.\r\n\r\nI have created a video for this because it seems like there is no documentation online.\r\n\r\n[Session Scoped Connection][1]\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=mcHoaPIiL6w\r\n\r\nIt is pretty similar to what you&#39;re trying to achieve but in my case the users are providing the credentials, so it&#39;s even more complicated.","title":"Dynamic dialect with Hibernate and Hikari","body":"<p>I finally managed to find a solution for this problem.\nI managed to get around the problem with the dialects by having an entity manager factory for each dialect (in this case MySQL, Postgres and MS SQL Server).</p>\n<p>Create a bean for EntityManagerFactory and return a proxy of that interface and in the handler, based on your logic, you can switch which emf to use to suit the used data source.</p>\n<p>I have created a video for this because it seems like there is no documentation online.</p>\n<p><a href=\"https://www.youtube.com/watch?v=mcHoaPIiL6w\" rel=\"nofollow noreferrer\">Session Scoped Connection</a></p>\n<p>It is pretty similar to what you're trying to achieve but in my case the users are providing the credentials, so it's even more complicated.</p>\n"},{"tags":[],"owner":{"account_id":1000532,"reputation":956,"user_id":1015482,"accept_rate":70,"display_name":"regisxp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695378210,"creation_date":1695378210,"answer_id":77156787,"question_id":69349713,"body_markdown":"@Tsvetelin answer pointed me on the right direction, but, after applying it, I started having problems with another libs, like Hazelcast that was being user as second level cache.\r\n\r\nSo, this is what I did:\r\n\r\n1) Instead of creating a `EntityManagerFactory` bean, I created a `LocalContainerEntityManagerFactoryBean` that instantiates a `DynamicTenantEntityManagerFactoryBean`.\r\n\r\n        @Bean\r\n        public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n        \r\n            DynamicTenantEntityManagerFactoryBean em = new DynamicTenantEntityManagerFactoryBean();\r\n            em.setPackagesToScan(getPackagesToScan());\r\n            em.setJpaProperties(additionalProperties());\r\n            em.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\r\n            return em;\r\n        \r\n        }\r\n\r\n`getPackagesToScan()` and `additionalProperties()` are functions that reads the parameters that was set by Spring Boot on the application context.\r\n        \r\n    \r\n    private String[] getPackagesToScan() {\r\n\r\n        //Check if the defaults packagesToScan needs to be overrided\r\n        String[] packagesToScan = dynamicTenantRoutingPropertiesConfig.getPackagesToScan();\r\n\r\n        if (packagesToScan == null) {\r\n\r\n            List&lt;String&gt; packageNames = EntityScanPackages.get(context).getPackageNames();\r\n            if (packageNames.isEmpty() &amp;&amp; AutoConfigurationPackages.has(context)) {\r\n                packageNames = AutoConfigurationPackages.get(context);\r\n            }\r\n\r\n            packagesToScan = packageNames.toArray(new String[0]);\r\n\r\n        }\r\n\r\n        return packagesToScan;\r\n\r\n    }\r\n\r\n    private Properties additionalProperties() {\r\n        \r\n        //jpaProperties is an Autowired bean of type \r\n        //org.springframework.boot.autoconfigure.orm.jpa.JpaProperties\r\n\r\n        final Properties properties = new Properties();\r\n        properties.putAll(jpaProperties.getProperties());\r\n        return properties;\r\n    }\r\n\r\n\r\n\r\n\r\n`DynamicTenantEntityManagerFactoryBean` extends `LocalContainerEntityManagerFactoryBean` and overrides `createNativeEntityManagerFactory()`, using the same technique as @tsvetelin-yakimov\r\n\r\n    @Log4j2\r\n    @Configurable\r\n    public class DynamicTenantEntityManagerFactoryBean extends LocalContainerEntityManagerFactoryBean {\r\n\r\n        @Autowired\r\n        private ApplicationContext context;\r\n\r\n        @PostConstruct\r\n        public void postConstruct() {\r\n\r\n            //Obtem a referencia para o Datasource\r\n            AbstractDynamicTenantRoutingDataSource dataSource\r\n                    = context.getBean(AbstractDynamicTenantRoutingDataSource.class);\r\n\r\n            //Define o Datasource\r\n            this.setDataSource(dataSource);\r\n\r\n        }\r\n\r\n\r\n        @Override\r\n        protected EntityManagerFactory createNativeEntityManagerFactory() throws PersistenceException {\r\n\r\n            log.info(&quot;(DynamicTenantEntityManagerFactory): Iniciando Proxy...&quot;);\r\n            final int hashcode = UUID.randomUUID().toString().hashCode();\r\n            final Map&lt;String, EntityManagerFactory&gt; entityManagerFactoryMap = new HashMap&lt;&gt;();\r\n\r\n\r\n            Object emf = Proxy.newProxyInstance(\r\n                    Thread.currentThread().getContextClassLoader(),\r\n                    new Class[]{SessionFactory.class},\r\n                    (proxy, method, args) -&gt; {\r\n\r\n                        if (method.getName().equals(&quot;hashCode&quot;)) {\r\n                            return hashcode;\r\n                        }\r\n\r\n                        if (method.getName().equals(&quot;equals&quot;)) {\r\n                            return proxy == args[0];\r\n                        }\r\n\r\n                        //Verifica se o DataSource esta preenchido\r\n                        if (this.getDataSource() == null)\r\n                            throw new PersistenceException(&quot;O DataSource n&#227;o pode ser nulo&quot;);\r\n\r\n                        //Verifica se ja temos o EntityManager para esse Datasource\r\n                        String currentDriver = ((AbstractDynamicTenantRoutingDataSource) this.getDataSource()).resolveCurrentDriver();\r\n                        EntityManagerFactory instance = entityManagerFactoryMap.get(currentDriver);\r\n\r\n                        if (instance == null) {\r\n\r\n                            //Obtem o dialeto\r\n                            Dialect dialect = ((AbstractDynamicTenantRoutingDataSource) this.getDataSource()).resolveDialect(currentDriver);\r\n\r\n                            log.info(\r\n                                    &quot;(DynamicTenantEntityManagerFactory): Iniciando EntityManagerFactory para Driver {} Dialeto {}...&quot;,\r\n                                    currentDriver,\r\n                                    dialect\r\n                            );\r\n\r\n                            instance = this.createEntityManagerFactory(\r\n                                    dialect\r\n                            );\r\n\r\n                            entityManagerFactoryMap.put(\r\n                                    currentDriver,\r\n                                    instance\r\n                            );\r\n\r\n                        }\r\n\r\n                        log.debug(\r\n                                &quot;(DynamicTenantEntityManagerFactory): Retornando EntityManagerFactory para Driver {}...&quot;,\r\n                                currentDriver\r\n                        );\r\n                        return method.invoke(instance);\r\n\r\n                    }\r\n            );\r\n\r\n            log.info(&quot;(DynamicTenantEntityManagerFactory): Iniciando Proxy... Concluido!&quot;);\r\n            return (SessionFactory) emf;\r\n\r\n        }\r\n\r\n        private EntityManagerFactory createEntityManagerFactory(Dialect dialect) {\r\n\r\n            EntityManagerFactory factory = super.createNativeEntityManagerFactory();\r\n            factory\r\n                    .getProperties()\r\n                    .put(&quot;hibernate.dialect&quot;, dialect.getClass().getName());\r\n\r\n            return factory;\r\n\r\n        }\r\n\r\n    }\r\n\r\n","title":"Dynamic dialect with Hibernate and Hikari","body":"<p>@Tsvetelin answer pointed me on the right direction, but, after applying it, I started having problems with another libs, like Hazelcast that was being user as second level cache.</p>\n<p>So, this is what I did:</p>\n<ol>\n<li><p>Instead of creating a <code>EntityManagerFactory</code> bean, I created a <code>LocalContainerEntityManagerFactoryBean</code> that instantiates a <code>DynamicTenantEntityManagerFactoryBean</code>.</p>\n<pre><code> @Bean\n public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n\n     DynamicTenantEntityManagerFactoryBean em = new DynamicTenantEntityManagerFactoryBean();\n     em.setPackagesToScan(getPackagesToScan());\n     em.setJpaProperties(additionalProperties());\n     em.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\n     return em;\n\n }\n</code></pre>\n</li>\n</ol>\n<p><code>getPackagesToScan()</code> and <code>additionalProperties()</code> are functions that reads the parameters that was set by Spring Boot on the application context.</p>\n<pre><code>private String[] getPackagesToScan() {\n\n    //Check if the defaults packagesToScan needs to be overrided\n    String[] packagesToScan = dynamicTenantRoutingPropertiesConfig.getPackagesToScan();\n\n    if (packagesToScan == null) {\n\n        List&lt;String&gt; packageNames = EntityScanPackages.get(context).getPackageNames();\n        if (packageNames.isEmpty() &amp;&amp; AutoConfigurationPackages.has(context)) {\n            packageNames = AutoConfigurationPackages.get(context);\n        }\n\n        packagesToScan = packageNames.toArray(new String[0]);\n\n    }\n\n    return packagesToScan;\n\n}\n\nprivate Properties additionalProperties() {\n    \n    //jpaProperties is an Autowired bean of type \n    //org.springframework.boot.autoconfigure.orm.jpa.JpaProperties\n\n    final Properties properties = new Properties();\n    properties.putAll(jpaProperties.getProperties());\n    return properties;\n}\n</code></pre>\n<p><code>DynamicTenantEntityManagerFactoryBean</code> extends <code>LocalContainerEntityManagerFactoryBean</code> and overrides <code>createNativeEntityManagerFactory()</code>, using the same technique as @tsvetelin-yakimov</p>\n<pre><code>@Log4j2\n@Configurable\npublic class DynamicTenantEntityManagerFactoryBean extends LocalContainerEntityManagerFactoryBean {\n\n    @Autowired\n    private ApplicationContext context;\n\n    @PostConstruct\n    public void postConstruct() {\n\n        //Obtem a referencia para o Datasource\n        AbstractDynamicTenantRoutingDataSource dataSource\n                = context.getBean(AbstractDynamicTenantRoutingDataSource.class);\n\n        //Define o Datasource\n        this.setDataSource(dataSource);\n\n    }\n\n\n    @Override\n    protected EntityManagerFactory createNativeEntityManagerFactory() throws PersistenceException {\n\n        log.info(&quot;(DynamicTenantEntityManagerFactory): Iniciando Proxy...&quot;);\n        final int hashcode = UUID.randomUUID().toString().hashCode();\n        final Map&lt;String, EntityManagerFactory&gt; entityManagerFactoryMap = new HashMap&lt;&gt;();\n\n\n        Object emf = Proxy.newProxyInstance(\n                Thread.currentThread().getContextClassLoader(),\n                new Class[]{SessionFactory.class},\n                (proxy, method, args) -&gt; {\n\n                    if (method.getName().equals(&quot;hashCode&quot;)) {\n                        return hashcode;\n                    }\n\n                    if (method.getName().equals(&quot;equals&quot;)) {\n                        return proxy == args[0];\n                    }\n\n                    //Verifica se o DataSource esta preenchido\n                    if (this.getDataSource() == null)\n                        throw new PersistenceException(&quot;O DataSource não pode ser nulo&quot;);\n\n                    //Verifica se ja temos o EntityManager para esse Datasource\n                    String currentDriver = ((AbstractDynamicTenantRoutingDataSource) this.getDataSource()).resolveCurrentDriver();\n                    EntityManagerFactory instance = entityManagerFactoryMap.get(currentDriver);\n\n                    if (instance == null) {\n\n                        //Obtem o dialeto\n                        Dialect dialect = ((AbstractDynamicTenantRoutingDataSource) this.getDataSource()).resolveDialect(currentDriver);\n\n                        log.info(\n                                &quot;(DynamicTenantEntityManagerFactory): Iniciando EntityManagerFactory para Driver {} Dialeto {}...&quot;,\n                                currentDriver,\n                                dialect\n                        );\n\n                        instance = this.createEntityManagerFactory(\n                                dialect\n                        );\n\n                        entityManagerFactoryMap.put(\n                                currentDriver,\n                                instance\n                        );\n\n                    }\n\n                    log.debug(\n                            &quot;(DynamicTenantEntityManagerFactory): Retornando EntityManagerFactory para Driver {}...&quot;,\n                            currentDriver\n                    );\n                    return method.invoke(instance);\n\n                }\n        );\n\n        log.info(&quot;(DynamicTenantEntityManagerFactory): Iniciando Proxy... Concluido!&quot;);\n        return (SessionFactory) emf;\n\n    }\n\n    private EntityManagerFactory createEntityManagerFactory(Dialect dialect) {\n\n        EntityManagerFactory factory = super.createNativeEntityManagerFactory();\n        factory\n                .getProperties()\n                .put(&quot;hibernate.dialect&quot;, dialect.getClass().getName());\n\n        return factory;\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":19670476,"reputation":207,"user_id":14399829,"display_name":"effedici"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":862,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1695378210,"creation_date":1632758317,"question_id":69349713,"body_markdown":"I am new at Hibernate.\r\nInto my code, the connection to the DB is managed with the Hikari data source.\r\n\r\nMy code is right now multitenant, but it manages the same hibernate dialect for all tenants.\r\n\r\n**Is it possible to create a configuration where each tenant can use a different dialect?**\r\nThe type of dialect can be provided as a tenant&#39;s property.\r\n\r\n----\r\nThis is an example of the entityManagerFactory:\r\n```java\r\n     @Bean\r\n     public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n\r\n        Map&lt;String, Object&gt; jpaProperties = new HashMap&lt;&gt;();\r\n        jpaProperties.put(..., ...);\r\n        jpaProperties.put(org.hibernate.cfg.Environment.DIALECT, &quot;myDialect&quot;);\r\n        \r\n        LocalContainerEntityManagerFactoryBean emfBean = new LocalContainerEntityManagerFactoryBean();\r\n        emfBean.setPackagesToScan(new String[] {MyEntity.class.getPackage().getName()});\r\n        emfBean.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\r\n        emfBean.setJpaPropertyMap(jpaProperties);\r\n        return emfBean;\r\n    }\r\n```\r\n\r\n-----\r\n**Edit**\r\n\r\nI was looking to this [solution][1]: it suggests to create a duplicated LocalContainerEntityManagerFactoryBean for each dialect.\r\nWhat I do not understand is how can I tell when using one EntityManager (MySQL) and when the other one (Postgres or MsSQL): the [solution][1] discriminates the entities (each entity has its own DB) but in my case, all entities are on all DBs. Is the tenant that discriminates.\r\n\r\nFor example: if I create a second instance of LocalContainerEntityManagerFactoryBean (i.e. msSQLEntityManagerFactory()) with setted the dialect for SQL Server, the application fails to start with:\r\n```log\r\nApplication failed to start due to an exceptionorg.springframework.beans.factory.NoUniqueBeanDefinitionException:\r\n No qualifying bean of type &#39;javax.persistence.EntityManagerFactory&#39; available:\r\n expected single matching bean but found 2: \r\nmsSQLEntityManagerFactory,entityManagerFactory\r\n```\r\n\r\n  [1]: https://stackoverflow.com/questions/60796798/dynamically-set-hibernate-dialect-properties-in-spring-boot","title":"Dynamic dialect with Hibernate and Hikari","body":"<p>I am new at Hibernate.\nInto my code, the connection to the DB is managed with the Hikari data source.</p>\n<p>My code is right now multitenant, but it manages the same hibernate dialect for all tenants.</p>\n<p><strong>Is it possible to create a configuration where each tenant can use a different dialect?</strong>\nThe type of dialect can be provided as a tenant's property.</p>\n<hr />\n<p>This is an example of the entityManagerFactory:</p>\n<pre class=\"lang-java prettyprint-override\"><code>     @Bean\n     public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n\n        Map&lt;String, Object&gt; jpaProperties = new HashMap&lt;&gt;();\n        jpaProperties.put(..., ...);\n        jpaProperties.put(org.hibernate.cfg.Environment.DIALECT, &quot;myDialect&quot;);\n        \n        LocalContainerEntityManagerFactoryBean emfBean = new LocalContainerEntityManagerFactoryBean();\n        emfBean.setPackagesToScan(new String[] {MyEntity.class.getPackage().getName()});\n        emfBean.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\n        emfBean.setJpaPropertyMap(jpaProperties);\n        return emfBean;\n    }\n</code></pre>\n<hr />\n<p><strong>Edit</strong></p>\n<p>I was looking to this <a href=\"https://stackoverflow.com/questions/60796798/dynamically-set-hibernate-dialect-properties-in-spring-boot\">solution</a>: it suggests to create a duplicated LocalContainerEntityManagerFactoryBean for each dialect.\nWhat I do not understand is how can I tell when using one EntityManager (MySQL) and when the other one (Postgres or MsSQL): the <a href=\"https://stackoverflow.com/questions/60796798/dynamically-set-hibernate-dialect-properties-in-spring-boot\">solution</a> discriminates the entities (each entity has its own DB) but in my case, all entities are on all DBs. Is the tenant that discriminates.</p>\n<p>For example: if I create a second instance of LocalContainerEntityManagerFactoryBean (i.e. msSQLEntityManagerFactory()) with setted the dialect for SQL Server, the application fails to start with:</p>\n<pre><code>Application failed to start due to an exceptionorg.springframework.beans.factory.NoUniqueBeanDefinitionException:\n No qualifying bean of type 'javax.persistence.EntityManagerFactory' available:\n expected single matching bean but found 2: \nmsSQLEntityManagerFactory,entityManagerFactory\n</code></pre>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":1233122,"reputation":3934,"user_id":1197297,"accept_rate":67,"display_name":"StvnBrkdll"},"score":0,"creation_date":1509033253,"post_id":34180538,"comment_id":80864842,"body_markdown":"take a look at this post for how to use `JsonNodeFactory` to create an `ObjectNode`:\nhttps://stackoverflow.com/questions/11503604/how-to-create-insert-new-nodes-in-jsonnode","body":"take a look at this post for how to use <code>JsonNodeFactory</code> to create an <code>ObjectNode</code>: <a href=\"https://stackoverflow.com/questions/11503604/how-to-create-insert-new-nodes-in-jsonnode\" title=\"how to create insert new nodes in jsonnode\">stackoverflow.com/questions/11503604/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2567170,"reputation":10683,"user_id":3537858,"display_name":"Alexey Gavrilov"},"comment_count":0,"down_vote_count":1,"up_vote_count":29,"is_accepted":true,"score":28,"last_activity_date":1449682076,"creation_date":1449682076,"answer_id":34185174,"question_id":34180538,"body_markdown":"Use [ObjectMapper#convertValue][1] method to covert object to a JsonNode instance. Here is an example:\r\n\r\n    public class JacksonConvert {\r\n        public static void main(String[] args) {\r\n            final ObjectMapper mapper = new ObjectMapper();\r\n            final ObjectNode root = mapper.createObjectNode();\r\n            root.set(&quot;integer&quot;, mapper.convertValue(1, JsonNode.class));\r\n            root.set(&quot;string&quot;, mapper.convertValue(&quot;string&quot;, JsonNode.class));\r\n            root.set(&quot;bool&quot;, mapper.convertValue(true, JsonNode.class));\r\n            root.set(&quot;array&quot;, mapper.convertValue(Arrays.asList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;), JsonNode.class));\r\n            System.out.println(root);\r\n        }\r\n    }\r\n\r\n\r\nOutput:\r\n     \r\n    {&quot;integer&quot;:1,&quot;string&quot;:&quot;string&quot;,&quot;bool&quot;:true,&quot;array&quot;:[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]}\r\n\r\n  [1]: https://fasterxml.github.io/jackson-databind/javadoc/2.6/com/fasterxml/jackson/databind/ObjectMapper.html#convertValue-java.lang.Object-java.lang.Class-\r\n","title":"Create Jackson ObjectNode from Object","body":"<p>Use <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.6/com/fasterxml/jackson/databind/ObjectMapper.html#convertValue-java.lang.Object-java.lang.Class-\" rel=\"noreferrer\">ObjectMapper#convertValue</a> method to covert object to a JsonNode instance. Here is an example:</p>\n\n<pre><code>public class JacksonConvert {\n    public static void main(String[] args) {\n        final ObjectMapper mapper = new ObjectMapper();\n        final ObjectNode root = mapper.createObjectNode();\n        root.set(\"integer\", mapper.convertValue(1, JsonNode.class));\n        root.set(\"string\", mapper.convertValue(\"string\", JsonNode.class));\n        root.set(\"bool\", mapper.convertValue(true, JsonNode.class));\n        root.set(\"array\", mapper.convertValue(Arrays.asList(\"a\", \"b\", \"c\"), JsonNode.class));\n        System.out.println(root);\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\"integer\":1,\"string\":\"string\",\"bool\":true,\"array\":[\"a\",\"b\",\"c\"]}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1695377771,"creation_date":1565713712,"answer_id":57481865,"question_id":34180538,"body_markdown":"Using the `put()` methods is a lot easier:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    ObjectNode root = mapper.createObjectNode();\r\n    \r\n    root.put(&quot;name1&quot;, 1);\r\n    root.put(&quot;name2&quot;, &quot;someString&quot;);\r\n    \r\n    ObjectNode child = root.putObject(&quot;child&quot;);\r\n    child.put(&quot;name3&quot;, 2);\r\n    child.put(&quot;name4&quot;, &quot;someString&quot;);\r\n\r\nThis code creates the following JSON structure:\r\n\r\n```\r\n{\r\n    &quot;name1&quot;: 1,\r\n    &quot;name2&quot;: &quot;someString&quot;,\r\n    &quot;child&quot;: {\r\n        &quot;name3&quot;: 2,\r\n        &quot;name4&quot;: &quot;someString&quot;\r\n    }\r\n}\r\n```","title":"Create Jackson ObjectNode from Object","body":"<p>Using the <code>put()</code> methods is a lot easier:</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nObjectNode root = mapper.createObjectNode();\n\nroot.put(&quot;name1&quot;, 1);\nroot.put(&quot;name2&quot;, &quot;someString&quot;);\n\nObjectNode child = root.putObject(&quot;child&quot;);\nchild.put(&quot;name3&quot;, 2);\nchild.put(&quot;name4&quot;, &quot;someString&quot;);\n</code></pre>\n<p>This code creates the following JSON structure:</p>\n<pre><code>{\n    &quot;name1&quot;: 1,\n    &quot;name2&quot;: &quot;someString&quot;,\n    &quot;child&quot;: {\n        &quot;name3&quot;: 2,\n        &quot;name4&quot;: &quot;someString&quot;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11337137,"reputation":838,"user_id":8312604,"display_name":"Alexandr Arhipov"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1630834062,"creation_date":1630669004,"answer_id":69044288,"question_id":34180538,"body_markdown":"For people who came here for the answer on the question: &quot;How to create Jackson ObjectNode from Object?&quot;.\r\n\r\nYou can do it this way:\r\n\r\n    ObjectNode objectNode = objectMapper.convertValue(yourObject, ObjectNode.class);\r\n","title":"Create Jackson ObjectNode from Object","body":"<p>For people who came here for the answer on the question: &quot;How to create Jackson ObjectNode from Object?&quot;.</p>\n<p>You can do it this way:</p>\n<pre><code>ObjectNode objectNode = objectMapper.convertValue(yourObject, ObjectNode.class);\n</code></pre>\n"}],"owner":{"account_id":47138,"reputation":361,"user_id":139494,"accept_rate":100,"display_name":"Chris"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39473,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":34185174,"answer_count":3,"score":14,"last_activity_date":1695377771,"creation_date":1449669243,"question_id":34180538,"body_markdown":"I need to add a new item to an existing `ObjectNode`, given a key and a value. The value is specified as an `Object` in the method sig and _should_ be one of the types that ObjectNode.set() accepts (`String`, `Integer`, `Boolean`, etc). But I can&#39;t just do `myObjectNode.set(key, value);` because value is just an `Object` and of course I get a _&quot;not applicable for the arguments (String, Object)&quot;_ error. \r\n\r\nMy make-it-work solution is to create a function to check the `instanceof` and cast it to create a `ValueNode`:\r\n\r\n    private static ValueNode getValueNode(Object obj) {\r\n      if (obj instanceof Integer) {\r\n        return mapper.createObjectNode().numberNode((Integer)obj);\r\n      }\r\n      if (obj instanceof Boolean) {\r\n        return mapper.createObjectNode().booleanNode((Boolean)obj);\r\n      }\r\n      //...Etc for all the types I expect\r\n    }\r\n..and then I can use `myObjectNode.set(key, getValueNode(value));`\r\n\r\n**There must be a better way** but I&#39;m having trouble finding it. \r\n\r\nI&#39;m guessing that there is a way to use `ObjectMapper` but how isn&#39;t clear to me at this point. For example [I can write the value out as a string][1] but I need it as something I can set on my ObjectNode and needs to be the correct type (ie everything can&#39;t just be converted to a String).\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/15786129/converting-java-objects-to-json-with-jackson","title":"Create Jackson ObjectNode from Object","body":"<p>I need to add a new item to an existing <code>ObjectNode</code>, given a key and a value. The value is specified as an <code>Object</code> in the method sig and <em>should</em> be one of the types that ObjectNode.set() accepts (<code>String</code>, <code>Integer</code>, <code>Boolean</code>, etc). But I can't just do <code>myObjectNode.set(key, value);</code> because value is just an <code>Object</code> and of course I get a <em>\"not applicable for the arguments (String, Object)\"</em> error. </p>\n\n<p>My make-it-work solution is to create a function to check the <code>instanceof</code> and cast it to create a <code>ValueNode</code>:</p>\n\n<pre><code>private static ValueNode getValueNode(Object obj) {\n  if (obj instanceof Integer) {\n    return mapper.createObjectNode().numberNode((Integer)obj);\n  }\n  if (obj instanceof Boolean) {\n    return mapper.createObjectNode().booleanNode((Boolean)obj);\n  }\n  //...Etc for all the types I expect\n}\n</code></pre>\n\n<p>..and then I can use <code>myObjectNode.set(key, getValueNode(value));</code></p>\n\n<p><strong>There must be a better way</strong> but I'm having trouble finding it. </p>\n\n<p>I'm guessing that there is a way to use <code>ObjectMapper</code> but how isn't clear to me at this point. For example <a href=\"https://stackoverflow.com/questions/15786129/converting-java-objects-to-json-with-jackson\">I can write the value out as a string</a> but I need it as something I can set on my ObjectNode and needs to be the correct type (ie everything can't just be converted to a String).</p>\n"},{"tags":["java","algorithm","hashmap","complexity-theory"],"comments":[{"owner":{"account_id":949827,"reputation":1645,"user_id":976201,"display_name":"Ray"},"score":1,"creation_date":1346652370,"post_id":1850802,"comment_id":16409545,"body_markdown":"I don&#39;t think  walking through the set takes &#39;obviously&#39; O(n) time. The set may not be actually generate. It maybe just a object that can be used to iterate. And, what&#39;s the n here? The items or buckets?","body":"I don&#39;t think  walking through the set takes &#39;obviously&#39; O(n) time. The set may not be actually generate. It maybe just a object that can be used to iterate. And, what&#39;s the n here? The items or buckets?"},{"owner":{"account_id":52456,"reputation":309,"user_id":156765,"accept_rate":78,"display_name":"agrawalankur"},"score":0,"creation_date":1351807521,"post_id":1850802,"comment_id":17948089,"body_markdown":"here n is the number of entries in the hashmap. If the set has n elelments, to iterate over the set of n elements the time complexity will be O(n).","body":"here n is the number of entries in the hashmap. If the set has n elelments, to iterate over the set of n elements the time complexity will be O(n)."}],"answers":[{"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1551127742,"post_id":1850813,"comment_id":96518899,"body_markdown":"O(n) is not completely accurate, per [my answer](https://stackoverflow.com/questions/1850802/what-is-the-time-complexity-of-java-util-hashmap-class-keyset-method/54874409#54874409) (the time complexity of iteration is dependent on both the map size as well as its capacity, though the capacity piece shouldn&#39;t change the iteration time complexity unless the map is poorly configured for its data).","body":"O(n) is not completely accurate, per <a href=\"https://stackoverflow.com/questions/1850802/what-is-the-time-complexity-of-java-util-hashmap-class-keyset-method/54874409#54874409\">my answer</a> (the time complexity of iteration is dependent on both the map size as well as its capacity, though the capacity piece shouldn&#39;t change the iteration time complexity unless the map is poorly configured for its data)."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1582625602,"post_id":1850813,"comment_id":106833378,"body_markdown":"@M.Justin - And per my answer ... from 9 months earlier.","body":"@M.Justin - And per my answer ... from 9 months earlier."}],"tags":[],"owner":{"account_id":53046,"reputation":12677,"user_id":158595,"accept_rate":70,"display_name":"LorenVS"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1259978228,"creation_date":1259977791,"answer_id":1850813,"question_id":1850802,"body_markdown":"This should be doable in O(n) time... A hash map is usually implemented as a large bucket array, the bucket&#39;s size is (usually) directly proportional to the size of the hash map. In order to retrieve the key set, the bucket must be iterated through, and for each set item, the key must be retrieved (either through an intermediate collection or an iterator with direct access to the bucket)...\r\n\r\n**EDIT: As others have pointed out, the actual keyset() method will run in O(1) time, however, iterating over the keyset or transferring it to a dedicated collection will be an O(n) operation. Not quite sure which one you are looking for **","title":"What is the time complexity of java.util.HashMap class&#39; keySet() method?","body":"<p>This should be doable in O(n) time... A hash map is usually implemented as a large bucket array, the bucket's size is (usually) directly proportional to the size of the hash map. In order to retrieve the key set, the bucket must be iterated through, and for each set item, the key must be retrieved (either through an intermediate collection or an iterator with direct access to the bucket)...</p>\n\n<p>**EDIT: As others have pointed out, the actual keyset() method will run in O(1) time, however, iterating over the keyset or transferring it to a dedicated collection will be an O(n) operation. Not quite sure which one you are looking for **</p>\n"},{"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1551127846,"post_id":1850820,"comment_id":96518952,"body_markdown":"O(n) is not completely accurate, per [my answer](https://stackoverflow.com/questions/1850802/what-is-the-time-complexity-of-java-util-hashmap-class-keyset-method/54874409#54874409) (the time complexity of iteration is dependent on both the map size as well as its capacity, though the capacity piece shouldn&#39;t change the iteration time complexity unless the map is poorly configured for its data).","body":"O(n) is not completely accurate, per <a href=\"https://stackoverflow.com/questions/1850802/what-is-the-time-complexity-of-java-util-hashmap-class-keyset-method/54874409#54874409\">my answer</a> (the time complexity of iteration is dependent on both the map size as well as its capacity, though the capacity piece shouldn&#39;t change the iteration time complexity unless the map is poorly configured for its data)."}],"tags":[],"owner":{"account_id":34514,"reputation":28046,"user_id":97627,"accept_rate":75,"display_name":"Paul Wagland"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1259977898,"creation_date":1259977898,"answer_id":1850820,"question_id":1850802,"body_markdown":"Surely it would be O(1). All that it is doing is returning a wrapper object on the HashMap.\r\n\r\nIf you are talking about walking over the keyset, then this is O(n), since each next() call is O(1), and this needs to be performed n times.","title":"What is the time complexity of java.util.HashMap class&#39; keySet() method?","body":"<p>Surely it would be O(1). All that it is doing is returning a wrapper object on the HashMap.</p>\n\n<p>If you are talking about walking over the keyset, then this is O(n), since each next() call is O(1), and this needs to be performed n times.</p>\n"},{"tags":[],"owner":{"account_id":44736,"reputation":98412,"user_id":131433,"accept_rate":76,"display_name":"bmargulies"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1259977906,"creation_date":1259977906,"answer_id":1850821,"question_id":1850802,"body_markdown":"Java collections have a lot of space and thus don&#39;t take much time. That method is, I believe, O(1). The collection is just sitting there.\r\n","title":"What is the time complexity of java.util.HashMap class&#39; keySet() method?","body":"<p>Java collections have a lot of space and thus don't take much time. That method is, I believe, O(1). The collection is just sitting there.</p>\n"},{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1582626050,"post_id":1850835,"comment_id":106833618,"body_markdown":"(Note: the 2nd part of this Answer was originally a separate Answer.)","body":"(Note: the 2nd part of this Answer was originally a separate Answer.)"}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"down_vote_count":0,"up_vote_count":28,"is_accepted":true,"score":28,"last_activity_date":1582626123,"creation_date":1259978360,"answer_id":1850835,"question_id":1850802,"body_markdown":"Getting the keyset is `O(1)` and cheap.  This is because `HashMap.keyset()` returns the actual `KeySet` object associated with the `HashMap`.  \r\n\r\nThe returned `Set` is *not a copy* of the keys, but a wrapper for the actual `HashMap`&#39;s state. Indeed, if you update the set you can actually change the `HashMap`&#39;s state; e.g. calling `clear()` on the set will clear the `HashMap`!\r\n\r\n-----------------\r\n\r\n&gt; ... iterating through the returned `Set` will take obviously `O(n)` time.\r\n\r\n\r\nActually that is not *always* true:\r\n\r\n  - It is true for a `HashMap` is created using `new HashMap&lt;&gt;()`.  The worst case is to have all `N` keys land in the same hash chain.  However if the map has grown naturally, there will still be `N` entries and `O(N)` slots in the hash array.  Thus iterating the entry set will involve `O(N)` operations.\r\n\r\n  - It is false if the `HashMap` is created with `new HashMap&lt;&gt;(capacity)` and a singularly bad (too large) `capacity` estimate.  Then it will take `O(Cap) + O(N)` operations to iterate the entry set.  If we treat `Cap` as a variable, that is `O(max(Cap, N))`, which could be worse than `O(N)`.\r\n\r\nThere is an escape clause though.  Since `capacity` is an `int` in the current `HashMap` API, the upper bound for `Cap` is 2&lt;sup&gt;31&lt;/sup&gt;.  So for *really* large values of `Cap` and `N`, the complexity is `O(N)`.  \r\n\r\nOn the other hand, `N` is limited by the amount of memory available and in practice you need a heap in the order of 2&lt;sup&gt;38&lt;/sup&gt; bytes (256GBytes) for `N` to exceed the largest possible `Cap` value.   And for a map that size, you would be better off using a hashtable implementation tuned for huge maps.  Or not using an excessively large capacity estimate!","title":"What is the time complexity of java.util.HashMap class&#39; keySet() method?","body":"<p>Getting the keyset is <code>O(1)</code> and cheap.  This is because <code>HashMap.keyset()</code> returns the actual <code>KeySet</code> object associated with the <code>HashMap</code>.  </p>\n\n<p>The returned <code>Set</code> is <em>not a copy</em> of the keys, but a wrapper for the actual <code>HashMap</code>'s state. Indeed, if you update the set you can actually change the <code>HashMap</code>'s state; e.g. calling <code>clear()</code> on the set will clear the <code>HashMap</code>!</p>\n\n<hr>\n\n<blockquote>\n  <p>... iterating through the returned <code>Set</code> will take obviously <code>O(n)</code> time.</p>\n</blockquote>\n\n<p>Actually that is not <em>always</em> true:</p>\n\n<ul>\n<li><p>It is true for a <code>HashMap</code> is created using <code>new HashMap&lt;&gt;()</code>.  The worst case is to have all <code>N</code> keys land in the same hash chain.  However if the map has grown naturally, there will still be <code>N</code> entries and <code>O(N)</code> slots in the hash array.  Thus iterating the entry set will involve <code>O(N)</code> operations.</p></li>\n<li><p>It is false if the <code>HashMap</code> is created with <code>new HashMap&lt;&gt;(capacity)</code> and a singularly bad (too large) <code>capacity</code> estimate.  Then it will take <code>O(Cap) + O(N)</code> operations to iterate the entry set.  If we treat <code>Cap</code> as a variable, that is <code>O(max(Cap, N))</code>, which could be worse than <code>O(N)</code>.</p></li>\n</ul>\n\n<p>There is an escape clause though.  Since <code>capacity</code> is an <code>int</code> in the current <code>HashMap</code> API, the upper bound for <code>Cap</code> is 2<sup>31</sup>.  So for <em>really</em> large values of <code>Cap</code> and <code>N</code>, the complexity is <code>O(N)</code>.  </p>\n\n<p>On the other hand, <code>N</code> is limited by the amount of memory available and in practice you need a heap in the order of 2<sup>38</sup> bytes (256GBytes) for <code>N</code> to exceed the largest possible <code>Cap</code> value.   And for a map that size, you would be better off using a hashtable implementation tuned for huge maps.  Or not using an excessively large capacity estimate!</p>\n"},{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1582625539,"post_id":54874409,"comment_id":106833347,"body_markdown":"Duplicate answer.  Says what I wrote 9 months ago.","body":"Duplicate answer.  Says what I wrote 9 months ago."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1582642850,"post_id":54874409,"comment_id":106843099,"body_markdown":"@StephenC I&#39;ll have take your word for that, as it looks as though you&#39;ve deleted that answer and merged it into your other one, and I don&#39;t have enough reputation to view deleted answers.  I must have missed your answer addressing this point.","body":"@StephenC I&#39;ll have take your word for that, as it looks as though you&#39;ve deleted that answer and merged it into your other one, and I don&#39;t have enough reputation to view deleted answers.  I must have missed your answer addressing this point."}],"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551127546,"creation_date":1551127546,"answer_id":54874409,"question_id":1850802,"body_markdown":"To address the &quot;iterating through the returned Set will take obviously O(n) time&quot; comment, this is not actually correct per the [doc comments](https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html) of `HashMap`:\r\n\r\n&gt; Iteration over collection views requires time proportional to the &quot;capacity&quot; of the HashMap instance (the number of buckets) plus its size (the number of key-value mappings). Thus, it&#39;s very important not to set the initial capacity too high (or the load factor too low) if iteration performance is important.\r\n\r\nSo in other words, iterating over the returned `Set` will take `O(n + c)` where `n` is the size of the map and `c` is its capacity, not `O(n)`.  If an inappropriately sized initial capacity or load factor were chosen, the value of `c` could outweigh the actual size of the map in terms of iteration time.","title":"What is the time complexity of java.util.HashMap class&#39; keySet() method?","body":"<p>To address the \"iterating through the returned Set will take obviously O(n) time\" comment, this is not actually correct per the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\" rel=\"nofollow noreferrer\">doc comments</a> of <code>HashMap</code>:</p>\n\n<blockquote>\n  <p>Iteration over collection views requires time proportional to the \"capacity\" of the HashMap instance (the number of buckets) plus its size (the number of key-value mappings). Thus, it's very important not to set the initial capacity too high (or the load factor too low) if iteration performance is important.</p>\n</blockquote>\n\n<p>So in other words, iterating over the returned <code>Set</code> will take <code>O(n + c)</code> where <code>n</code> is the size of the map and <code>c</code> is its capacity, not <code>O(n)</code>.  If an inappropriately sized initial capacity or load factor were chosen, the value of <code>c</code> could outweigh the actual size of the map in terms of iteration time.</p>\n"},{"tags":[],"owner":{"account_id":26924278,"reputation":41,"user_id":20497782,"display_name":"Mark"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695377574,"creation_date":1695377574,"answer_id":77156724,"question_id":1850802,"body_markdown":"According to official Java documentation, \r\nThe time complexity of keySet() method is O(1). Because when anything changes happens in map at any time those all change related to key happens for keySet() method also.\r\n\r\nThink like there is a static ArrayList which is gobally and all changes are made when some key is added or removed.\r\n\r\nBut in interview or if you are implementing hashmap from scratch then You can do keySet() time complexity O(1) and if you are finding all those key&#39;s using some traversal then its time complexity will be O(n).\r\n\r\nFor More information read Java official hashmap documention.\r\n[Java Hashmap][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html","title":"What is the time complexity of java.util.HashMap class&#39; keySet() method?","body":"<p>According to official Java documentation,\nThe time complexity of keySet() method is O(1). Because when anything changes happens in map at any time those all change related to key happens for keySet() method also.</p>\n<p>Think like there is a static ArrayList which is gobally and all changes are made when some key is added or removed.</p>\n<p>But in interview or if you are implementing hashmap from scratch then You can do keySet() time complexity O(1) and if you are finding all those key's using some traversal then its time complexity will be O(n).</p>\n<p>For More information read Java official hashmap documention.\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\" rel=\"nofollow noreferrer\">Java Hashmap</a></p>\n"}],"owner":{"account_id":52456,"reputation":309,"user_id":156765,"accept_rate":78,"display_name":"agrawalankur"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15164,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":1850835,"answer_count":6,"score":8,"last_activity_date":1695377574,"creation_date":1259977444,"question_id":1850802,"body_markdown":"I am trying to implement a plane sweep algorithm and for this I need to know the time complexity of [java.util.HashMap class&#39; keySet()][1] method. I suspect that it is O(n log n). Am I correct?\r\n\r\n**Point of clarification:** I am talking about the time complexity of the keySet() method; iterating through the returned Set will take obviously O(n) time.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#keySet()","title":"What is the time complexity of java.util.HashMap class&#39; keySet() method?","body":"<p>I am trying to implement a plane sweep algorithm and for this I need to know the time complexity of <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#keySet()\" rel=\"noreferrer\">java.util.HashMap class' keySet()</a> method. I suspect that it is O(n log n). Am I correct?</p>\n\n<p><strong>Point of clarification:</strong> I am talking about the time complexity of the keySet() method; iterating through the returned Set will take obviously O(n) time.</p>\n"},{"tags":["java","methods","netbeans","game-development","flappy-bird-clone"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1695386924,"post_id":77156676,"comment_id":136021321,"body_markdown":"Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [How to Use CardLayout](https://docs.oracle.com/javase/tutorial/uiswing/layout/card.html) section.","body":"Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/card.html\" rel=\"nofollow noreferrer\">How to Use CardLayout</a> section."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695420952,"post_id":77156676,"comment_id":136027197,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":29101471,"reputation":1,"user_id":22293208,"display_name":"user22293208"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695377239,"creation_date":1695377239,"question_id":77156676,"body_markdown":"I want to call my login screen first so that the uer can have an account before playing the game. However i do not know where to call the login screen without having it interfere with the game: \r\n\r\n\r\nSo essentially every time the game wants to start it obviously opens the login screen first because they are all within the constructor. Anyone know how i can seperate the two different processes? \r\n\r\n\r\ncurrently the set up looks like this:\r\n```\r\nprivate LoginScreen log;\r\n\r\n    public FlappyBird() {\r\n       \r\n        \r\n        //call login screen so that an account can be created\r\n        log= new LoginScreen();\r\n       \r\n        log.setVisible(decision);\r\n        \r\n         \r\n        Timer timer = new Timer(20, this);// used to ensure it repaints throught a schedule timer\r\n        render = new FlappyBirdUI1();\r\n        jframe = new JFrame();\r\n        \r\n        jframe.add(render);\r\n\r\n        jframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\r\n        jframe.setResizable(false);\r\n        \r\n        jframe.setSize(new java.awt.Dimension(WIDTH, HEIGHT));\r\n        jframe.setLocationRelativeTo(null);\r\n        jframe.addMouseListener(this);\r\n// set game screen to only be visible if the game button on home screen is clicked\r\n        jframe.setVisible(true);\r\n\r\n        //using a rectangle as the &quot;bird&quot;\r\n        \r\n        bird = new Rectangle(WIDTH / 2 - 10, HEIGHT / 2 - 10, 20, 20);\r\n\r\n        pipes = new ArrayList&lt;Rectangle&gt;();\r\n        addpipe(true);\r\n        addpipe(true);\r\n        addpipe(true);\r\n        addpipe(true);\r\n\r\n        // gsettings.setBounds(0, HEIGHT, 30, 25);\r\n        timer.start();\r\n         \r\n    }\r\n```","title":"How to seperate my game screen from my login screen","body":"<p>I want to call my login screen first so that the uer can have an account before playing the game. However i do not know where to call the login screen without having it interfere with the game:</p>\n<p>So essentially every time the game wants to start it obviously opens the login screen first because they are all within the constructor. Anyone know how i can seperate the two different processes?</p>\n<p>currently the set up looks like this:</p>\n<pre><code>private LoginScreen log;\n\n    public FlappyBird() {\n       \n        \n        //call login screen so that an account can be created\n        log= new LoginScreen();\n       \n        log.setVisible(decision);\n        \n         \n        Timer timer = new Timer(20, this);// used to ensure it repaints throught a schedule timer\n        render = new FlappyBirdUI1();\n        jframe = new JFrame();\n        \n        jframe.add(render);\n\n        jframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        jframe.setResizable(false);\n        \n        jframe.setSize(new java.awt.Dimension(WIDTH, HEIGHT));\n        jframe.setLocationRelativeTo(null);\n        jframe.addMouseListener(this);\n// set game screen to only be visible if the game button on home screen is clicked\n        jframe.setVisible(true);\n\n        //using a rectangle as the &quot;bird&quot;\n        \n        bird = new Rectangle(WIDTH / 2 - 10, HEIGHT / 2 - 10, 20, 20);\n\n        pipes = new ArrayList&lt;Rectangle&gt;();\n        addpipe(true);\n        addpipe(true);\n        addpipe(true);\n        addpipe(true);\n\n        // gsettings.setBounds(0, HEIGHT, 30, 25);\n        timer.start();\n         \n    }\n</code></pre>\n"},{"tags":["java","loops","for-loop","foreach"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695375383,"post_id":77156471,"comment_id":136019030,"body_markdown":"Don&#39;t `return` inside the loop","body":"Don&#39;t <code>return</code> inside the loop"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1695375434,"post_id":77156471,"comment_id":136019045,"body_markdown":"A `boolean[]` will never be `true`, so review your condition in `if (arr.equals(true))`…","body":"A <code>boolean[]</code> will never be <code>true</code>, so review your condition in <code>if (arr.equals(true))</code>…"},{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":0,"creation_date":1695375460,"post_id":77156471,"comment_id":136019052,"body_markdown":"You&#39;re comparing the array `arr` to `true` instead of the value `i`. That&#39;s all.","body":"You&#39;re comparing the array <code>arr</code> to <code>true</code> instead of the value <code>i</code>. That&#39;s all."},{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":0,"creation_date":1695375610,"post_id":77156471,"comment_id":136019084,"body_markdown":"@Jorn I stand corrected.","body":"@Jorn I stand corrected."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1695375675,"post_id":77156471,"comment_id":136019098,"body_markdown":"replace the if else statement to `if (i) { amountTrue++;  }`","body":"replace the if else statement to <code>if (i) { amountTrue++;  }</code>"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1695375701,"post_id":77156471,"comment_id":136019105,"body_markdown":"Compare the item `i` in the array instead of the whole array. Don&#39;t `return` inside the loop, just increment the counter if the condition is met and return the counter after the loop.","body":"Compare the item <code>i</code> in the array instead of the whole array. Don&#39;t <code>return</code> inside the loop, just increment the counter if the condition is met and return the counter after the loop."}],"answers":[{"comments":[{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":0,"creation_date":1695375894,"post_id":77156511,"comment_id":136019162,"body_markdown":"Don&#39;t compare primitives with `equals()`. It causes needless autoboxing.","body":"Don&#39;t compare primitives with <code>equals()</code>. It causes needless autoboxing."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1695375966,"post_id":77156511,"comment_id":136019174,"body_markdown":"`if (i.equals(true)` is doing a lot of unnecessary:  (1) auto-boxing `i` from `boolean` to `Boolean`; (2) *converting* (done by compiler) the operand `true` to `Boolean.TRUE`; (3) calling the `equals` method... to compare primitives we should use `==`; (4) comparing against `true` or `Boolean.TRUE` (there is no need to compare any boolean expression (e.g. `i`) to `true` {`x == true` is the same as just `x`} )","body":"<code>if (i.equals(true)</code> is doing a lot of unnecessary:  (1) auto-boxing <code>i</code> from <code>boolean</code> to <code>Boolean</code>; (2) <i>converting</i> (done by compiler) the operand <code>true</code> to <code>Boolean.TRUE</code>; (3) calling the <code>equals</code> method... to compare primitives we should use <code>==</code>; (4) comparing against <code>true</code> or <code>Boolean.TRUE</code> (there is no need to compare any boolean expression (e.g. <code>i</code>) to <code>true</code> {<code>x == true</code> is the same as just <code>x</code>} )"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1695376370,"post_id":77156511,"comment_id":136019254,"body_markdown":"actually, does it compile? Can we call a method from a primitive? Forget the previous comment, there will be no auto-boxing but a compilation error (and upvoted two times....)","body":"actually, does it compile? Can we call a method from a primitive? Forget the previous comment, there will be no auto-boxing but a compilation error (and upvoted two times....)"},{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":0,"creation_date":1695376681,"post_id":77156511,"comment_id":136019321,"body_markdown":"@user85421 You&#39;re right. Doesn&#39;t compile.","body":"@user85421 You&#39;re right. Doesn&#39;t compile."}],"tags":[],"owner":{"account_id":21977057,"reputation":27,"user_id":16252714,"display_name":"aTancredi"},"comment_count":4,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1695375711,"creation_date":1695375711,"answer_id":77156511,"question_id":77156471,"body_markdown":"Try with this. You should not return inside the loop, also you were testing the array for true and not the element i, which will always return false, hence you always got zero  \r\n\r\n      public class Challenge {\r\n        public static int countTrue(boolean[] arr) {\r\n            // declaring the variable to return\r\n            int amountTrue = 0;\r\n            // for each to loop through the array\r\n            for (boolean i : arr) {\r\n                // if array item == true add 1 to variable amountTrue\r\n                // if false do nothing\r\n                if (i.equals(true)) {\r\n                    amountTrue += 1;\r\n                }\r\n            }\r\n            // returning the variable \r\n            return amountTrue; \r\n        }\r\n    }","title":"Create a function which returns the number of true values there are in an array","body":"<p>Try with this. You should not return inside the loop, also you were testing the array for true and not the element i, which will always return false, hence you always got zero</p>\n<pre><code>  public class Challenge {\n    public static int countTrue(boolean[] arr) {\n        // declaring the variable to return\n        int amountTrue = 0;\n        // for each to loop through the array\n        for (boolean i : arr) {\n            // if array item == true add 1 to variable amountTrue\n            // if false do nothing\n            if (i.equals(true)) {\n                amountTrue += 1;\n            }\n        }\n        // returning the variable \n        return amountTrue; \n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1695376117,"post_id":77156542,"comment_id":136019205,"body_markdown":"here is no need to compare any boolean expression (e.g. `i`) to `true` {`x == true` is the same as just `x` for any expression `x`}","body":"here is no need to compare any boolean expression (e.g. <code>i</code>) to <code>true</code> {<code>x == true</code> is the same as just <code>x</code> for any expression <code>x</code>}"},{"owner":{"account_id":29406979,"reputation":131,"user_id":22531817,"display_name":"Luca Micarelli"},"score":0,"creation_date":1695376331,"post_id":77156542,"comment_id":136019244,"body_markdown":"if the input is a list of boolean value you have to check every item == true for add 1 to amountTree","body":"if the input is a list of boolean value you have to check every item == true for add 1 to amountTree"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1695376466,"post_id":77156542,"comment_id":136019276,"body_markdown":"`if (i == true)` is better written as `if (i)`  !!","body":"<code>if (i == true)</code> is better written as <code>if (i)</code>  !!"},{"owner":{"account_id":29406979,"reputation":131,"user_id":22531817,"display_name":"Luca Micarelli"},"score":0,"creation_date":1695377752,"post_id":77156542,"comment_id":136019531,"body_markdown":"yeah of course but i think that for understand the initial errors is better write the extensive code","body":"yeah of course but i think that for understand the initial errors is better write the extensive code"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1695381825,"post_id":77156542,"comment_id":136020308,"body_markdown":"by that logic, you should also have written `amountTree = amountTree + 1;`  and so on... I believe, for learning, it is better to also show the *conventional* way (according best practices) - so I added the comment, also for other readers, not just the question&#39;s author","body":"by that logic, you should also have written <code>amountTree = amountTree + 1;</code>  and so on... I believe, for learning, it is better to also show the <i>conventional</i> way (according best practices) - so I added the comment, also for other readers, not just the question&#39;s author"},{"owner":{"account_id":29406979,"reputation":131,"user_id":22531817,"display_name":"Luca Micarelli"},"score":0,"creation_date":1695382600,"post_id":77156542,"comment_id":136020497,"body_markdown":"the author of the question had written amountTree ++ in his code, so it made no sense to write amountTree = amountTree+1, I think it is more important to show the main errors than to focus on some practices, and I also believe that sometimes it is better to write slightly longer code but which is better understood, without exaggerating obviously, we rely on common sense, I understand your intent perfectly, I just don&#39;t agree with focusing on things that can be considered subjective, in any case everyone has the right to think as he wants","body":"the author of the question had written amountTree ++ in his code, so it made no sense to write amountTree = amountTree+1, I think it is more important to show the main errors than to focus on some practices, and I also believe that sometimes it is better to write slightly longer code but which is better understood, without exaggerating obviously, we rely on common sense, I understand your intent perfectly, I just don&#39;t agree with focusing on things that can be considered subjective, in any case everyone has the right to think as he wants"}],"tags":[],"owner":{"account_id":29406979,"reputation":131,"user_id":22531817,"display_name":"Luca Micarelli"},"comment_count":6,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695375975,"creation_date":1695375975,"answer_id":77156542,"question_id":77156471,"body_markdown":"in the cycle for only write this:\r\n\r\n    if (i == true) {\r\n       amountTree++;\r\n    }\r\n\r\nwithout the else, and at the end simply return amountTree, in your code you check if the Object arr is equals to boolean true,but arr is an array, you have to check the i element that are boolean, you haven&#39;t to use the return in the cycle because this stop your code and at the end have no sense (add 0 if i != true), you can only add 1 if (i element == true)\r\n    \r\n","title":"Create a function which returns the number of true values there are in an array","body":"<p>in the cycle for only write this:</p>\n<pre><code>if (i == true) {\n   amountTree++;\n}\n</code></pre>\n<p>without the else, and at the end simply return amountTree, in your code you check if the Object arr is equals to boolean true,but arr is an array, you have to check the i element that are boolean, you haven't to use the return in the cycle because this stop your code and at the end have no sense (add 0 if i != true), you can only add 1 if (i element == true)</p>\n"},{"comments":[{"owner":{"account_id":29352300,"reputation":61,"user_id":22489120,"display_name":"Jack M"},"score":0,"creation_date":1695376570,"post_id":77156602,"comment_id":136019300,"body_markdown":"If anyone is curious, I am doing coding challenges on edabit website.","body":"If anyone is curious, I am doing coding challenges on edabit website."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1695376619,"post_id":77156602,"comment_id":136019308,"body_markdown":"there is no need to compare any boolean expression to `true` (`i == true` is the same as just `i`)","body":"there is no need to compare any boolean expression to <code>true</code> (<code>i == true</code> is the same as just <code>i</code>)"},{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":0,"creation_date":1695376759,"post_id":77156602,"comment_id":136019336,"body_markdown":"And get into the habit of properly formatting your code. It will save you a lot of headaches in the future.","body":"And get into the habit of properly formatting your code. It will save you a lot of headaches in the future."}],"tags":[],"owner":{"account_id":29352300,"reputation":61,"user_id":22489120,"display_name":"Jack M"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695376516,"creation_date":1695376516,"answer_id":77156602,"question_id":77156471,"body_markdown":"Ok, thanks for everyone&#39;s help, really appreciate the community. \r\n\r\nPicked up a few good bits from here like not returning in a loop, whereas, I think the concept of autoboxing is way out of my league atm (but do know not to use .equals() with primitives now).\r\n\r\nI solved the issue with this with the help of your advice:\r\n\r\n```\r\n\tpublic static int countTrue(boolean[] arr) {\r\n\t\tint amountTrue = 0;\r\n\t\tfor (boolean i : arr){ \r\n\t\t\tif (i == true) {\r\n\t\t\t\tamountTrue+=1;\r\n\t\t\t}} return amountTrue;\r\n\t}\r\n}\r\n``` ","title":"Create a function which returns the number of true values there are in an array","body":"<p>Ok, thanks for everyone's help, really appreciate the community.</p>\n<p>Picked up a few good bits from here like not returning in a loop, whereas, I think the concept of autoboxing is way out of my league atm (but do know not to use .equals() with primitives now).</p>\n<p>I solved the issue with this with the help of your advice:</p>\n<pre><code>    public static int countTrue(boolean[] arr) {\n        int amountTrue = 0;\n        for (boolean i : arr){ \n            if (i == true) {\n                amountTrue+=1;\n            }} return amountTrue;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29352300,"reputation":61,"user_id":22489120,"display_name":"Jack M"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":5,"up_vote_count":2,"answer_count":3,"score":-3,"last_activity_date":1695376516,"creation_date":1695375342,"question_id":77156471,"body_markdown":"The code compiles but always returns 0. When I read the code out it makes sense that it should work; I&#39;ve spent a while troubleshooting, not sure why it isn&#39;t working.\r\n\r\n\r\n```\r\npublic class Challenge {\r\n   public static int countTrue(boolean[] arr) {\r\n     // declaring the variable to return\r\n      int amountTrue = 0;\r\n    // for each to loop through the array\r\n\tfor (boolean i : arr) {\r\n        // if array item == true add 1 to variable amountTrue, if false, add 0 to amountTrue\r\n\t\tif (arr.equals(true)) {\r\n\t\t  return amountTrue++;\r\n\t\t} else {\r\n\t\t  return amountTrue + 0;\r\n\t\t}} \r\n      // returning the variable \r\n       return amountTrue; }}\r\n```\r\n\r\n\r\nI am expecting the function to count all the trues in the array. I have tried both a for loop and for each loop. \r\n\r\n","title":"Create a function which returns the number of true values there are in an array","body":"<p>The code compiles but always returns 0. When I read the code out it makes sense that it should work; I've spent a while troubleshooting, not sure why it isn't working.</p>\n<pre><code>public class Challenge {\n   public static int countTrue(boolean[] arr) {\n     // declaring the variable to return\n      int amountTrue = 0;\n    // for each to loop through the array\n    for (boolean i : arr) {\n        // if array item == true add 1 to variable amountTrue, if false, add 0 to amountTrue\n        if (arr.equals(true)) {\n          return amountTrue++;\n        } else {\n          return amountTrue + 0;\n        }} \n      // returning the variable \n       return amountTrue; }}\n</code></pre>\n<p>I am expecting the function to count all the trues in the array. I have tried both a for loop and for each loop.</p>\n"},{"tags":["java","c#","regex"],"comments":[{"owner":{"account_id":323211,"reputation":43672,"user_id":643085,"accept_rate":100,"display_name":"Fede"},"score":0,"creation_date":1439445738,"post_id":31980475,"comment_id":51866644,"body_markdown":"you need to post more code. What is `data`? what is  `getRegex()`? Where does `TokenType`  come from? What are you *really* trying to do? Also,  in C# you use  real properties as opposed to java&#39;s horrible `getXXX()` and `setXXX()` syntax. C# is a modern language.","body":"you need to post more code. What is <code>data</code>? what is  <code>getRegex()</code>? Where does <code>TokenType</code>  come from? What are you <i>really</i> trying to do? Also,  in C# you use  real properties as opposed to java&#39;s horrible <code>getXXX()</code> and <code>setXXX()</code> syntax. C# is a modern language."},{"owner":{"account_id":323211,"reputation":43672,"user_id":643085,"accept_rate":100,"display_name":"Fede"},"score":1,"creation_date":1439446028,"post_id":31980475,"comment_id":51866763,"body_markdown":"Also, what do you mean by `the C# code doesn&#39;t behave` - what&#39;s the difference? In  what  way is the result wrong? Please specify.","body":"Also, what do you mean by <code>the C# code doesn&#39;t behave</code> - what&#39;s the difference? In  what  way is the result wrong? Please specify."},{"owner":{"account_id":6416404,"reputation":1101,"user_id":4974464,"display_name":"Sky Fang"},"score":0,"creation_date":1439446439,"post_id":31980475,"comment_id":51866932,"body_markdown":"Please show your regex patten,and show the result of `str` value both in java and c#","body":"Please show your regex patten,and show the result of <code>str</code> value both in java and c#"},{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1439446859,"post_id":31980475,"comment_id":51867140,"body_markdown":"Where is the original Java code?","body":"Where is the original Java code?"},{"owner":{"account_id":6782089,"reputation":63,"user_id":5221952,"display_name":"Page"},"score":0,"creation_date":1439448457,"post_id":31980475,"comment_id":51867992,"body_markdown":"https://www.youtube.com/watch?v=_EQ5jdrgOlU&amp;index=3&amp;list=PLAF3anQEEkzRuJ7UW82CmSEtT6g-J4Q_p Im folowing this series and translating it to c# (also changing how the new language works at the same time)","body":"<a href=\"https://www.youtube.com/watch?v=_EQ5jdrgOlU&amp;index=3&amp;list=PLAF3anQEEkzRuJ7UW82CmSEtT6g-J4Q_p\" rel=\"nofollow noreferrer\">youtube.com/&hellip;</a> Im folowing this series and translating it to c# (also changing how the new language works at the same time)"}],"answers":[{"tags":[],"owner":{"account_id":5172945,"reputation":917,"user_id":4140943,"display_name":"finder2"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695376508,"creation_date":1695376508,"answer_id":77156600,"question_id":31980475,"body_markdown":"The trick is the [numbered parameter][1] in `rx.Replace`. only the first match is used. \r\n```c#\r\nString pattern = @&quot;The&quot;;\r\nRegex rx = new Regex(pattern);\r\n\r\nstring text = &quot;the The quick the brown fox  fox jumps over the lazy dog dog.&quot;;\r\n\r\nstring result = rx.Replace(text, &quot;&quot; , 1);\r\nConsole.WriteLine (result.Trim());\r\n```\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/dotnet/api/system.text.regularexpressions.regex.replace?view=net-7.0#system-text-regularexpressions-regex-replace(system-string-system-string-system-int32)","title":"Java to C# can&#39;t Translate code (Matcher.group() &amp; Matcher.replaceFirst)","body":"<p>The trick is the <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.text.regularexpressions.regex.replace?view=net-7.0#system-text-regularexpressions-regex-replace(system-string-system-string-system-int32)\" rel=\"nofollow noreferrer\">numbered parameter</a> in <code>rx.Replace</code>. only the first match is used.</p>\n<pre class=\"lang-cs prettyprint-override\"><code>String pattern = @&quot;The&quot;;\nRegex rx = new Regex(pattern);\n\nstring text = &quot;the The quick the brown fox  fox jumps over the lazy dog dog.&quot;;\n\nstring result = rx.Replace(text, &quot;&quot; , 1);\nConsole.WriteLine (result.Trim());\n</code></pre>\n"}],"owner":{"account_id":6782089,"reputation":63,"user_id":5221952,"display_name":"Page"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695376508,"creation_date":1439445416,"question_id":31980475,"body_markdown":"I&#39;m trying to translate a piece of code from java to c# but I can&#39;t find how to do it properly.\r\nThe piece i need to translate is this:\r\n(getPattern returns a Pattern and data is a type that has a pattern variable and an enum (TokenType))\r\n\r\n    Match matcher = data.getPattern().matcher(str);//ThisLine\r\n    if (matcher.find())//ThisLine\r\n    {\r\n         String token = matcher.group().trim();//This Line\r\n         str = matcher.replaceFirst(&quot;&quot;); //This Line\r\n\r\n         if (data.getType() == TokenType.String_Literal)\r\n         {\r\n              return (lastToken = new Token(token.Substring(1, token.Length - 1), TokenType.String_Literal));\r\n         }\r\n         else\r\n         {\r\n              return (lastToken = new Token(token, data.getType()));\r\n         }\r\n    }\r\n\r\n\r\n    \r\nI tried to translate it and got this:\r\n\r\n     Match matcher = data.getRegex().Match(str);\r\n     if (matcher.Success)\r\n     {\r\n          String token = matcher.Value.Trim();\r\n          str = data.getRegex().Replace(token, &quot;&quot;, 1);\r\n\r\n          if (data.getType() == TokenType.String_Literal)\r\n          {\r\n               return (lastToken = new Token(token.Substring(1, token.Length - 1), TokenType.String_Literal));\r\n          }\r\n          else\r\n          {\r\n               return (lastToken = new Token(token, data.getType()));\r\n          }\r\n     }\r\n\r\nI&#39;m not at 100% understanding with the code but the parts all seem to be the correct replacement, they seem to do the same thing (when i read about them). They don&#39;t give any errors but the problem is that the c# code doesn&#39;t behave like the java code correctly.  \r\n\r\nEdit: I simply cannot find the c# equivalent of these lines of code.\r\n\r\n\r\n    Matcher matcher = A_Pattern.matcher(A_String)\r\n    matcher = matcher.group().trim();\r\n    boolean A_bool = matcher.find\r\n    String Another_String = matcher.replaceFirst(&quot;&quot;);","title":"Java to C# can&#39;t Translate code (Matcher.group() &amp; Matcher.replaceFirst)","body":"<p>I'm trying to translate a piece of code from java to c# but I can't find how to do it properly.\nThe piece i need to translate is this:\n(getPattern returns a Pattern and data is a type that has a pattern variable and an enum (TokenType))</p>\n\n<pre><code>Match matcher = data.getPattern().matcher(str);//ThisLine\nif (matcher.find())//ThisLine\n{\n     String token = matcher.group().trim();//This Line\n     str = matcher.replaceFirst(\"\"); //This Line\n\n     if (data.getType() == TokenType.String_Literal)\n     {\n          return (lastToken = new Token(token.Substring(1, token.Length - 1), TokenType.String_Literal));\n     }\n     else\n     {\n          return (lastToken = new Token(token, data.getType()));\n     }\n}\n</code></pre>\n\n<p>I tried to translate it and got this:</p>\n\n<pre><code> Match matcher = data.getRegex().Match(str);\n if (matcher.Success)\n {\n      String token = matcher.Value.Trim();\n      str = data.getRegex().Replace(token, \"\", 1);\n\n      if (data.getType() == TokenType.String_Literal)\n      {\n           return (lastToken = new Token(token.Substring(1, token.Length - 1), TokenType.String_Literal));\n      }\n      else\n      {\n           return (lastToken = new Token(token, data.getType()));\n      }\n }\n</code></pre>\n\n<p>I'm not at 100% understanding with the code but the parts all seem to be the correct replacement, they seem to do the same thing (when i read about them). They don't give any errors but the problem is that the c# code doesn't behave like the java code correctly.  </p>\n\n<p>Edit: I simply cannot find the c# equivalent of these lines of code.</p>\n\n<pre><code>Matcher matcher = A_Pattern.matcher(A_String)\nmatcher = matcher.group().trim();\nboolean A_bool = matcher.find\nString Another_String = matcher.replaceFirst(\"\");\n</code></pre>\n"},{"tags":["java","kotlin","native","kotlin-native"],"comments":[{"owner":{"account_id":5168089,"reputation":26701,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":0,"creation_date":1512206768,"post_id":47604276,"comment_id":82171206,"body_markdown":"I guess you could normal `exit` function from C.","body":"I guess you could normal <code>exit</code> function from C."}],"answers":[{"comments":[{"owner":{"account_id":2406407,"reputation":3654,"user_id":2102748,"accept_rate":100,"display_name":"milosmns"},"score":0,"creation_date":1695376086,"post_id":48502754,"comment_id":136019199,"body_markdown":"Hmm, this is not available in commonMain. Is there an import missing?\nThe docs link is also broken.","body":"Hmm, this is not available in commonMain. Is there an import missing? The docs link is also broken."},{"owner":{"account_id":6473006,"reputation":27420,"user_id":6296561,"accept_rate":95,"display_name":"Zoe is on strike"},"score":0,"creation_date":1695376255,"post_id":48502754,"comment_id":136019230,"body_markdown":"@milosmns [Should still be valid](https://github.com/JetBrains/kotlin/blob/42af684ab7c4de3d337345a69de6c9356d77c5f9/kotlin-native/runtime/src/main/cpp/Natives.cpp#L106-L108). Not sure though, haven&#39;t  used Kotlin in a couple years","body":"@milosmns <a href=\"https://github.com/JetBrains/kotlin/blob/42af684ab7c4de3d337345a69de6c9356d77c5f9/kotlin-native/runtime/src/main/cpp/Natives.cpp#L106-L108\" rel=\"nofollow noreferrer\">Should still be valid</a>. Not sure though, haven&#39;t  used Kotlin in a couple years"},{"owner":{"account_id":2406407,"reputation":3654,"user_id":2102748,"accept_rate":100,"display_name":"milosmns"},"score":0,"creation_date":1695376405,"post_id":48502754,"comment_id":136019260,"body_markdown":"I found the new link (repo was moved), updating now. But still didn&#39;t work for me, it&#39;s not resolving the `system` package :/","body":"I found the new link (repo was moved), updating now. But still didn&#39;t work for me, it&#39;s not resolving the <code>system</code> package :/"}],"tags":[],"owner":{"account_id":6473006,"reputation":27420,"user_id":6296561,"accept_rate":95,"display_name":"Zoe is on strike"},"comment_count":3,"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1695376447,"creation_date":1517233575,"answer_id":48502754,"question_id":47604276,"body_markdown":"Use `exitProcess`:\r\n\r\n    import kotlin.system.exitProcess\r\n    ...\r\n    exitProcess(exitCode)\r\n\r\n[Declaration and documentation](https://github.com/JetBrains/kotlin/blob/master/kotlin-native/runtime/src/main/kotlin/kotlin/system/Process.kt#L19) in the Kotlin source code.\r\n\r\n","title":"Kotlin Native equivalent of System.exit(-1)","body":"<p>Use <code>exitProcess</code>:</p>\n<pre><code>import kotlin.system.exitProcess\n...\nexitProcess(exitCode)\n</code></pre>\n<p><a href=\"https://github.com/JetBrains/kotlin/blob/master/kotlin-native/runtime/src/main/kotlin/kotlin/system/Process.kt#L19\" rel=\"nofollow noreferrer\">Declaration and documentation</a> in the Kotlin source code.</p>\n"}],"owner":{"account_id":5372553,"reputation":3631,"user_id":4280615,"accept_rate":73,"display_name":"Nate Vaughan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9075,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":48502754,"answer_count":1,"score":13,"last_activity_date":1695376447,"creation_date":1512185383,"question_id":47604276,"body_markdown":"In the following Kotlin/JVM program `System.exit(-1)` stops the execution of the program with an error exit code:\r\n\r\n    fun main(args: Array&lt;String&gt;) {\r\n        if (args.size &lt; 2) {\r\n            println(&quot;too few args!&quot;)\r\n            System.exit(-1)\r\n        }\r\n        println(&quot;Hello, ${args[1]} from ${args[0]}&quot;)\r\n    }\r\n\r\nKotlin/Native does not have access to any Java classes, including `System`. So what would the equivalent function be for a Kotlin/Native program to stop execution of the program with an error code?","title":"Kotlin Native equivalent of System.exit(-1)","body":"<p>In the following Kotlin/JVM program <code>System.exit(-1)</code> stops the execution of the program with an error exit code:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    if (args.size &lt; 2) {\n        println(\"too few args!\")\n        System.exit(-1)\n    }\n    println(\"Hello, ${args[1]} from ${args[0]}\")\n}\n</code></pre>\n\n<p>Kotlin/Native does not have access to any Java classes, including <code>System</code>. So what would the equivalent function be for a Kotlin/Native program to stop execution of the program with an error code?</p>\n"},{"tags":["java","spring","jsp","spring-mvc","jsp-tags"],"comments":[{"owner":{"account_id":4474969,"reputation":1676,"user_id":3640307,"accept_rate":71,"display_name":"Sajib Acharya"},"score":1,"creation_date":1462996452,"post_id":37171879,"comment_id":61878875,"body_markdown":"Try this. Use a **getter** method to get the list of exercises from your `goal` object. `List&lt;Exercises&gt; e = goal.getExercises()`. Next iterate over this list like `for(Exercise ex : e) { ex.getParameter() ... }`. Tell me if this works.","body":"Try this. Use a <b>getter</b> method to get the list of exercises from your <code>goal</code> object. <code>List&lt;Exercises&gt; e = goal.getExercises()</code>. Next iterate over this list like <code>for(Exercise ex : e) { ex.getParameter() ... }</code>. Tell me if this works."},{"owner":{"account_id":3354052,"reputation":1057,"user_id":2817452,"display_name":"Leonardo Lobato"},"score":0,"creation_date":1462997631,"post_id":37171879,"comment_id":61879487,"body_markdown":"Thanks @SajibAcharya but one more thing, how my .jsp file should be structured to make it possible?","body":"Thanks @SajibAcharya but one more thing, how my .jsp file should be structured to make it possible?"},{"owner":{"account_id":4474969,"reputation":1676,"user_id":3640307,"accept_rate":71,"display_name":"Sajib Acharya"},"score":1,"creation_date":1462998185,"post_id":37171879,"comment_id":61879789,"body_markdown":"Though this is out of your current question context, but I thought you already knew how to do that since you mentioned you went through some tutorials. Anyway, look into [this](http://bitbybitblog.com/forms-and-data-models-in-spring-mvc/) tutorial, this&#39;ll give you a pretty good idea of what to do. We need to use wrapper classes and use spring forms since spring forms can handle only one object at a time. Or else if you are stuck, you should really ask a new question on that, as it literally forms a new question far apart from the current context.","body":"Though this is out of your current question context, but I thought you already knew how to do that since you mentioned you went through some tutorials. Anyway, look into <a href=\"http://bitbybitblog.com/forms-and-data-models-in-spring-mvc/\" rel=\"nofollow noreferrer\">this</a> tutorial, this&#39;ll give you a pretty good idea of what to do. We need to use wrapper classes and use spring forms since spring forms can handle only one object at a time. Or else if you are stuck, you should really ask a new question on that, as it literally forms a new question far apart from the current context."},{"owner":{"account_id":3354052,"reputation":1057,"user_id":2817452,"display_name":"Leonardo Lobato"},"score":0,"creation_date":1462998612,"post_id":37171879,"comment_id":61880033,"body_markdown":"That&#39;s the point, the form, with one object I can handle, the problem is when dealing with two objects, especially when one is nested inside the other like in the example I&#39;ve described above.","body":"That&#39;s the point, the form, with one object I can handle, the problem is when dealing with two objects, especially when one is nested inside the other like in the example I&#39;ve described above."},{"owner":{"account_id":4474969,"reputation":1676,"user_id":3640307,"accept_rate":71,"display_name":"Sajib Acharya"},"score":1,"creation_date":1462998828,"post_id":37171879,"comment_id":61880158,"body_markdown":"You cannot create a form with two objects. Since you can send only one object from within the Model. Use wrapper classes to literally wrap multiple classes as one.","body":"You cannot create a form with two objects. Since you can send only one object from within the Model. Use wrapper classes to literally wrap multiple classes as one."},{"owner":{"account_id":3354052,"reputation":1057,"user_id":2817452,"display_name":"Leonardo Lobato"},"score":0,"creation_date":1462999015,"post_id":37171879,"comment_id":61880253,"body_markdown":"ah! Okay I got it, thanks very much!","body":"ah! Okay I got it, thanks very much!"}],"owner":{"account_id":3354052,"reputation":1057,"user_id":2817452,"display_name":"Leonardo Lobato"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695376294,"creation_date":1462995572,"question_id":37171879,"body_markdown":"I&#39;m studying Spring MVC and I can&#39;t figure out how to retrieve nested information from a form in a .jsp file to my controller.\r\n\r\nLet&#39;s say I have a form page where the user put information about a `Goal` and multiple `Exercise`, each one represents one Object, so the POJO of `Goal` would be something like that:\r\n\r\n    public class Goal{\r\n        private List&lt;Exercise&gt; exercises = new ArrayList&lt;Exercise&gt;();\r\n        ...\r\n    }\r\n\r\nAnd my controller, something like that:\r\n\r\n    @Controller\r\n    public class GoalController {\r\n    \t\r\n    \t@Autowired\r\n    \tprivate GoalService goalService;\r\n    \t\r\n    \t@RequestMapping(value = &quot;addGoal&quot;, method = RequestMethod.POST)\r\n    \tpublic String updateGoal(@ModelAttribute(&quot;goal&quot;) Goal goal)   {\r\n    \r\n    \t\tgoalService.save(goal);\t\r\n    \t\treturn &quot;redirect:index.jsp&quot;;\r\n    \t}\r\n    }\r\n\r\nThe problem in this case is, I know how to get the `Goal` prior information, but I don&#39;t know how to get the `Exercise` information that is nested.\r\n\r\nI&#39;ve looked for some information about it, but just found articles talking about how to *show* nested information on the page, not *retrieve* it.\r\n\r\nHow should my .jsp page be structured to allow this?","title":"Retrieve nested information from a .JSP File/Form in Spring MVC","body":"<p>I'm studying Spring MVC and I can't figure out how to retrieve nested information from a form in a .jsp file to my controller.</p>\n<p>Let's say I have a form page where the user put information about a <code>Goal</code> and multiple <code>Exercise</code>, each one represents one Object, so the POJO of <code>Goal</code> would be something like that:</p>\n<pre><code>public class Goal{\n    private List&lt;Exercise&gt; exercises = new ArrayList&lt;Exercise&gt;();\n    ...\n}\n</code></pre>\n<p>And my controller, something like that:</p>\n<pre><code>@Controller\npublic class GoalController {\n    \n    @Autowired\n    private GoalService goalService;\n    \n    @RequestMapping(value = &quot;addGoal&quot;, method = RequestMethod.POST)\n    public String updateGoal(@ModelAttribute(&quot;goal&quot;) Goal goal)   {\n\n        goalService.save(goal); \n        return &quot;redirect:index.jsp&quot;;\n    }\n}\n</code></pre>\n<p>The problem in this case is, I know how to get the <code>Goal</code> prior information, but I don't know how to get the <code>Exercise</code> information that is nested.</p>\n<p>I've looked for some information about it, but just found articles talking about how to <em>show</em> nested information on the page, not <em>retrieve</em> it.</p>\n<p>How should my .jsp page be structured to allow this?</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":91900,"reputation":4872,"user_id":252116,"display_name":"Ilia K."},"score":1,"creation_date":1331730250,"post_id":9700871,"comment_id":12331031,"body_markdown":"Rule of thumb: 1) never use `yield()`; 2) use `sleep()` only when the program is *explicitly* required to wait for the specified amount of time (if you only need to &quot;wait a little bit&quot;, most chances are that you are doing it wrong and you need to implement a proper waiting/signaling mechanism).","body":"Rule of thumb: 1) never use <code>yield()</code>; 2) use <code>sleep()</code> only when the program is <i>explicitly</i> required to wait for the specified amount of time (if you only need to &quot;wait a little bit&quot;, most chances are that you are doing it wrong and you need to implement a proper waiting/signaling mechanism)."}],"answers":[{"comments":[{"owner":{"account_id":243765,"reputation":25215,"user_id":516138,"accept_rate":88,"display_name":"Nick"},"score":4,"creation_date":1331724303,"post_id":9700972,"comment_id":12328632,"body_markdown":"Also waiting on some synchronisation object such as a mutex.","body":"Also waiting on some synchronisation object such as a mutex."}],"tags":[],"owner":{"account_id":428148,"reputation":3078,"user_id":810277,"accept_rate":55,"display_name":"Anantha Krishnan"},"comment_count":1,"down_vote_count":0,"up_vote_count":155,"is_accepted":false,"score":155,"last_activity_date":1607008990,"creation_date":1331724150,"answer_id":9700972,"question_id":9700871,"body_markdown":"We can prevent a thread from execution by using any of the 3 methods of Thread class:\r\n\r\n1. `yield()` method pauses the currently executing thread temporarily for giving a chance to the remaining waiting threads of the same priority or higher priority to execute. If there is no waiting thread or all the waiting threads have a lower priority then the same thread will continue its execution. The yielded thread when it will get the chance for execution is decided by the thread scheduler whose behavior is vendor dependent.\r\n    \r\n2. `join()` If any executing thread t1 calls `join()` on t2 (i.e. `t2.join()`) immediately t1 will enter into waiting state until t2 completes its execution.\r\n    \r\n3. `sleep()` Based on our requirement we can make a thread to be in sleeping state for a specified period of time (hope not much explanation required for our favorite method).","title":"What is difference between sleep() method and yield() method of multi threading?","body":"<p>We can prevent a thread from execution by using any of the 3 methods of Thread class:</p>\n<ol>\n<li><p><code>yield()</code> method pauses the currently executing thread temporarily for giving a chance to the remaining waiting threads of the same priority or higher priority to execute. If there is no waiting thread or all the waiting threads have a lower priority then the same thread will continue its execution. The yielded thread when it will get the chance for execution is decided by the thread scheduler whose behavior is vendor dependent.</p>\n</li>\n<li><p><code>join()</code> If any executing thread t1 calls <code>join()</code> on t2 (i.e. <code>t2.join()</code>) immediately t1 will enter into waiting state until t2 completes its execution.</p>\n</li>\n<li><p><code>sleep()</code> Based on our requirement we can make a thread to be in sleeping state for a specified period of time (hope not much explanation required for our favorite method).</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":962030,"reputation":13691,"user_id":986169,"accept_rate":75,"display_name":"giorashc"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1331724173,"creation_date":1331724173,"answer_id":9700982,"question_id":9700871,"body_markdown":"Sleep causes thread to suspend itself for x milliseconds while yield suspends the thread and immediately moves it to the ready queue (the queue which the CPU uses to run threads). \r\n\r\n","title":"What is difference between sleep() method and yield() method of multi threading?","body":"<p>Sleep causes thread to suspend itself for x milliseconds while yield suspends the thread and immediately moves it to the ready queue (the queue which the CPU uses to run threads). </p>\n"},{"comments":[{"owner":{"account_id":8689428,"reputation":273,"user_id":6502722,"accept_rate":75,"display_name":"legend"},"score":0,"creation_date":1535116769,"post_id":9700983,"comment_id":90960348,"body_markdown":"as sleep method doesn&#39;t release the lock, so does it mean that no other thread can execute in that given object.","body":"as sleep method doesn&#39;t release the lock, so does it mean that no other thread can execute in that given object."},{"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"score":0,"creation_date":1535119382,"post_id":9700983,"comment_id":90962100,"body_markdown":"@legend: what lock? Neither sleep() nor yield() are in any way involved with synchronization or locks. You may be confusing them with Object.wait().","body":"@legend: what lock? Neither sleep() nor yield() are in any way involved with synchronization or locks. You may be confusing them with Object.wait()."},{"owner":{"account_id":8689428,"reputation":273,"user_id":6502722,"accept_rate":75,"display_name":"legend"},"score":0,"creation_date":1535163019,"post_id":9700983,"comment_id":90977654,"body_markdown":"I come across following tow points while reading difference between wait() and sleep().                                                                                                 wait(): release the lock for other objects to have chance to execute.\nsleep(): keep lock for at least t times if timeout specified or somebody interrupt.","body":"I come across following tow points while reading difference between wait() and sleep().                                                                                                 wait(): release the lock for other objects to have chance to execute. sleep(): keep lock for at least t times if timeout specified or somebody interrupt."},{"owner":{"account_id":8689428,"reputation":273,"user_id":6502722,"accept_rate":75,"display_name":"legend"},"score":0,"creation_date":1535163070,"post_id":9700983,"comment_id":90977659,"body_markdown":"what does this mean ?","body":"what does this mean ?"},{"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"score":3,"creation_date":1535211484,"post_id":9700983,"comment_id":90987714,"body_markdown":"@legend: what you read is very misleadingly worded, to the point that I would call it wrong. sleep() has nothing to do with locking, but *because of that* if a thread has locks on some object, it will keep those while sleeping (which is typically very bad). The purpose of sleep() is to do nothing for a fixed time.","body":"@legend: what you read is very misleadingly worded, to the point that I would call it wrong. sleep() has nothing to do with locking, but <i>because of that</i> if a thread has locks on some object, it will keep those while sleeping (which is typically very bad). The purpose of sleep() is to do nothing for a fixed time."},{"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"score":2,"creation_date":1535211687,"post_id":9700983,"comment_id":90987766,"body_markdown":"@legend: The purpose of wait() is not really to wait for a specific *time*, but for some condition to be fulfilled and then get notified via a call to notify(). And while waiting for that condition, the thread releases to lock *for the specific object that wait() is called on* so that other threads can work towards fulfilling the condition. But here as well, if the thread holds other locks, they are not released - and that is how deadlocks can happen.","body":"@legend: The purpose of wait() is not really to wait for a specific <i>time</i>, but for some condition to be fulfilled and then get notified via a call to notify(). And while waiting for that condition, the thread releases to lock <i>for the specific object that wait() is called on</i> so that other threads can work towards fulfilling the condition. But here as well, if the thread holds other locks, they are not released - and that is how deadlocks can happen."},{"owner":{"account_id":7447983,"reputation":211,"user_id":5663608,"display_name":"biswaranjan"},"score":0,"creation_date":1552015997,"post_id":9700983,"comment_id":96861696,"body_markdown":"To add more into sleep method context - sleep Causes the currently executing thread to sleep (temporarily cease execution) for the specified number of milliseconds, subject to the precision and accuracy of system timers and schedulers. The thread does not lose ownership of any monitors.This is the java specification mentions.","body":"To add more into sleep method context - sleep Causes the currently executing thread to sleep (temporarily cease execution) for the specified number of milliseconds, subject to the precision and accuracy of system timers and schedulers. The thread does not lose ownership of any monitors.This is the java specification mentions."}],"tags":[],"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"comment_count":7,"down_vote_count":2,"up_vote_count":115,"is_accepted":true,"score":113,"last_activity_date":1331724184,"creation_date":1331724184,"answer_id":9700983,"question_id":9700871,"body_markdown":"`sleep()` causes the thread to definitely stop executing for a given amount of time; if no other thread or process needs to be run, the CPU will be idle (and probably enter a power saving mode).\r\n\r\n`yield()` basically means that the thread is not doing anything particularly important and if any other threads or processes need to be run, they should. Otherwise, the current thread will continue to run.","title":"What is difference between sleep() method and yield() method of multi threading?","body":"<p><code>sleep()</code> causes the thread to definitely stop executing for a given amount of time; if no other thread or process needs to be run, the CPU will be idle (and probably enter a power saving mode).</p>\n\n<p><code>yield()</code> basically means that the thread is not doing anything particularly important and if any other threads or processes need to be run, they should. Otherwise, the current thread will continue to run.</p>\n"},{"comments":[{"owner":{"account_id":106654,"reputation":4139,"user_id":3941732,"accept_rate":80,"display_name":"NguyenDat"},"score":19,"creation_date":1337411136,"post_id":9701048,"comment_id":13831121,"body_markdown":"There are mistake in this flow: from Sleeping state to Ready-to-run we use interrupt() rather than notify() and notifyAll()","body":"There are mistake in this flow: from Sleeping state to Ready-to-run we use interrupt() rather than notify() and notifyAll()"},{"owner":{"account_id":375312,"reputation":91,"user_id":726062,"accept_rate":0,"display_name":"Amit"},"score":0,"creation_date":1413599088,"post_id":9701048,"comment_id":41516114,"body_markdown":"nice chart,it helps me to understand the life cycle of thread more deep and clear.","body":"nice chart,it helps me to understand the life cycle of thread more deep and clear."},{"owner":{"account_id":5116256,"reputation":778,"user_id":4101264,"accept_rate":62,"display_name":"rents"},"score":2,"creation_date":1439674503,"post_id":9701048,"comment_id":51960652,"body_markdown":"So many upvotes on this answer. but please note @NguyenDat &#39;s comment","body":"So many upvotes on this answer. but please note @NguyenDat &#39;s comment"},{"owner":{"account_id":1497191,"reputation":9670,"user_id":1402846,"accept_rate":90,"display_name":"Pang"},"score":0,"creation_date":1546391834,"post_id":9701048,"comment_id":94837451,"body_markdown":"Link at end of answer giving *&quot;This site can’t be reached | www.bpurcell.org took too long to respond&quot;*","body":"Link at end of answer giving <i>&quot;This site can’t be reached | www.bpurcell.org took too long to respond&quot;</i>"},{"owner":{"account_id":2427767,"reputation":692,"user_id":2119358,"accept_rate":74,"display_name":"Yogesh Kumar"},"score":0,"creation_date":1577942443,"post_id":9701048,"comment_id":105285393,"body_markdown":"why does sleeping thread needs Object.notify() or Object.notifyall() to get to ready-to-run state ?","body":"why does sleeping thread needs Object.notify() or Object.notifyall() to get to ready-to-run state ?"}],"tags":[],"owner":{"account_id":439593,"reputation":15022,"user_id":828625,"accept_rate":88,"display_name":"Kazekage Gaara"},"comment_count":5,"down_vote_count":1,"up_vote_count":34,"is_accepted":false,"score":33,"last_activity_date":1695376220,"creation_date":1331724407,"answer_id":9701048,"question_id":9700871,"body_markdown":"[Sleep()][1] causes the currently executing thread to sleep (temporarily cease execution).\r\n\r\n[Yield()][2] causes the currently executing thread object to temporarily pause and allow other threads to execute. \r\n\r\n\r\n ![enter image description here][3]\r\n\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#sleep%28long%29\r\n  [2]: http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#yield%28%29\r\n  [3]: http://i.stack.imgur.com/yZVZk.gif\r\n  ","title":"What is difference between sleep() method and yield() method of multi threading?","body":"<p><a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#sleep%28long%29\" rel=\"nofollow noreferrer\">Sleep()</a> causes the currently executing thread to sleep (temporarily cease execution).</p>\n<p><a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#yield%28%29\" rel=\"nofollow noreferrer\">Yield()</a> causes the currently executing thread object to temporarily pause and allow other threads to execute.</p>\n<p><img src=\"https://i.stack.imgur.com/yZVZk.gif\" alt=\"enter image description here\" /></p>\n"},{"tags":[],"owner":{"account_id":928111,"reputation":1021,"user_id":958470,"accept_rate":12,"display_name":"Sai Sunder"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1546492739,"creation_date":1390977662,"answer_id":21423891,"question_id":9700871,"body_markdown":"sleep()causes the thread to definitely stop executing for a given amount of time; if no other thread or process needs to be run, the CPU will be idle (and probably enter a power saving mode).\r\nyield()basically means that the thread is not doing anything particularly important and if any other threads or processes need to be run, they should. Otherwise, the current thread will continue to run.\r\n","title":"What is difference between sleep() method and yield() method of multi threading?","body":"<p>sleep()causes the thread to definitely stop executing for a given amount of time; if no other thread or process needs to be run, the CPU will be idle (and probably enter a power saving mode).\nyield()basically means that the thread is not doing anything particularly important and if any other threads or processes need to be run, they should. Otherwise, the current thread will continue to run.</p>\n"},{"tags":[],"owner":{"account_id":4306699,"reputation":51,"user_id":3518889,"display_name":"Preetham"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1397123593,"creation_date":1397123593,"answer_id":22984553,"question_id":9700871,"body_markdown":"Yield : will make thread to wait for the currently executing thread and the thread which has called yield() will attaches itself at the end of the thread execution. The thread which call yield() will be in Blocked state till its turn.\r\n\r\nSleep : will cause the thread to sleep in sleep mode for span of time mentioned in arguments. \r\n\r\nJoin : t1 and t2 are two threads , t2.join() is called then t1 enters into wait state until t2 completes execution. Then t1 will into runnable state then our specialist JVM thread scheduler will pick t1 based on criteria&#39;s. \r\n\r\n","title":"What is difference between sleep() method and yield() method of multi threading?","body":"<p>Yield : will make thread to wait for the currently executing thread and the thread which has called yield() will attaches itself at the end of the thread execution. The thread which call yield() will be in Blocked state till its turn.</p>\n\n<p>Sleep : will cause the thread to sleep in sleep mode for span of time mentioned in arguments. </p>\n\n<p>Join : t1 and t2 are two threads , t2.join() is called then t1 enters into wait state until t2 completes execution. Then t1 will into runnable state then our specialist JVM thread scheduler will pick t1 based on criteria's. </p>\n"},{"tags":[],"owner":{"account_id":4735248,"reputation":2938,"user_id":3829818,"display_name":"Prashant_M"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1547167678,"creation_date":1460125777,"answer_id":36502243,"question_id":9700871,"body_markdown":"**Yield**: It is a hint (not guaranteed) to the scheduler that you have done enough and that some other thread of same priority might run and use the CPU.\r\n\r\n    Thread.sleep();\r\n\r\n**Sleep**: It blocks the execution of that particular thread for a given time.\r\n\r\n    TimeUnit.MILLISECONDS.sleep(1000);","title":"What is difference between sleep() method and yield() method of multi threading?","body":"<p><strong>Yield</strong>: It is a hint (not guaranteed) to the scheduler that you have done enough and that some other thread of same priority might run and use the CPU.</p>\n\n<pre><code>Thread.sleep();\n</code></pre>\n\n<p><strong>Sleep</strong>: It blocks the execution of that particular thread for a given time.</p>\n\n<pre><code>TimeUnit.MILLISECONDS.sleep(1000);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8004185,"reputation":1391,"user_id":6037956,"display_name":"Soudipta Dutta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546394477,"creation_date":1524423316,"answer_id":49969599,"question_id":9700871,"body_markdown":"One way to request the current thread to relinquish CPU so that other threads can get a chance to execute is to use `yield` in Java.\r\n\r\n`yield` is a static method.\r\nIt doesn&#39;t say which other thread will get the CPU.\r\nIt is possible for the same thread to get back the CPU and start its execution again.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public class Solution9  {\r\n    \r\n    public static void main(String[] args) {\r\n    \t\tyclass yy = new yclass ();\r\n    \t\tThread t1= new Thread(yy);\r\n    \t\tt1.start();\r\n    \t\tfor (int i = 0; i &lt;3; i++) {\r\n    \t\t\tThread.yield();\r\n    \t\t\tSystem.out.println(&quot;during yield control =&gt; &quot; + Thread.currentThread().getName());\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n    class yclass implements Runnable{\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tfor (int i = 0; i &lt; 3; i++) {\r\n    \t\t\tSystem.out.println(&quot;control =&gt; &quot; + Thread.currentThread().getName());\r\n    \t\t}\r\n    \t}\r\n    }\r\n","title":"What is difference between sleep() method and yield() method of multi threading?","body":"<p>One way to request the current thread to relinquish CPU so that other threads can get a chance to execute is to use <code>yield</code> in Java.</p>\n\n<p><code>yield</code> is a static method.\nIt doesn't say which other thread will get the CPU.\nIt is possible for the same thread to get back the CPU and start its execution again.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Solution9  {\n\npublic static void main(String[] args) {\n        yclass yy = new yclass ();\n        Thread t1= new Thread(yy);\n        t1.start();\n        for (int i = 0; i &lt;3; i++) {\n            Thread.yield();\n            System.out.println(\"during yield control =&gt; \" + Thread.currentThread().getName());\n        }\n    }\n}\n\nclass yclass implements Runnable{\n\n    @Override\n    public void run() {\n        for (int i = 0; i &lt; 3; i++) {\n            System.out.println(\"control =&gt; \" + Thread.currentThread().getName());\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6689932,"reputation":81,"user_id":5159723,"display_name":"Pankaj Goyal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544418534,"creation_date":1525116585,"answer_id":50106977,"question_id":9700871,"body_markdown":"yield(): yield method is used to pause the execution of currently running process so that other waiting thread with the same priority will get CPU to execute.Threads with lower priority will not be executed on yield. if there is no waiting thread then this thread will start its execution.\r\n\r\njoin(): join method stops currently executing thread and wait for another to complete on which in calls the join method after that it will resume its own execution.\r\n\r\n\r\nFor detailed explanation, see [this link][1].\r\n\r\n\r\n  [1]: https://theweblearn.blogspot.in/2018/04/difference-between-yield-and-join.html","title":"What is difference between sleep() method and yield() method of multi threading?","body":"<p>yield(): yield method is used to pause the execution of currently running process so that other waiting thread with the same priority will get CPU to execute.Threads with lower priority will not be executed on yield. if there is no waiting thread then this thread will start its execution.</p>\n\n<p>join(): join method stops currently executing thread and wait for another to complete on which in calls the join method after that it will resume its own execution.</p>\n\n<p>For detailed explanation, see <a href=\"https://theweblearn.blogspot.in/2018/04/difference-between-yield-and-join.html\" rel=\"nofollow noreferrer\">this link</a>.</p>\n"},{"comments":[{"owner":{"account_id":2731417,"reputation":2195,"user_id":2486496,"accept_rate":100,"display_name":"gravity"},"score":2,"creation_date":1548360861,"post_id":54354365,"comment_id":95524371,"body_markdown":"Is there a significant difference between your answer and the already accepted one?","body":"Is there a significant difference between your answer and the already accepted one?"}],"tags":[],"owner":{"account_id":5999902,"reputation":111,"user_id":4713505,"display_name":"Sumit Singh"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1609871713,"creation_date":1548359622,"answer_id":54354365,"question_id":9700871,"body_markdown":"Yield():  method will stop the currently executing thread and give a chance to another thread of same priority which are waiting in queue. If thier is no thread then current thread will continue to execute. **CPU will never be in ideal state**.\r\n\r\nSleep(): method will stop the thread for particular time (time will be given in milisecond). If this is single thread which is running then **CPU will be in ideal state** at that period of time.\r\n\r\nBoth are static menthod.","title":"What is difference between sleep() method and yield() method of multi threading?","body":"<p>Yield():  method will stop the currently executing thread and give a chance to another thread of same priority which are waiting in queue. If thier is no thread then current thread will continue to execute. <strong>CPU will never be in ideal state</strong>.</p>\n<p>Sleep(): method will stop the thread for particular time (time will be given in milisecond). If this is single thread which is running then <strong>CPU will be in ideal state</strong> at that period of time.</p>\n<p>Both are static menthod.</p>\n"},{"tags":[],"owner":{"account_id":19849639,"reputation":1,"user_id":14540401,"display_name":"asxd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603963877,"creation_date":1603951672,"answer_id":64585851,"question_id":9700871,"body_markdown":"`sleep()` causes the thread to definitely stop executing for a given amount of time; if no other thread or process needs to be run, the CPU will be idle (and probably enter a power saving mode).  \r\n\r\n`yield()` basically means that the thread is not doing anything particularly important and if any other threads or processes need to be run, they should. Otherwise, the current thread will continue to run.","title":"What is difference between sleep() method and yield() method of multi threading?","body":"<p><code>sleep()</code> causes the thread to definitely stop executing for a given amount of time; if no other thread or process needs to be run, the CPU will be idle (and probably enter a power saving mode).</p>\n<p><code>yield()</code> basically means that the thread is not doing anything particularly important and if any other threads or processes need to be run, they should. Otherwise, the current thread will continue to run.</p>\n"},{"tags":[],"owner":{"account_id":19273932,"reputation":11,"user_id":14087366,"display_name":"Incredible 1710"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604771601,"creation_date":1604771601,"answer_id":64730726,"question_id":9700871,"body_markdown":"Both methods are used to prevent thread execution.\r\nBut specifically,\r\nsleep():\r\npurpose:if a thread don&#39;t want to perform any operation for particular amount of time then we should go for sleep().for e.x. slide show .\r\nyield():\r\npurpose:if a thread wants to pause it&#39;s execution to give chance of execution to another waiting threads of same priority.thread which requires more execution time should call yield() in between execution.\r\n\r\nNote:some platform may not provide proper support for yield() . because underlying system may not provide support for preemptive scheduling.moreover yield() is native method.","title":"What is difference between sleep() method and yield() method of multi threading?","body":"<p>Both methods are used to prevent thread execution.\nBut specifically,\nsleep():\npurpose:if a thread don't want to perform any operation for particular amount of time then we should go for sleep().for e.x. slide show .\nyield():\npurpose:if a thread wants to pause it's execution to give chance of execution to another waiting threads of same priority.thread which requires more execution time should call yield() in between execution.</p>\n<p>Note:some platform may not provide proper support for yield() . because underlying system may not provide support for preemptive scheduling.moreover yield() is native method.</p>\n"}],"owner":{"account_id":463980,"reputation":6172,"user_id":867206,"accept_rate":14,"display_name":"Ajay Takur"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170948,"favorite_count":0,"down_vote_count":2,"up_vote_count":73,"accepted_answer_id":9700983,"answer_count":12,"score":71,"last_activity_date":1695376220,"creation_date":1331723823,"question_id":9700871,"body_markdown":"As currently executing thread while it encounters the call [`sleep()`][1] then thread moves immediately into sleeping stat.\r\nWhereas for [`yield()`][2] thread moves into *runnable* state / *ready* state. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#sleep%28long%29\r\n  [2]: http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#yield%28%29","title":"What is difference between sleep() method and yield() method of multi threading?","body":"<p>As currently executing thread while it encounters the call <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#sleep%28long%29\" rel=\"noreferrer\"><code>sleep()</code></a> then thread moves immediately into sleeping stat.\nWhereas for <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#yield%28%29\" rel=\"noreferrer\"><code>yield()</code></a> thread moves into <em>runnable</em> state / <em>ready</em> state.</p>\n"},{"tags":["java","maven","compilation","google-cloud-dataflow","apache-beam"],"comments":[{"owner":{"account_id":27880607,"reputation":314,"user_id":21289117,"display_name":"XQ Hu"},"score":0,"creation_date":1695504189,"post_id":77156564,"comment_id":136033993,"body_markdown":"Have you checked this example? https://github.com/GoogleCloudPlatform/dataflow-cookbook/tree/main/Java","body":"Have you checked this example? <a href=\"https://github.com/GoogleCloudPlatform/dataflow-cookbook/tree/main/Java\" rel=\"nofollow noreferrer\">github.com/GoogleCloudPlatform/dataflow-cookbook/tree/main/J&zwnj;&#8203;ava</a>"},{"owner":{"account_id":29507894,"reputation":3,"user_id":22613539,"display_name":"kbenzakrilelp"},"score":0,"creation_date":1695721949,"post_id":77156564,"comment_id":136059261,"body_markdown":"Well, I&#39;ve seen many examples, but I still don&#39;t understand how it works","body":"Well, I&#39;ve seen many examples, but I still don&#39;t understand how it works"},{"owner":{"account_id":1874246,"reputation":1390,"user_id":1695821,"display_name":"Bruno Volpato"},"score":0,"creation_date":1695905065,"post_id":77156564,"comment_id":136087930,"body_markdown":"We have some plans to make a more self-contained project / Maven archetype, but there&#39;s some work to do. I&#39;d say that for now you could simply start off from this POM https://github.com/GoogleCloudPlatform/DataflowTemplates/blob/main/v1/pom.xml so you can compile your code.","body":"We have some plans to make a more self-contained project / Maven archetype, but there&#39;s some work to do. I&#39;d say that for now you could simply start off from this POM <a href=\"https://github.com/GoogleCloudPlatform/DataflowTemplates/blob/main/v1/pom.xml\" rel=\"nofollow noreferrer\">github.com/GoogleCloudPlatform/DataflowTemplates/blob/main/v&zwnj;&#8203;1/&hellip;</a> so you can compile your code."}],"owner":{"account_id":29507894,"reputation":3,"user_id":22613539,"display_name":"kbenzakrilelp"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695376214,"creation_date":1695376214,"question_id":77156564,"body_markdown":"I&#39;m trying to write a Dataflow Classic Template in Java which I&#39;m not used to. I copied the code from the **Bulk Decompress Cloud Storage Files** template that decompress gzip files, then I added some lines to extract files from the resulting tar file (as in my case, I&#39;m trying to decompress a .tar.gz file).\r\nHowever, I get stuck compiling the code with Maven, I don&#39;t know how to do my files and folder structure, and I really don&#39;t know what to write in the pom.xml file.\r\n\r\n\r\n\r\n```\r\n/*\r\n * Copyright (C) 2018 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not\r\n * use this file except in compliance with the License. You may obtain a copy of\r\n * the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT\r\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\r\n * License for the specific language governing permissions and limitations under\r\n * the License.\r\n */\r\npackage com.google.cloud.teleport.templates;\r\n\r\nimport com.google.cloud.teleport.metadata.Template;\r\nimport com.google.cloud.teleport.metadata.TemplateCategory;\r\nimport com.google.cloud.teleport.metadata.TemplateParameter;\r\nimport com.google.cloud.teleport.templates.BulkDecompressor.Options;\r\nimport com.google.common.annotations.VisibleForTesting;\r\nimport com.google.common.collect.ImmutableList;\r\nimport com.google.common.io.ByteStreams;\r\nimport com.google.common.io.Files;\r\nimport java.io.IOException;\r\nimport java.io.StringWriter;\r\nimport java.nio.channels.ReadableByteChannel;\r\nimport java.nio.channels.WritableByteChannel;\r\nimport java.util.Set;\r\nimport java.util.stream.Collectors;\r\nimport java.util.stream.Stream;\r\nimport javax.annotation.Nullable;\r\nimport org.apache.beam.sdk.Pipeline;\r\nimport org.apache.beam.sdk.PipelineResult;\r\nimport org.apache.beam.sdk.io.Compression;\r\nimport org.apache.beam.sdk.io.FileIO;\r\nimport org.apache.beam.sdk.io.FileSystems;\r\nimport org.apache.beam.sdk.io.TextIO;\r\nimport org.apache.beam.sdk.io.fs.MatchResult;\r\nimport org.apache.beam.sdk.io.fs.MoveOptions;\r\nimport org.apache.beam.sdk.io.fs.ResolveOptions.StandardResolveOptions;\r\nimport org.apache.beam.sdk.io.fs.ResourceId;\r\nimport org.apache.beam.sdk.options.PipelineOptions;\r\nimport org.apache.beam.sdk.options.PipelineOptionsFactory;\r\nimport org.apache.beam.sdk.options.Validation.Required;\r\nimport org.apache.beam.sdk.options.ValueProvider;\r\nimport org.apache.beam.sdk.transforms.DoFn;\r\nimport org.apache.beam.sdk.transforms.MapElements;\r\nimport org.apache.beam.sdk.transforms.ParDo;\r\nimport org.apache.beam.sdk.util.MimeTypes;\r\nimport org.apache.beam.sdk.values.KV;\r\nimport org.apache.beam.sdk.values.PCollectionTuple;\r\nimport org.apache.beam.sdk.values.TupleTag;\r\nimport org.apache.beam.sdk.values.TupleTagList;\r\nimport org.apache.beam.sdk.values.TypeDescriptors;\r\nimport org.apache.commons.compress.archivers.tar.TarArchiveEntry;\r\nimport org.apache.commons.compress.archivers.tar.TarArchiveInputStream;\r\nimport org.apache.commons.csv.CSVFormat;\r\nimport org.apache.commons.csv.CSVPrinter;\r\nimport org.apache.commons.csv.QuoteMode;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\n\r\n/**\r\n * This pipeline decompresses file(s) from Google Cloud Storage and re-uploads them to a destination\r\n * location.\r\n *\r\n * &lt;p&gt;&lt;b&gt;Parameters&lt;/b&gt;\r\n *\r\n * &lt;p&gt;The {@code --inputFilePattern} parameter specifies a file glob to process. Files found can be\r\n * expressed in the following formats:\r\n *\r\n * &lt;pre&gt;\r\n * --inputFilePattern=gs://bucket-name/compressed-dir/*\r\n * --inputFilePattern=gs://bucket-name/compressed-dir/demo*.gz\r\n * &lt;/pre&gt;\r\n *\r\n * &lt;p&gt;The {@code --outputDirectory} parameter can be expressed in the following formats:\r\n *\r\n * &lt;pre&gt;\r\n * --outputDirectory=gs://bucket-name\r\n * --outputDirectory=gs://bucket-name/decompressed-dir\r\n * &lt;/pre&gt;\r\n *\r\n * &lt;p&gt;The {@code --outputFailureFile} parameter indicates the file to write the names of the files\r\n * which failed decompression and their associated error messages. This file can then be used for\r\n * subsequent processing by another process outside of Dataflow (e.g. send an email with the\r\n * failures, etc.). If there are no failures, the file will still be created but will be empty. The\r\n * failure file structure contains both the file that caused the error and the error message in CSV\r\n * format. The file will contain one header row and two columns (Filename, Error). The filename\r\n * output to the failureFile will be the full path of the file for ease of debugging.\r\n *\r\n * &lt;pre&gt;\r\n * --outputFailureFile=gs://bucket-name/decompressed-dir/failed.csv\r\n * &lt;/pre&gt;\r\n *\r\n * &lt;p&gt;Example Output File:\r\n *\r\n * &lt;pre&gt;\r\n * Filename,Error\r\n * gs://docs-demo/compressedFile.gz, File is malformed or not compressed in BZIP2 format.\r\n * &lt;/pre&gt;\r\n *\r\n * &lt;p&gt;Check out &lt;a\r\n * href=&quot;https://github.com/GoogleCloudPlatform/DataflowTemplates/blob/main/v1/README_Bulk_Decompress_GCS_Files.md&quot;&gt;README&lt;/a&gt;\r\n * for instructions on how to use or modify this template.\r\n */\r\n@Template(\r\n    name = &quot;Bulk_Decompress_GCS_Files&quot;,\r\n    category = TemplateCategory.UTILITIES,\r\n    displayName = &quot;Bulk Decompress Files on Cloud Storage&quot;,\r\n    description = {\r\n      &quot;The Bulk Decompress Cloud Storage Files template is a batch pipeline that decompresses files on Cloud Storage to a specified location. &quot;\r\n          + &quot;This functionality is useful when you want to use compressed data to minimize network bandwidth costs during a migration, but would like to maximize analytical processing speed by operating on uncompressed data after migration. &quot;\r\n          + &quot;The pipeline automatically handles multiple compression modes during a single run and determines the decompression mode to use based on the file extension (.bzip2, .deflate, .gz, .zip).&quot;,\r\n      &quot;Note: The Bulk Decompress Cloud Storage Files template is intended for single compressed files and not compressed folders.&quot;\r\n    },\r\n    optionsClass = Options.class,\r\n    documentation =\r\n        &quot;https://cloud.google.com/dataflow/docs/guides/templates/provided/bulk-decompress-cloud-storage&quot;,\r\n    contactInformation = &quot;https://cloud.google.com/support&quot;,\r\n    requirements = {\r\n      &quot;The files to decompress must be in one of the following formats: Bzip2, Deflate, and Gzip.&quot;,\r\n      &quot;The output directory must exist prior to running the pipeline.&quot;\r\n    })\r\npublic class BulkDecompressor {\r\n\r\n  /** The logger to output status messages to. */\r\n  private static final Logger LOG = LoggerFactory.getLogger(BulkDecompressor.class);\r\n\r\n  /**\r\n   * A list of the {@link Compression} values excluding {@link Compression#AUTO} and {@link\r\n   * Compression#UNCOMPRESSED}.\r\n   */\r\n  @VisibleForTesting\r\n  static final Set&lt;Compression&gt; SUPPORTED_COMPRESSIONS =\r\n      Stream.of(Compression.values())\r\n          .filter(value -&gt; value != Compression.AUTO &amp;&amp; value != Compression.UNCOMPRESSED)\r\n          .collect(Collectors.toSet());\r\n\r\n  /** The error msg given when the pipeline matches a file but cannot determine the compression. */\r\n  @VisibleForTesting\r\n  static final String UNCOMPRESSED_ERROR_MSG =\r\n      &quot;Skipping file %s because it did not match any compression mode (%s)&quot;;\r\n\r\n  @VisibleForTesting\r\n  static final String MALFORMED_ERROR_MSG =\r\n      &quot;The file resource %s is malformed or not in %s compressed format.&quot;;\r\n\r\n  /** The tag used to identify the main output of the {@link Decompress} DoFn. */\r\n  @VisibleForTesting\r\n  static final TupleTag&lt;String&gt; DECOMPRESS_MAIN_OUT_TAG = new TupleTag&lt;String&gt;() {};\r\n\r\n  /** The tag used to identify the dead-letter sideOutput of the {@link Decompress} DoFn. */\r\n  @VisibleForTesting\r\n  static final TupleTag&lt;KV&lt;String, String&gt;&gt; DEADLETTER_TAG = new TupleTag&lt;KV&lt;String, String&gt;&gt;() {};\r\n\r\n  /**\r\n   * The {@link Options} class provides the custom execution options passed by the executor at the\r\n   * command-line.\r\n   */\r\n  public interface Options extends PipelineOptions {\r\n    @TemplateParameter.GcsReadFile(\r\n        order = 1,\r\n        description = &quot;Input Cloud Storage File(s)&quot;,\r\n        helpText = &quot;The Cloud Storage location of the files you&#39;d like to process.&quot;,\r\n        example = &quot;gs://your-bucket/your-files/*.gz&quot;)\r\n    @Required\r\n    ValueProvider&lt;String&gt; getInputFilePattern();\r\n\r\n    void setInputFilePattern(ValueProvider&lt;String&gt; value);\r\n\r\n    @TemplateParameter.GcsWriteFolder(\r\n        order = 2,\r\n        description = &quot;Output file directory in Cloud Storage&quot;,\r\n        helpText =\r\n            &quot;The path and filename prefix for writing output files. Must end with a slash. DateTime formatting is used to parse directory path for date &amp; time formatters.&quot;,\r\n        example = &quot;gs://your-bucket/decompressed/&quot;)\r\n    @Required\r\n    ValueProvider&lt;String&gt; getOutputDirectory();\r\n\r\n    void setOutputDirectory(ValueProvider&lt;String&gt; value);\r\n\r\n    @TemplateParameter.GcsWriteFile(\r\n        order = 3,\r\n        description = &quot;The output file for failures during the decompression process&quot;,\r\n        helpText =\r\n            &quot;The output file to write failures to during the decompression process. If there are no failures, the file will still be created but will be empty. The contents will be one line for each file which failed decompression in CSV format (Filename, Error). Note that this parameter will allow the pipeline to continue processing in the event of a failure.&quot;,\r\n        example = &quot;gs://your-bucket/decompressed/failed.csv&quot;)\r\n    @Required\r\n    ValueProvider&lt;String&gt; getOutputFailureFile();\r\n\r\n    void setOutputFailureFile(ValueProvider&lt;String&gt; value);\r\n  }\r\n\r\n  /**\r\n   * The main entry-point for pipeline execution. This method will start the pipeline but will not\r\n   * wait for it&#39;s execution to finish. If blocking execution is required, use the {@link\r\n   * BulkDecompressor#run(Options)} method to start the pipeline and invoke {@code\r\n   * result.waitUntilFinish()} on the {@link PipelineResult}.\r\n   *\r\n   * @param args The command-line args passed by the executor.\r\n   */\r\n  public static void main(String[] args) {\r\n\r\n    Options options = PipelineOptionsFactory.fromArgs(args).withValidation().as(Options.class);\r\n\r\n    run(options);\r\n  }\r\n\r\n  /**\r\n   * Runs the pipeline to completion with the specified options. This method does not wait until the\r\n   * pipeline is finished before returning. Invoke {@code result.waitUntilFinish()} on the result\r\n   * object to block until the pipeline is finished running if blocking programmatic execution is\r\n   * required.\r\n   *\r\n   * @param options The execution options.\r\n   * @return The pipeline result.\r\n   */\r\n  public static PipelineResult run(Options options) {\r\n\r\n    /*\r\n     * Steps:\r\n     *   1) Find all files matching the input pattern\r\n     *   2) Decompress the files found and output them to the output directory\r\n     *   3) Write any errors to the failure output file\r\n     */\r\n\r\n    // Create the pipeline\r\n    Pipeline pipeline = Pipeline.create(options);\r\n\r\n    // Run the pipeline over the work items.\r\n    PCollectionTuple decompressOut =\r\n        pipeline\r\n            .apply(&quot;MatchFile(s)&quot;, FileIO.match().filepattern(options.getInputFilePattern()))\r\n            .apply(\r\n                &quot;DecompressFile(s)&quot;,\r\n                ParDo.of(new Decompress(options.getOutputDirectory()))\r\n                    .withOutputTags(DECOMPRESS_MAIN_OUT_TAG, TupleTagList.of(DEADLETTER_TAG)));\r\n\r\n    decompressOut\r\n        .get(DEADLETTER_TAG)\r\n        .apply(\r\n            &quot;FormatErrors&quot;,\r\n            MapElements.into(TypeDescriptors.strings())\r\n                .via(\r\n                    kv -&gt; {\r\n                      StringWriter stringWriter = new StringWriter();\r\n                      try {\r\n                        CSVPrinter printer =\r\n                            new CSVPrinter(\r\n                                stringWriter,\r\n                                CSVFormat.DEFAULT\r\n                                    .withEscape(&#39;\\\\&#39;)\r\n                                    .withQuoteMode(QuoteMode.NONE)\r\n                                    .withRecordSeparator(&#39;\\n&#39;));\r\n                        printer.printRecord(kv.getKey(), kv.getValue());\r\n                      } catch (IOException e) {\r\n                        throw new RuntimeException(e);\r\n                      }\r\n\r\n                      return stringWriter.toString();\r\n                    }))\r\n\r\n        // We don&#39;t expect error files to be large so we&#39;ll create a single\r\n        // file for ease of reprocessing by processes outside of Dataflow.\r\n        .apply(\r\n            &quot;WriteErrorFile&quot;,\r\n            TextIO.write()\r\n                .to(options.getOutputFailureFile())\r\n                .withHeader(&quot;Filename,Error&quot;)\r\n                .withoutSharding());\r\n\r\n    return pipeline.run();\r\n  }\r\n\r\n  /**\r\n   * Performs the decompression of an object on Google Cloud Storage and uploads the decompressed\r\n   * object back to a specified destination location.\r\n   */\r\n  @SuppressWarnings(&quot;serial&quot;)\r\n  public static class Decompress extends DoFn&lt;MatchResult.Metadata, String&gt; {\r\n\r\n    private final ValueProvider&lt;String&gt; destinationLocation;\r\n\r\n    Decompress(ValueProvider&lt;String&gt; destinationLocation) {\r\n      this.destinationLocation = destinationLocation;\r\n    }\r\n\r\n    @ProcessElement\r\n    public void processElement(ProcessContext context) {\r\n      ResourceId inputFile = context.element().resourceId();\r\n\r\n      // Output a record to the failure file if the file doesn&#39;t match a known compression.\r\n      if (!Compression.AUTO.isCompressed(inputFile.toString())) {\r\n        String errorMsg =\r\n            String.format(UNCOMPRESSED_ERROR_MSG, inputFile.toString(), SUPPORTED_COMPRESSIONS);\r\n\r\n        context.output(DEADLETTER_TAG, KV.of(inputFile.toString(), errorMsg));\r\n      } else {\r\n        try {\r\n          ResourceId outputFile = decompress(inputFile);\r\n          context.output(outputFile.toString());\r\n        } catch (IOException e) {\r\n          LOG.error(e.getMessage());\r\n          context.output(DEADLETTER_TAG, KV.of(inputFile.toString(), e.getMessage()));\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Decompresses the inputFile using the specified compression and outputs to the main output of\r\n     * the {@link Decompress} doFn. Files output to the destination will be first written as temp\r\n     * files with a &quot;temp-&quot; prefix within the output directory. If a file fails decompression, the\r\n     * filename and the associated error will be output to the dead-letter.\r\n     *\r\n     * @param inputFile The inputFile to decompress.\r\n     * @return A {@link ResourceId} which points to the resulting file from the decompression.\r\n     */\r\n    private ResourceId decompress(ResourceId inputFile) throws IOException {\r\n      // Remove the compressed extension from the file. Example: demo.txt.gz -&gt; demo.txt\r\n      String outputFilename = Files.getNameWithoutExtension(inputFile.toString());\r\n\r\n      // Resolve the necessary resources to perform the transfer.\r\n      ResourceId outputDir = FileSystems.matchNewResource(destinationLocation.get(), true);\r\n      ResourceId outputFile =\r\n          outputDir.resolve(outputFilename, StandardResolveOptions.RESOLVE_FILE);\r\n      ResourceId tempFile =\r\n          outputDir.resolve(\r\n              Files.getFileExtension(inputFile.toString()) + &quot;-temp-&quot; + outputFilename,\r\n              StandardResolveOptions.RESOLVE_FILE);\r\n\r\n      // Resolve the compression\r\n      Compression compression = Compression.detect(inputFile.toString());\r\n\r\n      // Perform the copy of the decompressed channel into the destination.\r\n      try (ReadableByteChannel readerChannel =\r\n          compression.readDecompressed(FileSystems.open(inputFile))) {\r\n        try (WritableByteChannel writerChannel = FileSystems.create(tempFile, MimeTypes.TEXT)) {\r\n          ByteStreams.copy(readerChannel, writerChannel);\r\n        }\r\n\r\n        // Rename the temp file to the output file.\r\n        FileSystems.rename(\r\n            ImmutableList.of(tempFile),\r\n            ImmutableList.of(outputFile),\r\n            MoveOptions.StandardMoveOptions.IGNORE_MISSING_FILES);\r\n      } catch (IOException e) {\r\n        String msg = e.getMessage();\r\n\r\n        LOG.error(&quot;Error occurred during decompression of {}&quot;, inputFile.toString(), e);\r\n        throw new IOException(sanitizeDecompressionErrorMsg(msg, inputFile, compression));\r\n      }\r\n\r\n      return outputFile;\r\n    }\r\n\t\r\n\t/**\r\n\t * Extracts the files from a TAR archive.\r\n\t *\r\n\t * @param tarFile The input TAR file.\r\n\t * @param outputDir The directory where the extracted files should be placed.\r\n\t * @throws IOException If an error occurs during extraction.\r\n\t */\r\n\tprivate void extractTar(File tarFile, File outputDir) throws IOException {\r\n\t  try (FileInputStream fileInputStream = new FileInputStream(tarFile);\r\n\t\t   GZIPInputStream gzipInputStream = new GZIPInputStream(fileInputStream);\r\n\t\t   TarArchiveInputStream tarInputStream = new TarArchiveInputStream(gzipInputStream)) {\r\n\r\n\t\tTarArchiveEntry entry;\r\n\t\twhile ((entry = tarInputStream.getNextTarEntry()) != null) {\r\n\t\t  if (!entry.isDirectory()) {\r\n\t\t\tFile outputFile = new File(outputDir, entry.getName());\r\n\t\t\ttry (FileOutputStream fileOutputStream = new FileOutputStream(outputFile)) {\r\n\t\t\t  byte[] buffer = new byte[4096];\r\n\t\t\t  int bytesRead;\r\n\t\t\t  while ((bytesRead = tarInputStream.read(buffer)) != -1) {\r\n\t\t\t\tfileOutputStream.write(buffer, 0, bytesRead);\r\n\t\t\t  }\r\n\t\t\t}\r\n\t\t  }\r\n\t\t}\r\n\t  }\r\n\t}\r\n\r\n\r\n\r\n    /**\r\n     * The error messages coming from the compression library are not consistent across compression\r\n     * modes. Here we&#39;ll attempt to unify the messages to inform the user more clearly when we&#39;ve\r\n     * encountered a file which is not compressed or malformed. Note that GZIP and ZIP compression\r\n     * modes will not throw an exception when a decompression is attempted on a file which is not\r\n     * compressed.\r\n     *\r\n     * @param errorMsg The error message thrown during decompression.\r\n     * @param inputFile The input file which failed decompression.\r\n     * @param compression The compression mode used during decompression.\r\n     * @return The sanitized error message. If the error was not from a malformed file, the same\r\n     *     error message passed will be returned (if not null) or an empty string will be returned\r\n     *     (if null).\r\n     */\r\n    private String sanitizeDecompressionErrorMsg(\r\n        @Nullable String errorMsg, ResourceId inputFile, Compression compression) {\r\n      if (errorMsg != null\r\n          &amp;&amp; (errorMsg.contains(&quot;not in the BZip2 format&quot;)\r\n              || errorMsg.contains(&quot;incorrect header check&quot;))) {\r\n        errorMsg = String.format(MALFORMED_ERROR_MSG, inputFile.toString(), compression);\r\n      }\r\n\r\n      return errorMsg == null ? &quot;&quot; : errorMsg;\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\nI tried to write some pom.xml file myself and with the help of ChatGPT (which of course didn&#39;t help for such a complex Java code), but I couldn&#39;t compile at the end. I also tried with a pom.xml file that I found on Apache beam&#39;s github just to try, but it didn&#39;t work of course. \r\n\r\nFYI, I use this command as indicated by GCP to compile the code : \r\n\r\n```\r\n    mvn compile exec:java \\\r\n     -Dexec.mainClass=com.example.myclass \\\r\n     -Dexec.args=&quot;--runner=DataflowRunner \\\r\n                  --project=PROJECT_ID \\\r\n                  --stagingLocation=gs://BUCKET_NAME/staging \\\r\n                  --templateLocation=gs://BUCKET_NAME/templates/TEMPLATE_NAME \\\r\n                  --region=REGION&quot; \\\r\n     -P dataflow-runner\r\n```\r\n\r\nThanks a lot for your help","title":"Can&#39;t compile a custom Dataflow Classic Template","body":"<p>I'm trying to write a Dataflow Classic Template in Java which I'm not used to. I copied the code from the <strong>Bulk Decompress Cloud Storage Files</strong> template that decompress gzip files, then I added some lines to extract files from the resulting tar file (as in my case, I'm trying to decompress a .tar.gz file).\nHowever, I get stuck compiling the code with Maven, I don't know how to do my files and folder structure, and I really don't know what to write in the pom.xml file.</p>\n<pre><code>/*\n * Copyright (C) 2018 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not\n * use this file except in compliance with the License. You may obtain a copy of\n * the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */\npackage com.google.cloud.teleport.templates;\n\nimport com.google.cloud.teleport.metadata.Template;\nimport com.google.cloud.teleport.metadata.TemplateCategory;\nimport com.google.cloud.teleport.metadata.TemplateParameter;\nimport com.google.cloud.teleport.templates.BulkDecompressor.Options;\nimport com.google.common.annotations.VisibleForTesting;\nimport com.google.common.collect.ImmutableList;\nimport com.google.common.io.ByteStreams;\nimport com.google.common.io.Files;\nimport java.io.IOException;\nimport java.io.StringWriter;\nimport java.nio.channels.ReadableByteChannel;\nimport java.nio.channels.WritableByteChannel;\nimport java.util.Set;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\nimport javax.annotation.Nullable;\nimport org.apache.beam.sdk.Pipeline;\nimport org.apache.beam.sdk.PipelineResult;\nimport org.apache.beam.sdk.io.Compression;\nimport org.apache.beam.sdk.io.FileIO;\nimport org.apache.beam.sdk.io.FileSystems;\nimport org.apache.beam.sdk.io.TextIO;\nimport org.apache.beam.sdk.io.fs.MatchResult;\nimport org.apache.beam.sdk.io.fs.MoveOptions;\nimport org.apache.beam.sdk.io.fs.ResolveOptions.StandardResolveOptions;\nimport org.apache.beam.sdk.io.fs.ResourceId;\nimport org.apache.beam.sdk.options.PipelineOptions;\nimport org.apache.beam.sdk.options.PipelineOptionsFactory;\nimport org.apache.beam.sdk.options.Validation.Required;\nimport org.apache.beam.sdk.options.ValueProvider;\nimport org.apache.beam.sdk.transforms.DoFn;\nimport org.apache.beam.sdk.transforms.MapElements;\nimport org.apache.beam.sdk.transforms.ParDo;\nimport org.apache.beam.sdk.util.MimeTypes;\nimport org.apache.beam.sdk.values.KV;\nimport org.apache.beam.sdk.values.PCollectionTuple;\nimport org.apache.beam.sdk.values.TupleTag;\nimport org.apache.beam.sdk.values.TupleTagList;\nimport org.apache.beam.sdk.values.TypeDescriptors;\nimport org.apache.commons.compress.archivers.tar.TarArchiveEntry;\nimport org.apache.commons.compress.archivers.tar.TarArchiveInputStream;\nimport org.apache.commons.csv.CSVFormat;\nimport org.apache.commons.csv.CSVPrinter;\nimport org.apache.commons.csv.QuoteMode;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n\n/**\n * This pipeline decompresses file(s) from Google Cloud Storage and re-uploads them to a destination\n * location.\n *\n * &lt;p&gt;&lt;b&gt;Parameters&lt;/b&gt;\n *\n * &lt;p&gt;The {@code --inputFilePattern} parameter specifies a file glob to process. Files found can be\n * expressed in the following formats:\n *\n * &lt;pre&gt;\n * --inputFilePattern=gs://bucket-name/compressed-dir/*\n * --inputFilePattern=gs://bucket-name/compressed-dir/demo*.gz\n * &lt;/pre&gt;\n *\n * &lt;p&gt;The {@code --outputDirectory} parameter can be expressed in the following formats:\n *\n * &lt;pre&gt;\n * --outputDirectory=gs://bucket-name\n * --outputDirectory=gs://bucket-name/decompressed-dir\n * &lt;/pre&gt;\n *\n * &lt;p&gt;The {@code --outputFailureFile} parameter indicates the file to write the names of the files\n * which failed decompression and their associated error messages. This file can then be used for\n * subsequent processing by another process outside of Dataflow (e.g. send an email with the\n * failures, etc.). If there are no failures, the file will still be created but will be empty. The\n * failure file structure contains both the file that caused the error and the error message in CSV\n * format. The file will contain one header row and two columns (Filename, Error). The filename\n * output to the failureFile will be the full path of the file for ease of debugging.\n *\n * &lt;pre&gt;\n * --outputFailureFile=gs://bucket-name/decompressed-dir/failed.csv\n * &lt;/pre&gt;\n *\n * &lt;p&gt;Example Output File:\n *\n * &lt;pre&gt;\n * Filename,Error\n * gs://docs-demo/compressedFile.gz, File is malformed or not compressed in BZIP2 format.\n * &lt;/pre&gt;\n *\n * &lt;p&gt;Check out &lt;a\n * href=&quot;https://github.com/GoogleCloudPlatform/DataflowTemplates/blob/main/v1/README_Bulk_Decompress_GCS_Files.md&quot;&gt;README&lt;/a&gt;\n * for instructions on how to use or modify this template.\n */\n@Template(\n    name = &quot;Bulk_Decompress_GCS_Files&quot;,\n    category = TemplateCategory.UTILITIES,\n    displayName = &quot;Bulk Decompress Files on Cloud Storage&quot;,\n    description = {\n      &quot;The Bulk Decompress Cloud Storage Files template is a batch pipeline that decompresses files on Cloud Storage to a specified location. &quot;\n          + &quot;This functionality is useful when you want to use compressed data to minimize network bandwidth costs during a migration, but would like to maximize analytical processing speed by operating on uncompressed data after migration. &quot;\n          + &quot;The pipeline automatically handles multiple compression modes during a single run and determines the decompression mode to use based on the file extension (.bzip2, .deflate, .gz, .zip).&quot;,\n      &quot;Note: The Bulk Decompress Cloud Storage Files template is intended for single compressed files and not compressed folders.&quot;\n    },\n    optionsClass = Options.class,\n    documentation =\n        &quot;https://cloud.google.com/dataflow/docs/guides/templates/provided/bulk-decompress-cloud-storage&quot;,\n    contactInformation = &quot;https://cloud.google.com/support&quot;,\n    requirements = {\n      &quot;The files to decompress must be in one of the following formats: Bzip2, Deflate, and Gzip.&quot;,\n      &quot;The output directory must exist prior to running the pipeline.&quot;\n    })\npublic class BulkDecompressor {\n\n  /** The logger to output status messages to. */\n  private static final Logger LOG = LoggerFactory.getLogger(BulkDecompressor.class);\n\n  /**\n   * A list of the {@link Compression} values excluding {@link Compression#AUTO} and {@link\n   * Compression#UNCOMPRESSED}.\n   */\n  @VisibleForTesting\n  static final Set&lt;Compression&gt; SUPPORTED_COMPRESSIONS =\n      Stream.of(Compression.values())\n          .filter(value -&gt; value != Compression.AUTO &amp;&amp; value != Compression.UNCOMPRESSED)\n          .collect(Collectors.toSet());\n\n  /** The error msg given when the pipeline matches a file but cannot determine the compression. */\n  @VisibleForTesting\n  static final String UNCOMPRESSED_ERROR_MSG =\n      &quot;Skipping file %s because it did not match any compression mode (%s)&quot;;\n\n  @VisibleForTesting\n  static final String MALFORMED_ERROR_MSG =\n      &quot;The file resource %s is malformed or not in %s compressed format.&quot;;\n\n  /** The tag used to identify the main output of the {@link Decompress} DoFn. */\n  @VisibleForTesting\n  static final TupleTag&lt;String&gt; DECOMPRESS_MAIN_OUT_TAG = new TupleTag&lt;String&gt;() {};\n\n  /** The tag used to identify the dead-letter sideOutput of the {@link Decompress} DoFn. */\n  @VisibleForTesting\n  static final TupleTag&lt;KV&lt;String, String&gt;&gt; DEADLETTER_TAG = new TupleTag&lt;KV&lt;String, String&gt;&gt;() {};\n\n  /**\n   * The {@link Options} class provides the custom execution options passed by the executor at the\n   * command-line.\n   */\n  public interface Options extends PipelineOptions {\n    @TemplateParameter.GcsReadFile(\n        order = 1,\n        description = &quot;Input Cloud Storage File(s)&quot;,\n        helpText = &quot;The Cloud Storage location of the files you'd like to process.&quot;,\n        example = &quot;gs://your-bucket/your-files/*.gz&quot;)\n    @Required\n    ValueProvider&lt;String&gt; getInputFilePattern();\n\n    void setInputFilePattern(ValueProvider&lt;String&gt; value);\n\n    @TemplateParameter.GcsWriteFolder(\n        order = 2,\n        description = &quot;Output file directory in Cloud Storage&quot;,\n        helpText =\n            &quot;The path and filename prefix for writing output files. Must end with a slash. DateTime formatting is used to parse directory path for date &amp; time formatters.&quot;,\n        example = &quot;gs://your-bucket/decompressed/&quot;)\n    @Required\n    ValueProvider&lt;String&gt; getOutputDirectory();\n\n    void setOutputDirectory(ValueProvider&lt;String&gt; value);\n\n    @TemplateParameter.GcsWriteFile(\n        order = 3,\n        description = &quot;The output file for failures during the decompression process&quot;,\n        helpText =\n            &quot;The output file to write failures to during the decompression process. If there are no failures, the file will still be created but will be empty. The contents will be one line for each file which failed decompression in CSV format (Filename, Error). Note that this parameter will allow the pipeline to continue processing in the event of a failure.&quot;,\n        example = &quot;gs://your-bucket/decompressed/failed.csv&quot;)\n    @Required\n    ValueProvider&lt;String&gt; getOutputFailureFile();\n\n    void setOutputFailureFile(ValueProvider&lt;String&gt; value);\n  }\n\n  /**\n   * The main entry-point for pipeline execution. This method will start the pipeline but will not\n   * wait for it's execution to finish. If blocking execution is required, use the {@link\n   * BulkDecompressor#run(Options)} method to start the pipeline and invoke {@code\n   * result.waitUntilFinish()} on the {@link PipelineResult}.\n   *\n   * @param args The command-line args passed by the executor.\n   */\n  public static void main(String[] args) {\n\n    Options options = PipelineOptionsFactory.fromArgs(args).withValidation().as(Options.class);\n\n    run(options);\n  }\n\n  /**\n   * Runs the pipeline to completion with the specified options. This method does not wait until the\n   * pipeline is finished before returning. Invoke {@code result.waitUntilFinish()} on the result\n   * object to block until the pipeline is finished running if blocking programmatic execution is\n   * required.\n   *\n   * @param options The execution options.\n   * @return The pipeline result.\n   */\n  public static PipelineResult run(Options options) {\n\n    /*\n     * Steps:\n     *   1) Find all files matching the input pattern\n     *   2) Decompress the files found and output them to the output directory\n     *   3) Write any errors to the failure output file\n     */\n\n    // Create the pipeline\n    Pipeline pipeline = Pipeline.create(options);\n\n    // Run the pipeline over the work items.\n    PCollectionTuple decompressOut =\n        pipeline\n            .apply(&quot;MatchFile(s)&quot;, FileIO.match().filepattern(options.getInputFilePattern()))\n            .apply(\n                &quot;DecompressFile(s)&quot;,\n                ParDo.of(new Decompress(options.getOutputDirectory()))\n                    .withOutputTags(DECOMPRESS_MAIN_OUT_TAG, TupleTagList.of(DEADLETTER_TAG)));\n\n    decompressOut\n        .get(DEADLETTER_TAG)\n        .apply(\n            &quot;FormatErrors&quot;,\n            MapElements.into(TypeDescriptors.strings())\n                .via(\n                    kv -&gt; {\n                      StringWriter stringWriter = new StringWriter();\n                      try {\n                        CSVPrinter printer =\n                            new CSVPrinter(\n                                stringWriter,\n                                CSVFormat.DEFAULT\n                                    .withEscape('\\\\')\n                                    .withQuoteMode(QuoteMode.NONE)\n                                    .withRecordSeparator('\\n'));\n                        printer.printRecord(kv.getKey(), kv.getValue());\n                      } catch (IOException e) {\n                        throw new RuntimeException(e);\n                      }\n\n                      return stringWriter.toString();\n                    }))\n\n        // We don't expect error files to be large so we'll create a single\n        // file for ease of reprocessing by processes outside of Dataflow.\n        .apply(\n            &quot;WriteErrorFile&quot;,\n            TextIO.write()\n                .to(options.getOutputFailureFile())\n                .withHeader(&quot;Filename,Error&quot;)\n                .withoutSharding());\n\n    return pipeline.run();\n  }\n\n  /**\n   * Performs the decompression of an object on Google Cloud Storage and uploads the decompressed\n   * object back to a specified destination location.\n   */\n  @SuppressWarnings(&quot;serial&quot;)\n  public static class Decompress extends DoFn&lt;MatchResult.Metadata, String&gt; {\n\n    private final ValueProvider&lt;String&gt; destinationLocation;\n\n    Decompress(ValueProvider&lt;String&gt; destinationLocation) {\n      this.destinationLocation = destinationLocation;\n    }\n\n    @ProcessElement\n    public void processElement(ProcessContext context) {\n      ResourceId inputFile = context.element().resourceId();\n\n      // Output a record to the failure file if the file doesn't match a known compression.\n      if (!Compression.AUTO.isCompressed(inputFile.toString())) {\n        String errorMsg =\n            String.format(UNCOMPRESSED_ERROR_MSG, inputFile.toString(), SUPPORTED_COMPRESSIONS);\n\n        context.output(DEADLETTER_TAG, KV.of(inputFile.toString(), errorMsg));\n      } else {\n        try {\n          ResourceId outputFile = decompress(inputFile);\n          context.output(outputFile.toString());\n        } catch (IOException e) {\n          LOG.error(e.getMessage());\n          context.output(DEADLETTER_TAG, KV.of(inputFile.toString(), e.getMessage()));\n        }\n      }\n    }\n\n    /**\n     * Decompresses the inputFile using the specified compression and outputs to the main output of\n     * the {@link Decompress} doFn. Files output to the destination will be first written as temp\n     * files with a &quot;temp-&quot; prefix within the output directory. If a file fails decompression, the\n     * filename and the associated error will be output to the dead-letter.\n     *\n     * @param inputFile The inputFile to decompress.\n     * @return A {@link ResourceId} which points to the resulting file from the decompression.\n     */\n    private ResourceId decompress(ResourceId inputFile) throws IOException {\n      // Remove the compressed extension from the file. Example: demo.txt.gz -&gt; demo.txt\n      String outputFilename = Files.getNameWithoutExtension(inputFile.toString());\n\n      // Resolve the necessary resources to perform the transfer.\n      ResourceId outputDir = FileSystems.matchNewResource(destinationLocation.get(), true);\n      ResourceId outputFile =\n          outputDir.resolve(outputFilename, StandardResolveOptions.RESOLVE_FILE);\n      ResourceId tempFile =\n          outputDir.resolve(\n              Files.getFileExtension(inputFile.toString()) + &quot;-temp-&quot; + outputFilename,\n              StandardResolveOptions.RESOLVE_FILE);\n\n      // Resolve the compression\n      Compression compression = Compression.detect(inputFile.toString());\n\n      // Perform the copy of the decompressed channel into the destination.\n      try (ReadableByteChannel readerChannel =\n          compression.readDecompressed(FileSystems.open(inputFile))) {\n        try (WritableByteChannel writerChannel = FileSystems.create(tempFile, MimeTypes.TEXT)) {\n          ByteStreams.copy(readerChannel, writerChannel);\n        }\n\n        // Rename the temp file to the output file.\n        FileSystems.rename(\n            ImmutableList.of(tempFile),\n            ImmutableList.of(outputFile),\n            MoveOptions.StandardMoveOptions.IGNORE_MISSING_FILES);\n      } catch (IOException e) {\n        String msg = e.getMessage();\n\n        LOG.error(&quot;Error occurred during decompression of {}&quot;, inputFile.toString(), e);\n        throw new IOException(sanitizeDecompressionErrorMsg(msg, inputFile, compression));\n      }\n\n      return outputFile;\n    }\n    \n    /**\n     * Extracts the files from a TAR archive.\n     *\n     * @param tarFile The input TAR file.\n     * @param outputDir The directory where the extracted files should be placed.\n     * @throws IOException If an error occurs during extraction.\n     */\n    private void extractTar(File tarFile, File outputDir) throws IOException {\n      try (FileInputStream fileInputStream = new FileInputStream(tarFile);\n           GZIPInputStream gzipInputStream = new GZIPInputStream(fileInputStream);\n           TarArchiveInputStream tarInputStream = new TarArchiveInputStream(gzipInputStream)) {\n\n        TarArchiveEntry entry;\n        while ((entry = tarInputStream.getNextTarEntry()) != null) {\n          if (!entry.isDirectory()) {\n            File outputFile = new File(outputDir, entry.getName());\n            try (FileOutputStream fileOutputStream = new FileOutputStream(outputFile)) {\n              byte[] buffer = new byte[4096];\n              int bytesRead;\n              while ((bytesRead = tarInputStream.read(buffer)) != -1) {\n                fileOutputStream.write(buffer, 0, bytesRead);\n              }\n            }\n          }\n        }\n      }\n    }\n\n\n\n    /**\n     * The error messages coming from the compression library are not consistent across compression\n     * modes. Here we'll attempt to unify the messages to inform the user more clearly when we've\n     * encountered a file which is not compressed or malformed. Note that GZIP and ZIP compression\n     * modes will not throw an exception when a decompression is attempted on a file which is not\n     * compressed.\n     *\n     * @param errorMsg The error message thrown during decompression.\n     * @param inputFile The input file which failed decompression.\n     * @param compression The compression mode used during decompression.\n     * @return The sanitized error message. If the error was not from a malformed file, the same\n     *     error message passed will be returned (if not null) or an empty string will be returned\n     *     (if null).\n     */\n    private String sanitizeDecompressionErrorMsg(\n        @Nullable String errorMsg, ResourceId inputFile, Compression compression) {\n      if (errorMsg != null\n          &amp;&amp; (errorMsg.contains(&quot;not in the BZip2 format&quot;)\n              || errorMsg.contains(&quot;incorrect header check&quot;))) {\n        errorMsg = String.format(MALFORMED_ERROR_MSG, inputFile.toString(), compression);\n      }\n\n      return errorMsg == null ? &quot;&quot; : errorMsg;\n    }\n  }\n}\n</code></pre>\n<p>I tried to write some pom.xml file myself and with the help of ChatGPT (which of course didn't help for such a complex Java code), but I couldn't compile at the end. I also tried with a pom.xml file that I found on Apache beam's github just to try, but it didn't work of course.</p>\n<p>FYI, I use this command as indicated by GCP to compile the code :</p>\n<pre><code>    mvn compile exec:java \\\n     -Dexec.mainClass=com.example.myclass \\\n     -Dexec.args=&quot;--runner=DataflowRunner \\\n                  --project=PROJECT_ID \\\n                  --stagingLocation=gs://BUCKET_NAME/staging \\\n                  --templateLocation=gs://BUCKET_NAME/templates/TEMPLATE_NAME \\\n                  --region=REGION&quot; \\\n     -P dataflow-runner\n</code></pre>\n<p>Thanks a lot for your help</p>\n"},{"tags":["java","servlets","tomcat8"],"comments":[{"owner":{"account_id":1266294,"reputation":8027,"user_id":1223532,"accept_rate":67,"display_name":"MrSimpleMind"},"score":0,"creation_date":1453476717,"post_id":34950164,"comment_id":57632043,"body_markdown":"do you run from eclipse? or ... please let us know more about your environment, application, and settings.","body":"do you run from eclipse? or ... please let us know more about your environment, application, and settings."},{"owner":{"account_id":923153,"reputation":5107,"user_id":954442,"accept_rate":83,"display_name":"Andrew Regan"},"score":0,"creation_date":1453476933,"post_id":34950164,"comment_id":57632204,"body_markdown":"Are you definitely using Tomcat 8? Your post is tagged &#39;tomcat7&#39;...","body":"Are you definitely using Tomcat 8? Your post is tagged &#39;tomcat7&#39;..."},{"owner":{"account_id":4301027,"reputation":3755,"user_id":3514736,"accept_rate":42,"display_name":"Rahman"},"score":0,"creation_date":1453477143,"post_id":34950164,"comment_id":57632377,"body_markdown":"@AndrewRegan Sorry it was a mistake. I edited. I am using tomcat 8","body":"@AndrewRegan Sorry it was a mistake. I edited. I am using tomcat 8"},{"owner":{"account_id":1266294,"reputation":8027,"user_id":1223532,"accept_rate":67,"display_name":"MrSimpleMind"},"score":1,"creation_date":1453477152,"post_id":34950164,"comment_id":57632381,"body_markdown":"what I was thinking too, thats why I asked about the environment... do you use pom.xml ? maybe you should change the property to `&lt;tomcat.version&gt;`xxxx`&lt;/tomcat.version&gt;` to tomcat 8... ?","body":"what I was thinking too, thats why I asked about the environment... do you use pom.xml ? maybe you should change the property to <code>&lt;tomcat.version&gt;</code>xxxx<code>&lt;&#47;tomcat.version&gt;</code> to tomcat 8... ?"},{"owner":{"account_id":4301027,"reputation":3755,"user_id":3514736,"accept_rate":42,"display_name":"Rahman"},"score":0,"creation_date":1453477303,"post_id":34950164,"comment_id":57632497,"body_markdown":"@MrSimpleMind Yes I am using POM. But I have not declared `&lt;tomcat.version&gt;` . So if I dont declare what it will take by default ?","body":"@MrSimpleMind Yes I am using POM. But I have not declared <code>&lt;tomcat.version&gt;</code> . So if I dont declare what it will take by default ?"},{"owner":{"account_id":1266294,"reputation":8027,"user_id":1223532,"accept_rate":67,"display_name":"MrSimpleMind"},"score":0,"creation_date":1453477453,"post_id":34950164,"comment_id":57632607,"body_markdown":"Is it spring solution? I think default it will run tomcat 7.. so if you want to run 8xxx.. then add that info.","body":"Is it spring solution? I think default it will run tomcat 7.. so if you want to run 8xxx.. then add that info."},{"owner":{"account_id":4301027,"reputation":3755,"user_id":3514736,"accept_rate":42,"display_name":"Rahman"},"score":0,"creation_date":1453477756,"post_id":34950164,"comment_id":57632819,"body_markdown":"@MrSimpleMind Yes . Its having Spring","body":"@MrSimpleMind Yes . Its having Spring"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1453480704,"post_id":34950164,"comment_id":57634864,"body_markdown":"You have twice written 1.3 where you mean 3.1.","body":"You have twice written 1.3 where you mean 3.1."}],"answers":[{"comments":[{"owner":{"account_id":1510192,"reputation":198,"user_id":1412523,"display_name":"user1412523"},"score":6,"creation_date":1503308885,"post_id":34950531,"comment_id":78545656,"body_markdown":"Locate the offending dependency which is bringing in the servlet-api jar in maven with the command mvn dependency:tree from the command line in the root of your project, search the output for the servlet-api its most likely 2.? version , exclude it from the dependency with the following in your pom.  { &lt;exclusion&gt;\n                    &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n                    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n                &lt;/exclusion&gt;}","body":"Locate the offending dependency which is bringing in the servlet-api jar in maven with the command mvn dependency:tree from the command line in the root of your project, search the output for the servlet-api its most likely 2.? version , exclude it from the dependency with the following in your pom.  { &lt;exclusion&gt;                     &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;                     &lt;groupId&gt;javax.servlet&lt;/groupId&gt;                 &lt;/exclusion&gt;}"},{"owner":{"account_id":143382,"reputation":2912,"user_id":351688,"accept_rate":91,"display_name":"A.W."},"score":0,"creation_date":1536409608,"post_id":34950531,"comment_id":91419167,"body_markdown":"@user1412523 Thanks! This solved it for me. My dependency was `google-oauth-client-jetty` I removed it as I did not need it anyway and it&#39;s working again.","body":"@user1412523 Thanks! This solved it for me. My dependency was <code>google-oauth-client-jetty</code> I removed it as I did not need it anyway and it&#39;s working again."},{"owner":{"account_id":5950528,"reputation":2878,"user_id":4678661,"display_name":"Fabich"},"score":0,"creation_date":1559654167,"post_id":34950531,"comment_id":99482877,"body_markdown":"my dependency was hadoop-common (2.9.2)","body":"my dependency was hadoop-common (2.9.2)"},{"owner":{"account_id":1853929,"reputation":6195,"user_id":1679903,"accept_rate":88,"display_name":"kinjelom"},"score":0,"creation_date":1585579047,"post_id":34950531,"comment_id":107802534,"body_markdown":"`mvn dependency:tree | grep servlet-api`","body":"<code>mvn dependency:tree | grep servlet-api</code>"},{"owner":{"account_id":15500158,"reputation":348,"user_id":11710180,"display_name":"Sir Beethoven"},"score":0,"creation_date":1588539009,"post_id":34950531,"comment_id":108930658,"body_markdown":"Thanks @user1412523, that was a really useful comment. I could finally get my apache fop-transcoder-allinone 2.4 dependency fixed and can move on now.","body":"Thanks @user1412523, that was a really useful comment. I could finally get my apache fop-transcoder-allinone 2.4 dependency fixed and can move on now."},{"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"score":0,"creation_date":1593734539,"post_id":34950531,"comment_id":110890990,"body_markdown":"Here&#39;s another way to try to locate where the offending collision arises... run your build and either expand the war or find the folder that this was built in (target/xx in maven maybe) then locate the WEB-INF/lib folder and use this unix script to locate the jar files that contain classes with the name `ServletContext`.  You may get false positives, but it&#39;ll lead you in the right direction:\n`find . -name &quot;*.jar&quot; -exec grep -l ServletContext {} \\;`","body":"Here&#39;s another way to try to locate where the offending collision arises... run your build and either expand the war or find the folder that this was built in (target/xx in maven maybe) then locate the WEB-INF/lib folder and use this unix script to locate the jar files that contain classes with the name <code>ServletContext</code>.  You may get false positives, but it&#39;ll lead you in the right direction: <code>find . -name &quot;*.jar&quot; -exec grep -l ServletContext {} \\;</code>"}],"tags":[],"owner":{"account_id":923153,"reputation":5107,"user_id":954442,"accept_rate":83,"display_name":"Andrew Regan"},"comment_count":6,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1453477475,"creation_date":1453477475,"answer_id":34950531,"question_id":34950164,"body_markdown":"Check all your Maven (or equivalent) dependencies and make sure that you - or most likely another dependency - are not pulling in a pre-3.1 version of the `javax.servlet / servlet-api` that may be taking precedence over what&#39;s in your Tomcat 8. If you&#39;ve manually deployed, make sure you haven&#39;t manually copied any servlet-api JARs into Tomcat itself.\r\n\r\nSee: https://stackoverflow.com/a/26232535/954442","title":"Getting NoSuchMethodError:javax.servlet.ServletContext.getVirtualServerName()","body":"<p>Check all your Maven (or equivalent) dependencies and make sure that you - or most likely another dependency - are not pulling in a pre-3.1 version of the <code>javax.servlet / servlet-api</code> that may be taking precedence over what's in your Tomcat 8. If you've manually deployed, make sure you haven't manually copied any servlet-api JARs into Tomcat itself.</p>\n\n<p>See: <a href=\"https://stackoverflow.com/a/26232535/954442\">https://stackoverflow.com/a/26232535/954442</a></p>\n"},{"tags":[],"owner":{"account_id":1266294,"reputation":8027,"user_id":1223532,"accept_rate":67,"display_name":"MrSimpleMind"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1453477767,"creation_date":1453477767,"answer_id":34950623,"question_id":34950164,"body_markdown":"Spring boot will run **tomcat 7** per default, you have to override maven build tomcat.version in your pom.xml. See below to run **tomcat 8.0.30**\r\n\r\n    &lt;properties&gt;\r\n      &lt;tomcat.version&gt;8.0.30&lt;/tomcat.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n\r\nShould fix your problem.","title":"Getting NoSuchMethodError:javax.servlet.ServletContext.getVirtualServerName()","body":"<p>Spring boot will run <strong>tomcat 7</strong> per default, you have to override maven build tomcat.version in your pom.xml. See below to run <strong>tomcat 8.0.30</strong></p>\n\n<pre><code>&lt;properties&gt;\n  &lt;tomcat.version&gt;8.0.30&lt;/tomcat.version&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>Should fix your problem.</p>\n"},{"tags":[],"owner":{"account_id":249974,"reputation":788,"user_id":526386,"accept_rate":71,"display_name":"Ankur"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1498666014,"creation_date":1498666014,"answer_id":44807607,"question_id":34950164,"body_markdown":"**Solved**\r\nOn my mac with java 8 was facing issue with downloaded tomcat from site and unzip.\r\n\r\nMy issue got solved because there was a extra servlet-api.jar file which was getting picked up. It was coming from \r\n/Library/Java/Extensions/servlet-api.jar\r\n\r\nFor finding it in your system you can use\r\nsudo find / -name servlet-api.jar\r\n\r\nRemoved it by backing it up somewhere else.\r\n\r\nI was following this for intallation\r\nhttps://gist.github.com/ddanailov-nmdp/c97aba2ca926b9627f6b4f7174083a32","title":"Getting NoSuchMethodError:javax.servlet.ServletContext.getVirtualServerName()","body":"<p><strong>Solved</strong>\nOn my mac with java 8 was facing issue with downloaded tomcat from site and unzip.</p>\n\n<p>My issue got solved because there was a extra servlet-api.jar file which was getting picked up. It was coming from \n/Library/Java/Extensions/servlet-api.jar</p>\n\n<p>For finding it in your system you can use\nsudo find / -name servlet-api.jar</p>\n\n<p>Removed it by backing it up somewhere else.</p>\n\n<p>I was following this for intallation\n<a href=\"https://gist.github.com/ddanailov-nmdp/c97aba2ca926b9627f6b4f7174083a32\" rel=\"nofollow noreferrer\">https://gist.github.com/ddanailov-nmdp/c97aba2ca926b9627f6b4f7174083a32</a></p>\n"},{"tags":[],"owner":{"account_id":7320991,"reputation":1110,"user_id":5577048,"display_name":"zlandorf"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1502189119,"creation_date":1502189119,"answer_id":45566217,"question_id":34950164,"body_markdown":"I had this error on IntelliJ with maven after updating IntelliJ.\r\n\r\nI could run the tests with maven but not from my IDE.\r\n\r\nI solved the problem by removing the `./idea` and `project.iml` files and reloading the project.","title":"Getting NoSuchMethodError:javax.servlet.ServletContext.getVirtualServerName()","body":"<p>I had this error on IntelliJ with maven after updating IntelliJ.</p>\n\n<p>I could run the tests with maven but not from my IDE.</p>\n\n<p>I solved the problem by removing the <code>./idea</code> and <code>project.iml</code> files and reloading the project.</p>\n"},{"tags":[],"owner":{"account_id":182665,"reputation":851,"user_id":417541,"accept_rate":42,"display_name":"Do Will"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1510091967,"creation_date":1510091967,"answer_id":47168144,"question_id":34950164,"body_markdown":"This surely has something to do with the version of javax.servlet and version of Tomcat. \r\n\r\nIn my case, it went away when I declared javax.servlet dependency in gradle with no version. Like this - \r\n\r\n    compile(&#39;javax.servlet:servlet-api&#39;)","title":"Getting NoSuchMethodError:javax.servlet.ServletContext.getVirtualServerName()","body":"<p>This surely has something to do with the version of javax.servlet and version of Tomcat. </p>\n\n<p>In my case, it went away when I declared javax.servlet dependency in gradle with no version. Like this - </p>\n\n<pre><code>compile('javax.servlet:servlet-api')\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1633319,"reputation":332,"user_id":1507445,"display_name":"senyor"},"score":0,"creation_date":1567529680,"post_id":47503564,"comment_id":101986905,"body_markdown":"It is ok not to exclude transitive dependency, but just include the correct version. Maven takes the one which is closer in graph.","body":"It is ok not to exclude transitive dependency, but just include the correct version. Maven takes the one which is closer in graph."}],"tags":[],"owner":{"account_id":7118627,"reputation":2330,"user_id":5443977,"accept_rate":45,"display_name":"Python Basketball"},"comment_count":1,"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1570213849,"creation_date":1511753458,"answer_id":47503564,"question_id":34950164,"body_markdown":"The method `getVirtualServerName` has been added in ServletContext in Servlet 3.1. See the java doc&#39;s method [getVirtualServerName][1].\r\n\r\nThis problem has 3 primary causes:\r\n\r\n 1. Your servlet version is older than 3.1.\r\n\r\n 2. Some other jar has the servlet with a version older than 3.1.\r\n\r\n 3. Your tomcat version is older than 8\r\n\r\nto solve it, you can try the below way.\r\n \r\n\r\nI. Check your pom.xml for the code below.\r\n   \r\n      &lt;dependency&gt;\r\n    \t   &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t   &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n           &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nif your pom.xml has the above code, it would still has that problem. you can do the second way.\r\n\r\nII. to check your other jar has refer to the `javax.servlet-api` jar. for example, the `org.apache.santuario` has refer to the `javax.servlet-api` jar. the pom.xml:\r\n\r\n    &lt;dependency&gt;  \r\n        &lt;groupId&gt;org.apache.santuario&lt;/groupId&gt;  \r\n        &lt;artifactId&gt;xmlsec&lt;/artifactId&gt;  \r\n        &lt;version&gt;1.4.3&lt;/version&gt;   \r\n    &lt;/dependency&gt; \r\nbut when you look at the maven dependencies, it refer to the `javax.servlet-api` jar whose version is 2.3 older than 3.1. \r\n\r\n[![enter image description here][2]][2]\r\n\r\nso you should exclude the 2.3 version. pom.xml:\r\n\r\n    &lt;!-- exclude servlet-api 2.3 jar--&gt;  \r\n    &lt;dependency&gt;  \r\n        &lt;groupId&gt;org.apache.santuario&lt;/groupId&gt;  \r\n        &lt;artifactId&gt;xmlsec&lt;/artifactId&gt;  \r\n        &lt;version&gt;1.4.3&lt;/version&gt;  \r\n        &lt;exclusions&gt;  \r\n            &lt;exclusion&gt;  \r\n                &lt;groupId&gt;javax.servlet&lt;/groupId&gt;  \r\n                &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;  \r\n            &lt;/exclusion&gt;  \r\n        &lt;/exclusions&gt;  \r\n    &lt;/dependency&gt;  \r\n      \r\n    &lt;!-- servlet-api 3.1 version has getVirtualServerName() --&gt;  \r\n    &lt;dependency&gt;  \r\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;  \r\n        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;  \r\n        &lt;version&gt;3.1.0&lt;/version&gt;  \r\n    &lt;/dependency&gt; \r\n\r\nIII. spring boot run the default tomcat 7. so define your tomcat version 8 instead of tomcat 7. so add the code your pom.xml:\r\n\t\r\n\r\n       &lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n            &lt;tomcat.version&gt;8.5.5&lt;/tomcat.version&gt;\r\n    \t&lt;/properties&gt;\r\n\r\n  [1]: https://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html#getVirtualServerName--\r\n  [2]: https://i.stack.imgur.com/UsFWB.png","title":"Getting NoSuchMethodError:javax.servlet.ServletContext.getVirtualServerName()","body":"<p>The method <code>getVirtualServerName</code> has been added in ServletContext in Servlet 3.1. See the java doc's method <a href=\"https://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html#getVirtualServerName--\" rel=\"noreferrer\">getVirtualServerName</a>.</p>\n\n<p>This problem has 3 primary causes:</p>\n\n<ol>\n<li><p>Your servlet version is older than 3.1.</p></li>\n<li><p>Some other jar has the servlet with a version older than 3.1.</p></li>\n<li><p>Your tomcat version is older than 8</p></li>\n</ol>\n\n<p>to solve it, you can try the below way.</p>\n\n<p>I. Check your pom.xml for the code below.</p>\n\n<pre><code>  &lt;dependency&gt;\n       &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n       &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n       &lt;version&gt;3.1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>if your pom.xml has the above code, it would still has that problem. you can do the second way.</p>\n\n<p>II. to check your other jar has refer to the <code>javax.servlet-api</code> jar. for example, the <code>org.apache.santuario</code> has refer to the <code>javax.servlet-api</code> jar. the pom.xml:</p>\n\n<pre><code>&lt;dependency&gt;  \n    &lt;groupId&gt;org.apache.santuario&lt;/groupId&gt;  \n    &lt;artifactId&gt;xmlsec&lt;/artifactId&gt;  \n    &lt;version&gt;1.4.3&lt;/version&gt;   \n&lt;/dependency&gt; \n</code></pre>\n\n<p>but when you look at the maven dependencies, it refer to the <code>javax.servlet-api</code> jar whose version is 2.3 older than 3.1. </p>\n\n<p><a href=\"https://i.stack.imgur.com/UsFWB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/UsFWB.png\" alt=\"enter image description here\"></a></p>\n\n<p>so you should exclude the 2.3 version. pom.xml:</p>\n\n<pre><code>&lt;!-- exclude servlet-api 2.3 jar--&gt;  \n&lt;dependency&gt;  \n    &lt;groupId&gt;org.apache.santuario&lt;/groupId&gt;  \n    &lt;artifactId&gt;xmlsec&lt;/artifactId&gt;  \n    &lt;version&gt;1.4.3&lt;/version&gt;  \n    &lt;exclusions&gt;  \n        &lt;exclusion&gt;  \n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;  \n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;  \n        &lt;/exclusion&gt;  \n    &lt;/exclusions&gt;  \n&lt;/dependency&gt;  \n\n&lt;!-- servlet-api 3.1 version has getVirtualServerName() --&gt;  \n&lt;dependency&gt;  \n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;  \n    &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;  \n    &lt;version&gt;3.1.0&lt;/version&gt;  \n&lt;/dependency&gt; \n</code></pre>\n\n<p>III. spring boot run the default tomcat 7. so define your tomcat version 8 instead of tomcat 7. so add the code your pom.xml:</p>\n\n<pre><code>   &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;tomcat.version&gt;8.5.5&lt;/tomcat.version&gt;\n    &lt;/properties&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2284586,"reputation":33,"user_id":2008914,"display_name":"user2008914"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536157236,"creation_date":1536157236,"answer_id":52187426,"question_id":34950164,"body_markdown":"After a huge pain &amp; sifting through all these stackoverflow answers the only thing that ended up working for me was downgrading from tomcat8 to tomcat7. I know this isn&#39;t an ideal solution, and perhaps it was just a fresh install of tomcat that solved my problem. If all else fails give that a shot.","title":"Getting NoSuchMethodError:javax.servlet.ServletContext.getVirtualServerName()","body":"<p>After a huge pain &amp; sifting through all these stackoverflow answers the only thing that ended up working for me was downgrading from tomcat8 to tomcat7. I know this isn't an ideal solution, and perhaps it was just a fresh install of tomcat that solved my problem. If all else fails give that a shot.</p>\n"},{"comments":[{"owner":{"account_id":1550830,"reputation":2177,"user_id":1443264,"display_name":"Rigoxls"},"score":0,"creation_date":1606493979,"post_id":57734921,"comment_id":114985788,"body_markdown":"Great that was exactly my error, how did you know that ??","body":"Great that was exactly my error, how did you know that ??"},{"owner":{"account_id":12613723,"reputation":940,"user_id":9171899,"display_name":"yuen26"},"score":0,"creation_date":1606550887,"post_id":57734921,"comment_id":114998039,"body_markdown":"@Rigoxls I remember I encountered this problem while I was working with Google  client APIs and Spring Framework","body":"@Rigoxls I remember I encountered this problem while I was working with Google  client APIs and Spring Framework"}],"tags":[],"owner":{"account_id":12613723,"reputation":940,"user_id":9171899,"display_name":"yuen26"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1567221670,"creation_date":1567221670,"answer_id":57734921,"question_id":34950164,"body_markdown":"If you have used this dependency:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\r\n    &lt;artifactId&gt;google-oauth-client-jetty&lt;/artifactId&gt;\r\n    &lt;version&gt;1.23.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nThen please exclude as below:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\r\n    &lt;artifactId&gt;google-oauth-client-jetty&lt;/artifactId&gt;\r\n    &lt;version&gt;1.23.0&lt;/version&gt;\r\n    &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n            &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;\r\n        &lt;/exclusion&gt;\r\n    &lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Getting NoSuchMethodError:javax.servlet.ServletContext.getVirtualServerName()","body":"<p>If you have used this dependency:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\n    &lt;artifactId&gt;google-oauth-client-jetty&lt;/artifactId&gt;\n    &lt;version&gt;1.23.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Then please exclude as below:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;\n    &lt;artifactId&gt;google-oauth-client-jetty&lt;/artifactId&gt;\n    &lt;version&gt;1.23.0&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n            &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3248475,"reputation":23,"user_id":2739392,"display_name":"Max Wang"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594885482,"creation_date":1594885482,"answer_id":62929875,"question_id":34950164,"body_markdown":"Assuming this problem appears when you ran the application in Eclipse. \r\nUse Dependency Hierarchy view to search for servlet-api in pom.xm","title":"Getting NoSuchMethodError:javax.servlet.ServletContext.getVirtualServerName()","body":"<p>Assuming this problem appears when you ran the application in Eclipse.\nUse Dependency Hierarchy view to search for servlet-api in pom.xm</p>\n"},{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1651853171,"post_id":72130841,"comment_id":127470942,"body_markdown":"Please don&#39;t post only code as answer, but also provide an explanation what your code does and how it solves the problem of the question. Answers with an explanation are usually more helpful and of better quality, and are more likely to attract upvotes.","body":"Please don&#39;t post only code as answer, but also provide an explanation what your code does and how it solves the problem of the question. Answers with an explanation are usually more helpful and of better quality, and are more likely to attract upvotes."}],"tags":[],"owner":{"account_id":8201651,"reputation":1736,"user_id":6172826,"display_name":"seunggabi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651915444,"creation_date":1651769230,"answer_id":72130841,"question_id":34950164,"body_markdown":"I attach `gradle` style dependencies code.\r\n\r\n```\r\ndependencies {\r\n    compileOnly(&quot;javax.servlet:javax.servlet-api:3.1.0&quot;)\r\n```","title":"Getting NoSuchMethodError:javax.servlet.ServletContext.getVirtualServerName()","body":"<p>I attach <code>gradle</code> style dependencies code.</p>\n<pre><code>dependencies {\n    compileOnly(&quot;javax.servlet:javax.servlet-api:3.1.0&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8038125,"reputation":31,"user_id":6060637,"display_name":"Alan Ackart"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695376158,"creation_date":1695376158,"answer_id":77156561,"question_id":34950164,"body_markdown":"In my case, I  add vm option `-verbose:class` to find the wrong jar and \r\nexcluded the conflicted jar then add the higer version of javax.servlet-api(3.1.0), the problem was sovled.","title":"Getting NoSuchMethodError:javax.servlet.ServletContext.getVirtualServerName()","body":"<p>In my case, I  add vm option <code>-verbose:class</code> to find the wrong jar and\nexcluded the conflicted jar then add the higer version of javax.servlet-api(3.1.0), the problem was sovled.</p>\n"}],"owner":{"account_id":4301027,"reputation":3755,"user_id":3514736,"accept_rate":42,"display_name":"Rahman"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78741,"favorite_count":0,"down_vote_count":0,"up_vote_count":41,"answer_count":11,"score":41,"last_activity_date":1695376158,"creation_date":1453476369,"question_id":34950164,"body_markdown":"I am facing an issue during deployment of a service in Tomcat 8. Getting following error :\r\n\r\n&gt; Caused by: java.lang.NoSuchMethodError:\r\n&gt; javax.servlet.ServletContext.getVirtualServerName()Ljava/lang/String;\r\n&gt;        at org.apache.tomcat.websocket.server.WsServerContainer.&lt;init&gt;(WsServerContainer.java:149)\r\n&gt;        at org.apache.tomcat.websocket.server.WsSci.init(WsSci.java:131)\r\n&gt;        at org.apache.tomcat.websocket.server.WsSci.onStartup(WsSci.java:47)\r\n&gt;        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5244)\r\n&gt;        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n&gt;        ... 10 more\r\n\r\nMethod `getVirtualServerName` was introduced in Servlet 3.1  and after extracting `MANIFEST.MF` from my `servlet-api` jar I got following details :\r\n\r\n    Specification-Title: Java API for Servlets \r\n    Specification-Version: 3.1 \r\n    Specification-Vendor: Sun Microsystems, Inc. \r\n    Implementation-Title: javax.servlet \r\n\r\nWhich says that its having 3.1. So is there any other reason for this error? Please help\r\n\r\n","title":"Getting NoSuchMethodError:javax.servlet.ServletContext.getVirtualServerName()","body":"<p>I am facing an issue during deployment of a service in Tomcat 8. Getting following error :</p>\n\n<blockquote>\n  <p>Caused by: java.lang.NoSuchMethodError:\n  javax.servlet.ServletContext.getVirtualServerName()Ljava/lang/String;\n         at org.apache.tomcat.websocket.server.WsServerContainer.(WsServerContainer.java:149)\n         at org.apache.tomcat.websocket.server.WsSci.init(WsSci.java:131)\n         at org.apache.tomcat.websocket.server.WsSci.onStartup(WsSci.java:47)\n         at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5244)\n         at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n         ... 10 more</p>\n</blockquote>\n\n<p>Method <code>getVirtualServerName</code> was introduced in Servlet 3.1  and after extracting <code>MANIFEST.MF</code> from my <code>servlet-api</code> jar I got following details :</p>\n\n<pre><code>Specification-Title: Java API for Servlets \nSpecification-Version: 3.1 \nSpecification-Vendor: Sun Microsystems, Inc. \nImplementation-Title: javax.servlet \n</code></pre>\n\n<p>Which says that its having 3.1. So is there any other reason for this error? Please help</p>\n"},{"tags":["javascript","java","html","email"],"answers":[{"tags":[],"owner":{"account_id":10633569,"reputation":103,"user_id":7830910,"display_name":"sajid"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695375893,"creation_date":1492413591,"answer_id":43447032,"question_id":43445571,"body_markdown":"I hope it will help. \r\nI have added an  [JsFidler](https://jsfiddle.net/SajidSidhu/mqsftj54/) for you.\r\n```javascript\r\n     var varificetioncode = &quot;code-to-send&quot;;\r\n     var token_link = &quot;http://example.org/questions/123/&quot; + varificetioncode;\r\n     message.setContent(\r\n                        &quot;&lt;h2&gt;Reset password request &lt;/h2&gt;&quot; + \r\n                        &quot;&lt;h3&gt; Please click on the button to reset password &lt;/h3&gt;&quot;+\r\n                        &quot;&lt;a target=&#39;_blank&#39; href=&quot;+ token_link +&quot;&gt;\r\n                           &lt;button&gt;Reset your password&lt;/button&gt;\r\n                        &lt;/a&gt;&quot;,\r\n                       &quot;text/html; charset=utf-8&quot;\r\n                      );\r\n```","title":"How to send Link on html button click in java mail?","body":"<p>I hope it will help.\nI have added an  <a href=\"https://jsfiddle.net/SajidSidhu/mqsftj54/\" rel=\"nofollow noreferrer\">JsFidler</a> for you.</p>\n<pre class=\"lang-js prettyprint-override\"><code>     var varificetioncode = &quot;code-to-send&quot;;\n     var token_link = &quot;http://example.org/questions/123/&quot; + varificetioncode;\n     message.setContent(\n                        &quot;&lt;h2&gt;Reset password request &lt;/h2&gt;&quot; + \n                        &quot;&lt;h3&gt; Please click on the button to reset password &lt;/h3&gt;&quot;+\n                        &quot;&lt;a target='_blank' href=&quot;+ token_link +&quot;&gt;\n                           &lt;button&gt;Reset your password&lt;/button&gt;\n                        &lt;/a&gt;&quot;,\n                       &quot;text/html; charset=utf-8&quot;\n                      );\n</code></pre>\n"}],"owner":{"account_id":5499950,"reputation":125,"user_id":4369594,"accept_rate":83,"display_name":"maria salahuddin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2593,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":43447032,"answer_count":1,"score":1,"last_activity_date":1695375893,"creation_date":1492406405,"question_id":43445571,"body_markdown":"In my code I send reset password mail to the user , now I want to send some html content in the mail , I want a button on which user clicks and then reset password links opens in new tab , but I don&#39;t know how to embedded a link on html button , my link is saved in variable `token`\r\nhere is my code \r\n\r\n**MailServiice.java**\r\n\r\n    public void sendMail(String email,String token)\r\n    \t{\r\n    \t\tthis.email=email;\r\n    \t\tthis.token=token;\r\n         try {\r\n        \t\t   // Create a default MimeMessage object.\r\n        \t\t   Message message = new MimeMessage(session);\r\n        \t\t\r\n        \t\t   // Set From: header field of the header.\r\n        \t\t   message.setFrom(new InternetAddress(from));\r\n        \t\t\r\n        \t\t   // Set To: header field of the header.\r\n        \t\t   message.setRecipients(Message.RecipientType.TO,\r\n        \t               InternetAddress.parse(to));\r\n        \t\t\r\n        \t\t   // Set Subject: header field\r\n        \t\t   message.setSubject(&quot;change password request&quot;);\r\n        \t\t   \r\n        \t\t  \r\n        \t\t\r\n        \t\t   // Now set the actual message \r\n        \t      //  message.setText(messages);\r\n        \t        message.setContent(\r\n        \t                &quot;&lt;h2&gt;Reset password request &lt;/h2&gt;&quot; + \r\n        \t                &quot;&lt;h3&gt; Plaese click on the button to reset password \\n &lt;/h3&gt; &quot;+\r\n        \t                &quot; &lt;a href=token&gt;&quot; +&quot;&lt;button&gt;Reset your password&lt;/button&gt;&lt;/a&gt;&quot; + token,\r\n        \t                &quot;text/html&quot;);\r\n        \t\r\n        \r\n        \t\t   // Send message\r\n        \t\t   Transport.send(message);\r\n        \r\n        \t\t   System.out.println(&quot;Sent message successfully....&quot;);\r\n        \r\n        \t      } catch (MessagingException e) {\r\n        \t         throw new RuntimeException(e);\r\n        \t      }","title":"How to send Link on html button click in java mail?","body":"<p>In my code I send reset password mail to the user , now I want to send some html content in the mail , I want a button on which user clicks and then reset password links opens in new tab , but I don't know how to embedded a link on html button , my link is saved in variable <code>token</code>\nhere is my code </p>\n\n<p><strong>MailServiice.java</strong></p>\n\n<pre><code>public void sendMail(String email,String token)\n    {\n        this.email=email;\n        this.token=token;\n     try {\n               // Create a default MimeMessage object.\n               Message message = new MimeMessage(session);\n\n               // Set From: header field of the header.\n               message.setFrom(new InternetAddress(from));\n\n               // Set To: header field of the header.\n               message.setRecipients(Message.RecipientType.TO,\n                       InternetAddress.parse(to));\n\n               // Set Subject: header field\n               message.setSubject(\"change password request\");\n\n\n\n               // Now set the actual message \n              //  message.setText(messages);\n                message.setContent(\n                        \"&lt;h2&gt;Reset password request &lt;/h2&gt;\" + \n                        \"&lt;h3&gt; Plaese click on the button to reset password \\n &lt;/h3&gt; \"+\n                        \" &lt;a href=token&gt;\" +\"&lt;button&gt;Reset your password&lt;/button&gt;&lt;/a&gt;\" + token,\n                        \"text/html\");\n\n\n               // Send message\n               Transport.send(message);\n\n               System.out.println(\"Sent message successfully....\");\n\n              } catch (MessagingException e) {\n                 throw new RuntimeException(e);\n              }\n</code></pre>\n"},{"tags":["java","visual-studio-code"],"answers":[{"tags":[],"owner":{"account_id":15396644,"reputation":25775,"user_id":11107541,"display_name":"starball"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1687278576,"creation_date":1687278576,"answer_id":76516730,"question_id":76511565,"body_markdown":"There&#39;s an issue with VS Code related to the Electron framework when the workspace folder&#39;s path has any symlinks in it. See https://github.com/microsoft/vscode-java-test/issues/1463#issuecomment-1201046418, https://github.com/microsoft/vscode/issues/74104, and https://github.com/microsoft/vscode-java-test/issues/630. The issue might have to do with gtk4 ([source](https://github.com/microsoft/vscode/issues/74104#issuecomment-1175549012)).\r\n\r\nTo work around the issue, open the workspace folder using the canonical path and not the symlinked path.","title":"How to fix &quot;Failed to get workspace folder from test item&quot; for a Java tester project in VS Code?","body":"<p>There's an issue with VS Code related to the Electron framework when the workspace folder's path has any symlinks in it. See <a href=\"https://github.com/microsoft/vscode-java-test/issues/1463#issuecomment-1201046418\" rel=\"nofollow noreferrer\">https://github.com/microsoft/vscode-java-test/issues/1463#issuecomment-1201046418</a>, <a href=\"https://github.com/microsoft/vscode/issues/74104\" rel=\"nofollow noreferrer\">https://github.com/microsoft/vscode/issues/74104</a>, and <a href=\"https://github.com/microsoft/vscode-java-test/issues/630\" rel=\"nofollow noreferrer\">https://github.com/microsoft/vscode-java-test/issues/630</a>. The issue might have to do with gtk4 (<a href=\"https://github.com/microsoft/vscode/issues/74104#issuecomment-1175549012\" rel=\"nofollow noreferrer\">source</a>).</p>\n<p>To work around the issue, open the workspace folder using the canonical path and not the symlinked path.</p>\n"},{"tags":[],"owner":{"account_id":12935136,"reputation":1,"user_id":9352748,"display_name":"Bryan-dike Uwanaka"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695374488,"creation_date":1695374488,"answer_id":77156346,"question_id":76511565,"body_markdown":"It might be a symlink error. Try using opening your directory via the absolute path on your machine.","title":"How to fix &quot;Failed to get workspace folder from test item&quot; for a Java tester project in VS Code?","body":"<p>It might be a symlink error. Try using opening your directory via the absolute path on your machine.</p>\n"}],"owner":{"account_id":25597,"reputation":9442,"user_id":65889,"accept_rate":79,"display_name":"halloleo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":352,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76516730,"answer_count":2,"score":0,"last_activity_date":1695374488,"creation_date":1687237890,"question_id":76511565,"body_markdown":"I have a Java project in VS Code (v.1.79.2) using the Java Extension pack (v.0.25) and the Test Runner for Java (v.0.39).\r\n\r\nWhen I run the tests I get the error message &quot;*Failed to get workspace folder from test item*&quot;. Running the normal main app works fine.\r\n\r\nHowever this problem does not happen on *all* Java projects with tests. In another project the tests run fine.\r\n\r\nHow do I fix this issue?","title":"How to fix &quot;Failed to get workspace folder from test item&quot; for a Java tester project in VS Code?","body":"<p>I have a Java project in VS Code (v.1.79.2) using the Java Extension pack (v.0.25) and the Test Runner for Java (v.0.39).</p>\n<p>When I run the tests I get the error message &quot;<em>Failed to get workspace folder from test item</em>&quot;. Running the normal main app works fine.</p>\n<p>However this problem does not happen on <em>all</em> Java projects with tests. In another project the tests run fine.</p>\n<p>How do I fix this issue?</p>\n"},{"tags":["java","spring-boot","kotlin","gradle"],"comments":[{"owner":{"account_id":9291622,"reputation":11361,"user_id":6899896,"display_name":"M.Ricciuti"},"score":1,"creation_date":1676195453,"post_id":75426082,"comment_id":133085331,"body_markdown":"springboot plugin generates two jars,  an executable and a plain jar. maybe you just try to execute the wrong one ?  try `java -jar build/libs/spring302-0.0.1-SNAPSHOT.jar`","body":"springboot plugin generates two jars,  an executable and a plain jar. maybe you just try to execute the wrong one ?  try <code>java -jar build&#47;libs&#47;spring302-0.0.1-SNAPSHOT.jar</code>"},{"owner":{"account_id":14649698,"reputation":340,"user_id":11620467,"display_name":"KAEDE"},"score":0,"creation_date":1676195559,"post_id":75426082,"comment_id":133085352,"body_markdown":"No, my springboot generates just **plain** one.\n`ls build/libs/` -&gt;  `spring302-0.0.1-SNAPSHOT-plain.jar`","body":"No, my springboot generates just <b>plain</b> one. <code>ls build&#47;libs&#47;</code> -&gt;  <code>spring302-0.0.1-SNAPSHOT-plain.jar</code>"},{"owner":{"account_id":14649698,"reputation":340,"user_id":11620467,"display_name":"KAEDE"},"score":0,"creation_date":1676195768,"post_id":75426082,"comment_id":133085392,"body_markdown":"Sorry, ` ./gradlew build` out put not plain one.\nBut cannot found main class too. `java -jar build/libs/spring302-0.0.1-SNAPSHOT.jar` -&gt;      \n`Error: Could not find or load main class com.kaede.spring302.Spring302ApplicationKt`p","body":"Sorry, ` ./gradlew build` out put not plain one. But cannot found main class too. <code>java -jar build&#47;libs&#47;spring302-0.0.1-SNAPSHOT.jar</code> -&gt;       <code>Error: Could not find or load main class com.kaede.spring302.Spring302ApplicationKt</code>p"},{"owner":{"account_id":9291622,"reputation":11361,"user_id":6899896,"display_name":"M.Ricciuti"},"score":1,"creation_date":1676195852,"post_id":75426082,"comment_id":133085402,"body_markdown":"what task did you use to generate this &quot;-plain&quot; jar ?  Spring boot gradle plugin provides a `bootJar` task used to generate the executable (fatjar) jar .  `jar` task on the other hand, will produce the &quot;plain&quot; jar . see https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/htmlsingle/#packaging-executable.and-plain-archives .  if you execute the lifecycle task &quot;build&quot; you should get both jar &amp; bootJar jars","body":"what task did you use to generate this &quot;-plain&quot; jar ?  Spring boot gradle plugin provides a <code>bootJar</code> task used to generate the executable (fatjar) jar .  <code>jar</code> task on the other hand, will produce the &quot;plain&quot; jar . see <a href=\"https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/htmlsingle/#packaging-executable.and-plain-archives\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/gradle-plugin/refere&zwnj;&#8203;nce/&hellip;</a> .  if you execute the lifecycle task &quot;build&quot; you should get both jar &amp; bootJar jars"},{"owner":{"account_id":9291622,"reputation":11361,"user_id":6899896,"display_name":"M.Ricciuti"},"score":2,"creation_date":1676195905,"post_id":75426082,"comment_id":133085412,"body_markdown":"you need to remove the ` attributes[&quot;Main-Class&quot;] = &quot;com.kaede.spring302.Spring302ApplicationKt&quot;`  from your build file, let Springboot plugin detect the class automatically itself","body":"you need to remove the ` attributes[&quot;Main-Class&quot;] = &quot;com.kaede.spring302.Spring302ApplicationKt&quot;`  from your build file, let Springboot plugin detect the class automatically itself"},{"owner":{"account_id":14649698,"reputation":340,"user_id":11620467,"display_name":"KAEDE"},"score":0,"creation_date":1676256526,"post_id":75426082,"comment_id":133094637,"body_markdown":"@M.Ricciuti Thank you sooooo much! \nProblem solved!\n\nI removed `tasks.withType&lt;Jar&gt; {\n\tmanifest {\n\t\tattributes[&quot;Main-Class&quot;] = &quot;com.kaede.spring302.Spring302ApplicationKt&quot;\n\t}\n}`\n\nAnd execute `./gradlew bulild` \nAfter that I execute `java -jar build/libs/spring302-0.0.1-SNAPSHOT.jar` \nThen, `Started Spring302ApplicationKt in 5.47 seconds`","body":"@M.Ricciuti Thank you sooooo much!  Problem solved!  I removed <code>tasks.withType&lt;Jar&gt; { \tmanifest { \t\tattributes[&quot;Main-Class&quot;] = &quot;com.kaede.spring302.Spring302ApplicationKt&quot; \t} }</code>  And execute <code>.&#47;gradlew bulild</code>  After that I execute <code>java -jar build&#47;libs&#47;spring302-0.0.1-SNAPSHOT.jar</code>  Then, <code>Started Spring302ApplicationKt in 5.47 seconds</code>"},{"owner":{"account_id":14649698,"reputation":340,"user_id":11620467,"display_name":"KAEDE"},"score":0,"creation_date":1676256943,"post_id":75426082,"comment_id":133094672,"body_markdown":"I should build Spring gradle project by `./gradlew buiild` . NOT by IntelliJ&#39;s build button. Because IntelliJ&#39;s build button outputs `plain` one only.","body":"I should build Spring gradle project by <code>.&#47;gradlew buiild</code> . NOT by IntelliJ&#39;s build button. Because IntelliJ&#39;s build button outputs <code>plain</code> one only."}],"answers":[{"tags":[],"owner":{"account_id":13626539,"reputation":1469,"user_id":9829662,"display_name":"Mahdi Zareei"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695374323,"creation_date":1695374323,"answer_id":77156327,"question_id":75426082,"body_markdown":"check your spring boot project build gradle configuration file if you have something like this:\r\n\r\n    application {\r\n       mainClass.set(&quot;MainKt&quot;)\r\n    }\r\n    \r\nremove it and build your project again","title":"Spring Application&#39;s build file cannot execute by java.lang.NoClassDefFoundError","body":"<p>check your spring boot project build gradle configuration file if you have something like this:</p>\n<pre><code>application {\n   mainClass.set(&quot;MainKt&quot;)\n}\n</code></pre>\n<p>remove it and build your project again</p>\n"}],"owner":{"account_id":14649698,"reputation":340,"user_id":11620467,"display_name":"KAEDE"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":282,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695374323,"creation_date":1676194875,"question_id":75426082,"body_markdown":"## what happend and What I want to do\r\n\r\nI made a Springboot Project with spring initializr (https://start.spring.io/).\r\n\r\nBut I cannot executed built jar file with this error.\r\n\r\n```\r\n java -jar build/libs/spring302-0.0.1-SNAPSHOT-plain.jar \r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: kotlin/jvm/internal/Intrinsics\r\n        at com.kaede.spring302.Spring302ApplicationKt.main(Spring302Application.kt)\r\nCaused by: java.lang.ClassNotFoundException: kotlin.jvm.internal.Intrinsics\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n        ... 1 more\r\n```\r\n\r\n\r\nWhat should I do ?\r\n\r\nI want to do this because I need to build to Docker Container.\r\n\r\n\r\n## How I made this project\r\n\r\nI selected \r\n\r\n- Kotlin\r\n- Gradle 7.2\r\n- Spring 3.0.2 \r\n- Java 17\r\n\r\nAnd I used IntelliJ to build.\r\n\r\n\r\nProject Name is spring302\r\nNameSpace is com.kaede\r\n\r\n## 1. Tried to Add Manifest Main-Class\r\n\r\n\r\n```\r\njava -jar build/libs/kotlin1-0.0.1-SNAPSHOT-plain.jar\r\n\r\nError: Could not find or load main class\r\n```\r\n\r\nFirst, I tried to just build, then happend this error.\r\n\r\n```\r\ntasks.withType&lt;Jar&gt; {\r\n    manifest {\r\n        attributes[&quot;Main-Class&quot;] = &quot;com.kaede.spring302.Spring302Application&quot;\r\n    }\r\n}\r\n```\r\n\r\nSo I added Manifest Main-Class in spring302/build.gradle.kts\r\n\r\n```\r\njava -jar build/libs/spring302-0.0.1-SNAPSHOT-plain.jar\r\nError: Main method not found in class com.kaede.spring302.Spring302Application, \r\nplease define the main method as:\r\n   public static void main(String[] args)\r\n```\r\n\r\nThen I got it is not Java Main Method Error.\r\n\r\n\r\n## 2. Changed Main-Class to classNameKt\r\n\r\nI changed Main-Class from Spring302Application to Spring302ApplicationKt\r\n\r\nI heard Kotlin class will change classNameKt.java.\r\n\r\n```\r\ntasks.withType&lt;Jar&gt; {\r\n    manifest {\r\n        attributes[&quot;Main-Class&quot;] = &quot;com.kaede.spring302.Spring302ApplicationKt&quot;\r\n    }\r\n}\r\n```\r\n\r\nSo I changed my Main-Class .\r\n\r\n```\r\njava -jar build/libs/spring302-0.0.1-SNAPSHOT-plain.jar\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: \r\nkotlin/jvm/internal/Intrinsics\r\n        at com.kaede.spring302.Spring302ApplicationKt.main(Spring302Application.kt)\r\nCaused by: java.lang.ClassNotFoundException: kotlin.jvm.internal.Intrinsics\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n        ... 1 more\r\n```\r\n\r\nThen I got NoClassDefFoundError in Spring302ApplicationKt.main.\r\n\r\n```\r\njavap spring302-0.0.1-SNAPSHOT-plain/com/kaede/spring302/Spring302ApplicationKt.class \r\nCompiled from &quot;Spring302Application.kt&quot;\r\npublic final class com.kaede.spring302.Spring302ApplicationKt {\r\n  public static final void main(java.lang.String[]);\r\n}\r\n```\r\n\r\nEven my output has main.\r\n\r\n\r\n## 3. Removed .m2/repository and rebuild\r\n\r\n```\r\n rm -rf ~/.m2/repository \r\n```\r\n\r\nI thought dependencies are complicated, So I removed all and re-build.\r\n\r\nBut things did not change.\r\n\r\n## what I expect\r\n\r\nI can execute jar file\r\n\r\n## 4. Changed Main Method from runApplication to SpringApplication.run\r\n\r\nIn main\r\n\r\n```\r\nrunApplication&lt;Spring302Application&gt;(*args)\r\n```\r\n\r\nto \r\n\r\n```\r\nSpringApplication.run(Spring302Application::class.java, *args\r\n```\r\n\r\nBut NoClassDefFoundError does not change\r\n\r\n## build.gradle.kts\r\n\r\nThis is my full dependencies.\r\n\r\n```\r\nimport org.jetbrains.kotlin.gradle.tasks.KotlinCompile\r\n\r\nplugins {\r\n\tid(&quot;org.springframework.boot&quot;) version &quot;3.0.2&quot;\r\n\tid(&quot;io.spring.dependency-management&quot;) version &quot;1.1.0&quot;\r\n\tkotlin(&quot;jvm&quot;) version &quot;1.7.22&quot;\r\n\tkotlin(&quot;plugin.spring&quot;) version &quot;1.7.22&quot;\r\n}\r\n\r\ngroup = &quot;com.kaede&quot;\r\nversion = &quot;0.0.1-SNAPSHOT&quot;\r\njava.sourceCompatibility = JavaVersion.VERSION_17\r\n\r\nrepositories {\r\n\tmavenCentral()\r\n}\r\n\r\ndependencies {\r\n\timplementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\r\n\timplementation(&quot;com.fasterxml.jackson.module:jackson-module-kotlin&quot;)\r\n\timplementation(&quot;org.jetbrains.kotlin:kotlin-reflect&quot;)\r\n\timplementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8&quot;)\r\n\ttestImplementation(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\r\n}\r\n\r\ntasks.withType&lt;KotlinCompile&gt; {\r\n\tkotlinOptions {\r\n\t\tfreeCompilerArgs = listOf(&quot;-Xjsr305=strict&quot;)\r\n\t\tjvmTarget = &quot;17&quot;\r\n\t}\r\n}\r\n\r\ntasks.withType&lt;Test&gt; {\r\n\tuseJUnitPlatform()\r\n}\r\ntasks.withType&lt;Jar&gt; {\r\n\tmanifest {\r\n\t\tattributes[&quot;Main-Class&quot;] = &quot;com.kaede.spring302.Spring302ApplicationKt&quot;\r\n\t}\r\n\r\n}\r\n```\r\n","title":"Spring Application&#39;s build file cannot execute by java.lang.NoClassDefFoundError","body":"<h2>what happend and What I want to do</h2>\n<p>I made a Springboot Project with spring initializr (<a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">https://start.spring.io/</a>).</p>\n<p>But I cannot executed built jar file with this error.</p>\n<pre><code> java -jar build/libs/spring302-0.0.1-SNAPSHOT-plain.jar \nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: kotlin/jvm/internal/Intrinsics\n        at com.kaede.spring302.Spring302ApplicationKt.main(Spring302Application.kt)\nCaused by: java.lang.ClassNotFoundException: kotlin.jvm.internal.Intrinsics\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n        ... 1 more\n</code></pre>\n<p>What should I do ?</p>\n<p>I want to do this because I need to build to Docker Container.</p>\n<h2>How I made this project</h2>\n<p>I selected</p>\n<ul>\n<li>Kotlin</li>\n<li>Gradle 7.2</li>\n<li>Spring 3.0.2</li>\n<li>Java 17</li>\n</ul>\n<p>And I used IntelliJ to build.</p>\n<p>Project Name is spring302\nNameSpace is com.kaede</p>\n<h2>1. Tried to Add Manifest Main-Class</h2>\n<pre><code>java -jar build/libs/kotlin1-0.0.1-SNAPSHOT-plain.jar\n\nError: Could not find or load main class\n</code></pre>\n<p>First, I tried to just build, then happend this error.</p>\n<pre><code>tasks.withType&lt;Jar&gt; {\n    manifest {\n        attributes[&quot;Main-Class&quot;] = &quot;com.kaede.spring302.Spring302Application&quot;\n    }\n}\n</code></pre>\n<p>So I added Manifest Main-Class in spring302/build.gradle.kts</p>\n<pre><code>java -jar build/libs/spring302-0.0.1-SNAPSHOT-plain.jar\nError: Main method not found in class com.kaede.spring302.Spring302Application, \nplease define the main method as:\n   public static void main(String[] args)\n</code></pre>\n<p>Then I got it is not Java Main Method Error.</p>\n<h2>2. Changed Main-Class to classNameKt</h2>\n<p>I changed Main-Class from Spring302Application to Spring302ApplicationKt</p>\n<p>I heard Kotlin class will change classNameKt.java.</p>\n<pre><code>tasks.withType&lt;Jar&gt; {\n    manifest {\n        attributes[&quot;Main-Class&quot;] = &quot;com.kaede.spring302.Spring302ApplicationKt&quot;\n    }\n}\n</code></pre>\n<p>So I changed my Main-Class .</p>\n<pre><code>java -jar build/libs/spring302-0.0.1-SNAPSHOT-plain.jar\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: \nkotlin/jvm/internal/Intrinsics\n        at com.kaede.spring302.Spring302ApplicationKt.main(Spring302Application.kt)\nCaused by: java.lang.ClassNotFoundException: kotlin.jvm.internal.Intrinsics\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n        ... 1 more\n</code></pre>\n<p>Then I got NoClassDefFoundError in Spring302ApplicationKt.main.</p>\n<pre><code>javap spring302-0.0.1-SNAPSHOT-plain/com/kaede/spring302/Spring302ApplicationKt.class \nCompiled from &quot;Spring302Application.kt&quot;\npublic final class com.kaede.spring302.Spring302ApplicationKt {\n  public static final void main(java.lang.String[]);\n}\n</code></pre>\n<p>Even my output has main.</p>\n<h2>3. Removed .m2/repository and rebuild</h2>\n<pre><code> rm -rf ~/.m2/repository \n</code></pre>\n<p>I thought dependencies are complicated, So I removed all and re-build.</p>\n<p>But things did not change.</p>\n<h2>what I expect</h2>\n<p>I can execute jar file</p>\n<h2>4. Changed Main Method from runApplication to SpringApplication.run</h2>\n<p>In main</p>\n<pre><code>runApplication&lt;Spring302Application&gt;(*args)\n</code></pre>\n<p>to</p>\n<pre><code>SpringApplication.run(Spring302Application::class.java, *args\n</code></pre>\n<p>But NoClassDefFoundError does not change</p>\n<h2>build.gradle.kts</h2>\n<p>This is my full dependencies.</p>\n<pre><code>import org.jetbrains.kotlin.gradle.tasks.KotlinCompile\n\nplugins {\n    id(&quot;org.springframework.boot&quot;) version &quot;3.0.2&quot;\n    id(&quot;io.spring.dependency-management&quot;) version &quot;1.1.0&quot;\n    kotlin(&quot;jvm&quot;) version &quot;1.7.22&quot;\n    kotlin(&quot;plugin.spring&quot;) version &quot;1.7.22&quot;\n}\n\ngroup = &quot;com.kaede&quot;\nversion = &quot;0.0.1-SNAPSHOT&quot;\njava.sourceCompatibility = JavaVersion.VERSION_17\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\n    implementation(&quot;com.fasterxml.jackson.module:jackson-module-kotlin&quot;)\n    implementation(&quot;org.jetbrains.kotlin:kotlin-reflect&quot;)\n    implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8&quot;)\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\n}\n\ntasks.withType&lt;KotlinCompile&gt; {\n    kotlinOptions {\n        freeCompilerArgs = listOf(&quot;-Xjsr305=strict&quot;)\n        jvmTarget = &quot;17&quot;\n    }\n}\n\ntasks.withType&lt;Test&gt; {\n    useJUnitPlatform()\n}\ntasks.withType&lt;Jar&gt; {\n    manifest {\n        attributes[&quot;Main-Class&quot;] = &quot;com.kaede.spring302.Spring302ApplicationKt&quot;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","gradle","build.gradle","annotation-processing"],"comments":[{"owner":{"account_id":8879412,"reputation":159,"user_id":6630210,"display_name":"jundev"},"score":0,"creation_date":1695371414,"post_id":77155734,"comment_id":136018216,"body_markdown":"What exact version of java 1.8 do you use? Have you checked your gradle wrapper on IDE?\n\nPlease, check this link :\nhttps://stackoverflow.com/questions/36408706/java-lang-illegalstateexception-endpostable-already-set","body":"What exact version of java 1.8 do you use? Have you checked your gradle wrapper on IDE?  Please, check this link : <a href=\"https://stackoverflow.com/questions/36408706/java-lang-illegalstateexception-endpostable-already-set\" title=\"java lang illegalstateexception endpostable already set\">stackoverflow.com/questions/36408706/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3169829,"reputation":63,"user_id":2679086,"display_name":"ridersingh92"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695374244,"creation_date":1695374244,"answer_id":77156318,"question_id":77155734,"body_markdown":"I got the solution by deleting build dirs before compile job and it works\r\n\r\nadd doFirst block in compile task\r\n\r\nref\r\n```\r\ncompileJava {\r\n    options.incremental = true\r\n    \r\n    \r\n//    doFirst {\r\n//        // force a clean of generatedSourceDir to prevent java.lang.IllegalStateException: endPosTable already set\r\n//        project.delete(generatedSourceDir)\r\n//        project.mkdir(generatedSourceDir)\r\n//    }\r\n}\r\n```\r\n\r\nReference\r\nhttps://github.com/gradle/gradle/pull/4700#issuecomment-378711369","title":"Spring boot Gradle Build Java Compiler issue java.lang.IllegalStateException: endPosTable already set","body":"<p>I got the solution by deleting build dirs before compile job and it works</p>\n<p>add doFirst block in compile task</p>\n<p>ref</p>\n<pre><code>compileJava {\n    options.incremental = true\n    \n    \n//    doFirst {\n//        // force a clean of generatedSourceDir to prevent java.lang.IllegalStateException: endPosTable already set\n//        project.delete(generatedSourceDir)\n//        project.mkdir(generatedSourceDir)\n//    }\n}\n</code></pre>\n<p>Reference\n<a href=\"https://github.com/gradle/gradle/pull/4700#issuecomment-378711369\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/pull/4700#issuecomment-378711369</a></p>\n"}],"owner":{"account_id":3169829,"reputation":63,"user_id":2679086,"display_name":"ridersingh92"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695374244,"creation_date":1695368874,"question_id":77155734,"body_markdown":"I am facing java compiler issue while running gradle build. It passes when I rerun it locally. But I cannot rerun on jenkins and build always fails there. \r\n\r\ngradle version : 6.9\r\njava 1.8\r\nspring boot : 2.7.15\r\n\r\nafter running `clean build` following exception comes for `compileJava` task.\r\n\r\nAnd it build is success after retry, then while starting application\r\n\r\nsame exception comes but for `compileQuerydsl` task. What m i doing wrong, or any flag i need to update in gradle file\r\n\r\n\r\n\r\n\r\nException:\r\n\r\n```An exception has occurred in the compiler (1.8.0_382). Please file a bug against the Java compiler via the Java bug reporting page (http://bugreport.java.com) after checking the Bug Database (http://bugs.java.com) for duplicates. Include your program and the following diagnostic in your report. Thank you.\r\njava.lang.IllegalStateException: endPosTable already set\r\n        at com.sun.tools.javac.util.DiagnosticSource.setEndPosTable(DiagnosticSource.java:136)\r\n        at com.sun.tools.javac.util.Log.setEndPosTable(Log.java:350)\r\n        at com.sun.tools.javac.main.JavaCompiler.parse(JavaCompiler.java:667)\r\n        at com.sun.tools.javac.main.JavaCompiler.parseFiles(JavaCompiler.java:950)\r\n        at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.&lt;init&gt;(JavacProcessingEnvironment.java:900)\r\n        at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.next(JavacProcessingEnvironment.java:929)\r\n        at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1195)\r\n        at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1170)\r\n        at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:856)\r\n        at com.sun.tools.javac.main.Main.compile(Main.java:523)\r\n        at com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:129)\r\n        at com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:138)\r\n        at org.gradle.internal.compiler.java.IncrementalCompileTask.call(IncrementalCompileTask.java:77)\r\n        at org.gradle.api.internal.tasks.compile.AnnotationProcessingCompileTask.call(AnnotationProcessingCompileTask.java:94)\r\n        at org.gradle.api.internal.tasks.compile.ResourceCleaningCompilationTask.call(ResourceCleaningCompilationTask.java:57)\r\n        at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:55)\r\n        at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:40)\r\n        at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:97)\r\n        at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:51)\r\n        at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:37)\r\n        at org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:51)\r\n        at org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:37)\r\n        at org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:46)\r\n        at org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:36)\r\n        at org.gradle.api.internal.tasks.compile.CleaningJavaCompiler.execute(CleaningJavaCompiler.java:53)\r\n        at org.gradle.api.internal.tasks.compile.incremental.IncrementalCompilerFactory.lambda$createRebuildAllCompiler$0(IncrementalCompilerFactory.java:98)\r\n        at org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:61)\r\n        at org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:45)\r\n        at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:59)\r\n        at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:51)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:62)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$call$2(DefaultBuildOperationExecutor.java:76)\r\n        at org.gradle.internal.operations.UnmanagedBuildOperationWrapper.callWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:54)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:76)\r\n        at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler.execute(CompileJavaBuildOperationReportingCompiler.java:51)\r\n        at org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:345)\r\n        at org.gradle.api.tasks.compile.JavaCompile.performIncrementalCompilation(JavaCompile.java:239)\r\n        at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:211)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:104)\r\n        at org.gradle.api.internal.project.taskfactory.IncrementalInputsTaskAction.doExecute(IncrementalInputsTaskAction.java:32)\r\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)\r\n        at org.gradle.api.internal.project.taskfactory.AbstractIncrementalTaskAction.execute(AbstractIncrementalTaskAction.java:25)\r\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$2.run(ExecuteActionsTaskExecuter.java:494)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:56)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$run$1(DefaultBuildOperationExecutor.java:71)\r\n        at org.gradle.internal.operations.UnmanagedBuildOperationWrapper.runWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:45)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:71)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:479)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:462)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.access$400(ExecuteActionsTaskExecuter.java:105)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.executeWithPreviousOutputFiles(ExecuteActionsTaskExecuter.java:273)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.execute(ExecuteActionsTaskExecuter.java:251)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.lambda$executeOperation$0(ExecuteStep.java:65)\r\n        at java.util.Optional.map(Optional.java:215)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.executeOperation(ExecuteStep.java:65)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:34)\r\n        at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:47)\r\n        at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:44)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:62)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$call$2(DefaultBuildOperationExecutor.java:76)\r\n        at org.gradle.internal.operations.UnmanagedBuildOperationWrapper.callWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:54)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:76)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:44)\r\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:34)\r\n        at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:72)\r\n        at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:42)\r\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:53)\r\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:39)\r\n        at org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:44)\r\n        at org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:77)\r\n        at org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:58)\r\n        at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:54)\r\n        at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:32)\r\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:57)\r\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:38)\r\n        at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:63)\r\n        at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:30)\r\n        at org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:176)\r\n        at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:76)\r\n        at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:47)\r\n        at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:43)\r\n        at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:32)\r\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:39)\r\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:25)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:102)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$0(SkipUpToDateStep.java:95)\r\n        at java.util.Optional.map(Optional.java:215)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:55)\r\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:39)\r\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:83)\r\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:44)\r\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)\r\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)\r\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:96)\r\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:52)\r\n        at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:83)\r\n        at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:54)\r\n        at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:74)\r\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.lambda$execute$2(SkipEmptyWorkStep.java:88)\r\n        at java.util.Optional.orElseGet(Optional.java:267)\r\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:88)\r\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:34)\r\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)\r\n        at org.gradle.internal.execution.steps.LoadExecutionStateStep.execute(LoadExecutionStateStep.java:46)\r\n        at org.gradle.internal.execution.steps.LoadExecutionStateStep.execute(LoadExecutionStateStep.java:34)\r\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:43)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution$3.withWorkspace(ExecuteActionsTaskExecuter.java:286)\r\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:43)\r\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:33)\r\n        at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:40)\r\n        at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:30)\r\n        at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:54)\r\n        at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:40)\r\n        at org.gradle.internal.execution.impl.DefaultExecutionEngine.execute(DefaultExecutionEngine.java:41)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:183)\r\n        at java.util.Optional.orElseGet(Optional.java:267)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:183)\r\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:173)\r\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:109)\r\n        at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\r\n        at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:62)\r\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\r\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\r\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\r\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:62)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$call$2(DefaultBuildOperationExecutor.java:76)\r\n        at org.gradle.internal.operations.UnmanagedBuildOperationWrapper.callWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:54)\r\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:76)\r\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\r\n        at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:41)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:411)\r\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:398)\r\n        \r\n\r\n&gt; Task :compileJava FAILED\r\n```\r\n\r\n\r\nBuild.gradle file\r\n\r\n```\r\nbuildscript {\r\n    repositories {\r\n        maven {\r\n            url &quot;https://plugins.gradle.org/m2/&quot;\r\n        }\r\n    }\r\n    dependencies {\r\n        classpath &#39;org.hibernate:hibernate-gradle-plugin:5.6.0.Final&#39;\r\n    }\r\n}\r\n\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &quot;${springBootVersion}&quot;\r\n    id &#39;io.spring.dependency-management&#39; version &quot;${springDependencyMgmt}&quot;\r\n    id &#39;org.hidetake.swagger.generator&#39; version &quot;${hideTakeSwaggerGen}&quot;\r\n    id &#39;java-library&#39;\r\n    id &#39;maven-publish&#39;\r\n    id &#39;groovy&#39;\r\n    id &#39;com.palantir.docker&#39; version &quot;${dockerPlugin}&quot;\r\n    id &quot;org.sonarqube&quot; version &quot;3.3&quot;\r\n    id &#39;jacoco&#39;\r\n    id &#39;io.franzbecker.gradle-lombok&#39; version &#39;5.0.0&#39;\r\n    id &#39;com.ewerk.gradle.plugins.querydsl&#39; version &#39;1.0.10&#39;\r\n}\r\n\r\napply plugin: &#39;jacoco&#39;\r\napply plugin: &quot;application&quot;\r\napply plugin: &#39;org.hibernate.orm&#39;\r\n\r\ngroup &#39;com.abcxyz&#39;\r\nversion &#39;1.1.5-SNAPSHOT&#39;\r\n\r\nsourceCompatibility = 1.8\r\n\r\nspringBoot {\r\n    buildInfo()\r\n}\r\n\r\nbootJar {\r\n    launchScript()\r\n}\r\nmainClassName = &quot;com.abcxyz.items.ItemApplication&quot;\r\n\r\nloadConfiguration()\r\n\r\nhibernate {\r\n    sourceSets = [project.sourceSets.main]\r\n    enhance {\r\n        enableLazyInitialization = true\r\n        enableDirtyTracking = true\r\n    }\r\n}\r\next[&#39;mockito.version&#39;] = &#39;4.3.1&#39;\r\next[&#39;snakeyaml.version&#39;] = &#39;1.33&#39;\r\n\r\n\r\ndef loadConfiguration() {\r\n    def environment = hasProperty(&#39;env&#39;) ? env : &#39;local&#39;\r\n    println &quot;Environment is set to $environment&quot;\r\n\r\n    def configFile = file(&#39;environment.groovy&#39;)\r\n    def config = new ConfigSlurper(environment).parse(configFile.toURL())\r\n\r\n    config.forEach { k, v -&gt;\r\n        project.ext[k] = v\r\n    }\r\n}\r\n\r\nrepositories {\r\n    mavenLocal()\r\n    mavenCentral()\r\n    maven {\r\n        url artifactory_build_url\r\n        credentials {\r\n            username System.env.CODEARTIFACT_USER\r\n            password System.env.CODEARTIFACT_AUTH_TOKEN\r\n        }\r\n    }\r\n\r\n    maven {\r\n        url &quot;https://packages.confluent.io/maven/&quot;\r\n    }\r\n}\r\n\r\njacoco {\r\n    toolVersion = &quot;0.8.4&quot;\r\n    reportsDir = file(&quot;$buildDir/jacoco&quot;)\r\n}\r\n\r\ndocker {\r\n    name &quot;items_ms&quot;\r\n    dockerfile file(&quot;Dockerfile-local&quot;)\r\n    copySpec.from(jar).rename(&quot;.*&quot;, &quot;items.jar&quot;)\r\n    buildArgs([&#39;JAR_FILE&#39;: &quot;items.jar&quot;])\r\n\r\n}\r\n\r\n\r\nsourceSets.main.java.srcDirs = [&#39;src/main/java&#39;, &#39;build/generated/sources/annotationProcessor/java/main&#39;]\r\nsourceSets {\r\n    integration {\r\n        groovy.srcDir &quot;$projectDir/src/integrationTest/groovy&quot;\r\n        resources.srcDir &quot;$projectDir/src/integrationTest/resources&quot;\r\n        compileClasspath += main.output + test.output\r\n        runtimeClasspath += main.output + test.output\r\n    }\r\n}\r\n\r\nconfigurations {\r\n    integrationImplementation.extendsFrom testImplementation\r\n    integrationRuntime.extendsFrom testRuntime\r\n}\r\n\r\ndependencyManagement {\r\n    imports {\r\n        mavenBom &quot;org.springframework.cloud:spring-cloud-dependencies:${hoxton}&quot;\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    // spring dependencies\r\n    compile &#39;org.springframework.boot:spring-boot-starter-validation&#39;\r\n    compile &#39;org.springframework.boot:spring-boot-configuration-processor&#39;\r\n    compile &#39;org.springframework:spring-context-support&#39;\r\n    compile &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n    compile &#39;org.springframework.boot:spring-boot-starter-batch&#39;\r\n    compile(&#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;) {\r\n        exclude group: &quot;org.hibernate&quot;, module: &quot;hibernate-core&quot;\r\n    }\r\n    // https://mvnrepository.com/artifact/org.apache.tomcat/tomcat-jdbc\r\n    implementation &#39;org.apache.tomcat:tomcat-jdbc:10.0.0&#39;\r\n    implementation &quot;org.hibernate:hibernate-core:5.5.8.Final&quot;\r\n    compile &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n    compile &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\r\n    implementation &#39;org.springframework.cloud:spring-cloud-context:3.1.7&#39;\r\n    implementation &#39;org.springframework.cloud:spring-cloud-commons:3.1.7&#39;\r\n    implementation &#39;org.springframework.cloud:spring-cloud-starter:3.1.7&#39;\r\n    // spring cloud dependencies\r\n    compile (&quot;org.springframework.cloud:spring-cloud-aws-context:2.2.6.RELEASE&quot;) {\r\n        exclude group: &quot;org.springframework.cloud&quot;, module: &quot;spring-cloud-commons&quot;\r\n        exclude group: &quot;org.springframework.cloud&quot;, module: &quot;spring-cloud-context&quot;\r\n        exclude group: &quot;org.springframework.cloud&quot;, module: &quot;spring-cloud-starter&quot;\r\n    }\r\n    compile &#39;org.springframework.cloud:spring-cloud-aws-messaging:2.2.6.RELEASE&#39;\r\n\r\n    // postgres\r\n    compile &#39;org.postgresql:postgresql&#39;\r\n\r\n    \r\n    // lombok dependencies\r\n    compileOnly &#39;org.projectlombok:lombok&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    annotationProcessor &quot;com.abcxyz.cb-ms-core:cb-ms-annotation-processor:${msCore}&quot;\r\n\r\n    // my dep\r\n    annotationProcessor &quot;javax.persistence:javax.persistence-api:${jpa}&quot;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    implementation &#39;com.querydsl:querydsl-jpa:5.0.0&#39;\r\n\r\n    // other annotation processors\r\n    annotationProcessor &quot;com.querydsl:querydsl-apt:${queryDsl}&quot;\r\n    annotationProcessor &quot;com.querydsl:querydsl-jpa:${queryDsl}:apt&quot;\r\n\r\n\r\n    // mapstruct dependencies\r\n    compile &quot;org.mapstruct:mapstruct:${mapstruct}&quot;\r\n    annotationProcessor &quot;org.mapstruct:mapstruct-processor:${mapstruct}&quot;\r\n    testCompile &quot;org.mapstruct:mapstruct:${mapstruct}&quot;\r\n    testAnnotationProcessor &quot;org.mapstruct:mapstruct-processor:${mapstruct}&quot;\r\n\r\n    // unit test dependencies\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    testImplementation(&quot;org.spockframework:spock-core:${spockCore}&quot;) {\r\n        exclude group: &#39;org.codehaus.groovy&#39;\r\n    }\r\n    testImplementation &quot;org.codehaus.groovy:groovy:${codehausGroovy}&quot;\r\n    testImplementation &quot;org.spockframework:spock-spring:${spockCore}&quot;\r\n    testImplementation &#39;com.h2database:h2:2.2.222&#39;\r\n    testCompile &quot;cglib:cglib-nodep:${cglibNodep}&quot;\r\n    testImplementation &quot;org.mockito:mockito-inline&quot;\r\n    testImplementation &#39;com.tngtech.archunit:archunit:0.22.0&#39;\r\n\r\n    // flyway dependency\r\n    compile &quot;org.flywaydb:flyway-core:${flywayCore}&quot;\r\n\r\n    // swagger dependencies\r\n    implementation &quot;org.springdoc:springdoc-openapi-ui:${springDoc}&quot;\r\n    implementation &quot;org.springdoc:springdoc-openapi-webmvc-core:${springDoc}&quot;\r\n\r\n    // other dependencies\r\n    compile &quot;javax.inject:javax.inject:${javaxInject}&quot;\r\n    compile &quot;org.json:json:${orgJson}&quot;\r\n    compile &quot;com.google.code.gson:gson:${gson}&quot;\r\n    //compile &#39;io.swagger.codegen.v3:swagger-codegen-cli:3.0.10&#39;\r\n\r\n    //slueth - log tracing dependency\r\n    compile &#39;org.springframework.cloud:spring-cloud-starter-sleuth&#39;\r\n\r\n    //integration test dependencies\r\n    integrationImplementation &quot;org.testcontainers:spock:${testContainers}&quot;\r\n    integrationImplementation &quot;org.testcontainers:postgresql:${testContainers}&quot;\r\n    integrationRuntime &quot;org.codehaus.groovy:groovy-all:${codehausGroovy}&quot;\r\n    integrationImplementation(&quot;org.spockframework:spock-core:${spockCore}&quot;) {\r\n        exclude group: &#39;org.codehaus.groovy&#39;\r\n    }\r\n    integrationImplementation &quot;org.spockframework:spock-spring:${spockCore}&quot;\r\n    integrationImplementation &#39;org.springframework.security:spring-security-test&#39;\r\n    integrationImplementation &quot;org.testcontainers:localstack:${testContainers}&quot;\r\n\r\n    //security fix for https://blog.cloudflare.com/cve-2021-44228-log4j-rce-0-day-mitigation/\r\n    implementation &#39;org.apache.logging.log4j:log4j-to-slf4j:2.16.0&#39;\r\n    implementation &#39;org.apache.logging.log4j:log4j-api:2.16.0&#39;\r\n    implementation group: &#39;org.apache.commons&#39;, name: &#39;commons-text&#39;, version: &#39;1.10.0&#39;\r\n\r\n    //graphql dependencies\r\n    implementation &quot;org.springframework.boot:spring-boot-starter-graphql:${springBootVersion}&quot;\r\n    \r\n\r\n}\r\n\r\ndef generatedClassesPath= &quot;build/generated/sources/annotationProcessor/java/main&quot;\r\n\r\nquerydsl {\r\n    library = &#39;com.querydsl:querydsl-apt:5.0.0&#39;\r\n    jpa = true\r\n    querydslSourcesDir = generatedClassesPath\r\n}\r\n\r\n\r\nconfigurations {\r\n    querydsl.extendsFrom implementation, compileClasspath\r\n}\r\n\r\n\r\ncompileQuerydsl {\r\n    options.annotationProcessorPath = configurations.querydsl\r\n}\r\n\r\nproject.afterEvaluate {\r\n    project.tasks.compileQuerydsl.options.compilerArgs = [\r\n            &quot;-proc:only&quot;,\r\n            &quot;-processor&quot;, project.querydsl.processors() +\r\n                    &#39;,lombok.launch.AnnotationProcessorHider$AnnotationProcessor&#39;\r\n    ]\r\n}\r\n\r\n\r\ntest.finalizedBy jacocoTestReport\r\ncheck.dependsOn jacocoTestCoverageVerification\r\n\r\ntask genOperationsModels(type: JavaExec) {\r\n    main = &#39;com.abcxyz.items.ApiModelGenerator&#39;\r\n    classpath = configurations.compile + configurations.compileOnly + files(&quot;${buildDir}/resources/main&quot;) + files(&quot;${buildDir}/classes/java/main&quot;)\r\n    String resourceName = &quot;public/resources/spec.yaml&quot;\r\n    String microServiceName = &quot;plan ms&quot;\r\n    String outputPath = &quot;${project.projectDir}&quot;\r\n    String generatorName = &quot;cb-spring&quot;\r\n    String apiPackage = &quot;com.abcxyz.items.api&quot;\r\n    String modelPackage = &quot;com.abcxyz.items.api.model&quot;\r\n    String callableApis = &quot;false&quot;\r\n    args += [microServiceName, resourceName, outputPath, generatorName, apiPackage, modelPackage, callableApis]\r\n}\r\ngenOperationsModels.dependsOn build\r\n```\r\n\r\n","title":"Spring boot Gradle Build Java Compiler issue java.lang.IllegalStateException: endPosTable already set","body":"<p>I am facing java compiler issue while running gradle build. It passes when I rerun it locally. But I cannot rerun on jenkins and build always fails there.</p>\n<p>gradle version : 6.9\njava 1.8\nspring boot : 2.7.15</p>\n<p>after running <code>clean build</code> following exception comes for <code>compileJava</code> task.</p>\n<p>And it build is success after retry, then while starting application</p>\n<p>same exception comes but for <code>compileQuerydsl</code> task. What m i doing wrong, or any flag i need to update in gradle file</p>\n<p>Exception:</p>\n<pre><code>java.lang.IllegalStateException: endPosTable already set\n        at com.sun.tools.javac.util.DiagnosticSource.setEndPosTable(DiagnosticSource.java:136)\n        at com.sun.tools.javac.util.Log.setEndPosTable(Log.java:350)\n        at com.sun.tools.javac.main.JavaCompiler.parse(JavaCompiler.java:667)\n        at com.sun.tools.javac.main.JavaCompiler.parseFiles(JavaCompiler.java:950)\n        at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.&lt;init&gt;(JavacProcessingEnvironment.java:900)\n        at com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.next(JavacProcessingEnvironment.java:929)\n        at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1195)\n        at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1170)\n        at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:856)\n        at com.sun.tools.javac.main.Main.compile(Main.java:523)\n        at com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:129)\n        at com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:138)\n        at org.gradle.internal.compiler.java.IncrementalCompileTask.call(IncrementalCompileTask.java:77)\n        at org.gradle.api.internal.tasks.compile.AnnotationProcessingCompileTask.call(AnnotationProcessingCompileTask.java:94)\n        at org.gradle.api.internal.tasks.compile.ResourceCleaningCompilationTask.call(ResourceCleaningCompilationTask.java:57)\n        at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:55)\n        at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:40)\n        at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:97)\n        at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:51)\n        at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:37)\n        at org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:51)\n        at org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:37)\n        at org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:46)\n        at org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:36)\n        at org.gradle.api.internal.tasks.compile.CleaningJavaCompiler.execute(CleaningJavaCompiler.java:53)\n        at org.gradle.api.internal.tasks.compile.incremental.IncrementalCompilerFactory.lambda$createRebuildAllCompiler$0(IncrementalCompilerFactory.java:98)\n        at org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:61)\n        at org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:45)\n        at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:59)\n        at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:51)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:62)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$call$2(DefaultBuildOperationExecutor.java:76)\n        at org.gradle.internal.operations.UnmanagedBuildOperationWrapper.callWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:54)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:76)\n        at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler.execute(CompileJavaBuildOperationReportingCompiler.java:51)\n        at org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:345)\n        at org.gradle.api.tasks.compile.JavaCompile.performIncrementalCompilation(JavaCompile.java:239)\n        at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:211)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:104)\n        at org.gradle.api.internal.project.taskfactory.IncrementalInputsTaskAction.doExecute(IncrementalInputsTaskAction.java:32)\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)\n        at org.gradle.api.internal.project.taskfactory.AbstractIncrementalTaskAction.execute(AbstractIncrementalTaskAction.java:25)\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$2.run(ExecuteActionsTaskExecuter.java:494)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:56)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$run$1(DefaultBuildOperationExecutor.java:71)\n        at org.gradle.internal.operations.UnmanagedBuildOperationWrapper.runWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:45)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:71)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:479)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:462)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.access$400(ExecuteActionsTaskExecuter.java:105)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.executeWithPreviousOutputFiles(ExecuteActionsTaskExecuter.java:273)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.execute(ExecuteActionsTaskExecuter.java:251)\n        at org.gradle.internal.execution.steps.ExecuteStep.lambda$executeOperation$0(ExecuteStep.java:65)\n        at java.util.Optional.map(Optional.java:215)\n        at org.gradle.internal.execution.steps.ExecuteStep.executeOperation(ExecuteStep.java:65)\n        at org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:34)\n        at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:47)\n        at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:44)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:62)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$call$2(DefaultBuildOperationExecutor.java:76)\n        at org.gradle.internal.operations.UnmanagedBuildOperationWrapper.callWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:54)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:76)\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:44)\n        at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:34)\n        at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:72)\n        at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:42)\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:53)\n        at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:39)\n        at org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:44)\n        at org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:77)\n        at org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:58)\n        at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:54)\n        at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:32)\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:57)\n        at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:38)\n        at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:63)\n        at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:30)\n        at org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:176)\n        at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:76)\n        at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:47)\n        at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:43)\n        at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:32)\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:39)\n        at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:25)\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:102)\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$0(SkipUpToDateStep.java:95)\n        at java.util.Optional.map(Optional.java:215)\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:55)\n        at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:39)\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:83)\n        at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:44)\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:96)\n        at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:52)\n        at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:83)\n        at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:54)\n        at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:74)\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.lambda$execute$2(SkipEmptyWorkStep.java:88)\n        at java.util.Optional.orElseGet(Optional.java:267)\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:88)\n        at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:34)\n        at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)\n        at org.gradle.internal.execution.steps.LoadExecutionStateStep.execute(LoadExecutionStateStep.java:46)\n        at org.gradle.internal.execution.steps.LoadExecutionStateStep.execute(LoadExecutionStateStep.java:34)\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:43)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution$3.withWorkspace(ExecuteActionsTaskExecuter.java:286)\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:43)\n        at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:33)\n        at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:40)\n        at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:30)\n        at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:54)\n        at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:40)\n        at org.gradle.internal.execution.impl.DefaultExecutionEngine.execute(DefaultExecutionEngine.java:41)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:183)\n        at java.util.Optional.orElseGet(Optional.java:267)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:183)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:173)\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:109)\n        at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\n        at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:62)\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\n        at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:62)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$call$2(DefaultBuildOperationExecutor.java:76)\n        at org.gradle.internal.operations.UnmanagedBuildOperationWrapper.callWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:54)\n        at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:76)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\n        at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:41)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:411)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:398)\n        \n\n&gt; Task :compileJava FAILED\n</code></pre>\n<p>Build.gradle file</p>\n<pre><code>buildscript {\n    repositories {\n        maven {\n            url &quot;https://plugins.gradle.org/m2/&quot;\n        }\n    }\n    dependencies {\n        classpath 'org.hibernate:hibernate-gradle-plugin:5.6.0.Final'\n    }\n}\n\nplugins {\n    id 'java'\n    id 'org.springframework.boot' version &quot;${springBootVersion}&quot;\n    id 'io.spring.dependency-management' version &quot;${springDependencyMgmt}&quot;\n    id 'org.hidetake.swagger.generator' version &quot;${hideTakeSwaggerGen}&quot;\n    id 'java-library'\n    id 'maven-publish'\n    id 'groovy'\n    id 'com.palantir.docker' version &quot;${dockerPlugin}&quot;\n    id &quot;org.sonarqube&quot; version &quot;3.3&quot;\n    id 'jacoco'\n    id 'io.franzbecker.gradle-lombok' version '5.0.0'\n    id 'com.ewerk.gradle.plugins.querydsl' version '1.0.10'\n}\n\napply plugin: 'jacoco'\napply plugin: &quot;application&quot;\napply plugin: 'org.hibernate.orm'\n\ngroup 'com.abcxyz'\nversion '1.1.5-SNAPSHOT'\n\nsourceCompatibility = 1.8\n\nspringBoot {\n    buildInfo()\n}\n\nbootJar {\n    launchScript()\n}\nmainClassName = &quot;com.abcxyz.items.ItemApplication&quot;\n\nloadConfiguration()\n\nhibernate {\n    sourceSets = [project.sourceSets.main]\n    enhance {\n        enableLazyInitialization = true\n        enableDirtyTracking = true\n    }\n}\next['mockito.version'] = '4.3.1'\next['snakeyaml.version'] = '1.33'\n\n\ndef loadConfiguration() {\n    def environment = hasProperty('env') ? env : 'local'\n    println &quot;Environment is set to $environment&quot;\n\n    def configFile = file('environment.groovy')\n    def config = new ConfigSlurper(environment).parse(configFile.toURL())\n\n    config.forEach { k, v -&gt;\n        project.ext[k] = v\n    }\n}\n\nrepositories {\n    mavenLocal()\n    mavenCentral()\n    maven {\n        url artifactory_build_url\n        credentials {\n            username System.env.CODEARTIFACT_USER\n            password System.env.CODEARTIFACT_AUTH_TOKEN\n        }\n    }\n\n    maven {\n        url &quot;https://packages.confluent.io/maven/&quot;\n    }\n}\n\njacoco {\n    toolVersion = &quot;0.8.4&quot;\n    reportsDir = file(&quot;$buildDir/jacoco&quot;)\n}\n\ndocker {\n    name &quot;items_ms&quot;\n    dockerfile file(&quot;Dockerfile-local&quot;)\n    copySpec.from(jar).rename(&quot;.*&quot;, &quot;items.jar&quot;)\n    buildArgs(['JAR_FILE': &quot;items.jar&quot;])\n\n}\n\n\nsourceSets.main.java.srcDirs = ['src/main/java', 'build/generated/sources/annotationProcessor/java/main']\nsourceSets {\n    integration {\n        groovy.srcDir &quot;$projectDir/src/integrationTest/groovy&quot;\n        resources.srcDir &quot;$projectDir/src/integrationTest/resources&quot;\n        compileClasspath += main.output + test.output\n        runtimeClasspath += main.output + test.output\n    }\n}\n\nconfigurations {\n    integrationImplementation.extendsFrom testImplementation\n    integrationRuntime.extendsFrom testRuntime\n}\n\ndependencyManagement {\n    imports {\n        mavenBom &quot;org.springframework.cloud:spring-cloud-dependencies:${hoxton}&quot;\n    }\n}\n\ndependencies {\n\n    // spring dependencies\n    compile 'org.springframework.boot:spring-boot-starter-validation'\n    compile 'org.springframework.boot:spring-boot-configuration-processor'\n    compile 'org.springframework:spring-context-support'\n    compile 'org.springframework.boot:spring-boot-starter-actuator'\n    compile 'org.springframework.boot:spring-boot-starter-batch'\n    compile('org.springframework.boot:spring-boot-starter-data-jpa') {\n        exclude group: &quot;org.hibernate&quot;, module: &quot;hibernate-core&quot;\n    }\n    // https://mvnrepository.com/artifact/org.apache.tomcat/tomcat-jdbc\n    implementation 'org.apache.tomcat:tomcat-jdbc:10.0.0'\n    implementation &quot;org.hibernate:hibernate-core:5.5.8.Final&quot;\n    compile 'org.springframework.boot:spring-boot-starter-security'\n    compile 'org.springframework.boot:spring-boot-starter-web'\n\n    implementation 'org.springframework.cloud:spring-cloud-context:3.1.7'\n    implementation 'org.springframework.cloud:spring-cloud-commons:3.1.7'\n    implementation 'org.springframework.cloud:spring-cloud-starter:3.1.7'\n    // spring cloud dependencies\n    compile (&quot;org.springframework.cloud:spring-cloud-aws-context:2.2.6.RELEASE&quot;) {\n        exclude group: &quot;org.springframework.cloud&quot;, module: &quot;spring-cloud-commons&quot;\n        exclude group: &quot;org.springframework.cloud&quot;, module: &quot;spring-cloud-context&quot;\n        exclude group: &quot;org.springframework.cloud&quot;, module: &quot;spring-cloud-starter&quot;\n    }\n    compile 'org.springframework.cloud:spring-cloud-aws-messaging:2.2.6.RELEASE'\n\n    // postgres\n    compile 'org.postgresql:postgresql'\n\n    \n    // lombok dependencies\n    compileOnly 'org.projectlombok:lombok'\n    annotationProcessor 'org.projectlombok:lombok'\n    annotationProcessor &quot;com.abcxyz.cb-ms-core:cb-ms-annotation-processor:${msCore}&quot;\n\n    // my dep\n    annotationProcessor &quot;javax.persistence:javax.persistence-api:${jpa}&quot;\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'com.querydsl:querydsl-jpa:5.0.0'\n\n    // other annotation processors\n    annotationProcessor &quot;com.querydsl:querydsl-apt:${queryDsl}&quot;\n    annotationProcessor &quot;com.querydsl:querydsl-jpa:${queryDsl}:apt&quot;\n\n\n    // mapstruct dependencies\n    compile &quot;org.mapstruct:mapstruct:${mapstruct}&quot;\n    annotationProcessor &quot;org.mapstruct:mapstruct-processor:${mapstruct}&quot;\n    testCompile &quot;org.mapstruct:mapstruct:${mapstruct}&quot;\n    testAnnotationProcessor &quot;org.mapstruct:mapstruct-processor:${mapstruct}&quot;\n\n    // unit test dependencies\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation(&quot;org.spockframework:spock-core:${spockCore}&quot;) {\n        exclude group: 'org.codehaus.groovy'\n    }\n    testImplementation &quot;org.codehaus.groovy:groovy:${codehausGroovy}&quot;\n    testImplementation &quot;org.spockframework:spock-spring:${spockCore}&quot;\n    testImplementation 'com.h2database:h2:2.2.222'\n    testCompile &quot;cglib:cglib-nodep:${cglibNodep}&quot;\n    testImplementation &quot;org.mockito:mockito-inline&quot;\n    testImplementation 'com.tngtech.archunit:archunit:0.22.0'\n\n    // flyway dependency\n    compile &quot;org.flywaydb:flyway-core:${flywayCore}&quot;\n\n    // swagger dependencies\n    implementation &quot;org.springdoc:springdoc-openapi-ui:${springDoc}&quot;\n    implementation &quot;org.springdoc:springdoc-openapi-webmvc-core:${springDoc}&quot;\n\n    // other dependencies\n    compile &quot;javax.inject:javax.inject:${javaxInject}&quot;\n    compile &quot;org.json:json:${orgJson}&quot;\n    compile &quot;com.google.code.gson:gson:${gson}&quot;\n    //compile 'io.swagger.codegen.v3:swagger-codegen-cli:3.0.10'\n\n    //slueth - log tracing dependency\n    compile 'org.springframework.cloud:spring-cloud-starter-sleuth'\n\n    //integration test dependencies\n    integrationImplementation &quot;org.testcontainers:spock:${testContainers}&quot;\n    integrationImplementation &quot;org.testcontainers:postgresql:${testContainers}&quot;\n    integrationRuntime &quot;org.codehaus.groovy:groovy-all:${codehausGroovy}&quot;\n    integrationImplementation(&quot;org.spockframework:spock-core:${spockCore}&quot;) {\n        exclude group: 'org.codehaus.groovy'\n    }\n    integrationImplementation &quot;org.spockframework:spock-spring:${spockCore}&quot;\n    integrationImplementation 'org.springframework.security:spring-security-test'\n    integrationImplementation &quot;org.testcontainers:localstack:${testContainers}&quot;\n\n    //security fix for https://blog.cloudflare.com/cve-2021-44228-log4j-rce-0-day-mitigation/\n    implementation 'org.apache.logging.log4j:log4j-to-slf4j:2.16.0'\n    implementation 'org.apache.logging.log4j:log4j-api:2.16.0'\n    implementation group: 'org.apache.commons', name: 'commons-text', version: '1.10.0'\n\n    //graphql dependencies\n    implementation &quot;org.springframework.boot:spring-boot-starter-graphql:${springBootVersion}&quot;\n    \n\n}\n\ndef generatedClassesPath= &quot;build/generated/sources/annotationProcessor/java/main&quot;\n\nquerydsl {\n    library = 'com.querydsl:querydsl-apt:5.0.0'\n    jpa = true\n    querydslSourcesDir = generatedClassesPath\n}\n\n\nconfigurations {\n    querydsl.extendsFrom implementation, compileClasspath\n}\n\n\ncompileQuerydsl {\n    options.annotationProcessorPath = configurations.querydsl\n}\n\nproject.afterEvaluate {\n    project.tasks.compileQuerydsl.options.compilerArgs = [\n            &quot;-proc:only&quot;,\n            &quot;-processor&quot;, project.querydsl.processors() +\n                    ',lombok.launch.AnnotationProcessorHider$AnnotationProcessor'\n    ]\n}\n\n\ntest.finalizedBy jacocoTestReport\ncheck.dependsOn jacocoTestCoverageVerification\n\ntask genOperationsModels(type: JavaExec) {\n    main = 'com.abcxyz.items.ApiModelGenerator'\n    classpath = configurations.compile + configurations.compileOnly + files(&quot;${buildDir}/resources/main&quot;) + files(&quot;${buildDir}/classes/java/main&quot;)\n    String resourceName = &quot;public/resources/spec.yaml&quot;\n    String microServiceName = &quot;plan ms&quot;\n    String outputPath = &quot;${project.projectDir}&quot;\n    String generatorName = &quot;cb-spring&quot;\n    String apiPackage = &quot;com.abcxyz.items.api&quot;\n    String modelPackage = &quot;com.abcxyz.items.api.model&quot;\n    String callableApis = &quot;false&quot;\n    args += [microServiceName, resourceName, outputPath, generatorName, apiPackage, modelPackage, callableApis]\n}\ngenOperationsModels.dependsOn build\n</code></pre>\n"},{"tags":["java","spring","spring-batch"],"owner":{"account_id":19188329,"reputation":1,"user_id":14018622,"display_name":"Arsenal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695286733,"answer_count":0,"score":0,"last_activity_date":1695374240,"creation_date":1695264382,"question_id":77146904,"body_markdown":"I&#39;m working on migration Spring Batch 5. I&#39;m using Jave 17 and Spring Boot 3. I didn&#39;t have any issue on step and job. However, In spring batch 5 DefaultBatchConfigurer is removed. setting datasource is different. I tried to use  Spring Batch 5 migiration guide but I&#39;m getting PreparedStatementCallback; bad SQL grammar [INSERT INTO BATCH_JOB_EXECUTION_PARAMS(JOB_EXECUTION_ID, PARAMETER_NAME,... error.\r\n\r\nmy Batchconf file is:\r\n\r\n```\r\n@Configuration\r\n@AutoConfigureAfter(JobRepo.class)\r\n@EnableBatchProcessing(dataSourceRef = &quot;batchDataSource&quot;, transactionManagerRef = &quot;batchTransactionManager&quot;)\r\npublic class BatchConfiguration {\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;BatchConfig&quot;)\r\n    DataSource dataSource;\r\n    \r\n    @Bean\r\n    public DataSource batchDataSource() {\r\n        return dataSource;\r\n    }\r\n\r\n    @Bean\r\n    public JdbcTransactionManager batchTransactionManager(DataSource dataSource) {\r\n        return new JdbcTransactionManager(dataSource);\r\n    }\r\n\r\n    public static void main(String e []) throws Exception {\r\n        JobParameters jobParameters = new JobParametersBuilder().addLong(&quot;time&quot;, System.currentTimeMillis()).toJobParameters();\r\n\r\n        ApplicationContext context = new AnnotationConfigApplicationContext(LoadController.class);\r\n        JobLauncher jobLauncher = context.getBean(JobLauncher.class);\r\n\r\n        JobExecution jobExecution = jobLauncher.run(context.getBean(Job.class), jobParameters);\r\n        System.out.println(&quot;Job Exit Status : &quot; + jobExecution.getStatus());\r\n    }\r\n\r\n    @Bean\r\n    public Step step(JobRepository jobRepository, JdbcTransactionManager transactionManager) {\r\n        return new StepBuilder(&quot;step&quot;, jobRepository)\r\n                .&lt;Employee, Employee&gt;chunk(5, transactionManager)\r\n                .reader(itemReader())\r\n                .writer(itemWriter())\r\n                .processor(new CSVItemProcessor())\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public Job job(JobRepository jobRepository, JdbcTransactionManager transactionManager) {\r\n        return new JobBuilder(&quot;job&quot;)\r\n                .start(step(jobRepository, transactionManager))\r\n                .build();\r\n    }\r\n\r\n\r\n    @Bean\r\n    public FlatFileItemWriter&lt;Employee&gt; itemWriter() {\r\n        return new FlatFileItemWriterBuilder&lt;Employee&gt;()\r\n                .resource(new FileSystemResource(&quot;persons.csv&quot;))\r\n                .name(&quot;personItemWriter&quot;)\r\n                .delimited()\r\n                .names(&quot;id&quot;, &quot;name&quot;)\r\n                .build();\r\n    }\r\n\r\n\r\n\r\n}\r\n```\r\nthis is How I used datasource before spring batch 5 migration\r\n\r\n\r\n\r\n```\r\n@EnableBatchProcessing\r\n@Configuration\r\n@AutoConfigureAfter(JobRepo.class)\r\npublic class BatchConfiguration {\r\n\r\n    @Bean\r\n    public DefaultBatchConfiguration dataSource(@Qualifier(&quot;BatchConfig&quot;) DataSource dataSource) {\r\n        return new DefaultBatchConfigurer(dataSource);\r\n    }\r\n\r\n    //step\r\n\r\n   //job\r\n\r\n   ...\r\n\r\n\r\n\r\n}\r\n \r\n```\r\n \r\nJobRepo class is where I&#39;m loading the db USERNAME, PASSWORD....\r\n\r\n```\r\n@Configuration\r\n@ConfigurationProperties(prefix=&quot;spring.datasource&quot;)\r\npublic class JobRepo extends HikariConfig{\r\n\r\n  @Bean(&quot;BatchConfig&quot;)\r\n  public DataSource dataSource() throws SQLException{\r\n\r\n   return new HikariDataSource(this);\r\n  }\r\n\r\n}\r\n```\r\nthis is my job luncher class\r\n\r\n\r\n```\r\n@Configuration\r\npublic class BatchUtil{\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;BatchConfig&quot;)\r\n    DataSource dataSource;\r\n  \r\n    private JobRepository getJobRep() throws Exception {\r\n      JobRepositoryFactoryBean factory = new JobRepositoryFactoryBean();\r\n      factory.setDataSource(dataSource);\r\n      factory.setTransactionManager(new ResourcelessTransactionManager());\r\n      factory.afterPropertiesSet();\r\n      return (JobRepository) factory.getObject();\r\n      }\r\n\r\n    @Bean(&quot;JobLauncher&quot;)\r\n    public SimpleJobLauncher simpleJobLauncher () throws Exception {\r\n      SimpleJobLauncher jobLauncher = new SimpleJobLauncher();\r\n      jobLauncher.setJobRepository(getJobRep());\r\n      jobLauncher.setTaskExecutor(asyncTaskExecutor());\r\n      return jobLauncher;\r\n    }\r\n\r\n}\r\n```\r\nApplication.property\r\n\r\n\r\n```\r\nspring.datasource.url=jdbc:oracle:thin:@localhost:1527:OR_DEV\r\nspring.datasource.username=USER12\r\nspring.datasource.password=txz$2Zhr\r\nspring.datasource.driver-class-name=oracle.jdbc.OracleDriver\r\nspring.batch.jdbc.initialize-schema=always\r\n```\r\n\r\n\r\n \r\n\r\nI tried to follow the spring batch 5 migration guide but it doesn&#39;t have an example. ","title":"PreparedStatementCallback; bad SQL grammar [INSERT INTO BATCH_JOB_EXECUTION_PARAMS(JOB_EXECUTION_ID, PARAMETER_NAME,","body":"<p>I'm working on migration Spring Batch 5. I'm using Jave 17 and Spring Boot 3. I didn't have any issue on step and job. However, In spring batch 5 DefaultBatchConfigurer is removed. setting datasource is different. I tried to use  Spring Batch 5 migiration guide but I'm getting PreparedStatementCallback; bad SQL grammar [INSERT INTO BATCH_JOB_EXECUTION_PARAMS(JOB_EXECUTION_ID, PARAMETER_NAME,... error.</p>\n<p>my Batchconf file is:</p>\n<pre><code>@Configuration\n@AutoConfigureAfter(JobRepo.class)\n@EnableBatchProcessing(dataSourceRef = &quot;batchDataSource&quot;, transactionManagerRef = &quot;batchTransactionManager&quot;)\npublic class BatchConfiguration {\n\n    @Autowired\n    @Qualifier(&quot;BatchConfig&quot;)\n    DataSource dataSource;\n    \n    @Bean\n    public DataSource batchDataSource() {\n        return dataSource;\n    }\n\n    @Bean\n    public JdbcTransactionManager batchTransactionManager(DataSource dataSource) {\n        return new JdbcTransactionManager(dataSource);\n    }\n\n    public static void main(String e []) throws Exception {\n        JobParameters jobParameters = new JobParametersBuilder().addLong(&quot;time&quot;, System.currentTimeMillis()).toJobParameters();\n\n        ApplicationContext context = new AnnotationConfigApplicationContext(LoadController.class);\n        JobLauncher jobLauncher = context.getBean(JobLauncher.class);\n\n        JobExecution jobExecution = jobLauncher.run(context.getBean(Job.class), jobParameters);\n        System.out.println(&quot;Job Exit Status : &quot; + jobExecution.getStatus());\n    }\n\n    @Bean\n    public Step step(JobRepository jobRepository, JdbcTransactionManager transactionManager) {\n        return new StepBuilder(&quot;step&quot;, jobRepository)\n                .&lt;Employee, Employee&gt;chunk(5, transactionManager)\n                .reader(itemReader())\n                .writer(itemWriter())\n                .processor(new CSVItemProcessor())\n                .build();\n    }\n\n    @Bean\n    public Job job(JobRepository jobRepository, JdbcTransactionManager transactionManager) {\n        return new JobBuilder(&quot;job&quot;)\n                .start(step(jobRepository, transactionManager))\n                .build();\n    }\n\n\n    @Bean\n    public FlatFileItemWriter&lt;Employee&gt; itemWriter() {\n        return new FlatFileItemWriterBuilder&lt;Employee&gt;()\n                .resource(new FileSystemResource(&quot;persons.csv&quot;))\n                .name(&quot;personItemWriter&quot;)\n                .delimited()\n                .names(&quot;id&quot;, &quot;name&quot;)\n                .build();\n    }\n\n\n\n}\n</code></pre>\n<p>this is How I used datasource before spring batch 5 migration</p>\n<pre><code>@EnableBatchProcessing\n@Configuration\n@AutoConfigureAfter(JobRepo.class)\npublic class BatchConfiguration {\n\n    @Bean\n    public DefaultBatchConfiguration dataSource(@Qualifier(&quot;BatchConfig&quot;) DataSource dataSource) {\n        return new DefaultBatchConfigurer(dataSource);\n    }\n\n    //step\n\n   //job\n\n   ...\n\n\n\n}\n \n</code></pre>\n<p>JobRepo class is where I'm loading the db USERNAME, PASSWORD....</p>\n<pre><code>@Configuration\n@ConfigurationProperties(prefix=&quot;spring.datasource&quot;)\npublic class JobRepo extends HikariConfig{\n\n  @Bean(&quot;BatchConfig&quot;)\n  public DataSource dataSource() throws SQLException{\n\n   return new HikariDataSource(this);\n  }\n\n}\n</code></pre>\n<p>this is my job luncher class</p>\n<pre><code>@Configuration\npublic class BatchUtil{\n\n    @Autowired\n    @Qualifier(&quot;BatchConfig&quot;)\n    DataSource dataSource;\n  \n    private JobRepository getJobRep() throws Exception {\n      JobRepositoryFactoryBean factory = new JobRepositoryFactoryBean();\n      factory.setDataSource(dataSource);\n      factory.setTransactionManager(new ResourcelessTransactionManager());\n      factory.afterPropertiesSet();\n      return (JobRepository) factory.getObject();\n      }\n\n    @Bean(&quot;JobLauncher&quot;)\n    public SimpleJobLauncher simpleJobLauncher () throws Exception {\n      SimpleJobLauncher jobLauncher = new SimpleJobLauncher();\n      jobLauncher.setJobRepository(getJobRep());\n      jobLauncher.setTaskExecutor(asyncTaskExecutor());\n      return jobLauncher;\n    }\n\n}\n</code></pre>\n<p>Application.property</p>\n<pre><code>spring.datasource.url=jdbc:oracle:thin:@localhost:1527:OR_DEV\nspring.datasource.username=USER12\nspring.datasource.password=txz$2Zhr\nspring.datasource.driver-class-name=oracle.jdbc.OracleDriver\nspring.batch.jdbc.initialize-schema=always\n</code></pre>\n<p>I tried to follow the spring batch 5 migration guide but it doesn't have an example.</p>\n"},{"tags":["java","spring","spring-boot","docker","maven"],"comments":[{"owner":{"account_id":9911696,"reputation":1656,"user_id":7338171,"accept_rate":17,"display_name":"Piyush Patel"},"score":0,"creation_date":1591295685,"post_id":62201502,"comment_id":110009922,"body_markdown":"You&#39;re not getting dependencies from Maven. Instead you&#39;ve them locally. Did you correctly mount those files in `lib` into docker.","body":"You&#39;re not getting dependencies from Maven. Instead you&#39;ve them locally. Did you correctly mount those files in <code>lib</code> into docker."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1591300207,"post_id":62201502,"comment_id":110012070,"body_markdown":"If this is really a spring boot app you should not try to use maven-jar-plugin yourself. Use the spring-boot-maven-plugin. Have you tested to start your spring-boot app without docker first to check if it&#39;s correctly starting up?","body":"If this is really a spring boot app you should not try to use maven-jar-plugin yourself. Use the spring-boot-maven-plugin. Have you tested to start your spring-boot app without docker first to check if it&#39;s correctly starting up?"},{"owner":{"account_id":8538081,"reputation":1031,"user_id":6399074,"display_name":"alan9uo"},"score":0,"creation_date":1615519096,"post_id":62201502,"comment_id":117721755,"body_markdown":"@khmarbaise I remove maven-jar-plugin, and I got no main manifest attribute, in /app.jar error when docker run . And I run the jar file local successfully.","body":"@khmarbaise I remove maven-jar-plugin, and I got no main manifest attribute, in /app.jar error when docker run . And I run the jar file local successfully."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1615536006,"post_id":62201502,"comment_id":117725914,"body_markdown":"What is this: `&lt;version&gt;${parent.version}&lt;/version&gt;` ? Yes because the manifest main entry is done by spring-boot-maven-plugin and there is s a bootstrap within Spring Boot jar file ... if you done correctly you can start the app via `java -jar xyz.jar` if not there is something missing/wrong... I can&#39;t see everything you configured so I can&#39;t say what exactly is wrong...","body":"What is this: <code>&lt;version&gt;${parent.version}&lt;&#47;version&gt;</code> ? Yes because the manifest main entry is done by spring-boot-maven-plugin and there is s a bootstrap within Spring Boot jar file ... if you done correctly you can start the app via <code>java -jar xyz.jar</code> if not there is something missing/wrong... I can&#39;t see everything you configured so I can&#39;t say what exactly is wrong..."},{"owner":{"account_id":3460362,"reputation":752,"user_id":2897683,"accept_rate":93,"display_name":"thahgr"},"score":1,"creation_date":1643360187,"post_id":62201502,"comment_id":125323743,"body_markdown":"@emuleumassi did you find what was the problem eventually ? I have a similar issue","body":"@emuleumassi did you find what was the problem eventually ? I have a similar issue"},{"owner":{"account_id":2990507,"reputation":4955,"user_id":2538180,"accept_rate":53,"display_name":"emoleumassi"},"score":0,"creation_date":1643442405,"post_id":62201502,"comment_id":125344687,"body_markdown":"@thahgr see my answer","body":"@thahgr see my answer"},{"owner":{"account_id":10517283,"reputation":998,"user_id":7750999,"display_name":"Caffeine Coder"},"score":0,"creation_date":1650123460,"post_id":62201502,"comment_id":127044528,"body_markdown":"The plugin config mentioned in the answer here would help- https://stackoverflow.com/questions/54867295/springboot-no-main-manifest-attribute-maven","body":"The plugin config mentioned in the answer here would help- <a href=\"https://stackoverflow.com/questions/54867295/springboot-no-main-manifest-attribute-maven\" title=\"springboot no main manifest attribute maven\">stackoverflow.com/questions/54867295/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1174873,"reputation":837,"user_id":1151108,"display_name":"Łukasz Olszewski"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591296569,"creation_date":1591296569,"answer_id":62202070,"question_id":62201502,"body_markdown":"add `maven-assembly-plugin` to your pom.xml\r\n\r\neg:\r\n   \r\n \r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n            &lt;descriptorRefs&gt;\r\n                &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n            &lt;/descriptorRefs&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;id&gt;make-assembly&lt;/id&gt;\r\n                &lt;phase&gt;package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;single&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n    &lt;/plugin&gt;","title":"Spring boot docker Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/boot/SpringApplication","body":"<p>add <code>maven-assembly-plugin</code> to your pom.xml</p>\n\n<p>eg:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;descriptorRefs&gt;\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n        &lt;/descriptorRefs&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;make-assembly&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;single&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2990507,"reputation":4955,"user_id":2538180,"accept_rate":53,"display_name":"emoleumassi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643442375,"creation_date":1643442375,"answer_id":70903304,"question_id":62201502,"body_markdown":"with spring boot we can use `spring-boot-maven-plugin`\r\n```\r\n &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;repackage&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;repackage&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;classifier&gt;exec&lt;/classifier&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n```","title":"Spring boot docker Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/boot/SpringApplication","body":"<p>with spring boot we can use <code>spring-boot-maven-plugin</code></p>\n<pre><code> &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;repackage&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;classifier&gt;exec&lt;/classifier&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13626539,"reputation":1469,"user_id":9829662,"display_name":"Mahdi Zareei"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695374206,"creation_date":1695374206,"answer_id":77156310,"question_id":62201502,"body_markdown":"check your project build gradle file if you have something like this:\r\n\r\n    application {\r\n       mainClass.set(&quot;MainKt&quot;)\r\n    }\r\n    \r\njust remove it and build your project again","title":"Spring boot docker Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/boot/SpringApplication","body":"<p>check your project build gradle file if you have something like this:</p>\n<pre><code>application {\n   mainClass.set(&quot;MainKt&quot;)\n}\n</code></pre>\n<p>just remove it and build your project again</p>\n"}],"owner":{"account_id":2990507,"reputation":4955,"user_id":2538180,"accept_rate":53,"display_name":"emoleumassi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4205,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70903304,"answer_count":3,"score":1,"last_activity_date":1695374206,"creation_date":1591294562,"question_id":62201502,"body_markdown":"I want to start my spring-boot application in docker an i got an error in `docker run`\r\n\r\nMy Main-Class:\r\n```\r\n@SpringBootApplication\r\npublic class Application {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(Application.class, args);\r\n    }\r\n}\r\n```\r\n\r\nMy pom.xml:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.emo.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;test&lt;/artifactId&gt;\r\n        &lt;version&gt;0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;artifactId&gt;test-core&lt;/artifactId&gt;\r\n    &lt;version&gt;${parent.version}&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;name&gt;test-core&lt;/name&gt;\r\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        ....\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;!-- Build an executable JAR --&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\r\n                            &lt;mainClass&gt;com.test.Application&lt;/mainClass&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\nMy manifest:\r\n```\r\nManifest-Version: 1.0\r\nBuilt-By: emo.leumassi\r\nBuild-Jdk: 11.0.7\r\nMain-Class: com.test.Application\r\nCreated-By: Apache Maven\r\n```\r\n\r\nFor some reasons, i don&#39;t want to use the `spring-boot-maven-plugin`\r\n\r\nMy Dockerfile\r\n```\r\nFROM openjdk:8-jdk-alpine\r\nARG JAR_FILE=test-*.jar\r\nCOPY ${JAR_FILE} test.jar\r\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;test.jar&quot;]\r\n```\r\n\r\nI created the container with this script:\r\n```\r\ndocker build -t test .\r\n\r\ndocker run -p 8080:8080 test\r\n```\r\n\r\nI get this error:\r\n```\r\nSending build context to Docker daemon  18.94kB\r\nStep 1/4 : FROM openjdk:8-jdk-alpine\r\n ---&gt; a3562aa0b991\r\nStep 2/4 : ARG JAR_FILE=test-*.jar\r\n ---&gt; Running in 739ab5566b9f\r\nRemoving intermediate container 739ab5566b9f\r\n ---&gt; 9d2e5a894070\r\nStep 3/4 : COPY ${JAR_FILE} test.jar\r\n ---&gt; 2746354c80a5\r\nStep 4/4 : ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;test.jar&quot;]\r\n ---&gt; Running in 9850a06d6686\r\nRemoving intermediate container 9850a06d6686\r\n ---&gt; e5ec33eac8a9\r\nSuccessfully built e5ec33eac8a9\r\nSuccessfully tagged kazi-core:latest\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/boot/SpringApplication\r\n        at com.test.Application.main(Application.java:10)\r\nCaused by: java.lang.ClassNotFoundException: org.springframework.boot.SpringApplication\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n        ... 1 more\r\n\r\n```","title":"Spring boot docker Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/boot/SpringApplication","body":"<p>I want to start my spring-boot application in docker an i got an error in <code>docker run</code></p>\n\n<p>My Main-Class:</p>\n\n<pre><code>@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n\n<p>My pom.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;com.emo.test&lt;/groupId&gt;\n        &lt;artifactId&gt;test&lt;/artifactId&gt;\n        &lt;version&gt;0.1-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;artifactId&gt;test-core&lt;/artifactId&gt;\n    &lt;version&gt;${parent.version}&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;test-core&lt;/name&gt;\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n    &lt;dependencies&gt;\n        ....\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;!-- Build an executable JAR --&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                            &lt;mainClass&gt;com.test.Application&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>My manifest:</p>\n\n<pre><code>Manifest-Version: 1.0\nBuilt-By: emo.leumassi\nBuild-Jdk: 11.0.7\nMain-Class: com.test.Application\nCreated-By: Apache Maven\n</code></pre>\n\n<p>For some reasons, i don't want to use the <code>spring-boot-maven-plugin</code></p>\n\n<p>My Dockerfile</p>\n\n<pre><code>FROM openjdk:8-jdk-alpine\nARG JAR_FILE=test-*.jar\nCOPY ${JAR_FILE} test.jar\nENTRYPOINT [\"java\", \"-jar\", \"test.jar\"]\n</code></pre>\n\n<p>I created the container with this script:</p>\n\n<pre><code>docker build -t test .\n\ndocker run -p 8080:8080 test\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>Sending build context to Docker daemon  18.94kB\nStep 1/4 : FROM openjdk:8-jdk-alpine\n ---&gt; a3562aa0b991\nStep 2/4 : ARG JAR_FILE=test-*.jar\n ---&gt; Running in 739ab5566b9f\nRemoving intermediate container 739ab5566b9f\n ---&gt; 9d2e5a894070\nStep 3/4 : COPY ${JAR_FILE} test.jar\n ---&gt; 2746354c80a5\nStep 4/4 : ENTRYPOINT [\"java\", \"-jar\", \"test.jar\"]\n ---&gt; Running in 9850a06d6686\nRemoving intermediate container 9850a06d6686\n ---&gt; e5ec33eac8a9\nSuccessfully built e5ec33eac8a9\nSuccessfully tagged kazi-core:latest\nException in thread \"main\" java.lang.NoClassDefFoundError: org/springframework/boot/SpringApplication\n        at com.test.Application.main(Application.java:10)\nCaused by: java.lang.ClassNotFoundException: org.springframework.boot.SpringApplication\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n        ... 1 more\n\n</code></pre>\n"},{"tags":["java","spring","jpa"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1695367036,"post_id":77155467,"comment_id":136017451,"body_markdown":"Maybe [this](https://stackoverflow.com/questions/29467886/implementing-crudrepository-in-spring-whats-the-best-design-i-should-follow) helps","body":"Maybe <a href=\"https://stackoverflow.com/questions/29467886/implementing-crudrepository-in-spring-whats-the-best-design-i-should-follow\">this</a> helps"}],"answers":[{"tags":[],"owner":{"account_id":8565752,"reputation":615,"user_id":6418277,"accept_rate":81,"display_name":"Gaetan L."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695373853,"creation_date":1695373853,"answer_id":77156263,"question_id":77155467,"body_markdown":"Okay after a bit of research, for @Transational to work, the @Service/@Repository in which it is declared (at class or method-level) needs to implement an interface (in my case it implements CrudRepository&lt;Message, Long&gt;) and all its methods need to be declared in that interface (you cannot declare new methods). Then you autowire this interface instead of the custom class, in my case, instead of:\r\n\r\n    @Autowired\r\n    private MessageRepository messageRepository;\r\n\r\nI&#39;m doing:\r\n\r\n    @Autowired\r\n    private CrudRepository&lt;Message, Long&gt; messageRepository;\r\n\r\nThis is because of the way Spring uses proxies (I didn&#39;t understand the details tbh).","title":"Spring Transactional + EnableTransactionManagement = BeanNotOfRequiredTypeException","body":"<p>Okay after a bit of research, for @Transational to work, the @Service/@Repository in which it is declared (at class or method-level) needs to implement an interface (in my case it implements CrudRepository&lt;Message, Long&gt;) and all its methods need to be declared in that interface (you cannot declare new methods). Then you autowire this interface instead of the custom class, in my case, instead of:</p>\n<pre><code>@Autowired\nprivate MessageRepository messageRepository;\n</code></pre>\n<p>I'm doing:</p>\n<pre><code>@Autowired\nprivate CrudRepository&lt;Message, Long&gt; messageRepository;\n</code></pre>\n<p>This is because of the way Spring uses proxies (I didn't understand the details tbh).</p>\n"}],"owner":{"account_id":8565752,"reputation":615,"user_id":6418277,"accept_rate":81,"display_name":"Gaetan L."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695373853,"creation_date":1695366273,"question_id":77155467,"body_markdown":"I&#39;m currently trying to learn Spring that&#39;s why I&#39;m not using Spring Boot at the moment.\r\n\r\nI&#39;m trying to use the @Transactional annotation on one of my @Repository methods. I added EnableTransactionManagement in my Main class, but I get a BeanNotOfRequiredTypeException error when I run my app. If I remove either @Transactional or @EnableTransactionManagement, the app runs fine (but the function doesn&#39;t work as there&#39;s no commit).\r\n\r\nHere is the error I get:\r\n\r\n    Caused by: org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named &#39;messageRepository&#39; is expected to be of type &#39;com.cypherf.repository.MessageRepository&#39; but was actually of type &#39;jdk.proxy2.$Proxy25&#39;\r\n\r\nCan someone explain to me how this works?\r\n\r\nMain class\r\n\r\n    package com.cypherf;\r\n    import com.cypherf.model.Message;\r\n    import com.cypherf.repository.MessageRepository;\r\n    import com.cypherf.service.MessageService;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.context.annotation.AnnotationConfigApplicationContext;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.transaction.annotation.EnableTransactionManagement;\r\n\r\n    @Configuration\r\n    @ComponentScan\r\n    @EnableTransactionManagement\r\n    public class TestSpringApplication {\r\n        @Autowired\r\n        private ApplicationContext context;\r\n\r\n        @Autowired\r\n        private MessageRepository messageRepository;\r\n\r\n        @Autowired\r\n        private MessageService messageService;\r\n\r\n        final static Logger logger = LoggerFactory.getLogger(TestSpringApplication.class);\r\n\r\n        public static void main(String[] args) {\r\n            ApplicationContext ctx = new AnnotationConfigApplicationContext(TestSpringApplication.class);\r\n            TestSpringApplication app = ctx.getBean(TestSpringApplication.class);\r\n            logger.info(&quot;Running app...&quot;);\r\n            app.run(args);\r\n            //TestSpringApplication app = context.getBean(TestSpringApplication.class);\r\n            //TestSpringApplication app = new TestSpringApplication();\r\n            //app.run(args);\r\n\r\n        }\r\n\r\n        public void run(String... args) {\r\n            messageRepository.mrSave(new Message(&quot;Message one&quot;));\r\n            messageRepository.mrSave(new Message(&quot;Message two&quot;));\r\n            messageService.printAllMessages();\r\n\r\n            messageRepository.mrSaveTransactional(new Message(&quot;Message two&quot;));\r\n            messageService.printAllMessages();\r\n\r\n    //        System.out.println(&quot;BEANS:&quot;);\r\n    //        List&lt;String&gt; beans = Arrays.asList(context.getBeanDefinitionNames());\r\n    //        beans.forEach(bean -&gt; System.out.println(bean));\r\n        }\r\n    }\r\n\r\nMessageRepository\r\n\r\n    package com.cypherf.repository;\r\n    import com.cypherf.model.Message;\r\n    import java.util.List;\r\n    import java.util.Optional;\r\n\r\n    import com.cypherf.service.MessageService;\r\n    import jakarta.persistence.EntityManager;\r\n    import jakarta.persistence.PersistenceException;\r\n    import jakarta.transaction.Transactional;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.data.repository.CrudRepository;\r\n    import org.springframework.stereotype.Repository;\r\n\r\n    @Repository\r\n    public class MessageRepository implements CrudRepository&lt;Message, Long&gt; {\r\n        @Autowired\r\n        PersistenceUtil pu;\r\n\r\n        final static Logger logger = LoggerFactory.getLogger(MessageRepository.class);\r\n\r\n        public void mrSave(Message message) {\r\n            EntityManager em = pu.getEntityManager();\r\n            try {\r\n                em.getTransaction().begin();\r\n                em.persist(message);\r\n                em.getTransaction().commit();\r\n                System.out.println(&quot;here&quot;);\r\n            }\r\n            catch (PersistenceException e) {\r\n                System.err.printf(&quot;%s already exists%n&quot;, message);\r\n                e.printStackTrace();\r\n            }\r\n            finally {\r\n                System.out.println();\r\n                em.close();\r\n            }\r\n        }\r\n\r\n        @Transactional\r\n        public void mrSaveTransactional(Message message) {\r\n            logger.info(&quot;MessageRepository.mrSaveTransactional()&quot;);\r\n            pu.getEntityManager().persist(message);\r\n        }\r\n\r\n        public List&lt;Message&gt; getAll() {\r\n            EntityManager em = pu.getEntityManager();\r\n            List&lt;Message&gt; messages = em.createQuery(&quot;from Message&quot;, Message.class).getResultList();\r\n            em.close();\r\n            return messages;\r\n        }\r\n\r\n        [...]\r\n    }\r\n\r\nhibernate.cfg.xml\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n\r\n&lt;hibernate-configuration&gt;\r\n    &lt;session-factory&gt;\r\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.community.dialect.H2LegacyDialect&lt;/property&gt;\r\n        &lt;property name=&quot;connection.driver_class&quot;&gt;org.h2.Driver&lt;/property&gt;\r\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:h2:./spring&lt;/property&gt;\r\n        &lt;property name=&quot;connection.username&quot;&gt;sa&lt;/property&gt;\r\n        &lt;property name=&quot;connection.password&quot;&gt;&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;create-drop&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\r\n        &lt;mapping class=&quot;com.cypherf.model.Message&quot;/&gt;\r\n    &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```","title":"Spring Transactional + EnableTransactionManagement = BeanNotOfRequiredTypeException","body":"<p>I'm currently trying to learn Spring that's why I'm not using Spring Boot at the moment.</p>\n<p>I'm trying to use the @Transactional annotation on one of my @Repository methods. I added EnableTransactionManagement in my Main class, but I get a BeanNotOfRequiredTypeException error when I run my app. If I remove either @Transactional or @EnableTransactionManagement, the app runs fine (but the function doesn't work as there's no commit).</p>\n<p>Here is the error I get:</p>\n<pre><code>Caused by: org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'messageRepository' is expected to be of type 'com.cypherf.repository.MessageRepository' but was actually of type 'jdk.proxy2.$Proxy25'\n</code></pre>\n<p>Can someone explain to me how this works?</p>\n<p>Main class</p>\n<pre><code>package com.cypherf;\nimport com.cypherf.model.Message;\nimport com.cypherf.repository.MessageRepository;\nimport com.cypherf.service.MessageService;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\n\n@Configuration\n@ComponentScan\n@EnableTransactionManagement\npublic class TestSpringApplication {\n    @Autowired\n    private ApplicationContext context;\n\n    @Autowired\n    private MessageRepository messageRepository;\n\n    @Autowired\n    private MessageService messageService;\n\n    final static Logger logger = LoggerFactory.getLogger(TestSpringApplication.class);\n\n    public static void main(String[] args) {\n        ApplicationContext ctx = new AnnotationConfigApplicationContext(TestSpringApplication.class);\n        TestSpringApplication app = ctx.getBean(TestSpringApplication.class);\n        logger.info(&quot;Running app...&quot;);\n        app.run(args);\n        //TestSpringApplication app = context.getBean(TestSpringApplication.class);\n        //TestSpringApplication app = new TestSpringApplication();\n        //app.run(args);\n\n    }\n\n    public void run(String... args) {\n        messageRepository.mrSave(new Message(&quot;Message one&quot;));\n        messageRepository.mrSave(new Message(&quot;Message two&quot;));\n        messageService.printAllMessages();\n\n        messageRepository.mrSaveTransactional(new Message(&quot;Message two&quot;));\n        messageService.printAllMessages();\n\n//        System.out.println(&quot;BEANS:&quot;);\n//        List&lt;String&gt; beans = Arrays.asList(context.getBeanDefinitionNames());\n//        beans.forEach(bean -&gt; System.out.println(bean));\n    }\n}\n</code></pre>\n<p>MessageRepository</p>\n<pre><code>package com.cypherf.repository;\nimport com.cypherf.model.Message;\nimport java.util.List;\nimport java.util.Optional;\n\nimport com.cypherf.service.MessageService;\nimport jakarta.persistence.EntityManager;\nimport jakarta.persistence.PersistenceException;\nimport jakarta.transaction.Transactional;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic class MessageRepository implements CrudRepository&lt;Message, Long&gt; {\n    @Autowired\n    PersistenceUtil pu;\n\n    final static Logger logger = LoggerFactory.getLogger(MessageRepository.class);\n\n    public void mrSave(Message message) {\n        EntityManager em = pu.getEntityManager();\n        try {\n            em.getTransaction().begin();\n            em.persist(message);\n            em.getTransaction().commit();\n            System.out.println(&quot;here&quot;);\n        }\n        catch (PersistenceException e) {\n            System.err.printf(&quot;%s already exists%n&quot;, message);\n            e.printStackTrace();\n        }\n        finally {\n            System.out.println();\n            em.close();\n        }\n    }\n\n    @Transactional\n    public void mrSaveTransactional(Message message) {\n        logger.info(&quot;MessageRepository.mrSaveTransactional()&quot;);\n        pu.getEntityManager().persist(message);\n    }\n\n    public List&lt;Message&gt; getAll() {\n        EntityManager em = pu.getEntityManager();\n        List&lt;Message&gt; messages = em.createQuery(&quot;from Message&quot;, Message.class).getResultList();\n        em.close();\n        return messages;\n    }\n\n    [...]\n}\n</code></pre>\n<p>hibernate.cfg.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.community.dialect.H2LegacyDialect&lt;/property&gt;\n        &lt;property name=&quot;connection.driver_class&quot;&gt;org.h2.Driver&lt;/property&gt;\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:h2:./spring&lt;/property&gt;\n        &lt;property name=&quot;connection.username&quot;&gt;sa&lt;/property&gt;\n        &lt;property name=&quot;connection.password&quot;&gt;&lt;/property&gt;\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;create-drop&lt;/property&gt;\n        &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\n        &lt;mapping class=&quot;com.cypherf.model.Message&quot;/&gt;\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n"},{"tags":["java","java.util.scanner","calculation"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695372618,"post_id":77156103,"comment_id":136018444,"body_markdown":"`num1.close();` will close `System.in`. After that, you cannot read from it any more, which causes that error.","body":"<code>num1.close();</code> will close <code>System.in</code>. After that, you cannot read from it any more, which causes that error."}],"answers":[{"comments":[{"owner":{"account_id":29371858,"reputation":3,"user_id":22504292,"display_name":"Aaron Thomas Cherian"},"score":0,"creation_date":1695383836,"post_id":77156118,"comment_id":136020736,"body_markdown":"Thank you so much. I&#39;m from a python background and am really new to java. i was not able to understand this part,  `static double readNumber(String prompt) {\n        System.out.print(prompt);\n        return scanner.nextDouble();\n    }` and this part `private static final Scanner scanner = new Scanner(System.in);`, and also where have you closed the Scanner?","body":"Thank you so much. I&#39;m from a python background and am really new to java. i was not able to understand this part,  <code>static double readNumber(String prompt) {         System.out.print(prompt);         return scanner.nextDouble();     }</code> and this part <code>private static final Scanner scanner = new Scanner(System.in);</code>, and also where have you closed the Scanner?"}],"tags":[],"owner":{"account_id":1868353,"reputation":9514,"user_id":1691311,"accept_rate":100,"display_name":"Randy"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695372699,"creation_date":1695372699,"answer_id":77156118,"question_id":77156103,"body_markdown":"The error you are experiencing is due to the way you are using the Scanner object and subsequently closing it. When you close the Scanner object that is attached to `System.in`, you are essentially closing the underlying input stream (`System.in`). Once you close that stream, you can&#39;t read from it again using another Scanner or any other method.\r\n\r\nTo fix this, you should use a single Scanner object for all your input, and avoid closing it until your program is completely done with user input.\r\n\r\nI created an example using an online Java compiler, test it here:\r\nhttp://tpcg.io/_WXXH4N\r\n\r\nRevised code with a working scanner:\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Java_Calculator {\r\n    private static final Scanner scanner = new Scanner(System.in); // Single scanner object for the entire program\r\n\r\n    public static void main(String[] args) {\r\n        mainMenu();\r\n    }\r\n\r\n    static void mainMenu() {\r\n        System.out.println(&quot;Welcome to Java Calculator!!&quot;);\r\n        System.out.println(&quot;By-theclassicalguy&quot;);\r\n        System.out.println(&quot;&lt;------------------------------------------------------&gt;&quot;);\r\n        System.out.println(&quot;1. Perform a Calculation&quot;);\r\n        System.out.println(&quot;2. Exit&quot;);\r\n        System.out.print(&quot;Enter your choice (1/2): &quot;);\r\n\r\n        int user_choice = scanner.nextInt();\r\n        if (user_choice == 1) {\r\n            calculation();\r\n        } else {\r\n            System.out.println(&quot;Thank you for using this program&quot;);\r\n        }\r\n    }\r\n\r\n    static void calculation() {\r\n        System.out.println(&quot;1. Add&quot;);\r\n        System.out.println(&quot;2. Subtract&quot;);\r\n        System.out.println(&quot;3. Multiply&quot;);\r\n        System.out.println(&quot;4. Divide&quot;);\r\n        System.out.print(&quot;Enter your choice (1/2/3/4): &quot;);\r\n\r\n        int choice = scanner.nextInt();\r\n        switch (choice) {\r\n            case 1:\r\n                add();\r\n                break;\r\n            case 2:\r\n                sub();\r\n                break;\r\n            case 3:\r\n                mult();\r\n                break;\r\n            case 4:\r\n                div();\r\n                break;\r\n            default:\r\n                System.out.println(&quot;Invalid choice&quot;);\r\n        }\r\n    }\r\n\r\n    static double readNumber(String prompt) {\r\n        System.out.print(prompt);\r\n        return scanner.nextDouble();\r\n    }\r\n\r\n    static void add() {\r\n        double a = readNumber(&quot;Enter a number: &quot;);\r\n        double b = readNumber(&quot;Enter a second number: &quot;);\r\n        System.out.println(&quot;The sum is &quot; + (a + b));\r\n    }\r\n\r\n    static void sub() {\r\n        double a = readNumber(&quot;Enter a number: &quot;);\r\n        double b = readNumber(&quot;Enter a second number: &quot;);\r\n        System.out.println(&quot;The difference is &quot; + (a - b));\r\n    }\r\n\r\n    static void mult() {\r\n        double a = readNumber(&quot;Enter a number: &quot;);\r\n        double b = readNumber(&quot;Enter a second number: &quot;);\r\n        System.out.println(&quot;The product is &quot; + (a * b));\r\n    }\r\n\r\n    static void div() {\r\n        double a = readNumber(&quot;Enter numerator: &quot;);\r\n        double b;\r\n        do {\r\n            b = readNumber(&quot;Enter a denominator: &quot;);\r\n            if (b == 0) {\r\n                System.out.println(&quot;Denominator cannot be zero. Please enter again.&quot;);\r\n            }\r\n        } while (b == 0);\r\n        System.out.println(&quot;The result is &quot; + (a / b));\r\n    }\r\n}\r\n```","title":"i keep getting into this error while running this java code","body":"<p>The error you are experiencing is due to the way you are using the Scanner object and subsequently closing it. When you close the Scanner object that is attached to <code>System.in</code>, you are essentially closing the underlying input stream (<code>System.in</code>). Once you close that stream, you can't read from it again using another Scanner or any other method.</p>\n<p>To fix this, you should use a single Scanner object for all your input, and avoid closing it until your program is completely done with user input.</p>\n<p>I created an example using an online Java compiler, test it here:\n<a href=\"http://tpcg.io/_WXXH4N\" rel=\"nofollow noreferrer\">http://tpcg.io/_WXXH4N</a></p>\n<p>Revised code with a working scanner:</p>\n<pre><code>import java.util.Scanner;\n\npublic class Java_Calculator {\n    private static final Scanner scanner = new Scanner(System.in); // Single scanner object for the entire program\n\n    public static void main(String[] args) {\n        mainMenu();\n    }\n\n    static void mainMenu() {\n        System.out.println(&quot;Welcome to Java Calculator!!&quot;);\n        System.out.println(&quot;By-theclassicalguy&quot;);\n        System.out.println(&quot;&lt;------------------------------------------------------&gt;&quot;);\n        System.out.println(&quot;1. Perform a Calculation&quot;);\n        System.out.println(&quot;2. Exit&quot;);\n        System.out.print(&quot;Enter your choice (1/2): &quot;);\n\n        int user_choice = scanner.nextInt();\n        if (user_choice == 1) {\n            calculation();\n        } else {\n            System.out.println(&quot;Thank you for using this program&quot;);\n        }\n    }\n\n    static void calculation() {\n        System.out.println(&quot;1. Add&quot;);\n        System.out.println(&quot;2. Subtract&quot;);\n        System.out.println(&quot;3. Multiply&quot;);\n        System.out.println(&quot;4. Divide&quot;);\n        System.out.print(&quot;Enter your choice (1/2/3/4): &quot;);\n\n        int choice = scanner.nextInt();\n        switch (choice) {\n            case 1:\n                add();\n                break;\n            case 2:\n                sub();\n                break;\n            case 3:\n                mult();\n                break;\n            case 4:\n                div();\n                break;\n            default:\n                System.out.println(&quot;Invalid choice&quot;);\n        }\n    }\n\n    static double readNumber(String prompt) {\n        System.out.print(prompt);\n        return scanner.nextDouble();\n    }\n\n    static void add() {\n        double a = readNumber(&quot;Enter a number: &quot;);\n        double b = readNumber(&quot;Enter a second number: &quot;);\n        System.out.println(&quot;The sum is &quot; + (a + b));\n    }\n\n    static void sub() {\n        double a = readNumber(&quot;Enter a number: &quot;);\n        double b = readNumber(&quot;Enter a second number: &quot;);\n        System.out.println(&quot;The difference is &quot; + (a - b));\n    }\n\n    static void mult() {\n        double a = readNumber(&quot;Enter a number: &quot;);\n        double b = readNumber(&quot;Enter a second number: &quot;);\n        System.out.println(&quot;The product is &quot; + (a * b));\n    }\n\n    static void div() {\n        double a = readNumber(&quot;Enter numerator: &quot;);\n        double b;\n        do {\n            b = readNumber(&quot;Enter a denominator: &quot;);\n            if (b == 0) {\n                System.out.println(&quot;Denominator cannot be zero. Please enter again.&quot;);\n            }\n        } while (b == 0);\n        System.out.println(&quot;The result is &quot; + (a / b));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29371858,"reputation":3,"user_id":22504292,"display_name":"Aaron Thomas Cherian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695384286,"accepted_answer_id":77156118,"answer_count":1,"score":0,"last_activity_date":1695373289,"creation_date":1695372549,"question_id":77156103,"body_markdown":"Im trying to make a calculator program which can do addition, subtraction, multiplication and division, but i keep getting this error after the main method is executed\r\n\r\n```\r\n\r\nException in thread &quot;main&quot; java.util.NoSuchElementException\r\n        at java.base/java.util.Scanner.throwFor(Scanner.java:937)\r\n        at java.base/java.util.Scanner.next(Scanner.java:1594)\r\n        at java.base/java.util.Scanner.nextInt(Scanner.java:2258)\r\n        at java.base/java.util.Scanner.nextInt(Scanner.java:2212)\r\n        at Java_Calculator.calculation(Java_Calculator.java:36)\r\n        at Java_Calculator.main(Java_Calculator.java:19)\r\n        at Java_Calculator.main(Java_Calculator.java:5)\r\n\r\n```\r\n\r\nHere is my code for reference. \r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Java_Calculator{\r\n    public static void main(String[] args) {\r\n        main();\r\n        \r\n    }\r\n    static void main(){\r\n        System.out.println(&quot;Welcome to Java Calculator!!&quot;);\r\n        System.out.println(&quot;By-theclassicalguy&quot;);\r\n        System.out.println(&quot;&lt;------------------------------------------------------&gt;&quot;);\r\n        System.out.println(&quot;1. Perform a Calculation&quot;);\r\n        System.out.println(&quot;2. Exit&quot;);\r\n        System.out.println(&quot;Enter your choice (1/2):&quot;);\r\n        Scanner input= new Scanner(System.in);\r\n        int user_choice=input.nextInt();\r\n        input.close();\r\n        if (user_choice==1){\r\n            calculation();\r\n\r\n        }else{\r\n            System.out.println(&quot;Thank you for using this program&quot;);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    static void calculation(){\r\n        System.out.println(&quot;1. Add&quot;);\r\n        System.out.println(&quot;2. Subtract&quot;);\r\n        System.out.println(&quot;3. Multiply&quot;);\r\n        System.out.println(&quot;4. Divide&quot;);\r\n        Scanner calc_choice=new Scanner(System.in);\r\n        System.out.println(&quot;Enter your choice (1/2/3/4):&quot;);\r\n        \r\n        int choice=calc_choice.nextInt();\r\n        calc_choice.close();\r\n        if (choice==1){\r\n            add();\r\n        } else if(choice==2){\r\n            sub();\r\n\r\n        }else if(choice==3){\r\n            mult();\r\n            \r\n        }else if(choice==4){\r\n            div();\r\n            \r\n        }\r\n\r\n\r\n    }\r\n\r\n    static void add(){\r\n        Scanner num1= new Scanner(System.in);\r\n        System.out.println(&quot;Enter a number:&quot;);\r\n        double a=num1.nextDouble();\r\n        num1.close();\r\n        Scanner num2= new Scanner(System.in);\r\n        System.out.println(&quot;Enter a second number&quot;);\r\n        double b=num2.nextDouble();\r\n        num2.close();\r\n        double add=a+b;\r\n        System.out.println(&quot;The sum is &quot;+add);\r\n        \r\n    }\r\n\r\n    static void sub(){\r\n        Scanner num1= new Scanner(System.in);\r\n        System.out.println(&quot;Enter a number:&quot;);\r\n        double a=num1.nextDouble();\r\n        num1.close();\r\n        Scanner num2= new Scanner(System.in);\r\n        System.out.println(&quot;Enter a seconf number:&quot;);\r\n        double b=num2.nextDouble();\r\n        num2.close();\r\n        double sub=a-b;\r\n        System.out.println(&quot;The difference is &quot;+sub);\r\n    }\r\n    static void mult(){\r\n        Scanner num1= new Scanner(System.in);\r\n        System.out.println(&quot;Enter a number:&quot;);\r\n        double a=num1.nextDouble();\r\n        num1.close();\r\n        Scanner num2= new Scanner(System.in);\r\n        System.out.println(&quot;Enter a second number:&quot;);\r\n        double b=num2.nextDouble();\r\n        num2.close();\r\n        double mult=a*b;\r\n        System.out.println(&quot;The sum is &quot;+mult);\r\n    }\r\n    static void div(){\r\n        Scanner num1= new Scanner(System.in);\r\n        System.out.println(&quot;Enter numerator:&quot;);\r\n        double a=num1.nextDouble();\r\n        num1.close();\r\n        Scanner num2= new Scanner(System.in);\r\n        System.out.println(&quot;Enter a denominator&quot;);\r\n        double b=num2.nextDouble();\r\n        num2.close();\r\n        double div=a/b;\r\n        System.out.println(&quot;The sum is &quot;+div);\r\n    }\r\n\r\n    \r\n\r\n\r\n\r\n}\r\n```\r\n\r\n\r\nBasically, what i wanted to do was to create multiple methods each with its particular function like addition, subtraction etc. and these functions will be linked to another calculations method which is again linked to another method called main. in each method ive added a scanner class to collect the numbers from the user. but i keep getting the error mention above,when i run the program, the main method runs properly then when i type 1 to proceed to the calculations method, which also prints what is required but after that  instead of the scanner class working and asking me to answer, it prints the error and exits from the program.","title":"i keep getting into this error while running this java code","body":"<p>Im trying to make a calculator program which can do addition, subtraction, multiplication and division, but i keep getting this error after the main method is executed</p>\n<pre><code>\nException in thread &quot;main&quot; java.util.NoSuchElementException\n        at java.base/java.util.Scanner.throwFor(Scanner.java:937)\n        at java.base/java.util.Scanner.next(Scanner.java:1594)\n        at java.base/java.util.Scanner.nextInt(Scanner.java:2258)\n        at java.base/java.util.Scanner.nextInt(Scanner.java:2212)\n        at Java_Calculator.calculation(Java_Calculator.java:36)\n        at Java_Calculator.main(Java_Calculator.java:19)\n        at Java_Calculator.main(Java_Calculator.java:5)\n\n</code></pre>\n<p>Here is my code for reference.</p>\n<pre><code>import java.util.Scanner;\n\npublic class Java_Calculator{\n    public static void main(String[] args) {\n        main();\n        \n    }\n    static void main(){\n        System.out.println(&quot;Welcome to Java Calculator!!&quot;);\n        System.out.println(&quot;By-theclassicalguy&quot;);\n        System.out.println(&quot;&lt;------------------------------------------------------&gt;&quot;);\n        System.out.println(&quot;1. Perform a Calculation&quot;);\n        System.out.println(&quot;2. Exit&quot;);\n        System.out.println(&quot;Enter your choice (1/2):&quot;);\n        Scanner input= new Scanner(System.in);\n        int user_choice=input.nextInt();\n        input.close();\n        if (user_choice==1){\n            calculation();\n\n        }else{\n            System.out.println(&quot;Thank you for using this program&quot;);\n\n        }\n\n    }\n\n    static void calculation(){\n        System.out.println(&quot;1. Add&quot;);\n        System.out.println(&quot;2. Subtract&quot;);\n        System.out.println(&quot;3. Multiply&quot;);\n        System.out.println(&quot;4. Divide&quot;);\n        Scanner calc_choice=new Scanner(System.in);\n        System.out.println(&quot;Enter your choice (1/2/3/4):&quot;);\n        \n        int choice=calc_choice.nextInt();\n        calc_choice.close();\n        if (choice==1){\n            add();\n        } else if(choice==2){\n            sub();\n\n        }else if(choice==3){\n            mult();\n            \n        }else if(choice==4){\n            div();\n            \n        }\n\n\n    }\n\n    static void add(){\n        Scanner num1= new Scanner(System.in);\n        System.out.println(&quot;Enter a number:&quot;);\n        double a=num1.nextDouble();\n        num1.close();\n        Scanner num2= new Scanner(System.in);\n        System.out.println(&quot;Enter a second number&quot;);\n        double b=num2.nextDouble();\n        num2.close();\n        double add=a+b;\n        System.out.println(&quot;The sum is &quot;+add);\n        \n    }\n\n    static void sub(){\n        Scanner num1= new Scanner(System.in);\n        System.out.println(&quot;Enter a number:&quot;);\n        double a=num1.nextDouble();\n        num1.close();\n        Scanner num2= new Scanner(System.in);\n        System.out.println(&quot;Enter a seconf number:&quot;);\n        double b=num2.nextDouble();\n        num2.close();\n        double sub=a-b;\n        System.out.println(&quot;The difference is &quot;+sub);\n    }\n    static void mult(){\n        Scanner num1= new Scanner(System.in);\n        System.out.println(&quot;Enter a number:&quot;);\n        double a=num1.nextDouble();\n        num1.close();\n        Scanner num2= new Scanner(System.in);\n        System.out.println(&quot;Enter a second number:&quot;);\n        double b=num2.nextDouble();\n        num2.close();\n        double mult=a*b;\n        System.out.println(&quot;The sum is &quot;+mult);\n    }\n    static void div(){\n        Scanner num1= new Scanner(System.in);\n        System.out.println(&quot;Enter numerator:&quot;);\n        double a=num1.nextDouble();\n        num1.close();\n        Scanner num2= new Scanner(System.in);\n        System.out.println(&quot;Enter a denominator&quot;);\n        double b=num2.nextDouble();\n        num2.close();\n        double div=a/b;\n        System.out.println(&quot;The sum is &quot;+div);\n    }\n\n    \n\n\n\n}\n</code></pre>\n<p>Basically, what i wanted to do was to create multiple methods each with its particular function like addition, subtraction etc. and these functions will be linked to another calculations method which is again linked to another method called main. in each method ive added a scanner class to collect the numbers from the user. but i keep getting the error mention above,when i run the program, the main method runs properly then when i type 1 to proceed to the calculations method, which also prints what is required but after that  instead of the scanner class working and asking me to answer, it prints the error and exits from the program.</p>\n"},{"tags":["java","android","android-studio","gradle"],"answers":[{"tags":[],"owner":{"account_id":24273987,"reputation":21,"user_id":18221553,"display_name":"Ash Anand"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1645003122,"creation_date":1645003122,"answer_id":71139070,"question_id":70340427,"body_markdown":"Generally, when you install android studio it will install the latest SDK and latest build tool version which is not compatible with the existing projects.\r\n\r\nAccording to the [build.gradle][1] present in [00-Evan/shattered-pixel-dungeon][2]\r\n\r\nYou should try installing the SDK version 30. And the SDK build tool version: 30.0.X. \r\nIt should work.\r\n\r\nFor me, it is working with SDK version 30 and build tool version 30.0.3.\r\n\r\nAnd just make sure you have java version 8 as mentioned in build.gradle.\r\n\r\n\r\n  [1]: https://github.com/00-Evan/shattered-pixel-dungeon/blob/master/build.gradle\r\n  [2]: https://github.com/00-Evan/shattered-pixel-dungeon","title":"&quot;Unable to find method &#39;&#39;void org.apache.commons.compress.archivers.zip.ZipFile.&lt;init&gt;(java.nio.channels.SeekableByteChannel)&#39;&#39;&quot;","body":"<p>Generally, when you install android studio it will install the latest SDK and latest build tool version which is not compatible with the existing projects.</p>\n<p>According to the <a href=\"https://github.com/00-Evan/shattered-pixel-dungeon/blob/master/build.gradle\" rel=\"nofollow noreferrer\">build.gradle</a> present in <a href=\"https://github.com/00-Evan/shattered-pixel-dungeon\" rel=\"nofollow noreferrer\">00-Evan/shattered-pixel-dungeon</a></p>\n<p>You should try installing the SDK version 30. And the SDK build tool version: 30.0.X.\nIt should work.</p>\n<p>For me, it is working with SDK version 30 and build tool version 30.0.3.</p>\n<p>And just make sure you have java version 8 as mentioned in build.gradle.</p>\n"},{"tags":[],"owner":{"account_id":5035124,"reputation":113,"user_id":4044175,"display_name":"Gonza"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1647959327,"creation_date":1647959327,"answer_id":71573797,"question_id":70340427,"body_markdown":"Try to install `Android 11.0 (R)` or `Android 12.00 (S)` on the SDK Platform tab on the Android SDK. That fixed the issue for me ","title":"&quot;Unable to find method &#39;&#39;void org.apache.commons.compress.archivers.zip.ZipFile.&lt;init&gt;(java.nio.channels.SeekableByteChannel)&#39;&#39;&quot;","body":"<p>Try to install <code>Android 11.0 (R)</code> or <code>Android 12.00 (S)</code> on the SDK Platform tab on the Android SDK. That fixed the issue for me</p>\n"},{"tags":[],"owner":{"account_id":24840101,"reputation":51,"user_id":18718222,"display_name":"adamdoes"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1649197809,"creation_date":1649197809,"answer_id":71759095,"question_id":70340427,"body_markdown":"For anyone looking for more information, this specific issue has been covered [in Google&#39;s issue tracker](https://issuetracker.google.com/issues/213757977).  In short, the problem stems from mismatched dependency resolution of Apache&#39;s `commons-compress` between `robovm-gradle-plugin` and Gradle itself. As for Shattered Pixel Dungeon, the fix is present [in this commit](https://github.com/00-Evan/shattered-pixel-dungeon/commit/1b28cd19b5f59a5a8b7b9acf4c3565b19033f378).","title":"&quot;Unable to find method &#39;&#39;void org.apache.commons.compress.archivers.zip.ZipFile.&lt;init&gt;(java.nio.channels.SeekableByteChannel)&#39;&#39;&quot;","body":"<p>For anyone looking for more information, this specific issue has been covered <a href=\"https://issuetracker.google.com/issues/213757977\" rel=\"noreferrer\">in Google's issue tracker</a>.  In short, the problem stems from mismatched dependency resolution of Apache's <code>commons-compress</code> between <code>robovm-gradle-plugin</code> and Gradle itself. As for Shattered Pixel Dungeon, the fix is present <a href=\"https://github.com/00-Evan/shattered-pixel-dungeon/commit/1b28cd19b5f59a5a8b7b9acf4c3565b19033f378\" rel=\"noreferrer\">in this commit</a>.</p>\n"},{"tags":[],"owner":{"account_id":1897481,"reputation":1530,"user_id":1714102,"display_name":"PrzemekTom"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1664878181,"creation_date":1650881681,"answer_id":71997907,"question_id":70340427,"body_markdown":"After fresh Android Studio installation I&#39;ve downloaded proposed `Android SDK` and `build tools`, but my project was configured for the older ones. Then issue happened. I fixed it by downloading appropriate `Android SDK` and `build tools`.\r\n\r\nFor example, if your project has `compileSdkVersion 31` value, then download `Android SDK 31` and `build tools 31.0.0`. In `Tools/SDK Manager/Show Package Details` you can find correct versions for your case.","title":"&quot;Unable to find method &#39;&#39;void org.apache.commons.compress.archivers.zip.ZipFile.&lt;init&gt;(java.nio.channels.SeekableByteChannel)&#39;&#39;&quot;","body":"<p>After fresh Android Studio installation I've downloaded proposed <code>Android SDK</code> and <code>build tools</code>, but my project was configured for the older ones. Then issue happened. I fixed it by downloading appropriate <code>Android SDK</code> and <code>build tools</code>.</p>\n<p>For example, if your project has <code>compileSdkVersion 31</code> value, then download <code>Android SDK 31</code> and <code>build tools 31.0.0</code>. In <code>Tools/SDK Manager/Show Package Details</code> you can find correct versions for your case.</p>\n"},{"comments":[{"owner":{"account_id":9845781,"reputation":374,"user_id":7293353,"display_name":"Jose Lopez"},"score":0,"creation_date":1685828203,"post_id":73421545,"comment_id":134716372,"body_markdown":"what if i need the ios module?","body":"what if i need the ios module?"}],"tags":[],"owner":{"account_id":7883507,"reputation":306,"user_id":10869204,"display_name":"Konstantin"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1660937968,"creation_date":1660937968,"answer_id":73421545,"question_id":70340427,"body_markdown":"In my case it was error with robovm, I was trying build libGDX for iOS on Windows PC, when I remove iOS project, error gone too.","title":"&quot;Unable to find method &#39;&#39;void org.apache.commons.compress.archivers.zip.ZipFile.&lt;init&gt;(java.nio.channels.SeekableByteChannel)&#39;&#39;&quot;","body":"<p>In my case it was error with robovm, I was trying build libGDX for iOS on Windows PC, when I remove iOS project, error gone too.</p>\n"},{"tags":[],"owner":{"account_id":1756724,"reputation":1546,"user_id":1604579,"accept_rate":80,"display_name":"myyk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694505991,"creation_date":1694505991,"answer_id":77087143,"question_id":70340427,"body_markdown":"I was able able to remove `buildToolsVersion` after migrating to `Hedgehog` (currently the preview build) and migrate AGP to the `com.android.tools.build:gradle:8.2.0-beta03` version. I also upgraded all my API to `34`. This might be too bleeding edge for many, but it does seem to work.","title":"&quot;Unable to find method &#39;&#39;void org.apache.commons.compress.archivers.zip.ZipFile.&lt;init&gt;(java.nio.channels.SeekableByteChannel)&#39;&#39;&quot;","body":"<p>I was able able to remove <code>buildToolsVersion</code> after migrating to <code>Hedgehog</code> (currently the preview build) and migrate AGP to the <code>com.android.tools.build:gradle:8.2.0-beta03</code> version. I also upgraded all my API to <code>34</code>. This might be too bleeding edge for many, but it does seem to work.</p>\n"},{"tags":[],"owner":{"account_id":13828030,"reputation":169,"user_id":9981772,"display_name":"ilya_kas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695372346,"creation_date":1695372346,"answer_id":77156090,"question_id":70340427,"body_markdown":"Even if you build IOS version and face this problem during gradle sync, you might need to downgrade gradle build tools version. For me it was \r\n\r\n    buildToolsVersion &quot;33.0.1&quot;\r\n    compileSdkVersion 33\r\n\r\nfrom \r\n\r\n    buildToolsVersion &quot;34.0.0&quot;","title":"&quot;Unable to find method &#39;&#39;void org.apache.commons.compress.archivers.zip.ZipFile.&lt;init&gt;(java.nio.channels.SeekableByteChannel)&#39;&#39;&quot;","body":"<p>Even if you build IOS version and face this problem during gradle sync, you might need to downgrade gradle build tools version. For me it was</p>\n<pre><code>buildToolsVersion &quot;33.0.1&quot;\ncompileSdkVersion 33\n</code></pre>\n<p>from</p>\n<pre><code>buildToolsVersion &quot;34.0.0&quot;\n</code></pre>\n"}],"owner":{"account_id":23637629,"reputation":121,"user_id":17668418,"display_name":"b4cku"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5614,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":7,"score":12,"last_activity_date":1695372346,"creation_date":1639426645,"question_id":70340427,"body_markdown":"**The problem:** I&#39;m currently using **Android Studio** and **Gradle** to compile code from a github repository ([00-Evan/shattered-pixel-dungeon](https://github.com/00-Evan/shattered-pixel-dungeon/)) and while I can run some tasks (tried &#39;desktop:release&#39;, &#39;desktop:debug&#39;), gradle refuses to sync properly and every time I try to do it, an error log pops up:\r\n```\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\n&#39;void org.apache.commons.compress.archivers.zip.ZipFile.&lt;init&gt;(java.nio.channels.SeekableByteChannel)&#39;\r\n\r\n* Try:\r\nRun with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Exception is:\r\njava.lang.NoSuchMethodError: &#39;void org.apache.commons.compress.archivers.zip.ZipFile.&lt;init&gt;(java.nio.channels.SeekableByteChannel)&#39;\r\n\tat com.android.repository.util.InstallerUtil.unzip(InstallerUtil.java:99)\r\n```\r\n**Important:** I&#39;ve had this issue before (while compiling previous version of this code) and back then downloading a specific version of SDK build tools (30.0.0 and 26.0.0 if I recall correctly) helped, however this doesn&#39;t help anymore.  \r\nOther people using this code don&#39;t report the same issue and I seem to be the only one.\r\n\r\nAlso for some reason android tasks also don&#39;t seem to work, as if the android studio didn&#39;t recognize them:\r\n```\r\nTask &#39;release&#39; not found in project &#39;:android&#39;.\r\n\r\n * Try:\r\nRun gradle tasks to get a list of available tasks. Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n```\r\n**What I&#39;ve tried:** \r\n* Clearing cache and restarting Android Studio/my PC\r\n* Enabling/disabling different build tools versions (see the &quot;Important&quot; section). At the moment I have tried enabling all 30.0.X and 26.0.X versions and disabling any newer versions that were enabled\r\n* Browsed similar Stackoverflow threads, however they either didn&#39;t seem to apply to my situation or didn&#39;t include enough information. [Link](https://stackoverflow.com/questions/52381075/apache-poi-java-lang-noclassdeffounderror-org-apache-commons-compress-archivers), [link](https://stackoverflow.com/questions/68982459/i-try-to-build-a-project-but-it-continuely-fails-the-build-with-two-errors) and [link](https://stackoverflow.com/questions/48343759/java-lang-nosuchmethoderror-org-apache-commons-compress-utils-ioutils-readfully).\r\n* Uninstalling Android Studio and re-downloading it from scratch.\r\n\r\n**Additional info:**\r\n* Android Studio version: Android Studio Arctic Fox | 2020.3.1 Patch 4 (Currently latest)\r\n* Gradle version: 7.2 (I tried using 7.1.1, but that didn&#39;t solve the issue)","title":"&quot;Unable to find method &#39;&#39;void org.apache.commons.compress.archivers.zip.ZipFile.&lt;init&gt;(java.nio.channels.SeekableByteChannel)&#39;&#39;&quot;","body":"<p><strong>The problem:</strong> I'm currently using <strong>Android Studio</strong> and <strong>Gradle</strong> to compile code from a github repository (<a href=\"https://github.com/00-Evan/shattered-pixel-dungeon/\" rel=\"noreferrer\">00-Evan/shattered-pixel-dungeon</a>) and while I can run some tasks (tried 'desktop:release', 'desktop:debug'), gradle refuses to sync properly and every time I try to do it, an error log pops up:</p>\n<pre><code>FAILURE: Build failed with an exception.\n\n* What went wrong:\n'void org.apache.commons.compress.archivers.zip.ZipFile.&lt;init&gt;(java.nio.channels.SeekableByteChannel)'\n\n* Try:\nRun with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Exception is:\njava.lang.NoSuchMethodError: 'void org.apache.commons.compress.archivers.zip.ZipFile.&lt;init&gt;(java.nio.channels.SeekableByteChannel)'\n    at com.android.repository.util.InstallerUtil.unzip(InstallerUtil.java:99)\n</code></pre>\n<p><strong>Important:</strong> I've had this issue before (while compiling previous version of this code) and back then downloading a specific version of SDK build tools (30.0.0 and 26.0.0 if I recall correctly) helped, however this doesn't help anymore.<br />\nOther people using this code don't report the same issue and I seem to be the only one.</p>\n<p>Also for some reason android tasks also don't seem to work, as if the android studio didn't recognize them:</p>\n<pre><code>Task 'release' not found in project ':android'.\n\n * Try:\nRun gradle tasks to get a list of available tasks. Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n</code></pre>\n<p><strong>What I've tried:</strong></p>\n<ul>\n<li>Clearing cache and restarting Android Studio/my PC</li>\n<li>Enabling/disabling different build tools versions (see the &quot;Important&quot; section). At the moment I have tried enabling all 30.0.X and 26.0.X versions and disabling any newer versions that were enabled</li>\n<li>Browsed similar Stackoverflow threads, however they either didn't seem to apply to my situation or didn't include enough information. <a href=\"https://stackoverflow.com/questions/52381075/apache-poi-java-lang-noclassdeffounderror-org-apache-commons-compress-archivers\">Link</a>, <a href=\"https://stackoverflow.com/questions/68982459/i-try-to-build-a-project-but-it-continuely-fails-the-build-with-two-errors\">link</a> and <a href=\"https://stackoverflow.com/questions/48343759/java-lang-nosuchmethoderror-org-apache-commons-compress-utils-ioutils-readfully\">link</a>.</li>\n<li>Uninstalling Android Studio and re-downloading it from scratch.</li>\n</ul>\n<p><strong>Additional info:</strong></p>\n<ul>\n<li>Android Studio version: Android Studio Arctic Fox | 2020.3.1 Patch 4 (Currently latest)</li>\n<li>Gradle version: 7.2 (I tried using 7.1.1, but that didn't solve the issue)</li>\n</ul>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"score":14,"creation_date":1281214727,"post_id":3431529,"comment_id":3574383,"body_markdown":"This gets asked about once a month","body":"This gets asked about once a month"},{"owner":{"account_id":1128247,"reputation":32675,"user_id":1114966,"accept_rate":100,"display_name":"squiguy"},"score":0,"creation_date":1357176994,"post_id":3431529,"comment_id":19565912,"body_markdown":"In PHP, you are using an associative array which is not synonymous Java&#39;s array.","body":"In PHP, you are using an associative array which is not synonymous Java&#39;s array."},{"owner":{"account_id":12683000,"reputation":3138,"user_id":9215955,"display_name":"mstgnz"},"score":0,"creation_date":1633032196,"post_id":3431529,"comment_id":122661035,"body_markdown":"Arrays.asList(question).indexOf(song)","body":"Arrays.asList(question).indexOf(song)"}],"answers":[{"tags":[],"owner":{"account_id":137942,"reputation":14900,"user_id":342518,"accept_rate":89,"display_name":"TheLQ"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1281205466,"creation_date":1281205466,"answer_id":3431541,"question_id":3431529,"body_markdown":"In Java, you can&#39;t, as foreach was meant to hide the iterator. You must do the normal For loop in order to get the current iteration.","title":"How do I get the current index/key in a &quot;for each&quot; loop","body":"<p>In Java, you can't, as foreach was meant to hide the iterator. You must do the normal For loop in order to get the current iteration.</p>\n"},{"comments":[{"owner":{"account_id":19115,"reputation":29081,"user_id":44523,"accept_rate":95,"display_name":"Esko"},"score":7,"creation_date":1281205592,"post_id":3431543,"comment_id":3573765,"body_markdown":"This is indeed the correct answer semantically, for each loop can iterate through streaming data from a remote database which is being updated while you&#39;re iterating through its contents (if the used iterator actually does that) in which case there&#39;s no way of knowing the current index. Index is just a *view* to the data, not a property of data.","body":"This is indeed the correct answer semantically, for each loop can iterate through streaming data from a remote database which is being updated while you&#39;re iterating through its contents (if the used iterator actually does that) in which case there&#39;s no way of knowing the current index. Index is just a <i>view</i> to the data, not a property of data."},{"owner":{"account_id":246417,"reputation":17570,"user_id":520567,"accept_rate":71,"display_name":"akostadinov"},"score":3,"creation_date":1364814665,"post_id":3431543,"comment_id":22368538,"body_markdown":"Although it might be no index, it would be very convenient to have some kind of iteration counter that you can access inside the loop. I guess such thing can hardly end in core java, more chances for some of the scripting languages.","body":"Although it might be no index, it would be very convenient to have some kind of iteration counter that you can access inside the loop. I guess such thing can hardly end in core java, more chances for some of the scripting languages."},{"owner":{"account_id":19770,"reputation":453,"user_id":46609,"accept_rate":100,"display_name":"Andreas Tasoulas"},"score":0,"creation_date":1418906259,"post_id":3431543,"comment_id":43519835,"body_markdown":"As I was afraid, maybe in Java 12 they will add it as a feature to be proud of, as they recently did with lambdas and reading files with one-liners? (DISCLAIMER: I am (mostly) a Java programmer myself)","body":"As I was afraid, maybe in Java 12 they will add it as a feature to be proud of, as they recently did with lambdas and reading files with one-liners? (DISCLAIMER: I am (mostly) a Java programmer myself)"},{"owner":{"account_id":421090,"reputation":174,"user_id":799134,"display_name":"Bj&#248;rn V&#229;rdal"},"score":1,"creation_date":1501633540,"post_id":3431543,"comment_id":77860327,"body_markdown":"@atas 2.5 years closer to Java 12... The index is definitely available, i.e. it&#39;s on the stack, if you&#39;re dealing with an array. It would be really cool if there was a keyword that would compile to a simple &quot;ILOAD 2&quot;.\nIf it&#39;s a List, it compiles to an iterator, which won&#39;t be able to give you an index.","body":"@atas 2.5 years closer to Java 12... The index is definitely available, i.e. it&#39;s on the stack, if you&#39;re dealing with an array. It would be really cool if there was a keyword that would compile to a simple &quot;ILOAD 2&quot;. If it&#39;s a List, it compiles to an iterator, which won&#39;t be able to give you an index."}],"tags":[],"owner":{"account_id":118337,"reputation":170832,"user_id":309308,"accept_rate":74,"display_name":"Michael Mrozek"},"comment_count":4,"down_vote_count":1,"up_vote_count":454,"is_accepted":true,"score":453,"last_activity_date":1281205491,"creation_date":1281205491,"answer_id":3431543,"question_id":3431529,"body_markdown":"You can&#39;t, you either need to keep the index separately:\r\n\r\n    int index = 0;\r\n    for(Element song : question) {\r\n        System.out.println(&quot;Current index is: &quot; + (index++));\r\n    }\r\n\r\nor use a normal for loop:\r\n\r\n    for(int i = 0; i &lt; question.length; i++) {\r\n        System.out.println(&quot;Current index is: &quot; + i);\r\n    }\r\n\r\nThe reason is you can use the condensed for syntax to loop over any [Iterable](http://download-llnw.oracle.com/javase/6/docs/api/java/lang/Iterable.html), and it&#39;s not guaranteed that the values actually have an &quot;index&quot;\r\n","title":"How do I get the current index/key in a &quot;for each&quot; loop","body":"<p>You can't, you either need to keep the index separately:</p>\n\n<pre><code>int index = 0;\nfor(Element song : question) {\n    System.out.println(\"Current index is: \" + (index++));\n}\n</code></pre>\n\n<p>or use a normal for loop:</p>\n\n<pre><code>for(int i = 0; i &lt; question.length; i++) {\n    System.out.println(\"Current index is: \" + i);\n}\n</code></pre>\n\n<p>The reason is you can use the condensed for syntax to loop over any <a href=\"http://download-llnw.oracle.com/javase/6/docs/api/java/lang/Iterable.html\" rel=\"noreferrer\">Iterable</a>, and it's not guaranteed that the values actually have an \"index\"</p>\n"},{"comments":[{"owner":{"account_id":5105567,"reputation":1321,"user_id":4093727,"display_name":"Michael M"},"score":5,"creation_date":1497209995,"post_id":3431643,"comment_id":75970037,"body_markdown":"That&#39;s true, but as much as I love the enhanced for-each loop introduced in Java5, doesn&#39;t supplying your own index defeat the purpose of simply using the traditional for-each construct?  Using what&#39;s built into Java will often be more intuitive / readable (though not always) to the Java developer.","body":"That&#39;s true, but as much as I love the enhanced for-each loop introduced in Java5, doesn&#39;t supplying your own index defeat the purpose of simply using the traditional for-each construct?  Using what&#39;s built into Java will often be more intuitive / readable (though not always) to the Java developer."},{"owner":{"account_id":152658,"reputation":9096,"user_id":367319,"accept_rate":85,"display_name":"Saher Ahwal"},"score":7,"creation_date":1497291396,"post_id":3431643,"comment_id":76005620,"body_markdown":"7 years later... ( wow I can&#39;t believe it, time flies) , I agree with you @MichaelM 100%.","body":"7 years later... ( wow I can&#39;t believe it, time flies) , I agree with you @MichaelM 100%."}],"tags":[],"owner":{"account_id":152658,"reputation":9096,"user_id":367319,"accept_rate":85,"display_name":"Saher Ahwal"},"comment_count":2,"down_vote_count":3,"up_vote_count":22,"is_accepted":false,"score":19,"last_activity_date":1695371970,"creation_date":1281207377,"answer_id":3431643,"question_id":3431529,"body_markdown":"Keep track of your index: That&#39;s how it is done in Java:\r\n   \r\n\r\n    int index = 0;\r\n    for (Element song: question){\r\n        // Do whatever\r\n        index++;\r\n    }","title":"How do I get the current index/key in a &quot;for each&quot; loop","body":"<p>Keep track of your index: That's how it is done in Java:</p>\n<pre><code>int index = 0;\nfor (Element song: question){\n    // Do whatever\n    index++;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":86093,"reputation":9573,"user_id":239657,"display_name":"Beni Cherniavsky-Paskin"},"score":0,"creation_date":1424868520,"post_id":3431754,"comment_id":45725686,"body_markdown":"Neat!  See also https://stackoverflow.com/questions/7167253/is-there-a-java-equivalent-of-pythons-enumerate-function","body":"Neat!  See also <a href=\"https://stackoverflow.com/questions/7167253/is-there-a-java-equivalent-of-pythons-enumerate-function\" title=\"is there a java equivalent of pythons enumerate function\">stackoverflow.com/questions/7167253/&hellip;</a>"},{"owner":{"account_id":3585957,"reputation":4619,"user_id":3241889,"accept_rate":72,"display_name":"Alex"},"score":1,"creation_date":1528882595,"post_id":3431754,"comment_id":88671535,"body_markdown":"I was thinking the same thing. I also love the Javascript syntax : \n`myArray.forEach((val, index) =&gt;\n     console.log(&#39;VAL : &#39;, val, &#39;INDEX : &#39;, index)\n);`","body":"I was thinking the same thing. I also love the Javascript syntax :  <code>myArray.forEach((val, index) =&gt;      console.log(&#39;VAL : &#39;, val, &#39;INDEX : &#39;, index) );</code>"},{"owner":{"account_id":12194665,"reputation":3483,"user_id":8900780,"display_name":"Xavier D"},"score":1,"creation_date":1612197074,"post_id":3431754,"comment_id":116685208,"body_markdown":"question is about Java, not JVM : sorry but scala is out of scope.","body":"question is about Java, not JVM : sorry but scala is out of scope."}],"tags":[],"owner":{"account_id":642686,"reputation":119,"user_id":414007,"display_name":"Zeffer"},"comment_count":3,"down_vote_count":6,"up_vote_count":13,"is_accepted":false,"score":7,"last_activity_date":1659512737,"creation_date":1281209156,"answer_id":3431754,"question_id":3431529,"body_markdown":"**Not possible in Java.**\r\n\r\n---\r\n\r\nHere&#39;s the Scala way:\r\n\r\n    val m = List(5, 4, 2, 89)\r\n    \r\n    for((el, i) &lt;- m.zipWithIndex)\r\n      println(el +&quot; &quot;+ i)\r\n\r\nIn Java either you need to run simple &quot;for&quot; loop or use an additional integer to track index, for example :\r\n\r\n    int songIndex = 0;\r\n    for (Element song: album){\r\n            // Do whatever\r\n             songIndex++;\r\n    }\r\n\r\nHope it will help :)","title":"How do I get the current index/key in a &quot;for each&quot; loop","body":"<p><strong>Not possible in Java.</strong></p>\n<hr />\n<p>Here's the Scala way:</p>\n<pre><code>val m = List(5, 4, 2, 89)\n\nfor((el, i) &lt;- m.zipWithIndex)\n  println(el +&quot; &quot;+ i)\n</code></pre>\n<p>In Java either you need to run simple &quot;for&quot; loop or use an additional integer to track index, for example :</p>\n<pre><code>int songIndex = 0;\nfor (Element song: album){\n        // Do whatever\n         songIndex++;\n}\n</code></pre>\n<p>Hope it will help :)</p>\n"},{"tags":[],"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1357175346,"creation_date":1357175346,"answer_id":14131749,"question_id":3431529,"body_markdown":"As others pointed out, &#39;not possible directly&#39;.\r\nI am guessing that you want some kind of index key for Song?\r\nJust create another field (a member variable) in Element. Increment it when you add Song to the collection.","title":"How do I get the current index/key in a &quot;for each&quot; loop","body":"<p>As others pointed out, 'not possible directly'.\nI am guessing that you want some kind of index key for Song?\nJust create another field (a member variable) in Element. Increment it when you add Song to the collection.</p>\n"},{"comments":[{"owner":{"account_id":409316,"reputation":400,"user_id":780504,"display_name":"gabor"},"score":5,"creation_date":1497267136,"post_id":37200328,"comment_id":75989746,"body_markdown":"Simply cumbersome.  Start at zero and implement at the end.  Unless you use continue in the body of the loop.","body":"Simply cumbersome.  Start at zero and implement at the end.  Unless you use continue in the body of the loop."}],"tags":[],"owner":{"account_id":7041204,"reputation":191,"user_id":5393646,"display_name":"Erik Brandsberg"},"comment_count":1,"down_vote_count":10,"up_vote_count":5,"is_accepted":false,"score":-5,"last_activity_date":1476363127,"creation_date":1463106610,"answer_id":37200328,"question_id":3431529,"body_markdown":"Example from current code I&#39;m working with:\r\n    \r\n    int index=-1;\r\n    for (Policy rule : rules)\r\n    {   \r\n         index++;\r\n         // do stuff here\r\n    }\r\n    \r\nLets you cleanly start with an index of zero, and increment as you process.\r\n\r\n","title":"How do I get the current index/key in a &quot;for each&quot; loop","body":"<p>Example from current code I'm working with:</p>\n\n<pre><code>int index=-1;\nfor (Policy rule : rules)\n{   \n     index++;\n     // do stuff here\n}\n</code></pre>\n\n<p>Lets you cleanly start with an index of zero, and increment as you process.</p>\n"}],"owner":{"account_id":74931,"reputation":6938,"user_id":215088,"accept_rate":91,"display_name":"droidgren"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":555131,"favorite_count":0,"down_vote_count":0,"up_vote_count":312,"closed_date":1468951677,"accepted_answer_id":3431543,"answer_count":6,"score":312,"last_activity_date":1695371970,"creation_date":1281205257,"question_id":3431529,"body_markdown":"In Java, how do I get the index of the current element?\r\n\r\n    for (Element song: question){\r\n        song.currentIndex();         //&lt;&lt;want the current index\r\n    }\r\n\r\nIn PHP, you could do this:\r\n\r\n    foreach ($arr as $index =&gt; $value) {\r\n        echo &quot;Key: $index; Value: $value&quot;;\r\n    }\r\n\r\n","title":"How do I get the current index/key in a &quot;for each&quot; loop","body":"<p>In Java, how do I get the index of the current element?</p>\n<pre><code>for (Element song: question){\n    song.currentIndex();         //&lt;&lt;want the current index\n}\n</code></pre>\n<p>In PHP, you could do this:</p>\n<pre><code>foreach ($arr as $index =&gt; $value) {\n    echo &quot;Key: $index; Value: $value&quot;;\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9965,"page":169,"page_size":100}
