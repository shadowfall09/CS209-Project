{"items":[{"tags":["java","lambda","java-stream"],"comments":[{"owner":{"account_id":7406747,"reputation":416,"user_id":5635476,"display_name":"levangode"},"score":2,"creation_date":1682552135,"post_id":76115318,"comment_id":134235923,"body_markdown":"when you&#39;re saying something goes wrong once 0 appears, could you specify what exactly is the problem?","body":"when you&#39;re saying something goes wrong once 0 appears, could you specify what exactly is the problem?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682557949,"post_id":76115318,"comment_id":134236448,"body_markdown":"I think you tried to explain, but I am sorry, it still isn’t clear to me exactly what your code is supposed to do and whether it should treat a score of 0 differently. A [mre] would also help so we can run your code and see for ourselves.","body":"I think you tried to explain, but I am sorry, it still isn’t clear to me exactly what your code is supposed to do and whether it should treat a score of 0 differently. A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would also help so we can run your code and see for ourselves."},{"owner":{"account_id":28360587,"reputation":13,"user_id":21690681,"display_name":"Spiritus"},"score":0,"creation_date":1682580237,"post_id":76115318,"comment_id":134239045,"body_markdown":"I mean that if Student have a some number (in my case is 4) of laboratory works, some of which Student passed (in my case is 3) for some points, and some (1) not (they should become 0 points), and then the totalScore should count average values including tasks that a Student did not try to solve (with 0 score), but it count without 0 points.\nAnd averageTotalScore should calculate the average values for each lab, including all Students (in my case is 3) and those who did not try to solve (with 0 points).","body":"I mean that if Student have a some number (in my case is 4) of laboratory works, some of which Student passed (in my case is 3) for some points, and some (1) not (they should become 0 points), and then the totalScore should count average values including tasks that a Student did not try to solve (with 0 score), but it count without 0 points. And averageTotalScore should calculate the average values for each lab, including all Students (in my case is 3) and those who did not try to solve (with 0 points)."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682629495,"post_id":76115318,"comment_id":134250376,"body_markdown":"Thanks. That helps a lot. Please when supplying such additional explanation (or any other information), do it as edits to the question so that we have everything in one place, it’s much nicer. This time I pasted it in there for you (only this time).","body":"Thanks. That helps a lot. Please when supplying such additional explanation (or any other information), do it as edits to the question so that we have everything in one place, it’s much nicer. This time I pasted it in there for you (only this time)."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682629599,"post_id":76115318,"comment_id":134250395,"body_markdown":"So if a student only has got 3 task results, how should your program be able to guess that there had been supposed to be 4?","body":"So if a student only has got 3 task results, how should your program be able to guess that there had been supposed to be 4?"},{"owner":{"account_id":28360587,"reputation":13,"user_id":21690681,"display_name":"Spiritus"},"score":0,"creation_date":1682666703,"post_id":76115318,"comment_id":134254638,"body_markdown":"I made some changes to clarify details.","body":"I made some changes to clarify details."}],"answers":[{"tags":[],"owner":{"account_id":9190353,"reputation":457,"user_id":6831116,"display_name":"Gopinath Radhakrishnan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682570175,"creation_date":1682570175,"answer_id":76116786,"question_id":76115318,"body_markdown":"I believe adding a filter for 0 value check should fix the issue, something similar to below:\r\n```\r\npublic Map&lt;Person, Double&gt; totalScores(Stream&lt;CourseResult&gt; results) {\r\n    return results.collect(Collectors.toMap(CourseResult::getPerson, result -&gt; result\r\n            .getTaskResults()\r\n            .values()\r\n            .stream().mapToInt(s -&gt; s).filter(value -&gt; value != 0)\r\n            .average()\r\n            .orElse(0.0)));\r\n}\r\n```","title":"Ignoring 0 score tasks using Stream API","body":"<p>I believe adding a filter for 0 value check should fix the issue, something similar to below:</p>\n<pre><code>public Map&lt;Person, Double&gt; totalScores(Stream&lt;CourseResult&gt; results) {\n    return results.collect(Collectors.toMap(CourseResult::getPerson, result -&gt; result\n            .getTaskResults()\n            .values()\n            .stream().mapToInt(s -&gt; s).filter(value -&gt; value != 0)\n            .average()\n            .orElse(0.0)));\n}\n</code></pre>\n"}],"owner":{"account_id":28360587,"reputation":13,"user_id":21690681,"display_name":"Spiritus"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683303730,"creation_date":1682545316,"question_id":76115318,"body_markdown":" I have 2 methods and I need to count average values including tasks that a student did not try  to solve (with 0 score). Everything works until 0 appears. And I stuck with this. What is my problem?\r\n1. totalScores - Return map of persons to their total scores (as average);\r\n2. averageTotalScore - Return average result of all persons (be sure to consider all tasks of the course and not just those that were completed by a particular student).\r\n\r\nI mean that if a student has a some number (in my case it is 4) of laboratory works, some of which the student passed (in my case is 3) for some points, and some (1) not (they should become 0 points), and then the `totalScore` should count average values including tasks that a Student did not try to solve (with 0 score). But it counts without 0 points. And `averageTotalScore` should calculate the average values for each lab, including all Students (in my case is 3) and those who did not try to solve (with 0 points).\r\n    \r\n    For example:\r\n    Student  | Lab1 | Lab2 | Lab3 | Lab4 | Total | Mark |\r\n    Eva Bee  |    0 |   83 |   89 |   59 | 57.75 |    F |\r\n    John Show|   61 |   92 |   67 |    0 | 55.00 |    F |\r\n    Phoebe Li|   75 |   94 |    0 |   52 | 55.25 |    F |\r\n    Average  |45.33 |89.67 |52.00 |37.00 | 56.00 |    F |\r\n \r\n    Expected: 57.75, Actual: 77.00\r\n\r\n    \r\n    public class CourseResult {\r\n        private final Person person;\r\n        private final Map&lt;String, Integer&gt; taskResults;\r\n        public CourseResult(final Person person, final Map&lt;String, Integer&gt; taskResults) {\r\n            this.person = person;\r\n            this.taskResults = taskResults;\r\n        }\r\n        public Person getPerson() {\r\n            return person;\r\n        }\r\n        public Map&lt;String, Integer&gt; getTaskResults() {\r\n            return taskResults;\r\n        }\r\n    }\r\n\r\n\r\n\r\n```\r\n     public static Map&lt;Person, Double&gt; totalScores(Stream&lt;CourseResult&gt; results) {\r\n        Map&lt;Person, List&lt;Integer&gt;&gt; scores = results\r\n                .flatMap(cr -&gt; cr.getTaskResults().entrySet().stream()\r\n                        .filter(e -&gt; e.getValue() &gt;= 0)\r\n                        .map(e -&gt; new AbstractMap.SimpleEntry&lt;&gt;(cr.getPerson(), e.getValue())))\r\n                .collect(Collectors.groupingBy(Map.Entry::getKey, Collectors.mapping(e -&gt; Optional.ofNullable(e.getValue()).orElse(0), Collectors.toList())));\r\n\r\n\r\n        Map&lt;Person, Double&gt; averageScores = new HashMap&lt;&gt;();\r\n        scores.forEach((person, taskResults) -&gt; {\r\n            int totalScore = taskResults.stream()\r\n                    .mapToInt(Integer::intValue)\r\n                    .sum();\r\n            double tasksPerPerson = scores.get(person).stream()\r\n                    .mapToInt(Integer::intValue)\r\n                    .filter(score -&gt; score &gt;= 0)\r\n                    .count();\r\n\r\n            double averageScore = totalScore / tasksPerPerson;\r\n            averageScores.put(person, averageScore);\r\n        });\r\n        return averageScores;\r\n    }","title":"Ignoring 0 score tasks using Stream API","body":"<p>I have 2 methods and I need to count average values including tasks that a student did not try  to solve (with 0 score). Everything works until 0 appears. And I stuck with this. What is my problem?</p>\n<ol>\n<li>totalScores - Return map of persons to their total scores (as average);</li>\n<li>averageTotalScore - Return average result of all persons (be sure to consider all tasks of the course and not just those that were completed by a particular student).</li>\n</ol>\n<p>I mean that if a student has a some number (in my case it is 4) of laboratory works, some of which the student passed (in my case is 3) for some points, and some (1) not (they should become 0 points), and then the <code>totalScore</code> should count average values including tasks that a Student did not try to solve (with 0 score). But it counts without 0 points. And <code>averageTotalScore</code> should calculate the average values for each lab, including all Students (in my case is 3) and those who did not try to solve (with 0 points).</p>\n<pre><code>For example:\nStudent  | Lab1 | Lab2 | Lab3 | Lab4 | Total | Mark |\nEva Bee  |    0 |   83 |   89 |   59 | 57.75 |    F |\nJohn Show|   61 |   92 |   67 |    0 | 55.00 |    F |\nPhoebe Li|   75 |   94 |    0 |   52 | 55.25 |    F |\nAverage  |45.33 |89.67 |52.00 |37.00 | 56.00 |    F |\n\nExpected: 57.75, Actual: 77.00\n\n\npublic class CourseResult {\n    private final Person person;\n    private final Map&lt;String, Integer&gt; taskResults;\n    public CourseResult(final Person person, final Map&lt;String, Integer&gt; taskResults) {\n        this.person = person;\n        this.taskResults = taskResults;\n    }\n    public Person getPerson() {\n        return person;\n    }\n    public Map&lt;String, Integer&gt; getTaskResults() {\n        return taskResults;\n    }\n}\n</code></pre>\n<pre><code>     public static Map&lt;Person, Double&gt; totalScores(Stream&lt;CourseResult&gt; results) {\n        Map&lt;Person, List&lt;Integer&gt;&gt; scores = results\n                .flatMap(cr -&gt; cr.getTaskResults().entrySet().stream()\n                        .filter(e -&gt; e.getValue() &gt;= 0)\n                        .map(e -&gt; new AbstractMap.SimpleEntry&lt;&gt;(cr.getPerson(), e.getValue())))\n                .collect(Collectors.groupingBy(Map.Entry::getKey, Collectors.mapping(e -&gt; Optional.ofNullable(e.getValue()).orElse(0), Collectors.toList())));\n\n\n        Map&lt;Person, Double&gt; averageScores = new HashMap&lt;&gt;();\n        scores.forEach((person, taskResults) -&gt; {\n            int totalScore = taskResults.stream()\n                    .mapToInt(Integer::intValue)\n                    .sum();\n            double tasksPerPerson = scores.get(person).stream()\n                    .mapToInt(Integer::intValue)\n                    .filter(score -&gt; score &gt;= 0)\n                    .count();\n\n            double averageScore = totalScore / tasksPerPerson;\n            averageScores.put(person, averageScore);\n        });\n        return averageScores;\n    }\n</code></pre>\n"},{"tags":["java","constructor","inner-classes","outer-classes"],"answers":[{"tags":[],"owner":{"account_id":1281728,"reputation":73126,"user_id":1235698,"accept_rate":100,"display_name":"Marcin Orlowski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683303023,"creation_date":1683245760,"answer_id":76178095,"question_id":76178070,"body_markdown":"If all you do with instance of `B` in `A`&#39;s constructor is an assignment, then you could try using `null` at instantiation and then hand it a `B` instance:\r\n\r\n```java\r\nA a = new A(null);\r\nA.B b = a.new B();\r\na.b = b;\r\n```\r\n\r\nthe above requires `a.b` to be public, or you need to add a setter. But that looks bad to me, so perhaps you should make `B` class static, and by doing so it can be instantiated independently of `A`::\r\n\r\n```java\r\npublic class A {\r\n    private B b;\r\n\r\n    public A(B b) {\r\n        this.b = b;\r\n    }\r\n\r\n    public static class B {\r\n        public B() {}\r\n    }\r\n}\r\n```\r\n\r\nand then\r\n\r\n```java\r\nA.B b = new A.B();\r\nA a = new A(b);\r\n```","title":"Outerclass with its innerclass as an argument for the outerclass constructor","body":"<p>If all you do with instance of <code>B</code> in <code>A</code>'s constructor is an assignment, then you could try using <code>null</code> at instantiation and then hand it a <code>B</code> instance:</p>\n<pre class=\"lang-java prettyprint-override\"><code>A a = new A(null);\nA.B b = a.new B();\na.b = b;\n</code></pre>\n<p>the above requires <code>a.b</code> to be public, or you need to add a setter. But that looks bad to me, so perhaps you should make <code>B</code> class static, and by doing so it can be instantiated independently of <code>A</code>::</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class A {\n    private B b;\n\n    public A(B b) {\n        this.b = b;\n    }\n\n    public static class B {\n        public B() {}\n    }\n}\n</code></pre>\n<p>and then</p>\n<pre class=\"lang-java prettyprint-override\"><code>A.B b = new A.B();\nA a = new A(b);\n</code></pre>\n"}],"owner":{"account_id":28511105,"reputation":13,"user_id":21821097,"display_name":"freeze"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76178095,"answer_count":1,"score":0,"last_activity_date":1683303023,"creation_date":1683245162,"question_id":76178070,"body_markdown":"Im wondering if it is possible to create this object based on the code below or is it a cyclic dependency which cant be solved?\r\n\r\n\r\n```java\r\npublic class A {\r\n  private B b;\r\n\r\n  public A(B b) {\r\n    this.b = b;\r\n  }\r\n\r\n  public class B {\r\n    public B() {}\r\n  }\r\n  \r\n}\r\n```\r\n\r\nI was provided with a class which looked like this and I cant find a way to initialize B or A. Its like and impossible cycle.","title":"Outerclass with its innerclass as an argument for the outerclass constructor","body":"<p>Im wondering if it is possible to create this object based on the code below or is it a cyclic dependency which cant be solved?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class A {\n  private B b;\n\n  public A(B b) {\n    this.b = b;\n  }\n\n  public class B {\n    public B() {}\n  }\n  \n}\n</code></pre>\n<p>I was provided with a class which looked like this and I cant find a way to initialize B or A. Its like and impossible cycle.</p>\n"},{"tags":["java","javassist"],"owner":{"account_id":27166,"reputation":19089,"user_id":71399,"accept_rate":65,"display_name":"pauljwilliams"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":417,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1683302945,"creation_date":1312305232,"question_id":6915855,"body_markdown":"I&#39;ve used Javassist to dynamically change the return type of a function call, but it&#39;s not working.\r\n\r\nI&#39;ve got a call that is defined in the source code as simply:\r\n\r\n    Boolean getResult(){return true;}\r\n\r\nBut then at run time I dynamically change it to:\r\n\r\n    String getResult(){return &quot;true&quot;}\r\n\r\nI then call it as:\r\n\r\n    Object o = myobject.getResult();\r\n\r\nAnd get a MethodNotFound exception. If I use reflection I can see my new method on the object, but the call is failing, apparently because it&#39;s somehow bound to the old return type.\r\n\r\nIf I call the new method reflectively (pseudocode):\r\n\r\n    Method m = myobject.getClass.GetDeclaredMethods().(...find method named GetResult...)\r\n\r\n    Object o = m.invoke(myObject);\r\n\r\nThen all works fine, and I can switch between manipulated and non-manipulated byte code without issue, and I can see that the type of O is either String or Boolean accordingly.\r\n\r\nAny ideas why?","title":"Utilising Javassist to provide overloading based on return type","body":"<p>I've used Javassist to dynamically change the return type of a function call, but it's not working.</p>\n<p>I've got a call that is defined in the source code as simply:</p>\n<pre><code>Boolean getResult(){return true;}\n</code></pre>\n<p>But then at run time I dynamically change it to:</p>\n<pre><code>String getResult(){return &quot;true&quot;}\n</code></pre>\n<p>I then call it as:</p>\n<pre><code>Object o = myobject.getResult();\n</code></pre>\n<p>And get a MethodNotFound exception. If I use reflection I can see my new method on the object, but the call is failing, apparently because it's somehow bound to the old return type.</p>\n<p>If I call the new method reflectively (pseudocode):</p>\n<pre><code>Method m = myobject.getClass.GetDeclaredMethods().(...find method named GetResult...)\n\nObject o = m.invoke(myObject);\n</code></pre>\n<p>Then all works fine, and I can switch between manipulated and non-manipulated byte code without issue, and I can see that the type of O is either String or Boolean accordingly.</p>\n<p>Any ideas why?</p>\n"},{"tags":["java","roles","weblogic12c"],"answers":[{"tags":[],"owner":{"account_id":21016374,"reputation":1,"user_id":15443748,"display_name":"malykony"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683302879,"creation_date":1683302879,"answer_id":76184095,"question_id":76014212,"body_markdown":"Oracle Support Document 2865542.1 (After Upgrading JDK In WCC Environment, WCC Users Lost Roles) can be found at: https://support.oracle.com/epmos/faces/DocumentDisplay?id=2865542.1","title":"Custom roles disappeared in the appliaction after java update on weblogic server","body":"<p>Oracle Support Document 2865542.1 (After Upgrading JDK In WCC Environment, WCC Users Lost Roles) can be found at: <a href=\"https://support.oracle.com/epmos/faces/DocumentDisplay?id=2865542.1\" rel=\"nofollow noreferrer\">https://support.oracle.com/epmos/faces/DocumentDisplay?id=2865542.1</a></p>\n"}],"owner":{"account_id":21016374,"reputation":1,"user_id":15443748,"display_name":"malykony"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76184095,"answer_count":1,"score":0,"last_activity_date":1683302879,"creation_date":1681468669,"question_id":76014212,"body_markdown":"After updating java from version 1.8.0_301 to 1.8.0_361 on our Weblogic (12c) servers, custom roles for users on user profile page (IdcService=GET_USER_INFO) in the applications disappear. Only the basic roles stay. The custome roles and groups are still visible in Weblogic server administration console - Security Realms - myrealm. \r\nNothing other has changed.\r\nWhen downgrading java back, everything is ok again.\r\n\r\n\r\nI have no idea how to solve this so far.","title":"Custom roles disappeared in the appliaction after java update on weblogic server","body":"<p>After updating java from version 1.8.0_301 to 1.8.0_361 on our Weblogic (12c) servers, custom roles for users on user profile page (IdcService=GET_USER_INFO) in the applications disappear. Only the basic roles stay. The custome roles and groups are still visible in Weblogic server administration console - Security Realms - myrealm.\nNothing other has changed.\nWhen downgrading java back, everything is ok again.</p>\n<p>I have no idea how to solve this so far.</p>\n"},{"tags":["java","maven","nexus"],"comments":[{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1683302512,"post_id":76183970,"comment_id":134351174,"body_markdown":"I do not quite understand what you expect from `-U` if you are not using SNAPSHOT versions? With release versions, you build a new version each time you change something so there is no need to &quot;update&quot; an existing artifact.","body":"I do not quite understand what you expect from <code>-U</code> if you are not using SNAPSHOT versions? With release versions, you build a new version each time you change something so there is no need to &quot;update&quot; an existing artifact."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1683302820,"post_id":76183970,"comment_id":134351240,"body_markdown":"Well, at least the top-level doc for &quot;-U&quot; is a little ambiguous. It says &quot; -U,--update-snapshots                  Forces a check for missing\n                                        releases and updated snapshots on\n                                        remote repositories&quot;. So, it refers to snapshots, but also releases. In any case, what I&#39;m seeing is that the artifact isn&#39;t being updated in the local maven repo.","body":"Well, at least the top-level doc for &quot;-U&quot; is a little ambiguous. It says &quot; -U,--update-snapshots                  Forces a check for missing                                         releases and updated snapshots on                                         remote repositories&quot;. So, it refers to snapshots, but also releases. In any case, what I&#39;m seeing is that the artifact isn&#39;t being updated in the local maven repo."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1683302953,"post_id":76183970,"comment_id":134351261,"body_markdown":"I do not quite get what you are doing. Are you building a release version of a parent POM again, i.e. if there is a version 1.1.0 of the parent POM, you redeploy a different parent POM with the same version 1.1.0 instead of using the next version 1.2.0 or 1.1.1? Replacing a parent POM of version 1.1.0 with a different parent POM of version 1.1.0 is undefined behaviour and will cause all kinds of problems.","body":"I do not quite get what you are doing. Are you building a release version of a parent POM again, i.e. if there is a version 1.1.0 of the parent POM, you redeploy a different parent POM with the same version 1.1.0 instead of using the next version 1.2.0 or 1.1.1? Replacing a parent POM of version 1.1.0 with a different parent POM of version 1.1.0 is undefined behaviour and will cause all kinds of problems."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1683310328,"post_id":76183970,"comment_id":134352794,"body_markdown":"`mvn -U` does following: downloads snapshots, downloads latest releases **if version ranges are in use**, retries related downloads failed previously (i.e. resets `*.lastUpdated`)","body":"<code>mvn -U</code> does following: downloads snapshots, downloads latest releases <b>if version ranges are in use</b>, retries related downloads failed previously (i.e. resets <code>*.lastUpdated</code>)"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1683314112,"post_id":76183970,"comment_id":134353563,"body_markdown":"Have you defined the verison of the surefire-plugin in your pom file or not? Or in your parent pom? Ah btw. have you change the version of your parent pom in your current project? Can you show some examples?","body":"Have you defined the verison of the surefire-plugin in your pom file or not? Or in your parent pom? Ah btw. have you change the version of your parent pom in your current project? Can you show some examples?"},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1683317100,"post_id":76183970,"comment_id":134354121,"body_markdown":"I am using version ranges for some things, but not for the parent pom reference, as you can&#39;t do that there. The previous download likely didn&#39;t fail. I have defined the surefire version in the parent pom, and I have not changed the version of the parent pom.","body":"I am using version ranges for some things, but not for the parent pom reference, as you can&#39;t do that there. The previous download likely didn&#39;t fail. I have defined the surefire version in the parent pom, and I have not changed the version of the parent pom."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1683317993,"post_id":76183970,"comment_id":134354296,"body_markdown":"First you are wrong. You can define a version range for the parent version (I recommend to use most recent versions of Maven 3.8/3.9.X and recommend not to use version ranges at all) if you have defined the version of maven-surefire-plugin in your parent and use the same version of your parent in your project nothing will change the used version of maven-surefire-plugin. in your current project unless you change the version of your parent to use the more recent version of your parent which has defined the different version of maven-surefire-plugin...","body":"First you are wrong. You can define a version range for the parent version (I recommend to use most recent versions of Maven 3.8/3.9.X and recommend not to use version ranges at all) if you have defined the version of maven-surefire-plugin in your parent and use the same version of your parent in your project nothing will change the used version of maven-surefire-plugin. in your current project unless you change the version of your parent to use the more recent version of your parent which has defined the different version of maven-surefire-plugin..."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":1,"creation_date":1683322182,"post_id":76183970,"comment_id":134354869,"body_markdown":"Everything is working now, I understand what was happening here now. I had the release artifact purged from the build nodes and reran the build, and now the child build is getting the correct surefire version.","body":"Everything is working now, I understand what was happening here now. I had the release artifact purged from the build nodes and reran the build, and now the child build is getting the correct surefire version."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1683364434,"post_id":76183970,"comment_id":134358159,"body_markdown":"Hm.. that sounds strange... if the release artifact is already there it means it had been downloaded already. the question is why is it not taken into account from your own project? I would do further investigation what the real reason wa...","body":"Hm.. that sounds strange... if the release artifact is already there it means it had been downloaded already. the question is why is it not taken into account from your own project? I would do further investigation what the real reason wa..."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1683489143,"post_id":76183970,"comment_id":134371193,"body_markdown":"&quot;why is it not taken into account from your own project&quot;? I don&#39;t know what that means.","body":"&quot;why is it not taken into account from your own project&quot;? I don&#39;t know what that means."}],"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683301988,"creation_date":1683301988,"question_id":76183970,"body_markdown":"Using Maven 3.8.x (not sure of the exact version).\r\n\r\nI support the platform side of a large set of services that use a parent pom with an intranet artifact repository (nexus).  I often update artifacts in nexus and see them downloaded with &quot;mvn -U&quot; on the desktop and our CI servers.\r\n\r\nYesterday I had a situation where I had to update the latest release version (not snapshot) of our parent pom.  One of the changes was changing the version of Surefire.  I deployed that version to nexus and inspected the artifact in the index to verify the change was there. I verified with a local build that it&#39;s getting the new version. I then ran a CI build, but when Surefire ran, it was still using the old version of Surefire.  I tried this several times, but it&#39;s not getting the new version.\r\n\r\nIt almost seems like &quot;mvn -U&quot; doesn&#39;t do the same thing with parent poms that it does with other artifacts, but I can&#39;t find any documentation to that effect.\r\n\r\nI&#39;m going to proceed to purge the artifact from the local maven repos on the build nodes, but a different team has to do that.\r\n\r\nIs there any reason to expect this behavior from &quot;mvn -U&quot;?  Would adding &quot;-X&quot; tell me anything useful?","title":"mvn -U doesn&#39;t appear to refresh parent poms","body":"<p>Using Maven 3.8.x (not sure of the exact version).</p>\n<p>I support the platform side of a large set of services that use a parent pom with an intranet artifact repository (nexus).  I often update artifacts in nexus and see them downloaded with &quot;mvn -U&quot; on the desktop and our CI servers.</p>\n<p>Yesterday I had a situation where I had to update the latest release version (not snapshot) of our parent pom.  One of the changes was changing the version of Surefire.  I deployed that version to nexus and inspected the artifact in the index to verify the change was there. I verified with a local build that it's getting the new version. I then ran a CI build, but when Surefire ran, it was still using the old version of Surefire.  I tried this several times, but it's not getting the new version.</p>\n<p>It almost seems like &quot;mvn -U&quot; doesn't do the same thing with parent poms that it does with other artifacts, but I can't find any documentation to that effect.</p>\n<p>I'm going to proceed to purge the artifact from the local maven repos on the build nodes, but a different team has to do that.</p>\n<p>Is there any reason to expect this behavior from &quot;mvn -U&quot;?  Would adding &quot;-X&quot; tell me anything useful?</p>\n"},{"tags":["java","android","service","leakcanary"],"owner":{"account_id":9086240,"reputation":224,"user_id":6764107,"display_name":"Chester Fung"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683301524,"creation_date":1683301191,"question_id":76183862,"body_markdown":"My application is Keyboard IME Service, with some UI for config and testing.\r\n\r\n`D/LeakCanary: LeakCanary is currently disabled: Waiting for debugger to detach.` comes first.\r\nThen \r\n\r\n`D/LeakCanary: Watching instance of .... ` (UI&#39;s Activity) comes second as I also have an activity for UI testing.\r\n\r\n\r\nHowever, when I open the keyboard, there is no watching message.\r\n\r\n\r\nHow to &quot;install&quot; it into the Service?\r\n\r\nA log message shall be shown for watching my Service","title":"How to use Leakcanary for Service (like InputMethodService)","body":"<p>My application is Keyboard IME Service, with some UI for config and testing.</p>\n<p><code>D/LeakCanary: LeakCanary is currently disabled: Waiting for debugger to detach.</code> comes first.\nThen</p>\n<p><code>D/LeakCanary: Watching instance of .... </code> (UI's Activity) comes second as I also have an activity for UI testing.</p>\n<p>However, when I open the keyboard, there is no watching message.</p>\n<p>How to &quot;install&quot; it into the Service?</p>\n<p>A log message shall be shown for watching my Service</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","hibernate-envers","audit-logging"],"owner":{"account_id":6512038,"reputation":41,"user_id":5038946,"accept_rate":0,"display_name":"Deepa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683301311,"creation_date":1683301311,"question_id":76183874,"body_markdown":"I have an orders table and is being audited with hibernate envers @Audited.\r\nI need to show user the list of orders along with the history of each order(add, modify, process).\r\n\r\nHow can I achieve this with hibernate envers audit? \r\nHow to fetch all revisions for multiple entities in one go?\r\n\r\nI know how to get the revisions of one entity(using forRevisionsOfEntity()). \r\n\r\nExpected Sample response like \r\n\r\n| Order ID | Status     | Rev |\r\n| -------- | -----------|-----|\r\n| O1       | Completed  | 3   |\r\n| O1       | Processed  | 2   |\r\n| O1       | Created    | 1   |\r\n| O2       | In progress| 2   |\r\n| O2       | Created    | 1   |\r\n","title":"Is it possible to get all revisions of multiple entities in hibernate enver?","body":"<p>I have an orders table and is being audited with hibernate envers @Audited.\nI need to show user the list of orders along with the history of each order(add, modify, process).</p>\n<p>How can I achieve this with hibernate envers audit?\nHow to fetch all revisions for multiple entities in one go?</p>\n<p>I know how to get the revisions of one entity(using forRevisionsOfEntity()).</p>\n<p>Expected Sample response like</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Order ID</th>\n<th>Status</th>\n<th>Rev</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>O1</td>\n<td>Completed</td>\n<td>3</td>\n</tr>\n<tr>\n<td>O1</td>\n<td>Processed</td>\n<td>2</td>\n</tr>\n<tr>\n<td>O1</td>\n<td>Created</td>\n<td>1</td>\n</tr>\n<tr>\n<td>O2</td>\n<td>In progress</td>\n<td>2</td>\n</tr>\n<tr>\n<td>O2</td>\n<td>Created</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n</div>"},{"tags":["java","sbt","playframework-2.1","nohup"],"answers":[{"tags":[],"owner":{"account_id":263634,"reputation":615,"user_id":549332,"display_name":"Totoro"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1398981556,"creation_date":1398981556,"answer_id":23417371,"question_id":23417222,"body_markdown":"That stack trace leads me to believe you are spinning on the console/tty trying to read input.  Or perhaps from a file.    My recollection of Sbt is that it doesn&#39;t support multiple commands at once from the command line (compile and run).   You have run all these as separate commands and it works?  How about putting into a script and exec&#39;ing that.","title":"high cpu consumption by sbt main thread when running a project with nohup","body":"<p>That stack trace leads me to believe you are spinning on the console/tty trying to read input.  Or perhaps from a file.    My recollection of Sbt is that it doesn't support multiple commands at once from the command line (compile and run).   You have run all these as separate commands and it works?  How about putting into a script and exec'ing that.</p>\n"},{"tags":[],"owner":{"account_id":4774,"reputation":26513,"user_id":7345,"accept_rate":81,"display_name":"mindas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683301023,"creation_date":1683301023,"answer_id":76183842,"question_id":23417222,"body_markdown":"This has haunted us as well, albeit with a much newer version of sbt/Playframework. \r\n\r\nWe were experiencing 100% CPU load on one of Playframework threads after upgrading to Java 11 &amp; newest Play (version 2.8.17 running Java 11.0.17). sbt version is 1.6.2. We are using [Tilt][1] to keep all the configs in one place as well as for general convenience. One thread with jline/sbt stack trace elements was consuming 100-130% of CPU on Linux all the time while there were no HTTP requests nor any background jobs.\r\n\r\nThe secret sauce was to add `-Dsbt.ci=true` to the `sbt run ...` command line (the default value for `sbt.ci` is `false`).\r\n\r\n  [1]: https://tilt.dev/","title":"high cpu consumption by sbt main thread when running a project with nohup","body":"<p>This has haunted us as well, albeit with a much newer version of sbt/Playframework.</p>\n<p>We were experiencing 100% CPU load on one of Playframework threads after upgrading to Java 11 &amp; newest Play (version 2.8.17 running Java 11.0.17). sbt version is 1.6.2. We are using <a href=\"https://tilt.dev/\" rel=\"nofollow noreferrer\">Tilt</a> to keep all the configs in one place as well as for general convenience. One thread with jline/sbt stack trace elements was consuming 100-130% of CPU on Linux all the time while there were no HTTP requests nor any background jobs.</p>\n<p>The secret sauce was to add <code>-Dsbt.ci=true</code> to the <code>sbt run ...</code> command line (the default value for <code>sbt.ci</code> is <code>false</code>).</p>\n"}],"owner":{"account_id":3211854,"reputation":123,"user_id":2711687,"display_name":"user2711687"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":983,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":23417371,"answer_count":2,"score":2,"last_activity_date":1683301023,"creation_date":1398980830,"question_id":23417222,"body_markdown":"To get right to it, I am trying to build an autonomous environment where I can provide the benefits of sbt&#39;s auto-reloading without needing to actually run interactively. At this point I have a setup that does exactly what I want with the exception of the sbt main thread going crazy and eating 100% cpu. I am unsure of why this is the case, but because this is an unusual way of doing things I wanted to discuss it here before filing a bug.\r\n\r\nFirst, some system information.\r\n\r\n- CentOS release 6.5 (Final)\r\n\r\n- java version &quot;1.7.0_51&quot;\r\nJava(TM) SE Runtime Environment (build 1.7.0_51-b13)\r\nJava HotSpot(TM) 64-Bit Server VM (build 24.51-b03, mixed mode)\r\n\r\n- sbt (launched with 0.13.0, but the project then runs under 0.12.4)\r\n\r\nI am orchestrating this system using chef, the script that kicks everything off will be run as root and here is what the constructed command for a particular project looks like. If this command is decomposed and run as hubuser without background and nohup, i.e. the normal way as an interactive shell, everything works exactly as would be expected.\r\n\r\n    su - hubuser -c &quot;cd /home/hubuser/projects/cruise/tsttravel_synced; nohup java -Xms512M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=1024M -Xmx4096M -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/hubuser/projects/cruise -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=9054 -Dnet.tstllc.rmi.agent.port=9104 -javaagent:/opt/tst/jmx/jmx-agent.jar -jar /home/hubuser/projects/sbt-launch.jar &#39;project cruise-web&#39; &#39;;compile;run -Dhttp.port=9004 -Dap.credentials.file=/home/hubuser/projects/credentials.cfg -Dap.config.file=/home/hubuser/projects/app.cfg -Dlogger.file=/home/hubuser/projects/cruise/cruise-logback.xml&#39; &amp;&gt;&gt; /home/hubuser/projects/cruise/console.log &amp;&quot;\r\n\r\nHowever, run this way the sbt main thread goes crazy. Here&#39;s how I came to that conclusion. I have not yet dug into the sbt codebase, but my blind stab in the dark is that screwing with signals and the shell like this somehow causes bizarre behavior. Any sbt devs have a better educated guess?\r\n\r\n1) last lines in the console.log, pretty standard stuff.\r\n\r\n--- (Running the application from SBT, auto-reloading is enabled) ---\r\n\r\n \r\n(Server started, use Ctrl+D to stop and go back to the console...)\r\n\r\n2) top showing processes, nothing is happening but the cpu load never goes away.\r\n\r\n**PID** USER      PR  NI  VIRT  RES  SHR S **%CPU** %MEM    TIME+  **COMMAND**\r\n\r\n**14037** hubuser   20   0 8540m 1.6g  25m S **100.0** 10.5   3:39.94 **java**\r\n\r\n3) top showing native threads from the same run.\r\n\r\n  **PID** USER      PR  NI  VIRT  RES  SHR S **%CPU** %MEM    TIME+  **COMMAND**\r\n\r\n**14044** hubuser   20   0 8540m 1.6g  25m R **100.0** 10.5  15:14.45 **java**\r\n\r\n4) finally, the salient part of the thread dump. 0x36dc = 14044\r\n\r\n    kill -3 14037\r\n\r\n    &quot;main&quot; prio=10 tid=0x00007fdbb400a800 nid=0x36dc runnable [0x00007fdbbaf76000]\r\n       java.lang.Thread.State: RUNNABLE\r\n    \tat java.io.FileInputStream.read0(Native Method)\r\n    \tat java.io.FileInputStream.read(FileInputStream.java:210)\r\n    \tat jline.Terminal.readCharacter(Terminal.java:99)\r\n    \tat jline.UnixTerminal.readVirtualKey(UnixTerminal.java:122)\r\n    \tat jline.ConsoleReader.readVirtualKey(ConsoleReader.java:1606)\r\n    \tat play.PlayConsoleInteractionMode$.waitEOF$1(PlayInteractionMode.scala:29)\r\n    \tat play.PlayConsoleInteractionMode$$anonfun$waitForKey$1.apply$mcV$sp(PlayInteractionMode.scala:36)\r\n    \tat play.PlayConsoleInteractionMode$.doWithoutEcho(PlayInteractionMode.scala:41)\r\n    \tat play.PlayConsoleInteractionMode$.waitForKey(PlayInteractionMode.scala:36)\r\n    \tat play.PlayConsoleInteractionMode$.waitForCancel(PlayInteractionMode.scala:45)\r\n    \tat sbt.PlayCommands$$anonfun$createPlayRunCommand$1$$anonfun$57.apply(PlayCommands.scala:671)\r\n    \tat sbt.PlayCommands$$anonfun$createPlayRunCommand$1$$anonfun$57.apply(PlayCommands.scala:523)\r\n    \tat scala.Either$RightProjection.map(Either.scala:533)\r\n    \tat sbt.PlayCommands$$anonfun$createPlayRunCommand$1.apply(PlayCommands.scala:523)\r\n    \tat sbt.PlayCommands$$anonfun$createPlayRunCommand$1.apply(PlayCommands.scala:497)\r\n    \tat sbt.Command$$anonfun$sbt$Command$$apply1$1$$anonfun$apply$6.apply(Command.scala:72)\r\n    \tat sbt.Command$.process(Command.scala:90)\r\n    \tat sbt.MainLoop$$anonfun$next$1$$anonfun$apply$1.apply(MainLoop.scala:71)\r\n    \tat sbt.MainLoop$$anonfun$next$1$$anonfun$apply$1.apply(MainLoop.scala:71)\r\n    \tat sbt.State$$anon$2.process(State.scala:171)\r\n    \tat sbt.MainLoop$$anonfun$next$1.apply(MainLoop.scala:71)\r\n    \tat sbt.MainLoop$$anonfun$next$1.apply(MainLoop.scala:71)\r\n    \tat sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:18)\r\n    \tat sbt.MainLoop$.next(MainLoop.scala:71)\r\n    \tat sbt.MainLoop$.run(MainLoop.scala:64)\r\n    \tat sbt.MainLoop$$anonfun$runWithNewLog$1.apply(MainLoop.scala:53)\r\n    \tat sbt.MainLoop$$anonfun$runWithNewLog$1.apply(MainLoop.scala:50)\r\n    \tat sbt.Using.apply(Using.scala:25)\r\n    \tat sbt.MainLoop$.runWithNewLog(MainLoop.scala:50)\r\n    \tat sbt.MainLoop$.runAndClearLast(MainLoop.scala:33)\r\n    \tat sbt.MainLoop$.runLoggedLoop(MainLoop.scala:17)\r\n    \tat sbt.MainLoop$.runLogged(MainLoop.scala:13)\r\n    \tat sbt.xMain.run(Main.scala:26)\r\n    \tat xsbt.boot.Launch$$anonfun$run$1.apply(Launch.scala:57)\r\n    \tat xsbt.boot.Launch$.withContextLoader(Launch.scala:77)\r\n    \tat xsbt.boot.Launch$.run(Launch.scala:57)\r\n    \tat xsbt.boot.Launch$$anonfun$explicit$1.apply(Launch.scala:45)\r\n    \tat xsbt.boot.Launch$.launch(Launch.scala:65)\r\n    \tat xsbt.boot.Launch$.apply(Launch.scala:16)\r\n    \tat xsbt.boot.Boot$.runImpl(Boot.scala:32)\r\n    \tat xsbt.boot.Boot$.main(Boot.scala:21)\r\n    \tat xsbt.boot.Boot.main(Boot.scala)","title":"high cpu consumption by sbt main thread when running a project with nohup","body":"<p>To get right to it, I am trying to build an autonomous environment where I can provide the benefits of sbt's auto-reloading without needing to actually run interactively. At this point I have a setup that does exactly what I want with the exception of the sbt main thread going crazy and eating 100% cpu. I am unsure of why this is the case, but because this is an unusual way of doing things I wanted to discuss it here before filing a bug.</p>\n\n<p>First, some system information.</p>\n\n<ul>\n<li><p>CentOS release 6.5 (Final)</p></li>\n<li><p>java version \"1.7.0_51\"\nJava(TM) SE Runtime Environment (build 1.7.0_51-b13)\nJava HotSpot(TM) 64-Bit Server VM (build 24.51-b03, mixed mode)</p></li>\n<li><p>sbt (launched with 0.13.0, but the project then runs under 0.12.4)</p></li>\n</ul>\n\n<p>I am orchestrating this system using chef, the script that kicks everything off will be run as root and here is what the constructed command for a particular project looks like. If this command is decomposed and run as hubuser without background and nohup, i.e. the normal way as an interactive shell, everything works exactly as would be expected.</p>\n\n<pre><code>su - hubuser -c \"cd /home/hubuser/projects/cruise/tsttravel_synced; nohup java -Xms512M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=1024M -Xmx4096M -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/hubuser/projects/cruise -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=9054 -Dnet.tstllc.rmi.agent.port=9104 -javaagent:/opt/tst/jmx/jmx-agent.jar -jar /home/hubuser/projects/sbt-launch.jar 'project cruise-web' ';compile;run -Dhttp.port=9004 -Dap.credentials.file=/home/hubuser/projects/credentials.cfg -Dap.config.file=/home/hubuser/projects/app.cfg -Dlogger.file=/home/hubuser/projects/cruise/cruise-logback.xml' &amp;&gt;&gt; /home/hubuser/projects/cruise/console.log &amp;\"\n</code></pre>\n\n<p>However, run this way the sbt main thread goes crazy. Here's how I came to that conclusion. I have not yet dug into the sbt codebase, but my blind stab in the dark is that screwing with signals and the shell like this somehow causes bizarre behavior. Any sbt devs have a better educated guess?</p>\n\n<p>1) last lines in the console.log, pretty standard stuff.</p>\n\n<p>--- (Running the application from SBT, auto-reloading is enabled) ---</p>\n\n<p>(Server started, use Ctrl+D to stop and go back to the console...)</p>\n\n<p>2) top showing processes, nothing is happening but the cpu load never goes away.</p>\n\n<p><strong>PID</strong> USER      PR  NI  VIRT  RES  SHR S <strong>%CPU</strong> %MEM    TIME+  <strong>COMMAND</strong></p>\n\n<p><strong>14037</strong> hubuser   20   0 8540m 1.6g  25m S <strong>100.0</strong> 10.5   3:39.94 <strong>java</strong></p>\n\n<p>3) top showing native threads from the same run.</p>\n\n<p><strong>PID</strong> USER      PR  NI  VIRT  RES  SHR S <strong>%CPU</strong> %MEM    TIME+  <strong>COMMAND</strong></p>\n\n<p><strong>14044</strong> hubuser   20   0 8540m 1.6g  25m R <strong>100.0</strong> 10.5  15:14.45 <strong>java</strong></p>\n\n<p>4) finally, the salient part of the thread dump. 0x36dc = 14044</p>\n\n<pre><code>kill -3 14037\n\n\"main\" prio=10 tid=0x00007fdbb400a800 nid=0x36dc runnable [0x00007fdbbaf76000]\n   java.lang.Thread.State: RUNNABLE\n    at java.io.FileInputStream.read0(Native Method)\n    at java.io.FileInputStream.read(FileInputStream.java:210)\n    at jline.Terminal.readCharacter(Terminal.java:99)\n    at jline.UnixTerminal.readVirtualKey(UnixTerminal.java:122)\n    at jline.ConsoleReader.readVirtualKey(ConsoleReader.java:1606)\n    at play.PlayConsoleInteractionMode$.waitEOF$1(PlayInteractionMode.scala:29)\n    at play.PlayConsoleInteractionMode$$anonfun$waitForKey$1.apply$mcV$sp(PlayInteractionMode.scala:36)\n    at play.PlayConsoleInteractionMode$.doWithoutEcho(PlayInteractionMode.scala:41)\n    at play.PlayConsoleInteractionMode$.waitForKey(PlayInteractionMode.scala:36)\n    at play.PlayConsoleInteractionMode$.waitForCancel(PlayInteractionMode.scala:45)\n    at sbt.PlayCommands$$anonfun$createPlayRunCommand$1$$anonfun$57.apply(PlayCommands.scala:671)\n    at sbt.PlayCommands$$anonfun$createPlayRunCommand$1$$anonfun$57.apply(PlayCommands.scala:523)\n    at scala.Either$RightProjection.map(Either.scala:533)\n    at sbt.PlayCommands$$anonfun$createPlayRunCommand$1.apply(PlayCommands.scala:523)\n    at sbt.PlayCommands$$anonfun$createPlayRunCommand$1.apply(PlayCommands.scala:497)\n    at sbt.Command$$anonfun$sbt$Command$$apply1$1$$anonfun$apply$6.apply(Command.scala:72)\n    at sbt.Command$.process(Command.scala:90)\n    at sbt.MainLoop$$anonfun$next$1$$anonfun$apply$1.apply(MainLoop.scala:71)\n    at sbt.MainLoop$$anonfun$next$1$$anonfun$apply$1.apply(MainLoop.scala:71)\n    at sbt.State$$anon$2.process(State.scala:171)\n    at sbt.MainLoop$$anonfun$next$1.apply(MainLoop.scala:71)\n    at sbt.MainLoop$$anonfun$next$1.apply(MainLoop.scala:71)\n    at sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:18)\n    at sbt.MainLoop$.next(MainLoop.scala:71)\n    at sbt.MainLoop$.run(MainLoop.scala:64)\n    at sbt.MainLoop$$anonfun$runWithNewLog$1.apply(MainLoop.scala:53)\n    at sbt.MainLoop$$anonfun$runWithNewLog$1.apply(MainLoop.scala:50)\n    at sbt.Using.apply(Using.scala:25)\n    at sbt.MainLoop$.runWithNewLog(MainLoop.scala:50)\n    at sbt.MainLoop$.runAndClearLast(MainLoop.scala:33)\n    at sbt.MainLoop$.runLoggedLoop(MainLoop.scala:17)\n    at sbt.MainLoop$.runLogged(MainLoop.scala:13)\n    at sbt.xMain.run(Main.scala:26)\n    at xsbt.boot.Launch$$anonfun$run$1.apply(Launch.scala:57)\n    at xsbt.boot.Launch$.withContextLoader(Launch.scala:77)\n    at xsbt.boot.Launch$.run(Launch.scala:57)\n    at xsbt.boot.Launch$$anonfun$explicit$1.apply(Launch.scala:45)\n    at xsbt.boot.Launch$.launch(Launch.scala:65)\n    at xsbt.boot.Launch$.apply(Launch.scala:16)\n    at xsbt.boot.Boot$.runImpl(Boot.scala:32)\n    at xsbt.boot.Boot$.main(Boot.scala:21)\n    at xsbt.boot.Boot.main(Boot.scala)\n</code></pre>\n"},{"tags":["java","record","z3","type-parameter"],"answers":[{"tags":[],"owner":{"account_id":899912,"reputation":28525,"user_id":936310,"accept_rate":100,"display_name":"alias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683300370,"creation_date":1683300370,"answer_id":76183759,"question_id":76183642,"body_markdown":"z3 API&#39;s (whether it&#39;s C/C++/Java/Python) don&#39;t allow for creation of parameterized types.\r\n\r\nNote that parameterized-types are essentially a nicety in SMTLib: Essentially, each instantiation with different sorts will be a separate type of its own, with nothing to do with each other. So, the idea is to do this on your own: Write a function that takes the relevant sorts, and creates the corresponding &quot;monomorphized&quot; type on the fly. You&#39;ll have to change the accessor names slightly each time to avoid clashes, or you can add enough type-annotations to let the solver figure out the relevant types. (I&#39;d go with the former as it is simpler, but latter is definitely possible too.)","title":"How to declare datatypes with type parameters in Z3 Java API?","body":"<p>z3 API's (whether it's C/C++/Java/Python) don't allow for creation of parameterized types.</p>\n<p>Note that parameterized-types are essentially a nicety in SMTLib: Essentially, each instantiation with different sorts will be a separate type of its own, with nothing to do with each other. So, the idea is to do this on your own: Write a function that takes the relevant sorts, and creates the corresponding &quot;monomorphized&quot; type on the fly. You'll have to change the accessor names slightly each time to avoid clashes, or you can add enough type-annotations to let the solver figure out the relevant types. (I'd go with the former as it is simpler, but latter is definitely possible too.)</p>\n"}],"owner":{"account_id":22425986,"reputation":23,"user_id":16632588,"display_name":"mkoe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76183759,"answer_count":1,"score":2,"last_activity_date":1683300370,"creation_date":1683299535,"question_id":76183642,"body_markdown":"With Z3 it is possible to declare custom datatypes (i.e., records) that take type parameters. For example, a `Pair` that takes the types `T1` and `T2` for its first and second element respectively, is declared as follows (taken from the [Z3 Guide](https://microsoft.github.io/z3guide/docs/theories/Datatypes/)):\r\n\r\n```\r\n(declare-datatypes (T1 T2) ((Pair (mk-pair (first T1) (second T2)))))\r\n```\r\n\r\nThis type declaration can then be used to create pairs with different element types. For example, the constants `p1` and `p2` are both pairs with different element types (`Int String` and `Bool Int` respectively):\r\n\r\n```\r\n(declare-const p1 (Pair Int String))\r\n(declare-const p2 (Pair Bool Int))\r\n```\r\n\r\nI want to declare such a parametrized datatype using Z3&#39;s [Java API](https://github.com/Z3Prover/z3/blob/master/examples/java/JavaExample.java). However, the datatype declarations there seem to not have a feature to add type parameters to datatype declarations.\r\n\r\nThe Java API of Z3 does provide a method `mkDatatypeSort` in its `Context` class to declare a new datatype in Z3 ([Link](https://z3prover.github.io/api/html/classcom_1_1microsoft_1_1z3_1_1_context.html#ae53d8b6d95db6cecd53e9fe25deefb70)). However, this method does not take any arguments for type parameters. Also the constructors (taken as second argument of `mkDatatypeSort`) do not allow to define type parameters.\r\n\r\nI expected that it is possible to declare datatypes with type parameters in Z3&#39;s Java API, but I am not able to do so.  Am I missing something or does this feature just not exist in the Java API?\r\n\r\nIs it possible to declare such datatypes with the Java API?","title":"How to declare datatypes with type parameters in Z3 Java API?","body":"<p>With Z3 it is possible to declare custom datatypes (i.e., records) that take type parameters. For example, a <code>Pair</code> that takes the types <code>T1</code> and <code>T2</code> for its first and second element respectively, is declared as follows (taken from the <a href=\"https://microsoft.github.io/z3guide/docs/theories/Datatypes/\" rel=\"nofollow noreferrer\">Z3 Guide</a>):</p>\n<pre><code>(declare-datatypes (T1 T2) ((Pair (mk-pair (first T1) (second T2)))))\n</code></pre>\n<p>This type declaration can then be used to create pairs with different element types. For example, the constants <code>p1</code> and <code>p2</code> are both pairs with different element types (<code>Int String</code> and <code>Bool Int</code> respectively):</p>\n<pre><code>(declare-const p1 (Pair Int String))\n(declare-const p2 (Pair Bool Int))\n</code></pre>\n<p>I want to declare such a parametrized datatype using Z3's <a href=\"https://github.com/Z3Prover/z3/blob/master/examples/java/JavaExample.java\" rel=\"nofollow noreferrer\">Java API</a>. However, the datatype declarations there seem to not have a feature to add type parameters to datatype declarations.</p>\n<p>The Java API of Z3 does provide a method <code>mkDatatypeSort</code> in its <code>Context</code> class to declare a new datatype in Z3 (<a href=\"https://z3prover.github.io/api/html/classcom_1_1microsoft_1_1z3_1_1_context.html#ae53d8b6d95db6cecd53e9fe25deefb70\" rel=\"nofollow noreferrer\">Link</a>). However, this method does not take any arguments for type parameters. Also the constructors (taken as second argument of <code>mkDatatypeSort</code>) do not allow to define type parameters.</p>\n<p>I expected that it is possible to declare datatypes with type parameters in Z3's Java API, but I am not able to do so.  Am I missing something or does this feature just not exist in the Java API?</p>\n<p>Is it possible to declare such datatypes with the Java API?</p>\n"},{"tags":["java","json","jackson","gson","jackson-databind"],"comments":[{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1683300217,"post_id":76183651,"comment_id":134350680,"body_markdown":"Will you please add to your code example? I get the general idea, but I cannot copy/paste it and run it myself in its current state. Please add enough to your code so I can do that.","body":"Will you please add to your code example? I get the general idea, but I cannot copy/paste it and run it myself in its current state. Please add enough to your code so I can do that."},{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":0,"creation_date":1683300312,"post_id":76183651,"comment_id":134350702,"body_markdown":"you need to post a [mcve]","body":"you need to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}],"answers":[{"tags":[],"owner":{"account_id":204659,"reputation":37539,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683300299,"creation_date":1683300299,"answer_id":76183744,"question_id":76183651,"body_markdown":"Long Answer\r\n-----------\r\nRead more about the Jackson library,\r\nit provides most functionality you will ever need\r\n(including the functionality that you have already identified).\r\nHere is a [Baeldung Jackson Article][1].\r\n\r\nShort Answer\r\n------------\r\nUse the `@JsonProperty` annotation to identify the JSON field name.\r\n\r\n\r\n[1]:https://www.baeldung.com/jackson","title":"Convert json to Class","body":"<h2>Long Answer</h2>\n<p>Read more about the Jackson library,\nit provides most functionality you will ever need\n(including the functionality that you have already identified).\nHere is a <a href=\"https://www.baeldung.com/jackson\" rel=\"nofollow noreferrer\">Baeldung Jackson Article</a>.</p>\n<h2>Short Answer</h2>\n<p>Use the <code>@JsonProperty</code> annotation to identify the JSON field name.</p>\n"}],"owner":{"account_id":7078395,"reputation":1,"user_id":5417619,"display_name":"ankit patil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1683570986,"answer_count":1,"score":-2,"last_activity_date":1683300299,"creation_date":1683299622,"question_id":76183651,"body_markdown":"I have a class with a data member defined with a @SerializedName annotation (see below).\r\n```\r\npublic static final String SERIALIZED_NAME_ENGINE_ID = &quot;engine_id&quot;;\r\n  @SerializedName(SERIALIZED_NAME_ENGINE_ID)\r\n  private String engineId;\r\n```\r\n\r\nI want to map JSON to the class.\r\nI tried using the Jackson library,\r\nbut my code gives error saying &quot;engine_id&quot; not found.\r\nIt expects &quot;engineId&quot; in the JSON instead of &quot;engine_id&quot;.\r\n\r\n```\r\nString json = &quot;{\\&quot;engine_id\\&quot;: \\&quot;Test\\&quot;}&quot;;\r\nObjectMapper mapper = new ObjectMapper();\r\nCustomClass sample = mapper.readValue(fsjson\r\n        CustomClass.class);`\r\n```\r\n\r\nIs there a way to map the SerializedName from the Json?\r\nI am open to using GSON if it has the required capability.","title":"Convert json to Class","body":"<p>I have a class with a data member defined with a @SerializedName annotation (see below).</p>\n<pre><code>public static final String SERIALIZED_NAME_ENGINE_ID = &quot;engine_id&quot;;\n  @SerializedName(SERIALIZED_NAME_ENGINE_ID)\n  private String engineId;\n</code></pre>\n<p>I want to map JSON to the class.\nI tried using the Jackson library,\nbut my code gives error saying &quot;engine_id&quot; not found.\nIt expects &quot;engineId&quot; in the JSON instead of &quot;engine_id&quot;.</p>\n<pre><code>String json = &quot;{\\&quot;engine_id\\&quot;: \\&quot;Test\\&quot;}&quot;;\nObjectMapper mapper = new ObjectMapper();\nCustomClass sample = mapper.readValue(fsjson\n        CustomClass.class);`\n</code></pre>\n<p>Is there a way to map the SerializedName from the Json?\nI am open to using GSON if it has the required capability.</p>\n"},{"tags":["java","android","pdf"],"answers":[{"tags":[],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683300241,"creation_date":1683300241,"answer_id":76183734,"question_id":76177407,"body_markdown":"Are you sure the file you are trying to open exists in the path? probably on line         \r\n\r\n&gt; InputStream inputStream = new FileInputStream(pdfFilePath);\r\n\r\nthe file named pdfFilePath does not exists.","title":"open failed: ENOENT (No such file or directory) pdf file is not opening","body":"<p>Are you sure the file you are trying to open exists in the path? probably on line</p>\n<blockquote>\n<p>InputStream inputStream = new FileInputStream(pdfFilePath);</p>\n</blockquote>\n<p>the file named pdfFilePath does not exists.</p>\n"}],"owner":{"account_id":18471408,"reputation":5,"user_id":13456203,"display_name":"THE Anonymous"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683300241,"creation_date":1683234950,"question_id":76177407,"body_markdown":"i am trying to make an app which edit pdf and then save it in my phone storage  but the code i write is not working whrn am i trying to open a pdf file it shows open failed: ENOENT (No such file or directory) error \r\n\r\n\r\n \r\n**mainActivity.java**\r\n\r\n       package com.example.pdfeditor;\r\n       import android.app.Activity;\r\n       import android.content.Intent;\r\n       import android.database.Cursor;\r\n       import android.net.Uri;\r\n       import android.os.Bundle;\r\n       import android.provider.MediaStore;\r\n       import android.view.View;\r\n       import android.widget.Button;\r\n       import android.widget.Toast;\r\n\r\n       import androidx.annotation.Nullable;\r\n       import androidx.appcompat.app.AppCompatActivity;\r\n\r\n       import com.itextpdf.text.Document;\r\n       import com.itextpdf.text.DocumentException;\r\n       import com.itextpdf.text.Font;\r\n       import com.itextpdf.text.Paragraph;\r\n       import com.itextpdf.text.pdf.BaseFont;\r\n       import com.itextpdf.text.pdf.PdfWriter;\r\n\r\n       import java.io.FileInputStream;\r\n       import java.io.FileOutputStream;\r\n       import java.io.IOException;\r\n       import java.io.InputStream;\r\n      public class MainActivity extends AppCompatActivity {\r\n\r\n      private static final int REQUEST_CODE_PICK_PDF = 1;\r\n      private String pdfFilePath;\r\n\r\n     @Override\r\n     protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        Button pickPdfButton = findViewById(R.id.btn);\r\n        pickPdfButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\r\n                intent.setType(&quot;application/pdf&quot;);\r\n                startActivityForResult(intent, REQUEST_CODE_PICK_PDF);\r\n            }\r\n        });\r\n     }\r\n\r\n     @Override\r\n     protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == REQUEST_CODE_PICK_PDF &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) \r\n       {\r\n            Uri uri = data.getData();\r\n            if (uri != null) {\r\n                pdfFilePath = getPathFromUri(uri);\r\n                openPdfFile();\r\n            }\r\n        }\r\n      }\r\n\r\n      private String getPathFromUri(Uri uri) {\r\n        String filePath;\r\n        Cursor cursor = getContentResolver().query(uri, null, null, null, null);\r\n        if (cursor == null) {\r\n            filePath = uri.getPath();\r\n        } else {\r\n            cursor.moveToFirst();\r\n            int index = cursor.getColumnIndex(MediaStore.Images.Media.DISPLAY_NAME);\r\n            filePath = cursor.getString(index);\r\n            cursor.close();\r\n         }\r\n         return filePath;\r\n     }\r\n\r\n     private void openPdfFile() {\r\n        try {\r\n            // Create input stream from file path\r\n            InputStream inputStream = new FileInputStream(pdfFilePath);\r\n\r\n            // Create a new PDF document\r\n            Document document = new Document();\r\n\r\n            // Set the output file path and create a new FileOutputStream\r\n            String outputPath = pdfFilePath.replace(&quot;.pdf&quot;, &quot;_edited.pdf&quot;);\r\n            FileOutputStream outputStream = new FileOutputStream(outputPath);\r\n\r\n            // Create a new PdfWriter instance\r\n            PdfWriter writer = PdfWriter.getInstance(document, outputStream);\r\n\r\n            // Open the document\r\n            document.open();\r\n\r\n            // Add text to document\r\n            Font font = new Font(BaseFont.createFont(&quot;assets/fonts/arial.ttf&quot;, \r\n         BaseFont.IDENTITY_H, BaseFont.EMBEDDED), 12);\r\n            Paragraph p = new Paragraph(&quot;This is a test PDF file.&quot;, font);\r\n            document.add(p);\r\n\r\n            // Close the document\r\n            document.close();\r\n\r\n            // Close the writer\r\n            writer.close();\r\n\r\n            // Show a toast message to indicate that the PDF file has been saved\r\n            Toast.makeText(this, &quot;PDF file saved at &quot; + outputPath, \r\n       Toast.LENGTH_LONG).show();\r\n\r\n        } catch (Exception e) {\r\n              e.printStackTrace();\r\n              Toast.makeText(this, &quot;Error: &quot; + e.getMessage(), Toast.LENGTH_LONG).show();\r\n           }\r\n        }\r\n    }\r\n \r\n\r\n\r\n**activity_main.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n       &lt;Button\r\n        android:id=&quot;@+id/btn&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;Pick PDF file&quot;\r\n        android:layout_centerInParent=&quot;true&quot; /&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n\r\n**error**\r\n\r\n&gt; W/System.err: java.io.FileNotFoundException: coa 2.1.pdf: open failed:\r\n&gt; ENOENT (No such file or directory) W/System.err:     at\r\n&gt; libcore.io.IoBridge.open(IoBridge.java:574) W/System.err:     at\r\n&gt; java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:160) W/System.err:\r\n&gt; at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:115)\r\n&gt; W/System.err:     at\r\n&gt; com.example.pdfeditor.MainActivity.openPdfFile(MainActivity.java:76)\r\n&gt; W/System.err:     at\r\n&gt; com.example.pdfeditor.MainActivity.onActivityResult(MainActivity.java:54)\r\n&gt; W/System.err:     at\r\n&gt; android.app.Activity.dispatchActivityResult(Activity.java:8951)\r\n&gt; W/System.err:     at\r\n&gt; android.app.ActivityThread.deliverResults(ActivityThread.java:5987)\r\n&gt; W/System.err:     at\r\n&gt; android.app.ActivityThread.handleSendResult(ActivityThread.java:6033)\r\n&gt; W/System.err:     at\r\n&gt; android.app.servertransaction.ActivityResultItem.execute(ActivityResultItem.java:67)\r\n&gt; W/System.err:     at\r\n&gt; android.app.servertransaction.ActivityTransactionItem.execute(ActivityTransactionItem.java:45)\r\n&gt; W/System.err:     at\r\n&gt; android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n&gt; W/System.err:     at\r\n&gt; android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n&gt; W/System.err:     at\r\n&gt; android.app.ActivityThread$H.handleMessage(ActivityThread.java:2574)\r\n&gt; W/System.err:     at\r\n&gt; android.os.Handler.dispatchMessage(Handler.java:106) W/System.err:    \r\n&gt; at android.os.Looper.loopOnce(Looper.java:226) W/System.err:     at\r\n&gt; android.os.Looper.loop(Looper.java:313) W/System.err:     at\r\n&gt; android.app.ActivityThread.main(ActivityThread.java:8757)\r\n&gt; W/System.err:     at java.lang.reflect.Method.invoke(Native Method)\r\n&gt; W/System.err:     at\r\n&gt; com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:571)\r\n&gt; W/System.err:     at\r\n&gt; com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1067)\r\n&gt; W/System.err: Caused by: android.system.ErrnoException: open failed:\r\n&gt; ENOENT (No such file or directory) W/System.err:     at\r\n&gt; libcore.io.Linux.open(Native Method) W/System.err:     at\r\n&gt; libcore.io.ForwardingOs.open(ForwardingOs.java:563) W/System.err:    \r\n&gt; at libcore.io.BlockGuardOs.open(BlockGuardOs.java:274) W/System.err:  \r\n&gt; at libcore.io.ForwardingOs.open(ForwardingOs.java:563) W/System.err:  \r\n&gt; at android.app.ActivityThread$AndroidOs.open(ActivityThread.java:8619)\r\n&gt; W/System.err:     at libcore.io.IoBridge.open(IoBridge.java:560)\r\n&gt; W/System.err: \t... 19 more V/Toast: show: caller =\r\n&gt; com.example.pdfeditor.MainActivity.openPdfFile:107 \r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: stopped(false) old = false\r\n&gt; I/MSHandlerLifeCycle: removeMultiSplitHandler: no exist.\r\n&gt; decor=DecorView@ce3e02e[MainActivity]\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: performTraversals mFirst=false\r\n&gt; windowShouldResize=false viewVisibilityChanged=true\r\n&gt; mForceNextWindowRelayout=false params=null\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: updateBlastSurfaceIfNeeded\r\n&gt; mBlastBufferQueue=null isSameSurfaceControl=false I/BLASTBufferQueue:\r\n&gt; new BLASTBufferQueue, mName= ViewRootImpl@dcac326[MainActivity]\r\n&gt; mNativeObject= 0xb400007c12641330 sc.mNativeObject= 0xb400007ba265c640\r\n&gt; caller= android.view.ViewRootImpl.updateBlastSurfaceIfNeeded:2909\r\n&gt; android.view.ViewRootImpl.relayoutWindow:9847\r\n&gt; android.view.ViewRootImpl.performTraversals:3884\r\n&gt; android.view.ViewRootImpl.doTraversal:3116\r\n&gt; android.view.ViewRootImpl$TraversalRunnable.run:10885\r\n&gt; android.view.Choreographer$CallbackRecord.run:1301\r\n&gt; android.view.Choreographer$CallbackRecord.run:1309\r\n&gt; android.view.Choreographer.doCallbacks:923\r\n&gt; android.view.Choreographer.doFrame:852\r\n&gt; android.view.Choreographer$FrameDisplayEventReceiver.run:1283 \r\n&gt; I/BLASTBufferQueue: update, w= 1080 h= 2408 mName =\r\n&gt; ViewRootImpl@dcac326[MainActivity] mNativeObject= 0xb400007c12641330\r\n&gt; sc.mNativeObject= 0xb400007ba265c640 format= -1 caller=\r\n&gt; android.graphics.BLASTBufferQueue.&lt;init&gt;:84\r\n&gt; android.view.ViewRootImpl.updateBlastSurfaceIfNeeded:2909\r\n&gt; android.view.ViewRootImpl.relayoutWindow:9847\r\n&gt; android.view.ViewRootImpl.performTraversals:3884\r\n&gt; android.view.ViewRootImpl.doTraversal:3116\r\n&gt; android.view.ViewRootImpl$TraversalRunnable.run:10885 \r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: Relayout returned:\r\n&gt; old=(0,0,1080,2408) new=(0,0,1080,2408) req=(1080,2408)0 dur=12\r\n&gt; res=0x3 s={true 0xb400007ca263d4b0} ch=true seqId=0\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: mThreadedRenderer.initialize()\r\n&gt; mSurface={isValid=true 0xb400007ca263d4b0} hwInitialized=true\r\n&gt; D/OpenGLRenderer: eglCreateWindowSurface\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: reportNextDraw\r\n&gt; android.view.ViewRootImpl.performTraversals:4438\r\n&gt; android.view.ViewRootImpl.doTraversal:3116\r\n&gt; android.view.ViewRootImpl$TraversalRunnable.run:10885\r\n&gt; android.view.Choreographer$CallbackRecord.run:1301\r\n&gt; android.view.Choreographer$CallbackRecord.run:1309 \r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: Setup new sync id=6\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: Setting syncFrameCallback\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: registerCallbacksForSync\r\n&gt; syncBuffer=false I/ViewRootImpl@dcac326[MainActivity]: Received\r\n&gt; frameDrawingCallback syncResult=0 frameNum=1.\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: Setting up sync and\r\n&gt; frameCommitCallback I/BLASTBufferQueue:\r\n&gt; [ViewRootImpl@dcac326[MainActivity]#5](f:0,a:0) onFrameAvailable the\r\n&gt; first frame is available I/ViewRootImpl@dcac326[MainActivity]:\r\n&gt; Received frameCommittedCallback lastAttemptedDrawFrameNum=1\r\n&gt; didProduceBuffer=true I/ViewRootImpl@dcac326[MainActivity]:\r\n&gt; onSyncComplete I/ViewRootImpl@dcac326[MainActivity]: setupSync seqId=0\r\n&gt; mSyncId=6 fn=1\r\n&gt; caller=android.view.ViewRootImpl$$ExternalSyntheticLambda11.accept:6\r\n&gt; android.window.SurfaceSyncer.lambda$setupSync$1$android-window-SurfaceSyncer:128\r\n&gt; android.window.SurfaceSyncer$$ExternalSyntheticLambda1.accept:8\r\n&gt; android.window.SurfaceSyncer$SyncSet.checkIfSyncIsComplete:382\r\n&gt; android.window.SurfaceSyncer$SyncSet.markSyncReady:359\r\n&gt; android.window.SurfaceSyncer.markSyncReady:151\r\n&gt; android.view.ViewRootImpl.performTraversals:4503 \r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: reportDrawFinished seqId=0\r\n&gt; mSyncId=-1 fn=1 mSurfaceChangedTransaction=0xb400007bd2631590\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: MSG_WINDOW_FOCUS_CHANGED 1 0\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]:\r\n&gt; mThreadedRenderer.initializeIfNeeded()#2 mSurface={isValid=true\r\n&gt; 0xb400007ca263d4b0} D/InputMethodManager: startInputInner - Id : 0\r\n&gt; I/InputMethodManager: startInputInner -\r\n&gt; mService.startInputOrWindowGainedFocus\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: handleAppVisibility mAppVisible\r\n&gt; = true visible = false D/OpenGLRenderer: setSurface called with nullptr D/OpenGLRenderer: setSurface() destroyed EGLSurface\r\n&gt; D/OpenGLRenderer: destroyEglSurface\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: performTraversals mFirst=false\r\n&gt; windowShouldResize=false viewVisibilityChanged=true\r\n&gt; mForceNextWindowRelayout=false params=null\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: Relayout returned:\r\n&gt; old=(0,0,1080,2408) new=(0,0,1080,2408) req=(1080,2408)8 dur=16\r\n&gt; res=0x2 s={false 0x0} ch=true seqId=0\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: stopped(true) old = false\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: WindowStopped on\r\n&gt; com.example.pdfeditor/com.example.pdfeditor.MainActivity set to true\r\n&gt; I/MSHandlerLifeCycle: removeMultiSplitHandler: no exist.\r\n&gt; decor=DecorView@ce3e02e[MainActivity]\r\n&gt; I/ViewRootImpl@dcac326[MainActivity]: MSG_WINDOW_FOCUS_CHANGED 0 0\r\n\r\n\r\n\r\n","title":"open failed: ENOENT (No such file or directory) pdf file is not opening","body":"<p>i am trying to make an app which edit pdf and then save it in my phone storage  but the code i write is not working whrn am i trying to open a pdf file it shows open failed: ENOENT (No such file or directory) error</p>\n<p><strong>mainActivity.java</strong></p>\n<pre><code>   package com.example.pdfeditor;\n   import android.app.Activity;\n   import android.content.Intent;\n   import android.database.Cursor;\n   import android.net.Uri;\n   import android.os.Bundle;\n   import android.provider.MediaStore;\n   import android.view.View;\n   import android.widget.Button;\n   import android.widget.Toast;\n\n   import androidx.annotation.Nullable;\n   import androidx.appcompat.app.AppCompatActivity;\n\n   import com.itextpdf.text.Document;\n   import com.itextpdf.text.DocumentException;\n   import com.itextpdf.text.Font;\n   import com.itextpdf.text.Paragraph;\n   import com.itextpdf.text.pdf.BaseFont;\n   import com.itextpdf.text.pdf.PdfWriter;\n\n   import java.io.FileInputStream;\n   import java.io.FileOutputStream;\n   import java.io.IOException;\n   import java.io.InputStream;\n  public class MainActivity extends AppCompatActivity {\n\n  private static final int REQUEST_CODE_PICK_PDF = 1;\n  private String pdfFilePath;\n\n @Override\n protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    Button pickPdfButton = findViewById(R.id.btn);\n    pickPdfButton.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\n            intent.setType(&quot;application/pdf&quot;);\n            startActivityForResult(intent, REQUEST_CODE_PICK_PDF);\n        }\n    });\n }\n\n @Override\n protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    if (requestCode == REQUEST_CODE_PICK_PDF &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) \n   {\n        Uri uri = data.getData();\n        if (uri != null) {\n            pdfFilePath = getPathFromUri(uri);\n            openPdfFile();\n        }\n    }\n  }\n\n  private String getPathFromUri(Uri uri) {\n    String filePath;\n    Cursor cursor = getContentResolver().query(uri, null, null, null, null);\n    if (cursor == null) {\n        filePath = uri.getPath();\n    } else {\n        cursor.moveToFirst();\n        int index = cursor.getColumnIndex(MediaStore.Images.Media.DISPLAY_NAME);\n        filePath = cursor.getString(index);\n        cursor.close();\n     }\n     return filePath;\n }\n\n private void openPdfFile() {\n    try {\n        // Create input stream from file path\n        InputStream inputStream = new FileInputStream(pdfFilePath);\n\n        // Create a new PDF document\n        Document document = new Document();\n\n        // Set the output file path and create a new FileOutputStream\n        String outputPath = pdfFilePath.replace(&quot;.pdf&quot;, &quot;_edited.pdf&quot;);\n        FileOutputStream outputStream = new FileOutputStream(outputPath);\n\n        // Create a new PdfWriter instance\n        PdfWriter writer = PdfWriter.getInstance(document, outputStream);\n\n        // Open the document\n        document.open();\n\n        // Add text to document\n        Font font = new Font(BaseFont.createFont(&quot;assets/fonts/arial.ttf&quot;, \n     BaseFont.IDENTITY_H, BaseFont.EMBEDDED), 12);\n        Paragraph p = new Paragraph(&quot;This is a test PDF file.&quot;, font);\n        document.add(p);\n\n        // Close the document\n        document.close();\n\n        // Close the writer\n        writer.close();\n\n        // Show a toast message to indicate that the PDF file has been saved\n        Toast.makeText(this, &quot;PDF file saved at &quot; + outputPath, \n   Toast.LENGTH_LONG).show();\n\n    } catch (Exception e) {\n          e.printStackTrace();\n          Toast.makeText(this, &quot;Error: &quot; + e.getMessage(), Toast.LENGTH_LONG).show();\n       }\n    }\n}\n</code></pre>\n<p><strong>activity_main.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\ntools:context=&quot;.MainActivity&quot;&gt;\n\n   &lt;Button\n    android:id=&quot;@+id/btn&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:text=&quot;Pick PDF file&quot;\n    android:layout_centerInParent=&quot;true&quot; /&gt;\n</code></pre>\n\n<p><strong>error</strong></p>\n<blockquote>\n<p>W/System.err: java.io.FileNotFoundException: coa 2.1.pdf: open failed:\nENOENT (No such file or directory) W/System.err:     at\nlibcore.io.IoBridge.open(IoBridge.java:574) W/System.err:     at\njava.io.FileInputStream.(FileInputStream.java:160) W/System.err:\nat java.io.FileInputStream.(FileInputStream.java:115)\nW/System.err:     at\ncom.example.pdfeditor.MainActivity.openPdfFile(MainActivity.java:76)\nW/System.err:     at\ncom.example.pdfeditor.MainActivity.onActivityResult(MainActivity.java:54)\nW/System.err:     at\nandroid.app.Activity.dispatchActivityResult(Activity.java:8951)\nW/System.err:     at\nandroid.app.ActivityThread.deliverResults(ActivityThread.java:5987)\nW/System.err:     at\nandroid.app.ActivityThread.handleSendResult(ActivityThread.java:6033)\nW/System.err:     at\nandroid.app.servertransaction.ActivityResultItem.execute(ActivityResultItem.java:67)\nW/System.err:     at\nandroid.app.servertransaction.ActivityTransactionItem.execute(ActivityTransactionItem.java:45)\nW/System.err:     at\nandroid.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\nW/System.err:     at\nandroid.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\nW/System.err:     at\nandroid.app.ActivityThread$H.handleMessage(ActivityThread.java:2574)\nW/System.err:     at\nandroid.os.Handler.dispatchMessage(Handler.java:106) W/System.err:<br />\nat android.os.Looper.loopOnce(Looper.java:226) W/System.err:     at\nandroid.os.Looper.loop(Looper.java:313) W/System.err:     at\nandroid.app.ActivityThread.main(ActivityThread.java:8757)\nW/System.err:     at java.lang.reflect.Method.invoke(Native Method)\nW/System.err:     at\ncom.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:571)\nW/System.err:     at\ncom.android.internal.os.ZygoteInit.main(ZygoteInit.java:1067)\nW/System.err: Caused by: android.system.ErrnoException: open failed:\nENOENT (No such file or directory) W/System.err:     at\nlibcore.io.Linux.open(Native Method) W/System.err:     at\nlibcore.io.ForwardingOs.open(ForwardingOs.java:563) W/System.err:<br />\nat libcore.io.BlockGuardOs.open(BlockGuardOs.java:274) W/System.err:<br />\nat libcore.io.ForwardingOs.open(ForwardingOs.java:563) W/System.err:<br />\nat android.app.ActivityThread$AndroidOs.open(ActivityThread.java:8619)\nW/System.err:     at libcore.io.IoBridge.open(IoBridge.java:560)\nW/System.err:     ... 19 more V/Toast: show: caller =\ncom.example.pdfeditor.MainActivity.openPdfFile:107\nI/ViewRootImpl@dcac326[MainActivity]: stopped(false) old = false\nI/MSHandlerLifeCycle: removeMultiSplitHandler: no exist.\ndecor=DecorView@ce3e02e[MainActivity]\nI/ViewRootImpl@dcac326[MainActivity]: performTraversals mFirst=false\nwindowShouldResize=false viewVisibilityChanged=true\nmForceNextWindowRelayout=false params=null\nI/ViewRootImpl@dcac326[MainActivity]: updateBlastSurfaceIfNeeded\nmBlastBufferQueue=null isSameSurfaceControl=false I/BLASTBufferQueue:\nnew BLASTBufferQueue, mName= ViewRootImpl@dcac326[MainActivity]\nmNativeObject= 0xb400007c12641330 sc.mNativeObject= 0xb400007ba265c640\ncaller= android.view.ViewRootImpl.updateBlastSurfaceIfNeeded:2909\nandroid.view.ViewRootImpl.relayoutWindow:9847\nandroid.view.ViewRootImpl.performTraversals:3884\nandroid.view.ViewRootImpl.doTraversal:3116\nandroid.view.ViewRootImpl$TraversalRunnable.run:10885\nandroid.view.Choreographer$CallbackRecord.run:1301\nandroid.view.Choreographer$CallbackRecord.run:1309\nandroid.view.Choreographer.doCallbacks:923\nandroid.view.Choreographer.doFrame:852\nandroid.view.Choreographer$FrameDisplayEventReceiver.run:1283\nI/BLASTBufferQueue: update, w= 1080 h= 2408 mName =\nViewRootImpl@dcac326[MainActivity] mNativeObject= 0xb400007c12641330\nsc.mNativeObject= 0xb400007ba265c640 format= -1 caller=\nandroid.graphics.BLASTBufferQueue.:84\nandroid.view.ViewRootImpl.updateBlastSurfaceIfNeeded:2909\nandroid.view.ViewRootImpl.relayoutWindow:9847\nandroid.view.ViewRootImpl.performTraversals:3884\nandroid.view.ViewRootImpl.doTraversal:3116\nandroid.view.ViewRootImpl$TraversalRunnable.run:10885\nI/ViewRootImpl@dcac326[MainActivity]: Relayout returned:\nold=(0,0,1080,2408) new=(0,0,1080,2408) req=(1080,2408)0 dur=12\nres=0x3 s={true 0xb400007ca263d4b0} ch=true seqId=0\nI/ViewRootImpl@dcac326[MainActivity]: mThreadedRenderer.initialize()\nmSurface={isValid=true 0xb400007ca263d4b0} hwInitialized=true\nD/OpenGLRenderer: eglCreateWindowSurface\nI/ViewRootImpl@dcac326[MainActivity]: reportNextDraw\nandroid.view.ViewRootImpl.performTraversals:4438\nandroid.view.ViewRootImpl.doTraversal:3116\nandroid.view.ViewRootImpl$TraversalRunnable.run:10885\nandroid.view.Choreographer$CallbackRecord.run:1301\nandroid.view.Choreographer$CallbackRecord.run:1309\nI/ViewRootImpl@dcac326[MainActivity]: Setup new sync id=6\nI/ViewRootImpl@dcac326[MainActivity]: Setting syncFrameCallback\nI/ViewRootImpl@dcac326[MainActivity]: registerCallbacksForSync\nsyncBuffer=false I/ViewRootImpl@dcac326[MainActivity]: Received\nframeDrawingCallback syncResult=0 frameNum=1.\nI/ViewRootImpl@dcac326[MainActivity]: Setting up sync and\nframeCommitCallback I/BLASTBufferQueue:\nViewRootImpl@dcac326[MainActivity]#5 onFrameAvailable the\nfirst frame is available I/ViewRootImpl@dcac326[MainActivity]:\nReceived frameCommittedCallback lastAttemptedDrawFrameNum=1\ndidProduceBuffer=true I/ViewRootImpl@dcac326[MainActivity]:\nonSyncComplete I/ViewRootImpl@dcac326[MainActivity]: setupSync seqId=0\nmSyncId=6 fn=1\ncaller=android.view.ViewRootImpl$$ExternalSyntheticLambda11.accept:6\nandroid.window.SurfaceSyncer.lambda$setupSync$1$android-window-SurfaceSyncer:128\nandroid.window.SurfaceSyncer$$ExternalSyntheticLambda1.accept:8\nandroid.window.SurfaceSyncer$SyncSet.checkIfSyncIsComplete:382\nandroid.window.SurfaceSyncer$SyncSet.markSyncReady:359\nandroid.window.SurfaceSyncer.markSyncReady:151\nandroid.view.ViewRootImpl.performTraversals:4503\nI/ViewRootImpl@dcac326[MainActivity]: reportDrawFinished seqId=0\nmSyncId=-1 fn=1 mSurfaceChangedTransaction=0xb400007bd2631590\nI/ViewRootImpl@dcac326[MainActivity]: MSG_WINDOW_FOCUS_CHANGED 1 0\nI/ViewRootImpl@dcac326[MainActivity]:\nmThreadedRenderer.initializeIfNeeded()#2 mSurface={isValid=true\n0xb400007ca263d4b0} D/InputMethodManager: startInputInner - Id : 0\nI/InputMethodManager: startInputInner -\nmService.startInputOrWindowGainedFocus\nI/ViewRootImpl@dcac326[MainActivity]: handleAppVisibility mAppVisible\n= true visible = false D/OpenGLRenderer: setSurface called with nullptr D/OpenGLRenderer: setSurface() destroyed EGLSurface\nD/OpenGLRenderer: destroyEglSurface\nI/ViewRootImpl@dcac326[MainActivity]: performTraversals mFirst=false\nwindowShouldResize=false viewVisibilityChanged=true\nmForceNextWindowRelayout=false params=null\nI/ViewRootImpl@dcac326[MainActivity]: Relayout returned:\nold=(0,0,1080,2408) new=(0,0,1080,2408) req=(1080,2408)8 dur=16\nres=0x2 s={false 0x0} ch=true seqId=0\nI/ViewRootImpl@dcac326[MainActivity]: stopped(true) old = false\nI/ViewRootImpl@dcac326[MainActivity]: WindowStopped on\ncom.example.pdfeditor/com.example.pdfeditor.MainActivity set to true\nI/MSHandlerLifeCycle: removeMultiSplitHandler: no exist.\ndecor=DecorView@ce3e02e[MainActivity]\nI/ViewRootImpl@dcac326[MainActivity]: MSG_WINDOW_FOCUS_CHANGED 0 0</p>\n</blockquote>\n"},{"tags":["java","spring","selenium-webdriver","automated-tests","cucumber"],"owner":{"account_id":13983796,"reputation":1158,"user_id":10099383,"display_name":"kivul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683299124,"creation_date":1683290931,"question_id":76182377,"body_markdown":"I&#39;m using spring, selenium and cucumber and I want to launch chrome in different languages for specific tests.\r\nThe issue that I have is that with spring my chromeDriver is a **@Bean**, so the spring context is initialized before the tests are and before any **@Before** tag that cucumber has.\r\n\r\nThis is my bean for chromeDriver:\r\n\r\n    @Bean(destroyMethod = &quot;quit&quot;)\r\n    @Scope(&quot;cucumber-glue&quot;)\r\n    @ConditionalOnProperty(name = &quot;browser&quot;, havingValue = &quot;chrome&quot;)\r\n    @Primary\r\n    public WebDriver chromeDriver() {\r\n        Map&lt;String, Object&gt; chromePrefs = new HashMap&lt;String, Object&gt;();\r\n        ChromeOptions chromeOptions = new ChromeOptions();\r\n    \r\n        chromePrefs.put(&quot;download.default_directory&quot;, downloadsPath);\r\n        chromePrefs.put(&quot;autofill.profile_enabled&quot;, false);\r\n    \r\n        chromeOptions.setExperimentalOption(&quot;prefs&quot;, chromePrefs);\r\n        chromeOptions.addArguments(&quot;start-maximized&quot;);\r\n    \r\n        WebDriverManager.chromedriver().setup();\r\n        return new ChromeDriver(chromeOptions);\r\n    }\r\n\r\nAnd I would like to pass the values like this in the feature files:\r\n\r\n    @Chrome_es_CA\r\n    Scenario: Test 1 in es_CA\r\n    \r\n    @Chrome_en_US\r\n    Scenario: Test 2 in en-US\r\n\r\nIf the way that I want to do it is not possible, what are the alternatives?\r\n\r\nI know that I could pass the language through applications.properties but that wouldn&#39;t be the ideal scenario, since I&#39;d like to have all tests ran in the same execution on jenkins.\r\n\r\nThanks in advance.","title":"How to run specific automation tests in different chrome languages","body":"<p>I'm using spring, selenium and cucumber and I want to launch chrome in different languages for specific tests.\nThe issue that I have is that with spring my chromeDriver is a <strong>@Bean</strong>, so the spring context is initialized before the tests are and before any <strong>@Before</strong> tag that cucumber has.</p>\n<p>This is my bean for chromeDriver:</p>\n<pre><code>@Bean(destroyMethod = &quot;quit&quot;)\n@Scope(&quot;cucumber-glue&quot;)\n@ConditionalOnProperty(name = &quot;browser&quot;, havingValue = &quot;chrome&quot;)\n@Primary\npublic WebDriver chromeDriver() {\n    Map&lt;String, Object&gt; chromePrefs = new HashMap&lt;String, Object&gt;();\n    ChromeOptions chromeOptions = new ChromeOptions();\n\n    chromePrefs.put(&quot;download.default_directory&quot;, downloadsPath);\n    chromePrefs.put(&quot;autofill.profile_enabled&quot;, false);\n\n    chromeOptions.setExperimentalOption(&quot;prefs&quot;, chromePrefs);\n    chromeOptions.addArguments(&quot;start-maximized&quot;);\n\n    WebDriverManager.chromedriver().setup();\n    return new ChromeDriver(chromeOptions);\n}\n</code></pre>\n<p>And I would like to pass the values like this in the feature files:</p>\n<pre><code>@Chrome_es_CA\nScenario: Test 1 in es_CA\n\n@Chrome_en_US\nScenario: Test 2 in en-US\n</code></pre>\n<p>If the way that I want to do it is not possible, what are the alternatives?</p>\n<p>I know that I could pass the language through applications.properties but that wouldn't be the ideal scenario, since I'd like to have all tests ran in the same execution on jenkins.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","maven","ibm-odm"],"owner":{"account_id":18536392,"reputation":13,"user_id":13505962,"display_name":"brenz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683298446,"creation_date":1683298446,"question_id":76183496,"body_markdown":"I am working with ODM Rule Designer 8.9.2.\r\nI want to install the maven plugin but are not able to due to connection error message.\r\n\r\n\r\nAs there is no marketplace in Rule Designer, I am trying to use the Install New Software function with the following site:\r\nhttp://download.Eclipse.org/technology/m2e/releases/latest\r\n\r\nI have tried to change the network setting options as some solutions suggest, but doesnt work.\r\nI have tried to amend the .ini file solution i found here on this site, but that just gives a different connection error then.\r\n\r\n[![The error message I get](https://i.stack.imgur.com/hzxDQ.png)](https://i.stack.imgur.com/hzxDQ.png)\r\n\r\nI have done a lot of searching and cannot find an answer to this, hoping someone out there has faced and solved this one!","title":"Rule Designer 8.9.2 error when trying to install maven plugin","body":"<p>I am working with ODM Rule Designer 8.9.2.\nI want to install the maven plugin but are not able to due to connection error message.</p>\n<p>As there is no marketplace in Rule Designer, I am trying to use the Install New Software function with the following site:\n<a href=\"http://download.Eclipse.org/technology/m2e/releases/latest\" rel=\"nofollow noreferrer\">http://download.Eclipse.org/technology/m2e/releases/latest</a></p>\n<p>I have tried to change the network setting options as some solutions suggest, but doesnt work.\nI have tried to amend the .ini file solution i found here on this site, but that just gives a different connection error then.</p>\n<p><a href=\"https://i.stack.imgur.com/hzxDQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hzxDQ.png\" alt=\"The error message I get\" /></a></p>\n<p>I have done a lot of searching and cannot find an answer to this, hoping someone out there has faced and solved this one!</p>\n"},{"tags":["java","wildfly","cdi","jboss-weld","wildfly-16"],"answers":[{"tags":[],"owner":{"account_id":7932983,"reputation":1434,"user_id":5990117,"display_name":"Petr Aleksandrov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1575275140,"creation_date":1575275140,"answer_id":59135010,"question_id":59134836,"body_markdown":"Can you update the field&#39;s type to be the CustomerAgreementDao interface?\r\n\r\n```java\r\n@Stateless\r\npublic class CustomerAgreementFetcher {\r\n\r\n    @Inject\r\n    public CustomerAgreementDao customerAgreementDao;\r\n```\r\n\r\nRelated topic: https://stackoverflow.com/questions/34411371/is-it-possible-to-inject-ejb-implementation-and-not-its-interface-using-cdi","title":"DeploymentException: WELD-001408: Unsatisfied dependencies for type &lt;Class&gt; with qualifiers @Default at injection point [BackedAnnotatedField]","body":"<p>Can you update the field's type to be the CustomerAgreementDao interface?</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Stateless\npublic class CustomerAgreementFetcher {\n\n    @Inject\n    public CustomerAgreementDao customerAgreementDao;\n</code></pre>\n\n<p>Related topic: <a href=\"https://stackoverflow.com/questions/34411371/is-it-possible-to-inject-ejb-implementation-and-not-its-interface-using-cdi\">Is it possible to inject EJB implementation and not its interface using CDI?</a></p>\n"}],"owner":{"account_id":1471077,"reputation":5601,"user_id":1382647,"accept_rate":43,"display_name":"fatherazrael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9668,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59135010,"answer_count":1,"score":1,"last_activity_date":1683298221,"creation_date":1575274317,"question_id":59134836,"body_markdown":"Getting following exception while injecting beans in scenario whose answer not able to found and beans.xml is included:\r\n\r\n    Caused by: org.jboss.weld.exceptions.DeploymentException: WELD-001408: Unsatisfied dependencies for type CustomerAgreementDaoImpl with qualifiers @Default\r\n      at injection point [BackedAnnotatedField] @Inject public com.evry.integrator.snow.fetch.CustomerAgreementFetcher.customerAgreementDaoImpl\r\n      at com.evry.integrator.snow.fetch.CustomerAgreementFetcher.customerAgreementDaoImpl(CustomerAgreementFetcher.java:0)\r\n    \r\n            at org.jboss.weld.bootstrap.Validator.validateInjectionPointForDeploymentProblems(Validator.java:378)\r\n            at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:290)\r\n\r\n\r\nFollowing is code structure:\r\n\r\n\r\nBeans.xml in /WEB-INF\r\n\r\n    &lt;beans xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; \r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee \r\n                               http://java.sun.com/xml/ns/javaee/beans_1_1.xsd&quot;\r\n           version=&quot;1.1&quot; bean-discovery-mode=&quot;all&quot;&gt; \r\n    &lt;/beans&gt;\r\n\r\nInterfaces\r\n\r\n    public interface GenericDao&lt;T, PK&gt; {\r\n\r\n    public interface CustomerAgreementDao extends GenericDao&lt;CustomerAgreement, Long&gt;{\r\n\r\nAbsract Class implementing Generic DAO\r\n\r\n    public abstract class GenericDaoImpl&lt;T, PK&gt; implements GenericDao&lt;T, PK&gt; {\r\n\r\n    @PersistenceContext(unitName = &quot;IntegratorMasterdataDS&quot;)\r\n    protected EntityManager em;\r\n\r\nMain Implementation\r\n\r\n    @Stateless\r\n    public class CustomerAgreementDaoImpl extends GenericDaoImpl&lt;CustomerAgreement, Long&gt; implements CustomerAgreementDao {\r\n\r\n\tpublic CustomerAgreementDaoImpl() {\r\n\t\tSystem.out.println(&quot;CustomerAgreementDaoImpl&quot;);\r\n\t}\r\n\r\nDao used in Service class\r\n\r\n    @Stateless\r\n    public class CustomerAgreementFetcher {\r\n    \t\r\n    \t@Inject\r\n    \tpublic CustomerAgreementDaoImpl customerAgreementDaoImpl;\r\n\r\nMain Scheduler loading all of above\r\n\r\n    @Startup\r\n    @Singleton\r\n    @AccessTimeout(value = 5, unit = TimeUnit.MINUTES)\r\n    public class WPoller {\r\n        @Inject\r\n        CustomerAgreementFetcher customerAgreementFetcher;","title":"DeploymentException: WELD-001408: Unsatisfied dependencies for type &lt;Class&gt; with qualifiers @Default at injection point [BackedAnnotatedField]","body":"<p>Getting following exception while injecting beans in scenario whose answer not able to found and beans.xml is included:</p>\n\n<pre><code>Caused by: org.jboss.weld.exceptions.DeploymentException: WELD-001408: Unsatisfied dependencies for type CustomerAgreementDaoImpl with qualifiers @Default\n  at injection point [BackedAnnotatedField] @Inject public com.evry.integrator.snow.fetch.CustomerAgreementFetcher.customerAgreementDaoImpl\n  at com.evry.integrator.snow.fetch.CustomerAgreementFetcher.customerAgreementDaoImpl(CustomerAgreementFetcher.java:0)\n\n        at org.jboss.weld.bootstrap.Validator.validateInjectionPointForDeploymentProblems(Validator.java:378)\n        at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:290)\n</code></pre>\n\n<p>Following is code structure:</p>\n\n<p>Beans.xml in /WEB-INF</p>\n\n<pre><code>&lt;beans xmlns=\"http://java.sun.com/xml/ns/javaee\" \n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee \n                           http://java.sun.com/xml/ns/javaee/beans_1_1.xsd\"\n       version=\"1.1\" bean-discovery-mode=\"all\"&gt; \n&lt;/beans&gt;\n</code></pre>\n\n<p>Interfaces</p>\n\n<pre><code>public interface GenericDao&lt;T, PK&gt; {\n\npublic interface CustomerAgreementDao extends GenericDao&lt;CustomerAgreement, Long&gt;{\n</code></pre>\n\n<p>Absract Class implementing Generic DAO</p>\n\n<pre><code>public abstract class GenericDaoImpl&lt;T, PK&gt; implements GenericDao&lt;T, PK&gt; {\n\n@PersistenceContext(unitName = \"IntegratorMasterdataDS\")\nprotected EntityManager em;\n</code></pre>\n\n<p>Main Implementation</p>\n\n<pre><code>@Stateless\npublic class CustomerAgreementDaoImpl extends GenericDaoImpl&lt;CustomerAgreement, Long&gt; implements CustomerAgreementDao {\n\npublic CustomerAgreementDaoImpl() {\n    System.out.println(\"CustomerAgreementDaoImpl\");\n}\n</code></pre>\n\n<p>Dao used in Service class</p>\n\n<pre><code>@Stateless\npublic class CustomerAgreementFetcher {\n\n    @Inject\n    public CustomerAgreementDaoImpl customerAgreementDaoImpl;\n</code></pre>\n\n<p>Main Scheduler loading all of above</p>\n\n<pre><code>@Startup\n@Singleton\n@AccessTimeout(value = 5, unit = TimeUnit.MINUTES)\npublic class WPoller {\n    @Inject\n    CustomerAgreementFetcher customerAgreementFetcher;\n</code></pre>\n"},{"tags":["java","php","android","mysql"],"comments":[{"owner":{"account_id":989535,"reputation":22651,"user_id":1007220,"accept_rate":88,"display_name":"aynber"},"score":0,"creation_date":1683297494,"post_id":76183339,"comment_id":134349950,"body_markdown":"That error is most likely coming from your PHP code, not your Android code, though it could be a mismatch of the data your Android code is sending and what the PHP code is expecting.","body":"That error is most likely coming from your PHP code, not your Android code, though it could be a mismatch of the data your Android code is sending and what the PHP code is expecting."},{"owner":{"account_id":28252170,"reputation":31,"user_id":21598232,"display_name":"Hasini Thilakarathna"},"score":0,"creation_date":1683297933,"post_id":76183339,"comment_id":134350048,"body_markdown":"Now I have added the php code. Please check it out","body":"Now I have added the php code. Please check it out"},{"owner":{"account_id":989535,"reputation":22651,"user_id":1007220,"accept_rate":88,"display_name":"aynber"},"score":0,"creation_date":1683297984,"post_id":76183339,"comment_id":134350057,"body_markdown":"What is the exact error message you&#39;re getting?","body":"What is the exact error message you&#39;re getting?"},{"owner":{"account_id":28252170,"reputation":31,"user_id":21598232,"display_name":"Hasini Thilakarathna"},"score":0,"creation_date":1683298054,"post_id":76183339,"comment_id":134350067,"body_markdown":"&lt;br/&gt;&lt;b&gt; Warning&lt;b&gt;: Undefined Array Key&quot;","body":"&lt;br/&gt;&lt;b&gt; Warning&lt;b&gt;: Undefined Array Key&quot;"},{"owner":{"account_id":989535,"reputation":22651,"user_id":1007220,"accept_rate":88,"display_name":"aynber"},"score":0,"creation_date":1683298081,"post_id":76183339,"comment_id":134350077,"body_markdown":"There&#39;s more to it, specifically which array key is undefined. If it&#39;s not there, check your server error logs","body":"There&#39;s more to it, specifically which array key is undefined. If it&#39;s not there, check your server error logs"},{"owner":{"account_id":28252170,"reputation":31,"user_id":21598232,"display_name":"Hasini Thilakarathna"},"score":0,"creation_date":1683298636,"post_id":76183339,"comment_id":134350226,"body_markdown":"when click button\n15:56:27.559  D  tagSocket(74) with statsTag=0x85bc11fc, statsUid=-1\n15:56:28.049  D  Compat change id reported: 147798919; UID 10159; state: ENABLED\n15:56:28.840  D  onActivityFinishing(): calling cancelLocked()","body":"when click button 15:56:27.559  D  tagSocket(74) with statsTag=0x85bc11fc, statsUid=-1 15:56:28.049  D  Compat change id reported: 147798919; UID 10159; state: ENABLED 15:56:28.840  D  onActivityFinishing(): calling cancelLocked()"},{"owner":{"account_id":989535,"reputation":22651,"user_id":1007220,"accept_rate":88,"display_name":"aynber"},"score":0,"creation_date":1683299340,"post_id":76183339,"comment_id":134350441,"body_markdown":"Sorry, I meant the web server for the PHP log","body":"Sorry, I meant the web server for the PHP log"},{"owner":{"account_id":28252170,"reputation":31,"user_id":21598232,"display_name":"Hasini Thilakarathna"},"score":0,"creation_date":1683300411,"post_id":76183339,"comment_id":134350728,"body_markdown":"i am using android studio with php to connect mysql","body":"i am using android studio with php to connect mysql"},{"owner":{"account_id":989535,"reputation":22651,"user_id":1007220,"accept_rate":88,"display_name":"aynber"},"score":0,"creation_date":1683300774,"post_id":76183339,"comment_id":134350811,"body_markdown":"Yes, and the PHP lives in a webserver, not on the android. You have 2 moving parts in separate areas.","body":"Yes, and the PHP lives in a webserver, not on the android. You have 2 moving parts in separate areas."},{"owner":{"account_id":28252170,"reputation":31,"user_id":21598232,"display_name":"Hasini Thilakarathna"},"score":0,"creation_date":1683301742,"post_id":76183339,"comment_id":134350993,"body_markdown":"Sorry I dont how to do that. i am new to android and php","body":"Sorry I dont how to do that. i am new to android and php"},{"owner":{"account_id":7869117,"reputation":58320,"user_id":5947043,"display_name":"ADyson"},"score":0,"creation_date":1683307175,"post_id":76183339,"comment_id":134352181,"body_markdown":"I would guess Toast.LENGTH_SHORT is truncatating the error messages. Try letting it display the whole message for you. It should tell you _which_ array key is undefined. From just glancing the code, I can see that in the Android code, sending the email and password are optional, but the PHP code is expecting them to always be there. You should check for them using `if (isset($_POST[&quot;email]&quot;))` (for example) before trying to use those values.","body":"I would guess Toast.LENGTH_SHORT is truncatating the error messages. Try letting it display the whole message for you. It should tell you <i>which</i> array key is undefined. From just glancing the code, I can see that in the Android code, sending the email and password are optional, but the PHP code is expecting them to always be there. You should check for them using <code>if (isset($_POST[&quot;email]&quot;))</code> (for example) before trying to use those values."},{"owner":{"account_id":7869117,"reputation":58320,"user_id":5947043,"display_name":"ADyson"},"score":0,"creation_date":1683307197,"post_id":76183339,"comment_id":134352185,"body_markdown":"P.S. **Warning:** Your code is vulnerable to SQL Injection attacks. You should use parameterised queries and prepared statements to help prevent attackers from compromising your database by using malicious input values. http://bobby-tables.com gives an explanation of the risks, as well as some examples of how to write your queries safely using PHP / mysqli. **Never** insert unparameterised data directly into your SQL. The way your code is written now, someone could easily steal, incorrectly change, or even delete your data.","body":"P.S. <b>Warning:</b> Your code is vulnerable to SQL Injection attacks. You should use parameterised queries and prepared statements to help prevent attackers from compromising your database by using malicious input values. <a href=\"http://bobby-tables.com\" rel=\"nofollow noreferrer\">bobby-tables.com</a> gives an explanation of the risks, as well as some examples of how to write your queries safely using PHP / mysqli. <b>Never</b> insert unparameterised data directly into your SQL. The way your code is written now, someone could easily steal, incorrectly change, or even delete your data."},{"owner":{"account_id":7869117,"reputation":58320,"user_id":5947043,"display_name":"ADyson"},"score":0,"creation_date":1683307201,"post_id":76183339,"comment_id":134352186,"body_markdown":"https://phpdelusions.net/mysqli also contains good examples of writing safe SQL using mysqli. See also the [mysqli documentation](https://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php) and this: [How can I prevent SQL injection in PHP?](https://stackoverflow.com/questions/60174/how-can-i-prevent-sql-injection-in-php) . Parameterising your queries will also greatly reduce the risk of accidental syntax errors as a result of un-escaped or incorrectly quoted input values. If you learnt your current technique from a tutorial or book, please don&#39;t use that resource again.","body":"<a href=\"https://phpdelusions.net/mysqli\" rel=\"nofollow noreferrer\">phpdelusions.net/mysqli</a> also contains good examples of writing safe SQL using mysqli. See also the <a href=\"https://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php\" rel=\"nofollow noreferrer\">mysqli documentation</a> and this: <a href=\"https://stackoverflow.com/questions/60174/how-can-i-prevent-sql-injection-in-php\">How can I prevent SQL injection in PHP?</a> . Parameterising your queries will also greatly reduce the risk of accidental syntax errors as a result of un-escaped or incorrectly quoted input values. If you learnt your current technique from a tutorial or book, please don&#39;t use that resource again."},{"owner":{"account_id":28252170,"reputation":31,"user_id":21598232,"display_name":"Hasini Thilakarathna"},"score":0,"creation_date":1683385960,"post_id":76183339,"comment_id":134360426,"body_markdown":"after debug, i got this error \n&lt;br /&gt;\n&lt;b&gt;Warning&lt;/b&gt;:  Undefined array key &quot;password&quot; in &lt;b&gt;C:\\xampp\\htdocs\\car\\addspace.php&lt;/b&gt; on line &lt;b&gt;24&lt;/b&gt;&lt;br /&gt;\nInvalid email or password.\nI tried to register a parking space for a person after successfully logging. After logging, his email and password need to be transferred to the next activity. \nCan any of you correct the error here?","body":"after debug, i got this error  &lt;br /&gt; &lt;b&gt;Warning&lt;/b&gt;:  Undefined array key &quot;password&quot; in &lt;b&gt;C:\\xampp\\htdocs\\car\\addspace.php&lt;/b&gt; on line &lt;b&gt;24&lt;/b&gt;&lt;br /&gt; Invalid email or password. I tried to register a parking space for a person after successfully logging. After logging, his email and password need to be transferred to the next activity.  Can any of you correct the error here?"},{"owner":{"account_id":7869117,"reputation":58320,"user_id":5947043,"display_name":"ADyson"},"score":0,"creation_date":1683395690,"post_id":76183339,"comment_id":134361625,"body_markdown":"As I said previously,  I can see that in the Android code, sending the email and password are optional, but the PHP code is expecting them to always be there. You should check for them using if (isset($_POST[&quot;email]&quot;)) (for example) before trying to use those values","body":"As I said previously,  I can see that in the Android code, sending the email and password are optional, but the PHP code is expecting them to always be there. You should check for them using if (isset($_POST[&quot;email]&quot;)) (for example) before trying to use those values"}],"owner":{"account_id":28252170,"reputation":31,"user_id":21598232,"display_name":"Hasini Thilakarathna"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683298516,"answer_count":0,"score":0,"last_activity_date":1683297913,"creation_date":1683297352,"question_id":76183339,"body_markdown":"After logging in with email and password, the user tries to add space. When I fill out the form, an error message appears like this&quot; \\&lt;br/\\&gt;\\&lt;b\\&gt; Warning\\&lt;b\\&gt;: Undefined Array Key&quot;\r\n\r\n```\r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.CheckBox;\r\n    import android.widget.EditText;\r\n    import android.widget.Toast;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import com.android.volley.AuthFailureError;\r\n    import com.android.volley.Request;\r\n    import com.android.volley.Response;\r\n    import com.android.volley.VolleyError;\r\n    import com.android.volley.toolbox.StringRequest;\r\n    import com.android.volley.toolbox.Volley;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n\r\n    public class owner_addspace extends AppCompatActivity {\r\n\r\n        private EditText titleEditText, addressEditText, postcodeEditText, costEditText;\r\n        private CheckBox availableCheckBox;\r\n        private Button submitButton;\r\n       private String email, password;\r\n   \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_owner_addspace);\r\n\r\n            // Get user&#39;s email and password from previous activity\r\n            Intent intent = getIntent();\r\n            email = intent.getStringExtra(&quot;email&quot;);\r\n            password = intent.getStringExtra(&quot;password&quot;);\r\n\r\n            titleEditText = findViewById(R.id.editTextSpace);\r\n            addressEditText = findViewById(R.id.editTextAddress);\r\n            postcodeEditText = findViewById(R.id.editTextPostCode);\r\n            costEditText = findViewById(R.id.editTextCost);\r\n            availableCheckBox = findViewById(R.id.checkBoxIsAvailable);\r\n            submitButton = findViewById(R.id.buttonAddSpace);\r\n    \r\n            submitButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    String title = titleEditText.getText().toString().trim();\r\n                    String address = addressEditText.getText().toString().trim();\r\n                    String postcode = postcodeEditText.getText().toString().trim();\r\n                    String cost = costEditText.getText().toString().trim();\r\n                    boolean isAvailable = availableCheckBox.isChecked();\r\n\r\n                    // Validate the input values\r\n                    if (title.isEmpty()) {\r\n                        titleEditText.setError(&quot;Title is required&quot;);\r\n                        titleEditText.requestFocus();\r\n                          return;\r\n                    }\r\n\r\n                    if (address.isEmpty()) {\r\n                        addressEditText.setError(&quot;Address is required&quot;);\r\n                        addressEditText.requestFocus();\r\n                        return;\r\n                    }\r\n\r\n                    if (postcode.isEmpty()) {\r\n                        postcodeEditText.setError(&quot;Postcode is required&quot;);\r\n                        postcodeEditText.requestFocus();\r\n                        return;\r\n                    }\r\n   \r\n                    if (cost.isEmpty()) {\r\n                         costEditText.setError(&quot;Cost per hour is required&quot;);\r\n                        costEditText.requestFocus();\r\n                        return;\r\n                    }\r\n\r\n  \r\n                    StringRequest stringRequest = new StringRequest(Request.Method.POST, Constants.URL_ADD_SPACE, new Response.Listener&lt;String&gt;() {\r\n                        @Override\r\n                        public void onResponse(String response) {\r\n                            // Show a toast message\r\n                            Toast.makeText(owner_addspace.this, response, Toast.LENGTH_SHORT).show();\r\n\r\n                            // Go back to the main activity\r\n                            finish();\r\n                        }\r\n                    }, new Response.ErrorListener() {\r\n                        @Override\r\n                        public void onErrorResponse(VolleyError error) {\r\n                            // Show an error message\r\n                            Toast.makeText(owner_addspace.this, &quot;Error: &quot; + error.getMessage(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }) {\r\n                        @Override\r\n                        protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\r\n                            Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n                            params.put(&quot;ps_title&quot;, title);\r\n                            params.put(&quot;ps_address&quot;, address);\r\n                            params.put(&quot;postcode&quot;, postcode);\r\n                            params.put(&quot;cost_per_hour&quot;, cost);\r\n                            params.put(&quot;is_available&quot;, isAvailable ? &quot;Available&quot; : &quot;Not Available&quot;);\r\n\r\n                            if(email != null) {\r\n                                params.put(&quot;email&quot;, email);\r\n                            }\r\n                            if(password != null) {\r\n                                params.put(&quot;password&quot;, password);\r\n                            }\r\n                            return params;\r\n                        }\r\n                    };\r\n\r\n                    Volley.newRequestQueue(owner_addspace.this).add(stringRequest);\r\n                }\r\n            });\r\n        }\r\n    }\r\n```\r\nphp code\r\n```\r\n    &lt;?php\r\n   // Define database connection parameters\r\n    $servername = &quot;localhost&quot;;\r\n    $username = &quot;root&quot;;\r\n    $password = &quot;&quot;;\r\n    $dbname = &quot;mydb&quot;;\r\n\r\n    // Create database connection\r\n    $conn = new mysqli($servername, $username, $password, $dbname);\r\n\r\n    // Check for connection errors\r\n    if ($conn-&gt;connect_error) {\r\n        die(&quot;Connection failed: &quot; . $conn-&gt;connect_error);\r\n    }\r\n\r\n    // Get the input values from the form\r\n    $ps_title = $_POST[&#39;ps_title&#39;];\r\n    $ps_address = $_POST[&#39;ps_address&#39;];\r\n    $postcode = $_POST[&#39;postcode&#39;];\r\n    $cost_per_hour = $_POST[&#39;cost_per_hour&#39;];\r\n    $is_available = isset($_POST[&#39;is_available&#39;]) ? &quot;Available&quot; : &quot;Not \r\n    Available&quot;;\r\n    $email = $_POST[&#39;email&#39;];\r\n    $password = $_POST[&#39;password&#39;];\r\n\r\n     // Check if the postcode already exists in the postcode table\r\n    $result = $conn-&gt;query(&quot;SELECT PostcodeID FROM postcode WHERE Postcode = \r\n    &#39;$postcode&#39;&quot;);\r\n\r\n    if ($result-&gt;num_rows &gt; 0) {\r\n        // The postcode already exists, get the PostcodeID\r\n        $row = $result-&gt;fetch_assoc();\r\n        $postcode_id = $row[&#39;PostcodeID&#39;];\r\n    } else {\r\n        // The postcode does not exist, add it to the postcode table and get \r\n    the PostcodeID\r\n        $conn-&gt;query(&quot;INSERT INTO postcode (Postcode) VALUES \r\n    (&#39;$postcode&#39;)&quot;);\r\n        $postcode_id = $conn-&gt;insert_id;\r\n    \r\n        // Use the Google Maps API to get the geolocation data of the postcode\r\n        $geocode_url = &quot;https://maps.googleapis.com/maps/api/geocode/json?address=$postcode&amp;key=AIzaSyB0wJammsFsGqsX5X0s97U10oj_s5_jgM8&quot;;\r\n        $geocode_data = json_decode(file_get_contents($geocode_url));\r\n    \r\n        if ($geocode_data-&gt;status == &quot;OK&quot;) {\r\n            $latitude = $geocode_data-&gt;results[0]-&gt;geometry-&gt;location-&gt;lat;\r\n            $longitude = $geocode_data-&gt;results[0]-&gt;geometry-&gt;location-&gt;lng;\r\n            $conn-&gt;query(&quot;UPDATE postcode SET Latitude = &#39;$latitude&#39;, Longitude = &#39;$longitude&#39; WHERE PostcodeID = &#39;$postcode_id&#39;&quot;);\r\n        }\r\n    }\r\n\r\n    // Get the H_ID from the households table using the email and password\r\n    $result = $conn-&gt;query(&quot;SELECT H_ID FROM households WHERE H_Email = \r\n    &#39;$email&#39; AND H_Password = &#39;$password&#39;&quot;);\r\n\r\n    if ($result-&gt;num_rows &gt; 0) {\r\n        $row = $result-&gt;fetch_assoc();\r\n        $h_id = $row[&#39;H_ID&#39;];\r\n    \r\n        // Insert the parking space into the parkingspace table\r\n        $conn-&gt;query(&quot;INSERT INTO parkingspace (PS_Title, PS_Address, \r\n    PostcodeID, H_ID, PS_Cost, PS_Status) VALUES (&#39;$ps_title&#39;, \r\n    &#39;$ps_address&#39;, &#39;$postcode_id&#39;, &#39;$h_id&#39;, &#39;$cost_per_hour&#39;, \r\n    &#39;$is_available&#39;, &#39;&#39;)&quot;);\r\n    \r\n        echo &quot;Parking space added successfully!&quot;;\r\n    } else {\r\n        echo &quot;Invalid email or password.&quot;;\r\n    }\r\n\r\n    // Close the database connection\r\n    $conn-&gt;close();\r\n    ?&gt;\r\n\r\n```\r\nwhen user logged, try to add car space. after filling form and click update button error comes like this\r\n&lt;br/&gt;&lt;b&gt;Warning&lt;b&gt;:Undefined Array Key ","title":"How do I solve this in android register code","body":"<p>After logging in with email and password, the user tries to add space. When I fill out the form, an error message appears like this&quot; &lt;br/&gt;&lt;b&gt; Warning&lt;b&gt;: Undefined Array Key&quot;</p>\n<pre><code>    import android.content.Intent;\n    import android.os.Bundle;\n    import android.view.View;\n    import android.widget.Button;\n    import android.widget.CheckBox;\n    import android.widget.EditText;\n    import android.widget.Toast;\n    import androidx.appcompat.app.AppCompatActivity;\n    import com.android.volley.AuthFailureError;\n    import com.android.volley.Request;\n    import com.android.volley.Response;\n    import com.android.volley.VolleyError;\n    import com.android.volley.toolbox.StringRequest;\n    import com.android.volley.toolbox.Volley;\n    import java.util.HashMap;\n    import java.util.Map;\n\n    public class owner_addspace extends AppCompatActivity {\n\n        private EditText titleEditText, addressEditText, postcodeEditText, costEditText;\n        private CheckBox availableCheckBox;\n        private Button submitButton;\n       private String email, password;\n   \n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_owner_addspace);\n\n            // Get user's email and password from previous activity\n            Intent intent = getIntent();\n            email = intent.getStringExtra(&quot;email&quot;);\n            password = intent.getStringExtra(&quot;password&quot;);\n\n            titleEditText = findViewById(R.id.editTextSpace);\n            addressEditText = findViewById(R.id.editTextAddress);\n            postcodeEditText = findViewById(R.id.editTextPostCode);\n            costEditText = findViewById(R.id.editTextCost);\n            availableCheckBox = findViewById(R.id.checkBoxIsAvailable);\n            submitButton = findViewById(R.id.buttonAddSpace);\n    \n            submitButton.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    String title = titleEditText.getText().toString().trim();\n                    String address = addressEditText.getText().toString().trim();\n                    String postcode = postcodeEditText.getText().toString().trim();\n                    String cost = costEditText.getText().toString().trim();\n                    boolean isAvailable = availableCheckBox.isChecked();\n\n                    // Validate the input values\n                    if (title.isEmpty()) {\n                        titleEditText.setError(&quot;Title is required&quot;);\n                        titleEditText.requestFocus();\n                          return;\n                    }\n\n                    if (address.isEmpty()) {\n                        addressEditText.setError(&quot;Address is required&quot;);\n                        addressEditText.requestFocus();\n                        return;\n                    }\n\n                    if (postcode.isEmpty()) {\n                        postcodeEditText.setError(&quot;Postcode is required&quot;);\n                        postcodeEditText.requestFocus();\n                        return;\n                    }\n   \n                    if (cost.isEmpty()) {\n                         costEditText.setError(&quot;Cost per hour is required&quot;);\n                        costEditText.requestFocus();\n                        return;\n                    }\n\n  \n                    StringRequest stringRequest = new StringRequest(Request.Method.POST, Constants.URL_ADD_SPACE, new Response.Listener&lt;String&gt;() {\n                        @Override\n                        public void onResponse(String response) {\n                            // Show a toast message\n                            Toast.makeText(owner_addspace.this, response, Toast.LENGTH_SHORT).show();\n\n                            // Go back to the main activity\n                            finish();\n                        }\n                    }, new Response.ErrorListener() {\n                        @Override\n                        public void onErrorResponse(VolleyError error) {\n                            // Show an error message\n                            Toast.makeText(owner_addspace.this, &quot;Error: &quot; + error.getMessage(), Toast.LENGTH_SHORT).show();\n                        }\n                    }) {\n                        @Override\n                        protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\n                            Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\n                            params.put(&quot;ps_title&quot;, title);\n                            params.put(&quot;ps_address&quot;, address);\n                            params.put(&quot;postcode&quot;, postcode);\n                            params.put(&quot;cost_per_hour&quot;, cost);\n                            params.put(&quot;is_available&quot;, isAvailable ? &quot;Available&quot; : &quot;Not Available&quot;);\n\n                            if(email != null) {\n                                params.put(&quot;email&quot;, email);\n                            }\n                            if(password != null) {\n                                params.put(&quot;password&quot;, password);\n                            }\n                            return params;\n                        }\n                    };\n\n                    Volley.newRequestQueue(owner_addspace.this).add(stringRequest);\n                }\n            });\n        }\n    }\n</code></pre>\n<p>php code</p>\n<pre><code>    &lt;?php\n   // Define database connection parameters\n    $servername = &quot;localhost&quot;;\n    $username = &quot;root&quot;;\n    $password = &quot;&quot;;\n    $dbname = &quot;mydb&quot;;\n\n    // Create database connection\n    $conn = new mysqli($servername, $username, $password, $dbname);\n\n    // Check for connection errors\n    if ($conn-&gt;connect_error) {\n        die(&quot;Connection failed: &quot; . $conn-&gt;connect_error);\n    }\n\n    // Get the input values from the form\n    $ps_title = $_POST['ps_title'];\n    $ps_address = $_POST['ps_address'];\n    $postcode = $_POST['postcode'];\n    $cost_per_hour = $_POST['cost_per_hour'];\n    $is_available = isset($_POST['is_available']) ? &quot;Available&quot; : &quot;Not \n    Available&quot;;\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n     // Check if the postcode already exists in the postcode table\n    $result = $conn-&gt;query(&quot;SELECT PostcodeID FROM postcode WHERE Postcode = \n    '$postcode'&quot;);\n\n    if ($result-&gt;num_rows &gt; 0) {\n        // The postcode already exists, get the PostcodeID\n        $row = $result-&gt;fetch_assoc();\n        $postcode_id = $row['PostcodeID'];\n    } else {\n        // The postcode does not exist, add it to the postcode table and get \n    the PostcodeID\n        $conn-&gt;query(&quot;INSERT INTO postcode (Postcode) VALUES \n    ('$postcode')&quot;);\n        $postcode_id = $conn-&gt;insert_id;\n    \n        // Use the Google Maps API to get the geolocation data of the postcode\n        $geocode_url = &quot;https://maps.googleapis.com/maps/api/geocode/json?address=$postcode&amp;key=AIzaSyB0wJammsFsGqsX5X0s97U10oj_s5_jgM8&quot;;\n        $geocode_data = json_decode(file_get_contents($geocode_url));\n    \n        if ($geocode_data-&gt;status == &quot;OK&quot;) {\n            $latitude = $geocode_data-&gt;results[0]-&gt;geometry-&gt;location-&gt;lat;\n            $longitude = $geocode_data-&gt;results[0]-&gt;geometry-&gt;location-&gt;lng;\n            $conn-&gt;query(&quot;UPDATE postcode SET Latitude = '$latitude', Longitude = '$longitude' WHERE PostcodeID = '$postcode_id'&quot;);\n        }\n    }\n\n    // Get the H_ID from the households table using the email and password\n    $result = $conn-&gt;query(&quot;SELECT H_ID FROM households WHERE H_Email = \n    '$email' AND H_Password = '$password'&quot;);\n\n    if ($result-&gt;num_rows &gt; 0) {\n        $row = $result-&gt;fetch_assoc();\n        $h_id = $row['H_ID'];\n    \n        // Insert the parking space into the parkingspace table\n        $conn-&gt;query(&quot;INSERT INTO parkingspace (PS_Title, PS_Address, \n    PostcodeID, H_ID, PS_Cost, PS_Status) VALUES ('$ps_title', \n    '$ps_address', '$postcode_id', '$h_id', '$cost_per_hour', \n    '$is_available', '')&quot;);\n    \n        echo &quot;Parking space added successfully!&quot;;\n    } else {\n        echo &quot;Invalid email or password.&quot;;\n    }\n\n    // Close the database connection\n    $conn-&gt;close();\n    ?&gt;\n\n</code></pre>\n<p>when user logged, try to add car space. after filling form and click update button error comes like this\n<br/>Warning:Undefined Array Key</p>\n"},{"tags":["java","android","web-scraping","retrofit","android-networking"],"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683297519,"creation_date":1683297519,"question_id":76183357,"body_markdown":"I have to scrape a web page, I have to take all the elements that have the `data-component-type` equal to `s-search-result` and put them in ArrayList of type PC, of which it has some properties.\r\n\r\nBut I don&#39;t know how to do this parsing using Retrofit.\r\n\r\nCan anyone give me a hand?\r\n\r\n```java\r\n// RxJava library and RxAndroid for Android specific bindings\r\n    implementation &#39;io.reactivex.rxjava2:rxjava:2.2.0&#39;\r\n    implementation &#39;io.reactivex.rxjava2:rxandroid:2.0.2&#39;\r\n\r\n    // Retrofit and OkHttp\r\n    implementation &#39;com.squareup.retrofit2:retrofit:2.4.0&#39;\r\n    implementation &#39;com.squareup.okhttp3:okhttp:3.11.0&#39;\r\n\r\n    // RxJava retrofit adapter and Retrofit Gson converter\r\n    implementation &#39;com.jakewharton.retrofit:retrofit2-rxjava2-adapter:1.0.0&#39;\r\n    implementation &#39;com.squareup.retrofit2:converter-gson:2.4.0&#39;\r\n```\r\n\r\nApiService\r\n```java\r\nimport io.reactivex.Flowable;\r\nimport retrofit2.http.GET;\r\n\r\npublic interface ApiService {\r\n    @GET(&quot;/pc/s?k=pc&quot;)\r\n    Flowable&lt;Page&gt; getPc();\r\n}\r\n```\r\n\r\nHttpClient\r\n\r\n```java\r\nimport com.jakewharton.retrofit2.adapter.rxjava2.RxJava2CallAdapterFactory;\r\n\r\nimport retrofit2.Retrofit;\r\nimport retrofit2.converter.gson.GsonConverterFactory;\r\n\r\npublic class HttpClient {\r\n    private static final String API_BASE_URL = &quot;https://www.amazon.com/&quot;;\r\n\r\n    private static Retrofit retrofit = new Retrofit.Builder()\r\n            .baseUrl(API_BASE_URL)\r\n            .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\r\n            .addConverterFactory(GsonConverterFactory.create())\r\n            .build();\r\n\r\n    private static ApiService apiService = retrofit.create(ApiService.class);\r\n\r\n    public static ApiService getApiService() {\r\n        return apiService;\r\n    }\r\n}\r\n```\r\n\r\nMyWidget\r\n\r\n```java\r\nimport android.appwidget.AppWidgetManager;\r\nimport android.appwidget.AppWidgetProvider;\r\nimport android.content.Context;\r\nimport android.content.SharedPreferences;\r\nimport android.util.Log;\r\nimport android.widget.RemoteViews;\r\n\r\nimport io.reactivex.functions.Consumer;\r\n\r\npublic class MyWidget extends AppWidgetProvider {\r\n    private ApiService apiService = HttpClient.getApiService();\r\n\r\n    void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId) {\r\n        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_design);\r\n\r\n        //get the widget value\r\n        SharedPreferences preferences = context.getSharedPreferences(&quot;PREFS&quot;, 0);\r\n        int value = preferences.getInt(&quot;value&quot;, 1);\r\n\r\n        //set the value in the textview\r\n        views.setTextViewText(R.id.text, &quot;&quot; + value);\r\n\r\n        //update the widget\r\n        appWidgetManager.updateAppWidget(appWidgetId, views);\r\n\r\n        //reschedule the widget refresh\r\n        AlarmHandler alarmHandler = new AlarmHandler(context);\r\n        alarmHandler.cancelAlarmManager();\r\n        alarmHandler.setAlarmManager();\r\n\r\n\r\n//Service http\r\n        apiService.getPc()\r\n                .observeOn(SchedulerProvider.ui())\r\n                .subscribeOn(SchedulerProvider.io())\r\n                .subscribe(new Consumer&lt;Page&gt;() {\r\n                    @Override\r\n                    public void accept(Page page) throws Exception {\r\n                        // Update the UI\r\n                        Log.d(&quot;WIDGET2&quot;, page.toString());\r\n                    }\r\n                }, new Consumer&lt;Throwable&gt;() {\r\n                    @Override\r\n                    public void accept(Throwable throwable) throws Exception {\r\n                        // Throw error\r\n                        throwable.printStackTrace();\r\n                    }\r\n                });\r\n\r\n        Log.d(&quot;WIDGET&quot;, &quot;Widget updated!&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\r\n        for (int appWidgetId: appWidgetIds) {\r\n            updateAppWidget(context, appWidgetManager, appWidgetId);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onDisabled(Context context) {\r\n        //stop updating the widget\r\n        AlarmHandler alarmHandler = new AlarmHandler(context);\r\n        alarmHandler.cancelAlarmManager();\r\n\r\n        Log.d(&quot;WIDGET&quot;, &quot;Widget removed!&quot;);\r\n    }\r\n```\r\n\r\nPage\r\n\r\n```java\r\nimport java.util.ArrayList;\r\n\r\nclass Pc {\r\n\r\n    String name;\r\n    String price;\r\n    boolean sponsored;\r\n\r\n    public String getFormattedInfo() {\r\n        StringBuilder builder = new StringBuilder();\r\n        builder.append(&quot;Name: &quot; + name + &quot;\\n\\n&quot;);\r\n        builder.append(&quot;Price: &quot; + price + &quot;\\n&quot;);\r\n        builder.append(&quot;Sponsored: &quot; + sponsored + &quot;\\n&quot;);\r\n\r\n        return new String(builder);\r\n    }\r\n}\r\n\r\npublic class Page {\r\n\r\n    String numberPc;\r\n\r\n    ArrayList&lt;Pc&gt; arrayPc = new ArrayList&lt;Pc&gt;();\r\n\r\n}\r\n```","title":"Android Java rxjava thread scraping a web page","body":"<p>I have to scrape a web page, I have to take all the elements that have the <code>data-component-type</code> equal to <code>s-search-result</code> and put them in ArrayList of type PC, of which it has some properties.</p>\n<p>But I don't know how to do this parsing using Retrofit.</p>\n<p>Can anyone give me a hand?</p>\n<pre class=\"lang-java prettyprint-override\"><code>// RxJava library and RxAndroid for Android specific bindings\n    implementation 'io.reactivex.rxjava2:rxjava:2.2.0'\n    implementation 'io.reactivex.rxjava2:rxandroid:2.0.2'\n\n    // Retrofit and OkHttp\n    implementation 'com.squareup.retrofit2:retrofit:2.4.0'\n    implementation 'com.squareup.okhttp3:okhttp:3.11.0'\n\n    // RxJava retrofit adapter and Retrofit Gson converter\n    implementation 'com.jakewharton.retrofit:retrofit2-rxjava2-adapter:1.0.0'\n    implementation 'com.squareup.retrofit2:converter-gson:2.4.0'\n</code></pre>\n<p>ApiService</p>\n<pre class=\"lang-java prettyprint-override\"><code>import io.reactivex.Flowable;\nimport retrofit2.http.GET;\n\npublic interface ApiService {\n    @GET(&quot;/pc/s?k=pc&quot;)\n    Flowable&lt;Page&gt; getPc();\n}\n</code></pre>\n<p>HttpClient</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.jakewharton.retrofit2.adapter.rxjava2.RxJava2CallAdapterFactory;\n\nimport retrofit2.Retrofit;\nimport retrofit2.converter.gson.GsonConverterFactory;\n\npublic class HttpClient {\n    private static final String API_BASE_URL = &quot;https://www.amazon.com/&quot;;\n\n    private static Retrofit retrofit = new Retrofit.Builder()\n            .baseUrl(API_BASE_URL)\n            .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n            .addConverterFactory(GsonConverterFactory.create())\n            .build();\n\n    private static ApiService apiService = retrofit.create(ApiService.class);\n\n    public static ApiService getApiService() {\n        return apiService;\n    }\n}\n</code></pre>\n<p>MyWidget</p>\n<pre class=\"lang-java prettyprint-override\"><code>import android.appwidget.AppWidgetManager;\nimport android.appwidget.AppWidgetProvider;\nimport android.content.Context;\nimport android.content.SharedPreferences;\nimport android.util.Log;\nimport android.widget.RemoteViews;\n\nimport io.reactivex.functions.Consumer;\n\npublic class MyWidget extends AppWidgetProvider {\n    private ApiService apiService = HttpClient.getApiService();\n\n    void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId) {\n        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_design);\n\n        //get the widget value\n        SharedPreferences preferences = context.getSharedPreferences(&quot;PREFS&quot;, 0);\n        int value = preferences.getInt(&quot;value&quot;, 1);\n\n        //set the value in the textview\n        views.setTextViewText(R.id.text, &quot;&quot; + value);\n\n        //update the widget\n        appWidgetManager.updateAppWidget(appWidgetId, views);\n\n        //reschedule the widget refresh\n        AlarmHandler alarmHandler = new AlarmHandler(context);\n        alarmHandler.cancelAlarmManager();\n        alarmHandler.setAlarmManager();\n\n\n//Service http\n        apiService.getPc()\n                .observeOn(SchedulerProvider.ui())\n                .subscribeOn(SchedulerProvider.io())\n                .subscribe(new Consumer&lt;Page&gt;() {\n                    @Override\n                    public void accept(Page page) throws Exception {\n                        // Update the UI\n                        Log.d(&quot;WIDGET2&quot;, page.toString());\n                    }\n                }, new Consumer&lt;Throwable&gt;() {\n                    @Override\n                    public void accept(Throwable throwable) throws Exception {\n                        // Throw error\n                        throwable.printStackTrace();\n                    }\n                });\n\n        Log.d(&quot;WIDGET&quot;, &quot;Widget updated!&quot;);\n    }\n\n    @Override\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\n        for (int appWidgetId: appWidgetIds) {\n            updateAppWidget(context, appWidgetManager, appWidgetId);\n        }\n    }\n\n    @Override\n    public void onDisabled(Context context) {\n        //stop updating the widget\n        AlarmHandler alarmHandler = new AlarmHandler(context);\n        alarmHandler.cancelAlarmManager();\n\n        Log.d(&quot;WIDGET&quot;, &quot;Widget removed!&quot;);\n    }\n</code></pre>\n<p>Page</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\n\nclass Pc {\n\n    String name;\n    String price;\n    boolean sponsored;\n\n    public String getFormattedInfo() {\n        StringBuilder builder = new StringBuilder();\n        builder.append(&quot;Name: &quot; + name + &quot;\\n\\n&quot;);\n        builder.append(&quot;Price: &quot; + price + &quot;\\n&quot;);\n        builder.append(&quot;Sponsored: &quot; + sponsored + &quot;\\n&quot;);\n\n        return new String(builder);\n    }\n}\n\npublic class Page {\n\n    String numberPc;\n\n    ArrayList&lt;Pc&gt; arrayPc = new ArrayList&lt;Pc&gt;();\n\n}\n</code></pre>\n"},{"tags":["java","vert.x","java-vertx-web"],"answers":[{"tags":[],"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683296601,"creation_date":1683119401,"answer_id":76164234,"question_id":76162682,"body_markdown":"You can set several handlers on a route definition. On the `/static/*` route, set a handler which, when the response is ready to be sent, adds an extra header:\r\n\r\n    public class Server extends AbstractVerticle\r\n    { \r\n      @Override\r\n      public void start() throws Exception {\r\n        Router router = Router.router(vertx);\r\n        router.route().handler(BodyHandler.create());\r\n        router.route(&quot;/static/*&quot;)\r\n            .handler(rc -&gt; {\r\n                HttpServerResponse resp = rc.response();\r\n                resp.headersEndHandler(v-&gt; {\r\n                  // perhaps checks response status code before adding the header\r\n                  resp.putHeader(io.vertx.core.http.HttpHeaders.CONTENT_DISPOSITION, &quot;attachment&quot;);\r\n                });\r\n                rc.next();\r\n            })\r\n            .handler(StaticHandler.create(&quot;data&quot;));\r\n        vertx.createHttpServer().requestHandler(router).listen(8080);\r\n      }\r\n    }\r\n\r\n","title":"How to make StaticHandler download all Mime types?","body":"<p>You can set several handlers on a route definition. On the <code>/static/*</code> route, set a handler which, when the response is ready to be sent, adds an extra header:</p>\n<pre><code>public class Server extends AbstractVerticle\n{ \n  @Override\n  public void start() throws Exception {\n    Router router = Router.router(vertx);\n    router.route().handler(BodyHandler.create());\n    router.route(&quot;/static/*&quot;)\n        .handler(rc -&gt; {\n            HttpServerResponse resp = rc.response();\n            resp.headersEndHandler(v-&gt; {\n              // perhaps checks response status code before adding the header\n              resp.putHeader(io.vertx.core.http.HttpHeaders.CONTENT_DISPOSITION, &quot;attachment&quot;);\n            });\n            rc.next();\n        })\n        .handler(StaticHandler.create(&quot;data&quot;));\n    vertx.createHttpServer().requestHandler(router).listen(8080);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":12617245,"reputation":522,"user_id":9256127,"display_name":"Lukas Weber"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76164234,"answer_count":1,"score":0,"last_activity_date":1683296601,"creation_date":1683108770,"question_id":76162682,"body_markdown":"I have a basic verticle serving files from the `data` folder:\r\n\r\n    public class Server extends AbstractVerticle\r\n    { \r\n      @Override\r\n      public void start() throws Exception {\r\n        Router router = Router.router(vertx);\r\n        router.route().handler(BodyHandler.create());\r\n        router.route(&quot;/static/*&quot;).handler(StaticHandler.create(&quot;data&quot;));\r\n        vertx.createHttpServer().requestHandler(router).listen(8080);\r\n      }\r\n    }\r\n\r\nThe server downloads files as `.docx`, but renders all images or PDFs within the browser.\r\n\r\nHow can I tell my StaticHandler to download all MIME types?\r\n\r\nCan I somehow set the `Content-Disposition: attachment` header globally for the whole StaticHandler? Or have some hooks where I can set it dependent on the routing context?\r\n\r\n\r\n","title":"How to make StaticHandler download all Mime types?","body":"<p>I have a basic verticle serving files from the <code>data</code> folder:</p>\n<pre><code>public class Server extends AbstractVerticle\n{ \n  @Override\n  public void start() throws Exception {\n    Router router = Router.router(vertx);\n    router.route().handler(BodyHandler.create());\n    router.route(&quot;/static/*&quot;).handler(StaticHandler.create(&quot;data&quot;));\n    vertx.createHttpServer().requestHandler(router).listen(8080);\n  }\n}\n</code></pre>\n<p>The server downloads files as <code>.docx</code>, but renders all images or PDFs within the browser.</p>\n<p>How can I tell my StaticHandler to download all MIME types?</p>\n<p>Can I somehow set the <code>Content-Disposition: attachment</code> header globally for the whole StaticHandler? Or have some hooks where I can set it dependent on the routing context?</p>\n"},{"tags":["java","properties","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":8702736,"reputation":11399,"user_id":6511967,"display_name":"Wilson"},"down_vote_count":0,"up_vote_count":55,"is_accepted":true,"score":55,"last_activity_date":1468069348,"creation_date":1468066757,"answer_id":38281734,"question_id":38281512,"body_markdown":"You can use `@PropertySource` to externalize your configuration to a properties file. There is number of way to do get properties:\r\n\r\n**1.\r\nAssign the property values to fields by using `@Value` with `PropertySourcesPlaceholderConfigurer` to resolve `${}` in `@Value`:**\r\n\r\n    @Configuration\r\n\t@PropertySource(&quot;file:config.properties&quot;)\r\n    public class ApplicationConfiguration {\r\n\r\n\t    @Value(&quot;${gMapReportUrl}&quot;)\r\n\t    private String gMapReportUrl;\r\n\r\n\t    @Bean\r\n\t    public static PropertySourcesPlaceholderConfigurer propertyConfigInDev() {\r\n\t\t    return new PropertySourcesPlaceholderConfigurer();\r\n\t    }\r\n\r\n    }\r\n\r\n**2.\r\nGet the property values by using `Environment`:**\r\n\r\n    @Configuration\r\n\t@PropertySource(&quot;file:config.properties&quot;)\r\n    public class ApplicationConfiguration {\r\n\r\n\t    @Autowired\r\n        private Environment env;\r\n\r\n\t    public void foo() {\r\n            env.getProperty(&quot;gMapReportUrl&quot;);\r\n        }\r\n\r\n    }\r\n\r\nHope this can help","title":"How to read data from java properties file using Spring Boot","body":"<p>You can use <code>@PropertySource</code> to externalize your configuration to a properties file. There is number of way to do get properties:</p>\n\n<p><strong>1.\nAssign the property values to fields by using <code>@Value</code> with <code>PropertySourcesPlaceholderConfigurer</code> to resolve <code>${}</code> in <code>@Value</code>:</strong></p>\n\n<pre><code>@Configuration\n@PropertySource(\"file:config.properties\")\npublic class ApplicationConfiguration {\n\n    @Value(\"${gMapReportUrl}\")\n    private String gMapReportUrl;\n\n    @Bean\n    public static PropertySourcesPlaceholderConfigurer propertyConfigInDev() {\n        return new PropertySourcesPlaceholderConfigurer();\n    }\n\n}\n</code></pre>\n\n<p><strong>2.\nGet the property values by using <code>Environment</code>:</strong></p>\n\n<pre><code>@Configuration\n@PropertySource(\"file:config.properties\")\npublic class ApplicationConfiguration {\n\n    @Autowired\n    private Environment env;\n\n    public void foo() {\n        env.getProperty(\"gMapReportUrl\");\n    }\n\n}\n</code></pre>\n\n<p>Hope this can help</p>\n"},{"tags":[],"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1552498850,"creation_date":1510140836,"answer_id":47178674,"question_id":38281512,"body_markdown":"i would suggest the following way:\r\n\r\n    @PropertySource(ignoreResourceNotFound = true, value = &quot;classpath:otherprops.properties&quot;)\r\n    @Controller\r\n    public class ClassA {\r\n        @Value(&quot;${myName}&quot;)\r\n        private String name;\r\n\r\n        @RequestMapping(value = &quot;/xyz&quot;)\r\n        @ResponseBody\r\n        public void getName(){\r\n            System.out.println(name);\r\n        }\r\n    }\r\n\r\n\r\nHere your new properties file name is &quot;otherprops.properties&quot; and the property name is &quot;myName&quot;. This is the simplest implementation to access properties file in spring boot version 1.5.8.","title":"How to read data from java properties file using Spring Boot","body":"<p>i would suggest the following way:</p>\n\n<pre><code>@PropertySource(ignoreResourceNotFound = true, value = \"classpath:otherprops.properties\")\n@Controller\npublic class ClassA {\n    @Value(\"${myName}\")\n    private String name;\n\n    @RequestMapping(value = \"/xyz\")\n    @ResponseBody\n    public void getName(){\n        System.out.println(name);\n    }\n}\n</code></pre>\n\n<p>Here your new properties file name is \"otherprops.properties\" and the property name is \"myName\". This is the simplest implementation to access properties file in spring boot version 1.5.8.</p>\n"},{"tags":[],"owner":{"account_id":14391334,"reputation":177,"user_id":10395849,"display_name":"Sunny"},"down_vote_count":2,"up_vote_count":18,"is_accepted":false,"score":16,"last_activity_date":1540207009,"creation_date":1540207009,"answer_id":52928057,"question_id":38281512,"body_markdown":"I have created following class\r\n\r\nConfigUtility.java\r\n--------------------------------\r\n\r\n    @Configuration\r\n    public class ConfigUtility {\r\n    \r\n        @Autowired\r\n        private Environment env;\r\n    \r\n        public String getProperty(String pPropertyKey) {\r\n            return env.getProperty(pPropertyKey);\r\n        }\r\n    } \r\n\r\nand called as follow to get application.properties value\r\n\r\nmyclass.java\r\n---------------------\r\n\r\n    @Autowired\r\n    private ConfigUtility configUtil;\r\n    \r\n    public AppResponse getDetails() {\r\n    \r\n      AppResponse response = new AppResponse();\r\n       \tString email = configUtil.getProperty(&quot;emailid&quot;);\r\n        return response;    \t\r\n    }\r\n\r\napplication.properties\r\n------------------------------\r\nemailid=sunny@domain.com\r\n\r\nunit tested, working as expected...\r\n\r\n","title":"How to read data from java properties file using Spring Boot","body":"<p>I have created following class</p>\n\n<h2>ConfigUtility.java</h2>\n\n<pre><code>@Configuration\npublic class ConfigUtility {\n\n    @Autowired\n    private Environment env;\n\n    public String getProperty(String pPropertyKey) {\n        return env.getProperty(pPropertyKey);\n    }\n} \n</code></pre>\n\n<p>and called as follow to get application.properties value</p>\n\n<h2>myclass.java</h2>\n\n<pre><code>@Autowired\nprivate ConfigUtility configUtil;\n\npublic AppResponse getDetails() {\n\n  AppResponse response = new AppResponse();\n    String email = configUtil.getProperty(\"emailid\");\n    return response;        \n}\n</code></pre>\n\n<h2>application.properties</h2>\n\n<p>emailid=sunny@domain.com</p>\n\n<p>unit tested, working as expected...</p>\n"},{"tags":[],"owner":{"account_id":28494009,"reputation":77,"user_id":21806227,"display_name":"Ganael D"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683296550,"creation_date":1683296550,"answer_id":76183211,"question_id":38281512,"body_markdown":"For those of you who want to expose every property from either a .properties or .yml file, Spring Boot automatically creates an endpoint that does just that: endpoint `/actuator/env`. It is disabled by default though.\r\nTo enable it, be sure to include `env` in the application property below:\r\n`management.endpoints.web.exposure.include=env`\r\n\r\nYou can then filter the properties that you want to keep in the program that reads the endpoint.","title":"How to read data from java properties file using Spring Boot","body":"<p>For those of you who want to expose every property from either a .properties or .yml file, Spring Boot automatically creates an endpoint that does just that: endpoint <code>/actuator/env</code>. It is disabled by default though.\nTo enable it, be sure to include <code>env</code> in the application property below:\n<code>management.endpoints.web.exposure.include=env</code></p>\n<p>You can then filter the properties that you want to keep in the program that reads the endpoint.</p>\n"}],"owner":{"account_id":3268751,"reputation":1481,"user_id":2752615,"accept_rate":67,"display_name":"Arif Acar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":199029,"favorite_count":0,"down_vote_count":1,"up_vote_count":45,"accepted_answer_id":38281734,"answer_count":4,"score":44,"last_activity_date":1683296550,"creation_date":1468065056,"question_id":38281512,"body_markdown":"I have a spring boot application and I want to read some variable from my `application.properties` file. In fact below codes do that. But I think there is a good method for this alternative.\r\n\r\n    Properties prop = new Properties();\r\n\tInputStream input = null;\r\n\r\n\ttry {\r\n\t\tinput = new FileInputStream(&quot;config.properties&quot;);\r\n\t\tprop.load(input);\r\n\t\tgMapReportUrl = prop.getProperty(&quot;gMapReportUrl&quot;);\r\n\t} catch (IOException ex) {\r\n\t\tex.printStackTrace();\r\n\t} finally {\r\n\t\t...\r\n\t}","title":"How to read data from java properties file using Spring Boot","body":"<p>I have a spring boot application and I want to read some variable from my <code>application.properties</code> file. In fact below codes do that. But I think there is a good method for this alternative.</p>\n\n<pre><code>Properties prop = new Properties();\nInputStream input = null;\n\ntry {\n    input = new FileInputStream(\"config.properties\");\n    prop.load(input);\n    gMapReportUrl = prop.getProperty(\"gMapReportUrl\");\n} catch (IOException ex) {\n    ex.printStackTrace();\n} finally {\n    ...\n}\n</code></pre>\n"},{"tags":["java","jenkins","groovy","jenkins-pipeline"],"comments":[{"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"score":0,"creation_date":1683211910,"post_id":76174213,"comment_id":134334956,"body_markdown":"Could you please update the question, providing the expected result and what you get with your implementation? For me your code works ok, I&#39;m not sure I understand what exactly is &quot;not correct&quot;?","body":"Could you please update the question, providing the expected result and what you get with your implementation? For me your code works ok, I&#39;m not sure I understand what exactly is &quot;not correct&quot;?"},{"owner":{"account_id":4141233,"reputation":177,"user_id":3396478,"accept_rate":50,"display_name":"user3396478"},"score":0,"creation_date":1683228308,"post_id":76174213,"comment_id":134338806,"body_markdown":"I have added the output in the question. It would be great if you could help.","body":"I have added the output in the question. It would be great if you could help."},{"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"score":0,"creation_date":1683249596,"post_id":76174213,"comment_id":134341790,"body_markdown":"I do not think it is the output of the code. How comes that the data(apiVersion, kind) is completely different? Please post the real output of the code that you posted.","body":"I do not think it is the output of the code. How comes that the data(apiVersion, kind) is completely different? Please post the real output of the code that you posted."},{"owner":{"account_id":4141233,"reputation":177,"user_id":3396478,"accept_rate":50,"display_name":"user3396478"},"score":0,"creation_date":1683288913,"post_id":76174213,"comment_id":134347659,"body_markdown":"it&#39;s a sample output  just to show what type of ouput I&#39;m getting. I can&#39;t share real code here ..so added sample output","body":"it&#39;s a sample output  just to show what type of ouput I&#39;m getting. I can&#39;t share real code here ..so added sample output"},{"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"score":0,"creation_date":1683292941,"post_id":76174213,"comment_id":134348634,"body_markdown":"The problem is that you share the code that works correctly and you show the incorrect output without code... how people suppose to guess where the problem is? :) Please provide a minimal reproducible example: https://stackoverflow.com/help/minimal-reproducible-example","body":"The problem is that you share the code that works correctly and you show the incorrect output without code... how people suppose to guess where the problem is? :) Please provide a minimal reproducible example: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"},{"owner":{"account_id":4141233,"reputation":177,"user_id":3396478,"accept_rate":50,"display_name":"user3396478"},"score":0,"creation_date":1683296536,"post_id":76174213,"comment_id":134349633,"body_markdown":"I have updated the output that I got by running this code.","body":"I have updated the output that I got by running this code."},{"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"score":0,"creation_date":1683347986,"post_id":76174213,"comment_id":134356787,"body_markdown":"Really strange. Your code produces different result for me. What is your OS, Java version. Groovy version? Could you also replace last two lines of your code with &quot;println builder.toString()&quot;? Let&#39;s at least see what Groovy itself is producing, before writing to the file.","body":"Really strange. Your code produces different result for me. What is your OS, Java version. Groovy version? Could you also replace last two lines of your code with &quot;println builder.toString()&quot;? Let&#39;s at least see what Groovy itself is producing, before writing to the file."},{"owner":{"account_id":4141233,"reputation":177,"user_id":3396478,"accept_rate":50,"display_name":"user3396478"},"score":1,"creation_date":1683435478,"post_id":76174213,"comment_id":134364885,"body_markdown":"I have already done it. the println prints valid yaml. but when I write it to the file and read it that&#39;s when I receive this weird response. OS is Linux, Groovy is 4 and Java is 17.","body":"I have already done it. the println prints valid yaml. but when I write it to the file and read it that&#39;s when I receive this weird response. OS is Linux, Groovy is 4 and Java is 17."},{"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"score":0,"creation_date":1683435750,"post_id":76174213,"comment_id":134364895,"body_markdown":"ok, couple of more questions: a) have you opened the file with nano, what is inside? b) &quot;and read it&quot; how do you read the file?","body":"ok, couple of more questions: a) have you opened the file with nano, what is inside? b) &quot;and read it&quot; how do you read the file?"}],"owner":{"account_id":4141233,"reputation":177,"user_id":3396478,"accept_rate":50,"display_name":"user3396478"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683296503,"creation_date":1683209851,"question_id":76174213,"body_markdown":"I&#39;m trying to write a large yaml string to a yaml file using groovy. I&#39;m able to create the new file but the content inside the file is not correct. it contains some extra brackets and the yaml after builder in the yaml file. is there a way to fix this? \r\n\r\n```\r\nimport groovy.yaml.YamlBuilder\r\n\r\ndef builder = new YamlBuilder()\r\n\r\nbuilder.yaml {\r\n    apiVersion &#39;apps/v1&#39;\r\n    kind &#39;Deployment&#39;\r\n    metadata {\r\n        name &#39;weblogic-testapp&#39;\r\n        namespace &#39;app&#39;\r\n        labels {\r\n            app &#39;weblogic&#39;\r\n        }\r\n    }\r\n}\r\ndef output = builder.toString()\r\nnew File(&#39;deployment.yaml&#39;).write(output)\r\n```\r\nthis is the output I get. it includes the yaml with curly brackets.  \r\n\r\n```\r\n{yaml={apiVersion=apps/v1, kind=Deployment, metadata={name=weblogic-testapp, namespace=app, labels={app=weblogic}}}}\r\n```","title":"groovy file writer not able to keep format for large string","body":"<p>I'm trying to write a large yaml string to a yaml file using groovy. I'm able to create the new file but the content inside the file is not correct. it contains some extra brackets and the yaml after builder in the yaml file. is there a way to fix this?</p>\n<pre><code>import groovy.yaml.YamlBuilder\n\ndef builder = new YamlBuilder()\n\nbuilder.yaml {\n    apiVersion 'apps/v1'\n    kind 'Deployment'\n    metadata {\n        name 'weblogic-testapp'\n        namespace 'app'\n        labels {\n            app 'weblogic'\n        }\n    }\n}\ndef output = builder.toString()\nnew File('deployment.yaml').write(output)\n</code></pre>\n<p>this is the output I get. it includes the yaml with curly brackets.</p>\n<pre><code>{yaml={apiVersion=apps/v1, kind=Deployment, metadata={name=weblogic-testapp, namespace=app, labels={app=weblogic}}}}\n</code></pre>\n"},{"tags":["java","spring","controller"],"comments":[{"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"score":0,"creation_date":1683204002,"post_id":76173167,"comment_id":134332658,"body_markdown":"I think you should have not Map, but list of configurations. So you need to create class Configuration with 2 fields type and path. And try to inject values from properties file into List&lt;Configuration&gt;","body":"I think you should have not Map, but list of configurations. So you need to create class Configuration with 2 fields type and path. And try to inject values from properties file into List&lt;Configuration&gt;"},{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":0,"creation_date":1683204301,"post_id":76173167,"comment_id":134332755,"body_markdown":"I believe you can make a map directly from the cconfigurations by structuring the yaml differently.. Use the value of the type and the value of the path directly instead of specifying `type: ...` and `value: ...`. So under `configurations:` a line could be `a: AAA`. See https://www.baeldung.com/spring-yaml-inject-map","body":"I believe you can make a map directly from the cconfigurations by structuring the yaml differently.. Use the value of the type and the value of the path directly instead of specifying <code>type: ...</code> and <code>value: ...</code>. So under <code>configurations:</code> a line could be <code>a: AAA</code>. See <a href=\"https://www.baeldung.com/spring-yaml-inject-map\" rel=\"nofollow noreferrer\">baeldung.com/spring-yaml-inject-map</a>"},{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":0,"creation_date":1683205124,"post_id":76173167,"comment_id":134333005,"body_markdown":"Update: I tested this, and it seems like it only works for propery-classes marked with `@ConfigurationProperties`, not directly with `@Value`. Refer to Ganael D&#39;s answer for a working case.","body":"Update: I tested this, and it seems like it only works for propery-classes marked with <code>@ConfigurationProperties</code>, not directly with <code>@Value</code>. Refer to Ganael D&#39;s answer for a working case."}],"answers":[{"tags":[],"owner":{"account_id":28494009,"reputation":77,"user_id":21806227,"display_name":"Ganael D"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683272882,"creation_date":1683204546,"answer_id":76173389,"question_id":76173167,"body_markdown":"I faced a similar problem not too long ago. What I did was using a second config class and annotating it with a few Spring Boot annotations. You can create the following class:\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@Configuration\r\n@EnableConfigurationProperties\r\n@ConfigurationProperties(prefix = &quot;bandwidth&quot;)\r\npublic class Config {\r\n\r\n    private List&lt;Map&lt;String, String&gt;&gt; configurations;\r\n\r\n}\r\n```\r\nWhat it&#39;s gonna do is create a class that will look for the `configurations` property of the property you&#39;ll have given in the prefix parameter of @ConfigurationProperties in the application.yml file and store it in an attribute. This class needs a getter and a setter for this attribute, which are created here thanks to `@Getter` and `@Setter`.\r\n\r\nYou could then get the config in your Controller simply by providing it as an autowired `Config` attribute:\r\n\r\n```\r\n@Autowired\r\nprivate Config config;\r\n\r\n@GetMapping(&quot;/config&quot;)\r\n@ResponseBody(produces = {MediaType.APPLICATION_JSON_VALUE})\r\n    public List&lt;Map&lt;String,String&gt;&gt; getListOfPath() {\r\n        return this.config.getConfigurations();\r\n    }\r\n```\r\n\r\n\r\n&lt;hr&gt;\r\n\r\n&lt;i&gt;Please note&lt;/i&gt; that if your config properties contain `-`, you&#39;re gonna have to store that in a list. While it makes sense to do that with your configuration objects, it seems inappropriate for the property `configurations`. I would change your configuration file to:\r\n\r\n```\r\nbandwidth:\r\n    configurations:\r\n        - type: a\r\n          path: AAA\r\n        - type: e\r\n          path: TTT\r\n        - type: I\r\n          path: FFF\r\n        - type: o\r\n          path: XXX\r\n```\r\n\r\nIf you don&#39;t remove the `-` in front of configurations, you&#39;re gonna need to tweak my solution to take that into account.","title":"Spring controller returns a list of values from application configuration file","body":"<p>I faced a similar problem not too long ago. What I did was using a second config class and annotating it with a few Spring Boot annotations. You can create the following class:</p>\n<pre><code>@Getter\n@Setter\n@Configuration\n@EnableConfigurationProperties\n@ConfigurationProperties(prefix = &quot;bandwidth&quot;)\npublic class Config {\n\n    private List&lt;Map&lt;String, String&gt;&gt; configurations;\n\n}\n</code></pre>\n<p>What it's gonna do is create a class that will look for the <code>configurations</code> property of the property you'll have given in the prefix parameter of @ConfigurationProperties in the application.yml file and store it in an attribute. This class needs a getter and a setter for this attribute, which are created here thanks to <code>@Getter</code> and <code>@Setter</code>.</p>\n<p>You could then get the config in your Controller simply by providing it as an autowired <code>Config</code> attribute:</p>\n<pre><code>@Autowired\nprivate Config config;\n\n@GetMapping(&quot;/config&quot;)\n@ResponseBody(produces = {MediaType.APPLICATION_JSON_VALUE})\n    public List&lt;Map&lt;String,String&gt;&gt; getListOfPath() {\n        return this.config.getConfigurations();\n    }\n</code></pre>\n<hr>\n<p><i>Please note</i> that if your config properties contain <code>-</code>, you're gonna have to store that in a list. While it makes sense to do that with your configuration objects, it seems inappropriate for the property <code>configurations</code>. I would change your configuration file to:</p>\n<pre><code>bandwidth:\n    configurations:\n        - type: a\n          path: AAA\n        - type: e\n          path: TTT\n        - type: I\n          path: FFF\n        - type: o\n          path: XXX\n</code></pre>\n<p>If you don't remove the <code>-</code> in front of configurations, you're gonna need to tweak my solution to take that into account.</p>\n"},{"tags":[],"owner":{"account_id":3674719,"reputation":520,"user_id":3061062,"display_name":"NicoESIEA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683296451,"creation_date":1683296451,"answer_id":76183186,"question_id":76173167,"body_markdown":"Thank you very much @Ganael D&lt;br/&gt;\r\nThe solution I did is pretty similar but a bit longer than yours:&lt;br/&gt;\r\n\r\n - The class where I have &quot;public static void main&quot; method I added &quot;@EnableConfigurationProperties({ApplicationProperties.class})&quot;\r\n - Where &quot;ApplicationProperties&quot; is a new class where I added &quot;@ConfigurationProperties(prefix = &quot;application&quot;)&quot;\r\n - In my configuration file, I just added this &quot;application&quot; on the top of my list like:\r\n```\r\n    application:\r\n       stuff:\r\n         disks:\r\n            - name: &quot;aa&quot;\r\n              path: &quot;XXX&quot;\r\n            - name: &quot;bb&quot;\r\n              path: &quot;ZZZ&quot;\r\n```\r\n - and &quot;ApplicationProperties&quot; class matches the content of my application object (here it has an attribute stuff, having a list of {name, path} object in an array named disks\r\n\r\nAnd it is working fine.&lt;br/&gt;\r\nThank you very much for the time you spent helping me :)","title":"Spring controller returns a list of values from application configuration file","body":"<p>Thank you very much @Ganael D<br/>\nThe solution I did is pretty similar but a bit longer than yours:<br/></p>\n<ul>\n<li>The class where I have &quot;public static void main&quot; method I added &quot;@EnableConfigurationProperties({ApplicationProperties.class})&quot;</li>\n<li>Where &quot;ApplicationProperties&quot; is a new class where I added &quot;@ConfigurationProperties(prefix = &quot;application&quot;)&quot;</li>\n<li>In my configuration file, I just added this &quot;application&quot; on the top of my list like:</li>\n</ul>\n<pre><code>    application:\n       stuff:\n         disks:\n            - name: &quot;aa&quot;\n              path: &quot;XXX&quot;\n            - name: &quot;bb&quot;\n              path: &quot;ZZZ&quot;\n</code></pre>\n<ul>\n<li>and &quot;ApplicationProperties&quot; class matches the content of my application object (here it has an attribute stuff, having a list of {name, path} object in an array named disks</li>\n</ul>\n<p>And it is working fine.<br/>\nThank you very much for the time you spent helping me :)</p>\n"}],"owner":{"account_id":3674719,"reputation":520,"user_id":3061062,"display_name":"NicoESIEA"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76173389,"answer_count":2,"score":0,"last_activity_date":1683296451,"creation_date":1683203197,"question_id":76173167,"body_markdown":"My problem seems very simple, but I&#39;m blocked on it for 2 hours.\r\nI&#39;m using Java with Spring and I want to save a map of string information (key, value) in the application.yaml file. \r\nThen I want to return it from a controller exposed to a frontend application.\r\n\r\nMy first solution was to use this structure in the configuration file:\r\n```\r\nbandwidth:\r\n  - configurations:\r\n    - type: a\r\n      path: AAA\r\n    - type: e\r\n      path: TTT\r\n    - type: I\r\n      path: FFF\r\n    - type: o\r\n      path: XXX\r\n````\r\n\r\nAnd to create a constructor like:\r\n````\r\nimport ...\r\n\r\n@RestController\r\n@RequestMapping(&quot;/bandwidth&quot;)\r\npublic class BandwidthController {\r\n\r\n    @Value(&quot;${bandwidth.configurations}&quot;)\r\n    private Map&lt;String,String&gt; configurations;\r\n\r\n    @GetMapping(&quot;/config&quot;)\r\n    public Map&lt;String,String&gt; getListOfPath() {\r\n        return this.configurations;\r\n    }\r\n}\r\n````\r\n\r\nDoes someone can give me a working example of a solution for this case?\r\n","title":"Spring controller returns a list of values from application configuration file","body":"<p>My problem seems very simple, but I'm blocked on it for 2 hours.\nI'm using Java with Spring and I want to save a map of string information (key, value) in the application.yaml file.\nThen I want to return it from a controller exposed to a frontend application.</p>\n<p>My first solution was to use this structure in the configuration file:</p>\n<pre><code>bandwidth:\n  - configurations:\n    - type: a\n      path: AAA\n    - type: e\n      path: TTT\n    - type: I\n      path: FFF\n    - type: o\n      path: XXX\n</code></pre>\n<p>And to create a constructor like:</p>\n<pre><code>import ...\n\n@RestController\n@RequestMapping(&quot;/bandwidth&quot;)\npublic class BandwidthController {\n\n    @Value(&quot;${bandwidth.configurations}&quot;)\n    private Map&lt;String,String&gt; configurations;\n\n    @GetMapping(&quot;/config&quot;)\n    public Map&lt;String,String&gt; getListOfPath() {\n        return this.configurations;\n    }\n}\n</code></pre>\n<p>Does someone can give me a working example of a solution for this case?</p>\n"},{"tags":["java","sockets","arraylist"],"answers":[{"tags":[],"owner":{"account_id":10720235,"reputation":30,"user_id":7889573,"display_name":"Rabia Yurdakul"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683296324,"creation_date":1683296324,"answer_id":76183168,"question_id":76182989,"body_markdown":"I think, you can modify the broadcast method to use a single ObjectOutputStream instance to write to the socket instead of using separate instances for each client. By creating the Packet object outside of the loop and using a single dout instance to write to the socket, you can ensure that all clients receive the updated messageGlobalStorage list. \r\nCould you try this? \r\n\r\n    void broadcast() throws IOException {\r\n        Packet packet = new Packet(Packet.Commands.TCGETMSG,messageGlobalStorage);\r\n        for (ObjectOutputStream dout : userOnlineMap.values()) {\r\n            dout.writeObject(packet);\r\n            dout.reset();\r\n        }\r\n    }\r\n\r\n","title":"Java arrayList empty after going over a socket","body":"<p>I think, you can modify the broadcast method to use a single ObjectOutputStream instance to write to the socket instead of using separate instances for each client. By creating the Packet object outside of the loop and using a single dout instance to write to the socket, you can ensure that all clients receive the updated messageGlobalStorage list.\nCould you try this?</p>\n<pre><code>void broadcast() throws IOException {\n    Packet packet = new Packet(Packet.Commands.TCGETMSG,messageGlobalStorage);\n    for (ObjectOutputStream dout : userOnlineMap.values()) {\n        dout.writeObject(packet);\n        dout.reset();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16298740,"reputation":131,"user_id":11770369,"display_name":"Hugo Chittaro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76183168,"answer_count":1,"score":0,"last_activity_date":1683296324,"creation_date":1683295114,"question_id":76182989,"body_markdown":"I&#39;ve been working on a chat application using a java.io socket. \r\n\r\nContext : A client sends a Message object encapsulated in a Packet object over a socket. Once the server retrieves the Packet, it broadcast an Arraylist containing all Message to a client.\r\n\r\nMy problem is that on the server side (before sending over the socket), the payload of the packet is as intended (an Arraylist with messages the client send), and when receive by a client (after the socket), the Arraylist of messages is empty (the debugger tells me that the arraylist has a size = 0 and I can&#39;t retrieve any message). I didn&#39;t find anything online about this and the debugger didn&#39;t help me much.\r\n\r\nHere is the code used (The packet class containts command specifying if it&#39;s To Client (TC) or From Client(FC)) :\r\n\r\nClient side :\r\n\r\n```\r\npublic void run(){\r\n    try {\r\n        while(true){\r\n            packet = (Packet) streamFromServer.readObject();\r\n            switch (packet.command){\r\n                case TCGETMSG:\r\n                    messageGlobalStorage = (ArrayList&lt;Message&gt;)packet.payload;\r\n                    break;\r\n                case TCGETUSERS:\r\n                    usersOnline = (DefaultListModel&lt;User&gt;) packet.payload;\r\n                    break;\r\n                case TCGETSTATS:\r\n                    System.out.println(&quot;Getting stats&quot;);\r\n                    break;\r\n                default:\r\n                    //Add undefined packet handling\r\n                    break;\r\n            }\r\n        }\r\n    }catch (IOException | ClassNotFoundException e){\r\n        e.printStackTrace();\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic boolean sendMessage(Message message) {\r\n    try {\r\n        streamToServer.writeObject(new Packet(Packet.Commands.FCSENDMSG, message));\r\n        return true;\r\n    }catch (IOException e) {\r\n         e.printStackTrace();\r\n    }\r\n    return false;\r\n} \r\n```\r\n\r\nServer side :\r\n```\r\nprivate void threadRoutine() throws IOException, ClassNotFoundException{\r\n    try {\r\n        //Receiving from the client =&gt; Inverse logic : SENDMSG = retreive message; \r\n        //GETMSG = broadcast message to client\r\n        while (true){\r\n            Packet packet = (Packet) din.readObject();\r\n            switch (packet.command){\r\n                case FCSENDMSG:\r\n                    server.messageGlobalStorage.add((Message) packet.payload);\r\n                    server.broadcast((Message) packet.payload);\r\n                    break;\r\n                case FCGETMSG:\r\n                    Packet temp = new Packet(Packet.Commands.TCGETMSG, server.messageGlobalStorage);\r\n                    dout.writeObject(temp);\r\n                    break;\r\n                case FCGETUSERS:\r\n                    dout.writeObject(new Packet(Packet.Commands.TCGETUSERS, server.userOnlineMap.keySet()));\r\n                    break;\r\n                case FCGETSTATS:\r\n                    //Add Stats handling\r\n                    break;\r\n                default:\r\n                    //Add undefined packet handling\r\n                    break;\r\n           }\r\n      }\r\n    }finally {\r\n        server.removeConnection(socket);\r\n        System.out.println(&quot;Removing connection&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```\r\nvoid broadcast() throws IOException{\r\n    for (ObjectOutputStream dout : userOnlineMap.values()){\r\n        dout.writeObject(new Packet(Packet.Commands.TCGETMSG, messageGlobalStorage));\r\n    }\r\n}\r\n```\r\n\r\nIf the code of the Packet / Message class is needed, tell me I&#39;ll add it to this post. \r\n\r\nThank you.\r\n","title":"Java arrayList empty after going over a socket","body":"<p>I've been working on a chat application using a java.io socket.</p>\n<p>Context : A client sends a Message object encapsulated in a Packet object over a socket. Once the server retrieves the Packet, it broadcast an Arraylist containing all Message to a client.</p>\n<p>My problem is that on the server side (before sending over the socket), the payload of the packet is as intended (an Arraylist with messages the client send), and when receive by a client (after the socket), the Arraylist of messages is empty (the debugger tells me that the arraylist has a size = 0 and I can't retrieve any message). I didn't find anything online about this and the debugger didn't help me much.</p>\n<p>Here is the code used (The packet class containts command specifying if it's To Client (TC) or From Client(FC)) :</p>\n<p>Client side :</p>\n<pre><code>public void run(){\n    try {\n        while(true){\n            packet = (Packet) streamFromServer.readObject();\n            switch (packet.command){\n                case TCGETMSG:\n                    messageGlobalStorage = (ArrayList&lt;Message&gt;)packet.payload;\n                    break;\n                case TCGETUSERS:\n                    usersOnline = (DefaultListModel&lt;User&gt;) packet.payload;\n                    break;\n                case TCGETSTATS:\n                    System.out.println(&quot;Getting stats&quot;);\n                    break;\n                default:\n                    //Add undefined packet handling\n                    break;\n            }\n        }\n    }catch (IOException | ClassNotFoundException e){\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<pre><code>public boolean sendMessage(Message message) {\n    try {\n        streamToServer.writeObject(new Packet(Packet.Commands.FCSENDMSG, message));\n        return true;\n    }catch (IOException e) {\n         e.printStackTrace();\n    }\n    return false;\n} \n</code></pre>\n<p>Server side :</p>\n<pre><code>private void threadRoutine() throws IOException, ClassNotFoundException{\n    try {\n        //Receiving from the client =&gt; Inverse logic : SENDMSG = retreive message; \n        //GETMSG = broadcast message to client\n        while (true){\n            Packet packet = (Packet) din.readObject();\n            switch (packet.command){\n                case FCSENDMSG:\n                    server.messageGlobalStorage.add((Message) packet.payload);\n                    server.broadcast((Message) packet.payload);\n                    break;\n                case FCGETMSG:\n                    Packet temp = new Packet(Packet.Commands.TCGETMSG, server.messageGlobalStorage);\n                    dout.writeObject(temp);\n                    break;\n                case FCGETUSERS:\n                    dout.writeObject(new Packet(Packet.Commands.TCGETUSERS, server.userOnlineMap.keySet()));\n                    break;\n                case FCGETSTATS:\n                    //Add Stats handling\n                    break;\n                default:\n                    //Add undefined packet handling\n                    break;\n           }\n      }\n    }finally {\n        server.removeConnection(socket);\n        System.out.println(&quot;Removing connection&quot;);\n    }\n}\n</code></pre>\n<pre><code>void broadcast() throws IOException{\n    for (ObjectOutputStream dout : userOnlineMap.values()){\n        dout.writeObject(new Packet(Packet.Commands.TCGETMSG, messageGlobalStorage));\n    }\n}\n</code></pre>\n<p>If the code of the Packet / Message class is needed, tell me I'll add it to this post.</p>\n<p>Thank you.</p>\n"},{"tags":["java","log4j2","maven-shade-plugin"],"comments":[{"owner":{"account_id":12482065,"reputation":7327,"user_id":9086466,"display_name":"Ctznkane525"},"score":1,"creation_date":1514636247,"post_id":48033792,"comment_id":83037672,"body_markdown":"you want to ask a question here.  I see an error, but no question.","body":"you want to ask a question here.  I see an error, but no question."},{"owner":{"account_id":3333882,"reputation":769,"user_id":2802069,"display_name":"CoderMeng"},"score":1,"creation_date":1514640858,"post_id":48033792,"comment_id":83038731,"body_markdown":"i want to know how to solve this error","body":"i want to know how to solve this error"},{"owner":{"account_id":313216,"reputation":44997,"user_id":627727,"accept_rate":84,"display_name":"mkobit"},"score":1,"creation_date":1551299323,"post_id":48033792,"comment_id":96594234,"body_markdown":"With Java 11, we&#39;ve ran into similar problems due to the locale - see https://issues.apache.org/jira/browse/LOG4J2-2435","body":"With Java 11, we&#39;ve ran into similar problems due to the locale - see <a href=\"https://issues.apache.org/jira/browse/LOG4J2-2435\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/LOG4J2-2435</a>"}],"answers":[{"tags":[],"owner":{"account_id":1555751,"reputation":35615,"user_id":1446916,"display_name":"Remko Popma"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1514678458,"creation_date":1514678458,"answer_id":48038902,"question_id":48033792,"body_markdown":"I’ve seen this error before when people had multiple versions of Log4j2 on the classpath. ","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>I’ve seen this error before when people had multiple versions of Log4j2 on the classpath. </p>\n"},{"tags":[],"owner":{"account_id":1466418,"reputation":1141,"user_id":1379107,"display_name":"Shashank Kapoor"},"down_vote_count":0,"up_vote_count":97,"is_accepted":false,"score":97,"last_activity_date":1683295751,"creation_date":1540187904,"answer_id":52923153,"question_id":48033792,"body_markdown":"If a dependency contains log4j2 plugin, a `Log4j2Plugins.dat` cache file is included in the jar. When the Maven shade plugin is used to merge multiple jars with a `Log4j2Plugins.dat` file, only one will survive. Without the plugin definitions, errors are shown on startup. [Log4j2 issue](https://issues.apache.org/jira/browse/LOG4J2-673)\r\n\r\nOne solution for this is excluding `Log4j2Plugins.dat` cache file from shaded jar so that Log4j scans for plugins on startup. For this, add a filter in `maven-shade-plugin` configuration in your pom:\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;3.1.0&lt;/version&gt;\r\n  &lt;configuration&gt;\r\n    &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\r\n    &lt;filters&gt;\r\n      &lt;filter&gt;\r\n        &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n        &lt;excludes&gt;\r\n          &lt;exclude&gt;**/Log4j2Plugins.dat&lt;/exclude&gt;\r\n        &lt;/excludes&gt;\r\n      &lt;/filter&gt;\r\n    &lt;/filters&gt;\r\n  &lt;/configuration&gt;\r\n  &lt;!-- ... --&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nAnother solution is to merge the cache files using a [transformation plugin](https://github.com/edwgiz/maven-shaded-log4j-transformer) which is log4j version specific.\r\n","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>If a dependency contains log4j2 plugin, a <code>Log4j2Plugins.dat</code> cache file is included in the jar. When the Maven shade plugin is used to merge multiple jars with a <code>Log4j2Plugins.dat</code> file, only one will survive. Without the plugin definitions, errors are shown on startup. <a href=\"https://issues.apache.org/jira/browse/LOG4J2-673\" rel=\"noreferrer\">Log4j2 issue</a></p>\n<p>One solution for this is excluding <code>Log4j2Plugins.dat</code> cache file from shaded jar so that Log4j scans for plugins on startup. For this, add a filter in <code>maven-shade-plugin</code> configuration in your pom:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.1.0&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\n    &lt;filters&gt;\n      &lt;filter&gt;\n        &lt;artifact&gt;*:*&lt;/artifact&gt;\n        &lt;excludes&gt;\n          &lt;exclude&gt;**/Log4j2Plugins.dat&lt;/exclude&gt;\n        &lt;/excludes&gt;\n      &lt;/filter&gt;\n    &lt;/filters&gt;\n  &lt;/configuration&gt;\n  &lt;!-- ... --&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Another solution is to merge the cache files using a <a href=\"https://github.com/edwgiz/maven-shaded-log4j-transformer\" rel=\"noreferrer\">transformation plugin</a> which is log4j version specific.</p>\n"},{"tags":[],"owner":{"account_id":3725646,"reputation":191,"user_id":3099619,"display_name":"philuX"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1587766299,"creation_date":1587766299,"answer_id":61418220,"question_id":48033792,"body_markdown":"\r\nUnfortunately, I can&#39;t reply to Shashank Kapoor answer, as he correctly pointed out excluding the `Log4j2Plugins.dat` file solves the issue. This did the trick for me while using gradle:\r\n\r\n```\r\nshadowJar {\r\n    exclude &quot;**/Log4j2Plugins.dat&quot;\r\n}\r\n```\r\n ","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>Unfortunately, I can't reply to Shashank Kapoor answer, as he correctly pointed out excluding the <code>Log4j2Plugins.dat</code> file solves the issue. This did the trick for me while using gradle:</p>\n\n<pre><code>shadowJar {\n    exclude \"**/Log4j2Plugins.dat\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1440651,"reputation":2387,"user_id":1360907,"accept_rate":50,"display_name":"Chris Xue"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1683295947,"creation_date":1588062216,"answer_id":61475766,"question_id":48033792,"body_markdown":"If you are using Gradle and ShadowJar 4+:\r\n\r\n```groovy\r\nshadowJar {\r\n  transform(com.github.jengelman.gradle.plugins.shadow.transformers.Log4j2PluginsCacheFileTransformer)\r\n}\r\n```\r\n\r\nGradle Kotlin DSL:\r\n\r\n```groovy\r\nshadowJar {\r\n  transform(com.github.jengelman.gradle.plugins.shadow.transformers.Log4j2PluginsCacheFileTransformer::class.java)\r\n}\r\n```","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>If you are using Gradle and ShadowJar 4+:</p>\n<pre><code>shadowJar {\n  transform(com.github.jengelman.gradle.plugins.shadow.transformers.Log4j2PluginsCacheFileTransformer)\n}\n</code></pre>\n<p>Gradle Kotlin DSL:</p>\n<pre><code>shadowJar {\n  transform(com.github.jengelman.gradle.plugins.shadow.transformers.Log4j2PluginsCacheFileTransformer::class.java)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1641397520,"creation_date":1640619677,"answer_id":70497559,"question_id":48033792,"body_markdown":"For those of us who are removing the older Logj42 from our classpaths to remediate the Log4Shell (CVE-2021-44228) vulnerability, you may find you have this issue when using your uber jars after you upgrade. \r\n\r\nIf you are building your uber jars from Maven or Gradle, use one of the plugins respectively: \r\n\r\n* Maven: https://maven.apache.org/plugins/maven-shade-plugin/ with https://github.com/edwgiz/maven-shaded-log4j-transformer\r\n* Gradle: https://plugins.gradle.org/plugin/com.github.johnrengelman.shadow\r\n\r\nif you are building them by some other means, see this answer: https://stackoverflow.com/a/70497498/1174024. But basically you have to properly handle Log4j2 plugin cache files as this class does:\r\n\r\nhttps://github.com/edwgiz/maven-shaded-log4j-transformer/blob/master/src/main/java/io/github/edwgiz/log4j/maven/plugins/shade/transformer/Log4j2PluginCacheFileTransformer.java\r\n\r\nto properly handle the `Log4j2Plugins.dat` file when building the new uber jar.","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>For those of us who are removing the older Logj42 from our classpaths to remediate the Log4Shell (CVE-2021-44228) vulnerability, you may find you have this issue when using your uber jars after you upgrade.</p>\n<p>If you are building your uber jars from Maven or Gradle, use one of the plugins respectively:</p>\n<ul>\n<li>Maven: <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-shade-plugin/</a> with <a href=\"https://github.com/edwgiz/maven-shaded-log4j-transformer\" rel=\"nofollow noreferrer\">https://github.com/edwgiz/maven-shaded-log4j-transformer</a></li>\n<li>Gradle: <a href=\"https://plugins.gradle.org/plugin/com.github.johnrengelman.shadow\" rel=\"nofollow noreferrer\">https://plugins.gradle.org/plugin/com.github.johnrengelman.shadow</a></li>\n</ul>\n<p>if you are building them by some other means, see this answer: <a href=\"https://stackoverflow.com/a/70497498/1174024\">https://stackoverflow.com/a/70497498/1174024</a>. But basically you have to properly handle Log4j2 plugin cache files as this class does:</p>\n<p><a href=\"https://github.com/edwgiz/maven-shaded-log4j-transformer/blob/master/src/main/java/io/github/edwgiz/log4j/maven/plugins/shade/transformer/Log4j2PluginCacheFileTransformer.java\" rel=\"nofollow noreferrer\">https://github.com/edwgiz/maven-shaded-log4j-transformer/blob/master/src/main/java/io/github/edwgiz/log4j/maven/plugins/shade/transformer/Log4j2PluginCacheFileTransformer.java</a></p>\n<p>to properly handle the <code>Log4j2Plugins.dat</code> file when building the new uber jar.</p>\n"},{"tags":[],"owner":{"account_id":67666,"reputation":4579,"user_id":197896,"accept_rate":77,"display_name":"anhldbk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667919510,"creation_date":1667919510,"answer_id":74362813,"question_id":48033792,"body_markdown":"This [link][1] works for me. There&#39;s a problem while shading log4j \r\n\r\n    &lt;filter&gt;\r\n        &lt;artifact&gt;log4j:log4j&lt;/artifact&gt;\r\n        &lt;includes&gt;\r\n            &lt;include&gt;org/apache/log4j/spi/LoggingEvent.class&lt;/include&gt;\r\n        &lt;/includes&gt;\r\n    &lt;/filter&gt;\r\n    &lt;filter&gt;\r\n        &lt;artifact&gt;org.apache.logging.log4j:log4j-*&lt;/artifact&gt;\r\n        &lt;includes&gt;\r\n            &lt;include&gt;**&lt;/include&gt;\r\n        &lt;/includes&gt;\r\n    &lt;/filter&gt;\r\n\r\n  [1]: https://github.com/fbacchella/LogHub/blob/master/pom.xml\r\n","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>This <a href=\"https://github.com/fbacchella/LogHub/blob/master/pom.xml\" rel=\"nofollow noreferrer\">link</a> works for me. There's a problem while shading log4j</p>\n<pre><code>&lt;filter&gt;\n    &lt;artifact&gt;log4j:log4j&lt;/artifact&gt;\n    &lt;includes&gt;\n        &lt;include&gt;org/apache/log4j/spi/LoggingEvent.class&lt;/include&gt;\n    &lt;/includes&gt;\n&lt;/filter&gt;\n&lt;filter&gt;\n    &lt;artifact&gt;org.apache.logging.log4j:log4j-*&lt;/artifact&gt;\n    &lt;includes&gt;\n        &lt;include&gt;**&lt;/include&gt;\n    &lt;/includes&gt;\n&lt;/filter&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14346618,"reputation":13,"user_id":10363335,"display_name":"Cenfal Bahadır"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670607595,"creation_date":1670607595,"answer_id":74746536,"question_id":48033792,"body_markdown":"    @PowerMockIgnore( {&quot;org.springframework.util.Log4jConfigurer&quot;,&quot;javax.script.*&quot;,&quot;javax.management.*&quot;, &quot;org.w3c.dom.*&quot;, &quot;org.apache.log4j.*&quot;,&quot;org.apache.logging.*&quot;,&quot;org.apache.commons.logging.*&quot;, &quot;org.xml.sax.*&quot;,   &quot;javax.xml.*&quot;})\r\n\r\nadded this snippet to the test class. No error log anymore.\r\n\r\n","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<pre><code>@PowerMockIgnore( {&quot;org.springframework.util.Log4jConfigurer&quot;,&quot;javax.script.*&quot;,&quot;javax.management.*&quot;, &quot;org.w3c.dom.*&quot;, &quot;org.apache.log4j.*&quot;,&quot;org.apache.logging.*&quot;,&quot;org.apache.commons.logging.*&quot;, &quot;org.xml.sax.*&quot;,   &quot;javax.xml.*&quot;})\n</code></pre>\n<p>added this snippet to the test class. No error log anymore.</p>\n"},{"tags":[],"owner":{"account_id":16532789,"reputation":294,"user_id":11945573,"display_name":"Leonis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672072462,"creation_date":1672072462,"answer_id":74922216,"question_id":48033792,"body_markdown":"On our project, such a problem arose after the creation of the `TestAppender` class. \r\n\r\n```\r\n@Plugin(name = &quot;TestAppender&quot;, category = Core.CATEGORY_NAME, elementType = Appender.ELEMENT_TYPE)\r\npublic class TestAppender extends AbstractAppender {\r\n...\r\n```\r\n\r\nIts settings overwrote the logger settings in the `Log4j2Plugins.dat` file.\r\n\r\nThen we moved it to a separate module and began to attach it to the project in a similar way (please, pay attention to scope):\r\n\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;info.project&lt;/groupId&gt;\r\n  &lt;artifactId&gt;test&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n  &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>On our project, such a problem arose after the creation of the <code>TestAppender</code> class.</p>\n<pre><code>@Plugin(name = &quot;TestAppender&quot;, category = Core.CATEGORY_NAME, elementType = Appender.ELEMENT_TYPE)\npublic class TestAppender extends AbstractAppender {\n...\n</code></pre>\n<p>Its settings overwrote the logger settings in the <code>Log4j2Plugins.dat</code> file.</p>\n<p>Then we moved it to a separate module and began to attach it to the project in a similar way (please, pay attention to scope):</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;info.project&lt;/groupId&gt;\n  &lt;artifactId&gt;test&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1136523,"reputation":11039,"user_id":1121497,"accept_rate":42,"display_name":"Ferran Maylinch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681377856,"creation_date":1681377856,"answer_id":76003805,"question_id":48033792,"body_markdown":"You can exclude all the `Log4j2Plugins.dat` files except the right one, the one contained in `log4j-core`:\r\n\r\n```xml\r\n&lt;filter&gt;\r\n    &lt;artifact&gt;SOME-ARTIFACT&lt;/artifact&gt;\r\n    &lt;excludes&gt;\r\n        &lt;exclude&gt;**/Log4j2Plugins.dat&lt;/exclude&gt;\r\n    &lt;/excludes&gt;\r\n&lt;/filter&gt;\r\n&lt;filter&gt;\r\n    &lt;artifact&gt;SOME-ARTIFACT&lt;/artifact&gt;\r\n    &lt;excludes&gt;\r\n        &lt;exclude&gt;**/Log4j2Plugins.dat&lt;/exclude&gt;\r\n    &lt;/excludes&gt;\r\n&lt;/filter&gt;\r\n...\r\n```\r\n\r\nSee answer here, with a sample project: https://stackoverflow.com/a/76003471/1121497","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>You can exclude all the <code>Log4j2Plugins.dat</code> files except the right one, the one contained in <code>log4j-core</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;filter&gt;\n    &lt;artifact&gt;SOME-ARTIFACT&lt;/artifact&gt;\n    &lt;excludes&gt;\n        &lt;exclude&gt;**/Log4j2Plugins.dat&lt;/exclude&gt;\n    &lt;/excludes&gt;\n&lt;/filter&gt;\n&lt;filter&gt;\n    &lt;artifact&gt;SOME-ARTIFACT&lt;/artifact&gt;\n    &lt;excludes&gt;\n        &lt;exclude&gt;**/Log4j2Plugins.dat&lt;/exclude&gt;\n    &lt;/excludes&gt;\n&lt;/filter&gt;\n...\n</code></pre>\n<p>See answer here, with a sample project: <a href=\"https://stackoverflow.com/a/76003471/1121497\">https://stackoverflow.com/a/76003471/1121497</a></p>\n"}],"owner":{"account_id":3333882,"reputation":769,"user_id":2802069,"display_name":"CoderMeng"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64959,"favorite_count":0,"down_vote_count":0,"up_vote_count":60,"answer_count":9,"score":60,"last_activity_date":1683295947,"creation_date":1514635729,"question_id":48033792,"body_markdown":"I have log4j2 in my project when I run main method in intellij Idea ,it correct to print log. \r\n\r\nwhen i use maven-shade-plugin package project to jar file, and run jar as standalone application it shows error:\r\n\r\n&gt; java -cp package.jar com.xxx.TestMain\r\n\r\nthe console output\r\n\r\n    ERROR StatusLogger Unrecognized format specifier [d]\r\n    ERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [thread]\r\n    ERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [level]\r\n    ERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [logger]\r\n    ERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [msg]\r\n    ERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [n]\r\n    ERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [d]\r\n    ERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [thread]\r\n    ERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [level]\r\n    ERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [logger]\r\n    ERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [msg]\r\n    ERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.\r\n    ERROR StatusLogger Unrecognized format specifier [n]\r\n    ERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.\r\n\r\npom.xml config . log4j2.version = 2.10.0, spring boot version is 1.5.9.RELEASE\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n            &lt;version&gt;${log4j2.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;${log4j2.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${log4j2.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;shade&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;transformers&gt;\r\n                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n                                    &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\r\n                                &lt;/transformer&gt;\r\n                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n                                    &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\r\n                                &lt;/transformer&gt;\r\n                            &lt;/transformers&gt;\r\n                            &lt;filters&gt;\r\n                                &lt;filter&gt;\r\n                                    &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n                                    &lt;excludes&gt;\r\n                                        &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n                                        &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n                                        &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n                                    &lt;/excludes&gt;\r\n                                &lt;/filter&gt;\r\n                            &lt;/filters&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n        &lt;resources&gt;\r\n            &lt;resource&gt;\r\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n            &lt;/resource&gt;\r\n        &lt;/resources&gt;\r\n        &lt;sourceDirectory&gt;src/main/java&lt;/sourceDirectory&gt;\r\n    &lt;/build&gt;\r\n\r\nlog4j2.xml config\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration status=&quot;debug&quot; monitorInterval=&quot;30&quot; shutdownHook=&quot;disable&quot;&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;LOG_HOME&quot;&gt;/data1/logs&lt;/property&gt;\r\n            &lt;property name=&quot;JOB_NAME&quot;&gt;noname&lt;/property&gt;\r\n        &lt;/properties&gt;\r\n        &lt;Appenders&gt;\r\n            &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n                &lt;PatternLayout pattern=&quot;%date{yyyy-MM-dd HH:mm:ss} [%t] %level [%logger{36}][%file:%line] %msg%n%throwable&quot;/&gt;\r\n            &lt;/Console&gt;\r\n    \r\n            &lt;RollingRandomAccessFile name=&quot;DetailFile&quot;\r\n                                     fileName=&quot;${sys:LOG_HOME}/${sys:JOB_NAME}/detail.log&quot; bufferedIO=&quot;false&quot;\r\n                                     filePattern=&quot;${sys:LOG_HOME}/${sys:JOB_NAME}/detail.%d{yyyy-MM-dd}-%i.log&quot;&gt;\r\n    \r\n                &lt;PatternLayout\r\n                        pattern=&quot;%date{yyyy-MM-dd HH:mm:ss} [%t] %level [%file:%line] %msg%n%throwable&quot;/&gt;\r\n                &lt;Policies&gt;\r\n                    &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n                    &lt;SizeBasedTriggeringPolicy size=&quot;500 MB&quot;/&gt;\r\n                &lt;/Policies&gt;\r\n            &lt;/RollingRandomAccessFile&gt;\r\n            &lt;RollingRandomAccessFile name=&quot;error&quot;\r\n                                     fileName=&quot;${sys:LOG_HOME}/${sys:JOB_NAME}/error.log&quot; bufferedIO=&quot;true&quot;\r\n                                     filePattern=&quot;${sys:LOG_HOME}/${sys:JOB_NAME}/error.%d{yyyy-MM-dd}.log&quot;&gt;\r\n    \r\n                &lt;PatternLayout\r\n                        pattern=&quot;%date{yyyy-MM-dd HH:mm:ss} [%t] %level [%logger{36}:%line] %msg%n%throwable&quot;/&gt;\r\n                &lt;Policies&gt;\r\n                    &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n                &lt;/Policies&gt;\r\n            &lt;/RollingRandomAccessFile&gt;\r\n        &lt;/Appenders&gt;\r\n        &lt;Loggers&gt;\r\n            &lt;Root level=&quot;info&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;DetailFile&quot;/&gt;\r\n                &lt;AppenderRef level=&quot;error&quot; ref=&quot;error&quot;/&gt;\r\n            &lt;/Root&gt;\r\n        &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\n","title":"log4j2 ERROR StatusLogger Unrecognized conversion specifier","body":"<p>I have log4j2 in my project when I run main method in intellij Idea ,it correct to print log. </p>\n\n<p>when i use maven-shade-plugin package project to jar file, and run jar as standalone application it shows error:</p>\n\n<blockquote>\n  <p>java -cp package.jar com.xxx.TestMain</p>\n</blockquote>\n\n<p>the console output</p>\n\n<pre><code>ERROR StatusLogger Unrecognized format specifier [d]\nERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [thread]\nERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [level]\nERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [logger]\nERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [msg]\nERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [n]\nERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [d]\nERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [thread]\nERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [level]\nERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [logger]\nERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [msg]\nERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.\nERROR StatusLogger Unrecognized format specifier [n]\nERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.\n</code></pre>\n\n<p>pom.xml config . log4j2.version = 2.10.0, spring boot version is 1.5.9.RELEASE</p>\n\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;version&gt;1.7.25&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n        &lt;version&gt;${log4j2.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n        &lt;version&gt;${log4j2.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n        &lt;version&gt;${log4j2.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;transformers&gt;\n                            &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt;\n                                &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\n                            &lt;/transformer&gt;\n                            &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt;\n                                &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\n                            &lt;/transformer&gt;\n                        &lt;/transformers&gt;\n                        &lt;filters&gt;\n                            &lt;filter&gt;\n                                &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                &lt;excludes&gt;\n                                    &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                &lt;/excludes&gt;\n                            &lt;/filter&gt;\n                        &lt;/filters&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n    &lt;sourceDirectory&gt;src/main/java&lt;/sourceDirectory&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>log4j2.xml config</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Configuration status=\"debug\" monitorInterval=\"30\" shutdownHook=\"disable\"&gt;\n    &lt;properties&gt;\n        &lt;property name=\"LOG_HOME\"&gt;/data1/logs&lt;/property&gt;\n        &lt;property name=\"JOB_NAME\"&gt;noname&lt;/property&gt;\n    &lt;/properties&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=\"Console\" target=\"SYSTEM_OUT\"&gt;\n            &lt;PatternLayout pattern=\"%date{yyyy-MM-dd HH:mm:ss} [%t] %level [%logger{36}][%file:%line] %msg%n%throwable\"/&gt;\n        &lt;/Console&gt;\n\n        &lt;RollingRandomAccessFile name=\"DetailFile\"\n                                 fileName=\"${sys:LOG_HOME}/${sys:JOB_NAME}/detail.log\" bufferedIO=\"false\"\n                                 filePattern=\"${sys:LOG_HOME}/${sys:JOB_NAME}/detail.%d{yyyy-MM-dd}-%i.log\"&gt;\n\n            &lt;PatternLayout\n                    pattern=\"%date{yyyy-MM-dd HH:mm:ss} [%t] %level [%file:%line] %msg%n%throwable\"/&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy interval=\"1\" modulate=\"true\"/&gt;\n                &lt;SizeBasedTriggeringPolicy size=\"500 MB\"/&gt;\n            &lt;/Policies&gt;\n        &lt;/RollingRandomAccessFile&gt;\n        &lt;RollingRandomAccessFile name=\"error\"\n                                 fileName=\"${sys:LOG_HOME}/${sys:JOB_NAME}/error.log\" bufferedIO=\"true\"\n                                 filePattern=\"${sys:LOG_HOME}/${sys:JOB_NAME}/error.%d{yyyy-MM-dd}.log\"&gt;\n\n            &lt;PatternLayout\n                    pattern=\"%date{yyyy-MM-dd HH:mm:ss} [%t] %level [%logger{36}:%line] %msg%n%throwable\"/&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy interval=\"1\" modulate=\"true\"/&gt;\n            &lt;/Policies&gt;\n        &lt;/RollingRandomAccessFile&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Root level=\"info\"&gt;\n            &lt;AppenderRef ref=\"DetailFile\"/&gt;\n            &lt;AppenderRef level=\"error\" ref=\"error\"/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n"},{"tags":["java","python","google-cloud-dataflow","apache-beam","spotify-scio"],"answers":[{"tags":[],"owner":{"account_id":5174149,"reputation":1216,"user_id":4141845,"display_name":"Reza Rokni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1554163173,"creation_date":1553843408,"answer_id":55412168,"question_id":55401081,"body_markdown":"If you have the ability to extract the timestamp at insertion point to PubSub, you will be able to make use of user-specified timestamps as metadata. The information on how to is documented under the 1.9 SDK. \r\n\r\n[https://cloud.google.com/dataflow/model/pubsub-io#timestamps-and-record-ids][1]\r\n\r\n&quot;You can use user-specified timestamps for precise control over how elements read from Cloud Pub/Sub are assigned to windows in a Dataflow pipeline. &quot;\r\n\r\nAs 1.9 is deprecated, in 2.11 you will need https://beam.apache.org/releases/javadoc/2.11.0/org/apache/beam/sdk/io/gcp/pubsub/PubsubIO.Read.html#withTimestampAttribute-java.lang.String-\r\n\r\n  [1]: https://cloud.google.com/dataflow/model/pubsub-io#timestamps-and-record-ids","title":"Custom timestamp and windowing for Pub/Sub in DataFlow (Apache Beam)","body":"<p>If you have the ability to extract the timestamp at insertion point to PubSub, you will be able to make use of user-specified timestamps as metadata. The information on how to is documented under the 1.9 SDK. </p>\n\n<p><a href=\"https://cloud.google.com/dataflow/model/pubsub-io#timestamps-and-record-ids\" rel=\"nofollow noreferrer\">https://cloud.google.com/dataflow/model/pubsub-io#timestamps-and-record-ids</a></p>\n\n<p>\"You can use user-specified timestamps for precise control over how elements read from Cloud Pub/Sub are assigned to windows in a Dataflow pipeline. \"</p>\n\n<p>As 1.9 is deprecated, in 2.11 you will need <a href=\"https://beam.apache.org/releases/javadoc/2.11.0/org/apache/beam/sdk/io/gcp/pubsub/PubsubIO.Read.html#withTimestampAttribute-java.lang.String-\" rel=\"nofollow noreferrer\">https://beam.apache.org/releases/javadoc/2.11.0/org/apache/beam/sdk/io/gcp/pubsub/PubsubIO.Read.html#withTimestampAttribute-java.lang.String-</a></p>\n"},{"tags":[],"owner":{"account_id":3610250,"reputation":44872,"user_id":3011380,"accept_rate":48,"display_name":"zangw"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683295920,"creation_date":1683295920,"answer_id":76183115,"question_id":55401081,"body_markdown":"One solution is to custom the timestamp of PubSub message through  `withAllowedTimestampSkew` of `WithTimestamps`\r\n\r\n```java\r\n static SerializableFunction&lt;Event, Instant&gt; timestampFn = (Event input) -&gt; new Instant(Objects.requireNonNull(input).getTs());\r\n\r\n...\r\n\r\n PCollection&lt;String&gt; rawMessage = pipeline.apply(&quot;Read PubSub Message&quot;,\r\n                        PubsubIO.readStrings().fromTopic(topic)); \r\n PCollection&lt;Event&gt; events = rawMessage.apply(&quot;Convert to UserEvent&quot;,\r\n                MapElements.into(TypeDescriptor.of(Event.class))\r\n                        .via(Event::fromJSON))\r\n                .apply(&quot;With Timestamp&quot;, WithTimestamps.of(timestampFn).withAllowedTimestampSkew(Duration.standardMinutes(2)));\r\n\r\n PCollection&lt;Event&gt; minute_window_events = events.apply(&quot;Minute Window&quot;,\r\n                Window.&lt;Event&gt;into(FixedWindows.of(Duration.standardMinutes(3)))\r\n                        .triggering(AfterProcessingTime\r\n                                .pastFirstElementInPane()\r\n                                .plusDelayOf(Duration.standardMinutes(1)))\r\n                        .discardingFiredPanes()\r\n                        .withAllowedLateness(Duration.standardMinutes(1))\r\n        );\r\n...\r\n```\r\n\r\nHowever, this method `withAllowedTimestampSkew` will be deprecated per doc\r\n\r\n&gt;  @deprecated This method permits a to elements to be emitted behind the watermark. These\r\n&gt;     elements are considered late, and if behind the {@link Window#withAllowedLateness(Duration)\r\n&gt;    allowed lateness} of a downstream {@link PCollection} may be silently dropped. See\r\n&gt;    https://github.com/apache/beam/issues/18065 for details on a replacement.\r\n\r\nYou could refer to https://github.com/apache/beam/issues/18065 for details on a replacement.\r\n\r\n-------\r\n\r\nAnother solution is `withTimestampAttribute`. You can set an attribute in pubsub messages that contains the `timestamp` field.\r\n\r\nWhen publishing a message to PubSub\r\n\r\n```java\r\np.apply(PubsubIO.writeString().withTimestampAttribute(&quot;timestamp&quot;).to(topic));\r\n```\r\n\r\nAnd when Subscribing:\r\n\r\n```\r\np.apply(PubsubIO.readString().fromTopic(topic).withTimestampAttribute(&quot;timestamp&quot;))\r\n```","title":"Custom timestamp and windowing for Pub/Sub in DataFlow (Apache Beam)","body":"<p>One solution is to custom the timestamp of PubSub message through  <code>withAllowedTimestampSkew</code> of <code>WithTimestamps</code></p>\n<pre class=\"lang-java prettyprint-override\"><code> static SerializableFunction&lt;Event, Instant&gt; timestampFn = (Event input) -&gt; new Instant(Objects.requireNonNull(input).getTs());\n\n...\n\n PCollection&lt;String&gt; rawMessage = pipeline.apply(&quot;Read PubSub Message&quot;,\n                        PubsubIO.readStrings().fromTopic(topic)); \n PCollection&lt;Event&gt; events = rawMessage.apply(&quot;Convert to UserEvent&quot;,\n                MapElements.into(TypeDescriptor.of(Event.class))\n                        .via(Event::fromJSON))\n                .apply(&quot;With Timestamp&quot;, WithTimestamps.of(timestampFn).withAllowedTimestampSkew(Duration.standardMinutes(2)));\n\n PCollection&lt;Event&gt; minute_window_events = events.apply(&quot;Minute Window&quot;,\n                Window.&lt;Event&gt;into(FixedWindows.of(Duration.standardMinutes(3)))\n                        .triggering(AfterProcessingTime\n                                .pastFirstElementInPane()\n                                .plusDelayOf(Duration.standardMinutes(1)))\n                        .discardingFiredPanes()\n                        .withAllowedLateness(Duration.standardMinutes(1))\n        );\n...\n</code></pre>\n<p>However, this method <code>withAllowedTimestampSkew</code> will be deprecated per doc</p>\n<blockquote>\n<p>@deprecated This method permits a to elements to be emitted behind the watermark. These\nelements are considered late, and if behind the {@link Window#withAllowedLateness(Duration)\nallowed lateness} of a downstream {@link PCollection} may be silently dropped. See\n<a href=\"https://github.com/apache/beam/issues/18065\" rel=\"nofollow noreferrer\">https://github.com/apache/beam/issues/18065</a> for details on a replacement.</p>\n</blockquote>\n<p>You could refer to <a href=\"https://github.com/apache/beam/issues/18065\" rel=\"nofollow noreferrer\">https://github.com/apache/beam/issues/18065</a> for details on a replacement.</p>\n<hr />\n<p>Another solution is <code>withTimestampAttribute</code>. You can set an attribute in pubsub messages that contains the <code>timestamp</code> field.</p>\n<p>When publishing a message to PubSub</p>\n<pre class=\"lang-java prettyprint-override\"><code>p.apply(PubsubIO.writeString().withTimestampAttribute(&quot;timestamp&quot;).to(topic));\n</code></pre>\n<p>And when Subscribing:</p>\n<pre><code>p.apply(PubsubIO.readString().fromTopic(topic).withTimestampAttribute(&quot;timestamp&quot;))\n</code></pre>\n"}],"owner":{"account_id":2208212,"reputation":10321,"user_id":1955346,"accept_rate":80,"display_name":"Marcin Zablocki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3487,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1683295920,"creation_date":1553786043,"question_id":55401081,"body_markdown":"I want to implement the following scenario using streaming pipeline in Apache Beam (and running it on Google DataFlow):\r\n\r\n1. Read messages from Pub/Sub (JSON strings)\r\n1. Deserialize JSONs\r\n1. Use custom field (say `timeStamp`) as a timestamp value for the processing element\r\n1. Apply fixed windowing of `60 seconds`\r\n1. Extract key from elemtents and group by key\r\n1. &lt;&lt; perform further processing &gt;&gt;\r\n\r\nI&#39;ve tried to resolve this problem using both Java(Scala) and Python, but non of the solution worked.\r\n\r\n1. **Python solution**\r\n```python\r\n# p is beam.Pipeline()\r\n_ = (p | beam.io.ReadFromPubSub(subscription=&quot;my_sub&quot;)\r\n        | beam.Map(add_timestamping)\r\n        | beam.WindowInto(window.FixedWindows(60))\r\n        | beam.Map(lambda elem: elem) # exracting the key somehow, not relevant here\r\n        | beam.GroupByKey()\r\n        # (...)\r\n        | beam.io.WriteToPubSub(&quot;output_topic&quot;)\r\n        )\r\np.run()\r\n```\r\n`add_timestamping` function as per [documentation](https://beam.apache.org/documentation/programming-guide/#adding-timestamps-to-a-pcollections-elements): \r\n\r\n```python\r\ndef add_timestamping(elem):\r\n    import json\r\n    import apache_beam as beam\r\n    msg = json.loads(elem)\r\n    unix_timestamp = msg[&#39;timeStamp&#39;] / 1000\r\n    return beam.window.TimestampedValue(msg, unix_timestamp)\r\n```\r\n\r\n**Output of Python solution**:\r\n\r\n1. When using `DirectRunner`, windows are emitted and the windowing itself is more-or-less appropriate, depending on the delay.\r\n1. When using `DataFlowRunner`, **ALL messages are skipped** with counter appearing in DataFlow UI: *droppedDueToLateness*.\r\n\r\n---\r\n2. **Java / Scala solution**\r\n(I&#39;ve used *Scio* but this happens to in clean Beam SDK in Java too)\r\n\r\n```scala\r\nsc.pubsubSubscription[String](&quot;my_sub&quot;)\r\n    .applyTransform(ParDo.of(new CustomTs()))\r\n    .withFixedWindows(Duration.standardSeconds(60))\r\n    .map(x =&gt; x) // exracting the key somehow, not relevant here\r\n    .groupByKey\r\n    // (...)\r\n    .saveAsPubsub(&quot;output_topic&quot;)\r\n```\r\n\r\nAdding custom timestamp as per [documentation](https://beam.apache.org/documentation/programming-guide/#adding-timestamps-to-a-pcollections-elements):\r\n```\r\nimport io.circe.parser._\r\nclass CustomTs extends DoFn[String, String] {\r\n  @ProcessElement\r\n  def processElement(@Element element: String, out: DoFn.OutputReceiver[String]): Unit = {\r\n    val json = parse(element).right.get\r\n    val timestampMillis: Long = json.hcursor.downField(&quot;timeStamp&quot;).as[Long].getOrElse(0)\r\n    out.outputWithTimestamp(element, new Instant(timestampMillis))\r\n  }\r\n}\r\n```\r\n\r\n**Output of Java / Scala solution**:\r\n```\r\nException in thread &quot;main&quot; org.apache.beam.sdk.Pipeline$PipelineExecutionException: \r\njava.lang.IllegalArgumentException:\r\n Cannot output with timestamp 2019-03-02T00:51:39.124Z. \r\n Output timestamps must be no earlier than the timestamp of the current input\r\n (2019-03-28T14:57:53.195Z) minus the allowed skew (0 milliseconds).\r\n```\r\n\r\nI cannot use `DoFn.getAllowedTimestampSkew` here as it&#39;s already deprecated and I don&#39;t know what ranges of historical data will be sent.\r\n\r\n---\r\n\r\nHaving the ability to process historical data is crucial for my project (this data will be sent to Pub/Sub from some store). The pipeline must work both on current data as well as historical one.\r\n\r\nMy question is:\r\n**How to process the data using custom timestamps with the ability to operate on windows defined using Beam API?**","title":"Custom timestamp and windowing for Pub/Sub in DataFlow (Apache Beam)","body":"<p>I want to implement the following scenario using streaming pipeline in Apache Beam (and running it on Google DataFlow):</p>\n\n<ol>\n<li>Read messages from Pub/Sub (JSON strings)</li>\n<li>Deserialize JSONs</li>\n<li>Use custom field (say <code>timeStamp</code>) as a timestamp value for the processing element</li>\n<li>Apply fixed windowing of <code>60 seconds</code></li>\n<li>Extract key from elemtents and group by key</li>\n<li>&lt;&lt; perform further processing >></li>\n</ol>\n\n<p>I've tried to resolve this problem using both Java(Scala) and Python, but non of the solution worked.</p>\n\n<ol>\n<li><strong>Python solution</strong></li>\n</ol>\n\n<pre class=\"lang-py prettyprint-override\"><code># p is beam.Pipeline()\n_ = (p | beam.io.ReadFromPubSub(subscription=\"my_sub\")\n        | beam.Map(add_timestamping)\n        | beam.WindowInto(window.FixedWindows(60))\n        | beam.Map(lambda elem: elem) # exracting the key somehow, not relevant here\n        | beam.GroupByKey()\n        # (...)\n        | beam.io.WriteToPubSub(\"output_topic\")\n        )\np.run()\n</code></pre>\n\n<p><code>add_timestamping</code> function as per <a href=\"https://beam.apache.org/documentation/programming-guide/#adding-timestamps-to-a-pcollections-elements\" rel=\"nofollow noreferrer\">documentation</a>: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def add_timestamping(elem):\n    import json\n    import apache_beam as beam\n    msg = json.loads(elem)\n    unix_timestamp = msg['timeStamp'] / 1000\n    return beam.window.TimestampedValue(msg, unix_timestamp)\n</code></pre>\n\n<p><strong>Output of Python solution</strong>:</p>\n\n<ol>\n<li>When using <code>DirectRunner</code>, windows are emitted and the windowing itself is more-or-less appropriate, depending on the delay.</li>\n<li>When using <code>DataFlowRunner</code>, <strong>ALL messages are skipped</strong> with counter appearing in DataFlow UI: <em>droppedDueToLateness</em>.</li>\n</ol>\n\n<hr>\n\n<ol start=\"2\">\n<li><strong>Java / Scala solution</strong>\n(I've used <em>Scio</em> but this happens to in clean Beam SDK in Java too)</li>\n</ol>\n\n<pre class=\"lang-scala prettyprint-override\"><code>sc.pubsubSubscription[String](\"my_sub\")\n    .applyTransform(ParDo.of(new CustomTs()))\n    .withFixedWindows(Duration.standardSeconds(60))\n    .map(x =&gt; x) // exracting the key somehow, not relevant here\n    .groupByKey\n    // (...)\n    .saveAsPubsub(\"output_topic\")\n</code></pre>\n\n<p>Adding custom timestamp as per <a href=\"https://beam.apache.org/documentation/programming-guide/#adding-timestamps-to-a-pcollections-elements\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<pre><code>import io.circe.parser._\nclass CustomTs extends DoFn[String, String] {\n  @ProcessElement\n  def processElement(@Element element: String, out: DoFn.OutputReceiver[String]): Unit = {\n    val json = parse(element).right.get\n    val timestampMillis: Long = json.hcursor.downField(\"timeStamp\").as[Long].getOrElse(0)\n    out.outputWithTimestamp(element, new Instant(timestampMillis))\n  }\n}\n</code></pre>\n\n<p><strong>Output of Java / Scala solution</strong>:</p>\n\n<pre><code>Exception in thread \"main\" org.apache.beam.sdk.Pipeline$PipelineExecutionException: \njava.lang.IllegalArgumentException:\n Cannot output with timestamp 2019-03-02T00:51:39.124Z. \n Output timestamps must be no earlier than the timestamp of the current input\n (2019-03-28T14:57:53.195Z) minus the allowed skew (0 milliseconds).\n</code></pre>\n\n<p>I cannot use <code>DoFn.getAllowedTimestampSkew</code> here as it's already deprecated and I don't know what ranges of historical data will be sent.</p>\n\n<hr>\n\n<p>Having the ability to process historical data is crucial for my project (this data will be sent to Pub/Sub from some store). The pipeline must work both on current data as well as historical one.</p>\n\n<p>My question is:\n<strong>How to process the data using custom timestamps with the ability to operate on windows defined using Beam API?</strong></p>\n"},{"tags":["java","android","android-camera","zxing","qr-code"],"answers":[{"tags":[],"owner":{"account_id":484789,"reputation":852,"user_id":900684,"accept_rate":17,"display_name":"Hussain KMR Behestee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484475332,"creation_date":1484475332,"answer_id":41660004,"question_id":30767188,"body_markdown":"Here is a cordova plugin for anroid, though it is under development. but it scans multiple qr code based on structure multiple qr code array.\r\n\r\nCordova plugin: https://github.com/behestee/cordova-plugin-multipartqrcodescanner\r\n\r\nYou will better understand how to create and read a structure multiple qr code array at here: http://programresource.net/en/2013/05/04/2202.html\r\n\r\n\r\n","title":"Scan QR code if multiple QR code showing on screen","body":"<p>Here is a cordova plugin for anroid, though it is under development. but it scans multiple qr code based on structure multiple qr code array.</p>\n\n<p>Cordova plugin: <a href=\"https://github.com/behestee/cordova-plugin-multipartqrcodescanner\" rel=\"nofollow noreferrer\">https://github.com/behestee/cordova-plugin-multipartqrcodescanner</a></p>\n\n<p>You will better understand how to create and read a structure multiple qr code array at here: <a href=\"http://programresource.net/en/2013/05/04/2202.html\" rel=\"nofollow noreferrer\">http://programresource.net/en/2013/05/04/2202.html</a></p>\n"},{"tags":[],"owner":{"account_id":93599,"reputation":2732,"user_id":255985,"display_name":"lessthanoptimal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1537765832,"creation_date":1537765832,"answer_id":52472987,"question_id":30767188,"body_markdown":"BoofCV&#39;s QR scanner easily handles multiple QR codes right next to each other.\r\n\r\nhttps://boofcv.org/index.php?title=Example_Detect_QR_Code\r\n\r\nI rand the Android demo on your images and it read them just fine. Each QR code is treated as independent even though they have the same message. You get the location and message of each one.\r\n\r\nhttps://play.google.com/store/apps/details?id=org.boofcv.android&amp;hl=en_US","title":"Scan QR code if multiple QR code showing on screen","body":"<p>BoofCV's QR scanner easily handles multiple QR codes right next to each other.</p>\n\n<p><a href=\"https://boofcv.org/index.php?title=Example_Detect_QR_Code\" rel=\"nofollow noreferrer\">https://boofcv.org/index.php?title=Example_Detect_QR_Code</a></p>\n\n<p>I rand the Android demo on your images and it read them just fine. Each QR code is treated as independent even though they have the same message. You get the location and message of each one.</p>\n\n<p><a href=\"https://play.google.com/store/apps/details?id=org.boofcv.android&amp;hl=en_US\" rel=\"nofollow noreferrer\">https://play.google.com/store/apps/details?id=org.boofcv.android&amp;hl=en_US</a></p>\n"}],"owner":{"account_id":310904,"reputation":5983,"user_id":1004437,"accept_rate":67,"display_name":"sam_k"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5967,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1683295754,"creation_date":1433969965,"question_id":30767188,"body_markdown":"I am developing one android sample application as an academic project where I need to scan QR code, I used QR scan code library and I am able to detect QR code successfully if on screen there is only one QR code.\r\n\r\nRight I want to scan QR code although same QR code showing at multiple places on screen at a time. For an example, On my laptop screen QR code image looks like below mentioned images.All QR codes are same, there is no difference between them. \r\nConsider below images which are having 6 and 4 same QR code but together with some padding. Now, user focus or put camera anywhere on screen it should be scanned. If camera focus on multiple QR code at a time then scan any one of them.\r\n\r\nSolution which I am thinking \r\n\r\n1) We can limit the area of camera preview frame and try to get QR code, but as per my requirement it is not feasible.\r\n2) Shall I apply any image processing algorithm on image first?\r\n\r\nPlease help me how can I achieve with robustness. \r\nAny help would be appreciated. Thanks for your time.\r\n\r\n**2 Images :**\r\n\r\n![enter image description here][1]\r\n\r\n![enter image description here][2]\r\n\r\nRegards\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/yUXvD.jpg\r\n  [2]: http://i.stack.imgur.com/AbQ8v.jpg\r\n","title":"Scan QR code if multiple QR code showing on screen","body":"<p>I am developing one android sample application as an academic project where I need to scan QR code, I used QR scan code library and I am able to detect QR code successfully if on screen there is only one QR code.</p>\n\n<p>Right I want to scan QR code although same QR code showing at multiple places on screen at a time. For an example, On my laptop screen QR code image looks like below mentioned images.All QR codes are same, there is no difference between them. \nConsider below images which are having 6 and 4 same QR code but together with some padding. Now, user focus or put camera anywhere on screen it should be scanned. If camera focus on multiple QR code at a time then scan any one of them.</p>\n\n<p>Solution which I am thinking </p>\n\n<p>1) We can limit the area of camera preview frame and try to get QR code, but as per my requirement it is not feasible.\n2) Shall I apply any image processing algorithm on image first?</p>\n\n<p>Please help me how can I achieve with robustness. \nAny help would be appreciated. Thanks for your time.</p>\n\n<p><strong>2 Images :</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/yUXvD.jpg\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/AbQ8v.jpg\" alt=\"enter image description here\"></p>\n\n<p>Regards</p>\n"},{"tags":["java","apache-poi","xlsx"],"owner":{"account_id":9783673,"reputation":133,"user_id":7250670,"display_name":"Kahn Sparkle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1683295601,"creation_date":1683295601,"question_id":76183067,"body_markdown":"I am using Apache POI java to generate excel file. \r\nI have to merge the second column a of the sheet and center the value afterwards\r\n\r\nin my writer class I wrote the methode \r\n\r\n        public void mergeColumn(final String brand,\r\n                                 final int rowStartNum,\r\n                                 final int rowEndNum,\r\n                                 final String category) {\r\n        final XSSFSheet sheet = wb.getSheet(category);\r\n        final XSSFRow row = sheet.createRow(sheet.getLastRowNum() + 1);\r\n        final int firstColumn = 1;\r\n        final XSSFCell currentBrandCell = row.createCell(firstColumn);\r\n        currentBrandCell.setCellValue(brand);\r\n        currentBrandCell.setCellStyle(cellStyle.getBrandStyle());\r\n\r\n        final int lastColumn = 1;\r\n        sheet.addMergedRegion(new CellRangeAddress(\r\n            rowStartNum,\r\n            rowEndNum,\r\n            firstColumn,\r\n            lastColumn\r\n        ));\r\n\r\n        CellUtil.setCellStyleProperty(currentBrandCell, wb, CellUtil.VERTICAL_ALIGNMENT, VerticalAlignment.CENTER);\r\n        CellUtil.setCellStyleProperty(currentBrandCell, wb, CellUtil.ALIGNMENT, HorizontalAlignment.CENTER);\r\n\r\n        sheet.autoSizeColumn(1, true);\r\n        sheet.createRow(rowEndNum + 1);\r\n    }\r\nand in my CustomCellStyle class I have the following \r\n\r\n        brandStyle = wb.createCellStyle();\r\n        brandStyle.setFont(topHeadearFont2);\r\n        brandStyle.setAlignment(CellStyle.ALIGN_CENTER);\r\n        brandStyle.setVerticalAlignment(CellStyle.VERTICAL_CENTER);\r\n        putBordersThick(brandStyle);\r\n\r\nand yet the value in the merged column is not centered. \r\n\r\n","title":"How to center a value of an excel cell after merging columns in apache poi java","body":"<p>I am using Apache POI java to generate excel file.\nI have to merge the second column a of the sheet and center the value afterwards</p>\n<p>in my writer class I wrote the methode</p>\n<pre><code>    public void mergeColumn(final String brand,\n                             final int rowStartNum,\n                             final int rowEndNum,\n                             final String category) {\n    final XSSFSheet sheet = wb.getSheet(category);\n    final XSSFRow row = sheet.createRow(sheet.getLastRowNum() + 1);\n    final int firstColumn = 1;\n    final XSSFCell currentBrandCell = row.createCell(firstColumn);\n    currentBrandCell.setCellValue(brand);\n    currentBrandCell.setCellStyle(cellStyle.getBrandStyle());\n\n    final int lastColumn = 1;\n    sheet.addMergedRegion(new CellRangeAddress(\n        rowStartNum,\n        rowEndNum,\n        firstColumn,\n        lastColumn\n    ));\n\n    CellUtil.setCellStyleProperty(currentBrandCell, wb, CellUtil.VERTICAL_ALIGNMENT, VerticalAlignment.CENTER);\n    CellUtil.setCellStyleProperty(currentBrandCell, wb, CellUtil.ALIGNMENT, HorizontalAlignment.CENTER);\n\n    sheet.autoSizeColumn(1, true);\n    sheet.createRow(rowEndNum + 1);\n}\n</code></pre>\n<p>and in my CustomCellStyle class I have the following</p>\n<pre><code>    brandStyle = wb.createCellStyle();\n    brandStyle.setFont(topHeadearFont2);\n    brandStyle.setAlignment(CellStyle.ALIGN_CENTER);\n    brandStyle.setVerticalAlignment(CellStyle.VERTICAL_CENTER);\n    putBordersThick(brandStyle);\n</code></pre>\n<p>and yet the value in the merged column is not centered.</p>\n"},{"tags":["java","cucumber","gherkin"],"answers":[{"tags":[],"owner":{"account_id":10495994,"reputation":1833,"user_id":7736228,"display_name":"Abhay Chaudhary"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1683295520,"creation_date":1683295520,"answer_id":76183055,"question_id":76182869,"body_markdown":"Something like this should work\r\n\r\n    Scenario: User with 2 comments\r\n    Given I have a User\r\n      | name | password |\r\n      | John | pass     |\r\n    And users have the following comments\r\n      | id | description |\r\n      | 1  | first       |\r\n      | 2  | second      |\r\n\r\nWith Step definition sample as\r\n\r\n        User user;\r\n\r\n    \t@Given(&quot;I have a User&quot;)\r\n    \tpublic void iHaveAUser(Map&lt;String, String&gt; userData) {\r\n    \t\tUser user = new User();\r\n    \t\tuser.setName(userData.get(&quot;name&quot;));\r\n    \t\tuser.setPassword(userData.get(&quot;password&quot;));\r\n    \t\tList&lt;Comment&gt; commentsList = new ArrayList&lt;&gt;();\r\n    \t\tuser.setCommentsList(commentsList);\r\n    \t\tthis.user = user;\r\n    \t\t// Save the user object for later use\r\n    \t}\r\n    \r\n    \t@And(&quot;users have the following comments&quot;)\r\n    \tpublic void usersHaveTheFollowingComments(List&lt;Map&lt;String, String&gt;&gt; commentsData) {\r\n    \r\n    \t\tList&lt;Comment&gt; commentsList = this.user.getCommentsList();\r\n    \t\t// Map the datatable to Comment objects and add them to the list\r\n    \t\tfor (Map&lt;String, String&gt; commentData : commentsData) {\r\n    \t\t\tComment comment = new Comment();\r\n    \t\t\tcomment.setId(Long.valueOf(commentData.get(&quot;id&quot;)));\r\n    \t\t\tcomment.setDescription(commentData.get(&quot;description&quot;));\r\n    \t\t\tcommentsList.add(comment);\r\n    \t\t}\r\n    \t}","title":"Java - Gherkin &amp; Cucumber : Pass Object with arrayList of objects","body":"<p>Something like this should work</p>\n<pre><code>Scenario: User with 2 comments\nGiven I have a User\n  | name | password |\n  | John | pass     |\nAnd users have the following comments\n  | id | description |\n  | 1  | first       |\n  | 2  | second      |\n</code></pre>\n<p>With Step definition sample as</p>\n<pre><code>    User user;\n\n    @Given(&quot;I have a User&quot;)\n    public void iHaveAUser(Map&lt;String, String&gt; userData) {\n        User user = new User();\n        user.setName(userData.get(&quot;name&quot;));\n        user.setPassword(userData.get(&quot;password&quot;));\n        List&lt;Comment&gt; commentsList = new ArrayList&lt;&gt;();\n        user.setCommentsList(commentsList);\n        this.user = user;\n        // Save the user object for later use\n    }\n\n    @And(&quot;users have the following comments&quot;)\n    public void usersHaveTheFollowingComments(List&lt;Map&lt;String, String&gt;&gt; commentsData) {\n\n        List&lt;Comment&gt; commentsList = this.user.getCommentsList();\n        // Map the datatable to Comment objects and add them to the list\n        for (Map&lt;String, String&gt; commentData : commentsData) {\n            Comment comment = new Comment();\n            comment.setId(Long.valueOf(commentData.get(&quot;id&quot;)));\n            comment.setDescription(commentData.get(&quot;description&quot;));\n            commentsList.add(comment);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":7275154,"reputation":1283,"user_id":5546850,"accept_rate":66,"display_name":"James"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76183055,"answer_count":1,"score":0,"last_activity_date":1683295520,"creation_date":1683294264,"question_id":76182869,"body_markdown":"i have the following java model :\r\n\r\n    public class User {\r\n    \r\n      private String name;\r\n    \r\n      private String password;\r\n    \r\n    \r\n      private List&lt;Comment&gt; commentsList;\r\n      \r\n    }\r\n    \r\n    \r\n    public class Comment {\r\n    \r\n      private Long id;\r\n      private String description;\r\n    \r\n    }\r\n\r\ni want to know how i can write my gherkin data for a user with 2 comments object as a datatable.","title":"Java - Gherkin &amp; Cucumber : Pass Object with arrayList of objects","body":"<p>i have the following java model :</p>\n<pre><code>public class User {\n\n  private String name;\n\n  private String password;\n\n\n  private List&lt;Comment&gt; commentsList;\n  \n}\n\n\npublic class Comment {\n\n  private Long id;\n  private String description;\n\n}\n</code></pre>\n<p>i want to know how i can write my gherkin data for a user with 2 comments object as a datatable.</p>\n"},{"tags":["java","android","locale","currency-formatting"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":1,"creation_date":1572369502,"post_id":58612380,"comment_id":103535128,"body_markdown":"Javadoc of [`Currency.getSymbol()`](https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Currency.html#getSymbol()): Gets the symbol of this currency for the default DISPLAY locale.For example, for the US Dollar, the symbol is &quot;$&quot; if the defaultlocale is the US, while for other locales it may be &quot;US$&quot;. If no symbol can be determined, the ISO 4217 currency code is returned.","body":"Javadoc of <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Currency.html#getSymbol()\" rel=\"nofollow noreferrer\"><code>Currency.getSymbol()</code></a>: Gets the symbol of this currency for the default DISPLAY locale.For example, for the US Dollar, the symbol is &quot;$&quot; if the defaultlocale is the US, while for other locales it may be &quot;US$&quot;. If no symbol can be determined, the ISO 4217 currency code is returned."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":2,"creation_date":1572369602,"post_id":58612380,"comment_id":103535167,"body_markdown":"Try `Currency.getInstance(Locale.US).getSymbol(Locale.US)`.","body":"Try <code>Currency.getInstance(Locale.US).getSymbol(Locale.US)</code>."},{"owner":{"account_id":1587905,"reputation":55,"user_id":1471849,"display_name":"Sandeep"},"score":0,"creation_date":1572411489,"post_id":58612380,"comment_id":103546793,"body_markdown":"@JohannesKuhn Thanks it worked. Passing locale on getSymbol(Locale.US) solved the problem.","body":"@JohannesKuhn Thanks it worked. Passing locale on getSymbol(Locale.US) solved the problem."}],"answers":[{"tags":[],"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1572412932,"creation_date":1572412932,"answer_id":58619198,"question_id":58612380,"body_markdown":"From the javadoc of [`Currency.getSymbol()`](https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Currency.html#getSymbol())\n\n&gt; Gets the symbol of this currency for the default [`DISPLAY`](https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Locale.Category.html#DISPLAY) locale. For example, for the US Dollar, the symbol is &quot;$&quot; if the default locale is the US, while for other locales it may be &quot;US$&quot;. If no symbol can be determined, the ISO 4217 currency code is returned.\n&gt;\n&gt; If the default  [`DISPLAY`](https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Locale.Category.html#DISPLAY) locale contains &quot;rg&quot; (region override) Unicode extension, the symbol returned from this method reflects the value specified with that extension.\n&gt;\n&gt; This is equivalent to calling [`getSymbol(Locale.getDefault(Locale.Category.DISPLAY))`](https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Currency.html#getSymbol(java.util.Locale)).\n\nThis describes the reason why you sometimes see &quot;US$&quot; and sometimes just &quot;$&quot;.\n\nIf you want to get reproducible results use\n\n    Currency.getInstance(Locale.US).getSymbol(Locale.US). ","title":"Currency.getSymbol() gives &quot;US$&quot; and &quot;$&quot; with different devices","body":"<p>From the javadoc of <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Currency.html#getSymbol()\" rel=\"nofollow noreferrer\"><code>Currency.getSymbol()</code></a></p>\n<blockquote>\n<p>Gets the symbol of this currency for the default <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Locale.Category.html#DISPLAY\" rel=\"nofollow noreferrer\"><code>DISPLAY</code></a> locale. For example, for the US Dollar, the symbol is &quot;$&quot; if the default locale is the US, while for other locales it may be &quot;US$&quot;. If no symbol can be determined, the ISO 4217 currency code is returned.</p>\n<p>If the default  <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Locale.Category.html#DISPLAY\" rel=\"nofollow noreferrer\"><code>DISPLAY</code></a> locale contains &quot;rg&quot; (region override) Unicode extension, the symbol returned from this method reflects the value specified with that extension.</p>\n<p>This is equivalent to calling <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Currency.html#getSymbol(java.util.Locale)\" rel=\"nofollow noreferrer\"><code>getSymbol(Locale.getDefault(Locale.Category.DISPLAY))</code></a>.</p>\n</blockquote>\n<p>This describes the reason why you sometimes see &quot;US$&quot; and sometimes just &quot;$&quot;.</p>\n<p>If you want to get reproducible results use</p>\n<pre><code>Currency.getInstance(Locale.US).getSymbol(Locale.US). \n</code></pre>\n"},{"tags":[],"owner":{"account_id":27111277,"reputation":11,"user_id":20656406,"display_name":"Divyansh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683295193,"creation_date":1683295193,"answer_id":76183006,"question_id":58612380,"body_markdown":"In kotlin -\r\n\r\n`android.icu.util.Currency.getInstance(&quot;currency_code&quot;).getName(Locale.getDefault(),android.icu.util.Currency.NARROW_SYMBOL_NAME,null)`\r\n\r\nhttps://developer.android.com/reference/kotlin/android/icu/util/Currency#narrow_symbol_name\r\n\r\nhttps://developer.android.com/reference/kotlin/android/icu/util/Currency#getname","title":"Currency.getSymbol() gives &quot;US$&quot; and &quot;$&quot; with different devices","body":"<p>In kotlin -</p>\n<p><code>android.icu.util.Currency.getInstance(&quot;currency_code&quot;).getName(Locale.getDefault(),android.icu.util.Currency.NARROW_SYMBOL_NAME,null)</code></p>\n<p><a href=\"https://developer.android.com/reference/kotlin/android/icu/util/Currency#narrow_symbol_name\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/kotlin/android/icu/util/Currency#narrow_symbol_name</a></p>\n<p><a href=\"https://developer.android.com/reference/kotlin/android/icu/util/Currency#getname\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/kotlin/android/icu/util/Currency#getname</a></p>\n"}],"owner":{"account_id":1587905,"reputation":55,"user_id":1471849,"display_name":"Sandeep"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":889,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":58619198,"answer_count":2,"score":3,"last_activity_date":1683295193,"creation_date":1572369216,"question_id":58612380,"body_markdown":"While Initializing Currency, I set locale ad locale.US\r\nCurrency.getInstance(Locale.US), but getSymbol() gives &quot;US$&quot; and &quot;$ on different devices. getSymbol() gives &quot;$&quot; on samsung, but gives &quot;US$&quot; on moto. How to solve this.","title":"Currency.getSymbol() gives &quot;US$&quot; and &quot;$&quot; with different devices","body":"<p>While Initializing Currency, I set locale ad locale.US\nCurrency.getInstance(Locale.US), but getSymbol() gives \"US$\" and \"$ on different devices. getSymbol() gives \"$\" on samsung, but gives \"US$\" on moto. How to solve this.</p>\n"},{"tags":["java","spring","spring-cloud-stream"],"owner":{"account_id":6795100,"reputation":154,"user_id":5230740,"accept_rate":22,"display_name":"Murillo Goulart"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683295176,"creation_date":1683060747,"question_id":76158789,"body_markdown":"I&#39;m migrating from Spring Cloud Streams and the deprecated StreamListeners to Spring Cloud Function with its Consumers. I had in my applications an Interceptor to configure some log metadata and User context (thread local information) for my input messages. That was done with this kind of interceptor: https://stackoverflow.com/a/37466442/5230740.\r\n\r\nNow, in Spring Cloud Function, the interceptor is no longer working. I found on the internet the feature called `org.springframework.cloud.function.context.catalog.FunctionAroundWrapper` and it works, but I didn&#39;t find good documentation about it in the Spring pages. So, I don`t know if I can rely on this feature or I should use another approach?","title":"How to intercept Spring Cloud Function messages","body":"<p>I'm migrating from Spring Cloud Streams and the deprecated StreamListeners to Spring Cloud Function with its Consumers. I had in my applications an Interceptor to configure some log metadata and User context (thread local information) for my input messages. That was done with this kind of interceptor: <a href=\"https://stackoverflow.com/a/37466442/5230740\">https://stackoverflow.com/a/37466442/5230740</a>.</p>\n<p>Now, in Spring Cloud Function, the interceptor is no longer working. I found on the internet the feature called <code>org.springframework.cloud.function.context.catalog.FunctionAroundWrapper</code> and it works, but I didn't find good documentation about it in the Spring pages. So, I don`t know if I can rely on this feature or I should use another approach?</p>\n"},{"tags":["java","spring","postgresql","spring-boot","event-handling"],"comments":[{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1683252051,"post_id":76177445,"comment_id":134342023,"body_markdown":"I don&#39;t think you can, but I&#39;ll wait and see if I&#39;m corrected.","body":"I don&#39;t think you can, but I&#39;ll wait and see if I&#39;m corrected."}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683294946,"creation_date":1683294946,"answer_id":76182963,"question_id":76177445,"body_markdown":"This can&#39;t be done with Spring annotations because LISTEN/NOTIFY function is not available generally on every database. It is only available on PostgreSQL.\r\n\r\nThe logic need to be implemented in plain Java and JDBC as part of Spring Boot. The PostgreSQL driver provides a PGConnection interface with a method getNotifications() for reading of notifications. Sample code snippets:\r\n\r\nFirst get the PGConnection and exceute LISTEN:\r\n\r\n    import java.sql.*;\r\n    import org.postgresql.*;\r\n        Class.forName(&quot;org.postgresql.Driver&quot;);\r\n        String url = &quot;jdbc:postgresql://localhost:5432/test&quot;;\r\n        Connection sqlConn = DriverManager.getConnection(url,&quot;test&quot;,&quot;&quot;);\r\n        PGConnection pgConn = sqlConn.unwrap(org.postgresql.PGConnection.class);\r\n        Statement stmt = pgConn.createStatement();\r\n        stmt.execute(&quot;LISTEN status_change&quot;);\r\n        stmt.close();\r\n\r\nThen get notifications and wait:\r\n\r\n    while (true) {\r\n        PGNotification notifications[] = pgConn.getNotifications();\r\n        if (notifications != null) {\r\n            for (PGNotification notification : notifications) {\r\n                System.out.println(&quot;Got notification: &quot; + notification.getName());\r\n            }\r\n        }\r\n        // wait a while before checking again for new  notifications\r\n        Thread.sleep(500);\r\n    }\r\n\r\nCode snippets based on [https://access.crunchydata.com/documentation/pgjdbc/42.1.0/listennotify.html][1]\r\n\r\n\r\n  [1]: https://access.crunchydata.com/documentation/pgjdbc/42.1.0/listennotify.html","title":"Implementing LISTEN command of postgres in spring boot","body":"<p>This can't be done with Spring annotations because LISTEN/NOTIFY function is not available generally on every database. It is only available on PostgreSQL.</p>\n<p>The logic need to be implemented in plain Java and JDBC as part of Spring Boot. The PostgreSQL driver provides a PGConnection interface with a method getNotifications() for reading of notifications. Sample code snippets:</p>\n<p>First get the PGConnection and exceute LISTEN:</p>\n<pre><code>import java.sql.*;\nimport org.postgresql.*;\n    Class.forName(&quot;org.postgresql.Driver&quot;);\n    String url = &quot;jdbc:postgresql://localhost:5432/test&quot;;\n    Connection sqlConn = DriverManager.getConnection(url,&quot;test&quot;,&quot;&quot;);\n    PGConnection pgConn = sqlConn.unwrap(org.postgresql.PGConnection.class);\n    Statement stmt = pgConn.createStatement();\n    stmt.execute(&quot;LISTEN status_change&quot;);\n    stmt.close();\n</code></pre>\n<p>Then get notifications and wait:</p>\n<pre><code>while (true) {\n    PGNotification notifications[] = pgConn.getNotifications();\n    if (notifications != null) {\n        for (PGNotification notification : notifications) {\n            System.out.println(&quot;Got notification: &quot; + notification.getName());\n        }\n    }\n    // wait a while before checking again for new  notifications\n    Thread.sleep(500);\n}\n</code></pre>\n<p>Code snippets based on <a href=\"https://access.crunchydata.com/documentation/pgjdbc/42.1.0/listennotify.html\" rel=\"nofollow noreferrer\">https://access.crunchydata.com/documentation/pgjdbc/42.1.0/listennotify.html</a></p>\n"}],"owner":{"account_id":10248384,"reputation":11,"user_id":7563466,"display_name":"PratRetina"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":667,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683294946,"creation_date":1683235378,"question_id":76177445,"body_markdown":"I have created a trigger on a table and using pg_notify to send the event to a channel status_change. Can I implement a listener in spring boot that listens to each event whenever this trigger is activated.\r\n\r\nI tried EventListener but that doesn&#39;t work\r\n\r\n\r\n```\r\n`@EventListener(condition = &quot;#event.channel == &#39;status_change&#39;&quot;)\r\n    @Transactional\r\n    public void handleMaintenanceUpdate(PGNotification event) {\r\n        System.out.println(&quot;REceived Notification&quot;);\r\n    }`\r\n```\r\n","title":"Implementing LISTEN command of postgres in spring boot","body":"<p>I have created a trigger on a table and using pg_notify to send the event to a channel status_change. Can I implement a listener in spring boot that listens to each event whenever this trigger is activated.</p>\n<p>I tried EventListener but that doesn't work</p>\n<pre><code>`@EventListener(condition = &quot;#event.channel == 'status_change'&quot;)\n    @Transactional\n    public void handleMaintenanceUpdate(PGNotification event) {\n        System.out.println(&quot;REceived Notification&quot;);\n    }`\n</code></pre>\n"},{"tags":["java","gson","lombok","notnull"],"comments":[{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1684075802,"post_id":76182938,"comment_id":134460492,"body_markdown":"&quot;and know that name is never null&quot;; just as side note: Gson does not check this and ignores the `@NotNull` annotation","body":"&quot;and know that name is never null&quot;; just as side note: Gson does not check this and ignores the <code>@NotNull</code> annotation"}],"answers":[{"tags":[],"owner":{"account_id":15718721,"reputation":988,"user_id":11342225,"display_name":"alea"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683294792,"creation_date":1683294792,"answer_id":76182939,"question_id":76182938,"body_markdown":"**This solution works with Java 14 or higher.**\r\n\r\nOne possible way is using a `record`. Instead of writing a class and generating the getter via lombok, it is also possible to do this:\r\n\r\n    public record Foo(int id, @NotNull String name) { \r\n    }\r\n\r\nIt will automatically generate a method `name()` which has the `@NotNull` annotation.\r\n\r\nIf you later need to set a field of a record, you need to follow [this solution][1] and do something like this:\r\n\r\n    public record Foo(int id, @NotNull String name) {\r\n        \r\n        @NotNull\r\n        public Foo withId(int id) {\r\n            return new Foo(id, name());\r\n        }\r\n    \r\n    }\r\n\r\nThis will allow to modify the id later. Only disadvantage is that you need to type out the method to set the field (`withId`) and that you have a new record that you need to handle correctly.\r\n\r\n    Foo foo = new Gson().fromJson(json, Foo .class);\r\n    foo = foo.withId(42);\r\n\r\n  [1]: https://stackoverflow.com/a/65254270/11342225","title":"Prevent false positve null warnings from IDE with gson and notNull annoation","body":"<p><strong>This solution works with Java 14 or higher.</strong></p>\n<p>One possible way is using a <code>record</code>. Instead of writing a class and generating the getter via lombok, it is also possible to do this:</p>\n<pre><code>public record Foo(int id, @NotNull String name) { \n}\n</code></pre>\n<p>It will automatically generate a method <code>name()</code> which has the <code>@NotNull</code> annotation.</p>\n<p>If you later need to set a field of a record, you need to follow <a href=\"https://stackoverflow.com/a/65254270/11342225\">this solution</a> and do something like this:</p>\n<pre><code>public record Foo(int id, @NotNull String name) {\n    \n    @NotNull\n    public Foo withId(int id) {\n        return new Foo(id, name());\n    }\n\n}\n</code></pre>\n<p>This will allow to modify the id later. Only disadvantage is that you need to type out the method to set the field (<code>withId</code>) and that you have a new record that you need to handle correctly.</p>\n<pre><code>Foo foo = new Gson().fromJson(json, Foo .class);\nfoo = foo.withId(42);\n</code></pre>\n"}],"owner":{"account_id":15718721,"reputation":988,"user_id":11342225,"display_name":"alea"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76182939,"answer_count":1,"score":1,"last_activity_date":1683294792,"creation_date":1683294792,"question_id":76182938,"body_markdown":"I have a simple json object.\r\n\r\n    {&quot;id&quot;: 1, &quot;name&quot;: &quot;John&quot;}\r\n\r\nMy class for reading this object is the following.\r\n\r\n    @Getter\r\n    public class Foo {\r\n        \r\n        @Setter\r\n        private long id;\r\n        \r\n        @NotNull\r\n        private String name;\r\n    }\r\n\r\nI am using lombok for generating the getters and annotating not-null fields with jetbrain&#39;s `@NotNull` annotation.\r\n\r\n    String json = &quot;{\\&quot;id\\&quot;: 1, \\&quot;name\\&quot;: \\&quot;John\\&quot;}&quot;;\r\n\r\n    Foo foo = new Gson().fromJson(json, Foo.class);\r\n    foo.setId(42);\r\n\r\nReading the json works just fine.\r\n\r\nThe only problem that I have that I am getting an error from the IDE `Not-null fields must be initialized` from my `name` field.\r\n\r\nIt is technically correct, my `name` field is not initalized in the constructor.\r\n\r\nHowever, I am using Gson to deserialize my object and know that `name` is never `null`. I do not want to create a normal object, just read from json.\r\n\r\nAlso I need the annotation `@NotNull`, because lomboks `@Getter` will generate me a getter with an `@NotNull` annotation.\r\n\r\nI also have some cases where I want to replace one of my field (`id`) with another value. \r\n\r\nI do not want to use a plain Java getter or remove the annoation from my attribute. \r\n\r\nWhat can I do?","title":"Prevent false positve null warnings from IDE with gson and notNull annoation","body":"<p>I have a simple json object.</p>\n<pre><code>{&quot;id&quot;: 1, &quot;name&quot;: &quot;John&quot;}\n</code></pre>\n<p>My class for reading this object is the following.</p>\n<pre><code>@Getter\npublic class Foo {\n    \n    @Setter\n    private long id;\n    \n    @NotNull\n    private String name;\n}\n</code></pre>\n<p>I am using lombok for generating the getters and annotating not-null fields with jetbrain's <code>@NotNull</code> annotation.</p>\n<pre><code>String json = &quot;{\\&quot;id\\&quot;: 1, \\&quot;name\\&quot;: \\&quot;John\\&quot;}&quot;;\n\nFoo foo = new Gson().fromJson(json, Foo.class);\nfoo.setId(42);\n</code></pre>\n<p>Reading the json works just fine.</p>\n<p>The only problem that I have that I am getting an error from the IDE <code>Not-null fields must be initialized</code> from my <code>name</code> field.</p>\n<p>It is technically correct, my <code>name</code> field is not initalized in the constructor.</p>\n<p>However, I am using Gson to deserialize my object and know that <code>name</code> is never <code>null</code>. I do not want to create a normal object, just read from json.</p>\n<p>Also I need the annotation <code>@NotNull</code>, because lomboks <code>@Getter</code> will generate me a getter with an <code>@NotNull</code> annotation.</p>\n<p>I also have some cases where I want to replace one of my field (<code>id</code>) with another value.</p>\n<p>I do not want to use a plain Java getter or remove the annoation from my attribute.</p>\n<p>What can I do?</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":20592822,"reputation":21,"user_id":15116022,"display_name":"Arpit Saxena"},"score":0,"creation_date":1683298120,"post_id":76182848,"comment_id":134350088,"body_markdown":"Does this help ? https://stackoverflow.com/questions/69779045/stuck-on-javafx-graphics-does-not-export-com-sun-javafx-sg-prism-to-unnamed-modu","body":"Does this help ? <a href=\"https://stackoverflow.com/questions/69779045/stuck-on-javafx-graphics-does-not-export-com-sun-javafx-sg-prism-to-unnamed-modu\" title=\"stuck on javafx graphics does not export com sun javafx sg prism to unnamed modu\">stackoverflow.com/questions/69779045/&hellip;</a>"},{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":0,"creation_date":1683303583,"post_id":76182848,"comment_id":134351424,"body_markdown":"It looks like the module file needs to be set up.  Also worth pondering if this project needs to be modular.","body":"It looks like the module file needs to be set up.  Also worth pondering if this project needs to be modular."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1683316171,"post_id":76182848,"comment_id":134353923,"body_markdown":"@DaveB &quot;_Also worth pondering if this project needs to be modular_&quot; -- Given the nature of the error, the OP&#39;s code is already non-modular. Or at least not being launched as a module (i.e., if the OP has a `module-info.java` file, then it&#39;s being ignored). Unless you mean something else (e.g., though technically unsupported, place JavaFX on the class-path instead of the module-path)?","body":"@DaveB &quot;<i>Also worth pondering if this project needs to be modular</i>&quot; -- Given the nature of the error, the OP&#39;s code is already non-modular. Or at least not being launched as a module (i.e., if the OP has a <code>module-info.java</code> file, then it&#39;s being ignored). Unless you mean something else (e.g., though technically unsupported, place JavaFX on the class-path instead of the module-path)?"},{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":0,"creation_date":1683319237,"post_id":76182848,"comment_id":134354488,"body_markdown":"@Slaw, don&#39;t you get the, &quot;does not export ... to unamed module&quot;, error when you have a module-info.java file but it&#39;s missing some export statements?  I&#39;m also thinking that you can define a project as modular in a Gradle build, but still leave out the module-info.java file - in which case you would get the same errors.","body":"@Slaw, don&#39;t you get the, &quot;does not export ... to unamed module&quot;, error when you have a module-info.java file but it&#39;s missing some export statements?  I&#39;m also thinking that you can define a project as modular in a Gradle build, but still leave out the module-info.java file - in which case you would get the same errors."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1683348191,"post_id":76182848,"comment_id":134356797,"body_markdown":"@DaveB This error specifically is occurring because `javafx.media` has been placed on the class-path and become part of the unnamed module, yet `javafx.graphics` was placed on the module-path and resolved as a named module, and so the _qualified_ exports defined by `javafx.graphics` that export certain things to `javafx.media` no longer work properly. The first duplicate goes into more detail.","body":"@DaveB This error specifically is occurring because <code>javafx.media</code> has been placed on the class-path and become part of the unnamed module, yet <code>javafx.graphics</code> was placed on the module-path and resolved as a named module, and so the <i>qualified</i> exports defined by <code>javafx.graphics</code> that export certain things to <code>javafx.media</code> no longer work properly. The first duplicate goes into more detail."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1683348565,"post_id":76182848,"comment_id":134356826,"body_markdown":"Code without a module-info descriptor that is placed on the module-path and resolved as a module becomes an &quot;automatic module&quot;, which is still a _named_ module. Though I&#39;m not sure if that can apply to the &quot;main module&quot; (i.e., can `--module` target an automatic module?). An unnamed module is where all code on the class-path ends up (and which any module-info descriptor in such code is ignored; this is how you can use modular dependencies as if they weren&#39;t modular). And if **your** module-info descriptor(s) was &quot;missing&quot; `exports` directives, then I&#39;d expect a _compilation_ error.","body":"Code without a module-info descriptor that is placed on the module-path and resolved as a module becomes an &quot;automatic module&quot;, which is still a <i>named</i> module. Though I&#39;m not sure if that can apply to the &quot;main module&quot; (i.e., can <code>--module</code> target an automatic module?). An unnamed module is where all code on the class-path ends up (and which any module-info descriptor in such code is ignored; this is how you can use modular dependencies as if they weren&#39;t modular). And if <b>your</b> module-info descriptor(s) was &quot;missing&quot; <code>exports</code> directives, then I&#39;d expect a <i>compilation</i> error."}],"owner":{"account_id":28517748,"reputation":1,"user_id":21826885,"display_name":"Chris Tapia"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683300560,"answer_count":0,"score":0,"last_activity_date":1683294752,"creation_date":1683294115,"question_id":76182848,"body_markdown":"It&#39;s giving me this error\r\n\r\n```\r\nException in Application start method\r\njava.lang.reflect.InvocationTargetException\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:464)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:363)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1082)\r\nCaused by: java.lang.RuntimeException: Exception in Application start method\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:893)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: java.lang.IllegalAccessError: class com.sun.media.jfxmediaimpl.NativeMediaManager (in unnamed module @0x7b61a0ef) cannot access class com.sun.glass.utils.NativeLibLoader (in module javafx.graphics) because module javafx.graphics does not export com.sun.glass.utils to unnamed module @0x7b61a0ef\r\n\tat com.sun.media.jfxmediaimpl.NativeMediaManager.lambda$new$0(NativeMediaManager.java:110)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\r\n\tat com.sun.media.jfxmediaimpl.NativeMediaManager.&lt;init&gt;(NativeMediaManager.java:107)\r\n\tat com.sun.media.jfxmediaimpl.NativeMediaManager$NativeMediaManagerInitializer.&lt;clinit&gt;(NativeMediaManager.java:77)\r\n\tat com.sun.media.jfxmediaimpl.NativeMediaManager.getDefaultInstance(NativeMediaManager.java:89)\r\n\tat com.sun.media.jfxmedia.MediaManager.canPlayProtocol(MediaManager.java:78)\r\n\tat com.sun.media.jfxmedia.locator.Locator.&lt;init&gt;(Locator.java:240)\r\n\tat javafx.scene.media.Media.&lt;init&gt;(Media.java:392)\r\n\tat Final.StageEleven(Final.java:288)\r\n\tat Final.start(Final.java:37)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:839)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:483)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:456)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:455)\r\n\tat javafx.graphics@20.0.1/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\r\n\tat javafx.graphics@20.0.1/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n\tat javafx.graphics@20.0.1/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185)\r\n\t... 1 more\r\nException running application Final\r\n```\r\n\r\n\r\n\r\n```\r\nimport javafx.application.Application;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.image.Image;\r\nimport javafx.scene.image.ImageView;\r\nimport javafx.scene.layout.GridPane;\r\nimport javafx.stage.Stage;\r\nimport java.io.File;\r\nimport javafx.scene.media.Media;\r\nimport javafx.scene.media.MediaPlayer;\r\n\r\npublic class Final extends Application{\r\n\r\n\tprivate Label outputmessage;\r\n\tprivate ImageView BannerImage1, BannerImage2, BannerImage3; \r\n\tprivate Image image1,image2,image3;\r\n\tprivate GridPane Grid;\r\n\tprivate Stage stage;\r\n\tprivate Button button1, button2, button3; \r\n\tprivate Scene scene1,scene2,scene3,scene4,scene5,scene6,scene7,scene8,\r\n\t\tscene9,scene10,scene11,scene12,scene13, scene14,scene15,scene16,scene17,scene18,scene19,scene20;\r\n\tpublic void start(Stage primarystage) throws Exception\r\n\t{\r\n\t\tstage = primarystage;\r\n\t\tstage.setTitle(&quot;The World of Leway&quot;);\r\n\t\tscene1 = Stageone();\r\n\t\tscene2 = Stagetwo();\r\n\t\tscene3 = StageThree();\r\n\t\tscene4 = StageFour();\r\n\t\tscene5 = StageFive();\r\n\t\tscene6 = StageSix();\r\n\t\tscene7 = StageSeven();\r\n\t\tscene8 = StageEight();\r\n\t\tscene9 = StageNine();\r\n\t\tscene10 = StageTen();\r\n\t\tscene11 = StageEleven();\r\n\t\tscene12 = StageTwelve();\r\n\t\tscene13 = StageThirteen();\r\n\t\tscene14 = StageFourteen();\r\n\t\tscene15 = StageFifteen();\r\n\t\tscene16 = StageSixteen();\r\n\t\tscene17 = StageSeventeen();\r\n\t\tscene18 = StageEighteen();\r\n\t\tscene19 = StageNineteen();\r\n\t\tscene20 = StageTwenty();\r\n\t\tstage.setScene(scene1);\r\n\t\tstage.show();\r\n\t}\r\n\tprivate Scene Stageone()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;You soon begin to wake up in a room, sitting on a chair, from behind you hear a woman&#39;s voice saying, &#39;You have died.&#39; A woman with blue hair walked past you, taking a seat in front you.&quot;\r\n\t\t\t\t+ &quot;\\nAs she sat, she spoke once more, &#39;After dying I have taken your soul and brought it to this world. You can say it&#39;s sort of a limbo. My name is Aqua. I have summoned you here to ask you one thing.&#39;&quot;);\r\n\t\timage1 = new Image(&quot;file:Goddess.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene2));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene1;\r\n\t}\r\n\t\r\n\tprivate Scene Stagetwo()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Please take up arm and defeat the demon lord of this world. You can choose between these three weapons.&quot;);\r\n\t\timage1 = new Image(&quot;file:greatsword.jpeg&quot;);\r\n\t\timage2 = new Image(&quot;file:SwordandShield.jpg&quot;);\r\n\t\timage3 = new Image(&quot;file:bow.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage2 = new ImageView(image2);\r\n\t\tBannerImage3 = new ImageView(image3);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage2.setFitWidth(100);\r\n\t\tBannerImage2.setFitHeight(100);\r\n\t\tBannerImage3.setFitWidth(100);\r\n\t\tBannerImage3.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Great Sword&quot;);\r\n\t\tbutton2 = new Button(&quot;Sword and Shield&quot;);\r\n\t\tbutton3 = new Button(&quot;Bow&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene3));\r\n\t\tbutton2.setOnAction(e -&gt; switchScenes(scene3));\r\n\t\tbutton3.setOnAction(e -&gt; switchScenes(scene3));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 0, 0);\r\n\t\tGrid.add(BannerImage2, 1, 0);\r\n\t\tGrid.add(BannerImage3, 2, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 0, 2);\r\n\t\tGrid.add(button2, 1, 2);\r\n\t\tGrid.add(button3, 2, 2);\r\n\t\treturn scene2;\r\n\t}\r\n\t\r\n\tprivate Scene StageThree()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;After having picked your weapon, you soon are engulfed in a bright light and after the light disapates you appear in the middle of a city.&quot;\r\n\t\t\t\t+ &quot;\\nAfter walking around for a while, taking in the sights of a different world and city, you are soon stopped by a knight of the city. he begans to ask a series of questions, until he spots your weapon. &#39;Please Come with me.&#39;&quot;\r\n\t\t\t\t+ &quot;\\nHe said as lead you to the castle in the middle of the city.&quot;);\r\n\t\timage1 = new Image(&quot;file:CityStreets.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e-&gt; switchScenes(scene4));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene3;\r\n\t}\r\n\t\r\n\tprivate Scene StageFour()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Meeting with king&quot;);\r\n\t\timage1 = new Image(&quot;file:king.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e-&gt; switchScenes(scene5));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene4;\r\n\t}\r\n\t\r\n\tprivate Scene StageFive()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Training Path&quot;);\r\n\t\timage1 = new Image(&quot;file:denseforest.jpg&quot;);\r\n\t\timage2 = new Image(&quot;file:lightforest.jpg&quot;);\r\n\t\timage3 = new Image(&quot;file:demonlordcastle.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage2 = new ImageView(image2);\r\n\t\tBannerImage3 = new ImageView(image3);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage2.setFitWidth(100);\r\n\t\tBannerImage2.setFitHeight(100);\r\n\t\tBannerImage3.setFitWidth(100);\r\n\t\tBannerImage3.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Train Hard&quot;);\r\n\t\tbutton2 = new Button(&quot;Train Light&quot;);\r\n\t\tbutton3 = new Button(&quot;Straight for demon king&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene6));\r\n\t\tbutton2.setOnAction(e -&gt; switchScenes(scene7));\r\n\t\tbutton3.setOnAction(e -&gt; switchScenes(scene8));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 0, 0);\r\n\t\tGrid.add(BannerImage2, 1, 0);\r\n\t\tGrid.add(BannerImage3, 2, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 0, 2);\r\n\t\tGrid.add(button2, 1, 2);\r\n\t\tGrid.add(button3, 2, 2);\r\n\t\treturn scene5;\r\n\t}\r\n\t\r\n\tprivate Scene StageSix()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Go down training hard path and walk around, which path you take&quot;);\r\n\t\timage1 = new Image(&quot;file:right.jpg&quot;);\r\n\t\timage2 = new Image(&quot;file:middle.jpg&quot;);\r\n\t\timage3 = new Image(&quot;file:left.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage2 = new ImageView(image2);\r\n\t\tBannerImage3 = new ImageView(image3);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage2.setFitWidth(100);\r\n\t\tBannerImage2.setFitHeight(100);\r\n\t\tBannerImage3.setFitWidth(100);\r\n\t\tBannerImage3.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Right&quot;);\r\n\t\tbutton2 = new Button(&quot;Middle&quot;);\r\n\t\tbutton3 = new Button(&quot;Left&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene9));\r\n\t\tbutton2.setOnAction(e -&gt; switchScenes(scene20));\r\n\t\tbutton3.setOnAction(e -&gt; switchScenes(scene11));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 0, 0);\r\n\t\tGrid.add(BannerImage2, 1, 0);\r\n\t\tGrid.add(BannerImage3, 2, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 0, 2);\r\n\t\tGrid.add(button2, 1, 2);\r\n\t\tGrid.add(button3, 2, 2);\r\n\t\treturn scene6;\r\n\t}\r\n\t\r\n\tprivate Scene StageSeven()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;go down Train lightly path, which way&quot;);\r\n\t\timage1 = new Image(&quot;file:right.jpg&quot;);\r\n\t\timage2 = new Image(&quot;file:middle.jpg&quot;);\r\n\t\timage3 = new Image(&quot;file:left.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage2 = new ImageView(image2);\r\n\t\tBannerImage3 = new ImageView(image3);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage2.setFitWidth(100);\r\n\t\tBannerImage2.setFitHeight(100);\r\n\t\tBannerImage3.setFitWidth(100);\r\n\t\tBannerImage3.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Right&quot;);\r\n\t\tbutton2 = new Button(&quot;Middle&quot;);\r\n\t\tbutton3 = new Button(&quot;Left&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene15));\r\n\t\tbutton2.setOnAction(e -&gt; switchScenes(scene10));\r\n\t\tbutton3.setOnAction(e -&gt; switchScenes(scene11));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 0, 0);\r\n\t\tGrid.add(BannerImage2, 1, 0);\r\n\t\tGrid.add(BannerImage3, 2, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 0, 2);\r\n\t\tGrid.add(button2, 1, 2);\r\n\t\tGrid.add(button3, 2, 2);\r\n\t\treturn scene7;\r\n\t}\r\n\t\r\n\tprivate Scene StageEight()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;go straight for demon lord&quot;);\r\n\t\timage1 = new Image(&quot;file:demonlordcastle.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e-&gt; switchScenes(scene18));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene8;\r\n\t}\r\n\tprivate Scene StageNine()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Run into a group of orcs and beat them easily. You go back to looking find another fork, which path&quot;);\r\n\t\timage1 = new Image(&quot;file:right.jpg&quot;);\r\n\t\timage2 = new Image(&quot;file:left.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage2 = new ImageView(image2);\r\n\t\tBannerImage3 = new ImageView(image3);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage2.setFitWidth(100);\r\n\t\tBannerImage2.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Left&quot;);\r\n\t\tbutton2 = new Button(&quot;Right&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene12));\r\n\t\tbutton2.setOnAction(e -&gt; switchScenes(scene11));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 0, 0);\r\n\t\tGrid.add(BannerImage2, 1, 0);\r\n\t\tGrid.add(BannerImage3, 2, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 0, 2);\r\n\t\tGrid.add(button2, 1, 2);\r\n\t\treturn scene9;\r\n\t}\r\n\t\r\n\tprivate Scene StageTen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;After looking for something to fight around the forest, you were turned around and wnet around in a circle.&quot;);\r\n\t\timage1 = new Image(&quot;file:denseforest.jpg&quot;);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene5));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene10;\r\n\t}\r\n\t\r\n\tprivate Scene StageEleven()\r\n\t{\r\n\t\tString gos = &quot;gos.mp3&quot;;\r\n\t\tMedia hit = new Media(new File(gos).toURI().toString());\r\n\t\tMediaPlayer mediaplayer = new MediaPlayer(hit);\r\n\t\tmediaplayer.play();\r\n\t\toutputmessage = new Label(&quot;You have run into a large demon king patrol unit and were killed.&quot;);\r\n\t\timage1 = new Image(&quot;gameover.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tbutton1 = new Button(&quot;Retry?&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene1));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene11;\r\n\t}\r\n\t\r\n\tprivate Scene StageTwelve()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Find dragon and beat it with ease as you attune to your weapon, awakening it&#39;s full potentail, which way do you go.&quot;);\r\n\t\timage1 = new Image(&quot;file:right.jpg&quot;);\r\n\t\timage2 = new Image(&quot;file:left.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage2 = new ImageView(image2);\r\n\t\tBannerImage3 = new ImageView(image3);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage2.setFitWidth(100);\r\n\t\tBannerImage2.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Right&quot;);\r\n\t\tbutton2 = new Button(&quot;Left&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene11));\r\n\t\tbutton2.setOnAction(e -&gt; switchScenes(scene13));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 0, 2);\r\n\t\tGrid.add(button2, 1, 2);\r\n\t\treturn scene12;\r\n\t}\r\n\t\r\n\tprivate Scene StageThirteen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Meeting the demon king&quot;);\r\n\t\timage1 = new Image(&quot;file:DMPic.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e-&gt; switchScenes(scene14));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene13;\r\n\t}\r\n\t\r\n\tprivate Scene StageFourteen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Good Ending&quot;);\r\n\t\timage1 = new Image(&quot;goodending.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\treturn scene14;\r\n\t}\r\n\t\r\n\tprivate Scene StageFifteen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Finding a group of orcs, which path will you take&quot;);\r\n\t\timage1 = new Image(&quot;file:right.jpg&quot;);\r\n\t\timage2 = new Image(&quot;file:left.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage2 = new ImageView(image2);\r\n\t\tBannerImage3 = new ImageView(image3);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage2.setFitWidth(100);\r\n\t\tBannerImage2.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Right&quot;);\r\n\t\tbutton2 = new Button(&quot;Left&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene11));\r\n\t\tbutton2.setOnAction(e -&gt; switchScenes(scene16));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 0, 0);\r\n\t\tGrid.add(BannerImage2, 1, 0);\r\n\t\tGrid.add(BannerImage3, 2, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 0, 2);\r\n\t\tGrid.add(button2, 1, 2);\r\n\t\treturn scene15;\r\n\t}\r\n\t\r\n\tprivate Scene StageSixteen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Meeting the demon king&quot;);\r\n\t\timage1 = new Image(&quot;file:DMPic.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e-&gt; switchScenes(scene17));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene16;\r\n\t}\r\n\t\r\n\tprivate Scene StageSeventeen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Neutrual Ending&quot;);\r\n\t\timage1 = new Image(&quot;file:neutrualending.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\treturn scene17;\r\n\t}\r\n\t\r\n\tprivate Scene StageEighteen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;go straight for demon lord&quot;);\r\n\t\timage1 = new Image(&quot;file:DMPic.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e-&gt; switchScenes(scene19));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene18;\r\n\t}\r\n\t\r\n\tprivate Scene StageNineteen()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;Bad Ending&quot;);\r\n\t\timage1 = new Image(&quot;badending.jpg&quot;);\r\n\t\tBannerImage1 = new ImageView(image1);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\treturn scene19;\r\n\t}\r\n\r\n\tprivate Scene StageTwenty()\r\n\t{\r\n\t\toutputmessage = new Label(&quot;After looking for something to fight around the forest, you were turned around and wnet around in a circle.&quot;);\r\n\t\timage1 = new Image(&quot;file:lightforest.jpg&quot;);\r\n\t\tBannerImage1.setFitHeight(100);\r\n\t\tBannerImage1.setFitWidth(100);\r\n\t\tbutton1 = new Button(&quot;Next&quot;);\r\n\t\tbutton1.setOnAction(e -&gt; switchScenes(scene7));\r\n\t\tGrid = new GridPane();\r\n\t\tGrid.add(BannerImage1, 1, 0);\r\n\t\tGrid.add(outputmessage, 1, 1);\r\n\t\tGrid.add(button1, 1, 2);\r\n\t\treturn scene20;\r\n\t}\r\n\t\r\n\tpublic void switchScenes(Scene scene)\r\n\t{\r\n\t\tstage.setScene(scene);\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tlaunch(args);\r\n\r\n\t}\r\n}\r\n```\r\n\r\n\r\n\r\nI have already set up the run config and all that.","title":"What can I do to make the code run properly","body":"<p>It's giving me this error</p>\n<pre><code>Exception in Application start method\njava.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:464)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:363)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1082)\nCaused by: java.lang.RuntimeException: Exception in Application start method\n    at javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:893)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.IllegalAccessError: class com.sun.media.jfxmediaimpl.NativeMediaManager (in unnamed module @0x7b61a0ef) cannot access class com.sun.glass.utils.NativeLibLoader (in module javafx.graphics) because module javafx.graphics does not export com.sun.glass.utils to unnamed module @0x7b61a0ef\n    at com.sun.media.jfxmediaimpl.NativeMediaManager.lambda$new$0(NativeMediaManager.java:110)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\n    at com.sun.media.jfxmediaimpl.NativeMediaManager.&lt;init&gt;(NativeMediaManager.java:107)\n    at com.sun.media.jfxmediaimpl.NativeMediaManager$NativeMediaManagerInitializer.&lt;clinit&gt;(NativeMediaManager.java:77)\n    at com.sun.media.jfxmediaimpl.NativeMediaManager.getDefaultInstance(NativeMediaManager.java:89)\n    at com.sun.media.jfxmedia.MediaManager.canPlayProtocol(MediaManager.java:78)\n    at com.sun.media.jfxmedia.locator.Locator.&lt;init&gt;(Locator.java:240)\n    at javafx.scene.media.Media.&lt;init&gt;(Media.java:392)\n    at Final.StageEleven(Final.java:288)\n    at Final.start(Final.java:37)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:839)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:483)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:456)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:455)\n    at javafx.graphics@20.0.1/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\n    at javafx.graphics@20.0.1/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at javafx.graphics@20.0.1/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185)\n    ... 1 more\nException running application Final\n</code></pre>\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.layout.GridPane;\nimport javafx.stage.Stage;\nimport java.io.File;\nimport javafx.scene.media.Media;\nimport javafx.scene.media.MediaPlayer;\n\npublic class Final extends Application{\n\n    private Label outputmessage;\n    private ImageView BannerImage1, BannerImage2, BannerImage3; \n    private Image image1,image2,image3;\n    private GridPane Grid;\n    private Stage stage;\n    private Button button1, button2, button3; \n    private Scene scene1,scene2,scene3,scene4,scene5,scene6,scene7,scene8,\n        scene9,scene10,scene11,scene12,scene13, scene14,scene15,scene16,scene17,scene18,scene19,scene20;\n    public void start(Stage primarystage) throws Exception\n    {\n        stage = primarystage;\n        stage.setTitle(&quot;The World of Leway&quot;);\n        scene1 = Stageone();\n        scene2 = Stagetwo();\n        scene3 = StageThree();\n        scene4 = StageFour();\n        scene5 = StageFive();\n        scene6 = StageSix();\n        scene7 = StageSeven();\n        scene8 = StageEight();\n        scene9 = StageNine();\n        scene10 = StageTen();\n        scene11 = StageEleven();\n        scene12 = StageTwelve();\n        scene13 = StageThirteen();\n        scene14 = StageFourteen();\n        scene15 = StageFifteen();\n        scene16 = StageSixteen();\n        scene17 = StageSeventeen();\n        scene18 = StageEighteen();\n        scene19 = StageNineteen();\n        scene20 = StageTwenty();\n        stage.setScene(scene1);\n        stage.show();\n    }\n    private Scene Stageone()\n    {\n        outputmessage = new Label(&quot;You soon begin to wake up in a room, sitting on a chair, from behind you hear a woman's voice saying, 'You have died.' A woman with blue hair walked past you, taking a seat in front you.&quot;\n                + &quot;\\nAs she sat, she spoke once more, 'After dying I have taken your soul and brought it to this world. You can say it's sort of a limbo. My name is Aqua. I have summoned you here to ask you one thing.'&quot;);\n        image1 = new Image(&quot;file:Goddess.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene2));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene1;\n    }\n    \n    private Scene Stagetwo()\n    {\n        outputmessage = new Label(&quot;Please take up arm and defeat the demon lord of this world. You can choose between these three weapons.&quot;);\n        image1 = new Image(&quot;file:greatsword.jpeg&quot;);\n        image2 = new Image(&quot;file:SwordandShield.jpg&quot;);\n        image3 = new Image(&quot;file:bow.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage2 = new ImageView(image2);\n        BannerImage3 = new ImageView(image3);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        BannerImage2.setFitWidth(100);\n        BannerImage2.setFitHeight(100);\n        BannerImage3.setFitWidth(100);\n        BannerImage3.setFitHeight(100);\n        button1 = new Button(&quot;Great Sword&quot;);\n        button2 = new Button(&quot;Sword and Shield&quot;);\n        button3 = new Button(&quot;Bow&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene3));\n        button2.setOnAction(e -&gt; switchScenes(scene3));\n        button3.setOnAction(e -&gt; switchScenes(scene3));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 0, 0);\n        Grid.add(BannerImage2, 1, 0);\n        Grid.add(BannerImage3, 2, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 0, 2);\n        Grid.add(button2, 1, 2);\n        Grid.add(button3, 2, 2);\n        return scene2;\n    }\n    \n    private Scene StageThree()\n    {\n        outputmessage = new Label(&quot;After having picked your weapon, you soon are engulfed in a bright light and after the light disapates you appear in the middle of a city.&quot;\n                + &quot;\\nAfter walking around for a while, taking in the sights of a different world and city, you are soon stopped by a knight of the city. he begans to ask a series of questions, until he spots your weapon. 'Please Come with me.'&quot;\n                + &quot;\\nHe said as lead you to the castle in the middle of the city.&quot;);\n        image1 = new Image(&quot;file:CityStreets.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e-&gt; switchScenes(scene4));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene3;\n    }\n    \n    private Scene StageFour()\n    {\n        outputmessage = new Label(&quot;Meeting with king&quot;);\n        image1 = new Image(&quot;file:king.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e-&gt; switchScenes(scene5));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene4;\n    }\n    \n    private Scene StageFive()\n    {\n        outputmessage = new Label(&quot;Training Path&quot;);\n        image1 = new Image(&quot;file:denseforest.jpg&quot;);\n        image2 = new Image(&quot;file:lightforest.jpg&quot;);\n        image3 = new Image(&quot;file:demonlordcastle.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage2 = new ImageView(image2);\n        BannerImage3 = new ImageView(image3);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        BannerImage2.setFitWidth(100);\n        BannerImage2.setFitHeight(100);\n        BannerImage3.setFitWidth(100);\n        BannerImage3.setFitHeight(100);\n        button1 = new Button(&quot;Train Hard&quot;);\n        button2 = new Button(&quot;Train Light&quot;);\n        button3 = new Button(&quot;Straight for demon king&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene6));\n        button2.setOnAction(e -&gt; switchScenes(scene7));\n        button3.setOnAction(e -&gt; switchScenes(scene8));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 0, 0);\n        Grid.add(BannerImage2, 1, 0);\n        Grid.add(BannerImage3, 2, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 0, 2);\n        Grid.add(button2, 1, 2);\n        Grid.add(button3, 2, 2);\n        return scene5;\n    }\n    \n    private Scene StageSix()\n    {\n        outputmessage = new Label(&quot;Go down training hard path and walk around, which path you take&quot;);\n        image1 = new Image(&quot;file:right.jpg&quot;);\n        image2 = new Image(&quot;file:middle.jpg&quot;);\n        image3 = new Image(&quot;file:left.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage2 = new ImageView(image2);\n        BannerImage3 = new ImageView(image3);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        BannerImage2.setFitWidth(100);\n        BannerImage2.setFitHeight(100);\n        BannerImage3.setFitWidth(100);\n        BannerImage3.setFitHeight(100);\n        button1 = new Button(&quot;Right&quot;);\n        button2 = new Button(&quot;Middle&quot;);\n        button3 = new Button(&quot;Left&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene9));\n        button2.setOnAction(e -&gt; switchScenes(scene20));\n        button3.setOnAction(e -&gt; switchScenes(scene11));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 0, 0);\n        Grid.add(BannerImage2, 1, 0);\n        Grid.add(BannerImage3, 2, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 0, 2);\n        Grid.add(button2, 1, 2);\n        Grid.add(button3, 2, 2);\n        return scene6;\n    }\n    \n    private Scene StageSeven()\n    {\n        outputmessage = new Label(&quot;go down Train lightly path, which way&quot;);\n        image1 = new Image(&quot;file:right.jpg&quot;);\n        image2 = new Image(&quot;file:middle.jpg&quot;);\n        image3 = new Image(&quot;file:left.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage2 = new ImageView(image2);\n        BannerImage3 = new ImageView(image3);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        BannerImage2.setFitWidth(100);\n        BannerImage2.setFitHeight(100);\n        BannerImage3.setFitWidth(100);\n        BannerImage3.setFitHeight(100);\n        button1 = new Button(&quot;Right&quot;);\n        button2 = new Button(&quot;Middle&quot;);\n        button3 = new Button(&quot;Left&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene15));\n        button2.setOnAction(e -&gt; switchScenes(scene10));\n        button3.setOnAction(e -&gt; switchScenes(scene11));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 0, 0);\n        Grid.add(BannerImage2, 1, 0);\n        Grid.add(BannerImage3, 2, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 0, 2);\n        Grid.add(button2, 1, 2);\n        Grid.add(button3, 2, 2);\n        return scene7;\n    }\n    \n    private Scene StageEight()\n    {\n        outputmessage = new Label(&quot;go straight for demon lord&quot;);\n        image1 = new Image(&quot;file:demonlordcastle.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e-&gt; switchScenes(scene18));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene8;\n    }\n    private Scene StageNine()\n    {\n        outputmessage = new Label(&quot;Run into a group of orcs and beat them easily. You go back to looking find another fork, which path&quot;);\n        image1 = new Image(&quot;file:right.jpg&quot;);\n        image2 = new Image(&quot;file:left.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage2 = new ImageView(image2);\n        BannerImage3 = new ImageView(image3);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        BannerImage2.setFitWidth(100);\n        BannerImage2.setFitHeight(100);\n        button1 = new Button(&quot;Left&quot;);\n        button2 = new Button(&quot;Right&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene12));\n        button2.setOnAction(e -&gt; switchScenes(scene11));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 0, 0);\n        Grid.add(BannerImage2, 1, 0);\n        Grid.add(BannerImage3, 2, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 0, 2);\n        Grid.add(button2, 1, 2);\n        return scene9;\n    }\n    \n    private Scene StageTen()\n    {\n        outputmessage = new Label(&quot;After looking for something to fight around the forest, you were turned around and wnet around in a circle.&quot;);\n        image1 = new Image(&quot;file:denseforest.jpg&quot;);\n        BannerImage1.setFitHeight(100);\n        BannerImage1.setFitWidth(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene5));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene10;\n    }\n    \n    private Scene StageEleven()\n    {\n        String gos = &quot;gos.mp3&quot;;\n        Media hit = new Media(new File(gos).toURI().toString());\n        MediaPlayer mediaplayer = new MediaPlayer(hit);\n        mediaplayer.play();\n        outputmessage = new Label(&quot;You have run into a large demon king patrol unit and were killed.&quot;);\n        image1 = new Image(&quot;gameover.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        button1 = new Button(&quot;Retry?&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene1));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene11;\n    }\n    \n    private Scene StageTwelve()\n    {\n        outputmessage = new Label(&quot;Find dragon and beat it with ease as you attune to your weapon, awakening it's full potentail, which way do you go.&quot;);\n        image1 = new Image(&quot;file:right.jpg&quot;);\n        image2 = new Image(&quot;file:left.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage2 = new ImageView(image2);\n        BannerImage3 = new ImageView(image3);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        BannerImage2.setFitWidth(100);\n        BannerImage2.setFitHeight(100);\n        button1 = new Button(&quot;Right&quot;);\n        button2 = new Button(&quot;Left&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene11));\n        button2.setOnAction(e -&gt; switchScenes(scene13));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 0, 2);\n        Grid.add(button2, 1, 2);\n        return scene12;\n    }\n    \n    private Scene StageThirteen()\n    {\n        outputmessage = new Label(&quot;Meeting the demon king&quot;);\n        image1 = new Image(&quot;file:DMPic.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e-&gt; switchScenes(scene14));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene13;\n    }\n    \n    private Scene StageFourteen()\n    {\n        outputmessage = new Label(&quot;Good Ending&quot;);\n        image1 = new Image(&quot;goodending.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        return scene14;\n    }\n    \n    private Scene StageFifteen()\n    {\n        outputmessage = new Label(&quot;Finding a group of orcs, which path will you take&quot;);\n        image1 = new Image(&quot;file:right.jpg&quot;);\n        image2 = new Image(&quot;file:left.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage2 = new ImageView(image2);\n        BannerImage3 = new ImageView(image3);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        BannerImage2.setFitWidth(100);\n        BannerImage2.setFitHeight(100);\n        button1 = new Button(&quot;Right&quot;);\n        button2 = new Button(&quot;Left&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene11));\n        button2.setOnAction(e -&gt; switchScenes(scene16));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 0, 0);\n        Grid.add(BannerImage2, 1, 0);\n        Grid.add(BannerImage3, 2, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 0, 2);\n        Grid.add(button2, 1, 2);\n        return scene15;\n    }\n    \n    private Scene StageSixteen()\n    {\n        outputmessage = new Label(&quot;Meeting the demon king&quot;);\n        image1 = new Image(&quot;file:DMPic.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e-&gt; switchScenes(scene17));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene16;\n    }\n    \n    private Scene StageSeventeen()\n    {\n        outputmessage = new Label(&quot;Neutrual Ending&quot;);\n        image1 = new Image(&quot;file:neutrualending.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        return scene17;\n    }\n    \n    private Scene StageEighteen()\n    {\n        outputmessage = new Label(&quot;go straight for demon lord&quot;);\n        image1 = new Image(&quot;file:DMPic.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e-&gt; switchScenes(scene19));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene18;\n    }\n    \n    private Scene StageNineteen()\n    {\n        outputmessage = new Label(&quot;Bad Ending&quot;);\n        image1 = new Image(&quot;badending.jpg&quot;);\n        BannerImage1 = new ImageView(image1);\n        BannerImage1.setFitWidth(100);\n        BannerImage1.setFitHeight(100);\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        return scene19;\n    }\n\n    private Scene StageTwenty()\n    {\n        outputmessage = new Label(&quot;After looking for something to fight around the forest, you were turned around and wnet around in a circle.&quot;);\n        image1 = new Image(&quot;file:lightforest.jpg&quot;);\n        BannerImage1.setFitHeight(100);\n        BannerImage1.setFitWidth(100);\n        button1 = new Button(&quot;Next&quot;);\n        button1.setOnAction(e -&gt; switchScenes(scene7));\n        Grid = new GridPane();\n        Grid.add(BannerImage1, 1, 0);\n        Grid.add(outputmessage, 1, 1);\n        Grid.add(button1, 1, 2);\n        return scene20;\n    }\n    \n    public void switchScenes(Scene scene)\n    {\n        stage.setScene(scene);\n    }\n    \n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        launch(args);\n\n    }\n}\n</code></pre>\n<p>I have already set up the run config and all that.</p>\n"},{"tags":["java","forkjoinpool"],"answers":[{"tags":[],"owner":{"account_id":15265437,"reputation":242,"user_id":11014240,"display_name":"Supersic"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1652103666,"creation_date":1652103666,"answer_id":72172952,"question_id":72145460,"body_markdown":"I read this in the java docs recenty, \r\n&gt;ForkJoinTasks should perform relatively small amounts of computation. Large tasks should be split into smaller subtasks, usually via recursive       \r\n&gt;decomposition. As a very rough rule of thumb, a task should perform more than 100 and less than 10000 basic computational steps, and should avoid indefinite looping. If tasks are too big, then parallelism cannot improve throughput. If too small, then memory and internal task maintenance overhead may overwhelm processing. ","title":"What is the disadvantage of using a ForkJoinPool when it is not needed?","body":"<p>I read this in the java docs recenty,</p>\n<blockquote>\n<p>ForkJoinTasks should perform relatively small amounts of computation. Large tasks should be split into smaller subtasks, usually via recursive<br />\ndecomposition. As a very rough rule of thumb, a task should perform more than 100 and less than 10000 basic computational steps, and should avoid indefinite looping. If tasks are too big, then parallelism cannot improve throughput. If too small, then memory and internal task maintenance overhead may overwhelm processing.</p>\n</blockquote>\n"}],"owner":{"account_id":15265437,"reputation":242,"user_id":11014240,"display_name":"Supersic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":470,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":72172952,"answer_count":1,"score":1,"last_activity_date":1683293847,"creation_date":1651858770,"question_id":72145460,"body_markdown":"Imagine a scenario where a task can be divided into sub-tasks, each of which does some long running process. Assuming that this heavy task occurs only in 5/100 requests submitted to the server. Would it be wise to use a ForkJoinPool for this 5% of tasks? What are the disadvantages of splitting a small task into smaller sub-tasks and using a ForkJoinPool to run said small task? \r\n\r\nAssume that I cannot decide whether to split or not split a task, therefore I split all tasks by default and run it on a ForkJoinPool.","title":"What is the disadvantage of using a ForkJoinPool when it is not needed?","body":"<p>Imagine a scenario where a task can be divided into sub-tasks, each of which does some long running process. Assuming that this heavy task occurs only in 5/100 requests submitted to the server. Would it be wise to use a ForkJoinPool for this 5% of tasks? What are the disadvantages of splitting a small task into smaller sub-tasks and using a ForkJoinPool to run said small task?</p>\n<p>Assume that I cannot decide whether to split or not split a task, therefore I split all tasks by default and run it on a ForkJoinPool.</p>\n"},{"tags":["java","visual-studio-code","javadoc"],"answers":[{"tags":[],"owner":{"account_id":11817142,"reputation":477,"user_id":8647107,"display_name":"Rusu Dinu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626254470,"creation_date":1626253098,"answer_id":68375016,"question_id":68374716,"body_markdown":"You could try using [this][1] extension pack (it contains the extension [Language Support for Java(TM) by Red Hat][2] that gives the information you&#39;re looking for when hovering over Java code):\r\n\r\n[![enter image description here][3]][3]\r\n\r\nMake sure to also have tooltips enabled. You can read about enabling them [here][4].\r\n\r\n\r\n  [1]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\r\n  [2]: https://marketplace.visualstudio.com/items?itemName=redhat.java\r\n  [3]: https://i.stack.imgur.com/PLS6q.png\r\n  [4]: https://stackoverflow.com/questions/41115285/disable-tooltip-hint-in-visual-studio-code","title":"How to view Java standard library documentation popup in Visual Studio Code with OpenJDK 11 on Ubuntu 21.04?","body":"<p>You could try using <a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\" rel=\"nofollow noreferrer\">this</a> extension pack (it contains the extension <a href=\"https://marketplace.visualstudio.com/items?itemName=redhat.java\" rel=\"nofollow noreferrer\">Language Support for Java(TM) by Red Hat</a> that gives the information you're looking for when hovering over Java code):</p>\n<p><a href=\"https://i.stack.imgur.com/PLS6q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PLS6q.png\" alt=\"enter image description here\" /></a></p>\n<p>Make sure to also have tooltips enabled. You can read about enabling them <a href=\"https://stackoverflow.com/questions/41115285/disable-tooltip-hint-in-visual-studio-code\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":19088616,"reputation":8284,"user_id":13939333,"display_name":"Molly Wang-MSFT"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1626424381,"creation_date":1626423845,"answer_id":68405844,"question_id":68374716,"body_markdown":"When i hover over the `println()`, the description is as the same as the comment you can get by **Ctrl+Clicking** the method:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nJava extension can&#39;t detect and show the documentation if they don&#39;t even exist in jdk at all. You can try in your project and see if the java you installed has documentation.\r\n\r\nCould you try to install the openjdk-src or openjdk-doc package? See [OpenJDK][2]. \r\n\r\nOR install another java version and set it as `java.home` in vscode to see if this question still exists.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dqlhk.png\r\n  [2]: https://wiki.archlinux.org/index.php/Java#OpenJDK","title":"How to view Java standard library documentation popup in Visual Studio Code with OpenJDK 11 on Ubuntu 21.04?","body":"<p>When i hover over the <code>println()</code>, the description is as the same as the comment you can get by <strong>Ctrl+Clicking</strong> the method:</p>\n<p><a href=\"https://i.stack.imgur.com/dqlhk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dqlhk.png\" alt=\"enter image description here\" /></a></p>\n<p>Java extension can't detect and show the documentation if they don't even exist in jdk at all. You can try in your project and see if the java you installed has documentation.</p>\n<p>Could you try to install the openjdk-src or openjdk-doc package? See <a href=\"https://wiki.archlinux.org/index.php/Java#OpenJDK\" rel=\"nofollow noreferrer\">OpenJDK</a>.</p>\n<p>OR install another java version and set it as <code>java.home</code> in vscode to see if this question still exists.</p>\n"},{"tags":[],"owner":{"account_id":18263692,"reputation":563,"user_id":13295921,"display_name":"UN..D"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683293670,"creation_date":1669547794,"answer_id":74589555,"question_id":68374716,"body_markdown":"After searching,I found the the problem was about the configuring of user [settings.json][1] file \r\n\r\n      Add the same path as JAVA_HOME in the &quot;java.jdt.ls.java.home&quot; config\r\n\r\n \r\nNow, I can see the documents but it show at the top \r\n\r\n\r\n    // Source code is unavailable, and was generated by the Fernflower decompiler.\r\n\r\n\r\nAlso it didn&#39;t show information when hover on method ...\r\n\r\nNext, try to install the openjdk-src or openjdk-doc package\r\nas mention by @Molly Wang-MSFT. \r\n\r\nFor more information check [Java in Visual Studio Code][2]\r\n\r\n---------------------------------\r\nUse below setting to handle not existed jar file locally (ex:Spring documentation):\r\n\r\nYou can enable the user setting.json `&quot;java.maven.downloadSources&quot;:true,`\r\n\r\neach time you opened a class file, if the source jar does not exist locally, the extension will trigger a download task for that source jar.\r\n\r\n  [1]: https://github.com/redhat-developer/vscode-java/issues/2277\r\n  [2]: https://code.visualstudio.com/docs/languages/java","title":"How to view Java standard library documentation popup in Visual Studio Code with OpenJDK 11 on Ubuntu 21.04?","body":"<p>After searching,I found the the problem was about the configuring of user <a href=\"https://github.com/redhat-developer/vscode-java/issues/2277\" rel=\"nofollow noreferrer\">settings.json</a> file</p>\n<pre><code>  Add the same path as JAVA_HOME in the &quot;java.jdt.ls.java.home&quot; config\n</code></pre>\n<p>Now, I can see the documents but it show at the top</p>\n<pre><code>// Source code is unavailable, and was generated by the Fernflower decompiler.\n</code></pre>\n<p>Also it didn't show information when hover on method ...</p>\n<p>Next, try to install the openjdk-src or openjdk-doc package\nas mention by @Molly Wang-MSFT.</p>\n<p>For more information check <a href=\"https://code.visualstudio.com/docs/languages/java\" rel=\"nofollow noreferrer\">Java in Visual Studio Code</a></p>\n<hr />\n<p>Use below setting to handle not existed jar file locally (ex:Spring documentation):</p>\n<p>You can enable the user setting.json <code>&quot;java.maven.downloadSources&quot;:true,</code></p>\n<p>each time you opened a class file, if the source jar does not exist locally, the extension will trigger a download task for that source jar.</p>\n"}],"owner":{"account_id":8502865,"reputation":774,"user_id":6375601,"display_name":"nuiun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":715,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":68405844,"answer_count":3,"score":3,"last_activity_date":1683293670,"creation_date":1626251829,"question_id":68374716,"body_markdown":"A similar question was asked for Eclipse: https://stackoverflow.com/questions/53306309/add-java-docs-in-eclipse-working-on-openjdk\r\n\r\nI found /usr/lib/jvm/java-11-openjdk-amd64/lib/src.zip on my system.\r\n\r\nBuilding and runing a source file works. Documentation is shown for dependencies loaded via Maven. The documentation for the Java standard library is missing.\r\n\r\nExamples:\r\n\r\nhovering over\r\n```java\r\nSystem.out.println(&quot;test&quot;);\r\n```\r\nshows \r\n&gt; void java.io.PrintStream.println(String x)\r\n\r\nI would like to see the javadoc here.\r\n\r\nIt is working with:\r\n```java\r\nnew DefaultCamelContext();\r\n```\r\nIt shows:\r\n\r\n&gt; org.apache.camel.impl.DefaultCamelContext.DefaultCamelContext()\r\n&gt; \r\n&gt; Creates the ModelCamelContext using\r\n&gt; org.apache.camel.support.DefaultRegistry as registry.\r\n&gt; \r\n&gt; Use one of the\r\n&gt; other constructors to force use an explicit registry.\r\n\r\nEdit:\r\nRelevant Installed Visual Studio Code Extensions are:\r\n\r\n - Language Support for Java(TM) by Red Hat\r\n - Debugger for Java\r\n - Java Test Runner\r\n - Maven for Java\r\n - Project Manager for Java\r\n - Visual Studio IntelliCode\r\n\r\nThese are installed via the [official Java Extension Pack from Microsoft](https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack).\r\n\r\nedit2: my user settings.json\r\n```json\r\n{\r\n    &quot;telemetry.enableTelemetry&quot;: false,\r\n    &quot;telemetry.enableCrashReporter&quot;: false,\r\n    &quot;editor.fontFamily&quot;: &quot;&#39;Ubuntu Mono&#39;, &#39;Droid Sans Mono&#39;, &#39;monospace&#39;, monospace, &#39;Droid Sans Fallback&#39;&quot;,\r\n    &quot;files.autoSave&quot;: &quot;onFocusChange&quot;,\r\n    &quot;window.zoomLevel&quot;: 3,\r\n    &quot;editor.wordWrap&quot;: &quot;bounded&quot;,\r\n    &quot;yaml.schemas&quot;: {\r\n        &quot;file:///toc.schema.json&quot;: &quot;/toc\\\\.yml/i&quot;\r\n    },\r\n    &quot;window.menuBarVisibility&quot;: &quot;default&quot;,\r\n    &quot;rust-analyzer.checkOnSave.command&quot;: &quot;clippy&quot;,\r\n    &quot;editor.minimap.enabled&quot;: false,\r\n    &quot;editor.cursorBlinking&quot;: &quot;solid&quot;,\r\n    &quot;rust-analyzer.checkOnSave.enable&quot;: false,\r\n    &quot;explorer.sortOrder&quot;: &quot;mixed&quot;,\r\n    &quot;rust-analyzer.lens.methodReferences&quot;: true,\r\n    &quot;rust-analyzer.lens.references&quot;: true,\r\n    &quot;rust-analyzer.lruCapacity&quot;: 512,\r\n    &quot;workbench.colorTheme&quot;: &quot;Default Dark+&quot;,\r\n    &quot;editor.suggestSelection&quot;: &quot;first&quot;,\r\n    &quot;vsintellicode.modify.editor.suggestSelection&quot;: &quot;automaticallyOverrodeDefaultValue&quot;,\r\n    &quot;files.exclude&quot;: {\r\n        &quot;**/.classpath&quot;: true,\r\n        &quot;**/.project&quot;: true,\r\n        &quot;**/.settings&quot;: true,\r\n        &quot;**/.factorypath&quot;: true\r\n    },\r\n    &quot;java.home&quot;: &quot;/usr/lib/jvm/java-11-openjdk-amd64&quot;,\r\n    &quot;java.configuration.runtimes&quot;: [\r\n        {\r\n          &quot;name&quot;: &quot;JavaSE-11&quot;,\r\n          &quot;path&quot;: &quot;/usr/lib/jvm/java-11-openjdk-amd64&quot;,\r\n          &quot;default&quot;: true\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nmy workspace settings.json is empty","title":"How to view Java standard library documentation popup in Visual Studio Code with OpenJDK 11 on Ubuntu 21.04?","body":"<p>A similar question was asked for Eclipse: <a href=\"https://stackoverflow.com/questions/53306309/add-java-docs-in-eclipse-working-on-openjdk\">Add Java Docs in Eclipse working on OpenJDK</a></p>\n<p>I found /usr/lib/jvm/java-11-openjdk-amd64/lib/src.zip on my system.</p>\n<p>Building and runing a source file works. Documentation is shown for dependencies loaded via Maven. The documentation for the Java standard library is missing.</p>\n<p>Examples:</p>\n<p>hovering over</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(&quot;test&quot;);\n</code></pre>\n<p>shows</p>\n<blockquote>\n<p>void java.io.PrintStream.println(String x)</p>\n</blockquote>\n<p>I would like to see the javadoc here.</p>\n<p>It is working with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new DefaultCamelContext();\n</code></pre>\n<p>It shows:</p>\n<blockquote>\n<p>org.apache.camel.impl.DefaultCamelContext.DefaultCamelContext()</p>\n<p>Creates the ModelCamelContext using\norg.apache.camel.support.DefaultRegistry as registry.</p>\n<p>Use one of the\nother constructors to force use an explicit registry.</p>\n</blockquote>\n<p>Edit:\nRelevant Installed Visual Studio Code Extensions are:</p>\n<ul>\n<li>Language Support for Java(TM) by Red Hat</li>\n<li>Debugger for Java</li>\n<li>Java Test Runner</li>\n<li>Maven for Java</li>\n<li>Project Manager for Java</li>\n<li>Visual Studio IntelliCode</li>\n</ul>\n<p>These are installed via the <a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\" rel=\"nofollow noreferrer\">official Java Extension Pack from Microsoft</a>.</p>\n<p>edit2: my user settings.json</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;telemetry.enableTelemetry&quot;: false,\n    &quot;telemetry.enableCrashReporter&quot;: false,\n    &quot;editor.fontFamily&quot;: &quot;'Ubuntu Mono', 'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'&quot;,\n    &quot;files.autoSave&quot;: &quot;onFocusChange&quot;,\n    &quot;window.zoomLevel&quot;: 3,\n    &quot;editor.wordWrap&quot;: &quot;bounded&quot;,\n    &quot;yaml.schemas&quot;: {\n        &quot;file:///toc.schema.json&quot;: &quot;/toc\\\\.yml/i&quot;\n    },\n    &quot;window.menuBarVisibility&quot;: &quot;default&quot;,\n    &quot;rust-analyzer.checkOnSave.command&quot;: &quot;clippy&quot;,\n    &quot;editor.minimap.enabled&quot;: false,\n    &quot;editor.cursorBlinking&quot;: &quot;solid&quot;,\n    &quot;rust-analyzer.checkOnSave.enable&quot;: false,\n    &quot;explorer.sortOrder&quot;: &quot;mixed&quot;,\n    &quot;rust-analyzer.lens.methodReferences&quot;: true,\n    &quot;rust-analyzer.lens.references&quot;: true,\n    &quot;rust-analyzer.lruCapacity&quot;: 512,\n    &quot;workbench.colorTheme&quot;: &quot;Default Dark+&quot;,\n    &quot;editor.suggestSelection&quot;: &quot;first&quot;,\n    &quot;vsintellicode.modify.editor.suggestSelection&quot;: &quot;automaticallyOverrodeDefaultValue&quot;,\n    &quot;files.exclude&quot;: {\n        &quot;**/.classpath&quot;: true,\n        &quot;**/.project&quot;: true,\n        &quot;**/.settings&quot;: true,\n        &quot;**/.factorypath&quot;: true\n    },\n    &quot;java.home&quot;: &quot;/usr/lib/jvm/java-11-openjdk-amd64&quot;,\n    &quot;java.configuration.runtimes&quot;: [\n        {\n          &quot;name&quot;: &quot;JavaSE-11&quot;,\n          &quot;path&quot;: &quot;/usr/lib/jvm/java-11-openjdk-amd64&quot;,\n          &quot;default&quot;: true\n        }\n    ]\n}\n</code></pre>\n<p>my workspace settings.json is empty</p>\n"},{"tags":["java","spring-boot","junit","mockito","junit5"],"comments":[{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1683297588,"post_id":76182731,"comment_id":134349977,"body_markdown":"Notice the address of the lambdas (@43effd89 and @614aeccc) are different, so the match fails.  [This](https://stackoverflow.com/a/41463510/6650475) might help.","body":"Notice the address of the lambdas (@43effd89 and @614aeccc) are different, so the match fails.  <a href=\"https://stackoverflow.com/a/41463510/6650475\">This</a> might help."},{"owner":{"account_id":28144527,"reputation":37,"user_id":21507039,"display_name":"Anup Panchal"},"score":0,"creation_date":1683522467,"post_id":76182731,"comment_id":134373949,"body_markdown":"can you please explain me with proper example @AndrewS","body":"can you please explain me with proper example @AndrewS"},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1683551218,"post_id":76182731,"comment_id":134379483,"body_markdown":"The linked SO answer has an example.","body":"The linked SO answer has an example."}],"owner":{"account_id":28144527,"reputation":37,"user_id":21507039,"display_name":"Anup Panchal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":277,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683293640,"creation_date":1683293309,"question_id":76182731,"body_markdown":"**i am working on spring boot gradle project**\r\n\r\n# this is my service layer class\r\n\r\n# create one filter method to fatch list of records\r\n\r\n\r\n```\r\n@Transactional\r\n@Service\r\npublic class QuestionServiceImpl implements QuestionService {\r\n\r\n  @Autowired QuestionRepository questionRepository;\r\n\r\n  @Autowired DomainService domainService;\r\n\r\n  @Autowired TopicService topicService;\r\n\r\n @Override\r\n    public Page&lt;Question&gt; fetchByFilter(QuestionFilterRequest questionFilterRequest) {\r\n        Pageable paging = PageRequest.of(questionFilterRequest.page(), getSize(questionFilterRequest));\r\n        Specification&lt;Question&gt; questionsSpecification = getQuestionSpecification(questionFilterRequest);\r\n        return questionRepository.findAll(questionsSpecification, paging);\r\n    }\r\n\r\n    private static int getSize(QuestionFilterRequest questionFilterRequest) {\r\n        return questionFilterRequest.size() &lt;= 0 ? 5 : questionFilterRequest.size();\r\n    }\r\n\r\n    private Specification&lt;Question&gt; getQuestionSpecification(QuestionFilterRequest questionFilterRequest) {\r\n        return (root, query, cb) -&gt; {\r\n            Join&lt;Question, Domain&gt; domainJoin = root.join(Constant.DOMAIN);\r\n            Predicate domainPredicate = cb.equal(domainJoin.get(Constant.UUID), questionFilterRequest.domain());\r\n\r\n            Predicate optionalPredicate = getPredicate(questionFilterRequest, root, cb);\r\n\r\n            return cb.and(domainPredicate, optionalPredicate);\r\n        };\r\n    }\r\n\r\n    private Predicate getPredicate(QuestionFilterRequest questionFilterRequest, Root&lt;Question&gt; root, CriteriaBuilder cb) {\r\n        Predicate optionalPredicate = cb.conjunction();\r\n        if (StringUtils.hasLength(questionFilterRequest.topic())) {\r\n            Join&lt;Question, Topic&gt; topicJoin = root.join(Constant.TOPIC);\r\n            optionalPredicate = cb.and(optionalPredicate, cb.equal(topicJoin.get(Constant.UUID), questionFilterRequest.topic()));\r\n        }\r\n        if (StringUtils.hasLength(questionFilterRequest.search())) {\r\n            optionalPredicate = cb.and(optionalPredicate, cb.like(root.get(Constant.QUESTION), Constant.PERCENTAGE + questionFilterRequest.search() + Constant.PERCENTAGE));\r\n        }\r\n        if (StringUtils.hasLength(questionFilterRequest.complexity())) {\r\n            optionalPredicate = cb.and(optionalPredicate, cb.equal(root.get(Constant.COMPLEXITY), questionFilterRequest.complexity()));\r\n        }\r\n        optionalPredicate = questionFilterRequest.archive() ? cb.and(optionalPredicate, cb.equal(root.get(Constant.ARCHIVE), true)) :\r\n                cb.and(optionalPredicate, cb.equal(root.get(Constant.ARCHIVE), false));\r\n        return optionalPredicate;\r\n    }\r\n\r\n}\r\n```\r\n\r\n# i am writing junit5 test cases for this service class\r\n**Using Junit5 with mockito**\r\n\r\n\r\n**This is my JUnit service layer test cases**\r\n\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\n@AutoConfigureTestDatabase(replace = Replace.NONE)\r\nclass QuestionServiceImplTest {\r\n\r\n  @InjectMocks\r\n  QuestionServiceImpl questionService;\r\n  @Mock\r\n  DomainService domainService;\r\n  @Mock\r\n  TopicService topicService;\r\n  @Mock\r\n  QuestionRepository questionRepository;\r\n  private Topic topic;\r\n  private Domain domain;\r\n  private Question question;\r\n  private List&lt;QuestionMcq&gt; questionMcq;\r\n\r\n  @BeforeEach\r\n  void addTestRecord() {\r\n    domain = createDomain();\r\n    topic = createTopic();\r\n    questionMcq = createMcq();\r\n    question = createQuestion();\r\n  }\r\n\r\n  private List&lt;QuestionMcq&gt; createMcq() {\r\n    List&lt;QuestionMcq&gt; questionMcq = new ArrayList&lt;&gt;();\r\n    questionMcq.add(new QuestionMcq(1, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test1&quot;, true));\r\n    questionMcq.add(new QuestionMcq(2, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test2&quot;, false));\r\n    questionMcq.add(new QuestionMcq(3, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test3&quot;, false));\r\n    questionMcq.add(new QuestionMcq(4, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test4&quot;, false));\r\n    return questionMcq;\r\n  }\r\n\r\n\r\n  private Topic createTopic() {\r\n    Topic topic = new Topic();\r\n    topic.setId(1);\r\n    topic.setName(&quot;Java&quot;);\r\n    topic.setUid(&quot;35f66eaa-2fc7-4170-8470-feb83ddbf6b0&quot;);\r\n    topic.setDomain(domain);\r\n    return topic;\r\n  }\r\n\r\n  private Domain createDomain() {\r\n    Domain domain = new Domain();\r\n    domain.setId(1);\r\n    domain.setName(&quot;java&quot;);\r\n    domain.setUid(&quot;1234z637-c6c1-4dc3-9755-9f6ad974d70b&quot;);\r\n    return domain;\r\n  }\r\n\r\n  private Question createQuestion() {\r\n    Question question = new Question();\r\n    question.setId(1);\r\n    question.setUid(&quot;828dc55b-0089-4213-91e8-0406a00a53c3&quot;);\r\n    question.setQuestion(&quot;Java&quot;);\r\n    question.setType(QuestionTypeEnum.MCQ);\r\n    question.setMarks(1);\r\n    question.setDomain(domain);\r\n    question.setTopic(topic);\r\n    question.setTheoretical(true);\r\n    question.setQuestionMcq(questionMcq);\r\n    return question;\r\n  }\r\n@Test\r\n  void fetchByFilter() {\r\n    QuestionFilterRequest filterRequest = new QuestionFilterRequest(&quot;question&quot;,false,&quot;easy&quot;,&quot;topic-uuid&quot;,&quot;domain-uuid&quot;,0,5);\r\n    Question fisrtQuestion = new Question();\r\n    fisrtQuestion.setId(11);\r\n    fisrtQuestion.setUid(&quot;828dc55b-0089-4213-91e8-0406a00a53c3&quot;);\r\n    fisrtQuestion.setQuestion(&quot;Java&quot;);\r\n    fisrtQuestion.setType(QuestionTypeEnum.MCQ);\r\n    fisrtQuestion.setMarks(12);\r\n    fisrtQuestion.setDomain(domain);\r\n    fisrtQuestion.setTopic(topic);\r\n    fisrtQuestion.setTheoretical(true);\r\n    fisrtQuestion.setQuestionMcq(questionMcq);\r\n\r\n    Question secondQuestion = new Question();\r\n    secondQuestion.setId(12);\r\n    secondQuestion.setUid(&quot;828dc55b-0089-4213-91e8-0406a00a53c3&quot;);\r\n    secondQuestion.setQuestion(&quot;Java&quot;);\r\n    secondQuestion.setType(QuestionTypeEnum.MCQ);\r\n    secondQuestion.setMarks(13);\r\n    secondQuestion.setDomain(domain);\r\n    secondQuestion.setTopic(topic);\r\n    secondQuestion.setTheoretical(true);\r\n    secondQuestion.setQuestionMcq(questionMcq);\r\n\r\n\r\n    //Pageable paging = PageRequest.of(filterRequest.page(), questionService.getSize(filterRequest));\r\n    Specification&lt;Question&gt; specification = questionService.getQuestionSpecification(filterRequest);\r\n    Pageable pageable = PageRequest.of(filterRequest.page(), filterRequest.size());\r\n\r\n    List&lt;Question&gt; questions = Arrays.asList(fisrtQuestion,secondQuestion);\r\n    Page&lt;Question&gt; expectedPage = new PageImpl&lt;&gt;(questions, pageable, questions.size());\r\n    when(questionRepository.findAll(specification, pageable)).thenReturn(expectedPage);\r\n\r\n    // when\r\n    Page&lt;Question&gt; actualPage = questionService.fetchByFilter(filterRequest);\r\n\r\n    // then\r\n    assertEquals(expectedPage, actualPage);\r\n    Mockito.verify(questionRepository).findAll(specification, pageable);\r\n  }\r\n}\r\n```\r\n**when i run this test cases facing this error**\r\n\r\n\r\n```\r\nStrict stubbing argument mismatch. Please check:\r\n - this invocation of &#39;findAll&#39; method:\r\n    questionRepository.findAll(\r\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@43effd89,\r\n    Page request [number: 0, size 5, sort: UNSORTED]\r\n);\r\n    -&gt; at com.testiqo.exam.engine.service.impl.QuestionServiceImpl.fetchByFilter(QuestionServiceImpl.java:96)\r\n - has following stubbing(s) with different arguments:\r\n    1. questionRepository.findAll(\r\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@614aeccc,\r\n    Page request [number: 0, size 5, sort: UNSORTED]\r\n);\r\n      -&gt; at com.testiqo.exam.engine.service.impl.QuestionServiceImplTest.fetchByFilter(QuestionServiceImplTest.java:188)\r\nTypically, stubbing argument mismatch indicates user mistake when writing tests.\r\nMockito fails early so that you can debug potential problem easily.\r\nHowever, there are legit scenarios when this exception generates false negative signal:\r\n  - stubbing the same method multiple times using &#39;given().will()&#39; or &#39;when().then()&#39; API\r\n    Please use &#39;will().given()&#39; or &#39;doReturn().when()&#39; API for stubbing.\r\n  - stubbed method is intentionally invoked with different arguments by code under test\r\n    Please use default or &#39;silent&#39; JUnit Rule (equivalent of Strictness.LENIENT).\r\nFor more information see javadoc for PotentialStubbingProblem class.\r\norg.mockito.exceptions.misusing.PotentialStubbingProblem: \r\nStrict stubbing argument mismatch. Please check:\r\n - this invocation of &#39;findAll&#39; method:\r\n    questionRepository.findAll(\r\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@43effd89,\r\n    Page request [number: 0, size 5, sort: UNSORTED]\r\n);\r\n    -&gt; at com.testiqo.exam.engine.service.impl.QuestionServiceImpl.fetchByFilter(QuestionServiceImpl.java:96)\r\n - has following stubbing(s) with different arguments:\r\n    1. questionRepository.findAll(\r\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@614aeccc,\r\n    Page request [number: 0, size 5, sort: UNSORTED]\r\n);\r\n```\r\n**i dont know how solve this**\r\n","title":"spring boot JUnit test cases for Service layer","body":"<p><strong>i am working on spring boot gradle project</strong></p>\n<h1>this is my service layer class</h1>\n<h1>create one filter method to fatch list of records</h1>\n<pre><code>@Transactional\n@Service\npublic class QuestionServiceImpl implements QuestionService {\n\n  @Autowired QuestionRepository questionRepository;\n\n  @Autowired DomainService domainService;\n\n  @Autowired TopicService topicService;\n\n @Override\n    public Page&lt;Question&gt; fetchByFilter(QuestionFilterRequest questionFilterRequest) {\n        Pageable paging = PageRequest.of(questionFilterRequest.page(), getSize(questionFilterRequest));\n        Specification&lt;Question&gt; questionsSpecification = getQuestionSpecification(questionFilterRequest);\n        return questionRepository.findAll(questionsSpecification, paging);\n    }\n\n    private static int getSize(QuestionFilterRequest questionFilterRequest) {\n        return questionFilterRequest.size() &lt;= 0 ? 5 : questionFilterRequest.size();\n    }\n\n    private Specification&lt;Question&gt; getQuestionSpecification(QuestionFilterRequest questionFilterRequest) {\n        return (root, query, cb) -&gt; {\n            Join&lt;Question, Domain&gt; domainJoin = root.join(Constant.DOMAIN);\n            Predicate domainPredicate = cb.equal(domainJoin.get(Constant.UUID), questionFilterRequest.domain());\n\n            Predicate optionalPredicate = getPredicate(questionFilterRequest, root, cb);\n\n            return cb.and(domainPredicate, optionalPredicate);\n        };\n    }\n\n    private Predicate getPredicate(QuestionFilterRequest questionFilterRequest, Root&lt;Question&gt; root, CriteriaBuilder cb) {\n        Predicate optionalPredicate = cb.conjunction();\n        if (StringUtils.hasLength(questionFilterRequest.topic())) {\n            Join&lt;Question, Topic&gt; topicJoin = root.join(Constant.TOPIC);\n            optionalPredicate = cb.and(optionalPredicate, cb.equal(topicJoin.get(Constant.UUID), questionFilterRequest.topic()));\n        }\n        if (StringUtils.hasLength(questionFilterRequest.search())) {\n            optionalPredicate = cb.and(optionalPredicate, cb.like(root.get(Constant.QUESTION), Constant.PERCENTAGE + questionFilterRequest.search() + Constant.PERCENTAGE));\n        }\n        if (StringUtils.hasLength(questionFilterRequest.complexity())) {\n            optionalPredicate = cb.and(optionalPredicate, cb.equal(root.get(Constant.COMPLEXITY), questionFilterRequest.complexity()));\n        }\n        optionalPredicate = questionFilterRequest.archive() ? cb.and(optionalPredicate, cb.equal(root.get(Constant.ARCHIVE), true)) :\n                cb.and(optionalPredicate, cb.equal(root.get(Constant.ARCHIVE), false));\n        return optionalPredicate;\n    }\n\n}\n</code></pre>\n<h1>i am writing junit5 test cases for this service class</h1>\n<p><strong>Using Junit5 with mockito</strong></p>\n<p><strong>This is my JUnit service layer test cases</strong></p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n@AutoConfigureTestDatabase(replace = Replace.NONE)\nclass QuestionServiceImplTest {\n\n  @InjectMocks\n  QuestionServiceImpl questionService;\n  @Mock\n  DomainService domainService;\n  @Mock\n  TopicService topicService;\n  @Mock\n  QuestionRepository questionRepository;\n  private Topic topic;\n  private Domain domain;\n  private Question question;\n  private List&lt;QuestionMcq&gt; questionMcq;\n\n  @BeforeEach\n  void addTestRecord() {\n    domain = createDomain();\n    topic = createTopic();\n    questionMcq = createMcq();\n    question = createQuestion();\n  }\n\n  private List&lt;QuestionMcq&gt; createMcq() {\n    List&lt;QuestionMcq&gt; questionMcq = new ArrayList&lt;&gt;();\n    questionMcq.add(new QuestionMcq(1, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test1&quot;, true));\n    questionMcq.add(new QuestionMcq(2, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test2&quot;, false));\n    questionMcq.add(new QuestionMcq(3, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test3&quot;, false));\n    questionMcq.add(new QuestionMcq(4, &quot;6894c5d5-9c32-45eb-9664-d4bd7f085fa7&quot;, &quot;Test4&quot;, false));\n    return questionMcq;\n  }\n\n\n  private Topic createTopic() {\n    Topic topic = new Topic();\n    topic.setId(1);\n    topic.setName(&quot;Java&quot;);\n    topic.setUid(&quot;35f66eaa-2fc7-4170-8470-feb83ddbf6b0&quot;);\n    topic.setDomain(domain);\n    return topic;\n  }\n\n  private Domain createDomain() {\n    Domain domain = new Domain();\n    domain.setId(1);\n    domain.setName(&quot;java&quot;);\n    domain.setUid(&quot;1234z637-c6c1-4dc3-9755-9f6ad974d70b&quot;);\n    return domain;\n  }\n\n  private Question createQuestion() {\n    Question question = new Question();\n    question.setId(1);\n    question.setUid(&quot;828dc55b-0089-4213-91e8-0406a00a53c3&quot;);\n    question.setQuestion(&quot;Java&quot;);\n    question.setType(QuestionTypeEnum.MCQ);\n    question.setMarks(1);\n    question.setDomain(domain);\n    question.setTopic(topic);\n    question.setTheoretical(true);\n    question.setQuestionMcq(questionMcq);\n    return question;\n  }\n@Test\n  void fetchByFilter() {\n    QuestionFilterRequest filterRequest = new QuestionFilterRequest(&quot;question&quot;,false,&quot;easy&quot;,&quot;topic-uuid&quot;,&quot;domain-uuid&quot;,0,5);\n    Question fisrtQuestion = new Question();\n    fisrtQuestion.setId(11);\n    fisrtQuestion.setUid(&quot;828dc55b-0089-4213-91e8-0406a00a53c3&quot;);\n    fisrtQuestion.setQuestion(&quot;Java&quot;);\n    fisrtQuestion.setType(QuestionTypeEnum.MCQ);\n    fisrtQuestion.setMarks(12);\n    fisrtQuestion.setDomain(domain);\n    fisrtQuestion.setTopic(topic);\n    fisrtQuestion.setTheoretical(true);\n    fisrtQuestion.setQuestionMcq(questionMcq);\n\n    Question secondQuestion = new Question();\n    secondQuestion.setId(12);\n    secondQuestion.setUid(&quot;828dc55b-0089-4213-91e8-0406a00a53c3&quot;);\n    secondQuestion.setQuestion(&quot;Java&quot;);\n    secondQuestion.setType(QuestionTypeEnum.MCQ);\n    secondQuestion.setMarks(13);\n    secondQuestion.setDomain(domain);\n    secondQuestion.setTopic(topic);\n    secondQuestion.setTheoretical(true);\n    secondQuestion.setQuestionMcq(questionMcq);\n\n\n    //Pageable paging = PageRequest.of(filterRequest.page(), questionService.getSize(filterRequest));\n    Specification&lt;Question&gt; specification = questionService.getQuestionSpecification(filterRequest);\n    Pageable pageable = PageRequest.of(filterRequest.page(), filterRequest.size());\n\n    List&lt;Question&gt; questions = Arrays.asList(fisrtQuestion,secondQuestion);\n    Page&lt;Question&gt; expectedPage = new PageImpl&lt;&gt;(questions, pageable, questions.size());\n    when(questionRepository.findAll(specification, pageable)).thenReturn(expectedPage);\n\n    // when\n    Page&lt;Question&gt; actualPage = questionService.fetchByFilter(filterRequest);\n\n    // then\n    assertEquals(expectedPage, actualPage);\n    Mockito.verify(questionRepository).findAll(specification, pageable);\n  }\n}\n</code></pre>\n<p><strong>when i run this test cases facing this error</strong></p>\n<pre><code>Strict stubbing argument mismatch. Please check:\n - this invocation of 'findAll' method:\n    questionRepository.findAll(\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@43effd89,\n    Page request [number: 0, size 5, sort: UNSORTED]\n);\n    -&gt; at com.testiqo.exam.engine.service.impl.QuestionServiceImpl.fetchByFilter(QuestionServiceImpl.java:96)\n - has following stubbing(s) with different arguments:\n    1. questionRepository.findAll(\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@614aeccc,\n    Page request [number: 0, size 5, sort: UNSORTED]\n);\n      -&gt; at com.testiqo.exam.engine.service.impl.QuestionServiceImplTest.fetchByFilter(QuestionServiceImplTest.java:188)\nTypically, stubbing argument mismatch indicates user mistake when writing tests.\nMockito fails early so that you can debug potential problem easily.\nHowever, there are legit scenarios when this exception generates false negative signal:\n  - stubbing the same method multiple times using 'given().will()' or 'when().then()' API\n    Please use 'will().given()' or 'doReturn().when()' API for stubbing.\n  - stubbed method is intentionally invoked with different arguments by code under test\n    Please use default or 'silent' JUnit Rule (equivalent of Strictness.LENIENT).\nFor more information see javadoc for PotentialStubbingProblem class.\norg.mockito.exceptions.misusing.PotentialStubbingProblem: \nStrict stubbing argument mismatch. Please check:\n - this invocation of 'findAll' method:\n    questionRepository.findAll(\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@43effd89,\n    Page request [number: 0, size 5, sort: UNSORTED]\n);\n    -&gt; at com.testiqo.exam.engine.service.impl.QuestionServiceImpl.fetchByFilter(QuestionServiceImpl.java:96)\n - has following stubbing(s) with different arguments:\n    1. questionRepository.findAll(\n    com.testiqo.exam.engine.service.impl.QuestionServiceImpl$$Lambda$423/0x0000000800e633c8@614aeccc,\n    Page request [number: 0, size 5, sort: UNSORTED]\n);\n</code></pre>\n<p><strong>i dont know how solve this</strong></p>\n"},{"tags":["java","java.util.scanner","eof"],"comments":[{"owner":{"account_id":5995725,"reputation":4137,"user_id":4710425,"accept_rate":59,"display_name":"SatyaTNV"},"score":2,"creation_date":1450439613,"post_id":34355062,"comment_id":56451596,"body_markdown":"`if(s.hasNext()==true){` evaluates only once. Use `while`.","body":"<code>if(s.hasNext()==true){</code> evaluates only once. Use <code>while</code>."},{"owner":{"account_id":1995799,"reputation":28352,"user_id":1788806,"accept_rate":94,"display_name":"Willi Mentzel"},"score":0,"creation_date":1450440161,"post_id":34355062,"comment_id":56451911,"body_markdown":"why are you using recursion in the first place?","body":"why are you using recursion in the first place?"}],"answers":[{"tags":[],"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1456912818,"creation_date":1450439678,"answer_id":34355122,"question_id":34355062,"body_markdown":"Change\r\n\r\n    if (s.hasNext() == true) {\r\n        String ns = s.nextLine();\r\n        System.out.println(count + &quot; &quot; + ns);\r\n        count++;\r\n        System.out.print(count);\r\n        check(count);\r\n    }\r\n\r\nto:\r\n\r\n    while (s.hasNext()) {\r\n        String ns = s.nextLine();\r\n        System.out.println(count + &quot; &quot; + ns);\r\n        count++;\r\n        System.out.print(count);\r\n        check(count);\r\n    }\r\n\r\n`while` loops continues until the data exists, where as `if` checks for only once.","title":"How to use hasNext() from the Scanner class?","body":"<p>Change</p>\n\n<pre><code>if (s.hasNext() == true) {\n    String ns = s.nextLine();\n    System.out.println(count + \" \" + ns);\n    count++;\n    System.out.print(count);\n    check(count);\n}\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>while (s.hasNext()) {\n    String ns = s.nextLine();\n    System.out.println(count + \" \" + ns);\n    count++;\n    System.out.print(count);\n    check(count);\n}\n</code></pre>\n\n<p><code>while</code> loops continues until the data exists, where as <code>if</code> checks for only once.</p>\n"},{"tags":[],"owner":{"account_id":1995799,"reputation":28352,"user_id":1788806,"accept_rate":94,"display_name":"Willi Mentzel"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1486047438,"creation_date":1450440352,"answer_id":34355325,"question_id":34355062,"body_markdown":"Your code does not work because you create a new `Scanner` object in every recursive call.\r\nYou should not use recursion for this anyways, do it iteratively instead.    \r\n\r\n**Iterative version**\r\n\r\n    public class Solution {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            Scanner s = new Scanner(System.in);\r\n            int count = 1;\r\n\r\n            while(s.hasNext()) {\r\n                String ns = s.nextLine();\r\n                System.out.println(count + &quot; &quot; + ns);\r\n                count++;\r\n            }\r\n        }\r\n    }\r\n\r\n**Recursive version**\r\n\r\n    public class Solution {\r\n    \t\r\n    \tprivate Scanner s;\r\n        \r\n    \tpublic static void main(String[] args) {\r\n    \r\n            s = new Scanner(System.in); // initialize only once\r\n    \t\tcheck(1);\r\n        }\r\n    \t\r\n    \tpublic static void check(int count) {\r\n    \t\tif(s.hasNext()) {\r\n    \t\t\tString ns = s.nextLine();\r\n    \t\t\tSystem.out.println(count + &quot; &quot; + ns);\r\n    \t\t\tcheck(count + 1);\r\n    \t\t}\r\n    \t}\t\r\n    }","title":"How to use hasNext() from the Scanner class?","body":"<p>Your code does not work because you create a new <code>Scanner</code> object in every recursive call.\nYou should not use recursion for this anyways, do it iteratively instead.    </p>\n\n<p><strong>Iterative version</strong></p>\n\n<pre><code>public class Solution {\n\n    public static void main(String[] args) {\n\n        Scanner s = new Scanner(System.in);\n        int count = 1;\n\n        while(s.hasNext()) {\n            String ns = s.nextLine();\n            System.out.println(count + \" \" + ns);\n            count++;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Recursive version</strong></p>\n\n<pre><code>public class Solution {\n\n    private Scanner s;\n\n    public static void main(String[] args) {\n\n        s = new Scanner(System.in); // initialize only once\n        check(1);\n    }\n\n    public static void check(int count) {\n        if(s.hasNext()) {\n            String ns = s.nextLine();\n            System.out.println(count + \" \" + ns);\n            check(count + 1);\n        }\n    }   \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3974723,"reputation":2691,"user_id":3278176,"accept_rate":74,"display_name":"Ian2thedv"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1456910887,"creation_date":1450441457,"answer_id":34355647,"question_id":34355062,"body_markdown":"If using recursion is a requirement, you can use a helper function:\r\n\r\n    static void check(int count) {          \r\n        Scanner s = new Scanner(System.in);\r\n        check(count, s);\r\n    } \r\n    \r\n    static void check(int count, Scanner scanner) {\r\n        if(!scanner.hasNext()) {\r\n            return;\r\n        }\r\n        String ns = scanner.nextLine();\r\n        System.out.println(count + &quot; &quot; + ns);\r\n        check(++count, scanner);\r\n    }\r\n\r\nNotice how `new Scanner(System.in)` is only called once.","title":"How to use hasNext() from the Scanner class?","body":"<p>If using recursion is a requirement, you can use a helper function:</p>\n\n<pre><code>static void check(int count) {          \n    Scanner s = new Scanner(System.in);\n    check(count, s);\n} \n\nstatic void check(int count, Scanner scanner) {\n    if(!scanner.hasNext()) {\n        return;\n    }\n    String ns = scanner.nextLine();\n    System.out.println(count + \" \" + ns);\n    check(++count, scanner);\n}\n</code></pre>\n\n<p>Notice how <code>new Scanner(System.in)</code> is only called once.</p>\n"},{"tags":[],"owner":{"account_id":3204517,"reputation":4873,"user_id":2924323,"accept_rate":96,"display_name":"Ramesh-X"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1450445764,"creation_date":1450445764,"answer_id":34356956,"question_id":34355062,"body_markdown":"`Scanner` is kind of a `BufferedReader` (I&#39;m not telling about inheritance or something. I&#39;m telling they both have buffers. `Scanner` has just a small one). So after you enter text in the Console, those are `read()` from `System.in` and stored in the buffer inside the `Scanner`.\r\n\r\n    public static void main(String[] args) {          \r\n        Scanner s1 = new Scanner(System.in);\r\n        s1.hasNext();\r\n        Scanner s2 = new Scanner(System.in);\r\n        while(true){\r\n            System.out.println(&quot;Read line:: &quot; + s2.nextLine());\r\n        }\r\n    }\r\n\r\nUse the following input to the `Scanner`:\r\n\r\n&gt;line 1&lt;br&gt;\r\nline 2&lt;br&gt;\r\nline 3&lt;br&gt;\r\nline 4&lt;br&gt;\r\n\r\nYou will get the output:\r\n\r\n&gt;Read line:: e 1&lt;br&gt;\r\nRead line:: line 2&lt;br&gt;\r\nRead line:: line 3&lt;br&gt;\r\nRead line:: line 4&lt;br&gt;\r\n\r\nI think you might know the reason to this output. Some characters of the first line are in the `Scanner s1`. Therefore **don&#39;t** create 2 `Scanner`s to take input from same `Stream`.\r\n\r\nYou can change your code as follows to get required output.\r\n\r\n    private static Scanner s;\r\n\r\n    public static void main(String[] args) {\r\n        s = new Scanner(System.in);\r\n        check(1);  // call check method\r\n    }\r\n\r\n    static void check(int count) {\r\n        if (s.hasNextLine()) {\r\n            String ns = s.nextLine();\r\n            System.out.println(count + &quot; &quot; + ns);\r\n            count++;\r\n            check(count);\r\n        }\r\n    }\r\n\r\nYou can use `s.hasNextLine()` instead of `s.hasNext()` as you are reading line by line.\r\n\r\nNo need to use `s.hasNextLine()==true` as that statement will be `true` if and only if `s.hasNextLine()` is `true`.\r\n\r\nYou can give `EOF` character to the console using `Ctrl+Z` in Windows system and `Ctrl+D` in Unix. As I know, you can&#39;t send `EOF` character using the output window of NetBeans.","title":"How to use hasNext() from the Scanner class?","body":"<p><code>Scanner</code> is kind of a <code>BufferedReader</code> (I'm not telling about inheritance or something. I'm telling they both have buffers. <code>Scanner</code> has just a small one). So after you enter text in the Console, those are <code>read()</code> from <code>System.in</code> and stored in the buffer inside the <code>Scanner</code>.</p>\n\n<pre><code>public static void main(String[] args) {          \n    Scanner s1 = new Scanner(System.in);\n    s1.hasNext();\n    Scanner s2 = new Scanner(System.in);\n    while(true){\n        System.out.println(\"Read line:: \" + s2.nextLine());\n    }\n}\n</code></pre>\n\n<p>Use the following input to the <code>Scanner</code>:</p>\n\n<blockquote>\n  <p>line 1<br>\n  line 2<br>\n  line 3<br>\n  line 4<br></p>\n</blockquote>\n\n<p>You will get the output:</p>\n\n<blockquote>\n  <p>Read line:: e 1<br>\n  Read line:: line 2<br>\n  Read line:: line 3<br>\n  Read line:: line 4<br></p>\n</blockquote>\n\n<p>I think you might know the reason to this output. Some characters of the first line are in the <code>Scanner s1</code>. Therefore <strong>don't</strong> create 2 <code>Scanner</code>s to take input from same <code>Stream</code>.</p>\n\n<p>You can change your code as follows to get required output.</p>\n\n<pre><code>private static Scanner s;\n\npublic static void main(String[] args) {\n    s = new Scanner(System.in);\n    check(1);  // call check method\n}\n\nstatic void check(int count) {\n    if (s.hasNextLine()) {\n        String ns = s.nextLine();\n        System.out.println(count + \" \" + ns);\n        count++;\n        check(count);\n    }\n}\n</code></pre>\n\n<p>You can use <code>s.hasNextLine()</code> instead of <code>s.hasNext()</code> as you are reading line by line.</p>\n\n<p>No need to use <code>s.hasNextLine()==true</code> as that statement will be <code>true</code> if and only if <code>s.hasNextLine()</code> is <code>true</code>.</p>\n\n<p>You can give <code>EOF</code> character to the console using <code>Ctrl+Z</code> in Windows system and <code>Ctrl+D</code> in Unix. As I know, you can't send <code>EOF</code> character using the output window of NetBeans.</p>\n"},{"tags":[],"owner":{"account_id":4254201,"reputation":11,"user_id":3480296,"display_name":"user3480296"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1470287212,"creation_date":1470287212,"answer_id":38758855,"question_id":34355062,"body_markdown":"\n    public static void main(String[] args) {\n        \n        List&lt;String&gt; eol = new ArrayList&lt;String&gt;();\n        Scanner in=new Scanner(System.in);\n        int t=1;\n        while(in.hasNext()){\n            \n            eol.add(in.nextLine());\n        }\n        \n        for (String i:eol){\n            \n            System.out.println(t+&quot; &quot;+i);\n            t++;\n        }\n        \n    }","title":"How to use hasNext() from the Scanner class?","body":"<pre><code>public static void main(String[] args) {\n\n    List&lt;String&gt; eol = new ArrayList&lt;String&gt;();\n    Scanner in=new Scanner(System.in);\n    int t=1;\n    while(in.hasNext()){\n\n        eol.add(in.nextLine());\n    }\n\n    for (String i:eol){\n\n        System.out.println(t+\" \"+i);\n        t++;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9343577,"reputation":1,"user_id":6935460,"display_name":"myer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475818564,"creation_date":1475818564,"answer_id":39910129,"question_id":34355062,"body_markdown":"    public static void main(String[] args) {\r\n        Scanner scan = new Scanner(System.in);\r\n        int count = 1;\r\n        while(scan.hasNext()){\r\n            System.out.println(count++ + &quot; &quot; + scan.nextLine());            \r\n        }\r\n    }\r\n","title":"How to use hasNext() from the Scanner class?","body":"<pre><code>public static void main(String[] args) {\n    Scanner scan = new Scanner(System.in);\n    int count = 1;\n    while(scan.hasNext()){\n        System.out.println(count++ + \" \" + scan.nextLine());            \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8605804,"reputation":1,"user_id":6445989,"display_name":"JeyaRama Balan Rajagani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477530779,"creation_date":1477507639,"answer_id":40269978,"question_id":34355062,"body_markdown":"Here is the error free program.\r\n\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Solution {\r\n    \r\n        public static void main(String[] args) {\r\n            Scanner scan = new Scanner(System.in);\r\n            int count = 1;\r\n            while(scan.hasNext()) {\r\n                String s = scan.nextLine();\r\n                System.out.println(count + &quot; &quot; + s);\r\n                count++;\r\n            }\r\n        }\r\n    }","title":"How to use hasNext() from the Scanner class?","body":"<p>Here is the error free program.</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class Solution {\n\n    public static void main(String[] args) {\n        Scanner scan = new Scanner(System.in);\n        int count = 1;\n        while(scan.hasNext()) {\n            String s = scan.nextLine();\n            System.out.println(count + \" \" + s);\n            count++;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":244938,"reputation":5802,"user_id":518116,"accept_rate":84,"display_name":"worked"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1493816402,"creation_date":1493816402,"answer_id":43760803,"question_id":34355062,"body_markdown":"    Scanner scanner = new Scanner(System.in);\r\n    int i = 1;\r\n    while(scanner.hasNext()) {\r\n      System.out.println(i + &quot; &quot; + scanner.nextLine());\r\n      i++;\r\n    }","title":"How to use hasNext() from the Scanner class?","body":"<pre><code>Scanner scanner = new Scanner(System.in);\nint i = 1;\nwhile(scanner.hasNext()) {\n  System.out.println(i + \" \" + scanner.nextLine());\n  i++;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11598815,"reputation":1,"user_id":8496675,"display_name":"divya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503342437,"creation_date":1503340338,"answer_id":45803584,"question_id":34355062,"body_markdown":"Use while instead of if,but recursive version is better.Here is iterative version:\r\n\r\n    import java.io.*;\r\n    import java.util.*;\r\n    \r\n    public class Solution {\r\n    \r\n        public static void main(String[] args) {\r\n            /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */\r\n            Scanner sc=new Scanner(System.in);\r\n            {\r\n                int i=0;\r\n                \r\n              while(sc.hasNext()==true)\r\n                {\r\n                    i=i+1;\r\n                     String s=sc.nextLine();\r\n                    System.out.println(i+&quot; &quot;+s);\r\n                    \r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"How to use hasNext() from the Scanner class?","body":"<p>Use while instead of if,but recursive version is better.Here is iterative version:</p>\n\n<pre><code>import java.io.*;\nimport java.util.*;\n\npublic class Solution {\n\n    public static void main(String[] args) {\n        /* Enter your code here. Read input from STDIN. Print output to STDOUT. Your class should be named Solution. */\n        Scanner sc=new Scanner(System.in);\n        {\n            int i=0;\n\n          while(sc.hasNext()==true)\n            {\n                i=i+1;\n                 String s=sc.nextLine();\n                System.out.println(i+\" \"+s);\n\n            };\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11205809,"reputation":1433,"user_id":8221470,"display_name":"Hetal Rachh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555218198,"creation_date":1555218198,"answer_id":55672107,"question_id":34355062,"body_markdown":"`java.util.Scanner.hasNext()` basically helps you to read the input. This method returns true if this Scanner has another token of any type in its input. Returns false otherwise.\r\n Check below code snippet,\r\n\r\n     while(sc.hasNext()) {\r\n          System.out.println(i + &quot; &quot; + sc.nextLine());\r\n          i++;\r\n     }\r\n\r\nYou can find complete code at below link,\r\n\r\nhttps://github.com/hetalrachh/HackerRank/blob/master/Practice/Java/Introduction/EndOfFile.java\r\n\r\n\r\n\r\n","title":"How to use hasNext() from the Scanner class?","body":"<p><code>java.util.Scanner.hasNext()</code> basically helps you to read the input. This method returns true if this Scanner has another token of any type in its input. Returns false otherwise.\n Check below code snippet,</p>\n\n<pre><code> while(sc.hasNext()) {\n      System.out.println(i + \" \" + sc.nextLine());\n      i++;\n }\n</code></pre>\n\n<p>You can find complete code at below link,</p>\n\n<p><a href=\"https://github.com/hetalrachh/HackerRank/blob/master/Practice/Java/Introduction/EndOfFile.java\" rel=\"nofollow noreferrer\">https://github.com/hetalrachh/HackerRank/blob/master/Practice/Java/Introduction/EndOfFile.java</a></p>\n"},{"tags":[],"owner":{"account_id":17782560,"reputation":1,"user_id":12913449,"display_name":"Chandru"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582015195,"creation_date":1582015195,"answer_id":60276818,"question_id":34355062,"body_markdown":"you can try like this to get desired result:\r\n\r\npublic class EOF {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner scan = new Scanner(System.in);\r\n\t\tfor(int i =1;scan.hasNext();i++) {\r\n\t\t\tString line = scan.nextLine();\r\n\t\t\tSystem.out.println(i + &quot; &quot; + line);\r\n\t\t}\r\n\t\tscan.close();\r\n\t}\r\n\r\n}","title":"How to use hasNext() from the Scanner class?","body":"<p>you can try like this to get desired result:</p>\n\n<p>public class EOF {</p>\n\n<pre><code>public static void main(String[] args) {\n    Scanner scan = new Scanner(System.in);\n    for(int i =1;scan.hasNext();i++) {\n        String line = scan.nextLine();\n        System.out.println(i + \" \" + line);\n    }\n    scan.close();\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":20610413,"reputation":47,"user_id":15129729,"display_name":"Arya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1613880256,"creation_date":1612264893,"answer_id":66008706,"question_id":34355062,"body_markdown":"\r\n\r\n    public class Solution {\r\n    \r\n        \r\n        public static void main(String[] args) {\r\n        Scanner scan = new Scanner(System.in);\r\n        for(int i=1; scan.hasNext() ; \r\n        System.out.println(i++ +&quot; &quot;+scan.nextLine()));\r\n            \r\n          \r\n        }\r\n    }\r\n\r\n","title":"How to use hasNext() from the Scanner class?","body":"<pre><code>public class Solution {\n\n    \n    public static void main(String[] args) {\n    Scanner scan = new Scanner(System.in);\n    for(int i=1; scan.hasNext() ; \n    System.out.println(i++ +&quot; &quot;+scan.nextLine()));\n        \n      \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10517283,"reputation":998,"user_id":7750999,"display_name":"Caffeine Coder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683293591,"creation_date":1683293591,"answer_id":76182774,"question_id":34355062,"body_markdown":"One of the approaches - \r\n\r\n      public static void main(String[] args) {\r\n        Scanner inputScanner = new Scanner(System.in);\r\n        List&lt;String&gt; inputLines = new ArrayList();\r\n\r\n        int i=1;\r\n        while(inputScanner.hasNext()) {\r\n            inputLines.add(i+&quot; &quot;+inputScanner.nextLine());\r\n            i++;\r\n        }\r\n\r\n        inputLines.stream().forEach(k-&gt;System.out.println(k));\r\n    }","title":"How to use hasNext() from the Scanner class?","body":"<p>One of the approaches -</p>\n<pre><code>  public static void main(String[] args) {\n    Scanner inputScanner = new Scanner(System.in);\n    List&lt;String&gt; inputLines = new ArrayList();\n\n    int i=1;\n    while(inputScanner.hasNext()) {\n        inputLines.add(i+&quot; &quot;+inputScanner.nextLine());\n        i++;\n    }\n\n    inputLines.stream().forEach(k-&gt;System.out.println(k));\n}\n</code></pre>\n"}],"owner":{"account_id":6201106,"reputation":117,"user_id":4830870,"accept_rate":80,"display_name":"Harshit Juneja"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47105,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":34355325,"answer_count":13,"score":7,"last_activity_date":1683293591,"creation_date":1450439489,"question_id":34355062,"body_markdown":"**Input Format**\r\n\r\nRead some unknown n lines of input from `stdin(System.in)` until you reach EOF; each line of input contains a non-empty String.\r\n\r\n**Output Format**\r\n\r\nFor each line, print the line number, followed by a single space, and then the line content received as input:\r\n\r\n**Sample Output**\r\n\r\n    Hello world\r\n    I am a file\r\n    Read me until end-of-file.  \r\n\r\n\r\nHere is my solution. The problem being I am not able to proceed till EOF.\r\nBut the output is just:\r\n    \r\n    Hello world\r\n\r\n\r\nHere is my code:\r\n\r\n    public class Solution {\r\n    \r\n        public static void main(String[] args) {\r\n            check(1);  // call check method\r\n        }\r\n        \r\n        static void check(int count) {          \r\n            Scanner s = new Scanner(System.in);\r\n            if(s.hasNext() == true) {\r\n                String ns = s.nextLine();\r\n                System.out.println(count + &quot; &quot; + ns);\r\n                count++;\r\n                check(count);\r\n            }\r\n        } \r\n    }","title":"How to use hasNext() from the Scanner class?","body":"<p><strong>Input Format</strong></p>\n\n<p>Read some unknown n lines of input from <code>stdin(System.in)</code> until you reach EOF; each line of input contains a non-empty String.</p>\n\n<p><strong>Output Format</strong></p>\n\n<p>For each line, print the line number, followed by a single space, and then the line content received as input:</p>\n\n<p><strong>Sample Output</strong></p>\n\n<pre><code>Hello world\nI am a file\nRead me until end-of-file.  \n</code></pre>\n\n<p>Here is my solution. The problem being I am not able to proceed till EOF.\nBut the output is just:</p>\n\n<pre><code>Hello world\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>public class Solution {\n\n    public static void main(String[] args) {\n        check(1);  // call check method\n    }\n\n    static void check(int count) {          \n        Scanner s = new Scanner(System.in);\n        if(s.hasNext() == true) {\n            String ns = s.nextLine();\n            System.out.println(count + \" \" + ns);\n            count++;\n            check(count);\n        }\n    } \n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","request","get-mapping"],"answers":[{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683284984,"creation_date":1683284984,"answer_id":76181537,"question_id":76181329,"body_markdown":"Ok, so here is what is going on,\r\n\r\n    @GetMapping(&quot;/read&quot;)\r\n    public String showOrderDetail(Model model, HttpServletRequest request,\r\n            Principal principal) {\r\n        String idStr = request.getParameter(&quot;id&quot;);\r\n        var corder = new Corder();\r\n        corder.setId(35);\r\n        if (idStr != null) {\r\n            Integer id = Integer.parseInt(idStr);\r\n            corder = this.getOrder(id, principal);  &lt;------------------\r\n        }\r\n        model.addAttribute(&quot;corder&quot;, corder);\r\n        return &quot;orderDetails&quot;;\r\n    }\r\n    \r\n    @PostAuthorize(&quot;hasRole(&#39;ADMIN&#39;) || &quot; +\r\n        &quot;authentication.name == returnObject.username&quot;)\r\n    private Corder getOrder(Integer id, Principal principal) {\r\n     ....\r\n    }\r\n\r\nYou invoke the method `getOrder` internally from the same bean. This means that the call would not be able to take into consideration the annotation `@PostAuthorize` when invoked internally, since the call will be made by the actual class that this method belongs to and not by the spring proxy class which will contain the actual code for the functionality of `PostAuthorize`.\r\n\r\nIt should have worked if that method (`getOrder`) was in some other class which was registered as a spring bean.\r\n\r\nYou can see [here][1] a very similar and known issue with `@Transactional`.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3423972/spring-transaction-method-call-by-the-method-within-the-same-class-does-not-wo","title":"PostAuthorize not working on method called from request handler","body":"<p>Ok, so here is what is going on,</p>\n<pre><code>@GetMapping(&quot;/read&quot;)\npublic String showOrderDetail(Model model, HttpServletRequest request,\n        Principal principal) {\n    String idStr = request.getParameter(&quot;id&quot;);\n    var corder = new Corder();\n    corder.setId(35);\n    if (idStr != null) {\n        Integer id = Integer.parseInt(idStr);\n        corder = this.getOrder(id, principal);  &lt;------------------\n    }\n    model.addAttribute(&quot;corder&quot;, corder);\n    return &quot;orderDetails&quot;;\n}\n\n@PostAuthorize(&quot;hasRole('ADMIN') || &quot; +\n    &quot;authentication.name == returnObject.username&quot;)\nprivate Corder getOrder(Integer id, Principal principal) {\n ....\n}\n</code></pre>\n<p>You invoke the method <code>getOrder</code> internally from the same bean. This means that the call would not be able to take into consideration the annotation <code>@PostAuthorize</code> when invoked internally, since the call will be made by the actual class that this method belongs to and not by the spring proxy class which will contain the actual code for the functionality of <code>PostAuthorize</code>.</p>\n<p>It should have worked if that method (<code>getOrder</code>) was in some other class which was registered as a spring bean.</p>\n<p>You can see <a href=\"https://stackoverflow.com/questions/3423972/spring-transaction-method-call-by-the-method-within-the-same-class-does-not-wo\">here</a> a very similar and known issue with <code>@Transactional</code>.</p>\n"}],"owner":{"account_id":4716379,"reputation":1255,"user_id":3901138,"accept_rate":41,"display_name":"Park JongBum"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76181537,"answer_count":1,"score":1,"last_activity_date":1683293424,"creation_date":1683283321,"question_id":76181329,"body_markdown":"I thought PostAuthorize decorated method should return an object having an attribute that is a part of authorization(e.g, &#39;username&#39;). I put the annotation on getOrder() method show below. Why the annotation is not functioning?\r\n\r\n    @GetMapping(&quot;/read&quot;)\r\n    public String showOrderDetail(Model model, HttpServletRequest request,\r\n    \t\tPrincipal principal) {\r\n    \tString idStr = request.getParameter(&quot;id&quot;);\r\n    \tvar corder = new Corder();\r\n    \tcorder.setId(35);\r\n    \tif (idStr != null) {\r\n    \t\tInteger id = Integer.parseInt(idStr);\r\n    \t\tcorder = this.getOrder(id, principal);\r\n    \t}\r\n    \tmodel.addAttribute(&quot;corder&quot;, corder);\r\n    \treturn &quot;orderDetails&quot;;\r\n    }\r\n    \r\n    @PostAuthorize(&quot;hasRole(&#39;ADMIN&#39;) || &quot; +\r\n        &quot;authentication.name == returnObject.username&quot;)\r\n    private Corder getOrder(Integer id, Principal principal) {\r\n    \tCorder corder = repository.findById(id).orElseThrow();\r\n    \tUser user = userRepository.findById(corder.getUserId()).get();\r\n    \r\n    \tcorder.setUsername(user.getUsername());\r\n    \treturn corder;\r\n    }","title":"PostAuthorize not working on method called from request handler","body":"<p>I thought PostAuthorize decorated method should return an object having an attribute that is a part of authorization(e.g, 'username'). I put the annotation on getOrder() method show below. Why the annotation is not functioning?</p>\n<pre><code>@GetMapping(&quot;/read&quot;)\npublic String showOrderDetail(Model model, HttpServletRequest request,\n        Principal principal) {\n    String idStr = request.getParameter(&quot;id&quot;);\n    var corder = new Corder();\n    corder.setId(35);\n    if (idStr != null) {\n        Integer id = Integer.parseInt(idStr);\n        corder = this.getOrder(id, principal);\n    }\n    model.addAttribute(&quot;corder&quot;, corder);\n    return &quot;orderDetails&quot;;\n}\n\n@PostAuthorize(&quot;hasRole('ADMIN') || &quot; +\n    &quot;authentication.name == returnObject.username&quot;)\nprivate Corder getOrder(Integer id, Principal principal) {\n    Corder corder = repository.findById(id).orElseThrow();\n    User user = userRepository.findById(corder.getUserId()).get();\n\n    corder.setUsername(user.getUsername());\n    return corder;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","hql"],"comments":[{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1683283960,"post_id":76181369,"comment_id":134346653,"body_markdown":"Your UI model should track either the date, or the number of days previously, and communicate either the date, or the number of days ago you want to retrieve. So if you display records from 2023-05-04, the previous button will send a request for documents of 2023-05-03, etc, etc.","body":"Your UI model should track either the date, or the number of days previously, and communicate either the date, or the number of days ago you want to retrieve. So if you display records from 2023-05-04, the previous button will send a request for documents of 2023-05-03, etc, etc."},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1683284177,"post_id":76181369,"comment_id":134346690,"body_markdown":"As an aside, your query currently retrieves documents from the current date, always. Also, stop using `java.util.Date` and switch to using things like `java.time.LocalDate`.","body":"As an aside, your query currently retrieves documents from the current date, always. Also, stop using <code>java.util.Date</code> and switch to using things like <code>java.time.LocalDate</code>."},{"owner":{"account_id":27249376,"reputation":11,"user_id":20774108,"display_name":"treumiton"},"score":0,"creation_date":1683284308,"post_id":76181369,"comment_id":134346708,"body_markdown":"OK, but my method get only documents from current day. Do you know what should I do to display documents from 04.05.2023, then 03.05.2023 etc...?","body":"OK, but my method get only documents from current day. Do you know what should I do to display documents from 04.05.2023, then 03.05.2023 etc...?"},{"owner":{"account_id":27249376,"reputation":11,"user_id":20774108,"display_name":"treumiton"},"score":0,"creation_date":1683284472,"post_id":76181369,"comment_id":134346749,"body_markdown":"When I change the query to:\n```\n&quot;from Documents where uztId = :uztId and dateOfIssue = &quot; + previousDateStr;\n```\nthen I have an error: [ERROR] ErrorTracker - line 1:103: unexpected token: .2023","body":"When I change the query to: ``` &quot;from Documents where uztId = :uztId and dateOfIssue = &quot; + previousDateStr; ``` then I have an error: [ERROR] ErrorTracker - line 1:103: unexpected token: .2023"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1683289075,"post_id":76181369,"comment_id":134347699,"body_markdown":"That&#39;s possibly a problem with the date format. You replaced the `current_date()` database function call by a date with a custom (German?) format. That may cause the *unexpected token: .2023*. You could run `current_date()` in the database and output it, then have a look at the format. My first try without would be an ISO date: `2023-05-04`, you can calculate it by `previousDateStr = java.time.LocalDate.now().minusDays(1).format(DateTimeFormatter.ISO_LOCAL_DATE);`","body":"That&#39;s possibly a problem with the date format. You replaced the <code>current_date()</code> database function call by a date with a custom (German?) format. That may cause the <i>unexpected token: .2023</i>. You could run <code>current_date()</code> in the database and output it, then have a look at the format. My first try without would be an ISO date: <code>2023-05-04</code>, you can calculate it by <code>previousDateStr = java.time.LocalDate.now().minusDays(1).format(DateTimeFormat&zwnj;&#8203;ter.ISO_LOCAL_DATE);</code>"},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1683301756,"post_id":76181369,"comment_id":134350996,"body_markdown":"You shouldn&#39;t concatenate values into a query string, you should use parameters for that.","body":"You shouldn&#39;t concatenate values into a query string, you should use parameters for that."}],"answers":[{"tags":[],"owner":{"account_id":27249376,"reputation":11,"user_id":20774108,"display_name":"treumiton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683293228,"creation_date":1683293228,"answer_id":76182716,"question_id":76181369,"body_markdown":"I was resolve my problem.\r\n\r\nHave a nice day.\r\n\r\nController:\r\n```\r\n@RequestMapping(value = &quot;/getPrevDay/{uztId}/{daysOffset}&quot;, method = RequestMethod.GET)\r\n@ResponseBody\r\n@ResponseStatus(HttpStatus.OK)\r\n@ApiOperation(value = &quot;Każdy klik wyświetla dokumenty z pobranego dnia - 1&quot;)\r\n@ApiResponses({\r\n\t@ApiResponse(code = 200, message = &quot;Success&quot;, response = ResponseApi.class)\r\n})\r\npublic List&lt;Documents&gt; getPrevDay(@PathVariable(&quot;uztId&quot;) Integer uztId,@PathVariable Integer daysOffset) {\r\n\treturn documentsDao.getPrevDay(uztId, daysOffset);\r\n}\r\n```\r\n\r\nDAO:\r\n```\r\npublic List&lt;Documents&gt; getPrevDay(Integer uztId, Integer daysOffset) {\r\n\r\n\tZoneId defaultZoneId = ZoneId.systemDefault();\r\n\tLocalDate myVariable= LocalDate.now();\r\n\tmyVariable= myVariable.plusDays(daysOffset);\r\n\tDate prevDay = Date.from(myVariable.atStartOfDay(defaultZoneId).toInstant());\r\n\r\n\tList&lt;Documents&gt; dokumentsPrevious = (List&lt;Documents&gt;) getCurrentSession()\r\n\t\t.createQuery(&quot;from Documents where uztId = :uztId and dataOfIssue = :dateOfIssue order by dateOfIssue DESC&quot;)\r\n\t\t.setParameter(&quot;uztId&quot;, uztId)\r\n\t\t.setParameter(&quot;dateOfIssue &quot;, prevDay)\r\n\t\t.getResultList();\r\n\r\n\treturn dokumentsPrevious;\r\n}\r\n```","title":"How to get data from database one day previous on click","body":"<p>I was resolve my problem.</p>\n<p>Have a nice day.</p>\n<p>Controller:</p>\n<pre><code>@RequestMapping(value = &quot;/getPrevDay/{uztId}/{daysOffset}&quot;, method = RequestMethod.GET)\n@ResponseBody\n@ResponseStatus(HttpStatus.OK)\n@ApiOperation(value = &quot;Każdy klik wyświetla dokumenty z pobranego dnia - 1&quot;)\n@ApiResponses({\n    @ApiResponse(code = 200, message = &quot;Success&quot;, response = ResponseApi.class)\n})\npublic List&lt;Documents&gt; getPrevDay(@PathVariable(&quot;uztId&quot;) Integer uztId,@PathVariable Integer daysOffset) {\n    return documentsDao.getPrevDay(uztId, daysOffset);\n}\n</code></pre>\n<p>DAO:</p>\n<pre><code>public List&lt;Documents&gt; getPrevDay(Integer uztId, Integer daysOffset) {\n\n    ZoneId defaultZoneId = ZoneId.systemDefault();\n    LocalDate myVariable= LocalDate.now();\n    myVariable= myVariable.plusDays(daysOffset);\n    Date prevDay = Date.from(myVariable.atStartOfDay(defaultZoneId).toInstant());\n\n    List&lt;Documents&gt; dokumentsPrevious = (List&lt;Documents&gt;) getCurrentSession()\n        .createQuery(&quot;from Documents where uztId = :uztId and dataOfIssue = :dateOfIssue order by dateOfIssue DESC&quot;)\n        .setParameter(&quot;uztId&quot;, uztId)\n        .setParameter(&quot;dateOfIssue &quot;, prevDay)\n        .getResultList();\n\n    return dokumentsPrevious;\n}\n</code></pre>\n"}],"owner":{"account_id":27249376,"reputation":11,"user_id":20774108,"display_name":"treumiton"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683293228,"creation_date":1683283586,"question_id":76181369,"body_markdown":"I&#39;m building my app. I want to get documents from the DB when I clicked button &#39;previous&#39;. Then the documents from the previous day should be displayed (e.g. 11 documents). When I click the button again, documents from two days ago should be displayed (e.g. 5 documents). And when I click the button again, documents from three days ago should be displayed (e.g. 8 documents), etc. etc.\r\n\r\nI have a method getting documents from the current day, but I don&#39;t know how to make each click move the date back one day and get documents.\r\n\r\nuztId is user ID from DB.\r\n\r\ndateOfIssue is Data type.\r\n\r\nMy local date is &quot;dd.MM.yyyy&quot;\r\n\r\nController:\r\n```java\r\n@RequestMapping(value = &quot;/getDocsPrevDay/{uztId}&quot;, method = RequestMethod.GET)\r\n@ResponseBody\r\n@ResponseStatus(HttpStatus.OK)\r\n@ApiOperation(value = &quot;Get documents previous day and again&quot;)\r\n@ApiResponses({\r\n\t\t@ApiResponse(code = 200, message = &quot;Success&quot;, response = ResponseApi.class)\r\n})\r\npublic List&lt;Documents&gt; getPrevDay(@PathVariable(&quot;uztId&quot;) Integer uztId) {\r\n\treturn documentsDao.getPrevDay(uztId);\r\n}\r\n```\r\n\r\nDAO:\r\n```java\r\nprivate static final long ONE_DAY_MILLI_SECONDS = 24 * 60 * 60 * 1000;\r\nprivate static final String DATE_FORMAT = &quot;dd.MM.yyyy&quot;;\r\n\r\npublic List&lt;Documents&gt; getPrevDay(Integer uztId) {\r\n\tjava.util.Date currentDate = new java.util.Date();\r\n\tSimpleDateFormat dateFormat = new SimpleDateFormat(DATE_FORMAT);\r\n\r\n\tlong previousDayMilliSeconds = currentDate.getTime() - ONE_DAY_MILLI_SECONDS;\r\n\tjava.util.Date previousDate = new Date(previousDayMilliSeconds);\r\n\tString previousDateStr = dateFormat.format(previousDate);\r\n\r\n\tSystem.out.println(&quot;current date: &quot; + dateFormat.format(currentDate));\r\n\tSystem.out.println(&quot;previous: &quot; + previousDateStr);\r\n\r\n\tList&lt;Documents&gt; dokumentsPrevious = (List&lt;Documents&gt;) getCurrentSession()\r\n\t\t\t.createQuery(&quot;from Documents where uztId = :uztId and dateOfIssue = current_date()&quot;)\r\n\t\t\t.setParameter(&quot;uztId&quot;, uztId)\r\n\t\t\t.getResultList();\r\n\r\n\treturn dokumentsPrevious;\r\n}\r\n```","title":"How to get data from database one day previous on click","body":"<p>I'm building my app. I want to get documents from the DB when I clicked button 'previous'. Then the documents from the previous day should be displayed (e.g. 11 documents). When I click the button again, documents from two days ago should be displayed (e.g. 5 documents). And when I click the button again, documents from three days ago should be displayed (e.g. 8 documents), etc. etc.</p>\n<p>I have a method getting documents from the current day, but I don't know how to make each click move the date back one day and get documents.</p>\n<p>uztId is user ID from DB.</p>\n<p>dateOfIssue is Data type.</p>\n<p>My local date is &quot;dd.MM.yyyy&quot;</p>\n<p>Controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value = &quot;/getDocsPrevDay/{uztId}&quot;, method = RequestMethod.GET)\n@ResponseBody\n@ResponseStatus(HttpStatus.OK)\n@ApiOperation(value = &quot;Get documents previous day and again&quot;)\n@ApiResponses({\n        @ApiResponse(code = 200, message = &quot;Success&quot;, response = ResponseApi.class)\n})\npublic List&lt;Documents&gt; getPrevDay(@PathVariable(&quot;uztId&quot;) Integer uztId) {\n    return documentsDao.getPrevDay(uztId);\n}\n</code></pre>\n<p>DAO:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final long ONE_DAY_MILLI_SECONDS = 24 * 60 * 60 * 1000;\nprivate static final String DATE_FORMAT = &quot;dd.MM.yyyy&quot;;\n\npublic List&lt;Documents&gt; getPrevDay(Integer uztId) {\n    java.util.Date currentDate = new java.util.Date();\n    SimpleDateFormat dateFormat = new SimpleDateFormat(DATE_FORMAT);\n\n    long previousDayMilliSeconds = currentDate.getTime() - ONE_DAY_MILLI_SECONDS;\n    java.util.Date previousDate = new Date(previousDayMilliSeconds);\n    String previousDateStr = dateFormat.format(previousDate);\n\n    System.out.println(&quot;current date: &quot; + dateFormat.format(currentDate));\n    System.out.println(&quot;previous: &quot; + previousDateStr);\n\n    List&lt;Documents&gt; dokumentsPrevious = (List&lt;Documents&gt;) getCurrentSession()\n            .createQuery(&quot;from Documents where uztId = :uztId and dateOfIssue = current_date()&quot;)\n            .setParameter(&quot;uztId&quot;, uztId)\n            .getResultList();\n\n    return dokumentsPrevious;\n}\n</code></pre>\n"},{"tags":["java","stack-trace"],"comments":[{"owner":{"account_id":17898,"reputation":80772,"user_id":40516,"accept_rate":89,"display_name":"Juliet"},"score":5,"creation_date":1231350673,"post_id":421280,"comment_id":245230,"body_markdown":"Just wondering, but why would you need to do this?","body":"Just wondering, but why would you need to do this?"},{"owner":{"account_id":21219,"reputation":20740,"user_id":51402,"accept_rate":53,"display_name":"Sathish"},"score":2,"creation_date":1231350982,"post_id":421280,"comment_id":245241,"body_markdown":"I have a Parent class (MVC model) with a notifier event and only setters of my subclasses call this method. i dont want to litter my code with a redundant argument. I&#39;d rather let the method in parent class figure out the setter that called it.","body":"I have a Parent class (MVC model) with a notifier event and only setters of my subclasses call this method. i dont want to litter my code with a redundant argument. I&#39;d rather let the method in parent class figure out the setter that called it."},{"owner":{"account_id":12111,"reputation":75875,"user_id":23691,"accept_rate":71,"display_name":"krosenvold"},"score":33,"creation_date":1231351160,"post_id":421280,"comment_id":245258,"body_markdown":"@Sathish Sounds like you should re-think that design","body":"@Sathish Sounds like you should re-think that design"},{"owner":{"account_id":12059,"reputation":26552,"user_id":23572,"accept_rate":63,"display_name":"Craig P. Motlin"},"score":1,"creation_date":1231351740,"post_id":421280,"comment_id":245295,"body_markdown":"Also agree that re-design is necessary.  See my answer below.","body":"Also agree that re-design is necessary.  See my answer below."},{"owner":{"account_id":1718843,"reputation":503,"user_id":1575310,"display_name":"Armand"},"score":0,"creation_date":1394213575,"post_id":421280,"comment_id":33804149,"body_markdown":"@Sathish I know this is quite old, but the more common method of doing this would be to pass the caller in the constructor, so the child classes know the caller.  The reasoning is that the stacktrace doesn&#39;t return the actual instance.  If you are truly talking about subclassing, then it would be better to declare your superclass as an abstract class, and implement the common code in the parent that depends on the subclass data to use an abstract function to get that data from the subclass.","body":"@Sathish I know this is quite old, but the more common method of doing this would be to pass the caller in the constructor, so the child classes know the caller.  The reasoning is that the stacktrace doesn&#39;t return the actual instance.  If you are truly talking about subclassing, then it would be better to declare your superclass as an abstract class, and implement the common code in the parent that depends on the subclass data to use an abstract function to get that data from the subclass."},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":7,"creation_date":1400270816,"post_id":421280,"comment_id":36425459,"body_markdown":"@Juliet As part of refactoring a large chuck of code, recently I&#39;ve changed a method that is used by many things. There is a certain way to detect if code was using the new method properly, so I was printing the class and line number that called it in those cases. Outside of logging, I see no real purpose for something like this. Although I kind of want to write API&#39;s now that throw a `DontNameYourMethodFooException` if the calling method is named foo.","body":"@Juliet As part of refactoring a large chuck of code, recently I&#39;ve changed a method that is used by many things. There is a certain way to detect if code was using the new method properly, so I was printing the class and line number that called it in those cases. Outside of logging, I see no real purpose for something like this. Although I kind of want to write API&#39;s now that throw a <code>DontNameYourMethodFooException</code> if the calling method is named foo."},{"owner":{"account_id":7539,"reputation":21506,"user_id":13140,"accept_rate":89,"display_name":"Ogre Psalm33"},"score":8,"creation_date":1408450265,"post_id":421280,"comment_id":39584927,"body_markdown":"I find being able to get the caller of my method an invaluable debugging tool: which is how a web search brought me here.  If my method is being called from multiple places, is it being called from the right location at the right time?  Outside of debugging or logging, usefulness is probably limited at best, as @Cruncher mentions.","body":"I find being able to get the caller of my method an invaluable debugging tool: which is how a web search brought me here.  If my method is being called from multiple places, is it being called from the right location at the right time?  Outside of debugging or logging, usefulness is probably limited at best, as @Cruncher mentions."}],"answers":[{"tags":[],"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1286829880,"creation_date":1231351177,"answer_id":421318,"question_id":421280,"body_markdown":"I&#39;ve done this before.  You can just create a new exception and grab the stack trace on it without throwing it, then examine the stack trace.  As the other answer says though, it&#39;s extremely costly--don&#39;t do it in a tight loop.\r\n\r\nI&#39;ve done it before for a logging utility on an app where performance didn&#39;t matter much (Performance rarely matters much at all, actually--as long as you display the result to an action such as a button click quickly).  \r\n\r\nIt was before you could get the stack trace, exceptions just had .printStackTrace() so I had to redirect System.out to a stream of my own creation, then (new Exception()).printStackTrace(); Redirect System.out back and parse the stream.  Fun stuff.\r\n\r\n\r\n\r\n","title":"How do I find the caller of a method using stacktrace or reflection?","body":"<p>I've done this before.  You can just create a new exception and grab the stack trace on it without throwing it, then examine the stack trace.  As the other answer says though, it's extremely costly--don't do it in a tight loop.</p>\n\n<p>I've done it before for a logging utility on an app where performance didn't matter much (Performance rarely matters much at all, actually--as long as you display the result to an action such as a button click quickly).  </p>\n\n<p>It was before you could get the stack trace, exceptions just had .printStackTrace() so I had to redirect System.out to a stream of my own creation, then (new Exception()).printStackTrace(); Redirect System.out back and parse the stream.  Fun stuff.</p>\n"},{"tags":[],"owner":{"account_id":18236,"reputation":46374,"user_id":41619,"accept_rate":91,"display_name":"Adam Paynter"},"down_vote_count":4,"up_vote_count":460,"is_accepted":true,"score":456,"last_activity_date":1361869508,"creation_date":1231351441,"answer_id":421338,"question_id":421280,"body_markdown":"    StackTraceElement[] stackTraceElements = Thread.currentThread().getStackTrace()\r\n\r\nAccording to the Javadocs:\r\n\r\n&gt; The last element of the array represents the bottom of the stack, which is the least recent method invocation in the sequence. \r\n\r\nA `StackTraceElement` has `getClassName()`, `getFileName()`, `getLineNumber()` and `getMethodName()`.\r\n\r\nYou will have to experiment to determine which index you want\r\n(probably `stackTraceElements[1]` or `[2]`).","title":"How do I find the caller of a method using stacktrace or reflection?","body":"<pre><code>StackTraceElement[] stackTraceElements = Thread.currentThread().getStackTrace()\n</code></pre>\n\n<p>According to the Javadocs:</p>\n\n<blockquote>\n  <p>The last element of the array represents the bottom of the stack, which is the least recent method invocation in the sequence. </p>\n</blockquote>\n\n<p>A <code>StackTraceElement</code> has <code>getClassName()</code>, <code>getFileName()</code>, <code>getLineNumber()</code> and <code>getMethodName()</code>.</p>\n\n<p>You will have to experiment to determine which index you want\n(probably <code>stackTraceElements[1]</code> or <code>[2]</code>).</p>\n"},{"tags":[],"owner":{"account_id":12059,"reputation":26552,"user_id":23572,"accept_rate":63,"display_name":"Craig P. Motlin"},"down_vote_count":10,"up_vote_count":45,"is_accepted":false,"score":35,"last_activity_date":1231380192,"creation_date":1231351568,"answer_id":421349,"question_id":421280,"body_markdown":"Sounds like you&#39;re trying to avoid passing a reference to `this` into the method.  Passing `this` is way better than finding the caller through the current stack trace.  **Refactoring to a more OO design is even better.**  You shouldn&#39;t need to know the caller.  Pass a callback object if necessary.","title":"How do I find the caller of a method using stacktrace or reflection?","body":"<p>Sounds like you're trying to avoid passing a reference to <code>this</code> into the method.  Passing <code>this</code> is way better than finding the caller through the current stack trace.  <strong>Refactoring to a more OO design is even better.</strong>  You shouldn't need to know the caller.  Pass a callback object if necessary.</p>\n"},{"tags":[],"owner":{"account_id":4243,"reputation":1301840,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1231352744,"creation_date":1231352106,"answer_id":421383,"question_id":421280,"body_markdown":"    \t /**\r\n    \t   * Get the method name for a depth in call stack. &lt;br /&gt;\r\n    \t   * Utility function\r\n    \t   * @param depth depth in the call stack (0 means current method, 1 means call method, ...)\r\n    \t   * @return method name\r\n    \t   */\r\n    \t  public static String getMethodName(final int depth)\r\n    \t  {\r\n    \t    final StackTraceElement[] ste = new Throwable().getStackTrace();\r\n    \r\n    \t    //System. out.println(ste[ste.length-depth].getClassName()+&quot;#&quot;+ste[ste.length-depth].getMethodName());\r\n    \t    return ste[ste.length - depth].getMethodName();\r\n    \t  }\r\n\r\n----\r\n\r\nFor example, if you try to get the calling method line for debug purpose, you need to get past the Utility class  in which you code those static methods:  \r\n(old java1.4 code, just to illustrate a potential StackTraceElement usage)\r\n\r\n    \t\t/**\r\n    \t\t  * Returns the first &quot;[class#method(line)]: &quot; of the first class not equal to &quot;StackTraceUtils&quot;. &lt;br /&gt;\r\n    \t\t  * From the Stack Trace.\r\n    \t\t  * @return &quot;[class#method(line)]: &quot; (never empty, first class past StackTraceUtils)\r\n    \t\t  */\r\n    \t\tpublic static String getClassMethodLine()\r\n    \t\t{\r\n    \t\t\treturn getClassMethodLine(null);\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t  * Returns the first &quot;[class#method(line)]: &quot; of the first class not equal to &quot;StackTraceUtils&quot; and aclass. &lt;br /&gt;\r\n    \t\t  * Allows to get past a certain class.\r\n    \t\t  * @param aclass class to get pass in the stack trace. If null, only try to get past StackTraceUtils. \r\n    \t\t  * @return &quot;[class#method(line)]: &quot; (never empty, because if aclass is not found, returns first class past StackTraceUtils)\r\n    \t\t  */\r\n    \t\tpublic static String getClassMethodLine(final Class aclass)\r\n    \t\t{\r\n    \t\t\tfinal StackTraceElement st = getCallingStackTraceElement(aclass);\r\n    \t\t\tfinal String amsg = &quot;[&quot; + st.getClassName() + &quot;#&quot; + st.getMethodName() + &quot;(&quot; + st.getLineNumber()\r\n    \t\t\t+&quot;)] &lt;&quot; + Thread.currentThread().getName() + &quot;&gt;: &quot;;\r\n    \t\t\treturn amsg;\r\n    \t\t}\r\n    \r\n    \t /**\r\n    \t   * Returns the first stack trace element of the first class not equal to &quot;StackTraceUtils&quot; or &quot;LogUtils&quot; and aClass. &lt;br /&gt;\r\n    \t   * Stored in array of the callstack. &lt;br /&gt;\r\n    \t   * Allows to get past a certain class.\r\n    \t   * @param aclass class to get pass in the stack trace. If null, only try to get past StackTraceUtils. \r\n    \t   * @return stackTraceElement (never null, because if aClass is not found, returns first class past StackTraceUtils)\r\n    \t   * @throws AssertionFailedException if resulting statckTrace is null (RuntimeException)\r\n    \t   */\r\n    \t  public static StackTraceElement getCallingStackTraceElement(final Class aclass)\r\n    \t  {\r\n    \t\tfinal Throwable           t         = new Throwable();\r\n    \t\tfinal StackTraceElement[] ste       = t.getStackTrace();\r\n    \t    int index = 1;\r\n    \t    final int limit = ste.length;\r\n    \t\tStackTraceElement   st        = ste[index];\r\n    \t\tString              className = st.getClassName();\r\n    \t\tboolean aclassfound = false;\r\n    \t\tif(aclass == null)\r\n    \t\t{\r\n    \t\t\taclassfound = true;\r\n    \t\t}\r\n    \t\tStackTraceElement   resst = null;\r\n    \t    while(index &lt; limit)\r\n    \t    {\r\n    \t    \tif(shouldExamine(className, aclass) == true)\r\n    \t    \t{\r\n    \t    \t\tif(resst == null)\r\n    \t    \t\t{\r\n    \t    \t\t\tresst = st;\r\n    \t    \t\t}\r\n    \t    \t\tif(aclassfound == true)\r\n    \t    \t\t{\r\n    \t    \t\t\tfinal StackTraceElement ast = onClassfound(aclass, className, st);\r\n    \t    \t\t\tif(ast != null)\r\n    \t    \t\t\t{\r\n    \t    \t\t\t\tresst = ast;\r\n    \t    \t\t\t\tbreak;\r\n    \t    \t\t\t}\r\n    \t    \t\t}\r\n    \t    \t\telse\r\n    \t    \t\t{\r\n    \t    \t\t\tif(aclass != null &amp;&amp; aclass.getName().equals(className) == true)\r\n    \t    \t\t\t{\r\n    \t    \t\t\t\taclassfound = true;\r\n    \t    \t\t\t}\r\n    \t    \t\t}\r\n    \t    \t}\r\n    \t    \tindex = index + 1;\r\n    \t    \tst        = ste[index];\r\n    \t        className = st.getClassName();\r\n    \t    }\r\n    \t    if(resst == null) \r\n    \t    {\r\n    \t    \t//Assert.isNotNull(resst, &quot;stack trace should null&quot;); //NO OTHERWISE circular dependencies \r\n    \t    \tthrow new AssertionFailedException(StackTraceUtils.getClassMethodLine() + &quot; null argument:&quot; + &quot;stack trace should null&quot;); //$NON-NLS-1$\r\n    \t    }\r\n    \t\treturn resst;\r\n    \t  }\r\n    \t  \r\n    \t  static private boolean shouldExamine(String className, Class aclass)\r\n    \t  {\r\n    \t\t  final boolean res = StackTraceUtils.class.getName().equals(className) == false &amp;&amp; (className.endsWith(&quot;LogUtils&quot;\r\n    \t\t\t) == false || (aclass !=null &amp;&amp; aclass.getName().endsWith(&quot;LogUtils&quot;)));\r\n    \t\t  return res;\r\n    \t  }\r\n\r\n    \t  static private StackTraceElement onClassfound(Class aclass, String className, StackTraceElement st)\r\n    \t  {\r\n    \t\t  StackTraceElement   resst = null;\r\n    \t\t  if(aclass != null &amp;&amp; aclass.getName().equals(className) == false)\r\n    \t\t  {\r\n    \t\t\t  resst = st;\r\n    \t\t  }\r\n    \t\t  if(aclass == null)\r\n    \t\t  {\r\n    \t\t\t  resst = st;\r\n    \t\t  }\r\n    \t\t  return resst;\r\n    \t  }\r\n\r\n","title":"How do I find the caller of a method using stacktrace or reflection?","body":"<pre><code>     /**\n       * Get the method name for a depth in call stack. &lt;br /&gt;\n       * Utility function\n       * @param depth depth in the call stack (0 means current method, 1 means call method, ...)\n       * @return method name\n       */\n      public static String getMethodName(final int depth)\n      {\n        final StackTraceElement[] ste = new Throwable().getStackTrace();\n\n        //System. out.println(ste[ste.length-depth].getClassName()+\"#\"+ste[ste.length-depth].getMethodName());\n        return ste[ste.length - depth].getMethodName();\n      }\n</code></pre>\n\n<hr>\n\n<p>For example, if you try to get the calling method line for debug purpose, you need to get past the Utility class  in which you code those static methods:<br>\n(old java1.4 code, just to illustrate a potential StackTraceElement usage)</p>\n\n<pre><code>        /**\n          * Returns the first \"[class#method(line)]: \" of the first class not equal to \"StackTraceUtils\". &lt;br /&gt;\n          * From the Stack Trace.\n          * @return \"[class#method(line)]: \" (never empty, first class past StackTraceUtils)\n          */\n        public static String getClassMethodLine()\n        {\n            return getClassMethodLine(null);\n        }\n\n        /**\n          * Returns the first \"[class#method(line)]: \" of the first class not equal to \"StackTraceUtils\" and aclass. &lt;br /&gt;\n          * Allows to get past a certain class.\n          * @param aclass class to get pass in the stack trace. If null, only try to get past StackTraceUtils. \n          * @return \"[class#method(line)]: \" (never empty, because if aclass is not found, returns first class past StackTraceUtils)\n          */\n        public static String getClassMethodLine(final Class aclass)\n        {\n            final StackTraceElement st = getCallingStackTraceElement(aclass);\n            final String amsg = \"[\" + st.getClassName() + \"#\" + st.getMethodName() + \"(\" + st.getLineNumber()\n            +\")] &lt;\" + Thread.currentThread().getName() + \"&gt;: \";\n            return amsg;\n        }\n\n     /**\n       * Returns the first stack trace element of the first class not equal to \"StackTraceUtils\" or \"LogUtils\" and aClass. &lt;br /&gt;\n       * Stored in array of the callstack. &lt;br /&gt;\n       * Allows to get past a certain class.\n       * @param aclass class to get pass in the stack trace. If null, only try to get past StackTraceUtils. \n       * @return stackTraceElement (never null, because if aClass is not found, returns first class past StackTraceUtils)\n       * @throws AssertionFailedException if resulting statckTrace is null (RuntimeException)\n       */\n      public static StackTraceElement getCallingStackTraceElement(final Class aclass)\n      {\n        final Throwable           t         = new Throwable();\n        final StackTraceElement[] ste       = t.getStackTrace();\n        int index = 1;\n        final int limit = ste.length;\n        StackTraceElement   st        = ste[index];\n        String              className = st.getClassName();\n        boolean aclassfound = false;\n        if(aclass == null)\n        {\n            aclassfound = true;\n        }\n        StackTraceElement   resst = null;\n        while(index &lt; limit)\n        {\n            if(shouldExamine(className, aclass) == true)\n            {\n                if(resst == null)\n                {\n                    resst = st;\n                }\n                if(aclassfound == true)\n                {\n                    final StackTraceElement ast = onClassfound(aclass, className, st);\n                    if(ast != null)\n                    {\n                        resst = ast;\n                        break;\n                    }\n                }\n                else\n                {\n                    if(aclass != null &amp;&amp; aclass.getName().equals(className) == true)\n                    {\n                        aclassfound = true;\n                    }\n                }\n            }\n            index = index + 1;\n            st        = ste[index];\n            className = st.getClassName();\n        }\n        if(resst == null) \n        {\n            //Assert.isNotNull(resst, \"stack trace should null\"); //NO OTHERWISE circular dependencies \n            throw new AssertionFailedException(StackTraceUtils.getClassMethodLine() + \" null argument:\" + \"stack trace should null\"); //$NON-NLS-1$\n        }\n        return resst;\n      }\n\n      static private boolean shouldExamine(String className, Class aclass)\n      {\n          final boolean res = StackTraceUtils.class.getName().equals(className) == false &amp;&amp; (className.endsWith(\"LogUtils\"\n            ) == false || (aclass !=null &amp;&amp; aclass.getName().endsWith(\"LogUtils\")));\n          return res;\n      }\n\n      static private StackTraceElement onClassfound(Class aclass, String className, StackTraceElement st)\n      {\n          StackTraceElement   resst = null;\n          if(aclass != null &amp;&amp; aclass.getName().equals(className) == false)\n          {\n              resst = st;\n          }\n          if(aclass == null)\n          {\n              resst = st;\n          }\n          return resst;\n      }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18897,"reputation":15976,"user_id":43786,"accept_rate":83,"display_name":"Nicholas"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1231357931,"creation_date":1231357931,"answer_id":421821,"question_id":421280,"body_markdown":"This method does the same thing but a little more simply and possibly a little more performant and in the event you are using reflection, it skips those frames automatically. The only issue is it may not be present in non-Sun JVMs, although it is included in the runtime classes of JRockit 1.4--&gt;1.6. (Point is, it is not a *public* class).\r\n\r\n    sun.reflect.Reflection\r\n    \r\n        /** Returns the class of the method &lt;code&gt;realFramesToSkip&lt;/code&gt;\r\n            frames up the stack (zero-based), ignoring frames associated\r\n            with java.lang.reflect.Method.invoke() and its implementation.\r\n            The first frame is that associated with this method, so\r\n            &lt;code&gt;getCallerClass(0)&lt;/code&gt; returns the Class object for\r\n            sun.reflect.Reflection. Frames associated with\r\n            java.lang.reflect.Method.invoke() and its implementation are\r\n            completely ignored and do not count toward the number of &quot;real&quot;\r\n            frames skipped. */\r\n        public static native Class getCallerClass(int realFramesToSkip);\r\n\r\nAs far as what the `realFramesToSkip` value should be, the Sun 1.5 and 1.6 VM versions of `java.lang.System`, there is a package protected method called getCallerClass() which calls `sun.reflect.Reflection.getCallerClass(3)`, but in my helper utility class I used 4 since there is the added frame of the helper class invocation.\r\n\r\n","title":"How do I find the caller of a method using stacktrace or reflection?","body":"<p>This method does the same thing but a little more simply and possibly a little more performant and in the event you are using reflection, it skips those frames automatically. The only issue is it may not be present in non-Sun JVMs, although it is included in the runtime classes of JRockit 1.4-->1.6. (Point is, it is not a <em>public</em> class).</p>\n\n<pre><code>sun.reflect.Reflection\n\n    /** Returns the class of the method &lt;code&gt;realFramesToSkip&lt;/code&gt;\n        frames up the stack (zero-based), ignoring frames associated\n        with java.lang.reflect.Method.invoke() and its implementation.\n        The first frame is that associated with this method, so\n        &lt;code&gt;getCallerClass(0)&lt;/code&gt; returns the Class object for\n        sun.reflect.Reflection. Frames associated with\n        java.lang.reflect.Method.invoke() and its implementation are\n        completely ignored and do not count toward the number of \"real\"\n        frames skipped. */\n    public static native Class getCallerClass(int realFramesToSkip);\n</code></pre>\n\n<p>As far as what the <code>realFramesToSkip</code> value should be, the Sun 1.5 and 1.6 VM versions of <code>java.lang.System</code>, there is a package protected method called getCallerClass() which calls <code>sun.reflect.Reflection.getCallerClass(3)</code>, but in my helper utility class I used 4 since there is the added frame of the helper class invocation.</p>\n"},{"tags":[],"owner":{"account_id":142776,"reputation":4889,"user_id":350692,"display_name":"Johan Kaving"},"down_vote_count":1,"up_vote_count":230,"is_accepted":false,"score":229,"last_activity_date":1621511270,"creation_date":1274990163,"answer_id":2924426,"question_id":421280,"body_markdown":"**Note**: if you are using Java 9 or later you should use `StackWalker.getCallerClass()` as described in [Ali Dehghani&#39;s answer][1]. \r\n\r\nThe comparison of different methods below is mostly interesting for historical reason.\r\n\r\n----------\r\nAn alternative solution can be found in a comment to [this request for enhancement][2].\r\nIt uses the ``getClassContext()`` method of a custom ``SecurityManager`` and seems to be faster than the stack trace method.\r\n\r\nThe following program tests the speed of the different suggested methods (the most interesting bit is in the inner class ``SecurityManagerMethod``):\r\n\r\n    /**\r\n     * Test the speed of various methods for getting the caller class name\r\n     */\r\n    public class TestGetCallerClassName {\r\n\r\n      /**\r\n       * Abstract class for testing different methods of getting the caller class name\r\n       */\r\n      private static abstract class GetCallerClassNameMethod {\r\n          public abstract String getCallerClassName(int callStackDepth);\r\n          public abstract String getMethodName();\r\n      }\r\n\r\n      /**\r\n       * Uses the internal Reflection class\r\n       */\r\n      private static class ReflectionMethod extends GetCallerClassNameMethod {\r\n          public String getCallerClassName(int callStackDepth) {\r\n              return sun.reflect.Reflection.getCallerClass(callStackDepth).getName();\r\n          }\r\n\r\n          public String getMethodName() {\r\n              return &quot;Reflection&quot;;\r\n          }\r\n      }\r\n\r\n      /**\r\n       * Get a stack trace from the current thread\r\n       */\r\n      private static class ThreadStackTraceMethod extends GetCallerClassNameMethod {\r\n          public String  getCallerClassName(int callStackDepth) {\r\n              return Thread.currentThread().getStackTrace()[callStackDepth].getClassName();\r\n          }\r\n\r\n          public String getMethodName() {\r\n              return &quot;Current Thread StackTrace&quot;;\r\n          }\r\n      }\r\n\r\n      /**\r\n       * Get a stack trace from a new Throwable\r\n       */\r\n      private static class ThrowableStackTraceMethod extends GetCallerClassNameMethod {\r\n\r\n          public String getCallerClassName(int callStackDepth) {\r\n              return new Throwable().getStackTrace()[callStackDepth].getClassName();\r\n          }\r\n\r\n          public String getMethodName() {\r\n              return &quot;Throwable StackTrace&quot;;\r\n          }\r\n      }\r\n\r\n      /**\r\n       * Use the SecurityManager.getClassContext()\r\n       */\r\n      private static class SecurityManagerMethod extends GetCallerClassNameMethod {\r\n          public String  getCallerClassName(int callStackDepth) {\r\n              return mySecurityManager.getCallerClassName(callStackDepth);\r\n          }\r\n\r\n          public String getMethodName() {\r\n              return &quot;SecurityManager&quot;;\r\n          }\r\n  \r\n          /** \r\n           * A custom security manager that exposes the getClassContext() information\r\n           */\r\n          static class MySecurityManager extends SecurityManager {\r\n              public String getCallerClassName(int callStackDepth) {\r\n                  return getClassContext()[callStackDepth].getName();\r\n              }\r\n          }\r\n\r\n          private final static MySecurityManager mySecurityManager =\r\n              new MySecurityManager();\r\n      }\r\n\r\n      /**\r\n       * Test all four methods\r\n       */\r\n      public static void main(String[] args) {\r\n          testMethod(new ReflectionMethod());\r\n          testMethod(new ThreadStackTraceMethod());\r\n          testMethod(new ThrowableStackTraceMethod());\r\n          testMethod(new SecurityManagerMethod());\r\n      }\r\n\r\n      private static void testMethod(GetCallerClassNameMethod method) {\r\n          long startTime = System.nanoTime();\r\n          String className = null;\r\n          for (int i = 0; i &lt; 1000000; i++) {\r\n              className = method.getCallerClassName(2);\r\n          }\r\n          printElapsedTime(method.getMethodName(), startTime);\r\n      }\r\n\r\n      private static void printElapsedTime(String title, long startTime) {\r\n          System.out.println(title + &quot;: &quot; + ((double)(System.nanoTime() - startTime))/1000000 + &quot; ms.&quot;);\r\n      }\r\n    }\r\n \r\nAn example of the output from my 2.4 GHz Intel Core 2 Duo MacBook running Java 1.6.0_17:\r\n\r\n    Reflection: 10.195 ms.\r\n    Current Thread StackTrace: 5886.964 ms.\r\n    Throwable StackTrace: 4700.073 ms.\r\n    SecurityManager: 1046.804 ms.\r\n\r\nThe internal Reflection method is *much* faster than the others. Getting a stack trace from a newly created ``Throwable`` is faster than getting it from the current ``Thread``. And among the non-internal ways of finding the caller class the custom ``SecurityManager`` seems to be the fastest.\r\n\r\nUpdate\r\n------\r\nAs **lyomi** points out in [this comment][3] the ``sun.reflect.Reflection.getCallerClass()`` method has been disabled by default in Java 7 update 40 and removed completely in Java 8. Read more about this in [this issue in the Java bug database][4]. \r\n\r\nUpdate 2\r\n--------\r\nAs **zammbi** has found, Oracle was [forced to back out of the change][5] that removed the ``sun.reflect.Reflection.getCallerClass()``. It is still available in Java 8 (but it is deprecated).\r\n\r\nUpdate 3\r\n--------\r\n\r\n3 years after: Update on timing with current JVM.\r\n\r\n    &gt; java -version\r\n    java version &quot;1.8.0&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0-b132)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 25.0-b70, mixed mode)\r\n    &gt; java TestGetCallerClassName\r\n    Reflection: 0.194s.\r\n    Current Thread StackTrace: 3.887s.\r\n    Throwable StackTrace: 3.173s.\r\n    SecurityManager: 0.565s.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/45812871/350692\r\n  [2]: https://bugs.java.com/bugdatabase/view_bug?bug_id=4851444\r\n  [3]: https://stackoverflow.com/questions/421280/how-do-i-find-the-caller-of-a-method-using-stacktrace-or-reflection/2924426#comment26408146_2924426\r\n  [4]: https://bugs.openjdk.java.net/browse/JDK-8014925\r\n  [5]: https://bugs.openjdk.java.net/browse/JDK-8021946","title":"How do I find the caller of a method using stacktrace or reflection?","body":"<p><strong>Note</strong>: if you are using Java 9 or later you should use <code>StackWalker.getCallerClass()</code> as described in <a href=\"https://stackoverflow.com/a/45812871/350692\">Ali Dehghani's answer</a>.</p>\n<p>The comparison of different methods below is mostly interesting for historical reason.</p>\n<hr />\n<p>An alternative solution can be found in a comment to <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4851444\" rel=\"nofollow noreferrer\">this request for enhancement</a>.\nIt uses the <code>getClassContext()</code> method of a custom <code>SecurityManager</code> and seems to be faster than the stack trace method.</p>\n<p>The following program tests the speed of the different suggested methods (the most interesting bit is in the inner class <code>SecurityManagerMethod</code>):</p>\n<pre><code>/**\n * Test the speed of various methods for getting the caller class name\n */\npublic class TestGetCallerClassName {\n\n  /**\n   * Abstract class for testing different methods of getting the caller class name\n   */\n  private static abstract class GetCallerClassNameMethod {\n      public abstract String getCallerClassName(int callStackDepth);\n      public abstract String getMethodName();\n  }\n\n  /**\n   * Uses the internal Reflection class\n   */\n  private static class ReflectionMethod extends GetCallerClassNameMethod {\n      public String getCallerClassName(int callStackDepth) {\n          return sun.reflect.Reflection.getCallerClass(callStackDepth).getName();\n      }\n\n      public String getMethodName() {\n          return &quot;Reflection&quot;;\n      }\n  }\n\n  /**\n   * Get a stack trace from the current thread\n   */\n  private static class ThreadStackTraceMethod extends GetCallerClassNameMethod {\n      public String  getCallerClassName(int callStackDepth) {\n          return Thread.currentThread().getStackTrace()[callStackDepth].getClassName();\n      }\n\n      public String getMethodName() {\n          return &quot;Current Thread StackTrace&quot;;\n      }\n  }\n\n  /**\n   * Get a stack trace from a new Throwable\n   */\n  private static class ThrowableStackTraceMethod extends GetCallerClassNameMethod {\n\n      public String getCallerClassName(int callStackDepth) {\n          return new Throwable().getStackTrace()[callStackDepth].getClassName();\n      }\n\n      public String getMethodName() {\n          return &quot;Throwable StackTrace&quot;;\n      }\n  }\n\n  /**\n   * Use the SecurityManager.getClassContext()\n   */\n  private static class SecurityManagerMethod extends GetCallerClassNameMethod {\n      public String  getCallerClassName(int callStackDepth) {\n          return mySecurityManager.getCallerClassName(callStackDepth);\n      }\n\n      public String getMethodName() {\n          return &quot;SecurityManager&quot;;\n      }\n\n      /** \n       * A custom security manager that exposes the getClassContext() information\n       */\n      static class MySecurityManager extends SecurityManager {\n          public String getCallerClassName(int callStackDepth) {\n              return getClassContext()[callStackDepth].getName();\n          }\n      }\n\n      private final static MySecurityManager mySecurityManager =\n          new MySecurityManager();\n  }\n\n  /**\n   * Test all four methods\n   */\n  public static void main(String[] args) {\n      testMethod(new ReflectionMethod());\n      testMethod(new ThreadStackTraceMethod());\n      testMethod(new ThrowableStackTraceMethod());\n      testMethod(new SecurityManagerMethod());\n  }\n\n  private static void testMethod(GetCallerClassNameMethod method) {\n      long startTime = System.nanoTime();\n      String className = null;\n      for (int i = 0; i &lt; 1000000; i++) {\n          className = method.getCallerClassName(2);\n      }\n      printElapsedTime(method.getMethodName(), startTime);\n  }\n\n  private static void printElapsedTime(String title, long startTime) {\n      System.out.println(title + &quot;: &quot; + ((double)(System.nanoTime() - startTime))/1000000 + &quot; ms.&quot;);\n  }\n}\n</code></pre>\n<p>An example of the output from my 2.4 GHz Intel Core 2 Duo MacBook running Java 1.6.0_17:</p>\n<pre><code>Reflection: 10.195 ms.\nCurrent Thread StackTrace: 5886.964 ms.\nThrowable StackTrace: 4700.073 ms.\nSecurityManager: 1046.804 ms.\n</code></pre>\n<p>The internal Reflection method is <em>much</em> faster than the others. Getting a stack trace from a newly created <code>Throwable</code> is faster than getting it from the current <code>Thread</code>. And among the non-internal ways of finding the caller class the custom <code>SecurityManager</code> seems to be the fastest.</p>\n<h2>Update</h2>\n<p>As <strong>lyomi</strong> points out in <a href=\"https://stackoverflow.com/questions/421280/how-do-i-find-the-caller-of-a-method-using-stacktrace-or-reflection/2924426#comment26408146_2924426\">this comment</a> the <code>sun.reflect.Reflection.getCallerClass()</code> method has been disabled by default in Java 7 update 40 and removed completely in Java 8. Read more about this in <a href=\"https://bugs.openjdk.java.net/browse/JDK-8014925\" rel=\"nofollow noreferrer\">this issue in the Java bug database</a>.</p>\n<h2>Update 2</h2>\n<p>As <strong>zammbi</strong> has found, Oracle was <a href=\"https://bugs.openjdk.java.net/browse/JDK-8021946\" rel=\"nofollow noreferrer\">forced to back out of the change</a> that removed the <code>sun.reflect.Reflection.getCallerClass()</code>. It is still available in Java 8 (but it is deprecated).</p>\n<h2>Update 3</h2>\n<p>3 years after: Update on timing with current JVM.</p>\n<pre><code>&gt; java -version\njava version &quot;1.8.0&quot;\nJava(TM) SE Runtime Environment (build 1.8.0-b132)\nJava HotSpot(TM) 64-Bit Server VM (build 25.0-b70, mixed mode)\n&gt; java TestGetCallerClassName\nReflection: 0.194s.\nCurrent Thread StackTrace: 3.887s.\nThrowable StackTrace: 3.173s.\nSecurityManager: 0.565s.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2446838,"reputation":1142,"user_id":2133952,"accept_rate":56,"display_name":"Pmt"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1363918994,"creation_date":1363918994,"answer_id":15561665,"question_id":421280,"body_markdown":"Here is a part of the code that I made based in the hints showed in this topic.\r\nHope it helps.\r\n\r\n(Feel free to make any suggestions to improve this code, please tell me)\r\n\r\nThe counter:\r\n\r\n    public class InstanceCount{\r\n        private static Map&lt;Integer, CounterInstanceLog&gt; instanceMap = new HashMap&lt;Integer, CounterInstanceLog&gt;();\r\n    private CounterInstanceLog counterInstanceLog;\r\n    \r\n    \r\n        public void count() {\r\n            counterInstanceLog= new counterInstanceLog();\r\n        if(counterInstanceLog.getIdHashCode() != 0){\r\n        try {\r\n            if (instanceMap .containsKey(counterInstanceLog.getIdHashCode())) {\r\n    \t     counterInstanceLog= instanceMap .get(counterInstanceLog.getIdHashCode());\r\n    \t}\r\n    \r\n    \tcounterInstanceLog.incrementCounter();\r\n    \r\n                instanceMap .put(counterInstanceLog.getIdHashCode(), counterInstanceLog);\r\n        }\r\n    \r\n        (...)\r\n    }\r\n\r\nAnd the object:\r\n\r\n\r\n    public class CounterInstanceLog{\r\n        private int idHashCode;\r\n        private StackTraceElement[] arrayStackTraceElements;\r\n        private int instanceCount;\r\n        private String callerClassName;\r\n    \r\n        private StackTraceElement getProjectClasses(int depth) {\r\n          if(depth&lt; 10){\r\n            getCallerClassName(sun.reflect.Reflection.getCallerClass(depth).getName());\r\n            if(getCallerClassName().startsWith(&quot;com.yourproject.model&quot;)){\r\n                setStackTraceElements(Thread.currentThread().getStackTrace());\r\n               \tsetIdHashCode();\r\n        \treturn arrayStackTraceElements[depth];\r\n            }\r\n            //+2 because one new item are added to the stackflow\r\n            return getProjectClasses(profundidade+2);     \t\t\r\n          }else{\r\n            return null;\r\n          }\r\n        }\r\n    \r\n        private void setIdHashCode() {\r\n            if(getNomeClasse() != null){\r\n                this.idHashCode = (getCallerClassName()).hashCode();\r\n            }\r\n        }\r\n\r\n        public void incrementaContador() {\r\n\t    this.instanceCount++;\r\n\t}\r\n\r\n        //getters and setters\r\n\r\n        (...)\r\n\r\n\r\n    \r\n    }","title":"How do I find the caller of a method using stacktrace or reflection?","body":"<p>Here is a part of the code that I made based in the hints showed in this topic.\nHope it helps.</p>\n\n<p>(Feel free to make any suggestions to improve this code, please tell me)</p>\n\n<p>The counter:</p>\n\n<pre><code>public class InstanceCount{\n    private static Map&lt;Integer, CounterInstanceLog&gt; instanceMap = new HashMap&lt;Integer, CounterInstanceLog&gt;();\nprivate CounterInstanceLog counterInstanceLog;\n\n\n    public void count() {\n        counterInstanceLog= new counterInstanceLog();\n    if(counterInstanceLog.getIdHashCode() != 0){\n    try {\n        if (instanceMap .containsKey(counterInstanceLog.getIdHashCode())) {\n         counterInstanceLog= instanceMap .get(counterInstanceLog.getIdHashCode());\n    }\n\n    counterInstanceLog.incrementCounter();\n\n            instanceMap .put(counterInstanceLog.getIdHashCode(), counterInstanceLog);\n    }\n\n    (...)\n}\n</code></pre>\n\n<p>And the object:</p>\n\n<pre><code>public class CounterInstanceLog{\n    private int idHashCode;\n    private StackTraceElement[] arrayStackTraceElements;\n    private int instanceCount;\n    private String callerClassName;\n\n    private StackTraceElement getProjectClasses(int depth) {\n      if(depth&lt; 10){\n        getCallerClassName(sun.reflect.Reflection.getCallerClass(depth).getName());\n        if(getCallerClassName().startsWith(\"com.yourproject.model\")){\n            setStackTraceElements(Thread.currentThread().getStackTrace());\n            setIdHashCode();\n        return arrayStackTraceElements[depth];\n        }\n        //+2 because one new item are added to the stackflow\n        return getProjectClasses(profundidade+2);           \n      }else{\n        return null;\n      }\n    }\n\n    private void setIdHashCode() {\n        if(getNomeClasse() != null){\n            this.idHashCode = (getCallerClassName()).hashCode();\n        }\n    }\n\n    public void incrementaContador() {\n    this.instanceCount++;\n}\n\n    //getters and setters\n\n    (...)\n\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":543250,"reputation":18874,"user_id":912319,"accept_rate":62,"display_name":"Kanagavelu Sugumar"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1383744545,"creation_date":1380334862,"answer_id":19062527,"question_id":421280,"body_markdown":"    import java.io.ByteArrayOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.PrintWriter;\r\n    \r\n    class DBConnection {\r\n    \tString createdBy = null;\r\n    \r\n    \tDBConnection(Throwable whoCreatedMe) {\r\n    \t\tByteArrayOutputStream os = new ByteArrayOutputStream();\r\n    \t\tPrintWriter pw = new PrintWriter(os);\r\n    \t\twhoCreatedMe.printStackTrace(pw);\r\n    \t\ttry {\r\n    \t\t\tcreatedBy = os.toString();\r\n    \t\t\tpw.close();\r\n    \t\t\tos.close();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n    public class ThrowableTest {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tThrowable createdBy = new Throwable(\r\n    \t\t\t\t&quot;Connection created from DBConnectionManager&quot;);\r\n    \t\tDBConnection conn = new DBConnection(createdBy);\r\n            System.out.println(conn.createdBy);\r\n    \t}\r\n    }\r\n\r\n\r\nOR\r\n---\r\n\r\n    public static interface ICallback&lt;T&gt; { T doOperation(); }\r\n    \r\n    \r\n    public class TestCallerOfMethod {\r\n    \r\n    \tpublic static &lt;T&gt; T callTwo(final ICallback&lt;T&gt; c){\r\n            // Pass the object created at callee to the caller\r\n            // From the passed object we can get; what is the callee name like below.\r\n            System.out.println(c.getClass().getEnclosingMethod().getName());\r\n            return c.doOperation();\r\n    \t}\r\n    \r\n    \tpublic static boolean callOne(){\r\n            ICallback callBackInstance = new ICallback(Boolean){\r\n                @Override\r\n                public Boolean doOperation() \r\n                {\r\n                \treturn true;\r\n                }\r\n            };\r\n    \t\treturn callTwo(callBackInstance);\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t callOne();\r\n        }\r\n    }","title":"How do I find the caller of a method using stacktrace or reflection?","body":"<pre><code>import java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.io.PrintWriter;\n\nclass DBConnection {\n    String createdBy = null;\n\n    DBConnection(Throwable whoCreatedMe) {\n        ByteArrayOutputStream os = new ByteArrayOutputStream();\n        PrintWriter pw = new PrintWriter(os);\n        whoCreatedMe.printStackTrace(pw);\n        try {\n            createdBy = os.toString();\n            pw.close();\n            os.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n\npublic class ThrowableTest {\n\n    public static void main(String[] args) {\n\n        Throwable createdBy = new Throwable(\n                \"Connection created from DBConnectionManager\");\n        DBConnection conn = new DBConnection(createdBy);\n        System.out.println(conn.createdBy);\n    }\n}\n</code></pre>\n\n<h2>OR</h2>\n\n<pre><code>public static interface ICallback&lt;T&gt; { T doOperation(); }\n\n\npublic class TestCallerOfMethod {\n\n    public static &lt;T&gt; T callTwo(final ICallback&lt;T&gt; c){\n        // Pass the object created at callee to the caller\n        // From the passed object we can get; what is the callee name like below.\n        System.out.println(c.getClass().getEnclosingMethod().getName());\n        return c.doOperation();\n    }\n\n    public static boolean callOne(){\n        ICallback callBackInstance = new ICallback(Boolean){\n            @Override\n            public Boolean doOperation() \n            {\n                return true;\n            }\n        };\n        return callTwo(callBackInstance);\n    }\n\n    public static void main(String[] args) {\n         callOne();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2263175,"reputation":2879,"user_id":1992679,"accept_rate":48,"display_name":"Reegan Miranda"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1390033998,"creation_date":1390033998,"answer_id":21201880,"question_id":421280,"body_markdown":"use this method:-\r\n\r\n     StackTraceElement[] stacktrace = Thread.currentThread().getStackTrace();\r\n     stackTraceElement e = stacktrace[2];//maybe this number needs to be corrected\r\n     System.out.println(e.getMethodName());\r\n\r\nCaller of method example Code is here:-\r\n\r\n\tpublic class TestString {\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t    TestString testString = new TestString();\r\n\t\t    testString.doit1();\r\n\t\t    testString.doit2();\r\n\t\t    testString.doit3();\r\n\t\t    testString.doit4();\r\n\t\t}\r\n\r\n\t\tpublic void doit() {\r\n\t\t    StackTraceElement[] stacktrace = Thread.currentThread().getStackTrace();\r\n\t\t    StackTraceElement e = stacktrace[2];//maybe this number needs to be corrected\r\n\t\t    System.out.println(e.getMethodName());\r\n\t\t}\r\n\r\n\t\tpublic void doit1() {\r\n\t\t    doit();\r\n\t\t}\r\n\r\n\t\tpublic void doit2() {\r\n\t\t    doit();\r\n\t\t}\r\n\r\n\t\tpublic void doit3() {\r\n\t\t    doit();\r\n\t\t}\r\n\t\t\r\n\t\tpublic void doit4() {\r\n\t\t    doit();\r\n\t\t}\r\n\t}\r\n","title":"How do I find the caller of a method using stacktrace or reflection?","body":"<p>use this method:-</p>\n\n<pre><code> StackTraceElement[] stacktrace = Thread.currentThread().getStackTrace();\n stackTraceElement e = stacktrace[2];//maybe this number needs to be corrected\n System.out.println(e.getMethodName());\n</code></pre>\n\n<p>Caller of method example Code is here:-</p>\n\n<pre><code>public class TestString {\n\n    public static void main(String[] args) {\n        TestString testString = new TestString();\n        testString.doit1();\n        testString.doit2();\n        testString.doit3();\n        testString.doit4();\n    }\n\n    public void doit() {\n        StackTraceElement[] stacktrace = Thread.currentThread().getStackTrace();\n        StackTraceElement e = stacktrace[2];//maybe this number needs to be corrected\n        System.out.println(e.getMethodName());\n    }\n\n    public void doit1() {\n        doit();\n    }\n\n    public void doit2() {\n        doit();\n    }\n\n    public void doit3() {\n        doit();\n    }\n\n    public void doit4() {\n        doit();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":62229,"reputation":21708,"user_id":185022,"accept_rate":81,"display_name":"AZ_"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1391397376,"creation_date":1391397376,"answer_id":21519168,"question_id":421280,"body_markdown":"    private void parseExceptionContents(\r\n          final Exception exception,\r\n          final OutputStream out)\r\n       {\r\n          final StackTraceElement[] stackTrace = exception.getStackTrace();\r\n          int index = 0;\r\n          for (StackTraceElement element : stackTrace)\r\n          {\r\n             final String exceptionMsg =\r\n                  &quot;Exception thrown from &quot; + element.getMethodName()\r\n                + &quot; in class &quot; + element.getClassName() + &quot; [on line number &quot;\r\n                + element.getLineNumber() + &quot; of file &quot; + element.getFileName() + &quot;]&quot;;\r\n             try\r\n             {\r\n                out.write((headerLine + newLine).getBytes());\r\n                out.write((headerTitlePortion + index++ + newLine).getBytes() );\r\n                out.write((headerLine + newLine).getBytes());\r\n                out.write((exceptionMsg + newLine + newLine).getBytes());\r\n                out.write(\r\n                   (&quot;Exception.toString: &quot; + element.toString() + newLine).getBytes());\r\n             }\r\n             catch (IOException ioEx)\r\n             {\r\n                System.err.println(\r\n                     &quot;IOException encountered while trying to write &quot;\r\n                   + &quot;StackTraceElement data to provided OutputStream.\\n&quot;\r\n                   + ioEx.getMessage() );\r\n             }\r\n          }\r\n       }","title":"How do I find the caller of a method using stacktrace or reflection?","body":"<pre><code>private void parseExceptionContents(\n      final Exception exception,\n      final OutputStream out)\n   {\n      final StackTraceElement[] stackTrace = exception.getStackTrace();\n      int index = 0;\n      for (StackTraceElement element : stackTrace)\n      {\n         final String exceptionMsg =\n              \"Exception thrown from \" + element.getMethodName()\n            + \" in class \" + element.getClassName() + \" [on line number \"\n            + element.getLineNumber() + \" of file \" + element.getFileName() + \"]\";\n         try\n         {\n            out.write((headerLine + newLine).getBytes());\n            out.write((headerTitlePortion + index++ + newLine).getBytes() );\n            out.write((headerLine + newLine).getBytes());\n            out.write((exceptionMsg + newLine + newLine).getBytes());\n            out.write(\n               (\"Exception.toString: \" + element.toString() + newLine).getBytes());\n         }\n         catch (IOException ioEx)\n         {\n            System.err.println(\n                 \"IOException encountered while trying to write \"\n               + \"StackTraceElement data to provided OutputStream.\\n\"\n               + ioEx.getMessage() );\n         }\n      }\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7990839,"reputation":6274,"user_id":6028746,"display_name":"Nir Duan"},"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1496824819,"creation_date":1496824819,"answer_id":44407669,"question_id":421280,"body_markdown":"**Oneliner**: \r\n\r\n    Thread.currentThread().getStackTrace()[2].getMethodName()\r\n\r\nNote that you might need to replace the 2 with 1.","title":"How do I find the caller of a method using stacktrace or reflection?","body":"<p><strong>Oneliner</strong>: </p>\n\n<pre><code>Thread.currentThread().getStackTrace()[2].getMethodName()\n</code></pre>\n\n<p>Note that you might need to replace the 2 with 1.</p>\n"},{"tags":[],"owner":{"account_id":1477692,"reputation":46661,"user_id":1393484,"accept_rate":100,"display_name":"Ali Dehghani"},"down_vote_count":0,"up_vote_count":57,"is_accepted":false,"score":57,"last_activity_date":1545151299,"creation_date":1503391347,"answer_id":45812871,"question_id":421280,"body_markdown":"# Java 9 - JEP 259: Stack-Walking API\r\n[JEP 259][1] provides an efficient standard API for stack walking that allows easy filtering of, and lazy access to, the information in stack traces. Before Stack-Walking API, common ways of accessing stack frames were:\r\n\r\n&gt; `Throwable::getStackTrace` and `Thread::getStackTrace` return an array of\r\n&gt; `StackTraceElement` objects, which contain the class name and method\r\n&gt; name of each stack-trace element.\r\n&gt; \r\n&gt; `SecurityManager::getClassContext` is a protected method, which allows a\r\n&gt; `SecurityManager` subclass to access the class context.\r\n&gt;\r\n&gt; JDK-internal `sun.reflect.Reflection::getCallerClass` method which you shouldn&#39;t use anyway\r\n\r\nUsing these APIs are usually inefficient:\r\n\r\n&gt; **These APIs require the VM to eagerly capture a snapshot of the entire\r\n&gt; stack**, and they return information representing the entire stack.\r\n&gt; There is no way to avoid the cost of examining all the frames if the\r\n&gt; caller is only interested in the top few frames on the stack.\r\n\r\nIn order to find the immediate caller&#39;s class, first obtain a `StackWalker`:\r\n\r\n    StackWalker walker = StackWalker\r\n                               .getInstance(StackWalker.Option.RETAIN_CLASS_REFERENCE);\r\n\r\nThen either call the `getCallerClass()`:\r\n\r\n    Class&lt;?&gt; callerClass = walker.getCallerClass();\r\nor `walk` the `StackFrame`s and get the first preceding `StackFrame`:\r\n\r\n    walker.walk(frames -&gt; frames\r\n          .map(StackWalker.StackFrame::getDeclaringClass)\r\n          .skip(1)\r\n          .findFirst());\r\n\r\n[1]: http://openjdk.java.net/jeps/259","title":"How do I find the caller of a method using stacktrace or reflection?","body":"<h1>Java 9 - JEP 259: Stack-Walking API</h1>\n\n<p><a href=\"http://openjdk.java.net/jeps/259\" rel=\"noreferrer\">JEP 259</a> provides an efficient standard API for stack walking that allows easy filtering of, and lazy access to, the information in stack traces. Before Stack-Walking API, common ways of accessing stack frames were:</p>\n\n<blockquote>\n  <p><code>Throwable::getStackTrace</code> and <code>Thread::getStackTrace</code> return an array of\n  <code>StackTraceElement</code> objects, which contain the class name and method\n  name of each stack-trace element.</p>\n  \n  <p><code>SecurityManager::getClassContext</code> is a protected method, which allows a\n  <code>SecurityManager</code> subclass to access the class context.</p>\n  \n  <p>JDK-internal <code>sun.reflect.Reflection::getCallerClass</code> method which you shouldn't use anyway</p>\n</blockquote>\n\n<p>Using these APIs are usually inefficient:</p>\n\n<blockquote>\n  <p><strong>These APIs require the VM to eagerly capture a snapshot of the entire\n  stack</strong>, and they return information representing the entire stack.\n  There is no way to avoid the cost of examining all the frames if the\n  caller is only interested in the top few frames on the stack.</p>\n</blockquote>\n\n<p>In order to find the immediate caller's class, first obtain a <code>StackWalker</code>:</p>\n\n<pre><code>StackWalker walker = StackWalker\n                           .getInstance(StackWalker.Option.RETAIN_CLASS_REFERENCE);\n</code></pre>\n\n<p>Then either call the <code>getCallerClass()</code>:</p>\n\n<pre><code>Class&lt;?&gt; callerClass = walker.getCallerClass();\n</code></pre>\n\n<p>or <code>walk</code> the <code>StackFrame</code>s and get the first preceding <code>StackFrame</code>:</p>\n\n<pre><code>walker.walk(frames -&gt; frames\n      .map(StackWalker.StackFrame::getDeclaringClass)\n      .skip(1)\n      .findFirst());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2520941,"reputation":867,"user_id":2360439,"display_name":"D.A.H"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672962270,"creation_date":1672962270,"answer_id":75025552,"question_id":421280,"body_markdown":"Short answer `ReflectionUtils.getCallingClass(0)`\r\n\r\n\r\nLong answer (code, Groovy)\r\n\r\n    package my\r\n    \r\n    import org.codehaus.groovy.reflection.ReflectionUtils\r\n    import java.lang.reflect.Field\r\n    import java.lang.reflect.Method\r\n    \r\n    trait Reflector {\r\n    \r\n        static String[] fieldNames() {\r\n            List&lt;String&gt; names = []\r\n            Arrays.asList(naturalFields()).forEach { Field fl -&gt; names.add(fl.name) }\r\n            return names.toArray() as String[]\r\n        }\r\n    \r\n        static Field[] naturalFields() {\r\n            return finalClass().getDeclaredFields().findAll { Field fl -&gt; !fl.synthetic }.collect()\r\n        }\r\n    \r\n        static Method[] naturalMethods() {\r\n            return finalClass().getDeclaredMethods().findAll { Method md -&gt; !md.synthetic }.collect()\r\n        }\r\n    \r\n        static Class finalClass() {\r\n            return ReflectionUtils.getCallingClass(0)\r\n        }\r\n    \r\n    }\r\n    \r\n    class Demo implements Reflector {\r\n    \r\n        int archived = 0\r\n        int demo = 100\r\n    \r\n        static void playToo() {\r\n            println finalClass()\r\n        }\r\n    \r\n    }\r\n    \r\n    println Demo.finalClass() // class my.Demo\r\n    println Demo.naturalFields() // [private int my.Demo.archived, private int my.Demo.demo]\r\n    println Demo.fieldNames() // [archived, demo]","title":"How do I find the caller of a method using stacktrace or reflection?","body":"<p>Short answer <code>ReflectionUtils.getCallingClass(0)</code></p>\n<p>Long answer (code, Groovy)</p>\n<pre><code>package my\n\nimport org.codehaus.groovy.reflection.ReflectionUtils\nimport java.lang.reflect.Field\nimport java.lang.reflect.Method\n\ntrait Reflector {\n\n    static String[] fieldNames() {\n        List&lt;String&gt; names = []\n        Arrays.asList(naturalFields()).forEach { Field fl -&gt; names.add(fl.name) }\n        return names.toArray() as String[]\n    }\n\n    static Field[] naturalFields() {\n        return finalClass().getDeclaredFields().findAll { Field fl -&gt; !fl.synthetic }.collect()\n    }\n\n    static Method[] naturalMethods() {\n        return finalClass().getDeclaredMethods().findAll { Method md -&gt; !md.synthetic }.collect()\n    }\n\n    static Class finalClass() {\n        return ReflectionUtils.getCallingClass(0)\n    }\n\n}\n\nclass Demo implements Reflector {\n\n    int archived = 0\n    int demo = 100\n\n    static void playToo() {\n        println finalClass()\n    }\n\n}\n\nprintln Demo.finalClass() // class my.Demo\nprintln Demo.naturalFields() // [private int my.Demo.archived, private int my.Demo.demo]\nprintln Demo.fieldNames() // [archived, demo]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5530214,"reputation":2694,"user_id":4722577,"accept_rate":0,"display_name":"CAMD_3441"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683293158,"creation_date":1683293158,"answer_id":76182706,"question_id":421280,"body_markdown":"Yes you can use the current threads stack trace.\r\n\r\nHere&#39;s some sample code snippet that should get you not only the method name of the calling thread but also the class name and line number:\r\n\r\n    Thread thread = Thread.currentThread();\r\n    \r\n    StackTraceElement[] stackTrace = thread.getStackTrace();\r\n    \r\n    for (int i = 0; i &lt; stackTrace.length; i++) {\r\n         System.out.println(stackTrace[i].getClassName() + &quot; &quot; + stackTrace[i].getMethodName() + &quot; &quot; + stackTrace[i].getLineNumber());\r\n    }","title":"How do I find the caller of a method using stacktrace or reflection?","body":"<p>Yes you can use the current threads stack trace.</p>\n<p>Here's some sample code snippet that should get you not only the method name of the calling thread but also the class name and line number:</p>\n<pre><code>Thread thread = Thread.currentThread();\n\nStackTraceElement[] stackTrace = thread.getStackTrace();\n\nfor (int i = 0; i &lt; stackTrace.length; i++) {\n     System.out.println(stackTrace[i].getClassName() + &quot; &quot; + stackTrace[i].getMethodName() + &quot; &quot; + stackTrace[i].getLineNumber());\n}\n</code></pre>\n"}],"owner":{"account_id":21219,"reputation":20740,"user_id":51402,"accept_rate":53,"display_name":"Sathish"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":325558,"favorite_count":0,"down_vote_count":0,"up_vote_count":442,"accepted_answer_id":421338,"answer_count":14,"score":442,"last_activity_date":1683293158,"creation_date":1231350594,"question_id":421280,"body_markdown":"I need to find the caller of a method. Is it possible using stacktrace or reflection?","title":"How do I find the caller of a method using stacktrace or reflection?","body":"<p>I need to find the caller of a method. Is it possible using stacktrace or reflection?</p>\n"},{"tags":["java","ssl","graalvm"],"comments":[{"owner":{"account_id":10513022,"reputation":3086,"user_id":7748072,"display_name":"Eug&#232;ne Adell"},"score":0,"creation_date":1683190431,"post_id":74331122,"comment_id":134329444,"body_markdown":"The output shows the server closes the connection, and the client answers with user_canceled. Give the server a chance to not be the closure initiator by using persistent connections : use HTTP 1.1 or Connection: Keep-Alive header.","body":"The output shows the server closes the connection, and the client answers with user_canceled. Give the server a chance to not be the closure initiator by using persistent connections : use HTTP 1.1 or Connection: Keep-Alive header."},{"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":2,"creation_date":1683199905,"post_id":74331122,"comment_id":134331620,"body_markdown":"Might be [this known bug](https://github.com/openjdk/jdk/pull/7664) which should be fixed in current versions of OpenJDK. Maybe you need to upgrade.","body":"Might be <a href=\"https://github.com/openjdk/jdk/pull/7664\" rel=\"nofollow noreferrer\">this known bug</a> which should be fixed in current versions of OpenJDK. Maybe you need to upgrade."},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1683204079,"post_id":74331122,"comment_id":134332686,"body_markdown":"@Eug&#232;neAdell a persistent connection is not an option here. The question is how to close gracefully, not how to avoid closing.","body":"@Eug&#232;neAdell a persistent connection is not an option here. The question is how to close gracefully, not how to avoid closing."},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1683204295,"post_id":74331122,"comment_id":134332753,"body_markdown":"@SteffenUllrich it sounds like the known bug except that I don&#39;t think our connection is half closed. Good suggestion. We are on the latest 2.x.x Quarkus version by now and still have the issue, so I need to check what version includes the fix.","body":"@SteffenUllrich it sounds like the known bug except that I don&#39;t think our connection is half closed. Good suggestion. We are on the latest 2.x.x Quarkus version by now and still have the issue, so I need to check what version includes the fix."},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1683204901,"post_id":74331122,"comment_id":134332920,"body_markdown":"@SteffenUllrich we are on Java Version 17.0.7+7 and the fix should have been backported to 17.0.6. In other words we should have the fix already.","body":"@SteffenUllrich we are on Java Version 17.0.7+7 and the fix should have been backported to 17.0.6. In other words we should have the fix already."},{"owner":{"account_id":10513022,"reputation":3086,"user_id":7748072,"display_name":"Eug&#232;ne Adell"},"score":0,"creation_date":1683207963,"post_id":74331122,"comment_id":134333852,"body_markdown":"I meant : find the way to let the client be the closure initiator instead of the the server. I suppose it&#39;s either HTTP 1.0 or Connection: Close header use here, that is responsible of what the log is showing. Change to persistent connection in order to be able to call the client&#39;s close, not to reuse the connection itself. More clear ? Where did I say we would avoid closing ?","body":"I meant : find the way to let the client be the closure initiator instead of the the server. I suppose it&#39;s either HTTP 1.0 or Connection: Close header use here, that is responsible of what the log is showing. Change to persistent connection in order to be able to call the client&#39;s close, not to reuse the connection itself. More clear ? Where did I say we would avoid closing ?"},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1683208834,"post_id":74331122,"comment_id":134334110,"body_markdown":"@Eug&#232;neAdell in our case we do want to close the connection here. The client is not a web browser and does not support keep-alive. If we don&#39;t close nothing happens (we waited a minute, see question). We need to close, but gracefully.","body":"@Eug&#232;neAdell in our case we do want to close the connection here. The client is not a web browser and does not support keep-alive. If we don&#39;t close nothing happens (we waited a minute, see question). We need to close, but gracefully."},{"owner":{"account_id":10513022,"reputation":3086,"user_id":7748072,"display_name":"Eug&#232;ne Adell"},"score":1,"creation_date":1683211929,"post_id":74331122,"comment_id":134334959,"body_markdown":"Please read your debug trace carefully, it shows the server is closing, then waiting for the client to close (which is not happening cleanly due to a bug probably). You should try to get the opposite behavior by letting the client read the server answer, close, then wait for the server closing. Only way to do that in HTTP (and you are using HTTP right ?), is to use a persistent connection, even if you just send one single request and close after it. We don&#39;t care if your client doesn&#39;t support keep-alive, we are just faking it to let the server have a chance to not close after answering. GL.","body":"Please read your debug trace carefully, it shows the server is closing, then waiting for the client to close (which is not happening cleanly due to a bug probably). You should try to get the opposite behavior by letting the client read the server answer, close, then wait for the server closing. Only way to do that in HTTP (and you are using HTTP right ?), is to use a persistent connection, even if you just send one single request and close after it. We don&#39;t care if your client doesn&#39;t support keep-alive, we are just faking it to let the server have a chance to not close after answering. GL."},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1683273225,"post_id":74331122,"comment_id":134344565,"body_markdown":"@Eug&#232;neAdell it sounds as the opposite of what we want. The current &quot;Connection: Close&quot; header tells the client that it should close. If we use keep-alive the client will not &quot;read the answer, close and wait for the server to close&quot;. That is what it should do now. With keep-alive it should &quot;read the answer, then keep the connection open for future use&quot;, right? We don&#39;t want that. We want the server to be able to close the connection, preventing resource leaks, regardless of what the client is doing.","body":"@Eug&#232;neAdell it sounds as the opposite of what we want. The current &quot;Connection: Close&quot; header tells the client that it should close. If we use keep-alive the client will not &quot;read the answer, close and wait for the server to close&quot;. That is what it should do now. With keep-alive it should &quot;read the answer, then keep the connection open for future use&quot;, right? We don&#39;t want that. We want the server to be able to close the connection, preventing resource leaks, regardless of what the client is doing."},{"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":1,"creation_date":1683273563,"post_id":74331122,"comment_id":134344620,"body_markdown":"@ewramner: Eug&#232;neAdell is talking about the header send from the client to the server, while you talk about the header send from server to client. If the client says that it does not support keep-alive (i.e. explicit Connection: close or default when using HTTP/1.0) then the server will close the connection after the response is done. If the client announces support for keep-alive (default with HTTP/1.1 or with explicit Connection: keep-alive) then the server __might__ keep the connection open in the hope for another request so that close will be initiated by the client.","body":"@ewramner: Eug&#232;neAdell is talking about the header send from the client to the server, while you talk about the header send from server to client. If the client says that it does not support keep-alive (i.e. explicit Connection: close or default when using HTTP/1.0) then the server will close the connection after the response is done. If the client announces support for keep-alive (default with HTTP/1.1 or with explicit Connection: keep-alive) then the server <b>might</b> keep the connection open in the hope for another request so that close will be initiated by the client."},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1683283804,"post_id":74331122,"comment_id":134346624,"body_markdown":"@SteffenUllrich I thought he meant the header from the server, which we can set. We have no control over the client and the client is sending &quot;Connection: Close&quot;.","body":"@SteffenUllrich I thought he meant the header from the server, which we can set. We have no control over the client and the client is sending &quot;Connection: Close&quot;."},{"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":0,"creation_date":1683284173,"post_id":74331122,"comment_id":134346688,"body_markdown":"*&quot;We have no control over the client&quot;* - this is unexpected. Because in the question you say *&quot;Our application creates a SSLSocket using a socket factory and connects it&quot;* which I would assume to refer to the client side (client connects, server accepts)","body":"<i>&quot;We have no control over the client&quot;</i> - this is unexpected. Because in the question you say <i>&quot;Our application creates a SSLSocket using a socket factory and connects it&quot;</i> which I would assume to refer to the client side (client connects, server accepts)"},{"owner":{"account_id":10513022,"reputation":3086,"user_id":7748072,"display_name":"Eug&#232;ne Adell"},"score":0,"creation_date":1683285265,"post_id":74331122,"comment_id":134346891,"body_markdown":"@SteffenUllrich you perfectly reformulated the idea, thanks, maybe it&#39;s better explained now.","body":"@SteffenUllrich you perfectly reformulated the idea, thanks, maybe it&#39;s better explained now."},{"owner":{"account_id":10513022,"reputation":3086,"user_id":7748072,"display_name":"Eug&#232;ne Adell"},"score":0,"creation_date":1683285523,"post_id":74331122,"comment_id":134346936,"body_markdown":"@ewramner We are on a dev forum and most of questions (not all) are related to coding. Do you have any code to show ?","body":"@ewramner We are on a dev forum and most of questions (not all) are related to coding. Do you have any code to show ?"},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1683292267,"post_id":74331122,"comment_id":134348484,"body_markdown":"@Eug&#232;neAdell you are completely correct, I&#39;m confused. We have this problem both when we are acting as client, calling the other server, and when we are acting as server and they call us. As client, we could ask for a keep-alive, but (while I can try) it will make no difference, because these servers do not support keep-alives and will close anyway. We need to gracefully close the socket on the SSL layer somehow regardless of what happens on the higher levels.","body":"@Eug&#232;neAdell you are completely correct, I&#39;m confused. We have this problem both when we are acting as client, calling the other server, and when we are acting as server and they call us. As client, we could ask for a keep-alive, but (while I can try) it will make no difference, because these servers do not support keep-alives and will close anyway. We need to gracefully close the socket on the SSL layer somehow regardless of what happens on the higher levels."},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1683293132,"post_id":74331122,"comment_id":134348699,"body_markdown":"@Eug&#232;neAdell I have added some code. Unfortunately, the interesting part happens inside SSLSocket as far as I can tell. The request is done and the only thing left is closing the connection without errors.","body":"@Eug&#232;neAdell I have added some code. Unfortunately, the interesting part happens inside SSLSocket as far as I can tell. The request is done and the only thing left is closing the connection without errors."},{"owner":{"account_id":10513022,"reputation":3086,"user_id":7748072,"display_name":"Eug&#232;ne Adell"},"score":0,"creation_date":1683310102,"post_id":74331122,"comment_id":134352737,"body_markdown":"Thanks for the edits. If we are sure the server doesn&#39;t support connection persistence then the word **might** above now means it&#39;s not the case. If you implemented the server code, maybe you can change that. What I suggest, but I&#39;m unsure you can do that in your case, is to switch to another JSSE Provider (e.g. IBM JSSE2) and see how it behaves (probably not better). Moving to an OpenSSL based JSSE seems possible but not a 2 lines answer. @SteffenUllrich did you try that ?","body":"Thanks for the edits. If we are sure the server doesn&#39;t support connection persistence then the word <b>might</b> above now means it&#39;s not the case. If you implemented the server code, maybe you can change that. What I suggest, but I&#39;m unsure you can do that in your case, is to switch to another JSSE Provider (e.g. IBM JSSE2) and see how it behaves (probably not better). Moving to an OpenSSL based JSSE seems possible but not a 2 lines answer. @SteffenUllrich did you try that ?"},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1683368679,"post_id":74331122,"comment_id":134358554,"body_markdown":"Changing JSSE provider might help, but please note that this is a native Quarkus application. I don&#39;t have a clue how that works with GraalVM in native mode, if it is even possible.","body":"Changing JSSE provider might help, but please note that this is a native Quarkus application. I don&#39;t have a clue how that works with GraalVM in native mode, if it is even possible."},{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1683564276,"post_id":74331122,"comment_id":134382457,"body_markdown":"@SteffenUllrich while it didn&#39;t help, I think your bug is the closest to a solution I&#39;ve seen. If you make it an answer before the time runs out I&#39;ll award you the bounty.","body":"@SteffenUllrich while it didn&#39;t help, I think your bug is the closest to a solution I&#39;ve seen. If you make it an answer before the time runs out I&#39;ll award you the bounty."}],"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"comment_count":19,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":0,"score":5,"last_activity_date":1683293063,"creation_date":1667678859,"question_id":74331122,"body_markdown":"We have a Java 17 Quarkus application compiled to a native executable (ubi-quarkus-native-image:22.2-java17), running in Kubernetes. It is connecting to an old integration server with SSL, making a HTTP request. Our application creates a SSLSocket using a socket factory and connects it; the request is successful. When it is done, we call SSLSocket#close. This works too, but on the other side they log this:\r\n\r\n    12:51:16 : ssl_debug(58): Shutting down SSL layer...\r\n    12:51:16 : ssl_debug(58): Sending alert: Alert Warning: close notify\r\n    12:51:16 : ssl_debug(58): Read 15328 bytes in 3 records, 15214 bytes net, 5071 average.\r\n    12:51:16 : ssl_debug(58): Wrote 175 bytes in 1 records, 152 bytes net, 152 average.\r\n    12:51:16 : ssl_debug(58): Closing transport...\r\n    12:51:16 : ssl_debug(58): Waiting on peer close notify...\r\n    12:51:16 : ssl_debug(58): Received alert message: Alert Warning: user canceled\r\n    12:51:16 : ssl_debug(58): Exception reading SSL message: iaik.security.ssl.SSLException: Peer sent alert: Alert Warning: user canceled\r\n    12:51:16 : ssl_debug(58): Closing transport...\r\n    12:51:16 : ssl_debug(58): Transport closed.\r\n\r\nAs far as I can understand they should get a close notify alert from us and we should get a close notify alert from them. Unfortunately our side sends a user canceled alert (code 90). It is only a warning, but they treat it as an error and throw away the entire request, even though they have answered.\r\n\r\nI have found a way to circumvent this. If I call shutdownOutput on the socket before close, things work. However, according to [properly close SSLSocket][1] this is wrong and it really feels like a dirty workaround.\r\n\r\nI can&#39;t get the other vendor to fix the error handling in their application. Is there a nicer way to avoid sending the user canceled alert? Is it a bug in the SSL implementation, or is it expected?\r\n\r\nThe socket has been flushed before close in both cases and reading from it (making sure there is no pending inbound data) makes no difference. Waiting for up to a minute before closing makes no difference either.\r\n\r\nEDIT: it appears other servers fail with the workaround and require the final alerts to close cleanly, so it would be really nice to solve this.\r\n\r\nEDIT: the code here is trivial, but I will add it as requested.\r\n\r\n    try (var socket = connect(url, httpChannel)) {\r\n       // Successfully make request here\r\n       // The workaround below fixes the problem\r\n       //socket.shutdownOutput();\r\n    } // close called on SSLSocket here\r\n\r\nThe code in connect is (simplified):\r\n\r\n    var plainSocket = new Socket();\r\n    plainSocket.connect(new InetSocketAddress(hostName, port), (int) connectionTimeout.toMillis());\r\n    plainSocket.setSoTimeout((int) connectionTimeout.toMillis());\r\n    var secureSocket = (SSLSocket) getSocketFactory(keyManagers, trustManagers, sslContextProtocol).createSocket(plainSocket, hostName, port, true);\r\n    var params = secureSocket.getSSLParameters();\r\n    params.setEndpointIdentificationAlgorithm(&quot;HTTPS&quot;);\r\n    secureSocket.setSSLParameters(params); // Optional but usually on\r\n    secureSocket.setUseClientMode(true);\r\n    secureSocket.setSoTimeout((int) readTimeout.toMillis());\r\n    secureSocket.startHandshake(); // Optional, but usually on\r\n    return secureSocket;\r\n\r\nIn the other end (where we act as server), we do a serverSocket#accept and call close on the request socket in a finally block, optionally with a similar socket#shutdownOutput first to work around the problem.\r\n\r\n  [1]: https://stackoverflow.com/q/6424998/2612030","title":"How to safely prevent graceful close of SSLSocket from sending &quot;user canceled&quot; alert","body":"<p>We have a Java 17 Quarkus application compiled to a native executable (ubi-quarkus-native-image:22.2-java17), running in Kubernetes. It is connecting to an old integration server with SSL, making a HTTP request. Our application creates a SSLSocket using a socket factory and connects it; the request is successful. When it is done, we call SSLSocket#close. This works too, but on the other side they log this:</p>\n<pre><code>12:51:16 : ssl_debug(58): Shutting down SSL layer...\n12:51:16 : ssl_debug(58): Sending alert: Alert Warning: close notify\n12:51:16 : ssl_debug(58): Read 15328 bytes in 3 records, 15214 bytes net, 5071 average.\n12:51:16 : ssl_debug(58): Wrote 175 bytes in 1 records, 152 bytes net, 152 average.\n12:51:16 : ssl_debug(58): Closing transport...\n12:51:16 : ssl_debug(58): Waiting on peer close notify...\n12:51:16 : ssl_debug(58): Received alert message: Alert Warning: user canceled\n12:51:16 : ssl_debug(58): Exception reading SSL message: iaik.security.ssl.SSLException: Peer sent alert: Alert Warning: user canceled\n12:51:16 : ssl_debug(58): Closing transport...\n12:51:16 : ssl_debug(58): Transport closed.\n</code></pre>\n<p>As far as I can understand they should get a close notify alert from us and we should get a close notify alert from them. Unfortunately our side sends a user canceled alert (code 90). It is only a warning, but they treat it as an error and throw away the entire request, even though they have answered.</p>\n<p>I have found a way to circumvent this. If I call shutdownOutput on the socket before close, things work. However, according to <a href=\"https://stackoverflow.com/q/6424998/2612030\">properly close SSLSocket</a> this is wrong and it really feels like a dirty workaround.</p>\n<p>I can't get the other vendor to fix the error handling in their application. Is there a nicer way to avoid sending the user canceled alert? Is it a bug in the SSL implementation, or is it expected?</p>\n<p>The socket has been flushed before close in both cases and reading from it (making sure there is no pending inbound data) makes no difference. Waiting for up to a minute before closing makes no difference either.</p>\n<p>EDIT: it appears other servers fail with the workaround and require the final alerts to close cleanly, so it would be really nice to solve this.</p>\n<p>EDIT: the code here is trivial, but I will add it as requested.</p>\n<pre><code>try (var socket = connect(url, httpChannel)) {\n   // Successfully make request here\n   // The workaround below fixes the problem\n   //socket.shutdownOutput();\n} // close called on SSLSocket here\n</code></pre>\n<p>The code in connect is (simplified):</p>\n<pre><code>var plainSocket = new Socket();\nplainSocket.connect(new InetSocketAddress(hostName, port), (int) connectionTimeout.toMillis());\nplainSocket.setSoTimeout((int) connectionTimeout.toMillis());\nvar secureSocket = (SSLSocket) getSocketFactory(keyManagers, trustManagers, sslContextProtocol).createSocket(plainSocket, hostName, port, true);\nvar params = secureSocket.getSSLParameters();\nparams.setEndpointIdentificationAlgorithm(&quot;HTTPS&quot;);\nsecureSocket.setSSLParameters(params); // Optional but usually on\nsecureSocket.setUseClientMode(true);\nsecureSocket.setSoTimeout((int) readTimeout.toMillis());\nsecureSocket.startHandshake(); // Optional, but usually on\nreturn secureSocket;\n</code></pre>\n<p>In the other end (where we act as server), we do a serverSocket#accept and call close on the request socket in a finally block, optionally with a similar socket#shutdownOutput first to work around the problem.</p>\n"},{"tags":["java","spring-boot","spring-boot-test","testcontainers-junit5"],"owner":{"account_id":28517266,"reputation":1,"user_id":21826463,"display_name":"Tyler"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683292863,"creation_date":1683292863,"question_id":76182664,"body_markdown":"I am new to integration testing and I am trying to run a suite of tests in a spring boot project using PostgreSQLContainers from the Testcontainers library.\r\n\r\nThe structure of the suite looks like this:\r\n\r\n- Suite\r\n  - @SpringBootTest First Class\r\n    - @Test method\r\n    - @Test method\r\n    - etc.\r\n  - @SpringBootTest Second Class\r\n    - @Test method\r\n    - @Test method\r\n    - etc.\r\n\r\nI want to be able to spin up a new, empty container for each class, fill it with a .sql script, run some tests and tear down the container. The issue I am experiencing is that when I try to make the container for the second class the data from the first class is still in the container and I get sql errors because it&#39;s trying to re use primary keys. \r\n\r\nI am able to run each class individually and the containers work as expected because they are isolated. As soon as I try to run them together in the suite the data seems like it is persisting between the containers.\r\n\r\nThe general structure of each class is like this: \r\n```\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest\r\n@AutoConfigureTestDatabase\r\n@TestInstance(TestInstance.Lifecycle.PER_CLASS)\r\n@Testcontainers\r\npublic class TestClass1 {\r\n    @Container\r\n    private static PostgreSQLContainer postgresqlContainer = new PostgreSQLContainer()\r\n            .withDatabaseName(&quot;foo&quot;)\r\n            .withUsername(&quot;foo&quot;)\r\n            .withPassword(&quot;secret&quot;);\r\n\r\n    @Test\r\n    @Sql(&quot;classpath:sql/script.sql&quot;)\r\n    void testMethod1() {\r\n        ...\r\n    }    \r\n    \r\n    @Test\r\n    void testMethod2() {\r\n        ...\r\n    }\r\n}\r\n```\r\n\r\nLike I said, I am new to Testcontainers so I am wondering if I am using it wrong or if it is suited to doing these types of suites. \r\n\r\n","title":"Using a new PostgreSQLContainer test container for each class in a test suite","body":"<p>I am new to integration testing and I am trying to run a suite of tests in a spring boot project using PostgreSQLContainers from the Testcontainers library.</p>\n<p>The structure of the suite looks like this:</p>\n<ul>\n<li>Suite\n<ul>\n<li>@SpringBootTest First Class\n<ul>\n<li>@Test method</li>\n<li>@Test method</li>\n<li>etc.</li>\n</ul>\n</li>\n<li>@SpringBootTest Second Class\n<ul>\n<li>@Test method</li>\n<li>@Test method</li>\n<li>etc.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>I want to be able to spin up a new, empty container for each class, fill it with a .sql script, run some tests and tear down the container. The issue I am experiencing is that when I try to make the container for the second class the data from the first class is still in the container and I get sql errors because it's trying to re use primary keys.</p>\n<p>I am able to run each class individually and the containers work as expected because they are isolated. As soon as I try to run them together in the suite the data seems like it is persisting between the containers.</p>\n<p>The general structure of each class is like this:</p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest\n@AutoConfigureTestDatabase\n@TestInstance(TestInstance.Lifecycle.PER_CLASS)\n@Testcontainers\npublic class TestClass1 {\n    @Container\n    private static PostgreSQLContainer postgresqlContainer = new PostgreSQLContainer()\n            .withDatabaseName(&quot;foo&quot;)\n            .withUsername(&quot;foo&quot;)\n            .withPassword(&quot;secret&quot;);\n\n    @Test\n    @Sql(&quot;classpath:sql/script.sql&quot;)\n    void testMethod1() {\n        ...\n    }    \n    \n    @Test\n    void testMethod2() {\n        ...\n    }\n}\n</code></pre>\n<p>Like I said, I am new to Testcontainers so I am wondering if I am using it wrong or if it is suited to doing these types of suites.</p>\n"},{"tags":["java","matrix"],"answers":[{"tags":[],"owner":{"account_id":2785683,"reputation":2653,"user_id":2397162,"accept_rate":61,"display_name":"niceman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1467229418,"creation_date":1467229418,"answer_id":38108748,"question_id":38107598,"body_markdown":"## First Step ##\r\nGussian Reduction is all about Row operations so it&#39;s better to implement them first, For this we only need a function that takes the matrix, Ri and Rj and a , it adds a*Ri to Rj .  \r\n\r\nOther Row operations are : switching two rows and multiplying a row by a number, I&#39;ll explain latter why we don&#39;t need them here :).  \r\n## Second Step ##\r\nNow we want to determine the &quot;pivot element&quot; , assume the matrix `A` is of n*m size, at the first iteration the pivot element is A[0][0], on the second it is A[1][1] .  \r\n\r\nIn short it is `A[i][i]`.\r\n\r\n## Third Step ##\r\n\r\nNow we want to change every row after `i` So that `A[r][i]` is zero for every `i+1&lt;=r&lt;n`\r\n\r\nWe change row `r` so that `A[r]+=(-A[r][i]/A[i][i])*A[i]`, we can call the function from step 1 to do this.  \r\n\r\n## Fourth Step ##\r\nWe repeat step two and three for every `i&lt;n-1 &amp;&amp; i&lt;m` and we&#39;re finished.  \r\n\r\nThe variable `i` should be smaller than `n-1` not n because we want to change every row `r` that is `i+1` or more , the row `i=n-1` doesn&#39;t have any rows after it.  \r\n\r\nIt should be smaller than `m` because we are also using it as a column number.  \r\n\r\n## Why only one row operation is enough ##\r\nThe others are used for making the pivot element `1` because 1 is simpler for humans.  \r\n\r\nBut computers don&#39;t have problems with numbers other than 1, actually trying to make it `1` will instead hurt performance as it requires additional computations (especially switching Rows).  \r\n## Performance step ##\r\nIn Step 3 we have `A[r]+=(-A[r][i]/A[i][i])*A[i]`, this will work even when `A[r][i]` is already zero but because the previous equation is implemented via function call that has `O(n)` complexity, we can avoid calling it altogether by checking if `A[r][i]` is zero, if it is we `continue` the loop in the Fourth step(we can also make the check inside the function that does this operation which is better in my opinion) .  \r\n\r\nI&#39;ll leave the implementation for you, I suggest the function of the first step to have this signature:  \r\n\r\n    void addRowToRow(double[][] a,int i,int j,int alpha)\r\nIt should be called in step 3 like this :  \r\n\r\n    addRowToRow(a,i,r,-(a[r][i]/a[i][i]));\r\n## Note ##\r\nI assumed that you only need gaussian reduction and that you don&#39;t want an equation solver, anyway the previous steps can be the `reduce(double[][] a)` function which an equation solver can call.","title":"Gaussian elimination code shows wrong result","body":"<h2>First Step</h2>\n\n<p>Gussian Reduction is all about Row operations so it's better to implement them first, For this we only need a function that takes the matrix, Ri and Rj and a , it adds a*Ri to Rj .  </p>\n\n<p>Other Row operations are : switching two rows and multiplying a row by a number, I'll explain latter why we don't need them here :).  </p>\n\n<h2>Second Step</h2>\n\n<p>Now we want to determine the \"pivot element\" , assume the matrix <code>A</code> is of n*m size, at the first iteration the pivot element is A[0][0], on the second it is A[1][1] .  </p>\n\n<p>In short it is <code>A[i][i]</code>.</p>\n\n<h2>Third Step</h2>\n\n<p>Now we want to change every row after <code>i</code> So that <code>A[r][i]</code> is zero for every <code>i+1&lt;=r&lt;n</code></p>\n\n<p>We change row <code>r</code> so that <code>A[r]+=(-A[r][i]/A[i][i])*A[i]</code>, we can call the function from step 1 to do this.  </p>\n\n<h2>Fourth Step</h2>\n\n<p>We repeat step two and three for every <code>i&lt;n-1 &amp;&amp; i&lt;m</code> and we're finished.  </p>\n\n<p>The variable <code>i</code> should be smaller than <code>n-1</code> not n because we want to change every row <code>r</code> that is <code>i+1</code> or more , the row <code>i=n-1</code> doesn't have any rows after it.  </p>\n\n<p>It should be smaller than <code>m</code> because we are also using it as a column number.  </p>\n\n<h2>Why only one row operation is enough</h2>\n\n<p>The others are used for making the pivot element <code>1</code> because 1 is simpler for humans.  </p>\n\n<p>But computers don't have problems with numbers other than 1, actually trying to make it <code>1</code> will instead hurt performance as it requires additional computations (especially switching Rows).  </p>\n\n<h2>Performance step</h2>\n\n<p>In Step 3 we have <code>A[r]+=(-A[r][i]/A[i][i])*A[i]</code>, this will work even when <code>A[r][i]</code> is already zero but because the previous equation is implemented via function call that has <code>O(n)</code> complexity, we can avoid calling it altogether by checking if <code>A[r][i]</code> is zero, if it is we <code>continue</code> the loop in the Fourth step(we can also make the check inside the function that does this operation which is better in my opinion) .  </p>\n\n<p>I'll leave the implementation for you, I suggest the function of the first step to have this signature:  </p>\n\n<pre><code>void addRowToRow(double[][] a,int i,int j,int alpha)\n</code></pre>\n\n<p>It should be called in step 3 like this :  </p>\n\n<pre><code>addRowToRow(a,i,r,-(a[r][i]/a[i][i]));\n</code></pre>\n\n<h2>Note</h2>\n\n<p>I assumed that you only need gaussian reduction and that you don't want an equation solver, anyway the previous steps can be the <code>reduce(double[][] a)</code> function which an equation solver can call.</p>\n"}],"owner":{"account_id":8729167,"reputation":1,"user_id":6529850,"display_name":"jms"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":229,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683292803,"creation_date":1467225324,"question_id":38107598,"body_markdown":"I made this code for Gauss matrix, however the code does not show what it should.\r\n\r\nI used `[[0,0,1,2],[2,3,0,-2],[3,3,6,-9]]` as a matrix A, it sorts it fine but when it comes to Gauss I get `[[3.0,3.0,6.0,-9.0],[3.0,5.25,-3.0,0.0],[0,0,1.0,2.0]]`, when the correct answer is `[[3.0,3.0,6.0,-9.0],[0.0,-1.5,6.0,-6.0],[0,0,1.0,2.0]]`.\r\n\r\nWhat am I doing wrong?\r\n\r\n    public static double[][] sortMatrix(double[][] matrix)\r\n    {\r\n        int m=matrix.length;\r\n        int n=matrix[0].length;\r\n        double[] temp=new double[n];\r\n        int a=0;\r\n        for(int fixedCol=a;fixedCol&lt;n;fixedCol++)//Working and fixing the column only.\r\n        {\r\n            for(int fixedRow=a;fixedRow&lt;m;fixedRow++)//First process.\r\n            {\r\n                //Second process.\r\n                for(int i=fixedRow;i&lt;m;i++)//Checking if the column element is bigger.\r\n                {\r\n                    if(matrix[fixedRow][fixedCol]&lt;matrix[i][fixedCol])\r\n                    {\r\n                        for(int j=0;j&lt;n;j++)\r\n                        {\r\n                            temp[j]=matrix[fixedRow][j];\r\n                            matrix[fixedRow][j]=matrix[i][j];\r\n                            matrix[i][j]=temp[j];//Until now, changes the row and since fixed row and column points to a value, nothing to change.\r\n                        }\r\n                    }\r\n                }//End of second process.\r\n            }\r\n            for(int fixedRow=a;fixedRow&lt;m;fixedRow++)\r\n            {\r\n                if(matrix[fixedRow][fixedCol]!=0)\r\n                {\r\n                    a=a+1;\r\n                }\r\n                else\r\n                {\r\n                    break;\r\n                }\r\n            }\r\n        }//End of first process\r\n        return matrix;\r\n    }\r\n    \r\n    //Gauss Matrix\r\n    \r\n    public static double[][] gauss(double[][] matrix)\r\n    {\r\n        double tempPrincipal,tempSecondary;\r\n        int m=matrix.length;\r\n        int n=matrix[0].length;\r\n        sortMatrix(matrix);\r\n        \r\n        for(int fixedRowPrincipal=0;fixedRowPrincipal&lt;(m-1);fixedRowPrincipal++)\r\n        {\r\n            for(int fixedColPrincipal=0;fixedColPrincipal&lt;n;fixedColPrincipal++)//First process: Finding the first element different from 0.\r\n            {\r\n                if(matrix[fixedRowPrincipal][fixedColPrincipal]!=0)//Found the first element different from 0.\r\n                {\r\n                    if(matrix[fixedRowPrincipal+1][fixedColPrincipal]!=0)//Conditioning the element below isn&#180;t 0.\r\n                    {\r\n                        tempPrincipal=matrix[fixedRowPrincipal][fixedColPrincipal];//Assigning fixed values for the elements.\r\n                        tempSecondary=matrix[fixedRowPrincipal+1][fixedColPrincipal];\r\n                        for(int j=(fixedColPrincipal);j&lt;n;j++)\r\n                        {\r\n                            if(tempPrincipal&lt;0)\r\n                            {\r\n                                if(tempSecondary&lt;0)\r\n                                {\r\n                                    matrix[fixedRowPrincipal+1][j]=matrix[fixedRowPrincipal][j]+(-1.0)*matrix[fixedRowPrincipal+1][j]*(tempPrincipal/tempSecondary);\r\n                                }\r\n                                else\r\n                                {\r\n                                    matrix[fixedRowPrincipal+1][j]=matrix[fixedRowPrincipal][j]+(1.0)*matrix[fixedRowPrincipal+1][j]*(tempPrincipal/tempSecondary);\r\n                                }\r\n                            }\r\n                            else\r\n                            {\r\n                                if(tempSecondary&lt;0)\r\n                                {\r\n                                    matrix[fixedRowPrincipal+1][j]=matrix[fixedRowPrincipal][j]+(1.0)*matrix[fixedRowPrincipal+1][j]*(tempPrincipal/tempSecondary);\r\n                                }\r\n                                else\r\n                                {\r\n                                    matrix[fixedRowPrincipal+1][j]=matrix[fixedRowPrincipal][j]-(matrix[fixedRowPrincipal+1][j]/tempSecondary)*tempPrincipal;\r\n                                }\r\n                            }\r\n                            matrix[fixedRowPrincipal+1][j]=matrix[fixedRowPrincipal][j]+(-1)*matrix[fixedRowPrincipal+1][j]*(tempPrincipal/tempSecondary);\r\n                        }\r\n                        sortMatrix(matrix);\r\n                        fixedRowPrincipal=0;\r\n                        break;\r\n                    }\r\n                    else\r\n                    {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return matrix;\r\n    }\r\n","title":"Gaussian elimination code shows wrong result","body":"<p>I made this code for Gauss matrix, however the code does not show what it should.</p>\n<p>I used <code>[[0,0,1,2],[2,3,0,-2],[3,3,6,-9]]</code> as a matrix A, it sorts it fine but when it comes to Gauss I get <code>[[3.0,3.0,6.0,-9.0],[3.0,5.25,-3.0,0.0],[0,0,1.0,2.0]]</code>, when the correct answer is <code>[[3.0,3.0,6.0,-9.0],[0.0,-1.5,6.0,-6.0],[0,0,1.0,2.0]]</code>.</p>\n<p>What am I doing wrong?</p>\n<pre><code>public static double[][] sortMatrix(double[][] matrix)\n{\n    int m=matrix.length;\n    int n=matrix[0].length;\n    double[] temp=new double[n];\n    int a=0;\n    for(int fixedCol=a;fixedCol&lt;n;fixedCol++)//Working and fixing the column only.\n    {\n        for(int fixedRow=a;fixedRow&lt;m;fixedRow++)//First process.\n        {\n            //Second process.\n            for(int i=fixedRow;i&lt;m;i++)//Checking if the column element is bigger.\n            {\n                if(matrix[fixedRow][fixedCol]&lt;matrix[i][fixedCol])\n                {\n                    for(int j=0;j&lt;n;j++)\n                    {\n                        temp[j]=matrix[fixedRow][j];\n                        matrix[fixedRow][j]=matrix[i][j];\n                        matrix[i][j]=temp[j];//Until now, changes the row and since fixed row and column points to a value, nothing to change.\n                    }\n                }\n            }//End of second process.\n        }\n        for(int fixedRow=a;fixedRow&lt;m;fixedRow++)\n        {\n            if(matrix[fixedRow][fixedCol]!=0)\n            {\n                a=a+1;\n            }\n            else\n            {\n                break;\n            }\n        }\n    }//End of first process\n    return matrix;\n}\n\n//Gauss Matrix\n\npublic static double[][] gauss(double[][] matrix)\n{\n    double tempPrincipal,tempSecondary;\n    int m=matrix.length;\n    int n=matrix[0].length;\n    sortMatrix(matrix);\n    \n    for(int fixedRowPrincipal=0;fixedRowPrincipal&lt;(m-1);fixedRowPrincipal++)\n    {\n        for(int fixedColPrincipal=0;fixedColPrincipal&lt;n;fixedColPrincipal++)//First process: Finding the first element different from 0.\n        {\n            if(matrix[fixedRowPrincipal][fixedColPrincipal]!=0)//Found the first element different from 0.\n            {\n                if(matrix[fixedRowPrincipal+1][fixedColPrincipal]!=0)//Conditioning the element below isn´t 0.\n                {\n                    tempPrincipal=matrix[fixedRowPrincipal][fixedColPrincipal];//Assigning fixed values for the elements.\n                    tempSecondary=matrix[fixedRowPrincipal+1][fixedColPrincipal];\n                    for(int j=(fixedColPrincipal);j&lt;n;j++)\n                    {\n                        if(tempPrincipal&lt;0)\n                        {\n                            if(tempSecondary&lt;0)\n                            {\n                                matrix[fixedRowPrincipal+1][j]=matrix[fixedRowPrincipal][j]+(-1.0)*matrix[fixedRowPrincipal+1][j]*(tempPrincipal/tempSecondary);\n                            }\n                            else\n                            {\n                                matrix[fixedRowPrincipal+1][j]=matrix[fixedRowPrincipal][j]+(1.0)*matrix[fixedRowPrincipal+1][j]*(tempPrincipal/tempSecondary);\n                            }\n                        }\n                        else\n                        {\n                            if(tempSecondary&lt;0)\n                            {\n                                matrix[fixedRowPrincipal+1][j]=matrix[fixedRowPrincipal][j]+(1.0)*matrix[fixedRowPrincipal+1][j]*(tempPrincipal/tempSecondary);\n                            }\n                            else\n                            {\n                                matrix[fixedRowPrincipal+1][j]=matrix[fixedRowPrincipal][j]-(matrix[fixedRowPrincipal+1][j]/tempSecondary)*tempPrincipal;\n                            }\n                        }\n                        matrix[fixedRowPrincipal+1][j]=matrix[fixedRowPrincipal][j]+(-1)*matrix[fixedRowPrincipal+1][j]*(tempPrincipal/tempSecondary);\n                    }\n                    sortMatrix(matrix);\n                    fixedRowPrincipal=0;\n                    break;\n                }\n                else\n                {\n                    break;\n                }\n            }\n        }\n    }\n    return matrix;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","java-8"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683481350,"post_id":76182530,"comment_id":134370083,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":28074714,"reputation":1,"user_id":21446777,"display_name":"min gao"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683292242,"creation_date":1683291921,"question_id":76182530,"body_markdown":"&gt; WARN  AnnotationConfigServletWebServerApplicationContext:559 -\r\n&gt; Exception encountered during context initialization - cancelling\r\n&gt; refresh attempt:\r\n&gt; org.springframework.beans.factory.UnsatisfiedDependencyException:\r\n&gt; Error creating bean with name &#39;graphQLController&#39;: Unsatisfied\r\n&gt; dependency expressed through field &#39;graphQL&#39;; nested exception is\r\n&gt; org.springframework.beans.factory.UnsatisfiedDependencyException:\r\n&gt; Error creating bean with name &#39;graphQL&#39; defined in class path resource\r\n&gt; \\[com/gtech/ecomm/graphql/config/GraphqlAutoConfiguration.class\\]:\r\n&gt; Unsatisfied dependency expressed through method &#39;graphQL&#39; parameter 0;\r\n&gt; nested exception is\r\n&gt; org.springframework.beans.factory.UnsatisfiedDependencyException:\r\n&gt; Error creating bean with name &#39;graphQLBuilder&#39; defined in class path\r\n&gt; resource\r\n&gt; \\[com/gtech/ecomm/graphql/config/GraphqlAutoConfiguration.class\\]:\r\n&gt; Unsatisfied dependency expressed through method &#39;graphQLBuilder&#39;\r\n&gt; parameter 0; nested exception is\r\n&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;graphQLSchema&#39; defined in class path resource\r\n&gt; \\[com/gtech/ecomm/graphql/config/GraphqlAutoConfiguration.class\\]:\r\n&gt; Bean instantiation via factory method failed; nested exception is\r\n&gt; org.springframework.beans.BeanInstantiationException: Failed to\r\n&gt; instantiate \\[graphql.schema.GraphQLSchema\\]: Factory method\r\n&gt; &#39;graphQLSchema&#39; threw exception; nested exception is\r\n&gt; com.coxautodev.graphql.tools.SchemaClassScannerError: Type definition\r\n&gt; for root query type &#39;Query&#39; not found!","title":"spring boot 2.3.12.RELEASE integrated graphql、jdk1.8 Unable to start","body":"<blockquote>\n<p>WARN  AnnotationConfigServletWebServerApplicationContext:559 -\nException encountered during context initialization - cancelling\nrefresh attempt:\norg.springframework.beans.factory.UnsatisfiedDependencyException:\nError creating bean with name 'graphQLController': Unsatisfied\ndependency expressed through field 'graphQL'; nested exception is\norg.springframework.beans.factory.UnsatisfiedDependencyException:\nError creating bean with name 'graphQL' defined in class path resource\n[com/gtech/ecomm/graphql/config/GraphqlAutoConfiguration.class]:\nUnsatisfied dependency expressed through method 'graphQL' parameter 0;\nnested exception is\norg.springframework.beans.factory.UnsatisfiedDependencyException:\nError creating bean with name 'graphQLBuilder' defined in class path\nresource\n[com/gtech/ecomm/graphql/config/GraphqlAutoConfiguration.class]:\nUnsatisfied dependency expressed through method 'graphQLBuilder'\nparameter 0; nested exception is\norg.springframework.beans.factory.BeanCreationException: Error\ncreating bean with name 'graphQLSchema' defined in class path resource\n[com/gtech/ecomm/graphql/config/GraphqlAutoConfiguration.class]:\nBean instantiation via factory method failed; nested exception is\norg.springframework.beans.BeanInstantiationException: Failed to\ninstantiate [graphql.schema.GraphQLSchema]: Factory method\n'graphQLSchema' threw exception; nested exception is\ncom.coxautodev.graphql.tools.SchemaClassScannerError: Type definition\nfor root query type 'Query' not found!</p>\n</blockquote>\n"},{"tags":["java","date","wsdl"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":3,"creation_date":1478891745,"post_id":40549526,"comment_id":68347601,"body_markdown":"FYI… `java.util.Date` is supplanted by [`java.time.Instant`](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html) in Java 8 and later, both representing a moment on the timeline in [UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time). And [`XMLGregorianCalendar`](https://docs.oracle.com/javase/8/docs/api/javax/xml/datatype/XMLGregorianCalendar.html) maps more appropriately to [`java.time.ZonedDateTime`](http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html) to retain time zone info. Convert: `myXmlGregCal.toGregorianCalendar().toZonedDateTime()`","body":"FYI… <code>java.util.Date</code> is supplanted by <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>java.time.Instant</code></a> in Java 8 and later, both representing a moment on the timeline in <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a>. And <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/xml/datatype/XMLGregorianCalendar.html\" rel=\"nofollow noreferrer\"><code>XMLGregorianCalendar</code></a> maps more appropriately to <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>java.time.ZonedDateTime</code></a> to retain time zone info. Convert: <code>myXmlGregCal.toGregorianCalendar().toZonedDateTime()</code>"}],"answers":[{"tags":[],"owner":{"account_id":9585761,"reputation":245,"user_id":7118602,"display_name":"sahoora"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1478876973,"creation_date":1478873332,"answer_id":40549726,"question_id":40549526,"body_markdown":"You have to create a custom Data type adaptor and add in binding file.\r\n\r\n     &lt;jaxb:globalBindings&gt;\r\n        &lt;xjc:serializable uid=&quot;-6026937020915831338&quot; /&gt;\r\n        &lt;xjc:javaType name=&quot;java.util.Date&quot; xmlType=&quot;xs:date&quot; \r\n              adapter=&quot;com.test.util.jaxb.DateDataTypeAdapter&quot; /&gt;\r\n      &lt;/jaxb:globalBindings&gt;\r\n    &lt;/jaxb:bindings&gt;\r\n\r\n**Class DateDataTypeAdapter**\r\n\r\n    package com.test.util.jaxb;\r\n    \r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    import javax.xml.bind.DatatypeConverter;\r\n    \r\n    public final class DataTypeAdapter {\r\n        private DataTypeAdapter() { }\r\n    \r\n        public static Date parseDate(String s) {\r\n            if (s == null) {\r\n                return null;\r\n            }\r\n    \r\n            return DatatypeConverter.parseDate(s).getTime();\r\n        }\r\n    \r\n        public static String printDate(Date dt) {\r\n            if (dt == null) {\r\n                return null;\r\n            }\r\n    \r\n            Calendar c = Calendar.getInstance();\r\n            c.setTime(dt);\r\n    \r\n            return DatatypeConverter.printDate(c);\r\n        }\r\n    \r\n    \tpublic static Date parseDateTime(String s) {\r\n            if (s == null) {\r\n                return null;\r\n            }\r\n    \r\n            return DatatypeConverter.parseDateTime(s).getTime();\r\n        }\r\n    \r\n        public static String printDateTime(Date dt) {\r\n            if (dt == null) {\r\n                return null;\r\n            }\r\n    \r\n            Calendar c = Calendar.getInstance();\r\n            c.setTime(dt);\r\n    \r\n            return DatatypeConverter.printDateTime(c);\r\n        }\r\n    }","title":"Replacing date of type XmlGregorianCalendar generated by wsdl to java.util.Date?","body":"<p>You have to create a custom Data type adaptor and add in binding file.</p>\n\n<pre><code> &lt;jaxb:globalBindings&gt;\n    &lt;xjc:serializable uid=\"-6026937020915831338\" /&gt;\n    &lt;xjc:javaType name=\"java.util.Date\" xmlType=\"xs:date\" \n          adapter=\"com.test.util.jaxb.DateDataTypeAdapter\" /&gt;\n  &lt;/jaxb:globalBindings&gt;\n&lt;/jaxb:bindings&gt;\n</code></pre>\n\n<p><strong>Class DateDataTypeAdapter</strong></p>\n\n<pre><code>package com.test.util.jaxb;\n\nimport java.util.Calendar;\nimport java.util.Date;\nimport javax.xml.bind.DatatypeConverter;\n\npublic final class DataTypeAdapter {\n    private DataTypeAdapter() { }\n\n    public static Date parseDate(String s) {\n        if (s == null) {\n            return null;\n        }\n\n        return DatatypeConverter.parseDate(s).getTime();\n    }\n\n    public static String printDate(Date dt) {\n        if (dt == null) {\n            return null;\n        }\n\n        Calendar c = Calendar.getInstance();\n        c.setTime(dt);\n\n        return DatatypeConverter.printDate(c);\n    }\n\n    public static Date parseDateTime(String s) {\n        if (s == null) {\n            return null;\n        }\n\n        return DatatypeConverter.parseDateTime(s).getTime();\n    }\n\n    public static String printDateTime(Date dt) {\n        if (dt == null) {\n            return null;\n        }\n\n        Calendar c = Calendar.getInstance();\n        c.setTime(dt);\n\n        return DatatypeConverter.printDateTime(c);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9609012,"reputation":4037,"user_id":7134058,"display_name":"Vadim"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1513162181,"creation_date":1478875721,"answer_id":40550469,"question_id":40549526,"body_markdown":"WSDL has no deal with xjb. xjb is for xjc compiler passed as -b parameter.\r\ni.e.\r\n\r\n    xjc -b &lt;file&gt;\r\n\r\ndocumentation: [Customizing JAXB Binding][1]\r\n\r\nif you use Maven plugins to generate your JAXB Java classes any of them have Binding configuration i.e.\r\n\r\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;defaultOptions&gt;\r\n\t\t\t\t\t\t\t&lt;bindingFiles&gt;\r\n\t\t\t\t\t\t\t\t&lt;bindingFile&gt;${project.interfaces.basedir}Configuration/Bindings/common-binding.xjb&lt;/bindingFile&gt;\r\n\t\t\t\t\t\t\t&lt;/bindingFiles&gt;\r\n\r\nor \r\n\r\n    &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-jaxb2-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;schemaDirectory&gt;${basedir}/src/main/resources/XMLSchema&lt;/schemaDirectory&gt;\r\n\t\t\t\t\t&lt;bindingDirectory&gt;${basedir}/src/main/resources/Bindings&lt;/bindingDirectory&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\r\nand so on...\r\n     \r\nxjb for it is very simple:\r\n\r\n    &lt;jaxb:bindings xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n\txmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot; jaxb:version=&quot;2.0&quot;\r\n\txmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot;\r\n\tjaxb:extensionBindingPrefixes=&quot;xjc&quot;&gt;\r\n\t&lt;jaxb:globalBindings&gt;\r\n\t\t&lt;jaxb:serializable uid=&quot;1&quot; /&gt;\r\n\t\t&lt;jaxb:javaType name=&quot;java.util.Calendar&quot; xmlType=&quot;xsd:dateTime&quot;\r\n\t\t\tparseMethod=&quot;javax.xml.bind.DatatypeConverter.parseDateTime&quot;\r\n\t\t\tprintMethod=&quot;javax.xml.bind.DatatypeConverter.printDateTime&quot; /&gt;\r\n\t\t&lt;jaxb:javaType name=&quot;java.util.Calendar&quot; xmlType=&quot;xsd:date&quot;\r\n\t\t\tparseMethod=&quot;javax.xml.bind.DatatypeConverter.parseDate&quot; printMethod=&quot;javax.xml.bind.DatatypeConverter.printDate&quot; /&gt;\r\n\t\t&lt;jaxb:javaType name=&quot;java.util.Calendar&quot; xmlType=&quot;xsd:time&quot;\r\n\t\t\tparseMethod=&quot;javax.xml.bind.DatatypeConverter.parseTime&quot; printMethod=&quot;javax.xml.bind.DatatypeConverter.printTime&quot; /&gt;\t\t\t\r\n\t&lt;/jaxb:globalBindings&gt;\r\n&lt;/jaxb:bindings&gt;\r\n\r\n\r\n\r\n\r\nas you can see it defines conversions from xsd:dateTime, xsd:date and xsd:time types to java.util.Calendar. \r\n\r\nI do not recommend to use java.util.Date. There are many troubles with Date handling (especially with different timeZones).\r\nIt is better to use java.util.Calendar. Calendar is much easier to handle and default converter implementation is there in JDK: \r\n\r\n    javax.xml.bind.DatatypeConverter\r\n\r\n But, if you still want to use java.Util.Date you need to have your own small converter with two static methods &quot;parse&quot; and &quot;print&quot; and then set it in xjb. i.e.\r\n\r\n    public class MyDateConverter {\r\n        public static java.util.Date parse(String xmlDateTime) {\r\n\t\t    return javax.xml.bind.DatatypeConverter.parseDateTime(xmlDateTime).getTime();\r\n\t    }\r\n\r\n\t    public static String print(Date javaDate) {\r\n\t\t    Calendar calendar = Calendar.getInstance();\r\n\t\t    calendar.setTimeInMillis(javaDate.getTime());\r\n\t\t    return javax.xml.bind.DatatypeConverter.printDateTime(calendar);\r\n        }\r\n    }\r\n\r\nyour conversions in xjb will look like:\r\n\r\n    &lt;jaxb:javaType name=&quot;java.util.Date&quot; xmlType=&quot;xsd:dateTime&quot;\r\n        parseMethod=&quot;MyDatatypeConverter.parse&quot;\r\n        printMethod=&quot;MyDatatypeConverter.print&quot; /&gt;\r\n\r\n  [1]: http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.5/tutorial/doc/JAXBUsing4.html","title":"Replacing date of type XmlGregorianCalendar generated by wsdl to java.util.Date?","body":"<p>WSDL has no deal with xjb. xjb is for xjc compiler passed as -b parameter.\ni.e.</p>\n\n<pre><code>xjc -b &lt;file&gt;\n</code></pre>\n\n<p>documentation: <a href=\"http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.5/tutorial/doc/JAXBUsing4.html\" rel=\"noreferrer\">Customizing JAXB Binding</a></p>\n\n<p>if you use Maven plugins to generate your JAXB Java classes any of them have Binding configuration i.e.</p>\n\n<pre><code>&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n                &lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;defaultOptions&gt;\n                        &lt;bindingFiles&gt;\n                            &lt;bindingFile&gt;${project.interfaces.basedir}Configuration/Bindings/common-binding.xjb&lt;/bindingFile&gt;\n                        &lt;/bindingFiles&gt;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;org.jvnet.jaxb2.maven2&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jaxb2-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;schemaDirectory&gt;${basedir}/src/main/resources/XMLSchema&lt;/schemaDirectory&gt;\n                &lt;bindingDirectory&gt;${basedir}/src/main/resources/Bindings&lt;/bindingDirectory&gt;\n            &lt;/configuration&gt;\n</code></pre>\n\n<p>and so on...</p>\n\n<p>xjb for it is very simple:</p>\n\n<pre><code>&lt;jaxb:bindings xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\nxmlns:jaxb=\"http://java.sun.com/xml/ns/jaxb\" jaxb:version=\"2.0\"\nxmlns:xjc=\"http://java.sun.com/xml/ns/jaxb/xjc\"\njaxb:extensionBindingPrefixes=\"xjc\"&gt;\n&lt;jaxb:globalBindings&gt;\n    &lt;jaxb:serializable uid=\"1\" /&gt;\n    &lt;jaxb:javaType name=\"java.util.Calendar\" xmlType=\"xsd:dateTime\"\n        parseMethod=\"javax.xml.bind.DatatypeConverter.parseDateTime\"\n        printMethod=\"javax.xml.bind.DatatypeConverter.printDateTime\" /&gt;\n    &lt;jaxb:javaType name=\"java.util.Calendar\" xmlType=\"xsd:date\"\n        parseMethod=\"javax.xml.bind.DatatypeConverter.parseDate\" printMethod=\"javax.xml.bind.DatatypeConverter.printDate\" /&gt;\n    &lt;jaxb:javaType name=\"java.util.Calendar\" xmlType=\"xsd:time\"\n        parseMethod=\"javax.xml.bind.DatatypeConverter.parseTime\" printMethod=\"javax.xml.bind.DatatypeConverter.printTime\" /&gt;            \n&lt;/jaxb:globalBindings&gt;\n</code></pre>\n\n<p></p>\n\n<p>as you can see it defines conversions from xsd:dateTime, xsd:date and xsd:time types to java.util.Calendar. </p>\n\n<p>I do not recommend to use java.util.Date. There are many troubles with Date handling (especially with different timeZones).\nIt is better to use java.util.Calendar. Calendar is much easier to handle and default converter implementation is there in JDK: </p>\n\n<pre><code>javax.xml.bind.DatatypeConverter\n</code></pre>\n\n<p>But, if you still want to use java.Util.Date you need to have your own small converter with two static methods \"parse\" and \"print\" and then set it in xjb. i.e.</p>\n\n<pre><code>public class MyDateConverter {\n    public static java.util.Date parse(String xmlDateTime) {\n        return javax.xml.bind.DatatypeConverter.parseDateTime(xmlDateTime).getTime();\n    }\n\n    public static String print(Date javaDate) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.setTimeInMillis(javaDate.getTime());\n        return javax.xml.bind.DatatypeConverter.printDateTime(calendar);\n    }\n}\n</code></pre>\n\n<p>your conversions in xjb will look like:</p>\n\n<pre><code>&lt;jaxb:javaType name=\"java.util.Date\" xmlType=\"xsd:dateTime\"\n    parseMethod=\"MyDatatypeConverter.parse\"\n    printMethod=\"MyDatatypeConverter.print\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1240435,"reputation":3209,"user_id":1203182,"display_name":"spy"},"down_vote_count":3,"up_vote_count":5,"is_accepted":false,"score":2,"last_activity_date":1489529280,"creation_date":1489529280,"answer_id":42797480,"question_id":40549526,"body_markdown":"This is probably a bit of a hack, but it works.\r\n\r\nAfter generating your code with wsimport, you can do a find and replace in files, replacing all references to XmlGregorianCalendar with java.util.Date. JAXB will happily do all the processing for you and automagically do the conversions. No adapters needed. I haven&#39;t ran into any problems using this method.","title":"Replacing date of type XmlGregorianCalendar generated by wsdl to java.util.Date?","body":"<p>This is probably a bit of a hack, but it works.</p>\n\n<p>After generating your code with wsimport, you can do a find and replace in files, replacing all references to XmlGregorianCalendar with java.util.Date. JAXB will happily do all the processing for you and automagically do the conversions. No adapters needed. I haven't ran into any problems using this method.</p>\n"},{"tags":[],"owner":{"account_id":4018130,"reputation":11533,"user_id":3309466,"accept_rate":78,"display_name":"Manuel Spigolon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1494883091,"creation_date":1494883091,"answer_id":43988975,"question_id":40549526,"body_markdown":"I have change the bean&#39;s java type from `XMLGregorianCalendar` adding the configuration for jaxb directly on the xsd&#39;s contracts.\r\n\r\nI have done like this, note the `xs:annotation`:\r\n\r\n    &lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:tns=&quot;http://hello.eomm.it/springws&quot;\r\n    targetNamespace=&quot;http://hello.eomm.it/springws&quot; elementFormDefault=&quot;qualified&quot; xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot;\r\n    jaxb:version=&quot;2.0&quot;&gt;\r\n    \r\n    &lt;xs:annotation&gt; \r\n    \t&lt;xs:appinfo&gt;\r\n    \t\t&lt;jaxb:globalBindings&gt;\r\n    \t\t\t&lt;jaxb:serializable uid=&quot;1&quot; /&gt;\r\n    \t\t\t&lt;jaxb:javaType name=&quot;java.util.Calendar&quot; xmlType=&quot;xs:dateTime&quot;\r\n    \t\t\t\tparseMethod=&quot;javax.xml.bind.DatatypeConverter.parseDateTime&quot; printMethod=&quot;javax.xml.bind.DatatypeConverter.printDateTime&quot; /&gt;\r\n    \t\t\t&lt;jaxb:javaType name=&quot;java.util.Calendar&quot; xmlType=&quot;xs:date&quot;\r\n    \t\t\t\tparseMethod=&quot;javax.xml.bind.DatatypeConverter.parseDate&quot; printMethod=&quot;javax.xml.bind.DatatypeConverter.printDate&quot; /&gt;\r\n    \t\t\t&lt;jaxb:javaType name=&quot;java.util.Calendar&quot; xmlType=&quot;xs:time&quot;\r\n    \t\t\t\tparseMethod=&quot;javax.xml.bind.DatatypeConverter.parseTime&quot; printMethod=&quot;javax.xml.bind.DatatypeConverter.printTime&quot; /&gt;\r\n    \t\t&lt;/jaxb:globalBindings&gt;\r\n    \t&lt;/xs:appinfo&gt;\r\n    &lt;/xs:annotation&gt;\r\n    \r\n    \r\n    &lt;xs:element name=&quot;getCountryRequest&quot;&gt;\r\n    \t&lt;xs:complexType&gt;\r\n    \t\t&lt;xs:sequence&gt;\r\n    \t\t\t&lt;xs:element name=&quot;name&quot; type=&quot;xs:string&quot; /&gt;\r\n    \t\t&lt;/xs:sequence&gt;\r\n    \t&lt;/xs:complexType&gt;\r\n    &lt;/xs:element&gt;\r\n    \r\n    \r\n    &lt;xs:element name=&quot;getCountryResponse&quot;&gt;\r\n    \t&lt;xs:complexType&gt;\r\n    \t\t&lt;xs:sequence&gt;\r\n    \t\t\t&lt;xs:element name=&quot;country&quot; type=&quot;tns:country&quot; /&gt;\r\n    \t\t&lt;/xs:sequence&gt;\r\n    \t&lt;/xs:complexType&gt;\r\n    &lt;/xs:element&gt;\r\n    \r\n    &lt;xs:complexType name=&quot;country&quot;&gt;\r\n    \t&lt;xs:sequence&gt;\r\n    \t\t&lt;xs:element name=&quot;name&quot; type=&quot;xs:string&quot; /&gt;\r\n    \t\t&lt;xs:element name=&quot;population&quot; type=&quot;xs:int&quot; /&gt;\r\n    \t\t&lt;xs:element name=&quot;capital&quot; type=&quot;xs:string&quot; /&gt;\r\n    \t\t&lt;xs:element name=&quot;foundation&quot; type=&quot;xs:date&quot; /&gt;\r\n    \t\t&lt;xs:element name=&quot;currency&quot; type=&quot;tns:currency&quot; /&gt;\r\n    \t&lt;/xs:sequence&gt;\r\n    &lt;/xs:complexType&gt;\r\n    \r\n    [...]\r\n\r\nIt is also needed to add the `-Djavax.xml.accessExternalSchema=all` parameter on JVM when you run the maven builds.","title":"Replacing date of type XmlGregorianCalendar generated by wsdl to java.util.Date?","body":"<p>I have change the bean's java type from <code>XMLGregorianCalendar</code> adding the configuration for jaxb directly on the xsd's contracts.</p>\n\n<p>I have done like this, note the <code>xs:annotation</code>:</p>\n\n<pre><code>&lt;xs:schema xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:tns=\"http://hello.eomm.it/springws\"\ntargetNamespace=\"http://hello.eomm.it/springws\" elementFormDefault=\"qualified\" xmlns:jaxb=\"http://java.sun.com/xml/ns/jaxb\"\njaxb:version=\"2.0\"&gt;\n\n&lt;xs:annotation&gt; \n    &lt;xs:appinfo&gt;\n        &lt;jaxb:globalBindings&gt;\n            &lt;jaxb:serializable uid=\"1\" /&gt;\n            &lt;jaxb:javaType name=\"java.util.Calendar\" xmlType=\"xs:dateTime\"\n                parseMethod=\"javax.xml.bind.DatatypeConverter.parseDateTime\" printMethod=\"javax.xml.bind.DatatypeConverter.printDateTime\" /&gt;\n            &lt;jaxb:javaType name=\"java.util.Calendar\" xmlType=\"xs:date\"\n                parseMethod=\"javax.xml.bind.DatatypeConverter.parseDate\" printMethod=\"javax.xml.bind.DatatypeConverter.printDate\" /&gt;\n            &lt;jaxb:javaType name=\"java.util.Calendar\" xmlType=\"xs:time\"\n                parseMethod=\"javax.xml.bind.DatatypeConverter.parseTime\" printMethod=\"javax.xml.bind.DatatypeConverter.printTime\" /&gt;\n        &lt;/jaxb:globalBindings&gt;\n    &lt;/xs:appinfo&gt;\n&lt;/xs:annotation&gt;\n\n\n&lt;xs:element name=\"getCountryRequest\"&gt;\n    &lt;xs:complexType&gt;\n        &lt;xs:sequence&gt;\n            &lt;xs:element name=\"name\" type=\"xs:string\" /&gt;\n        &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n&lt;/xs:element&gt;\n\n\n&lt;xs:element name=\"getCountryResponse\"&gt;\n    &lt;xs:complexType&gt;\n        &lt;xs:sequence&gt;\n            &lt;xs:element name=\"country\" type=\"tns:country\" /&gt;\n        &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n&lt;/xs:element&gt;\n\n&lt;xs:complexType name=\"country\"&gt;\n    &lt;xs:sequence&gt;\n        &lt;xs:element name=\"name\" type=\"xs:string\" /&gt;\n        &lt;xs:element name=\"population\" type=\"xs:int\" /&gt;\n        &lt;xs:element name=\"capital\" type=\"xs:string\" /&gt;\n        &lt;xs:element name=\"foundation\" type=\"xs:date\" /&gt;\n        &lt;xs:element name=\"currency\" type=\"tns:currency\" /&gt;\n    &lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n\n[...]\n</code></pre>\n\n<p>It is also needed to add the <code>-Djavax.xml.accessExternalSchema=all</code> parameter on JVM when you run the maven builds.</p>\n"},{"tags":[],"owner":{"account_id":8982326,"reputation":1004,"user_id":6697093,"accept_rate":100,"display_name":"Julio Villane"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1501041491,"creation_date":1501041491,"answer_id":45317199,"question_id":40549526,"body_markdown":"The @vadim answer worked for me with a few additional details...\r\n\r\nI was using spring boot 1.5.3 and the 2.3.1 version of the jaxb2-maven-plugin, and in that case I had to declare my xjb file as follows:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;xjc&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n        &lt;configuration&gt;\r\n            &lt;packageName&gt;...&lt;/packageName&gt;\r\n            &lt;sources&gt;\r\n                &lt;source&gt;src/main/resources/file.xsd&lt;/source&gt;\r\n            &lt;/sources&gt;\r\n            &lt;xjbSources&gt;\r\n                &lt;xjbSource&gt;src/main/resources/file.xjb&lt;/xjbSource&gt;\r\n            &lt;/xjbSources&gt;\r\n            &lt;addGeneratedAnnotation&gt;true&lt;/addGeneratedAnnotation&gt;\r\n            &lt;locale&gt;es&lt;/locale&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nIn my case the xjb file content was:\r\n\r\n    &lt;jaxb:bindings xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n                   xmlns:jaxb=&quot;http://java.sun.com/xml/ns/jaxb&quot; \r\n                   jaxb:version=&quot;2.0&quot;\r\n                   xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot;\r\n                   jaxb:extensionBindingPrefixes=&quot;xjc&quot;&gt;\r\n      &lt;jaxb:globalBindings&gt;\r\n        &lt;jaxb:serializable uid=&quot;1&quot;/&gt;\r\n        &lt;jaxb:javaType name=&quot;java.util.Date&quot; xmlType=&quot;xsd:dateTime&quot;\r\n            parseMethod=&quot;package.path.bind.DataTypeConverter.parse&quot;\r\n            printMethod=&quot;package.path.bind.DataTypeConverter.print&quot;/&gt;\r\n      &lt;/jaxb:globalBindings&gt;\r\n    &lt;/jaxb:bindings&gt;\r\n\r\nAnd the DataTypeConverter content was:\r\n\r\n    import javax.xml.bind.DatatypeConverter;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    \r\n    public class DataTypeConverter {\r\n\r\n        public static Date parse(String isoFormatDatetime) {\r\n            return DatatypeConverter.parseDateTime(isoFormatDatetime).getTime();\r\n        }\r\n        public static String print(Date date) {\r\n            return DatatypeConverter.printDateTime(toCalendar(date));\r\n        }\r\n\r\n        private static Calendar toCalendar(Date date){\r\n            Calendar cal = Calendar.getInstance();\r\n            cal.setTime(date);\r\n            return cal;\r\n        }\r\n    }\r\n\r\nHope this helps someone!! :)","title":"Replacing date of type XmlGregorianCalendar generated by wsdl to java.util.Date?","body":"<p>The @vadim answer worked for me with a few additional details...</p>\n\n<p>I was using spring boot 1.5.3 and the 2.3.1 version of the jaxb2-maven-plugin, and in that case I had to declare my xjb file as follows:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;xjc&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n    &lt;configuration&gt;\n        &lt;packageName&gt;...&lt;/packageName&gt;\n        &lt;sources&gt;\n            &lt;source&gt;src/main/resources/file.xsd&lt;/source&gt;\n        &lt;/sources&gt;\n        &lt;xjbSources&gt;\n            &lt;xjbSource&gt;src/main/resources/file.xjb&lt;/xjbSource&gt;\n        &lt;/xjbSources&gt;\n        &lt;addGeneratedAnnotation&gt;true&lt;/addGeneratedAnnotation&gt;\n        &lt;locale&gt;es&lt;/locale&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>In my case the xjb file content was:</p>\n\n<pre><code>&lt;jaxb:bindings xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n               xmlns:jaxb=\"http://java.sun.com/xml/ns/jaxb\" \n               jaxb:version=\"2.0\"\n               xmlns:xjc=\"http://java.sun.com/xml/ns/jaxb/xjc\"\n               jaxb:extensionBindingPrefixes=\"xjc\"&gt;\n  &lt;jaxb:globalBindings&gt;\n    &lt;jaxb:serializable uid=\"1\"/&gt;\n    &lt;jaxb:javaType name=\"java.util.Date\" xmlType=\"xsd:dateTime\"\n        parseMethod=\"package.path.bind.DataTypeConverter.parse\"\n        printMethod=\"package.path.bind.DataTypeConverter.print\"/&gt;\n  &lt;/jaxb:globalBindings&gt;\n&lt;/jaxb:bindings&gt;\n</code></pre>\n\n<p>And the DataTypeConverter content was:</p>\n\n<pre><code>import javax.xml.bind.DatatypeConverter;\nimport java.util.Calendar;\nimport java.util.Date;\n\npublic class DataTypeConverter {\n\n    public static Date parse(String isoFormatDatetime) {\n        return DatatypeConverter.parseDateTime(isoFormatDatetime).getTime();\n    }\n    public static String print(Date date) {\n        return DatatypeConverter.printDateTime(toCalendar(date));\n    }\n\n    private static Calendar toCalendar(Date date){\n        Calendar cal = Calendar.getInstance();\n        cal.setTime(date);\n        return cal;\n    }\n}\n</code></pre>\n\n<p>Hope this helps someone!! :)</p>\n"},{"tags":[],"owner":{"account_id":1962480,"reputation":15473,"user_id":1763602,"accept_rate":76,"display_name":"Marco Sulla"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683291474,"creation_date":1683207268,"answer_id":76173809,"question_id":40549526,"body_markdown":"Thanks to [Vadim&#39;s answer](https://stackoverflow.com/a/40550469/1763602), I ended up using `LocalDate` and `LocalDateTime`:\r\n\r\nxjb:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n&lt;jaxb:bindings version=&quot;3.0&quot; xmlns:jaxb=&quot;https://jakarta.ee/xml/ns/jaxb&quot;\r\n    xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n    jaxb:extensionBindingPrefixes=&quot;xjc&quot;&gt;\r\n\r\n    &lt;jaxb:globalBindings&gt;\r\n        &lt;xjc:serializable uid=&quot;-1&quot; /&gt;\r\n        \r\n        &lt;jaxb:javaType\r\n            name=&quot;java.time.LocalDateTime&quot;\r\n            xmlType=&quot;xs:dateTime&quot;\r\n            parseMethod=&quot;JaxbDateConverter.parseDateTime&quot;\r\n            printMethod=&quot;JaxbDateConverter.printDateTime&quot;\r\n        /&gt;\r\n        \r\n        &lt;jaxb:javaType\r\n            name=&quot;java.time.LocalDate&quot;\r\n            xmlType=&quot;xs:date&quot;\r\n            parseMethod=&quot;JaxbDateConverter.parseDate&quot;\r\n            printMethod=&quot;JaxbDateConverter.printDate&quot;\r\n        /&gt;\r\n    \r\n        &lt;jaxb:javaType\r\n            name=&quot;java.time.LocalDate&quot;\r\n            xmlType=&quot;xs:gYearMonth&quot;\r\n            parseMethod=&quot;JaxbDateConverter.parseDate&quot;\r\n            printMethod=&quot;JaxbDateConverter.printDate&quot;\r\n        /&gt;\r\n    \r\n        &lt;jaxb:javaType\r\n            name=&quot;java.time.LocalDate&quot;\r\n            xmlType=&quot;xs:gYear&quot;\r\n            parseMethod=&quot;JaxbDateConverter.parseDate&quot;\r\n            printMethod=&quot;JaxbDateConverter.printDate&quot;\r\n        /&gt;\r\n    \r\n        &lt;jaxb:javaType\r\n            name=&quot;java.time.MonthDay&quot;\r\n            xmlType=&quot;xs:gMonthDay&quot;\r\n            parseMethod=&quot;JaxbDateConverter.parseMonthDay&quot;\r\n            printMethod=&quot;JaxbDateConverter.printMonthDay&quot;\r\n        /&gt;\r\n    &lt;/jaxb:globalBindings&gt;\r\n&lt;/jaxb:bindings&gt;\r\n```\r\n\r\nJaxbDateConverter:\r\n\r\n```\r\nimport jakarta.xml.bind.DatatypeConverter;\r\nimport lombok.val;\r\n\r\nimport java.time.LocalDate;\r\nimport java.time.LocalDateTime;\r\nimport java.time.LocalTime;\r\nimport java.time.ZoneId;\r\nimport java.util.Calendar;\r\n\r\npublic class JaxbDateConverter {\r\n    public static LocalDateTime parseDateTime(String xml) {\r\n        val calendar = DatatypeConverter.parseDateTime(xml);\r\n        val tz = ZoneId.systemDefault();\r\n        val res = LocalDateTime.ofInstant(calendar.toInstant(), tz);\r\n        \r\n        return res;\r\n    }\r\n    \r\n    public static String printDateTime(LocalDateTime date) {\r\n        val calendar = Calendar.getInstance();\r\n        val tz = ZoneId.systemDefault();\r\n        val zoneOffSet = tz.getRules().getOffset(date);\r\n        val ms = date.toEpochSecond(zoneOffSet) * 1000;\r\n        calendar.setTimeInMillis(ms);\r\n        val res = DatatypeConverter.printDateTime(calendar);\r\n        \r\n        return res;\r\n    }\r\n    \r\n    public static LocalDate parseDate(String xml) {\r\n        val calendar = DatatypeConverter.parseDate(xml);\r\n        val tz = ZoneId.systemDefault();\r\n        val res = LocalDate.ofInstant(calendar.toInstant(), tz);\r\n        \r\n        return res;\r\n    }\r\n    \r\n    public static String printDate(LocalDate date) {\r\n        val calendar = Calendar.getInstance();\r\n        val tz = ZoneId.systemDefault();\r\n        val dateTime = date.atStartOfDay();\r\n        val zoneOffSet = tz.getRules().getOffset(dateTime);\r\n        val timeStartOfDay = LocalTime.of(0, 0, 0);\r\n        val ms = date.toEpochSecond(timeStartOfDay, zoneOffSet) * 1000;\r\n        calendar.setTimeInMillis(ms);\r\n        val res = DatatypeConverter.printDate(calendar);\r\n        \r\n        return res;\r\n    }\r\n\r\n    public static MonthDay parseMonthDay(String xml) {\r\n        val res = MonthDay.parse(xml);\r\n        \r\n        return res;\r\n    }\r\n    \r\n    public static String printMonthDay(MonthDay monthDay) {\r\n        val res = monthDay.toString();\r\n        \r\n        return res;\r\n    }\r\n}\r\n```","title":"Replacing date of type XmlGregorianCalendar generated by wsdl to java.util.Date?","body":"<p>Thanks to <a href=\"https://stackoverflow.com/a/40550469/1763602\">Vadim's answer</a>, I ended up using <code>LocalDate</code> and <code>LocalDateTime</code>:</p>\n<p>xjb:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;jaxb:bindings version=&quot;3.0&quot; xmlns:jaxb=&quot;https://jakarta.ee/xml/ns/jaxb&quot;\n    xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n    jaxb:extensionBindingPrefixes=&quot;xjc&quot;&gt;\n\n    &lt;jaxb:globalBindings&gt;\n        &lt;xjc:serializable uid=&quot;-1&quot; /&gt;\n        \n        &lt;jaxb:javaType\n            name=&quot;java.time.LocalDateTime&quot;\n            xmlType=&quot;xs:dateTime&quot;\n            parseMethod=&quot;JaxbDateConverter.parseDateTime&quot;\n            printMethod=&quot;JaxbDateConverter.printDateTime&quot;\n        /&gt;\n        \n        &lt;jaxb:javaType\n            name=&quot;java.time.LocalDate&quot;\n            xmlType=&quot;xs:date&quot;\n            parseMethod=&quot;JaxbDateConverter.parseDate&quot;\n            printMethod=&quot;JaxbDateConverter.printDate&quot;\n        /&gt;\n    \n        &lt;jaxb:javaType\n            name=&quot;java.time.LocalDate&quot;\n            xmlType=&quot;xs:gYearMonth&quot;\n            parseMethod=&quot;JaxbDateConverter.parseDate&quot;\n            printMethod=&quot;JaxbDateConverter.printDate&quot;\n        /&gt;\n    \n        &lt;jaxb:javaType\n            name=&quot;java.time.LocalDate&quot;\n            xmlType=&quot;xs:gYear&quot;\n            parseMethod=&quot;JaxbDateConverter.parseDate&quot;\n            printMethod=&quot;JaxbDateConverter.printDate&quot;\n        /&gt;\n    \n        &lt;jaxb:javaType\n            name=&quot;java.time.MonthDay&quot;\n            xmlType=&quot;xs:gMonthDay&quot;\n            parseMethod=&quot;JaxbDateConverter.parseMonthDay&quot;\n            printMethod=&quot;JaxbDateConverter.printMonthDay&quot;\n        /&gt;\n    &lt;/jaxb:globalBindings&gt;\n&lt;/jaxb:bindings&gt;\n</code></pre>\n<p>JaxbDateConverter:</p>\n<pre><code>import jakarta.xml.bind.DatatypeConverter;\nimport lombok.val;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.time.LocalTime;\nimport java.time.ZoneId;\nimport java.util.Calendar;\n\npublic class JaxbDateConverter {\n    public static LocalDateTime parseDateTime(String xml) {\n        val calendar = DatatypeConverter.parseDateTime(xml);\n        val tz = ZoneId.systemDefault();\n        val res = LocalDateTime.ofInstant(calendar.toInstant(), tz);\n        \n        return res;\n    }\n    \n    public static String printDateTime(LocalDateTime date) {\n        val calendar = Calendar.getInstance();\n        val tz = ZoneId.systemDefault();\n        val zoneOffSet = tz.getRules().getOffset(date);\n        val ms = date.toEpochSecond(zoneOffSet) * 1000;\n        calendar.setTimeInMillis(ms);\n        val res = DatatypeConverter.printDateTime(calendar);\n        \n        return res;\n    }\n    \n    public static LocalDate parseDate(String xml) {\n        val calendar = DatatypeConverter.parseDate(xml);\n        val tz = ZoneId.systemDefault();\n        val res = LocalDate.ofInstant(calendar.toInstant(), tz);\n        \n        return res;\n    }\n    \n    public static String printDate(LocalDate date) {\n        val calendar = Calendar.getInstance();\n        val tz = ZoneId.systemDefault();\n        val dateTime = date.atStartOfDay();\n        val zoneOffSet = tz.getRules().getOffset(dateTime);\n        val timeStartOfDay = LocalTime.of(0, 0, 0);\n        val ms = date.toEpochSecond(timeStartOfDay, zoneOffSet) * 1000;\n        calendar.setTimeInMillis(ms);\n        val res = DatatypeConverter.printDate(calendar);\n        \n        return res;\n    }\n\n    public static MonthDay parseMonthDay(String xml) {\n        val res = MonthDay.parse(xml);\n        \n        return res;\n    }\n    \n    public static String printMonthDay(MonthDay monthDay) {\n        val res = monthDay.toString();\n        \n        return res;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9626566,"reputation":81,"user_id":7146010,"display_name":"shuchi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30514,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":6,"score":8,"last_activity_date":1683291474,"creation_date":1478872647,"question_id":40549526,"body_markdown":"I am working on an application in which we give call to Third Party SAP system using files generated through wsdl using Spring webservices.\r\n\r\nOne of the file generated using wsdl through ws import have Date attribute of type &quot;XMLGregorianCalendar&quot; and in response we are getting null value for corresponding field .\r\n\r\nI want to convert date from XmlGregorianCalendar to java.util.Date.\r\n\r\nHave referred  : https://stackoverflow.com/questions/11109608/how-replace-xmlgregoriancalendar-by-date \r\nbut not able to provide appropriate xjb bindings through wsdl.\r\n\r\nIf anyone can suggest the conversion of Dates generated by wsdl ,it would be of great help.....\r\nThanks In Advance !\r\nShuchi","title":"Replacing date of type XmlGregorianCalendar generated by wsdl to java.util.Date?","body":"<p>I am working on an application in which we give call to Third Party SAP system using files generated through wsdl using Spring webservices.</p>\n\n<p>One of the file generated using wsdl through ws import have Date attribute of type \"XMLGregorianCalendar\" and in response we are getting null value for corresponding field .</p>\n\n<p>I want to convert date from XmlGregorianCalendar to java.util.Date.</p>\n\n<p>Have referred  : <a href=\"https://stackoverflow.com/questions/11109608/how-replace-xmlgregoriancalendar-by-date\">how replace XmlGregorianCalendar by Date?</a> \nbut not able to provide appropriate xjb bindings through wsdl.</p>\n\n<p>If anyone can suggest the conversion of Dates generated by wsdl ,it would be of great help.....\nThanks In Advance !\nShuchi</p>\n"},{"tags":["java","intellij-idea","syntax-highlighting"],"comments":[{"owner":{"account_id":19108179,"reputation":184,"user_id":13954798,"display_name":"Mimimishkin"},"score":0,"creation_date":1682887041,"post_id":76143297,"comment_id":134281772,"body_markdown":"Just mark `src` directory as source code root. Right click &gt; Mark directory as &gt; ...","body":"Just mark <code>src</code> directory as source code root. Right click &gt; Mark directory as &gt; ..."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1682895496,"post_id":76143297,"comment_id":134282713,"body_markdown":"Try opening up the ‘demo’ folder in IDEA as the root of the project, rather than opening the `SpringBoot2Essencials` folder. Then, it should recognise the Gradle configuration and set the project up accordingly.","body":"Try opening up the ‘demo’ folder in IDEA as the root of the project, rather than opening the <code>SpringBoot2Essencials</code> folder. Then, it should recognise the Gradle configuration and set the project up accordingly."},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1682933927,"post_id":76143297,"comment_id":134285939,"body_markdown":"@Mimimishkin That is not the proper solution here (if anything the `src/main/java` should be marked as source root). The proper solution is to import the project as a Gradle project, then IntelliJ will detect the right source roots itself.","body":"@Mimimishkin That is not the proper solution here (if anything the <code>src&#47;main&#47;java</code> should be marked as source root). The proper solution is to import the project as a Gradle project, then IntelliJ will detect the right source roots itself."}],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682934009,"creation_date":1682934009,"answer_id":76145964,"question_id":76143297,"body_markdown":"You need to import/open the project as a Gradle project, then IntelliJ will configure itself appropriately.\r\n\r\nFor example, close your current project, use File &gt; New &gt; Project from Existing Sources..., browse to the directory, select the build.gradle file and click OK.","title":"How to enable Syntax highlighting on intellij?","body":"<p>You need to import/open the project as a Gradle project, then IntelliJ will configure itself appropriately.</p>\n<p>For example, close your current project, use File &gt; New &gt; Project from Existing Sources..., browse to the directory, select the build.gradle file and click OK.</p>\n"}],"owner":{"account_id":25143174,"reputation":1,"user_id":20407787,"display_name":"Matheus kris"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1135,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1683291276,"creation_date":1682885209,"question_id":76143297,"body_markdown":"I started to use intellij to code in java recently, and the Syntax highlighting with colors is not working on all types of elements. I already tryed to use a new theme, to disable power saved mode, but nothing seens to work. can anybody help?\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI want to see a theme with different colors for different types of elements like classes, anotations, methods, properties, params, variables and so on.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/d082H.png","title":"How to enable Syntax highlighting on intellij?","body":"<p>I started to use intellij to code in java recently, and the Syntax highlighting with colors is not working on all types of elements. I already tryed to use a new theme, to disable power saved mode, but nothing seens to work. can anybody help?</p>\n<p><a href=\"https://i.stack.imgur.com/d082H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d082H.png\" alt=\"enter image description here\" /></a></p>\n<p>I want to see a theme with different colors for different types of elements like classes, anotations, methods, properties, params, variables and so on.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1683286884,"post_id":76181708,"comment_id":134347202,"body_markdown":"Too many Id annotations. Should be only one per entity class.","body":"Too many Id annotations. Should be only one per entity class."},{"owner":{"account_id":2228780,"reputation":542,"user_id":1966940,"accept_rate":80,"display_name":"Jamie Reid"},"score":0,"creation_date":1683288359,"post_id":76181708,"comment_id":134347528,"body_markdown":"Thank you, that was a mistake, I meant to add a NotNull annotation but this doesnt fix the problem","body":"Thank you, that was a mistake, I meant to add a NotNull annotation but this doesnt fix the problem"}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683291187,"creation_date":1683291187,"answer_id":76182421,"question_id":76181708,"body_markdown":"You are using `SubtitleContents` as a column in another entity class `Subtitle` without a proper annotation. Probably you meant `@OneToOne` but it is not (yet) there. Hibernate doesn&#39;t know what to do with it. The same problem with columns `previousSubtitleContents` and `nextSubtitleContents`.","title":"How can I create a Spring Entity that has an object of the same type","body":"<p>You are using <code>SubtitleContents</code> as a column in another entity class <code>Subtitle</code> without a proper annotation. Probably you meant <code>@OneToOne</code> but it is not (yet) there. Hibernate doesn't know what to do with it. The same problem with columns <code>previousSubtitleContents</code> and <code>nextSubtitleContents</code>.</p>\n"}],"owner":{"account_id":2228780,"reputation":542,"user_id":1966940,"accept_rate":80,"display_name":"Jamie Reid"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683291187,"creation_date":1683286237,"question_id":76181708,"body_markdown":"The project can be found here: github.com/jareid/SRTTranslator\r\n\r\nI am trying to add the REST API methods for a simple Spring application\r\n\r\nMy SubtitleContents class contains a nextSubtitleContents and previousSubtitleContents which are both SubtitleContents objects. THe file can be found here: https://github.com/jareid/SRTTranslator/blob/main/src/main/java/com/jreid/srttranslator/entities/SubtitleContents.java\r\n\r\nThis results in the following error when running the application\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Could not determine recommended JdbcType for `com.jreid.srttranslator.entities.SubtitleContents`\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.8.jar:6.0.8]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.8.jar:6.0.8]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.8.jar:6.0.8]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.8.jar:6.0.8]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.8.jar:6.0.8]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.8.jar:6.0.8]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.8.jar:6.0.8]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1132) ~[spring-context-6.0.8.jar:6.0.8]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:907) ~[spring-context-6.0.8.jar:6.0.8]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.8.jar:6.0.8]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.6.jar:3.0.6]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732) ~[spring-boot-3.0.6.jar:3.0.6]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[spring-boot-3.0.6.jar:3.0.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:310) ~[spring-boot-3.0.6.jar:3.0.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1304) ~[spring-boot-3.0.6.jar:3.0.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1293) ~[spring-boot-3.0.6.jar:3.0.6]\r\n\tat com.jreid.srttranslator.SrttranslatorApplication.main(SrttranslatorApplication.java:28) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n```","title":"How can I create a Spring Entity that has an object of the same type","body":"<p>The project can be found here: github.com/jareid/SRTTranslator</p>\n<p>I am trying to add the REST API methods for a simple Spring application</p>\n<p>My SubtitleContents class contains a nextSubtitleContents and previousSubtitleContents which are both SubtitleContents objects. THe file can be found here: <a href=\"https://github.com/jareid/SRTTranslator/blob/main/src/main/java/com/jreid/srttranslator/entities/SubtitleContents.java\" rel=\"nofollow noreferrer\">https://github.com/jareid/SRTTranslator/blob/main/src/main/java/com/jreid/srttranslator/entities/SubtitleContents.java</a></p>\n<p>This results in the following error when running the application</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Could not determine recommended JdbcType for `com.jreid.srttranslator.entities.SubtitleContents`\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.8.jar:6.0.8]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.8.jar:6.0.8]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.8.jar:6.0.8]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.8.jar:6.0.8]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.8.jar:6.0.8]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.8.jar:6.0.8]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.8.jar:6.0.8]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1132) ~[spring-context-6.0.8.jar:6.0.8]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:907) ~[spring-context-6.0.8.jar:6.0.8]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.8.jar:6.0.8]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.6.jar:3.0.6]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732) ~[spring-boot-3.0.6.jar:3.0.6]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[spring-boot-3.0.6.jar:3.0.6]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:310) ~[spring-boot-3.0.6.jar:3.0.6]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1304) ~[spring-boot-3.0.6.jar:3.0.6]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1293) ~[spring-boot-3.0.6.jar:3.0.6]\n    at com.jreid.srttranslator.SrttranslatorApplication.main(SrttranslatorApplication.java:28) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n</code></pre>\n"},{"tags":["java","api","elasticsearch","builder","apiclient"],"answers":[{"tags":[],"owner":{"account_id":5028364,"reputation":31224,"user_id":4039431,"accept_rate":94,"display_name":"Amit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674627203,"creation_date":1674627203,"answer_id":75230266,"question_id":75229812,"body_markdown":"you need to use below code to create `fieldValues` for your `names`\r\n\r\n```\r\nList&lt;FieldValue&gt; fieldValues = names.stream().map(FieldValue::of).toList();\r\n```\r\n","title":"Create TermsQuery with List&lt;String&gt; using elasticsearch java api client","body":"<p>you need to use below code to create <code>fieldValues</code> for your <code>names</code></p>\n<pre><code>List&lt;FieldValue&gt; fieldValues = names.stream().map(FieldValue::of).toList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13601388,"reputation":21,"user_id":9811957,"display_name":"Vanessa Peixoto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683291068,"creation_date":1683291068,"answer_id":76182398,"question_id":75229812,"body_markdown":"You could also do the following:\r\n\r\n`new TermsQueryField(names.Select(name =&gt; FieldValue.String(name)).ToList())`","title":"Create TermsQuery with List&lt;String&gt; using elasticsearch java api client","body":"<p>You could also do the following:</p>\n<p><code>new TermsQueryField(names.Select(name =&gt; FieldValue.String(name)).ToList())</code></p>\n"}],"owner":{"account_id":24143111,"reputation":77,"user_id":18109095,"display_name":"Anamika"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":579,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75230266,"answer_count":2,"score":0,"last_activity_date":1683291068,"creation_date":1674622369,"question_id":75229812,"body_markdown":"I have an elastic search query as below.\r\n```\r\n{\r\n   &quot;query&quot;:{\r\n      &quot;bool&quot;:{\r\n         &quot;filter&quot;:{\r\n            &quot;bool&quot;:{\r\n               &quot;must_not&quot;:{\r\n                  &quot;terms&quot;:{\r\n                     &quot;names&quot;:[\r\n                        &quot;john&quot;,\r\n                        &quot;jose&quot;\r\n                     ]\r\n                  }\r\n               }\r\n            }\r\n         }\r\n      }\r\n   }\r\n}\r\n```\r\nI am trying to build something like this in the code corresponding to the query.\r\n```\r\nBoolQuery.Builder builder = new BoolQueryBuilder();\r\nList&lt;String&gt; names = [&quot;john&quot;,&quot;jose&quot;];\r\nTermsQueryField field = new TermsQueryBuilder().value(names).build();\r\nbuilder.mustNot(TermsQuery.of(t -&gt; t.field(&quot;names&quot;).terms(field))._toQuery());\r\n```\r\nBut I am getting error in this line as it is expecting List of FieldValue inside value function and not List of String.\r\n```\r\nTermsQueryField field = new TermsQueryBuilder().value(names).build();\r\n```\r\nCan someone help on this?","title":"Create TermsQuery with List&lt;String&gt; using elasticsearch java api client","body":"<p>I have an elastic search query as below.</p>\n<pre><code>{\n   &quot;query&quot;:{\n      &quot;bool&quot;:{\n         &quot;filter&quot;:{\n            &quot;bool&quot;:{\n               &quot;must_not&quot;:{\n                  &quot;terms&quot;:{\n                     &quot;names&quot;:[\n                        &quot;john&quot;,\n                        &quot;jose&quot;\n                     ]\n                  }\n               }\n            }\n         }\n      }\n   }\n}\n</code></pre>\n<p>I am trying to build something like this in the code corresponding to the query.</p>\n<pre><code>BoolQuery.Builder builder = new BoolQueryBuilder();\nList&lt;String&gt; names = [&quot;john&quot;,&quot;jose&quot;];\nTermsQueryField field = new TermsQueryBuilder().value(names).build();\nbuilder.mustNot(TermsQuery.of(t -&gt; t.field(&quot;names&quot;).terms(field))._toQuery());\n</code></pre>\n<p>But I am getting error in this line as it is expecting List of FieldValue inside value function and not List of String.</p>\n<pre><code>TermsQueryField field = new TermsQueryBuilder().value(names).build();\n</code></pre>\n<p>Can someone help on this?</p>\n"},{"tags":["java","android","navigation"],"comments":[{"owner":{"account_id":1301014,"reputation":8110,"user_id":1250929,"accept_rate":72,"display_name":"Kristy Welsh"},"score":0,"creation_date":1683291860,"post_id":76182274,"comment_id":134348378,"body_markdown":"It may not help your situation much, but come over to the modern Android architecture/techstack:  kotlin, coroutines, hilt and compose","body":"It may not help your situation much, but come over to the modern Android architecture/techstack:  kotlin, coroutines, hilt and compose"},{"owner":{"account_id":26524509,"reputation":25,"user_id":20159924,"display_name":"Oganes"},"score":0,"creation_date":1683292094,"post_id":76182274,"comment_id":134348438,"body_markdown":"@KristyWelsh Can you tell me which method would work best for my need? I need a side menu","body":"@KristyWelsh Can you tell me which method would work best for my need? I need a side menu"},{"owner":{"account_id":1301014,"reputation":8110,"user_id":1250929,"accept_rate":72,"display_name":"Kristy Welsh"},"score":0,"creation_date":1683292842,"post_id":76182274,"comment_id":134348606,"body_markdown":"https://www.geeksforgeeks.org/navigation-drawer-in-android/","body":"<a href=\"https://www.geeksforgeeks.org/navigation-drawer-in-android/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/navigation-drawer-in-android</a>"},{"owner":{"account_id":26524509,"reputation":25,"user_id":20159924,"display_name":"Oganes"},"score":0,"creation_date":1683293065,"post_id":76182274,"comment_id":134348674,"body_markdown":"@KristyWelsh\nThat doesn&#39;t solve my goal, unfortunately. The goal is for this menu to be available from all classes and activites.","body":"@KristyWelsh That doesn&#39;t solve my goal, unfortunately. The goal is for this menu to be available from all classes and activites."},{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1683296247,"post_id":76182274,"comment_id":134349553,"body_markdown":"Using multiple activities for a navigation drawer hasn&#39;t been a recommended practice for [over 4 years](https://youtu.be/2k8x8V77CrU).","body":"Using multiple activities for a navigation drawer hasn&#39;t been a recommended practice for <a href=\"https://youtu.be/2k8x8V77CrU\" rel=\"nofollow noreferrer\">over 4 years</a>."}],"owner":{"account_id":26524509,"reputation":25,"user_id":20159924,"display_name":"Oganes"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683290249,"creation_date":1683290249,"question_id":76182274,"body_markdown":"I need a single &quot;Navigation Drawer Activity&quot; in Android Studio for multiple classes and activities, I tried to learn this myself but I don&#39;t get the result I want. I need all new classes making extrens to baseActivity to be able to call the side menu. Right now there is no such feature, and whatever I do I can&#39;t get it to work. Here is my code for understanding:\r\n**BaseActivity**\r\n\r\n    public class BaseActivity extends AppCompatActivity implements NavigationView.OnNavigationItemSelectedListener{\r\n    public ActivityBaseBinding binding;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivityBaseBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n        NavigationView navigationView = findViewById(R.id.nav_view);\r\n        navigationView.setNavigationItemSelectedListener(this);\r\n    }\r\n\r\n    public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n        int id = item.getItemId(); // загружаем в ид какую кнопку нажал пользователь\r\n        if (id == R.id.nav_home) {\r\n            Intent intent = new Intent(this, MainActivity.class);\r\n            startActivity(intent);\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\r\n**MainActivity**\r\n\r\n    public class MainActivity extends BaseActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n    }\r\n}\r\n\r\n**DrawerLayout**\r\n\r\n    &lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:id=&quot;@+id/drawer_layout&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:fitsSystemWindows=&quot;true&quot;\r\n    tools:openDrawer=&quot;start&quot;&gt;\r\n\r\n    &lt;FrameLayout\r\n        android:id=&quot;@+id/content_frame&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        /&gt;\r\n    &lt;include\r\n        android:id=&quot;@+id/app_bar_base&quot;\r\n        layout=&quot;@layout/app_bar_base&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        /&gt;\r\n    &lt;com.google.android.material.navigation.NavigationView\r\n        android:id=&quot;@+id/nav_view&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_gravity=&quot;start&quot;\r\n        android:fitsSystemWindows=&quot;true&quot;\r\n        app:headerLayout=&quot;@layout/nav_header_base&quot;\r\n        app:menu=&quot;@menu/activity_base_drawer&quot;\r\n        /&gt;\r\n\r\n  &lt;/androidx.drawerlayout.widget.DrawerLayout&gt;","title":"A single &quot;Navigation Drawer Activity&quot; in Android Studio for multiple classes and activities","body":"<p>I need a single &quot;Navigation Drawer Activity&quot; in Android Studio for multiple classes and activities, I tried to learn this myself but I don't get the result I want. I need all new classes making extrens to baseActivity to be able to call the side menu. Right now there is no such feature, and whatever I do I can't get it to work. Here is my code for understanding:\n<strong>BaseActivity</strong></p>\n<pre><code>public class BaseActivity extends AppCompatActivity implements NavigationView.OnNavigationItemSelectedListener{\npublic ActivityBaseBinding binding;\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    binding = ActivityBaseBinding.inflate(getLayoutInflater());\n    setContentView(binding.getRoot());\n\n    NavigationView navigationView = findViewById(R.id.nav_view);\n    navigationView.setNavigationItemSelectedListener(this);\n}\n\npublic boolean onNavigationItemSelected(@NonNull MenuItem item) {\n    int id = item.getItemId(); // загружаем в ид какую кнопку нажал пользователь\n    if (id == R.id.nav_home) {\n        Intent intent = new Intent(this, MainActivity.class);\n        startActivity(intent);\n    }\n    return true;\n}\n</code></pre>\n<p>}</p>\n<p><strong>MainActivity</strong></p>\n<pre><code>public class MainActivity extends BaseActivity {\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n}\n</code></pre>\n<p>}</p>\n<p><strong>DrawerLayout</strong></p>\n<pre><code>&lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\nandroid:id=&quot;@+id/drawer_layout&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\nandroid:fitsSystemWindows=&quot;true&quot;\ntools:openDrawer=&quot;start&quot;&gt;\n\n&lt;FrameLayout\n    android:id=&quot;@+id/content_frame&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    /&gt;\n&lt;include\n    android:id=&quot;@+id/app_bar_base&quot;\n    layout=&quot;@layout/app_bar_base&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    /&gt;\n&lt;com.google.android.material.navigation.NavigationView\n    android:id=&quot;@+id/nav_view&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:layout_gravity=&quot;start&quot;\n    android:fitsSystemWindows=&quot;true&quot;\n    app:headerLayout=&quot;@layout/nav_header_base&quot;\n    app:menu=&quot;@menu/activity_base_drawer&quot;\n    /&gt;\n</code></pre>\n<p>&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;</p>\n"},{"tags":["java","oracle-adf"],"answers":[{"tags":[],"owner":{"account_id":2658183,"reputation":967,"user_id":2298444,"accept_rate":91,"display_name":"Cedric"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683290025,"creation_date":1683290025,"answer_id":76182240,"question_id":76170010,"body_markdown":"To have the second showDetailItem of the panelTabbed disclosed, you need his disclosed attribute to be true and the other showDetailItem disclosed attribute to be false.\r\n\r\nIn your case, the boolean #{pageFlowScope.expandLine} need to be equal to TRUE and #{pageFlowScope.expandHeader} equal to FALSE\r\n\r\nYou can test it by simply putting the value true or false in the dislosed attribute.\r\nFor example, this would work : \r\n\r\n    &lt;af:panelTabbed position=&quot;above&quot; id=&quot;pt1&quot; styleClass=&quot;AFStretchWidth&quot; childCreation=&quot;lazy&quot;&gt;\r\n            &lt;af:showDetailItem id=&quot;tab1&quot;\r\n                               text=&quot;tab1&quot;\r\n                               disclosed=&quot;false&quot;\r\n                               stretchChildren=&quot;first&quot;&gt;\r\n            &lt;/af:showDetailItem&gt;\r\n            &lt;af:showDetailItem id=&quot;tab2&quot;\r\n                               text=&quot;tab2&quot;\r\n                               stretchChildren=&quot;first&quot;\r\n                               disclosed=&quot;true&quot;\r\n                               styleClass=&quot;AFStretchWidth&quot;&gt;\r\n            &lt;/af:showDetailItem&gt;\r\n    &lt;/af:panelTabbed&gt;\r\n\r\nor event without disclosed=&quot;false&quot; since disclosed default value is false : \r\n\r\n    &lt;af:panelTabbed position=&quot;above&quot; id=&quot;pt1&quot; styleClass=&quot;AFStretchWidth&quot; childCreation=&quot;lazy&quot;&gt;\r\n            &lt;af:showDetailItem id=&quot;tab1&quot;\r\n                               text=&quot;tab1&quot;\r\n                               stretchChildren=&quot;first&quot;&gt;\r\n            &lt;/af:showDetailItem&gt;\r\n            &lt;af:showDetailItem id=&quot;tab2&quot;\r\n                               text=&quot;tab2&quot;\r\n                               stretchChildren=&quot;first&quot;\r\n                               disclosed=&quot;true&quot;\r\n                               styleClass=&quot;AFStretchWidth&quot;&gt;\r\n            &lt;/af:showDetailItem&gt;\r\n    &lt;/af:panelTabbed&gt;\r\n\r\nIn those 2 example, the second showDetailItem will be disclosed when first displayed.","title":"How to set the default tabbedpannel in adf?","body":"<p>To have the second showDetailItem of the panelTabbed disclosed, you need his disclosed attribute to be true and the other showDetailItem disclosed attribute to be false.</p>\n<p>In your case, the boolean #{pageFlowScope.expandLine} need to be equal to TRUE and #{pageFlowScope.expandHeader} equal to FALSE</p>\n<p>You can test it by simply putting the value true or false in the dislosed attribute.\nFor example, this would work :</p>\n<pre><code>&lt;af:panelTabbed position=&quot;above&quot; id=&quot;pt1&quot; styleClass=&quot;AFStretchWidth&quot; childCreation=&quot;lazy&quot;&gt;\n        &lt;af:showDetailItem id=&quot;tab1&quot;\n                           text=&quot;tab1&quot;\n                           disclosed=&quot;false&quot;\n                           stretchChildren=&quot;first&quot;&gt;\n        &lt;/af:showDetailItem&gt;\n        &lt;af:showDetailItem id=&quot;tab2&quot;\n                           text=&quot;tab2&quot;\n                           stretchChildren=&quot;first&quot;\n                           disclosed=&quot;true&quot;\n                           styleClass=&quot;AFStretchWidth&quot;&gt;\n        &lt;/af:showDetailItem&gt;\n&lt;/af:panelTabbed&gt;\n</code></pre>\n<p>or event without disclosed=&quot;false&quot; since disclosed default value is false :</p>\n<pre><code>&lt;af:panelTabbed position=&quot;above&quot; id=&quot;pt1&quot; styleClass=&quot;AFStretchWidth&quot; childCreation=&quot;lazy&quot;&gt;\n        &lt;af:showDetailItem id=&quot;tab1&quot;\n                           text=&quot;tab1&quot;\n                           stretchChildren=&quot;first&quot;&gt;\n        &lt;/af:showDetailItem&gt;\n        &lt;af:showDetailItem id=&quot;tab2&quot;\n                           text=&quot;tab2&quot;\n                           stretchChildren=&quot;first&quot;\n                           disclosed=&quot;true&quot;\n                           styleClass=&quot;AFStretchWidth&quot;&gt;\n        &lt;/af:showDetailItem&gt;\n&lt;/af:panelTabbed&gt;\n</code></pre>\n<p>In those 2 example, the second showDetailItem will be disclosed when first displayed.</p>\n"}],"owner":{"account_id":14387106,"reputation":142,"user_id":10392791,"display_name":"Vyush Agarwal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683290025,"creation_date":1683180301,"question_id":76170010,"body_markdown":"I have a page with a tabbedpanel with 2 item on on changing the selected item and reopening the page the last selected item is the selected tab. I want to set the first tab as the default tab how can i achieve this.\r\n\r\nI have a JSFF page\r\n``` \r\n&lt;af:panelTabbed position=&quot;above&quot; id=&quot;pt1&quot; styleClass=&quot;AFStretchWidth&quot; childCreation=&quot;lazy&quot;&gt;\r\n        &lt;af:showDetailItem id=&quot;tab1&quot;\r\n                           text=&quot;tab1&quot;\r\n                           disclosed=&quot;#{pageFlowScope.expandHeader}&quot; \r\n                           stretchChildren=&quot;first&quot;&gt;\r\n        &lt;/af:showDetailItem&gt;\r\n        &lt;af:showDetailItem id=&quot;tab2&quot;\r\n                           text=&quot;tab2&quot;\r\n                           stretchChildren=&quot;first&quot;\r\n                           disclosed=&quot;#{pageFlowScope.expandLine}&quot;\r\n                           styleClass=&quot;AFStretchWidth&quot;&gt;\r\n        &lt;/af:showDetailItem&gt;\r\n&lt;/af:panelTabbed&gt;\r\n```\r\nAnd a **Backing Bean** \r\nHow do i use these two so that when ever i open this page the first tab is opened by default.\r\n","title":"How to set the default tabbedpannel in adf?","body":"<p>I have a page with a tabbedpanel with 2 item on on changing the selected item and reopening the page the last selected item is the selected tab. I want to set the first tab as the default tab how can i achieve this.</p>\n<p>I have a JSFF page</p>\n<pre><code>&lt;af:panelTabbed position=&quot;above&quot; id=&quot;pt1&quot; styleClass=&quot;AFStretchWidth&quot; childCreation=&quot;lazy&quot;&gt;\n        &lt;af:showDetailItem id=&quot;tab1&quot;\n                           text=&quot;tab1&quot;\n                           disclosed=&quot;#{pageFlowScope.expandHeader}&quot; \n                           stretchChildren=&quot;first&quot;&gt;\n        &lt;/af:showDetailItem&gt;\n        &lt;af:showDetailItem id=&quot;tab2&quot;\n                           text=&quot;tab2&quot;\n                           stretchChildren=&quot;first&quot;\n                           disclosed=&quot;#{pageFlowScope.expandLine}&quot;\n                           styleClass=&quot;AFStretchWidth&quot;&gt;\n        &lt;/af:showDetailItem&gt;\n&lt;/af:panelTabbed&gt;\n</code></pre>\n<p>And a <strong>Backing Bean</strong>\nHow do i use these two so that when ever i open this page the first tab is opened by default.</p>\n"},{"tags":["java","vlcj"],"comments":[{"owner":{"account_id":3101468,"reputation":3914,"user_id":2625478,"accept_rate":82,"display_name":"caprica"},"score":0,"creation_date":1475182298,"post_id":39743850,"comment_id":66853763,"body_markdown":"Well, do you want the time or the length? And what do you mean by &quot;time&quot; precisely?","body":"Well, do you want the time or the length? And what do you mean by &quot;time&quot; precisely?"},{"owner":{"account_id":9032584,"reputation":21,"user_id":6729684,"accept_rate":50,"display_name":"Yuuup"},"score":0,"creation_date":1475324268,"post_id":39743850,"comment_id":66904383,"body_markdown":"I found the solution of my problem. I use an EventListener that override the method finish and that help me so much. Thank you!","body":"I found the solution of my problem. I use an EventListener that override the method finish and that help me so much. Thank you!"}],"answers":[{"tags":[],"owner":{"account_id":3101468,"reputation":3914,"user_id":2625478,"accept_rate":82,"display_name":"caprica"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1475182501,"creation_date":1475182501,"answer_id":39779863,"question_id":39743850,"body_markdown":"The `getLength()` method returns -1 if the length is unknown. It depends on the type of media, but sometimes the length is not known until some time after the media starts playing.\r\n\r\nSimilarly, `getTime()` returns -1 for the time (number of milliseconds from the start of the media) if the time is not known - i.e. if the media has not started playing yet.\r\n\r\nThis is simply how the underlying native library works, and therefore how vlcj works also.","title":"VLCJ Get Video Time","body":"<p>The <code>getLength()</code> method returns -1 if the length is unknown. It depends on the type of media, but sometimes the length is not known until some time after the media starts playing.</p>\n\n<p>Similarly, <code>getTime()</code> returns -1 for the time (number of milliseconds from the start of the media) if the time is not known - i.e. if the media has not started playing yet.</p>\n\n<p>This is simply how the underlying native library works, and therefore how vlcj works also.</p>\n"},{"tags":[],"owner":{"account_id":13479851,"reputation":171,"user_id":9725520,"display_name":"weilin wang"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1596721362,"creation_date":1596721362,"answer_id":63284918,"question_id":39743850,"body_markdown":"get current video time\r\n```\r\nembeddedMediaPlayer.status().time();\r\n```\r\nget video duration\r\n\r\n```\r\nembeddedMediaPlayer.status().length();\r\n```\r\nget current video position\r\n```\r\nembeddedMediaPlayer.status().position()\r\n```\r\nnote:my vlcj version is 4.4.4\r\n","title":"VLCJ Get Video Time","body":"<p>get current video time</p>\n<pre><code>embeddedMediaPlayer.status().time();\n</code></pre>\n<p>get video duration</p>\n<pre><code>embeddedMediaPlayer.status().length();\n</code></pre>\n<p>get current video position</p>\n<pre><code>embeddedMediaPlayer.status().position()\n</code></pre>\n<p>note:my vlcj version is 4.4.4</p>\n"},{"tags":[],"owner":{"account_id":10078953,"reputation":3,"user_id":7450025,"display_name":"Mustafa Jamal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683289920,"creation_date":1683289920,"answer_id":76182225,"question_id":39743850,"body_markdown":"this worked for me &gt;&gt; using Version `4.8.2` \r\n\r\n    embeddedMediaPlayer.media().info().duration();\r\nit `returns -1` if it can&#39;t get the time and the `long` duration for the video length value.\r\n\r\n","title":"VLCJ Get Video Time","body":"<p>this worked for me &gt;&gt; using Version <code>4.8.2</code></p>\n<pre><code>embeddedMediaPlayer.media().info().duration();\n</code></pre>\n<p>it <code>returns -1</code> if it can't get the time and the <code>long</code> duration for the video length value.</p>\n"}],"owner":{"account_id":9032584,"reputation":21,"user_id":6729684,"accept_rate":50,"display_name":"Yuuup"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1637,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1683289920,"creation_date":1475056142,"question_id":39743850,"body_markdown":"I have the following code and i want to get the time of my Video but it returns -1. Anyone know why?\r\n\r\n    long video= ourMediaPlayer.getMediaPlayer().getLength();\r\n\r\nI have tried with getTime() instead of getLength but it returns -1.\r\n\r\n\r\nThanks for your help.","title":"VLCJ Get Video Time","body":"<p>I have the following code and i want to get the time of my Video but it returns -1. Anyone know why?</p>\n\n<pre><code>long video= ourMediaPlayer.getMediaPlayer().getLength();\n</code></pre>\n\n<p>I have tried with getTime() instead of getLength but it returns -1.</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["java","json","jackson","deserialization","jackson-databind"],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683289801,"creation_date":1683289801,"answer_id":76182207,"question_id":76181103,"body_markdown":"Your `to` method doesn’t know what `T` is and the `TypeReference` class has no way to create information that doesn’t exist. All it carries to the JSON deserializer, is “`T`”.\r\n\r\nIn contrast, your statement\r\n\r\n```java\r\nMap&lt;String, Map&lt;Long, Long&gt;&gt; map2 = new ObjectMapper()\r\n        .readValue(jsonString, new TypeReference&lt;&gt;() {});\r\n```\r\n\r\n*does* know that the intended target type is `Map&lt;String, Map&lt;Long, Long&gt;&gt;` and the compiler infers that you are creating a `new TypeReference&lt;Map&lt;String, Map&lt;Long, Long&gt;&gt;&gt;() {}` (this works since Java&#160;9).\r\n\r\nIn other words, the purpose of the `TypeReference` is to carry the type information from a code location where the actual type is known through the generic methods. It does not work when you create the `TypeReference` in a generic method where the type information is already lost.\r\n","title":"TypeReference created from Generic type does not work as intended","body":"<p>Your <code>to</code> method doesn’t know what <code>T</code> is and the <code>TypeReference</code> class has no way to create information that doesn’t exist. All it carries to the JSON deserializer, is “<code>T</code>”.</p>\n<p>In contrast, your statement</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Map&lt;Long, Long&gt;&gt; map2 = new ObjectMapper()\n        .readValue(jsonString, new TypeReference&lt;&gt;() {});\n</code></pre>\n<p><em>does</em> know that the intended target type is <code>Map&lt;String, Map&lt;Long, Long&gt;&gt;</code> and the compiler infers that you are creating a <code>new TypeReference&lt;Map&lt;String, Map&lt;Long, Long&gt;&gt;&gt;() {}</code> (this works since Java 9).</p>\n<p>In other words, the purpose of the <code>TypeReference</code> is to carry the type information from a code location where the actual type is known through the generic methods. It does not work when you create the <code>TypeReference</code> in a generic method where the type information is already lost.</p>\n"}],"owner":{"account_id":25833811,"reputation":1,"user_id":19570509,"display_name":"Hi Jonk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683289801,"creation_date":1683281626,"question_id":76181103,"body_markdown":"I am trying to parse a JSON string into a `Map&lt;String, Map&lt;Long, Long&gt;&gt;`. I had a method that performed serialization using Jackson&#39;s `ObjectMapper` by constructing a `TypeReference` using a generic type, but this did not serialize the object correctly.\r\n\r\nThe method I was using looked like to serialize the string into Map&lt;String, Map&lt;Long, Long&gt; is this:\r\n```\r\npublic static &lt;T&gt; T to(String jsonString) {\r\n    TypeReference&lt;T&gt; typeReference = new TypeReference&lt;T&gt;() {};\r\n    return WrapThrowingSupplier.wrapIOException(() -&gt; new ObjectMapper().readValue(jsonString, typeReference));\r\n}\r\n```\r\nWhich I called as follows:\r\n```\r\nMap&lt;String, Map&lt;Long, Long&gt;&gt; map = to(jsonString);\r\n```\r\n\r\nHowever, this did not work, and trying to iterate through the inner map&#39;s keyset like:\r\n```\r\ninnerMap.forEach(entry -&gt; //do things with long key);\r\n``` \r\nthrew `ClassCastException: class java.lang.String cannot be cast to class java.lang.Long`.\r\n\r\nI&#39;m guessing that the `String` keys in the JSON could not be converted to `Long` in the inner map.\r\nHowever, I tried doing this after looking at another SO answer:\r\n```\r\nMap&lt;String, Map&lt;Long, Long&gt;&gt; map2 = new ObjectMapper().readValue(jsonString, new TypeReference&lt;&gt;() {});\r\n```\r\n\r\nwhich works as expected. What is the difference between these two approaches?","title":"TypeReference created from Generic type does not work as intended","body":"<p>I am trying to parse a JSON string into a <code>Map&lt;String, Map&lt;Long, Long&gt;&gt;</code>. I had a method that performed serialization using Jackson's <code>ObjectMapper</code> by constructing a <code>TypeReference</code> using a generic type, but this did not serialize the object correctly.</p>\n<p>The method I was using looked like to serialize the string into Map&lt;String, Map&lt;Long, Long&gt; is this:</p>\n<pre><code>public static &lt;T&gt; T to(String jsonString) {\n    TypeReference&lt;T&gt; typeReference = new TypeReference&lt;T&gt;() {};\n    return WrapThrowingSupplier.wrapIOException(() -&gt; new ObjectMapper().readValue(jsonString, typeReference));\n}\n</code></pre>\n<p>Which I called as follows:</p>\n<pre><code>Map&lt;String, Map&lt;Long, Long&gt;&gt; map = to(jsonString);\n</code></pre>\n<p>However, this did not work, and trying to iterate through the inner map's keyset like:</p>\n<pre><code>innerMap.forEach(entry -&gt; //do things with long key);\n</code></pre>\n<p>threw <code>ClassCastException: class java.lang.String cannot be cast to class java.lang.Long</code>.</p>\n<p>I'm guessing that the <code>String</code> keys in the JSON could not be converted to <code>Long</code> in the inner map.\nHowever, I tried doing this after looking at another SO answer:</p>\n<pre><code>Map&lt;String, Map&lt;Long, Long&gt;&gt; map2 = new ObjectMapper().readValue(jsonString, new TypeReference&lt;&gt;() {});\n</code></pre>\n<p>which works as expected. What is the difference between these two approaches?</p>\n"},{"tags":["java","spring","spring-boot","circuit-breaker","resilience4j"],"comments":[{"owner":{"account_id":15175692,"reputation":144,"user_id":10950497,"display_name":"orser"},"score":0,"creation_date":1683364487,"post_id":76181845,"comment_id":134358167,"body_markdown":"Are you making your request to the /recipe/** path which has the circuit breaker?","body":"Are you making your request to the /recipe/** path which has the circuit breaker?"},{"owner":{"account_id":20704082,"reputation":1613,"user_id":16143377,"display_name":"silverfox"},"score":0,"creation_date":1683367103,"post_id":76181845,"comment_id":134358412,"body_markdown":"@orser Yes, I&#39;m making the request to that path through the Gateway. Everything return as expected, except for the 200 OK code. You can also see it in the log: `Pattern &quot;/recipe/**&quot; matches against value &quot;/recipe/port&quot;`","body":"@orser Yes, I&#39;m making the request to that path through the Gateway. Everything return as expected, except for the 200 OK code. You can also see it in the log: <code>Pattern &quot;&#47;recipe&#47;**&quot; matches against value &quot;&#47;recipe&#47;port&quot;</code>"},{"owner":{"account_id":15175692,"reputation":144,"user_id":10950497,"display_name":"orser"},"score":0,"creation_date":1683543388,"post_id":76181845,"comment_id":134377675,"body_markdown":"Can you try using spring boot 3?","body":"Can you try using spring boot 3?"},{"owner":{"account_id":20704082,"reputation":1613,"user_id":16143377,"display_name":"silverfox"},"score":0,"creation_date":1683557259,"post_id":76181845,"comment_id":134380872,"body_markdown":"@orser I tried that in the first place. Spring boot 3 work very weirdly with Netflix Eureka. That&#39;s why I downgraded it.","body":"@orser I tried that in the first place. Spring boot 3 work very weirdly with Netflix Eureka. That&#39;s why I downgraded it."},{"owner":{"account_id":15175692,"reputation":144,"user_id":10950497,"display_name":"orser"},"score":0,"creation_date":1683621445,"post_id":76181845,"comment_id":134390713,"body_markdown":"I am using pretty much the same config with Spring boot 3 and everything works fine. Maybe there is some auto configuration missing if you use boot 2","body":"I am using pretty much the same config with Spring boot 3 and everything works fine. Maybe there is some auto configuration missing if you use boot 2"},{"owner":{"account_id":20704082,"reputation":1613,"user_id":16143377,"display_name":"silverfox"},"score":0,"creation_date":1683707918,"post_id":76181845,"comment_id":134406390,"body_markdown":"@orser I&#39;ve switched to Spring Boot 3.0.6, everything autoconfigured from Spring Initializr, even the Resilience4j circuit breaker, nothing added by hand. Same problem remained. Can you elaborate on how you test the circuit breaker? If possible, can I get access to the sample?","body":"@orser I&#39;ve switched to Spring Boot 3.0.6, everything autoconfigured from Spring Initializr, even the Resilience4j circuit breaker, nothing added by hand. Same problem remained. Can you elaborate on how you test the circuit breaker? If possible, can I get access to the sample?"}],"owner":{"account_id":20704082,"reputation":1613,"user_id":16143377,"display_name":"silverfox"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":704,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683289611,"creation_date":1683287101,"question_id":76181845,"body_markdown":"This has been asked multiple times, I have visited all of those questions and still can&#39;t seem to get the Circuit Breaker to break.\r\n\r\nHere&#39;s the Configuration:\r\n```java\r\n@Configuration\r\npublic class CircuitBreaker {\r\n    @Bean\r\n    public Customizer&lt;ReactiveResilience4JCircuitBreakerFactory&gt; defaultCustomizer() {\r\n        return factory -&gt; factory.configure(id -&gt; {\r\n                id.circuitBreakerConfig(CircuitBreakerConfig.ofDefaults());\r\n                id.timeLimiterConfig(TimeLimiterConfig.custom().timeoutDuration(Duration.ofMillis(200)).build());\r\n            }\r\n        , &quot;myCircuitBreaker&quot;);\r\n    }\r\n}\r\n```\r\nThe routing:\r\n```java\r\n@SpringBootApplication\r\n@EnableDiscoveryClient\r\npublic class SpringApiGatewayApplication {\r\n    public static void main(String[] args) {\r\n            SpringApplication.run(SpringApiGatewayApplication.class, args);\r\n    }\r\n\r\n    @Bean\r\n    public RouteLocator myRoutes(RouteLocatorBuilder builder, ReactiveResilience4JCircuitBreakerFactory circuitBreakerFactory) {\r\n        return builder.routes()\r\n                .route(p -&gt; p\r\n                        .path(&quot;/recipe/**&quot;)\r\n                        .filters(f -&gt; f.circuitBreaker(c -&gt; {\r\n                            c.setName(&quot;myCircuitBreaker&quot;);\r\n                            System.out.println(c.getId());\r\n                        }))\r\n                        .uri(&quot;lb://recipe-service&quot;)\r\n                )\r\n                .route(p -&gt; p\r\n                        .path(&quot;/order/**&quot;)\r\n                        .uri(&quot;lb://order-service&quot;)\r\n                )\r\n                .build();\r\n    }\r\n}\r\n```\r\nwhich still print `myCircuitBreaker` as expected.\r\nThe client API (which does not implement any circuit breaking, as I want the Spring Gateway to handle everything):\r\n```java\r\n    @GetMapping(&quot;/port&quot;)\r\n    public ResponseEntity&lt;String&gt; getPort() throws InterruptedException {\r\n        Thread.sleep(300);\r\n        return ResponseEntity.ok(serverPort.toString());\r\n    }\r\n```\r\nand the server responds with `200 OK` (even when ran 20-100 times consecutively) instead of tripping and returning a `503`/`504`.\r\nAnd the `pom.xml` file:\r\n```\r\n&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2021.0.6&lt;/spring-cloud.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\r\n                &lt;artifactId&gt;reactor-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-starter-circuitbreaker-reactor-resilience4j&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;\r\n                &lt;version&gt;2.2.10.RELEASE&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n```\r\n\r\nUsing `logging.level.org.springframework.cloud.gateway=TRACE` returned this:\r\n```\r\n2023-05-05 18:35:45.403 TRACE 30356 --- [ctor-http-nio-5] o.s.c.gateway.filter.NettyRoutingFilter  : outbound route: 9068368b, inbound: [c68d633f-11] \r\n2023-05-05 18:35:45.713 TRACE 30356 --- [ctor-http-nio-5] o.s.c.g.filter.NettyWriteResponseFilter  : NettyWriteResponseFilter start inbound: 9068368b, outbound: [c68d633f-11] \r\n2023-05-05 18:35:46.495 TRACE 30356 --- [     parallel-9] o.s.c.g.f.WeightCalculatorWebFilter      : Weights attr: {}\r\n2023-05-05 18:35:46.495 TRACE 30356 --- [     parallel-9] o.s.c.g.h.p.PathRoutePredicateFactory    : Pattern &quot;/recipe/**&quot; matches against value &quot;/recipe/port&quot;\r\n2023-05-05 18:35:46.495 DEBUG 30356 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: 4a10df9b-21bd-4d09-b565-3aa824503289\r\n2023-05-05 18:35:46.495 DEBUG 30356 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/recipe/port] to Route{id=&#39;4a10df9b-21bd-4d09-b565-3aa824503289&#39;, uri=lb://recipe-service, order=0, predicate=Paths: [/recipe/**], match trailing slash: true, gatewayFilters=[[[SpringCloudCircuitBreakerResilience4JFilterFactory name = &#39;myCircuitBreaker&#39;, fallback = [null]], order = 0]], metadata={}}\r\n2023-05-05 18:35:46.495 DEBUG 30356 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [c68d633f-12] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@644cf7a6\r\n2023-05-05 18:35:46.495 DEBUG 30356 --- [     parallel-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@2bfa5678}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@5b4b6f3b}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@61375dff}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@2178d296}, order = 0], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = &#39;myCircuitBreaker&#39;, fallback = [null]], order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@5b8b9b2d}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ReactiveLoadBalancerClientFilter@7ec68821}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.LoadBalancerServiceInstanceCookieFilter@220a5163}, order = 10151], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@58c80957}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@6158113e}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@7a7bb083}, order = 2147483647]]\r\n2023-05-05 18:35:46.495 TRACE 30356 --- [     parallel-9] o.s.c.g.filter.RouteToRequestUrlFilter   : RouteToRequestUrlFilter start\r\n2023-05-05 18:35:46.499 TRACE 30356 --- [     parallel-9] s.c.g.f.ReactiveLoadBalancerClientFilter : ReactiveLoadBalancerClientFilter url before: lb://recipe-service/recipe/port\r\n2023-05-05 18:35:46.499 TRACE 30356 --- [     parallel-9] s.c.g.f.ReactiveLoadBalancerClientFilter : LoadBalancerClientFilter url chosen: http://LAPTOP-42E0D7RO:8091/recipe/port\r\n```\r\nwhich the CircuitBreaker filter does pop up.\r\n\r\nHere&#39;s the documentation for Spring Cloud Circuit Breaker 3.0.1 : https://docs.spring.io/spring-cloud-circuitbreaker/docs/current/reference/html/\r\n\r\nI know I can move everything to the `application.properties` or `application.yaml` and it will probably work, but I want to know why it doesn&#39;t.\r\n\r\n* Additional info: I&#39;m running on Windows 11, Spring Boot  2.7.10, project initialized with Spring Initializr.","title":"Apply Resilience4j Circuit Breaker for Spring Cloud Gateway","body":"<p>This has been asked multiple times, I have visited all of those questions and still can't seem to get the Circuit Breaker to break.</p>\n<p>Here's the Configuration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class CircuitBreaker {\n    @Bean\n    public Customizer&lt;ReactiveResilience4JCircuitBreakerFactory&gt; defaultCustomizer() {\n        return factory -&gt; factory.configure(id -&gt; {\n                id.circuitBreakerConfig(CircuitBreakerConfig.ofDefaults());\n                id.timeLimiterConfig(TimeLimiterConfig.custom().timeoutDuration(Duration.ofMillis(200)).build());\n            }\n        , &quot;myCircuitBreaker&quot;);\n    }\n}\n</code></pre>\n<p>The routing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableDiscoveryClient\npublic class SpringApiGatewayApplication {\n    public static void main(String[] args) {\n            SpringApplication.run(SpringApiGatewayApplication.class, args);\n    }\n\n    @Bean\n    public RouteLocator myRoutes(RouteLocatorBuilder builder, ReactiveResilience4JCircuitBreakerFactory circuitBreakerFactory) {\n        return builder.routes()\n                .route(p -&gt; p\n                        .path(&quot;/recipe/**&quot;)\n                        .filters(f -&gt; f.circuitBreaker(c -&gt; {\n                            c.setName(&quot;myCircuitBreaker&quot;);\n                            System.out.println(c.getId());\n                        }))\n                        .uri(&quot;lb://recipe-service&quot;)\n                )\n                .route(p -&gt; p\n                        .path(&quot;/order/**&quot;)\n                        .uri(&quot;lb://order-service&quot;)\n                )\n                .build();\n    }\n}\n</code></pre>\n<p>which still print <code>myCircuitBreaker</code> as expected.\nThe client API (which does not implement any circuit breaking, as I want the Spring Gateway to handle everything):</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @GetMapping(&quot;/port&quot;)\n    public ResponseEntity&lt;String&gt; getPort() throws InterruptedException {\n        Thread.sleep(300);\n        return ResponseEntity.ok(serverPort.toString());\n    }\n</code></pre>\n<p>and the server responds with <code>200 OK</code> (even when ran 20-100 times consecutively) instead of tripping and returning a <code>503</code>/<code>504</code>.\nAnd the <code>pom.xml</code> file:</p>\n<pre><code>&lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2021.0.6&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            \n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\n                &lt;artifactId&gt;reactor-test&lt;/artifactId&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-starter-circuitbreaker-reactor-resilience4j&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            \n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;\n                &lt;version&gt;2.2.10.RELEASE&lt;/version&gt;\n            &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n</code></pre>\n<p>Using <code>logging.level.org.springframework.cloud.gateway=TRACE</code> returned this:</p>\n<pre><code>2023-05-05 18:35:45.403 TRACE 30356 --- [ctor-http-nio-5] o.s.c.gateway.filter.NettyRoutingFilter  : outbound route: 9068368b, inbound: [c68d633f-11] \n2023-05-05 18:35:45.713 TRACE 30356 --- [ctor-http-nio-5] o.s.c.g.filter.NettyWriteResponseFilter  : NettyWriteResponseFilter start inbound: 9068368b, outbound: [c68d633f-11] \n2023-05-05 18:35:46.495 TRACE 30356 --- [     parallel-9] o.s.c.g.f.WeightCalculatorWebFilter      : Weights attr: {}\n2023-05-05 18:35:46.495 TRACE 30356 --- [     parallel-9] o.s.c.g.h.p.PathRoutePredicateFactory    : Pattern &quot;/recipe/**&quot; matches against value &quot;/recipe/port&quot;\n2023-05-05 18:35:46.495 DEBUG 30356 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Route matched: 4a10df9b-21bd-4d09-b565-3aa824503289\n2023-05-05 18:35:46.495 DEBUG 30356 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : Mapping [Exchange: GET http://localhost:8082/recipe/port] to Route{id='4a10df9b-21bd-4d09-b565-3aa824503289', uri=lb://recipe-service, order=0, predicate=Paths: [/recipe/**], match trailing slash: true, gatewayFilters=[[[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'myCircuitBreaker', fallback = [null]], order = 0]], metadata={}}\n2023-05-05 18:35:46.495 DEBUG 30356 --- [     parallel-9] o.s.c.g.h.RoutePredicateHandlerMapping   : [c68d633f-12] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@644cf7a6\n2023-05-05 18:35:46.495 DEBUG 30356 --- [     parallel-9] o.s.c.g.handler.FilteringWebHandler      : Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@2bfa5678}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@5b4b6f3b}, order = -2147482648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@61375dff}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@2178d296}, order = 0], [[SpringCloudCircuitBreakerResilience4JFilterFactory name = 'myCircuitBreaker', fallback = [null]], order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@5b8b9b2d}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ReactiveLoadBalancerClientFilter@7ec68821}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.LoadBalancerServiceInstanceCookieFilter@220a5163}, order = 10151], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@58c80957}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@6158113e}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@7a7bb083}, order = 2147483647]]\n2023-05-05 18:35:46.495 TRACE 30356 --- [     parallel-9] o.s.c.g.filter.RouteToRequestUrlFilter   : RouteToRequestUrlFilter start\n2023-05-05 18:35:46.499 TRACE 30356 --- [     parallel-9] s.c.g.f.ReactiveLoadBalancerClientFilter : ReactiveLoadBalancerClientFilter url before: lb://recipe-service/recipe/port\n2023-05-05 18:35:46.499 TRACE 30356 --- [     parallel-9] s.c.g.f.ReactiveLoadBalancerClientFilter : LoadBalancerClientFilter url chosen: http://LAPTOP-42E0D7RO:8091/recipe/port\n</code></pre>\n<p>which the CircuitBreaker filter does pop up.</p>\n<p>Here's the documentation for Spring Cloud Circuit Breaker 3.0.1 : <a href=\"https://docs.spring.io/spring-cloud-circuitbreaker/docs/current/reference/html/\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-cloud-circuitbreaker/docs/current/reference/html/</a></p>\n<p>I know I can move everything to the <code>application.properties</code> or <code>application.yaml</code> and it will probably work, but I want to know why it doesn't.</p>\n<ul>\n<li>Additional info: I'm running on Windows 11, Spring Boot  2.7.10, project initialized with Spring Initializr.</li>\n</ul>\n"},{"tags":["javascript","java","typescript"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":6,"creation_date":1683289952,"post_id":76182177,"comment_id":134347898,"body_markdown":"*After doing that, I decode the byte array to UTF-8 like this:* Why would you try to turn image data into text?","body":"<i>After doing that, I decode the byte array to UTF-8 like this:</i> Why would you try to turn image data into text?"},{"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":0,"creation_date":1683289978,"post_id":76182177,"comment_id":134347902,"body_markdown":"FWIW, you don&#39;t need all that bother in `blobToSignedEightByteArray`. You can just use the Blog&#39;s [`arrayBuffer`](https://developer.mozilla.org/en-US/docs/Web/API/Blob/arrayBuffer) method: `const byteArray = new Uint8Array(await blob.arrayBuffer());`","body":"FWIW, you don&#39;t need all that bother in <code>blobToSignedEightByteArray</code>. You can just use the Blog&#39;s <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Blob/arrayBuffer\" rel=\"nofollow noreferrer\"><code>arrayBuffer</code></a> method: <code>const byteArray = new Uint8Array(await blob.arrayBuffer());</code>"},{"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":1,"creation_date":1683290082,"post_id":76182177,"comment_id":134347931,"body_markdown":"You&#39;re telling `TextDecoder` to **decode** something from UTF-8 that isn&#39;t UTF-8 (unless the blob just happens to contain UTF-8 data, which you haven&#39;t said it does). Why? That seems like an odd thing to do. if you&#39;re trying to just send the data from the client to a Java server, send the blob or the byte array, not text.","body":"You&#39;re telling <code>TextDecoder</code> to <b>decode</b> something from UTF-8 that isn&#39;t UTF-8 (unless the blob just happens to contain UTF-8 data, which you haven&#39;t said it does). Why? That seems like an odd thing to do. if you&#39;re trying to just send the data from the client to a Java server, send the blob or the byte array, not text."},{"owner":{"account_id":5746748,"reputation":129,"user_id":4537774,"accept_rate":40,"display_name":"Omaja7"},"score":1,"creation_date":1683290188,"post_id":76182177,"comment_id":134347953,"body_markdown":"The thing is, eventually I have to compare the two byte arrays. But in Java server side the byteData is turned into String object like this: new String(byteData). And when I looked into what it does, the code used UTF-8 encoding. So I thought I need to do the same in JavaScript","body":"The thing is, eventually I have to compare the two byte arrays. But in Java server side the byteData is turned into String object like this: new String(byteData). And when I looked into what it does, the code used UTF-8 encoding. So I thought I need to do the same in JavaScript"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1683290527,"post_id":76182177,"comment_id":134348038,"body_markdown":"@Omaja7 it does not make any sense to convert a byte[] into a String unless you are certain that it contains the correct bytes to do so. You might be better off converting the bytes to a hex or base64 String representation.","body":"@Omaja7 it does not make any sense to convert a byte[] into a String unless you are certain that it contains the correct bytes to do so. You might be better off converting the bytes to a hex or base64 String representation."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1683291050,"post_id":76182177,"comment_id":134348167,"body_markdown":"Different text encoders, when asked to encode arbitrary bytes as UTF-8 will probably error in different ways. It&#39;s not correct to try to encode arbitrary binary data as a string, just to gain some kind of string op convenience. As @f1sh says, you&#39;ll need to use a intermediate encoding that can handle arbitrary binary input. Base64 will take less space than hex","body":"Different text encoders, when asked to encode arbitrary bytes as UTF-8 will probably error in different ways. It&#39;s not correct to try to encode arbitrary binary data as a string, just to gain some kind of string op convenience. As @f1sh says, you&#39;ll need to use a intermediate encoding that can handle arbitrary binary input. Base64 will take less space than hex"}],"owner":{"account_id":5746748,"reputation":129,"user_id":4537774,"accept_rate":40,"display_name":"Omaja7"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683289565,"creation_date":1683289565,"question_id":76182177,"body_markdown":"I have an image file (could be any image) and I am turning it into a Blob object in Javascript. Now I need to get the byte array of the blob object, so I am doing like this:\r\n\r\n```\r\n  public async blobToSignedEightByteArray(blob: Blob): Promise&lt;Int8Array&gt; {\r\n    return new Promise((resolve, reject) =&gt; {\r\n      const reader = new FileReader();\r\n\r\n      reader.onload = () =&gt; {\r\n        const arrayBuffer = reader.result;\r\n        // @ts-ignore\r\n        const byteArray = new Int8Array(arrayBuffer);\r\n\r\n        resolve(byteArray);\r\n      };\r\n\r\n      reader.onerror = reject;\r\n\r\n      reader.readAsArrayBuffer(blob);\r\n    });\r\n  }\r\n```\r\n\r\nAfter doing that, I decode the byte array to UTF-8 like this:\r\n\r\n```\r\nlet byteData = await this.blobToSignedEightByteArray(blob);\r\nreturn new TextDecoder(&#39;utf-8&#39;).decode(byteData); // some result\r\n```\r\n\r\nNow when I use the same image file (from which we also created JavaScript Blob object) in a Java method like this:\r\n\r\n```\r\nprivate byte[] getFileBytes(MultipartFile file) {\r\n        try {\r\n            return file.getBytes();\r\n        } catch (IOException e) {\r\n            log.error(e.getMessage());\r\n        }\r\n}\r\n```\r\n\r\nand pass the result to new String(byteData), I get entirely different result.\r\n\r\n```\r\nbyte[] imageDataInJava = getFileBytes(file);  // file here is MultipartFile object\r\nreturn new String(imageDataInJava) // returns completely different result than JavaScript code\r\n```\r\n\r\nWhat could possibly be the cause?","title":"Javascript byte array never same as Java byte array","body":"<p>I have an image file (could be any image) and I am turning it into a Blob object in Javascript. Now I need to get the byte array of the blob object, so I am doing like this:</p>\n<pre><code>  public async blobToSignedEightByteArray(blob: Blob): Promise&lt;Int8Array&gt; {\n    return new Promise((resolve, reject) =&gt; {\n      const reader = new FileReader();\n\n      reader.onload = () =&gt; {\n        const arrayBuffer = reader.result;\n        // @ts-ignore\n        const byteArray = new Int8Array(arrayBuffer);\n\n        resolve(byteArray);\n      };\n\n      reader.onerror = reject;\n\n      reader.readAsArrayBuffer(blob);\n    });\n  }\n</code></pre>\n<p>After doing that, I decode the byte array to UTF-8 like this:</p>\n<pre><code>let byteData = await this.blobToSignedEightByteArray(blob);\nreturn new TextDecoder('utf-8').decode(byteData); // some result\n</code></pre>\n<p>Now when I use the same image file (from which we also created JavaScript Blob object) in a Java method like this:</p>\n<pre><code>private byte[] getFileBytes(MultipartFile file) {\n        try {\n            return file.getBytes();\n        } catch (IOException e) {\n            log.error(e.getMessage());\n        }\n}\n</code></pre>\n<p>and pass the result to new String(byteData), I get entirely different result.</p>\n<pre><code>byte[] imageDataInJava = getFileBytes(file);  // file here is MultipartFile object\nreturn new String(imageDataInJava) // returns completely different result than JavaScript code\n</code></pre>\n<p>What could possibly be the cause?</p>\n"},{"tags":["java","spring","unit-testing","jpa","testing"],"answers":[{"tags":[],"owner":{"account_id":28362251,"reputation":36,"user_id":21692077,"display_name":"Durfen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683289276,"creation_date":1682258710,"answer_id":76085305,"question_id":76072148,"body_markdown":"Based on the code you provided, it seems like the test is slowly turning into an integration test more than unit test. If the main problem it&#39;s the onPostConstruct method you can just:\r\n\r\n    @Before\r\n    public void setUp() throws NoSuchMethodException,  InvocationTargetException, IllegalAccessException\r\n        Method postConstruct =  MyService.class.getDeclaredMethod(&quot;onPostConstruct&quot;,null); \r\n        postConstruct.setAccessible(true);\r\n        postConstruct.invoke(testTarget);\r\n    }\r\n\r\nAnd in future revisions of the code see if the postconstruct isn&#39;t neccesary.\r\n\r\nI would also rather suggest to change your injection method from field injection to constructor injection. It makes a lot easier to unit test your code, for example if in the @PostConstruct you are just operating with @Value you can do it in the constructor itself, and get rid of it.","title":"How to perform testing on a legacy system tightly coupled with Spring?","body":"<p>Based on the code you provided, it seems like the test is slowly turning into an integration test more than unit test. If the main problem it's the onPostConstruct method you can just:</p>\n<pre><code>@Before\npublic void setUp() throws NoSuchMethodException,  InvocationTargetException, IllegalAccessException\n    Method postConstruct =  MyService.class.getDeclaredMethod(&quot;onPostConstruct&quot;,null); \n    postConstruct.setAccessible(true);\n    postConstruct.invoke(testTarget);\n}\n</code></pre>\n<p>And in future revisions of the code see if the postconstruct isn't neccesary.</p>\n<p>I would also rather suggest to change your injection method from field injection to constructor injection. It makes a lot easier to unit test your code, for example if in the @PostConstruct you are just operating with @Value you can do it in the constructor itself, and get rid of it.</p>\n"}],"owner":{"account_id":13954095,"reputation":164,"user_id":10076956,"display_name":"Van Teo Le"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683289276,"creation_date":1682071834,"question_id":76072148,"body_markdown":"I am working with a legacy codebase using Java 8 and Spring Boot 2.1.4. By legacy I mean that there are no tests written whatsoever.\r\nThe problem I stumbled on is the choice between writing pure unit tests, or a smaller version of integration test.\r\n\r\nHere is my unit test in JUnit:\r\n\r\n```java\r\n@RunWith(SpringRunner.class)\r\n@Import(TestConfiguration.class)\r\n@ContextConfiguration(classes = {TestService1.class})\r\n@ActiveProfiles(&quot;test&quot;)\r\n@TestPropertySource(locations=&quot;classpath:application-test.properties&quot;)\r\npublic class SomeTest {\r\n    protected BusinessObject businessObject;\r\n    @MockBean\r\n    private UnimportantService someService;\r\n    @MockBean\r\n    private UnimportantRepo someRepo;\r\n    // and a lot of MockBeans like that to inject into our TestService1\r\n\r\n    @Autowired\r\n    private TestService1 serviceInTest;\r\n    @Before\r\n    public void initResource() throws UnknownHostException, IOException {\r\n        // init business object\r\n        businessObject = new BusinessObject();\r\n        businessObject.setAddressLine1(&quot;sth&quot;);\r\n        // .......\r\n\r\n        Stuff stuff = new Stuff(code);\r\n        stuff.setName(&quot;some thing&quot;);\r\n        // ...\r\n\r\n        // Mocking part\r\n        when(someService.getStuff(code)).thenReturn(stuff);\r\n        when(someRepo.save(any(BusinessObject.class))).thenAnswer(new Answer&lt;BusinessObject&gt;() {\r\n            @Override\r\n            public BusinessObject answer(InvocationOnMock invocation) throws Throwable {\r\n                Object[] args = invocation.getArguments();\r\n                BusinessObject acc =  (BusinessObject) args[0];\r\n                return acc;\r\n            }\r\n        });\r\n    }\r\n\r\n    @Test\r\n    public void testRun() {\r\n        BusinessObject obj = this.serviceInTest.create(businessObject);\r\n        assertEquals(obj.getStatus(), SUCCESSFUL);\r\n    }\r\n}\r\n\r\n```\r\nThe problem is with the code for `TestService1` and the `BusinessObject` entity are pretty coupled to Spring and JPA.\r\n\r\n```java\r\n@Service(&quot;testService&quot;)\r\npublic class TestService1 {\r\n\r\n    @Value(&quot;${spring.profiles.active}&quot;)\r\n    private String activeProfile;\r\n\r\n    @Autowired\r\n    private UnimportantService someService;\r\n    @Autowired\r\n    private UnimportantRepo someRepo;\r\n    // and a lot of autowired component, but i will skip it\r\n\r\n    @PostConstruct\r\n    protected void onPostConstruct() {\r\n        // initialize something\r\n    }\r\n}\r\n\r\n@Entity\r\n@Table\r\npublic class BusinessObject extends AbstractUpdatableUuidEntity {\r\n\r\n    @Column(name = &quot;someAttribute&quot;, columnDefinition = &quot;TEXT&quot;, nullable = false)\r\n    @Getter\r\n    @Setter\r\n    private String someAttribute;\r\n    // and some more attributes , but those are not important\r\n\r\n\r\n    @PrePersist\r\n    @Override\r\n    protected void onPrePersist() {\r\n        super.onPrePersist();\r\n        // init some field in the AbstractUpdatableUuidEntity...\r\n    }\r\n    public enum Status {\r\n        FAILED,\r\n        IN_PROGRESS,\r\n        OPENED,\r\n        SUCCESSFUL,\r\n    }\r\n}\r\n```\r\nIf I run plainly without Spring then the `onPostConstruct` wouldn&#39;t run and the `activeProfile` would not be set, so I made a compromise (still acceptable) and added a little Spring in my unit test.\r\n\r\nBut then for the `BusinessObject` Entity, I have already mocked a repo call, but if I do this way without JPA, the `onPrePersist` wouldn&#39;t run, which will fail the test. But if I added JPA and dont mock the repository, the load time increased to 9s, which might as well has already become an integration test. Even worse, this `SomeTest` context will not be cached to another test, because it is too fine-grained for testing that service only.\r\n```java\r\nwhen(someRepo.save(any(BusinessObject.class))).thenAnswer(new Answer&lt;BusinessObject&gt;() {\r\n            @Override\r\n            public BusinessObject answer(InvocationOnMock invocation) throws Throwable {\r\n                Object[] args = invocation.getArguments();\r\n                BusinessObject acc =  (BusinessObject) args[0];\r\n                return acc;\r\n            }\r\n        });\r\n```\r\nAny advice on how I should proceed?","title":"How to perform testing on a legacy system tightly coupled with Spring?","body":"<p>I am working with a legacy codebase using Java 8 and Spring Boot 2.1.4. By legacy I mean that there are no tests written whatsoever.\nThe problem I stumbled on is the choice between writing pure unit tests, or a smaller version of integration test.</p>\n<p>Here is my unit test in JUnit:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(SpringRunner.class)\n@Import(TestConfiguration.class)\n@ContextConfiguration(classes = {TestService1.class})\n@ActiveProfiles(&quot;test&quot;)\n@TestPropertySource(locations=&quot;classpath:application-test.properties&quot;)\npublic class SomeTest {\n    protected BusinessObject businessObject;\n    @MockBean\n    private UnimportantService someService;\n    @MockBean\n    private UnimportantRepo someRepo;\n    // and a lot of MockBeans like that to inject into our TestService1\n\n    @Autowired\n    private TestService1 serviceInTest;\n    @Before\n    public void initResource() throws UnknownHostException, IOException {\n        // init business object\n        businessObject = new BusinessObject();\n        businessObject.setAddressLine1(&quot;sth&quot;);\n        // .......\n\n        Stuff stuff = new Stuff(code);\n        stuff.setName(&quot;some thing&quot;);\n        // ...\n\n        // Mocking part\n        when(someService.getStuff(code)).thenReturn(stuff);\n        when(someRepo.save(any(BusinessObject.class))).thenAnswer(new Answer&lt;BusinessObject&gt;() {\n            @Override\n            public BusinessObject answer(InvocationOnMock invocation) throws Throwable {\n                Object[] args = invocation.getArguments();\n                BusinessObject acc =  (BusinessObject) args[0];\n                return acc;\n            }\n        });\n    }\n\n    @Test\n    public void testRun() {\n        BusinessObject obj = this.serviceInTest.create(businessObject);\n        assertEquals(obj.getStatus(), SUCCESSFUL);\n    }\n}\n\n</code></pre>\n<p>The problem is with the code for <code>TestService1</code> and the <code>BusinessObject</code> entity are pretty coupled to Spring and JPA.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service(&quot;testService&quot;)\npublic class TestService1 {\n\n    @Value(&quot;${spring.profiles.active}&quot;)\n    private String activeProfile;\n\n    @Autowired\n    private UnimportantService someService;\n    @Autowired\n    private UnimportantRepo someRepo;\n    // and a lot of autowired component, but i will skip it\n\n    @PostConstruct\n    protected void onPostConstruct() {\n        // initialize something\n    }\n}\n\n@Entity\n@Table\npublic class BusinessObject extends AbstractUpdatableUuidEntity {\n\n    @Column(name = &quot;someAttribute&quot;, columnDefinition = &quot;TEXT&quot;, nullable = false)\n    @Getter\n    @Setter\n    private String someAttribute;\n    // and some more attributes , but those are not important\n\n\n    @PrePersist\n    @Override\n    protected void onPrePersist() {\n        super.onPrePersist();\n        // init some field in the AbstractUpdatableUuidEntity...\n    }\n    public enum Status {\n        FAILED,\n        IN_PROGRESS,\n        OPENED,\n        SUCCESSFUL,\n    }\n}\n</code></pre>\n<p>If I run plainly without Spring then the <code>onPostConstruct</code> wouldn't run and the <code>activeProfile</code> would not be set, so I made a compromise (still acceptable) and added a little Spring in my unit test.</p>\n<p>But then for the <code>BusinessObject</code> Entity, I have already mocked a repo call, but if I do this way without JPA, the <code>onPrePersist</code> wouldn't run, which will fail the test. But if I added JPA and dont mock the repository, the load time increased to 9s, which might as well has already become an integration test. Even worse, this <code>SomeTest</code> context will not be cached to another test, because it is too fine-grained for testing that service only.</p>\n<pre class=\"lang-java prettyprint-override\"><code>when(someRepo.save(any(BusinessObject.class))).thenAnswer(new Answer&lt;BusinessObject&gt;() {\n            @Override\n            public BusinessObject answer(InvocationOnMock invocation) throws Throwable {\n                Object[] args = invocation.getArguments();\n                BusinessObject acc =  (BusinessObject) args[0];\n                return acc;\n            }\n        });\n</code></pre>\n<p>Any advice on how I should proceed?</p>\n"},{"tags":["java","apache-spark","gradle"],"owner":{"account_id":12545326,"reputation":1014,"user_id":9128863,"display_name":"Jelly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683289105,"creation_date":1683216953,"question_id":76175291,"body_markdown":"Spark application is build by the following gradle script:\r\n\r\n     plugins {\r\n            id &#39;java&#39;\r\n            id &#39;application&#39;\r\n         }\r\n\r\n     group = &#39;com.example.fileutil&#39;\r\n     version = &#39;0.0.1-SNAPSHOT&#39;\r\n\r\n    application {\r\n          mainClass = &#39;com.example.fileutil.FilePrepareApplication&#39;\r\n    }\r\n\r\n    jar {\r\n           duplicatesStrategy = DuplicatesStrategy.INCLUDE\r\n           project.configurations.getByName(&quot;implementation&quot;).setCanBeResolved(true)\r\n           manifest {\r\n                attributes &#39;Main-Class&#39;: &#39;com.example.fileutil.FilePrepareApplication&#39;\r\n                    }\r\n\r\n     from { configurations.implementation.collect { it.isDirectory() ? it : zipTree(it) } }\r\n    }\r\n    // dependencies and repositories\r\n\r\nAnd trying to run this spark application by:\r\n\r\n      spark-submit --class &quot;com.example.fileutil.FilePrepareApplication&quot; --queue default --deploy-mode client --master local --files cluster.properties hdfs_service-0.0.1-SNAPSHOT.jar\r\n\r\nAnd receive the following error:\r\n\r\n      Failed to load class com.example.fileutil.FilePrepareApplication.    \r\n\r\nFilePrepareApplication is located at build/classes/main/com/example/fileutil/\r\n\r\nWhat am I doing wrong?","title":"Spark Java: Failed to load class","body":"<p>Spark application is build by the following gradle script:</p>\n<pre><code> plugins {\n        id 'java'\n        id 'application'\n     }\n\n group = 'com.example.fileutil'\n version = '0.0.1-SNAPSHOT'\n\napplication {\n      mainClass = 'com.example.fileutil.FilePrepareApplication'\n}\n\njar {\n       duplicatesStrategy = DuplicatesStrategy.INCLUDE\n       project.configurations.getByName(&quot;implementation&quot;).setCanBeResolved(true)\n       manifest {\n            attributes 'Main-Class': 'com.example.fileutil.FilePrepareApplication'\n                }\n\n from { configurations.implementation.collect { it.isDirectory() ? it : zipTree(it) } }\n}\n// dependencies and repositories\n</code></pre>\n<p>And trying to run this spark application by:</p>\n<pre><code>  spark-submit --class &quot;com.example.fileutil.FilePrepareApplication&quot; --queue default --deploy-mode client --master local --files cluster.properties hdfs_service-0.0.1-SNAPSHOT.jar\n</code></pre>\n<p>And receive the following error:</p>\n<pre><code>  Failed to load class com.example.fileutil.FilePrepareApplication.    \n</code></pre>\n<p>FilePrepareApplication is located at build/classes/main/com/example/fileutil/</p>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","postgresql","spring-boot","spring-data"],"answers":[{"tags":[],"owner":{"account_id":17311868,"reputation":1,"user_id":12539238,"display_name":"Sisir Sahu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683289052,"creation_date":1683282861,"answer_id":76181264,"question_id":76181013,"body_markdown":"If you are using &quot;Named Parameters&quot; in the query like :age in your case, then you need to add &quot;@Param&quot; annotation to give a method parameter a concrete name and bind the name in the query. Modify the query like below:\r\n\r\n    @Query(value=&quot;select lakh_5 from women_1A_premium where :age &gt;=min_age and :age &lt;=max_age and year=1&quot;,nativeQuery=true)\r\n    int findPremium(@Param(&quot;age&quot;) int age);\r\n\r\nspring jpa query doc: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.named-parameters\r\n\r\n","title":"why I getting this error on write query in JPA repository in spring-boot?","body":"<p>If you are using &quot;Named Parameters&quot; in the query like :age in your case, then you need to add &quot;@Param&quot; annotation to give a method parameter a concrete name and bind the name in the query. Modify the query like below:</p>\n<pre><code>@Query(value=&quot;select lakh_5 from women_1A_premium where :age &gt;=min_age and :age &lt;=max_age and year=1&quot;,nativeQuery=true)\nint findPremium(@Param(&quot;age&quot;) int age);\n</code></pre>\n<p>spring jpa query doc: <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.named-parameters\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.named-parameters</a></p>\n"},{"tags":[],"owner":{"account_id":15433098,"reputation":139,"user_id":11133935,"display_name":"Ankitha J"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683283248,"creation_date":1683282889,"answer_id":76181274,"question_id":76181013,"body_markdown":"It need an extra annotation in function parameter.\r\n\r\nCorrect one is as below:\r\n\r\n    @Repository\r\n    public interface WomenCareRepository extends JpaRepository&lt;WomenCareEntity, Integer&gt; {\r\n        \r\n            @Query(value=&quot;select lakh_5 from women_1A_premium where :age &gt;=min_age and :age &lt;=max_age and year=1&quot;,nativeQuery=true)\r\n            int findPremium(@Param(&quot;age&quot;)  int age);\r\n\r\n","title":"why I getting this error on write query in JPA repository in spring-boot?","body":"<p>It need an extra annotation in function parameter.</p>\n<p>Correct one is as below:</p>\n<pre><code>@Repository\npublic interface WomenCareRepository extends JpaRepository&lt;WomenCareEntity, Integer&gt; {\n    \n        @Query(value=&quot;select lakh_5 from women_1A_premium where :age &gt;=min_age and :age &lt;=max_age and year=1&quot;,nativeQuery=true)\n        int findPremium(@Param(&quot;age&quot;)  int age);\n</code></pre>\n"}],"owner":{"account_id":28515280,"reputation":13,"user_id":21824731,"display_name":"Dineshkumar T"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76181274,"answer_count":2,"score":0,"last_activity_date":1683289052,"creation_date":1683280907,"question_id":76181013,"body_markdown":"```\r\npackage com.example.demo.Repository;\r\nimport java.util.List;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.data.jpa.repository.Query;\r\nimport org.springframework.stereotype.Repository;\r\nimport com.example.demo.entity.WomenCareEntity;\r\n\r\n@Repository\r\npublic interface WomenCareRepository extends JpaRepository&lt;WomenCareEntity, Integer&gt; {\r\n    @Query(value=&quot;select lakh_5 from women_1A_premium where :age &gt;=min_age and :age &lt;=max_age and year=1&quot;,nativeQuery=true)\r\n    int findPremium(int age);\r\n```\r\n\r\n```\r\n&quot;message&quot;: &quot;JDBC exception executing SQL [select lakh_5 from women_1A_premium where ? &gt;=min_age and ? &lt;=max_age and year=1]; SQL [n/a]&quot;.\r\n```\r\n\r\nThis is the error message. What do I need to do?","title":"why I getting this error on write query in JPA repository in spring-boot?","body":"<pre><code>package com.example.demo.Repository;\nimport java.util.List;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.stereotype.Repository;\nimport com.example.demo.entity.WomenCareEntity;\n\n@Repository\npublic interface WomenCareRepository extends JpaRepository&lt;WomenCareEntity, Integer&gt; {\n    @Query(value=&quot;select lakh_5 from women_1A_premium where :age &gt;=min_age and :age &lt;=max_age and year=1&quot;,nativeQuery=true)\n    int findPremium(int age);\n</code></pre>\n<pre><code>&quot;message&quot;: &quot;JDBC exception executing SQL [select lakh_5 from women_1A_premium where ? &gt;=min_age and ? &lt;=max_age and year=1]; SQL [n/a]&quot;.\n</code></pre>\n<p>This is the error message. What do I need to do?</p>\n"},{"tags":["java","https","apache2","jetty","javalin"],"answers":[{"tags":[],"owner":{"account_id":2076340,"reputation":184,"user_id":1995266,"display_name":"Romibuzi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660847064,"creation_date":1660847064,"answer_id":73407815,"question_id":73407206,"body_markdown":"Indeed Javalin and Apache can&#39;t listen on the same port at the same time. My suggestion will be to keep Apache running on ports 80 and 443 to handle the traffic of `mysite.com`, and then proxy to Javalin which listens on port 7000 for /api with the help of Apache `mod_proxy`. In your Apache VirtualHost configuration:\r\n\r\n    &lt;VirtualHost *:443&gt;\r\n        ServerName mysite.com\r\n        DocumentRoot /path/to/your/frontend\r\n    \r\n        # redirect requests on /api to Javalin backend\r\n        ProxyPass /api http://127.0.0.1:7000\r\n   \r\n        # rest of configuration\r\n    &lt;/VirtualHost&gt;\r\n\r\n","title":"Can&#39;t run Javalin backend and Apache web host at the same time","body":"<p>Indeed Javalin and Apache can't listen on the same port at the same time. My suggestion will be to keep Apache running on ports 80 and 443 to handle the traffic of <code>mysite.com</code>, and then proxy to Javalin which listens on port 7000 for /api with the help of Apache <code>mod_proxy</code>. In your Apache VirtualHost configuration:</p>\n<pre><code>&lt;VirtualHost *:443&gt;\n    ServerName mysite.com\n    DocumentRoot /path/to/your/frontend\n\n    # redirect requests on /api to Javalin backend\n    ProxyPass /api http://127.0.0.1:7000\n\n    # rest of configuration\n&lt;/VirtualHost&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7799336,"reputation":48,"user_id":5899345,"display_name":"zugazagoitia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683288461,"creation_date":1683288461,"answer_id":76182041,"question_id":73407206,"body_markdown":"You&#39;re using the [SSL Plugin](https://github.com/javalin/javalin-ssl), if so you must configure your ports in [the plugin config](https://github.com/javalin/javalin-ssl).\r\n\r\nFor example:\r\n```java\r\nSSLPlugin plugin = new SSLPlugin(conf -&gt; {\r\n    conf.pemFromPath(&quot;/path/to/cert.pem&quot;, &quot;/path/to/key.pem&quot;);\r\n    conf.insecurePort = 80;                     \r\n    conf.securePort = 443; \r\n\r\n    // additional configuration options\r\n});\r\n```\r\n\r\nHowever, since you&#39;re using Apache as a reverse proxy you might not need the SSL plugin at all, since Apache can terminate your SSL connections for you. Unencrypted traffic will only be exchanged between Apache and Javalin:\r\n[![app diagram][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RQSEz.png\r\n\r\nDisclaimer: I am the author of the [SSL plugin](https://github.com/javalin/javalin-ssl)","title":"Can&#39;t run Javalin backend and Apache web host at the same time","body":"<p>You're using the <a href=\"https://github.com/javalin/javalin-ssl\" rel=\"nofollow noreferrer\">SSL Plugin</a>, if so you must configure your ports in <a href=\"https://github.com/javalin/javalin-ssl\" rel=\"nofollow noreferrer\">the plugin config</a>.</p>\n<p>For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SSLPlugin plugin = new SSLPlugin(conf -&gt; {\n    conf.pemFromPath(&quot;/path/to/cert.pem&quot;, &quot;/path/to/key.pem&quot;);\n    conf.insecurePort = 80;                     \n    conf.securePort = 443; \n\n    // additional configuration options\n});\n</code></pre>\n<p>However, since you're using Apache as a reverse proxy you might not need the SSL plugin at all, since Apache can terminate your SSL connections for you. Unencrypted traffic will only be exchanged between Apache and Javalin:\n<a href=\"https://i.stack.imgur.com/RQSEz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RQSEz.png\" alt=\"app diagram\" /></a></p>\n<p>Disclaimer: I am the author of the <a href=\"https://github.com/javalin/javalin-ssl\" rel=\"nofollow noreferrer\">SSL plugin</a></p>\n"}],"owner":{"account_id":17022175,"reputation":126,"user_id":12314426,"display_name":"LetsdothisEpic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76182041,"answer_count":2,"score":0,"last_activity_date":1683288461,"creation_date":1660843654,"question_id":73407206,"body_markdown":"I&#39;ve made a Javalin backend host that I&#39;ve been starting on 0.0.0.0:7000 for a while now, but I recently began using Apache2 for the frontend content-serving. I was able to get apache set up, and it&#39;s running great, but now my backend won&#39;t start, with the error\r\n```Failed to bind to 0.0.0.0/0.0.0.0:80``` and then later ```Failed to bind to 0.0.0.0/0.0.0.0:443```. How can I configure this so that both run at the same time, and I can use my backend server to handle requests to mysite.com/api/*, but requests to mysite.com/* are served by apache?","title":"Can&#39;t run Javalin backend and Apache web host at the same time","body":"<p>I've made a Javalin backend host that I've been starting on 0.0.0.0:7000 for a while now, but I recently began using Apache2 for the frontend content-serving. I was able to get apache set up, and it's running great, but now my backend won't start, with the error\n<code>Failed to bind to 0.0.0.0/0.0.0.0:80</code> and then later <code>Failed to bind to 0.0.0.0/0.0.0.0:443</code>. How can I configure this so that both run at the same time, and I can use my backend server to handle requests to mysite.com/api/<em>, but requests to mysite.com/</em> are served by apache?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":1,"creation_date":1683238934,"post_id":76177715,"comment_id":134340620,"body_markdown":"What is `e`?  What is `one`?  What is `y`? What is `x`?  What is `w`?  What is `two`?  What is `z`?","body":"What is <code>e</code>?  What is <code>one</code>?  What is <code>y</code>? What is <code>x</code>?  What is <code>w</code>?  What is <code>two</code>?  What is <code>z</code>?"},{"owner":{"account_id":28510477,"reputation":1,"user_id":21820540,"display_name":"Caitlyn"},"score":0,"creation_date":1683239118,"post_id":76177715,"comment_id":134340645,"body_markdown":"one - connected to the first empty button    two - connected to the second button      x - connected to a generated  variable w - connected to a different generated variable z - int w converted to a string y - x converted to a string","body":"one - connected to the first empty button    two - connected to the second button      x - connected to a generated  variable w - connected to a different generated variable z - int w converted to a string y - x converted to a string"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1683239315,"post_id":76177715,"comment_id":134340686,"body_markdown":"Don&#39;t use `==` to compare `String`s, use `String#equals`","body":"Don&#39;t use <code>==</code> to compare <code>String</code>s, use <code>String#equals</code>"},{"owner":{"account_id":7406747,"reputation":416,"user_id":5635476,"display_name":"levangode"},"score":0,"creation_date":1683247196,"post_id":76177715,"comment_id":134341591,"body_markdown":"when they match up on the buttons, that&#39;s not when they match up in the x==w. On the buttons you are only seeing the latest value of whichever button was clicked. However, according to the logic, you could still get the &quot;You Win the Big Prize!&quot;, It just might not happen when you see equal values on the button.","body":"when they match up on the buttons, that&#39;s not when they match up in the x==w. On the buttons you are only seeing the latest value of whichever button was clicked. However, according to the logic, you could still get the &quot;You Win the Big Prize!&quot;, It just might not happen when you see equal values on the button."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1683276991,"post_id":76177715,"comment_id":134345293,"body_markdown":"*After each button is clicked a random number becomes its name* That&#39;s not an accurate description. The *first* thing that happens *on each click*  is that *two* random numbers are generated. Think about that. @levangode has already pointed to the fact that what you intend to happen has not been reflected in your code","body":"<i>After each button is clicked a random number becomes its name</i> That&#39;s not an accurate description. The <i>first</i> thing that happens <i>on each click</i>  is that <i>two</i> random numbers are generated. Think about that. @levangode has already pointed to the fact that what you intend to happen has not been reflected in your code"}],"answers":[{"tags":[],"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683287880,"creation_date":1683287880,"answer_id":76181945,"question_id":76177715,"body_markdown":"&gt; but for some reason, the if statement that compares them doesn&#39;t work\r\n&gt; properly.\r\n\r\nBecause you *never* compare the values assigned to the buttons.  You actually generate two values when you click a button.  One of those values is assigned to a button but the other is just some meaningless value.  But you compare *those* generated values rather than the buttons.\r\n\r\n      int x = (int) (Math.random()*10+1);\r\n      ...\r\n      int w = (int) (Math.random()*10+1);\r\n      ...\r\n        if(x==w) {\r\n          System.out.println(&quot;You Win the Big Prize!&quot;);\r\n        }\r\n      ...\r\n        if(x==w) {\r\n          System.out.println(&quot;You Win the Big Prize!&quot;);\r\n        }\r\n      ...\r\n\r\n1. Generate a single value\r\n1. Assign that value to the appropriate button\r\n1. Compare the button values.\r\n\r\nSomething like..\r\n\r\n    public void actionPerformed(ActionEvent e) {\r\n      if (e.getSource().equals(one)) {\r\n        one.setText(generateRandomValue());\r\n        testEquals(one, two);\r\n      } else if (e.getSource().equals(two) {\r\n        two.setText(generateRandomValue());\r\n        testEquals(one, two);\r\n      }\r\n    }\r\n\r\n","title":"Trying to generating numbers and checking if they are equal but it&#39;s not working","body":"<blockquote>\n<p>but for some reason, the if statement that compares them doesn't work\nproperly.</p>\n</blockquote>\n<p>Because you <em>never</em> compare the values assigned to the buttons.  You actually generate two values when you click a button.  One of those values is assigned to a button but the other is just some meaningless value.  But you compare <em>those</em> generated values rather than the buttons.</p>\n<pre><code>  int x = (int) (Math.random()*10+1);\n  ...\n  int w = (int) (Math.random()*10+1);\n  ...\n    if(x==w) {\n      System.out.println(&quot;You Win the Big Prize!&quot;);\n    }\n  ...\n    if(x==w) {\n      System.out.println(&quot;You Win the Big Prize!&quot;);\n    }\n  ...\n</code></pre>\n<ol>\n<li>Generate a single value</li>\n<li>Assign that value to the appropriate button</li>\n<li>Compare the button values.</li>\n</ol>\n<p>Something like..</p>\n<pre><code>public void actionPerformed(ActionEvent e) {\n  if (e.getSource().equals(one)) {\n    one.setText(generateRandomValue());\n    testEquals(one, two);\n  } else if (e.getSource().equals(two) {\n    two.setText(generateRandomValue());\n    testEquals(one, two);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":28510477,"reputation":1,"user_id":21820540,"display_name":"Caitlyn"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1683287880,"creation_date":1683238648,"question_id":76177715,"body_markdown":"```\r\nclass Main extends JPanel implements ActionListener {\r\n    static JButton one;\r\n    static JButton two;\r\n    static JLabel magic;\r\n\r\n    public void main() {\r\n      JFrame frm = new JFrame(&quot;GUI INTRO&quot;);\r\n      JPanel content = new JPanel();\r\n      frm.add(content);\r\n      \r\n      one = new JButton(&quot; &quot;);\r\n      two = new JButton(&quot; &quot;);\r\n\r\n      one.addActionListener(this);\r\n      two.addActionListener(this);\r\n\r\n      content.add(one);\r\n      content.add(two);\r\n      \r\n      frm.setLayout(new FlowLayout()); \r\n      frm.setSize(700,700);\r\n      frm.setLocationRelativeTo(null);  \r\n      frm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n      frm.setVisible(true);\r\n    }\r\n  \r\n    public void actionPerformed(ActionEvent e) {\r\n      int x = (int) (Math.random()*10+1);\r\n      String y = Integer.toString(x);\r\n  \r\n      int w = (int) (Math.random()*10+1);\r\n      String z = Integer.toString(w);\r\n      if(e.getSource() == A) // irrelivant\r\n        magic.setText(&quot;MAGIC&quot;); // irrelivant\r\n      else if (e.getSource() == one) {\r\n        one.setText(y);\r\n        System.out.print(x);\r\n        if(x==w) {\r\n          System.out.println(&quot;You Win the Big Prize!&quot;);\r\n        }\r\n      }\r\n      else if (e.getSource() == two) {\r\n        two.setText(z);\r\n        System.out.print(w);\r\n        if(x==w) {\r\n          System.out.println(&quot;You Win the Big Prize!&quot;);\r\n        }\r\n      }\r\n     }\r\n     public static void main(String[] args){\r\n        Main frame = new Main();\r\n        frame.main();\r\n      }\r\n     }\r\n```\r\n\r\n\r\nAfter each button is clicked a random number becomes its name. The goal is that when both of the buttons are equivalent a print statement will print. I have tried printing the actual variables and they match up with what&#39;s on the button but for some reason, the if statement that compares them doesn&#39;t work properly.","title":"Trying to generating numbers and checking if they are equal but it&#39;s not working","body":"<pre><code>class Main extends JPanel implements ActionListener {\n    static JButton one;\n    static JButton two;\n    static JLabel magic;\n\n    public void main() {\n      JFrame frm = new JFrame(&quot;GUI INTRO&quot;);\n      JPanel content = new JPanel();\n      frm.add(content);\n      \n      one = new JButton(&quot; &quot;);\n      two = new JButton(&quot; &quot;);\n\n      one.addActionListener(this);\n      two.addActionListener(this);\n\n      content.add(one);\n      content.add(two);\n      \n      frm.setLayout(new FlowLayout()); \n      frm.setSize(700,700);\n      frm.setLocationRelativeTo(null);  \n      frm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n      frm.setVisible(true);\n    }\n  \n    public void actionPerformed(ActionEvent e) {\n      int x = (int) (Math.random()*10+1);\n      String y = Integer.toString(x);\n  \n      int w = (int) (Math.random()*10+1);\n      String z = Integer.toString(w);\n      if(e.getSource() == A) // irrelivant\n        magic.setText(&quot;MAGIC&quot;); // irrelivant\n      else if (e.getSource() == one) {\n        one.setText(y);\n        System.out.print(x);\n        if(x==w) {\n          System.out.println(&quot;You Win the Big Prize!&quot;);\n        }\n      }\n      else if (e.getSource() == two) {\n        two.setText(z);\n        System.out.print(w);\n        if(x==w) {\n          System.out.println(&quot;You Win the Big Prize!&quot;);\n        }\n      }\n     }\n     public static void main(String[] args){\n        Main frame = new Main();\n        frame.main();\n      }\n     }\n</code></pre>\n<p>After each button is clicked a random number becomes its name. The goal is that when both of the buttons are equivalent a print statement will print. I have tried printing the actual variables and they match up with what's on the button but for some reason, the if statement that compares them doesn't work properly.</p>\n"},{"tags":["java","android"],"owner":{"account_id":2529572,"reputation":21,"user_id":2198136,"display_name":"tsrahul81"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683287560,"creation_date":1683287560,"question_id":76181894,"body_markdown":"I am trying to print some text to Bluetooth printer.But when checking &quot;(ActivityCompat.checkSelfPermission(activity, Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED)&quot; this code always it&#39;s true. That means permission can&#39;t get. Please help me to solve this\r\n\r\nMy code is\r\n\r\nAndroid Manifest\r\n\r\n```\r\n &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot;\r\n        android:maxSdkVersion=&quot;30&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot;\r\n        android:maxSdkVersion=&quot;30&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;\r\n```\r\n\r\nconnection code\r\n\r\n```\r\n void openBT() throws IOException {\r\n        // Standard SerialPortService ID\r\n        UUID uuid = UUID.fromString(&quot;00001101-0000-1000-8000-00805f9b34fb&quot;);\r\n\r\n        if (ActivityCompat.checkSelfPermission(activity, Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\r\n            // TODO: Consider calling\r\n            //    ActivityCompat#requestPermissions\r\n            // here to request the missing permissions, and then overriding\r\n            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n            //                                          int[] grantResults)\r\n            // to handle the case where the user grants the permission. See the documentation\r\n            // for ActivityCompat#requestPermissions for more details.\r\n\r\n            return;\r\n        }\r\n        mmSocket = mmDevice.createRfcommSocketToServiceRecord(uuid);\r\n        mmSocket.connect();\r\n        mmOutputStream = mmSocket.getOutputStream();\r\n        mmInputStream = mmSocket.getInputStream();\r\n\r\n        beginListenForData();\r\n        sendData();\r\n       /* Toast.makeText(this, &quot;Bluetooth Opened&quot;,\r\n                Toast.LENGTH_SHORT).show();*/\r\n    }\r\n```\r\n\r\n\r\n\r\n","title":"Android Bluetooth Printer Connection error","body":"<p>I am trying to print some text to Bluetooth printer.But when checking &quot;(ActivityCompat.checkSelfPermission(activity, Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED)&quot; this code always it's true. That means permission can't get. Please help me to solve this</p>\n<p>My code is</p>\n<p>Android Manifest</p>\n<pre><code> &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot;\n        android:maxSdkVersion=&quot;30&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot;\n        android:maxSdkVersion=&quot;30&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;\n</code></pre>\n<p>connection code</p>\n<pre><code> void openBT() throws IOException {\n        // Standard SerialPortService ID\n        UUID uuid = UUID.fromString(&quot;00001101-0000-1000-8000-00805f9b34fb&quot;);\n\n        if (ActivityCompat.checkSelfPermission(activity, Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\n            // TODO: Consider calling\n            //    ActivityCompat#requestPermissions\n            // here to request the missing permissions, and then overriding\n            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n            //                                          int[] grantResults)\n            // to handle the case where the user grants the permission. See the documentation\n            // for ActivityCompat#requestPermissions for more details.\n\n            return;\n        }\n        mmSocket = mmDevice.createRfcommSocketToServiceRecord(uuid);\n        mmSocket.connect();\n        mmOutputStream = mmSocket.getOutputStream();\n        mmInputStream = mmSocket.getInputStream();\n\n        beginListenForData();\n        sendData();\n       /* Toast.makeText(this, &quot;Bluetooth Opened&quot;,\n                Toast.LENGTH_SHORT).show();*/\n    }\n</code></pre>\n"},{"tags":["java","selenium-webdriver","graphql","graphql-mutation"],"owner":{"account_id":19618827,"reputation":3,"user_id":14359712,"display_name":"JaviAbos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683286764,"creation_date":1683286764,"question_id":76181790,"body_markdown":"I need to get the response of a graphQl call that is executed in a selenium test (Java) in order to get the id that is generated in the database. \r\n\r\nExample:\r\n\r\n```\r\nmutation {\r\n  createWidget(designID: 701, contentID: 1935, layoutPos: &quot;{\\&quot;TV\\&quot;:{\\&quot;x\\&quot;:117,\\&quot;y\\&quot;:66,\\&quot;w\\&quot;:60,\\&quot;h\\&quot;:33}}&quot;, pos: 1) {\r\n    error\r\n    ok\r\n    id\r\n    __typename\r\n  }\r\n}\r\n```\r\n\r\nWhen executing this query you would need to get the ids created.\r\n\r\n\r\n\r\nI expect a string with the mutation to be able to separate the necessary ids.","title":"how to get the response of a graphQl call in Selenium","body":"<p>I need to get the response of a graphQl call that is executed in a selenium test (Java) in order to get the id that is generated in the database.</p>\n<p>Example:</p>\n<pre><code>mutation {\n  createWidget(designID: 701, contentID: 1935, layoutPos: &quot;{\\&quot;TV\\&quot;:{\\&quot;x\\&quot;:117,\\&quot;y\\&quot;:66,\\&quot;w\\&quot;:60,\\&quot;h\\&quot;:33}}&quot;, pos: 1) {\n    error\n    ok\n    id\n    __typename\n  }\n}\n</code></pre>\n<p>When executing this query you would need to get the ids created.</p>\n<p>I expect a string with the mutation to be able to separate the necessary ids.</p>\n"},{"tags":["java","swing","user-interface","jtextfield","border"],"comments":[{"owner":{"display_name":"user21603351"},"score":0,"creation_date":1683146940,"post_id":6052343,"comment_id":134323560,"body_markdown":"Please do *some* proper code formatting! You should be using code tags (```) not &gt;.","body":"Please do <i>some</i> proper code formatting! You should be using code tags (```) not &gt;."},{"owner":{"account_id":306126,"reputation":498,"user_id":616693,"accept_rate":55,"display_name":"OMG-1"},"score":0,"creation_date":1683272916,"post_id":6052343,"comment_id":134344514,"body_markdown":"@Ben I welcome you to Stackoverflow; my question is over 10 years old. The tools for format code are horrible, to say the least, but I hope you are happier with this edit.","body":"@Ben I welcome you to Stackoverflow; my question is over 10 years old. The tools for format code are horrible, to say the least, but I hope you are happier with this edit."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1683273315,"post_id":6052343,"comment_id":134344578,"body_markdown":"better (at least it looks like code now) next step: fix the indentation to make it really readable :)","body":"better (at least it looks like code now) next step: fix the indentation to make it really readable :)"}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1305763530,"creation_date":1305763530,"answer_id":6052415,"question_id":6052343,"body_markdown":"I would think  you should be creating a custom Border for this. Then you can control the insets and do the painting in the Border, instead of the paintComponent() method of the text field.","title":"Rounded corner on JTextField and make it consistent through different PLAFs","body":"<p>I would think  you should be creating a custom Border for this. Then you can control the insets and do the painting in the Border, instead of the paintComponent() method of the text field.</p>\n"},{"tags":[],"owner":{"account_id":1525498,"reputation":1,"user_id":1424057,"display_name":"Alan Hunt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1350818039,"creation_date":1338304629,"answer_id":10801995,"question_id":6052343,"body_markdown":"I was having the same issue, and found that calling\r\n\r\n    setBackground(new Color(0,0,0,0))\r\n\r\non the text field class cleared it up.  I think that it is not making the background non opaque even if you declare the widget non opaque.","title":"Rounded corner on JTextField and make it consistent through different PLAFs","body":"<p>I was having the same issue, and found that calling</p>\n\n<pre><code>setBackground(new Color(0,0,0,0))\n</code></pre>\n\n<p>on the text field class cleared it up.  I think that it is not making the background non opaque even if you declare the widget non opaque.</p>\n"}],"owner":{"account_id":306126,"reputation":498,"user_id":616693,"accept_rate":55,"display_name":"OMG-1"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2296,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683286681,"creation_date":1305762741,"question_id":6052343,"body_markdown":"Hello dear fellow stackoverflow users,\r\n\r\nI got a simple *hack* where I get my long wanted round corners on a `JTextField`.  \r\nI found that I could subclass JTextField and override `paintComponent(Graphics g)`\r\n\r\nIn that regard I could edit the following:\r\n\r\n - change the border from standard border to `BorderFactory.createEmptyBorder()`.\r\n - change the look on the textfield from rectangular to roundrectangular.\r\n - change the offset for the text so it wasn&#39;t near the round border. (override `getInsets()`)\r\n\r\nNow I&#39;m battling with the following issues:\r\n\r\n - Changing the selection size\r\n - When *USER* change the plaf to e.g. Nimbus then the look on the `subclassed JTextField` is ruined, by that I mean Nimbus painting routines is preferred over mine.  So I get a mix of Nimbus and my round borderpainting.\r\n\r\nSo in very short, does any of you know how I dissect the `JTextField` with the various issues, written above?\r\n\r\nWritten is my sample code for making rounded borders in a custom class JTextField within the constructor `setBorder(BorderFactory.createEmptyBorder())` and `setOpaque(false);`:  \r\n\r\n    @Override\r\n    public Insets getInsets() {\r\n        Insets insets = super.getInsets();\r\n        insets.left += 10;\r\n        return insets;\r\n    }\r\n\r\n    @Override\r\n    public Insets getInsets(Insets insets) {\r\n        return insets;\r\n    }\r\n\r\n    @Override\r\n    public void paintComponent(Graphics g) {\r\n        Graphics2D g2 = Graphics2D)g.create();\r\n        g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.6f));\r\n        RoundRectangle2D.Float r2d = new RoundRectangle2D.Float(0, 0, getWidth(), getHeight(), 10, 10);\r\n        Paint backgroundBrush = new GradientPaint(0, 0, new Color(0x383838), 0, getHeight(), new Color(0xCECECE).darker());\r\n        Shape oldClip = g2.getClip();\r\n        g2.setPaint(backgroundBrush);\r\n        g2.clip(r2d);\r\n        g2.fillRect(0, 0, getWidth() - 1, getHeight() - 1);\r\n        g2.setClip(oldClip);\r\n        g2.setColor(Color.black);\r\n        g2.drawRoundRect(0, 0, getWidth() - 1, getHeight() - 1, 10, 10);\r\n        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n        g2.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);\r\n        g2.dispose();\r\n        super.paintComponent(g);\r\n    }","title":"Rounded corner on JTextField and make it consistent through different PLAFs","body":"<p>Hello dear fellow stackoverflow users,</p>\n<p>I got a simple <em>hack</em> where I get my long wanted round corners on a <code>JTextField</code>.<br />\nI found that I could subclass JTextField and override <code>paintComponent(Graphics g)</code></p>\n<p>In that regard I could edit the following:</p>\n<ul>\n<li>change the border from standard border to <code>BorderFactory.createEmptyBorder()</code>.</li>\n<li>change the look on the textfield from rectangular to roundrectangular.</li>\n<li>change the offset for the text so it wasn't near the round border. (override <code>getInsets()</code>)</li>\n</ul>\n<p>Now I'm battling with the following issues:</p>\n<ul>\n<li>Changing the selection size</li>\n<li>When <em>USER</em> change the plaf to e.g. Nimbus then the look on the <code>subclassed JTextField</code> is ruined, by that I mean Nimbus painting routines is preferred over mine.  So I get a mix of Nimbus and my round borderpainting.</li>\n</ul>\n<p>So in very short, does any of you know how I dissect the <code>JTextField</code> with the various issues, written above?</p>\n<p>Written is my sample code for making rounded borders in a custom class JTextField within the constructor <code>setBorder(BorderFactory.createEmptyBorder())</code> and <code>setOpaque(false);</code>:</p>\n<pre><code>@Override\npublic Insets getInsets() {\n    Insets insets = super.getInsets();\n    insets.left += 10;\n    return insets;\n}\n\n@Override\npublic Insets getInsets(Insets insets) {\n    return insets;\n}\n\n@Override\npublic void paintComponent(Graphics g) {\n    Graphics2D g2 = Graphics2D)g.create();\n    g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.6f));\n    RoundRectangle2D.Float r2d = new RoundRectangle2D.Float(0, 0, getWidth(), getHeight(), 10, 10);\n    Paint backgroundBrush = new GradientPaint(0, 0, new Color(0x383838), 0, getHeight(), new Color(0xCECECE).darker());\n    Shape oldClip = g2.getClip();\n    g2.setPaint(backgroundBrush);\n    g2.clip(r2d);\n    g2.fillRect(0, 0, getWidth() - 1, getHeight() - 1);\n    g2.setClip(oldClip);\n    g2.setColor(Color.black);\n    g2.drawRoundRect(0, 0, getWidth() - 1, getHeight() - 1, 10, 10);\n    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n    g2.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);\n    g2.dispose();\n    super.paintComponent(g);\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","amazon-sqs","aws-sqs-fifo"],"answers":[{"tags":[],"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683286108,"creation_date":1683286108,"answer_id":76181688,"question_id":76181531,"body_markdown":"1. Because there were 10 messages being sent, that is what matters, not in how many batches they arrived in.\r\n\r\n2. No, it depends on how large the payload was / is, how many actual requests were needed to send those messages and how many requests were needed to receive and delete those messages. One request to send 10 message, one request to receive them all (will probably not work because you will not get 10 messages in a single Receive call with that few messages available), one request to delete them all =&gt; 3 requests. In practice that count will be higher since the Receive will probably only get 1 message meaning you need at least 10 such calls plus 10 delete calls. \r\n\r\n3. You generally can&#39;t. SQS (or some other internal tool) knows the request count to generate the bill but this information is not exposed.","title":"How AWS SQS API requests count logic works?","body":"<ol>\n<li><p>Because there were 10 messages being sent, that is what matters, not in how many batches they arrived in.</p>\n</li>\n<li><p>No, it depends on how large the payload was / is, how many actual requests were needed to send those messages and how many requests were needed to receive and delete those messages. One request to send 10 message, one request to receive them all (will probably not work because you will not get 10 messages in a single Receive call with that few messages available), one request to delete them all =&gt; 3 requests. In practice that count will be higher since the Receive will probably only get 1 message meaning you need at least 10 such calls plus 10 delete calls.</p>\n</li>\n<li><p>You generally can't. SQS (or some other internal tool) knows the request count to generate the bill but this information is not exposed.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":3016168,"reputation":690,"user_id":2558284,"accept_rate":20,"display_name":"Akashsingla19"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1683286303,"creation_date":1683284938,"question_id":76181531,"body_markdown":"I am using SQS Batching using a Java client(AmazonSQSBufferedAsyncClient) for sending messages to SQS. I am sending 10 messages in one batch, But SQS monitoring is showing the &quot;Number Of Messages Sent&quot; is 10. Same for &quot;Number Of Messages Received&quot; and &quot;Number Of Messages Deleted&quot; Metric(Showing 10 count, expecting 1).\r\n\r\nBelow is the code to create a buffered client\r\n\r\n    final AmazonSQSAsync sqsAsync = new AmazonSQSAsyncClient(SQSConfig.getCreds());\r\n\r\n    final QueueBufferConfig config = new QueueBufferConfig()\r\n            .withMaxBatchOpenMs(10000)\r\n            .withMaxBatchSize(10)\r\n            .withMaxInflightReceiveBatches(2)\r\n            .withMaxDoneReceiveBatches(15);\r\n\r\n    config.setLongPoll(true);\r\n\r\n    bufferedSqs = new AmazonSQSBufferedAsyncClient(sqsAsync, config);\r\nBelow is the code to send a message.\r\n\r\n    public void sendBufferMessageInBatch(String message, String messageGroupId) throws ExecutionException, InterruptedException {\r\n\r\n        SendMessageBatchRequest sqsBatchRequest = new SendMessageBatchRequest();\r\n\r\n        sqsBatchRequest.setQueueUrl(SQSConfig.endpoint);\r\n        List&lt;SendMessageBatchRequestEntry&gt; entryList = Stream.iterate(1, i -&gt; i &lt; 11, i -&gt; i + 1)\r\n                .map(numb -&gt; {\r\n                    String sendMessage = message;\r\n                    sendMessage = sendMessage + &quot;_&quot; + numb;\r\n                    sendMessage = sendMessage + &quot;_&quot; + messageGroupId;\r\n                    SendMessageBatchRequestEntry entry = new SendMessageBatchRequestEntry();\r\n                    entry.setMessageBody(sendMessage);\r\n                    entry.setId(&quot;id_&quot; + numb);\r\n                    printSendMessage(sendMessage);\r\n                    return entry;\r\n                })\r\n                .collect(Collectors.toList());\r\n\r\n        sqsBatchRequest.setEntries(entryList);\r\n        Future&lt;SendMessageBatchResult&gt; sendBatchMessageFuture = SQSConfig.bufferedSqs.sendMessageBatchAsync(sqsBatchRequest);\r\n    }\r\nQuestions:\r\n\r\n1. Why are &quot;Number Of Messages Sent&quot; metrics showing count 10 instead of count 1? (The batch message size is less than 64kb.)\r\n2. Whatever count shows on &quot;Number Of Messages Sent&quot; metric, that count is chargeable by aws?\r\n3. How can I track the API request that executes by SQS? How is SQS counting the API request while creating the bill?","title":"How AWS SQS API requests count logic works?","body":"<p>I am using SQS Batching using a Java client(AmazonSQSBufferedAsyncClient) for sending messages to SQS. I am sending 10 messages in one batch, But SQS monitoring is showing the &quot;Number Of Messages Sent&quot; is 10. Same for &quot;Number Of Messages Received&quot; and &quot;Number Of Messages Deleted&quot; Metric(Showing 10 count, expecting 1).</p>\n<p>Below is the code to create a buffered client</p>\n<pre><code>final AmazonSQSAsync sqsAsync = new AmazonSQSAsyncClient(SQSConfig.getCreds());\n\nfinal QueueBufferConfig config = new QueueBufferConfig()\n        .withMaxBatchOpenMs(10000)\n        .withMaxBatchSize(10)\n        .withMaxInflightReceiveBatches(2)\n        .withMaxDoneReceiveBatches(15);\n\nconfig.setLongPoll(true);\n\nbufferedSqs = new AmazonSQSBufferedAsyncClient(sqsAsync, config);\n</code></pre>\n<p>Below is the code to send a message.</p>\n<pre><code>public void sendBufferMessageInBatch(String message, String messageGroupId) throws ExecutionException, InterruptedException {\n\n    SendMessageBatchRequest sqsBatchRequest = new SendMessageBatchRequest();\n\n    sqsBatchRequest.setQueueUrl(SQSConfig.endpoint);\n    List&lt;SendMessageBatchRequestEntry&gt; entryList = Stream.iterate(1, i -&gt; i &lt; 11, i -&gt; i + 1)\n            .map(numb -&gt; {\n                String sendMessage = message;\n                sendMessage = sendMessage + &quot;_&quot; + numb;\n                sendMessage = sendMessage + &quot;_&quot; + messageGroupId;\n                SendMessageBatchRequestEntry entry = new SendMessageBatchRequestEntry();\n                entry.setMessageBody(sendMessage);\n                entry.setId(&quot;id_&quot; + numb);\n                printSendMessage(sendMessage);\n                return entry;\n            })\n            .collect(Collectors.toList());\n\n    sqsBatchRequest.setEntries(entryList);\n    Future&lt;SendMessageBatchResult&gt; sendBatchMessageFuture = SQSConfig.bufferedSqs.sendMessageBatchAsync(sqsBatchRequest);\n}\n</code></pre>\n<p>Questions:</p>\n<ol>\n<li>Why are &quot;Number Of Messages Sent&quot; metrics showing count 10 instead of count 1? (The batch message size is less than 64kb.)</li>\n<li>Whatever count shows on &quot;Number Of Messages Sent&quot; metric, that count is chargeable by aws?</li>\n<li>How can I track the API request that executes by SQS? How is SQS counting the API request while creating the bill?</li>\n</ol>\n"},{"tags":["java","synology"],"owner":{"account_id":3062593,"reputation":5406,"user_id":2594961,"accept_rate":88,"display_name":"yaylitzis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683286059,"creation_date":1683285746,"question_id":76181640,"body_markdown":"I have a Synology NAS disk and I want to access the logs that exist in the [Log Center][1] from a Java application. I checked [Synology API][2] and there isn&#39;t any GET query for this and I haven&#39;t found a way to access the logs.\r\n\r\nCan you suggest a way to accomplish that?\r\n\r\n\r\n\r\n\r\n  [1]: https://kb.synology.com/en-us/DSM/help/DSM/LogCenter/logcenter_desc?version=7\r\n  [2]: https://global.download.synology.com/download/Document/Software/DeveloperGuide/Package/FileStation/All/enu/Synology_File_Station_API_Guide.pdf","title":"Access Synology logs from Java application","body":"<p>I have a Synology NAS disk and I want to access the logs that exist in the <a href=\"https://kb.synology.com/en-us/DSM/help/DSM/LogCenter/logcenter_desc?version=7\" rel=\"nofollow noreferrer\">Log Center</a> from a Java application. I checked <a href=\"https://global.download.synology.com/download/Document/Software/DeveloperGuide/Package/FileStation/All/enu/Synology_File_Station_API_Guide.pdf\" rel=\"nofollow noreferrer\">Synology API</a> and there isn't any GET query for this and I haven't found a way to access the logs.</p>\n<p>Can you suggest a way to accomplish that?</p>\n"},{"tags":["java","spring-boot","jakarta-mail","connection-pooling"],"owner":{"account_id":22310428,"reputation":55,"user_id":20916403,"display_name":"rose pauline"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1683285557,"creation_date":1683285557,"question_id":76181618,"body_markdown":"I have used connection pooling to reuse store.connect(). It works for single user but for multiple users it is not working.\r\n\r\nFor multiple users it takes the 1st loaded user data for all other users.\r\nHow to fix this.\r\n\r\nBelow is the code,\r\n```\r\npublic class EmailListingController {\r\n\r\n\tprivate static EmailListingController instance = null;\r\n\tprivate static Store store = null;\r\n\r\n\tpublic EmailListingController() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tprivate EmailListingController(String host, String mailstoreType, String username, String originalPassword,\r\n\t\t\tint port, boolean auth, boolean security, User user) throws MessagingException {\r\n\t\tSystem.out.println(&quot;props + store connect&quot;);\r\n\t\tProperties properties = new Properties();\r\n\t\tproperties.put(&quot;mail.store.protocol&quot;, mailstoreType);\r\n\t\tproperties.put(&quot;mail.imaps.host&quot;, host);\r\n\t\tproperties.put(&quot;mail.imaps.port&quot;, port);\r\n\t\tproperties.put(&quot;mail.smtp.ssl.enable&quot;, security);\r\n\t\tSession session = Session.getInstance(properties);\r\n\t\tstore = session.getStore();\r\n\t\tstore.connect(username, originalPassword);\r\n\t}\r\n\r\n\tpublic static synchronized EmailListingController getInstance(String host, String mailstoreType, String username,\r\n\t\t\tString originalPassword, int port, boolean auth, boolean security, User user) throws MessagingException {\r\n\t\tSystem.out.println(&quot;instance&quot;);\r\n\t\tif (instance == null) {\r\n\t\t\tinstance = new EmailListingController(host, mailstoreType, username, originalPassword, port, auth, security,\r\n\t\t\t\t\tuser);\r\n\t\t}\r\n\t\treturn instance;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/inbox/{userId}&quot;)\r\n\tpublic ResponseEntity test(@PathVariable(&quot;userId&quot;) Integer id) {\r\n\t\tOptional&lt;User&gt; user = userService.findById(id);\r\n\t\tList&lt;Email&gt; emailList = new ArrayList&lt;Email&gt;();\r\n\t\tif (user.isPresent()) {\r\n\t\t\tString username = user.get().getUserName();\r\n\t\t\tString pwd = user.get().getPassword();\r\n\r\n\t\t\tEmailListingController client = EmailListingController.getInstance(host, mailstoreType, username,\r\n\t\t\t\t\tpwd, port, auth, security, user.get());\r\n\t\t\tFolder folder = store.getFolder(&quot;inbox&quot;);\r\n\t\t\tfolder.open(Folder.READ_ONLY);\r\n\t\t\tString from;String subject;String message1;String cc;String to;String bcc;\r\n\t\t\tString[] toArray = null;String[] ccArray = null;String[] bccArray = null;Email email2;\r\n\t\t\tFetchProfile fp1 = new FetchProfile();\r\n\t\t\tfp1.add(FetchProfile.Item.ENVELOPE);\r\n\t\t\tfp1.add(IMAPFolder.FetchProfileItem.FLAGS);\r\n\t\t\tfp1.add(IMAPFolder.FetchProfileItem.CONTENT_INFO);\r\n\t\t\tfp1.add(UIDFolder.FetchProfileItem.UID);\r\n\t\t\tfolder.fetch(folder.getMessages(), fp1);\r\n\t\t\tfor (Message message : folder.getMessages()) {\r\n\t\t\t\tSystem.out.println(&quot;message&quot; + message.getSubject());\r\n\t\t\t}\r\n\t\t\treturn new ResponseEntity(emailList, HttpStatus.OK);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nAny help would be appreciated!","title":"how to use connection pooling to reuse store.connect() in java mail API for multiple users","body":"<p>I have used connection pooling to reuse store.connect(). It works for single user but for multiple users it is not working.</p>\n<p>For multiple users it takes the 1st loaded user data for all other users.\nHow to fix this.</p>\n<p>Below is the code,</p>\n<pre><code>public class EmailListingController {\n\n    private static EmailListingController instance = null;\n    private static Store store = null;\n\n    public EmailListingController() {\n        super();\n    }\n\n    private EmailListingController(String host, String mailstoreType, String username, String originalPassword,\n            int port, boolean auth, boolean security, User user) throws MessagingException {\n        System.out.println(&quot;props + store connect&quot;);\n        Properties properties = new Properties();\n        properties.put(&quot;mail.store.protocol&quot;, mailstoreType);\n        properties.put(&quot;mail.imaps.host&quot;, host);\n        properties.put(&quot;mail.imaps.port&quot;, port);\n        properties.put(&quot;mail.smtp.ssl.enable&quot;, security);\n        Session session = Session.getInstance(properties);\n        store = session.getStore();\n        store.connect(username, originalPassword);\n    }\n\n    public static synchronized EmailListingController getInstance(String host, String mailstoreType, String username,\n            String originalPassword, int port, boolean auth, boolean security, User user) throws MessagingException {\n        System.out.println(&quot;instance&quot;);\n        if (instance == null) {\n            instance = new EmailListingController(host, mailstoreType, username, originalPassword, port, auth, security,\n                    user);\n        }\n        return instance;\n    }\n\n    @GetMapping(&quot;/inbox/{userId}&quot;)\n    public ResponseEntity test(@PathVariable(&quot;userId&quot;) Integer id) {\n        Optional&lt;User&gt; user = userService.findById(id);\n        List&lt;Email&gt; emailList = new ArrayList&lt;Email&gt;();\n        if (user.isPresent()) {\n            String username = user.get().getUserName();\n            String pwd = user.get().getPassword();\n\n            EmailListingController client = EmailListingController.getInstance(host, mailstoreType, username,\n                    pwd, port, auth, security, user.get());\n            Folder folder = store.getFolder(&quot;inbox&quot;);\n            folder.open(Folder.READ_ONLY);\n            String from;String subject;String message1;String cc;String to;String bcc;\n            String[] toArray = null;String[] ccArray = null;String[] bccArray = null;Email email2;\n            FetchProfile fp1 = new FetchProfile();\n            fp1.add(FetchProfile.Item.ENVELOPE);\n            fp1.add(IMAPFolder.FetchProfileItem.FLAGS);\n            fp1.add(IMAPFolder.FetchProfileItem.CONTENT_INFO);\n            fp1.add(UIDFolder.FetchProfileItem.UID);\n            folder.fetch(folder.getMessages(), fp1);\n            for (Message message : folder.getMessages()) {\n                System.out.println(&quot;message&quot; + message.getSubject());\n            }\n            return new ResponseEntity(emailList, HttpStatus.OK);\n        }\n    }\n}\n</code></pre>\n<p>Any help would be appreciated!</p>\n"},{"tags":["java","android","sharedpreferences","android-jetpack","datastore"],"answers":[{"tags":[],"owner":{"account_id":18571239,"reputation":4748,"user_id":13533028,"display_name":"Narendra_Nath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676345627,"creation_date":1676345627,"answer_id":75443204,"question_id":75443067,"body_markdown":"It is very straightforward to migrate from sharedPreferences to dataStore.\r\nPass the old SharedPref name and the migration happens automatically. \r\n\r\n\r\n```\r\nprivate val dataStore: DataStore&lt;Preferences&gt; =\r\n    context.createDataStore(\r\n        name = &quot;data&quot;,\r\n        migrations = \r\n          listOf(SharedPreferencesMigration(context, &quot;shared_preferences_name&quot;))\r\n    )\r\n```\r\n ","title":"Preferences DataStore in Android using Java","body":"<p>It is very straightforward to migrate from sharedPreferences to dataStore.\nPass the old SharedPref name and the migration happens automatically.</p>\n<pre><code>private val dataStore: DataStore&lt;Preferences&gt; =\n    context.createDataStore(\n        name = &quot;data&quot;,\n        migrations = \n          listOf(SharedPreferencesMigration(context, &quot;shared_preferences_name&quot;))\n    )\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27329811,"reputation":31,"user_id":20842131,"display_name":"maxvolk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683285439,"creation_date":1683285439,"answer_id":76181597,"question_id":75443067,"body_markdown":"I was at the exact same point in my project. Suddenly the sharedpreferences are deprecated, so what now.\r\nDataStore can be found rather quickly but I also think the [documentation][1] is not sufficient in clearing up what needs to be done.\r\n\r\nI did get it to work though:\r\n\r\n**1. Implementing**\r\n\r\nImplement this in the dependencies (app module):\r\n\r\n    //DataStore instead of SharedPreferences\r\n    implementation &quot;androidx.datastore:datastore-preferences:1.0.0&quot;\r\n    //RxJava2 support\r\n    implementation &quot;androidx.datastore:datastore-preferences-rxjava2:1.0.0&quot;\r\n\r\n **2. Initializing**\r\n\r\nI am using the RxDataStore and the associated RxDataStoreBuilder:\r\n\r\n    RxDataStore&lt;Preferences&gt; dataStoreRX; //Top Part\r\n    dataStoreRX = new RxPreferenceDataStoreBuilder(this,&quot;your_datastorename&quot;).build(); //onCreate\r\n\r\n **3. Storing Data**\r\n\r\nTo save data in the DataStore you can use what is in the doc:\r\n\r\n    public boolean putStringValue(String Key, String value){\r\n      boolean returnvalue;\r\n      Preferences.Key&lt;String&gt; PREF_KEY = PreferencesKeys.stringKey(Key);\r\n      Single&lt;Preferences&gt; updateResult =  dataStoreRX.updateDataAsync(prefsIn -&gt; {\r\n      MutablePreferences mutablePreferences = prefsIn.toMutablePreferences();\r\n      mutablePreferences.set(PREF_KEY, value);\r\n      return Single.just(mutablePreferences);\r\n      }).onErrorReturnItem(pref_error);\r\n    \r\n      returnvalue = updateResult.blockingGet() != pref_error;\r\n      return returnvalue;\r\n    }\r\n\r\nWith the litte addition of error handling: onErrorReturnItem\r\n\r\n    Preferences pref_error = new Preferences() {...};\r\n\r\nDoesnt matter whats in pref_error, it only exists to be returned and to check if it is returned.\r\n\r\n **4. Retreiving Data**\r\n\r\nTo retreive, same thing but backwards and with error-handling:\r\n\r\n    String getStringValue(String Key) {\r\n      Preferences.Key&lt;String&gt; PREF_KEY = PreferencesKeys.stringKey(Key);\r\n      Single&lt;String&gt; value = dataStoreRX.data().firstOrError().map(prefs -&gt; prefs.get(PREF_KEY)).onErrorReturnItem(&quot;null&quot;);\r\n      return value.blockingGet();\r\n    }\r\n\r\n **5. More than that!**\r\n\r\nBut there is way more to that. If you want to use the DataStore across several activities you need to use a Singleton and thore it as such. The reason is you cant create more than one instance of one DataStore. That is in the [documentation][1] but as I said, I think it is not complete.\r\nAlso error-handling is not described there.\r\n\r\nBut you can use all datatypes to store them with the correct KEY and with the respective returnvalue as an error.\r\n\r\nI elaborate more on this and how to set up the Singleton here: [Link to Medium][2]\r\n\r\nHope it helps :)\r\n\r\n\r\n  [1]: https://developer.android.com/topic/libraries/architecture/datastore#preferences-datastore\r\n  [2]: https://medium.com/@deadmanapple/using-the-android-datastore-library-instead-of-sharedpreferences-in-java-d6744c348a05","title":"Preferences DataStore in Android using Java","body":"<p>I was at the exact same point in my project. Suddenly the sharedpreferences are deprecated, so what now.\nDataStore can be found rather quickly but I also think the <a href=\"https://developer.android.com/topic/libraries/architecture/datastore#preferences-datastore\" rel=\"nofollow noreferrer\">documentation</a> is not sufficient in clearing up what needs to be done.</p>\n<p>I did get it to work though:</p>\n<p><strong>1. Implementing</strong></p>\n<p>Implement this in the dependencies (app module):</p>\n<pre><code>//DataStore instead of SharedPreferences\nimplementation &quot;androidx.datastore:datastore-preferences:1.0.0&quot;\n//RxJava2 support\nimplementation &quot;androidx.datastore:datastore-preferences-rxjava2:1.0.0&quot;\n</code></pre>\n<p><strong>2. Initializing</strong></p>\n<p>I am using the RxDataStore and the associated RxDataStoreBuilder:</p>\n<pre><code>RxDataStore&lt;Preferences&gt; dataStoreRX; //Top Part\ndataStoreRX = new RxPreferenceDataStoreBuilder(this,&quot;your_datastorename&quot;).build(); //onCreate\n</code></pre>\n<p><strong>3. Storing Data</strong></p>\n<p>To save data in the DataStore you can use what is in the doc:</p>\n<pre><code>public boolean putStringValue(String Key, String value){\n  boolean returnvalue;\n  Preferences.Key&lt;String&gt; PREF_KEY = PreferencesKeys.stringKey(Key);\n  Single&lt;Preferences&gt; updateResult =  dataStoreRX.updateDataAsync(prefsIn -&gt; {\n  MutablePreferences mutablePreferences = prefsIn.toMutablePreferences();\n  mutablePreferences.set(PREF_KEY, value);\n  return Single.just(mutablePreferences);\n  }).onErrorReturnItem(pref_error);\n\n  returnvalue = updateResult.blockingGet() != pref_error;\n  return returnvalue;\n}\n</code></pre>\n<p>With the litte addition of error handling: onErrorReturnItem</p>\n<pre><code>Preferences pref_error = new Preferences() {...};\n</code></pre>\n<p>Doesnt matter whats in pref_error, it only exists to be returned and to check if it is returned.</p>\n<p><strong>4. Retreiving Data</strong></p>\n<p>To retreive, same thing but backwards and with error-handling:</p>\n<pre><code>String getStringValue(String Key) {\n  Preferences.Key&lt;String&gt; PREF_KEY = PreferencesKeys.stringKey(Key);\n  Single&lt;String&gt; value = dataStoreRX.data().firstOrError().map(prefs -&gt; prefs.get(PREF_KEY)).onErrorReturnItem(&quot;null&quot;);\n  return value.blockingGet();\n}\n</code></pre>\n<p><strong>5. More than that!</strong></p>\n<p>But there is way more to that. If you want to use the DataStore across several activities you need to use a Singleton and thore it as such. The reason is you cant create more than one instance of one DataStore. That is in the <a href=\"https://developer.android.com/topic/libraries/architecture/datastore#preferences-datastore\" rel=\"nofollow noreferrer\">documentation</a> but as I said, I think it is not complete.\nAlso error-handling is not described there.</p>\n<p>But you can use all datatypes to store them with the correct KEY and with the respective returnvalue as an error.</p>\n<p>I elaborate more on this and how to set up the Singleton here: <a href=\"https://medium.com/@deadmanapple/using-the-android-datastore-library-instead-of-sharedpreferences-in-java-d6744c348a05\" rel=\"nofollow noreferrer\">Link to Medium</a></p>\n<p>Hope it helps :)</p>\n"}],"owner":{"account_id":22450303,"reputation":369,"user_id":16653709,"display_name":"Chandu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1240,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1683285439,"creation_date":1676343518,"question_id":75443067,"body_markdown":"I&#39;m working on a Java based Android Project where I&#39;m using sharedPreferences to store the data.\r\n\r\nI want to use Preferences DataStore in my project but unable to find any good example to take reference. Please suggest any reference examples in Java to implement preference data store in Android or how to migrate from shared prefs to DataStore.\r\n\r\nI tried to go through [developer documentation][1], but couldn&#39;t understand the example provided\r\n\r\n\r\n  [1]: https://developer.android.com/topic/libraries/architecture/datastore?gclsrc=aw.ds&amp;&amp;gclid=Cj0KCQjwp86EBhD7ARIsAFkgakg-4Xc0UsX_xgNZmeSeNdZfTuoMoZ4JPUuZUyJq7dUOAV_JSY029GoaAgCHEALw_wcB#java","title":"Preferences DataStore in Android using Java","body":"<p>I'm working on a Java based Android Project where I'm using sharedPreferences to store the data.</p>\n<p>I want to use Preferences DataStore in my project but unable to find any good example to take reference. Please suggest any reference examples in Java to implement preference data store in Android or how to migrate from shared prefs to DataStore.</p>\n<p>I tried to go through <a href=\"https://developer.android.com/topic/libraries/architecture/datastore?gclsrc=aw.ds&amp;&amp;gclid=Cj0KCQjwp86EBhD7ARIsAFkgakg-4Xc0UsX_xgNZmeSeNdZfTuoMoZ4JPUuZUyJq7dUOAV_JSY029GoaAgCHEALw_wcB#java\" rel=\"nofollow noreferrer\">developer documentation</a>, but couldn't understand the example provided</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","servlet-filters"],"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683285313,"creation_date":1683284923,"question_id":76181528,"body_markdown":"I want to create a filter that is used in a Spring Boot (3.x) application. This filter should load another Spring MVC view if a certain header is sent in the request. The view that I want to load requires a &quot;model map&quot; attribute for it to render correctly. Here&#39;s an example:\r\n\r\n```java\r\n@Component\r\npublic class MyFilter extends OncePerRequestFilter {\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        boolean isHeaderPresent = request.getHeader(&quot;SomeHeader&quot;) != null;        \r\n        if (isHeaderPresent) {\r\n            // Here, I&#39;d like to access &quot;ModelMap&quot; to add an attribute like this:\r\n            // modelMap.put(&quot;somekey&quot;, &quot;somevalue&quot;);\r\n            // Then I want to return the Thyeleaf &quot;view&quot; called &quot;someview&quot;.\r\n        } else {\r\n            filterChain.doFilter(request, response);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI.e. I want a filter that essentially does this for every controller (that the filter intercepts):\r\n\r\n```java\r\n@GetMapping(&quot;/something&quot;)\r\npublic String somewhere(ModelMap modelMap, HttpServletRequest request) {\r\n    boolean isHeaderPresent = request.getHeader(&quot;SomeHeader&quot;) != null;        \r\n    if (isHeaderPresent) {\r\n        modelMap.put(&quot;somekey&quot;, &quot;somevalue&quot;);\r\n        return &quot;someview&quot;;\r\n    } else {\r\n        return &quot;something&quot;;\r\n    }\r\n}\r\n```\r\n\r\nNote that I&#39;m fine with _not_ using a `Filter` if there&#39;s a better way to achieve it.\r\n\r\nHow can I achieve this?","title":"Render/redirect to a different view from a filter in Spring Boot?","body":"<p>I want to create a filter that is used in a Spring Boot (3.x) application. This filter should load another Spring MVC view if a certain header is sent in the request. The view that I want to load requires a &quot;model map&quot; attribute for it to render correctly. Here's an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class MyFilter extends OncePerRequestFilter {\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        boolean isHeaderPresent = request.getHeader(&quot;SomeHeader&quot;) != null;        \n        if (isHeaderPresent) {\n            // Here, I'd like to access &quot;ModelMap&quot; to add an attribute like this:\n            // modelMap.put(&quot;somekey&quot;, &quot;somevalue&quot;);\n            // Then I want to return the Thyeleaf &quot;view&quot; called &quot;someview&quot;.\n        } else {\n            filterChain.doFilter(request, response);\n        }\n    }\n}\n</code></pre>\n<p>I.e. I want a filter that essentially does this for every controller (that the filter intercepts):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/something&quot;)\npublic String somewhere(ModelMap modelMap, HttpServletRequest request) {\n    boolean isHeaderPresent = request.getHeader(&quot;SomeHeader&quot;) != null;        \n    if (isHeaderPresent) {\n        modelMap.put(&quot;somekey&quot;, &quot;somevalue&quot;);\n        return &quot;someview&quot;;\n    } else {\n        return &quot;something&quot;;\n    }\n}\n</code></pre>\n<p>Note that I'm fine with <em>not</em> using a <code>Filter</code> if there's a better way to achieve it.</p>\n<p>How can I achieve this?</p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":87016,"reputation":68348,"user_id":241590,"accept_rate":99,"display_name":"stacker"},"down_vote_count":0,"up_vote_count":187,"is_accepted":false,"score":187,"last_activity_date":1362497567,"creation_date":1268217116,"answer_id":2416113,"question_id":2416056,"body_markdown":"Here is one method:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;bean id=&quot;stage1&quot; class=&quot;Stageclass&quot;/&gt;\r\n    &lt;bean id=&quot;stage2&quot; class=&quot;Stageclass&quot;/&gt;\r\n    \r\n    &lt;bean id=&quot;stages&quot; class=&quot;java.util.ArrayList&quot;&gt;\r\n        &lt;constructor-arg&gt;\r\n            &lt;list&gt;\r\n                &lt;ref bean=&quot;stage1&quot; /&gt;\r\n                &lt;ref bean=&quot;stage2&quot; /&gt;                \r\n            &lt;/list&gt;\r\n        &lt;/constructor-arg&gt;\r\n    &lt;/bean&gt;\r\n\r\n","title":"How to define a List bean in Spring?","body":"<p>Here is one method:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=\"stage1\" class=\"Stageclass\"/&gt;\n&lt;bean id=\"stage2\" class=\"Stageclass\"/&gt;\n\n&lt;bean id=\"stages\" class=\"java.util.ArrayList\"&gt;\n    &lt;constructor-arg&gt;\n        &lt;list&gt;\n            &lt;ref bean=\"stage1\" /&gt;\n            &lt;ref bean=\"stage2\" /&gt;                \n        &lt;/list&gt;\n    &lt;/constructor-arg&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":779,"reputation":4357,"user_id":1012,"display_name":"simonlord"},"down_vote_count":2,"up_vote_count":291,"is_accepted":true,"score":289,"last_activity_date":1472672277,"creation_date":1268217459,"answer_id":2416145,"question_id":2416056,"body_markdown":"Import the spring util namespace. Then you can define a list bean as follows:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txmlns:util=&quot;http://www.springframework.org/schema/util&quot;\r\n\txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n                        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\r\n                        http://www.springframework.org/schema/util\r\n                        http://www.springframework.org/schema/util/spring-util-2.5.xsd&quot;&gt;\r\n\r\n\r\n\t&lt;util:list id=&quot;myList&quot; value-type=&quot;java.lang.String&quot;&gt;\r\n\t\t&lt;value&gt;foo&lt;/value&gt;\r\n\t\t&lt;value&gt;bar&lt;/value&gt;\r\n\t&lt;/util:list&gt;\r\n\r\n&lt;/beans&gt;\r\n\r\n\r\nThe value-type is the generics type to be used, and is optional. You can also specify the list implementation class using the attribute `list-class`.","title":"How to define a List bean in Spring?","body":"<p>Import the spring util namespace. Then you can define a list bean as follows:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:util=\"http://www.springframework.org/schema/util\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans\n                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n                    http://www.springframework.org/schema/util\n                    http://www.springframework.org/schema/util/spring-util-2.5.xsd\"&gt;\n\n\n&lt;util:list id=\"myList\" value-type=\"java.lang.String\"&gt;\n    &lt;value&gt;foo&lt;/value&gt;\n    &lt;value&gt;bar&lt;/value&gt;\n&lt;/util:list&gt;\n</code></pre>\n\n<p></p>\n\n<p>The value-type is the generics type to be used, and is optional. You can also specify the list implementation class using the attribute <code>list-class</code>.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1268218769,"creation_date":1268218334,"answer_id":2416224,"question_id":2416056,"body_markdown":"I think you may be looking for [`org.springframework.beans.factory.config.ListFactoryBean`][1].\r\n\r\nYou declare a ListFactoryBean instance, providing the list to be instantiated as a property withe a `&lt;list&gt;` element as its value, and give the bean an `id` attribute.  Then, each time you use the declared `id` as a `ref` or similar in some other bean declaration, a new copy of the list is instantiated.  You can also specify the `List` class to be used.\r\n\r\n\r\n  [1]: http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/config/ListFactoryBean.html","title":"How to define a List bean in Spring?","body":"<p>I think you may be looking for <a href=\"http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/config/ListFactoryBean.html\" rel=\"nofollow noreferrer\"><code>org.springframework.beans.factory.config.ListFactoryBean</code></a>.</p>\n\n<p>You declare a ListFactoryBean instance, providing the list to be instantiated as a property withe a <code>&lt;list&gt;</code> element as its value, and give the bean an <code>id</code> attribute.  Then, each time you use the declared <code>id</code> as a <code>ref</code> or similar in some other bean declaration, a new copy of the list is instantiated.  You can also specify the <code>List</code> class to be used.</p>\n"},{"tags":[],"owner":{"account_id":595425,"reputation":11,"user_id":290738,"display_name":"Juan Perez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1268242160,"creation_date":1268242160,"answer_id":2419057,"question_id":2416056,"body_markdown":"Use the util namespace, you will be able to register the list as a bean in your application context. You can then reuse the list to inject it in other bean definitions.","title":"How to define a List bean in Spring?","body":"<p>Use the util namespace, you will be able to register the list as a bean in your application context. You can then reuse the list to inject it in other bean definitions.</p>\n"},{"tags":[],"owner":{"account_id":403862,"reputation":1278,"user_id":771861,"accept_rate":82,"display_name":"haju"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1362497571,"creation_date":1317386839,"answer_id":7610578,"question_id":2416056,"body_markdown":"Stacker posed a great answer, I would go one step farther to make it more dynamic and use Spring 3 EL Expression. \r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n\t&lt;bean id=&quot;listBean&quot; class=&quot;java.util.ArrayList&quot;&gt;\r\n\t\t    &lt;constructor-arg&gt;\r\n\t\t\t\t&lt;value&gt;#{springDAOBean.getGenericListFoo()}&lt;/value&gt;\r\n\t\t    &lt;/constructor-arg&gt;\r\n\t&lt;/bean&gt;\r\n\r\nI was trying to figure out how I could do this with the util:list but couldn&#39;t get it work due to conversion errors. ","title":"How to define a List bean in Spring?","body":"<p>Stacker posed a great answer, I would go one step farther to make it more dynamic and use Spring 3 EL Expression. </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=\"listBean\" class=\"java.util.ArrayList\"&gt;\n        &lt;constructor-arg&gt;\n            &lt;value&gt;#{springDAOBean.getGenericListFoo()}&lt;/value&gt;\n        &lt;/constructor-arg&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>I was trying to figure out how I could do this with the util:list but couldn't get it work due to conversion errors. </p>\n"},{"tags":[],"owner":{"account_id":1202806,"reputation":23213,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1683285058,"creation_date":1389169572,"answer_id":20990352,"question_id":2416056,"body_markdown":"    &lt;bean id=&quot;someBean&quot; class=&quot;com.somePackage.SomeClass&quot;&gt;\r\n        &lt;property name=&quot;myList&quot;&gt;\r\n            &lt;list value-type=&quot;com.somePackage.TypeForList&quot;&gt;\r\n                &lt;ref bean=&quot;someBeanInTheList&quot;/&gt;\r\n                &lt;ref bean=&quot;someOtherBeanInTheList&quot;/&gt;\r\n                &lt;ref bean=&quot;someThirdBeanInTheList&quot;/&gt;\r\n            &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\nAnd in SomeClass:\r\n\r\n    class SomeClass {\r\n        \r\n        List&lt;TypeForList&gt; myList;\r\n      \r\n        @Required\r\n        public void setMyList(List&lt;TypeForList&gt; myList) {\r\n            this.myList = myList;\r\n        }\r\n\r\n    }","title":"How to define a List bean in Spring?","body":"<pre><code>&lt;bean id=&quot;someBean&quot; class=&quot;com.somePackage.SomeClass&quot;&gt;\n    &lt;property name=&quot;myList&quot;&gt;\n        &lt;list value-type=&quot;com.somePackage.TypeForList&quot;&gt;\n            &lt;ref bean=&quot;someBeanInTheList&quot;/&gt;\n            &lt;ref bean=&quot;someOtherBeanInTheList&quot;/&gt;\n            &lt;ref bean=&quot;someThirdBeanInTheList&quot;/&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>And in SomeClass:</p>\n<pre><code>class SomeClass {\n    \n    List&lt;TypeForList&gt; myList;\n  \n    @Required\n    public void setMyList(List&lt;TypeForList&gt; myList) {\n        this.myList = myList;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3617484,"reputation":13834,"user_id":3017003,"accept_rate":81,"display_name":"Jakub Kubrynski"},"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1449739399,"creation_date":1389471430,"answer_id":21067356,"question_id":2416056,"body_markdown":"Another option is to use JavaConfig. Assuming that all stages are already registered as spring beans you just have to:\r\n\r\n    @Autowired\r\n    private List&lt;Stage&gt; stages;\r\n\r\nand spring will automatically inject them into this list. If you need to preserve order (upper solution doesn&#39;t do that) you can do it in that way:\r\n\r\n    @Configuration\r\n    public class MyConfiguration {\r\n      @Autowired\r\n      private Stage1 stage1;\r\n    \r\n      @Autowired\r\n      private Stage2 stage2;\r\n    \r\n      @Bean\r\n      public List&lt;Stage&gt; stages() {\r\n        return Lists.newArrayList(stage1, stage2);\r\n      }\r\n    }\r\n\r\nThe other solution to preserve order is use a `@Order` annotation on beans. Then list will contain beans ordered by ascending annotation value.\r\n\r\n    @Bean\r\n    @Order(1)\r\n    public Stage stage1() {\r\n        return new Stage1();\r\n    }\r\n\r\n    @Bean\r\n    @Order(2)\r\n    public Stage stage2() {\r\n        return new Stage2();\r\n    }\r\n","title":"How to define a List bean in Spring?","body":"<p>Another option is to use JavaConfig. Assuming that all stages are already registered as spring beans you just have to:</p>\n\n<pre><code>@Autowired\nprivate List&lt;Stage&gt; stages;\n</code></pre>\n\n<p>and spring will automatically inject them into this list. If you need to preserve order (upper solution doesn't do that) you can do it in that way:</p>\n\n<pre><code>@Configuration\npublic class MyConfiguration {\n  @Autowired\n  private Stage1 stage1;\n\n  @Autowired\n  private Stage2 stage2;\n\n  @Bean\n  public List&lt;Stage&gt; stages() {\n    return Lists.newArrayList(stage1, stage2);\n  }\n}\n</code></pre>\n\n<p>The other solution to preserve order is use a <code>@Order</code> annotation on beans. Then list will contain beans ordered by ascending annotation value.</p>\n\n<pre><code>@Bean\n@Order(1)\npublic Stage stage1() {\n    return new Stage1();\n}\n\n@Bean\n@Order(2)\npublic Stage stage2() {\n    return new Stage2();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3069662,"reputation":7424,"user_id":2600638,"display_name":"Jose Alban"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1413559859,"creation_date":1413559402,"answer_id":26428294,"question_id":2416056,"body_markdown":"As an addition to Jakub&#39;s answer, if you plan to use JavaConfig, you can also autowire that way:\r\n\r\n    import com.google.common.collect.Lists;\r\n    \r\n    import java.util.List;\r\n    \r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.Bean;\r\n\r\n    &lt;...&gt;\r\n    \r\n    @Configuration\r\n    public class MyConfiguration {\r\n        \r\n        @Bean\r\n        public List&lt;Stage&gt; stages(final Stage1 stage1, final Stage2 stage2) {\r\n            return Lists.newArrayList(stage1, stage2);\r\n        }\r\n    }","title":"How to define a List bean in Spring?","body":"<p>As an addition to Jakub's answer, if you plan to use JavaConfig, you can also autowire that way:</p>\n\n<pre><code>import com.google.common.collect.Lists;\n\nimport java.util.List;\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Bean;\n\n&lt;...&gt;\n\n@Configuration\npublic class MyConfiguration {\n\n    @Bean\n    public List&lt;Stage&gt; stages(final Stage1 stage1, final Stage2 stage2) {\n        return Lists.newArrayList(stage1, stage2);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3597194,"reputation":728,"user_id":3001523,"display_name":"Slava Babin"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1490965059,"creation_date":1490965059,"answer_id":43141306,"question_id":2416056,"body_markdown":"And this is how to inject set in some property in Spring:\r\n\r\n    &lt;bean id=&quot;process&quot;\r\n          class=&quot;biz.bsoft.processing&quot;&gt;\r\n        &lt;property name=&quot;stages&quot;&gt;\r\n            &lt;set value-type=&quot;biz.bsoft.AbstractStage&quot;&gt;\r\n                &lt;ref bean=&quot;stageReady&quot;/&gt;\r\n                &lt;ref bean=&quot;stageSteady&quot;/&gt;\r\n                &lt;ref bean=&quot;stageGo&quot;/&gt;\r\n            &lt;/set&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;","title":"How to define a List bean in Spring?","body":"<p>And this is how to inject set in some property in Spring:</p>\n\n<pre><code>&lt;bean id=\"process\"\n      class=\"biz.bsoft.processing\"&gt;\n    &lt;property name=\"stages\"&gt;\n        &lt;set value-type=\"biz.bsoft.AbstractStage\"&gt;\n            &lt;ref bean=\"stageReady\"/&gt;\n            &lt;ref bean=\"stageSteady\"/&gt;\n            &lt;ref bean=\"stageGo\"/&gt;\n        &lt;/set&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11165025,"reputation":425,"user_id":8193960,"display_name":"RaM PrabU"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1516539352,"creation_date":1516539352,"answer_id":48366994,"question_id":2416056,"body_markdown":"     &lt;bean id=&quot;student1&quot; class=&quot;com.spring.assin2.Student&quot;&gt;  \r\n    &lt;property name=&quot;name&quot; value=&quot;ram&quot;&gt;&lt;/property&gt;  \r\n    &lt;property name=&quot;id&quot; value=&quot;1&quot;&gt;&lt;/property&gt; \r\n    &lt;property name=&quot;listTest&quot;&gt;\r\n            &lt;list value-type=&quot;java.util.List&quot;&gt;\r\n                &lt;ref bean=&quot;test1&quot;/&gt;\r\n                &lt;ref bean=&quot;test2&quot;/&gt;\r\n            &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;  \r\n\r\ndefine those beans(test1,test2) afterwards :)","title":"How to define a List bean in Spring?","body":"<pre><code> &lt;bean id=\"student1\" class=\"com.spring.assin2.Student\"&gt;  \n&lt;property name=\"name\" value=\"ram\"&gt;&lt;/property&gt;  \n&lt;property name=\"id\" value=\"1\"&gt;&lt;/property&gt; \n&lt;property name=\"listTest\"&gt;\n        &lt;list value-type=\"java.util.List\"&gt;\n            &lt;ref bean=\"test1\"/&gt;\n            &lt;ref bean=\"test2\"/&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;  \n</code></pre>\n\n<p>define those beans(test1,test2) afterwards :)</p>\n"},{"tags":[],"owner":{"account_id":9106944,"reputation":723,"user_id":6776992,"display_name":"dqthe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555574112,"creation_date":1555574112,"answer_id":55741500,"question_id":2416056,"body_markdown":"You just remove `id` out of beans inside `&lt;list&gt;` tag. Like this:\r\n\r\n    &lt;property name=&quot;listStaff&quot;&gt;\r\n      &lt;list&gt;\r\n        &lt;bean class=&quot;com.test.entity.Staff&quot;&gt;\r\n            &lt;constructor-arg name=&quot;name&quot; value = &quot;Jonh&quot;/&gt;\r\n            &lt;constructor-arg name=&quot;age&quot; value = &quot;30&quot;/&gt;\r\n        &lt;/bean&gt;\r\n        &lt;bean class=&quot;com.test.entity.Staff&quot;&gt;\r\n            &lt;constructor-arg name=&quot;name&quot; value = &quot;Jam&quot;/&gt;\r\n            &lt;constructor-arg name=&quot;age&quot; value = &quot;21&quot;/&gt;\r\n        &lt;/bean&gt;\r\n      &lt;/list&gt;\r\n    &lt;/property&gt;","title":"How to define a List bean in Spring?","body":"<p>You just remove <code>id</code> out of beans inside <code>&lt;list&gt;</code> tag. Like this:</p>\n\n<pre><code>&lt;property name=\"listStaff\"&gt;\n  &lt;list&gt;\n    &lt;bean class=\"com.test.entity.Staff\"&gt;\n        &lt;constructor-arg name=\"name\" value = \"Jonh\"/&gt;\n        &lt;constructor-arg name=\"age\" value = \"30\"/&gt;\n    &lt;/bean&gt;\n    &lt;bean class=\"com.test.entity.Staff\"&gt;\n        &lt;constructor-arg name=\"name\" value = \"Jam\"/&gt;\n        &lt;constructor-arg name=\"age\" value = \"21\"/&gt;\n    &lt;/bean&gt;\n  &lt;/list&gt;\n&lt;/property&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4008309,"reputation":3678,"user_id":3302424,"accept_rate":70,"display_name":"Hari Krishna"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1583490160,"creation_date":1583490160,"answer_id":60562050,"question_id":2416056,"body_markdown":"**Inject list of strings.**\r\n\r\nSuppose you have Countries model class that take list of strings like below.\r\n\r\n    public class Countries {\r\n    \tprivate List&lt;String&gt; countries;\r\n    \r\n     \tpublic List&lt;String&gt; getCountries() {\r\n      \t\treturn countries;\r\n     \t}\t\r\n    \r\n     \tpublic void setCountries(List&lt;String&gt; countries) {\r\n      \t\tthis.countries = countries;\r\n     \t}\r\n    \r\n    }\r\n\r\nFollowing xml definition define a bean and inject list of countries.\r\n\r\n    &lt;bean id=&quot;demoCountryCapitals&quot; name=&quot;demoCountryCapitals&quot; class=&quot;com.sample.pojo.Countries&quot;&gt;\r\n       &lt;property name=&quot;countries&quot;&gt;\r\n          &lt;list&gt;\r\n             &lt;value&gt;Iceland&lt;/value&gt;\r\n             &lt;value&gt;India&lt;/value&gt;\r\n             &lt;value&gt;Sri Lanka&lt;/value&gt;\r\n             &lt;value&gt;Russia&lt;/value&gt;\r\n          &lt;/list&gt;\r\n       &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\nReference [link][1]\r\n\r\n**Inject list of Pojos**\r\n\r\nSuppose if you have model class like below.\r\n\r\n    public class Country {\r\n    \tprivate String name;\r\n     \tprivate String capital;\r\n     \t.....\r\n     \t.....\r\n     }\r\n    \r\n    public class Countries {\r\n     \tprivate List&lt;Country&gt; favoriteCountries;\r\n    \r\n     \tpublic List&lt;Country&gt; getFavoriteCountries() {\r\n      \t\treturn favoriteCountries;\r\n     \t}\r\n    \r\n     \tpublic void setFavoriteCountries(List&lt;Country&gt; favoriteCountries) {\r\n      \t\tthis.favoriteCountries = favoriteCountries;\r\n     \t}\r\n    \r\n    }\r\n\r\nBean Definitions.\r\n\r\n     &lt;bean id=&quot;india&quot; class=&quot;com.sample.pojo.Country&quot;&gt;\r\n      &lt;property name=&quot;name&quot; value=&quot;India&quot; /&gt;\r\n      &lt;property name=&quot;capital&quot; value=&quot;New Delhi&quot; /&gt;\r\n     &lt;/bean&gt;\r\n    \r\n     &lt;bean id=&quot;russia&quot; class=&quot;com.sample.pojo.Country&quot;&gt;\r\n      &lt;property name=&quot;name&quot; value=&quot;Russia&quot; /&gt;\r\n      &lt;property name=&quot;capital&quot; value=&quot;Moscow&quot; /&gt;\r\n     &lt;/bean&gt;\r\n    \r\n    \r\n     &lt;bean id=&quot;demoCountryCapitals&quot; name=&quot;demoCountryCapitals&quot; class=&quot;com.sample.pojo.Countries&quot;&gt;\r\n      &lt;property name=&quot;favoriteCountries&quot;&gt;\r\n       &lt;list&gt;\r\n        &lt;ref bean=&quot;india&quot; /&gt;\r\n        &lt;ref bean=&quot;russia&quot; /&gt;\r\n       &lt;/list&gt;\r\n      &lt;/property&gt;\r\n     &lt;/bean&gt;\r\n\r\n \r\nReference [Link][2].\r\n\r\n\r\n  [1]: https://self-learning-java-tutorial.blogspot.com/2017/02/spring-inject-list.html\r\n  [2]: https://self-learning-java-tutorial.blogspot.com/2017/03/spring-inject-list-of-beans.html","title":"How to define a List bean in Spring?","body":"<p><strong>Inject list of strings.</strong></p>\n\n<p>Suppose you have Countries model class that take list of strings like below.</p>\n\n<pre><code>public class Countries {\n    private List&lt;String&gt; countries;\n\n    public List&lt;String&gt; getCountries() {\n        return countries;\n    }   \n\n    public void setCountries(List&lt;String&gt; countries) {\n        this.countries = countries;\n    }\n\n}\n</code></pre>\n\n<p>Following xml definition define a bean and inject list of countries.</p>\n\n<pre><code>&lt;bean id=\"demoCountryCapitals\" name=\"demoCountryCapitals\" class=\"com.sample.pojo.Countries\"&gt;\n   &lt;property name=\"countries\"&gt;\n      &lt;list&gt;\n         &lt;value&gt;Iceland&lt;/value&gt;\n         &lt;value&gt;India&lt;/value&gt;\n         &lt;value&gt;Sri Lanka&lt;/value&gt;\n         &lt;value&gt;Russia&lt;/value&gt;\n      &lt;/list&gt;\n   &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Reference <a href=\"https://self-learning-java-tutorial.blogspot.com/2017/02/spring-inject-list.html\" rel=\"nofollow noreferrer\">link</a></p>\n\n<p><strong>Inject list of Pojos</strong></p>\n\n<p>Suppose if you have model class like below.</p>\n\n<pre><code>public class Country {\n    private String name;\n    private String capital;\n    .....\n    .....\n }\n\npublic class Countries {\n    private List&lt;Country&gt; favoriteCountries;\n\n    public List&lt;Country&gt; getFavoriteCountries() {\n        return favoriteCountries;\n    }\n\n    public void setFavoriteCountries(List&lt;Country&gt; favoriteCountries) {\n        this.favoriteCountries = favoriteCountries;\n    }\n\n}\n</code></pre>\n\n<p>Bean Definitions.</p>\n\n<pre><code> &lt;bean id=\"india\" class=\"com.sample.pojo.Country\"&gt;\n  &lt;property name=\"name\" value=\"India\" /&gt;\n  &lt;property name=\"capital\" value=\"New Delhi\" /&gt;\n &lt;/bean&gt;\n\n &lt;bean id=\"russia\" class=\"com.sample.pojo.Country\"&gt;\n  &lt;property name=\"name\" value=\"Russia\" /&gt;\n  &lt;property name=\"capital\" value=\"Moscow\" /&gt;\n &lt;/bean&gt;\n\n\n &lt;bean id=\"demoCountryCapitals\" name=\"demoCountryCapitals\" class=\"com.sample.pojo.Countries\"&gt;\n  &lt;property name=\"favoriteCountries\"&gt;\n   &lt;list&gt;\n    &lt;ref bean=\"india\" /&gt;\n    &lt;ref bean=\"russia\" /&gt;\n   &lt;/list&gt;\n  &lt;/property&gt;\n &lt;/bean&gt;\n</code></pre>\n\n<p>Reference <a href=\"https://self-learning-java-tutorial.blogspot.com/2017/03/spring-inject-list-of-beans.html\" rel=\"nofollow noreferrer\">Link</a>.</p>\n"},{"tags":[],"owner":{"account_id":16709585,"reputation":79,"user_id":12077123,"display_name":"Akshansh Saxena"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624862451,"creation_date":1624862451,"answer_id":68158645,"question_id":2416056,"body_markdown":"Use list-class attribute in util:list to make a standalone list of any particular type. for example if you want to make list of type ArrayList:\r\n\r\n    &lt;util:list id=&quot;namesList&quot; list-class=&quot;java.util.ArrayList&quot; value-type=&quot;java.lang.String&quot;&gt;\r\n      &lt;value&gt;Abhay&lt;/value&gt;\r\n      &lt;value&gt;ankit&lt;/value&gt;\r\n      &lt;value&gt;Akshansh&lt;/value&gt;\r\n      &lt;value&gt;Db&lt;/value&gt;\r\n    &lt;/util:list&gt;\r\n\r\nor if you want to make a list of type LinkedList then :\r\n\r\n    &lt;util:list id=&quot;namesList&quot; list-class=&quot;java.util.LinkedList&quot; value-type=&quot;java.lang.String&quot;&gt;\r\n      &lt;value&gt;Abhay&lt;/value&gt;\r\n      &lt;value&gt;ankit&lt;/value&gt;\r\n      &lt;value&gt;Akshansh&lt;/value&gt;\r\n      &lt;value&gt;Db&lt;/value&gt;\r\n    &lt;/util:list&gt;","title":"How to define a List bean in Spring?","body":"<p>Use list-class attribute in util:list to make a standalone list of any particular type. for example if you want to make list of type ArrayList:</p>\n<pre><code>&lt;util:list id=&quot;namesList&quot; list-class=&quot;java.util.ArrayList&quot; value-type=&quot;java.lang.String&quot;&gt;\n  &lt;value&gt;Abhay&lt;/value&gt;\n  &lt;value&gt;ankit&lt;/value&gt;\n  &lt;value&gt;Akshansh&lt;/value&gt;\n  &lt;value&gt;Db&lt;/value&gt;\n&lt;/util:list&gt;\n</code></pre>\n<p>or if you want to make a list of type LinkedList then :</p>\n<pre><code>&lt;util:list id=&quot;namesList&quot; list-class=&quot;java.util.LinkedList&quot; value-type=&quot;java.lang.String&quot;&gt;\n  &lt;value&gt;Abhay&lt;/value&gt;\n  &lt;value&gt;ankit&lt;/value&gt;\n  &lt;value&gt;Akshansh&lt;/value&gt;\n  &lt;value&gt;Db&lt;/value&gt;\n&lt;/util:list&gt;\n</code></pre>\n"}],"owner":{"account_id":15259,"reputation":23545,"user_id":32043,"accept_rate":98,"display_name":"guerda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":405894,"favorite_count":0,"down_vote_count":1,"up_vote_count":215,"accepted_answer_id":2416145,"answer_count":13,"score":214,"last_activity_date":1683285058,"creation_date":1268216510,"question_id":2416056,"body_markdown":"I&#39;m using Spring to define stages in my application. It&#39;s configured that the necessary class (here called `Configurator`) is injected with the stages.  \r\nNow I need the List of Stages in another class, named `LoginBean`. The `Configurator` doesn&#39;t offer access to his List of Stages.\r\n\r\nI cannot change the class `Configurator`.\r\n\r\nMy Idea:  \r\nDefine a new bean called Stages and inject it to `Configurator` and `LoginBean`.\r\nMy problem with this idea is that I don&#39;t know how to transform this property:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;property ...&gt;\r\n      &lt;list&gt;\r\n        &lt;bean ... &gt;...&lt;/bean&gt;\r\n        &lt;bean ... &gt;...&lt;/bean&gt;\r\n        &lt;bean ... &gt;...&lt;/bean&gt;\r\n      &lt;/list&gt;\r\n    &lt;/property&gt;\r\n\r\ninto a bean.\r\n\r\nSomething like this does not work:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;bean id=&quot;stages&quot; class=&quot;java.util.ArrayList&quot;&gt;\r\n\r\nCan anybody help me with this?","title":"How to define a List bean in Spring?","body":"<p>I'm using Spring to define stages in my application. It's configured that the necessary class (here called <code>Configurator</code>) is injected with the stages.<br>\nNow I need the List of Stages in another class, named <code>LoginBean</code>. The <code>Configurator</code> doesn't offer access to his List of Stages.</p>\n\n<p>I cannot change the class <code>Configurator</code>.</p>\n\n<p>My Idea:<br>\nDefine a new bean called Stages and inject it to <code>Configurator</code> and <code>LoginBean</code>.\nMy problem with this idea is that I don't know how to transform this property:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;property ...&gt;\n  &lt;list&gt;\n    &lt;bean ... &gt;...&lt;/bean&gt;\n    &lt;bean ... &gt;...&lt;/bean&gt;\n    &lt;bean ... &gt;...&lt;/bean&gt;\n  &lt;/list&gt;\n&lt;/property&gt;\n</code></pre>\n\n<p>into a bean.</p>\n\n<p>Something like this does not work:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=\"stages\" class=\"java.util.ArrayList\"&gt;\n</code></pre>\n\n<p>Can anybody help me with this?</p>\n"},{"tags":["java","android","http","widget","android-networking"],"comments":[{"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"score":0,"creation_date":1683284887,"post_id":76181165,"comment_id":134346827,"body_markdown":"@Selvin: Too old, there is no updated information.","body":"@Selvin: Too old, there is no updated information."}],"answers":[{"tags":[],"owner":{"account_id":7495697,"reputation":1501,"user_id":5696047,"display_name":"jayesh gurudayalani"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1683282738,"creation_date":1683282738,"answer_id":76181253,"question_id":76181165,"body_markdown":"As per the error , it looks like you are calling api on main thread which is not allowed so we need to move you api calling to IO thread . Can you try below mentioned solution\r\n\r\nFrom\r\n```\r\ntry {\r\n            // fetching the target website\r\n            doc = Jsoup.connect(&quot;https://pageWeb...&quot;).get();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n```\r\n\r\nTo\r\n```\r\nval job = CoroutineScope(Dispatchers.IO).launch {\r\n            try {\r\n                // fetching the target website\r\n                doc = Jsoup.connect(&quot;https://pageWeb...&quot;).get();\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n        job.cancel()\r\n```\r\n\r\njob object you need to declare it as member and ```job.cancel()``` need to place in ```onDisabled``` method","title":"Android java widget call http error android.os.NetworkOnMainThreadException","body":"<p>As per the error , it looks like you are calling api on main thread which is not allowed so we need to move you api calling to IO thread . Can you try below mentioned solution</p>\n<p>From</p>\n<pre><code>try {\n            // fetching the target website\n            doc = Jsoup.connect(&quot;https://pageWeb...&quot;).get();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n</code></pre>\n<p>To</p>\n<pre><code>val job = CoroutineScope(Dispatchers.IO).launch {\n            try {\n                // fetching the target website\n                doc = Jsoup.connect(&quot;https://pageWeb...&quot;).get();\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n        }\n        job.cancel()\n</code></pre>\n<p>job object you need to declare it as member and <code>job.cancel()</code> need to place in <code>onDisabled</code> method</p>\n"},{"tags":[],"owner":{"account_id":19686766,"reputation":1,"user_id":14412554,"display_name":"ahvroyal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683283119,"creation_date":1683283119,"answer_id":76181297,"question_id":76181165,"body_markdown":"You shouldn&#39;t do networking on main thread in android application, instead consider using AsyncTask for doing network operations in which it offloads the work out of the main thread.\r\n\r\nAsyncTask reference :\r\nhttps://developer.android.com/reference/android/os/AsyncTask","title":"Android java widget call http error android.os.NetworkOnMainThreadException","body":"<p>You shouldn't do networking on main thread in android application, instead consider using AsyncTask for doing network operations in which it offloads the work out of the main thread.</p>\n<p>AsyncTask reference :\n<a href=\"https://developer.android.com/reference/android/os/AsyncTask\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/os/AsyncTask</a></p>\n"}],"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1683571182,"answer_count":2,"score":-1,"last_activity_date":1683284902,"creation_date":1683282021,"question_id":76181165,"body_markdown":"I am having the following error:\r\n\r\n```\r\nFATAL EXCEPTION: main\r\nProcess: com.name.app, PID: 21535\r\njava.lang.RuntimeException: Unable to start receiver com.name.app.MyWidget: \r\nandroid.os.NetworkOnMainThreadException\r\nat android.app.ActivityThread.handleReceiver(ActivityThread.java:4012)\r\nat android.app.ActivityThread.access$1500(ActivityThread.java:232)\r\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2025)\r\n....\r\n```\r\n\r\nI need to make a widget every certain time make an `http` call to a website for scraping.\r\n\r\nI have the following code:\r\n\r\n```java\r\npackage com.name.app;\r\n\r\nimport android.appwidget.AppWidgetManager;\r\nimport android.appwidget.AppWidgetProvider;\r\nimport android.content.Context;\r\nimport android.content.SharedPreferences;\r\nimport android.util.Log;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.RemoteViews;\r\n\r\nimport org.jsoup.Jsoup;\r\nimport org.jsoup.nodes.Document;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class MyWidget extends AppWidgetProvider {\r\n\r\n    void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId) {\r\n        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_design);\r\n\r\n        //get the widget value\r\n        SharedPreferences preferences = context.getSharedPreferences(&quot;PREFS&quot;, 0);\r\n        int value = preferences.getInt(&quot;value&quot;, 1);\r\n\r\n        //set the value in the textview\r\n        views.setTextViewText(R.id.text, &quot;&quot; + value);\r\n\r\n        //update the widget\r\n        appWidgetManager.updateAppWidget(appWidgetId, views);\r\n\r\n        //reschedule the widget refresh\r\n        AlarmHandler alarmHandler = new AlarmHandler(context);\r\n        alarmHandler.cancelAlarmManager();\r\n        alarmHandler.setAlarmManager();\r\n\r\n        Document doc;\r\n\r\n        try {\r\n            // fetching the target website\r\n            doc = Jsoup.connect(&quot;https://pageWeb...&quot;).get();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        Log.d(&quot;WIDGET&quot;, &quot;Widget updated!&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\r\n        for (int appWidgetId: appWidgetIds) {\r\n            updateAppWidget(context, appWidgetManager, appWidgetId);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onDisabled(Context context) {\r\n        //stop updating the widget\r\n        AlarmHandler alarmHandler = new AlarmHandler(context);\r\n        alarmHandler.cancelAlarmManager();\r\n\r\n        Log.d(&quot;WIDGET&quot;, &quot;Widget removed!&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.AmazonWidget&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\n        &lt;receiver\r\n            android:name=&quot;.MyWidget&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.appwidget.action.APPWIDGET_UPDATE&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n\r\n            &lt;meta-data\r\n                android:name=&quot;android.appwidget.provider&quot;\r\n                android:resource=&quot;@xml/widget_info&quot; /&gt;\r\n        &lt;/receiver&gt;\r\n\r\n        &lt;receiver\r\n            android:name=&quot;.WidgetService&quot;\r\n            android:enabled=&quot;true&quot; /&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\nGoing into the app&#39;s information about permissions, it tells me there are no permissions required.\r\n\r\nCan you tell me where I&#39;m going wrong?","title":"Android java widget call http error android.os.NetworkOnMainThreadException","body":"<p>I am having the following error:</p>\n<pre><code>FATAL EXCEPTION: main\nProcess: com.name.app, PID: 21535\njava.lang.RuntimeException: Unable to start receiver com.name.app.MyWidget: \nandroid.os.NetworkOnMainThreadException\nat android.app.ActivityThread.handleReceiver(ActivityThread.java:4012)\nat android.app.ActivityThread.access$1500(ActivityThread.java:232)\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2025)\n....\n</code></pre>\n<p>I need to make a widget every certain time make an <code>http</code> call to a website for scraping.</p>\n<p>I have the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.name.app;\n\nimport android.appwidget.AppWidgetManager;\nimport android.appwidget.AppWidgetProvider;\nimport android.content.Context;\nimport android.content.SharedPreferences;\nimport android.util.Log;\nimport android.widget.RelativeLayout;\nimport android.widget.RemoteViews;\n\nimport org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\n\nimport java.io.IOException;\n\npublic class MyWidget extends AppWidgetProvider {\n\n    void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId) {\n        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_design);\n\n        //get the widget value\n        SharedPreferences preferences = context.getSharedPreferences(&quot;PREFS&quot;, 0);\n        int value = preferences.getInt(&quot;value&quot;, 1);\n\n        //set the value in the textview\n        views.setTextViewText(R.id.text, &quot;&quot; + value);\n\n        //update the widget\n        appWidgetManager.updateAppWidget(appWidgetId, views);\n\n        //reschedule the widget refresh\n        AlarmHandler alarmHandler = new AlarmHandler(context);\n        alarmHandler.cancelAlarmManager();\n        alarmHandler.setAlarmManager();\n\n        Document doc;\n\n        try {\n            // fetching the target website\n            doc = Jsoup.connect(&quot;https://pageWeb...&quot;).get();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n\n        Log.d(&quot;WIDGET&quot;, &quot;Widget updated!&quot;);\n    }\n\n    @Override\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\n        for (int appWidgetId: appWidgetIds) {\n            updateAppWidget(context, appWidgetManager, appWidgetId);\n        }\n    }\n\n    @Override\n    public void onDisabled(Context context) {\n        //stop updating the widget\n        AlarmHandler alarmHandler = new AlarmHandler(context);\n        alarmHandler.cancelAlarmManager();\n\n        Log.d(&quot;WIDGET&quot;, &quot;Widget removed!&quot;);\n    }\n}\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.AmazonWidget&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n        &lt;receiver\n            android:name=&quot;.MyWidget&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.appwidget.action.APPWIDGET_UPDATE&quot; /&gt;\n            &lt;/intent-filter&gt;\n\n            &lt;meta-data\n                android:name=&quot;android.appwidget.provider&quot;\n                android:resource=&quot;@xml/widget_info&quot; /&gt;\n        &lt;/receiver&gt;\n\n        &lt;receiver\n            android:name=&quot;.WidgetService&quot;\n            android:enabled=&quot;true&quot; /&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>Going into the app's information about permissions, it tells me there are no permissions required.</p>\n<p>Can you tell me where I'm going wrong?</p>\n"},{"tags":["java","selenium-webdriver","gitlab","cicd"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1683270993,"post_id":76179652,"comment_id":134344106,"body_markdown":"Please [edit] the post and add a [MRE]. Without seeing some code, we are not able to help.","body":"Please <a href=\"https://stackoverflow.com/posts/76179652/edit\">edit</a> the post and add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Without seeing some code, we are not able to help."}],"owner":{"account_id":28514103,"reputation":1,"user_id":21823681,"display_name":"Ankur Jain"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683284768,"creation_date":1683270857,"question_id":76179652,"body_markdown":"Getting the below error that session not created while running the CI/CD for selenium with java for automation testing.\r\n\r\norg.openqa.selenium.SessionNotCreatedException:\r\n\r\nThe code should be execute into the browser and give the test result.","title":"Getting the error in GitLab while running the CI/CD","body":"<p>Getting the below error that session not created while running the CI/CD for selenium with java for automation testing.</p>\n<p>org.openqa.selenium.SessionNotCreatedException:</p>\n<p>The code should be execute into the browser and give the test result.</p>\n"},{"tags":["java","spring","spring-boot","junit-jupiter","data-jpa-test"],"comments":[{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1669821805,"post_id":74069144,"comment_id":131731163,"body_markdown":"I can&#39;t get your error message with `@DataJpaTest`, but with `@SpringbootTest`.","body":"I can&#39;t get your error message with <code>@DataJpaTest</code>, but with <code>@SpringbootTest</code>."},{"owner":{"account_id":26621704,"reputation":11,"user_id":20240398,"display_name":"Hypermiler"},"score":0,"creation_date":1669915118,"post_id":74069144,"comment_id":131756661,"body_markdown":"@samabcde Tried it again with SpringBoot 2.7.6 and 3.0.0, both are not working with `@DataJpaTest` and I can&#39;t use `@SpringbootTest` because I need the TestEntityManager.","body":"@samabcde Tried it again with SpringBoot 2.7.6 and 3.0.0, both are not working with <code>@DataJpaTest</code> and I can&#39;t use <code>@SpringbootTest</code> because I need the TestEntityManager."},{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1670142673,"post_id":74069144,"comment_id":131801322,"body_markdown":"What I mean is your error does not match the code you provided. Do you see other error when using `@DataJpaTest`?","body":"What I mean is your error does not match the code you provided. Do you see other error when using <code>@DataJpaTest</code>?"},{"owner":{"account_id":26621704,"reputation":11,"user_id":20240398,"display_name":"Hypermiler"},"score":0,"creation_date":1670233522,"post_id":74069144,"comment_id":131820336,"body_markdown":"@samabcde Yes, the error is definitely happening only with `@DataJpaTest` in my case.","body":"@samabcde Yes, the error is definitely happening only with <code>@DataJpaTest</code> in my case."},{"owner":{"account_id":26621704,"reputation":11,"user_id":20240398,"display_name":"Hypermiler"},"score":0,"creation_date":1670332612,"post_id":74069144,"comment_id":131847970,"body_markdown":"@samabcde And yes, all errors that get thrown with `@DataJpaTest` are contained in the stacktrace.","body":"@samabcde And yes, all errors that get thrown with <code>@DataJpaTest</code> are contained in the stacktrace."}],"answers":[{"tags":[],"owner":{"account_id":26564177,"reputation":36,"user_id":20191548,"display_name":"AbhishekVinayak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665750502,"creation_date":1665750502,"answer_id":74069229,"question_id":74069144,"body_markdown":"Try changing the corresponding test versions in pom.xml if it helps","title":"Upgrade from SpringBoot 2.6 -&gt; 2.7 - No qualifying bean of type &#39;org.springframework.boot....TestEntityManager&#39; available","body":"<p>Try changing the corresponding test versions in pom.xml if it helps</p>\n"},{"tags":[],"owner":{"account_id":26621704,"reputation":11,"user_id":20240398,"display_name":"Hypermiler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683284023,"creation_date":1683283723,"answer_id":76181393,"question_id":74069144,"body_markdown":"I fixed the issue myself after a lot of trial and error and research.\r\n\r\nThe solution I found was to switch from `@DataJpaTest` to `@SpringBootTest` and to remove the `@Autowired TestEntityManager`.\r\nTo persist test data I now use the `repository.save()` method of the `@Autowired` repositories.\r\n\r\nI created dummy repositories as sub-classes of the test class if I needed to save a test entity for which I do not have a real repository with queries in it.\r\n\r\nThe usage of `repository.save()` has the side effect that the persisted (saved) entities now can&#39;t be asserted for equality anymore because they wont be the same object (memory address) when the repository returns them after a query-method is called in the test. \r\n\r\nMy solution for that was to use AssertJ&#39;s `assertThat(X).usingRecursiveComparison().isEqualTo(X)` instead of JUnits `assertEquals(X, X)` for these cases.\r\n\r\nI hope this helps anyone. :)","title":"Upgrade from SpringBoot 2.6 -&gt; 2.7 - No qualifying bean of type &#39;org.springframework.boot....TestEntityManager&#39; available","body":"<p>I fixed the issue myself after a lot of trial and error and research.</p>\n<p>The solution I found was to switch from <code>@DataJpaTest</code> to <code>@SpringBootTest</code> and to remove the <code>@Autowired TestEntityManager</code>.\nTo persist test data I now use the <code>repository.save()</code> method of the <code>@Autowired</code> repositories.</p>\n<p>I created dummy repositories as sub-classes of the test class if I needed to save a test entity for which I do not have a real repository with queries in it.</p>\n<p>The usage of <code>repository.save()</code> has the side effect that the persisted (saved) entities now can't be asserted for equality anymore because they wont be the same object (memory address) when the repository returns them after a query-method is called in the test.</p>\n<p>My solution for that was to use AssertJ's <code>assertThat(X).usingRecursiveComparison().isEqualTo(X)</code> instead of JUnits <code>assertEquals(X, X)</code> for these cases.</p>\n<p>I hope this helps anyone. :)</p>\n"}],"owner":{"account_id":26621704,"reputation":11,"user_id":20240398,"display_name":"Hypermiler"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1702,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76181393,"answer_count":2,"score":1,"last_activity_date":1683284343,"creation_date":1665750090,"question_id":74069144,"body_markdown":"I updated from SpringBoot 2.6.12 to 2.7.11 and as a consequence our RepositoryTests were not working anymore. \r\nThe @autowired TestEntityManager can&#39;t be filled by a qualifying bean after the upgrade.\r\nI tried a lot of solutions from other threads and websites but most of them were quite old and it seems like the solution for 2.7 has to be a different one.\r\n\r\nFurthermore we were using H2 as embedded database before and the error was mostly the same, so the root-problem seems not be related to the new embedded test DB we use now (Zonky).\r\n\r\nI would be very grateful for help.\r\n\r\n**RepositoryTest:**\r\n```\r\npackage eu.X.api.pod.repository;\r\n\r\nimport eu.X.api.pod.model.PodUrlEntity;\r\nimport eu.X.api.pod.repository.PodRepository;\r\nimport io.zonky.test.db.AutoConfigureEmbeddedDatabase;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;\r\nimport org.springframework.test.context.TestPropertySource;\r\n\r\nimport java.util.Optional;\r\n\r\nimport static io.zonky.test.db.AutoConfigureEmbeddedDatabase.DatabaseProvider.ZONKY;\r\n\r\n@DataJpaTest\r\n@AutoConfigureEmbeddedDatabase(provider = ZONKY)\r\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\r\nclass PodRepositoryTest {\r\n\r\n    @Autowired\r\n    private TestEntityManager entityManager;\r\n    @Autowired\r\n    private PodRepository podRepository;\r\n\r\n    @Test\r\n    void whenFindUrlByTrackIdAndUniqueContactId_thenReturnUrl() {\r\n        // given\r\n        PodUrlEntity podUrlEntity = PodUrlEntity.builder()\r\n                                                .trackId(&quot;12345678&quot;)\r\n                                                .contactId(&quot;276a15LnuT&quot;)\r\n                                                .url(&quot;de-200/2022/01/10/0170/img_de-200_20220110092858_10815_STP-DE-200-DPKC-5001.png&quot;)\r\n                                                .build();\r\n        entityManager.persist(podUrlEntity);\r\n        entityManager.flush();\r\n\r\n        // when\r\n        Optional&lt;String&gt; found = podRepository.findUrlByTrackIdAndUniqueContactId(podUrlEntity.getTrackId(),\r\n                                                                                  podUrlEntity.getContactId());\r\n        // then\r\n        assertEquals(podUrlEntity.getUrl(), found.get());\r\n    }\r\n\r\n}\r\n```\r\n\r\n**Stacktrace:**\r\n```\r\n\r\n&gt; Task :compileJava UP-TO-DATE\r\n&gt; Task :processResources UP-TO-DATE\r\n&gt; Task :classes UP-TO-DATE\r\n&gt; Task :compileTestJava UP-TO-DATE\r\n&gt; Task :processTestResources UP-TO-DATE\r\n&gt; Task :testClasses UP-TO-DATE\r\n&gt; Task :test FAILED\r\nSLF4J: Class path contains multiple SLF4J bindings.\r\nSLF4J: Found binding in [jar:file:/C:/Users/X/.gradle/caches/modules-2/files-2.1/eu.X.X.lib.spring/lib-spring-web/1.2.0/8a53726f79df95d1695115732c517efba0aca950/lib-spring-web-1.2.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: Found binding in [jar:file:/C:/Users/X/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.2.11/4741689214e9d1e8408b206506cbe76d1c6a7d60/logback-classic-1.2.11.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\r\nSLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]\r\n13:39:24.980 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating CacheAwareContextLoaderDelegate from class [org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate]\r\n13:39:24.987 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating BootstrapContext using constructor [public org.springframework.test.context.support.DefaultBootstrapContext(java.lang.Class,org.springframework.test.context.CacheAwareContextLoaderDelegate)]\r\n13:39:25.016 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating TestContextBootstrapper for test class [eu.X.X.api.pod.repository.PodRepositoryTest] from class [org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper]\r\n13:39:25.024 [Test worker] INFO org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.X.X.api.pod.repository.PodRepositoryTest], using SpringBootContextLoader\r\n13:39:25.027 [Test worker] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: class path resource [eu/X/X/api/pod/repository/PodRepositoryTest-context.xml] does not exist\r\n13:39:25.027 [Test worker] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: class path resource [eu/X/X/api/pod/repository/PodRepositoryTestContext.groovy] does not exist\r\n13:39:25.027 [Test worker] INFO org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: no resource found for suffixes {-context.xml, Context.groovy}.\r\n13:39:25.029 [Test worker] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: PodRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\r\n13:39:25.077 [Test worker] DEBUG org.springframework.test.context.support.ActiveProfilesUtils - Could not find an &#39;annotation declaring class&#39; for annotation type [org.springframework.test.context.ActiveProfiles] and class [eu.X.X.api.pod.repository.PodRepositoryTest]\r\n13:39:25.119 [Test worker] DEBUG org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider - Identified candidate component class: file [C:\\Users\\X\\Desktop\\X-microservices-kafka\\X-pod-service\\build\\classes\\java\\main\\eu\\X\\X\\api\\pod\\PodServiceApplication.class]\r\n13:39:25.120 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration eu.X.X.api.pod.PodServiceApplication for test class eu.X.X.api.pod.repository.PodRepositoryTest\r\n13:39:25.122 [Test worker] DEBUG org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - @TestExecutionListeners is not present for class [eu.X.X.api.pod.repository.PodRepositoryTest]: using defaults.\r\n13:39:25.122 [Test worker] INFO org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, io.zonky.test.db.EmbeddedDatabaseTestExecutionListener, io.zonky.test.db.event.EventPublishingTestExecutionListener, io.zonky.test.db.flyway.OptimizedFlywayTestExecutionListener]\r\n13:39:25.138 [Test worker] INFO org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@4c168660, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@52b56a3e, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@fd0e5b6, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@4eed46ee, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@36b0fcd5, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4fad94a7, io.zonky.test.db.EmbeddedDatabaseTestExecutionListener@475835b1, io.zonky.test.db.flyway.OptimizedFlywayTestExecutionListener@6326d182, org.springframework.test.context.transaction.TransactionalTestExecutionListener@5241cf67, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@716a7124, org.springframework.test.context.event.EventPublishingTestExecutionListener@77192705, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@226642a5, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7e809b79, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5cc126dc, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@625e134e, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@72bd06ca, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@89c10b7, io.zonky.test.db.event.EventPublishingTestExecutionListener@5dbe30be]\r\n13:39:25.141 [Test worker] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener - Before test class: context [DefaultTestContext@3d8bbcdc testClass = PodRepositoryTest, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@52500920 testClass = PodRepositoryTest, locations = &#39;{}&#39;, classes = &#39;{class eu.X.X.api.pod.PodServiceApplication}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{}&#39;, propertySourceLocations = &#39;{classpath:application-test.properties}&#39;, propertySourceProperties = &#39;{org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true}&#39;, contextCustomizers = set[org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3a1dd365, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@315f43d5, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@351584c0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@a0d8ffa4, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4c4748bf, [ImportsContextCustomizer@117e0fe5 key = []], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@20f12539, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@13cf7d52, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, io.zonky.test.db.EmbeddedDatabaseContextCustomizerFactory$EmbeddedDatabaseContextCustomizer@8a4aa01f, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@0], contextLoader = &#39;org.springframework.boot.test.context.SpringBootContextLoader&#39;, parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null].\r\n\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                        \r\n\r\n2022-10-14 13:39:25.459  INFO 22352 --- [    Test worker] e.g.s.a.p.repository.PodRepositoryTest   : Starting PodRepositoryTest using Java 17.0.4.1 on DE03-0101WL6NL6 with PID 22352 (started by X in C:\\Users\\X\\Desktop\\X-microservices-kafka\\X-pod-service)\r\n2022-10-14 13:39:25.460  INFO 22352 --- [    Test worker] e.g.s.a.p.repository.PodRepositoryTest   : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2022-10-14 13:39:25.684  INFO 22352 --- [    Test worker] EmbeddedDatabaseContextCustomizerFactory : Replacing &#39;dataSource&#39; DataSource bean with embedded version\r\n2022-10-14 13:39:25.757  INFO 22352 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean &#39;io.zonky.test.db.config.EmbeddedDatabaseAutoConfiguration&#39; of type [io.zonky.test.db.config.EmbeddedDatabaseAutoConfiguration$$EnhancerBySpringCGLIB$$6fc806ea] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n2022-10-14 13:39:25.867  INFO 22352 --- [    Test worker] e.g.s.a.p.repository.PodRepositoryTest   : Started PodRepositoryTest in 0.704 seconds (JVM running for 1.58)\r\n\r\n\r\n\r\n============================\r\nCONDITIONS EVALUATION REPORT\r\n============================\r\n\r\n\r\nPositive matches:\r\n-----------------\r\n\r\n   EmbeddedDatabaseContextCustomizerFactory.PrimaryDataSourceAutoConfiguration matched:\r\n      - NoneNestedConditions 0 matched 1 did not; NestedCondition on EmbeddedDatabaseCondition.EmbeddedDatabaseDisabled @ConditionalOnProperty (zonky.test.database.replace=none) did not find property &#39;replace&#39; (EmbeddedDatabaseCondition)\r\n\r\n   EmbeddedDatabaseContextCustomizerFactory.PrimaryDataSourceAutoConfiguration#embeddedDataSource1 matched:\r\n      - @ConditionalOnMissingBean (types: javax.sql.DataSource; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n\r\n\r\nNegative matches:\r\n-----------------\r\n\r\n    None\r\n\r\n\r\nExclusions:\r\n-----------\r\n\r\n    None\r\n\r\n\r\nUnconditional classes:\r\n----------------------\r\n\r\n    None\r\n\r\n\r\n\r\n2022-10-14 13:39:25.891 ERROR 22352 --- [    Test worker] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@36b0fcd5] to prepare test instance [eu.X.X.api.pod.repository.PodRepositoryTest@fe7b6b0]\r\n\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;eu.X.X.api.pod.repository.PodRepositoryTest&#39;: Unsatisfied dependency expressed through field &#39;entityManager&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659) ~[lib-spring-web-1.2.0.jar:na]\r\n\r\n--- Rest is ommited\r\n\r\n\r\nPodRepositoryTest &gt; whenFindUrlByUnitNoAndUniqueContactId_thenReturnUrl() FAILED\r\n    org.springframework.beans.factory.UnsatisfiedDependencyException at AutowiredAnnotationBeanPostProcessor.java:659\r\n        Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1799\r\nPodRepositoryTest &gt; whenFindUrlByTrackIdAndUniqueContactId_thenReturnUrl() FAILED\r\n    org.springframework.beans.factory.UnsatisfiedDependencyException at AutowiredAnnotationBeanPostProcessor.java:659\r\n        Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1799\r\nPodRepositoryTest &gt; whenFindTrackIdByUnitNoAndUniqueContactId_thenReturnTrackId() FAILED\r\n    org.springframework.beans.factory.UnsatisfiedDependencyException at AutowiredAnnotationBeanPostProcessor.java:659\r\n        Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1799\r\n3 tests completed, 3 failed\r\nFAILURE: Build failed with an exception.\r\n* What went wrong:\r\nExecution failed for task &#39;:test&#39;.\r\n&gt; There were failing tests. See the report at: file:///C:/Users/X/Desktop/X-microservices-kafka/X-pod-service/build/reports/tests/test/index.html\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n* Get more help at https://help.gradle.org\r\nBUILD FAILED in 2s\r\n5 actionable tasks: 1 executed, 4 up-to-date\r\n```\r\n\r\n**build.gradle:**\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;2.7.4&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.0.14.RELEASE&#39;\r\n}\r\n\r\ngroup = &#39;eu.X.X.api&#39;\r\nversion = System.getProperty(&quot;VERSION&quot;)\r\nsourceCompatibility = JavaVersion.VERSION_17\r\n\r\nconfigurations {\r\n    compileOnly {\r\n        extendsFrom annotationProcessor\r\n    }\r\n}\r\n\r\nrepositories {\r\n    maven {\r\n        url &#39;http://X-nexus01.dc.X:8081/repository/maven-releases&#39;\r\n        allowInsecureProtocol = true\r\n    }\r\n    maven {\r\n        url &#39;http://X-nexus01.dc.X:8081/repository/maven-public&#39;\r\n        allowInsecureProtocol = true\r\n    }\r\n    maven {\r\n        url &#39;http://X-nexus01.dc.X:8081/repository/confluent.io-proxy&#39;\r\n        allowInsecureProtocol = true\r\n    }\r\n}\r\n\r\next {\r\n    jUnitVersion = &#39;5.9.1&#39;\r\n    lombokVersion = &#39;1.18.24&#39;\r\n    awsSdkVersion = &#39;2.17.276&#39;\r\n}\r\ndependencies {\r\n    // X\r\n    implementation group: &#39;eu.X.X.lib.spring&#39;, name: &#39;lib-spring-web&#39;, version: &#39;1.2.0&#39;\r\n    // Spring Boot\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-web&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-data-jpa&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-actuator&#39;\r\n    testImplementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-test&#39;\r\n    annotationProcessor group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-configuration-processor&#39;\r\n    // Apache\r\n    implementation group: &#39;org.apache.commons&#39;, name: &#39;commons-pool2&#39;, version: &#39;2.11.1&#39;\r\n    implementation group: &#39;org.apache.httpcomponents&#39;, name: &#39;httpclient&#39;, version: &#39;4.5.13&#39;\r\n    implementation group: &#39;org.apache.pdfbox&#39;, name: &#39;pdfbox&#39;, version: &#39;2.0.26&#39;\r\n    // Amazon\r\n    implementation group: &#39;software.amazon.awssdk&#39;, name: &#39;s3&#39;, version: &quot;${awsSdkVersion}&quot;\r\n    implementation group: &#39;software.amazon.awssdk&#39;, name: &#39;apache-client&#39;, version: &quot;${awsSdkVersion}&quot;\r\n    implementation group: &#39;com.amazonaws&#39;, name: &#39;aws-java-sdk-s3&#39;, version: &#39;1.12.305&#39;\r\n    // JUnit\r\n    testImplementation group: &#39;org.junit.jupiter&#39;, name: &#39;junit-jupiter-api&#39;, version: &quot;${jUnitVersion}&quot;\r\n    testImplementation group: &#39;org.junit.jupiter&#39;, name: &#39;junit-jupiter-params&#39;, version: &quot;${jUnitVersion}&quot;\r\n    testImplementation group: &#39;org.junit.jupiter&#39;, name: &#39;junit-jupiter-engine&#39;, version: &quot;${jUnitVersion}&quot;\r\n    // Lombok\r\n    compileOnly group: &#39;org.projectlombok&#39;, name: &#39;lombok&#39;, version: &quot;${lombokVersion}&quot;\r\n    annotationProcessor group:&#39;org.projectlombok&#39;, name:&#39;lombok&#39;, version: &quot;${lombokVersion}&quot;\r\n    // Zonky\r\n    implementation enforcedPlatform( group: &#39;io.zonky.test.postgres&#39;, name: &#39;embedded-postgres-binaries-bom&#39;, version:&#39;14.5.0&#39;)\r\n    testImplementation group: &#39;io.zonky.test&#39;, name: &#39;embedded-database-spring-test&#39;, version:&#39;2.1.2&#39;\r\n    testRuntimeOnly group: &#39;io.zonky.test&#39;, name: &#39;embedded-postgres&#39;, version:&#39;2.0.1&#39;\r\n\r\n    // Miscellaneous\r\n    implementation group: &#39;org.zalando&#39;, name: &#39;logbook-spring-boot-starter&#39;, version: &#39;2.14.0&#39;\r\n    implementation group: &#39;org.postgresql&#39;, name: &#39;postgresql&#39;, version: &#39;42.5.0&#39;\r\n    implementation group: &#39;com.lowagie&#39;, name:&#39;itext&#39;, version: &#39;2.1.7&#39;\r\n    implementation group: &#39;net.sf.jasperreports&#39;, name:&#39;jasperreports&#39;, version: &#39;6.20.0&#39;\r\n    implementation group: &#39;org.springdoc&#39;, name: &#39;springdoc-openapi-ui&#39;, version: &#39;1.6.11&#39;\r\n    implementation group: &#39;com.auth0&#39;, name: &#39;java-jwt&#39;, version: &#39;4.0.0&#39;\r\n    testImplementation group: &#39;org.mockito&#39;, name: &#39;mockito-core&#39;, version: &#39;4.4.0&#39;\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n\r\n--- Rest is ommited\r\n\r\n```","title":"Upgrade from SpringBoot 2.6 -&gt; 2.7 - No qualifying bean of type &#39;org.springframework.boot....TestEntityManager&#39; available","body":"<p>I updated from SpringBoot 2.6.12 to 2.7.11 and as a consequence our RepositoryTests were not working anymore.\nThe @autowired TestEntityManager can't be filled by a qualifying bean after the upgrade.\nI tried a lot of solutions from other threads and websites but most of them were quite old and it seems like the solution for 2.7 has to be a different one.</p>\n<p>Furthermore we were using H2 as embedded database before and the error was mostly the same, so the root-problem seems not be related to the new embedded test DB we use now (Zonky).</p>\n<p>I would be very grateful for help.</p>\n<p><strong>RepositoryTest:</strong></p>\n<pre><code>package eu.X.api.pod.repository;\n\nimport eu.X.api.pod.model.PodUrlEntity;\nimport eu.X.api.pod.repository.PodRepository;\nimport io.zonky.test.db.AutoConfigureEmbeddedDatabase;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;\nimport org.springframework.test.context.TestPropertySource;\n\nimport java.util.Optional;\n\nimport static io.zonky.test.db.AutoConfigureEmbeddedDatabase.DatabaseProvider.ZONKY;\n\n@DataJpaTest\n@AutoConfigureEmbeddedDatabase(provider = ZONKY)\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\nclass PodRepositoryTest {\n\n    @Autowired\n    private TestEntityManager entityManager;\n    @Autowired\n    private PodRepository podRepository;\n\n    @Test\n    void whenFindUrlByTrackIdAndUniqueContactId_thenReturnUrl() {\n        // given\n        PodUrlEntity podUrlEntity = PodUrlEntity.builder()\n                                                .trackId(&quot;12345678&quot;)\n                                                .contactId(&quot;276a15LnuT&quot;)\n                                                .url(&quot;de-200/2022/01/10/0170/img_de-200_20220110092858_10815_STP-DE-200-DPKC-5001.png&quot;)\n                                                .build();\n        entityManager.persist(podUrlEntity);\n        entityManager.flush();\n\n        // when\n        Optional&lt;String&gt; found = podRepository.findUrlByTrackIdAndUniqueContactId(podUrlEntity.getTrackId(),\n                                                                                  podUrlEntity.getContactId());\n        // then\n        assertEquals(podUrlEntity.getUrl(), found.get());\n    }\n\n}\n</code></pre>\n<p><strong>Stacktrace:</strong></p>\n<pre><code>\n&gt; Task :compileJava UP-TO-DATE\n&gt; Task :processResources UP-TO-DATE\n&gt; Task :classes UP-TO-DATE\n&gt; Task :compileTestJava UP-TO-DATE\n&gt; Task :processTestResources UP-TO-DATE\n&gt; Task :testClasses UP-TO-DATE\n&gt; Task :test FAILED\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/C:/Users/X/.gradle/caches/modules-2/files-2.1/eu.X.X.lib.spring/lib-spring-web/1.2.0/8a53726f79df95d1695115732c517efba0aca950/lib-spring-web-1.2.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/C:/Users/X/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.2.11/4741689214e9d1e8408b206506cbe76d1c6a7d60/logback-classic-1.2.11.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]\n13:39:24.980 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating CacheAwareContextLoaderDelegate from class [org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate]\n13:39:24.987 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating BootstrapContext using constructor [public org.springframework.test.context.support.DefaultBootstrapContext(java.lang.Class,org.springframework.test.context.CacheAwareContextLoaderDelegate)]\n13:39:25.016 [Test worker] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating TestContextBootstrapper for test class [eu.X.X.api.pod.repository.PodRepositoryTest] from class [org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper]\n13:39:25.024 [Test worker] INFO org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [eu.X.X.api.pod.repository.PodRepositoryTest], using SpringBootContextLoader\n13:39:25.027 [Test worker] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: class path resource [eu/X/X/api/pod/repository/PodRepositoryTest-context.xml] does not exist\n13:39:25.027 [Test worker] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: class path resource [eu/X/X/api/pod/repository/PodRepositoryTestContext.groovy] does not exist\n13:39:25.027 [Test worker] INFO org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: no resource found for suffixes {-context.xml, Context.groovy}.\n13:39:25.029 [Test worker] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [eu.X.X.api.pod.repository.PodRepositoryTest]: PodRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\n13:39:25.077 [Test worker] DEBUG org.springframework.test.context.support.ActiveProfilesUtils - Could not find an 'annotation declaring class' for annotation type [org.springframework.test.context.ActiveProfiles] and class [eu.X.X.api.pod.repository.PodRepositoryTest]\n13:39:25.119 [Test worker] DEBUG org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider - Identified candidate component class: file [C:\\Users\\X\\Desktop\\X-microservices-kafka\\X-pod-service\\build\\classes\\java\\main\\eu\\X\\X\\api\\pod\\PodServiceApplication.class]\n13:39:25.120 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration eu.X.X.api.pod.PodServiceApplication for test class eu.X.X.api.pod.repository.PodRepositoryTest\n13:39:25.122 [Test worker] DEBUG org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - @TestExecutionListeners is not present for class [eu.X.X.api.pod.repository.PodRepositoryTest]: using defaults.\n13:39:25.122 [Test worker] INFO org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, io.zonky.test.db.EmbeddedDatabaseTestExecutionListener, io.zonky.test.db.event.EventPublishingTestExecutionListener, io.zonky.test.db.flyway.OptimizedFlywayTestExecutionListener]\n13:39:25.138 [Test worker] INFO org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@4c168660, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@52b56a3e, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@fd0e5b6, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@4eed46ee, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@36b0fcd5, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4fad94a7, io.zonky.test.db.EmbeddedDatabaseTestExecutionListener@475835b1, io.zonky.test.db.flyway.OptimizedFlywayTestExecutionListener@6326d182, org.springframework.test.context.transaction.TransactionalTestExecutionListener@5241cf67, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@716a7124, org.springframework.test.context.event.EventPublishingTestExecutionListener@77192705, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@226642a5, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7e809b79, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5cc126dc, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@625e134e, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@72bd06ca, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@89c10b7, io.zonky.test.db.event.EventPublishingTestExecutionListener@5dbe30be]\n13:39:25.141 [Test worker] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener - Before test class: context [DefaultTestContext@3d8bbcdc testClass = PodRepositoryTest, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [MergedContextConfiguration@52500920 testClass = PodRepositoryTest, locations = '{}', classes = '{class eu.X.X.api.pod.PodServiceApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{classpath:application-test.properties}', propertySourceProperties = '{org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3a1dd365, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@315f43d5, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@351584c0, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@a0d8ffa4, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4c4748bf, [ImportsContextCustomizer@117e0fe5 key = []], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@20f12539, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@13cf7d52, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, io.zonky.test.db.EmbeddedDatabaseContextCustomizerFactory$EmbeddedDatabaseContextCustomizer@8a4aa01f, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@0], contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map[[empty]]], class annotated with @DirtiesContext [false] with mode [null].\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                        \n\n2022-10-14 13:39:25.459  INFO 22352 --- [    Test worker] e.g.s.a.p.repository.PodRepositoryTest   : Starting PodRepositoryTest using Java 17.0.4.1 on DE03-0101WL6NL6 with PID 22352 (started by X in C:\\Users\\X\\Desktop\\X-microservices-kafka\\X-pod-service)\n2022-10-14 13:39:25.460  INFO 22352 --- [    Test worker] e.g.s.a.p.repository.PodRepositoryTest   : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2022-10-14 13:39:25.684  INFO 22352 --- [    Test worker] EmbeddedDatabaseContextCustomizerFactory : Replacing 'dataSource' DataSource bean with embedded version\n2022-10-14 13:39:25.757  INFO 22352 --- [    Test worker] trationDelegate$BeanPostProcessorChecker : Bean 'io.zonky.test.db.config.EmbeddedDatabaseAutoConfiguration' of type [io.zonky.test.db.config.EmbeddedDatabaseAutoConfiguration$$EnhancerBySpringCGLIB$$6fc806ea] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2022-10-14 13:39:25.867  INFO 22352 --- [    Test worker] e.g.s.a.p.repository.PodRepositoryTest   : Started PodRepositoryTest in 0.704 seconds (JVM running for 1.58)\n\n\n\n============================\nCONDITIONS EVALUATION REPORT\n============================\n\n\nPositive matches:\n-----------------\n\n   EmbeddedDatabaseContextCustomizerFactory.PrimaryDataSourceAutoConfiguration matched:\n      - NoneNestedConditions 0 matched 1 did not; NestedCondition on EmbeddedDatabaseCondition.EmbeddedDatabaseDisabled @ConditionalOnProperty (zonky.test.database.replace=none) did not find property 'replace' (EmbeddedDatabaseCondition)\n\n   EmbeddedDatabaseContextCustomizerFactory.PrimaryDataSourceAutoConfiguration#embeddedDataSource1 matched:\n      - @ConditionalOnMissingBean (types: javax.sql.DataSource; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n\nNegative matches:\n-----------------\n\n    None\n\n\nExclusions:\n-----------\n\n    None\n\n\nUnconditional classes:\n----------------------\n\n    None\n\n\n\n2022-10-14 13:39:25.891 ERROR 22352 --- [    Test worker] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@36b0fcd5] to prepare test instance [eu.X.X.api.pod.repository.PodRepositoryTest@fe7b6b0]\n\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'eu.X.X.api.pod.repository.PodRepositoryTest': Unsatisfied dependency expressed through field 'entityManager'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659) ~[lib-spring-web-1.2.0.jar:na]\n\n--- Rest is ommited\n\n\nPodRepositoryTest &gt; whenFindUrlByUnitNoAndUniqueContactId_thenReturnUrl() FAILED\n    org.springframework.beans.factory.UnsatisfiedDependencyException at AutowiredAnnotationBeanPostProcessor.java:659\n        Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1799\nPodRepositoryTest &gt; whenFindUrlByTrackIdAndUniqueContactId_thenReturnUrl() FAILED\n    org.springframework.beans.factory.UnsatisfiedDependencyException at AutowiredAnnotationBeanPostProcessor.java:659\n        Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1799\nPodRepositoryTest &gt; whenFindTrackIdByUnitNoAndUniqueContactId_thenReturnTrackId() FAILED\n    org.springframework.beans.factory.UnsatisfiedDependencyException at AutowiredAnnotationBeanPostProcessor.java:659\n        Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException at DefaultListableBeanFactory.java:1799\n3 tests completed, 3 failed\nFAILURE: Build failed with an exception.\n* What went wrong:\nExecution failed for task ':test'.\n&gt; There were failing tests. See the report at: file:///C:/Users/X/Desktop/X-microservices-kafka/X-pod-service/build/reports/tests/test/index.html\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n* Get more help at https://help.gradle.org\nBUILD FAILED in 2s\n5 actionable tasks: 1 executed, 4 up-to-date\n</code></pre>\n<p><strong>build.gradle:</strong></p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '2.7.4'\n    id 'io.spring.dependency-management' version '1.0.14.RELEASE'\n}\n\ngroup = 'eu.X.X.api'\nversion = System.getProperty(&quot;VERSION&quot;)\nsourceCompatibility = JavaVersion.VERSION_17\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\nrepositories {\n    maven {\n        url 'http://X-nexus01.dc.X:8081/repository/maven-releases'\n        allowInsecureProtocol = true\n    }\n    maven {\n        url 'http://X-nexus01.dc.X:8081/repository/maven-public'\n        allowInsecureProtocol = true\n    }\n    maven {\n        url 'http://X-nexus01.dc.X:8081/repository/confluent.io-proxy'\n        allowInsecureProtocol = true\n    }\n}\n\next {\n    jUnitVersion = '5.9.1'\n    lombokVersion = '1.18.24'\n    awsSdkVersion = '2.17.276'\n}\ndependencies {\n    // X\n    implementation group: 'eu.X.X.lib.spring', name: 'lib-spring-web', version: '1.2.0'\n    // Spring Boot\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-web'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-data-jpa'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-actuator'\n    testImplementation group: 'org.springframework.boot', name: 'spring-boot-starter-test'\n    annotationProcessor group: 'org.springframework.boot', name: 'spring-boot-configuration-processor'\n    // Apache\n    implementation group: 'org.apache.commons', name: 'commons-pool2', version: '2.11.1'\n    implementation group: 'org.apache.httpcomponents', name: 'httpclient', version: '4.5.13'\n    implementation group: 'org.apache.pdfbox', name: 'pdfbox', version: '2.0.26'\n    // Amazon\n    implementation group: 'software.amazon.awssdk', name: 's3', version: &quot;${awsSdkVersion}&quot;\n    implementation group: 'software.amazon.awssdk', name: 'apache-client', version: &quot;${awsSdkVersion}&quot;\n    implementation group: 'com.amazonaws', name: 'aws-java-sdk-s3', version: '1.12.305'\n    // JUnit\n    testImplementation group: 'org.junit.jupiter', name: 'junit-jupiter-api', version: &quot;${jUnitVersion}&quot;\n    testImplementation group: 'org.junit.jupiter', name: 'junit-jupiter-params', version: &quot;${jUnitVersion}&quot;\n    testImplementation group: 'org.junit.jupiter', name: 'junit-jupiter-engine', version: &quot;${jUnitVersion}&quot;\n    // Lombok\n    compileOnly group: 'org.projectlombok', name: 'lombok', version: &quot;${lombokVersion}&quot;\n    annotationProcessor group:'org.projectlombok', name:'lombok', version: &quot;${lombokVersion}&quot;\n    // Zonky\n    implementation enforcedPlatform( group: 'io.zonky.test.postgres', name: 'embedded-postgres-binaries-bom', version:'14.5.0')\n    testImplementation group: 'io.zonky.test', name: 'embedded-database-spring-test', version:'2.1.2'\n    testRuntimeOnly group: 'io.zonky.test', name: 'embedded-postgres', version:'2.0.1'\n\n    // Miscellaneous\n    implementation group: 'org.zalando', name: 'logbook-spring-boot-starter', version: '2.14.0'\n    implementation group: 'org.postgresql', name: 'postgresql', version: '42.5.0'\n    implementation group: 'com.lowagie', name:'itext', version: '2.1.7'\n    implementation group: 'net.sf.jasperreports', name:'jasperreports', version: '6.20.0'\n    implementation group: 'org.springdoc', name: 'springdoc-openapi-ui', version: '1.6.11'\n    implementation group: 'com.auth0', name: 'java-jwt', version: '4.0.0'\n    testImplementation group: 'org.mockito', name: 'mockito-core', version: '4.4.0'\n}\n\ntest {\n    useJUnitPlatform()\n}\n\n--- Rest is ommited\n\n</code></pre>\n"},{"tags":["java","sonarqube","refactoring"],"comments":[{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":0,"creation_date":1683283457,"post_id":76181318,"comment_id":134346554,"body_markdown":"Can you replace the exceptions with one common exception? Like `... throws Exception`?","body":"Can you replace the exceptions with one common exception? Like <code>... throws Exception</code>?"},{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":0,"creation_date":1683283722,"post_id":76181318,"comment_id":134346608,"body_markdown":"Can you handle any of the exceptions? The IOException could possibly caught after the try-block and be rethrown as an unchecked exception?","body":"Can you handle any of the exceptions? The IOException could possibly caught after the try-block and be rethrown as an unchecked exception?"}],"answers":[{"tags":[],"owner":{"account_id":28494557,"reputation":181,"user_id":21806693,"display_name":"Igor Topolski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683284086,"creation_date":1683284086,"answer_id":76181435,"question_id":76181318,"body_markdown":"The SonarQube comment means that there&#39;s a chance the method will throw multiple exceptions. It means it might make it longer to handle exceptions this method can throw wherever it is being called (and possibly produce repetitive code).\r\n\r\nTo optimise this code you could handle both exceptions in the method itself and throw another exception instead.\r\n\r\nYou could possibly create a custom `KeyManagerFactoryException` (or more relevant, would be an exception relating to your class name). Your code that can produce an exception should be surrounded with [try-catch block][1] and both exceptions could be handled in there. \r\n\r\n```\r\npublic final KeyManagerFactory getKeyManagerFactory() throws KeyManagerFactoryException {\r\n    final var keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\r\n    try (InputStream file = new FileInputStream(keyStoreLocation)) {\r\n        final var keyStore = KeyStore.getInstance(PKCS12);\r\n        keyStore.load(file, keyStorePassword.toCharArray());\r\n        keyManagerFactory.init(keyStore, keyStorePassword.toCharArray());\r\n        return keyManagerFactory;\r\n    } catch (IOException ex) {\r\n        // some logging or extra handling of the error\r\n\r\n        throw new KeyManagerFactoryException(&quot;Your exception message documenting the error&quot;, ex);\r\n    } catch (GeneralSecurityException ex) {\r\n        // some logging or extra handling of the error\r\n\r\n        throw new KeyManagerFactoryException(&quot;Your exception message documenting the error&quot;, ex);\r\n    }\r\n}\r\n```\r\n\r\nAnd your custom exception class would look something like:\r\n```\r\npublic class KeyManagerFactoryException extends Exception {\r\n    public KeyManagerFactoryException(String message, Throwable cause) {\r\n        super(message, cause);\r\n    }\r\n}\r\n```\r\n\r\nAs a result, your method will only be able to raise an exception of a single type.\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html","title":"Refactor this method to throw at most one checked exception instead of: java.security.GeneralSecurityException, java.io.IOException","body":"<p>The SonarQube comment means that there's a chance the method will throw multiple exceptions. It means it might make it longer to handle exceptions this method can throw wherever it is being called (and possibly produce repetitive code).</p>\n<p>To optimise this code you could handle both exceptions in the method itself and throw another exception instead.</p>\n<p>You could possibly create a custom <code>KeyManagerFactoryException</code> (or more relevant, would be an exception relating to your class name). Your code that can produce an exception should be surrounded with <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html\" rel=\"nofollow noreferrer\">try-catch block</a> and both exceptions could be handled in there.</p>\n<pre><code>public final KeyManagerFactory getKeyManagerFactory() throws KeyManagerFactoryException {\n    final var keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\n    try (InputStream file = new FileInputStream(keyStoreLocation)) {\n        final var keyStore = KeyStore.getInstance(PKCS12);\n        keyStore.load(file, keyStorePassword.toCharArray());\n        keyManagerFactory.init(keyStore, keyStorePassword.toCharArray());\n        return keyManagerFactory;\n    } catch (IOException ex) {\n        // some logging or extra handling of the error\n\n        throw new KeyManagerFactoryException(&quot;Your exception message documenting the error&quot;, ex);\n    } catch (GeneralSecurityException ex) {\n        // some logging or extra handling of the error\n\n        throw new KeyManagerFactoryException(&quot;Your exception message documenting the error&quot;, ex);\n    }\n}\n</code></pre>\n<p>And your custom exception class would look something like:</p>\n<pre><code>public class KeyManagerFactoryException extends Exception {\n    public KeyManagerFactoryException(String message, Throwable cause) {\n        super(message, cause);\n    }\n}\n</code></pre>\n<p>As a result, your method will only be able to raise an exception of a single type.</p>\n"}],"owner":{"account_id":14482834,"reputation":3894,"user_id":10461625,"display_name":"PatPanda"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1683571248,"accepted_answer_id":76181435,"answer_count":1,"score":-3,"last_activity_date":1683284086,"creation_date":1683283268,"question_id":76181318,"body_markdown":"What I would like to achieve:\r\n\r\nHave a method to get ```javax.net.ssl.KeyManagerFactory;```\r\n\r\nWhat I tried:\r\n\r\nHere is the code:\r\n\r\n```\r\npublic final KeyManagerFactory getKeyManagerFactory() throws GeneralSecurityException, IOException {\r\n        final var keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\r\n        try (InputStream file = new FileInputStream(keyStoreLocation)) {\r\n            final var keyStore = KeyStore.getInstance(PKCS12);\r\n            keyStore.load(file, keyStorePassword.toCharArray());\r\n            keyManagerFactory.init(keyStore, keyStorePassword.toCharArray());\r\n            return keyManagerFactory;\r\n        }\r\n    }\r\n```\r\n\r\nIssue: \r\n\r\nAfter SonarQube scan, I am getting ```Refactor this method to throw at most one checked exception instead of: ```\r\n\r\nNote:\r\n\r\nIt uses to have all sorts of exceptions\r\n\r\nUnrecoverableKeyException, KeyStoreException, NoSuchAlgorithmException CertificateException, IOException, NoSuchAlgorithmException FileNotFoundException\r\n\r\nand I tried to refactor the best I could, but still left with ```Refactor this method to throw at most one checked exception instead of: java.security.GeneralSecurityException, java.io.IOException```\r\n\r\nQuestion:\r\n\r\nHow to refactor this to throw at most one checked exception without using ```throws Exception``` which will trigger another SonarQube issue?","title":"Refactor this method to throw at most one checked exception instead of: java.security.GeneralSecurityException, java.io.IOException","body":"<p>What I would like to achieve:</p>\n<p>Have a method to get <code>javax.net.ssl.KeyManagerFactory;</code></p>\n<p>What I tried:</p>\n<p>Here is the code:</p>\n<pre><code>public final KeyManagerFactory getKeyManagerFactory() throws GeneralSecurityException, IOException {\n        final var keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\n        try (InputStream file = new FileInputStream(keyStoreLocation)) {\n            final var keyStore = KeyStore.getInstance(PKCS12);\n            keyStore.load(file, keyStorePassword.toCharArray());\n            keyManagerFactory.init(keyStore, keyStorePassword.toCharArray());\n            return keyManagerFactory;\n        }\n    }\n</code></pre>\n<p>Issue:</p>\n<p>After SonarQube scan, I am getting <code>Refactor this method to throw at most one checked exception instead of: </code></p>\n<p>Note:</p>\n<p>It uses to have all sorts of exceptions</p>\n<p>UnrecoverableKeyException, KeyStoreException, NoSuchAlgorithmException CertificateException, IOException, NoSuchAlgorithmException FileNotFoundException</p>\n<p>and I tried to refactor the best I could, but still left with <code>Refactor this method to throw at most one checked exception instead of: java.security.GeneralSecurityException, java.io.IOException</code></p>\n<p>Question:</p>\n<p>How to refactor this to throw at most one checked exception without using <code>throws Exception</code> which will trigger another SonarQube issue?</p>\n"},{"tags":["java","maven","lombok","mapstruct"],"comments":[{"owner":{"account_id":19726215,"reputation":538,"user_id":14442758,"display_name":"Z-100"},"score":0,"creation_date":1683192712,"post_id":76171379,"comment_id":134329990,"body_markdown":"Have you tried using `RDAccount`? is rDAccount simply a typo of yours?","body":"Have you tried using <code>RDAccount</code>? is rDAccount simply a typo of yours?"}],"answers":[{"tags":[],"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683193481,"creation_date":1683193481,"answer_id":76171761,"question_id":76171379,"body_markdown":"Usually accessor for properties is generated using first character property name uppercase so `rDAccount` is interpreted from `MapStruct` (and from Lombok too, I Suppose) as `RDAccount`.&lt;br/&gt;\r\nJust rename `rDAccount` as `RDAccount` and all should be fine.","title":"Mapstruct Error : no property named exists in source parameter(s)","body":"<p>Usually accessor for properties is generated using first character property name uppercase so <code>rDAccount</code> is interpreted from <code>MapStruct</code> (and from Lombok too, I Suppose) as <code>RDAccount</code>.<br/>\nJust rename <code>rDAccount</code> as <code>RDAccount</code> and all should be fine.</p>\n"},{"tags":[],"owner":{"account_id":22906904,"reputation":113,"user_id":17044833,"display_name":"Jaison "},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683227756,"creation_date":1683193842,"answer_id":76171838,"question_id":76171379,"body_markdown":"In the mapper calls instead of `@Mapping(source = &quot;rDAccount&quot;, target = &quot;xfaceRDAccount&quot;)` try using `@Mapping(source = &quot;RDAccount&quot;, target = &quot;xfaceRDAccount&quot;)`\r\n\r\nThe getters and setters generated by lombok for rDAccount seems to getRDAccount and setRDAccount.\r\n\r\n[![Generated getter and setter][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jIsqK.png","title":"Mapstruct Error : no property named exists in source parameter(s)","body":"<p>In the mapper calls instead of <code>@Mapping(source = &quot;rDAccount&quot;, target = &quot;xfaceRDAccount&quot;)</code> try using <code>@Mapping(source = &quot;RDAccount&quot;, target = &quot;xfaceRDAccount&quot;)</code></p>\n<p>The getters and setters generated by lombok for rDAccount seems to getRDAccount and setRDAccount.</p>\n<p><a href=\"https://i.stack.imgur.com/jIsqK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jIsqK.png\" alt=\"Generated getter and setter\" /></a></p>\n"},{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683283536,"creation_date":1683283536,"answer_id":76181358,"question_id":76171379,"body_markdown":"I believe the correct approach to use the `mapping` would be the following\r\n\r\n    @Mapping(source = &quot;sourceClass.rDAccount&quot;, target = &quot;xfaceRDAccount&quot;)\r\n    TargetClass mapToTarget(SourceClass sourceClass);","title":"Mapstruct Error : no property named exists in source parameter(s)","body":"<p>I believe the correct approach to use the <code>mapping</code> would be the following</p>\n<pre><code>@Mapping(source = &quot;sourceClass.rDAccount&quot;, target = &quot;xfaceRDAccount&quot;)\nTargetClass mapToTarget(SourceClass sourceClass);\n</code></pre>\n"}],"owner":{"account_id":26816653,"reputation":41,"user_id":20406551,"display_name":"Ankur Upadhayay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":561,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1683283536,"creation_date":1683190872,"question_id":76171379,"body_markdown":"Hi I am trying to map my source to target but i am getting this error.\r\n\r\nHere is My Pom.xml\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n    &lt;version&gt;1.5.5.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    &lt;version&gt;1.18.26&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\r\n    &lt;version&gt;0.2.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    &lt;configuration&gt;\r\n        &lt;annotationProcessorPaths&gt;\r\n            &lt;path&gt;\r\n                &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n                &lt;version&gt;1.5.5.Final&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                &lt;version&gt;1.18.26&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\r\n                &lt;version&gt;0.2.0&lt;/version&gt;\r\n            &lt;/path&gt;\r\n        &lt;/annotationProcessorPaths&gt;\r\n    &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nMy Mapper:\r\n```\r\nimport org.mapstruct.Mapper;\r\nimport org.mapstruct.Mapping;\r\n\r\n@Mapper(componentModel = &quot;spring&quot;)\r\npublic interface CustomMapper {\r\n\r\n    @Mapping(source = &quot;rDAccount&quot;, target = &quot;xfaceRDAccount&quot;)\r\n    TargetClass mapToTarget(SourceClass sourceClass);\r\n}\r\n```\r\n\r\nMy SourceClass\r\n```\r\nimport lombok.Data;\r\n\r\n@Data\r\npublic class SourceClass {\r\n    private String rDAccount;\r\n}\r\n```\r\n\r\nMy TargetClass\r\n```\r\nimport lombok.Data;\r\n\r\n@Data\r\npublic class TargetClass {\r\n    private String xfaceRDAccount;\r\n}\r\n```\r\n\r\nAfter running mvn clean install\r\nError I am getting: No property named &quot;rDAccount&quot; exists in source parameter(s). Did you mean &quot;RDAccount&quot;?","title":"Mapstruct Error : no property named exists in source parameter(s)","body":"<p>Hi I am trying to map my source to target but i am getting this error.</p>\n<p>Here is My Pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n    &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n    &lt;version&gt;1.5.5.Final&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;version&gt;1.18.26&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n    &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n    &lt;version&gt;0.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;annotationProcessorPaths&gt;\n            &lt;path&gt;\n                &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                &lt;version&gt;1.5.5.Final&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                &lt;version&gt;1.18.26&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n                &lt;version&gt;0.2.0&lt;/version&gt;\n            &lt;/path&gt;\n        &lt;/annotationProcessorPaths&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>My Mapper:</p>\n<pre><code>import org.mapstruct.Mapper;\nimport org.mapstruct.Mapping;\n\n@Mapper(componentModel = &quot;spring&quot;)\npublic interface CustomMapper {\n\n    @Mapping(source = &quot;rDAccount&quot;, target = &quot;xfaceRDAccount&quot;)\n    TargetClass mapToTarget(SourceClass sourceClass);\n}\n</code></pre>\n<p>My SourceClass</p>\n<pre><code>import lombok.Data;\n\n@Data\npublic class SourceClass {\n    private String rDAccount;\n}\n</code></pre>\n<p>My TargetClass</p>\n<pre><code>import lombok.Data;\n\n@Data\npublic class TargetClass {\n    private String xfaceRDAccount;\n}\n</code></pre>\n<p>After running mvn clean install\nError I am getting: No property named &quot;rDAccount&quot; exists in source parameter(s). Did you mean &quot;RDAccount&quot;?</p>\n"},{"tags":["java","openxml","apache-poi"],"comments":[{"owner":{"account_id":431744,"reputation":363,"user_id":816016,"display_name":"Bhuvanesh Phadnis"},"score":0,"creation_date":1315113937,"post_id":7230819,"comment_id":8792002,"body_markdown":"I think my question was a little misunderstood and I apologize for the lack of details. What I am trying to achieve is to fetch an excel sheet in HSSFWorkbook object and convert it to XSSFWorkbook, which means converting a 2003 .xls file to a latest .xlsx file. Now I have tried some code that I am going to post as an answer. Please comment if my approach is correct or is there a better solution to this.","body":"I think my question was a little misunderstood and I apologize for the lack of details. What I am trying to achieve is to fetch an excel sheet in HSSFWorkbook object and convert it to XSSFWorkbook, which means converting a 2003 .xls file to a latest .xlsx file. Now I have tried some code that I am going to post as an answer. Please comment if my approach is correct or is there a better solution to this."},{"owner":{"account_id":3245347,"reputation":3398,"user_id":3887073,"accept_rate":75,"display_name":"Ben"},"score":0,"creation_date":1510067813,"post_id":7230819,"comment_id":81272237,"body_markdown":"It&#39;s late 2017, using Apache POI 3.10 + 3.17. **None** of the provided answers work in any way!","body":"It&#39;s late 2017, using Apache POI 3.10 + 3.17. <b>None</b> of the provided answers work in any way!"}],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640217089,"creation_date":1314642406,"answer_id":7234229,"question_id":7230819,"body_markdown":"See the article [*Upgrading to POI 3.5, including converting existing HSSF Usermodel code to SS Usermodel (for XSSF and HSSF)*][1]. There&#39;s an example [here][2], recapitulated below:\r\n\r\n```\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport org.apache.poi.ss.usermodel.Cell;\r\nimport org.apache.poi.ss.usermodel.DateUtil;\r\nimport org.apache.poi.ss.usermodel.FormulaEvaluator;\r\nimport org.apache.poi.ss.usermodel.Row;\r\nimport org.apache.poi.ss.usermodel.Sheet;\r\nimport org.apache.poi.ss.usermodel.Workbook;\r\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n\r\npublic class XlsxReader {\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        InputStream myxls = new FileInputStream(&quot;test.xlsx&quot;);\r\n        Workbook book = new XSSFWorkbook(myxls);\r\n        FormulaEvaluator eval =\r\n            book.getCreationHelper().createFormulaEvaluator();\r\n        Sheet sheet = book.getSheetAt(0);\r\n        for (Row row : sheet) {\r\n            for (Cell cell : row) {\r\n                printCell(cell, eval);\r\n                System.out.print(&quot;; &quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n        myxls.close();\r\n    }\r\n\r\n    private static void printCell(Cell cell, FormulaEvaluator eval) {\r\n        switch (cell.getCellType()) {\r\n            case Cell.CELL_TYPE_BLANK:\r\n                System.out.print(&quot;EMPTY&quot;);\r\n                break;\r\n            case Cell.CELL_TYPE_STRING:\r\n                System.out.print(cell.getStringCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_NUMERIC:\r\n                if (DateUtil.isCellDateFormatted(cell)) {\r\n                    System.out.print(cell.getDateCellValue());\r\n                } else {\r\n                    System.out.print(cell.getNumericCellValue());\r\n                }\r\n                break;\r\n            case Cell.CELL_TYPE_BOOLEAN:\r\n                System.out.print(cell.getBooleanCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_FORMULA:\r\n                System.out.print(cell.getCellFormula());\r\n                break;\r\n            default:\r\n                System.out.print(&quot;DEFAULT&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n  [1]: http://poi.apache.org/spreadsheet/converting.html\r\n  [2]: https://stackoverflow.com/questions/3560950/best-language-to-parse-extremely-large-excel-2007-files/3562214#3562214","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<p>See the article <a href=\"http://poi.apache.org/spreadsheet/converting.html\" rel=\"nofollow noreferrer\"><em>Upgrading to POI 3.5, including converting existing HSSF Usermodel code to SS Usermodel (for XSSF and HSSF)</em></a>. There's an example <a href=\"https://stackoverflow.com/questions/3560950/best-language-to-parse-extremely-large-excel-2007-files/3562214#3562214\">here</a>, recapitulated below:</p>\n<pre><code>import java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.DateUtil;\nimport org.apache.poi.ss.usermodel.FormulaEvaluator;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.usermodel.Sheet;\nimport org.apache.poi.ss.usermodel.Workbook;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\n\npublic class XlsxReader {\n\n    public static void main(String[] args) throws IOException {\n        InputStream myxls = new FileInputStream(&quot;test.xlsx&quot;);\n        Workbook book = new XSSFWorkbook(myxls);\n        FormulaEvaluator eval =\n            book.getCreationHelper().createFormulaEvaluator();\n        Sheet sheet = book.getSheetAt(0);\n        for (Row row : sheet) {\n            for (Cell cell : row) {\n                printCell(cell, eval);\n                System.out.print(&quot;; &quot;);\n            }\n            System.out.println();\n        }\n        myxls.close();\n    }\n\n    private static void printCell(Cell cell, FormulaEvaluator eval) {\n        switch (cell.getCellType()) {\n            case Cell.CELL_TYPE_BLANK:\n                System.out.print(&quot;EMPTY&quot;);\n                break;\n            case Cell.CELL_TYPE_STRING:\n                System.out.print(cell.getStringCellValue());\n                break;\n            case Cell.CELL_TYPE_NUMERIC:\n                if (DateUtil.isCellDateFormatted(cell)) {\n                    System.out.print(cell.getDateCellValue());\n                } else {\n                    System.out.print(cell.getNumericCellValue());\n                }\n                break;\n            case Cell.CELL_TYPE_BOOLEAN:\n                System.out.print(cell.getBooleanCellValue());\n                break;\n            case Cell.CELL_TYPE_FORMULA:\n                System.out.print(cell.getCellFormula());\n                break;\n            default:\n                System.out.print(&quot;DEFAULT&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":431744,"reputation":363,"user_id":816016,"display_name":"Bhuvanesh Phadnis"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1443820171,"creation_date":1315114361,"answer_id":7297596,"question_id":7230819,"body_markdown":"this code has been adapted from what I found here on [coderanch forum][1]\r\n\r\n\r\n\tpublic final class ExcelDocumentConverter {\r\n\tpublic static XSSFWorkbook convertWorkbookHSSFToXSSF(HSSFWorkbook source) {\r\n\t\tXSSFWorkbook retVal = new XSSFWorkbook();\r\n\t\tfor (int i = 0; i &lt; source.getNumberOfSheets(); i++) {\r\n\t\t\tXSSFSheet xssfSheet = retVal.createSheet();\r\n\t\t\tHSSFSheet hssfsheet = source.getSheetAt(i);\r\n\t\t\tcopySheets(hssfsheet, xssfSheet);\r\n\t\t}\r\n\t\treturn retVal;\r\n\t}\r\n\r\n\tpublic static void copySheets(HSSFSheet source, XSSFSheet destination) {\r\n\t\tcopySheets(source, destination, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @param destination\r\n\t *            the sheet to create from the copy.\r\n\t * @param the\r\n\t *            sheet to copy.\r\n\t * @param copyStyle\r\n\t *            true copy the style.\r\n\t */\r\n\tpublic static void copySheets(HSSFSheet source, XSSFSheet destination, boolean copyStyle) {\r\n\t\tint maxColumnNum = 0;\r\n\t\tMap&lt;Integer, HSSFCellStyle&gt; styleMap = (copyStyle) ? new HashMap&lt;Integer, HSSFCellStyle&gt;() : null;\r\n\t\tfor (int i = source.getFirstRowNum(); i &lt;= source.getLastRowNum(); i++) {\r\n\t\t\tHSSFRow srcRow = source.getRow(i);\r\n\t\t\tXSSFRow destRow = destination.createRow(i);\r\n\t\t\tif (srcRow != null) {\r\n\t\t\t\tcopyRow(source, destination, srcRow, destRow, styleMap);\r\n\t\t\t\tif (srcRow.getLastCellNum() &gt; maxColumnNum) {\r\n\t\t\t\t\tmaxColumnNum = srcRow.getLastCellNum();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (int i = 0; i &lt;= maxColumnNum; i++) {\r\n\t\t\tdestination.setColumnWidth(i, source.getColumnWidth(i));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param srcSheet\r\n\t *            the sheet to copy.\r\n\t * @param destSheet\r\n\t *            the sheet to create.\r\n\t * @param srcRow\r\n\t *            the row to copy.\r\n\t * @param destRow\r\n\t *            the row to create.\r\n\t * @param styleMap\r\n\t *            -\r\n\t */\r\n\tpublic static void copyRow(HSSFSheet srcSheet, XSSFSheet destSheet, HSSFRow srcRow, XSSFRow destRow,\r\n\t\t\tMap&lt;Integer, HSSFCellStyle&gt; styleMap) {\r\n\t\t// manage a list of merged zone in order to not insert two times a\r\n\t\t// merged zone\r\n\t\tSet&lt;CellRangeAddressWrapper&gt; mergedRegions = new TreeSet&lt;CellRangeAddressWrapper&gt;();\r\n\t\tdestRow.setHeight(srcRow.getHeight());\r\n\t\t// pour chaque row\r\n\t\tfor (int j = srcRow.getFirstCellNum(); j &lt;= srcRow.getLastCellNum(); j++) {\r\n\t\t\tHSSFCell oldCell = srcRow.getCell(j); // ancienne cell\r\n\t\t\tXSSFCell newCell = destRow.getCell(j); // new cell\r\n\t\t\tif (oldCell != null) {\r\n\t\t\t\tif (newCell == null) {\r\n\t\t\t\t\tnewCell = destRow.createCell(j);\r\n\t\t\t\t}\r\n\t\t\t\t// copy chaque cell\r\n\t\t\t\tcopyCell(oldCell, newCell, styleMap);\r\n\t\t\t\t// copy les informations de fusion entre les cellules\r\n\t\t\t\t// System.out.println(&quot;row num: &quot; + srcRow.getRowNum() +\r\n\t\t\t\t// &quot; , col: &quot; + (short)oldCell.getColumnIndex());\r\n\t\t\t\tCellRangeAddress mergedRegion = getMergedRegion(srcSheet, srcRow.getRowNum(),\r\n\t\t\t\t\t\t(short) oldCell.getColumnIndex());\r\n\r\n\t\t\t\tif (mergedRegion != null) {\r\n\t\t\t\t\t// System.out.println(&quot;Selected merged region: &quot; +\r\n\t\t\t\t\t// mergedRegion.toString());\r\n\t\t\t\t\tCellRangeAddress newMergedRegion = new CellRangeAddress(mergedRegion.getFirstRow(),\r\n\t\t\t\t\t\t\tmergedRegion.getLastRow(), mergedRegion.getFirstColumn(), mergedRegion.getLastColumn());\r\n\t\t\t\t\t// System.out.println(&quot;New merged region: &quot; +\r\n\t\t\t\t\t// newMergedRegion.toString());\r\n\t\t\t\t\tCellRangeAddressWrapper wrapper = new CellRangeAddressWrapper(newMergedRegion);\r\n\t\t\t\t\tif (isNewMergedRegion(wrapper, mergedRegions)) {\r\n\t\t\t\t\t\tmergedRegions.add(wrapper);\r\n\t\t\t\t\t\tdestSheet.addMergedRegion(wrapper.range);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @param oldCell\r\n\t * @param newCell\r\n\t * @param styleMap\r\n\t */\r\n\tpublic static void copyCell(HSSFCell oldCell, XSSFCell newCell, Map&lt;Integer, HSSFCellStyle&gt; styleMap) {\r\n\t\tif (styleMap != null) {\r\n\t\t\tint stHashCode = oldCell.getCellStyle().hashCode();\r\n\t\t\tHSSFCellStyle sourceCellStyle = styleMap.get(stHashCode);\r\n\t\t\tXSSFCellStyle destnCellStyle = newCell.getCellStyle();\r\n\t\t\tif (sourceCellStyle == null) {\r\n\t\t\t\tsourceCellStyle = oldCell.getSheet().getWorkbook().createCellStyle();\r\n\t\t\t}\r\n\t\t\tdestnCellStyle.cloneStyleFrom(oldCell.getCellStyle());\r\n\t\t\tstyleMap.put(stHashCode, sourceCellStyle);\r\n\t\t\tnewCell.setCellStyle(destnCellStyle);\r\n\t\t}\r\n\t\tswitch (oldCell.getCellType()) {\r\n\t\tcase HSSFCell.CELL_TYPE_STRING:\r\n\t\t\tnewCell.setCellValue(oldCell.getStringCellValue());\r\n\t\t\tbreak;\r\n\t\tcase HSSFCell.CELL_TYPE_NUMERIC:\r\n\t\t\tnewCell.setCellValue(oldCell.getNumericCellValue());\r\n\t\t\tbreak;\r\n\t\tcase HSSFCell.CELL_TYPE_BLANK:\r\n\t\t\tnewCell.setCellType(HSSFCell.CELL_TYPE_BLANK);\r\n\t\t\tbreak;\r\n\t\tcase HSSFCell.CELL_TYPE_BOOLEAN:\r\n\t\t\tnewCell.setCellValue(oldCell.getBooleanCellValue());\r\n\t\t\tbreak;\r\n\t\tcase HSSFCell.CELL_TYPE_ERROR:\r\n\t\t\tnewCell.setCellErrorValue(oldCell.getErrorCellValue());\r\n\t\t\tbreak;\r\n\t\tcase HSSFCell.CELL_TYPE_FORMULA:\r\n\t\t\tnewCell.setCellFormula(oldCell.getCellFormula());\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * R&#233;cup&#232;re les informations de fusion des cellules dans la sheet source\r\n\t * pour les appliquer &#224; la sheet destination... R&#233;cup&#232;re toutes les zones\r\n\t * merged dans la sheet source et regarde pour chacune d&#39;elle si elle se\r\n\t * trouve dans la current row que nous traitons. Si oui, retourne l&#39;objet\r\n\t * CellRangeAddress.\r\n\t * \r\n\t * @param sheet\r\n\t *            the sheet containing the data.\r\n\t * @param rowNum\r\n\t *            the num of the row to copy.\r\n\t * @param cellNum\r\n\t *            the num of the cell to copy.\r\n\t * @return the CellRangeAddress created.\r\n\t */\r\n\tpublic static CellRangeAddress getMergedRegion(HSSFSheet sheet, int rowNum, short cellNum) {\r\n\t\tfor (int i = 0; i &lt; sheet.getNumMergedRegions(); i++) {\r\n\t\t\tCellRangeAddress merged = sheet.getMergedRegion(i);\r\n\t\t\tif (merged.isInRange(rowNum, cellNum)) {\r\n\t\t\t\treturn merged;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * Check that the merged region has been created in the destination sheet.\r\n\t * \r\n\t * @param newMergedRegion\r\n\t *            the merged region to copy or not in the destination sheet.\r\n\t * @param mergedRegions\r\n\t *            the list containing all the merged region.\r\n\t * @return true if the merged region is already in the list or not.\r\n\t */\r\n\tprivate static boolean isNewMergedRegion(CellRangeAddressWrapper newMergedRegion,\r\n\t\t\tSet&lt;CellRangeAddressWrapper&gt; mergedRegions) {\r\n\t\treturn !mergedRegions.contains(newMergedRegion);\r\n\t}\r\n    }\r\n\r\n\r\n  [1]: http://www.coderanch.com/t/420958/open-source/Copying-sheet-excel-file-another#2454454","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<p>this code has been adapted from what I found here on <a href=\"http://www.coderanch.com/t/420958/open-source/Copying-sheet-excel-file-another#2454454\" rel=\"noreferrer\">coderanch forum</a></p>\n\n<pre><code>public final class ExcelDocumentConverter {\npublic static XSSFWorkbook convertWorkbookHSSFToXSSF(HSSFWorkbook source) {\n    XSSFWorkbook retVal = new XSSFWorkbook();\n    for (int i = 0; i &lt; source.getNumberOfSheets(); i++) {\n        XSSFSheet xssfSheet = retVal.createSheet();\n        HSSFSheet hssfsheet = source.getSheetAt(i);\n        copySheets(hssfsheet, xssfSheet);\n    }\n    return retVal;\n}\n\npublic static void copySheets(HSSFSheet source, XSSFSheet destination) {\n    copySheets(source, destination, true);\n}\n\n/**\n * @param destination\n *            the sheet to create from the copy.\n * @param the\n *            sheet to copy.\n * @param copyStyle\n *            true copy the style.\n */\npublic static void copySheets(HSSFSheet source, XSSFSheet destination, boolean copyStyle) {\n    int maxColumnNum = 0;\n    Map&lt;Integer, HSSFCellStyle&gt; styleMap = (copyStyle) ? new HashMap&lt;Integer, HSSFCellStyle&gt;() : null;\n    for (int i = source.getFirstRowNum(); i &lt;= source.getLastRowNum(); i++) {\n        HSSFRow srcRow = source.getRow(i);\n        XSSFRow destRow = destination.createRow(i);\n        if (srcRow != null) {\n            copyRow(source, destination, srcRow, destRow, styleMap);\n            if (srcRow.getLastCellNum() &gt; maxColumnNum) {\n                maxColumnNum = srcRow.getLastCellNum();\n            }\n        }\n    }\n    for (int i = 0; i &lt;= maxColumnNum; i++) {\n        destination.setColumnWidth(i, source.getColumnWidth(i));\n    }\n}\n\n/**\n * @param srcSheet\n *            the sheet to copy.\n * @param destSheet\n *            the sheet to create.\n * @param srcRow\n *            the row to copy.\n * @param destRow\n *            the row to create.\n * @param styleMap\n *            -\n */\npublic static void copyRow(HSSFSheet srcSheet, XSSFSheet destSheet, HSSFRow srcRow, XSSFRow destRow,\n        Map&lt;Integer, HSSFCellStyle&gt; styleMap) {\n    // manage a list of merged zone in order to not insert two times a\n    // merged zone\n    Set&lt;CellRangeAddressWrapper&gt; mergedRegions = new TreeSet&lt;CellRangeAddressWrapper&gt;();\n    destRow.setHeight(srcRow.getHeight());\n    // pour chaque row\n    for (int j = srcRow.getFirstCellNum(); j &lt;= srcRow.getLastCellNum(); j++) {\n        HSSFCell oldCell = srcRow.getCell(j); // ancienne cell\n        XSSFCell newCell = destRow.getCell(j); // new cell\n        if (oldCell != null) {\n            if (newCell == null) {\n                newCell = destRow.createCell(j);\n            }\n            // copy chaque cell\n            copyCell(oldCell, newCell, styleMap);\n            // copy les informations de fusion entre les cellules\n            // System.out.println(\"row num: \" + srcRow.getRowNum() +\n            // \" , col: \" + (short)oldCell.getColumnIndex());\n            CellRangeAddress mergedRegion = getMergedRegion(srcSheet, srcRow.getRowNum(),\n                    (short) oldCell.getColumnIndex());\n\n            if (mergedRegion != null) {\n                // System.out.println(\"Selected merged region: \" +\n                // mergedRegion.toString());\n                CellRangeAddress newMergedRegion = new CellRangeAddress(mergedRegion.getFirstRow(),\n                        mergedRegion.getLastRow(), mergedRegion.getFirstColumn(), mergedRegion.getLastColumn());\n                // System.out.println(\"New merged region: \" +\n                // newMergedRegion.toString());\n                CellRangeAddressWrapper wrapper = new CellRangeAddressWrapper(newMergedRegion);\n                if (isNewMergedRegion(wrapper, mergedRegions)) {\n                    mergedRegions.add(wrapper);\n                    destSheet.addMergedRegion(wrapper.range);\n                }\n            }\n        }\n    }\n\n}\n\n/**\n * @param oldCell\n * @param newCell\n * @param styleMap\n */\npublic static void copyCell(HSSFCell oldCell, XSSFCell newCell, Map&lt;Integer, HSSFCellStyle&gt; styleMap) {\n    if (styleMap != null) {\n        int stHashCode = oldCell.getCellStyle().hashCode();\n        HSSFCellStyle sourceCellStyle = styleMap.get(stHashCode);\n        XSSFCellStyle destnCellStyle = newCell.getCellStyle();\n        if (sourceCellStyle == null) {\n            sourceCellStyle = oldCell.getSheet().getWorkbook().createCellStyle();\n        }\n        destnCellStyle.cloneStyleFrom(oldCell.getCellStyle());\n        styleMap.put(stHashCode, sourceCellStyle);\n        newCell.setCellStyle(destnCellStyle);\n    }\n    switch (oldCell.getCellType()) {\n    case HSSFCell.CELL_TYPE_STRING:\n        newCell.setCellValue(oldCell.getStringCellValue());\n        break;\n    case HSSFCell.CELL_TYPE_NUMERIC:\n        newCell.setCellValue(oldCell.getNumericCellValue());\n        break;\n    case HSSFCell.CELL_TYPE_BLANK:\n        newCell.setCellType(HSSFCell.CELL_TYPE_BLANK);\n        break;\n    case HSSFCell.CELL_TYPE_BOOLEAN:\n        newCell.setCellValue(oldCell.getBooleanCellValue());\n        break;\n    case HSSFCell.CELL_TYPE_ERROR:\n        newCell.setCellErrorValue(oldCell.getErrorCellValue());\n        break;\n    case HSSFCell.CELL_TYPE_FORMULA:\n        newCell.setCellFormula(oldCell.getCellFormula());\n        break;\n    default:\n        break;\n    }\n\n}\n\n/**\n * Récupère les informations de fusion des cellules dans la sheet source\n * pour les appliquer à la sheet destination... Récupère toutes les zones\n * merged dans la sheet source et regarde pour chacune d'elle si elle se\n * trouve dans la current row que nous traitons. Si oui, retourne l'objet\n * CellRangeAddress.\n * \n * @param sheet\n *            the sheet containing the data.\n * @param rowNum\n *            the num of the row to copy.\n * @param cellNum\n *            the num of the cell to copy.\n * @return the CellRangeAddress created.\n */\npublic static CellRangeAddress getMergedRegion(HSSFSheet sheet, int rowNum, short cellNum) {\n    for (int i = 0; i &lt; sheet.getNumMergedRegions(); i++) {\n        CellRangeAddress merged = sheet.getMergedRegion(i);\n        if (merged.isInRange(rowNum, cellNum)) {\n            return merged;\n        }\n    }\n    return null;\n}\n\n/**\n * Check that the merged region has been created in the destination sheet.\n * \n * @param newMergedRegion\n *            the merged region to copy or not in the destination sheet.\n * @param mergedRegions\n *            the list containing all the merged region.\n * @return true if the merged region is already in the list or not.\n */\nprivate static boolean isNewMergedRegion(CellRangeAddressWrapper newMergedRegion,\n        Set&lt;CellRangeAddressWrapper&gt; mergedRegions) {\n    return !mergedRegions.contains(newMergedRegion);\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1084159,"reputation":624,"user_id":1080301,"accept_rate":78,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1584554011,"creation_date":1336386143,"answer_id":10480410,"question_id":7230819,"body_markdown":"**Since all of the above answers don&#39;t help, here is working code:**\r\n\r\nJust write a main method that fills the necessary fields and uses transform().\r\n\r\n    package myStuff;\r\n\r\n    import java.io.*;\r\n    import java.util.*;\r\n\r\n    import org.apache.poi.hssf.usermodel.*;\r\n    import org.apache.poi.poifs.filesystem.POIFSFileSystem;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.ss.util.CellRangeAddress;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n\r\n    public class ExcelConverter {\r\n\r\n\tprivate File path = null;\r\n\tprivate ArrayList&lt;File&gt; inputFiles = new ArrayList&lt;File&gt;();\r\n\tprivate HSSFWorkbook workbookOld = null;\r\n\tprivate XSSFWorkbook workbookNew = null;\r\n\tprivate int lastColumn = 0;\r\n\tprivate HashMap&lt;Integer, XSSFCellStyle&gt; styleMap = null;\r\n\r\n\tprivate void getInputFiles() {\r\n\t\tString call = &quot;getInputFiles &quot;;\r\n\t\tif (this.path.isFile()) {\r\n\t\t\tif (this.path.getAbsolutePath().endsWith(&quot;.xls&quot;)\r\n\t\t\t\t\t&amp;&amp; !new File(this.path.getAbsolutePath() + &quot;x&quot;).exists())\r\n\t\t\t\tthis.inputFiles.add(this.path);\r\n\t\t\telse {\r\n\t\t\t\tSystem.out\r\n\t\t\t\t\t\t.println(&quot;Datei endet nicht mit .xls oder XLSX-Datei existiert bereits&quot;);\r\n\t\t\t}\r\n\t\t} else\r\n\t\t\tfor (File f : this.path.listFiles(new FilenameFilter() {\r\n\t\t\t\t// anonyme innere Klasse\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic boolean accept(File dir, String name) {\r\n\t\t\t\t\tif (name.endsWith(&quot;.xls&quot;))\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t})) {\r\n\t\t\t\tif (!new File(f.getAbsoluteFile() + &quot;x&quot;).exists()) {\r\n\t\t\t\t\tthis.inputFiles.add(f);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\tSystem.out\r\n\t\t\t\t.println(call + &quot;Dateien gefunden: &quot; + this.inputFiles.size());\r\n\t\tSystem.out.println(call + &quot;abgeschlossen&quot;);\r\n\t}\r\n\r\n\tprivate HSSFWorkbook getWorkBook(File f) throws FileNotFoundException,\r\n\t\t\tIOException {\r\n\t\tSystem.out.println(&quot;getWorkBook lese &quot; + f.getAbsolutePath());\r\n\t\tPOIFSFileSystem fs = new POIFSFileSystem(new BufferedInputStream(\r\n\t\t\t\tnew FileInputStream(f)));\r\n\t\tHSSFWorkbook workbook = new HSSFWorkbook(fs);\r\n\t\tSystem.out.println(&quot;getWorkBook abgeschlossen&quot;);\r\n\t\treturn workbook;\r\n\t}\r\n\r\n\tprivate void transform() {\r\n\t\tString call = &quot;transform &quot;;\r\n\t\tSystem.out.println(call + &quot;Workbook&quot;);\r\n\t\tXSSFSheet sheetNew;\r\n\t\tHSSFSheet sheetOld;\r\n\t\tthis.workbookNew.setForceFormulaRecalculation(this.workbookOld\r\n\t\t\t\t.getForceFormulaRecalculation());\r\n\t\t// workbookNew.setHidden(workbookOld.isHidden()); //ST@03.05.2012 -\r\n\t\t// von Apache noch nicht implementiert\r\n\t\tthis.workbookNew.setMissingCellPolicy(this.workbookOld\r\n\t\t\t\t.getMissingCellPolicy());\r\n\r\n\t\tfor (int i = 0; i &lt; this.workbookOld.getNumberOfSheets(); i++) {\r\n\t\t\tsheetOld = this.workbookOld.getSheetAt(i);\r\n\t\t\tsheetNew = this.workbookNew.getSheet(sheetOld.getSheetName());\r\n\t\t\tSystem.out.println(call + &quot;Sheet erstellt: &quot;\r\n\t\t\t\t\t+ sheetOld.getSheetName());\r\n\t\t\tsheetNew = this.workbookNew.createSheet(sheetOld.getSheetName());\r\n\t\t\tthis.transform(sheetOld, sheetNew);\r\n\t\t}\r\n\t\tSystem.out.println(call + &quot;Anzahl verwendeter Styles: &quot;\r\n\t\t\t\t+ this.styleMap.size());\r\n\t\tSystem.out.println(call + &quot;abgeschlossen&quot;);\r\n\t}\r\n\r\n\tprivate void transform(HSSFSheet sheetOld, XSSFSheet sheetNew) {\r\n\t\tSystem.out.println(&quot;transform Sheet&quot;);\r\n\r\n\t\tsheetNew.setDisplayFormulas(sheetOld.isDisplayFormulas());\r\n\t\tsheetNew.setDisplayGridlines(sheetOld.isDisplayGridlines());\r\n\t\tsheetNew.setDisplayGuts(sheetOld.getDisplayGuts());\r\n\t\tsheetNew.setDisplayRowColHeadings(sheetOld.isDisplayRowColHeadings());\r\n\t\tsheetNew.setDisplayZeros(sheetOld.isDisplayZeros());\r\n\t\tsheetNew.setFitToPage(sheetOld.getFitToPage());\r\n\t\tsheetNew.setForceFormulaRecalculation(sheetOld\r\n\t\t\t\t.getForceFormulaRecalculation());\r\n\t\tsheetNew.setHorizontallyCenter(sheetOld.getHorizontallyCenter());\r\n\t\tsheetNew.setMargin(Sheet.BottomMargin,\r\n\t\t\t\tsheetOld.getMargin(Sheet.BottomMargin));\r\n\t\tsheetNew.setMargin(Sheet.FooterMargin,\r\n\t\t\t\tsheetOld.getMargin(Sheet.FooterMargin));\r\n\t\tsheetNew.setMargin(Sheet.HeaderMargin,\r\n\t\t\t\tsheetOld.getMargin(Sheet.HeaderMargin));\r\n\t\tsheetNew.setMargin(Sheet.LeftMargin,\r\n\t\t\t\tsheetOld.getMargin(Sheet.LeftMargin));\r\n\t\tsheetNew.setMargin(Sheet.RightMargin,\r\n\t\t\t\tsheetOld.getMargin(Sheet.RightMargin));\r\n\t\tsheetNew.setMargin(Sheet.TopMargin, sheetOld.getMargin(Sheet.TopMargin));\r\n\t\tsheetNew.setPrintGridlines(sheetNew.isPrintGridlines());\r\n\t\tsheetNew.setRightToLeft(sheetNew.isRightToLeft());\r\n\t\tsheetNew.setRowSumsBelow(sheetNew.getRowSumsBelow());\r\n\t\tsheetNew.setRowSumsRight(sheetNew.getRowSumsRight());\r\n\t\tsheetNew.setVerticallyCenter(sheetOld.getVerticallyCenter());\r\n\r\n\t\tXSSFRow rowNew;\r\n\t\tfor (Row row : sheetOld) {\r\n\t\t\trowNew = sheetNew.createRow(row.getRowNum());\r\n\t\t\tif (rowNew != null)\r\n\t\t\t\tthis.transform((HSSFRow) row, rowNew);\r\n\t\t}\r\n\r\n\t\tfor (int i = 0; i &lt; this.lastColumn; i++) {\r\n\t\t\tsheetNew.setColumnWidth(i, sheetOld.getColumnWidth(i));\r\n\t\t\tsheetNew.setColumnHidden(i, sheetOld.isColumnHidden(i));\r\n\t\t}\r\n\r\n\t\tfor (int i = 0; i &lt; sheetOld.getNumMergedRegions(); i++) {\r\n\t\t\tCellRangeAddress merged = sheetOld.getMergedRegion(i);\r\n\t\t\tsheetNew.addMergedRegion(merged);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void transform(HSSFRow rowOld, XSSFRow rowNew) {\r\n\t\tXSSFCell cellNew;\r\n\t\trowNew.setHeight(rowOld.getHeight());\r\n\t\tif (rowOld.getRowStyle() != null) {\r\n\t\t\tInteger hash = rowOld.getRowStyle().hashCode();\r\n\t\t\tif (!this.styleMap.containsKey(hash))\r\n\t\t\t\tthis.transform(hash, rowOld.getRowStyle(),\r\n\t\t\t\t\t\tthis.workbookNew.createCellStyle());\r\n\t\t\trowNew.setRowStyle(this.styleMap.get(hash));\r\n\t\t}\r\n\t\tfor (Cell cell : rowOld) {\r\n\t\t\tcellNew = rowNew.createCell(cell.getColumnIndex(),\r\n\t\t\t\t\tcell.getCellType());\r\n\t\t\tif (cellNew != null)\r\n\t\t\t\tthis.transform((HSSFCell) cell, cellNew);\r\n\t\t}\r\n\t\tthis.lastColumn = Math.max(this.lastColumn, rowOld.getLastCellNum());\r\n\t}\r\n\r\n\tprivate void transform(HSSFCell cellOld, XSSFCell cellNew) {\r\n\t\tcellNew.setCellComment(cellOld.getCellComment());\r\n\r\n\t\tInteger hash = cellOld.getCellStyle().hashCode();\r\n\t\tif (!this.styleMap.containsKey(hash)) {\r\n\t\t\tthis.transform(hash, cellOld.getCellStyle(),\r\n\t\t\t\t\tthis.workbookNew.createCellStyle());\r\n\t\t}\r\n\t\tcellNew.setCellStyle(this.styleMap.get(hash));\r\n\r\n\t\tswitch (cellOld.getCellType()) {\r\n\t\tcase Cell.CELL_TYPE_BLANK:\r\n\t\t\tbreak;\r\n\t\tcase Cell.CELL_TYPE_BOOLEAN:\r\n\t\t\tcellNew.setCellValue(cellOld.getBooleanCellValue());\r\n\t\t\tbreak;\r\n\t\tcase Cell.CELL_TYPE_ERROR:\r\n\t\t\tcellNew.setCellValue(cellOld.getErrorCellValue());\r\n\t\t\tbreak;\r\n\t\tcase Cell.CELL_TYPE_FORMULA:\r\n\t\t\tcellNew.setCellValue(cellOld.getCellFormula());\r\n\t\t\tbreak;\r\n\t\tcase Cell.CELL_TYPE_NUMERIC:\r\n\t\t\tcellNew.setCellValue(cellOld.getNumericCellValue());\r\n\t\t\tbreak;\r\n\t\tcase Cell.CELL_TYPE_STRING:\r\n\t\t\tcellNew.setCellValue(cellOld.getStringCellValue());\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tSystem.out.println(&quot;transform: Unbekannter Zellentyp &quot;\r\n\t\t\t\t\t+ cellOld.getCellType());\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void transform(Integer hash, HSSFCellStyle styleOld,\r\n\t\t\tXSSFCellStyle styleNew) {\r\n\t\tstyleNew.setAlignment(styleOld.getAlignment());\r\n\t\tstyleNew.setBorderBottom(styleOld.getBorderBottom());\r\n\t\tstyleNew.setBorderLeft(styleOld.getBorderLeft());\r\n\t\tstyleNew.setBorderRight(styleOld.getBorderRight());\r\n\t\tstyleNew.setBorderTop(styleOld.getBorderTop());\r\n\t\tstyleNew.setDataFormat(this.transform(styleOld.getDataFormat()));\r\n\t\tstyleNew.setFillBackgroundColor(styleOld.getFillBackgroundColor());\r\n\t\tstyleNew.setFillForegroundColor(styleOld.getFillForegroundColor());\r\n\t\tstyleNew.setFillPattern(styleOld.getFillPattern());\r\n\t\tstyleNew.setFont(this.transform(styleOld.getFont(this.workbookOld)));\r\n\t\tstyleNew.setHidden(styleOld.getHidden());\r\n\t\tstyleNew.setIndention(styleOld.getIndention());\r\n\t\tstyleNew.setLocked(styleOld.getLocked());\r\n\t\tstyleNew.setVerticalAlignment(styleOld.getVerticalAlignment());\r\n\t\tstyleNew.setWrapText(styleOld.getWrapText());\r\n\t\tthis.styleMap.put(hash, styleNew);\r\n\t}\r\n\r\n\tprivate short transform(short index) {\r\n\t\tDataFormat formatOld = this.workbookOld.createDataFormat();\r\n\t\tDataFormat formatNew = this.workbookNew.createDataFormat();\r\n\t\treturn formatNew.getFormat(formatOld.getFormat(index));\r\n\t}\r\n\r\n\tprivate XSSFFont transform(HSSFFont fontOld) {\r\n\t\tXSSFFont fontNew = this.workbookNew.createFont();\r\n\t\tfontNew.setBoldweight(fontOld.getBoldweight());\r\n\t\tfontNew.setCharSet(fontOld.getCharSet());\r\n\t\tfontNew.setColor(fontOld.getColor());\r\n\t\tfontNew.setFontName(fontOld.getFontName());\r\n\t\tfontNew.setFontHeight(fontOld.getFontHeight());\r\n\t\tfontNew.setItalic(fontOld.getItalic());\r\n\t\tfontNew.setStrikeout(fontOld.getStrikeout());\r\n\t\tfontNew.setTypeOffset(fontOld.getTypeOffset());\r\n\t\tfontNew.setUnderline(fontOld.getUnderline());\r\n\t\treturn fontNew;\r\n\t}\r\n    }\r\n","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<p><strong>Since all of the above answers don't help, here is working code:</strong></p>\n\n<p>Just write a main method that fills the necessary fields and uses transform().</p>\n\n<pre><code>package myStuff;\n\nimport java.io.*;\nimport java.util.*;\n\nimport org.apache.poi.hssf.usermodel.*;\nimport org.apache.poi.poifs.filesystem.POIFSFileSystem;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.CellRangeAddress;\nimport org.apache.poi.xssf.usermodel.*;\n\npublic class ExcelConverter {\n\nprivate File path = null;\nprivate ArrayList&lt;File&gt; inputFiles = new ArrayList&lt;File&gt;();\nprivate HSSFWorkbook workbookOld = null;\nprivate XSSFWorkbook workbookNew = null;\nprivate int lastColumn = 0;\nprivate HashMap&lt;Integer, XSSFCellStyle&gt; styleMap = null;\n\nprivate void getInputFiles() {\n    String call = \"getInputFiles \";\n    if (this.path.isFile()) {\n        if (this.path.getAbsolutePath().endsWith(\".xls\")\n                &amp;&amp; !new File(this.path.getAbsolutePath() + \"x\").exists())\n            this.inputFiles.add(this.path);\n        else {\n            System.out\n                    .println(\"Datei endet nicht mit .xls oder XLSX-Datei existiert bereits\");\n        }\n    } else\n        for (File f : this.path.listFiles(new FilenameFilter() {\n            // anonyme innere Klasse\n\n            @Override\n            public boolean accept(File dir, String name) {\n                if (name.endsWith(\".xls\"))\n                    return true;\n                return false;\n            }\n\n        })) {\n            if (!new File(f.getAbsoluteFile() + \"x\").exists()) {\n                this.inputFiles.add(f);\n            }\n        }\n    System.out\n            .println(call + \"Dateien gefunden: \" + this.inputFiles.size());\n    System.out.println(call + \"abgeschlossen\");\n}\n\nprivate HSSFWorkbook getWorkBook(File f) throws FileNotFoundException,\n        IOException {\n    System.out.println(\"getWorkBook lese \" + f.getAbsolutePath());\n    POIFSFileSystem fs = new POIFSFileSystem(new BufferedInputStream(\n            new FileInputStream(f)));\n    HSSFWorkbook workbook = new HSSFWorkbook(fs);\n    System.out.println(\"getWorkBook abgeschlossen\");\n    return workbook;\n}\n\nprivate void transform() {\n    String call = \"transform \";\n    System.out.println(call + \"Workbook\");\n    XSSFSheet sheetNew;\n    HSSFSheet sheetOld;\n    this.workbookNew.setForceFormulaRecalculation(this.workbookOld\n            .getForceFormulaRecalculation());\n    // workbookNew.setHidden(workbookOld.isHidden()); //ST@03.05.2012 -\n    // von Apache noch nicht implementiert\n    this.workbookNew.setMissingCellPolicy(this.workbookOld\n            .getMissingCellPolicy());\n\n    for (int i = 0; i &lt; this.workbookOld.getNumberOfSheets(); i++) {\n        sheetOld = this.workbookOld.getSheetAt(i);\n        sheetNew = this.workbookNew.getSheet(sheetOld.getSheetName());\n        System.out.println(call + \"Sheet erstellt: \"\n                + sheetOld.getSheetName());\n        sheetNew = this.workbookNew.createSheet(sheetOld.getSheetName());\n        this.transform(sheetOld, sheetNew);\n    }\n    System.out.println(call + \"Anzahl verwendeter Styles: \"\n            + this.styleMap.size());\n    System.out.println(call + \"abgeschlossen\");\n}\n\nprivate void transform(HSSFSheet sheetOld, XSSFSheet sheetNew) {\n    System.out.println(\"transform Sheet\");\n\n    sheetNew.setDisplayFormulas(sheetOld.isDisplayFormulas());\n    sheetNew.setDisplayGridlines(sheetOld.isDisplayGridlines());\n    sheetNew.setDisplayGuts(sheetOld.getDisplayGuts());\n    sheetNew.setDisplayRowColHeadings(sheetOld.isDisplayRowColHeadings());\n    sheetNew.setDisplayZeros(sheetOld.isDisplayZeros());\n    sheetNew.setFitToPage(sheetOld.getFitToPage());\n    sheetNew.setForceFormulaRecalculation(sheetOld\n            .getForceFormulaRecalculation());\n    sheetNew.setHorizontallyCenter(sheetOld.getHorizontallyCenter());\n    sheetNew.setMargin(Sheet.BottomMargin,\n            sheetOld.getMargin(Sheet.BottomMargin));\n    sheetNew.setMargin(Sheet.FooterMargin,\n            sheetOld.getMargin(Sheet.FooterMargin));\n    sheetNew.setMargin(Sheet.HeaderMargin,\n            sheetOld.getMargin(Sheet.HeaderMargin));\n    sheetNew.setMargin(Sheet.LeftMargin,\n            sheetOld.getMargin(Sheet.LeftMargin));\n    sheetNew.setMargin(Sheet.RightMargin,\n            sheetOld.getMargin(Sheet.RightMargin));\n    sheetNew.setMargin(Sheet.TopMargin, sheetOld.getMargin(Sheet.TopMargin));\n    sheetNew.setPrintGridlines(sheetNew.isPrintGridlines());\n    sheetNew.setRightToLeft(sheetNew.isRightToLeft());\n    sheetNew.setRowSumsBelow(sheetNew.getRowSumsBelow());\n    sheetNew.setRowSumsRight(sheetNew.getRowSumsRight());\n    sheetNew.setVerticallyCenter(sheetOld.getVerticallyCenter());\n\n    XSSFRow rowNew;\n    for (Row row : sheetOld) {\n        rowNew = sheetNew.createRow(row.getRowNum());\n        if (rowNew != null)\n            this.transform((HSSFRow) row, rowNew);\n    }\n\n    for (int i = 0; i &lt; this.lastColumn; i++) {\n        sheetNew.setColumnWidth(i, sheetOld.getColumnWidth(i));\n        sheetNew.setColumnHidden(i, sheetOld.isColumnHidden(i));\n    }\n\n    for (int i = 0; i &lt; sheetOld.getNumMergedRegions(); i++) {\n        CellRangeAddress merged = sheetOld.getMergedRegion(i);\n        sheetNew.addMergedRegion(merged);\n    }\n}\n\nprivate void transform(HSSFRow rowOld, XSSFRow rowNew) {\n    XSSFCell cellNew;\n    rowNew.setHeight(rowOld.getHeight());\n    if (rowOld.getRowStyle() != null) {\n        Integer hash = rowOld.getRowStyle().hashCode();\n        if (!this.styleMap.containsKey(hash))\n            this.transform(hash, rowOld.getRowStyle(),\n                    this.workbookNew.createCellStyle());\n        rowNew.setRowStyle(this.styleMap.get(hash));\n    }\n    for (Cell cell : rowOld) {\n        cellNew = rowNew.createCell(cell.getColumnIndex(),\n                cell.getCellType());\n        if (cellNew != null)\n            this.transform((HSSFCell) cell, cellNew);\n    }\n    this.lastColumn = Math.max(this.lastColumn, rowOld.getLastCellNum());\n}\n\nprivate void transform(HSSFCell cellOld, XSSFCell cellNew) {\n    cellNew.setCellComment(cellOld.getCellComment());\n\n    Integer hash = cellOld.getCellStyle().hashCode();\n    if (!this.styleMap.containsKey(hash)) {\n        this.transform(hash, cellOld.getCellStyle(),\n                this.workbookNew.createCellStyle());\n    }\n    cellNew.setCellStyle(this.styleMap.get(hash));\n\n    switch (cellOld.getCellType()) {\n    case Cell.CELL_TYPE_BLANK:\n        break;\n    case Cell.CELL_TYPE_BOOLEAN:\n        cellNew.setCellValue(cellOld.getBooleanCellValue());\n        break;\n    case Cell.CELL_TYPE_ERROR:\n        cellNew.setCellValue(cellOld.getErrorCellValue());\n        break;\n    case Cell.CELL_TYPE_FORMULA:\n        cellNew.setCellValue(cellOld.getCellFormula());\n        break;\n    case Cell.CELL_TYPE_NUMERIC:\n        cellNew.setCellValue(cellOld.getNumericCellValue());\n        break;\n    case Cell.CELL_TYPE_STRING:\n        cellNew.setCellValue(cellOld.getStringCellValue());\n        break;\n    default:\n        System.out.println(\"transform: Unbekannter Zellentyp \"\n                + cellOld.getCellType());\n    }\n}\n\nprivate void transform(Integer hash, HSSFCellStyle styleOld,\n        XSSFCellStyle styleNew) {\n    styleNew.setAlignment(styleOld.getAlignment());\n    styleNew.setBorderBottom(styleOld.getBorderBottom());\n    styleNew.setBorderLeft(styleOld.getBorderLeft());\n    styleNew.setBorderRight(styleOld.getBorderRight());\n    styleNew.setBorderTop(styleOld.getBorderTop());\n    styleNew.setDataFormat(this.transform(styleOld.getDataFormat()));\n    styleNew.setFillBackgroundColor(styleOld.getFillBackgroundColor());\n    styleNew.setFillForegroundColor(styleOld.getFillForegroundColor());\n    styleNew.setFillPattern(styleOld.getFillPattern());\n    styleNew.setFont(this.transform(styleOld.getFont(this.workbookOld)));\n    styleNew.setHidden(styleOld.getHidden());\n    styleNew.setIndention(styleOld.getIndention());\n    styleNew.setLocked(styleOld.getLocked());\n    styleNew.setVerticalAlignment(styleOld.getVerticalAlignment());\n    styleNew.setWrapText(styleOld.getWrapText());\n    this.styleMap.put(hash, styleNew);\n}\n\nprivate short transform(short index) {\n    DataFormat formatOld = this.workbookOld.createDataFormat();\n    DataFormat formatNew = this.workbookNew.createDataFormat();\n    return formatNew.getFormat(formatOld.getFormat(index));\n}\n\nprivate XSSFFont transform(HSSFFont fontOld) {\n    XSSFFont fontNew = this.workbookNew.createFont();\n    fontNew.setBoldweight(fontOld.getBoldweight());\n    fontNew.setCharSet(fontOld.getCharSet());\n    fontNew.setColor(fontOld.getColor());\n    fontNew.setFontName(fontOld.getFontName());\n    fontNew.setFontHeight(fontOld.getFontHeight());\n    fontNew.setItalic(fontOld.getItalic());\n    fontNew.setStrikeout(fontOld.getStrikeout());\n    fontNew.setTypeOffset(fontOld.getTypeOffset());\n    fontNew.setUnderline(fontOld.getUnderline());\n    return fontNew;\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3543350,"reputation":81,"user_id":2959916,"display_name":"Indranil Nag"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1383732345,"creation_date":1383732345,"answer_id":19809118,"question_id":7230819,"body_markdown":"    //Added xbean-2.3.0.jar/xmlbeans-2.3.0.jar,poi-ooxml-3.7-20101029.jarpoi-ooxml-schemas-3.7-beta1.jar,\r\n    \r\n    \r\n    import java.io.*;\r\n    import java.util.*;\r\n    \r\n    import org.apache.poi.hssf.usermodel.*;\r\n    import org.apache.poi.poifs.filesystem.POIFSFileSystem;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.ss.util.CellRangeAddress;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    \r\n    public class Xlsx2Xls {\r\n    \r\n    private File path = new File(&quot;c:/Integration-TestCases.xls&quot;);\r\n    private ArrayList&lt;File&gt; inputFiles = new ArrayList&lt;File&gt;();\r\n    \r\n    private int lastColumn = 0;\r\n    private HashMap&lt;Integer, HSSFCellStyle&gt; styleMap = new HashMap();\r\n    \r\n    private void getInputFiles() {\r\n        String call = &quot;getInputFiles &quot;;\r\n        if (this.path.isFile()) {\r\n            if (this.path.getAbsolutePath().endsWith(&quot;.xls&quot;)\r\n                    &amp;&amp; !new File(this.path.getAbsolutePath() + &quot;x&quot;).exists())\r\n                this.inputFiles.add(this.path);\r\n            else {\r\n                System.out\r\n                        .println(&quot;Datei endet nicht mit .xls oder XLSX-Datei existiert bereits&quot;);\r\n            }\r\n        } else\r\n            for (File f : this.path.listFiles(new FilenameFilter() {\r\n                // anonyme innere Klasse\r\n    \r\n                @Override\r\n                public boolean accept(File dir, String name) {\r\n                    if (name.endsWith(&quot;.xls&quot;))\r\n                        return true;\r\n                    return false;\r\n                }\r\n    \r\n            })) {\r\n                if (!new File(f.getAbsoluteFile() + &quot;x&quot;).exists()) {\r\n                    this.inputFiles.add(f);\r\n                }\r\n            }\r\n        System.out\r\n                .println(call + &quot;Dateien gefunden: &quot; + this.inputFiles.size());\r\n        System.out.println(call + &quot;abgeschlossen&quot;);\r\n    }\r\n    \r\n    private HSSFWorkbook getWorkBook(File f) throws FileNotFoundException,\r\n            IOException {\r\n        System.out.println(&quot;getWorkBook lese &quot; + f.getAbsolutePath());\r\n        POIFSFileSystem fs = new POIFSFileSystem(new BufferedInputStream(\r\n                new FileInputStream(f)));\r\n        HSSFWorkbook workbook = new HSSFWorkbook(fs);\r\n        System.out.println(&quot;getWorkBook abgeschlossen&quot;);\r\n        return workbook;\r\n    }\r\n    \r\n    private void transformXSSF(XSSFWorkbook workbookOld ,HSSFWorkbook workbookNew) {\r\n        String call = &quot;transform &quot;;\r\n        System.out.println(call + &quot;Workbook&quot;);\r\n        HSSFSheet sheetNew;\r\n        XSSFSheet sheetOld;\r\n        //TODO::workbookNew.setForceFormulaRecalculation(workbookOld.getForceFormulaRecalculation());\r\n        // workbookNew.setHidden(workbookOld.isHidden()); //ST@03.05.2012 -\r\n        // von Apache noch nicht implementiert\r\n        workbookNew.setMissingCellPolicy(workbookOld.getMissingCellPolicy());\r\n    \r\n        for (int i = 0; i &lt; workbookOld.getNumberOfSheets(); i++) {\r\n            sheetOld =  workbookOld.getSheetAt(i);\r\n            sheetNew = workbookNew.getSheet(sheetOld.getSheetName());\r\n            System.out.println(call + &quot;Sheet Name: &quot; + sheetOld.getSheetName());\r\n            sheetNew = workbookNew.createSheet(sheetOld.getSheetName());\r\n            this.transform(workbookOld,workbookNew,sheetOld, sheetNew);\r\n        }\r\n        System.out.println(call + &quot;Styles size: &quot;        + this.styleMap.size());\r\n        System.out.println(call + &quot;abgeschlossen&quot;);\r\n    }\r\n    \r\n    \r\n    \r\n        private void transform(XSSFWorkbook workbookOld ,HSSFWorkbook workbookNew,XSSFSheet sheetOld, HSSFSheet sheetNew) {\r\n            System.out.println(&quot;transform Sheet&quot;);\r\n    \r\n            sheetNew.setDisplayFormulas(sheetOld.isDisplayFormulas());\r\n            sheetNew.setDisplayGridlines(sheetOld.isDisplayGridlines());\r\n            sheetNew.setDisplayGuts(sheetOld.getDisplayGuts());\r\n            sheetNew.setDisplayRowColHeadings(sheetOld.isDisplayRowColHeadings());\r\n            sheetNew.setDisplayZeros(sheetOld.isDisplayZeros());\r\n            sheetNew.setFitToPage(sheetOld.getFitToPage());\r\n            //\r\n            //TODO::sheetNew.setForceFormulaRecalculation(sheetOld.getForceFormulaRecalculation());\r\n            sheetNew.setHorizontallyCenter(sheetOld.getHorizontallyCenter());\r\n            sheetNew.setMargin(Sheet.BottomMargin,\r\n                    sheetOld.getMargin(Sheet.BottomMargin));\r\n            sheetNew.setMargin(Sheet.FooterMargin,\r\n                    sheetOld.getMargin(Sheet.FooterMargin));\r\n            sheetNew.setMargin(Sheet.HeaderMargin,\r\n                    sheetOld.getMargin(Sheet.HeaderMargin));\r\n            sheetNew.setMargin(Sheet.LeftMargin,\r\n                    sheetOld.getMargin(Sheet.LeftMargin));\r\n            sheetNew.setMargin(Sheet.RightMargin,\r\n                    sheetOld.getMargin(Sheet.RightMargin));\r\n            sheetNew.setMargin(Sheet.TopMargin, sheetOld.getMargin(Sheet.TopMargin));\r\n            sheetNew.setPrintGridlines(sheetNew.isPrintGridlines());\r\n            sheetNew.setRightToLeft(sheetNew.isRightToLeft());\r\n            sheetNew.setRowSumsBelow(sheetNew.getRowSumsBelow());\r\n            sheetNew.setRowSumsRight(sheetNew.getRowSumsRight());\r\n            sheetNew.setVerticallyCenter(sheetOld.getVerticallyCenter());\r\n    \r\n            HSSFRow rowNew;\r\n            for (Row row : sheetOld) {\r\n                rowNew = sheetNew.createRow(row.getRowNum());\r\n                if (rowNew != null)\r\n                    this.transform(workbookOld,workbookNew,(XSSFRow) row, rowNew);\r\n            }\r\n    \r\n            for (int i = 0; i &lt; this.lastColumn; i++) {\r\n                sheetNew.setColumnWidth(i, sheetOld.getColumnWidth(i));\r\n                sheetNew.setColumnHidden(i, sheetOld.isColumnHidden(i));\r\n            }\r\n    \r\n            for (int i = 0; i &lt; sheetOld.getNumMergedRegions(); i++) {\r\n                CellRangeAddress merged = sheetOld.getMergedRegion(i);\r\n                sheetNew.addMergedRegion(merged);\r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n        private void transform(XSSFWorkbook workbookOld ,HSSFWorkbook workbookNew,XSSFRow rowOld, HSSFRow rowNew) {\r\n            HSSFCell cellNew;\r\n            rowNew.setHeight(rowOld.getHeight());\r\n            //TODO::if (rowOld.getRowStyle() != null) {\r\n                /*Integer hash = rowOld.getRowStyle().hashCode();\r\n                if (!this.styleMap.containsKey(hash))\r\n                    this.transform(workbookOld,workbookNew,hash, (XSSFCellStyle)rowOld.getRowStyle(),(HSSFCellStyle)workbookNew.createCellStyle());\r\n                rowNew.setRowStyle(this.styleMap.get(hash));\r\n            }*/\r\n            for (Cell cell : rowOld) {\r\n                cellNew = rowNew.createCell(cell.getColumnIndex(),\r\n                        cell.getCellType());\r\n                if (cellNew != null)\r\n                    this.transform(workbookOld,workbookNew,(XSSFCell) cell, cellNew);\r\n            }\r\n            this.lastColumn = Math.max(this.lastColumn, rowOld.getLastCellNum());\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n        private void transform(XSSFWorkbook workbookOld,HSSFWorkbook workbookNew,XSSFCell cellOld, HSSFCell cellNew) {\r\n            cellNew.setCellComment(cellOld.getCellComment());\r\n        \r\n            Integer hash = cellOld.getCellStyle().hashCode();\r\n            if (this.styleMap!=null &amp;&amp; !this.styleMap.containsKey(hash)) {\r\n                this.transform(workbookOld,workbookNew,hash, cellOld.getCellStyle(),(HSSFCellStyle)workbookNew.createCellStyle());\r\n            }\r\n            cellNew.setCellStyle(this.styleMap.get(hash));\r\n    \r\n            switch (cellOld.getCellType()) {\r\n            case Cell.CELL_TYPE_BLANK:\r\n                break;\r\n            case Cell.CELL_TYPE_BOOLEAN:\r\n                cellNew.setCellValue(cellOld.getBooleanCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_ERROR:\r\n                cellNew.setCellValue(cellOld.getErrorCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_FORMULA:\r\n                cellNew.setCellValue(cellOld.getCellFormula());\r\n                break;\r\n            case Cell.CELL_TYPE_NUMERIC:\r\n                cellNew.setCellValue(cellOld.getNumericCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_STRING:\r\n                cellNew.setCellValue(cellOld.getStringCellValue());\r\n                break;\r\n            default:\r\n                System.out.println(&quot;transform: Unbekannter Zellentyp &quot;\r\n                        + cellOld.getCellType());\r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n        private void transform(XSSFWorkbook workbookOld,HSSFWorkbook workbookNew,Integer hash, XSSFCellStyle styleOld,\r\n                HSSFCellStyle styleNew) {\r\n            styleNew.setAlignment(styleOld.getAlignment());\r\n            styleNew.setBorderBottom(styleOld.getBorderBottom());\r\n            styleNew.setBorderLeft(styleOld.getBorderLeft());\r\n            styleNew.setBorderRight(styleOld.getBorderRight());\r\n            styleNew.setBorderTop(styleOld.getBorderTop());\r\n             styleNew.setDataFormat(this.transform( workbookOld, workbookNew,styleOld.getDataFormat()));\r\n            styleNew.setFillBackgroundColor(styleOld.getFillBackgroundColor());\r\n            styleNew.setFillForegroundColor(styleOld.getFillForegroundColor());\r\n            styleNew.setFillPattern(styleOld.getFillPattern());\r\n            styleNew.setFont(this.transform(workbookNew,(XSSFFont)styleOld.getFont()));\r\n            styleNew.setHidden(styleOld.getHidden());\r\n            styleNew.setIndention(styleOld.getIndention());\r\n            styleNew.setLocked(styleOld.getLocked());\r\n            styleNew.setVerticalAlignment(styleOld.getVerticalAlignment());\r\n            styleNew.setWrapText(styleOld.getWrapText());\r\n            this.styleMap.put(hash, styleNew);\r\n        }\r\n    \r\n    private short transform(XSSFWorkbook workbookOld,HSSFWorkbook workbookNew,short index) {\r\n        DataFormat formatOld = workbookOld.createDataFormat();\r\n        DataFormat formatNew = workbookNew.createDataFormat();\r\n        return formatNew.getFormat(formatOld.getFormat(index));\r\n    }\r\n    \r\n    \r\n        private HSSFFont transform(HSSFWorkbook workbookNew,XSSFFont fontOld) {\r\n            HSSFFont fontNew = workbookNew.createFont();\r\n            fontNew.setBoldweight(fontOld.getBoldweight());\r\n            fontNew.setCharSet(fontOld.getCharSet());\r\n            fontNew.setColor(fontOld.getColor());\r\n            fontNew.setFontName(fontOld.getFontName());\r\n            fontNew.setFontHeight(fontOld.getFontHeight());\r\n            fontNew.setItalic(fontOld.getItalic());\r\n            fontNew.setStrikeout(fontOld.getStrikeout());\r\n            fontNew.setTypeOffset(fontOld.getTypeOffset());\r\n            fontNew.setUnderline(fontOld.getUnderline());\r\n            return fontNew;\r\n        }\r\n    \r\n    public static void main(String[] args) throws Exception{\r\n        Xlsx2Xls xls=new Xlsx2Xls(); \r\n        //xls.transform();\r\n         InputStream isXlsx = new FileInputStream(&quot;c:/OTD.xlsx&quot;);\r\n         XSSFWorkbook workbookOld     = new XSSFWorkbook(isXlsx);\r\n         \r\n        String dest=&quot;c:/OTD1.xls&quot;;\r\n    \r\n        FileOutputStream out = new FileOutputStream(dest);\r\n        HSSFWorkbook workbookNew = new HSSFWorkbook();\r\n        xls.transformXSSF( workbookOld , workbookNew) ;    \r\n        workbookNew.write(out);\r\n    \r\n        out.close();\r\n         \r\n    //    InputStream isXls = new FileInputStream(&quot;c:/OTD1.xls&quot;);\r\n    //    HSSFWorkbook workbookNew     = new HSSFWorkbook(isXls);\r\n        \r\n    \r\n    \r\n    }\r\n    }","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<pre><code>//Added xbean-2.3.0.jar/xmlbeans-2.3.0.jar,poi-ooxml-3.7-20101029.jarpoi-ooxml-schemas-3.7-beta1.jar,\n\n\nimport java.io.*;\nimport java.util.*;\n\nimport org.apache.poi.hssf.usermodel.*;\nimport org.apache.poi.poifs.filesystem.POIFSFileSystem;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.CellRangeAddress;\nimport org.apache.poi.xssf.usermodel.*;\n\npublic class Xlsx2Xls {\n\nprivate File path = new File(\"c:/Integration-TestCases.xls\");\nprivate ArrayList&lt;File&gt; inputFiles = new ArrayList&lt;File&gt;();\n\nprivate int lastColumn = 0;\nprivate HashMap&lt;Integer, HSSFCellStyle&gt; styleMap = new HashMap();\n\nprivate void getInputFiles() {\n    String call = \"getInputFiles \";\n    if (this.path.isFile()) {\n        if (this.path.getAbsolutePath().endsWith(\".xls\")\n                &amp;&amp; !new File(this.path.getAbsolutePath() + \"x\").exists())\n            this.inputFiles.add(this.path);\n        else {\n            System.out\n                    .println(\"Datei endet nicht mit .xls oder XLSX-Datei existiert bereits\");\n        }\n    } else\n        for (File f : this.path.listFiles(new FilenameFilter() {\n            // anonyme innere Klasse\n\n            @Override\n            public boolean accept(File dir, String name) {\n                if (name.endsWith(\".xls\"))\n                    return true;\n                return false;\n            }\n\n        })) {\n            if (!new File(f.getAbsoluteFile() + \"x\").exists()) {\n                this.inputFiles.add(f);\n            }\n        }\n    System.out\n            .println(call + \"Dateien gefunden: \" + this.inputFiles.size());\n    System.out.println(call + \"abgeschlossen\");\n}\n\nprivate HSSFWorkbook getWorkBook(File f) throws FileNotFoundException,\n        IOException {\n    System.out.println(\"getWorkBook lese \" + f.getAbsolutePath());\n    POIFSFileSystem fs = new POIFSFileSystem(new BufferedInputStream(\n            new FileInputStream(f)));\n    HSSFWorkbook workbook = new HSSFWorkbook(fs);\n    System.out.println(\"getWorkBook abgeschlossen\");\n    return workbook;\n}\n\nprivate void transformXSSF(XSSFWorkbook workbookOld ,HSSFWorkbook workbookNew) {\n    String call = \"transform \";\n    System.out.println(call + \"Workbook\");\n    HSSFSheet sheetNew;\n    XSSFSheet sheetOld;\n    //TODO::workbookNew.setForceFormulaRecalculation(workbookOld.getForceFormulaRecalculation());\n    // workbookNew.setHidden(workbookOld.isHidden()); //ST@03.05.2012 -\n    // von Apache noch nicht implementiert\n    workbookNew.setMissingCellPolicy(workbookOld.getMissingCellPolicy());\n\n    for (int i = 0; i &lt; workbookOld.getNumberOfSheets(); i++) {\n        sheetOld =  workbookOld.getSheetAt(i);\n        sheetNew = workbookNew.getSheet(sheetOld.getSheetName());\n        System.out.println(call + \"Sheet Name: \" + sheetOld.getSheetName());\n        sheetNew = workbookNew.createSheet(sheetOld.getSheetName());\n        this.transform(workbookOld,workbookNew,sheetOld, sheetNew);\n    }\n    System.out.println(call + \"Styles size: \"        + this.styleMap.size());\n    System.out.println(call + \"abgeschlossen\");\n}\n\n\n\n    private void transform(XSSFWorkbook workbookOld ,HSSFWorkbook workbookNew,XSSFSheet sheetOld, HSSFSheet sheetNew) {\n        System.out.println(\"transform Sheet\");\n\n        sheetNew.setDisplayFormulas(sheetOld.isDisplayFormulas());\n        sheetNew.setDisplayGridlines(sheetOld.isDisplayGridlines());\n        sheetNew.setDisplayGuts(sheetOld.getDisplayGuts());\n        sheetNew.setDisplayRowColHeadings(sheetOld.isDisplayRowColHeadings());\n        sheetNew.setDisplayZeros(sheetOld.isDisplayZeros());\n        sheetNew.setFitToPage(sheetOld.getFitToPage());\n        //\n        //TODO::sheetNew.setForceFormulaRecalculation(sheetOld.getForceFormulaRecalculation());\n        sheetNew.setHorizontallyCenter(sheetOld.getHorizontallyCenter());\n        sheetNew.setMargin(Sheet.BottomMargin,\n                sheetOld.getMargin(Sheet.BottomMargin));\n        sheetNew.setMargin(Sheet.FooterMargin,\n                sheetOld.getMargin(Sheet.FooterMargin));\n        sheetNew.setMargin(Sheet.HeaderMargin,\n                sheetOld.getMargin(Sheet.HeaderMargin));\n        sheetNew.setMargin(Sheet.LeftMargin,\n                sheetOld.getMargin(Sheet.LeftMargin));\n        sheetNew.setMargin(Sheet.RightMargin,\n                sheetOld.getMargin(Sheet.RightMargin));\n        sheetNew.setMargin(Sheet.TopMargin, sheetOld.getMargin(Sheet.TopMargin));\n        sheetNew.setPrintGridlines(sheetNew.isPrintGridlines());\n        sheetNew.setRightToLeft(sheetNew.isRightToLeft());\n        sheetNew.setRowSumsBelow(sheetNew.getRowSumsBelow());\n        sheetNew.setRowSumsRight(sheetNew.getRowSumsRight());\n        sheetNew.setVerticallyCenter(sheetOld.getVerticallyCenter());\n\n        HSSFRow rowNew;\n        for (Row row : sheetOld) {\n            rowNew = sheetNew.createRow(row.getRowNum());\n            if (rowNew != null)\n                this.transform(workbookOld,workbookNew,(XSSFRow) row, rowNew);\n        }\n\n        for (int i = 0; i &lt; this.lastColumn; i++) {\n            sheetNew.setColumnWidth(i, sheetOld.getColumnWidth(i));\n            sheetNew.setColumnHidden(i, sheetOld.isColumnHidden(i));\n        }\n\n        for (int i = 0; i &lt; sheetOld.getNumMergedRegions(); i++) {\n            CellRangeAddress merged = sheetOld.getMergedRegion(i);\n            sheetNew.addMergedRegion(merged);\n        }\n    }\n\n\n\n    private void transform(XSSFWorkbook workbookOld ,HSSFWorkbook workbookNew,XSSFRow rowOld, HSSFRow rowNew) {\n        HSSFCell cellNew;\n        rowNew.setHeight(rowOld.getHeight());\n        //TODO::if (rowOld.getRowStyle() != null) {\n            /*Integer hash = rowOld.getRowStyle().hashCode();\n            if (!this.styleMap.containsKey(hash))\n                this.transform(workbookOld,workbookNew,hash, (XSSFCellStyle)rowOld.getRowStyle(),(HSSFCellStyle)workbookNew.createCellStyle());\n            rowNew.setRowStyle(this.styleMap.get(hash));\n        }*/\n        for (Cell cell : rowOld) {\n            cellNew = rowNew.createCell(cell.getColumnIndex(),\n                    cell.getCellType());\n            if (cellNew != null)\n                this.transform(workbookOld,workbookNew,(XSSFCell) cell, cellNew);\n        }\n        this.lastColumn = Math.max(this.lastColumn, rowOld.getLastCellNum());\n    }\n\n\n\n\n    private void transform(XSSFWorkbook workbookOld,HSSFWorkbook workbookNew,XSSFCell cellOld, HSSFCell cellNew) {\n        cellNew.setCellComment(cellOld.getCellComment());\n\n        Integer hash = cellOld.getCellStyle().hashCode();\n        if (this.styleMap!=null &amp;&amp; !this.styleMap.containsKey(hash)) {\n            this.transform(workbookOld,workbookNew,hash, cellOld.getCellStyle(),(HSSFCellStyle)workbookNew.createCellStyle());\n        }\n        cellNew.setCellStyle(this.styleMap.get(hash));\n\n        switch (cellOld.getCellType()) {\n        case Cell.CELL_TYPE_BLANK:\n            break;\n        case Cell.CELL_TYPE_BOOLEAN:\n            cellNew.setCellValue(cellOld.getBooleanCellValue());\n            break;\n        case Cell.CELL_TYPE_ERROR:\n            cellNew.setCellValue(cellOld.getErrorCellValue());\n            break;\n        case Cell.CELL_TYPE_FORMULA:\n            cellNew.setCellValue(cellOld.getCellFormula());\n            break;\n        case Cell.CELL_TYPE_NUMERIC:\n            cellNew.setCellValue(cellOld.getNumericCellValue());\n            break;\n        case Cell.CELL_TYPE_STRING:\n            cellNew.setCellValue(cellOld.getStringCellValue());\n            break;\n        default:\n            System.out.println(\"transform: Unbekannter Zellentyp \"\n                    + cellOld.getCellType());\n        }\n    }\n\n\n\n\n    private void transform(XSSFWorkbook workbookOld,HSSFWorkbook workbookNew,Integer hash, XSSFCellStyle styleOld,\n            HSSFCellStyle styleNew) {\n        styleNew.setAlignment(styleOld.getAlignment());\n        styleNew.setBorderBottom(styleOld.getBorderBottom());\n        styleNew.setBorderLeft(styleOld.getBorderLeft());\n        styleNew.setBorderRight(styleOld.getBorderRight());\n        styleNew.setBorderTop(styleOld.getBorderTop());\n         styleNew.setDataFormat(this.transform( workbookOld, workbookNew,styleOld.getDataFormat()));\n        styleNew.setFillBackgroundColor(styleOld.getFillBackgroundColor());\n        styleNew.setFillForegroundColor(styleOld.getFillForegroundColor());\n        styleNew.setFillPattern(styleOld.getFillPattern());\n        styleNew.setFont(this.transform(workbookNew,(XSSFFont)styleOld.getFont()));\n        styleNew.setHidden(styleOld.getHidden());\n        styleNew.setIndention(styleOld.getIndention());\n        styleNew.setLocked(styleOld.getLocked());\n        styleNew.setVerticalAlignment(styleOld.getVerticalAlignment());\n        styleNew.setWrapText(styleOld.getWrapText());\n        this.styleMap.put(hash, styleNew);\n    }\n\nprivate short transform(XSSFWorkbook workbookOld,HSSFWorkbook workbookNew,short index) {\n    DataFormat formatOld = workbookOld.createDataFormat();\n    DataFormat formatNew = workbookNew.createDataFormat();\n    return formatNew.getFormat(formatOld.getFormat(index));\n}\n\n\n    private HSSFFont transform(HSSFWorkbook workbookNew,XSSFFont fontOld) {\n        HSSFFont fontNew = workbookNew.createFont();\n        fontNew.setBoldweight(fontOld.getBoldweight());\n        fontNew.setCharSet(fontOld.getCharSet());\n        fontNew.setColor(fontOld.getColor());\n        fontNew.setFontName(fontOld.getFontName());\n        fontNew.setFontHeight(fontOld.getFontHeight());\n        fontNew.setItalic(fontOld.getItalic());\n        fontNew.setStrikeout(fontOld.getStrikeout());\n        fontNew.setTypeOffset(fontOld.getTypeOffset());\n        fontNew.setUnderline(fontOld.getUnderline());\n        return fontNew;\n    }\n\npublic static void main(String[] args) throws Exception{\n    Xlsx2Xls xls=new Xlsx2Xls(); \n    //xls.transform();\n     InputStream isXlsx = new FileInputStream(\"c:/OTD.xlsx\");\n     XSSFWorkbook workbookOld     = new XSSFWorkbook(isXlsx);\n\n    String dest=\"c:/OTD1.xls\";\n\n    FileOutputStream out = new FileOutputStream(dest);\n    HSSFWorkbook workbookNew = new HSSFWorkbook();\n    xls.transformXSSF( workbookOld , workbookNew) ;    \n    workbookNew.write(out);\n\n    out.close();\n\n//    InputStream isXls = new FileInputStream(\"c:/OTD1.xls\");\n//    HSSFWorkbook workbookNew     = new HSSFWorkbook(isXls);\n\n\n\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3543350,"reputation":81,"user_id":2959916,"display_name":"Indranil Nag"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1383734382,"creation_date":1383734382,"answer_id":19809861,"question_id":7230819,"body_markdown":"    //Added xbean-2.3.0.jar/xmlbeans-2.3.0.jar,poi-ooxml-3.7-20101029.jarpoi-ooxml-schemas-3.7-beta1.jar,\r\n    import java.io.*;\r\n    import java.util.*;\r\n    \r\n    import org.apache.poi.hssf.usermodel.*;\r\n    import org.apache.poi.poifs.filesystem.POIFSFileSystem;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.ss.util.CellRangeAddress;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    \r\n    public class Xls2Xlsx {\r\n    \r\n    private File path = new File(&quot;c:/Integration-TestCases.xls&quot;);\r\n    private ArrayList&lt;File&gt; inputFiles = new ArrayList&lt;File&gt;();\r\n    \r\n    private int lastColumn = 0;\r\n    private HashMap&lt;Integer, XSSFCellStyle&gt; styleMap = new HashMap();\r\n    \r\n    private void getInputFiles() {\r\n        String call = &quot;getInputFiles &quot;;\r\n        if (this.path.isFile()) {\r\n            if (this.path.getAbsolutePath().endsWith(&quot;.xls&quot;)\r\n                    &amp;&amp; !new File(this.path.getAbsolutePath() + &quot;x&quot;).exists())\r\n                this.inputFiles.add(this.path);\r\n            else {\r\n                System.out\r\n                        .println(&quot;Datei endet nicht mit .xls oder XLSX-Datei existiert bereits&quot;);\r\n            }\r\n        } else\r\n            for (File f : this.path.listFiles(new FilenameFilter() {\r\n                // anonyme innere Klasse\r\n    \r\n                @Override\r\n                public boolean accept(File dir, String name) {\r\n                    if (name.endsWith(&quot;.xls&quot;))\r\n                        return true;\r\n                    return false;\r\n                }\r\n    \r\n            })) {\r\n                if (!new File(f.getAbsoluteFile() + &quot;x&quot;).exists()) {\r\n                    this.inputFiles.add(f);\r\n                }\r\n            }\r\n        System.out\r\n                .println(call + &quot;Dateien gefunden: &quot; + this.inputFiles.size());\r\n        System.out.println(call + &quot;abgeschlossen&quot;);\r\n    }\r\n    \r\n    private HSSFWorkbook getWorkBook(File f) throws FileNotFoundException,\r\n            IOException {\r\n        System.out.println(&quot;getWorkBook lese &quot; + f.getAbsolutePath());\r\n        POIFSFileSystem fs = new POIFSFileSystem(new BufferedInputStream(\r\n                new FileInputStream(f)));\r\n        HSSFWorkbook workbook = new HSSFWorkbook(fs);\r\n        System.out.println(&quot;getWorkBook abgeschlossen&quot;);\r\n        return workbook;\r\n    }\r\n    \r\n    private void transformHSSF(HSSFWorkbook workbookOld ,XSSFWorkbook workbookNew) {\r\n        String call = &quot;transform &quot;;\r\n        System.out.println(call + &quot;Workbook&quot;);\r\n        XSSFSheet sheetNew;\r\n        HSSFSheet sheetOld;\r\n        //TODO::workbookNew.setForceFormulaRecalculation(workbookOld.getForceFormulaRecalculation());\r\n        // workbookNew.setHidden(workbookOld.isHidden()); //ST@03.05.2012 -\r\n        // von Apache noch nicht implementiert\r\n        workbookNew.setMissingCellPolicy(workbookOld.getMissingCellPolicy());\r\n    \r\n        for (int i = 0; i &lt; workbookOld.getNumberOfSheets(); i++) {\r\n            sheetOld =  workbookOld.getSheetAt(i);\r\n            sheetNew = workbookNew.getSheet(sheetOld.getSheetName());\r\n            System.out.println(call + &quot;Sheet Name: &quot; + sheetOld.getSheetName());\r\n            sheetNew = workbookNew.createSheet(sheetOld.getSheetName());\r\n            this.transform(workbookOld,workbookNew,sheetOld, sheetNew);\r\n        }\r\n        System.out.println(call + &quot;Styles size: &quot;        + this.styleMap.size());\r\n        System.out.println(call + &quot;abgeschlossen&quot;);\r\n    }\r\n    \r\n    \r\n    \r\n        private void transform(HSSFWorkbook workbookOld ,XSSFWorkbook workbookNew,HSSFSheet sheetOld, XSSFSheet sheetNew) {\r\n            System.out.println(&quot;transform Sheet&quot;);\r\n    \r\n            sheetNew.setDisplayFormulas(sheetOld.isDisplayFormulas());\r\n            sheetNew.setDisplayGridlines(sheetOld.isDisplayGridlines());\r\n            sheetNew.setDisplayGuts(sheetOld.getDisplayGuts());\r\n            sheetNew.setDisplayRowColHeadings(sheetOld.isDisplayRowColHeadings());\r\n            sheetNew.setDisplayZeros(sheetOld.isDisplayZeros());\r\n            sheetNew.setFitToPage(sheetOld.getFitToPage());\r\n            //\r\n            //TODO::sheetNew.setForceFormulaRecalculation(sheetOld.getForceFormulaRecalculation());\r\n            sheetNew.setHorizontallyCenter(sheetOld.getHorizontallyCenter());\r\n            sheetNew.setMargin(Sheet.BottomMargin,\r\n                    sheetOld.getMargin(Sheet.BottomMargin));\r\n            sheetNew.setMargin(Sheet.FooterMargin,\r\n                    sheetOld.getMargin(Sheet.FooterMargin));\r\n            sheetNew.setMargin(Sheet.HeaderMargin,\r\n                    sheetOld.getMargin(Sheet.HeaderMargin));\r\n            sheetNew.setMargin(Sheet.LeftMargin,\r\n                    sheetOld.getMargin(Sheet.LeftMargin));\r\n            sheetNew.setMargin(Sheet.RightMargin,\r\n                    sheetOld.getMargin(Sheet.RightMargin));\r\n            sheetNew.setMargin(Sheet.TopMargin, sheetOld.getMargin(Sheet.TopMargin));\r\n            sheetNew.setPrintGridlines(sheetNew.isPrintGridlines());\r\n            //TODO::sheetNew.setRightToLeft(sheetNew.isRightToLeft());\r\n            sheetNew.setRowSumsBelow(sheetNew.getRowSumsBelow());\r\n            sheetNew.setRowSumsRight(sheetNew.getRowSumsRight());\r\n            sheetNew.setVerticallyCenter(sheetOld.getVerticallyCenter());\r\n    \r\n            XSSFRow rowNew;\r\n            for (Row row : sheetOld) {\r\n                rowNew = sheetNew.createRow(row.getRowNum());\r\n                if (rowNew != null)\r\n                    this.transform(workbookOld,workbookNew,(HSSFRow) row, rowNew);\r\n            }\r\n    \r\n            for (int i = 0; i &lt; this.lastColumn; i++) {\r\n                sheetNew.setColumnWidth(i, sheetOld.getColumnWidth(i));\r\n                sheetNew.setColumnHidden(i, sheetOld.isColumnHidden(i));\r\n            }\r\n    \r\n            for (int i = 0; i &lt; sheetOld.getNumMergedRegions(); i++) {\r\n                CellRangeAddress merged = sheetOld.getMergedRegion(i);\r\n                sheetNew.addMergedRegion(merged);\r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n        private void transform(HSSFWorkbook workbookOld ,XSSFWorkbook workbookNew,HSSFRow rowOld, XSSFRow rowNew) {\r\n            XSSFCell cellNew;\r\n            rowNew.setHeight(rowOld.getHeight());\r\n            //TODO::if (rowOld.getRowStyle() != null) {\r\n                /*Integer hash = rowOld.getRowStyle().hashCode();\r\n                if (!this.styleMap.containsKey(hash))\r\n                    this.transform(workbookOld,workbookNew,hash, (XSSFCellStyle)rowOld.getRowStyle(),(HSSFCellStyle)workbookNew.createCellStyle());\r\n                rowNew.setRowStyle(this.styleMap.get(hash));\r\n            }*/\r\n            for (Cell cell : rowOld) {\r\n                cellNew = rowNew.createCell(cell.getColumnIndex(), cell.getCellType());\r\n                if (cellNew != null)\r\n                    this.transform(workbookOld,workbookNew,(HSSFCell) cell, cellNew);\r\n            }\r\n            this.lastColumn = Math.max(this.lastColumn, rowOld.getLastCellNum());\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n        private void transform(HSSFWorkbook workbookOld,XSSFWorkbook workbookNew,HSSFCell cellOld,XSSFCell cellNew) {\r\n            cellNew.setCellComment(cellOld.getCellComment());\r\n        \r\n            Integer hash = cellOld.getCellStyle().hashCode();\r\n            if (this.styleMap!=null &amp;&amp; !this.styleMap.containsKey(hash)) {\r\n                this.transform(workbookOld,workbookNew,hash, cellOld.getCellStyle(),(XSSFCellStyle)workbookNew.createCellStyle());\r\n            }\r\n            cellNew.setCellStyle(this.styleMap.get(hash));\r\n    \r\n            switch (cellOld.getCellType()) {\r\n            case Cell.CELL_TYPE_BLANK:\r\n                break;\r\n            case Cell.CELL_TYPE_BOOLEAN:\r\n                cellNew.setCellValue(cellOld.getBooleanCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_ERROR:\r\n                cellNew.setCellValue(cellOld.getErrorCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_FORMULA:\r\n                cellNew.setCellValue(cellOld.getCellFormula());\r\n                break;\r\n            case Cell.CELL_TYPE_NUMERIC:\r\n                cellNew.setCellValue(cellOld.getNumericCellValue());\r\n                break;\r\n            case Cell.CELL_TYPE_STRING:\r\n                cellNew.setCellValue(cellOld.getStringCellValue());\r\n                break;\r\n            default:\r\n                System.out.println(&quot;transform: Unbekannter Zellentyp &quot;\r\n                        + cellOld.getCellType());\r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n        private void transform(HSSFWorkbook workbookOld,XSSFWorkbook workbookNew,Integer hash, HSSFCellStyle styleOld,\r\n                XSSFCellStyle styleNew) {\r\n            styleNew.setAlignment(styleOld.getAlignment());\r\n            styleNew.setBorderBottom(styleOld.getBorderBottom());\r\n            styleNew.setBorderLeft(styleOld.getBorderLeft());\r\n            styleNew.setBorderRight(styleOld.getBorderRight());\r\n            styleNew.setBorderTop(styleOld.getBorderTop());\r\n             styleNew.setDataFormat(this.transform( workbookOld, workbookNew,styleOld.getDataFormat()));\r\n            styleNew.setFillBackgroundColor(styleOld.getFillBackgroundColor());\r\n            styleNew.setFillForegroundColor(styleOld.getFillForegroundColor());\r\n            styleNew.setFillPattern(styleOld.getFillPattern());\r\n            styleNew.setFont(this.transform(workbookNew,styleOld.getFont(workbookOld)));\r\n            styleNew.setHidden(styleOld.getHidden());\r\n            styleNew.setIndention(styleOld.getIndention());\r\n            styleNew.setLocked(styleOld.getLocked());\r\n            styleNew.setVerticalAlignment(styleOld.getVerticalAlignment());\r\n            styleNew.setWrapText(styleOld.getWrapText());\r\n            this.styleMap.put(hash, styleNew);\r\n        }\r\n    \r\n    private short transform(HSSFWorkbook workbookOld,XSSFWorkbook workbookNew,short index) {\r\n        DataFormat formatOld = workbookOld.createDataFormat();\r\n        DataFormat formatNew = workbookNew.createDataFormat();\r\n        return formatNew.getFormat(formatOld.getFormat(index));\r\n    }\r\n    \r\n    \r\n        private XSSFFont transform(XSSFWorkbook workbookNew,HSSFFont fontOld) {\r\n            XSSFFont fontNew = workbookNew.createFont();\r\n            fontNew.setBoldweight(fontOld.getBoldweight());\r\n            fontNew.setCharSet(fontOld.getCharSet());\r\n            fontNew.setColor(fontOld.getColor());\r\n            fontNew.setFontName(fontOld.getFontName());\r\n            fontNew.setFontHeight(fontOld.getFontHeight());\r\n            fontNew.setItalic(fontOld.getItalic());\r\n            fontNew.setStrikeout(fontOld.getStrikeout());\r\n            fontNew.setTypeOffset(fontOld.getTypeOffset());\r\n            fontNew.setUnderline(fontOld.getUnderline());\r\n            return fontNew;\r\n        }\r\n    \r\n    public static void main(String[] args) throws Exception{\r\n        Xls2Xlsx xls=new Xls2Xlsx(); \r\n        //xls.transform();\r\n         InputStream isXls = new FileInputStream(&quot;c:/OTD1.xls&quot;);\r\n         HSSFWorkbook workbookOld     = new HSSFWorkbook(isXls);\r\n         \r\n        String dest=&quot;c:/OTD.xlsx&quot;;\r\n    \r\n        FileOutputStream out = new FileOutputStream(dest);\r\n        XSSFWorkbook workbookNew = new XSSFWorkbook();\r\n        xls.transformHSSF( workbookOld , workbookNew) ;    \r\n        workbookNew.write(out);\r\n    \r\n        out.close();\r\n         \r\n    //    InputStream isXls = new FileInputStream(&quot;c:/OTD1.xls&quot;);\r\n    //    HSSFWorkbook workbookNew     = new HSSFWorkbook(isXls);\r\n        \r\n    \r\n    \r\n    }\r\n    }","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<pre><code>//Added xbean-2.3.0.jar/xmlbeans-2.3.0.jar,poi-ooxml-3.7-20101029.jarpoi-ooxml-schemas-3.7-beta1.jar,\nimport java.io.*;\nimport java.util.*;\n\nimport org.apache.poi.hssf.usermodel.*;\nimport org.apache.poi.poifs.filesystem.POIFSFileSystem;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.CellRangeAddress;\nimport org.apache.poi.xssf.usermodel.*;\n\npublic class Xls2Xlsx {\n\nprivate File path = new File(\"c:/Integration-TestCases.xls\");\nprivate ArrayList&lt;File&gt; inputFiles = new ArrayList&lt;File&gt;();\n\nprivate int lastColumn = 0;\nprivate HashMap&lt;Integer, XSSFCellStyle&gt; styleMap = new HashMap();\n\nprivate void getInputFiles() {\n    String call = \"getInputFiles \";\n    if (this.path.isFile()) {\n        if (this.path.getAbsolutePath().endsWith(\".xls\")\n                &amp;&amp; !new File(this.path.getAbsolutePath() + \"x\").exists())\n            this.inputFiles.add(this.path);\n        else {\n            System.out\n                    .println(\"Datei endet nicht mit .xls oder XLSX-Datei existiert bereits\");\n        }\n    } else\n        for (File f : this.path.listFiles(new FilenameFilter() {\n            // anonyme innere Klasse\n\n            @Override\n            public boolean accept(File dir, String name) {\n                if (name.endsWith(\".xls\"))\n                    return true;\n                return false;\n            }\n\n        })) {\n            if (!new File(f.getAbsoluteFile() + \"x\").exists()) {\n                this.inputFiles.add(f);\n            }\n        }\n    System.out\n            .println(call + \"Dateien gefunden: \" + this.inputFiles.size());\n    System.out.println(call + \"abgeschlossen\");\n}\n\nprivate HSSFWorkbook getWorkBook(File f) throws FileNotFoundException,\n        IOException {\n    System.out.println(\"getWorkBook lese \" + f.getAbsolutePath());\n    POIFSFileSystem fs = new POIFSFileSystem(new BufferedInputStream(\n            new FileInputStream(f)));\n    HSSFWorkbook workbook = new HSSFWorkbook(fs);\n    System.out.println(\"getWorkBook abgeschlossen\");\n    return workbook;\n}\n\nprivate void transformHSSF(HSSFWorkbook workbookOld ,XSSFWorkbook workbookNew) {\n    String call = \"transform \";\n    System.out.println(call + \"Workbook\");\n    XSSFSheet sheetNew;\n    HSSFSheet sheetOld;\n    //TODO::workbookNew.setForceFormulaRecalculation(workbookOld.getForceFormulaRecalculation());\n    // workbookNew.setHidden(workbookOld.isHidden()); //ST@03.05.2012 -\n    // von Apache noch nicht implementiert\n    workbookNew.setMissingCellPolicy(workbookOld.getMissingCellPolicy());\n\n    for (int i = 0; i &lt; workbookOld.getNumberOfSheets(); i++) {\n        sheetOld =  workbookOld.getSheetAt(i);\n        sheetNew = workbookNew.getSheet(sheetOld.getSheetName());\n        System.out.println(call + \"Sheet Name: \" + sheetOld.getSheetName());\n        sheetNew = workbookNew.createSheet(sheetOld.getSheetName());\n        this.transform(workbookOld,workbookNew,sheetOld, sheetNew);\n    }\n    System.out.println(call + \"Styles size: \"        + this.styleMap.size());\n    System.out.println(call + \"abgeschlossen\");\n}\n\n\n\n    private void transform(HSSFWorkbook workbookOld ,XSSFWorkbook workbookNew,HSSFSheet sheetOld, XSSFSheet sheetNew) {\n        System.out.println(\"transform Sheet\");\n\n        sheetNew.setDisplayFormulas(sheetOld.isDisplayFormulas());\n        sheetNew.setDisplayGridlines(sheetOld.isDisplayGridlines());\n        sheetNew.setDisplayGuts(sheetOld.getDisplayGuts());\n        sheetNew.setDisplayRowColHeadings(sheetOld.isDisplayRowColHeadings());\n        sheetNew.setDisplayZeros(sheetOld.isDisplayZeros());\n        sheetNew.setFitToPage(sheetOld.getFitToPage());\n        //\n        //TODO::sheetNew.setForceFormulaRecalculation(sheetOld.getForceFormulaRecalculation());\n        sheetNew.setHorizontallyCenter(sheetOld.getHorizontallyCenter());\n        sheetNew.setMargin(Sheet.BottomMargin,\n                sheetOld.getMargin(Sheet.BottomMargin));\n        sheetNew.setMargin(Sheet.FooterMargin,\n                sheetOld.getMargin(Sheet.FooterMargin));\n        sheetNew.setMargin(Sheet.HeaderMargin,\n                sheetOld.getMargin(Sheet.HeaderMargin));\n        sheetNew.setMargin(Sheet.LeftMargin,\n                sheetOld.getMargin(Sheet.LeftMargin));\n        sheetNew.setMargin(Sheet.RightMargin,\n                sheetOld.getMargin(Sheet.RightMargin));\n        sheetNew.setMargin(Sheet.TopMargin, sheetOld.getMargin(Sheet.TopMargin));\n        sheetNew.setPrintGridlines(sheetNew.isPrintGridlines());\n        //TODO::sheetNew.setRightToLeft(sheetNew.isRightToLeft());\n        sheetNew.setRowSumsBelow(sheetNew.getRowSumsBelow());\n        sheetNew.setRowSumsRight(sheetNew.getRowSumsRight());\n        sheetNew.setVerticallyCenter(sheetOld.getVerticallyCenter());\n\n        XSSFRow rowNew;\n        for (Row row : sheetOld) {\n            rowNew = sheetNew.createRow(row.getRowNum());\n            if (rowNew != null)\n                this.transform(workbookOld,workbookNew,(HSSFRow) row, rowNew);\n        }\n\n        for (int i = 0; i &lt; this.lastColumn; i++) {\n            sheetNew.setColumnWidth(i, sheetOld.getColumnWidth(i));\n            sheetNew.setColumnHidden(i, sheetOld.isColumnHidden(i));\n        }\n\n        for (int i = 0; i &lt; sheetOld.getNumMergedRegions(); i++) {\n            CellRangeAddress merged = sheetOld.getMergedRegion(i);\n            sheetNew.addMergedRegion(merged);\n        }\n    }\n\n\n\n    private void transform(HSSFWorkbook workbookOld ,XSSFWorkbook workbookNew,HSSFRow rowOld, XSSFRow rowNew) {\n        XSSFCell cellNew;\n        rowNew.setHeight(rowOld.getHeight());\n        //TODO::if (rowOld.getRowStyle() != null) {\n            /*Integer hash = rowOld.getRowStyle().hashCode();\n            if (!this.styleMap.containsKey(hash))\n                this.transform(workbookOld,workbookNew,hash, (XSSFCellStyle)rowOld.getRowStyle(),(HSSFCellStyle)workbookNew.createCellStyle());\n            rowNew.setRowStyle(this.styleMap.get(hash));\n        }*/\n        for (Cell cell : rowOld) {\n            cellNew = rowNew.createCell(cell.getColumnIndex(), cell.getCellType());\n            if (cellNew != null)\n                this.transform(workbookOld,workbookNew,(HSSFCell) cell, cellNew);\n        }\n        this.lastColumn = Math.max(this.lastColumn, rowOld.getLastCellNum());\n    }\n\n\n\n\n    private void transform(HSSFWorkbook workbookOld,XSSFWorkbook workbookNew,HSSFCell cellOld,XSSFCell cellNew) {\n        cellNew.setCellComment(cellOld.getCellComment());\n\n        Integer hash = cellOld.getCellStyle().hashCode();\n        if (this.styleMap!=null &amp;&amp; !this.styleMap.containsKey(hash)) {\n            this.transform(workbookOld,workbookNew,hash, cellOld.getCellStyle(),(XSSFCellStyle)workbookNew.createCellStyle());\n        }\n        cellNew.setCellStyle(this.styleMap.get(hash));\n\n        switch (cellOld.getCellType()) {\n        case Cell.CELL_TYPE_BLANK:\n            break;\n        case Cell.CELL_TYPE_BOOLEAN:\n            cellNew.setCellValue(cellOld.getBooleanCellValue());\n            break;\n        case Cell.CELL_TYPE_ERROR:\n            cellNew.setCellValue(cellOld.getErrorCellValue());\n            break;\n        case Cell.CELL_TYPE_FORMULA:\n            cellNew.setCellValue(cellOld.getCellFormula());\n            break;\n        case Cell.CELL_TYPE_NUMERIC:\n            cellNew.setCellValue(cellOld.getNumericCellValue());\n            break;\n        case Cell.CELL_TYPE_STRING:\n            cellNew.setCellValue(cellOld.getStringCellValue());\n            break;\n        default:\n            System.out.println(\"transform: Unbekannter Zellentyp \"\n                    + cellOld.getCellType());\n        }\n    }\n\n\n\n\n    private void transform(HSSFWorkbook workbookOld,XSSFWorkbook workbookNew,Integer hash, HSSFCellStyle styleOld,\n            XSSFCellStyle styleNew) {\n        styleNew.setAlignment(styleOld.getAlignment());\n        styleNew.setBorderBottom(styleOld.getBorderBottom());\n        styleNew.setBorderLeft(styleOld.getBorderLeft());\n        styleNew.setBorderRight(styleOld.getBorderRight());\n        styleNew.setBorderTop(styleOld.getBorderTop());\n         styleNew.setDataFormat(this.transform( workbookOld, workbookNew,styleOld.getDataFormat()));\n        styleNew.setFillBackgroundColor(styleOld.getFillBackgroundColor());\n        styleNew.setFillForegroundColor(styleOld.getFillForegroundColor());\n        styleNew.setFillPattern(styleOld.getFillPattern());\n        styleNew.setFont(this.transform(workbookNew,styleOld.getFont(workbookOld)));\n        styleNew.setHidden(styleOld.getHidden());\n        styleNew.setIndention(styleOld.getIndention());\n        styleNew.setLocked(styleOld.getLocked());\n        styleNew.setVerticalAlignment(styleOld.getVerticalAlignment());\n        styleNew.setWrapText(styleOld.getWrapText());\n        this.styleMap.put(hash, styleNew);\n    }\n\nprivate short transform(HSSFWorkbook workbookOld,XSSFWorkbook workbookNew,short index) {\n    DataFormat formatOld = workbookOld.createDataFormat();\n    DataFormat formatNew = workbookNew.createDataFormat();\n    return formatNew.getFormat(formatOld.getFormat(index));\n}\n\n\n    private XSSFFont transform(XSSFWorkbook workbookNew,HSSFFont fontOld) {\n        XSSFFont fontNew = workbookNew.createFont();\n        fontNew.setBoldweight(fontOld.getBoldweight());\n        fontNew.setCharSet(fontOld.getCharSet());\n        fontNew.setColor(fontOld.getColor());\n        fontNew.setFontName(fontOld.getFontName());\n        fontNew.setFontHeight(fontOld.getFontHeight());\n        fontNew.setItalic(fontOld.getItalic());\n        fontNew.setStrikeout(fontOld.getStrikeout());\n        fontNew.setTypeOffset(fontOld.getTypeOffset());\n        fontNew.setUnderline(fontOld.getUnderline());\n        return fontNew;\n    }\n\npublic static void main(String[] args) throws Exception{\n    Xls2Xlsx xls=new Xls2Xlsx(); \n    //xls.transform();\n     InputStream isXls = new FileInputStream(\"c:/OTD1.xls\");\n     HSSFWorkbook workbookOld     = new HSSFWorkbook(isXls);\n\n    String dest=\"c:/OTD.xlsx\";\n\n    FileOutputStream out = new FileOutputStream(dest);\n    XSSFWorkbook workbookNew = new XSSFWorkbook();\n    xls.transformHSSF( workbookOld , workbookNew) ;    \n    workbookNew.write(out);\n\n    out.close();\n\n//    InputStream isXls = new FileInputStream(\"c:/OTD1.xls\");\n//    HSSFWorkbook workbookNew     = new HSSFWorkbook(isXls);\n\n\n\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2078662,"reputation":2458,"user_id":1851286,"display_name":"Oleksii Kyslytsyn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1438348765,"creation_date":1438348765,"answer_id":31747193,"question_id":7230819,"body_markdown":"Here is my approach\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Iterator;\r\n    import java.util.List;\r\n    import java.util.Set;\r\n    import java.util.TreeSet;\r\n    \r\n    import org.apache.poi.hssf.usermodel.HSSFCell;\r\n    import org.apache.poi.hssf.usermodel.HSSFClientAnchor;\r\n    import org.apache.poi.hssf.usermodel.HSSFPatriarch;\r\n    import org.apache.poi.hssf.usermodel.HSSFPicture;\r\n    import org.apache.poi.hssf.usermodel.HSSFPictureData;\r\n    import org.apache.poi.hssf.usermodel.HSSFRow;\r\n    import org.apache.poi.hssf.usermodel.HSSFShape;\r\n    import org.apache.poi.hssf.usermodel.HSSFSheet;\r\n    import org.apache.poi.hssf.usermodel.HSSFWorkbook;\r\n    import org.apache.poi.ss.usermodel.Cell;\r\n    import org.apache.poi.ss.usermodel.CellStyle;\r\n    import org.apache.poi.ss.usermodel.ClientAnchor;\r\n    import org.apache.poi.ss.usermodel.CreationHelper;\r\n    import org.apache.poi.ss.usermodel.DataFormat;\r\n    import org.apache.poi.ss.usermodel.Drawing;\r\n    import org.apache.poi.ss.usermodel.Font;\r\n    import org.apache.poi.ss.usermodel.Footer;\r\n    import org.apache.poi.ss.usermodel.Header;\r\n    import org.apache.poi.ss.usermodel.Name;\r\n    import org.apache.poi.ss.usermodel.PrintSetup;\r\n    import org.apache.poi.ss.usermodel.Sheet;\r\n    import org.apache.poi.ss.util.CellRangeAddress;\r\n    import org.apache.poi.ss.util.CellReference;\r\n    import org.apache.poi.xssf.usermodel.XSSFCell;\r\n    import org.apache.poi.xssf.usermodel.XSSFClientAnchor;\r\n    import org.apache.poi.xssf.usermodel.XSSFDrawing;\r\n    import org.apache.poi.xssf.usermodel.XSSFName;\r\n    import org.apache.poi.xssf.usermodel.XSSFPicture;\r\n    import org.apache.poi.xssf.usermodel.XSSFPictureData;\r\n    import org.apache.poi.xssf.usermodel.XSSFRow;\r\n    import org.apache.poi.xssf.usermodel.XSSFShape;\r\n    import org.apache.poi.xssf.usermodel.XSSFSheet;\r\n    import org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n    import org.openxmlformats.schemas.drawingml.x2006.spreadsheetDrawing.CTMarker;\r\n    import org.openxmlformats.schemas.drawingml.x2006.spreadsheetDrawing.CTTwoCellAnchor;\r\n    \r\n    public class XlsXlsxConverter3 {\r\n    @SuppressWarnings(&quot;unused&quot;)\r\n    private static class FormulaInfo {\r\n    \r\n    private String sheetName;\r\n    private Integer rowIndex;\r\n    private Integer cellIndex;\r\n    private String formula;\r\n    \r\n    private FormulaInfo(String sheetName, Integer rowIndex, Integer cellIndex, String formula) {\r\n    this.sheetName = sheetName;\r\n    this.rowIndex = rowIndex;\r\n    this.cellIndex = cellIndex;\r\n    this.formula = formula;\r\n    }\r\n    \r\n    public String getSheetName() {\r\n    return sheetName;\r\n    }\r\n    \r\n    public void setSheetName(String sheetName) {\r\n    this.sheetName = sheetName;\r\n    }\r\n    \r\n    public Integer getRowIndex() {\r\n    return rowIndex;\r\n    }\r\n    \r\n    public void setRowIndex(Integer rowIndex) {\r\n    this.rowIndex = rowIndex;\r\n    }\r\n    \r\n    public Integer getCellIndex() {\r\n    return cellIndex;\r\n    }\r\n    \r\n    public void setCellIndex(Integer cellIndex) {\r\n    this.cellIndex = cellIndex;\r\n    }\r\n    \r\n    public String getFormula() {\r\n    return formula;\r\n    }\r\n    \r\n    public void setFormula(String formula) {\r\n    this.formula = formula;\r\n    }\r\n    }\r\n    \r\n    static List&lt;FormulaInfo&gt; formulaInfoList = new ArrayList&lt;FormulaInfo&gt;();\r\n    \r\n    public static void refreshFormula(XSSFWorkbook workbook) {\r\n    for (FormulaInfo formulaInfo : formulaInfoList) {\r\n    workbook.getSheet(formulaInfo.getSheetName()).getRow(formulaInfo.getRowIndex())\r\n    .getCell(formulaInfo.getCellIndex()).setCellFormula(formulaInfo.getFormula());\r\n    }\r\n    formulaInfoList.removeAll(formulaInfoList);\r\n    }\r\n    \r\n    public static XSSFWorkbook convertWorkbookHSSFToXSSF(HSSFWorkbook source) {\r\n    XSSFWorkbook retVal = new XSSFWorkbook();\r\n    \r\n    for (int i = 0; i &lt; source.getNumberOfSheets(); i++) {\r\n    \r\n    HSSFSheet hssfsheet = source.getSheetAt(i);\r\n    XSSFSheet xssfSheet = retVal.createSheet(hssfsheet.getSheetName());\r\n    \r\n    copySheetSettings(xssfSheet, hssfsheet);\r\n    copySheet(hssfsheet, xssfSheet);\r\n    copyPictures(xssfSheet, hssfsheet);\r\n    }\r\n    \r\n    refreshFormula(retVal);\r\n    \r\n    return retVal;\r\n    }\r\n    \r\n    private static void copySheet(HSSFSheet source, XSSFSheet destination) {\r\n    copySheet(source, destination, true);\r\n    }\r\n    \r\n    /**\r\n    * @param destination\r\n    * the sheet to create from the copy.\r\n    * @param the\r\n    * sheet to copy.\r\n    * @param copyStyle\r\n    * true copy the style.\r\n    */\r\n    private static void copySheet(HSSFSheet source, XSSFSheet destination, boolean copyStyle) {\r\n    int maxColumnNum = 0;\r\n    List&lt;CellStyle&gt; styleMap2 = (copyStyle) ? new ArrayList&lt;CellStyle&gt;() : null;\r\n    for (int i = source.getFirstRowNum(); i &lt;= source.getLastRowNum(); i++) {\r\n    HSSFRow srcRow = source.getRow(i);\r\n    XSSFRow destRow = destination.createRow(i);\r\n    if (srcRow != null) {\r\n    // copyRow(source, destination, srcRow, destRow, styleMap);\r\n    copyRow(source, destination, srcRow, destRow, styleMap2);\r\n    if (srcRow.getLastCellNum() &gt; maxColumnNum) {\r\n    maxColumnNum = srcRow.getLastCellNum();\r\n    }\r\n    }\r\n    }\r\n    for (int i = 0; i &lt;= maxColumnNum; i++) {\r\n    destination.setColumnWidth(i, source.getColumnWidth(i));\r\n    }\r\n    }\r\n    \r\n    /**\r\n    * @param srcSheet\r\n    * the sheet to copy.\r\n    * @param destSheet\r\n    * the sheet to create.\r\n    * @param srcRow\r\n    * the row to copy.\r\n    * @param destRow\r\n    * the row to create.\r\n    * @param styleMap\r\n    * -\r\n    */\r\n    private static void copyRow(HSSFSheet srcSheet, XSSFSheet destSheet, HSSFRow srcRow, XSSFRow destRow,\r\n    // Map&lt;Integer, HSSFCellStyle&gt; styleMap) {\r\n    List&lt;CellStyle&gt; styleMap) {\r\n    // manage a list of merged zone in order to not insert two times a\r\n    // merged zone\r\n    Set&lt;CellRangeAddressWrapper&gt; mergedRegions = new TreeSet&lt;CellRangeAddressWrapper&gt;();\r\n    destRow.setHeight(srcRow.getHeight());\r\n    // pour chaque row\r\n    // for (int j = srcRow.getFirstCellNum(); j &lt;= srcRow.getLastCellNum();\r\n    // j++) {\r\n    int j = srcRow.getFirstCellNum();\r\n    if (j &lt; 0) {\r\n    j = 0;\r\n    }\r\n    for (; j &lt;= srcRow.getLastCellNum(); j++) {\r\n    HSSFCell oldCell = srcRow.getCell(j); // ancienne cell\r\n    XSSFCell newCell = destRow.getCell(j); // new cell\r\n    if (oldCell != null) {\r\n    if (newCell == null) {\r\n    newCell = destRow.createCell(j);\r\n    }\r\n    // copy chaque cell\r\n    copyCell(oldCell, newCell, styleMap);\r\n    // copy les informations de fusion entre les cellules\r\n    // System.out.println(&quot;row num: &quot; + srcRow.getRowNum() +\r\n    // &quot; , col: &quot; + (short)oldCell.getColumnIndex());\r\n    CellRangeAddress mergedRegion = getMergedRegion(srcSheet, srcRow.getRowNum(),\r\n    (short) oldCell.getColumnIndex());\r\n    \r\n    if (mergedRegion != null) {\r\n    // System.out.println(&quot;Selected merged region: &quot; +\r\n    // mergedRegion.toString());\r\n    CellRangeAddress newMergedRegion = new CellRangeAddress(mergedRegion.getFirstRow(),\r\n    mergedRegion.getLastRow(), mergedRegion.getFirstColumn(), mergedRegion.getLastColumn());\r\n    // System.out.println(&quot;New merged region: &quot; +\r\n    // newMergedRegion.toString());\r\n    CellRangeAddressWrapper wrapper = new CellRangeAddressWrapper(newMergedRegion);\r\n    if (isNewMergedRegion(wrapper, mergedRegions)) {\r\n    mergedRegions.add(wrapper);\r\n    destSheet.addMergedRegion(wrapper.range);\r\n    }\r\n    }\r\n    }\r\n    }\r\n    \r\n    }\r\n    \r\n    /**\r\n    * R&#233;cup&#232;re les informations de fusion des cellules dans la sheet source\r\n    * pour les appliquer &#224; la sheet destination... R&#233;cup&#232;re toutes les zones\r\n    * merged dans la sheet source et regarde pour chacune d&#39;elle si elle se\r\n    * trouve dans la current row que nous traitons. Si oui, retourne l&#39;objet\r\n    * CellRangeAddress.\r\n    *\r\n    * @param sheet\r\n    * the sheet containing the data.\r\n    * @param rowNum\r\n    * the num of the row to copy.\r\n    * @param cellNum\r\n    * the num of the cell to copy.\r\n    * @return the CellRangeAddress created.\r\n    */\r\n    public static CellRangeAddress getMergedRegion(HSSFSheet sheet, int rowNum, short cellNum) {\r\n    for (int i = 0; i &lt; sheet.getNumMergedRegions(); i++) {\r\n    CellRangeAddress merged = sheet.getMergedRegion(i);\r\n    if (merged.isInRange(rowNum, cellNum)) {\r\n    return merged;\r\n    }\r\n    }\r\n    return null;\r\n    }\r\n    \r\n    /**\r\n    * Check that the merged region has been created in the destination sheet.\r\n    *\r\n    * @param newMergedRegion\r\n    * the merged region to copy or not in the destination sheet.\r\n    * @param mergedRegions\r\n    * the list containing all the merged region.\r\n    * @return true if the merged region is already in the list or not.\r\n    */\r\n    private static boolean isNewMergedRegion(CellRangeAddressWrapper newMergedRegion,\r\n    Set&lt;CellRangeAddressWrapper&gt; mergedRegions) {\r\n    return !mergedRegions.contains(newMergedRegion);\r\n    }\r\n    \r\n    private static void copyPictures(Sheet newSheet, Sheet sheet) {\r\n    Drawing drawingOld = sheet.createDrawingPatriarch();\r\n    Drawing drawingNew = newSheet.createDrawingPatriarch();\r\n    CreationHelper helper = newSheet.getWorkbook().getCreationHelper();\r\n    \r\n    // if (drawingNew instanceof HSSFPatriarch) {\r\n    if (drawingOld instanceof HSSFPatriarch) {\r\n    List&lt;HSSFShape&gt; shapes = ((HSSFPatriarch) drawingOld).getChildren();\r\n    for (int i = 0; i &lt; shapes.size(); i++) {\r\n    System.out.println(shapes.size());\r\n    if (shapes.get(i) instanceof HSSFPicture) {\r\n    HSSFPicture pic = (HSSFPicture) shapes.get(i);\r\n    HSSFPictureData picdata = pic.getPictureData();\r\n    int pictureIndex = newSheet.getWorkbook().addPicture(picdata.getData(), picdata.getFormat());\r\n    ClientAnchor anchor = null;\r\n    if (pic.getAnchor() != null) {\r\n    anchor = helper.createClientAnchor();\r\n    anchor.setDx1(((HSSFClientAnchor) pic.getAnchor()).getDx1());\r\n    anchor.setDx2(((HSSFClientAnchor) pic.getAnchor()).getDx2());\r\n    anchor.setDy1(((HSSFClientAnchor) pic.getAnchor()).getDy1());\r\n    anchor.setDy2(((HSSFClientAnchor) pic.getAnchor()).getDy2());\r\n    anchor.setCol1(((HSSFClientAnchor) pic.getAnchor()).getCol1());\r\n    anchor.setCol2(((HSSFClientAnchor) pic.getAnchor()).getCol2());\r\n    anchor.setRow1(((HSSFClientAnchor) pic.getAnchor()).getRow1());\r\n    anchor.setRow2(((HSSFClientAnchor) pic.getAnchor()).getRow2());\r\n    anchor.setAnchorType(((HSSFClientAnchor) pic.getAnchor()).getAnchorType());\r\n    }\r\n    drawingNew.createPicture(anchor, pictureIndex);\r\n    }\r\n    }\r\n    } else {\r\n    if (drawingNew instanceof XSSFDrawing) {\r\n    List&lt;XSSFShape&gt; shapes = ((XSSFDrawing) drawingOld).getShapes();\r\n    for (int i = 0; i &lt; shapes.size(); i++) {\r\n    if (shapes.get(i) instanceof XSSFPicture) {\r\n    XSSFPicture pic = (XSSFPicture) shapes.get(i);\r\n    XSSFPictureData picdata = pic.getPictureData();\r\n    int pictureIndex = newSheet.getWorkbook().addPicture(picdata.getData(),\r\n    picdata.getPictureType());\r\n    XSSFClientAnchor anchor = null;\r\n    CTTwoCellAnchor oldAnchor = ((XSSFDrawing) drawingOld).getCTDrawing().getTwoCellAnchorArray(i);\r\n    if (oldAnchor != null) {\r\n    anchor = (XSSFClientAnchor) helper.createClientAnchor();\r\n    CTMarker markerFrom = oldAnchor.getFrom();\r\n    CTMarker markerTo = oldAnchor.getTo();\r\n    anchor.setDx1((int) markerFrom.getColOff());\r\n    anchor.setDx2((int) markerTo.getColOff());\r\n    anchor.setDy1((int) markerFrom.getRowOff());\r\n    anchor.setDy2((int) markerTo.getRowOff());\r\n    anchor.setCol1(markerFrom.getCol());\r\n    anchor.setCol2(markerTo.getCol());\r\n    anchor.setRow1(markerFrom.getRow());\r\n    anchor.setRow2(markerTo.getRow());\r\n    }\r\n    drawingNew.createPicture(anchor, pictureIndex);\r\n    }\r\n    }\r\n    }\r\n    }\r\n    }\r\n    \r\n    private static void copyCell(Cell oldCell, Cell newCell, List&lt;CellStyle&gt; styleList) {\r\n    if (styleList != null) {\r\n    if (oldCell.getSheet().getWorkbook() == newCell.getSheet().getWorkbook()) {\r\n    newCell.setCellStyle(oldCell.getCellStyle());\r\n    } else {\r\n    DataFormat newDataFormat = newCell.getSheet().getWorkbook().createDataFormat();\r\n    \r\n    CellStyle newCellStyle = getSameCellStyle(oldCell, newCell, styleList);\r\n    if (newCellStyle == null) {\r\n    // Create a new cell style\r\n    Font oldFont = oldCell.getSheet().getWorkbook().getFontAt(oldCell.getCellStyle().getFontIndex());\r\n    // Find a existing font corresponding to avoid to create a\r\n    // new one\r\n    Font newFont = newCell\r\n    .getSheet()\r\n    .getWorkbook()\r\n    .findFont(oldFont.getBoldweight(), oldFont.getColor(), oldFont.getFontHeight(),\r\n    oldFont.getFontName(), oldFont.getItalic(), oldFont.getStrikeout(),\r\n    oldFont.getTypeOffset(), oldFont.getUnderline());\r\n    if (newFont == null) {\r\n    newFont = newCell.getSheet().getWorkbook().createFont();\r\n    newFont.setBoldweight(oldFont.getBoldweight());\r\n    newFont.setColor(oldFont.getColor());\r\n    newFont.setFontHeight(oldFont.getFontHeight());\r\n    newFont.setFontName(oldFont.getFontName());\r\n    newFont.setItalic(oldFont.getItalic());\r\n    newFont.setStrikeout(oldFont.getStrikeout());\r\n    newFont.setTypeOffset(oldFont.getTypeOffset());\r\n    newFont.setUnderline(oldFont.getUnderline());\r\n    newFont.setCharSet(oldFont.getCharSet());\r\n    }\r\n    \r\n    short newFormat = newDataFormat.getFormat(oldCell.getCellStyle().getDataFormatString());\r\n    newCellStyle = newCell.getSheet().getWorkbook().createCellStyle();\r\n    newCellStyle.setFont(newFont);\r\n    newCellStyle.setDataFormat(newFormat);\r\n    \r\n    newCellStyle.setAlignment(oldCell.getCellStyle().getAlignment());\r\n    newCellStyle.setHidden(oldCell.getCellStyle().getHidden());\r\n    newCellStyle.setLocked(oldCell.getCellStyle().getLocked());\r\n    newCellStyle.setWrapText(oldCell.getCellStyle().getWrapText());\r\n    newCellStyle.setBorderBottom(oldCell.getCellStyle().getBorderBottom());\r\n    newCellStyle.setBorderLeft(oldCell.getCellStyle().getBorderLeft());\r\n    newCellStyle.setBorderRight(oldCell.getCellStyle().getBorderRight());\r\n    newCellStyle.setBorderTop(oldCell.getCellStyle().getBorderTop());\r\n    newCellStyle.setBottomBorderColor(oldCell.getCellStyle().getBottomBorderColor());\r\n    newCellStyle.setFillBackgroundColor(oldCell.getCellStyle().getFillBackgroundColor());\r\n    newCellStyle.setFillForegroundColor(oldCell.getCellStyle().getFillForegroundColor());\r\n    newCellStyle.setFillPattern(oldCell.getCellStyle().getFillPattern());\r\n    newCellStyle.setIndention(oldCell.getCellStyle().getIndention());\r\n    newCellStyle.setLeftBorderColor(oldCell.getCellStyle().getLeftBorderColor());\r\n    newCellStyle.setRightBorderColor(oldCell.getCellStyle().getRightBorderColor());\r\n    newCellStyle.setRotation(oldCell.getCellStyle().getRotation());\r\n    newCellStyle.setTopBorderColor(oldCell.getCellStyle().getTopBorderColor());\r\n    newCellStyle.setVerticalAlignment(oldCell.getCellStyle().getVerticalAlignment());\r\n    \r\n    styleList.add(newCellStyle);\r\n    }\r\n    newCell.setCellStyle(newCellStyle);\r\n    }\r\n    }\r\n    switch (oldCell.getCellType()) {\r\n    case Cell.CELL_TYPE_STRING:\r\n    newCell.setCellValue(oldCell.getStringCellValue());\r\n    break;\r\n    case Cell.CELL_TYPE_NUMERIC:\r\n    newCell.setCellValue(oldCell.getNumericCellValue());\r\n    break;\r\n    case Cell.CELL_TYPE_BLANK:\r\n    newCell.setCellType(Cell.CELL_TYPE_BLANK);\r\n    break;\r\n    case Cell.CELL_TYPE_BOOLEAN:\r\n    newCell.setCellValue(oldCell.getBooleanCellValue());\r\n    break;\r\n    case Cell.CELL_TYPE_ERROR:\r\n    newCell.setCellErrorValue(oldCell.getErrorCellValue());\r\n    break;\r\n    case Cell.CELL_TYPE_FORMULA:\r\n    newCell.setCellFormula(oldCell.getCellFormula());\r\n    formulaInfoList.add(new FormulaInfo(oldCell.getSheet().getSheetName(), oldCell.getRowIndex(), oldCell\r\n    .getColumnIndex(), oldCell.getCellFormula()));\r\n    break;\r\n    default:\r\n    break;\r\n    }\r\n    }\r\n    \r\n    private static CellStyle getSameCellStyle(Cell oldCell, Cell newCell, List&lt;CellStyle&gt; styleList) {\r\n    CellStyle styleToFind = oldCell.getCellStyle();\r\n    CellStyle currentCellStyle = null;\r\n    CellStyle returnCellStyle = null;\r\n    Iterator&lt;CellStyle&gt; iterator = styleList.iterator();\r\n    Font oldFont = null;\r\n    Font newFont = null;\r\n    while (iterator.hasNext() &amp;&amp; returnCellStyle == null) {\r\n    currentCellStyle = iterator.next();\r\n    \r\n    if (currentCellStyle.getAlignment() != styleToFind.getAlignment()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getHidden() != styleToFind.getHidden()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getLocked() != styleToFind.getLocked()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getWrapText() != styleToFind.getWrapText()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getBorderBottom() != styleToFind.getBorderBottom()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getBorderLeft() != styleToFind.getBorderLeft()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getBorderRight() != styleToFind.getBorderRight()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getBorderTop() != styleToFind.getBorderTop()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getBottomBorderColor() != styleToFind.getBottomBorderColor()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getFillBackgroundColor() != styleToFind.getFillBackgroundColor()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getFillForegroundColor() != styleToFind.getFillForegroundColor()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getFillPattern() != styleToFind.getFillPattern()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getIndention() != styleToFind.getIndention()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getLeftBorderColor() != styleToFind.getLeftBorderColor()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getRightBorderColor() != styleToFind.getRightBorderColor()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getRotation() != styleToFind.getRotation()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getTopBorderColor() != styleToFind.getTopBorderColor()) {\r\n    continue;\r\n    }\r\n    if (currentCellStyle.getVerticalAlignment() != styleToFind.getVerticalAlignment()) {\r\n    continue;\r\n    }\r\n    \r\n    oldFont = oldCell.getSheet().getWorkbook().getFontAt(oldCell.getCellStyle().getFontIndex());\r\n    newFont = newCell.getSheet().getWorkbook().getFontAt(currentCellStyle.getFontIndex());\r\n    \r\n    if (newFont.getBoldweight() == oldFont.getBoldweight()) {\r\n    continue;\r\n    }\r\n    if (newFont.getColor() == oldFont.getColor()) {\r\n    continue;\r\n    }\r\n    if (newFont.getFontHeight() == oldFont.getFontHeight()) {\r\n    continue;\r\n    }\r\n    if (newFont.getFontName() == oldFont.getFontName()) {\r\n    continue;\r\n    }\r\n    if (newFont.getItalic() == oldFont.getItalic()) {\r\n    continue;\r\n    }\r\n    if (newFont.getStrikeout() == oldFont.getStrikeout()) {\r\n    continue;\r\n    }\r\n    if (newFont.getTypeOffset() == oldFont.getTypeOffset()) {\r\n    continue;\r\n    }\r\n    if (newFont.getUnderline() == oldFont.getUnderline()) {\r\n    continue;\r\n    }\r\n    if (newFont.getCharSet() == oldFont.getCharSet()) {\r\n    continue;\r\n    }\r\n    if (oldCell.getCellStyle().getDataFormatString().equals(currentCellStyle.getDataFormatString())) {\r\n    continue;\r\n    }\r\n    \r\n    returnCellStyle = currentCellStyle;\r\n    }\r\n    return returnCellStyle;\r\n    }\r\n    \r\n    private static void copySheetSettings(Sheet newSheet, Sheet sheetToCopy) {\r\n    \r\n    newSheet.setAutobreaks(sheetToCopy.getAutobreaks());\r\n    newSheet.setDefaultColumnWidth(sheetToCopy.getDefaultColumnWidth());\r\n    newSheet.setDefaultRowHeight(sheetToCopy.getDefaultRowHeight());\r\n    newSheet.setDefaultRowHeightInPoints(sheetToCopy.getDefaultRowHeightInPoints());\r\n    newSheet.setDisplayGuts(sheetToCopy.getDisplayGuts());\r\n    newSheet.setFitToPage(sheetToCopy.getFitToPage());\r\n    \r\n    newSheet.setForceFormulaRecalculation(sheetToCopy.getForceFormulaRecalculation());\r\n    \r\n    PrintSetup sheetToCopyPrintSetup = sheetToCopy.getPrintSetup();\r\n    PrintSetup newSheetPrintSetup = newSheet.getPrintSetup();\r\n    \r\n    newSheetPrintSetup.setPaperSize(sheetToCopyPrintSetup.getPaperSize());\r\n    newSheetPrintSetup.setScale(sheetToCopyPrintSetup.getScale());\r\n    newSheetPrintSetup.setPageStart(sheetToCopyPrintSetup.getPageStart());\r\n    newSheetPrintSetup.setFitWidth(sheetToCopyPrintSetup.getFitWidth());\r\n    newSheetPrintSetup.setFitHeight(sheetToCopyPrintSetup.getFitHeight());\r\n    newSheetPrintSetup.setLeftToRight(sheetToCopyPrintSetup.getLeftToRight());\r\n    newSheetPrintSetup.setLandscape(sheetToCopyPrintSetup.getLandscape());\r\n    newSheetPrintSetup.setValidSettings(sheetToCopyPrintSetup.getValidSettings());\r\n    newSheetPrintSetup.setNoColor(sheetToCopyPrintSetup.getNoColor());\r\n    newSheetPrintSetup.setDraft(sheetToCopyPrintSetup.getDraft());\r\n    newSheetPrintSetup.setNotes(sheetToCopyPrintSetup.getNotes());\r\n    newSheetPrintSetup.setNoOrientation(sheetToCopyPrintSetup.getNoOrientation());\r\n    newSheetPrintSetup.setUsePage(sheetToCopyPrintSetup.getUsePage());\r\n    newSheetPrintSetup.setHResolution(sheetToCopyPrintSetup.getHResolution());\r\n    newSheetPrintSetup.setVResolution(sheetToCopyPrintSetup.getVResolution());\r\n    newSheetPrintSetup.setHeaderMargin(sheetToCopyPrintSetup.getHeaderMargin());\r\n    newSheetPrintSetup.setFooterMargin(sheetToCopyPrintSetup.getFooterMargin());\r\n    newSheetPrintSetup.setCopies(sheetToCopyPrintSetup.getCopies());\r\n    \r\n    Header sheetToCopyHeader = sheetToCopy.getHeader();\r\n    Header newSheetHeader = newSheet.getHeader();\r\n    newSheetHeader.setCenter(sheetToCopyHeader.getCenter());\r\n    newSheetHeader.setLeft(sheetToCopyHeader.getLeft());\r\n    newSheetHeader.setRight(sheetToCopyHeader.getRight());\r\n    \r\n    Footer sheetToCopyFooter = sheetToCopy.getFooter();\r\n    Footer newSheetFooter = newSheet.getFooter();\r\n    newSheetFooter.setCenter(sheetToCopyFooter.getCenter());\r\n    newSheetFooter.setLeft(sheetToCopyFooter.getLeft());\r\n    newSheetFooter.setRight(sheetToCopyFooter.getRight());\r\n    \r\n    newSheet.setHorizontallyCenter(sheetToCopy.getHorizontallyCenter());\r\n    newSheet.setMargin(Sheet.LeftMargin, sheetToCopy.getMargin(Sheet.LeftMargin));\r\n    newSheet.setMargin(Sheet.RightMargin, sheetToCopy.getMargin(Sheet.RightMargin));\r\n    newSheet.setMargin(Sheet.TopMargin, sheetToCopy.getMargin(Sheet.TopMargin));\r\n    newSheet.setMargin(Sheet.BottomMargin, sheetToCopy.getMargin(Sheet.BottomMargin));\r\n    \r\n    newSheet.setPrintGridlines(sheetToCopy.isPrintGridlines());\r\n    newSheet.setRowSumsBelow(sheetToCopy.getRowSumsBelow());\r\n    newSheet.setRowSumsRight(sheetToCopy.getRowSumsRight());\r\n    newSheet.setVerticallyCenter(sheetToCopy.getVerticallyCenter());\r\n    newSheet.setDisplayFormulas(sheetToCopy.isDisplayFormulas());\r\n    newSheet.setDisplayGridlines(sheetToCopy.isDisplayGridlines());\r\n    newSheet.setDisplayRowColHeadings(sheetToCopy.isDisplayRowColHeadings());\r\n    newSheet.setDisplayZeros(sheetToCopy.isDisplayZeros());\r\n    newSheet.setPrintGridlines(sheetToCopy.isPrintGridlines());\r\n    newSheet.setRightToLeft(sheetToCopy.isRightToLeft());\r\n    newSheet.setZoom(1, 1);\r\n    copyPrintTitle(newSheet, sheetToCopy);\r\n    }\r\n    \r\n    private static void copyPrintTitle(Sheet newSheet, Sheet sheetToCopy) {\r\n    int nbNames = sheetToCopy.getWorkbook().getNumberOfNames();\r\n    Name name = null;\r\n    String formula = null;\r\n    \r\n    String part1S = null;\r\n    String part2S = null;\r\n    String formS = null;\r\n    String formF = null;\r\n    String part1F = null;\r\n    String part2F = null;\r\n    int rowB = -1;\r\n    int rowE = -1;\r\n    int colB = -1;\r\n    int colE = -1;\r\n    \r\n    for (int i = 0; i &lt; nbNames; i++) {\r\n    name = sheetToCopy.getWorkbook().getNameAt(i);\r\n    if (name.getSheetIndex() == sheetToCopy.getWorkbook().getSheetIndex(sheetToCopy)) {\r\n    if (name.getNameName().equals(&quot;Print_Titles&quot;)\r\n    || name.getNameName().equals(XSSFName.BUILTIN_PRINT_TITLE)) {\r\n    formula = name.getRefersToFormula();\r\n    int indexComma = formula.indexOf(&quot;,&quot;);\r\n    if (indexComma == -1) {\r\n    indexComma = formula.indexOf(&quot;;&quot;);\r\n    }\r\n    String firstPart = null;\r\n    ;\r\n    String secondPart = null;\r\n    if (indexComma == -1) {\r\n    firstPart = formula;\r\n    } else {\r\n    firstPart = formula.substring(0, indexComma);\r\n    secondPart = formula.substring(indexComma + 1);\r\n    }\r\n    \r\n    formF = firstPart.substring(firstPart.indexOf(&quot;!&quot;) + 1);\r\n    part1F = formF.substring(0, formF.indexOf(&quot;:&quot;));\r\n    part2F = formF.substring(formF.indexOf(&quot;:&quot;) + 1);\r\n    \r\n    if (secondPart != null) {\r\n    formS = secondPart.substring(secondPart.indexOf(&quot;!&quot;) + 1);\r\n    part1S = formS.substring(0, formS.indexOf(&quot;:&quot;));\r\n    part2S = formS.substring(formS.indexOf(&quot;:&quot;) + 1);\r\n    }\r\n    \r\n    rowB = -1;\r\n    rowE = -1;\r\n    colB = -1;\r\n    colE = -1;\r\n    String rowBs, rowEs, colBs, colEs;\r\n    if (part1F.lastIndexOf(&quot;$&quot;) != part1F.indexOf(&quot;$&quot;)) {\r\n    rowBs = part1F.substring(part1F.lastIndexOf(&quot;$&quot;) + 1, part1F.length());\r\n    rowEs = part2F.substring(part2F.lastIndexOf(&quot;$&quot;) + 1, part2F.length());\r\n    rowB = Integer.parseInt(rowBs);\r\n    rowE = Integer.parseInt(rowEs);\r\n    if (secondPart != null) {\r\n    colBs = part1S.substring(part1S.lastIndexOf(&quot;$&quot;) + 1, part1S.length());\r\n    colEs = part2S.substring(part2S.lastIndexOf(&quot;$&quot;) + 1, part2S.length());\r\n    colB = CellReference.convertColStringToIndex(colBs);// CExportExcelHelperPoi.convertColumnLetterToInt(colBs);\r\n    colE = CellReference.convertColStringToIndex(colEs);// CExportExcelHelperPoi.convertColumnLetterToInt(colEs);\r\n    }\r\n    } else {\r\n    colBs = part1F.substring(part1F.lastIndexOf(&quot;$&quot;) + 1, part1F.length());\r\n    colEs = part2F.substring(part2F.lastIndexOf(&quot;$&quot;) + 1, part2F.length());\r\n    colB = CellReference.convertColStringToIndex(colBs);// CExportExcelHelperPoi.convertColumnLetterToInt(colBs);\r\n    colE = CellReference.convertColStringToIndex(colEs);// CExportExcelHelperPoi.convertColumnLetterToInt(colEs);\r\n    \r\n    if (secondPart != null) {\r\n    rowBs = part1S.substring(part1S.lastIndexOf(&quot;$&quot;) + 1, part1S.length());\r\n    rowEs = part2S.substring(part2S.lastIndexOf(&quot;$&quot;) + 1, part2S.length());\r\n    rowB = Integer.parseInt(rowBs);\r\n    rowE = Integer.parseInt(rowEs);\r\n    }\r\n    }\r\n    \r\n    newSheet.getWorkbook().setRepeatingRowsAndColumns(newSheet.getWorkbook().getSheetIndex(newSheet),\r\n    colB, colE, rowB - 1, rowE - 1);\r\n    }\r\n    }\r\n    }\r\n    }\r\n    } ","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<p>Here is my approach</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.Set;\nimport java.util.TreeSet;\n\nimport org.apache.poi.hssf.usermodel.HSSFCell;\nimport org.apache.poi.hssf.usermodel.HSSFClientAnchor;\nimport org.apache.poi.hssf.usermodel.HSSFPatriarch;\nimport org.apache.poi.hssf.usermodel.HSSFPicture;\nimport org.apache.poi.hssf.usermodel.HSSFPictureData;\nimport org.apache.poi.hssf.usermodel.HSSFRow;\nimport org.apache.poi.hssf.usermodel.HSSFShape;\nimport org.apache.poi.hssf.usermodel.HSSFSheet;\nimport org.apache.poi.hssf.usermodel.HSSFWorkbook;\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.CellStyle;\nimport org.apache.poi.ss.usermodel.ClientAnchor;\nimport org.apache.poi.ss.usermodel.CreationHelper;\nimport org.apache.poi.ss.usermodel.DataFormat;\nimport org.apache.poi.ss.usermodel.Drawing;\nimport org.apache.poi.ss.usermodel.Font;\nimport org.apache.poi.ss.usermodel.Footer;\nimport org.apache.poi.ss.usermodel.Header;\nimport org.apache.poi.ss.usermodel.Name;\nimport org.apache.poi.ss.usermodel.PrintSetup;\nimport org.apache.poi.ss.usermodel.Sheet;\nimport org.apache.poi.ss.util.CellRangeAddress;\nimport org.apache.poi.ss.util.CellReference;\nimport org.apache.poi.xssf.usermodel.XSSFCell;\nimport org.apache.poi.xssf.usermodel.XSSFClientAnchor;\nimport org.apache.poi.xssf.usermodel.XSSFDrawing;\nimport org.apache.poi.xssf.usermodel.XSSFName;\nimport org.apache.poi.xssf.usermodel.XSSFPicture;\nimport org.apache.poi.xssf.usermodel.XSSFPictureData;\nimport org.apache.poi.xssf.usermodel.XSSFRow;\nimport org.apache.poi.xssf.usermodel.XSSFShape;\nimport org.apache.poi.xssf.usermodel.XSSFSheet;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\nimport org.openxmlformats.schemas.drawingml.x2006.spreadsheetDrawing.CTMarker;\nimport org.openxmlformats.schemas.drawingml.x2006.spreadsheetDrawing.CTTwoCellAnchor;\n\npublic class XlsXlsxConverter3 {\n@SuppressWarnings(\"unused\")\nprivate static class FormulaInfo {\n\nprivate String sheetName;\nprivate Integer rowIndex;\nprivate Integer cellIndex;\nprivate String formula;\n\nprivate FormulaInfo(String sheetName, Integer rowIndex, Integer cellIndex, String formula) {\nthis.sheetName = sheetName;\nthis.rowIndex = rowIndex;\nthis.cellIndex = cellIndex;\nthis.formula = formula;\n}\n\npublic String getSheetName() {\nreturn sheetName;\n}\n\npublic void setSheetName(String sheetName) {\nthis.sheetName = sheetName;\n}\n\npublic Integer getRowIndex() {\nreturn rowIndex;\n}\n\npublic void setRowIndex(Integer rowIndex) {\nthis.rowIndex = rowIndex;\n}\n\npublic Integer getCellIndex() {\nreturn cellIndex;\n}\n\npublic void setCellIndex(Integer cellIndex) {\nthis.cellIndex = cellIndex;\n}\n\npublic String getFormula() {\nreturn formula;\n}\n\npublic void setFormula(String formula) {\nthis.formula = formula;\n}\n}\n\nstatic List&lt;FormulaInfo&gt; formulaInfoList = new ArrayList&lt;FormulaInfo&gt;();\n\npublic static void refreshFormula(XSSFWorkbook workbook) {\nfor (FormulaInfo formulaInfo : formulaInfoList) {\nworkbook.getSheet(formulaInfo.getSheetName()).getRow(formulaInfo.getRowIndex())\n.getCell(formulaInfo.getCellIndex()).setCellFormula(formulaInfo.getFormula());\n}\nformulaInfoList.removeAll(formulaInfoList);\n}\n\npublic static XSSFWorkbook convertWorkbookHSSFToXSSF(HSSFWorkbook source) {\nXSSFWorkbook retVal = new XSSFWorkbook();\n\nfor (int i = 0; i &lt; source.getNumberOfSheets(); i++) {\n\nHSSFSheet hssfsheet = source.getSheetAt(i);\nXSSFSheet xssfSheet = retVal.createSheet(hssfsheet.getSheetName());\n\ncopySheetSettings(xssfSheet, hssfsheet);\ncopySheet(hssfsheet, xssfSheet);\ncopyPictures(xssfSheet, hssfsheet);\n}\n\nrefreshFormula(retVal);\n\nreturn retVal;\n}\n\nprivate static void copySheet(HSSFSheet source, XSSFSheet destination) {\ncopySheet(source, destination, true);\n}\n\n/**\n* @param destination\n* the sheet to create from the copy.\n* @param the\n* sheet to copy.\n* @param copyStyle\n* true copy the style.\n*/\nprivate static void copySheet(HSSFSheet source, XSSFSheet destination, boolean copyStyle) {\nint maxColumnNum = 0;\nList&lt;CellStyle&gt; styleMap2 = (copyStyle) ? new ArrayList&lt;CellStyle&gt;() : null;\nfor (int i = source.getFirstRowNum(); i &lt;= source.getLastRowNum(); i++) {\nHSSFRow srcRow = source.getRow(i);\nXSSFRow destRow = destination.createRow(i);\nif (srcRow != null) {\n// copyRow(source, destination, srcRow, destRow, styleMap);\ncopyRow(source, destination, srcRow, destRow, styleMap2);\nif (srcRow.getLastCellNum() &gt; maxColumnNum) {\nmaxColumnNum = srcRow.getLastCellNum();\n}\n}\n}\nfor (int i = 0; i &lt;= maxColumnNum; i++) {\ndestination.setColumnWidth(i, source.getColumnWidth(i));\n}\n}\n\n/**\n* @param srcSheet\n* the sheet to copy.\n* @param destSheet\n* the sheet to create.\n* @param srcRow\n* the row to copy.\n* @param destRow\n* the row to create.\n* @param styleMap\n* -\n*/\nprivate static void copyRow(HSSFSheet srcSheet, XSSFSheet destSheet, HSSFRow srcRow, XSSFRow destRow,\n// Map&lt;Integer, HSSFCellStyle&gt; styleMap) {\nList&lt;CellStyle&gt; styleMap) {\n// manage a list of merged zone in order to not insert two times a\n// merged zone\nSet&lt;CellRangeAddressWrapper&gt; mergedRegions = new TreeSet&lt;CellRangeAddressWrapper&gt;();\ndestRow.setHeight(srcRow.getHeight());\n// pour chaque row\n// for (int j = srcRow.getFirstCellNum(); j &lt;= srcRow.getLastCellNum();\n// j++) {\nint j = srcRow.getFirstCellNum();\nif (j &lt; 0) {\nj = 0;\n}\nfor (; j &lt;= srcRow.getLastCellNum(); j++) {\nHSSFCell oldCell = srcRow.getCell(j); // ancienne cell\nXSSFCell newCell = destRow.getCell(j); // new cell\nif (oldCell != null) {\nif (newCell == null) {\nnewCell = destRow.createCell(j);\n}\n// copy chaque cell\ncopyCell(oldCell, newCell, styleMap);\n// copy les informations de fusion entre les cellules\n// System.out.println(\"row num: \" + srcRow.getRowNum() +\n// \" , col: \" + (short)oldCell.getColumnIndex());\nCellRangeAddress mergedRegion = getMergedRegion(srcSheet, srcRow.getRowNum(),\n(short) oldCell.getColumnIndex());\n\nif (mergedRegion != null) {\n// System.out.println(\"Selected merged region: \" +\n// mergedRegion.toString());\nCellRangeAddress newMergedRegion = new CellRangeAddress(mergedRegion.getFirstRow(),\nmergedRegion.getLastRow(), mergedRegion.getFirstColumn(), mergedRegion.getLastColumn());\n// System.out.println(\"New merged region: \" +\n// newMergedRegion.toString());\nCellRangeAddressWrapper wrapper = new CellRangeAddressWrapper(newMergedRegion);\nif (isNewMergedRegion(wrapper, mergedRegions)) {\nmergedRegions.add(wrapper);\ndestSheet.addMergedRegion(wrapper.range);\n}\n}\n}\n}\n\n}\n\n/**\n* Récupère les informations de fusion des cellules dans la sheet source\n* pour les appliquer à la sheet destination... Récupère toutes les zones\n* merged dans la sheet source et regarde pour chacune d'elle si elle se\n* trouve dans la current row que nous traitons. Si oui, retourne l'objet\n* CellRangeAddress.\n*\n* @param sheet\n* the sheet containing the data.\n* @param rowNum\n* the num of the row to copy.\n* @param cellNum\n* the num of the cell to copy.\n* @return the CellRangeAddress created.\n*/\npublic static CellRangeAddress getMergedRegion(HSSFSheet sheet, int rowNum, short cellNum) {\nfor (int i = 0; i &lt; sheet.getNumMergedRegions(); i++) {\nCellRangeAddress merged = sheet.getMergedRegion(i);\nif (merged.isInRange(rowNum, cellNum)) {\nreturn merged;\n}\n}\nreturn null;\n}\n\n/**\n* Check that the merged region has been created in the destination sheet.\n*\n* @param newMergedRegion\n* the merged region to copy or not in the destination sheet.\n* @param mergedRegions\n* the list containing all the merged region.\n* @return true if the merged region is already in the list or not.\n*/\nprivate static boolean isNewMergedRegion(CellRangeAddressWrapper newMergedRegion,\nSet&lt;CellRangeAddressWrapper&gt; mergedRegions) {\nreturn !mergedRegions.contains(newMergedRegion);\n}\n\nprivate static void copyPictures(Sheet newSheet, Sheet sheet) {\nDrawing drawingOld = sheet.createDrawingPatriarch();\nDrawing drawingNew = newSheet.createDrawingPatriarch();\nCreationHelper helper = newSheet.getWorkbook().getCreationHelper();\n\n// if (drawingNew instanceof HSSFPatriarch) {\nif (drawingOld instanceof HSSFPatriarch) {\nList&lt;HSSFShape&gt; shapes = ((HSSFPatriarch) drawingOld).getChildren();\nfor (int i = 0; i &lt; shapes.size(); i++) {\nSystem.out.println(shapes.size());\nif (shapes.get(i) instanceof HSSFPicture) {\nHSSFPicture pic = (HSSFPicture) shapes.get(i);\nHSSFPictureData picdata = pic.getPictureData();\nint pictureIndex = newSheet.getWorkbook().addPicture(picdata.getData(), picdata.getFormat());\nClientAnchor anchor = null;\nif (pic.getAnchor() != null) {\nanchor = helper.createClientAnchor();\nanchor.setDx1(((HSSFClientAnchor) pic.getAnchor()).getDx1());\nanchor.setDx2(((HSSFClientAnchor) pic.getAnchor()).getDx2());\nanchor.setDy1(((HSSFClientAnchor) pic.getAnchor()).getDy1());\nanchor.setDy2(((HSSFClientAnchor) pic.getAnchor()).getDy2());\nanchor.setCol1(((HSSFClientAnchor) pic.getAnchor()).getCol1());\nanchor.setCol2(((HSSFClientAnchor) pic.getAnchor()).getCol2());\nanchor.setRow1(((HSSFClientAnchor) pic.getAnchor()).getRow1());\nanchor.setRow2(((HSSFClientAnchor) pic.getAnchor()).getRow2());\nanchor.setAnchorType(((HSSFClientAnchor) pic.getAnchor()).getAnchorType());\n}\ndrawingNew.createPicture(anchor, pictureIndex);\n}\n}\n} else {\nif (drawingNew instanceof XSSFDrawing) {\nList&lt;XSSFShape&gt; shapes = ((XSSFDrawing) drawingOld).getShapes();\nfor (int i = 0; i &lt; shapes.size(); i++) {\nif (shapes.get(i) instanceof XSSFPicture) {\nXSSFPicture pic = (XSSFPicture) shapes.get(i);\nXSSFPictureData picdata = pic.getPictureData();\nint pictureIndex = newSheet.getWorkbook().addPicture(picdata.getData(),\npicdata.getPictureType());\nXSSFClientAnchor anchor = null;\nCTTwoCellAnchor oldAnchor = ((XSSFDrawing) drawingOld).getCTDrawing().getTwoCellAnchorArray(i);\nif (oldAnchor != null) {\nanchor = (XSSFClientAnchor) helper.createClientAnchor();\nCTMarker markerFrom = oldAnchor.getFrom();\nCTMarker markerTo = oldAnchor.getTo();\nanchor.setDx1((int) markerFrom.getColOff());\nanchor.setDx2((int) markerTo.getColOff());\nanchor.setDy1((int) markerFrom.getRowOff());\nanchor.setDy2((int) markerTo.getRowOff());\nanchor.setCol1(markerFrom.getCol());\nanchor.setCol2(markerTo.getCol());\nanchor.setRow1(markerFrom.getRow());\nanchor.setRow2(markerTo.getRow());\n}\ndrawingNew.createPicture(anchor, pictureIndex);\n}\n}\n}\n}\n}\n\nprivate static void copyCell(Cell oldCell, Cell newCell, List&lt;CellStyle&gt; styleList) {\nif (styleList != null) {\nif (oldCell.getSheet().getWorkbook() == newCell.getSheet().getWorkbook()) {\nnewCell.setCellStyle(oldCell.getCellStyle());\n} else {\nDataFormat newDataFormat = newCell.getSheet().getWorkbook().createDataFormat();\n\nCellStyle newCellStyle = getSameCellStyle(oldCell, newCell, styleList);\nif (newCellStyle == null) {\n// Create a new cell style\nFont oldFont = oldCell.getSheet().getWorkbook().getFontAt(oldCell.getCellStyle().getFontIndex());\n// Find a existing font corresponding to avoid to create a\n// new one\nFont newFont = newCell\n.getSheet()\n.getWorkbook()\n.findFont(oldFont.getBoldweight(), oldFont.getColor(), oldFont.getFontHeight(),\noldFont.getFontName(), oldFont.getItalic(), oldFont.getStrikeout(),\noldFont.getTypeOffset(), oldFont.getUnderline());\nif (newFont == null) {\nnewFont = newCell.getSheet().getWorkbook().createFont();\nnewFont.setBoldweight(oldFont.getBoldweight());\nnewFont.setColor(oldFont.getColor());\nnewFont.setFontHeight(oldFont.getFontHeight());\nnewFont.setFontName(oldFont.getFontName());\nnewFont.setItalic(oldFont.getItalic());\nnewFont.setStrikeout(oldFont.getStrikeout());\nnewFont.setTypeOffset(oldFont.getTypeOffset());\nnewFont.setUnderline(oldFont.getUnderline());\nnewFont.setCharSet(oldFont.getCharSet());\n}\n\nshort newFormat = newDataFormat.getFormat(oldCell.getCellStyle().getDataFormatString());\nnewCellStyle = newCell.getSheet().getWorkbook().createCellStyle();\nnewCellStyle.setFont(newFont);\nnewCellStyle.setDataFormat(newFormat);\n\nnewCellStyle.setAlignment(oldCell.getCellStyle().getAlignment());\nnewCellStyle.setHidden(oldCell.getCellStyle().getHidden());\nnewCellStyle.setLocked(oldCell.getCellStyle().getLocked());\nnewCellStyle.setWrapText(oldCell.getCellStyle().getWrapText());\nnewCellStyle.setBorderBottom(oldCell.getCellStyle().getBorderBottom());\nnewCellStyle.setBorderLeft(oldCell.getCellStyle().getBorderLeft());\nnewCellStyle.setBorderRight(oldCell.getCellStyle().getBorderRight());\nnewCellStyle.setBorderTop(oldCell.getCellStyle().getBorderTop());\nnewCellStyle.setBottomBorderColor(oldCell.getCellStyle().getBottomBorderColor());\nnewCellStyle.setFillBackgroundColor(oldCell.getCellStyle().getFillBackgroundColor());\nnewCellStyle.setFillForegroundColor(oldCell.getCellStyle().getFillForegroundColor());\nnewCellStyle.setFillPattern(oldCell.getCellStyle().getFillPattern());\nnewCellStyle.setIndention(oldCell.getCellStyle().getIndention());\nnewCellStyle.setLeftBorderColor(oldCell.getCellStyle().getLeftBorderColor());\nnewCellStyle.setRightBorderColor(oldCell.getCellStyle().getRightBorderColor());\nnewCellStyle.setRotation(oldCell.getCellStyle().getRotation());\nnewCellStyle.setTopBorderColor(oldCell.getCellStyle().getTopBorderColor());\nnewCellStyle.setVerticalAlignment(oldCell.getCellStyle().getVerticalAlignment());\n\nstyleList.add(newCellStyle);\n}\nnewCell.setCellStyle(newCellStyle);\n}\n}\nswitch (oldCell.getCellType()) {\ncase Cell.CELL_TYPE_STRING:\nnewCell.setCellValue(oldCell.getStringCellValue());\nbreak;\ncase Cell.CELL_TYPE_NUMERIC:\nnewCell.setCellValue(oldCell.getNumericCellValue());\nbreak;\ncase Cell.CELL_TYPE_BLANK:\nnewCell.setCellType(Cell.CELL_TYPE_BLANK);\nbreak;\ncase Cell.CELL_TYPE_BOOLEAN:\nnewCell.setCellValue(oldCell.getBooleanCellValue());\nbreak;\ncase Cell.CELL_TYPE_ERROR:\nnewCell.setCellErrorValue(oldCell.getErrorCellValue());\nbreak;\ncase Cell.CELL_TYPE_FORMULA:\nnewCell.setCellFormula(oldCell.getCellFormula());\nformulaInfoList.add(new FormulaInfo(oldCell.getSheet().getSheetName(), oldCell.getRowIndex(), oldCell\n.getColumnIndex(), oldCell.getCellFormula()));\nbreak;\ndefault:\nbreak;\n}\n}\n\nprivate static CellStyle getSameCellStyle(Cell oldCell, Cell newCell, List&lt;CellStyle&gt; styleList) {\nCellStyle styleToFind = oldCell.getCellStyle();\nCellStyle currentCellStyle = null;\nCellStyle returnCellStyle = null;\nIterator&lt;CellStyle&gt; iterator = styleList.iterator();\nFont oldFont = null;\nFont newFont = null;\nwhile (iterator.hasNext() &amp;&amp; returnCellStyle == null) {\ncurrentCellStyle = iterator.next();\n\nif (currentCellStyle.getAlignment() != styleToFind.getAlignment()) {\ncontinue;\n}\nif (currentCellStyle.getHidden() != styleToFind.getHidden()) {\ncontinue;\n}\nif (currentCellStyle.getLocked() != styleToFind.getLocked()) {\ncontinue;\n}\nif (currentCellStyle.getWrapText() != styleToFind.getWrapText()) {\ncontinue;\n}\nif (currentCellStyle.getBorderBottom() != styleToFind.getBorderBottom()) {\ncontinue;\n}\nif (currentCellStyle.getBorderLeft() != styleToFind.getBorderLeft()) {\ncontinue;\n}\nif (currentCellStyle.getBorderRight() != styleToFind.getBorderRight()) {\ncontinue;\n}\nif (currentCellStyle.getBorderTop() != styleToFind.getBorderTop()) {\ncontinue;\n}\nif (currentCellStyle.getBottomBorderColor() != styleToFind.getBottomBorderColor()) {\ncontinue;\n}\nif (currentCellStyle.getFillBackgroundColor() != styleToFind.getFillBackgroundColor()) {\ncontinue;\n}\nif (currentCellStyle.getFillForegroundColor() != styleToFind.getFillForegroundColor()) {\ncontinue;\n}\nif (currentCellStyle.getFillPattern() != styleToFind.getFillPattern()) {\ncontinue;\n}\nif (currentCellStyle.getIndention() != styleToFind.getIndention()) {\ncontinue;\n}\nif (currentCellStyle.getLeftBorderColor() != styleToFind.getLeftBorderColor()) {\ncontinue;\n}\nif (currentCellStyle.getRightBorderColor() != styleToFind.getRightBorderColor()) {\ncontinue;\n}\nif (currentCellStyle.getRotation() != styleToFind.getRotation()) {\ncontinue;\n}\nif (currentCellStyle.getTopBorderColor() != styleToFind.getTopBorderColor()) {\ncontinue;\n}\nif (currentCellStyle.getVerticalAlignment() != styleToFind.getVerticalAlignment()) {\ncontinue;\n}\n\noldFont = oldCell.getSheet().getWorkbook().getFontAt(oldCell.getCellStyle().getFontIndex());\nnewFont = newCell.getSheet().getWorkbook().getFontAt(currentCellStyle.getFontIndex());\n\nif (newFont.getBoldweight() == oldFont.getBoldweight()) {\ncontinue;\n}\nif (newFont.getColor() == oldFont.getColor()) {\ncontinue;\n}\nif (newFont.getFontHeight() == oldFont.getFontHeight()) {\ncontinue;\n}\nif (newFont.getFontName() == oldFont.getFontName()) {\ncontinue;\n}\nif (newFont.getItalic() == oldFont.getItalic()) {\ncontinue;\n}\nif (newFont.getStrikeout() == oldFont.getStrikeout()) {\ncontinue;\n}\nif (newFont.getTypeOffset() == oldFont.getTypeOffset()) {\ncontinue;\n}\nif (newFont.getUnderline() == oldFont.getUnderline()) {\ncontinue;\n}\nif (newFont.getCharSet() == oldFont.getCharSet()) {\ncontinue;\n}\nif (oldCell.getCellStyle().getDataFormatString().equals(currentCellStyle.getDataFormatString())) {\ncontinue;\n}\n\nreturnCellStyle = currentCellStyle;\n}\nreturn returnCellStyle;\n}\n\nprivate static void copySheetSettings(Sheet newSheet, Sheet sheetToCopy) {\n\nnewSheet.setAutobreaks(sheetToCopy.getAutobreaks());\nnewSheet.setDefaultColumnWidth(sheetToCopy.getDefaultColumnWidth());\nnewSheet.setDefaultRowHeight(sheetToCopy.getDefaultRowHeight());\nnewSheet.setDefaultRowHeightInPoints(sheetToCopy.getDefaultRowHeightInPoints());\nnewSheet.setDisplayGuts(sheetToCopy.getDisplayGuts());\nnewSheet.setFitToPage(sheetToCopy.getFitToPage());\n\nnewSheet.setForceFormulaRecalculation(sheetToCopy.getForceFormulaRecalculation());\n\nPrintSetup sheetToCopyPrintSetup = sheetToCopy.getPrintSetup();\nPrintSetup newSheetPrintSetup = newSheet.getPrintSetup();\n\nnewSheetPrintSetup.setPaperSize(sheetToCopyPrintSetup.getPaperSize());\nnewSheetPrintSetup.setScale(sheetToCopyPrintSetup.getScale());\nnewSheetPrintSetup.setPageStart(sheetToCopyPrintSetup.getPageStart());\nnewSheetPrintSetup.setFitWidth(sheetToCopyPrintSetup.getFitWidth());\nnewSheetPrintSetup.setFitHeight(sheetToCopyPrintSetup.getFitHeight());\nnewSheetPrintSetup.setLeftToRight(sheetToCopyPrintSetup.getLeftToRight());\nnewSheetPrintSetup.setLandscape(sheetToCopyPrintSetup.getLandscape());\nnewSheetPrintSetup.setValidSettings(sheetToCopyPrintSetup.getValidSettings());\nnewSheetPrintSetup.setNoColor(sheetToCopyPrintSetup.getNoColor());\nnewSheetPrintSetup.setDraft(sheetToCopyPrintSetup.getDraft());\nnewSheetPrintSetup.setNotes(sheetToCopyPrintSetup.getNotes());\nnewSheetPrintSetup.setNoOrientation(sheetToCopyPrintSetup.getNoOrientation());\nnewSheetPrintSetup.setUsePage(sheetToCopyPrintSetup.getUsePage());\nnewSheetPrintSetup.setHResolution(sheetToCopyPrintSetup.getHResolution());\nnewSheetPrintSetup.setVResolution(sheetToCopyPrintSetup.getVResolution());\nnewSheetPrintSetup.setHeaderMargin(sheetToCopyPrintSetup.getHeaderMargin());\nnewSheetPrintSetup.setFooterMargin(sheetToCopyPrintSetup.getFooterMargin());\nnewSheetPrintSetup.setCopies(sheetToCopyPrintSetup.getCopies());\n\nHeader sheetToCopyHeader = sheetToCopy.getHeader();\nHeader newSheetHeader = newSheet.getHeader();\nnewSheetHeader.setCenter(sheetToCopyHeader.getCenter());\nnewSheetHeader.setLeft(sheetToCopyHeader.getLeft());\nnewSheetHeader.setRight(sheetToCopyHeader.getRight());\n\nFooter sheetToCopyFooter = sheetToCopy.getFooter();\nFooter newSheetFooter = newSheet.getFooter();\nnewSheetFooter.setCenter(sheetToCopyFooter.getCenter());\nnewSheetFooter.setLeft(sheetToCopyFooter.getLeft());\nnewSheetFooter.setRight(sheetToCopyFooter.getRight());\n\nnewSheet.setHorizontallyCenter(sheetToCopy.getHorizontallyCenter());\nnewSheet.setMargin(Sheet.LeftMargin, sheetToCopy.getMargin(Sheet.LeftMargin));\nnewSheet.setMargin(Sheet.RightMargin, sheetToCopy.getMargin(Sheet.RightMargin));\nnewSheet.setMargin(Sheet.TopMargin, sheetToCopy.getMargin(Sheet.TopMargin));\nnewSheet.setMargin(Sheet.BottomMargin, sheetToCopy.getMargin(Sheet.BottomMargin));\n\nnewSheet.setPrintGridlines(sheetToCopy.isPrintGridlines());\nnewSheet.setRowSumsBelow(sheetToCopy.getRowSumsBelow());\nnewSheet.setRowSumsRight(sheetToCopy.getRowSumsRight());\nnewSheet.setVerticallyCenter(sheetToCopy.getVerticallyCenter());\nnewSheet.setDisplayFormulas(sheetToCopy.isDisplayFormulas());\nnewSheet.setDisplayGridlines(sheetToCopy.isDisplayGridlines());\nnewSheet.setDisplayRowColHeadings(sheetToCopy.isDisplayRowColHeadings());\nnewSheet.setDisplayZeros(sheetToCopy.isDisplayZeros());\nnewSheet.setPrintGridlines(sheetToCopy.isPrintGridlines());\nnewSheet.setRightToLeft(sheetToCopy.isRightToLeft());\nnewSheet.setZoom(1, 1);\ncopyPrintTitle(newSheet, sheetToCopy);\n}\n\nprivate static void copyPrintTitle(Sheet newSheet, Sheet sheetToCopy) {\nint nbNames = sheetToCopy.getWorkbook().getNumberOfNames();\nName name = null;\nString formula = null;\n\nString part1S = null;\nString part2S = null;\nString formS = null;\nString formF = null;\nString part1F = null;\nString part2F = null;\nint rowB = -1;\nint rowE = -1;\nint colB = -1;\nint colE = -1;\n\nfor (int i = 0; i &lt; nbNames; i++) {\nname = sheetToCopy.getWorkbook().getNameAt(i);\nif (name.getSheetIndex() == sheetToCopy.getWorkbook().getSheetIndex(sheetToCopy)) {\nif (name.getNameName().equals(\"Print_Titles\")\n|| name.getNameName().equals(XSSFName.BUILTIN_PRINT_TITLE)) {\nformula = name.getRefersToFormula();\nint indexComma = formula.indexOf(\",\");\nif (indexComma == -1) {\nindexComma = formula.indexOf(\";\");\n}\nString firstPart = null;\n;\nString secondPart = null;\nif (indexComma == -1) {\nfirstPart = formula;\n} else {\nfirstPart = formula.substring(0, indexComma);\nsecondPart = formula.substring(indexComma + 1);\n}\n\nformF = firstPart.substring(firstPart.indexOf(\"!\") + 1);\npart1F = formF.substring(0, formF.indexOf(\":\"));\npart2F = formF.substring(formF.indexOf(\":\") + 1);\n\nif (secondPart != null) {\nformS = secondPart.substring(secondPart.indexOf(\"!\") + 1);\npart1S = formS.substring(0, formS.indexOf(\":\"));\npart2S = formS.substring(formS.indexOf(\":\") + 1);\n}\n\nrowB = -1;\nrowE = -1;\ncolB = -1;\ncolE = -1;\nString rowBs, rowEs, colBs, colEs;\nif (part1F.lastIndexOf(\"$\") != part1F.indexOf(\"$\")) {\nrowBs = part1F.substring(part1F.lastIndexOf(\"$\") + 1, part1F.length());\nrowEs = part2F.substring(part2F.lastIndexOf(\"$\") + 1, part2F.length());\nrowB = Integer.parseInt(rowBs);\nrowE = Integer.parseInt(rowEs);\nif (secondPart != null) {\ncolBs = part1S.substring(part1S.lastIndexOf(\"$\") + 1, part1S.length());\ncolEs = part2S.substring(part2S.lastIndexOf(\"$\") + 1, part2S.length());\ncolB = CellReference.convertColStringToIndex(colBs);// CExportExcelHelperPoi.convertColumnLetterToInt(colBs);\ncolE = CellReference.convertColStringToIndex(colEs);// CExportExcelHelperPoi.convertColumnLetterToInt(colEs);\n}\n} else {\ncolBs = part1F.substring(part1F.lastIndexOf(\"$\") + 1, part1F.length());\ncolEs = part2F.substring(part2F.lastIndexOf(\"$\") + 1, part2F.length());\ncolB = CellReference.convertColStringToIndex(colBs);// CExportExcelHelperPoi.convertColumnLetterToInt(colBs);\ncolE = CellReference.convertColStringToIndex(colEs);// CExportExcelHelperPoi.convertColumnLetterToInt(colEs);\n\nif (secondPart != null) {\nrowBs = part1S.substring(part1S.lastIndexOf(\"$\") + 1, part1S.length());\nrowEs = part2S.substring(part2S.lastIndexOf(\"$\") + 1, part2S.length());\nrowB = Integer.parseInt(rowBs);\nrowE = Integer.parseInt(rowEs);\n}\n}\n\nnewSheet.getWorkbook().setRepeatingRowsAndColumns(newSheet.getWorkbook().getSheetIndex(newSheet),\ncolB, colE, rowB - 1, rowE - 1);\n}\n}\n}\n}\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":14201611,"reputation":1,"user_id":10259380,"display_name":"Triqui"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538476798,"creation_date":1538476798,"answer_id":52606708,"question_id":7230819,"body_markdown":"I have implemented some code to copy workbooks no matter their type: It uses interfaces, so you can use HSSFWorkbook, XSSFWorkbook and SXSSFWorkbook.\r\n\r\nThis copies sheets with pictures, fonts, styles and rows:\r\nFor my use case I need to insert new rows in an existing template and write to an SXSSFWorkbook, so I don&#39;t copy all the sheets and rows directly but instead I choose the sheets i want to copy and then copy the portions of it that I want.\r\n\r\n    \tWorkbook template = getTemplateSource(...);\r\n        Workbook wb = new SXSSFWorkbook(...);\r\n        ExcelTemplate builder = new ExcelTemplate(template);\r\n\r\n        int sheetIndex = ...;\r\n\t\tSheet srcSheet = template.getSheetAt(sheetIndex);\r\n\t\tSheet dstSheet = ExcelTemplate.copySheet(template, wb, sheetIndex);\r\n\t\tint rowNumber = getDataInsertionRow();\r\n\t\tint foot = rowNumber + 1;\r\n\t\tbuilder.copyRows(wb, srcSheet, dstSheet, 0, rowNumber, 0);\r\n\t\tfor (....) {\r\n\t\t\twriteNewRows(dstSheet, rowNumber++, data);\r\n\t\t}\r\n\t\tbuilder.copyRows(wb, srcSheet, dstSheet, foot, srcSheet.getLastRowNum() + 1, rowNumber);\r\n\r\n\r\nAnd here is the code (I tried to delete all my tests, but maybe I forgot some unused lines)\r\n\r\n    package com.systemonenoc.billing.web.view;\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    import org.apache.poi.ss.usermodel.Cell;\r\n    import org.apache.poi.ss.usermodel.CellStyle;\r\n    import org.apache.poi.ss.usermodel.ClientAnchor;\r\n    import org.apache.poi.ss.usermodel.DataFormat;\r\n    import org.apache.poi.ss.usermodel.Drawing;\r\n    import org.apache.poi.ss.usermodel.Font;\r\n    import org.apache.poi.ss.usermodel.Picture;\r\n    import org.apache.poi.ss.usermodel.Row;\r\n    import org.apache.poi.ss.usermodel.Shape;\r\n    import org.apache.poi.ss.usermodel.Sheet;\r\n    import org.apache.poi.ss.usermodel.Workbook;\r\n    \r\n    public class ExcelTemplate {\r\n    \r\n    \tprivate final Workbook template;\r\n    \tprivate final Map&lt;Integer, Font&gt; fonts = new HashMap&lt;&gt;();\r\n    \tprivate final Map&lt;Integer, CellStyle&gt; styles = new HashMap&lt;&gt;();\r\n    \r\n    \tpublic ExcelTemplate(Workbook template) {\r\n    \t\tthis.template = template;\r\n    \t}\r\n    \r\n    \tpublic void switchStyles(Workbook dstWorkbook, CellStyle[] styles) {\r\n    \t\tfor (int i = 0; i &lt; styles.length; i++) {\r\n    \t\t\tstyles[i] = getStyle(dstWorkbook, styles[i]);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate Font getFont(Workbook dstWorkbook, Font font) {\r\n    \t\treturn fonts.computeIfAbsent(font.hashCode(), k -&gt; cloneFont(dstWorkbook, font));\r\n    \t}\r\n    \r\n    \tprivate CellStyle getStyle(Workbook dstWorkbook, CellStyle style) {\r\n    \t\tFont font = getFont(dstWorkbook, template.getFontAt(style.getFontIndex()));\r\n    \t\treturn styles.computeIfAbsent(style.hashCode(), k -&gt; cloneStyle(dstWorkbook, style, dstWorkbook.createDataFormat(), font));\r\n    \t}\r\n    \r\n    \tpublic void copyRows(Workbook dstWorkbook, Sheet srcSheet, Sheet dstSheet, int from, int to, int offset) {\r\n    \t\tfor (int r = from; r &lt; to; r++) {\r\n    \t\t\tRow srcRow = srcSheet.getRow(r);\r\n    \t\t\tif (srcRow != null) {\r\n    \t\t\t\tCellStyle style = srcRow.getRowStyle();\r\n    \t\t\t\tRow dstRow = dstSheet.createRow(r + offset);\r\n    \t\t\t\tdstRow.setHeight(srcRow.getHeight());\r\n    \t\t\t\tif (style != null) {\r\n    \t\t\t\t\tdstRow.setRowStyle(getStyle(dstWorkbook, style));\r\n    \t\t\t\t}\r\n    \t\t\t\tfor (int c = 0; c &lt; srcRow.getLastCellNum(); c++) {\r\n    \t\t\t\t\tCell srcCell = srcRow.getCell(c);\r\n    \t\t\t\t\tif (srcCell != null) {\r\n    \t\t\t\t\t\tint type = getCellType(srcCell);\r\n    \t\t\t\t\t\tObject value = getCellValue(srcCell);\r\n    \t\t\t\t\t\tstyle = srcCell.getCellStyle();\r\n    \t\t\t\t\t\tCell newCell = dstRow.createCell(c, type);\r\n    \t\t\t\t\t\tsetCellValue(newCell, value, type);\r\n    \t\t\t\t\t\tnewCell.setCellStyle(getStyle(dstWorkbook, style));\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static Sheet copySheet(Workbook srcWorkbook, Workbook dstWorkbook, int sheetIndex) {\r\n    \t\tSheet srcSheet = srcWorkbook.getSheetAt(sheetIndex);\r\n    \t\tSheet dstSheet = dstWorkbook.createSheet(srcSheet.getSheetName());\r\n    \t\tdstSheet.setDisplayFormulas(srcSheet.isDisplayFormulas());\r\n    \t\tdstSheet.setDisplayGridlines(srcSheet.isDisplayGridlines());\r\n    \t\tdstSheet.setDisplayGuts(srcSheet.getDisplayGuts());\r\n    \t\tdstSheet.setDisplayRowColHeadings(srcSheet.isDisplayRowColHeadings());\r\n    \t\tdstSheet.setDisplayZeros(srcSheet.isDisplayZeros());\r\n    \t\tdstSheet.setFitToPage(srcSheet.getFitToPage());\r\n    \t\tdstSheet.setForceFormulaRecalculation(srcSheet.getForceFormulaRecalculation());\r\n    \t\tdstSheet.setHorizontallyCenter(srcSheet.getHorizontallyCenter());\r\n    \t\tdstSheet.setMargin(Sheet.BottomMargin, srcSheet.getMargin(Sheet.BottomMargin));\r\n    \t\tdstSheet.setMargin(Sheet.FooterMargin, srcSheet.getMargin(Sheet.FooterMargin));\r\n    \t\tdstSheet.setMargin(Sheet.HeaderMargin, srcSheet.getMargin(Sheet.HeaderMargin));\r\n    \t\tdstSheet.setMargin(Sheet.LeftMargin, srcSheet.getMargin(Sheet.LeftMargin));\r\n    \t\tdstSheet.setMargin(Sheet.RightMargin, srcSheet.getMargin(Sheet.RightMargin));\r\n    \t\tdstSheet.setMargin(Sheet.TopMargin, srcSheet.getMargin(Sheet.TopMargin));\r\n    \t\tdstSheet.setPrintGridlines(srcSheet.isPrintGridlines());\r\n    \t\tdstSheet.setRightToLeft(srcSheet.isRightToLeft());\r\n    \t\tdstSheet.setRowSumsBelow(srcSheet.getRowSumsBelow());\r\n    \t\tdstSheet.setRowSumsRight(srcSheet.getRowSumsRight());\r\n    \t\tdstSheet.setVerticallyCenter(srcSheet.getVerticallyCenter());\r\n    \t\tfor (int i = 0; i &lt; 20; i++) {\r\n    \t\t\tdstSheet.setColumnWidth(i, srcSheet.getColumnWidth(i));\r\n    \t\t\tdstSheet.setColumnHidden(i, srcSheet.isColumnHidden(i));\r\n    \t\t}\r\n    \t\tsrcSheet.getMergedRegions().forEach(dstSheet::addMergedRegion);\r\n    \t\tDrawing&lt;?&gt; d1 = srcSheet.getDrawingPatriarch();\r\n    \t\tif (d1 != null) {\r\n    \t\t\tDrawing&lt;?&gt; d2 = dstSheet.getDrawingPatriarch();\r\n    \t\t\tif (d2 == null) {\r\n    \t\t\t\td2 = dstSheet.createDrawingPatriarch();\r\n    \t\t\t}\r\n    \t\t\tfor (Shape shape : d1) {\r\n    \t\t\t\tif (shape instanceof Picture) {\r\n    \t\t\t\t\tPicture p = (Picture) shape;\r\n    \t\t\t\t\tClientAnchor a1 = p.getClientAnchor();\r\n    \t\t\t\t\tint pictureId = dstWorkbook.addPicture(p.getPictureData().getData(), p.getPictureData().getPictureType());\r\n    \t\t\t\t\tClientAnchor a2 = d2.createAnchor(a1.getDx1(), a1.getDy1(), a1.getDx2(), a1.getDy2(), a1.getCol1(), a1.getRow1(), a1.getCol2(), a1.getRow2());\r\n    \t\t\t\t\td2.createPicture(a2, pictureId);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn dstSheet;\r\n    \t}\r\n    \r\n    \tpublic static Font cloneFont(Workbook dstWorkbook, Font font) {\r\n    \t\tFont clone = dstWorkbook.createFont();\r\n    \t\tclone.setBold(font.getBold());\r\n    \t\tclone.setCharSet(font.getCharSet());\r\n    \t\tclone.setColor(font.getColor());\r\n    \t\tclone.setFontHeight(font.getFontHeight());\r\n    \t\tclone.setFontName(font.getFontName());\r\n    \t\tclone.setItalic(font.getItalic());\r\n    \t\tclone.setStrikeout(font.getStrikeout());\r\n    \t\tclone.setTypeOffset(font.getTypeOffset());\r\n    \t\tclone.setUnderline(font.getUnderline());\r\n    \t\treturn clone;\r\n    \t}\r\n    \r\n    \tpublic static CellStyle cloneStyle(Workbook dstWorkbook, CellStyle style, DataFormat formatter, Font font) {\r\n    \t\tCellStyle clone = dstWorkbook.createCellStyle();\r\n    \t\tclone.setAlignment(style.getAlignmentEnum());\r\n    \t\tclone.setBorderBottom(style.getBorderBottomEnum());\r\n    \t\tclone.setBorderLeft(style.getBorderLeftEnum());\r\n    \t\tclone.setBorderRight(style.getBorderRightEnum());\r\n    \t\tclone.setBorderTop(style.getBorderTopEnum());\r\n    \t\tclone.setDataFormat(formatter.getFormat(style.getDataFormatString()));\r\n    \t\tclone.setFillBackgroundColor(style.getFillBackgroundColor());\r\n    \t\tclone.setFillForegroundColor(style.getFillForegroundColor());\r\n    \t\tclone.setFillPattern(style.getFillPatternEnum());\r\n    \t\tclone.setFont(font);\r\n    \t\tclone.setHidden(style.getHidden());\r\n    \t\tclone.setIndention(style.getIndention());\r\n    \t\tclone.setLocked(style.getLocked());\r\n    \t\tclone.setVerticalAlignment(style.getVerticalAlignmentEnum());\r\n    \t\tclone.setWrapText(style.getWrapText());\r\n    \t\treturn clone;\r\n    \t}\r\n    \r\n    \tprotected static int getCellType(Cell cell) {\r\n    \t\tint cellType = cell.getCellType();\r\n    \t\tif (cellType == Cell.CELL_TYPE_FORMULA) {\r\n    \t\t\tcellType = cell.getSheet().getWorkbook().getCreationHelper().createFormulaEvaluator()\r\n    \t\t\t\t\t.evaluateFormulaCell(cell);\r\n    \t\t}\r\n    \t\treturn cellType;\r\n    \t}\r\n    \r\n    \tprotected static Object getCellValue(Cell cell) {\r\n    \t\tswitch (getCellType(cell)) {\r\n    \t\tcase Cell.CELL_TYPE_BLANK:\r\n    \t\tcase Cell.CELL_TYPE_STRING:\r\n    \t\t\treturn cell.getStringCellValue();\r\n    \t\tcase Cell.CELL_TYPE_BOOLEAN:\r\n    \t\t\treturn cell.getBooleanCellValue();\r\n    \t\tcase Cell.CELL_TYPE_ERROR:\r\n    \t\t\treturn cell.getErrorCellValue();\r\n    \t\tcase Cell.CELL_TYPE_NUMERIC:\r\n    \t\t\treturn cell.getNumericCellValue();\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \tprotected static void setCellValue(Cell cell, Object value, int type) {\r\n    \t\tswitch (type) {\r\n    \t\tcase Cell.CELL_TYPE_BLANK:\r\n    \t\t\treturn;\r\n    \t\tcase Cell.CELL_TYPE_STRING:\r\n    \t\t\tcell.setCellValue((String) value);\r\n    \t\t\treturn;\r\n    \t\tcase Cell.CELL_TYPE_BOOLEAN:\r\n    \t\t\tcell.setCellValue((Boolean) value);\r\n    \t\t\treturn;\r\n    \t\tcase Cell.CELL_TYPE_ERROR:\r\n    \t\t\tcell.setCellErrorValue((Byte) value);\r\n    \t\t\treturn;\r\n    \t\tcase Cell.CELL_TYPE_NUMERIC:\r\n    \t\t\tcell.setCellValue((Double) value);\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<p>I have implemented some code to copy workbooks no matter their type: It uses interfaces, so you can use HSSFWorkbook, XSSFWorkbook and SXSSFWorkbook.</p>\n\n<p>This copies sheets with pictures, fonts, styles and rows:\nFor my use case I need to insert new rows in an existing template and write to an SXSSFWorkbook, so I don't copy all the sheets and rows directly but instead I choose the sheets i want to copy and then copy the portions of it that I want.</p>\n\n<pre><code>    Workbook template = getTemplateSource(...);\n    Workbook wb = new SXSSFWorkbook(...);\n    ExcelTemplate builder = new ExcelTemplate(template);\n\n    int sheetIndex = ...;\n    Sheet srcSheet = template.getSheetAt(sheetIndex);\n    Sheet dstSheet = ExcelTemplate.copySheet(template, wb, sheetIndex);\n    int rowNumber = getDataInsertionRow();\n    int foot = rowNumber + 1;\n    builder.copyRows(wb, srcSheet, dstSheet, 0, rowNumber, 0);\n    for (....) {\n        writeNewRows(dstSheet, rowNumber++, data);\n    }\n    builder.copyRows(wb, srcSheet, dstSheet, foot, srcSheet.getLastRowNum() + 1, rowNumber);\n</code></pre>\n\n<p>And here is the code (I tried to delete all my tests, but maybe I forgot some unused lines)</p>\n\n<pre><code>package com.systemonenoc.billing.web.view;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.CellStyle;\nimport org.apache.poi.ss.usermodel.ClientAnchor;\nimport org.apache.poi.ss.usermodel.DataFormat;\nimport org.apache.poi.ss.usermodel.Drawing;\nimport org.apache.poi.ss.usermodel.Font;\nimport org.apache.poi.ss.usermodel.Picture;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.usermodel.Shape;\nimport org.apache.poi.ss.usermodel.Sheet;\nimport org.apache.poi.ss.usermodel.Workbook;\n\npublic class ExcelTemplate {\n\n    private final Workbook template;\n    private final Map&lt;Integer, Font&gt; fonts = new HashMap&lt;&gt;();\n    private final Map&lt;Integer, CellStyle&gt; styles = new HashMap&lt;&gt;();\n\n    public ExcelTemplate(Workbook template) {\n        this.template = template;\n    }\n\n    public void switchStyles(Workbook dstWorkbook, CellStyle[] styles) {\n        for (int i = 0; i &lt; styles.length; i++) {\n            styles[i] = getStyle(dstWorkbook, styles[i]);\n        }\n    }\n\n    private Font getFont(Workbook dstWorkbook, Font font) {\n        return fonts.computeIfAbsent(font.hashCode(), k -&gt; cloneFont(dstWorkbook, font));\n    }\n\n    private CellStyle getStyle(Workbook dstWorkbook, CellStyle style) {\n        Font font = getFont(dstWorkbook, template.getFontAt(style.getFontIndex()));\n        return styles.computeIfAbsent(style.hashCode(), k -&gt; cloneStyle(dstWorkbook, style, dstWorkbook.createDataFormat(), font));\n    }\n\n    public void copyRows(Workbook dstWorkbook, Sheet srcSheet, Sheet dstSheet, int from, int to, int offset) {\n        for (int r = from; r &lt; to; r++) {\n            Row srcRow = srcSheet.getRow(r);\n            if (srcRow != null) {\n                CellStyle style = srcRow.getRowStyle();\n                Row dstRow = dstSheet.createRow(r + offset);\n                dstRow.setHeight(srcRow.getHeight());\n                if (style != null) {\n                    dstRow.setRowStyle(getStyle(dstWorkbook, style));\n                }\n                for (int c = 0; c &lt; srcRow.getLastCellNum(); c++) {\n                    Cell srcCell = srcRow.getCell(c);\n                    if (srcCell != null) {\n                        int type = getCellType(srcCell);\n                        Object value = getCellValue(srcCell);\n                        style = srcCell.getCellStyle();\n                        Cell newCell = dstRow.createCell(c, type);\n                        setCellValue(newCell, value, type);\n                        newCell.setCellStyle(getStyle(dstWorkbook, style));\n                    }\n                }\n            }\n        }\n    }\n\n    public static Sheet copySheet(Workbook srcWorkbook, Workbook dstWorkbook, int sheetIndex) {\n        Sheet srcSheet = srcWorkbook.getSheetAt(sheetIndex);\n        Sheet dstSheet = dstWorkbook.createSheet(srcSheet.getSheetName());\n        dstSheet.setDisplayFormulas(srcSheet.isDisplayFormulas());\n        dstSheet.setDisplayGridlines(srcSheet.isDisplayGridlines());\n        dstSheet.setDisplayGuts(srcSheet.getDisplayGuts());\n        dstSheet.setDisplayRowColHeadings(srcSheet.isDisplayRowColHeadings());\n        dstSheet.setDisplayZeros(srcSheet.isDisplayZeros());\n        dstSheet.setFitToPage(srcSheet.getFitToPage());\n        dstSheet.setForceFormulaRecalculation(srcSheet.getForceFormulaRecalculation());\n        dstSheet.setHorizontallyCenter(srcSheet.getHorizontallyCenter());\n        dstSheet.setMargin(Sheet.BottomMargin, srcSheet.getMargin(Sheet.BottomMargin));\n        dstSheet.setMargin(Sheet.FooterMargin, srcSheet.getMargin(Sheet.FooterMargin));\n        dstSheet.setMargin(Sheet.HeaderMargin, srcSheet.getMargin(Sheet.HeaderMargin));\n        dstSheet.setMargin(Sheet.LeftMargin, srcSheet.getMargin(Sheet.LeftMargin));\n        dstSheet.setMargin(Sheet.RightMargin, srcSheet.getMargin(Sheet.RightMargin));\n        dstSheet.setMargin(Sheet.TopMargin, srcSheet.getMargin(Sheet.TopMargin));\n        dstSheet.setPrintGridlines(srcSheet.isPrintGridlines());\n        dstSheet.setRightToLeft(srcSheet.isRightToLeft());\n        dstSheet.setRowSumsBelow(srcSheet.getRowSumsBelow());\n        dstSheet.setRowSumsRight(srcSheet.getRowSumsRight());\n        dstSheet.setVerticallyCenter(srcSheet.getVerticallyCenter());\n        for (int i = 0; i &lt; 20; i++) {\n            dstSheet.setColumnWidth(i, srcSheet.getColumnWidth(i));\n            dstSheet.setColumnHidden(i, srcSheet.isColumnHidden(i));\n        }\n        srcSheet.getMergedRegions().forEach(dstSheet::addMergedRegion);\n        Drawing&lt;?&gt; d1 = srcSheet.getDrawingPatriarch();\n        if (d1 != null) {\n            Drawing&lt;?&gt; d2 = dstSheet.getDrawingPatriarch();\n            if (d2 == null) {\n                d2 = dstSheet.createDrawingPatriarch();\n            }\n            for (Shape shape : d1) {\n                if (shape instanceof Picture) {\n                    Picture p = (Picture) shape;\n                    ClientAnchor a1 = p.getClientAnchor();\n                    int pictureId = dstWorkbook.addPicture(p.getPictureData().getData(), p.getPictureData().getPictureType());\n                    ClientAnchor a2 = d2.createAnchor(a1.getDx1(), a1.getDy1(), a1.getDx2(), a1.getDy2(), a1.getCol1(), a1.getRow1(), a1.getCol2(), a1.getRow2());\n                    d2.createPicture(a2, pictureId);\n                }\n            }\n        }\n        return dstSheet;\n    }\n\n    public static Font cloneFont(Workbook dstWorkbook, Font font) {\n        Font clone = dstWorkbook.createFont();\n        clone.setBold(font.getBold());\n        clone.setCharSet(font.getCharSet());\n        clone.setColor(font.getColor());\n        clone.setFontHeight(font.getFontHeight());\n        clone.setFontName(font.getFontName());\n        clone.setItalic(font.getItalic());\n        clone.setStrikeout(font.getStrikeout());\n        clone.setTypeOffset(font.getTypeOffset());\n        clone.setUnderline(font.getUnderline());\n        return clone;\n    }\n\n    public static CellStyle cloneStyle(Workbook dstWorkbook, CellStyle style, DataFormat formatter, Font font) {\n        CellStyle clone = dstWorkbook.createCellStyle();\n        clone.setAlignment(style.getAlignmentEnum());\n        clone.setBorderBottom(style.getBorderBottomEnum());\n        clone.setBorderLeft(style.getBorderLeftEnum());\n        clone.setBorderRight(style.getBorderRightEnum());\n        clone.setBorderTop(style.getBorderTopEnum());\n        clone.setDataFormat(formatter.getFormat(style.getDataFormatString()));\n        clone.setFillBackgroundColor(style.getFillBackgroundColor());\n        clone.setFillForegroundColor(style.getFillForegroundColor());\n        clone.setFillPattern(style.getFillPatternEnum());\n        clone.setFont(font);\n        clone.setHidden(style.getHidden());\n        clone.setIndention(style.getIndention());\n        clone.setLocked(style.getLocked());\n        clone.setVerticalAlignment(style.getVerticalAlignmentEnum());\n        clone.setWrapText(style.getWrapText());\n        return clone;\n    }\n\n    protected static int getCellType(Cell cell) {\n        int cellType = cell.getCellType();\n        if (cellType == Cell.CELL_TYPE_FORMULA) {\n            cellType = cell.getSheet().getWorkbook().getCreationHelper().createFormulaEvaluator()\n                    .evaluateFormulaCell(cell);\n        }\n        return cellType;\n    }\n\n    protected static Object getCellValue(Cell cell) {\n        switch (getCellType(cell)) {\n        case Cell.CELL_TYPE_BLANK:\n        case Cell.CELL_TYPE_STRING:\n            return cell.getStringCellValue();\n        case Cell.CELL_TYPE_BOOLEAN:\n            return cell.getBooleanCellValue();\n        case Cell.CELL_TYPE_ERROR:\n            return cell.getErrorCellValue();\n        case Cell.CELL_TYPE_NUMERIC:\n            return cell.getNumericCellValue();\n        }\n        return null;\n    }\n\n    protected static void setCellValue(Cell cell, Object value, int type) {\n        switch (type) {\n        case Cell.CELL_TYPE_BLANK:\n            return;\n        case Cell.CELL_TYPE_STRING:\n            cell.setCellValue((String) value);\n            return;\n        case Cell.CELL_TYPE_BOOLEAN:\n            cell.setCellValue((Boolean) value);\n            return;\n        case Cell.CELL_TYPE_ERROR:\n            cell.setCellErrorValue((Byte) value);\n            return;\n        case Cell.CELL_TYPE_NUMERIC:\n            cell.setCellValue((Double) value);\n            return;\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28515819,"reputation":1,"user_id":21825195,"display_name":"Sergei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683282404,"creation_date":1683282404,"answer_id":76181222,"question_id":7230819,"body_markdown":"My solution to the problem. Working code\r\n\r\n    public SXSSFWorkbook createSXSSFWorkbookFromXSSFWorkbook(XSSFWorkbook sourceWorkbook)   {\r\n        SXSSFWorkbook targetWorkbook = new SXSSFWorkbook();\r\n\r\n        // Loop through each sheet in XSSFWorkbook\r\n        for (int i = 0; i &lt; sourceWorkbook.getNumberOfSheets(); i++) {\r\n            XSSFSheet sourceSheet = sourceWorkbook.getSheetAt(i);\r\n            SXSSFSheet targetSheet = targetWorkbook.createSheet(sourceSheet.getSheetName());\r\n            String sheetName = sourceSheet.getSheetName();\r\n\r\n            // Loop through each row in XSSFSheet\r\n            for (Row sourceRow : sourceSheet) {\r\n                SXSSFRow targetRow = targetSheet.createRow(sourceRow.getRowNum());\r\n                targetSheet.setRandomAccessWindowSize(1000000);\r\n\r\n                // Loop through each cell in XSSFRow\r\n                Iterator&lt;Cell&gt; cellIterator = sourceRow.cellIterator();\r\n                while (cellIterator.hasNext()) {\r\n                    Cell sourceCell = cellIterator.next();\r\n                    SXSSFCell targetCell = targetRow.createCell(sourceCell.getColumnIndex());\r\n\r\n                    // Copy cell value from source to target\r\n                    importUtility.copyCellValue(sourceCell, targetCell, targetWorkbook);\r\n                }\r\n            }\r\n            setWidthColumn(sourceSheet, targetSheet);\r\n\r\n            //hide Row with legends\r\n            if (!META.equals(sheetName) &amp;&amp; !NSI.equals(sheetName)) {\r\n                targetSheet.getRow(1).setHidden(true);\r\n            }\r\n        }\r\n\r\n        return targetWorkbook;\r\n    }\r\n\r\n    private void setWidthColumn(XSSFSheet sourceSheet, SXSSFSheet targetSheet) {\r\n        if (sourceSheet.getRow(0) == null) {\r\n            logger.warn(&quot;Sheet [&#39;{}&#39;] doesn&#39;t have row number 0 or sheet is empty&quot;, sourceSheet.getSheetName());\r\n        } else {\r\n            for (int j = 0; j &lt; sourceSheet.getRow(0).getLastCellNum(); j++) {\r\n                if (sourceSheet.getRow(0).getCell(j) == null) {\r\n                    break;\r\n                }\r\n                int length = sourceSheet.getRow(0).getCell(j).getStringCellValue().length();\r\n                if (length &lt; 20) {\r\n                    targetSheet.setColumnWidth(j, 20 * 256);\r\n                } else {\r\n                    targetSheet.setColumnWidth(j, (length + 5) * 256);\r\n                }\r\n            }\r\n        }\r\n    }","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<p>My solution to the problem. Working code</p>\n<pre><code>public SXSSFWorkbook createSXSSFWorkbookFromXSSFWorkbook(XSSFWorkbook sourceWorkbook)   {\n    SXSSFWorkbook targetWorkbook = new SXSSFWorkbook();\n\n    // Loop through each sheet in XSSFWorkbook\n    for (int i = 0; i &lt; sourceWorkbook.getNumberOfSheets(); i++) {\n        XSSFSheet sourceSheet = sourceWorkbook.getSheetAt(i);\n        SXSSFSheet targetSheet = targetWorkbook.createSheet(sourceSheet.getSheetName());\n        String sheetName = sourceSheet.getSheetName();\n\n        // Loop through each row in XSSFSheet\n        for (Row sourceRow : sourceSheet) {\n            SXSSFRow targetRow = targetSheet.createRow(sourceRow.getRowNum());\n            targetSheet.setRandomAccessWindowSize(1000000);\n\n            // Loop through each cell in XSSFRow\n            Iterator&lt;Cell&gt; cellIterator = sourceRow.cellIterator();\n            while (cellIterator.hasNext()) {\n                Cell sourceCell = cellIterator.next();\n                SXSSFCell targetCell = targetRow.createCell(sourceCell.getColumnIndex());\n\n                // Copy cell value from source to target\n                importUtility.copyCellValue(sourceCell, targetCell, targetWorkbook);\n            }\n        }\n        setWidthColumn(sourceSheet, targetSheet);\n\n        //hide Row with legends\n        if (!META.equals(sheetName) &amp;&amp; !NSI.equals(sheetName)) {\n            targetSheet.getRow(1).setHidden(true);\n        }\n    }\n\n    return targetWorkbook;\n}\n\nprivate void setWidthColumn(XSSFSheet sourceSheet, SXSSFSheet targetSheet) {\n    if (sourceSheet.getRow(0) == null) {\n        logger.warn(&quot;Sheet ['{}'] doesn't have row number 0 or sheet is empty&quot;, sourceSheet.getSheetName());\n    } else {\n        for (int j = 0; j &lt; sourceSheet.getRow(0).getLastCellNum(); j++) {\n            if (sourceSheet.getRow(0).getCell(j) == null) {\n                break;\n            }\n            int length = sourceSheet.getRow(0).getCell(j).getStringCellValue().length();\n            if (length &lt; 20) {\n                targetSheet.setColumnWidth(j, 20 * 256);\n            } else {\n                targetSheet.setColumnWidth(j, (length + 5) * 256);\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":431744,"reputation":363,"user_id":816016,"display_name":"Bhuvanesh Phadnis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55218,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":7297596,"answer_count":8,"score":14,"last_activity_date":1683282404,"creation_date":1314624719,"question_id":7230819,"body_markdown":"How to convert\r\n\r\n    org.apache.poi.hssf.usermodel.HSSFWorkbook\r\n\r\n to \r\n\r\n    org.apache.poi.xssf.usermodel.XSSFWorkbook\r\n\r\nin Apache POI?\r\n\r\nEnvironment :\r\n\r\n - JSE1.6\r\n - JBossAS 4.3.2\r\n - POI 3.7\r\n\r\n","title":"How to convert HSSFWorkbook to XSSFWorkbook using Apache POI?","body":"<p>How to convert</p>\n\n<pre><code>org.apache.poi.hssf.usermodel.HSSFWorkbook\n</code></pre>\n\n<p>to </p>\n\n<pre><code>org.apache.poi.xssf.usermodel.XSSFWorkbook\n</code></pre>\n\n<p>in Apache POI?</p>\n\n<p>Environment :</p>\n\n<ul>\n<li>JSE1.6</li>\n<li>JBossAS 4.3.2</li>\n<li>POI 3.7</li>\n</ul>\n"},{"tags":["java","unit-testing","gradle","mockito","spring-test"],"comments":[{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":1,"creation_date":1620403246,"post_id":67432118,"comment_id":119199384,"body_markdown":"You have conflict in your dependencies. My guess (I have no pc at hand to check): spring-boot-starter-test:2.4.2 pulls in Mockito 3.x, and you drop some parts of it to 2.x. Learn how to view and debug dependencies in gradle: https://docs.gradle.org/current/userguide/viewing_debugging_dependencies.html#sec:resolving-version-conflict simple technique is to display all resolved versions and eyeball them for mismatches.","body":"You have conflict in your dependencies. My guess (I have no pc at hand to check): spring-boot-starter-test:2.4.2 pulls in Mockito 3.x, and you drop some parts of it to 2.x. Learn how to view and debug dependencies in gradle: <a href=\"https://docs.gradle.org/current/userguide/viewing_debugging_dependencies.html#sec:resolving-version-conflict\" rel=\"nofollow noreferrer\">docs.gradle.org/current/userguide/&hellip;</a> simple technique is to display all resolved versions and eyeball them for mismatches."},{"owner":{"account_id":6838496,"reputation":2450,"user_id":5259625,"accept_rate":56,"display_name":"Gen"},"score":0,"creation_date":1622024528,"post_id":67432118,"comment_id":119668867,"body_markdown":"LardinoisJosse did you remember how you have resolved it? I am also having the same issue","body":"LardinoisJosse did you remember how you have resolved it? I am also having the same issue"},{"owner":{"account_id":20838974,"reputation":383,"user_id":15306182,"display_name":"LardinoisJosse"},"score":0,"creation_date":1622024629,"post_id":67432118,"comment_id":119668909,"body_markdown":"@Gen I just made a whole different test","body":"@Gen I just made a whole different test"}],"answers":[{"tags":[],"owner":{"account_id":4672239,"reputation":168,"user_id":3783754,"display_name":"nithin prasad"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1624753138,"creation_date":1624753138,"answer_id":68147118,"question_id":67432118,"body_markdown":"Issue was due to the jar conflicts\r\n\r\nWe need to exclude \r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.junit&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nAnd include\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.11.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;","title":"How to fix this error: java.lang.NoSuchMethodError: &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;","body":"<p>Issue was due to the jar conflicts</p>\n<p>We need to exclude</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.junit&lt;/groupId&gt;\n                &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n                &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n                &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>And include</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n        &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n        &lt;version&gt;3.11.2&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5942587,"reputation":3088,"user_id":4673240,"display_name":"Praveen Kumar Verma"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1628105036,"creation_date":1628104717,"answer_id":68656926,"question_id":67432118,"body_markdown":"After facing the same issue. Please look log trace.\r\n\r\n    java.lang.NoSuchMethodError: org.mockito.MockitoAnnotations.openMocks(Ljava/lang/Object;)Ljava/lang/AutoCloseable;\r\n    \tat org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.initMocks(MockitoTestExecutionListener.java:83)\r\n\r\n **Finally got a solution:**\r\n\r\nIn **Mockito version 2** there is a **MockitoAnnotations.initMock()** method, which is deprecated and replaced with MockitoAnnotations.openMocks() in **Mockito JUnit 5 version 3**. The **MockitoAnnotations.openMocks()** method returns an instance of AutoClosable which can be used to close the resource after the test.\r\n\r\n**Manual Initialization**\r\n\r\nBefore doing anything else, we have to add the Mockito dependency.\r\n\r\n    dependencies {\r\n        testImplementation(&#39;org.mockito:mockito-core:3.7.7&#39;)\r\n    }\r\n\r\nThe MockitoAnnotations.openMocks(this) call tells Mockito to scan this test class instance for any fields annotated with the @Mock annotation and initialize those fields as mocks.\r\n\r\n**Pros:**\r\n\r\nEasy to create mocks\r\nVery readable\r\n\r\n**Cons:**\r\n\r\nDoes not validate framework usage or detect incorrect stubbing\r\nAutomatic Mock Injection\r\nWe can also tell Mockito to inject mocks automatically to a field annotated with @InjectMocks.\r\n\r\nWhen **MockitoAnnotations.openMocks()** is called, Mockito will:\r\n\r\nCreate mocks for fields annotated with the @Mock annotation\r\nCreate an instance of the field annotated with @InjectMocks and try to inject the mocks into it\r\nUsing @InjectMocks is the same as we did when instantiating an instance manually, but now automatic.\r\n\r\n    public class MockitoInjectMocksTests {\r\n    \r\n        @Mock\r\n        private OrderRepository orderRepository;\r\n        private AutoCloseable closeable;\r\n        @InjectMocks\r\n        private OrderService orderService;\r\n    \r\n        @BeforeEach\r\n        void initService() {\r\n            closeable = MockitoAnnotations.openMocks(this);\r\n        }\r\n    \r\n        @AfterEach\r\n        void closeService() throws Exception {\r\n            closeable.close();\r\n        }\r\n    \r\n        @Test\r\n        void createOrderSetsTheCreationDate() {\r\n            Order order = new Order();\r\n            when(orderRepository.save(any(Order.class))).then(returnsFirstArg());\r\n    \r\n            Order savedOrder = orderService.create(order);\r\n    \r\n            assertNotNull(savedOrder.getCreationDate());\r\n        }\r\n    }\r\n\r\nMockito will first try to inject mocks by constructor injection, followed by setter injection, or field injection.\r\n\r\n**Pros:**\r\n\r\nEasy to inject mocks\r\n\r\n**Cons:**\r\n\r\nDoesn’t enforce usage of constructor injection","title":"How to fix this error: java.lang.NoSuchMethodError: &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;","body":"<p>After facing the same issue. Please look log trace.</p>\n<pre><code>java.lang.NoSuchMethodError: org.mockito.MockitoAnnotations.openMocks(Ljava/lang/Object;)Ljava/lang/AutoCloseable;\n    at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.initMocks(MockitoTestExecutionListener.java:83)\n</code></pre>\n<p><strong>Finally got a solution:</strong></p>\n<p>In <strong>Mockito version 2</strong> there is a <strong>MockitoAnnotations.initMock()</strong> method, which is deprecated and replaced with MockitoAnnotations.openMocks() in <strong>Mockito JUnit 5 version 3</strong>. The <strong>MockitoAnnotations.openMocks()</strong> method returns an instance of AutoClosable which can be used to close the resource after the test.</p>\n<p><strong>Manual Initialization</strong></p>\n<p>Before doing anything else, we have to add the Mockito dependency.</p>\n<pre><code>dependencies {\n    testImplementation('org.mockito:mockito-core:3.7.7')\n}\n</code></pre>\n<p>The MockitoAnnotations.openMocks(this) call tells Mockito to scan this test class instance for any fields annotated with the @Mock annotation and initialize those fields as mocks.</p>\n<p><strong>Pros:</strong></p>\n<p>Easy to create mocks\nVery readable</p>\n<p><strong>Cons:</strong></p>\n<p>Does not validate framework usage or detect incorrect stubbing\nAutomatic Mock Injection\nWe can also tell Mockito to inject mocks automatically to a field annotated with @InjectMocks.</p>\n<p>When <strong>MockitoAnnotations.openMocks()</strong> is called, Mockito will:</p>\n<p>Create mocks for fields annotated with the @Mock annotation\nCreate an instance of the field annotated with @InjectMocks and try to inject the mocks into it\nUsing @InjectMocks is the same as we did when instantiating an instance manually, but now automatic.</p>\n<pre><code>public class MockitoInjectMocksTests {\n\n    @Mock\n    private OrderRepository orderRepository;\n    private AutoCloseable closeable;\n    @InjectMocks\n    private OrderService orderService;\n\n    @BeforeEach\n    void initService() {\n        closeable = MockitoAnnotations.openMocks(this);\n    }\n\n    @AfterEach\n    void closeService() throws Exception {\n        closeable.close();\n    }\n\n    @Test\n    void createOrderSetsTheCreationDate() {\n        Order order = new Order();\n        when(orderRepository.save(any(Order.class))).then(returnsFirstArg());\n\n        Order savedOrder = orderService.create(order);\n\n        assertNotNull(savedOrder.getCreationDate());\n    }\n}\n</code></pre>\n<p>Mockito will first try to inject mocks by constructor injection, followed by setter injection, or field injection.</p>\n<p><strong>Pros:</strong></p>\n<p>Easy to inject mocks</p>\n<p><strong>Cons:</strong></p>\n<p>Doesn’t enforce usage of constructor injection</p>\n"},{"tags":[],"owner":{"account_id":1756015,"reputation":11409,"user_id":1604048,"accept_rate":71,"display_name":"Murat Yıldız"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1664968266,"creation_date":1632846812,"answer_id":69365405,"question_id":67432118,"body_markdown":"For me, none of the workarounds mentioned here worked. \r\n&gt; Updating `mockito-core` from `3.3.3` to `3.4.3` fixed the problem.\r\n\r\nI think it is caused by the fact that the `MockitoAnnotations.initMock()` method is deprecated and has been replaced by `MockitoAnnotations.openMocks()` in Mockito JUnit 5 version 3. \r\n\r\nOn the other hand, it may be worthy to check the local Maven Repository and delete unnecessary jars that may cause conflict. But when applying this step, beware not to manually delete installed ones (or do a backup before the operation).","title":"How to fix this error: java.lang.NoSuchMethodError: &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;","body":"<p>For me, none of the workarounds mentioned here worked.</p>\n<blockquote>\n<p>Updating <code>mockito-core</code> from <code>3.3.3</code> to <code>3.4.3</code> fixed the problem.</p>\n</blockquote>\n<p>I think it is caused by the fact that the <code>MockitoAnnotations.initMock()</code> method is deprecated and has been replaced by <code>MockitoAnnotations.openMocks()</code> in Mockito JUnit 5 version 3.</p>\n<p>On the other hand, it may be worthy to check the local Maven Repository and delete unnecessary jars that may cause conflict. But when applying this step, beware not to manually delete installed ones (or do a backup before the operation).</p>\n"},{"tags":[],"owner":{"account_id":12832226,"reputation":11,"user_id":9283018,"display_name":"Eduard"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635341840,"creation_date":1635319470,"answer_id":69734411,"question_id":67432118,"body_markdown":"I&#39;ve faced the same problem **I&#39;ve fixed it by using \r\nMockito.mock() method instead of @Mock.**\r\n\r\nI use spring-boot-starter-test v2.4.8 and mockito-core v2.21.0\r\n\r\nIn my case the error occurred because in initMocks method from MockitoTestExecutinListener class looks like this:\r\n\r\n\r\n    private void initMocks(TestContext testContext) {\r\n\t\tif (hasMockitoAnnotations(testContext)) {\r\n\t\t\ttestContext.setAttribute(MOCKS_ATTRIBUTE_NAME, MockitoAnnotations.openMocks(testContext.getTestInstance()));\r\n\t\t}\r\n\t}\r\n\r\nbut in my case MockitoAnnotations have only initMocks() method, so the error.\r\n\r\nIn this case we need to make sure that hasMockitoAnnotations(testContext) is false.\r\nIn order to use @Mock I need to enable Mockito annotations, but I do not want this, therefore I used Mockito.mock().","title":"How to fix this error: java.lang.NoSuchMethodError: &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;","body":"<p>I've faced the same problem <strong>I've fixed it by using\nMockito.mock() method instead of @Mock.</strong></p>\n<p>I use spring-boot-starter-test v2.4.8 and mockito-core v2.21.0</p>\n<p>In my case the error occurred because in initMocks method from MockitoTestExecutinListener class looks like this:</p>\n<pre><code>private void initMocks(TestContext testContext) {\n    if (hasMockitoAnnotations(testContext)) {\n        testContext.setAttribute(MOCKS_ATTRIBUTE_NAME, MockitoAnnotations.openMocks(testContext.getTestInstance()));\n    }\n}\n</code></pre>\n<p>but in my case MockitoAnnotations have only initMocks() method, so the error.</p>\n<p>In this case we need to make sure that hasMockitoAnnotations(testContext) is false.\nIn order to use @Mock I need to enable Mockito annotations, but I do not want this, therefore I used Mockito.mock().</p>\n"},{"tags":[],"owner":{"account_id":1211289,"reputation":689,"user_id":1179766,"accept_rate":43,"display_name":"Debadatta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683282402,"creation_date":1683282402,"answer_id":76181221,"question_id":67432118,"body_markdown":"This has to be related to the conflicting Mockito 4 jar in your classpath. Check your Mockito dependencies by using the below command and make sure that you are not using any overriding Mockito 4 jars. \r\n\r\n     mvn dependency:tree -Dincludes=:mockito-*","title":"How to fix this error: java.lang.NoSuchMethodError: &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;","body":"<p>This has to be related to the conflicting Mockito 4 jar in your classpath. Check your Mockito dependencies by using the below command and make sure that you are not using any overriding Mockito 4 jars.</p>\n<pre><code> mvn dependency:tree -Dincludes=:mockito-*\n</code></pre>\n"}],"owner":{"account_id":20838974,"reputation":383,"user_id":15306182,"display_name":"LardinoisJosse"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34336,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":68147118,"answer_count":5,"score":13,"last_activity_date":1683282402,"creation_date":1620378809,"question_id":67432118,"body_markdown":"So I am getting this error in my Spring boot Gradle project: \r\n\r\n    &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;\r\n        java.lang.NoSuchMethodError: &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;\r\n\r\nAnd I cannot seem to fix it. I have searched for the answer but the only one I get is removing mockito-all from your dependencies, but I do not have that in my gradle.build file in the first place.\r\n\r\n**My build.gradle file:**\r\n\r\n    plugins {\r\n    \tid &#39;org.springframework.boot&#39; version &#39;2.4.2&#39;\r\n    \tid &#39;io.spring.dependency-management&#39; version &#39;1.0.11.RELEASE&#39;\r\n    \tid &#39;java&#39;\r\n    \tid &quot;org.sonarqube&quot; version &quot;3.0&quot;\r\n    \tid &#39;jacoco&#39;\r\n    }\r\n    \r\n    group = &#39;com.example&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    sourceCompatibility = &#39;15&#39;\r\n    \r\n    configurations {\r\n    \tcompileOnly {\r\n    \t\textendsFrom annotationProcessor\r\n    \t}\r\n    }\r\n    \r\n    repositories {\r\n    \tmavenCentral()\r\n    }\r\n    \r\n    \r\n    dependencies {\r\n    \tcompile &#39;org.apache.httpcomponents:httpcore:4.4.1&#39;\r\n    \tcompile &#39;org.apache.httpcomponents:httpclient:4.5&#39;\r\n    \timplementation(&#39;io.jsonwebtoken:jjwt:0.2&#39;)\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-mail&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    \tcompile &#39;junit:junit:4.12&#39;\r\n    \timplementation &#39;org.modelmapper:modelmapper:2.4.1&#39;\r\n    \tcompileOnly &#39;org.projectlombok:lombok&#39;\r\n    \truntimeOnly &#39;mysql:mysql-connector-java&#39;\r\n    \tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    \ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    \timplementation &#39;org.eclipse.jgit:org.eclipse.jgit:5.4.2.201908231537-r&#39;\r\n    \t/**\r\n    \t * JUnit jupiter with mockito.\r\n    \t */\r\n    \ttestCompile group: &#39;org.mockito&#39;, name: &#39;mockito-junit-jupiter&#39;, version: &#39;2.19.0&#39;\r\n    \r\n    \ttestCompile group: &#39;org.mockito&#39;, name: &#39;mockito-core&#39;, version: &#39;2.19.0&#39;\r\n    \ttestCompile group: &#39;org.springframework.security&#39;, name: &#39;spring-security-test&#39;, version: &#39;5.1.6.RELEASE&#39;\r\n    }\r\n    \r\n    sonarqube{\r\n    \tproperties{\r\n    \t\tproperty &#39;sonarjava.source&#39;, &#39;1.8&#39;\r\n    \t\tproperty &#39;sonar.java.coveragePlugin&#39;, &#39;jacoco&#39;\r\n    \t\tproperty &#39;sonar.jacoco.reportPaths&#39;, &#39;build/reports/jacoco/test/jacocoTestReport.xml&#39;\r\n    \t}\r\n    }\r\n    test {\r\n    \tuseJUnitPlatform()\r\n    }\r\n\r\n\r\nI can&#39;t seem to find a solution so I came to here, where some code god maybe can help me fixing my problem. \r\n\r\nThe file where I get this error on is a test class:\r\n\r\n\r\n**The test class:**\r\n\r\n    package com.example.demo.Service;\r\n    \r\n    import com.example.demo.DTO.PartyLeaderDto;\r\n    import com.example.demo.Model.PartyLeader;\r\n    import com.example.demo.Repository.PartyLeaderRepository;\r\n    import org.junit.Assert;\r\n    import org.junit.Rule;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.mockito.InjectMocks;\r\n    import org.mockito.Mock;\r\n    import static org.mockito.Mockito.verify;\r\n    import org.mockito.junit.MockitoJUnit;\r\n    import org.mockito.junit.MockitoRule;\r\n    import org.modelmapper.ModelMapper;\r\n    import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    \r\n    import java.util.Optional;\r\n    \r\n    import static org.mockito.Mockito.when;\r\n    import static org.mockito.ArgumentMatchers.argThat;\r\n    \r\n    @SpringBootTest\r\n    @AutoConfigureMockMvc\r\n    public class PartyLeaderServiceMockTest {\r\n        @Rule\r\n        public MockitoRule initRule = MockitoJUnit.rule();\r\n    \r\n        @Mock\r\n        private PartyLeaderRepository partyLeaderRepository;\r\n    \r\n        @Mock\r\n        private ModelMapper modelMapper;\r\n    \r\n        @InjectMocks\r\n        private PartyLeaderService partyLeaderService; // this is like calling new PartyLeaderService(partyLeaderRepository, modelMapper);\r\n    \r\n    \r\n        @Test\r\n        void whenSavePartyLeader_thenCorrectPartyLeaderSaved() {\r\n            // given\r\n            var input = PartyLeaderDto.builder()\r\n                    .name(&quot;Josse&quot;)\r\n                    .apperance(&quot;Link of image&quot;)\r\n                    .build();\r\n    \r\n            // when\r\n            partyLeaderService.savePartyLeader(input);\r\n    \r\n    \r\n            // then\r\n            verify(partyLeaderRepository).save(argThat(entity -&gt;\r\n                    entity.getName().equals(&quot;Josse&quot;)\r\n                            &amp;&amp; entity.getApperance().equals(&quot;Link of image&quot;)));\r\n        }\r\n    \r\n    \r\n        @Test\r\n        void whenGetPartyLeader_ShouldReturnCorrectLeaderData() {\r\n            // given\r\n            var partyLeaderEntity = PartyLeader.builder()\r\n                    .name(&quot;Josse&quot;)\r\n                    .apperance(&quot;Link of image&quot;)\r\n                    .build();\r\n            var partyLeaderDto = PartyLeaderDto.builder()\r\n                    .name(&quot;Josse&quot;)\r\n                    .apperance(&quot;Link of image&quot;)\r\n                    .build();\r\n            when(partyLeaderRepository.findById(3)).thenReturn(Optional.of(partyLeaderEntity));\r\n            when(modelMapper.map(partyLeaderEntity, PartyLeaderDto.class)).thenReturn(partyLeaderDto);\r\n    \r\n            // when\r\n            var result = partyLeaderService.getPartyLeader(3);\r\n    \r\n            // then\r\n            Assert.assertEquals(result, partyLeaderDto);\r\n        }\r\n    }\r\n\r\nI get the same error on both of my tests.\r\n\r\nCan anyone help me? Thanks in advance!\r\n","title":"How to fix this error: java.lang.NoSuchMethodError: &#39;java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)&#39;","body":"<p>So I am getting this error in my Spring boot Gradle project:</p>\n<pre><code>'java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)'\n    java.lang.NoSuchMethodError: 'java.lang.AutoCloseable org.mockito.MockitoAnnotations.openMocks(java.lang.Object)'\n</code></pre>\n<p>And I cannot seem to fix it. I have searched for the answer but the only one I get is removing mockito-all from your dependencies, but I do not have that in my gradle.build file in the first place.</p>\n<p><strong>My build.gradle file:</strong></p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.4.2'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id 'java'\n    id &quot;org.sonarqube&quot; version &quot;3.0&quot;\n    id 'jacoco'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '15'\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\n\ndependencies {\n    compile 'org.apache.httpcomponents:httpcore:4.4.1'\n    compile 'org.apache.httpcomponents:httpclient:4.5'\n    implementation('io.jsonwebtoken:jjwt:0.2')\n    implementation 'org.springframework.boot:spring-boot-starter-mail'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    compile 'junit:junit:4.12'\n    implementation 'org.modelmapper:modelmapper:2.4.1'\n    compileOnly 'org.projectlombok:lombok'\n    runtimeOnly 'mysql:mysql-connector-java'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    implementation 'org.eclipse.jgit:org.eclipse.jgit:5.4.2.201908231537-r'\n    /**\n     * JUnit jupiter with mockito.\n     */\n    testCompile group: 'org.mockito', name: 'mockito-junit-jupiter', version: '2.19.0'\n\n    testCompile group: 'org.mockito', name: 'mockito-core', version: '2.19.0'\n    testCompile group: 'org.springframework.security', name: 'spring-security-test', version: '5.1.6.RELEASE'\n}\n\nsonarqube{\n    properties{\n        property 'sonarjava.source', '1.8'\n        property 'sonar.java.coveragePlugin', 'jacoco'\n        property 'sonar.jacoco.reportPaths', 'build/reports/jacoco/test/jacocoTestReport.xml'\n    }\n}\ntest {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>I can't seem to find a solution so I came to here, where some code god maybe can help me fixing my problem.</p>\n<p>The file where I get this error on is a test class:</p>\n<p><strong>The test class:</strong></p>\n<pre><code>package com.example.demo.Service;\n\nimport com.example.demo.DTO.PartyLeaderDto;\nimport com.example.demo.Model.PartyLeader;\nimport com.example.demo.Repository.PartyLeaderRepository;\nimport org.junit.Assert;\nimport org.junit.Rule;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport static org.mockito.Mockito.verify;\nimport org.mockito.junit.MockitoJUnit;\nimport org.mockito.junit.MockitoRule;\nimport org.modelmapper.ModelMapper;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\n\nimport java.util.Optional;\n\nimport static org.mockito.Mockito.when;\nimport static org.mockito.ArgumentMatchers.argThat;\n\n@SpringBootTest\n@AutoConfigureMockMvc\npublic class PartyLeaderServiceMockTest {\n    @Rule\n    public MockitoRule initRule = MockitoJUnit.rule();\n\n    @Mock\n    private PartyLeaderRepository partyLeaderRepository;\n\n    @Mock\n    private ModelMapper modelMapper;\n\n    @InjectMocks\n    private PartyLeaderService partyLeaderService; // this is like calling new PartyLeaderService(partyLeaderRepository, modelMapper);\n\n\n    @Test\n    void whenSavePartyLeader_thenCorrectPartyLeaderSaved() {\n        // given\n        var input = PartyLeaderDto.builder()\n                .name(&quot;Josse&quot;)\n                .apperance(&quot;Link of image&quot;)\n                .build();\n\n        // when\n        partyLeaderService.savePartyLeader(input);\n\n\n        // then\n        verify(partyLeaderRepository).save(argThat(entity -&gt;\n                entity.getName().equals(&quot;Josse&quot;)\n                        &amp;&amp; entity.getApperance().equals(&quot;Link of image&quot;)));\n    }\n\n\n    @Test\n    void whenGetPartyLeader_ShouldReturnCorrectLeaderData() {\n        // given\n        var partyLeaderEntity = PartyLeader.builder()\n                .name(&quot;Josse&quot;)\n                .apperance(&quot;Link of image&quot;)\n                .build();\n        var partyLeaderDto = PartyLeaderDto.builder()\n                .name(&quot;Josse&quot;)\n                .apperance(&quot;Link of image&quot;)\n                .build();\n        when(partyLeaderRepository.findById(3)).thenReturn(Optional.of(partyLeaderEntity));\n        when(modelMapper.map(partyLeaderEntity, PartyLeaderDto.class)).thenReturn(partyLeaderDto);\n\n        // when\n        var result = partyLeaderService.getPartyLeader(3);\n\n        // then\n        Assert.assertEquals(result, partyLeaderDto);\n    }\n}\n</code></pre>\n<p>I get the same error on both of my tests.</p>\n<p>Can anyone help me? Thanks in advance!</p>\n"},{"tags":["java","jar","runtime","noclassdeffounderror"],"comments":[{"owner":{"account_id":537054,"reputation":32561,"user_id":905762,"accept_rate":77,"display_name":"John B"},"score":0,"creation_date":1315340098,"post_id":7325579,"comment_id":8832174,"body_markdown":"Is the appropriate directory structure in your jar to match the class package?","body":"Is the appropriate directory structure in your jar to match the class package?"},{"owner":{"account_id":229892,"reputation":37886,"user_id":493161,"accept_rate":90,"display_name":"jcomeau_ictx"},"score":0,"creation_date":1315340116,"post_id":7325579,"comment_id":8832178,"body_markdown":"need to see some source, many things can cause this. for example, a &#39;package&#39; statement but the file not actually residing in the corresponding path","body":"need to see some source, many things can cause this. for example, a &#39;package&#39; statement but the file not actually residing in the corresponding path"},{"owner":{"account_id":22644,"reputation":14098,"user_id":56044,"accept_rate":71,"display_name":"Michael Brewer-Davis"},"score":4,"creation_date":1315340152,"post_id":7325579,"comment_id":8832198,"body_markdown":"One cause is an exception during initialization--is there any other error output?","body":"One cause is an exception during initialization--is there any other error output?"}],"answers":[{"tags":[],"owner":{"account_id":277337,"reputation":10612,"user_id":571271,"accept_rate":100,"display_name":"jeha"},"down_vote_count":1,"up_vote_count":163,"is_accepted":false,"score":162,"last_activity_date":1315342090,"creation_date":1315341303,"answer_id":7325814,"question_id":7325579,"body_markdown":"You are getting a `java.lang.NoClassDefFoundError` which does NOT mean that your class is missing (in that case you&#39;d get a `java.lang.ClassNotFoundException`). The ClassLoader ran into an error while reading the class definition when trying to read the class.\r\n\r\nPut a try/catch inside your static initializer and look at the exception. If you read some files there and it differs from your local environment it&#39;s very likely the cause of the problem (maybe file can&#39;t be found, no permissions etc.).","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>You are getting a <code>java.lang.NoClassDefFoundError</code> which does NOT mean that your class is missing (in that case you'd get a <code>java.lang.ClassNotFoundException</code>). The ClassLoader ran into an error while reading the class definition when trying to read the class.</p>\n\n<p>Put a try/catch inside your static initializer and look at the exception. If you read some files there and it differs from your local environment it's very likely the cause of the problem (maybe file can't be found, no permissions etc.).</p>\n"},{"tags":[],"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"down_vote_count":1,"up_vote_count":285,"is_accepted":true,"score":284,"last_activity_date":1518415160,"creation_date":1315341358,"answer_id":7325829,"question_id":7325579,"body_markdown":"My best bet is there is an issue here:\r\n\r\n\r\n    static {\r\n        //code for loading properties from file\r\n    }\r\n\r\n\r\nIt would appear some uncaught exception occurred and propagated up to the actual ClassLoader attempting to load the class.  We would need a stacktrace to confirm this though.\r\n\r\nEither that or it occurred when creating `PropHolder.prop` static variable.","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>My best bet is there is an issue here:</p>\n\n<pre><code>static {\n    //code for loading properties from file\n}\n</code></pre>\n\n<p>It would appear some uncaught exception occurred and propagated up to the actual ClassLoader attempting to load the class.  We would need a stacktrace to confirm this though.</p>\n\n<p>Either that or it occurred when creating <code>PropHolder.prop</code> static variable.</p>\n"},{"tags":[],"owner":{"account_id":994835,"reputation":1054,"user_id":1011062,"accept_rate":67,"display_name":"Mark Hansen"},"down_vote_count":1,"up_vote_count":42,"is_accepted":false,"score":41,"last_activity_date":1401936530,"creation_date":1337445516,"answer_id":10667050,"question_id":7325579,"body_markdown":"NoClassDefFoundError doesn&#39;t give much of a clue as to what went wrong inside the static block.  It is good practice to always have a block like this inside of static { ... } initialization code:\r\n\r\n    static {\r\n      try {\r\n\r\n        ... your init code here\r\n\r\n      } catch (Throwable t) {\r\n        LOG.error(&quot;Failure during static initialization&quot;, t);\r\n        throw t;\r\n      }\r\n    }","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>NoClassDefFoundError doesn't give much of a clue as to what went wrong inside the static block.  It is good practice to always have a block like this inside of static { ... } initialization code:</p>\n\n<pre><code>static {\n  try {\n\n    ... your init code here\n\n  } catch (Throwable t) {\n    LOG.error(\"Failure during static initialization\", t);\n    throw t;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3849657,"reputation":389,"user_id":3190140,"accept_rate":38,"display_name":"KerenSi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1512662987,"creation_date":1405586284,"answer_id":24798674,"question_id":7325579,"body_markdown":"I had the same exception, this is how I solved the problem:\r\n\r\n\r\n**Preconditions:**\r\n\r\n1. Junit class (and test), that extended another class.\r\n\r\n2. ApplicationContext initialized using spring, that init the project.\r\n\r\n3. The Application context was initialized in @Before method\r\n\r\n**Solution:**\r\n\r\nInit the application context from @BeforeClass method, since the parent class also required some classes that were initialized from within the application context.\r\n\r\nHope this will help.","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>I had the same exception, this is how I solved the problem:</p>\n\n<p><strong>Preconditions:</strong></p>\n\n<ol>\n<li><p>Junit class (and test), that extended another class.</p></li>\n<li><p>ApplicationContext initialized using spring, that init the project.</p></li>\n<li><p>The Application context was initialized in @Before method</p></li>\n</ol>\n\n<p><strong>Solution:</strong></p>\n\n<p>Init the application context from @BeforeClass method, since the parent class also required some classes that were initialized from within the application context.</p>\n\n<p>Hope this will help.</p>\n"},{"tags":[],"owner":{"account_id":3332564,"reputation":231,"user_id":2801140,"display_name":"TriMix"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1418845612,"creation_date":1418845612,"answer_id":27533620,"question_id":7325579,"body_markdown":"As mentioned above, this could be a number of things.  In my case I had a statically initialized variable which relied on a missing entry in my properties file.  Added the missing entry to the properties file and the problem was solved.  ","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>As mentioned above, this could be a number of things.  In my case I had a statically initialized variable which relied on a missing entry in my properties file.  Added the missing entry to the properties file and the problem was solved.  </p>\n"},{"tags":[],"owner":{"account_id":7165219,"reputation":53,"user_id":5474564,"display_name":"MonkeyKing"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1446004316,"creation_date":1446004316,"answer_id":33382605,"question_id":7325579,"body_markdown":"Just several days ago, I met the same question just like yours. All code runs well on my local machine, but turns out error(noclassdeffound&amp;initialize). \r\nSo I post my solution, but I don&#39;t know why, I merely advance a possibility. I hope someone know will explain this.@John Vint\r\nFirstly, I&#39;ll show you my problem. My code has static variable and static block both. When I first met this problem, I tried John Vint&#39;s solution, and tried to catch the exception. However, I caught nothing. So I thought it is because the static variable(but now I know they are the same thing) and still found nothing.\r\nSo, I try to find the difference between the linux machine and my computer. Then I found that this problem happens only when several threads run in one process(By the way, the linux machine has double cores and double processes). That means if there are two tasks(both uses the code which has static block or variables) run in the same process, it goes wrong, but if they run in different processes, both of them are ok.\r\nIn the Linux machine, I use\r\n\r\n    mvn -U clean  test -Dtest=path \r\n\r\nto run a task, and because my static variable is to start a container(or maybe you initialize a new classloader), so it will stay until the jvm stop, and the jvm stops only when all the tasks in one process stop. Every task will start a new container(or classloader) and it makes the jvm confused. As a result, the error happens.\r\nSo, how to solve it? My solution is to add a new command to the maven command, and make every task go to the same container.\r\n\r\n    -Dxxx.version=xxxxx #sorry can&#39;t post more\r\n\r\nMaybe you have already solved this problem, but still hope it will help others who meet the same problem.\r\n","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>Just several days ago, I met the same question just like yours. All code runs well on my local machine, but turns out error(noclassdeffound&amp;initialize). \nSo I post my solution, but I don't know why, I merely advance a possibility. I hope someone know will explain this.@John Vint\nFirstly, I'll show you my problem. My code has static variable and static block both. When I first met this problem, I tried John Vint's solution, and tried to catch the exception. However, I caught nothing. So I thought it is because the static variable(but now I know they are the same thing) and still found nothing.\nSo, I try to find the difference between the linux machine and my computer. Then I found that this problem happens only when several threads run in one process(By the way, the linux machine has double cores and double processes). That means if there are two tasks(both uses the code which has static block or variables) run in the same process, it goes wrong, but if they run in different processes, both of them are ok.\nIn the Linux machine, I use</p>\n\n<pre><code>mvn -U clean  test -Dtest=path \n</code></pre>\n\n<p>to run a task, and because my static variable is to start a container(or maybe you initialize a new classloader), so it will stay until the jvm stop, and the jvm stops only when all the tasks in one process stop. Every task will start a new container(or classloader) and it makes the jvm confused. As a result, the error happens.\nSo, how to solve it? My solution is to add a new command to the maven command, and make every task go to the same container.</p>\n\n<pre><code>-Dxxx.version=xxxxx #sorry can't post more\n</code></pre>\n\n<p>Maybe you have already solved this problem, but still hope it will help others who meet the same problem.</p>\n"},{"tags":[],"owner":{"account_id":901241,"reputation":513,"user_id":937344,"display_name":"lifeson106"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1481586457,"creation_date":1481586457,"answer_id":41111557,"question_id":7325579,"body_markdown":"If you&#39;re working on an Android project, make sure you aren&#39;t calling any static methods on any Android classes.  I&#39;m only using JUnit + Mockito, so maybe some other frameworks might help you avoid the problem altogether, I&#39;m not sure.\r\n\r\nMy problem was calling `Uri.parse(uriString)` as part of a static initializer for a unit test.  The Uri class is an Android API, which is why the unit test build couldn&#39;t find it.  I changed this value to `null` instead and everything went back to normal.","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>If you're working on an Android project, make sure you aren't calling any static methods on any Android classes.  I'm only using JUnit + Mockito, so maybe some other frameworks might help you avoid the problem altogether, I'm not sure.</p>\n\n<p>My problem was calling <code>Uri.parse(uriString)</code> as part of a static initializer for a unit test.  The Uri class is an Android API, which is why the unit test build couldn't find it.  I changed this value to <code>null</code> instead and everything went back to normal.</p>\n"},{"tags":[],"owner":{"account_id":8893545,"reputation":1541,"user_id":6639353,"display_name":"Elad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1540980036,"creation_date":1540980036,"answer_id":53080725,"question_id":7325579,"body_markdown":"I had the same exception - but only while running in debug mode, \r\nthis is how I solved the problem (after 3 whole days):\r\nin the build.gradle i had : \r\n&quot;multiDexEnabled true&quot; set in the defaultConfig section.\r\n\r\n            defaultConfig {\r\n        applicationId &quot;com.xxx.yyy&quot;\r\n        minSdkVersion 15\r\n        targetSdkVersion 28\r\n        versionCode 5123\r\n        versionName &quot;5123&quot;\r\n        // Enabling multidex support.\r\n        multiDexEnabled true\r\n    }\r\n\r\n\r\nbut apparently this wasn&#39;t enough.\r\nbut when i changed:\r\n\r\n    public class MyAppClass  extends Application \r\n\r\nto:\r\n\r\n    public class MyAppClass  extends MultiDexApplication \r\n\r\nthis solved it.\r\nhope this will help someone","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>I had the same exception - but only while running in debug mode, \nthis is how I solved the problem (after 3 whole days):\nin the build.gradle i had : \n\"multiDexEnabled true\" set in the defaultConfig section.</p>\n\n<pre><code>        defaultConfig {\n    applicationId \"com.xxx.yyy\"\n    minSdkVersion 15\n    targetSdkVersion 28\n    versionCode 5123\n    versionName \"5123\"\n    // Enabling multidex support.\n    multiDexEnabled true\n}\n</code></pre>\n\n<p>but apparently this wasn't enough.\nbut when i changed:</p>\n\n<pre><code>public class MyAppClass  extends Application \n</code></pre>\n\n<p>to:</p>\n\n<pre><code>public class MyAppClass  extends MultiDexApplication \n</code></pre>\n\n<p>this solved it.\nhope this will help someone</p>\n"},{"tags":[],"owner":{"account_id":19477602,"reputation":9,"user_id":14248695,"display_name":"SripriyaPKulkarni"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1641828675,"creation_date":1641817322,"answer_id":70652322,"question_id":7325579,"body_markdown":"Adding these import statements resolved the issue:\r\n\r\n    import org.junit.runner.RunWith;\r\n    \r\n    import cucumber.api.CucumberOptions;\r\n    import cucumber.api.junit.Cucumber;\r\n\r\n","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>Adding these import statements resolved the issue:</p>\n<pre><code>import org.junit.runner.RunWith;\n\nimport cucumber.api.CucumberOptions;\nimport cucumber.api.junit.Cucumber;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5745825,"reputation":11543,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683282049,"creation_date":1683189313,"answer_id":76171143,"question_id":7325579,"body_markdown":"Thanks for the question and hints from the top voted answers. It makes me rethink about static fields and at last, I found that I defined a `DateTimeFormatter` which needs another static constant to be created; seems that String being constant is fine but `DateTimeFormatter` cannot be created at class init time. \r\n\r\n```java\r\nprivate static final String PATTERN = &quot;yyyy-MM-yyThh:mm:ss.SSSSSSV&quot;; // OK\r\nprivate static DateTimeFormatter DATE_TIME_FORMATTER = DateTimeFormatter.ofPattern(PATTERN); // WRONG; as it depends on another field to be created first\r\n```\r\nThe solutions are: \r\n\r\n - initialize the `DateTimeFormatter` in a `@PostConstruct` method\r\n - or in the method where it is needed. ","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<p>Thanks for the question and hints from the top voted answers. It makes me rethink about static fields and at last, I found that I defined a <code>DateTimeFormatter</code> which needs another static constant to be created; seems that String being constant is fine but <code>DateTimeFormatter</code> cannot be created at class init time.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final String PATTERN = &quot;yyyy-MM-yyThh:mm:ss.SSSSSSV&quot;; // OK\nprivate static DateTimeFormatter DATE_TIME_FORMATTER = DateTimeFormatter.ofPattern(PATTERN); // WRONG; as it depends on another field to be created first\n</code></pre>\n<p>The solutions are:</p>\n<ul>\n<li>initialize the <code>DateTimeFormatter</code> in a <code>@PostConstruct</code> method</li>\n<li>or in the method where it is needed.</li>\n</ul>\n"}],"owner":{"account_id":291713,"reputation":8251,"user_id":594026,"accept_rate":100,"display_name":"Leon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":617089,"favorite_count":0,"down_vote_count":0,"up_vote_count":231,"accepted_answer_id":7325829,"answer_count":10,"score":231,"last_activity_date":1683282049,"creation_date":1315339930,"question_id":7325579,"body_markdown":"    public class PropHolder {\r\n      public static Properties prop;\r\n      \r\n      static {\r\n        //code for loading properties from file\r\n      }\r\n    }\r\n    \r\n    // Referencing the class somewhere else:\r\n    Properties prop = PropHolder.prop;\r\n\r\n\r\n`class PropHolder` is a class of my own. The class resides in the same JAR file of the main class. So that should not because any JAR is missing from classpath.\r\n\r\nWhen I look in to the JAR file by `jar tf myjarfile`, I can see the `PropHolder.class` listed there.\r\n\r\nBtw: the code is running fine on my local machine. But couldn&#39;t work when I deploy it with some script onto a Linux server. So I think it is not the problem of the code.\r\nBut for some reason. the deploy process is very hard to track.\r\n\r\n\r\nWhat could be the problem?","title":"java.lang.NoClassDefFoundError: Could not initialize class XXX","body":"<pre><code>public class PropHolder {\n  public static Properties prop;\n\n  static {\n    //code for loading properties from file\n  }\n}\n\n// Referencing the class somewhere else:\nProperties prop = PropHolder.prop;\n</code></pre>\n\n<p><code>class PropHolder</code> is a class of my own. The class resides in the same JAR file of the main class. So that should not because any JAR is missing from classpath.</p>\n\n<p>When I look in to the JAR file by <code>jar tf myjarfile</code>, I can see the <code>PropHolder.class</code> listed there.</p>\n\n<p>Btw: the code is running fine on my local machine. But couldn't work when I deploy it with some script onto a Linux server. So I think it is not the problem of the code.\nBut for some reason. the deploy process is very hard to track.</p>\n\n<p>What could be the problem?</p>\n"},{"tags":["java","selenium-webdriver","testing","cucumber"],"owner":{"account_id":25241659,"reputation":55,"user_id":19075454,"display_name":"Roberto Teresa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683281829,"creation_date":1683281829,"question_id":76181128,"body_markdown":"I want to make the screenshot used for reporting in selenium lighter to make the overall report lighter\r\n\r\nMy current method to take screenshots is this:\r\n\r\n     try {\r\n                final byte[] screenByte = ((TakesScreenshot) driver).getScreenshotAs(OutputType.BYTES);\r\n                scenario.attach(screenByte, &quot;image/png&quot;, &quot;Evidencia&quot;);\r\n          } catch (WebDriverException somePlatformsDontSupportScreenshots) {\r\n                System.err.println(somePlatformsDontSupportScreenshots.getMessage());\r\n          }\r\n\r\nWhich is the best way to compress the screenshot to make it lighter? Use a deflater?","title":"Compress Selenium screenshot","body":"<p>I want to make the screenshot used for reporting in selenium lighter to make the overall report lighter</p>\n<p>My current method to take screenshots is this:</p>\n<pre><code> try {\n            final byte[] screenByte = ((TakesScreenshot) driver).getScreenshotAs(OutputType.BYTES);\n            scenario.attach(screenByte, &quot;image/png&quot;, &quot;Evidencia&quot;);\n      } catch (WebDriverException somePlatformsDontSupportScreenshots) {\n            System.err.println(somePlatformsDontSupportScreenshots.getMessage());\n      }\n</code></pre>\n<p>Which is the best way to compress the screenshot to make it lighter? Use a deflater?</p>\n"},{"tags":["java","api","rest","http"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1683281010,"post_id":76180979,"comment_id":134346108,"body_markdown":"Speaking in a strict RFC-sense, a `HTTP GET` should not change any state (see [RFC 2616, &#167;9.1.1 (`datatracker.ietf.org`)](https://datatracker.ietf.org/doc/html/rfc2616#section-9.1.1)). Thus, in a strict RFC-sense, this should be avoided.","body":"Speaking in a strict RFC-sense, a <code>HTTP GET</code> should not change any state (see <a href=\"https://datatracker.ietf.org/doc/html/rfc2616#section-9.1.1\" rel=\"nofollow noreferrer\">RFC 2616, &#167;9.1.1 (<code>datatracker.ietf.org</code>)</a>). Thus, in a strict RFC-sense, this should be avoided."}],"answers":[{"tags":[],"owner":{"account_id":19965141,"reputation":1690,"user_id":14631885,"display_name":"Dhana D."},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683281142,"creation_date":1683281142,"answer_id":76181042,"question_id":76180979,"body_markdown":"The one with `PostMapping` is the more proper way to achieve the goal &quot;get or create if not exist&quot;. Because if you want it to create, you are likely requiring the user to send the details you want to create (save).\r\n\r\nYou should not use `@GetMapping` method if you want to create (save) object even when it does not exist.\r\n\r\n```java\r\n@PostMapping(&quot;&quot;)\r\n    public List&lt;SOMEOBJECT&gt; create(SOME DATA){\r\n        return questionService.create(SOME DATA);\r\n    }\r\n```\r\n\r\nAnd the function name `create` or in more detailed way : `createOrGet` should be fine.\r\n\r\n\r\n","title":"Is it ok to create entity in GET REST controller method with name getOrCreateIfNotExist?","body":"<p>The one with <code>PostMapping</code> is the more proper way to achieve the goal &quot;get or create if not exist&quot;. Because if you want it to create, you are likely requiring the user to send the details you want to create (save).</p>\n<p>You should not use <code>@GetMapping</code> method if you want to create (save) object even when it does not exist.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(&quot;&quot;)\n    public List&lt;SOMEOBJECT&gt; create(SOME DATA){\n        return questionService.create(SOME DATA);\n    }\n</code></pre>\n<p>And the function name <code>create</code> or in more detailed way : <code>createOrGet</code> should be fine.</p>\n"}],"owner":{"account_id":28515520,"reputation":15,"user_id":21824932,"display_name":"Oleksandr Zhytariuk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76181042,"answer_count":1,"score":0,"last_activity_date":1683281142,"creation_date":1683280683,"question_id":76180979,"body_markdown":"So, I have some task, I have to create endpoint that should getOrCreateIfNotExist. But I`m not sure, is it ok practice to create some entity in the GET request. Or I should to do another call to the POST method to create new entity. Maybe like this:\r\n\r\n```\r\n    @GetMapping(&quot;&quot;)\r\n    public List&lt;SOMEOBJECT&gt; getOrCreateIfNotExist(SOME DATA){\r\n        return questionService.getOrCreateIfNotExist(SOME DATA);\r\n    }\r\n```\r\n\r\nOR I should write like this:\r\n\r\n\r\n```\r\n    @GetMapping(&quot;&quot;)\r\n    public List&lt;SOMEOBJECT&gt; getOrCreateIfNotExist(SOME DATA){\r\n          if(questionService.getOrCreateIfNotExist(SOME DATA) == null){\r\n             create(SOME DATA)\r\n          }\r\n    }\r\n\r\n    @PostMapping(&quot;&quot;)\r\n    public List&lt;SOMEOBJECT&gt; create(SOME DATA){\r\n        return questionService.create(SOME DATA);\r\n    }\r\n```\r\n\r\nI want to know what is best practice and is it good to do 2 things in one request?","title":"Is it ok to create entity in GET REST controller method with name getOrCreateIfNotExist?","body":"<p>So, I have some task, I have to create endpoint that should getOrCreateIfNotExist. But I`m not sure, is it ok practice to create some entity in the GET request. Or I should to do another call to the POST method to create new entity. Maybe like this:</p>\n<pre><code>    @GetMapping(&quot;&quot;)\n    public List&lt;SOMEOBJECT&gt; getOrCreateIfNotExist(SOME DATA){\n        return questionService.getOrCreateIfNotExist(SOME DATA);\n    }\n</code></pre>\n<p>OR I should write like this:</p>\n<pre><code>    @GetMapping(&quot;&quot;)\n    public List&lt;SOMEOBJECT&gt; getOrCreateIfNotExist(SOME DATA){\n          if(questionService.getOrCreateIfNotExist(SOME DATA) == null){\n             create(SOME DATA)\n          }\n    }\n\n    @PostMapping(&quot;&quot;)\n    public List&lt;SOMEOBJECT&gt; create(SOME DATA){\n        return questionService.create(SOME DATA);\n    }\n</code></pre>\n<p>I want to know what is best practice and is it good to do 2 things in one request?</p>\n"},{"tags":["java","docker","apache-kafka","teamcity","testcontainers"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1683293334,"post_id":76181029,"comment_id":134348755,"body_markdown":"`--network host` shouldn&#39;t work on Mac. `host.docker.internal` only works on Mac (that address is set by Docker Desktop, so not available on Linux)","body":"<code>--network host</code> shouldn&#39;t work on Mac. <code>host.docker.internal</code> only works on Mac (that address is set by Docker Desktop, so not available on Linux)"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1683293525,"post_id":76181029,"comment_id":134348788,"body_markdown":"Also, you&#39;ve set `withEnv(&quot;SCHEMA_REGISTRY_LISTENERS&quot;, &quot;http://0.0.0.0:8081&quot;);`... So why is your error not using port 8081?","body":"Also, you&#39;ve set <code>withEnv(&quot;SCHEMA_REGISTRY_LISTENERS&quot;, &quot;http:&#47;&#47;0.0.0.0:8081&quot;);</code>... So why is your error not using port 8081?"},{"owner":{"account_id":1380143,"reputation":1428,"user_id":1313335,"accept_rate":76,"display_name":"Matt Allwood"},"score":0,"creation_date":1683294245,"post_id":76181029,"comment_id":134348982,"body_markdown":"I suspect the 8081 issue will be the withExposedPorts - TestContainers randomises exposed ports to avoid clashes\n\nI have it working on Mac fine - both bare and in Docker. My issue is getting it working in a Linux environment hence throwing things at it (network and host.docker.internal) and seeing if anything stuck - they didn&#39;t work in Linux hence coming here","body":"I suspect the 8081 issue will be the withExposedPorts - TestContainers randomises exposed ports to avoid clashes  I have it working on Mac fine - both bare and in Docker. My issue is getting it working in a Linux environment hence throwing things at it (network and host.docker.internal) and seeing if anything stuck - they didn&#39;t work in Linux hence coming here"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1683299294,"post_id":76181029,"comment_id":134350423,"body_markdown":"Yeah, not sure. I have not used Schema Registry in a TestContainer. [Mocks have always worked fine for me with unit tests](https://github.com/bakdata/fluent-kafka-streams-tests/blob/master/schema-registry-mock/README.md#schema-registry-mock). Plus, they run faster than starting Docker containers. But are you sure the Kafka container itself starts? If not, the schema registry wont start. Can you access logs from either container?","body":"Yeah, not sure. I have not used Schema Registry in a TestContainer. <a href=\"https://github.com/bakdata/fluent-kafka-streams-tests/blob/master/schema-registry-mock/README.md#schema-registry-mock\" rel=\"nofollow noreferrer\">Mocks have always worked fine for me with unit tests</a>. Plus, they run faster than starting Docker containers. But are you sure the Kafka container itself starts? If not, the schema registry wont start. Can you access logs from either container?"},{"owner":{"account_id":1380143,"reputation":1428,"user_id":1313335,"accept_rate":76,"display_name":"Matt Allwood"},"score":0,"creation_date":1683549040,"post_id":76181029,"comment_id":134378975,"body_markdown":"well I *assume* so - the Kafka container should have a startup check (in the same way that the SR one is failing), but I&#39;ve honestly not checked. I may look into the mock approach","body":"well I <i>assume</i> so - the Kafka container should have a startup check (in the same way that the SR one is failing), but I&#39;ve honestly not checked. I may look into the mock approach"},{"owner":{"account_id":1380143,"reputation":1428,"user_id":1313335,"accept_rate":76,"display_name":"Matt Allwood"},"score":1,"creation_date":1683643838,"post_id":76181029,"comment_id":134396236,"body_markdown":"OK - so I&#39;ve managed to get it working with the mock SR (after some initial problems with Maven/Jackson), so thanks for that. I think the original problem still stands though - I suspect it&#39;s an insufficient setup of the networking","body":"OK - so I&#39;ve managed to get it working with the mock SR (after some initial problems with Maven/Jackson), so thanks for that. I think the original problem still stands though - I suspect it&#39;s an insufficient setup of the networking"}],"owner":{"account_id":1380143,"reputation":1428,"user_id":1313335,"accept_rate":76,"display_name":"Matt Allwood"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":385,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683281066,"creation_date":1683281066,"question_id":76181029,"body_markdown":"I am trying to run an integration test for Kafka Streams using TestContainers with Schema Registry\r\n\r\nI am able to get it running locally (MacOS), and locally within Docker (needs `TESTCONTAINERS_HOST_OVERRIDE=&#39;host.docker.internal&#39;` setting), but when I try to run it from a Linux agent in TeamCity it appears not to be able to check whether the schema registry container is running.\r\n\r\nI am basically using the setup from this SO answer for my Kafka/SR containers: https://stackoverflow.com/questions/75388650/testcontainers-schemaregistry-cant-connect-to-kafka-container\r\n\r\nThe crash seems to occur at the `SCHEMA_REGISTRY.withKafka(KAFKA).start();` stage with the following appearing in the log: `&quot;Timed out waiting for URL to be accessible (http://172.17.0.1:32833/subjects should return HTTP [200])&quot;`\r\n\r\nThe log output from the failed container which follows is unfortunately truncated, but appears to show the SR container running as expected, so I think it&#39;s just that how it&#39;s trying to connect to the container is incorrect.\r\n\r\nI&#39;ve tried increasing the timeout, setting the HOST_OVERRIDE to `host.docker.internal` (this makes it worse - it can&#39;t find ryuk) and setting the network to `host`. The command to run the container in the script is\r\n`docker run --rm -v /var/run/docker.sock:/var/run/docker.sock --network host &lt;container name&gt;`, which works on MacOS, but not TC/Linux.\r\n\r\nThe SchemaRegistry container config from that earlier answer is:\r\n\r\n```\r\npublic class SchemaRegistryContainer extends GenericContainer&lt;SchemaRegistryContainer&gt; {\r\n    public static final String SCHEMA_REGISTRY_IMAGE =\r\n            &quot;confluentinc/cp-schema-registry&quot;;\r\n    public static final int SCHEMA_REGISTRY_PORT = 8081;\r\n\r\n    public SchemaRegistryContainer() {\r\n        this(CONFLUENT_PLATFORM_VERSION);\r\n    }\r\n\r\n    public SchemaRegistryContainer(String version) {\r\n        super(SCHEMA_REGISTRY_IMAGE + &quot;:&quot; + version);\r\n\r\n        waitingFor(Wait.forHttp(&quot;/subjects&quot;).forStatusCode(200));\r\n        withExposedPorts(SCHEMA_REGISTRY_PORT);\r\n    }\r\n\r\n    public SchemaRegistryContainer withKafka(KafkaContainer kafka) {\r\n        return withKafka(kafka.getNetwork(), kafka.getNetworkAliases().get(0) + &quot;:9092&quot;);\r\n    }\r\n\r\n    public SchemaRegistryContainer withKafka(Network network, String bootstrapServers) {\r\n        withNetwork(network);\r\n        withEnv(&quot;SCHEMA_REGISTRY_HOST_NAME&quot;, &quot;schema-registry&quot;);\r\n        withEnv(&quot;SCHEMA_REGISTRY_LISTENERS&quot;, &quot;http://0.0.0.0:8081&quot;);\r\n        withEnv(&quot;SCHEMA_REGISTRY_KAFKASTORE_BOOTSTRAP_SERVERS&quot;, &quot;PLAINTEXT://&quot; + bootstrapServers);\r\n        return self();\r\n    }\r\n}\r\n```\r\n\r\nThe code to start my containers is:\r\n```\r\n            KafkaContainer.KAFKA.withStartupTimeout(Duration.ofMinutes(3)).start();\r\n            KafkaContainer.SCHEMA_REGISTRY.withKafka(KafkaContainer.KAFKA).withStartupTimeout(Duration.ofMinutes(3)).start();\r\n```\r\n(I have tried longer timeouts)","title":"Testcontainers-java times out waiting for container when run in TeamCity/docker, but fine in MacOS / MacOS+docker","body":"<p>I am trying to run an integration test for Kafka Streams using TestContainers with Schema Registry</p>\n<p>I am able to get it running locally (MacOS), and locally within Docker (needs <code>TESTCONTAINERS_HOST_OVERRIDE='host.docker.internal'</code> setting), but when I try to run it from a Linux agent in TeamCity it appears not to be able to check whether the schema registry container is running.</p>\n<p>I am basically using the setup from this SO answer for my Kafka/SR containers: <a href=\"https://stackoverflow.com/questions/75388650/testcontainers-schemaregistry-cant-connect-to-kafka-container\">Testcontainers SchemaRegistry can&#39;t connect to Kafka container</a></p>\n<p>The crash seems to occur at the <code>SCHEMA_REGISTRY.withKafka(KAFKA).start();</code> stage with the following appearing in the log: <code>&quot;Timed out waiting for URL to be accessible (http://172.17.0.1:32833/subjects should return HTTP [200])&quot;</code></p>\n<p>The log output from the failed container which follows is unfortunately truncated, but appears to show the SR container running as expected, so I think it's just that how it's trying to connect to the container is incorrect.</p>\n<p>I've tried increasing the timeout, setting the HOST_OVERRIDE to <code>host.docker.internal</code> (this makes it worse - it can't find ryuk) and setting the network to <code>host</code>. The command to run the container in the script is\n<code>docker run --rm -v /var/run/docker.sock:/var/run/docker.sock --network host &lt;container name&gt;</code>, which works on MacOS, but not TC/Linux.</p>\n<p>The SchemaRegistry container config from that earlier answer is:</p>\n<pre><code>public class SchemaRegistryContainer extends GenericContainer&lt;SchemaRegistryContainer&gt; {\n    public static final String SCHEMA_REGISTRY_IMAGE =\n            &quot;confluentinc/cp-schema-registry&quot;;\n    public static final int SCHEMA_REGISTRY_PORT = 8081;\n\n    public SchemaRegistryContainer() {\n        this(CONFLUENT_PLATFORM_VERSION);\n    }\n\n    public SchemaRegistryContainer(String version) {\n        super(SCHEMA_REGISTRY_IMAGE + &quot;:&quot; + version);\n\n        waitingFor(Wait.forHttp(&quot;/subjects&quot;).forStatusCode(200));\n        withExposedPorts(SCHEMA_REGISTRY_PORT);\n    }\n\n    public SchemaRegistryContainer withKafka(KafkaContainer kafka) {\n        return withKafka(kafka.getNetwork(), kafka.getNetworkAliases().get(0) + &quot;:9092&quot;);\n    }\n\n    public SchemaRegistryContainer withKafka(Network network, String bootstrapServers) {\n        withNetwork(network);\n        withEnv(&quot;SCHEMA_REGISTRY_HOST_NAME&quot;, &quot;schema-registry&quot;);\n        withEnv(&quot;SCHEMA_REGISTRY_LISTENERS&quot;, &quot;http://0.0.0.0:8081&quot;);\n        withEnv(&quot;SCHEMA_REGISTRY_KAFKASTORE_BOOTSTRAP_SERVERS&quot;, &quot;PLAINTEXT://&quot; + bootstrapServers);\n        return self();\n    }\n}\n</code></pre>\n<p>The code to start my containers is:</p>\n<pre><code>            KafkaContainer.KAFKA.withStartupTimeout(Duration.ofMinutes(3)).start();\n            KafkaContainer.SCHEMA_REGISTRY.withKafka(KafkaContainer.KAFKA).withStartupTimeout(Duration.ofMinutes(3)).start();\n</code></pre>\n<p>(I have tried longer timeouts)</p>\n"},{"tags":["java","spring","spring-boot","tomcat"],"owner":{"account_id":8901665,"reputation":315,"user_id":6644926,"accept_rate":12,"display_name":"Владимир Гичев"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683280366,"creation_date":1683280366,"question_id":76180945,"body_markdown":"My current working rest service for downloading a file is very slow and I&#39;m trying to find a better implementation to improve download speed. The problem is that I have 2 servers (client and storage) and they communicate only with serialization objects so for example I can&#39;t pass Resource object from client to storage and vice versa. The actual file is located on my storage service.Currently when there is a request for download client server receive a byte[] array and create an OutputStream. Is there some other approach that will work with serialization classes?\r\nThis is my current client rest service:\r\n\r\n``` \r\n@RequestMapping(value = &quot;/file/{fileName:.+}&quot;, method = RequestMethod.GET)\r\n    public void getFile(HttpServletRequest request, HttpServletResponse response,\r\n\t    @PathVariable(&quot;fileName&quot;) String fileName) {\r\n\r\n\tbyte[] imgbytes = null;\r\n\r\n\timgbytes  = fileService.getFullFile(fileName);\r\n\t\tOutputStream outputStream = null;\r\n\ttry {\r\n\t    outputStream = response.getOutputStream();\r\n\t    IOUtils.write(imgbytes, outputStream);\r\n\t    outputStream.flush();\r\n\t} catch (IOException ioException) {\r\n\t    logger.error(&quot;IO ERROR - &quot;, ioException);\r\n\t} finally {\r\n\t    if (outputStream != null) {\r\n\t\ttry {\r\n\t\t    outputStream.close();\r\n\t\t} catch (IOException e) {\r\n\t\t    logger.error(&quot;Error closing stream - &quot;, e);\r\n\t\t}\r\n\t    }\r\n\t}\r\n    }\r\n\r\n","title":"Rest service slow download","body":"<p>My current working rest service for downloading a file is very slow and I'm trying to find a better implementation to improve download speed. The problem is that I have 2 servers (client and storage) and they communicate only with serialization objects so for example I can't pass Resource object from client to storage and vice versa. The actual file is located on my storage service.Currently when there is a request for download client server receive a byte[] array and create an OutputStream. Is there some other approach that will work with serialization classes?\nThis is my current client rest service:</p>\n<pre><code>@RequestMapping(value = &quot;/file/{fileName:.+}&quot;, method = RequestMethod.GET)\n    public void getFile(HttpServletRequest request, HttpServletResponse response,\n        @PathVariable(&quot;fileName&quot;) String fileName) {\n\n    byte[] imgbytes = null;\n\n    imgbytes  = fileService.getFullFile(fileName);\n        OutputStream outputStream = null;\n    try {\n        outputStream = response.getOutputStream();\n        IOUtils.write(imgbytes, outputStream);\n        outputStream.flush();\n    } catch (IOException ioException) {\n        logger.error(&quot;IO ERROR - &quot;, ioException);\n    } finally {\n        if (outputStream != null) {\n        try {\n            outputStream.close();\n        } catch (IOException e) {\n            logger.error(&quot;Error closing stream - &quot;, e);\n        }\n        }\n    }\n    }\n\n</code></pre>\n"},{"tags":["java","enums"],"comments":[{"owner":{"account_id":1198585,"reputation":203,"user_id":1169762,"accept_rate":100,"display_name":"Richard Rhyan"},"score":0,"creation_date":1337445790,"post_id":10666881,"comment_id":13837529,"body_markdown":"* edit - added extends. MyClass has enum Property, as does each subclass.","body":"* edit - added extends. MyClass has enum Property, as does each subclass."},{"owner":{"account_id":21180,"reputation":9893,"user_id":51292,"accept_rate":59,"display_name":"Ray Tayek"},"score":1,"creation_date":1337446510,"post_id":10666881,"comment_id":13837659,"body_markdown":"if the property keys/names are different in each subclass, then you will need a different enum declaration in each subclass","body":"if the property keys/names are different in each subclass, then you will need a different enum declaration in each subclass"},{"owner":{"account_id":1198585,"reputation":203,"user_id":1169762,"accept_rate":100,"display_name":"Richard Rhyan"},"score":0,"creation_date":1337446667,"post_id":10666881,"comment_id":13837691,"body_markdown":"dang... that&#39;s what I was afraid of.","body":"dang... that&#39;s what I was afraid of."}],"answers":[{"tags":[],"owner":{"account_id":877405,"reputation":6423,"user_id":103605,"accept_rate":60,"display_name":"rapha&#235;λ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1337444192,"creation_date":1337444192,"answer_id":10666885,"question_id":10666881,"body_markdown":"Just declare the enum as a  public top level enum class (in its own file)","title":"Enum helper in a class (Java)","body":"<p>Just declare the enum as a  public top level enum class (in its own file)</p>\n"},{"tags":[],"owner":{"account_id":1102290,"reputation":3877,"user_id":1094430,"accept_rate":62,"display_name":"StepTNT"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1337446917,"creation_date":1337444239,"answer_id":10666888,"question_id":10666881,"body_markdown":"Your enum is public so you just can use `Account.Property` to access it from outside the `Account` class\r\n\r\nEDIT :\r\n\r\nIf I got what you need, you&#39;d like to do something like \r\n\r\n    Property p = Account.Property.PASSWORD;\r\n    Property p1 = Product.Property.CODE;\r\n\r\nwhere Product is\r\n\r\n    public class Product extends MyClass{\r\n        HashMap&lt;Account.Property, String&gt; property = new HashMap&lt;&gt;();\r\n        public Product() {\r\n        }\r\n    \r\n        public static enum Property {\r\n            CODE,\r\n            PRICE;\r\n        }\r\n    }\r\n\r\nand you want to do this in your `MyClass`.\r\n\r\nThe problem is that both the two lines require an import and you can&#39;t import two classes with the same name, so the only solution is to do something like this \r\n\r\n    Account.Property p = Account.Property.PASSWORD;\r\n    Product.Property p1 = Product.Property.CODE;\r\n\r\nI guess that you&#39;ve got to deal with the `instanceof` to use the right `Property` enum for each class, as there&#39;s no way to extend an enum!","title":"Enum helper in a class (Java)","body":"<p>Your enum is public so you just can use <code>Account.Property</code> to access it from outside the <code>Account</code> class</p>\n\n<p>EDIT :</p>\n\n<p>If I got what you need, you'd like to do something like </p>\n\n<pre><code>Property p = Account.Property.PASSWORD;\nProperty p1 = Product.Property.CODE;\n</code></pre>\n\n<p>where Product is</p>\n\n<pre><code>public class Product extends MyClass{\n    HashMap&lt;Account.Property, String&gt; property = new HashMap&lt;&gt;();\n    public Product() {\n    }\n\n    public static enum Property {\n        CODE,\n        PRICE;\n    }\n}\n</code></pre>\n\n<p>and you want to do this in your <code>MyClass</code>.</p>\n\n<p>The problem is that both the two lines require an import and you can't import two classes with the same name, so the only solution is to do something like this </p>\n\n<pre><code>Account.Property p = Account.Property.PASSWORD;\nProduct.Property p1 = Product.Property.CODE;\n</code></pre>\n\n<p>I guess that you've got to deal with the <code>instanceof</code> to use the right <code>Property</code> enum for each class, as there's no way to extend an enum!</p>\n"},{"tags":[],"owner":{"account_id":21180,"reputation":9893,"user_id":51292,"accept_rate":59,"display_name":"Ray Tayek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1337447905,"creation_date":1337447905,"answer_id":10667336,"question_id":10666881,"body_markdown":"maybe something like the following (but this has no type checking):\r\n\r\n    import java.util.*;\r\n    abstract class MyClass {\r\n    \tMap&lt;Object,String&gt; properties=new HashMap&lt;Object,String&gt;();\r\n    }\r\n    class Account extends MyClass {\r\n    \tenum Property {\r\n    \t\tuserid,password\r\n    \t}\r\n    \t//static Set&lt;Property&gt; keys=EnumSet.allOf(Property.class);\r\n    }\r\n    class Research extends MyClass {\r\n    \tenum Property {\r\n    \t\tred,green;\r\n    \t}\r\n    \tstatic Set&lt;Property&gt; keys=EnumSet.allOf(Property.class);\r\n    }\r\n    public class So10666881 {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tAccount account=new Account();\r\n    \t\taccount.properties.put(Account.Property.userid,&quot;user&quot;);\r\n    \t\taccount.properties.put(Account.Property.password,&quot;pass&quot;);\r\n    \t\tfor(Account.Property property:Account.Property.values())\r\n    \t\t\tSystem.out.println(property+&quot;=&quot;+account.properties.get(property));\r\n    \t}\r\n    }\r\n\r\n","title":"Enum helper in a class (Java)","body":"<p>maybe something like the following (but this has no type checking):</p>\n\n<pre><code>import java.util.*;\nabstract class MyClass {\n    Map&lt;Object,String&gt; properties=new HashMap&lt;Object,String&gt;();\n}\nclass Account extends MyClass {\n    enum Property {\n        userid,password\n    }\n    //static Set&lt;Property&gt; keys=EnumSet.allOf(Property.class);\n}\nclass Research extends MyClass {\n    enum Property {\n        red,green;\n    }\n    static Set&lt;Property&gt; keys=EnumSet.allOf(Property.class);\n}\npublic class So10666881 {\n    public static void main(String[] args) {\n        Account account=new Account();\n        account.properties.put(Account.Property.userid,\"user\");\n        account.properties.put(Account.Property.password,\"pass\");\n        for(Account.Property property:Account.Property.values())\n            System.out.println(property+\"=\"+account.properties.get(property));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1198585,"reputation":203,"user_id":1169762,"accept_rate":100,"display_name":"Richard Rhyan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1929,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":10666888,"answer_count":3,"score":2,"last_activity_date":1683279612,"creation_date":1337444134,"question_id":10666881,"body_markdown":"If I have an `Enum` as a *helper* in a Java class, is there any way to refer to that `Enum` outside of the class it&#39;s helping?\r\n\r\nBasically, what I have is this:\r\n\r\n    class Account extends MyClass {\r\n        HashMap&lt;Property, String&gt; property = new HashMap&lt;Property, String&gt;();\r\n        public Account() {\r\n        }\r\n\r\n        public enum Property {\r\n            USERID,\r\n            PASSWORD;\r\n        }\r\n    }\r\n\r\nI want to be able to access the `Property` enum outside of the `Account` class.\r\n\r\nThe reason I want to do this is because this is a *subclass* of a another, and I want to be able to access the properties of a given subclass without referring to a unique enum name (i.e.: without referring to each one as, say, `AccountProperty` or `ResearchProperty` or `TaskProperty` etc).","title":"Enum helper in a class (Java)","body":"<p>If I have an <code>Enum</code> as a <em>helper</em> in a Java class, is there any way to refer to that <code>Enum</code> outside of the class it's helping?</p>\n<p>Basically, what I have is this:</p>\n<pre><code>class Account extends MyClass {\n    HashMap&lt;Property, String&gt; property = new HashMap&lt;Property, String&gt;();\n    public Account() {\n    }\n\n    public enum Property {\n        USERID,\n        PASSWORD;\n    }\n}\n</code></pre>\n<p>I want to be able to access the <code>Property</code> enum outside of the <code>Account</code> class.</p>\n<p>The reason I want to do this is because this is a <em>subclass</em> of a another, and I want to be able to access the properties of a given subclass without referring to a unique enum name (i.e.: without referring to each one as, say, <code>AccountProperty</code> or <code>ResearchProperty</code> or <code>TaskProperty</code> etc).</p>\n"},{"tags":["java","terminal"],"comments":[{"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":1,"creation_date":1683275066,"post_id":76180064,"comment_id":134344906,"body_markdown":"Yes, it&#39;s blocky, what is the actual problem?","body":"Yes, it&#39;s blocky, what is the actual problem?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1683275263,"post_id":76180064,"comment_id":134344942,"body_markdown":"You&#39;re not attempting to get that high-res (and animated!) image to appear in the terminal are you??","body":"You&#39;re not attempting to get that high-res (and animated!) image to appear in the terminal are you??"},{"owner":{"account_id":23361144,"reputation":1,"user_id":17704128,"display_name":"ducky"},"score":0,"creation_date":1683276168,"post_id":76180064,"comment_id":134345132,"body_markdown":"@g00se Not exactly looking for exactly high res but I have seen examples of this where it was outputted in a terminal in better quality and way recognizable than that","body":"@g00se Not exactly looking for exactly high res but I have seen examples of this where it was outputted in a terminal in better quality and way recognizable than that"},{"owner":{"account_id":23361144,"reputation":1,"user_id":17704128,"display_name":"ducky"},"score":0,"creation_date":1683276246,"post_id":76180064,"comment_id":134345150,"body_markdown":"@jon-hanson I havee already posted a comment about it but basically I&#39;ve seen examples of this where it was in way better quality and way recognizable than what mine is, which is strange I suppose","body":"@jon-hanson I havee already posted a comment about it but basically I&#39;ve seen examples of this where it was in way better quality and way recognizable than what mine is, which is strange I suppose"},{"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":0,"creation_date":1683278439,"post_id":76180064,"comment_id":134345603,"body_markdown":"I think we need a more clear problem statement. The code is doing exactly what I would expect it to do, and it&#39;s not clear why you expect it to produce higer resolution images. Your approach is using terminal colour codes, so the resolution will be one colour (i.e. pixel) per character.","body":"I think we need a more clear problem statement. The code is doing exactly what I would expect it to do, and it&#39;s not clear why you expect it to produce higer resolution images. Your approach is using terminal colour codes, so the resolution will be one colour (i.e. pixel) per character."},{"owner":{"account_id":23361144,"reputation":1,"user_id":17704128,"display_name":"ducky"},"score":0,"creation_date":1683280924,"post_id":76180064,"comment_id":134346092,"body_markdown":"@jon-hanson I&#39;m more looking to see if there&#39;s a way to make the image more recognizable as I&#39;ve seen in other programs I&#39;ve used","body":"@jon-hanson I&#39;m more looking to see if there&#39;s a way to make the image more recognizable as I&#39;ve seen in other programs I&#39;ve used"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683279333,"creation_date":1683279333,"answer_id":76180801,"question_id":76180064,"body_markdown":"Using [this](https://manytools.org/hacker-tools/convert-image-to-ansi-art/go/) site, I get the following in my terminal from your source image:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AptzJ.png\r\n\r\nI post this, not as an answer, but more as a realistic assessment of what might be achieved.","title":"Outputting ANSI GIF In Java","body":"<p>Using <a href=\"https://manytools.org/hacker-tools/convert-image-to-ansi-art/go/\" rel=\"nofollow noreferrer\">this</a> site, I get the following in my terminal from your source image:</p>\n<p><a href=\"https://i.stack.imgur.com/AptzJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AptzJ.png\" alt=\"enter image description here\" /></a></p>\n<p>I post this, not as an answer, but more as a realistic assessment of what might be achieved.</p>\n"}],"owner":{"account_id":23361144,"reputation":1,"user_id":17704128,"display_name":"ducky"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1683279333,"creation_date":1683273955,"question_id":76180064,"body_markdown":"So, I have this code that is meant to take a given .gif file and turn each frame into ANSI chars and then output it (to the PuTTy terminal) with the correct colors. My issue is, It&#39;s very blocky. I have been trying to fix this for around 2 hours and cannot get around it, I have provided the code &amp; picture of the issue\r\n\r\nCode:\r\n```\r\npublic static void displayImage(BufferedImage image, BufferedWriter out) throws IOException, InterruptedException {\r\n        int consoleWidth = 80;\r\n        int consoleHeight = 24;\r\n        double imageWidth = image.getWidth();\r\n        double imageHeight = image.getHeight();\r\n        double aspectRatio = imageWidth / imageHeight;\r\n        int scaledWidth = consoleWidth;\r\n        int scaledHeight = (int) (consoleWidth / aspectRatio);\r\n        if (scaledHeight &gt; consoleHeight) {\r\n            scaledHeight = consoleHeight;\r\n            scaledWidth = (int) (consoleHeight * aspectRatio);\r\n        }\r\n        BufferedImage scaledImage = new BufferedImage(scaledWidth, scaledHeight, BufferedImage.TYPE_INT_ARGB);\r\n        Graphics2D g = scaledImage.createGraphics();\r\n        g.drawImage(image, 0, 0, scaledWidth, scaledHeight, null);\r\n        g.dispose();\r\n        out.write(String.format(&quot;\\033[31m\\033[47m&quot;));\r\n        out.write(String.format(&quot;\\033[2J&quot;));\r\n        out.write(String.format(&quot;\\033[1;1H&quot;));\r\n        out.write(String.format(&quot;\\033[?25l&quot;));\r\n        out.write(String.format(&quot;\\033[0m&quot;));\r\n        out.write(String.format(&quot;\\033[%dA&quot;, consoleHeight));\r\n        for (int y = 0; y &lt; consoleHeight; y++) {\r\n            for (int x = 0; x &lt; consoleWidth; x++) {\r\n                int sx = x * scaledWidth / consoleWidth;\r\n                int sy = y * scaledHeight / consoleHeight;\r\n                int color = scaledImage.getRGB(sx, sy);\r\n                int alpha = (color &gt;&gt; 24) &amp; 0xff;\r\n                int red = (color &gt;&gt; 16) &amp; 0xff;\r\n                int green = (color &gt;&gt; 8) &amp; 0xff;\r\n                int blue = color &amp; 0xff;\r\n                // convert RGB to 256-color ANSI code\r\n                int ansiCode = rgbToAnsi(red, green, blue);\r\n                // print the ASCII character with foreground and background colors\r\n                out.write(String.format(&quot;\\u001b[48;5;%dm\\u001b[38;5;%dm &quot;, ansiCode, ansiCode));\r\n            }\r\n            out.write(&quot;\\u001b[0m\\r\\n&quot;); // reset colors\r\n        }\r\n        out.write(String.format(&quot;\\033[%dA&quot;, consoleHeight));\r\n        out.write(String.format(&quot;\\033[?25h&quot;));\r\n        out.flush();\r\n        Thread.sleep(250);\r\n    }\r\n\r\n    private static int rgbToAnsi(int red, int green, int blue) {\r\n        // convert RGB to 256-color ANSI code\r\n        int gray = (int) (0.299 * red + 0.587 * green + 0.114 * blue);\r\n        if (gray &lt; 8) {\r\n            return 16;\r\n        }\r\n        if (gray &gt; 248) {\r\n            return 231;\r\n        }\r\n        int r = getClosestColorValue(red);\r\n        int g = getClosestColorValue(green);\r\n        int b = getClosestColorValue(blue);\r\n        return 16 + 36 * r + 6 * g + b;\r\n    }\r\n\r\n    private static int getClosestColorValue(int value) {\r\n        return Math.round(value / 51.0f);\r\n    }\r\n\r\n```\r\nIssue:\r\n[Blocky Image](https://i.stack.imgur.com/YF7ru.png)\r\n[Blocky Image #2](https://i.stack.imgur.com/drD3l.png)\r\n\r\nThe Gif I&#39;m trying to use:\r\nhttps://tenor.com/view/explosion-fate-anime-gif-26130203","title":"Outputting ANSI GIF In Java","body":"<p>So, I have this code that is meant to take a given .gif file and turn each frame into ANSI chars and then output it (to the PuTTy terminal) with the correct colors. My issue is, It's very blocky. I have been trying to fix this for around 2 hours and cannot get around it, I have provided the code &amp; picture of the issue</p>\n<p>Code:</p>\n<pre><code>public static void displayImage(BufferedImage image, BufferedWriter out) throws IOException, InterruptedException {\n        int consoleWidth = 80;\n        int consoleHeight = 24;\n        double imageWidth = image.getWidth();\n        double imageHeight = image.getHeight();\n        double aspectRatio = imageWidth / imageHeight;\n        int scaledWidth = consoleWidth;\n        int scaledHeight = (int) (consoleWidth / aspectRatio);\n        if (scaledHeight &gt; consoleHeight) {\n            scaledHeight = consoleHeight;\n            scaledWidth = (int) (consoleHeight * aspectRatio);\n        }\n        BufferedImage scaledImage = new BufferedImage(scaledWidth, scaledHeight, BufferedImage.TYPE_INT_ARGB);\n        Graphics2D g = scaledImage.createGraphics();\n        g.drawImage(image, 0, 0, scaledWidth, scaledHeight, null);\n        g.dispose();\n        out.write(String.format(&quot;\\033[31m\\033[47m&quot;));\n        out.write(String.format(&quot;\\033[2J&quot;));\n        out.write(String.format(&quot;\\033[1;1H&quot;));\n        out.write(String.format(&quot;\\033[?25l&quot;));\n        out.write(String.format(&quot;\\033[0m&quot;));\n        out.write(String.format(&quot;\\033[%dA&quot;, consoleHeight));\n        for (int y = 0; y &lt; consoleHeight; y++) {\n            for (int x = 0; x &lt; consoleWidth; x++) {\n                int sx = x * scaledWidth / consoleWidth;\n                int sy = y * scaledHeight / consoleHeight;\n                int color = scaledImage.getRGB(sx, sy);\n                int alpha = (color &gt;&gt; 24) &amp; 0xff;\n                int red = (color &gt;&gt; 16) &amp; 0xff;\n                int green = (color &gt;&gt; 8) &amp; 0xff;\n                int blue = color &amp; 0xff;\n                // convert RGB to 256-color ANSI code\n                int ansiCode = rgbToAnsi(red, green, blue);\n                // print the ASCII character with foreground and background colors\n                out.write(String.format(&quot;\\u001b[48;5;%dm\\u001b[38;5;%dm &quot;, ansiCode, ansiCode));\n            }\n            out.write(&quot;\\u001b[0m\\r\\n&quot;); // reset colors\n        }\n        out.write(String.format(&quot;\\033[%dA&quot;, consoleHeight));\n        out.write(String.format(&quot;\\033[?25h&quot;));\n        out.flush();\n        Thread.sleep(250);\n    }\n\n    private static int rgbToAnsi(int red, int green, int blue) {\n        // convert RGB to 256-color ANSI code\n        int gray = (int) (0.299 * red + 0.587 * green + 0.114 * blue);\n        if (gray &lt; 8) {\n            return 16;\n        }\n        if (gray &gt; 248) {\n            return 231;\n        }\n        int r = getClosestColorValue(red);\n        int g = getClosestColorValue(green);\n        int b = getClosestColorValue(blue);\n        return 16 + 36 * r + 6 * g + b;\n    }\n\n    private static int getClosestColorValue(int value) {\n        return Math.round(value / 51.0f);\n    }\n\n</code></pre>\n<p>Issue:\n<a href=\"https://i.stack.imgur.com/YF7ru.png\" rel=\"nofollow noreferrer\">Blocky Image</a>\n<a href=\"https://i.stack.imgur.com/drD3l.png\" rel=\"nofollow noreferrer\">Blocky Image #2</a></p>\n<p>The Gif I'm trying to use:\n<a href=\"https://tenor.com/view/explosion-fate-anime-gif-26130203\" rel=\"nofollow noreferrer\">https://tenor.com/view/explosion-fate-anime-gif-26130203</a></p>\n"},{"tags":["java","pycharm","java-17"],"comments":[{"owner":{"account_id":14950045,"reputation":11564,"user_id":10794031,"display_name":"bad_coder"},"score":0,"creation_date":1683317711,"post_id":76180791,"comment_id":134354245,"body_markdown":"I&#39;m guessing the new incompatible Java is being taken from [the system path](https://stackoverflow.com/questions/5971312/how-to-set-environment-variables-in-python) so if you change it there PyCharm should start working again.","body":"I&#39;m guessing the new incompatible Java is being taken from <a href=\"https://stackoverflow.com/questions/5971312/how-to-set-environment-variables-in-python\">the system path</a> so if you change it there PyCharm should start working again."}],"owner":{"account_id":17606614,"reputation":2398,"user_id":12775531,"display_name":"s510"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":230,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683279297,"creation_date":1683279297,"question_id":76180791,"body_markdown":"After I accidentally changed the java version (downgraded it from 17 to 11) from settings menu, my PyCharm wont start at all. I even tried to remove it and reinstall it but nothing happens so far. Getting the below error after reinstalling pycharm. I know I can delete all the files related to Pycharm in my ubuntu system, and reinstall, however I am looking for some elegant solution where I can bring back to the previous state.\r\n\r\nError:\r\n\r\n    $ pycharm-professional \r\n    OpenJDK 64-Bit Server VM warning: Archived non-system classes are disabled because the java.system.class.loader property is specified (value = &quot;com.intellij.util.lang.PathClassLoader&quot;). To use archived non-system classes, this property must not be set\r\n    CompileCommand: exclude com/intellij/openapi/vfs/impl/FilePartNodeRoot.trieDescend bool exclude = true\r\n    \r\n    Start Failed\r\n    Internal error. Please refer to https://jb.gg/ide/critical-startup-errors\r\n    \r\n    java.lang.IllegalStateException: @NotNull method com/intellij/util/ui/EDT.getEventDispatchThread must not return null\r\n    \tat com.intellij.util.ui.EDT.$$$reportNull$$$0(EDT.java)\r\n    \tat com.intellij.util.ui.EDT.getEventDispatchThread(EDT.java:48)\r\n    \tat com.intellij.idea.StartupUtil$startApplication$appDeferred$1$rwLockHolderDeferred$1.invokeSuspend(StartupUtil.kt:231)\r\n    \tat kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\r\n    \tat kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\r\n    \tat kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:570)\r\n    \tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:750)\r\n    \tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:677)\r\n    \tat kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:664)\r\n    \tSuppressed: java.lang.UnsatisfiedLinkError: Can&#39;t load library: /usr/lib/jvm/java-17-openjdk-amd64/lib/libawt_xawt.so\r\n    \t\tat java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2393)\r\n    \t\tat java.base/java.lang.Runtime.load0(Runtime.java:755)\r\n    \t\tat java.base/java.lang.System.load(System.java:1953)\r\n    \t\tat java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\r\n    \t\tat java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\r\n    \t\tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:232)\r\n    \t\tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:174)\r\n    \t\tat java.base/jdk.internal.loader.NativeLibraries.findFromPaths(NativeLibraries.java:315)\r\n    \t\tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:285)\r\n    \t\tat java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2398)\r\n    \t\tat java.base/java.lang.Runtime.loadLibrary0(Runtime.java:818)\r\n    \t\tat java.base/java.lang.System.loadLibrary(System.java:1989)\r\n    \t\tat java.desktop/java.awt.Toolkit$2.run(Toolkit.java:1392)\r\n    \t\tat java.desktop/java.awt.Toolkit$2.run(Toolkit.java:1390)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\r\n    \t\tat java.desktop/java.awt.Toolkit.loadLibraries(Toolkit.java:1389)\r\n    \t\tat java.desktop/java.awt.Toolkit.initStatic(Toolkit.java:1427)\r\n    \t\tat java.desktop/java.awt.Toolkit.&lt;clinit&gt;(Toolkit.java:1401)\r\n    \t\tat java.desktop/java.awt.Color.&lt;clinit&gt;(Color.java:277)\r\n    \t\tat com.intellij.ide.ui.laf.IdeaLaf.&lt;clinit&gt;(IdeaLaf.java:24)\r\n    \t\tat java.base/java.lang.Class.forName0(Native Method)\r\n    \t\tat java.base/java.lang.Class.forName(Class.java:467)\r\n    \t\tat com.intellij.idea.StartupUtil$preloadLafClasses$1.invokeSuspend(StartupUtil.kt:518)\r\n    \t\tat kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\r\n    \t\tat kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\r\n    \t\tat kotlinx.coroutines.internal.LimitedDispatcher.run(LimitedDispatcher.kt:42)\r\n    \t\tat kotlinx.coroutines.scheduling.TaskImpl.run(Tasks.kt:95)\r\n    \t\t... 4 more\r\n    \t\tSuppressed: java.lang.NoClassDefFoundError: Could not initialize class java.awt.Toolkit\r\n    \t\t\tat java.desktop/java.awt.EventQueue.invokeLater(EventQueue.java:1314)\r\n    \t\t\tat com.intellij.openapi.application.impl.RawSwingDispatcher.dispatch(RawSwingDispatcher.kt:16)\r\n    \t\t\tat kotlinx.coroutines.internal.DispatchedContinuationKt.resumeCancellableWith(DispatchedContinuation.kt:322)\r\n    \t\t\tat kotlinx.coroutines.intrinsics.CancellableKt.startCoroutineCancellable(Cancellable.kt:30)\r\n    \t\t\tat kotlinx.coroutines.intrinsics.CancellableKt.startCoroutineCancellable$default(Cancellable.kt:25)\r\n    \t\t\tat kotlinx.coroutines.CoroutineStart.invoke(CoroutineStart.kt:110)\r\n    \t\t\tat kotlinx.coroutines.AbstractCoroutine.start(AbstractCoroutine.kt:126)\r\n    \t\t\tat kotlinx.coroutines.BuildersKt__Builders_commonKt.launch(Builders.common.kt:56)\r\n    \t\t\tat kotlinx.coroutines.BuildersKt.launch(Unknown Source)\r\n    \t\t\tat kotlinx.coroutines.BuildersKt__Builders_commonKt.launch$default(Builders.common.kt:47)\r\n    \t\t\tat kotlinx.coroutines.BuildersKt.launch$default(Unknown Source)\r\n    \t\t\tat com.intellij.idea.StartupUtil$updateFrameClassAndWindowIconAndPreloadSystemFonts$1.invokeSuspend(StartupUtil.kt:582)\r\n    \t\t\tat kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\r\n    \t\t\tat kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\r\n    \t\t\t... 4 more\r\n    \t\tSuppressed: [CIRCULAR REFERENCE: java.lang.IllegalStateException: @NotNull method com/intellij/util/ui/EDT.getEventDispatchThread must not return null]\r\n    \r\n    -----\r\n    Your JRE: 17.0.6+10-Ubuntu-0ubuntu122.04 amd64 (Private Build)\r\n    /usr/lib/jvm/java-17-openjdk-amd64\r\n    \r\n    Also, a UI exception occurred on an attempt to show the above message\r\n    java.lang.NoClassDefFoundError: Could not initialize class java.awt.Toolkit\r\n    \tat java.desktop/java.awt.Component.&lt;clinit&gt;(Component.java:624)\r\n    \tat com.intellij.idea.StartupErrorReporter.showMessage(StartupErrorReporter.java:85)\r\n    \tat com.intellij.idea.StartupErrorReporter.showMessage(StartupErrorReporter.java:39)\r\n    \tat com.intellij.idea.Main.main(Main.kt:71)\r\n\r\n","title":"Pycharm professional startup failure after change in java version","body":"<p>After I accidentally changed the java version (downgraded it from 17 to 11) from settings menu, my PyCharm wont start at all. I even tried to remove it and reinstall it but nothing happens so far. Getting the below error after reinstalling pycharm. I know I can delete all the files related to Pycharm in my ubuntu system, and reinstall, however I am looking for some elegant solution where I can bring back to the previous state.</p>\n<p>Error:</p>\n<pre><code>$ pycharm-professional \nOpenJDK 64-Bit Server VM warning: Archived non-system classes are disabled because the java.system.class.loader property is specified (value = &quot;com.intellij.util.lang.PathClassLoader&quot;). To use archived non-system classes, this property must not be set\nCompileCommand: exclude com/intellij/openapi/vfs/impl/FilePartNodeRoot.trieDescend bool exclude = true\n\nStart Failed\nInternal error. Please refer to https://jb.gg/ide/critical-startup-errors\n\njava.lang.IllegalStateException: @NotNull method com/intellij/util/ui/EDT.getEventDispatchThread must not return null\n    at com.intellij.util.ui.EDT.$$$reportNull$$$0(EDT.java)\n    at com.intellij.util.ui.EDT.getEventDispatchThread(EDT.java:48)\n    at com.intellij.idea.StartupUtil$startApplication$appDeferred$1$rwLockHolderDeferred$1.invokeSuspend(StartupUtil.kt:231)\n    at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n    at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler.runSafely(CoroutineScheduler.kt:570)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.executeTask(CoroutineScheduler.kt:750)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.runWorker(CoroutineScheduler.kt:677)\n    at kotlinx.coroutines.scheduling.CoroutineScheduler$Worker.run(CoroutineScheduler.kt:664)\n    Suppressed: java.lang.UnsatisfiedLinkError: Can't load library: /usr/lib/jvm/java-17-openjdk-amd64/lib/libawt_xawt.so\n        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2393)\n        at java.base/java.lang.Runtime.load0(Runtime.java:755)\n        at java.base/java.lang.System.load(System.java:1953)\n        at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n        at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\n        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:232)\n        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:174)\n        at java.base/jdk.internal.loader.NativeLibraries.findFromPaths(NativeLibraries.java:315)\n        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:285)\n        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2398)\n        at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:818)\n        at java.base/java.lang.System.loadLibrary(System.java:1989)\n        at java.desktop/java.awt.Toolkit$2.run(Toolkit.java:1392)\n        at java.desktop/java.awt.Toolkit$2.run(Toolkit.java:1390)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\n        at java.desktop/java.awt.Toolkit.loadLibraries(Toolkit.java:1389)\n        at java.desktop/java.awt.Toolkit.initStatic(Toolkit.java:1427)\n        at java.desktop/java.awt.Toolkit.&lt;clinit&gt;(Toolkit.java:1401)\n        at java.desktop/java.awt.Color.&lt;clinit&gt;(Color.java:277)\n        at com.intellij.ide.ui.laf.IdeaLaf.&lt;clinit&gt;(IdeaLaf.java:24)\n        at java.base/java.lang.Class.forName0(Native Method)\n        at java.base/java.lang.Class.forName(Class.java:467)\n        at com.intellij.idea.StartupUtil$preloadLafClasses$1.invokeSuspend(StartupUtil.kt:518)\n        at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n        at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\n        at kotlinx.coroutines.internal.LimitedDispatcher.run(LimitedDispatcher.kt:42)\n        at kotlinx.coroutines.scheduling.TaskImpl.run(Tasks.kt:95)\n        ... 4 more\n        Suppressed: java.lang.NoClassDefFoundError: Could not initialize class java.awt.Toolkit\n            at java.desktop/java.awt.EventQueue.invokeLater(EventQueue.java:1314)\n            at com.intellij.openapi.application.impl.RawSwingDispatcher.dispatch(RawSwingDispatcher.kt:16)\n            at kotlinx.coroutines.internal.DispatchedContinuationKt.resumeCancellableWith(DispatchedContinuation.kt:322)\n            at kotlinx.coroutines.intrinsics.CancellableKt.startCoroutineCancellable(Cancellable.kt:30)\n            at kotlinx.coroutines.intrinsics.CancellableKt.startCoroutineCancellable$default(Cancellable.kt:25)\n            at kotlinx.coroutines.CoroutineStart.invoke(CoroutineStart.kt:110)\n            at kotlinx.coroutines.AbstractCoroutine.start(AbstractCoroutine.kt:126)\n            at kotlinx.coroutines.BuildersKt__Builders_commonKt.launch(Builders.common.kt:56)\n            at kotlinx.coroutines.BuildersKt.launch(Unknown Source)\n            at kotlinx.coroutines.BuildersKt__Builders_commonKt.launch$default(Builders.common.kt:47)\n            at kotlinx.coroutines.BuildersKt.launch$default(Unknown Source)\n            at com.intellij.idea.StartupUtil$updateFrameClassAndWindowIconAndPreloadSystemFonts$1.invokeSuspend(StartupUtil.kt:582)\n            at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n            at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\n            ... 4 more\n        Suppressed: [CIRCULAR REFERENCE: java.lang.IllegalStateException: @NotNull method com/intellij/util/ui/EDT.getEventDispatchThread must not return null]\n\n-----\nYour JRE: 17.0.6+10-Ubuntu-0ubuntu122.04 amd64 (Private Build)\n/usr/lib/jvm/java-17-openjdk-amd64\n\nAlso, a UI exception occurred on an attempt to show the above message\njava.lang.NoClassDefFoundError: Could not initialize class java.awt.Toolkit\n    at java.desktop/java.awt.Component.&lt;clinit&gt;(Component.java:624)\n    at com.intellij.idea.StartupErrorReporter.showMessage(StartupErrorReporter.java:85)\n    at com.intellij.idea.StartupErrorReporter.showMessage(StartupErrorReporter.java:39)\n    at com.intellij.idea.Main.main(Main.kt:71)\n</code></pre>\n"},{"tags":["java","selenium-webdriver","appium"],"answers":[{"tags":[],"owner":{"account_id":21257490,"reputation":76,"user_id":15638753,"display_name":"ChrisMersi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683279221,"creation_date":1683279221,"answer_id":76180783,"question_id":76180218,"body_markdown":"Try removing last slash from your URL.\r\n\r\nSo it becomes: \r\n``` Java\r\nreturn new IOSDriver(new URL(&quot;http://127.0.0.1:4723&quot;), options);\r\n```\r\n","title":"Appium 2 - can&#39;t connect to server from Java Code","body":"<p>Try removing last slash from your URL.</p>\n<p>So it becomes:</p>\n<pre><code>return new IOSDriver(new URL(&quot;http://127.0.0.1:4723&quot;), options);\n</code></pre>\n"}],"owner":{"account_id":13329490,"reputation":31,"user_id":9621353,"display_name":"iMat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683279221,"creation_date":1683275202,"question_id":76180218,"body_markdown":"I had to update Selenium and Appium at my test project. My current configuration is:\r\n- Selenium 4 \r\n- Appium 2\r\n\r\nAfter all necessary changes mentioned at migration guides my Java Tests are not working. It&#39;s not possible to connect to Appium Server (started via CLI). Im using real Devices\r\n\r\nIt&#39;s not working for both Android and iOS (UIAutomator2 and XCUITest drivers). Drivers versions are correct in context of Appium 2 and my Xcode version\r\n\r\nAppium Inspector is working fine and Im able to connect to both devices (iOS and Android)\r\n```\r\norg.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. \r\nHost info: host: &#39;MYPC.local&#39;, ip: &#39;fe80:0:0:0:14a6:1f6d:5e7b:a5f3%en0&#39;\r\n\r\n```\r\n```\r\nCaused by: org.openqa.selenium.WebDriverException: java.lang.reflect.InvocationTargetException\r\nBuild info: version: &#39;4.5.3&#39;, revision: &#39;4b786a1e430&#39;\r\nSystem info: os.name: &#39;Mac OS X&#39;, os.arch: &#39;x86_64&#39;, os.version: &#39;11.2&#39;, java.version: &#39;11.0.11&#39;\r\nDriver info: driver.version: AndroidDriver\r\n```\r\n\r\nCommand to start server:\r\n\r\n    Appium server --address 127.0.0.1 --allow-cors\r\n\r\nCapabilities and Driver initialisation\r\n```\r\nXCUITestOptions options = new XCUITestOptions()\r\n                .setUdid(deviceUdid)\r\n                .setPlatformName(platformName)\r\n                .setPlatformVersion(platformVersion)\r\n                .setDeviceName(deviceName)\r\n                .setAutomationName(&quot;XCUITest&quot;)\r\n                .setXcodeCertificate(new XcodeCertificate(&quot;SOME VALUE&quot;, &quot;Apple Development&quot;))\r\n                .setSafariIgnoreFraudWarning(true)\r\n                .setNewCommandTimeout(Duration.ofSeconds(75))\r\n                .setBundleId(bundleID);\r\n\r\nreturn new IOSDriver(new URL(&quot;http://127.0.0.1:4723/&quot;), options);\r\n```\r\n\r\nAny suggestions? Did you had similar issue?\r\n\r\nBR\r\nMateusz","title":"Appium 2 - can&#39;t connect to server from Java Code","body":"<p>I had to update Selenium and Appium at my test project. My current configuration is:</p>\n<ul>\n<li>Selenium 4</li>\n<li>Appium 2</li>\n</ul>\n<p>After all necessary changes mentioned at migration guides my Java Tests are not working. It's not possible to connect to Appium Server (started via CLI). Im using real Devices</p>\n<p>It's not working for both Android and iOS (UIAutomator2 and XCUITest drivers). Drivers versions are correct in context of Appium 2 and my Xcode version</p>\n<p>Appium Inspector is working fine and Im able to connect to both devices (iOS and Android)</p>\n<pre><code>org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. \nHost info: host: 'MYPC.local', ip: 'fe80:0:0:0:14a6:1f6d:5e7b:a5f3%en0'\n\n</code></pre>\n<pre><code>Caused by: org.openqa.selenium.WebDriverException: java.lang.reflect.InvocationTargetException\nBuild info: version: '4.5.3', revision: '4b786a1e430'\nSystem info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '11.2', java.version: '11.0.11'\nDriver info: driver.version: AndroidDriver\n</code></pre>\n<p>Command to start server:</p>\n<pre><code>Appium server --address 127.0.0.1 --allow-cors\n</code></pre>\n<p>Capabilities and Driver initialisation</p>\n<pre><code>XCUITestOptions options = new XCUITestOptions()\n                .setUdid(deviceUdid)\n                .setPlatformName(platformName)\n                .setPlatformVersion(platformVersion)\n                .setDeviceName(deviceName)\n                .setAutomationName(&quot;XCUITest&quot;)\n                .setXcodeCertificate(new XcodeCertificate(&quot;SOME VALUE&quot;, &quot;Apple Development&quot;))\n                .setSafariIgnoreFraudWarning(true)\n                .setNewCommandTimeout(Duration.ofSeconds(75))\n                .setBundleId(bundleID);\n\nreturn new IOSDriver(new URL(&quot;http://127.0.0.1:4723/&quot;), options);\n</code></pre>\n<p>Any suggestions? Did you had similar issue?</p>\n<p>BR\nMateusz</p>\n"},{"tags":["java","apache-spark"],"owner":{"account_id":23516184,"reputation":337,"user_id":17564051,"display_name":"Oxana Grey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683278531,"creation_date":1683278531,"question_id":76180674,"body_markdown":"I&#39;ve a two data sets, `A and B` and both are having same one column, named as `status`. Its a hypothetical situation to understand to have evenly split of data among partitions.\r\n\r\nIn both tables, `A and B`, values can `true or false`, 90% of data is as `true` in both tables, and data size we can thing of something which could create this skewness issue.\r\n\r\n    status\r\n    true\r\n    true\r\n    false\r\n    .\r\n    .\r\n\r\nTable B\r\n\r\n    status\r\n    true\r\n    true\r\n    .\r\n    .\r\n\r\n\r\nWhen I left join on status, it will not distribute data evenly, what salt technique I can add in this to have even distribute of data ?\r\n\r\n","title":"How data skew can be handled?","body":"<p>I've a two data sets, <code>A and B</code> and both are having same one column, named as <code>status</code>. Its a hypothetical situation to understand to have evenly split of data among partitions.</p>\n<p>In both tables, <code>A and B</code>, values can <code>true or false</code>, 90% of data is as <code>true</code> in both tables, and data size we can thing of something which could create this skewness issue.</p>\n<pre><code>status\ntrue\ntrue\nfalse\n.\n.\n</code></pre>\n<p>Table B</p>\n<pre><code>status\ntrue\ntrue\n.\n.\n</code></pre>\n<p>When I left join on status, it will not distribute data evenly, what salt technique I can add in this to have even distribute of data ?</p>\n"},{"tags":["java","spring","spring-boot","events"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1683285697,"post_id":76180410,"comment_id":134346972,"body_markdown":"Regarding 1. you are not calling API functions, you are publishing events. If there are multiple handlers/listeners for the event, all of them will be called.","body":"Regarding 1. you are not calling API functions, you are publishing events. If there are multiple handlers/listeners for the event, all of them will be called."}],"answers":[{"tags":[],"owner":{"account_id":7630732,"reputation":1728,"user_id":5785871,"accept_rate":80,"display_name":"mslowiak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683278529,"creation_date":1683278529,"answer_id":76180673,"question_id":76180410,"body_markdown":"Regarding 1.\r\nDo you want to make two concurrent API requests?\r\nIn this case, to ensure that the hotel will be booked only once, you should look at optimistic/pessimistic locking.\r\n\r\nRegarding 2.\r\nIt really depends what do the logic that will emit nested event.\r\nFor sure you can take a look at the [outbox pattern][1] if you want to ensure that operation will be transactional and eventually consistent\r\n\r\n\r\n  [1]: https://microservices.io/patterns/data/transactional-outbox.html","title":"What if I want to pass same object in different events in Spring Boot","body":"<p>Regarding 1.\nDo you want to make two concurrent API requests?\nIn this case, to ensure that the hotel will be booked only once, you should look at optimistic/pessimistic locking.</p>\n<p>Regarding 2.\nIt really depends what do the logic that will emit nested event.\nFor sure you can take a look at the <a href=\"https://microservices.io/patterns/data/transactional-outbox.html\" rel=\"nofollow noreferrer\">outbox pattern</a> if you want to ensure that operation will be transactional and eventually consistent</p>\n"}],"owner":{"account_id":10146514,"reputation":518,"user_id":7494517,"display_name":"YMG"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683278529,"creation_date":1683276617,"question_id":76180410,"body_markdown":"I am working on event driven things and Spring Boot Application Events. I have 2 questions about it.\r\n\r\nSo I created some basic classes such as (basic hotel reservation app)\r\n\r\nModel Class\r\n\r\n    public class HotelBookRequest {\r\n      private String userID;\r\n      private String hotelID;\r\n\r\n\r\n      public String getUserID() {\r\n          return userID;\r\n      }\r\n\r\n      public void setUserID(String userID) {\r\n         this.userID = userID;\r\n      }\r\n\r\n      public String getHotelID() {\r\n          return hotelID;\r\n      }\r\n\r\n      public void setHotelID(String hotelID) {\r\n          this.hotelID = hotelID;\r\n      }\r\n\r\n      @Override\r\n      public String toString() {\r\n          return &quot;HotelBookRequest{&quot; +\r\n                &quot;userID=&#39;&quot; + userID + &#39;\\&#39;&#39; +\r\n                &quot;, hotelID=&#39;&quot; + hotelID + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n\r\n\r\nAPI\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/book&quot;)\r\n    public class BookingApi {\r\n        @Autowired\r\n        ReservationService reservationService;\r\n        @PostMapping\r\n        public void bookHotel(@RequestBody HotelBookRequest hotelBookRequest){\r\n            System.out.println(&quot;Request Processing...&quot;);\r\n            reservationService.publishReservationEvent(hotelBookRequest);\r\n            reservationService.publishMsgEvent(hotelBookRequest);\r\n        }\r\n    \r\n    \r\n    }\r\n\r\n\r\nService\r\n\r\n    @Service\r\n    public class ReservationService {\r\n        @Autowired\r\n        private ApplicationEventPublisher applicationEventPublisher;\r\n    \r\n        public void publishReservationEvent(HotelBookRequest hotelBookRequest){\r\n            applicationEventPublisher.publishEvent(hotelBookRequest);\r\n        }\r\n    \r\n        public void publishMsgEvent(HotelBookRequest hotelBookRequest){\r\n            applicationEventPublisher.publishEvent(hotelBookRequest);\r\n        }\r\n    \r\n    }\r\n\r\n\r\nand Event Listener\r\n\r\n    @Component\r\n    public class ReservationEventListener {\r\n    \r\n        @Autowired\r\n        ReservationService service;\r\n    \r\n        @Async\r\n        @EventListener\r\n        public void reservationEventHandler(HotelBookRequest hotelBookRequest) throws InterruptedException {\r\n            System.out.println(&quot;1st Event&quot;);\r\n        }\r\n        @Async\r\n        @EventListener\r\n        public void msgEventHandler(HotelBookRequest hotelBookRequest){\r\n            System.out.println(&quot;2nd Event&quot;);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\nSo, as you see, I have 2 events in Service class and 2 event listeners in Event Listener class.\r\nIf I give HotelBookRequest object to the one of Service functions, it calls 2 event listeners. I mean, if I call `reservationService.publishReservationEvent(hotelBookRequest);` it triggers 2 event listeners and gives me output such as \r\n\r\n    1st Event\r\n    2nd Event\r\nand if I call `reservationService.publishMsgEvent(hotelBookRequest);` it gives me also same output. I can understand why it behaves like that. \r\n\r\n 1. But, my main question is, what if I want to call api functions with\r\n    the exactly same object without duplicate outputs? What is the logic\r\n    about it? \r\n    \r\n 2. 2nd question is,  What should I do when I want to trigger an\r\n    event from another event? Does it create a dependency on it? What is the most efficient way to trigger nested events?","title":"What if I want to pass same object in different events in Spring Boot","body":"<p>I am working on event driven things and Spring Boot Application Events. I have 2 questions about it.</p>\n<p>So I created some basic classes such as (basic hotel reservation app)</p>\n<p>Model Class</p>\n<pre><code>public class HotelBookRequest {\n  private String userID;\n  private String hotelID;\n\n\n  public String getUserID() {\n      return userID;\n  }\n\n  public void setUserID(String userID) {\n     this.userID = userID;\n  }\n\n  public String getHotelID() {\n      return hotelID;\n  }\n\n  public void setHotelID(String hotelID) {\n      this.hotelID = hotelID;\n  }\n\n  @Override\n  public String toString() {\n      return &quot;HotelBookRequest{&quot; +\n            &quot;userID='&quot; + userID + '\\'' +\n            &quot;, hotelID='&quot; + hotelID + '\\'' +\n            '}';\n}\n</code></pre>\n<p>API</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/book&quot;)\npublic class BookingApi {\n    @Autowired\n    ReservationService reservationService;\n    @PostMapping\n    public void bookHotel(@RequestBody HotelBookRequest hotelBookRequest){\n        System.out.println(&quot;Request Processing...&quot;);\n        reservationService.publishReservationEvent(hotelBookRequest);\n        reservationService.publishMsgEvent(hotelBookRequest);\n    }\n\n\n}\n</code></pre>\n<p>Service</p>\n<pre><code>@Service\npublic class ReservationService {\n    @Autowired\n    private ApplicationEventPublisher applicationEventPublisher;\n\n    public void publishReservationEvent(HotelBookRequest hotelBookRequest){\n        applicationEventPublisher.publishEvent(hotelBookRequest);\n    }\n\n    public void publishMsgEvent(HotelBookRequest hotelBookRequest){\n        applicationEventPublisher.publishEvent(hotelBookRequest);\n    }\n\n}\n</code></pre>\n<p>and Event Listener</p>\n<pre><code>@Component\npublic class ReservationEventListener {\n\n    @Autowired\n    ReservationService service;\n\n    @Async\n    @EventListener\n    public void reservationEventHandler(HotelBookRequest hotelBookRequest) throws InterruptedException {\n        System.out.println(&quot;1st Event&quot;);\n    }\n    @Async\n    @EventListener\n    public void msgEventHandler(HotelBookRequest hotelBookRequest){\n        System.out.println(&quot;2nd Event&quot;);\n    }\n\n}\n</code></pre>\n<p>So, as you see, I have 2 events in Service class and 2 event listeners in Event Listener class.\nIf I give HotelBookRequest object to the one of Service functions, it calls 2 event listeners. I mean, if I call <code>reservationService.publishReservationEvent(hotelBookRequest);</code> it triggers 2 event listeners and gives me output such as</p>\n<pre><code>1st Event\n2nd Event\n</code></pre>\n<p>and if I call <code>reservationService.publishMsgEvent(hotelBookRequest);</code> it gives me also same output. I can understand why it behaves like that.</p>\n<ol>\n<li><p>But, my main question is, what if I want to call api functions with\nthe exactly same object without duplicate outputs? What is the logic\nabout it?</p>\n</li>\n<li><p>2nd question is,  What should I do when I want to trigger an\nevent from another event? Does it create a dependency on it? What is the most efficient way to trigger nested events?</p>\n</li>\n</ol>\n"},{"tags":["java","serialization","jackson","lombok","javabuilders"],"comments":[{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":1,"creation_date":1681054032,"post_id":75960430,"comment_id":133993874,"body_markdown":"Your `ChildOne`/`ChildTwo` classes don&#39;t `extend Parent`. Is that a typo? Otherwise it&#39;s obvious why it doesn&#39;t work.","body":"Your <code>ChildOne</code>/<code>ChildTwo</code> classes don&#39;t <code>extend Parent</code>. Is that a typo? Otherwise it&#39;s obvious why it doesn&#39;t work."},{"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"score":0,"creation_date":1681159493,"post_id":75960430,"comment_id":134008821,"body_markdown":"@JanRieke. Thx. It is a typo. Fixed","body":"@JanRieke. Thx. It is a typo. Fixed"},{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":1,"creation_date":1681287378,"post_id":75960430,"comment_id":134030554,"body_markdown":"That works for me, all attributes from child and parent are serialized. Please add more code so we can see exactly how you create the instance and serialize it.","body":"That works for me, all attributes from child and parent are serialized. Please add more code so we can see exactly how you create the instance and serialize it."},{"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"score":0,"creation_date":1681791215,"post_id":75960430,"comment_id":134109855,"body_markdown":"@JanRieke Thank you for checking. I also tested. Looks like when printing the individual Child object, it will show the attributes from parent class. But when printing the child in a map, it doesn&#39;t show any attribute from parent class. Update the description.","body":"@JanRieke Thank you for checking. I also tested. Looks like when printing the individual Child object, it will show the attributes from parent class. But when printing the child in a map, it doesn&#39;t show any attribute from parent class. Update the description."},{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":0,"creation_date":1682596611,"post_id":75960430,"comment_id":134242669,"body_markdown":"Your updated code does not compile, and it&#39;s also not clear what you mean by &quot;when printing the child in a map&quot;. Please add exactly the code that causes the problem.","body":"Your updated code does not compile, and it&#39;s also not clear what you mean by &quot;when printing the child in a map&quot;. Please add exactly the code that causes the problem."},{"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"score":0,"creation_date":1682981539,"post_id":75960430,"comment_id":134294481,"body_markdown":"@JanRieke Thx for checking. My apology. Update the code. I was trying to say that when writeValueAsString() each Child Object in a Child Object List,  it does show all the attribute for each class. But when writeValueAsString() the whole Map. The ChildTwo object doesn&#39;t have any attribute. Hope I explained my problem clearly this time","body":"@JanRieke Thx for checking. My apology. Update the code. I was trying to say that when writeValueAsString() each Child Object in a Child Object List,  it does show all the attribute for each class. But when writeValueAsString() the whole Map. The ChildTwo object doesn&#39;t have any attribute. Hope I explained my problem clearly this time"}],"answers":[{"tags":[],"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683278469,"creation_date":1683278469,"answer_id":76180664,"question_id":75960430,"body_markdown":"This behavior has nothing to do with Lombok, `@SuperBuilder`, or `@Jacksonized`.\r\nJackson simply serializes map keys using the `toString()` method, because keys in JSON cannot be structured, but must be plain strings.\r\n\r\nIf you use your POJOs as map values, everything works as expected (and would also work without `@SuperBuilder`).\r\n\r\n`@Jacksonized` wouldn&#39;t have an effect anyway, because it only affects the deserialization, not the serialization.","title":"Serialize abstract class with SuperBuilder using Jackson","body":"<p>This behavior has nothing to do with Lombok, <code>@SuperBuilder</code>, or <code>@Jacksonized</code>.\nJackson simply serializes map keys using the <code>toString()</code> method, because keys in JSON cannot be structured, but must be plain strings.</p>\n<p>If you use your POJOs as map values, everything works as expected (and would also work without <code>@SuperBuilder</code>).</p>\n<p><code>@Jacksonized</code> wouldn't have an effect anyway, because it only affects the deserialization, not the serialization.</p>\n"}],"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":228,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683278469,"creation_date":1680886291,"question_id":75960430,"body_markdown":"I have following classes:\r\n\r\n````\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Data\r\n@SuperBuilder\r\npublic abstract class Parent {\r\n    private String parentA;\r\n    private String parentB;\r\n}\r\n````\r\n\r\n````\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@EqualsAndHashCode(callSuper = true)\r\n@SuperBuilder\r\npublic class ChildOne extends Parent{\r\n    private String childOneA;\r\n    private String childOneB;\r\n}\r\n````\r\n````\r\n@Data\r\n@NoArgsConstructor\r\n@EqualsAndHashCode(callSuper = true)\r\n@SuperBuilder\r\npublic class ChildTwo extends Parent{\r\n}\r\n````\r\n\r\n````\r\nMap&lt;Parent, List&lt;String&gt;&gt; parent2Strs = new HashMap&lt;&gt;();\r\nparent2Strs.put(ChildTwo.builder().parentA(&quot;A&quot;).parentB(&quot;B&quot;).build(), List.of(&quot;1&quot;, &quot;2&quot;));\r\nparent2Strs.put(ChildTwo.builder().parentA(&quot;C&quot;).parentB(&quot;D&quot;).build(), List.of(&quot;1&quot;));\r\n````\r\n\r\nWhen I call writeValueAsString() method on the parent2Str class, it doesn&#39;t print any attribute in parent class.\r\n\r\nI tried to use @Jacksonized on the abstract class. But received error: \r\n&gt; error: Builders on abstract classes cannot be @Jacksonized (the builder would never be used).\r\n\r\nHow can I include the fields in Parent class when serialize the child class?","title":"Serialize abstract class with SuperBuilder using Jackson","body":"<p>I have following classes:</p>\n<pre><code>@NoArgsConstructor\n@AllArgsConstructor\n@Data\n@SuperBuilder\npublic abstract class Parent {\n    private String parentA;\n    private String parentB;\n}\n</code></pre>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@EqualsAndHashCode(callSuper = true)\n@SuperBuilder\npublic class ChildOne extends Parent{\n    private String childOneA;\n    private String childOneB;\n}\n</code></pre>\n<pre><code>@Data\n@NoArgsConstructor\n@EqualsAndHashCode(callSuper = true)\n@SuperBuilder\npublic class ChildTwo extends Parent{\n}\n</code></pre>\n<pre><code>Map&lt;Parent, List&lt;String&gt;&gt; parent2Strs = new HashMap&lt;&gt;();\nparent2Strs.put(ChildTwo.builder().parentA(&quot;A&quot;).parentB(&quot;B&quot;).build(), List.of(&quot;1&quot;, &quot;2&quot;));\nparent2Strs.put(ChildTwo.builder().parentA(&quot;C&quot;).parentB(&quot;D&quot;).build(), List.of(&quot;1&quot;));\n</code></pre>\n<p>When I call writeValueAsString() method on the parent2Str class, it doesn't print any attribute in parent class.</p>\n<p>I tried to use @Jacksonized on the abstract class. But received error:</p>\n<blockquote>\n<p>error: Builders on abstract classes cannot be @Jacksonized (the builder would never be used).</p>\n</blockquote>\n<p>How can I include the fields in Parent class when serialize the child class?</p>\n"},{"tags":["java","segmentation-fault","crash","jvm"],"comments":[{"owner":{"account_id":17045045,"reputation":33,"user_id":12332082,"display_name":"kingofworms"},"score":1,"creation_date":1683211256,"post_id":76174098,"comment_id":134334796,"body_markdown":"@andrewJames: sadly, the crash only happens when the whole application is running. When I call the relevant methods in an endless loop via a separate test application, the crash never happens.","body":"@andrewJames: sadly, the crash only happens when the whole application is running. When I call the relevant methods in an endless loop via a separate test application, the crash never happens."},{"owner":{"account_id":17045045,"reputation":33,"user_id":12332082,"display_name":"kingofworms"},"score":1,"creation_date":1683211374,"post_id":76174098,"comment_id":134334823,"body_markdown":"@andrewJames: we went back to OpenJDK 11.0.18 and everything works as expected. Anyway, it would be great to understand how a HLT can trigger a segmentation fault.","body":"@andrewJames: we went back to OpenJDK 11.0.18 and everything works as expected. Anyway, it would be great to understand how a HLT can trigger a segmentation fault."},{"owner":{"account_id":17725864,"reputation":399,"user_id":12869601,"display_name":"rsc"},"score":1,"creation_date":1683618930,"post_id":76174098,"comment_id":134390144,"body_markdown":"I see the same issue here on Rocky Linux 8 (which is a RHEL 8 clone): Crash with java-11-openjdk-headless-11.0.19.0.7-1.el8_7.x86_64, works with java-11-openjdk-headless-11.0.18.0.10-2.el8_7.x86_64 (the package version directly before the update). The issue must have been introduced with this [git commit](https://git.centos.org/rpms/java-11-openjdk/c/1f3d944bf7293313162fbf89e7d256b91aa106a6?branch=c8).","body":"I see the same issue here on Rocky Linux 8 (which is a RHEL 8 clone): Crash with java-11-openjdk-headless-11.0.19.0.7-1.el8_7.x86_64, works with java-11-openjdk-headless-11.0.18.0.10-2.el8_7.x86_64 (the package version directly before the update). The issue must have been introduced with this <a href=\"https://git.centos.org/rpms/java-11-openjdk/c/1f3d944bf7293313162fbf89e7d256b91aa106a6?branch=c8\" rel=\"nofollow noreferrer\">git commit</a>."},{"owner":{"account_id":3949403,"reputation":1141,"user_id":3260495,"display_name":"Robert Hume"},"score":0,"creation_date":1684564661,"post_id":76174098,"comment_id":134538398,"body_markdown":"OpenJDK issue: https://bugs.openjdk.org/browse/JDK-8307978","body":"OpenJDK issue: <a href=\"https://bugs.openjdk.org/browse/JDK-8307978\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8307978</a>"}],"answers":[{"tags":[],"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683241054,"creation_date":1683241054,"answer_id":76177865,"question_id":76174098,"body_markdown":"`HLT` is a privileged instruction. When executed in user mode, it triggers general protection fault. In Linux, this results in `SIGSEGV` being sent to the offending process.\r\n\r\nHotSpot JVM emits `HLT` instruction in the dynamically generated code only in situations never supposed to happen. So there is apparently a JVM bug. Rerun the JVM with `-XX:+ShowMessageBoxOnError` to get more information on the particular assertion failure.","title":"JVM SIGSEGV crash on HLT instruction?","body":"<p><code>HLT</code> is a privileged instruction. When executed in user mode, it triggers general protection fault. In Linux, this results in <code>SIGSEGV</code> being sent to the offending process.</p>\n<p>HotSpot JVM emits <code>HLT</code> instruction in the dynamically generated code only in situations never supposed to happen. So there is apparently a JVM bug. Rerun the JVM with <code>-XX:+ShowMessageBoxOnError</code> to get more information on the particular assertion failure.</p>\n"}],"owner":{"account_id":17045045,"reputation":33,"user_id":12332082,"display_name":"kingofworms"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":524,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76177865,"answer_count":1,"score":3,"last_activity_date":1683278339,"creation_date":1683209106,"question_id":76174098,"body_markdown":"There seems to be a bug in OpenJDK 11.0.19 which sometimes leads to a crash in java.util.GregorianCalendar.computeTime().\r\n\r\n**Final Update**: thanks to @apangin, I found out that Linux sends a SIGSEGV instead of SIGILL (which I was expecting). See last line of function http://elixir.free-electrons.com/linux/v4.9/source/arch/x86/kernel/traps.c#L487\r\n\r\n**Update**: after going back to OpenJDK 11.0.18 the issue disappeared. Anyway, I would like to understand how a HLT instruction can lead to a segmentation fault. \r\n\r\nRed Hat Enterprise Linux release 8.7 (Ootpa) 4.18.0-425.19.2.el8_7.x86_64\r\n\r\n```\r\n# JRE version: OpenJDK Runtime Environment (Red_Hat-11.0.19.0.7-1.el8_7) (11.0.19+7) (build 11.0.19+7-LTS)\r\n# Java VM: OpenJDK 64-Bit Server VM (Red_Hat-11.0.19.0.7-1.el8_7) (11.0.19+7-LTS, mixed mode, sharing, tiered, compressed oops, g1 gc, linux-amd64)\r\n# Problematic frame:\r\n# J 7581 c2 java.util.GregorianCalendar.computeTime()V java.base@11.0.19 (970 bytes) @ 0x00007ff72826feeb [0x00007ff72826f440+0x0000000000000aab]\r\n```\r\n\r\n```\r\nStack: [0x00007ff73ec47000,0x00007ff73ed48000],  sp=0x00007ff73ed44ad0,  free space=1014k\r\nNative frames: (J=compiled Java code, A=aot compiled Java code, j=interpreted, Vv=VM code, C=native code)\r\nJ 7581 c2 java.util.GregorianCalendar.computeTime()V java.base@11.0.19 (970 bytes) @ 0x00007ff72826feeb [0x00007ff72826f440+0x0000000000000aab]\r\n```\r\n\r\n```\r\nsiginfo: si_signo: 11 (SIGSEGV), si_code: 128 (SI_KERNEL), si_addr: 0x0000000000000000\r\n```\r\n\r\n```\r\nRegisters:\r\nRAX=0x0000000000000000, RBX=0x00000000e5b5f858, RCX=0x0000000000000000, RDX=0x0000000000000000\r\nRSP=0x00007ff73ed44ad0, RBP=0x0000000000000000, RSI=0x00007ff73ed441d1, RDI=0x00007ff738023820\r\nR8 =0x0000000000000000, R9 =0x00007ff73ed44150, R10=0x00000000000007cf, R11=0x0000000000000000\r\nR12=0x0000000000000000, R13=0x0000000000001896, R14=0x00007ff6cda239e0, R15=0x00007ff738028800\r\nRIP=0x00007ff72826feeb, EFLAGS=0x0000000000010246, CSGSFS=0x002b000000000033, ERR=0x0000000000000000\r\n  TRAPNO=0x000000000000000d\r\n```\r\n\r\n```\r\nInstructions: (pc=0x00007ff72826feeb)\r\n...\r\n0x00007ff72826febb:   08 4c 8b 6c 24 18 4c 8b c0 e9 a1 f7 ff ff be 7e\r\n0x00007ff72826fecb:   ff ff ff 48 8b 6c 24 08 e8 28 1f 1a f8 48 bf 98\r\n0x00007ff72826fedb:   4b bd 3d f7 7f 00 00 48 83 e4 f0 e8 25 e0 48 15\r\n0x00007ff72826feeb:   f4 be f4 ff ff ff 48 89 1c 24 48 89 44 24 f8 8b\r\n0x00007ff72826fefb:   44 24 10 89 44 24 08 48 8b 44 24 f8 4c 89 6c 24\r\n0x00007ff72826ff0b:   10 66 66 90 e8 ec 1e 1a f8 be e4 ff ff ff 48 8b\r\n0x00007ff72826ff1b:   6c 24 08 44 89 54 24 04 e8 d8 1e 1a f8 be e4 ff\r\n0x00007ff72826ff2b:   ff ff 49 8b eb 89 5c 24 04 66 66 90 e8 c4 1e 1a\r\n...\r\n```\r\n\r\nPC/RIP points to an address which contains a HLT instruction (0xF4):\r\n\r\n```\r\ne8 28 1f 1a f8          call   0xfffffffff81a1f45\r\n48 bf 98 4b bd 3d f7    movabs rdi,0x7ff73dbd4b98\r\n7f 00 00\r\n48 83 e4 f0             and    rsp,0xfffffffffffffff0\r\ne8 25 e0 48 15          call   0x1548e055\r\nf4                      hlt\r\nbe f4 ff ff ff          mov    esi,0xfffffff4\r\n48 89 1c 24             mov    QWORD PTR [rsp],rbx\r\n48 89 44 24 f8          mov    QWORD PTR [rsp-0x8],rax\r\n```\r\n\r\nHow can a HLT instruction trigger a segmentation violation?\r\n\r\nI spent the last few hours searching for something similar but could not find anything.","title":"JVM SIGSEGV crash on HLT instruction?","body":"<p>There seems to be a bug in OpenJDK 11.0.19 which sometimes leads to a crash in java.util.GregorianCalendar.computeTime().</p>\n<p><strong>Final Update</strong>: thanks to @apangin, I found out that Linux sends a SIGSEGV instead of SIGILL (which I was expecting). See last line of function <a href=\"http://elixir.free-electrons.com/linux/v4.9/source/arch/x86/kernel/traps.c#L487\" rel=\"nofollow noreferrer\">http://elixir.free-electrons.com/linux/v4.9/source/arch/x86/kernel/traps.c#L487</a></p>\n<p><strong>Update</strong>: after going back to OpenJDK 11.0.18 the issue disappeared. Anyway, I would like to understand how a HLT instruction can lead to a segmentation fault.</p>\n<p>Red Hat Enterprise Linux release 8.7 (Ootpa) 4.18.0-425.19.2.el8_7.x86_64</p>\n<pre><code># JRE version: OpenJDK Runtime Environment (Red_Hat-11.0.19.0.7-1.el8_7) (11.0.19+7) (build 11.0.19+7-LTS)\n# Java VM: OpenJDK 64-Bit Server VM (Red_Hat-11.0.19.0.7-1.el8_7) (11.0.19+7-LTS, mixed mode, sharing, tiered, compressed oops, g1 gc, linux-amd64)\n# Problematic frame:\n# J 7581 c2 java.util.GregorianCalendar.computeTime()V java.base@11.0.19 (970 bytes) @ 0x00007ff72826feeb [0x00007ff72826f440+0x0000000000000aab]\n</code></pre>\n<pre><code>Stack: [0x00007ff73ec47000,0x00007ff73ed48000],  sp=0x00007ff73ed44ad0,  free space=1014k\nNative frames: (J=compiled Java code, A=aot compiled Java code, j=interpreted, Vv=VM code, C=native code)\nJ 7581 c2 java.util.GregorianCalendar.computeTime()V java.base@11.0.19 (970 bytes) @ 0x00007ff72826feeb [0x00007ff72826f440+0x0000000000000aab]\n</code></pre>\n<pre><code>siginfo: si_signo: 11 (SIGSEGV), si_code: 128 (SI_KERNEL), si_addr: 0x0000000000000000\n</code></pre>\n<pre><code>Registers:\nRAX=0x0000000000000000, RBX=0x00000000e5b5f858, RCX=0x0000000000000000, RDX=0x0000000000000000\nRSP=0x00007ff73ed44ad0, RBP=0x0000000000000000, RSI=0x00007ff73ed441d1, RDI=0x00007ff738023820\nR8 =0x0000000000000000, R9 =0x00007ff73ed44150, R10=0x00000000000007cf, R11=0x0000000000000000\nR12=0x0000000000000000, R13=0x0000000000001896, R14=0x00007ff6cda239e0, R15=0x00007ff738028800\nRIP=0x00007ff72826feeb, EFLAGS=0x0000000000010246, CSGSFS=0x002b000000000033, ERR=0x0000000000000000\n  TRAPNO=0x000000000000000d\n</code></pre>\n<pre><code>Instructions: (pc=0x00007ff72826feeb)\n...\n0x00007ff72826febb:   08 4c 8b 6c 24 18 4c 8b c0 e9 a1 f7 ff ff be 7e\n0x00007ff72826fecb:   ff ff ff 48 8b 6c 24 08 e8 28 1f 1a f8 48 bf 98\n0x00007ff72826fedb:   4b bd 3d f7 7f 00 00 48 83 e4 f0 e8 25 e0 48 15\n0x00007ff72826feeb:   f4 be f4 ff ff ff 48 89 1c 24 48 89 44 24 f8 8b\n0x00007ff72826fefb:   44 24 10 89 44 24 08 48 8b 44 24 f8 4c 89 6c 24\n0x00007ff72826ff0b:   10 66 66 90 e8 ec 1e 1a f8 be e4 ff ff ff 48 8b\n0x00007ff72826ff1b:   6c 24 08 44 89 54 24 04 e8 d8 1e 1a f8 be e4 ff\n0x00007ff72826ff2b:   ff ff 49 8b eb 89 5c 24 04 66 66 90 e8 c4 1e 1a\n...\n</code></pre>\n<p>PC/RIP points to an address which contains a HLT instruction (0xF4):</p>\n<pre><code>e8 28 1f 1a f8          call   0xfffffffff81a1f45\n48 bf 98 4b bd 3d f7    movabs rdi,0x7ff73dbd4b98\n7f 00 00\n48 83 e4 f0             and    rsp,0xfffffffffffffff0\ne8 25 e0 48 15          call   0x1548e055\nf4                      hlt\nbe f4 ff ff ff          mov    esi,0xfffffff4\n48 89 1c 24             mov    QWORD PTR [rsp],rbx\n48 89 44 24 f8          mov    QWORD PTR [rsp-0x8],rax\n</code></pre>\n<p>How can a HLT instruction trigger a segmentation violation?</p>\n<p>I spent the last few hours searching for something similar but could not find anything.</p>\n"},{"tags":["java","spring","rabbitmq","amqp","r2dbc"],"owner":{"account_id":4899977,"reputation":35,"user_id":3948622,"display_name":"kevin guirado"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683278285,"creation_date":1683278285,"question_id":76180635,"body_markdown":"I&#39;m using Spring R2DBC and Spring AMQP (RabbitMQ). \r\nI&#39;m trying to call some Mono @Transactionnal methods that modify the database when receiving a message from RabbitMQ but it seems that I&#39;m not in context know the R2DBC connection :\r\n\r\n```\r\n2023-05-05 11:06:56.509 ERROR 72872 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] reactor.core.publisher.Operators:error l.324 : Operator called default onErrorDropped\r\n\r\nreactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.IllegalStateException: No ConnectionHolder available\r\nCaused by: java.lang.IllegalStateException: No ConnectionHolder available\r\n\tat org.springframework.util.Assert.state(Assert.java:76) ~[spring-core-6.0.7.jar:6.0.7]\r\n\tat org.springframework.r2dbc.connection.R2dbcTransactionManager$ConnectionFactoryTransactionObject.getConnectionHolder(R2dbcTransactionManager.java:554) ~[spring-r2dbc-6.0.7.jar:6.0.7]\r\n```\r\n\r\nMy code is the following :\r\n\r\n```\r\n    @RabbitListener(queues = MessagesListenerConfiguration.USER_DELETED_QUEUE_NAME)\r\n    public void onUserDeleted(final Integer userId) {\r\n        Mono.when(\r\n                        vendorService.onUserDeleted(userId),\r\n                        customerService.onUserDeleted(userId)\r\n                )\r\n                .subscribe();\r\n   \r\n```\r\n\r\nHow to switch from the rabbitmq listener context to the r2dbc context as it is done when receiving request API on a WebFlux Controller ?","title":"Spring AMQP with R2DBC","body":"<p>I'm using Spring R2DBC and Spring AMQP (RabbitMQ).\nI'm trying to call some Mono @Transactionnal methods that modify the database when receiving a message from RabbitMQ but it seems that I'm not in context know the R2DBC connection :</p>\n<pre><code>2023-05-05 11:06:56.509 ERROR 72872 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] reactor.core.publisher.Operators:error l.324 : Operator called default onErrorDropped\n\nreactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.IllegalStateException: No ConnectionHolder available\nCaused by: java.lang.IllegalStateException: No ConnectionHolder available\n    at org.springframework.util.Assert.state(Assert.java:76) ~[spring-core-6.0.7.jar:6.0.7]\n    at org.springframework.r2dbc.connection.R2dbcTransactionManager$ConnectionFactoryTransactionObject.getConnectionHolder(R2dbcTransactionManager.java:554) ~[spring-r2dbc-6.0.7.jar:6.0.7]\n</code></pre>\n<p>My code is the following :</p>\n<pre><code>    @RabbitListener(queues = MessagesListenerConfiguration.USER_DELETED_QUEUE_NAME)\n    public void onUserDeleted(final Integer userId) {\n        Mono.when(\n                        vendorService.onUserDeleted(userId),\n                        customerService.onUserDeleted(userId)\n                )\n                .subscribe();\n   \n</code></pre>\n<p>How to switch from the rabbitmq listener context to the r2dbc context as it is done when receiving request API on a WebFlux Controller ?</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1683234802,"post_id":76175710,"comment_id":134340004,"body_markdown":"Can you edit your question to show the JSON data at `/users/$uid/rooms` in your database (as text, no screenshots please). You can get this by clicking the &quot;Export JSON&quot; link in the overflow menu (⠇) on your [Firebase Database console](https://console.firebase.google.com/project/_/database/data).","body":"Can you edit your question to show the JSON data at <code>&#47;users&#47;$uid&#47;rooms</code> in your database (as text, no screenshots please). You can get this by clicking the &quot;Export JSON&quot; link in the overflow menu (⠇) on your <a href=\"https://console.firebase.google.com/project/_/database/data\" rel=\"nofollow noreferrer\">Firebase Database console</a>."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1683262160,"post_id":76175710,"comment_id":134342861,"body_markdown":"Please edit your question and add the information Frank asked for, and please also respond using @.","body":"Please edit your question and add the information Frank asked for, and please also respond using @."}],"answers":[{"tags":[],"owner":{"account_id":23739021,"reputation":85,"user_id":17757329,"display_name":"Someone"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683278129,"creation_date":1683278129,"answer_id":76180619,"question_id":76175710,"body_markdown":"Well after hours of debugging, I figured it must be related to the fact that I do calls to this function one right after the other, so the array didn&#39;t have the time to update in the database. I wrote this, I know it&#39;s not ideal at all but it works...\r\n\r\nhere is the updated function:\r\n\r\n        public void addDevice(Device device, int room_idx){\r\n        this.devices.add(device);\r\n\r\n        Thread addDevice = new Thread(new Runnable() {\r\n            @Override\r\n            public synchronized void run() {\r\n                // Path: &quot; + room_idx + &quot;/devices&quot;\r\n                final boolean[] roomExistsInIdx = {false};\r\n                while (!roomExistsInIdx[0]){\r\n                    DatabaseReference dbRef = FirebaseDatabase.getInstance().getReference(&quot;users/&quot; + FirebaseAuth.getInstance().getUid()).child(&quot;rooms&quot;);\r\n                    dbRef.addValueEventListener(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                            ArrayList&lt;Object&gt; rooms = (ArrayList&lt;Object&gt;)snapshot.getValue();\r\n                            int size;\r\n                            if(rooms == null){\r\n                                size = 0;\r\n                            }\r\n                            else{\r\n                                size = rooms.size();\r\n                            }\r\n                            if (size - 1 &gt;= room_idx){\r\n                                if (device.getType() == Device.TYPES.AIR_CONDITIONER){\r\n                                    dbRef.child(room_idx + &quot;/devices/&quot; + device.getName()).setValue((AirConditioner)device);\r\n                                }\r\n                                else if(device.getType() == Device.TYPES.LIGHTS){\r\n\r\n                                }\r\n                                else if (device.getType() == Device.TYPES.TV){\r\n\r\n                                }\r\n                                roomExistsInIdx[0] = true;\r\n                                dbRef.removeEventListener(this);\r\n                                return;\r\n                            }\r\n                        }\r\n\r\n                        @Override\r\n                        public void onCancelled(@NonNull DatabaseError error) {\r\n                            Log.d(&quot;cancel&quot;, &quot;cancel&quot;);\r\n                            return;\r\n                        }\r\n                    });\r\n\r\n                    try {\r\n                        Thread.sleep(1000);\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n            }\r\n        });\r\n        addDevice.start();\r\n    }","title":"firebase android studio, firebase database subarray manipulation","body":"<p>Well after hours of debugging, I figured it must be related to the fact that I do calls to this function one right after the other, so the array didn't have the time to update in the database. I wrote this, I know it's not ideal at all but it works...</p>\n<p>here is the updated function:</p>\n<pre><code>    public void addDevice(Device device, int room_idx){\n    this.devices.add(device);\n\n    Thread addDevice = new Thread(new Runnable() {\n        @Override\n        public synchronized void run() {\n            // Path: &quot; + room_idx + &quot;/devices&quot;\n            final boolean[] roomExistsInIdx = {false};\n            while (!roomExistsInIdx[0]){\n                DatabaseReference dbRef = FirebaseDatabase.getInstance().getReference(&quot;users/&quot; + FirebaseAuth.getInstance().getUid()).child(&quot;rooms&quot;);\n                dbRef.addValueEventListener(new ValueEventListener() {\n                    @Override\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\n                        ArrayList&lt;Object&gt; rooms = (ArrayList&lt;Object&gt;)snapshot.getValue();\n                        int size;\n                        if(rooms == null){\n                            size = 0;\n                        }\n                        else{\n                            size = rooms.size();\n                        }\n                        if (size - 1 &gt;= room_idx){\n                            if (device.getType() == Device.TYPES.AIR_CONDITIONER){\n                                dbRef.child(room_idx + &quot;/devices/&quot; + device.getName()).setValue((AirConditioner)device);\n                            }\n                            else if(device.getType() == Device.TYPES.LIGHTS){\n\n                            }\n                            else if (device.getType() == Device.TYPES.TV){\n\n                            }\n                            roomExistsInIdx[0] = true;\n                            dbRef.removeEventListener(this);\n                            return;\n                        }\n                    }\n\n                    @Override\n                    public void onCancelled(@NonNull DatabaseError error) {\n                        Log.d(&quot;cancel&quot;, &quot;cancel&quot;);\n                        return;\n                    }\n                });\n\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n\n        }\n    });\n    addDevice.start();\n}\n</code></pre>\n"}],"owner":{"account_id":23739021,"reputation":85,"user_id":17757329,"display_name":"Someone"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683278129,"creation_date":1683220033,"question_id":76175710,"body_markdown":"I have a function that is supposed to add a Room (custom object) to my database:\r\nIt&#39;s java - android studio.\r\n``` \r\npublic void addRoom(Room room) {\r\n    this.addRoomToList(room);\r\n    DatabaseReference dbRef = FirebaseDatabase.getInstance().getReference(&quot;/users/&quot; + FirebaseAuth.getInstance().getUid() + &quot;/rooms&quot;);\r\n\r\n    dbRef.addValueEventListener(new ValueEventListener() {\r\n        @Override\r\n        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n            ArrayList&lt;HashMap&lt;String, Object&gt;&gt; data = (ArrayList&lt;HashMap&lt;String, Object&gt;&gt;)dataSnapshot.getValue();\r\n\r\n            if (data == null){\r\n                data = new ArrayList&lt;&gt;();\r\n            }\r\n\r\n            data.add(room.getHashMapFromRoom());\r\n            // Save the updated subarray to Firebase\r\n            dbRef.setValue(data);\r\n\r\n            dbRef.removeEventListener(this);\r\n        }\r\n\r\n        @Override\r\n        public void onCancelled(@NonNull DatabaseError databaseError) {\r\n            Log.w(TAG, &quot;onCancelled&quot;, databaseError.toException());\r\n            dbRef.removeEventListener(this);\r\n        }\r\n    });\r\n}\r\n```\r\n\r\n\r\nThe function takes a room argument, retrieves the current array of rooms adds the new room to the array and the array to the database.\r\nBut, it will not work, the first time it&#39;s okay and will upload and update successfully, but when called a second time it will erase the room (because data is null from the database and it will create a new array).   How do I fix it?\r\n\r\nNote: I also checked the parent of this rooms argument, meaning a higher hierarchy in the database, and I was able to read it and get a hashmap, but the specific array of rooms did not appear there.\r\nAlso, I did check and I have read/write permissions in the rules section in the database.\r\n","title":"firebase android studio, firebase database subarray manipulation","body":"<p>I have a function that is supposed to add a Room (custom object) to my database:\nIt's java - android studio.</p>\n<pre><code>public void addRoom(Room room) {\n    this.addRoomToList(room);\n    DatabaseReference dbRef = FirebaseDatabase.getInstance().getReference(&quot;/users/&quot; + FirebaseAuth.getInstance().getUid() + &quot;/rooms&quot;);\n\n    dbRef.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n            ArrayList&lt;HashMap&lt;String, Object&gt;&gt; data = (ArrayList&lt;HashMap&lt;String, Object&gt;&gt;)dataSnapshot.getValue();\n\n            if (data == null){\n                data = new ArrayList&lt;&gt;();\n            }\n\n            data.add(room.getHashMapFromRoom());\n            // Save the updated subarray to Firebase\n            dbRef.setValue(data);\n\n            dbRef.removeEventListener(this);\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError databaseError) {\n            Log.w(TAG, &quot;onCancelled&quot;, databaseError.toException());\n            dbRef.removeEventListener(this);\n        }\n    });\n}\n</code></pre>\n<p>The function takes a room argument, retrieves the current array of rooms adds the new room to the array and the array to the database.\nBut, it will not work, the first time it's okay and will upload and update successfully, but when called a second time it will erase the room (because data is null from the database and it will create a new array).   How do I fix it?</p>\n<p>Note: I also checked the parent of this rooms argument, meaning a higher hierarchy in the database, and I was able to read it and get a hashmap, but the specific array of rooms did not appear there.\nAlso, I did check and I have read/write permissions in the rules section in the database.</p>\n"},{"tags":["java","database","jdbc","xampp"],"comments":[{"owner":{"account_id":425670,"reputation":2681,"user_id":806407,"accept_rate":78,"display_name":"lakshman"},"score":0,"creation_date":1390728507,"post_id":21361781,"comment_id":32210417,"body_markdown":"did you get an error when you try to connect?","body":"did you get an error when you try to connect?"}],"answers":[{"tags":[],"owner":{"account_id":3866082,"reputation":1825,"user_id":3202612,"accept_rate":75,"display_name":"Happy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390728865,"creation_date":1390728865,"answer_id":21361848,"question_id":21361781,"body_markdown":"Maybe you should define your strings before use them.\r\n\r\nThe host URL seems good. \r\n\r\nYou have to install the driver in your server, or to put it in the `/lib` folder of your project. You fill find it in `%DERBY_HOME%/lib` folder, named `derby.jar`, assuming `%DERBY_HOME%` is the directory installation of Derby.","title":"How to connect to database connection in Java","body":"<p>Maybe you should define your strings before use them.</p>\n\n<p>The host URL seems good. </p>\n\n<p>You have to install the driver in your server, or to put it in the <code>/lib</code> folder of your project. You fill find it in <code>%DERBY_HOME%/lib</code> folder, named <code>derby.jar</code>, assuming <code>%DERBY_HOME%</code> is the directory installation of Derby.</p>\n"},{"tags":[],"owner":{"account_id":2985220,"reputation":5535,"user_id":2534236,"accept_rate":72,"display_name":"Suganthan Madhavan Pillai"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1390731978,"creation_date":1390729950,"answer_id":21362006,"question_id":21361781,"body_markdown":"This is the project structure\r\n\r\n![Project Structure][1]\r\n\r\nTry with this\r\n\r\n**Update**\r\n\r\n        public static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\ttry {\r\n\t\t\tClass.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n\t\t} catch (ClassNotFoundException e) {\r\n\t\t\tSystem.out.println(&quot;Where is your MySQL JDBC Driver?&quot;);\r\n\t\t\te.printStackTrace();\r\n\t\t\treturn;\r\n\t\t}\r\n\t \r\n\t\tSystem.out.println(&quot;MySQL JDBC Driver Registered!&quot;);\r\n\t\tConnection connection = null;\r\n\t \r\n\t\ttry {\r\n\t\t\tconnection = DriverManager\r\n\t\t\t.getConnection(&quot;jdbc:mysql://localhost:3306/testspring&quot;,&quot;root&quot;, &quot;password&quot;);\r\n\t \r\n\t\t} catch (SQLException e) {\r\n\t\t\tSystem.out.println(&quot;Connection Failed! Check output console&quot;);\r\n\t\t\te.printStackTrace();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (connection != null) {\r\n\t\t\tSystem.out.println(&quot;You made it, take control your database now!&quot;);\r\n\t\t} else {\r\n\t\t\tSystem.out.println(&quot;Failed to make connection!&quot;);\r\n\t\t}\r\n\t}\r\n        \r\nIt is working for me\r\n\r\nI downloaded jar from [Java2s.com][2]\r\n\r\n\r\n[Refer][3]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/VjjiD.png\r\n  [2]: http://www.java2s.com/Code/Jar/m/Downloadmysqlconnectorjavajar.htm\r\n  [3]: http://www.mkyong.com/jdbc/how-to-connect-to-mysql-with-jdbc-driver-java/","title":"How to connect to database connection in Java","body":"<p>This is the project structure</p>\n\n<p><img src=\"https://i.stack.imgur.com/VjjiD.png\" alt=\"Project Structure\"></p>\n\n<p>Try with this</p>\n\n<p><strong>Update</strong></p>\n\n<pre><code>    public static void main(String[] args) {\n    // TODO Auto-generated method stub\n    try {\n        Class.forName(\"com.mysql.jdbc.Driver\");\n    } catch (ClassNotFoundException e) {\n        System.out.println(\"Where is your MySQL JDBC Driver?\");\n        e.printStackTrace();\n        return;\n    }\n\n    System.out.println(\"MySQL JDBC Driver Registered!\");\n    Connection connection = null;\n\n    try {\n        connection = DriverManager\n        .getConnection(\"jdbc:mysql://localhost:3306/testspring\",\"root\", \"password\");\n\n    } catch (SQLException e) {\n        System.out.println(\"Connection Failed! Check output console\");\n        e.printStackTrace();\n        return;\n    }\n\n    if (connection != null) {\n        System.out.println(\"You made it, take control your database now!\");\n    } else {\n        System.out.println(\"Failed to make connection!\");\n    }\n}\n</code></pre>\n\n<p>It is working for me</p>\n\n<p>I downloaded jar from <a href=\"http://www.java2s.com/Code/Jar/m/Downloadmysqlconnectorjavajar.htm\" rel=\"noreferrer\">Java2s.com</a></p>\n\n<p><a href=\"http://www.mkyong.com/jdbc/how-to-connect-to-mysql-with-jdbc-driver-java/\" rel=\"noreferrer\">Refer</a></p>\n"},{"tags":[],"owner":{"account_id":903546,"reputation":2804,"user_id":939008,"accept_rate":25,"display_name":"Ashot Karakhanyan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1390734137,"creation_date":1390733716,"answer_id":21362509,"question_id":21361781,"body_markdown":"This is a code (Java 7 style, try-with-resources, more laconic style) to connect and retrieve data from your DB. \r\n\r\n     public static final String SELECT_QUERY = &quot;SELECT * FROM your_table_name&quot;;\r\n     public static void main(String[] args) {\r\n        String host = &quot;jdbc:derby://localhost:1527/Employees&quot;;\r\n        String uName = &quot;root&quot;;\r\n        String uPass = &quot;password&quot;;\r\n\r\n        try (Connection conn = DriverManager.getConnection(host, uName, uPass);\r\n             Statement stmt = conn.createStatement();\r\n             ResultSet rs = stmt.executeQuery(SELECT_QUERY)) {\r\n\r\n            while (rs.next()) {\r\n                //read your lines one ofter one\r\n                int id = rs.getInt(&quot;id&quot;);\r\n                String somePropertyValue = rs.getInt(&quot;some_column_name&quot;);\r\n                // etc. \r\n            }\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\nAlso, add JDBC driver (*.jar file) in your classpath if you are running from command line, or add this jar to your project, if you are working in IDE (Eclipse, IDEA etc. It is a little bit different for each one).\r\n\r\nBTW, How your code compiled if variable declaration is after they using? That code can not be compiled even.","title":"How to connect to database connection in Java","body":"<p>This is a code (Java 7 style, try-with-resources, more laconic style) to connect and retrieve data from your DB. </p>\n\n<pre><code> public static final String SELECT_QUERY = \"SELECT * FROM your_table_name\";\n public static void main(String[] args) {\n    String host = \"jdbc:derby://localhost:1527/Employees\";\n    String uName = \"root\";\n    String uPass = \"password\";\n\n    try (Connection conn = DriverManager.getConnection(host, uName, uPass);\n         Statement stmt = conn.createStatement();\n         ResultSet rs = stmt.executeQuery(SELECT_QUERY)) {\n\n        while (rs.next()) {\n            //read your lines one ofter one\n            int id = rs.getInt(\"id\");\n            String somePropertyValue = rs.getInt(\"some_column_name\");\n            // etc. \n        }\n    } catch (SQLException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>Also, add JDBC driver (*.jar file) in your classpath if you are running from command line, or add this jar to your project, if you are working in IDE (Eclipse, IDEA etc. It is a little bit different for each one).</p>\n\n<p>BTW, How your code compiled if variable declaration is after they using? That code can not be compiled even.</p>\n"},{"tags":[],"owner":{"account_id":9497988,"reputation":1,"user_id":7060243,"display_name":"Deepak Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477224306,"creation_date":1477224306,"answer_id":40202697,"question_id":21361781,"body_markdown":"    package com.util;\r\n    \r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.SQLException;\r\n    \r\n    \r\n    \r\n    public class DatabaseUtil1 {\r\n    \t\r\n    \tpublic static final String DRIVER=&quot;oracle.jdbc.driver.OracleDriver&quot;;\r\n    \tpublic static final String URL=&quot;jdbc:oracle:thin:@DIPAK-PC:1521:xe&quot;;\r\n    \tpublic static final String USERNAME=&quot;system&quot;;\r\n    \tpublic static final String PASSWORD=&quot;password&quot;;\r\n    \t\r\n    \tpublic static Connection getConnection() throws ClassNotFoundException, SQLException\r\n    \t{\r\n    \t\tConnection con= null;\r\n    \t\t\r\n    \t\tClass.forName(DRIVER);\r\n    \t\tcon=DriverManager.getConnection(URL,USERNAME,PASSWORD);\r\n    \t\r\n    \t\tSystem.out.println(con);\r\n    \t\treturn con;\t\r\n    \t}\r\n    \tpublic static void closePreparedStatement(PreparedStatement pst) throws SQLException\r\n    \t{\r\n    \t\tif(pst!=null)\r\n    \t\t{\r\n    \t\t\tpst.close();\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \tpublic static void closeConnection(Connection con) throws SQLException\r\n    \t{\r\n    \t\tif(con!=null)\r\n    \t\t{\r\n    \t\t\tcon.close();\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \t\r\n    \r\n    }\r\n\r\n","title":"How to connect to database connection in Java","body":"<pre><code>package com.util;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.SQLException;\n\n\n\npublic class DatabaseUtil1 {\n\n    public static final String DRIVER=\"oracle.jdbc.driver.OracleDriver\";\n    public static final String URL=\"jdbc:oracle:thin:@DIPAK-PC:1521:xe\";\n    public static final String USERNAME=\"system\";\n    public static final String PASSWORD=\"password\";\n\n    public static Connection getConnection() throws ClassNotFoundException, SQLException\n    {\n        Connection con= null;\n\n        Class.forName(DRIVER);\n        con=DriverManager.getConnection(URL,USERNAME,PASSWORD);\n\n        System.out.println(con);\n        return con; \n    }\n    public static void closePreparedStatement(PreparedStatement pst) throws SQLException\n    {\n        if(pst!=null)\n        {\n            pst.close();\n        }\n\n    }\n    public static void closeConnection(Connection con) throws SQLException\n    {\n        if(con!=null)\n        {\n            con.close();\n        }\n\n    }\n\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11553963,"reputation":1,"user_id":8465645,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502779456,"creation_date":1502779456,"answer_id":45687685,"question_id":21361781,"body_markdown":"Import the packages: Requires that you include the packages containing the JDBC classes needed for database programming. Most often, using import java.sql.* will suffice.\r\n\r\nRegister the JDBC driver: Requires that you initialize a driver so you can open a communication channel with the database.\r\n\r\nOpen a connection: Requires using the DriverManager.getConnection() method to create a Connection object, which represents a physical connection with the database.","title":"How to connect to database connection in Java","body":"<p>Import the packages: Requires that you include the packages containing the JDBC classes needed for database programming. Most often, using import java.sql.* will suffice.</p>\n\n<p>Register the JDBC driver: Requires that you initialize a driver so you can open a communication channel with the database.</p>\n\n<p>Open a connection: Requires using the DriverManager.getConnection() method to create a Connection object, which represents a physical connection with the database.</p>\n"},{"tags":[],"owner":{"account_id":12839896,"reputation":388,"user_id":9288257,"display_name":"Faisal shahzad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683277795,"creation_date":1524407340,"answer_id":49967019,"question_id":21361781,"body_markdown":"Database connectivity: these are the steps required to connect Java application to a database.\r\n\r\n* Import the sql package\r\n\r\n      Import.java.sql.*;\r\n\r\n* Load driver \r\n\r\n    Every database has different driver, we are using SQL database so driver for SQL database is    \r\n\r\n      Class.forName(“com.mysql.jdbc.Driver”);\r\n\r\n* Make Url\r\n\r\n      String url=”jdbc:mysql://localhost/DataBaseName”;\r\n\r\n* Make connection\r\n\r\n      Connection con=DriverManager(url,”root”,””);\r\n\r\n* Create statement object\r\n\r\n      Statement st = con.CreateStatement();\r\n\r\n    After creating statement object, we can perform SQL queries on the database.\r\n\r\n* Make query\r\n\r\n      String sql = &quot;SELECT * FROM table_Name &quot;;\r\n\r\n* Create ResultSet object and execute query\r\n\r\n      ResultSet rs = st.excuteUpdate(sql);\r\n\r\n* Important step to close the connection\r\n\r\n      con.close();\r\n\r\n**Note** if we do not have SQL connecter in jdk first download connector from this url:\r\n\r\nhttps://dev.mysql.com/downloads/connector/j/5.1.html\r\n\r\nand copy and paste into:\r\n\r\n    Java/jre/lib/ext\r\n","title":"How to connect to database connection in Java","body":"<p>Database connectivity: these are the steps required to connect Java application to a database.</p>\n<ul>\n<li><p>Import the sql package</p>\n<pre><code>Import.java.sql.*;\n</code></pre>\n</li>\n<li><p>Load driver</p>\n<p>Every database has different driver, we are using SQL database so driver for SQL database is</p>\n<pre><code>Class.forName(“com.mysql.jdbc.Driver”);\n</code></pre>\n</li>\n<li><p>Make Url</p>\n<pre><code>String url=”jdbc:mysql://localhost/DataBaseName”;\n</code></pre>\n</li>\n<li><p>Make connection</p>\n<pre><code>Connection con=DriverManager(url,”root”,””);\n</code></pre>\n</li>\n<li><p>Create statement object</p>\n<pre><code>Statement st = con.CreateStatement();\n</code></pre>\n<p>After creating statement object, we can perform SQL queries on the database.</p>\n</li>\n<li><p>Make query</p>\n<pre><code>String sql = &quot;SELECT * FROM table_Name &quot;;\n</code></pre>\n</li>\n<li><p>Create ResultSet object and execute query</p>\n<pre><code>ResultSet rs = st.excuteUpdate(sql);\n</code></pre>\n</li>\n<li><p>Important step to close the connection</p>\n<pre><code>con.close();\n</code></pre>\n</li>\n</ul>\n<p><strong>Note</strong> if we do not have SQL connecter in jdk first download connector from this url:</p>\n<p><a href=\"https://dev.mysql.com/downloads/connector/j/5.1.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/downloads/connector/j/5.1.html</a></p>\n<p>and copy and paste into:</p>\n<pre><code>Java/jre/lib/ext\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22657254,"reputation":1,"user_id":16830953,"display_name":"user16830953"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630774600,"creation_date":1630774600,"answer_id":69057327,"question_id":21361781,"body_markdown":"\r\n\r\n    import java.sql.Connection;\r\n    import java.sql.Date;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    import java.sql.Statement;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class DbOperations {\r\n      Connection con;\r\n      PreparedStatement ps;\r\n    \tpublic DbOperations() {\r\n    \t\tcon = DbUtil.getConnection();\r\n    \t}\r\n    \tpublic boolean insertSubject(String name) throws SQLException {\r\n        Statement s = con.createStatement();\r\n        String sql = &quot;insert into subject (name) values (&#39;&quot;+ name +&quot;&#39;)&quot;;\r\n         ps=con.prepareStatement(sql);\r\n    // ps.executeUpdate();\r\n        ps.executeUpdate();\r\n        if(ps!= null){\r\n            System.out.println(&quot;successfull!!&quot;);\r\n          return true;\r\n        }else {\r\n        return false;\r\n        }\r\n      \r\n    \t}\r\n    \tpublic ArrayList getSubjectById(int id) throws SQLException {\r\n       \r\n         Statement s = con.createStatement();\r\n        String sql = &quot;select * from subject where id = &#39;&quot;+ id +&quot;&#39;&quot;;\r\n         ResultSet resultSet = s.executeQuery(sql);\r\n       ArrayList&lt;Object&gt; records=new ArrayList&lt;Object&gt;();\r\n    while(resultSet.next()){\r\n        // subject sub = new subject();\r\n        // sub.id = resultSet.getInt(1);\r\n        // sub.name = resultSet.getString(2);\r\n        // records.add(sub.id);\r\n        // records.add(sub.name);\r\n        records.add(resultSet.getInt(1));\r\n        records.add(resultSet.getString(2));\r\n        System.out.println(&quot;record output:&quot; + records );\r\n    }\r\n    \r\n    return (ArrayList) records;\r\n    \t}\r\n    \r\n    \tpublic ResultSet getAllSubjects() throws SQLException {\r\n     Statement s = con.createStatement();\r\n        String sql = &quot;select * from subject&quot;;\r\n         ResultSet resultSet = s.executeQuery(sql);\r\n    \t\treturn resultSet;\r\n      }\r\n      \r\n    \tpublic boolean insertStudent(String student_name, float score, String name) throws SQLException {\r\n    \r\n        Statement s = con.createStatement();\r\n        String sql = &quot;select id from subject where name = &#39;&quot;+ name +&quot;&#39;&quot;;\r\n         ResultSet resultSet = s.executeQuery(sql);\r\n         int subId =0;\r\n        while(resultSet.next()){\r\n          subId = resultSet.getInt(1);\r\n        }\r\n    \r\n        String sql1 = &quot;insert into student (student_name,score,subject_id) values (&#39;&quot;+ student_name+&quot;&#39;,&#39;&quot;+score+&quot;&#39;,&#39;&quot;+subId+&quot;&#39;)&quot;;\r\n    \r\n        int result = s.executeUpdate(sql1);\r\n        if(result==0){\r\n          return false;\r\n        }else {\r\n    \t\treturn true;\r\n        }\r\n    \t\r\n    \t}\r\n    \tpublic ArrayList getStudentyId(int id) throws SQLException {\r\n    \r\n    Statement s = con.createStatement();\r\n        String sql = &quot;select * from student where id = &#39;&quot;+ id +&quot;&#39;&quot;;\r\n         ResultSet resultSet = s.executeQuery(sql);\r\n       ArrayList&lt;Object&gt; records=new ArrayList&lt;Object&gt;();\r\n    while(resultSet.next()){\r\n        // student sub = new student();\r\n        // sub.id = resultSet.getInt(1);\r\n        // sub.student_name = resultSet.getString(2);\r\n        // sub.score = resultSet.getFloat(3);\r\n        // sub.subject_id = resultSet.getInt(4);\r\n    \r\n        // records.add(sub.id);\r\n        // records.add(sub.student_name);\r\n        // records.add(sub.score);\r\n        // records.add(sub.subject_id);\r\n        records.add(resultSet.getInt(1));\r\n        records.add( resultSet.getString(2));\r\n        records.add(resultSet.getFloat(3));\r\n        records.add(resultSet.getInt(4));\r\n    \r\n    }\r\n    return (ArrayList) records;\r\n    \r\n    }\r\n    \tpublic ResultSet getAllStudents() throws SQLException {\r\n    \t\tStatement s = con.createStatement();\r\n        String sql = &quot;select * from student&quot;;\r\n         ResultSet resultSet = s.executeQuery(sql);\r\n    \t\treturn resultSet;\r\n    \t}\r\n    \t\r\n    }","title":"How to connect to database connection in Java","body":"<pre><code>import java.sql.Connection;\nimport java.sql.Date;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Statement;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class DbOperations {\n  Connection con;\n  PreparedStatement ps;\n    public DbOperations() {\n        con = DbUtil.getConnection();\n    }\n    public boolean insertSubject(String name) throws SQLException {\n    Statement s = con.createStatement();\n    String sql = &quot;insert into subject (name) values ('&quot;+ name +&quot;')&quot;;\n     ps=con.prepareStatement(sql);\n// ps.executeUpdate();\n    ps.executeUpdate();\n    if(ps!= null){\n        System.out.println(&quot;successfull!!&quot;);\n      return true;\n    }else {\n    return false;\n    }\n  \n    }\n    public ArrayList getSubjectById(int id) throws SQLException {\n   \n     Statement s = con.createStatement();\n    String sql = &quot;select * from subject where id = '&quot;+ id +&quot;'&quot;;\n     ResultSet resultSet = s.executeQuery(sql);\n   ArrayList&lt;Object&gt; records=new ArrayList&lt;Object&gt;();\nwhile(resultSet.next()){\n    // subject sub = new subject();\n    // sub.id = resultSet.getInt(1);\n    // sub.name = resultSet.getString(2);\n    // records.add(sub.id);\n    // records.add(sub.name);\n    records.add(resultSet.getInt(1));\n    records.add(resultSet.getString(2));\n    System.out.println(&quot;record output:&quot; + records );\n}\n\nreturn (ArrayList) records;\n    }\n\n    public ResultSet getAllSubjects() throws SQLException {\n Statement s = con.createStatement();\n    String sql = &quot;select * from subject&quot;;\n     ResultSet resultSet = s.executeQuery(sql);\n        return resultSet;\n  }\n  \n    public boolean insertStudent(String student_name, float score, String name) throws SQLException {\n\n    Statement s = con.createStatement();\n    String sql = &quot;select id from subject where name = '&quot;+ name +&quot;'&quot;;\n     ResultSet resultSet = s.executeQuery(sql);\n     int subId =0;\n    while(resultSet.next()){\n      subId = resultSet.getInt(1);\n    }\n\n    String sql1 = &quot;insert into student (student_name,score,subject_id) values ('&quot;+ student_name+&quot;','&quot;+score+&quot;','&quot;+subId+&quot;')&quot;;\n\n    int result = s.executeUpdate(sql1);\n    if(result==0){\n      return false;\n    }else {\n        return true;\n    }\n    \n    }\n    public ArrayList getStudentyId(int id) throws SQLException {\n\nStatement s = con.createStatement();\n    String sql = &quot;select * from student where id = '&quot;+ id +&quot;'&quot;;\n     ResultSet resultSet = s.executeQuery(sql);\n   ArrayList&lt;Object&gt; records=new ArrayList&lt;Object&gt;();\nwhile(resultSet.next()){\n    // student sub = new student();\n    // sub.id = resultSet.getInt(1);\n    // sub.student_name = resultSet.getString(2);\n    // sub.score = resultSet.getFloat(3);\n    // sub.subject_id = resultSet.getInt(4);\n\n    // records.add(sub.id);\n    // records.add(sub.student_name);\n    // records.add(sub.score);\n    // records.add(sub.subject_id);\n    records.add(resultSet.getInt(1));\n    records.add( resultSet.getString(2));\n    records.add(resultSet.getFloat(3));\n    records.add(resultSet.getInt(4));\n\n}\nreturn (ArrayList) records;\n\n}\n    public ResultSet getAllStudents() throws SQLException {\n        Statement s = con.createStatement();\n    String sql = &quot;select * from student&quot;;\n     ResultSet resultSet = s.executeQuery(sql);\n        return resultSet;\n    }\n    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17377280,"reputation":27,"user_id":12590217,"display_name":"Lasan Rashmika"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1663055870,"creation_date":1663055870,"answer_id":73699408,"question_id":21361781,"body_markdown":"Use the below code. This will work\r\n\r\n    import java.sql.*;  \r\n    class MysqlCon{  \r\n    public static void main(String args[]){  \r\n    try{  \r\n    Class.forName(&quot;com.mysql.jdbc.Driver&quot;);  \r\n    Connection con=DriverManager.getConnection(  \r\n    &quot;jdbc:mysql://localhost:3306/sonoo&quot;,&quot;root&quot;,&quot;root&quot;);  \r\n    //here is database name, root is username and password  \r\n    Statement stmt=con.createStatement();  \r\n    ResultSet rs=stmt.executeQuery(&quot;select * from emp&quot;);  \r\n    while(rs.next())  \r\n    System.out.println(rs.getInt(1)+&quot;  &quot;+rs.getString(2)+&quot;  &quot;+rs.getString(3));  \r\n    con.close();  \r\n    }catch(Exception e){ System.out.println(e);}  \r\n    }  \r\n    }  ","title":"How to connect to database connection in Java","body":"<p>Use the below code. This will work</p>\n<pre><code>import java.sql.*;  \nclass MysqlCon{  \npublic static void main(String args[]){  \ntry{  \nClass.forName(&quot;com.mysql.jdbc.Driver&quot;);  \nConnection con=DriverManager.getConnection(  \n&quot;jdbc:mysql://localhost:3306/sonoo&quot;,&quot;root&quot;,&quot;root&quot;);  \n//here is database name, root is username and password  \nStatement stmt=con.createStatement();  \nResultSet rs=stmt.executeQuery(&quot;select * from emp&quot;);  \nwhile(rs.next())  \nSystem.out.println(rs.getInt(1)+&quot;  &quot;+rs.getString(2)+&quot;  &quot;+rs.getString(3));  \ncon.close();  \n}catch(Exception e){ System.out.println(e);}  \n}  \n}  \n</code></pre>\n"}],"owner":{"account_id":1126423,"reputation":1131,"user_id":1113616,"accept_rate":74,"display_name":"Jeiman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24429,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":21362006,"answer_count":8,"score":4,"last_activity_date":1683277795,"creation_date":1390728391,"question_id":21361781,"body_markdown":"I would like to know how to connect to database in which is hosted in Xampp MySQL.\r\n\r\nThis is what I have so far in my java code to connect but I&#39;m unsure what I&#39;m doing.  \r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            Connection con = DriverManager.getConnection( host, username, password );\r\n            String host = &quot;jdbc:derby://localhost:1527/Employees&quot;;\r\n            String uName = &quot;root&quot;;\r\n            String uPass= &quot;password&quot;;\r\n        }\r\n        catch ( SQLException err ) {\r\n        System.out.println( err.getMessage( ) );\r\n        }\r\n        \r\n    }\r\n\r\n1. What would the host URL be?\r\n2. Do i need a JDBC Jar file to connect to the DB? \r\n\r\nI have setup a database and table via phpMyAdmin already. Just don&#39;t know how to proceed.\r\n\r\nI am using **Netbeans** to write my Java code to connect to a local database which was created via **Xampp PHPMyAdmin**.\r\n\r\nIn the end, I want to create a database connection in Java and call out tables within the IDE. Would appreciate some help.","title":"How to connect to database connection in Java","body":"<p>I would like to know how to connect to database in which is hosted in Xampp MySQL.</p>\n\n<p>This is what I have so far in my java code to connect but I'm unsure what I'm doing.  </p>\n\n<pre><code>public static void main(String[] args) {\n    try {\n        Connection con = DriverManager.getConnection( host, username, password );\n        String host = \"jdbc:derby://localhost:1527/Employees\";\n        String uName = \"root\";\n        String uPass= \"password\";\n    }\n    catch ( SQLException err ) {\n    System.out.println( err.getMessage( ) );\n    }\n\n}\n</code></pre>\n\n<ol>\n<li>What would the host URL be?</li>\n<li>Do i need a JDBC Jar file to connect to the DB? </li>\n</ol>\n\n<p>I have setup a database and table via phpMyAdmin already. Just don't know how to proceed.</p>\n\n<p>I am using <strong>Netbeans</strong> to write my Java code to connect to a local database which was created via <strong>Xampp PHPMyAdmin</strong>.</p>\n\n<p>In the end, I want to create a database connection in Java and call out tables within the IDE. Would appreciate some help.</p>\n"},{"tags":["java","android","maven","gradle","android-room"],"answers":[{"tags":[],"owner":{"account_id":24873434,"reputation":43,"user_id":18747673,"display_name":"Mwai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683277645,"creation_date":1683277645,"answer_id":76180551,"question_id":76178183,"body_markdown":" Use settings.gradle. Inside settings.gradle you&#39;ll find file contents that look like this   \r\n\r\n    `pluginManagement {\r\n            repositories {\r\n                google()\r\n                mavenCentral()\r\n                gradlePluginPortal()\r\n            }\r\n        }\r\n        dependencyResolutionManagement {\r\n            repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n            repositories {\r\n                google()\r\n                mavenCentral()\r\n            }\r\n        }\r\n        rootProject.name = &quot;Sync&quot;\r\n        include &#39;:app&#39;`\r\n\r\nYou can then add the maven code in this block of code under mavenCentral\r\n\r\n    `dependencyResolutionManagement {\r\n            repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n            repositories {\r\n                google()\r\n                mavenCentral()\r\n            }\r\n        }`","title":"To use the Room database, How to correctly add the Maven Repository and the necessary dependencies in build.gradle in android studio (flamingo)?","body":"<p>Use settings.gradle. Inside settings.gradle you'll find file contents that look like this</p>\n<pre><code>`pluginManagement {\n        repositories {\n            google()\n            mavenCentral()\n            gradlePluginPortal()\n        }\n    }\n    dependencyResolutionManagement {\n        repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n        repositories {\n            google()\n            mavenCentral()\n        }\n    }\n    rootProject.name = &quot;Sync&quot;\n    include ':app'`\n</code></pre>\n<p>You can then add the maven code in this block of code under mavenCentral</p>\n<pre><code>`dependencyResolutionManagement {\n        repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n        repositories {\n            google()\n            mavenCentral()\n        }\n    }`\n</code></pre>\n"}],"owner":{"account_id":28306512,"reputation":245,"user_id":21644444,"display_name":"oneuromancer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":288,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76180551,"answer_count":1,"score":0,"last_activity_date":1683277645,"creation_date":1683247644,"question_id":76178183,"body_markdown":"I&#39;m making a simple patient registration app using java, and I&#39;m starting to learn and use the room database. I am tremendously confused on how to add the dependencies in gradle and the maven repository. Every tutorial I see shows something different. And the documentation on android developer just confused me even more. I&#39;m using the latest version of studio (flamingo) and I think the gradle version is 8.\r\n\r\nFor example, most tutorials on youtube and the internet say that I should go to gradle script -&gt; build.gradle(project) and add this:\r\n\r\n    allprojects{\r\n        repositories{\r\n    Google()\r\n    jcenter()\r\n    maven {url &#39;https://maven.google.com&#39; }\r\n    }\r\n\r\nBut in the google documentation it says to add this:\r\n\r\n    dependencyResolutionManagement {\r\n    \r\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n         repositories {\r\n             Google()\r\n    }\r\n\r\nSome other tutorials put it like this:\r\n\r\n    buildscript {\r\n        repositories {\r\n            Google()\r\n            mavenCentral()\r\n    }\r\n\r\nIn my build.gradle(project) there is nothing there. Just a few lines with plugins and id&#39;s:\r\n\r\n    // Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n    plugins {\r\n         id &#39;com.android.application&#39; version &#39;8.0.0&#39; apply false\r\n         id &#39;com.android.library&#39; version &#39;8.0.0&#39; apply false\r\n    }\r\n---------------------------------------------------------------------------------------------------\r\n\r\n1 - Where should I put the code anyway? And which of these codes??\r\n\r\n2 - And in build.gradle(app), which dependencies should I put there and where in the code??\r\n\r\nAs you can see this is extremely confusing for a beginner. I really appreciate any help from you, and sorry if the post was too long.\r\n\r\n","title":"To use the Room database, How to correctly add the Maven Repository and the necessary dependencies in build.gradle in android studio (flamingo)?","body":"<p>I'm making a simple patient registration app using java, and I'm starting to learn and use the room database. I am tremendously confused on how to add the dependencies in gradle and the maven repository. Every tutorial I see shows something different. And the documentation on android developer just confused me even more. I'm using the latest version of studio (flamingo) and I think the gradle version is 8.</p>\n<p>For example, most tutorials on youtube and the internet say that I should go to gradle script -&gt; build.gradle(project) and add this:</p>\n<pre><code>allprojects{\n    repositories{\nGoogle()\njcenter()\nmaven {url 'https://maven.google.com' }\n}\n</code></pre>\n<p>But in the google documentation it says to add this:</p>\n<pre><code>dependencyResolutionManagement {\n\nrepositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n     repositories {\n         Google()\n}\n</code></pre>\n<p>Some other tutorials put it like this:</p>\n<pre><code>buildscript {\n    repositories {\n        Google()\n        mavenCentral()\n}\n</code></pre>\n<p>In my build.gradle(project) there is nothing there. Just a few lines with plugins and id's:</p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\nplugins {\n     id 'com.android.application' version '8.0.0' apply false\n     id 'com.android.library' version '8.0.0' apply false\n}\n</code></pre>\n<hr />\n<p>1 - Where should I put the code anyway? And which of these codes??</p>\n<p>2 - And in build.gradle(app), which dependencies should I put there and where in the code??</p>\n<p>As you can see this is extremely confusing for a beginner. I really appreciate any help from you, and sorry if the post was too long.</p>\n"},{"tags":["java","flowable"],"answers":[{"tags":[],"owner":{"account_id":25252139,"reputation":1,"user_id":19084475,"display_name":"Dlin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683277525,"creation_date":1683277525,"answer_id":76180536,"question_id":76179401,"body_markdown":"After debugging the source code, it was found that at line 545 in ExecutionEntityManagerImpl.java from /Users/dlin/.m2/repository/org/flowable/flowable-engine/6.8.0/flowable-engine-6.8.0-sources.jar!, the code block below is used to check whether to delete the history records of a process instance:\r\n\r\n    if (deleteHistory) {\r\n    getHistoryManager().recordProcessInstanceDeleted(execution.getId(), execution.getProcessDefinitionId(), execution.getTenantId());\r\n    }\r\n\r\nTherefore, to preserve the history records, the value of the &#39;deleteHistory&#39; parameter in the &#39;safeDeleteSubProcessInstance&#39; method of &#39;DefaultDynamicStateManager&#39; needs to be overridden.\r\n\r\nIt is not clear why Flowable does not provide a parameter to control this behavior, but instead hardcodes it in the codebase.\r\n","title":"How to solve the issue of losing history records when using Flowable&#39;s ChangeActivityStateBuilder#moveActivityIdToParentActivityId method?","body":"<p>After debugging the source code, it was found that at line 545 in ExecutionEntityManagerImpl.java from /Users/dlin/.m2/repository/org/flowable/flowable-engine/6.8.0/flowable-engine-6.8.0-sources.jar!, the code block below is used to check whether to delete the history records of a process instance:</p>\n<pre><code>if (deleteHistory) {\ngetHistoryManager().recordProcessInstanceDeleted(execution.getId(), execution.getProcessDefinitionId(), execution.getTenantId());\n}\n</code></pre>\n<p>Therefore, to preserve the history records, the value of the 'deleteHistory' parameter in the 'safeDeleteSubProcessInstance' method of 'DefaultDynamicStateManager' needs to be overridden.</p>\n<p>It is not clear why Flowable does not provide a parameter to control this behavior, but instead hardcodes it in the codebase.</p>\n"}],"owner":{"account_id":25252139,"reputation":1,"user_id":19084475,"display_name":"Dlin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683277525,"creation_date":1683268499,"question_id":76179401,"body_markdown":"My process involves the CallActivity, and I need to return from the sub-process to the main process. However, using moveActivityIdToParentActivityId would result in the loss of the history records. I want to retain the history records. What should I do?\r\n\r\nI have tried moving the current CallActivity from the main process to the previous task node directly. Although this can retain the history records, the variables in the sub-process will not be output to the main process.\r\n\r\nUsing moveActivityIdToParentActivityId can output sub-process variables to the main process, but the process records will be lost.","title":"How to solve the issue of losing history records when using Flowable&#39;s ChangeActivityStateBuilder#moveActivityIdToParentActivityId method?","body":"<p>My process involves the CallActivity, and I need to return from the sub-process to the main process. However, using moveActivityIdToParentActivityId would result in the loss of the history records. I want to retain the history records. What should I do?</p>\n<p>I have tried moving the current CallActivity from the main process to the previous task node directly. Although this can retain the history records, the variables in the sub-process will not be output to the main process.</p>\n<p>Using moveActivityIdToParentActivityId can output sub-process variables to the main process, but the process records will be lost.</p>\n"},{"tags":["java","installation","windows-installer","uninstallation"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1683287183,"post_id":76180477,"comment_id":134347256,"body_markdown":"Have you done a global search for that .msi file? If you have and it&#39;s absent, you could always try to download it again.","body":"Have you done a global search for that .msi file? If you have and it&#39;s absent, you could always try to download it again."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1683293998,"post_id":76180477,"comment_id":134348911,"body_markdown":"You may try to delete the folder manually and follow [these instructions](https://superuser.com/a/1616076/646359) to get rid of the Java version from the list of installed software. If this fails, well, reinstalling Windows at least once in a decade is not bad. You may get rid of other legacy artifacts as a side effect.","body":"You may try to delete the folder manually and follow <a href=\"https://superuser.com/a/1616076/646359\">these instructions</a> to get rid of the Java version from the list of installed software. If this fails, well, reinstalling Windows at least once in a decade is not bad. You may get rid of other legacy artifacts as a side effect."},{"owner":{"account_id":44075,"reputation":40440,"user_id":129130,"accept_rate":79,"display_name":"Stein &#197;smul"},"score":0,"creation_date":1683300770,"post_id":76180477,"comment_id":134350806,"body_markdown":"For problems like these - broken MSI uninstalls - you should try the [Microsoft FixIt tool](https://support.microsoft.com/en-us/topic/fix-problems-that-block-programs-from-being-installed-or-removed-cca7d1b6-65a9-3d98-426b-e9f927e1eb4d). There is also the larger issue of [uninstalling your own MSI files that are broken during development work](https://stackoverflow.com/a/53876981/129130) (some approaches here can be used for all MSI uninstall problems, but the Microsoft FixIt solution is the best for most users). And [on MSI uninstall in general](https://stackoverflow.com/a/1055933/129130)","body":"For problems like these - broken MSI uninstalls - you should try the <a href=\"https://support.microsoft.com/en-us/topic/fix-problems-that-block-programs-from-being-installed-or-removed-cca7d1b6-65a9-3d98-426b-e9f927e1eb4d\" rel=\"nofollow noreferrer\">Microsoft FixIt tool</a>. There is also the larger issue of <a href=\"https://stackoverflow.com/a/53876981/129130\">uninstalling your own MSI files that are broken during development work</a> (some approaches here can be used for all MSI uninstall problems, but the Microsoft FixIt solution is the best for most users). And <a href=\"https://stackoverflow.com/a/1055933/129130\">on MSI uninstall in general</a>"},{"owner":{"account_id":27429918,"reputation":21,"user_id":20926790,"display_name":"Tim Matthew"},"score":0,"creation_date":1687779353,"post_id":76180477,"comment_id":134979641,"body_markdown":"g00se, I&#39;m sorry for not answering. A long time I put off until the moment... The .msi file appears on global serach, but trying to dlete this it says it isn&#39;t here anymore. Also I found the archive of this jre on my computer. I suppose that I need to set the same path as the existing jre folder to replace the exisitng folders and files by the installing ones, isn`t it?","body":"g00se, I&#39;m sorry for not answering. A long time I put off until the moment... The .msi file appears on global serach, but trying to dlete this it says it isn&#39;t here anymore. Also I found the archive of this jre on my computer. I suppose that I need to set the same path as the existing jre folder to replace the exisitng folders and files by the installing ones, isn`t it?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687784083,"post_id":76180477,"comment_id":134980674,"body_markdown":"You never want to delete an msi file if you&#39;re trying to uninstall what it installs. Just forget about the old and install the new version","body":"You never want to delete an msi file if you&#39;re trying to uninstall what it installs. Just forget about the old and install the new version"}],"owner":{"account_id":27429918,"reputation":21,"user_id":20926790,"display_name":"Tim Matthew"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683277093,"creation_date":1683277093,"question_id":76180477,"body_markdown":"I need to install a **Java 8** version. Earlier I had **Java 6 TM Update 2**, but now it&#39;s not in my computer (I&#39;ve checked it on command prompt and nothing versions appeared). However, the folder with **jre1.6** is still here and in **add or remove programs** it is still found. When I click **uninstall** this appears\r\n                                        \r\n[![enter image description here][1]][1]\r\n\r\nAnd when I submit (OK) this appears\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Vs627.png\r\n  [2]: https://i.stack.imgur.com/AwhVX.png\r\n\r\nThe *jre1.6.0_02.msi* file might be deleted accidently. Whatever how can I fix the problem?","title":"The path cannot be found while uninstalling Java (TM) 6 Update 2","body":"<p>I need to install a <strong>Java 8</strong> version. Earlier I had <strong>Java 6 TM Update 2</strong>, but now it's not in my computer (I've checked it on command prompt and nothing versions appeared). However, the folder with <strong>jre1.6</strong> is still here and in <strong>add or remove programs</strong> it is still found. When I click <strong>uninstall</strong> this appears</p>\n<p><a href=\"https://i.stack.imgur.com/Vs627.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vs627.png\" alt=\"enter image description here\" /></a></p>\n<p>And when I submit (OK) this appears</p>\n<p><a href=\"https://i.stack.imgur.com/AwhVX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AwhVX.png\" alt=\"enter image description here\" /></a></p>\n<p>The <em>jre1.6.0_02.msi</em> file might be deleted accidently. Whatever how can I fix the problem?</p>\n"},{"tags":["java","java-8","jodatime","weblogic12c","tzdata"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1683151914,"post_id":76168224,"comment_id":134324433,"body_markdown":"Why not just use the current version 2.12.5? [Joda-Time](https://www.joda.org/joda-time/) is in [maintenance-mode](https://en.wikipedia.org/wiki/Maintenance_mode), so only the most minimal changes are being made. See the [Release Notes](https://www.joda.org/joda-time/changes-report.html#a2.11.2).","body":"Why not just use the current version 2.12.5? <a href=\"https://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">Joda-Time</a> is in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"nofollow noreferrer\">maintenance-mode</a>, so only the most minimal changes are being made. See the <a href=\"https://www.joda.org/joda-time/changes-report.html#a2.11.2\" rel=\"nofollow noreferrer\">Release Notes</a>."},{"owner":{"account_id":10242075,"reputation":11,"user_id":21809809,"display_name":"pancho"},"score":1,"creation_date":1683206755,"post_id":76168224,"comment_id":134333493,"body_markdown":"The joda-time library is inside a framework, updating the library means more work since we don&#39;t know what else could fail and certify everything again.","body":"The joda-time library is inside a framework, updating the library means more work since we don&#39;t know what else could fail and certify everything again."}],"owner":{"account_id":10242075,"reputation":11,"user_id":21809809,"display_name":"pancho"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683276945,"creation_date":1683150913,"question_id":76168224,"body_markdown":"Currently in our project we are using joda-time version 2.9.9, the project is on production and we need to update the tzdata of jodatime.\r\nJava 1.8\r\nWeblogic 12.2.1.3\r\ntzdata from https://data.iana.org/time-zones/releases/tzdata2023c.tar.gz\r\n\r\nWhen the test server server start, we have an exception.\r\n\r\n```\r\n\r\n        at weblogic.work.PartitionUtility.runWorkUnderContext(PartitionUtility.java:41)\r\n        at weblogic.work.SelfTuningWorkManagerImpl.runWorkUnderContext(SelfTuningWorkManagerImpl.java:652)\r\n        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:420)\r\n        at weblogic.work.ExecuteThread.run(ExecuteThread.java:360)\r\nCaused by: java.lang.RuntimeException: java.io.FileNotFoundException: /tmp/tz/tzdata2020a/ZoneInfoMap (Is a directory)\r\n        at org.joda.time.DateTimeZone.getDefaultProvider(DateTimeZone.java:506)\r\n        at org.joda.time.DateTimeZone.getProvider(DateTimeZone.java:413)\r\n        at org.joda.time.DateTimeZone.forTimeZone(DateTimeZone.java:349)(ExchangeTimingHandlerImpl.java:99)\r\n        ... 82 more\r\nCaused by: java.io.FileNotFoundException: /tmp/tz/tzdata20223c/ZoneInfoMap (No such file or directory)\r\n        at java.io.FileInputStream.open0(Native Method)\r\n        at java.io.FileInputStream.open(FileInputStream.java:195)\r\n        at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138)\r\n        at org.joda.time.tz.ZoneInfoProvider.openResource(ZoneInfoProvider.java:196)\r\n        at org.joda.time.tz.ZoneInfoProvider.&lt;init&gt;(ZoneInfoProvider.java:74)\r\n        at org.joda.time.DateTimeZone.getDefaultProvider(DateTimeZone.java:503)\r\n        ... 90 more\r\n\r\n```\r\n\r\nWe have been looking into \r\nhttps://www.joda.org/joda-time/tz_update.html\r\nhttps://github.com/JodaOrg, but we couldn&#39;t find anything related to the property or &quot;ZoneInfoMap (No such file or directory)&quot;.\r\n\r\nDoes any one know the solution?\r\n\r\nThe idea is to be able to update the tzdata information from Joda-Time library.\r\n\r\nThe Joda-Time library is inside a framework. Updating the library would mean more work since we don&#39;t know what else could fail and certify everything again.","title":"How to use Joda-time property org.joda.time.DateTimeZone.Folder","body":"<p>Currently in our project we are using joda-time version 2.9.9, the project is on production and we need to update the tzdata of jodatime.\nJava 1.8\nWeblogic 12.2.1.3\ntzdata from <a href=\"https://data.iana.org/time-zones/releases/tzdata2023c.tar.gz\" rel=\"nofollow noreferrer\">https://data.iana.org/time-zones/releases/tzdata2023c.tar.gz</a></p>\n<p>When the test server server start, we have an exception.</p>\n<pre><code>\n        at weblogic.work.PartitionUtility.runWorkUnderContext(PartitionUtility.java:41)\n        at weblogic.work.SelfTuningWorkManagerImpl.runWorkUnderContext(SelfTuningWorkManagerImpl.java:652)\n        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:420)\n        at weblogic.work.ExecuteThread.run(ExecuteThread.java:360)\nCaused by: java.lang.RuntimeException: java.io.FileNotFoundException: /tmp/tz/tzdata2020a/ZoneInfoMap (Is a directory)\n        at org.joda.time.DateTimeZone.getDefaultProvider(DateTimeZone.java:506)\n        at org.joda.time.DateTimeZone.getProvider(DateTimeZone.java:413)\n        at org.joda.time.DateTimeZone.forTimeZone(DateTimeZone.java:349)(ExchangeTimingHandlerImpl.java:99)\n        ... 82 more\nCaused by: java.io.FileNotFoundException: /tmp/tz/tzdata20223c/ZoneInfoMap (No such file or directory)\n        at java.io.FileInputStream.open0(Native Method)\n        at java.io.FileInputStream.open(FileInputStream.java:195)\n        at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138)\n        at org.joda.time.tz.ZoneInfoProvider.openResource(ZoneInfoProvider.java:196)\n        at org.joda.time.tz.ZoneInfoProvider.&lt;init&gt;(ZoneInfoProvider.java:74)\n        at org.joda.time.DateTimeZone.getDefaultProvider(DateTimeZone.java:503)\n        ... 90 more\n\n</code></pre>\n<p>We have been looking into\n<a href=\"https://www.joda.org/joda-time/tz_update.html\" rel=\"nofollow noreferrer\">https://www.joda.org/joda-time/tz_update.html</a>\n<a href=\"https://github.com/JodaOrg\" rel=\"nofollow noreferrer\">https://github.com/JodaOrg</a>, but we couldn't find anything related to the property or &quot;ZoneInfoMap (No such file or directory)&quot;.</p>\n<p>Does any one know the solution?</p>\n<p>The idea is to be able to update the tzdata information from Joda-Time library.</p>\n<p>The Joda-Time library is inside a framework. Updating the library would mean more work since we don't know what else could fail and certify everything again.</p>\n"},{"tags":["java","android","exoplayer"],"answers":[{"tags":[],"owner":{"account_id":133209,"reputation":24579,"user_id":334402,"accept_rate":50,"display_name":"Mick"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683276784,"creation_date":1683276784,"answer_id":76180434,"question_id":76134804,"body_markdown":"The new method is a little different - it is explained in the online documentation but it may to be clear how the new and old methods relate: https://exoplayer.dev/track-selection.html\r\n\r\nThe new method getCurrentTracks() returns a list of Track.Group, and each entry in this list is a group that contains individual tracks with the same content in different formats.\r\n\r\nYou can then iterate through each track in a group to get information about that individual track - e.g. to see if the track is supported as in the example at the above link:\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    for (Tracks.Group trackGroup : tracks.getGroups()) {\r\n      // Group level information.\r\n      @C.TrackType int trackType = trackGroup.getTrackType();\r\n      boolean trackInGroupIsSelected = trackGroup.isSelected();\r\n      boolean trackInGroupIsSupported = trackGroup.isSupported();\r\n      for (int i = 0; i &lt; trackGroup.length; i++) {\r\n        // Individual track information.\r\n        boolean isSupported = trackGroup.isTrackSupported(i);\r\n        boolean isSelected = trackGroup.isTrackSelected(i);\r\n        Format trackFormat = trackGroup.getTrackFormat(i);\r\n      }\r\n    }\r\n\r\n ","title":"ExoPlayer getCurrentTrackGroups() deprecated","body":"<p>The new method is a little different - it is explained in the online documentation but it may to be clear how the new and old methods relate: <a href=\"https://exoplayer.dev/track-selection.html\" rel=\"nofollow noreferrer\">https://exoplayer.dev/track-selection.html</a></p>\n<p>The new method getCurrentTracks() returns a list of Track.Group, and each entry in this list is a group that contains individual tracks with the same content in different formats.</p>\n<p>You can then iterate through each track in a group to get information about that individual track - e.g. to see if the track is supported as in the example at the above link:</p>\n<pre class=\"lang-js prettyprint-override\"><code>for (Tracks.Group trackGroup : tracks.getGroups()) {\n  // Group level information.\n  @C.TrackType int trackType = trackGroup.getTrackType();\n  boolean trackInGroupIsSelected = trackGroup.isSelected();\n  boolean trackInGroupIsSupported = trackGroup.isSupported();\n  for (int i = 0; i &lt; trackGroup.length; i++) {\n    // Individual track information.\n    boolean isSupported = trackGroup.isTrackSupported(i);\n    boolean isSelected = trackGroup.isTrackSelected(i);\n    Format trackFormat = trackGroup.getTrackFormat(i);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":18549138,"reputation":35,"user_id":13515739,"display_name":"Brenton"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76180434,"answer_count":1,"score":0,"last_activity_date":1683276784,"creation_date":1682749122,"question_id":76134804,"body_markdown":"Can someone please assist with this Android Java ExoPlayer code to detect audio format. I modified this method from an Exo developer GitHub comment from 2020 and it works, but in Android Studio it&#39;s telling me the function is already depreciated and I can&#39;t figure out how to update it?\r\n\r\nThis method works, but AS gives waring &quot;&#39;getCurrentTrackGroups()&#39; is deprecated&quot;\r\n\r\n    private static Format detectAudioFormat() {\r\n        TrackGroupArray trackGroups = player.getCurrentTrackGroups();\r\n        for (int i = 0; i &lt; trackGroups.length; i++) {\r\n            TrackGroup trackGroup = trackGroups.get(i);\r\n            for (int j = 0; j &lt; trackGroup.length; j++) {\r\n                Format format = trackGroup.getFormat(j);\r\n                if (MimeTypes.isAudio(format.sampleMimeType)) {\r\n                    return format;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\nAfter changing getCurrentTrackGroups() to getCurrentTracks() AS now gives errors &quot;Cannot resolve symbol &#39;length&#39;&quot; and &quot;Cannot resolve method &#39;get&#39; in &#39;Tracks&#39;&quot;\r\n\r\n    private static Format detectAudioFormat() {\r\n        Tracks trackGroups = player.getCurrentTracks();\r\n        for (int i = 0; i &lt; trackGroups.length; i++) {\r\n            TrackGroup trackGroup = trackGroups.get(i);\r\n            for (int j = 0; j &lt; trackGroup.length; j++) {\r\n                Format format = trackGroup.getFormat(j);\r\n                if (MimeTypes.isAudio(format.sampleMimeType)) {\r\n                    return format;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }","title":"ExoPlayer getCurrentTrackGroups() deprecated","body":"<p>Can someone please assist with this Android Java ExoPlayer code to detect audio format. I modified this method from an Exo developer GitHub comment from 2020 and it works, but in Android Studio it's telling me the function is already depreciated and I can't figure out how to update it?</p>\n<p>This method works, but AS gives waring &quot;'getCurrentTrackGroups()' is deprecated&quot;</p>\n<pre><code>private static Format detectAudioFormat() {\n    TrackGroupArray trackGroups = player.getCurrentTrackGroups();\n    for (int i = 0; i &lt; trackGroups.length; i++) {\n        TrackGroup trackGroup = trackGroups.get(i);\n        for (int j = 0; j &lt; trackGroup.length; j++) {\n            Format format = trackGroup.getFormat(j);\n            if (MimeTypes.isAudio(format.sampleMimeType)) {\n                return format;\n            }\n        }\n    }\n    return null;\n}\n</code></pre>\n<p>After changing getCurrentTrackGroups() to getCurrentTracks() AS now gives errors &quot;Cannot resolve symbol 'length'&quot; and &quot;Cannot resolve method 'get' in 'Tracks'&quot;</p>\n<pre><code>private static Format detectAudioFormat() {\n    Tracks trackGroups = player.getCurrentTracks();\n    for (int i = 0; i &lt; trackGroups.length; i++) {\n        TrackGroup trackGroup = trackGroups.get(i);\n        for (int j = 0; j &lt; trackGroup.length; j++) {\n            Format format = trackGroup.getFormat(j);\n            if (MimeTypes.isAudio(format.sampleMimeType)) {\n                return format;\n            }\n        }\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8116262,"reputation":105,"user_id":6114667,"display_name":"Alexandre"},"score":0,"creation_date":1527493471,"post_id":50532263,"comment_id":88133267,"body_markdown":"Thank you for your reply.\non the repository /opt/appdata/conv/data/in everything works but not /opt/appdata/conv/data/out. They have the same rights.\nIn /opt/appdata/conv/data/out files are well deleted, just the directory dosen&#39;t.\n\nMy application has the same rights and in the same group of user i use in promtp","body":"Thank you for your reply. on the repository /opt/appdata/conv/data/in everything works but not /opt/appdata/conv/data/out. They have the same rights. In /opt/appdata/conv/data/out files are well deleted, just the directory dosen&#39;t.  My application has the same rights and in the same group of user i use in promtp"}],"answers":[{"tags":[],"owner":{"account_id":13300553,"reputation":111,"user_id":9602180,"display_name":"Tryliom"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1527261359,"creation_date":1527261359,"answer_id":50532335,"question_id":50532263,"body_markdown":"There are files in your folder ? If yes, you should delete them before delete the folder","title":"Java - Delete directory - IOException: Unable to delete directory","body":"<p>There are files in your folder ? If yes, you should delete them before delete the folder</p>\n"},{"tags":[],"owner":{"account_id":10812140,"reputation":56,"user_id":7952422,"display_name":"shifty"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1527261485,"creation_date":1527261485,"answer_id":50532370,"question_id":50532263,"body_markdown":"Did you check permissions on that directory/file to ensure the user executing the command has sufficient rights?\r\n\r\nAlternatively, if another process has a handle on the file, that would also cause a problem.  Assuming you&#39;re using a linux based OS, try using the command: fuser /opt/appdata/conv/data/out/Job000000000676\r\n\r\nGood luck","title":"Java - Delete directory - IOException: Unable to delete directory","body":"<p>Did you check permissions on that directory/file to ensure the user executing the command has sufficient rights?</p>\n\n<p>Alternatively, if another process has a handle on the file, that would also cause a problem.  Assuming you're using a linux based OS, try using the command: fuser /opt/appdata/conv/data/out/Job000000000676</p>\n\n<p>Good luck</p>\n"},{"tags":[],"owner":{"account_id":11468218,"reputation":5521,"user_id":8405835,"display_name":"Abhijit Pritam Dutta"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1543689162,"creation_date":1527261538,"answer_id":50532386,"question_id":50532263,"body_markdown":"You need to check the following to fix this issue:-\r\n\r\n1. User Id/account with which you are running your application must have permission to delete the below directory. If you are running the java application with your account then you must have permission to delete the below directory.\r\n\r\n         /opt/appdata/conv/data/out/Job000000000676\r\n\r\n2. Add the account into the proper group. To do that first check with `ls -ltr` execute it inside `/opt/appdata/conv/data/out`  and add your account to the group which has full permission to delete directories inside `out` directory\r\n\r\n3. Also check if `Job000000000676` has sub directory inside it. In such a condition you can execute unix command like `rm -rf /opt/appdata/conv/data/out/Job000000000676`. See how to execute unix command from java application for detail.\r\n\r\nHope this will help you.","title":"Java - Delete directory - IOException: Unable to delete directory","body":"<p>You need to check the following to fix this issue:-</p>\n\n<ol>\n<li><p>User Id/account with which you are running your application must have permission to delete the below directory. If you are running the java application with your account then you must have permission to delete the below directory.</p>\n\n<pre><code> /opt/appdata/conv/data/out/Job000000000676\n</code></pre></li>\n<li><p>Add the account into the proper group. To do that first check with <code>ls -ltr</code> execute it inside <code>/opt/appdata/conv/data/out</code>  and add your account to the group which has full permission to delete directories inside <code>out</code> directory</p></li>\n<li><p>Also check if <code>Job000000000676</code> has sub directory inside it. In such a condition you can execute unix command like <code>rm -rf /opt/appdata/conv/data/out/Job000000000676</code>. See how to execute unix command from java application for detail.</p></li>\n</ol>\n\n<p>Hope this will help you.</p>\n"},{"tags":[],"owner":{"account_id":13053979,"reputation":1,"user_id":9433406,"display_name":"Prachi Katti"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1678103813,"creation_date":1678103813,"answer_id":75650576,"question_id":50532263,"body_markdown":"Pls check your disk space and keep enough space. Sometimes it is not able to perform IO tasks due to lack of space.","title":"Java - Delete directory - IOException: Unable to delete directory","body":"<p>Pls check your disk space and keep enough space. Sometimes it is not able to perform IO tasks due to lack of space.</p>\n"},{"tags":[],"owner":{"account_id":17836939,"reputation":1,"user_id":12955735,"display_name":"Ashwin Sridhar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683276722,"creation_date":1683276722,"answer_id":76180427,"question_id":50532263,"body_markdown":"In your code, check if you are opening the file at any instance before deleting, maybe you are using a buffered reader for the same.\r\nEnsure that file reader or buffered reader is closed before deleting.","title":"Java - Delete directory - IOException: Unable to delete directory","body":"<p>In your code, check if you are opening the file at any instance before deleting, maybe you are using a buffered reader for the same.\nEnsure that file reader or buffered reader is closed before deleting.</p>\n"}],"owner":{"account_id":8116262,"reputation":105,"user_id":6114667,"display_name":"Alexandre"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27421,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":50532386,"answer_count":5,"score":7,"last_activity_date":1683276722,"creation_date":1527261121,"question_id":50532263,"body_markdown":"I&#39;m trying to delete two repositories\r\n\r\n    org.apache.commons.io.FileUtils.deleteDirectory(jobInDirectory);\r\n    org.apache.commons.io.FileUtils.deleteDirectory(jobOutDirectory);\r\n\r\nPath are right\r\n\r\nRights on directory too\r\n\r\nThe first is well deleted\r\nbut not the second. Every file inside was deleted but not the directory \r\n\r\n    java.io.IOException: Unable to delete directory /opt/appdata/conv/data/out/Job000000000676.\r\n\r\nI looked to see if another process had locked it using the command `lsfo` and no other process uses it...\r\n\r\nAny idea ?","title":"Java - Delete directory - IOException: Unable to delete directory","body":"<p>I'm trying to delete two repositories</p>\n<pre><code>org.apache.commons.io.FileUtils.deleteDirectory(jobInDirectory);\norg.apache.commons.io.FileUtils.deleteDirectory(jobOutDirectory);\n</code></pre>\n<p>Path are right</p>\n<p>Rights on directory too</p>\n<p>The first is well deleted\nbut not the second. Every file inside was deleted but not the directory</p>\n<pre><code>java.io.IOException: Unable to delete directory /opt/appdata/conv/data/out/Job000000000676.\n</code></pre>\n<p>I looked to see if another process had locked it using the command <code>lsfo</code> and no other process uses it...</p>\n<p>Any idea ?</p>\n"},{"tags":["java","terminal","apt"],"comments":[{"owner":{"account_id":15641451,"reputation":49,"user_id":11284694,"display_name":"AllMightyGoat"},"score":0,"creation_date":1613679339,"post_id":66267454,"comment_id":117157561,"body_markdown":"Maybe it is getting confused with the old path of jdk. Did you delete the old the jdk or at least removed it from the path and JAVA_HOME.","body":"Maybe it is getting confused with the old path of jdk. Did you delete the old the jdk or at least removed it from the path and JAVA_HOME."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1613679746,"post_id":66267454,"comment_id":117157749,"body_markdown":"For clarity, a comment on a now-deleted answer shows that OP is trying to follow https://phoenixnap.com/kb/update-node-js-version which is a guide for linux, and the `apt` they mention is referring to debian/ubuntu package manager, not java&#39;s annotation processing tool.","body":"For clarity, a comment on a now-deleted answer shows that OP is trying to follow <a href=\"https://phoenixnap.com/kb/update-node-js-version\" rel=\"nofollow noreferrer\">phoenixnap.com/kb/update-node-js-version</a> which is a guide for linux, and the <code>apt</code> they mention is referring to debian/ubuntu package manager, not java&#39;s annotation processing tool."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":80,"is_accepted":true,"score":80,"last_activity_date":1613679691,"creation_date":1613679691,"answer_id":66267603,"question_id":66267454,"body_markdown":"20 years ago, java shipped with a tool called `apt`: Annotation Processor Tool. This tool was obsolete not much later.\r\n\r\nWhat that update-node-js-version is talking about, is __a completely and totally unrelated tool__: It&#39;s the `Advanced Package Tool`, which is a tool to manage installations __on debian and ubuntu__ - linux distros. You do not __want__ to run this on a mac, and the instructions you found are therefore completely useless: That is how to update node-js on linux. Your machine isn&#39;t linux.\r\n\r\nSearch around for answers involving `brew`, which is the go-to equivalent of `apt` on mac. And completely forget about java - this has NOTHING to do with java - that was just a pure coincidence.\r\n","title":"JDK is installed on mac but i&#39;m getting &quot;The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.&quot; sudo apt update","body":"<p>20 years ago, java shipped with a tool called <code>apt</code>: Annotation Processor Tool. This tool was obsolete not much later.</p>\n<p>What that update-node-js-version is talking about, is <strong>a completely and totally unrelated tool</strong>: It's the <code>Advanced Package Tool</code>, which is a tool to manage installations <strong>on debian and ubuntu</strong> - linux distros. You do not <strong>want</strong> to run this on a mac, and the instructions you found are therefore completely useless: That is how to update node-js on linux. Your machine isn't linux.</p>\n<p>Search around for answers involving <code>brew</code>, which is the go-to equivalent of <code>apt</code> on mac. And completely forget about java - this has NOTHING to do with java - that was just a pure coincidence.</p>\n"},{"tags":[],"owner":{"account_id":4749640,"reputation":1513,"user_id":3839980,"accept_rate":0,"display_name":"Nitin Jha"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1633760984,"creation_date":1633760984,"answer_id":69504284,"question_id":66267454,"body_markdown":"&gt; Install Homebrew on your Mac Machine\r\n\r\n    /bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;\r\n\r\n&gt; \r\n&gt; For the system Java wrappers to find this JDK, symlink it with\r\n\r\n    \r\n\r\n    sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\r\n\r\n    \r\n&gt; If you need to have openjdk first in your PATH, run:\r\n\r\n \r\n    echo &#39;export PATH=&quot;/usr/local/opt/openjdk/bin:$PATH&quot;&#39; &gt;&gt; ~/.profile\r\n\r\n&gt; For compilers to find openjdk you may need to set:\r\n\r\n \r\n\r\n     export CPPFLAGS=&quot;-I/usr/local/opt/openjdk/include&quot;\r\n\r\n\r\n","title":"JDK is installed on mac but i&#39;m getting &quot;The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.&quot; sudo apt update","body":"<blockquote>\n<p>Install Homebrew on your Mac Machine</p>\n</blockquote>\n<pre><code>/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;\n</code></pre>\n<blockquote>\n<p>For the system Java wrappers to find this JDK, symlink it with</p>\n</blockquote>\n<pre><code>sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\n</code></pre>\n<blockquote>\n<p>If you need to have openjdk first in your PATH, run:</p>\n</blockquote>\n<pre><code>echo 'export PATH=&quot;/usr/local/opt/openjdk/bin:$PATH&quot;' &gt;&gt; ~/.profile\n</code></pre>\n<blockquote>\n<p>For compilers to find openjdk you may need to set:</p>\n</blockquote>\n<pre><code> export CPPFLAGS=&quot;-I/usr/local/opt/openjdk/include&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6555535,"reputation":1356,"user_id":5068349,"display_name":"Bharat Lalwani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656412680,"creation_date":1656412680,"answer_id":72784946,"question_id":66267454,"body_markdown":"The below commands worked for me.\r\n\r\nFirst, install the homebrew\r\n\r\n**`/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;   `**\r\n\r\nThen set the Android Studio Java path to the Home(If you have Android Studio). If not then you take the respective Java path &amp; export it to the JAVA Home path.\r\n\r\n**`export JAVA_HOME=/Applications/Android\\ Studio.app/Contents/jre/Contents/Home`**","title":"JDK is installed on mac but i&#39;m getting &quot;The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.&quot; sudo apt update","body":"<p>The below commands worked for me.</p>\n<p>First, install the homebrew</p>\n<p><strong><code>/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;   </code></strong></p>\n<p>Then set the Android Studio Java path to the Home(If you have Android Studio). If not then you take the respective Java path &amp; export it to the JAVA Home path.</p>\n<p><strong><code>export JAVA_HOME=/Applications/Android\\ Studio.app/Contents/jre/Contents/Home</code></strong></p>\n"},{"tags":[],"owner":{"account_id":13849998,"reputation":111,"user_id":9998155,"display_name":"zhxh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683276657,"creation_date":1683276657,"answer_id":76180419,"question_id":66267454,"body_markdown":"Use brew instead of sudo apt, if you&#39;re using Mac.","title":"JDK is installed on mac but i&#39;m getting &quot;The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.&quot; sudo apt update","body":"<p>Use brew instead of sudo apt, if you're using Mac.</p>\n"}],"owner":{"account_id":10548144,"reputation":690,"user_id":9781768,"display_name":"User9123"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91009,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":66267603,"answer_count":4,"score":27,"last_activity_date":1683276657,"creation_date":1613678948,"question_id":66267454,"body_markdown":"I&#39;m trying to run the command `sudo apt update` on my terminal in MacOS\r\n\r\nI&#39;m getting this message in response: `The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.\r\nPlease visit http://www.java.com for information on installing Java.`\r\n\r\nI saw a similar question [here][1], however even though I made sure to install the JDK like the solution suggested I&#39;m still getting the same response.\r\n\r\nI also tried pasting \r\n\r\n    export PATH=&quot;$HOME/.jenv/bin:$PATH&quot;\r\n    eval &quot;$(jenv init -)&quot;\r\n    export JAVA_HOME=&quot;$HOME/.jenv/versions/`jenv version-name`&quot;\r\n\r\nInto my .zshrc.save folder and had no luck. \r\n\r\nWhen I run `java -version` in the terminal this is what I get back:\r\n\r\n    java version &quot;15.0.2&quot; 2021-01-19\r\n    Java(TM) SE Runtime Environment (build 15.0.2+7-27)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 15.0.2+7-27, mixed mode, sharing)\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/44009058/even-though-jre-8-is-installed-on-my-mac-no-java-runtime-present-requesting-t","title":"JDK is installed on mac but i&#39;m getting &quot;The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.&quot; sudo apt update","body":"<p>I'm trying to run the command <code>sudo apt update</code> on my terminal in MacOS</p>\n<p>I'm getting this message in response: <code>The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt. Please visit http://www.java.com for information on installing Java.</code></p>\n<p>I saw a similar question <a href=\"https://stackoverflow.com/questions/44009058/even-though-jre-8-is-installed-on-my-mac-no-java-runtime-present-requesting-t\">here</a>, however even though I made sure to install the JDK like the solution suggested I'm still getting the same response.</p>\n<p>I also tried pasting</p>\n<pre><code>export PATH=&quot;$HOME/.jenv/bin:$PATH&quot;\neval &quot;$(jenv init -)&quot;\nexport JAVA_HOME=&quot;$HOME/.jenv/versions/`jenv version-name`&quot;\n</code></pre>\n<p>Into my .zshrc.save folder and had no luck.</p>\n<p>When I run <code>java -version</code> in the terminal this is what I get back:</p>\n<pre><code>java version &quot;15.0.2&quot; 2021-01-19\nJava(TM) SE Runtime Environment (build 15.0.2+7-27)\nJava HotSpot(TM) 64-Bit Server VM (build 15.0.2+7-27, mixed mode, sharing)\n</code></pre>\n"},{"tags":["java","android","android-room","android-room-relation"],"comments":[{"owner":{"account_id":7495697,"reputation":1501,"user_id":5696047,"display_name":"jayesh gurudayalani"},"score":0,"creation_date":1683277807,"post_id":76180374,"comment_id":134345462,"body_markdown":"Can you add stack trace ?","body":"Can you add stack trace ?"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1683277905,"post_id":76180374,"comment_id":134345480,"body_markdown":"I think there is not necessarily a stack trace as the question is about `realization.getButton()` _returning_ `null` and not specifically a NPE.","body":"I think there is not necessarily a stack trace as the question is about <code>realization.getButton()</code> <i>returning</i> <code>null</code> and not specifically a NPE."},{"owner":{"account_id":3567986,"reputation":392,"user_id":2979045,"display_name":"fshdn19"},"score":0,"creation_date":1683279304,"post_id":76180374,"comment_id":134345764,"body_markdown":"Because your `Var2` table has no records, as I see, you did not insert any records into it. So your `UPDATE` query affects 0 rows. That why your button is `null`.","body":"Because your <code>Var2</code> table has no records, as I see, you did not insert any records into it. So your <code>UPDATE</code> query affects 0 rows. That why your button is <code>null</code>."}],"owner":{"account_id":27546786,"reputation":1,"user_id":21022592,"display_name":"Dmytro Bilash"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683276383,"creation_date":1683276383,"question_id":76180374,"body_markdown":"My task is to implement Kmap solver. I want to store state of the buttons in Room database but i faced with problem. The function getButton() in realization returns me null instead of my data \r\n\r\n```\r\n@ColumnInfo(name = &quot;buttons&quot;)\r\n```\r\n\r\n.\r\nI create the row with 0001. I will devide it as a text for each button. btn0 -\\&gt; 0, btn1 -\\&gt;0, btn2... btn3-\\&gt;1 end so on. When i will click on the button i will update the row in db.\r\n\r\nMy dao file is\r\n\r\n```\r\nimport androidx.room.Query;\r\n\r\n\r\n@androidx.room.Dao\r\npublic interface Dao {\r\n\r\n    @Query(&quot;SELECT * FROM Var2&quot;)\r\n    Var2 getButtons();\r\n\r\n    @Query(&quot;Update Var2 SET buttons = :buttons&quot;)\r\n    void setButtons(String buttons);\r\n}\r\n```\r\n\r\nMy Database\r\n\r\n```\r\n@Database(entities = {Var2.class}, version = 2)\r\npublic abstract class KmapDatabase extends RoomDatabase {\r\n    private static KmapDatabase INSTANCE;\r\n    private static final String DB_NAME = &quot;Kmap&quot;;\r\n\r\n    public abstract Dao table2Dao();\r\n\r\n    public static synchronized KmapDatabase getDatabase(Context context) {\r\n        if (INSTANCE == null) {\r\n            INSTANCE = Room.databaseBuilder(context.getApplicationContext(),\r\n                    KmapDatabase.class, DB_NAME)\r\n                    .fallbackToDestructiveMigration()\r\n                    .allowMainThreadQueries()\r\n                    .build();\r\n        }\r\n        return INSTANCE;\r\n    }\r\n}\r\n```\r\n\r\nRealisation is \r\n```\r\n\r\npublic class Realization implements Repository{\r\n    private Dao dao;\r\n\r\n    public Realization(Dao dao) {\r\n        this.dao = dao;\r\n    }\r\n    \r\n    @Override\r\n    public String getButton() {\r\n        return dao.getButtons().getButtons();\r\n    }\r\n    \r\n    @Override\r\n    public void setButton(String buttons, Runnable onSuccess) {\r\n        dao.setButtons(buttons);\r\n        onSuccess.run();\r\n    }\r\n\r\n}\r\n```\r\nRepository \r\n```\r\npublic interface Repository {\r\n    String getButton();\r\n    void setButton(String buttons, Runnable onSuccess);\r\n}\r\n```\r\n\r\nVar2 (entity)\r\n```\r\n\r\n@Entity(tableName = &quot;Var2&quot;)\r\npublic class Var2 {\r\n\r\n    @PrimaryKey(autoGenerate = true)\r\n    private int id;\r\n    \r\n    @ColumnInfo(name = &quot;buttons&quot;)\r\n    private String buttons = &quot;0001&quot;;\r\n    \r\n    public int getId() {\r\n        return id;\r\n    }\r\n    \r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n    \r\n    public String getButtons() {\r\n        return buttons;\r\n    }\r\n    \r\n    public void setButtons(String buttons) {\r\n        this.buttons = buttons;\r\n    }\r\n\r\n}\r\n\r\n```\r\nMy activity \r\n```\r\n\r\npublic class Map2x2 extends AppCompatActivity implements View.OnClickListener {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_map2x2);\r\n        KmapDatabase db = KmapDatabase.getDatabase(getApplicationContext());\r\n        Dao dao = db.table2Dao();\r\n        Realization realization = new Realization(dao);\r\n        realization.setButton(&quot;1111&quot;, () -&gt; {\r\n            runOnUiThread(() -&gt; {\r\n                Toast.makeText(this, &quot;Button value saved&quot;, Toast.LENGTH_SHORT).show();\r\n            });\r\n        });\r\n        String value = realization.getButton();//THIS IS NULL\r\n        Log.v(&quot;1&quot;, value);\r\n    }\r\n\r\n```\r\n\r\nI change a lot of variations but nothing works.\r\n","title":"Room getter returning null","body":"<p>My task is to implement Kmap solver. I want to store state of the buttons in Room database but i faced with problem. The function getButton() in realization returns me null instead of my data</p>\n<pre><code>@ColumnInfo(name = &quot;buttons&quot;)\n</code></pre>\n<p>.\nI create the row with 0001. I will devide it as a text for each button. btn0 -&gt; 0, btn1 -&gt;0, btn2... btn3-&gt;1 end so on. When i will click on the button i will update the row in db.</p>\n<p>My dao file is</p>\n<pre><code>import androidx.room.Query;\n\n\n@androidx.room.Dao\npublic interface Dao {\n\n    @Query(&quot;SELECT * FROM Var2&quot;)\n    Var2 getButtons();\n\n    @Query(&quot;Update Var2 SET buttons = :buttons&quot;)\n    void setButtons(String buttons);\n}\n</code></pre>\n<p>My Database</p>\n<pre><code>@Database(entities = {Var2.class}, version = 2)\npublic abstract class KmapDatabase extends RoomDatabase {\n    private static KmapDatabase INSTANCE;\n    private static final String DB_NAME = &quot;Kmap&quot;;\n\n    public abstract Dao table2Dao();\n\n    public static synchronized KmapDatabase getDatabase(Context context) {\n        if (INSTANCE == null) {\n            INSTANCE = Room.databaseBuilder(context.getApplicationContext(),\n                    KmapDatabase.class, DB_NAME)\n                    .fallbackToDestructiveMigration()\n                    .allowMainThreadQueries()\n                    .build();\n        }\n        return INSTANCE;\n    }\n}\n</code></pre>\n<p>Realisation is</p>\n<pre><code>\npublic class Realization implements Repository{\n    private Dao dao;\n\n    public Realization(Dao dao) {\n        this.dao = dao;\n    }\n    \n    @Override\n    public String getButton() {\n        return dao.getButtons().getButtons();\n    }\n    \n    @Override\n    public void setButton(String buttons, Runnable onSuccess) {\n        dao.setButtons(buttons);\n        onSuccess.run();\n    }\n\n}\n</code></pre>\n<p>Repository</p>\n<pre><code>public interface Repository {\n    String getButton();\n    void setButton(String buttons, Runnable onSuccess);\n}\n</code></pre>\n<p>Var2 (entity)</p>\n<pre><code>\n@Entity(tableName = &quot;Var2&quot;)\npublic class Var2 {\n\n    @PrimaryKey(autoGenerate = true)\n    private int id;\n    \n    @ColumnInfo(name = &quot;buttons&quot;)\n    private String buttons = &quot;0001&quot;;\n    \n    public int getId() {\n        return id;\n    }\n    \n    public void setId(int id) {\n        this.id = id;\n    }\n    \n    public String getButtons() {\n        return buttons;\n    }\n    \n    public void setButtons(String buttons) {\n        this.buttons = buttons;\n    }\n\n}\n\n</code></pre>\n<p>My activity</p>\n<pre><code>\npublic class Map2x2 extends AppCompatActivity implements View.OnClickListener {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_map2x2);\n        KmapDatabase db = KmapDatabase.getDatabase(getApplicationContext());\n        Dao dao = db.table2Dao();\n        Realization realization = new Realization(dao);\n        realization.setButton(&quot;1111&quot;, () -&gt; {\n            runOnUiThread(() -&gt; {\n                Toast.makeText(this, &quot;Button value saved&quot;, Toast.LENGTH_SHORT).show();\n            });\n        });\n        String value = realization.getButton();//THIS IS NULL\n        Log.v(&quot;1&quot;, value);\n    }\n\n</code></pre>\n<p>I change a lot of variations but nothing works.</p>\n"},{"tags":["java","android","kotlin","openssl","inputstream"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1683305235,"post_id":76179836,"comment_id":134351822,"body_markdown":"The external storage directory `/sdcard` alias `/storage/emulated/0` is AFAIK mounted with no-execute restriction. So saving openssl binary there and trying to execute will not work. The app-private dir should also be restricted because the write xor execute restriction. So you could test `/data/local` or `/data/local/tmp`.","body":"The external storage directory <code>&#47;sdcard</code> alias <code>&#47;storage&#47;emulated&#47;0</code> is AFAIK mounted with no-execute restriction. So saving openssl binary there and trying to execute will not work. The app-private dir should also be restricted because the write xor execute restriction. So you could test <code>&#47;data&#47;local</code> or <code>&#47;data&#47;local&#47;tmp</code>."},{"owner":{"account_id":2168732,"reputation":6884,"user_id":1921263,"accept_rate":61,"display_name":"Shadow"},"score":0,"creation_date":1683604430,"post_id":76179836,"comment_id":134388143,"body_markdown":"Still I am getting the same error, even after trying this path.","body":"Still I am getting the same error, even after trying this path."}],"owner":{"account_id":2168732,"reputation":6884,"user_id":1921263,"accept_rate":61,"display_name":"Shadow"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683276325,"creation_date":1683272286,"question_id":76179836,"body_markdown":"I need to run a OpenSSL command programatically in android, but it throws the following error:\r\n\r\n&quot;Cannot run program &quot;openssl&quot;: error=2, No such file or directory&quot;\r\n\r\nHere&#39;s my code:\r\n\r\n \r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @SuppressLint(&quot;MissingInflatedId&quot;)\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n       executeSH(&quot;openssl ecparam -name prime256v1 -genkey -noout -out prime-private-key.pem&quot;,true);\r\n    \r\n    }\r\n      private String executeSH(String command, boolean waitFor) throws IOException, InterruptedException {\r\n            Process process = null;\r\n            InputStream inputStream = null;\r\n            InputStreamReader inputStreamReader = null;\r\n            BufferedReader bufferedReader = null;\r\n            String line, output = &quot;&quot;;\r\n            try {\r\n                Runtime runtime = Runtime.getRuntime();\r\n                process = runtime.exec(command);\r\n                inputStream = process.getInputStream();\r\n                inputStreamReader = new InputStreamReader(inputStream);\r\n                bufferedReader = new BufferedReader(inputStreamReader);\r\n    \r\n                while ((line = bufferedReader.readLine()) != null) {\r\n                    output += line;\r\n                    File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS);\r\n                    File newDir = new File(path + &quot;/&quot; + &quot;a.txt&quot;);\r\n                    if (!newDir.exists()) {\r\n                        newDir.mkdir();\r\n                    }\r\n                    FileOutputStream writer = new FileOutputStream(new File(path, &quot;a.txt&quot;));\r\n                    writer.write(output.getBytes());\r\n                    writer.close();\r\n                    Log.e(&quot;TAG&quot;, &quot;Wrote to file: &quot; + &quot;a.txt&quot;);\r\n                }\r\n                    if (waitFor) {\r\n                        process.waitFor();\r\n                    }\r\n                    return output;\r\n                }\r\n            finally {\r\n                if (bufferedReader != null) bufferedReader.close();\r\n                if (inputStreamReader != null) inputStreamReader.close();\r\n                if (inputStream != null) inputStream.close();\r\n                if (process != null) process.destroy();\r\n            }\r\n        }\r\n\r\nMaybe someone can help me solve this question.\r\n","title":"How to execute OpenSSL command in android?","body":"<p>I need to run a OpenSSL command programatically in android, but it throws the following error:</p>\n<p>&quot;Cannot run program &quot;openssl&quot;: error=2, No such file or directory&quot;</p>\n<p>Here's my code:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    @SuppressLint(&quot;MissingInflatedId&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n   executeSH(&quot;openssl ecparam -name prime256v1 -genkey -noout -out prime-private-key.pem&quot;,true);\n\n}\n  private String executeSH(String command, boolean waitFor) throws IOException, InterruptedException {\n        Process process = null;\n        InputStream inputStream = null;\n        InputStreamReader inputStreamReader = null;\n        BufferedReader bufferedReader = null;\n        String line, output = &quot;&quot;;\n        try {\n            Runtime runtime = Runtime.getRuntime();\n            process = runtime.exec(command);\n            inputStream = process.getInputStream();\n            inputStreamReader = new InputStreamReader(inputStream);\n            bufferedReader = new BufferedReader(inputStreamReader);\n\n            while ((line = bufferedReader.readLine()) != null) {\n                output += line;\n                File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS);\n                File newDir = new File(path + &quot;/&quot; + &quot;a.txt&quot;);\n                if (!newDir.exists()) {\n                    newDir.mkdir();\n                }\n                FileOutputStream writer = new FileOutputStream(new File(path, &quot;a.txt&quot;));\n                writer.write(output.getBytes());\n                writer.close();\n                Log.e(&quot;TAG&quot;, &quot;Wrote to file: &quot; + &quot;a.txt&quot;);\n            }\n                if (waitFor) {\n                    process.waitFor();\n                }\n                return output;\n            }\n        finally {\n            if (bufferedReader != null) bufferedReader.close();\n            if (inputStreamReader != null) inputStreamReader.close();\n            if (inputStream != null) inputStream.close();\n            if (process != null) process.destroy();\n        }\n    }\n</code></pre>\n<p>Maybe someone can help me solve this question.</p>\n"},{"tags":["java","eclipse","data-structures","binary-tree"],"comments":[{"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"score":3,"creation_date":1683267791,"post_id":76179307,"comment_id":134343506,"body_markdown":"what is the error you are getting? could you paste the whole stacktrace?","body":"what is the error you are getting? could you paste the whole stacktrace?"},{"owner":{"account_id":11180480,"reputation":7021,"user_id":8207228,"display_name":"Ralf Kleberhoff"},"score":2,"creation_date":1683269549,"post_id":76179307,"comment_id":134343803,"body_markdown":"In your edit, you changed the source code (from `package binaryTree;` to `package binary tree;`. But `package binary tree;` is a syntax error, spaces in package names are not allowed. So, which version is the source code you are really using? Please, be exact with your questions, as machines also don&#39;t tolerate even &quot;minor&quot; deviations.","body":"In your edit, you changed the source code (from <code>package binaryTree;</code> to <code>package binary tree;</code>. But <code>package binary tree;</code> is a syntax error, spaces in package names are not allowed. So, which version is the source code you are really using? Please, be exact with your questions, as machines also don&#39;t tolerate even &quot;minor&quot; deviations."}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683275640,"creation_date":1683275640,"answer_id":76180287,"question_id":76179307,"body_markdown":"Besides the syntax error in `package binary tree` (it should be a single name, not two), you have a mix up of static and instance members. First your `run` function will populate the *static* `root` member. But then you create an *instance* with `new BinarySearchTree` and its constructor **clears** the static `root` variable! So now you have lost your input.\r\n\r\nCorrections to make:\r\n\r\n* `root` should be an *instance* variable\r\n* `insert` should be an *instance* method\r\n* The `bst` instance should be created *before* calling `insert`, and those `insert` calls should be on that instance. For this reason it may be more appropriate to not have a `run` function, but move that code into `main`.\r\n\r\nCorrected class:\r\n\r\n```\r\npublic class BinarySearchTree {\r\n\r\n    private Node root; // Remove static. Should be member of instance\r\n\r\n    BinarySearchTree() {\r\n        root = null;\r\n    }\r\n\r\n    static class Node {\r\n        int value;\r\n        Node left;\r\n        Node right;\r\n\r\n        public Node(int value) {\r\n            this.value = value;\r\n        }\r\n\r\n        public void display() {\r\n            System.out.print(value + &quot; &quot;);\r\n        }\r\n    }\r\n\r\n    public void insert(int value) { // Remove static. Is instance method\r\n        root = insert(root, value);\r\n    }\r\n\r\n    public Node insert(Node node, int value) { // Remove static. Should be instance method\r\n        if (node == null) {\r\n            node = new Node(value);\r\n        } else if (value &lt; node.value) {\r\n            node.left = insert(node.left, value);\r\n        } else if (value &gt; node.value) {\r\n            node.right = insert(node.right, value);\r\n        }\r\n        return node;\r\n    }\r\n\r\n    public void inOrder(Node node) {\r\n        if (node != null) {\r\n            inOrder(node.left);\r\n            node.display();\r\n            inOrder(node.right);\r\n        }\r\n    }\r\n\r\n    public void inOrder() { // Overload so you don&#39;t have to pass obvious argument\r\n        inOrder(root); // Provide root of the instance\r\n    }\r\n\r\n    public static void main(String args[]) {\r\n        BinarySearchTree bst = new BinarySearchTree(); // First create the BST instance\r\n        // Then get the input\r\n        System.out.println(&quot;Enter number of nodes: &quot;);\r\n        Scanner scan = new Scanner(System.in);\r\n        int nodeSize = scan.nextInt();\r\n        int nodeValue;\r\n        System.out.println(&quot;Enter Node Values: &quot;);\r\n        for (int i = 0; i &lt; nodeSize; i++) {\r\n            nodeValue = scan.nextInt();\r\n            bst.insert(nodeValue); // Insert in the BST instance\r\n        }\r\n        scan.close();\r\n        bst.inOrder(); // Call overloaded method\r\n    }\r\n\r\n}\r\n```","title":"Java Binary tree code throws error but I couldn&#39;t find what is the error","body":"<p>Besides the syntax error in <code>package binary tree</code> (it should be a single name, not two), you have a mix up of static and instance members. First your <code>run</code> function will populate the <em>static</em> <code>root</code> member. But then you create an <em>instance</em> with <code>new BinarySearchTree</code> and its constructor <strong>clears</strong> the static <code>root</code> variable! So now you have lost your input.</p>\n<p>Corrections to make:</p>\n<ul>\n<li><code>root</code> should be an <em>instance</em> variable</li>\n<li><code>insert</code> should be an <em>instance</em> method</li>\n<li>The <code>bst</code> instance should be created <em>before</em> calling <code>insert</code>, and those <code>insert</code> calls should be on that instance. For this reason it may be more appropriate to not have a <code>run</code> function, but move that code into <code>main</code>.</li>\n</ul>\n<p>Corrected class:</p>\n<pre><code>public class BinarySearchTree {\n\n    private Node root; // Remove static. Should be member of instance\n\n    BinarySearchTree() {\n        root = null;\n    }\n\n    static class Node {\n        int value;\n        Node left;\n        Node right;\n\n        public Node(int value) {\n            this.value = value;\n        }\n\n        public void display() {\n            System.out.print(value + &quot; &quot;);\n        }\n    }\n\n    public void insert(int value) { // Remove static. Is instance method\n        root = insert(root, value);\n    }\n\n    public Node insert(Node node, int value) { // Remove static. Should be instance method\n        if (node == null) {\n            node = new Node(value);\n        } else if (value &lt; node.value) {\n            node.left = insert(node.left, value);\n        } else if (value &gt; node.value) {\n            node.right = insert(node.right, value);\n        }\n        return node;\n    }\n\n    public void inOrder(Node node) {\n        if (node != null) {\n            inOrder(node.left);\n            node.display();\n            inOrder(node.right);\n        }\n    }\n\n    public void inOrder() { // Overload so you don't have to pass obvious argument\n        inOrder(root); // Provide root of the instance\n    }\n\n    public static void main(String args[]) {\n        BinarySearchTree bst = new BinarySearchTree(); // First create the BST instance\n        // Then get the input\n        System.out.println(&quot;Enter number of nodes: &quot;);\n        Scanner scan = new Scanner(System.in);\n        int nodeSize = scan.nextInt();\n        int nodeValue;\n        System.out.println(&quot;Enter Node Values: &quot;);\n        for (int i = 0; i &lt; nodeSize; i++) {\n            nodeValue = scan.nextInt();\n            bst.insert(nodeValue); // Insert in the BST instance\n        }\n        scan.close();\n        bst.inOrder(); // Call overloaded method\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":26216291,"reputation":3,"user_id":19894385,"display_name":"newton"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76180287,"answer_count":1,"score":-1,"last_activity_date":1683275640,"creation_date":1683267647,"question_id":76179307,"body_markdown":"I&#39;m a beginner in Java and data structures and I&#39;ve been trying to implement a binary search tree. I have written a code but it throws some error and I can&#39;t find it\r\nI know this is a blatant question but I really need help with this so I can continue my learning process\r\n\r\n```\r\npackage binary tree;\r\nimport java.util.Scanner;\r\n\r\npublic class BinarySearchTree {\r\n\r\n    private static Node root;\r\n\r\n    BinarySearchTree() {\r\n        root = null;\r\n    }\r\n\r\n    static class Node {\r\n        int value;\r\n        Node left;\r\n        Node right;\r\n\r\n        public Node(int value) {\r\n            this.value = value;\r\n        }\r\n\r\n        public void display() {\r\n            System.out.print(value + &quot; &quot;);\r\n        }\r\n    }\r\n\r\n    public static void insert(int value) {\r\n        root = insert(root, value);\r\n    }\r\n\r\n    public static Node insert(Node node, int value) {\r\n        if (node == null) {\r\n            node = new Node(value);\r\n        } else if (value &lt; node.value) {\r\n            node.left = insert(node.left, value);\r\n        } else if (value &gt; node.value) {\r\n            node.right = insert(node.right, value);\r\n        }\r\n        return node;\r\n    }\r\n\r\n    public static void run() {\r\n        Scanner scan = new Scanner(System.in);\r\n        int nodeSize = scan.nextInt();\r\n        int nodeValue;\r\n        System.out.println(&quot;Enter Node Values:&quot;);\r\n        for (int i = 0; i &lt; nodeSize; i++) {\r\n            nodeValue = scan.nextInt();\r\n            insert(nodeValue);\r\n        }\r\n        scan.close();\r\n    }\r\n\r\n    public void inOrder(Node node) {\r\n        if (node != null) {\r\n            inOrder(node.left);\r\n            node.display();\r\n            inOrder(node.right);\r\n        }\r\n    }\r\n\r\n    public static void main(String args[]) {\r\n        run();\r\n        BinarySearchTree bst = new BinarySearchTree();\r\n        bst.inOrder(root);\r\n    }\r\n\r\n}\r\n```\r\n\r\nI tried to create a node as a binary tree and getting input from the user and display it in inOrder traversal but the code gets only the size of the node and input but does not print any output","title":"Java Binary tree code throws error but I couldn&#39;t find what is the error","body":"<p>I'm a beginner in Java and data structures and I've been trying to implement a binary search tree. I have written a code but it throws some error and I can't find it\nI know this is a blatant question but I really need help with this so I can continue my learning process</p>\n<pre><code>package binary tree;\nimport java.util.Scanner;\n\npublic class BinarySearchTree {\n\n    private static Node root;\n\n    BinarySearchTree() {\n        root = null;\n    }\n\n    static class Node {\n        int value;\n        Node left;\n        Node right;\n\n        public Node(int value) {\n            this.value = value;\n        }\n\n        public void display() {\n            System.out.print(value + &quot; &quot;);\n        }\n    }\n\n    public static void insert(int value) {\n        root = insert(root, value);\n    }\n\n    public static Node insert(Node node, int value) {\n        if (node == null) {\n            node = new Node(value);\n        } else if (value &lt; node.value) {\n            node.left = insert(node.left, value);\n        } else if (value &gt; node.value) {\n            node.right = insert(node.right, value);\n        }\n        return node;\n    }\n\n    public static void run() {\n        Scanner scan = new Scanner(System.in);\n        int nodeSize = scan.nextInt();\n        int nodeValue;\n        System.out.println(&quot;Enter Node Values:&quot;);\n        for (int i = 0; i &lt; nodeSize; i++) {\n            nodeValue = scan.nextInt();\n            insert(nodeValue);\n        }\n        scan.close();\n    }\n\n    public void inOrder(Node node) {\n        if (node != null) {\n            inOrder(node.left);\n            node.display();\n            inOrder(node.right);\n        }\n    }\n\n    public static void main(String args[]) {\n        run();\n        BinarySearchTree bst = new BinarySearchTree();\n        bst.inOrder(root);\n    }\n\n}\n</code></pre>\n<p>I tried to create a node as a binary tree and getting input from the user and display it in inOrder traversal but the code gets only the size of the node and input but does not print any output</p>\n"},{"tags":["java","servlets"],"owner":{"account_id":28514100,"reputation":1,"user_id":21823677,"display_name":"Fred29"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683275388,"creation_date":1683275388,"question_id":76180249,"body_markdown":"I am working on a project migration from old java web project :\r\n- java 1.5 to 1.8\r\n- tomcat 5 to tomcat 7\r\n- eclipse 3 to 2021-09\r\nThe project is pretty simple (no maven, servlet-api.jar, jsp-api.jar).\r\nThe project is starting but when I&#39;m calling a page I have a validation error : \r\n\r\n```\r\nGRAVE: PUBLIC ID invalide: http://java.sun.com/xml/ns/javaee\r\nmai 05, 2023 10:11:47 AM org.apache.catalina.core.ApplicationDispatcher invoke\r\nGRAVE: &quot;Servlet.service()&quot; pour la servlet jsp a lanc&#233; une exception\r\norg.xml.sax.SAXException: schema error: error reading schema document: http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd.\r\n\tat org.apache.xerces.parsers.DOMParser.parse(DOMParser.java:218)\r\n\tat org.apache.xerces.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:224)\r\n\tat org.apache.jasper.xmlparser.ParserUtils.parseXMLDocument(ParserUtils.java:96)\r\n\tat org.apache.jasper.compiler.JspConfig.processWebDotXml(JspConfig.java:83)\r\n\tat org.apache.jasper.compiler.JspConfig.init(JspConfig.java:231)\r\n\tat org.apache.jasper.compiler.JspConfig.findJspProperty(JspConfig.java:290)\r\n\tat org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:114)\r\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)\r\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)\r\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)\r\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)\r\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)\r\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)\r\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)\r\n\tat com.casino.pdc.servlet.Demarrage.jspAppeler(Demarrage.java:64)\r\n\tat com.casino.pdc.servlet.Demarrage.tacheTraiter(Demarrage.java:83)\r\n\tat com.casino.fwk.tools.HttpServletGenerique.doPost(HttpServletGenerique.java:245)\r\n\tat com.casino.fwk.tools.HttpServletGenerique.doGet(HttpServletGenerique.java:141)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:621)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\r\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:953)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\r\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1041)\r\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:603)\r\n\tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\nI can&#39;t figure out why the validation is based on web-app_3_0.xsd but in my web.xml, I put : \r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;web-app xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; id=&quot;WebApp&quot; version=&quot;2.4&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;\r\n```\r\n\r\nAny suggestions?\r\n\r\nThank you in advance.\r\n\r\nI tried to change the web.xml web-app tag and put &quot;http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; as schema but it changed nothing.","title":"SAXParseException, failed to read schema document web-app_3_0.xsd","body":"<p>I am working on a project migration from old java web project :</p>\n<ul>\n<li>java 1.5 to 1.8</li>\n<li>tomcat 5 to tomcat 7</li>\n<li>eclipse 3 to 2021-09\nThe project is pretty simple (no maven, servlet-api.jar, jsp-api.jar).\nThe project is starting but when I'm calling a page I have a validation error :</li>\n</ul>\n<pre><code>GRAVE: PUBLIC ID invalide: http://java.sun.com/xml/ns/javaee\nmai 05, 2023 10:11:47 AM org.apache.catalina.core.ApplicationDispatcher invoke\nGRAVE: &quot;Servlet.service()&quot; pour la servlet jsp a lancé une exception\norg.xml.sax.SAXException: schema error: error reading schema document: http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd.\n    at org.apache.xerces.parsers.DOMParser.parse(DOMParser.java:218)\n    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:224)\n    at org.apache.jasper.xmlparser.ParserUtils.parseXMLDocument(ParserUtils.java:96)\n    at org.apache.jasper.compiler.JspConfig.processWebDotXml(JspConfig.java:83)\n    at org.apache.jasper.compiler.JspConfig.init(JspConfig.java:231)\n    at org.apache.jasper.compiler.JspConfig.findJspProperty(JspConfig.java:290)\n    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:114)\n    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)\n    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)\n    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)\n    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)\n    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)\n    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)\n    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)\n    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)\n    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)\n    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)\n    at com.casino.pdc.servlet.Demarrage.jspAppeler(Demarrage.java:64)\n    at com.casino.pdc.servlet.Demarrage.tacheTraiter(Demarrage.java:83)\n    at com.casino.fwk.tools.HttpServletGenerique.doPost(HttpServletGenerique.java:245)\n    at com.casino.fwk.tools.HttpServletGenerique.doGet(HttpServletGenerique.java:141)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\n    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:953)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1041)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:603)\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<p>I can't figure out why the validation is based on web-app_3_0.xsd but in my web.xml, I put :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; id=&quot;WebApp&quot; version=&quot;2.4&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;\n</code></pre>\n<p>Any suggestions?</p>\n<p>Thank you in advance.</p>\n<p>I tried to change the web.xml web-app tag and put &quot;http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; as schema but it changed nothing.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9538,"page":454,"page_size":100}
