{"items":[{"tags":["java","loops","random","while-loop"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1672291027,"post_id":74947492,"comment_id":132259537,"body_markdown":"Call `nextInt` inside your loop instead of outside it.","body":"Call <code>nextInt</code> inside your loop instead of outside it."}],"answers":[{"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1672291771,"post_id":74947573,"comment_id":132259675,"body_markdown":"There&#39;s no point in creating a new instance of `Random` every time you want a random number.","body":"There&#39;s no point in creating a new instance of <code>Random</code> every time you want a random number."},{"owner":{"account_id":21521055,"reputation":409,"user_id":15862198,"display_name":"Utkarsh Sahu"},"score":0,"creation_date":1672292113,"post_id":74947573,"comment_id":132259723,"body_markdown":"So you can make an instance outside the loop and then call the function nextInt() in the loop...","body":"So you can make an instance outside the loop and then call the function nextInt() in the loop..."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1672311738,"post_id":74947573,"comment_id":132264237,"body_markdown":"Please [edit] the answer if you agree with the statement. It is a basic question; for beginners the answer should adhere to good code practices.","body":"Please <a href=\"https://stackoverflow.com/posts/74947573/edit\">edit</a> the answer if you agree with the statement. It is a basic question; for beginners the answer should adhere to good code practices."}],"tags":[],"owner":{"account_id":21521055,"reputation":409,"user_id":15862198,"display_name":"Utkarsh Sahu"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672388421,"creation_date":1672291586,"answer_id":74947573,"question_id":74947492,"body_markdown":"Basically you need a new random number at every iteration. So, you should place the random statement within the loop. Then only it will make new random numbers every iteration.\r\n\r\nDefine int r outside the loop. Then move the statement from outside the loop to inside the loop.\r\n\r\n    r = new java.util.Random().nextInt(30);\r\n    fists.damage = r;\r\n\r\nor you can make an instance of Random outside the loop like this:\r\n\r\n    java.util.Random obj = new java.util.Random();\r\nand call the method `nextInt(30)` inside the loop like\r\n\r\n    r = obj.nextInt(30);\r\n\r\nThis is just a better way to write a program. Both will work but the second one is a better programming practice as suggested by @tgdavies and @Maarten Bodewes","title":"Java while loop random number","body":"<p>Basically you need a new random number at every iteration. So, you should place the random statement within the loop. Then only it will make new random numbers every iteration.</p>\n<p>Define int r outside the loop. Then move the statement from outside the loop to inside the loop.</p>\n<pre><code>r = new java.util.Random().nextInt(30);\nfists.damage = r;\n</code></pre>\n<p>or you can make an instance of Random outside the loop like this:</p>\n<pre><code>java.util.Random obj = new java.util.Random();\n</code></pre>\n<p>and call the method <code>nextInt(30)</code> inside the loop like</p>\n<pre><code>r = obj.nextInt(30);\n</code></pre>\n<p>This is just a better way to write a program. Both will work but the second one is a better programming practice as suggested by @tgdavies and @Maarten Bodewes</p>\n"}],"owner":{"account_id":27379470,"reputation":3,"user_id":20884272,"display_name":"wdwad dwad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672388421,"creation_date":1672290804,"question_id":74947492,"body_markdown":"i&#39;m new to Java and I am trying to code a little &quot;fighting game&quot; (more random than fight actually). I want each punch to have a random number of damages between 0 and 30. The problem is, the first number randomly sorted will be used until the end (if it&#39;s 12, both fighters will punch at 12 damages every turn until Player 1 wins). How can I generate a different random number at every iteration of the loop until there&#39;s a winner ? \r\n\r\n\r\n```\r\npackage jeu_propre;\r\n\r\npublic class main {\r\n\tpublic static void main(String[] args){\r\n\t\tSystem.out.println(&quot;Player 1, choose your name : &quot;);\r\n\t\tString nom_pone= new java.util.Scanner(System.in).nextLine();\r\n\t\tSystem.out.println(&quot;Player 2, choose your name : &quot;);\r\n\t\tString nom_ptwo= new java.util.Scanner(System.in).nextLine();\r\n\t\t\t\t\t\t\r\n\t\tint r=new java.util.Random().nextInt(30);\r\n\t\t\r\n\t\tweapons fists = new weapons();\r\n\t\tfists.name=&quot;fists&quot;;\r\n\t\tfists.damage = r;\r\n\t\t\r\n\t\t\r\n\t\tplayer number_one = new player();\r\n\t\tnumber_one.name= nom_pone;\r\n\t\tnumber_one.hp= 100;\r\n\t\t\r\n\t\tplayer number_two= new player();\r\n\t\tnumber_two.name=nom_ptwo;\r\n\t\tnumber_two.hp= 100;\r\n\t\t\r\n\t\t\r\n\t\tboolean running=true;\r\n\t\twhile (running == true) {\r\n\t\t\tSystem.out.println(&quot;Fight !&quot;);\r\n\t\t\tSystem.out.println(number_one.name +&quot; hit &quot; + number_two.name);\r\n\t\t\tString frapper= new java.util.Scanner(System.in).nextLine();\r\n\t\t\tSystem.out.println(fists.damage);\r\n\t\t\tnumber_two.hp= number_two.hp -= fists.damage;\r\n\t\t\t\r\n\t\t\tif (number_two.hp &lt;=0) {\r\n\t\t\t\tSystem.out.println(number_one.name +&quot; wins !&quot;);\r\n\t\t\t\trunning=false;\r\n\t\t\t\tbreak;\r\n\t\t\t} else {\r\n\t\t\t\tSystem.out.println(number_two.name + &quot; still has &quot;+number_two.hp);\r\n\t\t\t\trunning = true;\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;Fight !&quot;);\r\n\t\t\tSystem.out.println(number_two.name +&quot; hit &quot; + number_one.name);\r\n\t\t\tString frapper2= new java.util.Scanner(System.in).nextLine();\r\n\t\t\tSystem.out.println(fists.damage);\r\n\t\t\tnumber_one.hp= number_one.hp -= fists.damage;\r\n\t\t\t\r\n\t\t\tif (number_one.hp&lt;=0) {\r\n\t\t\t\tSystem.out.println(number_two.name +&quot; wins !&quot;);\r\n\t\t\t\trunning=false;\r\n\t\t\t\tbreak;\r\n\t\t\t}else {\r\n\t\t\t\tSystem.out.println(number_one.name + &quot; still has &quot;+number_one.hp);\r\n\t\t\t\trunning = true;\r\n\t\t\t}\r\n\t\t}\r\n```\r\n\r\n\r\nI tried to change the values between the brackets and associating the random command directly to &quot;fists.damage&quot;","title":"Java while loop random number","body":"<p>i'm new to Java and I am trying to code a little &quot;fighting game&quot; (more random than fight actually). I want each punch to have a random number of damages between 0 and 30. The problem is, the first number randomly sorted will be used until the end (if it's 12, both fighters will punch at 12 damages every turn until Player 1 wins). How can I generate a different random number at every iteration of the loop until there's a winner ?</p>\n<pre><code>package jeu_propre;\n\npublic class main {\n    public static void main(String[] args){\n        System.out.println(&quot;Player 1, choose your name : &quot;);\n        String nom_pone= new java.util.Scanner(System.in).nextLine();\n        System.out.println(&quot;Player 2, choose your name : &quot;);\n        String nom_ptwo= new java.util.Scanner(System.in).nextLine();\n                        \n        int r=new java.util.Random().nextInt(30);\n        \n        weapons fists = new weapons();\n        fists.name=&quot;fists&quot;;\n        fists.damage = r;\n        \n        \n        player number_one = new player();\n        number_one.name= nom_pone;\n        number_one.hp= 100;\n        \n        player number_two= new player();\n        number_two.name=nom_ptwo;\n        number_two.hp= 100;\n        \n        \n        boolean running=true;\n        while (running == true) {\n            System.out.println(&quot;Fight !&quot;);\n            System.out.println(number_one.name +&quot; hit &quot; + number_two.name);\n            String frapper= new java.util.Scanner(System.in).nextLine();\n            System.out.println(fists.damage);\n            number_two.hp= number_two.hp -= fists.damage;\n            \n            if (number_two.hp &lt;=0) {\n                System.out.println(number_one.name +&quot; wins !&quot;);\n                running=false;\n                break;\n            } else {\n                System.out.println(number_two.name + &quot; still has &quot;+number_two.hp);\n                running = true;\n            }\n            System.out.println(&quot;Fight !&quot;);\n            System.out.println(number_two.name +&quot; hit &quot; + number_one.name);\n            String frapper2= new java.util.Scanner(System.in).nextLine();\n            System.out.println(fists.damage);\n            number_one.hp= number_one.hp -= fists.damage;\n            \n            if (number_one.hp&lt;=0) {\n                System.out.println(number_two.name +&quot; wins !&quot;);\n                running=false;\n                break;\n            }else {\n                System.out.println(number_one.name + &quot; still has &quot;+number_one.hp);\n                running = true;\n            }\n        }\n</code></pre>\n<p>I tried to change the values between the brackets and associating the random command directly to &quot;fists.damage&quot;</p>\n"},{"tags":["java","selenium"],"comments":[{"owner":{"account_id":984212,"reputation":62352,"user_id":1003142,"display_name":"Konstantin Yovkov"},"score":0,"creation_date":1374238769,"post_id":17746565,"comment_id":25874310,"body_markdown":"What are the print results ?","body":"What are the print results ?"}],"answers":[{"comments":[{"owner":{"account_id":2920306,"reputation":23,"user_id":2502733,"display_name":"user2502733"},"score":0,"creation_date":1374242944,"post_id":17746738,"comment_id":25877169,"body_markdown":"Thanks for the answer guys..But i dnt know if i understand cauz i am very new to this. Actually i tried this too","body":"Thanks for the answer guys..But i dnt know if i understand cauz i am very new to this. Actually i tried this too"},{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":0,"creation_date":1374247827,"post_id":17746738,"comment_id":25880537,"body_markdown":"This code should go instead of your for-each loop there. You can include your printing, too, if you need to. That said, this should work exactly as needed, it should assert your `&lt;option&gt;` elements&#39; values. Is something wrong when you copypaste it into your test? Does it work as intended? I added comments for you to understand the code more easily.","body":"This code should go instead of your for-each loop there. You can include your printing, too, if you need to. That said, this should work exactly as needed, it should assert your <code>&lt;option&gt;</code> elements&#39; values. Is something wrong when you copypaste it into your test? Does it work as intended? I added comments for you to understand the code more easily."},{"owner":{"account_id":2920306,"reputation":23,"user_id":2502733,"display_name":"user2502733"},"score":0,"creation_date":1374260731,"post_id":17746738,"comment_id":25887582,"body_markdown":"Hey I just change my question lil bit. sorry for the confusion earlier. I just want to see if there is any easier way to verify all the elements in list.","body":"Hey I just change my question lil bit. sorry for the confusion earlier. I just want to see if there is any easier way to verify all the elements in list."},{"owner":{"account_id":2920306,"reputation":23,"user_id":2502733,"display_name":"user2502733"},"score":0,"creation_date":1374262262,"post_id":17746738,"comment_id":25888358,"body_markdown":"Thanks for the quick reply..I copy your code but exp is giving me error, I tried to create a local variable but then length show me error length cannot be resolved or is not a field. I had the same problem in your previous answer too.i know i am missing something here. Thanks for ur help","body":"Thanks for the quick reply..I copy your code but exp is giving me error, I tried to create a local variable but then length show me error length cannot be resolved or is not a field. I had the same problem in your previous answer too.i know i am missing something here. Thanks for ur help"},{"owner":{"account_id":2920306,"reputation":23,"user_id":2502733,"display_name":"user2502733"},"score":0,"creation_date":1374264037,"post_id":17746738,"comment_id":25889242,"body_markdown":"I am curious about your 1st answer..i am trying to make it work that way too but it gives me error. when i try to see what the error it is create method &#39;assertsEquals()&#39;","body":"I am curious about your 1st answer..i am trying to make it work that way too but it gives me error. when i try to see what the error it is create method &#39;assertsEquals()&#39;"},{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":0,"creation_date":1374264245,"post_id":17746738,"comment_id":25889366,"body_markdown":"@user2502733 I assumed (and it was a bad assumption as I see it now) that you know what `assertEquals()` is. One of the usual usages of it is to add a `import static org.junit.Assert.*;` static import to be able to use the method directly. Or qualify it by using `Assert.assertEquals()` instead (no need for the static import then, just the normal one: `import org.junit.Assert`). Make sure your classpath includes [JUnit](http://junit.org/).","body":"@user2502733 I assumed (and it was a bad assumption as I see it now) that you know what <code>assertEquals()</code> is. One of the usual usages of it is to add a <code>import static org.junit.Assert.*;</code> static import to be able to use the method directly. Or qualify it by using <code>Assert.assertEquals()</code> instead (no need for the static import then, just the normal one: <code>import org.junit.Assert</code>). Make sure your classpath includes <a href=\"http://junit.org/\" rel=\"nofollow noreferrer\">JUnit</a>."}],"tags":[],"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"comment_count":6,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1374262810,"creation_date":1374238893,"answer_id":17746738,"question_id":17746565,"body_markdown":"Don&#39;t use the for-each construct. It&#39;s only useful when iterating over a single `Iterable` / array. You need to iterate over the `List&lt;WebElement&gt;` and the array simultaneously.\r\n\r\n    // assert that the number of found &lt;option&gt; elements matches the expectations\r\n    assertEquals(exp.length, allOptions.size());\r\n    // assert that the value of every &lt;option&gt; element equals the expected value\r\n    for (int i = 0; i &lt; exp.length; i++) {\r\n        assertEquals(exp[i], allOptions.get(i).getAttribute(&quot;value&quot;));\r\n    }\r\n\r\n\r\n---\r\n\r\nEDIT after OP&#39;s changed his question a bit:\r\n\r\nAssuming you have an array of expected values, you can do this:\r\n\r\n    String[] expected = {&quot;GRAM&quot;, &quot;OUNCE&quot;, &quot;POUND&quot;, &quot;MILLIMETER&quot;, &quot;TSP&quot;, &quot;TBSP&quot;, &quot;FLUID_OUNCE&quot;};\r\n    List&lt;WebElement&gt; allOptions = select.findElements(By.tagName(&quot;option&quot;));\r\n\r\n    // make sure you found the right number of elements\r\n    if (expected.length != allOptions.size()) {\r\n        System.out.println(&quot;fail, wrong number of elements found&quot;);\r\n    }\r\n    // make sure that the value of every &lt;option&gt; element equals the expected value\r\n    for (int i = 0; i &lt; expected.length; i++) {\r\n        String optionValue = allOptions.get(i).getAttribute(&quot;value&quot;);\r\n        if (optionValue.equals(expected[i])) {\r\n            System.out.println(&quot;passed on: &quot; + optionValue);\r\n        } else {\r\n            System.out.println(&quot;failed on: &quot; + optionValue);\r\n        }\r\n    }\r\n\r\nThis code essentially does what my first code did. The only real difference is that now you&#39;re doing the work manually and are printing the results out.\r\n\r\nBefore, I used the [`assertEquals()`](http://junit.sourceforge.net/javadoc/org/junit/Assert.html#assertEquals%28java.lang.Object,%20java.lang.Object%29) static method from the `Assert` class of the JUnit framework. This framework is a de-facto standard in writing Java tests and the `assertEquals()` method family is the standard way to verify the results of your program. They make sure the arguments passed into the method are equal and if they are not, they throw an `AssertionError`.\r\n\r\nAnyway, you can do it the manual way, too, no problem.","title":"Verify list elements by Selenium WebDriver","body":"<p>Don't use the for-each construct. It's only useful when iterating over a single <code>Iterable</code> / array. You need to iterate over the <code>List&lt;WebElement&gt;</code> and the array simultaneously.</p>\n\n<pre><code>// assert that the number of found &lt;option&gt; elements matches the expectations\nassertEquals(exp.length, allOptions.size());\n// assert that the value of every &lt;option&gt; element equals the expected value\nfor (int i = 0; i &lt; exp.length; i++) {\n    assertEquals(exp[i], allOptions.get(i).getAttribute(\"value\"));\n}\n</code></pre>\n\n<hr>\n\n<p>EDIT after OP's changed his question a bit:</p>\n\n<p>Assuming you have an array of expected values, you can do this:</p>\n\n<pre><code>String[] expected = {\"GRAM\", \"OUNCE\", \"POUND\", \"MILLIMETER\", \"TSP\", \"TBSP\", \"FLUID_OUNCE\"};\nList&lt;WebElement&gt; allOptions = select.findElements(By.tagName(\"option\"));\n\n// make sure you found the right number of elements\nif (expected.length != allOptions.size()) {\n    System.out.println(\"fail, wrong number of elements found\");\n}\n// make sure that the value of every &lt;option&gt; element equals the expected value\nfor (int i = 0; i &lt; expected.length; i++) {\n    String optionValue = allOptions.get(i).getAttribute(\"value\");\n    if (optionValue.equals(expected[i])) {\n        System.out.println(\"passed on: \" + optionValue);\n    } else {\n        System.out.println(\"failed on: \" + optionValue);\n    }\n}\n</code></pre>\n\n<p>This code essentially does what my first code did. The only real difference is that now you're doing the work manually and are printing the results out.</p>\n\n<p>Before, I used the <a href=\"http://junit.sourceforge.net/javadoc/org/junit/Assert.html#assertEquals%28java.lang.Object,%20java.lang.Object%29\" rel=\"nofollow\"><code>assertEquals()</code></a> static method from the <code>Assert</code> class of the JUnit framework. This framework is a de-facto standard in writing Java tests and the <code>assertEquals()</code> method family is the standard way to verify the results of your program. They make sure the arguments passed into the method are equal and if they are not, they throw an <code>AssertionError</code>.</p>\n\n<p>Anyway, you can do it the manual way, too, no problem.</p>\n"},{"tags":[],"owner":{"account_id":984212,"reputation":62352,"user_id":1003142,"display_name":"Konstantin Yovkov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1374238983,"creation_date":1374238983,"answer_id":17746779,"question_id":17746565,"body_markdown":"You can do it like this:\r\n\r\n\r\n    String[] act = new String[allOptions.length];\r\n    int i = 0;\r\n    for (WebElement option : allOptions) {\r\n        act[i++] = option.getValue();\r\n    }\r\n    \r\n    List&lt;String&gt; expected = Arrays.asList(exp);\r\n    List&lt;String&gt; actual = Arrays.asList(act);\r\n    \r\n    Assert.assertNotNull(expected);\r\n    Assert.assertNotNull(actual);\r\n    Assert.assertTrue(expected.containsAll(actual));\r\n    Assert.assertTrue(expected.size() == actual.size());","title":"Verify list elements by Selenium WebDriver","body":"<p>You can do it like this:</p>\n\n<pre><code>String[] act = new String[allOptions.length];\nint i = 0;\nfor (WebElement option : allOptions) {\n    act[i++] = option.getValue();\n}\n\nList&lt;String&gt; expected = Arrays.asList(exp);\nList&lt;String&gt; actual = Arrays.asList(act);\n\nAssert.assertNotNull(expected);\nAssert.assertNotNull(actual);\nAssert.assertTrue(expected.containsAll(actual));\nAssert.assertTrue(expected.size() == actual.size());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27378506,"reputation":1,"user_id":20883444,"display_name":"Dominik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672387815,"creation_date":1672276917,"answer_id":74946422,"question_id":17746565,"body_markdown":"    public void verifyElementsInListEquals(List&lt;WebElement&gt; elementsList, String expectedValue) {\r\n\r\n        ArrayList&lt;String&gt; TextList =new ArrayList&lt;&gt;(); // new list to have Text from list of Webelement\r\n\r\n        for( WebElement x :elementsList){  //for each loop in JAVA\r\n            TextList.add(x.getText());  //add &quot;x&quot; times text to list above\r\n        }\r\n\r\n        if(TextList.contains(expectedValue)){  //check if value exist in list above\r\n            System.out.println(&quot;Value is there&quot;);  \r\n        }\r\n        else{\r\n            System.out.println(&quot; no value&quot;);\r\n        assertTrue(false); //will always stop the program here \r\n        }\r\n    }","title":"Verify list elements by Selenium WebDriver","body":"<pre><code>public void verifyElementsInListEquals(List&lt;WebElement&gt; elementsList, String expectedValue) {\n\n    ArrayList&lt;String&gt; TextList =new ArrayList&lt;&gt;(); // new list to have Text from list of Webelement\n\n    for( WebElement x :elementsList){  //for each loop in JAVA\n        TextList.add(x.getText());  //add &quot;x&quot; times text to list above\n    }\n\n    if(TextList.contains(expectedValue)){  //check if value exist in list above\n        System.out.println(&quot;Value is there&quot;);  \n    }\n    else{\n        System.out.println(&quot; no value&quot;);\n    assertTrue(false); //will always stop the program here \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2920306,"reputation":23,"user_id":2502733,"display_name":"user2502733"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40735,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":17746738,"answer_count":3,"score":2,"last_activity_date":1672387815,"creation_date":1374238419,"question_id":17746565,"body_markdown":"    WebElement select = myD.findElement(By.xpath(&quot;//*[@id=&#39;custfoodtable&#39;]/tbody/tr[2]/td/div/select&quot;));\r\n    List&lt;WebElement&gt; allOptions = select.findElements(By.tagName(&quot;option&quot;));\r\n    for (WebElement option : allOptions) {\r\n        System.out.println(String.format(&quot;Value is: %s&quot;, option.getAttribute(&quot;value&quot;)));\r\n        option.click();\r\n        Object vaLue = &quot;Gram&quot;;\r\n        if (option.getAttribute(&quot;value&quot;).equals(vaLue)) {\r\n            System.out.println(&quot;Pass&quot;);\r\n        } else {\r\n            System.out.println(&quot;fail&quot;);\r\n        }\r\n    }\r\n\r\nI can verify one element in a list, but there are like 20 elements in a dropdown I need to verify and I do not want to use above logic 20 times. Is there any easier way to do it?","title":"Verify list elements by Selenium WebDriver","body":"<pre><code>WebElement select = myD.findElement(By.xpath(\"//*[@id='custfoodtable']/tbody/tr[2]/td/div/select\"));\nList&lt;WebElement&gt; allOptions = select.findElements(By.tagName(\"option\"));\nfor (WebElement option : allOptions) {\n    System.out.println(String.format(\"Value is: %s\", option.getAttribute(\"value\")));\n    option.click();\n    Object vaLue = \"Gram\";\n    if (option.getAttribute(\"value\").equals(vaLue)) {\n        System.out.println(\"Pass\");\n    } else {\n        System.out.println(\"fail\");\n    }\n}\n</code></pre>\n\n<p>I can verify one element in a list, but there are like 20 elements in a dropdown I need to verify and I do not want to use above logic 20 times. Is there any easier way to do it?</p>\n"},{"tags":["java","android","android-intent","serial-port","intentfilter"],"answers":[{"tags":[],"owner":{"account_id":19955522,"reputation":31,"user_id":14624224,"display_name":"st920228"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672387750,"creation_date":1672387750,"answer_id":74959434,"question_id":74401773,"body_markdown":"Add the android:launchMode=&quot;singleTop&quot; attribute to the associated activity\r\n\r\n    &lt;application&gt;\r\n        ...\r\n        &lt;activity&gt;\r\n            ...\r\n            android:launchMode=&quot;singleTop&quot;\r\n            ...\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n                \r\n        &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.hardware.usb.action.USB_DEVICE_ATTACHED&quot; /&gt;\r\n        &lt;/intent-filter&gt;\r\n                \r\n        &lt;meta-data android:name=&quot;android.hardware.usb.action.USB_DEVICE_ATTACHED&quot;\r\n                android:resource=&quot;@xml/device_filter&quot; /&gt;\r\n                \r\n        &lt;/activity&gt;        \r\n    &lt;/application&gt;","title":"intent-filter android restart app if app running","body":"<p>Add the android:launchMode=&quot;singleTop&quot; attribute to the associated activity</p>\n<pre><code>&lt;application&gt;\n    ...\n    &lt;activity&gt;\n        ...\n        android:launchMode=&quot;singleTop&quot;\n        ...\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n        &lt;/intent-filter&gt;\n            \n    &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.hardware.usb.action.USB_DEVICE_ATTACHED&quot; /&gt;\n    &lt;/intent-filter&gt;\n            \n    &lt;meta-data android:name=&quot;android.hardware.usb.action.USB_DEVICE_ATTACHED&quot;\n            android:resource=&quot;@xml/device_filter&quot; /&gt;\n            \n    &lt;/activity&gt;        \n&lt;/application&gt;\n</code></pre>\n"}],"owner":{"account_id":21819923,"reputation":21,"user_id":16116258,"display_name":"Sucper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672387750,"creation_date":1668165954,"question_id":74401773,"body_markdown":"I am writing an application that uses a serial port.\r\n\r\nthis is how my xml looks like\r\n\r\n```\r\n&lt;application&gt;\r\n    ...\r\n    &lt;activity&gt;\r\n        ...\r\n        &lt;intent-filter&gt;\r\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n        &lt;/intent-filter&gt;\r\n\t\t\t\r\n\t&lt;intent-filter&gt;\r\n        \t&lt;action android:name=&quot;android.hardware.usb.action.USB_DEVICE_ATTACHED&quot; /&gt;\r\n\t&lt;/intent-filter&gt;\r\n\t\t\t\r\n\t&lt;meta-data android:name=&quot;android.hardware.usb.action.USB_DEVICE_ATTACHED&quot;\r\n        \tandroid:resource=&quot;@xml/device_filter&quot; /&gt;\r\n\t\t\t\r\n    &lt;/activity&gt;        \r\n&lt;/application&gt;\r\n```\r\n\r\nwhen connecting a usb device, the smartphone prompts me to select my default application.\r\n\r\nI give permission to use it and remember the choice.\r\n\r\nBut if I switch the usb device when the application is running, then when connected, the application will restart ...\r\n\r\nHow can this be avoided?\r\n\r\nI am expecting the following behaviour.\r\n\r\n1. If the application is not running, then when connected, it starts\r\n\r\n2. If the application is running, then when connected, the application continues to work, but will be notified about the connection.","title":"intent-filter android restart app if app running","body":"<p>I am writing an application that uses a serial port.</p>\n<p>this is how my xml looks like</p>\n<pre><code>&lt;application&gt;\n    ...\n    &lt;activity&gt;\n        ...\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n        &lt;/intent-filter&gt;\n            \n    &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.hardware.usb.action.USB_DEVICE_ATTACHED&quot; /&gt;\n    &lt;/intent-filter&gt;\n            \n    &lt;meta-data android:name=&quot;android.hardware.usb.action.USB_DEVICE_ATTACHED&quot;\n            android:resource=&quot;@xml/device_filter&quot; /&gt;\n            \n    &lt;/activity&gt;        \n&lt;/application&gt;\n</code></pre>\n<p>when connecting a usb device, the smartphone prompts me to select my default application.</p>\n<p>I give permission to use it and remember the choice.</p>\n<p>But if I switch the usb device when the application is running, then when connected, the application will restart ...</p>\n<p>How can this be avoided?</p>\n<p>I am expecting the following behaviour.</p>\n<ol>\n<li><p>If the application is not running, then when connected, it starts</p>\n</li>\n<li><p>If the application is running, then when connected, the application continues to work, but will be notified about the connection.</p>\n</li>\n</ol>\n"},{"tags":["java","maven","maven-3","gradle-enterprise"],"owner":{"account_id":6771396,"reputation":441,"user_id":5214673,"accept_rate":40,"display_name":"Spider"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672387133,"creation_date":1672384157,"question_id":74959011,"body_markdown":"Below I can see that during every build due to runtime classpath and non-normalized line endings, I&#39;m getting different cache keys, which causes the build to not use the cache.\r\n\r\nI tried adding everything to ignore, but that doesn&#39;t seem to be working. How can I figure out the exact files that have weird line endings and different classpaths, so I don&#39;t have to keep guessing?\r\n\r\n   \r\n    &lt;paths&gt;\r\n      &lt;path&gt;src/test/resources&lt;/path&gt;\r\n      &lt;path&gt;src/main/resources&lt;/path&gt;\r\n      &lt;path&gt;src/test/java&lt;/path&gt;\r\n    &lt;/paths&gt;\r\n    &lt;normalization&gt;\r\n      &lt;strategy&gt;RELATIVE_PATH&lt;/strategy&gt;. \r\n      &lt;ignoreLineEndings&gt;true&lt;/ignoreLineEndings&gt;\r\n    &lt;/normalization&gt;\r\n\r\n\r\n    &lt;runtimeClassPath&gt;\r\n      &lt;ignoredFiles&gt;\r\n        &lt;ignoredFile&gt;src/test/**&lt;/ignoredFile&gt;\r\n        &lt;ignoredFile&gt;src/main/**&lt;/ignoredFile&gt;\r\n      &lt;/ignoredFiles&gt;\r\n    &lt;/runtimeClassPath&gt;\r\n\r\nThese are the docs I&#39;ve been using https://docs.gradle.com/enterprise/maven-extension/#finding_the_cause_of_cache_misses\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/v1yC9.png","title":"Using gradle-enterprise-maven-extension to find runtime classpath/non-normalized line endings","body":"<p>Below I can see that during every build due to runtime classpath and non-normalized line endings, I'm getting different cache keys, which causes the build to not use the cache.</p>\n<p>I tried adding everything to ignore, but that doesn't seem to be working. How can I figure out the exact files that have weird line endings and different classpaths, so I don't have to keep guessing?</p>\n<pre><code>&lt;paths&gt;\n  &lt;path&gt;src/test/resources&lt;/path&gt;\n  &lt;path&gt;src/main/resources&lt;/path&gt;\n  &lt;path&gt;src/test/java&lt;/path&gt;\n&lt;/paths&gt;\n&lt;normalization&gt;\n  &lt;strategy&gt;RELATIVE_PATH&lt;/strategy&gt;. \n  &lt;ignoreLineEndings&gt;true&lt;/ignoreLineEndings&gt;\n&lt;/normalization&gt;\n\n\n&lt;runtimeClassPath&gt;\n  &lt;ignoredFiles&gt;\n    &lt;ignoredFile&gt;src/test/**&lt;/ignoredFile&gt;\n    &lt;ignoredFile&gt;src/main/**&lt;/ignoredFile&gt;\n  &lt;/ignoredFiles&gt;\n&lt;/runtimeClassPath&gt;\n</code></pre>\n<p>These are the docs I've been using <a href=\"https://docs.gradle.com/enterprise/maven-extension/#finding_the_cause_of_cache_misses\" rel=\"nofollow noreferrer\">https://docs.gradle.com/enterprise/maven-extension/#finding_the_cause_of_cache_misses</a></p>\n<p><a href=\"https://i.stack.imgur.com/v1yC9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v1yC9.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","jdbc","concurrency","resource-management"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1672388866,"post_id":74959244,"comment_id":132280046,"body_markdown":"Possibly. If the `Future#get(long,TimeUnit)` call throws a `TimeoutException`, that doesn&#39;t stop the background task from continuing. Which means probably it will return a `Connection` eventually. But it won&#39;t be managed by the _try-with-resources_ statement. This means it will remain open until it is GC&#39;d, assuming it is eligible to be GC&#39;d (and the `Connection` implementation releases any allocated resources upon being GC&#39;d).","body":"Possibly. If the <code>Future#get(long,TimeUnit)</code> call throws a <code>TimeoutException</code>, that doesn&#39;t stop the background task from continuing. Which means probably it will return a <code>Connection</code> eventually. But it won&#39;t be managed by the <i>try-with-resources</i> statement. This means it will remain open until it is GC&#39;d, assuming it is eligible to be GC&#39;d (and the <code>Connection</code> implementation releases any allocated resources upon being GC&#39;d)."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1672388970,"post_id":74959244,"comment_id":132280058,"body_markdown":"Likely you should catch the `TimeoutException` and then call `theFuture.cancel(true)`. Make sure to check the result of calling the cancel method, as between the exception being thrown and you calling cancel, the task may have completed (normally or exceptionally). Though whether or not calling `cancel(true)` has the desired effect depends on if your code reacts to cancellation (note the `true` argument means the thread running the task is interrupted, assuming the task could be cancelled).","body":"Likely you should catch the <code>TimeoutException</code> and then call <code>theFuture.cancel(true)</code>. Make sure to check the result of calling the cancel method, as between the exception being thrown and you calling cancel, the task may have completed (normally or exceptionally). Though whether or not calling <code>cancel(true)</code> has the desired effect depends on if your code reacts to cancellation (note the <code>true</code> argument means the thread running the task is interrupted, assuming the task could be cancelled)."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1672393018,"post_id":74959244,"comment_id":132280967,"body_markdown":"I would recommend using a connection pool that can handle the timeout for you, such as [HikariCP](https://github.com/brettwooldridge/HikariCP).","body":"I would recommend using a connection pool that can handle the timeout for you, such as <a href=\"https://github.com/brettwooldridge/HikariCP\" rel=\"nofollow noreferrer\">HikariCP</a>."}],"owner":{"account_id":22807677,"reputation":414,"user_id":16959486,"display_name":"Teddy Tsai"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672386797,"creation_date":1672386204,"question_id":74959244,"body_markdown":"```\r\nExecutorService executor = Executors.newSingleThreadExecutor();\r\nCallable&lt;Connection&gt; task = () -&gt; getConnection(); // a complicated method but safe from resource leaks\r\ntry (Connection connection = timeOut == null\r\n\t\t? executor.submit(task).get()\r\n\t\t: executor.submit(task).get(timeOut.toMillis(), TimeUnit.MILLISECONDS)) {\r\n\t// business logic\r\n} catch (SQLException e) {\r\n\t// log\r\n} catch (InterruptedException e) {\r\n\t// log\r\n\tThread.currentThread().interrupt();\r\n} catch (ExecutionException e) {\r\n\t// log\r\n} catch (Exception e) {\r\n\t// log\r\n} finally {\r\n\texecutor.shutdownNow();\r\n}\r\n```\r\n\r\nI have a piece of code which is supposed to fail if getConnection() takes too long, \r\nI am new to combining resource management with concurrency, is there any risk of resource leak if I implement it like this? \r\nIs there a better way to do it?","title":"Resource management with Concurrency","body":"<pre><code>ExecutorService executor = Executors.newSingleThreadExecutor();\nCallable&lt;Connection&gt; task = () -&gt; getConnection(); // a complicated method but safe from resource leaks\ntry (Connection connection = timeOut == null\n        ? executor.submit(task).get()\n        : executor.submit(task).get(timeOut.toMillis(), TimeUnit.MILLISECONDS)) {\n    // business logic\n} catch (SQLException e) {\n    // log\n} catch (InterruptedException e) {\n    // log\n    Thread.currentThread().interrupt();\n} catch (ExecutionException e) {\n    // log\n} catch (Exception e) {\n    // log\n} finally {\n    executor.shutdownNow();\n}\n</code></pre>\n<p>I have a piece of code which is supposed to fail if getConnection() takes too long,\nI am new to combining resource management with concurrency, is there any risk of resource leak if I implement it like this?\nIs there a better way to do it?</p>\n"},{"tags":["java","mysql","date","jdbc"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1672300192,"post_id":74948209,"comment_id":132261209,"body_markdown":"I strongly recommend that you don’t use `SimpleDateFormat` and the two `Date` classes. They are troublesome and hacky, nothing you want to struggle with, and fortunately all long outdated. Use `LocalDate` from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/index.html). `LocalDate.parse(date)`. You can directly pass the resulting `LocalDate` to your SQL database. See [Insert &amp; fetch java.time.LocalDate objects to/from an SQL…](https://stackoverflow.com/questions/43039614/insert-fetch-java-time-localdate-objects-to-from-an-sql-database-such-as-h2)","body":"I strongly recommend that you don’t use <code>SimpleDateFormat</code> and the two <code>Date</code> classes. They are troublesome and hacky, nothing you want to struggle with, and fortunately all long outdated. Use <code>LocalDate</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>. <code>LocalDate.parse(date)</code>. You can directly pass the resulting <code>LocalDate</code> to your SQL database. See <a href=\"https://stackoverflow.com/questions/43039614/insert-fetch-java-time-localdate-objects-to-from-an-sql-database-such-as-h2\">Insert &amp; fetch java.time.LocalDate objects to/from an SQL…</a>"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1672302050,"post_id":74948209,"comment_id":132261671,"body_markdown":"Welcome to Stack Overflow. It’s nice and good that you are giving a small working example and you are precise about both expected and observed output. For a still more minimal example you could hardcode `String date = &quot;2001-04-03&quot;;` and leave output reading from input. You might also print the `java.util.Date` since this would demonstrate the problem, and you would not need to convert to `java.sql.Date` for this. If this was your first question, you are doing really good.","body":"Welcome to Stack Overflow. It’s nice and good that you are giving a small working example and you are precise about both expected and observed output. For a still more minimal example you could hardcode <code>String date = &quot;2001-04-03&quot;;</code> and leave output reading from input. You might also print the <code>java.util.Date</code> since this would demonstrate the problem, and you would not need to convert to <code>java.sql.Date</code> for this. If this was your first question, you are doing really good."}],"answers":[{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1672300345,"post_id":74948337,"comment_id":132261245,"body_markdown":"It’s correct, but allow me to be honest: No one should use `SimpleDateFormat` excatly because it’s so troublesome and easy to get wrong. Helping users how to use it anyway is no real help. Helping users to migrate to java.time, the modern Java date and time API, is the real help.","body":"It’s correct, but allow me to be honest: No one should use <code>SimpleDateFormat</code> excatly because it’s so troublesome and easy to get wrong. Helping users how to use it anyway is no real help. Helping users to migrate to java.time, the modern Java date and time API, is the real help."},{"owner":{"account_id":13721821,"reputation":1820,"user_id":9901515,"display_name":"csalmhof"},"score":1,"creation_date":1672397555,"post_id":74948337,"comment_id":132281996,"body_markdown":"You&#39;re right, `SimpleDateFormat` should not be the way to deal with dates in 2022. But sometimes you have to deal with legacy code and don&#39;t have time or budget to refactor everything. Anyway, only using the java.time API would not solve the user&#39;s problem here, because the problem is the format string which would also lead to wrong results with the java.time API.","body":"You&#39;re right, <code>SimpleDateFormat</code> should not be the way to deal with dates in 2022. But sometimes you have to deal with legacy code and don&#39;t have time or budget to refactor everything. Anyway, only using the java.time API would not solve the user&#39;s problem here, because the problem is the format string which would also lead to wrong results with the java.time API."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1672401909,"post_id":74948337,"comment_id":132283002,"body_markdown":"Yes and no. (1) `LocalDate.parse(date)` parses the date string without requiring any formatter at all, which definitely does solve the user’s problem. Alternatively use the built-in `DateTimeFormatter.ISO_LOCAL_DATE`. (2) Even if using the incorrect format pattern string from the question, java.time will throw an exception rather than tacitly giving an incorrect date, which is already an improvement. Also I doubt that code trying to parse using the wrong pattern `YYYY-MM-DD` is legacy code.","body":"Yes and no. (1) <code>LocalDate.parse(date)</code> parses the date string without requiring any formatter at all, which definitely does solve the user’s problem. Alternatively use the built-in <code>DateTimeFormatter.ISO_LOCAL_DATE</code>. (2) Even if using the incorrect format pattern string from the question, java.time will throw an exception rather than tacitly giving an incorrect date, which is already an improvement. Also I doubt that code trying to parse using the wrong pattern <code>YYYY-MM-DD</code> is legacy code."}],"tags":[],"owner":{"account_id":13721821,"reputation":1820,"user_id":9901515,"display_name":"csalmhof"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672298909,"creation_date":1672298909,"answer_id":74948337,"question_id":74948209,"body_markdown":"Your format-string is not correct.\r\n\r\nTake a look at the documentation of `SimpleDateFormat`: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html\r\n\r\n - Uppercase *Y*: pattern letter for *Week year*\r\n - Uppercase *M*: pattern letter for *Month in year* (correct)\r\n - Uppercase *D*: pattern letter for *Day in year*\r\n\r\nYou should use lowercase *y* and lowercase *d*.\r\n\r\n - Lowercase *y*: pattern letter for *Year*\r\n - Lowercase *d*: pattern letter for *Day in Month*\r\n\r\nI think your converting should work with this pattern: \r\n```java\r\nSimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n```\r\n ","title":"Why converting java.util.Date to java.sql.Date results in a wrong date?","body":"<p>Your format-string is not correct.</p>\n<p>Take a look at the documentation of <code>SimpleDateFormat</code>: <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html</a></p>\n<ul>\n<li>Uppercase <em>Y</em>: pattern letter for <em>Week year</em></li>\n<li>Uppercase <em>M</em>: pattern letter for <em>Month in year</em> (correct)</li>\n<li>Uppercase <em>D</em>: pattern letter for <em>Day in year</em></li>\n</ul>\n<p>You should use lowercase <em>y</em> and lowercase <em>d</em>.</p>\n<ul>\n<li>Lowercase <em>y</em>: pattern letter for <em>Year</em></li>\n<li>Lowercase <em>d</em>: pattern letter for <em>Day in Month</em></li>\n</ul>\n<p>I think your converting should work with this pattern:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\n</code></pre>\n"}],"owner":{"account_id":27380196,"reputation":11,"user_id":20884908,"display_name":"shuvendugan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":278,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1672301752,"answer_count":1,"score":1,"last_activity_date":1672386490,"creation_date":1672297820,"question_id":74948209,"body_markdown":"I am converting java.util.Date to java.sql.date to insert date of birth in mysql database. \r\n\r\nBut entering `2001-04-03` always results in a `java.sql.Date` of `2000-12-31`\r\n\r\n```java\r\nBufferedReader br = new BufferedReader(new InputStreamReader(System.in));\r\nSystem.out.println(&quot;Enter dob(YYYY-MM-DD) :&quot;);\r\nString date = br.readLine();\r\n\r\nSimpleDateFormat dateFormat = new SimpleDateFormat(&quot;YYYY-MM-DD&quot;);\r\n \t\t\t\r\njava.util.Date util_dob = dateFormat.parse(date); \r\n \t\t\t\r\njava.sql.Date dob = new java.sql.Date(util_dob.getTime());\r\n```\r\n\r\n\r\ninput: 2001-04-03\r\n\r\noutput: 2000-12-31\r\n\r\nexpecting: 2001-04-03","title":"Why converting java.util.Date to java.sql.Date results in a wrong date?","body":"<p>I am converting java.util.Date to java.sql.date to insert date of birth in mysql database.</p>\n<p>But entering <code>2001-04-03</code> always results in a <code>java.sql.Date</code> of <code>2000-12-31</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\nSystem.out.println(&quot;Enter dob(YYYY-MM-DD) :&quot;);\nString date = br.readLine();\n\nSimpleDateFormat dateFormat = new SimpleDateFormat(&quot;YYYY-MM-DD&quot;);\n            \njava.util.Date util_dob = dateFormat.parse(date); \n            \njava.sql.Date dob = new java.sql.Date(util_dob.getTime());\n</code></pre>\n<p>input: 2001-04-03</p>\n<p>output: 2000-12-31</p>\n<p>expecting: 2001-04-03</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":874149,"reputation":31559,"user_id":924313,"accept_rate":96,"display_name":"corazza"},"score":0,"creation_date":1408484008,"post_id":25393298,"comment_id":39604945,"body_markdown":"Might I ask why you are doing this? &lt;s&gt;Surely you wouldn&#39;t be contributing to open source projects while you&#39;re supposed to be *working*, while being afraid your employer might inspect the packets, would you? Nothing to hide, nothing to fear, buddy!&lt;/s&gt;","body":"Might I ask why you are doing this? &lt;s&gt;Surely you wouldn&#39;t be contributing to open source projects while you&#39;re supposed to be <i>working</i>, while being afraid your employer might inspect the packets, would you? Nothing to hide, nothing to fear, buddy!&lt;/s&gt;"},{"owner":{"account_id":66307,"reputation":17195,"user_id":194609,"accept_rate":73,"display_name":"Karussell"},"score":8,"creation_date":1408484085,"post_id":25393298,"comment_id":39604970,"body_markdown":"Don&#39;t understand your question. This is to protect the users of my project from man-in-the-middle attacks.","body":"Don&#39;t understand your question. This is to protect the users of my project from man-in-the-middle attacks."},{"owner":{"account_id":874149,"reputation":31559,"user_id":924313,"accept_rate":96,"display_name":"corazza"},"score":0,"creation_date":1408484185,"post_id":25393298,"comment_id":39604998,"body_markdown":"I was genuinely curious while exactly you were doing this, thanks for the answer that makes sense. The &lt;s&gt;...&lt;/s&gt; thing is a &lt;s&gt;arcastic remark about unencrypted traffic and potentially nosy employers, HTTPS is good for that too :)","body":"I was genuinely curious while exactly you were doing this, thanks for the answer that makes sense. The &lt;s&gt;...&lt;/s&gt; thing is a &lt;s&gt;arcastic remark about unencrypted traffic and potentially nosy employers, HTTPS is good for that too :)"},{"owner":{"account_id":13340822,"reputation":272,"user_id":9629111,"display_name":"Vishal Monga"},"score":0,"creation_date":1580207707,"post_id":25393298,"comment_id":106013573,"body_markdown":"i use \n\n\n&lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n        &lt;id&gt;central&lt;/id&gt;\n        &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;/snapshots&gt;\n    &lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n\nand my problem solve mvn work and continue to download from  https\n\nthanks","body":"i use    &lt;pluginRepositories&gt;     &lt;pluginRepository&gt;         &lt;id&gt;central&lt;/id&gt;         &lt;url&gt;<a href=\"https://repo1.maven.org/maven2&lt;/url\" rel=\"nofollow noreferrer\">repo1.maven.org/maven2&lt;/url</a>&gt;         &lt;snapshots&gt;             &lt;enabled&gt;false&lt;/enabled&gt;         &lt;/snapshots&gt;     &lt;/pluginRepository&gt; &lt;/pluginRepositories&gt;  and my problem solve mvn work and continue to download from  https  thanks"},{"owner":{"account_id":17600005,"reputation":1,"user_id":12770187,"display_name":"Juan Gomez"},"score":0,"creation_date":1589466703,"post_id":25393298,"comment_id":109321041,"body_markdown":"Additionally I had to modify eclipse, Maven / User Settings [Eclipse](https://i.stack.imgur.com/48Dyd.png)","body":"Additionally I had to modify eclipse, Maven / User Settings <a href=\"https://i.stack.imgur.com/48Dyd.png\" rel=\"nofollow noreferrer\">Eclipse</a>"}],"answers":[{"comments":[{"owner":{"account_id":66307,"reputation":17195,"user_id":194609,"accept_rate":73,"display_name":"Karussell"},"score":0,"creation_date":1408485268,"post_id":25393435,"comment_id":39605428,"body_markdown":"As I stated already in the question: but then others would have to setup this in their settings.xml as well. That would be ugly I think. Or is this possible in the pom.xml too?","body":"As I stated already in the question: but then others would have to setup this in their settings.xml as well. That would be ugly I think. Or is this possible in the pom.xml too?"},{"owner":{"account_id":66307,"reputation":17195,"user_id":194609,"accept_rate":73,"display_name":"Karussell"},"score":0,"creation_date":1408485536,"post_id":25393435,"comment_id":39605548,"body_markdown":"settings and/or mirros is not accepted in pom.xml, or where do I have to put it there?","body":"settings and/or mirros is not accepted in pom.xml, or where do I have to put it there?"},{"owner":{"display_name":"user3667171"},"score":0,"creation_date":1408485641,"post_id":25393435,"comment_id":39605592,"body_markdown":"yeah you are right its not possible, but a chance that you upload the settings file to svn, and everybody else would have it","body":"yeah you are right its not possible, but a chance that you upload the settings file to svn, and everybody else would have it"},{"owner":{"account_id":66307,"reputation":17195,"user_id":194609,"accept_rate":73,"display_name":"Karussell"},"score":0,"creation_date":1408485728,"post_id":25393435,"comment_id":39605631,"body_markdown":"they would have it but they would need to place it correctly. maven was invented for ease setup so that is not an option for me.","body":"they would have it but they would need to place it correctly. maven was invented for ease setup so that is not an option for me."},{"owner":{"display_name":"user3667171"},"score":0,"creation_date":1408485901,"post_id":25393435,"comment_id":39605707,"body_markdown":"they would only need to update their svn, nothing more","body":"they would only need to update their svn, nothing more"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1408518312,"post_id":25393435,"comment_id":39614490,"body_markdown":"First i would suggest to start using a repository manager like Nexus, Artifactory or Archiva and configure such things at a central location  . Furthermore the settings.xml is the only location where such things should be configured and never within pom file.","body":"First i would suggest to start using a repository manager like Nexus, Artifactory or Archiva and configure such things at a central location  . Furthermore the settings.xml is the only location where such things should be configured and never within pom file."},{"owner":{"account_id":66307,"reputation":17195,"user_id":194609,"accept_rate":73,"display_name":"Karussell"},"score":1,"creation_date":1408557639,"post_id":25393435,"comment_id":39638851,"body_markdown":"That is all to complex, not for me of course, but for users trying my open source project.","body":"That is all to complex, not for me of course, but for users trying my open source project."}],"tags":[],"owner":{"display_name":"user3667171"},"comment_count":7,"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1408484452,"creation_date":1408484452,"answer_id":25393435,"question_id":25393298,"body_markdown":"You can do the following to force maven use single repo:\r\n\r\n    &lt;settings&gt;\r\n      ...\r\n      &lt;mirrors&gt;\r\n        &lt;mirror&gt;\r\n          &lt;id&gt;internal-repository&lt;/id&gt;\r\n          &lt;name&gt;Maven Repository Manager running on https://repo1.maven.org/maven2&lt;/name&gt;\r\n          &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\r\n          &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;\r\n        &lt;/mirror&gt;\r\n      &lt;/mirrors&gt;\r\n      ...\r\n    &lt;/settings&gt;\r\n\r\nYou can find more info [here][1].\r\n\r\nAnd also you can use authentication to the repo if you like, the info is [here][2].\r\n\r\n\r\n  [1]: http://maven.apache.org/guides/mini/guide-mirror-settings.html\r\n  [2]: https://maven.apache.org/guides/mini/guide-repository-ssl.html","title":"What is the correct way of forcing maven to use HTTPS for maven central?","body":"<p>You can do the following to force maven use single repo:</p>\n\n<pre><code>&lt;settings&gt;\n  ...\n  &lt;mirrors&gt;\n    &lt;mirror&gt;\n      &lt;id&gt;internal-repository&lt;/id&gt;\n      &lt;name&gt;Maven Repository Manager running on https://repo1.maven.org/maven2&lt;/name&gt;\n      &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\n      &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;\n    &lt;/mirror&gt;\n  &lt;/mirrors&gt;\n  ...\n&lt;/settings&gt;\n</code></pre>\n\n<p>You can find more info <a href=\"http://maven.apache.org/guides/mini/guide-mirror-settings.html\" rel=\"noreferrer\">here</a>.</p>\n\n<p>And also you can use authentication to the repo if you like, the info is <a href=\"https://maven.apache.org/guides/mini/guide-repository-ssl.html\" rel=\"noreferrer\">here</a>.</p>\n"},{"comments":[{"owner":{"account_id":2007569,"reputation":8114,"user_id":1797006,"accept_rate":63,"display_name":"Kalle Richter"},"score":7,"creation_date":1510152435,"post_id":25411658,"comment_id":81314099,"body_markdown":"I&#39;m not getting which better feeling the removal of the local cache `~/.m2/repository` is going to bring.","body":"I&#39;m not getting which better feeling the removal of the local cache <code>~&#47;.m2&#47;repository</code> is going to bring."},{"owner":{"account_id":66307,"reputation":17195,"user_id":194609,"accept_rate":73,"display_name":"Karussell"},"score":1,"creation_date":1589479284,"post_id":25411658,"comment_id":109318502,"body_markdown":"If you downloaded any compromised jar","body":"If you downloaded any compromised jar"}],"tags":[],"owner":{"account_id":66307,"reputation":17195,"user_id":194609,"accept_rate":73,"display_name":"Karussell"},"comment_count":2,"down_vote_count":3,"up_vote_count":35,"is_accepted":true,"score":32,"last_activity_date":1409070970,"creation_date":1408558242,"answer_id":25411658,"question_id":25393298,"body_markdown":"This is already fixed in latest maven 3.2.3! See the [changelogs][1]!\r\n\r\nSo install maven 3.2.3 and do &#39;rm -rf ~/.m2/repository/*&#39; for a better feeling ;)\r\n\r\n\r\n  [1]: http://maven.apache.org/docs/3.2.3/release-notes.html","title":"What is the correct way of forcing maven to use HTTPS for maven central?","body":"<p>This is already fixed in latest maven 3.2.3! See the <a href=\"http://maven.apache.org/docs/3.2.3/release-notes.html\" rel=\"noreferrer\">changelogs</a>!</p>\n\n<p>So install maven 3.2.3 and do 'rm -rf ~/.m2/repository/*' for a better feeling ;)</p>\n"},{"tags":[],"owner":{"account_id":3868671,"reputation":1368,"user_id":3204544,"accept_rate":59,"display_name":"Ellrohir"},"comment_count":0,"down_vote_count":1,"up_vote_count":49,"is_accepted":false,"score":48,"last_activity_date":1672386048,"creation_date":1579251551,"answer_id":59784045,"question_id":25393298,"body_markdown":"You don&#39;t have to place it into all POMs one by one. I&#39;d rather suggest to add the following code into **MAVEN_HOME\\conf\\settings.xml** into `&lt;profiles&gt;` section:\r\n\r\n    &lt;profile&gt;\r\n    \t&lt;id&gt;maven-https&lt;/id&gt;\r\n    \t&lt;activation&gt;\r\n    \t\t&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n    \t&lt;/activation&gt;\r\n    \t&lt;repositories&gt;\r\n    \t\t&lt;repository&gt;\r\n    \t\t\t&lt;id&gt;central&lt;/id&gt;\r\n    \t\t\t&lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\r\n    \t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n    \t\t\t&lt;/snapshots&gt;\r\n    \t\t&lt;/repository&gt;\r\n    \t&lt;/repositories&gt;\r\n    \t&lt;pluginRepositories&gt;\r\n    \t\t&lt;pluginRepository&gt;\r\n    \t\t\t&lt;id&gt;central&lt;/id&gt;\r\n    \t\t\t&lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\r\n    \t\t\t&lt;snapshots&gt;\r\n    \t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n    \t\t\t&lt;/snapshots&gt;\r\n    \t\t&lt;/pluginRepository&gt;\r\n    \t&lt;/pluginRepositories&gt; \r\n    &lt;/profile&gt;\r\n\r\nThis will be always an active setting unless you disable/override it in your POM when needed.","title":"What is the correct way of forcing maven to use HTTPS for maven central?","body":"<p>You don't have to place it into all POMs one by one. I'd rather suggest to add the following code into <strong>MAVEN_HOME\\conf\\settings.xml</strong> into <code>&lt;profiles&gt;</code> section:</p>\n<pre><code>&lt;profile&gt;\n    &lt;id&gt;maven-https&lt;/id&gt;\n    &lt;activation&gt;\n        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n    &lt;/activation&gt;\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;central&lt;/id&gt;\n            &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;central&lt;/id&gt;\n            &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt; \n&lt;/profile&gt;\n</code></pre>\n<p>This will be always an active setting unless you disable/override it in your POM when needed.</p>\n"},{"comments":[{"owner":{"account_id":9273909,"reputation":3750,"user_id":6887084,"display_name":"ScanQR"},"score":1,"creation_date":1595336548,"post_id":59897594,"comment_id":111434376,"body_markdown":"There is no need to run with -U option.","body":"There is no need to run with -U option."},{"owner":{"account_id":16046590,"reputation":126,"user_id":11581545,"display_name":"Nizam Mahammad"},"score":0,"creation_date":1623312092,"post_id":59897594,"comment_id":120044642,"body_markdown":"@ScanQR, It&#39;s update the maven dependencies","body":"@ScanQR, It&#39;s update the maven dependencies"},{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":1,"creation_date":1631748897,"post_id":59897594,"comment_id":122308983,"body_markdown":"@NizamMahammad `-U` is short for `--update-snapshots – Forces a check for updated releases and snapshots on remote repositories`. As long as you don&#39;t purge `~/.m2/repository/` before, releases and snapshots are not going to be updated, since they are already there. Only snapshot versions that do not exist in the local repo are downloaded. `-U` just overrides the &quot;[**updatePolicy:** This element specifies how often updates should attempt to occur. \\[...\\] , `daily` (default), \\[...\\]](https://maven.apache.org/settings.html#Repositories)&quot;. ...cont&#39;d...","body":"@NizamMahammad <code>-U</code> is short for <code>--update-snapshots – Forces a check for updated releases and snapshots on remote repositories</code>. As long as you don&#39;t purge <code>~&#47;.m2&#47;repository&#47;</code> before, releases and snapshots are not going to be updated, since they are already there. Only snapshot versions that do not exist in the local repo are downloaded. <code>-U</code> just overrides the &quot;<a href=\"https://maven.apache.org/settings.html#Repositories\" rel=\"nofollow noreferrer\"><b>updatePolicy:</b> This element specifies how often updates should attempt to occur. &#91;...&#93; , <code>daily</code> (default), &#91;...&#93;</a>&quot;. ...cont&#39;d..."},{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1631749329,"post_id":59897594,"comment_id":122309059,"body_markdown":"...cont&#39;d... @NizamMahammad I&#39;m not 100 % sure about the following: &quot;_check for updated releases_&quot; could refer to what never ever should be done anyway: deploying a different (updated) artifact with the same release version. Many remote repo managers don&#39;t allow that by default but can be configured to allow such.","body":"...cont&#39;d... @NizamMahammad I&#39;m not 100 % sure about the following: &quot;<i>check for updated releases</i>&quot; could refer to what never ever should be done anyway: deploying a different (updated) artifact with the same release version. Many remote repo managers don&#39;t allow that by default but can be configured to allow such."}],"tags":[],"owner":{"account_id":16046590,"reputation":126,"user_id":11581545,"display_name":"Nizam Mahammad"},"comment_count":4,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1580191936,"creation_date":1579873164,"answer_id":59897594,"question_id":25393298,"body_markdown":" *Add below code in your pom.xml file and no need to remove local cache, It&#39;s works like a charm*\r\n\r\n   \r\n\r\n    &lt;distributionManagement&gt;\r\n           &lt;repository&gt;\r\n              &lt;id&gt;Central Maven repository&lt;/id&gt;\r\n              &lt;name&gt;Central Maven repository https&lt;/name&gt;\r\n              &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\r\n           &lt;/repository&gt;\r\n        &lt;/distributionManagement&gt;\r\n\r\n  \r\n\r\n&gt; Maven update with terminal\r\n\r\n    mvn -U clean install","title":"What is the correct way of forcing maven to use HTTPS for maven central?","body":"<p><em>Add below code in your pom.xml file and no need to remove local cache, It's works like a charm</em></p>\n\n<pre><code>&lt;distributionManagement&gt;\n       &lt;repository&gt;\n          &lt;id&gt;Central Maven repository&lt;/id&gt;\n          &lt;name&gt;Central Maven repository https&lt;/name&gt;\n          &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\n       &lt;/repository&gt;\n    &lt;/distributionManagement&gt;\n</code></pre>\n\n<blockquote>\n  <p>Maven update with terminal</p>\n</blockquote>\n\n<pre><code>mvn -U clean install\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15484486,"reputation":54,"user_id":11170876,"display_name":"Muhammad Faisal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589969456,"creation_date":1589969456,"answer_id":61910461,"question_id":25393298,"body_markdown":"for resolve this error you can add new  Repository as https://repo.maven.apache.org/maven2/\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Bt0Wx.png","title":"What is the correct way of forcing maven to use HTTPS for maven central?","body":"<p>for resolve this error you can add new  Repository as <a href=\"https://repo.maven.apache.org/maven2/\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2/</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Bt0Wx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Bt0Wx.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":8621513,"reputation":31,"user_id":6456280,"display_name":"padmender singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1590228370,"creation_date":1590228370,"answer_id":61970394,"question_id":25393298,"body_markdown":"I was also getting the same issue and tried all the possible ways by changing the proxies mapping but nothing works, finally i got the solution by adding the below code in setting.xml file in .m2 folder resolve the problem.\r\n\r\nNote: Working fine for me without enable the proxy in setting.xml.\r\n\r\n    &lt;settings&gt;\r\n\t&lt;mirrors&gt;\r\n\t\t&lt;mirror&gt;\r\n\t\t\t&lt;id&gt;internal-repository&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Maven Repository Manager running on https://repo1.maven.org/maven2&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\r\n\t\t\t&lt;mirrorOf&gt;*&lt;/mirrorOf&gt;\r\n\t\t&lt;/mirror&gt;\r\n\t&lt;/mirrors&gt;\r\n&lt;/settings&gt;\r\n","title":"What is the correct way of forcing maven to use HTTPS for maven central?","body":"<p>I was also getting the same issue and tried all the possible ways by changing the proxies mapping but nothing works, finally i got the solution by adding the below code in setting.xml file in .m2 folder resolve the problem.</p>\n\n<p>Note: Working fine for me without enable the proxy in setting.xml.</p>\n\n<pre><code>&lt;settings&gt;\n&lt;mirrors&gt;\n    &lt;mirror&gt;\n        &lt;id&gt;internal-repository&lt;/id&gt;\n        &lt;name&gt;Maven Repository Manager running on https://repo1.maven.org/maven2&lt;/name&gt;\n        &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\n        &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;\n    &lt;/mirror&gt;\n&lt;/mirrors&gt;\n</code></pre>\n\n<p></p>\n"},{"comments":[{"owner":{"account_id":3706253,"reputation":557,"user_id":3084706,"accept_rate":50,"display_name":"BKaun"},"score":0,"creation_date":1641919977,"post_id":62229890,"comment_id":124931618,"body_markdown":"Fantastic. This is the best solution with the least impact overhead, imo.  Thanks.","body":"Fantastic. This is the best solution with the least impact overhead, imo.  Thanks."}],"tags":[],"owner":{"account_id":3522398,"reputation":129,"user_id":2944348,"display_name":"Chaerun"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1591436328,"creation_date":1591436328,"answer_id":62229890,"question_id":25393298,"body_markdown":"Based on @Karussell, instead of deleting the whole **local repository**, you can fix it by deleting a specific package.\r\n\r\n 1. Install/Update maven to latest version (**&gt;= 3.2.3**)\r\n 2. Go to your local repository directory (**~/.m2/repository**)\r\n 3. Delete all packages under **org.apache.maven**: `rm -rf ~/.m2/repository/org/apache/maven/*`\r\n\r\nBy doing above steps, you will need to re-download some maven&#39;s packages, but doesn&#39;t need to re-download the whole packages.","title":"What is the correct way of forcing maven to use HTTPS for maven central?","body":"<p>Based on @Karussell, instead of deleting the whole <strong>local repository</strong>, you can fix it by deleting a specific package.</p>\n\n<ol>\n<li>Install/Update maven to latest version (<strong>>= 3.2.3</strong>)</li>\n<li>Go to your local repository directory (<strong>~/.m2/repository</strong>)</li>\n<li>Delete all packages under <strong>org.apache.maven</strong>: <code>rm -rf ~/.m2/repository/org/apache/maven/*</code></li>\n</ol>\n\n<p>By doing above steps, you will need to re-download some maven's packages, but doesn't need to re-download the whole packages.</p>\n"},{"comments":[{"owner":{"account_id":8806815,"reputation":10789,"user_id":6581173,"accept_rate":67,"display_name":"Marshal"},"score":0,"creation_date":1639778779,"post_id":69200638,"comment_id":124444389,"body_markdown":"NetBeans part was very helpful!","body":"NetBeans part was very helpful!"}],"tags":[],"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1631747001,"creation_date":1631747001,"answer_id":69200638,"question_id":25393298,"body_markdown":"This question was asked in a [recent question](https://stackoverflow.com/q/69200179/12567365). Since NetBeans was not specifically covered in existing answers here, I am adding the following.\r\n\r\n---\r\n\r\n**Short Answer** \r\n\r\nUpgrade Maven. The URLs you need to use (with the `https` protocol) will be provided in a suitably recent version of Maven. This is the simplest solution for older installations of NetBeans.\r\n\r\n---\r\n\r\n**Details**\r\n\r\nFor NetBeans 8.2, which uses version 3.0.5 as its bundled Maven version, you can upgrade Maven to at least version 3.2.3 (or later).\r\n\r\n**Check the Current Version**\r\n\r\nYou can check which version of Maven is being used by NetBeans as follows:\r\n\r\n - In the main menu, go to Tools &gt; Options.\r\n \r\n - Select the Java icon, and then the Maven tab below it.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Install an Upgraded Version**\r\n\r\nDownload and install Maven - for example, from here:\r\n\r\nhttps://maven.apache.org/download.cgi\r\n\r\nThe installation instructions are here:\r\n\r\nhttps://maven.apache.org/install.html\r\n\r\n**Update NetBeans**\r\n\r\nGo back to the location in NetBeans shown in the above screenshot.\r\n\r\nClick on the Maven Home drop-down and select &quot;browse...&quot;. Navigate to the location where you installed the new version of Maven - for example:\r\n\r\n    E:\\apache-maven-3.8.2-bin\\apache-maven-3.8.2\r\n\r\nYou should now see the new version reflected in NetBeans.\r\n\r\nClick OK.\r\n\r\nFinally, re-try the failed build command.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yqgnO.png","title":"What is the correct way of forcing maven to use HTTPS for maven central?","body":"<p>This question was asked in a <a href=\"https://stackoverflow.com/q/69200179/12567365\">recent question</a>. Since NetBeans was not specifically covered in existing answers here, I am adding the following.</p>\n<hr />\n<p><strong>Short Answer</strong></p>\n<p>Upgrade Maven. The URLs you need to use (with the <code>https</code> protocol) will be provided in a suitably recent version of Maven. This is the simplest solution for older installations of NetBeans.</p>\n<hr />\n<p><strong>Details</strong></p>\n<p>For NetBeans 8.2, which uses version 3.0.5 as its bundled Maven version, you can upgrade Maven to at least version 3.2.3 (or later).</p>\n<p><strong>Check the Current Version</strong></p>\n<p>You can check which version of Maven is being used by NetBeans as follows:</p>\n<ul>\n<li><p>In the main menu, go to Tools &gt; Options.</p>\n</li>\n<li><p>Select the Java icon, and then the Maven tab below it.</p>\n</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/yqgnO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yqgnO.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Install an Upgraded Version</strong></p>\n<p>Download and install Maven - for example, from here:</p>\n<p><a href=\"https://maven.apache.org/download.cgi\" rel=\"nofollow noreferrer\">https://maven.apache.org/download.cgi</a></p>\n<p>The installation instructions are here:</p>\n<p><a href=\"https://maven.apache.org/install.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/install.html</a></p>\n<p><strong>Update NetBeans</strong></p>\n<p>Go back to the location in NetBeans shown in the above screenshot.</p>\n<p>Click on the Maven Home drop-down and select &quot;browse...&quot;. Navigate to the location where you installed the new version of Maven - for example:</p>\n<pre><code>E:\\apache-maven-3.8.2-bin\\apache-maven-3.8.2\n</code></pre>\n<p>You should now see the new version reflected in NetBeans.</p>\n<p>Click OK.</p>\n<p>Finally, re-try the failed build command.</p>\n"}],"owner":{"account_id":66307,"reputation":17195,"user_id":194609,"accept_rate":73,"display_name":"Karussell"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72794,"favorite_count":0,"down_vote_count":1,"up_vote_count":42,"accepted_answer_id":25411658,"answer_count":8,"score":41,"last_activity_date":1672386048,"creation_date":1408483794,"question_id":25393298,"body_markdown":"Recently sonatype enabled maven central to support https ([background information][1]). I&#39;ve now added the following snippet to my pom.xml to force using https everywhere:\r\n\r\n    &lt;!-- force https --&gt;\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;central&lt;/id&gt;\r\n            &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;false&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n    &lt;pluginRepositories&gt;\r\n        &lt;pluginRepository&gt;\r\n            &lt;id&gt;central&lt;/id&gt;\r\n            &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;false&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n        &lt;/pluginRepository&gt;\r\n    &lt;/pluginRepositories&gt;\r\n\r\nQuestions:\r\n\r\n * Is this sufficient? Or will there be still http involved somewhere?\r\n * Is this the correct way of doing it? As I&#39;ve read that I should do this in the settings.xml instead. But then others using my (open source) project won&#39;t use the secure connection.\r\n\r\n**Update**\r\n\r\nIt does not look sufficient as for e.g. the assembly plugin still HTTP is used: \r\n    \r\n    [INFO] --- maven-assembly-plugin:2.4:single (make-assembly) @ graphhopper-web ---\r\n    Downloading: http://repo.maven.apache.org/maven2/org/slf4j/slf4j-jdk14/1.5.6/slf4j-jdk14-1.5.6.jar\r\n\r\n\r\n\r\n  [1]: http://blog.sonatype.com/2014/07/ssl_connectivity_for_central/#.U_PBTrvbBv8","title":"What is the correct way of forcing maven to use HTTPS for maven central?","body":"<p>Recently sonatype enabled maven central to support https (<a href=\"http://blog.sonatype.com/2014/07/ssl_connectivity_for_central/#.U_PBTrvbBv8\" rel=\"noreferrer\">background information</a>). I've now added the following snippet to my pom.xml to force using https everywhere:</p>\n\n<pre><code>&lt;!-- force https --&gt;\n&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;central&lt;/id&gt;\n        &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;/snapshots&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n&lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n        &lt;id&gt;central&lt;/id&gt;\n        &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;/snapshots&gt;\n    &lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n</code></pre>\n\n<p>Questions:</p>\n\n<ul>\n<li>Is this sufficient? Or will there be still http involved somewhere?</li>\n<li>Is this the correct way of doing it? As I've read that I should do this in the settings.xml instead. But then others using my (open source) project won't use the secure connection.</li>\n</ul>\n\n<p><strong>Update</strong></p>\n\n<p>It does not look sufficient as for e.g. the assembly plugin still HTTP is used: </p>\n\n<pre><code>[INFO] --- maven-assembly-plugin:2.4:single (make-assembly) @ graphhopper-web ---\nDownloading: http://repo.maven.apache.org/maven2/org/slf4j/slf4j-jdk14/1.5.6/slf4j-jdk14-1.5.6.jar\n</code></pre>\n"},{"tags":["java","json","rest","jackson"],"comments":[{"owner":{"account_id":1852014,"reputation":24139,"user_id":1678362,"display_name":"Aaron"},"score":2,"creation_date":1491922203,"post_id":43349265,"comment_id":73761863,"body_markdown":"The JSON you posted isn&#39;t valid : the JSON spec doesn&#39;t allow multiple objects side by side like this. I suppose you&#39;re receiving an array? If so, that must be your problem : you should handle the `root` as a `JsonArray` rather than a `JsonNode` and loop on its content","body":"The JSON you posted isn&#39;t valid : the JSON spec doesn&#39;t allow multiple objects side by side like this. I suppose you&#39;re receiving an array? If so, that must be your problem : you should handle the <code>root</code> as a <code>JsonArray</code> rather than a <code>JsonNode</code> and loop on its content"},{"owner":{"account_id":2100640,"reputation":588,"user_id":1868371,"accept_rate":100,"display_name":"Gerardo Cauich"},"score":0,"creation_date":1672277628,"post_id":43349265,"comment_id":132257996,"body_markdown":"I found this blog quite useful: [Line-delimited JSON with Jackson](https://cowtowncoder.medium.com/line-delimited-json-with-jackson-69c9e4cb6c00).","body":"I found this blog quite useful: <a href=\"https://cowtowncoder.medium.com/line-delimited-json-with-jackson-69c9e4cb6c00\" rel=\"nofollow noreferrer\">Line-delimited JSON with Jackson</a>."}],"answers":[{"comments":[{"owner":{"account_id":10642398,"reputation":6164,"user_id":7836976,"accept_rate":95,"display_name":"runnerpaul"},"score":0,"creation_date":1491923621,"post_id":43349730,"comment_id":73762887,"body_markdown":"It&#39;s not an array. Is it possible it&#39;s returning a text file containing lines for json?","body":"It&#39;s not an array. Is it possible it&#39;s returning a text file containing lines for json?"},{"owner":{"account_id":1852014,"reputation":24139,"user_id":1678362,"display_name":"Aaron"},"score":0,"creation_date":1491923953,"post_id":43349730,"comment_id":73763121,"body_markdown":"Yes, that&#39;s possible, but then the file content can&#39;t be parsed as a single JSON object (and the content-type of the response probably isn&#39;t application/json). If each line of the file contain a single JSON object and the JSON objects themselves don&#39;t contain any linefeed, you could iterate over the lines of the file and parse a JSON object from the content of each of them. I you confirm this I&#39;ll update my answer to handle such a file.","body":"Yes, that&#39;s possible, but then the file content can&#39;t be parsed as a single JSON object (and the content-type of the response probably isn&#39;t application/json). If each line of the file contain a single JSON object and the JSON objects themselves don&#39;t contain any linefeed, you could iterate over the lines of the file and parse a JSON object from the content of each of them. I you confirm this I&#39;ll update my answer to handle such a file."},{"owner":{"account_id":10642398,"reputation":6164,"user_id":7836976,"accept_rate":95,"display_name":"runnerpaul"},"score":0,"creation_date":1491924270,"post_id":43349730,"comment_id":73763336,"body_markdown":"Ah, I never thought of checking the response type. It&#39;s binary/octet-stream.\n\nEach line does contain a linefeed e.g:\n    &quot;{&quot;bytes&quot;: 5043, &quot;name&quot;: &quot;a&quot;, &quot;timestamp&quot;: &quot;11-Apr-2017 12:11:51&quot;, &quot;ds&quot;: &quot;Lab1&quot;}[\\n]&quot;","body":"Ah, I never thought of checking the response type. It&#39;s binary/octet-stream.  Each line does contain a linefeed e.g:     &quot;{&quot;bytes&quot;: 5043, &quot;name&quot;: &quot;a&quot;, &quot;timestamp&quot;: &quot;11-Apr-2017 12:11:51&quot;, &quot;ds&quot;: &quot;Lab1&quot;}[\\n]&quot;"},{"owner":{"account_id":8341524,"reputation":697,"user_id":6266706,"display_name":"Edgar Asatryan"},"score":0,"creation_date":1561840691,"post_id":43349730,"comment_id":100194406,"body_markdown":"Since Java 8 [Files.lines(Path path)](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-).","body":"Since Java 8 <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-\" rel=\"nofollow noreferrer\">Files.lines(Path path)</a>."}],"tags":[],"owner":{"account_id":1852014,"reputation":24139,"user_id":1678362,"display_name":"Aaron"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1491925258,"creation_date":1491923187,"answer_id":43349730,"question_id":43349265,"body_markdown":"The content you posted isn&#39;t valid JSON: the JSON spec doesn&#39;t allow multiple objects side by side like this.\r\n\r\nIf you encounter such text (it can&#39;t be considered JSON), you will want to split it over a delimiter so that each substring is a valid JSON object which you will be able to parse.  \r\nIn your case, it seems that linefeed is a valid delimiter, but you should make sure that your JSON objects will never contain any linefeed. If that&#39;s the case, you can parse your text as follows :\r\n\r\n    try(\r\n        FileReader reader = new FileReader(&quot;JsonRead/json2.json&quot;);\r\n        BufferedReader bufferedReader = new BufferedReader(reader);\r\n    ) {\r\n        String currentLine;\r\n        while((currentLine=bufferedReader.readLine()) != null) {\r\n            JsonNode logStorageNode = mapper.readTree(currentLine);\r\n            // [...] carry on with your current code.\r\n        }\r\n    }\r\n\r\n-------\r\n\r\nI first assumed you were receiving an array instead :\r\n\r\n    [\r\n        {&quot;bytes&quot;: 5043, &quot;name&quot;: &quot;a&quot;, &quot;timestamp&quot;: &quot;11-Apr-2017 12:11:51&quot;, &quot;ds&quot;: &quot;Lab1&quot;},\r\n        {&quot;bytes&quot;: 0, &quot;name&quot;: &quot;b&quot;, &quot;timestamp&quot;: &quot;11-Apr-2017 12:11:51&quot;, &quot;ds&quot;: &quot;Lab1&quot;},\r\n        {&quot;bytes&quot;: 11590, &quot;name&quot;: &quot;c&quot;, &quot;timestamp&quot;: &quot;11-Apr-2017 12:11:51&quot;, &quot;ds&quot;: &quot;Lab1&quot;}\r\n    ]\r\n\r\nIn that case, you should loop on its content :\r\n\r\n    JsonNode root = mapper.readTree(new File(&quot;JsonRead/json2.json&quot;));\r\n\r\n    if (!root.isArray()) {\r\n        throw WhateverException(&quot;A JSON Array is expected&quot;);\r\n    }\r\n\r\n    // a cast to ArrayNode would be possible, but isn&#39;t necessary\r\n    // as per the design of jackson&#39;s JsonNode\r\n    Iterator&lt;JsonNode&gt; it = root.iterator();\r\n\r\n    while (it.hasNext()) {\r\n        JsonNode logStorageNode = it.next();\r\n\r\n        // [...] carry on with your current code.\r\n    }","title":"How do I read multiple JSON lines (line-delimited)?","body":"<p>The content you posted isn't valid JSON: the JSON spec doesn't allow multiple objects side by side like this.</p>\n\n<p>If you encounter such text (it can't be considered JSON), you will want to split it over a delimiter so that each substring is a valid JSON object which you will be able to parse.<br>\nIn your case, it seems that linefeed is a valid delimiter, but you should make sure that your JSON objects will never contain any linefeed. If that's the case, you can parse your text as follows :</p>\n\n<pre><code>try(\n    FileReader reader = new FileReader(\"JsonRead/json2.json\");\n    BufferedReader bufferedReader = new BufferedReader(reader);\n) {\n    String currentLine;\n    while((currentLine=bufferedReader.readLine()) != null) {\n        JsonNode logStorageNode = mapper.readTree(currentLine);\n        // [...] carry on with your current code.\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>I first assumed you were receiving an array instead :</p>\n\n<pre><code>[\n    {\"bytes\": 5043, \"name\": \"a\", \"timestamp\": \"11-Apr-2017 12:11:51\", \"ds\": \"Lab1\"},\n    {\"bytes\": 0, \"name\": \"b\", \"timestamp\": \"11-Apr-2017 12:11:51\", \"ds\": \"Lab1\"},\n    {\"bytes\": 11590, \"name\": \"c\", \"timestamp\": \"11-Apr-2017 12:11:51\", \"ds\": \"Lab1\"}\n]\n</code></pre>\n\n<p>In that case, you should loop on its content :</p>\n\n<pre><code>JsonNode root = mapper.readTree(new File(\"JsonRead/json2.json\"));\n\nif (!root.isArray()) {\n    throw WhateverException(\"A JSON Array is expected\");\n}\n\n// a cast to ArrayNode would be possible, but isn't necessary\n// as per the design of jackson's JsonNode\nIterator&lt;JsonNode&gt; it = root.iterator();\n\nwhile (it.hasNext()) {\n    JsonNode logStorageNode = it.next();\n\n    // [...] carry on with your current code.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10642398,"reputation":6164,"user_id":7836976,"accept_rate":95,"display_name":"runnerpaul"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1491995157,"creation_date":1491995157,"answer_id":43367824,"question_id":43349265,"body_markdown":"Thanks guys. That was a big help.\r\n\r\nI edited the try slightly to suit my needs. Here&#39;s what I ended up with:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n\t\ttry(\r\n\t\t\t    FileReader reader = new FileReader(&quot;JsonRead/json2.json&quot;);\r\n\t\t\t    BufferedReader bufferedReader = new BufferedReader(reader);\r\n\t\t\t) {\r\n\t\t\t    String currentLine;\r\n\t\t\t    while((currentLine=bufferedReader.readLine()) != null) {\r\n\t\t\t    \tVault vlt = mapper.readValue(currentLine, Vault.class);\r\n\t\t\t        System.out.println(vlt.getBytes());\r\n\t\t        } \r\n\t\t\t}","title":"How do I read multiple JSON lines (line-delimited)?","body":"<p>Thanks guys. That was a big help.</p>\n\n<p>I edited the try slightly to suit my needs. Here's what I ended up with:</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\n    try(\n            FileReader reader = new FileReader(\"JsonRead/json2.json\");\n            BufferedReader bufferedReader = new BufferedReader(reader);\n        ) {\n            String currentLine;\n            while((currentLine=bufferedReader.readLine()) != null) {\n                Vault vlt = mapper.readValue(currentLine, Vault.class);\n                System.out.println(vlt.getBytes());\n            } \n        }\n</code></pre>\n"}],"owner":{"account_id":10642398,"reputation":6164,"user_id":7836976,"accept_rate":95,"display_name":"runnerpaul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7329,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":43367824,"answer_count":2,"score":2,"last_activity_date":1672386035,"creation_date":1491921975,"question_id":43349265,"body_markdown":"I get the below json from a url:\r\n\r\n    {&quot;bytes&quot;: 5043, &quot;name&quot;: &quot;a&quot;, &quot;timestamp&quot;: &quot;11-Apr-2017 12:11:51&quot;, &quot;ds&quot;: &quot;Lab1&quot;}\r\n    {&quot;bytes&quot;: 0, &quot;name&quot;: &quot;b&quot;, &quot;timestamp&quot;: &quot;11-Apr-2017 12:11:51&quot;, &quot;ds&quot;: &quot;Lab1&quot;}\r\n    {&quot;bytes&quot;: 11590, &quot;name&quot;: &quot;c&quot;, &quot;timestamp&quot;: &quot;11-Apr-2017 12:11:51&quot;, &quot;ds&quot;: &quot;Lab1&quot;}\r\n\r\nI want to return the bytes for each line. Using Jackson I&#39;ve tried parsing it as follows(note: json is saved to file for testing):\r\n\r\n    package JsonRead;\r\n\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n\r\n    import com.fasterxml.jackson.databind.JsonNode;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\n    public class JacksonTreeModelLogStorage {\r\n\t    public static void main(String[] args) {\r\n\t\t\r\n\t\t    try{\r\n\t\t\t\t\r\n\t\t\t    ObjectMapper mapper = new ObjectMapper();\r\n\t\t\t\t\r\n\t\t\t    JsonNode root = mapper.readTree(new File(&quot;JsonRead/json2.json&quot;));\r\n\t\t\t\r\n\t\t\t    JsonNode logStorageNode = root;\r\n\t\t\t\r\n\t\t\t    for(JsonNode node : logStorageNode){\r\n\t\t\t\t    String bytesUsed = node.path(&quot;bytes&quot;).asText();\r\n\t\t\t\t    System.out.println(&quot;Bytes Used: &quot; + bytesUsed);\r\n\t\t\t    }\r\n\t\t\t\r\n\t\t    } catch(IOException e){\r\n\t\t\t\t    System.out.println(&quot;IO Exception &quot; + e );\r\n\t\t    }\r\n\t    }\r\n    }\r\n\r\nThis returns the following:\r\n\r\n    Bytes Used: \r\n    Bytes Used: \r\n    Bytes Used: \r\n    Bytes Used: \r\n\r\nIf I then change my for loop to the following I can see I&#39;m returning the first line of json:\r\n\r\n    for(JsonNode node : logStorageNode){\r\n\t\t\t\tString json = node.asText();\r\n\t\t\t\tSystem.out.println(&quot;json: &quot; + a);\r\n\t}\r\n\r\nHow do I real the bytes for all lines of json?\r\n","title":"How do I read multiple JSON lines (line-delimited)?","body":"<p>I get the below json from a url:</p>\n\n<pre><code>{\"bytes\": 5043, \"name\": \"a\", \"timestamp\": \"11-Apr-2017 12:11:51\", \"ds\": \"Lab1\"}\n{\"bytes\": 0, \"name\": \"b\", \"timestamp\": \"11-Apr-2017 12:11:51\", \"ds\": \"Lab1\"}\n{\"bytes\": 11590, \"name\": \"c\", \"timestamp\": \"11-Apr-2017 12:11:51\", \"ds\": \"Lab1\"}\n</code></pre>\n\n<p>I want to return the bytes for each line. Using Jackson I've tried parsing it as follows(note: json is saved to file for testing):</p>\n\n<pre><code>package JsonRead;\n\nimport java.io.File;\nimport java.io.IOException;\n\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\npublic class JacksonTreeModelLogStorage {\n    public static void main(String[] args) {\n\n        try{\n\n            ObjectMapper mapper = new ObjectMapper();\n\n            JsonNode root = mapper.readTree(new File(\"JsonRead/json2.json\"));\n\n            JsonNode logStorageNode = root;\n\n            for(JsonNode node : logStorageNode){\n                String bytesUsed = node.path(\"bytes\").asText();\n                System.out.println(\"Bytes Used: \" + bytesUsed);\n            }\n\n        } catch(IOException e){\n                System.out.println(\"IO Exception \" + e );\n        }\n    }\n}\n</code></pre>\n\n<p>This returns the following:</p>\n\n<pre><code>Bytes Used: \nBytes Used: \nBytes Used: \nBytes Used: \n</code></pre>\n\n<p>If I then change my for loop to the following I can see I'm returning the first line of json:</p>\n\n<pre><code>for(JsonNode node : logStorageNode){\n            String json = node.asText();\n            System.out.println(\"json: \" + a);\n}\n</code></pre>\n\n<p>How do I real the bytes for all lines of json?</p>\n"},{"tags":["java","testing","mockito"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1672383010,"post_id":74958692,"comment_id":132279044,"body_markdown":"Does this answer your question? [getEnclosingMethod() returning Null](https://stackoverflow.com/questions/70767101/getenclosingmethod-returning-null)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/70767101/getenclosingmethod-returning-null\">getEnclosingMethod() returning Null</a>"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1672383215,"post_id":74958692,"comment_id":132279077,"body_markdown":"Or maybe this is a better answer https://stackoverflow.com/a/442773/29470","body":"Or maybe this is a better answer <a href=\"https://stackoverflow.com/a/442773/29470\">stackoverflow.com/a/442773/29470</a>"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1672383512,"post_id":74958692,"comment_id":132279123,"body_markdown":"In short, `Class.getEnclosingMethod` has nothing to do with the call stack. It tells you where the anonymous class is _defined_ (in this case, the lambda passed to `thenAnswer`).","body":"In short, <code>Class.getEnclosingMethod</code> has nothing to do with the call stack. It tells you where the anonymous class is <i>defined</i> (in this case, the lambda passed to <code>thenAnswer</code>)."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1672385860,"post_id":74958692,"comment_id":132279489,"body_markdown":"One of the problems and a partial solution: [Why is my class not calling my mocked methods in unit test?](https://stackoverflow.com/q/74027324/112968) (but not an exact dupe)","body":"One of the problems and a partial solution: <a href=\"https://stackoverflow.com/q/74027324/112968\">Why is my class not calling my mocked methods in unit test?</a> (but not an exact dupe)"}],"answers":[{"tags":[],"owner":{"account_id":9573972,"reputation":1131,"user_id":7110786,"display_name":"Saif Ahmad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672385698,"creation_date":1672385698,"answer_id":74959171,"question_id":74958692,"body_markdown":"You are not actually using the mock that you have created. You are still calling the `testMethod` method on the original `testMethod` object that is created in the `ClassToBeTested` constructor.\r\n\r\nTo use the mock that you have created, you need to inject it into the `ClassToBeTested` object and use it instead of the original `testMethod` object. You can do this by adding a setter method for the `testMethod` field in the `ClassToBeTested` class, and then using this setter to set the mock as the `testMethod` object before calling the `evaluateSomething` method.\r\n\r\nUpdated code below:\r\n\r\n    public class ClassToBeTested {\r\n        private TestMethod testMethod;\r\n\r\n        public ClassToBeTested() {\r\n            testMethod = new TestMethod();\r\n        }\r\n\r\n        public void setTestMethod(TestMethod testMethod) {\r\n            this.testMethod = testMethod;\r\n        }\r\n\r\n        public boolean evaluateSomething() {\r\n            boolean evaluation1Ans = evaluate1();\r\n            boolean evaluation2Ans = evaluate2();\r\n            return !evaluation1Ans &amp;&amp; evaluation2Ans;\r\n        }\r\n\r\n        public boolean evaluate1() {\r\n            boolean expr = testMethod.testMethod();\r\n            return expr;\r\n        }\r\n\r\n        public boolean evaluate2() {\r\n            return testMethod.testMethod() &amp;&amp; evaluateBooleanExpression();\r\n        }\r\n\r\n        private boolean evaluateBooleanExpression() {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    public class MockitoExperiment {\r\n        @Test\r\n        public void testEvaluateSomething() throws Exception {\r\n            ClassToBeTested classToBeTested = new ClassToBeTested();\r\n            TestMethod testMethod = mock(TestMethod.class);\r\n            when(testMethod.testMethod()).thenAnswer((Answer&lt;Boolean&gt;) invocationOnMock -&gt; {\r\n                if (new Object() {\r\n                }\r\n                        .getClass()\r\n                        .getEnclosingMethod()\r\n                        .getName().equals(&quot;evaluate2&quot;)) return true;\r\n                else\r\n                    return false;\r\n            });\r\n\r\n            classToBeTested.setTestMethod(testMethod);//setting the object here\r\n            boolean flag = classToBeTested.evaluateSomething();\r\n            System.out.print(&quot;&quot;);\r\n        }\r\n    }\r\n","title":"Mocking function call when called from certain method","body":"<p>You are not actually using the mock that you have created. You are still calling the <code>testMethod</code> method on the original <code>testMethod</code> object that is created in the <code>ClassToBeTested</code> constructor.</p>\n<p>To use the mock that you have created, you need to inject it into the <code>ClassToBeTested</code> object and use it instead of the original <code>testMethod</code> object. You can do this by adding a setter method for the <code>testMethod</code> field in the <code>ClassToBeTested</code> class, and then using this setter to set the mock as the <code>testMethod</code> object before calling the <code>evaluateSomething</code> method.</p>\n<p>Updated code below:</p>\n<pre><code>public class ClassToBeTested {\n    private TestMethod testMethod;\n\n    public ClassToBeTested() {\n        testMethod = new TestMethod();\n    }\n\n    public void setTestMethod(TestMethod testMethod) {\n        this.testMethod = testMethod;\n    }\n\n    public boolean evaluateSomething() {\n        boolean evaluation1Ans = evaluate1();\n        boolean evaluation2Ans = evaluate2();\n        return !evaluation1Ans &amp;&amp; evaluation2Ans;\n    }\n\n    public boolean evaluate1() {\n        boolean expr = testMethod.testMethod();\n        return expr;\n    }\n\n    public boolean evaluate2() {\n        return testMethod.testMethod() &amp;&amp; evaluateBooleanExpression();\n    }\n\n    private boolean evaluateBooleanExpression() {\n        return true;\n    }\n}\n\npublic class MockitoExperiment {\n    @Test\n    public void testEvaluateSomething() throws Exception {\n        ClassToBeTested classToBeTested = new ClassToBeTested();\n        TestMethod testMethod = mock(TestMethod.class);\n        when(testMethod.testMethod()).thenAnswer((Answer&lt;Boolean&gt;) invocationOnMock -&gt; {\n            if (new Object() {\n            }\n                    .getClass()\n                    .getEnclosingMethod()\n                    .getName().equals(&quot;evaluate2&quot;)) return true;\n            else\n                return false;\n        });\n\n        classToBeTested.setTestMethod(testMethod);//setting the object here\n        boolean flag = classToBeTested.evaluateSomething();\n        System.out.print(&quot;&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":896884,"reputation":43,"user_id":933940,"display_name":"faster_fene"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672385698,"creation_date":1672381004,"question_id":74958692,"body_markdown":"I am facing a scenario where I have to mock a certain method only when it is being invoked from very specific method. For example here is the sample code:\r\n\r\n    public class TestMethod {\r\n        public boolean testMethod() {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public class ClassToBeTested {\r\n        private TestMethod testMethod;\r\n    \r\n        public ClassToBeTested() {\r\n            testMethod = new TestMethod();\r\n        }\r\n        public boolean evaluateSomething() {\r\n            boolean evaluation1Ans = evaluate1();\r\n            boolean evaluation2Ans = evaluate2();\r\n            return !evaluation1Ans &amp;&amp; evaluation2Ans;\r\n        }\r\n    \r\n        public boolean evaluate1() {\r\n            boolean expr = testMethod.testMethod();\r\n            return expr;\r\n        }\r\n    \r\n        public boolean evaluate2() {\r\n            return testMethod.testMethod() &amp;&amp; evaluateBooleanExpression();\r\n        }\r\n    \r\n        private boolean evaluateBooleanExpression() {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    public class MockitoExperiement {\r\n        @Test\r\n        public void testEvaluateSomething() throws Exception {\r\n            ClassToBeTested classToBeTested = new ClassToBeTested();\r\n            TestMethod testMethod = mock(TestMethod.class);\r\n            when(testMethod.testMethod()).thenAnswer((Answer&lt;Boolean&gt;) invocationOnMock -&gt; {\r\n                if(new Object() {}\r\n                        .getClass()\r\n                        .getEnclosingMethod()\r\n                        .getName().equals(&quot;evaluate2&quot;)) return true;\r\n                else\r\n                    return false;\r\n            });\r\n    \r\n            boolean flag = classToBeTested.evaluateSomething();\r\n            System.out.print(&quot;&quot;);\r\n        }\r\n    }\r\n\r\nHere despite doing conditional mocking I am still receiving false from the method to be invoked. Where I am making a mistake in this sample?","title":"Mocking function call when called from certain method","body":"<p>I am facing a scenario where I have to mock a certain method only when it is being invoked from very specific method. For example here is the sample code:</p>\n<pre><code>public class TestMethod {\n    public boolean testMethod() {\n        return false;\n    }\n}\n\npublic class ClassToBeTested {\n    private TestMethod testMethod;\n\n    public ClassToBeTested() {\n        testMethod = new TestMethod();\n    }\n    public boolean evaluateSomething() {\n        boolean evaluation1Ans = evaluate1();\n        boolean evaluation2Ans = evaluate2();\n        return !evaluation1Ans &amp;&amp; evaluation2Ans;\n    }\n\n    public boolean evaluate1() {\n        boolean expr = testMethod.testMethod();\n        return expr;\n    }\n\n    public boolean evaluate2() {\n        return testMethod.testMethod() &amp;&amp; evaluateBooleanExpression();\n    }\n\n    private boolean evaluateBooleanExpression() {\n        return true;\n    }\n}\n\npublic class MockitoExperiement {\n    @Test\n    public void testEvaluateSomething() throws Exception {\n        ClassToBeTested classToBeTested = new ClassToBeTested();\n        TestMethod testMethod = mock(TestMethod.class);\n        when(testMethod.testMethod()).thenAnswer((Answer&lt;Boolean&gt;) invocationOnMock -&gt; {\n            if(new Object() {}\n                    .getClass()\n                    .getEnclosingMethod()\n                    .getName().equals(&quot;evaluate2&quot;)) return true;\n            else\n                return false;\n        });\n\n        boolean flag = classToBeTested.evaluateSomething();\n        System.out.print(&quot;&quot;);\n    }\n}\n</code></pre>\n<p>Here despite doing conditional mocking I am still receiving false from the method to be invoked. Where I am making a mistake in this sample?</p>\n"},{"tags":["java","jboss","containers"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1672598688,"post_id":74959135,"comment_id":132311305,"body_markdown":"What does your configuration look like? That looks like an issue with the logging configuration.","body":"What does your configuration look like? That looks like an issue with the logging configuration."}],"owner":{"account_id":6957077,"reputation":11,"user_id":5337800,"display_name":"anilkumar panditi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":390,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672385335,"creation_date":1672385335,"question_id":74959135,"body_markdown":"trying to deploy a Java app with JBoss EAP 7.4.7.GA Image , but getting below error , tried to increase no of threads, and timeout in Java options.\r\n\r\n-Xmx2048m -Xms1024m -Dorg.jboss.server.bootstrap.maxThreads=60 -Djboss.as.management.blocking.timeout=600\r\n\r\n    2022-12-30 00:19:55,850 WARNING retrying as app-sec framework configuration failed with error:\r\n    Return Code: 1\r\n    StdOut:\r\n    Failed to connect to the controller: Timeout waiting for the system to boot.\r\n    \r\n    StdErr:\r\n    \r\n    00:20:07,136 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0348: Timeout after [300] seconds waiting for service container stability. Operation will roll back. Step that first updated the service container was &#39;add&#39; at address &#39;[\r\n        (&quot;core-service&quot; =&gt; &quot;management&quot;),\r\n        (&quot;management-interface&quot; =&gt; &quot;http-interface&quot;)\r\n    ]&#39;\r\n    Failed to invoke setter setOverflowAction with value null\r\n    .java.lang.reflect.InvocationTargetException\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n            at org.jboss.logmanager.config.AbstractPropertyConfiguration$1.lambda$rollback$2(AbstractPropertyConfiguration.java:255)\r\n            at org.jboss.logmanager.config.WrappedAction.execute(WrappedAction.java:61)\r\n            at org.jboss.logmanager.config.AbstractPropertyConfiguration$1.rollback(AbstractPropertyConfiguration.java:235)\r\n            at org.jboss.logmanager.config.LogContextConfigurationImpl.doForget(LogContextConfigurationImpl.java:355)\r\n            at org.jboss.logmanager.config.LogContextConfigurationImpl.forget(LogContextConfigurationImpl.java:319)\r\n            at org.jboss.as.logging.logmanager.ConfigurationPersistence.forget(ConfigurationPersistence.java:341)\r\n            at org.jboss.as.logging.logmanager.ConfigurationPersistence.rollback(ConfigurationPersistence.java:349)\r\n            at org.jboss.as.logging.LoggingOperations$CommitOperationStepHandler$1.handleResult(LoggingOperations.java:152)\r\n            at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1581)\r\n            at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1563)\r\n            at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1520)\r\n            at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1493)\r\n            at org.jboss.as.controller.AbstractOperationContext$Step.access$400(AbstractOperationContext.java:1367)\r\n            at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:447)\r\n            at java.lang.Thread.run(Thread.java:750)\r\n    Caused by: java.lang.NullPointerException: overflowAction is null\r\n            at org.jboss.logmanager.handlers.AsyncHandler.setOverflowAction(AsyncHandler.java:117)\r\n            ... 28 more\r\n\r\n","title":"JBoss JBoss EAP 7.4.7.GA, Caused by: java.lang.NullPointerException: overflowAction is null","body":"<p>trying to deploy a Java app with JBoss EAP 7.4.7.GA Image , but getting below error , tried to increase no of threads, and timeout in Java options.</p>\n<p>-Xmx2048m -Xms1024m -Dorg.jboss.server.bootstrap.maxThreads=60 -Djboss.as.management.blocking.timeout=600</p>\n<pre><code>2022-12-30 00:19:55,850 WARNING retrying as app-sec framework configuration failed with error:\nReturn Code: 1\nStdOut:\nFailed to connect to the controller: Timeout waiting for the system to boot.\n\nStdErr:\n\n00:20:07,136 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0348: Timeout after [300] seconds waiting for service container stability. Operation will roll back. Step that first updated the service container was 'add' at address '[\n    (&quot;core-service&quot; =&gt; &quot;management&quot;),\n    (&quot;management-interface&quot; =&gt; &quot;http-interface&quot;)\n]'\nFailed to invoke setter setOverflowAction with value null\n.java.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.jboss.logmanager.config.AbstractPropertyConfiguration$1.lambda$rollback$2(AbstractPropertyConfiguration.java:255)\n        at org.jboss.logmanager.config.WrappedAction.execute(WrappedAction.java:61)\n        at org.jboss.logmanager.config.AbstractPropertyConfiguration$1.rollback(AbstractPropertyConfiguration.java:235)\n        at org.jboss.logmanager.config.LogContextConfigurationImpl.doForget(LogContextConfigurationImpl.java:355)\n        at org.jboss.logmanager.config.LogContextConfigurationImpl.forget(LogContextConfigurationImpl.java:319)\n        at org.jboss.as.logging.logmanager.ConfigurationPersistence.forget(ConfigurationPersistence.java:341)\n        at org.jboss.as.logging.logmanager.ConfigurationPersistence.rollback(ConfigurationPersistence.java:349)\n        at org.jboss.as.logging.LoggingOperations$CommitOperationStepHandler$1.handleResult(LoggingOperations.java:152)\n        at org.jboss.as.controller.AbstractOperationContext$Step.invokeResultHandler(AbstractOperationContext.java:1581)\n        at org.jboss.as.controller.AbstractOperationContext$Step.handleResult(AbstractOperationContext.java:1563)\n        at org.jboss.as.controller.AbstractOperationContext$Step.finalizeInternal(AbstractOperationContext.java:1520)\n        at org.jboss.as.controller.AbstractOperationContext$Step.finalizeStep(AbstractOperationContext.java:1493)\n        at org.jboss.as.controller.AbstractOperationContext$Step.access$400(AbstractOperationContext.java:1367)\n        at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:447)\n        at java.lang.Thread.run(Thread.java:750)\nCaused by: java.lang.NullPointerException: overflowAction is null\n        at org.jboss.logmanager.handlers.AsyncHandler.setOverflowAction(AsyncHandler.java:117)\n        ... 28 more\n</code></pre>\n"},{"tags":["java","android","android-viewpager","android-pageradapter"],"comments":[{"owner":{"account_id":3799847,"reputation":3050,"user_id":3153792,"display_name":"corsair992"},"score":3,"creation_date":1423182632,"post_id":28356506,"comment_id":45056598,"body_markdown":"Replace `o.getClass()==view.getClass()` with `o==view` in the `isViewFromObject()` method.","body":"Replace <code>o.getClass()==view.getClass()</code> with <code>o==view</code> in the <code>isViewFromObject()</code> method."}],"answers":[{"comments":[{"owner":{"account_id":5267123,"reputation":710,"user_id":4206663,"accept_rate":38,"display_name":"pewpew"},"score":0,"creation_date":1506467646,"post_id":28357193,"comment_id":79831116,"body_markdown":"Is the view pager inside of the MainActivity xml file?","body":"Is the view pager inside of the MainActivity xml file?"},{"owner":{"account_id":16027706,"reputation":150,"user_id":11567530,"display_name":"Ahmed Elsayed"},"score":0,"creation_date":1617189566,"post_id":28357193,"comment_id":118233290,"body_markdown":"Please , the height of the viewPager is not equal to the height of the items .. the items are shown cut and the height is not correct , how can I fix this , here is my question\nhttps://stackoverflow.com/q/66862287/11567530","body":"Please , the height of the viewPager is not equal to the height of the items .. the items are shown cut and the height is not correct , how can I fix this , here is my question <a href=\"https://stackoverflow.com/q/66862287/11567530\">stackoverflow.com/q/66862287/11567530</a>"}],"tags":[],"owner":{"account_id":4353455,"reputation":300,"user_id":3552945,"display_name":"633kM"},"comment_count":2,"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1423187704,"creation_date":1423186526,"answer_id":28357193,"question_id":28356506,"body_markdown":"Here is complete code:\r\n\r\nxml layout:\r\n\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;\r\n        android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\r\n        android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\r\n        android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        tools:context=&quot;com.example.androidviewpagerapp.MainActivity&quot; &gt;\r\n    \r\n        &lt;android.support.v4.view.ViewPager\r\n            android:id=&quot;@+id/pager&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;/&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\nMyPagerAdapter class:\r\n\r\n    import android.support.v4.view.PagerAdapter;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.Button;\r\n    import android.widget.Toast;\r\n    \r\n    public class MyPagerAdapter extends PagerAdapter {\r\n    \r\n        @Override\r\n        public int getCount() {\r\n            return 10;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isViewFromObject(View view, Object o) {\r\n            return o==view;\r\n        }\r\n    \r\n        @Override\r\n        public Object instantiateItem(final ViewGroup container, int position) {\r\n            Button button = new Button(container.getContext());\r\n            ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);\r\n            button.setLayoutParams(params);\r\n            button.setText(String.valueOf(position));\r\n    \r\n            final int page = position;\r\n            button.setOnClickListener(new View.OnClickListener() {\r\n    \r\n                @Override\r\n                public void onClick(View v) {\r\n                    Toast.makeText(container.getContext(), &quot;You clicked: &quot; + page + &quot;. page.&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n    \r\n            container.addView(button);\r\n            return button;\r\n        }\r\n    \r\n        @Override\r\n        public void destroyItem(ViewGroup container, int position, Object object) {\r\n            container.removeView((Button)object);\r\n        }\r\n    }\r\n\r\nMainActivity:\r\n\r\n    import android.support.v4.view.ViewPager;\r\n    import android.app.Activity;\r\n    import android.os.Bundle;\r\n    \r\n    public class MainActivity extends Activity {\r\n        ViewPager viewPager;\r\n        MyPagerAdapter myPagerAdapter;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            viewPager = (ViewPager)findViewById(R.id.pager);\r\n            myPagerAdapter = new MyPagerAdapter();\r\n            viewPager.setAdapter(myPagerAdapter);\r\n        }\r\n    }\r\n\r\nYou will see that Buttons are full screen. To avoid that you need to create some layout (like LinearLayout) and add button to that layout.\r\n\r\nExample:\r\n\r\n    import android.support.v4.view.PagerAdapter;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.Button;\r\n    import android.widget.LinearLayout;\r\n    import android.widget.Toast;\r\n    \r\n    public class MyPagerAdapter extends PagerAdapter {\r\n    \r\n        @Override\r\n        public int getCount() {\r\n            return 10;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isViewFromObject(View view, Object o) {\r\n            return o==view;\r\n        }\r\n    \r\n        @Override\r\n        public Object instantiateItem(final ViewGroup container, int position) {\r\n            Button button = new Button(container.getContext());\r\n            ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);\r\n            button.setLayoutParams(params);\r\n            button.setText(String.valueOf(position));\r\n    \r\n            LinearLayout layout = new LinearLayout(container.getContext());\r\n            layout.setOrientation(LinearLayout.VERTICAL);\r\n            ViewGroup.LayoutParams layoutParams = new ViewGroup.LayoutParams(\r\n                    ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);\r\n    \r\n            //add buton to layout\r\n            layout.addView(button);\r\n    \r\n            final int page = position;\r\n            button.setOnClickListener(new View.OnClickListener() {\r\n    \r\n                @Override\r\n                public void onClick(View v) {\r\n                    Toast.makeText(container.getContext(), &quot;You clicked: &quot; + page + &quot;. page.&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n            //to container add layout instead of button\r\n            container.addView(layout);\r\n            //return layout instead of button\r\n            return layout;\r\n        }\r\n    \r\n        @Override\r\n        public void destroyItem(ViewGroup container, int position, Object object) {\r\n            //cast to LinearLayout\r\n            container.removeView((LinearLayout)object);\r\n        }\r\n    }","title":"Correctly implementing PagerAdapter in Android","body":"<p>Here is complete code:</p>\n\n<p>xml layout:</p>\n\n<pre><code>&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:paddingBottom=\"@dimen/activity_vertical_margin\"\n    android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n    android:paddingRight=\"@dimen/activity_horizontal_margin\"\n    android:paddingTop=\"@dimen/activity_vertical_margin\"\n    android:orientation=\"vertical\"\n    tools:context=\"com.example.androidviewpagerapp.MainActivity\" &gt;\n\n    &lt;android.support.v4.view.ViewPager\n        android:id=\"@+id/pager\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"/&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>MyPagerAdapter class:</p>\n\n<pre><code>import android.support.v4.view.PagerAdapter;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.Toast;\n\npublic class MyPagerAdapter extends PagerAdapter {\n\n    @Override\n    public int getCount() {\n        return 10;\n    }\n\n    @Override\n    public boolean isViewFromObject(View view, Object o) {\n        return o==view;\n    }\n\n    @Override\n    public Object instantiateItem(final ViewGroup container, int position) {\n        Button button = new Button(container.getContext());\n        ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);\n        button.setLayoutParams(params);\n        button.setText(String.valueOf(position));\n\n        final int page = position;\n        button.setOnClickListener(new View.OnClickListener() {\n\n            @Override\n            public void onClick(View v) {\n                Toast.makeText(container.getContext(), \"You clicked: \" + page + \". page.\", Toast.LENGTH_SHORT).show();\n            }\n        });\n\n        container.addView(button);\n        return button;\n    }\n\n    @Override\n    public void destroyItem(ViewGroup container, int position, Object object) {\n        container.removeView((Button)object);\n    }\n}\n</code></pre>\n\n<p>MainActivity:</p>\n\n<pre><code>import android.support.v4.view.ViewPager;\nimport android.app.Activity;\nimport android.os.Bundle;\n\npublic class MainActivity extends Activity {\n    ViewPager viewPager;\n    MyPagerAdapter myPagerAdapter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        viewPager = (ViewPager)findViewById(R.id.pager);\n        myPagerAdapter = new MyPagerAdapter();\n        viewPager.setAdapter(myPagerAdapter);\n    }\n}\n</code></pre>\n\n<p>You will see that Buttons are full screen. To avoid that you need to create some layout (like LinearLayout) and add button to that layout.</p>\n\n<p>Example:</p>\n\n<pre><code>import android.support.v4.view.PagerAdapter;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.LinearLayout;\nimport android.widget.Toast;\n\npublic class MyPagerAdapter extends PagerAdapter {\n\n    @Override\n    public int getCount() {\n        return 10;\n    }\n\n    @Override\n    public boolean isViewFromObject(View view, Object o) {\n        return o==view;\n    }\n\n    @Override\n    public Object instantiateItem(final ViewGroup container, int position) {\n        Button button = new Button(container.getContext());\n        ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);\n        button.setLayoutParams(params);\n        button.setText(String.valueOf(position));\n\n        LinearLayout layout = new LinearLayout(container.getContext());\n        layout.setOrientation(LinearLayout.VERTICAL);\n        ViewGroup.LayoutParams layoutParams = new ViewGroup.LayoutParams(\n                ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);\n\n        //add buton to layout\n        layout.addView(button);\n\n        final int page = position;\n        button.setOnClickListener(new View.OnClickListener() {\n\n            @Override\n            public void onClick(View v) {\n                Toast.makeText(container.getContext(), \"You clicked: \" + page + \". page.\", Toast.LENGTH_SHORT).show();\n            }\n        });\n        //to container add layout instead of button\n        container.addView(layout);\n        //return layout instead of button\n        return layout;\n    }\n\n    @Override\n    public void destroyItem(ViewGroup container, int position, Object object) {\n        //cast to LinearLayout\n        container.removeView((LinearLayout)object);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5339189,"reputation":255,"user_id":4256973,"accept_rate":71,"display_name":"n00dles"},"score":0,"creation_date":1557281699,"post_id":37916222,"comment_id":98708328,"body_markdown":"I thought you must always override these [four methods](https://developer.android.com/reference/kotlin/androidx/viewpager/widget/PagerAdapter) at minimum?","body":"I thought you must always override these <a href=\"https://developer.android.com/reference/kotlin/androidx/viewpager/widget/PagerAdapter\" rel=\"nofollow noreferrer\">four methods</a> at minimum?"}],"tags":[],"owner":{"account_id":4275999,"reputation":34098,"user_id":3496570,"accept_rate":39,"display_name":"Zar E Ahmer"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1466406067,"creation_date":1466405593,"answer_id":37916222,"question_id":28356506,"body_markdown":"&gt;if you want to inflate views in pager you must have to implement two methods.\r\n**instantiateItem and destroyItem**\r\n\r\n\r\n    public class DialogPagerAdapter extends PagerAdapter {\r\n    \r\n        private Context mContext;\r\n    \r\n        //view inflating..\r\n        @Override\r\n        public Object instantiateItem(ViewGroup collection, int position) {\r\n            LayoutInflater inflater = LayoutInflater.from(mContext);\r\n            ViewGroup layout = (ViewGroup) inflater.inflate(R.layout.account_dialog_signin_viewpagers,\r\n                    collection, false);\r\n    \r\n            TextView tvLabel = (TextView) layout.findViewById(R.id.textView);\r\n            switch (position) {\r\n                case 0:\r\n                    tvLabel.setText(&quot;Log In&quot;);\r\n                    tvLabel.setOnClickListener(new View.OnClickListener() {\r\n    \r\n                        @Override\r\n                        public void onClick(View v) {\r\n                        }\r\n                    });\r\n                    break;\r\n                case 1:\r\n                    tvLabel.setText(&quot;Sign Up&quot;);\r\n                    tvLabel.setOnClickListener(new View.OnClickListener() {\r\n    \r\n                        @Override\r\n                        public void onClick(View v) {\r\n                        }\r\n                    });\r\n                    break;\r\n                case 2:\r\n                    tvLabel.setText(&quot;Send Reset Link&quot;);\r\n                    tvLabel.setOnClickListener(new View.OnClickListener() {\r\n    \r\n                        @Override\r\n                        public void onClick(View v) {\r\n                            //onOptionClickForgot.OnOptionClick();\r\n                        }\r\n                    });\r\n                    break;\r\n            }\r\n    \r\n            collection.addView(layout);\r\n            return layout;\r\n        }\r\n    \r\n        @Override\r\n        public void destroyItem(ViewGroup collection, int position, Object view) {\r\n            collection.removeView((View) view);\r\n    }\r\n    \r\n        @Override\r\n        public int getCount() {\r\n            return 3;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isViewFromObject(View view, Object object) {\r\n            return view == object;\r\n        }\r\n    }\r\n\r\nSimply call it like \r\n\r\n    viewPager.setAdapter(new DialogPagerAdapter);\r\n\r\n**xml**\r\n\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;@dimen/dialog_button_height&quot;\r\n        android:paddingLeft=&quot;@dimen/dimen_2&quot;\r\n        android:paddingRight=&quot;@dimen/dimen_2&quot;\r\n        android:minHeight=&quot;@dimen/dialog_button_height&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/textView&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_centerInParent=&quot;true&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:text=&quot;@string/app_name&quot;\r\n            android:textColor=&quot;@color/white&quot;\r\n            android:textSize=&quot;@dimen/text_size_medium&quot; /&gt;\r\n    &lt;/RelativeLayout&gt;","title":"Correctly implementing PagerAdapter in Android","body":"<blockquote>\n  <p>if you want to inflate views in pager you must have to implement two methods.\n  <strong>instantiateItem and destroyItem</strong></p>\n</blockquote>\n\n<pre><code>public class DialogPagerAdapter extends PagerAdapter {\n\n    private Context mContext;\n\n    //view inflating..\n    @Override\n    public Object instantiateItem(ViewGroup collection, int position) {\n        LayoutInflater inflater = LayoutInflater.from(mContext);\n        ViewGroup layout = (ViewGroup) inflater.inflate(R.layout.account_dialog_signin_viewpagers,\n                collection, false);\n\n        TextView tvLabel = (TextView) layout.findViewById(R.id.textView);\n        switch (position) {\n            case 0:\n                tvLabel.setText(\"Log In\");\n                tvLabel.setOnClickListener(new View.OnClickListener() {\n\n                    @Override\n                    public void onClick(View v) {\n                    }\n                });\n                break;\n            case 1:\n                tvLabel.setText(\"Sign Up\");\n                tvLabel.setOnClickListener(new View.OnClickListener() {\n\n                    @Override\n                    public void onClick(View v) {\n                    }\n                });\n                break;\n            case 2:\n                tvLabel.setText(\"Send Reset Link\");\n                tvLabel.setOnClickListener(new View.OnClickListener() {\n\n                    @Override\n                    public void onClick(View v) {\n                        //onOptionClickForgot.OnOptionClick();\n                    }\n                });\n                break;\n        }\n\n        collection.addView(layout);\n        return layout;\n    }\n\n    @Override\n    public void destroyItem(ViewGroup collection, int position, Object view) {\n        collection.removeView((View) view);\n}\n\n    @Override\n    public int getCount() {\n        return 3;\n    }\n\n    @Override\n    public boolean isViewFromObject(View view, Object object) {\n        return view == object;\n    }\n}\n</code></pre>\n\n<p>Simply call it like </p>\n\n<pre><code>viewPager.setAdapter(new DialogPagerAdapter);\n</code></pre>\n\n<p><strong>xml</strong></p>\n\n<pre><code>&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"@dimen/dialog_button_height\"\n    android:paddingLeft=\"@dimen/dimen_2\"\n    android:paddingRight=\"@dimen/dimen_2\"\n    android:minHeight=\"@dimen/dialog_button_height\"&gt;\n\n    &lt;TextView\n        android:id=\"@+id/textView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_centerInParent=\"true\"\n        android:gravity=\"center\"\n        android:text=\"@string/app_name\"\n        android:textColor=\"@color/white\"\n        android:textSize=\"@dimen/text_size_medium\" /&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21992727,"reputation":39,"user_id":16265809,"display_name":"Urvish Vocsy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672385227,"creation_date":1672385227,"answer_id":74959125,"question_id":28356506,"body_markdown":"Here i post `ViewPagerAdapter` that attached between `TabLayout` to `ViewPager`\r\n\r\n```java\r\npublic class ViewPagerAdapter extends FragmentPagerAdapter {\r\n\r\n    ArrayList&lt;String&gt; titleList = new ArrayList&lt;&gt;();\r\n    List&lt;Fragment&gt; fragment = new ArrayList&lt;&gt;();\r\n\r\n    public void addFragment(String title, Fragment fragment) {\r\n        this.titleList.add(title);\r\n        this.fragment.add(fragment);\r\n    }\r\n\r\n    public ViewPagerAdapter(FragmentManager fm) {\r\n        super(fm);\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public Fragment getItem(int position) {\r\n        return fragment.get(position);\r\n    }\r\n\r\n    @Override\r\n    public int getCount() {\r\n        return titleList.size();\r\n    }\r\n\r\n    public CharSequence getPageTitle(int position) {\r\n        return titleList.get(position);\r\n    }\r\n}\r\n```\r\n\r\nHow to use `ViewPagerAdapter`.\r\n\r\n```java\r\n ViewPagerAdapter adapter = new ViewPagerAdapter(getSupportFragmentManager());\r\n adapter.addFragment(&quot;TAB 1&quot;, new YOUR_FRAGMENT1());\r\n adapter.addFragment(&quot;TAB 2&quot;, new YOUR_FRAGMENT2());\r\n // Keep adding fragments.\r\n viewPager.setAdapter(adapter);\r\n tabLayout.setupWithViewPager(viewPager);\r\n```","title":"Correctly implementing PagerAdapter in Android","body":"<p>Here i post <code>ViewPagerAdapter</code> that attached between <code>TabLayout</code> to <code>ViewPager</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ViewPagerAdapter extends FragmentPagerAdapter {\n\n    ArrayList&lt;String&gt; titleList = new ArrayList&lt;&gt;();\n    List&lt;Fragment&gt; fragment = new ArrayList&lt;&gt;();\n\n    public void addFragment(String title, Fragment fragment) {\n        this.titleList.add(title);\n        this.fragment.add(fragment);\n    }\n\n    public ViewPagerAdapter(FragmentManager fm) {\n        super(fm);\n    }\n\n    @NonNull\n    @Override\n    public Fragment getItem(int position) {\n        return fragment.get(position);\n    }\n\n    @Override\n    public int getCount() {\n        return titleList.size();\n    }\n\n    public CharSequence getPageTitle(int position) {\n        return titleList.get(position);\n    }\n}\n</code></pre>\n<p>How to use <code>ViewPagerAdapter</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code> ViewPagerAdapter adapter = new ViewPagerAdapter(getSupportFragmentManager());\n adapter.addFragment(&quot;TAB 1&quot;, new YOUR_FRAGMENT1());\n adapter.addFragment(&quot;TAB 2&quot;, new YOUR_FRAGMENT2());\n // Keep adding fragments.\n viewPager.setAdapter(adapter);\n tabLayout.setupWithViewPager(viewPager);\n</code></pre>\n"}],"owner":{"account_id":2046668,"reputation":131,"user_id":1826607,"display_name":"oriskop"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42614,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":3,"score":11,"last_activity_date":1672385227,"creation_date":1423181868,"question_id":28356506,"body_markdown":"I have problems with implementation of my custom PagerAdapter and using it with a ViewPager.\r\nThis sample PagerAdapter has 10 items, every item is a button with it&#39;s index as text.\r\nWhen I run my program, I see a button with text &#39;1&#39; insted of &#39;0&#39;. And when I swipe to other items I get only blank views. When I swipe backwards sometimes I see a button with some number, but it disappears (maybe it is destroying and I remove it from the container), and sometimes I see a button with a number, but the number changes after the swipe (I think I create a new Button and I add it to the container, and for some reasons the viewpager shows this new button).\r\n\r\nHow can I fix this implementation? I haven&#39;t seen difference in examples.\r\n\r\nMy PagerAdapter implementation:\r\n\r\n    public class MyPagerAdapter extends PagerAdapter {\r\n    \r\n        @Override\r\n        public int getCount() {\r\n            return 10;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isViewFromObject(View view, Object o) {\r\n            return o.getClass()==view.getClass();\r\n        }\r\n    \r\n        @Override\r\n        public Object instantiateItem(ViewGroup container, int position) {\r\n            Button button = new Button(container.getContext());\r\n            ViewGroup.LayoutParams params = new ActionBar.LayoutParams(-1,-1);\r\n            button.setLayoutParams(params);\r\n            button.setText(String.valueOf(position));\r\n            container.addView(button);\r\n            return button;\r\n        }\r\n    \r\n        @Override\r\n        public void destroyItem(ViewGroup container, int position, Object object) {\r\n            container.removeView((Button)object);\r\n        }\r\n    }\r\n\r\nAnd my Activity:\r\n\r\n    public class MainActivity extends ActionBarActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            ViewPager pager = (ViewPager) findViewById(R.id.pager);\r\n            pager.setAdapter(new MyPagerAdapter());\r\n        }\r\n    }","title":"Correctly implementing PagerAdapter in Android","body":"<p>I have problems with implementation of my custom PagerAdapter and using it with a ViewPager.\nThis sample PagerAdapter has 10 items, every item is a button with it's index as text.\nWhen I run my program, I see a button with text '1' insted of '0'. And when I swipe to other items I get only blank views. When I swipe backwards sometimes I see a button with some number, but it disappears (maybe it is destroying and I remove it from the container), and sometimes I see a button with a number, but the number changes after the swipe (I think I create a new Button and I add it to the container, and for some reasons the viewpager shows this new button).</p>\n\n<p>How can I fix this implementation? I haven't seen difference in examples.</p>\n\n<p>My PagerAdapter implementation:</p>\n\n<pre><code>public class MyPagerAdapter extends PagerAdapter {\n\n    @Override\n    public int getCount() {\n        return 10;\n    }\n\n    @Override\n    public boolean isViewFromObject(View view, Object o) {\n        return o.getClass()==view.getClass();\n    }\n\n    @Override\n    public Object instantiateItem(ViewGroup container, int position) {\n        Button button = new Button(container.getContext());\n        ViewGroup.LayoutParams params = new ActionBar.LayoutParams(-1,-1);\n        button.setLayoutParams(params);\n        button.setText(String.valueOf(position));\n        container.addView(button);\n        return button;\n    }\n\n    @Override\n    public void destroyItem(ViewGroup container, int position, Object object) {\n        container.removeView((Button)object);\n    }\n}\n</code></pre>\n\n<p>And my Activity:</p>\n\n<pre><code>public class MainActivity extends ActionBarActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        ViewPager pager = (ViewPager) findViewById(R.id.pager);\n        pager.setAdapter(new MyPagerAdapter());\n    }\n}\n</code></pre>\n"},{"tags":["java","quarkus"],"answers":[{"tags":[],"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672385194,"creation_date":1672385194,"answer_id":74959121,"question_id":74956398,"body_markdown":"I ended up doing:\r\n\r\n```\r\nquarkus:\r\n   flyway:\r\n      datasource:\r\n         placeholders:\r\n            some_property: ${SOME_PROPERTY:some_value}\r\n```\r\n\r\nwhere `SOME_PROPERTY` is an environment variable. ","title":"quarkus.flyway.placeholders override via enviroment variable","body":"<p>I ended up doing:</p>\n<pre><code>quarkus:\n   flyway:\n      datasource:\n         placeholders:\n            some_property: ${SOME_PROPERTY:some_value}\n</code></pre>\n<p>where <code>SOME_PROPERTY</code> is an environment variable.</p>\n"}],"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74959121,"answer_count":1,"score":0,"last_activity_date":1672385194,"creation_date":1672351047,"question_id":74956398,"body_markdown":"In my application.yaml I have:\r\n\r\n\r\n```\r\nquarkus:\r\n   flyway:\r\n      datasource:\r\n         placeholders:\r\n            some_property: some_value\r\n```\r\n\r\nI was hoping that running the app with an environment variable: \r\n\r\n    QUARKUS_FLYWAY_PLACEHOLDERS=some_property=diff_value\r\n\r\nwould override the one from `application.yaml` (much like a Spring&#39;s EnvironmentPostProcessor would), but this is not the case.\r\n\r\nUsing _just_ the environment variable works, but then I don&#39;t have a &quot;default&quot;, if one is not specified. \r\n\r\nIs there a way to do this? Thank you.","title":"quarkus.flyway.placeholders override via enviroment variable","body":"<p>In my application.yaml I have:</p>\n<pre><code>quarkus:\n   flyway:\n      datasource:\n         placeholders:\n            some_property: some_value\n</code></pre>\n<p>I was hoping that running the app with an environment variable:</p>\n<pre><code>QUARKUS_FLYWAY_PLACEHOLDERS=some_property=diff_value\n</code></pre>\n<p>would override the one from <code>application.yaml</code> (much like a Spring's EnvironmentPostProcessor would), but this is not the case.</p>\n<p>Using <em>just</em> the environment variable works, but then I don't have a &quot;default&quot;, if one is not specified.</p>\n<p>Is there a way to do this? Thank you.</p>\n"},{"tags":["java","visual-studio-code","playframework","sbt"],"answers":[{"comments":[{"owner":{"account_id":27384735,"reputation":1,"user_id":20888778,"display_name":"Chris"},"score":0,"creation_date":1672489322,"post_id":74959081,"comment_id":132297561,"body_markdown":"Thanks for your answer!\n\nIt look likes my problem is coming from referenced libraies. Actually there is nothing in it. I&#39;ve tried to import some manually and it worked (now i don&#39;t have any problems with javax imports (only 350 errors left !). But i don&#39;t understand why it isn&#39;t importing those directly (given that my classpath in my root.json file seems to be good).","body":"Thanks for your answer!  It look likes my problem is coming from referenced libraies. Actually there is nothing in it. I&#39;ve tried to import some manually and it worked (now i don&#39;t have any problems with javax imports (only 350 errors left !). But i don&#39;t understand why it isn&#39;t importing those directly (given that my classpath in my root.json file seems to be good)."}],"tags":[],"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672384879,"creation_date":1672384879,"answer_id":74959081,"question_id":74954188,"body_markdown":"First check whether all required dependencies are correctly included in configuration files such as `build.gradle`.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThen check that all necessary plugins are installed, including the most basic [Java extensions][2] and other plugins that your project requires. Here is the [starting documentation][3] you can read.\r\n\r\nIf you&#39;re still having trouble, try creating a new project in VS Code and import your existing code into it.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RxLa4.png\r\n  [2]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\r\n  [3]: https://code.visualstudio.com/docs/java/java-tutorial","title":"How to work on a intelliJ project in VS Code?","body":"<p>First check whether all required dependencies are correctly included in configuration files such as <code>build.gradle</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/RxLa4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RxLa4.png\" alt=\"enter image description here\" /></a></p>\n<p>Then check that all necessary plugins are installed, including the most basic <a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\" rel=\"nofollow noreferrer\">Java extensions</a> and other plugins that your project requires. Here is the <a href=\"https://code.visualstudio.com/docs/java/java-tutorial\" rel=\"nofollow noreferrer\">starting documentation</a> you can read.</p>\n<p>If you're still having trouble, try creating a new project in VS Code and import your existing code into it.</p>\n"}],"owner":{"account_id":27384735,"reputation":1,"user_id":20888778,"display_name":"Chris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1635,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672384879,"creation_date":1672334456,"question_id":74954188,"body_markdown":"I am trying to work on an Java project began by someone else on intelliJ, but I usually use VS Code.\r\n\r\nWe are using SBT, with play Framework and Gradle. And we are coding in java, not in scala.\r\n\r\nI have read few documentations and tried different extensions configurations (extension pack for java, SBT, scala metals), but i am still having the same problems : almost 400 imports errors like this one :\r\n```\r\n&quot;The import play cannot be resolve&quot; \r\n```\r\n(not only for play, but also Http, JSon, Inject...).\r\n\r\n\r\n\r\n\r\nI&#39;ve tried different things to fix it : clean java language server workspace, removing manually the the same files, and even changed my settings to :\r\n\r\n```\r\n`{\r\n  &quot;editor.codeActionsOnSave&quot;: {\r\n    &quot;source.organizeImports&quot;: true\r\n  },\r\n  &quot;java.saveActions.organizeImports&quot;: true,\r\n  &quot;editor.formatOnSave&quot;: true,\r\n  &quot;autoimport.showNotifications&quot;: true,\r\n  &quot;files.watcherExclude&quot;: {\r\n    &quot;**/target&quot;: true\r\n  },\r\n  &quot;java.format.settings.url&quot;: &quot;eclipse-formatter.xml&quot;\r\n}\r\n`\r\n```\r\n\r\nAny ideas about extensions I forgot to download or anything that could help to fix it ?\r\n\r\n","title":"How to work on a intelliJ project in VS Code?","body":"<p>I am trying to work on an Java project began by someone else on intelliJ, but I usually use VS Code.</p>\n<p>We are using SBT, with play Framework and Gradle. And we are coding in java, not in scala.</p>\n<p>I have read few documentations and tried different extensions configurations (extension pack for java, SBT, scala metals), but i am still having the same problems : almost 400 imports errors like this one :</p>\n<pre><code>&quot;The import play cannot be resolve&quot; \n</code></pre>\n<p>(not only for play, but also Http, JSon, Inject...).</p>\n<p>I've tried different things to fix it : clean java language server workspace, removing manually the the same files, and even changed my settings to :</p>\n<pre><code>`{\n  &quot;editor.codeActionsOnSave&quot;: {\n    &quot;source.organizeImports&quot;: true\n  },\n  &quot;java.saveActions.organizeImports&quot;: true,\n  &quot;editor.formatOnSave&quot;: true,\n  &quot;autoimport.showNotifications&quot;: true,\n  &quot;files.watcherExclude&quot;: {\n    &quot;**/target&quot;: true\n  },\n  &quot;java.format.settings.url&quot;: &quot;eclipse-formatter.xml&quot;\n}\n`\n</code></pre>\n<p>Any ideas about extensions I forgot to download or anything that could help to fix it ?</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":20466438,"reputation":115,"user_id":15017829,"display_name":"Mike Kim"},"score":0,"creation_date":1672379123,"post_id":74958475,"comment_id":132278500,"body_markdown":"Do you have an example?","body":"Do you have an example?"},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":0,"creation_date":1672380317,"post_id":74958475,"comment_id":132278663,"body_markdown":"And specifically, an example of a specific, useful use case where you might want to call the methods without holding the lock?","body":"And specifically, an example of a specific, useful use case where you might want to call the methods without holding the lock?"}],"answers":[{"comments":[{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":2,"creation_date":1672380599,"post_id":74958639,"comment_id":132278713,"body_markdown":"And on top of that, it also guarantees that some other thread C won&#39;t _unset_ the flag before A gets woken up. That is, A will see the world as B left it when B said to A, &quot;ok it&#39;s your turn.&quot; (That gets a bit more complicated with notifyAll, but you do still get the situation where each thread gets to atomically set state before the next thread gets its turn.)","body":"And on top of that, it also guarantees that some other thread C won&#39;t <i>unset</i> the flag before A gets woken up. That is, A will see the world as B left it when B said to A, &quot;ok it&#39;s your turn.&quot; (That gets a bit more complicated with notifyAll, but you do still get the situation where each thread gets to atomically set state before the next thread gets its turn.)"}],"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1672380294,"creation_date":1672380294,"answer_id":74958639,"question_id":74958475,"body_markdown":"Requiring that the lock on the object is held resolves a race condition.\r\n\r\nImagine that synchronized is not needed:\r\n- Thread A checks a flag and decides it needs to wait\r\n- Thread B sets the flag\r\n- Thread B calls notify\r\n- Thread A actually calls wait\r\n\r\nNow Thread A will wait forever.\r\n\r\nWith synchronized:\r\n- Thread A takes the lock\r\n- Thread B wants to set the flag, so tries to take the lock, but is blocked\r\n- Thread A checks the flag\r\n- Thread A calls wait (which releases the lock)\r\n- Now thread B can set the flag and call notify\r\n- Thread A wakes up and sees the flag is set.","title":"Why when using wait( ) , notify( ) , notifyAll( ) in java the thread using this part of code must be the only thread that own it&#39;s monitor?","body":"<p>Requiring that the lock on the object is held resolves a race condition.</p>\n<p>Imagine that synchronized is not needed:</p>\n<ul>\n<li>Thread A checks a flag and decides it needs to wait</li>\n<li>Thread B sets the flag</li>\n<li>Thread B calls notify</li>\n<li>Thread A actually calls wait</li>\n</ul>\n<p>Now Thread A will wait forever.</p>\n<p>With synchronized:</p>\n<ul>\n<li>Thread A takes the lock</li>\n<li>Thread B wants to set the flag, so tries to take the lock, but is blocked</li>\n<li>Thread A checks the flag</li>\n<li>Thread A calls wait (which releases the lock)</li>\n<li>Now thread B can set the flag and call notify</li>\n<li>Thread A wakes up and sees the flag is set.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":349165,"reputation":559,"user_id":684296,"accept_rate":80,"display_name":"Newerth"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672382720,"creation_date":1672382720,"answer_id":74958840,"question_id":74958475,"body_markdown":"When using `synchronized`, you&#39;re in fact locking an object.\r\n\r\n```java\r\nfinal Object lock = new Object();\r\n// ...\r\nsynchronized (lock) {\r\n    // ...\r\n}\r\n```\r\n\r\nOnly one thread at a time can lock onto that object. Unless you call `wait()`. If so, another thread is allowed for entering that critical section, doing it&#39;s stuff with that object and either calling `wait()` or notifying the other object holder(s) allowing them to continue past their `wait()` call.\r\n\r\n```java\r\nvoid log(String message) {\r\n    System.out.println(&quot;[&quot; + Thread.currentThread().getName() + &quot;] &quot; + message);\r\n}\r\n\r\nfinal int max = 10;\r\nfinal Object valueLock = new Object();\r\nvolatile int value = 0;\r\n\r\nThread setupThread = new Thread(() -&gt; {\r\n    log(&quot;Started&quot;);\r\n    for (int i = 0; i &lt; max; i++) {\r\n        Thread valueThread = new Thread(() -&gt; {\r\n            log(&quot;Started&quot;);\r\n            try {\r\n                Thread.sleep(new Random().nextInt(1000));\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n            synchronized(valueLock) {\r\n                log(value + &quot; -&gt; &quot; + (++value));\r\n                valueLock.notifyAll();\r\n            }\r\n            log(&quot;Finished&quot;);\r\n        });\r\n        valueThread.start();\r\n    }\r\n    log(&quot;Finished&quot;);\r\n}, &quot;setupThread&quot;);\r\n\r\nsetupThread.start();\r\n\r\nlog(&quot;Waiting for the value to reach &quot; + max);\r\nsynchronized(valueLock) {\r\n    while (true) {\r\n        if (value &lt; max) {\r\n            valueLock.wait();\r\n        } else {\r\n            break;\r\n        }\r\n    }\r\n}\r\nlog(&quot;Finished&quot;);\r\n```\r\n\r\nOutput:\r\n\r\n```\r\n[setupThread] Started\r\n[Thread-0] Started\r\n[Thread-1] Started\r\n[Thread-2] Started\r\n[Thread-3] Started\r\n[Thread-4] Started\r\n[Thread-5] Started\r\n[Thread-6] Started\r\n[Thread-7] Started\r\n[Thread-8] Started\r\n[setupThread] Finished\r\n[Thread-9] Started\r\n[Thread-2] 0 -&gt; 1\r\n[Thread-2] Finished\r\n[Thread-6] 1 -&gt; 2\r\n[Thread-6] Finished\r\n[Thread-4] 2 -&gt; 3\r\n[Thread-4] Finished\r\n[Thread-5] 3 -&gt; 4\r\n[Thread-5] Finished\r\n[Thread-1] 4 -&gt; 5\r\n[Thread-1] Finished\r\n[Thread-0] 5 -&gt; 6\r\n[Thread-0] Finished\r\n[main] Waiting for the value to reach 10\r\n[Thread-7] 6 -&gt; 7\r\n[Thread-7] Finished\r\n[Thread-8] 7 -&gt; 8\r\n[Thread-8] Finished\r\n[Thread-3] 8 -&gt; 9\r\n[Thread-3] Finished\r\n[Thread-9] 9 -&gt; 10\r\n[Thread-9] Finished\r\n[main] Finished\r\n```\r\n\r\nLocking individual objects allows you for operating on more objects at a time.\r\n\r\nhttps://onecompiler.com/jshell/3ytda2qwz","title":"Why when using wait( ) , notify( ) , notifyAll( ) in java the thread using this part of code must be the only thread that own it&#39;s monitor?","body":"<p>When using <code>synchronized</code>, you're in fact locking an object.</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Object lock = new Object();\n// ...\nsynchronized (lock) {\n    // ...\n}\n</code></pre>\n<p>Only one thread at a time can lock onto that object. Unless you call <code>wait()</code>. If so, another thread is allowed for entering that critical section, doing it's stuff with that object and either calling <code>wait()</code> or notifying the other object holder(s) allowing them to continue past their <code>wait()</code> call.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void log(String message) {\n    System.out.println(&quot;[&quot; + Thread.currentThread().getName() + &quot;] &quot; + message);\n}\n\nfinal int max = 10;\nfinal Object valueLock = new Object();\nvolatile int value = 0;\n\nThread setupThread = new Thread(() -&gt; {\n    log(&quot;Started&quot;);\n    for (int i = 0; i &lt; max; i++) {\n        Thread valueThread = new Thread(() -&gt; {\n            log(&quot;Started&quot;);\n            try {\n                Thread.sleep(new Random().nextInt(1000));\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n            synchronized(valueLock) {\n                log(value + &quot; -&gt; &quot; + (++value));\n                valueLock.notifyAll();\n            }\n            log(&quot;Finished&quot;);\n        });\n        valueThread.start();\n    }\n    log(&quot;Finished&quot;);\n}, &quot;setupThread&quot;);\n\nsetupThread.start();\n\nlog(&quot;Waiting for the value to reach &quot; + max);\nsynchronized(valueLock) {\n    while (true) {\n        if (value &lt; max) {\n            valueLock.wait();\n        } else {\n            break;\n        }\n    }\n}\nlog(&quot;Finished&quot;);\n</code></pre>\n<p>Output:</p>\n<pre><code>[setupThread] Started\n[Thread-0] Started\n[Thread-1] Started\n[Thread-2] Started\n[Thread-3] Started\n[Thread-4] Started\n[Thread-5] Started\n[Thread-6] Started\n[Thread-7] Started\n[Thread-8] Started\n[setupThread] Finished\n[Thread-9] Started\n[Thread-2] 0 -&gt; 1\n[Thread-2] Finished\n[Thread-6] 1 -&gt; 2\n[Thread-6] Finished\n[Thread-4] 2 -&gt; 3\n[Thread-4] Finished\n[Thread-5] 3 -&gt; 4\n[Thread-5] Finished\n[Thread-1] 4 -&gt; 5\n[Thread-1] Finished\n[Thread-0] 5 -&gt; 6\n[Thread-0] Finished\n[main] Waiting for the value to reach 10\n[Thread-7] 6 -&gt; 7\n[Thread-7] Finished\n[Thread-8] 7 -&gt; 8\n[Thread-8] Finished\n[Thread-3] 8 -&gt; 9\n[Thread-3] Finished\n[Thread-9] 9 -&gt; 10\n[Thread-9] Finished\n[main] Finished\n</code></pre>\n<p>Locking individual objects allows you for operating on more objects at a time.</p>\n<p><a href=\"https://onecompiler.com/jshell/3ytda2qwz\" rel=\"nofollow noreferrer\">https://onecompiler.com/jshell/3ytda2qwz</a></p>\n"}],"owner":{"account_id":27007592,"reputation":11,"user_id":20567787,"display_name":"Hossam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1672383851,"creation_date":1672378562,"question_id":74958475,"body_markdown":"The idea that when you remove the keyword synchronized when using wait( ) , notify( ) , notifyAll( ) it raises an error while running the program I know that  wait( ) , notify( ) , notifyAll( ) must be included inside a synchronized block to make that thread using them the only thread owning the monitor on that pice of code but my question is : Why when using wait( ) , notify( ) , notifyAll( ) in java the thread using this part of code must be the only thread that own it&#39;s monitor ? \r\n\r\nwhen remving the keyword synchronized from the pice of code that contains wait( ) , notify( ) or notifyAll() this raises an error while I found no logical reason for that error","title":"Why when using wait( ) , notify( ) , notifyAll( ) in java the thread using this part of code must be the only thread that own it&#39;s monitor?","body":"<p>The idea that when you remove the keyword synchronized when using wait( ) , notify( ) , notifyAll( ) it raises an error while running the program I know that  wait( ) , notify( ) , notifyAll( ) must be included inside a synchronized block to make that thread using them the only thread owning the monitor on that pice of code but my question is : Why when using wait( ) , notify( ) , notifyAll( ) in java the thread using this part of code must be the only thread that own it's monitor ?</p>\n<p>when remving the keyword synchronized from the pice of code that contains wait( ) , notify( ) or notifyAll() this raises an error while I found no logical reason for that error</p>\n"},{"tags":["java","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1610484939,"post_id":65689079,"comment_id":116147604,"body_markdown":"_...I am expecting only one record instead of all the records..._ how about locating the same record using a search criteria from all the records?","body":"<i>...I am expecting only one record instead of all the records...</i> how about locating the same record using a search criteria from all the records?"},{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1610522023,"post_id":65689079,"comment_id":116156915,"body_markdown":"Please add html source code or better provide url.","body":"Please add html source code or better provide url."}],"answers":[{"tags":[],"owner":{"account_id":15095197,"reputation":1792,"user_id":10893827,"display_name":"Norayr Sargsyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672383469,"creation_date":1610524074,"answer_id":65697608,"question_id":65689079,"body_markdown":"If you know the id is unique you are searching, in that case, you can do this:\r\n\r\nAfter clicking the `search` button wait for the size of the records to be 1\r\n\r\n    wait.until(driver -&gt; records.size() == 1);\r\n\r\nIn case when your searched `id` is not unique and after searching you can see multiple results, you can do it this way:\r\n\r\nBefore clicking the `search` button you can get the size of the records\r\n\r\n    int size = records.size();\r\n\r\nAfter clicking the `search` button you can wait for the size of the records be decreased:\r\n\r\n    wait.until(driver -&gt; records.size() &lt; size);","title":"Selenium [Java] : How can I make it wait until a table has been refreshed?","body":"<p>If you know the id is unique you are searching, in that case, you can do this:</p>\n<p>After clicking the <code>search</code> button wait for the size of the records to be 1</p>\n<pre><code>wait.until(driver -&gt; records.size() == 1);\n</code></pre>\n<p>In case when your searched <code>id</code> is not unique and after searching you can see multiple results, you can do it this way:</p>\n<p>Before clicking the <code>search</code> button you can get the size of the records</p>\n<pre><code>int size = records.size();\n</code></pre>\n<p>After clicking the <code>search</code> button you can wait for the size of the records be decreased:</p>\n<pre><code>wait.until(driver -&gt; records.size() &lt; size);\n</code></pre>\n"}],"owner":{"account_id":873703,"reputation":2551,"user_id":923988,"accept_rate":88,"display_name":"VictorGram"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1288,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":65697608,"answer_count":1,"score":1,"last_activity_date":1672383469,"creation_date":1610473068,"question_id":65689079,"body_markdown":"Assume that I have a web page that has records, **displayed in a table** ( that has several columns). Now there is **search-input-box** and a **search-button**. Using those **I am searching for records with an id in the table**.\r\n\r\n**I am using implicit wait** which seems to be working fine in most of the cases and failing under this scenario :\r\n\r\n - I made the page to load all the data in the table after I logged in using implicit wait\r\n - Entered id in the search-input-box and clicked search-button \r\n - Now I am expecting only one record instead of all the records that were\r\n   displayed in the table before the search happened\r\n\r\nIt seems that **it did not find enough time to refresh the table** and still showing all the records even though I do search with ( for the id columns in the table):\r\n\r\n    List&lt;WebElement&gt; idRows = driver.wait(&lt;waittime&gt;, &lt;interval&gt;).until(driver -&gt; driver.findElement(By.id(&quot;column-id&quot;)));\r\n\r\nIf I use **Thread.sleep(&lt;waittime&gt;)** after clicking the search-button, everything is fine as I am seeing the table has been refreshed with the expected result. However, I have to avoid using thread.sleep.\r\n\r\nMay I get any suggestion on how can I make it wait until the table has been refreshed with searched data?\r\n","title":"Selenium [Java] : How can I make it wait until a table has been refreshed?","body":"<p>Assume that I have a web page that has records, <strong>displayed in a table</strong> ( that has several columns). Now there is <strong>search-input-box</strong> and a <strong>search-button</strong>. Using those <strong>I am searching for records with an id in the table</strong>.</p>\n<p><strong>I am using implicit wait</strong> which seems to be working fine in most of the cases and failing under this scenario :</p>\n<ul>\n<li>I made the page to load all the data in the table after I logged in using implicit wait</li>\n<li>Entered id in the search-input-box and clicked search-button</li>\n<li>Now I am expecting only one record instead of all the records that were\ndisplayed in the table before the search happened</li>\n</ul>\n<p>It seems that <strong>it did not find enough time to refresh the table</strong> and still showing all the records even though I do search with ( for the id columns in the table):</p>\n<pre><code>List&lt;WebElement&gt; idRows = driver.wait(&lt;waittime&gt;, &lt;interval&gt;).until(driver -&gt; driver.findElement(By.id(&quot;column-id&quot;)));\n</code></pre>\n<p>If I use <strong>Thread.sleep()</strong> after clicking the search-button, everything is fine as I am seeing the table has been refreshed with the expected result. However, I have to avoid using thread.sleep.</p>\n<p>May I get any suggestion on how can I make it wait until the table has been refreshed with searched data?</p>\n"},{"tags":["java","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":2448787,"reputation":301,"user_id":2135533,"display_name":"user2135533"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672383422,"creation_date":1672383422,"answer_id":74958915,"question_id":74729163,"body_markdown":"I was able to resolve the issue by downgrading the kafka-clients version from 3. something to 2.81","title":"Kafka Received exception when fetching the next record from uvtopic1-0. If needed, please seek past the record to continue consumption","body":"<p>I was able to resolve the issue by downgrading the kafka-clients version from 3. something to 2.81</p>\n"}],"owner":{"account_id":17107460,"reputation":31,"user_id":12379170,"display_name":"Urvesh Rathod"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":938,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672383422,"creation_date":1670496890,"question_id":74729163,"body_markdown":"I am getting this error ***Received exception when fetching the next record from uvtopic1-0. If needed, please seek past the record to continue consumption.***\r\n\r\n    public class KafkaConsumerPoc2 {\r\n    \r\n    \tprivate static final Integer count = 10000;\r\n    \r\n    \tpublic static final String KAFKA_SERVER_URL = &quot;0.0.0.0&quot;;\r\n    \tpublic static final int KAFKA_SERVER_PORT = 29092;\r\n    \r\n    \tstatic ExecutorService executorService;\r\n    \r\n    \tstatic Map&lt;String, KafkaProducer&lt;String, String&gt;&gt; topicWiseProducerMap = new HashMap&lt;String, KafkaProducer&lt;String, String&gt;&gt;();\r\n    \r\n    \tprivate static Map&lt;String, KafkaConsumer&lt;String, String&gt;&gt; topicConsumerMap = new HashMap&lt;String, KafkaConsumer&lt;String, String&gt;&gt;();\r\n    \r\n    \tprivate static Properties getConsumerProp(String topicName) {\r\n    \t\tProperties props = new Properties();\r\n    \t\tprops.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, KAFKA_SERVER_URL + &quot;:&quot; + KAFKA_SERVER_PORT);\r\n    \t\tString grupId = topicName + &quot;-grup&quot;;\r\n    \t\tprops.put(ConsumerConfig.GROUP_ID_CONFIG, grupId);\r\n    \t\tprops.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, &quot;true&quot;);\r\n    \t\tprops.put(ConsumerConfig.AUTO_COMMIT_INTERVAL_MS_CONFIG, &quot;1000&quot;);\r\n    \t\tprops.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n    \t\tprops.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\r\n    \t\tprops.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\r\n    \r\n    \t\treturn props;\r\n    \t}\r\n    \r\n    \tpublic static KafkaConsumer&lt;String, String&gt; getConsumerByTopicName(String topicName) {\r\n    \t\tKafkaConsumer&lt;String, String&gt; consumer = topicConsumerMap.get(topicName);\r\n    \t\tif (consumer == null) {\r\n    \t\t\tconsumer = registerConsumer(topicName);\r\n    \t\t}\r\n    \t\treturn consumer;\r\n    \t}\r\n    \r\n    \tpublic static KafkaConsumer&lt;String, String&gt; registerConsumer(String topicName) {\r\n    \t\tProperties pro = getConsumerProp(topicName);\r\n    \t\tKafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;String, String&gt;(pro);\r\n    \t\tconsumer.subscribe(Collections.singleton(topicName));\r\n    \t\ttopicConsumerMap.put(topicName, consumer);\r\n    \t\treturn consumer;\r\n    \t}\r\n    \r\n    \tprivate static void startThreadForTopicListening(String topic) {\r\n    \t\texecutorService.submit(new Callable&lt;Boolean&gt;() {\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic Boolean call() throws Exception {\r\n    \r\n    \t\t\t\tKafkaConsumer&lt;String, String&gt; consumer = getConsumerByTopicName(topic);\r\n    \r\n    \t\t\t\ttopicListener(topic, consumer);\r\n    \t\t\t\treturn true;\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    \r\n    \tpublic static void topicListener(String topic, KafkaConsumer&lt;String, String&gt; consumer) {\r\n    \t\ttry {\r\n    \r\n    \t\t\tSystem.out.println(&quot;************* Read message starts *****************************&quot;);\r\n    \r\n    \t\t\tConsumerRecords&lt;String, String&gt; consumerRecords = consumer.poll(Duration.ofMillis(1000));\r\n    \r\n    \t\t\tfor (ConsumerRecord&lt;String, String&gt; record : consumerRecords) {\r\n    \r\n    \t\t\t\tif (record.value() != null) {\r\n    \t\t\t\t\tSystem.out.println(&quot;Received message: (&quot; + record.value() + &quot;) at offset &quot; + record.offset()\r\n    \t\t\t\t\t\t\t+ &quot; topic : &quot; + record.topic());\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t\tSystem.out.println(&quot;************* Read message ends *****************************&quot;);\r\n    \r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t} finally {\r\n    \t\t\ttopicListener(topic, consumer);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tSystem.out.println(&quot;Main starts&quot;);\r\n    \r\n    \t\tInteger sizeOfExecutors = 2;\r\n    \r\n    \t\texecutorService = Executors.newFixedThreadPool(sizeOfExecutors);\r\n    \r\n    \t\tstartThreadForWriting(KafkaClientPoc2.topic1);\r\n    \t\tstartThreadForTopicListening(KafkaClientPoc2.topic1);\r\n    \r\n    \t}\r\n    \r\n    \tprivate static void startThreadForWriting(String topic) {\r\n    \t\texecutorService.submit(new Callable&lt;Boolean&gt;() {\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic Boolean call() throws Exception {\r\n    \t\t\t\tfor (int i = 1; i &lt;= count; i++) {\r\n    \t\t\t\t\tKafkaClientPoc2.writeSingleMsgInTopic(KafkaClientPoc2.topic1, &quot;Msg:&quot; + i);\r\n    \t\t\t\t}\r\n    \t\t\t\treturn true;\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    \r\n    \tpublic static void writeSingleMsgInTopic(String topicName, String msg) {\r\n    \t\tSystem.out.println(&quot;#################### Write Msg starts ############################&quot;);\r\n    \t\tKafkaProducer&lt;String, String&gt; producer = getProducer(topicName);\r\n    \t\ttry {\r\n    \t\t\tProducerRecord&lt;String, String&gt; record = new ProducerRecord&lt;String, String&gt;(topicName, msg);\r\n    \t\t\tproducer.send(record);\r\n    \t\t\tproducer.flush();\r\n    \t\t\tSystem.out.println(&quot;writer &gt; Sent message: (&quot; + msg + &quot;)&quot;);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t\tSystem.out.println(&quot;#################### Write Msg ends ############################&quot;);\r\n    \t}\r\n    \r\n    \tpublic static KafkaProducer&lt;String, String&gt; getProducer(String topicName) {\r\n    \t\tKafkaProducer&lt;String, String&gt; producer = topicWiseProducerMap.get(topicName);\r\n    \t\tif (producer == null) {\r\n    \t\t\tproducer = registerProducer(topicName);\r\n    \t\t}\r\n    \t\treturn producer;\r\n    \t}\r\n    \r\n    \tpublic static Properties getProducerProp() {\r\n    \t\tProperties prop = new Properties();\r\n    \t\tprop.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;0.0.0.0:29092&quot;);\r\n    \t\tprop.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\r\n    \t\tprop.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\r\n    \t\tprop.put(ProducerConfig.BATCH_SIZE_CONFIG, 1);\r\n    \r\n    \t\treturn prop;\r\n    \t}\r\n    \r\n    \tprivate static KafkaProducer&lt;String, String&gt; registerProducer(String topicName) {\r\n    \t\tSystem.out.println(&quot;Creating new Producer&quot;);\r\n    \t\tKafkaProducer&lt;String, String&gt; producer = new KafkaProducer&lt;String, String&gt;(getProducerProp());\r\n    \t\ttopicWiseProducerMap.put(topicName, producer);\r\n    \t\treturn producer;\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nFollowing is my stack trace\r\n\r\n    \r\n\r\n&gt; org.apache.kafka.common.KafkaException: Received exception when\r\n&gt; fetching the next record from uvtopic1-0. If needed, please seek past\r\n&gt; the record to continue consumption. \tat\r\n&gt; org.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.fetchRecords(Fetcher.java:1598)\r\n&gt; \tat\r\n&gt; org.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.access$1700(Fetcher.java:1453)\r\n&gt; \tat\r\n&gt; org.apache.kafka.clients.consumer.internals.Fetcher.fetchRecords(Fetcher.java:686)\r\n&gt; \tat\r\n&gt; org.apache.kafka.clients.consumer.internals.Fetcher.fetchedRecords(Fetcher.java:637)\r\n&gt; \tat\r\n&gt; org.apache.kafka.clients.consumer.KafkaConsumer.pollForFetches(KafkaConsumer.java:1276)\r\n&gt; \tat\r\n&gt; org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1237)\r\n&gt; \tat\r\n&gt; org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1210)\r\n&gt; \tat\r\n&gt; com.vp.loaddata.vploaddata.poc2.KafkaConsumerPoc2.topicListener(KafkaConsumerPoc2.java:80)\r\n&gt; \tat\r\n&gt; com.vp.loaddata.vploaddata.poc2.KafkaConsumerPoc2.topicListener(KafkaConsumerPoc2.java:101)\r\n\r\n","title":"Kafka Received exception when fetching the next record from uvtopic1-0. If needed, please seek past the record to continue consumption","body":"<p>I am getting this error <em><strong>Received exception when fetching the next record from uvtopic1-0. If needed, please seek past the record to continue consumption.</strong></em></p>\n<pre><code>public class KafkaConsumerPoc2 {\n\n    private static final Integer count = 10000;\n\n    public static final String KAFKA_SERVER_URL = &quot;0.0.0.0&quot;;\n    public static final int KAFKA_SERVER_PORT = 29092;\n\n    static ExecutorService executorService;\n\n    static Map&lt;String, KafkaProducer&lt;String, String&gt;&gt; topicWiseProducerMap = new HashMap&lt;String, KafkaProducer&lt;String, String&gt;&gt;();\n\n    private static Map&lt;String, KafkaConsumer&lt;String, String&gt;&gt; topicConsumerMap = new HashMap&lt;String, KafkaConsumer&lt;String, String&gt;&gt;();\n\n    private static Properties getConsumerProp(String topicName) {\n        Properties props = new Properties();\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, KAFKA_SERVER_URL + &quot;:&quot; + KAFKA_SERVER_PORT);\n        String grupId = topicName + &quot;-grup&quot;;\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, grupId);\n        props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, &quot;true&quot;);\n        props.put(ConsumerConfig.AUTO_COMMIT_INTERVAL_MS_CONFIG, &quot;1000&quot;);\n        props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\n        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\n        props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\n\n        return props;\n    }\n\n    public static KafkaConsumer&lt;String, String&gt; getConsumerByTopicName(String topicName) {\n        KafkaConsumer&lt;String, String&gt; consumer = topicConsumerMap.get(topicName);\n        if (consumer == null) {\n            consumer = registerConsumer(topicName);\n        }\n        return consumer;\n    }\n\n    public static KafkaConsumer&lt;String, String&gt; registerConsumer(String topicName) {\n        Properties pro = getConsumerProp(topicName);\n        KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;String, String&gt;(pro);\n        consumer.subscribe(Collections.singleton(topicName));\n        topicConsumerMap.put(topicName, consumer);\n        return consumer;\n    }\n\n    private static void startThreadForTopicListening(String topic) {\n        executorService.submit(new Callable&lt;Boolean&gt;() {\n\n            @Override\n            public Boolean call() throws Exception {\n\n                KafkaConsumer&lt;String, String&gt; consumer = getConsumerByTopicName(topic);\n\n                topicListener(topic, consumer);\n                return true;\n            }\n        });\n    }\n\n    public static void topicListener(String topic, KafkaConsumer&lt;String, String&gt; consumer) {\n        try {\n\n            System.out.println(&quot;************* Read message starts *****************************&quot;);\n\n            ConsumerRecords&lt;String, String&gt; consumerRecords = consumer.poll(Duration.ofMillis(1000));\n\n            for (ConsumerRecord&lt;String, String&gt; record : consumerRecords) {\n\n                if (record.value() != null) {\n                    System.out.println(&quot;Received message: (&quot; + record.value() + &quot;) at offset &quot; + record.offset()\n                            + &quot; topic : &quot; + record.topic());\n                }\n            }\n\n            System.out.println(&quot;************* Read message ends *****************************&quot;);\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            topicListener(topic, consumer);\n        }\n    }\n\n    public static void main(String[] args) {\n\n        System.out.println(&quot;Main starts&quot;);\n\n        Integer sizeOfExecutors = 2;\n\n        executorService = Executors.newFixedThreadPool(sizeOfExecutors);\n\n        startThreadForWriting(KafkaClientPoc2.topic1);\n        startThreadForTopicListening(KafkaClientPoc2.topic1);\n\n    }\n\n    private static void startThreadForWriting(String topic) {\n        executorService.submit(new Callable&lt;Boolean&gt;() {\n\n            @Override\n            public Boolean call() throws Exception {\n                for (int i = 1; i &lt;= count; i++) {\n                    KafkaClientPoc2.writeSingleMsgInTopic(KafkaClientPoc2.topic1, &quot;Msg:&quot; + i);\n                }\n                return true;\n            }\n        });\n    }\n\n    public static void writeSingleMsgInTopic(String topicName, String msg) {\n        System.out.println(&quot;#################### Write Msg starts ############################&quot;);\n        KafkaProducer&lt;String, String&gt; producer = getProducer(topicName);\n        try {\n            ProducerRecord&lt;String, String&gt; record = new ProducerRecord&lt;String, String&gt;(topicName, msg);\n            producer.send(record);\n            producer.flush();\n            System.out.println(&quot;writer &gt; Sent message: (&quot; + msg + &quot;)&quot;);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        System.out.println(&quot;#################### Write Msg ends ############################&quot;);\n    }\n\n    public static KafkaProducer&lt;String, String&gt; getProducer(String topicName) {\n        KafkaProducer&lt;String, String&gt; producer = topicWiseProducerMap.get(topicName);\n        if (producer == null) {\n            producer = registerProducer(topicName);\n        }\n        return producer;\n    }\n\n    public static Properties getProducerProp() {\n        Properties prop = new Properties();\n        prop.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;0.0.0.0:29092&quot;);\n        prop.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\n        prop.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\n        prop.put(ProducerConfig.BATCH_SIZE_CONFIG, 1);\n\n        return prop;\n    }\n\n    private static KafkaProducer&lt;String, String&gt; registerProducer(String topicName) {\n        System.out.println(&quot;Creating new Producer&quot;);\n        KafkaProducer&lt;String, String&gt; producer = new KafkaProducer&lt;String, String&gt;(getProducerProp());\n        topicWiseProducerMap.put(topicName, producer);\n        return producer;\n    }\n\n}\n</code></pre>\n<p>Following is my stack trace</p>\n<blockquote>\n<p>org.apache.kafka.common.KafkaException: Received exception when\nfetching the next record from uvtopic1-0. If needed, please seek past\nthe record to continue consumption.   at\norg.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.fetchRecords(Fetcher.java:1598)\nat\norg.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.access$1700(Fetcher.java:1453)\nat\norg.apache.kafka.clients.consumer.internals.Fetcher.fetchRecords(Fetcher.java:686)\nat\norg.apache.kafka.clients.consumer.internals.Fetcher.fetchedRecords(Fetcher.java:637)\nat\norg.apache.kafka.clients.consumer.KafkaConsumer.pollForFetches(KafkaConsumer.java:1276)\nat\norg.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1237)\nat\norg.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1210)\nat\ncom.vp.loaddata.vploaddata.poc2.KafkaConsumerPoc2.topicListener(KafkaConsumerPoc2.java:80)\nat\ncom.vp.loaddata.vploaddata.poc2.KafkaConsumerPoc2.topicListener(KafkaConsumerPoc2.java:101)</p>\n</blockquote>\n"},{"tags":["java","ide","selenide"],"answers":[{"tags":[],"owner":{"account_id":22880863,"reputation":26,"user_id":17023516,"display_name":"Flumberg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672382812,"creation_date":1672382812,"answer_id":74958854,"question_id":73195173,"body_markdown":"You can&#39;t check that the element was highlighted after the tab button was pressed, but you can press the enter button and then check that the window is open.\r\n\r\n    $(By.xpath(&quot;//p[contains(text(),&#39;By Jash Unadkat, Technical Content&#39;)]&quot;)).pressTab().pressEnter();","title":"Selenide pressTab()","body":"<p>You can't check that the element was highlighted after the tab button was pressed, but you can press the enter button and then check that the window is open.</p>\n<pre><code>$(By.xpath(&quot;//p[contains(text(),'By Jash Unadkat, Technical Content')]&quot;)).pressTab().pressEnter();\n</code></pre>\n"}],"owner":{"account_id":23157288,"reputation":11,"user_id":19667121,"display_name":"Wocky Wocky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":287,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672382812,"creation_date":1659363742,"question_id":73195173,"body_markdown":"I need to check is tabulation working when I click on the tag p [enter image description here][1] then press Tab key.\r\n\r\n    @org.junit.Test\r\n        public void browserstackTabulation() {\r\n            open(&quot;https://www.browserstack.com/guide/selenium-webdriver-tutorial&quot;);\r\n            $(By.xpath(&quot;//p[contains(text(),&#39;By Jash Unadkat, Technical Content&#39;)]&quot;)).pressTab();\r\n        }\r\n\r\n  [1]: https://i.stack.imgur.com/39AAU.png\r\n","title":"Selenide pressTab()","body":"<p>I need to check is tabulation working when I click on the tag p <a href=\"https://i.stack.imgur.com/39AAU.png\" rel=\"nofollow noreferrer\">enter image description here</a> then press Tab key.</p>\n<pre><code>@org.junit.Test\n    public void browserstackTabulation() {\n        open(&quot;https://www.browserstack.com/guide/selenium-webdriver-tutorial&quot;);\n        $(By.xpath(&quot;//p[contains(text(),'By Jash Unadkat, Technical Content')]&quot;)).pressTab();\n    }\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1571501915,"post_id":58465531,"comment_id":103266029,"body_markdown":"You can `limit` it. But that depends on the source of your stream.","body":"You can <code>limit</code> it. But that depends on the source of your stream."},{"owner":{"account_id":3581935,"reputation":1844,"user_id":2989935,"accept_rate":88,"display_name":"Harper"},"score":0,"creation_date":1571501995,"post_id":58465531,"comment_id":103266054,"body_markdown":"You are right. I do not know the actual amount of data until I can read no more from the source, so I have no idea in advance how many blocks to limit","body":"You are right. I do not know the actual amount of data until I can read no more from the source, so I have no idea in advance how many blocks to limit"},{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1571503345,"post_id":58465531,"comment_id":103266398,"body_markdown":"You seem to be looking for a [while loop equivalent of streams?](https://stackoverflow.com/questions/44700006/is-there-java-stream-equivalent-to-while-with-variable-assignment)","body":"You seem to be looking for a <a href=\"https://stackoverflow.com/questions/44700006/is-there-java-stream-equivalent-to-while-with-variable-assignment\">while loop equivalent of streams?</a>"}],"answers":[{"tags":[],"owner":{"account_id":14587998,"reputation":2412,"user_id":10536125,"display_name":"IlyaMuravjov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571510229,"creation_date":1571510229,"answer_id":58466867,"question_id":58465531,"body_markdown":"If you use at least Java 9, you can apply [`takeWhile(Objects::nonNull)`](https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#takeWhile-java.util.function.Predicate-) on your stream. If you use the older Java version, check out [this question](https://stackoverflow.com/questions/20746429/limit-a-stream-by-a-predicate).","title":"Create a finite stream with a generator function","body":"<p>If you use at least Java 9, you can apply <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#takeWhile-java.util.function.Predicate-\" rel=\"nofollow noreferrer\"><code>takeWhile(Objects::nonNull)</code></a> on your stream. If you use the older Java version, check out <a href=\"https://stackoverflow.com/questions/20746429/limit-a-stream-by-a-predicate\">this question</a>.</p>\n"},{"tags":[],"owner":{"account_id":26645528,"reputation":46,"user_id":20368478,"display_name":"MikeW"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672382220,"creation_date":1672004338,"answer_id":74916005,"question_id":58465531,"body_markdown":"You can create a stream of `Optional`&#39;s with `Stream.iterate​(T&#160;seed, Predicate&lt;? super T&gt;&#160;hasNext, UnaryOperator&lt;T&gt;&#160;next)`, stopping on empty. You can then call `.map(Optional::get)` on the stream.\r\n\r\nHere&#39;s an example of creating a stream that tracks the cumulative sum of a list.\r\n\r\n```java\r\npublic static Stream&lt;Integer&gt; cumulativeSum(List&lt;Integer&gt; nums) {\r\n    Iterator&lt;Integer&gt; numItr = nums.iterator();\r\n    if (!numItr.hasNext()) {\r\n        return Stream.of();\r\n    }\r\n\r\n    return Stream.iterate(\r\n                    Optional.of(numItr.next()),\r\n                    Optional::isPresent,\r\n                    maybeSum -&gt; maybeSum.flatMap(sum -&gt;\r\n                            numItr.hasNext() ? Optional.of(Integer.sum(sum, numItr.next())) : Optional.empty()))\r\n            .map(Optional::get);\r\n}\r\n```\r\n\r\nIf the input list is `[2, 4, 3]`, then the output stream will be `[2, 6, 9]`.\r\n\r\n(Java 8 only has `Stream.iterate​(T&#160;seed, UnaryOperator&lt;T&gt;&#160;f)`, so you will have to call `.takeWhile(Optional::isPresent)` instead to convert the infinite stream to a finite stream.)","title":"Create a finite stream with a generator function","body":"<p>You can create a stream of <code>Optional</code>'s with <code>Stream.iterate​(T seed, Predicate&lt;? super T&gt; hasNext, UnaryOperator&lt;T&gt; next)</code>, stopping on empty. You can then call <code>.map(Optional::get)</code> on the stream.</p>\n<p>Here's an example of creating a stream that tracks the cumulative sum of a list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Stream&lt;Integer&gt; cumulativeSum(List&lt;Integer&gt; nums) {\n    Iterator&lt;Integer&gt; numItr = nums.iterator();\n    if (!numItr.hasNext()) {\n        return Stream.of();\n    }\n\n    return Stream.iterate(\n                    Optional.of(numItr.next()),\n                    Optional::isPresent,\n                    maybeSum -&gt; maybeSum.flatMap(sum -&gt;\n                            numItr.hasNext() ? Optional.of(Integer.sum(sum, numItr.next())) : Optional.empty()))\n            .map(Optional::get);\n}\n</code></pre>\n<p>If the input list is <code>[2, 4, 3]</code>, then the output stream will be <code>[2, 6, 9]</code>.</p>\n<p>(Java 8 only has <code>Stream.iterate​(T seed, UnaryOperator&lt;T&gt; f)</code>, so you will have to call <code>.takeWhile(Optional::isPresent)</code> instead to convert the infinite stream to a finite stream.)</p>\n"}],"owner":{"account_id":3581935,"reputation":1844,"user_id":2989935,"accept_rate":88,"display_name":"Harper"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":231,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1672382220,"creation_date":1571501287,"question_id":58465531,"body_markdown":"I have a program to read data from multiple sources, use a tournament tree to merge sort them, pack the data into blocks and output the blocks. I have implemented this as a function, which returns null when no more block is available.\r\n\r\n    DataBlock buildBlock()\r\n\r\nNow I want to output a stream of blocks, but the only method I have found so far is `Stream.generate` which generates an infinite stream. My stream is of course not infinite. What is a proper way to generate a finite stream from this function?","title":"Create a finite stream with a generator function","body":"<p>I have a program to read data from multiple sources, use a tournament tree to merge sort them, pack the data into blocks and output the blocks. I have implemented this as a function, which returns null when no more block is available.</p>\n\n<pre><code>DataBlock buildBlock()\n</code></pre>\n\n<p>Now I want to output a stream of blocks, but the only method I have found so far is <code>Stream.generate</code> which generates an infinite stream. My stream is of course not infinite. What is a proper way to generate a finite stream from this function?</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":5189029,"reputation":216,"user_id":4314527,"display_name":"Ashish Kathait"},"score":0,"creation_date":1672383935,"post_id":74958779,"comment_id":132279176,"body_markdown":"Did you go through this thead : https://stackoverflow.com/questions/3844307/how-to-read-file-from-relative-path-in-java-project-java-io-file-cannot-find-th","body":"Did you go through this thead : <a href=\"https://stackoverflow.com/questions/3844307/how-to-read-file-from-relative-path-in-java-project-java-io-file-cannot-find-th\" title=\"how to read file from relative path in java project java io file cannot find th\">stackoverflow.com/questions/3844307/&hellip;</a>"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1672388990,"post_id":74958779,"comment_id":132280065,"body_markdown":"You should use `this.getClass().getResourceAsStream(&quot;/data.csv&quot;)` instead...","body":"You should use <code>this.getClass().getResourceAsStream(&quot;&#47;data.csv&quot;)</code> instead..."}],"owner":{"account_id":21673536,"reputation":31,"user_id":15990842,"display_name":"Ranga chimalgi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672382036,"creation_date":1672382036,"question_id":74958779,"body_markdown":"I want to use relative path in my code but relative is not working for me but working on absolute path.\r\nhere my code(Utils.java\r\n```\r\npackage org.example;\r\n\r\nimport org.example.model.Stats;\r\n\r\nimport java.io.*;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class Utils {\r\n    private static final String FILE_PATH = &quot;/home/project/Dummy/src/main/resources/data.csv&quot;;\r\n    public  static List&lt;Stats&gt; readData() {\r\n        List&lt;Stats&gt; StatsList = new ArrayList&lt;&gt;();\r\n        try (BufferedReader br = new BufferedReader(\r\n                new FileReader(FILE_PATH))\r\n        ) {\r\n            String line;\r\n            while ((line = br.readLine()) != null) {\r\n                String[] fields = line.split(&quot;,&quot;);\r\n\r\n                Stats Stats = new Stats();\r\n\r\n                Stats.setName(fields[0]);\r\n                Stats.setAddress(fields[1]);\r\n                Stats.setContact(fields[2]);\r\n                Stats.setAbout(fields[3]);\r\n                \r\n\r\n                StatsList.add(Stats);\r\n            }\r\n        } catch (IOException e) {\r\n            System.out.println(&quot;Error opening file: &quot; + e.getMessage());\r\n        }\r\n        return StatsList;\r\n    }\r\n```\r\nIn below i give the image of my project structure \r\n\r\n[![Project Structure][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Z3GqF.png","title":"Relative Path is not working but absolute is working in java (Maven project structure)","body":"<p>I want to use relative path in my code but relative is not working for me but working on absolute path.\nhere my code(Utils.java</p>\n<pre><code>package org.example;\n\nimport org.example.model.Stats;\n\nimport java.io.*;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class Utils {\n    private static final String FILE_PATH = &quot;/home/project/Dummy/src/main/resources/data.csv&quot;;\n    public  static List&lt;Stats&gt; readData() {\n        List&lt;Stats&gt; StatsList = new ArrayList&lt;&gt;();\n        try (BufferedReader br = new BufferedReader(\n                new FileReader(FILE_PATH))\n        ) {\n            String line;\n            while ((line = br.readLine()) != null) {\n                String[] fields = line.split(&quot;,&quot;);\n\n                Stats Stats = new Stats();\n\n                Stats.setName(fields[0]);\n                Stats.setAddress(fields[1]);\n                Stats.setContact(fields[2]);\n                Stats.setAbout(fields[3]);\n                \n\n                StatsList.add(Stats);\n            }\n        } catch (IOException e) {\n            System.out.println(&quot;Error opening file: &quot; + e.getMessage());\n        }\n        return StatsList;\n    }\n</code></pre>\n<p>In below i give the image of my project structure</p>\n<p><a href=\"https://i.stack.imgur.com/Z3GqF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z3GqF.png\" alt=\"Project Structure\" /></a></p>\n"},{"tags":["java","android-studio"],"owner":{"account_id":21485831,"reputation":3,"user_id":15832482,"display_name":"tfih313"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672381472,"creation_date":1672381472,"question_id":74958724,"body_markdown":"\r\napplication code:\r\n\r\n```\r\npublic static void mainButtonCreator(Context c, ConstraintLayout rootConstraintLayout,\r\n                                     Button[] buttons, int[] colorCodes,\r\n                                     ArrayList&lt;String&gt; buttonText) {\r\n\r\n    GridLayout gridLayout = gridLayoutCreator(c);\r\n\r\n    for (int i = 0; i &lt; 4; i++) {\r\n        String[] arrOfStr = buttonText.get(i).split(&quot;/&quot;, 2);\r\n\r\n        ConstraintLayout constraintLayout = new ConstraintLayout(c);\r\n\r\n        TextView textView = new TextView(c);\r\n        textView.setGravity(Gravity.CENTER);\r\n        String s = arrOfStr[0];\r\n        textView.setText(s);\r\n        textView.setTextColor(c.getResources().getColor(R.color.colorBlack));\r\n\r\n        buttons[i] = new Button(c);\r\n        buttons[i].setGravity(Gravity.CENTER);\r\n\r\n        ConstraintLayout.LayoutParams params = new ConstraintLayout.LayoutParams(\r\n                (int) c.getResources().getDimension(R.dimen.CreateView_mainButtonCreator_size),\r\n                (int) c.getResources().getDimension(R.dimen.CreateView_mainButtonCreator_size));\r\n\r\n        params.bottomToBottom = ConstraintSet.PARENT_ID;\r\n        params.topToTop = ConstraintSet.PARENT_ID;\r\n        params.startToStart = ConstraintSet.PARENT_ID;\r\n        params.endToEnd = ConstraintSet.PARENT_ID;\r\n\r\n\r\n        buttons[i].setTextSize(c.getResources().getDimension(R.dimen.CreateView_mainButtonCreator_textSize));\r\n        String s1 = arrOfStr[1];\r\n        buttons[i].setText(s1);\r\n        buttons[i].setAllCaps(false);\r\n        buttons[i].setLayoutParams(params);\r\n\r\n        constraintLayout.addView(textView);\r\n        constraintLayout.addView(buttons[i]);\r\n        gridLayout.addView(constraintLayout);\r\n\r\n    }\r\n\r\n    buttonBackgroundSet(c, buttons, colorCodes);\r\n    rootConstraintLayout.addView(gridLayout);\r\n\r\n}\r\n```\r\n\r\nI tested this code but it doesn&#39;t work:\r\n```\r\n        params.bottomToBottom = ConstraintSet.PARENT_ID;\r\n        params.topToTop = ConstraintSet.PARENT_ID;\r\n        params.startToStart = ConstraintSet.PARENT_ID;\r\n        params.endToEnd = ConstraintSet.PARENT_ID;\r\n\r\n```\r\nThis image is the output of my Android Studio application. What code should I write so that the buttons are placed in the center of the device?\r\n\r\n[enter image description here](https://i.stack.imgur.com/32bZA.png)\r\n","title":"How to dynamically align multiple buttons in the center of a constraint layout?","body":"<p>application code:</p>\n<pre><code>public static void mainButtonCreator(Context c, ConstraintLayout rootConstraintLayout,\n                                     Button[] buttons, int[] colorCodes,\n                                     ArrayList&lt;String&gt; buttonText) {\n\n    GridLayout gridLayout = gridLayoutCreator(c);\n\n    for (int i = 0; i &lt; 4; i++) {\n        String[] arrOfStr = buttonText.get(i).split(&quot;/&quot;, 2);\n\n        ConstraintLayout constraintLayout = new ConstraintLayout(c);\n\n        TextView textView = new TextView(c);\n        textView.setGravity(Gravity.CENTER);\n        String s = arrOfStr[0];\n        textView.setText(s);\n        textView.setTextColor(c.getResources().getColor(R.color.colorBlack));\n\n        buttons[i] = new Button(c);\n        buttons[i].setGravity(Gravity.CENTER);\n\n        ConstraintLayout.LayoutParams params = new ConstraintLayout.LayoutParams(\n                (int) c.getResources().getDimension(R.dimen.CreateView_mainButtonCreator_size),\n                (int) c.getResources().getDimension(R.dimen.CreateView_mainButtonCreator_size));\n\n        params.bottomToBottom = ConstraintSet.PARENT_ID;\n        params.topToTop = ConstraintSet.PARENT_ID;\n        params.startToStart = ConstraintSet.PARENT_ID;\n        params.endToEnd = ConstraintSet.PARENT_ID;\n\n\n        buttons[i].setTextSize(c.getResources().getDimension(R.dimen.CreateView_mainButtonCreator_textSize));\n        String s1 = arrOfStr[1];\n        buttons[i].setText(s1);\n        buttons[i].setAllCaps(false);\n        buttons[i].setLayoutParams(params);\n\n        constraintLayout.addView(textView);\n        constraintLayout.addView(buttons[i]);\n        gridLayout.addView(constraintLayout);\n\n    }\n\n    buttonBackgroundSet(c, buttons, colorCodes);\n    rootConstraintLayout.addView(gridLayout);\n\n}\n</code></pre>\n<p>I tested this code but it doesn't work:</p>\n<pre><code>        params.bottomToBottom = ConstraintSet.PARENT_ID;\n        params.topToTop = ConstraintSet.PARENT_ID;\n        params.startToStart = ConstraintSet.PARENT_ID;\n        params.endToEnd = ConstraintSet.PARENT_ID;\n\n</code></pre>\n<p>This image is the output of my Android Studio application. What code should I write so that the buttons are placed in the center of the device?</p>\n<p><a href=\"https://i.stack.imgur.com/32bZA.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","android","kotlin","android-xml"],"comments":[{"owner":{"account_id":1080390,"reputation":4094,"user_id":1077539,"accept_rate":40,"display_name":"sadat"},"score":0,"creation_date":1602567362,"post_id":64329125,"comment_id":113753106,"body_markdown":"provide some more code please","body":"provide some more code please"},{"owner":{"account_id":2294849,"reputation":332016,"user_id":2016562,"accept_rate":92,"display_name":"Gabriele Mariotti"},"score":0,"creation_date":1602572037,"post_id":64329125,"comment_id":113754595,"body_markdown":"Add your code, your build.gradle and your app theme","body":"Add your code, your build.gradle and your app theme"}],"answers":[{"tags":[],"owner":{"account_id":16614427,"reputation":699,"user_id":12006498,"display_name":"Debarshi Bhattacharjee"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1602569234,"creation_date":1602569234,"answer_id":64329462,"question_id":64329125,"body_markdown":"You can refer to them by **?attr/** and not **@attr/**. Example - **?attr/colorPrimary**. ","title":"failed to find &#39;@attr/TextAppearanceButton&#39; in current theme","body":"<p>You can refer to them by <strong>?attr/</strong> and not <strong>@attr/</strong>. Example - <strong>?attr/colorPrimary</strong>.</p>\n"},{"tags":[],"owner":{"account_id":18045105,"reputation":61,"user_id":13116311,"display_name":"Sigit"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1616497725,"creation_date":1616497725,"answer_id":66761956,"question_id":64329125,"body_markdown":"change your styles.xml to like below\r\n\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.MaterialComponents.Light.NoActionBar&quot;&gt;\r\n","title":"failed to find &#39;@attr/TextAppearanceButton&#39; in current theme","body":"<p>change your styles.xml to like below</p>\n<pre><code>&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.MaterialComponents.Light.NoActionBar&quot;&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":12911096,"reputation":111,"user_id":9336757,"display_name":"Makari Kevin"},"score":2,"creation_date":1672504140,"post_id":74958691,"comment_id":132300283,"body_markdown":"Adding the theme `android:theme=&quot;@style/Theme.MaterialComponents.Light.NoActionBar&quot;` to my parent layout saved me from going bonkers, thanks @Sourabh.","body":"Adding the theme <code>android:theme=&quot;@style&#47;Theme.MaterialComponents.Light.NoActio&zwnj;&#8203;nBar&quot;</code> to my parent layout saved me from going bonkers, thanks @Sourabh."}],"tags":[],"owner":{"account_id":20562717,"reputation":61,"user_id":15092877,"display_name":"Sourabh Bhatt"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1672381458,"creation_date":1672381001,"answer_id":74958691,"question_id":64329125,"body_markdown":"I was also facing the issue of rendering xml files after updating my android studio to DOPLPHIN.\r\n\r\nIn your xml, add android:theme=&quot;@style/YOUR_MATERIAL_THEME&quot; to your parent layout and all rendering issues will be gone.\r\n\r\n                       OR\r\n\r\nIn your manifest file under &lt;application add android:theme=&quot;@style/YOUR_MATERIAL_THEME&quot; \r\n\r\n\r\nI hope this fixes your issue.","title":"failed to find &#39;@attr/TextAppearanceButton&#39; in current theme","body":"<p>I was also facing the issue of rendering xml files after updating my android studio to DOPLPHIN.</p>\n<p>In your xml, add android:theme=&quot;@style/YOUR_MATERIAL_THEME&quot; to your parent layout and all rendering issues will be gone.</p>\n<pre><code>                   OR\n</code></pre>\n<p>In your manifest file under &lt;application add android:theme=&quot;@style/YOUR_MATERIAL_THEME&quot;</p>\n<p>I hope this fixes your issue.</p>\n"}],"owner":{"account_id":6797112,"reputation":281,"user_id":5231926,"display_name":"Leslie Joe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3399,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1672381458,"creation_date":1602567225,"question_id":64329125,"body_markdown":"I want to add Extended floating action button to my android project app but got an error saying failed to find `@attr/TextAppearanceButton` in current theme. I have implemented material dependency in build.grade module. I am new to Android Development. Please I need a help &#128591;&#127998;. ","title":"failed to find &#39;@attr/TextAppearanceButton&#39; in current theme","body":"<p>I want to add Extended floating action button to my android project app but got an error saying failed to find <code>@attr/TextAppearanceButton</code> in current theme. I have implemented material dependency in build.grade module. I am new to Android Development. Please I need a help 🙏🏾.</p>\n"},{"tags":["java","xml","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":12896639,"reputation":337,"user_id":9326792,"display_name":"Luca Mattia Ferrari"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627592413,"creation_date":1627592413,"answer_id":68582728,"question_id":41712421,"body_markdown":"you would have to use **simple** language instead of **constant**, and the correct syntax is `${properties:x}`","title":"How to retrieve a exchange property in the camel route XML?","body":"<p>you would have to use <strong>simple</strong> language instead of <strong>constant</strong>, and the correct syntax is <code>${properties:x}</code></p>\n"}],"owner":{"account_id":10055754,"reputation":1,"user_id":7434003,"display_name":"Atul gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9830,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672380295,"creation_date":1484719403,"question_id":41712421,"body_markdown":"I have to run a loop in the route. my route looks as \r\n\r\n\r\n    &lt;camel:loop&gt;\r\n    \t  &lt;camel:constant&gt;${property.x}&lt;/camel:constant&gt; \r\n    &lt;/camel:loop&gt;\r\n\r\nMy processor looks as\r\n\r\n\tDate date = new Date();\r\n\t\tthis.LOGGER\r\n\t\t\t\t.info(&quot;\\n****WELCOME TO THE REQUEST OF CHECK PROCESSOR**&quot;);\r\n\t\tint y=4;\r\n\t\tInteger a=new Integer(y);\r\n\t\texchange.setProperty(x,a);\r\n\t\tint k=(Integer) exchange.getProperty(x);\r\n\t\tthis.LOGGER\r\n\t\t.info(&quot;\\n***WELCOME TO THE REQUEST OF CHECK PROCESSOR ENDINGGGGGGGG***&quot;+&quot;a=   &quot;+a+&quot;  Y=  &quot;+y+&quot;  x=   &quot;+exchange.getProperty(x)+&quot;  k=  &quot;+k);\r\n\t\t\r\n\r\n\r\nwhile running this the value of x= 4.I want to access this x in the camel route XML file.","title":"How to retrieve a exchange property in the camel route XML?","body":"<p>I have to run a loop in the route. my route looks as </p>\n\n<pre><code>&lt;camel:loop&gt;\n      &lt;camel:constant&gt;${property.x}&lt;/camel:constant&gt; \n&lt;/camel:loop&gt;\n</code></pre>\n\n<p>My processor looks as</p>\n\n<pre><code>Date date = new Date();\n    this.LOGGER\n            .info(\"\\n****WELCOME TO THE REQUEST OF CHECK PROCESSOR**\");\n    int y=4;\n    Integer a=new Integer(y);\n    exchange.setProperty(x,a);\n    int k=(Integer) exchange.getProperty(x);\n    this.LOGGER\n    .info(\"\\n***WELCOME TO THE REQUEST OF CHECK PROCESSOR ENDINGGGGGGGG***\"+\"a=   \"+a+\"  Y=  \"+y+\"  x=   \"+exchange.getProperty(x)+\"  k=  \"+k);\n</code></pre>\n\n<p>while running this the value of x= 4.I want to access this x in the camel route XML file.</p>\n"},{"tags":["java","spring-boot","apache-mina"],"owner":{"account_id":543997,"reputation":332,"user_id":913297,"accept_rate":56,"display_name":"Lynx777"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672380154,"creation_date":1672380154,"question_id":74958628,"body_markdown":"Documentations doesn&#39;t mention about this either, i need this to implement keep-alive or heartbeat mechanism for my UDP Server which again marked as TBD in [here][1]; \r\n\r\nI can achieve this using [Spring Syslog][2] but it seems impossible and tedious to change my codes in production to fulfil this last minute requirement\r\n\r\n\r\n  [1]: https://mina.apache.org/mina-project/userguide/ch5-filters/ch5.8-keep-alive-filter.html\r\n  [2]: https://github.com/spring-projects/spring-integration/blob/main/spring-integration-syslog/src/test/java/org/springframework/integration/syslog/inbound/SyslogReceivingChannelAdapterTests.java","title":"How to access Mina UDP headers details?","body":"<p>Documentations doesn't mention about this either, i need this to implement keep-alive or heartbeat mechanism for my UDP Server which again marked as TBD in <a href=\"https://mina.apache.org/mina-project/userguide/ch5-filters/ch5.8-keep-alive-filter.html\" rel=\"nofollow noreferrer\">here</a>;</p>\n<p>I can achieve this using <a href=\"https://github.com/spring-projects/spring-integration/blob/main/spring-integration-syslog/src/test/java/org/springframework/integration/syslog/inbound/SyslogReceivingChannelAdapterTests.java\" rel=\"nofollow noreferrer\">Spring Syslog</a> but it seems impossible and tedious to change my codes in production to fulfil this last minute requirement</p>\n"},{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1672370553,"post_id":74957841,"comment_id":132277482,"body_markdown":"You could just add 1 to whatever `get(Calendar.MONTH)` returns, because it returns a number from 0 to 11.  But seriously?  If someone is teaching you how to use the `Calendar` class, you should probably choose a new teacher.  That class has been obsolete for about 10 years.","body":"You could just add 1 to whatever <code>get(Calendar.MONTH)</code> returns, because it returns a number from 0 to 11.  But seriously?  If someone is teaching you how to use the <code>Calendar</code> class, you should probably choose a new teacher.  That class has been obsolete for about 10 years."},{"owner":{"account_id":24609375,"reputation":1,"user_id":18511173,"display_name":"Nguyễn Anh Việt"},"score":0,"creation_date":1672371289,"post_id":74957841,"comment_id":132277559,"body_markdown":"tks. and sorry for my lack of knowledge","body":"tks. and sorry for my lack of knowledge"}],"answers":[{"comments":[{"owner":{"account_id":24609375,"reputation":1,"user_id":18511173,"display_name":"Nguyễn Anh Việt"},"score":0,"creation_date":1672371207,"post_id":74957856,"comment_id":132277552,"body_markdown":"tks ^^, it worked","body":"tks ^^, it worked"}],"tags":[],"owner":{"account_id":21604821,"reputation":46,"user_id":17613841,"display_name":"Sriram"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672378235,"creation_date":1672370513,"answer_id":74957856,"question_id":74957841,"body_markdown":"# `java.time.LocalDate`\r\n\r\nYou can use below to get month value in int or string\r\n\r\n    LocalDate.now().getMonthValue();\r\n    LocalDate.now().getMonth();","title":"How can I get present months?","body":"<h1><code>java.time.LocalDate</code></h1>\n<p>You can use below to get month value in int or string</p>\n<pre><code>LocalDate.now().getMonthValue();\nLocalDate.now().getMonth();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22264521,"reputation":329,"user_id":20837030,"display_name":"jcredking"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672372036,"creation_date":1672372036,"answer_id":74957961,"question_id":74957841,"body_markdown":"You can also use the `SimpleDateFormat` method to get the current date and time.\r\n\r\nHere see in my function I get the current date and time for your reference \r\n\r\n    private void getTime(TextView dateTime) {\r\n        Date date = new Date();\r\n        @SuppressLint(&quot;SimpleDateFormat&quot;) SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EE, d MMM yyyy HH:mm:ss aaa&quot;);\r\n        dateTime.setText(simpleDateFormat.format(date));\r\n    }\r\n\r\nFor more information, you can refer to the [official android documentation here][1]\r\n\r\n\r\n  [1]: https://developer.android.com/reference/java/text/SimpleDateFormat.html","title":"How can I get present months?","body":"<p>You can also use the <code>SimpleDateFormat</code> method to get the current date and time.</p>\n<p>Here see in my function I get the current date and time for your reference</p>\n<pre><code>private void getTime(TextView dateTime) {\n    Date date = new Date();\n    @SuppressLint(&quot;SimpleDateFormat&quot;) SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EE, d MMM yyyy HH:mm:ss aaa&quot;);\n    dateTime.setText(simpleDateFormat.format(date));\n}\n</code></pre>\n<p>For more information, you can refer to the <a href=\"https://developer.android.com/reference/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\">official android documentation here</a></p>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1672378186,"post_id":74958101,"comment_id":132278369,"body_markdown":"These terribly flawed classes were years ago supplanted by the modern *java.time* classes defined in JSR&#160;310.","body":"These terribly flawed classes were years ago supplanted by the modern <i>java.time</i> classes defined in JSR 310."},{"owner":{"account_id":24609375,"reputation":1,"user_id":18511173,"display_name":"Nguyễn Anh Việt"},"score":0,"creation_date":1672452852,"post_id":74958101,"comment_id":132293509,"body_markdown":"tks for your help ^^","body":"tks for your help ^^"}],"tags":[],"owner":{"account_id":26855967,"reputation":2351,"user_id":20440272,"display_name":"Sohaib Ahmed"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672374171,"creation_date":1672374171,"answer_id":74958101,"question_id":74957841,"body_markdown":"Here are some examples from official documentation. [Reference Link][1]\r\n\r\n    SimpleDateFormat sdf = new SimpleDateFormat(&quot;MM&quot;);\r\n    Date date = new Date();\r\n    Log.d(&quot;MyTag&quot;, sdf.format(date));\r\n\r\nHere `MM` represents months in integer form (dec ~ 12)\r\nHere `MMM` represents months in alphabets (Dec)\r\n\r\n\r\n  [1]: https://developer.android.com/reference/java/text/SimpleDateFormat#examples","title":"How can I get present months?","body":"<p>Here are some examples from official documentation. <a href=\"https://developer.android.com/reference/java/text/SimpleDateFormat#examples\" rel=\"nofollow noreferrer\">Reference Link</a></p>\n<pre><code>SimpleDateFormat sdf = new SimpleDateFormat(&quot;MM&quot;);\nDate date = new Date();\nLog.d(&quot;MyTag&quot;, sdf.format(date));\n</code></pre>\n<p>Here <code>MM</code> represents months in integer form (dec ~ 12)\nHere <code>MMM</code> represents months in alphabets (Dec)</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672379291,"creation_date":1672378954,"answer_id":74958505,"question_id":74957841,"body_markdown":"The [Answer by Sriram][1] is correct, and provides the modern solution using [`java.time.LocalDate`][2] class. Here are a few more details. \r\n\r\n# Time zone\r\n\r\nThe `LocalDate#now` method implicitly uses the JVM’s current default time zone. Time zone is critical because for any given moment the time, and therefore the date, can vary around the globe by zone. It can be “tomorrow” in Tokyo Japan while simultaneously be “yesterday” in Toledo Ohio US. \r\n\r\n    ZoneId z = ZoneId.of( &quot;Asia/Tokyo&quot; ) ;\r\n    LocalDate today = LocalDate.now( z ) ;\r\n\r\nIf you omit passing the `ZoneId` object, the JVM‘S current default time zone is automatically applied. This has the same effect as explicitly passing the default.\r\n\r\n    LocalDate today = LocalDate.now( ZoneId.systemDefault() ) ;\r\n\r\nI recommend the explicit approach to make your intentions crystal-clear.\r\n\r\n\r\n# `Month` enum\r\n\r\nThe method [`LocalDate#getMonth`][3] returns a [`Month`][4] enum object.\r\n\r\n    Month month = LocalDate.now().getMonth() ;\r\n\r\nIf you want to generate text to represent that value, you can automatically localize.\r\n\r\n    Locale locale = Locale.CANADA_FRENCH ;\r\n    String output = month.getDisplayName( TextStyle.FULL , locale ) ;\r\n\r\nSee this [code run at Ideone.com][5].\r\n\r\n&gt; d&#233;cembre\r\n\r\nYou can access the JVM’s current default locale by calling `Locale.getDefault()`. \r\n\r\n# Android\r\n\r\nAndroid 26+ carries an implementation of the *java.time* classes.\r\n\r\nFor earlier Android, use the latest tooling to access most of the *java.time* functionality via “API desugaring”. \r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/74957856/642706\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDate.html\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDate.html#getMonth()\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Month.html\r\n  [5]: https://ideone.com/vP6BPa","title":"How can I get present months?","body":"<p>The <a href=\"https://stackoverflow.com/a/74957856/642706\">Answer by Sriram</a> is correct, and provides the modern solution using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDate.html\" rel=\"nofollow noreferrer\"><code>java.time.LocalDate</code></a> class. Here are a few more details.</p>\n<h1>Time zone</h1>\n<p>The <code>LocalDate#now</code> method implicitly uses the JVM’s current default time zone. Time zone is critical because for any given moment the time, and therefore the date, can vary around the globe by zone. It can be “tomorrow” in Tokyo Japan while simultaneously be “yesterday” in Toledo Ohio US.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;Asia/Tokyo&quot; ) ;\nLocalDate today = LocalDate.now( z ) ;\n</code></pre>\n<p>If you omit passing the <code>ZoneId</code> object, the JVM‘S current default time zone is automatically applied. This has the same effect as explicitly passing the default.</p>\n<pre><code>LocalDate today = LocalDate.now( ZoneId.systemDefault() ) ;\n</code></pre>\n<p>I recommend the explicit approach to make your intentions crystal-clear.</p>\n<h1><code>Month</code> enum</h1>\n<p>The method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDate.html#getMonth()\" rel=\"nofollow noreferrer\"><code>LocalDate#getMonth</code></a> returns a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Month.html\" rel=\"nofollow noreferrer\"><code>Month</code></a> enum object.</p>\n<pre><code>Month month = LocalDate.now().getMonth() ;\n</code></pre>\n<p>If you want to generate text to represent that value, you can automatically localize.</p>\n<pre><code>Locale locale = Locale.CANADA_FRENCH ;\nString output = month.getDisplayName( TextStyle.FULL , locale ) ;\n</code></pre>\n<p>See this <a href=\"https://ideone.com/vP6BPa\" rel=\"nofollow noreferrer\">code run at Ideone.com</a>.</p>\n<blockquote>\n<p>décembre</p>\n</blockquote>\n<p>You can access the JVM’s current default locale by calling <code>Locale.getDefault()</code>.</p>\n<h1>Android</h1>\n<p>Android 26+ carries an implementation of the <em>java.time</em> classes.</p>\n<p>For earlier Android, use the latest tooling to access most of the <em>java.time</em> functionality via “API desugaring”.</p>\n"},{"comments":[{"owner":{"account_id":24609375,"reputation":1,"user_id":18511173,"display_name":"Nguyễn Anh Việt"},"score":0,"creation_date":1672452939,"post_id":74958605,"comment_id":132293518,"body_markdown":"tks for your help ^^","body":"tks for your help ^^"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1672459242,"post_id":74958605,"comment_id":132294014,"body_markdown":"@NguyễnAnhViệt you can show your appreciation by accepting my answer or up-voting it (or both).","body":"@NguyễnAnhViệt you can show your appreciation by accepting my answer or up-voting it (or both)."}],"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672379918,"creation_date":1672379918,"answer_id":74958605,"question_id":74957841,"body_markdown":"If you look at the source code for class `java.util.Calendar`, you will find the following constant:\r\n```java\r\n    /**\r\n     * Value of the {@link #MONTH} field indicating the\r\n     * twelfth month of the year in the Gregorian and Julian calendars.\r\n     */\r\n    public static final int DECEMBER = 11;\r\n```\r\nHence `calendar.get(Calendar.MONTH))` correctly returns 11 (eleven).\r\n\r\nHowever, Android 8 (API level 26) added class [LocalDate][1] which should be used instead of class `Calendar`. Note that class `Calendar` contains both date and time whereas class `LocalDate` contains the date only. Class `LocalDateTime` contains both a date and a time. There is also class `LocalTime`.\r\n\r\nAccording to the documentation for [static] method `now`, in class `LocalDate`:\r\n&gt; Obtains the current date from the system clock in the default time-zone.\r\n\r\nIf you want the current month, you can call method `getMonthValue` which...\r\n&gt; Gets the month-of-year field from 1 to 12.\r\n\r\nAlternatively, you can call method `getMonth` which...\r\n&gt; Gets the month-of-year field using the `Month` enum.\r\n\r\nSo your code should be:\r\n```java\r\njava.time.LocalDate calendar = java.time.LocalDate.now();\r\nSystem.out.println(&quot;calendar           : &quot; + calendar);\r\nSystem.out.println(&quot;calendar.getMonth(): &quot; + calendar.getMonth());\r\n```\r\nwhich produces the following output:\r\n```none\r\ncalendar           : 2022-12-30\r\ncalendar.getMonth(): DECEMBER\r\n```\r\n\r\n\r\n\r\n  [1]: https://developer.android.com/reference/java/time/LocalDate","title":"How can I get present months?","body":"<p>If you look at the source code for class <code>java.util.Calendar</code>, you will find the following constant:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    /**\n     * Value of the {@link #MONTH} field indicating the\n     * twelfth month of the year in the Gregorian and Julian calendars.\n     */\n    public static final int DECEMBER = 11;\n</code></pre>\n<p>Hence <code>calendar.get(Calendar.MONTH))</code> correctly returns 11 (eleven).</p>\n<p>However, Android 8 (API level 26) added class <a href=\"https://developer.android.com/reference/java/time/LocalDate\" rel=\"nofollow noreferrer\">LocalDate</a> which should be used instead of class <code>Calendar</code>. Note that class <code>Calendar</code> contains both date and time whereas class <code>LocalDate</code> contains the date only. Class <code>LocalDateTime</code> contains both a date and a time. There is also class <code>LocalTime</code>.</p>\n<p>According to the documentation for [static] method <code>now</code>, in class <code>LocalDate</code>:</p>\n<blockquote>\n<p>Obtains the current date from the system clock in the default time-zone.</p>\n</blockquote>\n<p>If you want the current month, you can call method <code>getMonthValue</code> which...</p>\n<blockquote>\n<p>Gets the month-of-year field from 1 to 12.</p>\n</blockquote>\n<p>Alternatively, you can call method <code>getMonth</code> which...</p>\n<blockquote>\n<p>Gets the month-of-year field using the <code>Month</code> enum.</p>\n</blockquote>\n<p>So your code should be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>java.time.LocalDate calendar = java.time.LocalDate.now();\nSystem.out.println(&quot;calendar           : &quot; + calendar);\nSystem.out.println(&quot;calendar.getMonth(): &quot; + calendar.getMonth());\n</code></pre>\n<p>which produces the following output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>calendar           : 2022-12-30\ncalendar.getMonth(): DECEMBER\n</code></pre>\n"}],"owner":{"account_id":24609375,"reputation":1,"user_id":18511173,"display_name":"Nguyễn Anh Việt"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":5,"score":0,"last_activity_date":1672379918,"creation_date":1672370197,"question_id":74957841,"body_markdown":"I tried\r\n```java\r\nCalendar calendar= Calendar.getInstance();\r\nSystem.out.println(&quot;use with command get time \\&quot;calendar.getTime()\\&quot;           : &quot;+calendar.getTime());\r\nSystem.out.println(&quot;use with command get month \\&quot;calendar.get(Calendar.MONTH)\\&quot;: &quot;+calendar.get(Calendar.MONTH));\r\n```\r\nbut I can&#39;t get the right month.\r\n\r\n[this is my output](https://i.stack.imgur.com/A9k4g.png)\r\n\r\nHow can I get the current month? Thanks for reading and sorry for my bad English.","title":"How can I get present months?","body":"<p>I tried</p>\n<pre class=\"lang-java prettyprint-override\"><code>Calendar calendar= Calendar.getInstance();\nSystem.out.println(&quot;use with command get time \\&quot;calendar.getTime()\\&quot;           : &quot;+calendar.getTime());\nSystem.out.println(&quot;use with command get month \\&quot;calendar.get(Calendar.MONTH)\\&quot;: &quot;+calendar.get(Calendar.MONTH));\n</code></pre>\n<p>but I can't get the right month.</p>\n<p><a href=\"https://i.stack.imgur.com/A9k4g.png\" rel=\"nofollow noreferrer\">this is my output</a></p>\n<p>How can I get the current month? Thanks for reading and sorry for my bad English.</p>\n"},{"tags":["java","spring-boot","jpql"],"answers":[{"comments":[{"owner":{"account_id":12684886,"reputation":451,"user_id":9217084,"display_name":"Kacper"},"score":0,"creation_date":1555515450,"post_id":55727429,"comment_id":98141360,"body_markdown":"Sorry, my fault i query for children not grandchildren, I have edited my question.","body":"Sorry, my fault i query for children not grandchildren, I have edited my question."}],"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1555503624,"creation_date":1555503624,"answer_id":55727429,"question_id":55727390,"body_markdown":"c.grandchildren is missing the **alias e**\r\n\r\n    @Query(&quot;select e &quot; +\r\n           &quot;from Parent p &quot; +\r\n           &quot;inner join p.children c &quot; +\r\n           &quot;inner join fetch c.grandchildren e&quot; +\r\n           &quot;where p = :parent and &quot; +\r\n           &quot;c.childName like concat(:childName,&#39;%&#39;)&quot;)\r\n        Page&lt;Expense&gt; findBy(@Param(&quot;parent&quot;) Parent parent, @Param(&quot;childName&quot;)String childName, Pageable pageable);","title":"JPQL Query for page of children and join fetch of grandchildren throws exception query specified join fetching","body":"<p>c.grandchildren is missing the <strong>alias e</strong></p>\n\n<pre><code>@Query(\"select e \" +\n       \"from Parent p \" +\n       \"inner join p.children c \" +\n       \"inner join fetch c.grandchildren e\" +\n       \"where p = :parent and \" +\n       \"c.childName like concat(:childName,'%')\")\n    Page&lt;Expense&gt; findBy(@Param(\"parent\") Parent parent, @Param(\"childName\")String childName, Pageable pageable);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12684886,"reputation":451,"user_id":9217084,"display_name":"Kacper"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1555535424,"creation_date":1555535424,"answer_id":55736012,"question_id":55727390,"body_markdown":"I found out that when you want to get page of data you can&#39;t use `join fetch` so according to this [question][1]. I have created two methods in JpaRepository. \r\n\r\n 1. Method to retrieve page of child ids\r\n 2. Method to retrieve children with fetched grandchildre.\r\n\r\nThis is how code looks like after that:\r\n```java\r\n@Query(&quot;select c.id &quot; +\r\n  &quot;from Parent p &quot; +\r\n  &quot;inner join p.children c &quot; +\r\n  &quot;where p = :parent and &quot; +\r\n  &quot;c.childrenName like concat(:childrenName,&#39;%&#39;)&quot;)\r\nPage&lt;Long&gt; findIdsBy(@Param(&quot;parent&quot;) Parent parent,\r\n  @Param(&quot;childrenName&quot;) String childrenName,\r\n  Pageable pageable);\r\n\r\n@Query(&quot;from Children c join fetch c.grandChildren where c.id in :ids&quot;)\r\nList&lt;Children&gt; getChildrenByIdWithGrandChildren(@Param(&quot;ids&quot;) List&lt;Long&gt; ids);\r\n```\r\n\r\n  [1]: https://stackoverflow.com/questions/34764696/jpa-entity-graphs-and-pagination","title":"JPQL Query for page of children and join fetch of grandchildren throws exception query specified join fetching","body":"<p>I found out that when you want to get page of data you can't use <code>join fetch</code> so according to this <a href=\"https://stackoverflow.com/questions/34764696/jpa-entity-graphs-and-pagination\">question</a>. I have created two methods in JpaRepository. </p>\n\n<ol>\n<li>Method to retrieve page of child ids</li>\n<li>Method to retrieve children with fetched grandchildre.</li>\n</ol>\n\n<p>This is how code looks like after that:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Query(\"select c.id \" +\n  \"from Parent p \" +\n  \"inner join p.children c \" +\n  \"where p = :parent and \" +\n  \"c.childrenName like concat(:childrenName,'%')\")\nPage&lt;Long&gt; findIdsBy(@Param(\"parent\") Parent parent,\n  @Param(\"childrenName\") String childrenName,\n  Pageable pageable);\n\n@Query(\"from Children c join fetch c.grandChildren where c.id in :ids\")\nList&lt;Children&gt; getChildrenByIdWithGrandChildren(@Param(\"ids\") List&lt;Long&gt; ids);\n</code></pre>\n"}],"owner":{"account_id":12684886,"reputation":451,"user_id":9217084,"display_name":"Kacper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2353,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":55736012,"answer_count":2,"score":0,"last_activity_date":1672379823,"creation_date":1555503463,"question_id":55727390,"body_markdown":"I have entities: \r\n\r\n```java\r\nclass Parent {\r\n  ...\r\n  @OneToMany(Fetch = FetchType.EAGER)\r\n  @OrderBy(&quot;id&quot;)\r\n  private List&lt;Child&gt;  children;\r\n}\r\n\r\n\r\nclass Child{\r\n  ...\r\n  @OneToMany(Fetch = FetchType.LAZY)\r\n  @OrderBy(&quot;id&quot;)\r\n  private List&lt;GrandChild&gt; grandChildren;\r\n}\r\n\r\nclass GrandChild {\r\n  ...\r\n}\r\n```\r\n\r\nI want to query for paginated childs and also fetch grand childrens. I also filter childrens by name, but I don&#39;t think it&#39;s important. I have such JPQL query: \r\n\r\n```java\r\n@Query(&quot;select c &quot; +\r\n       &quot;from Parent p &quot; +\r\n       &quot;inner join p.children c &quot; +\r\n       &quot;inner join fetch c.grandchildren g &quot; +\r\n       &quot;where p = :parent and &quot; +\r\n       &quot;c.childName like concat(:childName,&#39;%&#39;)&quot;)\r\n    Page&lt;Expense&gt; findBy(@Param(&quot;parent&quot;) Parent parent, @Param(&quot;childName&quot;)String childName, Pageable pageable);\r\n```\r\n\r\nAnd during starting spring boot application exception is thrown: \r\n\r\n&gt; query specified join fetching, but the owner of the fetched association was not present in the select list\r\n\r\nMessage is straightforward, however i can&#39;t add parent to select statement cause i want only children.","title":"JPQL Query for page of children and join fetch of grandchildren throws exception query specified join fetching","body":"<p>I have entities: </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class Parent {\n  ...\n  @OneToMany(Fetch = FetchType.EAGER)\n  @OrderBy(\"id\")\n  private List&lt;Child&gt;  children;\n}\n\n\nclass Child{\n  ...\n  @OneToMany(Fetch = FetchType.LAZY)\n  @OrderBy(\"id\")\n  private List&lt;GrandChild&gt; grandChildren;\n}\n\nclass GrandChild {\n  ...\n}\n</code></pre>\n\n<p>I want to query for paginated childs and also fetch grand childrens. I also filter childrens by name, but I don't think it's important. I have such JPQL query: </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Query(\"select c \" +\n       \"from Parent p \" +\n       \"inner join p.children c \" +\n       \"inner join fetch c.grandchildren g \" +\n       \"where p = :parent and \" +\n       \"c.childName like concat(:childName,'%')\")\n    Page&lt;Expense&gt; findBy(@Param(\"parent\") Parent parent, @Param(\"childName\")String childName, Pageable pageable);\n</code></pre>\n\n<p>And during starting spring boot application exception is thrown: </p>\n\n<blockquote>\n  <p>query specified join fetching, but the owner of the fetched association was not present in the select list</p>\n</blockquote>\n\n<p>Message is straightforward, however i can't add parent to select statement cause i want only children.</p>\n"},{"tags":["java","eclipse","out-of-memory","eclipse-memory-analyzer"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1672388244,"post_id":74958428,"comment_id":132279911,"body_markdown":"Sounds like you may need to modify the &quot;MemoryAnalyzer.ini&quot; file to specify the `-vm` option to specify the JVM path. This file has the same format as the &quot;eclipse.ini&quot; that Eclipse uses [see here](https://stackoverflow.com/a/23174638/2670892)","body":"Sounds like you may need to modify the &quot;MemoryAnalyzer.ini&quot; file to specify the <code>-vm</code> option to specify the JVM path. This file has the same format as the &quot;eclipse.ini&quot; that Eclipse uses <a href=\"https://stackoverflow.com/a/23174638/2670892\">see here</a>"}],"owner":{"account_id":18433184,"reputation":323,"user_id":16452929,"display_name":"CS1999"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672378456,"creation_date":1672378131,"question_id":74958428,"body_markdown":"I am currently trying to run MemoryAnalyzer (by Eclipse) on my CentOS desktop. When I try to run it it complains that the JVM is incompatible and it needs version 11 or greater.\r\nOn my centOS desktop I do have JDK 11 at the path /usr/java/jdk11 . How can I make Memory Analyzer use it?","title":"How to configure JVM for Memory Analyzer on CentoS","body":"<p>I am currently trying to run MemoryAnalyzer (by Eclipse) on my CentOS desktop. When I try to run it it complains that the JVM is incompatible and it needs version 11 or greater.\nOn my centOS desktop I do have JDK 11 at the path /usr/java/jdk11 . How can I make Memory Analyzer use it?</p>\n"},{"tags":["java","spring-boot","junit5"],"comments":[{"owner":{"account_id":106364,"reputation":159996,"user_id":283366,"accept_rate":100,"display_name":"Phil"},"score":0,"creation_date":1672378749,"post_id":74958429,"comment_id":132278447,"body_markdown":"Does this help? https://www.baeldung.com/spring-multipart-post-request-test","body":"Does this help? <a href=\"https://www.baeldung.com/spring-multipart-post-request-test\" rel=\"nofollow noreferrer\">baeldung.com/spring-multipart-post-request-test</a>"},{"owner":{"account_id":3792234,"reputation":107,"user_id":3148392,"accept_rate":11,"display_name":"tiya"},"score":0,"creation_date":1672381832,"post_id":74958429,"comment_id":132278881,"body_markdown":"MockMultipartFile file2 = new MockMultipartFile(&quot;file&quot;, &quot;importTemplate.xlsx&quot;, MediaType.MULTIPART_FORM_DATA_VALUE, inputFile.toString().getBytes()); \n\t\t  MockMultipartFile file1 \n\t      = new MockMultipartFile(\n\t        &quot;file&quot;, \n\t        &quot;importTemplate.xlsx&quot;, \n\t        MediaType.MULTIPART_FORM_DATA_VALUE, \n\t        &quot;Hello, World!&quot;.getBytes()\n\t      );          @Phil, I tried that way also but still getting Bad request.","body":"MockMultipartFile file2 = new MockMultipartFile(&quot;file&quot;, &quot;importTemplate.xlsx&quot;, MediaType.MULTIPART_FORM_DATA_VALUE, inputFile.toString().getBytes());  \t\t  MockMultipartFile file1  \t      = new MockMultipartFile( \t        &quot;file&quot;,  \t        &quot;importTemplate.xlsx&quot;,  \t        MediaType.MULTIPART_FORM_DATA_VALUE,  \t        &quot;Hello, World!&quot;.getBytes() \t      );          @Phil, I tried that way also but still getting Bad request."},{"owner":{"account_id":106364,"reputation":159996,"user_id":283366,"accept_rate":100,"display_name":"Phil"},"score":0,"creation_date":1672381871,"post_id":74958429,"comment_id":132278891,"body_markdown":"You tried _what_, exactly? The code in that article is quite different to the code in your question (which is where all code should be, not in the comments)","body":"You tried <i>what</i>, exactly? The code in that article is quite different to the code in your question (which is where all code should be, not in the comments)"},{"owner":{"account_id":106364,"reputation":159996,"user_id":283366,"accept_rate":100,"display_name":"Phil"},"score":1,"creation_date":1672381926,"post_id":74958429,"comment_id":132278893,"body_markdown":"FYI, you&#39;re setting the wrong mime-type for your file. For an XLSX file, it should be `application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`","body":"FYI, you&#39;re setting the wrong mime-type for your file. For an XLSX file, it should be <code>application&#47;vnd.openxmlformats-officedocument.spreadsheetml.&zwnj;&#8203;sheet</code>"},{"owner":{"account_id":3792234,"reputation":107,"user_id":3148392,"accept_rate":11,"display_name":"tiya"},"score":0,"creation_date":1672382703,"post_id":74958429,"comment_id":132279012,"body_markdown":"Thanks @Phil, After correcting Mime-type , it worked fine.Thank You.","body":"Thanks @Phil, After correcting Mime-type , it worked fine.Thank You."}],"owner":{"account_id":3792234,"reputation":107,"user_id":3148392,"accept_rate":11,"display_name":"tiya"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672378329,"creation_date":1672378136,"question_id":74958429,"body_markdown":"when I am trying to write the junit for my controller class, I am getting 400 bad request.\r\n\r\nIn console , i can see below error:\r\n\r\n&gt; logException Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required request part &#39;file&#39; is not present\r\n\r\nthis is my Junit\r\n\r\n```lang-java\r\n@Test\r\nvoid testExcelFile() throws Exception {\r\n\r\n\tFileInputStream inputFile = new FileInputStream(&quot;path of the file&quot;);\r\n\tMockMultipartFile file = new MockMultipartFile(&quot;file&quot;, &quot;myexcelFile.xlsx&quot;, &quot;multipart/form-data&quot;, inputFile); \r\n\r\n\tMockito.when(service.upload((MultipartFile) file)).thenReturn(&quot;received&quot;);\r\n\t\t\t\r\n    RequestBuilder requestBuilder = MockMvcRequestBuilders.post(&quot;/uploadData&quot;,file)\r\n    \t\t.param(&quot;file&quot;,file.getName()).contentType(MediaType.MULTIPART_FORM_DATA);\r\n    MvcResult result = \r\n    mockMvc.perform(requestBuilder).andExpect(status().isAccepted()).andReturn();\r\n    assertEquals(HttpStatus.ACCEPTED.value(), result.getResponse().getStatus()); \r\n}\r\n```\r\n\r\nThis is my controller class\r\n```lang-java\r\n@PostMapping(&quot;/uploadData&quot;)\r\npublic ResponseEntity&lt;String&gt; save(@RequestParam(required = true)  MultipartFile file) {\r\n    if(ExcelHelper.checkExcelFormat(file)) {\r\n\t    return new ResponseEntity&lt;&gt;(service.upload(file),HttpStatus.ACCEPTED);\r\n    }\r\n    return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(&quot;Please upload excel file only&quot;);\r\n}\t\r\n```\r\nPlease help what I am doing wrong. Thanks in advance.","title":"getting 400 badrequest while passing multipart file in request in Junit","body":"<p>when I am trying to write the junit for my controller class, I am getting 400 bad request.</p>\n<p>In console , i can see below error:</p>\n<blockquote>\n<p>logException Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required request part 'file' is not present</p>\n</blockquote>\n<p>this is my Junit</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid testExcelFile() throws Exception {\n\n    FileInputStream inputFile = new FileInputStream(&quot;path of the file&quot;);\n    MockMultipartFile file = new MockMultipartFile(&quot;file&quot;, &quot;myexcelFile.xlsx&quot;, &quot;multipart/form-data&quot;, inputFile); \n\n    Mockito.when(service.upload((MultipartFile) file)).thenReturn(&quot;received&quot;);\n            \n    RequestBuilder requestBuilder = MockMvcRequestBuilders.post(&quot;/uploadData&quot;,file)\n            .param(&quot;file&quot;,file.getName()).contentType(MediaType.MULTIPART_FORM_DATA);\n    MvcResult result = \n    mockMvc.perform(requestBuilder).andExpect(status().isAccepted()).andReturn();\n    assertEquals(HttpStatus.ACCEPTED.value(), result.getResponse().getStatus()); \n}\n</code></pre>\n<p>This is my controller class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(&quot;/uploadData&quot;)\npublic ResponseEntity&lt;String&gt; save(@RequestParam(required = true)  MultipartFile file) {\n    if(ExcelHelper.checkExcelFormat(file)) {\n        return new ResponseEntity&lt;&gt;(service.upload(file),HttpStatus.ACCEPTED);\n    }\n    return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(&quot;Please upload excel file only&quot;);\n}   \n</code></pre>\n<p>Please help what I am doing wrong. Thanks in advance.</p>\n"},{"tags":["java","kotlin","gradle","java-native-interface"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1672380757,"post_id":74949490,"comment_id":132278731,"body_markdown":"You could go the javap + awk + javac route: https://stackoverflow.com/questions/49506237/generate-jni-header-files-for-class-files-in-jdk-10/49512113#49512113","body":"You could go the javap + awk + javac route: <a href=\"https://stackoverflow.com/questions/49506237/generate-jni-header-files-for-class-files-in-jdk-10/49512113#49512113\" title=\"generate jni header files for class files in jdk 10\">stackoverflow.com/questions/49506237/&hellip;</a>"}],"owner":{"account_id":26709686,"reputation":25,"user_id":20315287,"display_name":"Bluecross"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":353,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672377995,"creation_date":1672306893,"question_id":74949490,"body_markdown":"im trying to write JNI app and want to use kotlin in it.\r\n\r\nAs i understand kotlin equivalent of this:\r\n```java\r\nprivate static native void hi();\r\n```\r\nis:\r\n```gradle\r\nprivate external fun hi()\r\n```\r\nbut the problemm is that i cant gen .h files with gradle in my project:\r\n```kotlin\r\ncompileJava{\r\n    options.headerOutputDirectory.set(file(&#39;src/main/java/idk/bluecross/JMM/natives&#39;))\r\n}\r\n```\r\nhow can i do this?\r\n\r\nhere is my build.gradle by the way:\r\n```gradle\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.jetbrains.kotlin.jvm&#39; version &#39;1.8.0-RC2&#39;\r\n    id &#39;application&#39;\r\n    id &#39;cpp&#39;\r\n}\r\n\r\ngroup &#39;idk.bluecross&#39;\r\nversion &#39;1.0-SNAPSHOT&#39;\r\napplication.mainClass = &#39;idk.bluecross.example.Main&#39;\r\n\r\napplication {\r\n    applicationDefaultJvmArgs +=\r\n            [&quot;-Djava.library.path=&quot; + file(&quot;${buildDir}/libs/jMM/shared&quot;).absolutePath]\r\n}\r\n\r\ncompileJava{\r\n    options.headerOutputDirectory.set(file(&#39;src/main/java/idk/bluecross/JMM/natives&#39;))\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8&quot;\r\n}\r\n\r\nmodel {\r\n    platforms {\r\n        x64 {\r\n            architecture &quot;x86_64&quot;\r\n        }\r\n    }\r\n\r\n    components {\r\n        JMM(NativeLibrarySpec) {\r\n            sources {\r\n                cpp {\r\n                    source {\r\n                        srcDir &quot;src/main/java/idk/bluecross/JMM/natives&quot;\r\n                    }\r\n                }\r\n            }\r\n            targetPlatform &quot;x64&quot;\r\n            binaries.all {\r\n                def jvmHome = System.properties[&#39;java.home&#39;]\r\n                if (targetPlatform.operatingSystem.macOsX) {\r\n                    cppCompiler.args &#39;-I&#39;, &quot;${jvmHome}/include&quot;\r\n                    cppCompiler.args &#39;-I&#39;, &quot;${jvmHome}/include/darwin&quot;\r\n                    cppCompiler.args &#39;-mmacosx-version-min=10.4&#39;\r\n                    linker.args &#39;-mmacosx-version-min=10.4&#39;\r\n                } else if (targetPlatform.operatingSystem.linux) {\r\n                    cppCompiler.args &#39;-I&#39;, &quot;${jvmHome}/include&quot;\r\n                    cppCompiler.args &#39;-I&#39;, &quot;${jvmHome}/include/linux&quot;\r\n                    cppCompiler.args &#39;-D_FILE_OFFSET_BITS=64&#39;\r\n                } else if (targetPlatform.operatingSystem.windows) {\r\n                    cppCompiler.args &quot;-I${jvmHome}/include&quot;\r\n                    cppCompiler.args &quot;-I${jvmHome}/include/win32&quot;\r\n                } else if (targetPlatform.operatingSystem.freeBSD) {\r\n                    cppCompiler.args &#39;-I&#39;, &quot;${jvmHome}/include&quot;\r\n                    cppCompiler.args &#39;-I&#39;, &quot;${jvmHome}/include/freebsd&quot;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nclasses.dependsOn &#39;JMMSharedLibrary&#39;\r\n```","title":"Generate native headers from kotlin file","body":"<p>im trying to write JNI app and want to use kotlin in it.</p>\n<p>As i understand kotlin equivalent of this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static native void hi();\n</code></pre>\n<p>is:</p>\n<pre><code>private external fun hi()\n</code></pre>\n<p>but the problemm is that i cant gen .h files with gradle in my project:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>compileJava{\n    options.headerOutputDirectory.set(file('src/main/java/idk/bluecross/JMM/natives'))\n}\n</code></pre>\n<p>how can i do this?</p>\n<p>here is my build.gradle by the way:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.jetbrains.kotlin.jvm' version '1.8.0-RC2'\n    id 'application'\n    id 'cpp'\n}\n\ngroup 'idk.bluecross'\nversion '1.0-SNAPSHOT'\napplication.mainClass = 'idk.bluecross.example.Main'\n\napplication {\n    applicationDefaultJvmArgs +=\n            [&quot;-Djava.library.path=&quot; + file(&quot;${buildDir}/libs/jMM/shared&quot;).absolutePath]\n}\n\ncompileJava{\n    options.headerOutputDirectory.set(file('src/main/java/idk/bluecross/JMM/natives'))\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8&quot;\n}\n\nmodel {\n    platforms {\n        x64 {\n            architecture &quot;x86_64&quot;\n        }\n    }\n\n    components {\n        JMM(NativeLibrarySpec) {\n            sources {\n                cpp {\n                    source {\n                        srcDir &quot;src/main/java/idk/bluecross/JMM/natives&quot;\n                    }\n                }\n            }\n            targetPlatform &quot;x64&quot;\n            binaries.all {\n                def jvmHome = System.properties['java.home']\n                if (targetPlatform.operatingSystem.macOsX) {\n                    cppCompiler.args '-I', &quot;${jvmHome}/include&quot;\n                    cppCompiler.args '-I', &quot;${jvmHome}/include/darwin&quot;\n                    cppCompiler.args '-mmacosx-version-min=10.4'\n                    linker.args '-mmacosx-version-min=10.4'\n                } else if (targetPlatform.operatingSystem.linux) {\n                    cppCompiler.args '-I', &quot;${jvmHome}/include&quot;\n                    cppCompiler.args '-I', &quot;${jvmHome}/include/linux&quot;\n                    cppCompiler.args '-D_FILE_OFFSET_BITS=64'\n                } else if (targetPlatform.operatingSystem.windows) {\n                    cppCompiler.args &quot;-I${jvmHome}/include&quot;\n                    cppCompiler.args &quot;-I${jvmHome}/include/win32&quot;\n                } else if (targetPlatform.operatingSystem.freeBSD) {\n                    cppCompiler.args '-I', &quot;${jvmHome}/include&quot;\n                    cppCompiler.args '-I', &quot;${jvmHome}/include/freebsd&quot;\n                }\n            }\n        }\n    }\n}\n\nclasses.dependsOn 'JMMSharedLibrary'\n</code></pre>\n"},{"tags":["java","spring","concurrency"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1672062083,"post_id":74920688,"comment_id":132214697,"body_markdown":"What version of Java are you using?","body":"What version of Java are you using?"},{"owner":{"account_id":5070075,"reputation":76,"user_id":4069055,"display_name":"Prakitidev Verma"},"score":0,"creation_date":1672062800,"post_id":74920688,"comment_id":132214822,"body_markdown":"Currently using java 8","body":"Currently using java 8"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1672066533,"post_id":74920688,"comment_id":132215518,"body_markdown":"OK ... so according to https://developers.redhat.com/articles/2021/11/02/how-choose-best-java-garbage-collector, you should probably be using the G1 collector.  Add the `-XX:+UseG1GC` option.  This will give better performance, especially with larger heaps.  ZGC would also be an option, though you should be running Java 17 or later to use it.","body":"OK ... so according to <a href=\"https://developers.redhat.com/articles/2021/11/02/how-choose-best-java-garbage-collector\" rel=\"nofollow noreferrer\">developers.redhat.com/articles/2021/11/02/&hellip;</a>, you should probably be using the G1 collector.  Add the <code>-XX:+UseG1GC</code> option.  This will give better performance, especially with larger heaps.  ZGC would also be an option, though you should be running Java 17 or later to use it."}],"answers":[{"tags":[],"owner":{"account_id":5070075,"reputation":76,"user_id":4069055,"display_name":"Prakitidev Verma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672376797,"creation_date":1672376797,"answer_id":74958292,"question_id":74920688,"body_markdown":"Not sure why but threads were waiting for something. Tomcat spawns new threads for handling new requests and the GC was not clearing the object the thread was using from heap. \r\n\r\nEven though elasticsearch response response comes within 5ms I&#39;m assuming maybe this was due to elasticsearch response time in certain cases and for those threads it returns memory overflow. \r\n\r\nHowever this doesn&#39;t explain the why it was not using all the available ram.   \r\n\r\nMy hacked solution: \r\n\r\nset the min thread count of tomcat to 1 and max to 10. tomcat will not spawn new threads and no heap over utilization. \r\n\r\nIf someone had encountered this kind of problem maybe the can provide better insights\r\n\r\n\r\n","title":"Concurrency Problem in spring boot: &quot;out of memory&quot; on 16GB ram allocation but only consuming 6GB","body":"<p>Not sure why but threads were waiting for something. Tomcat spawns new threads for handling new requests and the GC was not clearing the object the thread was using from heap.</p>\n<p>Even though elasticsearch response response comes within 5ms I'm assuming maybe this was due to elasticsearch response time in certain cases and for those threads it returns memory overflow.</p>\n<p>However this doesn't explain the why it was not using all the available ram.</p>\n<p>My hacked solution:</p>\n<p>set the min thread count of tomcat to 1 and max to 10. tomcat will not spawn new threads and no heap over utilization.</p>\n<p>If someone had encountered this kind of problem maybe the can provide better insights</p>\n"}],"owner":{"account_id":5070075,"reputation":76,"user_id":4069055,"display_name":"Prakitidev Verma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":640,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74958292,"answer_count":1,"score":0,"last_activity_date":1672376797,"creation_date":1672060532,"question_id":74920688,"body_markdown":"&gt; &quot;http-nio-8080-exec-3&quot; java.lang.OutOfMemoryError: Java heap space\r\n\r\nGetting above error when calling my rest apis (using elasticsearch as dataabse) when using apache ab with command \r\n\r\n&gt; ab -n 20 -n 1000 &quot;localhost:8080/getData&quot;\r\n\r\nrunning jar using below command  \r\n\r\n&gt; nohup java -Xms 2g -Xmx 16g server.jar \r\n\r\n\r\nEven with these settings java is using 6 - 8GB ram and not more than that but ends up giving OOM issue or sometimes just dies without any error on load testing.\r\n\r\nhow do I resolve this ? As launching multiple instances under a load balancer will not solve this problem   \r\n \r\n\r\nBelow is the error stack: \r\n\r\n    java.lang.OutOfMemoryError: Java heap space\r\n    \tat org.apache.coyote.http11.Http11OutputBuffer.&lt;init&gt;(Http11OutputBuffer.java:126)\r\n    \tat org.apache.coyote.http11.Http11Processor.&lt;init&gt;(Http11Processor.java:238)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Protocol.createProcessor(AbstractHttp11Protocol.java:636)\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:771)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1425)\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    java.lang.OutOfMemoryError: Java heap space\r\n    \tat org.apache.coyote.http11.Http11OutputBuffer.&lt;init&gt;(Http11OutputBuffer.java:126)\r\n    \tat org.apache.coyote.http11.Http11Processor.&lt;init&gt;(Http11Processor.java:238)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Protocol.createProcessor(AbstractHttp11Protocol.java:636)\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:771)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1425)\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    Exception in thread &quot;http-nio-8080-exec-2&quot; Exception in thread &quot;http-nio-8080-exec-3&quot; java.lang.OutOfMemoryError: Java heap space\r\n    java.lang.OutOfMemoryError: Java heap space\r\n    \tat org.apache.coyote.http11.Http11InputBuffer.init(Http11InputBuffer.java:717)\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:980)\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:785)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1425)\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    Exception in thread &quot;http-nio-8080-exec-7&quot; Exception in thread &quot;http-nio-8080-exec-9&quot; java.lang.OutOfMemoryError: Java heap space\r\n    Exception in thread &quot;http-nio-8080-exec-15&quot; Exception in thread &quot;http-nio-8080-exec-16&quot; java.lang.OutOfMemoryError: Java heap space\r\n    Exception in thread &quot;http-nio-8080-exec-4&quot; java.lang.OutOfMemoryError: Java heap space\r\n    Exception in thread &quot;http-nio-8080-exec-11&quot; java.lang.OutOfMemoryError: Java heap space\r\n    Exception in thread &quot;http-nio-8080-exec-12&quot; java.lang.OutOfMemoryError: Java heap space\r\n    java.lang.OutOfMemoryError: Java heap space\r\n    Exception in thread &quot;http-nio-8080-exec-14&quot; java.lang.OutOfMemoryError: Java heap space\r\n    Exception in thread &quot;http-nio-8080-exec-13&quot; java.lang.OutOfMemoryError: Java heap space\r\n    Exception in thread &quot;http-nio-8080-exec-18&quot; java.lang.OutOfMemoryError: Java heap space\r\n    Exception in thread &quot;http-nio-8080-exec-19&quot; java.lang.OutOfMemoryError: Java heap space\r\n    java.lang.OutOfMemoryError: Java heap space\r\n    Exception in thread &quot;http-nio-8080-exec-29&quot; java.lang.OutOfMemoryError: Java heap space\r\n\r\n","title":"Concurrency Problem in spring boot: &quot;out of memory&quot; on 16GB ram allocation but only consuming 6GB","body":"<blockquote>\n<p>&quot;http-nio-8080-exec-3&quot; java.lang.OutOfMemoryError: Java heap space</p>\n</blockquote>\n<p>Getting above error when calling my rest apis (using elasticsearch as dataabse) when using apache ab with command</p>\n<blockquote>\n<p>ab -n 20 -n 1000 &quot;localhost:8080/getData&quot;</p>\n</blockquote>\n<p>running jar using below command</p>\n<blockquote>\n<p>nohup java -Xms 2g -Xmx 16g server.jar</p>\n</blockquote>\n<p>Even with these settings java is using 6 - 8GB ram and not more than that but ends up giving OOM issue or sometimes just dies without any error on load testing.</p>\n<p>how do I resolve this ? As launching multiple instances under a load balancer will not solve this problem</p>\n<p>Below is the error stack:</p>\n<pre><code>java.lang.OutOfMemoryError: Java heap space\n    at org.apache.coyote.http11.Http11OutputBuffer.&lt;init&gt;(Http11OutputBuffer.java:126)\n    at org.apache.coyote.http11.Http11Processor.&lt;init&gt;(Http11Processor.java:238)\n    at org.apache.coyote.http11.AbstractHttp11Protocol.createProcessor(AbstractHttp11Protocol.java:636)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:771)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1425)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:748)\njava.lang.OutOfMemoryError: Java heap space\n    at org.apache.coyote.http11.Http11OutputBuffer.&lt;init&gt;(Http11OutputBuffer.java:126)\n    at org.apache.coyote.http11.Http11Processor.&lt;init&gt;(Http11Processor.java:238)\n    at org.apache.coyote.http11.AbstractHttp11Protocol.createProcessor(AbstractHttp11Protocol.java:636)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:771)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1425)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:748)\nException in thread &quot;http-nio-8080-exec-2&quot; Exception in thread &quot;http-nio-8080-exec-3&quot; java.lang.OutOfMemoryError: Java heap space\njava.lang.OutOfMemoryError: Java heap space\n    at org.apache.coyote.http11.Http11InputBuffer.init(Http11InputBuffer.java:717)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:980)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:785)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1425)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:748)\nException in thread &quot;http-nio-8080-exec-7&quot; Exception in thread &quot;http-nio-8080-exec-9&quot; java.lang.OutOfMemoryError: Java heap space\nException in thread &quot;http-nio-8080-exec-15&quot; Exception in thread &quot;http-nio-8080-exec-16&quot; java.lang.OutOfMemoryError: Java heap space\nException in thread &quot;http-nio-8080-exec-4&quot; java.lang.OutOfMemoryError: Java heap space\nException in thread &quot;http-nio-8080-exec-11&quot; java.lang.OutOfMemoryError: Java heap space\nException in thread &quot;http-nio-8080-exec-12&quot; java.lang.OutOfMemoryError: Java heap space\njava.lang.OutOfMemoryError: Java heap space\nException in thread &quot;http-nio-8080-exec-14&quot; java.lang.OutOfMemoryError: Java heap space\nException in thread &quot;http-nio-8080-exec-13&quot; java.lang.OutOfMemoryError: Java heap space\nException in thread &quot;http-nio-8080-exec-18&quot; java.lang.OutOfMemoryError: Java heap space\nException in thread &quot;http-nio-8080-exec-19&quot; java.lang.OutOfMemoryError: Java heap space\njava.lang.OutOfMemoryError: Java heap space\nException in thread &quot;http-nio-8080-exec-29&quot; java.lang.OutOfMemoryError: Java heap space\n</code></pre>\n"},{"tags":["java","intellij-idea","unicode","utf-8","illegal-characters"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1672329554,"post_id":74953323,"comment_id":132269205,"body_markdown":"It looks like the character encoding used for the source file doesn&#39;t match the encoding passed to the Java compiler, at a guess. Note that U+2030 is the &quot;per mille&quot; sign, nothing like &#201;.","body":"It looks like the character encoding used for the source file doesn&#39;t match the encoding passed to the Java compiler, at a guess. Note that U+2030 is the &quot;per mille&quot; sign, nothing like &#201;."},{"owner":{"account_id":4198672,"reputation":28840,"user_id":3439404,"display_name":"JosefZ"},"score":1,"creation_date":1672330261,"post_id":74953323,"comment_id":132269435,"body_markdown":"Please [edit] your question to improve your [mcve]. In particular, share the error formatted as _code_ to see where the caret (^) points to.","body":"Please <a href=\"https://stackoverflow.com/posts/74953323/edit\">edit</a> your question to improve your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. In particular, share the error formatted as <i>code</i> to see where the caret (^) points to."},{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1672330806,"post_id":74953323,"comment_id":132269613,"body_markdown":"Make sure encoding is configured correctly in the IDE/compiler settings. See https://blogs.jetbrains.com/idea/2013/03/use-the-utf-8-luke-file-encodings-in-intellij-idea/.","body":"Make sure encoding is configured correctly in the IDE/compiler settings. See <a href=\"https://blogs.jetbrains.com/idea/2013/03/use-the-utf-8-luke-file-encodings-in-intellij-idea/\" rel=\"nofollow noreferrer\">blogs.jetbrains.com/idea/2013/03/&hellip;</a>."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1672330915,"post_id":74953323,"comment_id":132269644,"body_markdown":"Works in Java 12 [on Ideone.com](https://ideone.com/waPE5e);","body":"Works in Java 12 <a href=\"https://ideone.com/waPE5e\" rel=\"nofollow noreferrer\">on Ideone.com</a>;"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1672331401,"post_id":74953323,"comment_id":132269799,"body_markdown":"FYI: U+2030 PER MILLE SIGN (`‰`) https://util.unicode.org/UnicodeJsps/character.jsp?a=2030","body":"FYI: U+2030 PER MILLE SIGN (<code>‰</code>) <a href=\"https://util.unicode.org/UnicodeJsps/character.jsp?a=2030\" rel=\"nofollow noreferrer\">util.unicode.org/UnicodeJsps/character.jsp?a=2030</a>"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1672332034,"post_id":74953323,"comment_id":132269993,"body_markdown":"Did your problem start when you switched from an earlier version of Java to Java 18 or 19?","body":"Did your problem start when you switched from an earlier version of Java to Java 18 or 19?"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672376462,"creation_date":1672332778,"answer_id":74953918,"question_id":74953323,"body_markdown":"# Character set &amp; encoding of Java source code files\r\n\r\n[As commented][1], likely your source code files were written with a character encoding other than [UTF-8][2]. Now your compiler is expecting UTF-8, and reading your source code as such. \r\n\r\nThis problem could occur for either of two reasons:\r\n\r\n - Your settings for your compiler or [IDE][3] changed\r\n - &#128073; You changed your JDK from an earlier version of Java to Java 18 or later.\r\n   - Earlier versions of Java by default expect source code to be written in the default character set of the host [OS][4] platform.\r\n   - Java 18+ defaults to UTF-8 across OS platforms for most purposes.\r\n\r\nThe main clue for this character encoding misreading hypothesis is that code point U+2030 is *not* the [LATIN CAPITAL LETTER E WITH ACUTE][5] character, nor is it the composition of an uppercase E followed by the accent. No, the code point 2030 in hex (8,240 in decimal) is [PER MILLE SIGN][6]: `‰`. \r\n\r\n## Java 18+ defaults to UTF-8\r\n\r\nSee [*JEP 400: UTF-8 by Default*][7]. To quote:\r\n\r\n&gt;If source files were saved with a non-UTF-8 encoding and compiled with an earlier JDK, then recompiling on JDK 18 or later may cause problems. For example, if a non-UTF-8 source file has string literals that contain non-ASCII characters, then those literals may be misinterpreted by javac in JDK 18 or later unless -encoding is used.\r\n\r\nYou can easily verify if this new default is the source of your problem. &#128073; **Go back to your old project, and specify UTF-8 for compiling.** Again, quoting [the JEP][7]:\r\n\r\n&gt;Prior to compiling on a JDK where UTF-8 is the default charset, developers are strongly encouraged to check for charset issues by compiling with `javac -encoding UTF-8 ...` on their current JDK (8-17). \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/74953323/intellij-compilation-error-illegal-character-for-%C3%89-sign/74953918#comment132269205_74953323\r\n  [2]: https://en.wikipedia.org/wiki/UTF-8\r\n  [3]: https://en.wikipedia.org/wiki/Integrated_development_environment\r\n  [4]: https://en.wikipedia.org/wiki/Operating_system\r\n  [5]: https://en.wikipedia.org/wiki/%C3%89\r\n  [6]: https://util.unicode.org/UnicodeJsps/character.jsp?a=2030\r\n  [7]: https://openjdk.org/jeps/400","title":"Intellij compilation error: &quot;illegal character&#39; for &#201; sign","body":"<h1>Character set &amp; encoding of Java source code files</h1>\n<p><a href=\"https://stackoverflow.com/questions/74953323/intellij-compilation-error-illegal-character-for-%C3%89-sign/74953918#comment132269205_74953323\">As commented</a>, likely your source code files were written with a character encoding other than <a href=\"https://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow noreferrer\">UTF-8</a>. Now your compiler is expecting UTF-8, and reading your source code as such.</p>\n<p>This problem could occur for either of two reasons:</p>\n<ul>\n<li>Your settings for your compiler or <a href=\"https://en.wikipedia.org/wiki/Integrated_development_environment\" rel=\"nofollow noreferrer\">IDE</a> changed</li>\n<li>👉 You changed your JDK from an earlier version of Java to Java 18 or later.\n<ul>\n<li>Earlier versions of Java by default expect source code to be written in the default character set of the host <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow noreferrer\">OS</a> platform.</li>\n<li>Java 18+ defaults to UTF-8 across OS platforms for most purposes.</li>\n</ul>\n</li>\n</ul>\n<p>The main clue for this character encoding misreading hypothesis is that code point U+2030 is <em>not</em> the <a href=\"https://en.wikipedia.org/wiki/%C3%89\" rel=\"nofollow noreferrer\">LATIN CAPITAL LETTER E WITH ACUTE</a> character, nor is it the composition of an uppercase E followed by the accent. No, the code point 2030 in hex (8,240 in decimal) is <a href=\"https://util.unicode.org/UnicodeJsps/character.jsp?a=2030\" rel=\"nofollow noreferrer\">PER MILLE SIGN</a>: <code>‰</code>.</p>\n<h2>Java 18+ defaults to UTF-8</h2>\n<p>See <a href=\"https://openjdk.org/jeps/400\" rel=\"nofollow noreferrer\"><em>JEP 400: UTF-8 by Default</em></a>. To quote:</p>\n<blockquote>\n<p>If source files were saved with a non-UTF-8 encoding and compiled with an earlier JDK, then recompiling on JDK 18 or later may cause problems. For example, if a non-UTF-8 source file has string literals that contain non-ASCII characters, then those literals may be misinterpreted by javac in JDK 18 or later unless -encoding is used.</p>\n</blockquote>\n<p>You can easily verify if this new default is the source of your problem. 👉 <strong>Go back to your old project, and specify UTF-8 for compiling.</strong> Again, quoting <a href=\"https://openjdk.org/jeps/400\" rel=\"nofollow noreferrer\">the JEP</a>:</p>\n<blockquote>\n<p>Prior to compiling on a JDK where UTF-8 is the default charset, developers are strongly encouraged to check for charset issues by compiling with <code>javac -encoding UTF-8 ...</code> on their current JDK (8-17).</p>\n</blockquote>\n"}],"owner":{"account_id":7141303,"reputation":6636,"user_id":5458827,"accept_rate":0,"display_name":"riorio"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":735,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672376462,"creation_date":1672329442,"question_id":74953323,"body_markdown":"I have an Enum class in `Java` that contains the letter `&#201;`:\r\n\r\n    public enum Types {\r\n       R&#201;SUM&#201;\r\n    }\r\n\r\nWhen trying to build the project, IntelliJ complains on the `&#201;` sign:\r\n\r\n    error: illegal character: &#39;\\u2030&#39;\r\n    R&#201;SUM&#201;\r\n      ^\r\n\r\nI&#39;m using Windows 10.\r\n\r\nIn the past, the same project was compiled and run with no problems on my computer. So it seems like something in the settings was changed that caused this.\r\n\r\nThere is no option to replace `&#201;` with `E`\r\n\r\nAny idea how to fix this?\r\n\r\n**EDIT**\r\n\r\n - The code used to run with JDK 11 and was upgraded to Java 17. Maybe it has something to do with it. Trying to downgrade the JDK of the project (Settings -&gt; Build -&gt; Gradle -&gt; back to JDK 11) didn&#39;t help\r\n\r\n","title":"Intellij compilation error: &quot;illegal character&#39; for &#201; sign","body":"<p>I have an Enum class in <code>Java</code> that contains the letter <code>É</code>:</p>\n<pre><code>public enum Types {\n   RÉSUMÉ\n}\n</code></pre>\n<p>When trying to build the project, IntelliJ complains on the <code>É</code> sign:</p>\n<pre><code>error: illegal character: '\\u2030'\nRÉSUMÉ\n  ^\n</code></pre>\n<p>I'm using Windows 10.</p>\n<p>In the past, the same project was compiled and run with no problems on my computer. So it seems like something in the settings was changed that caused this.</p>\n<p>There is no option to replace <code>É</code> with <code>E</code></p>\n<p>Any idea how to fix this?</p>\n<p><strong>EDIT</strong></p>\n<ul>\n<li>The code used to run with JDK 11 and was upgraded to Java 17. Maybe it has something to do with it. Trying to downgrade the JDK of the project (Settings -&gt; Build -&gt; Gradle -&gt; back to JDK 11) didn't help</li>\n</ul>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":12646737,"reputation":1077,"user_id":9192223,"display_name":"hiren"},"score":1,"creation_date":1672379410,"post_id":74958231,"comment_id":132278536,"body_markdown":"Can you show your code ?","body":"Can you show your code ?"},{"owner":{"account_id":15506875,"reputation":144,"user_id":11186796,"display_name":"Akshay Avaiya"},"score":0,"creation_date":1672380796,"post_id":74958231,"comment_id":132278737,"body_markdown":"Share your code snippet","body":"Share your code snippet"}],"owner":{"account_id":27258605,"reputation":1,"user_id":20781779,"display_name":"Bharath"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672375941,"creation_date":1672375941,"question_id":74958231,"body_markdown":"Attempt to invoke virtual method &#39;void androidx.lifecycle.LiveData.observe(androidx.lifecycle.LifecycleOwner, androidx.lifecycle.Observer)&#39; on a null object reference\r\n\r\nI can&#39;t fix the problem","title":"I tried to insert json data into room database for displaying dummy contacts in UI using mvvm its showing null object reference in java","body":"<p>Attempt to invoke virtual method 'void androidx.lifecycle.LiveData.observe(androidx.lifecycle.LifecycleOwner, androidx.lifecycle.Observer)' on a null object reference</p>\n<p>I can't fix the problem</p>\n"},{"tags":["java","mysql","spring-boot","hibernate"],"comments":[{"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1672376038,"post_id":74958189,"comment_id":132278080,"body_markdown":"I thought it was the other way around: JPA is built on top of Hibernate.  Basically, Java will communicate with MySQL via a JDBC driver.","body":"I thought it was the other way around: JPA is built on top of Hibernate.  Basically, Java will communicate with MySQL via a JDBC driver."},{"owner":{"account_id":93342,"reputation":6808,"user_id":255412,"accept_rate":75,"display_name":"user963241"},"score":0,"creation_date":1672376634,"post_id":74958189,"comment_id":132278159,"body_markdown":"Yes, it seems &quot;Spring Data JPA&quot; is built on top of Hibernate, but JPA is implemented by hibernate. Yes, I had to include JDBC driver dependency as well. So, in this case hibernate isn&#39;t involved in the picture at all if I use MySQL? I am not able to grasp this because I am unclear about Hibernate&#39;s involvement.","body":"Yes, it seems &quot;Spring Data JPA&quot; is built on top of Hibernate, but JPA is implemented by hibernate. Yes, I had to include JDBC driver dependency as well. So, in this case hibernate isn&#39;t involved in the picture at all if I use MySQL? I am not able to grasp this because I am unclear about Hibernate&#39;s involvement."},{"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1672376720,"post_id":74958189,"comment_id":132278168,"body_markdown":"It is more like JPA is a implemenation of Hibernate.  Hibernate sits in between JPA (at your Java application layer) and the JDBC driver (which sits in between the app and MySQL).","body":"It is more like JPA is a implemenation of Hibernate.  Hibernate sits in between JPA (at your Java application layer) and the JDBC driver (which sits in between the app and MySQL)."},{"owner":{"account_id":93342,"reputation":6808,"user_id":255412,"accept_rate":75,"display_name":"user963241"},"score":0,"creation_date":1672377035,"post_id":74958189,"comment_id":132278209,"body_markdown":"I see. Any way I can monitor the application to see where the API calls are coming and going to in order see all this action? Thanks. It will make it easy to understand.","body":"I see. Any way I can monitor the application to see where the API calls are coming and going to in order see all this action? Thanks. It will make it easy to understand."},{"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1672377070,"post_id":74958189,"comment_id":132278216,"body_markdown":"Read [Enable Hibernate Logging](https://stackoverflow.com/questions/8490617/enable-hibernate-logging) here.","body":"Read <a href=\"https://stackoverflow.com/questions/8490617/enable-hibernate-logging\">Enable Hibernate Logging</a> here."}],"owner":{"account_id":93342,"reputation":6808,"user_id":255412,"accept_rate":75,"display_name":"user963241"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672375342,"creation_date":1672375342,"question_id":74958189,"body_markdown":"When we use JPA API in a String Boot project by extending repository class with `JpaRepository` and use MySQL database instead of hibernate&#39;s H2 database, I wanted to know is there hibernate still involved behind the scenes or, is it that JPA works with MySQL? \r\n\r\nFrom what I have researched, Hibernate is implementation of JPA but I can&#39;t find any reference how MySQL works with JPA?","title":"Relation between Hibernate and MySQL in Spring Boot?","body":"<p>When we use JPA API in a String Boot project by extending repository class with <code>JpaRepository</code> and use MySQL database instead of hibernate's H2 database, I wanted to know is there hibernate still involved behind the scenes or, is it that JPA works with MySQL?</p>\n<p>From what I have researched, Hibernate is implementation of JPA but I can't find any reference how MySQL works with JPA?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":24438997,"reputation":1738,"user_id":18362930,"display_name":"Sandesh Khutal"},"score":0,"creation_date":1672368885,"post_id":74957561,"comment_id":132277297,"body_markdown":"Add crash logs with specific details.","body":"Add crash logs with specific details."},{"owner":{"account_id":15506875,"reputation":144,"user_id":11186796,"display_name":"Akshay Avaiya"},"score":0,"creation_date":1672380994,"post_id":74957561,"comment_id":132278762,"body_markdown":"Try to add the full package path to your activity name.","body":"Try to add the full package path to your activity name."}],"answers":[{"tags":[],"owner":{"account_id":23926633,"reputation":436,"user_id":17921670,"display_name":"Kamran Khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672375168,"creation_date":1672375168,"answer_id":74958176,"question_id":74957561,"body_markdown":"**Add your package in your manifest file** \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n**And write your activity name like this**\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eqSPs.png\r\n  [2]: https://i.stack.imgur.com/3Twwd.png","title":"How do I update AndroidManifest.xml after changing package name?","body":"<p><strong>Add your package in your manifest file</strong></p>\n<p><a href=\"https://i.stack.imgur.com/eqSPs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eqSPs.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>And write your activity name like this</strong></p>\n<p><a href=\"https://i.stack.imgur.com/3Twwd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3Twwd.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":20712370,"reputation":13,"user_id":15208699,"display_name":"bigrevkev55"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672375168,"creation_date":1672365989,"question_id":74957561,"body_markdown":"I had to rename my package after unsuccessfully uploading to the Google Play Store.  I am using Java.  But now the app builds correctly but crashes immediately when running on the emulator. From searching on here and YouTube it seems my issue is with the manifest.  \r\n\r\n\r\nThis is my manifest currently:\r\n[link to image of manifest][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JK3fL.png","title":"How do I update AndroidManifest.xml after changing package name?","body":"<p>I had to rename my package after unsuccessfully uploading to the Google Play Store.  I am using Java.  But now the app builds correctly but crashes immediately when running on the emulator. From searching on here and YouTube it seems my issue is with the manifest.</p>\n<p>This is my manifest currently:\n<a href=\"https://i.stack.imgur.com/JK3fL.png\" rel=\"nofollow noreferrer\">link to image of manifest</a></p>\n"},{"tags":["java","spring","annotations","constraints","bean-validation"],"comments":[{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":13,"creation_date":1325847745,"post_id":8756768,"comment_id":10911599,"body_markdown":"It doesn&#39;t work by magic, you need to configure a validator. What context is this code running in?","body":"It doesn&#39;t work by magic, you need to configure a validator. What context is this code running in?"},{"owner":{"account_id":10640901,"reputation":617,"user_id":7835969,"display_name":"Manishoaham"},"score":0,"creation_date":1590604299,"post_id":8756768,"comment_id":109745484,"body_markdown":"Also refer this question and it&#39;s answer which avoids manually checking BindingResult for validation errors: https://stackoverflow.com/questions/61992596/spring-boot-valid-on-requestbody-in-controller-method-not-working","body":"Also refer this question and it&#39;s answer which avoids manually checking BindingResult for validation errors: <a href=\"https://stackoverflow.com/questions/61992596/spring-boot-valid-on-requestbody-in-controller-method-not-working\" title=\"spring boot valid on requestbody in controller method not working\">stackoverflow.com/questions/61992596/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":1827965,"reputation":5603,"user_id":1660192,"accept_rate":80,"display_name":"Aman Gupta"},"score":2,"creation_date":1398257054,"post_id":8756847,"comment_id":35566169,"body_markdown":"I think, this one is perfectly answered irrespective of framework being used. thanks.. but I have one doubt, how can we validate a parameter being passed to some method in context of without any framework. e.g. `test(@NotNull String str)`, can we write validator for the same ?","body":"I think, this one is perfectly answered irrespective of framework being used. thanks.. but I have one doubt, how can we validate a parameter being passed to some method in context of without any framework. e.g. <code>test(@NotNull String str)</code>, can we write validator for the same ?"},{"owner":{"account_id":8020064,"reputation":91,"user_id":6048968,"display_name":"Sergey  Ch"},"score":0,"creation_date":1689082771,"post_id":8756847,"comment_id":135160659,"body_markdown":"you can try @NonNull from lombook https://projectlombok.org/features/NonNull","body":"you can try @NonNull from lombook <a href=\"https://projectlombok.org/features/NonNull\" rel=\"nofollow noreferrer\">projectlombok.org/features/NonNull</a>"}],"tags":[],"owner":{"account_id":1080121,"reputation":4357,"user_id":1077325,"display_name":"Artem"},"comment_count":2,"down_vote_count":1,"up_vote_count":38,"is_accepted":false,"score":37,"last_activity_date":1325847766,"creation_date":1325847766,"answer_id":8756847,"question_id":8756768,"body_markdown":"You should use Validator to check whether you class is valid.\r\n\r\n    Person person = ....;\r\n    ValidatorFactory factory = Validation.buildDefaultValidatorFactory();\r\n    validator = factory.getValidator();\r\n    Set&lt;ConstraintViolation&lt;Person&gt;&gt; violations = validator.validate(person);\r\n\r\nThen, iterating violations set, you can find violations.","title":"Annotations from javax.validation.constraints not working","body":"<p>You should use Validator to check whether you class is valid.</p>\n\n<pre><code>Person person = ....;\nValidatorFactory factory = Validation.buildDefaultValidatorFactory();\nvalidator = factory.getValidator();\nSet&lt;ConstraintViolation&lt;Person&gt;&gt; violations = validator.validate(person);\n</code></pre>\n\n<p>Then, iterating violations set, you can find violations.</p>\n"},{"tags":[],"owner":{"account_id":226545,"reputation":9656,"user_id":487649,"accept_rate":67,"display_name":"Nikola Yovchev"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1325848129,"creation_date":1325848129,"answer_id":8756916,"question_id":8756768,"body_markdown":"You **would have to call a Validator on** the Entity if you want to validate it. Then you will get a set of ConstraintViolationException, which basically **show for which field/s of your Entity there is a constraint violation and what exactly was it**. Maybe you can also share some of the code you expect to validate your entity.\r\n\r\nAn often used technique is to do validation in @PrePersist and rollback transaction if using multiple data modifications during transaction or do other actions when you get a validation exception. \r\n\r\nYour code should go like this:\r\n\r\n    @PrePersist\r\n    public void prePersist(SomeEntity someEntity){\r\n        Validator validator = Validation.buildDefaultValidatorFactory.getValidator();\r\n        Set&lt;ConstraintViolation&lt;SomeEntity&gt;&gt; = validator.validate(someEntity);\r\n        //do stuff with them, like notify client what was the wrong field, log them, or, if empty, be happy\r\n    }","title":"Annotations from javax.validation.constraints not working","body":"<p>You <strong>would have to call a Validator on</strong> the Entity if you want to validate it. Then you will get a set of ConstraintViolationException, which basically <strong>show for which field/s of your Entity there is a constraint violation and what exactly was it</strong>. Maybe you can also share some of the code you expect to validate your entity.</p>\n\n<p>An often used technique is to do validation in @PrePersist and rollback transaction if using multiple data modifications during transaction or do other actions when you get a validation exception. </p>\n\n<p>Your code should go like this:</p>\n\n<pre><code>@PrePersist\npublic void prePersist(SomeEntity someEntity){\n    Validator validator = Validation.buildDefaultValidatorFactory.getValidator();\n    Set&lt;ConstraintViolation&lt;SomeEntity&gt;&gt; = validator.validate(someEntity);\n    //do stuff with them, like notify client what was the wrong field, log them, or, if empty, be happy\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":927996,"reputation":12046,"user_id":958373,"accept_rate":63,"display_name":"Stephane"},"score":1,"creation_date":1452261663,"post_id":8758577,"comment_id":57102785,"body_markdown":"This provides us with the default configuration of the validator. Now, I&#39;d like to configure the validator before it being used. Where can I configure it ? Any overwrite to implement or setter to call ?","body":"This provides us with the default configuration of the validator. Now, I&#39;d like to configure the validator before it being used. Where can I configure it ? Any overwrite to implement or setter to call ?"},{"owner":{"account_id":336423,"reputation":4976,"user_id":664054,"accept_rate":80,"display_name":"WhiteKnight"},"score":3,"creation_date":1458206439,"post_id":8758577,"comment_id":59759480,"body_markdown":"The problem I experienced was I didn&#39;t realise that I needed to add `@Valid` to each member variable, which was also an object that contained validation constraints.","body":"The problem I experienced was I didn&#39;t realise that I needed to add <code>@Valid</code> to each member variable, which was also an object that contained validation constraints."},{"owner":{"account_id":1740636,"reputation":1637,"user_id":1592149,"accept_rate":52,"display_name":"Tushar Banne"},"score":4,"creation_date":1515418579,"post_id":8758577,"comment_id":83281201,"body_markdown":"I have added @Valid to my RequestBody but still the constraint doesn&#39;t get invoked. I have checked the dependencies if there is any conflict. Resolved it as well. Not sure what they problem is. I have also checked of there is annotation applied to the the field. It is applied.","body":"I have added @Valid to my RequestBody but still the constraint doesn&#39;t get invoked. I have checked the dependencies if there is any conflict. Resolved it as well. Not sure what they problem is. I have also checked of there is annotation applied to the the field. It is applied."},{"owner":{"account_id":3026387,"reputation":440,"user_id":2566304,"accept_rate":0,"display_name":"Andrey M. Stepanov"},"score":3,"creation_date":1525896991,"post_id":8758577,"comment_id":87540804,"body_markdown":"Strangely enough I also have all the points mentioned above fulfilled. Still the validation does not work :(","body":"Strangely enough I also have all the points mentioned above fulfilled. Still the validation does not work :("}],"tags":[],"owner":{"account_id":268547,"reputation":9159,"user_id":557363,"display_name":"atrain"},"comment_count":4,"down_vote_count":0,"up_vote_count":72,"is_accepted":true,"score":72,"last_activity_date":1325856715,"creation_date":1325856715,"answer_id":8758577,"question_id":8756768,"body_markdown":"For JSR-303 bean validation to work in Spring, you need several things:\r\n\r\n 1. MVC namespace configuration for annotations: `&lt;mvc:annotation-driven /&gt;`\r\n 2. The JSR-303 spec JAR: `validation-api-1.0.0.GA.jar` (looks like you already have that)\r\n 3. An implementation of the spec, such as Hibernate Validation, which appears to be the most commonly used example: `hibernate-validator-4.1.0.Final.jar`\r\n 4. In the bean to be validated, validation annotations, either from the spec JAR or from the implementation JAR (which you have already done)\r\n 5. In the handler you want to validate, annotate the object you want to validate with `@Valid`, and then include a `BindingResult` in the method signature to capture errors.  \r\n\r\nExample:\r\n\r\n    @RequestMapping(&quot;handler.do&quot;)\r\n    public String myHandler(@Valid @ModelAttribute(&quot;form&quot;) SomeFormBean myForm, BindingResult result, Model model) {\r\n        if(result.hasErrors()) {\r\n          ...your error handling...\r\n        } else {\r\n          ...your non-error handling....\r\n        }\r\n    }","title":"Annotations from javax.validation.constraints not working","body":"<p>For JSR-303 bean validation to work in Spring, you need several things:</p>\n\n<ol>\n<li>MVC namespace configuration for annotations: <code>&lt;mvc:annotation-driven /&gt;</code></li>\n<li>The JSR-303 spec JAR: <code>validation-api-1.0.0.GA.jar</code> (looks like you already have that)</li>\n<li>An implementation of the spec, such as Hibernate Validation, which appears to be the most commonly used example: <code>hibernate-validator-4.1.0.Final.jar</code></li>\n<li>In the bean to be validated, validation annotations, either from the spec JAR or from the implementation JAR (which you have already done)</li>\n<li>In the handler you want to validate, annotate the object you want to validate with <code>@Valid</code>, and then include a <code>BindingResult</code> in the method signature to capture errors.  </li>\n</ol>\n\n<p>Example:</p>\n\n<pre><code>@RequestMapping(\"handler.do\")\npublic String myHandler(@Valid @ModelAttribute(\"form\") SomeFormBean myForm, BindingResult result, Model model) {\n    if(result.hasErrors()) {\n      ...your error handling...\n    } else {\n      ...your non-error handling....\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2161934,"reputation":4386,"user_id":1915920,"accept_rate":97,"display_name":"Andreas Covidiot"},"comment_count":0,"down_vote_count":3,"up_vote_count":8,"is_accepted":false,"score":5,"last_activity_date":1439807624,"creation_date":1439807624,"answer_id":32048174,"question_id":8756768,"body_markdown":"You can also simply use **`@NonNull`** with the **lombok library** instead, at least **for the `@NotNull` scenario**. More details: https://projectlombok.org/api/lombok/NonNull.html","title":"Annotations from javax.validation.constraints not working","body":"<p>You can also simply use <strong><code>@NonNull</code></strong> with the <strong>lombok library</strong> instead, at least <strong>for the <code>@NotNull</code> scenario</strong>. More details: <a href=\"https://projectlombok.org/api/lombok/NonNull.html\" rel=\"noreferrer\">https://projectlombok.org/api/lombok/NonNull.html</a></p>\n"},{"tags":[],"owner":{"account_id":191089,"reputation":870,"user_id":431425,"display_name":"ChetPrickles"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1468781093,"creation_date":1468781093,"answer_id":38424723,"question_id":8756768,"body_markdown":"in my case i had a custom class-level constraint that was not being called.\r\n\r\n    @CustomValidation // not called\r\n    public class MyClass {\r\n        @Lob\r\n        @Column(nullable = false)\r\n        private String name;\r\n    }\r\n\r\nas soon as i added a field-level constraint to my class, either custom or standard, the class-level constraint started working.\r\n\r\n    @CustomValidation // now it works. super.\r\n    public class MyClass {\r\n        @Lob\r\n        @Column(nullable = false)\r\n        @NotBlank // adding this made @CustomValidation start working\r\n        private String name;\r\n    }\r\n\r\nseems like buggy behavior to me but easy enough to work around i guess\r\n","title":"Annotations from javax.validation.constraints not working","body":"<p>in my case i had a custom class-level constraint that was not being called.</p>\n\n<pre><code>@CustomValidation // not called\npublic class MyClass {\n    @Lob\n    @Column(nullable = false)\n    private String name;\n}\n</code></pre>\n\n<p>as soon as i added a field-level constraint to my class, either custom or standard, the class-level constraint started working.</p>\n\n<pre><code>@CustomValidation // now it works. super.\npublic class MyClass {\n    @Lob\n    @Column(nullable = false)\n    @NotBlank // adding this made @CustomValidation start working\n    private String name;\n}\n</code></pre>\n\n<p>seems like buggy behavior to me but easy enough to work around i guess</p>\n"},{"tags":[],"owner":{"account_id":9413,"reputation":2958,"user_id":17382,"accept_rate":88,"display_name":"Chad"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1495709200,"creation_date":1495709200,"answer_id":44178634,"question_id":8756768,"body_markdown":"You need to add **@Valid** to ***each member variable***, which was also an object that contained validation constraints.","title":"Annotations from javax.validation.constraints not working","body":"<p>You need to add <strong>@Valid</strong> to <strong><em>each member variable</em></strong>, which was also an object that contained validation constraints.</p>\n"},{"tags":[],"owner":{"account_id":1855980,"reputation":504,"user_id":1681554,"accept_rate":0,"display_name":"Akshay"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505760584,"creation_date":1505760584,"answer_id":46286245,"question_id":8756768,"body_markdown":"So @Valid at service interface would work for only that object. If you have any more validations within the hierarchy of ServiceRequest object then you might to have explicitly trigger validations. So this is how I have done it:\r\n\r\n    public class ServiceRequestValidator {\r\n\r\n          private static Validator validator;\r\n\r\n          @PostConstruct\r\n          public void init(){\r\n             validator = Validation.buildDefaultValidatorFactory().getValidator();\r\n          }\r\n\r\n          public static &lt;T&gt; void validate(T t){\r\n            Set&lt;ConstraintViolation&lt;T&gt;&gt; errors = validator.validate(t);\r\n            if(CollectionUtils.isNotEmpty(errors)){\r\n              throw new ConstraintViolationException(errors);\r\n            }\r\n         }\r\n\r\n    }\r\n\r\nYou need to have following annotations at the object level if you want to trigger validation for that object.\r\n\r\n\r\n    @Valid\r\n    @NotNull","title":"Annotations from javax.validation.constraints not working","body":"<p>So @Valid at service interface would work for only that object. If you have any more validations within the hierarchy of ServiceRequest object then you might to have explicitly trigger validations. So this is how I have done it:</p>\n\n<pre><code>public class ServiceRequestValidator {\n\n      private static Validator validator;\n\n      @PostConstruct\n      public void init(){\n         validator = Validation.buildDefaultValidatorFactory().getValidator();\n      }\n\n      public static &lt;T&gt; void validate(T t){\n        Set&lt;ConstraintViolation&lt;T&gt;&gt; errors = validator.validate(t);\n        if(CollectionUtils.isNotEmpty(errors)){\n          throw new ConstraintViolationException(errors);\n        }\n     }\n\n}\n</code></pre>\n\n<p>You need to have following annotations at the object level if you want to trigger validation for that object.</p>\n\n<pre><code>@Valid\n@NotNull\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11351244,"reputation":1,"user_id":8322152,"display_name":"Edward"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1539199401,"creation_date":1539199401,"answer_id":52747415,"question_id":8756768,"body_markdown":"for method parameters you can use Objects.requireNonNull() like this:\r\n`test(String str) {\r\n  Objects.requireNonNull(str);\r\n}`\r\nBut this is only checked at runtime and throws an NPE if null.  It is like a preconditions check.  But that might be what you are looking for.","title":"Annotations from javax.validation.constraints not working","body":"<p>for method parameters you can use Objects.requireNonNull() like this:\n<code>test(String str) {\n  Objects.requireNonNull(str);\n}</code>\nBut this is only checked at runtime and throws an NPE if null.  It is like a preconditions check.  But that might be what you are looking for.</p>\n"},{"tags":[],"owner":{"account_id":1688041,"reputation":618,"user_id":1550930,"display_name":"xCovelus"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1540225335,"creation_date":1540224503,"answer_id":52933525,"question_id":8756768,"body_markdown":"I come here some years after, and I could fix it thanks to [atrain][1]&#39;s [comment above][2]. In my case, I was missing `@Valid` in the **API** that receives the Object (a POJO in my case) that was annotated with `@Size`. It solved the issue.\r\n\r\nI did **not** need to add any extra annotation, such as `@Valid` or `@NotBlank` to the variable annotated with `@Size`, just that constraint in the variable and what I  mentioned in the API...\r\n \r\n**Pojo Class:**\r\n\r\n    ...\r\n    @Size(min = MIN_LENGTH, max = MAX_LENGTH);\r\n    private String exampleVar;\r\n    ...\r\n\r\n**API Class:**\r\n\r\n    ...\r\n    public void exampleApiCall(@RequestBody @Valid PojoObject pojoObject){\r\n      ...\r\n    }\r\n\r\nThanks and cheers\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/557363/atrain\r\n  [2]: https://stackoverflow.com/questions/8756768/annotations-from-javax-validation-constraints-not-working/8758577#8758577","title":"Annotations from javax.validation.constraints not working","body":"<p>I come here some years after, and I could fix it thanks to <a href=\"https://stackoverflow.com/users/557363/atrain\">atrain</a>'s <a href=\"https://stackoverflow.com/questions/8756768/annotations-from-javax-validation-constraints-not-working/8758577#8758577\">comment above</a>. In my case, I was missing <code>@Valid</code> in the <strong>API</strong> that receives the Object (a POJO in my case) that was annotated with <code>@Size</code>. It solved the issue.</p>\n\n<p>I did <strong>not</strong> need to add any extra annotation, such as <code>@Valid</code> or <code>@NotBlank</code> to the variable annotated with <code>@Size</code>, just that constraint in the variable and what I  mentioned in the API...</p>\n\n<p><strong>Pojo Class:</strong></p>\n\n<pre><code>...\n@Size(min = MIN_LENGTH, max = MAX_LENGTH);\nprivate String exampleVar;\n...\n</code></pre>\n\n<p><strong>API Class:</strong></p>\n\n<pre><code>...\npublic void exampleApiCall(@RequestBody @Valid PojoObject pojoObject){\n  ...\n}\n</code></pre>\n\n<p>Thanks and cheers</p>\n"},{"tags":[],"owner":{"account_id":2464004,"reputation":119,"user_id":2147515,"display_name":"PavelP"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547727688,"creation_date":1547727688,"answer_id":54235858,"question_id":8756768,"body_markdown":"Great answer from **atrain**,\r\nbut maybe better solution to catch exceptions is to utilize own **HandlerExceptionResolver**\r\nand catch   \r\n\r\n    @Override\r\n    public ModelAndView resolveException(\r\n        HttpServletRequest aReq, \r\n        HttpServletResponse aRes,\r\n        Object aHandler, \r\n        Exception anExc\r\n    ){\r\n        // ....\r\n        if(anExc instanceof MethodArgumentNotValidException) // do your handle     error here\r\n    }\r\n\r\nThen you&#39;re able to keep your handler as clean as possible.\r\nYou don&#39;t need BindingResult, Model and SomeFormBean in myHandlerMethod anymore.\r\n\r\n","title":"Annotations from javax.validation.constraints not working","body":"<p>Great answer from <strong>atrain</strong>,\nbut maybe better solution to catch exceptions is to utilize own <strong>HandlerExceptionResolver</strong>\nand catch   </p>\n\n<pre><code>@Override\npublic ModelAndView resolveException(\n    HttpServletRequest aReq, \n    HttpServletResponse aRes,\n    Object aHandler, \n    Exception anExc\n){\n    // ....\n    if(anExc instanceof MethodArgumentNotValidException) // do your handle     error here\n}\n</code></pre>\n\n<p>Then you're able to keep your handler as clean as possible.\nYou don't need BindingResult, Model and SomeFormBean in myHandlerMethod anymore.</p>\n"},{"tags":[],"owner":{"account_id":16243723,"reputation":11,"user_id":11729412,"display_name":"Junda Yang"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1569908098,"creation_date":1569906648,"answer_id":58178387,"question_id":8756768,"body_markdown":"I came across this problem recently in a very similar situation:\r\nMet all requirements as the top-rated answer listed but still got the wrong result.\r\n\r\nSo I looked at my dependencies and found I was missing some of them. I corrected it by adding the missing dependencies.\r\n\r\nI was using hibernate, the required dependencies were:\r\n[![Dependencies Snapshot][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ovX7q.png\r\n\r\n\r\n*Snapshot taken in class &quot;Spring &amp; Hibernate for Beginners&quot; @ Udemy","title":"Annotations from javax.validation.constraints not working","body":"<p>I came across this problem recently in a very similar situation:\nMet all requirements as the top-rated answer listed but still got the wrong result.</p>\n\n<p>So I looked at my dependencies and found I was missing some of them. I corrected it by adding the missing dependencies.</p>\n\n<p>I was using hibernate, the required dependencies were:\n<a href=\"https://i.stack.imgur.com/ovX7q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ovX7q.png\" alt=\"Dependencies Snapshot\"></a></p>\n\n<p>*Snapshot taken in class \"Spring &amp; Hibernate for Beginners\" @ Udemy</p>\n"},{"comments":[{"owner":{"account_id":10299803,"reputation":1540,"user_id":7598851,"display_name":"MartinBG"},"score":21,"creation_date":1589649738,"post_id":61760275,"comment_id":109379978,"body_markdown":"Starting from version `2.3.0.RELEASE` Spring Boot Web and WebFlux starters no longer depend on the validation starter, so you have to add `spring-boot-starter-validation` to your pom.xml. For details check 2.3.0 [Release notes](https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.3-Release-Notes#validation-starter-no-longer-included-in-web-starters)","body":"Starting from version <code>2.3.0.RELEASE</code> Spring Boot Web and WebFlux starters no longer depend on the validation starter, so you have to add <code>spring-boot-starter-validation</code> to your pom.xml. For details check 2.3.0 <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.3-Release-Notes#validation-starter-no-longer-included-in-web-starters\" rel=\"nofollow noreferrer\">Release notes</a>"},{"owner":{"account_id":18696932,"reputation":185,"user_id":13630035,"display_name":"gabopushups"},"score":0,"creation_date":1652922312,"post_id":61760275,"comment_id":127727077,"body_markdown":"@MartinBG It didn&#39;t work for me. Do I need to download it or something?","body":"@MartinBG It didn&#39;t work for me. Do I need to download it or something?"},{"owner":{"account_id":10299803,"reputation":1540,"user_id":7598851,"display_name":"MartinBG"},"score":0,"creation_date":1652986692,"post_id":61760275,"comment_id":127747092,"body_markdown":"@gabopushups No, all specified dependencies are downloaded automatically. If you still have the problem better post a new question with all the details","body":"@gabopushups No, all specified dependencies are downloaded automatically. If you still have the problem better post a new question with all the details"},{"owner":{"account_id":18696932,"reputation":185,"user_id":13630035,"display_name":"gabopushups"},"score":0,"creation_date":1653492191,"post_id":61760275,"comment_id":127867021,"body_markdown":"@MartinBG Thanks for your answer, you were right. I found the solution in another site: I only had to reload my code editor.","body":"@MartinBG Thanks for your answer, you were right. I found the solution in another site: I only had to reload my code editor."}],"tags":[],"owner":{"account_id":2034071,"reputation":10531,"user_id":2237469,"accept_rate":94,"display_name":"yrazlik"},"comment_count":4,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1589311522,"creation_date":1589311522,"answer_id":61760275,"question_id":8756768,"body_markdown":"In my case, I was using spring boot version 2.3.0. When I changed my maven dependency to use 2.1.3 it worked.\r\n\r\n\r\n    &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.1.3.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;","title":"Annotations from javax.validation.constraints not working","body":"<p>In my case, I was using spring boot version 2.3.0. When I changed my maven dependency to use 2.1.3 it worked.</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.1.3.RELEASE&lt;/version&gt;\n    &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n        &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18797658,"reputation":131,"user_id":13708754,"display_name":"Hermann N&#39;ZI"},"comment_count":0,"down_vote_count":5,"up_vote_count":0,"is_accepted":false,"score":-5,"last_activity_date":1592173879,"creation_date":1592173879,"answer_id":62378968,"question_id":8756768,"body_markdown":"In my case i removed these lines\r\n\r\n1-import javax.validation.constraints.NotNull;\r\n\r\n2-import javax.validation.constraints.Size;\r\n\r\n3-      @NotNull\r\n\r\n4-    @Size(max = 3)","title":"Annotations from javax.validation.constraints not working","body":"<p>In my case i removed these lines</p>\n\n<p>1-import javax.validation.constraints.NotNull;</p>\n\n<p>2-import javax.validation.constraints.Size;</p>\n\n<p>3-      @NotNull</p>\n\n<p>4-    @Size(max = 3)</p>\n"},{"tags":[],"owner":{"account_id":14234629,"reputation":1194,"user_id":10282780,"display_name":"Prasenjit Mahato"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592676596,"creation_date":1592676596,"answer_id":62489829,"question_id":8756768,"body_markdown":"If you are using lombok then, you can use @NonNull annotation insted. \r\nor Just add the javax.validation dependency in pom.xml file. ","title":"Annotations from javax.validation.constraints not working","body":"<p>If you are using lombok then, you can use @NonNull annotation insted.\nor Just add the javax.validation dependency in pom.xml file.</p>\n"},{"tags":[],"owner":{"account_id":5570663,"reputation":41,"user_id":4416118,"display_name":"Pedro Sousa"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1598019953,"creation_date":1598019953,"answer_id":63524726,"question_id":8756768,"body_markdown":"\r\nAfter the Version 2.3.0 the &quot;*spring-boot-strarter-test*&quot; (that included the NotNull/NotBlank/etc) is now &quot;*sprnig boot-strarter-validation*&quot;\r\n\r\nJust change it from *....-test* to *...-validation* and it should work.\r\n\r\nIf not downgrading the version that you are using to 2.1.3 also will solve it.","title":"Annotations from javax.validation.constraints not working","body":"<p>After the Version 2.3.0 the &quot;<em>spring-boot-strarter-test</em>&quot; (that included the NotNull/NotBlank/etc) is now &quot;<em>sprnig boot-strarter-validation</em>&quot;</p>\n<p>Just change it from <em>....-test</em> to <em>...-validation</em> and it should work.</p>\n<p>If not downgrading the version that you are using to 2.1.3 also will solve it.</p>\n"},{"tags":[],"owner":{"account_id":19202668,"reputation":11,"user_id":14030272,"display_name":"Shivam Jaiswal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626681108,"creation_date":1626681108,"answer_id":68436944,"question_id":8756768,"body_markdown":"For those who have not been able to perform server-side validation through Hibernate validation dependency.\r\nJust remove Hibernate validator +javax validation dependency and add spring-boot-starter validation. It provides Hibernate Validator Internally, and it worked just fine for me. \r\n\r\nCredits:- a comment from youtube.","title":"Annotations from javax.validation.constraints not working","body":"<p>For those who have not been able to perform server-side validation through Hibernate validation dependency.\nJust remove Hibernate validator +javax validation dependency and add spring-boot-starter validation. It provides Hibernate Validator Internally, and it worked just fine for me.</p>\n<p>Credits:- a comment from youtube.</p>\n"},{"tags":[],"owner":{"account_id":8261165,"reputation":461,"user_id":6212514,"display_name":"Ajay Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1627277998,"creation_date":1627277998,"answer_id":68524968,"question_id":8756768,"body_markdown":"I also faced the same problem. Javax annotations ( @NotNull, @Valid) were not performing any validation. Their presence was not making any difference.\r\n\r\nI have to use &#39;springboot-starter-validation&#39; dependency to make the javax validations effective. \r\nHere is the related dependencies configuration. Also don&#39;t miss to add @Valid annotation on the Object you want to validate.\r\n\r\n    &lt;parent&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.5.2&lt;/version&gt;\r\n    \t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    .....\r\n    .....\r\n    &lt;dependencies&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t&lt;/dependency&gt;\r\n     &lt;dependencies&gt;","title":"Annotations from javax.validation.constraints not working","body":"<p>I also faced the same problem. Javax annotations ( @NotNull, @Valid) were not performing any validation. Their presence was not making any difference.</p>\n<p>I have to use 'springboot-starter-validation' dependency to make the javax validations effective.\nHere is the related dependencies configuration. Also don't miss to add @Valid annotation on the Object you want to validate.</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.5.2&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n.....\n.....\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n        &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n &lt;dependencies&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":1,"creation_date":1638089321,"post_id":69469169,"comment_id":123990508,"body_markdown":"After trying *everything* this was the only thing that worked! Thanks","body":"After trying <i>everything</i> this was the only thing that worked! Thanks"},{"owner":{"account_id":14996835,"reputation":51,"user_id":10825918,"display_name":"Tovarisch"},"score":1,"creation_date":1653567504,"post_id":69469169,"comment_id":127885858,"body_markdown":"Love you man, saved my day.","body":"Love you man, saved my day."}],"tags":[],"owner":{"account_id":904230,"reputation":2233,"user_id":939497,"accept_rate":40,"display_name":"Balconsky"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1633536790,"creation_date":1633536790,"answer_id":69469169,"question_id":8756768,"body_markdown":"In my case the reason was the **hibernate-validator version**.\r\nProbably something is not supported in the newer version any more.\r\n\r\nI changed:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n        &lt;version&gt;${hibernate-validator.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI downgraded the version from **7.0.1.Final** to **6.0.2.Final** and this helped me.","title":"Annotations from javax.validation.constraints not working","body":"<p>In my case the reason was the <strong>hibernate-validator version</strong>.\nProbably something is not supported in the newer version any more.</p>\n<p>I changed:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n    &lt;version&gt;${hibernate-validator.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I downgraded the version from <strong>7.0.1.Final</strong> to <strong>6.0.2.Final</strong> and this helped me.</p>\n"},{"tags":[],"owner":{"account_id":4012248,"reputation":924,"user_id":3305311,"accept_rate":29,"display_name":"Fabio Formosa"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1636412450,"creation_date":1636412450,"answer_id":69890909,"question_id":8756768,"body_markdown":"Recently I faced the same. I upgraded `hibernate-validator` to ver 7.x but later I noticed this [release note][1]\r\n\r\n&gt; Hibernate Validator 7.0 is the reference implementation for Jakarta Bean Validation 3.0.  \r\n&gt; The main change is that all the dependencies using javax. packages are now using jakarta.* packages.  \r\n&gt; Upgrade to Hibernate Validator 7 is only recommended if you are moving to Jakarta EE 9.\r\n\r\nMy project should target java 8, so keeping `javax.validation` instead of switiching to `jakarta.validation`, I&#39;ve had to downgrade to\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n  &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n  &lt;version&gt;6.0.2.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n\r\n  [1]: https://hibernate.org/validator/releases/7.0/","title":"Annotations from javax.validation.constraints not working","body":"<p>Recently I faced the same. I upgraded <code>hibernate-validator</code> to ver 7.x but later I noticed this <a href=\"https://hibernate.org/validator/releases/7.0/\" rel=\"nofollow noreferrer\">release note</a></p>\n<blockquote>\n<p>Hibernate Validator 7.0 is the reference implementation for Jakarta Bean Validation 3.0.<br />\nThe main change is that all the dependencies using javax. packages are now using jakarta.* packages.<br />\nUpgrade to Hibernate Validator 7 is only recommended if you are moving to Jakarta EE 9.</p>\n</blockquote>\n<p>My project should target java 8, so keeping <code>javax.validation</code> instead of switiching to <code>jakarta.validation</code>, I've had to downgrade to</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n  &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n  &lt;version&gt;6.0.2.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14404539,"reputation":71,"user_id":13898185,"display_name":"Akta Kalariya"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649863420,"creation_date":1649863420,"answer_id":71859991,"question_id":8756768,"body_markdown":"By default javax validation in spring works for Rest controller method input variables. But for other places to use the same we have to annotate class containing @Valid annotation with @Validated class level annotation.\r\n\r\nI was facing same issue with kafka listener and after that I annotated it with @Validated it started working.\r\n\r\n    @Component\r\n    @Log4j2\r\n    @Validated\r\n    public class KafkaMessageListeners {\r\n    \r\n        @KafkaListener(topics = &quot;message_reprocessor&quot;, errorHandler = &quot;validationErrorHandler&quot;)\r\n        public void processMessage(@Payload @Valid CustomPojo payload,\r\n                                   @Header(KafkaHeaders.OFFSET) List&lt;Long&gt; offsets, Acknowledgment acknowledgment) {\r\n    \r\n        }\r\n    \r\n    }","title":"Annotations from javax.validation.constraints not working","body":"<p>By default javax validation in spring works for Rest controller method input variables. But for other places to use the same we have to annotate class containing @Valid annotation with @Validated class level annotation.</p>\n<p>I was facing same issue with kafka listener and after that I annotated it with @Validated it started working.</p>\n<pre><code>@Component\n@Log4j2\n@Validated\npublic class KafkaMessageListeners {\n\n    @KafkaListener(topics = &quot;message_reprocessor&quot;, errorHandler = &quot;validationErrorHandler&quot;)\n    public void processMessage(@Payload @Valid CustomPojo payload,\n                               @Header(KafkaHeaders.OFFSET) List&lt;Long&gt; offsets, Acknowledgment acknowledgment) {\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17201545,"reputation":101,"user_id":12453161,"display_name":"Anmol Shah"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661951720,"creation_date":1661951720,"answer_id":73556472,"question_id":8756768,"body_markdown":"I fell into the same issue, but I got solution\r\n\r\nyour servlet configuration xml file i.e {servlet-name}-servlet.xml file\r\n\r\nshould be like\r\n\r\n    \r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n        \r\n        &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n        \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n        \txmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n        \txmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n        \txsi:schemaLocation=&quot;\r\n        \t\thttp://www.springframework.org/schema/beans\r\n            \thttp://www.springframework.org/schema/beans/spring-beans.xsd\r\n            \thttp://www.springframework.org/schema/context\r\n            \thttp://www.springframework.org/schema/context/spring-context.xsd\r\n            \thttp://www.springframework.org/schema/mvc\r\n                http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;\r\n        \r\n           &lt;context:component-scan base-package = &quot;spring.tutorial.controller&quot; /&gt;\r\n           \r\n    -&gt;&gt;&gt;  Step 4: Add support for conversion, formatting and validation support\r\n           \r\n            &lt;mvc:annotation-driven/&gt;        \r\n        \r\n           &lt;bean class = &quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n              &lt;property name = &quot;prefix&quot; value = &quot;/WEB-INF/views/&quot; /&gt;\r\n              &lt;property name = &quot;suffix&quot; value = &quot;.jsp&quot; /&gt;\r\n           &lt;/bean&gt;\r\n        \r\n        &lt;/beans&gt;\r\n\r\n\r\nstep 4 is important one","title":"Annotations from javax.validation.constraints not working","body":"<p>I fell into the same issue, but I got solution</p>\n<p>your servlet configuration xml file i.e {servlet-name}-servlet.xml file</p>\n<p>should be like</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n    \n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n        xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n        xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\n        xsi:schemaLocation=&quot;\n            http://www.springframework.org/schema/beans\n            http://www.springframework.org/schema/beans/spring-beans.xsd\n            http://www.springframework.org/schema/context\n            http://www.springframework.org/schema/context/spring-context.xsd\n            http://www.springframework.org/schema/mvc\n            http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;\n    \n       &lt;context:component-scan base-package = &quot;spring.tutorial.controller&quot; /&gt;\n       \n-&gt;&gt;&gt;  Step 4: Add support for conversion, formatting and validation support\n       \n        &lt;mvc:annotation-driven/&gt;        \n    \n       &lt;bean class = &quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\n          &lt;property name = &quot;prefix&quot; value = &quot;/WEB-INF/views/&quot; /&gt;\n          &lt;property name = &quot;suffix&quot; value = &quot;.jsp&quot; /&gt;\n       &lt;/bean&gt;\n    \n    &lt;/beans&gt;\n</code></pre>\n<p>step 4 is important one</p>\n"},{"comments":[{"owner":{"account_id":6410870,"reputation":1742,"user_id":4970679,"display_name":"ahuemmer"},"score":0,"creation_date":1672398824,"post_id":74958093,"comment_id":132282309,"body_markdown":"Welcome to SO! Please take a look at the other answers that were given before. Your approach is mentioned there already. In order to keep the site clear and make it easy to find answers, we try to avoid double answers.","body":"Welcome to SO! Please take a look at the other answers that were given before. Your approach is mentioned there already. In order to keep the site clear and make it easy to find answers, we try to avoid double answers."}],"tags":[],"owner":{"account_id":6755342,"reputation":31,"user_id":5203992,"display_name":"Isfar Hassan"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1672374023,"creation_date":1672374023,"answer_id":74958093,"question_id":8756768,"body_markdown":"Just add the following in your pom.xml under &lt;Dependencies&gt; tag if you are using Maven.\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\nFor Gradle you can do the following.\r\n\r\n    dependencies {\r\n      ...\r\n      implementation &#39;org.springframework.boot:spring-boot-starter-validation&#39;\r\n    }\r\n","title":"Annotations from javax.validation.constraints not working","body":"<p>Just add the following in your pom.xml under  tag if you are using Maven.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>For Gradle you can do the following.</p>\n<pre><code>dependencies {\n  ...\n  implementation 'org.springframework.boot:spring-boot-starter-validation'\n}\n</code></pre>\n"}],"owner":{"account_id":1133317,"reputation":1059,"user_id":1118895,"accept_rate":60,"display_name":"Darshan Patil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":193487,"favorite_count":0,"down_vote_count":0,"up_vote_count":83,"accepted_answer_id":8758577,"answer_count":22,"score":83,"last_activity_date":1672374023,"creation_date":1325847408,"question_id":8756768,"body_markdown":"What configuration is needed to use annotations from `javax.validation.constraints` like `@Size`, `@NotNull`, etc.? Here&#39;s my code:\r\n\r\n    import javax.validation.constraints.NotNull;\r\n    import javax.validation.constraints.Size;\r\n    \r\n    public class Person {\r\n    \t  @NotNull\r\n    \t  private String id;\r\n    \t  \r\n    \t  @Size(max = 3)\r\n    \t  private String name;\r\n    \r\n          private int age;\r\n    \r\n    \t  public Person(String id, String name, int age) {\r\n    \t    this.id = id;\r\n    \t    this.name = name;\r\n    \t    this.age = age;\r\n    \t  }\r\n    }\r\n\r\nWhen I try to use it in another class, validation doesn&#39;t work (i.e. the object is created without error):\r\n\r\n    Person P = new Person(null, &quot;Richard3&quot;, 8229));\r\n\r\nWhy doesn&#39;t this apply constraints for `id` and `name`? What else do I need to do?","title":"Annotations from javax.validation.constraints not working","body":"<p>What configuration is needed to use annotations from <code>javax.validation.constraints</code> like <code>@Size</code>, <code>@NotNull</code>, etc.? Here's my code:</p>\n\n<pre><code>import javax.validation.constraints.NotNull;\nimport javax.validation.constraints.Size;\n\npublic class Person {\n      @NotNull\n      private String id;\n\n      @Size(max = 3)\n      private String name;\n\n      private int age;\n\n      public Person(String id, String name, int age) {\n        this.id = id;\n        this.name = name;\n        this.age = age;\n      }\n}\n</code></pre>\n\n<p>When I try to use it in another class, validation doesn't work (i.e. the object is created without error):</p>\n\n<pre><code>Person P = new Person(null, \"Richard3\", 8229));\n</code></pre>\n\n<p>Why doesn't this apply constraints for <code>id</code> and <code>name</code>? What else do I need to do?</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1502105917,"post_id":45543669,"comment_id":78051463,"body_markdown":"Don&#39;t set the `maxHeight` and `prefHeight` on the `GridPane.`","body":"Don&#39;t set the <code>maxHeight</code> and <code>prefHeight</code> on the <code>GridPane.</code>"}],"answers":[{"tags":[],"owner":{"account_id":13721550,"reputation":862,"user_id":9901309,"display_name":"RAINA"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530246560,"creation_date":1530109475,"answer_id":51065303,"question_id":45543669,"body_markdown":"I was stuck with the same issue.. looked everywhere... finally there was one way around..\r\n\r\nJust don&#39;t add the grid pane using the scene builder ...just create the scroll pane using the scene builder and then add the grid pane dynamically using the code and do like below\r\n\r\n    // create new constraints for columns and set their percentage\r\n    ColumnConstraints columnConstraints = new ColumnConstraints();\r\n    columnConstraints.setHgrow(Priority.NEVER);\r\n    columnConstraints.setPercentWidth(100.00);\r\n    \r\n    // create new constraints for row and set their percentage\r\n    RowConstraints rowConstraints = new RowConstraints();\r\n    rowConstraints.setVgrow(Priority.NEVER);\r\n\r\n    columnConstraints.setPercentWidth(100.0);\r\n    \r\n    // don&#39;t set preferred size or anything on gridpane\r\n    GridPane gridPane = new GridPane();  \r\n    gridPane.getRowConstraints().add(rowConstraints);\r\n    gridPane.getColumnConstraints().add(columnConstraints);\r\n            \r\n    // suppose your scroll pane id is scrollPane\r\n    scrollPane.setContent(gridPane);\r\n\r\n\r\nFinally in scene builder remember to tick FitHeight and FitWidth for scrollpane so that grid pane will stretch to fit the scroll pane size when the grid is added on the go","title":"GridPane within a ScrollPane","body":"<p>I was stuck with the same issue.. looked everywhere... finally there was one way around..</p>\n\n<p>Just don't add the grid pane using the scene builder ...just create the scroll pane using the scene builder and then add the grid pane dynamically using the code and do like below</p>\n\n<pre><code>// create new constraints for columns and set their percentage\nColumnConstraints columnConstraints = new ColumnConstraints();\ncolumnConstraints.setHgrow(Priority.NEVER);\ncolumnConstraints.setPercentWidth(100.00);\n\n// create new constraints for row and set their percentage\nRowConstraints rowConstraints = new RowConstraints();\nrowConstraints.setVgrow(Priority.NEVER);\n\ncolumnConstraints.setPercentWidth(100.0);\n\n// don't set preferred size or anything on gridpane\nGridPane gridPane = new GridPane();  \ngridPane.getRowConstraints().add(rowConstraints);\ngridPane.getColumnConstraints().add(columnConstraints);\n\n// suppose your scroll pane id is scrollPane\nscrollPane.setContent(gridPane);\n</code></pre>\n\n<p>Finally in scene builder remember to tick FitHeight and FitWidth for scrollpane so that grid pane will stretch to fit the scroll pane size when the grid is added on the go</p>\n"},{"tags":[],"owner":{"account_id":20774219,"reputation":59,"user_id":15256130,"display_name":"Obada Jaras"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672373453,"creation_date":1672373453,"answer_id":74958044,"question_id":45543669,"body_markdown":"I was stuck on the same problem, and I don&#39;t know what I did, but somehow it got fixed and my FXML file became like this:\r\n\r\n    &lt;ScrollPane layoutX=&quot;68.0&quot; layoutY=&quot;426.0&quot; prefHeight=&quot;200.0&quot; prefWidth=&quot;763.0&quot;&gt;\r\n        &lt;content&gt;\r\n          &lt;GridPane fx:id=&quot;gp_result&quot; alignment=&quot;CENTER&quot; nodeOrientation=&quot;RIGHT_TO_LEFT&quot; prefHeight=&quot;200.0&quot; prefWidth=&quot;763.0&quot;&gt;\r\n            &lt;columnConstraints&gt;\r\n              &lt;ColumnConstraints hgrow=&quot;SOMETIMES&quot; maxWidth=&quot;376.4000244140625&quot; minWidth=&quot;10.0&quot; prefWidth=&quot;85.19996643066406&quot; /&gt;\r\n                &lt;ColumnConstraints hgrow=&quot;SOMETIMES&quot; maxWidth=&quot;678.8000335693359&quot; minWidth=&quot;10.0&quot; prefWidth=&quot;678.8000335693359&quot; /&gt;\r\n            &lt;/columnConstraints&gt;\r\n          &lt;/GridPane&gt;\r\n        &lt;/content&gt;\r\n      &lt;/ScrollPane&gt;","title":"GridPane within a ScrollPane","body":"<p>I was stuck on the same problem, and I don't know what I did, but somehow it got fixed and my FXML file became like this:</p>\n<pre><code>&lt;ScrollPane layoutX=&quot;68.0&quot; layoutY=&quot;426.0&quot; prefHeight=&quot;200.0&quot; prefWidth=&quot;763.0&quot;&gt;\n    &lt;content&gt;\n      &lt;GridPane fx:id=&quot;gp_result&quot; alignment=&quot;CENTER&quot; nodeOrientation=&quot;RIGHT_TO_LEFT&quot; prefHeight=&quot;200.0&quot; prefWidth=&quot;763.0&quot;&gt;\n        &lt;columnConstraints&gt;\n          &lt;ColumnConstraints hgrow=&quot;SOMETIMES&quot; maxWidth=&quot;376.4000244140625&quot; minWidth=&quot;10.0&quot; prefWidth=&quot;85.19996643066406&quot; /&gt;\n            &lt;ColumnConstraints hgrow=&quot;SOMETIMES&quot; maxWidth=&quot;678.8000335693359&quot; minWidth=&quot;10.0&quot; prefWidth=&quot;678.8000335693359&quot; /&gt;\n        &lt;/columnConstraints&gt;\n      &lt;/GridPane&gt;\n    &lt;/content&gt;\n  &lt;/ScrollPane&gt;\n</code></pre>\n"}],"owner":{"account_id":9255723,"reputation":147,"user_id":6874709,"accept_rate":100,"display_name":"omlfc be"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3011,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1672373453,"creation_date":1502098384,"question_id":45543669,"body_markdown":"I wrapped a `GridPane` in a `ScrollPane` to be able to scroll it when new rows are added to the Grid.\r\n\r\n    &lt;BorderPane fx:id=&quot;SubmitStageBorderPane&quot; \r\n    stylesheets=&quot;@../SubmitStageStyles.css&quot; \r\n    xmlns=&quot;http://javafx.com/javafx/8.0.112-ea&quot; \r\n    xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;sample.SubmitStage&quot;&gt;\r\n       &lt;center&gt;\r\n      &lt;AnchorPane fx:id=&quot;SubmitStageAnchorPane&quot;&gt;\r\n         &lt;children&gt;\r\n            &lt;ScrollPane fx:id=&quot;GridscPane&quot; hbarPolicy=&quot;NEVER&quot; vbarPolicy=&quot;ALWAYS&quot;&gt;\r\n               &lt;content&gt;\r\n                  &lt;GridPane fx:id=&quot;submitLayout&quot; maxHeight=&quot;1080.0&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;500.0&quot; prefWidth=&quot;700.0&quot; stylesheets=&quot;@../SubmitStageStyles.css&quot;&gt;\r\n                    &lt;columnConstraints&gt;\r\n                      &lt;ColumnConstraints hgrow=&quot;SOMETIMES&quot; minWidth=&quot;10.0&quot; prefWidth=&quot;100.0&quot; /&gt;\r\n                        &lt;ColumnConstraints hgrow=&quot;SOMETIMES&quot; minWidth=&quot;10.0&quot; prefWidth=&quot;100.0&quot; /&gt;\r\n                        &lt;ColumnConstraints hgrow=&quot;SOMETIMES&quot; minWidth=&quot;10.0&quot; prefWidth=&quot;100.0&quot; /&gt;\r\n                        &lt;ColumnConstraints hgrow=&quot;SOMETIMES&quot; minWidth=&quot;10.0&quot; prefWidth=&quot;100.0&quot; /&gt;\r\n                        &lt;ColumnConstraints hgrow=&quot;SOMETIMES&quot; minWidth=&quot;10.0&quot; prefWidth=&quot;100.0&quot; /&gt;\r\n                    &lt;/columnConstraints&gt;\r\n                    &lt;rowConstraints&gt;\r\n                        &lt;RowConstraints minHeight=&quot;10.0&quot; prefHeight=&quot;30.0&quot; vgrow=&quot;SOMETIMES&quot; /&gt;\r\n                      &lt;RowConstraints minHeight=&quot;10.0&quot; prefHeight=&quot;30.0&quot; vgrow=&quot;SOMETIMES&quot; /&gt;\r\n                                  &lt;RowConstraints minHeight=&quot;10.0&quot; prefHeight=&quot;30.0&quot; vgrow=&quot;SOMETIMES&quot; /&gt;\r\n                      &lt;RowConstraints minHeight=&quot;10.0&quot; prefHeight=&quot;30.0&quot; vgrow=&quot;SOMETIMES&quot; /&gt;\r\n                        &lt;RowConstraints minHeight=&quot;10.0&quot; prefHeight=&quot;30.0&quot; vgrow=&quot;SOMETIMES&quot; /&gt;\r\n                        &lt;RowConstraints minHeight=&quot;10.0&quot; prefHeight=&quot;30.0&quot; vgrow=&quot;SOMETIMES&quot; /&gt;\r\n                        &lt;RowConstraints minHeight=&quot;10.0&quot; prefHeight=&quot;30.0&quot; vgrow=&quot;SOMETIMES&quot; /&gt;\r\n                    &lt;/rowConstraints&gt;\r\n                     &lt;children&gt;\r\n                        &lt;TextField fx:id=&quot;course1&quot; promptText=&quot;Course name&quot; GridPane.rowIndex=&quot;1&quot;&gt;\r\n                           &lt;opaqueInsets&gt;\r\n                              &lt;Insets /&gt;\r\n                           &lt;/opaqueInsets&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/TextField&gt;\r\n                        &lt;TextField fx:id=&quot;course2&quot; promptText=&quot;Cource name&quot; GridPane.rowIndex=&quot;2&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/TextField&gt;\r\n                        &lt;TextField fx:id=&quot;course3&quot; promptText=&quot;Course name&quot; GridPane.rowIndex=&quot;3&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/TextField&gt;\r\n                        &lt;TextField fx:id=&quot;course4&quot; promptText=&quot;Course name&quot; GridPane.rowIndex=&quot;4&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/TextField&gt;\r\n                        &lt;Label alignment=&quot;CENTER_RIGHT&quot; contentDisplay=&quot;CENTER&quot; text=&quot;Grade:&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;1&quot;&gt;\r\n                           &lt;font&gt;\r\n                              &lt;Font name=&quot;Eras Demi ITC&quot; size=&quot;21.0&quot; /&gt;\r\n                           &lt;/font&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                           &lt;padding&gt;\r\n                              &lt;Insets bottom=&quot;10.0&quot; left=&quot;10.0&quot; right=&quot;15.0&quot; top=&quot;10.0&quot; /&gt;\r\n                           &lt;/padding&gt;\r\n                        &lt;/Label&gt;\r\n                        &lt;Label alignment=&quot;CENTER_RIGHT&quot; contentDisplay=&quot;CENTER&quot; text=&quot;Grade:&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;2&quot;&gt;\r\n                           &lt;font&gt;\r\n                              &lt;Font name=&quot;Eras Demi ITC&quot; size=&quot;21.0&quot; /&gt;\r\n                           &lt;/font&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                           &lt;padding&gt;\r\n                              &lt;Insets bottom=&quot;10.0&quot; left=&quot;10.0&quot; right=&quot;15.0&quot; top=&quot;10.0&quot; /&gt;\r\n                           &lt;/padding&gt;\r\n                        &lt;/Label&gt;\r\n                        &lt;Label alignment=&quot;CENTER_RIGHT&quot; contentDisplay=&quot;CENTER&quot; text=&quot;Grade:&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;3&quot;&gt;\r\n                           &lt;padding&gt;\r\n                              &lt;Insets bottom=&quot;10.0&quot; left=&quot;10.0&quot; right=&quot;15.0&quot; top=&quot;10.0&quot; /&gt;\r\n                           &lt;/padding&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                           &lt;font&gt;\r\n                              &lt;Font name=&quot;Eras Demi ITC&quot; size=&quot;21.0&quot; /&gt;\r\n                           &lt;/font&gt;\r\n                        &lt;/Label&gt;\r\n                        &lt;Label alignment=&quot;CENTER_RIGHT&quot; contentDisplay=&quot;CENTER&quot; text=&quot;Grade:&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;4&quot;&gt;\r\n                           &lt;font&gt;\r\n                              &lt;Font name=&quot;Eras Demi ITC&quot; size=&quot;21.0&quot; /&gt;\r\n                           &lt;/font&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                           &lt;padding&gt;\r\n                              &lt;Insets bottom=&quot;10.0&quot; left=&quot;10.0&quot; right=&quot;15.0&quot; top=&quot;10.0&quot; /&gt;\r\n                           &lt;/padding&gt;\r\n                        &lt;/Label&gt;\r\n                        &lt;TextField fx:id=&quot;grade1&quot; promptText=&quot;Enter the grade&quot; GridPane.columnIndex=&quot;2&quot; GridPane.rowIndex=&quot;1&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/TextField&gt;\r\n                        &lt;TextField fx:id=&quot;grade2&quot; promptText=&quot;Enter the grade&quot; GridPane.columnIndex=&quot;2&quot; GridPane.rowIndex=&quot;2&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/TextField&gt;\r\n                        &lt;TextField fx:id=&quot;grade3&quot; promptText=&quot;Enter the grade&quot; GridPane.columnIndex=&quot;2&quot; GridPane.rowIndex=&quot;3&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/TextField&gt;\r\n                        &lt;TextField fx:id=&quot;grade4&quot; promptText=&quot;Enter the grade&quot; GridPane.columnIndex=&quot;2&quot; GridPane.rowIndex=&quot;4&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/TextField&gt;\r\n                        &lt;Label alignment=&quot;CENTER_RIGHT&quot; contentDisplay=&quot;CENTER&quot; text=&quot;Credits:&quot; GridPane.columnIndex=&quot;3&quot; GridPane.rowIndex=&quot;1&quot;&gt;\r\n                           &lt;font&gt;\r\n                              &lt;Font name=&quot;Eras Demi ITC&quot; size=&quot;21.0&quot; /&gt;\r\n                           &lt;/font&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                           &lt;padding&gt;\r\n                              &lt;Insets bottom=&quot;10.0&quot; left=&quot;10.0&quot; right=&quot;15.0&quot; top=&quot;10.0&quot; /&gt;\r\n                           &lt;/padding&gt;\r\n                        &lt;/Label&gt;\r\n                        &lt;Label alignment=&quot;CENTER_RIGHT&quot; contentDisplay=&quot;CENTER&quot; text=&quot;Credits:&quot; GridPane.columnIndex=&quot;3&quot; GridPane.rowIndex=&quot;2&quot;&gt;\r\n                           &lt;padding&gt;\r\n                              &lt;Insets bottom=&quot;10.0&quot; left=&quot;10.0&quot; right=&quot;15.0&quot; top=&quot;10.0&quot; /&gt;\r\n                           &lt;/padding&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                           &lt;font&gt;\r\n                              &lt;Font name=&quot;Eras Demi ITC&quot; size=&quot;21.0&quot; /&gt;\r\n                           &lt;/font&gt;\r\n                        &lt;/Label&gt;\r\n                        &lt;Label alignment=&quot;CENTER_RIGHT&quot; contentDisplay=&quot;CENTER&quot; text=&quot;Credits:&quot; GridPane.columnIndex=&quot;3&quot; GridPane.rowIndex=&quot;3&quot;&gt;\r\n                           &lt;font&gt;\r\n                              &lt;Font name=&quot;Eras Demi ITC&quot; size=&quot;21.0&quot; /&gt;\r\n                           &lt;/font&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                           &lt;padding&gt;\r\n                              &lt;Insets bottom=&quot;10.0&quot; left=&quot;10.0&quot; right=&quot;15.0&quot; top=&quot;10.0&quot; /&gt;\r\n                           &lt;/padding&gt;\r\n                        &lt;/Label&gt;\r\n                        &lt;Label alignment=&quot;CENTER_RIGHT&quot; contentDisplay=&quot;CENTER&quot; text=&quot;Credits:&quot; GridPane.columnIndex=&quot;3&quot; GridPane.rowIndex=&quot;4&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                           &lt;padding&gt;\r\n                              &lt;Insets bottom=&quot;10.0&quot; left=&quot;10.0&quot; right=&quot;15.0&quot; top=&quot;10.0&quot; /&gt;\r\n                           &lt;/padding&gt;\r\n                           &lt;font&gt;\r\n                              &lt;Font name=&quot;Eras Demi ITC&quot; size=&quot;21.0&quot; /&gt;\r\n                           &lt;/font&gt;\r\n                        &lt;/Label&gt;\r\n                        &lt;TextField fx:id=&quot;credit1&quot; promptText=&quot;Course credit&quot; GridPane.columnIndex=&quot;4&quot; GridPane.rowIndex=&quot;1&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/TextField&gt;\r\n                        &lt;TextField fx:id=&quot;credit2&quot; promptText=&quot;Course credit&quot; GridPane.columnIndex=&quot;4&quot; GridPane.rowIndex=&quot;2&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/TextField&gt;\r\n                        &lt;TextField fx:id=&quot;credit3&quot; promptText=&quot;Course credit&quot; GridPane.columnIndex=&quot;4&quot; GridPane.rowIndex=&quot;3&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/TextField&gt;\r\n                        &lt;TextField fx:id=&quot;credit4&quot; promptText=&quot;Course credit&quot; GridPane.columnIndex=&quot;4&quot; GridPane.rowIndex=&quot;4&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets bottom=&quot;5.0&quot; left=&quot;5.0&quot; right=&quot;5.0&quot; top=&quot;5.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/TextField&gt;\r\n                     &lt;/children&gt;\r\n                     &lt;opaqueInsets&gt;\r\n                        &lt;Insets /&gt;\r\n                       &lt;/opaqueInsets&gt;\r\n                     &lt;padding&gt;\r\n                        &lt;Insets bottom=&quot;20.0&quot; left=&quot;20.0&quot; right=&quot;20.0&quot; top=&quot;20.0&quot; /&gt;\r\n                     &lt;/padding&gt;\r\n                  &lt;/GridPane&gt;\r\n               &lt;/content&gt;\r\n            &lt;/ScrollPane&gt;\r\n            &lt;Button fx:id=&quot;AddAnotherCourseButton&quot; alignment=&quot;BOTTOM_CENTER&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#AddAnotherCourseClicked&quot; text=&quot;ADD ANOTHER COURSE&quot;&gt;\r\n               &lt;font&gt;\r\n                  &lt;Font name=&quot;Book Antiqua Bold&quot; size=&quot;15.0&quot; /&gt;\r\n               &lt;/font&gt;\r\n            &lt;/Button&gt;\r\n         &lt;/children&gt;\r\n      &lt;/AnchorPane&gt;\r\n    &lt;/center&gt;\r\n    &lt;top&gt;\r\n      &lt;MenuBar fx:id=&quot;SubmitStageMenuBar&quot; BorderPane.alignment=&quot;CENTER&quot;&gt;\r\n        &lt;menus&gt;\r\n            &lt;Menu mnemonicParsing=&quot;false&quot; text=&quot;File&quot;&gt;\r\n              &lt;items&gt;\r\n                &lt;MenuItem mnemonicParsing=&quot;false&quot; text=&quot;Save&quot; /&gt;\r\n                  &lt;MenuItem mnemonicParsing=&quot;false&quot; text=&quot;Load&quot; /&gt;\r\n                  &lt;SeparatorMenuItem mnemonicParsing=&quot;false&quot; /&gt;\r\n                  &lt;MenuItem mnemonicParsing=&quot;false&quot; text=&quot;Exit&quot; /&gt;\r\n              &lt;/items&gt;\r\n            &lt;/Menu&gt;\r\n            &lt;Menu mnemonicParsing=&quot;false&quot; text=&quot;About&quot;&gt;\r\n              &lt;items&gt;\r\n                &lt;MenuItem mnemonicParsing=&quot;false&quot; text=&quot;Action 1&quot; /&gt;\r\n              &lt;/items&gt;\r\n            &lt;/Menu&gt;\r\n        &lt;/menus&gt;\r\n      &lt;/MenuBar&gt;\r\n    &lt;/top&gt;\r\n    &lt;/BorderPane&gt;\r\n\r\nI have a button that whenever it&#39;s clicked, a row with elements is added to the `GridPane`.\r\n\r\n    public void AddAnotherCourseClicked(){\r\n\r\n        int rowCount = returnMaxRow();\r\n\r\n        TextField courseName = new TextField();\r\n        courseName.setPromptText(&quot;Course name&quot;);\r\n        submitLayout.setMargin(courseName, new Insets(5, 5, 5, 5));\r\n\r\n        Label gradeLabel = new Label(&quot;Grade:&quot;);\r\n        gradeLabel.setFont(Font.font(&quot;Eras Demi ITC&quot;, 21));\r\n        submitLayout.setMargin(gradeLabel, new Insets(5, 5, 5, 5));\r\n        gradeLabel.setPadding(new Insets(10, 10, 15, 10));\r\n\r\n        TextField gradeReceived = new TextField();\r\n        gradeReceived.setPromptText(&quot;Enter the grade&quot;);\r\n        submitLayout.setMargin(gradeReceived, new Insets(5, 5, 5, 5));\r\n\r\n        Label creditsLabel = new Label(&quot;Credits:&quot;);\r\n        creditsLabel.setFont(Font.font(&quot;Eras Demi ITC&quot;, 21));\r\n        submitLayout.setMargin(gradeLabel, new Insets(5, 5, 5, 5));\r\n        creditsLabel.setPadding(new Insets(10, 10, 15, 10));\r\n\r\n        TextField courseCredit = new TextField();\r\n        courseCredit.setPromptText(&quot;Course credit&quot;);\r\n        submitLayout.setMargin(courseCredit, new Insets(5, 5, 5, 5));\r\n\r\n        submitLayout.addRow(rowCount+1, courseName, gradeLabel, gradeReceived, creditsLabel, courseCredit);\r\n    }\r\n\r\n    private int returnMaxRow(){\r\n        int rowNum, lastRow = 0;\r\n        for(Node element : submitLayout.getChildren()){\r\n            rowNum = submitLayout.getRowIndex(element);\r\n            lastRow = (rowNum &gt; lastRow ? rowNum : lastRow);\r\n        }\r\n        return lastRow;\r\n    }\r\n\r\nThus far, the `ScrollBar` is added however, when i press the button, the rows are simply clustered together, and the `ScrollBar` doesn&#39;t extend, its height remains the same. ","title":"GridPane within a ScrollPane","body":"<p>I wrapped a <code>GridPane</code> in a <code>ScrollPane</code> to be able to scroll it when new rows are added to the Grid.</p>\n\n<pre><code>&lt;BorderPane fx:id=\"SubmitStageBorderPane\" \nstylesheets=\"@../SubmitStageStyles.css\" \nxmlns=\"http://javafx.com/javafx/8.0.112-ea\" \nxmlns:fx=\"http://javafx.com/fxml/1\" fx:controller=\"sample.SubmitStage\"&gt;\n   &lt;center&gt;\n  &lt;AnchorPane fx:id=\"SubmitStageAnchorPane\"&gt;\n     &lt;children&gt;\n        &lt;ScrollPane fx:id=\"GridscPane\" hbarPolicy=\"NEVER\" vbarPolicy=\"ALWAYS\"&gt;\n           &lt;content&gt;\n              &lt;GridPane fx:id=\"submitLayout\" maxHeight=\"1080.0\" maxWidth=\"-Infinity\" minHeight=\"-Infinity\" minWidth=\"-Infinity\" prefHeight=\"500.0\" prefWidth=\"700.0\" stylesheets=\"@../SubmitStageStyles.css\"&gt;\n                &lt;columnConstraints&gt;\n                  &lt;ColumnConstraints hgrow=\"SOMETIMES\" minWidth=\"10.0\" prefWidth=\"100.0\" /&gt;\n                    &lt;ColumnConstraints hgrow=\"SOMETIMES\" minWidth=\"10.0\" prefWidth=\"100.0\" /&gt;\n                    &lt;ColumnConstraints hgrow=\"SOMETIMES\" minWidth=\"10.0\" prefWidth=\"100.0\" /&gt;\n                    &lt;ColumnConstraints hgrow=\"SOMETIMES\" minWidth=\"10.0\" prefWidth=\"100.0\" /&gt;\n                    &lt;ColumnConstraints hgrow=\"SOMETIMES\" minWidth=\"10.0\" prefWidth=\"100.0\" /&gt;\n                &lt;/columnConstraints&gt;\n                &lt;rowConstraints&gt;\n                    &lt;RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" /&gt;\n                  &lt;RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" /&gt;\n                              &lt;RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" /&gt;\n                  &lt;RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" /&gt;\n                    &lt;RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" /&gt;\n                    &lt;RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" /&gt;\n                    &lt;RowConstraints minHeight=\"10.0\" prefHeight=\"30.0\" vgrow=\"SOMETIMES\" /&gt;\n                &lt;/rowConstraints&gt;\n                 &lt;children&gt;\n                    &lt;TextField fx:id=\"course1\" promptText=\"Course name\" GridPane.rowIndex=\"1\"&gt;\n                       &lt;opaqueInsets&gt;\n                          &lt;Insets /&gt;\n                       &lt;/opaqueInsets&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                    &lt;/TextField&gt;\n                    &lt;TextField fx:id=\"course2\" promptText=\"Cource name\" GridPane.rowIndex=\"2\"&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                    &lt;/TextField&gt;\n                    &lt;TextField fx:id=\"course3\" promptText=\"Course name\" GridPane.rowIndex=\"3\"&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                    &lt;/TextField&gt;\n                    &lt;TextField fx:id=\"course4\" promptText=\"Course name\" GridPane.rowIndex=\"4\"&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                    &lt;/TextField&gt;\n                    &lt;Label alignment=\"CENTER_RIGHT\" contentDisplay=\"CENTER\" text=\"Grade:\" GridPane.columnIndex=\"1\" GridPane.rowIndex=\"1\"&gt;\n                       &lt;font&gt;\n                          &lt;Font name=\"Eras Demi ITC\" size=\"21.0\" /&gt;\n                       &lt;/font&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                       &lt;padding&gt;\n                          &lt;Insets bottom=\"10.0\" left=\"10.0\" right=\"15.0\" top=\"10.0\" /&gt;\n                       &lt;/padding&gt;\n                    &lt;/Label&gt;\n                    &lt;Label alignment=\"CENTER_RIGHT\" contentDisplay=\"CENTER\" text=\"Grade:\" GridPane.columnIndex=\"1\" GridPane.rowIndex=\"2\"&gt;\n                       &lt;font&gt;\n                          &lt;Font name=\"Eras Demi ITC\" size=\"21.0\" /&gt;\n                       &lt;/font&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                       &lt;padding&gt;\n                          &lt;Insets bottom=\"10.0\" left=\"10.0\" right=\"15.0\" top=\"10.0\" /&gt;\n                       &lt;/padding&gt;\n                    &lt;/Label&gt;\n                    &lt;Label alignment=\"CENTER_RIGHT\" contentDisplay=\"CENTER\" text=\"Grade:\" GridPane.columnIndex=\"1\" GridPane.rowIndex=\"3\"&gt;\n                       &lt;padding&gt;\n                          &lt;Insets bottom=\"10.0\" left=\"10.0\" right=\"15.0\" top=\"10.0\" /&gt;\n                       &lt;/padding&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                       &lt;font&gt;\n                          &lt;Font name=\"Eras Demi ITC\" size=\"21.0\" /&gt;\n                       &lt;/font&gt;\n                    &lt;/Label&gt;\n                    &lt;Label alignment=\"CENTER_RIGHT\" contentDisplay=\"CENTER\" text=\"Grade:\" GridPane.columnIndex=\"1\" GridPane.rowIndex=\"4\"&gt;\n                       &lt;font&gt;\n                          &lt;Font name=\"Eras Demi ITC\" size=\"21.0\" /&gt;\n                       &lt;/font&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                       &lt;padding&gt;\n                          &lt;Insets bottom=\"10.0\" left=\"10.0\" right=\"15.0\" top=\"10.0\" /&gt;\n                       &lt;/padding&gt;\n                    &lt;/Label&gt;\n                    &lt;TextField fx:id=\"grade1\" promptText=\"Enter the grade\" GridPane.columnIndex=\"2\" GridPane.rowIndex=\"1\"&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                    &lt;/TextField&gt;\n                    &lt;TextField fx:id=\"grade2\" promptText=\"Enter the grade\" GridPane.columnIndex=\"2\" GridPane.rowIndex=\"2\"&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                    &lt;/TextField&gt;\n                    &lt;TextField fx:id=\"grade3\" promptText=\"Enter the grade\" GridPane.columnIndex=\"2\" GridPane.rowIndex=\"3\"&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                    &lt;/TextField&gt;\n                    &lt;TextField fx:id=\"grade4\" promptText=\"Enter the grade\" GridPane.columnIndex=\"2\" GridPane.rowIndex=\"4\"&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                    &lt;/TextField&gt;\n                    &lt;Label alignment=\"CENTER_RIGHT\" contentDisplay=\"CENTER\" text=\"Credits:\" GridPane.columnIndex=\"3\" GridPane.rowIndex=\"1\"&gt;\n                       &lt;font&gt;\n                          &lt;Font name=\"Eras Demi ITC\" size=\"21.0\" /&gt;\n                       &lt;/font&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                       &lt;padding&gt;\n                          &lt;Insets bottom=\"10.0\" left=\"10.0\" right=\"15.0\" top=\"10.0\" /&gt;\n                       &lt;/padding&gt;\n                    &lt;/Label&gt;\n                    &lt;Label alignment=\"CENTER_RIGHT\" contentDisplay=\"CENTER\" text=\"Credits:\" GridPane.columnIndex=\"3\" GridPane.rowIndex=\"2\"&gt;\n                       &lt;padding&gt;\n                          &lt;Insets bottom=\"10.0\" left=\"10.0\" right=\"15.0\" top=\"10.0\" /&gt;\n                       &lt;/padding&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                       &lt;font&gt;\n                          &lt;Font name=\"Eras Demi ITC\" size=\"21.0\" /&gt;\n                       &lt;/font&gt;\n                    &lt;/Label&gt;\n                    &lt;Label alignment=\"CENTER_RIGHT\" contentDisplay=\"CENTER\" text=\"Credits:\" GridPane.columnIndex=\"3\" GridPane.rowIndex=\"3\"&gt;\n                       &lt;font&gt;\n                          &lt;Font name=\"Eras Demi ITC\" size=\"21.0\" /&gt;\n                       &lt;/font&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                       &lt;padding&gt;\n                          &lt;Insets bottom=\"10.0\" left=\"10.0\" right=\"15.0\" top=\"10.0\" /&gt;\n                       &lt;/padding&gt;\n                    &lt;/Label&gt;\n                    &lt;Label alignment=\"CENTER_RIGHT\" contentDisplay=\"CENTER\" text=\"Credits:\" GridPane.columnIndex=\"3\" GridPane.rowIndex=\"4\"&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                       &lt;padding&gt;\n                          &lt;Insets bottom=\"10.0\" left=\"10.0\" right=\"15.0\" top=\"10.0\" /&gt;\n                       &lt;/padding&gt;\n                       &lt;font&gt;\n                          &lt;Font name=\"Eras Demi ITC\" size=\"21.0\" /&gt;\n                       &lt;/font&gt;\n                    &lt;/Label&gt;\n                    &lt;TextField fx:id=\"credit1\" promptText=\"Course credit\" GridPane.columnIndex=\"4\" GridPane.rowIndex=\"1\"&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                    &lt;/TextField&gt;\n                    &lt;TextField fx:id=\"credit2\" promptText=\"Course credit\" GridPane.columnIndex=\"4\" GridPane.rowIndex=\"2\"&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                    &lt;/TextField&gt;\n                    &lt;TextField fx:id=\"credit3\" promptText=\"Course credit\" GridPane.columnIndex=\"4\" GridPane.rowIndex=\"3\"&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                    &lt;/TextField&gt;\n                    &lt;TextField fx:id=\"credit4\" promptText=\"Course credit\" GridPane.columnIndex=\"4\" GridPane.rowIndex=\"4\"&gt;\n                       &lt;GridPane.margin&gt;\n                          &lt;Insets bottom=\"5.0\" left=\"5.0\" right=\"5.0\" top=\"5.0\" /&gt;\n                       &lt;/GridPane.margin&gt;\n                    &lt;/TextField&gt;\n                 &lt;/children&gt;\n                 &lt;opaqueInsets&gt;\n                    &lt;Insets /&gt;\n                   &lt;/opaqueInsets&gt;\n                 &lt;padding&gt;\n                    &lt;Insets bottom=\"20.0\" left=\"20.0\" right=\"20.0\" top=\"20.0\" /&gt;\n                 &lt;/padding&gt;\n              &lt;/GridPane&gt;\n           &lt;/content&gt;\n        &lt;/ScrollPane&gt;\n        &lt;Button fx:id=\"AddAnotherCourseButton\" alignment=\"BOTTOM_CENTER\" mnemonicParsing=\"false\" onAction=\"#AddAnotherCourseClicked\" text=\"ADD ANOTHER COURSE\"&gt;\n           &lt;font&gt;\n              &lt;Font name=\"Book Antiqua Bold\" size=\"15.0\" /&gt;\n           &lt;/font&gt;\n        &lt;/Button&gt;\n     &lt;/children&gt;\n  &lt;/AnchorPane&gt;\n&lt;/center&gt;\n&lt;top&gt;\n  &lt;MenuBar fx:id=\"SubmitStageMenuBar\" BorderPane.alignment=\"CENTER\"&gt;\n    &lt;menus&gt;\n        &lt;Menu mnemonicParsing=\"false\" text=\"File\"&gt;\n          &lt;items&gt;\n            &lt;MenuItem mnemonicParsing=\"false\" text=\"Save\" /&gt;\n              &lt;MenuItem mnemonicParsing=\"false\" text=\"Load\" /&gt;\n              &lt;SeparatorMenuItem mnemonicParsing=\"false\" /&gt;\n              &lt;MenuItem mnemonicParsing=\"false\" text=\"Exit\" /&gt;\n          &lt;/items&gt;\n        &lt;/Menu&gt;\n        &lt;Menu mnemonicParsing=\"false\" text=\"About\"&gt;\n          &lt;items&gt;\n            &lt;MenuItem mnemonicParsing=\"false\" text=\"Action 1\" /&gt;\n          &lt;/items&gt;\n        &lt;/Menu&gt;\n    &lt;/menus&gt;\n  &lt;/MenuBar&gt;\n&lt;/top&gt;\n&lt;/BorderPane&gt;\n</code></pre>\n\n<p>I have a button that whenever it's clicked, a row with elements is added to the <code>GridPane</code>.</p>\n\n<pre><code>public void AddAnotherCourseClicked(){\n\n    int rowCount = returnMaxRow();\n\n    TextField courseName = new TextField();\n    courseName.setPromptText(\"Course name\");\n    submitLayout.setMargin(courseName, new Insets(5, 5, 5, 5));\n\n    Label gradeLabel = new Label(\"Grade:\");\n    gradeLabel.setFont(Font.font(\"Eras Demi ITC\", 21));\n    submitLayout.setMargin(gradeLabel, new Insets(5, 5, 5, 5));\n    gradeLabel.setPadding(new Insets(10, 10, 15, 10));\n\n    TextField gradeReceived = new TextField();\n    gradeReceived.setPromptText(\"Enter the grade\");\n    submitLayout.setMargin(gradeReceived, new Insets(5, 5, 5, 5));\n\n    Label creditsLabel = new Label(\"Credits:\");\n    creditsLabel.setFont(Font.font(\"Eras Demi ITC\", 21));\n    submitLayout.setMargin(gradeLabel, new Insets(5, 5, 5, 5));\n    creditsLabel.setPadding(new Insets(10, 10, 15, 10));\n\n    TextField courseCredit = new TextField();\n    courseCredit.setPromptText(\"Course credit\");\n    submitLayout.setMargin(courseCredit, new Insets(5, 5, 5, 5));\n\n    submitLayout.addRow(rowCount+1, courseName, gradeLabel, gradeReceived, creditsLabel, courseCredit);\n}\n\nprivate int returnMaxRow(){\n    int rowNum, lastRow = 0;\n    for(Node element : submitLayout.getChildren()){\n        rowNum = submitLayout.getRowIndex(element);\n        lastRow = (rowNum &gt; lastRow ? rowNum : lastRow);\n    }\n    return lastRow;\n}\n</code></pre>\n\n<p>Thus far, the <code>ScrollBar</code> is added however, when i press the button, the rows are simply clustered together, and the <code>ScrollBar</code> doesn't extend, its height remains the same. </p>\n"},{"tags":["java","image","swing"],"comments":[{"owner":{"account_id":2762232,"reputation":65,"user_id":2378888,"display_name":"Alex Popov"},"score":0,"creation_date":1671961718,"post_id":74912581,"comment_id":132201229,"body_markdown":"Without the repaint calls in ImageObserver it is also not working, of course","body":"Without the repaint calls in ImageObserver it is also not working, of course"},{"owner":{"account_id":2762232,"reputation":65,"user_id":2378888,"display_name":"Alex Popov"},"score":0,"creation_date":1671963186,"post_id":74912581,"comment_id":132201397,"body_markdown":"Also it does not work with a local image file for some reason","body":"Also it does not work with a local image file for some reason"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1671982905,"post_id":74912581,"comment_id":132204011,"body_markdown":"Don&#39;t use empty catch blocks. How will you ever know when you have an Exception?","body":"Don&#39;t use empty catch blocks. How will you ever know when you have an Exception?"},{"owner":{"account_id":2762232,"reputation":65,"user_id":2378888,"display_name":"Alex Popov"},"score":0,"creation_date":1672007862,"post_id":74912581,"comment_id":132207464,"body_markdown":"There are no exceptions there, I checked the code with the debugger several times.","body":"There are no exceptions there, I checked the code with the debugger several times."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1672024015,"post_id":74912581,"comment_id":132208934,"body_markdown":"When you add/remove components from a visible frame you need to invoke revalidate() and repaint() on the panel. This will invoke the layout manager and give the component a size/location. Or, a simpler solution is to add all the components to the frame BEFORE making the frame visible. Also, I don&#39;t think you need 1) Thread.sleep or 2) the ImageObserver. Check out: https://stackoverflow.com/a/6296381/131872 which is able to get the width/height of an image loaded over the internet without the above code.","body":"When you add/remove components from a visible frame you need to invoke revalidate() and repaint() on the panel. This will invoke the layout manager and give the component a size/location. Or, a simpler solution is to add all the components to the frame BEFORE making the frame visible. Also, I don&#39;t think you need 1) Thread.sleep or 2) the ImageObserver. Check out: <a href=\"https://stackoverflow.com/a/6296381/131872\">stackoverflow.com/a/6296381/131872</a> which is able to get the width/height of an image loaded over the internet without the above code."},{"owner":{"account_id":2762232,"reputation":65,"user_id":2378888,"display_name":"Alex Popov"},"score":0,"creation_date":1672292856,"post_id":74912581,"comment_id":132259872,"body_markdown":"Thanks for your help! I managed to solve the problem by adding `panel.doLayout()` at the end of my code. Also I removed `sleep()`, because it does not help at all anyway. Is my solution correct, or is it still bad?","body":"Thanks for your help! I managed to solve the problem by adding <code>panel.doLayout()</code> at the end of my code. Also I removed <code>sleep()</code>, because it does not help at all anyway. Is my solution correct, or is it still bad?"},{"owner":{"account_id":2762232,"reputation":65,"user_id":2378888,"display_name":"Alex Popov"},"score":0,"creation_date":1672292973,"post_id":74912581,"comment_id":132259888,"body_markdown":"Yes, I also tried adding them before, and I usually do it this way, but this time I needed to read user&#39;s screen dimensions to do the overlay layout. I guess there is another way to get them, but using getBounds() was quick and dirty way :)","body":"Yes, I also tried adding them before, and I usually do it this way, but this time I needed to read user&#39;s screen dimensions to do the overlay layout. I guess there is another way to get them, but using getBounds() was quick and dirty way :)"},{"owner":{"account_id":2762232,"reputation":65,"user_id":2378888,"display_name":"Alex Popov"},"score":0,"creation_date":1672372772,"post_id":74912581,"comment_id":132277704,"body_markdown":"&quot;When you add/remove components from a visible frame you need to invoke revalidate() and repaint() on the panel&quot; - can you post it as an answer, please? I think it will be useful for someone else here.","body":"&quot;When you add/remove components from a visible frame you need to invoke revalidate() and repaint() on the panel&quot; - can you post it as an answer, please? I think it will be useful for someone else here."}],"answers":[{"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1672377679,"post_id":74957992,"comment_id":132278298,"body_markdown":"My suggestion was to invoke revalidate() and repaint(). If you read the API for the doLayout() method it will state that &quot;most programs should not invoke this method directly&quot;. You should read the [Swing tutorial](https://docs.oracle.com/javase/tutorial/uiswing/TOC.html) for Swing basics. It contains lots of working examples to help you better structure your code. For example: 1) don&#39;t extend JFrame 2) add components to the GUI BEFORE the frame is made visble. 3) Create the components on the Event Dispatch Thread (EDT). 4) Use Key Bindings, not a KeyListener.","body":"My suggestion was to invoke revalidate() and repaint(). If you read the API for the doLayout() method it will state that &quot;most programs should not invoke this method directly&quot;. You should read the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/TOC.html\" rel=\"nofollow noreferrer\">Swing tutorial</a> for Swing basics. It contains lots of working examples to help you better structure your code. For example: 1) don&#39;t extend JFrame 2) add components to the GUI BEFORE the frame is made visble. 3) Create the components on the Event Dispatch Thread (EDT). 4) Use Key Bindings, not a KeyListener."}],"tags":[],"owner":{"account_id":2762232,"reputation":65,"user_id":2378888,"display_name":"Alex Popov"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672372563,"creation_date":1672372563,"answer_id":74957992,"question_id":74912581,"body_markdown":"\r\nThe solution is to replace this block of code\r\n\r\n    try {\r\n        Thread.sleep(100);\r\n        viewer.repaint();\r\n    } catch (InterruptedException ex) {}\r\n\r\nwith this one:\r\n\r\n    panel.doLayout();\r\n\r\nOr, which is much better in terms of &quot;show up&quot; speed, just move the code to the constructor:\r\n\r\n    public Overlay() {\r\n        Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();\r\n        int width = (int) (dim.width * 0.7 + 0.4);\r\n        int height = (int) (imgWidth / 16 * 9 + 0.4);\r\n        //System.err.println(width + &quot;x&quot; + height);\r\n        ImageViewer viewer = new ImageViewer(&quot;http://popov654.pp.ru/copybox/image.jpg&quot;, width, height);\r\n        panel.setLayout(new BorderLayout());\r\n        panel.add(viewer);\r\n        ...\r\n    }","title":"A scaled image is not appearing in Swing after JFrame is set visible","body":"<p>The solution is to replace this block of code</p>\n<pre><code>try {\n    Thread.sleep(100);\n    viewer.repaint();\n} catch (InterruptedException ex) {}\n</code></pre>\n<p>with this one:</p>\n<pre><code>panel.doLayout();\n</code></pre>\n<p>Or, which is much better in terms of &quot;show up&quot; speed, just move the code to the constructor:</p>\n<pre><code>public Overlay() {\n    Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();\n    int width = (int) (dim.width * 0.7 + 0.4);\n    int height = (int) (imgWidth / 16 * 9 + 0.4);\n    //System.err.println(width + &quot;x&quot; + height);\n    ImageViewer viewer = new ImageViewer(&quot;http://popov654.pp.ru/copybox/image.jpg&quot;, width, height);\n    panel.setLayout(new BorderLayout());\n    panel.add(viewer);\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":2762232,"reputation":65,"user_id":2378888,"display_name":"Alex Popov"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1672375580,"accepted_answer_id":74957992,"answer_count":1,"score":0,"last_activity_date":1672372685,"creation_date":1671961539,"question_id":74912581,"body_markdown":"I&#39;m trying to make a fullscreen image viewer for my messenger app.\r\n\r\nHowever, I can only see the image only after minimizing and restoring the window again. I don&#39;t understand why it is happening, because when I use the debugger I minimize the app window, and after I restore it back the image is in place. Also I tried setting some `println`s to the console, and from what I see the overridden `paintComponent()` method is not even called after the window is shown.\r\n\r\nHere is my code:\r\n\r\n    import java.awt.event.KeyEvent;\r\n    import java.io.IOException;\r\n    import java.net.MalformedURLException;\r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.awt.event.KeyListener;\r\n    import java.awt.image.ImageObserver;\r\n    import java.net.URL;\r\n    import javax.imageio.ImageIO;\r\n\r\n    public class Overlay extends JFrame {\r\n\r\n        public Overlay() {\r\n            super();\r\n            this.setUndecorated(true);\r\n            getRootPane().setOpaque(true);\r\n            panel = new JPanel();\r\n            panel.setBackground(new Color(12,12,12));\r\n            setLayout(new CardLayout());\r\n            add(panel);\r\n            panel.setBorder(BorderFactory.createEmptyBorder(90, 90, 90, 90));\r\n\r\n            this.addKeyListener(new KeyListener() {\r\n\r\n                @Override\r\n                public void keyTyped(KeyEvent e) {}\r\n\r\n                @Override\r\n                public void keyPressed(KeyEvent e) {\r\n                    if (e.getKeyCode() == KeyEvent.VK_ESCAPE) {\r\n                        setVisible(false);\r\n                        dispose();\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void keyReleased(KeyEvent e) {}\r\n            });\r\n        }\r\n\r\n        public class ImageViewer extends JPanel {\r\n\r\n            public ImageViewer(String src) {\r\n                this.src = src;\r\n                setOpaque(false);\r\n                try {\r\n                    img = ImageIO.read(new URL(src));\r\n                    int imgHeight = img.getHeight(observer);\r\n                    if (imgHeight &gt; 0) {\r\n                        w = (int) (h * ((double) img.getWidth(null) / imgHeight));\r\n                    }\r\n                } catch (IOException ex) {}\r\n            }\r\n\r\n            public ImageViewer(String src, int width, int height) {\r\n                setOpaque(false);\r\n                setPreferredSize(new Dimension(width, height));\r\n                setMinimumSize(new Dimension(width, height));\r\n                setMaximumSize(new Dimension(width, height));\r\n                w = width;\r\n                h = height;\r\n                this.src = src;\r\n                try {\r\n                    img = ImageIO.read(new URL(src));\r\n                    int imgHeight = img.getHeight(observer);\r\n                    if (imgHeight &gt; 0) {\r\n                        w = (int) (h * ((double) img.getWidth(null) / imgHeight));\r\n                    }\r\n                } catch (IOException ex) {}\r\n            }\r\n\r\n            ImageObserver observer = new ImageObserver() {\r\n                @Override\r\n                public boolean imageUpdate(Image img, int infoflags, int x, int y, int width, int height) {\r\n                    if (height == 0) return false;\r\n                    w = (int) (h * ((double) width / height));\r\n                    if (getParent() != null) getParent().repaint();\r\n                    return true;\r\n                }\r\n            };\r\n\r\n            @Override\r\n            public void paintComponent(Graphics g) {\r\n                super.paintComponent(g);\r\n                if (img == null) return;\r\n                Graphics2D g2d = (Graphics2D) g;\r\n                img.getHeight(observer);\r\n                int x = (int) (getWidth() - w) / 2;\r\n                int y = (int) (getHeight() - h) / 2;\r\n                System.out.println(x + &quot;, &quot; + y);\r\n                g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\r\n                g2d.drawImage(img, x, y, w, h, null);\r\n            }\r\n\r\n            private int w;\r\n            private int h;\r\n\r\n            private Image img;\r\n            private String src = null;\r\n        }\r\n\r\n        public void showContent() {\r\n            try {\r\n                GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().setFullScreenWindow(this);\r\n                setVisible(true);\r\n                SwingUtilities.invokeLater(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        int width = (int) (getBounds().getWidth() * 0.7 + 0.4);\r\n                        int height = (int) (width / 16 * 9 + 0.4);\r\n                        System.err.println(width + &quot;x&quot; + height);\r\n                        ImageViewer viewer = new ImageViewer(&quot;http://popov654.pp.ru/copybox/image.jpg&quot;, width, height);\r\n                        panel.setLayout(new BorderLayout());\r\n                        panel.add(viewer);\r\n                        try {\r\n                            Thread.sleep(100);\r\n                            viewer.repaint();\r\n                        } catch (InterruptedException ex) {}\r\n                    }\r\n                });\r\n            } catch (Exception error) {}\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            new Overlay().showContent();\r\n        }\r\n\r\n        JPanel panel;\r\n    }","title":"A scaled image is not appearing in Swing after JFrame is set visible","body":"<p>I'm trying to make a fullscreen image viewer for my messenger app.</p>\n<p>However, I can only see the image only after minimizing and restoring the window again. I don't understand why it is happening, because when I use the debugger I minimize the app window, and after I restore it back the image is in place. Also I tried setting some <code>println</code>s to the console, and from what I see the overridden <code>paintComponent()</code> method is not even called after the window is shown.</p>\n<p>Here is my code:</p>\n<pre><code>import java.awt.event.KeyEvent;\nimport java.io.IOException;\nimport java.net.MalformedURLException;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.KeyListener;\nimport java.awt.image.ImageObserver;\nimport java.net.URL;\nimport javax.imageio.ImageIO;\n\npublic class Overlay extends JFrame {\n\n    public Overlay() {\n        super();\n        this.setUndecorated(true);\n        getRootPane().setOpaque(true);\n        panel = new JPanel();\n        panel.setBackground(new Color(12,12,12));\n        setLayout(new CardLayout());\n        add(panel);\n        panel.setBorder(BorderFactory.createEmptyBorder(90, 90, 90, 90));\n\n        this.addKeyListener(new KeyListener() {\n\n            @Override\n            public void keyTyped(KeyEvent e) {}\n\n            @Override\n            public void keyPressed(KeyEvent e) {\n                if (e.getKeyCode() == KeyEvent.VK_ESCAPE) {\n                    setVisible(false);\n                    dispose();\n                }\n            }\n\n            @Override\n            public void keyReleased(KeyEvent e) {}\n        });\n    }\n\n    public class ImageViewer extends JPanel {\n\n        public ImageViewer(String src) {\n            this.src = src;\n            setOpaque(false);\n            try {\n                img = ImageIO.read(new URL(src));\n                int imgHeight = img.getHeight(observer);\n                if (imgHeight &gt; 0) {\n                    w = (int) (h * ((double) img.getWidth(null) / imgHeight));\n                }\n            } catch (IOException ex) {}\n        }\n\n        public ImageViewer(String src, int width, int height) {\n            setOpaque(false);\n            setPreferredSize(new Dimension(width, height));\n            setMinimumSize(new Dimension(width, height));\n            setMaximumSize(new Dimension(width, height));\n            w = width;\n            h = height;\n            this.src = src;\n            try {\n                img = ImageIO.read(new URL(src));\n                int imgHeight = img.getHeight(observer);\n                if (imgHeight &gt; 0) {\n                    w = (int) (h * ((double) img.getWidth(null) / imgHeight));\n                }\n            } catch (IOException ex) {}\n        }\n\n        ImageObserver observer = new ImageObserver() {\n            @Override\n            public boolean imageUpdate(Image img, int infoflags, int x, int y, int width, int height) {\n                if (height == 0) return false;\n                w = (int) (h * ((double) width / height));\n                if (getParent() != null) getParent().repaint();\n                return true;\n            }\n        };\n\n        @Override\n        public void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            if (img == null) return;\n            Graphics2D g2d = (Graphics2D) g;\n            img.getHeight(observer);\n            int x = (int) (getWidth() - w) / 2;\n            int y = (int) (getHeight() - h) / 2;\n            System.out.println(x + &quot;, &quot; + y);\n            g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n            g2d.drawImage(img, x, y, w, h, null);\n        }\n\n        private int w;\n        private int h;\n\n        private Image img;\n        private String src = null;\n    }\n\n    public void showContent() {\n        try {\n            GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().setFullScreenWindow(this);\n            setVisible(true);\n            SwingUtilities.invokeLater(new Runnable() {\n                @Override\n                public void run() {\n                    int width = (int) (getBounds().getWidth() * 0.7 + 0.4);\n                    int height = (int) (width / 16 * 9 + 0.4);\n                    System.err.println(width + &quot;x&quot; + height);\n                    ImageViewer viewer = new ImageViewer(&quot;http://popov654.pp.ru/copybox/image.jpg&quot;, width, height);\n                    panel.setLayout(new BorderLayout());\n                    panel.add(viewer);\n                    try {\n                        Thread.sleep(100);\n                        viewer.repaint();\n                    } catch (InterruptedException ex) {}\n                }\n            });\n        } catch (Exception error) {}\n    }\n\n    public static void main(String[] args) {\n        new Overlay().showContent();\n    }\n\n    JPanel panel;\n}\n</code></pre>\n"},{"tags":["java","httpresponse"],"answers":[{"tags":[],"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672372184,"creation_date":1672372184,"answer_id":74957976,"question_id":74957266,"body_markdown":"&gt;so am I doing anything wrong ?\r\n\r\nThere is nothing wrong here, `HttpResponse` is the interface. So [`response.getClass()`][1] is fine to return any implementation that implement `HttpResponse`(`HttpResponseImpl` in this case).\r\n\r\n&gt;I read another post saying that you should never use any class in idk.internal.*\r\n\r\nThis means that you should not declare/initialise this class directly in your code. For example, you should not write something like:\r\n```java\r\nHttpResponseImpl&lt;String&gt; response;\r\n```\r\nThe principal behind is we should depend on the interface, but not the implementation details, more details can be found in [JEP 260][2]\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html#getClass()\r\n  [2]: https://openjdk.org/jeps/260","title":"The response type after using HttpResponse.BodyHandlers.OfString()","body":"<blockquote>\n<p>so am I doing anything wrong ?</p>\n</blockquote>\n<p>There is nothing wrong here, <code>HttpResponse</code> is the interface. So <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Object.html#getClass()\" rel=\"nofollow noreferrer\"><code>response.getClass()</code></a> is fine to return any implementation that implement <code>HttpResponse</code>(<code>HttpResponseImpl</code> in this case).</p>\n<blockquote>\n<p>I read another post saying that you should never use any class in idk.internal.*</p>\n</blockquote>\n<p>This means that you should not declare/initialise this class directly in your code. For example, you should not write something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpResponseImpl&lt;String&gt; response;\n</code></pre>\n<p>The principal behind is we should depend on the interface, but not the implementation details, more details can be found in <a href=\"https://openjdk.org/jeps/260\" rel=\"nofollow noreferrer\">JEP 260</a></p>\n"}],"owner":{"account_id":25438979,"reputation":5,"user_id":19242261,"display_name":"Simon Zhao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":948,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672372184,"creation_date":1672361424,"question_id":74957266,"body_markdown":"```\r\nclass Main{\r\n    //we can use class HttpClient \r\n    //https://www.youtube.com/watch?v=5MmlRZZxTqk\r\n\r\n    public static void main(String args[]) throws IOException, InterruptedException {    \r\n        HttpClient client = HttpClient.newHttpClient();\r\n        HttpRequest request = HttpRequest.newBuilder()\r\n        // .GET() this line is optional because it is default\r\n        .header(&quot;accept&quot;,&quot;application/json&quot;)\r\n        .uri(URI.create(&quot;https://whatever.com&quot;))\r\n        .build();\r\n        HttpResponse&lt;String&gt; response = client.send(request, BodyHandlers.ofString());\r\n        System.out.println(response.statusCode());\r\n        System.out.println(response.body()); \r\n        System.out.println(response.getClass().getName());\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nSo I read the documentation about the BodyHandlers.ofString() method, my understanding is that it will parse the value of the response variable into a String. But if that&#39;s the case then why when I ran this line \r\n\r\n```\r\n        System.out.println(response.getClass().getName());\r\n```\r\nthe outcome is jdk.internal.net.http.HttpResponseImpl? I read another post saying that you should never use any class in idk.internal.*, so am I doing anything wrong ?\r\n\r\n","title":"The response type after using HttpResponse.BodyHandlers.OfString()","body":"<pre><code>class Main{\n    //we can use class HttpClient \n    //https://www.youtube.com/watch?v=5MmlRZZxTqk\n\n    public static void main(String args[]) throws IOException, InterruptedException {    \n        HttpClient client = HttpClient.newHttpClient();\n        HttpRequest request = HttpRequest.newBuilder()\n        // .GET() this line is optional because it is default\n        .header(&quot;accept&quot;,&quot;application/json&quot;)\n        .uri(URI.create(&quot;https://whatever.com&quot;))\n        .build();\n        HttpResponse&lt;String&gt; response = client.send(request, BodyHandlers.ofString());\n        System.out.println(response.statusCode());\n        System.out.println(response.body()); \n        System.out.println(response.getClass().getName());\n    }\n}\n</code></pre>\n<p>So I read the documentation about the BodyHandlers.ofString() method, my understanding is that it will parse the value of the response variable into a String. But if that's the case then why when I ran this line</p>\n<pre><code>        System.out.println(response.getClass().getName());\n</code></pre>\n<p>the outcome is jdk.internal.net.http.HttpResponseImpl? I read another post saying that you should never use any class in idk.internal.*, so am I doing anything wrong ?</p>\n"},{"tags":["java","graphics","awt"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1672372095,"post_id":74957941,"comment_id":132277632,"body_markdown":"BufferedImage#subImage? Graphics also has a clip method, although playing with that cause some interesting side effects","body":"BufferedImage#subImage? Graphics also has a clip method, although playing with that cause some interesting side effects"},{"owner":{"account_id":18311703,"reputation":23,"user_id":13334369,"display_name":"canslp"},"score":0,"creation_date":1672373536,"post_id":74957941,"comment_id":132277795,"body_markdown":"oh that looks like the partial image copy thing i was looking for. that&#39;ll probably work thanks","body":"oh that looks like the partial image copy thing i was looking for. that&#39;ll probably work thanks"},{"owner":{"account_id":18311703,"reputation":23,"user_id":13334369,"display_name":"canslp"},"score":0,"creation_date":1672436043,"post_id":74957941,"comment_id":132291187,"body_markdown":"ok it looks like this is slightly faster- thanks. it still doesn&#39;t seem totally optimal relative to the speed of drawing a whole image, i&#39;m thinking the added extra step of drawing to an external buffer and then to the canvas is wasting a lot of time, but this is better than what i was doing before","body":"ok it looks like this is slightly faster- thanks. it still doesn&#39;t seem totally optimal relative to the speed of drawing a whole image, i&#39;m thinking the added extra step of drawing to an external buffer and then to the canvas is wasting a lot of time, but this is better than what i was doing before"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1672438541,"post_id":74957941,"comment_id":132291610,"body_markdown":"Take a look at `Graphics#clip`, although you&#39;d be doing it reverse (clipping the area of the graphics and then placing the image in such away as to only paint the area you want)","body":"Take a look at <code>Graphics#clip</code>, although you&#39;d be doing it reverse (clipping the area of the graphics and then placing the image in such away as to only paint the area you want)"}],"owner":{"account_id":18311703,"reputation":23,"user_id":13334369,"display_name":"canslp"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672371748,"creation_date":1672371748,"question_id":74957941,"body_markdown":"i need a way to draw a part of a buffered image. luckily the part of it i need to draw is very simple, i just need to draw a horizontal slice of it- some band of the image from a lower bound to a higher bound. other graphics languages have functions to draw &#39;clips&#39; of images, or sometimes functions to copy images onto new images with different sizes\r\n\r\ni looked into those kinds of clip functions for java.awt but ended up just going with this manual function that just draws right onto the canvas. it looks like this\r\n```\r\npublic void clipImage(BufferedImage img,int ixa,int iya,int ixb,int iyb,int cxa,int cya,int cxb,int cyb){\r\n        float wr = ((float)img.getWidth()/(1f+ixb-ixa));\r\n        float hr = ((float)img.getHeight()/(1f+iyb-iya));\r\n        for(int x = Math.max(ixa+1,cxa);x &lt;= Math.min(ixb,cxb);x ++){\r\n            for(int y = Math.max(iya+1,cya);y &lt;= Math.min(iyb,cyb);y ++){\r\n                int px = (int)((x-ixa)* wr);\r\n                int py = (int)((y-iya)* hr);\r\n                Color c = new Color(img.getRGB(px,py),true);\r\n                if(c.getAlpha()&gt;0){\r\n                    g2.setColor(c);\r\n                    g2.fillRect(x-1,y-1,1,1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n```\r\nthis works, but it&#39;s slow. it seems slower to draw a part of an image using this function than to draw the entire image normally, which is bad. is there a better way to do this? thanks","title":"fast ways to clip buffered images in java.awt","body":"<p>i need a way to draw a part of a buffered image. luckily the part of it i need to draw is very simple, i just need to draw a horizontal slice of it- some band of the image from a lower bound to a higher bound. other graphics languages have functions to draw 'clips' of images, or sometimes functions to copy images onto new images with different sizes</p>\n<p>i looked into those kinds of clip functions for java.awt but ended up just going with this manual function that just draws right onto the canvas. it looks like this</p>\n<pre><code>public void clipImage(BufferedImage img,int ixa,int iya,int ixb,int iyb,int cxa,int cya,int cxb,int cyb){\n        float wr = ((float)img.getWidth()/(1f+ixb-ixa));\n        float hr = ((float)img.getHeight()/(1f+iyb-iya));\n        for(int x = Math.max(ixa+1,cxa);x &lt;= Math.min(ixb,cxb);x ++){\n            for(int y = Math.max(iya+1,cya);y &lt;= Math.min(iyb,cyb);y ++){\n                int px = (int)((x-ixa)* wr);\n                int py = (int)((y-iya)* hr);\n                Color c = new Color(img.getRGB(px,py),true);\n                if(c.getAlpha()&gt;0){\n                    g2.setColor(c);\n                    g2.fillRect(x-1,y-1,1,1);\n                }\n            }\n        }\n    }\n</code></pre>\n<p>this works, but it's slow. it seems slower to draw a part of an image using this function than to draw the entire image normally, which is bad. is there a better way to do this? thanks</p>\n"},{"tags":["java","android","xml","android-fragments"],"answers":[{"comments":[{"owner":{"account_id":13787541,"reputation":1,"user_id":9951023,"display_name":"Jonathan Ramirez"},"score":0,"creation_date":1672372226,"post_id":74957874,"comment_id":132277649,"body_markdown":"Fixed that but the fragment still lags a lot :(","body":"Fixed that but the fragment still lags a lot :("}],"tags":[],"owner":{"account_id":24438997,"reputation":1738,"user_id":18362930,"display_name":"Sandesh Khutal"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672370793,"creation_date":1672370793,"answer_id":74957874,"question_id":74956334,"body_markdown":"Issue with your ScrollView becasuse you closed Scrollview at top without including other UI into it.It should close at the end of XML file.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    \r\n    &lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:background=&quot;@color/backgroundBlack&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:orientation=&quot;vertical&quot;&gt;\r\n        \r\n            &lt;RelativeLayout\r\n                android:layout_marginTop=&quot;30dp&quot;\r\n                android:layout_marginLeft=&quot;20dp&quot;\r\n                android:layout_marginRight=&quot;20dp&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;&gt;\r\n        \r\n                &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginTop=&quot;13dp&quot;\r\n                    android:text=&quot;Inventario&quot;\r\n                    android:textColor=&quot;@color/white&quot;\r\n                    android:textSize=&quot;18dp&quot;\r\n                    android:layout_centerHorizontal=&quot;true&quot;\r\n                    android:textStyle=&quot;bold&quot; /&gt;\r\n        \r\n        \r\n            &lt;/RelativeLayout&gt;\r\n        \r\n            &lt;GridLayout\r\n                android:columnOrderPreserved=&quot;false&quot;\r\n                android:alignmentMode=&quot;alignMargins&quot;\r\n                android:layout_marginTop=&quot;17dp&quot;\r\n                android:rowCount=&quot;1&quot;\r\n                android:columnCount=&quot;2&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;&gt;\r\n        \r\n                &lt;androidx.cardview.widget.CardView\r\n                    android:id=&quot;@+id/cardMaquinas&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_columnWeight=&quot;1&quot;\r\n                    android:layout_rowWeight=&quot;1&quot;\r\n                    app:elevation=&quot;60dp&quot;\r\n                    app:cardCornerRadius=&quot;12dp&quot;\r\n                    android:layout_margin=&quot;12dp&quot;&gt;\r\n        \r\n                    &lt;LinearLayout\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:orientation=&quot;vertical&quot;\r\n                        android:padding=&quot;16dp&quot;&gt;\r\n        \r\n                        &lt;ImageView\r\n                            android:id=&quot;@+id/receiptImage&quot;\r\n                            android:layout_width=&quot;100dp&quot;\r\n                            android:layout_height=&quot;120dp&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:clickable=&quot;true&quot;\r\n                            android:src=&quot;@drawable/maquina&quot;\r\n                            tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\r\n        \r\n                        &lt;TextView\r\n                            android:layout_width=&quot;wrap_content&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:text=&quot;Maquinas&quot;\r\n                            android:textColor=&quot;@color/black&quot;\r\n                            android:textSize=&quot;13dp&quot; /&gt;\r\n        \r\n                    &lt;/LinearLayout&gt;\r\n        \r\n                &lt;/androidx.cardview.widget.CardView&gt;\r\n        \r\n                &lt;androidx.cardview.widget.CardView\r\n                    android:id=&quot;@+id/cardTintas&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_columnWeight=&quot;1&quot;\r\n                    android:layout_rowWeight=&quot;1&quot;\r\n                    app:elevation=&quot;60dp&quot;\r\n                    app:cardCornerRadius=&quot;12dp&quot;\r\n                    android:layout_margin=&quot;12dp&quot;&gt;\r\n        \r\n                    &lt;LinearLayout\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:padding=&quot;16dp&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:orientation=&quot;vertical&quot;&gt;\r\n                        &lt;ImageView\r\n                            android:layout_width=&quot;100dp&quot;\r\n                            android:layout_height=&quot;120dp&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:src=&quot;@drawable/ink&quot;/&gt;\r\n                        &lt;TextView\r\n                            android:layout_width=&quot;wrap_content&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:textColor=&quot;@color/black&quot;\r\n                            android:text=&quot;Tintas&quot;\r\n                            android:textSize=&quot;13dp&quot;/&gt;\r\n        \r\n                    &lt;/LinearLayout&gt;\r\n        \r\n                &lt;/androidx.cardview.widget.CardView&gt;\r\n        \r\n                &lt;androidx.cardview.widget.CardView\r\n                    android:id=&quot;@+id/cardVasos&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_columnWeight=&quot;1&quot;\r\n                    android:layout_rowWeight=&quot;1&quot;\r\n                    app:elevation=&quot;60dp&quot;\r\n                    app:cardCornerRadius=&quot;12dp&quot;\r\n                    android:layout_margin=&quot;12dp&quot;&gt;\r\n        \r\n                    &lt;LinearLayout\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:padding=&quot;16dp&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:orientation=&quot;vertical&quot;&gt;\r\n                        &lt;ImageView\r\n                            android:layout_width=&quot;100dp&quot;\r\n                            android:layout_height=&quot;120dp&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:src=&quot;@drawable/inkcup&quot;/&gt;\r\n                        &lt;TextView\r\n                            android:layout_width=&quot;wrap_content&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;\r\n                            android:textColor=&quot;@color/black&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:text=&quot;Vasos de tinta&quot;\r\n                            android:textSize=&quot;13dp&quot;/&gt;\r\n        \r\n                    &lt;/LinearLayout&gt;\r\n        \r\n                &lt;/androidx.cardview.widget.CardView&gt;\r\n        \r\n                &lt;androidx.cardview.widget.CardView\r\n                    android:id=&quot;@+id/cardAgujas&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_columnWeight=&quot;1&quot;\r\n                    android:layout_rowWeight=&quot;1&quot;\r\n                    app:elevation=&quot;60dp&quot;\r\n                    app:cardCornerRadius=&quot;12dp&quot;\r\n                    android:layout_margin=&quot;12dp&quot;&gt;\r\n        \r\n                    &lt;LinearLayout\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:padding=&quot;16dp&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:orientation=&quot;vertical&quot;&gt;\r\n                        &lt;ImageView\r\n                            android:layout_width=&quot;100dp&quot;\r\n                            android:layout_height=&quot;120dp&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:src=&quot;@drawable/agujas&quot;/&gt;\r\n        \r\n                        &lt;TextView\r\n                            android:layout_width=&quot;wrap_content&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;\r\n                            android:text=&quot;Agujas y cartuchos&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:textColor=&quot;@color/black&quot;\r\n                            android:textSize=&quot;13dp&quot; /&gt;\r\n        \r\n                    &lt;/LinearLayout&gt;\r\n        \r\n                &lt;/androidx.cardview.widget.CardView&gt;\r\n        \r\n                &lt;androidx.cardview.widget.CardView\r\n                    android:id=&quot;@+id/cardFuentes&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_rowWeight=&quot;1&quot;\r\n                    android:layout_columnWeight=&quot;1&quot;\r\n                    android:layout_margin=&quot;12dp&quot;\r\n                    app:cardCornerRadius=&quot;12dp&quot;\r\n                    app:elevation=&quot;60dp&quot;&gt;\r\n        \r\n                    &lt;LinearLayout\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:orientation=&quot;vertical&quot;\r\n                        android:padding=&quot;16dp&quot;&gt;\r\n        \r\n                        &lt;ImageView\r\n                            android:layout_width=&quot;100dp&quot;\r\n                            android:layout_height=&quot;120dp&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:clickable=&quot;true&quot;\r\n                            android:src=&quot;@drawable/fuentes&quot;\r\n                            tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\r\n        \r\n                        &lt;TextView\r\n                            android:layout_width=&quot;wrap_content&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:text=&quot;Fuentes&quot;\r\n                            android:textColor=&quot;@color/black&quot;\r\n                            android:textSize=&quot;13dp&quot; /&gt;\r\n        \r\n                    &lt;/LinearLayout&gt;\r\n        \r\n                &lt;/androidx.cardview.widget.CardView&gt;\r\n        \r\n                &lt;androidx.cardview.widget.CardView\r\n                    android:id=&quot;@+id/cardPiel&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_rowWeight=&quot;1&quot;\r\n                    android:layout_columnWeight=&quot;1&quot;\r\n                    android:layout_margin=&quot;12dp&quot;\r\n                    app:cardCornerRadius=&quot;12dp&quot;\r\n                    app:elevation=&quot;60dp&quot;&gt;\r\n        \r\n                    &lt;LinearLayout\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:orientation=&quot;vertical&quot;\r\n                        android:padding=&quot;16dp&quot;&gt;\r\n        \r\n                        &lt;ImageView\r\n                            android:layout_width=&quot;100dp&quot;\r\n                            android:layout_height=&quot;120dp&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:src=&quot;@drawable/piel&quot; /&gt;\r\n        \r\n                        &lt;TextView\r\n                            android:layout_width=&quot;wrap_content&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:text=&quot;Piel sintetica&quot;\r\n                            android:textColor=&quot;@color/black&quot;\r\n                            android:textSize=&quot;13dp&quot; /&gt;\r\n        \r\n                    &lt;/LinearLayout&gt;\r\n        \r\n                &lt;/androidx.cardview.widget.CardView&gt;\r\n        \r\n                &lt;androidx.cardview.widget.CardView\r\n                    android:id=&quot;@+id/cardPuntas&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_rowWeight=&quot;1&quot;\r\n                    android:layout_columnWeight=&quot;1&quot;\r\n                    android:layout_margin=&quot;12dp&quot;\r\n                    app:cardCornerRadius=&quot;12dp&quot;\r\n                    app:elevation=&quot;60dp&quot;&gt;\r\n        \r\n                    &lt;LinearLayout\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:orientation=&quot;vertical&quot;\r\n                        android:padding=&quot;16dp&quot;&gt;\r\n        \r\n                        &lt;ImageView\r\n                            android:layout_width=&quot;100dp&quot;\r\n                            android:layout_height=&quot;120dp&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:src=&quot;@drawable/cartuchos&quot; /&gt;\r\n        \r\n                        &lt;TextView\r\n                            android:layout_width=&quot;wrap_content&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:text=&quot;Tubos y puntas&quot;\r\n                            android:textColor=&quot;@color/black&quot;\r\n                            android:textSize=&quot;13dp&quot; /&gt;\r\n        \r\n                    &lt;/LinearLayout&gt;\r\n        \r\n                &lt;/androidx.cardview.widget.CardView&gt;\r\n        \r\n                &lt;androidx.cardview.widget.CardView\r\n                    android:id=&quot;@+id/cardGuantes&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_rowWeight=&quot;1&quot;\r\n                    android:layout_columnWeight=&quot;1&quot;\r\n                    android:layout_margin=&quot;12dp&quot;\r\n                    app:cardCornerRadius=&quot;12dp&quot;\r\n                    app:elevation=&quot;60dp&quot;&gt;\r\n        \r\n                    &lt;LinearLayout\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:orientation=&quot;vertical&quot;\r\n                        android:padding=&quot;16dp&quot;&gt;\r\n        \r\n                        &lt;ImageView\r\n                            android:layout_width=&quot;100dp&quot;\r\n                            android:layout_height=&quot;120dp&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:src=&quot;@drawable/guantes&quot; /&gt;\r\n        \r\n                        &lt;TextView\r\n                            android:layout_width=&quot;wrap_content&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;\r\n                            android:layout_gravity=&quot;center&quot;\r\n                            android:text=&quot;Guantes&quot;\r\n                            android:textColor=&quot;@color/black&quot;\r\n                            android:textSize=&quot;13dp&quot; /&gt;\r\n        \r\n                    &lt;/LinearLayout&gt;\r\n        \r\n                &lt;/androidx.cardview.widget.CardView&gt;\r\n        \r\n            &lt;/GridLayout&gt;\r\n        \r\n            &lt;Button\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;100dp&quot;\r\n                android:visibility=&quot;invisible&quot;&gt;\r\n        \r\n            &lt;/Button&gt;\r\n        &lt;/LinearLayout&gt;\r\n    &lt;/ScrollView&gt;","title":"Android Card View Activity is laggy","body":"<p>Issue with your ScrollView becasuse you closed Scrollview at top without including other UI into it.It should close at the end of XML file.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n\n&lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;@color/backgroundBlack&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;vertical&quot;&gt;\n    \n        &lt;RelativeLayout\n            android:layout_marginTop=&quot;30dp&quot;\n            android:layout_marginLeft=&quot;20dp&quot;\n            android:layout_marginRight=&quot;20dp&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n    \n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginTop=&quot;13dp&quot;\n                android:text=&quot;Inventario&quot;\n                android:textColor=&quot;@color/white&quot;\n                android:textSize=&quot;18dp&quot;\n                android:layout_centerHorizontal=&quot;true&quot;\n                android:textStyle=&quot;bold&quot; /&gt;\n    \n    \n        &lt;/RelativeLayout&gt;\n    \n        &lt;GridLayout\n            android:columnOrderPreserved=&quot;false&quot;\n            android:alignmentMode=&quot;alignMargins&quot;\n            android:layout_marginTop=&quot;17dp&quot;\n            android:rowCount=&quot;1&quot;\n            android:columnCount=&quot;2&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardMaquinas&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                app:elevation=&quot;60dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                android:layout_margin=&quot;12dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;\n                    android:padding=&quot;16dp&quot;&gt;\n    \n                    &lt;ImageView\n                        android:id=&quot;@+id/receiptImage&quot;\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:clickable=&quot;true&quot;\n                        android:src=&quot;@drawable/maquina&quot;\n                        tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\n    \n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:text=&quot;Maquinas&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:textSize=&quot;13dp&quot; /&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardTintas&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                app:elevation=&quot;60dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                android:layout_margin=&quot;12dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:padding=&quot;16dp&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;&gt;\n                    &lt;ImageView\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:src=&quot;@drawable/ink&quot;/&gt;\n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:text=&quot;Tintas&quot;\n                        android:textSize=&quot;13dp&quot;/&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardVasos&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                app:elevation=&quot;60dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                android:layout_margin=&quot;12dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:padding=&quot;16dp&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;&gt;\n                    &lt;ImageView\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:src=&quot;@drawable/inkcup&quot;/&gt;\n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:text=&quot;Vasos de tinta&quot;\n                        android:textSize=&quot;13dp&quot;/&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardAgujas&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                app:elevation=&quot;60dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                android:layout_margin=&quot;12dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:padding=&quot;16dp&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;&gt;\n                    &lt;ImageView\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:src=&quot;@drawable/agujas&quot;/&gt;\n    \n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:text=&quot;Agujas y cartuchos&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:textSize=&quot;13dp&quot; /&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardFuentes&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_margin=&quot;12dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                app:elevation=&quot;60dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;\n                    android:padding=&quot;16dp&quot;&gt;\n    \n                    &lt;ImageView\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:clickable=&quot;true&quot;\n                        android:src=&quot;@drawable/fuentes&quot;\n                        tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\n    \n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:text=&quot;Fuentes&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:textSize=&quot;13dp&quot; /&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardPiel&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_margin=&quot;12dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                app:elevation=&quot;60dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;\n                    android:padding=&quot;16dp&quot;&gt;\n    \n                    &lt;ImageView\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:src=&quot;@drawable/piel&quot; /&gt;\n    \n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:text=&quot;Piel sintetica&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:textSize=&quot;13dp&quot; /&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardPuntas&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_margin=&quot;12dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                app:elevation=&quot;60dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;\n                    android:padding=&quot;16dp&quot;&gt;\n    \n                    &lt;ImageView\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:src=&quot;@drawable/cartuchos&quot; /&gt;\n    \n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:text=&quot;Tubos y puntas&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:textSize=&quot;13dp&quot; /&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardGuantes&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_margin=&quot;12dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                app:elevation=&quot;60dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;\n                    android:padding=&quot;16dp&quot;&gt;\n    \n                    &lt;ImageView\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:src=&quot;@drawable/guantes&quot; /&gt;\n    \n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:text=&quot;Guantes&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:textSize=&quot;13dp&quot; /&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n        &lt;/GridLayout&gt;\n    \n        &lt;Button\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;100dp&quot;\n            android:visibility=&quot;invisible&quot;&gt;\n    \n        &lt;/Button&gt;\n    &lt;/LinearLayout&gt;\n&lt;/ScrollView&gt;\n</code></pre>\n"}],"owner":{"account_id":13787541,"reputation":1,"user_id":9951023,"display_name":"Jonathan Ramirez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672370793,"creation_date":1672350477,"question_id":74956334,"body_markdown":"I have this fragment with 8 card views and 8 images  but when I use the app on my phone it lags when i&#39;m on this fragment and this fragment alone, anyone know why that is?\r\nEach card directs to a different activity on click so maybe that is what is causing the lag?\r\n\r\nXml:\r\n\r\n```\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n\r\n\\&lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:background=&quot;@color/backgroundBlack&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\\&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n        &lt;RelativeLayout\r\n            android:layout_marginTop=&quot;30dp&quot;\r\n            android:layout_marginLeft=&quot;20dp&quot;\r\n            android:layout_marginRight=&quot;20dp&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginTop=&quot;13dp&quot;\r\n                android:text=&quot;Inventario&quot;\r\n                android:textColor=&quot;@color/white&quot;\r\n                android:textSize=&quot;18dp&quot;\r\n                android:layout_centerHorizontal=&quot;true&quot;\r\n                android:textStyle=&quot;bold&quot; /&gt;\r\n    \r\n    \r\n        &lt;/RelativeLayout&gt;\r\n    \r\n        &lt;GridLayout\r\n            android:columnOrderPreserved=&quot;false&quot;\r\n            android:alignmentMode=&quot;alignMargins&quot;\r\n            android:layout_marginTop=&quot;17dp&quot;\r\n            android:rowCount=&quot;1&quot;\r\n            android:columnCount=&quot;2&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n            &lt;androidx.cardview.widget.CardView\r\n                android:id=&quot;@+id/cardMaquinas&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_columnWeight=&quot;1&quot;\r\n                android:layout_rowWeight=&quot;1&quot;\r\n                app:elevation=&quot;60dp&quot;\r\n                app:cardCornerRadius=&quot;12dp&quot;\r\n                android:layout_margin=&quot;12dp&quot;&gt;\r\n    \r\n                &lt;LinearLayout\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:orientation=&quot;vertical&quot;\r\n                    android:padding=&quot;16dp&quot;&gt;\r\n    \r\n                    &lt;ImageView\r\n                        android:id=&quot;@+id/receiptImage&quot;\r\n                        android:layout_width=&quot;100dp&quot;\r\n                        android:layout_height=&quot;120dp&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:clickable=&quot;true&quot;\r\n                        android:src=&quot;@drawable/maquina&quot;\r\n                        tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\r\n    \r\n                    &lt;TextView\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:text=&quot;Maquinas&quot;\r\n                        android:textColor=&quot;@color/black&quot;\r\n                        android:textSize=&quot;13dp&quot; /&gt;\r\n    \r\n                &lt;/LinearLayout&gt;\r\n    \r\n            &lt;/androidx.cardview.widget.CardView&gt;\r\n    \r\n            &lt;androidx.cardview.widget.CardView\r\n                android:id=&quot;@+id/cardTintas&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_columnWeight=&quot;1&quot;\r\n                android:layout_rowWeight=&quot;1&quot;\r\n                app:elevation=&quot;60dp&quot;\r\n                app:cardCornerRadius=&quot;12dp&quot;\r\n                android:layout_margin=&quot;12dp&quot;&gt;\r\n    \r\n                &lt;LinearLayout\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:padding=&quot;16dp&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:orientation=&quot;vertical&quot;&gt;\r\n                    &lt;ImageView\r\n                        android:layout_width=&quot;100dp&quot;\r\n                        android:layout_height=&quot;120dp&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:src=&quot;@drawable/ink&quot;/&gt;\r\n                    &lt;TextView\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:textColor=&quot;@color/black&quot;\r\n                        android:text=&quot;Tintas&quot;\r\n                        android:textSize=&quot;13dp&quot;/&gt;\r\n    \r\n                &lt;/LinearLayout&gt;\r\n    \r\n            &lt;/androidx.cardview.widget.CardView&gt;\r\n    \r\n            &lt;androidx.cardview.widget.CardView\r\n                android:id=&quot;@+id/cardVasos&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_columnWeight=&quot;1&quot;\r\n                android:layout_rowWeight=&quot;1&quot;\r\n                app:elevation=&quot;60dp&quot;\r\n                app:cardCornerRadius=&quot;12dp&quot;\r\n                android:layout_margin=&quot;12dp&quot;&gt;\r\n    \r\n                &lt;LinearLayout\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:padding=&quot;16dp&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:orientation=&quot;vertical&quot;&gt;\r\n                    &lt;ImageView\r\n                        android:layout_width=&quot;100dp&quot;\r\n                        android:layout_height=&quot;120dp&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:src=&quot;@drawable/inkcup&quot;/&gt;\r\n                    &lt;TextView\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:textColor=&quot;@color/black&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:text=&quot;Vasos de tinta&quot;\r\n                        android:textSize=&quot;13dp&quot;/&gt;\r\n    \r\n                &lt;/LinearLayout&gt;\r\n    \r\n            &lt;/androidx.cardview.widget.CardView&gt;\r\n    \r\n            &lt;androidx.cardview.widget.CardView\r\n                android:id=&quot;@+id/cardAgujas&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_columnWeight=&quot;1&quot;\r\n                android:layout_rowWeight=&quot;1&quot;\r\n                app:elevation=&quot;60dp&quot;\r\n                app:cardCornerRadius=&quot;12dp&quot;\r\n                android:layout_margin=&quot;12dp&quot;&gt;\r\n    \r\n                &lt;LinearLayout\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:padding=&quot;16dp&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:orientation=&quot;vertical&quot;&gt;\r\n                    &lt;ImageView\r\n                        android:layout_width=&quot;100dp&quot;\r\n                        android:layout_height=&quot;120dp&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:src=&quot;@drawable/agujas&quot;/&gt;\r\n    \r\n                    &lt;TextView\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;Agujas y cartuchos&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:textColor=&quot;@color/black&quot;\r\n                        android:textSize=&quot;13dp&quot; /&gt;\r\n    \r\n                &lt;/LinearLayout&gt;\r\n    \r\n            &lt;/androidx.cardview.widget.CardView&gt;\r\n    \r\n            &lt;androidx.cardview.widget.CardView\r\n                android:id=&quot;@+id/cardFuentes&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_rowWeight=&quot;1&quot;\r\n                android:layout_columnWeight=&quot;1&quot;\r\n                android:layout_margin=&quot;12dp&quot;\r\n                app:cardCornerRadius=&quot;12dp&quot;\r\n                app:elevation=&quot;60dp&quot;&gt;\r\n    \r\n                &lt;LinearLayout\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:orientation=&quot;vertical&quot;\r\n                    android:padding=&quot;16dp&quot;&gt;\r\n    \r\n                    &lt;ImageView\r\n                        android:layout_width=&quot;100dp&quot;\r\n                        android:layout_height=&quot;120dp&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:clickable=&quot;true&quot;\r\n                        android:src=&quot;@drawable/fuentes&quot;\r\n                        tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\r\n    \r\n                    &lt;TextView\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:text=&quot;Fuentes&quot;\r\n                        android:textColor=&quot;@color/black&quot;\r\n                        android:textSize=&quot;13dp&quot; /&gt;\r\n    \r\n                &lt;/LinearLayout&gt;\r\n    \r\n            &lt;/androidx.cardview.widget.CardView&gt;\r\n    \r\n            &lt;androidx.cardview.widget.CardView\r\n                android:id=&quot;@+id/cardPiel&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_rowWeight=&quot;1&quot;\r\n                android:layout_columnWeight=&quot;1&quot;\r\n                android:layout_margin=&quot;12dp&quot;\r\n                app:cardCornerRadius=&quot;12dp&quot;\r\n                app:elevation=&quot;60dp&quot;&gt;\r\n    \r\n                &lt;LinearLayout\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:orientation=&quot;vertical&quot;\r\n                    android:padding=&quot;16dp&quot;&gt;\r\n    \r\n                    &lt;ImageView\r\n                        android:layout_width=&quot;100dp&quot;\r\n                        android:layout_height=&quot;120dp&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:src=&quot;@drawable/piel&quot; /&gt;\r\n    \r\n                    &lt;TextView\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:text=&quot;Piel sintetica&quot;\r\n                        android:textColor=&quot;@color/black&quot;\r\n                        android:textSize=&quot;13dp&quot; /&gt;\r\n    \r\n                &lt;/LinearLayout&gt;\r\n    \r\n            &lt;/androidx.cardview.widget.CardView&gt;\r\n    \r\n            &lt;androidx.cardview.widget.CardView\r\n                android:id=&quot;@+id/cardPuntas&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_rowWeight=&quot;1&quot;\r\n                android:layout_columnWeight=&quot;1&quot;\r\n                android:layout_margin=&quot;12dp&quot;\r\n                app:cardCornerRadius=&quot;12dp&quot;\r\n                app:elevation=&quot;60dp&quot;&gt;\r\n    \r\n                &lt;LinearLayout\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:orientation=&quot;vertical&quot;\r\n                    android:padding=&quot;16dp&quot;&gt;\r\n    \r\n                    &lt;ImageView\r\n                        android:layout_width=&quot;100dp&quot;\r\n                        android:layout_height=&quot;120dp&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:src=&quot;@drawable/cartuchos&quot; /&gt;\r\n    \r\n                    &lt;TextView\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:text=&quot;Tubos y puntas&quot;\r\n                        android:textColor=&quot;@color/black&quot;\r\n                        android:textSize=&quot;13dp&quot; /&gt;\r\n    \r\n                &lt;/LinearLayout&gt;\r\n    \r\n            &lt;/androidx.cardview.widget.CardView&gt;\r\n    \r\n            &lt;androidx.cardview.widget.CardView\r\n                android:id=&quot;@+id/cardGuantes&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_rowWeight=&quot;1&quot;\r\n                android:layout_columnWeight=&quot;1&quot;\r\n                android:layout_margin=&quot;12dp&quot;\r\n                app:cardCornerRadius=&quot;12dp&quot;\r\n                app:elevation=&quot;60dp&quot;&gt;\r\n    \r\n                &lt;LinearLayout\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:orientation=&quot;vertical&quot;\r\n                    android:padding=&quot;16dp&quot;&gt;\r\n    \r\n                    &lt;ImageView\r\n                        android:layout_width=&quot;100dp&quot;\r\n                        android:layout_height=&quot;120dp&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:src=&quot;@drawable/guantes&quot; /&gt;\r\n    \r\n                    &lt;TextView\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:text=&quot;Guantes&quot;\r\n                        android:textColor=&quot;@color/black&quot;\r\n                        android:textSize=&quot;13dp&quot; /&gt;\r\n    \r\n                &lt;/LinearLayout&gt;\r\n    \r\n            &lt;/androidx.cardview.widget.CardView&gt;\r\n    \r\n        &lt;/GridLayout&gt;\r\n    \r\n        &lt;Button\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;100dp&quot;\r\n            android:visibility=&quot;invisible&quot;&gt;\r\n    \r\n        &lt;/Button&gt;\r\n    &lt;/LinearLayout&gt;\r\n```\r\n\r\nFragment:\r\n\r\n```\r\n\r\npackage com.example.tattostudio.ui.home;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.cardview.widget.CardView;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.lifecycle.ViewModelProvider;\r\n\r\nimport com.example.tattostudio.R;\r\nimport com.example.tattostudio.databinding.FragmentHomeBinding;\r\nimport com.example.tattostudio.inventariostuff.AgujasInventario;\r\nimport com.example.tattostudio.inventariostuff.FuentesInventario;\r\nimport com.example.tattostudio.inventariostuff.GuantesInventario;\r\nimport com.example.tattostudio.inventariostuff.MaquinasInventario;\r\nimport com.example.tattostudio.inventariostuff.PielInventario;\r\nimport com.example.tattostudio.inventariostuff.PuntasInventario;\r\nimport com.example.tattostudio.inventariostuff.TintasActivity;\r\nimport com.example.tattostudio.inventariostuff.VasosInventario;\r\n\r\npublic class HomeFragment extends Fragment implements View.OnClickListener {\r\n\r\n    private FragmentHomeBinding binding;\r\n    \r\n    public View onCreateView(@NonNull LayoutInflater inflater,\r\n                             ViewGroup container, Bundle savedInstanceState) {\r\n        HomeViewModel homeViewModel =\r\n                new ViewModelProvider(this).get(HomeViewModel.class);\r\n    \r\n        binding = FragmentHomeBinding.inflate(inflater, container, false);\r\n        View root = binding.getRoot();\r\n        return root;\r\n    }\r\n    \r\n    @Override\r\n    public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {\r\n        androidx.cardview.widget.CardView card1, card2, card3, card4, card5, card6, card7, card8;\r\n    \r\n        card1 = getView().findViewById(R.id.cardMaquinas);\r\n        card2 = getView().findViewById(R.id.cardTintas);\r\n        card3 = getView().findViewById(R.id.cardVasos);\r\n        card4 = getView().findViewById(R.id.cardAgujas);\r\n        card5 = getView().findViewById(R.id.cardFuentes);\r\n        card6 = getView().findViewById(R.id.cardPiel);\r\n        card7 = getView().findViewById(R.id.cardPuntas);\r\n        card8 = getView().findViewById(R.id.cardGuantes);\r\n    \r\n        card1.setOnClickListener(this);\r\n        card2.setOnClickListener(this);\r\n        card3.setOnClickListener(this);\r\n        card4.setOnClickListener(this);\r\n        card5.setOnClickListener(this);\r\n        card6.setOnClickListener(this);\r\n        card7.setOnClickListener(this);\r\n        card8.setOnClickListener(this);\r\n    \r\n    }\r\n    \r\n    public void onClick(View v){\r\n        Intent i;\r\n    \r\n        switch (v.getId()){\r\n            case R.id.cardMaquinas:\r\n                i = new Intent(getActivity(), MaquinasInventario.class);\r\n                startActivity(i);\r\n                break;\r\n            case R.id.cardTintas:\r\n                i = new Intent(getActivity(), TintasActivity.class);\r\n                startActivity(i);\r\n                break;\r\n            case R.id.cardVasos:\r\n                i = new Intent(getActivity(), VasosInventario.class);\r\n                startActivity(i);\r\n                break;\r\n            case R.id.cardAgujas:\r\n                i = new Intent(getActivity(), AgujasInventario.class);\r\n                startActivity(i);\r\n                break;\r\n            case R.id.cardFuentes:\r\n                i = new Intent(getActivity(), FuentesInventario.class);\r\n                startActivity(i);\r\n                break;\r\n            case R.id.cardPiel:\r\n                i = new Intent(getActivity(), PielInventario.class);\r\n                startActivity(i);\r\n                break;\r\n            case R.id.cardPuntas:\r\n                i = new Intent(getActivity(), PuntasInventario.class);\r\n                startActivity(i);\r\n                break;\r\n            case R.id.cardGuantes:\r\n                i = new Intent(getActivity(), GuantesInventario.class);\r\n                startActivity(i);\r\n                break;\r\n        }\r\n    }\r\n    \r\n    @Override\r\n    public void onDestroyView() {\r\n        super.onDestroyView();\r\n        binding = null;\r\n    }\r\n\r\n}\r\n```\r\n\r\nI tried using smaller images but I suspect the lag comes from the code being unoptimized, i&#39;m a begginer developer on android so i&#39;m not really sure what can I do to optimize it and make it run smooth on my phone","title":"Android Card View Activity is laggy","body":"<p>I have this fragment with 8 card views and 8 images  but when I use the app on my phone it lags when i'm on this fragment and this fragment alone, anyone know why that is?\nEach card directs to a different activity on click so maybe that is what is causing the lag?</p>\n<p>Xml:</p>\n<pre><code>\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n\n\\&lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;@color/backgroundBlack&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\\&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;vertical&quot;&gt;\n    \n        &lt;RelativeLayout\n            android:layout_marginTop=&quot;30dp&quot;\n            android:layout_marginLeft=&quot;20dp&quot;\n            android:layout_marginRight=&quot;20dp&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n    \n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginTop=&quot;13dp&quot;\n                android:text=&quot;Inventario&quot;\n                android:textColor=&quot;@color/white&quot;\n                android:textSize=&quot;18dp&quot;\n                android:layout_centerHorizontal=&quot;true&quot;\n                android:textStyle=&quot;bold&quot; /&gt;\n    \n    \n        &lt;/RelativeLayout&gt;\n    \n        &lt;GridLayout\n            android:columnOrderPreserved=&quot;false&quot;\n            android:alignmentMode=&quot;alignMargins&quot;\n            android:layout_marginTop=&quot;17dp&quot;\n            android:rowCount=&quot;1&quot;\n            android:columnCount=&quot;2&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardMaquinas&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                app:elevation=&quot;60dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                android:layout_margin=&quot;12dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;\n                    android:padding=&quot;16dp&quot;&gt;\n    \n                    &lt;ImageView\n                        android:id=&quot;@+id/receiptImage&quot;\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:clickable=&quot;true&quot;\n                        android:src=&quot;@drawable/maquina&quot;\n                        tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\n    \n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:text=&quot;Maquinas&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:textSize=&quot;13dp&quot; /&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardTintas&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                app:elevation=&quot;60dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                android:layout_margin=&quot;12dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:padding=&quot;16dp&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;&gt;\n                    &lt;ImageView\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:src=&quot;@drawable/ink&quot;/&gt;\n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:text=&quot;Tintas&quot;\n                        android:textSize=&quot;13dp&quot;/&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardVasos&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                app:elevation=&quot;60dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                android:layout_margin=&quot;12dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:padding=&quot;16dp&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;&gt;\n                    &lt;ImageView\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:src=&quot;@drawable/inkcup&quot;/&gt;\n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:text=&quot;Vasos de tinta&quot;\n                        android:textSize=&quot;13dp&quot;/&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardAgujas&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                app:elevation=&quot;60dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                android:layout_margin=&quot;12dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:padding=&quot;16dp&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;&gt;\n                    &lt;ImageView\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:src=&quot;@drawable/agujas&quot;/&gt;\n    \n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:text=&quot;Agujas y cartuchos&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:textSize=&quot;13dp&quot; /&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardFuentes&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_margin=&quot;12dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                app:elevation=&quot;60dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;\n                    android:padding=&quot;16dp&quot;&gt;\n    \n                    &lt;ImageView\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:clickable=&quot;true&quot;\n                        android:src=&quot;@drawable/fuentes&quot;\n                        tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\n    \n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:text=&quot;Fuentes&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:textSize=&quot;13dp&quot; /&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardPiel&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_margin=&quot;12dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                app:elevation=&quot;60dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;\n                    android:padding=&quot;16dp&quot;&gt;\n    \n                    &lt;ImageView\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:src=&quot;@drawable/piel&quot; /&gt;\n    \n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:text=&quot;Piel sintetica&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:textSize=&quot;13dp&quot; /&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardPuntas&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_margin=&quot;12dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                app:elevation=&quot;60dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;\n                    android:padding=&quot;16dp&quot;&gt;\n    \n                    &lt;ImageView\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:src=&quot;@drawable/cartuchos&quot; /&gt;\n    \n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:text=&quot;Tubos y puntas&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:textSize=&quot;13dp&quot; /&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n            &lt;androidx.cardview.widget.CardView\n                android:id=&quot;@+id/cardGuantes&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_rowWeight=&quot;1&quot;\n                android:layout_columnWeight=&quot;1&quot;\n                android:layout_margin=&quot;12dp&quot;\n                app:cardCornerRadius=&quot;12dp&quot;\n                app:elevation=&quot;60dp&quot;&gt;\n    \n                &lt;LinearLayout\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:orientation=&quot;vertical&quot;\n                    android:padding=&quot;16dp&quot;&gt;\n    \n                    &lt;ImageView\n                        android:layout_width=&quot;100dp&quot;\n                        android:layout_height=&quot;120dp&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:src=&quot;@drawable/guantes&quot; /&gt;\n    \n                    &lt;TextView\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:layout_gravity=&quot;center&quot;\n                        android:text=&quot;Guantes&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:textSize=&quot;13dp&quot; /&gt;\n    \n                &lt;/LinearLayout&gt;\n    \n            &lt;/androidx.cardview.widget.CardView&gt;\n    \n        &lt;/GridLayout&gt;\n    \n        &lt;Button\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;100dp&quot;\n            android:visibility=&quot;invisible&quot;&gt;\n    \n        &lt;/Button&gt;\n    &lt;/LinearLayout&gt;\n</code></pre>\n<p>Fragment:</p>\n<pre><code>\npackage com.example.tattostudio.ui.home;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.cardview.widget.CardView;\nimport androidx.fragment.app.Fragment;\nimport androidx.lifecycle.ViewModelProvider;\n\nimport com.example.tattostudio.R;\nimport com.example.tattostudio.databinding.FragmentHomeBinding;\nimport com.example.tattostudio.inventariostuff.AgujasInventario;\nimport com.example.tattostudio.inventariostuff.FuentesInventario;\nimport com.example.tattostudio.inventariostuff.GuantesInventario;\nimport com.example.tattostudio.inventariostuff.MaquinasInventario;\nimport com.example.tattostudio.inventariostuff.PielInventario;\nimport com.example.tattostudio.inventariostuff.PuntasInventario;\nimport com.example.tattostudio.inventariostuff.TintasActivity;\nimport com.example.tattostudio.inventariostuff.VasosInventario;\n\npublic class HomeFragment extends Fragment implements View.OnClickListener {\n\n    private FragmentHomeBinding binding;\n    \n    public View onCreateView(@NonNull LayoutInflater inflater,\n                             ViewGroup container, Bundle savedInstanceState) {\n        HomeViewModel homeViewModel =\n                new ViewModelProvider(this).get(HomeViewModel.class);\n    \n        binding = FragmentHomeBinding.inflate(inflater, container, false);\n        View root = binding.getRoot();\n        return root;\n    }\n    \n    @Override\n    public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {\n        androidx.cardview.widget.CardView card1, card2, card3, card4, card5, card6, card7, card8;\n    \n        card1 = getView().findViewById(R.id.cardMaquinas);\n        card2 = getView().findViewById(R.id.cardTintas);\n        card3 = getView().findViewById(R.id.cardVasos);\n        card4 = getView().findViewById(R.id.cardAgujas);\n        card5 = getView().findViewById(R.id.cardFuentes);\n        card6 = getView().findViewById(R.id.cardPiel);\n        card7 = getView().findViewById(R.id.cardPuntas);\n        card8 = getView().findViewById(R.id.cardGuantes);\n    \n        card1.setOnClickListener(this);\n        card2.setOnClickListener(this);\n        card3.setOnClickListener(this);\n        card4.setOnClickListener(this);\n        card5.setOnClickListener(this);\n        card6.setOnClickListener(this);\n        card7.setOnClickListener(this);\n        card8.setOnClickListener(this);\n    \n    }\n    \n    public void onClick(View v){\n        Intent i;\n    \n        switch (v.getId()){\n            case R.id.cardMaquinas:\n                i = new Intent(getActivity(), MaquinasInventario.class);\n                startActivity(i);\n                break;\n            case R.id.cardTintas:\n                i = new Intent(getActivity(), TintasActivity.class);\n                startActivity(i);\n                break;\n            case R.id.cardVasos:\n                i = new Intent(getActivity(), VasosInventario.class);\n                startActivity(i);\n                break;\n            case R.id.cardAgujas:\n                i = new Intent(getActivity(), AgujasInventario.class);\n                startActivity(i);\n                break;\n            case R.id.cardFuentes:\n                i = new Intent(getActivity(), FuentesInventario.class);\n                startActivity(i);\n                break;\n            case R.id.cardPiel:\n                i = new Intent(getActivity(), PielInventario.class);\n                startActivity(i);\n                break;\n            case R.id.cardPuntas:\n                i = new Intent(getActivity(), PuntasInventario.class);\n                startActivity(i);\n                break;\n            case R.id.cardGuantes:\n                i = new Intent(getActivity(), GuantesInventario.class);\n                startActivity(i);\n                break;\n        }\n    }\n    \n    @Override\n    public void onDestroyView() {\n        super.onDestroyView();\n        binding = null;\n    }\n\n}\n</code></pre>\n<p>I tried using smaller images but I suspect the lag comes from the code being unoptimized, i'm a begginer developer on android so i'm not really sure what can I do to optimize it and make it run smooth on my phone</p>\n"},{"tags":["java","apache-kafka","spring-kafka","apache-kafka-streams","spring-cloud-stream-binder-kafka"],"answers":[{"comments":[{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1645120014,"post_id":71162713,"comment_id":125792670,"body_markdown":"I have corrected my answer; you can&#39;t check the listener type because it is not set up before the customizer is called.","body":"I have corrected my answer; you can&#39;t check the listener type because it is not set up before the customizer is called."}],"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645119980,"creation_date":1645118662,"answer_id":71162713,"question_id":71162370,"body_markdown":"There is no way to know that; except by using the group/dest properties.\r\n\r\nHowever, with version 3.2.x (cloud 2021.0.x, Spring for Apache Kafka 2.8.x) there is now a `CommonErrorHandler` that can handle both batch and record listeners; the `ErrorHandler` and `BatchErrorHandler`s will be removed in a future release.\r\n\r\nhttps://docs.spring.io/spring-kafka/docs/current/reference/html/#eh-summary\r\n\r\n","title":"Spring Kafka, identify if container is batch mode or not","body":"<p>There is no way to know that; except by using the group/dest properties.</p>\n<p>However, with version 3.2.x (cloud 2021.0.x, Spring for Apache Kafka 2.8.x) there is now a <code>CommonErrorHandler</code> that can handle both batch and record listeners; the <code>ErrorHandler</code> and <code>BatchErrorHandler</code>s will be removed in a future release.</p>\n<p><a href=\"https://docs.spring.io/spring-kafka/docs/current/reference/html/#eh-summary\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/docs/current/reference/html/#eh-summary</a></p>\n"}],"owner":{"account_id":18665383,"reputation":37,"user_id":13605485,"display_name":"LuckyProgrammer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672370449,"creation_date":1645117264,"question_id":71162370,"body_markdown":"    commandProcessors-in-0:\r\n      destination: internal-command-processor\r\n      consumer:\r\n        max-attempts: 1\r\n      group: command-processor-group\r\n    retrieveCohort-in-0:\r\n      destination: internal-retrieve-cohort\r\n      consumer:\r\n        max-attempts: 1\r\n        batch-mode: true\r\n      group: retrieve-cohort-group\r\n\r\nI have input with different consumer-like configurations one might have batch-mode to true and the other isn&#39;t. \r\n\r\nIn my `ListenerContainerCustomizer` I have would like to know if they have batch mode set to true is it possible.\r\n\r\n    @Bean\r\n    ListenerContainerCustomizer&lt;AbstractMessageListenerContainer&lt;?, ?&gt;&gt; customizer( ){\r\n        return (container, dest, group) -&gt; {\r\n            if (dest.equals(&quot;internal-generate-stop-reason&quot;)) {\r\n                container.setBatchErrorHandler(new RetryingBatchErrorHandler(new FixedBackOff(5000L, 2L),\r\n                        new DeadLetterPublishingRecoverer(kafkaTemplate(),\r\n                                (rec, ex) -&gt; new TopicPartition(&quot;error-dlq&quot;, rec.partition()))));\r\n            } else {\r\n                System.out.println(dest+&quot; =&gt; &quot;+container.getAssignmentsByClientId());\r\n            }\r\n        };\r\n    }","title":"Spring Kafka, identify if container is batch mode or not","body":"<pre><code>commandProcessors-in-0:\n  destination: internal-command-processor\n  consumer:\n    max-attempts: 1\n  group: command-processor-group\nretrieveCohort-in-0:\n  destination: internal-retrieve-cohort\n  consumer:\n    max-attempts: 1\n    batch-mode: true\n  group: retrieve-cohort-group\n</code></pre>\n<p>I have input with different consumer-like configurations one might have batch-mode to true and the other isn't.</p>\n<p>In my <code>ListenerContainerCustomizer</code> I have would like to know if they have batch mode set to true is it possible.</p>\n<pre><code>@Bean\nListenerContainerCustomizer&lt;AbstractMessageListenerContainer&lt;?, ?&gt;&gt; customizer( ){\n    return (container, dest, group) -&gt; {\n        if (dest.equals(&quot;internal-generate-stop-reason&quot;)) {\n            container.setBatchErrorHandler(new RetryingBatchErrorHandler(new FixedBackOff(5000L, 2L),\n                    new DeadLetterPublishingRecoverer(kafkaTemplate(),\n                            (rec, ex) -&gt; new TopicPartition(&quot;error-dlq&quot;, rec.partition()))));\n        } else {\n            System.out.println(dest+&quot; =&gt; &quot;+container.getAssignmentsByClientId());\n        }\n    };\n}\n</code></pre>\n"},{"tags":["java","apache-kafka","apache-kafka-streams","spring-cloud-stream-binder-kafka"],"answers":[{"comments":[{"owner":{"account_id":24222855,"reputation":3,"user_id":18177766,"display_name":"alkazap"},"score":0,"creation_date":1644629092,"post_id":71086839,"comment_id":125665365,"body_markdown":"Thank you for the answer, I was considering retrying, tho I&#39;m not sure what would be a reasonable number of retries. My use case is audio transcription, Kafka stream contains audio chunks, and I transcribe them using Vosk API. While it&#39;s possible that the cause of the error is a faulty message, it could also be a run-time error. I wonder, if I use RetryTemplate, will the message processing of messages that come after the one that&#39;s being retried be stalled? Is there no way of manual acknowledgment in KStream?","body":"Thank you for the answer, I was considering retrying, tho I&#39;m not sure what would be a reasonable number of retries. My use case is audio transcription, Kafka stream contains audio chunks, and I transcribe them using Vosk API. While it&#39;s possible that the cause of the error is a faulty message, it could also be a run-time error. I wonder, if I use RetryTemplate, will the message processing of messages that come after the one that&#39;s being retried be stalled? Is there no way of manual acknowledgment in KStream?"},{"owner":{"account_id":2365019,"reputation":5194,"user_id":2070861,"accept_rate":100,"display_name":"sobychacko"},"score":0,"creation_date":1644637258,"post_id":71086839,"comment_id":125666237,"body_markdown":"While the reties are happening, the messages that come after the one that is currently being retried simply wait and Kafka Streams delivers the message to your stream once the stream thread that is doing the retrying is freed. Kafka Streams processes records on a per-record basis. It sounds like ordering matters for the audio chunks, if that&#39;s not the case, then you can increase concurrency (number of stream threads) to handle chunks concurrently.","body":"While the reties are happening, the messages that come after the one that is currently being retried simply wait and Kafka Streams delivers the message to your stream once the stream thread that is doing the retrying is freed. Kafka Streams processes records on a per-record basis. It sounds like ordering matters for the audio chunks, if that&#39;s not the case, then you can increase concurrency (number of stream threads) to handle chunks concurrently."},{"owner":{"account_id":2365019,"reputation":5194,"user_id":2070861,"accept_rate":100,"display_name":"sobychacko"},"score":0,"creation_date":1644637362,"post_id":71086839,"comment_id":125666248,"body_markdown":"There are ways to access the consumer that is used by Kafka Streams and do a manual acknowledgment, but that is too low-level and might involve the use of reflection (not sure about that, but I remember that in the past some fields were private and thus you end up using some reflection to access the consumer and then invoke manual ack).","body":"There are ways to access the consumer that is used by Kafka Streams and do a manual acknowledgment, but that is too low-level and might involve the use of reflection (not sure about that, but I remember that in the past some fields were private and thus you end up using some reflection to access the consumer and then invoke manual ack)."},{"owner":{"account_id":24222855,"reputation":3,"user_id":18177766,"display_name":"alkazap"},"score":0,"creation_date":1644638223,"post_id":71086839,"comment_id":125666336,"body_markdown":"Exactly, ordering matters, so I wanted to make sure that retires will stall the processing of newer messages. Thank you so much for your help!","body":"Exactly, ordering matters, so I wanted to make sure that retires will stall the processing of newer messages. Thank you so much for your help!"}],"tags":[],"owner":{"account_id":2365019,"reputation":5194,"user_id":2070861,"accept_rate":100,"display_name":"sobychacko"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644616242,"creation_date":1644615829,"answer_id":71086839,"question_id":71075925,"body_markdown":"You can try the branching feature in Kafka Streams to control the execution of the chained methods. For example, here is a pseudo-code that you can try. \r\nYou can possibly use this as a starting point and adapt this to your particular use case. \r\n\r\n```\r\nfinal Map&lt;String, ? extends KStream&lt;?, String&gt;&gt; branches = \r\ninput.split()\r\n     .branch(k, v) -&gt; {\r\n        try {\r\n          methodReturningCompletableFuture(value).get();\r\n          return true;\r\n        }\r\n        catch (Exception e) {\r\n          return false;\r\n        }\r\n      }, Branched.as(&quot;good-records&quot;))\r\n      .defaultBranch();\r\n\r\nfinal KStream&lt;?, String&gt; kStream = branches.get(&quot;good-records&quot;);\r\n\r\n kStream.foreach((key, value) -&gt; otherMethod(key, value));\r\n```\r\n\r\nThe idea here is that you will only send the records that didn&#39;t throw an exception to the named branch `good-records`, everything else goes into a default branch which we simply ignore in this pseudo-code. Then you invoke additional chained methods (as this `foreach` call shows) only for those &quot;good&quot; records. \r\n\r\nThis does not solve the problem of not acknowledging the message after an exception is thrown. That seems to be a bit challenging. However, I am curious about that use case. When an exception happens and you handle it, why don&#39;t you want to ack the message? The requirements seem to be a bit rigid without using a DLT. The ideal solution here is that you might want to introduce some retries and once exhausted from the retries, send the record to a DLT which makes Kafka Streams consumer acknowledges the message. Then the application moves on to the next offset. \r\n\r\nThe call `methodReturningCompletableFuture(value).get()` simply waits until a default or configured timeout is reached, assuming that `methodReturningCompletableFuture()` returns a `Future` object. Therefore, that is already a good approach to wait inside the `KStream` map operation. I don&#39;t think anything else is necessary to make it wait further. ","title":"How to wait for future inside Kafka Stream map()?","body":"<p>You can try the branching feature in Kafka Streams to control the execution of the chained methods. For example, here is a pseudo-code that you can try.\nYou can possibly use this as a starting point and adapt this to your particular use case.</p>\n<pre><code>final Map&lt;String, ? extends KStream&lt;?, String&gt;&gt; branches = \ninput.split()\n     .branch(k, v) -&gt; {\n        try {\n          methodReturningCompletableFuture(value).get();\n          return true;\n        }\n        catch (Exception e) {\n          return false;\n        }\n      }, Branched.as(&quot;good-records&quot;))\n      .defaultBranch();\n\nfinal KStream&lt;?, String&gt; kStream = branches.get(&quot;good-records&quot;);\n\n kStream.foreach((key, value) -&gt; otherMethod(key, value));\n</code></pre>\n<p>The idea here is that you will only send the records that didn't throw an exception to the named branch <code>good-records</code>, everything else goes into a default branch which we simply ignore in this pseudo-code. Then you invoke additional chained methods (as this <code>foreach</code> call shows) only for those &quot;good&quot; records.</p>\n<p>This does not solve the problem of not acknowledging the message after an exception is thrown. That seems to be a bit challenging. However, I am curious about that use case. When an exception happens and you handle it, why don't you want to ack the message? The requirements seem to be a bit rigid without using a DLT. The ideal solution here is that you might want to introduce some retries and once exhausted from the retries, send the record to a DLT which makes Kafka Streams consumer acknowledges the message. Then the application moves on to the next offset.</p>\n<p>The call <code>methodReturningCompletableFuture(value).get()</code> simply waits until a default or configured timeout is reached, assuming that <code>methodReturningCompletableFuture()</code> returns a <code>Future</code> object. Therefore, that is already a good approach to wait inside the <code>KStream</code> map operation. I don't think anything else is necessary to make it wait further.</p>\n"}],"owner":{"account_id":24222855,"reputation":3,"user_id":18177766,"display_name":"alkazap"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":556,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":71086839,"answer_count":1,"score":-1,"last_activity_date":1672370417,"creation_date":1644560664,"question_id":71075925,"body_markdown":"I am implementing Spring Boot application in Java, using Spring Cloud Stream with Kafka Streams binder.\r\n\r\nI need to implement blocking operation inside of KStream map method like so:\r\n\r\n```java\r\npublic Consumer&lt;KStream&lt;?, ?&gt;&gt; sink() {\r\n    return input -&gt; input\r\n        .mapValues(value -&gt; methodReturningCompletableFuture(value).get())\r\n        .foreach((key, value) -&gt; otherMethod(key, value));\r\n}\r\n```\r\n\r\n`completableFuture.get()` throws exceptions (InterruptedException, ExecutionException)\r\n\r\nHow to handle these exceptions so that the chained method doesn&#39;t get executed and **the Kafka message is not acknowledged**? I cannot afford message loss, sending it to a dead letter topic is not an option.\r\n\r\nIs there a better way of blocking inside `map()`?","title":"How to wait for future inside Kafka Stream map()?","body":"<p>I am implementing Spring Boot application in Java, using Spring Cloud Stream with Kafka Streams binder.</p>\n<p>I need to implement blocking operation inside of KStream map method like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Consumer&lt;KStream&lt;?, ?&gt;&gt; sink() {\n    return input -&gt; input\n        .mapValues(value -&gt; methodReturningCompletableFuture(value).get())\n        .foreach((key, value) -&gt; otherMethod(key, value));\n}\n</code></pre>\n<p><code>completableFuture.get()</code> throws exceptions (InterruptedException, ExecutionException)</p>\n<p>How to handle these exceptions so that the chained method doesn't get executed and <strong>the Kafka message is not acknowledged</strong>? I cannot afford message loss, sending it to a dead letter topic is not an option.</p>\n<p>Is there a better way of blocking inside <code>map()</code>?</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams","spring-cloud-stream-binder-kafka"],"comments":[{"owner":{"account_id":5871551,"reputation":139,"user_id":4623737,"accept_rate":80,"display_name":"Surendra Rathore"},"score":3,"creation_date":1643287295,"post_id":70877427,"comment_id":125302442,"body_markdown":"Something looks fishy here - \n\n                @Override\n                public void init(org.apache.kafka.streams.processor.ProcessorContext pc)\n                {\n                    this.context = context;\n                }\nShould  this.context = context; be   this.context = pc; Instead of context","body":"Something looks fishy here -                   @Override                 public void init(org.apache.kafka.streams.processor.ProcessorContext pc)                 {                     this.context = context;                 } Should  this.context = context; be   this.context = pc; Instead of context"},{"owner":{"account_id":470642,"reputation":8064,"user_id":877942,"accept_rate":79,"display_name":"Shades88"},"score":0,"creation_date":1643299437,"post_id":70877427,"comment_id":125307901,"body_markdown":"omg! how stupid of me. Thanks a lot man. Please post that as answer so I can accept","body":"omg! how stupid of me. Thanks a lot man. Please post that as answer so I can accept"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1643385314,"post_id":70877427,"comment_id":125333447,"body_markdown":"Better to just remove your question altogether. The answer would not solve any technical task. Just a typo does not justify a whole answer.","body":"Better to just remove your question altogether. The answer would not solve any technical task. Just a typo does not justify a whole answer."}],"answers":[{"tags":[],"owner":{"account_id":5871551,"reputation":139,"user_id":4623737,"accept_rate":80,"display_name":"Surendra Rathore"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1643409909,"creation_date":1643409909,"answer_id":70901098,"question_id":70877427,"body_markdown":"Please change \r\n\r\n \r\n\r\n    @Override\r\n     public void init(org.apache.kafka.streams.processor.ProcessorContext pc)\r\n     {\r\n                        this.context = context;\r\n    }\r\n\r\nTo \r\n\r\n    @Override\r\n     public void init(org.apache.kafka.streams.processor.ProcessorContext pc)\r\n     {\r\n                        this.context = pc;\r\n    }\r\n\r\nthis.context = context // both are same, looks like a typo.\r\n\r\n","title":"Access record&#39;s partition numebr in kafka streams","body":"<p>Please change</p>\n<pre><code>@Override\n public void init(org.apache.kafka.streams.processor.ProcessorContext pc)\n {\n                    this.context = context;\n}\n</code></pre>\n<p>To</p>\n<pre><code>@Override\n public void init(org.apache.kafka.streams.processor.ProcessorContext pc)\n {\n                    this.context = pc;\n}\n</code></pre>\n<p>this.context = context // both are same, looks like a typo.</p>\n"}],"owner":{"account_id":470642,"reputation":8064,"user_id":877942,"accept_rate":79,"display_name":"Shades88"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70901098,"answer_count":1,"score":0,"last_activity_date":1672370372,"creation_date":1643281217,"question_id":70877427,"body_markdown":"I am using Kafka 2.6 with spring cloud stream kafka-streams binder. I want to access record headers, partition no etc in my Kafka streams application. I read about using Processor API, using ProcessorContext etc. But everytime ProcessorContext object is coming null.\r\n\r\nBelow is the code\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    @StreamListener(Bindings.input)\r\n    @SendTo(Bindings.output)\r\n    public KStream&lt;String, String&gt; process(KStream&lt;String, String&gt; input)\r\n    {\r\n        return input.transform(new TransformerSupplier&lt;String, String, KeyValue&lt;String, String&gt;&gt;()\r\n        {\r\n            public Transformer&lt;String, String, KeyValue&lt;String, String&gt;&gt; get() \r\n            {\r\n                return new Transformer&lt;String, String, KeyValue&lt;String, String&gt;&gt;() \r\n                {\r\n\r\n                    private int total = 0;\r\n                    ProcessorContext context;\r\n\r\n                    @Override\r\n                    public void close() {\r\n                    }\r\n\r\n                    @Override\r\n                    public void init(org.apache.kafka.streams.processor.ProcessorContext pc)\r\n                    {\r\n                        this.context = context;\r\n                    }\r\n\r\n                    @Override\r\n                    public KeyValue&lt;String, String&gt; transform(String k, String v)\r\n                    {\r\n                        System.out.println(&quot;ProcessorContext: &quot;+this.context);\r\n                        System.out.println(&quot;value: &quot;+v);\r\n                        return new KeyValue&lt;&gt;(k, v);\r\n                    }\r\n                };\r\n            }\r\n        });\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nIn this code ProcessorContext is always printed as null. I also tried using ListenerContainerCustomizer for spring-boot. But that also is not working\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    @Bean\r\n    ListenerContainerCustomizer&lt;AbstractMessageListenerContainer&lt;?, ?&gt;&gt; customizer()\r\n    {\r\n        return (container, dest, group) -&gt;\r\n        {\r\n            container.setRecordInterceptor(record -&gt;\r\n            {\r\n                System.out.println(&quot;&gt;&gt;&gt;&gt; Received record, checking headers&quot;);\r\n                Headers headers = record.headers();\r\n                System.out.println(&quot;&gt;&gt;&gt;&gt; Header length: &quot; + headers.toArray().length);\r\n                for (Header header : headers)\r\n                {\r\n                    if (header.key().equalsIgnoreCase(&quot;eventtype&quot;))\r\n                    {\r\n                        String value = String.valueOf(header.value());\r\n                        if (!value.equalsIgnoreCase(&quot;PUBLISHED&quot;))\r\n                        {\r\n                            System.out.println(&quot;Event type from header not PUBLISHED, skipping record&quot;);\r\n                            return null;\r\n                        }\r\n                    }\r\n                }\r\n                System.out.println(&quot;Processing record&quot;);\r\n                return record;\r\n            });\r\n        };\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nI printed list of beans registered with beans I could see above one. But it never works.\r\nI anyways require first approach to work since I like to run some business logic with partition number. \r\n\r\nPlease help badly stuck since many days.","title":"Access record&#39;s partition numebr in kafka streams","body":"<p>I am using Kafka 2.6 with spring cloud stream kafka-streams binder. I want to access record headers, partition no etc in my Kafka streams application. I read about using Processor API, using ProcessorContext etc. But everytime ProcessorContext object is coming null.</p>\n<p>Below is the code</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>@StreamListener(Bindings.input)\n@SendTo(Bindings.output)\npublic KStream&lt;String, String&gt; process(KStream&lt;String, String&gt; input)\n{\n    return input.transform(new TransformerSupplier&lt;String, String, KeyValue&lt;String, String&gt;&gt;()\n    {\n        public Transformer&lt;String, String, KeyValue&lt;String, String&gt;&gt; get() \n        {\n            return new Transformer&lt;String, String, KeyValue&lt;String, String&gt;&gt;() \n            {\n\n                private int total = 0;\n                ProcessorContext context;\n\n                @Override\n                public void close() {\n                }\n\n                @Override\n                public void init(org.apache.kafka.streams.processor.ProcessorContext pc)\n                {\n                    this.context = context;\n                }\n\n                @Override\n                public KeyValue&lt;String, String&gt; transform(String k, String v)\n                {\n                    System.out.println(\"ProcessorContext: \"+this.context);\n                    System.out.println(\"value: \"+v);\n                    return new KeyValue&lt;&gt;(k, v);\n                }\n            };\n        }\n    });\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>In this code ProcessorContext is always printed as null. I also tried using ListenerContainerCustomizer for spring-boot. But that also is not working</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>@Bean\nListenerContainerCustomizer&lt;AbstractMessageListenerContainer&lt;?, ?&gt;&gt; customizer()\n{\n    return (container, dest, group) -&gt;\n    {\n        container.setRecordInterceptor(record -&gt;\n        {\n            System.out.println(\"&gt;&gt;&gt;&gt; Received record, checking headers\");\n            Headers headers = record.headers();\n            System.out.println(\"&gt;&gt;&gt;&gt; Header length: \" + headers.toArray().length);\n            for (Header header : headers)\n            {\n                if (header.key().equalsIgnoreCase(\"eventtype\"))\n                {\n                    String value = String.valueOf(header.value());\n                    if (!value.equalsIgnoreCase(\"PUBLISHED\"))\n                    {\n                        System.out.println(\"Event type from header not PUBLISHED, skipping record\");\n                        return null;\n                    }\n                }\n            }\n            System.out.println(\"Processing record\");\n            return record;\n        });\n    };\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>I printed list of beans registered with beans I could see above one. But it never works.\nI anyways require first approach to work since I like to run some business logic with partition number.</p>\n<p>Please help badly stuck since many days.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"answers":[{"tags":[],"owner":{"account_id":6384814,"reputation":60273,"user_id":4953079,"display_name":"Matthias J. Sax"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672189119,"creation_date":1672189119,"answer_id":74935358,"question_id":74892305,"body_markdown":"If you want to modify headers, you would need to use `process()` step.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    stream.process(() -&gt; new MyProcessor());\r\n\r\n    MyProcessor implements api.Processor&lt;...&gt; {\r\n\r\n        public void process(Record record) {\r\n          // access headers via `record.headers()`\r\n          // modify with `withHeaders(...)`\r\n\r\n          context.forward(record); // send result record downstream\r\n        }\r\n    }","title":"Kafka Stream to send Multiple messages with different headers to same topic","body":"<p>If you want to modify headers, you would need to use <code>process()</code> step.</p>\n<pre class=\"lang-java prettyprint-override\"><code>stream.process(() -&gt; new MyProcessor());\n\nMyProcessor implements api.Processor&lt;...&gt; {\n\n    public void process(Record record) {\n      // access headers via `record.headers()`\n      // modify with `withHeaders(...)`\n\n      context.forward(record); // send result record downstream\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19085824,"reputation":51,"user_id":13937130,"display_name":"Sajeevan mp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":339,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672370113,"creation_date":1671732315,"question_id":74892305,"body_markdown":"I need a streamer that needs to send multiple messages to the same topic but with different kafka headers. \r\n\r\nI am able to send the message like below with splitting with ~ , but all messages go with the same headers.\r\n\r\n\r\n    inputStream\r\n      .transformValues(()-&gt;new Transformation())\r\n      .flatMapValues(value-&gt;Arrays.asList(value.split(&quot;~&quot;)))\r\n      .split()\r\n        .branch(\r\n          (key,value)-&gt;key.startsWith(&quot;ERR&quot;),\r\n          Branched.withConsumer(ks -&gt; ks.to(errorTopic)))\r\n        .defaultBranch(Branched.withConsumer(ks -&gt; ks.to(outboundTopic)));\r\n\t\t\t\t","title":"Kafka Stream to send Multiple messages with different headers to same topic","body":"<p>I need a streamer that needs to send multiple messages to the same topic but with different kafka headers.</p>\n<p>I am able to send the message like below with splitting with ~ , but all messages go with the same headers.</p>\n<pre><code>inputStream\n  .transformValues(()-&gt;new Transformation())\n  .flatMapValues(value-&gt;Arrays.asList(value.split(&quot;~&quot;)))\n  .split()\n    .branch(\n      (key,value)-&gt;key.startsWith(&quot;ERR&quot;),\n      Branched.withConsumer(ks -&gt; ks.to(errorTopic)))\n    .defaultBranch(Branched.withConsumer(ks -&gt; ks.to(outboundTopic)));\n            \n</code></pre>\n"},{"tags":["java","testing","apache-kafka","apache-kafka-streams"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672370032,"creation_date":1672370032,"answer_id":74957835,"question_id":74939616,"body_markdown":"Your method just operates on a stream. It does not generate any output topic since filter operation is stateless. \r\n\r\nYou provide the output topic name on your own, for your own tests unrelated to a specific processor. Then test the output topic contains the data you want","title":"How to test a Kafka Streams Function with TestTopologyDriver?","body":"<p>Your method just operates on a stream. It does not generate any output topic since filter operation is stateless.</p>\n<p>You provide the output topic name on your own, for your own tests unrelated to a specific processor. Then test the output topic contains the data you want</p>\n"}],"owner":{"account_id":6666027,"reputation":498,"user_id":5143652,"accept_rate":80,"display_name":"manuelgr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672370032,"creation_date":1672226453,"question_id":74939616,"body_markdown":"Function to test:\r\n \r\n\r\n    @Bean\r\n    public Function&lt;KStream&lt;String, String&gt;, KStream&lt;String, String&gt;&gt; process() {\r\n    \r\n        return processKStream-&gt; processKStream\r\n                .filter((k, v) -&gt; v.getId() &gt; 10;\r\n    }\r\n\r\nTest setup:\r\n\r\n    TestTopology testTopology = new TestTopology()\r\n    \r\n    KStream&lt;String, String&gt; processKStream= streamsBuilder.stream(&quot;input-topic&quot;, Consumed.with(stringSerde, stringSerde));\r\n    \r\n    testTopology.process().apply(processKStream);\r\n    \r\n    topologyTestDriver = new TopologyTestDriver(streamsBuilder.build());\r\n    \r\n    processTaskTestInputTopic = topologyTestDriver.createInputTopic(&quot;input-topic&quot;, stringSerde.serializer(), stringSerde.serializer());\r\n    processTaskTestOutputTopic = topologyTestDriver.createOutputTopic(&quot;HERE GOES TOPIC NAME&quot;, stringSerde.deserializer(), stringSerde.deserializer());\r\n\r\nMy function &quot;process&quot; does not output a topic and therefore I do not have a name for it. How would I test this function?\r\n\r\nThank you for your help!","title":"How to test a Kafka Streams Function with TestTopologyDriver?","body":"<p>Function to test:</p>\n<pre><code>@Bean\npublic Function&lt;KStream&lt;String, String&gt;, KStream&lt;String, String&gt;&gt; process() {\n\n    return processKStream-&gt; processKStream\n            .filter((k, v) -&gt; v.getId() &gt; 10;\n}\n</code></pre>\n<p>Test setup:</p>\n<pre><code>TestTopology testTopology = new TestTopology()\n\nKStream&lt;String, String&gt; processKStream= streamsBuilder.stream(&quot;input-topic&quot;, Consumed.with(stringSerde, stringSerde));\n\ntestTopology.process().apply(processKStream);\n\ntopologyTestDriver = new TopologyTestDriver(streamsBuilder.build());\n\nprocessTaskTestInputTopic = topologyTestDriver.createInputTopic(&quot;input-topic&quot;, stringSerde.serializer(), stringSerde.serializer());\nprocessTaskTestOutputTopic = topologyTestDriver.createOutputTopic(&quot;HERE GOES TOPIC NAME&quot;, stringSerde.deserializer(), stringSerde.deserializer());\n</code></pre>\n<p>My function &quot;process&quot; does not output a topic and therefore I do not have a name for it. How would I test this function?</p>\n<p>Thank you for your help!</p>\n"},{"tags":["java","kotlin","kotlin-multiplatform"],"answers":[{"tags":[],"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1672368505,"creation_date":1672368505,"answer_id":74957737,"question_id":74957575,"body_markdown":"You are correct. Kotlin Multiplatform regards Java (and the JVM, by extension) as a compile target. That means that anything in the `java.*` and `javax.*` namespaces (as opposed to those in the `kotlin.*` and `kotlinx.*` namespaces, which are explicitly wrapped on the Kotlin side) cannot be used when targeting platforms other than the JVM.\r\n\r\nIt&#39;s a change in paradigm. When Kotlin first came out, it was intended as &quot;Java but better&quot;, or &quot;Java but safer&quot;. Interoperability with Java was at the forefront. And while Kotlin still supports tight integration with Java, it&#39;s a language in its own right, and Kotlin Multiplatform aims to see Kotlin able to evolve independently of Java, at least on platforms that aren&#39;t the JVM.","title":"Kotlin Multi platform can you use Java or only Kotlin?","body":"<p>You are correct. Kotlin Multiplatform regards Java (and the JVM, by extension) as a compile target. That means that anything in the <code>java.*</code> and <code>javax.*</code> namespaces (as opposed to those in the <code>kotlin.*</code> and <code>kotlinx.*</code> namespaces, which are explicitly wrapped on the Kotlin side) cannot be used when targeting platforms other than the JVM.</p>\n<p>It's a change in paradigm. When Kotlin first came out, it was intended as &quot;Java but better&quot;, or &quot;Java but safer&quot;. Interoperability with Java was at the forefront. And while Kotlin still supports tight integration with Java, it's a language in its own right, and Kotlin Multiplatform aims to see Kotlin able to evolve independently of Java, at least on platforms that aren't the JVM.</p>\n"}],"owner":{"account_id":4742401,"reputation":864,"user_id":7858768,"display_name":"user7858768"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":414,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1672368505,"creation_date":1672366130,"question_id":74957575,"body_markdown":"For Kotlin Multi-Platform, can you only use Kotlin or Java as well, to create cross-platform code? https://kotlinlang.org/docs/multiplatform.html \r\n\r\nThere is no mention of Java usage in https://kotlinlang.org/docs/native-overview.html#interoperability hence I doubt java is allowed to compiled into this native approach. \r\n\r\nIf java cannot be used that means all the Java libraries that exist cannot be used with this either (unless they are forked and migrated to Kotlin). ","title":"Kotlin Multi platform can you use Java or only Kotlin?","body":"<p>For Kotlin Multi-Platform, can you only use Kotlin or Java as well, to create cross-platform code? <a href=\"https://kotlinlang.org/docs/multiplatform.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/multiplatform.html</a></p>\n<p>There is no mention of Java usage in <a href=\"https://kotlinlang.org/docs/native-overview.html#interoperability\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/native-overview.html#interoperability</a> hence I doubt java is allowed to compiled into this native approach.</p>\n<p>If java cannot be used that means all the Java libraries that exist cannot be used with this either (unless they are forked and migrated to Kotlin).</p>\n"},{"tags":["java","lua","luaj"],"answers":[{"tags":[],"owner":{"account_id":8860436,"reputation":45945,"user_id":7509065,"display_name":"Joseph Sible-Reinstate Monica"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672367881,"creation_date":1672367881,"answer_id":74957692,"question_id":74956695,"body_markdown":"Instead of a `List&lt;?&gt;`, pass it a `LuaTable`. [`LuaTable#listOf(LuaValue[])`][1] will be helpful in converting the former to the latter.\r\n\r\n\r\n  [1]: http://luaj.org/luaj/3.0/api/org/luaj/vm2/LuaValue.html#listOf(org.luaj.vm2.LuaValue[])","title":"How can I use a list as a function parameter with LuaJ?","body":"<p>Instead of a <code>List&lt;?&gt;</code>, pass it a <code>LuaTable</code>. <a href=\"http://luaj.org/luaj/3.0/api/org/luaj/vm2/LuaValue.html#listOf(org.luaj.vm2.LuaValue%5B%5D)\" rel=\"nofollow noreferrer\"><code>LuaTable#listOf(LuaValue[])</code></a> will be helpful in converting the former to the latter.</p>\n"}],"owner":{"account_id":20365637,"reputation":37,"user_id":14939053,"display_name":"Wolfsurge"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672367881,"creation_date":1672353993,"question_id":74956695,"body_markdown":"So, I have a function in a Lua script that takes an parameter.\r\n```lua\r\ntestFunction = function(listIn)\r\n    for i, obj in ipairs(listIn) do\r\n        print(i)\r\n    end\r\nend\r\n```\r\n\r\nThis parameter is obviously meant to be a list of objects, but I simply cannot figure out how to pass this parameter in.\r\n\r\nI use an interface for the script, so it would look something like this:\r\n\r\n```java\r\npublic interface LuaScript {\r\n    void testFunction(List&lt;?&gt; listIn);\r\n}\r\n```\r\n\r\nThis is then called, and that part works fine, it&#39;s just that when it comes to the lua interpretation, it throws a `LuaError`, giving the message &quot;bad argument: table expected, got userdata&quot;.\r\n\r\nAny help is appreciated.\r\n","title":"How can I use a list as a function parameter with LuaJ?","body":"<p>So, I have a function in a Lua script that takes an parameter.</p>\n<pre class=\"lang-lua prettyprint-override\"><code>testFunction = function(listIn)\n    for i, obj in ipairs(listIn) do\n        print(i)\n    end\nend\n</code></pre>\n<p>This parameter is obviously meant to be a list of objects, but I simply cannot figure out how to pass this parameter in.</p>\n<p>I use an interface for the script, so it would look something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface LuaScript {\n    void testFunction(List&lt;?&gt; listIn);\n}\n</code></pre>\n<p>This is then called, and that part works fine, it's just that when it comes to the lua interpretation, it throws a <code>LuaError</code>, giving the message &quot;bad argument: table expected, got userdata&quot;.</p>\n<p>Any help is appreciated.</p>\n"},{"tags":["java","jackson"],"answers":[{"comments":[{"owner":{"account_id":228932,"reputation":23614,"user_id":491553,"accept_rate":45,"display_name":"Ryan Shillington"},"score":109,"creation_date":1378914457,"post_id":10519316,"comment_id":27628943,"body_markdown":"Don&#39;t do this, or else you&#39;ll have to do it for every property.  See thehpi&#39;s response below.","body":"Don&#39;t do this, or else you&#39;ll have to do it for every property.  See thehpi&#39;s response below."},{"owner":{"account_id":2680559,"reputation":5110,"user_id":2317829,"accept_rate":76,"display_name":"eebbesen"},"score":1,"creation_date":1388426450,"post_id":10519316,"comment_id":31266118,"body_markdown":"I was able to only annotate one property, but it did change the order of properties in the generated string: annotated properties showed up last. (Jackson 2.3.0)","body":"I was able to only annotate one property, but it did change the order of properties in the generated string: annotated properties showed up last. (Jackson 2.3.0)"},{"owner":{"account_id":2203460,"reputation":6682,"user_id":1947251,"accept_rate":86,"display_name":"DavidR"},"score":1,"creation_date":1447717530,"post_id":10519316,"comment_id":55261767,"body_markdown":"@RyanShillington - Correct me if I&#39;m wrong, but this is your only option if the JSON string you are parsing from does not use a consistent format, i.e., uses both camelCase and underscore?","body":"@RyanShillington - Correct me if I&#39;m wrong, but this is your only option if the JSON string you are parsing from does not use a consistent format, i.e., uses both camelCase and underscore?"},{"owner":{"account_id":228932,"reputation":23614,"user_id":491553,"accept_rate":45,"display_name":"Ryan Shillington"},"score":0,"creation_date":1447786593,"post_id":10519316,"comment_id":55297314,"body_markdown":"@DavidR That is correct. I&#39;m assuming you can&#39;t fix the source data?  That sucks.","body":"@DavidR That is correct. I&#39;m assuming you can&#39;t fix the source data?  That sucks."},{"owner":{"account_id":10830,"reputation":25297,"user_id":20634,"display_name":"Alex"},"score":0,"creation_date":1563643358,"post_id":10519316,"comment_id":100770770,"body_markdown":"@PaulTsai ok, so feel free to use them :)","body":"@PaulTsai ok, so feel free to use them :)"},{"owner":{"account_id":1863638,"reputation":357,"user_id":1687668,"display_name":"TonyLxc"},"score":0,"creation_date":1568679135,"post_id":10519316,"comment_id":102342332,"body_markdown":"Using `propertyNamingStrategy` is a much better way than annotating each property.","body":"Using <code>propertyNamingStrategy</code> is a much better way than annotating each property."}],"tags":[],"owner":{"account_id":10830,"reputation":25297,"user_id":20634,"display_name":"Alex"},"comment_count":6,"down_vote_count":18,"up_vote_count":150,"is_accepted":true,"score":132,"last_activity_date":1336577593,"creation_date":1336577593,"answer_id":10519316,"question_id":10519265,"body_markdown":"You should use the `@JsonProperty` on the field you want to change the default name mapping.\r\n\r\n    class User{\r\n        @JsonProperty(&quot;first_name&quot;)\r\n        protected String firstName;\r\n        protected String getFirstName(){return firstName;}\r\n    }\r\n\r\nFor more info: the [API][1]\r\n\r\n\r\n  [1]: http://jackson.codehaus.org/1.1.2/javadoc/org/codehaus/jackson/annotate/JsonProperty.html","title":"Jackson overcoming underscores in favor of camel-case","body":"<p>You should use the <code>@JsonProperty</code> on the field you want to change the default name mapping.</p>\n\n<pre><code>class User{\n    @JsonProperty(\"first_name\")\n    protected String firstName;\n    protected String getFirstName(){return firstName;}\n}\n</code></pre>\n\n<p>For more info: the <a href=\"http://jackson.codehaus.org/1.1.2/javadoc/org/codehaus/jackson/annotate/JsonProperty.html\" rel=\"noreferrer\">API</a></p>\n"},{"comments":[{"owner":{"account_id":13566,"reputation":48845,"user_id":27358,"accept_rate":76,"display_name":"David Moles"},"score":5,"creation_date":1373575854,"post_id":11632040,"comment_id":25620746,"body_markdown":"Note that this was only introduced in Jackson 1.9.","body":"Note that this was only introduced in Jackson 1.9."},{"owner":{"account_id":2070924,"reputation":4391,"user_id":1845432,"accept_rate":65,"display_name":"Thermech"},"score":63,"creation_date":1458563817,"post_id":11632040,"comment_id":59901032,"body_markdown":"@deprecated Since 2.7 use SNAKE_CASE instead;","body":"@deprecated Since 2.7 use SNAKE_CASE instead;"},{"owner":{"account_id":1405987,"reputation":16394,"user_id":1385441,"accept_rate":77,"display_name":"Ram Patra"},"score":2,"creation_date":1470439715,"post_id":11632040,"comment_id":64968221,"body_markdown":"one qq: when i use snake_case naming strategy will the json files with underscores be deserialized to camel case?","body":"one qq: when i use snake_case naming strategy will the json files with underscores be deserialized to camel case?"},{"owner":{"account_id":9399,"reputation":17347,"user_id":17339,"accept_rate":87,"display_name":"Drew Stephens"},"score":3,"creation_date":1474402867,"post_id":11632040,"comment_id":66514708,"body_markdown":"@Ramswaroop Yes, this makes Jackson both speak and expect snake_case","body":"@Ramswaroop Yes, this makes Jackson both speak and expect snake_case"},{"owner":{"account_id":1405987,"reputation":16394,"user_id":1385441,"accept_rate":77,"display_name":"Ram Patra"},"score":0,"creation_date":1474432139,"post_id":11632040,"comment_id":66523155,"body_markdown":"@DrewStephens But I couldn&#39;t get this behaviour, I had to explicitly add `@JsonProperty(&quot;some_property&quot;)` to my camel case java variable to properly deserialise.","body":"@DrewStephens But I couldn&#39;t get this behaviour, I had to explicitly add <code>@JsonProperty(&quot;some_property&quot;)</code> to my camel case java variable to properly deserialise."},{"owner":{"account_id":9399,"reputation":17347,"user_id":17339,"accept_rate":87,"display_name":"Drew Stephens"},"score":1,"creation_date":1474463634,"post_id":11632040,"comment_id":66541504,"body_markdown":"@Ramswaroop For me with Jackson 2.7.3 and properties annotated with just `@JsonProperty` (name inferred from normal `camelCase` Java properties) `PropertyNamingStrategy.SNAKE_CASE` made deserialization stop working with camelCase JSON (as I had been using) and require snake_case.","body":"@Ramswaroop For me with Jackson 2.7.3 and properties annotated with just <code>@JsonProperty</code> (name inferred from normal <code>camelCase</code> Java properties) <code>PropertyNamingStrategy.SNAKE_CASE</code> made deserialization stop working with camelCase JSON (as I had been using) and require snake_case."},{"owner":{"account_id":1405987,"reputation":16394,"user_id":1385441,"accept_rate":77,"display_name":"Ram Patra"},"score":1,"creation_date":1474467869,"post_id":11632040,"comment_id":66544671,"body_markdown":"@DrewStephens Just so that we are on the same page, this is the question which I am referring to: http://stackoverflow.com/questions/38809959/deserialising-json-with-underscores-to-camel-case-in-java-using-jackson. I had an assumption in mind that using `PropertyNamingStrategy` as `SNAKE_CASE` will make it work both ways instead of requiring me to use `@JsonProperty`.","body":"@DrewStephens Just so that we are on the same page, this is the question which I am referring to: <a href=\"http://stackoverflow.com/questions/38809959/deserialising-json-with-underscores-to-camel-case-in-java-using-jackson\" title=\"deserialising json with underscores to camel case in java using jackson\">stackoverflow.com/questions/38809959/&hellip;</a>. I had an assumption in mind that using <code>PropertyNamingStrategy</code> as <code>SNAKE_CASE</code> will make it work both ways instead of requiring me to use <code>@JsonProperty</code>."},{"owner":{"account_id":23674,"reputation":114076,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"score":0,"creation_date":1489009644,"post_id":11632040,"comment_id":72489183,"body_markdown":"@RamPatra naming strategy does work both ways, reading and writing. There is nothing in javadocs (`PropertyNamingStrategy`, `@JsonNaming`) that claims it to only work for serialization, and there are unit tests to verify it also works for reading. You only should use `@JsonProperty` for overriding naming of individual properties.","body":"@RamPatra naming strategy does work both ways, reading and writing. There is nothing in javadocs (<code>PropertyNamingStrategy</code>, <code>@JsonNaming</code>) that claims it to only work for serialization, and there are unit tests to verify it also works for reading. You only should use <code>@JsonProperty</code> for overriding naming of individual properties."},{"owner":{"account_id":4924982,"reputation":907,"user_id":3966452,"accept_rate":57,"display_name":"mljohns89"},"score":0,"creation_date":1560869883,"post_id":11632040,"comment_id":99873795,"body_markdown":"Not working for me.  Using Spring Boot 2.1.5.  Will update comment once I figure out why.","body":"Not working for me.  Using Spring Boot 2.1.5.  Will update comment once I figure out why."},{"owner":{"account_id":5863504,"reputation":2732,"user_id":4618338,"display_name":"Trynkiewicz Mariusz"},"score":11,"creation_date":1617556222,"post_id":11632040,"comment_id":118332115,"body_markdown":"Since Jackson 2.12 it&#39;s `PropertyNamingStrategies.SNAKE_CASE`","body":"Since Jackson 2.12 it&#39;s <code>PropertyNamingStrategies.SNAKE_CASE</code>"},{"owner":{"account_id":9399,"reputation":17347,"user_id":17339,"accept_rate":87,"display_name":"Drew Stephens"},"score":7,"creation_date":1619709320,"post_id":11632040,"comment_id":118992772,"body_markdown":"When using an annotation with Jackson 2.12+: `@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)`","body":"When using an annotation with Jackson 2.12+: <code>@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class&zwnj;&#8203;)</code>"},{"owner":{"account_id":6402126,"reputation":1833,"user_id":4978865,"accept_rate":87,"display_name":"Praytic"},"score":2,"creation_date":1657071726,"post_id":11632040,"comment_id":128720236,"body_markdown":"I see Jackson as a not very consistent library, always changing their constants back and forth.","body":"I see Jackson as a not very consistent library, always changing their constants back and forth."}],"tags":[],"owner":{"account_id":422350,"reputation":5723,"user_id":801072,"accept_rate":50,"display_name":"thehpi"},"comment_count":12,"down_vote_count":0,"up_vote_count":475,"is_accepted":false,"score":475,"last_activity_date":1672366299,"creation_date":1343136929,"answer_id":11632040,"question_id":10519265,"body_markdown":"In Jackson 2.12+, you can configure the `ObjectMapper` to convert camel case to names with an underscore:\r\n    \r\n    objectMapper.setPropertyNamingStrategy(PropertyNamingStrategies.SNAKE_CASE);\r\n\r\nOr annotate a specific model class with this annotation:\r\n\r\n    @JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class;)\r\n\r\nBefore Jackson 2.7, the constant was named:\r\n\r\n    PropertyNamingStrategy.CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES","title":"Jackson overcoming underscores in favor of camel-case","body":"<p>In Jackson 2.12+, you can configure the <code>ObjectMapper</code> to convert camel case to names with an underscore:</p>\n<pre><code>objectMapper.setPropertyNamingStrategy(PropertyNamingStrategies.SNAKE_CASE);\n</code></pre>\n<p>Or annotate a specific model class with this annotation:</p>\n<pre><code>@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class;)\n</code></pre>\n<p>Before Jackson 2.7, the constant was named:</p>\n<pre><code>PropertyNamingStrategy.CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1740107,"reputation":260,"user_id":1591758,"display_name":"Dump Cake"},"score":9,"creation_date":1462390015,"post_id":27925255,"comment_id":61622951,"body_markdown":"An alternative for Spring Boot, if you&#39;re using Spring Boot &lt;=1.3, in `application.properties` add `spring.jackson.property-naming-strategy=CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCOR‌​ES`. For Spring Boot 1.4 use `spring.jackson.property-naming-strategy=SNAKE_CASE` instead.","body":"An alternative for Spring Boot, if you&#39;re using Spring Boot &lt;=1.3, in <code>application.properties</code> add <code>spring.jackson.property-naming-strategy=CAMEL_CASE_TO_LOWER_&zwnj;&#8203;CASE_WITH_UNDERSCOR‌&zwnj;&#8203;​ES</code>. For Spring Boot 1.4 use <code>spring.jackson.property-naming-strategy=SNAKE_CASE</code> instead."},{"owner":{"account_id":1405987,"reputation":16394,"user_id":1385441,"accept_rate":77,"display_name":"Ram Patra"},"score":1,"creation_date":1473188664,"post_id":27925255,"comment_id":66042229,"body_markdown":"@zapl yes you&#39;re right, I probably mentioned jackson&#39;s version instead of spring-boot&#39;s version. Let me delete that comment to avoid confusion.","body":"@zapl yes you&#39;re right, I probably mentioned jackson&#39;s version instead of spring-boot&#39;s version. Let me delete that comment to avoid confusion."},{"owner":{"account_id":983706,"reputation":178,"user_id":1002741,"display_name":"Jonathan"},"score":1,"creation_date":1505906611,"post_id":27925255,"comment_id":79602129,"body_markdown":"As of version 2.7 of Jackson it is SNAKE_CASE. This worked for me:         `final ObjectMapper objectMapper = new ObjectMapper().setPropertyNamingStrategy(\n                PropertyNamingStrategy.SNAKE_CASE);`","body":"As of version 2.7 of Jackson it is SNAKE_CASE. This worked for me:         <code>final ObjectMapper objectMapper = new ObjectMapper().setPropertyNamingStrategy(                 PropertyNamingStrategy.SNAKE_CASE);</code>"}],"tags":[],"owner":{"account_id":373119,"reputation":3318,"user_id":722553,"display_name":"Dawngerpony"},"comment_count":3,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1421161800,"creation_date":1421161800,"answer_id":27925255,"question_id":10519265,"body_markdown":"The above answers regarding `@JsonProperty` and `CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES` are 100% accurate, although some people (like me) might be trying to do this inside a Spring MVC application with code-based configuration. Here&#39;s sample code (that I have inside `Beans.java`) to achieve the desired effect:\r\n\r\n    @Bean\r\n    public ObjectMapper jacksonObjectMapper() {\r\n        return new ObjectMapper().setPropertyNamingStrategy(\r\n                PropertyNamingStrategy.CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES);\r\n    }\r\n","title":"Jackson overcoming underscores in favor of camel-case","body":"<p>The above answers regarding <code>@JsonProperty</code> and <code>CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES</code> are 100% accurate, although some people (like me) might be trying to do this inside a Spring MVC application with code-based configuration. Here's sample code (that I have inside <code>Beans.java</code>) to achieve the desired effect:</p>\n\n<pre><code>@Bean\npublic ObjectMapper jacksonObjectMapper() {\n    return new ObjectMapper().setPropertyNamingStrategy(\n            PropertyNamingStrategy.CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":483814,"reputation":2213,"user_id":899092,"accept_rate":68,"display_name":"SiliconMind"},"score":1,"creation_date":1667653100,"post_id":39460108,"comment_id":131220166,"body_markdown":"Since `Jackson 2.12` use `PropertyNamingStrategies.LowerCaseStrategy` instead. (Note change from `PropertyNamingStrategy` to `PropertyNamingStrategies`): https://fasterxml.github.io/jackson-databind/javadoc/2.13/com/fasterxml/jackson/databind/PropertyNamingStrategies.LowerCaseStrategy.html","body":"Since <code>Jackson 2.12</code> use <code>PropertyNamingStrategies.LowerCaseStrategy</code> instead. (Note change from <code>PropertyNamingStrategy</code> to <code>PropertyNamingStrategies</code>): <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.13/com/fasterxml/jackson/databind/PropertyNamingStrategies.LowerCaseStrategy.html\" rel=\"nofollow noreferrer\">fasterxml.github.io/jackson-databind/javadoc/2.13/com/faster&zwnj;&#8203;xml/&hellip;</a>"}],"tags":[],"owner":{"account_id":1142966,"reputation":3482,"user_id":1126380,"accept_rate":75,"display_name":"Arturo Volpe"},"comment_count":1,"down_vote_count":0,"up_vote_count":58,"is_accepted":false,"score":58,"last_activity_date":1667824595,"creation_date":1473722421,"answer_id":39460108,"question_id":10519265,"body_markdown":"If you want this for a Single Class, you can use the [PropertyNamingStrategies](https://fasterxml.github.io/jackson-databind/javadoc/2.13/com/fasterxml/jackson/databind/PropertyNamingStrategies.SnakeCaseStrategy.html) with the [@JsonNaming](http://www.lookatsrc.com/source/com/fasterxml/jackson/databind/annotation/JsonNaming.java?a=com.fasterxml.jackson.core:jackson-databind), annotation, like this:\r\n\r\n\t@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\r\n\tpublic static class Request {\r\n\r\n\t\tString businessName;\r\n\t\tString businessLegalName;\r\n\r\n    }\r\n\r\nWill serialize to:\r\n\r\n    {\r\n        &quot;business_name&quot; : &quot;&quot;,\r\n        &quot;business_legal_name&quot; : &quot;&quot;\r\n    }\r\n\r\nBefore `Jackson 2.7`, use `PropertyNamingStrategy.LowerCaseWithUnderscoresStrategy.class`:\r\n\r\n\r\n    @JsonNaming(PropertyNamingStrategy.LowerCaseWithUnderscoresStrategy.class)\r\n\tpublic static class Request {\r\n\r\n\t\tString businessName;\r\n\t\tString businessLegalName;\r\n\r\n    }\r\nFrom `Jackson 2.7` to `Jackson 2.12` the `LowerCaseWithUnderscoresStrategy` is deprecated in favor of `SnakeCaseStrategy`, so you should use:\r\n\r\n\t@JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)\r\n\tpublic static class Request {\r\n\r\n\t\tString businessName;\r\n\t\tString businessLegalName;\r\n\r\n    }\r\n\r\nSince `Jackson 2.12` the `PropertyNamingStrategy.SnakeCaseStrategy` is deprecated in favor of `PropertyNamingStrategies.SnakeCaseStrategy`, you should use:\r\n\r\n```java\r\n\t@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\r\n\tpublic static class Request {\r\n\r\n\t\tString businessName;\r\n\t\tString businessLegalName;\r\n\r\n    }\r\n```","title":"Jackson overcoming underscores in favor of camel-case","body":"<p>If you want this for a Single Class, you can use the <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.13/com/fasterxml/jackson/databind/PropertyNamingStrategies.SnakeCaseStrategy.html\" rel=\"nofollow noreferrer\">PropertyNamingStrategies</a> with the <a href=\"http://www.lookatsrc.com/source/com/fasterxml/jackson/databind/annotation/JsonNaming.java?a=com.fasterxml.jackson.core:jackson-databind\" rel=\"nofollow noreferrer\">@JsonNaming</a>, annotation, like this:</p>\n<pre><code>@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\npublic static class Request {\n\n    String businessName;\n    String businessLegalName;\n\n}\n</code></pre>\n<p>Will serialize to:</p>\n<pre><code>{\n    &quot;business_name&quot; : &quot;&quot;,\n    &quot;business_legal_name&quot; : &quot;&quot;\n}\n</code></pre>\n<p>Before <code>Jackson 2.7</code>, use <code>PropertyNamingStrategy.LowerCaseWithUnderscoresStrategy.class</code>:</p>\n<pre><code>@JsonNaming(PropertyNamingStrategy.LowerCaseWithUnderscoresStrategy.class)\npublic static class Request {\n\n    String businessName;\n    String businessLegalName;\n\n}\n</code></pre>\n<p>From <code>Jackson 2.7</code> to <code>Jackson 2.12</code> the <code>LowerCaseWithUnderscoresStrategy</code> is deprecated in favor of <code>SnakeCaseStrategy</code>, so you should use:</p>\n<pre><code>@JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)\npublic static class Request {\n\n    String businessName;\n    String businessLegalName;\n\n}\n</code></pre>\n<p>Since <code>Jackson 2.12</code> the <code>PropertyNamingStrategy.SnakeCaseStrategy</code> is deprecated in favor of <code>PropertyNamingStrategies.SnakeCaseStrategy</code>, you should use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\n    public static class Request {\n\n        String businessName;\n        String businessLegalName;\n\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":939778,"reputation":543,"user_id":968051,"accept_rate":50,"display_name":"Bruno"},"score":3,"creation_date":1492459344,"post_id":40730352,"comment_id":73973281,"body_markdown":"If i annotate my class with the &quot;@JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)&quot; it works. But if i use &quot;spring.jackson.property-naming-strategy=SNAKE_CASE&quot; in &quot;application.properties&quot; it won&#39;t. I&#39;m using &quot;Spring Boot (v2.0.0.BUILD-SNAPSHOT)&quot;. Do you have any ideas ?","body":"If i annotate my class with the &quot;@JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)&zwnj;&#8203;&quot; it works. But if i use &quot;spring.jackson.property-naming-strategy=SNAKE_CASE&quot; in &quot;application.properties&quot; it won&#39;t. I&#39;m using &quot;Spring Boot (v2.0.0.BUILD-SNAPSHOT)&quot;. Do you have any ideas ?"},{"owner":{"account_id":161158,"reputation":4007,"user_id":381712,"accept_rate":53,"display_name":"soulmachine"},"score":2,"creation_date":1522889089,"post_id":40730352,"comment_id":86335033,"body_markdown":"same here, `spring.jackson.property-naming-strategy=SNAKE_CASE` doesn&#39;t work, I&#39;m using Spring Boot 2.0","body":"same here, <code>spring.jackson.property-naming-strategy=SNAKE_CASE</code> doesn&#39;t work, I&#39;m using Spring Boot 2.0"},{"owner":{"account_id":1605033,"reputation":362,"user_id":1485287,"display_name":"Neo Pham"},"score":1,"creation_date":1537954274,"post_id":40730352,"comment_id":91968499,"body_markdown":"same here, spring.jackson.property-naming-strategy=SNAKE_CASE doesn&#39;t work, I&#39;m using Spring Boot 2.0.5. But using annotation is working for me","body":"same here, spring.jackson.property-naming-strategy=SNAKE_CASE doesn&#39;t work, I&#39;m using Spring Boot 2.0.5. But using annotation is working for me"},{"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"score":0,"creation_date":1560039892,"post_id":40730352,"comment_id":99609004,"body_markdown":"Maybe your `ObjectMapper` is not created by Spring? Create a @Configuration class with a @Bean method that returns an ObjectMapper. Not sure if this is necessary.","body":"Maybe your <code>ObjectMapper</code> is not created by Spring? Create a @Configuration class with a @Bean method that returns an ObjectMapper. Not sure if this is necessary."},{"owner":{"account_id":9942935,"reputation":2114,"user_id":7358866,"display_name":"Darotudeen"},"score":0,"creation_date":1609347054,"post_id":40730352,"comment_id":115820171,"body_markdown":"I am using Spring boot 2.4.1 and ```spring.jackson.property-naming-strategy=SNAKE_CASE``` works for me","body":"I am using Spring boot 2.4.1 and <code>spring.jackson.property-naming-strategy=SNAKE_CASE</code> works for me"}],"tags":[],"owner":{"account_id":9694771,"reputation":1410,"user_id":7191614,"display_name":"adam.smithsonian01"},"comment_count":5,"down_vote_count":0,"up_vote_count":141,"is_accepted":false,"score":141,"last_activity_date":1479766376,"creation_date":1479766376,"answer_id":40730352,"question_id":10519265,"body_markdown":"If its a spring boot application, In application.properties file, just use \r\n\r\n&gt; spring.jackson.property-naming-strategy=SNAKE_CASE\r\n\r\nOr Annotate the model class with this annotation.\r\n\r\n&gt; @JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)","title":"Jackson overcoming underscores in favor of camel-case","body":"<p>If its a spring boot application, In application.properties file, just use </p>\n\n<blockquote>\n  <p>spring.jackson.property-naming-strategy=SNAKE_CASE</p>\n</blockquote>\n\n<p>Or Annotate the model class with this annotation.</p>\n\n<blockquote>\n  <p>@JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":174366,"reputation":12158,"user_id":403682,"accept_rate":95,"display_name":"Kenny Cason"},"score":0,"creation_date":1518760954,"post_id":43271115,"comment_id":84645313,"body_markdown":"Do you know if you have another instance of jackson2objectmapper being loaded and overriding this one? And can you confirm that even this bean is being loaded?","body":"Do you know if you have another instance of jackson2objectmapper being loaded and overriding this one? And can you confirm that even this bean is being loaded?"},{"owner":{"account_id":174366,"reputation":12158,"user_id":403682,"accept_rate":95,"display_name":"Kenny Cason"},"score":0,"creation_date":1518761030,"post_id":43271115,"comment_id":84645341,"body_markdown":"Also give DuffJ’s solution a whirl. It’s pretty similar.","body":"Also give DuffJ’s solution a whirl. It’s pretty similar."},{"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1549030461,"post_id":43271115,"comment_id":95769386,"body_markdown":"I think tweaking the properties is the right way; and recommended, too. That does the same as this.","body":"I think tweaking the properties is the right way; and recommended, too. That does the same as this."},{"owner":{"account_id":174366,"reputation":12158,"user_id":403682,"accept_rate":95,"display_name":"Kenny Cason"},"score":0,"creation_date":1549351778,"post_id":43271115,"comment_id":95860579,"body_markdown":"@WesternGun good call. I tend to do this via yaml/properties when possible.","body":"@WesternGun good call. I tend to do this via yaml/properties when possible."}],"tags":[],"owner":{"account_id":174366,"reputation":12158,"user_id":403682,"accept_rate":95,"display_name":"Kenny Cason"},"comment_count":4,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1549351738,"creation_date":1491546484,"answer_id":43271115,"question_id":10519265,"body_markdown":"The current best practice is to configure Jackson within the `application.yml` (or `properties`) file.\r\n\r\nExample:\r\n\r\n    spring:\r\n      jackson:\r\n        property-naming-strategy: SNAKE_CASE\r\n\r\n\r\nIf you have more complex configuration requirements, you can also configure Jackson programmatically. \r\n\r\n    import com.fasterxml.jackson.databind.PropertyNamingStrategy;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.http.converter.json.Jackson2ObjectMapperBuilder;\r\n    \r\n    @Configuration\r\n    public class JacksonConfiguration {\r\n    \r\n        @Bean\r\n        public Jackson2ObjectMapperBuilder jackson2ObjectMapperBuilder() {\r\n            return new Jackson2ObjectMapperBuilder()\r\n                    .propertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE);\r\n            // insert other configurations\r\n        }\r\n    \r\n    } ","title":"Jackson overcoming underscores in favor of camel-case","body":"<p>The current best practice is to configure Jackson within the <code>application.yml</code> (or <code>properties</code>) file.</p>\n\n<p>Example:</p>\n\n<pre><code>spring:\n  jackson:\n    property-naming-strategy: SNAKE_CASE\n</code></pre>\n\n<p>If you have more complex configuration requirements, you can also configure Jackson programmatically. </p>\n\n<pre><code>import com.fasterxml.jackson.databind.PropertyNamingStrategy;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.converter.json.Jackson2ObjectMapperBuilder;\n\n@Configuration\npublic class JacksonConfiguration {\n\n    @Bean\n    public Jackson2ObjectMapperBuilder jackson2ObjectMapperBuilder() {\n        return new Jackson2ObjectMapperBuilder()\n                .propertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE);\n        // insert other configurations\n    }\n\n} \n</code></pre>\n"},{"comments":[{"owner":{"account_id":93208,"reputation":6939,"user_id":255139,"accept_rate":44,"display_name":"Kalpesh Soni"},"score":0,"creation_date":1540566959,"post_id":49679816,"comment_id":92926807,"body_markdown":"again they deprecated some values, now they have KEBAB_CASE , yum!","body":"again they deprecated some values, now they have KEBAB_CASE , yum!"},{"owner":{"account_id":2024343,"reputation":924,"user_id":1809799,"display_name":"Ren&#233;"},"score":0,"creation_date":1553765368,"post_id":49679816,"comment_id":97508628,"body_markdown":"FTR: kebab-case is not snake_case ;-)","body":"FTR: kebab-case is not snake_case ;-)"}],"tags":[],"owner":{"account_id":6699975,"reputation":5536,"user_id":5166818,"display_name":"Amit Kaneria"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1522956602,"creation_date":1522955517,"answer_id":49679816,"question_id":10519265,"body_markdown":"There are few answers here indicating both strategies for 2 different versions of Jackson library below:\r\n\r\n**For Jackson 2.6.***\r\n\r\n    ObjectMapper objMapper = new ObjectMapper(new JsonFactory()); // or YAMLFactory()\r\n    objMapper.setNamingStrategy(\r\n         PropertyNamingStrategy.CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES);\r\n\r\n**For Jackson 2.7.***\r\n\r\n    ObjectMapper objMapper = new ObjectMapper(new JsonFactory()); // or YAMLFactory()\r\n    objMapper.setNamingStrategy(\r\n         PropertyNamingStrategy.SNAKE_CASE);\r\n","title":"Jackson overcoming underscores in favor of camel-case","body":"<p>There are few answers here indicating both strategies for 2 different versions of Jackson library below:</p>\n\n<p><strong>For Jackson 2.6.*</strong></p>\n\n<pre><code>ObjectMapper objMapper = new ObjectMapper(new JsonFactory()); // or YAMLFactory()\nobjMapper.setNamingStrategy(\n     PropertyNamingStrategy.CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES);\n</code></pre>\n\n<p><strong>For Jackson 2.7.*</strong></p>\n\n<pre><code>ObjectMapper objMapper = new ObjectMapper(new JsonFactory()); // or YAMLFactory()\nobjMapper.setNamingStrategy(\n     PropertyNamingStrategy.SNAKE_CASE);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5600840,"reputation":374,"user_id":4437153,"accept_rate":45,"display_name":"rudald"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1599127621,"creation_date":1599127621,"answer_id":63721359,"question_id":10519265,"body_markdown":"Annotating all model classes looks to me as an overkill and Kenny&#39;s answer didn&#39;t work for me https://stackoverflow.com/a/43271115/4437153. The result of serialization was still camel case.\r\n\r\nI realised that there is a problem with my spring configuration, so I had to tackle that problem from another side. Hopefully someone finds it useful, but if I&#39;m doing something against springs&#39; rules then please let me know.\r\n\r\n**Solution for Spring MVC 5.2.5 and Jackson 2.11.2**\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class WebConfig implements WebMvcConfigurer {\r\n        @Override\r\n        public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n            objectMapper.setPropertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE);           \r\n\r\n            MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();\r\n            converter.setObjectMapper(objectMapper);\r\n            converters.add(converter);\r\n        }\r\n    }\r\n\r\n","title":"Jackson overcoming underscores in favor of camel-case","body":"<p>Annotating all model classes looks to me as an overkill and Kenny's answer didn't work for me <a href=\"https://stackoverflow.com/a/43271115/4437153\">https://stackoverflow.com/a/43271115/4437153</a>. The result of serialization was still camel case.</p>\n<p>I realised that there is a problem with my spring configuration, so I had to tackle that problem from another side. Hopefully someone finds it useful, but if I'm doing something against springs' rules then please let me know.</p>\n<p><strong>Solution for Spring MVC 5.2.5 and Jackson 2.11.2</strong></p>\n<pre><code>@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n    @Override\n    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.setPropertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE);           \n\n        MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();\n        converter.setObjectMapper(objectMapper);\n        converters.add(converter);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21346796,"reputation":131,"user_id":15716754,"display_name":"andreyt"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1618992171,"creation_date":1618992171,"answer_id":67191652,"question_id":10519265,"body_markdown":"In order to annotate the model class use:\r\n\r\n    @JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\r\n\r\nInstead of:\r\n\r\n    @JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)\r\n\r\nIt was deprecated since 2.12.\r\n","title":"Jackson overcoming underscores in favor of camel-case","body":"<p>In order to annotate the model class use:</p>\n<pre><code>@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\n</code></pre>\n<p>Instead of:</p>\n<pre><code>@JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)\n</code></pre>\n<p>It was deprecated since 2.12.</p>\n"},{"tags":[],"owner":{"account_id":16822989,"reputation":98,"user_id":12162933,"display_name":"Forgery"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642403826,"creation_date":1642403826,"answer_id":70737730,"question_id":10519265,"body_markdown":"1. You can use the @JsonProperty annotation on the fields of our class to map the fields to the exact names in our JSON\r\n\r\n    &gt;     @JsonProperty(&quot;my_name&quot;)\r\n    &gt;     private String myName;\r\n\r\n2. You can use @JsonNaming annotation on the class, and all fields will be deserialized using snake case\r\n\r\n    &gt;     @JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class) \r\n    &gt;     public class MyClassWithSnakeStrategy { ... \r\n\r\n}\r\n\r\n3. You can use the setPropertyNamingStrategy method on ObjectMapper to configure it for all serialization\r\n\r\n    &gt; ObjectMapper objectMapper = new ObjectMapper()  \r\n    &gt; .setPropertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE);\r\n\r\n","title":"Jackson overcoming underscores in favor of camel-case","body":"<ol>\n<li><p>You can use the @JsonProperty annotation on the fields of our class to map the fields to the exact names in our JSON</p>\n<blockquote>\n<pre><code>@JsonProperty(&quot;my_name&quot;)\nprivate String myName;\n</code></pre>\n</blockquote>\n</li>\n<li><p>You can use @JsonNaming annotation on the class, and all fields will be deserialized using snake case</p>\n<blockquote>\n<pre><code>@JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class) \npublic class MyClassWithSnakeStrategy { ... \n</code></pre>\n</blockquote>\n</li>\n</ol>\n<p>}</p>\n<ol start=\"3\">\n<li><p>You can use the setPropertyNamingStrategy method on ObjectMapper to configure it for all serialization</p>\n<blockquote>\n<p>ObjectMapper objectMapper = new ObjectMapper()<br />\n.setPropertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE);</p>\n</blockquote>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":23706627,"reputation":29,"user_id":17729006,"display_name":"Fuzhe Jerry LI"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662622799,"creation_date":1662622799,"answer_id":73645339,"question_id":10519265,"body_markdown":"`PropertyNamingStrategy` should be replaced with `PropertyNamingStrategies` for @JsonNaming","title":"Jackson overcoming underscores in favor of camel-case","body":"<p><code>PropertyNamingStrategy</code> should be replaced with <code>PropertyNamingStrategies</code> for @JsonNaming</p>\n"}],"owner":{"account_id":1474154,"reputation":2589,"user_id":1384991,"accept_rate":47,"display_name":"user1384991"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196804,"favorite_count":0,"down_vote_count":0,"up_vote_count":216,"accepted_answer_id":10519316,"answer_count":11,"score":216,"last_activity_date":1672366299,"creation_date":1336577400,"question_id":10519265,"body_markdown":"I retrieve a JSON string from internet; like most JSON I&#39;ve seen it includes long keys that are separated by underscores. Essentially, my goal is to deserialize JSON into java-objects, but I don&#39;t use underscores in java-code.\r\n\r\nFor instance, I might have a `User` class with `firstName` field in camel-case, simultaneously I  need somehow to  tell Jackson to map `first_name` key from JSON to `firstName` class field. Is it possible?\r\n\r\n    class User{\r\n        protected String firstName;\r\n        protected String getFirstName(){return firstName;}\r\n    }","title":"Jackson overcoming underscores in favor of camel-case","body":"<p>I retrieve a JSON string from internet; like most JSON I've seen it includes long keys that are separated by underscores. Essentially, my goal is to deserialize JSON into java-objects, but I don't use underscores in java-code.</p>\n\n<p>For instance, I might have a <code>User</code> class with <code>firstName</code> field in camel-case, simultaneously I  need somehow to  tell Jackson to map <code>first_name</code> key from JSON to <code>firstName</code> class field. Is it possible?</p>\n\n<pre><code>class User{\n    protected String firstName;\n    protected String getFirstName(){return firstName;}\n}\n</code></pre>\n"},{"tags":["java","ssl","https","tls1.2","vert.x"],"comments":[{"owner":{"account_id":2597317,"reputation":2731,"user_id":2250712,"accept_rate":62,"display_name":"metaphori"},"score":1,"creation_date":1554208653,"post_id":55436242,"comment_id":97660424,"body_markdown":"Try with `setLogActivity(true)` and using a logging library to see debug logs.","body":"Try with <code>setLogActivity(true)</code> and using a logging library to see debug logs."},{"owner":{"account_id":2411568,"reputation":15860,"user_id":2106516,"accept_rate":91,"display_name":"tmarwen"},"score":0,"creation_date":1554310070,"post_id":55436242,"comment_id":97707286,"body_markdown":"Where are you expecting that log to be printed out?\nWhat do you mean exactly by &quot;gives nothing&quot;? The provided source code should given nothing as response to the SSL/TLS request.","body":"Where are you expecting that log to be printed out? What do you mean exactly by &quot;gives nothing&quot;? The provided source code should given nothing as response to the SSL/TLS request."},{"owner":{"account_id":3424880,"reputation":594,"user_id":2870891,"accept_rate":60,"display_name":"kipid"},"score":0,"creation_date":1554353837,"post_id":55436242,"comment_id":97721579,"body_markdown":"@metaphori setLogActivity(true) gives this error. null: warning: Cannot find annotation method &#39;concrete()&#39; in type &#39;io.vertx.codegen.annotations.VertxGen&#39;: class file for io.vertx.codegen.annotations.VertxGen not found\nC:\\Recoeve\\Recoeve.java:58: error: cannot find symbol\n                        .setLogActivity(true)\n                        ^\n  symbol:   method setLogActivity(boolean)\n  location: class io.vertx.core.http.HttpServerOptions","body":"@metaphori setLogActivity(true) gives this error. null: warning: Cannot find annotation method &#39;concrete()&#39; in type &#39;io.vertx.codegen.annotations.VertxGen&#39;: class file for io.vertx.codegen.annotations.VertxGen not found C:\\Recoeve\\Recoeve.java:58: error: cannot find symbol                         .setLogActivity(true)                         ^   symbol:   method setLogActivity(boolean)   location: class io.vertx.core.http.HttpServerOptions"},{"owner":{"account_id":3424880,"reputation":594,"user_id":2870891,"accept_rate":60,"display_name":"kipid"},"score":0,"creation_date":1554354003,"post_id":55436242,"comment_id":97721626,"body_markdown":"@tmarwen Without SSL/TLS settings, this code gives responses well to the browser&#39;s localhost access. But with SSL/TLS settings, it gives nothing. Even `System.out.println(&quot;Access.&quot;)` is not printed.","body":"@tmarwen Without SSL/TLS settings, this code gives responses well to the browser&#39;s localhost access. But with SSL/TLS settings, it gives nothing. Even <code>System.out.println(&quot;Access.&quot;)</code> is not printed."},{"owner":{"account_id":3583455,"reputation":1884,"user_id":2991105,"display_name":"Erunafailaro"},"score":1,"creation_date":1556635910,"post_id":55436242,"comment_id":98500771,"body_markdown":"If a server offers https/ssl it should listen on port 443 also. Web browsers access the server port 443, when using an https address. Or have you tried to access `https://localhost:80` ?","body":"If a server offers https/ssl it should listen on port 443 also. Web browsers access the server port 443, when using an https address. Or have you tried to access <code>https:&#47;&#47;localhost:80</code> ?"},{"owner":{"account_id":1092304,"reputation":693,"user_id":1086679,"accept_rate":100,"display_name":"Liam Williams"},"score":0,"creation_date":1604422684,"post_id":55436242,"comment_id":114340665,"body_markdown":"I had an issue where `io.vertx.core.void deployVerticle(Verticle verticle, Handler&lt;AsyncResult&lt;String&gt;&gt; completionHandler)` was being used and the handler was silently ignoring `AsyncResult.cause()`, you might have a similar issue here","body":"I had an issue where <code>io.vertx.core.void deployVerticle(Verticle verticle, Handler&lt;AsyncResult&lt;String&gt;&gt; completionHandler)</code> was being used and the handler was silently ignoring <code>AsyncResult.cause()</code>, you might have a similar issue here"}],"answers":[{"tags":[],"owner":{"account_id":16322438,"reputation":1,"user_id":11787895,"display_name":"Aaindex"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616866962,"creation_date":1616866962,"answer_id":66834341,"question_id":55436242,"body_markdown":"Below code works for me:\r\n\r\n```\r\n    JksOptions keyOptions = new JksOptions();\r\n    keyOptions.setPath(&quot;path-to-your/keystore.jks&quot;);\r\n    keyOptions.setPassword(&quot;changeit&quot;);\r\n\r\n    vertx.createHttpServer(\r\n      new HttpServerOptions()\r\n        .setSsl(true)\r\n        .setKeyStoreOptions(keyOptions)\r\n    ).requestHandler( (HttpServerRequest req) -&gt; {\r\n      System.out.println(&quot;Access.&quot;);\r\n      req.response().putHeader(&quot;Content-Type&quot;, &quot;text/html; charset=utf-8&quot;);\r\n      req.response().end(&quot;Hello SSL world!&quot;);\r\n    }).listen(8443, &quot;localhost&quot;);\r\n```","title":"vertx HTTPS (SSL/TLS) server does not work. I cannot access https://localhost","body":"<p>Below code works for me:</p>\n<pre><code>    JksOptions keyOptions = new JksOptions();\n    keyOptions.setPath(&quot;path-to-your/keystore.jks&quot;);\n    keyOptions.setPassword(&quot;changeit&quot;);\n\n    vertx.createHttpServer(\n      new HttpServerOptions()\n        .setSsl(true)\n        .setKeyStoreOptions(keyOptions)\n    ).requestHandler( (HttpServerRequest req) -&gt; {\n      System.out.println(&quot;Access.&quot;);\n      req.response().putHeader(&quot;Content-Type&quot;, &quot;text/html; charset=utf-8&quot;);\n      req.response().end(&quot;Hello SSL world!&quot;);\n    }).listen(8443, &quot;localhost&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23560055,"reputation":1,"user_id":17601533,"display_name":"B8&#39;"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638781892,"creation_date":1638781892,"answer_id":70243121,"question_id":55436242,"body_markdown":"Worked for me as you posted but with the following key store generation:\r\n\r\n`keytool -genkey -alias server-alias -keyalg RSA -keypass changeit -storepass changeit -keystore keystore.jks -validity 3650`","title":"vertx HTTPS (SSL/TLS) server does not work. I cannot access https://localhost","body":"<p>Worked for me as you posted but with the following key store generation:</p>\n<p><code>keytool -genkey -alias server-alias -keyalg RSA -keypass changeit -storepass changeit -keystore keystore.jks -validity 3650</code></p>\n"},{"tags":[],"owner":{"account_id":26757195,"reputation":11,"user_id":20355643,"display_name":"K Uday Bhargav"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667275296,"creation_date":1666939430,"answer_id":74231532,"question_id":55436242,"body_markdown":"You can generate the JKS certificate using the below command\r\n\r\n```\r\nkeytool -genkeypair -alias aliasName -keyalg RSA -keysize 2048 -keystore keystoreName.jks -validity 3650\r\n```\r\n\r\nYou can use the default port of HTTPS ie 443","title":"vertx HTTPS (SSL/TLS) server does not work. I cannot access https://localhost","body":"<p>You can generate the JKS certificate using the below command</p>\n<pre><code>keytool -genkeypair -alias aliasName -keyalg RSA -keysize 2048 -keystore keystoreName.jks -validity 3650\n</code></pre>\n<p>You can use the default port of HTTPS ie 443</p>\n"}],"owner":{"account_id":3424880,"reputation":594,"user_id":2870891,"accept_rate":60,"display_name":"kipid"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2866,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1672364644,"creation_date":1553985133,"question_id":55436242,"body_markdown":"I have created HTTPS server in `vert.x`.\r\n\r\n```java\r\nvertx.createHttpServer(\r\n\tnew HttpServerOptions()\r\n\t\t.setSsl(true)\r\n\t\t.setKeyStoreOptions(new JksOptions()\r\n\t\t\t.setPath(&quot;path/to/keystore&quot;)\r\n\t\t\t.setPassword(&quot;password&quot;)\r\n\t\t)\r\n).requestHandler( (HttpServerRequest req) -&gt; {\r\n    System.out.println(&quot;Access.&quot;);\r\n    req.response().putHeader(&quot;Content-Type&quot;, &quot;text/html; charset=utf-8&quot;);\r\n    req.response().end(&quot;Hello world!&quot;);\r\n\t// ...\r\n}).listen(80, &quot;localhost&quot;);\r\n```\r\n\r\nI have created keystore with `keytool`.\r\n\r\n```\r\nkeytool -genkeypair -keystore keystore -storetype jks\r\n```\r\n\r\nI have succeeded in deploying verticle. But the server does not response.\r\n\r\nAccess to https://localhost gives nothing. Even the log is not printed.\r\n\r\nWhat is wrong?\r\n\r\nI have tried some options like below.\r\n\r\n```java\r\nvertx.createHttpServer(\r\n\tnew HttpServerOptions()\r\n\t\t.setSsl(true)\r\n\t\t.setKeyStoreOptions(new JksOptions()\r\n\t\t\t.setPath(&quot;path/to/keystore&quot;)\r\n\t\t\t.setPassword(&quot;password&quot;)\r\n\t\t)\r\n\t\t// .setUseAlpn(true)\r\n\t\t// .setTrustOptions(new JksOptions()\r\n\t\t// \t.setPath(&quot;C:/Recoeve/keystore&quot;)\r\n\t\t// \t.setPassword(&quot;Xs41Kipid$ps15&quot;)\r\n\t\t// )\r\n\t\t// .setClientAuthRequired(false)\r\n\t\t// .setClientAuth(ClientAuth.NONE)\r\n\t\t// .addEnabledSecureTransportProtocol(TCPSSLOptions.DEFAULT_ENABLED_SECURE_TRANSPORT_PROTOCOLS.get(1))\r\n\t\t// .addEnabledSecureTransportProtocol(&quot;TLSv1.3&quot;)\r\n\t\t// .setEnabledSecureTransportProtocols(TCPSSLOptions.DEFAULT_ENABLED_SECURE_TRANSPORT_PROTOCOLS)\r\n).requestHandler( (HttpServerRequest req) -&gt; {\r\n\t// ...\r\n}).listen(80, &quot;localhost&quot;);\r\n```\r\n\r\nBut the code gives runtime exception.\r\n\r\n================================================================\r\n\r\nRecently editted:\r\n\r\nThat was a default port problem. I though that default port of HTTPS is also 80.\r\n\r\nTake a look at [kipid&#39;s blog :: Vert.x https (SSL/TLS) server][1].\r\n\r\nAnd for complete HTTPS server, I think I need to buy RSA keys. Keys from java command (keytool) give warning to clients on access of my server through internet browser.\r\n\r\n\r\n  [1]: https://kipid.tistory.com/entry/Vertx-%EB%A1%9C-https-SSLTLS-server-%EB%A7%8C%EB%93%A4%EA%B8%B0","title":"vertx HTTPS (SSL/TLS) server does not work. I cannot access https://localhost","body":"<p>I have created HTTPS server in <code>vert.x</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>vertx.createHttpServer(\n    new HttpServerOptions()\n        .setSsl(true)\n        .setKeyStoreOptions(new JksOptions()\n            .setPath(&quot;path/to/keystore&quot;)\n            .setPassword(&quot;password&quot;)\n        )\n).requestHandler( (HttpServerRequest req) -&gt; {\n    System.out.println(&quot;Access.&quot;);\n    req.response().putHeader(&quot;Content-Type&quot;, &quot;text/html; charset=utf-8&quot;);\n    req.response().end(&quot;Hello world!&quot;);\n    // ...\n}).listen(80, &quot;localhost&quot;);\n</code></pre>\n<p>I have created keystore with <code>keytool</code>.</p>\n<pre><code>keytool -genkeypair -keystore keystore -storetype jks\n</code></pre>\n<p>I have succeeded in deploying verticle. But the server does not response.</p>\n<p>Access to https://localhost gives nothing. Even the log is not printed.</p>\n<p>What is wrong?</p>\n<p>I have tried some options like below.</p>\n<pre class=\"lang-java prettyprint-override\"><code>vertx.createHttpServer(\n    new HttpServerOptions()\n        .setSsl(true)\n        .setKeyStoreOptions(new JksOptions()\n            .setPath(&quot;path/to/keystore&quot;)\n            .setPassword(&quot;password&quot;)\n        )\n        // .setUseAlpn(true)\n        // .setTrustOptions(new JksOptions()\n        //  .setPath(&quot;C:/Recoeve/keystore&quot;)\n        //  .setPassword(&quot;Xs41Kipid$ps15&quot;)\n        // )\n        // .setClientAuthRequired(false)\n        // .setClientAuth(ClientAuth.NONE)\n        // .addEnabledSecureTransportProtocol(TCPSSLOptions.DEFAULT_ENABLED_SECURE_TRANSPORT_PROTOCOLS.get(1))\n        // .addEnabledSecureTransportProtocol(&quot;TLSv1.3&quot;)\n        // .setEnabledSecureTransportProtocols(TCPSSLOptions.DEFAULT_ENABLED_SECURE_TRANSPORT_PROTOCOLS)\n).requestHandler( (HttpServerRequest req) -&gt; {\n    // ...\n}).listen(80, &quot;localhost&quot;);\n</code></pre>\n<p>But the code gives runtime exception.</p>\n<p>================================================================</p>\n<p>Recently editted:</p>\n<p>That was a default port problem. I though that default port of HTTPS is also 80.</p>\n<p>Take a look at <a href=\"https://kipid.tistory.com/entry/Vertx-%EB%A1%9C-https-SSLTLS-server-%EB%A7%8C%EB%93%A4%EA%B8%B0\" rel=\"nofollow noreferrer\">kipid's blog :: Vert.x https (SSL/TLS) server</a>.</p>\n<p>And for complete HTTPS server, I think I need to buy RSA keys. Keys from java command (keytool) give warning to clients on access of my server through internet browser.</p>\n"},{"tags":["java","selenium-webdriver","parallel-processing","cucumber-jvm","thread-local"],"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1672246183,"post_id":68810723,"comment_id":132251234,"body_markdown":"The code is not complete for the *HookStep* class. Is that intentional?","body":"The code is not complete for the <i>HookStep</i> class. Is that intentional?"}],"answers":[{"tags":[],"owner":{"account_id":2225525,"reputation":175,"user_id":1964402,"display_name":"AdrianM"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630026512,"creation_date":1630026512,"answer_id":68946928,"question_id":68810723,"body_markdown":"I haven&#39;t used webDriverFactory, but I&#39;d try calling driver.set() in the factory class, as in this tutorial:\r\n\r\nhttp://makeseleniumeasy.com/2020/05/27/threadlocal-static-webdriver-for-parallel-execution/","title":"Parallel run of Selenium tests (uses ThreadLocal) results in orphaned browsers being opened","body":"<p>I haven't used webDriverFactory, but I'd try calling driver.set() in the factory class, as in this tutorial:</p>\n<p><a href=\"http://makeseleniumeasy.com/2020/05/27/threadlocal-static-webdriver-for-parallel-execution/\" rel=\"nofollow noreferrer\">http://makeseleniumeasy.com/2020/05/27/threadlocal-static-webdriver-for-parallel-execution/</a></p>\n"},{"comments":[{"owner":{"account_id":4777108,"reputation":89,"user_id":3859913,"display_name":"Oasis001"},"score":0,"creation_date":1630327846,"post_id":68979203,"comment_id":121918630,"body_markdown":"Krishnan, Thank you for the detailed explanation. Really appreciate the help. It resolves the issue.  The only reason all object classes inherit worldHelper is because the latter has a webdriver variable which would could be called in the former.  Eg.  WorldHelper has  --&gt;`protected WebDriver driver = WebDriverFactory.getDriver()` and then in object classes I could just use it something like--&gt;` driver.get(&quot;https://www.bbc.co.uk&quot;)`","body":"Krishnan, Thank you for the detailed explanation. Really appreciate the help. It resolves the issue.  The only reason all object classes inherit worldHelper is because the latter has a webdriver variable which would could be called in the former.  Eg.  WorldHelper has  --&gt;<code>protected WebDriver driver = WebDriverFactory.getDriver()</code> and then in object classes I could just use it something like--&gt;` driver.get(&quot;<a href=\"https://www.bbc.co.uk&quot;\" rel=\"nofollow noreferrer\">bbc.co.uk&quot;</a>)`"},{"owner":{"account_id":4777108,"reputation":89,"user_id":3859913,"display_name":"Oasis001"},"score":0,"creation_date":1630328812,"post_id":68979203,"comment_id":121919051,"body_markdown":"You have mentioned, &#39;When working with ThreadLocal variants of WebDriver management, you need to make sure that your calls are always from within your step definitions&#39;.  Could you just elaborate on this? I have never used ThreadLocal before, its the first attempt","body":"You have mentioned, &#39;When working with ThreadLocal variants of WebDriver management, you need to make sure that your calls are always from within your step definitions&#39;.  Could you just elaborate on this? I have never used ThreadLocal before, its the first attempt"},{"owner":{"account_id":346350,"reputation":14221,"user_id":679824,"accept_rate":40,"display_name":"Krishnan Mahadevan"},"score":1,"creation_date":1630384992,"post_id":68979203,"comment_id":121934139,"body_markdown":"@Oasis001 - I said that, because when your WebDriverFactory calls are done from within your step defs, you are guaranteed to be on the same thread (because your `@Before`, steps in a scenario and your `@After` seem to be runing on the same thread). If you make calls to WebDriverFactory from anywhere else, you may end up initialising the webdriver object in a different thread.","body":"@Oasis001 - I said that, because when your WebDriverFactory calls are done from within your step defs, you are guaranteed to be on the same thread (because your <code>@Before</code>, steps in a scenario and your <code>@After</code> seem to be runing on the same thread). If you make calls to WebDriverFactory from anywhere else, you may end up initialising the webdriver object in a different thread."},{"owner":{"account_id":4777108,"reputation":89,"user_id":3859913,"display_name":"Oasis001"},"score":0,"creation_date":1630399233,"post_id":68979203,"comment_id":121938612,"body_markdown":"Oh yes, I get it. Thanks","body":"Oh yes, I get it. Thanks"}],"tags":[],"owner":{"account_id":346350,"reputation":14221,"user_id":679824,"accept_rate":40,"display_name":"Krishnan Mahadevan"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1672246244,"creation_date":1630300807,"answer_id":68979203,"question_id":68810723,"body_markdown":"I noticed multiple problems associated with your code.\r\n\r\n1. You are making use of `ThreadLocal.withInitial()`. Ideally speaking this should have been defined when you are instantiating the `driver` thread local static variable.\r\n\r\n    So instead of\r\n\r\n    ```\r\n    private static final ThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;&gt;();\r\n    ```\r\n\r\n    it should have been\r\n\r\n    ```\r\n    private static final ThreadLocal&lt;WebDriver&gt; driver = ThreadLocal.withInitial(() -&gt; {\r\n        return null; //Your supplier goes here.\r\n    });\r\n    ```\r\n\r\n2. There&#39;s a clear mess up in your inheritance hierarchy (there&#39;s a very good chance that you were trying to create a simple example and perhaps have omitted out the details behind the layers of inheritance), but it wasn&#39;t clear as to why does all your page object classes extend `WorldHelper`\r\n\r\n3. You are having multiple statements at the class level such as this. The problem with these field level initialisations is that they get invoked when the object is constructed. So if the object is being constructed in a different thread, then you run into the problem of the WebDriver initialisation being triggered for that thread. End result: You have a lot of ghost browser instances that keep getting opened up, but no selenium actions are directed to them.\r\n\r\n    ```\r\n    private final WebDriver driver = WebDriverFactory.getDriver();\r\n    ```\r\n\r\n    When working with `ThreadLocal` variants of WebDriver management, you need to make sure that your calls are always from within your step definitions and never from the constructor or from class level field initialisations such as above.\r\n\r\n\r\nHere are the list of fixes that you need to do.\r\n\r\n1. Remove all occurrences of `private final WebDriver driver = WebDriverFactory.getDriver();` in your code. They are not needed.\r\n\r\n2. Refactor your WebDriverFactory class to look like below (For brevity I have removed off all the commented out code)\r\n\r\n    &lt;!-- language: java --&gt;\r\n\r\n        public class WebDriverFactory {\r\n\r\n            private static final ThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;&gt;();\r\n\r\n            public static void setDriver(String browser) {\r\n                RemoteWebDriver rwd;\r\n                    switch (browser) {\r\n                    case &quot;chrome&quot;:\r\n                        WebDriverManager.chromedriver().setup();\r\n                        rwd = new ChromeDriver(BrowserOptions.getChromeOptions());\r\n                        break;\r\n\r\n                    case &quot;fireFox&quot;:\r\n                        WebDriverManager.firefoxdriver().setup();\r\n                        rwd = new FirefoxDriver(BrowserOptions.getFirefoxOptions());\r\n                        break;\r\n                    default:\r\n                        throw new IllegalStateException(&quot;Unexpected value: &quot; + browser);\r\n                }\r\n                driver.set(Objects.requireNonNull(rwd));\r\n                prepareBrowser();\r\n            }\r\n\r\n            private static void prepareBrowser(){\r\n                getDriver().manage().window().maximize();\r\n                getDriver().manage().deleteAllCookies();\r\n                getDriver().manage().timeouts().pageLoadTimeout(15, TimeUnit.SECONDS);\r\n                getDriver().manage().timeouts().implicitlyWait(2, TimeUnit.SECONDS);\r\n            }\r\n\r\n            public static WebDriver getDriver(){\r\n                return Objects.requireNonNull(driver.get());\r\n            }\r\n\r\n            public static void closeBrowser() {\r\n                getDriver().manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\r\n                getDriver().close();\r\n                getDriver().quit();\r\n            }\r\n        }\r\n\r\n3. Since all your page classes seem to be extending from `WorldHelper`, add a getter method such as below in it (or) ensure that no where in any of your page classes you have a `WebDriver` field. Whenever you need to get hold of the WebDriver instance, you should do it directly via `WebDriverFactory.getDriver()` (or) via the getter method such as below in your `WorldHelper` or whatever base class you are creating.\r\n\r\n    &lt;!-- language: java --&gt;\r\n\r\n        protected WebDriver getDriver() {\r\n            return WebDriverFactory.getDriver();\r\n        }\r\n\r\nOnce you have fixed the afore-mentioned problems, you should be good and shouldn&#39;t see any blank browser windows open up.\r\n\r\nNote: Please clean up your project on GitHub. I noticed some cloud service provider credentials in it (it could be real credentials or could be fake. I wouldn&#39;t know.)\r\n\r\n\r\n\r\n\r\n","title":"Parallel run of Selenium tests (uses ThreadLocal) results in orphaned browsers being opened","body":"<p>I noticed multiple problems associated with your code.</p>\n<ol>\n<li><p>You are making use of <code>ThreadLocal.withInitial()</code>. Ideally speaking this should have been defined when you are instantiating the <code>driver</code> thread local static variable.</p>\n<p>So instead of</p>\n<pre><code>private static final ThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;&gt;();\n</code></pre>\n<p>it should have been</p>\n<pre><code>private static final ThreadLocal&lt;WebDriver&gt; driver = ThreadLocal.withInitial(() -&gt; {\n    return null; //Your supplier goes here.\n});\n</code></pre>\n</li>\n<li><p>There's a clear mess up in your inheritance hierarchy (there's a very good chance that you were trying to create a simple example and perhaps have omitted out the details behind the layers of inheritance), but it wasn't clear as to why does all your page object classes extend <code>WorldHelper</code></p>\n</li>\n<li><p>You are having multiple statements at the class level such as this. The problem with these field level initialisations is that they get invoked when the object is constructed. So if the object is being constructed in a different thread, then you run into the problem of the WebDriver initialisation being triggered for that thread. End result: You have a lot of ghost browser instances that keep getting opened up, but no selenium actions are directed to them.</p>\n<pre><code>private final WebDriver driver = WebDriverFactory.getDriver();\n</code></pre>\n<p>When working with <code>ThreadLocal</code> variants of WebDriver management, you need to make sure that your calls are always from within your step definitions and never from the constructor or from class level field initialisations such as above.</p>\n</li>\n</ol>\n<p>Here are the list of fixes that you need to do.</p>\n<ol>\n<li><p>Remove all occurrences of <code>private final WebDriver driver = WebDriverFactory.getDriver();</code> in your code. They are not needed.</p>\n</li>\n<li><p>Refactor your WebDriverFactory class to look like below (For brevity I have removed off all the commented out code)</p>\n <pre class=\"lang-java prettyprint-override\"><code> public class WebDriverFactory {\n\n     private static final ThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;&gt;();\n\n     public static void setDriver(String browser) {\n         RemoteWebDriver rwd;\n             switch (browser) {\n             case &quot;chrome&quot;:\n                 WebDriverManager.chromedriver().setup();\n                 rwd = new ChromeDriver(BrowserOptions.getChromeOptions());\n                 break;\n\n             case &quot;fireFox&quot;:\n                 WebDriverManager.firefoxdriver().setup();\n                 rwd = new FirefoxDriver(BrowserOptions.getFirefoxOptions());\n                 break;\n             default:\n                 throw new IllegalStateException(&quot;Unexpected value: &quot; + browser);\n         }\n         driver.set(Objects.requireNonNull(rwd));\n         prepareBrowser();\n     }\n\n     private static void prepareBrowser(){\n         getDriver().manage().window().maximize();\n         getDriver().manage().deleteAllCookies();\n         getDriver().manage().timeouts().pageLoadTimeout(15, TimeUnit.SECONDS);\n         getDriver().manage().timeouts().implicitlyWait(2, TimeUnit.SECONDS);\n     }\n\n     public static WebDriver getDriver(){\n         return Objects.requireNonNull(driver.get());\n     }\n\n     public static void closeBrowser() {\n         getDriver().manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\n         getDriver().close();\n         getDriver().quit();\n     }\n }\n</code></pre>\n</li>\n<li><p>Since all your page classes seem to be extending from <code>WorldHelper</code>, add a getter method such as below in it (or) ensure that no where in any of your page classes you have a <code>WebDriver</code> field. Whenever you need to get hold of the WebDriver instance, you should do it directly via <code>WebDriverFactory.getDriver()</code> (or) via the getter method such as below in your <code>WorldHelper</code> or whatever base class you are creating.</p>\n <pre class=\"lang-java prettyprint-override\"><code> protected WebDriver getDriver() {\n     return WebDriverFactory.getDriver();\n }\n</code></pre>\n</li>\n</ol>\n<p>Once you have fixed the afore-mentioned problems, you should be good and shouldn't see any blank browser windows open up.</p>\n<p>Note: Please clean up your project on GitHub. I noticed some cloud service provider credentials in it (it could be real credentials or could be fake. I wouldn't know.)</p>\n"}],"owner":{"account_id":4777108,"reputation":89,"user_id":3859913,"display_name":"Oasis001"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5289,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":68979203,"answer_count":2,"score":1,"last_activity_date":1672363580,"creation_date":1629164064,"question_id":68810723,"body_markdown":"I use ThreadLocal for thread safety and run the tests in parallel using Maven failsafe and JUnit. I am running two tests from two feature files to test parallel running.\r\n\r\nBut I always have the first browser blank. Then the subsequent ones are fine and the tests pass. If I run sequentially, there isn’t any issue.\r\n\r\n*HookStep* class:\r\n\r\n        public class HookStep {\r\n    \r\n            @Before()\r\n            public void beginTest() {\r\n                WebDriverFactory.setDriver(Props.getValue(&quot;browser.name&quot;));\r\n            }\r\n    \r\n            @After()\r\n            public void stopTest(Scenario scenario) {\r\n                switch (environment) {\r\n    \r\n                    case &quot;local&quot;:\r\n                    case &quot;aws&quot;: {\r\n                        if (scenario.isFailed()) {\r\n                            Screenshots.Shot shot = new Screenshots(Screenshots.CONTEXT_TEST_FAIL)\r\n                                    .takeShot(scenario.getName() + formCounter.getAndIncrement() + &quot;&quot;);\r\n                            scenario.embed(shot.getContent(), &quot;image/png&quot;, &quot;Error - &quot;);\r\n                        }\r\n                        WebDriverFactory.closeBrowser();\r\n                    }\r\n                }\r\n    }\r\n\r\nWebDriverFactory class:\r\n\r\n    public class WebDriverFactory {\r\n\r\n        private static ThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;&gt;();\r\n\r\n        public static synchronized void setDriver(String browser) {\r\n\r\n            switch (browser) {\r\n                case &quot;chrome&quot;:\r\n                    driver = ThreadLocal.withInitial(() -&gt; {\r\n                        WebDriverManager.chromedriver().setup();\r\n                        return new ChromeDriver(BrowserOptions.getChromeOptions());\r\n                    });\r\n                    prepareBrowser();\r\n                    break;\r\n\r\n                case &quot;fireFox&quot;:\r\n                    driver = ThreadLocal.withInitial(() -&gt; {\r\n                        WebDriverManager.firefoxdriver().setup();\r\n                        return new FirefoxDriver(BrowserOptions.getFirefoxOptions());\r\n                    });\r\n                    break;\r\n                default:\r\n                    throw new IllegalStateException(&quot;Unexpected value: &quot; + browser);\r\n            }\r\n        }\r\n\r\n        private static void prepareBrowser() {\r\n            getDriver().manage().window().maximize();\r\n            getDriver().manage().deleteAllCookies();\r\n            getDriver().manage().timeouts().pageLoadTimeout(15, TimeUnit.SECONDS);\r\n            getDriver().manage().timeouts().implicitlyWait(2, TimeUnit.SECONDS);\r\n        }\r\n\r\n        public static synchronized WebDriver getDriver() {\r\n            return driver.get();\r\n        }\r\n\r\n        public static void closeBrowser() {\r\n\r\n            getDriver().quit();\r\n        }\r\n    }\r\n\r\nThe StepDef class:\r\n\r\n    public class SampleStepDef {\r\n        private final WorldHelper helper;\r\n\r\n        public SampleStepDef(WorldHelper helper) {\r\n            this.helper = helper;\r\n        }\r\n\r\n        @Given(&quot;I click on the URL&quot;)\r\n        public void iClickOnTheURL() {\r\n\r\n           helper.getSamplePage().navigateToSite();\r\n        }\r\n    }\r\n\r\n\r\n    public class WorldHelper {\r\n        WebDriverFactory webDriverFactory = new WebDriverFactory();\r\n\r\n        protected  WebDriver webDriver = webDriverFactory.getDriver();\r\n        private  BasePage basePage;\r\n        private  SamplePage samplePage;\r\n\r\n        public SamplePage getSamplePage() {\r\n            if(samplePage != null)\r\n                return samplePage;\r\n            samplePage = PageFactory.initElements(webDriver, SamplePage.class);\r\n            return samplePage;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public class SamplePage extends BasePage {\r\n\r\n        public SamplePage(WebDriver webDriver) {\r\n            super(webDriver);\r\n        }\r\n\r\n        public void navigateToSite() {\r\n\r\n            webDriver.get(&quot;https://www.bbc.co.uk&quot;);\r\n            webDriver.findElement(By.xpath(&quot;//a[contains(text(),\\&#39;News\\&#39;)]&quot;)).click();\r\n        }\r\n    }\r\n\r\n\r\n    public class BasePage extends WorldHelper {\r\n\r\n        public BasePage(WebDriver driver) {\r\n            this.webDriver = driver;\r\n        }\r\n    }\r\n\r\nHow can I fix this problem?\r\n\r\n  [1]: https://github.com/sunpala/t2-auto-test\r\n\r\n\r\n","title":"Parallel run of Selenium tests (uses ThreadLocal) results in orphaned browsers being opened","body":"<p>I use ThreadLocal for thread safety and run the tests in parallel using Maven failsafe and JUnit. I am running two tests from two feature files to test parallel running.</p>\n<p>But I always have the first browser blank. Then the subsequent ones are fine and the tests pass. If I run sequentially, there isn’t any issue.</p>\n<p><em>HookStep</em> class:</p>\n<pre><code>    public class HookStep {\n\n        @Before()\n        public void beginTest() {\n            WebDriverFactory.setDriver(Props.getValue(&quot;browser.name&quot;));\n        }\n\n        @After()\n        public void stopTest(Scenario scenario) {\n            switch (environment) {\n\n                case &quot;local&quot;:\n                case &quot;aws&quot;: {\n                    if (scenario.isFailed()) {\n                        Screenshots.Shot shot = new Screenshots(Screenshots.CONTEXT_TEST_FAIL)\n                                .takeShot(scenario.getName() + formCounter.getAndIncrement() + &quot;&quot;);\n                        scenario.embed(shot.getContent(), &quot;image/png&quot;, &quot;Error - &quot;);\n                    }\n                    WebDriverFactory.closeBrowser();\n                }\n            }\n}\n</code></pre>\n<p>WebDriverFactory class:</p>\n<pre><code>public class WebDriverFactory {\n\n    private static ThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;&gt;();\n\n    public static synchronized void setDriver(String browser) {\n\n        switch (browser) {\n            case &quot;chrome&quot;:\n                driver = ThreadLocal.withInitial(() -&gt; {\n                    WebDriverManager.chromedriver().setup();\n                    return new ChromeDriver(BrowserOptions.getChromeOptions());\n                });\n                prepareBrowser();\n                break;\n\n            case &quot;fireFox&quot;:\n                driver = ThreadLocal.withInitial(() -&gt; {\n                    WebDriverManager.firefoxdriver().setup();\n                    return new FirefoxDriver(BrowserOptions.getFirefoxOptions());\n                });\n                break;\n            default:\n                throw new IllegalStateException(&quot;Unexpected value: &quot; + browser);\n        }\n    }\n\n    private static void prepareBrowser() {\n        getDriver().manage().window().maximize();\n        getDriver().manage().deleteAllCookies();\n        getDriver().manage().timeouts().pageLoadTimeout(15, TimeUnit.SECONDS);\n        getDriver().manage().timeouts().implicitlyWait(2, TimeUnit.SECONDS);\n    }\n\n    public static synchronized WebDriver getDriver() {\n        return driver.get();\n    }\n\n    public static void closeBrowser() {\n\n        getDriver().quit();\n    }\n}\n</code></pre>\n<p>The StepDef class:</p>\n<pre><code>public class SampleStepDef {\n    private final WorldHelper helper;\n\n    public SampleStepDef(WorldHelper helper) {\n        this.helper = helper;\n    }\n\n    @Given(&quot;I click on the URL&quot;)\n    public void iClickOnTheURL() {\n\n       helper.getSamplePage().navigateToSite();\n    }\n}\n\n\npublic class WorldHelper {\n    WebDriverFactory webDriverFactory = new WebDriverFactory();\n\n    protected  WebDriver webDriver = webDriverFactory.getDriver();\n    private  BasePage basePage;\n    private  SamplePage samplePage;\n\n    public SamplePage getSamplePage() {\n        if(samplePage != null)\n            return samplePage;\n        samplePage = PageFactory.initElements(webDriver, SamplePage.class);\n        return samplePage;\n    }\n\n}\n\n\npublic class SamplePage extends BasePage {\n\n    public SamplePage(WebDriver webDriver) {\n        super(webDriver);\n    }\n\n    public void navigateToSite() {\n\n        webDriver.get(&quot;https://www.bbc.co.uk&quot;);\n        webDriver.findElement(By.xpath(&quot;//a[contains(text(),\\'News\\')]&quot;)).click();\n    }\n}\n\n\npublic class BasePage extends WorldHelper {\n\n    public BasePage(WebDriver driver) {\n        this.webDriver = driver;\n    }\n}\n</code></pre>\n<p>How can I fix this problem?</p>\n"},{"tags":["java","floating-point","precision","floating-accuracy"],"comments":[{"owner":{"account_id":15208388,"reputation":71,"user_id":10974034,"display_name":"jagadesh"},"score":0,"creation_date":1672239117,"post_id":74941454,"comment_id":132248952,"body_markdown":"@user16320675 - to be honest I don&#39;t understand that...it is giving 8.0 what is that the last float point digit?? And if 4 difference is not unexpected why use float?? it&#39;s like all my life I was fooled...if its 1.000004, this is acceptable but 100 vs 104 (eg) completely not acceptable","body":"@user16320675 - to be honest I don&#39;t understand that...it is giving 8.0 what is that the last float point digit?? And if 4 difference is not unexpected why use float?? it&#39;s like all my life I was fooled...if its 1.000004, this is acceptable but 100 vs 104 (eg) completely not acceptable"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1672239453,"post_id":74941454,"comment_id":132249056,"body_markdown":"that is the difference to the next number that can be represented using `float`, as described in the documentation. &quot;not acceptable&quot;?  then don&#39;t use it - computers are limited, there is just a **finite** amount of bits available, but an infinite number of real numbers (a number like `12345678901234567890` would need more bits than `123` - there is much more information needed, even without decimals)","body":"that is the difference to the next number that can be represented using <code>float</code>, as described in the documentation. &quot;not acceptable&quot;?  then don&#39;t use it - computers are limited, there is just a <b>finite</b> amount of bits available, but an infinite number of real numbers (a number like <code>12345678901234567890</code> would need more bits than <code>123</code> - there is much more information needed, even without decimals)"},{"owner":{"account_id":15208388,"reputation":71,"user_id":10974034,"display_name":"jagadesh"},"score":0,"creation_date":1672239978,"post_id":74941454,"comment_id":132249230,"body_markdown":"@user16320675 - Definitely I am not going to use it...Let me rephrase my question... (590.0 * 490.0 * 391.0) gives 113038096 = is this correct ??","body":"@user16320675 - Definitely I am not going to use it...Let me rephrase my question... (590.0 * 490.0 * 391.0) gives 113038096 = is this correct ??"},{"owner":{"account_id":4865492,"reputation":45981,"user_id":3923896,"accept_rate":69,"display_name":"Steve Summit"},"score":0,"creation_date":1672251984,"post_id":74941454,"comment_id":132252779,"body_markdown":"@jagadesh This is one of the surprising things about floating point: for large numbers, you will have &quot;roundoff error&quot; to the *left* of the decimal point.  Happens all the time, perfectly normal, nothing to worry about.  Naturally it&#39;s worse for single precision — which is another reason never to use single precision (aka &quot;float&quot;).","body":"@jagadesh This is one of the surprising things about floating point: for large numbers, you will have &quot;roundoff error&quot; to the <i>left</i> of the decimal point.  Happens all the time, perfectly normal, nothing to worry about.  Naturally it&#39;s worse for single precision — which is another reason never to use single precision (aka &quot;float&quot;)."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1673299491,"post_id":74941454,"comment_id":132463836,"body_markdown":"BTW for java (and the used standard IEEE 754) `(590.0 * 490.0 * 391.0)` is more like `1.130381 * 10⁸` or `1.130381E8`","body":"BTW for java (and the used standard IEEE 754) <code>(590.0 * 490.0 * 391.0)</code> is more like <code>1.130381 * 10⁸</code> or <code>1.130381E8</code>"}],"answers":[{"comments":[{"owner":{"account_id":15208388,"reputation":71,"user_id":10974034,"display_name":"jagadesh"},"score":0,"creation_date":1672238535,"post_id":74941546,"comment_id":132248781,"body_markdown":"yeah...I understand that for accurate result we need to use big decimal and all however is this not weird that giving 4 numbers difference even though there is no decimals for used numbers or is this expected behaviour ??","body":"yeah...I understand that for accurate result we need to use big decimal and all however is this not weird that giving 4 numbers difference even though there is no decimals for used numbers or is this expected behaviour ??"},{"owner":{"display_name":"user20716279"},"score":0,"creation_date":1672239457,"post_id":74941546,"comment_id":132249058,"body_markdown":"@jagadesh float point is about the whole number even if there no decimal part it still possible to has issue to be represented as binary the 8:22 of the video show example for how 3 can be represented of course in the video they did not use the acutle  float/double  precision","body":"@jagadesh float point is about the whole number even if there no decimal part it still possible to has issue to be represented as binary the 8:22 of the video show example for how 3 can be represented of course in the video they did not use the acutle  float/double  precision"}],"tags":[],"owner":{"display_name":"user20716279"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672238274,"creation_date":1672238274,"answer_id":74941546,"question_id":74941454,"body_markdown":"Does always float gives wrong numbers ??\r\n\r\nit depend on the number if the number can be represented using the float precision then it will be fine\r\n\r\n&gt; &quot;As I can see double also use same technique, so how much guarantee we\r\n&gt; have to get correct result if we use double&quot;\r\n\r\ndouble has same issue but since double has more precision the possibility get lower but it still happen \r\n\r\nso when you need a very precise result like in scientific or financial app you will need to use BigDecimal\r\n\r\nwatch this video it explain how the float point number work \r\nhttps://www.youtube.com/watch?v=ajaHQ9S4uTA","title":"Java Float multiplication giving wrong result","body":"<p>Does always float gives wrong numbers ??</p>\n<p>it depend on the number if the number can be represented using the float precision then it will be fine</p>\n<blockquote>\n<p>&quot;As I can see double also use same technique, so how much guarantee we\nhave to get correct result if we use double&quot;</p>\n</blockquote>\n<p>double has same issue but since double has more precision the possibility get lower but it still happen</p>\n<p>so when you need a very precise result like in scientific or financial app you will need to use BigDecimal</p>\n<p>watch this video it explain how the float point number work\n<a href=\"https://www.youtube.com/watch?v=ajaHQ9S4uTA\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=ajaHQ9S4uTA</a></p>\n"},{"tags":[],"owner":{"account_id":113187,"reputation":201052,"user_id":298225,"accept_rate":100,"display_name":"Eric Postpischil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672363257,"creation_date":1672363257,"answer_id":74957393,"question_id":74941454,"body_markdown":"&gt; Is this correct first\r\n\r\nThe Java `float` format is IEEE-754 binary32. In this format, every finite number is represented as a sign, a 24-bit integer, and a scaling by a power of two from 2&lt;sup&gt;−149&lt;/sup&gt; to 2&lt;sup&gt;104&lt;/sup&gt;. The integer part is called the significand. (The format is often described as a sign, a 24-bit number with a binary point after the first bit, so it has a value in [0, 2), and a scaling from 2&lt;sup&gt;−126&lt;/sup&gt; to 2&lt;sup&gt;127&lt;/sup&gt;. These are mathematically equivalent, and the format used here is noted in the IEEE-754 standard as an option.) In normal form, the 24-bit integer is 2&lt;sup&gt;23&lt;/sup&gt; or greater. (Representable numbers less than 2&lt;sup&gt;−126&lt;/sup&gt; cannot be represented in normal form and are necessarily subnormal.)\r\n\r\nIn this format, 590 can be represented as +590•2&lt;sup&gt;0&lt;/sup&gt; or +8,339,456•2&lt;sup&gt;−14&lt;/sup&gt;. 490 is +490•2&lt;sup&gt;0&lt;/sup&gt; or +16,056,320•2&lt;sup&gt;−15&lt;/sup&gt;.\r\n\r\nTheir product is +289,100•2&lt;sup&gt;0&lt;/sup&gt; or +9,251,200•2&lt;sup&gt;−5&lt;/sup&gt;.\r\n\r\n391 is +391•2&lt;sup&gt;0&lt;/sup&gt; or +12,812,288&lt;sup&gt;−15&lt;/sup&gt;.\r\n\r\nThe ordinary arithmetic product of +289,100•2&lt;sup&gt;0&lt;/sup&gt; and +391•2&lt;sup&gt;0&lt;/sup&gt; is +113,038,100•2&lt;sup&gt;0&lt;/sup&gt;. However, 113,038,100 is not a 24-bit number; it is a 27-bit number. To get it under 2&lt;sup&gt;24&lt;/sup&gt;, we can adjust the scaling, multiplying the significand by ⅛ and multiplying the scaling by 8 = 2&lt;sup&gt;3&lt;/sup&gt;.\r\n\r\nThat gives us +14,129,762.5•2&lt;sup&gt;3&lt;/sup&gt;. However, now the significand is not an integer. This result is not representable in the `float` format. To produce a result, the operation of adding in the `float` format is defined to round the ordinary arithmetic to the nearest representable value. In this case, there is a tie, we could round the .5 up or down. Ties are resolved by rounding to make the low digit even, so we round to +14,129,762•2&lt;sup&gt;3&lt;/sup&gt;.\r\n\r\n+14,129,762•2&lt;sup&gt;3&lt;/sup&gt; is 113,038,096. That is the result you got, so it is correct.\r\n\r\n&gt; Does always float gives wrong numbers ??\r\n\r\nThis is not wrong; the computer behaved according to its specification.\r\n\r\nObserve `float` is a 32-bit format, but there are infinitely many real numbers. There are even infinitely many rational numbers. It is impossible for a 32-bit format to produce the same results as theoretical real-number arithmetic or rational-number arithmetic. There are simply more possible results than there are representable values.\r\n\r\nThis is true of the 64-bit `double` format as well. It is also true of integer formats, fixed-precision formats, and all numerical formats with a fixed number of bits. A fixed number of bits cannot represent infinitely many values.\r\n\r\nYour comments suggest you thought floating-point would produce approximate results for fractional values, numbers less than one. But the limitation on how many values can be represented applies at all scales. At each scale (each power of two), only 2&lt;sup&gt;24&lt;/sup&gt; values are representable (2&lt;sup&gt;23&lt;/sup&gt; in normal form). For scale 2&lt;sup&gt;0&lt;/sup&gt;, all the non-negative integers below 2&lt;sup&gt;24&lt;/sup&gt; are representable. But, above that, only some of the integers are representable. At first, we have to skip every second integer, then every fourth, then every eighth, and so on.\r\n\r\nFloating-point arithmetic is designed to approximate real-number arithmetic. It should be used when you want to approximate real-number arithmetic. It should not be used, with rare exceptions, when you want exact arithmetic.","title":"Java Float multiplication giving wrong result","body":"<blockquote>\n<p>Is this correct first</p>\n</blockquote>\n<p>The Java <code>float</code> format is IEEE-754 binary32. In this format, every finite number is represented as a sign, a 24-bit integer, and a scaling by a power of two from 2<sup>−149</sup> to 2<sup>104</sup>. The integer part is called the significand. (The format is often described as a sign, a 24-bit number with a binary point after the first bit, so it has a value in [0, 2), and a scaling from 2<sup>−126</sup> to 2<sup>127</sup>. These are mathematically equivalent, and the format used here is noted in the IEEE-754 standard as an option.) In normal form, the 24-bit integer is 2<sup>23</sup> or greater. (Representable numbers less than 2<sup>−126</sup> cannot be represented in normal form and are necessarily subnormal.)</p>\n<p>In this format, 590 can be represented as +590•2<sup>0</sup> or +8,339,456•2<sup>−14</sup>. 490 is +490•2<sup>0</sup> or +16,056,320•2<sup>−15</sup>.</p>\n<p>Their product is +289,100•2<sup>0</sup> or +9,251,200•2<sup>−5</sup>.</p>\n<p>391 is +391•2<sup>0</sup> or +12,812,288<sup>−15</sup>.</p>\n<p>The ordinary arithmetic product of +289,100•2<sup>0</sup> and +391•2<sup>0</sup> is +113,038,100•2<sup>0</sup>. However, 113,038,100 is not a 24-bit number; it is a 27-bit number. To get it under 2<sup>24</sup>, we can adjust the scaling, multiplying the significand by ⅛ and multiplying the scaling by 8 = 2<sup>3</sup>.</p>\n<p>That gives us +14,129,762.5•2<sup>3</sup>. However, now the significand is not an integer. This result is not representable in the <code>float</code> format. To produce a result, the operation of adding in the <code>float</code> format is defined to round the ordinary arithmetic to the nearest representable value. In this case, there is a tie, we could round the .5 up or down. Ties are resolved by rounding to make the low digit even, so we round to +14,129,762•2<sup>3</sup>.</p>\n<p>+14,129,762•2<sup>3</sup> is 113,038,096. That is the result you got, so it is correct.</p>\n<blockquote>\n<p>Does always float gives wrong numbers ??</p>\n</blockquote>\n<p>This is not wrong; the computer behaved according to its specification.</p>\n<p>Observe <code>float</code> is a 32-bit format, but there are infinitely many real numbers. There are even infinitely many rational numbers. It is impossible for a 32-bit format to produce the same results as theoretical real-number arithmetic or rational-number arithmetic. There are simply more possible results than there are representable values.</p>\n<p>This is true of the 64-bit <code>double</code> format as well. It is also true of integer formats, fixed-precision formats, and all numerical formats with a fixed number of bits. A fixed number of bits cannot represent infinitely many values.</p>\n<p>Your comments suggest you thought floating-point would produce approximate results for fractional values, numbers less than one. But the limitation on how many values can be represented applies at all scales. At each scale (each power of two), only 2<sup>24</sup> values are representable (2<sup>23</sup> in normal form). For scale 2<sup>0</sup>, all the non-negative integers below 2<sup>24</sup> are representable. But, above that, only some of the integers are representable. At first, we have to skip every second integer, then every fourth, then every eighth, and so on.</p>\n<p>Floating-point arithmetic is designed to approximate real-number arithmetic. It should be used when you want to approximate real-number arithmetic. It should not be used, with rare exceptions, when you want exact arithmetic.</p>\n"}],"owner":{"account_id":15208388,"reputation":71,"user_id":10974034,"display_name":"jagadesh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":411,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1672363257,"creation_date":1672237725,"question_id":74941454,"body_markdown":"Multiplication using FLOAT is giving noticeable difference.\r\n\r\n```java\r\n\r\npublic static void main(String[] args) {\r\n    // using string and parsing instead of actual data type is part of use case, that is why representing the same here\r\n\r\n    double v1 = parseDouble(&quot;590.0&quot;);\r\n    double v2 = parseDouble(&quot;490.0&quot;);\r\n    double v3 = parseDouble(&quot;391.0&quot;);\r\n\r\n    float v4 = parseFloat(&quot;590.0&quot;);\r\n    float v5 = parseFloat(&quot;490.0&quot;);\r\n    float v6 = parseFloat(&quot;391.0&quot;);\r\n\r\n    System.out.println(new BigDecimal(v1 * v2 * v3));\r\n    System.out.println(new BigDecimal(v4 * v5 * v6));\r\n\r\n    System.out.println(BigDecimal.valueOf(Float.parseFloat(&quot;289100.0&quot;) * Float.parseFloat(&quot;391.0&quot;)));\r\n    System.out.println(BigDecimal.valueOf(Double.parseDouble(&quot;289100.0&quot;) * Double.parseDouble(&quot;391.0&quot;)));\r\n\r\n}\r\n```\r\n\r\n\r\nOutput:\r\n```\r\n113038100 // double multiplication\r\n113038096 // float multiplication\r\n113038096\r\n113038100\r\n```\r\n\r\nFor above code, \r\n\r\n(590.0 * 490.0 * 391.0) gives 113038100 using double\r\n\r\n\r\n(590.0 * 490.0 * 391.0) gives 113038096 using float (113038100 - 113038096 = 4 // difference)\r\n\r\nI have read through https://floating-point-gui.de/basic/ this link and able to understand how floating point calculation happens and all however 4 count different is unexpected.\r\n\r\nPlease help me understand below things\r\n\r\n - Is this correct first\r\n - Does always float gives wrong numbers ??\r\n - As I can see double also use same technique, so how much guarantee we have to get correct result if we use double\r\n","title":"Java Float multiplication giving wrong result","body":"<p>Multiplication using FLOAT is giving noticeable difference.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic static void main(String[] args) {\n    // using string and parsing instead of actual data type is part of use case, that is why representing the same here\n\n    double v1 = parseDouble(&quot;590.0&quot;);\n    double v2 = parseDouble(&quot;490.0&quot;);\n    double v3 = parseDouble(&quot;391.0&quot;);\n\n    float v4 = parseFloat(&quot;590.0&quot;);\n    float v5 = parseFloat(&quot;490.0&quot;);\n    float v6 = parseFloat(&quot;391.0&quot;);\n\n    System.out.println(new BigDecimal(v1 * v2 * v3));\n    System.out.println(new BigDecimal(v4 * v5 * v6));\n\n    System.out.println(BigDecimal.valueOf(Float.parseFloat(&quot;289100.0&quot;) * Float.parseFloat(&quot;391.0&quot;)));\n    System.out.println(BigDecimal.valueOf(Double.parseDouble(&quot;289100.0&quot;) * Double.parseDouble(&quot;391.0&quot;)));\n\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>113038100 // double multiplication\n113038096 // float multiplication\n113038096\n113038100\n</code></pre>\n<p>For above code,</p>\n<p>(590.0 * 490.0 * 391.0) gives 113038100 using double</p>\n<p>(590.0 * 490.0 * 391.0) gives 113038096 using float (113038100 - 113038096 = 4 // difference)</p>\n<p>I have read through <a href=\"https://floating-point-gui.de/basic/\" rel=\"nofollow noreferrer\">https://floating-point-gui.de/basic/</a> this link and able to understand how floating point calculation happens and all however 4 count different is unexpected.</p>\n<p>Please help me understand below things</p>\n<ul>\n<li>Is this correct first</li>\n<li>Does always float gives wrong numbers ??</li>\n<li>As I can see double also use same technique, so how much guarantee we have to get correct result if we use double</li>\n</ul>\n"},{"tags":["java","email","outlook","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":8253353,"reputation":41,"user_id":6207242,"display_name":"Travis Hummel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1461956507,"creation_date":1461956507,"answer_id":36945700,"question_id":32121294,"body_markdown":"I ran into this recently, but don&#39;t remember which solved it. One main issue is in the documentation in that it is varying. It will tell you to attach &quot;resource&quot;, but that is for something else like Azure.\r\n\r\nHere is the code I used:\r\n\r\nFirst request to send:\r\n          \r\n          private static final String USER_OAUTH2_AUTHORIZE_URL = &quot;https://login.microsoftonline.com/common/oauth2/v2.0/authorize&quot;;\r\n\r\n          public String getOAuthDialog(Http.Request request) {\r\n            return USER_OAUTH2_AUTHORIZE_URL\r\n               + &quot;?client_id=&quot; + config.getClientId()\r\n               + &quot;&amp;redirect_uri=&quot; + getOutlookLoginRedirect(request)\r\n               + &quot;&amp;response_type=code&quot;\r\n               + &quot;&amp;scope=https%3A%2F%2Foutlook.office.com%2Fmail.send%20&quot; +\r\n                 &quot;https%3A%2F%2Foutlook.office.com%2Fmail.readwrite%20&quot; + \r\n                 &quot;offline_access%20openid%20email%20profile&quot;\r\n               + &quot;&amp;state=&quot; + crypto.generateSignedToken();\r\n           }\r\nScope was the hardest thing to figure out. I found a lot of ones that did not work. And it wasn&#39;t clear that I needed to separate them with spaces. \r\n\r\nThen they will send you a request to your redirect url that was supplied. It will contain a code which you need to exchange for the data you requested in the scope. The redirect url that is supplied needs to be the exact same. Also you need to register the redirect url on  your application portal under the Platform-&gt;Add Platform-&gt;Redirect URI-&gt;Add Url\r\n\r\n      private static final String USER_ACCESS_TOKEN_URL = &quot;https://login.microsoftonline.com/common/oauth2/v2.0/token&quot;;\r\n      private Map&lt;String, String&gt; sendOutlookUserOAuthRequest(Http.Request request, String code) {\r\n        WSClient ws = WS.client();\r\n\r\n        HttpParameters params = new HttpParameters();\r\n        params.put(&quot;client_id&quot;, config.getClientId(), true);\r\n        params.put(&quot;client_secret&quot;, config.getClientSecret(), true);\r\n        params.put(&quot;code&quot;, code, true);\r\n        params.put(&quot;redirect_uri&quot;, getOutlookLoginRedirect(request), true);\r\n        params.put(&quot;grant_type&quot;, &quot;authorization_code&quot;);\r\n        String postParams = OAuthUtil.parametersToString(params);\r\n\r\n        WSRequest wsRequest = ws.url(USER_ACCESS_TOKEN_URL)\r\n            .setMethod(&quot;POST&quot;)\r\n            .setContentType(&quot;application/x-www-form-urlencoded&quot;)\r\n            .setBody(postParams);\r\n\r\n        WSResponse wsResponse = wsRequest.execute().get(10, TimeUnit.SECONDS);\r\n\r\n        Map&lt;String, String&gt; result = new HashMap&lt;&gt;();\r\n        if (wsResponse.getStatus() != HttpStatus.SC_OK) {\r\n          return result;\r\n        }\r\n\r\n        JsonNode node = wsResponse.asJson();\r\n        if (node.hasNonNull(&quot;access_token&quot;)) {\r\n          result.put(&quot;access_token&quot;, node.get(&quot;access_token&quot;).asText());\r\n        }\r\n        if (node.hasNonNull(&quot;refresh_token&quot;)) {\r\n          result.put(&quot;refresh_token&quot;, node.get(&quot;refresh_token&quot;).asText());\r\n        }\r\n\r\n        if (node.hasNonNull(&quot;id_token&quot;)) {\r\n          String[] tokenSplit = node.get(&quot;id_token&quot;).asText().split(&quot;\\\\.&quot;);\r\n          if (tokenSplit.length &gt;= 2) {\r\n            try {\r\n              JSONObject jsonObject = new JSONObject(new String(Base64.getDecoder().decode(tokenSplit[1])));\r\n              if (jsonObject.has(&quot;name&quot;)) {\r\n                result.put(&quot;name&quot;, jsonObject.get(&quot;name&quot;).toString());\r\n              }\r\n              if (jsonObject.has(&quot;email&quot;)) {\r\n                result.put(&quot;outlookUid&quot;, jsonObject.get(&quot;email&quot;).toString());\r\n              } else if (jsonObject.has(&quot;preferred_username&quot;)) {\r\n                result.put(&quot;outlookUid&quot;, jsonObject.get(&quot;preferred_username&quot;).toString());\r\n              }\r\n            } catch (JSONException e) {\r\n              log.error(&quot;Error extracting outlookUid from id_token: &quot;, e);\r\n            }\r\n          }\r\n        }\r\n\r\n        return result;\r\n      }\r\n\r\nAnother request that you might need is to update the refresh token:\r\n\r\n      private String getAccessTokenFromRefreshToken(User user) {\r\n\r\n        WSClient ws = WS.client();\r\n        HttpParameters params = new HttpParameters();\r\n        params.put(&quot;client_id&quot;, config.getClientId(), true);\r\n        params.put(&quot;client_secret&quot;, config.getClientSecret(), true);\r\n        params.put(&quot;grant_type&quot;, &quot;refresh_token&quot;);\r\n        params.put(&quot;refresh_token&quot;, user.getOutlookRefreshToken());\r\n        String postParams = OAuthUtil.parametersToString(params);\r\n\r\n        WSRequest wsRequest = ws.url(USER_ACCESS_TOKEN_URL)\r\n            .setMethod(&quot;POST&quot;)\r\n            .setContentType(&quot;application/x-www-form-urlencoded&quot;)\r\n            .setBody(postParams);\r\n\r\n        WSResponse wsResponse = wsRequest.execute().get(10, TimeUnit.SECONDS);\r\n        if (wsResponse.getStatus() != HttpStatus.SC_OK) {\r\n          log.error(&quot;Failure to refresh outlook access token for user: &quot; + user +\r\n              &quot;. Received status: &quot; + wsResponse.getStatus() + &quot; : &quot; + wsResponse.getStatusText());\r\n          return null;\r\n        }\r\n        JsonNode node = wsResponse.asJson();\r\n        if (node.hasNonNull(&quot;access_token&quot;)) {\r\n          String accessToken = node.get(&quot;access_token&quot;).asText();\r\n          return accessToken;\r\n        } else {\r\n          log.error(&quot;Outlook refresh token failure, &#39;access_token&#39; not present in response body: &quot; + wsResponse.getBody());\r\n          return null;\r\n        }\r\n      }\r\n\r\n\r\nOne issue I ran into that took far longer than I would have hoped was in getting the clientId and clientSecret. This was because the language microsoft uses wasn&#39;t the most explicit. Client Id and application id are used interchangeably. The client secret is also the password that you create on the Application Portal, not to be confused with the Private Key that you can generate. \r\n\r\nSo you actually want the application_id and the password, although they refer to them as client_id and client_secret with no direct indication as to the lines drawn. \r\n\r\nThis is all assuming you have set up an application on the Outlook Application Portal. https://apps.dev.microsoft.com/\r\n\r\nI hope this helps, although I assume you probably already solved this.","title":"Outlook OAuth2 access mails","body":"<p>I ran into this recently, but don't remember which solved it. One main issue is in the documentation in that it is varying. It will tell you to attach \"resource\", but that is for something else like Azure.</p>\n\n<p>Here is the code I used:</p>\n\n<p>First request to send:</p>\n\n<pre><code>      private static final String USER_OAUTH2_AUTHORIZE_URL = \"https://login.microsoftonline.com/common/oauth2/v2.0/authorize\";\n\n      public String getOAuthDialog(Http.Request request) {\n        return USER_OAUTH2_AUTHORIZE_URL\n           + \"?client_id=\" + config.getClientId()\n           + \"&amp;redirect_uri=\" + getOutlookLoginRedirect(request)\n           + \"&amp;response_type=code\"\n           + \"&amp;scope=https%3A%2F%2Foutlook.office.com%2Fmail.send%20\" +\n             \"https%3A%2F%2Foutlook.office.com%2Fmail.readwrite%20\" + \n             \"offline_access%20openid%20email%20profile\"\n           + \"&amp;state=\" + crypto.generateSignedToken();\n       }\n</code></pre>\n\n<p>Scope was the hardest thing to figure out. I found a lot of ones that did not work. And it wasn't clear that I needed to separate them with spaces. </p>\n\n<p>Then they will send you a request to your redirect url that was supplied. It will contain a code which you need to exchange for the data you requested in the scope. The redirect url that is supplied needs to be the exact same. Also you need to register the redirect url on  your application portal under the Platform->Add Platform->Redirect URI->Add Url</p>\n\n<pre><code>  private static final String USER_ACCESS_TOKEN_URL = \"https://login.microsoftonline.com/common/oauth2/v2.0/token\";\n  private Map&lt;String, String&gt; sendOutlookUserOAuthRequest(Http.Request request, String code) {\n    WSClient ws = WS.client();\n\n    HttpParameters params = new HttpParameters();\n    params.put(\"client_id\", config.getClientId(), true);\n    params.put(\"client_secret\", config.getClientSecret(), true);\n    params.put(\"code\", code, true);\n    params.put(\"redirect_uri\", getOutlookLoginRedirect(request), true);\n    params.put(\"grant_type\", \"authorization_code\");\n    String postParams = OAuthUtil.parametersToString(params);\n\n    WSRequest wsRequest = ws.url(USER_ACCESS_TOKEN_URL)\n        .setMethod(\"POST\")\n        .setContentType(\"application/x-www-form-urlencoded\")\n        .setBody(postParams);\n\n    WSResponse wsResponse = wsRequest.execute().get(10, TimeUnit.SECONDS);\n\n    Map&lt;String, String&gt; result = new HashMap&lt;&gt;();\n    if (wsResponse.getStatus() != HttpStatus.SC_OK) {\n      return result;\n    }\n\n    JsonNode node = wsResponse.asJson();\n    if (node.hasNonNull(\"access_token\")) {\n      result.put(\"access_token\", node.get(\"access_token\").asText());\n    }\n    if (node.hasNonNull(\"refresh_token\")) {\n      result.put(\"refresh_token\", node.get(\"refresh_token\").asText());\n    }\n\n    if (node.hasNonNull(\"id_token\")) {\n      String[] tokenSplit = node.get(\"id_token\").asText().split(\"\\\\.\");\n      if (tokenSplit.length &gt;= 2) {\n        try {\n          JSONObject jsonObject = new JSONObject(new String(Base64.getDecoder().decode(tokenSplit[1])));\n          if (jsonObject.has(\"name\")) {\n            result.put(\"name\", jsonObject.get(\"name\").toString());\n          }\n          if (jsonObject.has(\"email\")) {\n            result.put(\"outlookUid\", jsonObject.get(\"email\").toString());\n          } else if (jsonObject.has(\"preferred_username\")) {\n            result.put(\"outlookUid\", jsonObject.get(\"preferred_username\").toString());\n          }\n        } catch (JSONException e) {\n          log.error(\"Error extracting outlookUid from id_token: \", e);\n        }\n      }\n    }\n\n    return result;\n  }\n</code></pre>\n\n<p>Another request that you might need is to update the refresh token:</p>\n\n<pre><code>  private String getAccessTokenFromRefreshToken(User user) {\n\n    WSClient ws = WS.client();\n    HttpParameters params = new HttpParameters();\n    params.put(\"client_id\", config.getClientId(), true);\n    params.put(\"client_secret\", config.getClientSecret(), true);\n    params.put(\"grant_type\", \"refresh_token\");\n    params.put(\"refresh_token\", user.getOutlookRefreshToken());\n    String postParams = OAuthUtil.parametersToString(params);\n\n    WSRequest wsRequest = ws.url(USER_ACCESS_TOKEN_URL)\n        .setMethod(\"POST\")\n        .setContentType(\"application/x-www-form-urlencoded\")\n        .setBody(postParams);\n\n    WSResponse wsResponse = wsRequest.execute().get(10, TimeUnit.SECONDS);\n    if (wsResponse.getStatus() != HttpStatus.SC_OK) {\n      log.error(\"Failure to refresh outlook access token for user: \" + user +\n          \". Received status: \" + wsResponse.getStatus() + \" : \" + wsResponse.getStatusText());\n      return null;\n    }\n    JsonNode node = wsResponse.asJson();\n    if (node.hasNonNull(\"access_token\")) {\n      String accessToken = node.get(\"access_token\").asText();\n      return accessToken;\n    } else {\n      log.error(\"Outlook refresh token failure, 'access_token' not present in response body: \" + wsResponse.getBody());\n      return null;\n    }\n  }\n</code></pre>\n\n<p>One issue I ran into that took far longer than I would have hoped was in getting the clientId and clientSecret. This was because the language microsoft uses wasn't the most explicit. Client Id and application id are used interchangeably. The client secret is also the password that you create on the Application Portal, not to be confused with the Private Key that you can generate. </p>\n\n<p>So you actually want the application_id and the password, although they refer to them as client_id and client_secret with no direct indication as to the lines drawn. </p>\n\n<p>This is all assuming you have set up an application on the Outlook Application Portal. <a href=\"https://apps.dev.microsoft.com/\" rel=\"nofollow\">https://apps.dev.microsoft.com/</a></p>\n\n<p>I hope this helps, although I assume you probably already solved this.</p>\n"},{"comments":[{"owner":{"account_id":7547772,"reputation":8593,"user_id":5730279,"display_name":"hc_dev"},"score":1,"creation_date":1672363072,"post_id":74955366,"comment_id":132276633,"body_markdown":"Well researched. Can you explain with some code-sample how to add service-principals. How did or would you solve it?","body":"Well researched. Can you explain with some code-sample how to add service-principals. How did or would you solve it?"},{"owner":{"account_id":27385661,"reputation":389,"user_id":20889523,"display_name":"Ritik Sharma"},"score":0,"creation_date":1678039859,"post_id":74955366,"comment_id":133451750,"body_markdown":"@hc_dev, it is already explained in the medium article. To register your application in exchange online and provide appropriate access rights to the application, tenant admin needs to run some commands listed in the article. In order to run commands in azure powershell user must be an admin user.","body":"@hc_dev, it is already explained in the medium article. To register your application in exchange online and provide appropriate access rights to the application, tenant admin needs to run some commands listed in the article. In order to run commands in azure powershell user must be an admin user."}],"tags":[],"owner":{"account_id":27385661,"reputation":389,"user_id":20889523,"display_name":"Ritik Sharma"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1672363252,"creation_date":1672342674,"answer_id":74955366,"question_id":32121294,"body_markdown":"I faced the same problem with Java mail. You need to add service principals for your application on the Azure AD. \r\n\r\nFind complete steps explained in Medium article [Complete guide: Java Mail IMAP OAuth2.0 Connect Outlook | by Ritik Sharma | Dec, 2022][1].\r\n\r\n[1]: https://medium.com/@rickors560/complete-guide-java-mail-imap-oauth2-0-connect-outlook-f752353e8c91","title":"Outlook OAuth2 access mails","body":"<p>I faced the same problem with Java mail. You need to add service principals for your application on the Azure AD.</p>\n<p>Find complete steps explained in Medium article <a href=\"https://medium.com/@rickors560/complete-guide-java-mail-imap-oauth2-0-connect-outlook-f752353e8c91\" rel=\"nofollow noreferrer\">Complete guide: Java Mail IMAP OAuth2.0 Connect Outlook | by Ritik Sharma | Dec, 2022</a>.</p>\n"}],"owner":{"account_id":3093121,"reputation":889,"user_id":2618875,"accept_rate":38,"display_name":"user2618875"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2733,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672363252,"creation_date":1440081731,"question_id":32121294,"body_markdown":"I am following this post: [Outlook RestGettingStarted][1]. From my Java app I am trying to get AccessToken and RefreshToken. When I made Authorization code request, it ended into following error:\r\n\r\n&gt; Sorry, but we’re having trouble signing you in. We received a bad\r\n&gt; request.\r\n&gt; \r\n&gt; Additional technical information: Correlation ID:\r\n&gt; ed838d66-5f2e-4cfb-9223-a29082ecb26f Timestamp: 2015-08-20 10:20:09Z\r\n&gt; AADSTS90011: The &#39;resource&#39; request parameter is not supported.\r\n\r\n**NOTE:** URL formation is correct as per documentation.\r\n\r\nSo, I removed &quot;resource&quot; query parameter from my code. And redirected authorize url in browser. On user consent I got authorization code. Using this code I got AccessToken. But when I try to connect with Outlook IMAP server it failed. Java ref Link for details: [Java OAuth2][2]\r\nBut it gives me error: \r\n\r\n&gt; [AUTHENTICATIONFAILED] OAuth authentication failed.\r\n\r\n**NOTE:** I added correct scope, and user email.  \r\n\r\nThen using obtained Access Token I made Mail Rest API call to get Messages from User Inbox. It ended into following error:\r\n\r\n&gt; HTTP response:\r\n&gt; {&quot;error&quot;:{&quot;code&quot;:&quot;MailboxNotEnabledForRESTAPI&quot;,&quot;message&quot;:&quot;REST API is\r\n&gt; not yet supported for this mailbox.&quot;}}\r\n\r\nCan anyone help me for following:\r\n\r\n- What is the exact cause for: &quot;AADSTS90011: The &#39;resource&#39; request parameter is not supported&quot; after following Outlook dev docs.\r\n\r\n- How to resolve &quot;MailboxNotEnabledForRESTAPI&quot; error.\r\n\r\n- Is it possible to connect using java mail APIs to Outlook IMAP server with correct AccessToken ?\r\n\r\n\r\n  [1]: https://dev.outlook.com/RestGettingStarted\r\n  [2]: https://java.net/projects/javamail/pages/OAuth2","title":"Outlook OAuth2 access mails","body":"<p>I am following this post: <a href=\"https://dev.outlook.com/RestGettingStarted\" rel=\"nofollow\">Outlook RestGettingStarted</a>. From my Java app I am trying to get AccessToken and RefreshToken. When I made Authorization code request, it ended into following error:</p>\n\n<blockquote>\n  <p>Sorry, but we’re having trouble signing you in. We received a bad\n  request.</p>\n  \n  <p>Additional technical information: Correlation ID:\n  ed838d66-5f2e-4cfb-9223-a29082ecb26f Timestamp: 2015-08-20 10:20:09Z\n  AADSTS90011: The 'resource' request parameter is not supported.</p>\n</blockquote>\n\n<p><strong>NOTE:</strong> URL formation is correct as per documentation.</p>\n\n<p>So, I removed \"resource\" query parameter from my code. And redirected authorize url in browser. On user consent I got authorization code. Using this code I got AccessToken. But when I try to connect with Outlook IMAP server it failed. Java ref Link for details: <a href=\"https://java.net/projects/javamail/pages/OAuth2\" rel=\"nofollow\">Java OAuth2</a>\nBut it gives me error: </p>\n\n<blockquote>\n  <p>[AUTHENTICATIONFAILED] OAuth authentication failed.</p>\n</blockquote>\n\n<p><strong>NOTE:</strong> I added correct scope, and user email.  </p>\n\n<p>Then using obtained Access Token I made Mail Rest API call to get Messages from User Inbox. It ended into following error:</p>\n\n<blockquote>\n  <p>HTTP response:\n  {\"error\":{\"code\":\"MailboxNotEnabledForRESTAPI\",\"message\":\"REST API is\n  not yet supported for this mailbox.\"}}</p>\n</blockquote>\n\n<p>Can anyone help me for following:</p>\n\n<ul>\n<li><p>What is the exact cause for: \"AADSTS90011: The 'resource' request parameter is not supported\" after following Outlook dev docs.</p></li>\n<li><p>How to resolve \"MailboxNotEnabledForRESTAPI\" error.</p></li>\n<li><p>Is it possible to connect using java mail APIs to Outlook IMAP server with correct AccessToken ?</p></li>\n</ul>\n"},{"tags":["java","spring","spring-boot","spring-data","database-migration"],"comments":[{"owner":{"account_id":3426873,"reputation":71,"user_id":2872426,"display_name":"WSouBar"},"score":0,"creation_date":1672374837,"post_id":74957317,"comment_id":132277930,"body_markdown":"maybe this can help [spring-boot-data-sql-and-schema](https://www.baeldung.com/spring-boot-data-sql-and-schema-sql). Using data.sql file, and add this to your application.yml\n    spring:\n        jpa:\n            defer-datasource-initialization: true","body":"maybe this can help <a href=\"https://www.baeldung.com/spring-boot-data-sql-and-schema-sql\" rel=\"nofollow noreferrer\">spring-boot-data-sql-and-schema</a>. Using data.sql file, and add this to your application.yml     spring:         jpa:             defer-datasource-initialization: true"}],"owner":{"account_id":27367851,"reputation":71,"user_id":20874384,"display_name":"vw0389"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672362743,"creation_date":1672362085,"question_id":74957317,"body_markdown":"I am currently using hibernate repositories and I need roles in my database, as one of my service layers uses the roles at startup.\r\n\r\n```\r\n@SpringBootApplication\r\npublic class FedditBackendApplication {\r\n\r\n   public static void main(String[] args) {\r\n      SpringApplication.run(FedditBackendApplication.class, args);\r\n   }\r\n   @Bean\r\n   CommandLineRunner init (RoleRepository roleRepo) {\r\n      return args -&gt; {\r\n         for(ERole role: ERole.values()) {\r\n            if (!roleRepo.existsByName(role)){\r\n               roleRepo.save(new Role(role));\r\n            }  \r\n         }\r\n      };\r\n   }\r\n   @Bean\r\n   public ModelMapper modelMapper() {\r\n      return new ModelMapper();\r\n   }\r\n}\r\n```\r\n\r\nTo initialize my roles into my database, I let spring do my schema creation, however I need to put these rows into the database directly afterwards.\r\n\r\nIs There a better way to do this?  The issue I&#39;m running into is that one of my Service components gets from the roleRepository in the constructor and it&#39;s not finding anything when I use this initialization method.\r\n\r\n```\r\n@Service\r\n@Transactional\r\npublic class UserServiceImpl implements UserService {\r\n    private final UserRepository userRepository;\r\n    private final AuthenticationManager authenticationManager;\r\n    private final RoleRepository roleRepository;\r\n    private final PasswordEncoder encoder;\r\n    private final JwtUtils jwtUtils;\r\n    private final Set&lt;Role&gt; userRoles;\r\n    public UserServiceImpl(UserRepository userRepository, AuthenticationManager authenticationManager, RoleRepository roleRepository, PasswordEncoder encoder, JwtUtils jwtUtils,Set&lt;Role&gt; userRoles){\r\n        this.userRepository = userRepository;\r\n        this.authenticationManager = authenticationManager;\r\n        this.roleRepository = roleRepository;\r\n        this.encoder = encoder;\r\n        this.jwtUtils = jwtUtils;\r\n        this.userRoles = new HashSet&lt;&gt;();\r\n\r\n        Optional&lt;Role&gt; userRole = this.roleRepository.findByName(ERole.ROLE_USER);\r\n        // throws error on next line because userRole is not present in the DB\r\n        this.userRoles.add(userRole.get());\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI&#39;ve tried changing the order of the bean initialization with no success.  \r\n\r\nIt seems that the CommandLineRunner bean initializes after the service layers.\r\n\r\n\r\n```\r\n@Bean\r\nCommandLineRunner init (RoleRepository roleRepo) {\r\n  return args -&gt; {\r\n     for(ERole role: ERole.values()) {\r\n        if (!roleRepo.existsByName(role)){\r\n           roleRepo.save(new Role(role));\r\n        }  \r\n     }\r\n  };\r\n}\r\n```\r\n\r\n\r\nI&#39;d like to initialize these rows after the schema is created, though I&#39;m not really sure how.\r\n\r\nhttps://github.com/vw0389/feddit-backend/tree/comments is the repo and branch if relevant","title":"Spring Boot Order of Initialization for reading from Database","body":"<p>I am currently using hibernate repositories and I need roles in my database, as one of my service layers uses the roles at startup.</p>\n<pre><code>@SpringBootApplication\npublic class FedditBackendApplication {\n\n   public static void main(String[] args) {\n      SpringApplication.run(FedditBackendApplication.class, args);\n   }\n   @Bean\n   CommandLineRunner init (RoleRepository roleRepo) {\n      return args -&gt; {\n         for(ERole role: ERole.values()) {\n            if (!roleRepo.existsByName(role)){\n               roleRepo.save(new Role(role));\n            }  \n         }\n      };\n   }\n   @Bean\n   public ModelMapper modelMapper() {\n      return new ModelMapper();\n   }\n}\n</code></pre>\n<p>To initialize my roles into my database, I let spring do my schema creation, however I need to put these rows into the database directly afterwards.</p>\n<p>Is There a better way to do this?  The issue I'm running into is that one of my Service components gets from the roleRepository in the constructor and it's not finding anything when I use this initialization method.</p>\n<pre><code>@Service\n@Transactional\npublic class UserServiceImpl implements UserService {\n    private final UserRepository userRepository;\n    private final AuthenticationManager authenticationManager;\n    private final RoleRepository roleRepository;\n    private final PasswordEncoder encoder;\n    private final JwtUtils jwtUtils;\n    private final Set&lt;Role&gt; userRoles;\n    public UserServiceImpl(UserRepository userRepository, AuthenticationManager authenticationManager, RoleRepository roleRepository, PasswordEncoder encoder, JwtUtils jwtUtils,Set&lt;Role&gt; userRoles){\n        this.userRepository = userRepository;\n        this.authenticationManager = authenticationManager;\n        this.roleRepository = roleRepository;\n        this.encoder = encoder;\n        this.jwtUtils = jwtUtils;\n        this.userRoles = new HashSet&lt;&gt;();\n\n        Optional&lt;Role&gt; userRole = this.roleRepository.findByName(ERole.ROLE_USER);\n        // throws error on next line because userRole is not present in the DB\n        this.userRoles.add(userRole.get());\n    }\n}\n</code></pre>\n<p>I've tried changing the order of the bean initialization with no success.</p>\n<p>It seems that the CommandLineRunner bean initializes after the service layers.</p>\n<pre><code>@Bean\nCommandLineRunner init (RoleRepository roleRepo) {\n  return args -&gt; {\n     for(ERole role: ERole.values()) {\n        if (!roleRepo.existsByName(role)){\n           roleRepo.save(new Role(role));\n        }  \n     }\n  };\n}\n</code></pre>\n<p>I'd like to initialize these rows after the schema is created, though I'm not really sure how.</p>\n<p><a href=\"https://github.com/vw0389/feddit-backend/tree/comments\" rel=\"nofollow noreferrer\">https://github.com/vw0389/feddit-backend/tree/comments</a> is the repo and branch if relevant</p>\n"},{"tags":["java","multithreading","timing"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1671826013,"post_id":74902979,"comment_id":132185451,"body_markdown":"Does this answer your question? [How do I write a correct micro-benchmark in Java?](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\">How do I write a correct micro-benchmark in Java?</a>"},{"owner":{"account_id":15062967,"reputation":50571,"user_id":10871073,"display_name":"Adrian Mole"},"score":0,"creation_date":1672361814,"post_id":74902979,"comment_id":132276502,"body_markdown":"I rolled back your question to the **version that was answered**. Please do not change questions to something completely different after they have been answered. If you have a new question, then post it as a new question.","body":"I rolled back your question to the <b>version that was answered</b>. Please do not change questions to something completely different after they have been answered. If you have a new question, then post it as a new question."},{"owner":{"account_id":15959658,"reputation":11,"user_id":11517112,"display_name":"geko"},"score":0,"creation_date":1672683063,"post_id":74902979,"comment_id":132327320,"body_markdown":"Ok Andrian, I posted a new one.","body":"Ok Andrian, I posted a new one."}],"answers":[{"comments":[{"owner":{"account_id":15959658,"reputation":11,"user_id":11517112,"display_name":"geko"},"score":1,"creation_date":1671823051,"post_id":74903145,"comment_id":132184892,"body_markdown":"Yes Louis, thanks a lot. I substituted Math.random() with the java.util.Random class and the nextDouble() method and now times are different. Now I get the following overall execution time (in multithreading): 1160 ms. But it doesn&#39;t look realistic. In my original post it was about 15 seconds (too high), now it is about 1 second (too low), as multithreading doesn&#39;t create processing power. Maybe there is still something wrong...","body":"Yes Louis, thanks a lot. I substituted Math.random() with the java.util.Random class and the nextDouble() method and now times are different. Now I get the following overall execution time (in multithreading): 1160 ms. But it doesn&#39;t look realistic. In my original post it was about 15 seconds (too high), now it is about 1 second (too low), as multithreading doesn&#39;t create processing power. Maybe there is still something wrong..."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1671823259,"post_id":74903145,"comment_id":132184931,"body_markdown":"That sounds related to JIT behavior and how simply measuring the passage of time on your code can produce misleading benchmark results.","body":"That sounds related to JIT behavior and how simply measuring the passage of time on your code can produce misleading benchmark results."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1671829864,"post_id":74903145,"comment_id":132186265,"body_markdown":"@geko how many threads do you use? You write that _multithreading doesn&#39;t create processing power_, but modern CPUs can execute 8 or more threads **in parallel** (depending on how cores it has - my machine for example has 8 cores and can execute 16 threads parallel). With 5 threads on a machine that can run 5 or more threads parallel each task (L0 to L4) still only needs about 1100 milliseconds and they can run truly parallel so if you start them together they will all finish after about 1100 milliseconds.","body":"@geko how many threads do you use? You write that <i>multithreading doesn&#39;t create processing power</i>, but modern CPUs can execute 8 or more threads <b>in parallel</b> (depending on how cores it has - my machine for example has 8 cores and can execute 16 threads parallel). With 5 threads on a machine that can run 5 or more threads parallel each task (L0 to L4) still only needs about 1100 milliseconds and they can run truly parallel so if you start them together they will all finish after about 1100 milliseconds."}],"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1671821994,"creation_date":1671821994,"answer_id":74903145,"question_id":74902979,"body_markdown":"There are lots of possible explanations, including that you coded the multithreading solution wrong, but the one that jumps out at me is that `Math.random()` is fully synchronized and can&#39;t be run concurrently.  Its documentation actually calls this out:\r\n\r\n&gt; However, if many threads need to generate pseudorandom numbers at a great rate, it may reduce contention for each thread to have its own pseudorandom-number generator.\r\n\r\nUsing `ThreadLocalRandom` or separate `Random` objects instead of `Math.random()` would address that concern.\r\n\r\nIn general, though, this is likely to be about your code, not about multithreading in general.  (Other possibilities that occur to me include how you&#39;re measuring the time consumption and how many cores are actually available on your machine.)","title":"Why do two tasks take much longer if running in multithreading than in mono threading?","body":"<p>There are lots of possible explanations, including that you coded the multithreading solution wrong, but the one that jumps out at me is that <code>Math.random()</code> is fully synchronized and can't be run concurrently.  Its documentation actually calls this out:</p>\n<blockquote>\n<p>However, if many threads need to generate pseudorandom numbers at a great rate, it may reduce contention for each thread to have its own pseudorandom-number generator.</p>\n</blockquote>\n<p>Using <code>ThreadLocalRandom</code> or separate <code>Random</code> objects instead of <code>Math.random()</code> would address that concern.</p>\n<p>In general, though, this is likely to be about your code, not about multithreading in general.  (Other possibilities that occur to me include how you're measuring the time consumption and how many cores are actually available on your machine.)</p>\n"}],"owner":{"account_id":15959658,"reputation":11,"user_id":11517112,"display_name":"geko"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1671965645,"accepted_answer_id":74903145,"answer_count":1,"score":-2,"last_activity_date":1672361745,"creation_date":1671820743,"question_id":74902979,"body_markdown":"I wrote this Java method which takes about one second to run (on my computer):\r\n```\r\n    /**\r\n     * This method takes about one second to run.\r\n     */\r\n    private long eseguiUnit&#224;DiLavoro() {\r\n        double x, y = 1000;\r\n        final long start_time, stop_time;\r\n\r\n        start_time = System.currentTimeMillis();\r\n        for (int i = 0; i &lt; 20000000; i++) {\r\n            x = Math.random();\r\n            y = y / Math.atan(x);\r\n        }\r\n        stop_time = System.currentTimeMillis();\r\n        return stop_time - start_time;\r\n    }\r\n```\r\n\r\nIf I run that method five times (L0, L1, L2, L3, L4) I get these times:\r\n\r\n - L0 takes 1099 ms,\r\n - L1 takes 1114 ms,\r\n - L2 takes 1099 ms,\r\n - L3 takes 1098 ms,\r\n - L4 takes 1100 ms.\r\n\r\nAnd the overall execution time is 5510 ms (about five times the time that each task takes). And this is fine.\r\n\r\nBut if I build that method as a thread, and I run it five times, I get these times:\r\n\r\n - L0 takes 15729 ms,\r\n - L1 takes 15635 ms,\r\n - L2 takes 15557 ms,\r\n - L3 takes 15714 ms,\r\n - L4 takes 15604 ms.\r\n\r\nThe overall execution time is now 15745 ms.\r\n\r\nThe tasks execution order is now L1 L2 L4 L3 L0, and this is fine.\r\n\r\nBut I expected the overall execution time was the same in both cases. Conversely when the multithreading approach was used, it was about three times slower than the mono threading one.\r\n\r\nI expected the multithreading approach was slightly slower than mono threading (due to some scheduler overhead) but three times slower is too much for me. What did I misunderstand?\r\n\r\nI also expected that the tasks L0, L1, L2, ... each took about 5 seconds and they, started together, stopped together too. In fact, they started together and stopped together, but each took about fifteen seconds.\r\n\r\nCan someone explain to me why multithreading processing is so inefficient? Thank you all\r\n","title":"Why do two tasks take much longer if running in multithreading than in mono threading?","body":"<p>I wrote this Java method which takes about one second to run (on my computer):</p>\n<pre><code>    /**\n     * This method takes about one second to run.\n     */\n    private long eseguiUnitàDiLavoro() {\n        double x, y = 1000;\n        final long start_time, stop_time;\n\n        start_time = System.currentTimeMillis();\n        for (int i = 0; i &lt; 20000000; i++) {\n            x = Math.random();\n            y = y / Math.atan(x);\n        }\n        stop_time = System.currentTimeMillis();\n        return stop_time - start_time;\n    }\n</code></pre>\n<p>If I run that method five times (L0, L1, L2, L3, L4) I get these times:</p>\n<ul>\n<li>L0 takes 1099 ms,</li>\n<li>L1 takes 1114 ms,</li>\n<li>L2 takes 1099 ms,</li>\n<li>L3 takes 1098 ms,</li>\n<li>L4 takes 1100 ms.</li>\n</ul>\n<p>And the overall execution time is 5510 ms (about five times the time that each task takes). And this is fine.</p>\n<p>But if I build that method as a thread, and I run it five times, I get these times:</p>\n<ul>\n<li>L0 takes 15729 ms,</li>\n<li>L1 takes 15635 ms,</li>\n<li>L2 takes 15557 ms,</li>\n<li>L3 takes 15714 ms,</li>\n<li>L4 takes 15604 ms.</li>\n</ul>\n<p>The overall execution time is now 15745 ms.</p>\n<p>The tasks execution order is now L1 L2 L4 L3 L0, and this is fine.</p>\n<p>But I expected the overall execution time was the same in both cases. Conversely when the multithreading approach was used, it was about three times slower than the mono threading one.</p>\n<p>I expected the multithreading approach was slightly slower than mono threading (due to some scheduler overhead) but three times slower is too much for me. What did I misunderstand?</p>\n<p>I also expected that the tasks L0, L1, L2, ... each took about 5 seconds and they, started together, stopped together too. In fact, they started together and stopped together, but each took about fifteen seconds.</p>\n<p>Can someone explain to me why multithreading processing is so inefficient? Thank you all</p>\n"},{"tags":["java","swing","inner-classes","jtabbedpane"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1672361464,"post_id":74957186,"comment_id":132276450,"body_markdown":"Why are you creating two instances of `panel2` in `add`?  Which raises the question of, why are you overriding `add` and circumventing the normal workflow?","body":"Why are you creating two instances of <code>panel2</code> in <code>add</code>?  Which raises the question of, why are you overriding <code>add</code> and circumventing the normal workflow?"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1672361572,"post_id":74957186,"comment_id":132276470,"body_markdown":"I might consider doing things like using a &quot;model&quot; and &quot;factory&quot; workflow to make it more &quot;abstract&quot; and I most certainly wouldn&#39;t be overriding methods like `add`, `setLayout`, `setVisible` or `setBackground`","body":"I might consider doing things like using a &quot;model&quot; and &quot;factory&quot; workflow to make it more &quot;abstract&quot; and I most certainly wouldn&#39;t be overriding methods like <code>add</code>, <code>setLayout</code>, <code>setVisible</code> or <code>setBackground</code>"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1672361661,"post_id":74957186,"comment_id":132276481,"body_markdown":"Also add in the fact that `add` is never called","body":"Also add in the fact that <code>add</code> is never called"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1672362586,"post_id":74957186,"comment_id":132276580,"body_markdown":"As a more &quot;general&quot; recommendation, I would consider doing some research on &quot;composition vs inheritance&quot; and &quot;model-view-controller&quot;","body":"As a more &quot;general&quot; recommendation, I would consider doing some research on &quot;composition vs inheritance&quot; and &quot;model-view-controller&quot;"}],"owner":{"account_id":22831679,"reputation":13,"user_id":16980020,"display_name":"Marcus"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672360256,"creation_date":1672360256,"question_id":74957186,"body_markdown":"I am using nested private classes to build a Java Swing application.\r\nThe tabbedPane does not appear when running the application.\r\nWhen run, the application shows a blank frame. The app exits on close.\r\n\r\nThe main question is, what are the options to get the tabbedPane to appear? A second question is if nested classes are a good approach/ am I using them correctly?\r\n\r\nThe following are the relevant classes.\r\n\r\n**Constructor**\r\n\r\n```\r\npackage personalApp;\r\n\r\n//imports\r\n\r\npublic class SwingApp {\r\n//Attributes\r\n//----- CONSTRUCTOR ------\r\nSwingApp() throws IOException{\r\nf1 = new Jframe();\r\n JTabbedPane z = new tabbedPane();\r\n        f1.add(z);\r\n        f1.setVisible(true);\r\n        f1.setSize(400,400);\r\n        f1.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n}\r\n```\r\n\r\n**tabbedPane**\r\n\r\n```\r\n   private class tabbedPane extends JTabbedPane {\r\n        @Override\r\n        public void setVisible(boolean aFlag) {\r\n            super.setVisible(true);\r\n        }\r\n\r\n        @Override\r\n        public Component add(String title, Component component) {\r\n            super.add(&quot;Contacts&quot;, new panel2());\r\n            return new panel2();\r\n        }\r\n\r\n    }\r\n```\r\n\r\n**panel2**\r\n\r\n```\r\nprivate class panel2 extends JPanel{\r\n\r\n        @Override\r\n        public void setLayout(LayoutManager mgr) {super.setLayout(new GridBagLayout());}\r\n\r\n        @Override\r\n        public void setBackground(Color bg) {super.setBackground(mainColor);}\r\n\r\n        @Override\r\n        public void setVisible(boolean aFlag) {super.setVisible(true);}\r\n\r\n public void add(Component comp, Object constraints) {\r\n  //There is a JTable, JScrollPane(JTable),JToolbar and JButton added within this method. They all follow the same structure.\r\n            openButtonPhonebook = new JButton(&quot;Open&quot;);\r\n         //multiple lines of GridBagConstriants. c = GridBagconstraints.\r\n            super.add(openButtonNotebook,c);\r\n    }\r\n}\r\n```\r\n\r\n**Main**\r\n\r\n```\r\npublic static void main(String[] args) throws IOException {new SwingApp();}\r\n```\r\n\r\nI have tried adding the components in multiple add methods. This gives an error for overwriting the same method.\r\n\r\nI have tried and was successful with adding components within the constructor method. This is causing the code to become hard to navigate. I want to use more abstraction to improve the readability of the code.\r\n\r\nUltimately, I am building a swing app with too much code to put in a constructor method. If there are alternatives to nested classes which improve readability, I am open to them.","title":"Tabbed pane does not appear when running Java swing app. nested classes approach","body":"<p>I am using nested private classes to build a Java Swing application.\nThe tabbedPane does not appear when running the application.\nWhen run, the application shows a blank frame. The app exits on close.</p>\n<p>The main question is, what are the options to get the tabbedPane to appear? A second question is if nested classes are a good approach/ am I using them correctly?</p>\n<p>The following are the relevant classes.</p>\n<p><strong>Constructor</strong></p>\n<pre><code>package personalApp;\n\n//imports\n\npublic class SwingApp {\n//Attributes\n//----- CONSTRUCTOR ------\nSwingApp() throws IOException{\nf1 = new Jframe();\n JTabbedPane z = new tabbedPane();\n        f1.add(z);\n        f1.setVisible(true);\n        f1.setSize(400,400);\n        f1.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n}\n</code></pre>\n<p><strong>tabbedPane</strong></p>\n<pre><code>   private class tabbedPane extends JTabbedPane {\n        @Override\n        public void setVisible(boolean aFlag) {\n            super.setVisible(true);\n        }\n\n        @Override\n        public Component add(String title, Component component) {\n            super.add(&quot;Contacts&quot;, new panel2());\n            return new panel2();\n        }\n\n    }\n</code></pre>\n<p><strong>panel2</strong></p>\n<pre><code>private class panel2 extends JPanel{\n\n        @Override\n        public void setLayout(LayoutManager mgr) {super.setLayout(new GridBagLayout());}\n\n        @Override\n        public void setBackground(Color bg) {super.setBackground(mainColor);}\n\n        @Override\n        public void setVisible(boolean aFlag) {super.setVisible(true);}\n\n public void add(Component comp, Object constraints) {\n  //There is a JTable, JScrollPane(JTable),JToolbar and JButton added within this method. They all follow the same structure.\n            openButtonPhonebook = new JButton(&quot;Open&quot;);\n         //multiple lines of GridBagConstriants. c = GridBagconstraints.\n            super.add(openButtonNotebook,c);\n    }\n}\n</code></pre>\n<p><strong>Main</strong></p>\n<pre><code>public static void main(String[] args) throws IOException {new SwingApp();}\n</code></pre>\n<p>I have tried adding the components in multiple add methods. This gives an error for overwriting the same method.</p>\n<p>I have tried and was successful with adding components within the constructor method. This is causing the code to become hard to navigate. I want to use more abstraction to improve the readability of the code.</p>\n<p>Ultimately, I am building a swing app with too much code to put in a constructor method. If there are alternatives to nested classes which improve readability, I am open to them.</p>\n"},{"tags":["java","android","android-recyclerview"],"owner":{"account_id":24465951,"reputation":1,"user_id":18386321,"display_name":"ahmed rashed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672358477,"creation_date":1672318754,"question_id":74951405,"body_markdown":"i have nested recycle view and i want to remove one item (inner recycle view) from the outer recycle view but my code clear all adapters in the inner recycle view so how can i delete or clear only one list adapter from inner recycle view and is their is a better way to make nested recycle view .....? \r\n\r\n```\r\n\r\npublic class MainWorkingTimeAdapter extends RecyclerView.Adapter&lt;MainWorkingTimeAdapter.MainWorkingTimeViewHolder&gt; {\r\n    private ArrayList&lt;String&gt; list = new ArrayList();\r\n    OnItemListener pOnItemListener;\r\n    String DAY_TAG;\r\n    Context context ;\r\n\r\n    ArrayList&lt;WorkingTime&gt;workingTimes;\r\n    String TAG =&quot;MainWorkingTimeAdapter&quot;;\r\n    @NonNull\r\n    @Override\r\n    public MainWorkingTimeViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        return new MainWorkingTimeViewHolder(LayoutInflater.from(parent.getContext()).inflate(R.layout.main_working_time_layout, parent, false), pOnItemListener);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MainWorkingTimeViewHolder holder, @SuppressLint(&quot;RecyclerView&quot;) int position) {\r\n        holder.adapter = new WorkingTimePreviewAdapter();\r\n                holder.adapter.setList(workingTimes,list.get(position).toLowerCase(Locale.ROOT));\r\n        }\r\n        holder.recyclerView.setAdapter(holder.adapter);\r\n        holder.recyclerView.setLayoutManager(new LinearLayoutManager(context));\r\n\r\n        holder.switch_.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            @Override\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (pOnItemListener != null) {\r\n                    pOnItemListener.switchClicked(isChecked,position);\r\n                }\r\n\r\n                if(!isChecked){\r\n                    holder.adapter.clearList();\r\n                   \r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return list.size();\r\n    }\r\n\r\n    public void setList(ArrayList&lt;String&gt; list,String dayTag,Context context, OnItemListener onItemListener) {\r\n        this.list = list;\r\n        this.context =context;\r\n        this.DAY_TAG =dayTag;\r\n        this.pOnItemListener = onItemListener;\r\n        notifyDataSetChanged();\r\n    }\r\n\r\n    public class MainWorkingTimeViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\r\n\r\n        OnItemListener onItemListener;\r\n        RecyclerView recyclerView ;\r\n        WorkingTimePreviewAdapter adapter ;\r\n        Button button;\r\n        Switch switch_ ;\r\n        TextView title ;\r\n        public MainWorkingTimeViewHolder(@NonNull View v, OnItemListener onItemListener) {\r\n            super(v);\r\n            recyclerView = v.findViewById(R.id.recycler_main_work_time);\r\n            button = v.findViewById(R.id.button_right_main_work_time);\r\n            title =  v.findViewById(R.id.tv_title_main_work_time);\r\n            switch_ = v.findViewById(R.id.switch_day_preview);\r\n            adapter = new WorkingTimePreviewAdapter();\r\n            this.onItemListener = onItemListener;\r\n            button.setOnClickListener(this);\r\n        }\r\n\r\n        @Override\r\n        public void onClick(View v) {\r\n            onItemListener.rightButtonClicked(getAdapterPosition(),list.get(getAdapterPosition()).toLowerCase(Locale.ROOT));\r\n        }\r\n    }\r\n\r\n    public void updateRecycler(ArrayList&lt;WorkingTime&gt; workingTimes,int pos){\r\n        this.workingTimes = workingTimes;\r\n        notifyItemChanged(pos);\r\n    }\r\n\r\n    public interface OnItemListener {\r\n        void rightButtonClicked(int pos,String day);\r\n        void switchClicked(boolean isChecked,int pos);\r\n    }\r\n\r\n```\r\n\r\n","title":"how to remove one adapter from inner recycle view android java","body":"<p>i have nested recycle view and i want to remove one item (inner recycle view) from the outer recycle view but my code clear all adapters in the inner recycle view so how can i delete or clear only one list adapter from inner recycle view and is their is a better way to make nested recycle view .....?</p>\n<pre><code>\npublic class MainWorkingTimeAdapter extends RecyclerView.Adapter&lt;MainWorkingTimeAdapter.MainWorkingTimeViewHolder&gt; {\n    private ArrayList&lt;String&gt; list = new ArrayList();\n    OnItemListener pOnItemListener;\n    String DAY_TAG;\n    Context context ;\n\n    ArrayList&lt;WorkingTime&gt;workingTimes;\n    String TAG =&quot;MainWorkingTimeAdapter&quot;;\n    @NonNull\n    @Override\n    public MainWorkingTimeViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        return new MainWorkingTimeViewHolder(LayoutInflater.from(parent.getContext()).inflate(R.layout.main_working_time_layout, parent, false), pOnItemListener);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull MainWorkingTimeViewHolder holder, @SuppressLint(&quot;RecyclerView&quot;) int position) {\n        holder.adapter = new WorkingTimePreviewAdapter();\n                holder.adapter.setList(workingTimes,list.get(position).toLowerCase(Locale.ROOT));\n        }\n        holder.recyclerView.setAdapter(holder.adapter);\n        holder.recyclerView.setLayoutManager(new LinearLayoutManager(context));\n\n        holder.switch_.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\n            @Override\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n                if (pOnItemListener != null) {\n                    pOnItemListener.switchClicked(isChecked,position);\n                }\n\n                if(!isChecked){\n                    holder.adapter.clearList();\n                   \n                }\n            }\n        });\n    }\n\n    @Override\n    public int getItemCount() {\n        return list.size();\n    }\n\n    public void setList(ArrayList&lt;String&gt; list,String dayTag,Context context, OnItemListener onItemListener) {\n        this.list = list;\n        this.context =context;\n        this.DAY_TAG =dayTag;\n        this.pOnItemListener = onItemListener;\n        notifyDataSetChanged();\n    }\n\n    public class MainWorkingTimeViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\n\n        OnItemListener onItemListener;\n        RecyclerView recyclerView ;\n        WorkingTimePreviewAdapter adapter ;\n        Button button;\n        Switch switch_ ;\n        TextView title ;\n        public MainWorkingTimeViewHolder(@NonNull View v, OnItemListener onItemListener) {\n            super(v);\n            recyclerView = v.findViewById(R.id.recycler_main_work_time);\n            button = v.findViewById(R.id.button_right_main_work_time);\n            title =  v.findViewById(R.id.tv_title_main_work_time);\n            switch_ = v.findViewById(R.id.switch_day_preview);\n            adapter = new WorkingTimePreviewAdapter();\n            this.onItemListener = onItemListener;\n            button.setOnClickListener(this);\n        }\n\n        @Override\n        public void onClick(View v) {\n            onItemListener.rightButtonClicked(getAdapterPosition(),list.get(getAdapterPosition()).toLowerCase(Locale.ROOT));\n        }\n    }\n\n    public void updateRecycler(ArrayList&lt;WorkingTime&gt; workingTimes,int pos){\n        this.workingTimes = workingTimes;\n        notifyItemChanged(pos);\n    }\n\n    public interface OnItemListener {\n        void rightButtonClicked(int pos,String day);\n        void switchClicked(boolean isChecked,int pos);\n    }\n\n</code></pre>\n"},{"tags":["java","spring","inversion-of-control"],"answers":[{"tags":[],"owner":{"account_id":33530,"reputation":11809,"user_id":93953,"accept_rate":56,"display_name":"Mike Clark"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1341498188,"creation_date":1341498188,"answer_id":11346329,"question_id":11346205,"body_markdown":"If I read your question correctly, you are asking if you can wire in a MyDao instance that you have defined elsewhere in your context, and provide a hard-coded string value for the name parameter.  If that is correct, you would configure your class like\r\n\r\n    &lt;bean class=&quot;MyClass&quot;&gt;\r\n      &lt;constructor-arg value=&quot;Hardcoded string value for the name&quot; /&gt;\r\n      &lt;constructor-arg ref=&quot;myDaoInstance&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nAnd elsewhere in your context file\r\n\r\n    &lt;bean class=&quot;MyDao&quot; id=&quot;myDaoInstance&gt;\r\n      //relevant config\r\n    &lt;/bean&gt;","title":"Autowiring only certain arguments of a constructor","body":"<p>If I read your question correctly, you are asking if you can wire in a MyDao instance that you have defined elsewhere in your context, and provide a hard-coded string value for the name parameter.  If that is correct, you would configure your class like</p>\n\n<pre><code>&lt;bean class=\"MyClass\"&gt;\n  &lt;constructor-arg value=\"Hardcoded string value for the name\" /&gt;\n  &lt;constructor-arg ref=\"myDaoInstance\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>And elsewhere in your context file</p>\n\n<pre><code>&lt;bean class=\"MyDao\" id=\"myDaoInstance&gt;\n  //relevant config\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1341498201,"creation_date":1341498201,"answer_id":11346333,"question_id":11346205,"body_markdown":"Seems like you should add @Autowired to the MyDao dao; declaration, then change your constructor to just take the name param. You will automatically be able to access MyDao","title":"Autowiring only certain arguments of a constructor","body":"<p>Seems like you should add @Autowired to the MyDao dao; declaration, then change your constructor to just take the name param. You will automatically be able to access MyDao</p>\n"},{"comments":[{"owner":{"account_id":1059597,"reputation":24002,"user_id":1061499,"accept_rate":84,"display_name":"davioooh"},"score":0,"creation_date":1341499781,"post_id":11346356,"comment_id":14942382,"body_markdown":"ok, so I have to change my contructor... or use an explicit reference in my XML definition...","body":"ok, so I have to change my contructor... or use an explicit reference in my XML definition..."},{"owner":{"account_id":56549,"reputation":8582,"user_id":169397,"accept_rate":84,"display_name":"Luciano"},"score":0,"creation_date":1341499894,"post_id":11346356,"comment_id":14942436,"body_markdown":"Yes, that would depend on the rest of your project, if it uses autowiring for most bean references, or explicit definition in the XML, to mantain consistency.","body":"Yes, that would depend on the rest of your project, if it uses autowiring for most bean references, or explicit definition in the XML, to mantain consistency."},{"owner":{"account_id":1963913,"reputation":1943,"user_id":1764648,"display_name":"Gopal S Akshintala"},"score":3,"creation_date":1471676370,"post_id":11346356,"comment_id":65452035,"body_markdown":"But isn&#39;t Field Injection not recommended? How should we go about when a client need to call this autowired constructor with few specific arguments?","body":"But isn&#39;t Field Injection not recommended? How should we go about when a client need to call this autowired constructor with few specific arguments?"},{"owner":{"account_id":5929184,"reputation":649,"user_id":4664207,"accept_rate":64,"display_name":"jones-chris"},"score":0,"creation_date":1594124685,"post_id":11346356,"comment_id":111011036,"body_markdown":"@GopalSAkshintala you could try setter injection.  In the above example, you would create a method called `setDao()` and annotate it with @Autowired.","body":"@GopalSAkshintala you could try setter injection.  In the above example, you would create a method called <code>setDao()</code> and annotate it with @Autowired."}],"tags":[],"owner":{"account_id":56549,"reputation":8582,"user_id":169397,"accept_rate":84,"display_name":"Luciano"},"comment_count":4,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1341498272,"creation_date":1341498272,"answer_id":11346356,"question_id":11346205,"body_markdown":"You cannot do that with the autowired constructor, because it affects all parameters, but you can do this:\r\n\r\n    public class MyClass{\r\n        private String name;\r\n\r\n        @Autowired\r\n        private MyDAO dao;\r\n\r\n        public MyClass(String name){\r\n            // assign only name\r\n        }\r\n\r\n        // ...\r\n    }\r\n\r\nIt is similar to having a setter for the DAO but you don&#39;t expose that public setter it in your class.","title":"Autowiring only certain arguments of a constructor","body":"<p>You cannot do that with the autowired constructor, because it affects all parameters, but you can do this:</p>\n\n<pre><code>public class MyClass{\n    private String name;\n\n    @Autowired\n    private MyDAO dao;\n\n    public MyClass(String name){\n        // assign only name\n    }\n\n    // ...\n}\n</code></pre>\n\n<p>It is similar to having a setter for the DAO but you don't expose that public setter it in your class.</p>\n"},{"tags":[],"owner":{"account_id":145939,"reputation":3382,"user_id":356083,"accept_rate":60,"display_name":"f.khantsis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672357780,"creation_date":1672357780,"answer_id":74957017,"question_id":11346205,"body_markdown":"You can do this with Java Config.\r\n\r\n```java\r\n@Bean\r\npublic MyClass myClass(MyDao dao) {\r\n  return new MyClass(&quot;tst&quot;, dao);\r\n}\r\n```","title":"Autowiring only certain arguments of a constructor","body":"<p>You can do this with Java Config.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic MyClass myClass(MyDao dao) {\n  return new MyClass(&quot;tst&quot;, dao);\n}\n</code></pre>\n"}],"owner":{"account_id":1059597,"reputation":24002,"user_id":1061499,"accept_rate":84,"display_name":"davioooh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6371,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":11346356,"answer_count":4,"score":12,"last_activity_date":1672357780,"creation_date":1341497798,"question_id":11346205,"body_markdown":"Is it possible in Spring to autowire only specific arguments of a constructor?\r\n\r\nI defined:\r\n\r\n    &lt;bean class=&quot;MyClass&quot;&gt;\r\n        &lt;constructor-arg name=&quot;name&quot; value=&quot;object name&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nWith:\r\n\r\n    public class MyClass{\r\n        private String name;\r\n    \tprivate MyDAO dao;\r\n    \t\r\n        @Autowired\r\n    \tpublic MyClass(String name, MyDao dao){\r\n    \t\t// assign...\r\n    \t}\r\n    \t\r\n    \t// ...\r\n    }\r\n\r\nNow I&#39;d like `MyDao` object to be autowired, while explicitly define `name` argument.\r\nIs it possible?\r\n\r\nDefining a bean using XML requires to manually define all arguments?\r\n","title":"Autowiring only certain arguments of a constructor","body":"<p>Is it possible in Spring to autowire only specific arguments of a constructor?</p>\n\n<p>I defined:</p>\n\n<pre><code>&lt;bean class=\"MyClass\"&gt;\n    &lt;constructor-arg name=\"name\" value=\"object name\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>With:</p>\n\n<pre><code>public class MyClass{\n    private String name;\n    private MyDAO dao;\n\n    @Autowired\n    public MyClass(String name, MyDao dao){\n        // assign...\n    }\n\n    // ...\n}\n</code></pre>\n\n<p>Now I'd like <code>MyDao</code> object to be autowired, while explicitly define <code>name</code> argument.\nIs it possible?</p>\n\n<p>Defining a bean using XML requires to manually define all arguments?</p>\n"},{"tags":["java","maven-3","pom.xml","maven-deploy-plugin","mvn-repo"],"owner":{"account_id":79822,"reputation":10179,"user_id":226081,"accept_rate":91,"display_name":"Joe J"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672357672,"creation_date":1672357672,"question_id":74957007,"body_markdown":"I&#39;m looking to use `mvn deploy` to deploy all of the same jar file build artifacts to different maven repositories. Basically, I&#39;m looking to make duplicate copies in multiple places. I&#39;m trying to do this because I&#39;m trying to migrate from one repository to another and I want to push to both places as a transitional step. (And I can&#39;t mirror the repositories as a whole.)\r\n\r\nMy (probably flawed) understanding is that I&#39;d setup multiple &quot;repositories&quot; and &quot;servers&quot; in my settings.xml. \r\n\r\n\r\nfrom settings.xml\r\n\r\n```xml\r\n        &lt;servers&gt;\r\n            &lt;server&gt;\r\n                &lt;id&gt;${env.MAVEN_SERVER_ID_1&lt;/id&gt;\r\n                &lt;username&gt;${env.MAVEN_SERVER_USERNAME_1}&lt;/username&gt;\r\n                &lt;password&gt;${env.MAVEN_SERVER_PASSWORD_1}&lt;/password&gt;\r\n            &lt;/server&gt;\r\n            &lt;server&gt;\r\n                &lt;id&gt;${env.MAVEN_SERVER_ID_2&lt;/id&gt;\r\n                &lt;username&gt;${env.MAVEN_SERVER_USERNAME_2}&lt;/username&gt;\r\n                &lt;password&gt;${env.MAVEN_SERVER_PASSWORD_2}&lt;/password&gt;\r\n            &lt;/server&gt;\r\n        &lt;/servers&gt;\r\n\r\n        &lt;profiles&gt;\r\n            &lt;profile&gt;\r\n                &lt;id&gt;my-profile&lt;/id&gt;\r\n                &lt;repositories&gt;\r\n                  &lt;repository&gt;\r\n                    &lt;id&gt;${env.MAVEN_SERVER_ID_1}&lt;/id&gt;\r\n                    &lt;name&gt;${env.MAVEN_SERVER_NAME_1}&lt;/name&gt;\r\n                    &lt;url&gt;${env.MAVEN_REPOSITORY_URL_1}&lt;/url&gt;\r\n                    &lt;layout&gt;default&lt;/layout&gt;\r\n                  &lt;/repository&gt;\r\n                  &lt;repository&gt;\r\n                    &lt;id&gt;${env.MAVEN_SERVER_ID_2}&lt;/id&gt;\r\n                    &lt;name&gt;${env.MAVEN_SERVER_NAME_2}&lt;/name&gt;\r\n                    &lt;url&gt;${env.MAVEN_REPOSITORY_URL_2}&lt;/url&gt;\r\n                    &lt;layout&gt;default&lt;/layout&gt;\r\n                  &lt;/repository&gt;\r\n                &lt;/repositories&gt;\r\n            &lt;/profile&gt;\r\n        &lt;/profiles&gt;\r\n\r\n        &lt;activeProfiles&gt;\r\n            &lt;activeProfile&gt;my-profile&lt;/activeProfile&gt;\r\n        &lt;/activeProfiles&gt;\r\n\r\n```\r\n\r\nThen, when deploying, this is run.\r\n\r\n```bash\r\nmvn --settings=/path/to/settings.xml \\\r\n   deploy \\\r\n  -DaltDeploymentRepository=&quot;${MAVEN_SERVER_ID_1}::default::${MAVEN_REPOSITORY_URL_1}&quot; \\\r\n  /path/to/project/\r\n```\r\n\r\nThis only pushes to one of the 2 repositories, but how do I change it so the deploy will push to both repositories at the same time?  This maven deploy is something that is currently automated, so I&#39;m trying to update the automation to deploy to both places. \r\n\r\nI&#39;m pretty new to maven, so maybe this is an obvious answer, but I&#39;d be very appreciative of any help. ","title":"Maven settings.xml - upload same build jar files to multiple maven repositories","body":"<p>I'm looking to use <code>mvn deploy</code> to deploy all of the same jar file build artifacts to different maven repositories. Basically, I'm looking to make duplicate copies in multiple places. I'm trying to do this because I'm trying to migrate from one repository to another and I want to push to both places as a transitional step. (And I can't mirror the repositories as a whole.)</p>\n<p>My (probably flawed) understanding is that I'd setup multiple &quot;repositories&quot; and &quot;servers&quot; in my settings.xml.</p>\n<p>from settings.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;servers&gt;\n            &lt;server&gt;\n                &lt;id&gt;${env.MAVEN_SERVER_ID_1&lt;/id&gt;\n                &lt;username&gt;${env.MAVEN_SERVER_USERNAME_1}&lt;/username&gt;\n                &lt;password&gt;${env.MAVEN_SERVER_PASSWORD_1}&lt;/password&gt;\n            &lt;/server&gt;\n            &lt;server&gt;\n                &lt;id&gt;${env.MAVEN_SERVER_ID_2&lt;/id&gt;\n                &lt;username&gt;${env.MAVEN_SERVER_USERNAME_2}&lt;/username&gt;\n                &lt;password&gt;${env.MAVEN_SERVER_PASSWORD_2}&lt;/password&gt;\n            &lt;/server&gt;\n        &lt;/servers&gt;\n\n        &lt;profiles&gt;\n            &lt;profile&gt;\n                &lt;id&gt;my-profile&lt;/id&gt;\n                &lt;repositories&gt;\n                  &lt;repository&gt;\n                    &lt;id&gt;${env.MAVEN_SERVER_ID_1}&lt;/id&gt;\n                    &lt;name&gt;${env.MAVEN_SERVER_NAME_1}&lt;/name&gt;\n                    &lt;url&gt;${env.MAVEN_REPOSITORY_URL_1}&lt;/url&gt;\n                    &lt;layout&gt;default&lt;/layout&gt;\n                  &lt;/repository&gt;\n                  &lt;repository&gt;\n                    &lt;id&gt;${env.MAVEN_SERVER_ID_2}&lt;/id&gt;\n                    &lt;name&gt;${env.MAVEN_SERVER_NAME_2}&lt;/name&gt;\n                    &lt;url&gt;${env.MAVEN_REPOSITORY_URL_2}&lt;/url&gt;\n                    &lt;layout&gt;default&lt;/layout&gt;\n                  &lt;/repository&gt;\n                &lt;/repositories&gt;\n            &lt;/profile&gt;\n        &lt;/profiles&gt;\n\n        &lt;activeProfiles&gt;\n            &lt;activeProfile&gt;my-profile&lt;/activeProfile&gt;\n        &lt;/activeProfiles&gt;\n\n</code></pre>\n<p>Then, when deploying, this is run.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>mvn --settings=/path/to/settings.xml \\\n   deploy \\\n  -DaltDeploymentRepository=&quot;${MAVEN_SERVER_ID_1}::default::${MAVEN_REPOSITORY_URL_1}&quot; \\\n  /path/to/project/\n</code></pre>\n<p>This only pushes to one of the 2 repositories, but how do I change it so the deploy will push to both repositories at the same time?  This maven deploy is something that is currently automated, so I'm trying to update the automation to deploy to both places.</p>\n<p>I'm pretty new to maven, so maybe this is an obvious answer, but I'd be very appreciative of any help.</p>\n"},{"tags":["java","url","file","path"],"comments":[{"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"score":3,"creation_date":1465780727,"post_id":204784,"comment_id":63028807,"body_markdown":"For Java 7 and later, see @VitaliiFedorenko&#39;s answer.","body":"For Java 7 and later, see @VitaliiFedorenko&#39;s answer."},{"owner":{"account_id":1750515,"reputation":6073,"user_id":1599699,"accept_rate":80,"display_name":"Andrew"},"score":3,"creation_date":1499953440,"post_id":204784,"comment_id":77137515,"body_markdown":"**tl;dr answer:** Paths.get(startPath).relativize(Paths.get(endPath)).toString() (which, by the way, seems to be working just fine with e.g. &quot;../&quot; for me in Java 8, so...)","body":"<b>tl;dr answer:</b> Paths.get(startPath).relativize(Paths.get(endPath)).toString&zwnj;&#8203;() (which, by the way, seems to be working just fine with e.g. &quot;../&quot; for me in Java 8, so...)"}],"answers":[{"comments":[{"owner":{"account_id":1921,"reputation":185682,"user_id":2648,"accept_rate":52,"display_name":"D&#243;nal"},"score":3,"creation_date":1224081618,"post_id":204847,"comment_id":78792,"body_markdown":"String s3 = &quot;.&quot; + s1.substring(s2.length());\n\nis slightly more readable IMO","body":"String s3 = &quot;.&quot; + s1.substring(s2.length());  is slightly more readable IMO"}],"tags":[],"owner":{"account_id":11010,"reputation":481,"user_id":21059,"display_name":"Keeg"},"comment_count":1,"down_vote_count":2,"up_vote_count":12,"is_accepted":false,"score":10,"last_activity_date":1224079769,"creation_date":1224079769,"answer_id":204847,"question_id":204784,"body_markdown":"If you know the second string is part of the first:\r\n\r\n    String s1 = &quot;/var/data/stuff/xyz.dat&quot;;\r\n    String s2 = &quot;/var/data&quot;;\r\n    String s3 = s1.substring(s2.length());\r\n\r\nor if you really want the period at the beginning as in your example:\r\n\r\n    String s3 = &quot;.&quot;.concat(s1.substring(s2.length()));\r\n\r\n","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>If you know the second string is part of the first:</p>\n\n<pre><code>String s1 = \"/var/data/stuff/xyz.dat\";\nString s2 = \"/var/data\";\nString s3 = s1.substring(s2.length());\n</code></pre>\n\n<p>or if you really want the period at the beginning as in your example:</p>\n\n<pre><code>String s3 = \".\".concat(s1.substring(s2.length()));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":134685,"reputation":14507,"user_id":510036,"accept_rate":96,"display_name":"Qix - MONICA WAS MISTREATED"},"score":2,"creation_date":1355972999,"post_id":205495,"comment_id":19264345,"body_markdown":"This answer is a hack at best. What about windows?","body":"This answer is a hack at best. What about windows?"}],"tags":[],"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"comment_count":1,"down_vote_count":5,"up_vote_count":3,"is_accepted":false,"score":-2,"last_activity_date":1224089448,"creation_date":1224089448,"answer_id":205495,"question_id":204784,"body_markdown":"Psuedo-code:\r\n\r\n 1. Split the strings by the path seperator (&quot;/&quot;)\r\n 2. Find the greatest common path by iterating thru the result of the split string (so you&#39;d end up with &quot;/var/data&quot; or &quot;/a&quot; in your two examples)\r\n 3. `return &quot;.&quot; + whicheverPathIsLonger.substring(commonPath.length);`\r\n\r\n","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>Psuedo-code:</p>\n\n<ol>\n<li>Split the strings by the path seperator (\"/\")</li>\n<li>Find the greatest common path by iterating thru the result of the split string (so you'd end up with \"/var/data\" or \"/a\" in your two examples)</li>\n<li><code>return \".\" + whicheverPathIsLonger.substring(commonPath.length);</code></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":13853,"reputation":5322,"user_id":28038,"accept_rate":86,"display_name":"Steve Armstrong"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1276681930,"creation_date":1224090805,"answer_id":205592,"question_id":204784,"body_markdown":"I&#39;m assuming you have **fromPath** (an absolute path for a folder), and **toPath** (an absolute path for a folder/file), and your&#39;re looking for a path that with represent the file/folder in **toPath** as a relative path from **fromPath** (your current working directory is **fromPath**) then something like this should work:\r\n\r\n\r\n    public static String getRelativePath(String fromPath, String toPath) {\r\n    \r\n      // This weirdness is because a separator of &#39;/&#39; messes with String.split()\r\n      String regexCharacter = File.separator;\r\n      if (File.separatorChar == &#39;\\\\&#39;) {\r\n        regexCharacter = &quot;\\\\\\\\&quot;;\r\n      }\r\n    \r\n      String[] fromSplit = fromPath.split(regexCharacter);\r\n      String[] toSplit = toPath.split(regexCharacter);\r\n    \r\n      // Find the common path\r\n      int common = 0;\r\n      while (fromSplit[common].equals(toSplit[common])) {\r\n        common++;\r\n      }\r\n    \r\n      StringBuffer result = new StringBuffer(&quot;.&quot;);\r\n    \r\n      // Work your way up the FROM path to common ground\r\n      for (int i = common; i &lt; fromSplit.length; i++) {\r\n        result.append(File.separatorChar).append(&quot;..&quot;);\r\n      }\r\n    \r\n      // Work your way down the TO path\r\n      for (int i = common; i &lt; toSplit.length; i++) {\r\n        result.append(File.separatorChar).append(toSplit[i]);\r\n      }\r\n    \r\n      return result.toString();\r\n    }\r\n\r\n","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>I'm assuming you have <strong>fromPath</strong> (an absolute path for a folder), and <strong>toPath</strong> (an absolute path for a folder/file), and your're looking for a path that with represent the file/folder in <strong>toPath</strong> as a relative path from <strong>fromPath</strong> (your current working directory is <strong>fromPath</strong>) then something like this should work:</p>\n\n<pre><code>public static String getRelativePath(String fromPath, String toPath) {\n\n  // This weirdness is because a separator of '/' messes with String.split()\n  String regexCharacter = File.separator;\n  if (File.separatorChar == '\\\\') {\n    regexCharacter = \"\\\\\\\\\";\n  }\n\n  String[] fromSplit = fromPath.split(regexCharacter);\n  String[] toSplit = toPath.split(regexCharacter);\n\n  // Find the common path\n  int common = 0;\n  while (fromSplit[common].equals(toSplit[common])) {\n    common++;\n  }\n\n  StringBuffer result = new StringBuffer(\".\");\n\n  // Work your way up the FROM path to common ground\n  for (int i = common; i &lt; fromSplit.length; i++) {\n    result.append(File.separatorChar).append(\"..\");\n  }\n\n  // Work your way down the TO path\n  for (int i = common; i &lt; toSplit.length; i++) {\n    result.append(File.separatorChar).append(toSplit[i]);\n  }\n\n  return result.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":46335,"reputation":8635,"user_id":136834,"accept_rate":76,"display_name":"Alex Ivasyuv"},"score":2,"creation_date":1269902186,"post_id":205621,"comment_id":2542428,"body_markdown":"Instead of File.pathSeparator should be File.separator.\npathSeparator should use only for split (regex), as for &quot;////&quot; regex (win path regex), result path will be incorrect.","body":"Instead of File.pathSeparator should be File.separator. pathSeparator should use only for split (regex), as for &quot;////&quot; regex (win path regex), result path will be incorrect."}],"tags":[],"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1224091286,"creation_date":1224091286,"answer_id":205621,"question_id":204784,"body_markdown":"Actually my other answer didn&#39;t work if the target path wasn&#39;t a child of the base path.\r\n\r\nThis should work.\r\n\r\n    public class RelativePathFinder {\r\n    \r\n    \tpublic static String getRelativePath(String targetPath, String basePath, \r\n           String pathSeparator) {\r\n\r\n    \t\t// find common path\r\n    \t\tString[] target = targetPath.split(pathSeparator);\r\n    \t\tString[] base = basePath.split(pathSeparator);\r\n    \r\n    \t\tString common = &quot;&quot;;\r\n    \t\tint commonIndex = 0;\r\n    \t\tfor (int i = 0; i &lt; target.length &amp;&amp; i &lt; base.length; i++) {\r\n    \r\n    \t\t\tif (target[i].equals(base[i])) {\r\n    \t\t\t\tcommon += target[i] + pathSeparator;\r\n    \t\t\t\tcommonIndex++;\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n\r\n    \t\tString relative = &quot;&quot;;\r\n    \t\t// is the target a child directory of the base directory?\r\n    \t\t// i.e., target = /a/b/c/d, base = /a/b/\r\n    \t\tif (commonIndex == base.length) {\r\n    \t\t\trelative = &quot;.&quot; + pathSeparator + targetPath.substring(common.length());\r\n    \t\t}\r\n    \t\telse {\r\n    \t\t\t// determine how many directories we have to backtrack\r\n    \t\t\tfor (int i = 1; i &lt;= commonIndex; i++) {\r\n    \t\t\t\trelative += &quot;..&quot; + pathSeparator;\r\n    \t\t\t}\r\n    \t\t\trelative += targetPath.substring(common.length());\r\n    \t\t}\r\n    \r\n    \t\treturn relative;\r\n    \t}\r\n    \r\n    \tpublic static String getRelativePath(String targetPath, String basePath) {\r\n    \t\treturn getRelativePath(targetPath, basePath, File.pathSeparator);\r\n    \t}\r\n    }\r\n    \r\n\r\n\r\n----------\r\n\r\n\r\n    public class RelativePathFinderTest extends TestCase {\r\n    \r\n    \tpublic void testGetRelativePath() {\r\n    \t\tassertEquals(&quot;./stuff/xyz.dat&quot;, RelativePathFinder.getRelativePath(\r\n    \t\t\t\t&quot;/var/data/stuff/xyz.dat&quot;, &quot;/var/data/&quot;, &quot;/&quot;));\r\n    \t\tassertEquals(&quot;../../b/c&quot;, RelativePathFinder.getRelativePath(&quot;/a/b/c&quot;,\r\n    \t\t\t\t&quot;/a/x/y/&quot;, &quot;/&quot;));\r\n    \t}\r\n    \r\n    }\r\n","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>Actually my other answer didn't work if the target path wasn't a child of the base path.</p>\n\n<p>This should work.</p>\n\n<pre><code>public class RelativePathFinder {\n\n    public static String getRelativePath(String targetPath, String basePath, \n       String pathSeparator) {\n\n        // find common path\n        String[] target = targetPath.split(pathSeparator);\n        String[] base = basePath.split(pathSeparator);\n\n        String common = \"\";\n        int commonIndex = 0;\n        for (int i = 0; i &lt; target.length &amp;&amp; i &lt; base.length; i++) {\n\n            if (target[i].equals(base[i])) {\n                common += target[i] + pathSeparator;\n                commonIndex++;\n            }\n        }\n\n\n        String relative = \"\";\n        // is the target a child directory of the base directory?\n        // i.e., target = /a/b/c/d, base = /a/b/\n        if (commonIndex == base.length) {\n            relative = \".\" + pathSeparator + targetPath.substring(common.length());\n        }\n        else {\n            // determine how many directories we have to backtrack\n            for (int i = 1; i &lt;= commonIndex; i++) {\n                relative += \"..\" + pathSeparator;\n            }\n            relative += targetPath.substring(common.length());\n        }\n\n        return relative;\n    }\n\n    public static String getRelativePath(String targetPath, String basePath) {\n        return getRelativePath(targetPath, basePath, File.pathSeparator);\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>public class RelativePathFinderTest extends TestCase {\n\n    public void testGetRelativePath() {\n        assertEquals(\"./stuff/xyz.dat\", RelativePathFinder.getRelativePath(\n                \"/var/data/stuff/xyz.dat\", \"/var/data/\", \"/\"));\n        assertEquals(\"../../b/c\", RelativePathFinder.getRelativePath(\"/a/b/c\",\n                \"/a/x/y/\", \"/\"));\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":17822,"reputation":39726,"user_id":40310,"accept_rate":62,"display_name":"Dave Ray"},"score":19,"creation_date":1240332337,"post_id":205655,"comment_id":584593,"body_markdown":"See Peter Mueller&#39;s answer. relativize() appears pretty broken for all but the simplest cases.","body":"See Peter Mueller&#39;s answer. relativize() appears pretty broken for all but the simplest cases."},{"owner":{"account_id":111693,"reputation":7604,"user_id":294918,"accept_rate":83,"display_name":"Aurelien Ribon"},"score":11,"creation_date":1299880447,"post_id":205655,"comment_id":5948215,"body_markdown":"Yep, it only works if the base path is a parent of the first path. If you need some hierarchical backward like &quot;../../relativepath&quot;, it won&#39;t work. I found a solution: http://mrpmorris.blogspot.com/2007/05/convert-absolute-path-to-relative-path.html","body":"Yep, it only works if the base path is a parent of the first path. If you need some hierarchical backward like &quot;../../relativepath&quot;, it won&#39;t work. I found a solution: <a href=\"http://mrpmorris.blogspot.com/2007/05/convert-absolute-path-to-relative-path.html\" rel=\"nofollow noreferrer\">mrpmorris.blogspot.com/2007/05/&hellip;</a>"},{"owner":{"account_id":1192089,"reputation":4315,"user_id":1329340,"accept_rate":74,"display_name":"Campa"},"score":4,"creation_date":1455270007,"post_id":205655,"comment_id":58424488,"body_markdown":"As @VitaliiFedorenko wrote: use `java.nio.file.Path#relativize(Path)`, it just works with parent double-dots and all.","body":"As @VitaliiFedorenko wrote: use <code>java.nio.file.Path#relativize(Path)</code>, it just works with parent double-dots and all."},{"owner":{"account_id":1022611,"reputation":1419,"user_id":1032586,"display_name":"Igor"},"score":0,"creation_date":1455384915,"post_id":205655,"comment_id":58470691,"body_markdown":"Consider using `toPath()` instead of `toURI()`. It&#39;s perfectly able to create stuff like `&quot;..\\..&quot;`. But be aware of `java.lang.IllegalArgumentException: &#39;other&#39; has different root` exception when asking for relative path from `&quot;C:\\temp&quot;` to `&quot;D:\\temp&quot;`.","body":"Consider using <code>toPath()</code> instead of <code>toURI()</code>. It&#39;s perfectly able to create stuff like <code>&quot;..\\..&quot;</code>. But be aware of <code>java.lang.IllegalArgumentException: &#39;other&#39; has different root</code> exception when asking for relative path from <code>&quot;C:\\temp&quot;</code> to <code>&quot;D:\\temp&quot;</code>."},{"owner":{"account_id":1263496,"reputation":1555,"user_id":1221286,"accept_rate":100,"display_name":"unbekant"},"score":0,"creation_date":1456257857,"post_id":205655,"comment_id":58860567,"body_markdown":"This does not work as expected, it returns data/stuff/xyz.dat in my test case.","body":"This does not work as expected, it returns data/stuff/xyz.dat in my test case."}],"tags":[],"owner":{"account_id":12846,"reputation":15674,"user_id":25498,"accept_rate":64,"display_name":"Adam Crume"},"comment_count":5,"down_vote_count":10,"up_vote_count":343,"is_accepted":true,"score":333,"last_activity_date":1672357619,"creation_date":1224091920,"answer_id":205655,"question_id":204784,"body_markdown":"It&#39;s a little roundabout, but why not use URI?  It has a relativize method which does all the necessary checks for you.\r\n\r\n    String path = &quot;/var/data/stuff/xyz.dat&quot;;\r\n    String base = &quot;/var/data&quot;;\r\n    String relative = new File(base).toURI().relativize(new File(path).toURI()).getPath();\r\n    // relative == &quot;stuff/xyz.dat&quot;\r\n\r\nPlease note that for file path there&#39;s [`java.nio.file.Path#relativize`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Path.html#relativize(java.nio.file.Path)) since Java 1.7, as pointed out by [@Jirka Meluzin][1] in [the other answer][2].\r\n\r\n[1]: https://stackoverflow.com/users/1113396/jirka-meluzin\r\n[2]: https://stackoverflow.com/a/25743823/537554","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>It's a little roundabout, but why not use URI?  It has a relativize method which does all the necessary checks for you.</p>\n<pre><code>String path = &quot;/var/data/stuff/xyz.dat&quot;;\nString base = &quot;/var/data&quot;;\nString relative = new File(base).toURI().relativize(new File(path).toURI()).getPath();\n// relative == &quot;stuff/xyz.dat&quot;\n</code></pre>\n<p>Please note that for file path there's <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Path.html#relativize(java.nio.file.Path)\" rel=\"nofollow noreferrer\"><code>java.nio.file.Path#relativize</code></a> since Java 1.7, as pointed out by <a href=\"https://stackoverflow.com/users/1113396/jirka-meluzin\">@Jirka Meluzin</a> in <a href=\"https://stackoverflow.com/a/25743823/537554\">the other answer</a>.</p>\n"},{"comments":[{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":6,"creation_date":1250542041,"post_id":705963,"comment_id":1120584,"body_markdown":"Nasty. There is a workaround for this, apparently: http://stackoverflow.com/questions/204784/how-to-construct-a-relative-path-in-java-from-two-absolute-paths-or-urls/1290311#1290311","body":"Nasty. There is a workaround for this, apparently: <a href=\"http://stackoverflow.com/questions/204784/how-to-construct-a-relative-path-in-java-from-two-absolute-paths-or-urls/1290311#1290311\" title=\"how to construct a relative path in java from two absolute paths or urls\">stackoverflow.com/questions/204784/&hellip;</a>"},{"owner":{"account_id":1750515,"reputation":6073,"user_id":1599699,"accept_rate":80,"display_name":"Andrew"},"score":0,"creation_date":1499953568,"post_id":705963,"comment_id":77137617,"body_markdown":"Paths.get(startPath).relativize(Paths.get(endPath)).toString‌​() seems to be working just fine with e.g. &quot;../&quot; for me in Java 8.","body":"Paths.get(startPath).relativize(Paths.get(endPath)).toString&zwnj;&#8203;‌​() seems to be working just fine with e.g. &quot;../&quot; for me in Java 8."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1553211313,"post_id":705963,"comment_id":97310731,"body_markdown":"@skaffman are you sure? This answer references bug JDK-6226081, but `URIUtils.resolve()` mentions JDK-4708535. And from the source code, I don&#39;t see anything related to backtracking (i.e. `..` segments). Did you confuse the two bugs?","body":"@skaffman are you sure? This answer references bug JDK-6226081, but <code>URIUtils.resolve()</code> mentions JDK-4708535. And from the source code, I don&#39;t see anything related to backtracking (i.e. <code>..</code> segments). Did you confuse the two bugs?"},{"owner":{"account_id":24257,"reputation":615,"user_id":61588,"display_name":"Christian K."},"score":0,"creation_date":1553443484,"post_id":705963,"comment_id":97377429,"body_markdown":"JDK-6920138 is marked as a duplicate of JDK-4708535.","body":"JDK-6920138 is marked as a duplicate of JDK-4708535."}],"tags":[],"owner":{"account_id":24257,"reputation":615,"user_id":61588,"display_name":"Christian K."},"comment_count":4,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1380543106,"creation_date":1238598165,"answer_id":705963,"question_id":204784,"body_markdown":"When using java.net.URI.relativize you should be aware of Java bug:\r\n[JDK-6226081 (URI should be able to relativize paths with partial roots)][1]\r\n\r\n&gt; At the moment, the `relativize()` method of `URI` will only  relativize URIs when one is a prefix of the other.\r\n\r\nWhich essentially means `java.net.URI.relativize` will not create &quot;..&quot;&#39;s for you.\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=6226081","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>When using java.net.URI.relativize you should be aware of Java bug:\n<a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6226081\" rel=\"nofollow noreferrer\">JDK-6226081 (URI should be able to relativize paths with partial roots)</a></p>\n<blockquote>\n<p>At the moment, the <code>relativize()</code> method of <code>URI</code> will only  relativize URIs when one is a prefix of the other.</p>\n</blockquote>\n<p>Which essentially means <code>java.net.URI.relativize</code> will not create &quot;..&quot;'s for you.</p>\n"},{"comments":[{"owner":{"account_id":103559,"reputation":73828,"user_id":277304,"accept_rate":66,"display_name":"leonbloy"},"score":3,"creation_date":1299795949,"post_id":1269907,"comment_id":5932766,"body_markdown":"+1 works for me. Only minor correction: instead of `&quot;/&quot;.length()` you should use separator.length","body":"+1 works for me. Only minor correction: instead of <code>&quot;&#47;&quot;.length()</code> you should use separator.length"}],"tags":[],"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1402867296,"creation_date":1250134681,"answer_id":1269907,"question_id":204784,"body_markdown":"My version is loosely based on [Matt](https://stackoverflow.com/a/205621/14731) and [Steve](https://stackoverflow.com/a/205592/14731)&#39;s versions:\r\n\r\n    /**\r\n     * Returns the path of one File relative to another.\r\n     *\r\n     * @param target the target directory\r\n     * @param base the base directory\r\n     * @return target&#39;s path relative to the base directory\r\n     * @throws IOException if an error occurs while resolving the files&#39; canonical names\r\n     */\r\n     public static File getRelativeFile(File target, File base) throws IOException\r\n     {\r\n       String[] baseComponents = base.getCanonicalPath().split(Pattern.quote(File.separator));\r\n       String[] targetComponents = target.getCanonicalPath().split(Pattern.quote(File.separator));\r\n\r\n       // skip common components\r\n       int index = 0;\r\n       for (; index &lt; targetComponents.length &amp;&amp; index &lt; baseComponents.length; ++index)\r\n       {\r\n         if (!targetComponents[index].equals(baseComponents[index]))\r\n           break;\r\n       }\r\n\r\n       StringBuilder result = new StringBuilder();\r\n       if (index != baseComponents.length)\r\n       {\r\n         // backtrack to base directory\r\n         for (int i = index; i &lt; baseComponents.length; ++i)\r\n           result.append(&quot;..&quot; + File.separator);\r\n       }\r\n       for (; index &lt; targetComponents.length; ++index)\r\n         result.append(targetComponents[index] + File.separator);\r\n       if (!target.getPath().endsWith(&quot;/&quot;) &amp;&amp; !target.getPath().endsWith(&quot;\\\\&quot;))\r\n       {\r\n         // remove final path separator\r\n         result.delete(result.length() - File.separator.length(), result.length());\r\n       }\r\n       return new File(result.toString());\r\n     }\r\n","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>My version is loosely based on <a href=\"https://stackoverflow.com/a/205621/14731\">Matt</a> and <a href=\"https://stackoverflow.com/a/205592/14731\">Steve</a>'s versions:</p>\n\n<pre><code>/**\n * Returns the path of one File relative to another.\n *\n * @param target the target directory\n * @param base the base directory\n * @return target's path relative to the base directory\n * @throws IOException if an error occurs while resolving the files' canonical names\n */\n public static File getRelativeFile(File target, File base) throws IOException\n {\n   String[] baseComponents = base.getCanonicalPath().split(Pattern.quote(File.separator));\n   String[] targetComponents = target.getCanonicalPath().split(Pattern.quote(File.separator));\n\n   // skip common components\n   int index = 0;\n   for (; index &lt; targetComponents.length &amp;&amp; index &lt; baseComponents.length; ++index)\n   {\n     if (!targetComponents[index].equals(baseComponents[index]))\n       break;\n   }\n\n   StringBuilder result = new StringBuilder();\n   if (index != baseComponents.length)\n   {\n     // backtrack to base directory\n     for (int i = index; i &lt; baseComponents.length; ++i)\n       result.append(\"..\" + File.separator);\n   }\n   for (; index &lt; targetComponents.length; ++index)\n     result.append(targetComponents[index] + File.separator);\n   if (!target.getPath().endsWith(\"/\") &amp;&amp; !target.getPath().endsWith(\"\\\\\"))\n   {\n     // remove final path separator\n     result.delete(result.length() - File.separator.length(), result.length());\n   }\n   return new File(result.toString());\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":52176,"reputation":49,"user_id":155876,"display_name":"Matuszek"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1250541234,"creation_date":1250522702,"answer_id":1288584,"question_id":204784,"body_markdown":"Matt B&#39;s solution gets the number of directories to backtrack wrong -- it should be the length of the base path minus the number of common path elements, minus one (for the last path element, which is either a filename or a trailing `&quot;&quot;` generated by `split`). It happens to work with `/a/b/c/` and `/a/x/y/`, but replace the arguments with `/m/n/o/a/b/c/` and `/m/n/o/a/x/y/` and you will see the problem. \r\n\r\nAlso, it needs an `else break` inside the first for loop, or it will mishandle paths that happen to have matching directory names, such as `/a/b/c/d/` and `/x/y/c/z` -- the `c` is in the same slot in both arrays, but is not an actual match. \r\n\r\nAll these solutions lack the ability to handle paths that cannot be relativized to one another because they have incompatible roots, such as `C:\\foo\\bar` and `D:\\baz\\quux`. Probably only an issue on Windows, but worth noting.\r\n\r\nI spent far longer on this than I intended, but that&#39;s okay. I actually needed this for work, so thank you to everyone who has chimed in, and I&#39;m sure there will be corrections to this version too!\r\n\r\n    public static String getRelativePath(String targetPath, String basePath, \r\n            String pathSeparator) {\r\n        \r\n        //  We need the -1 argument to split to make sure we get a trailing \r\n        //  &quot;&quot; token if the base ends in the path separator and is therefore\r\n        //  a directory. We require directory paths to end in the path\r\n        //  separator -- otherwise they are indistinguishable from files.\r\n        String[] base = basePath.split(Pattern.quote(pathSeparator), -1);\r\n        String[] target = targetPath.split(Pattern.quote(pathSeparator), 0);\r\n        \r\n        //  First get all the common elements. Store them as a string,\r\n        //  and also count how many of them there are. \r\n        String common = &quot;&quot;;\r\n        int commonIndex = 0;\r\n        for (int i = 0; i &lt; target.length &amp;&amp; i &lt; base.length; i++) {\r\n            if (target[i].equals(base[i])) {\r\n                common += target[i] + pathSeparator;\r\n                commonIndex++;\r\n            }\r\n            else break;\r\n        }\r\n        \r\n        if (commonIndex == 0)\r\n        {\r\n            //  Whoops -- not even a single common path element. This most\r\n            //  likely indicates differing drive letters, like C: and D:. \r\n            //  These paths cannot be relativized. Return the target path.\r\n            return targetPath;\r\n            //  This should never happen when all absolute paths\r\n            //  begin with / as in *nix. \r\n        }\r\n\r\n        String relative = &quot;&quot;;\r\n        if (base.length == commonIndex) {\r\n            //  Comment this out if you prefer that a relative path not start with ./\r\n            //relative = &quot;.&quot; + pathSeparator;\r\n        }\r\n        else {\r\n            int numDirsUp = base.length - commonIndex - 1;\r\n            //  The number of directories we have to backtrack is the length of \r\n            //  the base path MINUS the number of common path elements, minus\r\n            //  one because the last element in the path isn&#39;t a directory.\r\n            for (int i = 1; i &lt;= (numDirsUp); i++) {\r\n                relative += &quot;..&quot; + pathSeparator;\r\n            }\r\n        }\r\n        relative += targetPath.substring(common.length());\r\n\r\n        return relative;\r\n    }\r\n    \r\nAnd here are tests to cover several cases:\r\n\r\n    public void testGetRelativePathsUnixy() \r\n    {        \r\n        assertEquals(&quot;stuff/xyz.dat&quot;, FileUtils.getRelativePath(\r\n                &quot;/var/data/stuff/xyz.dat&quot;, &quot;/var/data/&quot;, &quot;/&quot;));\r\n        assertEquals(&quot;../../b/c&quot;, FileUtils.getRelativePath(\r\n                &quot;/a/b/c&quot;, &quot;/a/x/y/&quot;, &quot;/&quot;));\r\n        assertEquals(&quot;../../b/c&quot;, FileUtils.getRelativePath(\r\n                &quot;/m/n/o/a/b/c&quot;, &quot;/m/n/o/a/x/y/&quot;, &quot;/&quot;));\r\n    }\r\n    \r\n    public void testGetRelativePathFileToFile() \r\n    {\r\n        String target = &quot;C:\\\\Windows\\\\Boot\\\\Fonts\\\\chs_boot.ttf&quot;;\r\n        String base = &quot;C:\\\\Windows\\\\Speech\\\\Common\\\\sapisvr.exe&quot;;\r\n        \r\n        String relPath = FileUtils.getRelativePath(target, base, &quot;\\\\&quot;);\r\n        assertEquals(&quot;..\\\\..\\\\..\\\\Boot\\\\Fonts\\\\chs_boot.ttf&quot;, relPath);\r\n    }\r\n\r\n    public void testGetRelativePathDirectoryToFile() \r\n    {\r\n        String target = &quot;C:\\\\Windows\\\\Boot\\\\Fonts\\\\chs_boot.ttf&quot;;\r\n        String base = &quot;C:\\\\Windows\\\\Speech\\\\Common&quot;;\r\n        \r\n        String relPath = FileUtils.getRelativePath(target, base, &quot;\\\\&quot;);\r\n        assertEquals(&quot;..\\\\..\\\\Boot\\\\Fonts\\\\chs_boot.ttf&quot;, relPath);\r\n    }\r\n\r\n    public void testGetRelativePathDifferentDriveLetters() \r\n    {\r\n        String target = &quot;D:\\\\sources\\\\recovery\\\\RecEnv.exe&quot;;\r\n        String base   = &quot;C:\\\\Java\\\\workspace\\\\AcceptanceTests\\\\Standard test data\\\\geo\\\\&quot;;\r\n        \r\n        //  Should just return the target path because of the incompatible roots.\r\n        String relPath = FileUtils.getRelativePath(target, base, &quot;\\\\&quot;);\r\n        assertEquals(target, relPath);\r\n    }\r\n","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>Matt B's solution gets the number of directories to backtrack wrong -- it should be the length of the base path minus the number of common path elements, minus one (for the last path element, which is either a filename or a trailing <code>\"\"</code> generated by <code>split</code>). It happens to work with <code>/a/b/c/</code> and <code>/a/x/y/</code>, but replace the arguments with <code>/m/n/o/a/b/c/</code> and <code>/m/n/o/a/x/y/</code> and you will see the problem. </p>\n\n<p>Also, it needs an <code>else break</code> inside the first for loop, or it will mishandle paths that happen to have matching directory names, such as <code>/a/b/c/d/</code> and <code>/x/y/c/z</code> -- the <code>c</code> is in the same slot in both arrays, but is not an actual match. </p>\n\n<p>All these solutions lack the ability to handle paths that cannot be relativized to one another because they have incompatible roots, such as <code>C:\\foo\\bar</code> and <code>D:\\baz\\quux</code>. Probably only an issue on Windows, but worth noting.</p>\n\n<p>I spent far longer on this than I intended, but that's okay. I actually needed this for work, so thank you to everyone who has chimed in, and I'm sure there will be corrections to this version too!</p>\n\n<pre><code>public static String getRelativePath(String targetPath, String basePath, \n        String pathSeparator) {\n\n    //  We need the -1 argument to split to make sure we get a trailing \n    //  \"\" token if the base ends in the path separator and is therefore\n    //  a directory. We require directory paths to end in the path\n    //  separator -- otherwise they are indistinguishable from files.\n    String[] base = basePath.split(Pattern.quote(pathSeparator), -1);\n    String[] target = targetPath.split(Pattern.quote(pathSeparator), 0);\n\n    //  First get all the common elements. Store them as a string,\n    //  and also count how many of them there are. \n    String common = \"\";\n    int commonIndex = 0;\n    for (int i = 0; i &lt; target.length &amp;&amp; i &lt; base.length; i++) {\n        if (target[i].equals(base[i])) {\n            common += target[i] + pathSeparator;\n            commonIndex++;\n        }\n        else break;\n    }\n\n    if (commonIndex == 0)\n    {\n        //  Whoops -- not even a single common path element. This most\n        //  likely indicates differing drive letters, like C: and D:. \n        //  These paths cannot be relativized. Return the target path.\n        return targetPath;\n        //  This should never happen when all absolute paths\n        //  begin with / as in *nix. \n    }\n\n    String relative = \"\";\n    if (base.length == commonIndex) {\n        //  Comment this out if you prefer that a relative path not start with ./\n        //relative = \".\" + pathSeparator;\n    }\n    else {\n        int numDirsUp = base.length - commonIndex - 1;\n        //  The number of directories we have to backtrack is the length of \n        //  the base path MINUS the number of common path elements, minus\n        //  one because the last element in the path isn't a directory.\n        for (int i = 1; i &lt;= (numDirsUp); i++) {\n            relative += \"..\" + pathSeparator;\n        }\n    }\n    relative += targetPath.substring(common.length());\n\n    return relative;\n}\n</code></pre>\n\n<p>And here are tests to cover several cases:</p>\n\n<pre><code>public void testGetRelativePathsUnixy() \n{        \n    assertEquals(\"stuff/xyz.dat\", FileUtils.getRelativePath(\n            \"/var/data/stuff/xyz.dat\", \"/var/data/\", \"/\"));\n    assertEquals(\"../../b/c\", FileUtils.getRelativePath(\n            \"/a/b/c\", \"/a/x/y/\", \"/\"));\n    assertEquals(\"../../b/c\", FileUtils.getRelativePath(\n            \"/m/n/o/a/b/c\", \"/m/n/o/a/x/y/\", \"/\"));\n}\n\npublic void testGetRelativePathFileToFile() \n{\n    String target = \"C:\\\\Windows\\\\Boot\\\\Fonts\\\\chs_boot.ttf\";\n    String base = \"C:\\\\Windows\\\\Speech\\\\Common\\\\sapisvr.exe\";\n\n    String relPath = FileUtils.getRelativePath(target, base, \"\\\\\");\n    assertEquals(\"..\\\\..\\\\..\\\\Boot\\\\Fonts\\\\chs_boot.ttf\", relPath);\n}\n\npublic void testGetRelativePathDirectoryToFile() \n{\n    String target = \"C:\\\\Windows\\\\Boot\\\\Fonts\\\\chs_boot.ttf\";\n    String base = \"C:\\\\Windows\\\\Speech\\\\Common\";\n\n    String relPath = FileUtils.getRelativePath(target, base, \"\\\\\");\n    assertEquals(\"..\\\\..\\\\Boot\\\\Fonts\\\\chs_boot.ttf\", relPath);\n}\n\npublic void testGetRelativePathDifferentDriveLetters() \n{\n    String target = \"D:\\\\sources\\\\recovery\\\\RecEnv.exe\";\n    String base   = \"C:\\\\Java\\\\workspace\\\\AcceptanceTests\\\\Standard test data\\\\geo\\\\\";\n\n    //  Should just return the target path because of the incompatible roots.\n    String relPath = FileUtils.getRelativePath(target, base, \"\\\\\");\n    assertEquals(target, relPath);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":45053,"reputation":3163,"user_id":132565,"accept_rate":67,"display_name":"Chase"},"score":0,"creation_date":1509384811,"post_id":1290311,"comment_id":80988996,"body_markdown":"Doesn&#39;t the resolve method generate an absolute URI from a base and a relative path? How would this method help?","body":"Doesn&#39;t the resolve method generate an absolute URI from a base and a relative path? How would this method help?"}],"tags":[],"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1553453904,"creation_date":1250541847,"answer_id":1290311,"question_id":204784,"body_markdown":"The bug referred to in [another answer](https://stackoverflow.com/a/705963/) is addressed by [URIUtils][1] in [Apache HttpComponents][2]\r\n\r\n    public static URI resolve(URI baseURI,\r\n                              String reference)\r\n    \r\n\r\n&gt; Resolves a URI reference against a\r\n&gt; base URI. Work-around for bug in\r\n&gt; java.net.URI ()\r\n\r\n\r\n  [1]: https://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URIUtils.html#resolve%28java.net.URI,%20java.lang.String%29\r\n  [2]: https://hc.apache.org/httpcomponents-client-ga/httpclient/project-info.html\r\n","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>The bug referred to in <a href=\"https://stackoverflow.com/a/705963/\">another answer</a> is addressed by <a href=\"https://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URIUtils.html#resolve%28java.net.URI,%20java.lang.String%29\" rel=\"nofollow noreferrer\">URIUtils</a> in <a href=\"https://hc.apache.org/httpcomponents-client-ga/httpclient/project-info.html\" rel=\"nofollow noreferrer\">Apache HttpComponents</a></p>\n\n<pre><code>public static URI resolve(URI baseURI,\n                          String reference)\n</code></pre>\n\n<blockquote>\n  <p>Resolves a URI reference against a\n  base URI. Work-around for bug in\n  java.net.URI ()</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":578859,"reputation":31,"user_id":233101,"display_name":"Rachel"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1326805821,"creation_date":1260979978,"answer_id":1915729,"question_id":204784,"body_markdown":"Cool!! I need a bit of code like this but for comparing directory paths on Linux machines. I found that this wasn&#39;t working in situations where a parent directory was the target.\r\n\r\nHere is a directory friendly version of the method:\r\n\r\n     public static String getRelativePath(String targetPath, String basePath, \r\n         String pathSeparator) {\r\n\r\n     boolean isDir = false;\r\n     {\r\n       File f = new File(targetPath);\r\n       isDir = f.isDirectory();\r\n     }\r\n     //  We need the -1 argument to split to make sure we get a trailing \r\n     //  &quot;&quot; token if the base ends in the path separator and is therefore\r\n     //  a directory. We require directory paths to end in the path\r\n     //  separator -- otherwise they are indistinguishable from files.\r\n     String[] base = basePath.split(Pattern.quote(pathSeparator), -1);\r\n     String[] target = targetPath.split(Pattern.quote(pathSeparator), 0);\r\n\r\n     //  First get all the common elements. Store them as a string,\r\n     //  and also count how many of them there are. \r\n     String common = &quot;&quot;;\r\n     int commonIndex = 0;\r\n     for (int i = 0; i &lt; target.length &amp;&amp; i &lt; base.length; i++) {\r\n         if (target[i].equals(base[i])) {\r\n             common += target[i] + pathSeparator;\r\n             commonIndex++;\r\n         }\r\n         else break;\r\n     }\r\n\r\n     if (commonIndex == 0)\r\n     {\r\n         //  Whoops -- not even a single common path element. This most\r\n         //  likely indicates differing drive letters, like C: and D:. \r\n         //  These paths cannot be relativized. Return the target path.\r\n         return targetPath;\r\n         //  This should never happen when all absolute paths\r\n         //  begin with / as in *nix. \r\n     }\r\n\r\n     String relative = &quot;&quot;;\r\n     if (base.length == commonIndex) {\r\n         //  Comment this out if you prefer that a relative path not start with ./\r\n         relative = &quot;.&quot; + pathSeparator;\r\n     }\r\n     else {\r\n         int numDirsUp = base.length - commonIndex - (isDir?0:1); /* only subtract 1 if it  is a file. */\r\n         //  The number of directories we have to backtrack is the length of \r\n         //  the base path MINUS the number of common path elements, minus\r\n         //  one because the last element in the path isn&#39;t a directory.\r\n         for (int i = 1; i &lt;= (numDirsUp); i++) {\r\n             relative += &quot;..&quot; + pathSeparator;\r\n         }\r\n     }\r\n     //if we are comparing directories then we \r\n     if (targetPath.length() &gt; common.length()) {\r\n      //it&#39;s OK, it isn&#39;t a directory\r\n      relative += targetPath.substring(common.length());\r\n     }\r\n\r\n     return relative;\r\n    }\r\n","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>Cool!! I need a bit of code like this but for comparing directory paths on Linux machines. I found that this wasn't working in situations where a parent directory was the target.</p>\n\n<p>Here is a directory friendly version of the method:</p>\n\n<pre><code> public static String getRelativePath(String targetPath, String basePath, \n     String pathSeparator) {\n\n boolean isDir = false;\n {\n   File f = new File(targetPath);\n   isDir = f.isDirectory();\n }\n //  We need the -1 argument to split to make sure we get a trailing \n //  \"\" token if the base ends in the path separator and is therefore\n //  a directory. We require directory paths to end in the path\n //  separator -- otherwise they are indistinguishable from files.\n String[] base = basePath.split(Pattern.quote(pathSeparator), -1);\n String[] target = targetPath.split(Pattern.quote(pathSeparator), 0);\n\n //  First get all the common elements. Store them as a string,\n //  and also count how many of them there are. \n String common = \"\";\n int commonIndex = 0;\n for (int i = 0; i &lt; target.length &amp;&amp; i &lt; base.length; i++) {\n     if (target[i].equals(base[i])) {\n         common += target[i] + pathSeparator;\n         commonIndex++;\n     }\n     else break;\n }\n\n if (commonIndex == 0)\n {\n     //  Whoops -- not even a single common path element. This most\n     //  likely indicates differing drive letters, like C: and D:. \n     //  These paths cannot be relativized. Return the target path.\n     return targetPath;\n     //  This should never happen when all absolute paths\n     //  begin with / as in *nix. \n }\n\n String relative = \"\";\n if (base.length == commonIndex) {\n     //  Comment this out if you prefer that a relative path not start with ./\n     relative = \".\" + pathSeparator;\n }\n else {\n     int numDirsUp = base.length - commonIndex - (isDir?0:1); /* only subtract 1 if it  is a file. */\n     //  The number of directories we have to backtrack is the length of \n     //  the base path MINUS the number of common path elements, minus\n     //  one because the last element in the path isn't a directory.\n     for (int i = 1; i &lt;= (numDirsUp); i++) {\n         relative += \"..\" + pathSeparator;\n     }\n }\n //if we are comparing directories then we \n if (targetPath.length() &gt; common.length()) {\n  //it's OK, it isn't a directory\n  relative += targetPath.substring(common.length());\n }\n\n return relative;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":241904,"reputation":4316,"user_id":513038,"accept_rate":55,"display_name":"Erhannis"},"score":5,"creation_date":1348233405,"post_id":3054692,"comment_id":16871551,"body_markdown":"Nice!  One thing, though, it breaks if the base and target are the same - the string common is made to end in a separator, which the normalized target path doesn&#39;t have, so the substring call asks for one too many digits.  Think I fixed it by adding the following before the last two lines of the function: if (common.length() &gt;= normalizedTargetPath.length()) { return &quot;.&quot;; }","body":"Nice!  One thing, though, it breaks if the base and target are the same - the string common is made to end in a separator, which the normalized target path doesn&#39;t have, so the substring call asks for one too many digits.  Think I fixed it by adding the following before the last two lines of the function: if (common.length() &gt;= normalizedTargetPath.length()) { return &quot;.&quot;; }"},{"owner":{"account_id":63479,"reputation":5810,"user_id":187883,"accept_rate":100,"display_name":"NateS"},"score":4,"creation_date":1381566458,"post_id":3054692,"comment_id":28637937,"body_markdown":"Saying this is the only working solution is misleading. Other answers work better (this answer crashes when the base and target are the same), are simpler and don&#39;t rely on commons-io.","body":"Saying this is the only working solution is misleading. Other answers work better (this answer crashes when the base and target are the same), are simpler and don&#39;t rely on commons-io."}],"tags":[],"owner":{"account_id":1921,"reputation":185682,"user_id":2648,"accept_rate":52,"display_name":"D&#243;nal"},"comment_count":2,"down_vote_count":4,"up_vote_count":82,"is_accepted":false,"score":78,"last_activity_date":1435793895,"creation_date":1276701848,"answer_id":3054692,"question_id":204784,"body_markdown":"At the time of writing (June 2010), this was the only solution that passed my test cases. I can&#39;t guarantee that this solution is bug-free, but it does pass the included test cases. The method and tests I&#39;ve written depend on the [`FilenameUtils`][1] class from [Apache commons IO][2].\r\n\r\nThe solution was tested with Java 1.4. If you&#39;re using Java 1.5 (or higher) you should consider replacing `StringBuffer` with `StringBuilder` (if you&#39;re still using Java 1.4 you should consider a change of employer instead).\r\n\r\n    import java.io.File;\r\n    import java.util.regex.Pattern;\r\n\r\n    import org.apache.commons.io.FilenameUtils;\r\n\r\n    public class ResourceUtils {\r\n        \t\r\n    \t/**\r\n    \t * Get the relative path from one file to another, specifying the directory separator. \r\n    \t * If one of the provided resources does not exist, it is assumed to be a file unless it ends with &#39;/&#39; or\r\n    \t * &#39;\\&#39;.\r\n    \t * \r\n    \t * @param targetPath targetPath is calculated to this file\r\n    \t * @param basePath basePath is calculated from this file\r\n    \t * @param pathSeparator directory separator. The platform default is not assumed so that we can test Unix behaviour when running on Windows (for example)\r\n    \t * @return\r\n    \t */\r\n    \tpublic static String getRelativePath(String targetPath, String basePath, String pathSeparator) {\r\n    \r\n    \t\t// Normalize the paths\r\n    \t\tString normalizedTargetPath = FilenameUtils.normalizeNoEndSeparator(targetPath);\r\n    \t\tString normalizedBasePath = FilenameUtils.normalizeNoEndSeparator(basePath);\r\n    \r\n    \t\t// Undo the changes to the separators made by normalization\r\n    \t\tif (pathSeparator.equals(&quot;/&quot;)) {\r\n    \t\t\tnormalizedTargetPath = FilenameUtils.separatorsToUnix(normalizedTargetPath);\r\n    \t\t\tnormalizedBasePath = FilenameUtils.separatorsToUnix(normalizedBasePath);\r\n    \r\n    \t\t} else if (pathSeparator.equals(&quot;\\\\&quot;)) {\r\n    \t\t\tnormalizedTargetPath = FilenameUtils.separatorsToWindows(normalizedTargetPath);\r\n    \t\t\tnormalizedBasePath = FilenameUtils.separatorsToWindows(normalizedBasePath);\r\n    \r\n    \t\t} else {\r\n    \t\t\tthrow new IllegalArgumentException(&quot;Unrecognised dir separator &#39;&quot; + pathSeparator + &quot;&#39;&quot;);\r\n    \t\t}\r\n    \r\n    \t\tString[] base = normalizedBasePath.split(Pattern.quote(pathSeparator));\r\n    \t\tString[] target = normalizedTargetPath.split(Pattern.quote(pathSeparator));\r\n    \r\n    \t\t// First get all the common elements. Store them as a string,\r\n    \t\t// and also count how many of them there are.\r\n    \t\tStringBuffer common = new StringBuffer();\r\n    \r\n    \t\tint commonIndex = 0;\r\n    \t\twhile (commonIndex &lt; target.length &amp;&amp; commonIndex &lt; base.length\r\n    \t\t\t\t&amp;&amp; target[commonIndex].equals(base[commonIndex])) {\r\n    \t\t\tcommon.append(target[commonIndex] + pathSeparator);\r\n    \t\t\tcommonIndex++;\r\n    \t\t}\r\n    \r\n    \t\tif (commonIndex == 0) {\r\n    \t\t\t// No single common path element. This most\r\n    \t\t\t// likely indicates differing drive letters, like C: and D:.\r\n    \t\t\t// These paths cannot be relativized.\r\n    \t\t\tthrow new PathResolutionException(&quot;No common path element found for &#39;&quot; + normalizedTargetPath + &quot;&#39; and &#39;&quot; + normalizedBasePath\r\n    \t\t\t\t\t+ &quot;&#39;&quot;);\r\n    \t\t}   \r\n    \r\n    \t\t// The number of directories we have to backtrack depends on whether the base is a file or a dir\r\n    \t\t// For example, the relative path from\r\n    \t\t//\r\n    \t\t// /foo/bar/baz/gg/ff to /foo/bar/baz\r\n    \t\t// \r\n    \t\t// &quot;..&quot; if ff is a file\r\n    \t\t// &quot;../..&quot; if ff is a directory\r\n    \t\t//\r\n    \t\t// The following is a heuristic to figure out if the base refers to a file or dir. It&#39;s not perfect, because\r\n    \t\t// the resource referred to by this path may not actually exist, but it&#39;s the best I can do\r\n    \t\tboolean baseIsFile = true;\r\n    \t\t\r\n    \t\tFile baseResource = new File(normalizedBasePath);\r\n    \t\t\r\n    \t\tif (baseResource.exists()) {\r\n    \t\t\tbaseIsFile = baseResource.isFile();\r\n    \t\t\t\r\n    \t\t} else if (basePath.endsWith(pathSeparator)) {\r\n    \t\t\tbaseIsFile = false;\r\n    \t\t}\r\n\r\n    \t\tStringBuffer relative = new StringBuffer();\r\n    \t\t\r\n    \t\tif (base.length != commonIndex) {\r\n    \t\t\tint numDirsUp = baseIsFile ? base.length - commonIndex - 1 : base.length - commonIndex;\r\n    \r\n    \t\t\tfor (int i = 0; i &lt; numDirsUp; i++) {\r\n    \t\t\t\trelative.append(&quot;..&quot; + pathSeparator);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\trelative.append(normalizedTargetPath.substring(common.length()));\r\n    \t\treturn relative.toString();\r\n    \t}\r\n    \r\n    \t\r\n    \tstatic class PathResolutionException extends RuntimeException {\r\n    \t\tPathResolutionException(String msg) {\r\n    \t\t\tsuper(msg);\r\n    \t\t}\r\n    \t}    \r\n    }\r\n\r\nThe test cases that this passes are\r\n\r\n\tpublic void testGetRelativePathsUnix() {\r\n\t\tassertEquals(&quot;stuff/xyz.dat&quot;, ResourceUtils.getRelativePath(&quot;/var/data/stuff/xyz.dat&quot;, &quot;/var/data/&quot;, &quot;/&quot;));\r\n\t\tassertEquals(&quot;../../b/c&quot;, ResourceUtils.getRelativePath(&quot;/a/b/c&quot;, &quot;/a/x/y/&quot;, &quot;/&quot;));\r\n\t\tassertEquals(&quot;../../b/c&quot;, ResourceUtils.getRelativePath(&quot;/m/n/o/a/b/c&quot;, &quot;/m/n/o/a/x/y/&quot;, &quot;/&quot;));\r\n\t}\r\n\r\n\tpublic void testGetRelativePathFileToFile() {\r\n\t\tString target = &quot;C:\\\\Windows\\\\Boot\\\\Fonts\\\\chs_boot.ttf&quot;;\r\n\t\tString base = &quot;C:\\\\Windows\\\\Speech\\\\Common\\\\sapisvr.exe&quot;;\r\n\r\n\t\tString relPath = ResourceUtils.getRelativePath(target, base, &quot;\\\\&quot;);\r\n\t\tassertEquals(&quot;..\\\\..\\\\Boot\\\\Fonts\\\\chs_boot.ttf&quot;, relPath);\r\n\t}\r\n\r\n\tpublic void testGetRelativePathDirectoryToFile() {\r\n\t\tString target = &quot;C:\\\\Windows\\\\Boot\\\\Fonts\\\\chs_boot.ttf&quot;;\r\n\t\tString base = &quot;C:\\\\Windows\\\\Speech\\\\Common\\\\&quot;;\r\n\r\n\t\tString relPath = ResourceUtils.getRelativePath(target, base, &quot;\\\\&quot;);\r\n\t\tassertEquals(&quot;..\\\\..\\\\Boot\\\\Fonts\\\\chs_boot.ttf&quot;, relPath);\r\n\t}\r\n\r\n\tpublic void testGetRelativePathFileToDirectory() {\r\n\t\tString target = &quot;C:\\\\Windows\\\\Boot\\\\Fonts&quot;;\r\n\t\tString base = &quot;C:\\\\Windows\\\\Speech\\\\Common\\\\foo.txt&quot;;\r\n\r\n\t\tString relPath = ResourceUtils.getRelativePath(target, base, &quot;\\\\&quot;);\r\n\t\tassertEquals(&quot;..\\\\..\\\\Boot\\\\Fonts&quot;, relPath);\r\n\t}\r\n\r\n\tpublic void testGetRelativePathDirectoryToDirectory() {\r\n\t\tString target = &quot;C:\\\\Windows\\\\Boot\\\\&quot;;\r\n\t\tString base = &quot;C:\\\\Windows\\\\Speech\\\\Common\\\\&quot;;\r\n\t\tString expected = &quot;..\\\\..\\\\Boot&quot;;\r\n\r\n\t\tString relPath = ResourceUtils.getRelativePath(target, base, &quot;\\\\&quot;);\r\n\t\tassertEquals(expected, relPath);\r\n\t}\r\n\r\n\tpublic void testGetRelativePathDifferentDriveLetters() {\r\n\t\tString target = &quot;D:\\\\sources\\\\recovery\\\\RecEnv.exe&quot;;\r\n\t\tString base = &quot;C:\\\\Java\\\\workspace\\\\AcceptanceTests\\\\Standard test data\\\\geo\\\\&quot;;\r\n\r\n\t\ttry {\r\n\t\t\tResourceUtils.getRelativePath(target, base, &quot;\\\\&quot;);\r\n\t\t\tfail();\r\n\r\n\t\t} catch (PathResolutionException ex) {\r\n\t\t\t// expected exception\r\n\t\t}\r\n\t}\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FilenameUtils.html\r\n  [2]: http://commons.apache.org/io/","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>At the time of writing (June 2010), this was the only solution that passed my test cases. I can't guarantee that this solution is bug-free, but it does pass the included test cases. The method and tests I've written depend on the <a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FilenameUtils.html\" rel=\"noreferrer\"><code>FilenameUtils</code></a> class from <a href=\"http://commons.apache.org/io/\" rel=\"noreferrer\">Apache commons IO</a>.</p>\n\n<p>The solution was tested with Java 1.4. If you're using Java 1.5 (or higher) you should consider replacing <code>StringBuffer</code> with <code>StringBuilder</code> (if you're still using Java 1.4 you should consider a change of employer instead).</p>\n\n<pre><code>import java.io.File;\nimport java.util.regex.Pattern;\n\nimport org.apache.commons.io.FilenameUtils;\n\npublic class ResourceUtils {\n\n    /**\n     * Get the relative path from one file to another, specifying the directory separator. \n     * If one of the provided resources does not exist, it is assumed to be a file unless it ends with '/' or\n     * '\\'.\n     * \n     * @param targetPath targetPath is calculated to this file\n     * @param basePath basePath is calculated from this file\n     * @param pathSeparator directory separator. The platform default is not assumed so that we can test Unix behaviour when running on Windows (for example)\n     * @return\n     */\n    public static String getRelativePath(String targetPath, String basePath, String pathSeparator) {\n\n        // Normalize the paths\n        String normalizedTargetPath = FilenameUtils.normalizeNoEndSeparator(targetPath);\n        String normalizedBasePath = FilenameUtils.normalizeNoEndSeparator(basePath);\n\n        // Undo the changes to the separators made by normalization\n        if (pathSeparator.equals(\"/\")) {\n            normalizedTargetPath = FilenameUtils.separatorsToUnix(normalizedTargetPath);\n            normalizedBasePath = FilenameUtils.separatorsToUnix(normalizedBasePath);\n\n        } else if (pathSeparator.equals(\"\\\\\")) {\n            normalizedTargetPath = FilenameUtils.separatorsToWindows(normalizedTargetPath);\n            normalizedBasePath = FilenameUtils.separatorsToWindows(normalizedBasePath);\n\n        } else {\n            throw new IllegalArgumentException(\"Unrecognised dir separator '\" + pathSeparator + \"'\");\n        }\n\n        String[] base = normalizedBasePath.split(Pattern.quote(pathSeparator));\n        String[] target = normalizedTargetPath.split(Pattern.quote(pathSeparator));\n\n        // First get all the common elements. Store them as a string,\n        // and also count how many of them there are.\n        StringBuffer common = new StringBuffer();\n\n        int commonIndex = 0;\n        while (commonIndex &lt; target.length &amp;&amp; commonIndex &lt; base.length\n                &amp;&amp; target[commonIndex].equals(base[commonIndex])) {\n            common.append(target[commonIndex] + pathSeparator);\n            commonIndex++;\n        }\n\n        if (commonIndex == 0) {\n            // No single common path element. This most\n            // likely indicates differing drive letters, like C: and D:.\n            // These paths cannot be relativized.\n            throw new PathResolutionException(\"No common path element found for '\" + normalizedTargetPath + \"' and '\" + normalizedBasePath\n                    + \"'\");\n        }   \n\n        // The number of directories we have to backtrack depends on whether the base is a file or a dir\n        // For example, the relative path from\n        //\n        // /foo/bar/baz/gg/ff to /foo/bar/baz\n        // \n        // \"..\" if ff is a file\n        // \"../..\" if ff is a directory\n        //\n        // The following is a heuristic to figure out if the base refers to a file or dir. It's not perfect, because\n        // the resource referred to by this path may not actually exist, but it's the best I can do\n        boolean baseIsFile = true;\n\n        File baseResource = new File(normalizedBasePath);\n\n        if (baseResource.exists()) {\n            baseIsFile = baseResource.isFile();\n\n        } else if (basePath.endsWith(pathSeparator)) {\n            baseIsFile = false;\n        }\n\n        StringBuffer relative = new StringBuffer();\n\n        if (base.length != commonIndex) {\n            int numDirsUp = baseIsFile ? base.length - commonIndex - 1 : base.length - commonIndex;\n\n            for (int i = 0; i &lt; numDirsUp; i++) {\n                relative.append(\"..\" + pathSeparator);\n            }\n        }\n        relative.append(normalizedTargetPath.substring(common.length()));\n        return relative.toString();\n    }\n\n\n    static class PathResolutionException extends RuntimeException {\n        PathResolutionException(String msg) {\n            super(msg);\n        }\n    }    \n}\n</code></pre>\n\n<p>The test cases that this passes are</p>\n\n<pre><code>public void testGetRelativePathsUnix() {\n    assertEquals(\"stuff/xyz.dat\", ResourceUtils.getRelativePath(\"/var/data/stuff/xyz.dat\", \"/var/data/\", \"/\"));\n    assertEquals(\"../../b/c\", ResourceUtils.getRelativePath(\"/a/b/c\", \"/a/x/y/\", \"/\"));\n    assertEquals(\"../../b/c\", ResourceUtils.getRelativePath(\"/m/n/o/a/b/c\", \"/m/n/o/a/x/y/\", \"/\"));\n}\n\npublic void testGetRelativePathFileToFile() {\n    String target = \"C:\\\\Windows\\\\Boot\\\\Fonts\\\\chs_boot.ttf\";\n    String base = \"C:\\\\Windows\\\\Speech\\\\Common\\\\sapisvr.exe\";\n\n    String relPath = ResourceUtils.getRelativePath(target, base, \"\\\\\");\n    assertEquals(\"..\\\\..\\\\Boot\\\\Fonts\\\\chs_boot.ttf\", relPath);\n}\n\npublic void testGetRelativePathDirectoryToFile() {\n    String target = \"C:\\\\Windows\\\\Boot\\\\Fonts\\\\chs_boot.ttf\";\n    String base = \"C:\\\\Windows\\\\Speech\\\\Common\\\\\";\n\n    String relPath = ResourceUtils.getRelativePath(target, base, \"\\\\\");\n    assertEquals(\"..\\\\..\\\\Boot\\\\Fonts\\\\chs_boot.ttf\", relPath);\n}\n\npublic void testGetRelativePathFileToDirectory() {\n    String target = \"C:\\\\Windows\\\\Boot\\\\Fonts\";\n    String base = \"C:\\\\Windows\\\\Speech\\\\Common\\\\foo.txt\";\n\n    String relPath = ResourceUtils.getRelativePath(target, base, \"\\\\\");\n    assertEquals(\"..\\\\..\\\\Boot\\\\Fonts\", relPath);\n}\n\npublic void testGetRelativePathDirectoryToDirectory() {\n    String target = \"C:\\\\Windows\\\\Boot\\\\\";\n    String base = \"C:\\\\Windows\\\\Speech\\\\Common\\\\\";\n    String expected = \"..\\\\..\\\\Boot\";\n\n    String relPath = ResourceUtils.getRelativePath(target, base, \"\\\\\");\n    assertEquals(expected, relPath);\n}\n\npublic void testGetRelativePathDifferentDriveLetters() {\n    String target = \"D:\\\\sources\\\\recovery\\\\RecEnv.exe\";\n    String base = \"C:\\\\Java\\\\workspace\\\\AcceptanceTests\\\\Standard test data\\\\geo\\\\\";\n\n    try {\n        ResourceUtils.getRelativePath(target, base, \"\\\\\");\n        fail();\n\n    } catch (PathResolutionException ex) {\n        // expected exception\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1894447,"reputation":590,"user_id":1711726,"display_name":"hokr"},"score":3,"creation_date":1371183804,"post_id":8555628,"comment_id":24739039,"body_markdown":"Nice, short, no extra lib +1.\nAdam Crume&#39;s solution (hit 1) doesnt pass my tests and next answer (hit2) &quot;The Only &#39;Working&#39; Solution&quot; adds a new jar AND is more code than my implementation, I find this here afterwards... better than never .-)","body":"Nice, short, no extra lib +1. Adam Crume&#39;s solution (hit 1) doesnt pass my tests and next answer (hit2) &quot;The Only &#39;Working&#39; Solution&quot; adds a new jar AND is more code than my implementation, I find this here afterwards... better than never .-)"},{"owner":{"account_id":2911666,"reputation":4689,"user_id":2495717,"accept_rate":88,"display_name":"ben3000"},"score":1,"creation_date":1460443429,"post_id":8555628,"comment_id":60730617,"body_markdown":"But watch out for [this problem](http://stackoverflow.com/questions/36544269/path-startswith-returns-false-for-a-windows-file-path-on-linux).","body":"But watch out for <a href=\"http://stackoverflow.com/questions/36544269/path-startswith-returns-false-for-a-windows-file-path-on-linux\">this problem</a>."},{"owner":{"account_id":155233,"reputation":38926,"user_id":371739,"accept_rate":61,"display_name":"Owen"},"score":1,"creation_date":1466182073,"post_id":8555628,"comment_id":63227826,"body_markdown":"Checked that this handles adding `..` where necessary (it does).","body":"Checked that this handles adding <code>..</code> where necessary (it does)."},{"owner":{"account_id":65895,"reputation":71649,"user_id":193619,"accept_rate":86,"display_name":"Nathan Osman"},"score":0,"creation_date":1487803641,"post_id":8555628,"comment_id":71954419,"body_markdown":"Unfortunately, Android doesn&#39;t include `java.nio.file` :(","body":"Unfortunately, Android doesn&#39;t include <code>java.nio.file</code> :("},{"owner":{"account_id":48948,"reputation":35452,"user_id":145574,"accept_rate":90,"display_name":"pstanton"},"score":2,"creation_date":1496288055,"post_id":8555628,"comment_id":75601883,"body_markdown":"I&#39;ve found you get strange results if the &quot;pathBase&quot; is not &quot;normalized&quot; prior to &quot;relativize&quot;. Although fine in this example, I would do `pathBase.normalize().relativize(pathAbsolute);` as a general rule.","body":"I&#39;ve found you get strange results if the &quot;pathBase&quot; is not &quot;normalized&quot; prior to &quot;relativize&quot;. Although fine in this example, I would do <code>pathBase.normalize().relativize(pathAbsolute);</code> as a general rule."},{"owner":{"account_id":2678223,"reputation":744,"user_id":2859462,"display_name":"Corrodias"},"score":0,"creation_date":1509392400,"post_id":8555628,"comment_id":80993004,"body_markdown":"@pstanton Could you elaborate on what kinds of strange results you mean? Your comment is relevant, but it&#39;s unclear what impact it has.","body":"@pstanton Could you elaborate on what kinds of strange results you mean? Your comment is relevant, but it&#39;s unclear what impact it has."},{"owner":{"account_id":48948,"reputation":35452,"user_id":145574,"accept_rate":90,"display_name":"pstanton"},"score":0,"creation_date":1509418438,"post_id":8555628,"comment_id":81001422,"body_markdown":"sorry, too late my memory is not that great ;)","body":"sorry, too late my memory is not that great ;)"}],"tags":[],"owner":{"account_id":108817,"reputation":111656,"user_id":288671,"display_name":"Vitalii Fedorenko"},"comment_count":7,"down_vote_count":0,"up_vote_count":280,"is_accepted":false,"score":280,"last_activity_date":1324250228,"creation_date":1324250228,"answer_id":8555628,"question_id":204784,"body_markdown":"Since Java 7 you can use the [relativize][1] method:\r\n\r\n    import java.nio.file.Path;\r\n    import java.nio.file.Paths;\r\n    \r\n    public class Test {\r\n    \r\n         public static void main(String[] args) {\r\n            Path pathAbsolute = Paths.get(&quot;/var/data/stuff/xyz.dat&quot;);\r\n            Path pathBase = Paths.get(&quot;/var/data&quot;);\r\n            Path pathRelative = pathBase.relativize(pathAbsolute);\r\n            System.out.println(pathRelative);\r\n        }\r\n    \r\n    }\r\n\r\nOutput:\r\n\r\n    stuff/xyz.dat\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html#relativize%28java.nio.file.Path%29\r\n","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>Since Java 7 you can use the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html#relativize%28java.nio.file.Path%29\" rel=\"noreferrer\">relativize</a> method:</p>\n\n<pre><code>import java.nio.file.Path;\nimport java.nio.file.Paths;\n\npublic class Test {\n\n     public static void main(String[] args) {\n        Path pathAbsolute = Paths.get(\"/var/data/stuff/xyz.dat\");\n        Path pathBase = Paths.get(\"/var/data\");\n        Path pathRelative = pathBase.relativize(pathAbsolute);\n        System.out.println(pathRelative);\n    }\n\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>stuff/xyz.dat\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2667931,"reputation":776,"user_id":2305886,"accept_rate":29,"display_name":"user2305886"},"score":0,"creation_date":1388175117,"post_id":11215226,"comment_id":31196074,"body_markdown":"getCanonicalPath can be heavy weight, so this solution can be not recommended when you need to process hundred thousand records. For example I have some listing files having up to million records and now I want to move them to use relative path for portability.","body":"getCanonicalPath can be heavy weight, so this solution can be not recommended when you need to process hundred thousand records. For example I have some listing files having up to million records and now I want to move them to use relative path for portability."}],"tags":[],"owner":{"account_id":1603232,"reputation":101,"user_id":1483867,"display_name":"Burn L."},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1350804497,"creation_date":1340741472,"answer_id":11215226,"question_id":204784,"body_markdown":"Recursion produces a smaller solution.  This throws an exception if the result is impossible (e.g. different Windows disk) or impractical (root is only common directory.) \r\n\r\n    /**\r\n     * Computes the path for a file relative to a given base, or fails if the only shared \r\n     * directory is the root and the absolute form is better.\r\n     * \r\n     * @param base File that is the base for the result\r\n     * @param name File to be &quot;relativized&quot;\r\n     * @return the relative name\r\n     * @throws IOException if files have no common sub-directories, i.e. at best share the\r\n     *                     root prefix &quot;/&quot; or &quot;C:\\&quot;\r\n     */\r\n     \r\n    public static String getRelativePath(File base, File name) throws IOException  {\r\n    \tFile parent = base.getParentFile();\r\n    \t\r\n    \tif (parent == null) {\r\n    \t\tthrow new IOException(&quot;No common directory&quot;);\r\n    \t}\r\n    \t\r\n    \tString bpath = base.getCanonicalPath();\r\n    \tString fpath = name.getCanonicalPath();\r\n    \t\r\n    \tif (fpath.startsWith(bpath)) {\r\n    \t\treturn fpath.substring(bpath.length() + 1);\r\n    \t} else {\r\n    \t\treturn (&quot;..&quot; + File.separator + getRelativePath(parent, name));\r\n    \t}\r\n    }","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>Recursion produces a smaller solution.  This throws an exception if the result is impossible (e.g. different Windows disk) or impractical (root is only common directory.) </p>\n\n<pre><code>/**\n * Computes the path for a file relative to a given base, or fails if the only shared \n * directory is the root and the absolute form is better.\n * \n * @param base File that is the base for the result\n * @param name File to be \"relativized\"\n * @return the relative name\n * @throws IOException if files have no common sub-directories, i.e. at best share the\n *                     root prefix \"/\" or \"C:\\\"\n */\n\npublic static String getRelativePath(File base, File name) throws IOException  {\n    File parent = base.getParentFile();\n\n    if (parent == null) {\n        throw new IOException(\"No common directory\");\n    }\n\n    String bpath = base.getCanonicalPath();\n    String fpath = name.getCanonicalPath();\n\n    if (fpath.startsWith(bpath)) {\n        return fpath.substring(bpath.length() + 1);\n    } else {\n        return (\"..\" + File.separator + getRelativePath(parent, name));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":63479,"reputation":5810,"user_id":187883,"accept_rate":100,"display_name":"NateS"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1381566304,"creation_date":1381566304,"answer_id":19332145,"question_id":204784,"body_markdown":"Lots of answers already here, but I found they didn&#39;t handle all cases, such as the base and target being the same. This function takes a base *directory* and a target path and returns the relative path. If no relative path exists, the target path is returned. File.separator is unnecessary.\r\n\r\n\tpublic static String getRelativePath (String baseDir, String targetPath) {\r\n\t\tString[] base = baseDir.replace(&#39;\\\\&#39;, &#39;/&#39;).split(&quot;\\\\/&quot;);\r\n\t\ttargetPath = targetPath.replace(&#39;\\\\&#39;, &#39;/&#39;);\r\n\t\tString[] target = targetPath.split(&quot;\\\\/&quot;);\r\n\r\n\t\t// Count common elements and their length.\r\n\t\tint commonCount = 0, commonLength = 0, maxCount = Math.min(target.length, base.length);\r\n\t\twhile (commonCount &lt; maxCount) {\r\n\t\t\tString targetElement = target[commonCount];\r\n\t\t\tif (!targetElement.equals(base[commonCount])) break;\r\n\t\t\tcommonCount++;\r\n\t\t\tcommonLength += targetElement.length() + 1; // Directory name length plus slash.\r\n\t\t}\r\n\t\tif (commonCount == 0) return targetPath; // No common path element.\r\n\r\n\t\tint targetLength = targetPath.length();\r\n\t\tint dirsUp = base.length - commonCount;\r\n\t\tStringBuffer relative = new StringBuffer(dirsUp * 3 + targetLength - commonLength + 1);\r\n\t\tfor (int i = 0; i &lt; dirsUp; i++)\r\n\t\t\trelative.append(&quot;../&quot;);\r\n\t\tif (commonLength &lt; targetLength) relative.append(targetPath.substring(commonLength));\r\n\t\treturn relative.toString();\r\n\t}","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>Lots of answers already here, but I found they didn't handle all cases, such as the base and target being the same. This function takes a base <em>directory</em> and a target path and returns the relative path. If no relative path exists, the target path is returned. File.separator is unnecessary.</p>\n\n<pre><code>public static String getRelativePath (String baseDir, String targetPath) {\n    String[] base = baseDir.replace('\\\\', '/').split(\"\\\\/\");\n    targetPath = targetPath.replace('\\\\', '/');\n    String[] target = targetPath.split(\"\\\\/\");\n\n    // Count common elements and their length.\n    int commonCount = 0, commonLength = 0, maxCount = Math.min(target.length, base.length);\n    while (commonCount &lt; maxCount) {\n        String targetElement = target[commonCount];\n        if (!targetElement.equals(base[commonCount])) break;\n        commonCount++;\n        commonLength += targetElement.length() + 1; // Directory name length plus slash.\n    }\n    if (commonCount == 0) return targetPath; // No common path element.\n\n    int targetLength = targetPath.length();\n    int dirsUp = base.length - commonCount;\n    StringBuffer relative = new StringBuffer(dirsUp * 3 + targetLength - commonLength + 1);\n    for (int i = 0; i &lt; dirsUp; i++)\n        relative.append(\"../\");\n    if (commonLength &lt; targetLength) relative.append(targetPath.substring(commonLength));\n    return relative.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3838668,"reputation":173,"user_id":3182397,"display_name":"Kristel"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1390768304,"creation_date":1390768304,"answer_id":21368806,"question_id":204784,"body_markdown":"org.apache.ant has a FileUtils class with a getRelativePath method. Haven&#39;t tried it myself yet, but could be worthwhile to check it out.\r\n\r\nhttp://javadoc.haefelinger.it/org.apache.ant/1.7.1/org/apache/tools/ant/util/FileUtils.html#getRelativePath(java.io.File, java.io.File)","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>org.apache.ant has a FileUtils class with a getRelativePath method. Haven't tried it myself yet, but could be worthwhile to check it out.</p>\n\n<p><a href=\"http://javadoc.haefelinger.it/org.apache.ant/1.7.1/org/apache/tools/ant/util/FileUtils.html#getRelativePath(java.io.File\" rel=\"nofollow\">http://javadoc.haefelinger.it/org.apache.ant/1.7.1/org/apache/tools/ant/util/FileUtils.html#getRelativePath(java.io.File</a>, java.io.File)</p>\n"},{"tags":[],"owner":{"account_id":95905,"reputation":2985,"user_id":260981,"accept_rate":40,"display_name":"pedromateo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401438044,"creation_date":1401438044,"answer_id":23950069,"question_id":204784,"body_markdown":"Here a method that resolves a relative path from a base path regardless they are in the same or in a different root:\r\n\r\n    public static String GetRelativePath(String path, String base){\r\n\t\t\r\n\t\tfinal String SEP = &quot;/&quot;;\r\n\t\t\r\n\t\t// if base is not a directory -&gt; return empty\r\n\t\tif (!base.endsWith(SEP)){\r\n\t\t\treturn &quot;&quot;;\r\n\t\t}\r\n\t\t\r\n\t\t// check if path is a file -&gt; remove last &quot;/&quot; at the end of the method\r\n\t\tboolean isfile = !path.endsWith(SEP);\r\n\r\n\t\t// get URIs and split them by using the separator\r\n\t\tString a = &quot;&quot;;\r\n\t\tString b = &quot;&quot;;\r\n\t\ttry {\r\n\t\t\ta = new File(base).getCanonicalFile().toURI().getPath();\r\n\t\t\tb = new File(path).getCanonicalFile().toURI().getPath();\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\tString[] basePaths = a.split(SEP);\r\n\t\tString[] otherPaths = b.split(SEP);\r\n\t\t\r\n\t\t// check common part\r\n\t\tint n = 0;\r\n\t\tfor(; n &lt; basePaths.length &amp;&amp; n &lt; otherPaths.length; n ++)\r\n\t\t{\r\n\t\t\tif( basePaths[n].equals(otherPaths[n]) == false )\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\t// compose the new path\r\n\t\tStringBuffer tmp = new StringBuffer(&quot;&quot;);\r\n\t\tfor(int m = n; m &lt; basePaths.length; m ++)\r\n\t\t\ttmp.append(&quot;..&quot;+SEP);\r\n\t\tfor(int m = n; m &lt; otherPaths.length; m ++)\r\n\t\t{\r\n\t\t\ttmp.append(otherPaths[m]);\r\n\t\t\ttmp.append(SEP);\r\n\t\t}\r\n\r\n\t\t// get path string\r\n\t\tString result = tmp.toString();\r\n\r\n\t\t// remove last &quot;/&quot; if path is a file\r\n\t\tif (isfile &amp;&amp; result.endsWith(SEP)){\r\n\t\t\tresult = result.substring(0,result.length()-1);\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>Here a method that resolves a relative path from a base path regardless they are in the same or in a different root:</p>\n\n<pre><code>public static String GetRelativePath(String path, String base){\n\n    final String SEP = \"/\";\n\n    // if base is not a directory -&gt; return empty\n    if (!base.endsWith(SEP)){\n        return \"\";\n    }\n\n    // check if path is a file -&gt; remove last \"/\" at the end of the method\n    boolean isfile = !path.endsWith(SEP);\n\n    // get URIs and split them by using the separator\n    String a = \"\";\n    String b = \"\";\n    try {\n        a = new File(base).getCanonicalFile().toURI().getPath();\n        b = new File(path).getCanonicalFile().toURI().getPath();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    String[] basePaths = a.split(SEP);\n    String[] otherPaths = b.split(SEP);\n\n    // check common part\n    int n = 0;\n    for(; n &lt; basePaths.length &amp;&amp; n &lt; otherPaths.length; n ++)\n    {\n        if( basePaths[n].equals(otherPaths[n]) == false )\n            break;\n    }\n\n    // compose the new path\n    StringBuffer tmp = new StringBuffer(\"\");\n    for(int m = n; m &lt; basePaths.length; m ++)\n        tmp.append(\"..\"+SEP);\n    for(int m = n; m &lt; otherPaths.length; m ++)\n    {\n        tmp.append(otherPaths[m]);\n        tmp.append(SEP);\n    }\n\n    // get path string\n    String result = tmp.toString();\n\n    // remove last \"/\" if path is a file\n    if (isfile &amp;&amp; result.endsWith(SEP)){\n        result = result.substring(0,result.length()-1);\n    }\n\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1126140,"reputation":320,"user_id":1113396,"display_name":"Jirka Meluzin"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1410263753,"creation_date":1410263152,"answer_id":25743823,"question_id":204784,"body_markdown":"Here is a solution other library free:\r\n\r\n    Path sourceFile = Paths.get(&quot;some/common/path/example/a/b/c/f1.txt&quot;);\r\n    Path targetFile = Paths.get(&quot;some/common/path/example/d/e/f2.txt&quot;); \r\n    Path relativePath = sourceFile.relativize(targetFile);\r\n    System.out.println(relativePath);\r\n\r\nOutputs\r\n\r\n    ..\\..\\..\\..\\d\\e\\f2.txt\r\n\r\n[EDIT] actually it outputs on more ..\\ because of the source is file not a directory. Correct solution for my case is:\r\n\r\n    Path sourceFile = Paths.get(new File(&quot;some/common/path/example/a/b/c/f1.txt&quot;).parent());\r\n    Path targetFile = Paths.get(&quot;some/common/path/example/d/e/f2.txt&quot;); \r\n    Path relativePath = sourceFile.relativize(targetFile);\r\n    System.out.println(relativePath);","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>Here is a solution other library free:</p>\n\n<pre><code>Path sourceFile = Paths.get(\"some/common/path/example/a/b/c/f1.txt\");\nPath targetFile = Paths.get(\"some/common/path/example/d/e/f2.txt\"); \nPath relativePath = sourceFile.relativize(targetFile);\nSystem.out.println(relativePath);\n</code></pre>\n\n<p>Outputs</p>\n\n<pre><code>..\\..\\..\\..\\d\\e\\f2.txt\n</code></pre>\n\n<p>[EDIT] actually it outputs on more ..\\ because of the source is file not a directory. Correct solution for my case is:</p>\n\n<pre><code>Path sourceFile = Paths.get(new File(\"some/common/path/example/a/b/c/f1.txt\").parent());\nPath targetFile = Paths.get(\"some/common/path/example/d/e/f2.txt\"); \nPath relativePath = sourceFile.relativize(targetFile);\nSystem.out.println(relativePath);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5589661,"reputation":1,"user_id":4429268,"display_name":"terensu"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1438334304,"creation_date":1438334304,"answer_id":31742504,"question_id":204784,"body_markdown":"    private String relative(String left, String right){\r\n        String[] lefts = left.split(&quot;/&quot;);\r\n        String[] rights = right.split(&quot;/&quot;);\r\n        int min = Math.min(lefts.length, rights.length);\r\n        int commonIdx = -1;\r\n        for(int i = 0; i &lt; min; i++){\r\n            if(commonIdx &lt; 0 &amp;&amp; !lefts[i].equals(rights[i])){\r\n                commonIdx = i - 1;\r\n                break;\r\n            }\r\n        }\r\n        if(commonIdx &lt; 0){\r\n            return null;\r\n        }\r\n        StringBuilder sb = new StringBuilder(Math.max(left.length(), right.length()));\r\n        sb.append(left).append(&quot;/&quot;);\r\n        for(int i = commonIdx + 1; i &lt; lefts.length;i++){\r\n            sb.append(&quot;../&quot;);\r\n        }\r\n        for(int i = commonIdx + 1; i &lt; rights.length;i++){\r\n            sb.append(rights[i]).append(&quot;/&quot;);\r\n        }\r\n\r\n        return sb.deleteCharAt(sb.length() -1).toString();\r\n    }","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<pre><code>private String relative(String left, String right){\n    String[] lefts = left.split(\"/\");\n    String[] rights = right.split(\"/\");\n    int min = Math.min(lefts.length, rights.length);\n    int commonIdx = -1;\n    for(int i = 0; i &lt; min; i++){\n        if(commonIdx &lt; 0 &amp;&amp; !lefts[i].equals(rights[i])){\n            commonIdx = i - 1;\n            break;\n        }\n    }\n    if(commonIdx &lt; 0){\n        return null;\n    }\n    StringBuilder sb = new StringBuilder(Math.max(left.length(), right.length()));\n    sb.append(left).append(\"/\");\n    for(int i = commonIdx + 1; i &lt; lefts.length;i++){\n        sb.append(\"../\");\n    }\n    for(int i = commonIdx + 1; i &lt; rights.length;i++){\n        sb.append(rights[i]).append(\"/\");\n    }\n\n    return sb.deleteCharAt(sb.length() -1).toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":465074,"reputation":12318,"user_id":868941,"accept_rate":75,"display_name":"rmuller"},"comment_count":0,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1587631206,"creation_date":1460036051,"answer_id":36477801,"question_id":204784,"body_markdown":"In **Java 7** and later you can simply use (and in contrast to `URI`, it is bug free):\r\n\r\n    Path#relativize(Path)","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>In <strong>Java 7</strong> and later you can simply use (and in contrast to <code>URI</code>, it is bug free):</p>\n\n<pre><code>Path#relativize(Path)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1483222657,"creation_date":1483212237,"answer_id":41411138,"question_id":204784,"body_markdown":"Passes D&#243;nal&#39;s tests, the only change - if no common root it returns target path (it could be already relative)\r\n\r\n\timport static java.util.Arrays.asList;\r\n\timport static java.util.Collections.nCopies;\r\n\timport static org.apache.commons.io.FilenameUtils.normalizeNoEndSeparator;\r\n\timport static org.apache.commons.io.FilenameUtils.separatorsToUnix;\r\n\timport static org.apache.commons.lang3.StringUtils.getCommonPrefix;\r\n\timport static org.apache.commons.lang3.StringUtils.isBlank;\r\n\timport static org.apache.commons.lang3.StringUtils.isNotEmpty;\r\n\timport static org.apache.commons.lang3.StringUtils.join;\r\n\t\r\n\timport java.io.File;\r\n\timport java.util.ArrayList;\r\n\timport java.util.List;\r\n\t\r\n\tpublic class ResourceUtils {\r\n\t\r\n\t\tpublic static String getRelativePath(String targetPath, String basePath, String pathSeparator) {\r\n\t\t\tFile baseFile = new File(basePath);\r\n\t\t\tif (baseFile.isFile() || !baseFile.exists() &amp;&amp; !basePath.endsWith(&quot;/&quot;) &amp;&amp; !basePath.endsWith(&quot;\\\\&quot;))\r\n\t\t\t\tbasePath = baseFile.getParent();\r\n\t\r\n\t\t\tString target = separatorsToUnix(normalizeNoEndSeparator(targetPath));\r\n\t\t\tString base = separatorsToUnix(normalizeNoEndSeparator(basePath));\r\n\t\r\n\t\t\tString commonPrefix = getCommonPrefix(target, base);\r\n\t\t\tif (isBlank(commonPrefix))\r\n\t\t\t\treturn targetPath.replaceAll(&quot;/&quot;, pathSeparator);\r\n\t\r\n\t\t\ttarget = target.replaceFirst(commonPrefix, &quot;&quot;);\r\n\t\t\tbase = base.replaceFirst(commonPrefix, &quot;&quot;);\r\n\t\r\n\t\t\tList&lt;String&gt; result = new ArrayList&lt;&gt;();\r\n\t\t\tif (isNotEmpty(base))\r\n\t\t\t\tresult.addAll(nCopies(base.split(&quot;/&quot;).length, &quot;..&quot;));\r\n\t\t\tresult.addAll(asList(target.replaceFirst(&quot;^/&quot;, &quot;&quot;).split(&quot;/&quot;)));\r\n\t\r\n\t\t\treturn join(result, pathSeparator);\r\n\t\t}\r\n\t}","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>Passes Dónal's tests, the only change - if no common root it returns target path (it could be already relative)</p>\n\n<pre><code>import static java.util.Arrays.asList;\nimport static java.util.Collections.nCopies;\nimport static org.apache.commons.io.FilenameUtils.normalizeNoEndSeparator;\nimport static org.apache.commons.io.FilenameUtils.separatorsToUnix;\nimport static org.apache.commons.lang3.StringUtils.getCommonPrefix;\nimport static org.apache.commons.lang3.StringUtils.isBlank;\nimport static org.apache.commons.lang3.StringUtils.isNotEmpty;\nimport static org.apache.commons.lang3.StringUtils.join;\n\nimport java.io.File;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class ResourceUtils {\n\n    public static String getRelativePath(String targetPath, String basePath, String pathSeparator) {\n        File baseFile = new File(basePath);\n        if (baseFile.isFile() || !baseFile.exists() &amp;&amp; !basePath.endsWith(\"/\") &amp;&amp; !basePath.endsWith(\"\\\\\"))\n            basePath = baseFile.getParent();\n\n        String target = separatorsToUnix(normalizeNoEndSeparator(targetPath));\n        String base = separatorsToUnix(normalizeNoEndSeparator(basePath));\n\n        String commonPrefix = getCommonPrefix(target, base);\n        if (isBlank(commonPrefix))\n            return targetPath.replaceAll(\"/\", pathSeparator);\n\n        target = target.replaceFirst(commonPrefix, \"\");\n        base = base.replaceFirst(commonPrefix, \"\");\n\n        List&lt;String&gt; result = new ArrayList&lt;&gt;();\n        if (isNotEmpty(base))\n            result.addAll(nCopies(base.split(\"/\").length, \"..\"));\n        result.addAll(asList(target.replaceFirst(\"^/\", \"\").split(\"/\")));\n\n        return join(result, pathSeparator);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":953837,"reputation":4903,"user_id":979493,"display_name":"Ben Hutchison"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491749610,"creation_date":1491749610,"answer_id":43308179,"question_id":204784,"body_markdown":"If you&#39;re writing a Maven plugin, you can use [Plexus&#39; `PathTool`](https://codehaus-plexus.github.io/plexus-utils/apidocs/org/codehaus/plexus/util/PathTool.html):\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import org.codehaus.plexus.util.PathTool;\r\n\r\n    String relativeFilePath = PathTool.getRelativeFilePath(file1, file2);\r\n\r\n","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>If you're writing a Maven plugin, you can use <a href=\"https://codehaus-plexus.github.io/plexus-utils/apidocs/org/codehaus/plexus/util/PathTool.html\" rel=\"nofollow noreferrer\">Plexus' <code>PathTool</code></a>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import org.codehaus.plexus.util.PathTool;\n\nString relativeFilePath = PathTool.getRelativeFilePath(file1, file2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11756172,"reputation":1,"user_id":8603796,"display_name":"alftank"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1511687922,"creation_date":1511687922,"answer_id":47494646,"question_id":204784,"body_markdown":"If Paths is not available for JRE 1.5 runtime or maven plugin\r\n\r\n    package org.afc.util;\r\n    \r\n    import java.io.File;\r\n    import java.util.LinkedList;\r\n    import java.util.List;\r\n    \r\n    public class FileUtil {\r\n    \r\n    \tpublic static String getRelativePath(String basePath, String filePath)  {\r\n    \t\treturn getRelativePath(new File(basePath), new File(filePath));\r\n    \t}\r\n    \r\n    \tpublic static String getRelativePath(File base, File file)  {\r\n    \r\n    \t\tList&lt;String&gt; bases = new LinkedList&lt;String&gt;();\r\n    \t\tbases.add(0, base.getName());\r\n    \t\tfor (File parent = base.getParentFile(); parent != null; parent = parent.getParentFile()) {\r\n    \t\t\tbases.add(0, parent.getName());\r\n    \t\t}\r\n    \r\n    \t\tList&lt;String&gt; files = new LinkedList&lt;String&gt;();\r\n    \t\tfiles.add(0, file.getName());\r\n    \t\tfor (File parent = file.getParentFile(); parent != null; parent = parent.getParentFile()) {\r\n    \t\t\tfiles.add(0, parent.getName());\r\n    \t\t}\r\n    \r\n    \t\tint overlapIndex = 0;\r\n    \t\twhile (overlapIndex &lt; bases.size() &amp;&amp; overlapIndex &lt; files.size() &amp;&amp; bases.get(overlapIndex).equals(files.get(overlapIndex))) {\r\n    \t\t\toverlapIndex++;\r\n    \t\t}\r\n    \r\n    \t\tStringBuilder relativePath = new StringBuilder();\r\n    \t\tfor (int i = overlapIndex; i &lt; bases.size(); i++) {\r\n    \t\t\trelativePath.append(&quot;..&quot;).append(File.separatorChar);\r\n    \t\t}\r\n    \t\t\r\n    \t\tfor (int i = overlapIndex; i &lt; files.size(); i++) {\r\n    \t\t\trelativePath.append(files.get(i)).append(File.separatorChar);\r\n    \t\t}\r\n    \r\n    \t\trelativePath.deleteCharAt(relativePath.length() - 1);\r\n    \t\treturn relativePath.toString();\r\n    \t}\r\n    \r\n    }\r\n","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>If Paths is not available for JRE 1.5 runtime or maven plugin</p>\n\n<pre><code>package org.afc.util;\n\nimport java.io.File;\nimport java.util.LinkedList;\nimport java.util.List;\n\npublic class FileUtil {\n\n    public static String getRelativePath(String basePath, String filePath)  {\n        return getRelativePath(new File(basePath), new File(filePath));\n    }\n\n    public static String getRelativePath(File base, File file)  {\n\n        List&lt;String&gt; bases = new LinkedList&lt;String&gt;();\n        bases.add(0, base.getName());\n        for (File parent = base.getParentFile(); parent != null; parent = parent.getParentFile()) {\n            bases.add(0, parent.getName());\n        }\n\n        List&lt;String&gt; files = new LinkedList&lt;String&gt;();\n        files.add(0, file.getName());\n        for (File parent = file.getParentFile(); parent != null; parent = parent.getParentFile()) {\n            files.add(0, parent.getName());\n        }\n\n        int overlapIndex = 0;\n        while (overlapIndex &lt; bases.size() &amp;&amp; overlapIndex &lt; files.size() &amp;&amp; bases.get(overlapIndex).equals(files.get(overlapIndex))) {\n            overlapIndex++;\n        }\n\n        StringBuilder relativePath = new StringBuilder();\n        for (int i = overlapIndex; i &lt; bases.size(); i++) {\n            relativePath.append(\"..\").append(File.separatorChar);\n        }\n\n        for (int i = overlapIndex; i &lt; files.size(); i++) {\n            relativePath.append(files.get(i)).append(File.separatorChar);\n        }\n\n        relativePath.deleteCharAt(relativePath.length() - 1);\n        return relativePath.toString();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17531452,"reputation":79,"user_id":12715384,"display_name":"nullsector76"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608782014,"creation_date":1608781319,"answer_id":65433687,"question_id":204784,"body_markdown":"I know this is a bit late but, I created a solution that works with any java version.\r\n```\r\n\tpublic static String getRealtivePath(File root, File file) \r\n\t{\r\n\t\tString path = file.getPath();\r\n\t\tString rootPath = root.getPath();\r\n\t\tboolean plus1 = path.contains(File.separator);\r\n\t\treturn path.substring(path.indexOf(rootPath) + rootPath.length() + (plus1 ? 1 : 0));\r\n\t}\r\n ```","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>I know this is a bit late but, I created a solution that works with any java version.</p>\n<pre><code>    public static String getRealtivePath(File root, File file) \n    {\n        String path = file.getPath();\n        String rootPath = root.getPath();\n        boolean plus1 = path.contains(File.separator);\n        return path.substring(path.indexOf(rootPath) + rootPath.length() + (plus1 ? 1 : 0));\n    }\n</code></pre>\n"}],"owner":{"account_id":12007,"reputation":17671,"user_id":23424,"accept_rate":92,"display_name":"VoidPointer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":251618,"favorite_count":0,"down_vote_count":0,"up_vote_count":318,"accepted_answer_id":205655,"answer_count":23,"score":318,"last_activity_date":1672357619,"creation_date":1224078822,"question_id":204784,"body_markdown":"Given two absolute paths, e.g.\r\n\r\n    /var/data/stuff/xyz.dat\r\n    /var/data\r\n\r\nHow can one create a relative path that uses the second path as its base? In the example above, the result should be: `./stuff/xyz.dat`\r\n\r\n","title":"How to construct a relative path in Java from two absolute paths (or URLs)?","body":"<p>Given two absolute paths, e.g.</p>\n\n<pre><code>/var/data/stuff/xyz.dat\n/var/data\n</code></pre>\n\n<p>How can one create a relative path that uses the second path as its base? In the example above, the result should be: <code>./stuff/xyz.dat</code></p>\n"},{"tags":["java","arrays","oop","linear-algebra","complex-numbers"],"answers":[{"tags":[],"owner":{"account_id":8067843,"reputation":3948,"user_id":6081445,"accept_rate":100,"display_name":"wake-0"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672357322,"creation_date":1672356536,"answer_id":74956922,"question_id":74956656,"body_markdown":"I would advice you to take a look at the Apache Commons Numbers implementation: [GitHub][1] You can easily reuse this library.\r\n\r\nAnother approach would be to create a base interface e.g. `MyNumber` which is implemented by a `Complex` class and a `Real` class and one of both is used. As return type you can set `MyNumber` which can handle both.\r\n\r\nOr you can use the same approach as Apache, where the real and the imaginary part are both of type `double`.\r\n\r\nFurthermore, in your code you have `data` and `cData`. I would advice you to only use `data` of type complex, because the real numbers are a subset of the complex numbers. Therefore, every real number can be stored as complex number with an imaginary part of 0.0.\r\n\r\n  [1]: https://github.com/apache/commons-numbers/blob/master/commons-numbers-complex/src/main/java/org/apache/commons/numbers/complex/Complex.java","title":"How to structure a Vector Class that works with real and complex numbers in Java?","body":"<p>I would advice you to take a look at the Apache Commons Numbers implementation: <a href=\"https://github.com/apache/commons-numbers/blob/master/commons-numbers-complex/src/main/java/org/apache/commons/numbers/complex/Complex.java\" rel=\"nofollow noreferrer\">GitHub</a> You can easily reuse this library.</p>\n<p>Another approach would be to create a base interface e.g. <code>MyNumber</code> which is implemented by a <code>Complex</code> class and a <code>Real</code> class and one of both is used. As return type you can set <code>MyNumber</code> which can handle both.</p>\n<p>Or you can use the same approach as Apache, where the real and the imaginary part are both of type <code>double</code>.</p>\n<p>Furthermore, in your code you have <code>data</code> and <code>cData</code>. I would advice you to only use <code>data</code> of type complex, because the real numbers are a subset of the complex numbers. Therefore, every real number can be stored as complex number with an imaginary part of 0.0.</p>\n"},{"tags":[],"owner":{"account_id":18822860,"reputation":301,"user_id":13728460,"display_name":"Levan Apakidze"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672357562,"creation_date":1672357120,"answer_id":74956969,"question_id":74956656,"body_markdown":"By the code snippet you have provided I guess you want to have the ability to mix real value vectors and complex value vectors on the go. Achieving this with a single class may be a bit problematic, so the solution I would propose is next. Create one generic `interface Vector&lt;T&gt;`, create functions for both, `Vector&lt;Double&gt;` and `Vector&lt;Complex&gt;`. After that create two classes which implement their respective functions. for example: `class ComplexVector implements Vector&lt;Complex&gt;` and `class RealVector implements Vector&lt;Double&gt;`.\r\nThrow unsupported operation wherever applicable (like some `java.util.List` implementers do). &lt;br&gt;&lt;br&gt; This approach will give u flexibility to define functions in **vector interface** either using Generic &#39;T&#39; or using specific `double`/`Complex` types wherever you find fit\r\n\r\nEdit: you can have a `bool isComplex()` function in the interface and both children will implement accordingly, which will give you freedom in your implementations. However you should make sure users won&#39;t try to have their own implementations of your `Vector` interface, or your structure may loose its &quot;seamlessness&quot;. Other than that, users will be able to interact with your two child classes directly and interchange between them without problem","title":"How to structure a Vector Class that works with real and complex numbers in Java?","body":"<p>By the code snippet you have provided I guess you want to have the ability to mix real value vectors and complex value vectors on the go. Achieving this with a single class may be a bit problematic, so the solution I would propose is next. Create one generic <code>interface Vector&lt;T&gt;</code>, create functions for both, <code>Vector&lt;Double&gt;</code> and <code>Vector&lt;Complex&gt;</code>. After that create two classes which implement their respective functions. for example: <code>class ComplexVector implements Vector&lt;Complex&gt;</code> and <code>class RealVector implements Vector&lt;Double&gt;</code>.\nThrow unsupported operation wherever applicable (like some <code>java.util.List</code> implementers do). <br><br> This approach will give u flexibility to define functions in <strong>vector interface</strong> either using Generic 'T' or using specific <code>double</code>/<code>Complex</code> types wherever you find fit</p>\n<p>Edit: you can have a <code>bool isComplex()</code> function in the interface and both children will implement accordingly, which will give you freedom in your implementations. However you should make sure users won't try to have their own implementations of your <code>Vector</code> interface, or your structure may loose its &quot;seamlessness&quot;. Other than that, users will be able to interact with your two child classes directly and interchange between them without problem</p>\n"}],"owner":{"account_id":27380780,"reputation":11,"user_id":20885421,"display_name":"Garmadon"},"comment_count":0,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1672583126,"accepted_answer_id":74956969,"answer_count":2,"score":-1,"last_activity_date":1672357562,"creation_date":1672353554,"question_id":74956656,"body_markdown":"I have been attempting to make a linear algebra library in Java. I had a Vector class and Complex Number class already created, where the Vector class already had methods and operations which worked with real numbers (typical **doubles** and **ints**). The Vector class previously had an attribute **data\\[\\]** which contained the values for the numbers in the vector. However I now added other attributes **cData\\[\\]** and **isComplex** - which if the Vector is initialized with a different constructor, **isComplex** is set to true and **cData** contains the Complex values for the Vector. My goal is to make the class as seamless to the user as possible so that they can create a Vector with either **real or complex values with the same class**.\r\n\r\nHowever, I was running into some errors due to the nature of Java. Specifically my **.get()** method would have to have two different return types depending on whether **isComplex** is true or not which is not possible. This is because I was intending to return a real value (**double**) if the Vector was Real and a complex value (**Complex**) if the Vector was initialized as complex. Does anyone have any **ideas** on what I could try or what routes I could take to better structure this class? (attributes/methods/etc)\r\n\r\nSo far my ideas have been\r\n\r\n- To make two different attributes each one containing either the real and imaginary components of numbers\r\n  - Run into the same issue with .get()\r\n- Having a data attribute (array of doubles) and cData attribute (array of Complex numbers) and isComplex boolean and handling methods differently depending on what is the case\r\n  - Still run into the same issue with .get()\r\n- To make the Vector class purely take in Complex Numbers\r\n  - Not sure if this would be the best case for the user\r\n\r\nHere is my current approach and a couple of methods:\r\n\r\n```\r\npublic class Vector {\r\n   private double[] data;\r\n   private Complex[] cData;\r\n   private boolean isComplex = false;\r\n   public final int length;\r\n\r\n   public Vector(double[] vector) {\r\n       this.data = vector;\r\n       this.length = vector.length;\r\n   }\r\n\r\n   public Vector(String[] vector) throws ConstructFormatException {\r\n       Complex[] array = new Complex[vector.length];\r\n       for(int i = 0; i &lt; vector.length; i++){\r\n           array[i] = new Complex(vector[i]);\r\n       }\r\n       this.cData = array;\r\n       this.isComplex = true;\r\n       this.length = vector.length;\r\n   }\r\n\r\n   public void add(Vector vector) throws OperationUndefinedException{\r\n       if(this.isComplex){\r\n           //\r\n       } else {\r\n           MatrixOperation function = (d1, d2) -&gt; {return d1 + d2;};\r\n           applyOperation(vector, function);\r\n       }\r\n   }\r\n\r\n   public double get(int index) throws OperationUndefinedException{\r\n       if(index &gt;= data.length){\r\n           throw new OperationUndefinedException(INDEX_OUT_RANGE);\r\n       }\r\n       return data[index];\r\n   }\r\n}\r\n```","title":"How to structure a Vector Class that works with real and complex numbers in Java?","body":"<p>I have been attempting to make a linear algebra library in Java. I had a Vector class and Complex Number class already created, where the Vector class already had methods and operations which worked with real numbers (typical <strong>doubles</strong> and <strong>ints</strong>). The Vector class previously had an attribute <strong>data[]</strong> which contained the values for the numbers in the vector. However I now added other attributes <strong>cData[]</strong> and <strong>isComplex</strong> - which if the Vector is initialized with a different constructor, <strong>isComplex</strong> is set to true and <strong>cData</strong> contains the Complex values for the Vector. My goal is to make the class as seamless to the user as possible so that they can create a Vector with either <strong>real or complex values with the same class</strong>.</p>\n<p>However, I was running into some errors due to the nature of Java. Specifically my <strong>.get()</strong> method would have to have two different return types depending on whether <strong>isComplex</strong> is true or not which is not possible. This is because I was intending to return a real value (<strong>double</strong>) if the Vector was Real and a complex value (<strong>Complex</strong>) if the Vector was initialized as complex. Does anyone have any <strong>ideas</strong> on what I could try or what routes I could take to better structure this class? (attributes/methods/etc)</p>\n<p>So far my ideas have been</p>\n<ul>\n<li>To make two different attributes each one containing either the real and imaginary components of numbers\n<ul>\n<li>Run into the same issue with .get()</li>\n</ul>\n</li>\n<li>Having a data attribute (array of doubles) and cData attribute (array of Complex numbers) and isComplex boolean and handling methods differently depending on what is the case\n<ul>\n<li>Still run into the same issue with .get()</li>\n</ul>\n</li>\n<li>To make the Vector class purely take in Complex Numbers\n<ul>\n<li>Not sure if this would be the best case for the user</li>\n</ul>\n</li>\n</ul>\n<p>Here is my current approach and a couple of methods:</p>\n<pre><code>public class Vector {\n   private double[] data;\n   private Complex[] cData;\n   private boolean isComplex = false;\n   public final int length;\n\n   public Vector(double[] vector) {\n       this.data = vector;\n       this.length = vector.length;\n   }\n\n   public Vector(String[] vector) throws ConstructFormatException {\n       Complex[] array = new Complex[vector.length];\n       for(int i = 0; i &lt; vector.length; i++){\n           array[i] = new Complex(vector[i]);\n       }\n       this.cData = array;\n       this.isComplex = true;\n       this.length = vector.length;\n   }\n\n   public void add(Vector vector) throws OperationUndefinedException{\n       if(this.isComplex){\n           //\n       } else {\n           MatrixOperation function = (d1, d2) -&gt; {return d1 + d2;};\n           applyOperation(vector, function);\n       }\n   }\n\n   public double get(int index) throws OperationUndefinedException{\n       if(index &gt;= data.length){\n           throw new OperationUndefinedException(INDEX_OUT_RANGE);\n       }\n       return data[index];\n   }\n}\n</code></pre>\n"},{"tags":["python","java"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1672356469,"post_id":74956893,"comment_id":132275728,"body_markdown":"Either varargs as [explained by @shmosel](https://stackoverflow.com/a/74956903/4216641) or a [`List`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html) of something (although the later is a little bit more syntax-heavy).","body":"Either varargs as <a href=\"https://stackoverflow.com/a/74956903/4216641\">explained by @shmosel</a> or a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html\" rel=\"nofollow noreferrer\"><code>List</code></a> of something (although the later is a little bit more syntax-heavy)."}],"answers":[{"tags":[],"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672356322,"creation_date":1672356322,"answer_id":74956903,"question_id":74956893,"body_markdown":"You can use [varargs][1] if they&#39;re all the same type:\r\n\r\n    int sumUp(int... args) {\r\n        int res = 0;\r\n        for (int arg : args)\r\n            res += arg;\r\n        return res;\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/language/varargs.html","title":"Does java have python&#39;s equivalent of *args and **kwargs?","body":"<p>You can use <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/language/varargs.html\" rel=\"nofollow noreferrer\">varargs</a> if they're all the same type:</p>\n<pre><code>int sumUp(int... args) {\n    int res = 0;\n    for (int arg : args)\n        res += arg;\n    return res;\n}\n</code></pre>\n"}],"owner":{"account_id":11786612,"reputation":35,"user_id":8624079,"display_name":"Godswill"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":263,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1672356814,"answer_count":1,"score":0,"last_activity_date":1672356848,"creation_date":1672356229,"question_id":74956893,"body_markdown":"When implementing a java function to accept arbitrary number of arguments, what will be the right way of doing that?\r\n\r\n\r\nIn python, i will do\r\n\r\n```\r\ndef sumUp(*args):\r\n      res = 0\r\n      for arg in args:\r\n         res = res + arg\r\n      return res\r\n\r\nsumUp(12,1)  # return 13\r\nsumUp(12,8,6) # return 26\r\n```\r\nIs there something in java closely equivalent to this without having to pass in a list argument? And what about **kwargs?\r\n","title":"Does java have python&#39;s equivalent of *args and **kwargs?","body":"<p>When implementing a java function to accept arbitrary number of arguments, what will be the right way of doing that?</p>\n<p>In python, i will do</p>\n<pre><code>def sumUp(*args):\n      res = 0\n      for arg in args:\n         res = res + arg\n      return res\n\nsumUp(12,1)  # return 13\nsumUp(12,8,6) # return 26\n</code></pre>\n<p>Is there something in java closely equivalent to this without having to pass in a list argument? And what about **kwargs?</p>\n"},{"tags":["java","pass-by-reference","out-parameters"],"comments":[{"owner":{"account_id":10759610,"reputation":12648,"user_id":7916438,"display_name":"tevemadar"},"score":0,"creation_date":1672420705,"post_id":74956446,"comment_id":132287950,"body_markdown":"Yes, that&#39;s the common trick. In this specific case, you could abuse `StringBuilder` and something from `java.util.concurrent.atomic`, like `AtomicInteger`, but in the general case you need a wrapper, like the array in your invention. While hits are somewhat personalized, I have to point out that https://www.google.com/search?q=java+out+parameter gets me a number of possible duplicates: https://stackoverflow.com/questions/2806545 https://stackoverflow.com/questions/1403921 https://stackoverflow.com/questions/2824910 https://stackoverflow.com/questions/4455693","body":"Yes, that&#39;s the common trick. In this specific case, you could abuse <code>StringBuilder</code> and something from <code>java.util.concurrent.atomic</code>, like <code>AtomicInteger</code>, but in the general case you need a wrapper, like the array in your invention. While hits are somewhat personalized, I have to point out that <a href=\"https://www.google.com/search?q=java+out+parameter\" rel=\"nofollow noreferrer\">google.com/search?q=java+out+parameter</a> gets me a number of possible duplicates: <a href=\"https://stackoverflow.com/questions/2806545\">stackoverflow.com/questions/2806545</a> <a href=\"https://stackoverflow.com/questions/1403921\">stackoverflow.com/questions/1403921</a> <a href=\"https://stackoverflow.com/questions/2824910\">stackoverflow.com/questions/2824910</a> <a href=\"https://stackoverflow.com/questions/4455693\">stackoverflow.com/questions/4455693</a>"},{"owner":{"account_id":10759610,"reputation":12648,"user_id":7916438,"display_name":"tevemadar"},"score":0,"creation_date":1673022865,"post_id":74956446,"comment_id":132411178,"body_markdown":"Does this answer your question? [Does Java have something like C#&#39;s ref and out keywords?](https://stackoverflow.com/questions/2806545/does-java-have-something-like-cs-ref-and-out-keywords)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2806545/does-java-have-something-like-cs-ref-and-out-keywords\">Does Java have something like C#&#39;s ref and out keywords?</a>"}],"answers":[{"comments":[{"owner":{"account_id":17000499,"reputation":48417,"user_id":12299000,"display_name":"kaya3"},"score":0,"creation_date":1672356216,"post_id":74956524,"comment_id":132275691,"body_markdown":"Please read this: https://stackoverflow.com/a/40523/12299000","body":"Please read this: <a href=\"https://stackoverflow.com/a/40523/12299000\">stackoverflow.com/a/40523/12299000</a>"},{"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"score":0,"creation_date":1672356632,"post_id":74956524,"comment_id":132275753,"body_markdown":"Thank you, @kaya3 for pointing out my semantics error. I do believe, however, that my solution will work for the question.","body":"Thank you, @kaya3 for pointing out my semantics error. I do believe, however, that my solution will work for the question."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1672360049,"post_id":74956524,"comment_id":132276271,"body_markdown":"Is this not what the OP is already doing in one of their solutions?","body":"Is this not what the OP is already doing in one of their solutions?"},{"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"score":0,"creation_date":1672410551,"post_id":74956524,"comment_id":132285193,"body_markdown":"@Slaw, I changed the variable `longest` from `String` to `String[]`.","body":"@Slaw, I changed the variable <code>longest</code> from <code>String</code> to <code>String[]</code>."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1672431998,"post_id":74956524,"comment_id":132290467,"body_markdown":"Yes, but the OP says, &quot;_To work around this, I changed the string and integer into single element arrays_&quot;. And then in the immediately following code block they have `String[] longest = { &quot;&quot; };`.","body":"Yes, but the OP says, &quot;<i>To work around this, I changed the string and integer into single element arrays</i>&quot;. And then in the immediately following code block they have <code>String[] longest = { &quot;&quot; };</code>."}],"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"comment_count":5,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1672356729,"creation_date":1672352336,"answer_id":74956524,"question_id":74956446,"body_markdown":"The problem you are having is not really because Java is &quot;pass-by-value&quot;. \r\n\r\nThe problem you are encountering is that Strings are *immutable* and when you assign a new value to the *local* parameter named `longest` it just disappears as soon as it goes out of scope.\r\n\r\nYou can get around this relatively easily by passing an array of length one instead.\r\n\r\n```Java\r\n public void allPrefixes2() {\r\n        String[] longest = {&quot;&quot;};\r\n        int timesUsed = 0;\r\n\r\n        allPrefixesUtil2(longest, timesUsed, root, &quot;&quot;);\r\n\r\n        System.out.println(&quot;Longest common prefix: &quot; + longest);\r\n        System.out.println(&quot;Number of strings: &quot; + timesUsed);\r\n    }\r\n\r\n    public void allPrefixesUtil2(String[] longest, int timesUsed, Node x, String s) {\r\n        for (int i = 0; i &lt; x.next.length; i++) {\r\n            Node nextNode = x.next[i];\r\n            if (nextNode != null &amp;&amp; nextNode.timesUsed &gt;= 2) {\r\n                String str = s + (char) (i + &#39;a&#39;);\r\n                if (str.length() &gt; longest[0].length()) {\r\n                    longest[0] = new String(str);\r\n                    timesUsed = nextNode.timesUsed;\r\n                }\r\n                allPrefixesUtil2(longest, timesUsed, nextNode, str);\r\n            }\r\n        }\r\n    }\r\n```","title":"How can I have out parameters in Java?","body":"<p>The problem you are having is not really because Java is &quot;pass-by-value&quot;.</p>\n<p>The problem you are encountering is that Strings are <em>immutable</em> and when you assign a new value to the <em>local</em> parameter named <code>longest</code> it just disappears as soon as it goes out of scope.</p>\n<p>You can get around this relatively easily by passing an array of length one instead.</p>\n<pre><code> public void allPrefixes2() {\n        String[] longest = {&quot;&quot;};\n        int timesUsed = 0;\n\n        allPrefixesUtil2(longest, timesUsed, root, &quot;&quot;);\n\n        System.out.println(&quot;Longest common prefix: &quot; + longest);\n        System.out.println(&quot;Number of strings: &quot; + timesUsed);\n    }\n\n    public void allPrefixesUtil2(String[] longest, int timesUsed, Node x, String s) {\n        for (int i = 0; i &lt; x.next.length; i++) {\n            Node nextNode = x.next[i];\n            if (nextNode != null &amp;&amp; nextNode.timesUsed &gt;= 2) {\n                String str = s + (char) (i + 'a');\n                if (str.length() &gt; longest[0].length()) {\n                    longest[0] = new String(str);\n                    timesUsed = nextNode.timesUsed;\n                }\n                allPrefixesUtil2(longest, timesUsed, nextNode, str);\n            }\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":20028751,"reputation":83,"user_id":17944655,"display_name":"Miles"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1672356729,"creation_date":1672351491,"question_id":74956446,"body_markdown":"My objective is to recursively iterate a R-way trie, and find the longest common prefix that prefixes at least two strings, and how many strings it concerns. I have written various methods to solve this, but I&#39;m not satisfied with the technical aspects of them.\r\n\r\nExample input: \r\n\r\n`figure, fight, finger, english, entail`\r\n\r\noutput: \r\n\r\n```\r\nLongest prefix: fig\r\n\r\nNumber of Strings: 2\r\n```\r\n\r\nHere&#39;s how I implemented solutions: \r\n\r\n\r\nThe nodes have a `timesUsed` attribute, that increments every time that node is visited when inserting new strings to the trie.\r\n```\r\n    public void allPrefixes() {\r\n        ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n        ArrayList&lt;Integer&gt; timesUsed = new ArrayList&lt;&gt;();\r\n\r\n        allPrefixesUtil(list, timesUsed, root, &quot;&quot;);\r\n\r\n        int longestPrefixIndex = getLongestIndex(list);\r\n\r\n        System.out.println(&quot;Longest common prefix: &quot; + list.get(longestPrefixIndex));\r\n        System.out.println(&quot;Number of strings: &quot; + timesUsed.get(longestPrefixIndex));\r\n    }\r\n\r\n    public void allPrefixesUtil(ArrayList&lt;String&gt; list, ArrayList&lt;Integer&gt; timesUsed, Node x, String s) {\r\n        for (int i = 0; i &lt; x.next.length; i++) {\r\n            if (x.next[i] != null &amp;&amp; x.next[i].timesUsed &gt;= 2) {\r\n                list.add(s + (char) (i + &#39;a&#39;));\r\n                timesUsed.add(x.next[i].timesUsed);\r\n                allPrefixesUtil(list, timesUsed, x.next[i], s + (char) (i + &#39;a&#39;));\r\n            }\r\n        }\r\n    }\r\n```\r\nThe code here adds every prefix that occurs more than once, so the list looks like this: `e, en, f, fi, fig`. I then find the longest among these strings and print it along with the corresponding timesUsed index. This solution uses a lot of space, so I decided to try something else.\r\n\r\nNext, I tried this:\r\n```\r\n    public void allPrefixes2() {\r\n        String longest = &quot;&quot;;\r\n        int timesUsed = 0;\r\n\r\n        allPrefixesUtil2(longest, timesUsed, root, &quot;&quot;);\r\n\r\n        System.out.println(&quot;Longest common prefix: &quot; + longest);\r\n        System.out.println(&quot;Number of strings: &quot; + timesUsed);\r\n    }\r\n\r\n    public void allPrefixesUtil2(String longest, int timesUsed, Node x, String s) {\r\n        for (int i = 0; i &lt; x.next.length; i++) {\r\n            Node nextNode = x.next[i];\r\n            if (nextNode != null &amp;&amp; nextNode.timesUsed &gt;= 2) {\r\n                String str = s + (char) (i + &#39;a&#39;);\r\n                if (str.length() &gt; longest.length()) {\r\n                    longest = new String(str);\r\n                    timesUsed = nextNode.timesUsed;\r\n                }\r\n                allPrefixesUtil2(longest, timesUsed, nextNode, str);\r\n            }\r\n        }\r\n    }\r\n```\r\nInstead of adding every prefix to a list and calculating the longest, I decided to reassign the longest string whenever a longer string is encountered. This obviously did not work as Java is pass-by-value. To work around this, I changed the string and integer into single element arrays.\r\n\r\n```\r\n    public void allPrefixes2() {\r\n        String[] longest = { &quot;&quot; };\r\n        int[] timesUsed = { 0 };\r\n\r\n        allPrefixesUtil2(longest, timesUsed, root, &quot;&quot;);\r\n\r\n        System.out.println(&quot;Longest common prefix: &quot; + longest[0]);\r\n        System.out.println(&quot;Number of strings: &quot; + timesUsed[0]);\r\n    }\r\n```\r\nThis works, but... I&#39;m not sure if it&#39;s clever or stupid. I could not find a better way if I want to use temporary variables.\r\n\r\nI did however lastly make it so that the trie has a `longest` and a `timesUsed` attribute, and just directly pass those into the method. It worked but this time, adding these attributes to the trie did not sit right with me. It&#39;s odd that a generic tree would have those attributes.\r\n\r\nSo what should I do? Which is the best among all these options? What&#39;s better than all three? I&#39;m not sure which is the best conventional and practical method here, except that the first one is not space efficient. ","title":"How can I have out parameters in Java?","body":"<p>My objective is to recursively iterate a R-way trie, and find the longest common prefix that prefixes at least two strings, and how many strings it concerns. I have written various methods to solve this, but I'm not satisfied with the technical aspects of them.</p>\n<p>Example input:</p>\n<p><code>figure, fight, finger, english, entail</code></p>\n<p>output:</p>\n<pre><code>Longest prefix: fig\n\nNumber of Strings: 2\n</code></pre>\n<p>Here's how I implemented solutions:</p>\n<p>The nodes have a <code>timesUsed</code> attribute, that increments every time that node is visited when inserting new strings to the trie.</p>\n<pre><code>    public void allPrefixes() {\n        ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();\n        ArrayList&lt;Integer&gt; timesUsed = new ArrayList&lt;&gt;();\n\n        allPrefixesUtil(list, timesUsed, root, &quot;&quot;);\n\n        int longestPrefixIndex = getLongestIndex(list);\n\n        System.out.println(&quot;Longest common prefix: &quot; + list.get(longestPrefixIndex));\n        System.out.println(&quot;Number of strings: &quot; + timesUsed.get(longestPrefixIndex));\n    }\n\n    public void allPrefixesUtil(ArrayList&lt;String&gt; list, ArrayList&lt;Integer&gt; timesUsed, Node x, String s) {\n        for (int i = 0; i &lt; x.next.length; i++) {\n            if (x.next[i] != null &amp;&amp; x.next[i].timesUsed &gt;= 2) {\n                list.add(s + (char) (i + 'a'));\n                timesUsed.add(x.next[i].timesUsed);\n                allPrefixesUtil(list, timesUsed, x.next[i], s + (char) (i + 'a'));\n            }\n        }\n    }\n</code></pre>\n<p>The code here adds every prefix that occurs more than once, so the list looks like this: <code>e, en, f, fi, fig</code>. I then find the longest among these strings and print it along with the corresponding timesUsed index. This solution uses a lot of space, so I decided to try something else.</p>\n<p>Next, I tried this:</p>\n<pre><code>    public void allPrefixes2() {\n        String longest = &quot;&quot;;\n        int timesUsed = 0;\n\n        allPrefixesUtil2(longest, timesUsed, root, &quot;&quot;);\n\n        System.out.println(&quot;Longest common prefix: &quot; + longest);\n        System.out.println(&quot;Number of strings: &quot; + timesUsed);\n    }\n\n    public void allPrefixesUtil2(String longest, int timesUsed, Node x, String s) {\n        for (int i = 0; i &lt; x.next.length; i++) {\n            Node nextNode = x.next[i];\n            if (nextNode != null &amp;&amp; nextNode.timesUsed &gt;= 2) {\n                String str = s + (char) (i + 'a');\n                if (str.length() &gt; longest.length()) {\n                    longest = new String(str);\n                    timesUsed = nextNode.timesUsed;\n                }\n                allPrefixesUtil2(longest, timesUsed, nextNode, str);\n            }\n        }\n    }\n</code></pre>\n<p>Instead of adding every prefix to a list and calculating the longest, I decided to reassign the longest string whenever a longer string is encountered. This obviously did not work as Java is pass-by-value. To work around this, I changed the string and integer into single element arrays.</p>\n<pre><code>    public void allPrefixes2() {\n        String[] longest = { &quot;&quot; };\n        int[] timesUsed = { 0 };\n\n        allPrefixesUtil2(longest, timesUsed, root, &quot;&quot;);\n\n        System.out.println(&quot;Longest common prefix: &quot; + longest[0]);\n        System.out.println(&quot;Number of strings: &quot; + timesUsed[0]);\n    }\n</code></pre>\n<p>This works, but... I'm not sure if it's clever or stupid. I could not find a better way if I want to use temporary variables.</p>\n<p>I did however lastly make it so that the trie has a <code>longest</code> and a <code>timesUsed</code> attribute, and just directly pass those into the method. It worked but this time, adding these attributes to the trie did not sit right with me. It's odd that a generic tree would have those attributes.</p>\n<p>So what should I do? Which is the best among all these options? What's better than all three? I'm not sure which is the best conventional and practical method here, except that the first one is not space efficient.</p>\n"},{"tags":["java","dependency-injection","dagger-2","dagger"],"comments":[{"owner":{"account_id":97618,"reputation":168086,"user_id":264697,"accept_rate":100,"display_name":"Steven"},"score":0,"creation_date":1627431198,"post_id":68552776,"comment_id":121153217,"body_markdown":"Related: https://stackoverflow.com/questions/52325438/how-to-inject-dependency-to-static-class","body":"Related: <a href=\"https://stackoverflow.com/questions/52325438/how-to-inject-dependency-to-static-class\" title=\"how to inject dependency to static class\">stackoverflow.com/questions/52325438/&hellip;</a>"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1627437784,"post_id":68552776,"comment_id":121154230,"body_markdown":"I mean, it looks like you really should just remove the `static` keyword, provide a MetaDataCache from the Config, and inject the MetaDataCache where you need it.","body":"I mean, it looks like you really should just remove the <code>static</code> keyword, provide a MetaDataCache from the Config, and inject the MetaDataCache where you need it."}],"answers":[{"tags":[],"owner":{"account_id":26645528,"reputation":46,"user_id":20368478,"display_name":"MikeW"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672356377,"creation_date":1672356377,"answer_id":74956910,"question_id":68552776,"body_markdown":"It seems that what you really want is a singleton object.\r\n\r\nRemove all the `static` keywords to convert it to an instance class, and annotate the class with the `@Singleton` scope. If you create a `Component` that also has the `@Singleton` scope, then only one instance will ever be created by said component.","title":"How to refactor static functions for dependency injection?","body":"<p>It seems that what you really want is a singleton object.</p>\n<p>Remove all the <code>static</code> keywords to convert it to an instance class, and annotate the class with the <code>@Singleton</code> scope. If you create a <code>Component</code> that also has the <code>@Singleton</code> scope, then only one instance will ever be created by said component.</p>\n"}],"owner":{"account_id":1949648,"reputation":1315,"user_id":1754038,"accept_rate":85,"display_name":"Frank"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672356377,"creation_date":1627428703,"question_id":68552776,"body_markdown":"We have some legacy code abusing static class variables and functions for caching.\r\nExample:\r\n```\r\npublic class MetaDataCache {\r\n    static LoadingCache&lt;String, GcsMetadata&gt; metadataCache;\r\n\r\n    // initial set up on server start up\r\n    public static void setup(Config config){\r\n                metadataCache =\r\n                CacheBuilder.newBuilder()\r\n                        .refreshAfterWrite(30, TimeUnit.SECONDS)\r\n                        .build(getCacheLoader());\r\n    }\r\n    \r\n    // load and reload the cache\r\n    private static CacheLoader&lt;String, GcsMetadata&gt; getCacheLoader() {}\r\n\r\n    // access cache and get value\r\n    public static GcsMetadata getMetaData(String key) {\r\n        return metadataCache.get(key);\r\n    }\r\n\r\n}\r\npublic class Application {\r\n    public static void main(){\r\n        MetaDataCache.setup(config);\r\n        MetaDataCache.getMetaData(&quot;cacheKey&quot;);\r\n    }\r\n}\r\n```\r\nNow I&#39;m trying refactoring the MetaDataCache class to avoid using static functions for dependency injection with Dagger 2, what&#39;s the best approach? ","title":"How to refactor static functions for dependency injection?","body":"<p>We have some legacy code abusing static class variables and functions for caching.\nExample:</p>\n<pre><code>public class MetaDataCache {\n    static LoadingCache&lt;String, GcsMetadata&gt; metadataCache;\n\n    // initial set up on server start up\n    public static void setup(Config config){\n                metadataCache =\n                CacheBuilder.newBuilder()\n                        .refreshAfterWrite(30, TimeUnit.SECONDS)\n                        .build(getCacheLoader());\n    }\n    \n    // load and reload the cache\n    private static CacheLoader&lt;String, GcsMetadata&gt; getCacheLoader() {}\n\n    // access cache and get value\n    public static GcsMetadata getMetaData(String key) {\n        return metadataCache.get(key);\n    }\n\n}\npublic class Application {\n    public static void main(){\n        MetaDataCache.setup(config);\n        MetaDataCache.getMetaData(&quot;cacheKey&quot;);\n    }\n}\n</code></pre>\n<p>Now I'm trying refactoring the MetaDataCache class to avoid using static functions for dependency injection with Dagger 2, what's the best approach?</p>\n"},{"tags":["java","apache-kafka"],"comments":[{"owner":{"account_id":27381925,"reputation":1,"user_id":20886401,"display_name":"TechStack"},"score":0,"creation_date":1672316007,"post_id":74950183,"comment_id":132265418,"body_markdown":"Sorry the answer got deleted, don&#39;t know how@ Ajay Singh Pundir","body":"Sorry the answer got deleted, don&#39;t know how@ Ajay Singh Pundir"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1672322757,"post_id":74950183,"comment_id":132267236,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1672354978,"post_id":74950183,"comment_id":132275491,"body_markdown":"Why are you writing a consumer instead of using Kafka Connect, anyway?","body":"Why are you writing a consumer instead of using Kafka Connect, anyway?"}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672355856,"creation_date":1672355063,"answer_id":74956785,"question_id":74950183,"body_markdown":"If your consumer is &quot;taking too long&quot; and &quot;doing too much&quot;, then rebalancing the consumer group and making no progress, then you simply need smaller batches rather than 500.\r\n\r\nOtherwise, you need to improve the network connection between your app and the database, which is a hardware problem. ","title":"Saving data to data base while consuming through multiple consumers from a kafka","body":"<p>If your consumer is &quot;taking too long&quot; and &quot;doing too much&quot;, then rebalancing the consumer group and making no progress, then you simply need smaller batches rather than 500.</p>\n<p>Otherwise, you need to improve the network connection between your app and the database, which is a hardware problem.</p>\n"}],"owner":{"account_id":27381925,"reputation":1,"user_id":20886401,"display_name":"TechStack"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672355856,"creation_date":1672311183,"question_id":74950183,"body_markdown":"I am new to kafka the problem i am facing is that I have 2 consumer that are consuming the data in batches from the kafka topic and want to save all the data fetched by each consumer to db. How to achieve that?  \r\nIn the properties file listner.type=batch and max-poll-records=500 is set.\r\nI have created a \r\nSave message method that is  defined in the service class and i am calling the same method from both the consumer. While saving the records it is taking too much time.","title":"Saving data to data base while consuming through multiple consumers from a kafka","body":"<p>I am new to kafka the problem i am facing is that I have 2 consumer that are consuming the data in batches from the kafka topic and want to save all the data fetched by each consumer to db. How to achieve that?<br />\nIn the properties file listner.type=batch and max-poll-records=500 is set.\nI have created a\nSave message method that is  defined in the service class and i am calling the same method from both the consumer. While saving the records it is taking too much time.</p>\n"},{"tags":["java","json","graphql","graphql-java","dataloader"],"answers":[{"tags":[],"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672355522,"creation_date":1672355522,"answer_id":74956836,"question_id":74871066,"body_markdown":"The question is too broad to answer concretely, but here&#39;s my best attempt.\r\n\r\n1. While there isn&#39;t a definitive answer on 1 complex input argument vs multiple simpler arguments, 1 complex argument is generally more desirable as it&#39;s easier for the clients to pass a single variable, and it keeps the GraphQL files smaller. This may be more interesting for mutations, but it is a good heuristic regardless. See the logic explained it more detail e.g. in [this article][1]. \r\n\r\n2. The logic explained above echoes your own observations\r\n\r\n3. For this specific scenario you listed, I don&#39;t see anything of importance for performance. You seem to fetch the whole list in one go (no N+1), so not much different from what you&#39;re doing for your REST endpoint. Now, I can&#39;t say how expensive it is to fetch the lower-level fields (e.g. whether you need JOINs or network calls or whatever), but if there&#39;s any non-trivial logic, you may want to optimize it by [looking ahead][2] into the sub-selection before resolving your top-level fields.\r\n\r\n\r\n  [1]: https://www.apollographql.com/blog/graphql/basics/designing-graphql-mutations/\r\n  [2]: https://www.graphql-java.com/blog/deep-dive-data-fetcher-results","title":"GraphQL Query taking in multiple lists as arguments","body":"<p>The question is too broad to answer concretely, but here's my best attempt.</p>\n<ol>\n<li><p>While there isn't a definitive answer on 1 complex input argument vs multiple simpler arguments, 1 complex argument is generally more desirable as it's easier for the clients to pass a single variable, and it keeps the GraphQL files smaller. This may be more interesting for mutations, but it is a good heuristic regardless. See the logic explained it more detail e.g. in <a href=\"https://www.apollographql.com/blog/graphql/basics/designing-graphql-mutations/\" rel=\"nofollow noreferrer\">this article</a>.</p>\n</li>\n<li><p>The logic explained above echoes your own observations</p>\n</li>\n<li><p>For this specific scenario you listed, I don't see anything of importance for performance. You seem to fetch the whole list in one go (no N+1), so not much different from what you're doing for your REST endpoint. Now, I can't say how expensive it is to fetch the lower-level fields (e.g. whether you need JOINs or network calls or whatever), but if there's any non-trivial logic, you may want to optimize it by <a href=\"https://www.graphql-java.com/blog/deep-dive-data-fetcher-results\" rel=\"nofollow noreferrer\">looking ahead</a> into the sub-selection before resolving your top-level fields.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":4177544,"reputation":246,"user_id":3423611,"display_name":"jkasper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":334,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74956836,"answer_count":1,"score":0,"last_activity_date":1672355522,"creation_date":1671593731,"question_id":74871066,"body_markdown":"This is about adding GraphQL to an existing Java api which takes in multiple lists as input.\r\n\r\n**Background**:\r\n\r\nI have an existing Java based REST API `getFooInformationByRecognizer` which takes in a list of recognizers, where each recognizer object contains an id and it&#39;s type and returns information corresponding to each id.\r\nThe only 3 types possible are A, B or C. The input can be any combination of these types.\r\n\r\nEg:\r\n\r\n \r\n\r\n    [{&quot;id&quot;: &quot;1&quot;, &quot;type&quot;: &quot;A&quot; }, {&quot;id&quot;: &quot;2&quot;, &quot;type&quot;: &quot;B&quot;},{&quot;id&quot;: &quot;3&quot;, &quot;type&quot;: &quot;C&quot;}, {&quot;id&quot;: &quot;4&quot;, &quot;type&quot;: &quot;A&quot;}, {&quot;id&quot;:&quot;5&quot;, &quot;type&quot;: &quot;B&quot;}]\r\n\r\nHere&#39;s it&#39;s Java representation: \r\n\r\n    class FooRecognizer{\r\n         String id;\r\n         String FooType;\r\n    }\r\n\r\n\r\nThis api does a bit of processing. \r\nFirst extracts out all the input that has ids of type A and fetches information corresponding to those ids.\r\nSimilarly, extract out the ids that has type B and fetches information corresponding to those ids and similarly for C.\r\nSo, it fetches data from 3 different sources and finally collates them to a single map and returns.\r\nEg: \r\n\r\n    ids of type A --&gt; A SERVICE -&gt; &lt;DATA SOURCE FOR A&gt;\r\n    ids of type B --&gt; B SERVICE --&gt; &lt;DATA SOURCE FOR B&gt;\r\n    ids of type C --&gt; C SERVICE --&gt; &lt;DATA SOURCE FOR C&gt;\r\n\r\nFinally does this: \r\n A information + B information + C information and puts this in a Java Hashmap.\r\n\r\n\r\n\r\nThe Java representation of the request to this service is: \r\n\r\n    class FooRequest{\r\n       private Bar bar;\r\n       List&lt;FooRecognizer&gt; list;\r\n    }\r\n\r\nThe Java representation of the response object from the service is: \r\n\r\n    class FooInformationResponse{\r\n       private Map&lt;String, FooRecognizer&gt; fooInformationCollated;\r\n    }\r\n\r\nSample JSON output of the response is:\r\n\r\n   \r\n\r\n     &quot;output&quot;:{\r\n        &quot;fooInformationCollated&quot;:{\r\n        &quot;1&quot;:{\r\n           &quot;someProperty&quot;: &quot;somePropertyValue&quot;\r\n           &quot;listOfNestedProperties&quot;: [{&quot;x&quot;: &quot;xValue&quot;, &quot;y&quot;: &quot;yValue&quot;, &quot;z&quot;,&quot;zValue&quot;]\r\n           &quot;nestedProperty&quot;:{\r\n              &quot;anotherProperty&quot;:{\r\n                &quot;furtherNestedProperty&quot;: &quot;value&quot;\r\n              }\r\n            }\r\n          }\r\n       &quot;2&quot;:{\r\n            &quot;someProperty&quot;: &quot;somePropertyValue&quot;\r\n            &quot;listOfNestedProperties&quot;: [{&quot;a&quot;: &quot;aValue&quot;, &quot;b&quot;: &quot;bValue&quot;, &quot;c&quot;,&quot;cValue&quot;]\r\n            &quot;nestedProperty&quot;:{\r\n               &quot;anotherProperty&quot;:{\r\n                 &quot;furtherNestedProperty&quot;: &quot;value&quot;\r\n              }\r\n            }\r\n          }\r\n        }... and so on for other ids in the input\r\n\r\nNow, I want to convert this service to GraphQL and here is my query.\r\n\r\n    query{\r\n      getFooInformationByRecognizer(filterBy:{\r\n        fooRecognizer: [{\r\n                id: &quot;1&quot;,\r\n                fooType: A\r\n            }],\r\n            bar: {\r\n                barId: &quot;someId&quot;,\r\n                ...&lt;other bar info&gt;\r\n            }\r\n      }){\r\n        fooInformationCollated{\r\n          id\r\n          fooInformation{\r\n            someProperty\r\n            listOfNestedProperties\r\n            nestedProperty{\r\n             anotherProperty{\r\n                furtherNestedProperty\r\n              }\r\n            }\r\n    \r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\nHere is my GraphQL schema:\r\n\r\n    type Query{\r\n        getFooInfoByRecognizer (filterBy: getFooByRecognizerTypeFilter!):getFooByRecognizerTypeFilterResponse\r\n    }\r\n    \r\n    input getFooByIdentifierTypeFilter{\r\n        bar: Bar!\r\n        fooIdentifiers: [FooIdentifier!]!\r\n    }\r\n    \r\n    input Bar{\r\n        barId: String!\r\n        ....\r\n    }\r\n    \r\n    \r\n    input FooIdentifier{\r\n        id: String!\r\n        fooIdType: fooIdtype!\r\n    }\r\n    \r\n    enum fooIdType{\r\n        A\r\n        B\r\n        C\r\n    }\r\n\r\nI have a few questions here:\r\n\r\n 1. Would this be the best way / best practice to represent this query?  Or should I model my query to be able to take in 3 separate lists. Eg: `query getFooInformationByRecognizer(barId, listOfAs, listOfBs, listOfCs)`.  Any other choice that I have to query / model?\r\n2. I found having a complex input type as the easiest. In general, is there any specific reason to choose complex input type over other choices or vice-versa?\r\n3. Is there any thing related to query **performance** that I should be concerned with? I&#39;ve tried looking into **DataLoader / BatchLoading** but that doesn&#39;t quite seem to fit the case. I don&#39;t think N+1 problem should be an issue as I will also create separate individual resolvers for A, B and C but the query as can be seen does not make further calls to back-end once JSON is returned in response.","title":"GraphQL Query taking in multiple lists as arguments","body":"<p>This is about adding GraphQL to an existing Java api which takes in multiple lists as input.</p>\n<p><strong>Background</strong>:</p>\n<p>I have an existing Java based REST API <code>getFooInformationByRecognizer</code> which takes in a list of recognizers, where each recognizer object contains an id and it's type and returns information corresponding to each id.\nThe only 3 types possible are A, B or C. The input can be any combination of these types.</p>\n<p>Eg:</p>\n<pre><code>[{&quot;id&quot;: &quot;1&quot;, &quot;type&quot;: &quot;A&quot; }, {&quot;id&quot;: &quot;2&quot;, &quot;type&quot;: &quot;B&quot;},{&quot;id&quot;: &quot;3&quot;, &quot;type&quot;: &quot;C&quot;}, {&quot;id&quot;: &quot;4&quot;, &quot;type&quot;: &quot;A&quot;}, {&quot;id&quot;:&quot;5&quot;, &quot;type&quot;: &quot;B&quot;}]\n</code></pre>\n<p>Here's it's Java representation:</p>\n<pre><code>class FooRecognizer{\n     String id;\n     String FooType;\n}\n</code></pre>\n<p>This api does a bit of processing.\nFirst extracts out all the input that has ids of type A and fetches information corresponding to those ids.\nSimilarly, extract out the ids that has type B and fetches information corresponding to those ids and similarly for C.\nSo, it fetches data from 3 different sources and finally collates them to a single map and returns.\nEg:</p>\n<pre><code>ids of type A --&gt; A SERVICE -&gt; &lt;DATA SOURCE FOR A&gt;\nids of type B --&gt; B SERVICE --&gt; &lt;DATA SOURCE FOR B&gt;\nids of type C --&gt; C SERVICE --&gt; &lt;DATA SOURCE FOR C&gt;\n</code></pre>\n<p>Finally does this:\nA information + B information + C information and puts this in a Java Hashmap.</p>\n<p>The Java representation of the request to this service is:</p>\n<pre><code>class FooRequest{\n   private Bar bar;\n   List&lt;FooRecognizer&gt; list;\n}\n</code></pre>\n<p>The Java representation of the response object from the service is:</p>\n<pre><code>class FooInformationResponse{\n   private Map&lt;String, FooRecognizer&gt; fooInformationCollated;\n}\n</code></pre>\n<p>Sample JSON output of the response is:</p>\n<pre><code> &quot;output&quot;:{\n    &quot;fooInformationCollated&quot;:{\n    &quot;1&quot;:{\n       &quot;someProperty&quot;: &quot;somePropertyValue&quot;\n       &quot;listOfNestedProperties&quot;: [{&quot;x&quot;: &quot;xValue&quot;, &quot;y&quot;: &quot;yValue&quot;, &quot;z&quot;,&quot;zValue&quot;]\n       &quot;nestedProperty&quot;:{\n          &quot;anotherProperty&quot;:{\n            &quot;furtherNestedProperty&quot;: &quot;value&quot;\n          }\n        }\n      }\n   &quot;2&quot;:{\n        &quot;someProperty&quot;: &quot;somePropertyValue&quot;\n        &quot;listOfNestedProperties&quot;: [{&quot;a&quot;: &quot;aValue&quot;, &quot;b&quot;: &quot;bValue&quot;, &quot;c&quot;,&quot;cValue&quot;]\n        &quot;nestedProperty&quot;:{\n           &quot;anotherProperty&quot;:{\n             &quot;furtherNestedProperty&quot;: &quot;value&quot;\n          }\n        }\n      }\n    }... and so on for other ids in the input\n</code></pre>\n<p>Now, I want to convert this service to GraphQL and here is my query.</p>\n<pre><code>query{\n  getFooInformationByRecognizer(filterBy:{\n    fooRecognizer: [{\n            id: &quot;1&quot;,\n            fooType: A\n        }],\n        bar: {\n            barId: &quot;someId&quot;,\n            ...&lt;other bar info&gt;\n        }\n  }){\n    fooInformationCollated{\n      id\n      fooInformation{\n        someProperty\n        listOfNestedProperties\n        nestedProperty{\n         anotherProperty{\n            furtherNestedProperty\n          }\n        }\n\n      }\n    }\n  }\n}\n</code></pre>\n<p>Here is my GraphQL schema:</p>\n<pre><code>type Query{\n    getFooInfoByRecognizer (filterBy: getFooByRecognizerTypeFilter!):getFooByRecognizerTypeFilterResponse\n}\n\ninput getFooByIdentifierTypeFilter{\n    bar: Bar!\n    fooIdentifiers: [FooIdentifier!]!\n}\n\ninput Bar{\n    barId: String!\n    ....\n}\n\n\ninput FooIdentifier{\n    id: String!\n    fooIdType: fooIdtype!\n}\n\nenum fooIdType{\n    A\n    B\n    C\n}\n</code></pre>\n<p>I have a few questions here:</p>\n<ol>\n<li>Would this be the best way / best practice to represent this query?  Or should I model my query to be able to take in 3 separate lists. Eg: <code>query getFooInformationByRecognizer(barId, listOfAs, listOfBs, listOfCs)</code>.  Any other choice that I have to query / model?</li>\n<li>I found having a complex input type as the easiest. In general, is there any specific reason to choose complex input type over other choices or vice-versa?</li>\n<li>Is there any thing related to query <strong>performance</strong> that I should be concerned with? I've tried looking into <strong>DataLoader / BatchLoading</strong> but that doesn't quite seem to fit the case. I don't think N+1 problem should be an issue as I will also create separate individual resolvers for A, B and C but the query as can be seen does not make further calls to back-end once JSON is returned in response.</li>\n</ol>\n"},{"tags":["java","arrays","sorting","data-structures","bubble-sort"],"answers":[{"tags":[],"owner":{"account_id":17762478,"reputation":30,"user_id":12898167,"display_name":"Guilherme Augusto De Sousa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672353675,"creation_date":1672353560,"answer_id":74956657,"question_id":74956589,"body_markdown":"Your function is correct, but your print is wrong, you ordered your arr5 you should print him after all iterations, your println is inside one of the for while it still ordering.\r\n\r\nHere&#39;s a print that I put println outside of your function.\r\n\r\n[Code][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nO3QR.png\r\n\r\nIt&#39;s not correct formated but its what I could make Right now\r\n\r\n    public class BubbleSort {\r\n       public static void main(String[] args) {\r\n          int[] arr5 = {2, 34, 65, 65, 20, 32, 45};\r\n          bubbleSort(arr5, 5);\r\n          \r\n        int n = arr5.length;\r\n        for (int i = 0; i &lt; n; ++i)\r\n            System.out.print(arr5[i] + &quot; &quot;);\r\n        System.out.println();\r\n       }\r\n    \r\n       public static void bubbleSort(int[] arr, int id) {\r\n          for (int i = 0; i &lt; arr.length; i++) {\r\n             for (int j = 0; j &lt; arr.length - 1; j++) {\r\n                if (arr[j] &gt; arr[j + 1]) {\r\n                   int tmp = arr[j + 1];\r\n                   arr[j + 1] = arr[j];\r\n                   arr[j] = tmp;\r\n                }\r\n             }\r\n             \r\n          }\r\n       }\r\n    }","title":"Bubble sort algorithm issue when the size of array is seven","body":"<p>Your function is correct, but your print is wrong, you ordered your arr5 you should print him after all iterations, your println is inside one of the for while it still ordering.</p>\n<p>Here's a print that I put println outside of your function.</p>\n<p><a href=\"https://i.stack.imgur.com/nO3QR.png\" rel=\"nofollow noreferrer\">Code</a></p>\n<p>It's not correct formated but its what I could make Right now</p>\n<pre><code>public class BubbleSort {\n   public static void main(String[] args) {\n      int[] arr5 = {2, 34, 65, 65, 20, 32, 45};\n      bubbleSort(arr5, 5);\n      \n    int n = arr5.length;\n    for (int i = 0; i &lt; n; ++i)\n        System.out.print(arr5[i] + &quot; &quot;);\n    System.out.println();\n   }\n\n   public static void bubbleSort(int[] arr, int id) {\n      for (int i = 0; i &lt; arr.length; i++) {\n         for (int j = 0; j &lt; arr.length - 1; j++) {\n            if (arr[j] &gt; arr[j + 1]) {\n               int tmp = arr[j + 1];\n               arr[j + 1] = arr[j];\n               arr[j] = tmp;\n            }\n         }\n         \n      }\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26531017,"reputation":701,"user_id":20163209,"display_name":"Wolric"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672355327,"creation_date":1672355327,"answer_id":74956813,"question_id":74956589,"body_markdown":"You have to think how BubbleSort really works.\r\nYou are checking in your `if` condition if the current element at position `j` is greater than the element at position `j+1`. If that condition isn&#39;t met the elements don&#39;t swap.\r\n\r\nYour condition makes sure, that after each `i`th iteration the biggest element is at the end of your array.\r\n\r\nAs you go along and check in each iteration the `i`th element of your array you may encounter, what you consider *weird* values. Looking at your first array. These are the steps in each iteration:\r\n\r\n```lang-java\r\narr = {2, 34, 65, 65, 10, 32, 45};\r\n\r\n// arr                               i\r\n// {2, 34, 65, 10, 32, 45, 65};  arr[0] = 2\r\n// {2, 34, 10, 32, 45, 65, 65};  arr[1] = 34\r\n// {2, 10, 32, 34, 45, 65, 65};  arr[2] = 32\r\n// {2, 10, 32, 34, 45, 65, 65};  arr[3] = 34\r\n// {2, 10, 32, 34, 45, 65, 65};  arr[4] = 45\r\n// {2, 10, 32, 34, 45, 65, 65};  arr[5] = 65\r\n// {2, 10, 32, 34, 45, 65, 65};  arr[6] = 65\r\n```\r\n\r\nThe reason why at `i=1` the element of `arr` is `34` is because when checked you compared `34 &gt; 65` which is False, thus `34` stayed at position `1`.","title":"Bubble sort algorithm issue when the size of array is seven","body":"<p>You have to think how BubbleSort really works.\nYou are checking in your <code>if</code> condition if the current element at position <code>j</code> is greater than the element at position <code>j+1</code>. If that condition isn't met the elements don't swap.</p>\n<p>Your condition makes sure, that after each <code>i</code>th iteration the biggest element is at the end of your array.</p>\n<p>As you go along and check in each iteration the <code>i</code>th element of your array you may encounter, what you consider <em>weird</em> values. Looking at your first array. These are the steps in each iteration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>arr = {2, 34, 65, 65, 10, 32, 45};\n\n// arr                               i\n// {2, 34, 65, 10, 32, 45, 65};  arr[0] = 2\n// {2, 34, 10, 32, 45, 65, 65};  arr[1] = 34\n// {2, 10, 32, 34, 45, 65, 65};  arr[2] = 32\n// {2, 10, 32, 34, 45, 65, 65};  arr[3] = 34\n// {2, 10, 32, 34, 45, 65, 65};  arr[4] = 45\n// {2, 10, 32, 34, 45, 65, 65};  arr[5] = 65\n// {2, 10, 32, 34, 45, 65, 65};  arr[6] = 65\n</code></pre>\n<p>The reason why at <code>i=1</code> the element of <code>arr</code> is <code>34</code> is because when checked you compared <code>34 &gt; 65</code> which is False, thus <code>34</code> stayed at position <code>1</code>.</p>\n"}],"owner":{"account_id":25634531,"reputation":3,"user_id":19404328,"display_name":"henson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74956657,"answer_count":2,"score":-1,"last_activity_date":1672355327,"creation_date":1672352914,"question_id":74956589,"body_markdown":"```\r\npublic class BubbleSort {\r\n   public static void main(String[] args) {\r\n      int[] arr1 = {2, 34, 65, 65, 10, 32, 45};\r\n      int[] arr2 = {2, 65, 65, 10, 32, 45};\r\n      int[] arr3 = {2, 34, 65, 65, 32, 45};\r\n      int[] arr4 = {2, 12, 15, 34, 65, 65, 32, 45};\r\n      int[] arr5 = {2, 34, 65, 65, 20, 32, 45};\r\n      bubbleSort(arr1, 1);\r\n      bubbleSort(arr2, 2);\r\n      bubbleSort(arr3, 3);\r\n      bubbleSort(arr4, 4);\r\n      bubbleSort(arr5, 5);\r\n   }\r\n\r\n   public static void bubbleSort(int[] arr, int id) {\r\n      for (int i = 0; i &lt; arr.length; i++) {\r\n         for (int j = 0; j &lt; arr.length - 1; j++) {\r\n            if (arr[j] &gt; arr[j + 1]) {\r\n               int tmp = arr[j + 1];\r\n               arr[j + 1] = arr[j];\r\n               arr[j] = tmp;\r\n            }\r\n         }\r\n         System.out.println(&quot;This is Arr &quot; + id + &quot; &quot; + arr[i]);\r\n      }\r\n   }\r\n}\r\n\r\n```\r\n\r\n\r\nI am having an issue with my bubble sort implementation in java where I am sorting in ascending mode but as you can see when you run `bubbleSort(arr1)` and `bubbleSort(arr5)` it is returning weird values and it&#39;s not the result I&#39;m expecting. What seems to be the problem with this?\r\n\r\n**Results**\r\n\r\n[arr1 result](https://i.stack.imgur.com/WcH6J.png)\r\n[arr5 result](https://i.stack.imgur.com/SESR6.png)","title":"Bubble sort algorithm issue when the size of array is seven","body":"<pre><code>public class BubbleSort {\n   public static void main(String[] args) {\n      int[] arr1 = {2, 34, 65, 65, 10, 32, 45};\n      int[] arr2 = {2, 65, 65, 10, 32, 45};\n      int[] arr3 = {2, 34, 65, 65, 32, 45};\n      int[] arr4 = {2, 12, 15, 34, 65, 65, 32, 45};\n      int[] arr5 = {2, 34, 65, 65, 20, 32, 45};\n      bubbleSort(arr1, 1);\n      bubbleSort(arr2, 2);\n      bubbleSort(arr3, 3);\n      bubbleSort(arr4, 4);\n      bubbleSort(arr5, 5);\n   }\n\n   public static void bubbleSort(int[] arr, int id) {\n      for (int i = 0; i &lt; arr.length; i++) {\n         for (int j = 0; j &lt; arr.length - 1; j++) {\n            if (arr[j] &gt; arr[j + 1]) {\n               int tmp = arr[j + 1];\n               arr[j + 1] = arr[j];\n               arr[j] = tmp;\n            }\n         }\n         System.out.println(&quot;This is Arr &quot; + id + &quot; &quot; + arr[i]);\n      }\n   }\n}\n\n</code></pre>\n<p>I am having an issue with my bubble sort implementation in java where I am sorting in ascending mode but as you can see when you run <code>bubbleSort(arr1)</code> and <code>bubbleSort(arr5)</code> it is returning weird values and it's not the result I'm expecting. What seems to be the problem with this?</p>\n<p><strong>Results</strong></p>\n<p><a href=\"https://i.stack.imgur.com/WcH6J.png\" rel=\"nofollow noreferrer\">arr1 result</a>\n<a href=\"https://i.stack.imgur.com/SESR6.png\" rel=\"nofollow noreferrer\">arr5 result</a></p>\n"},{"tags":["java","debugging","intellij-idea"],"comments":[{"owner":{"account_id":1957068,"reputation":22025,"user_id":1759845,"accept_rate":65,"display_name":"BackSlash"},"score":4,"creation_date":1577957065,"post_id":59560903,"comment_id":105289648,"body_markdown":"Did you check [the docs?](https://www.jetbrains.com/help/idea/stepping-through-the-program.html#)","body":"Did you check <a href=\"https://www.jetbrains.com/help/idea/stepping-through-the-program.html#\" rel=\"nofollow noreferrer\">the docs?</a>"},{"owner":{"account_id":6701767,"reputation":47952,"user_id":5168011,"accept_rate":100,"display_name":"Guy"},"score":3,"creation_date":1577957078,"post_id":59560903,"comment_id":105289652,"body_markdown":"https://www.jetbrains.com/help/idea/stepping-through-the-program.html","body":"<a href=\"https://www.jetbrains.com/help/idea/stepping-through-the-program.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/stepping-through-the-program.html</a>"},{"owner":{"account_id":7466220,"reputation":573,"user_id":5675692,"accept_rate":100,"display_name":"Ashvin Sharma"},"score":0,"creation_date":1577957137,"post_id":59560903,"comment_id":105289671,"body_markdown":"https://www.jetbrains.com/help/idea/stepping-through-the-program.html#force-step-into","body":"<a href=\"https://www.jetbrains.com/help/idea/stepping-through-the-program.html#force-step-into\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>"},{"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":1,"creation_date":1577957438,"post_id":59560903,"comment_id":105289786,"body_markdown":"I don&#39;t support all these downvotes based on it being a bad question.  On the other hand, if it&#39;s a duplicate, then someone should hammer it shut now.","body":"I don&#39;t support all these downvotes based on it being a bad question.  On the other hand, if it&#39;s a duplicate, then someone should hammer it shut now."}],"answers":[{"tags":[],"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"comment_count":0,"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1577957240,"creation_date":1577957240,"answer_id":59560962,"question_id":59560903,"body_markdown":"From my own observation using the IntelliJ debugger over the years, if you try to step into a method call on a given line of code, the following will happen:\r\n\r\n - if the code being called be your _own_ code, then the debugger will step into that method\r\n - if the code being called be some third party library, then the debugger will ignore your request, and instead step over that line\r\n\r\nBy telling IntelliJ to force step into a line, in the case of a third party method, it will then try to find source code for that method.  If it _can&#39;t_ find source code, then it might show you an auto generated stub based on the byte code/library.  But, there may not be any code shown, or if there is, it would be IntelliJ&#39;s best guess based on byte code.","title":"What is the difference between &quot;Step Into&quot; and &quot;Force Step Into&quot; in the IntelliJ IDEA debugger?","body":"<p>From my own observation using the IntelliJ debugger over the years, if you try to step into a method call on a given line of code, the following will happen:</p>\n\n<ul>\n<li>if the code being called be your <em>own</em> code, then the debugger will step into that method</li>\n<li>if the code being called be some third party library, then the debugger will ignore your request, and instead step over that line</li>\n</ul>\n\n<p>By telling IntelliJ to force step into a line, in the case of a third party method, it will then try to find source code for that method.  If it <em>can't</em> find source code, then it might show you an auto generated stub based on the byte code/library.  But, there may not be any code shown, or if there is, it would be IntelliJ's best guess based on byte code.</p>\n"}],"owner":{"account_id":9209603,"reputation":231,"user_id":6843409,"display_name":"Tejpal Rebari"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4195,"favorite_count":0,"down_vote_count":5,"up_vote_count":23,"accepted_answer_id":59560962,"answer_count":1,"score":18,"last_activity_date":1672354697,"creation_date":1577956944,"question_id":59560903,"body_markdown":"What is the difference between step into and force step into in debugging?\r\n\r\n\r\n","title":"What is the difference between &quot;Step Into&quot; and &quot;Force Step Into&quot; in the IntelliJ IDEA debugger?","body":"<p>What is the difference between step into and force step into in debugging?</p>\n"},{"tags":["java","syntax"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1672350374,"post_id":74956203,"comment_id":132274515,"body_markdown":"It is not Java, but C#","body":"It is not Java, but C#"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1672350584,"post_id":74956203,"comment_id":132274572,"body_markdown":"Regardless, I stay away from YouTube tutorials as they are usually lousy.  This one is no exception.  For one thing, the black background makes it hard to read.  I find books better for learning just about anything.","body":"Regardless, I stay away from YouTube tutorials as they are usually lousy.  This one is no exception.  For one thing, the black background makes it hard to read.  I find books better for learning just about anything."}],"answers":[{"tags":[],"owner":{"account_id":19579941,"reputation":529,"user_id":14329228,"display_name":"Szyszka947"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672350379,"creation_date":1672350379,"answer_id":74956322,"question_id":74956203,"body_markdown":"    public void replacePixel(Pixel[,] pixels) {....}\r\n\r\nIm not sure if this is valid for Java, but in C#:\r\n\r\n`[,]` here means that as an argument you want to get two-dimensional array. If you want three-dimensional array you can use `[,,]` and so on.\r\n\r\n    void saveClicked(){\r\n        file?.load(image);\r\n    }\r\n\r\nHere `?` is a conditional operator that says: if file is not null then do `file.load(image)`. Otherwise, if file is null do nothing. This can be converted to:\r\n\r\n    void saveClicked(){\r\n    \tif(file != null){\r\n    \t\tfile.load(image);\r\n    \t}\r\n    }","title":"Wonder about syntax and language for two code examples","body":"<pre><code>public void replacePixel(Pixel[,] pixels) {....}\n</code></pre>\n<p>Im not sure if this is valid for Java, but in C#:</p>\n<p><code>[,]</code> here means that as an argument you want to get two-dimensional array. If you want three-dimensional array you can use <code>[,,]</code> and so on.</p>\n<pre><code>void saveClicked(){\n    file?.load(image);\n}\n</code></pre>\n<p>Here <code>?</code> is a conditional operator that says: if file is not null then do <code>file.load(image)</code>. Otherwise, if file is null do nothing. This can be converted to:</p>\n<pre><code>void saveClicked(){\n    if(file != null){\n        file.load(image);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27386190,"reputation":11,"user_id":20889942,"display_name":"Fibien"},"comment_count":2,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1672354944,"accepted_answer_id":74956322,"answer_count":1,"score":0,"last_activity_date":1672354251,"creation_date":1672349239,"question_id":74956203,"body_markdown":"I watched a video about composition and inheritance. \r\nIn this video I saw two different examples of code syntax that I have not seen before.\r\n\r\nGenerally the code looks like java but I don&#39;t recognize these two code snippets. \r\n\r\nWould appriciate if someone would explain what the code does and if the code is java or another language. \r\nThanks!\r\n\r\n---\r\n\r\nFirst code:\r\n```\r\npublic void replacePixel(Pixel[,] pixels] {....}\r\n```\r\n\r\nHere it is the syntax `[,]` that is new to me. \r\nWhat does it do?\r\n\r\n---\r\n\r\nSecond code:\r\n```\r\nvoid saveClicked(){\r\n    file?.load(image);\r\n}\r\n```\r\n\r\nHere is is the syntax `?.`\r\nWhat does it do?\r\n\r\n\r\nTried to use a online java compiler and the syntax did not seem to work. ","title":"Wonder about syntax and language for two code examples","body":"<p>I watched a video about composition and inheritance.\nIn this video I saw two different examples of code syntax that I have not seen before.</p>\n<p>Generally the code looks like java but I don't recognize these two code snippets.</p>\n<p>Would appriciate if someone would explain what the code does and if the code is java or another language.\nThanks!</p>\n<hr />\n<p>First code:</p>\n<pre><code>public void replacePixel(Pixel[,] pixels] {....}\n</code></pre>\n<p>Here it is the syntax <code>[,]</code> that is new to me.\nWhat does it do?</p>\n<hr />\n<p>Second code:</p>\n<pre><code>void saveClicked(){\n    file?.load(image);\n}\n</code></pre>\n<p>Here is is the syntax <code>?.</code>\nWhat does it do?</p>\n<p>Tried to use a online java compiler and the syntax did not seem to work.</p>\n"},{"tags":["java","android","google-play-services","google-play-games"],"answers":[{"tags":[],"owner":{"account_id":17024145,"reputation":91,"user_id":12315877,"display_name":"deve"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672354050,"creation_date":1672354050,"answer_id":74956703,"question_id":71527045,"body_markdown":"I think there is no need to request the scope.\r\n\r\nI tested Saved Games features using google play game services v2 without requesting any scope, because there is no way to request, but everything worked fine.","title":"how to implement Saved Games on Google Play Games Services v2 SDK?","body":"<p>I think there is no need to request the scope.</p>\n<p>I tested Saved Games features using google play game services v2 without requesting any scope, because there is no way to request, but everything worked fine.</p>\n"}],"owner":{"account_id":3428427,"reputation":79,"user_id":2873549,"display_name":"user2873549"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":310,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1672354050,"creation_date":1647606563,"question_id":71527045,"body_markdown":"Google has released a new play Games service v2, but their implementation of saved games is confusing. Developer Guides for implementation of Saved Games for V2 are the same as v1...\r\nhttps://developers.google.com/games/services/android/savedgames\r\n\r\nBut in v2 users automatically get signed in as game launch without any scope request.\r\n\r\nAnyone has any idea how to implement correctly v2, there is no example available for v2.","title":"how to implement Saved Games on Google Play Games Services v2 SDK?","body":"<p>Google has released a new play Games service v2, but their implementation of saved games is confusing. Developer Guides for implementation of Saved Games for V2 are the same as v1...\n<a href=\"https://developers.google.com/games/services/android/savedgames\" rel=\"noreferrer\">https://developers.google.com/games/services/android/savedgames</a></p>\n<p>But in v2 users automatically get signed in as game launch without any scope request.</p>\n<p>Anyone has any idea how to implement correctly v2, there is no example available for v2.</p>\n"},{"tags":["java","spring","hibernate"],"owner":{"account_id":19533882,"reputation":1,"user_id":14293052,"display_name":"ivan315"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672353637,"creation_date":1672353637,"question_id":74956662,"body_markdown":"I have:\r\n- Spring JPA app with Hibernate. App is configured without transaction manager.\r\n- 2 entities: Item and Bid. Item can has some Bids.\r\n\r\nI try to get Item by id (em.find) and I expect that Item will be print with empty List&lt;Bid&gt;. But when I call System.out.println Hiber execute anoter query and loads List&lt;Bid&gt;. Looks like it happened in transactio, but I don’t use any transaction explisitly. \r\nSo why lazy loading happened? And how disable it?\r\n\r\n\r\nConfig:\r\n\r\n```\r\n@Configuration\r\n@ComponentScan(basePackages = {&quot;com.john.jpaProf1.relation.oneToManyBags&quot;})\r\n@PropertySource(&quot;classpath:property.properties&quot;)\r\npublic class Config {\r\n\r\n    @Bean\r\n    public DataSource dataSource() {\r\n        HikariDataSource dataSource = new HikariDataSource();\r\n        dataSource.setJdbcUrl(&quot;jdbc:postgresql://localhost:5432/jpa1&quot;);\r\n        dataSource.setUsername(&quot;postgres&quot;);\r\n        dataSource.setPassword(&quot;postgres&quot;);\r\n        return dataSource;\r\n    }\r\n\r\n    @Bean\r\n    public EntityManager entityManager(LocalContainerEntityManagerFactoryBean factoryBean) {\r\n        return factoryBean.getObject().createEntityManager();\r\n    }\r\n\r\n    @Bean\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(DataSource dataSource) {\r\n        LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();\r\n        factoryBean.setDataSource(dataSource);\r\n        factoryBean.setPackagesToScan(&quot;com.john.jpaProf1.relation.oneToManyBags&quot;);\r\n        AbstractJpaVendorAdapter jpaVendorAdapter = new HibernateJpaVendorAdapter();\r\n        jpaVendorAdapter.setShowSql(true);\r\n        jpaVendorAdapter.setGenerateDdl(true);\r\n        factoryBean.setJpaVendorAdapter(jpaVendorAdapter);\r\n        factoryBean.getJpaPropertyMap().put(&quot;hibernate.format_sql&quot;, true);\r\n        factoryBean.getJpaPropertyMap().put(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.PostgreSQL82Dialect&quot;);\r\n        return factoryBean;\r\n    }\r\n}\r\n```\r\n\r\nproperty.properties:\r\n```\r\nspring.jpa.open-in-view=false\r\n```\r\n\r\nEntity Bid:\r\n```\r\n@Entity\r\n@Table(name = &quot;t23bid&quot;)\r\npublic class Bid {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    protected Integer id;\r\n    protected String name;\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;item_id&quot;)\r\n    protected Item item;\r\n...\r\n\r\n```\r\n\r\nEntity Item:\r\n```\r\n@Entity\r\n@Table(name = &quot;t23item&quot;)\r\npublic class Item {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    protected Integer id;\r\n    protected String name;\r\n    @OneToMany(mappedBy = &quot;item&quot;, fetch = FetchType.LAZY)\r\n    protected Collection&lt;Bid&gt; bids;\r\n...\r\n```\r\n\r\nStarter:\r\n```\r\npublic class Starter {\r\n    public static void main(String[] args) {\r\n        AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(Config.class);\r\n        EntityManager em = context.getBean(EntityManager.class);\r\n        Item item = em.find(Item.class, 1);\r\n        System.out.println(&quot;\\n-------after em.find() ? but before System.out.println() -------\\n&quot;);\r\n        System.out.println(&quot;\\n&quot; + item);\r\n...\r\n```\r\n\r\nConfig\r\n```\r\nimplementation &#39;com.zaxxer:HikariCP:4.0.3&#39;\r\nimplementation &#39;org.springframework:spring-context:5.3.24&#39;\r\nimplementation &#39;org.springframework:spring-orm:5.3.24&#39;\r\nimplementation &#39;org.hibernate:hibernate-entitymanager:5.6.14.Final&#39;\r\nimplementation &#39;com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.14.0&#39;\r\nimplementation &#39;org.postgresql:postgresql:42.4.1&#39;\r\n```\r\n\r\nResult:\r\n\r\nHibernate: \r\n    select\r\n        item0_.id as id1_2_0_,\r\n        item0_.name as name2_2_0_ \r\n    from\r\n        t23item item0_ \r\n    where\r\n        item0_.id=?\r\n\r\n-------after em.find() ? but before System.out.println() -------\r\n\r\nHibernate: \r\n    select\r\n        bids0_.item_id as item_id3_0_0_,\r\n        bids0_.id as id1_0_0_,\r\n        bids0_.id as id1_0_1_,\r\n        bids0_.item_id as item_id3_0_1_,\r\n        bids0_.name as name2_0_1_ \r\n    from\r\n        t23bid bids0_ \r\n    where\r\n        bids0_.item_id=?\r\n\r\nItem{id=1, name=&#39;name1&#39;, bids=[Item{id=1, name=&#39;bid1&#39;}, Item{id=2, name=&#39;bid2&#39;}]}\r\n\r\n\r\n","title":"Lazy loading works without transaction in Spring","body":"<p>I have:</p>\n<ul>\n<li>Spring JPA app with Hibernate. App is configured without transaction manager.</li>\n<li>2 entities: Item and Bid. Item can has some Bids.</li>\n</ul>\n<p>I try to get Item by id (em.find) and I expect that Item will be print with empty List. But when I call System.out.println Hiber execute anoter query and loads List. Looks like it happened in transactio, but I don’t use any transaction explisitly.\nSo why lazy loading happened? And how disable it?</p>\n<p>Config:</p>\n<pre><code>@Configuration\n@ComponentScan(basePackages = {&quot;com.john.jpaProf1.relation.oneToManyBags&quot;})\n@PropertySource(&quot;classpath:property.properties&quot;)\npublic class Config {\n\n    @Bean\n    public DataSource dataSource() {\n        HikariDataSource dataSource = new HikariDataSource();\n        dataSource.setJdbcUrl(&quot;jdbc:postgresql://localhost:5432/jpa1&quot;);\n        dataSource.setUsername(&quot;postgres&quot;);\n        dataSource.setPassword(&quot;postgres&quot;);\n        return dataSource;\n    }\n\n    @Bean\n    public EntityManager entityManager(LocalContainerEntityManagerFactoryBean factoryBean) {\n        return factoryBean.getObject().createEntityManager();\n    }\n\n    @Bean\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(DataSource dataSource) {\n        LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();\n        factoryBean.setDataSource(dataSource);\n        factoryBean.setPackagesToScan(&quot;com.john.jpaProf1.relation.oneToManyBags&quot;);\n        AbstractJpaVendorAdapter jpaVendorAdapter = new HibernateJpaVendorAdapter();\n        jpaVendorAdapter.setShowSql(true);\n        jpaVendorAdapter.setGenerateDdl(true);\n        factoryBean.setJpaVendorAdapter(jpaVendorAdapter);\n        factoryBean.getJpaPropertyMap().put(&quot;hibernate.format_sql&quot;, true);\n        factoryBean.getJpaPropertyMap().put(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.PostgreSQL82Dialect&quot;);\n        return factoryBean;\n    }\n}\n</code></pre>\n<p>property.properties:</p>\n<pre><code>spring.jpa.open-in-view=false\n</code></pre>\n<p>Entity Bid:</p>\n<pre><code>@Entity\n@Table(name = &quot;t23bid&quot;)\npublic class Bid {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    protected Integer id;\n    protected String name;\n    @ManyToOne\n    @JoinColumn(name = &quot;item_id&quot;)\n    protected Item item;\n...\n\n</code></pre>\n<p>Entity Item:</p>\n<pre><code>@Entity\n@Table(name = &quot;t23item&quot;)\npublic class Item {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    protected Integer id;\n    protected String name;\n    @OneToMany(mappedBy = &quot;item&quot;, fetch = FetchType.LAZY)\n    protected Collection&lt;Bid&gt; bids;\n...\n</code></pre>\n<p>Starter:</p>\n<pre><code>public class Starter {\n    public static void main(String[] args) {\n        AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(Config.class);\n        EntityManager em = context.getBean(EntityManager.class);\n        Item item = em.find(Item.class, 1);\n        System.out.println(&quot;\\n-------after em.find() ? but before System.out.println() -------\\n&quot;);\n        System.out.println(&quot;\\n&quot; + item);\n...\n</code></pre>\n<p>Config</p>\n<pre><code>implementation 'com.zaxxer:HikariCP:4.0.3'\nimplementation 'org.springframework:spring-context:5.3.24'\nimplementation 'org.springframework:spring-orm:5.3.24'\nimplementation 'org.hibernate:hibernate-entitymanager:5.6.14.Final'\nimplementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.14.0'\nimplementation 'org.postgresql:postgresql:42.4.1'\n</code></pre>\n<p>Result:</p>\n<p>Hibernate:\nselect\nitem0_.id as id1_2_0_,\nitem0_.name as name2_2_0_\nfrom\nt23item item0_\nwhere\nitem0_.id=?</p>\n<p>-------after em.find() ? but before System.out.println() -------</p>\n<p>Hibernate:\nselect\nbids0_.item_id as item_id3_0_0_,\nbids0_.id as id1_0_0_,\nbids0_.id as id1_0_1_,\nbids0_.item_id as item_id3_0_1_,\nbids0_.name as name2_0_1_\nfrom\nt23bid bids0_\nwhere\nbids0_.item_id=?</p>\n<p>Item{id=1, name='name1', bids=[Item{id=1, name='bid1'}, Item{id=2, name='bid2'}]}</p>\n"},{"tags":["java","import","printing"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1672350874,"post_id":74956361,"comment_id":132274647,"body_markdown":"There is no constant `TYPE_CMYK` in [`BufferedImage`](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/image/BufferedImage.html). I do not think that this stems from a &quot;wrong import&quot; since `Bufferedimage` is a standard `awt` class. Where did the `TYPE_CMYK` originally come from, i.e. who wrote that code? I suggest talking to that person.","body":"There is no constant <code>TYPE_CMYK</code> in <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/image/BufferedImage.html\" rel=\"nofollow noreferrer\"><code>BufferedImage</code></a>. I do not think that this stems from a &quot;wrong import&quot; since <code>Bufferedimage</code> is a standard <code>awt</code> class. Where did the <code>TYPE_CMYK</code> originally come from, i.e. who wrote that code? I suggest talking to that person."},{"owner":{"account_id":26953504,"reputation":3,"user_id":20522304,"display_name":"Dragomy"},"score":0,"creation_date":1672351568,"post_id":74956361,"comment_id":132274811,"body_markdown":"A friend of mine said he &quot;made a little programm&quot; but it it returns several error, as i am only a student I looked at the code which i found well documented but the only problem i could think of on point were the imports ,so I asked the question :). Ok update uppon asking he has admitted to have used Chat GPT ,no wonder the code has errors and he doesnt know anything about them.","body":"A friend of mine said he &quot;made a little programm&quot; but it it returns several error, as i am only a student I looked at the code which i found well documented but the only problem i could think of on point were the imports ,so I asked the question :). Ok update uppon asking he has admitted to have used Chat GPT ,no wonder the code has errors and he doesnt know anything about them."}],"answers":[{"comments":[{"owner":{"account_id":26953504,"reputation":3,"user_id":20522304,"display_name":"Dragomy"},"score":0,"creation_date":1672352415,"post_id":74956512,"comment_id":132274990,"body_markdown":"What hes trying to do ,and what i am now trying to do is a programm where you can drop an image with any color space you want and getting an output image that uses the iso_coated_v2 printable color space . Since I now know ,that the code is made per ai it could be that the library as refered to in the code does not exsist.","body":"What hes trying to do ,and what i am now trying to do is a programm where you can drop an image with any color space you want and getting an output image that uses the iso_coated_v2 printable color space . Since I now know ,that the code is made per ai it could be that the library as refered to in the code does not exsist."},{"owner":{"account_id":26953504,"reputation":3,"user_id":20522304,"display_name":"Dragomy"},"score":0,"creation_date":1672352570,"post_id":74956512,"comment_id":132275021,"body_markdown":"Using your link i get an 404 error. Is it a oracle site or from some inside   java-community","body":"Using your link i get an 404 error. Is it a oracle site or from some inside   java-community"},{"owner":{"account_id":27360805,"reputation":87,"user_id":20868442,"display_name":"Lian Xucan"},"score":0,"creation_date":1672353658,"post_id":74956512,"comment_id":132275219,"body_markdown":"Oh, I think I lost the version number when I pasted it. I changed it","body":"Oh, I think I lost the version number when I pasted it. I changed it"},{"owner":{"account_id":26953504,"reputation":3,"user_id":20522304,"display_name":"Dragomy"},"score":0,"creation_date":1672353780,"post_id":74956512,"comment_id":132275241,"body_markdown":"Yea Link works now i will try out your suggestions","body":"Yea Link works now i will try out your suggestions"},{"owner":{"account_id":26953504,"reputation":3,"user_id":20522304,"display_name":"Dragomy"},"score":0,"creation_date":1672354261,"post_id":74956512,"comment_id":132275347,"body_markdown":"Hmm somehow i am not able to import (i get no downloadable jar file so ) but thanks for your help :)","body":"Hmm somehow i am not able to import (i get no downloadable jar file so ) but thanks for your help :)"},{"owner":{"account_id":27360805,"reputation":87,"user_id":20868442,"display_name":"Lian Xucan"},"score":0,"creation_date":1672354764,"post_id":74956512,"comment_id":132275445,"body_markdown":"lol,may be you need to change your project to maven project and you can import it easily.It looks like there&#39;s a long way to go","body":"lol,may be you need to change your project to maven project and you can import it easily.It looks like there&#39;s a long way to go"}],"tags":[],"owner":{"account_id":27360805,"reputation":87,"user_id":20868442,"display_name":"Lian Xucan"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672353604,"creation_date":1672352203,"answer_id":74956512,"question_id":74956361,"body_markdown":"To solve the problem `ColorSpaceJAI cannot be resolved to a variable` and `TYPE_CMYK cannot be resolved or is not a field`\r\n\r\nyou need to import this lib to your project\r\n[jai-core][1]\r\n\r\nand change \r\n\r\n    BufferedImage cmykImage = new BufferedImage(image.getWidth(),image.getHeight(),BufferedImage.TYPE_CMYK);\r\n\r\nto\r\n\r\n    BufferedImage cmykImage = new BufferedImage(image.getWidth(),image.getHeight(),ColorSpaceJAI.TYPE_CMYK);\r\n\r\nAnd I still can&#39;t find `ColorSpaceJAI.NAME_ISO_COATED`,it looks like some other tripartite library\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/javax.media/jai-core/1.1.3","title":"I have several Errors which i think come from a wrong import","body":"<p>To solve the problem <code>ColorSpaceJAI cannot be resolved to a variable</code> and <code>TYPE_CMYK cannot be resolved or is not a field</code></p>\n<p>you need to import this lib to your project\n<a href=\"https://mvnrepository.com/artifact/javax.media/jai-core/1.1.3\" rel=\"nofollow noreferrer\">jai-core</a></p>\n<p>and change</p>\n<pre><code>BufferedImage cmykImage = new BufferedImage(image.getWidth(),image.getHeight(),BufferedImage.TYPE_CMYK);\n</code></pre>\n<p>to</p>\n<pre><code>BufferedImage cmykImage = new BufferedImage(image.getWidth(),image.getHeight(),ColorSpaceJAI.TYPE_CMYK);\n</code></pre>\n<p>And I still can't find <code>ColorSpaceJAI.NAME_ISO_COATED</code>,it looks like some other tripartite library</p>\n"}],"owner":{"account_id":26953504,"reputation":3,"user_id":20522304,"display_name":"Dragomy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672353604,"creation_date":1672350739,"question_id":74956361,"body_markdown":"The following code returns the following errors : \r\n&gt;The import javax.media cannot be resolved\r\n\r\n&gt;ColorSpaceJAI cannot be resolved to a variable\r\n\r\n&gt;ColorSpaceJAI cannot be resolved to a variable\r\n\r\n&gt;TYPE_CMYK cannot be resolved or is not a field\r\n\r\nI am not a professional, but in the past &quot; cannot be resolved &quot; usually meant that I was stupid and got the imports wrong.\r\n\r\nThis is the code: \r\n\r\n\r\n  \r\n\r\n      import java.awt.Color;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.image.BufferedImage;\r\n    import java.awt.image.ColorModel;\r\n    import java.awt.image.DataBuffer;\r\n    import java.awt.image.WritableRaster;\r\n    import java.io.File;\r\n    import java.util.List;\r\n    \r\n    import javax.imageio.ImageIO;\r\n    import javax.media.jai.ColorSpaceJAI;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    \r\n    public class FileDropTool {\r\n        public static void main(String[] args) {\r\n            // Create the main window\r\n            JFrame frame = new JFrame(&quot;File Drop Tool&quot;);\r\n            frame.setSize(300, 300);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.setVisible(true);\r\n    \r\n            // Add a drop target to the window\r\n            frame.setDropTarget(new java.awt.dnd.DropTarget() {\r\n                @Override\r\n                public synchronized void drop(java.awt.dnd.DropTargetDropEvent dtde) {\r\n                    try {\r\n                        // Accept the drop and get the list of files\r\n                        dtde.acceptDrop(java.awt.dnd.DnDConstants.ACTION_COPY);\r\n                        @SuppressWarnings(&quot;unchecked&quot;)\r\n                        List&lt;File&gt; files = (List&lt;File&gt;) dtde.getTransferable()\r\n                                .getTransferData(java.awt.datatransfer.DataFlavor.javaFileListFlavor);\r\n                        // Process the first file\r\n                        File file = files.get(0);\r\n                        // Open the image file\r\n                        BufferedImage image = ImageIO.read(file);\r\n                        // Check if the image already has the iso_coated_v2 color profile\r\n                        ColorModel colorModel = image.getColorModel();\r\n                        if (colorModel.getColorSpace().getType() == ColorSpaceJAI.TYPE_CMYK &amp;&amp;\r\n                                colorModel.getColorSpace().getName(ColorSpaceJAI.NAME_ISO_COATED)\r\n                                        .equals(&quot;ISO Coated v2 300%&quot;)) {\r\n                            System.out.println(&quot;Image already has the iso_coated_v2 color profile&quot;);\r\n                        } else {\r\n                            // Convert the image to the iso_coated_v2 color profile\r\n                            BufferedImage cmykImage = new BufferedImage(image.getWidth(), image.getHeight(),\r\n                                    BufferedImage.TYPE_CMYK);\r\n                            Graphics2D g2d = cmykImage.createGraphics();\r\n                            g2d.drawImage(image, 0, 0, null);\r\n                            g2d.dispose();\r\n                            // Save the converted image to a new file\r\n                            ImageIO.write(cmykImage, &quot;JPEG&quot;, new File(file.getParent(), &quot;iso_coated_v2.jpg&quot;));\r\n                            System.out.println(&quot;Image converted to iso_coated_v2 color profile and saved to a new file&quot;);\r\n                        }\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            });\r\n    \r\n            // Add a label to the window\r\n            frame.add(new JLabel(&quot;Drop a file here&quot;));\r\n        }\r\n    }\r\n\r\nThis is what the code should do :\r\n\r\n -  Creates a main window (JFrame) and sets it to be visible.\r\n -    Sets a drop target on the main window, which allows the user to drag and drop a file into the window.\r\n -    When a file is dropped, the program accepts the drop and retrieves the list of files. It then processes the first file in the list.\r\n -   The program opens the image file and checks if it already has the iso_coated_v2 color profile. If it does, it prints a message to the console. If not, it converts the image to the iso_coated_v2 color profile.","title":"I have several Errors which i think come from a wrong import","body":"<p>The following code returns the following errors :</p>\n<blockquote>\n<p>The import javax.media cannot be resolved</p>\n</blockquote>\n<blockquote>\n<p>ColorSpaceJAI cannot be resolved to a variable</p>\n</blockquote>\n<blockquote>\n<p>ColorSpaceJAI cannot be resolved to a variable</p>\n</blockquote>\n<blockquote>\n<p>TYPE_CMYK cannot be resolved or is not a field</p>\n</blockquote>\n<p>I am not a professional, but in the past &quot; cannot be resolved &quot; usually meant that I was stupid and got the imports wrong.</p>\n<p>This is the code:</p>\n<pre><code>  import java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.image.BufferedImage;\nimport java.awt.image.ColorModel;\nimport java.awt.image.DataBuffer;\nimport java.awt.image.WritableRaster;\nimport java.io.File;\nimport java.util.List;\n\nimport javax.imageio.ImageIO;\nimport javax.media.jai.ColorSpaceJAI;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\n\npublic class FileDropTool {\n    public static void main(String[] args) {\n        // Create the main window\n        JFrame frame = new JFrame(&quot;File Drop Tool&quot;);\n        frame.setSize(300, 300);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setVisible(true);\n\n        // Add a drop target to the window\n        frame.setDropTarget(new java.awt.dnd.DropTarget() {\n            @Override\n            public synchronized void drop(java.awt.dnd.DropTargetDropEvent dtde) {\n                try {\n                    // Accept the drop and get the list of files\n                    dtde.acceptDrop(java.awt.dnd.DnDConstants.ACTION_COPY);\n                    @SuppressWarnings(&quot;unchecked&quot;)\n                    List&lt;File&gt; files = (List&lt;File&gt;) dtde.getTransferable()\n                            .getTransferData(java.awt.datatransfer.DataFlavor.javaFileListFlavor);\n                    // Process the first file\n                    File file = files.get(0);\n                    // Open the image file\n                    BufferedImage image = ImageIO.read(file);\n                    // Check if the image already has the iso_coated_v2 color profile\n                    ColorModel colorModel = image.getColorModel();\n                    if (colorModel.getColorSpace().getType() == ColorSpaceJAI.TYPE_CMYK &amp;&amp;\n                            colorModel.getColorSpace().getName(ColorSpaceJAI.NAME_ISO_COATED)\n                                    .equals(&quot;ISO Coated v2 300%&quot;)) {\n                        System.out.println(&quot;Image already has the iso_coated_v2 color profile&quot;);\n                    } else {\n                        // Convert the image to the iso_coated_v2 color profile\n                        BufferedImage cmykImage = new BufferedImage(image.getWidth(), image.getHeight(),\n                                BufferedImage.TYPE_CMYK);\n                        Graphics2D g2d = cmykImage.createGraphics();\n                        g2d.drawImage(image, 0, 0, null);\n                        g2d.dispose();\n                        // Save the converted image to a new file\n                        ImageIO.write(cmykImage, &quot;JPEG&quot;, new File(file.getParent(), &quot;iso_coated_v2.jpg&quot;));\n                        System.out.println(&quot;Image converted to iso_coated_v2 color profile and saved to a new file&quot;);\n                    }\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n\n        // Add a label to the window\n        frame.add(new JLabel(&quot;Drop a file here&quot;));\n    }\n}\n</code></pre>\n<p>This is what the code should do :</p>\n<ul>\n<li>Creates a main window (JFrame) and sets it to be visible.</li>\n<li>Sets a drop target on the main window, which allows the user to drag and drop a file into the window.</li>\n<li>When a file is dropped, the program accepts the drop and retrieves the list of files. It then processes the first file in the list.</li>\n<li>The program opens the image file and checks if it already has the iso_coated_v2 color profile. If it does, it prints a message to the console. If not, it converts the image to the iso_coated_v2 color profile.</li>\n</ul>\n"},{"tags":["java","groovy","apache-poi","apache-nifi","groovy-grape"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1671798008,"post_id":74894739,"comment_id":132178497,"body_markdown":"Does your code work outside of NiFi? As I can&#39;t see anything reading a CSV, can&#39;t see anything writing meaningful stuff to rows and cells in Apache POI, I&#39;m guessing not... You&#39;ll need to fix your code to work standalone first!","body":"Does your code work outside of NiFi? As I can&#39;t see anything reading a CSV, can&#39;t see anything writing meaningful stuff to rows and cells in Apache POI, I&#39;m guessing not... You&#39;ll need to fix your code to work standalone first!"},{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":1,"creation_date":1671923096,"post_id":74894739,"comment_id":132198248,"body_markdown":"You are creating WorkbookFactory from input stream but you are saying that input contains csv file. So, poi saying that can&#39;t read input stream because it&#39;s not ole2 or ooxml...","body":"You are creating WorkbookFactory from input stream but you are saying that input contains csv file. So, poi saying that can&#39;t read input stream because it&#39;s not ole2 or ooxml..."},{"owner":{"account_id":9699249,"reputation":178,"user_id":7194750,"accept_rate":77,"display_name":"O. Sam"},"score":0,"creation_date":1672270715,"post_id":74894739,"comment_id":132257026,"body_markdown":"@daggett I want to convert csv content into xls format, can you help with the script please?","body":"@daggett I want to convert csv content into xls format, can you help with the script please?"}],"owner":{"account_id":9699249,"reputation":178,"user_id":7194750,"accept_rate":77,"display_name":"O. Sam"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672353364,"creation_date":1671750837,"question_id":74894739,"body_markdown":"I want to convert csv flowfile content into XLS file usin groovy script + POI API\r\n\r\nI m using ivy to grab POI dependencies and it seems work well.\r\n\r\nplease find more details below:\r\n\r\nThis is my Nifi flow:\r\n\r\n[![\r\n][1]][1]\r\n\r\nThis is my script\r\n\r\n    @Grapes(@Grab(group=&#39;org.apache.poi&#39;, module=&#39;poi-ooxml&#39;, version=&#39;3.9&#39;))\r\n    import org.apache.poi.ss.usermodel.*\r\n    import org.apache.poi.hssf.usermodel.*\r\n    import org.apache.poi.xssf.usermodel.*\r\n    import org.apache.poi.ss.util.*\r\n    import org.apache.poi.ss.usermodel.*\r\n    import org.apache.poi.hssf.extractor.*\r\n    import java.nio.charset.*\r\n    import java.io.*\r\n    import org.apache.commons.io.IOUtils\r\n\r\n    def flowFile = session.get()\r\n    def date = new Date()\r\n\r\n    if(!flowFile) return\r\n\r\n    flowFile = session.write(flowFile, {inputStream, outputStream -&gt;\r\n    try {\r\n\t\t\r\n    Workbook wb = WorkbookFactory.create(inputStream,);\r\n    Sheet mySheet = wb.getSheetAt(0);\r\n\r\n\r\n    def record = IOUtils.toString(inputStream, StandardCharsets.UTF_8)\r\n    outputStream.write(record.getBytes(StandardCharsets.UTF_8))\r\n\r\n    wb.close();\r\n\r\n    } catch(e) {\r\n     log.error(&quot;Error during processing&quot;, e)\r\n     session.transfer(flowFile, REL_FAILURE)\r\n    }\r\n    } as StreamCallback)\r\n\r\n\r\n    def filename = flowFile.getAttribute(&#39;filename&#39;)+&#39;.xlsx&#39;\r\n    flowFile = session.putAttribute(flowFile, &#39;filename&#39;, filename) \r\n\r\n    session.transfer(flowFile, REL_SUCCESS)\r\n\r\nI get this error\r\n[![enter image description here][2]][2]\r\n\r\n\r\nAny idea about this error ?\r\n\r\nEdit:\r\nI changed my script and still had the same error:\r\n\r\n    @Grapes(@Grab(group=&#39;org.apache.poi&#39;, module=&#39;poi-ooxml&#39;, version=&#39;3.9&#39;))\r\n    import com.opencsv.CSVReader\r\n    @Grapes(@Grab(group=&#39;com.opencsv&#39;, module=&#39;opencsv&#39;, version=&#39;4.2&#39;))\r\n    import org.apache.poi.ss.usermodel.*\r\n    import org.apache.poi.hssf.usermodel.*\r\n    import org.apache.poi.xssf.usermodel.*\r\n    import org.apache.poi.ss.util.*\r\n    import org.apache.poi.ss.usermodel.*\r\n    import org.apache.poi.hssf.extractor.*\r\n    import java.nio.charset.*\r\n    import java.io.*\r\n    import org.apache.commons.io.IOUtils\r\n    \r\n    def flowFile = session.get()\r\n    def date = new Date()\r\n    \r\n    if(!flowFile) return\r\n    \r\n    flowFile = session.write(flowFile, {inputStream, outputStream -&gt;\r\n    try {\r\n    def nextLine = &#39;&#39;\r\n    reader = new CSVReader(new FileReader(csvFilePath), FILE_DELIMITER);\r\n    \r\n      Workbook wb = WorkbookFactory.create(inputStream,);\r\n     Sheet sheet1 = wb.createSheet(&quot;Feuille&quot;);\r\n    \r\n    // workBook = new SXSSFWorkbook();\r\n    //sheet = (SXSSFSheet) workBook.createSheet(&#39;Sheet&#39;);\r\n    \r\n    int rowNum = 0;\r\n    while((nextLine = reader.readNext()) != null) {\r\n    Row currentRow = sheet1.createRow(rowNum++);\r\n    for(int i=0; i &lt; nextLine.length; i++) {\r\n    if(NumberUtils.isDigits(nextLine[i])) {\r\n    currentRow.createCell(i).setCellValue(Integer.parseInt(nextLine[i]));\r\n    } else if (NumberUtils.isNumber(nextLine[i])) {\r\n    currentRow.createCell(i).setCellValue(Double.parseDouble(nextLine[i]));\r\n    } else {\r\n    currentRow.createCell(i).setCellValue(nextLine[i]);\r\n    }\r\n    }\r\n    }\r\n    \r\n    fileOutputStream = new FileOutputStream(generatedXlsFilePath.trim());\r\n    wb.write(fileOutputStream);\r\n    \r\n    wb.close();\r\n    fileOutputStream.close();\r\n    reader.close();\r\n    outputStream.close();\r\n    \r\n    } catch(e) {\r\n    session.transfer(flowFile, REL_FAILURE)\r\n    }\r\n    } as StreamCallback)\r\n    \r\n    def filename = flowFile.getAttribute(&#39;filename&#39;)+&#39;.xlsx&#39;\r\n    flowFile = session.putAttribute(flowFile, &#39;filename&#39;, filename)\r\n    \r\n    session.transfer(flowFile, REL_SUCCESS)\r\n\r\n  [1]: https://i.stack.imgur.com/a9wjm.png\r\n  [2]: https://i.stack.imgur.com/IwYNj.png","title":"Nifi Unable to convert CSV to Excel using POI API","body":"<p>I want to convert csv flowfile content into XLS file usin groovy script + POI API</p>\n<p>I m using ivy to grab POI dependencies and it seems work well.</p>\n<p>please find more details below:</p>\n<p>This is my Nifi flow:</p>\n<p><a href=\"https://i.stack.imgur.com/a9wjm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a9wjm.png\" alt=\"\n\" /></a></p>\n<p>This is my script</p>\n<pre><code>@Grapes(@Grab(group='org.apache.poi', module='poi-ooxml', version='3.9'))\nimport org.apache.poi.ss.usermodel.*\nimport org.apache.poi.hssf.usermodel.*\nimport org.apache.poi.xssf.usermodel.*\nimport org.apache.poi.ss.util.*\nimport org.apache.poi.ss.usermodel.*\nimport org.apache.poi.hssf.extractor.*\nimport java.nio.charset.*\nimport java.io.*\nimport org.apache.commons.io.IOUtils\n\ndef flowFile = session.get()\ndef date = new Date()\n\nif(!flowFile) return\n\nflowFile = session.write(flowFile, {inputStream, outputStream -&gt;\ntry {\n    \nWorkbook wb = WorkbookFactory.create(inputStream,);\nSheet mySheet = wb.getSheetAt(0);\n\n\ndef record = IOUtils.toString(inputStream, StandardCharsets.UTF_8)\noutputStream.write(record.getBytes(StandardCharsets.UTF_8))\n\nwb.close();\n\n} catch(e) {\n log.error(&quot;Error during processing&quot;, e)\n session.transfer(flowFile, REL_FAILURE)\n}\n} as StreamCallback)\n\n\ndef filename = flowFile.getAttribute('filename')+'.xlsx'\nflowFile = session.putAttribute(flowFile, 'filename', filename) \n\nsession.transfer(flowFile, REL_SUCCESS)\n</code></pre>\n<p>I get this error\n<a href=\"https://i.stack.imgur.com/IwYNj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IwYNj.png\" alt=\"enter image description here\" /></a></p>\n<p>Any idea about this error ?</p>\n<p>Edit:\nI changed my script and still had the same error:</p>\n<pre><code>@Grapes(@Grab(group='org.apache.poi', module='poi-ooxml', version='3.9'))\nimport com.opencsv.CSVReader\n@Grapes(@Grab(group='com.opencsv', module='opencsv', version='4.2'))\nimport org.apache.poi.ss.usermodel.*\nimport org.apache.poi.hssf.usermodel.*\nimport org.apache.poi.xssf.usermodel.*\nimport org.apache.poi.ss.util.*\nimport org.apache.poi.ss.usermodel.*\nimport org.apache.poi.hssf.extractor.*\nimport java.nio.charset.*\nimport java.io.*\nimport org.apache.commons.io.IOUtils\n\ndef flowFile = session.get()\ndef date = new Date()\n\nif(!flowFile) return\n\nflowFile = session.write(flowFile, {inputStream, outputStream -&gt;\ntry {\ndef nextLine = ''\nreader = new CSVReader(new FileReader(csvFilePath), FILE_DELIMITER);\n\n  Workbook wb = WorkbookFactory.create(inputStream,);\n Sheet sheet1 = wb.createSheet(&quot;Feuille&quot;);\n\n// workBook = new SXSSFWorkbook();\n//sheet = (SXSSFSheet) workBook.createSheet('Sheet');\n\nint rowNum = 0;\nwhile((nextLine = reader.readNext()) != null) {\nRow currentRow = sheet1.createRow(rowNum++);\nfor(int i=0; i &lt; nextLine.length; i++) {\nif(NumberUtils.isDigits(nextLine[i])) {\ncurrentRow.createCell(i).setCellValue(Integer.parseInt(nextLine[i]));\n} else if (NumberUtils.isNumber(nextLine[i])) {\ncurrentRow.createCell(i).setCellValue(Double.parseDouble(nextLine[i]));\n} else {\ncurrentRow.createCell(i).setCellValue(nextLine[i]);\n}\n}\n}\n\nfileOutputStream = new FileOutputStream(generatedXlsFilePath.trim());\nwb.write(fileOutputStream);\n\nwb.close();\nfileOutputStream.close();\nreader.close();\noutputStream.close();\n\n} catch(e) {\nsession.transfer(flowFile, REL_FAILURE)\n}\n} as StreamCallback)\n\ndef filename = flowFile.getAttribute('filename')+'.xlsx'\nflowFile = session.putAttribute(flowFile, 'filename', filename)\n\nsession.transfer(flowFile, REL_SUCCESS)\n</code></pre>\n"},{"tags":["java","random","random-seed"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1672392413,"post_id":74956511,"comment_id":132280840,"body_markdown":"You may want to read about the Fisher-Yates algorithm for shuffling. Look it up.","body":"You may want to read about the Fisher-Yates algorithm for shuffling. Look it up."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1672392529,"post_id":74956511,"comment_id":132280862,"body_markdown":"Your problem is with the `if ( k == CorrectWord.length() )` case. In this case you are setting `i` to 0 and not changing `k`, so `k` will remain at the word length. This means every time through the loop you will again get into this `if` statement and set `i` back to 0, which prevents you from ever getting out of the loop.","body":"Your problem is with the <code>if ( k == CorrectWord.length() )</code> case. In this case you are setting <code>i</code> to 0 and not changing <code>k</code>, so <code>k</code> will remain at the word length. This means every time through the loop you will again get into this <code>if</code> statement and set <code>i</code> back to 0, which prevents you from ever getting out of the loop."},{"owner":{"account_id":11942302,"reputation":1,"user_id":14251330,"display_name":"Ignatius the Learner"},"score":0,"creation_date":1672440697,"post_id":74956511,"comment_id":132292006,"body_markdown":"@OleV.V. \nAh ha! Bingo! Thank you so much for pointing that out. Now it appears my program works just fine!","body":"@OleV.V.  Ah ha! Bingo! Thank you so much for pointing that out. Now it appears my program works just fine!"}],"owner":{"account_id":11942302,"reputation":1,"user_id":14251330,"display_name":"Ignatius the Learner"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672352184,"creation_date":1672352184,"question_id":74956511,"body_markdown":"I was given instructions to program a jumble word game in Java last semester, as an assignment. My instructor said I could post this on stackoverflow after the due date for the assignment had expired, so nothing here is unauthorized outside help (aka cheating). A good description of the program is as follows:\r\n\r\nThis program reads from a file of a long list of words, randomly selects one of those words, then randomly jumbles one of those words. The user will then see the jumbled word,\r\nand see a menu that allows them to either take a guess, get a hint, get a new word, or quit. Each new word gives a possible 10 points, but guessing incorrectly and getting hints\r\nwill decrease the total number of possible points the user can get from guessing the word correctly.\r\n\r\nIf the total number of possible points reaches zero for a word,\r\nthe program will generate a new word for the user. If the user guesses the word correctly, the program will congratulate them, and display the number of points gained\r\nfrom that word, as well as the user&#39;s total score. Upon the exit of the program by the user, the program will display the final score of the user for that specific run.\r\n\r\nThe file that has the list of words that I used is called words.txt, and it looks like this:\r\n\r\n[screenshot of &#39;words.txt&#39;](https://i.stack.imgur.com/CoJAf.png)\r\n\r\nThe first line is the number of words in the file. I use that to define the array size.\r\n\r\nEverything about the program works fine, except that sometimes when I play the game over and over again, I will get stuck in an infinite loop. The worst part is, there&#39;s no apparent pattern to the infinite loops, save for the fact that the infinite loop always occurs after the program identifies the word to be jumbled. But other than that, there is no easy pattern to see.\r\n\r\nI asked my instructor for help, and he said he didn&#39;t find anything that jumped out to him that was obviously faulty code-wise. He said he could&#39;ve found out the problem if he stared at it for hours, but he didn&#39;t have that much time. Since he couldn&#39;t find out what was the with the code itself, he let me submit my code without penalty for this weird bug. I remember getting a perfect score on the assignment.\r\n\r\nSometimes the bug will manifest itself in the first few iterations of the program:\r\n\r\n[Example1](https://i.stack.imgur.com/R4XG3.png)\r\n\r\n[Example2](https://i.stack.imgur.com/bNhDN.png)\r\n\r\nBut sometimes it will take longer for the bug to manifest:\r\n\r\n[Example3](https://i.stack.imgur.com/BJopZ.png)\r\n\r\nHere is the computer program that I wrote:\r\n\r\n```\r\nimport java.util.*;\r\nimport java.io.*;\r\n\r\npublic class Proj5{\r\n  public static void main(String [] args) throws IOException {\r\n    Scanner keyboard = new Scanner(System.in);\r\n    Random randGen = new Random();\r\n\r\n    System.out.print(&quot;Enter in text file containing words (Ex: words.txt): &quot;);\r\n    String filename = keyboard.nextLine();\r\n    System.out.println();\r\n\r\n    Scanner s = new Scanner(new File(filename));\r\n\r\n    String line = s.nextLine();\r\n    int arraySize = Integer.parseInt(line);\r\n\r\n    String [] WordList = new String [arraySize];\r\n\r\n    for(int i = 0; i &lt; arraySize; i++){\r\n      WordList[i] = s.nextLine();\r\n    }\r\n\r\n    s.close();\r\n\r\n    boolean OuterExitValue = true;\r\n\r\n    int totalScore = 0;\r\n\r\n    while(OuterExitValue){\r\n\r\n    int RandomWord = randGen.nextInt(WordList.length);\r\n\r\n    String CorrectWord = WordList[RandomWord];\r\n\r\n    int RandomN, k = 0, i = 0;\r\n\r\n    System.out.print(&quot;Word = &quot; + CorrectWord);\r\n\r\n    char [] JumbledWord = new char [CorrectWord.length()];\r\n    boolean [] check = new boolean [CorrectWord.length()];\r\n\r\n    while( i &lt; CorrectWord.length() ) {\r\n\r\n      RandomN = randGen.nextInt(CorrectWord.length());\r\n\r\n      if ( !(check[RandomN % CorrectWord.length()]) ) {\r\n\r\n        JumbledWord[RandomN % CorrectWord.length()] = CorrectWord.charAt(i);\r\n        //System.out.println(JumbledWord[i]);\r\n        check[RandomN % CorrectWord.length()] = true;\r\n        i++;\r\n\r\n      }\r\n\r\n      if ( i == CorrectWord.length() ){\r\n\r\n        for(int j = 0; j &lt; CorrectWord.length(); j++){\r\n\r\n          if( JumbledWord[j] == CorrectWord.charAt(j) )\r\n            k++;\r\n        }\r\n\r\n      }\r\n\r\n      if ( k == CorrectWord.length() ) {\r\n\r\n          i = 0;\r\n\r\n          for(int j = 0; j &lt; CorrectWord.length(); j++){\r\n            check[j] = false;\r\n          }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    System.out.println();\r\n\r\n    int NPoints = 10;\r\n    String guess = &quot;a&quot;;\r\n    boolean InnerExitValue = true;\r\n\r\n    while(InnerExitValue){\r\n\r\n      System.out.print(&quot;Current puzzle: &quot;);\r\n\r\n      for (i = 0; i &lt; CorrectWord.length(); i++)\r\n        System.out.print(JumbledWord[i]);\r\n\r\n        System.out.println(&quot;\\nCurrent points for word: &quot; + NPoints);\r\n        System.out.print(&quot;Enter (g)uess, (n)ew word, (h)int, or (q)uit: &quot;);\r\n        char option = keyboard.next().toLowerCase().charAt(0);\r\n\r\n        switch (option) {\r\n\r\n          case &#39;q&#39;:\r\n            InnerExitValue = false;\r\n            OuterExitValue = false;\r\n            System.out.println(&quot;\\nThanks for Playing! Goodbye!&quot;);\r\n            System.out.println(&quot;Final score: &quot; + totalScore);\r\n            System.exit(0);\r\n            break;\r\n\r\n          case &#39;h&#39;:\r\n            int RandomLetter = randGen.nextInt(CorrectWord.length());\r\n            int RandomSpot = RandomLetter + 1;\r\n            System.out.println(&quot;\\nThe letter at spot &quot; + RandomSpot + &quot; is &quot; + CorrectWord.charAt(RandomLetter) + &quot;\\n&quot; );\r\n            NPoints = NPoints/2;\r\n            break;\r\n\r\n          case &#39;g&#39;:\r\n\r\n            System.out.print(&quot;\\nEnter your guess: &quot;);\r\n            guess = keyboard.next();\r\n\r\n            if ( !(guess.equalsIgnoreCase(CorrectWord)) ) {\r\n              NPoints -= 1;\r\n              System.out.println(&quot;Sorry, try again.\\n&quot;);\r\n            }\r\n            else{\r\n              totalScore += NPoints;\r\n              System.out.println(&quot;Congratulations! You guessed it!&quot;);\r\n              System.out.println(&quot;Score for word: &quot; + NPoints);\r\n              System.out.println(&quot;Total score: &quot; + totalScore);\r\n              System.out.println();\r\n              InnerExitValue = false;\r\n            }\r\n            break;\r\n\r\n          case &#39;n&#39;:\r\n            InnerExitValue = false;\r\n            System.out.println();\r\n            break;\r\n\r\n          default:\r\n            System.out.println(&quot;Invalid Choice - &#39;g&#39;, &#39;n&#39; &#39;h&#39; or &#39;q&#39; only.\\n&quot;);\r\n        }\r\n\r\n        if(NPoints == 0){\r\n          System.out.println(&quot;Word points = 0. Generating a new word&quot;);\r\n          InnerExitValue = false;\r\n        }\r\n\r\n\r\n      }\r\n\r\n    }\r\n\r\n}\r\n}\r\n```\r\n\r\nI tried some things out with my code. I used traces to find out where my code was getting stuck in an infinite loop, and it turns out that the infinite loop is always occurring in the first while loop that has the purpose of jumbling a word and checking that it&#39;s jumbled properly. I added this trace at the bottom of the first while loop, right before the bracket, where I just inputted:\r\n\r\n```\r\nfor(int m = 0; m &lt; CorrectWord.length(); m++)\r\n          System.out.print(JumbledWord[m]);\r\n```\r\n\r\nThis trace allowed me to see what jumbled word is being seen by the computer before it becomes a properly jumbled word that the user can deal with. This allowed me to see this:\r\n\r\n[Program output with trace in code](https://i.stack.imgur.com/6B7jA.png)\r\n\r\nIf you look carefully, you can see that every &#39;current puzzle&#39; is just the last four or five sequence of characters in that jumbled mess of letters. Presumably, this means the last sequence is being grabbed by the computer to become the &#39;current puzzle&#39;, which is in line with the logic inside my program, so that&#39;s a good sign that the program is working as intended. So what about using this trace to find what an infinite loop will look like?\r\n\r\nHere is another screenshot:\r\n\r\n[Program output with trace showing infinite loop](https://i.stack.imgur.com/5nePk.png)\r\n\r\nIn the above image, we see the program jumbling the word, but for some reason, the w character becomes more, and more frequently printed to the screen compared to all the other ones, and then it just keeps being printed to the screen indefinitely. But that is not something I expect to see given my code. I suspect there is a teeny tiny error in the algorithm that I concocted. It seems that the program occasionally jumbles words in a way that leaves out essential letters that need to be in that sequence of characters in order for the word to be correctly jumbled. We can see the same phenomena with this other screenshot:\r\n\r\n[Program output with trace showing infinite loop 2](https://i.stack.imgur.com/ewPC5.png)\r\n\r\nIn both pictures, one letter is being oddly left out with the first couple of &#39;jumbles.&#39; For the last picture, it is &#39;d&#39; and for the second to last picture, it is &#39;k&#39;. This may be a hint that with my algorithm, I am not actually &#39;jumbling&#39; letters, instead I am copying and pasting letters into certain indexes, inevitably resulting in odd cases where at least one letter is just &#39;pasted&#39; over or overwritten by other letters, never appearing again. I am not sure that this decisively solves the issue for me, though.","title":"Jumble word game written in Java using a random number generator non-deterministically gets the user stuck in an infinite loop. How to fix?","body":"<p>I was given instructions to program a jumble word game in Java last semester, as an assignment. My instructor said I could post this on stackoverflow after the due date for the assignment had expired, so nothing here is unauthorized outside help (aka cheating). A good description of the program is as follows:</p>\n<p>This program reads from a file of a long list of words, randomly selects one of those words, then randomly jumbles one of those words. The user will then see the jumbled word,\nand see a menu that allows them to either take a guess, get a hint, get a new word, or quit. Each new word gives a possible 10 points, but guessing incorrectly and getting hints\nwill decrease the total number of possible points the user can get from guessing the word correctly.</p>\n<p>If the total number of possible points reaches zero for a word,\nthe program will generate a new word for the user. If the user guesses the word correctly, the program will congratulate them, and display the number of points gained\nfrom that word, as well as the user's total score. Upon the exit of the program by the user, the program will display the final score of the user for that specific run.</p>\n<p>The file that has the list of words that I used is called words.txt, and it looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/CoJAf.png\" rel=\"nofollow noreferrer\">screenshot of 'words.txt'</a></p>\n<p>The first line is the number of words in the file. I use that to define the array size.</p>\n<p>Everything about the program works fine, except that sometimes when I play the game over and over again, I will get stuck in an infinite loop. The worst part is, there's no apparent pattern to the infinite loops, save for the fact that the infinite loop always occurs after the program identifies the word to be jumbled. But other than that, there is no easy pattern to see.</p>\n<p>I asked my instructor for help, and he said he didn't find anything that jumped out to him that was obviously faulty code-wise. He said he could've found out the problem if he stared at it for hours, but he didn't have that much time. Since he couldn't find out what was the with the code itself, he let me submit my code without penalty for this weird bug. I remember getting a perfect score on the assignment.</p>\n<p>Sometimes the bug will manifest itself in the first few iterations of the program:</p>\n<p><a href=\"https://i.stack.imgur.com/R4XG3.png\" rel=\"nofollow noreferrer\">Example1</a></p>\n<p><a href=\"https://i.stack.imgur.com/bNhDN.png\" rel=\"nofollow noreferrer\">Example2</a></p>\n<p>But sometimes it will take longer for the bug to manifest:</p>\n<p><a href=\"https://i.stack.imgur.com/BJopZ.png\" rel=\"nofollow noreferrer\">Example3</a></p>\n<p>Here is the computer program that I wrote:</p>\n<pre><code>import java.util.*;\nimport java.io.*;\n\npublic class Proj5{\n  public static void main(String [] args) throws IOException {\n    Scanner keyboard = new Scanner(System.in);\n    Random randGen = new Random();\n\n    System.out.print(&quot;Enter in text file containing words (Ex: words.txt): &quot;);\n    String filename = keyboard.nextLine();\n    System.out.println();\n\n    Scanner s = new Scanner(new File(filename));\n\n    String line = s.nextLine();\n    int arraySize = Integer.parseInt(line);\n\n    String [] WordList = new String [arraySize];\n\n    for(int i = 0; i &lt; arraySize; i++){\n      WordList[i] = s.nextLine();\n    }\n\n    s.close();\n\n    boolean OuterExitValue = true;\n\n    int totalScore = 0;\n\n    while(OuterExitValue){\n\n    int RandomWord = randGen.nextInt(WordList.length);\n\n    String CorrectWord = WordList[RandomWord];\n\n    int RandomN, k = 0, i = 0;\n\n    System.out.print(&quot;Word = &quot; + CorrectWord);\n\n    char [] JumbledWord = new char [CorrectWord.length()];\n    boolean [] check = new boolean [CorrectWord.length()];\n\n    while( i &lt; CorrectWord.length() ) {\n\n      RandomN = randGen.nextInt(CorrectWord.length());\n\n      if ( !(check[RandomN % CorrectWord.length()]) ) {\n\n        JumbledWord[RandomN % CorrectWord.length()] = CorrectWord.charAt(i);\n        //System.out.println(JumbledWord[i]);\n        check[RandomN % CorrectWord.length()] = true;\n        i++;\n\n      }\n\n      if ( i == CorrectWord.length() ){\n\n        for(int j = 0; j &lt; CorrectWord.length(); j++){\n\n          if( JumbledWord[j] == CorrectWord.charAt(j) )\n            k++;\n        }\n\n      }\n\n      if ( k == CorrectWord.length() ) {\n\n          i = 0;\n\n          for(int j = 0; j &lt; CorrectWord.length(); j++){\n            check[j] = false;\n          }\n\n        }\n\n    }\n\n    System.out.println();\n\n    int NPoints = 10;\n    String guess = &quot;a&quot;;\n    boolean InnerExitValue = true;\n\n    while(InnerExitValue){\n\n      System.out.print(&quot;Current puzzle: &quot;);\n\n      for (i = 0; i &lt; CorrectWord.length(); i++)\n        System.out.print(JumbledWord[i]);\n\n        System.out.println(&quot;\\nCurrent points for word: &quot; + NPoints);\n        System.out.print(&quot;Enter (g)uess, (n)ew word, (h)int, or (q)uit: &quot;);\n        char option = keyboard.next().toLowerCase().charAt(0);\n\n        switch (option) {\n\n          case 'q':\n            InnerExitValue = false;\n            OuterExitValue = false;\n            System.out.println(&quot;\\nThanks for Playing! Goodbye!&quot;);\n            System.out.println(&quot;Final score: &quot; + totalScore);\n            System.exit(0);\n            break;\n\n          case 'h':\n            int RandomLetter = randGen.nextInt(CorrectWord.length());\n            int RandomSpot = RandomLetter + 1;\n            System.out.println(&quot;\\nThe letter at spot &quot; + RandomSpot + &quot; is &quot; + CorrectWord.charAt(RandomLetter) + &quot;\\n&quot; );\n            NPoints = NPoints/2;\n            break;\n\n          case 'g':\n\n            System.out.print(&quot;\\nEnter your guess: &quot;);\n            guess = keyboard.next();\n\n            if ( !(guess.equalsIgnoreCase(CorrectWord)) ) {\n              NPoints -= 1;\n              System.out.println(&quot;Sorry, try again.\\n&quot;);\n            }\n            else{\n              totalScore += NPoints;\n              System.out.println(&quot;Congratulations! You guessed it!&quot;);\n              System.out.println(&quot;Score for word: &quot; + NPoints);\n              System.out.println(&quot;Total score: &quot; + totalScore);\n              System.out.println();\n              InnerExitValue = false;\n            }\n            break;\n\n          case 'n':\n            InnerExitValue = false;\n            System.out.println();\n            break;\n\n          default:\n            System.out.println(&quot;Invalid Choice - 'g', 'n' 'h' or 'q' only.\\n&quot;);\n        }\n\n        if(NPoints == 0){\n          System.out.println(&quot;Word points = 0. Generating a new word&quot;);\n          InnerExitValue = false;\n        }\n\n\n      }\n\n    }\n\n}\n}\n</code></pre>\n<p>I tried some things out with my code. I used traces to find out where my code was getting stuck in an infinite loop, and it turns out that the infinite loop is always occurring in the first while loop that has the purpose of jumbling a word and checking that it's jumbled properly. I added this trace at the bottom of the first while loop, right before the bracket, where I just inputted:</p>\n<pre><code>for(int m = 0; m &lt; CorrectWord.length(); m++)\n          System.out.print(JumbledWord[m]);\n</code></pre>\n<p>This trace allowed me to see what jumbled word is being seen by the computer before it becomes a properly jumbled word that the user can deal with. This allowed me to see this:</p>\n<p><a href=\"https://i.stack.imgur.com/6B7jA.png\" rel=\"nofollow noreferrer\">Program output with trace in code</a></p>\n<p>If you look carefully, you can see that every 'current puzzle' is just the last four or five sequence of characters in that jumbled mess of letters. Presumably, this means the last sequence is being grabbed by the computer to become the 'current puzzle', which is in line with the logic inside my program, so that's a good sign that the program is working as intended. So what about using this trace to find what an infinite loop will look like?</p>\n<p>Here is another screenshot:</p>\n<p><a href=\"https://i.stack.imgur.com/5nePk.png\" rel=\"nofollow noreferrer\">Program output with trace showing infinite loop</a></p>\n<p>In the above image, we see the program jumbling the word, but for some reason, the w character becomes more, and more frequently printed to the screen compared to all the other ones, and then it just keeps being printed to the screen indefinitely. But that is not something I expect to see given my code. I suspect there is a teeny tiny error in the algorithm that I concocted. It seems that the program occasionally jumbles words in a way that leaves out essential letters that need to be in that sequence of characters in order for the word to be correctly jumbled. We can see the same phenomena with this other screenshot:</p>\n<p><a href=\"https://i.stack.imgur.com/ewPC5.png\" rel=\"nofollow noreferrer\">Program output with trace showing infinite loop 2</a></p>\n<p>In both pictures, one letter is being oddly left out with the first couple of 'jumbles.' For the last picture, it is 'd' and for the second to last picture, it is 'k'. This may be a hint that with my algorithm, I am not actually 'jumbling' letters, instead I am copying and pasting letters into certain indexes, inevitably resulting in odd cases where at least one letter is just 'pasted' over or overwritten by other letters, never appearing again. I am not sure that this decisively solves the issue for me, though.</p>\n"},{"tags":["java","android","android-recyclerview","sharedpreferences"],"answers":[{"tags":[],"owner":{"account_id":402229,"reputation":94004,"user_id":769265,"display_name":"David Wasser"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672268903,"creation_date":1672268903,"answer_id":74945795,"question_id":74945578,"body_markdown":"When you return to the list after adding an item, you reread all the items from the `SharedPreferences` in `StartDisplay()` (which is called from `onResume()`. This changes the data that the adapter is working with. However, you didn&#39;t tell the adapter that the data has changed. The adapter caches the `View`s and you must tell it when you modify the data, otherwise it doesn&#39;t know the data has changed. Add the following to `StartDisplay()` which will invalidate the adapter&#39;s cache and ensure that it rebuilds all the views:\r\n\r\n    adapter.notifyDataSetChanged()\r\n","title":"Why does the Recycleview work differently when I start it or when I go back to it from an other activity?","body":"<p>When you return to the list after adding an item, you reread all the items from the <code>SharedPreferences</code> in <code>StartDisplay()</code> (which is called from <code>onResume()</code>. This changes the data that the adapter is working with. However, you didn't tell the adapter that the data has changed. The adapter caches the <code>View</code>s and you must tell it when you modify the data, otherwise it doesn't know the data has changed. Add the following to <code>StartDisplay()</code> which will invalidate the adapter's cache and ensure that it rebuilds all the views:</p>\n<pre><code>adapter.notifyDataSetChanged()\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16056091,"reputation":516,"user_id":11588396,"display_name":"Aero Blue"},"score":0,"creation_date":1672404726,"post_id":74956492,"comment_id":132283693,"body_markdown":"Instead of replying to the post, remember to use the &quot;Add a comment&quot; button to reply to a user. You can also use the @ symbol to tag them directly.","body":"Instead of replying to the post, remember to use the &quot;Add a comment&quot; button to reply to a user. You can also use the @ symbol to tag them directly."}],"tags":[],"owner":{"account_id":17536051,"reputation":13,"user_id":20830082,"display_name":"&#193;kos Szegleti"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672351932,"creation_date":1672351932,"answer_id":74956492,"question_id":74945578,"body_markdown":"Thank you for your help! It works.\r\nBut I noticed an other bug, what I would like to share.\r\nThe `StartDisplay()` function is earlier then where I define the adapter exactly so when I used the `adapter.notifyDataSetChanged()` then I got an exception as null object reference. So I put the function calling to the end of the initialization part and now everything is fine.","title":"Why does the Recycleview work differently when I start it or when I go back to it from an other activity?","body":"<p>Thank you for your help! It works.\nBut I noticed an other bug, what I would like to share.\nThe <code>StartDisplay()</code> function is earlier then where I define the adapter exactly so when I used the <code>adapter.notifyDataSetChanged()</code> then I got an exception as null object reference. So I put the function calling to the end of the initialization part and now everything is fine.</p>\n"}],"owner":{"account_id":17536051,"reputation":13,"user_id":20830082,"display_name":"&#193;kos Szegleti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74945795,"answer_count":2,"score":1,"last_activity_date":1672351932,"creation_date":1672266862,"question_id":74945578,"body_markdown":"I try to create a Shopping/ToDoList application where the items are contained in SharedPreferences.\r\nWhen I start the application, and I choose what I want to execute, Shopping list part or ToDoList part, then the java code fetches the existing data from the SharedPreferences and give to the RecycleView to create and show a list.\r\nIt seems works totally correct, but if I push the &quot;add&quot; button, then a new Activity is executed where I can specify the items, and when I click the save button, then the java code safe to the SharedPreferences and close the Activity and goes back to the &quot;list&quot; activity where the list should appears again with the new item. But when one data is inserted not in order in SharedPreferences but between two older data then the list create method get crazy and repeat always only the last data from SharedPreferences. But when I close the application, and restart, or goes back to the Main activity where I can choose again which list part I want then the list is totally OK again.\r\n\r\nThat is the list creating java code:\r\n\r\n\r\n```\r\npackage com.example.recycleviewapp;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport java.util.LinkedList;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class ShoppingList extends AppCompatActivity implements MyRecyclerViewAdapter.ItemClickListener, View.OnClickListener {\r\n\r\n    public MyRecyclerViewAdapter adapter;\r\n    public Button btn;\r\n    public SharedPreferences sharedPreferences;\r\n    public SharedPreferences.Editor myEdit;\r\n    private List&lt;String&gt; items;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_shoppinglist);\r\n        sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\r\n        myEdit = sharedPreferences.edit();\r\n        btn = findViewById(R.id.button);\r\n        items = new LinkedList&lt;&gt;();\r\n        StartDisplay();\r\n        RecyclerView recyclerView = findViewById(R.id.list);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n        adapter = new MyRecyclerViewAdapter(this,items);\r\n        adapter.setClickListener(this);\r\n        recyclerView.setAdapter(adapter);\r\n        btn.setOnClickListener(this);\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onItemClick(View view, int position) {\r\n        //sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\r\n        String item_click =adapter.getItem(position);\r\n        String[] itemarray = item_click.split(&quot; &quot;,0);\r\n        //Toast.makeText(this, adapter.RemoveItem(position), Toast.LENGTH_SHORT).show();\r\n        //adapter.RemoveItem(position);\r\n        //myEdit = sharedPreferences.edit();\r\n        myEdit.remove(itemarray[0]);\r\n        myEdit.commit();\r\n        adapter.notifyItemRemoved(position);\r\n        items.remove(item_click);\r\n    }\r\n\r\n    @Override\r\n    public void onClick(View v) {\r\n        Intent NewSLItem = new Intent(ShoppingList.this, NewSLItem.class);\r\n        startActivity(NewSLItem);\r\n    }\r\n    @Override\r\n    public void onResume() {\r\n        super.onResume();\r\n        StartDisplay();\r\n\r\n\r\n    }\r\n    public void StartDisplay()\r\n    {\r\n        //sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\r\n        Map&lt;String, ?&gt; allEntries = sharedPreferences.getAll();\r\n        items.clear();\r\n        for (Map.Entry&lt;String, ?&gt; entry : allEntries.entrySet())\r\n        {\r\n            //Toast.makeText(this, entry.getKey(), Toast.LENGTH_SHORT).show();\r\n            String [] item_total = entry.getValue().toString().split(&quot;;&quot;);\r\n            items.add(entry.getKey() + &quot; &quot; + item_total[0] + &quot; &quot; + item_total[1]);\r\n\r\n        }\r\n        allEntries.clear();\r\n\r\n    }\r\n}\r\n```\r\n\r\nHere is the code where I can specify the item:\r\n\r\n\r\n```\r\npackage com.example.recycleviewapp;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ListView;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class NewSLItem extends MainActivity {\r\n    private ArrayList&lt;String&gt; items;\r\n    private ArrayAdapter&lt;String&gt; itemsAdapter;\r\n    private ListView lvItems;\r\n    private Button btn;\r\n    public SharedPreferences sharedPreferences;\r\n    public SharedPreferences.Editor myEdit;\r\n    public List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n    public EditText etNewItem;\r\n    public String[] unit = {&quot;liter&quot;, &quot;kg&quot;, &quot;pcs&quot;};\r\n    public Spinner spinner;\r\n    public EditText amount;\r\n    public String itemName;\r\n    public TextView title;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_shoppinglist_popup);\r\n        sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\r\n        myEdit = sharedPreferences.edit();\r\n        btn = (Button)findViewById(R.id.addbtn);\r\n        title = findViewById(R.id.title);\r\n        etNewItem = (EditText) findViewById(R.id.etNewItem);\r\n        amount = (EditText) findViewById(R.id.amount);\r\n        spinner = (Spinner) findViewById(R.id.spinner);\r\n        ArrayAdapter aa = new ArrayAdapter(this,android.R.layout.simple_spinner_item,unit);\r\n        aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        spinner.setAdapter(aa);\r\n        title.setText(&quot;Create a new item for ShoppingList&quot;);\r\n        btn.setOnClickListener(new View.OnClickListener() {\r\n\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                onAddItem();\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n    public void onAddItem()\r\n    {\r\n        //myEdit = sharedPreferences.edit();\r\n        itemName = etNewItem.getText().toString();\r\n        String itemValue = amount.getText().toString() + &quot;;&quot; + spinner.getSelectedItem().toString();\r\n        myEdit.putString(itemName,itemValue);\r\n        myEdit.commit();\r\n        etNewItem.setText(&quot;&quot;);\r\n    }\r\n}\r\n\r\n```\r\nand here is the RecyclerView code:\r\n\r\n\r\n```\r\npackage com.example.recycleviewapp;\r\n\r\nimport android.content.Context;\r\nimport android.graphics.Color;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport java.util.List;\r\n\r\npublic class MyRecyclerViewAdapter extends RecyclerView.Adapter&lt;MyRecyclerViewAdapter.ViewHolder&gt; {\r\n\r\n    private List&lt;String&gt; mData;\r\n    private LayoutInflater mInflater;\r\n    private ItemClickListener mClickListener;\r\n\r\n\r\n    MyRecyclerViewAdapter(Context context, List&lt;String&gt; data) {\r\n        this.mInflater = LayoutInflater.from(context);\r\n        this.mData = data;\r\n\r\n    }\r\n\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n        View view = mInflater.inflate(R.layout.recyclerview_row, parent, false);\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(ViewHolder holder, int position) {\r\n        String meta_data = mData.get(position);\r\n        if (meta_data.contains(&quot;High&quot;)) holder.myTextView.setBackgroundColor(Color.parseColor(&quot;#FF003B&quot;));\r\n        holder.myTextView.setText(meta_data);\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return mData.size();\r\n    }\r\n\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\r\n        TextView myTextView;\r\n\r\n        ViewHolder(View itemView) {\r\n            super(itemView);\r\n            myTextView = itemView.findViewById(R.id.tvAnimalName);\r\n            itemView.setOnClickListener(this);\r\n        }\r\n\r\n        @Override\r\n        public void onClick(View view)\r\n        {\r\n        if (mClickListener != null) mClickListener.onItemClick(view, getAdapterPosition());\r\n        }\r\n    }\r\n\r\n    String getItem(int id) {return mData.get(id);\r\n    }\r\n\r\n\r\n    void setClickListener(ItemClickListener itemClickListener) {\r\n        this.mClickListener = itemClickListener;\r\n    }\r\n\r\n    public interface ItemClickListener {\r\n        void onItemClick(View view, int position);\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nSo the problem is in casef of only where the data is not in order in SharedPreferences and I go back from a new activity.\r\n\r\nPlease help me if you can, where should I fix my application?\r\nThanks in advance!!!","title":"Why does the Recycleview work differently when I start it or when I go back to it from an other activity?","body":"<p>I try to create a Shopping/ToDoList application where the items are contained in SharedPreferences.\nWhen I start the application, and I choose what I want to execute, Shopping list part or ToDoList part, then the java code fetches the existing data from the SharedPreferences and give to the RecycleView to create and show a list.\nIt seems works totally correct, but if I push the &quot;add&quot; button, then a new Activity is executed where I can specify the items, and when I click the save button, then the java code safe to the SharedPreferences and close the Activity and goes back to the &quot;list&quot; activity where the list should appears again with the new item. But when one data is inserted not in order in SharedPreferences but between two older data then the list create method get crazy and repeat always only the last data from SharedPreferences. But when I close the application, and restart, or goes back to the Main activity where I can choose again which list part I want then the list is totally OK again.</p>\n<p>That is the list creating java code:</p>\n<pre><code>package com.example.recycleviewapp;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.Toast;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.recyclerview.widget.LinearLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\nimport java.util.LinkedList;\nimport java.util.List;\nimport java.util.Map;\n\npublic class ShoppingList extends AppCompatActivity implements MyRecyclerViewAdapter.ItemClickListener, View.OnClickListener {\n\n    public MyRecyclerViewAdapter adapter;\n    public Button btn;\n    public SharedPreferences sharedPreferences;\n    public SharedPreferences.Editor myEdit;\n    private List&lt;String&gt; items;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_shoppinglist);\n        sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\n        myEdit = sharedPreferences.edit();\n        btn = findViewById(R.id.button);\n        items = new LinkedList&lt;&gt;();\n        StartDisplay();\n        RecyclerView recyclerView = findViewById(R.id.list);\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\n        adapter = new MyRecyclerViewAdapter(this,items);\n        adapter.setClickListener(this);\n        recyclerView.setAdapter(adapter);\n        btn.setOnClickListener(this);\n\n    }\n\n    @Override\n    public void onItemClick(View view, int position) {\n        //sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\n        String item_click =adapter.getItem(position);\n        String[] itemarray = item_click.split(&quot; &quot;,0);\n        //Toast.makeText(this, adapter.RemoveItem(position), Toast.LENGTH_SHORT).show();\n        //adapter.RemoveItem(position);\n        //myEdit = sharedPreferences.edit();\n        myEdit.remove(itemarray[0]);\n        myEdit.commit();\n        adapter.notifyItemRemoved(position);\n        items.remove(item_click);\n    }\n\n    @Override\n    public void onClick(View v) {\n        Intent NewSLItem = new Intent(ShoppingList.this, NewSLItem.class);\n        startActivity(NewSLItem);\n    }\n    @Override\n    public void onResume() {\n        super.onResume();\n        StartDisplay();\n\n\n    }\n    public void StartDisplay()\n    {\n        //sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\n        Map&lt;String, ?&gt; allEntries = sharedPreferences.getAll();\n        items.clear();\n        for (Map.Entry&lt;String, ?&gt; entry : allEntries.entrySet())\n        {\n            //Toast.makeText(this, entry.getKey(), Toast.LENGTH_SHORT).show();\n            String [] item_total = entry.getValue().toString().split(&quot;;&quot;);\n            items.add(entry.getKey() + &quot; &quot; + item_total[0] + &quot; &quot; + item_total[1]);\n\n        }\n        allEntries.clear();\n\n    }\n}\n</code></pre>\n<p>Here is the code where I can specify the item:</p>\n<pre><code>package com.example.recycleviewapp;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.ArrayAdapter;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.ListView;\nimport android.widget.Spinner;\nimport android.widget.TextView;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class NewSLItem extends MainActivity {\n    private ArrayList&lt;String&gt; items;\n    private ArrayAdapter&lt;String&gt; itemsAdapter;\n    private ListView lvItems;\n    private Button btn;\n    public SharedPreferences sharedPreferences;\n    public SharedPreferences.Editor myEdit;\n    public List&lt;String&gt; list = new ArrayList&lt;&gt;();\n    public EditText etNewItem;\n    public String[] unit = {&quot;liter&quot;, &quot;kg&quot;, &quot;pcs&quot;};\n    public Spinner spinner;\n    public EditText amount;\n    public String itemName;\n    public TextView title;\n    @Override\n    protected void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_shoppinglist_popup);\n        sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\n        myEdit = sharedPreferences.edit();\n        btn = (Button)findViewById(R.id.addbtn);\n        title = findViewById(R.id.title);\n        etNewItem = (EditText) findViewById(R.id.etNewItem);\n        amount = (EditText) findViewById(R.id.amount);\n        spinner = (Spinner) findViewById(R.id.spinner);\n        ArrayAdapter aa = new ArrayAdapter(this,android.R.layout.simple_spinner_item,unit);\n        aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\n        spinner.setAdapter(aa);\n        title.setText(&quot;Create a new item for ShoppingList&quot;);\n        btn.setOnClickListener(new View.OnClickListener() {\n\n            @Override\n            public void onClick(View v)\n            {\n                onAddItem();\n                finish();\n            }\n        });\n    }\n    public void onAddItem()\n    {\n        //myEdit = sharedPreferences.edit();\n        itemName = etNewItem.getText().toString();\n        String itemValue = amount.getText().toString() + &quot;;&quot; + spinner.getSelectedItem().toString();\n        myEdit.putString(itemName,itemValue);\n        myEdit.commit();\n        etNewItem.setText(&quot;&quot;);\n    }\n}\n\n</code></pre>\n<p>and here is the RecyclerView code:</p>\n<pre><code>package com.example.recycleviewapp;\n\nimport android.content.Context;\nimport android.graphics.Color;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport java.util.List;\n\npublic class MyRecyclerViewAdapter extends RecyclerView.Adapter&lt;MyRecyclerViewAdapter.ViewHolder&gt; {\n\n    private List&lt;String&gt; mData;\n    private LayoutInflater mInflater;\n    private ItemClickListener mClickListener;\n\n\n    MyRecyclerViewAdapter(Context context, List&lt;String&gt; data) {\n        this.mInflater = LayoutInflater.from(context);\n        this.mData = data;\n\n    }\n\n    @Override\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View view = mInflater.inflate(R.layout.recyclerview_row, parent, false);\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(ViewHolder holder, int position) {\n        String meta_data = mData.get(position);\n        if (meta_data.contains(&quot;High&quot;)) holder.myTextView.setBackgroundColor(Color.parseColor(&quot;#FF003B&quot;));\n        holder.myTextView.setText(meta_data);\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return mData.size();\n    }\n\n\n    public class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\n        TextView myTextView;\n\n        ViewHolder(View itemView) {\n            super(itemView);\n            myTextView = itemView.findViewById(R.id.tvAnimalName);\n            itemView.setOnClickListener(this);\n        }\n\n        @Override\n        public void onClick(View view)\n        {\n        if (mClickListener != null) mClickListener.onItemClick(view, getAdapterPosition());\n        }\n    }\n\n    String getItem(int id) {return mData.get(id);\n    }\n\n\n    void setClickListener(ItemClickListener itemClickListener) {\n        this.mClickListener = itemClickListener;\n    }\n\n    public interface ItemClickListener {\n        void onItemClick(View view, int position);\n    }\n\n\n}\n</code></pre>\n<p>So the problem is in casef of only where the data is not in order in SharedPreferences and I go back from a new activity.</p>\n<p>Please help me if you can, where should I fix my application?\nThanks in advance!!!</p>\n"},{"tags":["java","file-io"],"comments":[{"owner":{"account_id":90083,"reputation":28474,"user_id":248129,"accept_rate":75,"display_name":"Richard JP Le Guen"},"score":1,"creation_date":1269811772,"post_id":2534632,"comment_id":2534260,"body_markdown":"... what&#39;s the question? Are you just looking for validation that this code will work?","body":"... what&#39;s the question? Are you just looking for validation that this code will work?"},{"owner":{"account_id":102334,"reputation":3710,"user_id":274752,"accept_rate":67,"display_name":"Hultner"},"score":0,"creation_date":1269812014,"post_id":2534632,"comment_id":2534275,"body_markdown":"No, I know this code works but it&#39;s very slow and it feels like it&#39;s stupid access the filesystem and get the contents for every subdirectory instead of getting everything at once.","body":"No, I know this code works but it&#39;s very slow and it feels like it&#39;s stupid access the filesystem and get the contents for every subdirectory instead of getting everything at once."},{"owner":{"account_id":2065488,"reputation":11429,"user_id":1841054,"accept_rate":93,"display_name":"Prahalad Gaggar"},"score":1,"creation_date":1372827209,"post_id":2534632,"comment_id":25334564,"body_markdown":"possible duplicate of [Recursively list files in Java](http://stackoverflow.com/questions/2056221/recursively-list-files-in-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/2056221/recursively-list-files-in-java\">Recursively list files in Java</a>"}],"answers":[{"comments":[{"owner":{"account_id":102334,"reputation":3710,"user_id":274752,"accept_rate":67,"display_name":"Hultner"},"score":0,"creation_date":1269813014,"post_id":2534643,"comment_id":2534357,"body_markdown":"I looked there and from that I would use http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/FileUtils.html to get all the file from the directory and subdirectories and then search through the files so that they match my regex. Or am I wrong?","body":"I looked there and from that I would use <a href=\"http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/FileUtils.html\" rel=\"nofollow noreferrer\">commons.apache.org/io/api-release/index.html?org/apache/comm&zwnj;&#8203;ons/&hellip;</a> to get all the file from the directory and subdirectories and then search through the files so that they match my regex. Or am I wrong?"},{"owner":{"account_id":102334,"reputation":3710,"user_id":274752,"accept_rate":67,"display_name":"Hultner"},"score":0,"creation_date":1269818685,"post_id":2534643,"comment_id":2534729,"body_markdown":"Yeah problem it takes over an hour to scan the folder and doing that every time I start the program to check for updates is extremely annoying. Would it be faster if I wrote this part of the program in C and the rest in Java and if so would it be any significant difference? For now I changed the code on the if isdir line and added so that the directory also have to match a regex to be included in the search. I see that in your example it says  DirectoryFileFilter.DIRECTORY, I guesss I could have a regex filter there.","body":"Yeah problem it takes over an hour to scan the folder and doing that every time I start the program to check for updates is extremely annoying. Would it be faster if I wrote this part of the program in C and the rest in Java and if so would it be any significant difference? For now I changed the code on the if isdir line and added so that the directory also have to match a regex to be included in the search. I see that in your example it says  DirectoryFileFilter.DIRECTORY, I guesss I could have a regex filter there."},{"owner":{"account_id":6508,"reputation":16117,"user_id":10973,"accept_rate":94,"display_name":"Kevin Day"},"score":1,"creation_date":1301540828,"post_id":2534643,"comment_id":6234694,"body_markdown":"writing it using native calls would absolutely make it faster - FindFirstFile/FineNextFile allows you to query the file attributes without having to make a separate call for it - this can have massive implications for higher latency networks.  Java&#39;s approach to this is horribly inefficient.","body":"writing it using native calls would absolutely make it faster - FindFirstFile/FineNextFile allows you to query the file attributes without having to make a separate call for it - this can have massive implications for higher latency networks.  Java&#39;s approach to this is horribly inefficient."},{"owner":{"account_id":102334,"reputation":3710,"user_id":274752,"accept_rate":67,"display_name":"Hultner"},"score":5,"creation_date":1433319258,"post_id":2534643,"comment_id":49295429,"body_markdown":"@hanzallah-afgan: Both the question and the answer is over 5 years old. There&#39;s been two major Java releases during the time that have past so you might wan&#39;t to investigate newer features such as Java 7 NIO.","body":"@hanzallah-afgan: Both the question and the answer is over 5 years old. There&#39;s been two major Java releases during the time that have past so you might wan&#39;t to investigate newer features such as Java 7 NIO."},{"owner":{"account_id":3766348,"reputation":716,"user_id":3129780,"accept_rate":78,"display_name":"Hanzallah Afgan"},"score":0,"creation_date":1433562606,"post_id":2534643,"comment_id":49418718,"body_markdown":"Yes, But that wasn&#39;t bad too. BTW You are prodding right too.","body":"Yes, But that wasn&#39;t bad too. BTW You are prodding right too."},{"owner":{"account_id":2495635,"reputation":2575,"user_id":2172135,"accept_rate":73,"display_name":"Mushy"},"score":0,"creation_date":1479324709,"post_id":2534643,"comment_id":68513454,"body_markdown":"@skaffman How can I adapt the above code for use in display subdirectories and files from present directory?","body":"@skaffman How can I adapt the above code for use in display subdirectories and files from present directory?"},{"owner":{"account_id":4166869,"reputation":1208,"user_id":3488735,"accept_rate":82,"display_name":"Gewure"},"score":0,"creation_date":1479739005,"post_id":2534643,"comment_id":68672246,"body_markdown":"this answer is very deprecated","body":"this answer is very deprecated"},{"owner":{"account_id":64856,"reputation":29696,"user_id":191246,"accept_rate":77,"display_name":"ccpizza"},"score":4,"creation_date":1492932318,"post_id":2534643,"comment_id":74187024,"body_markdown":"Only use FileUtils if you are aware of and accept the performance hit: https://github.com/brettryan/io-recurse-tests. Native java8 alternatives allow for a terse and more efficient notation e.g.: `Files.walk(Paths.get(&quot;/etc&quot;)).filter(Files::isRegularFile).collect(Collectors.toList())`","body":"Only use FileUtils if you are aware of and accept the performance hit: <a href=\"https://github.com/brettryan/io-recurse-tests\" rel=\"nofollow noreferrer\">github.com/brettryan/io-recurse-tests</a>. Native java8 alternatives allow for a terse and more efficient notation e.g.: <code>Files.walk(Paths.get(&quot;&#47;etc&quot;)).filter(Files::isRegularFile).c&zwnj;&#8203;ollect(Collectors.to&zwnj;&#8203;List())</code>"}],"tags":[],"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"comment_count":8,"down_vote_count":0,"up_vote_count":146,"is_accepted":true,"score":146,"last_activity_date":1377675067,"creation_date":1269811805,"answer_id":2534643,"question_id":2534632,"body_markdown":"Assuming this is actual production code you&#39;ll be writing, then I suggest using the solution to this sort of thing that&#39;s already been solved - [Apache Commons IO][1], specifically [`FileUtils.listFiles()`][2]. It handles nested directories, filters (based on name, modification time, etc).\r\n\r\nFor example, for your regex:\r\n\r\n    Collection files = FileUtils.listFiles(\r\n      dir, \r\n      new RegexFileFilter(&quot;^(.*?)&quot;), \r\n      DirectoryFileFilter.DIRECTORY\r\n    );\r\n\r\nThis will recursively search for files matching the `^(.*?)` regex, returning the results as a collection.\r\n\r\nIt&#39;s worth noting that this will be no faster than rolling your own code, it&#39;s doing the same thing - trawling a filesystem in Java is just slow. The difference is, the Apache Commons version will have no bugs in it.\r\n\r\n  [1]: http://commons.apache.org/proper/commons-io/\r\n  [2]: http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FileUtils.html#listFiles%28java.io.File,%20org.apache.commons.io.filefilter.IOFileFilter,%20org.apache.commons.io.filefilter.IOFileFilter%29","title":"List all files from a directory recursively with Java","body":"<p>Assuming this is actual production code you'll be writing, then I suggest using the solution to this sort of thing that's already been solved - <a href=\"http://commons.apache.org/proper/commons-io/\" rel=\"noreferrer\">Apache Commons IO</a>, specifically <a href=\"http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FileUtils.html#listFiles%28java.io.File,%20org.apache.commons.io.filefilter.IOFileFilter,%20org.apache.commons.io.filefilter.IOFileFilter%29\" rel=\"noreferrer\"><code>FileUtils.listFiles()</code></a>. It handles nested directories, filters (based on name, modification time, etc).</p>\n\n<p>For example, for your regex:</p>\n\n<pre><code>Collection files = FileUtils.listFiles(\n  dir, \n  new RegexFileFilter(\"^(.*?)\"), \n  DirectoryFileFilter.DIRECTORY\n);\n</code></pre>\n\n<p>This will recursively search for files matching the <code>^(.*?)</code> regex, returning the results as a collection.</p>\n\n<p>It's worth noting that this will be no faster than rolling your own code, it's doing the same thing - trawling a filesystem in Java is just slow. The difference is, the Apache Commons version will have no bugs in it.</p>\n"},{"comments":[{"owner":{"account_id":102334,"reputation":3710,"user_id":274752,"accept_rate":67,"display_name":"Hultner"},"score":0,"creation_date":1269814450,"post_id":2534741,"comment_id":2534462,"body_markdown":"Thing is I want to load all files of a certain type with a certain name format into a library which is presented to the user and everytime the app is started the library is supposed to be updated but it takes forever to update the library. Only solution I got is to run the update in the background but it&#39;s still annoying that it takes so long time until all the new files are loaded. There must be a better way to do it. Or at least a better way to update the database. It feels stupid for it to go through all the files it have already gone through onces. Is there a way to only find updates fast.","body":"Thing is I want to load all files of a certain type with a certain name format into a library which is presented to the user and everytime the app is started the library is supposed to be updated but it takes forever to update the library. Only solution I got is to run the update in the background but it&#39;s still annoying that it takes so long time until all the new files are loaded. There must be a better way to do it. Or at least a better way to update the database. It feels stupid for it to go through all the files it have already gone through onces. Is there a way to only find updates fast."},{"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"score":0,"creation_date":1269856809,"post_id":2534741,"comment_id":2537008,"body_markdown":"@Hultner: Java 7 will include a facility for getting notified of filesystem updates, but that would still only work while the app is running, so unless you want to have a background service run all the time, it would not help. There might be special issues with network shares as Kevin describes, but as long as you depend on scanning through the entire directory tree, there really is no better way.","body":"@Hultner: Java 7 will include a facility for getting notified of filesystem updates, but that would still only work while the app is running, so unless you want to have a background service run all the time, it would not help. There might be special issues with network shares as Kevin describes, but as long as you depend on scanning through the entire directory tree, there really is no better way."},{"owner":{"account_id":79742,"reputation":19393,"user_id":225899,"accept_rate":85,"display_name":"James P."},"score":0,"creation_date":1297087505,"post_id":2534741,"comment_id":5484150,"body_markdown":"Perhaps you could create some index files. If there&#39;s a way to check the directory size you could simply scan for new files when the size changes.","body":"Perhaps you could create some index files. If there&#39;s a way to check the directory size you could simply scan for new files when the size changes."},{"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"score":0,"creation_date":1297088975,"post_id":2534741,"comment_id":5484476,"body_markdown":"@James: there is no way to check the directory size. The size of a directory is obtained by getting the size for each file and adding them up, in all filesystems I am aware of. Actually, the question &quot;what is the size of this directory?&quot; does not even neccessarily make sense at all if you consider hardlinks.","body":"@James: there is no way to check the directory size. The size of a directory is obtained by getting the size for each file and adding them up, in all filesystems I am aware of. Actually, the question &quot;what is the size of this directory?&quot; does not even neccessarily make sense at all if you consider hardlinks."},{"owner":{"account_id":79742,"reputation":19393,"user_id":225899,"accept_rate":85,"display_name":"James P."},"score":0,"creation_date":1297092994,"post_id":2534741,"comment_id":5485495,"body_markdown":"You&#39;re right. I still feel that some caching and/or fingerprinting could speed up the process.","body":"You&#39;re right. I still feel that some caching and/or fingerprinting could speed up the process."}],"tags":[],"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1269813585,"creation_date":1269813585,"answer_id":2534741,"question_id":2534632,"body_markdown":"&gt; it feels like it&#39;s stupid access the\r\n&gt; filesystem and get the contents for\r\n&gt; every subdirectory instead of getting\r\n&gt; everything at once.\r\n\r\nYour feeling is wrong. That&#39;s how filesystems work. There is no faster way (except when you have to do this repeatedly or for different patterns, you can cache all the file paths in memory, but then you have to deal with cache invalidation i.e. what happens when files are added/removed/renamed while the app runs).","title":"List all files from a directory recursively with Java","body":"<blockquote>\n  <p>it feels like it's stupid access the\n  filesystem and get the contents for\n  every subdirectory instead of getting\n  everything at once.</p>\n</blockquote>\n\n<p>Your feeling is wrong. That's how filesystems work. There is no faster way (except when you have to do this repeatedly or for different patterns, you can cache all the file paths in memory, but then you have to deal with cache invalidation i.e. what happens when files are added/removed/renamed while the app runs).</p>\n"},{"comments":[{"owner":{"account_id":137113,"reputation":11637,"user_id":341091,"accept_rate":75,"display_name":"Martin"},"score":3,"creation_date":1326958990,"post_id":2535558,"comment_id":11163465,"body_markdown":"Java 7 is now there so an example on how to do it in Java 7 would be helpful. Or at least a link. Or a class name to search for on google. — this is &#171;stackoverflow&#187; and not &#171;theoretical cs&#187; after all ;-) .","body":"Java 7 is now there so an example on how to do it in Java 7 would be helpful. Or at least a link. Or a class name to search for on google. — this is &#171;stackoverflow&#187; and not &#171;theoretical cs&#187; after all ;-) ."},{"owner":{"account_id":6508,"reputation":16117,"user_id":10973,"accept_rate":94,"display_name":"Kevin Day"},"score":3,"creation_date":1328054246,"post_id":2535558,"comment_id":11413524,"body_markdown":"well lets see...  My original post was in March 2010...  It&#39;s now January 2012...  And I just checked my equipment inventory history, and I don&#39;t see myself having had a time machine back in March &#39;10, so I think I&#39;m probably justified in answering without giving explicit example ;-)","body":"well lets see...  My original post was in March 2010...  It&#39;s now January 2012...  And I just checked my equipment inventory history, and I don&#39;t see myself having had a time machine back in March &#39;10, so I think I&#39;m probably justified in answering without giving explicit example ;-)"},{"owner":{"account_id":403847,"reputation":23234,"user_id":771837,"display_name":"trutheality"},"score":4,"creation_date":1336595527,"post_id":2535558,"comment_id":13610842,"body_markdown":"@Martin [These are the docs you&#39;re looking for.](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#walkFileTree%28java.nio.file.Path,%20java.util.Set,%20int,%20java.nio.file.FileVisitor%29)","body":"@Martin <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#walkFileTree%28java.nio.file.Path,%20java.util.Set,%20int,%20java.nio.file.FileVisitor%29\" rel=\"nofollow noreferrer\">These are the docs you&#39;re looking for.</a>"}],"tags":[],"owner":{"account_id":6508,"reputation":16117,"user_id":10973,"accept_rate":94,"display_name":"Kevin Day"},"comment_count":3,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1269831338,"creation_date":1269831338,"answer_id":2535558,"question_id":2534632,"body_markdown":"Java&#39;s interface for reading filesystem folder contents is not very performant (as you&#39;ve discovered).  JDK 7 fixes this with a completely new interface for this sort of thing, which should bring native level performance to these sorts of operations.\r\n\r\nThe core issue is that Java makes a native system call for every single file.  On a low latency interface, this is not that big of a deal - but on a network with even moderate latency, it really adds up.  If you profile your algorithm above, you&#39;ll find that the bulk of the time is spent in the pesky isDirectory() call - that&#39;s because you are incurring a round trip for every single call to isDirectory().  Most modern OSes can provide this sort of information when the list of files/folders was originally requested (as opposed to querying each individual file path for it&#39;s properties).\r\n\r\nIf you can&#39;t wait for JDK7, one strategy for addressing this latency is to go multi-threaded and use an ExecutorService with a maximum # of threads to perform your recursion.  It&#39;s not great (you have to deal with locking of your output data structures), but it&#39;ll be a heck of a lot faster than doing this single threaded.\r\n\r\nIn all of your discussions about this sort of thing, I highly recommend that you compare against the best you could do using native code (or even a command line script that does roughly the same thing).  Saying that it takes an hour to traverse a network structure doesn&#39;t really mean that much.  Telling us that you can do it native in 7 second, but it takes an hour in Java will get people&#39;s attention.","title":"List all files from a directory recursively with Java","body":"<p>Java's interface for reading filesystem folder contents is not very performant (as you've discovered).  JDK 7 fixes this with a completely new interface for this sort of thing, which should bring native level performance to these sorts of operations.</p>\n\n<p>The core issue is that Java makes a native system call for every single file.  On a low latency interface, this is not that big of a deal - but on a network with even moderate latency, it really adds up.  If you profile your algorithm above, you'll find that the bulk of the time is spent in the pesky isDirectory() call - that's because you are incurring a round trip for every single call to isDirectory().  Most modern OSes can provide this sort of information when the list of files/folders was originally requested (as opposed to querying each individual file path for it's properties).</p>\n\n<p>If you can't wait for JDK7, one strategy for addressing this latency is to go multi-threaded and use an ExecutorService with a maximum # of threads to perform your recursion.  It's not great (you have to deal with locking of your output data structures), but it'll be a heck of a lot faster than doing this single threaded.</p>\n\n<p>In all of your discussions about this sort of thing, I highly recommend that you compare against the best you could do using native code (or even a command line script that does roughly the same thing).  Saying that it takes an hour to traverse a network structure doesn't really mean that much.  Telling us that you can do it native in 7 second, but it takes an hour in Java will get people's attention.</p>\n"},{"tags":[],"owner":{"account_id":243347,"reputation":6996,"user_id":515455,"accept_rate":100,"display_name":"Daniel Ryan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297055535,"creation_date":1297055535,"answer_id":4918239,"question_id":2534632,"body_markdown":"Just so you know isDirectory() is quite a slow method. I&#39;m finding it quite slow in my file browser. I&#39;ll be looking into a library to replace it with native code.","title":"List all files from a directory recursively with Java","body":"<p>Just so you know isDirectory() is quite a slow method. I'm finding it quite slow in my file browser. I'll be looking into a library to replace it with native code.</p>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1672352145,"post_id":8445494,"comment_id":132274942,"body_markdown":"Yes, creating a file index can make it thousands of times faster. A more suitable tool is [grep](https://en.wikipedia.org/wiki/Grep), say, through [Git Bash](https://superuser.com/questions/1053633/what-is-git-bash-for-windows-anyway) (much lighter and faster to install than [Cygwin](https://en.wikipedia.org/wiki/Cygwin)). Though you still have to pay the initial price of the creating the first index. There is also the problem of keeping it updated. Though how does that answer the question?","body":"Yes, creating a file index can make it thousands of times faster. A more suitable tool is <a href=\"https://en.wikipedia.org/wiki/Grep\" rel=\"nofollow noreferrer\">grep</a>, say, through <a href=\"https://superuser.com/questions/1053633/what-is-git-bash-for-windows-anyway\">Git Bash</a> (much lighter and faster to install than <a href=\"https://en.wikipedia.org/wiki/Cygwin\" rel=\"nofollow noreferrer\">Cygwin</a>). Though you still have to pay the initial price of the creating the first index. There is also the problem of keeping it updated. Though how does that answer the question?"}],"tags":[],"owner":{"account_id":1096156,"reputation":9,"user_id":1089718,"display_name":"Kiran"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1672351916,"creation_date":1323433795,"answer_id":8445494,"question_id":2534632,"body_markdown":"The more efficient way I found in dealing with millions of folders and files is to capture a directory listing through a DOS command in some file and parse it.\r\n\r\nOnce you have parsed the data then you can do analysis and compute statistics.\r\n","title":"List all files from a directory recursively with Java","body":"<p>The more efficient way I found in dealing with millions of folders and files is to capture a directory listing through a DOS command in some file and parse it.</p>\n<p>Once you have parsed the data then you can do analysis and compute statistics.</p>\n"},{"comments":[{"owner":{"account_id":928799,"reputation":405,"user_id":1265467,"display_name":"Matt Jones"},"score":1,"creation_date":1380082078,"post_id":15291433,"comment_id":28063040,"body_markdown":"This example does not take into account the fact that listFiles() method, can and will return null. http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles()","body":"This example does not take into account the fact that listFiles() method, can and will return null. <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles()\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/io/File.html#listFile&zwnj;&#8203;s()</a>"}],"tags":[],"owner":{"account_id":2295854,"reputation":792,"user_id":2017307,"accept_rate":100,"display_name":"Vishal Mokal"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1672351857,"creation_date":1362737357,"answer_id":15291433,"question_id":2534632,"body_markdown":"This function will probably list all the file name and its path from its directory and its subdirectories.\r\n\r\n    public void listFile(String pathname) {\r\n        File f = new File(pathname);\r\n        File[] listfiles = f.listFiles();\r\n        for (int i = 0; i &lt; listfiles.length; i++) {\r\n            if (listfiles[i].isDirectory()) {\r\n                File[] internalFile = listfiles[i].listFiles();\r\n                for (int j = 0; j &lt; internalFile.length; j++) {\r\n                    System.out.println(internalFile[j]);\r\n                    if (internalFile[j].isDirectory()) {\r\n                        String name = internalFile[j].getAbsolutePath();\r\n                        listFile(name);\r\n                    }\r\n                }\r\n            } else {\r\n                System.out.println(listfiles[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"List all files from a directory recursively with Java","body":"<p>This function will probably list all the file name and its path from its directory and its subdirectories.</p>\n<pre><code>public void listFile(String pathname) {\n    File f = new File(pathname);\n    File[] listfiles = f.listFiles();\n    for (int i = 0; i &lt; listfiles.length; i++) {\n        if (listfiles[i].isDirectory()) {\n            File[] internalFile = listfiles[i].listFiles();\n            for (int j = 0; j &lt; internalFile.length; j++) {\n                System.out.println(internalFile[j]);\n                if (internalFile[j].isDirectory()) {\n                    String name = internalFile[j].getAbsolutePath();\n                    listFile(name);\n                }\n            }\n        } else {\n            System.out.println(listfiles[i]);\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":92393,"reputation":9711,"user_id":253231,"accept_rate":84,"display_name":"Dan"},"score":3,"creation_date":1403257574,"post_id":15475784,"comment_id":37598589,"body_markdown":"Nice but only gets files for one directory.  If you want to see all sub directories see my alternative answer.","body":"Nice but only gets files for one directory.  If you want to see all sub directories see my alternative answer."},{"owner":{"account_id":254212,"reputation":3390,"user_id":533454,"accept_rate":100,"display_name":"Greg"},"score":3,"creation_date":1410917064,"post_id":15475784,"comment_id":40503137,"body_markdown":"`Files.newDirectoryStream` can throw an IOException. I suggest wrapping that line in a Java7 try-with-statement so that the stream will always be closed for you (exception or not, without the need for a `finally`). See also here: http://stackoverflow.com/questions/17739362/java7-try-with-resources-statement-advantage","body":"<code>Files.newDirectoryStream</code> can throw an IOException. I suggest wrapping that line in a Java7 try-with-statement so that the stream will always be closed for you (exception or not, without the need for a <code>finally</code>). See also here: <a href=\"http://stackoverflow.com/questions/17739362/java7-try-with-resources-statement-advantage\" title=\"java7 try with resources statement advantage\">stackoverflow.com/questions/17739362/&hellip;</a>"}],"tags":[],"owner":{"account_id":12685,"reputation":35096,"user_id":25122,"accept_rate":75,"display_name":"RealHowTo"},"comment_count":2,"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1672351798,"creation_date":1363606352,"answer_id":15475784,"question_id":2534632,"body_markdown":"The fast way to get the content of a directory using Java 7 NIO:\r\n\r\n    import java.nio.file.DirectoryStream;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.FileSystems;\r\n    import java.nio.file.Path;\r\n\r\n    ...\r\n\r\n    Path dir = FileSystems.getDefault().getPath(filePath);\r\n    DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir);\r\n    for (Path path : stream) {\r\n       System.out.println(path.getFileName());\r\n    }\r\n    stream.close();\r\n\r\n","title":"List all files from a directory recursively with Java","body":"<p>The fast way to get the content of a directory using Java 7 NIO:</p>\n<pre><code>import java.nio.file.DirectoryStream;\nimport java.nio.file.Files;\nimport java.nio.file.FileSystems;\nimport java.nio.file.Path;\n\n...\n\nPath dir = FileSystems.getDefault().getPath(filePath);\nDirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir);\nfor (Path path : stream) {\n   System.out.println(path.getFileName());\n}\nstream.close();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":964816,"reputation":7090,"user_id":988434,"accept_rate":57,"display_name":"GalDude33"},"score":5,"creation_date":1395608214,"post_id":18230733,"comment_id":34403770,"body_markdown":"Nice answer :), theres also an implemented class of it called &quot;SimpleFileVisitor&quot;, if you don&#39;t need all the implemented fucntions, you can just Override the needed functions.","body":"Nice answer :), theres also an implemented class of it called &quot;SimpleFileVisitor&quot;, if you don&#39;t need all the implemented fucntions, you can just Override the needed functions."}],"tags":[],"owner":{"account_id":2835128,"reputation":11494,"user_id":2435872,"accept_rate":83,"display_name":"jboi"},"comment_count":1,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1672351728,"creation_date":1376480411,"answer_id":18230733,"question_id":2534632,"body_markdown":"With Java 7, a faster way to walk through a directory tree was introduced with the `Paths` and `Files` functionality. They&#39;re much faster than the &quot;old&quot; `File` way.\r\n\r\nThis would be the code to walk through and check path names with a regular expression:\r\n\r\n    public final void test() throws IOException, InterruptedException {\r\n        final Path rootDir = Paths.get(&quot;path to your directory where the walk starts&quot;);\r\n\r\n        // Walk thru mainDir directory\r\n        Files.walkFileTree(rootDir, new FileVisitor&lt;Path&gt;() {\r\n            // First (minor) speed up. Compile regular expression pattern only one time.\r\n            private Pattern pattern = Pattern.compile(&quot;^(.*?)&quot;);\r\n\r\n            @Override\r\n            public FileVisitResult preVisitDirectory(Path path,\r\n                    BasicFileAttributes atts) throws IOException {\r\n\r\n                boolean matches = pattern.matcher(path.toString()).matches();\r\n\r\n                // TODO: Put here your business logic when matches equals true/false\r\n\r\n                return (matches)? FileVisitResult.CONTINUE:FileVisitResult.SKIP_SUBTREE;\r\n            }\r\n\r\n            @Override\r\n            public FileVisitResult visitFile(Path path, BasicFileAttributes mainAtts)\r\n                    throws IOException {\r\n\r\n                boolean matches = pattern.matcher(path.toString()).matches();\r\n\r\n                // TODO: Put here your business logic when matches equals true/false\r\n\r\n                return FileVisitResult.CONTINUE;\r\n            }\r\n\r\n            @Override\r\n            public FileVisitResult postVisitDirectory(Path path,\r\n                    IOException exc) throws IOException {\r\n                // TODO Auto-generated method stub\r\n                return FileVisitResult.CONTINUE;\r\n            }\r\n\r\n            @Override\r\n            public FileVisitResult visitFileFailed(Path path, IOException exc)\r\n                    throws IOException {\r\n                exc.printStackTrace();\r\n\r\n                // If the root directory has failed it makes no sense to continue\r\n                return path.equals(rootDir)? FileVisitResult.TERMINATE:FileVisitResult.CONTINUE;\r\n            }\r\n        });\r\n    }\r\n","title":"List all files from a directory recursively with Java","body":"<p>With Java 7, a faster way to walk through a directory tree was introduced with the <code>Paths</code> and <code>Files</code> functionality. They're much faster than the &quot;old&quot; <code>File</code> way.</p>\n<p>This would be the code to walk through and check path names with a regular expression:</p>\n<pre><code>public final void test() throws IOException, InterruptedException {\n    final Path rootDir = Paths.get(&quot;path to your directory where the walk starts&quot;);\n\n    // Walk thru mainDir directory\n    Files.walkFileTree(rootDir, new FileVisitor&lt;Path&gt;() {\n        // First (minor) speed up. Compile regular expression pattern only one time.\n        private Pattern pattern = Pattern.compile(&quot;^(.*?)&quot;);\n\n        @Override\n        public FileVisitResult preVisitDirectory(Path path,\n                BasicFileAttributes atts) throws IOException {\n\n            boolean matches = pattern.matcher(path.toString()).matches();\n\n            // TODO: Put here your business logic when matches equals true/false\n\n            return (matches)? FileVisitResult.CONTINUE:FileVisitResult.SKIP_SUBTREE;\n        }\n\n        @Override\n        public FileVisitResult visitFile(Path path, BasicFileAttributes mainAtts)\n                throws IOException {\n\n            boolean matches = pattern.matcher(path.toString()).matches();\n\n            // TODO: Put here your business logic when matches equals true/false\n\n            return FileVisitResult.CONTINUE;\n        }\n\n        @Override\n        public FileVisitResult postVisitDirectory(Path path,\n                IOException exc) throws IOException {\n            // TODO Auto-generated method stub\n            return FileVisitResult.CONTINUE;\n        }\n\n        @Override\n        public FileVisitResult visitFileFailed(Path path, IOException exc)\n                throws IOException {\n            exc.printStackTrace();\n\n            // If the root directory has failed it makes no sense to continue\n            return path.equals(rootDir)? FileVisitResult.TERMINATE:FileVisitResult.CONTINUE;\n        }\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":92393,"reputation":9711,"user_id":253231,"accept_rate":84,"display_name":"Dan"},"comment_count":0,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1426451612,"creation_date":1403257450,"answer_id":24324367,"question_id":2534632,"body_markdown":"This is a very simple recursive method to get all files from a given root.\r\n\r\nIt uses the Java 7 NIO Path class.\r\n\r\n    private List&lt;String&gt; getFileNames(List&lt;String&gt; fileNames, Path dir) {\r\n        try(DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir)) {\r\n            for (Path path : stream) {\r\n                if(path.toFile().isDirectory()) {\r\n                    getFileNames(fileNames, path);\r\n                } else {\r\n                    fileNames.add(path.toAbsolutePath().toString());\r\n                    System.out.println(path.getFileName());\r\n                }\r\n            }\r\n        } catch(IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return fileNames;\r\n    } ","title":"List all files from a directory recursively with Java","body":"<p>This is a very simple recursive method to get all files from a given root.</p>\n\n<p>It uses the Java 7 NIO Path class.</p>\n\n<pre><code>private List&lt;String&gt; getFileNames(List&lt;String&gt; fileNames, Path dir) {\n    try(DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir)) {\n        for (Path path : stream) {\n            if(path.toFile().isDirectory()) {\n                getFileNames(fileNames, path);\n            } else {\n                fileNames.add(path.toAbsolutePath().toString());\n                System.out.println(path.getFileName());\n            }\n        }\n    } catch(IOException e) {\n        e.printStackTrace();\n    }\n    return fileNames;\n} \n</code></pre>\n"},{"comments":[{"owner":{"account_id":7371292,"reputation":1906,"user_id":5611377,"accept_rate":100,"display_name":"ssimm"},"score":1,"creation_date":1460546456,"post_id":28603067,"comment_id":60790264,"body_markdown":"Good answer if you want something that works with java &lt;7.","body":"Good answer if you want something that works with java &lt;7."}],"tags":[],"owner":{"account_id":5806776,"reputation":231,"user_id":4579169,"display_name":"Prathamesh sawant"},"comment_count":1,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1672351618,"creation_date":1424339112,"answer_id":28603067,"question_id":2534632,"body_markdown":"This will work just fine and it’s recursive.\r\n\r\n    File root = new File(&quot;ROOT PATH&quot;);\r\n    for (File file : root.listFiles())\r\n    {\r\n        getFilesRecursive(file);\r\n    }\r\n\r\n\r\n    private static void getFilesRecursive(File pFile)\r\n    {\r\n        for(File files : pFile.listFiles())\r\n        {\r\n            if(files.isDirectory())\r\n            {\r\n                getFilesRecursive(files);\r\n            }\r\n            else\r\n            {\r\n                // Do your thing\r\n                //\r\n                // You can either save in HashMap and\r\n                // use it as per your requirement\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"List all files from a directory recursively with Java","body":"<p>This will work just fine and it’s recursive.</p>\n<pre><code>File root = new File(&quot;ROOT PATH&quot;);\nfor (File file : root.listFiles())\n{\n    getFilesRecursive(file);\n}\n\n\nprivate static void getFilesRecursive(File pFile)\n{\n    for(File files : pFile.listFiles())\n    {\n        if(files.isDirectory())\n        {\n            getFilesRecursive(files);\n        }\n        else\n        {\n            // Do your thing\n            //\n            // You can either save in HashMap and\n            // use it as per your requirement\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1113646,"reputation":4327,"user_id":1103571,"accept_rate":89,"display_name":"Lilienthal"},"score":1,"creation_date":1430388564,"post_id":29964733,"comment_id":48049688,"body_markdown":"Welcome to StackOverflow Mam&#39;s, could you clarify how your answer is an improvement or alternative to the many existing answers?","body":"Welcome to StackOverflow Mam&#39;s, could you clarify how your answer is an improvement or alternative to the many existing answers?"},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1672351524,"post_id":29964733,"comment_id":132274803,"body_markdown":"Where was this copied from?","body":"Where was this copied from?"}],"tags":[],"owner":{"account_id":6234457,"reputation":253,"user_id":4850199,"display_name":"Mam&#39;s"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1455378361,"creation_date":1430388191,"answer_id":29964733,"question_id":2534632,"body_markdown":"This will work fine\r\n\r\n    public void displayAll(File path){\t\t\r\n    \tif(path.isFile()){\r\n    \t\tSystem.out.println(path.getName());\r\n    \t}else{\r\n    \t\tSystem.out.println(path.getName());\t\t\t\r\n    \t\tFile files[] = path.listFiles();\r\n    \t\tfor(File dirOrFile: files){\r\n    \t\t\tdisplayAll(dirOrFile);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n&lt;/code&gt;&lt;/pre&gt;","title":"List all files from a directory recursively with Java","body":"<p>This will work fine</p>\n\n<pre><code>public void displayAll(File path){      \n    if(path.isFile()){\n        System.out.println(path.getName());\n    }else{\n        System.out.println(path.getName());         \n        File files[] = path.listFiles();\n        for(File dirOrFile: files){\n            displayAll(dirOrFile);\n        }\n    }\n}\n</code></pre>\n\n<p></p>\n"},{"tags":[],"owner":{"account_id":1821511,"reputation":6530,"user_id":1655478,"accept_rate":33,"display_name":"dessalines"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1432144942,"creation_date":1432144942,"answer_id":30357161,"question_id":2534632,"body_markdown":"I personally like this version of FileUtils. Here&#39;s an example that finds all mp3s or flacs in a directory or any of its subdirectories:\r\n\r\n    String[] types = {&quot;mp3&quot;, &quot;flac&quot;};\r\n    Collection&lt;File&gt; files2 = FileUtils.listFiles(/path/to/your/dir, types , true);","title":"List all files from a directory recursively with Java","body":"<p>I personally like this version of FileUtils. Here's an example that finds all mp3s or flacs in a directory or any of its subdirectories:</p>\n\n<pre><code>String[] types = {\"mp3\", \"flac\"};\nCollection&lt;File&gt; files2 = FileUtils.listFiles(/path/to/your/dir, types , true);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2298518,"reputation":6642,"user_id":2019384,"display_name":"d4Rk"},"score":1,"creation_date":1437150847,"post_id":31480529,"comment_id":50926331,"body_markdown":"Please add some explanation, too.","body":"Please add some explanation, too."},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1672351398,"post_id":31480529,"comment_id":132274774,"body_markdown":"Where was this copied from?","body":"Where was this copied from?"}],"tags":[],"owner":{"account_id":6643210,"reputation":9,"user_id":5128266,"display_name":"prajakta"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1672351472,"creation_date":1437150620,"answer_id":31480529,"question_id":2534632,"body_markdown":"    import java.io.*;\r\n\r\n    public class MultiFolderReading {\r\n\r\n        public void checkNoOfFiles (String filename) throws IOException {\r\n\r\n            File dir = new File(filename);\r\n            File files[] = dir.listFiles(); // Files array stores the list of files\r\n\r\n            for(int i=0; i&lt;files.length; i++)\r\n            {\r\n                if(files[i].isFile()) // Check whether files[i] is file or directory\r\n                {\r\n                    System.out.println(&quot;File::&quot; + files[i].getName());\r\n                    System.out.println();\r\n\r\n                }\r\n                else if(files[i].isDirectory())\r\n                {\r\n                    System.out.println(&quot;Directory::&quot; + files[i].getName());\r\n                    System.out.println();\r\n                    checkNoOfFiles(files[i].getAbsolutePath());\r\n                }\r\n            }\r\n        }\r\n\r\n        public static void main(String[] args) throws IOException {\r\n\r\n            MultiFolderReading mf = new MultiFolderReading();\r\n            String str = &quot;E:\\\\file&quot;;\r\n            mf.checkNoOfFiles(str);\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n","title":"List all files from a directory recursively with Java","body":"<pre><code>import java.io.*;\n\npublic class MultiFolderReading {\n\n    public void checkNoOfFiles (String filename) throws IOException {\n\n        File dir = new File(filename);\n        File files[] = dir.listFiles(); // Files array stores the list of files\n\n        for(int i=0; i&lt;files.length; i++)\n        {\n            if(files[i].isFile()) // Check whether files[i] is file or directory\n            {\n                System.out.println(&quot;File::&quot; + files[i].getName());\n                System.out.println();\n\n            }\n            else if(files[i].isDirectory())\n            {\n                System.out.println(&quot;Directory::&quot; + files[i].getName());\n                System.out.println();\n                checkNoOfFiles(files[i].getAbsolutePath());\n            }\n        }\n    }\n\n    public static void main(String[] args) throws IOException {\n\n        MultiFolderReading mf = new MultiFolderReading();\n        String str = &quot;E:\\\\file&quot;;\n        mf.checkNoOfFiles(str);\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1259409,"reputation":978,"user_id":1218146,"accept_rate":45,"display_name":"riccardo.tasso"},"score":3,"creation_date":1498057227,"post_id":33469854,"comment_id":76343673,"body_markdown":"I suggest to always use those Files methods which returns Stream in try-with-resources blocks: otherwise you&#39;ll keep the resource opened","body":"I suggest to always use those Files methods which returns Stream in try-with-resources blocks: otherwise you&#39;ll keep the resource opened"},{"owner":{"account_id":8719765,"reputation":1168,"user_id":6523288,"display_name":"Dragas"},"score":0,"creation_date":1603280746,"post_id":33469854,"comment_id":113985835,"body_markdown":"Don&#39;t terminal operations call close on stream itself?","body":"Don&#39;t terminal operations call close on stream itself?"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1603296335,"post_id":33469854,"comment_id":113994243,"body_markdown":"@Dragas yes. My consumer is only a simple example; in real life you would do something more useful.","body":"@Dragas yes. My consumer is only a simple example; in real life you would do something more useful."},{"owner":{"account_id":2498021,"reputation":479,"user_id":2173948,"accept_rate":80,"display_name":"radiantRazor"},"score":0,"creation_date":1672229700,"post_id":33469854,"comment_id":132246270,"body_markdown":"This is what the documentation of `Files.find` says:\n`API Note:\nThis method must be used within a try-with-resources statement or similar control structure to ensure that the stream&#39;s open directories are closed promptly after the stream&#39;s operations have completed.`\n\nEdit: Terminal operations DO NOT close streams:\n[https://stackoverflow.com/a/27382060/2173948]","body":"This is what the documentation of <code>Files.find</code> says: <code>API Note: This method must be used within a try-with-resources statement or similar control structure to ensure that the stream&#39;s open directories are closed promptly after the stream&#39;s operations have completed.</code>  Edit: Terminal operations DO NOT close streams: [<a href=\"https://stackoverflow.com/a/27382060/2173948]\">stackoverflow.com/a/27382060/2173948]</a>"}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":4,"down_vote_count":0,"up_vote_count":83,"is_accepted":false,"score":83,"last_activity_date":1479820552,"creation_date":1446431393,"answer_id":33469854,"question_id":2534632,"body_markdown":"In Java 8, it&#39;s a 1-liner via [`Files.find()`][1] with an arbitrarily large depth (eg `999`) and [`BasicFileAttributes`][2] of [`isRegularFile()`][3]\r\n\r\n    public static printFnames(String sDir) {\r\n        Files.find(Paths.get(sDir), 999, (p, bfa) -&gt; bfa.isRegularFile()).forEach(System.out::println);\r\n    }\r\n\r\nTo add more filtering, enhance the lambda, for example all jpg files modified in the last 24 hours:\r\n\r\n    (p, bfa) -&gt; bfa.isRegularFile()\r\n      &amp;&amp; p.getFileName().toString().matches(&quot;.*\\\\.jpg&quot;)\r\n      &amp;&amp; bfa.lastModifiedTime().toMillis() &gt; System.currentMillis() - 86400000\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#find-java.nio.file.Path-int-java.util.function.BiPredicate-java.nio.file.FileVisitOption...-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/BasicFileAttributes.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/BasicFileAttributes.html#isRegularFile--","title":"List all files from a directory recursively with Java","body":"<p>In Java 8, it's a 1-liner via <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#find-java.nio.file.Path-int-java.util.function.BiPredicate-java.nio.file.FileVisitOption...-\"><code>Files.find()</code></a> with an arbitrarily large depth (eg <code>999</code>) and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/BasicFileAttributes.html\"><code>BasicFileAttributes</code></a> of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/BasicFileAttributes.html#isRegularFile--\"><code>isRegularFile()</code></a></p>\n\n<pre><code>public static printFnames(String sDir) {\n    Files.find(Paths.get(sDir), 999, (p, bfa) -&gt; bfa.isRegularFile()).forEach(System.out::println);\n}\n</code></pre>\n\n<p>To add more filtering, enhance the lambda, for example all jpg files modified in the last 24 hours:</p>\n\n<pre><code>(p, bfa) -&gt; bfa.isRegularFile()\n  &amp;&amp; p.getFileName().toString().matches(\".*\\\\.jpg\")\n  &amp;&amp; bfa.lastModifiedTime().toMillis() &gt; System.currentMillis() - 86400000\n</code></pre>\n"},{"tags":[],"owner":{"account_id":695155,"reputation":26358,"user_id":274677,"accept_rate":81,"display_name":"Marcus Junius Brutus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672351376,"creation_date":1457435687,"answer_id":35865849,"question_id":2534632,"body_markdown":"In [Guava][1] you don&#39;t have to wait for a Collection to be returned to you, but can actually iterate over the files. It is easy to imagine a `IDoSomethingWithThisFile` interface in the signature of the below function:\r\n\r\n    public static void collectFilesInDir(File dir) {\r\n        TreeTraverser&lt;File&gt; traverser = Files.fileTreeTraverser();\r\n        FluentIterable&lt;File&gt; filesInPostOrder = traverser.preOrderTraversal(dir);\r\n        for (File f: filesInPostOrder)\r\n            System.out.printf(&quot;File: %s\\n&quot;, f.getPath());\r\n    }\r\n\r\n[TreeTraverser][2] also allows you to between various traversal styles.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Google_Guava\r\n  [2]: http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/TreeTraverser.html\r\n","title":"List all files from a directory recursively with Java","body":"<p>In <a href=\"https://en.wikipedia.org/wiki/Google_Guava\" rel=\"nofollow noreferrer\">Guava</a> you don't have to wait for a Collection to be returned to you, but can actually iterate over the files. It is easy to imagine a <code>IDoSomethingWithThisFile</code> interface in the signature of the below function:</p>\n<pre><code>public static void collectFilesInDir(File dir) {\n    TreeTraverser&lt;File&gt; traverser = Files.fileTreeTraverser();\n    FluentIterable&lt;File&gt; filesInPostOrder = traverser.preOrderTraversal(dir);\n    for (File f: filesInPostOrder)\n        System.out.printf(&quot;File: %s\\n&quot;, f.getPath());\n}\n</code></pre>\n<p><a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/TreeTraverser.html\" rel=\"nofollow noreferrer\">TreeTraverser</a> also allows you to between various traversal styles.</p>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1672351313,"post_id":50575684,"comment_id":132274751,"body_markdown":"Where was this copied from?","body":"Where was this copied from?"}],"tags":[],"owner":{"account_id":124772,"reputation":10425,"user_id":320087,"accept_rate":90,"display_name":"Niraj Sonawane"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1527562428,"creation_date":1527562428,"answer_id":50575684,"question_id":2534632,"body_markdown":"\r\n**Java 8**\r\n\r\n    public static void main(String[] args) throws IOException {\r\n    \r\n    \t\tPath start = Paths.get(&quot;C:\\\\data\\\\&quot;);\r\n    \t\ttry (Stream&lt;Path&gt; stream = Files.walk(start, Integer.MAX_VALUE)) {\r\n    \t\t    List&lt;String&gt; collect = stream\r\n    \t\t        .map(String::valueOf)\r\n    \t\t        .sorted()\r\n    \t\t        .collect(Collectors.toList());\r\n    \t\t    \r\n    \t\t    collect.forEach(System.out::println);\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t}","title":"List all files from a directory recursively with Java","body":"<p><strong>Java 8</strong></p>\n\n<pre><code>public static void main(String[] args) throws IOException {\n\n        Path start = Paths.get(\"C:\\\\data\\\\\");\n        try (Stream&lt;Path&gt; stream = Files.walk(start, Integer.MAX_VALUE)) {\n            List&lt;String&gt; collect = stream\n                .map(String::valueOf)\n                .sorted()\n                .collect(Collectors.toList());\n\n            collect.forEach(System.out::println);\n        }\n\n\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1672351321,"post_id":55720158,"comment_id":132274754,"body_markdown":"Where was this copied from?","body":"Where was this copied from?"}],"tags":[],"owner":{"account_id":15759835,"reputation":11,"user_id":11371850,"display_name":"Sri"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555476912,"creation_date":1555476912,"answer_id":55720158,"question_id":2534632,"body_markdown":"\r\n\r\n    public class GetFilesRecursive {\r\n    \tpublic static List &lt;String&gt; getFilesRecursively(File dir){\r\n    \t\tList &lt;String&gt; ls = new ArrayList&lt;String&gt;();\r\n    \t\tfor (File fObj : dir.listFiles()) {\r\n    \t\t\tif(fObj.isDirectory()) {\r\n    \t\t\t\tls.add(String.valueOf(fObj));\r\n    \t\t\t\tls.addAll(getFilesRecursively(fObj));\t\t\t\t\r\n    \t\t\t} else {\r\n    \t\t\t\tls.add(String.valueOf(fObj));\t\t\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\treturn ls;\r\n    \t}\r\n    \tpublic static List &lt;String&gt; getListOfFiles(String fullPathDir) {\r\n    \t\tList &lt;String&gt; ls = new ArrayList&lt;String&gt; ();\r\n    \t\tFile f = new File(fullPathDir);\r\n    \t\tif (f.exists()) {\r\n    \t\t\tif(f.isDirectory()) {\r\n    \t\t\t\tls.add(String.valueOf(f));\r\n    \t\t\t\tls.addAll(getFilesRecursively(f));\r\n    \t\t\t}\r\n    \t\t} else {\r\n    \t\t\tls.add(fullPathDir);\r\n    \t\t}\r\n    \t\treturn ls;\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tList &lt;String&gt; ls = getListOfFiles(&quot;/Users/srinivasab/Documents&quot;);\r\n    \t\tfor (String file:ls) {\r\n    \t\t\tSystem.out.println(file);\r\n    \t\t}\r\n    \t\tSystem.out.println(ls.size());\r\n    \t}\r\n    }\r\n\r\n","title":"List all files from a directory recursively with Java","body":"<pre><code>public class GetFilesRecursive {\n    public static List &lt;String&gt; getFilesRecursively(File dir){\n        List &lt;String&gt; ls = new ArrayList&lt;String&gt;();\n        for (File fObj : dir.listFiles()) {\n            if(fObj.isDirectory()) {\n                ls.add(String.valueOf(fObj));\n                ls.addAll(getFilesRecursively(fObj));               \n            } else {\n                ls.add(String.valueOf(fObj));       \n            }\n        }\n\n        return ls;\n    }\n    public static List &lt;String&gt; getListOfFiles(String fullPathDir) {\n        List &lt;String&gt; ls = new ArrayList&lt;String&gt; ();\n        File f = new File(fullPathDir);\n        if (f.exists()) {\n            if(f.isDirectory()) {\n                ls.add(String.valueOf(f));\n                ls.addAll(getFilesRecursively(f));\n            }\n        } else {\n            ls.add(fullPathDir);\n        }\n        return ls;\n    }\n\n    public static void main(String[] args) {\n        List &lt;String&gt; ls = getListOfFiles(\"/Users/srinivasab/Documents\");\n        for (String file:ls) {\n            System.out.println(file);\n        }\n        System.out.println(ls.size());\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9568299,"reputation":3669,"user_id":7106850,"display_name":"vezunchik"},"score":0,"creation_date":1555479198,"post_id":55720314,"comment_id":98120750,"body_markdown":"Please, can you extend your answer with more detailed explanation? This will be very useful for understanding. Thank you!","body":"Please, can you extend your answer with more detailed explanation? This will be very useful for understanding. Thank you!"}],"tags":[],"owner":{"account_id":15759835,"reputation":11,"user_id":11371850,"display_name":"Sri"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555477837,"creation_date":1555477837,"answer_id":55720314,"question_id":2534632,"body_markdown":"Another optimized code\r\n    \r\n    import java.io.File;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class GetFilesRecursive {\r\n    \tpublic static List &lt;String&gt; getFilesRecursively(File dir){\r\n    \t\tList &lt;String&gt; ls = new ArrayList&lt;String&gt;();\r\n    \t\tif (dir.isDirectory())\r\n    \t\t\tfor (File fObj : dir.listFiles()) {\r\n    \t\t\t\tif(fObj.isDirectory()) {\r\n    \t\t\t\t\tls.add(String.valueOf(fObj));\r\n    \t\t\t\t\tls.addAll(getFilesRecursively(fObj));\t\t\t\t\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tls.add(String.valueOf(fObj));\t\t\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\telse\r\n    \t\t\tls.add(String.valueOf(dir));\r\n    \r\n    \t\treturn ls;\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tList &lt;String&gt; ls = getFilesRecursively(new File(&quot;/Users/srinivasab/Documents&quot;));\r\n    \t\tfor (String file:ls) {\r\n    \t\t\tSystem.out.println(file);\r\n    \t\t}\r\n    \t\tSystem.out.println(ls.size());\r\n    \t}\r\n    }\r\n\r\n","title":"List all files from a directory recursively with Java","body":"<p>Another optimized code</p>\n\n<pre><code>import java.io.File;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class GetFilesRecursive {\n    public static List &lt;String&gt; getFilesRecursively(File dir){\n        List &lt;String&gt; ls = new ArrayList&lt;String&gt;();\n        if (dir.isDirectory())\n            for (File fObj : dir.listFiles()) {\n                if(fObj.isDirectory()) {\n                    ls.add(String.valueOf(fObj));\n                    ls.addAll(getFilesRecursively(fObj));               \n                } else {\n                    ls.add(String.valueOf(fObj));       \n                }\n            }\n        else\n            ls.add(String.valueOf(dir));\n\n        return ls;\n    }\n\n    public static void main(String[] args) {\n        List &lt;String&gt; ls = getFilesRecursively(new File(\"/Users/srinivasab/Documents\"));\n        for (String file:ls) {\n            System.out.println(file);\n        }\n        System.out.println(ls.size());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9755346,"reputation":7480,"user_id":7232295,"accept_rate":86,"display_name":"Uddhav P. Gautam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596501369,"creation_date":1596501369,"answer_id":63238699,"question_id":2534632,"body_markdown":"One more example of listing files and directories using Java 8 `filter`\r\n\r\n    public static void main(String[] args) {\r\n    \r\n    System.out.println(&quot;Files!!&quot;);\r\n            try {\r\n                Files.walk(Paths.get(&quot;.&quot;))\r\n                        .filter(Files::isRegularFile)\r\n                        .filter(c -&gt;\r\n                                c.getFileName().toString().substring(c.getFileName().toString().length()-4).contains(&quot;.jpg&quot;)\r\n                                ||\r\n                                c.getFileName().toString().substring(c.getFileName().toString().length()-5).contains(&quot;.jpeg&quot;)\r\n                        )\r\n                        .forEach(System.out::println);\r\n    \r\n            } catch (IOException e) {\r\n            System.out.println(&quot;No jpeg or jpg files&quot;);\r\n            }\r\n    \r\n            System.out.println(&quot;\\nDirectories!!\\n&quot;);\r\n            try {\r\n                Files.walk(Paths.get(&quot;.&quot;))\r\n                        .filter(Files::isDirectory)\r\n                        .forEach(System.out::println);\r\n    \r\n            } catch (IOException e) {\r\n                System.out.println(&quot;No Jpeg files&quot;);\r\n            }\r\n    }","title":"List all files from a directory recursively with Java","body":"<p>One more example of listing files and directories using Java 8 <code>filter</code></p>\n<pre><code>public static void main(String[] args) {\n\nSystem.out.println(&quot;Files!!&quot;);\n        try {\n            Files.walk(Paths.get(&quot;.&quot;))\n                    .filter(Files::isRegularFile)\n                    .filter(c -&gt;\n                            c.getFileName().toString().substring(c.getFileName().toString().length()-4).contains(&quot;.jpg&quot;)\n                            ||\n                            c.getFileName().toString().substring(c.getFileName().toString().length()-5).contains(&quot;.jpeg&quot;)\n                    )\n                    .forEach(System.out::println);\n\n        } catch (IOException e) {\n        System.out.println(&quot;No jpeg or jpg files&quot;);\n        }\n\n        System.out.println(&quot;\\nDirectories!!\\n&quot;);\n        try {\n            Files.walk(Paths.get(&quot;.&quot;))\n                    .filter(Files::isDirectory)\n                    .forEach(System.out::println);\n\n        } catch (IOException e) {\n            System.out.println(&quot;No Jpeg files&quot;);\n        }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":102334,"reputation":3710,"user_id":274752,"accept_rate":67,"display_name":"Hultner"},"score":0,"creation_date":1645812077,"post_id":71225187,"comment_id":125977726,"body_markdown":"It&#39;s nice to see that people are still answering this 12 years later. Many of the problems I originally had was due to limitations in Java 1.5/1.6, I think the real issue was resolved in Java 1.7 and forward, with the introduction of the (then) new file system APIs.","body":"It&#39;s nice to see that people are still answering this 12 years later. Many of the problems I originally had was due to limitations in Java 1.5/1.6, I think the real issue was resolved in Java 1.7 and forward, with the introduction of the (then) new file system APIs."}],"tags":[],"owner":{"account_id":21225839,"reputation":1,"user_id":15611539,"display_name":"motilyfor"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672351179,"creation_date":1645548649,"answer_id":71225187,"question_id":2534632,"body_markdown":"[Test folder][1]\r\n\r\nI tested some method with 60,000 files in 284 folders on Windows 11:\r\n\r\n```java\r\npublic class App {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        Path path = Paths.get(&quot;E:\\\\书籍&quot;);\r\n\r\n        // 1.walkFileTree\r\n        long start1 = System.currentTimeMillis();\r\n        Files.walkFileTree(path, new SimpleFileVisitor&lt;Path&gt;() {\r\n\r\n            @Override\r\n            public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) {\r\n                // if(pathMatcher.matches(file))\r\n                // files.add(file.toFile());\r\n\r\n                return FileVisitResult.CONTINUE;\r\n            }\r\n\r\n            @Override\r\n            public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) {\r\n                // System.out.println(dir.getFileName());\r\n                return FileVisitResult.CONTINUE;\r\n            }\r\n\r\n            @Override\r\n            public FileVisitResult visitFileFailed(Path file, IOException e) {\r\n                return FileVisitResult.CONTINUE;\r\n            }\r\n\r\n        });\r\n        long end1 = System.currentTimeMillis();\r\n\r\n        // 2. newDirectoryStream\r\n        long start2 = System.currentTimeMillis();\r\n        search(path.toFile());\r\n        long end2 = System.currentTimeMillis();\r\n\r\n        // 3. listFiles\r\n        long start3 = System.currentTimeMillis();\r\n        getFileNames(path);\r\n        long end3 = System.currentTimeMillis();\r\n\r\n        System.out.println(&quot;\\r执行耗时:&quot; + (end1 - start1));\r\n        System.out.println(&quot;\\r执行耗时:&quot; + (end2 - start2));\r\n        System.out.println(&quot;\\r执行耗时:&quot; + (end3 - start3));\r\n    }\r\n\r\n\r\n    private static void getFileNames(Path dir) {\r\n        try(DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir)) {\r\n            for (Path path : stream) {\r\n                if(Files.isDirectory(path)) {\r\n                    getFileNames(path);\r\n                }\r\n            }\r\n        } catch(IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public static void search(File file) {\r\n        Queue&lt;File&gt; q = new LinkedList&lt;&gt;();\r\n        q.offer(file);\r\n        while (!q.isEmpty()) {\r\n            try {\r\n                for (File childfile : q.poll().listFiles()) {\r\n                    // System.out.println(childfile.getName());\r\n                    if (childfile.isDirectory()) {\r\n                        q.offer(childfile);\r\n                    }\r\n                }\r\n            } catch (Exception e) {\r\n\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### Result (milliseconds)：\r\n\r\n| walkFileTree | listFiles|newDirectoryStream|\r\n|:--------:|:--------:|:--------:|\r\n| 68|451|493\r\n| 64|464|482\r\n| 61|478|457\r\n| 67|477|488\r\n| 59|474|466\r\n\r\nKnown performance issues：\r\n\r\n1. From [Kevin Day&#39;s answer][2]:\r\n\r\n    &gt; If you profile your algorithm above, you&#39;ll find that the bulk of the time is spent in the pesky isDirectory() call - that&#39;s because you are incurring a round trip for every single call to isDirectory().\r\n\r\n2. listfiles() will create new File Object for every entry\r\n\r\n  [1]: https://i.stack.imgur.com/xGnB4.png\r\n  [2]: https://stackoverflow.com/questions/2534632/list-all-files-from-a-directory-recursively-with-java/2535558#2535558\r\n\r\n\r\n\r\n","title":"List all files from a directory recursively with Java","body":"<p><a href=\"https://i.stack.imgur.com/xGnB4.png\" rel=\"nofollow noreferrer\">Test folder</a></p>\n<p>I tested some method with 60,000 files in 284 folders on Windows 11:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class App {\n\n    public static void main(String[] args) throws Exception {\n\n        Path path = Paths.get(&quot;E:\\\\书籍&quot;);\n\n        // 1.walkFileTree\n        long start1 = System.currentTimeMillis();\n        Files.walkFileTree(path, new SimpleFileVisitor&lt;Path&gt;() {\n\n            @Override\n            public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) {\n                // if(pathMatcher.matches(file))\n                // files.add(file.toFile());\n\n                return FileVisitResult.CONTINUE;\n            }\n\n            @Override\n            public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) {\n                // System.out.println(dir.getFileName());\n                return FileVisitResult.CONTINUE;\n            }\n\n            @Override\n            public FileVisitResult visitFileFailed(Path file, IOException e) {\n                return FileVisitResult.CONTINUE;\n            }\n\n        });\n        long end1 = System.currentTimeMillis();\n\n        // 2. newDirectoryStream\n        long start2 = System.currentTimeMillis();\n        search(path.toFile());\n        long end2 = System.currentTimeMillis();\n\n        // 3. listFiles\n        long start3 = System.currentTimeMillis();\n        getFileNames(path);\n        long end3 = System.currentTimeMillis();\n\n        System.out.println(&quot;\\r执行耗时:&quot; + (end1 - start1));\n        System.out.println(&quot;\\r执行耗时:&quot; + (end2 - start2));\n        System.out.println(&quot;\\r执行耗时:&quot; + (end3 - start3));\n    }\n\n\n    private static void getFileNames(Path dir) {\n        try(DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir)) {\n            for (Path path : stream) {\n                if(Files.isDirectory(path)) {\n                    getFileNames(path);\n                }\n            }\n        } catch(IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void search(File file) {\n        Queue&lt;File&gt; q = new LinkedList&lt;&gt;();\n        q.offer(file);\n        while (!q.isEmpty()) {\n            try {\n                for (File childfile : q.poll().listFiles()) {\n                    // System.out.println(childfile.getName());\n                    if (childfile.isDirectory()) {\n                        q.offer(childfile);\n                    }\n                }\n            } catch (Exception e) {\n\n            }\n        }\n    }\n}\n</code></pre>\n<h3>Result (milliseconds)：</h3>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\">walkFileTree</th>\n<th style=\"text-align: center;\">listFiles</th>\n<th style=\"text-align: center;\">newDirectoryStream</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">68</td>\n<td style=\"text-align: center;\">451</td>\n<td style=\"text-align: center;\">493</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">64</td>\n<td style=\"text-align: center;\">464</td>\n<td style=\"text-align: center;\">482</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">61</td>\n<td style=\"text-align: center;\">478</td>\n<td style=\"text-align: center;\">457</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">67</td>\n<td style=\"text-align: center;\">477</td>\n<td style=\"text-align: center;\">488</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">59</td>\n<td style=\"text-align: center;\">474</td>\n<td style=\"text-align: center;\">466</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Known performance issues：</p>\n<ol>\n<li><p>From <a href=\"https://stackoverflow.com/questions/2534632/list-all-files-from-a-directory-recursively-with-java/2535558#2535558\">Kevin Day's answer</a>:</p>\n<blockquote>\n<p>If you profile your algorithm above, you'll find that the bulk of the time is spent in the pesky isDirectory() call - that's because you are incurring a round trip for every single call to isDirectory().</p>\n</blockquote>\n</li>\n<li><p>listfiles() will create new File Object for every entry</p>\n</li>\n</ol>\n"}],"owner":{"account_id":102334,"reputation":3710,"user_id":274752,"accept_rate":67,"display_name":"Hultner"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":206823,"favorite_count":0,"down_vote_count":1,"up_vote_count":99,"accepted_answer_id":2534643,"answer_count":20,"score":98,"last_activity_date":1672351916,"creation_date":1269811592,"question_id":2534632,"body_markdown":"I have this function that prints the name of all the files in a directory recursively. The problem is that my code is very slow because it has to access a remote network device with every iteration.\r\n\r\nMy plan is to first load all the files from the directory recursively and then after that go through all files with the regex to filter out all the files I don&#39;t want. Is there a better solution?\r\n\r\n```java\r\npublic static printFnames(String sDir) {\r\n    File[] faFiles = new File(sDir).listFiles();\r\n    for (File file : faFiles) {\r\n        if (file.getName().matches(&quot;^(.*?)&quot;)) {\r\n            System.out.println(file.getAbsolutePath());\r\n        }\r\n     &#160;  if (file.isDirectory()) {\r\n            printFnames(file.getAbsolutePath());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis is just a test. Later on I&#39;m not going to use the code like this; instead I&#39;m going to add the path and modification date of every file which matches an advanced regex to an array.\r\n","title":"List all files from a directory recursively with Java","body":"<p>I have this function that prints the name of all the files in a directory recursively. The problem is that my code is very slow because it has to access a remote network device with every iteration.</p>\n<p>My plan is to first load all the files from the directory recursively and then after that go through all files with the regex to filter out all the files I don't want. Is there a better solution?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static printFnames(String sDir) {\n    File[] faFiles = new File(sDir).listFiles();\n    for (File file : faFiles) {\n        if (file.getName().matches(&quot;^(.*?)&quot;)) {\n            System.out.println(file.getAbsolutePath());\n        }\n        if (file.isDirectory()) {\n            printFnames(file.getAbsolutePath());\n        }\n    }\n}\n</code></pre>\n<p>This is just a test. Later on I'm not going to use the code like this; instead I'm going to add the path and modification date of every file which matches an advanced regex to an array.</p>\n"},{"tags":["java","sql","hibernate","many-to-many","referential-integrity"],"owner":{"account_id":13602783,"reputation":11,"user_id":9812953,"display_name":"elliot_mmm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672351889,"creation_date":1672351889,"question_id":74956485,"body_markdown":"I have the following model stored in a data base. Upon deletion of a room i receive a Referencial Integrity Constraint Violation, which I can&#39;t figure out. \r\n\r\nAn important rule for the model is: a person MUST have access to a room. If they lose all access (e.g. all rooms they have access to are deleted), they are removed from the database. \r\n\r\n[![ER-Diagram](https://i.stack.imgur.com/11HhJ.png)](https://i.stack.imgur.com/11HhJ.png)\r\n\r\nThe ManyToMany Mapping in Question exists between Person and Room and exists in the form of the table &quot;access&quot;. Ill be sharing some code for:\r\n\r\n- Person.java\r\n\r\n- Room.java\r\n\r\n- an excerpt from DAO.java (data access object)\r\n\r\n- DeleteRoom.java (main)\r\n\r\nIn order to uphold consistency in my data base i have come up with the following logic which i have tried to implement in DAO.deleteRoomWithConsistency(RoomId roomId), which I shared below:\r\n\r\nWhen a room is deleted i run a loop over all persons who have access to that room:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/RzQZM.png)](https://i.stack.imgur.com/RzQZM.png)\r\n\r\n\r\nNow the code:\r\n\r\nPerson.java:\r\n\r\n```\r\n@Entity(name = &quot;Person&quot;)\r\n@Table(name = &quot;Person&quot;)\r\npublic class Person {\r\n\r\n\tpublic Person(int persNumber, String name, LocalDate dob) {\r\n\t\tsuper();\r\n\t\tthis.persNumber = persNumber;\r\n\t\tthis.name = name;\r\n\t\tthis.dob = dob;\r\n\t}\r\n\r\n\t@Id\r\n\t@Column(name = &quot;persNumber&quot;)\r\n\tprivate int persNumber;\r\n\r\n\t@Column(name = &quot;name&quot;)\r\n\tprivate String name;\r\n\r\n\t@Column(name = &quot;dob&quot;)\r\n\tprivate LocalDate dob;\r\n\t\r\n\t@ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH}, fetch=FetchType.LAZY)\r\n\t@JoinColumn(name=&quot;orgUnit&quot;)\r\n\tprivate OrgUnit orgUnit;\r\n\r\n\tpublic void setOrgUnit(OrgUnit orgUnit) {\r\n\t\tthis.orgUnit = orgUnit;\r\n\t}\r\n\r\n\t// List of Rooms a Person has Access to\r\n\t// Owning Side of Bidirectional Relationship with Room\r\n\t@ManyToMany(fetch = FetchType.LAZY,\r\n\t        cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH}\r\n\t        )\r\n\t@JoinTable(name = &quot;access&quot;, joinColumns = @JoinColumn(name = &quot;person_id&quot;), \r\n\t\t\t  inverseJoinColumns = {@JoinColumn(name = &quot;building&quot;, referencedColumnName = &quot;building&quot;),\r\n\t\t\t  \t\t\t\t\t   @JoinColumn(name = &quot;number&quot;, referencedColumnName = &quot;number&quot;)})\r\n\tprivate Set&lt;Room&gt; roomAccess = new HashSet&lt;&gt;();\r\n```\r\n\r\nRoom.java:\r\n\r\n```\r\n@Entity(name = &quot;Room&quot;)\r\n@Table(name = &quot;Room&quot;)\r\npublic class Room {\r\n\t\r\n\t@EmbeddedId\r\n\tprivate RoomId roomId;\r\n\r\n\t@Column(name = &quot;area&quot;)\r\n\tprivate int area;\r\n\r\n\t@Column(name = &quot;usetype&quot;)\r\n\t@Enumerated(EnumType.STRING) //Adds the String Value of the Enum, instead of the ordinal value\r\n\tprivate UseType usetype;\r\n\r\n\t//List of Persons with Access to a Room\r\n\t//Inverse Side of Bidirectional Relationship with Person\r\n\t@ManyToMany(mappedBy = &quot;roomAccess&quot;, cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH})\r\n\tprivate Set&lt;Person&gt; personsWithAccess = new HashSet&lt;&gt;();\r\n```\r\n\r\nDeleteRoom.java\r\n\r\n```\r\npublic class DeleteRoom {\r\n\r\n\tpublic static void main(String[] args) throws SQLException {\r\n\r\n\t\t//Connection to the database \r\n\t\tDAO dao = new DAO();\r\n\t\tdao.connect(&quot;./db/hw01&quot;, &quot;bitub&quot;, &quot;&quot;);\r\n\r\n\t\t//Inputs\r\n\t\tBuilding b1 = DAO.getInstance().readBuildingByName(\r\n\t\t\t\t&quot;Beispielhaus&quot;\t//Enter the Building of the Room\r\n\t\t\t\t);\r\n\t\tInteger roomNumber = 102; //Enter Room Number\r\n\t\t\r\n\t\tRoomId toBeDeletedRoomId = new RoomId(b1, roomNumber);\r\n\t\t\r\n\t\t//Room r = DAO.getInstance().readRoom(toBeDeletedRoomId);\r\n\t\t//System.out.println(r);\r\n\r\n\t\tDAO.getInstance().deleteRoomWithConsistency(toBeDeletedRoomId);\r\n\t\t\r\n\t\tdao.closeConnection();\r\n\t}\r\n\r\n}\r\n```\r\n\r\nexcerpt from DAO.java\r\n\r\n```\r\npublic class DAO {\r\n\r\n\tprivate static Connection conn;\r\n\t\r\n\tpublic void connect(String url, String username, String password) throws SQLException {\r\n\r\n\t\tString connectionURL = &quot;jdbc:h2:&quot; + url;\r\n\r\n\t\ttry {\r\n\t\t\tconn = DriverManager.getConnection(connectionURL, username, password);\r\n\r\n\t\t} catch (SQLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t\tSystem.out.println(&quot;connecting to &quot; +connectionURL);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Close\r\n\t * \r\n\t */\r\n\tpublic void closeConnection() throws SQLException {\r\n\t\tconn.close();\r\n\t}\r\n\r\n/**\r\n* deletes a room by their primary key with consistency\r\n*/\r\n\tpublic void deleteRoomWithConsistency(RoomId roomId) throws SQLException {\r\n\r\n\t\tSession session = null;\r\n\t\tTransaction transaction = null;\r\n\t\t\r\n\t\ttry {\r\n\t\t\t// open the session\r\n\t\t\tsession = HibernateUtil.getSessionFactory().openSession();\r\n\t\t\t// begin the transaction\r\n\t\t\ttransaction = session.beginTransaction();\r\n\t\t\t\r\n\t\t\t//retrieving room from the database\r\n\t\t\tRoom deletedRoom = (Room) session.find(Room.class, roomId);\r\n\t\t\t\r\n\t\t\t//Set of people who have access to the room with roomId\r\n\t\t\tSet&lt;Person&gt; peopleWithAccess = this.readPersonsWithAccessForRoom(roomId);\r\n\t\t\t//keeping consistency\r\n\t\t\t//for all persons with access to the deleted room\r\n\t\t\tfor (Person pWithAccess : peopleWithAccess) {\r\n\t\t\t\t\r\n\t\t\t\t//Set of rooms a pWithAccess has access to\r\n\t\t\t\tSet&lt;Room&gt; roomsWithAccess = this.readRoomsWithAccessForPerson(pWithAccess);\r\n\t\t\t\t//if \r\n\t\t\t\t//this person only has access to one room (the deleted room), the person is deleted\r\n\t\t\t\tif (roomsWithAccess.size()==1) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t//Set of People who are in the same org unit as pWithAccess\r\n\t\t\t\t\tSet&lt;Person&gt; orgUnitMembers = this.readOrgUnitMembers(pWithAccess.getOrgUnit().getName());\r\n\t\t\t\t\t//if \r\n\t\t\t\t\t//this person is the only person in the org unit, the org unit is deleted, by orphan removal the person is also deleted\r\n\t\t\t\t\tif(orgUnitMembers.size()==1) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//remove org unit -&gt; remove lonely member (has access to only one room and is the only member of his org unit)\r\n\t\t\t\t\t\tsession.delete(pWithAccess.getOrgUnit().getName());\r\n\t\t\t\t\t//there are other people in the orgunit, he/she might be the head of the unit\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//Boolean if pWithAccess is the head of the unit\r\n\t\t\t\t\t\tBoolean isHeadOfUnit = this.checkIfHeadOfUnit(pWithAccess);\r\n\t\t\t\t\t\t//if\r\n\t\t\t\t\t\t//he/she is head of the unit, a new head of the unit must be appointed\r\n\t\t\t\t\t\tif(isHeadOfUnit==true) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tIterator&lt;Person&gt; it = orgUnitMembers.iterator();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//appoint the first person, who isn&#39;t the old head of unit, the new head of unit\r\n\t\t\t\t\t\t\twhile (it.hasNext()) {\r\n\t\t\t\t\t\t\t\tif (it.next() != pWithAccess) {\r\n\t\t\t\t\t\t\t\t\tpWithAccess.getOrgUnit().setHeadOfUnit(it.next());\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} \t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//remove person (has access to only one room, but is not the only one in his org unit)\r\n\t\t\t\t\t\tsession.delete(pWithAccess);\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t//this person has access to multiple rooms, the room is deleted from the rooms this person has access to\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsession.createSQLQuery(&quot;&quot;\r\n\t\t\t\t\t\t\t+ &quot;DELETE FROM access  &quot;\r\n\t\t\t\t\t\t\t+ &quot;WHERE person_id = &#39;&quot; + pWithAccess.getPersNumber() +&quot;&#39;&quot;\r\n\t\t\t\t\t\t\t+ &quot;AND building=&#39;&quot; + roomId.getBuildingName()+ &quot;&#39; &quot;\r\n\t\t\t\t\t\t\t+ &quot;AND number =&#39;&quot; + roomId.getNumber()+ &quot;&#39; &quot;);\r\n\t\t\t\t\t//roomsWithAccess.remove(deletedRoom);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//removing the room\r\n\t\t\tsession.delete(deletedRoom);\r\n\t\t\t\r\n\t\t\t// commit the transaction\r\n\t\t\ttransaction.commit();\r\n\r\n\t\t} catch (final HibernateException e) {\r\n\t\t\trollbackTransactionIfPossible(transaction);\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (final Exception e) {\r\n\t\t\trollbackTransactionIfPossible(transaction);\r\n\t\t\te.printStackTrace();\r\n\t\t} finally {\r\n\t\t\t// close the session\r\n\t\t\tif ((session != null) &amp;&amp; session.isOpen()) {\r\n\t\t\t\tsession.close();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\n\r\nAnd finally, when I run my main method to delete a room I get the following output:\r\n\r\n```\r\nHibernate: select room0_.building as building4_5_0_, room0_.number as number1_5_0_, room0_.area as area2_5_0_, room0_.usetype as usetype3_5_0_ from Room room0_ where room0_.building=? and room0_.number=?\r\nHibernate: delete from Room where building=? and number=?\r\n...\r\nReferential integrity constraint violation: &quot;FK3SHH9TEIQLTR6V1EAPFWO13WM: PUBLIC.ACCESS FOREIGN KEY(BUILDING, NUMBER) REFERENCES PUBLIC.ROOM(BUILDING, NUMBER) (&#39;Beispielhaus&#39;, 102)&quot;; SQL statement:\r\ndelete from Room where building=? and number=? [23503-214]\r\nDez. 29, 2022 10:04:38 NACHM. org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl release\r\nINFO: HHH000010: On release of batch it still contained JDBC statements\r\n...\r\n```\r\n\r\nI hope I could provide enough information for someone to help me out. Any insight would be greatly appreciated.  \r\n\r\nI have tried tinkering with the mapping, adding or removing the CascadeType.REMOVE. But in my research I learned that CascadeType.REMOVE or ALL shouldn&#39;t be used for &quot;...ToMany&quot; associations. \r\n\r\nI have also tried debugging, but I didn&#39;t learn anything from that. The transaction builds up and when it is commited, the error happens. \r\n\r\nAny help with this error is greatly appreciated. ","title":"Hibernate &quot;Referencial Integrity Constraint Violation&quot; for ManyToMany Bidirectional Mapping","body":"<p>I have the following model stored in a data base. Upon deletion of a room i receive a Referencial Integrity Constraint Violation, which I can't figure out.</p>\n<p>An important rule for the model is: a person MUST have access to a room. If they lose all access (e.g. all rooms they have access to are deleted), they are removed from the database.</p>\n<p><a href=\"https://i.stack.imgur.com/11HhJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/11HhJ.png\" alt=\"ER-Diagram\" /></a></p>\n<p>The ManyToMany Mapping in Question exists between Person and Room and exists in the form of the table &quot;access&quot;. Ill be sharing some code for:</p>\n<ul>\n<li><p>Person.java</p>\n</li>\n<li><p>Room.java</p>\n</li>\n<li><p>an excerpt from DAO.java (data access object)</p>\n</li>\n<li><p>DeleteRoom.java (main)</p>\n</li>\n</ul>\n<p>In order to uphold consistency in my data base i have come up with the following logic which i have tried to implement in DAO.deleteRoomWithConsistency(RoomId roomId), which I shared below:</p>\n<p>When a room is deleted i run a loop over all persons who have access to that room:</p>\n<p><a href=\"https://i.stack.imgur.com/RzQZM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RzQZM.png\" alt=\"enter image description here\" /></a></p>\n<p>Now the code:</p>\n<p>Person.java:</p>\n<pre><code>@Entity(name = &quot;Person&quot;)\n@Table(name = &quot;Person&quot;)\npublic class Person {\n\n    public Person(int persNumber, String name, LocalDate dob) {\n        super();\n        this.persNumber = persNumber;\n        this.name = name;\n        this.dob = dob;\n    }\n\n    @Id\n    @Column(name = &quot;persNumber&quot;)\n    private int persNumber;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;dob&quot;)\n    private LocalDate dob;\n    \n    @ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH}, fetch=FetchType.LAZY)\n    @JoinColumn(name=&quot;orgUnit&quot;)\n    private OrgUnit orgUnit;\n\n    public void setOrgUnit(OrgUnit orgUnit) {\n        this.orgUnit = orgUnit;\n    }\n\n    // List of Rooms a Person has Access to\n    // Owning Side of Bidirectional Relationship with Room\n    @ManyToMany(fetch = FetchType.LAZY,\n            cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH}\n            )\n    @JoinTable(name = &quot;access&quot;, joinColumns = @JoinColumn(name = &quot;person_id&quot;), \n              inverseJoinColumns = {@JoinColumn(name = &quot;building&quot;, referencedColumnName = &quot;building&quot;),\n                                   @JoinColumn(name = &quot;number&quot;, referencedColumnName = &quot;number&quot;)})\n    private Set&lt;Room&gt; roomAccess = new HashSet&lt;&gt;();\n</code></pre>\n<p>Room.java:</p>\n<pre><code>@Entity(name = &quot;Room&quot;)\n@Table(name = &quot;Room&quot;)\npublic class Room {\n    \n    @EmbeddedId\n    private RoomId roomId;\n\n    @Column(name = &quot;area&quot;)\n    private int area;\n\n    @Column(name = &quot;usetype&quot;)\n    @Enumerated(EnumType.STRING) //Adds the String Value of the Enum, instead of the ordinal value\n    private UseType usetype;\n\n    //List of Persons with Access to a Room\n    //Inverse Side of Bidirectional Relationship with Person\n    @ManyToMany(mappedBy = &quot;roomAccess&quot;, cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH})\n    private Set&lt;Person&gt; personsWithAccess = new HashSet&lt;&gt;();\n</code></pre>\n<p>DeleteRoom.java</p>\n<pre><code>public class DeleteRoom {\n\n    public static void main(String[] args) throws SQLException {\n\n        //Connection to the database \n        DAO dao = new DAO();\n        dao.connect(&quot;./db/hw01&quot;, &quot;bitub&quot;, &quot;&quot;);\n\n        //Inputs\n        Building b1 = DAO.getInstance().readBuildingByName(\n                &quot;Beispielhaus&quot;  //Enter the Building of the Room\n                );\n        Integer roomNumber = 102; //Enter Room Number\n        \n        RoomId toBeDeletedRoomId = new RoomId(b1, roomNumber);\n        \n        //Room r = DAO.getInstance().readRoom(toBeDeletedRoomId);\n        //System.out.println(r);\n\n        DAO.getInstance().deleteRoomWithConsistency(toBeDeletedRoomId);\n        \n        dao.closeConnection();\n    }\n\n}\n</code></pre>\n<p>excerpt from DAO.java</p>\n<pre><code>public class DAO {\n\n    private static Connection conn;\n    \n    public void connect(String url, String username, String password) throws SQLException {\n\n        String connectionURL = &quot;jdbc:h2:&quot; + url;\n\n        try {\n            conn = DriverManager.getConnection(connectionURL, username, password);\n\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n\n        System.out.println(&quot;connecting to &quot; +connectionURL);\n\n    }\n\n    /**\n     * Close\n     * \n     */\n    public void closeConnection() throws SQLException {\n        conn.close();\n    }\n\n/**\n* deletes a room by their primary key with consistency\n*/\n    public void deleteRoomWithConsistency(RoomId roomId) throws SQLException {\n\n        Session session = null;\n        Transaction transaction = null;\n        \n        try {\n            // open the session\n            session = HibernateUtil.getSessionFactory().openSession();\n            // begin the transaction\n            transaction = session.beginTransaction();\n            \n            //retrieving room from the database\n            Room deletedRoom = (Room) session.find(Room.class, roomId);\n            \n            //Set of people who have access to the room with roomId\n            Set&lt;Person&gt; peopleWithAccess = this.readPersonsWithAccessForRoom(roomId);\n            //keeping consistency\n            //for all persons with access to the deleted room\n            for (Person pWithAccess : peopleWithAccess) {\n                \n                //Set of rooms a pWithAccess has access to\n                Set&lt;Room&gt; roomsWithAccess = this.readRoomsWithAccessForPerson(pWithAccess);\n                //if \n                //this person only has access to one room (the deleted room), the person is deleted\n                if (roomsWithAccess.size()==1) {\n                    \n                    //Set of People who are in the same org unit as pWithAccess\n                    Set&lt;Person&gt; orgUnitMembers = this.readOrgUnitMembers(pWithAccess.getOrgUnit().getName());\n                    //if \n                    //this person is the only person in the org unit, the org unit is deleted, by orphan removal the person is also deleted\n                    if(orgUnitMembers.size()==1) {\n                        \n                        //remove org unit -&gt; remove lonely member (has access to only one room and is the only member of his org unit)\n                        session.delete(pWithAccess.getOrgUnit().getName());\n                    //there are other people in the orgunit, he/she might be the head of the unit\n                    }else{\n                        \n                        //Boolean if pWithAccess is the head of the unit\n                        Boolean isHeadOfUnit = this.checkIfHeadOfUnit(pWithAccess);\n                        //if\n                        //he/she is head of the unit, a new head of the unit must be appointed\n                        if(isHeadOfUnit==true) {\n                            \n                            Iterator&lt;Person&gt; it = orgUnitMembers.iterator();\n                        \n                            //appoint the first person, who isn't the old head of unit, the new head of unit\n                            while (it.hasNext()) {\n                                if (it.next() != pWithAccess) {\n                                    pWithAccess.getOrgUnit().setHeadOfUnit(it.next());\n                                    break;\n                                }\n                            }\n                        }   \n                        \n                        //remove person (has access to only one room, but is not the only one in his org unit)\n                        session.delete(pWithAccess);\n                    }               \n                //this person has access to multiple rooms, the room is deleted from the rooms this person has access to\n                } else {\n                    session.createSQLQuery(&quot;&quot;\n                            + &quot;DELETE FROM access  &quot;\n                            + &quot;WHERE person_id = '&quot; + pWithAccess.getPersNumber() +&quot;'&quot;\n                            + &quot;AND building='&quot; + roomId.getBuildingName()+ &quot;' &quot;\n                            + &quot;AND number ='&quot; + roomId.getNumber()+ &quot;' &quot;);\n                    //roomsWithAccess.remove(deletedRoom);\n                }\n            }\n            \n            //removing the room\n            session.delete(deletedRoom);\n            \n            // commit the transaction\n            transaction.commit();\n\n        } catch (final HibernateException e) {\n            rollbackTransactionIfPossible(transaction);\n            e.printStackTrace();\n        } catch (final Exception e) {\n            rollbackTransactionIfPossible(transaction);\n            e.printStackTrace();\n        } finally {\n            // close the session\n            if ((session != null) &amp;&amp; session.isOpen()) {\n                session.close();\n            }\n        }\n    }\n\n}\n</code></pre>\n<p>And finally, when I run my main method to delete a room I get the following output:</p>\n<pre><code>Hibernate: select room0_.building as building4_5_0_, room0_.number as number1_5_0_, room0_.area as area2_5_0_, room0_.usetype as usetype3_5_0_ from Room room0_ where room0_.building=? and room0_.number=?\nHibernate: delete from Room where building=? and number=?\n...\nReferential integrity constraint violation: &quot;FK3SHH9TEIQLTR6V1EAPFWO13WM: PUBLIC.ACCESS FOREIGN KEY(BUILDING, NUMBER) REFERENCES PUBLIC.ROOM(BUILDING, NUMBER) ('Beispielhaus', 102)&quot;; SQL statement:\ndelete from Room where building=? and number=? [23503-214]\nDez. 29, 2022 10:04:38 NACHM. org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl release\nINFO: HHH000010: On release of batch it still contained JDBC statements\n...\n</code></pre>\n<p>I hope I could provide enough information for someone to help me out. Any insight would be greatly appreciated.</p>\n<p>I have tried tinkering with the mapping, adding or removing the CascadeType.REMOVE. But in my research I learned that CascadeType.REMOVE or ALL shouldn't be used for &quot;...ToMany&quot; associations.</p>\n<p>I have also tried debugging, but I didn't learn anything from that. The transaction builds up and when it is commited, the error happens.</p>\n<p>Any help with this error is greatly appreciated.</p>\n"},{"tags":["java","gradle","jsonschema2pojo"],"answers":[{"comments":[{"owner":{"account_id":350601,"reputation":101,"user_id":686598,"display_name":"Jay99"},"score":1,"creation_date":1675360916,"post_id":74956360,"comment_id":132917690,"body_markdown":"for me the use-case is, running generateJson2Pojo task removes the license from the classes so I want to control on dev environment to not to trigger whenever gradle build is triggerered\n`ps: Thanks for the plugin ! appreciate ur effort on this.`","body":"for me the use-case is, running generateJson2Pojo task removes the license from the classes so I want to control on dev environment to not to trigger whenever gradle build is triggerered <code>ps: Thanks for the plugin ! appreciate ur effort on this.</code>"},{"owner":{"account_id":235978,"reputation":1545,"user_id":503157,"accept_rate":80,"display_name":"Eir Nym"},"score":0,"creation_date":1675515857,"post_id":74956360,"comment_id":132947962,"body_markdown":"Could you please to create an issue for the project? I want to understand better your situation","body":"Could you please to create an issue for the project? I want to understand better your situation"},{"owner":{"account_id":235978,"reputation":1545,"user_id":503157,"accept_rate":80,"display_name":"Eir Nym"},"score":0,"creation_date":1675524009,"post_id":74956360,"comment_id":132949349,"body_markdown":"I dont&#39; understand &quot;taks removes the license from the classes&quot;, so could you please create another question or an issue","body":"I dont&#39; understand &quot;taks removes the license from the classes&quot;, so could you please create another question or an issue"}],"tags":[],"owner":{"account_id":235978,"reputation":1545,"user_id":503157,"accept_rate":80,"display_name":"Eir Nym"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672351878,"creation_date":1672350738,"answer_id":74956360,"question_id":74824998,"body_markdown":"I&#39;m the author of the gradle plugin.\r\n\r\nShort answer for your question is &quot;no, it&#39;s not an intended flow for a normal project&quot;. However, it&#39;s always possible to create a new project, build it once and extract the sources.\r\n\r\nCould you please explain, what the reason you want to exclude run from the `build` chain?\r\n\r\nMy only guess is to build and publish models. And if this is a case, it&#39;s possible to do this using some gradle magic, which described in discussions in the [GitHub project][1] \r\n\r\n**UPD:** Based on your gradle script, I have a lot of &quot;why&quot; questions I&#39;d like to ask, it&#39;ll be easier if you \r\n\r\n\r\n  [1]: https://github.com/jsonschema2dataclass/js2d-gradle/discussions/451","title":"JsonSchema2Pojo and manual task in gradle","body":"<p>I'm the author of the gradle plugin.</p>\n<p>Short answer for your question is &quot;no, it's not an intended flow for a normal project&quot;. However, it's always possible to create a new project, build it once and extract the sources.</p>\n<p>Could you please explain, what the reason you want to exclude run from the <code>build</code> chain?</p>\n<p>My only guess is to build and publish models. And if this is a case, it's possible to do this using some gradle magic, which described in discussions in the <a href=\"https://github.com/jsonschema2dataclass/js2d-gradle/discussions/451\" rel=\"nofollow noreferrer\">GitHub project</a></p>\n<p><strong>UPD:</strong> Based on your gradle script, I have a lot of &quot;why&quot; questions I'd like to ask, it'll be easier if you</p>\n"}],"owner":{"account_id":467449,"reputation":968,"user_id":872846,"accept_rate":78,"display_name":"PastorPL"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":540,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672351878,"creation_date":1671196727,"question_id":74824998,"body_markdown":"**What I would like to achieve**\r\n\r\nI would like to have a manual gradle task that I can generate Java classes based on Json schema. However, I don&#39;t want this task to run when I run other fx. *gradle build*.\r\n\r\n**What I did**\r\n\r\nFirstly I&#39;ve create simple gradle java project with \r\n\r\n    gradle init\r\n\r\nThen I  have added *jsonschema2dataclass* plugin and configure it as follows (my current build.gradle):\r\n\r\n    /*\r\n     * This file was generated by the Gradle &#39;init&#39; task.\r\n     * (...) \r\n     */\r\n    \r\n    plugins {\r\n        // Apply the application plugin to add support for building a CLI application in Java.\r\n        id &#39;application&#39;\r\n    \r\n        id &quot;org.jsonschema2dataclass&quot; version &quot;4.5.0&quot;\r\n    }\r\n    \r\n    repositories {\r\n        // Use Maven Central for resolving dependencies.\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        // Use JUnit Jupiter API for testing.\r\n        testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.6.2&#39;\r\n    \r\n        // Use JUnit Jupiter Engine for testing.\r\n        testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine&#39;\r\n    \r\n        // This dependency is used by the application.\r\n        implementation &#39;com.google.guava:guava:29.0-jre&#39;\r\n    }\r\n    \r\n    application {\r\n        // Define the main class for the application.\r\n        mainClass = &#39;GradlePlayground.App&#39;\r\n    }\r\n    \r\n    jsonSchema2Pojo {\r\n                includeGeneratedAnnotation = true\r\n                generateBuilders = true\r\n                targetPackage = &#39;org.example.api&#39; // specify package for your needs\r\n                targetDirectoryPrefix = file(&quot;${project.rootDir}/app/src/main/java&quot;)\r\n    \r\n                source.setFrom files(&quot;${project.rootDir}/app/src/main/resources/json&quot;)\r\n    }\r\n\r\n**What I&#39;ve tried**\r\n\r\n 1. Add `task.enabled = false`\r\n 2. Put plugin configuration into another task\r\n 3. Check source code of plugin to find a way to disconnect this task from build task\r\n\r\nBut all above trails have failed. When I run gradle tasks I can always see `generateJsonSchema2DataClass` and `generateJsonSchema2DataClass0` as part of build tasks.\r\n\r\nI&#39;m using java 8 and gradle 6.9.3\r\n\r\n\r\n\r\n \r\n\r\n","title":"JsonSchema2Pojo and manual task in gradle","body":"<p><strong>What I would like to achieve</strong></p>\n<p>I would like to have a manual gradle task that I can generate Java classes based on Json schema. However, I don't want this task to run when I run other fx. <em>gradle build</em>.</p>\n<p><strong>What I did</strong></p>\n<p>Firstly I've create simple gradle java project with</p>\n<pre><code>gradle init\n</code></pre>\n<p>Then I  have added <em>jsonschema2dataclass</em> plugin and configure it as follows (my current build.gradle):</p>\n<pre><code>/*\n * This file was generated by the Gradle 'init' task.\n * (...) \n */\n\nplugins {\n    // Apply the application plugin to add support for building a CLI application in Java.\n    id 'application'\n\n    id &quot;org.jsonschema2dataclass&quot; version &quot;4.5.0&quot;\n}\n\nrepositories {\n    // Use Maven Central for resolving dependencies.\n    mavenCentral()\n}\n\ndependencies {\n    // Use JUnit Jupiter API for testing.\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.6.2'\n\n    // Use JUnit Jupiter Engine for testing.\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine'\n\n    // This dependency is used by the application.\n    implementation 'com.google.guava:guava:29.0-jre'\n}\n\napplication {\n    // Define the main class for the application.\n    mainClass = 'GradlePlayground.App'\n}\n\njsonSchema2Pojo {\n            includeGeneratedAnnotation = true\n            generateBuilders = true\n            targetPackage = 'org.example.api' // specify package for your needs\n            targetDirectoryPrefix = file(&quot;${project.rootDir}/app/src/main/java&quot;)\n\n            source.setFrom files(&quot;${project.rootDir}/app/src/main/resources/json&quot;)\n}\n</code></pre>\n<p><strong>What I've tried</strong></p>\n<ol>\n<li>Add <code>task.enabled = false</code></li>\n<li>Put plugin configuration into another task</li>\n<li>Check source code of plugin to find a way to disconnect this task from build task</li>\n</ol>\n<p>But all above trails have failed. When I run gradle tasks I can always see <code>generateJsonSchema2DataClass</code> and <code>generateJsonSchema2DataClass0</code> as part of build tasks.</p>\n<p>I'm using java 8 and gradle 6.9.3</p>\n"},{"tags":["java","arrays","arraylist","printing","playing-cards"],"comments":[{"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"score":0,"creation_date":1672349726,"post_id":74955971,"comment_id":132274364,"body_markdown":"A quick clarification: Every member of the `playspace` array is supposed to be a **column** on the board?","body":"A quick clarification: Every member of the <code>playspace</code> array is supposed to be a <b>column</b> on the board?"},{"owner":{"account_id":16930768,"reputation":3,"user_id":12245103,"display_name":"dactel"},"score":0,"creation_date":1672351480,"post_id":74955971,"comment_id":132274790,"body_markdown":"Correct, every ArrayList object within the playSpace Array is supposed to be a column. This is because the length of the columns in solitaire change when cards get added/subtracted from the column.","body":"Correct, every ArrayList object within the playSpace Array is supposed to be a column. This is because the length of the columns in solitaire change when cards get added/subtracted from the column."}],"answers":[{"comments":[{"owner":{"account_id":16930768,"reputation":3,"user_id":12245103,"display_name":"dactel"},"score":0,"creation_date":1672351510,"post_id":74956391,"comment_id":132274798,"body_markdown":"Where do I implement this?","body":"Where do I implement this?"},{"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"score":0,"creation_date":1672352499,"post_id":74956391,"comment_id":132275002,"body_markdown":"The same place your incorrect code was: `Wasp.displayBoard`","body":"The same place your incorrect code was: <code>Wasp.displayBoard</code>"}],"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1672351012,"creation_date":1672351012,"answer_id":74956391,"question_id":74955971,"body_markdown":"This isn&#39;t super pretty, but it does the trick. I created a queue for each column and scanned through popping one element off of each to make a row. I had to put a spacer for the columns that had already run out of elements.\r\n\r\n```Java\r\nList&lt;Deque&lt;Card&gt;&gt; deques = Arrays.stream(playSpace)\r\n    .map(ArrayDeque::new)\r\n    .collect(Collectors.toList());\r\n\r\nwhile(deques.stream().anyMatch(dq -&gt; !dq.isEmpty())) {\r\n    System.out.println(deques.stream()\r\n        .map(dq -&gt; dq.isEmpty()?&quot;      &quot;:dq.pop().shortHand())\r\n        .collect(Collectors.joining()));\r\n}\r\n","title":"Need help on printing an Array of ArrayLists (of different sizes)","body":"<p>This isn't super pretty, but it does the trick. I created a queue for each column and scanned through popping one element off of each to make a row. I had to put a spacer for the columns that had already run out of elements.</p>\n<pre><code>List&lt;Deque&lt;Card&gt;&gt; deques = Arrays.stream(playSpace)\n    .map(ArrayDeque::new)\n    .collect(Collectors.toList());\n\nwhile(deques.stream().anyMatch(dq -&gt; !dq.isEmpty())) {\n    System.out.println(deques.stream()\n        .map(dq -&gt; dq.isEmpty()?&quot;      &quot;:dq.pop().shortHand())\n        .collect(Collectors.joining()));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16930768,"reputation":3,"user_id":12245103,"display_name":"dactel"},"score":0,"creation_date":1672353055,"post_id":74956437,"comment_id":132275099,"body_markdown":"This does not keep the order of the columns in the base Array when it prints :/","body":"This does not keep the order of the columns in the base Array when it prints :/"}],"tags":[],"owner":{"account_id":16689839,"reputation":555,"user_id":12062831,"display_name":"gsan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672351416,"creation_date":1672351416,"answer_id":74956437,"question_id":74955971,"body_markdown":"You have to modify `displayBoard()` function inside your `Wasp` class to print your array in **column-wise order**. \r\n\r\nNew function will look like the following:\r\n\r\n    public class Wasp extends Playspace { \r\n    \r\n        ...\r\n    \r\n        public void displayBoard() {\r\n            playSpace[0].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\r\n            // playSpace[0].remove(6); //Used in testing, not necessary to include in final\r\n            playSpace[3].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\r\n    \r\n            int maxSize = 0;\r\n            for (ArrayList&lt;Card&gt; ac : playSpace) {\r\n                if(ac.size() &gt; maxSize) {\r\n                    maxSize = ac.size();\r\n                }\r\n            }\r\n    \r\n            for(int i=0; i&lt;maxSize; i++) {\r\n                for(ArrayList&lt;Card&gt; ac: playSpace) {\r\n                    if(ac.size() &gt; i) {\r\n                        System.out.print(ac.get(i).shortHand());\r\n                    }\r\n                }\r\n                System.out.println();\r\n            }\r\n        } \r\n    \r\n        ...\r\n    }\r\n\r\nBasically, at the first loop, we look through the playspace to get the maximum number of cards we have in any list. Then we iterate in a column-wise manner considering this limit of maximum cards a playspace can have. ","title":"Need help on printing an Array of ArrayLists (of different sizes)","body":"<p>You have to modify <code>displayBoard()</code> function inside your <code>Wasp</code> class to print your array in <strong>column-wise order</strong>.</p>\n<p>New function will look like the following:</p>\n<pre><code>public class Wasp extends Playspace { \n\n    ...\n\n    public void displayBoard() {\n        playSpace[0].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\n        // playSpace[0].remove(6); //Used in testing, not necessary to include in final\n        playSpace[3].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\n\n        int maxSize = 0;\n        for (ArrayList&lt;Card&gt; ac : playSpace) {\n            if(ac.size() &gt; maxSize) {\n                maxSize = ac.size();\n            }\n        }\n\n        for(int i=0; i&lt;maxSize; i++) {\n            for(ArrayList&lt;Card&gt; ac: playSpace) {\n                if(ac.size() &gt; i) {\n                    System.out.print(ac.get(i).shortHand());\n                }\n            }\n            System.out.println();\n        }\n    } \n\n    ...\n}\n</code></pre>\n<p>Basically, at the first loop, we look through the playspace to get the maximum number of cards we have in any list. Then we iterate in a column-wise manner considering this limit of maximum cards a playspace can have.</p>\n"}],"owner":{"account_id":16930768,"reputation":3,"user_id":12245103,"display_name":"dactel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74956391,"answer_count":2,"score":-1,"last_activity_date":1672351416,"creation_date":1672347349,"question_id":74955971,"body_markdown":"I&#39;m making my own solitaire program I can run on my computer (for leisure and practice) and I am trying to display my &#39;ArrayList\\&lt;Card\\&gt;\\[\\] playspace&#39; like it shows in Solitaire. More specifically I&#39;m trying to display the card order downward instead of to the right side like it currently is. Following is my entire program (necessary classes needed to run).\r\n\r\n[This](https://stackoverflow.com/questions/48531761/defining-java-method-for-printing-arrays-of-different-sizes-into-a-table) seemed to be a solution when I checked, but their issue was the bounds of the array and I don&#39;t think they included the printing function, it is also not a 2D Array of ArrayLists... so it might be a solution but it looks just off enough to not be what I need.\r\n\r\nCard:\r\n\r\n```java\r\npackage Playspace;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\n/**\r\n * A card object with value, suit, and faceUp identification.\r\n * \r\n * @author Austin M\r\n * @param numValue\r\n * @param faceValue\r\n * @param suit\r\n * @param faceUp\r\n */\r\npublic class Card {\r\n\r\n\tprivate int numValue;\r\n\tprivate String faceValue;\r\n\tprivate String suit;\r\n\tprivate String shortSuit;\r\n\tpublic boolean faceUp;\r\n\tpublic String[] values = { &quot;A&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;J&quot;, &quot;Q&quot;, &quot;K&quot;, &quot; &quot; };\r\n\tpublic String[] suits = { &quot;Clubs&quot;, &quot;Diamonds&quot;, &quot;Hearts&quot;, &quot;Spades&quot;, &quot; &quot; };\r\n\r\n\t/**\r\n\t * Public constructor for generating a card with value face &amp; suit\r\n\t * \r\n\t * @param value\r\n\t * @param suit\r\n\t */\r\n\tCard(String faceValue, String suit, boolean faceUp) {\r\n\t\tfor (String v : values) {\r\n\t\t\tif (v.equals(faceValue)) {\r\n\t\t\t\tthis.faceValue = faceValue;\r\n\t\t\t\tsetNumValue(faceValue);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (String s : suits) {\r\n\t\t\tif (s.equals(suit)) {\r\n\t\t\t\tthis.suit = suit;\r\n\r\n\t\t\t\tshortSuit = suit.substring(0, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.faceUp = faceUp;\r\n\t}\r\n\r\n\t/**\r\n\t * Private method, returns a list of valid card values\r\n\t * \r\n\t * @returns Arrays.asList()\r\n\t */\r\n\tprivate static List&lt;String&gt; getValues() {\r\n\t\treturn Arrays.asList(&quot;A&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;J&quot;, &quot;Q&quot;, &quot;K&quot;, &quot; &quot;);\r\n\t}\r\n\r\n\t/**\r\n\t * Private method, returns a list of valid suit values\r\n\t * \r\n\t * @return Arrays.asList()\r\n\t */\r\n\t@SuppressWarnings(&quot;unused&quot;)\r\n\tprivate static List&lt;String&gt; getSuits() {\r\n\t\treturn Arrays.asList(&quot;clubs&quot;, &quot;diamonds&quot;, &quot;hearts&quot;, &quot;spades&quot;, &quot; &quot;);\r\n\t}\r\n\r\n\t/**\r\n\t * Gets string value of face\r\n\t * \r\n\t * @return String faceValue\r\n\t */\r\n\tpublic String getFaceValue() {\r\n\t\treturn faceValue;\r\n\t}\r\n\r\n\t@SuppressWarnings(&quot;unused&quot;)\r\n\tprivate void setFaceValue(String faceValue) {\r\n\t\tthis.faceValue = faceValue;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets suit value of card\r\n\t * \r\n\t * @return String suit\r\n\t */\r\n\tpublic String getSuit() {\r\n\t\treturn suit;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets faceUp value of card\r\n\t * \r\n\t * @return Boolean faceUp\r\n\t */\r\n\tpublic boolean isFaceUp() {\r\n\t\treturn faceUp;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the card face up\r\n\t */\r\n\tpublic void setFaceUp() {\r\n\t\tthis.faceUp = true;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the card face down\r\n\t */\r\n\tpublic void setFaceDown() {\r\n\t\tthis.faceUp = false;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets numerical value of card\r\n\t * \r\n\t * @return int numValue\r\n\t */\r\n\tpublic int getNumValue() {\r\n\t\treturn numValue;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets numerical value with the index + 1 of the corresponding face value\r\n\t * \r\n\t * @param faceValue\r\n\t */\r\n\tprivate void setNumValue(String faceValue) {\r\n\t\tnumValue = getValues().indexOf(faceValue) + 1;\r\n\t}\r\n\r\n\t/**\r\n\t * Generates a string with faceValue and Suit, if card is face down, it does not\r\n\t * display card value\r\n\t * \r\n\t * @return String concat\r\n\t */\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\tString concat;\r\n\t\tif (faceUp) {\r\n\t\t\tconcat = extValue() + &quot; of &quot; + suit;\r\n\t\t} else {\r\n\t\t\tconcat = &quot; --- --- --- --- &quot;;\r\n\t\t}\r\n\r\n\t\treturn concat;\r\n\t}\r\n\r\n\tpublic String shortHand() {\r\n\t\tString shortHand = &quot;&quot;;\r\n\t\tif (faceUp) {\r\n\t\t\tshortHand = &quot;[&quot; + String.format(&quot;%-3s&quot;, faceValue) + shortSuit + &quot;]&quot;;\r\n\t\t} else {\r\n\t\t\tshortHand = &quot;[ -- ]&quot;;\r\n\t\t}\r\n\r\n\t\treturn shortHand;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the Extended value of the card name (if it&#39;s Jack-Ace)\r\n\t * \r\n\t * @return String faceValue\r\n\t */\r\n\tprivate String extValue() {\r\n\r\n\t\tfaceValue = faceValue.toUpperCase();\r\n\t\tif (faceValue.equals(&quot;A&quot;)) {\r\n\t\t\treturn &quot;Ace&quot;;\r\n\t\t} else if (faceValue.equals(&quot;J&quot;)) {\r\n\t\t\treturn &quot;Jack&quot;;\r\n\t\t} else if (faceValue.equals(&quot;Q&quot;)) {\r\n\t\t\treturn &quot;Queen&quot;;\r\n\t\t} else if (faceValue.equals(&quot;K&quot;)) {\r\n\t\t\treturn &quot;King&quot;;\r\n\t\t}\r\n\t\treturn faceValue;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nDeck:\r\n\r\n```java\r\npackage Playspace;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\n\r\n/**\r\n * A collection of Card objects where the order can be manipulated\r\n * \r\n * @author Austin M\r\n * @param deck\r\n */\r\npublic class Deck {\r\n\r\n\tpublic ArrayList&lt;Card&gt; deck = new ArrayList&lt;Card&gt;();\r\n\r\n\tDeck() {\r\n\t\tgenerateCards();\r\n\t}\r\n\r\n\t/**\r\n\t * Shuffles the deck randomly using Collections.shuffle() method\r\n\t */\r\n\tpublic void shuffleDeck() {\r\n\t\tCollections.shuffle(deck);\r\n\t}\r\n\r\n\t/**\r\n\t * Generates 52 card objects in a collection\r\n\t */\r\n\tvoid generateCards() {\r\n\t\tfor (int i = 0; i &lt; 4; i++) {\r\n\t\t\tfor (int j = 0; j &lt; 13; j++) {\r\n\t\t\t\taddCard(i, j);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the top card (first in deck)\r\n\t * \r\n\t * @return Card\r\n\t */\r\n\tpublic Card getTop() {\r\n\t\treturn deck.get(0);\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the card in given value of the deck (0-51)\r\n\t * \r\n\t * @param int pos\r\n\t * @return Card\r\n\t */\r\n\tpublic Card getPos(int pos) {\r\n\t\treturn deck.get(pos);\r\n\t}\r\n\r\n\t/**\r\n\t * Combines the contents of the deck list and prints out the deck in a right\r\n\t * aligned column (%18s\\n)\r\n\t * @return String concat\r\n\t */\r\n\t@Override\r\n\tpublic String toString() {\r\n//\t\tString concat = &quot;&quot;;\r\n//\r\n//\t\tfor (Card card : deck) {\r\n//\t\t\tconcat += card.toString() + &quot; &quot;;\r\n//\t\t}\r\n\t\tString concat = &quot;&quot;;\r\n\t\tfor (Card card : deck) {\r\n\t\t\tconcat += String.format(&quot;[%17s]\\n&quot;, card.toString());\r\n\t\t}\r\n\r\n\t\treturn concat;\r\n\t}\r\n\r\n\t/**\r\n\t * Combines the contents of the deck list and prints out the deck in a right\r\n\t * aligned column (%5s\\n)\r\n\t */\r\n\tpublic String shortHand() {\r\n\t\tString concat = &quot;&quot;;\r\n\t\tfor (Card card : deck) {\r\n\t\t\tconcat += String.format(&quot;%5s\\n&quot;, card.shortHand());\r\n\t\t}\r\n\t\treturn concat;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a card to ArrayList&lt;Card&gt; deck given suit (i) and faceValue (j)\r\n\t * \r\n\t * @param i\r\n\t * @param j\r\n\t */\r\n\tprivate void addCard(int i, int j) {\r\n\t\tString suit, faceValue;\r\n\t\tswitch (i) {\r\n\t\tcase 0: {\r\n\t\t\tsuit = &quot;Clubs&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 1: {\r\n\t\t\tsuit = &quot;Diamonds&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 2: {\r\n\t\t\tsuit = &quot;Hearts&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 3: {\r\n\t\t\tsuit = &quot;Spades&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\tsuit = &quot;clubs&quot;;\r\n\t\t\tSystem.err.println(&quot;Unexpected suit: &quot; + i);\r\n\t\t}\r\n\r\n\t\tswitch (j) {\r\n\t\tcase 0: {\r\n\t\t\tfaceValue = &quot;A&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 1: {\r\n\t\t\tfaceValue = &quot;2&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 2: {\r\n\t\t\tfaceValue = &quot;3&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 3: {\r\n\t\t\tfaceValue = &quot;4&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 4: {\r\n\t\t\tfaceValue = &quot;5&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 5: {\r\n\t\t\tfaceValue = &quot;6&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 6: {\r\n\t\t\tfaceValue = &quot;7&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 7: {\r\n\t\t\tfaceValue = &quot;8&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 8: {\r\n\t\t\tfaceValue = &quot;9&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 9: {\r\n\t\t\tfaceValue = &quot;10&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 10: {\r\n\t\t\tfaceValue = &quot;J&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 11: {\r\n\t\t\tfaceValue = &quot;Q&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 12: {\r\n\t\t\tfaceValue = &quot;K&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\tfaceValue = &quot;A&quot;;\r\n\t\t\tSystem.err.println(&quot;Unexpected value: &quot; + j);\r\n\t\t}\r\n\t\tdeck.add(new Card(faceValue, suit, false));\r\n\r\n\t}\r\n}\r\n```\r\n\r\nWasp:\r\n\r\n```java\r\npackage Playspace;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\n\r\npublic class Wasp extends Playspace {\r\n\r\n\tWasp() {\r\n\t\tsetUp();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void setUp() {\r\n\t\tinitialize();\r\n\r\n//\t\tdeck.shuffleDeck();\r\n\t\tsetFaceUp();\r\n\r\n\t\tfor (int i = 0; i &lt; 49; i += 7) {\r\n\t\t\tplaySpace[0].add(deck.getPos(i));\r\n\t\t\tplaySpace[1].add(deck.getPos(i + 1));\r\n\t\t\tplaySpace[2].add(deck.getPos(i + 2));\r\n\t\t\tplaySpace[3].add(deck.getPos(i + 3));\r\n\t\t\tplaySpace[4].add(deck.getPos(i + 4));\r\n\t\t\tplaySpace[5].add(deck.getPos(i + 5));\r\n\t\t\tplaySpace[6].add(deck.getPos(i + 6));\r\n\t\t}\r\n//\t\tSystem.out.println(deck.shortHand());\r\n\t\tdisplayBoard();\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tpublic void setFaceUp() {\r\n\t\tint[] faceDownPos = { 0, 1, 2, 3, 7, 8, 9, 10, 14, 15, 16, 17 };\r\n\t\tfor (int i = 0; i &lt; 49; i++) {\r\n\t\t\tint res = Arrays.binarySearch(faceDownPos, i);\r\n\t\t\tboolean test = res &gt;= 0 ? true : false;\r\n\r\n\t\t\tif (!test) {\r\n\t\t\t\tdeck.getPos(i).setFaceUp();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Displays the playSpace as shorthand card values (testing)\r\n\t */\r\n\tpublic void displayBoard() {\r\n\t\tplaySpace[0].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\r\n//\t\tplaySpace[0].remove(6); //Used in testing, not necessary to include in final\r\n\t\tplaySpace[3].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\r\n\t\tfor (ArrayList&lt;Card&gt; ac : playSpace) {\r\n\t\t\tfor (Card c : ac) {\r\n\t\t\t\tSystem.out.print(c.shortHand());\r\n\t\t\t}\r\n\t\t\tSystem.out.println();\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n//\t/**\r\n//\t * Displays playSpace as shorthand card values (defunct)\r\n//\t * @param column\r\n//\t * @return String concat\r\n//\t */\r\n//\tpublic String shortHand(int column) {\r\n//\t\tString concat = &quot;&quot;;\r\n//\t\tfor (Card card : playSpace[column]) {\r\n//\t\t\tconcat += String.format(&quot;%5s\\n&quot;, card.shortHand());\r\n//\t\t}\r\n//\t\treturn concat;\r\n//\t}\r\n}\r\n```\r\n\r\nPlayspace:\r\n\r\n```java\r\npackage Playspace;\r\n\r\nimport java.util.ArrayList;\r\n\r\n/**\r\n * A game board class for utilizing Card and Decks\r\n * \r\n * @author Austin M\r\n * \r\n * @param ArrayList&lt;Card&gt;[] playSpace\r\n * @param ArrayList&lt;Card&gt;[] buffer\r\n * @param Deck deck\r\n * @param Card[] offHand\r\n */\r\npublic abstract class Playspace {\r\n\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tpublic ArrayList&lt;Card&gt;[] playSpace = new ArrayList[7];\r\n\tpublic ArrayList&lt;Card&gt; buffer = new ArrayList&lt;Card&gt;();\r\n\tpublic Deck deck = new Deck();\r\n\tpublic Card[] offHand = new Card[3];\r\n\r\n\tpublic abstract void setUp();\r\n\r\n\tpublic abstract void setFaceUp();\r\n\r\n\tpublic abstract void displayBoard();\r\n\r\n\tpublic void initialize() {\r\n\t\tfor (int i = 0; i &lt; 7; i++) {\r\n\t\t\tplaySpace[i] = new ArrayList&lt;Card&gt;();\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nMain:\r\n\r\n```java\r\npackage Playspace;\r\n\r\n/**\r\n * \r\n * @author Austin M\r\n *\r\n */\r\npublic class Main {\r\n\r\n\tpublic static void main(String[] args) {\r\n//\t\tDeck deck1 = new Deck();\r\n//\t\tDeck deck2 = new Deck();\r\n//\t\tpointCount(deck1, deck2);\r\n\t\t\r\n\t\t@SuppressWarnings(&quot;unused&quot;)\r\n\t\tWasp wasp = new Wasp();\r\n\r\n\t}\r\n\r\n\t@SuppressWarnings(&quot;unused&quot;)\r\n\tprivate static void pointCount(Deck deck1, Deck deck2) {\r\n\t\tdeck1.shuffleDeck();\r\n\t\tSystem.out.println(deck1);\r\n\r\n\t\tdeck2.shuffleDeck();\r\n\t\tSystem.out.println(deck2);\r\n\t\t\r\n\t\tint points = 0;\r\n\t\tfor (int i = 0; i &lt; 52; i++) {\r\n\t\t\tif (deck1.getPos(i).toString().equals(deck2.getPos(i).toString())) {\r\n\t\t\t\tSystem.out.println(&quot;At position: &quot; + (i + 1) + &quot;\\n&quot; + deck1.getPos(i).toString());\r\n\t\t\t\tpoints++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(points + &quot; points.\\n&quot;);\r\n\t}\r\n\r\n\t@SuppressWarnings(&quot;unused&quot;)\r\n\tprivate static void compare(Deck deck) {\r\n\t\tint pos = 0;\r\n\t\tfor (int i = 0; i &lt; 10; i++) {\r\n\t\t\tSystem.out.println(&quot;Iteration: &quot; + (i + 1));\r\n\r\n\t\t\tif (deck.getPos(pos).getNumValue() &gt; deck.getPos(pos + 1).getNumValue()) {\r\n\t\t\t\tSystem.out.println(&quot;The card: &quot; + deck.getPos(pos).toString().toUpperCase()\r\n\t\t\t\t\t\t+ &quot; is \\nhigher in value than &quot; + deck.getPos(pos + 1).toString().toUpperCase());\r\n\t\t\t} else if (deck.getPos(pos).getNumValue() == deck.getPos(pos + 1).getNumValue()) {\r\n\t\t\t\tSystem.out.println(&quot;The card: &quot; + deck.getPos(pos).toString().toUpperCase() + &quot; is \\nequal in value to &quot;\r\n\t\t\t\t\t\t+ deck.getPos(pos + 1).toString().toUpperCase());\r\n\t\t\t} else {\r\n\t\t\t\tSystem.out.println(&quot;The card: &quot; + deck.getPos(pos).toString().toUpperCase()\r\n\t\t\t\t\t\t+ &quot; is \\nlower in value than &quot; + deck.getPos(pos + 1).toString().toUpperCase());\r\n\t\t\t}\r\n\t\t\tSystem.out.println();\r\n\t\t\tpos++;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nAs it stands it prints like:\r\n\r\n```output\r\n[ -- ][ -- ][ -- ][9  D][3  H][10 H][4  S][    ]\r\n[ -- ][ -- ][ -- ][10 D][4  H][J  H][5  S]\r\n[ -- ][ -- ][ -- ][J  D][5  H][Q  H][6  S]\r\n[ -- ][ -- ][ -- ][Q  D][6  H][K  H][7  S][    ]\r\n[5  C][Q  C][6  D][K  D][7  H][A  S][8  S]\r\n[6  C][K  C][7  D][A  H][8  H][2  S][9  S]\r\n[7  C][A  D][8  D][2  H][9  H][3  S][10 S]\r\n```\r\n\r\nbut I want it to print like: (Flipped along the line X = -Y)\r\n\r\n```output\r\n[ -- ][ -- ][ -- ][ -- ][5  C][6  C][7  C]\r\n[ -- ][ -- ][ -- ][ -- ][Q  C][K  C][A  D]\r\n[ -- ][ -- ][ -- ][ -- ][6  D][7  D][8  D]\r\n[9  D][10 D][J  D][Q  D][K  D][A  H][2  H]\r\n[3  H][4  H][5  H][6  H][7  H][8  H][9  H]\r\n[10 H][J  H][Q  H][K  H][A  S][2  S][9  S]\r\n[4  S][5  S][6  S][7  S][8  S][9  S][10 S]\r\n[    ]            [    ]                  \r\n```\r\n\r\nWhere each ArrayList is a column in an Array of 7.\r\nIn the future (if I get a functional display, I would be removing the brackets around blank cards, simply having them in line with the columns as spaces, but one bridge at a time.","title":"Need help on printing an Array of ArrayLists (of different sizes)","body":"<p>I'm making my own solitaire program I can run on my computer (for leisure and practice) and I am trying to display my 'ArrayList&lt;Card&gt;[] playspace' like it shows in Solitaire. More specifically I'm trying to display the card order downward instead of to the right side like it currently is. Following is my entire program (necessary classes needed to run).</p>\n<p><a href=\"https://stackoverflow.com/questions/48531761/defining-java-method-for-printing-arrays-of-different-sizes-into-a-table\">This</a> seemed to be a solution when I checked, but their issue was the bounds of the array and I don't think they included the printing function, it is also not a 2D Array of ArrayLists... so it might be a solution but it looks just off enough to not be what I need.</p>\n<p>Card:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Playspace;\n\nimport java.util.Arrays;\nimport java.util.List;\n\n/**\n * A card object with value, suit, and faceUp identification.\n * \n * @author Austin M\n * @param numValue\n * @param faceValue\n * @param suit\n * @param faceUp\n */\npublic class Card {\n\n    private int numValue;\n    private String faceValue;\n    private String suit;\n    private String shortSuit;\n    public boolean faceUp;\n    public String[] values = { &quot;A&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;J&quot;, &quot;Q&quot;, &quot;K&quot;, &quot; &quot; };\n    public String[] suits = { &quot;Clubs&quot;, &quot;Diamonds&quot;, &quot;Hearts&quot;, &quot;Spades&quot;, &quot; &quot; };\n\n    /**\n     * Public constructor for generating a card with value face &amp; suit\n     * \n     * @param value\n     * @param suit\n     */\n    Card(String faceValue, String suit, boolean faceUp) {\n        for (String v : values) {\n            if (v.equals(faceValue)) {\n                this.faceValue = faceValue;\n                setNumValue(faceValue);\n            }\n        }\n        for (String s : suits) {\n            if (s.equals(suit)) {\n                this.suit = suit;\n\n                shortSuit = suit.substring(0, 1);\n            }\n        }\n        this.faceUp = faceUp;\n    }\n\n    /**\n     * Private method, returns a list of valid card values\n     * \n     * @returns Arrays.asList()\n     */\n    private static List&lt;String&gt; getValues() {\n        return Arrays.asList(&quot;A&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;J&quot;, &quot;Q&quot;, &quot;K&quot;, &quot; &quot;);\n    }\n\n    /**\n     * Private method, returns a list of valid suit values\n     * \n     * @return Arrays.asList()\n     */\n    @SuppressWarnings(&quot;unused&quot;)\n    private static List&lt;String&gt; getSuits() {\n        return Arrays.asList(&quot;clubs&quot;, &quot;diamonds&quot;, &quot;hearts&quot;, &quot;spades&quot;, &quot; &quot;);\n    }\n\n    /**\n     * Gets string value of face\n     * \n     * @return String faceValue\n     */\n    public String getFaceValue() {\n        return faceValue;\n    }\n\n    @SuppressWarnings(&quot;unused&quot;)\n    private void setFaceValue(String faceValue) {\n        this.faceValue = faceValue;\n    }\n\n    /**\n     * Gets suit value of card\n     * \n     * @return String suit\n     */\n    public String getSuit() {\n        return suit;\n    }\n\n    /**\n     * Gets faceUp value of card\n     * \n     * @return Boolean faceUp\n     */\n    public boolean isFaceUp() {\n        return faceUp;\n    }\n\n    /**\n     * Sets the card face up\n     */\n    public void setFaceUp() {\n        this.faceUp = true;\n    }\n\n    /**\n     * Sets the card face down\n     */\n    public void setFaceDown() {\n        this.faceUp = false;\n    }\n\n    /**\n     * Gets numerical value of card\n     * \n     * @return int numValue\n     */\n    public int getNumValue() {\n        return numValue;\n    }\n\n    /**\n     * Sets numerical value with the index + 1 of the corresponding face value\n     * \n     * @param faceValue\n     */\n    private void setNumValue(String faceValue) {\n        numValue = getValues().indexOf(faceValue) + 1;\n    }\n\n    /**\n     * Generates a string with faceValue and Suit, if card is face down, it does not\n     * display card value\n     * \n     * @return String concat\n     */\n    @Override\n    public String toString() {\n        String concat;\n        if (faceUp) {\n            concat = extValue() + &quot; of &quot; + suit;\n        } else {\n            concat = &quot; --- --- --- --- &quot;;\n        }\n\n        return concat;\n    }\n\n    public String shortHand() {\n        String shortHand = &quot;&quot;;\n        if (faceUp) {\n            shortHand = &quot;[&quot; + String.format(&quot;%-3s&quot;, faceValue) + shortSuit + &quot;]&quot;;\n        } else {\n            shortHand = &quot;[ -- ]&quot;;\n        }\n\n        return shortHand;\n    }\n\n    /**\n     * Returns the Extended value of the card name (if it's Jack-Ace)\n     * \n     * @return String faceValue\n     */\n    private String extValue() {\n\n        faceValue = faceValue.toUpperCase();\n        if (faceValue.equals(&quot;A&quot;)) {\n            return &quot;Ace&quot;;\n        } else if (faceValue.equals(&quot;J&quot;)) {\n            return &quot;Jack&quot;;\n        } else if (faceValue.equals(&quot;Q&quot;)) {\n            return &quot;Queen&quot;;\n        } else if (faceValue.equals(&quot;K&quot;)) {\n            return &quot;King&quot;;\n        }\n        return faceValue;\n    }\n\n}\n</code></pre>\n<p>Deck:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Playspace;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\n\n/**\n * A collection of Card objects where the order can be manipulated\n * \n * @author Austin M\n * @param deck\n */\npublic class Deck {\n\n    public ArrayList&lt;Card&gt; deck = new ArrayList&lt;Card&gt;();\n\n    Deck() {\n        generateCards();\n    }\n\n    /**\n     * Shuffles the deck randomly using Collections.shuffle() method\n     */\n    public void shuffleDeck() {\n        Collections.shuffle(deck);\n    }\n\n    /**\n     * Generates 52 card objects in a collection\n     */\n    void generateCards() {\n        for (int i = 0; i &lt; 4; i++) {\n            for (int j = 0; j &lt; 13; j++) {\n                addCard(i, j);\n            }\n        }\n\n    }\n\n    /**\n     * Gets the top card (first in deck)\n     * \n     * @return Card\n     */\n    public Card getTop() {\n        return deck.get(0);\n    }\n\n    /**\n     * Gets the card in given value of the deck (0-51)\n     * \n     * @param int pos\n     * @return Card\n     */\n    public Card getPos(int pos) {\n        return deck.get(pos);\n    }\n\n    /**\n     * Combines the contents of the deck list and prints out the deck in a right\n     * aligned column (%18s\\n)\n     * @return String concat\n     */\n    @Override\n    public String toString() {\n//      String concat = &quot;&quot;;\n//\n//      for (Card card : deck) {\n//          concat += card.toString() + &quot; &quot;;\n//      }\n        String concat = &quot;&quot;;\n        for (Card card : deck) {\n            concat += String.format(&quot;[%17s]\\n&quot;, card.toString());\n        }\n\n        return concat;\n    }\n\n    /**\n     * Combines the contents of the deck list and prints out the deck in a right\n     * aligned column (%5s\\n)\n     */\n    public String shortHand() {\n        String concat = &quot;&quot;;\n        for (Card card : deck) {\n            concat += String.format(&quot;%5s\\n&quot;, card.shortHand());\n        }\n        return concat;\n    }\n\n    /**\n     * Adds a card to ArrayList&lt;Card&gt; deck given suit (i) and faceValue (j)\n     * \n     * @param i\n     * @param j\n     */\n    private void addCard(int i, int j) {\n        String suit, faceValue;\n        switch (i) {\n        case 0: {\n            suit = &quot;Clubs&quot;;\n            break;\n        }\n        case 1: {\n            suit = &quot;Diamonds&quot;;\n            break;\n        }\n        case 2: {\n            suit = &quot;Hearts&quot;;\n            break;\n        }\n        case 3: {\n            suit = &quot;Spades&quot;;\n            break;\n        }\n        default:\n            suit = &quot;clubs&quot;;\n            System.err.println(&quot;Unexpected suit: &quot; + i);\n        }\n\n        switch (j) {\n        case 0: {\n            faceValue = &quot;A&quot;;\n            break;\n        }\n        case 1: {\n            faceValue = &quot;2&quot;;\n            break;\n        }\n        case 2: {\n            faceValue = &quot;3&quot;;\n            break;\n        }\n        case 3: {\n            faceValue = &quot;4&quot;;\n            break;\n        }\n        case 4: {\n            faceValue = &quot;5&quot;;\n            break;\n        }\n        case 5: {\n            faceValue = &quot;6&quot;;\n            break;\n        }\n        case 6: {\n            faceValue = &quot;7&quot;;\n            break;\n        }\n        case 7: {\n            faceValue = &quot;8&quot;;\n            break;\n        }\n        case 8: {\n            faceValue = &quot;9&quot;;\n            break;\n        }\n        case 9: {\n            faceValue = &quot;10&quot;;\n            break;\n        }\n        case 10: {\n            faceValue = &quot;J&quot;;\n            break;\n        }\n        case 11: {\n            faceValue = &quot;Q&quot;;\n            break;\n        }\n        case 12: {\n            faceValue = &quot;K&quot;;\n            break;\n        }\n        default:\n            faceValue = &quot;A&quot;;\n            System.err.println(&quot;Unexpected value: &quot; + j);\n        }\n        deck.add(new Card(faceValue, suit, false));\n\n    }\n}\n</code></pre>\n<p>Wasp:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Playspace;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\n\npublic class Wasp extends Playspace {\n\n    Wasp() {\n        setUp();\n    }\n\n    @Override\n    public void setUp() {\n        initialize();\n\n//      deck.shuffleDeck();\n        setFaceUp();\n\n        for (int i = 0; i &lt; 49; i += 7) {\n            playSpace[0].add(deck.getPos(i));\n            playSpace[1].add(deck.getPos(i + 1));\n            playSpace[2].add(deck.getPos(i + 2));\n            playSpace[3].add(deck.getPos(i + 3));\n            playSpace[4].add(deck.getPos(i + 4));\n            playSpace[5].add(deck.getPos(i + 5));\n            playSpace[6].add(deck.getPos(i + 6));\n        }\n//      System.out.println(deck.shortHand());\n        displayBoard();\n    }\n\n    /**\n     * \n     */\n    public void setFaceUp() {\n        int[] faceDownPos = { 0, 1, 2, 3, 7, 8, 9, 10, 14, 15, 16, 17 };\n        for (int i = 0; i &lt; 49; i++) {\n            int res = Arrays.binarySearch(faceDownPos, i);\n            boolean test = res &gt;= 0 ? true : false;\n\n            if (!test) {\n                deck.getPos(i).setFaceUp();\n            }\n        }\n    }\n    \n    /**\n     * Displays the playSpace as shorthand card values (testing)\n     */\n    public void displayBoard() {\n        playSpace[0].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\n//      playSpace[0].remove(6); //Used in testing, not necessary to include in final\n        playSpace[3].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\n        for (ArrayList&lt;Card&gt; ac : playSpace) {\n            for (Card c : ac) {\n                System.out.print(c.shortHand());\n            }\n            System.out.println();\n        }\n        \n        \n    }\n    \n//  /**\n//   * Displays playSpace as shorthand card values (defunct)\n//   * @param column\n//   * @return String concat\n//   */\n//  public String shortHand(int column) {\n//      String concat = &quot;&quot;;\n//      for (Card card : playSpace[column]) {\n//          concat += String.format(&quot;%5s\\n&quot;, card.shortHand());\n//      }\n//      return concat;\n//  }\n}\n</code></pre>\n<p>Playspace:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Playspace;\n\nimport java.util.ArrayList;\n\n/**\n * A game board class for utilizing Card and Decks\n * \n * @author Austin M\n * \n * @param ArrayList&lt;Card&gt;[] playSpace\n * @param ArrayList&lt;Card&gt;[] buffer\n * @param Deck deck\n * @param Card[] offHand\n */\npublic abstract class Playspace {\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public ArrayList&lt;Card&gt;[] playSpace = new ArrayList[7];\n    public ArrayList&lt;Card&gt; buffer = new ArrayList&lt;Card&gt;();\n    public Deck deck = new Deck();\n    public Card[] offHand = new Card[3];\n\n    public abstract void setUp();\n\n    public abstract void setFaceUp();\n\n    public abstract void displayBoard();\n\n    public void initialize() {\n        for (int i = 0; i &lt; 7; i++) {\n            playSpace[i] = new ArrayList&lt;Card&gt;();\n        }\n    }\n}\n</code></pre>\n<p>Main:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Playspace;\n\n/**\n * \n * @author Austin M\n *\n */\npublic class Main {\n\n    public static void main(String[] args) {\n//      Deck deck1 = new Deck();\n//      Deck deck2 = new Deck();\n//      pointCount(deck1, deck2);\n        \n        @SuppressWarnings(&quot;unused&quot;)\n        Wasp wasp = new Wasp();\n\n    }\n\n    @SuppressWarnings(&quot;unused&quot;)\n    private static void pointCount(Deck deck1, Deck deck2) {\n        deck1.shuffleDeck();\n        System.out.println(deck1);\n\n        deck2.shuffleDeck();\n        System.out.println(deck2);\n        \n        int points = 0;\n        for (int i = 0; i &lt; 52; i++) {\n            if (deck1.getPos(i).toString().equals(deck2.getPos(i).toString())) {\n                System.out.println(&quot;At position: &quot; + (i + 1) + &quot;\\n&quot; + deck1.getPos(i).toString());\n                points++;\n            }\n        }\n        System.out.println(points + &quot; points.\\n&quot;);\n    }\n\n    @SuppressWarnings(&quot;unused&quot;)\n    private static void compare(Deck deck) {\n        int pos = 0;\n        for (int i = 0; i &lt; 10; i++) {\n            System.out.println(&quot;Iteration: &quot; + (i + 1));\n\n            if (deck.getPos(pos).getNumValue() &gt; deck.getPos(pos + 1).getNumValue()) {\n                System.out.println(&quot;The card: &quot; + deck.getPos(pos).toString().toUpperCase()\n                        + &quot; is \\nhigher in value than &quot; + deck.getPos(pos + 1).toString().toUpperCase());\n            } else if (deck.getPos(pos).getNumValue() == deck.getPos(pos + 1).getNumValue()) {\n                System.out.println(&quot;The card: &quot; + deck.getPos(pos).toString().toUpperCase() + &quot; is \\nequal in value to &quot;\n                        + deck.getPos(pos + 1).toString().toUpperCase());\n            } else {\n                System.out.println(&quot;The card: &quot; + deck.getPos(pos).toString().toUpperCase()\n                        + &quot; is \\nlower in value than &quot; + deck.getPos(pos + 1).toString().toUpperCase());\n            }\n            System.out.println();\n            pos++;\n        }\n    }\n}\n</code></pre>\n<p>As it stands it prints like:</p>\n<pre><code>[ -- ][ -- ][ -- ][9  D][3  H][10 H][4  S][    ]\n[ -- ][ -- ][ -- ][10 D][4  H][J  H][5  S]\n[ -- ][ -- ][ -- ][J  D][5  H][Q  H][6  S]\n[ -- ][ -- ][ -- ][Q  D][6  H][K  H][7  S][    ]\n[5  C][Q  C][6  D][K  D][7  H][A  S][8  S]\n[6  C][K  C][7  D][A  H][8  H][2  S][9  S]\n[7  C][A  D][8  D][2  H][9  H][3  S][10 S]\n</code></pre>\n<p>but I want it to print like: (Flipped along the line X = -Y)</p>\n<pre><code>[ -- ][ -- ][ -- ][ -- ][5  C][6  C][7  C]\n[ -- ][ -- ][ -- ][ -- ][Q  C][K  C][A  D]\n[ -- ][ -- ][ -- ][ -- ][6  D][7  D][8  D]\n[9  D][10 D][J  D][Q  D][K  D][A  H][2  H]\n[3  H][4  H][5  H][6  H][7  H][8  H][9  H]\n[10 H][J  H][Q  H][K  H][A  S][2  S][9  S]\n[4  S][5  S][6  S][7  S][8  S][9  S][10 S]\n[    ]            [    ]                  \n</code></pre>\n<p>Where each ArrayList is a column in an Array of 7.\nIn the future (if I get a functional display, I would be removing the brackets around blank cards, simply having them in line with the columns as spaces, but one bridge at a time.</p>\n"},{"tags":["java","scala","functional-programming","pattern-matching"],"comments":[{"owner":{"account_id":220160,"reputation":99410,"user_id":477420,"display_name":"Alexei Levenkov"},"score":6,"creation_date":1390677933,"post_id":21355060,"comment_id":32198489,"body_markdown":"Might be better for http://programmers.stackexchange.com or even http://cs.stackexchange.com/help/on-topic. Summary of my understanding - patterns give you much more flexibility to &quot;match and deconstruct&quot; in very compact form. Try to write `switch` case for something like &quot;list of 3 elements where second is of particular type&quot; in regular language...","body":"Might be better for <a href=\"http://programmers.stackexchange.com\">programmers.stackexchange.com</a> or even <a href=\"http://cs.stackexchange.com/help/on-topic\">cs.stackexchange.com/help/on-topic</a>. Summary of my understanding - patterns give you much more flexibility to &quot;match and deconstruct&quot; in very compact form. Try to write <code>switch</code> case for something like &quot;list of 3 elements where second is of particular type&quot; in regular language..."},{"owner":{"account_id":68643,"reputation":26430,"user_id":200166,"accept_rate":40,"display_name":"Randall Schulz"},"score":4,"creation_date":1390690967,"post_id":21355060,"comment_id":32202737,"body_markdown":"I know this is glib, but… Scala&#39;s pattern matching is to Java&#39;s `switch` as an atomic bomb is to a hand grenade.","body":"I know this is glib, but… Scala&#39;s pattern matching is to Java&#39;s <code>switch</code> as an atomic bomb is to a hand grenade."},{"owner":{"account_id":55108,"reputation":49619,"user_id":165009,"accept_rate":100,"display_name":"Kevin Wright"},"score":3,"creation_date":1390693483,"post_id":21355060,"comment_id":32203441,"body_markdown":"Hand grenade? I was thinking more along the lines of a paint bomb...","body":"Hand grenade? I was thinking more along the lines of a paint bomb..."}],"answers":[{"comments":[{"owner":{"account_id":36946,"reputation":11662,"user_id":105514,"accept_rate":50,"display_name":"Daniel Cukier"},"score":0,"creation_date":1391020658,"post_id":21355296,"comment_id":32348937,"body_markdown":"the &quot;for ((a, b) &lt;- tup) yield a + b&quot; return error: value filter is not a member of (Int, Int)","body":"the &quot;for ((a, b) &lt;- tup) yield a + b&quot; return error: value filter is not a member of (Int, Int)"}],"tags":[],"owner":{"account_id":55108,"reputation":49619,"user_id":165009,"accept_rate":100,"display_name":"Kevin Wright"},"comment_count":1,"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1391070493,"creation_date":1390678637,"answer_id":21355296,"question_id":21355060,"body_markdown":"I&#39;d first like to note that you don&#39;t use pattern matching &quot;instead&quot; of switch statements.  Scala doesn&#39;t have `switch` statements, what it does have is match blocks, with cases inside that superficially look very similar to a switch statement.\r\n\r\nMatch blocks with pattern matching does everything that `switch` does, and much more.\r\n\r\n**A) It&#39;s not restricted to just primitives and other types that Oracle have chosen to &quot;bless&quot; in the language spec** (Strings and Enums).  If you want to match on your own types, go right ahead!\r\n\r\n**B) Pattern matching can also extract**.  For example, with a tuple:\r\n\r\n    val tup = (&quot;hello world&quot;, 42)\r\n    tup match {\r\n      case (s,i) =&gt;\r\n        println(&quot;the string was &quot; + s)\r\n        println(&quot;the number was &quot; + i\r\n    }\r\n\r\nWith a list:\r\n\r\n    val xs = List(1,2,3,4,5,6)\r\n    xs match {\r\n      case h :: t =&gt;\r\n        // h is the head: 1\r\n        // t is the tail: 2,3,4,5,6\r\n        // The :: above is also an example of matching with an INFIX TYPE\r\n    }\r\n\r\nWith a case class\r\n\r\n    case class Person(name: String, age: Int)\r\n    val p = Person(&quot;John Doe&quot;, 42)\r\n    p match {\r\n      case Person(name, 42) =&gt;\r\n        //only extracting the name here, the match would fail if the age wasn&#39;t 42\r\n        println(name)\r\n    }\r\n\r\n**C) pattern matching can be used in value assignment and for-comprehensions**, not just in match blocks:\r\n\r\n    val tup = (19,73)\r\n\r\n    val (a,b) = tup\r\n\r\n    for((a,b) &lt;- Some(tup)) yield a+b // Some(92)\r\n\r\n**D) match blocks are expressions, not statements**\r\n\r\nThis means that they evaluate to the body of whichever case was matched, instead of acting entirely through side-effects.  This is crucial for functional programming!\r\n\r\n    val result = tup match { case (a,b) =&gt; a + b }\r\n","title":"What is the advantage of using scala pattern matching instead of java switch case?","body":"<p>I'd first like to note that you don't use pattern matching \"instead\" of switch statements.  Scala doesn't have <code>switch</code> statements, what it does have is match blocks, with cases inside that superficially look very similar to a switch statement.</p>\n\n<p>Match blocks with pattern matching does everything that <code>switch</code> does, and much more.</p>\n\n<p><strong>A) It's not restricted to just primitives and other types that Oracle have chosen to \"bless\" in the language spec</strong> (Strings and Enums).  If you want to match on your own types, go right ahead!</p>\n\n<p><strong>B) Pattern matching can also extract</strong>.  For example, with a tuple:</p>\n\n<pre><code>val tup = (\"hello world\", 42)\ntup match {\n  case (s,i) =&gt;\n    println(\"the string was \" + s)\n    println(\"the number was \" + i\n}\n</code></pre>\n\n<p>With a list:</p>\n\n<pre><code>val xs = List(1,2,3,4,5,6)\nxs match {\n  case h :: t =&gt;\n    // h is the head: 1\n    // t is the tail: 2,3,4,5,6\n    // The :: above is also an example of matching with an INFIX TYPE\n}\n</code></pre>\n\n<p>With a case class</p>\n\n<pre><code>case class Person(name: String, age: Int)\nval p = Person(\"John Doe\", 42)\np match {\n  case Person(name, 42) =&gt;\n    //only extracting the name here, the match would fail if the age wasn't 42\n    println(name)\n}\n</code></pre>\n\n<p><strong>C) pattern matching can be used in value assignment and for-comprehensions</strong>, not just in match blocks:</p>\n\n<pre><code>val tup = (19,73)\n\nval (a,b) = tup\n\nfor((a,b) &lt;- Some(tup)) yield a+b // Some(92)\n</code></pre>\n\n<p><strong>D) match blocks are expressions, not statements</strong></p>\n\n<p>This means that they evaluate to the body of whichever case was matched, instead of acting entirely through side-effects.  This is crucial for functional programming!</p>\n\n<pre><code>val result = tup match { case (a,b) =&gt; a + b }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":55108,"reputation":49619,"user_id":165009,"accept_rate":100,"display_name":"Kevin Wright"},"score":0,"creation_date":1390739541,"post_id":21358286,"comment_id":32213205,"body_markdown":"Once your reputation gets high enough they turn you into a moderator and ask (bug?) you to review edits, so I can confirm that &quot;adding to an existing answer&quot; is a valid reason for rejecting edits.  There&#39;s also a lower level of reputation where your edits no longer need to be reviewed :)","body":"Once your reputation gets high enough they turn you into a moderator and ask (bug?) you to review edits, so I can confirm that &quot;adding to an existing answer&quot; is a valid reason for rejecting edits.  There&#39;s also a lower level of reputation where your edits no longer need to be reviewed :)"}],"tags":[],"owner":{"account_id":1328608,"reputation":16312,"user_id":1272950,"display_name":"yǝsʞǝla"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1390697812,"creation_date":1390697812,"answer_id":21358286,"question_id":21355060,"body_markdown":"Somehow my edit/addition to @KevinWright answer got thrown away, so I&#39;ll add it here as one more nice pattern matching feature...\r\n\r\n**F) Compiler exhaustiveness check of cases.**\r\n\r\nIf there exists a value matching against which will not be covered by existing cases compiler will warn you about it. This is a very nice feature of the language because if you don&#39;t ignore these compiler warnings you won&#39;t catch such runtime exceptions or come across a case you didn&#39;t think of. If you still run the application and ignore the warning you will get a nice descriptive exception if your value does not match any cases. Here is an illustration:\r\n\r\n    scala&gt; def badMatch(l: List[Int]): Unit = l match { case x :: xs =&gt; println(x) }\r\n    &lt;console&gt;:7: warning: match may not be exhaustive.\r\n    It would fail on the following input: Nil\r\n           def badMatch(l: List[Int]): Unit = l match { case x :: xs =&gt; println(x) }\r\n                                              ^\r\n    badMatch: (l: List[Int])Unit\r\n    \r\n    scala&gt; badMatch(List(1, 2))\r\n    1\r\n    \r\n    scala&gt; badMatch(Nil)\r\n    scala.MatchError: List() (of class scala.collection.immutable.Nil$)\r\n\r\nI prefer to get an exception in this case because it will fail loud and clear, and usually early instead of executing unexpected branches of logic.\r\n\r\nIf you use `if` you would have to use `else`, and if you use Java `switch` you would have to have `default` case to cover all cases. But notice the difference: Scala compiler knows that your empty list is different from non-empty list in this case, or in more broad sense you define the granularity of matches. You could match lists with 1 or 2 elements and ignore the rest, or use any other much more complex patterns without having to worry if you managed to cover all cases.\r\n\r\nIn short as you use complex extraction and matching logic compiler will make sure you didn&#39;t miss any cases. There is nothing similar in Java unless you use a default case like `default` or `else`.","title":"What is the advantage of using scala pattern matching instead of java switch case?","body":"<p>Somehow my edit/addition to @KevinWright answer got thrown away, so I'll add it here as one more nice pattern matching feature...</p>\n\n<p><strong>F) Compiler exhaustiveness check of cases.</strong></p>\n\n<p>If there exists a value matching against which will not be covered by existing cases compiler will warn you about it. This is a very nice feature of the language because if you don't ignore these compiler warnings you won't catch such runtime exceptions or come across a case you didn't think of. If you still run the application and ignore the warning you will get a nice descriptive exception if your value does not match any cases. Here is an illustration:</p>\n\n<pre><code>scala&gt; def badMatch(l: List[Int]): Unit = l match { case x :: xs =&gt; println(x) }\n&lt;console&gt;:7: warning: match may not be exhaustive.\nIt would fail on the following input: Nil\n       def badMatch(l: List[Int]): Unit = l match { case x :: xs =&gt; println(x) }\n                                          ^\nbadMatch: (l: List[Int])Unit\n\nscala&gt; badMatch(List(1, 2))\n1\n\nscala&gt; badMatch(Nil)\nscala.MatchError: List() (of class scala.collection.immutable.Nil$)\n</code></pre>\n\n<p>I prefer to get an exception in this case because it will fail loud and clear, and usually early instead of executing unexpected branches of logic.</p>\n\n<p>If you use <code>if</code> you would have to use <code>else</code>, and if you use Java <code>switch</code> you would have to have <code>default</code> case to cover all cases. But notice the difference: Scala compiler knows that your empty list is different from non-empty list in this case, or in more broad sense you define the granularity of matches. You could match lists with 1 or 2 elements and ignore the rest, or use any other much more complex patterns without having to worry if you managed to cover all cases.</p>\n\n<p>In short as you use complex extraction and matching logic compiler will make sure you didn't miss any cases. There is nothing similar in Java unless you use a default case like <code>default</code> or <code>else</code>.</p>\n"},{"comments":[{"owner":{"account_id":1328608,"reputation":16312,"user_id":1272950,"display_name":"yǝsʞǝla"},"score":0,"creation_date":1390704646,"post_id":21358937,"comment_id":32205828,"body_markdown":"indeed quite close. I think pattern matching is a loaded concept - you can extract, match, etc in one shot. Since underneath is a partial function I like to think of pattern matching as of a partial function that takes args, checks if it can handle those (value domain) and optionally returns result of a block of code if function applies.","body":"indeed quite close. I think pattern matching is a loaded concept - you can extract, match, etc in one shot. Since underneath is a partial function I like to think of pattern matching as of a partial function that takes args, checks if it can handle those (value domain) and optionally returns result of a block of code if function applies."},{"owner":{"account_id":422939,"reputation":4371,"user_id":802012,"accept_rate":60,"display_name":"Mark Butler"},"score":0,"creation_date":1420197008,"post_id":21358937,"comment_id":43893240,"body_markdown":"That&#39;s close, but dynamic dispatch can only cope with a single argument whereas pattern matching can cope with more than one. In OOP languages, if you want to consider two arguments, you need to use double dispatch http://en.wikipedia.org/wiki/Double_dispatch The University of Washington&#39;s 2nd Year Undergraduate Programming Languages has a good introduction to pattern matching with multiple arguments http://bit.ly/1xlGT4U and double dispatch http://bit.ly/1ETlo0U","body":"That&#39;s close, but dynamic dispatch can only cope with a single argument whereas pattern matching can cope with more than one. In OOP languages, if you want to consider two arguments, you need to use double dispatch <a href=\"http://en.wikipedia.org/wiki/Double_dispatch\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Double_dispatch</a> The University of Washington&#39;s 2nd Year Undergraduate Programming Languages has a good introduction to pattern matching with multiple arguments <a href=\"http://bit.ly/1xlGT4U\" rel=\"nofollow noreferrer\">bit.ly/1xlGT4U</a> and double dispatch <a href=\"http://bit.ly/1ETlo0U\" rel=\"nofollow noreferrer\">bit.ly/1ETlo0U</a>"}],"tags":[],"owner":{"account_id":284696,"reputation":3612,"user_id":582963,"display_name":"Septem"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1390704047,"creation_date":1390703632,"answer_id":21358937,"question_id":21355060,"body_markdown":"**pattern matching** is not somehow an alternative of **switch statement**, I consider it to be another way of doing **dynamic dispatch** in oop. They try to do the same thing: calling a different version of the function based on the dynamic type of the arguments\r\n","title":"What is the advantage of using scala pattern matching instead of java switch case?","body":"<p><strong>pattern matching</strong> is not somehow an alternative of <strong>switch statement</strong>, I consider it to be another way of doing <strong>dynamic dispatch</strong> in oop. They try to do the same thing: calling a different version of the function based on the dynamic type of the arguments</p>\n"},{"tags":[],"owner":{"account_id":140004,"reputation":1652,"user_id":345994,"accept_rate":55,"display_name":"Marco"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1390752925,"creation_date":1390752925,"answer_id":21365901,"question_id":21355060,"body_markdown":"As it was written in the other answers, Scala pattern matching and Java switch do not make the same thing.\r\n\r\n**switch statement:**\r\n\r\n- Only works with native types, enumerated types, and the String class\r\n- It is an alternative to a chain of &quot;if-else&quot; to create multiple execution paths, according to an imperative programming\r\n\r\n**pattern matching:**\r\n\r\n- It Allows to match on any sort of data with a first-match policy\r\n- It meets a functional logic: each case statement returns a value and the whole match statement is virtually a function that returns the matching case value.\r\n\r\nIn other words, you can use the &quot;pattern matching&quot; for a similar purpose of the &quot;java switch&quot;, but in doing so you&#39;re using functional tools in an imperative way.\r\n\r\n","title":"What is the advantage of using scala pattern matching instead of java switch case?","body":"<p>As it was written in the other answers, Scala pattern matching and Java switch do not make the same thing.</p>\n\n<p><strong>switch statement:</strong></p>\n\n<ul>\n<li>Only works with native types, enumerated types, and the String class</li>\n<li>It is an alternative to a chain of \"if-else\" to create multiple execution paths, according to an imperative programming</li>\n</ul>\n\n<p><strong>pattern matching:</strong></p>\n\n<ul>\n<li>It Allows to match on any sort of data with a first-match policy</li>\n<li>It meets a functional logic: each case statement returns a value and the whole match statement is virtually a function that returns the matching case value.</li>\n</ul>\n\n<p>In other words, you can use the \"pattern matching\" for a similar purpose of the \"java switch\", but in doing so you're using functional tools in an imperative way.</p>\n"},{"tags":[],"owner":{"account_id":13042732,"reputation":47,"user_id":9425581,"display_name":"Kot Leapold"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590847886,"creation_date":1590847886,"answer_id":62103644,"question_id":21355060,"body_markdown":"[JMPL][1] is simple java library, which could emulate some of the features pattern matching, using Java 8 features.\r\n   \r\n\r\n          matches(data).as(\r\n              new Person(&quot;man&quot;),    () -&gt;  System.out.println(&quot;man&quot;);\r\n              new Person(&quot;woman&quot;),  () -&gt;  System.out.println(&quot;woman&quot;);\r\n              new Person(&quot;child&quot;),  () -&gt;  System.out.println(&quot;child&quot;);        \r\n              Null.class,           () -&gt;  System.out.println(&quot;Null value &quot;),\r\n              Else.class,           () -&gt;  System.out.println(&quot;Default value: &quot; + data)\r\n           );\r\n          \r\n        \r\n           matches(data).as(\r\n              Integer.class, i  -&gt; { System.out.println(i * i); },\r\n              Byte.class,    b  -&gt; { System.out.println(b * b); },\r\n              Long.class,    l  -&gt; { System.out.println(l * l); },\r\n              String.class,  s  -&gt; { System.out.println(s * s); },\r\n              Null.class,    () -&gt; { System.out.println(&quot;Null value &quot;); },\r\n              Else.class,    () -&gt; { System.out.println(&quot;Default value: &quot; + data); }\r\n           );\r\n    \r\n           matches(figure).as(\r\n              Rectangle.class, (int w, int h) -&gt; System.out.println(&quot;square: &quot; + (w * h)),\r\n              Circle.class,    (int r)        -&gt; System.out.println(&quot;square: &quot; + (2 * Math.PI * r)),\r\n              Else.class,      ()             -&gt; System.out.println(&quot;Default square: &quot; + 0)\r\n           );\r\n    \r\n       \r\n       \r\n      \r\n\r\n\r\n  [1]: https://github.com/klappdev/jpml","title":"What is the advantage of using scala pattern matching instead of java switch case?","body":"<p><a href=\"https://github.com/klappdev/jpml\" rel=\"nofollow noreferrer\">JMPL</a> is simple java library, which could emulate some of the features pattern matching, using Java 8 features.</p>\n\n<pre><code>      matches(data).as(\n          new Person(\"man\"),    () -&gt;  System.out.println(\"man\");\n          new Person(\"woman\"),  () -&gt;  System.out.println(\"woman\");\n          new Person(\"child\"),  () -&gt;  System.out.println(\"child\");        \n          Null.class,           () -&gt;  System.out.println(\"Null value \"),\n          Else.class,           () -&gt;  System.out.println(\"Default value: \" + data)\n       );\n\n\n       matches(data).as(\n          Integer.class, i  -&gt; { System.out.println(i * i); },\n          Byte.class,    b  -&gt; { System.out.println(b * b); },\n          Long.class,    l  -&gt; { System.out.println(l * l); },\n          String.class,  s  -&gt; { System.out.println(s * s); },\n          Null.class,    () -&gt; { System.out.println(\"Null value \"); },\n          Else.class,    () -&gt; { System.out.println(\"Default value: \" + data); }\n       );\n\n       matches(figure).as(\n          Rectangle.class, (int w, int h) -&gt; System.out.println(\"square: \" + (w * h)),\n          Circle.class,    (int r)        -&gt; System.out.println(\"square: \" + (2 * Math.PI * r)),\n          Else.class,      ()             -&gt; System.out.println(\"Default square: \" + 0)\n       );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9118599,"reputation":457,"user_id":6784881,"display_name":"Talos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672351244,"creation_date":1672350940,"answer_id":74956387,"question_id":21355060,"body_markdown":"Taken from a great book [Programming in Scala](https://www.amazon.com/Programming-Scala-Fifth-Odersky/dp/0997148004) by Martin Odersky (creator of Scala) and others.\r\n\r\nJava&#39;s `switch`\r\n* integer-type, enum and constants can be used can be used in `case`\r\n* `break` at the end of each alternative\r\n* fall through from one alternative to the next without `break`\r\n* **doesn&#39;t result in a value**\r\n\r\nScala&#39;s `match`\r\n* any kind of constant, as well as other things, can be used in `case`\r\n* no `break` at the end of each alternative\r\n* no fall through from one alternative to the next\r\n* **results in a value**\r\n\r\n&lt;hr&gt;\r\n\r\n**Exampes** of the same logic programmed in Java and Scala:\r\n\r\nScala\r\n```scala\r\nfirstArg match\r\n  case &quot;salt&quot; =&gt; println(&quot;pepper&quot;)\r\n  case &quot;chips&quot; =&gt; println(&quot;salsa&quot;)\r\n  case &quot;eggs&quot; =&gt; println(&quot;bacon&quot;)\r\n  case _ =&gt; println(&quot;huh?&quot;)\r\n```\r\nJava\r\n```java\r\nswitch (firstArg) {\r\n  case &quot;salt&quot;:\r\n    System.out.println(&quot;pepper&quot;);\r\n    break;\r\n  case &quot;chips&quot;:\r\n    System.out.println(&quot;salsa&quot;);\r\n    break;\r\n  case &quot;eggs&quot;:\r\n    System.out.println(&quot;bacon&quot;);\r\n    break;\r\n  default:\r\n    System.out.println(&quot;huh?&quot;);\r\n}\r\n```\r\n\r\n&lt;hr&gt;\r\n\r\nScala&#39;s `match` can **results in a value**, Java&#39;s `switch` cannot:\r\n\r\n```scala\r\nfriend match\r\n  case &quot;salt&quot; =&gt; &quot;pepper&quot;\r\n  case &quot;chips&quot; =&gt; &quot;salsa&quot;\r\n  case &quot;eggs&quot; =&gt; &quot;bacona&quot;\r\n  case _ =&gt; &quot;huh?&quot;\r\n```","title":"What is the advantage of using scala pattern matching instead of java switch case?","body":"<p>Taken from a great book <a href=\"https://rads.stackoverflow.com/amzn/click/com/0997148004\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Programming in Scala</a> by Martin Odersky (creator of Scala) and others.</p>\n<p>Java's <code>switch</code></p>\n<ul>\n<li>integer-type, enum and constants can be used can be used in <code>case</code></li>\n<li><code>break</code> at the end of each alternative</li>\n<li>fall through from one alternative to the next without <code>break</code></li>\n<li><strong>doesn't result in a value</strong></li>\n</ul>\n<p>Scala's <code>match</code></p>\n<ul>\n<li>any kind of constant, as well as other things, can be used in <code>case</code></li>\n<li>no <code>break</code> at the end of each alternative</li>\n<li>no fall through from one alternative to the next</li>\n<li><strong>results in a value</strong></li>\n</ul>\n<hr>\n<p><strong>Exampes</strong> of the same logic programmed in Java and Scala:</p>\n<p>Scala</p>\n<pre class=\"lang-scala prettyprint-override\"><code>firstArg match\n  case &quot;salt&quot; =&gt; println(&quot;pepper&quot;)\n  case &quot;chips&quot; =&gt; println(&quot;salsa&quot;)\n  case &quot;eggs&quot; =&gt; println(&quot;bacon&quot;)\n  case _ =&gt; println(&quot;huh?&quot;)\n</code></pre>\n<p>Java</p>\n<pre class=\"lang-java prettyprint-override\"><code>switch (firstArg) {\n  case &quot;salt&quot;:\n    System.out.println(&quot;pepper&quot;);\n    break;\n  case &quot;chips&quot;:\n    System.out.println(&quot;salsa&quot;);\n    break;\n  case &quot;eggs&quot;:\n    System.out.println(&quot;bacon&quot;);\n    break;\n  default:\n    System.out.println(&quot;huh?&quot;);\n}\n</code></pre>\n<hr>\n<p>Scala's <code>match</code> can <strong>results in a value</strong>, Java's <code>switch</code> cannot:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>friend match\n  case &quot;salt&quot; =&gt; &quot;pepper&quot;\n  case &quot;chips&quot; =&gt; &quot;salsa&quot;\n  case &quot;eggs&quot; =&gt; &quot;bacona&quot;\n  case _ =&gt; &quot;huh?&quot;\n</code></pre>\n"}],"owner":{"account_id":36946,"reputation":11662,"user_id":105514,"accept_rate":50,"display_name":"Daniel Cukier"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5623,"favorite_count":0,"down_vote_count":2,"up_vote_count":13,"accepted_answer_id":21355296,"answer_count":6,"score":11,"last_activity_date":1672351244,"creation_date":1390677427,"question_id":21355060,"body_markdown":"Everybody says that pattern matching is a great feature in functional languages. Why?\r\n\r\nCan&#39;t I simple use ifs and switch cases for everything?\r\n\r\nI&#39;d like to understand the advantages of using pattern matching instead of regular procedural programming ifs and switch cases","title":"What is the advantage of using scala pattern matching instead of java switch case?","body":"<p>Everybody says that pattern matching is a great feature in functional languages. Why?</p>\n\n<p>Can't I simple use ifs and switch cases for everything?</p>\n\n<p>I'd like to understand the advantages of using pattern matching instead of regular procedural programming ifs and switch cases</p>\n"},{"tags":["java","unzip"],"comments":[{"owner":{"account_id":420494,"reputation":1386,"user_id":798223,"display_name":"GKFX"},"score":0,"creation_date":1407089121,"post_id":981578,"comment_id":39072355,"body_markdown":"This will really mess up this task: http://aioobe.org/zip-quine/. (Infinitely recursive zip-in-a-zip-in-a-zip-in-a-..)","body":"This will really mess up this task: <a href=\"http://aioobe.org/zip-quine/\" rel=\"nofollow noreferrer\">aioobe.org/zip-quine</a>. (Infinitely recursive zip-in-a-zip-in-a-zip-in-a-..)"},{"owner":{"account_id":1393384,"reputation":6371,"user_id":1770601,"accept_rate":59,"display_name":"ha9u63a7"},"score":1,"creation_date":1455185072,"post_id":981578,"comment_id":58379780,"body_markdown":"Just a thought, all the answers presented here doesn&#39;t actually work because you have not considered nested zips","body":"Just a thought, all the answers presented here doesn&#39;t actually work because you have not considered nested zips"},{"owner":{"account_id":6453092,"reputation":332,"user_id":4999407,"accept_rate":75,"display_name":"eldruin"},"score":7,"creation_date":1528207013,"post_id":981578,"comment_id":88413193,"body_markdown":"Beware of the code in answers to this question as they contain a security vulnerability at the moment. See [here](https://snyk.io/research/zip-slip-vulnerability) for more.","body":"Beware of the code in answers to this question as they contain a security vulnerability at the moment. See <a href=\"https://snyk.io/research/zip-slip-vulnerability\" rel=\"nofollow noreferrer\">here</a> for more."}],"answers":[{"tags":[],"owner":{"account_id":41532,"reputation":220,"user_id":120770,"display_name":"Rickster"},"comment_count":0,"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1244732794,"creation_date":1244732794,"answer_id":981687,"question_id":981578,"body_markdown":"    File dir = new File(&quot;BASE DIRECTORY PATH&quot;);\r\n\tFileFilter ff = new FileFilter() {\r\n\r\n\t\t@Override\r\n\t\tpublic boolean accept(File f) {\r\n\t\t\t//only want zip files\r\n\t\t\treturn (f.isFile() &amp;&amp; f.getName().toLowerCase().endsWith(&quot;.zip&quot;));\r\n\t\t}\r\n\t};\r\n\t\t\r\n\tFile[] list = null;\r\n\twhile ((list = dir.listFiles(ff)).length &gt; 0) {\r\n\t\tFile file1 = list[0];\r\n\t\t//TODO unzip the file to the base directory\r\n\t}\r\n","title":"How to unzip files recursively in Java?","body":"<pre><code>File dir = new File(\"BASE DIRECTORY PATH\");\nFileFilter ff = new FileFilter() {\n\n    @Override\n    public boolean accept(File f) {\n        //only want zip files\n        return (f.isFile() &amp;&amp; f.getName().toLowerCase().endsWith(\".zip\"));\n    }\n};\n\nFile[] list = null;\nwhile ((list = dir.listFiles(ff)).length &gt; 0) {\n    File file1 = list[0];\n    //TODO unzip the file to the base directory\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":28382,"reputation":472,"user_id":75794,"accept_rate":80,"display_name":"Anson MacKeracher"},"score":0,"creation_date":1304441443,"post_id":981731,"comment_id":6752286,"body_markdown":"Why do you have a throws declaration, and yet actually catch the exception and log it? Doesn&#39;t that mean callers will be expecting IOExceptions that never get thrown..?","body":"Why do you have a throws declaration, and yet actually catch the exception and log it? Doesn&#39;t that mean callers will be expecting IOExceptions that never get thrown..?"},{"owner":{"account_id":62111,"reputation":40153,"user_id":184730,"accept_rate":72,"display_name":"fastcodejava"},"score":1,"creation_date":1307572852,"post_id":981731,"comment_id":7339704,"body_markdown":"What if the entry is a directory?","body":"What if the entry is a directory?"},{"owner":{"account_id":33533,"reputation":644,"user_id":93959,"display_name":"Charlie"},"score":0,"creation_date":1311214081,"post_id":981731,"comment_id":8030471,"body_markdown":"I believe zips only store files, not directories.","body":"I believe zips only store files, not directories."},{"owner":{"account_id":118078,"reputation":2690,"user_id":308843,"accept_rate":67,"display_name":"NeilMonday"},"score":1,"creation_date":1313675637,"post_id":981731,"comment_id":8514622,"body_markdown":"@Charlie I don&#39;t think this is true. If I use PeaZip to extract a zip that has a directory structure inside of it, the resulting directory has the folder structure properly recreated. This method (it seems), gets all files no matter what their directory structure is, and just puts them in the base destination directory.","body":"@Charlie I don&#39;t think this is true. If I use PeaZip to extract a zip that has a directory structure inside of it, the resulting directory has the folder structure properly recreated. This method (it seems), gets all files no matter what their directory structure is, and just puts them in the base destination directory."},{"owner":{"account_id":73480,"reputation":7699,"user_id":211599,"accept_rate":60,"display_name":"Harish"},"score":1,"creation_date":1332269959,"post_id":981731,"comment_id":12468845,"body_markdown":"The above code works perfectly fine after removing the line No 47 destFile = new File(unzipDestinationDirectory, destFile.getName()); Thanks","body":"The above code works perfectly fine after removing the line No 47 destFile = new File(unzipDestinationDirectory, destFile.getName()); Thanks"},{"owner":{"account_id":297964,"reputation":54072,"user_id":603744,"accept_rate":91,"display_name":"Andro Selva"},"score":0,"creation_date":1341206273,"post_id":981731,"comment_id":14848612,"body_markdown":"@Harish man. u r great. So simple solution. awesome dude. And also Charlie, great work. for pretty fast extraction.","body":"@Harish man. u r great. So simple solution. awesome dude. And also Charlie, great work. for pretty fast extraction."}],"tags":[],"owner":{"account_id":33533,"reputation":644,"user_id":93959,"display_name":"Charlie"},"comment_count":6,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1314020650,"creation_date":1244733295,"answer_id":981731,"question_id":981578,"body_markdown":"Here&#39;s some untested code base on some old code I had that unzipped files.\r\n\r\n    public void doUnzip(String inputZip, String destinationDirectory)\r\n            throws IOException {\r\n        int BUFFER = 2048;\r\n        List zipFiles = new ArrayList();\r\n        File sourceZipFile = new File(inputZip);\r\n        File unzipDestinationDirectory = new File(destinationDirectory);\r\n        unzipDestinationDirectory.mkdir();\r\n\t\r\n        ZipFile zipFile;\r\n        // Open Zip file for reading\r\n        zipFile = new ZipFile(sourceZipFile, ZipFile.OPEN_READ);\r\n\r\n        // Create an enumeration of the entries in the zip file\r\n        Enumeration zipFileEntries = zipFile.entries();\r\n\r\n        // Process each entry\r\n        while (zipFileEntries.hasMoreElements()) {\r\n            // grab a zip file entry\r\n            ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\r\n\r\n            String currentEntry = entry.getName();\r\n\r\n            File destFile = new File(unzipDestinationDirectory, currentEntry);\r\n            destFile = new File(unzipDestinationDirectory, destFile.getName());\r\n\t\t\r\n            if (currentEntry.endsWith(&quot;.zip&quot;)) {\r\n                zipFiles.add(destFile.getAbsolutePath());\r\n            }\r\n\r\n            // grab file&#39;s parent directory structure\r\n            File destinationParent = destFile.getParentFile();\r\n\r\n            // create the parent directory structure if needed\r\n            destinationParent.mkdirs();\r\n\r\n            try {\r\n                // extract file if not a directory\r\n                if (!entry.isDirectory()) {\r\n                    BufferedInputStream is =\r\n                            new BufferedInputStream(zipFile.getInputStream(entry));\r\n                    int currentByte;\r\n                    // establish buffer for writing file\r\n                    byte data[] = new byte[BUFFER];\r\n\r\n                    // write the current file to disk\r\n                    FileOutputStream fos = new FileOutputStream(destFile);\r\n                    BufferedOutputStream dest =\r\n                            new BufferedOutputStream(fos, BUFFER);\r\n\r\n                    // read and write until last byte is encountered\r\n                    while ((currentByte = is.read(data, 0, BUFFER)) != -1) {\r\n                        dest.write(data, 0, currentByte);\r\n                    }\r\n                    dest.flush();\r\n                    dest.close();\r\n                    is.close();\r\n                }\r\n            } catch (IOException ioe) {\r\n                ioe.printStackTrace();\r\n            }\r\n        }\r\n        zipFile.close();\r\n\r\n        for (Iterator iter = zipFiles.iterator(); iter.hasNext();) {\r\n            String zipName = (String)iter.next();\r\n            doUnzip(\r\n                zipName,\r\n                destinationDirectory +\r\n                    File.separatorChar +\r\n                    zipName.substring(0,zipName.lastIndexOf(&quot;.zip&quot;))\r\n            );\r\n        }\r\n\t\r\n    }\r\n","title":"How to unzip files recursively in Java?","body":"<p>Here's some untested code base on some old code I had that unzipped files.</p>\n\n<pre><code>public void doUnzip(String inputZip, String destinationDirectory)\n        throws IOException {\n    int BUFFER = 2048;\n    List zipFiles = new ArrayList();\n    File sourceZipFile = new File(inputZip);\n    File unzipDestinationDirectory = new File(destinationDirectory);\n    unzipDestinationDirectory.mkdir();\n\n    ZipFile zipFile;\n    // Open Zip file for reading\n    zipFile = new ZipFile(sourceZipFile, ZipFile.OPEN_READ);\n\n    // Create an enumeration of the entries in the zip file\n    Enumeration zipFileEntries = zipFile.entries();\n\n    // Process each entry\n    while (zipFileEntries.hasMoreElements()) {\n        // grab a zip file entry\n        ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\n\n        String currentEntry = entry.getName();\n\n        File destFile = new File(unzipDestinationDirectory, currentEntry);\n        destFile = new File(unzipDestinationDirectory, destFile.getName());\n\n        if (currentEntry.endsWith(\".zip\")) {\n            zipFiles.add(destFile.getAbsolutePath());\n        }\n\n        // grab file's parent directory structure\n        File destinationParent = destFile.getParentFile();\n\n        // create the parent directory structure if needed\n        destinationParent.mkdirs();\n\n        try {\n            // extract file if not a directory\n            if (!entry.isDirectory()) {\n                BufferedInputStream is =\n                        new BufferedInputStream(zipFile.getInputStream(entry));\n                int currentByte;\n                // establish buffer for writing file\n                byte data[] = new byte[BUFFER];\n\n                // write the current file to disk\n                FileOutputStream fos = new FileOutputStream(destFile);\n                BufferedOutputStream dest =\n                        new BufferedOutputStream(fos, BUFFER);\n\n                // read and write until last byte is encountered\n                while ((currentByte = is.read(data, 0, BUFFER)) != -1) {\n                    dest.write(data, 0, currentByte);\n                }\n                dest.flush();\n                dest.close();\n                is.close();\n            }\n        } catch (IOException ioe) {\n            ioe.printStackTrace();\n        }\n    }\n    zipFile.close();\n\n    for (Iterator iter = zipFiles.iterator(); iter.hasNext();) {\n        String zipName = (String)iter.next();\n        doUnzip(\n            zipName,\n            destinationDirectory +\n                File.separatorChar +\n                zipName.substring(0,zipName.lastIndexOf(\".zip\"))\n        );\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7745,"reputation":189765,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":0,"creation_date":1244844551,"post_id":989272,"comment_id":797966,"body_markdown":"That code was actually written by ca.anderson4; I merely edited it (I don&#39;t like having to scroll side-to-side).","body":"That code was actually written by ca.anderson4; I merely edited it (I don&#39;t like having to scroll side-to-side)."},{"owner":{"account_id":877879,"reputation":125,"user_id":122281,"display_name":"fero46"},"score":0,"creation_date":1244845165,"post_id":989272,"comment_id":797998,"body_markdown":"aaa okey,  I dont saw this :-). So i give credits to ca.anderson4 and the editor you ;-)","body":"aaa okey,  I dont saw this :-). So i give credits to ca.anderson4 and the editor you ;-)"},{"owner":{"account_id":87000,"reputation":9338,"user_id":241552,"accept_rate":70,"display_name":"Ibolit"},"score":0,"creation_date":1346664111,"post_id":989272,"comment_id":16413341,"body_markdown":"This one just dumps all the files in all the subfolders into one folder thus destroying the whole archive structure","body":"This one just dumps all the files in all the subfolders into one folder thus destroying the whole archive structure"}],"tags":[],"owner":{"account_id":877879,"reputation":125,"user_id":122281,"display_name":"fero46"},"comment_count":3,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1244845211,"creation_date":1244844239,"answer_id":989272,"question_id":981578,"body_markdown":"I take ca.anderson4 and remove the List zipFiles and rewrite a little bit, this is what i got:\r\n\r\n    public class Unzip {\r\n\r\n\tpublic void unzip(String zipFile) throws ZipException,\r\n\t\t\tIOException {\r\n\r\n\t\tSystem.out.println(zipFile);;\r\n\t\tint BUFFER = 2048;\r\n\t\tFile file = new File(zipFile);\r\n\r\n\t\tZipFile zip = new ZipFile(file);\r\n\t\tString newPath = zipFile.substring(0, zipFile.length() - 4);\r\n\r\n\t\tnew File(newPath).mkdir();\r\n\t\tEnumeration zipFileEntries = zip.entries();\r\n\r\n\t\t// Process each entry\r\n\t\twhile (zipFileEntries.hasMoreElements()) {\r\n\t\t\t// grab a zip file entry\r\n\t\t\tZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\r\n\r\n\t\t\tString currentEntry = entry.getName();\r\n\r\n\t\t\tFile destFile = new File(newPath, currentEntry);\r\n\t\t\tdestFile = new File(newPath, destFile.getName());\r\n\t\t\tFile destinationParent = destFile.getParentFile();\r\n\r\n\t\t\t// create the parent directory structure if needed\r\n\t\t\tdestinationParent.mkdirs();\r\n\t\t\tif (!entry.isDirectory()) {\r\n\t\t\t\tBufferedInputStream is = new BufferedInputStream(zip\r\n\t\t\t\t\t\t.getInputStream(entry));\r\n\t\t\t\tint currentByte;\r\n\t\t\t\t// establish buffer for writing file\r\n\t\t\t\tbyte data[] = new byte[BUFFER];\r\n\r\n\t\t\t\t// write the current file to disk\r\n\t\t\t\tFileOutputStream fos = new FileOutputStream(destFile);\r\n\t\t\t\tBufferedOutputStream dest = new BufferedOutputStream(fos,\r\n\t\t\t\t\t\tBUFFER);\r\n\r\n\t\t\t\t// read and write until last byte is encountered\r\n\t\t\t\twhile ((currentByte = is.read(data, 0, BUFFER)) != -1) {\r\n\t\t\t\t\tdest.write(data, 0, currentByte);\r\n\t\t\t\t}\r\n\t\t\t\tdest.flush();\r\n\t\t\t\tdest.close();\r\n\t\t\t\tis.close();\r\n\t\t\t}\r\n\t\t\tif (currentEntry.endsWith(&quot;.zip&quot;)) {\r\n\t\t\t\t// found a zip file, try to open\r\n\t\t\t\tunzip(destFile.getAbsolutePath());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tUnzip unzipper=new Unzip();\r\n\t\ttry {\r\n\t\t\tunzipper.unzip(&quot;test/test.zip&quot;);\r\n\t\t} catch (ZipException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n    }\r\n\r\nI tested and it works","title":"How to unzip files recursively in Java?","body":"<p>I take ca.anderson4 and remove the List zipFiles and rewrite a little bit, this is what i got:</p>\n\n<pre><code>public class Unzip {\n\npublic void unzip(String zipFile) throws ZipException,\n        IOException {\n\n    System.out.println(zipFile);;\n    int BUFFER = 2048;\n    File file = new File(zipFile);\n\n    ZipFile zip = new ZipFile(file);\n    String newPath = zipFile.substring(0, zipFile.length() - 4);\n\n    new File(newPath).mkdir();\n    Enumeration zipFileEntries = zip.entries();\n\n    // Process each entry\n    while (zipFileEntries.hasMoreElements()) {\n        // grab a zip file entry\n        ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\n\n        String currentEntry = entry.getName();\n\n        File destFile = new File(newPath, currentEntry);\n        destFile = new File(newPath, destFile.getName());\n        File destinationParent = destFile.getParentFile();\n\n        // create the parent directory structure if needed\n        destinationParent.mkdirs();\n        if (!entry.isDirectory()) {\n            BufferedInputStream is = new BufferedInputStream(zip\n                    .getInputStream(entry));\n            int currentByte;\n            // establish buffer for writing file\n            byte data[] = new byte[BUFFER];\n\n            // write the current file to disk\n            FileOutputStream fos = new FileOutputStream(destFile);\n            BufferedOutputStream dest = new BufferedOutputStream(fos,\n                    BUFFER);\n\n            // read and write until last byte is encountered\n            while ((currentByte = is.read(data, 0, BUFFER)) != -1) {\n                dest.write(data, 0, currentByte);\n            }\n            dest.flush();\n            dest.close();\n            is.close();\n        }\n        if (currentEntry.endsWith(\".zip\")) {\n            // found a zip file, try to open\n            unzip(destFile.getAbsolutePath());\n        }\n    }\n}\n\npublic static void main(String[] args) {\n    Unzip unzipper=new Unzip();\n    try {\n        unzipper.unzip(\"test/test.zip\");\n    } catch (ZipException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n}\n\n}\n</code></pre>\n\n<p>I tested and it works</p>\n"},{"tags":[],"owner":{"account_id":877871,"reputation":21,"user_id":121817,"display_name":"boxymoron"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1244903912,"creation_date":1244903912,"answer_id":990784,"question_id":981578,"body_markdown":"In testing I noticed File.mkDirs() does not work under Windows...\r\n\r\n/**\r\n* for a given full path name recreate all parent directories\r\n**/\r\n\r\n\r\n\t\tprivate void createParentHierarchy(String parentName) throws IOException {\r\n\t\t\tFile parent = new File(parentName);\r\n\t\t\tString[] parentsStrArr = parent.getAbsolutePath().split(File.separator == &quot;/&quot; ? &quot;/&quot; : &quot;\\\\\\\\&quot;);\r\n\t\t\t\r\n\t\t\t//create the parents of the parent\r\n\t\t\tfor(int i=0; i &lt; parentsStrArr.length; i++){\r\n\t\t\t\tStringBuffer currParentPath = new StringBuffer();\r\n\t\t\t\tfor(int j = 0; j &lt; i; j++){\r\n\t\t\t\t\tcurrParentPath.append(parentsStrArr[j]+File.separator);\r\n\t\t\t\t}\r\n\t\t\t\tFile currParent = new File(currParentPath.toString());\r\n\t\t\t\tif(!currParent.isDirectory()){\r\n\t\t\t\t\tboolean created = currParent.mkdir();\r\n\t\t\t\t\tif(isVerbose)log(&quot;creating directory &quot;+currParent.getAbsolutePath());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//create the parent itself\r\n\t\t\tif(!parent.isDirectory()){\r\n\t\t\t\tboolean success = parent.mkdir();\r\n\t\t\t}\r\n\t\t}","title":"How to unzip files recursively in Java?","body":"<p>In testing I noticed File.mkDirs() does not work under Windows...</p>\n\n<p>/**\n* for a given full path name recreate all parent directories\n**/</p>\n\n<pre><code>    private void createParentHierarchy(String parentName) throws IOException {\n        File parent = new File(parentName);\n        String[] parentsStrArr = parent.getAbsolutePath().split(File.separator == \"/\" ? \"/\" : \"\\\\\\\\\");\n\n        //create the parents of the parent\n        for(int i=0; i &lt; parentsStrArr.length; i++){\n            StringBuffer currParentPath = new StringBuffer();\n            for(int j = 0; j &lt; i; j++){\n                currParentPath.append(parentsStrArr[j]+File.separator);\n            }\n            File currParent = new File(currParentPath.toString());\n            if(!currParent.isDirectory()){\n                boolean created = currParent.mkdir();\n                if(isVerbose)log(\"creating directory \"+currParent.getAbsolutePath());\n            }\n        }\n\n        //create the parent itself\n        if(!parent.isDirectory()){\n            boolean success = parent.mkdir();\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1917370,"reputation":1041,"user_id":1729686,"accept_rate":88,"display_name":"Liam"},"score":1,"creation_date":1372035970,"post_id":7108813,"comment_id":25029190,"body_markdown":"I know this is old, but what is the significance of the commented-out line `//destFile = new File(newPath, destFile.getName());` being left in, if any?","body":"I know this is old, but what is the significance of the commented-out line <code>&#47;&#47;destFile = new File(newPath, destFile.getName());</code> being left in, if any?"},{"owner":{"account_id":118078,"reputation":2690,"user_id":308843,"accept_rate":67,"display_name":"NeilMonday"},"score":2,"creation_date":1372076872,"post_id":7108813,"comment_id":25043370,"body_markdown":"@Liam, there is no signifigance. I think i was just trying out different ways of getting the current file name. I decided on using `currentEntry` instead of `destFile.getName()`.","body":"@Liam, there is no signifigance. I think i was just trying out different ways of getting the current file name. I decided on using <code>currentEntry</code> instead of <code>destFile.getName()</code>."},{"owner":{"account_id":6453092,"reputation":332,"user_id":4999407,"accept_rate":75,"display_name":"eldruin"},"score":27,"creation_date":1528206895,"post_id":7108813,"comment_id":88413102,"body_markdown":"The code here adds a security vulnerability! The paths in the zip file need to be validated beforehand. See [here](https://snyk.io/research/zip-slip-vulnerability)","body":"The code here adds a security vulnerability! The paths in the zip file need to be validated beforehand. See <a href=\"https://snyk.io/research/zip-slip-vulnerability\" rel=\"nofollow noreferrer\">here</a>"},{"owner":{"account_id":294509,"reputation":1353,"user_id":598445,"accept_rate":56,"display_name":"Eric"},"score":0,"creation_date":1529528962,"post_id":7108813,"comment_id":88911520,"body_markdown":"Hmm, I am afraid I cannot see how this fixes the vulnerability. Should one not check against the canonical path of the extraction directory? I cannot find this in this example. Why do you think this is (more) secure?","body":"Hmm, I am afraid I cannot see how this fixes the vulnerability. Should one not check against the canonical path of the extraction directory? I cannot find this in this example. Why do you think this is (more) secure?"},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1539981968,"post_id":7108813,"comment_id":92711585,"body_markdown":"Instead of writing the zip file and then loading it, you could directly use the class [`ZipInputStream`](https://docs.oracle.com/javase/8/docs/api/java/util/zip/ZipInputStream.html).","body":"Instead of writing the zip file and then loading it, you could directly use the class <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/zip/ZipInputStream.html\" rel=\"nofollow noreferrer\"><code>ZipInputStream</code></a>."},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1539982059,"post_id":7108813,"comment_id":92711628,"body_markdown":"For writing the content of the zip entry input streams you could use [`Files.copy(InputStream, Path, CopyOption...)`](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#copy-java.io.InputStream-java.nio.file.Path-java.nio.file.CopyOption...-).","body":"For writing the content of the zip entry input streams you could use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#copy-java.io.InputStream-java.nio.file.Path-java.nio.file.CopyOption...-\" rel=\"nofollow noreferrer\"><code>Files.copy(InputStream, Path, CopyOption...)</code></a>."}],"tags":[],"owner":{"account_id":118078,"reputation":2690,"user_id":308843,"accept_rate":67,"display_name":"NeilMonday"},"comment_count":6,"down_vote_count":0,"up_vote_count":86,"is_accepted":false,"score":86,"last_activity_date":1620740292,"creation_date":1313676777,"answer_id":7108813,"question_id":981578,"body_markdown":"Warning, the code here is ok for trusted zip files, there&#39;s no path validation before write which may lead to security vulnerability as described in [zip-slip-vulnerability](https://github.com/snyk/zip-slip-vulnerability) if you use it to deflate an uploaded zip file from unknown client.\r\n\r\n----------\r\n\r\nThis solution is very similar to the previous solutions already posted, but this one recreates the proper folder structure on unzip.\r\n\r\n    public static void extractFolder(String zipFile) throws IOException {\r\n    int buffer = 2048;\r\n    File file = new File(zipFile);\r\n\r\n    try (ZipFile zip = new ZipFile(file)) {\r\n      String newPath = zipFile.substring(0, zipFile.length() - 4);\r\n\r\n      new File(newPath).mkdir();\r\n      Enumeration&lt;? extends ZipEntry&gt; zipFileEntries = zip.entries();\r\n\r\n      // Process each entry\r\n      while (zipFileEntries.hasMoreElements()) {\r\n        // grab a zip file entry\r\n        ZipEntry entry = zipFileEntries.nextElement();\r\n        String currentEntry = entry.getName();\r\n        File destFile = new File(newPath, currentEntry);\r\n        File destinationParent = destFile.getParentFile();\r\n\r\n        // create the parent directory structure if needed\r\n        destinationParent.mkdirs();\r\n\r\n        if (!entry.isDirectory()) {\r\n          BufferedInputStream is = new BufferedInputStream(zip.getInputStream(entry));\r\n          int currentByte;\r\n          // establish buffer for writing file\r\n          byte[] data = new byte[buffer];\r\n\r\n          // write the current file to disk\r\n          FileOutputStream fos = new FileOutputStream(destFile);\r\n          try (BufferedOutputStream dest = new BufferedOutputStream(fos, buffer)) {\r\n\r\n            // read and write until last byte is encountered\r\n            while ((currentByte = is.read(data, 0, buffer)) != -1) {\r\n              dest.write(data, 0, currentByte);\r\n            }\r\n            dest.flush();\r\n            is.close();\r\n          }\r\n        }\r\n\r\n        if (currentEntry.endsWith(&quot;.zip&quot;)) {\r\n          // found a zip file, try to open\r\n          extractFolder(destFile.getAbsolutePath());\r\n        }\r\n      }\r\n    }\r\n  }","title":"How to unzip files recursively in Java?","body":"<p>Warning, the code here is ok for trusted zip files, there's no path validation before write which may lead to security vulnerability as described in <a href=\"https://github.com/snyk/zip-slip-vulnerability\" rel=\"noreferrer\">zip-slip-vulnerability</a> if you use it to deflate an uploaded zip file from unknown client.</p>\n<hr />\n<p>This solution is very similar to the previous solutions already posted, but this one recreates the proper folder structure on unzip.</p>\n<pre><code>public static void extractFolder(String zipFile) throws IOException {\nint buffer = 2048;\nFile file = new File(zipFile);\n\ntry (ZipFile zip = new ZipFile(file)) {\n  String newPath = zipFile.substring(0, zipFile.length() - 4);\n\n  new File(newPath).mkdir();\n  Enumeration&lt;? extends ZipEntry&gt; zipFileEntries = zip.entries();\n\n  // Process each entry\n  while (zipFileEntries.hasMoreElements()) {\n    // grab a zip file entry\n    ZipEntry entry = zipFileEntries.nextElement();\n    String currentEntry = entry.getName();\n    File destFile = new File(newPath, currentEntry);\n    File destinationParent = destFile.getParentFile();\n\n    // create the parent directory structure if needed\n    destinationParent.mkdirs();\n\n    if (!entry.isDirectory()) {\n      BufferedInputStream is = new BufferedInputStream(zip.getInputStream(entry));\n      int currentByte;\n      // establish buffer for writing file\n      byte[] data = new byte[buffer];\n\n      // write the current file to disk\n      FileOutputStream fos = new FileOutputStream(destFile);\n      try (BufferedOutputStream dest = new BufferedOutputStream(fos, buffer)) {\n\n        // read and write until last byte is encountered\n        while ((currentByte = is.read(data, 0, buffer)) != -1) {\n          dest.write(data, 0, currentByte);\n        }\n        dest.flush();\n        is.close();\n      }\n    }\n\n    if (currentEntry.endsWith(&quot;.zip&quot;)) {\n      // found a zip file, try to open\n      extractFolder(destFile.getAbsolutePath());\n    }\n  }\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":328694,"reputation":7904,"user_id":651794,"accept_rate":83,"display_name":"James Scriven"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1330543853,"creation_date":1330543853,"answer_id":9505409,"question_id":981578,"body_markdown":"Same as NeilMonday&#39;s answer, but extracts empty directories:\r\n\r\n    static public void extractFolder(String zipFile) throws ZipException, IOException \r\n    {\r\n        System.out.println(zipFile);\r\n        int BUFFER = 2048;\r\n        File file = new File(zipFile);\r\n\r\n        ZipFile zip = new ZipFile(file);\r\n        String newPath = zipFile.substring(0, zipFile.length() - 4);\r\n\r\n        new File(newPath).mkdir();\r\n        Enumeration zipFileEntries = zip.entries();\r\n        \r\n        // Process each entry\r\n        while (zipFileEntries.hasMoreElements())\r\n        {\r\n            // grab a zip file entry\r\n            ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\r\n            String currentEntry = entry.getName();\r\n            File destFile = new File(newPath, currentEntry);\r\n            //destFile = new File(newPath, destFile.getName());\r\n            File destinationParent = destFile.getParentFile();\r\n\r\n            // create the parent directory structure if needed\r\n            destinationParent.mkdirs();\r\n                    \r\n            if (!entry.isDirectory())\r\n            {\r\n                BufferedInputStream is = new BufferedInputStream(zip\r\n                .getInputStream(entry));\r\n                int currentByte;\r\n                // establish buffer for writing file\r\n                byte data[] = new byte[BUFFER];\r\n\r\n                // write the current file to disk\r\n                FileOutputStream fos = new FileOutputStream(destFile);\r\n                BufferedOutputStream dest = new BufferedOutputStream(fos,\r\n                BUFFER);\r\n\r\n                // read and write until last byte is encountered\r\n                while ((currentByte = is.read(data, 0, BUFFER)) != -1) {\r\n                    dest.write(data, 0, currentByte);\r\n                }\r\n                dest.flush();\r\n                dest.close();\r\n                is.close();\r\n            }\r\n            else{\r\n                destFile.mkdirs()\r\n            }\r\n            if (currentEntry.endsWith(&quot;.zip&quot;))\r\n            {\r\n                // found a zip file, try to open\r\n                extractFolder(destFile.getAbsolutePath());\r\n            }\r\n        }\r\n    }","title":"How to unzip files recursively in Java?","body":"<p>Same as NeilMonday's answer, but extracts empty directories:</p>\n\n<pre><code>static public void extractFolder(String zipFile) throws ZipException, IOException \n{\n    System.out.println(zipFile);\n    int BUFFER = 2048;\n    File file = new File(zipFile);\n\n    ZipFile zip = new ZipFile(file);\n    String newPath = zipFile.substring(0, zipFile.length() - 4);\n\n    new File(newPath).mkdir();\n    Enumeration zipFileEntries = zip.entries();\n\n    // Process each entry\n    while (zipFileEntries.hasMoreElements())\n    {\n        // grab a zip file entry\n        ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\n        String currentEntry = entry.getName();\n        File destFile = new File(newPath, currentEntry);\n        //destFile = new File(newPath, destFile.getName());\n        File destinationParent = destFile.getParentFile();\n\n        // create the parent directory structure if needed\n        destinationParent.mkdirs();\n\n        if (!entry.isDirectory())\n        {\n            BufferedInputStream is = new BufferedInputStream(zip\n            .getInputStream(entry));\n            int currentByte;\n            // establish buffer for writing file\n            byte data[] = new byte[BUFFER];\n\n            // write the current file to disk\n            FileOutputStream fos = new FileOutputStream(destFile);\n            BufferedOutputStream dest = new BufferedOutputStream(fos,\n            BUFFER);\n\n            // read and write until last byte is encountered\n            while ((currentByte = is.read(data, 0, BUFFER)) != -1) {\n                dest.write(data, 0, currentByte);\n            }\n            dest.flush();\n            dest.close();\n            is.close();\n        }\n        else{\n            destFile.mkdirs()\n        }\n        if (currentEntry.endsWith(\".zip\"))\n        {\n            // found a zip file, try to open\n            extractFolder(destFile.getAbsolutePath());\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":466097,"reputation":133,"user_id":870649,"display_name":"Igor Shakola"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1336054791,"creation_date":1336054791,"answer_id":10433332,"question_id":981578,"body_markdown":"One should CLOSE zip file after unzip. \r\n    \r\n    static public void extractFolder(String zipFile) throws ZipException, IOException \r\n    {\r\n        System.out.println(zipFile);\r\n        int BUFFER = 2048;\r\n        File file = new File(zipFile);\r\n    \r\n        ZipFile zip = new ZipFile(file);\r\n        try\r\n        { \r\n           ...code from other answers ( ex. NeilMonday )...\r\n        }\r\n        finally\r\n        {\r\n            zip.close();\r\n        }\r\n    }\r\n\r\n","title":"How to unzip files recursively in Java?","body":"<p>One should CLOSE zip file after unzip. </p>\n\n<pre><code>static public void extractFolder(String zipFile) throws ZipException, IOException \n{\n    System.out.println(zipFile);\n    int BUFFER = 2048;\n    File file = new File(zipFile);\n\n    ZipFile zip = new ZipFile(file);\n    try\n    { \n       ...code from other answers ( ex. NeilMonday )...\n    }\n    finally\n    {\n        zip.close();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2766757,"reputation":548,"user_id":2382295,"accept_rate":75,"display_name":"Matthew Pautzke"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1432234639,"creation_date":1404855868,"answer_id":24642072,"question_id":981578,"body_markdown":"Modified as i needed then mixed in a bit of the best answers. This version will:\r\n\r\n\r\n\r\n- Recursively Extract a zip to given location\r\n\r\n\r\n\r\n- Create empty directories\r\n\r\n\r\n\r\n- Close zip properly\r\n\r\n\r\n----------\r\n\r\n\r\n    public static void unZipAll(File source, File destination) throws IOException \r\n    {\r\n        System.out.println(&quot;Unzipping - &quot; + source.getName());\r\n        int BUFFER = 2048;\r\n        \r\n        ZipFile zip = new ZipFile(source);\r\n        try{\r\n            destination.getParentFile().mkdirs();\r\n            Enumeration zipFileEntries = zip.entries();\r\n\r\n            // Process each entry\r\n            while (zipFileEntries.hasMoreElements())\r\n            {\r\n                // grab a zip file entry\r\n                ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\r\n                String currentEntry = entry.getName();\r\n                File destFile = new File(destination, currentEntry);\r\n                //destFile = new File(newPath, destFile.getName());\r\n                File destinationParent = destFile.getParentFile();\r\n\r\n                // create the parent directory structure if needed\r\n                destinationParent.mkdirs();\r\n\r\n                if (!entry.isDirectory())\r\n                {\r\n                    BufferedInputStream is = null;\r\n                    FileOutputStream fos = null;\r\n                    BufferedOutputStream dest = null;\r\n                    try{\r\n                        is = new BufferedInputStream(zip.getInputStream(entry));\r\n                        int currentByte;\r\n                        // establish buffer for writing file\r\n                        byte data[] = new byte[BUFFER];\r\n\r\n                        // write the current file to disk\r\n                        fos = new FileOutputStream(destFile);\r\n                        dest = new BufferedOutputStream(fos, BUFFER);\r\n\r\n                        // read and write until last byte is encountered\r\n                        while ((currentByte = is.read(data, 0, BUFFER)) != -1) {\r\n                            dest.write(data, 0, currentByte);\r\n                        }\r\n                    } catch (Exception e){\r\n                        System.out.println(&quot;unable to extract entry:&quot; + entry.getName());\r\n                        throw e;\r\n                    } finally{\r\n                        if (dest != null){\r\n                            dest.close();\r\n                        }\r\n                        if (fos != null){\r\n                            fos.close();\r\n                        }\r\n                        if (is != null){\r\n                            is.close();\r\n                        }\r\n                    }\r\n                }else{\r\n                    //Create directory\r\n                    destFile.mkdirs();\r\n                }\r\n\r\n                if (currentEntry.endsWith(&quot;.zip&quot;))\r\n                {\r\n                    // found a zip file, try to extract\r\n                    unZipAll(destFile, destinationParent);\r\n                    if(!destFile.delete()){\r\n                        System.out.println(&quot;Could not delete zip&quot;);\r\n                    }\r\n                }\r\n            }\r\n        } catch(Exception e){\r\n            e.printStackTrace();\r\n            System.out.println(&quot;Failed to successfully unzip:&quot; + source.getName());\r\n        } finally {\r\n            zip.close();\r\n        }\r\n        System.out.println(&quot;Done Unzipping:&quot; + source.getName());\r\n    }","title":"How to unzip files recursively in Java?","body":"<p>Modified as i needed then mixed in a bit of the best answers. This version will:</p>\n\n<ul>\n<li><p>Recursively Extract a zip to given location</p></li>\n<li><p>Create empty directories</p></li>\n<li><p>Close zip properly</p></li>\n</ul>\n\n<hr>\n\n<pre><code>public static void unZipAll(File source, File destination) throws IOException \n{\n    System.out.println(\"Unzipping - \" + source.getName());\n    int BUFFER = 2048;\n\n    ZipFile zip = new ZipFile(source);\n    try{\n        destination.getParentFile().mkdirs();\n        Enumeration zipFileEntries = zip.entries();\n\n        // Process each entry\n        while (zipFileEntries.hasMoreElements())\n        {\n            // grab a zip file entry\n            ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\n            String currentEntry = entry.getName();\n            File destFile = new File(destination, currentEntry);\n            //destFile = new File(newPath, destFile.getName());\n            File destinationParent = destFile.getParentFile();\n\n            // create the parent directory structure if needed\n            destinationParent.mkdirs();\n\n            if (!entry.isDirectory())\n            {\n                BufferedInputStream is = null;\n                FileOutputStream fos = null;\n                BufferedOutputStream dest = null;\n                try{\n                    is = new BufferedInputStream(zip.getInputStream(entry));\n                    int currentByte;\n                    // establish buffer for writing file\n                    byte data[] = new byte[BUFFER];\n\n                    // write the current file to disk\n                    fos = new FileOutputStream(destFile);\n                    dest = new BufferedOutputStream(fos, BUFFER);\n\n                    // read and write until last byte is encountered\n                    while ((currentByte = is.read(data, 0, BUFFER)) != -1) {\n                        dest.write(data, 0, currentByte);\n                    }\n                } catch (Exception e){\n                    System.out.println(\"unable to extract entry:\" + entry.getName());\n                    throw e;\n                } finally{\n                    if (dest != null){\n                        dest.close();\n                    }\n                    if (fos != null){\n                        fos.close();\n                    }\n                    if (is != null){\n                        is.close();\n                    }\n                }\n            }else{\n                //Create directory\n                destFile.mkdirs();\n            }\n\n            if (currentEntry.endsWith(\".zip\"))\n            {\n                // found a zip file, try to extract\n                unZipAll(destFile, destinationParent);\n                if(!destFile.delete()){\n                    System.out.println(\"Could not delete zip\");\n                }\n            }\n        }\n    } catch(Exception e){\n        e.printStackTrace();\n        System.out.println(\"Failed to successfully unzip:\" + source.getName());\n    } finally {\n        zip.close();\n    }\n    System.out.println(\"Done Unzipping:\" + source.getName());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9105243,"reputation":153,"user_id":6775951,"display_name":"QuackDuck"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594180916,"creation_date":1594180916,"answer_id":62787355,"question_id":981578,"body_markdown":"Here is some code, which I tested to be working quite well :\r\n\r\n```\r\npackage com.test;\r\n\r\nimport java.io.BufferedInputStream;\r\nimport java.io.BufferedOutputStream;\r\nimport java.io.File;\r\nimport java.io.FileOutputStream;\r\nimport java.util.Enumeration;\r\nimport java.util.zip.ZipEntry;\r\nimport java.util.zip.ZipFile;\r\n\r\npublic class Unzipper {  \r\n    private final static int BUFFER_SIZE = 2048;\r\n    private final static String ZIP_FILE = &quot;/home/anton/test/test.zip&quot;;\r\n    private final static String DESTINATION_DIRECTORY = &quot;/home/anton/test/&quot;;\r\n    private final static String ZIP_EXTENSION = &quot;.zip&quot;;\r\n \r\n    public static void main(String[] args) {\r\n     System.out.println(&quot;Trying to unzip file &quot; + ZIP_FILE); \r\n        Unzipper unzip = new Unzipper();  \r\n        if (unzip.unzipToFile(ZIP_FILE, DESTINATION_DIRECTORY)) {\r\n         System.out.println(&quot;Succefully unzipped to the directory &quot; \r\n             + DESTINATION_DIRECTORY);\r\n        } else {\r\n         System.out.println(&quot;There was some error during extracting archive to the directory &quot; \r\n             + DESTINATION_DIRECTORY);\r\n        }\r\n    } \r\n\r\n public boolean unzipToFile(String srcZipFileName,\r\n   String destDirectoryName) {\r\n  try {\r\n   BufferedInputStream bufIS = null;\r\n   // create the destination directory structure (if needed)\r\n   File destDirectory = new File(destDirectoryName);\r\n   destDirectory.mkdirs();\r\n\r\n   // open archive for reading\r\n   File file = new File(srcZipFileName);\r\n   ZipFile zipFile = new ZipFile(file, ZipFile.OPEN_READ);\r\n\r\n   //for every zip archive entry do\r\n   Enumeration&lt;? extends ZipEntry&gt; zipFileEntries = zipFile.entries();\r\n   while (zipFileEntries.hasMoreElements()) {\r\n    ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\r\n    System.out.println(&quot;\\tExtracting entry: &quot; + entry);\r\n\r\n    //create destination file\r\n    File destFile = new File(destDirectory, entry.getName());\r\n\r\n    //create parent directories if needed\r\n    File parentDestFile = destFile.getParentFile();    \r\n    parentDestFile.mkdirs();    \r\n    \r\n    if (!entry.isDirectory()) {\r\n     bufIS = new BufferedInputStream(\r\n       zipFile.getInputStream(entry));\r\n     int currentByte;\r\n\r\n     // buffer for writing file\r\n     byte data[] = new byte[BUFFER_SIZE];\r\n\r\n     // write the current file to disk\r\n     FileOutputStream fOS = new FileOutputStream(destFile);\r\n     BufferedOutputStream bufOS = new BufferedOutputStream(fOS, BUFFER_SIZE);\r\n\r\n     while ((currentByte = bufIS.read(data, 0, BUFFER_SIZE)) != -1) {\r\n      bufOS.write(data, 0, currentByte);\r\n     }\r\n\r\n     // close BufferedOutputStream\r\n     bufOS.flush();\r\n     bufOS.close();\r\n\r\n     // recursively unzip files\r\n     if (entry.getName().toLowerCase().endsWith(ZIP_EXTENSION)) {\r\n      String zipFilePath = destDirectory.getPath() + File.separatorChar + entry.getName();\r\n\r\n      unzipToFile(zipFilePath, zipFilePath.substring(0, \r\n              zipFilePath.length() - ZIP_EXTENSION.length()));\r\n     }\r\n    }\r\n   }\r\n   bufIS.close();\r\n   return true;\r\n  } catch (Exception e) {\r\n   e.printStackTrace();\r\n   return false;\r\n  }\r\n } \r\n}  \r\n```\r\nI tried with the top voted answer here, and that does not recursively unzip the files, it just unzips the files of the first level.\r\n\r\nSource : [Solution which extracts files into a given directory][1]\r\n\r\nAlso, check this solution by the same person : [Solution which extracts file in memory][2]\r\n\r\n\r\n  [1]: http://javadevtips.blogspot.com/2011/10/unzip-files.html\r\n  [2]: http://javadevtips.blogspot.com/2011/10/recursively-unzip-archive-in-memory.html","title":"How to unzip files recursively in Java?","body":"<p>Here is some code, which I tested to be working quite well :</p>\n<pre><code>package com.test;\n\nimport java.io.BufferedInputStream;\nimport java.io.BufferedOutputStream;\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.util.Enumeration;\nimport java.util.zip.ZipEntry;\nimport java.util.zip.ZipFile;\n\npublic class Unzipper {  \n    private final static int BUFFER_SIZE = 2048;\n    private final static String ZIP_FILE = &quot;/home/anton/test/test.zip&quot;;\n    private final static String DESTINATION_DIRECTORY = &quot;/home/anton/test/&quot;;\n    private final static String ZIP_EXTENSION = &quot;.zip&quot;;\n \n    public static void main(String[] args) {\n     System.out.println(&quot;Trying to unzip file &quot; + ZIP_FILE); \n        Unzipper unzip = new Unzipper();  \n        if (unzip.unzipToFile(ZIP_FILE, DESTINATION_DIRECTORY)) {\n         System.out.println(&quot;Succefully unzipped to the directory &quot; \n             + DESTINATION_DIRECTORY);\n        } else {\n         System.out.println(&quot;There was some error during extracting archive to the directory &quot; \n             + DESTINATION_DIRECTORY);\n        }\n    } \n\n public boolean unzipToFile(String srcZipFileName,\n   String destDirectoryName) {\n  try {\n   BufferedInputStream bufIS = null;\n   // create the destination directory structure (if needed)\n   File destDirectory = new File(destDirectoryName);\n   destDirectory.mkdirs();\n\n   // open archive for reading\n   File file = new File(srcZipFileName);\n   ZipFile zipFile = new ZipFile(file, ZipFile.OPEN_READ);\n\n   //for every zip archive entry do\n   Enumeration&lt;? extends ZipEntry&gt; zipFileEntries = zipFile.entries();\n   while (zipFileEntries.hasMoreElements()) {\n    ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\n    System.out.println(&quot;\\tExtracting entry: &quot; + entry);\n\n    //create destination file\n    File destFile = new File(destDirectory, entry.getName());\n\n    //create parent directories if needed\n    File parentDestFile = destFile.getParentFile();    \n    parentDestFile.mkdirs();    \n    \n    if (!entry.isDirectory()) {\n     bufIS = new BufferedInputStream(\n       zipFile.getInputStream(entry));\n     int currentByte;\n\n     // buffer for writing file\n     byte data[] = new byte[BUFFER_SIZE];\n\n     // write the current file to disk\n     FileOutputStream fOS = new FileOutputStream(destFile);\n     BufferedOutputStream bufOS = new BufferedOutputStream(fOS, BUFFER_SIZE);\n\n     while ((currentByte = bufIS.read(data, 0, BUFFER_SIZE)) != -1) {\n      bufOS.write(data, 0, currentByte);\n     }\n\n     // close BufferedOutputStream\n     bufOS.flush();\n     bufOS.close();\n\n     // recursively unzip files\n     if (entry.getName().toLowerCase().endsWith(ZIP_EXTENSION)) {\n      String zipFilePath = destDirectory.getPath() + File.separatorChar + entry.getName();\n\n      unzipToFile(zipFilePath, zipFilePath.substring(0, \n              zipFilePath.length() - ZIP_EXTENSION.length()));\n     }\n    }\n   }\n   bufIS.close();\n   return true;\n  } catch (Exception e) {\n   e.printStackTrace();\n   return false;\n  }\n } \n}  \n</code></pre>\n<p>I tried with the top voted answer here, and that does not recursively unzip the files, it just unzips the files of the first level.</p>\n<p>Source : <a href=\"http://javadevtips.blogspot.com/2011/10/unzip-files.html\" rel=\"nofollow noreferrer\">Solution which extracts files into a given directory</a></p>\n<p>Also, check this solution by the same person : <a href=\"http://javadevtips.blogspot.com/2011/10/recursively-unzip-archive-in-memory.html\" rel=\"nofollow noreferrer\">Solution which extracts file in memory</a></p>\n"},{"tags":[],"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672350859,"creation_date":1672348586,"answer_id":74956127,"question_id":981578,"body_markdown":"No third-party dependencies, guards against zip slip, fully commented, recreates directory structure recursively, ignores empty directories, sane source code nesting, extracts to zip file&#39;s directory, and uses UTF-8. Usage:\r\n\r\n``` java\r\nPath zipFile = Path.of( &quot;/path/to/filename.zip&quot; );\r\nZip.extract( zipFile );\r\n```\r\n\r\nHere&#39;s the code:\r\n\r\n``` java\r\nimport java.io.IOException;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.util.zip.ZipEntry;\r\nimport java.util.zip.ZipFile;\r\n\r\nimport static java.nio.file.Files.createDirectories;\r\nimport static java.nio.file.StandardCopyOption.REPLACE_EXISTING;\r\n\r\n/**\r\n * Responsible for managing zipped archive files.\r\n */\r\npublic final class Zip {\r\n  /**\r\n   * Extracts the contents of the zip archive into its current directory. The\r\n   * contents of the archive must be {@link StandardCharsets#UTF_8}. For\r\n   * example, if the {@link Path} is &lt;code&gt;/tmp/filename.zip&lt;/code&gt;, then\r\n   * the contents of the file will be extracted into &lt;code&gt;/tmp&lt;/code&gt;.\r\n   *\r\n   * @param zipPath The {@link Path} to the zip file to extract.\r\n   * @throws IOException Could not extract the zip file, zip entries, or find\r\n   *                     the parent directory that contains the path to the\r\n   *                     zip archive.\r\n   */\r\n  public static void extract( final Path zipPath ) throws IOException {\r\n    assert !zipPath.toFile().isDirectory();\r\n\r\n    try( final var zipFile = new ZipFile( zipPath.toFile() ) ) {\r\n      iterate( zipFile );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extracts each entry in the zip archive file.\r\n   *\r\n   * @param zipFile The archive to extract.\r\n   * @throws IOException Could not extract the zip file entry.\r\n   */\r\n  private static void iterate( final ZipFile zipFile )\r\n    throws IOException {\r\n    // Determine the directory name where the zip archive resides. Files will\r\n    // be extracted relative to that directory.\r\n    final var path = getDirectory( zipFile );\r\n    final var entries = zipFile.entries();\r\n\r\n    while( entries.hasMoreElements() ) {\r\n      final var zipEntry = entries.nextElement();\r\n      final var zipEntryPath = path.resolve( zipEntry.getName() );\r\n\r\n      // Guard against zip slip.\r\n      if( zipEntryPath.normalize().startsWith( path ) ) {\r\n        extract( zipFile, zipEntry, zipEntryPath );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extracts a single entry of a zip file to a given directory. This will\r\n   * create the necessary directory path if it doesn&#39;t exist. Empty\r\n   * directories are not re-created.\r\n   *\r\n   * @param zipFile      The zip archive to extract.\r\n   * @param zipEntry     An entry in the zip archive.\r\n   * @param zipEntryPath The file location to write the zip entry.\r\n   * @throws IOException Could not extract the zip file entry.\r\n   */\r\n  private static void extract(\r\n    final ZipFile zipFile,\r\n    final ZipEntry zipEntry,\r\n    final Path zipEntryPath ) throws IOException {\r\n    // Only attempt to extract files, skipping empty directories.\r\n    if( !zipEntry.isDirectory() ) {\r\n      createDirectories( zipEntryPath.getParent() );\r\n\r\n      try( final var in = zipFile.getInputStream( zipEntry ) ) {\r\n        Files.copy( in, zipEntryPath, REPLACE_EXISTING );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Helper method to return the normalized directory where the given archive\r\n   * resides.\r\n   *\r\n   * @param zipFile The {@link ZipFile} having a path to normalize.\r\n   * @return The directory containing the given {@link ZipFile}.\r\n   * @throws IOException The zip file has no parent directory.\r\n   */\r\n  private static Path getDirectory( final ZipFile zipFile ) throws IOException {\r\n    final var zipPath = Path.of( zipFile.getName() );\r\n    final var parent = zipPath.getParent();\r\n\r\n    if( parent == null ) {\r\n      throw new IOException( zipFile.getName() + &quot; has no parent directory.&quot; );\r\n    }\r\n\r\n    return parent.normalize();\r\n  }\r\n}\r\n```\r\n\r\nNow that you have the core algorithm in place, you need to check the file extension for &quot;.zip&quot; and, if present, recursively call `Zip.extract( ... )` on that file.","title":"How to unzip files recursively in Java?","body":"<p>No third-party dependencies, guards against zip slip, fully commented, recreates directory structure recursively, ignores empty directories, sane source code nesting, extracts to zip file's directory, and uses UTF-8. Usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Path zipFile = Path.of( &quot;/path/to/filename.zip&quot; );\nZip.extract( zipFile );\n</code></pre>\n<p>Here's the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.nio.charset.StandardCharsets;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.util.zip.ZipEntry;\nimport java.util.zip.ZipFile;\n\nimport static java.nio.file.Files.createDirectories;\nimport static java.nio.file.StandardCopyOption.REPLACE_EXISTING;\n\n/**\n * Responsible for managing zipped archive files.\n */\npublic final class Zip {\n  /**\n   * Extracts the contents of the zip archive into its current directory. The\n   * contents of the archive must be {@link StandardCharsets#UTF_8}. For\n   * example, if the {@link Path} is &lt;code&gt;/tmp/filename.zip&lt;/code&gt;, then\n   * the contents of the file will be extracted into &lt;code&gt;/tmp&lt;/code&gt;.\n   *\n   * @param zipPath The {@link Path} to the zip file to extract.\n   * @throws IOException Could not extract the zip file, zip entries, or find\n   *                     the parent directory that contains the path to the\n   *                     zip archive.\n   */\n  public static void extract( final Path zipPath ) throws IOException {\n    assert !zipPath.toFile().isDirectory();\n\n    try( final var zipFile = new ZipFile( zipPath.toFile() ) ) {\n      iterate( zipFile );\n    }\n  }\n\n  /**\n   * Extracts each entry in the zip archive file.\n   *\n   * @param zipFile The archive to extract.\n   * @throws IOException Could not extract the zip file entry.\n   */\n  private static void iterate( final ZipFile zipFile )\n    throws IOException {\n    // Determine the directory name where the zip archive resides. Files will\n    // be extracted relative to that directory.\n    final var path = getDirectory( zipFile );\n    final var entries = zipFile.entries();\n\n    while( entries.hasMoreElements() ) {\n      final var zipEntry = entries.nextElement();\n      final var zipEntryPath = path.resolve( zipEntry.getName() );\n\n      // Guard against zip slip.\n      if( zipEntryPath.normalize().startsWith( path ) ) {\n        extract( zipFile, zipEntry, zipEntryPath );\n      }\n    }\n  }\n\n  /**\n   * Extracts a single entry of a zip file to a given directory. This will\n   * create the necessary directory path if it doesn't exist. Empty\n   * directories are not re-created.\n   *\n   * @param zipFile      The zip archive to extract.\n   * @param zipEntry     An entry in the zip archive.\n   * @param zipEntryPath The file location to write the zip entry.\n   * @throws IOException Could not extract the zip file entry.\n   */\n  private static void extract(\n    final ZipFile zipFile,\n    final ZipEntry zipEntry,\n    final Path zipEntryPath ) throws IOException {\n    // Only attempt to extract files, skipping empty directories.\n    if( !zipEntry.isDirectory() ) {\n      createDirectories( zipEntryPath.getParent() );\n\n      try( final var in = zipFile.getInputStream( zipEntry ) ) {\n        Files.copy( in, zipEntryPath, REPLACE_EXISTING );\n      }\n    }\n  }\n\n  /**\n   * Helper method to return the normalized directory where the given archive\n   * resides.\n   *\n   * @param zipFile The {@link ZipFile} having a path to normalize.\n   * @return The directory containing the given {@link ZipFile}.\n   * @throws IOException The zip file has no parent directory.\n   */\n  private static Path getDirectory( final ZipFile zipFile ) throws IOException {\n    final var zipPath = Path.of( zipFile.getName() );\n    final var parent = zipPath.getParent();\n\n    if( parent == null ) {\n      throw new IOException( zipFile.getName() + &quot; has no parent directory.&quot; );\n    }\n\n    return parent.normalize();\n  }\n}\n</code></pre>\n<p>Now that you have the core algorithm in place, you need to check the file extension for &quot;.zip&quot; and, if present, recursively call <code>Zip.extract( ... )</code> on that file.</p>\n"}],"owner":{"display_name":"Anish"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66688,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"answer_count":10,"score":35,"last_activity_date":1672350859,"creation_date":1244731978,"question_id":981578,"body_markdown":"I have zip file which contains some other zip files.\r\n\r\nFor example, the mail file is `abc.zip` and it contains `xyz.zip`, `class1.java`, `class2.java`. And `xyz.zip` contains the file `class3.java` and `class4.java`.\r\n\r\nSo I need to extract the zip file using Java to a folder that should contain `class1.java`, `class2.java`, `class3.java` and `class4.java`.","title":"How to unzip files recursively in Java?","body":"<p>I have zip file which contains some other zip files.</p>\n\n<p>For example, the mail file is <code>abc.zip</code> and it contains <code>xyz.zip</code>, <code>class1.java</code>, <code>class2.java</code>. And <code>xyz.zip</code> contains the file <code>class3.java</code> and <code>class4.java</code>.</p>\n\n<p>So I need to extract the zip file using Java to a folder that should contain <code>class1.java</code>, <code>class2.java</code>, <code>class3.java</code> and <code>class4.java</code>.</p>\n"},{"tags":["java","http-status-codes","javalin"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":1,"creation_date":1672051951,"post_id":73991250,"comment_id":132212770,"body_markdown":"Please [edit] your question to include your source code as a working [mcve], which can be compiled and tested by others.","body":"Please <a href=\"https://stackoverflow.com/posts/73991250/edit\">edit</a> your question to include your source code as a working <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which can be compiled and tested by others."}],"answers":[{"tags":[],"owner":{"account_id":3720263,"reputation":1076,"user_id":3095500,"display_name":"utrucceh"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1672350712,"creation_date":1672217801,"answer_id":74938200,"question_id":73991250,"body_markdown":"The meaning of the 1XX range is:\r\n\r\n&gt; The server has received the request and is continuing the process\r\n\r\nSo when you respond with it, the client will await data.\r\n\r\nFrom [the documentation](https://www.eclipse.org/jetty/documentation/jetty-10/programming-guide/index.html) (`Javalin` builded on `Jetty`):\r\n\r\n&gt; 102 Processing RFC 2518 defined the 102 Processing status code that\r\n&gt; can be sent:\r\n&gt; \r\n&gt; when the server has a reasonable expectation that the request will\r\n&gt; take significant time to complete. As guidance, if a method is taking\r\n&gt; longer than 20 seconds (a reasonable, but arbitrary value) to process\r\n&gt; the server SHOULD return a 102 Processing response. — RFC 2518 section\r\n&gt; 10.1 However, a later update of RFC 2518, RFC 4918, removed the 102 Processing status code for &quot;lack of implementation&quot;.\r\n&gt; \r\n&gt; Jetty supports the 102 Processing status code. If a request is\r\n&gt; received with the Expect: 102-processing header, then a filter/servlet\r\n&gt; may send a 102 Processing response (without terminating further\r\n&gt; processing) by calling response.sendError(102).\r\n\r\n","title":"Javalin hangs when asked to give 1XX HTTP status","body":"<p>The meaning of the 1XX range is:</p>\n<blockquote>\n<p>The server has received the request and is continuing the process</p>\n</blockquote>\n<p>So when you respond with it, the client will await data.</p>\n<p>From <a href=\"https://www.eclipse.org/jetty/documentation/jetty-10/programming-guide/index.html\" rel=\"nofollow noreferrer\">the documentation</a> (<code>Javalin</code> builded on <code>Jetty</code>):</p>\n<blockquote>\n<p>102 Processing RFC 2518 defined the 102 Processing status code that\ncan be sent:</p>\n<p>when the server has a reasonable expectation that the request will\ntake significant time to complete. As guidance, if a method is taking\nlonger than 20 seconds (a reasonable, but arbitrary value) to process\nthe server SHOULD return a 102 Processing response. — RFC 2518 section\n10.1 However, a later update of RFC 2518, RFC 4918, removed the 102 Processing status code for &quot;lack of implementation&quot;.</p>\n<p>Jetty supports the 102 Processing status code. If a request is\nreceived with the Expect: 102-processing header, then a filter/servlet\nmay send a 102 Processing response (without terminating further\nprocessing) by calling response.sendError(102).</p>\n</blockquote>\n"}],"owner":{"account_id":415134,"reputation":12351,"user_id":789750,"accept_rate":87,"display_name":"Dan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74938200,"answer_count":1,"score":1,"last_activity_date":1672350712,"creation_date":1665166875,"question_id":73991250,"body_markdown":"I have a Javalin server, the relevant code called by the endpoint looks like this:\r\n\r\n    ...\r\n    if(!someFuture.isDone()){\r\n        ctx.status(102);\r\n        return;\r\n    }\r\n\r\nJavalin hangs and does not return anything* when the HTTP status is set to anything in the `1XX` range. `2XX`, `3XX` and `4XX` are returned without any problems. I haven&#39;t been able to find anything in Javalin&#39;s documentation about this, but are `1XX` status codes not allowed by Javalin? If not, why is `102` causing this problem?\r\n\r\n\r\n*eventually Postman registers a socket hang up","title":"Javalin hangs when asked to give 1XX HTTP status","body":"<p>I have a Javalin server, the relevant code called by the endpoint looks like this:</p>\n<pre><code>...\nif(!someFuture.isDone()){\n    ctx.status(102);\n    return;\n}\n</code></pre>\n<p>Javalin hangs and does not return anything* when the HTTP status is set to anything in the <code>1XX</code> range. <code>2XX</code>, <code>3XX</code> and <code>4XX</code> are returned without any problems. I haven't been able to find anything in Javalin's documentation about this, but are <code>1XX</code> status codes not allowed by Javalin? If not, why is <code>102</code> causing this problem?</p>\n<p>*eventually Postman registers a socket hang up</p>\n"},{"tags":["java","android","zooming"],"answers":[{"comments":[{"owner":{"account_id":7004992,"reputation":728,"user_id":5369727,"display_name":"Aorlinn"},"score":0,"creation_date":1670518512,"post_id":74696078,"comment_id":131898539,"body_markdown":"After some hard hours I made it working, thanks to your inputs. Check my answer for a full solution, if you are interessted in.","body":"After some hard hours I made it working, thanks to your inputs. Check my answer for a full solution, if you are interessted in."}],"tags":[],"owner":{"account_id":2755641,"reputation":8698,"user_id":2373819,"display_name":"Andrew"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670287897,"creation_date":1670287897,"answer_id":74696078,"question_id":74695407,"body_markdown":"Don&#39;t try and create a new MotionEvent by providing coordinates.\r\n\r\nCopy the existing event and then transform it using a matrix.\r\n\r\n\r\ne.g. something like\r\n\r\n``` lang-java\r\n// Matrix used for drawing the view\r\nMatrix matrix = new Matrix();\r\nmatrix.setScale(scaleFactor, scaleFactor);\r\nmatrix.postTranslate(panX, panY);\r\n// used with canvas.concat(matrix);\r\n\r\n// Matrix for Touch events\r\nMatrix mappingMatrix = new Matrix();\r\n// Touch event matrix needs to be inverted\r\nmatrix.invert(mappingMatrix);\r\n\r\n// Copy the touch Event that is being mapped\r\nMotionEvent transformEvent = MotionEvent.obtain(ev);\r\n// Apply it&#39;s event mapping matrix\r\ntransformEvent.transform(mappingMatrix);\r\n\r\n```\r\n\r\n[Obtain copy documentation][1]\r\n\r\nI do something very similar in my custom viewgroup for scaling MotionEvents to children in my [FixedHeaderTableLayout][2] Library.\r\n\r\nThe MotionEvent copying is done [here][3]\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/view/MotionEvent#obtain(android.view.MotionEvent)\r\n  [2]: https://github.com/Zardozz/FixedHeaderTableLayout\r\n  [3]: https://github.com/Zardozz/FixedHeaderTableLayout/blob/67100f914ab9555c210988d685cb00932f244e01/fixedheadertablelayout/src/main/java/com/github/zardozz/FixedHeaderTableLayout/FixedHeaderTableLayout.java#L563","title":"onTouchEvent for children of zoomed ViewGroup","body":"<p>Don't try and create a new MotionEvent by providing coordinates.</p>\n<p>Copy the existing event and then transform it using a matrix.</p>\n<p>e.g. something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Matrix used for drawing the view\nMatrix matrix = new Matrix();\nmatrix.setScale(scaleFactor, scaleFactor);\nmatrix.postTranslate(panX, panY);\n// used with canvas.concat(matrix);\n\n// Matrix for Touch events\nMatrix mappingMatrix = new Matrix();\n// Touch event matrix needs to be inverted\nmatrix.invert(mappingMatrix);\n\n// Copy the touch Event that is being mapped\nMotionEvent transformEvent = MotionEvent.obtain(ev);\n// Apply it's event mapping matrix\ntransformEvent.transform(mappingMatrix);\n\n</code></pre>\n<p><a href=\"https://developer.android.com/reference/android/view/MotionEvent#obtain(android.view.MotionEvent)\" rel=\"nofollow noreferrer\">Obtain copy documentation</a></p>\n<p>I do something very similar in my custom viewgroup for scaling MotionEvents to children in my <a href=\"https://github.com/Zardozz/FixedHeaderTableLayout\" rel=\"nofollow noreferrer\">FixedHeaderTableLayout</a> Library.</p>\n<p>The MotionEvent copying is done <a href=\"https://github.com/Zardozz/FixedHeaderTableLayout/blob/67100f914ab9555c210988d685cb00932f244e01/fixedheadertablelayout/src/main/java/com/github/zardozz/FixedHeaderTableLayout/FixedHeaderTableLayout.java#L563\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":7004992,"reputation":728,"user_id":5369727,"display_name":"Aorlinn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672350451,"creation_date":1670518444,"answer_id":74733714,"question_id":74695407,"body_markdown":"So for those having the same problem I post my solution (thanks again Andrew for [your help][1]).\r\n\r\n**Update**\r\n\r\nBecause I experienced input issues while testing, I decided to use `onLayout` instead of `dispatchTouchEvent` and `draw` methods to apply scale factor and translation, as the old solution did only apply it to the drawing and the input detection, but the container still declared the position of the children in the original place. This was causing espresso to execute the touches in the wrong place. With this solution the children are completely offset, so it also works with testing (and probably other things I did not consider).\r\n\r\n**Note** that both solutions only work, when you embed (an) other layout container(s) that match the parents size.\r\nIf you want to change that, you need to change the implementation of `onLayout`.\r\n\r\n    public class ZoomContainer extends ViewGroup\r\n    {\r\n    \t/**\r\n    \t * Limit the maximum/minimum scrolling to prevent scrolling the container,\r\n    \t * so that no more children are visible.\r\n    \t * The value is relative to the size of the container (so 0.1 means 10% of the size of this container)\r\n    \t */\r\n    \tprotected float mTranslationBounds = 0.1f;\r\n    \t/**\r\n    \t * The translation to be applied to the container\r\n    \t */\r\n    \tprotected PointF mTranslation;\r\n    \t/**\r\n    \t * The the current zoom factor.\r\n    \t * It is initialized with a value smaller than 1, to append some empty space around the view.\r\n    \t */\r\n    \tprotected float mScaleFactor = 0.95f;\r\n    \t/**\r\n    \t * The minimum scale factor to prevent endless zooming\r\n    \t */\r\n    \tprotected float mScaleFactorMin = 0.8f;\r\n    \t/**\r\n    \t * The maximum scale factor to prevent endless zooming.\r\n    \t */\r\n    \tprotected float mScaleFactorMax = 5.0f;\r\n    \t/**\r\n    \t * Used to indicate, whether or not this is the first touch event, which has no differences yet.\r\n    \t */\r\n    \tprotected boolean mIsTouchStarted = false;\r\n    \t/**\r\n    \t * Distance of the fingers from the last touch event\r\n    \t */\r\n    \tprotected float mStartDistance = 0;\r\n    \t/**\r\n    \t * Center of the two fingers from the last touch event.\r\n    \t */\r\n    \tprotected PointF mStartTouchPoint = new PointF(0, 0);\r\n    \r\n    \tpublic ZoomContainer(Context context)\r\n    \t{\r\n    \t\tsuper(context);\r\n    \t}\r\n    \r\n    \tpublic ZoomContainer(Context context, @Nullable AttributeSet attrs)\r\n    \t{\r\n    \t\tsuper(context, attrs);\r\n    \t}\r\n    \r\n    \tpublic ZoomContainer(Context context, @Nullable AttributeSet attrs, int defStyleAttr)\r\n    \t{\r\n    \t\tsuper(context, attrs, defStyleAttr);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Cancel all child touch events, if there is more than one finger down.\r\n    \t */\r\n    \t@Override\r\n    \tpublic boolean onInterceptTouchEvent(MotionEvent ev)\r\n    \t{\r\n    \t\tboolean intercept = ev.getPointerCount() &gt; 1;\r\n    \t\tif (intercept)\r\n    \t\t{\r\n    \t\t\tLog.d(&quot;TableView&quot;, &quot;Intercepted&quot;);\r\n    \t\t\tmIsTouchStarted = false;\r\n    \t\t}\r\n    \t\treturn intercept;\r\n    \t}\r\n    \r\n    \tprotected void initializeTranslation()\r\n    \t{\r\n    \t\tif (mTranslation == null)\r\n    \t\t{\r\n    \t\t\tmTranslation = new PointF(getWidth() * (1 - mScaleFactor) / 2f,\r\n    \t\t\t\t\tgetHeight() * (1 - mScaleFactor) / 2f);\r\n    \t\t\tLog.d(&quot;TableView&quot;, &quot;Translation: &quot; + mTranslation);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Calculate the new zoom and scroll respecting the difference to the last touch event.\r\n    \t */\r\n    \t@Override\r\n    \tpublic boolean onTouchEvent(MotionEvent event)\r\n    \t{\r\n    \t\tswitch (event.getAction())\r\n    \t\t{\r\n    \t\t\tcase MotionEvent.ACTION_CANCEL:\r\n    \t\t\tcase MotionEvent.ACTION_UP:\r\n    \t\t\tcase MotionEvent.ACTION_POINTER_UP:\r\n    \t\t\t\tmIsTouchStarted = false;\r\n    \t\t\t\treturn true;\r\n    \t\t}\r\n    \t\tif (event.getPointerCount() &lt;= 1)\r\n    \t\t{\r\n    \t\t\tmIsTouchStarted = false;\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \t\tfloat[] currentPointArray = new float[]{event.getX(0),\r\n    \t\t\t\tevent.getY(0),\r\n    \t\t\t\tevent.getX(1),\r\n    \t\t\t\tevent.getY(1)};\r\n    \t\tfloat currentFingerDistance = getDistance(currentPointArray[0],\r\n    \t\t\t\tcurrentPointArray[1],\r\n    \t\t\t\tcurrentPointArray[2],\r\n    \t\t\t\tcurrentPointArray[3]);\r\n    \t\t// Read the current center of the fingers to determine the the new translation\r\n    \t\tPointF currentPoint = getPoint(currentPointArray[0],\r\n    \t\t\t\tcurrentPointArray[1],\r\n    \t\t\t\tcurrentPointArray[2],\r\n    \t\t\t\tcurrentPointArray[3]);\r\n    \t\tif (mIsTouchStarted)\r\n    \t\t{\r\n    \t\t\t// 1 / oldScaleFactor - 1 / newScaleFactor is required to respect the relative translation,\r\n    \t\t\t// when zooming (translation is always from the upper left corner,\r\n    \t\t\t// but zooming should be performed centered to the fingers)\r\n    \t\t\tfloat scaleFactorDifference = 1f / mScaleFactor;\r\n    \t\t\tmScaleFactor = getBoundScaleFactor(mScaleFactor + (currentFingerDistance / mStartDistance - 1));\r\n    \t\t\tscaleFactorDifference -= 1f / mScaleFactor;\r\n    \t\t\t// Add the finger scroll since the last event to the current translation.\r\n    \t\t\tPointF newTranslation = new PointF(mTranslation.x + (currentPoint.x - mStartTouchPoint.x) / mScaleFactor,\r\n    \t\t\t\t\tmTranslation.y + (currentPoint.y - mStartTouchPoint.y) / mScaleFactor);\r\n    \t\t\t// Add the current point multiplied with the scale difference to make sure,\r\n    \t\t\t// zooming is always done from the center of the fingers. Otherwise zooming would always be\r\n    \t\t\t// applied from the upper left edge of the screen.\r\n    \t\t\tnewTranslation.x -= currentPoint.x * scaleFactorDifference;\r\n    \t\t\tnewTranslation.y -= currentPoint.y * scaleFactorDifference;\r\n    \t\t\tmTranslation = getBoundTranslation(newTranslation);\r\n    \t\t}\r\n    \t\tmStartTouchPoint = currentPoint;\r\n    \t\tmStartDistance = currentFingerDistance;\r\n    \t\tmIsTouchStarted = true;\r\n    \t\trequestLayout();\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \tprotected float getBoundValue(float value, float min, float max)\r\n    \t{\r\n    \t\treturn Math.min(Math.max(value, min), max);\r\n    \t}\r\n    \r\n    \tprotected PointF getBoundTranslation(PointF translation)\r\n    \t{\r\n    \t\ttranslation.x = getBoundValue(translation.x,\r\n    \t\t\t\t-(getWidth() * (mScaleFactor - 1) + getWidth() * mTranslationBounds),\r\n    \t\t\t\tgetWidth() * mTranslationBounds);\r\n    \t\ttranslation.y = getBoundValue(translation.y,\r\n    \t\t\t\t-(getHeight() * (mScaleFactor - 1) + getHeight() * mTranslationBounds),\r\n    \t\t\t\tgetHeight() * mTranslationBounds);\r\n    \t\treturn translation;\r\n    \t}\r\n    \r\n    \tprotected float getBoundScaleFactor(float scaleFactor)\r\n    \t{\r\n    \t\treturn getBoundValue(scaleFactor, mScaleFactorMin, mScaleFactorMax);\r\n    \t}\r\n    \r\n    \tprotected PointF getPoint(float x1, float y1, float x2, float y2)\r\n    \t{\r\n    \t\treturn new PointF(getCenter(x1, x2), getCenter(y1, y2));\r\n    \t}\r\n    \r\n    \tprotected float getCenter(float position1, float position2)\r\n    \t{\r\n    \t\treturn (position1 + position2) / 2f;\r\n    \t}\r\n    \r\n    \tprotected float getDistance(float x1, float y1, float x2, float y2)\r\n    \t{\r\n    \t\tfloat distanceX = Math.abs(x1 - x2);\r\n    \t\tfloat distanceY = Math.abs(y1 - y2);\r\n    \t\treturn (float) Math.sqrt(Math.pow(distanceX, 2) + Math.pow(distanceY, 2));\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void onLayout(boolean changed, int l, int t, int r, int b)\r\n    \t{\r\n    \t\tfloat width = (r - l);\r\n    \t\tfloat height = (b - t);\r\n    \t\tif (width &lt;= 0 || height &lt;= 0)\r\n    \t\t{\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\tinitializeTranslation();\r\n    \t\tfinal int childCount = getChildCount();\r\n    \t\tl = (int) (mTranslation.x * mScaleFactor);\r\n    \t\tr = (int) ((width + mTranslation.x) * mScaleFactor);\r\n    \t\tt = (int) (mTranslation.y * mScaleFactor);\r\n    \t\tb = (int) ((height + mTranslation.y) * mScaleFactor);\r\n    \r\n    \t\tfor (int i = 0; i &lt; childCount; i++)\r\n    \t\t{\r\n    \t\t\tView child = getChildAt(i);\r\n    \t\t\tchild.layout(l, t, r, b);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n**Old solution**\r\n\r\nUsing `dispatchTouchEvent` and `draw` methods to apply scale factor and tranlation:\r\n\r\n    public class ZoomContainer extends ViewGroup\r\n    {\r\n    \t/**\r\n    \t * Limit the maximum/minimum scrolling to prevent scrolling the container, \r\n    \t * so that no more children are visible. \r\n    \t * The value is relative to the size of the container (so 0.1 means 10% of the size of this container)\r\n    \t */\r\n    \tprotected float mTranslationBounds = 0.1f;\r\n    \t/**\r\n    \t * The translation to be applyed to the container\r\n    \t */\r\n    \tprotected PointF mTranslation;\r\n    \t/**\r\n    \t * The the current zoom factor. You might initialze it to a value smaller than 1, if you want to add some padding in the beginning.\r\n    \t */\r\n    \tprotected float mScaleFactor = 1f;\r\n    \t/**\r\n    \t * The minimum scale factor to prevent endless zooming\r\n    \t */\r\n    \tprotected float mScaleFactorMin = 0.8f;\r\n    \t/**\r\n    \t * The maximum scale factor to prevent endless zooming.\r\n    \t */\r\n    \tprotected float mScaleFactorMax = 4f;\r\n    \t/**\r\n    \t * Used to indicate, whether or not this is the first touch event, which has no differences yet.\r\n    \t */\r\n    \tprotected boolean mIsTouchStarted = false;\r\n    \t/**\r\n    \t* Distance of the fingers from the last touch event\r\n    \t*/\r\n    \tprotected float mStartDistance = 0;\r\n    \t/**\r\n    \t * Center of the two fingers from the last touch event.\r\n    \t */\r\n    \tprotected PointF mStartTouchPoint = new PointF(0, 0);\r\n    \r\n    \tpublic ZoomContainer(Context context)\r\n    \t{\r\n    \t\tsuper(context);\r\n    \t\tsetWillNotDraw(false);\r\n    \t}\r\n    \r\n    \tpublic ZoomContainer(Context context, @Nullable AttributeSet attrs)\r\n    \t{\r\n    \t\tsuper(context, attrs);\r\n    \t\tsetWillNotDraw(false);\r\n    \t}\r\n    \r\n    \tpublic ZoomContainer(Context context, @Nullable AttributeSet attrs, int defStyleAttr)\r\n    \t{\r\n    \t\tsuper(context, attrs, defStyleAttr);\r\n    \t\tsetWillNotDraw(false);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void draw(Canvas canvas)\r\n    \t{\r\n    \t\tcanvas.save();\r\n    \t\tcanvas.concat(createDrawMatrix());\r\n    \t\tsuper.draw(canvas);\r\n    \t\tcanvas.restore();\r\n    \t}\r\n    \r\n    \t/**\r\n    \t* Cancel all child touch events, if there is more than one finger down.\r\n    \t*/\r\n    \t@Override\r\n    \tpublic boolean onInterceptTouchEvent(MotionEvent ev)\r\n    \t{\r\n    \t\tboolean intercept = ev.getPointerCount() &gt; 1;\r\n    \t\tif (intercept)\r\n    \t\t{\r\n    \t\t\tmIsTouchStarted = false;\r\n    \t\t}\r\n    \t\treturn intercept;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Creates the transformation matrix for drawing and converting touch coordinates\r\n    \t */\r\n    \tprotected Matrix createDrawMatrix()\r\n    \t{\r\n    \t\t// Make sure children are centered, if initial scroll factor is not 1.\r\n    \t\tif (mTranslation == null)\r\n    \t\t{\r\n    \t\t\tmTranslation = new PointF(getWidth() * (1 - mScaleFactor) / 2f,\r\n    \t\t\t\t\tgetHeight() * (1 - mScaleFactor) / 2f);\r\n    \t\t}\r\n    \t\t// Matrix used for drawing the view\r\n    \t\tMatrix matrix = new Matrix();\r\n    \t\tmatrix.setScale(mScaleFactor, mScaleFactor);\r\n    \t\tmatrix.postTranslate(mTranslation.x, mTranslation.y);\r\n    \t\treturn matrix;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Transform the touch coordinates according to the current zoom and scroll,\r\n    \t * for children to get the appropriate ones.\r\n    \t */\r\n    \t@Override\r\n    \tpublic boolean dispatchTouchEvent(MotionEvent ev)\r\n    \t{\r\n    \t\t// Matrix for Touch events\r\n    \t\tMatrix mappingMatrix = new Matrix();\r\n    \t\t// Touch event matrix needs to be inverted\r\n    \t\tcreateDrawMatrix().invert(mappingMatrix);\r\n    \r\n    \t\t// Copy the touch Event that is being mapped\r\n    \t\tMotionEvent transformEvent = MotionEvent.obtain(ev);\r\n    \t\t// Apply it&#39;s event mapping matrix\r\n    \t\ttransformEvent.transform(mappingMatrix);\r\n    \r\n    \t\tboolean handled = super.dispatchTouchEvent(transformEvent);\r\n    \t\ttransformEvent.recycle();\r\n    \t\treturn handled;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Calculate the new zoom and scroll respecting the difference to the last touch event.\r\n    \t */\r\n    \t@Override\r\n    \tpublic boolean onTouchEvent(MotionEvent event)\r\n    \t{\r\n    \t\tswitch (event.getAction())\r\n    \t\t{\r\n    \t\t\tcase MotionEvent.ACTION_CANCEL:\r\n    \t\t\tcase MotionEvent.ACTION_UP:\r\n    \t\t\tcase MotionEvent.ACTION_POINTER_UP:\r\n    \t\t\t\tmIsTouchStarted = false;\r\n    \t\t\t\treturn true;\r\n    \t\t}\r\n    \t\t// \r\n    \t\tif (event.getPointerCount() &lt;= 1)\r\n    \t\t{\r\n    \t\t\tmIsTouchStarted = false;\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \t\tfloat[] currentPointArray = new float[]{event.getX(0),\r\n    \t\t\t\tevent.getY(0),\r\n    \t\t\t\tevent.getX(1),\r\n    \t\t\t\tevent.getY(1)};\r\n    \t\tfloat currentDistance = mScaleFactor * getDistance(currentPointArray[0],\r\n    \t\t\t\tcurrentPointArray[1],\r\n    \t\t\t\tcurrentPointArray[2],\r\n    \t\t\t\tcurrentPointArray[3]);\r\n    \t\tMatrix transformation = createDrawMatrix();\r\n    \t\ttransformation.mapPoints(currentPointArray);\r\n    \t\tPointF currentPoint = getPoint(currentPointArray[0],\r\n    \t\t\t\tcurrentPointArray[1],\r\n    \t\t\t\tcurrentPointArray[2],\r\n    \t\t\t\tcurrentPointArray[3]);\r\n    \t\tif (mIsTouchStarted)\r\n    \t\t{\r\n    \t\t\tfloat scaleFactorDifference = mScaleFactor;\r\n    \t\t\tmScaleFactor = getBoundScaleFactor(mScaleFactor + (currentDistance / mStartDistance - 1));\r\n    \t\t\tscaleFactorDifference -= mScaleFactor;\r\n    \t\t\tPointF newTranslation = new PointF(mTranslation.x + currentPoint.x - mStartTouchPoint.x,\r\n    \t\t\t\t\tmTranslation.y + currentPoint.y - mStartTouchPoint.y);\r\n    \t\t\tnewTranslation.x += currentPoint.x * scaleFactorDifference;\r\n    \t\t\tnewTranslation.y += currentPoint.y * scaleFactorDifference;\r\n    \t\t\tmTranslation = getBoundTranslation(newTranslation);\r\n    \t\t}\r\n    \t\tmStartTouchPoint = currentPoint;\r\n    \t\tmStartDistance = currentDistance;\r\n    \t\tmIsTouchStarted = true;\r\n    \t\tinvalidate();\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \tprotected float getBoundValue(float value, float min, float max)\r\n    \t{\r\n    \t\treturn Math.min(Math.max(value, min), max);\r\n    \t}\r\n    \r\n    \tprotected PointF getBoundTranslation(PointF translation)\r\n    \t{\r\n    \t\ttranslation.x = getBoundValue(translation.x,\r\n    \t\t\t\t-(getWidth() * (mScaleFactor - 1) + getWidth() * mTranslationBounds),\r\n    \t\t\t\tgetWidth() * mTranslationBounds);\r\n    \t\ttranslation.y = getBoundValue(translation.y,\r\n    \t\t\t\t-(getHeight() * (mScaleFactor - 1) + getHeight() * mTranslationBounds),\r\n    \t\t\t\tgetHeight() * mTranslationBounds);\r\n    \t\treturn translation;\r\n    \t}\r\n    \r\n    \tprotected float getBoundScaleFactor(float scaleFactor)\r\n    \t{\r\n    \t\treturn getBoundValue(scaleFactor, mScaleFactorMin, mScaleFactorMax);\r\n    \t}\r\n    \r\n    \tprotected PointF getPoint(float x1, float y1, float x2, float y2)\r\n    \t{\r\n    \t\treturn new PointF(getCenter(x1, x2), getCenter(y1, y2));\r\n    \t}\r\n    \r\n    \tprotected float getCenter(float position1, float position2)\r\n    \t{\r\n    \t\treturn (position1 + position2) / 2f;\r\n    \t}\r\n    \r\n    \tprotected float getDistance(float x1, float y1, float x2, float y2)\r\n    \t{\r\n    \t\tfloat distanceX = Math.abs(x1 - x2);\r\n    \t\tfloat distanceY = Math.abs(y1 - y2);\r\n    \t\treturn (float) Math.sqrt(Math.pow(distanceX, 2) + Math.pow(distanceY, 2));\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void onLayout(boolean changed, int l, int t, int r, int b)\r\n    \t{\r\n    \t\tfinal int childCount = getChildCount();\r\n    \t\tfor (int i = 0; i &lt; childCount; i++)\r\n    \t\t{\r\n    \t\t\tView child = getChildAt(i);\r\n    \t\t\tchild.layout(0, 0, r - l, b - t);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/74696078/5369727","title":"onTouchEvent for children of zoomed ViewGroup","body":"<p>So for those having the same problem I post my solution (thanks again Andrew for <a href=\"https://stackoverflow.com/a/74696078/5369727\">your help</a>).</p>\n<p><strong>Update</strong></p>\n<p>Because I experienced input issues while testing, I decided to use <code>onLayout</code> instead of <code>dispatchTouchEvent</code> and <code>draw</code> methods to apply scale factor and translation, as the old solution did only apply it to the drawing and the input detection, but the container still declared the position of the children in the original place. This was causing espresso to execute the touches in the wrong place. With this solution the children are completely offset, so it also works with testing (and probably other things I did not consider).</p>\n<p><strong>Note</strong> that both solutions only work, when you embed (an) other layout container(s) that match the parents size.\nIf you want to change that, you need to change the implementation of <code>onLayout</code>.</p>\n<pre><code>public class ZoomContainer extends ViewGroup\n{\n    /**\n     * Limit the maximum/minimum scrolling to prevent scrolling the container,\n     * so that no more children are visible.\n     * The value is relative to the size of the container (so 0.1 means 10% of the size of this container)\n     */\n    protected float mTranslationBounds = 0.1f;\n    /**\n     * The translation to be applied to the container\n     */\n    protected PointF mTranslation;\n    /**\n     * The the current zoom factor.\n     * It is initialized with a value smaller than 1, to append some empty space around the view.\n     */\n    protected float mScaleFactor = 0.95f;\n    /**\n     * The minimum scale factor to prevent endless zooming\n     */\n    protected float mScaleFactorMin = 0.8f;\n    /**\n     * The maximum scale factor to prevent endless zooming.\n     */\n    protected float mScaleFactorMax = 5.0f;\n    /**\n     * Used to indicate, whether or not this is the first touch event, which has no differences yet.\n     */\n    protected boolean mIsTouchStarted = false;\n    /**\n     * Distance of the fingers from the last touch event\n     */\n    protected float mStartDistance = 0;\n    /**\n     * Center of the two fingers from the last touch event.\n     */\n    protected PointF mStartTouchPoint = new PointF(0, 0);\n\n    public ZoomContainer(Context context)\n    {\n        super(context);\n    }\n\n    public ZoomContainer(Context context, @Nullable AttributeSet attrs)\n    {\n        super(context, attrs);\n    }\n\n    public ZoomContainer(Context context, @Nullable AttributeSet attrs, int defStyleAttr)\n    {\n        super(context, attrs, defStyleAttr);\n    }\n\n    /**\n     * Cancel all child touch events, if there is more than one finger down.\n     */\n    @Override\n    public boolean onInterceptTouchEvent(MotionEvent ev)\n    {\n        boolean intercept = ev.getPointerCount() &gt; 1;\n        if (intercept)\n        {\n            Log.d(&quot;TableView&quot;, &quot;Intercepted&quot;);\n            mIsTouchStarted = false;\n        }\n        return intercept;\n    }\n\n    protected void initializeTranslation()\n    {\n        if (mTranslation == null)\n        {\n            mTranslation = new PointF(getWidth() * (1 - mScaleFactor) / 2f,\n                    getHeight() * (1 - mScaleFactor) / 2f);\n            Log.d(&quot;TableView&quot;, &quot;Translation: &quot; + mTranslation);\n        }\n    }\n\n    /**\n     * Calculate the new zoom and scroll respecting the difference to the last touch event.\n     */\n    @Override\n    public boolean onTouchEvent(MotionEvent event)\n    {\n        switch (event.getAction())\n        {\n            case MotionEvent.ACTION_CANCEL:\n            case MotionEvent.ACTION_UP:\n            case MotionEvent.ACTION_POINTER_UP:\n                mIsTouchStarted = false;\n                return true;\n        }\n        if (event.getPointerCount() &lt;= 1)\n        {\n            mIsTouchStarted = false;\n            return true;\n        }\n        float[] currentPointArray = new float[]{event.getX(0),\n                event.getY(0),\n                event.getX(1),\n                event.getY(1)};\n        float currentFingerDistance = getDistance(currentPointArray[0],\n                currentPointArray[1],\n                currentPointArray[2],\n                currentPointArray[3]);\n        // Read the current center of the fingers to determine the the new translation\n        PointF currentPoint = getPoint(currentPointArray[0],\n                currentPointArray[1],\n                currentPointArray[2],\n                currentPointArray[3]);\n        if (mIsTouchStarted)\n        {\n            // 1 / oldScaleFactor - 1 / newScaleFactor is required to respect the relative translation,\n            // when zooming (translation is always from the upper left corner,\n            // but zooming should be performed centered to the fingers)\n            float scaleFactorDifference = 1f / mScaleFactor;\n            mScaleFactor = getBoundScaleFactor(mScaleFactor + (currentFingerDistance / mStartDistance - 1));\n            scaleFactorDifference -= 1f / mScaleFactor;\n            // Add the finger scroll since the last event to the current translation.\n            PointF newTranslation = new PointF(mTranslation.x + (currentPoint.x - mStartTouchPoint.x) / mScaleFactor,\n                    mTranslation.y + (currentPoint.y - mStartTouchPoint.y) / mScaleFactor);\n            // Add the current point multiplied with the scale difference to make sure,\n            // zooming is always done from the center of the fingers. Otherwise zooming would always be\n            // applied from the upper left edge of the screen.\n            newTranslation.x -= currentPoint.x * scaleFactorDifference;\n            newTranslation.y -= currentPoint.y * scaleFactorDifference;\n            mTranslation = getBoundTranslation(newTranslation);\n        }\n        mStartTouchPoint = currentPoint;\n        mStartDistance = currentFingerDistance;\n        mIsTouchStarted = true;\n        requestLayout();\n        return true;\n    }\n\n    protected float getBoundValue(float value, float min, float max)\n    {\n        return Math.min(Math.max(value, min), max);\n    }\n\n    protected PointF getBoundTranslation(PointF translation)\n    {\n        translation.x = getBoundValue(translation.x,\n                -(getWidth() * (mScaleFactor - 1) + getWidth() * mTranslationBounds),\n                getWidth() * mTranslationBounds);\n        translation.y = getBoundValue(translation.y,\n                -(getHeight() * (mScaleFactor - 1) + getHeight() * mTranslationBounds),\n                getHeight() * mTranslationBounds);\n        return translation;\n    }\n\n    protected float getBoundScaleFactor(float scaleFactor)\n    {\n        return getBoundValue(scaleFactor, mScaleFactorMin, mScaleFactorMax);\n    }\n\n    protected PointF getPoint(float x1, float y1, float x2, float y2)\n    {\n        return new PointF(getCenter(x1, x2), getCenter(y1, y2));\n    }\n\n    protected float getCenter(float position1, float position2)\n    {\n        return (position1 + position2) / 2f;\n    }\n\n    protected float getDistance(float x1, float y1, float x2, float y2)\n    {\n        float distanceX = Math.abs(x1 - x2);\n        float distanceY = Math.abs(y1 - y2);\n        return (float) Math.sqrt(Math.pow(distanceX, 2) + Math.pow(distanceY, 2));\n    }\n\n    @Override\n    protected void onLayout(boolean changed, int l, int t, int r, int b)\n    {\n        float width = (r - l);\n        float height = (b - t);\n        if (width &lt;= 0 || height &lt;= 0)\n        {\n            return;\n        }\n        initializeTranslation();\n        final int childCount = getChildCount();\n        l = (int) (mTranslation.x * mScaleFactor);\n        r = (int) ((width + mTranslation.x) * mScaleFactor);\n        t = (int) (mTranslation.y * mScaleFactor);\n        b = (int) ((height + mTranslation.y) * mScaleFactor);\n\n        for (int i = 0; i &lt; childCount; i++)\n        {\n            View child = getChildAt(i);\n            child.layout(l, t, r, b);\n        }\n    }\n}\n</code></pre>\n<p><strong>Old solution</strong></p>\n<p>Using <code>dispatchTouchEvent</code> and <code>draw</code> methods to apply scale factor and tranlation:</p>\n<pre><code>public class ZoomContainer extends ViewGroup\n{\n    /**\n     * Limit the maximum/minimum scrolling to prevent scrolling the container, \n     * so that no more children are visible. \n     * The value is relative to the size of the container (so 0.1 means 10% of the size of this container)\n     */\n    protected float mTranslationBounds = 0.1f;\n    /**\n     * The translation to be applyed to the container\n     */\n    protected PointF mTranslation;\n    /**\n     * The the current zoom factor. You might initialze it to a value smaller than 1, if you want to add some padding in the beginning.\n     */\n    protected float mScaleFactor = 1f;\n    /**\n     * The minimum scale factor to prevent endless zooming\n     */\n    protected float mScaleFactorMin = 0.8f;\n    /**\n     * The maximum scale factor to prevent endless zooming.\n     */\n    protected float mScaleFactorMax = 4f;\n    /**\n     * Used to indicate, whether or not this is the first touch event, which has no differences yet.\n     */\n    protected boolean mIsTouchStarted = false;\n    /**\n    * Distance of the fingers from the last touch event\n    */\n    protected float mStartDistance = 0;\n    /**\n     * Center of the two fingers from the last touch event.\n     */\n    protected PointF mStartTouchPoint = new PointF(0, 0);\n\n    public ZoomContainer(Context context)\n    {\n        super(context);\n        setWillNotDraw(false);\n    }\n\n    public ZoomContainer(Context context, @Nullable AttributeSet attrs)\n    {\n        super(context, attrs);\n        setWillNotDraw(false);\n    }\n\n    public ZoomContainer(Context context, @Nullable AttributeSet attrs, int defStyleAttr)\n    {\n        super(context, attrs, defStyleAttr);\n        setWillNotDraw(false);\n    }\n\n    @Override\n    public void draw(Canvas canvas)\n    {\n        canvas.save();\n        canvas.concat(createDrawMatrix());\n        super.draw(canvas);\n        canvas.restore();\n    }\n\n    /**\n    * Cancel all child touch events, if there is more than one finger down.\n    */\n    @Override\n    public boolean onInterceptTouchEvent(MotionEvent ev)\n    {\n        boolean intercept = ev.getPointerCount() &gt; 1;\n        if (intercept)\n        {\n            mIsTouchStarted = false;\n        }\n        return intercept;\n    }\n\n    /**\n     * Creates the transformation matrix for drawing and converting touch coordinates\n     */\n    protected Matrix createDrawMatrix()\n    {\n        // Make sure children are centered, if initial scroll factor is not 1.\n        if (mTranslation == null)\n        {\n            mTranslation = new PointF(getWidth() * (1 - mScaleFactor) / 2f,\n                    getHeight() * (1 - mScaleFactor) / 2f);\n        }\n        // Matrix used for drawing the view\n        Matrix matrix = new Matrix();\n        matrix.setScale(mScaleFactor, mScaleFactor);\n        matrix.postTranslate(mTranslation.x, mTranslation.y);\n        return matrix;\n    }\n\n    /**\n     * Transform the touch coordinates according to the current zoom and scroll,\n     * for children to get the appropriate ones.\n     */\n    @Override\n    public boolean dispatchTouchEvent(MotionEvent ev)\n    {\n        // Matrix for Touch events\n        Matrix mappingMatrix = new Matrix();\n        // Touch event matrix needs to be inverted\n        createDrawMatrix().invert(mappingMatrix);\n\n        // Copy the touch Event that is being mapped\n        MotionEvent transformEvent = MotionEvent.obtain(ev);\n        // Apply it's event mapping matrix\n        transformEvent.transform(mappingMatrix);\n\n        boolean handled = super.dispatchTouchEvent(transformEvent);\n        transformEvent.recycle();\n        return handled;\n    }\n\n    /**\n     * Calculate the new zoom and scroll respecting the difference to the last touch event.\n     */\n    @Override\n    public boolean onTouchEvent(MotionEvent event)\n    {\n        switch (event.getAction())\n        {\n            case MotionEvent.ACTION_CANCEL:\n            case MotionEvent.ACTION_UP:\n            case MotionEvent.ACTION_POINTER_UP:\n                mIsTouchStarted = false;\n                return true;\n        }\n        // \n        if (event.getPointerCount() &lt;= 1)\n        {\n            mIsTouchStarted = false;\n            return true;\n        }\n        float[] currentPointArray = new float[]{event.getX(0),\n                event.getY(0),\n                event.getX(1),\n                event.getY(1)};\n        float currentDistance = mScaleFactor * getDistance(currentPointArray[0],\n                currentPointArray[1],\n                currentPointArray[2],\n                currentPointArray[3]);\n        Matrix transformation = createDrawMatrix();\n        transformation.mapPoints(currentPointArray);\n        PointF currentPoint = getPoint(currentPointArray[0],\n                currentPointArray[1],\n                currentPointArray[2],\n                currentPointArray[3]);\n        if (mIsTouchStarted)\n        {\n            float scaleFactorDifference = mScaleFactor;\n            mScaleFactor = getBoundScaleFactor(mScaleFactor + (currentDistance / mStartDistance - 1));\n            scaleFactorDifference -= mScaleFactor;\n            PointF newTranslation = new PointF(mTranslation.x + currentPoint.x - mStartTouchPoint.x,\n                    mTranslation.y + currentPoint.y - mStartTouchPoint.y);\n            newTranslation.x += currentPoint.x * scaleFactorDifference;\n            newTranslation.y += currentPoint.y * scaleFactorDifference;\n            mTranslation = getBoundTranslation(newTranslation);\n        }\n        mStartTouchPoint = currentPoint;\n        mStartDistance = currentDistance;\n        mIsTouchStarted = true;\n        invalidate();\n        return true;\n    }\n\n    protected float getBoundValue(float value, float min, float max)\n    {\n        return Math.min(Math.max(value, min), max);\n    }\n\n    protected PointF getBoundTranslation(PointF translation)\n    {\n        translation.x = getBoundValue(translation.x,\n                -(getWidth() * (mScaleFactor - 1) + getWidth() * mTranslationBounds),\n                getWidth() * mTranslationBounds);\n        translation.y = getBoundValue(translation.y,\n                -(getHeight() * (mScaleFactor - 1) + getHeight() * mTranslationBounds),\n                getHeight() * mTranslationBounds);\n        return translation;\n    }\n\n    protected float getBoundScaleFactor(float scaleFactor)\n    {\n        return getBoundValue(scaleFactor, mScaleFactorMin, mScaleFactorMax);\n    }\n\n    protected PointF getPoint(float x1, float y1, float x2, float y2)\n    {\n        return new PointF(getCenter(x1, x2), getCenter(y1, y2));\n    }\n\n    protected float getCenter(float position1, float position2)\n    {\n        return (position1 + position2) / 2f;\n    }\n\n    protected float getDistance(float x1, float y1, float x2, float y2)\n    {\n        float distanceX = Math.abs(x1 - x2);\n        float distanceY = Math.abs(y1 - y2);\n        return (float) Math.sqrt(Math.pow(distanceX, 2) + Math.pow(distanceY, 2));\n    }\n\n    @Override\n    protected void onLayout(boolean changed, int l, int t, int r, int b)\n    {\n        final int childCount = getChildCount();\n        for (int i = 0; i &lt; childCount; i++)\n        {\n            View child = getChildAt(i);\n            child.layout(0, 0, r - l, b - t);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":7004992,"reputation":728,"user_id":5369727,"display_name":"Aorlinn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74733714,"answer_count":2,"score":0,"last_activity_date":1672350451,"creation_date":1670281165,"question_id":74695407,"body_markdown":"For my [game Hashi][1] I want to build a custom ViewGroup that allows zooming and scrolling (both axes), containing children that are affected on touches as well.\r\n\r\n[![This is how the ViewGroups looks][2]][2]\r\n\r\nI have set `setWillNotDraw(false)` and overwritten `draw(Canvas)` to use `canvas.scale(..)` and `canvas.translate(..)`:\r\n\r\n    @Override\r\n    public void draw(Canvas canvas)\r\n    {\r\n    \tcanvas.save();\r\n    \tcanvas.scale(mScaleFactor, mScaleFactor, mScaleCenter.x, mScaleCenter.y);\r\n    \tcanvas.translate(mTranslation.x * mScaleFactor, mTranslation.y * mScaleFactor);\r\n    \tsuper.draw(canvas);\r\n    \tcanvas.restore();\r\n    }\r\n\r\nBut then I realized, that the `MotionEvent` parameter of the `onTouchEvent` for children is offset by the value I set with the translation (so they are detected, as if the container did not have any zoom or offset).\r\n\r\nI tried to overwrite `dispatchTouchEvent` in the parent `ViewGroup` and adjust the coordinates of the event. But `MotionEvent` is final and can only be instantiated via `MotionEvent.obtain(..)`. And there is no version of `obtain` to accept multiple coordinates, when there is more than one finger down.\r\nIs there any way to modify the MotionEvent parameters, so I don&#39;t need to do it in the `onTouchEvent` methods of the child views (that would be much more complex), or even a better approach to implement zoom and scroll?\r\n\r\nI implemented my own zoom container because I need to control the touches strictly (children also listen to swipe gestures, but need to be intercepted, when a second finger is down).\r\n\r\n\r\n  [1]: https://play.google.com/store/apps/details?id=ch.aorlinn.bridges\r\n  [2]: https://i.stack.imgur.com/VC0Jz.png","title":"onTouchEvent for children of zoomed ViewGroup","body":"<p>For my <a href=\"https://play.google.com/store/apps/details?id=ch.aorlinn.bridges\" rel=\"nofollow noreferrer\">game Hashi</a> I want to build a custom ViewGroup that allows zooming and scrolling (both axes), containing children that are affected on touches as well.</p>\n<p><a href=\"https://i.stack.imgur.com/VC0Jz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VC0Jz.png\" alt=\"This is how the ViewGroups looks\" /></a></p>\n<p>I have set <code>setWillNotDraw(false)</code> and overwritten <code>draw(Canvas)</code> to use <code>canvas.scale(..)</code> and <code>canvas.translate(..)</code>:</p>\n<pre><code>@Override\npublic void draw(Canvas canvas)\n{\n    canvas.save();\n    canvas.scale(mScaleFactor, mScaleFactor, mScaleCenter.x, mScaleCenter.y);\n    canvas.translate(mTranslation.x * mScaleFactor, mTranslation.y * mScaleFactor);\n    super.draw(canvas);\n    canvas.restore();\n}\n</code></pre>\n<p>But then I realized, that the <code>MotionEvent</code> parameter of the <code>onTouchEvent</code> for children is offset by the value I set with the translation (so they are detected, as if the container did not have any zoom or offset).</p>\n<p>I tried to overwrite <code>dispatchTouchEvent</code> in the parent <code>ViewGroup</code> and adjust the coordinates of the event. But <code>MotionEvent</code> is final and can only be instantiated via <code>MotionEvent.obtain(..)</code>. And there is no version of <code>obtain</code> to accept multiple coordinates, when there is more than one finger down.\nIs there any way to modify the MotionEvent parameters, so I don't need to do it in the <code>onTouchEvent</code> methods of the child views (that would be much more complex), or even a better approach to implement zoom and scroll?</p>\n<p>I implemented my own zoom container because I need to control the touches strictly (children also listen to swipe gestures, but need to be intercepted, when a second finger is down).</p>\n"},{"tags":["java","formatting","number-formatting"],"comments":[{"owner":{"account_id":20466438,"reputation":115,"user_id":15017829,"display_name":"Mike Kim"},"score":0,"creation_date":1672351440,"post_id":74956323,"comment_id":132274781,"body_markdown":"Duplicate of this  https://stackoverflow.com/questions/16273849/java-decimalformat-is-it-possible-grouping-in-fraction-part","body":"Duplicate of this  <a href=\"https://stackoverflow.com/questions/16273849/java-decimalformat-is-it-possible-grouping-in-fraction-part\" title=\"java decimalformat is it possible grouping in fraction part\">stackoverflow.com/questions/16273849/&hellip;</a>"},{"owner":{"account_id":13414743,"reputation":886,"user_id":9679725,"display_name":"Joe DiNottra"},"score":0,"creation_date":1672351780,"post_id":74956323,"comment_id":132274857,"body_markdown":"@MikeKim I think you are right. We&#39;re looking for the same goal. It seems that according to the answer, it&#39;s not possible to group after the decimal point. Sigh.","body":"@MikeKim I think you are right. We&#39;re looking for the same goal. It seems that according to the answer, it&#39;s not possible to group after the decimal point. Sigh."},{"owner":{"account_id":20466438,"reputation":115,"user_id":15017829,"display_name":"Mike Kim"},"score":0,"creation_date":1672357793,"post_id":74956323,"comment_id":132275927,"body_markdown":"You just need to make a custom method that converts the fraction part into an integer, format that, and then append that formatted string to the original integer.","body":"You just need to make a custom method that converts the fraction part into an integer, format that, and then append that formatted string to the original integer."}],"owner":{"account_id":13414743,"reputation":886,"user_id":9679725,"display_name":"Joe DiNottra"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672350382,"creation_date":1672350382,"question_id":74956323,"body_markdown":"I&#39;m using DecimalFormat and need to add thousands separator to the decimal places of numbers. For example, I need to:\r\n\r\n```java\r\nDecimalFormat fmt = new DecimalFormat(&quot;#,##0.0##_#&quot;); // ?\r\nSystem.out.println(fmt.format(1234.0));     // 1,234.0\r\nSystem.out.println(fmt.format(0.1201));     // 0.120_1\r\nSystem.out.println(fmt.format(0.00001234)); // 0.000_012_34\r\n```\r\n\r\nHow do I specify the format for the decimal places?\r\n","title":"How to format decimals separators in DecimalFormat","body":"<p>I'm using DecimalFormat and need to add thousands separator to the decimal places of numbers. For example, I need to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DecimalFormat fmt = new DecimalFormat(&quot;#,##0.0##_#&quot;); // ?\nSystem.out.println(fmt.format(1234.0));     // 1,234.0\nSystem.out.println(fmt.format(0.1201));     // 0.120_1\nSystem.out.println(fmt.format(0.00001234)); // 0.000_012_34\n</code></pre>\n<p>How do I specify the format for the decimal places?</p>\n"},{"tags":["java","android"],"answers":[{"comments":[{"owner":{"account_id":3192300,"reputation":717,"user_id":2696292,"accept_rate":57,"display_name":"Mansour Fahad"},"score":0,"creation_date":1379996354,"post_id":18972838,"comment_id":28023751,"body_markdown":"Does putting the path as &quot;/sdcard&quot; it will access to all files including the files that in subfolders?","body":"Does putting the path as &quot;/sdcard&quot; it will access to all files including the files that in subfolders?"}],"tags":[],"owner":{"account_id":1887163,"reputation":3199,"user_id":2139699,"accept_rate":62,"display_name":"Pradip"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672346122,"creation_date":1379995902,"answer_id":18972838,"question_id":18972788,"body_markdown":"Try with this: The `java.io` package has been reimplemented within Android. You are able to use the same mechanisms in Android as you do in Java.\r\n\r\n    File fileList = new File(&quot;/sdcard&quot;); // Path which you want to read\r\n    if (fileList != null) {\r\n        File[] files = fileList.listFiles();\r\n            for (File f : files) {\r\n                // Do something with the files\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n","title":"How can I look up for all files in an Android device and put them in a list?","body":"<p>Try with this: The <code>java.io</code> package has been reimplemented within Android. You are able to use the same mechanisms in Android as you do in Java.</p>\n<pre><code>File fileList = new File(&quot;/sdcard&quot;); // Path which you want to read\nif (fileList != null) {\n    File[] files = fileList.listFiles();\n        for (File f : files) {\n            // Do something with the files\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3192300,"reputation":717,"user_id":2696292,"accept_rate":57,"display_name":"Mansour Fahad"},"score":0,"creation_date":1379996285,"post_id":18972860,"comment_id":28023732,"body_markdown":"What about &quot;your path&quot;? What should I put there so I get access to all files in main folders and subfolders?","body":"What about &quot;your path&quot;? What should I put there so I get access to all files in main folders and subfolders?"},{"owner":{"account_id":1893421,"reputation":137,"user_id":1710894,"accept_rate":38,"display_name":"willsantoso"},"score":0,"creation_date":1379996393,"post_id":18972860,"comment_id":28023765,"body_markdown":"@MansourFahad your path is just your directory path, which you want to see its list of files","body":"@MansourFahad your path is just your directory path, which you want to see its list of files"},{"owner":{"account_id":3192300,"reputation":717,"user_id":2696292,"accept_rate":57,"display_name":"Mansour Fahad"},"score":0,"creation_date":1379996693,"post_id":18972860,"comment_id":28023836,"body_markdown":"Is there any way to access files that in each path? I mean in the subpath of that path.","body":"Is there any way to access files that in each path? I mean in the subpath of that path."},{"owner":{"account_id":1893421,"reputation":137,"user_id":1710894,"accept_rate":38,"display_name":"willsantoso"},"score":0,"creation_date":1379997068,"post_id":18972860,"comment_id":28023925,"body_markdown":"I guess you just need to call `File subpath = new File(*path*+File.seperator()+*name of subpath*)`, it will point that subpath","body":"I guess you just need to call <code>File subpath = new File(*path*+File.seperator()+*name of subpath*)</code>, it will point that subpath"}],"tags":[],"owner":{"account_id":1893421,"reputation":137,"user_id":1710894,"accept_rate":38,"display_name":"willsantoso"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672346198,"creation_date":1379996050,"answer_id":18972860,"question_id":18972788,"body_markdown":"I used this code:\r\n\r\n        private File[] listOfDir;\r\n\r\n        /* ... */\r\n\r\n        TextView tv = (TextView) rootView.findViewById(R.id.textView1);\r\n        listOfDir = show();\r\n        String temp = &quot;&quot;;\r\n        if (listOfDir != null) {\r\n            for (File i : listOfDir) {\r\n                temp += i.getName() + &#39;\\n&#39;;\r\n            }\r\n        } else {\r\n            temp = &quot;null&quot;;\r\n        }\r\n        tv.setText(temp);\r\n        ...\r\n\r\n        public File[] show() {\r\n            File[] dirs = null;\r\n            File dir = new File( /* Your path */ );\r\n            dirs = dir.listFiles();\r\n            return dirs;\r\n        }\r\n\r\nAnd just call *show* to get list all the name.\r\n","title":"How can I look up for all files in an Android device and put them in a list?","body":"<p>I used this code:</p>\n<pre><code>    private File[] listOfDir;\n\n    /* ... */\n\n    TextView tv = (TextView) rootView.findViewById(R.id.textView1);\n    listOfDir = show();\n    String temp = &quot;&quot;;\n    if (listOfDir != null) {\n        for (File i : listOfDir) {\n            temp += i.getName() + '\\n';\n        }\n    } else {\n        temp = &quot;null&quot;;\n    }\n    tv.setText(temp);\n    ...\n\n    public File[] show() {\n        File[] dirs = null;\n        File dir = new File( /* Your path */ );\n        dirs = dir.listFiles();\n        return dirs;\n    }\n</code></pre>\n<p>And just call <em>show</em> to get list all the name.</p>\n"},{"comments":[{"owner":{"account_id":3192300,"reputation":717,"user_id":2696292,"accept_rate":57,"display_name":"Mansour Fahad"},"score":0,"creation_date":1379996590,"post_id":18972895,"comment_id":28023810,"body_markdown":"That is a good solution but actually I want to list all files not browse through them. Anyway thank you very much.","body":"That is a good solution but actually I want to list all files not browse through them. Anyway thank you very much."}],"tags":[],"owner":{"account_id":2327791,"reputation":2900,"user_id":2041850,"accept_rate":68,"display_name":"Zax"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672346540,"creation_date":1379996334,"answer_id":18972895,"question_id":18972788,"body_markdown":"I think this will help. First you need to fetch the contents of the SD card as shown below:\r\n\r\n    public class FileList extends ListActivity\r\n    {\r\n        private File file;\r\n        private List&lt;String&gt; myList;\r\n\r\n        public void onCreate(Bundle savedInstanceState)\r\n        {\r\n            super.onCreate(savedInstanceState);\r\n\r\n            myList = new ArrayList&lt;String&gt;();\r\n\r\n            String root_sd = Environment.getExternalStorageDirectory().toString();\r\n            file = new File(root_sd + &quot;/external_sd&quot;);\r\n            File list[] = file.listFiles();\r\n\r\n            for(int i=0; i&lt; list.length; i++)\r\n            {\r\n                myList.add(list[i].getName());\r\n            }\r\n\r\n            setListAdapter(new ArrayAdapter&lt;String&gt;(\r\n                               this,\r\n                               android.R.layout.simple_list_item_1,\r\n                               myList));\r\n        }\r\n\r\nNow that you have all the files and folders from your `sdcard` in your `listview`, whenever, you go into a folder, then you need to fetch the contents of that folder as shown below:\r\n\r\n    protected void onListItemClick(ListView l, View v, int position, long id)\r\n    {\r\n        super.onListItemClick(l, v, position, id);\r\n\r\n        File temp_file = new File(file, myList.get(position));\r\n\r\n        if(!temp_file.isFile())\r\n        {\r\n            file = new File(file, myList.get(position));\r\n            File list[] = file.listFiles();\r\n\r\n            myList.clear();\r\n\r\n            for(int i=0; i&lt; list.length; i++)\r\n            {\r\n                myList.add(list[i].getName());\r\n            }\r\n            Toast.makeText(getApplicationContext(), file.toString(), Toast.LENGTH_LONG).show();\r\n            setListAdapter(new ArrayAdapter&lt;String&gt;(this,\r\n                    android.R.layout.simple_list_item_1, myList));\r\n        }\r\n    }\r\n\r\nAnd again on pressing back you need to load back the contents of your previous folder as shown below:\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        String parent = file.getParent().toString();\r\n        file = new File(parent);\r\n        File list[] = file.listFiles();\r\n\r\n        myList.clear();\r\n\r\n        for(int i=0; i&lt; list.length; i++)\r\n        {\r\n            myList.add(list[i].getName());\r\n        }\r\n        Toast.makeText(getApplicationContext(), parent, Toast.LENGTH_LONG).show();\r\n        setListAdapter(new ArrayAdapter&lt;String&gt;(\r\n                         this,\r\n                         android.R.layout.simple_list_item_1,\r\n                         myList));\r\n\r\nI think this is what you need.\r\n\r\n\r\n\r\n","title":"How can I look up for all files in an Android device and put them in a list?","body":"<p>I think this will help. First you need to fetch the contents of the SD card as shown below:</p>\n<pre><code>public class FileList extends ListActivity\n{\n    private File file;\n    private List&lt;String&gt; myList;\n\n    public void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n\n        myList = new ArrayList&lt;String&gt;();\n\n        String root_sd = Environment.getExternalStorageDirectory().toString();\n        file = new File(root_sd + &quot;/external_sd&quot;);\n        File list[] = file.listFiles();\n\n        for(int i=0; i&lt; list.length; i++)\n        {\n            myList.add(list[i].getName());\n        }\n\n        setListAdapter(new ArrayAdapter&lt;String&gt;(\n                           this,\n                           android.R.layout.simple_list_item_1,\n                           myList));\n    }\n</code></pre>\n<p>Now that you have all the files and folders from your <code>sdcard</code> in your <code>listview</code>, whenever, you go into a folder, then you need to fetch the contents of that folder as shown below:</p>\n<pre><code>protected void onListItemClick(ListView l, View v, int position, long id)\n{\n    super.onListItemClick(l, v, position, id);\n\n    File temp_file = new File(file, myList.get(position));\n\n    if(!temp_file.isFile())\n    {\n        file = new File(file, myList.get(position));\n        File list[] = file.listFiles();\n\n        myList.clear();\n\n        for(int i=0; i&lt; list.length; i++)\n        {\n            myList.add(list[i].getName());\n        }\n        Toast.makeText(getApplicationContext(), file.toString(), Toast.LENGTH_LONG).show();\n        setListAdapter(new ArrayAdapter&lt;String&gt;(this,\n                android.R.layout.simple_list_item_1, myList));\n    }\n}\n</code></pre>\n<p>And again on pressing back you need to load back the contents of your previous folder as shown below:</p>\n<pre><code>@Override\npublic void onBackPressed() {\n    String parent = file.getParent().toString();\n    file = new File(parent);\n    File list[] = file.listFiles();\n\n    myList.clear();\n\n    for(int i=0; i&lt; list.length; i++)\n    {\n        myList.add(list[i].getName());\n    }\n    Toast.makeText(getApplicationContext(), parent, Toast.LENGTH_LONG).show();\n    setListAdapter(new ArrayAdapter&lt;String&gt;(\n                     this,\n                     android.R.layout.simple_list_item_1,\n                     myList));\n</code></pre>\n<p>I think this is what you need.</p>\n"},{"comments":[{"owner":{"account_id":3192300,"reputation":717,"user_id":2696292,"accept_rate":57,"display_name":"Mansour Fahad"},"score":1,"creation_date":1379999726,"post_id":18972952,"comment_id":28024559,"body_markdown":"I followed your code but when I use the method above it returns a 0 size. I will edit my code so you have a clear idea about what I‘m talking about.","body":"I followed your code but when I use the method above it returns a 0 size. I will edit my code so you have a clear idea about what I‘m talking about."},{"owner":{"account_id":187320,"reputation":2598,"user_id":425280,"accept_rate":65,"display_name":"krammer"},"score":1,"creation_date":1380002390,"post_id":18972952,"comment_id":28025425,"body_markdown":"@MansourFahad Did you add permission to access the external storage ?","body":"@MansourFahad Did you add permission to access the external storage ?"},{"owner":{"account_id":3192300,"reputation":717,"user_id":2696292,"accept_rate":57,"display_name":"Mansour Fahad"},"score":0,"creation_date":1380094351,"post_id":18972952,"comment_id":28067084,"body_markdown":"Yes mate it was there but I don&#39;t know why it was fail. Anyway I have solved the problem with the code that I provide as answer. Thank you very much.","body":"Yes mate it was there but I don&#39;t know why it was fail. Anyway I have solved the problem with the code that I provide as answer. Thank you very much."}],"tags":[],"owner":{"account_id":187320,"reputation":2598,"user_id":425280,"accept_rate":65,"display_name":"krammer"},"comment_count":3,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1379996745,"creation_date":1379996745,"answer_id":18972952,"question_id":18972788,"body_markdown":"Conceptually, what you are doing is not complete. Your code only gives you a File for the root level directory. To determine all the files within this directory and the sub directories, you need recursive calls so that all the files are listed to the end of the folder levels.\r\n\r\n\r\n    private List&lt;File&gt; getListFiles(File parentDir) {\r\n        // On first call, parentDir is your sdcard root path\r\n        ArrayList&lt;File&gt; inFiles = new ArrayList&lt;File&gt;(); // initialize an array list to store file names\r\n        File[] files = parentDir.listFiles(); // list all files in this directory\r\n        for (File file : files) {\r\n            if (file.isDirectory()) { // if the file is a directory\r\n                inFiles.addAll(getListFiles(file)); // **CALL THIS RECURSIVELY TO GET ALL LOWER LEVEL FILES**\r\n            } \r\n            \r\n        }\r\n        return inFiles;\r\n    }\r\n\r\nNow call this function as:\r\n\r\n    getListFiles(Environment.getExternalStorageDirectory());\r\n\r\nNow, you can add your ArrayList as a source to a List Control.\r\n\r\n**Bonus**: If you would like to represent list the files in a tree like view, I would recommend you to look at https://code.google.com/p/tree-view-list-android/\r\n\r\nSource:\r\nhttps://stackoverflow.com/questions/9530921/list-all-the-files-from-all-the-folder-in-a-single-list\r\n\r\nhttps://stackoverflow.com/questions/6939479/search-all-pdf-file-present-in-the-android-device","title":"How can I look up for all files in an Android device and put them in a list?","body":"<p>Conceptually, what you are doing is not complete. Your code only gives you a File for the root level directory. To determine all the files within this directory and the sub directories, you need recursive calls so that all the files are listed to the end of the folder levels.</p>\n\n<pre><code>private List&lt;File&gt; getListFiles(File parentDir) {\n    // On first call, parentDir is your sdcard root path\n    ArrayList&lt;File&gt; inFiles = new ArrayList&lt;File&gt;(); // initialize an array list to store file names\n    File[] files = parentDir.listFiles(); // list all files in this directory\n    for (File file : files) {\n        if (file.isDirectory()) { // if the file is a directory\n            inFiles.addAll(getListFiles(file)); // **CALL THIS RECURSIVELY TO GET ALL LOWER LEVEL FILES**\n        } \n\n    }\n    return inFiles;\n}\n</code></pre>\n\n<p>Now call this function as:</p>\n\n<pre><code>getListFiles(Environment.getExternalStorageDirectory());\n</code></pre>\n\n<p>Now, you can add your ArrayList as a source to a List Control.</p>\n\n<p><strong>Bonus</strong>: If you would like to represent list the files in a tree like view, I would recommend you to look at <a href=\"https://code.google.com/p/tree-view-list-android/\" rel=\"nofollow noreferrer\">https://code.google.com/p/tree-view-list-android/</a></p>\n\n<p>Source:\n<a href=\"https://stackoverflow.com/questions/9530921/list-all-the-files-from-all-the-folder-in-a-single-list\">List all the files from all the folder in a single list</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/6939479/search-all-pdf-file-present-in-the-android-device\">Search all .pdf file present in the Android device</a></p>\n"},{"tags":[],"owner":{"account_id":203535,"reputation":1119,"user_id":451243,"display_name":"saiful103a"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672346692,"creation_date":1379999194,"answer_id":18973318,"question_id":18972788,"body_markdown":"I wrote a tutorial on this a while ago and still use this from time to time. Have a look; you might find what you need.\r\n\r\n[playing-with-sdcard-in-android][1]\r\n\r\nTry this:\r\n\r\nIf you don&#39;t want the directory to be listed, put files.add(file1[i]); line in the *else* block:\r\n\r\n    public class MainActivity extends ListActivity {\r\n\r\n        ArrayList&lt;File&gt; files = new ArrayList&lt;File&gt;();\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            File file[] = Environment.getExternalStorageDirectory().listFiles();\r\n            recursiveFileFind(file);\r\n\r\n            setListAdapter(new ArrayAdapter&lt;File&gt;(MainActivity.this,\r\n                    android.R.layout.simple_list_item_1, files));\r\n            Toast.makeText(this, &quot;&quot; + files.size(), Toast.LENGTH_LONG).show();\r\n        }\r\n\r\n        public void recursiveFileFind(File[] file1) {\r\n            int i = 0;\r\n            String filePath = &quot;&quot;;\r\n            if (file1 != null) {\r\n                while (i != file1.length) {\r\n                    filePath = file1[i].getAbsolutePath();\r\n                    files.add(file1[i]);\r\n                    if (file1[i].isDirectory()) {\r\n                        File file[] = file1[i].listFiles();\r\n                        recursiveFileFind(file);\r\n                    }\r\n                    else{\r\n                    }\r\n\r\n                    i++;\r\n                    Log.d(i + &quot;&quot;, filePath);\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n  [1]: http://saiful103a.wordpress.com/2011/09/13/playing-with-sdcard-in-android/\r\n\r\n\r\n\r\n\r\n","title":"How can I look up for all files in an Android device and put them in a list?","body":"<p>I wrote a tutorial on this a while ago and still use this from time to time. Have a look; you might find what you need.</p>\n<p><a href=\"http://saiful103a.wordpress.com/2011/09/13/playing-with-sdcard-in-android/\" rel=\"nofollow noreferrer\">playing-with-sdcard-in-android</a></p>\n<p>Try this:</p>\n<p>If you don't want the directory to be listed, put files.add(file1[i]); line in the <em>else</em> block:</p>\n<pre><code>public class MainActivity extends ListActivity {\n\n    ArrayList&lt;File&gt; files = new ArrayList&lt;File&gt;();\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        File file[] = Environment.getExternalStorageDirectory().listFiles();\n        recursiveFileFind(file);\n\n        setListAdapter(new ArrayAdapter&lt;File&gt;(MainActivity.this,\n                android.R.layout.simple_list_item_1, files));\n        Toast.makeText(this, &quot;&quot; + files.size(), Toast.LENGTH_LONG).show();\n    }\n\n    public void recursiveFileFind(File[] file1) {\n        int i = 0;\n        String filePath = &quot;&quot;;\n        if (file1 != null) {\n            while (i != file1.length) {\n                filePath = file1[i].getAbsolutePath();\n                files.add(file1[i]);\n                if (file1[i].isDirectory()) {\n                    File file[] = file1[i].listFiles();\n                    recursiveFileFind(file);\n                }\n                else{\n                }\n\n                i++;\n                Log.d(i + &quot;&quot;, filePath);\n            }\n        }\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":187320,"reputation":2598,"user_id":425280,"accept_rate":65,"display_name":"krammer"},"score":1,"creation_date":1380096421,"post_id":18998816,"comment_id":28068069,"body_markdown":"hmm..isn&#39;t that answer from the same link that I shared in the answer.","body":"hmm..isn&#39;t that answer from the same link that I shared in the answer."},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1672347112,"post_id":18998816,"comment_id":132273813,"body_markdown":"This isn&#39;t much more than a &quot;try this&quot; answer. What is the source?","body":"This isn&#39;t much more than a &quot;try this&quot; answer. What is the source?"}],"tags":[],"owner":{"account_id":3192300,"reputation":717,"user_id":2696292,"accept_rate":57,"display_name":"Mansour Fahad"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1672346940,"creation_date":1380094262,"answer_id":18998816,"question_id":18972788,"body_markdown":"Here is a solution found on the web:\r\n\r\n    public void walkdir(File dir) {\r\n\r\n        File[] listFile;\r\n        listFile = dir.listFiles();\r\n\r\n        if (listFile != null) {\r\n            for (int i = 0; i &lt; listFile.length; i++) {\r\n                if (listFile[i].isDirectory()) {\r\n                    walkdir(listFile[i]);\r\n                } else {\r\n                    if (listFile[i].getName().toLowerCase().endsWith(&quot;.pdf&quot;)) {\r\n                        files_list.add(listFile[i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nYou actually only need calling the method above with the parent directory that you want to start with. I recommend to put Environment.getExternalStorageDirectory() in the parent directory so it will not change with different devices.\r\n\r\n\r\n","title":"How can I look up for all files in an Android device and put them in a list?","body":"<p>Here is a solution found on the web:</p>\n<pre><code>public void walkdir(File dir) {\n\n    File[] listFile;\n    listFile = dir.listFiles();\n\n    if (listFile != null) {\n        for (int i = 0; i &lt; listFile.length; i++) {\n            if (listFile[i].isDirectory()) {\n                walkdir(listFile[i]);\n            } else {\n                if (listFile[i].getName().toLowerCase().endsWith(&quot;.pdf&quot;)) {\n                    files_list.add(listFile[i]);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>You actually only need calling the method above with the parent directory that you want to start with. I recommend to put Environment.getExternalStorageDirectory() in the parent directory so it will not change with different devices.</p>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1672347152,"post_id":37154494,"comment_id":132273831,"body_markdown":"Where was this copied from?","body":"Where was this copied from?"}],"tags":[],"owner":{"account_id":2161802,"reputation":153,"user_id":1915804,"display_name":"Monu Gupta"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1480496305,"creation_date":1462947602,"answer_id":37154494,"question_id":18972788,"body_markdown":"    public void Search_Dir(File dir) {\r\n\t\tString pdfPattern = &quot;.pdf&quot;;\r\n\r\n\t\tLog.d(&quot;check&quot;,\r\n\t\t\t\t&quot;Environment.getExternalStorageDirectory()------&quot;\r\n\t\t\t\t\t\t+ dir.getName());\r\n\r\n\t\tFile FileList[] = dir.listFiles();\r\n\t\tLog.d(&quot;check&quot;,\r\n\t\t\t\t&quot;filelist length---- &quot;\r\n\t\t\t\t\t\t+ FileList.length);\r\n\t\t\r\n\t\tif (FileList != null) {\r\n\t\t\tfor (int i = 0; i &lt; FileList.length; i++) {\r\n\r\n\t\t\t\tif (FileList[i].isDirectory()) {\r\n\t\t\t\t\tSearch_Dir(FileList[i]);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tLog.d(&quot;check&quot;,\r\n\t\t\t\t\t\t\t&quot;for check from .pdf---- &quot;\r\n\t\t\t\t\t\t\t\t\t+ FileList[i].getName());\r\n\t\t\t\t\tif (FileList[i].getName().endsWith(pdfPattern)) {\r\n\t\t\t\t\t\t// here you have that file.\r\n\t\t\t\t\t\tpdfArrayList.add(FileList[i].getPath());\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n","title":"How can I look up for all files in an Android device and put them in a list?","body":"<pre><code>public void Search_Dir(File dir) {\n    String pdfPattern = \".pdf\";\n\n    Log.d(\"check\",\n            \"Environment.getExternalStorageDirectory()------\"\n                    + dir.getName());\n\n    File FileList[] = dir.listFiles();\n    Log.d(\"check\",\n            \"filelist length---- \"\n                    + FileList.length);\n\n    if (FileList != null) {\n        for (int i = 0; i &lt; FileList.length; i++) {\n\n            if (FileList[i].isDirectory()) {\n                Search_Dir(FileList[i]);\n            } else {\n\n                Log.d(\"check\",\n                        \"for check from .pdf---- \"\n                                + FileList[i].getName());\n                if (FileList[i].getName().endsWith(pdfPattern)) {\n                    // here you have that file.\n                    pdfArrayList.add(FileList[i].getPath());\n\n                }\n            }\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":3192300,"reputation":717,"user_id":2696292,"accept_rate":57,"display_name":"Mansour Fahad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7557,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":18998816,"answer_count":7,"score":2,"last_activity_date":1672349649,"creation_date":1379995504,"question_id":18972788,"body_markdown":"I looking for help to list all files in Android external storage device. I want to look up in all the folders, including the subfolders for the main folder. Is there a way to this?\r\n\r\nI have worked on a basic one, but I still haven&#39;t got the desired result. It doesn&#39;t work.\r\n\r\nHere is my code:\r\n\r\n    File[] files_array;\r\n    files_array = new File(Environment.getExternalStorageDirectory().getAbsolutePath()).listFiles();\r\n\r\nThis method returns 0 size. What is the matter? This is my activity:\r\n\r\n    public class Main extends ListActivity {\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            List&lt;File&gt; files = getListFiles(Environment.getExternalStorageDirectory());\r\n            setListAdapter(new ArrayAdapter&lt;File&gt;(Main.this, android.R.layout.simple_list_item_1, files));\r\n            Toast.makeText(this, &quot;&quot; + files.size(), Toast.LENGTH_LONG).show();\r\n        }\r\n\r\n        private List&lt;File&gt; getListFiles(File parentDir) {\r\n            // On first call, parentDir is your sdcard root path\r\n            ArrayList&lt;File&gt; inFiles = new ArrayList&lt;File&gt;(); // Initialize an array list to store file names\r\n            File[] files = parentDir.listFiles(); // List all files in this directory\r\n            for (File file : files) {\r\n\r\n                if (file.isDirectory()) { // If the file is a directory\r\n                    inFiles.addAll(getListFiles(file)); // *** Call this recursively to get all lower level files ***\r\n                }\r\n            }\r\n            return inFiles;\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How can I look up for all files in an Android device and put them in a list?","body":"<p>I looking for help to list all files in Android external storage device. I want to look up in all the folders, including the subfolders for the main folder. Is there a way to this?</p>\n<p>I have worked on a basic one, but I still haven't got the desired result. It doesn't work.</p>\n<p>Here is my code:</p>\n<pre><code>File[] files_array;\nfiles_array = new File(Environment.getExternalStorageDirectory().getAbsolutePath()).listFiles();\n</code></pre>\n<p>This method returns 0 size. What is the matter? This is my activity:</p>\n<pre><code>public class Main extends ListActivity {\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        List&lt;File&gt; files = getListFiles(Environment.getExternalStorageDirectory());\n        setListAdapter(new ArrayAdapter&lt;File&gt;(Main.this, android.R.layout.simple_list_item_1, files));\n        Toast.makeText(this, &quot;&quot; + files.size(), Toast.LENGTH_LONG).show();\n    }\n\n    private List&lt;File&gt; getListFiles(File parentDir) {\n        // On first call, parentDir is your sdcard root path\n        ArrayList&lt;File&gt; inFiles = new ArrayList&lt;File&gt;(); // Initialize an array list to store file names\n        File[] files = parentDir.listFiles(); // List all files in this directory\n        for (File file : files) {\n\n            if (file.isDirectory()) { // If the file is a directory\n                inFiles.addAll(getListFiles(file)); // *** Call this recursively to get all lower level files ***\n            }\n        }\n        return inFiles;\n    }\n}\n</code></pre>\n"},{"tags":["java","unit-testing","mockito"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1672335875,"post_id":74954165,"comment_id":132271056,"body_markdown":"Can you show the signature of `subject#send`?","body":"Can you show the signature of <code>subject#send</code>?"},{"owner":{"account_id":20739568,"reputation":31,"user_id":15229614,"display_name":"stickboi"},"score":0,"creation_date":1672340865,"post_id":74954165,"comment_id":132272274,"body_markdown":"It takes in a single Object, which might explain why it can capture another class, but I&#39;m still not sure why it&#39;s not consistent between machines.","body":"It takes in a single Object, which might explain why it can capture another class, but I&#39;m still not sure why it&#39;s not consistent between machines."},{"owner":{"account_id":8739741,"reputation":6543,"user_id":6537157,"accept_rate":100,"display_name":"akop"},"score":0,"creation_date":1672350418,"post_id":74954165,"comment_id":132274529,"body_markdown":"What do you mean with &quot;it is not consistent&quot;?","body":"What do you mean with &quot;it is not consistent&quot;?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1672440975,"post_id":74954165,"comment_id":132292056,"body_markdown":"You need to describe the behaviour you are seeing in more detail, and show the code which calls `send`. You can also put a breakpoint on the call to `send` to see why it is being called with a value you don&#39;t expect.","body":"You need to describe the behaviour you are seeing in more detail, and show the code which calls <code>send</code>. You can also put a breakpoint on the call to <code>send</code> to see why it is being called with a value you don&#39;t expect."}],"answers":[{"tags":[],"owner":{"account_id":2673328,"reputation":1649,"user_id":2310221,"accept_rate":81,"display_name":"Markus"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672349182,"creation_date":1672349182,"answer_id":74956191,"question_id":74954165,"body_markdown":"Unfortunately, there is no type check in the `ArgumentCaptor`:\r\n\r\n&gt; This utility class *don&#39;t do any type checks*, the generic signatures are only there to avoid casting in your code.\r\n\r\n**Source:** https://site.mockito.org/javadoc/current/org/mockito/ArgumentCaptor.html","title":"ArgumentCaptor is ignoring class type","body":"<p>Unfortunately, there is no type check in the <code>ArgumentCaptor</code>:</p>\n<blockquote>\n<p>This utility class <em>don't do any type checks</em>, the generic signatures are only there to avoid casting in your code.</p>\n</blockquote>\n<p><strong>Source:</strong> <a href=\"https://site.mockito.org/javadoc/current/org/mockito/ArgumentCaptor.html\" rel=\"nofollow noreferrer\">https://site.mockito.org/javadoc/current/org/mockito/ArgumentCaptor.html</a></p>\n"}],"owner":{"account_id":20739568,"reputation":31,"user_id":15229614,"display_name":"stickboi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":186,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672349182,"creation_date":1672334320,"question_id":74954165,"body_markdown":"I&#39;m using an ArgumentCaptor in a test, but the class passed into the argument capture is different from the class that is actually being captured. The behavior is very inconsistent, on some machines it will throw an exception (which I would expect it to do), and on others it simply captures the object and continues.\r\n\r\nHere&#39;s an example, where ClassOne is being passed into the ArgumentCaptor, but an instance of ClassTwo is being captured. ClassOne and ClassTwo are completely independent, nothing is extending the other:\r\n\r\n```\r\nClassTwo expected = ClassTwo.builder().build();\r\nArgumentCaptor&lt;ClassOne&gt; captor = ArgumentCaptor.forClass(ClassOne.class);\r\nverify(subject).send(argumentCaptor.capture());\r\nassertThat(captor.getValue()).usingRecursiveComparison().isEqualTo(expected);\r\n```\r\n\r\nDoes anyone know why this is happening? And even more, why do we get different behavior between different machines?","title":"ArgumentCaptor is ignoring class type","body":"<p>I'm using an ArgumentCaptor in a test, but the class passed into the argument capture is different from the class that is actually being captured. The behavior is very inconsistent, on some machines it will throw an exception (which I would expect it to do), and on others it simply captures the object and continues.</p>\n<p>Here's an example, where ClassOne is being passed into the ArgumentCaptor, but an instance of ClassTwo is being captured. ClassOne and ClassTwo are completely independent, nothing is extending the other:</p>\n<pre><code>ClassTwo expected = ClassTwo.builder().build();\nArgumentCaptor&lt;ClassOne&gt; captor = ArgumentCaptor.forClass(ClassOne.class);\nverify(subject).send(argumentCaptor.capture());\nassertThat(captor.getValue()).usingRecursiveComparison().isEqualTo(expected);\n</code></pre>\n<p>Does anyone know why this is happening? And even more, why do we get different behavior between different machines?</p>\n"},{"tags":["java","swing","swingbuilder"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1672349290,"post_id":74956110,"comment_id":132274290,"body_markdown":"Create valid `Product`, `Store`, and `Manager` classes.  Create an additional `Region` model class that holds a `java.util.List` of `Store` instances.  Each `Store` instance would contain a `List` of `Manager` instances.  Each `Store` instance would contain a `List` of `Product` instances.  You can have multiple controller classes in a Java Swing project.  Each `ActionListener` modifies its part of the model and repaints its part of the view.","body":"Create valid <code>Product</code>, <code>Store</code>, and <code>Manager</code> classes.  Create an additional <code>Region</code> model class that holds a <code>java.util.List</code> of <code>Store</code> instances.  Each <code>Store</code> instance would contain a <code>List</code> of <code>Manager</code> instances.  Each <code>Store</code> instance would contain a <code>List</code> of <code>Product</code> instances.  You can have multiple controller classes in a Java Swing project.  Each <code>ActionListener</code> modifies its part of the model and repaints its part of the view."}],"owner":{"account_id":26216381,"reputation":45,"user_id":19894458,"display_name":"Cornel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672348421,"creation_date":1672348421,"question_id":74956110,"body_markdown":"I am creating an app in Java and I am using the MVC architecture. I have the Model, View and Controller classes, and I have also another classes that help me with data. For example, I have the \r\nnext classes: Product, Store, Manager. How can I use the data in the Model class, I tried to copy paste my Classes and my code from main file, but all I have are errors. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nIn the second image I have the problems, the Model class. I really do not know what to do to make it work.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QnZ5G.png\r\n  [2]: https://i.stack.imgur.com/sZi3G.png","title":"How can I use multiple classes in Model - MVC Java?","body":"<p>I am creating an app in Java and I am using the MVC architecture. I have the Model, View and Controller classes, and I have also another classes that help me with data. For example, I have the\nnext classes: Product, Store, Manager. How can I use the data in the Model class, I tried to copy paste my Classes and my code from main file, but all I have are errors.</p>\n<p><a href=\"https://i.stack.imgur.com/QnZ5G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QnZ5G.png\" alt=\"enter image description here\" /></a></p>\n<p>In the second image I have the problems, the Model class. I really do not know what to do to make it work.</p>\n<p><a href=\"https://i.stack.imgur.com/sZi3G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sZi3G.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","validation","controller"],"comments":[{"owner":{"account_id":1476785,"reputation":1621,"user_id":1386990,"accept_rate":57,"display_name":"Toseef Zafar"},"score":0,"creation_date":1439852581,"post_id":27111806,"comment_id":52020691,"body_markdown":"Hi, I have got a similar case but in my case the @NotEmpty is also not working. can you please let me know if I need to configure other than this all above?","body":"Hi, I have got a similar case but in my case the @NotEmpty is also not working. can you please let me know if I need to configure other than this all above?"}],"answers":[{"comments":[{"owner":{"account_id":2787313,"reputation":701,"user_id":2398350,"accept_rate":50,"display_name":"The Nightmare"},"score":0,"creation_date":1416855662,"post_id":27112083,"comment_id":42727224,"body_markdown":"I added `@NotBlank` and `@Valid` work. Why `@NotNull` is not sufficient?","body":"I added <code>@NotBlank</code> and <code>@Valid</code> work. Why <code>@NotNull</code> is not sufficient?"},{"owner":{"account_id":1351713,"reputation":33846,"user_id":1291150,"display_name":"Bohuslav Burghardt"},"score":2,"creation_date":1416855843,"post_id":27112083,"comment_id":42727316,"body_markdown":"I don&#39;t see a question mark but I assume that the last part is a question :). `@NotNull` only checks if the value is not `null`, but the value you get from the form is actually `&quot;&quot;`, meaning String instance with length 0, which is not `null`. Hope this explains it","body":"I don&#39;t see a question mark but I assume that the last part is a question :). <code>@NotNull</code> only checks if the value is not <code>null</code>, but the value you get from the form is actually <code>&quot;&quot;</code>, meaning String instance with length 0, which is not <code>null</code>. Hope this explains it"}],"tags":[],"owner":{"account_id":1351713,"reputation":33846,"user_id":1291150,"display_name":"Bohuslav Burghardt"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1416856229,"creation_date":1416855223,"answer_id":27112083,"question_id":27111806,"body_markdown":"Are you sure that the validations don&#39;t work? Unless you have for example [`StringTrimmerEditor`][1] registered, your fields will actually be String instances with length equal to 0, not `null` values when you submit the form and therefore the annotation would consider such values to be valid.\r\n\r\nIf you want to validate that String is not blank (not null and not an empty String), use for instance the [`@NotBlank`][2] annotation. Also I just tried it myself and the `@Email` annotation also passes for empty Strings, which would mean that your empty form IS actually valid right now.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/beans/propertyeditors/StringTrimmerEditor.html\r\n  [2]: http://docs.jboss.org/hibernate/validator/4.1/api/org/hibernate/validator/constraints/NotBlank.html","title":"Validation form in Spring using @Valid not work","body":"<p>Are you sure that the validations don't work? Unless you have for example <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/beans/propertyeditors/StringTrimmerEditor.html\" rel=\"noreferrer\"><code>StringTrimmerEditor</code></a> registered, your fields will actually be String instances with length equal to 0, not <code>null</code> values when you submit the form and therefore the annotation would consider such values to be valid.</p>\n\n<p>If you want to validate that String is not blank (not null and not an empty String), use for instance the <a href=\"http://docs.jboss.org/hibernate/validator/4.1/api/org/hibernate/validator/constraints/NotBlank.html\" rel=\"noreferrer\"><code>@NotBlank</code></a> annotation. Also I just tried it myself and the <code>@Email</code> annotation also passes for empty Strings, which would mean that your empty form IS actually valid right now.</p>\n"},{"comments":[{"owner":{"account_id":3724813,"reputation":1028,"user_id":3098962,"accept_rate":86,"display_name":"Anurag"},"score":0,"creation_date":1462628740,"post_id":37089075,"comment_id":61722454,"body_markdown":"You don&#39;t need a code snippet to put a one liner code suggestion. This is misleading to the reader and they will run thinking it will produce a result but here it is just a single code which can be formatted as a code sample instead.","body":"You don&#39;t need a code snippet to put a one liner code suggestion. This is misleading to the reader and they will run thinking it will produce a result but here it is just a single code which can be formatted as a code sample instead."}],"tags":[],"owner":{"account_id":8397457,"reputation":1,"user_id":6304023,"display_name":"Munna kumar patra"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1462634781,"creation_date":1462627236,"answer_id":37089075,"question_id":27111806,"body_markdown":"&lt;!-- begin snippet: js hide: false --&gt;\r\n\r\n    &lt;mvc:annotation-driven/&gt;\r\n\r\ncheck whether above tag is declared within dispatcher-servlet.xml or not. This tag will be active all annotation.\r\n","title":"Validation form in Spring using @Valid not work","body":"\n\n<pre><code>&lt;mvc:annotation-driven/&gt;\n</code></pre>\n\n<p>check whether above tag is declared within dispatcher-servlet.xml or not. This tag will be active all annotation.</p>\n"},{"tags":[],"owner":{"account_id":6800501,"reputation":126,"user_id":5233957,"display_name":"Derek J."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524408706,"creation_date":1524408706,"answer_id":49967252,"question_id":27111806,"body_markdown":"Today (2018-04-22), the **hibernate-validator** have been update to version **6.0.9.Final** . On my test, I found the nested object valid using **@Valid** can be work &lt;= version **5.2.5.Final**, I don&#39;t understand why the latest can&#39;t  working (maybe someone can explain in future), here is my code:\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class PackQueryReq {\r\n        \t\r\n        // ......\r\n        \r\n        @NotNull(message = &quot;params can&#39;t be NULL&quot;)\r\n        @Valid\r\n        private PackQueryParams params;\r\n    }\r\n    public class PackQueryParams {\r\n\t\r\n\t    @Min(value=1)\r\n\t    @NotNull(message = &quot;enterpriseId can&#39;t be NULL&quot;)\r\n\t    private Integer enterpriseId;\r\n    }\r\n\r\nAnd on spring MVC controller:\r\n\r\n    public Resp query(@RequestBody @Valid PackQueryReq packQuery) {\r\n       //...\r\n    }","title":"Validation form in Spring using @Valid not work","body":"<p>Today (2018-04-22), the <strong>hibernate-validator</strong> have been update to version <strong>6.0.9.Final</strong> . On my test, I found the nested object valid using <strong>@Valid</strong> can be work &lt;= version <strong>5.2.5.Final</strong>, I don't understand why the latest can't  working (maybe someone can explain in future), here is my code:</p>\n\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic class PackQueryReq {\n\n    // ......\n\n    @NotNull(message = \"params can't be NULL\")\n    @Valid\n    private PackQueryParams params;\n}\npublic class PackQueryParams {\n\n    @Min(value=1)\n    @NotNull(message = \"enterpriseId can't be NULL\")\n    private Integer enterpriseId;\n}\n</code></pre>\n\n<p>And on spring MVC controller:</p>\n\n<pre><code>public Resp query(@RequestBody @Valid PackQueryReq packQuery) {\n   //...\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5775794,"reputation":1349,"user_id":4557882,"display_name":"Muhammad Muzammil"},"score":1,"creation_date":1590665258,"post_id":61897103,"comment_id":109768427,"body_markdown":"Yeah before importing starter-validation compiler was showing issues and now everything is fine for compiler but it still isn&#39;t working. Showing zero errors in `Error` object","body":"Yeah before importing starter-validation compiler was showing issues and now everything is fine for compiler but it still isn&#39;t working. Showing zero errors in <code>Error</code> object"},{"owner":{"account_id":1340131,"reputation":276,"user_id":1281970,"accept_rate":32,"display_name":"irshad.ahmad"},"score":1,"creation_date":1591387634,"post_id":61897103,"comment_id":110047785,"body_markdown":"this should be the accepted answer, thanks for sharing","body":"this should be the accepted answer, thanks for sharing"},{"owner":{"account_id":298675,"reputation":165,"user_id":604811,"display_name":"Kevin-Prichard"},"score":1,"creation_date":1612978637,"post_id":61897103,"comment_id":116936874,"body_markdown":"True @irshad.ahmad, and I suspect most people in 2021 arriving at this post will find it&#39;s due to missing this dependency. Is it possible to change the accepted answer, @the-nightmare?","body":"True @irshad.ahmad, and I suspect most people in 2021 arriving at this post will find it&#39;s due to missing this dependency. Is it possible to change the accepted answer, @the-nightmare?"}],"tags":[],"owner":{"account_id":8591675,"reputation":897,"user_id":6436078,"accept_rate":100,"display_name":"ntholi"},"comment_count":3,"down_vote_count":0,"up_vote_count":51,"is_accepted":false,"score":51,"last_activity_date":1589909023,"creation_date":1589909023,"answer_id":61897103,"question_id":27111806,"body_markdown":"After upgrading my project to Spring Boot 2.3.0, I struggled for hours with the same issue until I realized that as of [#19550][1], Web and WebFlux starters do not depend on the validation starter by default anymore. If your application is using validation features, you’ll need to manually add back a dependency on `spring-boot-starter-validation` in your build file.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/issues/19550","title":"Validation form in Spring using @Valid not work","body":"<p>After upgrading my project to Spring Boot 2.3.0, I struggled for hours with the same issue until I realized that as of <a href=\"https://github.com/spring-projects/spring-boot/issues/19550\" rel=\"noreferrer\">#19550</a>, Web and WebFlux starters do not depend on the validation starter by default anymore. If your application is using validation features, you’ll need to manually add back a dependency on <code>spring-boot-starter-validation</code> in your build file.</p>\n"},{"tags":[],"owner":{"account_id":9870726,"reputation":101,"user_id":8085812,"display_name":"j.Frederic"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1610574997,"creation_date":1610574997,"answer_id":65710362,"question_id":27111806,"body_markdown":"I struggled with the same issue in my Spring Boot 2.4.1 project. You&#39;ll need to add this dependency in your pom.xml file\r\n\r\n ```\r\n...\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n...\r\n```","title":"Validation form in Spring using @Valid not work","body":"<p>I struggled with the same issue in my Spring Boot 2.4.1 project. You'll need to add this dependency in your pom.xml file</p>\n<pre><code>...\n&lt;dependency&gt;\n &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3598755,"reputation":171,"user_id":3002618,"display_name":"andrecoweb"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1612805559,"creation_date":1612731830,"answer_id":66093090,"question_id":27111806,"body_markdown":"I had the same error (the application did not validate).\r\n\r\nI added\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nand worked!","title":"Validation form in Spring using @Valid not work","body":"<p>I had the same error (the application did not validate).</p>\n<p>I added</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>and worked!</p>\n"},{"tags":[],"owner":{"account_id":21103523,"reputation":221,"user_id":15512979,"display_name":"Poulami Pal"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1617099559,"creation_date":1617099559,"answer_id":66869068,"question_id":27111806,"body_markdown":"I had the same issue with 2.5.0 (SNAPSHOT) spring boot project. I added the below dependency in the pom.xml file and it worked.\r\n\r\n```\r\n&lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Validation form in Spring using @Valid not work","body":"<p>I had the same issue with 2.5.0 (SNAPSHOT) spring boot project. I added the below dependency in the pom.xml file and it worked.</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":18476555,"reputation":517,"user_id":13459947,"display_name":"Violetta"},"score":0,"creation_date":1667680863,"post_id":73529718,"comment_id":131225787,"body_markdown":"Thanks, this helped me for my kotlin project","body":"Thanks, this helped me for my kotlin project"},{"owner":{"account_id":18102532,"reputation":315,"user_id":13160199,"display_name":"Lav&#237;nia Beghini"},"score":1,"creation_date":1683229151,"post_id":73529718,"comment_id":134338958,"body_markdown":"Uau I cannot thank you enough! I tested every other option for Java projects before I found this. Awesome!","body":"Uau I cannot thank you enough! I tested every other option for Java projects before I found this. Awesome!"}],"tags":[],"owner":{"account_id":123192,"reputation":13668,"user_id":317522,"accept_rate":11,"display_name":"Paulo Merson"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1661780285,"creation_date":1661780285,"answer_id":73529718,"question_id":27111806,"body_markdown":"I had the same problem in **Kotlin** with old beans automatically converted from Java. They were missing the [`field` target specifier][1], without which the `javax.validation` annotations had no effect. \r\n\r\nA Kotlin snippet from the question code (with `field` to solve the problem):\r\n```\r\n@field:NotNull\r\n@field:Size(max = 20)\r\n@Column(name = &quot;username&quot;)\r\nvar username:  String\r\n``` \r\n\r\n\r\n  [1]: https://kotlinlang.org/docs/annotations.html#annotation-use-site-targets","title":"Validation form in Spring using @Valid not work","body":"<p>I had the same problem in <strong>Kotlin</strong> with old beans automatically converted from Java. They were missing the <a href=\"https://kotlinlang.org/docs/annotations.html#annotation-use-site-targets\" rel=\"noreferrer\"><code>field</code> target specifier</a>, without which the <code>javax.validation</code> annotations had no effect.</p>\n<p>A Kotlin snippet from the question code (with <code>field</code> to solve the problem):</p>\n<pre><code>@field:NotNull\n@field:Size(max = 20)\n@Column(name = &quot;username&quot;)\nvar username:  String\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22326816,"reputation":41,"user_id":16548722,"display_name":"Spilvergo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672347734,"creation_date":1672347734,"answer_id":74956032,"question_id":27111806,"body_markdown":"I had to change the version of hibernate-validator. With 8.0.0 does not work, but with 6.1.5 does.\r\n\r\n    \t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n            &lt;version&gt;6.1.5.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;","title":"Validation form in Spring using @Valid not work","body":"<p>I had to change the version of hibernate-validator. With 8.0.0 does not work, but with 6.1.5 does.</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n        &lt;version&gt;6.1.5.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":2787313,"reputation":701,"user_id":2398350,"accept_rate":50,"display_name":"The Nightmare"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41232,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":27112083,"answer_count":9,"score":16,"last_activity_date":1672347734,"creation_date":1416854176,"question_id":27111806,"body_markdown":"I want to validation my form, but this not work.\r\nMy entity class\r\n\r\n    import java.io.Serializable;\r\n    import java.util.Set;\r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.OneToMany;\r\n    import javax.persistence.Table;\r\n    import javax.validation.constraints.NotNull;\r\n    import javax.validation.constraints.Size;\r\n    \r\n    import org.hibernate.validator.constraints.Email;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;users&quot;)\r\n    public class User implements Serializable {\r\n    \r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \t@Id\r\n    \t@GeneratedValue\r\n    \t@Column(name = &quot;id&quot;)\r\n    \tprivate Integer id;\r\n    \t@NotNull\r\n    \t@Size(max = 20)\r\n    \t@Column(name = &quot;username&quot;)\r\n    \tprivate String username;\r\n    \t@NotNull\r\n    \t@Size(max = 20)\r\n    \t@Column(name = &quot;password&quot;)\r\n    \tprivate String password;\r\n    \t@NotNull\r\n    \t@Size(max = 20)\r\n    \t@Column(name = &quot;firstName&quot;)\r\n    \tprivate String firstName;\r\n    \t@NotNull\r\n    \t@Size(max = 20)\r\n    \t@Column(name = &quot;lastName&quot;)\r\n    \tprivate String lastName;\r\n    \t@Size(min = 11, max = 11)\r\n    \t@Column(name = &quot;personalId&quot;)\r\n    \tprivate String personalId;\r\n    \t@Size(max = 40)\r\n    \t@Column(name = &quot;city&quot;)\r\n    \tprivate String city;\r\n    \t@Size(max = 40)\r\n    \t@Column(name = &quot;address&quot;)\r\n    \tprivate String address;\r\n    \t@NotNull\r\n    \t@Email\r\n    \t@Size(max = 30)\r\n    \t@Column(name = &quot;email&quot;)\r\n    \tprivate String email;\r\n    \t@Size(min = 9, max = 9)\r\n    \t@Column(name = &quot;phone&quot;)\r\n    \tprivate String phone;\r\n    \t@OneToMany(mappedBy = &quot;user&quot;)\r\n    \tprivate Set&lt;UserRole&gt; userRoleSet;\r\n    }\r\n\r\nadminList.jsp and form go to addAdmin page:\r\n\r\n    &lt;form action=&quot;addAdminForm&quot; method=&quot;post&quot;&gt;\r\n\t\t&lt;input type=&quot;submit&quot; value=&quot;Dodaj administratora&quot; /&gt;\r\n\t&lt;/form&gt;\r\n\r\naddAdmin.jsp page formule:\r\n\r\n    \t&lt;form:form action=&quot;addAdmin&quot; modelAttribute=&quot;user&quot; method=&quot;post&quot;&gt;\r\n\t\t&lt;form:label path=&quot;username&quot;&gt;Login: &lt;/form:label&gt;\r\n\t\t&lt;form:input path=&quot;username&quot; /&gt;\r\n\t\t&lt;form:errors path=&quot;username&quot; cssClass=&quot;error&quot; /&gt;\r\n\t\t&lt;br /&gt;\r\n\t\t&lt;form:label path=&quot;password&quot;&gt;Hasło: &lt;/form:label&gt;\r\n\t\t&lt;form:password path=&quot;password&quot; /&gt;\r\n\t\t&lt;form:errors path=&quot;password&quot; cssClass=&quot;error&quot; /&gt;\r\n\t\t&lt;br /&gt;\r\n\t\t&lt;form:label path=&quot;firstName&quot;&gt;Imię: &lt;/form:label&gt;\r\n\t\t&lt;form:input path=&quot;firstName&quot; /&gt;\r\n\t\t&lt;form:errors path=&quot;firstName&quot; cssClass=&quot;error&quot; /&gt;\r\n\t\t&lt;br /&gt;\r\n\t\t&lt;form:label path=&quot;lastName&quot;&gt;Nazwisko: &lt;/form:label&gt;\r\n\t\t&lt;form:input path=&quot;lastName&quot; /&gt;\r\n\t\t&lt;form:errors path=&quot;lastName&quot; cssClass=&quot;error&quot; /&gt;\r\n\t\t&lt;br /&gt;\r\n\t\t&lt;form:label path=&quot;email&quot;&gt;Email: &lt;/form:label&gt;\r\n\t\t&lt;form:input path=&quot;email&quot; /&gt;\r\n\t\t&lt;form:errors path=&quot;email&quot; cssClass=&quot;error&quot; /&gt;\r\n\t\t&lt;br /&gt;\r\n\t\t&lt;input type=&quot;submit&quot; value=&quot;Dodaj&quot; /&gt;\r\n\t&lt;/form:form&gt;\r\n\r\nController:\r\n\r\n    \t@RequestMapping(value = &quot;/admin/addAdminForm&quot;, method = RequestMethod.POST)\r\n\tpublic ModelAndView goAddAdminForm() {\r\n\t\tModelAndView mav = new ModelAndView(&quot;admin/addadmin&quot;);\r\n\t\tmav.addObject(&quot;user&quot;, new User());\r\n\t\treturn mav;\r\n\t}\r\n\r\n\t@RequestMapping(value = &quot;/admin/addAdmin&quot;, method = RequestMethod.POST)\r\n\tpublic String addAdmin(@Valid @ModelAttribute(&quot;user&quot;) User user,\r\n\t\t\tBindingResult result, Model model) {\r\n\t\tif (result.hasErrors()) {\r\n\t\t\treturn &quot;admin/addadmin&quot;;\r\n\t\t} else {\r\n\t\t\tuserService.createUser(user);\r\n\t\t\tuser = userService.findByUsername(user.getUsername());\r\n\t\t\tUserRole userRole = new UserRole(&quot;ROLE_ADMIN&quot;);\r\n\t\t\tuserRole.setUser(user);\r\n\t\t\tuserRoleService.createUserRole(userRole);\r\n\t\t\treturn &quot;redirect:/admin/adminlist&quot;;\r\n\t\t}\r\n\t}\r\n\r\nWhen i try send empty formule i should get error messages `result.hasErrors()` not return error and my application go to else and try save user. Why @Valid not work?","title":"Validation form in Spring using @Valid not work","body":"<p>I want to validation my form, but this not work.\nMy entity class</p>\n\n<pre><code>import java.io.Serializable;\nimport java.util.Set;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\nimport javax.persistence.OneToMany;\nimport javax.persistence.Table;\nimport javax.validation.constraints.NotNull;\nimport javax.validation.constraints.Size;\n\nimport org.hibernate.validator.constraints.Email;\n\n@Entity\n@Table(name = \"users\")\npublic class User implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n    @Id\n    @GeneratedValue\n    @Column(name = \"id\")\n    private Integer id;\n    @NotNull\n    @Size(max = 20)\n    @Column(name = \"username\")\n    private String username;\n    @NotNull\n    @Size(max = 20)\n    @Column(name = \"password\")\n    private String password;\n    @NotNull\n    @Size(max = 20)\n    @Column(name = \"firstName\")\n    private String firstName;\n    @NotNull\n    @Size(max = 20)\n    @Column(name = \"lastName\")\n    private String lastName;\n    @Size(min = 11, max = 11)\n    @Column(name = \"personalId\")\n    private String personalId;\n    @Size(max = 40)\n    @Column(name = \"city\")\n    private String city;\n    @Size(max = 40)\n    @Column(name = \"address\")\n    private String address;\n    @NotNull\n    @Email\n    @Size(max = 30)\n    @Column(name = \"email\")\n    private String email;\n    @Size(min = 9, max = 9)\n    @Column(name = \"phone\")\n    private String phone;\n    @OneToMany(mappedBy = \"user\")\n    private Set&lt;UserRole&gt; userRoleSet;\n}\n</code></pre>\n\n<p>adminList.jsp and form go to addAdmin page:</p>\n\n<pre><code>&lt;form action=\"addAdminForm\" method=\"post\"&gt;\n    &lt;input type=\"submit\" value=\"Dodaj administratora\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>addAdmin.jsp page formule:</p>\n\n<pre><code>    &lt;form:form action=\"addAdmin\" modelAttribute=\"user\" method=\"post\"&gt;\n    &lt;form:label path=\"username\"&gt;Login: &lt;/form:label&gt;\n    &lt;form:input path=\"username\" /&gt;\n    &lt;form:errors path=\"username\" cssClass=\"error\" /&gt;\n    &lt;br /&gt;\n    &lt;form:label path=\"password\"&gt;Hasło: &lt;/form:label&gt;\n    &lt;form:password path=\"password\" /&gt;\n    &lt;form:errors path=\"password\" cssClass=\"error\" /&gt;\n    &lt;br /&gt;\n    &lt;form:label path=\"firstName\"&gt;Imię: &lt;/form:label&gt;\n    &lt;form:input path=\"firstName\" /&gt;\n    &lt;form:errors path=\"firstName\" cssClass=\"error\" /&gt;\n    &lt;br /&gt;\n    &lt;form:label path=\"lastName\"&gt;Nazwisko: &lt;/form:label&gt;\n    &lt;form:input path=\"lastName\" /&gt;\n    &lt;form:errors path=\"lastName\" cssClass=\"error\" /&gt;\n    &lt;br /&gt;\n    &lt;form:label path=\"email\"&gt;Email: &lt;/form:label&gt;\n    &lt;form:input path=\"email\" /&gt;\n    &lt;form:errors path=\"email\" cssClass=\"error\" /&gt;\n    &lt;br /&gt;\n    &lt;input type=\"submit\" value=\"Dodaj\" /&gt;\n&lt;/form:form&gt;\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>    @RequestMapping(value = \"/admin/addAdminForm\", method = RequestMethod.POST)\npublic ModelAndView goAddAdminForm() {\n    ModelAndView mav = new ModelAndView(\"admin/addadmin\");\n    mav.addObject(\"user\", new User());\n    return mav;\n}\n\n@RequestMapping(value = \"/admin/addAdmin\", method = RequestMethod.POST)\npublic String addAdmin(@Valid @ModelAttribute(\"user\") User user,\n        BindingResult result, Model model) {\n    if (result.hasErrors()) {\n        return \"admin/addadmin\";\n    } else {\n        userService.createUser(user);\n        user = userService.findByUsername(user.getUsername());\n        UserRole userRole = new UserRole(\"ROLE_ADMIN\");\n        userRole.setUser(user);\n        userRoleService.createUserRole(userRole);\n        return \"redirect:/admin/adminlist\";\n    }\n}\n</code></pre>\n\n<p>When i try send empty formule i should get error messages <code>result.hasErrors()</code> not return error and my application go to else and try save user. Why @Valid not work?</p>\n"},{"tags":["java","jsf"],"comments":[{"owner":{"account_id":1133938,"reputation":4722,"user_id":1119400,"accept_rate":79,"display_name":"Adrian Mitev"},"score":1,"creation_date":1350726814,"post_id":12986234,"comment_id":17616306,"body_markdown":"Looks like you&#39;re passing a wrong path.","body":"Looks like you&#39;re passing a wrong path."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1452549770,"post_id":12986234,"comment_id":57210203,"body_markdown":"You may try to check out this answer [Here](http://stackoverflow.com/a/34731952/912829)","body":"You may try to check out this answer <a href=\"http://stackoverflow.com/a/34731952/912829\">Here</a>"},{"owner":{"account_id":1003835,"reputation":1376,"user_id":1018075,"accept_rate":74,"display_name":"Mdhar9e"},"score":4,"creation_date":1461083981,"post_id":12986234,"comment_id":61033231,"body_markdown":"Create `Bundle.properties` file in your location: `src/main/webapp/WEB-INF/classes`.","body":"Create <code>Bundle.properties</code> file in your location: <code>src&#47;main&#47;webapp&#47;WEB-INF&#47;classes</code>."},{"owner":{"account_id":1750515,"reputation":6073,"user_id":1599699,"accept_rate":80,"display_name":"Andrew"},"score":0,"creation_date":1507309000,"post_id":12986234,"comment_id":80172918,"body_markdown":"https://stackoverflow.com/q/2668161/1599699","body":"<a href=\"https://stackoverflow.com/q/2668161/1599699\">stackoverflow.com/q/2668161/1599699</a>"},{"owner":{"account_id":1902705,"reputation":3125,"user_id":1718223,"accept_rate":71,"display_name":"abbasalim"},"score":1,"creation_date":1535991920,"post_id":12986234,"comment_id":91257054,"body_markdown":"Try creating a resources folder on this path src/main/resources and then put or get your files from there by using ResourceBundle on Android.\nhttps://stackoverflow.com/a/44452218/1718223","body":"Try creating a resources folder on this path src/main/resources and then put or get your files from there by using ResourceBundle on Android. <a href=\"https://stackoverflow.com/a/44452218/1718223\">stackoverflow.com/a/44452218/1718223</a>"},{"owner":{"account_id":2389551,"reputation":40481,"user_id":2089675,"accept_rate":80,"display_name":"smac89"},"score":0,"creation_date":1575189049,"post_id":12986234,"comment_id":104476622,"body_markdown":"Was getting this error when running intellij community version 2019.3. The solution was to downgrade.","body":"Was getting this error when running intellij community version 2019.3. The solution was to downgrade."},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1584654751,"post_id":12986234,"comment_id":107510977,"body_markdown":"I have to seriously advise to neither massage exceptions, nor pay attention when such is shown.","body":"I have to seriously advise to neither massage exceptions, nor pay attention when such is shown."}],"answers":[{"comments":[{"owner":{"account_id":4919933,"reputation":448,"user_id":3962763,"display_name":"Dasun Nirmitha"},"score":1,"creation_date":1591112453,"post_id":12988540,"comment_id":109929106,"body_markdown":"As also mentioned here, if you&#39;re on a Maven project manually create a new &quot;resources&quot; folder inside src/main/ and put all your resources inside it. Clean -&gt; Build and run the project again resources will get picked up.","body":"As also mentioned here, if you&#39;re on a Maven project manually create a new &quot;resources&quot; folder inside src/main/ and put all your resources inside it. Clean -&gt; Build and run the project again resources will get picked up."}],"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":1,"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1486539362,"creation_date":1350736898,"answer_id":12988540,"question_id":12986234,"body_markdown":"The exception is telling that a `Bundle_en_US.properties`, or `Bundle_en.properties`, or at least `Bundle.properties` file is expected in the root of the classpath, but there is actually none.\n\nMake sure that at least one of the mentioned files is present in the root of the classpath. Or, make sure that you provide the proper bundle name. For example, if the bundle files are actually been placed in the package `com.example.i18n`, then you need to pass `com.example.i18n.Bundle` as bundle name instead of `Bundle`.\n\nIn case you&#39;re using Eclipse &quot;Dynamic Web Project&quot;, the classpath root is represented by `src` folder, there where all your Java packages are. In case you&#39;re using a Maven project, the classpath root for resource files is represented by `src/main/resources` folder.\n\n### See also:\n\n- https://stackoverflow.com/questions/13540907/maven-and-jsf-webapp-structure-where-exactly-to-put-jsf-resources","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>The exception is telling that a <code>Bundle_en_US.properties</code>, or <code>Bundle_en.properties</code>, or at least <code>Bundle.properties</code> file is expected in the root of the classpath, but there is actually none.</p>\n<p>Make sure that at least one of the mentioned files is present in the root of the classpath. Or, make sure that you provide the proper bundle name. For example, if the bundle files are actually been placed in the package <code>com.example.i18n</code>, then you need to pass <code>com.example.i18n.Bundle</code> as bundle name instead of <code>Bundle</code>.</p>\n<p>In case you're using Eclipse &quot;Dynamic Web Project&quot;, the classpath root is represented by <code>src</code> folder, there where all your Java packages are. In case you're using a Maven project, the classpath root for resource files is represented by <code>src/main/resources</code> folder.</p>\n<h3>See also:</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/13540907/maven-and-jsf-webapp-structure-where-exactly-to-put-jsf-resources\">Maven and JSF webapp structure, where exactly to put JSF resources</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":486024,"reputation":641,"user_id":902678,"accept_rate":62,"display_name":"demonz demonz"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1355869562,"creation_date":1355869562,"answer_id":13942527,"question_id":12986234,"body_markdown":"I had the same problemo, and balus solution fixed it.\r\n\r\nFor the record:\r\n\r\nWEB-INF\\faces-config is\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;faces-config\r\n    xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee \r\n    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd&quot;\r\n    version=&quot;2.0&quot;&gt;\r\n        &lt;application&gt;\r\n            &lt;locale-config&gt;\r\n                &lt;default-locale&gt;en&lt;/default-locale&gt;\r\n            &lt;/locale-config&gt;\r\n            &lt;message-bundle&gt;\r\n                Message\r\n            &lt;/message-bundle&gt;\r\n        &lt;/application&gt;\r\n    &lt;/faces-config&gt;\r\n\r\nAnd had Message.properties under WebContent\\Resources (after mkyong&#39;s tutorial)\r\n\r\nthe pesky exception appeared even when i renamed the bundle to &quot;Message_en_us&quot; and &quot;Message_en&quot;. Moving it to src\\ worked. \r\n\r\nShould someone post the missing piece to make bundles work under resources,it would be a beautiful thing.\r\n","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>I had the same problemo, and balus solution fixed it.</p>\n\n<p>For the record:</p>\n\n<p>WEB-INF\\faces-config is</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;faces-config\nxmlns=\"http://java.sun.com/xml/ns/javaee\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee \nhttp://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd\"\nversion=\"2.0\"&gt;\n    &lt;application&gt;\n        &lt;locale-config&gt;\n            &lt;default-locale&gt;en&lt;/default-locale&gt;\n        &lt;/locale-config&gt;\n        &lt;message-bundle&gt;\n            Message\n        &lt;/message-bundle&gt;\n    &lt;/application&gt;\n&lt;/faces-config&gt;\n</code></pre>\n\n<p>And had Message.properties under WebContent\\Resources (after mkyong's tutorial)</p>\n\n<p>the pesky exception appeared even when i renamed the bundle to \"Message_en_us\" and \"Message_en\". Moving it to src\\ worked. </p>\n\n<p>Should someone post the missing piece to make bundles work under resources,it would be a beautiful thing.</p>\n"},{"comments":[{"owner":{"account_id":3579384,"reputation":10125,"user_id":2987953,"accept_rate":49,"display_name":"lannyf"},"score":3,"creation_date":1453074181,"post_id":21512564,"comment_id":57430979,"body_markdown":"after move the .properties files into WEB-INF/classes (even create another wrapper folder under it) it works. up vote and thanks!","body":"after move the .properties files into WEB-INF/classes (even create another wrapper folder under it) it works. up vote and thanks!"},{"owner":{"account_id":4726022,"reputation":115,"user_id":3822632,"display_name":"Kitserve"},"score":1,"creation_date":1597213192,"post_id":21512564,"comment_id":112056036,"body_markdown":"A quick thanks to Grim and lannyf, as their information helped me with a similar problem on Resin web server. I was working on a project where the properties file was stored along with the .jar files in `webapps/ROOT/WEB-INF/lib/`. There was nothing in `webapps/ROOT/WEB-INF/classes/`. When I tried copying this setup across to a new server, I got an error &quot;Caught exception: Can&#39;t find base number for bundle X, locale en&quot;. However, when I created a symlink in `webapps/ROOT/WEB-INF/classes/` pointing to the .properties file in the `lib/` folder, it fixed the issue. Much appreciated!","body":"A quick thanks to Grim and lannyf, as their information helped me with a similar problem on Resin web server. I was working on a project where the properties file was stored along with the .jar files in <code>webapps&#47;ROOT&#47;WEB-INF&#47;lib&#47;</code>. There was nothing in <code>webapps&#47;ROOT&#47;WEB-INF&#47;classes&#47;</code>. When I tried copying this setup across to a new server, I got an error &quot;Caught exception: Can&#39;t find base number for bundle X, locale en&quot;. However, when I created a symlink in <code>webapps&#47;ROOT&#47;WEB-INF&#47;classes&#47;</code> pointing to the .properties file in the <code>lib&#47;</code> folder, it fixed the issue. Much appreciated!"}],"tags":[],"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"comment_count":2,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1489076620,"creation_date":1391356142,"answer_id":21512564,"question_id":12986234,"body_markdown":"maven-tomcat-plugin\r\n--\r\nIf you start the Project using the `maven-tomcat-plugin` / `maven-tomcat7-plugin`, you must place the `Bundle.properties`, or even the `Resource.properties` in `src/main/webapp/WEB-INF/classes`. Dont ask why, its because how the plugin fake a tomcat.","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<h2>maven-tomcat-plugin</h2>\n\n<p>If you start the Project using the <code>maven-tomcat-plugin</code> / <code>maven-tomcat7-plugin</code>, you must place the <code>Bundle.properties</code>, or even the <code>Resource.properties</code> in <code>src/main/webapp/WEB-INF/classes</code>. Dont ask why, its because how the plugin fake a tomcat.</p>\n"},{"comments":[{"owner":{"account_id":3453598,"reputation":4291,"user_id":2892621,"accept_rate":89,"display_name":"JDOaktown"},"score":1,"creation_date":1426546750,"post_id":25400707,"comment_id":46409685,"body_markdown":"Could you be more specifc?","body":"Could you be more specifc?"},{"owner":{"account_id":85391,"reputation":5204,"user_id":238089,"accept_rate":76,"display_name":"Yura Shinkarev"},"score":2,"creation_date":1463752194,"post_id":25400707,"comment_id":62213085,"body_markdown":"Right click on project &gt; Properties (alt + enter) &gt; Java Builder Path &gt; Source &gt; Add Folder...","body":"Right click on project &gt; Properties (alt + enter) &gt; Java Builder Path &gt; Source &gt; Add Folder..."}],"tags":[],"owner":{"account_id":4915421,"reputation":81,"user_id":3959478,"display_name":"harry"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1408525328,"creation_date":1408525328,"answer_id":25400707,"question_id":12986234,"body_markdown":"If you are running the .java file in Eclipse you need to add the resource path in the build path . \r\nafter that you will not see this error","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>If you are running the .java file in Eclipse you need to add the resource path in the build path . \nafter that you will not see this error</p>\n"},{"tags":[],"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485548681,"creation_date":1485548681,"answer_id":41902447,"question_id":12986234,"body_markdown":"I had the same problem using Netbeans. I went to the project folder and copied the properties file. I think clicked &quot;build&quot; and then &quot;classes.&quot;  I added the properties file in that folder. That solved my problem.","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>I had the same problem using Netbeans. I went to the project folder and copied the properties file. I think clicked \"build\" and then \"classes.\"  I added the properties file in that folder. That solved my problem.</p>\n"},{"tags":[],"owner":{"account_id":1357022,"reputation":21,"user_id":1295217,"display_name":"trungvt89.it"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1486534286,"creation_date":1486533782,"answer_id":42105803,"question_id":12986234,"body_markdown":"I use Eclipse (without Maven) so I place the `.properties` file in `src` folder that also contains the java source code, in order to have the `.properties` file in the `classes` folder after building the project. It works fine.\r\nTake a look at this post: [https://www.mkyong.com/jsf2/cant-find-bundle-for-base-name-xxx-locale-en_us/][1]\r\n\r\nHope this help you.\r\n\r\n\r\n  [1]: https://www.mkyong.com/jsf2/cant-find-bundle-for-base-name-xxx-locale-en_us/","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>I use Eclipse (without Maven) so I place the <code>.properties</code> file in <code>src</code> folder that also contains the java source code, in order to have the <code>.properties</code> file in the <code>classes</code> folder after building the project. It works fine.\nTake a look at this post: <a href=\"https://www.mkyong.com/jsf2/cant-find-bundle-for-base-name-xxx-locale-en_us/\" rel=\"nofollow noreferrer\">https://www.mkyong.com/jsf2/cant-find-bundle-for-base-name-xxx-locale-en_us/</a></p>\n\n<p>Hope this help you.</p>\n"},{"tags":[],"owner":{"account_id":1729526,"reputation":673,"user_id":1583413,"display_name":"Mr. DMX"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491001166,"creation_date":1491001166,"answer_id":43150818,"question_id":12986234,"body_markdown":"The problem must be that the resource-bunde &gt; base-name attribute at the **faces-config.xml** file has a different path to your properties. This happened to me on the firstcup Java EE tutorial, I gave a different package name on then project creation and then Glassfish was unable to find the properties folder which is on &quot;firstcup.web&quot;. \r\n\r\nI hope it helps.","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>The problem must be that the resource-bunde > base-name attribute at the <strong>faces-config.xml</strong> file has a different path to your properties. This happened to me on the firstcup Java EE tutorial, I gave a different package name on then project creation and then Glassfish was unable to find the properties folder which is on \"firstcup.web\". </p>\n\n<p>I hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":3603762,"reputation":1569,"user_id":3006465,"display_name":"electrobabe"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1518306756,"creation_date":1518306756,"answer_id":48726842,"question_id":12986234,"body_markdown":"In my case the problem was using the language tag &quot;en_US&quot; in `Locale.forLanguageTag(..)` instead of &quot;en-US&quot; - use a dash instead of underline!\r\n\r\nAlso use `Locale.forLanguageTag(&quot;en-US&quot;)` instead of `new Locale(&quot;en_US&quot;)` or `new Locale(&quot;en_US&quot;)` to define a language (&quot;en&quot;) with a region (&quot;US&quot;) - but `new Locale(&quot;en&quot;)` works.","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>In my case the problem was using the language tag \"en_US\" in <code>Locale.forLanguageTag(..)</code> instead of \"en-US\" - use a dash instead of underline!</p>\n\n<p>Also use <code>Locale.forLanguageTag(\"en-US\")</code> instead of <code>new Locale(\"en_US\")</code> or <code>new Locale(\"en_US\")</code> to define a language (\"en\") with a region (\"US\") - but <code>new Locale(\"en\")</code> works.</p>\n"},{"tags":[],"owner":{"account_id":10256091,"reputation":783,"user_id":7568895,"accept_rate":62,"display_name":"milosdju"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1537057037,"creation_date":1537057037,"answer_id":52349904,"question_id":12986234,"body_markdown":"In my case I was dealing with **SpringBoot** project and I got the same exception. \r\n\r\nSolution is made by **adding env.properties file into classpath** (i.e. src/main/resource folder). What was making the issue is that in log4j configuration there was property like \r\n\r\n`&lt;Property name=&quot;basePath&quot;&gt;${bundle:env:log.file.path}&lt;/Property&gt;`","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>In my case I was dealing with <strong>SpringBoot</strong> project and I got the same exception. </p>\n\n<p>Solution is made by <strong>adding env.properties file into classpath</strong> (i.e. src/main/resource folder). What was making the issue is that in log4j configuration there was property like </p>\n\n<p><code>&lt;Property name=\"basePath\"&gt;${bundle:env:log.file.path}&lt;/Property&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":13125737,"reputation":1,"user_id":10387913,"display_name":"Dinca Adrian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1541364657,"creation_date":1541363874,"answer_id":53145221,"question_id":12986234,"body_markdown":"Make sure you didn&#39;t add the properties files in the wrong resources folder as there is one under &#39;Web Pages&#39; and one under &#39;Other Sources/...&#39;. They needed to be under &#39;Other Sources/...&#39;.","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>Make sure you didn't add the properties files in the wrong resources folder as there is one under 'Web Pages' and one under 'Other Sources/...'. They needed to be under 'Other Sources/...'.</p>\n"},{"tags":[],"owner":{"account_id":16316701,"reputation":1,"user_id":11783603,"display_name":"Johnson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563133900,"creation_date":1563133900,"answer_id":57030656,"question_id":12986234,"body_markdown":"I was able to resolve the issue, the resource was in my project directories but when the junit utility tries to load it, it was returning an error of MissingResourceException. And the reason was the resource was in the not on the classpath of the test class package so when I added the cfg/ folder to my classpath path entry in eclipse and set the output directory in the build conf to the same class package the issue was resolved.\r\n\r\nWhen you try this approach just make sure, the classpath conf file shows the classpath entry of the resource directory (eg. cfg/) ","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>I was able to resolve the issue, the resource was in my project directories but when the junit utility tries to load it, it was returning an error of MissingResourceException. And the reason was the resource was in the not on the classpath of the test class package so when I added the cfg/ folder to my classpath path entry in eclipse and set the output directory in the build conf to the same class package the issue was resolved.</p>\n\n<p>When you try this approach just make sure, the classpath conf file shows the classpath entry of the resource directory (eg. cfg/) </p>\n"},{"tags":[],"owner":{"account_id":17093482,"reputation":11,"user_id":12369038,"display_name":"Juan Carlos Dominguez Isaza"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1584641341,"creation_date":1584641341,"answer_id":60762833,"question_id":12986234,"body_markdown":"In maven, folder resources, create the same package structure where the configuration files are located and copy them there","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>In maven, folder resources, create the same package structure where the configuration files are located and copy them there</p>\n"},{"tags":[],"owner":{"account_id":19387534,"reputation":449,"user_id":14176948,"display_name":"Alex Mandelias"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1626768110,"creation_date":1626768110,"answer_id":68451488,"question_id":12986234,"body_markdown":"The `Bundle.properties` file must be in the directory of the `.class` files. If it is located in the `src` directory then you need to make sure to copy it to the `bin` (output) directory in the same package.","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>The <code>Bundle.properties</code> file must be in the directory of the <code>.class</code> files. If it is located in the <code>src</code> directory then you need to make sure to copy it to the <code>bin</code> (output) directory in the same package.</p>\n"},{"tags":[],"owner":{"account_id":9831735,"reputation":207,"user_id":7283182,"display_name":"Shubhasish Bhunia"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672347530,"creation_date":1668787062,"answer_id":74492251,"question_id":12986234,"body_markdown":"Bundle names have to be fully qualified, like if your bundle **Bundle.properties**\r\n is inside **x.y.z** package, then you have to write `ResourceBundle.getBundle(&quot;x.y.z.Bundle&quot;);`","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>Bundle names have to be fully qualified, like if your bundle <strong>Bundle.properties</strong>\nis inside <strong>x.y.z</strong> package, then you have to write <code>ResourceBundle.getBundle(&quot;x.y.z.Bundle&quot;);</code></p>\n"}],"owner":{"account_id":1595517,"reputation":800,"user_id":1477749,"accept_rate":56,"display_name":"Md. Mahabubur Rahman"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":288416,"favorite_count":0,"down_vote_count":1,"up_vote_count":54,"answer_count":14,"score":53,"last_activity_date":1672347530,"creation_date":1350717371,"question_id":12986234,"body_markdown":"I&#39;m using a library that has a dependency on JSF.\r\n\r\nWhen I try to run my project, it show following exception massage.. \r\n\r\n    java.util.MissingResourceException: Can&#39;t find bundle for base name /Bundle, locale en_US\r\n\tat java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1427)\r\n\tat java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1250)\r\n\tat java.util.ResourceBundle.getBundle(ResourceBundle.java:705)\r\n\r\nAny ideas ?","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>I'm using a library that has a dependency on JSF.</p>\n\n<p>When I try to run my project, it show following exception massage.. </p>\n\n<pre><code>java.util.MissingResourceException: Can't find bundle for base name /Bundle, locale en_US\nat java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1427)\nat java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1250)\nat java.util.ResourceBundle.getBundle(ResourceBundle.java:705)\n</code></pre>\n\n<p>Any ideas ?</p>\n"},{"tags":["java","project","imap","libraries"],"comments":[{"owner":{"account_id":458052,"reputation":9149,"user_id":857727,"display_name":"arnt"},"score":0,"creation_date":1672430742,"post_id":74955951,"comment_id":132290187,"body_markdown":"The [commit log](https://github.com/javaee/javamail/commits/master) says 16 of the last 20 commits were by Bill Shannon, who was diagnosed with cancer just when the commits stopped and died some time later. He was a great guy, a **great guy.** Ordinary humans don&#39;t just take over the work of someone like him.","body":"The <a href=\"https://github.com/javaee/javamail/commits/master\" rel=\"nofollow noreferrer\">commit log</a> says 16 of the last 20 commits were by Bill Shannon, who was diagnosed with cancer just when the commits stopped and died some time later. He was a great guy, a <b>great guy.</b> Ordinary humans don&#39;t just take over the work of someone like him."},{"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"score":0,"creation_date":1672437478,"post_id":74955951,"comment_id":132291428,"body_markdown":"I&#39;d suggest the gimap commit log is here: https://github.com/javaee/javamail/commits/master/gimap/src/main","body":"I&#39;d suggest the gimap commit log is here: <a href=\"https://github.com/javaee/javamail/commits/master/gimap/src/main\" rel=\"nofollow noreferrer\">github.com/javaee/javamail/commits/master/gimap/src/main</a>"},{"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"score":0,"creation_date":1672437761,"post_id":74955951,"comment_id":132291476,"body_markdown":"the rest of the javamail project, to which Bill committed changes, was carried on here https://github.com/javaee/javamail/commits/master/gimap/src/main until release 2.1.1, just last week. So I&#39;m not convinced the loss of Bill Shannon dissuaded other developers from continuing the work.","body":"the rest of the javamail project, to which Bill committed changes, was carried on here <a href=\"https://github.com/javaee/javamail/commits/master/gimap/src/main\" rel=\"nofollow noreferrer\">github.com/javaee/javamail/commits/master/gimap/src/main</a> until release 2.1.1, just last week. So I&#39;m not convinced the loss of Bill Shannon dissuaded other developers from continuing the work."}],"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672347174,"creation_date":1672347174,"question_id":74955951,"body_markdown":"There was a project &quot;Gimap&quot; - to build onto the javax.mail system to support some Google extensions to IMAP protocol.\r\n\r\nThis project can still be found here: https://javaee.github.io/javamail/#Download_JavaMail_Release (or https://github.com/javaee/javamail/tree/master/gimap )\r\n\r\nThe underlying project javax.mail was sent out from Oracle and into Jakarta, now found here: https://github.com/jakartaee/mail-api\r\n\r\nbut I don&#39;t think Gimap was taken along. Can someone describe what happened to that, and where&#39;s the best place to find something equivalent based on Jakarta or any other currently supported libraries?","title":"Is there a Gimap project ported to derive support from Jakarta Mail?","body":"<p>There was a project &quot;Gimap&quot; - to build onto the javax.mail system to support some Google extensions to IMAP protocol.</p>\n<p>This project can still be found here: <a href=\"https://javaee.github.io/javamail/#Download_JavaMail_Release\" rel=\"nofollow noreferrer\">https://javaee.github.io/javamail/#Download_JavaMail_Release</a> (or <a href=\"https://github.com/javaee/javamail/tree/master/gimap\" rel=\"nofollow noreferrer\">https://github.com/javaee/javamail/tree/master/gimap</a> )</p>\n<p>The underlying project javax.mail was sent out from Oracle and into Jakarta, now found here: <a href=\"https://github.com/jakartaee/mail-api\" rel=\"nofollow noreferrer\">https://github.com/jakartaee/mail-api</a></p>\n<p>but I don't think Gimap was taken along. Can someone describe what happened to that, and where's the best place to find something equivalent based on Jakarta or any other currently supported libraries?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1672347431,"post_id":74955930,"comment_id":132273884,"body_markdown":"Websockets, for example.","body":"Websockets, for example."},{"owner":{"account_id":4216,"reputation":34398,"user_id":6264,"accept_rate":88,"display_name":"Michiel Borkent"},"score":0,"creation_date":1672347593,"post_id":74955930,"comment_id":132273919,"body_markdown":"I see! So a websocket connection is described using a URI instead of a URL - why is this exactly?","body":"I see! So a websocket connection is described using a URI instead of a URL - why is this exactly?"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1672347793,"post_id":74955930,"comment_id":132273966,"body_markdown":"Frankly, I don&#39;t know. I think URIs being more general  might make the API future proof and uniform once they decide to use some URIs that are not URLs, but don&#39;t quote me on that.","body":"Frankly, I don&#39;t know. I think URIs being more general  might make the API future proof and uniform once they decide to use some URIs that are not URLs, but don&#39;t quote me on that."},{"owner":{"account_id":4216,"reputation":34398,"user_id":6264,"accept_rate":88,"display_name":"Michiel Borkent"},"score":0,"creation_date":1672347844,"post_id":74955930,"comment_id":132273977,"body_markdown":"Right. The websocket API seems to be a different one:\n\nhttps://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.Builder.html\n\nbut uniformity may be a good reason.","body":"Right. The websocket API seems to be a different one:  <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.Builder.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/11/docs/api/java.net.http/jav&zwnj;&#8203;a/&hellip;</a>  but uniformity may be a good reason."},{"owner":{"account_id":10838690,"reputation":3209,"user_id":7970787,"display_name":"Alex R"},"score":1,"creation_date":1672349248,"post_id":74955930,"comment_id":132274286,"body_markdown":"I can think of two other potential reasons, the first being convenience: The URI class has a static factory `create` that does not require one to handle a checked exception. The second reason is that the URL class has a problem that not many people know about: When using the `equals` method of the URL class, that method does a DNS lookup.","body":"I can think of two other potential reasons, the first being convenience: The URI class has a static factory <code>create</code> that does not require one to handle a checked exception. The second reason is that the URL class has a problem that not many people know about: When using the <code>equals</code> method of the URL class, that method does a DNS lookup."}],"owner":{"account_id":4216,"reputation":34398,"user_id":6264,"accept_rate":88,"display_name":"Michiel Borkent"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1672346898,"creation_date":1672346898,"question_id":74955930,"body_markdown":"The [java.net.http](https://docs.oracle.com/en/java/javase/12/docs/api/java.net.http/java/net/http/package-summary.html) package takes URI to build a request. Is there an example of a working request URI that does not refer to http(s)?\r\n\r\nFor example:\r\n\r\n```\r\nHttpRequest.newBuilder()\r\n  .uri(new URI(&quot;https://postman-echo.com/get&quot;))\r\n```\r\n\r\nWhy does the builder take `URI` rather than a `URL`? Are there any working examples that demonstrate the usefulness of `URI` in this context, over `URL`?","title":"Is there an example of a java.net.http request with URI that does not refer to http(s)?","body":"<p>The <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.net.http/java/net/http/package-summary.html\" rel=\"nofollow noreferrer\">java.net.http</a> package takes URI to build a request. Is there an example of a working request URI that does not refer to http(s)?</p>\n<p>For example:</p>\n<pre><code>HttpRequest.newBuilder()\n  .uri(new URI(&quot;https://postman-echo.com/get&quot;))\n</code></pre>\n<p>Why does the builder take <code>URI</code> rather than a <code>URL</code>? Are there any working examples that demonstrate the usefulness of <code>URI</code> in this context, over <code>URL</code>?</p>\n"},{"tags":["java","parsing","binary-data","serversocket"],"answers":[{"tags":[],"owner":{"account_id":439324,"reputation":32505,"user_id":828193,"accept_rate":85,"display_name":"user000001"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360477935,"creation_date":1360477495,"answer_id":14795293,"question_id":14795269,"body_markdown":"    try {\r\n        char [] cbuf = new char[16];\r\n        char databegin = cbuf[0];\r\n        char [] version = Arrays.copyOfRange(cbuf, 1, 6) \r\n        char [] product_typep = Arrays.copyOfRange(cbuf, 7, 12)\r\n        char []data_lendth = Arrays.copyOfRange(cbuf, 13, 15)\r\n\r\n    } catch(Error e){\r\n        System.out.println(e);\r\n    }","title":"Parsing binary data in java received over TCP socket server","body":"<pre><code>try {\n    char [] cbuf = new char[16];\n    char databegin = cbuf[0];\n    char [] version = Arrays.copyOfRange(cbuf, 1, 6) \n    char [] product_typep = Arrays.copyOfRange(cbuf, 7, 12)\n    char []data_lendth = Arrays.copyOfRange(cbuf, 13, 15)\n\n} catch(Error e){\n    System.out.println(e);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1360486845,"post_id":14795310,"comment_id":20720646,"body_markdown":"ByteArrayOutputStream doesn&#39;t answer the question, it just moves the problem.","body":"ByteArrayOutputStream doesn&#39;t answer the question, it just moves the problem."}],"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1360477676,"creation_date":1360477676,"answer_id":14795310,"question_id":14795269,"body_markdown":"You might get the data via the [ByteArrayOutputStream][1]\r\nAnd then parse the bytes by applying masks (mainly AND, OR).\r\n\r\nTake a look at [This question][2]\r\n\r\nHope this helps\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html\r\n  [2]: https://stackoverflow.com/questions/8274966/reading-a-byte-array-from-socket","title":"Parsing binary data in java received over TCP socket server","body":"<p>You might get the data via the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html\" rel=\"nofollow noreferrer\">ByteArrayOutputStream</a>\nAnd then parse the bytes by applying masks (mainly AND, OR).</p>\n\n<p>Take a look at <a href=\"https://stackoverflow.com/questions/8274966/reading-a-byte-array-from-socket\">This question</a></p>\n\n<p>Hope this helps</p>\n"},{"tags":[],"owner":{"account_id":2323814,"reputation":13662,"user_id":2038768,"display_name":"Mikhail Vladimirov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360478034,"creation_date":1360477730,"answer_id":14795319,"question_id":14795269,"body_markdown":"    byte [] data = receiveData ();\r\n\r\n    int dataBegin = data [0];           // Once field is 1-byte, it is simple!\r\n    int version = data [1] &amp; 0x0F;      // Use shift (&gt;&gt;&gt;) and binary &quot;and&quot; (&amp;)\r\n    int returnCode =                    // to extract value of fields that are\r\n        (data [1] &gt;&gt;&gt; 4) &amp; 0x0F;        // smaller than one byte\r\n    byte [] productCode =               // Copy fixed-size portions of data\r\n        new byte [] {                   // into separate arrays using hardcode\r\n            data [2], data [3],         // (as here),  or System.arrayCopy\r\n            data [4], data [5],         // in case field occupies quite\r\n            data [6]};                  // a many bytes.\r\n    int dataLength =                    // Use shift (&lt;&lt;) binary or (|) to \r\n        (data [7] &amp; 0xFF) |             // Combine several bytes into one integer\r\n        ((data [8] &amp; 0xFF) &lt;&lt; 8);       // We assume little-endian encoding here","title":"Parsing binary data in java received over TCP socket server","body":"<pre><code>byte [] data = receiveData ();\n\nint dataBegin = data [0];           // Once field is 1-byte, it is simple!\nint version = data [1] &amp; 0x0F;      // Use shift (&gt;&gt;&gt;) and binary \"and\" (&amp;)\nint returnCode =                    // to extract value of fields that are\n    (data [1] &gt;&gt;&gt; 4) &amp; 0x0F;        // smaller than one byte\nbyte [] productCode =               // Copy fixed-size portions of data\n    new byte [] {                   // into separate arrays using hardcode\n        data [2], data [3],         // (as here),  or System.arrayCopy\n        data [4], data [5],         // in case field occupies quite\n        data [6]};                  // a many bytes.\nint dataLength =                    // Use shift (&lt;&lt;) binary or (|) to \n    (data [7] &amp; 0xFF) |             // Combine several bytes into one integer\n    ((data [8] &amp; 0xFF) &lt;&lt; 8);       // We assume little-endian encoding here\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1360477938,"creation_date":1360477938,"answer_id":14795349,"question_id":14795269,"body_markdown":"Try java.io.DataInputStream:\r\n\r\n\t\tDataInputStream dis = new DataInputStream(in);\r\n\t\tbyte b = dis.readByte();\r\n\t\tint version = (b &gt;&gt; 4) &amp; 0xF;\r\n\t\tint returnType = b &amp; 0xF;\r\n\t\tbyte[] productCode = new byte[5];\r\n\t\tdis.readFully(productCode);\r\n\t\tint len = dis.readShort() &amp; 0xFFFF;\r\n","title":"Parsing binary data in java received over TCP socket server","body":"<p>Try java.io.DataInputStream:</p>\n\n<pre><code>    DataInputStream dis = new DataInputStream(in);\n    byte b = dis.readByte();\n    int version = (b &gt;&gt; 4) &amp; 0xF;\n    int returnType = b &amp; 0xF;\n    byte[] productCode = new byte[5];\n    dis.readFully(productCode);\n    int len = dis.readShort() &amp; 0xFFFF;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1426019,"reputation":4217,"user_id":1356883,"display_name":"kofemann"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360486713,"creation_date":1360486713,"answer_id":14796139,"question_id":14795269,"body_markdown":"I would got for some king of package reader:\r\n\r\n    class Record {\r\n\r\n       .....\r\n\r\n       Record static fromBytes(byte[] bytes) {\r\n           // here use ByteBuffer or DataInputStream to extract filds\r\n           ......\r\n       }\r\n    }\r\n\r\n\r\n    Record readNextRecord(InputStream in) {\r\n        int len = in.read() &amp;&amp; 0xFF;\r\n        byte[] data = new byte[len];\r\n        in.read(data);\r\n        return Record.fromBytes(data)\r\n    }\r\n\r\n\r\n\r\n    {\r\n      InputStream in = ....;\r\n      Record r readNextRecord(in);\r\n      process (r);\r\n    }\r\n\r\nOf course you need to add error handling. In general, for something which should run reliable, I will suggest to use NIO framework like Grizzly or Netty.","title":"Parsing binary data in java received over TCP socket server","body":"<p>I would got for some king of package reader:</p>\n\n<pre><code>class Record {\n\n   .....\n\n   Record static fromBytes(byte[] bytes) {\n       // here use ByteBuffer or DataInputStream to extract filds\n       ......\n   }\n}\n\n\nRecord readNextRecord(InputStream in) {\n    int len = in.read() &amp;&amp; 0xFF;\n    byte[] data = new byte[len];\n    in.read(data);\n    return Record.fromBytes(data)\n}\n\n\n\n{\n  InputStream in = ....;\n  Record r readNextRecord(in);\n  process (r);\n}\n</code></pre>\n\n<p>Of course you need to add error handling. In general, for something which should run reliable, I will suggest to use NIO framework like Grizzly or Netty.</p>\n"},{"tags":[],"owner":{"account_id":2015227,"reputation":833,"user_id":1802697,"display_name":"Igor Maznitsa"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1406208424,"creation_date":1406208424,"answer_id":24935073,"question_id":14795269,"body_markdown":"if use the [java binary block parser][1] then code will look like\r\n\r\n    class Parsed { \r\n      @Bin byte begin; \r\n      @Bin(type = BinType.BIT) int version; \r\n      @Bin(type = BinType.BIT) int returnType;\r\n      @Bin byte [] productCode;\r\n      @Bin(type = BinType.USHORT) int dataLength;\r\n    }\r\n    final Parsed parsed = JBBPParser.prepare(&quot;byte begin; bit:4 version; bit:4 returnType; byte [5] productCode; ushort dataLength;&quot;)\r\n            .parse(new byte[]{0x23,0x21,(byte)0x90,0x23,0x21,0x22,0x12,0x00,(byte)0xAA})\r\n            .mapTo(Parsed.class);\r\n    \r\n    assertEquals(0x23, parsed.begin);\r\n    assertEquals(0x01, parsed.version);\r\n    assertEquals(0x02, parsed.returnType);\r\n    assertArrayEquals(new byte[]{(byte)0x90,0x23,0x21,0x22,0x12}, parsed.productCode);\r\n    assertEquals(0x00AA,parsed.dataLength);\r\n\r\n\r\n  [1]: https://code.google.com/p/java-binary-block-parser/","title":"Parsing binary data in java received over TCP socket server","body":"<p>if use the <a href=\"https://code.google.com/p/java-binary-block-parser/\" rel=\"nofollow\">java binary block parser</a> then code will look like</p>\n\n<pre><code>class Parsed { \n  @Bin byte begin; \n  @Bin(type = BinType.BIT) int version; \n  @Bin(type = BinType.BIT) int returnType;\n  @Bin byte [] productCode;\n  @Bin(type = BinType.USHORT) int dataLength;\n}\nfinal Parsed parsed = JBBPParser.prepare(\"byte begin; bit:4 version; bit:4 returnType; byte [5] productCode; ushort dataLength;\")\n        .parse(new byte[]{0x23,0x21,(byte)0x90,0x23,0x21,0x22,0x12,0x00,(byte)0xAA})\n        .mapTo(Parsed.class);\n\nassertEquals(0x23, parsed.begin);\nassertEquals(0x01, parsed.version);\nassertEquals(0x02, parsed.returnType);\nassertArrayEquals(new byte[]{(byte)0x90,0x23,0x21,0x22,0x12}, parsed.productCode);\nassertEquals(0x00AA,parsed.dataLength);\n</code></pre>\n"}],"owner":{"account_id":2348865,"reputation":1,"user_id":2058277,"display_name":"user2058277"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3346,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":6,"score":0,"last_activity_date":1672346627,"creation_date":1360477258,"question_id":14795269,"body_markdown":"I have a socket server which keeps listening to incoming requests. The data received will be in the form of binary array of bytes.\r\nData format is something like this.\r\n**2321902321221200AA**\r\n\r\n\r\n - Whereas **1** byte is data begin\r\n - **4** bits is version\r\n - **4** bits is data return type\r\n - **5** bytes are product code\r\n - **2** bytes data length\r\n \r\nThe question is, how to parse the data and segregate the parameters.\r\n \r\nThanks in advance!!","title":"Parsing binary data in java received over TCP socket server","body":"<p>I have a socket server which keeps listening to incoming requests. The data received will be in the form of binary array of bytes.\nData format is something like this.\n<strong>2321902321221200AA</strong></p>\n\n<ul>\n<li>Whereas <strong>1</strong> byte is data begin</li>\n<li><strong>4</strong> bits is version</li>\n<li><strong>4</strong> bits is data return type</li>\n<li><strong>5</strong> bytes are product code</li>\n<li><strong>2</strong> bytes data length</li>\n</ul>\n\n<p>The question is, how to parse the data and segregate the parameters.</p>\n\n<p>Thanks in advance!!</p>\n"},{"tags":["java","multithreading","spring-batch","partitioning"],"answers":[{"comments":[{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":0,"creation_date":1566381918,"post_id":57582015,"comment_id":101635842,"body_markdown":"you are talking about REMOTE partitioning. I am speaking about LOCAL partitioning","body":"you are talking about REMOTE partitioning. I am speaking about LOCAL partitioning"}],"tags":[],"owner":{"account_id":9446836,"reputation":817,"user_id":7025246,"accept_rate":50,"display_name":"Sushil Behera"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566338247,"creation_date":1566338247,"answer_id":57582015,"question_id":57471959,"body_markdown":"\r\nThere is basically fundamental differences here when you use multi-threaded steps and partitions.\r\n\r\nMulti-threaded steps are single process so it is not a good idea to use this if you have persisted state for processor/writer. However say if you just generating a report without saving anything this is a good choice.\r\n\r\nAs you have mentioned say you want to process a flat file and say you want store the records in DB then you can use remote chunking concept assuming your reader is not heavy.\r\n\r\nPartitioner will create separate process for a each set of data you can use logically divide.\r\n\r\nHope this helps.","title":"What is the difference between Multi-threaded Step and Local Partitioning in spring batch?","body":"<p>There is basically fundamental differences here when you use multi-threaded steps and partitions.</p>\n\n<p>Multi-threaded steps are single process so it is not a good idea to use this if you have persisted state for processor/writer. However say if you just generating a report without saving anything this is a good choice.</p>\n\n<p>As you have mentioned say you want to process a flat file and say you want store the records in DB then you can use remote chunking concept assuming your reader is not heavy.</p>\n\n<p>Partitioner will create separate process for a each set of data you can use logically divide.</p>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":27385946,"reputation":11,"user_id":20889748,"display_name":"David Song"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672346235,"creation_date":1672346235,"answer_id":74955847,"question_id":57471959,"body_markdown":"based on my understanding, partition is typically used for remote processing.  Partition master (or manager) step will create multiple identical workers. The number of works are the given grid size. For local processing, those workers are identical, meaning the same reader, writer objects, but execute on different thread with different chunks of input provided by the customized partitioner. However, if the worker step has listeners, before/after step methods, those methods will be call by each worker; on the contrary, those method get called only once in multi-thread step scheme. Other than that, I don&#39;t see any differences for local processing. \r\n\r\nI personally suggest don&#39;t use partition for local processing, use multi-thread step instead. There are so many open source packages, don&#39;t use them if you don&#39;t feel comfortable. \r\n\r\n\r\n ","title":"What is the difference between Multi-threaded Step and Local Partitioning in spring batch?","body":"<p>based on my understanding, partition is typically used for remote processing.  Partition master (or manager) step will create multiple identical workers. The number of works are the given grid size. For local processing, those workers are identical, meaning the same reader, writer objects, but execute on different thread with different chunks of input provided by the customized partitioner. However, if the worker step has listeners, before/after step methods, those methods will be call by each worker; on the contrary, those method get called only once in multi-thread step scheme. Other than that, I don't see any differences for local processing.</p>\n<p>I personally suggest don't use partition for local processing, use multi-thread step instead. There are so many open source packages, don't use them if you don't feel comfortable.</p>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1018,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1672346235,"creation_date":1565676361,"question_id":57471959,"body_markdown":"I&#39;ve the following [doc][1].\r\n\r\nAnd there are mentioned that:\r\n\r\n&gt; 1.1. Multi-threaded Step The simplest way to start parallel processing is to add a TaskExecutor to your Step configuration.\r\n&gt; \r\n&gt; When using java configuration, a TaskExecutor can be added to the step\r\n&gt; as shown in the following example:\r\n\r\n    @Bean\r\n    public TaskExecutor taskExecutor(){\r\n        return new SimpleAsyncTaskExecutor(&quot;spring_batch&quot;);\r\n    }\r\n    \r\n    @Bean\r\n    public Step sampleStep(TaskExecutor taskExecutor) {\r\n            return this.stepBuilderFactory.get(&quot;sampleStep&quot;)\r\n                                    .&lt;String, String&gt;chunk(10)\r\n                                    .reader(itemReader())\r\n                                    .writer(itemWriter())\r\n                                    .taskExecutor(taskExecutor)\r\n                                    .build();\r\n    }\r\n\r\n\r\n&gt; The result of the above configuration is that the Step executes by\r\n&gt; reading, processing, and writing each chunk of items (each commit\r\n&gt; interval) in a separate thread of execution. Note that this means\r\n&gt; there is no fixed order for the items to be processed, and a chunk\r\n&gt; might contain items that are non-consecutive compared to the\r\n&gt; single-threaded case. In addition to any limits placed by the task\r\n&gt; executor (such as whether it is backed by a thread pool), there is a\r\n&gt; throttle limit in the tasklet configuration which defaults to 4. You\r\n&gt; may need to increase this to ensure that a thread pool is fully\r\n&gt; utilized.\r\n\r\n\r\nBut before I thought that it should be achieved by local partitioning and I should provide a partitioner which say how to divide data into pieces. Multi-threaded Step should do it automatically. \r\n\r\nQuestion\r\n-\r\n\r\nCould you explain how does it work ? How can I manage it besides the thread number?  Will it work for flat file?\r\n\r\nP.S.\r\n-\r\nI created the example:\r\n\r\n    @Configuration\r\n    public class MultithreadedStepConfig {\r\n    \r\n        @Autowired\r\n        public JobBuilderFactory jobBuilderFactory;\r\n    \r\n        @Autowired\r\n        public StepBuilderFactory stepBuilderFactory;\r\n        @Autowired\r\n        private ToLowerCasePersonProcessor toLowerCasePersonProcessor;\r\n    \r\n        @Autowired\r\n        private DbPersonWriter dbPersonWriter;\r\n    \r\n        @Value(&quot;${app.single-file}&quot;)\r\n        Resource resources;\r\n    \r\n        @Bean\r\n        public Job job(Step databaseToDataBaseLowercaseSlaveStep) {\r\n            return jobBuilderFactory.get(&quot;myMultiThreadedJob&quot;)\r\n                    .incrementer(new RunIdIncrementer())\r\n                    .flow(csvToDataBaseSlaveStep())\r\n                    .end()\r\n                    .build();\r\n        }\r\n    \r\n        private Step csvToDataBaseSlaveStep() {\r\n            return stepBuilderFactory.get(&quot;csvToDatabaseStep&quot;)\r\n                    .&lt;Person, Person&gt;chunk(50)\r\n                    .reader(csvPersonReaderMulti())\r\n                    .processor(toLowerCasePersonProcessor)\r\n                    .writer(dbPersonWriter)\r\n                    .taskExecutor(jobTaskExecutorMultiThreaded())\r\n                    .build();\r\n    \r\n        }\r\n    \r\n        @Bean\r\n        @StepScope\r\n        public FlatFileItemReader csvPersonReaderMulti() {\r\n            return new FlatFileItemReaderBuilder()\r\n                    .name(&quot;csvPersonReaderSplitted&quot;)\r\n                    .resource(resources)\r\n                    .delimited()\r\n                    .names(new String[]{&quot;firstName&quot;, &quot;lastName&quot;})\r\n                    .fieldSetMapper(new BeanWrapperFieldSetMapper&lt;Person&gt;() {{\r\n                        setTargetType(Person.class);\r\n                    }})\r\n                    .saveState(false)\r\n                    .build();\r\n    \r\n        }\r\n    \r\n        @Bean\r\n        public TaskExecutor jobTaskExecutorMultiThreaded() {\r\n            ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\r\n            // there are 21 sites currently hence we have 21 threads\r\n            taskExecutor.setMaxPoolSize(30);\r\n            taskExecutor.setCorePoolSize(25);\r\n            taskExecutor.setThreadGroupName(&quot;multi-&quot;);\r\n            taskExecutor.setThreadNamePrefix(&quot;multi-&quot;);\r\n            taskExecutor.afterPropertiesSet();\r\n            return taskExecutor;\r\n        }\r\n    }\r\n\r\n\r\nAnd it really works according the log but I want to know details. Is it better than self written partitioner ?\r\n  [1]: https://docs.spring.io/spring-batch/4.1.x/reference/html/scalability.html\r\n","title":"What is the difference between Multi-threaded Step and Local Partitioning in spring batch?","body":"<p>I've the following <a href=\"https://docs.spring.io/spring-batch/4.1.x/reference/html/scalability.html\" rel=\"nofollow noreferrer\">doc</a>.</p>\n\n<p>And there are mentioned that:</p>\n\n<blockquote>\n  <p>1.1. Multi-threaded Step The simplest way to start parallel processing is to add a TaskExecutor to your Step configuration.</p>\n  \n  <p>When using java configuration, a TaskExecutor can be added to the step\n  as shown in the following example:</p>\n</blockquote>\n\n<pre><code>@Bean\npublic TaskExecutor taskExecutor(){\n    return new SimpleAsyncTaskExecutor(\"spring_batch\");\n}\n\n@Bean\npublic Step sampleStep(TaskExecutor taskExecutor) {\n        return this.stepBuilderFactory.get(\"sampleStep\")\n                                .&lt;String, String&gt;chunk(10)\n                                .reader(itemReader())\n                                .writer(itemWriter())\n                                .taskExecutor(taskExecutor)\n                                .build();\n}\n</code></pre>\n\n<blockquote>\n  <p>The result of the above configuration is that the Step executes by\n  reading, processing, and writing each chunk of items (each commit\n  interval) in a separate thread of execution. Note that this means\n  there is no fixed order for the items to be processed, and a chunk\n  might contain items that are non-consecutive compared to the\n  single-threaded case. In addition to any limits placed by the task\n  executor (such as whether it is backed by a thread pool), there is a\n  throttle limit in the tasklet configuration which defaults to 4. You\n  may need to increase this to ensure that a thread pool is fully\n  utilized.</p>\n</blockquote>\n\n<p>But before I thought that it should be achieved by local partitioning and I should provide a partitioner which say how to divide data into pieces. Multi-threaded Step should do it automatically. </p>\n\n<h2>Question</h2>\n\n<p>Could you explain how does it work ? How can I manage it besides the thread number?  Will it work for flat file?</p>\n\n<h2>P.S.</h2>\n\n<p>I created the example:</p>\n\n<pre><code>@Configuration\npublic class MultithreadedStepConfig {\n\n    @Autowired\n    public JobBuilderFactory jobBuilderFactory;\n\n    @Autowired\n    public StepBuilderFactory stepBuilderFactory;\n    @Autowired\n    private ToLowerCasePersonProcessor toLowerCasePersonProcessor;\n\n    @Autowired\n    private DbPersonWriter dbPersonWriter;\n\n    @Value(\"${app.single-file}\")\n    Resource resources;\n\n    @Bean\n    public Job job(Step databaseToDataBaseLowercaseSlaveStep) {\n        return jobBuilderFactory.get(\"myMultiThreadedJob\")\n                .incrementer(new RunIdIncrementer())\n                .flow(csvToDataBaseSlaveStep())\n                .end()\n                .build();\n    }\n\n    private Step csvToDataBaseSlaveStep() {\n        return stepBuilderFactory.get(\"csvToDatabaseStep\")\n                .&lt;Person, Person&gt;chunk(50)\n                .reader(csvPersonReaderMulti())\n                .processor(toLowerCasePersonProcessor)\n                .writer(dbPersonWriter)\n                .taskExecutor(jobTaskExecutorMultiThreaded())\n                .build();\n\n    }\n\n    @Bean\n    @StepScope\n    public FlatFileItemReader csvPersonReaderMulti() {\n        return new FlatFileItemReaderBuilder()\n                .name(\"csvPersonReaderSplitted\")\n                .resource(resources)\n                .delimited()\n                .names(new String[]{\"firstName\", \"lastName\"})\n                .fieldSetMapper(new BeanWrapperFieldSetMapper&lt;Person&gt;() {{\n                    setTargetType(Person.class);\n                }})\n                .saveState(false)\n                .build();\n\n    }\n\n    @Bean\n    public TaskExecutor jobTaskExecutorMultiThreaded() {\n        ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\n        // there are 21 sites currently hence we have 21 threads\n        taskExecutor.setMaxPoolSize(30);\n        taskExecutor.setCorePoolSize(25);\n        taskExecutor.setThreadGroupName(\"multi-\");\n        taskExecutor.setThreadNamePrefix(\"multi-\");\n        taskExecutor.afterPropertiesSet();\n        return taskExecutor;\n    }\n}\n</code></pre>\n\n<p>And it really works according the log but I want to know details. Is it better than self written partitioner ?</p>\n"},{"tags":["java","java-8","java-stream"],"answers":[{"comments":[{"owner":{"account_id":16447219,"reputation":721,"user_id":11881663,"display_name":"nopens"},"score":0,"creation_date":1566652961,"post_id":57638219,"comment_id":101728741,"body_markdown":"I guess index is also of type AtomicInteger. Thanks for your example.","body":"I guess index is also of type AtomicInteger. Thanks for your example."}],"tags":[],"owner":{"account_id":14488140,"reputation":1434,"user_id":10465344,"display_name":"Vinay Hegde"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1566651867,"creation_date":1566651867,"answer_id":57638219,"question_id":57638165,"body_markdown":"Try this : \r\n\r\nLets say `String[] array = { &quot;V&quot;,&quot;I&quot;,&quot;N&quot;,&quot;A&quot;,&quot;Y&quot; };` then,\r\n\r\n    Arrays.stream(array) \r\n            .map(ele-&gt; index.getAndIncrement() + &quot; -&gt; &quot; + ele) \r\n            .forEach(System.out::println); \r\n\r\nOutput : \r\n\r\n    0 -&gt; V\r\n    1 -&gt; I\r\n    2 -&gt; N\r\n    3 -&gt; A\r\n    4 -&gt; Y","title":"How to map elements to their index using streams?","body":"<p>Try this : </p>\n\n<p>Lets say <code>String[] array = { \"V\",\"I\",\"N\",\"A\",\"Y\" };</code> then,</p>\n\n<pre><code>Arrays.stream(array) \n        .map(ele-&gt; index.getAndIncrement() + \" -&gt; \" + ele) \n        .forEach(System.out::println); \n</code></pre>\n\n<p>Output : </p>\n\n<pre><code>0 -&gt; V\n1 -&gt; I\n2 -&gt; N\n3 -&gt; A\n4 -&gt; Y\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16447219,"reputation":721,"user_id":11881663,"display_name":"nopens"},"score":0,"creation_date":1566652576,"post_id":57638229,"comment_id":101728651,"body_markdown":"Didn&#39;t know anything about AtomicInteger until now. Thanks that solves my problem.","body":"Didn&#39;t know anything about AtomicInteger until now. Thanks that solves my problem."},{"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"score":3,"creation_date":1566652710,"post_id":57638229,"comment_id":101728674,"body_markdown":"`AtomicInteger` is thread-safe and it might introduce some overhead. I consider it a bit hacky. I think that solution by  SamuelPhilipp is better than this. Also notice that it only solves the problem of your variable not being effectively final.","body":"<code>AtomicInteger</code> is thread-safe and it might introduce some overhead. I consider it a bit hacky. I think that solution by  SamuelPhilipp is better than this. Also notice that it only solves the problem of your variable not being effectively final."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":5,"creation_date":1566811559,"post_id":57638229,"comment_id":101760134,"body_markdown":"The irony is that this bears the costs of a thread safe operation while not being thread safe, due to relying on the processing order. [A clean solution](https://stackoverflow.com/a/57655144/2711488) without these problems, is possible…","body":"The irony is that this bears the costs of a thread safe operation while not being thread safe, due to relying on the processing order. <a href=\"https://stackoverflow.com/a/57655144/2711488\">A clean solution</a> without these problems, is possible…"},{"owner":{"account_id":355822,"reputation":1375,"user_id":694976,"accept_rate":78,"display_name":"Jo&#227;o Mendes"},"score":0,"creation_date":1639413464,"post_id":57638229,"comment_id":124336698,"body_markdown":"You don&#39;t have to use AtomicInteger. A simple one-element int array would do. No more faux-thread-safety overhead. And collecting a stream to then restream it sounds like needless overhead as well.","body":"You don&#39;t have to use AtomicInteger. A simple one-element int array would do. No more faux-thread-safety overhead. And collecting a stream to then restream it sounds like needless overhead as well."}],"tags":[],"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"comment_count":4,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1566652990,"creation_date":1566651954,"answer_id":57638229,"question_id":57638165,"body_markdown":"You `i` variable is not effectively final.\r\n\r\nYou can use [`AtomicInteger`](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html) as `Integer` wrapper:\r\n````\r\nStream&lt;String&gt; myStream = Arrays.asList(&quot;one&quot;,&quot;two&quot;,&quot;three&quot;).stream();\r\nAtomicInteger atomicInteger = new AtomicInteger(0);\r\nMap&lt;Integer, String&gt; result3 = myStream.collect(Collectors.toMap(x -&gt; atomicInteger.getAndIncrement(), Function.identity()));\r\n````\r\n\r\nI consider it a bit hacky because it only solves the problem of effectively final variable. Since it is a special ThreadSafe version it might introduce some overhead. Pure `stream` solution in the [answer by Samuel Philipp](https://stackoverflow.com/a/57638246/4956907) might better fit your needs.","title":"How to map elements to their index using streams?","body":"<p>You <code>i</code> variable is not effectively final.</p>\n\n<p>You can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html\" rel=\"noreferrer\"><code>AtomicInteger</code></a> as <code>Integer</code> wrapper:</p>\n\n<pre><code>Stream&lt;String&gt; myStream = Arrays.asList(\"one\",\"two\",\"three\").stream();\nAtomicInteger atomicInteger = new AtomicInteger(0);\nMap&lt;Integer, String&gt; result3 = myStream.collect(Collectors.toMap(x -&gt; atomicInteger.getAndIncrement(), Function.identity()));\n</code></pre>\n\n<p>I consider it a bit hacky because it only solves the problem of effectively final variable. Since it is a special ThreadSafe version it might introduce some overhead. Pure <code>stream</code> solution in the <a href=\"https://stackoverflow.com/a/57638246/4956907\">answer by Samuel Philipp</a> might better fit your needs.</p>\n"},{"comments":[{"owner":{"account_id":16447219,"reputation":721,"user_id":11881663,"display_name":"nopens"},"score":0,"creation_date":1566652789,"post_id":57638246,"comment_id":101728693,"body_markdown":"I had considered this as workaround, but wanted to avoid converting the stream into a list first if possible. Thank you so much for your answer anyway.","body":"I had considered this as workaround, but wanted to avoid converting the stream into a list first if possible. Thank you so much for your answer anyway."},{"owner":{"account_id":355822,"reputation":1375,"user_id":694976,"accept_rate":78,"display_name":"Jo&#227;o Mendes"},"score":0,"creation_date":1639413533,"post_id":57638246,"comment_id":124336717,"body_markdown":"This doesn&#39;t work for streams of unknown (possibly infinite) size...","body":"This doesn&#39;t work for streams of unknown (possibly infinite) size..."}],"tags":[],"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1567003225,"creation_date":1566652083,"answer_id":57638246,"question_id":57638165,"body_markdown":"You can use an [`IntStream`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#mapToInt-java.util.function.ToIntFunction-) to solve this:\r\n\r\n    List&lt;String&gt; list = Arrays.asList(&quot;one&quot;,&quot;two&quot;,&quot;three&quot;);\r\n    Map&lt;Integer, String&gt; map = IntStream.range(0, list.size()).boxed()\r\n            .collect(Collectors.toMap(Function.identity(), list::get));\r\n\r\nYou create an `IntStream` from `0` to `list.size() - 1` ([`IntStream.range()`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#range-int-int-) excludes the last value from the stream) and map each index to the value in your list. The advantage of this solution is, that it will also work with parallel streams, which is not possible with the use of an `AtomicInteger`.\r\n\r\nSo the result in this case would be:\r\n\r\n    {0=one, 1=two, 2=three}\r\n\r\nTo start the first index at `1` you can just add `1` during collect:\r\n\r\n    List&lt;String&gt; list = Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;);\r\n    Map&lt;Integer, String&gt; map = IntStream.range(0, list.size()).boxed()\r\n            .collect(Collectors.toMap(i -&gt; i + 1, list::get));\r\n\r\nThis will result in this:\r\n\r\n    {1=one, 2=two, 3=three}","title":"How to map elements to their index using streams?","body":"<p>You can use an <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#mapToInt-java.util.function.ToIntFunction-\" rel=\"nofollow noreferrer\"><code>IntStream</code></a> to solve this:</p>\n\n<pre><code>List&lt;String&gt; list = Arrays.asList(\"one\",\"two\",\"three\");\nMap&lt;Integer, String&gt; map = IntStream.range(0, list.size()).boxed()\n        .collect(Collectors.toMap(Function.identity(), list::get));\n</code></pre>\n\n<p>You create an <code>IntStream</code> from <code>0</code> to <code>list.size() - 1</code> (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#range-int-int-\" rel=\"nofollow noreferrer\"><code>IntStream.range()</code></a> excludes the last value from the stream) and map each index to the value in your list. The advantage of this solution is, that it will also work with parallel streams, which is not possible with the use of an <code>AtomicInteger</code>.</p>\n\n<p>So the result in this case would be:</p>\n\n<pre><code>{0=one, 1=two, 2=three}\n</code></pre>\n\n<p>To start the first index at <code>1</code> you can just add <code>1</code> during collect:</p>\n\n<pre><code>List&lt;String&gt; list = Arrays.asList(\"one\", \"two\", \"three\");\nMap&lt;Integer, String&gt; map = IntStream.range(0, list.size()).boxed()\n        .collect(Collectors.toMap(i -&gt; i + 1, list::get));\n</code></pre>\n\n<p>This will result in this:</p>\n\n<pre><code>{1=one, 2=two, 3=three}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"score":6,"creation_date":1566653020,"post_id":57638312,"comment_id":101728759,"body_markdown":"Using `indexOf` is not quite a good idea, because of two reasons: It as a worse performance for large lists as it has a time complexity of _O(n)_ (for an `ArrayList`) and if the list contains a value more than one time you get a wrong result, as `indexOf` only returns the first index, so you will overwrite the first value.","body":"Using <code>indexOf</code> is not quite a good idea, because of two reasons: It as a worse performance for large lists as it has a time complexity of <i>O(n)</i> (for an <code>ArrayList</code>) and if the list contains a value more than one time you get a wrong result, as <code>indexOf</code> only returns the first index, so you will overwrite the first value."},{"owner":{"account_id":4816916,"reputation":16538,"user_id":3888766,"accept_rate":100,"display_name":"Fullstack Guy"},"score":1,"creation_date":1566653260,"post_id":57638312,"comment_id":101728820,"body_markdown":"@SamuelPhilipp what you is correct, even I have thought of that so this solution is applicable for a small list. But OP asked specifically that &quot;Is there a simple way to map elemnts of a stream to their indices&quot;, so OP wants the actual indices from the list. And yes if there are duplicates the last occurence of the element&#39;s index will be added in the map.","body":"@SamuelPhilipp what you is correct, even I have thought of that so this solution is applicable for a small list. But OP asked specifically that &quot;Is there a simple way to map elemnts of a stream to their indices&quot;, so OP wants the actual indices from the list. And yes if there are duplicates the last occurence of the element&#39;s index will be added in the map."},{"owner":{"account_id":16447219,"reputation":721,"user_id":11881663,"display_name":"nopens"},"score":0,"creation_date":1566653382,"post_id":57638312,"comment_id":101728853,"body_markdown":"Thank you for adding one mor approach. But this produce a `java.lang.IllegalStateException: Duplicate key one` if I add a duplicate string &#39;one&#39;, but will work if the list contains unique elements.","body":"Thank you for adding one mor approach. But this produce a <code>java.lang.IllegalStateException: Duplicate key one</code> if I add a duplicate string &#39;one&#39;, but will work if the list contains unique elements."},{"owner":{"account_id":4816916,"reputation":16538,"user_id":3888766,"accept_rate":100,"display_name":"Fullstack Guy"},"score":1,"creation_date":1566653684,"post_id":57638312,"comment_id":101728927,"body_markdown":"@nopens yes I forgot to add the `mergeFunction` in the last parameter of `toMap` which resolves the merge error for duplicate key","body":"@nopens yes I forgot to add the <code>mergeFunction</code> in the last parameter of <code>toMap</code> which resolves the merge error for duplicate key"}],"tags":[],"owner":{"account_id":4816916,"reputation":16538,"user_id":3888766,"accept_rate":100,"display_name":"Fullstack Guy"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1566654230,"creation_date":1566652694,"answer_id":57638312,"question_id":57638165,"body_markdown":"We can use the `List.indexOf(Object o)` method to get the index of the element in the list, while constructing the `Map`:\r\n\r\n     List&lt;String&gt; list = Arrays.asList(&quot;one&quot;,&quot;two&quot;,&quot;three&quot;);\r\n     Map&lt;Integer, String&gt; result = list.stream()\r\n                                       .collect(Collectors.toMap(\r\n                                        k -&gt; list.indexOf(k) + 1, \r\n                                        Function.identity(),\r\n                                        (v1, v2) -&gt; v2));\r\n                                        \r\n     System.out.println(result);\r\n\r\nIf there are duplicates in the list, the index of the first occurence of the element will be added in the final map. Also to resolve the merge error in the map during a key collision we need to ensure that there is a merge function supllied to the `toMap(keyMapper, valueMapper, mergeFunction)`\r\n\r\nOutput:\r\n\r\n    {1=one, 2=two, 3=three}","title":"How to map elements to their index using streams?","body":"<p>We can use the <code>List.indexOf(Object o)</code> method to get the index of the element in the list, while constructing the <code>Map</code>:</p>\n\n<pre><code> List&lt;String&gt; list = Arrays.asList(\"one\",\"two\",\"three\");\n Map&lt;Integer, String&gt; result = list.stream()\n                                   .collect(Collectors.toMap(\n                                    k -&gt; list.indexOf(k) + 1, \n                                    Function.identity(),\n                                    (v1, v2) -&gt; v2));\n\n System.out.println(result);\n</code></pre>\n\n<p>If there are duplicates in the list, the index of the first occurence of the element will be added in the final map. Also to resolve the merge error in the map during a key collision we need to ensure that there is a merge function supllied to the <code>toMap(keyMapper, valueMapper, mergeFunction)</code></p>\n\n<p>Output:</p>\n\n<pre><code>{1=one, 2=two, 3=three}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8129122,"reputation":1496,"user_id":6122976,"display_name":"wilmol"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1566722481,"creation_date":1566722481,"answer_id":57644505,"question_id":57638165,"body_markdown":"[Guava](https://github.com/google/guava) has a static method ```Streams#mapWithIndex```\r\n\r\n```\r\nStream&lt;String&gt; myStream = Stream.of(&quot;one&quot;,&quot;two&quot;,&quot;three&quot;);\r\nMap&lt;Long, String&gt; result3 = Streams.mapWithIndex(myStream, (s, i) -&gt; Maps.immutableEntry(i + 1, s))\r\n    .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n\r\n// {1=one, 2=two, 3=three}\r\nSystem.out.println(result3);\r\n```","title":"How to map elements to their index using streams?","body":"<p><a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\">Guava</a> has a static method <code>Streams#mapWithIndex</code></p>\n\n<pre><code>Stream&lt;String&gt; myStream = Stream.of(\"one\",\"two\",\"three\");\nMap&lt;Long, String&gt; result3 = Streams.mapWithIndex(myStream, (s, i) -&gt; Maps.immutableEntry(i + 1, s))\n    .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n\n// {1=one, 2=two, 3=three}\nSystem.out.println(result3);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1566811461,"creation_date":1566811461,"answer_id":57655144,"question_id":57638165,"body_markdown":"A clean solution not requiring random access source data, is\r\n\r\n    Map&lt;Integer,String&gt; result = Stream.of(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;)\r\n        .collect(HashMap::new, (m,s) -&gt; m.put(m.size() + 1, s),\r\n            (m1,m2) -&gt; {\r\n                int offset = m1.size();\r\n                m2.forEach((i,s) -&gt; m1.put(i + offset, s));\r\n            });\r\n\r\nThis also works with parallel streams.\r\n\r\nIn the unlikely case that this is a recurring task, it’s worth putting the logic into a reusable collector, including some optimizations:\r\n\r\n    public static &lt;T&gt; Collector&lt;T,?,Map&lt;Integer,T&gt;&gt; toIndexMap() {\r\n        return Collector.of(\r\n            HashMap::new,\r\n            (m,s) -&gt; m.put(m.size() + 1, s),\r\n            (m1,m2) -&gt; {\r\n                if(m1.isEmpty()) return m2;\r\n                if(!m2.isEmpty()) {\r\n                    int offset = m1.size();\r\n                    m2.forEach((i,s) -&gt; m1.put(i + offset, s));\r\n                }\r\n                return m1;\r\n            });\r\n    }\r\n\r\nWhich can then be used like\r\n\r\n    Map&lt;Integer,String&gt; result = Stream.of(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;)\r\n        .collect(MyCollectors.toIndexMap());\r\n\r\nor\r\n\r\n    Map&lt;Integer,Integer&gt; result = IntStream.rangeClosed(1, 1000)\r\n        .boxed().parallel()\r\n        .collect(MyCollectors.toIndexMap());\r\n","title":"How to map elements to their index using streams?","body":"<p>A clean solution not requiring random access source data, is</p>\n\n<pre><code>Map&lt;Integer,String&gt; result = Stream.of(\"one\", \"two\", \"three\")\n    .collect(HashMap::new, (m,s) -&gt; m.put(m.size() + 1, s),\n        (m1,m2) -&gt; {\n            int offset = m1.size();\n            m2.forEach((i,s) -&gt; m1.put(i + offset, s));\n        });\n</code></pre>\n\n<p>This also works with parallel streams.</p>\n\n<p>In the unlikely case that this is a recurring task, it’s worth putting the logic into a reusable collector, including some optimizations:</p>\n\n<pre><code>public static &lt;T&gt; Collector&lt;T,?,Map&lt;Integer,T&gt;&gt; toIndexMap() {\n    return Collector.of(\n        HashMap::new,\n        (m,s) -&gt; m.put(m.size() + 1, s),\n        (m1,m2) -&gt; {\n            if(m1.isEmpty()) return m2;\n            if(!m2.isEmpty()) {\n                int offset = m1.size();\n                m2.forEach((i,s) -&gt; m1.put(i + offset, s));\n            }\n            return m1;\n        });\n}\n</code></pre>\n\n<p>Which can then be used like</p>\n\n<pre><code>Map&lt;Integer,String&gt; result = Stream.of(\"one\", \"two\", \"three\")\n    .collect(MyCollectors.toIndexMap());\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Map&lt;Integer,Integer&gt; result = IntStream.rangeClosed(1, 1000)\n    .boxed().parallel()\n    .collect(MyCollectors.toIndexMap());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19984783,"reputation":124,"user_id":14647130,"display_name":"David"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672346206,"creation_date":1650031643,"answer_id":71885044,"question_id":57638165,"body_markdown":"Late to the party, but this problem can be solved very elegantly using a custom Collector - which means the source of the stream can be anything beside Collection:\r\n```java\r\nList&lt;String&gt; names = List.of(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;);\r\n\r\nnames.stream()\r\n.collect(indexed())\r\n.forEach((number, name) -&gt; System.out.println(&quot;%d: %s&quot;.formatted(number, name)));\r\n```\r\n\r\nThe Collector which you should statically import:\r\n\r\n```\r\npublic static &lt;T, R&gt; Collector&lt;T, ?, Map&lt;Integer, T&gt;&gt; indexed()\r\n{\r\n\treturn Collector.of(\r\n\t\t\tLinkedHashMap::new, \r\n\t\t\t(map, element) -&gt; map.put(map.size() +1, element), \r\n\t\t\t(left, right) -&gt; {left.putAll(right); return left;});\r\n}\r\n```","title":"How to map elements to their index using streams?","body":"<p>Late to the party, but this problem can be solved very elegantly using a custom Collector - which means the source of the stream can be anything beside Collection:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; names = List.of(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;);\n\nnames.stream()\n.collect(indexed())\n.forEach((number, name) -&gt; System.out.println(&quot;%d: %s&quot;.formatted(number, name)));\n</code></pre>\n<p>The Collector which you should statically import:</p>\n<pre><code>public static &lt;T, R&gt; Collector&lt;T, ?, Map&lt;Integer, T&gt;&gt; indexed()\n{\n    return Collector.of(\n            LinkedHashMap::new, \n            (map, element) -&gt; map.put(map.size() +1, element), \n            (left, right) -&gt; {left.putAll(right); return left;});\n}\n</code></pre>\n"}],"owner":{"account_id":16447219,"reputation":721,"user_id":11881663,"display_name":"nopens"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16279,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":57638229,"answer_count":7,"score":17,"last_activity_date":1672346206,"creation_date":1566651540,"question_id":57638165,"body_markdown":"I get a stream of some custom objects and I would like to create a map `Map&lt;Integer, MyObject&gt;` with index of each object as key. To give you a simple example:\r\n\r\n    Stream&lt;String&gt; myStream = Arrays.asList(&quot;one&quot;,&quot;two&quot;,&quot;three&quot;).stream();\r\n    Integer i = 0;\r\n    Map&lt;Integer, String&gt; result3 = myStream.collect(Collectors.toMap(x -&gt; i++, x -&gt; x));\r\n\r\nObviously, this doesn&#39;t compile because:\r\n\r\n&gt; local variables referenced from a lambda expression must be final or\r\n&gt; effectively final\r\n\r\nIs there a simple way to map elemnts of a stream to their indices so that the expected output for above example is something like:\r\n\r\n    {1=one, 2=two, 3=three}","title":"How to map elements to their index using streams?","body":"<p>I get a stream of some custom objects and I would like to create a map <code>Map&lt;Integer, MyObject&gt;</code> with index of each object as key. To give you a simple example:</p>\n\n<pre><code>Stream&lt;String&gt; myStream = Arrays.asList(\"one\",\"two\",\"three\").stream();\nInteger i = 0;\nMap&lt;Integer, String&gt; result3 = myStream.collect(Collectors.toMap(x -&gt; i++, x -&gt; x));\n</code></pre>\n\n<p>Obviously, this doesn't compile because:</p>\n\n<blockquote>\n  <p>local variables referenced from a lambda expression must be final or\n  effectively final</p>\n</blockquote>\n\n<p>Is there a simple way to map elemnts of a stream to their indices so that the expected output for above example is something like:</p>\n\n<pre><code>{1=one, 2=two, 3=three}\n</code></pre>\n"},{"tags":["java","html","string","href"],"comments":[{"owner":{"account_id":4874824,"reputation":8171,"user_id":3930247,"accept_rate":78,"display_name":"technophyle"},"score":0,"creation_date":1672344398,"post_id":74955577,"comment_id":132273148,"body_markdown":"first try to add a random string literal such as `google.com` and see if it works.","body":"first try to add a random string literal such as <code>google.com</code> and see if it works."},{"owner":{"account_id":12585926,"reputation":357,"user_id":9154835,"display_name":"elads11"},"score":0,"creation_date":1672344602,"post_id":74955577,"comment_id":132273199,"body_markdown":"This one also didn&#39;t work: &quot;&lt;a href= &#39;google.com&#39;&gt;Click here to see the value&lt;/a&gt;&quot;","body":"This one also didn&#39;t work: &quot;&lt;a href= &#39;google.com&#39;&gt;Click here to see the value&lt;/a&gt;&quot;"},{"owner":{"account_id":4874824,"reputation":8171,"user_id":3930247,"accept_rate":78,"display_name":"technophyle"},"score":0,"creation_date":1672344692,"post_id":74955577,"comment_id":132273224,"body_markdown":"what do you get when you inspect the link in dev tools?","body":"what do you get when you inspect the link in dev tools?"},{"owner":{"account_id":12585926,"reputation":357,"user_id":9154835,"display_name":"elads11"},"score":0,"creation_date":1672345023,"post_id":74955577,"comment_id":132273322,"body_markdown":"I see href=&quot;google.com&quot;, but when I put the cursor on the google.com link I see that the path is: file:/// and path to my java automation path and then the google.com. So the problem is because of it?","body":"I see href=&quot;google.com&quot;, but when I put the cursor on the google.com link I see that the path is: file:/// and path to my java automation path and then the google.com. So the problem is because of it?"},{"owner":{"account_id":4874824,"reputation":8171,"user_id":3930247,"accept_rate":78,"display_name":"technophyle"},"score":0,"creation_date":1672345066,"post_id":74955577,"comment_id":132273333,"body_markdown":"yeah probably. add `https://` at the beginning and it&#39;ll probably work.","body":"yeah probably. add <code>https:&#47;&#47;</code> at the beginning and it&#39;ll probably work."},{"owner":{"account_id":12585926,"reputation":357,"user_id":9154835,"display_name":"elads11"},"score":0,"creation_date":1672345202,"post_id":74955577,"comment_id":132273377,"body_markdown":"At the beginning of where?","body":"At the beginning of where?"},{"owner":{"account_id":4874824,"reputation":8171,"user_id":3930247,"accept_rate":78,"display_name":"technophyle"},"score":2,"creation_date":1672345248,"post_id":74955577,"comment_id":132273387,"body_markdown":"`https://google.com`, or `&#39;https://&#39; + myString`","body":"<code>https:&#47;&#47;google.com</code>, or <code>&#39;https:&#47;&#47;&#39; + myString</code>"},{"owner":{"account_id":12585926,"reputation":357,"user_id":9154835,"display_name":"elads11"},"score":0,"creation_date":1672345899,"post_id":74955577,"comment_id":132273554,"body_markdown":"Ok, now on the inspect it shows http:// and the value itself, but not showing on the actual new page.","body":"Ok, now on the inspect it shows http:// and the value itself, but not showing on the actual new page."}],"owner":{"account_id":12585926,"reputation":357,"user_id":9154835,"display_name":"elads11"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672346205,"creation_date":1672344227,"question_id":74955577,"body_markdown":"I&#39;ve tried to create an additional link to an existing report page that will display content of a string. However, when clicking on the link, it leads to a grey page with the message:\r\nIt may have been moved, edited, or deleted.\r\nThis is a snippet of the hyperlink I&#39;m trying to create which is saved as a string in Java:\r\n\r\n```java\r\n//myString is the string containg the value I want to display on the new page\r\nString myString = &quot;Value to be displaayed on new page&quot;;\r\nString newLink = &quot;&lt;a href= &#39;&quot; + myString + &quot;&#39;&gt;Click here to see the value&lt;/a&gt;&quot;;\r\n```\r\n\r\nThis is how the link is on my html page, when clicking on it, it is not presenting myString value.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/p0t0n.png\r\n\r\nWhat is the problem? \r\n","title":"Creating an HTML link that leads to a page with value of java string","body":"<p>I've tried to create an additional link to an existing report page that will display content of a string. However, when clicking on the link, it leads to a grey page with the message:\nIt may have been moved, edited, or deleted.\nThis is a snippet of the hyperlink I'm trying to create which is saved as a string in Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//myString is the string containg the value I want to display on the new page\nString myString = &quot;Value to be displaayed on new page&quot;;\nString newLink = &quot;&lt;a href= '&quot; + myString + &quot;'&gt;Click here to see the value&lt;/a&gt;&quot;;\n</code></pre>\n<p>This is how the link is on my html page, when clicking on it, it is not presenting myString value.</p>\n<p><a href=\"https://i.stack.imgur.com/p0t0n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p0t0n.png\" alt=\"enter image description here\" /></a></p>\n<p>What is the problem?</p>\n"},{"tags":["java","cucumber"],"comments":[{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1672351227,"post_id":74955810,"comment_id":132274734,"body_markdown":"What does your project structure look like? If you&#39;ve created your own structure, consider following the conventions. You can find an example in: https://github.com/cucumber/cucumber-java-skeleton","body":"What does your project structure look like? If you&#39;ve created your own structure, consider following the conventions. You can find an example in: <a href=\"https://github.com/cucumber/cucumber-java-skeleton\" rel=\"nofollow noreferrer\">github.com/cucumber/cucumber-java-skeleton</a>"}],"owner":{"account_id":27385914,"reputation":1,"user_id":20889721,"display_name":"ksjdh234"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672345959,"creation_date":1672345916,"question_id":74955810,"body_markdown":"[running from file](https://i.stack.imgur.com/3OSaf.png)\r\n\r\n[running from folder](https://i.stack.imgur.com/TLfDm.png)\r\n\r\nBoth options run the same test cases. If I run from the actual file(pic 1), I successfully pass my test cases. If I run from right clicking the test folder, I fail them. I have confirmed that they are the same. Anybody know what could cause this?\r\n\r\n","title":"Cucumber test cases passing when run from file but not from folder","body":"<p><a href=\"https://i.stack.imgur.com/3OSaf.png\" rel=\"nofollow noreferrer\">running from file</a></p>\n<p><a href=\"https://i.stack.imgur.com/TLfDm.png\" rel=\"nofollow noreferrer\">running from folder</a></p>\n<p>Both options run the same test cases. If I run from the actual file(pic 1), I successfully pass my test cases. If I run from right clicking the test folder, I fail them. I have confirmed that they are the same. Anybody know what could cause this?</p>\n"},{"tags":["java","design-patterns","factory"],"answers":[{"comments":[{"owner":{"account_id":19691546,"reputation":33,"user_id":14416381,"display_name":"Devdatta"},"score":0,"creation_date":1672367936,"post_id":74955605,"comment_id":132277195,"body_markdown":"Thanks @Mike . ensureInitialized() was the missing trick, which is forcing the class to be loaded. It is unclear to me why ProductOne was getting loaded to the Map, as I double checked and haven&#39;t found any usage of this class at all. Your solution works for me as I can customize your code to call for &#39;Class.forName()&#39; only when I dont find the requested class on Map (and then again checking for it on the Map, before throwing Exception). Thank you.","body":"Thanks @Mike . ensureInitialized() was the missing trick, which is forcing the class to be loaded. It is unclear to me why ProductOne was getting loaded to the Map, as I double checked and haven&#39;t found any usage of this class at all. Your solution works for me as I can customize your code to call for &#39;Class.forName()&#39; only when I dont find the requested class on Map (and then again checking for it on the Map, before throwing Exception). Thank you."}],"tags":[],"owner":{"account_id":26645528,"reputation":46,"user_id":20368478,"display_name":"MikeW"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672345267,"creation_date":1672344443,"answer_id":74955605,"question_id":74954819,"body_markdown":"The problem is likely that the subclass has not been initialized or probably even loaded, so the static initializer has not run, and the subclass has not been registered.\r\n\r\nTypically, the static initializer will not run until the first invocation of either a static method or constructor. (Referencing the `Class&lt;?&gt;` object will load but not initialize the class.) I suspect you had some other code not shown here that triggered the static initializer for `ProductOne`.\r\n\r\nHere&#39;s one solution, assuming that you&#39;re OK using a `Class&lt;?&gt;` as the lookup key instead of a `String`.\r\n\r\n`Product.java`\r\n\r\n\r\n```java\r\npublic abstract class Product {\r\n\r\n    private static Map&lt;Class&lt;? extends Product&gt;, Product&gt; instances = new ConcurrentHashMap&lt;&gt;();\r\n\r\n    /** Gets the singleton instance for the provided product type. */\r\n    public static Product instanceOfType(Class&lt;? extends Product&gt; productType) {\r\n        ensureInitialized(productType);\r\n        Product instance = instances.get(productType);\r\n        return Objects.requireNonNull(instance, productType.getCanonicalName());\r\n    }\r\n\r\n    public abstract String getName();\r\n\r\n    /**\r\n     * Registers the singleton instance for the provided product type.\r\n     *\r\n     * &lt;p&gt;Each concrete subclass should invoke this method in its static initializer.&lt;/p&gt;\r\n     */\r\n    protected static &lt;P extends Product&gt; void register(Class&lt;P&gt; productType, P product) {\r\n        instances.put(productType, product);\r\n    }\r\n\r\n    /** Ensures that a class has been statically initialized. */\r\n    private static void ensureInitialized(Class&lt;?&gt; clazz) {\r\n        try {\r\n            Class.forName(clazz.getCanonicalName(), true, clazz.getClassLoader());\r\n        } catch (ClassNotFoundException e) {\r\n            throw new RuntimeException(e); // unexpected\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n`ProductOne.java`\r\n\r\n```java\r\npublic final class ProductOne extends Product {\r\n\r\n    static {\r\n        Product.register(ProductOne.class, new ProductOne());\r\n    }\r\n\r\n    private ProductOne() {}\r\n\r\n    @Override\r\n    public String getName() {\r\n        return &quot;one&quot;;\r\n    }\r\n}\r\n```\r\n\r\n`Main.java`\r\n\r\n```java\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n        Product productOne = Product.instanceOfType(ProductOne.class);\r\n        System.out.println(productOne.getName());\r\n    }\r\n    \r\n    // static class\r\n    private Main() {}\r\n}\r\n```","title":"Factory DesignPattern with registering the subclasses using static blocks","body":"<p>The problem is likely that the subclass has not been initialized or probably even loaded, so the static initializer has not run, and the subclass has not been registered.</p>\n<p>Typically, the static initializer will not run until the first invocation of either a static method or constructor. (Referencing the <code>Class&lt;?&gt;</code> object will load but not initialize the class.) I suspect you had some other code not shown here that triggered the static initializer for <code>ProductOne</code>.</p>\n<p>Here's one solution, assuming that you're OK using a <code>Class&lt;?&gt;</code> as the lookup key instead of a <code>String</code>.</p>\n<p><code>Product.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class Product {\n\n    private static Map&lt;Class&lt;? extends Product&gt;, Product&gt; instances = new ConcurrentHashMap&lt;&gt;();\n\n    /** Gets the singleton instance for the provided product type. */\n    public static Product instanceOfType(Class&lt;? extends Product&gt; productType) {\n        ensureInitialized(productType);\n        Product instance = instances.get(productType);\n        return Objects.requireNonNull(instance, productType.getCanonicalName());\n    }\n\n    public abstract String getName();\n\n    /**\n     * Registers the singleton instance for the provided product type.\n     *\n     * &lt;p&gt;Each concrete subclass should invoke this method in its static initializer.&lt;/p&gt;\n     */\n    protected static &lt;P extends Product&gt; void register(Class&lt;P&gt; productType, P product) {\n        instances.put(productType, product);\n    }\n\n    /** Ensures that a class has been statically initialized. */\n    private static void ensureInitialized(Class&lt;?&gt; clazz) {\n        try {\n            Class.forName(clazz.getCanonicalName(), true, clazz.getClassLoader());\n        } catch (ClassNotFoundException e) {\n            throw new RuntimeException(e); // unexpected\n        }\n    }\n}\n</code></pre>\n<p><code>ProductOne.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class ProductOne extends Product {\n\n    static {\n        Product.register(ProductOne.class, new ProductOne());\n    }\n\n    private ProductOne() {}\n\n    @Override\n    public String getName() {\n        return &quot;one&quot;;\n    }\n}\n</code></pre>\n<p><code>Main.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n\n    public static void main(String[] args) {\n        Product productOne = Product.instanceOfType(ProductOne.class);\n        System.out.println(productOne.getName());\n    }\n    \n    // static class\n    private Main() {}\n}\n</code></pre>\n"}],"owner":{"account_id":19691546,"reputation":33,"user_id":14416381,"display_name":"Devdatta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74955605,"answer_count":1,"score":0,"last_activity_date":1672345267,"creation_date":1672338618,"question_id":74954819,"body_markdown":"I am trying to implement Factory design patter, without using reflection. The goal is, as and when subclasses of `Product` are added to the project, their instances should be available in the objectPool.\r\n\r\nThe code is as below : \r\nFactory Class\r\n\r\n```\r\npublic abstract class ProductFactory {\r\n  protected static final Map&lt;String, Supplier&lt;Product&gt;&gt; productSingletonObjPool = new HashMap&lt;&gt;();\r\n\r\n  static {\r\n    /*\r\n    //registering the sub_class-types statically. This obviously works fine.\r\n    productSingletonObjPool.put(ProductOne.class.getSimpleName(), ProductOne::getInstance);\r\n      productSingletonObjPool.put(ProductTwo.class.getSimpleName(), ProductTwo::getInstance);\r\n    */\r\n  }\r\n\r\n  public static Map&lt;String, Supplier&lt;Product&gt;&gt; getProductSingletonObjPool() {\r\n    return productSingletonObjPool;\r\n  }\r\n\r\n  public static void register(Class type, Supplier&lt;Product&gt; supplier) {\r\n    productSingletonObjPool.put(type.getSimpleName(), supplier);\r\n  }\r\n\r\n  protected static Product getInstanceOfType(String type) {\r\n    Supplier&lt;Product&gt; productSupplier = productSingletonObjPool.get(type);\r\n    if (productSupplier != null) return productSupplier.get();\r\n    throw new RuntimeException(&quot;No such product with name &quot; + type + &quot; exists&quot;);\r\n  }\r\n}\r\n```\r\n\r\n\r\nAbstract Product Class\r\n\r\n```\r\npublic abstract class Product {\r\n\r\n\r\n  protected static void register(Class type, Supplier&lt;Product&gt; supplier) {\r\n    if (!ProductFactory.getProductSingletonObjPool().containsKey(type.getSimpleName())) {\r\n      ProductFactory.register(type, supplier);\r\n    }\r\n  }\r\n\r\n}\r\n```\r\n\r\n\r\nConcrete ProductOne\r\n\r\n```\r\npublic class ProductOne extends Product {\r\n\r\n  static {\r\n    Product.register(ProductOne.class, ProductOne::new);\r\n  }\r\n\r\n  private ProductOne() {}\r\n\r\n  protected static Product getInstance() {\r\n    return new ProductOne();\r\n  }\r\n}\r\n```\r\n\r\n\r\nConcreate ProductTwo\r\n\r\n```\r\npublic class ProductTwo extends Product {\r\n\r\n  static {\r\n    Product.register(ProductTwo.class, ProductTwo::new);\r\n  }\r\n\r\n  private ProductTwo() {}\r\n\r\n  protected static Product getInstance() {\r\n    return new ProductTwo();\r\n  }\r\n}\r\n```\r\n\r\n\r\nTest Class\r\n\r\n```\r\n@Test\r\npublic void testFactory() {\r\n  Product one = ProductFactory.getInstanceOfType(&quot;ProductOne&quot;);\r\n  System.out.println(&quot;Product One : &quot; + one);\r\n  Product two = ProductFactory.getInstanceOfType(&quot;ProductTwo&quot;);\r\n  System.out.println(&quot;Product Two: &quot; + two);\r\n}\r\n```\r\n\r\nProblem : the Map always gets populated with ProductOne. This behaviour is same as captured in this thread: https://stackoverflow.com/questions/29895545/fill-a-hashmap-in-superclass-from-subclass-constructor-in-java\r\nHowever, My code is different than the code from this thread, though it encounters the behavior mentioned in there i.e. map always getting populated with one Supplier&lt;Product&gt; (in my case, its ProductOne::new). \r\n\r\nI would like to know : \r\n1. The reason behind this behavior\r\n2. Any solution for this?\r\n\r\n\r\nI believe the static blocks get executed when classes are loaded. I expected that static blocks of both ProductOne and ProductTwo be executed and have the productSingletonObjPool map populated with their Suppliers. This didn&#39;t happen though...map only got populated with ProductOne&#39;s supplier, as if, JVM only looked for &#39;a&#39; class that extended the abstract Product class and then stopped loading additional classes which extend Product class.\r\nI also tried to debug this, but breakpoints on static blocks are skipped by debugger.\r\n\r\nI looked into these threads, as prompted by stackoverflow, but didn&#39;t find solution to my problem : \r\n\r\n - https://stackoverflow.com/questions/49603064/c-sharp-class-factory-with-subclasses\r\n - https://stackoverflow.com/questions/5704397/factory-implemented-with-static-method\r\n - https://stackoverflow.com/questions/10698516/behavior-of-static-blocks-with-inheritance","title":"Factory DesignPattern with registering the subclasses using static blocks","body":"<p>I am trying to implement Factory design patter, without using reflection. The goal is, as and when subclasses of <code>Product</code> are added to the project, their instances should be available in the objectPool.</p>\n<p>The code is as below :\nFactory Class</p>\n<pre><code>public abstract class ProductFactory {\n  protected static final Map&lt;String, Supplier&lt;Product&gt;&gt; productSingletonObjPool = new HashMap&lt;&gt;();\n\n  static {\n    /*\n    //registering the sub_class-types statically. This obviously works fine.\n    productSingletonObjPool.put(ProductOne.class.getSimpleName(), ProductOne::getInstance);\n      productSingletonObjPool.put(ProductTwo.class.getSimpleName(), ProductTwo::getInstance);\n    */\n  }\n\n  public static Map&lt;String, Supplier&lt;Product&gt;&gt; getProductSingletonObjPool() {\n    return productSingletonObjPool;\n  }\n\n  public static void register(Class type, Supplier&lt;Product&gt; supplier) {\n    productSingletonObjPool.put(type.getSimpleName(), supplier);\n  }\n\n  protected static Product getInstanceOfType(String type) {\n    Supplier&lt;Product&gt; productSupplier = productSingletonObjPool.get(type);\n    if (productSupplier != null) return productSupplier.get();\n    throw new RuntimeException(&quot;No such product with name &quot; + type + &quot; exists&quot;);\n  }\n}\n</code></pre>\n<p>Abstract Product Class</p>\n<pre><code>public abstract class Product {\n\n\n  protected static void register(Class type, Supplier&lt;Product&gt; supplier) {\n    if (!ProductFactory.getProductSingletonObjPool().containsKey(type.getSimpleName())) {\n      ProductFactory.register(type, supplier);\n    }\n  }\n\n}\n</code></pre>\n<p>Concrete ProductOne</p>\n<pre><code>public class ProductOne extends Product {\n\n  static {\n    Product.register(ProductOne.class, ProductOne::new);\n  }\n\n  private ProductOne() {}\n\n  protected static Product getInstance() {\n    return new ProductOne();\n  }\n}\n</code></pre>\n<p>Concreate ProductTwo</p>\n<pre><code>public class ProductTwo extends Product {\n\n  static {\n    Product.register(ProductTwo.class, ProductTwo::new);\n  }\n\n  private ProductTwo() {}\n\n  protected static Product getInstance() {\n    return new ProductTwo();\n  }\n}\n</code></pre>\n<p>Test Class</p>\n<pre><code>@Test\npublic void testFactory() {\n  Product one = ProductFactory.getInstanceOfType(&quot;ProductOne&quot;);\n  System.out.println(&quot;Product One : &quot; + one);\n  Product two = ProductFactory.getInstanceOfType(&quot;ProductTwo&quot;);\n  System.out.println(&quot;Product Two: &quot; + two);\n}\n</code></pre>\n<p>Problem : the Map always gets populated with ProductOne. This behaviour is same as captured in this thread: <a href=\"https://stackoverflow.com/questions/29895545/fill-a-hashmap-in-superclass-from-subclass-constructor-in-java\">Fill a hashmap in superclass from subclass constructor in Java</a>\nHowever, My code is different than the code from this thread, though it encounters the behavior mentioned in there i.e. map always getting populated with one Supplier (in my case, its ProductOne::new).</p>\n<p>I would like to know :</p>\n<ol>\n<li>The reason behind this behavior</li>\n<li>Any solution for this?</li>\n</ol>\n<p>I believe the static blocks get executed when classes are loaded. I expected that static blocks of both ProductOne and ProductTwo be executed and have the productSingletonObjPool map populated with their Suppliers. This didn't happen though...map only got populated with ProductOne's supplier, as if, JVM only looked for 'a' class that extended the abstract Product class and then stopped loading additional classes which extend Product class.\nI also tried to debug this, but breakpoints on static blocks are skipped by debugger.</p>\n<p>I looked into these threads, as prompted by stackoverflow, but didn't find solution to my problem :</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/49603064/c-sharp-class-factory-with-subclasses\">C# class factory with subclasses</a></li>\n<li><a href=\"https://stackoverflow.com/questions/5704397/factory-implemented-with-static-method\">Factory implemented with static method</a></li>\n<li><a href=\"https://stackoverflow.com/questions/10698516/behavior-of-static-blocks-with-inheritance\">Behavior of static blocks with inheritance</a></li>\n</ul>\n"},{"tags":["java","spring","spring-boot","performance"],"owner":{"account_id":8374114,"reputation":192,"user_id":6288191,"accept_rate":33,"display_name":"Guru"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672344904,"creation_date":1672344904,"question_id":74955685,"body_markdown":"Currently in my application, I have created a validation service that validates certain fields between two objects. The ask is that, we must implement a percentage based routing logic based on which the requests will be sent to another service. For example, if I set the percentage as 10 in application properties file of my Springboot application, then only 10% of the overall requests should go to my service after which they will no longer be sent.\r\n\r\nThe reason for implementing this is because sometimes we can get between a thousand to a million requests, if the traffic is too high, we don&#39;t want to waste our resources on a less priority service.\r\n\r\nI am very confused on how to begin this. I am not sure how to even determine the percentage because the number of requests per day or per hour varies a lot on a day to day basis.\r\n\r\nMy application is a Java Spring boot application. Is there any existing routing logic that I can use or any pseudo code that can help me out?","title":"How can we implement a routing logic to control the percentage of traffic hitting a service?","body":"<p>Currently in my application, I have created a validation service that validates certain fields between two objects. The ask is that, we must implement a percentage based routing logic based on which the requests will be sent to another service. For example, if I set the percentage as 10 in application properties file of my Springboot application, then only 10% of the overall requests should go to my service after which they will no longer be sent.</p>\n<p>The reason for implementing this is because sometimes we can get between a thousand to a million requests, if the traffic is too high, we don't want to waste our resources on a less priority service.</p>\n<p>I am very confused on how to begin this. I am not sure how to even determine the percentage because the number of requests per day or per hour varies a lot on a day to day basis.</p>\n<p>My application is a Java Spring boot application. Is there any existing routing logic that I can use or any pseudo code that can help me out?</p>\n"},{"tags":["java","docker","junit","jenkins-pipeline","testcontainers"],"comments":[{"owner":{"account_id":2537085,"reputation":6205,"user_id":2203890,"display_name":"Edd&#250; Mel&#233;ndez"},"score":0,"creation_date":1667865995,"post_id":74352450,"comment_id":131265591,"body_markdown":"have you mount the socket from host in your container as mentioned https://www.testcontainers.org/supported_docker_environment/continuous_integration/dind_patterns/#docker-only-example?","body":"have you mount the socket from host in your container as mentioned <a href=\"https://www.testcontainers.org/supported_docker_environment/continuous_integration/dind_patterns/#docker-only-example\" rel=\"nofollow noreferrer\">testcontainers.org/supported_docker_environment/&hellip;</a>?"},{"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1669277942,"post_id":74352450,"comment_id":131609426,"body_markdown":"I think you need docker in docker support on your Jenkins machine","body":"I think you need docker in docker support on your Jenkins machine"}],"answers":[{"tags":[],"owner":{"account_id":5826684,"reputation":2011,"user_id":4592796,"accept_rate":70,"display_name":"harry-potter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667856834,"creation_date":1667856834,"answer_id":74353184,"question_id":74352450,"body_markdown":"Are you sure the machine on which Jenkins is installed is also running the Docker process? \r\n\r\nIn order to use test-containers, Docker must be installed and running on the machine on which you are running the tests. \r\nThe solution is to install and run the Docker process on the CI/CD machine.  \r\n\r\nFor example: try turning off your local instance of Docker and launching testcontainers tests. You will get something like this:\r\n\r\n    java.lang.IllegalStateException: Could not find a valid Docker environment. Please see logs and check configuration\r\n    \r\n    \tat org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$getFirstValidStrategy$6(DockerClientProviderStrategy.java:242)\r\n    \tat java.base/java.util.Optional.orElseThrow(Optional.java:408)\r\n    \tat org.testcontainers.dockerclient.DockerClientProviderStrategy.getFirstValidStrategy(DockerClientProviderStrategy.java:234)\r\n    \tat org.testcontainers.DockerClientFactory.getOrInitializeStrategy(DockerClientFactory.java:135)\r\n    \tat org.testcontainers.DockerClientFactory.client(DockerClientFactory.java:176)\r\n    \tat org.testcontainers.DockerClientFactory$1.getDockerClient(DockerClientFactory.java:90)\r\n    \tat com.github.dockerjava.api.DockerClientDelegate.authConfig(DockerClientDelegate.java:108)\r\n    \tat org.testcontainers.containers.GenericContainer.start(GenericContainer.java:325)\r\n    \tat org.testcontainers.junit.jupiter.TestcontainersExtension$StoreAdapter.start(TestcontainersExtension.java:242)\r\n    \tat org.testcontainers.junit.jupiter.TestcontainersExtension$StoreAdapter.access$200(TestcontainersExtension.java:229)\r\n    \tat org.testcontainers.junit.jupiter.TestcontainersExtension.lambda$null$1(TestcontainersExtension.java:59)\r\n    \tat org.junit.jupiter.engine.execution.ExtensionValuesStore.lambda$getOrComputeIfAbsent$4(ExtensionValuesStore.java:86)\r\n    \tat org.junit.jupiter.engine.execution.ExtensionValuesStore$MemoizingSupplier.computeValue(ExtensionValuesStore.java:223)\r\n    \tat org.junit.jupiter.engine.execution.ExtensionValuesStore$MemoizingSupplier.get(ExtensionValuesStore.java:211)\r\n    \tat org.junit.jupiter.engine.execution.ExtensionValuesStore$StoredValue.evaluate(ExtensionValuesStore.java:191)\r\n    \tat org.junit.jupiter.engine.execution.ExtensionValuesStore$StoredValue.access$100(ExtensionValuesStore.java:171)\r\n    \tat org.junit.jupiter.engine.execution.ExtensionValuesStore.getOrComputeIfAbsent(ExtensionValuesStore.java:89)\r\n    \tat org.junit.jupiter.engine.execution.NamespaceAwareStore.getOrComputeIfAbsent(NamespaceAwareStore.java:53)\r\n    \tat org.testcontainers.junit.jupiter.TestcontainersExtension.lambda$beforeAll$2(TestcontainersExtension.java:59)\r\n    \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1540)\r\n    \tat org.testcontainers.junit.jupiter.TestcontainersExtension.beforeAll(TestcontainersExtension.java:59)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeBeforeAllCallbacks$10(ClassBasedTestDescriptor.java:381)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeBeforeAllCallbacks(ClassBasedTestDescriptor.java:381)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:205)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:80)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:148)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n    \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1540)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n    \tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n    \tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\r\n    \tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n    \tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n    \tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n    \tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n    \tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n\r\n","title":"Testcontainer not able to start within PCF CI/CD Jenkins pipeline - container-inside-container problem?","body":"<p>Are you sure the machine on which Jenkins is installed is also running the Docker process?</p>\n<p>In order to use test-containers, Docker must be installed and running on the machine on which you are running the tests.\nThe solution is to install and run the Docker process on the CI/CD machine.</p>\n<p>For example: try turning off your local instance of Docker and launching testcontainers tests. You will get something like this:</p>\n<pre><code>java.lang.IllegalStateException: Could not find a valid Docker environment. Please see logs and check configuration\n\n    at org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$getFirstValidStrategy$6(DockerClientProviderStrategy.java:242)\n    at java.base/java.util.Optional.orElseThrow(Optional.java:408)\n    at org.testcontainers.dockerclient.DockerClientProviderStrategy.getFirstValidStrategy(DockerClientProviderStrategy.java:234)\n    at org.testcontainers.DockerClientFactory.getOrInitializeStrategy(DockerClientFactory.java:135)\n    at org.testcontainers.DockerClientFactory.client(DockerClientFactory.java:176)\n    at org.testcontainers.DockerClientFactory$1.getDockerClient(DockerClientFactory.java:90)\n    at com.github.dockerjava.api.DockerClientDelegate.authConfig(DockerClientDelegate.java:108)\n    at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:325)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension$StoreAdapter.start(TestcontainersExtension.java:242)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension$StoreAdapter.access$200(TestcontainersExtension.java:229)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension.lambda$null$1(TestcontainersExtension.java:59)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore.lambda$getOrComputeIfAbsent$4(ExtensionValuesStore.java:86)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore$MemoizingSupplier.computeValue(ExtensionValuesStore.java:223)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore$MemoizingSupplier.get(ExtensionValuesStore.java:211)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore$StoredValue.evaluate(ExtensionValuesStore.java:191)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore$StoredValue.access$100(ExtensionValuesStore.java:171)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore.getOrComputeIfAbsent(ExtensionValuesStore.java:89)\n    at org.junit.jupiter.engine.execution.NamespaceAwareStore.getOrComputeIfAbsent(NamespaceAwareStore.java:53)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension.lambda$beforeAll$2(TestcontainersExtension.java:59)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension.beforeAll(TestcontainersExtension.java:59)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeBeforeAllCallbacks$10(ClassBasedTestDescriptor.java:381)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeBeforeAllCallbacks(ClassBasedTestDescriptor.java:381)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:205)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:80)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:148)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8491832,"reputation":51,"user_id":6367888,"display_name":"prabalpratap singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672344093,"creation_date":1672344093,"answer_id":74955560,"question_id":74352450,"body_markdown":"It Seems like , where test code is running docker service is not running on the same machine so this issue is occurred.","title":"Testcontainer not able to start within PCF CI/CD Jenkins pipeline - container-inside-container problem?","body":"<p>It Seems like , where test code is running docker service is not running on the same machine so this issue is occurred.</p>\n"}],"owner":{"account_id":19950030,"reputation":63,"user_id":14638259,"display_name":"Leandro Costa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":717,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1672344093,"creation_date":1667852191,"question_id":74352450,"body_markdown":"I&#39;ve been trying to use the Testcontainers library with my current Jenkins CI/CD pipeline for postgres DB integration tests. I was previously using an embedded postgres library, but now in my jenkins pipeline I do all the steps inside a container, and I wasn&#39;t able to make it work. Then I came across the Testcontainers project which seems to be a pretty good alternative for my Java Spring project.\r\n\r\nI&#39;ve been following this [article](https://jschmitz.dev/posts/testcontainers_how_to_use_them_in_your_spring_boot_integration_tests/) and it states that we most likely don&#39;t have to change anything for CI environmets because testcontainers recognizes that it&#39;s running inside a container and it supports it. Also, in testcontainer&#39;s official documentation there&#39;s [this](https://www.testcontainers.org/supported_docker_environment/continuous_integration/dind_patterns/).\r\n\r\nSo, apparently it&#39;s supposed to work even if we are running the integration tests within a containerized environment, but when I try it I get the following error in my integration tests:\r\n`ERROR org.testcontainers.dockerclient.DockerClientProviderStrategy - Could not find a valid Docker environment. Please check configuration.`\r\n\r\nThis is my jenkinsfile (I use PCF)\r\n\r\n```\r\nnode(&#39;pcf-node&#39;) {\r\n        container(&#39;jdk17-container&#39;) {\r\n            ...\r\n            stage(&#39;integration testing&#39;) {\r\n                currentStep = &quot;${env.STAGE_NAME}&quot;\r\n                runIntegrationTests()\r\n            }\r\n\t    ...\r\n\t}\r\n}\r\n```\r\n\r\nAfter some research I&#39;m still not sure if docker should be accessible within the container from the jenkins pipeline, but when I run `docker info` inside de container it returns `docker: command not found`.\r\n\r\nAny suggestions to make this work?","title":"Testcontainer not able to start within PCF CI/CD Jenkins pipeline - container-inside-container problem?","body":"<p>I've been trying to use the Testcontainers library with my current Jenkins CI/CD pipeline for postgres DB integration tests. I was previously using an embedded postgres library, but now in my jenkins pipeline I do all the steps inside a container, and I wasn't able to make it work. Then I came across the Testcontainers project which seems to be a pretty good alternative for my Java Spring project.</p>\n<p>I've been following this <a href=\"https://jschmitz.dev/posts/testcontainers_how_to_use_them_in_your_spring_boot_integration_tests/\" rel=\"nofollow noreferrer\">article</a> and it states that we most likely don't have to change anything for CI environmets because testcontainers recognizes that it's running inside a container and it supports it. Also, in testcontainer's official documentation there's <a href=\"https://www.testcontainers.org/supported_docker_environment/continuous_integration/dind_patterns/\" rel=\"nofollow noreferrer\">this</a>.</p>\n<p>So, apparently it's supposed to work even if we are running the integration tests within a containerized environment, but when I try it I get the following error in my integration tests:\n<code>ERROR org.testcontainers.dockerclient.DockerClientProviderStrategy - Could not find a valid Docker environment. Please check configuration.</code></p>\n<p>This is my jenkinsfile (I use PCF)</p>\n<pre><code>node('pcf-node') {\n        container('jdk17-container') {\n            ...\n            stage('integration testing') {\n                currentStep = &quot;${env.STAGE_NAME}&quot;\n                runIntegrationTests()\n            }\n        ...\n    }\n}\n</code></pre>\n<p>After some research I'm still not sure if docker should be accessible within the container from the jenkins pipeline, but when I run <code>docker info</code> inside de container it returns <code>docker: command not found</code>.</p>\n<p>Any suggestions to make this work?</p>\n"},{"tags":["java","windows","credential-manager"],"answers":[{"tags":[],"owner":{"account_id":7321601,"reputation":352,"user_id":5577460,"display_name":"Jonas"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1672344031,"creation_date":1626870701,"answer_id":68469535,"question_id":65144266,"body_markdown":"We actually have the same issue come up in our company. \r\nWe have a Java Client Application running on windows and the customer asked for a password saving functionality. So we turned to the windows credential manager for that. So much for the background. \r\n\r\nIt seems that there is no java library for that, although there might be one. \r\n(btw: your second link is a 404). \r\n\r\nThus the way we planned is to write java code using the java native interface with C accessing the windows credential manager. \r\nBUT I found [this library][1], which has a [java class written for accessing the windows credential manager][2].\r\n\r\nI think, this might help.\r\n\r\n  [1]: https://github.com/microsoft/vsts-authentication-library-for-java/\r\n  [2]: https://github.com/microsoft/vsts-authentication-library-for-java/blob/master/storage/src/main/java/com/microsoft/alm/storage/windows/internal/CredManagerBackedSecureStore.java","title":"Use the windows credential manager in Java to get credentials for authentication into git and other services","body":"<p>We actually have the same issue come up in our company.\nWe have a Java Client Application running on windows and the customer asked for a password saving functionality. So we turned to the windows credential manager for that. So much for the background.</p>\n<p>It seems that there is no java library for that, although there might be one.\n(btw: your second link is a 404).</p>\n<p>Thus the way we planned is to write java code using the java native interface with C accessing the windows credential manager.\nBUT I found <a href=\"https://github.com/microsoft/vsts-authentication-library-for-java/\" rel=\"nofollow noreferrer\">this library</a>, which has a <a href=\"https://github.com/microsoft/vsts-authentication-library-for-java/blob/master/storage/src/main/java/com/microsoft/alm/storage/windows/internal/CredManagerBackedSecureStore.java\" rel=\"nofollow noreferrer\">java class written for accessing the windows credential manager</a>.</p>\n<p>I think, this might help.</p>\n"},{"tags":[],"owner":{"account_id":1036253,"reputation":23,"user_id":4666576,"display_name":"Daniel F."},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646655423,"creation_date":1646655423,"answer_id":71380961,"question_id":65144266,"body_markdown":"Looking for a way to access the Windows Credential Manager in java myself, I found that the Microsoft library in [Jonas&#39; answer][1] provides a simple way to do that:\r\n\r\n    CredManagerBackedCredentialStore credentialStore = new CredManagerBackedCredentialStore();\r\n    Credential cred = credentialStore.get(&quot;MyCredentialManagerKey&quot;);\r\n\r\nThe dependency I used was `implementation(&quot;com.microsoft.alm:auth-secure-storage:0.6.4&quot;)` and the resulting `Credential` object allows me to read the user/password. Also, the `CredManagerBackedCredentialStore` object allows to add entries into the Windows Credential Manager.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/68469535/4666576","title":"Use the windows credential manager in Java to get credentials for authentication into git and other services","body":"<p>Looking for a way to access the Windows Credential Manager in java myself, I found that the Microsoft library in <a href=\"https://stackoverflow.com/a/68469535/4666576\">Jonas' answer</a> provides a simple way to do that:</p>\n<pre><code>CredManagerBackedCredentialStore credentialStore = new CredManagerBackedCredentialStore();\nCredential cred = credentialStore.get(&quot;MyCredentialManagerKey&quot;);\n</code></pre>\n<p>The dependency I used was <code>implementation(&quot;com.microsoft.alm:auth-secure-storage:0.6.4&quot;)</code> and the resulting <code>Credential</code> object allows me to read the user/password. Also, the <code>CredManagerBackedCredentialStore</code> object allows to add entries into the Windows Credential Manager.</p>\n"},{"tags":[],"owner":{"account_id":4751922,"reputation":723,"user_id":3841784,"display_name":"Dragoon"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1648779813,"creation_date":1648778903,"answer_id":71700999,"question_id":65144266,"body_markdown":"Cheese.....don&#39;t use that library.\r\n\r\nA) It&#39;s broken\r\n\r\nB) It&#39;s needlessly convoluted (XML backed credential object? srsly?)\r\n\r\nC) It depends on some vulnerable libraries. Don&#39;t do that to your customers. Just don&#39;t. It&#39;s already bad enough that they&#39;re stuck with Java.\r\n\r\nDrop these two files into your project, and use them like so:\r\n\r\n```java\r\n    WinCred wc = new WinCred();\r\n    // Create a credential\r\n    wc.setCredential(&quot;Application Name&quot;, &quot;Username&quot;, &quot;Password&quot;);\r\n    // Get a credential\r\n    Credential cred = wc.getCredential(&quot;Application Name&quot;);\r\n    String username = cred.username;\r\n    String password = cred.password;\r\n\r\n    System.out.println(username);\r\n    System.out.println(password);\r\n    // Delete a credential\r\n    wc.deleteCredential(&quot;Application Name&quot;)\r\n```\r\n\r\nPut this in your build.gradle:\r\n\r\n```groovy\r\n    implementation(&#39;net.java.dev.jna:jna:5.11.0&#39;)\r\n    implementation(&#39;net.java.dev.jna:jna-platform:5.11.0&#39;)\r\n```\r\n\r\nFirst file:\r\n\r\n```java\r\npackage wincred;\r\n\r\nimport com.sun.jna.LastErrorException;\r\nimport com.sun.jna.Memory;\r\nimport com.sun.jna.Native;\r\nimport com.sun.jna.Pointer;\r\nimport com.sun.jna.Structure;\r\nimport com.sun.jna.platform.win32.WinBase;\r\nimport com.sun.jna.win32.StdCallLibrary;\r\nimport com.sun.jna.win32.W32APIOptions;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\n/**\r\n * This class exposes functions from credential manager on Windows platform\r\n * via JNA.\r\n *\r\n * Please refer to MSDN documentations for each method usage pattern\r\n */\r\ninterface CredAdvapi32 extends StdCallLibrary {\r\n    CredAdvapi32 INSTANCE = (CredAdvapi32) Native.load(&quot;Advapi32&quot;,\r\n            CredAdvapi32.class, W32APIOptions.UNICODE_OPTIONS);\r\n    /**\r\n     * CredRead flag\r\n     */\r\n    int CRED_FLAGS_PROMPT_NOW = 0x0002;\r\n    int CRED_FLAGS_USERNAME_TARGET = 0x0004;\r\n\r\n    /**\r\n     * Type of Credential\r\n     */\r\n    int CRED_TYPE_GENERIC = 1;\r\n    int CRED_TYPE_DOMAIN_PASSWORD = 2;\r\n    int CRED_TYPE_DOMAIN_CERTIFICATE = 3;\r\n    int CRED_TYPE_DOMAIN_VISIBLE_PASSWORD = 4;\r\n    int CRED_TYPE_GENERIC_CERTIFICATE = 5;\r\n    int CRED_TYPE_DOMAIN_EXTENDED = 6;\r\n    int CRED_TYPE_MAXIMUM = 7;       // Maximum supported cred type\r\n    int CRED_TYPE_MAXIMUM_EX = CRED_TYPE_MAXIMUM + 1000;\r\n\r\n    /**\r\n     * CredWrite flag\r\n     */\r\n    int CRED_PRESERVE_CREDENTIAL_BLOB = 0x1;\r\n\r\n    /**\r\n     * Values of the Credential Persist field\r\n     */\r\n    int CRED_PERSIST_NONE = 0;\r\n    int CRED_PERSIST_SESSION = 1;\r\n    int CRED_PERSIST_LOCAL_MACHINE = 2;\r\n    int CRED_PERSIST_ENTERPRISE = 3;\r\n\r\n    /**\r\n     * Credential attributes\r\n     *\r\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374790(v=vs.85).aspx\r\n     *\r\n     * typedef struct _CREDENTIAL_ATTRIBUTE {\r\n     *   LPTSTR Keyword;\r\n     *   DWORD  Flags;\r\n     *   DWORD  ValueSize;\r\n     *   LPBYTE Value;\r\n     * } CREDENTIAL_ATTRIBUTE, *PCREDENTIAL_ATTRIBUTE;\r\n     *\r\n     */\r\n    class CREDENTIAL_ATTRIBUTE extends Structure {\r\n\r\n        public static class ByReference extends CREDENTIAL_ATTRIBUTE implements Structure.ByReference { }\r\n\r\n        @Override\r\n        protected List&lt;String&gt; getFieldOrder() {\r\n            return Arrays.asList(&quot;Keyword&quot;,\r\n                    &quot;Flags&quot;,\r\n                    &quot;ValueSize&quot;,\r\n                    &quot;Value&quot;);\r\n        }\r\n\r\n        /**\r\n         *    Name of the application-specific attribute. Names should be of the form &lt;CompanyName&gt;_&lt;Name&gt;.\r\n         *    This member cannot be longer than CRED_MAX_STRING_LENGTH (256) characters.\r\n         */\r\n        public String Keyword;\r\n\r\n        /**\r\n         *   Identifies characteristics of the credential attribute. This member is reserved and should be originally\r\n         *   initialized as zero and not otherwise altered to permit future enhancement.\r\n         */\r\n        public int Flags;\r\n\r\n        /**\r\n         *   Length of Value in bytes. This member cannot be larger than CRED_MAX_VALUE_SIZE (256).\r\n         */\r\n        public int ValueSize;\r\n\r\n        /**\r\n         *   Data associated with the attribute. By convention, if Value is a text string, then Value should not\r\n         *   include the trailing zero character and should be in UNICODE.\r\n         *\r\n         *   Credentials are expected to be portable. The application should take care to ensure that the data in\r\n         *   value is portable. It is the responsibility of the application to define the byte-endian and alignment\r\n         *   of the data in Value.\r\n         */\r\n        public Pointer Value;\r\n    }\r\n\r\n    /**\r\n     * Pointer to {@See CREDENTIAL_ATTRIBUTE} struct\r\n     */\r\n    class PCREDENTIAL_ATTRIBUTE extends Structure {\r\n\r\n        @Override\r\n        protected List&lt;String&gt; getFieldOrder() {\r\n            return Collections.singletonList(&quot;credential_attribute&quot;);\r\n        }\r\n\r\n        public PCREDENTIAL_ATTRIBUTE() {\r\n            super();\r\n        }\r\n\r\n        public PCREDENTIAL_ATTRIBUTE(byte[] data) {\r\n            super(new Memory(data.length));\r\n            getPointer().write(0, data, 0, data.length);\r\n            read();\r\n        }\r\n\r\n        public PCREDENTIAL_ATTRIBUTE(Pointer memory) {\r\n            super(memory);\r\n            read();\r\n        }\r\n\r\n        public Pointer credential_attribute;\r\n    }\r\n\r\n    /**\r\n     * The CREDENTIAL structure contains an individual credential\r\n     *\r\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374788(v=vs.85).aspx\r\n     *\r\n     * typedef struct _CREDENTIAL {\r\n     *   DWORD                 Flags;\r\n     *   DWORD                 Type;\r\n     *   LPTSTR                TargetName;\r\n     *   LPTSTR                Comment;\r\n     *   FILETIME              LastWritten;\r\n     *   DWORD                 CredentialBlobSize;\r\n     *   LPBYTE                CredentialBlob;\r\n     *   DWORD                 Persist;\r\n     *   DWORD                 AttributeCount;\r\n     *   PCREDENTIAL_ATTRIBUTE Attributes;\r\n     *   LPTSTR                TargetAlias;\r\n     *   LPTSTR                UserName;\r\n     * } CREDENTIAL, *PCREDENTIAL;\r\n     */\r\n    class CREDENTIAL extends Structure {\r\n\r\n        @Override\r\n        protected List&lt;String&gt; getFieldOrder() {\r\n            return Arrays.asList(&quot;Flags&quot;,\r\n                    &quot;Type&quot;,\r\n                    &quot;TargetName&quot;,\r\n                    &quot;Comment&quot;,\r\n                    &quot;LastWritten&quot;,\r\n                    &quot;CredentialBlobSize&quot;,\r\n                    &quot;CredentialBlob&quot;,\r\n                    &quot;Persist&quot;,\r\n                    &quot;AttributeCount&quot;,\r\n                    &quot;Attributes&quot;,\r\n                    &quot;TargetAlias&quot;,\r\n                    &quot;UserName&quot;);\r\n        }\r\n\r\n        public CREDENTIAL() {\r\n            super();\r\n        }\r\n\r\n        public CREDENTIAL(final int size) {\r\n            super(new Memory(size));\r\n        }\r\n\r\n        public CREDENTIAL(Pointer memory) {\r\n            super(memory);\r\n            read();\r\n        }\r\n\r\n        /**\r\n         *   A bit member that identifies characteristics of the credential. Undefined bits should be initialized\r\n         *   as zero and not otherwise altered to permit future enhancement.\r\n         *\r\n         *   See MSDN doc for all possible flags\r\n         */\r\n        public int Flags;\r\n\r\n        /**\r\n         *   The type of the credential. This member cannot be changed after the credential is created.\r\n         *\r\n         *   See MSDN doc for all possible types\r\n         */\r\n        public int Type;\r\n\r\n        /**\r\n         *   The name of the credential. The TargetName and Type members uniquely identify the credential.\r\n         *   This member cannot be changed after the credential is created. Instead, the credential with the old\r\n         *   name should be deleted and the credential with the new name created.\r\n         *\r\n         *   See MSDN doc for additional requirement\r\n         */\r\n        public String TargetName;\r\n\r\n        /**\r\n         *   A string comment from the user that describes this credential. This member cannot be longer than\r\n         *   CRED_MAX_STRING_LENGTH (256) characters.\r\n         */\r\n        public String Comment;\r\n\r\n        /**\r\n         *   The time, in Coordinated Universal Time (Greenwich Mean Time), of the last modification of the credential.\r\n         *   For write operations, the value of this member is ignored.\r\n         */\r\n        public WinBase.FILETIME LastWritten;\r\n\r\n        /**\r\n         *   The size, in bytes, of the CredentialBlob member. This member cannot be larger than\r\n         *   CRED_MAX_CREDENTIAL_BLOB_SIZE (512) bytes.\r\n         */\r\n        public int CredentialBlobSize;\r\n\r\n        /**\r\n         *   Secret data for the credential. The CredentialBlob member can be both read and written.\r\n         *   If the Type member is CRED_TYPE_DOMAIN_PASSWORD, this member contains the plaintext Unicode password\r\n         *   for UserName. The CredentialBlob and CredentialBlobSize members do not include a trailing zero character.\r\n         *   Also, for CRED_TYPE_DOMAIN_PASSWORD, this member can only be read by the authentication packages.\r\n         *\r\n         *   If the Type member is CRED_TYPE_DOMAIN_CERTIFICATE, this member contains the clear test\r\n         *   Unicode PIN for UserName. The CredentialBlob and CredentialBlobSize members do not include a trailing\r\n         *   zero character. Also, this member can only be read by the authentication packages.\r\n         *\r\n         *   If the Type member is CRED_TYPE_GENERIC, this member is defined by the application.\r\n         *   Credentials are expected to be portable. Applications should ensure that the data in CredentialBlob is\r\n         *   portable. The application defines the byte-endian and alignment of the data in CredentialBlob.\r\n         */\r\n        public Pointer CredentialBlob;\r\n\r\n        /**\r\n         *   Defines the persistence of this credential. This member can be read and written.\r\n         *\r\n         *   See MSDN doc for all possible values\r\n         */\r\n        public int Persist;\r\n\r\n        /**\r\n         *   The number of application-defined attributes to be associated with the credential. This member can be\r\n         *   read and written. Its value cannot be greater than CRED_MAX_ATTRIBUTES (64).\r\n         */\r\n        public int AttributeCount;\r\n\r\n        /**\r\n         *   Application-defined attributes that are associated with the credential. This member can be read\r\n         *   and written.\r\n         */\r\n        //notTODO: Need to make this into array\r\n        public CREDENTIAL_ATTRIBUTE.ByReference Attributes;\r\n\r\n        /**\r\n         *   Alias for the TargetName member. This member can be read and written. It cannot be longer than\r\n         *   CRED_MAX_STRING_LENGTH (256) characters.\r\n         *\r\n         *   If the credential Type is CRED_TYPE_GENERIC, this member can be non-NULL, but the credential manager\r\n         *   ignores the member.\r\n         */\r\n        public String TargetAlias;\r\n\r\n        /**\r\n         *   The user name of the account used to connect to TargetName.\r\n         *   If the credential Type is CRED_TYPE_DOMAIN_PASSWORD, this member can be either a DomainName\\UserName\r\n         *   or a UPN.\r\n         *\r\n         *   If the credential Type is CRED_TYPE_DOMAIN_CERTIFICATE, this member must be a marshaled certificate\r\n         *   reference created by calling CredMarshalCredential with a CertCredential.\r\n         *\r\n         *   If the credential Type is CRED_TYPE_GENERIC, this member can be non-NULL, but the credential manager\r\n         *   ignores the member.\r\n         *\r\n         *   This member cannot be longer than CRED_MAX_USERNAME_LENGTH (513) characters.\r\n         */\r\n        public String UserName;\r\n    }\r\n\r\n    /**\r\n     *  Pointer to {@see CREDENTIAL} struct\r\n     */\r\n    class PCREDENTIAL extends Structure {\r\n\r\n        @Override\r\n        protected List&lt;String&gt; getFieldOrder() {\r\n            return Collections.singletonList(&quot;credential&quot;);\r\n        }\r\n\r\n        public PCREDENTIAL() {\r\n            super();\r\n        }\r\n\r\n        public PCREDENTIAL(byte[] data) {\r\n            super(new Memory(data.length));\r\n            getPointer().write(0, data, 0, data.length);\r\n            read();\r\n        }\r\n\r\n        public PCREDENTIAL(Pointer memory) {\r\n            super(memory);\r\n            read();\r\n        }\r\n\r\n        public Pointer credential;\r\n    }\r\n\r\n    /**\r\n     * The CredRead function reads a credential from the user&#39;s credential set.\r\n     *\r\n     * The credential set used is the one associated with the logon session of the current token.\r\n     * The token must not have the user&#39;s SID disabled.\r\n     *\r\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374804(v=vs.85).aspx\r\n     *\r\n     * @param targetName\r\n     *      String that contains the name of the credential to read.\r\n     * @param type\r\n     *      Type of the credential to read. Type must be one of the CRED_TYPE_* defined types.\r\n     * @param flags\r\n     *      Currently reserved and must be zero.\r\n     * @param pcredential\r\n     *      Out - Pointer to a single allocated block buffer to return the credential.\r\n     *      Any pointers contained within the buffer are pointers to locations within this single allocated block.\r\n     *      The single returned buffer must be freed by calling &lt;code&gt;CredFree&lt;/code&gt;.\r\n     *\r\n     * @return\r\n     *      True if CredRead succeeded, false otherwise\r\n     *\r\n     * @throws LastErrorException\r\n     *      GetLastError\r\n     */\r\n    boolean CredRead(String targetName, int type, int flags, PCREDENTIAL pcredential) throws LastErrorException;\r\n\r\n    /**\r\n     * The CredWrite function creates a new credential or modifies an existing credential in the user&#39;s credential set.\r\n     * The new credential is associated with the logon session of the current token. The token must not have the\r\n     * user&#39;s security identifier (SID) disabled.\r\n     *\r\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa375187(v=vs.85).aspx\r\n     *\r\n     * @param credential\r\n     *      A CREDENTIAL structure to be written.\r\n     * @param flags\r\n     *      Flags that control the function&#39;s operation. The following flag is defined.\r\n     *      CRED_PRESERVE_CREDENTIAL_BLOB:\r\n     *          The credential BLOB from an existing credential is preserved with the same\r\n     *          credential name and credential type. The CredentialBlobSize of the passed\r\n     *          in Credential structure must be zero.\r\n     *\r\n     * @return\r\n     *      True if CredWrite succeeded, false otherwise\r\n     *\r\n     * @throws LastErrorException\r\n     *      GetLastError\r\n     */\r\n    boolean CredWrite(CREDENTIAL credential, int flags) throws LastErrorException;\r\n\r\n    /**\r\n     * The CredDelete function deletes a credential from the user&#39;s credential set. The credential set used is the one\r\n     * associated with the logon session of the current token. The token must not have the user&#39;s SID disabled.\r\n     *\r\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374787(v=vs.85).aspx\r\n     *\r\n     * @param targetName\r\n     *      String that contains the name of the credential to read.\r\n     * @param type\r\n     *      Type of the credential to delete. Must be one of the CRED_TYPE_* defined types. For a list of the\r\n     *      defined types, see the Type member of the CREDENTIAL structure.\r\n     *      If the value of this parameter is CRED_TYPE_DOMAIN_EXTENDED, this function can delete a credential that\r\n     *      specifies a user name when there are multiple credentials for the same target. The value of the TargetName\r\n     *      parameter must specify the user name as Target|UserName.\r\n     * @param flags\r\n     *      Reserved and must be zero.\r\n     *\r\n     * @return\r\n     *      True if CredDelete succeeded, false otherwise\r\n     *\r\n     * @throws LastErrorException\r\n     *      GetLastError\r\n     */\r\n    boolean CredDelete(String targetName, int type, int flags) throws LastErrorException;\r\n\r\n    /**\r\n     * The CredFree function frees a buffer returned by any of the credentials management functions.\r\n     *\r\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374796(v=vs.85).aspx\r\n     *\r\n     * @param credential\r\n     *      Pointer to CREDENTIAL to be freed\r\n     *\r\n     * @throws LastErrorException\r\n     *      GetLastError\r\n     */\r\n    void CredFree(Pointer credential) throws LastErrorException;\r\n}\r\n```\r\n\r\nThe other file:\r\n\r\n```java\r\npackage wincred;\r\n\r\nimport java.io.UnsupportedEncodingException;\r\nimport java.nio.charset.Charset;\r\n\r\nimport com.sun.jna.LastErrorException;\r\nimport com.sun.jna.Memory;\r\nimport com.sun.jna.Native;\r\nimport com.sun.jna.Pointer;\r\n\r\npublic class WinCred implements CredAdvapi32 {\r\n\r\n  public static &lt;T&gt; T coalesce(final T maybeNullValue, final T nonNullValue) {\r\n    return maybeNullValue == null ? nonNullValue : maybeNullValue;\r\n  }\r\n\r\n  public class Credential {\r\n    public String target;\r\n    public String username;\r\n    public String password;\r\n\r\n    public Credential(String target, String username, String password) {\r\n      this.target = coalesce(target, &quot;&quot;);\r\n      this.username = coalesce(username, &quot;&quot;);\r\n      this.password = coalesce(password, &quot;&quot;);\r\n    }\r\n  }\r\n\r\n  public Credential getCredential(String target) {\r\n    PCREDENTIAL pcredMem = new PCREDENTIAL();\r\n\r\n    try {\r\n    if (CredRead(target, 1, 0, pcredMem)) {\r\n      CREDENTIAL credMem = new CREDENTIAL(pcredMem.credential);\r\n      byte[] passwordBytes = credMem.CredentialBlob.getByteArray(0, credMem.CredentialBlobSize);\r\n\r\n      String password = new String(passwordBytes, Charset.forName(&quot;UTF-16LE&quot;));\r\n      Credential cred = new WinCred.Credential(credMem.TargetName, credMem.UserName, password);\r\n      return cred;\r\n    } else {\r\n      int err = Native.getLastError();\r\n      throw new LastErrorException(err);\r\n    }\r\n    } finally {\r\n      CredFree(pcredMem.credential);\r\n    }\r\n  }\r\n\r\n  public boolean setCredential(String target, String userName, String password) throws UnsupportedEncodingException {\r\n    CREDENTIAL credMem = new CREDENTIAL();\r\n\r\n    credMem.Flags = 0;\r\n    credMem.TargetName = target;\r\n    credMem.Type = CRED_TYPE_GENERIC;\r\n    credMem.UserName = userName;\r\n    credMem.AttributeCount = 0;\r\n    credMem.Persist = CRED_PERSIST_ENTERPRISE;\r\n    byte[] bpassword = password.getBytes(&quot;UTF-16LE&quot;);\r\n    credMem.CredentialBlobSize = (int) bpassword.length;\r\n    credMem.CredentialBlob = getPointer(bpassword);\r\n    if (!CredWrite(credMem, 0)) {\r\n      int err = Native.getLastError();\r\n      throw new LastErrorException(err);\r\n    } else {\r\n        return true;\r\n    }\r\n  }\r\n\r\n  public boolean deleteCredential(String target) throws UnsupportedEncodingException {\r\n    if (!CredDelete(target, CRED_TYPE_GENERIC, 0)) {\r\n      int err = Native.getLastError();\r\n      throw new LastErrorException(err);\r\n    } else {\r\n        return true;\r\n    }\r\n  }\r\n\r\n  private static Pointer getPointer(byte[] array) {\r\n    Pointer p = new Memory(array.length);\r\n    p.write(0, array, 0, array.length);\r\n\r\n    return p;\r\n  }\r\n\r\n  @Override\r\n  public boolean CredRead(String targetName, int type, int flags, PCREDENTIAL pcredential) throws LastErrorException {\r\n    synchronized (INSTANCE) {\r\n      return INSTANCE.CredRead(targetName, type, flags, pcredential);\r\n    }\r\n  }\r\n\r\n  @Override\r\n  public boolean CredWrite(CREDENTIAL credential, int flags) throws LastErrorException {\r\n    synchronized (INSTANCE) {\r\n      return INSTANCE.CredWrite(credential, flags);\r\n    }\r\n  }\r\n\r\n  @Override\r\n  public boolean CredDelete(String targetName, int type, int flags) throws LastErrorException {\r\n    synchronized (INSTANCE) {\r\n      return INSTANCE.CredDelete(targetName, type, flags);\r\n    }\r\n  }\r\n\r\n  @Override\r\n  public void CredFree(Pointer credential) throws LastErrorException {\r\n    synchronized (INSTANCE) {\r\n      INSTANCE.CredFree(credential);\r\n    }\r\n  }\r\n}\r\n```","title":"Use the windows credential manager in Java to get credentials for authentication into git and other services","body":"<p>Cheese.....don't use that library.</p>\n<p>A) It's broken</p>\n<p>B) It's needlessly convoluted (XML backed credential object? srsly?)</p>\n<p>C) It depends on some vulnerable libraries. Don't do that to your customers. Just don't. It's already bad enough that they're stuck with Java.</p>\n<p>Drop these two files into your project, and use them like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    WinCred wc = new WinCred();\n    // Create a credential\n    wc.setCredential(&quot;Application Name&quot;, &quot;Username&quot;, &quot;Password&quot;);\n    // Get a credential\n    Credential cred = wc.getCredential(&quot;Application Name&quot;);\n    String username = cred.username;\n    String password = cred.password;\n\n    System.out.println(username);\n    System.out.println(password);\n    // Delete a credential\n    wc.deleteCredential(&quot;Application Name&quot;)\n</code></pre>\n<p>Put this in your build.gradle:</p>\n<pre><code>    implementation('net.java.dev.jna:jna:5.11.0')\n    implementation('net.java.dev.jna:jna-platform:5.11.0')\n</code></pre>\n<p>First file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package wincred;\n\nimport com.sun.jna.LastErrorException;\nimport com.sun.jna.Memory;\nimport com.sun.jna.Native;\nimport com.sun.jna.Pointer;\nimport com.sun.jna.Structure;\nimport com.sun.jna.platform.win32.WinBase;\nimport com.sun.jna.win32.StdCallLibrary;\nimport com.sun.jna.win32.W32APIOptions;\n\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\n\n/**\n * This class exposes functions from credential manager on Windows platform\n * via JNA.\n *\n * Please refer to MSDN documentations for each method usage pattern\n */\ninterface CredAdvapi32 extends StdCallLibrary {\n    CredAdvapi32 INSTANCE = (CredAdvapi32) Native.load(&quot;Advapi32&quot;,\n            CredAdvapi32.class, W32APIOptions.UNICODE_OPTIONS);\n    /**\n     * CredRead flag\n     */\n    int CRED_FLAGS_PROMPT_NOW = 0x0002;\n    int CRED_FLAGS_USERNAME_TARGET = 0x0004;\n\n    /**\n     * Type of Credential\n     */\n    int CRED_TYPE_GENERIC = 1;\n    int CRED_TYPE_DOMAIN_PASSWORD = 2;\n    int CRED_TYPE_DOMAIN_CERTIFICATE = 3;\n    int CRED_TYPE_DOMAIN_VISIBLE_PASSWORD = 4;\n    int CRED_TYPE_GENERIC_CERTIFICATE = 5;\n    int CRED_TYPE_DOMAIN_EXTENDED = 6;\n    int CRED_TYPE_MAXIMUM = 7;       // Maximum supported cred type\n    int CRED_TYPE_MAXIMUM_EX = CRED_TYPE_MAXIMUM + 1000;\n\n    /**\n     * CredWrite flag\n     */\n    int CRED_PRESERVE_CREDENTIAL_BLOB = 0x1;\n\n    /**\n     * Values of the Credential Persist field\n     */\n    int CRED_PERSIST_NONE = 0;\n    int CRED_PERSIST_SESSION = 1;\n    int CRED_PERSIST_LOCAL_MACHINE = 2;\n    int CRED_PERSIST_ENTERPRISE = 3;\n\n    /**\n     * Credential attributes\n     *\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374790(v=vs.85).aspx\n     *\n     * typedef struct _CREDENTIAL_ATTRIBUTE {\n     *   LPTSTR Keyword;\n     *   DWORD  Flags;\n     *   DWORD  ValueSize;\n     *   LPBYTE Value;\n     * } CREDENTIAL_ATTRIBUTE, *PCREDENTIAL_ATTRIBUTE;\n     *\n     */\n    class CREDENTIAL_ATTRIBUTE extends Structure {\n\n        public static class ByReference extends CREDENTIAL_ATTRIBUTE implements Structure.ByReference { }\n\n        @Override\n        protected List&lt;String&gt; getFieldOrder() {\n            return Arrays.asList(&quot;Keyword&quot;,\n                    &quot;Flags&quot;,\n                    &quot;ValueSize&quot;,\n                    &quot;Value&quot;);\n        }\n\n        /**\n         *    Name of the application-specific attribute. Names should be of the form &lt;CompanyName&gt;_&lt;Name&gt;.\n         *    This member cannot be longer than CRED_MAX_STRING_LENGTH (256) characters.\n         */\n        public String Keyword;\n\n        /**\n         *   Identifies characteristics of the credential attribute. This member is reserved and should be originally\n         *   initialized as zero and not otherwise altered to permit future enhancement.\n         */\n        public int Flags;\n\n        /**\n         *   Length of Value in bytes. This member cannot be larger than CRED_MAX_VALUE_SIZE (256).\n         */\n        public int ValueSize;\n\n        /**\n         *   Data associated with the attribute. By convention, if Value is a text string, then Value should not\n         *   include the trailing zero character and should be in UNICODE.\n         *\n         *   Credentials are expected to be portable. The application should take care to ensure that the data in\n         *   value is portable. It is the responsibility of the application to define the byte-endian and alignment\n         *   of the data in Value.\n         */\n        public Pointer Value;\n    }\n\n    /**\n     * Pointer to {@See CREDENTIAL_ATTRIBUTE} struct\n     */\n    class PCREDENTIAL_ATTRIBUTE extends Structure {\n\n        @Override\n        protected List&lt;String&gt; getFieldOrder() {\n            return Collections.singletonList(&quot;credential_attribute&quot;);\n        }\n\n        public PCREDENTIAL_ATTRIBUTE() {\n            super();\n        }\n\n        public PCREDENTIAL_ATTRIBUTE(byte[] data) {\n            super(new Memory(data.length));\n            getPointer().write(0, data, 0, data.length);\n            read();\n        }\n\n        public PCREDENTIAL_ATTRIBUTE(Pointer memory) {\n            super(memory);\n            read();\n        }\n\n        public Pointer credential_attribute;\n    }\n\n    /**\n     * The CREDENTIAL structure contains an individual credential\n     *\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374788(v=vs.85).aspx\n     *\n     * typedef struct _CREDENTIAL {\n     *   DWORD                 Flags;\n     *   DWORD                 Type;\n     *   LPTSTR                TargetName;\n     *   LPTSTR                Comment;\n     *   FILETIME              LastWritten;\n     *   DWORD                 CredentialBlobSize;\n     *   LPBYTE                CredentialBlob;\n     *   DWORD                 Persist;\n     *   DWORD                 AttributeCount;\n     *   PCREDENTIAL_ATTRIBUTE Attributes;\n     *   LPTSTR                TargetAlias;\n     *   LPTSTR                UserName;\n     * } CREDENTIAL, *PCREDENTIAL;\n     */\n    class CREDENTIAL extends Structure {\n\n        @Override\n        protected List&lt;String&gt; getFieldOrder() {\n            return Arrays.asList(&quot;Flags&quot;,\n                    &quot;Type&quot;,\n                    &quot;TargetName&quot;,\n                    &quot;Comment&quot;,\n                    &quot;LastWritten&quot;,\n                    &quot;CredentialBlobSize&quot;,\n                    &quot;CredentialBlob&quot;,\n                    &quot;Persist&quot;,\n                    &quot;AttributeCount&quot;,\n                    &quot;Attributes&quot;,\n                    &quot;TargetAlias&quot;,\n                    &quot;UserName&quot;);\n        }\n\n        public CREDENTIAL() {\n            super();\n        }\n\n        public CREDENTIAL(final int size) {\n            super(new Memory(size));\n        }\n\n        public CREDENTIAL(Pointer memory) {\n            super(memory);\n            read();\n        }\n\n        /**\n         *   A bit member that identifies characteristics of the credential. Undefined bits should be initialized\n         *   as zero and not otherwise altered to permit future enhancement.\n         *\n         *   See MSDN doc for all possible flags\n         */\n        public int Flags;\n\n        /**\n         *   The type of the credential. This member cannot be changed after the credential is created.\n         *\n         *   See MSDN doc for all possible types\n         */\n        public int Type;\n\n        /**\n         *   The name of the credential. The TargetName and Type members uniquely identify the credential.\n         *   This member cannot be changed after the credential is created. Instead, the credential with the old\n         *   name should be deleted and the credential with the new name created.\n         *\n         *   See MSDN doc for additional requirement\n         */\n        public String TargetName;\n\n        /**\n         *   A string comment from the user that describes this credential. This member cannot be longer than\n         *   CRED_MAX_STRING_LENGTH (256) characters.\n         */\n        public String Comment;\n\n        /**\n         *   The time, in Coordinated Universal Time (Greenwich Mean Time), of the last modification of the credential.\n         *   For write operations, the value of this member is ignored.\n         */\n        public WinBase.FILETIME LastWritten;\n\n        /**\n         *   The size, in bytes, of the CredentialBlob member. This member cannot be larger than\n         *   CRED_MAX_CREDENTIAL_BLOB_SIZE (512) bytes.\n         */\n        public int CredentialBlobSize;\n\n        /**\n         *   Secret data for the credential. The CredentialBlob member can be both read and written.\n         *   If the Type member is CRED_TYPE_DOMAIN_PASSWORD, this member contains the plaintext Unicode password\n         *   for UserName. The CredentialBlob and CredentialBlobSize members do not include a trailing zero character.\n         *   Also, for CRED_TYPE_DOMAIN_PASSWORD, this member can only be read by the authentication packages.\n         *\n         *   If the Type member is CRED_TYPE_DOMAIN_CERTIFICATE, this member contains the clear test\n         *   Unicode PIN for UserName. The CredentialBlob and CredentialBlobSize members do not include a trailing\n         *   zero character. Also, this member can only be read by the authentication packages.\n         *\n         *   If the Type member is CRED_TYPE_GENERIC, this member is defined by the application.\n         *   Credentials are expected to be portable. Applications should ensure that the data in CredentialBlob is\n         *   portable. The application defines the byte-endian and alignment of the data in CredentialBlob.\n         */\n        public Pointer CredentialBlob;\n\n        /**\n         *   Defines the persistence of this credential. This member can be read and written.\n         *\n         *   See MSDN doc for all possible values\n         */\n        public int Persist;\n\n        /**\n         *   The number of application-defined attributes to be associated with the credential. This member can be\n         *   read and written. Its value cannot be greater than CRED_MAX_ATTRIBUTES (64).\n         */\n        public int AttributeCount;\n\n        /**\n         *   Application-defined attributes that are associated with the credential. This member can be read\n         *   and written.\n         */\n        //notTODO: Need to make this into array\n        public CREDENTIAL_ATTRIBUTE.ByReference Attributes;\n\n        /**\n         *   Alias for the TargetName member. This member can be read and written. It cannot be longer than\n         *   CRED_MAX_STRING_LENGTH (256) characters.\n         *\n         *   If the credential Type is CRED_TYPE_GENERIC, this member can be non-NULL, but the credential manager\n         *   ignores the member.\n         */\n        public String TargetAlias;\n\n        /**\n         *   The user name of the account used to connect to TargetName.\n         *   If the credential Type is CRED_TYPE_DOMAIN_PASSWORD, this member can be either a DomainName\\UserName\n         *   or a UPN.\n         *\n         *   If the credential Type is CRED_TYPE_DOMAIN_CERTIFICATE, this member must be a marshaled certificate\n         *   reference created by calling CredMarshalCredential with a CertCredential.\n         *\n         *   If the credential Type is CRED_TYPE_GENERIC, this member can be non-NULL, but the credential manager\n         *   ignores the member.\n         *\n         *   This member cannot be longer than CRED_MAX_USERNAME_LENGTH (513) characters.\n         */\n        public String UserName;\n    }\n\n    /**\n     *  Pointer to {@see CREDENTIAL} struct\n     */\n    class PCREDENTIAL extends Structure {\n\n        @Override\n        protected List&lt;String&gt; getFieldOrder() {\n            return Collections.singletonList(&quot;credential&quot;);\n        }\n\n        public PCREDENTIAL() {\n            super();\n        }\n\n        public PCREDENTIAL(byte[] data) {\n            super(new Memory(data.length));\n            getPointer().write(0, data, 0, data.length);\n            read();\n        }\n\n        public PCREDENTIAL(Pointer memory) {\n            super(memory);\n            read();\n        }\n\n        public Pointer credential;\n    }\n\n    /**\n     * The CredRead function reads a credential from the user's credential set.\n     *\n     * The credential set used is the one associated with the logon session of the current token.\n     * The token must not have the user's SID disabled.\n     *\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374804(v=vs.85).aspx\n     *\n     * @param targetName\n     *      String that contains the name of the credential to read.\n     * @param type\n     *      Type of the credential to read. Type must be one of the CRED_TYPE_* defined types.\n     * @param flags\n     *      Currently reserved and must be zero.\n     * @param pcredential\n     *      Out - Pointer to a single allocated block buffer to return the credential.\n     *      Any pointers contained within the buffer are pointers to locations within this single allocated block.\n     *      The single returned buffer must be freed by calling &lt;code&gt;CredFree&lt;/code&gt;.\n     *\n     * @return\n     *      True if CredRead succeeded, false otherwise\n     *\n     * @throws LastErrorException\n     *      GetLastError\n     */\n    boolean CredRead(String targetName, int type, int flags, PCREDENTIAL pcredential) throws LastErrorException;\n\n    /**\n     * The CredWrite function creates a new credential or modifies an existing credential in the user's credential set.\n     * The new credential is associated with the logon session of the current token. The token must not have the\n     * user's security identifier (SID) disabled.\n     *\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa375187(v=vs.85).aspx\n     *\n     * @param credential\n     *      A CREDENTIAL structure to be written.\n     * @param flags\n     *      Flags that control the function's operation. The following flag is defined.\n     *      CRED_PRESERVE_CREDENTIAL_BLOB:\n     *          The credential BLOB from an existing credential is preserved with the same\n     *          credential name and credential type. The CredentialBlobSize of the passed\n     *          in Credential structure must be zero.\n     *\n     * @return\n     *      True if CredWrite succeeded, false otherwise\n     *\n     * @throws LastErrorException\n     *      GetLastError\n     */\n    boolean CredWrite(CREDENTIAL credential, int flags) throws LastErrorException;\n\n    /**\n     * The CredDelete function deletes a credential from the user's credential set. The credential set used is the one\n     * associated with the logon session of the current token. The token must not have the user's SID disabled.\n     *\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374787(v=vs.85).aspx\n     *\n     * @param targetName\n     *      String that contains the name of the credential to read.\n     * @param type\n     *      Type of the credential to delete. Must be one of the CRED_TYPE_* defined types. For a list of the\n     *      defined types, see the Type member of the CREDENTIAL structure.\n     *      If the value of this parameter is CRED_TYPE_DOMAIN_EXTENDED, this function can delete a credential that\n     *      specifies a user name when there are multiple credentials for the same target. The value of the TargetName\n     *      parameter must specify the user name as Target|UserName.\n     * @param flags\n     *      Reserved and must be zero.\n     *\n     * @return\n     *      True if CredDelete succeeded, false otherwise\n     *\n     * @throws LastErrorException\n     *      GetLastError\n     */\n    boolean CredDelete(String targetName, int type, int flags) throws LastErrorException;\n\n    /**\n     * The CredFree function frees a buffer returned by any of the credentials management functions.\n     *\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374796(v=vs.85).aspx\n     *\n     * @param credential\n     *      Pointer to CREDENTIAL to be freed\n     *\n     * @throws LastErrorException\n     *      GetLastError\n     */\n    void CredFree(Pointer credential) throws LastErrorException;\n}\n</code></pre>\n<p>The other file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package wincred;\n\nimport java.io.UnsupportedEncodingException;\nimport java.nio.charset.Charset;\n\nimport com.sun.jna.LastErrorException;\nimport com.sun.jna.Memory;\nimport com.sun.jna.Native;\nimport com.sun.jna.Pointer;\n\npublic class WinCred implements CredAdvapi32 {\n\n  public static &lt;T&gt; T coalesce(final T maybeNullValue, final T nonNullValue) {\n    return maybeNullValue == null ? nonNullValue : maybeNullValue;\n  }\n\n  public class Credential {\n    public String target;\n    public String username;\n    public String password;\n\n    public Credential(String target, String username, String password) {\n      this.target = coalesce(target, &quot;&quot;);\n      this.username = coalesce(username, &quot;&quot;);\n      this.password = coalesce(password, &quot;&quot;);\n    }\n  }\n\n  public Credential getCredential(String target) {\n    PCREDENTIAL pcredMem = new PCREDENTIAL();\n\n    try {\n    if (CredRead(target, 1, 0, pcredMem)) {\n      CREDENTIAL credMem = new CREDENTIAL(pcredMem.credential);\n      byte[] passwordBytes = credMem.CredentialBlob.getByteArray(0, credMem.CredentialBlobSize);\n\n      String password = new String(passwordBytes, Charset.forName(&quot;UTF-16LE&quot;));\n      Credential cred = new WinCred.Credential(credMem.TargetName, credMem.UserName, password);\n      return cred;\n    } else {\n      int err = Native.getLastError();\n      throw new LastErrorException(err);\n    }\n    } finally {\n      CredFree(pcredMem.credential);\n    }\n  }\n\n  public boolean setCredential(String target, String userName, String password) throws UnsupportedEncodingException {\n    CREDENTIAL credMem = new CREDENTIAL();\n\n    credMem.Flags = 0;\n    credMem.TargetName = target;\n    credMem.Type = CRED_TYPE_GENERIC;\n    credMem.UserName = userName;\n    credMem.AttributeCount = 0;\n    credMem.Persist = CRED_PERSIST_ENTERPRISE;\n    byte[] bpassword = password.getBytes(&quot;UTF-16LE&quot;);\n    credMem.CredentialBlobSize = (int) bpassword.length;\n    credMem.CredentialBlob = getPointer(bpassword);\n    if (!CredWrite(credMem, 0)) {\n      int err = Native.getLastError();\n      throw new LastErrorException(err);\n    } else {\n        return true;\n    }\n  }\n\n  public boolean deleteCredential(String target) throws UnsupportedEncodingException {\n    if (!CredDelete(target, CRED_TYPE_GENERIC, 0)) {\n      int err = Native.getLastError();\n      throw new LastErrorException(err);\n    } else {\n        return true;\n    }\n  }\n\n  private static Pointer getPointer(byte[] array) {\n    Pointer p = new Memory(array.length);\n    p.write(0, array, 0, array.length);\n\n    return p;\n  }\n\n  @Override\n  public boolean CredRead(String targetName, int type, int flags, PCREDENTIAL pcredential) throws LastErrorException {\n    synchronized (INSTANCE) {\n      return INSTANCE.CredRead(targetName, type, flags, pcredential);\n    }\n  }\n\n  @Override\n  public boolean CredWrite(CREDENTIAL credential, int flags) throws LastErrorException {\n    synchronized (INSTANCE) {\n      return INSTANCE.CredWrite(credential, flags);\n    }\n  }\n\n  @Override\n  public boolean CredDelete(String targetName, int type, int flags) throws LastErrorException {\n    synchronized (INSTANCE) {\n      return INSTANCE.CredDelete(targetName, type, flags);\n    }\n  }\n\n  @Override\n  public void CredFree(Pointer credential) throws LastErrorException {\n    synchronized (INSTANCE) {\n      INSTANCE.CredFree(credential);\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":3780056,"reputation":789,"user_id":3139811,"accept_rate":71,"display_name":"John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4286,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1672344031,"creation_date":1607087851,"question_id":65144266,"body_markdown":"At the moment we store the passwords in a plain text file to sign into git and other services. We want to finaly get rid of it and use the windows credential manager. The only problem we are facing is that I don&#39;t seem to find a solution to do it java. \r\n\r\nI already looked at the following topics:\r\n\r\n* https://stackoverflow.com/questions/9221245/how-do-i-store-and-retrieve-credentials-from-the-windows-vault-credential-manage\r\n    \r\n* https://stackoverflow.com/questions/55233269/how-to-retrieve-username-and-password-from-windows-vault-using-java\r\n\r\nBut for me they don&#39;t give me clear answer which api to use. If you could help me on my way to access this credential manager that would be awesome. ","title":"Use the windows credential manager in Java to get credentials for authentication into git and other services","body":"<p>At the moment we store the passwords in a plain text file to sign into git and other services. We want to finaly get rid of it and use the windows credential manager. The only problem we are facing is that I don't seem to find a solution to do it java.</p>\n<p>I already looked at the following topics:</p>\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/9221245/how-do-i-store-and-retrieve-credentials-from-the-windows-vault-credential-manage\">How do I store and retrieve credentials from the Windows Vault credential manager?</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/55233269/how-to-retrieve-username-and-password-from-windows-vault-using-java\">How to retrieve username and password from windows vault using java?</a></p>\n</li>\n</ul>\n<p>But for me they don't give me clear answer which api to use. If you could help me on my way to access this credential manager that would be awesome.</p>\n"},{"tags":["java","elasticsearch"],"comments":[{"owner":{"account_id":1317368,"reputation":28514,"user_id":1263942,"accept_rate":96,"display_name":"Bruno Grieder"},"score":0,"creation_date":1672391792,"post_id":74954936,"comment_id":132280673,"body_markdown":"[Github isue](https://github.com/elastic/elasticsearch-java/issues/473) opened","body":"<a href=\"https://github.com/elastic/elasticsearch-java/issues/473\" rel=\"nofollow noreferrer\">Github isue</a> opened"}],"answers":[{"comments":[{"owner":{"account_id":1317368,"reputation":28514,"user_id":1263942,"accept_rate":96,"display_name":"Bruno Grieder"},"score":0,"creation_date":1672391424,"post_id":74955522,"comment_id":132280587,"body_markdown":"Thanks but no... Using the Void class is a good idea. Did you try it with success yourself?","body":"Thanks but no... Using the Void class is a good idea. Did you try it with success yourself?"},{"owner":{"account_id":24908380,"reputation":3091,"user_id":18778181,"display_name":"rabbitbr"},"score":0,"creation_date":1672399711,"post_id":74955522,"comment_id":132282505,"body_markdown":"yes, this code works. you want only id document you don&#39;t need a dto to map the source once you use source:false.","body":"yes, this code works. you want only id document you don&#39;t need a dto to map the source once you use source:false."},{"owner":{"account_id":1317368,"reputation":28514,"user_id":1263942,"accept_rate":96,"display_name":"Bruno Grieder"},"score":0,"creation_date":1672415817,"post_id":74955522,"comment_id":132286639,"body_markdown":"Does not work for me. What versions are you using?","body":"Does not work for me. What versions are you using?"}],"tags":[],"owner":{"account_id":24908380,"reputation":3091,"user_id":18778181,"display_name":"rabbitbr"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672343861,"creation_date":1672343861,"answer_id":74955522,"question_id":74954936,"body_markdown":"Maybe this works for you:\r\n\r\n    SearchRequest sr = SearchRequest.of(r -&gt; r\r\n        .index(&quot;idx_name&quot;)\r\n        .source(s -&gt; s.fetch(false))\r\n        .size(10000));\r\n\r\n    System.out.println(&quot;Request: &quot; + sr);\r\n\r\n    try {\r\n      var response = this.esClient.search(sr, Void.class);\r\n      response.hits().hits().forEach(hit -&gt; {\r\n        System.out.println(&quot;ID: &quot; + hit.id());\r\n      });\r\n    } catch (ElasticsearchException | IOException e) {\r\n    }","title":"Elasticsearch Java 8.5: retrieve all Ids","body":"<p>Maybe this works for you:</p>\n<pre><code>SearchRequest sr = SearchRequest.of(r -&gt; r\n    .index(&quot;idx_name&quot;)\n    .source(s -&gt; s.fetch(false))\n    .size(10000));\n\nSystem.out.println(&quot;Request: &quot; + sr);\n\ntry {\n  var response = this.esClient.search(sr, Void.class);\n  response.hits().hits().forEach(hit -&gt; {\n    System.out.println(&quot;ID: &quot; + hit.id());\n  });\n} catch (ElasticsearchException | IOException e) {\n}\n</code></pre>\n"}],"owner":{"account_id":1317368,"reputation":28514,"user_id":1263942,"accept_rate":96,"display_name":"Bruno Grieder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":436,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672343861,"creation_date":1672339396,"question_id":74954936,"body_markdown":"I am trying to retrieve all  (elasticsearch) Ids of an index using the following code.\r\n\r\n```Java\r\n    SearchRequest sr = SearchRequest.of(r -&gt; r\r\n        .index(&quot;my_index&quot;)\r\n        .source(s -&gt; s.fetch(false))\r\n        .size(10000));\r\n\r\n    System.out.println(&quot;Request: &quot; + sr);\r\n\r\n    final SearchResponse&lt;MyDoc&gt; response;\r\n    try {\r\n        response = this.esClient.search(sr, MyDoc.class);\r\n    } catch (ElasticsearchException | IOException e) {\r\n        throw new MyException(&quot;fetch all ids: request failed: &quot; + e.getMessage(), e);\r\n    }\r\n\r\n    System.out.println(&quot;Response: &quot; + response);\r\n```\r\n\r\nThere are no results in the response. However, the printed request is \r\n\r\n```\r\nPOST /my_index/_search?typed_keys=true {&quot;_source&quot;:false,&quot;size&quot;:10000}\r\n```\r\n\r\nwhich works perfectly fine when run directly as a REST request.\r\n\r\n\r\nAny idea how to do it using the Java client?\r\n\r\nThe REST response is \r\n\r\n```json\r\n{\r\n  &quot;took&quot;: 1,\r\n  &quot;timed_out&quot;: false,\r\n  &quot;_shards&quot;: {\r\n    &quot;total&quot;: 1,\r\n    &quot;successful&quot;: 1,\r\n    &quot;skipped&quot;: 0,\r\n    &quot;failed&quot;: 0\r\n  },\r\n  &quot;hits&quot;: {\r\n    &quot;total&quot;: {\r\n      &quot;value&quot;: 999,\r\n      &quot;relation&quot;: &quot;eq&quot;\r\n    },\r\n    &quot;max_score&quot;: 1,\r\n    &quot;hits&quot;: [\r\n      {\r\n        &quot;_index&quot;: &quot;my_index&quot;,\r\n        &quot;_id&quot;: &quot;2LHJSP6dTjXuEM2vsEDyxdG4Y7HPzXL15tFvrkyZm8xn&quot;,\r\n        &quot;_score&quot;: 1\r\n      },\r\n      {\r\n        &quot;_index&quot;: &quot;my_index&quot;,\r\n        &quot;_id&quot;: &quot;A8RCf2mV4qeWvLxSfzKNX418E734uEifCenoCAiM3syB&quot;,\r\n        &quot;_score&quot;: 1\r\n      },\r\n      ...\r\n    ]\r\n  }\r\n}\r\n```","title":"Elasticsearch Java 8.5: retrieve all Ids","body":"<p>I am trying to retrieve all  (elasticsearch) Ids of an index using the following code.</p>\n<pre><code>    SearchRequest sr = SearchRequest.of(r -&gt; r\n        .index(&quot;my_index&quot;)\n        .source(s -&gt; s.fetch(false))\n        .size(10000));\n\n    System.out.println(&quot;Request: &quot; + sr);\n\n    final SearchResponse&lt;MyDoc&gt; response;\n    try {\n        response = this.esClient.search(sr, MyDoc.class);\n    } catch (ElasticsearchException | IOException e) {\n        throw new MyException(&quot;fetch all ids: request failed: &quot; + e.getMessage(), e);\n    }\n\n    System.out.println(&quot;Response: &quot; + response);\n</code></pre>\n<p>There are no results in the response. However, the printed request is</p>\n<pre><code>POST /my_index/_search?typed_keys=true {&quot;_source&quot;:false,&quot;size&quot;:10000}\n</code></pre>\n<p>which works perfectly fine when run directly as a REST request.</p>\n<p>Any idea how to do it using the Java client?</p>\n<p>The REST response is</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;took&quot;: 1,\n  &quot;timed_out&quot;: false,\n  &quot;_shards&quot;: {\n    &quot;total&quot;: 1,\n    &quot;successful&quot;: 1,\n    &quot;skipped&quot;: 0,\n    &quot;failed&quot;: 0\n  },\n  &quot;hits&quot;: {\n    &quot;total&quot;: {\n      &quot;value&quot;: 999,\n      &quot;relation&quot;: &quot;eq&quot;\n    },\n    &quot;max_score&quot;: 1,\n    &quot;hits&quot;: [\n      {\n        &quot;_index&quot;: &quot;my_index&quot;,\n        &quot;_id&quot;: &quot;2LHJSP6dTjXuEM2vsEDyxdG4Y7HPzXL15tFvrkyZm8xn&quot;,\n        &quot;_score&quot;: 1\n      },\n      {\n        &quot;_index&quot;: &quot;my_index&quot;,\n        &quot;_id&quot;: &quot;A8RCf2mV4qeWvLxSfzKNX418E734uEifCenoCAiM3syB&quot;,\n        &quot;_score&quot;: 1\n      },\n      ...\n    ]\n  }\n}\n</code></pre>\n"},{"tags":["java","spring-batch"],"owner":{"account_id":12062415,"reputation":35,"user_id":8820931,"display_name":"Almir Fontenele"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672343538,"creation_date":1672343538,"question_id":74955479,"body_markdown":"I need to set timeout on itemReader when execute JdbcPagingItemReader.\r\n\r\n\r\n&gt; \t@Bean(value = READER_EXTRATO) \t@StepScope \tpublic\r\n&gt; JdbcPagingItemReader&lt;Extrato&gt; readerExtrato(final DataSource\r\n&gt; dataSource, PagingQueryProvider queryProvider) {\r\n&gt; \t\tlogMethodFromClass(&quot;readerExtrato()&quot;, this.getClass().getName());\t\r\n&gt; \t\t \t\treturn new JdbcPagingItemReaderBuilder&lt;Extrato&gt;()\r\n&gt; \t\t\t\t.name(EXTRATO)\r\n&gt; \t\t\t\t.dataSource(dataSource)\r\n&gt; \t\t\t\t.queryProvider(queryProvider)\r\n&gt; \t\t\t\t.rowMapper(new ExtratoRowMapper())\r\n&gt; \t\t\t\t.fetchSize(pageSize)\r\n&gt; \t\t\t\t.pageSize(pageSize)\r\n&gt; \t\t\t\t.build(); \t}\r\n\r\nHow I resolve this question , in JdbcPagingItemReaderBuilder not has setTimeout?","title":"JdbcPagingItemReader how set timeout","body":"<p>I need to set timeout on itemReader when execute JdbcPagingItemReader.</p>\n<blockquote>\n<p>@Bean(value = READER_EXTRATO)   @StepScope  public\nJdbcPagingItemReader readerExtrato(final DataSource\ndataSource, PagingQueryProvider queryProvider) {\nlogMethodFromClass(&quot;readerExtrato()&quot;, this.getClass().getName());<br />\nreturn new JdbcPagingItemReaderBuilder()\n.name(EXTRATO)\n.dataSource(dataSource)\n.queryProvider(queryProvider)\n.rowMapper(new ExtratoRowMapper())\n.fetchSize(pageSize)\n.pageSize(pageSize)\n.build();   }</p>\n</blockquote>\n<p>How I resolve this question , in JdbcPagingItemReaderBuilder not has setTimeout?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9453,"page":770,"page_size":100}
